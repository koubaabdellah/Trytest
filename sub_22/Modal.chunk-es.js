webpackJsonp([4],{242:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(257);t.default=a.a},257:function(e,t,o){"use strict";var a=o(2),d=o(156);const s=document.documentElement,l="[js-hook-modal]",i="[js-hook-button-modal-close]",r="modal--is-showing",n="is--modal-open";function setTabIndex(e,t){[...e.querySelectorAll('a, area, input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, video')].forEach(e=>e.tabIndex=t)}t.a=new class Modal{constructor(){this.registeredModals={},[...document.querySelectorAll(l)].forEach(e=>this.setupModalRegistry(e)),this.bindEvents()}customBind(e){[...document.querySelectorAll(e.hook)].forEach(e=>this.setupModalRegistry(e))}setupModalRegistry(e){const t=e.getAttribute("id"),o={el:e,id:t,triggerBtn:[...document.querySelectorAll(`[aria-controls=${t}]`)],closeBtn:[...e.querySelectorAll(i)]};"true"===e.dataset.modalMobileOnly&&d.a.isTabletLandscapeAndBigger||(setTabIndex(o.el,-1),this.registeredModals[`modal-${t}`]=o),this.bindModalEvents(o)}bindEvents(){a.a.$on("modal::close",e=>this.closeModal(e)),a.a.$on("modal::open",(e,t)=>this.openModal(e,t)),a.a.$on("modal::bind",e=>this.customBind(e))}bindModalEvents({el:e,id:t,triggerBtn:o,closeBtn:d}){o.forEach(o=>o.addEventListener("click",()=>{e.modalIsOpen?a.a.$trigger(`modal[${t}]::close`,{data:{id:t}}):a.a.$trigger(`modal[${t}]::open`,{data:{id:t,button:o}})})),a.a.$on(`modal[${t}]::close`,()=>this.closeModal({id:t})),a.a.$on(`modal[${t}]::open`,()=>this.openModal({id:t})),d.forEach(e=>e.addEventListener("click",()=>{a.a.$trigger(`modal[${t}]::close`,{data:{id:t}})})),document.addEventListener("keyup",e=>{27===e.keyCode&&a.a.$trigger(`modal[${t}]::close`,{data:{id:t}})})}openModal(e){const t=this.registeredModals[`modal-${e.id}`];if(!t)return;const o="true"===t.el.dataset.modalAutoFocus,d="true"===t.el.dataset.modalNoBodyClass;"true"===t.el.dataset.modalCloseAllOthers&&Object.keys(this.registeredModals).filter(t=>this.registeredModals[t].id!==e.id).forEach(e=>{const t=this.registeredModals[e];t.el.modalIsOpen&&a.a.$trigger(`modal[${t.id}]::close`,{data:{id:t.id}})}),d||(s.classList.add(`modal-${e.id}--is-open`),s.classList.add(n)),t.el.tabIndex=1,setTabIndex(t.el,1),t.el.classList.add(r),t.el.modalIsOpen=!0,a.a.$trigger("focustrap::activate",{data:{element:t.el,autoFocus:o}})}closeModal(e){if(!e||!e.id){for(const e of Object.keys(this.registeredModals))this.closeModal({id:this.registeredModals[e].id}),a.a.$trigger("focustrap::deactivate");return}const t=this.registeredModals[`modal-${e.id}`];t&&("true"===t.el.dataset.modalNoBodyClass||(s.classList.remove(`modal-${e.id}--is-open`),s.classList.remove(n)),t.el.tabIndex=-1,setTabIndex(t.el,-1),t.el.classList.remove(r),t.el.modalIsOpen=!1,a.a.$trigger("focustrap::deactivate"),this.clearCurrentFocus())}clearCurrentFocus(){document.activeElement!=document.body&&document.activeElement.blur()}}}});