// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.24/esri/copyright.txt for details.//>>built
require({cache:{"esri/views/2d/layers/BitmapTileLayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../engine/BitmapTileContainer".split(" "),function(m,n,c,g,a,d,f,k,h,p){m.BitmapTileLayerView2D=e=>{e=function(q){function u(){return q.apply(this,arguments)||
this}n._inheritsLoose(u,q);var t=u.prototype;t.attach=function(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`);this._bitmapView=new p.BitmapTileContainer(this._tileInfoView);this.container.addChild(this._bitmapView)};t.detach=function(){var y;this.container.removeChild(this._bitmapView);null==(y=this._bitmapView)?void 0:y.removeAllChildren()};return u}(e);return e=c.__decorate([h.subclass("esri.views.2d.layers.BitmapTileLayerView2D")],e)};Object.defineProperties(m,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/LayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../engine/Container ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(m,n,c,g,a,d,f,k,h,p,e,q,u,t,y,C,F){const G=g.ofType({key:"type",base:t,typeMap:{rect:y,path:F,geometry:C}});m.LayerView2DMixin=v=>{v=function(D){function B(){var r=D.apply(this,arguments)||this;r.attached=!1;r.clips=new G;r.lastUpdateId=-1;r.moving=!1;r.updateRequested=!1;return r}n._inheritsLoose(B,D);var w=B.prototype;w.initialize=function(){var r,z,E,A;const l=null!=(r=null==(z=this.view)?void 0:z.spatialReferenceLocked)?r:!0;(null==(E=this.view)?0:E.spatialReference)&&l&&!this.spatialReferenceSupported?
this.addResolvingPromise(Promise.reject(new d("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new u.Container),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([f.watch(()=>this.suspended,b=>{this.container&&(this.container.visible=!b);this.view&&!b&&this.updateRequested&&this.view.requestUpdate()},f.syncAndInitial),
f.watch(()=>{var b,x;return null!=(b=null==(x=this.layer)?void 0:x.opacity)?b:1},b=>{this.container&&(this.container.opacity=b)},f.syncAndInitial),f.watch(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",b=>{this.container&&(this.container.blendMode=b)},f.syncAndInitial),f.watch(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,b=>{this.container&&(this.container.effect=b)},f.syncAndInitial),f.on(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)})]),
null!=(A=this.view)&&A.whenLayerView?this.view.whenLayerView(this.layer).then(b=>{b===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))};w.destroy=function(){this.processDetach();this.updateRequested=!1};w.processAttach=function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())};w.processDetach=function(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=
!1)};w.isVisibleAtScale=function(r){const z=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!z)return!0;const {minScale:E,maxScale:A}=z;return(0===E||r<=E)&&(0===A||r>=A)};w.requestUpdate=function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};w.processUpdate=function(r){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",r),this.updateRequested&&!this.suspended&&
(this.updateRequested=!1,this.update(r)))};w.hitTest=function(r,z){return Promise.resolve(null)};w.supportsSpatialReference=function(r){return!0};w.canResume=function(){return this.spatialReferenceSupported?D.prototype.canResume.call(this)?this.visibleAtCurrentScale:!1:!1};w.getSuspendInfo=function(){const r=D.prototype.getSuspendInfo.call(this),z=!this.spatialReferenceSupported,E=this.visibleAtCurrentScale;z&&(r.spatialReferenceNotSupported=z);E&&(r.outsideScaleRange=E);return r};n._createClass(B,
[{key:"spatialReferenceSupported",get:function(){var r;const z=null==(r=this.view)?void 0:r.spatialReference;return null==z||this.supportsSpatialReference(z)}},{key:"updating",get:function(){var r;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null==(r=this.updatingHandles)||!r.updating))}},{key:"visibleAtCurrentScale",get:function(){return this.isVisibleAtScale(this.view.scale)}}]);return B}(v);c.__decorate([k.property()],v.prototype,
"attached",void 0);c.__decorate([k.property({type:G,set(D){D=a.referenceSetter(D,this._get("clips"),G);this._set("clips",D)}})],v.prototype,"clips",void 0);c.__decorate([k.property()],v.prototype,"container",void 0);c.__decorate([k.property()],v.prototype,"moving",void 0);c.__decorate([k.property({readOnly:!0})],v.prototype,"spatialReferenceSupported",null);c.__decorate([k.property({readOnly:!0})],v.prototype,"updateParameters",void 0);c.__decorate([k.property()],v.prototype,"updateRequested",void 0);
c.__decorate([k.property()],v.prototype,"updating",null);c.__decorate([k.property()],v.prototype,"view",void 0);c.__decorate([k.property({readOnly:!0})],v.prototype,"visibleAtCurrentScale",null);return v=c.__decorate([q.subclass("esri.views.2d.layers.LayerView2D")],v)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/support/ClipArea":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass".split(" "),
function(m,n,c,g,a,d,f,k,h){c=function(p){function e(){return p.apply(this,arguments)||this}m._inheritsLoose(e,p);return e}(c.JSONSupport);return c=n.__decorate([h.subclass("esri.views.layers.support.ClipArea")],c)})},"esri/views/layers/support/ClipRect":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),
function(m,n,c,g,a,d,f,k){var h;g=h=function(p){function e(){var q=p.apply(this,arguments)||this;q.type="rect";q.left=null;q.right=null;q.top=null;q.bottom=null;return q}m._inheritsLoose(e,p);e.prototype.clone=function(){return new h({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};m._createClass(e,[{key:"version",get:function(){return(this._get("version")||0)+1}}]);return e}(k);n.__decorate([c.property({type:[Number,String],json:{write:!0}})],g.prototype,"left",void 0);n.__decorate([c.property({type:[Number,
String],json:{write:!0}})],g.prototype,"right",void 0);n.__decorate([c.property({type:[Number,String],json:{write:!0}})],g.prototype,"top",void 0);n.__decorate([c.property({type:[Number,String],json:{write:!0}})],g.prototype,"bottom",void 0);n.__decorate([c.property({readOnly:!0})],g.prototype,"version",null);return g=h=n.__decorate([f.subclass("esri.views.layers.support.ClipRect")],g)})},"esri/views/layers/support/Geometry":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea ../../../geometry/Extent ../../../geometry/Polygon".split(" "),
function(m,n,c,g,a,d,f,k,h,p,e,q,u){var t;c={base:h,key:"type",typeMap:{extent:q,polygon:u}};e=t=function(y){function C(){var F=y.apply(this,arguments)||this;F.type="geometry";F.geometry=null;return F}m._inheritsLoose(C,y);C.prototype.clone=function(){return new t({geometry:this.geometry.clone()})};m._createClass(C,[{key:"version",get:function(){return(this._get("version")||0)+1}}]);return C}(e);n.__decorate([g.property({types:c,json:{read:p.fromJSON,write:!0}})],e.prototype,"geometry",void 0);n.__decorate([g.property({readOnly:!0})],
e.prototype,"version",null);return e=t=n.__decorate([k.subclass("esri.views.layers.support.Geometry")],e)})},"esri/views/layers/support/Path":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),function(m,n,c,g,a,d,f,k){g=function(h){function p(){var e=h.apply(this,
arguments)||this;e.type="path";e.path=[];return e}m._inheritsLoose(p,h);m._createClass(p,[{key:"version",get:function(){return(this._get("version")||0)+1}}]);return p}(k);n.__decorate([c.property({type:[[[Number]]],json:{write:!0}})],g.prototype,"path",void 0);n.__decorate([c.property({readOnly:!0})],g.prototype,"version",null);return g=n.__decorate([f.subclass("esri.views.layers.support.Path")],g)})},"esri/views/2d/layers/support/imageUtils":function(){define(["exports"],function(m){function n(c){const g=
document.createElement("canvas");[g.width,g.height]=c;return g}m.createBlankImage=n;m.resampleImage=function(c,g,a,d){if(a.level===d.level)return g;const f=c.tileInfo.size;var k=c.getTileResolution(a.level),h=c.getTileResolution(d.level),p=c.getLODInfoAt(d.level),e=p.getXForColumn(d.col);d=p.getYForRow(d.row);p=c.getLODInfoAt(a.level);c=p.getXForColumn(a.col);const q=p.getYForRow(a.row);p=(g instanceof HTMLImageElement?g.naturalWidth:g.width)/f[0];a=(g instanceof HTMLImageElement?g.naturalHeight:
g.height)/f[1];e=Math.round((e-c)/k*p);d=Math.round(-(d-q)/k*a);c=Math.round(h/k*f[0]*p);k=Math.round(h/k*f[1]*a);h=n(f);h.getContext("2d").drawImage(g,e,d,c,k,0,0,f[0],f[1]);return h};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/RefreshableLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,n,c,g,a,d,f,k,h,p){return e=>{e=function(q){function u(){return q.apply(this,arguments)||this}m._inheritsLoose(u,q);u.prototype.initialize=function(){this.handles.add(a.on(()=>this.layer,"refresh",t=>{this.doRefresh(t.dataChanged).catch(y=>{g.isAbortError(y)||c.getLogger(this.declaredClass).error(y)})}),"RefreshableLayerView")};return u}(e);n.__decorate([d.property()],e.prototype,"layer",void 0);return e=n.__decorate([p.subclass("esri.layers.mixins.RefreshableLayerView")],e)}})},"esri/views/layers/TileLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../renderers/support/clickToleranceUtils".split(" "),
function(m,n,c,g,a,d,f,k,h,p,e){return q=>{q=function(u){function t(){return u.apply(this,arguments)||this}m._inheritsLoose(t,u);t.prototype.fetchPopupFeatures=function(){var y=m._asyncToGenerator(function*(C,F){var G=this,{layer:v}=this;if(!C)throw new c("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:v});if("tile"!==v.type)throw new c("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:v.type});const D=this.get("view.scale");v=v.allSublayers.toArray().filter(B=>
{const w=0===B.minScale||D<=B.minScale,r=0===B.maxScale||D>=B.maxScale;return B.popupTemplate&&B.popupEnabled&&B.visible&&w&&r});return a.eachAlways(v.map(function(){var B=m._asyncToGenerator(function*(w){const r=w.createQuery();var z=g.isSome(F)?F.event:null;z=e.calculateTolerance({renderer:w.renderer,event:z});r.geometry=G.createFetchPopupFeaturesQueryGeometry(C,z);r.outFields=yield w.popupTemplate.getRequiredFields();return(yield w.queryFeatures(r)).features});return function(w){return B.apply(this,
arguments)}}())).then(B=>[].concat(...B.map(w=>w.value).filter(Boolean)))});return function(C,F){return y.apply(this,arguments)}}();return t}(q);n.__decorate([d.property()],q.prototype,"layer",void 0);return q=n.__decorate([p.subclass("esri.layers.mixins.TileLayerView")],q)}})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(m){function n(a,d){return d?"xoffset"in d&&d.xoffset?Math.max(a,Math.abs(d.xoffset)):"yoffset"in d&&d.yoffset?Math.max(a,Math.abs(d.yoffset||
0)):a:a}function c(a,d){if("number"===typeof a)return a;if(a&&a.stops&&a.stops.length){{a=a.stops;let f=d=0;for(let k=0;k<a.length;k++){const h=a[k].size;"number"===typeof h&&(d+=h,f++)}a=d/f}return a}return d}function g(a,d){if(!d)return a;d=d.filter(h=>"size"===h.type).map(h=>{const {maxSize:p,minSize:e}=h;return(c(p,a)+c(e,a))/2});let f=0;const k=d.length;if(0===k)return a;for(let h=0;h<k;h++)f+=d[h];return Math.max(Math.floor(f/k),a)}m.calculateTolerance=function(a){const d=a&&a.renderer;a="touch"===
(a&&a.event&&a.event.pointerType)?9:6;if(!d)return a;a="visualVariables"in d?g(a,d.visualVariables):a;if("simple"===d.type)return n(a,d.symbol);if("unique-value"===d.type){let f=a;d.uniqueValueInfos.forEach(k=>{f=n(f,k.symbol)});return f}if("class-breaks"===d.type){let f=a;d.classBreakInfos.forEach(k=>{f=n(f,k.symbol)});return f}return a};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),
function(m,n,c,g,a,d){function f(h,p,e,q=new d){let u;if("2d"===e.type)u=p*e.resolution;else if("3d"===e.type){var t=e.overlayPixelSizeInMapUnits(h),y=e.basemapSpatialReference;u=c.isSome(y)&&!y.equals(e.spatialReference)?g.getMetersPerUnitForSR(y)/g.getMetersPerUnitForSR(e.spatialReference):p*t}p=h.x-u;t=h.y-u;y=h.x+u;h=h.y+u;({spatialReference:e}=e);q.xmin=Math.min(p,y);q.ymin=Math.min(t,h);q.xmax=Math.max(p,y);q.ymax=Math.max(t,h);q.spatialReference=e;return q}const k=new d;m.createQueryGeometry=
f;m.intersectsDrapedGeometry=function(h,p,e){h=e.toMap(h);if(c.isNone(h))return!1;const q=a.calculateTolerance();return f(h,q,e,k).intersects(p)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})}}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/spatialReferenceUtils ./BitmapTileLayerView2D ./LayerView2D ./support/imageUtils ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ../../layers/LayerView ../../layers/RefreshableLayerView ../../layers/TileLayerView ../../support/drapedUtils".split(" "),function(m,
n,c,g,a,d,f,k,h,p,e,q,u,t,y,C,F,G,v,D,B,w){const r=[0,0];f=function(z){function E(){var l=z.apply(this,arguments)||this;l._tileStrategy=null;l._fetchQueue=null;l.layer=null;return l}m._inheritsLoose(E,z);var A=E.prototype;A.update=function(l){this._fetchQueue.pause();this._fetchQueue.state=l.state;this._tileStrategy.update(l);this._fetchQueue.resume()};A.attach=function(){const l="tileServers"in this.layer?this.layer.tileServers:null;this._tileInfoView=new y(this.layer.tileInfo,this.layer.fullExtent);
this._fetchQueue=new F({tileInfoView:this._tileInfoView,concurrency:l&&10*l.length||10,process:(b,x)=>this.fetchTile(b,x)});this._tileStrategy=new G({cachePolicy:"keep",resampling:this.resampling,acquireTile:b=>this.acquireTile(b),releaseTile:b=>this.releaseTile(b),tileInfoView:this._tileInfoView});this.requestUpdate();this.handles.add(a.watch(()=>this.resampling,()=>{this.doRefresh()}));z.prototype.attach.call(this)};A.detach=function(){z.prototype.detach.call(this);this._tileStrategy.destroy();
this._fetchQueue.clear();this.container.removeAllChildren();this._fetchQueue=this._tileStrategy=this._tileInfoView=null};A.moveStart=function(){this.requestUpdate()};A.viewChange=function(){this.requestUpdate()};A.moveEnd=function(){this.requestUpdate()};A.supportsSpatialReference=function(l){var b;return e.equals(null==(b=this.layer.tileInfo)?void 0:b.spatialReference,l)};A.createFetchPopupFeaturesQueryGeometry=function(l,b){return w.createQueryGeometry(l,b,this.view)};A.doRefresh=function(){var l=
m._asyncToGenerator(function*(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach(b=>this._enqueueTileFetch(b)))});return function(){return l.apply(this,arguments)}}();A.isUpdating=function(){var l,b;return null!=(l=null==(b=this._fetchQueue)?void 0:b.updating)?l:!1};A.acquireTile=function(l){l=this._bitmapView.createTile(l);const b=l.bitmap;[b.x,b.y]=this._tileInfoView.getTileCoords(r,l.key);b.resolution=this._tileInfoView.getTileResolution(l.key);[b.width,
b.height]=this._tileInfoView.tileInfo.size;this._enqueueTileFetch(l);this._bitmapView.addChild(l);this.requestUpdate();return l};A.releaseTile=function(l){this._fetchQueue.abort(l.key.id);this._bitmapView.removeChild(l);l.once("detach",()=>l.destroy());this.requestUpdate()};A.fetchTile=function(){var l=m._asyncToGenerator(function*(b,x={}){var H="tilemapCache"in this.layer?this.layer.tilemapCache:null;const {signal:J,resamplingLevel:L=0}=x;if(!H)try{return yield this._fetchImage(b,J)}catch(I){if(!g.isAbortError(I)&&
!this.resampling)return t.createBlankImage(this._tileInfoView.tileInfo.size);if(3>L&&(H=this._tileInfoView.getTileParentId(b.id)))return H=new C(H),x=yield this.fetchTile(H,{...x,resamplingLevel:L+1}),t.resampleImage(this._tileInfoView,x,H,b);throw I;}x=new C(0,0,0,0);let K;try{yield H.fetchAvailabilityUpsample(b.level,b.row,b.col,x,{signal:J});if(x.level!==b.level&&!this.resampling)return t.createBlankImage(this._tileInfoView.tileInfo.size);K=yield this._fetchImage(x,J)}catch(I){if(g.isAbortError(I))throw I;
K=yield this._fetchImage(b,J)}return this.resampling?t.resampleImage(this._tileInfoView,K,x,b):K});return function(b){return l.apply(this,arguments)}}();A._enqueueTileFetch=function(){var l=m._asyncToGenerator(function*(b){if(!this._fetchQueue.has(b.key.id)){try{const x=yield this._fetchQueue.push(b.key);b.bitmap.source=x;b.bitmap.width=this._tileInfoView.tileInfo.size[0];b.bitmap.height=this._tileInfoView.tileInfo.size[1];b.once("attach",()=>this.requestUpdate())}catch(x){g.isAbortError(x)||c.getLogger(this.declaredClass).error(x)}this.requestUpdate()}});
return function(b){return l.apply(this,arguments)}}();A._fetchImage=function(){var l=m._asyncToGenerator(function*(b,x){return this.layer.fetchTile(b.level,b.row,b.col,{signal:x})});return function(b,x){return l.apply(this,arguments)}}();m._createClass(E,[{key:"resampling",get:function(){return!("resampling"in this.layer)||!1!==this.layer.resampling}}]);return E}(B(D(q.BitmapTileLayerView2D(u.LayerView2DMixin(v)))));n.__decorate([d.property()],f.prototype,"_fetchQueue",void 0);n.__decorate([d.property()],
f.prototype,"resampling",null);return f=n.__decorate([p.subclass("esri.views.2d.layers.TileLayerView2D")],f)});