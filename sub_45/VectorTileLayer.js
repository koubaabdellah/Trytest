// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.24/esri/copyright.txt for details.//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/serviceTileInfoProperty ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(p,n,c,d,u,h,k,
a,e,f,y,v,C){p.ArcGISCachedService=b=>{b=function(r){function w(){var t=r.apply(this,arguments)||this;t.copyright=null;t.minScale=0;t.maxScale=0;t.spatialReference=null;t.tileInfo=null;t.tilemapCache=null;return t}n._inheritsLoose(w,r);var F=w.prototype;F.readMinScale=function(t,D){return null!=D.minLOD&&null!=D.maxLOD?t:0};F.readMaxScale=function(t,D){return null!=D.minLOD&&null!=D.maxLOD?t:0};F.readTilemapCache=function(t,D){return D.capabilities&&D.capabilities.includes("Tilemap")?new v.TilemapCache({layer:this}):
null};n._createClass(w,[{key:"supportsBlankTile",get:function(){return 10.2<=this.version}}]);return w}(b);c.__decorate([u.property({json:{read:{source:"copyrightText"}}})],b.prototype,"copyright",void 0);c.__decorate([u.property()],b.prototype,"minScale",void 0);c.__decorate([e.reader("service","minScale")],b.prototype,"readMinScale",null);c.__decorate([u.property()],b.prototype,"maxScale",void 0);c.__decorate([e.reader("service","maxScale")],b.prototype,"readMaxScale",null);c.__decorate([u.property({type:C})],
b.prototype,"spatialReference",void 0);c.__decorate([u.property({readOnly:!0})],b.prototype,"supportsBlankTile",null);c.__decorate([u.property(y.serviceTileInfoProperty)],b.prototype,"tileInfo",void 0);c.__decorate([u.property()],b.prototype,"tilemapCache",void 0);c.__decorate([e.reader("service","tilemapCache",["capabilities"])],b.prototype,"readTilemapCache",null);c.__decorate([u.property()],b.prototype,"version",void 0);return b=c.__decorate([f.subclass("esri.layers.mixins.ArcGISCachedService")],
b)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(p,n){function c(u,h,k,a){if(!u)return null;const {minScale:e,maxScale:f,minLOD:y,maxLOD:v}=h;if(null!=y&&null!=v)return a&&a.ignoreMinMaxLOD?n.fromJSON(u):n.fromJSON({...u,lods:u.lods.filter(({level:C})=>null!=C&&C>=y&&C<=v)});if(0!==e&&0!==f){const C=e?Math.round(1E4*e)/1E4:Infinity,b=f?Math.round(1E4*f)/
1E4:-Infinity;return n.fromJSON({...u,lods:u.lods.filter(r=>{r=Math.round(1E4*r.scale)/1E4;return r<=C&&r>=b})})}return n.fromJSON(u)}const d={type:n,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:c}}}}};p.readServiceTileInfo=c;p.serviceTileInfoProperty=d;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(p,n,c,d,u,h,k,a,e,f,y,v,C,b,r,w,F,t,D){var B;c=new c.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});d=B=function(K){function L(g){g=K.call(this,g)||this;g.dpi=96;g.format=null;g.origin=null;g.minScale=0;g.maxScale=0;g.size=null;g.spatialReference=null;return g}p._inheritsLoose(L,K);L.create=function(g=
{}){const {resolutionFactor:q=1,scales:A,size:l=256,spatialReference:x=r.WebMercator,numLODs:G=24}=g;if(!F.isValid(x)){g=[];if(A)for(var E=0;E<A.length;E++){var J=A[E];g.push({level:E,scale:J,resolution:J})}else for(E=5E-4,J=G-1;0<=J;J--)g.unshift({level:J,scale:E,resolution:E}),E*=2;return new B({dpi:96,lods:g,origin:new b(0,0,x),size:[l,l],spatialReference:x})}E=F.getInfo(x);g=g.origin?new b({x:g.origin.x,y:g.origin.y,spatialReference:x}):E?new b({x:E.origin[0],y:E.origin[1],spatialReference:x}):
new b({x:0,y:0,spatialReference:x});E=1/(39.37*h.getMetersPerUnitForSR(x)*96);J=[];if(A)for(var O=0;O<A.length;O++){var Q=A[O];J.push({level:O,scale:Q,resolution:Q*E})}else{var P=F.isGeographic(x)?512/l*5.916575275917094E8:256/l*5.91657527591555E8;O=Math.ceil(G/q);J.push({level:0,scale:P,resolution:P*E});for(Q=1;Q<O;Q++)P/=2**q,J.push({level:Q,scale:P,resolution:P*E})}return new B({dpi:96,lods:J,origin:g,size:[l,l],spatialReference:x})};var H=L.prototype;H.readOrigin=function(g,q){return b.fromJSON({spatialReference:q.spatialReference,
...g})};H.readSize=function(g,q){return[q.cols,q.rows]};H.writeSize=function(g,q){q.cols=g[0];q.rows=g[1]};H.zoomToScale=function(g){const q=this.scales;if(0>=g)return q[0];if(g>=q.length-1)return q[q.length-1];{const A=Math.floor(g);return q[A]/(q[A]/q[A+1])**(g-A)}};H.scaleToZoom=function(g){const q=this.scales,A=q.length-1;let l=0;for(;l<A;l++){const x=q[l],G=q[l+1];if(x<=g)break;if(G===g)return l+1;if(x>g&&G<g)return l+Math.log(x/g)/Math.log(x/G)}return l};H.snapScale=function(g,q=.95){g=this.scaleToZoom(g);
return g%Math.floor(g)>=q?this.zoomToScale(Math.ceil(g)):this.zoomToScale(Math.floor(g))};H.tileAt=function(g,q,A,l){var x=this.lodAt(g);if(!x)return null;let G;if("number"===typeof q)G=q,q=A;else{if(F.equals(q.spatialReference,this.spatialReference))G=q.x,q=q.y;else{l=t.project(q,this.spatialReference);if(u.isNone(l))return null;G=l.x;q=l.y}l=A}A=x.resolution*this.size[0];x=x.resolution*this.size[1];l||(l={id:null,level:0,row:0,col:0,extent:w.create()});l.level=g;l.row=Math.floor((this.origin.y-
q)/x+.001);l.col=Math.floor((G-this.origin.x)/A+.001);this.updateTileInfo(l);return l};H.updateTileInfo=function(g,q=B.ExtrapolateOptions.NONE){var A=this.lodAt(g.level);A||q!==B.ExtrapolateOptions.POWER_OF_TWO||(q=this.lods[this.lods.length-1],q.level<g.level&&(A=q));if(A){var l=g.level-A.level;q=A.resolution*this.size[0]/2**l;A=A.resolution*this.size[1]/2**l;g.id=`${g.level}/${g.row}/${g.col}`;g.extent||(g.extent=w.create());g.extent[0]=this.origin.x+g.col*q;g.extent[1]=this.origin.y-(g.row+1)*
A;g.extent[2]=g.extent[0]+q;g.extent[3]=g.extent[1]+A}};H.upsampleTile=function(g){const q=this._upsampleLevels[g.level];if(!q||-1===q.parentLevel)return!1;g.level=q.parentLevel;g.row=Math.floor(g.row/q.factor+.001);g.col=Math.floor(g.col/q.factor+.001);this.updateTileInfo(g);return!0};H.getTileBounds=function(g,q){var {resolution:A}=this.lodAt(q.level);const l=A*this.size[0];A*=this.size[1];g[0]=this.origin.x+q.col*l;g[1]=this.origin.y-(q.row+1)*A;g[2]=g[0]+l;g[3]=g[1]+A;return g};H.lodAt=function(g){return this._levelToLOD&&
this._levelToLOD[g]||null};H.clone=function(){return B.fromJSON(this.write({}))};H.getOrCreateCompatible=function(g,q){if(256===this.size[0]&&256===this.size[1])return 256===g?this:null;const A=[],l=this.lods.length;for(let x=0;x<l;x++){const G=this.lods[x];A.push(new D({level:G.level,scale:G.scale,resolution:G.resolution*q}))}return new B({size:[g,g],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:A})};H._initializeUpsampleLevels=
function(){const g=this.lods;this._upsampleLevels=[];let q=null;for(let A=0;A<g.length;A++){const l=g[A];this._upsampleLevels[l.level]={parentLevel:q?q.level:-1,factor:q?q.resolution/l.resolution:0};q=l}};p._createClass(L,[{key:"isWrappable",get:function(){const {spatialReference:g,origin:q}=this;if(g&&q){const A=F.getInfo(g);return g.isWrappable&&Math.abs(A.origin[0]-q.x)<=A.dx}return!1}},{key:"lods",set:function(g){let q=0,A=0;const l=[];this._levelToLOD={};g&&(q=-Infinity,A=Infinity,g.forEach(x=>
{l.push(x.scale);q=x.scale>q?x.scale:q;A=x.scale<A?x.scale:A;this._levelToLOD[x.level]=x}));this._set("scales",l);this._set("minScale",q);this._set("maxScale",A);this._set("lods",g);this._initializeUpsampleLevels()}}]);return L}(d.JSONSupport);n.__decorate([k.property({type:Number,json:{write:!0}})],d.prototype,"compressionQuality",void 0);n.__decorate([k.property({type:Number,json:{write:!0}})],d.prototype,"dpi",void 0);n.__decorate([k.property({type:String,json:{read:c.read,write:c.write,origins:{"web-scene":{read:!1,
write:!1}}}})],d.prototype,"format",void 0);n.__decorate([k.property({readOnly:!0})],d.prototype,"isWrappable",null);n.__decorate([k.property({type:b,json:{write:!0}})],d.prototype,"origin",void 0);n.__decorate([y.reader("origin")],d.prototype,"readOrigin",null);n.__decorate([k.property({type:[D],value:null,json:{write:!0}})],d.prototype,"lods",null);n.__decorate([k.property({readOnly:!0})],d.prototype,"minScale",void 0);n.__decorate([k.property({readOnly:!0})],d.prototype,"maxScale",void 0);n.__decorate([k.property({readOnly:!0})],
d.prototype,"scales",void 0);n.__decorate([k.property({cast:K=>Array.isArray(K)?K:"number"===typeof K?[K,K]:[256,256]})],d.prototype,"size",void 0);n.__decorate([y.reader("size",["rows","cols"])],d.prototype,"readSize",null);n.__decorate([C.writer("size",{cols:{type:f.Integer},rows:{type:f.Integer}})],d.prototype,"writeSize",null);n.__decorate([k.property({type:r,json:{write:!0}})],d.prototype,"spatialReference",void 0);d=B=n.__decorate([v.subclass("esri.layers.support.TileInfo")],d);(function(K){K=
K.ExtrapolateOptions||(K.ExtrapolateOptions={});K[K.NONE=0]="NONE";K[K.POWER_OF_TWO=1]="POWER_OF_TWO"})(d||(d={}));return d})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(p,n,c,d,u,h,k,a){var e;c=e=function(f){function y(v){v=
f.call(this,v)||this;v.cols=null;v.level=0;v.levelValue=null;v.origin=null;v.resolution=0;v.rows=null;v.scale=0;return v}p._inheritsLoose(y,f);y.prototype.clone=function(){return new e({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return y}(c.JSONSupport);n.__decorate([d.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0);n.__decorate([d.property({type:k.Integer,
json:{write:!0}})],c.prototype,"level",void 0);n.__decorate([d.property({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0);n.__decorate([d.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0);n.__decorate([d.property({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0);n.__decorate([d.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,
"rows",void 0);n.__decorate([d.property({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);return c=e=n.__decorate([a.subclass("esri.layers.support.LOD")],c)})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/byteSizeEstimations ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(p,n,c,d,u,h,k,a,e,f,y,v,C,b,r,w,F,t,D,B,K){var L;const H=e.getLogger("esri.layers.support.TilemapCache");p.TilemapCache=L=function(g){function q(l){l=g.call(this,l)||this;l._pendingTilemapRequests={};l._availableLevels={};l.levels=5;l.cacheByteSize=2*h.ByteSizeUnit.MEGABYTES;l.request=d;l._prefetchingEnabled=!0;return l}n._inheritsLoose(q,g);var A=q.prototype;A.initialize=function(){this._tilemapCache=new f(this.cacheByteSize);this.own([C.watch(()=>{const {layer:l}=this;return[null==l?void 0:
l.parsedUrl,null==l?void 0:l.tileServers,null==l?void 0:l.apiKey,null==l?void 0:l.customParameters]},()=>this._initializeTilemapDefinition()),C.watch(()=>{var l,x;return null==(l=this.layer)?void 0:null==(x=l.tileInfo)?void 0:x.lods},l=>this._initializeAvailableLevels(l),C.syncAndInitial)]);this._initializeTilemapDefinition()};A.castLevels=function(l){return 2>=l?(H.error("Minimum levels for Tilemap is 3, but got ",l),3):l};A.fetchTilemap=function(l,x,G,E){if(!this._availableLevels[l])return Promise.reject(new k("tilemap-cache:level-unavailable",
`Level ${l} is unavailable in the service`));const J=this._tmpTilemapDefinition;if(l=this._tilemapFromCache(l,x,G,J))return Promise.resolve(l);const O=E&&E.signal;E={...E,signal:null};return new Promise((Q,P)=>{v.onAbort(O,()=>P(v.createAbortError()));const R=K.tilemapDefinitionId(J);let S=this._pendingTilemapRequests[R];if(!S){S=K.Tilemap.fromDefinition(J,E).then(M=>{this._tilemapCache.put(R,M,M.byteSize);return M});const T=()=>delete this._pendingTilemapRequests[R];this._pendingTilemapRequests[R]=
S;S.then(T,T)}S.then(Q,P)})};A.getAvailability=function(l,x,G){return this._availableLevels[l]?(l=this._tilemapFromCache(l,x,G,this._tmpTilemapDefinition))?l.getAvailability(x,G):"unknown":"unavailable"};A.fetchAvailability=function(l,x,G,E){return this._availableLevels[l]?this.fetchTilemap(l,x,G,E).catch(J=>J).then(J=>{if(J instanceof K.Tilemap){J=J.getAvailability(x,G);if("unavailable"===J)throw new k("tile-map:tile-unavailable","Tile is not available",{level:l,row:x,col:G});return J}if(v.isAbortError(J))throw J;
return"unknown"}):Promise.reject(new k("tilemap-cache:level-unavailable",`Level ${l} is unavailable in the service`))};A.fetchAvailabilityUpsample=function(l,x,G,E,J){E.level=l;E.row=x;E.col=G;const O=this.layer.tileInfo;O.updateTileInfo(E);const Q=this.fetchAvailability(l,x,G,J).catch(P=>{if(v.isAbortError(P))throw P;if(O.upsampleTile(E))return this.fetchAvailabilityUpsample(E.level,E.row,E.col,E);throw P;});this._fetchAvailabilityUpsamplePrefetch(E.id,l,x,G,J,Q);return Q};A._fetchAvailabilityUpsamplePrefetch=
function(){var l=n._asyncToGenerator(function*(x,G,E,J,O,Q){if(this._prefetchingEnabled){var P=`prefetch-${x}`;if(!this.handles.has(P)){var R=new AbortController;Q.then(()=>R.abort(),()=>R.abort());var S=!1;this.handles.add({remove(){S||(S=!0,R.abort())}},P);yield b.waitTicks(10,R.signal).catch(()=>{});S||(S=!0,this.handles.remove(P));if(!v.isAborted(R))for(x={id:x,level:G,row:E,col:J},O={...O,signal:R.signal},G=this.layer.tileInfo,E=0;L._prefetches.length<L._maxPrefetch&&G.upsampleTile(x);++E){const T=
this.fetchAvailability(x.level,x.row,x.col,O);L._prefetches.push(T);J=()=>{L._prefetches.removeUnordered(T)};T.then(J,J)}}}});return function(x,G,E,J,O,Q){return l.apply(this,arguments)}}();A._initializeTilemapDefinition=function(){var l;if(this.layer.parsedUrl){var {parsedUrl:x,apiKey:G,customParameters:E}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:x.path,query:r.objectToQuery({...x.query,...E,token:null!=G?G:null==(l=x.query)?void 0:l.token}),tileServers:this.layer.tileServers,
request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};A._tilemapFromCache=function(l,x,G,E){E.level=l;E.row=x-x%this.size;E.col=G-G%this.size;l=K.tilemapDefinitionId(E);return this._tilemapCache.get(l)};A._initializeAvailableLevels=function(l){this._availableLevels={};l&&l.forEach(x=>this._availableLevels[x.level]=!0)};n._createClass(q,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const l=this;return{get prefetchingEnabled(){return l._prefetchingEnabled},
set prefetchingEnabled(x){l._prefetchingEnabled=x},hasTilemap(x,G,E){return!!l._tilemapFromCache(x,G,E,l._tmpTilemapDefinition)}}}}]);return q}(a.HandleOwnerMixin(u));p.TilemapCache._maxPrefetch=4;p.TilemapCache._prefetches=new y({initialSize:L._maxPrefetch});c.__decorate([w.property({constructOnly:!0,type:Number})],p.TilemapCache.prototype,"levels",void 0);c.__decorate([D.cast("levels")],p.TilemapCache.prototype,"castLevels",null);c.__decorate([w.property({readOnly:!0,type:Number})],p.TilemapCache.prototype,
"size",null);c.__decorate([w.property({constructOnly:!0,type:Number})],p.TilemapCache.prototype,"cacheByteSize",void 0);c.__decorate([w.property({constructOnly:!0})],p.TilemapCache.prototype,"layer",void 0);c.__decorate([w.property({constructOnly:!0})],p.TilemapCache.prototype,"request",void 0);p.TilemapCache=L=c.__decorate([B.subclass("esri.layers.support.TilemapCache")],p.TilemapCache);Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],
function(p){function n(c){return 32+c.length}p.ByteSizeUnit=void 0;(function(c){c[c.KILOBYTES=1024]="KILOBYTES";c[c.MEGABYTES=1048576]="MEGABYTES";c[c.GIGABYTES=1073741824]="GIGABYTES"})(p.ByteSizeUnit||(p.ByteSizeUnit={}));p.estimateAttributesObjectSize=function(c){if(!c)return 0;let d=32;for(const u in c)if(c.hasOwnProperty(u)){const h=c[u];switch(typeof h){case "string":d+=n(h);break;case "number":d+=16;break;case "boolean":d+=4}}return d};p.estimateFixedArraySize=function(c,d){return 32+c.length*
d};p.estimateNumberByteSize=function(){return 16};p.estimateStringByteSize=n;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error","../../core/lang"],function(p,n,c,d,u){function h(a){if("vector-tile"===a.service.type)var e=`${a.service.url}/tilemap/${a.level}/${a.row}/${a.col}/${a.width}/${a.height}`;else e=a.service.tileServers,e=`${e&&e.length?
e[a.row%e.length]:a.service.url}/tilemap/${a.level}/${a.row}/${a.col}/${a.width}/${a.height}`;(a=a.service.query)&&(e=`${e}?${a}`);return e}let k=function(){function a(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var e=a.prototype;e.getAvailability=function(f,y){if("unknown"!==this._allAvailability)return this._allAvailability;f=(f-this.location.top)*this.location.width+(y-this.location.left);y=f>>3;const v=this._tileAvailabilityBitSet;return 0>
y||y>v.length?"unknown":v[y]&1<<f%8?"available":"unavailable"};e._updateFromData=function(f){let y=!0,v=!0;const C=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let b=0;for(let r=0;r<f.length;r++){const w=r%8;f[r]?(v=!1,C[b]|=1<<w):y=!1;7===w&&++b}v?this._allAvailability="unavailable":y?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=C,this.byteSize+=C.length)};a.fromDefinition=function(f,y){const v=f.service.request||n,{row:C,
col:b,width:r,height:w}=f,F={query:{f:"json"}};y=y?{...F,...y}:F;return v(h(f),y).then(t=>t.data).catch(t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:C,left:b,width:r,height:w},valid:!0,data:c.constant(r*w,0)};throw t;}).then(t=>{if(t.location&&(t.location.top!==C||t.location.left!==b||t.location.width!==r||t.location.height!==w))throw new d("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:C,left:b,width:r,height:w}});
return a.fromJSON(t)})};a.fromJSON=function(f){a._validateJSON(f);const y=new a;y.location=Object.freeze(u.clone(f.location));y._updateFromData(f.data);return Object.freeze(y)};a._validateJSON=function(f){if(!f||!f.location)throw new d("tilemap:missing-location","Location missing from tilemap response");if(!1===f.valid)throw new d("tilemap:invalid","Tilemap response was marked as invalid");if(!f.data)throw new d("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(f.data))throw new d("tilemap:data-mismatch",
"Data must be an array of numbers");if(f.data.length!==f.location.width*f.location.height)throw new d("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return a}();p.Tilemap=k;p.tilemapDefinitionId=function(a){return`${a.level}/${a.row}/${a.col}/${a.width}/${a.height}`};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/imageUtils":function(){define(["exports"],function(p){let n=null;p.checkWebPSupport=
function(c){if(n)return n;const d={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return n=new Promise(u=>{const h=new Image;h.onload=()=>{h.onload=h.onerror=
null;u(0<h.width&&0<h.height)};h.onerror=()=>{h.onload=h.onerror=null;u(!1)};h.src="data:image/webp;base64,"+d[c]})};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/SpriteSource":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../request","../../core/Error","../../core/Logger","../../core/urlUtils"],function(p,n,c,d,u){const h=d.getLogger("esri.layers.support.SpriteSource");return function(){function k(e,f,y,v){this.baseURL=
e;this.devicePixelRatio=f;this.maxTextureSize=y;this._spriteImageFormat=v;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}var a=k.prototype;a.getSpriteInfo=function(e){return this._spritesData[e]};a.load=function(){var e=p._asyncToGenerator(function*(f){if(this.baseURL){this.loadStatus="loading";try{yield this._loadSprites(f),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"});return function(f){return e.apply(this,
arguments)}}();a._loadSprites=function(e){this._isRetina=1.15<this.devicePixelRatio?!0:!1;const f=u.urlToObject(this.baseURL),y=f.query?"?"+u.objectToQuery(f.query):"",v=this._isRetina?"@2x":"",C=`${f.path}${v}.${this._spriteImageFormat}${y}`;return Promise.all([n(`${f.path}${v}.json${y}`,e),n(C,{responseType:"image",...e})]).then(([b,r])=>{var w=Object.keys(b.data);if(!w||0===w.length||1===w.length&&"_ssl"===w[0]||!r||!r.data)return this._spritesData=this.image=null,this.width=this.height=0,null;
this._spritesData=b.data;b=r.data;r=Math.max(this.maxTextureSize,4096);if(b.width>r||b.height>r)throw b=`Sprite resource for style ${f.path} is bigger than the maximum allowed of ${r} pixels}`,h.error(b),new c("SpriteSource",b);this.width=b.width;this.height=b.height;r=document.createElement("canvas");w=r.getContext("2d");r.width=b.width;r.height=b.height;w.drawImage(b,0,0,b.width,b.height);b=w.getImageData(0,0,b.width,b.height);b=new Uint8Array(b.data);for(w=0;w<b.length;w+=4)r=b[w+3]/255,b[w]*=
r,b[w+1]*=r,b[w+2]*=r;this.image=b})};p._createClass(k,[{key:"spriteNames",get:function(){const e=[];for(const f in this._spritesData)e.push(f);e.sort();return e}}]);return k}()})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),function(p,n,c,d,u,h,k){function a(){a=n._asyncToGenerator(function*(t,
D){const B={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[K,L]="string"===typeof t?[t,null]:[null,t.jsonUrl];yield y(B,"esri",t,L,D);t={layerDefinition:B.validatedSource,url:K,serviceUrl:B.sourceUrl,style:B.style,styleUrl:B.styleUrl,spriteUrl:B.style.sprite&&f(B.styleBase,B.style.sprite),spriteFormat:B.spriteFormat,glyphsUrl:B.style.glyphs&&f(B.styleBase,B.style.glyphs),sourceNameToSource:B.sourceNameToSource,
primarySourceName:B.primarySourceName};e(t.spriteUrl);e(t.glyphsUrl);return t});return a.apply(this,arguments)}function e(t){t&&(t=h.getOrigin(t),F&&!F.includes(t)&&F.push(t))}function f(...t){let D=void 0;for(let B=0;B<t.length;++B)h.isProtocolRelative(t[B])?D&&(D=D.split("://")[0]+":"+t[B].trim()):D=h.isAbsolute(t[B])?t[B]:h.join(D,t[B]);return h.removeTrailingSlash(D)}function y(t,D,B,K,L){return v.apply(this,arguments)}function v(){v=n._asyncToGenerator(function*(t,D,B,K,L){u.throwIfAborted(L);
let H,g;if("string"===typeof B){B=h.normalize(B);e(B);var q=yield d(B,{...L,responseType:"json",query:{f:"json",...null==L?void 0:L.query}});q.ssl&&(H&&(H=H.replace(/^http:/i,"https:")),g&&(g=g.replace(/^http:/i,"https:")));g=H=B}else q={data:B},H=B.jsonUrl||null,g=K;q=q.data;if(q.sources)return t.styleUrl=H||null,C(t,q,g,L);if(!q.sources)return t.sourceUrl?r(t,q,g,!1,D,L):(t.sourceUrl=H||null,r(t,q,g,!0,D,L));throw Error("You must specify the URL or the JSON for a service or for a style.");});return v.apply(this,
arguments)}function C(t,D,B,K){return b.apply(this,arguments)}function b(){b=n._asyncToGenerator(function*(t,D,B,K){B=B?h.removeFile(B):h.getAppBaseUrl();t.styleBase=B;t.style=D;t.styleUrl&&e(t.styleUrl);D["sprite-format"]&&"webp"===D["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const L=[];if(D.sources&&D.sources.esri){const H=D.sources.esri;H.url?yield y(t,"esri",f(B,H.url),void 0,K):L.push(y(t,"esri",H,B,K))}for(const H of Object.keys(D.sources))"esri"!==H&&"vector"===D.sources[H].type&&
(D.sources[H].url?L.push(y(t,H,f(B,D.sources[H].url),void 0,K)):D.sources[H].tiles&&L.push(y(t,H,D.sources[H],B,K)));yield Promise.all(L)});return b.apply(this,arguments)}function r(t,D,B,K,L,H){return w.apply(this,arguments)}function w(){w=n._asyncToGenerator(function*(t,D,B,K,L,H){B=B?h.removeTrailingSlash(B)+"/":h.getAppBaseUrl();if(D.hasOwnProperty("tileInfo"))var g=D;else{var q={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},
A=78271.51696400007,l=2.958287637957775E8,x=[],G=D.hasOwnProperty("minzoom")?+D.minzoom:0,E=D.hasOwnProperty("maxzoom")?+D.maxzoom:22;for(let J=0;J<=E;J++)J>=G&&x.push({level:J,scale:l,resolution:A}),A/=2,l/=2;for(g of D.tiles)e(f(B,g));g={capabilities:"TilesOnly",initialExtent:q,fullExtent:q,minScale:0,maxScale:0,tiles:D.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:x,spatialReference:{wkid:102100}}}}q=new k(L,h.addQueryParameters(B,
null==H?void 0:H.query),g);if(!K&&t.primarySourceName in t.sourceNameToSource){A=t.sourceNameToSource[t.primarySourceName];if(!A.isCompatibleWith(q))return;null!=q.fullExtent&&(null!=A.fullExtent?A.fullExtent.union(q.fullExtent):A.fullExtent=q.fullExtent.clone());A.tileInfo.lods.length<q.tileInfo.lods.length&&(A.tileInfo=q.tileInfo)}K?(t.sourceBase=B,t.source=D,t.validatedSource=g,t.primarySourceName=L,t.sourceUrl&&e(t.sourceUrl)):e(B);t.sourceNameToSource[L]=q;if(!t.style){if(null==D.defaultStyles)throw Error();
return"string"===typeof D.defaultStyles?y(t,"",f(B,D.defaultStyles,"root.json"),void 0,H):y(t,"",D.defaultStyles,f(B,"root.json"),H)}});return w.apply(this,arguments)}const F=c.defaults&&c.defaults.io.corsEnabledServers;p.loadMetadata=function(t,D){return a.apply(this,arguments)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest ./VectorTilesRequestManager".split(" "),
function(p,n,c,d,u,h,k,a,e){return function(){function f(v,C,b){this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=v;this.sourceUrl=C;v=c.urlToObject(this.sourceUrl);C=n.clone(b);var r=C.tiles;if(v)for(var w=0;w<r.length;w++){var F=c.urlToObject(r[w]);F&&(c.isAbsolute(F.path)||(F.path=c.join(v.path,F.path)),r[w]=c.addQueryParameters(F.path,{...v.query,...F.query}))}this.tileServers=r;w=b.capabilities&&b.capabilities.split(",").map(t=>t.toLowerCase().trim());r=!0===(null==
b?void 0:b.exportTilesAllowed);w=!0===(null==w?void 0:w.includes("tilemap"));F=r&&b.hasOwnProperty("maxExportTilesCount")?b.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:r,supportsTileMap:w},exportTiles:r?{maxExportTilesCount:+F}:null};this.tileInfo=u.readServiceTileInfo(C.tileInfo,C,null,{ignoreMinMaxLOD:!0});C=b.tileMap?c.addQueryParameters(c.join(v.path,b.tileMap),v.query):null;w?(this.type="vector-tile",this.tilemap=new a(new h.TilemapCache({layer:{parsedUrl:v,tileInfo:this.tileInfo,
type:"vector-tile",tileServers:this.tileServers}}),C)):C&&(this.tilemap=new k(C));this.fullExtent=d.fromJSON(b.fullExtent)}var y=f.prototype;y.destroy=function(){};y.getRefKey=function(){var v=p._asyncToGenerator(function*(C,b){var r,w;return null!=(r=null==(w=this.tilemap)?void 0:w.dataKey(C,b))?r:C});return function(C,b){return v.apply(this,arguments)}}();y.requestTile=function(v,C,b,r){return e.request(this.tileServers[C%this.tileServers.length],v,C,b,r)};y.isCompatibleWith=function(v){var C=this.tileInfo;
v=v.tileInfo;if(!C.spatialReference.equals(v.spatialReference)||!C.origin.equals(v.origin)||Math.round(C.dpi)!==Math.round(v.dpi))return!1;C=C.lods;v=v.lods;const b=Math.min(C.length,v.length);for(let r=0;r<b;r++){const w=C[r],F=v[r];if(w.level!==F.level||Math.round(w.scale)!==Math.round(F.scale))return!1}return!0};return f}()})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],
function(p,n,c,d){return function(){function u(k){this.url=k}var h=u.prototype;h.fetchTileIndex=function(){var k=p._asyncToGenerator(function*(){this._tileIndexPromise||(this._tileIndexPromise=n(this.url).then(a=>a.data.index));return this._tileIndexPromise});return function(){return k.apply(this,arguments)}}();h.dataKey=function(){var k=p._asyncToGenerator(function*(a,e){const f=yield this.fetchTileIndex();c.throwIfAborted(e);return this._getIndexedDataKey(f,a)});return function(a,e){return k.apply(this,
arguments)}}();h._getIndexedDataKey=function(k,a){const e=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return null;for(;0!==a.level;)a=new d(a.level-1,a.row>>1,a.col>>1,a.world),e.push(a);a=e.pop();let f,y;if(1===k)return a;for(;e.length;)if(f=e.pop(),y=(f.col&1)+((f.row&1)<<1),k){if(0===k[y]){a=null;break}if(1===k[y]){a=f;break}a=f;k=k[y]}return a};return u}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],
function(p,n){let c=function(){function d(h,k,a,e){this.set(h,k,a,e)}d.getId=function(h,k,a,e){return"object"===typeof h?`${h.level}/${h.row}/${h.col}/${h.world}`:`${h}/${k}/${a}/${e}`};var u=d.prototype;u.acquire=function(h,k,a,e){this.set(h,k,a,e)};u.contains=function(h){const k=h.level-this.level;return this.row===h.row>>k&&this.col===h.col>>k&&this.world===h.world};u.equals=function(h){return this.level===h.level&&this.row===h.row&&this.col===h.col&&this.world===h.world};u.clone=function(){return new d(this)};
u.release=function(){this.world=this.col=this.row=this.level=0};u.set=function(h,k,a,e){if(null==h)this.world=this.col=this.row=this.level=0;else if("object"===typeof h)this.level=h.level||0,this.row=h.row||0,this.col=h.col||0,this.world=h.world||0;else if("string"===typeof h){const [f,y,v,C]=h.split("/");this.level=parseFloat(f);this.row=parseFloat(y);this.col=parseFloat(v);this.world=parseFloat(C)}else this.level=+h,this.row=+k,this.col=+a,this.world=+e||0;return this};u.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};
u.getParentKey=function(){return 0>=this.level?null:new d(this.level-1,this.row>>1,this.col>>1,this.world)};u.getChildKeys=function(){const h=this.level+1,k=this.row<<1,a=this.col<<1,e=this.world;return[new d(h,k,a,e),new d(h,k,a+1,e),new d(h,k+1,a,e),new d(h,k+1,a+1,e)]};u.compareRowMajor=function(h){return this.row<h.row?-1:this.row>h.row?1:this.col<h.col?-1:this.col>h.col?1:0};p._createClass(d,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(h){this.set(h)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return d}();c.pool=new n(c,null,null,25,50);return c})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(p,n,c,d){return function(){function u(k,a){this._tilemap=k;this._tileIndexUrl=a}var h=u.prototype;h.fetchTileIndex=function(){var k=p._asyncToGenerator(function*(a){this._tileIndexPromise||
(this._tileIndexPromise=n(this._tileIndexUrl,{query:{...null==a?void 0:a.query}}).then(e=>e.data.index));return this._tileIndexPromise});return function(a){return k.apply(this,arguments)}}();h.dataKey=function(k,a){const {level:e,row:f,col:y}=k,v=new d(k);return this._tilemap.fetchAvailabilityUpsample(e,f,y,v,a).then(()=>{v.world=k.world;return v}).catch(C=>{if(c.isAbortError(C))throw C;return null})};return u}()})},"esri/views/2d/engine/vectorTiles/style/VectorTilesRequestManager":function(){define(["exports",
"../../../../../request","../../../../../core/lang"],function(p,n,c){function d(h,k){const a=u.get(h);if(a)return a.then(e=>c.clone(e));k=n(h,{responseType:"array-buffer",...k}).then(({data:e})=>{u.delete(h);return e}).catch(e=>{u.delete(h);throw e;});u.set(h,k);return k}const u=new Map;p.request=function(h,k,a,e,f){h=h.replace(/\{z\}/gi,k.toString()).replace(/\{y\}/gi,a.toString()).replace(/\{x\}/gi,e.toString());return d(h,f)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/portal/support/urlUtils":function(){define(["exports"],function(p){const n=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,c={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};p.parseKnownArcGISOnlineDomain=function(d){d=null==d?void 0:d.match(n);if(!d)return null;const [,u,h,k]=d;if(!u)return null;let a=d=null,
e=null;const {devext:f,qaext:y,www:v}=c;if(h)if(d=u,k)switch(k.toLowerCase()){case "devext":({customBaseUrl:a,portalHostname:e}=f);break;case "qa":({customBaseUrl:a,portalHostname:e}=y);break;default:return null}else({customBaseUrl:a,portalHostname:e}=v);else switch(u.toLowerCase()){case "devext":({customBaseUrl:a,portalHostname:e}=f);break;case "qaext":({customBaseUrl:a,portalHostname:e}=y);break;case "www":({customBaseUrl:a,portalHostname:e}=v);break;default:return null}return{customBaseUrl:a,isPortal:!1,
portalHostname:e,urlKey:d}};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../layers/support/TileInfo"],function(p,n){p.areSchemasOverlapping=function(c,d){if(c===d)return!0;if(!c&&null!=d||null!=c&&!d||!c.spatialReference.equals(d.spatialReference)||c.dpi!==d.dpi)return!1;var u=c.origin;const h=d.origin;if(1E-6<=Math.abs(u.x-h.x)||1E-6<=Math.abs(u.y-h.y))return!1;c.lods[0].scale>
d.lods[0].scale?(u=c,c=d):u=d;for(d=u.lods[0].scale;d>=c.lods[c.lods.length-1].scale-1E-6;d/=2)if(1E-6>Math.abs(d-c.lods[0].scale))return!0;return!1};p.unionTileInfos=function(c,d){if(c===d)return c;if(!c&&null!=d)return d;if(null!=c&&!d)return c;const u=c.size[0],h=c.format,k=c.dpi,a={x:c.origin.x,y:c.origin.y},e=c.spatialReference.toJSON();var f=c.lods[0].scale>d.lods[0].scale?c.lods[0]:d.lods[0];c=(c.lods[c.lods.length-1].scale<=d.lods[d.lods.length-1].scale?c.lods[c.lods.length-1]:d.lods[d.lods.length-
1]).scale;d=[];let y=f.scale;f=f.resolution;let v=0;for(;y>c;)d.push({level:v,resolution:f,scale:y}),v++,y/=2,f/=2;return new n({size:[u,u],dpi:k,format:h||"pbf",origin:a,lods:d,spatialReference:e})};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],function(p,n,c,d){function u(b){switch(b){case d.ContextType.WEBGL1:return h();
case d.ContextType.WEBGL2:return k()}}function h(){if(!e){{const b=new v,r=a(d.ContextType.WEBGL1,b);c.isNone(r)||(b.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),b.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),b.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),b.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),b.supportsTextureHalfFloat=null!==r.getExtension("OES_texture_half_float"),b.supportsColorBufferFloat=
null!==r.getExtension("WEBGL_color_buffer_float"),b.supportsColorBufferFloatBlend=null!==r.getExtension("EXT_float_blend"),b.supportsColorBufferHalfFloat=null!==r.getExtension("EXT_color_buffer_half_float"));e=b}}return e}function k(){if(!f){{const b=new C,r=a(d.ContextType.WEBGL2,b);c.isNone(r)||(b.supportsColorBufferFloat=null!==r.getExtension("EXT_color_buffer_float"),b.supportsColorBufferFloatBlend=null!==r.getExtension("EXT_float_blend"),b.supportsColorBufferHalfFloat=b.supportsColorBufferFloat||
null!==r.getExtension("EXT_color_buffer_half_float"));f=b}}return f}function a(b,r){const w=document.createElement("canvas");if(!w)return null;let F=d.createContext(w,b,{failIfMajorPerformanceCaveat:!0});c.isNone(F)&&(F=d.createContext(w,b),c.isSome(F)&&(r.majorPerformanceCaveat=!0));if(c.isNone(F))return F;if(b===d.ContextType.WEBGL1){if(b=F.getParameter(F.VERSION),b=null==b?void 0:b.match(/^WebGL\s+([\d.]*)/))b=parseFloat(b[1]),r.available=.94<=b}else r.available=!0;r.maxTextureSize=F.getParameter(F.MAX_TEXTURE_SIZE);
r.supportsVertexShaderSamplers=0<F.getParameter(F.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(b=F.getShaderPrecisionFormat(F.FRAGMENT_SHADER,F.HIGH_FLOAT))r.supportsHighPrecisionFragment=0<b.precision;return F}let e,f,y=function(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=
this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},v=function(b){function r(){var w=b.apply(this,arguments)||this;w.type=d.ContextType.WEBGL1;return w}n._inheritsLoose(r,b);return r}(y),C=function(b){function r(){var w=b.apply(this,arguments)||this;w.type=d.ContextType.WEBGL2;w.supportsElementIndexUint=!0;w.supportsStandardDerivatives=!0;w.supportsInstancedArrays=!0;w.supportsTextureFloat=!0;w.supportsTextureHalfFloat=!0;return w}n._inheritsLoose(r,
b);return r}(y);p.getWebGL1Capabilities=h;p.getWebGL2Capabilities=k;p.getWebGLCapabilities=function(b){for(b=d.getContextTypes(b);1<b.length;){const r=u(b.shift());if(r.available)return r}return u(b.shift())};p.getWebGLVersionCapabilities=u;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(p,n,c){function d(a){const e=n("esri-force-webgl");if(e===p.ContextType.WEBGL1||
e===p.ContextType.WEBGL2)return[e];switch(a){case "2d":return n("mac")&&n("chrome")?[p.ContextType.WEBGL1,p.ContextType.WEBGL2]:[p.ContextType.WEBGL2,p.ContextType.WEBGL1];case "3d":return[p.ContextType.WEBGL2,p.ContextType.WEBGL1]}}function u(a,e,f={}){if(!window.WebGLRenderingContext)return k(a,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;e=h(a,e,f);c.isNone(e)&&k(a,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');
return e}function h(a,e,f={}){e=e===p.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let y=null;for(const v of e){try{y=a.getContext(v,f)}catch(C){}if(y)break}return y}function k(a,e){(a=a.parentNode)&&(a.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+e+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
p.ContextType=void 0;(function(a){a[a.WEBGL1=1]="WEBGL1";a[a.WEBGL2=2]="WEBGL2"})(p.ContextType||(p.ContextType={}));p.createContext=h;p.createContextOrErrorHTML=function(a,e,f={}){for(a=d(a);1<a.length;){const y=h(e,a.shift(),f);if(c.isSome(y))return y}return u(e,a.shift(),f)};p.getContextTypes=d;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})}}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/lang ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/vectorTileLayerLoader ../portal/support/jsonContext ../portal/support/urlUtils ../chunks/persistableUrlUtils ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(p,
n,c,d,u,h,k,a,e,f,y,v,C,b,r,w,F,t,D,B,K,L,H,g,q,A,l,x,G,E,J,O,Q,P,R){k=function(S){function T(...m){m=S.call(this,...m)||this;m._spriteSourceMap=new Map;m.currentStyleInfo=null;m.style=null;m.isReference=null;m.operationalLayerType="VectorTileLayer";m.type="vector-tile";m.url=null;m.symbolCollisionBoxesVisible=!1;m.path=null;return m}p._inheritsLoose(T,S);var M=T.prototype;M.normalizeCtorArgs=function(m,z){return"string"===typeof m?{url:m,...z}:m};M.destroy=function(){if(this.sourceNameToSource)for(const m of Object.values(this.sourceNameToSource))null==
m?void 0:m.destroy();this._spriteSourceMap.clear()};M.prefetchResources=function(){var m=p._asyncToGenerator(function*(z){yield this.loadSpriteSource(globalThis.devicePixelRatio||1,z)});return function(z){return m.apply(this,arguments)}}();M.load=function(m){var z=this;const I=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},m).catch(a.throwIfAbortError).then(p._asyncToGenerator(function*(){if(z.portalItem&&z.portalItem.id){var N=`${z.portalItem.itemUrl}/resources/styles/root.json`;
(yield c(N,{...m,query:{f:"json",...z.customParameters,token:z.apiKey}})).data&&z.read({url:N},E.createForItemRead(z.portalItem))}})).catch(a.throwIfAbortError).then(()=>this._loadStyle(m));this.addResolvingPromise(I);return Promise.resolve(this)};M.writeStyleUrl=function(m,z){m&&e.isProtocolRelative(m)&&(m=`https:${m}`);const I=h.unwrap(J.parseKnownArcGISOnlineDomain(m));z.styleUrl=O.ensureMainOnlineDomain(m,I)};M.readVersion=function(m,z){return z.version?parseFloat(z.version):parseFloat(z.currentVersion)};
M.loadSpriteSource=function(){var m=p._asyncToGenerator(function*(z=1,I){if(!this._spriteSourceMap.has(z)){var N;const U=R.getWebGLCapabilities("2d").maxTextureSize,V=null!=(N=this.currentStyleInfo)&&N.spriteUrl?e.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;N=new l(V,z,U,this.currentStyleInfo.spriteFormat);yield N.load(I);this._spriteSourceMap.set(z,N)}return this._spriteSourceMap.get(z)});return function(){return m.apply(this,arguments)}}();
M.setSpriteSource=function(){var m=p._asyncToGenerator(function*(z,I="png",N=1,U){const V=R.getWebGLCapabilities("2d").maxTextureSize;z=z?e.addQueryParameters(z,{...this.customParameters,token:this.apiKey}):null;if(!z)return null;I=new l(z,N,V,I);try{return yield I.load(U),this._spriteSourceMap.clear(),this._spriteSourceMap.set(N,I),this.currentStyleInfo.spriteUrl=z,this.emit("spriteSource-change",{spriteSource:I}),I}catch(W){a.throwIfAbortError(W)}return null});return function(z){return m.apply(this,
arguments)}}();M.loadStyle=function(){var m=p._asyncToGenerator(function*(z,I){var N;const U=z||this.style||this.url;if(this._loadingTask&&"string"===typeof U&&this.url===U)return this._loadingTask.promise;null==(N=this._loadingTask)?void 0:N.abort();this._loadingTask=a.createTask(V=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(U,{signal:V})},I);return this._loadingTask.promise});return function(z,I){return m.apply(this,arguments)}}();M.getStyleLayerId=function(m){return this.styleRepository.getStyleLayerId(m)};
M.getStyleLayerIndex=function(m){return this.styleRepository.getStyleLayerIndex(m)};M.getPaintProperties=function(m){return u.clone(this.styleRepository.getPaintProperties(m))};M.setPaintProperties=function(m,z){const I=this.styleRepository.isPainterDataDriven(m);this.styleRepository.setPaintProperties(m,z);const N=this.styleRepository.isPainterDataDriven(m);this.emit("paint-change",{layer:m,paint:z,isDataDriven:I||N})};M.getStyleLayer=function(m){return u.clone(this.styleRepository.getStyleLayer(m))};
M.setStyleLayer=function(m,z){this.styleRepository.setStyleLayer(m,z);this.emit("style-layer-change",{layer:m,index:z})};M.deleteStyleLayer=function(m){this.styleRepository.deleteStyleLayer(m);this.emit("delete-style-layer",{layer:m})};M.getLayoutProperties=function(m){return u.clone(this.styleRepository.getLayoutProperties(m))};M.setLayoutProperties=function(m,z){this.styleRepository.setLayoutProperties(m,z);this.emit("layout-change",{layer:m,layout:z})};M.setStyleLayerVisibility=function(m,z){this.styleRepository.setStyleLayerVisibility(m,
z);this.emit("style-layer-visibility-change",{layer:m,visibility:z})};M.getStyleLayerVisibility=function(m){return this.styleRepository.getStyleLayerVisibility(m)};M.write=function(m,z){return null!=z&&z.origin&&!this.styleUrl?(z.messages&&z.messages.push(new d("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):S.prototype.write.call(this,m,z)};M.getTileUrl=function(m,z,I){return null};M._getSourceAndStyle=
function(){var m=p._asyncToGenerator(function*(z,I){if(!z)throw Error("invalid style!");I=yield G.loadMetadata(z,{...I,query:{...this.customParameters,token:this.apiKey}});"webp"!==I.spriteFormat||(yield A.checkWebPSupport("lossy"))||(I.spriteFormat="png");this._set("currentStyleInfo",{...I});"string"===typeof z?(this.url=z,this.style=null):(this.url=null,this.style=z);this._set("sourceNameToSource",I.sourceNameToSource);this._set("primarySource",I.sourceNameToSource[I.primarySourceName]);this._set("styleRepository",
new P(I.style));this.read(I.layerDefinition,{origin:"service"});this.emit("load-style")});return function(z,I){return m.apply(this,arguments)}}();M._getDefaultAttribution=function(m){var z=m.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);m="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");
if(z){var I=z[2]&&z[2].toLowerCase();if(I){z=z[1]||"";for(const N of m)if(N.toLowerCase().includes(I))return e.normalize(`//static.arcgis.com/attribution/Vector${z}/${N}`)}}};M._loadStyle=function(){var m=p._asyncToGenerator(function*(z){var I,N;return null!=(I=null==(N=this._loadingTask)?void 0:N.promise)?I:this.loadStyle(null,z)});return function(z){return m.apply(this,arguments)}}();p._createClass(T,[{key:"attributionDataUrl",get:function(){var m=this.currentStyleInfo;m=m&&m.serviceUrl&&e.urlToObject(m.serviceUrl);
return m?(m=this._getDefaultAttribution(m.path))?e.addQueryParameters(m,{...this.customParameters,token:this.apiKey}):null:null}},{key:"capabilities",get:function(){const m=this.primarySource;return m?m.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){var m;return(null==(m=this.primarySource)?void 0:m.fullExtent)||null}},{key:"parsedUrl",get:function(){return this.serviceUrl?e.urlToObject(this.serviceUrl):null}},{key:"serviceUrl",
get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"tileInfo",get:function(){var m;const z=[];for(var I in this.sourceNameToSource)z.push(this.sourceNameToSource[I]);I=(null==(m=this.primarySource)?void 0:m.tileInfo)||new x;if(1<z.length)for(m=0;m<z.length;m++)Q.areSchemasOverlapping(I,
z[m].tileInfo)&&(I=Q.unionTileInfos(I,z[m].tileInfo));return I}}]);return T}(K.BlendLayer(q.ScaleRangeLayer(D.ArcGISCachedService(B.ArcGISService(H.OperationalLayer(g.PortalLayer(L.CustomParametersMixin(t.APIKeyMixin(k.MultiOriginJSONMixin(F))))))))));n.__decorate([f.property({readOnly:!0})],k.prototype,"attributionDataUrl",null);n.__decorate([f.property({type:["show","hide"]})],k.prototype,"listMode",void 0);n.__decorate([f.property({json:{read:!0,write:!0}})],k.prototype,"blendMode",void 0);n.__decorate([f.property({readOnly:!0,
json:{read:!1}})],k.prototype,"capabilities",null);n.__decorate([f.property({readOnly:!0})],k.prototype,"currentStyleInfo",void 0);n.__decorate([f.property({json:{read:!1},readOnly:!0,type:r})],k.prototype,"fullExtent",null);n.__decorate([f.property()],k.prototype,"style",void 0);n.__decorate([f.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],k.prototype,"isReference",void 0);n.__decorate([f.property({type:["VectorTileLayer"]})],k.prototype,"operationalLayerType",
void 0);n.__decorate([f.property({readOnly:!0})],k.prototype,"parsedUrl",null);n.__decorate([f.property({readOnly:!0})],k.prototype,"serviceUrl",null);n.__decorate([f.property({type:w,readOnly:!0})],k.prototype,"spatialReference",null);n.__decorate([f.property({readOnly:!0})],k.prototype,"styleRepository",void 0);n.__decorate([f.property({readOnly:!0})],k.prototype,"sourceNameToSource",void 0);n.__decorate([f.property({readOnly:!0})],k.prototype,"primarySource",void 0);n.__decorate([f.property({type:String,
readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],k.prototype,"styleUrl",null);n.__decorate([b.writer(["portal-item","web-document"],"styleUrl")],k.prototype,"writeStyleUrl",null);n.__decorate([f.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:x})],k.prototype,"tileInfo",null);n.__decorate([f.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],k.prototype,"type",void 0);n.__decorate([f.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},
"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],k.prototype,"url",void 0);n.__decorate([f.property({readOnly:!0})],k.prototype,"version",void 0);n.__decorate([v.reader("version",["version","currentVersion"])],k.prototype,"readVersion",null);n.__decorate([f.property({type:Boolean})],k.prototype,"symbolCollisionBoxesVisible",void 0);n.__decorate([f.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],k.prototype,"path",void 0);return k=n.__decorate([C.subclass("esri.layers.VectorTileLayer")],
k)});