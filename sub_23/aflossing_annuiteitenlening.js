function doBereken(){aVar.v_termijnen_startjaar=12,aVar.v_jaar!=aVar.v_startjaar_lening?(aVar.v_termijnen_startjaar=12-aVar.v_startmaand_lening+1,aVar.v_jaartermijnen=12*(aVar.v_jaar-aVar.v_startjaar_lening),aVar.v_eind_displaytermijn=aVar.v_termijnen_startjaar+aVar.v_jaartermijnen,aVar.v_start_displaytermijn=aVar.v_eind_displaytermijn-11,aVar.v_eind_displaytermijn>aVar.v_aantal_termijnen&&(aVar.v_eind_displaytermijn=aVar.v_aantal_termijnen)):(aVar.v_start_displaytermijn=1,aVar.v_eind_displaytermijn=12-aVar.v_startmaand_lening+1,aVar.v_start_displaytermijn+aVar.v_aantal_termijnen-1<aVar.v_eind_displaytermijn&&(aVar.v_eind_displaytermijn=aVar.v_start_displaytermijn+aVar.v_aantal_termijnen-1)),aVar.v_jaar!=aVar.v_startjaar_lening?aVar.v_maand_termijn1=1:aVar.v_maand_termijn1=aVar.v_startmaand_lening,aVar.v_jaarrente_eff=Math.pow(1+aVar.v_jaarrente_nom/12,12)-1,aVar.v_maandrente_eff=Math.pow(1+aVar.v_jaarrente_eff,1/12)-1,aVar.v_annuiteit=aVar.v_lening_bedrag*aVar.v_maandrente_eff/(1-Math.pow(1+aVar.v_maandrente_eff,-1*aVar.v_aantal_termijnen)),aVar.v_rentebedrag=new Array,aVar.v_rentebedrag[0]=aVar.v_lening_bedrag*aVar.v_maandrente_eff,aVar.v_aflossingbedrag=new Array,aVar.v_aflossingbedrag[0]=aVar.v_annuiteit-aVar.v_rentebedrag[0],aVar.v_restschuld=new Array,aVar.v_restschuld[0]=aVar.v_lening_bedrag;for(var e=aVar.v_start_displaytermijn;e<=aVar.v_eind_displaytermijn;e++)aVar.v_aflossingbedrag[e]=aVar.v_aflossingbedrag[0]*Math.pow(1+aVar.v_maandrente_eff,e-1),aVar.v_rentebedrag[e]=aVar.v_annuiteit-aVar.v_aflossingbedrag[e],aVar.v_restschuld[e]=aVar.v_lening_bedrag*(1-(Math.pow(1+aVar.v_maandrente_eff,e)-1)/(Math.pow(1+aVar.v_maandrente_eff,aVar.v_aantal_termijnen)-1));aVar.v_restschuld_eind_display_termijn=afronden(aVar.v_restschuld[aVar.v_eind_displaytermijn]),0!=aVar.v_restschuld_eind_display_termijn?aVar.v_restschuld_eind_display_termijn=getalNaarBedrag(aVar.v_restschuld_eind_display_termijn,!0):aVar.v_restschuld_eind_display_termijn=0,null!=debug&&debugSAV&&doDebugSAV(!0)}function afronden(e){return(Math.round(100*e)/100).toFixed(2)}function afrondenNaarBoven(e){return 0==e?0:e-parseInt(e)==0?e:Math.floor(e+1)}function startDebug(e){}function selectSTC_Options(e){$("#selectSTC").append('    <option value="0">---</option>\n    <option value="TestCase1">TestCase 1</option>\n    <option value="TestCase2">TestCase 2</option>\n    <option value="TestCase3">TestCase 3</option>\n    <option value="TestCase4">TestCase 4</option>\n  ')}function doDebugTest(e){var a={type:"keyup"};switch(e){case"TestCase1":$("#V1-1").prop("selectedIndex",1),checkVraag(document.getElementById("V1-1"),a),$("#V1-2").val("10000"),checkVraag(document.getElementById("V1-2"),a),$("#V1-3").val("5"),checkVraag(document.getElementById("V1-3"),a),$("#V1-4_maand").prop("selectedIndex",1),checkVraag(document.getElementById("V1-4_maand"),a),$("#V1-4_jaar").prop("selectedIndex",1),checkVraag(document.getElementById("V1-4_jaar"),a),$("#V1-5").val("14"),checkVraag(document.getElementById("V1-5"),a),$("#butResults").click();break;case"TestCase2":$("#V1-1").prop("selectedIndex",1),checkVraag(document.getElementById("V1-1"),a),$("#V1-2").val("10000"),checkVraag(document.getElementById("V1-2"),a),$("#V1-3").val("5"),checkVraag(document.getElementById("V1-3"),a),$("#V1-4_maand").prop("selectedIndex",3),checkVraag(document.getElementById("V1-4_maand"),a),$("#V1-4_jaar").prop("selectedIndex",1),checkVraag(document.getElementById("V1-4_jaar"),a),$("#V1-5").val("14"),checkVraag(document.getElementById("V1-5"),a),$("#butResults").click();break;case"TestCase3":$("#V1-1").prop("selectedIndex",1),checkVraag(document.getElementById("V1-1"),a),$("#V1-2").val("10000"),checkVraag(document.getElementById("V1-2"),a),$("#V1-3").val("5"),checkVraag(document.getElementById("V1-3"),a),$("#V1-4_maand").prop("selectedIndex",3),checkVraag(document.getElementById("V1-4_maand"),a),$("#V1-4_jaar").prop("selectedIndex",1),checkVraag(document.getElementById("V1-4_jaar"),a),$("#V1-5").val("6"),checkVraag(document.getElementById("V1-5"),a),$("#butResults").click();break;case"TestCase4":$("#V1-1").prop("selectedIndex",1),checkVraag(document.getElementById("V1-1"),a),$("#V1-2").val("10000"),checkVraag(document.getElementById("V1-2"),a),$("#V1-3").val("5"),checkVraag(document.getElementById("V1-3"),a),$("#V1-4_maand").prop("selectedIndex",1),checkVraag(document.getElementById("V1-4_maand"),a),$("#V1-4_jaar").prop("selectedIndex",1),checkVraag(document.getElementById("V1-4_jaar"),a),$("#V1-5").val("14"),checkVraag(document.getElementById("V1-5"),a),$("#butResults").click()}}function doFlow(e,a){switch(null!=debug&&debugJS&&doDebugJS("doFlow("+e+","+a+")"),e){case"V1-1":doVraag("V1-2");break;case"V1-2":doVraag("V1-3");break;case"V1-3":doVraag("V1-4");break;case"V1-4":doVraag("V1-5");break;case"V1-5":algValidatie("E1-1")}null!=debug&&debugSAV&&doDebugSAV(!0)}var debug,debugSAQ,debugSAR,debugSAV,debugSID,debugJS,sVersie="1.03.05.01",vraagIDfirst="V1-1",bBeslis=!0,blokMode=!1;function startModule(e){initreken(e),initVarsModuleSpecifiek(),doRebuildVars(),doVraag(vraagIDfirst),checkVraag(document.getElementById(vraagIDfirst))}function initVarsModuleSpecifiek(){aVar.sysHuidigJaar=(new Date).getFullYear(),aVar.sysHuidigMaand=(new Date).getMonth()}function valideerModuleSpecifiek(e,a,n,t){if("V1-4"==e){var r="",d=parseInt(document.getElementById(e+"_maand").value)-1,i=parseInt(document.getElementById(e+"_jaar").value);i>aVar.sysHuidigJaar&&(n[n.length]="<p>U hebt een jaar ingevuld dat in de toekomst ligt.<p>"),i==aVar.sysHuidigJaar&&d>aVar.sysHuidigMaand&&(n[n.length]="<p>U hebt een maand ingevuld die in de toekomst ligt.<p>"),aVar.v_jaar<i&&(a=!1,r="Het startjaar van de lening ligt na het jaar waarvan u een overzicht wil zien. Pas het startjaar aan, of het jaar waarvan u het overzicht wilt zien"),a?toonFout(e+"_jaar",r,!1):toonFout(e+"_jaar",r,!0)}if("V1-5"==e&&($(document.activeElement).attr("id")!=e||"blur"==t.type)){r="";var l=parseInt(document.getElementById(e).value),o=12-aVar.v_startmaand_lening+1,s=afrondenNaarBoven(s=(l-o)/12),g=aVar.v_startjaar_lening+s;aVar.v_jaar>g&&(a=!1,r="De lening moet afgelost zijn in het jaar dat u geselecteerd hebt. Er kan daarom geen overzicht worden gemaakt"),a?(toonFout(e,r,!1),aVar.v_aantal_termijnen=l,aVar.v_termijnen_startjaar=o,aVar.v_aantal_jaren=s,aVar.v_eindjaar=g):toonFout(e,r,!0)}return[a,n]}function saveVarModuleSpecifiek(e){"V1-4"==e&&(aVar.v_startmaand_lening=parseInt(document.getElementById(e+"_maand").value),aVar.v_startjaar_lening=parseInt(document.getElementById(e+"_jaar").value))}function vulaanResultaatModuleSpecifiek(e){addDataTabel()}function initVersie(){$("#content_add").empty().append('<div id="divVersie" class="clNietPrinten">'),$("#divVersie").append("<p>Versie: "+sVersie+"</p>"),$.getScript("debug.js")}fieldsetMode=!1;var aResult=aResult||{};function getResultaatE1_1(){return aVar.v_aantal_termijnen<360?aResult["E1-1a"].concat(aResult["E1-1b"]):aResult["E1-1a"]}function addDataTabel(){$("#data").append('<table id="data_table" />'),$("<caption>Annuïteitenoverzicht voor jaar: "+aVar.v_jaar+'</caption><thead><tr><th scope="col">Maand</th><th scope="col">Betaling</th><th scope="col">Betaalde rente</th><th scope="col">Aflossing</th><th scope="col">Resterende<br />bedrag</th></tr></thead>').appendTo("#data_table"),$("<tbody></tbody>").appendTo("#data_table");for(var e=getMaanden(),a=1;a<=aVar.v_maand_termijn1-1;a++)addRowToDataTabel(e[a-1][1],"0","0","0","0");a=aVar.v_maand_termijn1;for(var n=aVar.v_start_displaytermijn;n<=aVar.v_eind_displaytermijn;n++){var t=afronden(aVar.v_annuiteit);t=0!=t?getalNaarBedrag(t,!0):0;var r=afronden(aVar.v_rentebedrag[n]);r=0!=r?getalNaarBedrag(r,!0):0;var d=afronden(aVar.v_aflossingbedrag[n]);d=0!=d?getalNaarBedrag(d,!0):0;var i=afronden(aVar.v_restschuld[n]);i=0!=i?getalNaarBedrag(i,!0):0,addRowToDataTabel(e[a-1][1],t,r,d,i),a++}for(;a<=12;a++)addRowToDataTabel(e[a-1][1],"0","0","0","0");$("#data").append("<p>Het resterende bedrag van uw lening mag op 31 december "+aVar.v_jaar+" niet hoger zijn dan: € "+aVar.v_restschuld_eind_display_termijn+"</p>")}function addRowToDataTabel(e,a,n,t,r){$("#data_table tbody").append("<tr><th scope='row'>"+e+"</th><td>&euro;&nbsp;"+a+"</td><td>&euro;&nbsp;"+n+"</td><td>&euro;&nbsp;"+t+"</td><td>&euro;&nbsp;"+r+"</td></tr>")}aResult={"E1-1":["[FUNCTION:getResultaatE1_1()]"],"E1-1a":["<div id='data' class='table'>"],"E1-1b":["<p><strong>Let op!</strong><br>Is het aantal maanden waarin u de lening annuïtair aflost minder dan 360 maanden? Maak dan een 2e berekening waarbij u ervan uitgaat dat u deze lening in 360 maanden aflost. Is het saldo van uw lening op 31 december lager dan het saldo volgens de 2e berekening op dezelfde datum? Dan voldoet u aan de aflossingseis.</p>"]};var aHelp=aHelp||{};aHelp={"V1-2":["<p>Vul het bedrag in van de lening voor uw eigen woning, en waarvoor u de annuïteit wilt berekenen. Leent u ook een bedrag voor iets anders dan uw woning? Bijvoorbeeld voor een auto? Dan hoeft u dat deel van de lening niet in te vullen. De rente over dit deel van de lening is niet aftrekbaar.</p>","<h3>Wat is aftrekbaar?</h3>","<p>De rente is alleen aftrekbaar voor het gedeelte dat behoort tot uw <a target='_blank' href='/wps/wcm/connect/bldcontentnl/belastingdienst/prive/woning/eigen-woning/u-verkoopt-een-huis/bijleenregeling/eigenwoningschuld/'>eigenwoningschuld</a>. Dit is het deel van de hypotheek of lening die u gebruikt voor:</p>","<ul>","<li>de aankoop van een eigen woning</li>","<li>verbouwing of onderhoud</li>","<li>afkoop van rechten van erfpacht, opstal of beklemming</li>","<li>de eenmalige meegefinancierde (financierings)kosten</li>","</ul>"],"V1-4":["<p>Vul de maand en het jaar in waarin u het eerste maandbedrag van rente en aflossing betaalt of hebt betaald. </p>","<h3>Uitzondering voor banken</h3>","<p>Hebt u een lening bij een bank of een andere financiële instelling? En hebt u de lening halverwege de maand afgesloten? Dan betaalt u meestal de eerste maand alleen rente, en pas aflossing in de daaropvolgende maand.</p>","<p>Vul de maand in waarop u voor het eerst het volledige maandbedrag aan rente én aflossing hebt betaald. Hebt u  bijvoorbeeld op 12 april de lening afgesloten, en hebt u pas in mei voor het eerst rente en aflossing betaald? Vul bij de maand dan in: 'mei'.</p>","<h3>Uitzondering bij achteraf betalen</h3>","<p>Hebt u een lening bij uw eigen bv? Of bij een familielid? En spreekt u af dat u pas achteraf aflost en rente betaalt? Vul dan de maand en het jaar in waarop de looptijd van de lening ingaat.</p>","<p>Hebt u bijvoorbeeld in februari een lening afgesloten en bent u vanaf de maand maart rente en aflossing verschuldigd? Maar betaalt u de rente en aflossing achteraf na een half jaar. Vul bij de maand dan 'maart' in.</p>"],"V1-5":["<p>De aflossingsperiode is maximaal 360 maanden.</p>"]};var aBlok=aBlok||{};aBlok={};var aVraag=aVraag||{};function default_v_jaar(){var e=new Date,a=e.getMonth(),n=e.getFullYear();return a<3&&n--,n}aVraag={"V1-1":{opScherm:"Van welk jaar wilt u een overzicht hebben?",type:"dropdown",variabele:"v_jaar",validatie:"numeriek",dropdownKeuze:["2013:2053"],defaultKeuze:"default_v_jaar()"},"V1-2":{opScherm:"Wat is het bedrag van uw lening of hypotheek (eigenwoningschuld)?",type:"text",variabele:"v_lening_bedrag",validatie:"numeriek",mingetal:1,duizendtalpunten:!0,onblur:"checkNumeriek(this,aVraag[vraagID])"},"V1-3":{opScherm:"Wat is het rentepercentage?",opSchermAchterInput:"%",classInput:"percentage",type:"text",maxlength:6,variabele:"v_jaarrente_nom",validatie:"numeriek",decimalen:2,maxgetal:100,mingetal:.01},"V1-4":{opScherm:"Wanneer hebt u de eerste termijn betaald?",type:"dateYearMonth",variabele:"v_startdatum_lening",yearRange:"2013:2053"},"V1-5":{opScherm:"In hoeveel maanden gaat u de lening aflossen?",type:"text",variabele:"v_aantal_termijnen",validatie:"numeriek",mingetal:1,maxgetal:360,error_maxgetal:"De aflossingsperiode is maximaal 360 maanden.",onblur:"checkVraag(this, e);"}};