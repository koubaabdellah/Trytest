//>>built
require({cache:{"url:esri/dijit/ColorPicker/templates/ColorPicker.html":'\x3cdiv class\x3d"${css.container}" aria-label\x3d"${labels.widgetLabel}"\x3e\r\n  \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_header" tabindex\x3d"0"\x3e\r\n    \x3cspan class\x3d"${css.swatchPreview} ${css.container}"\x3e\r\n      \x3cspan class\x3d"${css.swatch} ${css.swatchTransparencyBackground}"\x3e\x3c/span\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"dap_previewSwatch"\r\n            class\x3d"${css.swatch}"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${css.collapseIcon} ${css.downArrowIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.colorControls}" data-dojo-attach-point\x3d"dap_colorControls"\r\n       id\x3d"${id}-color-controls" tabindex\x3d"-1"\x3e\r\n    \x3cdiv class\x3d"${css.middle}"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_paletteContainer"\r\n           class\x3d"${css.palette} ${css.container}" tabindex\x3d"0"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dap_primaryPalette"\r\n             class\x3d"${css.palette}" role\x3d"grid"\x3e\x3c/div\x3e\x3c!--\r\n      --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dap_secondaryPalette"\r\n             class\x3d"${css.palette}" role\x3d"grid"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.paletteOptions}"\x3e\r\n        \x3cinput type\x3d"text" aria-label\x3d"${labels.selectedColor}" data-dojo-type\x3d"dijit/form/TextBox"\r\n               data-dojo-attach-point\x3d"dap_hexInput" class\x3d"${css.hexInput}" /\x3e\r\n        \x3cinput class\x3d"${css.paletteToggle}" type\x3d"button"\r\n               data-dojo-type\x3d"dijit/form/ToggleButton"\r\n               data-dojo-attach-point\x3d"dap_paletteToggle"\r\n               label\x3d"${labels.more}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.footer}" data-dojo-attach-point\x3d"dap_footer"\x3e\r\n      \x3cdiv class\x3d"${css.section} ${css.displayNone}"\r\n           data-dojo-attach-point\x3d"dap_suggestedColorSection"\x3e\r\n        \x3cdiv class\x3d"${css.label}" id\x3d"${id}-suggested-colors-label"\x3e${labels.suggested}\x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.suggested} ${css.palette}"\r\n             aria-labelledby\x3d"${id}-suggested-colors-label"\r\n             data-dojo-attach-point\x3d"dap_suggestedColorPaletteContainer"\r\n             tabindex\x3d"0" role\x3d"grid"\x3e\r\n          \x3cdiv class\x3d"${css.suggested} ${css.swatchRow}"\r\n               data-dojo-attach-point\x3d"dap_suggestedColorPalette"\r\n               role\x3d"row"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.section}"\r\n           data-dojo-attach-point\x3d"dap_recentColorSection"\x3e\r\n        \x3cdiv class\x3d"${css.label}" id\x3d"${id}-recent-colors-label"\x3e${labels.recent}\x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.recent} ${css.palette}" aria-labelledby\x3d"${id}-recent-colors-label"\r\n             data-dojo-attach-point\x3d"dap_recentColorPaletteContainer"\r\n             tabindex\x3d"0" role\x3d"grid"\x3e\r\n          \x3cdiv class\x3d"${css.recent} ${css.swatchRow}"\r\n               data-dojo-attach-point\x3d"dap_recentColorPalette"\r\n               role\x3d"row"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.section}"\r\n           data-dojo-attach-point\x3d"dap_transparencySection"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dap_transparencyLabel"\r\n             class\x3d"${css.label}"\x3e${labels.transparency}\r\n      \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.transparencySlider}"\r\n             data-dojo-attach-point\x3d"dap_transparencySlider"\r\n             data-dojo-type\x3d"esri/dijit/HorizontalSlider"\r\n             data-dojo-props\x3d"minimum: 0, maximum: 100, discreteValues: 100, labels: ${_transparencyLabels}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/ColorPicker","../Color ../kernel ./_EventedWidget ./_Tooltip ./ColorPicker/colorUtil ./ColorPicker/HexPalette dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/keys dojo/on dojo/query dojo/sniff dojo/dom-style dojo/i18n!../nls/jsapi dojo/text!./ColorPicker/templates/ColorPicker.html ./HorizontalSlider dijit/form/RadioButton dijit/form/TextBox dijit/form/ToggleButton dojo/NodeList-dom".split(" "),
function(t,B,v,C,g,y,D,E,w,n,F,k,h,r,p,l,x,G,q,z,H){v=F([v,D,E,C],{baseClass:"esriColorPicker",css:{container:"esriContainer",collapsed:"esriCollapsed",collapsible:"esriCollapsible",collapseIcon:"esriCollapseIcon",colorControls:"esriColorControls",header:"esriHeader",footer:"esriFooter",middle:"esriMiddle",swatch:"esriSwatch",swatchRow:"esriSwatchRow",swatchEmpty:"esriSwatchEmpty",swatchPreview:"esriSwatchPreview",swatchTransparencyBackground:"esriSwatchTransparencyBackground",focusedSwatch:"esriSwatch--focused",
palette:"esriPalette",paletteOptions:"esriPaletteOptions",paletteToggle:"esriPaletteToggle",label:"esriLabel",hexInput:"esriHexInput",recent:"esriRecent",suggested:"esriSuggested",selected:"esriSelected",disabled:"esriDisabled",section:"esriSection",displayNone:"esriDisplayNone",transparencySlider:"esriTransparencySlider",alt:"esriAlt",downArrowIcon:"esri-icon-down"},declaredClass:"esri.dijit.ColorPicker",labels:z.widgets.colorPicker,templateString:H,constructor:function(a,d){a=a||{};this._colorInstance=
new t;this._brightsPalette=new y({colors:a.palette});this._pastelsPalette=new y({colors:this._toPastels(this._brightsPalette.get("colors"))});this._activePalette=this._brightsPalette;this._swatchCreator=a.swatchCreator||this._createSwatch;this._swatches={};this._recentSwatches={};this._suggestedSwatches={}},buildRendering:function(){this.inherited(arguments);this._createPalettes();this._noColorSwatchNode=r.create("div",{"aria-label":this.labels.noColorTooltip,className:this.css.swatch+" "+this.css.swatchEmpty,
tabIndex:0,role:"button"},this.dap_hexInput.domNode,"after")},postCreate:function(){this.inherited(arguments);this._addListeners();this._selectColor();this.dap_hexInput.intermediateChanges=!0;this.dap_transparencySlider.intermediateChanges=!0;this.createTooltips([{node:this.dap_paletteContainer,label:this.labels.paletteTooltip},{node:this.dap_hexInput,label:this.labels.hexInputTooltip},{node:this._noColorSwatchNode,label:this.labels.noColorTooltip},{node:this.dap_paletteToggle,label:this.labels.moreColorsTooltip}])},
_activePalette:null,_autoCollapseHandle:null,_brightsPalette:null,_colorInstance:null,_noColorSwatchNode:null,_pastelsPalette:null,_previousColor:null,_swatchCreator:null,_swatches:null,_swatchNavigationIndex:null,_transparencyLabels:function(){return"["+[0,50,100].map(function(a){return k.replace(z.widgets.colorPicker.percent,{percent:a})}).map(function(a){return"'"+a+"'"})+"]"}(),collapsed:!1,_setCollapsedAttr:function(a){this.collapsible&&(h.toggle(this.domNode,this.css.collapsed,a),this._set("collapsed",
a),a?this.domNode.setAttribute("aria-expanded","true"):(this.domNode.setAttribute("aria-expanded","false"),this.dap_paletteContainer.focus()))},collapsible:!1,_setCollapsibleAttr:function(a){h.toggle(this.domNode,this.css.collapsible,a);this.dap_header.tabIndex=a?0:-1;if(a){this.domNode.setAttribute("role","button");this.domNode.setAttribute("aria-haspopup","menu");this.domNode.setAttribute("aria-controls",this.dap_colorControls.id);this.domNode.setAttribute("aria-expanded",(!this.collapsed).toString());
if(!this._autoCollapseHandle){l(this.domNode,"keydown",function(c){var b=!this.collapsed&&c.keyCode!=p.ESCAPE;this.collapsed&&c.keyCode!=p.ENTER&&c.keyCode!=p.SPACE||b||(c.preventDefault(),c.keyCode===p.ESCAPE?(this.dap_header.focus(),this.set("collapsed",!0)):(this.set("collapsed",!1),this.dap_paletteContainer.focus()))}.bind(this));var d=l.pausable(this.ownerDocument,"click",function(c){c=this.domNode.contains(c.target);this.collapsed||c||this.set("collapsed",!0)}.bind(this));this._autoCollapseHandle=
d;this.own(d)}this._autoCollapseHandle.resume()}else this.domNode.removeAttribute("role"),this.domNode.removeAttribute("aria-haspopup"),this.domNode.removeAttribute("aria-controls"),this.domNode.removeAttribute("aria-expanded"),this._autoCollapseHandle&&this._autoCollapseHandle.pause();this._set("collapsible",a)},color:null,_getColorAttr:function(){return"no-color"===this.color?"no-color":new t(this.color)},_setColorAttr:function(a,d){a=a||"no-color";d=d||void 0===d;if(!this.required){if("no-color"===
a){this._set("color","no-color");this._previousColor="no-color";this._disableTransparencySlider();this._clearSelection();this._silentlyUpdateHexInput("no-color");this._updatePreviewSwatch(a);h.add(this._noColorSwatchNode,this.css.selected);d&&this.emit("color-change",{color:"no-color"});return}this._enableTransparencySlider();h.remove(this._noColorSwatchNode,this.css.selected)}var c=g.normalizeColor(a),b=this._previousColor,e=this._colorInstance,f=this.css.selected;if(b){if(g.equal(b,c))return;if(b=
this._findSwatch({colors:this._activePalette.get("colors"),color:b,swatches:this._swatches}))h.remove(b,f),q.set(b,"borderColor","")}e.setColor(c);f=e.toHex();this._set("color",new t(e));this._previousColor=c;this._silentlyUpdateIntermediateChangingValueWidget(this.dap_transparencySlider,100*(1-e.a));this._updatePreviewSwatch(e);this._checkSelection();this._silentlyUpdateHexInput(e);this.trackColors&&this._addRecentColor(f);d&&this.emit("color-change",{color:new t(e)})},colorsPerRow:13,_setColorsPerRow:function(a){this._set("colorsPerRow",
0<a?a:13)},_setPaletteAttr:function(a){var d=this._activePalette===this._brightsPalette;this._brightsPalette.set("colors",a);this._pastelsPalette.set("colors",this._toPastels(this._brightsPalette.get("colors")));this._activePalette=d?this._brightsPalette:this._pastelsPalette;this._createPalettes();this._togglePalette(!d)},recentColors:[],_getRecentColorsAttr:function(){return n.map(this.recentColors,function(a){return g.normalizeColor(a)})},_setRecentColorsAttr:function(a){this.recentColors=a||[];
this.recentColors=n.map(this.recentColors,function(d){return g.normalizeColor(d).toHex()});0===this.recentColors.length?this._clearRecentSwatches():this._renderRecentSwatches()},required:!1,_setRequiredAttr:function(a){h.toggle(this._noColorSwatchNode,this.css.displayNone,a);this._set("required",a)},_showRecentColors:!0,_setShowRecentColorsAttr:function(a){h.toggle(this.dap_recentColorSection,this.css.displayNone,!a);this._set("showRecentColors",a)},_showSuggestedColors:!1,_setShowSuggestedColorsAttr:function(a){h.toggle(this.dap_suggestedColorSection,
this.css.displayNone,!a);this._set("showSuggestedColors",a)},_showTransparencySlider:!0,_setShowTransparencySliderAttr:function(a){h.toggle(this.dap_transparencySection,this.css.displayNone,!a);this._set("showTransparencySlider",a)},suggestedColors:null,_getSuggestedColorsAttr:function(){return n.map(this.suggestedColors,function(a){return g.normalizeColor(a)})},_setSuggestedColorsAttr:function(a){this._clearSuggestedSwatches();this.suggestedColors=a||[];this.suggestedColors=n.map(this.suggestedColors,
function(d){return g.normalizeColor(d).toHex()});0<this.suggestedColors.length&&this._renderSuggestedSwatches()},trackColors:!0,addRecentColor:function(a){a&&"no-color"!==a&&this._addRecentColor(g.normalizeColor(a).toHex())},loadRecentColors:function(a){this.set("recentColors",JSON.parse(localStorage.getItem(a)))},saveRecentColors:function(a){localStorage.setItem(a,JSON.stringify(this.get("recentColors")))},_toPastels:function(a){var d=this._colorInstance,c=new t([238,238,238]);return n.map(a,function(b){return t.blendColors(d.setColor(b),
c,.2)},this)},_createSwatch:function(a){var d=a.className,c=a.hexColor||"transparent";a=a.paletteNode;var b=this.id+"_"+d.replace(" ","-")+"_"+c.replace("#","");return r.create("span",{id:b,"aria-label":c,role:"gridcell",className:d,style:{background:c}},a)},_createSwatches:function(a,d){var c=this.css.swatch,b=this.css.swatchRow,e=this.colorsPerRow,f=d.get("colors"),m,u;n.forEach(f,function(A,I){0===I%e&&(m=r.create("div",{className:b,role:"row"},a));u=this._swatchCreator({className:c,hexColor:A,
paletteNode:m});this._swatches[A]=u},this)},_selectColor:function(){var a=this.color||this._activePalette.get("colors")[0];this.set("color",a)},_setColorWithCurrentAlpha:function(a){"no-color"!==a&&"no-color"!==this.color&&(a=g.normalizeColor(a),a.a=this.color.a);this.set("color",a)},_updatePreviewSwatch:function(a){var d=this.css.swatchEmpty,c=this.dap_previewSwatch;if("no-color"===a)h.add(c,d),q.set(c,{backgroundColor:"",borderColor:""});else{var b=g.getContrastingColor(a);var e=8!==G("ie");h.remove(c,
d);d=a.toCss(e);b=b.toCss(e);b={backgroundColor:d,borderColor:b};e||(b.opacity=a.a);q.set(c,b)}},_showBrights:function(){h.remove(this.dap_paletteContainer,this.css.alt);this._activePalette=this._brightsPalette},_showPastels:function(){h.add(this.dap_paletteContainer,this.css.alt);this._activePalette=this._pastelsPalette},_setColorFromSwatch:function(a){a=q.get(a,"backgroundColor");this._setColorWithCurrentAlpha(a)},_checkSelection:function(){var a=this.get("color");this._activePalette.contains(a)?
this._highlightColor(a):this._clearSelection()},_landSwatch:function(a){var d=a.index,c=a.colors,b=a.swatches;a=a.paletteNode;var e=c[d];c=e&&this._findSwatch({colors:c,color:e,swatches:b});b=this.css.focusedSwatch;x("."+b,a).removeClass(b).style("borderColor","");a.removeAttribute("aria-activedescendant");this._swatchNavigationIndex=d;c&&null!=d&&(h.add(c,b),d=g.getContrastingColor(g.normalizeColor(e)),q.set(c,"borderColor",d.toHex()),a.setAttribute("aria-activedescendant",c.id))},_navigateSwatches:function(a,
d){var c=a.keyCode,b=d.color,e=d.colors,f=d.swatches,m=d.paletteNode;b="no-color"===b?-1:e.indexOf(b.toHex());b=null!=this._swatchNavigationIndex?this._swatchNavigationIndex:-1<b?b:0;if(c===p.ENTER)this._landSwatch({paletteNode:m,colors:e,index:null,swatches:f}),this.set("color",e[b]);else{var u=this.colorsPerRow;c===p.LEFT_ARROW&&b--;c===p.RIGHT_ARROW&&b++;c===p.DOWN_ARROW&&(b+=u,b>e.length&&(b%=u),a.preventDefault());c===p.UP_ARROW&&(b-=Math.min(u,e.length),0>b&&(b=e.length+b),a.preventDefault());
-1===b?b=e.length-1:b===e.length&&(b=0);this._landSwatch({paletteNode:m,colors:e,index:b,swatches:f})}},_addListeners:function(){var a="."+this.css.swatch,d=this.dap_paletteContainer;this.own(l(d,l.selector(a,w),k.hitch(this,function(f){this._setColorFromSwatch(f.target)})),l(d,"blur",k.hitch(this,function(){this._landSwatch({paletteNode:d,colors:this._activePalette.get("colors"),index:null})})),l(d,"keydown",k.hitch(this,function(f){this._navigateSwatches(f,{color:this.get("color"),colors:this._activePalette.get("colors"),
paletteNode:d,swatches:this._swatches})})));var c=this.dap_recentColorPaletteContainer;this.own(l(c,l.selector(a,w),k.hitch(this,function(f){this._setColorFromSwatch(f.target)})),l(c,"keydown",k.hitch(this,function(f){this._navigateSwatches(f,{color:"no-color",colors:this.recentColors,paletteNode:c,swatches:this._recentSwatches})})),l(c,"blur",k.hitch(this,function(){this._landSwatch({paletteNode:c,colors:this.recentColors,index:null})})));var b=this.dap_suggestedColorPaletteContainer;this.own(l(b,
l.selector(a,w),k.hitch(this,function(f){this._setColorFromSwatch(f.target)})),l(b,"keydown",k.hitch(this,function(f){this._navigateSwatches(f,{color:"no-color",colors:this.suggestedColors,paletteNode:b,swatches:this._suggestedSwatches})})),l(b,"blur",k.hitch(this,function(){this._landSwatch({paletteNode:b,colors:this.suggestedColors,index:null})})));this.own(l(this._noColorSwatchNode,w,k.hitch(this,function(f){this.set("color","no-color")})));var e=this.dap_hexInput;e.on("blur",k.hitch(this,function(){var f=
g.normalizeHex(e.get("value"));g.isShorthandHex(f)?this._setColorWithCurrentAlpha(f):this._silentlyUpdateHexInput(this.color)}));e.on("change",k.hitch(this,function(){var f=g.normalizeHex(e.get("value"));g.isLonghandHex(f)&&("no-color"===this.color||this.color.toHex()!==f)&&this._setColorWithCurrentAlpha(f)}));this.dap_transparencySlider.on("change",k.hitch(this,function(f){var m=this.get("color");"no-color"!==m&&(m=g.normalizeColor(this._colorInstance.setColor(m)),m.a=1-f/100,this._updatePreviewSwatch(m),
this._silentlyUpdateHexInput(m),this.set("color",m))}));this.dap_paletteToggle.on("change",k.hitch(this,this._togglePalette));this.own(l(this.dap_header,"click",function(){this.collapsible&&this.set("collapsed",!this.collapsed)}.bind(this)))},_togglePalette:function(a){this.dap_paletteToggle.set("checked",a,!1);a?this._showPastels():this._showBrights();this._checkSelection()},_createPalettes:function(){this._swatches={};r.empty(this.dap_primaryPalette);r.empty(this.dap_secondaryPalette);this._createSwatches(this.dap_primaryPalette,
this._brightsPalette);this._createSwatches(this.dap_secondaryPalette,this._pastelsPalette)},_silentlyUpdateHexInput:function(a){a="no-color"===a?"":a.toHex();this._silentlyUpdateIntermediateChangingValueWidget(this.dap_hexInput,a)},_silentlyUpdateIntermediateChangingValueWidget:function(a,d){a.intermediateChanges=!1;a.set("value",d,!1);a.intermediateChanges=!0},_addRecentColor:function(a){if(a){var d=this.recentColors,c=n.indexOf(d,a);-1<c&&d.splice(c,1);d.unshift(a);d.length>this.colorsPerRow&&d.pop();
this._renderRecentSwatches()}},_renderRecentSwatches:function(){if(this.recentColors){var a=this.css.recent,d=this.css.swatch,c=x("."+a+"."+d,this.dap_recentColorPalette);this._recentSwatches={};n.forEach(this.recentColors,function(b,e){if(e<this.colorsPerRow){e+1>c.length&&c.push(this._swatchCreator({hexColor:b,className:d+" "+a,paletteNode:this.dap_recentColorPalette}));var f=c[e];this._recentSwatches[b]=f;q.set(f,"backgroundColor",b)}},this)}},_renderSuggestedSwatches:function(){if(this.suggestedColors){var a=
this.css.suggested,d=this.css.swatch,c=x("."+a+"."+d,this.dap_suggestedColorPalette);this._suggestedSwatches={};n.forEach(this.suggestedColors,function(b,e){if(e<this.colorsPerRow){e+1>c.length&&c.push(this._swatchCreator({hexColor:b,className:d+" "+a,paletteNode:this.dap_suggestedColorPalette}));var f=c[e];this._suggestedSwatches[b]=f;q.set(f,"backgroundColor",b)}},this)}},_clearRecentSwatches:function(){r.empty(this.dap_recentColorPalette)},_clearSuggestedSwatches:function(){r.empty(this.dap_suggestedColorPalette)},
_clearSelection:function(){var a=this.css.selected;x("."+a,this.dap_paletteContainer).removeClass(a).removeAttr("aria-selected")},_highlightColor:function(a){var d=this.css.selected,c=this._findSwatch({colors:this._activePalette.get("colors"),color:a,swatches:this._swatches});c&&(a=g.normalizeColor(a),a=g.getContrastingColor(a),h.add(c,d),q.set(c,"borderColor",a.toHex()),c.setAttribute("aria-selected",!0))},_findSwatch:function(a){var d=a.colors,c=this._colorInstance.setColor(a.color).toHex(),b;-1<
n.indexOf(d,c)&&(b=a.swatches[c]);return b},_enableTransparencySlider:function(){h.remove(this.dap_transparencyLabel,this.css.disabled);this.dap_transparencySlider.set("disabled",!1)},_disableTransparencySlider:function(){h.add(this.dap_transparencyLabel,this.css.disabled);this.dap_transparencySlider.set("disabled",!0)}});v.NO_COLOR="no-color";k.setObject("dijit.ColorPicker",v,B);return v});