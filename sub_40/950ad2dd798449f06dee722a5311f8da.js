/* start of /views/baseline/js/fotoalbum-lightbox.js (as is) */
(function(){var t,i,e,o;this.FotoalbumBox=function(){function i(t,i){var e;t&&(this.labels=t),i&&(this.interval=i),e=this,$(".fotoalbum .type-foto-thumbnail .image").each((function(){var t;return(t=new Image).src="/images/extra/ajax-loader.gif",$(this).find("img").css({opacity:".25"}),$(this).find("a").css({cursor:"not-allowed"}).on("click",(function(){return!1})),$(this).append($("<div class='lightbox-ajax-container'><img class='lightbox-ajax-loader' /></div>").find("img").attr("src",t.src).end())})),$(".fotoalbum .type-foto-thumbnail").length?$.getJSON("./?json=true",(function(t){return e.data=t,$(".type-foto-thumbnail .image a").css({cursor:"pointer"}).unbind("click"),e.init(),$(".type-foto-thumbnail .image .lightbox-ajax-container").remove(),$(".type-foto-thumbnail .image img").animate({opacity:"1.00",cursor:"inherit"},300,"linear")})):(e.data={pictures:[]},$("body .lightboxLink.imageLink.origImageLink:has(img)").each((function(){var t;return t=$(this).find("img:first"),$(this).data("picture-id",e.getImageUniqueClass(t)),e.data.pictures.push({id:e.getImageUniqueClass(t),title:t.attr("alt"),foto:e.getImageHtml(t)})})),$("body .lightboxLink.imageLink:not(.origImageLink):has(img)").each((function(){var t,i,o;return t=$(this).find("img:first"),i=(o=$(this).closest(".grid-edge").find(".grid-inside .iprox-rich-content:first")).length?o.html():null,$(this).data("picture-id",$(this).closest(".grid-blok").attr("id").replace("Block_","")),e.data.pictures.push({id:$(this).closest(".grid-blok").attr("id").replace("Block_",""),title:$.trim($(this).closest(".grid-edge").find(".grid-title").text()),foto:e.getImageHtml(t),description:i})})),e.init())}return i.prototype.icon={width:40,height:40},i.prototype.imagePadding=10,i.prototype.labels={close:"Sluiten",play:"Slideshow starten",pause:"Slideshow pauzeren",previous:"Vorige",next:"Volgende"},i.prototype.interval=5e3,i.prototype.playing=!1,i.prototype.opened=!1,i.prototype.timeout=null,i.prototype.currentHeight=$(window).height(),i.prototype.currentWidth=$(window).width(),i.prototype.initializedBy=null,i.prototype.getImageUniqueClass=function(t){var i,e,o,n;for(o=0,n=(i=t.attr("class").split(" ")).length;o<n;o++)if(0===(e=i[o]).indexOf("img_"))return e},i.prototype.getImageHtml=function(t){var i,e,o;return i=null!=(o=t.parent())?o.html():void 0,t.data("original")&&(e=t.data("original"),i=$("<img />").attr("src",e.src).attr("width",e.width).attr("height",e.height)),i},i.prototype.init=function(){var t,i;if(t=this,this.data&&this.data.pictures&&this.data.pictures.length>0)return this.backdrop(),this.lightbox(),$(".fotoalbum .type-foto-thumbnail .image a:has(img), body .lightboxLink.imageLink:has(img)").unlessProcessed("foto-thumbnail").each((function(){var i;return void 0===$(this).data("picture-id")&&(i=t.getImageUniqueClass($(this).find("img:first")),$(this).closest(".grid-blok").attr("id")&&(i=$(this).closest(".grid-blok").attr("id").replace("Block_","")),$(this).data("picture-id",i)),$(this).on("click",(function(i){var e;return t.initializedBy=this,this.currentHeight=$(window).height(),this.currentWidth=$(window).width(),null!=(e=t.getPictureFromJson($(this).data("picture-id")))&&t.open(e),i.preventDefault(),!1}))})),$(window).resize((i=this,function(){var e,o;return e=$(window).height(),o=$(window).width(),i.currentHeight===e&&i.currentWidth===o||!i.opened||t.close(),i.currentHeight=e,i.currentWidth=o}))},i.prototype.backdrop=function(){if('<div class="backdrop"></div>',0===$("body .backdrop").length)return $("body").append('<div class="backdrop"></div>'),$("body .backdrop").hide()},i.prototype.lightbox=function(){var t,i;if(i=this,t=$("<div class='lightbox-container' role='dialog'></div>").append($("<button class='lightbox-btn lightbox-play' />").text(this.labels.play)).append($("<button class='lightbox-btn lightbox-close' />").text(this.labels.close)).append("<div class='lightbox-content' />"),0===$("body .lightbox-container").length)return $("body").append(t),$("body .lightbox-container").hide(),$("body .lightbox-container .lightbox-play").on("click",(function(){return i.start()})),$("body .lightbox-container .lightbox-close").on("click",(function(){return i.close()})),$("body .backdrop").on("click",(function(){return i.close()})),$(document).keyup((function(t){if(27===t.which&&i.close(),9===t.which)return i.showKeyInfo()})),$(document).keyup((function(t){if(37===t.which)return $(".lightbox-content .lightbox-previous").click()})),$(document).keyup((function(t){if(39===t.which)return $(".lightbox-content .lightbox-next").click()}))},i.prototype.showKeyInfo=function(){var t;if($(".lightbox-container:visible").length&&!($(".lightbox-infobox").length>0))return t=$("<div class='lightbox-infobox'/>").append($("<div class='info-row'><span class='key'>Esc</span><span class='sep'>: </span><span class='info'></span></div>").find("span.info").text(this.labels.close.toLowerCase()).end()).append($("<div class='info-row'><span class='key'>&#8592;</span><span class='sep'>: </span><span class='info'></span></div>").find("span.info").text(this.labels.previous.toLowerCase()).end()).append($("<div class='info-row'><span class='key'>&#8594;</span><span class='sep'>: </span><span class='info'></span></div>").find("span.info").text(this.labels.next.toLowerCase()).end()),$("body .lightbox-container").append(t),window.setTimeout((function(){return $("body .lightbox-container .lightbox-infobox").fadeOut((function(){return $(this).remove()}))}),1e4)},i.prototype.open=function(t){return this.lock(),this.update(t),this.opened=!0,$(".backdrop, .lightbox-container").css({top:self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}),$(".backdrop, .lightbox-container").animate({opacity:".85"},300,"linear"),$(".lightbox-container").animate({opacity:"1.00"},300,"linear"),$(".backdrop, .lightbox-container").css({display:"block"})},i.prototype.setupPlayPause=function(){var t;return t=this,this.playing?($(".lightbox-play").removeClass("lightbox-play").addClass("lightbox-pause").text(this.labels.pause),$(".lightbox-pause").unbind("click"),$(".lightbox-pause").on("click",(function(){return t.stop()}))):($(".lightbox-pause").removeClass("lightbox-pause").addClass("lightbox-play").text(this.labels.play),$(".lightbox-play").unbind("click"),$(".lightbox-play").on("click",(function(){return t.start()})))},i.prototype.start=function(){return this.playing=!0,this.setupPlayPause(),$(".lightbox-content .lightbox-next").click()},i.prototype.stop=function(){return this.playing=!1,this.setupPlayPause(),clearTimeout(this.timeout)},i.prototype.update=function(t){var i,e,o,n,a,l,s,r,c,h;this.setupPlayPause(),s=this,clearTimeout(this.timeout),$(".lightbox-content *").remove(),$(".lightbox-content").closest(".lightbox-container").attr("aria-labelledby","lightbox_label_"+t.id+"'").attr("aria-describedby","lightbox_description_"+t.id+"'"),e=null,e=(null!=(l=t.title)?l.length:void 0)?t.title:t.foto?$(t.foto).attr("src").split("/").pop():window.iprox.referenceLists.getText("afbeelding","lightbox"),$(".lightbox-content").append($("<div class='visuallyhidden' id='lightbox_label_"+t.id+"'>"+window.iprox.referenceLists.getText("Vergroting van","lightbox")+" '"+e+"'</div>")),$(".lightbox-content").append($("<div class='visuallyhidden' id='lightbox_description_"+t.id+"'>"+window.iprox.referenceLists.getText("Hier toont een vergroting van de afbeelding","lightbox")+"</div>")),t.foto&&((o=$(' <div class="lightbox-image"></div>')).append(t.foto),$(".lightbox-content").append(o).find("img").resetImgSource(!0),o.find(".magnifierLink").remove()),(t.title||t.description||t.copyright)&&($(".lightbox-content .lightbox-image").append('<div class="lightbox-innerbox"></div>'),t.title&&$(".lightbox-content .lightbox-innerbox").append($("<div class='lightbox-title' />").html(t.title)),t.description&&$(".lightbox-content .lightbox-innerbox").append($("<div class='lightbox-description' />").html(t.description)),t.copyright&&$(".lightbox-content .lightbox-innerbox").append($("<div class='lightbox-copyright' />").html(t.copyright))),t.previous&&(a=s.getPictureFromJson(t.previous),$(".lightbox-content").append($("<button class='lightbox-btn lightbox-previous' />").text(this.labels.previous)),$(".lightbox-content .lightbox-previous").on("click",(function(){return s.update(a)}))),t.next?(n=s.getPictureFromJson(t.next),$(".lightbox-content").append($("<button class='lightbox-btn lightbox-next' />").text(this.labels.next)),$(".lightbox-content .lightbox-image img, .lightbox-content .lightbox-next").on("click",(function(){return s.update(n)}))):($(".lightbox-play, .lightbox-pause").remove(),$(".lightbox-content .lightbox-image img").on("click",(function(){return s.close()}))),h=$(window).width()-2*this.icon.width-2*this.imagePadding,c=$(window).height()-2*this.imagePadding,(i=$(".lightbox-content .lightbox-image img:first")).applyImgSource(h,c),r=i.data("size"),$(".lightbox-content .lightbox-image img").attr("src",r.src),$(".lightbox-content .lightbox-image img").attr("class",r.css),$(".lightbox-content .lightbox-image .lightbox-innerbox").css({width:r.maxWidth-20}),$(".lightbox-image").css({position:"absolute",top:($(window).height()-r.maxHeight)/2,left:($(window).width()-r.maxWidth)/2,width:r.maxWidth,height:r.maxHeight}),$(".lightbox-image").on("mouseleave",(function(t){return $(".lightbox-innerbox",$(this)).stop().slideUp()})),$(".lightbox-image").on("mouseenter",(function(t){return $(".lightbox-innerbox",$(this)).stop().slideDown()})),this.playing&&(this.timeout=setTimeout("$('.lightbox-content .lightbox-next').click()",this.interval))},i.prototype.close=function(){$(".backdrop, .lightbox-container").animate({opacity:"0"},300,"linear",(function(){return $(".backdrop, .lightbox-container").hide()})),$(".lightbox-container:visible").length&&this.unlock(),this.playing=!1,this.opened=!1},i.prototype.getPictureFromJson=function(t){var i;return null!==(i=$.grep(this.data.pictures,(function(i){return i.id===t})))[0]?i[0]:null},i.prototype.lock=function(){var i,e,n;n=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop],(e=$("html")).data("scroll-position",n),e.data("previous-overflow",e.css("overflow")),e.css("overflow","hidden"),window.scrollTo(n[0],n[1]),window.addEventListener&&window.addEventListener("DOMMouseScroll",o,!1),window.onmousewheel=document.onmousewheel=o,document.keydown=t,$(":focusable[tabindex]").each((function(){return $(this).attr("data-tabindex",$(this).attr("tabindex"))})),$(":focusable").attr("tabindex",-1),i=0,$(".lightbox-container :focusable").each((function(){return $(this).attr("tabindex",i),i++}))},i.prototype.unlock=function(){var t,i;i=(t=$("html")).data("scroll-position"),t.css("overflow",t.data("previous-overflow")),window.scrollTo(i[0],i[1]),window.removeEventListener&&window.removeEventListener("DOMMouseScroll",o,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null,$(":focusable").attr("tabindex",null),$(":focusable[data-tabindex]").each((function(){return $(this).attr("tabindex",$(this).attr("data-tabindex")),$(this).attr("data-tabindex",null)})),this.initializedBy.focus()},i}(),i=[37,38,39,40],e=function(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1},t=function(t){var o,n,a;for(t=t||window.event,a=[],o=0,n=i.length;o<n;o++)i[o]===t.keyCode&&a.push(e(t));return a},o=function(t){return t=t||window.event,e(t)}}).call(this);
/* end of /views/baseline/js/fotoalbum-lightbox.js */
