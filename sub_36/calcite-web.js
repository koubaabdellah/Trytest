(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):e.calcite=t()})(this,function(){"use strict";function e(e,t){var n=" "+e.className+" ";return n.indexOf(" "+t+" ")!==-1}function t(t,n){n.split(" ").forEach(function(n){e(t,n)||(t.className+=" "+n)})}function n(e,t){var n=" "+e.className+" ";t.split(" ").forEach(function(e){n=n.replace(" "+e+" "," ")}),e.className=n.trim()}function r(r,i){e(r,i)?n(r,i):t(r,i)}function i(e){e=a(e),e.forEach(function(e){n(e,"is-active")})}function s(e){e=a(e),e.forEach(function(e){t(e,"is-active")})}function o(e,n){i(e),t(n,"is-active")}function u(t,n){var r;for(r=n;r;r=r.parentNode)if(r.nodeType===1&&e(r,t))break;return r}function a(e){return Array.isArray(e)?e:Array.prototype.slice.call(e)}function f(e,t){var n=t||document,r=n.querySelectorAll(e);return a(r)}function l(e,t){var n=t.filter(function(t){var n=e.toLowerCase(),r=t.innerHTML.toLowerCase();return r.indexOf(n)!==-1});return n}function c(e){e.forEach(function(e){if(!e)return;var t=e.getAttribute("aria-hidden");t!=="true"?e.setAttribute("aria-hidden",!0):e.removeAttribute("aria-hidden")})}function h(e){e.forEach(function(e){if(!e)return;e.setAttribute("aria-hidden",!0)})}function p(e){e.forEach(function(e){if(!e)return;e.removeAttribute("aria-hidden")})}function d(e){if(!e)return;var t=e.getAttribute("aria-expanded");t?e.removeAttribute("aria-expanded"):e.setAttribute("aria-expanded","true")}function m(){return"click"}function g(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent)return e.attachEvent("on"+t,n)}function y(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);if(e.detachEvent)return e.detachEvent("on"+t,n)}function b(e){return e.target||e.srcElement}function w(e){if(e.preventDefault)return e.preventDefault();e.returnValue&&(e.returnValue=!1)}function E(e){e=e||window.event;if(e.stopPropagation)return e.stopPropagation();e.cancelBubble&&(e.cancelBubble=!0)}function S(e,t,n){var r,i,s,o;return o=function(){r=!1,i&&(s.apply(n,i),i=!1)},s=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(o,t),r=!0)},s}function x(){}function N(){function t(t){t?g(t.node,"click",n):e.forEach(function(e){g(e,"click",n)})}function n(e){e.preventDefault();var t=e.target.getAttribute("data-clipboard-target");document.querySelector(t).select(),document.execCommand("copy")}var e=f(".js-copy-to-clipboard");T.on("clipboard:bind",t),T.emit("clipboard:bind")}function C(){function n(e){e?i(e.node):t.forEach(function(e){i(e)})}function i(t){t.setAttribute("aria-live","polite"),t.setAttribute("role","tablist"),a(t.children).forEach(function(t){var n=t.querySelector(".accordion-title");n.setAttribute("role","tab"),n.setAttribute("tabindex","0"),e(t,"is-active")&&t.setAttribute("aria-expanded","true"),g(n,m(),s),g(t,"keyup",function(e){e.keyCode===13&&s(e)})})}function s(e){E(e);var t=u("accordion-section",b(e));T.emit("accordion:toggle",{node:t})}function o(e){r(e.node,"is-active"),d(e.node)}var t=f(".js-accordion");T.on("accordion:bind",n),T.on("accordion:toggle",o),T.emit("accordion:bind")}function k(e){y(document.body,m(),k),f(".js-dropdown").forEach(function(e){n(e,"is-active")}),f(".js-dropdown-toggle").forEach(function(e){e.setAttribute("aria-expanded","false")}),y(document,"keydown",A)}function L(n){if(!n)return;var r=e(n.node,"is-active");T.emit("dropdown:close"),r||(t(n.node,"is-active"),n.target&&n.target.setAttribute("aria-expanded","true"),g(document,"keydown",A)),e(n.node,"is-active")&&g(document.body,m(),k)}function A(e){e.keyCode===40|e.keyCode===38&&e.preventDefault()}function O(e){var t=f(".js-dropdown-toggle");t.forEach(function(e){var t=!1;v.dropdowns.forEach(function(n){n.target===e&&n.event===m()&&n.fn===H&&(t=!0)}),t||(v.dropdowns.push({target:e,event:m(),fn:H}),g(e,m(),H))})}function M(){var e=document.querySelector(".js-dropdown.is-active");return e?e:!1}function _(e){var t=document.activeElement,n=e.links.indexOf(t);n===-1?e.forward?n=0:n=e.links.length-1:e.forward?(n+=1,n===e.links.length&&(n=0)):(n-=1,n===-1&&(n=e.links.length-1)),e.links[n].focus()}function D(){var e=M();if(e){var t=f(".dropdown-link",e);T.emit("dropdown:focus",{links:t,forward:!0})}}function P(){var e=M();if(e){var t=f(".dropdown-link",e);T.emit("dropdown:focus",{links:t,forward:!1})}}function H(e){w(e),E(e);var t=u("js-dropdown",e.target);T.emit("dropdown:toggle",{node:t,target:e.target})}function B(){T.on("dropdown:toggle",L),T.on("dropdown:close",k),T.on("keyboard:escape",k),T.on("keyboard:arrow:down",D),T.on("keyboard:arrow:up",P),T.on("dropdown:focus",_),j=!0}function F(){j||B(),O()}function I(){function l(n){T.emit("drawer:close");var s=document.querySelector('.js-drawer[data-drawer="'+n.id+'"]'),o=e(s,"drawer-right"),u=e(s,"drawer-left");s.setAttribute("tabindex",0),t(s,"is-active"),o?t(r,"drawer-right-is-active"):u&&t(r,"drawer-left-is-active"),h([r,i]),g(s,m(),b),g(document,"focusin",d)}function c(e){if(!e)o.forEach(function(e){e.removeAttribute("tabindex"),n(e,"is-active")});else{var t=document.querySelector('.js-drawer[data-drawer="'+e.id+'"]');t.removeAttribute("tabindex"),n(t,"is-active")}n(r,"drawer-left-is-active"),n(r,"drawer-right-is-active"),p([r,i]),y(document,"focusin",d),a&&a.focus()}function d(t){u("js-drawer",t.target)||o.forEach(function(t){e(t,"is-active")&&t.focus()})}function v(e){e?g(e.node,m(),E):s.forEach(function(e){g(e,m(),E)})}function b(t){e(t.target,"js-drawer")&&T.emit("drawer:close")}function E(e){w(e);var t=e.target.getAttribute("data-drawer");T.emit("drawer:open",{id:t})}var r=document.querySelector(".wrapper"),i=document.querySelector(".footer"),s=f(".js-drawer-toggle"),o=f(".js-drawer"),a;T.on("drawer:open",l),T.on("keyboard:escape",c),T.on("drawer:close",c),T.on("drawer:bind",v),T.emit("drawer:bind")}function q(){var r=f(".js-expand-toggle"),i=document.querySelectorAll(".js-expand");r.forEach(function(r){g(r,m(),function(s){w(s);var u=r.getAttribute("data-expand"),a=document.querySelector('.js-expand[data-expand="'+u+'"]'),f=e(a,"is-active"),l=e(a,"is-active");o(i,a),f&&l?n(a,"is-active"):t(a,"is-active")})})}function R(){function s(){var e=f(".js-filter-dropdown");e.forEach(function(e){var r=e.getAttribute("data-filter-dropdown"),i=e.querySelector(".filter-dropdown-input");g(i,"focus",c);var s=e.querySelectorAll(".js-filter-dropdown-open");for(var o=0;o<s.length;o++){var u=s[o];u.setAttribute("data-id",r),g(u,m(),p)}var f=e.querySelectorAll(".js-filter-dropdown-close");for(var d=0;d<f.length;d++){var v=f[d];v.setAttribute("data-id",r),g(v,m(),p)}var y=e.querySelectorAll(".filter-dropdown-link");for(var b=0;b<y.length;b++){var w=y[b];w.setAttribute("data-item-id",b),g(w,m(),h)}g(i,"keyup",function(e){var r=a(y);r.forEach(function(e){t(e,"hide")}),l(i.value,r).forEach(function(e){n(e,"hide")})})})}function o(e){var t=u("js-filter-dropdown",e.target);return{parent:t,id:t.getAttribute("data-filter-dropdown"),item:e.target}}function c(e){E(e);var t=o(e);T.emit("filterDropdown:input:focus",t)}function h(e){w(e),E(e);var t=o(e);T.emit("filterDropdown:select",t)}function p(e){e.preventDefault();var t=o(e);r(e.target,"is-active"),T.emit("filterDropdown:toggle",t)}function d(t){var n=t.parent.querySelector(".filter-dropdown-list");e(n,"is-active")?T.emit("filterDropdown:close",t):T.emit("filterDropdown:open",t)}function v(e){r(e.item,"is-active")}function y(e){var t=e.parent.querySelectorAll(".filter-dropdown-link.is-active"),r=t[e.i];n(r,"is-active");var i=e.parent.querySelectorAll(".filter-dropdown-link.is-active"),s={parent:e.parent,id:e.id,active:i};T.emit("filterDropdown:active",s)}function b(e){S();var r=e.parent.querySelector(".filter-dropdown-list");t(r,"is-active");var i=f(".js-filter-dropdown-close",e.parent),s=f(".js-filter-dropdown-open",e.parent);s.forEach(function(e){return n(e,"is-active")}),i.forEach(function(e){return t(e,"is-active")})}function S(e){var r=document.querySelectorAll(".filter-dropdown-list");i(r);var s=f(".js-filter-dropdown-open"),o=f(".js-filter-dropdown-close");s.forEach(function(e){return t(e,"is-active")}),o.forEach(function(e){return n(e,"is-active")})}function x(e){var t=e.parent.querySelectorAll(".filter-dropdown-link.is-active"),n={parent:e.parent,id:e.id,active:t};T.emit("filterDropdown:active",n)}function N(e){T.emit("filterDropdown:active:clear",e);var r=e.parent.querySelector(".js-flilter-dropdown-no-filters");e.active.length>0?t(r,"hide"):n(r,"hide");for(var i=0;i<e.active.length;i++){var s=e.active[i],o='<span class="filter-dropdown-active">'+s.innerHTML+'<a class="filter-dropdown-remove" href="#" data-item-id=\''+i+"'></a></span>";e.parent.insertAdjacentHTML("beforeend",o);var u=e.parent.querySelector('.filter-dropdown-remove[data-item-id="'+i+'"]');g(u,m(),C)}}function C(e){e.preventDefault();var t=o(e);t.i=e.target.getAttribute("data-item-id"),T.emit("filterDropdown:select:remove",t)}function k(e){var t=e.parent.querySelectorAll(".filter-dropdown-active");for(var n=0;n<t.length;n++)e.parent.removeChild(t[n])}T.on("filterDropdown:bind",s),T.on("filterDropdown:select",v),T.on("filterDropdown:select",x),T.on("filterDropdown:select:remove",y),T.on("filterDropdown:active",N),T.on("filterDropdown:active:clear",k),T.on("filterDropdown:toggle",d),T.on("filterDropdown:open",b),T.on("filterDropdown:close",S),T.on("keyboard:escape",S),T.emit("filterDropdown:bind")}function U(){function l(){var e=[];return r&&e.push(r),s&&e.push(s),e}function c(e){T.emit("modal:close");if(!e)return;var n=document.querySelector('.js-modal[data-modal="'+e+'"]');n.removeAttribute("tabindex"),g(document,"focusin",b),t(n,"is-active"),h(l()),n.focus()}function d(e){if(!e)return i(a);var t=document.querySelector('.js-modal[data-modal="'+e+'"]');n(t,"is-active"),t.setAttribute("tabindex",0),y(document,"focusin",b),p(l())}function v(e){e?g(e,m(),E):o.forEach(function(e){g(e,m(),E)})}function b(t){u("js-modal",t.target)||a.forEach(function(t){e(t,"is-active")&&t.focus()})}function E(e){w(e);var t=e.target.dataset.modal;T.emit("modal:open",t)}var r=document.querySelector(".wrapper"),s=document.querySelector(".footer"),o=f(".js-modal-toggle"),a=f(".js-modal");T.on("modal:open",c),T.on("keyboard:escape",d),T.on("modal:close",d),T.on("modal:bind",v),T.emit("modal:bind")}function z(){function i(r){var i=u("js-site-search",r.target),s=e(i,"is-active");s?(n(i,"is-active"),r.target.value=""):t(i,"is-active")}var r=f(".js-site-search");r.forEach(function(e){g(e,"focusin",i),g(e,"focusout",i)})}function W(){function t(){e.forEach(function(e){g(e,"change",n)})}function n(e){window.location.assign(e.currentTarget.value)}T.on("selectnav:bind",t);var e=f(".js-select-nav");T.emit("selectnav:bind")}function V(e){var t="";for(var n=0;n<e;n++)t+=((1+Math.random())*65536|0).toString(16).substring(1);return t}function $(e){if(!e)throw new TypeError("Invalid argument `value` has no value.");this.value=$.EMPTY,e&&e instanceof $?this.value=e.toString():e&&Object.prototype.toString.call(e)==="[object String]"&&$.isGuid(e)&&(this.value=e),this.equals=function(e){return $.isGuid(e)&&this.value===e},this.isEmpty=function(){return this.value===$.EMPTY},this.toString=function(){return this.value},this.toJSON=function(){return this.value}}function J(){function s(e){var r=$.raw();e.setAttribute("data-sticky-id",r);var i=e.parentNode,s=e.cloneNode("deep");t(s,"js-shim"),n(s,"js-sticky"),s.setAttribute("data-sticky-id",r),s.style.visibility="hidden",s.style.display="none",i.insertBefore(s,e)}function o(e){var n=e.element.getAttribute("data-sticky-id"),r=document.querySelector('.js-shim[data-sticky-id="'+n+'"]');n&&r&&(t(e.element,"is-sticky"),r.style.display="")}function u(e){var t=e.element.getAttribute("data-sticky-id"),r=document.querySelector('.js-shim[data-sticky-id="'+t+'"]');t&&r&&(n(e.element,"is-sticky"),r.style.display="none")}function a(t){i.forEach(function(n){var r=n.element;if(e(n.element,"is-sticky")){var i=n.element.getAttribute("data-sticky-id");r=document.querySelector('.js-shim[data-sticky-id="'+i+'"]')}if(r){var s=r.getAttribute("data-top")||0;n.top=r.offsetTop-parseInt(s,0)}n.top<t?T.emit("sticky:stick",n):T.emit("sticky:unstick",n)})}T.on("scrolling:at",a),T.on("sticky:stick",o),T.on("sticky:unstick",u);var r=f(".js-sticky"),i=r.map(function(e){var t=e.offsetTop,n=e.getAttribute("data-top")||0;e.style.top=n+"px";var r=e.getAttribute("data-sticky-id");return r||s(e),{top:t-parseInt(n,0),element:e}})}function K(){function t(){var t=f(".js-tab"),r=f(".js-tab-group"),i=f(".js-tab-section");r.forEach(function(e){e.setAttribute("aria-live","polite"),n(e),e.children[0].setAttribute("role","tablist");var t=e.querySelectorAll(".js-tab"),r=100/t.length;for(var i=0;i<t.length;i++)t[i].style.maxWidth=r+"%"}),t.forEach(function(e){e.setAttribute("aria-expanded","false"),e.setAttribute("role","tab"),e.setAttribute("tabindex","0"),g(e,m(),s),g(e,"keyup",l)}),i.forEach(function(t){t.setAttribute("role","tabpanel");var n=e(t,"is-active");n?t.setAttribute("aria-expanded",!0):t.setAttribute("aria-expanded",!1)})}function n(e){var t=e.getAttribute("data-tab");if(t)return t;var n=$.raw();return e.setAttribute("data-tab",n),n}function r(e){var t=e.parent,n=a(t.querySelectorAll(".js-tab")),r=e.active,i=a(t.querySelectorAll(".js-tab-section")),s=n.indexOf(r),u=i[s];n.forEach(function(e){e.setAttribute("aria-expanded",!1)}),r.setAttribute("aria-expanded",!0),o(n,r),i.forEach(function(e){e.setAttribute("aria-expanded",!1)}),u.setAttribute("aria-expanded",!0),o(i,u)}function i(e){var t=e.target,r=u("js-tab-group",t),i=n(r);return{parent:r,id:i,active:t}}function s(e){e.preventDefault();var t=i(e);T.emit("tabs:active",t)}function l(e){var t=i(e);e.keycode===13&&T.emit("tabs:active",t)}T.on("tabs:bind",t),T.on("tabs:active",r),T.emit("tabs:bind")}function Q(){function s(t){e.scrollLeft+=t}function o(){n(r,"is-active"),n(i,"is-active"),e.scrollLeft>0&&t(r,"is-active"),e.scrollLeft+e.clientWidth+5<e.scrollWidth&&t(i,"is-active")}var e=f(".js-nav-overflow")[0],r=f(".js-overflow-left")[0],i=f(".js-overflow-right")[0];e&&(r&&g(r,m(),s.bind(null,-40)),i&&g(i,m(),s.bind(null,40)),g(e,"scroll",o),g(window,"resize",o),o())}function G(e){e.keyCode===27?T.emit("keyboard:escape"):e.keyCode===13?T.emit("keyboard:return"):e.keyCode===32?T.emit("keyboard:space"):e.keyCode===38?T.emit("keyboard:arrow:up"):e.keyCode===40?T.emit("keyboard:arrow:down"):e.keyCode===37?T.emit("keyboard:arrow:left"):e.keyCode===39&&T.emit("keyboard:arrow:right")}function Y(){T.emit("scrolling:at",window.pageYOffset)}function et(){while(Z.length)Z.shift().call()}function tt(e){for(var t in e)Z.push(e[t]);Object.assign(this,e)}var v={dropdowns:[]};x.prototype={on:function(t,n,r){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:n,ctx:r}),this},once:function(t,n,r){function s(){i.off(t,s),n.apply(r,arguments)}var i=this;return s._=n,this.on(t,s,r)},emit:function(t){var n=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),i=0,s=r.length;for(i;i<s;i++)r[i].fn.apply(r[i].ctx,n);return this},off:function(t,n){var r=this.e||(this.e={}),i=r[t],s=[];if(i&&n)for(var o=0,u=i.length;o<u;o++)i[o].fn!==n&&i[o].fn._!==n&&s.push(i[o]);return s.length?r[t]=s:delete r[t],this}};var T=new x,j=!1,X=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i");$.EMPTY="00000000-0000-0000-0000-000000000000",$.isGuid=function(e){return e&&(e instanceof $||X.test(e.toString()))},$.create=function(){return new $([V(2),V(1),V(1),V(1),V(3)].join("-"))},$.raw=function(){return[V(2),V(1),V(1),V(1),V(3)].join("-")},typeof Object.assign!="function"&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n!=null)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),g(document,"keyup",G),g(window,"scroll",S(Y,100));var Z=[C,N,F,I,q,R,U,z,W,J,K,Q],nt={version:"1.0.0-beta.25",click:m,addEvent:g,removeEvent:y,eventTarget:b,preventDefault:w,stopPropagation:E,throttle:S,hasClass:e,addClass:t,removeClass:n,toggleClass:r,removeActive:i,addActive:s,toggleActive:o,toggleAriaHidden:c,toggleAriaExpanded:d,closest:u,nodeListToArray:a,findElements:f,bus:T,accordion:C,dropdown:F,drawers:I,expander:q,filterDropdown:R,modal:U,search:z,selectNav:W,sticky:J,tabs:K,thirdNav:Q,extend:tt,init:et};return nt});