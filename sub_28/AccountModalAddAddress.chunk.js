webpackJsonp([14],{583:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(102),n=r(282),s=r(16),a=r(570),d=r(283),i=r(284),u=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();var c=document.querySelector("[js-hook-address-errors]"),l="[js-hook-form-streetname]",m="js-form-item",f="form__item--lap-active",A=function(e){function AccountModalAddAddress(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AccountModalAddAddress);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AccountModalAddAddress.__proto__||Object.getPrototypeOf(AccountModalAddAddress)).call(this,e));return t.formItems=[].concat(function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t.element.querySelectorAll("."+m))),t.streetNameBlock=t.element.querySelector(l),s.a.$on("modal[modal-add-address]::close",function(){t.element.reset(),t.formItems.forEach(function(e){e.classList.remove(f)}),t.element.removeChild(t.streetNameBlock)}),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AccountModalAddAddress,n["default"]),u(AccountModalAddAddress,[{key:"formId",get:function get(){return"add-address"}}]),u(AccountModalAddAddress,[{key:"onFormChange",value:function onFormChange(e){var t=this;"change"===e.eventType&&Object(a.a)(this.state,e,"Adres[Zipcode]","Adres[Housenumber]","Adres[HousenumberAdd]").then(function(e){return!e||(t.loading=!0,Object(a.b)(t.element,t.state,"Adres[Zipcode]","Adres[Housenumber]","Adres[HousenumberAdd]"))}).then(function(e){if(e){if(t.state.isValid&&(t.loading=!1),e.Adres){var r=e.Adres,o=r.Gemeente,n=r.Huisnr,s=r.HuisnrToev,a=r.Plaatsnaam,d=r.Straatnaam,i=r.Postcode;t.inputs["Adres[Address]"].value=d,t.inputs["Adres[Zipcode]"].value=i,t.inputs["Adres[Housenumber]"].value=n,t.inputs["Adres[HousenumberAdd]"].value=s,t.inputs["Adres[City]"].value=a,t.inputs["Adres[District]"].value=o,t.showStreetnameBlock(!0,d+", "+a)}}else t.loading=!1,t.showStreetnameBlock(!1)}).catch(function(){t.loading=!1})}},{key:"onFormSubmit",value:function onFormSubmit(){var e=this;this.formSubmitTimeout&&clearTimeout(this.formSubmitTimeout),this.loading=!0,this.formSubmitTimeout=setTimeout(function(){Object(d.a)("address-errors");var t=new FormData(e.element);e.addAddressCall(t,window.EnvironmentSettings.api.addAddress).then(function(t){t?window.location.reload():(e.loading=!1,Object(d.b)(c,window.messages.validationPasswordNotChange,"address-errors"))})},500)}},{key:"addAddressCall",value:function addAddressCall(e,t){return e.set("method",t),o.a.get(window.EnvironmentSettings.endpoint+Object(i.a)(e),{},!1,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return!!e.data.success}).catch(function(){return Object(d.b)(c,window.messages.validationRequestFailed,"address-errors"),!1})}},{key:"showStreetnameBlock",value:function showStreetnameBlock(e,t){this.streetNameBlock&&(e?(this.streetNameBlock.textContent=t,this.streetNameBlock.classList.remove("u-hidden")):this.streetNameBlock.classList.add("u-hidden"))}}]),AccountModalAddAddress}();t.default=A}});