function clone(n){var i,u,t,r;if(null==n||"object"!=typeof n)return n;if(n instanceof Date)return t=new Date,t.setTime(n.getTime()),t;if(n instanceof Array){for(t=[],i=0,u=n.length;i<u;i++)t[i]=clone(n[i]);return t}if(n instanceof Object){t={};for(r in n)n.hasOwnProperty(r)&&(t[r]=clone(n[r]));return t}throw new Error("Unable to copy obj! Its type isn't supported.");}function _browserIsIE(){return jQuery.browser={},navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),jQuery.browser}HighChartFactory.prototype.drawHighChart=function(){var i,n,t,r;this.errorCheck()&&(i=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC(),Highcharts.setOptions(this.getGlobalOpts(!0)),n=this.getSharedOpts(),n.legend=this.chartOptions.legend,n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}},t={fontSize:this.theme.labelFontSize},r=this,n.xAxis=this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}},n.yAxis={min:this.getMin(),max:this.getMax(),labels:{format:this.yLabelFormat(this.chartData,0),style:t},title:{text:this.suffix(0),rotation:this.suffix(0)==null||this.suffix(0).length==1?0:270,margin:20,style:{color:"#333",fontWeight:"bold",fontSize:this.theme.axisFontSize}}},n.series=i,this.chart=new Highcharts.Chart(n),this.minimized||(this.addLegendTooltip(),this.addText()))};HighChartFactory.prototype.drawHighChart_2axes=function(){var i,r;if(this.errorCheck()){var u=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC(),t=Highcharts.setOptions(this.getGlobalOpts(!0)),n=this.getSharedOpts();n.legend=this.chartOptions.legend;n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}};i={fontSize:this.theme.labelFontSize};r=this;n.xAxis=this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:i}}:{type:"datetime",labels:{style:i,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}};n.yAxis=[{min:this.getMin(),title:{text:this.yAxisTitle(this.chartData,0),style:{color:t.colors[0],fontWeight:"bold",fontSize:this.theme.axisFontSize}},labels:{format:this.yLabelFormat(this.chartData,0),style:{color:t.colors[0],fontSize:this.theme.labelFontSize}}},{min:this.getMin(),title:{text:this.yAxisTitle(this.chartData,1),style:{color:t.colors[1],fontWeight:"bold",fontSize:this.theme.axisFontSize}},labels:{format:this.yLabelFormat(this.chartData,1),style:{color:t.colors[1],fontSize:this.theme.labelFontSize}},opposite:!0}];n.series=u;this.chart=new Highcharts.Chart(n);this.minimized||(this.addLegendTooltip(),this.addText())}};HighChartFactory.prototype.drawHighChart_3axes=function(){var r,n,t,i,u;this.errorCheck()&&(r=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC(),n=this.getGlobalOpts(!0),Highcharts.setOptions(n),t=this.getSharedOpts(),t.legend=this.chartOptions.legend,t.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}},i={fontSize:this.theme.labelFontSize},u=this,t.xAxis=this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:i}}:{type:"datetime",labels:{style:i,formatter:function(){return Highcharts.dateFormat(u.dateFormat.displayFormat,this.value)}}},t.yAxis=[{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,0),style:{color:"#666",fontSize:this.theme.labelFontSize}},title:{text:this.yAxisTitle(this.chartData,0),style:{color:n.colors[0],fontWeight:"bold",fontSize:this.theme.axisFontSize}}},{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,1),style:{color:n.colors[1],fontSize:this.theme.labelFontSize}},title:{text:this.yAxisTitle(this.chartData,1),style:{color:n.colors[1],fontWeight:"bold",fontSize:this.theme.axisFontSize}},opposite:!0},{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,2),style:{color:n.colors[2],fontSize:this.theme.labelFontSize}},title:{text:this.yAxisTitle(this.chartData,2),style:{color:n.colors[2],fontWeight:"bold",fontSize:this.theme.axisFontSize}},opposite:!0}],t.series=r,this.chart=new Highcharts.Chart(t),this.minimized||(this.addLegendTooltip(),this.addText()))};HighChartFactory.prototype.drawHighChart_MasterDetail=function(){var t,n;if(this.errorCheck()){t=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC();Highcharts.setOptions(this.getGlobalOpts(!0));n={};n.chart={renderTo:this.target,marginLeft:20,marginRight:20};var r=this.dateToUTC(Date.parseString(this.chartData.categories[0],this.dateFormat.sourceFormat)),u=this.dateToUTC(Date.parseString(this.chartData.categories[this.chartData.categories.length-1],this.dateFormat.sourceFormat)),i={fontSize:this.theme.labelFontSize};n.xAxis={range:(u-r)/2,labels:{style:i}};n.yAxis={labels:{x:-20,style:i}};n.tooltip=this.getToolTip();n.series=t;n.legend={enabled:!0,itemStyle:{fontSize:this.theme.legendFontSize}};n.colors=_.isUndefined(this.chartOptions.colorPalette)?this.LEIcolors("sectcijf",this.chartData.series.length,!1):this.LEIcolors(this.chartOptions.colorPalette,this.chartData.series.length,!1);n.credits={text:(this.languageID?"Source: ":"Bron: ")+this.meta.DataSupplier.Name,href:this.meta.DataSupplier.Url,style:{fontSize:this.theme.creditsFontSize}};n.title={text:this.title(),style:{fontSize:this.theme.titleFontSize,fontWeight:this.theme.titleFontWeight}};n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}};n.exporting={enabled:!0,buttons:{contextButton:{text:this.languageID?"Save":"Opslaan",theme:{style:{color:"#909090",fontSize:this.theme.exportFontSize}},symbolX:15,symbolY:12,menuItems:this.menuItems()}}};n.plotOptions={series:{connectNulls:!0}};this.chart=new Highcharts.StockChart(n);this.minimized||(this.addLegendTooltip(),this.addText())}};HighChartFactory.prototype.drawHighChart_AreaRange=function(){var n,t;this.errorCheck()&&(Highcharts.setOptions(this.getGlobalOpts(!1)),n=this.getSharedOpts(),n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}},n.legend=this.chartOptions.legend,t={fontSize:this.theme.labelFontSize},n.xAxis={type:"datetime",labels:{style:t}},n.yAxis={title:{text:this.suffix(0),style:{fontSize:this.theme.axisFontSize}},labels:{style:t}},n.series=[{name:this.chartData.avgName,data:this.chartData.avg,type:"line",zIndex:1,color:"#35992A",marker:{fillColor:"white",lineWidth:2,lineColor:"#35992A"}},{name:this.chartData.rangeName,data:this.chartData.range,type:"arearange",lineWidth:0,linkedTo:":previous",color:"#35992A",fillOpacity:.3,zIndex:0}],this.chart=new Highcharts.Chart(n,function(){this.series[0].showDataLabels=!0}),this.minimized||this.addText())};HighChartFactory.prototype.drawHighChart_treeMap=function(){Highcharts.setOptions(this.getGlobalOpts(!1));Highcharts.chart(this.target,{colorAxis:{minColor:"#FFFFFF",maxColor:Highcharts.getOptions().colors[0]},series:[this.chartData.series],title:{text:this.title(),style:{color:"#333",fontSize:this.theme.titleFontSize,fontWeight:this.theme.titleFontWeight}},credits:{text:(this.languageID?"Source: ":"Bron: ")+this.meta.DataSupplier.Name,href:this.meta.DataSupplier.Url,style:{fontSize:this.theme.creditsFontSize}},subtitle:{text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}}})};HighChartFactory.prototype.errorCheck=function(){if(this.error!=null){var n='<p class="intro">LEI HighChartsFactory error: '+this.error+"<\/p>";return $("#"+this.target).append(n),!1}return!0};HighChartFactory.prototype.convertCategoryToUTC=function(){var t=[],r=this,i,n;return $.each(this.chartData.categories,function(n,i){t.push(r.dateToUTC(Date.parseString(i,r.dateFormat.sourceFormat)))}),i=[],$.each(this.chartData.series,function(r,u){data=[];$.each(u.data,function(n,i){data[n]=i;data[n]instanceof Object?data[n].x=t[n]:data[n]=[t[n],data[n]]});n={name:u.name,type:u.type,multiplier:u.multiplier,changeSign:u.changeSign,order:u.order,extendLastWith:u.extendLastWith,suffix:u.suffix,avg:u.avg,low:u.low,high:u.high,data:data,visible:u.visible,yAxis:u.yAxis,tooltip:u.tooltip,decimals:u.decimals};for(var f in n)n[f]===undefined&&delete n[f];i.push(n)}),i};HighChartFactory.prototype.dateToUTC=function(n){var t=n.getFullYear(),i=n.getMonth(),r=n.getDate();return Date.UTC(t,i,r)};HighChartFactory.prototype.getGlobalOpts=function(n){var i=this.languageID?"Save":"Opslaan",r=this.languageID?".":",",u=this.languageID?",":".",f=this.languageID?["Januari","Februari","March","April","May","June","July","August","September","October","November","December"]:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],e=this.languageID?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],o=this.languageID?"From":"Van",s=this.languageID?"Till":"Tot",h=this.languageID?"<< Back":"<< Terug",t={lang:{decimalPoint:r,thousandsSep:u,contextButtonTitle:i,months:f,shortMonths:e,rangeSelectorFrom:o,rangeSelectorTo:s,drillUpText:h}};return n&&(t.colors=_.isUndefined(this.chartOptions.colorPalette)?this.LEIcolors(this.defaultPaletteString,this.chartData.series.length,!1):this.LEIcolors(this.chartOptions.colorPalette,this.chartData.series.length,!1)),t};HighChartFactory.prototype.getSharedOpts=function(){return{chart:{type:this.chartOptions.chartType,renderTo:this.target,borderWidth:this.borderWidth,style:{fontFamily:"Verdana"}},credits:{text:(this.languageID?"Source: ":"Bron: ")+this.meta.DataSupplier.Name,href:this.meta.DataSupplier.Url,style:{fontSize:this.theme.creditsFontSize}},exporting:{enabled:this.exporting,buttons:{contextButton:{text:this.languageID?"Save":"Opslaan",theme:{style:{color:"#909090",fontSize:this.theme.exportFontSize}},symbolX:15,symbolY:12,menuItems:this.menuItems()}}},title:{text:this.title(),style:{color:"#333",fontSize:this.theme.titleFontSize,fontWeight:this.theme.titleFontWeight}},tooltip:this.getToolTip(),plotOptions:{column:{stacking:this.chartOptions.stacking,pointPadding:.2,borderWidth:0},bar:{stacking:this.chartOptions.stacking},area:{stacking:this.chartOptions.stacking,lineColor:"#f0f0f0",lineWidth:1},areaspline:{stacking:this.chartOptions.stacking,lineColor:"#f0f0f0",lineWidth:1},series:this.getSeriesOptions()}}};HighChartFactory.prototype.subtitle=function(){var n,t;return _.isUndefined(this.chartOptions.subtitle)?this.singleSelectionDimension!=null?(n=this.singleSelectionDimension.namesDictionary[this.singleSelectionDimension.currentElements[0]],this.subTitleExtension!=null&&(n+=" "+this.subTitleExtension),n):_.isUndefined(this.meta.DiscriminatorString)?null:(t=this.meta.DiscriminatorString,this.subTitleExtension!=null&&(t+=" "+this.subTitleExtension),t):this.subTitleExtension!=null?this.chartOptions.subtitle+" "+this.subTitleExtension:this.chartOptions.subtitle};HighChartFactory.prototype.getMin=function(){var n=null;return _.isUndefined(this.chartOptions.min)||(n=this.chartOptions.min),n};HighChartFactory.prototype.getMax=function(){var n=null;return _.isUndefined(this.chartOptions.max)||(n=this.chartOptions.max),n};HighChartFactory.prototype.yLabelFormat=function(n,t){var i="{value",r;return this.chartOptions.stacking=="percent"?i+"}%":(r=n.series.length-1<t||_.isUndefined(n.series[t].decimals)?_.isUndefined(this.chartOptions.decimals)?0:this.chartOptions.decimals:n.series[t].decimals,i+":,."+r+"f}")};HighChartFactory.prototype.yAxisTitle=function(n,t){if(n.series.length-1<t||_.isUndefined(n.series[t].name))return"";var i=_.where(this.chartOptions.dimensions[this.seriesDimension.columnIndex].series,{yAxis:t});return i.length==0?(this.error="No series linked to axis with index: "+t,""):i.length>1?i[0].suffix:this.seriesDimension.namesDictionary[i[0].name]+" ("+i[0].suffix+")"};HighChartFactory.prototype.addText=function(){var n;(this.preparedData.length<=1&&(n=this.languageID?'<div class="plot_desc_error">Insufficient observations to plot the graph<br/><br/><div>':'<div class="plot_desc_error"><br/><br/><div>'),(n!=null||this.meta.Descriptions!=null)&&this.meta.Descriptions.length!=0)&&(n==null&&(n='<div class="plot_desc">'+this.meta.Descriptions[0].Text+"<br/><br/><div>"),n!=null)&&$("#"+this.target).append(n)};HighChartFactory.prototype.addLegendTooltip=function(){this.preparedData.length!=0&&(divName="#"+this.targetPrefix+"container",cnt=this.languageID?"Click to show/hide items":"Klik om onderdelen te tonen / verbergen",$(divName+" .highcharts-legend").qtip({content:cnt,style:{classes:"qtip-bootstrap myStyle"},show:{event:"mouseenter",effect:function(){$(this).slideDown(90)},ready:!0},hide:{effect:function(){$(this).slideUp(90)},delay:250,inactive:5e3},position:{my:"top  left",at:"bottom center",target:$(divName+" .highcharts-legend"),adjust:{mouse:!1,x:100,y:5}}}))};HighChartFactory.prototype.LEIcolors=function(n,t,i){var r={},f=!1,u;return r.brewer11=["#FFFF99","#6A3D9A","#CAB2D6","#FF7F00","#FDBF6F","#E31A1C","#FB9A99","#33A02C","#B2DF8A","#1F78B4","#A6CEE3"],r.brewer11_mi=["#FFFF99","#6A3D9A","#CAB2D6","#FF7F00","#FDBF6F","#E31A1C","#FB9A99","#33A02C","#B2DF8A","#1F78B4","#FF9900"],r.mi15=["#fccde5","#b3de69","#fdb462","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#80b1d3","#fb8072","#bebada","#2c56de","#8dd3c7","#b15928","#ffff99","#6a3d9a"],r.mi152=["#005B9A","#5B7444","#D16405","#B2D0D7","#8AC194","#B80000","#B0638A","#B0B063","#FFE47A","#AC9462","#AC7062","#C2C2C2","#63B063","#F5B800","#000066"],r.LEI=["#333","#FFD700","#DD4477","#990099","#ED7301","#DC3912","#C2BBB1","#69B0E1","#35992A"],r.MI=["#333","#FFD700","#DD4477","#990099","#ED7301","#DC3912","#C2BBB1","#3A84C1","#4EB828"],r.baro2012=["#333","#FFD700","#DD4477","#990099","#ED7301","#DC3912","#C2BBB1","#69B0E1","#35992A"],r.baro2012a=["#69B0E1","#35992A","#C2BBB1","#ED7301","#333"],r.sectcijf20=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928","#8dd3c7","#2c56de","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],r.sectcijf=["#a6c96a","#c42525","#77a1e5","#FFCC11","#AA4643","#1aadce","#0d233a","#2f7ed8","#8bbc21","#ED7301"],r.sectcijfa=["#a6c96a","#c42525","#77a1e5","#FFCC11","#AA4643","#1aadce","#0d233a","#8bbc21","#ED7301","#2f7ed8"],r.sectcijfb=["#a6c96a","#c42525","#77a1e5","#FFCC11","#AA4643","#1aadce","#0d233a","#8bbc21","#2f7ed8","#ED7301"],r.Agrimatie01=["#35992A"],r.Agrimatie02=["#35992A","#69B0E1"],r.Agrimatie03=["#35992A","#69B0E1","#ED7301"],r.Agrimatie04=["#35992A","#69B0E1","#ED7301","#C2BBB1"],r.Agrimatie05=["#35992A","#69B0E1","#ED7301","#C2BBB1","#004A68"],r.Agrimatie06=["#35992A","#69B0E1","#ED7301","#C2BBB1","#004A68","#B52617"],r.Agrimatie07=["#35992A","#69B0E1","#ED7301","#C2BBB1","#004A68","#B52617","#07A57F"],r.Agrimatie08=["#35992A","#69B0E1","#ED7301","#C2BBB1","#004A68","#B52617","#07A57F","#CC9900"],r.Agrimatie09=["#35992A","#69B0E1","#ED7301","#C2BBB1","#004A68","#B52617","#07A57F","#CC9900","#B63C79"],r.Agrimatie10=["#35992A","#69B0E1","#ED7301","#C2BBB1","#004A68","#B52617","#07A57F","#CC9900","#B63C79","#4D4D4D"],r.Agrimatie03line=["#35992A","#69B0E1","#333333"],r.Agrimatie04line=["#35992A","#69B0E1","#ED7301","#333333"],r.Agrimatie02rev=["#69B0E1","#35992A"],r.Agrimatie03rev=["#ED7301","#69B0E1","#35992A"],r.Agrimatie04rev=["#C2BBB1","#ED7301","#69B0E1","#35992A"],r.Agrimatie05rev=["#004A68","#C2BBB1","#ED7301","#69B0E1","#35992A"],r.Agrimatie06rev=["#B52617","#004A68","#C2BBB1","#ED7301","#69B0E1","#35992A"],r.Agrimatie07rev=["#07A57F","#B52617","#004A68","#C2BBB1","#ED7301","#69B0E1","#35992A"],r.Agrimatie08rev=["#CC9900","#07A57F","#B52617","#004A68","#C2BBB1","#ED7301","#69B0E1","#35992A"],r.Agrimatie09rev=["#B63C79","#CC9900","#07A57F","#B52617","#004A68","#C2BBB1","#ED7301","#69B0E1","#35992A"],r.Agrimatie10rev=["#4D4D4D","#B63C79","#CC9900","#07A57F","#B52617","#004A68","#C2BBB1","#ED7301","#69B0E1","#35992A"],u=r[n],t>u.length&&(f=!0),u=u.slice(-t),i&!f&&(u[0]=r[n][0]),u};HighChartFactory.prototype.menuItems=function(){var i=this.isOpen?"https://":"https://",r=this.isOpen?"/MetaBaseOpenServices/RestServices.svc":"/MetaBaseServices/RestServicesProtected.svc",t=i+this.hostName+r+"/generic/csv",n=this;return[{text:this.languageID?"Save as Excel (NL)":"Opslaan als Excel (NL)",onclick:function(){var u=[],i,f,r;$.each(n.data,function(n,t){i=t.slice();i[i.length-1]!=null&&(i[i.length-1]=i[i.length-1].toString().replace(".",","));u.push(i)});f=_.map(_.pluck(n.meta.Columns,"Name"),$.trim);r=u.slice();r.splice(0,0,f);Highcharts.post(t,{csv:JSON.stringify(n.withLongNames(r))})}},{text:this.languageID?"Save as Excel (US)":"Opslaan als Excel (US)",onclick:function(){var r=_.map(_.pluck(n.meta.Columns,"Name"),$.trim),i=n.data.slice();i.splice(0,0,r);Highcharts.post(t,{csv:JSON.stringify(n.withLongNames(i))})}},{text:this.languageID?"Save as PDF":"Opslaan als PDF",onclick:function(){this.exportChart({type:"application/pdf",filename:this.description})}},{text:this.languageID?"Save as PNG":"Opslaan als PNG",onclick:function(){this.exportChart({type:"image/png",filename:this.description})}}]};HighChartFactory.prototype.title=function(){if(!_.isUndefined(this.chartOptions.title)){var n=this.chartOptions.title;return _.isUndefined(this.meta.DiscriminatorString)||(n=n.replace("%d",this.meta.DiscriminatorString)),n}return this.description};HighChartFactory.prototype.getToolTip=function(){var n=this,t={normal:{useHTML:!0,formatter:function(){var t='<span style="font-weight:bold;color:#333;font-size:'+n.theme.tooltipFontSize+'"><b>';return t+=n.dateFormat==undefined?this.x:Highcharts.dateFormat(n.dateFormat.displayFormat,this.x),t+="<\/b><\/span><table>",$.each(this.points,function(i,r){t+='<tr><td style="white-space:nowrap;padding-right:4px;font-weight:bold;border:0;;font-size:'+n.theme.tooltipFontSize+";color:";t+=r.series.color;t+=';">';t+=r.series.name;t+=': <\/td><td style="white-space:nowrap;font-weight:bold;text-align:right; border:0; padding:0;font-size:'+n.theme.tooltipFontSize+'">';t+=r.y.toFixed(r.series.userOptions.decimals);t+=" ";t+=n.chartOptions.stacking==="percent"&&r.percentage!=null?r.percentage.toFixed(r.series.userOptions.decimals)+"%":r.series.userOptions.tooltip.valueSuffix||"";t+="<\/td><\/tr>"}),t+="<\/table><"},shared:!0},ie8:{valueSuffix:" "+this.suffix(0)||"",valueDecimals:this.getDecimals(0),useHTML:!1,shared:!1},arearange:{valueSuffix:" "+this.suffix(0)||"",valueDecimals:this.getDecimals(0),useHTML:!1,shared:!0}};return this.chartOptions.chartType==="arearange"?t.arearange:+_browserIsIE().version==8?t.ie8:t.normal};HighChartFactory.prototype.getSeriesOptions=function(){return{area:{marker:{symbol:"circle",radius:2,enabled:!1},fillOpacity:.9},areaspline:{marker:{symbol:"circle",radius:2,enabled:!1}}}[this.chartOptions.chartType]||null};HighChartFactory.prototype.withLongNames=function(n){var t=clone(n);return $.each(this.meta.Columns,function(n,i){if(!i.IsValue)for(var r=1;r<t.length;r++)t[r][n]=i.namesDictionary[t[r][n]]}),t};