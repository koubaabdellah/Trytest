define(["../Component","../GroupBrowser/index"],(function(t,e){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=959)}({0:function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"a",(function(){return u})),r.d(e,"f",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return c})),r.d(e,"e",(function(){return s})),r.d(e,"g",(function(){return l}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function a(t,e,r,n){var o,u=arguments.length,i=u<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(u<3?o(i):u>3?o(e,r,i):o(e,r))||i);return u>3&&i&&Object.defineProperty(e,r,i),i}function c(t,e,r,n){return new(r||(r=Promise))((function(o,u){function i(t){try{c(n.next(t))}catch(t){u(t)}}function a(t){try{c(n.throw(t))}catch(t){u(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,a)}c((n=n.apply(t,e||[])).next())}))}function s(t,e){var r,n,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}Object.create;function l(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t}Object.create},124:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return i}));var n=r(0),o=r(16),u=function(t,e){var r;return e.thumbnail&&(r=t.restUrl+"/community/groups/"+e.id+"/info/"+e.thumbnail+(t.credential?"?token="+t.credential.token:"")),r},i=Object(o.a)((function(t,e){return Object(n.a)(Object(n.a)({},e),{thumbURI:u(t,e)})}))},131:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return s}));var n,o=r(0),u=r(26);!function(t){t.LOADING="loading",t.LOADED="loaded",t.FAILED="failed"}(n||(n={}));var i=function(t){var e=t.selectedGroups,r=t.selectorItems;return 0===r.length?Object.keys(e).map((function(t){return e[t].group})):Object.keys(e).filter((function(t){return c(e[t],r)})).map((function(t){return e[t].group}))},a=function(t){var e=t.initialSelectedGroups,r=t.selectedGroups,n=Object.keys(r).map((function(t){return r[t].group.id}));return Object.keys(e).map((function(t){return e[t].group.id})).filter((function(t){return n.indexOf(t)<0})).map((function(t){return e[t].group}))},c=function(t,e){return!t.selectedByIds||t.selectedByIds.length===e.length},s={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},status:n.LOADING,total:0,hasGroups:!0};e.b=function(t,e){switch(void 0===t&&(t=s),e.type){case u.a.DESELECT_GROUPS:return Object(o.a)(Object(o.a)({},t),{selectedGroups:e.payload.reduce((function(t,e){var r=t,n=e.id;r[n];return Object(o.f)(r,["symbol"==typeof n?n:n+""])}),t.selectedGroups)});case u.a.REVERT_GROUPS:return e.payload?Object(o.a)(Object(o.a)({},t),{selectedGroups:e.payload.reduce((function(e,r){var n;if(t.initialSelectedGroups[r.id])return Object(o.a)(Object(o.a)({},e),((n={})[r.id]=t.initialSelectedGroups[r.id],n));var u=e,i=r.id;u[i];return Object(o.f)(u,["symbol"==typeof i?i:i+""])}),t.selectedGroups)}):Object(o.a)(Object(o.a)({},t),{selectedGroups:Object(o.a)({},t.initialSelectedGroups)});case u.a.SELECT_GROUPS:var r=t.selectorItems.map((function(t){return t.id}));return Object(o.a)(Object(o.a)({},t),{selectedGroups:e.payload.reduce((function(t,e){var n;return Object(o.a)(Object(o.a)({},t),((n={})[e.group.id]=Object(o.a)({selectedByIds:r},e),n))}),t.selectedGroups)});case u.a.SET_INITIAL_GROUPS:var i=e.payload.reduce((function(t,e){var r;return Object(o.a)(Object(o.a)({},t),((r={})[e.group.id]=e,r))}),{});return Object(o.a)(Object(o.a)({},t),{selectedGroups:i,initialSelectedGroups:Object(o.a)({},i)});case u.a.SET_SELECTOR_ITEMS:return Object(o.a)(Object(o.a)({},t),{selectorItems:e.payload});case u.a.CLEAR_SELECTION:return Object(o.a)(Object(o.a)({},t),{selectedGroups:{}});case u.a.LOADING_GROUPS:return Object(o.a)(Object(o.a)({},t),{status:n.LOADING});case u.a.LOAD_GROUPS_SUCCESS:return Object(o.a)(Object(o.a)({},t),{displayGroups:e.payload.results,total:e.payload.total,status:n.LOADED});case u.a.LOAD_GROUPS_FAIL:return Object(o.a)(Object(o.a)({},t),{displayGroups:[],status:n.FAILED});case u.a.SET_HAS_GROUPS:return Object(o.a)(Object(o.a)({},t),{hasGroups:e.payload});default:return t}}},140:function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return c})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return f})),r.d(e,"f",(function(){return d}));var n=r(0),o=r(177),u=r(159),i=r(67),a=function(t){return t.length>1&&Object(u.a)(),{type:i.a.SELECT_GROUPS,payload:t.map((function(t){return{group:Object(o.c)(t)}}))}},c=function(t){return{type:i.a.SET_INITIAL_GROUPS,payload:t.map((function(t){return Object(n.a)(Object(n.a)({},t),{group:Object(o.c)(t.group)})}))}},s=function(t){return t.length>1&&Object(u.b)(),{type:i.a.DESELECT_GROUPS,payload:t}},l=function(t){return{type:i.a.REVERT_GROUPS,payload:t}},f=function(){return Object(u.c)(),{type:i.a.CLEAR_SELECTION}},d=function(t){return{type:i.a.SET_SELECTOR_ITEMS,payload:t}}},145:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(0),o=r(16),u=function(t,e){if(e.thumbnail)return t.restUrl+"/community/users/"+e.username+"/info/"+e.thumbnail+(t.credential?"?token="+t.credential.token:"")},i=Object(o.a)((function(t,e){return Object(n.a)(Object(n.a)({},e),{thumbURI:u(t,e)})}))},155:function(t,e,r){"use strict";r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return b}));var n=r(0),o=r(177),u=r(32),i=r(159),a=r(57),c=r(67),s=r(29),l=r(61),f=r(37),d=r(25),p=function(t,e){O(e()).then((function(r){var u=e(),s=Object(a.b)(u)?u:u.gbState,l=s.ui,f=s.utils;l.focus.focusSelectAll&&Object(i.c)(),t({type:c.a.LOAD_GROUPS_SUCCESS,payload:Object(n.a)(Object(n.a)({},r),{results:r.results.map((function(t){return Object(o.b)(f.portal,t)}))})})})).catch((function(r){var n=e();(Object(a.b)(n)?n:n.gbState).ui.focus.focusSelectAll&&Object(i.c)(),t({type:c.a.LOAD_GROUPS_FAIL,payload:r})}))},O=function(t){var e=Object(a.b)(t)?t:t.gbState,r=e.utils,n=r.request,o=r.portal,i=e.config,c=i.groupsPerPage,l=i.withinShare,d=(i.withinAppConfig,e.parameters),p=d.filter,O=d.sort,b=e.ui.page.currentPageNumber,E={q:g(e),num:c,sortField:O.field,sortOrder:O.order,start:(b-1)*c+1};return l&&(E.searchUserAccess="groupMember",E.searchUserName=p.currentUsername),p.designationFilter!==f.b.orgSettings||_(o)?new s.Promise((function(t,e){Object(u.g)(n,o,E).then(t,e)})):new s.Promise((function(t){t({query:E.q,total:0,start:1,num:100,nextStart:-1,results:[]})}))},b=function(t){var e=t.user,r=t.state,o=Object(a.b)(r)?r:r.gbState,i=o.utils,c=i.request,f=i.portal,d=Object(n.a)(Object(n.a)({},o),{parameters:Object(n.a)(Object(n.a)({},o.parameters),{filter:Object(n.a)(Object(n.a)({},o.parameters.filter),{currentUsername:e.username})})}),p={q:g(d),num:100,searchUserAccess:"groupMember",searchUserName:e.username};return new s.Promise((function(t,e){return Object(u.g)(c,f,p).then((function(e){if(-1!==e.nextStart){for(var r=Math.ceil(e.total/100)-1,o=[e.results],i=function(t){o.push(new s.Promise((function(e,r){var o=100*(t+1)+1;Object(u.g)(c,f,Object(n.a)(Object(n.a)({},p),{start:o})).then((function(t){e(t.results)}),r)})))},a=0;a<r;a++)i(a);s.Promise.all(o).then((function(e){t(Object(l.b)(e))}))}else t(e.results)}),e)})).catch((function(t){throw t}))},E=function(t){var e=t.shareMode,r=t.currentUsername,n=t.portalUser;switch(e){case d.d.DEFAULT:return"(owner:"+r+" OR isviewonly:false)";case d.d.GROUP:return"owner:"+r+" -capabilities:updateitemcontrol";case d.d.ADMIN:return n.username===r?"(isviewonly:false OR owner:"+n.username+") -capabilities:updateitemcontrol":"(owner:"+r+" OR isviewonly:false)";default:return""}},h=function(t,e){0!==(null==t?void 0:t.indexOf("id:"))||e.indexOf(t)>-1||e.push(t)},_=function(t){var e,r,n,o,u,i=[],a=[t.featuredItemsGroupQuery,t.basemapGalleryGroupQuery,t.templatesGroupQuery,t["2DStylesGroupQuery"],t.stylesGroupQuery,t.analysisLayersGroupQuery,t.galleryTemplatesGroupQuery];if(t.hasModernHomePageEnabled){var c=(null===(r=null===(e=t.homePageConfig)||void 0===e?void 0:e.content)||void 0===r?void 0:r.filter((function(t){return"gallery"===t.type&&!!t.groupId})))||[];c.length>0&&c.forEach((function(t){var e=t.groupId;h("id:"+e,i)}))}else a.push(t.homePageFeaturedContent);return a.forEach((function(t){h(t,i)})),null===(n=t.featuredGroups)||void 0===n||n.forEach((function(t){var e=t.id;e&&h("id:"+e,i)})),null===(u=null===(o=t.userDefaults)||void 0===o?void 0:o.groups)||void 0===u||u.forEach((function(t){h("id:"+t,i)})),i.length>0?"("+i.join(" OR ")+")":""},v=function(t){var e=t.designationFilter,r=t.portal;switch(e){case f.b.openData:return"isopendata:true";case f.b.updateGroups:return"capabilities:updateitemcontrol";case f.b.distributed:return"capabilities:distributed";case f.b.administrative:return"isleavingdisallowed:true";case f.b.orgSettings:return _(r)||"";default:return""}},m=function(t){return t?"anyOrg"===t?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:"+t:""},y=function(t){var e=t.ownerFilter,r=t.portal,n=t.username,o=t.currentUsername,u=t.shareMode,i=t.userType,a=t.withinAppConfig,c=u===d.d.ADMIN&&o||n,s=r.isPortal&&a?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":"";switch(e){case f.d.itemOwner:return"owner:"+c+" "+s;case f.d.inOrg:return"-owner:"+c+" orgid:"+r.id+" "+s;case f.d.outsideOrg:if(i===d.e.PUBLIC)return"-owner:"+c+" "+s;return"(orgid: [0 TO \\{]) -orgid:"+r.id+" "+s;default:return s}},S=function(t){return t?"created"+": ["+(e=t).start+" TO "+e.end+"]":"";var e},g=function(t){var e=t.utils,r=e.portal,n=e.portalUser,o=t.config,u=o.baseQ,i=o.shareMode,a=o.userType,c=o.withinAppConfig,s=o.hasIndoorsSpaces,l=t.parameters.filter,f=l.searchString,d=l.designationFilter,p=l.membershipFilter,O=l.dateCreatedFilter,b=l.currentUsername,h=l.ownerFilter;return[u+" "+f,E({shareMode:i,currentUsername:b,portalUser:n}),s?"-capabilities:distributed":v({designationFilter:d,portal:r}),s?"memberorgids:NULL":m(p),S(O),y({ownerFilter:h,portal:r,username:n.username,currentUsername:b,shareMode:i,userType:a,withinAppConfig:c})].filter((function(t){return t})).join(" ").trim()}},159:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u}));function n(){i("gb__select-all-input")}function o(){i("gb__clear-selection-btn")}function u(){setTimeout((function(){var t=document.querySelector(".gcard-gcc__container");if(t){var e=t.querySelector(".btn-2018check__input");e&&e.focus()}}),50)}function i(t){setTimeout((function(){var e=document.querySelector("#"+t);e&&e.focus()}),50)}},16:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(0);function o(t){return function e(){for(var r=this,o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return o.length>=t.length?t.call.apply(t,Object(n.g)([this],o)):function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return e.call.apply(e,Object(n.g)(Object(n.g)([r],o),t))}}}},164:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},17:function(e,r){e.exports=t},170:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t.TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"}(n||(n={}))},172:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var n=r(0),o=r(57),u=r(140),i=r(155),a=r(303),c=r(184),s=r(32),l=r(29),f=r(26),d=r(61),p=r(67),O=r(56),b=function(t){return function(e,r){var n=r(),s=(Object(o.b)(n)?n:n.gbState).utils,p=s.portal,b=s.portalUser;if(!(t&&t.selectorItems&&t.selectorItems.length>0))return e(i.b),l.Promise.resolve();var h=t.selectorItems,_=t.shareMode,v=t.userType;e({type:f.a.SET_SHARE_MODE,payload:_}),e({type:f.a.SET_USER_TYPE,payload:v}),e(Object(u.f)(h));var m=Object(O.b)({user:b,items:h,portal:p}),y=b.username===m.username?[b]:[b,m];return y.length>1&&!t.anySelectorItemsPrivate&&e({type:f.a.ENABLE_USER_TOGGLE}),e(Object(c.c)(y)),e(Object(c.h)(m.username)),e(i.b),void 0===n.config.hasTrustedOrgs&&e(a.a),l.Promise.all(y.map((function(t){return Object(i.a)({user:t,state:r()})}))).then((function(t){var r=Object(d.b)(t),n=r.map((function(t){return t.id})),o=r.filter((function(t,e){return n.indexOf(t.id)===e}));return e(E(o))}))}},E=function(t){return function(e,r){return new l.Promise((function(i,a){var c=r(),f=Object(o.b)(c)?c:c.gbState,d=f.utils,O=d.portal,b=d.request,E=f.groups.selectorItems,h=Object(s.b)(E),_=Object(s.a)(t).map((function(t){return Object(s.i)({itemIds:h,groupIds:Object(s.b)(t),portal:O,request:b})}));l.Promise.all(_).then((function(r){var o=r.reduce((function(t,e){return Object(n.a)(Object(n.a)({},t),e)}),{}),a=Object.keys(o),c=t.filter((function(t){return a.indexOf(t.id)>=0})).map((function(t){return{group:t,selectedByIds:o[t.id].items.map((function(t){return t.itemId}))}}));e({type:p.a.SET_HAS_GROUPS,payload:t.length>0}),e(Object(u.e)(c)),i()})).catch(a)}))}}},177:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return c})),r.d(e,"a",(function(){return s}));var n=r(59),o=r(6),u=r(96),i=r(124),a=function(t,e){return Object(n.a)(Object(i.b)(t))(e)},c=Object(n.a)(Object(o.e)("thumbURI")),s=function(t){var e=t.selectedBy,r=t.initialSelectedByIds;return!Object(u.a)(e.map((function(t){return t.id})),r)}},184:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"g",(function(){return u})),r.d(e,"h",(function(){return i})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return c})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return f}));var n=r(82),o=function(t){return{type:n.a.SET_SEARCH_STRING,payload:t}},u=function(t){return{type:n.a.UPDATE_OWNER_FILTER,payload:t}},i=function(t){return{type:n.a.UPDATE_USERNAME_FILTER,payload:t}},a=function(t){return{type:n.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:t}},c=function(t){return{type:n.a.UPDATE_MEMBERSHIP_FILTER,payload:t}},s=function(t){var e=t.section,r=t.created;return{type:n.a.UPDATE_CREATED_ON_FILTER,payload:{section:e,created:r}}},l=function(t){return{type:n.a.SET_USERS,payload:t}},f=function(t){return{type:n.a.CLEAR_FILTERS,payload:t}}},186:function(t,e){var r,n,o=t.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=s.length;e;){for(c=s,s=[];++f<e;)c&&c[f].run();f=-1,e=s.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function O(t,e){this.fun=t,this.array=e}function b(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new O(t,e)),1!==s.length||l||a(p)},O.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},196:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t.SET_PAGE="SET_PAGE",t.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN",t.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"}(n||(n={}))},199:function(t,e,r){"use strict";r.d(e,"b",(function(){return u}));var n=r(0),o=r(26),u={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};e.a=function(t,e){switch(void 0===t&&(t=u),e.type){case o.a.ENABLE_USER_TOGGLE:return Object(n.a)(Object(n.a)({},t),{enableUserToggle:!0});case o.a.SET_SHARE_MODE:return Object(n.a)(Object(n.a)({},t),{shareMode:e.payload});case o.a.SET_USER_TYPE:return Object(n.a)(Object(n.a)({},t),{userType:e.payload});case o.a.TRUSTED_ORGS_LOADED:return Object(n.a)(Object(n.a)({},t),{hasTrustedOrgs:e.payload.length>0});case o.a.SET_SELECTOR_ITEMS:var r=!!e.payload.find((function(t){var e;return(null===(e=null==t?void 0:t.typeKeywords)||void 0===e?void 0:e.indexOf("EditExtensionIndoorsSpaces"))>-1}));return Object(n.a)(Object(n.a)({},t),{hasIndoorsSpaces:r});default:return t}}},200:function(t,e,r){"use strict";r.d(e,"b",(function(){return i}));var n=r(17),o=r(201),u=r(37),i={sort:o.b,filter:u.f};e.a=Object(n.combineReducers)({sort:o.a,filter:u.e})},201:function(t,e,r){"use strict";r.d(e,"b",(function(){return u}));var n=r(0),o=r(26),u={field:"title",order:"asc"},i={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};e.a=function(t,e){switch(void 0===t&&(t=u),e.type){case o.a.CHANGE_SORT_FIELD:return Object(n.a)(Object(n.a)({},t),{field:e.payload,order:i[e.payload]});case o.a.CHANGE_SORT_ORDER:return Object(n.a)(Object(n.a)({},t),{order:e.payload});default:return t}}},202:function(t,e,r){"use strict";r.d(e,"b",(function(){return c}));var n=r(17),o=r(203),u=r(204),i=r(205),a=r(206),c={page:o.b,sort:u.b,focus:i.b,filter:a.b};e.a=Object(n.combineReducers)({page:o.a,sort:u.a,focus:i.a,filter:a.a})},203:function(t,e,r){"use strict";r.d(e,"b",(function(){return u}));var n=r(0),o=r(26),u={currentPageNumber:1};e.a=function(t,e){switch(void 0===t&&(t=u),e.type){case o.a.CLEAR_FILTERS:case o.a.UPDATE_USERNAME_FILTER:case o.a.UPDATE_OWNER_FILTER:case o.a.UPDATE_CREATED_ON_FILTER:case o.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(n.a)(Object(n.a)({},t),{currentPageNumber:1});case o.a.SET_PAGE:return Object(n.a)(Object(n.a)({},t),{currentPageNumber:e.payload});case o.a.LOAD_GROUPS_SUCCESS:return Object(n.a)(Object(n.a)({},t),{currentPageNumber:e.payload.num>e.payload.total?1:Math.ceil(e.payload.start/e.payload.num)});case o.a.LOAD_GROUPS_FAIL:return Object(n.a)(Object(n.a)({},t),{currentPageNumber:1});default:return t}}},204:function(t,e,r){"use strict";r.d(e,"b",(function(){return o}));var n=r(26),o=!1;e.a=function(t,e){switch(void 0===t&&(t=o),e.type){case n.a.CHANGE_SORT_FIELD:case n.a.CHANGE_SORT_ORDER:case n.a.TOGGLE_SORT_DROPDOWN:return!t;default:return t}}},205:function(t,e,r){"use strict";r.d(e,"b",(function(){return u}));var n=r(0),o=r(26),u={focusSelectAll:!1};e.a=function(t,e){switch(e.type){case o.a.LOAD_GROUPS_FAIL:case o.a.LOAD_GROUPS_SUCCESS:return Object(n.a)(Object(n.a)({},t),{focusSelectAll:!1});case o.a.CHANGE_SORT_FIELD:case o.a.CHANGE_SORT_ORDER:return Object(n.a)(Object(n.a)({},t),{focusSelectAll:!0});default:return t}}},206:function(t,e,r){"use strict";r.d(e,"b",(function(){return i}));var n=r(0),o=r(26),u=r(37),i={expanded:!1};e.a=function(t,e){switch(e.type){case o.a.CLEAR_FILTERS:switch(e.payload){case void 0:case u.a.DATE_CREATED:return Object(n.a)(Object(n.a)({},t),{dateCreatedSelectedSection:void 0});default:return t}case o.a.TOGGLE_EXPANDED_FILTERS:return Object(n.a)(Object(n.a)({},t),{expanded:!t.expanded});case o.a.UPDATE_CREATED_ON_FILTER:return Object(n.a)(Object(n.a)({},t),{dateCreatedSelectedSection:e.payload.section});default:return t}}},207:function(t,e,r){"use strict";r.d(e,"b",(function(){return o}));var n=r(99),o={portal:{},portalUser:{},request:function(t){return null}};e.a=function(t,e){return void 0===t&&(t=o),e.type,t.portal.portalHostname&&!t.portal.baseUrl&&(t.portal.baseUrl=Object(n.a)(t.portal)),t}},25:function(t,e,r){"use strict";var n,o,u,i,a;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return u})),r.d(e,"e",(function(){return i})),r.d(e,"d",(function(){return a})),function(t){t.org="org",t.private="private",t.public="public",t.shared="shared"}(n||(n={})),function(t){t.LOADING="LOADING",t.SHARE="SHARE",t.GROUP_BROWSER="GROUP_BROWSER",t.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"}(o||(o={})),function(t){t.SET_SHARE_TO_PRIVATE="SET_SHARE_TO_PRIVATE",t.REVERT_SHARE_LEVEL="REVERT_SHARE_LEVEL",t.REVERT_GROUPS="REVERT_GROUPS",t.EDITABLE_LAYERS="EDITABLE_LAYERS",t.OPEN_GROUP_BROWSER="OPEN_GROUP_BROWSER",t.NONE="NONE",t.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED",t.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"}(u||(u={})),function(t){t.ORG="ORG",t.PUBLIC="PUBLIC"}(i||(i={})),function(t){t.DEFAULT="DEFAULT",t.ADMIN="ADMIN",t.GROUP="GROUP"}(a||(a={}))},251:function(t,r){t.exports=e},26:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n,o=r(0),u=r(196),i=r(67),a=r(170),c=r(82);!function(t){t.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE",t.SET_SHARE_MODE="SET_SHARE_MODE",t.SET_USER_TYPE="SET_USER_TYPE"}(n||(n={}));var s=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},u.a),i.a),c.a),n),a.a)},29:function(t,e,r){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var n;n=function(){"use strict";function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,u=void 0,i=void 0,a=function(t,e){O[o]=t,O[o+1]=e,2===(o+=2)&&(i?i(b):m())},c="undefined"!=typeof window?window:void 0,s=c||{},l=s.MutationObserver||s.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(b,1)}}var O=new Array(1e3);function b(){for(var t=0;t<o;t+=2)(0,O[t])(O[t+1]),O[t]=void 0,O[t+1]=void 0;o=0}var E,h,_,v,m=void 0;function y(t,e){var r=this,n=new this.constructor(T);void 0===n[g]&&D(n);var o=r._state;if(o){var u=arguments[o-1];a((function(){return G(o,n,u,r._result)}))}else L(r,n,t,e);return n}function S(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return R(e,t),e}f?m=function(){return e.nextTick(b)}:l?(h=0,_=new l(b),v=document.createTextNode(""),_.observe(v,{characterData:!0}),m=function(){v.data=h=++h%2}):d?((E=new MessageChannel).port1.onmessage=b,m=function(){return E.port2.postMessage(0)}):m=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(u=t.runOnLoop||t.runOnContext)?function(){u(b)}:p()}catch(t){return p()}}():p();var g=Math.random().toString(36).substring(2);function T(){}function j(e,r,n){r.constructor===e.constructor&&n===y&&r.constructor.resolve===S?function(t,e){1===e._state?I(t,e._result):2===e._state?U(t,e._result):L(e,void 0,(function(e){return R(t,e)}),(function(e){return U(t,e)}))}(e,r):void 0===n?I(e,r):t(n)?function(t,e,r){a((function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,(function(r){n||(n=!0,e!==r?R(t,r):I(t,r))}),(function(e){n||(n=!0,U(t,e))}),t._label);!n&&o&&(n=!0,U(t,o))}),t)}(e,r,n):I(e,r)}function R(t,e){if(t===e)U(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(n=e),null===n||"object"!==o&&"function"!==o)I(t,e);else{var r=void 0;try{r=e.then}catch(e){return void U(t,e)}j(t,e,r)}var n,o}function A(t){t._onerror&&t._onerror(t._result),P(t)}function I(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(P,t))}function U(t,e){void 0===t._state&&(t._state=2,t._result=e,a(A,t))}function L(t,e,r,n){var o=t._subscribers,u=o.length;t._onerror=null,o[u]=e,o[u+1]=r,o[u+2]=n,0===u&&t._state&&a(P,t)}function P(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,u=t._result,i=0;i<e.length;i+=3)n=e[i],o=e[i+r],n?G(r,n,o,u):o(u);t._subscribers.length=0}}function G(e,r,n,o){var u=t(n),i=void 0,a=void 0,c=!0;if(u){try{i=n(o)}catch(t){c=!1,a=t}if(r===i)return void U(r,new TypeError("A promises callback cannot return that same promise."))}else i=o;void 0!==r._state||(u&&c?R(r,i):!1===c?U(r,a):1===e?I(r,i):2===e&&U(r,i))}var w=0;function D(t){t[g]=w++,t._state=void 0,t._result=void 0,t._subscribers=[]}var C=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[g]||D(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&I(this.promise,this._result))):U(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===S){var o=void 0,u=void 0,i=!1;try{o=t.then}catch(t){i=!0,u=t}if(o===y&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===N){var a=new r(T);i?U(a,u):j(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;void 0===n._state&&(this._remaining--,2===t?U(n,r):this._result[e]=r),0===this._remaining&&I(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;L(t,void 0,(function(t){return r._settledAt(1,e,t)}),(function(t){return r._settledAt(2,e,t)}))},t}(),N=function(){function e(t){this[g]=w++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){R(t,e)}),(function(e){U(t,e)}))}catch(e){U(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return N.prototype.then=y,N.all=function(t){return new C(this,t).promise},N.race=function(t){var e=this;return n(t)?new e((function(r,n){for(var o=t.length,u=0;u<o;u++)e.resolve(t[u]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},N.resolve=S,N.reject=function(t){var e=new this(T);return U(e,t),e},N._setScheduler=function(t){i=t},N._setAsap=function(t){a=t},N._asap=a,N.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=N},N.Promise=N,N},t.exports=n()}).call(this,r(186),r(164))},303:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(32),o=r(57),u=r(170),i=function(t,e){var r=e(),i=(Object(o.b)(r)?r:r.gbState).utils,a=i.request,c=i.portal;Object(n.q)(a,c).then((function(e){var r,n=(null===(r=null==e?void 0:e.trustedOrgs)||void 0===r?void 0:r.filter((function(t){return t.from.established>-1&&t.to.established>-1})))||[];t({type:u.a.TRUSTED_ORGS_LOADED,payload:n})}),(function(){t({type:u.a.TRUSTED_ORGS_LOADED,payload:[]})}))}},32:function(t,e,r){"use strict";r.d(e,"u",(function(){return u})),r.d(e,"n",(function(){return i})),r.d(e,"h",(function(){return a})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return s})),r.d(e,"j",(function(){return l})),r.d(e,"o",(function(){return f})),r.d(e,"l",(function(){return d})),r.d(e,"k",(function(){return p})),r.d(e,"m",(function(){return O})),r.d(e,"c",(function(){return b})),r.d(e,"d",(function(){return E})),r.d(e,"r",(function(){return _})),r.d(e,"s",(function(){return v})),r.d(e,"t",(function(){return m})),r.d(e,"g",(function(){return y})),r.d(e,"p",(function(){return S})),r.d(e,"q",(function(){return g})),r.d(e,"v",(function(){return T})),r.d(e,"a",(function(){return j})),r.d(e,"i",(function(){return R})),r.d(e,"b",(function(){return A}));var n=r(0),o=r(29),u=function(t){return function(e,r){return t({url:e,content:r.query},{usePost:"post"===r.method}).then((function(t){return{data:t}}))}},i=function(t,e,r){return T(t,e.restUrl+"/portals/self",{culture:r,default:!0})},a=function(t,e,r){return T(t,e.restUrl+"/content/items/"+r+"/data")},c=function(t,e,r,o){return T(t,e.restUrl+"/community/groups",Object(n.a)({q:r},o))},s=function(t,e,r){return T(t,e.restUrl+"/community/groups/"+r+"/categorySchema")},l=function(t,e,r){return T(t,e.restUrl+"/portals/"+(r||e.id)+"/categorySchema")},f=function(t,e){return T(t,e.restUrl+"/portals/"+e.id+"/servers")},d=function(t,e,r,n){return t(e.restUrl+"/portals/"+(r||e.id)+"/collaborationsSummary",n)},p=function(t,e,r,n){return t(e.restUrl+"/portals/"+(r||e.id)+"/collaboratedItems",n)},O=function(t,e,r){return T(t,location.protocol+"//"+e.portalHostname+"/sharing/rest/portals/"+(r||"self"))},b=function(t,e,r){return t(e.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+e.id+" AND access:public",num:100,start:r||1,sortField:"title",sortOrder:"asc"}}).then((function(r){return r.data.total>r.data.start+r.data.num?b(t,e,r.data.start+r.data.num).then((function(t){return Object(n.a)(Object(n.a)({},t),{data:Object(n.a)(Object(n.a)({},t.data),{results:r.data.results.concat(t.data.results)})})})):r}))},E=function(t,e,r,n){return t(e.restUrl+"/community/users/"+r+"/provisionedListings",{query:{f:"json",num:100,start:n||1}}).then((function(n){var u=o.Promise.all(n.data.provisionedListings.filter((function(t){return t.itemId})).map((function(r){return new o.Promise((function(n,o){t(e.restUrl+"/content/items/"+r.itemId,{method:"get",query:{f:"json"}}).then((function(t){var e=t.data;n(e)}),o)})).catch((function(t){return console.error(t)}))}))),i=n.data.provisionedListings.map((function(r){return T(t,e.restUrl+"/content/items/"+(r.id||r.itemId)+"/relatedItems?relationshipType=Listed2ImplicitlyListed&direction=forward").then((function(t){return t}),(function(t){}))}));return n.data.total>n.data.start+n.data.num?E(t,e,r,n.data.start+n.data.num).then((function(t){return o.Promise.all([u].concat(i)).then((function(e){return e[0].results.concat(h(e.slice(1))).concat(t)}))})):o.Promise.all([u].concat(i)).then((function(t){return t[0].filter((function(t){return void 0!==t})).concat(h(t.slice(1)))}))}))};function h(t){return t.reduce((function(t,e){return e&&e.relatedItems?t.concat(e.relatedItems.map((function(t){return t}))):t}),[])}var _=function(t,e,r){return T(t,e.restUrl+"/community/users/"+(r||e.user.username))},v=function(t,e,r){return T(t,e.restUrl+"/content/users/"+(r||e.user.username),{num:1})},m=function(t,e,r){return T(t,e.restUrl+"/content/groups/"+r)},y=function(t,e,r){return T(t,e.restUrl+"/community/groups",r)},S=function(t,e){return T(t,e.restUrl+"/portals/self/settings")},g=function(t,e){return T(t,e.restUrl+"/portals/self/trustedOrgs",{num:100})};function T(t,e,r){return t(e,{query:Object(n.a)({f:"json"},r)}).then((function(t){return t.data}))}function j(t,e){void 0===e&&(e=100);for(var r=[],n=0;n<Math.ceil(t.length/e);n++){var o=n*e,u=(n+1)*e;r.push(t.slice(o,u))}return r.filter((function(t){return t.length>0}))}function R(t){var e=t.itemIds,r=t.portal,n=t.request,u=t.groupIds,i=r.restUrl+"/content/itemsgroups";return new o.Promise((function(t,r){n(i,{method:"get",query:{f:"json",items:e,groups:u}}).then((function(e){var r=e.data;t(r)}),r)}))}var A=function(t,e){return void 0===e&&(e=","),t.map((function(t){return t.id})).join(e)}},37:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"f",(function(){return l}));var n,o,u,i,a,c=r(0),s=r(26);!function(t){t.openData="openData",t.updateGroups="updateGroups",t.distributed="distributed",t.administrative="administrative",t.orgSettings="orgSettings"}(n||(n={})),function(t){t.owner="owner"}(o||(o={})),function(t){t.itemOwner="itemOwner",t.inOrg="inOrg",t.outsideOrg="outsideOrg"}(u||(u={})),function(t){t.myOrg="org",t.partnered="collaboration",t.anyOrg="anyOrg"}(i||(i={})),function(t){t.USER="USER",t.OWNER="OWNER",t.DESIGNATION="DESIGNATION",t.DATE_CREATED="DATE_CREATED",t.MEMBERSHIP="MEMBERSHIP"}(a||(a={}));var l={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};e.e=function(t,e){switch(void 0===t&&(t=l),e.type){case s.a.CLEAR_FILTERS:switch(e.payload){case a.DESIGNATION:return Object(c.a)(Object(c.a)({},t),{designationFilter:void 0});case a.DATE_CREATED:return Object(c.a)(Object(c.a)({},t),{dateCreatedFilter:void 0});case a.OWNER:return Object(c.a)(Object(c.a)({},t),{ownerFilter:void 0});case a.USER:return t;case a.MEMBERSHIP:return Object(c.a)(Object(c.a)({},t),{membershipFilter:void 0});default:return Object(c.a)(Object(c.a)({},t),{designationFilter:void 0,dateCreatedFilter:void 0,membershipFilter:void 0,ownerFilter:void 0})}case s.a.UPDATE_OWNER_FILTER:return Object(c.a)(Object(c.a)({},t),{ownerFilter:e.payload===t.ownerFilter?void 0:e.payload});case s.a.UPDATE_USERNAME_FILTER:return Object(c.a)(Object(c.a)({},t),{currentUsername:e.payload});case s.a.UPDATE_CREATED_ON_FILTER:return Object(c.a)(Object(c.a)({},t),{dateCreatedFilter:e.payload.created});case s.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(c.a)(Object(c.a)({},t),{designationFilter:e.payload===t.designationFilter?void 0:e.payload});case s.a.UPDATE_MEMBERSHIP_FILTER:return Object(c.a)(Object(c.a)({},t),{membershipFilter:e.payload===t.membershipFilter?void 0:e.payload});case s.a.SET_USERS:return Object(c.a)(Object(c.a)({},t),{allUsers:e.payload.reduce((function(t,e){var r;return Object(c.a)(Object(c.a)({},t),((r={})[e.username]=e,r))}),{})});case s.a.SET_SEARCH_STRING:return Object(c.a)(Object(c.a)({},t),{searchString:e.payload});default:return t}}},55:function(t,e,r){"use strict";r.d(e,"h",(function(){return c})),r.d(e,"l",(function(){return s})),r.d(e,"k",(function(){return l})),r.d(e,"i",(function(){return f})),r.d(e,"j",(function(){return d})),r.d(e,"g",(function(){return p})),r.d(e,"b",(function(){return O})),r.d(e,"a",(function(){return b})),r.d(e,"c",(function(){return E})),r.d(e,"d",(function(){return _})),r.d(e,"e",(function(){return v})),r.d(e,"f",(function(){return m}));var n,o=r(59),u=r(145),i=r(6),a=r(56);!function(t){t.user="org_user",t.accountUser="account_user",t.publisher="org_publisher",t.accountPublisher="account_publisher",t.admin="org_admin",t.accountAdmin="account_admin",t.viewer="iAAAAAAAAAAAAAAA",t.dataEditor="iBBBBBBBBBBBBBBB"}(n||(n={}));var c=function(t){var e=t.items,r=t.user,n=t.portal,o=e[0],u=Object(a.c)(o,r),i=d(r),c=h(r,n),s=!!r.orgId&&e.every((function(t){return t.portal.id===r.orgId})),f=Object(a.a)(o,r)&&function(t){return(t.privileges||[]).indexOf("portal:admin:updateItems")>-1}(r)&&!i&&(function(t,e){return!l(e)||b(t)||O(t)||e.canSharePublic&&E(t)}(r,n)||h(r,n));return u||f||s&&c},s=function(t,e){return Object(o.a)(Object(u.a)(t))(e)};function l(t){return!(!t.urlKey||!t.customBaseUrl)}function f(t){return t.role===n.admin||t.role===n.accountAdmin}function d(t){return Object(i.a)(t.roleId)&&(t.roleId||"").length>0}function p(t){return!d(t)||d(t)&&function(t){return(t.privileges||[]).indexOf("portal:admin:viewItems")>-1}(t)}function O(t){return(t.privileges||[]).indexOf("portal:user:shareToOrg")>-1}function b(t){return(t.privileges||[]).indexOf("portal:user:shareToGroup")>-1}function E(t){return(t.privileges||[]).indexOf("portal:user:shareToPublic")>-1}function h(t,e){return _(t)||v(t)||e.canSharePublic&&m(t)}function _(t){return(t.privileges||[]).indexOf("portal:admin:shareToGroup")>-1}function v(t){return(t.privileges||[]).indexOf("portal:admin:shareToOrg")>-1}function m(t){return(t.privileges||[]).indexOf("portal:admin:shareToPublic")>-1}},56:function(t,e,r){"use strict";r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return c}));var n=r(6),o=r(55);function u(t,e){return(null==t?void 0:t.owner)===e.username}function i(t,e){return u(t,e)||function(t,e){if(Object(n.a)(t.isAdmin))return!!t.isAdmin;var r=t.owner,o="admin"===t.itemControl;return!(t.portal.isPortal&&!u(t,e)&&o&&r.indexOf("esri_")>-1&&["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(r)<0)&&o}(t,e)}function a(t,e){return i(t,e)||"update"===t.itemControl}var c=function(t){var e=t.user,r=t.items,n=t.portal;return Object(o.h)({items:r,user:e,portal:n})&&Object(o.g)(e)&&r[0].itemOwner||e}},57:function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"c",(function(){return f}));var n=r(17),o=r(207),u=r(200),i=r(131),a=r(202),c=r(199),s=function(t){return!t.gbState},l={config:c.b,parameters:u.b,groups:i.f,ui:a.b,utils:o.b},f=Object(n.combineReducers)({config:c.a,parameters:u.a,groups:i.b,ui:a.a,utils:o.a})},59:function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduceRight((function(t,e){return e(t)}),e)}}r.d(e,"a",(function(){return n}))},6:function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return i})),r.d(e,"e",(function(){return a})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return l}));var n=r(0),o=r(16);function u(t){return 0===Object.keys(t).length&&t.constructor===Object}function i(t){return null!=t}var a=Object(o.a)((function(t,e){var r=Object(n.a)({},e);return delete r[t],r}));function c(t,e){return s.apply(null,arguments)}var s=Object(o.a)((function(t,e){return Object.keys(e).reduce((function(r,n){return r[n]=t(e[n],n,e),r}),{})}));function l(t,e){return f.apply(null,arguments)}var f=Object(o.a)((function(t,e){return Object.keys(e).reduce((function(r,n){return t(e[n],n,e)&&(r[n]=e[n]),r}),{})}))},61:function(t,e,r){"use strict";r.d(e,"h",(function(){return s})),r.d(e,"g",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"e",(function(){return p})),r.d(e,"d",(function(){return O})),r.d(e,"f",(function(){return _})),r.d(e,"c",(function(){return v})),r.d(e,"a",(function(){return m}));var n,o=r(0),u=r(32),i=r(29),a=r(25),c=r(56),s=function(t){var e=t.items,r=t.groups,n=t.restUrl,o=t.request,a=t.portalUser;if(0===e.length)return i.Promise.resolve();var s=Object(u.b)(r);return e.every((function(t){return Object(c.d)(t,a)}))?new i.Promise((function(t,i){if(!r||0===r.length)return t();var c={f:"json",items:Object(u.b)(e),groups:s};o(n+"/content/users/"+a.username+"/unshareItems",{method:"post",query:c}).then(t,i)})):f({items:e,groupIds:s,restUrl:n,request:o,unshare:!0})},l=function(t){var e=t.items,r=t.groups,n=t.restUrl,a=t.request,s=t.portalUser,l=t.selectedOptions,d=t.ignoreShareLevel;if(0===e.length)return i.Promise.resolve();if(!d&&!l)throw"Selected options must be provided unless share level is ignored.";var p=Object(u.b)(r),O=d?{}:b(l);return e.every((function(t){return Object(c.d)(t,s)}))?new i.Promise((function(t,r){a(n+"/content/users/"+s.username+"/shareItems",{method:"post",query:Object(o.a)({f:"json",items:Object(u.b)(e),groups:p,confirmItemControl:!0},O)}).then((function(e){var n=e.data;n.results.every((function(t){return t.success}))?t():r(n)}),r)})):f({items:e,groupIds:p,shareLevelOptions:O,restUrl:n,request:a})};function f(t){var e=t.items,r=t.groupIds,n=t.shareLevelOptions,u=t.restUrl,a=t.request,c=t.unshare;return i.Promise.all(e.map((function(t,e){return new i.Promise((function(e,i){a(u+"/content/items/"+(t.itemId||t.id)+"/"+(c?"unshare":"share"),{method:"post",query:Object(o.a)({f:"json",groups:r,confirmItemControl:!0},n||{})}).then(e,i)}))}))).catch((function(t){throw t}))}var d=function(t){return t.reduce((function(t,e){return Object(o.g)(Object(o.g)([],t),e)}),[])},p=function(t){return Object.keys(t).filter((function(e){return"total"!==e&&t[e]>0})).length>1},O=function(t){return Object.keys(t).filter((function(t){return"total"!==t})).reduce((function(e,r){return t[r]===t.total?r:e}))},b=function(t){return p(t)?{}:E[O(t)]},E=((n={})[a.b.public]={org:!1,everyone:!0},n[a.b.org]={org:!0,everyone:!1},n[a.b.private]={org:!1,everyone:!1},n[a.b.shared]={org:!1,everyone:!1},n),h=["Location Tracking Service","Location Tracking View","IoTFeed","IoTRealTimeAnalytic","IoTBigDataAnalytic","IoTFeatureLayer","IoTMapImageLayer","IoTStreamLayer","Administrative Report","EditExtensionIndoorsSpaces"],_=function(t){var e,r,n=t.typeKeywords,o=t.type,u=h.some((function(t){return n.indexOf(t)>-1}))&&"Real Time Analytic"!==o&&"Big Data Analytic"!==o,i=!(null===(e=null==t?void 0:t.portal)||void 0===e?void 0:e.isPortal)&&"Image Service"===t.type&&(null===(r=t.url)||void 0===r?void 0:r.indexOf("://iservices"))>-1&&t.url.indexOf("arcgis.com")>-1,a="Knowledge Graph"===t.type;return u||i||a},v=function(t,e,r){return function(t,e){return e&&t.public===t.total}(e,r)?t.filter((function(t){return t.typeKeywords.indexOf("DeveloperBasemap")>-1})):[]};function m(t,e){return new i.Promise((function(r,n){var o,u=null===(o=t.helpMap)||void 0===o?void 0:o.m;u?r(u):e(t.restUrl+"/portals/helpmap",{query:{f:"json",format:"json"}}).then((function(t){var e;r(null===(e=t.data.helpMap)||void 0===e?void 0:e.m)}),n)}))}},67:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t.LOADING_GROUPS="LOADING_GROUPS",t.LOAD_GROUPS_SUCCESS="LOAD_GROUPS_SUCCESS",t.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL",t.SELECT_GROUPS="SELECT_GROUPS",t.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS",t.DESELECT_GROUPS="DESELECT_GROUPS",t.REVERT_GROUPS="REVERT_GROUPS",t.CLEAR_SELECTION="CLEAR_SELECTION",t.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS",t.SET_HAS_GROUPS="SET_HAS_GROUPS"}(n||(n={}))},82:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t.SET_SEARCH_STRING="SET_SEARCH_STRING",t.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER",t.CHANGE_SORT_FIELD="CHANGE_SORT_FIELD",t.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER",t.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER",t.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER",t.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER",t.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER",t.SET_USERS="SET_USERS",t.CLEAR_FILTERS="CLEAR_FILTERS"}(n||(n={}))},959:function(t,e,r){"use strict";r.r(e),r.d(e,"GroupBrowserWrapper",(function(){return l}));var n=r(0),o=r(17),u=r(251),i=r.n(u),a=r(26),c=r(32),s=r(172);r.d(e,"initialState",(function(){return u.initialState}));var l=function(){function t(t,e){this.options=e,this.listener=this.listener.bind(this),this.renderContainer=document.createElement("div"),this.renderContainer.style.width="100%",this.renderContainer.style.height="100%",this.renderContainer.id="group-browser-wrapper",t.appendChild(this.renderContainer);var r=e.initialState?e.initialState:u.initialState;this.initialState=Object(n.a)(Object(n.a)({},r),{config:r.config,utils:{portalUser:e.portalUser,request:4===e.apiVersion?e.request:Object(c.u)(e.request),portal:4===e.apiVersion?e.portal:Object(n.a)(Object(n.a)({},e.portal),{restUrl:e.portal.portalUrl.slice(0,-1),credential:e.portalUser&&e.portalUser.credential?e.portal.user.credential:void 0})}}),this.store=Object(o.applyMiddleware)(o.thunk,Object(o.addListener)(this.listener))(o.createStore)(u.reducers,this.initialState),this.projector=Object(o.createProjector)(this.store,(function(t){return t(i.a,{key:"gb"})}),this.renderContainer),this.store.dispatch(Object(s.a)())}return t.prototype.getState=function(){return this.store?this.store.getState():this.initialState},t.prototype.deselectGroups=function(t){if(this.store){var e=this.store.getState(),r=t.filter((function(t){return e.groups.selectedGroups[t]})).map((function(t){return e.groups.selectedGroups[t].group}));this.store.dispatch(Object(u.deselectGroups)(r))}},t.prototype.selectGroups=function(t){this.store&&this.store.dispatch(Object(u.selectGroups)(t))},t.prototype.emitSelectedGroups=function(t){this.options.onChange&&this.options.onChange(Object.keys(t).map((function(e){return t[e].group})))},t.prototype.listener=function(t,e){var r=e.groups.selectedGroups;switch(t.type){case a.a.DESELECT_GROUPS:case a.a.SELECT_GROUPS:case a.a.CLEAR_SELECTION:this.emitSelectedGroups(r)}this.options.listener&&this.options.listener(t,e)},t}()},96:function(t,e,r){"use strict";r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return u})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return c})),r.d(e,"d",(function(){return s}));var n=r(16),o=function(t,e,r){return r.indexOf(t)===e},u=Object(n.a)((function(t,e){var r={};return e.filter((function(e){return!r[e[t]]&&(r[e[t]]=!0,!0)}))}));function i(t,e){if(null==t?void 0:t.length)for(var r=void 0,n=0;n<t.length;n++)if(e(r=t[n]))return r}function a(t){return t.filter((function(t){return t.length>0}))}var c=function(t,e){return t.length===e.length&&t.reduce((function(t,r){return t&&e.indexOf(r)>-1}),!0)};function s(t,e,r){var n=[];return e.forEach((function(e){(r?e[r].toLowerCase()===t.toLowerCase():e.toLowerCase()===t.toLowerCase())?n.unshift(e):n.push(e)})),n}},99:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u}));var n=r(0),o=function(t){return t?t.urlKey?location.protocol+"//"+t.urlKey+"."+t.customBaseUrl:location.protocol+"//"+t.portalHostname:""},u=function(t){return Object(n.a)(Object(n.a)({},t),{baseUrl:o(t)})}}})}));
//# sourceMappingURL=GroupBrowser.js.map