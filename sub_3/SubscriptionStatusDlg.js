//>>built
define("arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg",["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(b,d,e){b.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");b.require("dijit.Dialog");b.require("dijit._Widget");b.require("dijit._Templated");b.require("dijit.form.Button");b.require("dojo.cookie");b.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",[d._Widget,d._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(a){this.clear();this.setSubscriptionState(a);this.setActionMessage(a);this.subscriptionStatusDlg.show()},showOther:function(a){this.clear();this.setOtherSubscriptionStatus(a);b.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(a){if(a&&a.state){var c=this.i18n.subscriptionStatusExpiredMsg;a=a.state.toLowerCase();"expired"===a?c=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===a?c=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===a?c=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===a&&(c=this.i18n.subscriptionStatusRestrictedMsgNoLink);b.attr(this.subscriptionStateDiv,"innerHTML",c)}},setOtherSubscriptionStatus:function(a){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var c=this.i18n.expiredStatus;
a&&("SB_0005"===a?c=this.i18n.suspendedStatus:"SB_0006"===a?c=this.i18n.cancelledStatus:"SB_0007"===a&&(c=this.i18n.expiredStatus));a=esri.substitute({subscriptionState:c},this.i18n.otherSubscriptionStatusMsg);b.attr(this.subscriptionStateDiv,"innerHTML",a)},setActionMessage:function(a){var c=this.getUser();c&&c.role&&("org_admin"===c.role||"account_admin"===c.role)?((a.type||"").toLowerCase(),a.state.toLowerCase(),a=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),b.attr(this.actionNeededDiv,"innerHTML",a)):b.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){b.query(".jevent").connect("onclick",function(a){a.preventDefault()});b.connect(this.subscriptionStatusDlg,"onCancel",b.hitch(this,function(a){this.onCancel(a)}));b.connect(this.subscriptionStatusDlg,"hide",b.hitch(this,function(a){this.onHide(a)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);b.attr(this.subscriptionStateDiv,"innerHTML","");b.attr(this.actionNeededDiv,"innerHTML","");b.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(a){d.byId("subscription-status-dialog").hide()},getUser:function(){var a=b.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(a)||null},onCancel:function(){},onHide:function(){}})});