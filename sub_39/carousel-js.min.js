var flkty,flktyAlt,transformer,clickHandler,slideTo;jQuery(window).on("scroll",function(a){document.getElementById('home-header').clientWidth>620&&(jQuery(window).scrollTop()>23?jQuery("#carousel-nav").addClass("lock"):jQuery("#carousel-nav").removeClass("lock"))}),Flickity.createMethods.push('_createPrevNextCells'),Flickity.prototype._createPrevNextCells=function(){this.on('select',this.setPrevNextCells)},Flickity.prototype.setPrevNextCells=function(){changeSlideClasses(this.previousSlide,'remove','is-previous'),changeSlideClasses(this.nextSlide,'remove','is-next'),this.previousSlide=this.slides[this.selectedIndex-1],this.nextSlide=this.slides[this.selectedIndex+1],changeSlideClasses(this.previousSlide,'add','is-previous'),changeSlideClasses(this.nextSlide,'add','is-next')};function changeSlideClasses(a,b,c){if(!a)return;a.getCellElements().forEach(function(a){a.classList[b](c)})}function weeknr(){const c=new Date,a=new Date(c.getFullYear(),0,1),b=(c-a)/864e5;return Math.ceil((b+a.getDay()+1)/7)==53?52:Math.ceil((b+a.getDay()+1)/7)==0?1:Math.ceil((b+a.getDay()+1)/7)}function year(){var a=new Date;return a.getFullYear()}'use strict';const elem=document.querySelector('.main-carousel'),firstyear=2017,firstweek=1,transValues=[{name:'scale',stops:[[-300,.6],[0,1],[800,.8]]},{name:'translateY',stops:[[-300,-100],[0,0],[700,-50]]},{name:'translateX',stops:[[-300,100],[0,-50],[700,50]]},{name:'perspective',stops:[[-300,1400],[0,1400],[300,1400]]},{name:'rotateY',stops:[[-700,360],[-50,180],[0,180],[50,180],[700,-35]]}],altTransValues=[],whatweek=weeknr();for(let a=firstyear;a<=whatyear;a++){let b=document.getElementsByClassName('years')[0].innerHTML,c='<a href="" id="kalenderjaar'+a+'" data-jaar="'+a+'" onclick="navto('+a+');return false">'+a+'</a>';document.getElementsByClassName('years')[0].innerHTML=b+c}function navto(b){let a=(b-firstyear)*52;document.getElementById('home-header').classList.contains('alternate')&&(a=a/3),flkty.select(a,!1,!1)}initSlider(),document.getElementById("carousel-prev").addEventListener("click",function(){flkty.previous()},{passive:!0}),document.getElementById("carousel-next").addEventListener("click",function(){flkty.next()},{passive:!0}),clickHandler=function(a){document.querySelector(".view-button").removeEventListener("click",clickHandler,!1),toggleCaseView()},document.querySelector(".view-button").addEventListener("click",clickHandler,!1);function repositionLine(){let a=document.querySelector('.greenline').clientWidth+document.querySelector('.greenline').offsetLeft;document.getElementById('line-diagonal').style.left=a+'px',document.getElementById('line-diagonal').style.width=document.querySelector('.home-header').clientWidth-a+'px'}function initSlider(){var b,a;repositionLine(),b=0,a="",console.log('init'),flkty=new Flickity(elem,{contain:!1,wrapAround:!1,setGallerySize:!1,pageDots:!1,prevNextButtons:!1,initialIndex:'.is-initial-select',cellSelector:'.carousel-cell',draggable:!0,accessibility:!1,on:{ready:function(){document.getElementById('carousel-loader').style.opacity="1",document.getElementById('carousel-loader').style.display="none",document.querySelector(".view-button").addEventListener("click",clickHandler);let a=document.querySelector('.is-initial-select').getAttribute('data-bg-image');document.getElementById('main-carousel-bg').style.backgroundImage!==a&&(document.getElementById('main-carousel-bg').style.backgroundImage='url("'+a+'")'),Array.prototype.slice.call(document.querySelectorAll('.carousel-cell')).forEach(function(a){a.classList.add('show')}),setTimeout(function(){if(document.getElementById('home-header').clientWidth>620){document.getElementById('carousel-nav').style.top='calc(100% - 70px)';let a=document.querySelector('.is-initial-select').getAttribute('data-id');document.getElementById('carousel-nav').style.opacity='1',createMediaCarousel(a)}else{const a=window.innerHeight;document.getElementById('carousel-nav').setAttribute('style','top: '+(a-140)+'px;'),document.getElementById('carousel-nav').style.opacity='1'}},2e3)},change:function(c){document.getElementById('home-header').clientWidth<=620?(!a||a=="")&&(a=((document.querySelector('.greenline').clientWidth+document.querySelector('.greenline').offsetLeft)/3*2-100)/52):(!a||a=="")&&(a=((document.querySelector('.greenline').clientWidth+document.querySelector('.greenline').offsetLeft)/3*2-200)/52);let d=document.querySelectorAll('[data-id="'+c+'"]')[0].getAttribute('data-week'),e=document.querySelectorAll('[data-id="'+c+'"]')[0].getAttribute('data-year'),f=document.querySelectorAll('[data-id="'+c+'"]')[0].getAttribute('data-month'),g=a*d;if(document.getElementById('kalenderweek').style.transform="translate("+g+"px)",document.getElementById('kalenderweek').innerHTML='week '+d,document.getElementById('kalenderjaarenmaand').innerHTML='<span class="year">'+e+'</span><span class="month">'+f+'</span',document.getElementById('home-header').clientWidth>620){var h=document.querySelectorAll('[data-id="'+b+'"]')[0].querySelectorAll('iframe');Array.prototype.slice.call(h).forEach(function(a){let b=a.src;a.src=b})}document.querySelectorAll('[data-id="'+c+'"]')[0].querySelector('.foto').setAttribute("style","background-image: url('"+document.querySelectorAll('[data-id="'+c+'"]')[0].querySelector('.foto').getAttribute('data-foto')+"')")},settle:function(a){if(document.getElementById('home-header').clientWidth>=620){let b=document.querySelectorAll('[data-id="'+a+'"]')[0].getAttribute('data-bg-image');b==''&&(b=defaultbg),document.getElementById('main-carousel-bg').style.backgroundImage!==b&&(document.getElementById('main-carousel-bg').style.backgroundImage='url("'+b+'")'),document.getElementById('home-header').clientWidth>=768&&createMediaCarousel(a)}b=a}}}),document.getElementById('home-header').clientWidth>1280&&(transformer=new FlickityTransformer(flkty,transValues))}window.addEventListener('resize',function(){flkty.reposition(),document.getElementById('home-header').classList.contains('alternate')?document.getElementById('home-header').clientWidth<=768?(flkty.destroy(),document.getElementById('home-header').classList.remove('alternate'),initSlider()):transformer=new FlickityTransformer(flkty,altTransValues):(repositionLine(),document.getElementById('home-header').clientWidth<=1280?transformer=new FlickityTransformer(flkty,[]):transformer=new FlickityTransformer(flkty,transValues))}),slideTo=function(a){a?flkty.next():flkty.previous()};function toggleCaseView(){document.getElementById('carousel-loader').style.display="block",document.getElementById('home-header').classList.toggle('alternate'),jQuery('.carousel-cell').css('opacity','0'),flkty.destroy(),document.querySelector('.is-clicked')!==null&&(document.querySelector(".is-clicked").querySelector(".back").removeAttribute("style"),document.querySelector(".is-clicked").querySelector(".back").removeAttribute('style'),document.querySelector('.is-clicked').classList.remove('is-clicked')),document.querySelector('.is-expanded')!==null&&document.querySelector('.is-expanded').classList.remove('is-expanded'),document.querySelector('.is-selected')!==null&&document.querySelector('.is-selected').classList.remove('is-selected'),document.getElementById('home-header').classList.contains('alternate')?setTimeout(function(){initAlternateSlider(),jQuery('.carousel-cell').css('opacity','1')},500):(Array.prototype.slice.call(document.querySelectorAll('.cell-container')).forEach(function(a,b){Array.prototype.slice.call(a.querySelectorAll(".back")).forEach(function(a){a.removeAttribute("style")}),a.replaceWith(...a.childNodes)}),setTimeout(function(){initSlider(),document.getElementById('home-header').clientWidth<1280?(jQuery('.carousel-cell').css('opacity',''),jQuery('.carousel-cell.is-selected').css('opacity','')):jQuery('.carousel-cell').css('opacity','1')},500)),setTimeout(function(){document.querySelector(".view-button").addEventListener("click",clickHandler)},1e3)}function initAlternateSlider(){var a,b,c;Array.prototype.slice.call(document.querySelectorAll('.carousel-cell')).forEach(function(b,c){(c==0||c%3==0)&&(a=document.createElement("DIV"),a.setAttribute("class","cell-container"),a.setAttribute("data-year",b.getAttribute("data-year")),a.setAttribute("data-week",b.getAttribute("data-week")),a.setAttribute("data-bg-img",b.getAttribute("data-bg-img")),document.getElementById("main-carousel").insertBefore(a,b)),b.classList.contains('is-initial-select')&&a.classList.add('is-initial-select-container'),b.getAttribute("data-week")==1&&(a.classList.add("newyear"),a.setAttribute("data-year",b.getAttribute("data-year"))),a.appendChild(b)}),b=0,c="",transformer=new FlickityTransformer(flkty,[]),flkty=new Flickity(elem,{freeScroll:!0,contain:!1,wrapAround:!0,setGallerySize:!1,pageDots:!1,prevNextButtons:!1,initialIndex:'.is-initial-select-container',cellSelector:'.cell-container',draggable:!0,accessibility:!1,on:{ready:function(){document.getElementById('carousel-loader').style.display="none"},change:function(b){if(document.getElementById('kalenderjaarenmaand').style.opacity==1&&(document.getElementById('kalenderjaarenmaand').setAttribute("style","opacity:0"),document.getElementById('kalenderweek').setAttribute("style","opacity:0")),document.getElementById('home-header').clientWidth>620&&document.querySelector('.is-clicked')!==null)if(document.querySelector('.is-clicked').querySelectorAll('iframe')!==null){var a=document.querySelector('.is-clicked').querySelectorAll('iframe');Array.prototype.slice.call(a).forEach(function(a){let b=a.src;a.src=b})}},settle:function(a){if(document.querySelector('.is-selected').classList.contains('is-expanded')&&document.getElementById('kalenderjaarenmaand').style.opacity==0&&(document.getElementById('kalenderjaarenmaand').setAttribute("style","opacity:1"),document.getElementById('kalenderweek').setAttribute("style","opacity:1")),document.getElementById('home-header').clientWidth>=620)if(document.querySelector('.is-clicked')!==null){let a=document.querySelector('.is-clicked').getAttribute('data-bg-image');a==''&&(a=defaultbg),document.getElementById('main-carousel-bg').style.backgroundImage!==a&&(document.getElementById('main-carousel-bg').style.backgroundImage='url("'+a+'")'),document.getElementById('home-header').clientWidth>=768&&createMediaCarousel(document.querySelector('.is-clicked').getAttribute('data-id'))}},scroll:function(a){}}}),Array.prototype.slice.call(document.querySelectorAll(".carousel-cell")).forEach(function(a,b){a.addEventListener("click",function(d){if(document.getElementById('home-header').classList.contains('alternate'))if(!a.classList.contains('is-clicked')){if(document.querySelector('.is-clicked')!==null&&document.querySelector('.is-clicked').querySelectorAll('iframe')!==null){var c=document.querySelector('.is-clicked').querySelectorAll('iframe');Array.prototype.slice.call(c).forEach(function(a){let b=a.src;a.src=b})}document.getElementById('kalenderjaarenmaand').setAttribute("style","transition:none;"),document.getElementById('kalenderweek').setAttribute("style","transition:none;"),document.getElementById('kalenderjaarenmaand').setAttribute("style","opacity:0"),document.getElementById('kalenderweek').setAttribute("style","opacity:0"),document.querySelector(".is-expanded")!==null&&document.querySelector(".is-expanded").classList.remove('is-expanded'),document.querySelector(".is-clicked")!==null&&(document.querySelector(".is-clicked").querySelector(".back").setAttribute("style","opacity:0;transition: opacity 0s;"),document.querySelector(".is-clicked").classList.remove('is-clicked')),a.classList.add('is-clicked'),a.parentElement.classList.add('is-expanded'),flkty.reposition();let d=a.getAttribute('data-year'),e=a.getAttribute('data-month'),f=a.getAttribute('data-week');document.getElementById('kalenderjaarenmaand').innerHTML='<span class="year">'+d+'</span><span class="month">'+e+'</span>',document.getElementById('kalenderweek').innerHTML='week '+f+'',setTimeout(function(){flkty.select(Math.floor(b/3))},100),a.querySelector('.foto').setAttribute("style","background-image: url('"+a.querySelector('.foto').getAttribute('data-foto')+"')"),setTimeout(function(){a.querySelector(".back").setAttribute("style","opacity:1")},300),setTimeout(function(){document.getElementById('kalenderjaarenmaand').setAttribute("style","transition:all 0.5s!important;"),document.getElementById('kalenderweek').setAttribute("style","transition: all 1s!important;"),document.getElementById('kalenderjaarenmaand').style.opacity=1,document.getElementById('kalenderweek').style.opacity=1},500)}})}),transformer=new FlickityTransformer(flkty,altTransValues)}function createMediaCarousel(b){let a=document.querySelectorAll('[data-id="'+b+'"]')[0],c=a.getElementsByClassName('media-carousel')[0];if(a.getAttribute('data-acf')&&!c){let b=a.getElementsByClassName('ten')[0].innerHTML;a.getElementsByClassName('ten')[0].innerHTML=b+'<div class="ui active centered inline loader" style="margin-top:100px;"></div>';let c=a.getAttribute('data-acf'),d='/wp-json/wp/v2/zaken/'+c+'/?_embed';fetch(d).then(function(a){if(!a.ok)throw new Error(a.status);return a.json()}).then(e=>{var f=0,c;let d='<div class="media-carousel">';for(c in e.acf)if(c.indexOf('afbeelding')>-1||c.indexOf('video')>-1)if(c.indexOf('afbeelding')>-1&&e.acf[c]&&c.indexOf('afbeelding_1')==-1)f++,d+='<div class="mslide img"><img src="'+e.acf[c].url+'"><div class="caption"><span class="desc">'+e.acf[c].description+'</span><span class="counter">'+f+'/{total}</span></div></div>';else if(c.indexOf('video')>-1&&e.acf[c]){f++;let a=e.acf[c].replace('watch?v=','embed/');a=a.replace('youtube.com','youtube-nocookie.com');let b=a.lastIndexOf('.');b===a.length-1&&(a=a.substr(0,b)),d+='<div class="mslide vid">',d+='<iframe width="100%" height="305px" src="'+a+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" class="videoplayer"></iframe>',d+='<div class="caption"><span class="desc">'+e.acf[c].description+'</span><span class="counter">'+f+'/{total}</span></div></div>'}d+='</div>',d=d.replace(/{total}/g,f),d=d.replace(/undefined/g,''),a.getElementsByClassName('ten')[0].innerHTML=b+d;let g=a.getElementsByClassName('ten')[0].querySelector('.media-carousel');initmediaSlider(g)},a=>{console.log(a)})}}