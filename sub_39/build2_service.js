define("js2/InfinitySlider",["js2/Observable"],(function(e){"use strict";const t=window,i=t.document,n="InfinitySlider",s=["touchstart","mousedown"],r=["mousemove","mouseup"],o=["touchmove","touchend"],a="keydown",l="keyup",c="click",d={input:!0,select:!0,button:!0,textarea:!0},h=t.requestAnimationFrame,u=(t.cancelAnimationFrame,Array.prototype.slice),f=Math.min,p=Math.max,g=Math.abs,m=Math.floor,v=Math.round,y=Math.ceil,w=Math.sqrt,$=Math.pow,b=t.TouchEvent||function(){},k=t.MouseEvent||function(){},_="width",C="height";function j(e,B){const P=this;if(!(this instanceof j))return new j(e,B);const T=Object.assign({},j.defaults,B);this.initObservable(),e=e instanceof Element?e:i.querySelector(e),P.frame=e;const q=z(T.dragSource,e),M=z(T.slidee,e.firstChild);P.slidee=M;const O=T.prev,V=T.next,R=z(T.progress),F=R?z(T.progressBar,R.firstChild):null;let N=null,G=null,Y=0;const H=z(T.paging),X={active:null,start:0,highlited:null},K=H&&H.dataset.pagingLimit||5,W=[];let Z,J,U,Q=null,ee=null,te=0,ie=0,ne=0;const se=P.pos={start:0,end:0,cur:0,dest:0},re={start:0,end:100,cur:0,dest:0,size:0},oe=P.orig=[],ae=P.rendered=[],le={},ce=P.dragging={released:!0},de=P.keyboard={};let he=null,ue=null,fe=null;function pe(n){ie=T.horizontal?x(e):L(e),ne=0;const s=n?M.querySelectorAll(":scope > "+T.itemSelector):oe.slice();oe.length=0,ae.length=0;for(let e of s){let t;e instanceof Element?t={}:(t=e,e=t.el),t.el=e,t.size=ie,t.start=ne,t.center=t.start+t.size/2,t.end=t.start+t.size,t.visible=!1,t.index=oe.length,oe.push(t);const i=Object.assign({},t);i.orig=t,A(i.el,"item",i),ae.push(i),ne=t.end}ae.left=0,ae.right=ne,se.start=0,se.end=p(0,ne-ie),M.style[T.horizontal?_:C]=ne+"px",function(){if(!R)return;if(oe.length<2)return void(R.style.display="none");re.size=p(5,100/oe.length),F.style.width=re.size+"%",R.style.overflow="hidden",R.style.display="block",G=x(R),re.end=100-re.size}(),function(){if(!H||oe.length<2)return;for(let e=0;e<f(K,oe.length);++e)W[e]=i.createElement("div"),W[e].classList.add("slider-dot"),H.append(W[e]);if(oe.length<=K)return;Z=i.createElement("div"),Z.classList.add("slider-dot"),E(Z,0),H.prepend(Z),J=i.createElement("div"),J.classList.add("slider-dot"),E(J,0),H.append(J),U=function(e){const i=t.getComputedStyle(e,null);return e.offsetWidth+parseInt(i.getPropertyValue("margin-left"))+parseInt(i.getPropertyValue("margin-right"))}(Z)}(),n&&null!==T.startAt?me(T.startAt*ie,!0):(Se(),ge(),Ce())}function ge(t){if(t=t||!1){const t=ie;if(ie=T.horizontal?x(e):L(e),R&&(G=x(R)),t!==ie){ne=0;for(let e,t,i=0,n=oe.length;i<n;++i)t=oe[i],e=oe[i-1],t.size=ie,t.start=e?e.end:0,t.center=t.start+t.size/2,t.end=t.start+t.size,ne=t.end}}ae.length=0,ae.right=ae.left=ae.left||0;const i=M.querySelectorAll(":scope > "+T.itemSelector);for(let e of i){let t=A(e,"item");t.el=e,t.size=t.orig.size,t.start=ae.right,t.center=t.start+t.size/2,t.end=t.start+t.size,e.style.display="block",e.style.width=t.size+"px",ae.right+=t.size,ae.push(t)}M.style[T.horizontal?_:C]=ae.right-ae.left+"px"}function me(e,t){ce.released&&(e=_e(e,!0)),le.start=+new Date,le.time=0,le.from=se.cur,le.to=oe.length<2?le.from:e,le.delta=le.to-le.from,le.tweesing=ce.tweese,le.immediate=!le.tweesing&&(t||ce.active||!T.speed),ce.tweese=!1,se.dest=le.to,he||De()}function ve(){me(_e(se.cur,!0)-oe[ke(te-1)].size)}function ye(){me(_e(se.cur,!0)+oe[ke(te)].size)}function we(e){if(!R)return;if(!1!==e&&D(Y++))return;const t=(re.end-re.start)/100*G,i=re.size/100*G,n=oe[ke(te)].start;if(re.cur=(ce.active?be(se.dest+n):be(se.cur+n))/se.end,re.cur>1){N||(N=F.cloneNode(!0),N.style.position="absolute",N.style.left="0px",N.style.top="0px",R.append(N));const e=i*(re.cur-1)*(oe.length-1);I(F,t+e,!0),I(N,-i+e,!0)}else N&&(N.remove(),N=null),I(F,t*re.cur,!0)}function $e(e){if(!H||oe.length<2)return;if(!1!==e&&D(Y++))return;const t=se.cur>0?m(se.cur/ie):y(se.cur/ie);let i=se.cur/ie-t;const n=ke(te+t);X.active<n&&X.start+K-2<=n&&(X.start=f(n-K+2,p(oe.length-K,0))),X.active>n&&X.start>=n&&(X.start=p(n-1,0));const s=ke(n+v(i))-X.start;if(X.active=n,X.highlited!==s&&(W[X.highlited]&&W[X.highlited].classList.remove("active"),W[s]&&W[s].classList.add("active"),X.highlited=s),oe.length<=K)return;const r=ke(n+(i>0?1:i<0?-1:0));(r-X.start<K-1&&r-X.start>0||0===r||r===oe.length-1)&&(i=0),E(Z,i>=0?0:-i),E(W[0],i>=0?1-i:1),E(W[4],i>=0?1:1+i),E(J,i>=0?i:0),I(H,i*-U,!0)}function be(e){return(e%ne+ne)%ne}function ke(e){const t=oe.length;return(e%t+t)%t}function _e(e,t){const i=be(e+=ie/2);let n=0;for(let e=0,t=oe.length;e<t;++e){const t=oe[ke(te+e)];if(!(n+t.size<=i))break;n+=t.size}return n+(t?m(e/ne)*ne:0)}function Ce(){const e=se.cur,t=e+ie/2,i=e+ie;let n,s=0;for(let r of ae)s+=r.size,r.end>e&&r.start<i?(r.visible||(r.visible=!0,P.trigger("visiblein",r.el,r.orig,je(r))),n||s>t&&(n=r)):r.visible&&(r.visible=!1,P.trigger("visibleout",r.el,r.orig,je(r)));Q!==n&&(Q&&(Q.el.classList.remove(T.activeClass),Q=null),n&&(Q=n,ee=je(Q),Q.el.classList.add(T.activeClass),P.trigger("active",Q.el,Q.orig,ee)))}function je(e){return(e.orig||e).index}function Se(){const e=se.cur,t=e+ie;for(let i of ae)i.end<=e&&i.el.remove()&&P.trigger("domremove",i.el,i.orig,je(i)),i.start>=t&&i.el.remove()&&P.trigger("domremove",i.el,i.orig,je(i));const i=be(oe[te].start+e);for(let e=oe.length;e--;){if(oe[e].start<=i){te=e;break}}return te=ke(te),ae.left=0,M.style.marginLeft=ae.left+"px",se.cur=se.dest=0,I(M,-se.dest,T.horizontal),!0}function xe(e,t){const n=i.createDocumentFragment();for(let i=e;i<t;++i){const e=ke(i),t=oe[e],s=t.el.cloneNode(!0);A(s,"item",Object.assign({},t,{orig:t})),P.trigger("dominsert",s,t,je(t)),n.append(s)}return n}function Le(){if(se.cur>=ae.left&&se.cur+ie<=ae.right)return;let e;e=se.cur<ae.left?function(){const e=m(se.cur/ie),t=v(ae.left/ie);if(e<t)return ae.left=e*ie,M.style.marginLeft=ae.left+"px",M.prepend(xe(te+e,te+t)),!0;return!1}():function(){const e=v(ae.right/ie),t=y(se.cur/ie)+1;if(e<t)return M.append(xe(te+e,te+t)),!0;return!1}(),e&&ge()}function De(){P.initialized&&(he||(ce.released&&P.trigger("movestart","move"),le.immediate)?(ce.released||function(){const e=ce.history;null!==e&&(e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=ce.delta)}(),le.immediate?se.cur=le.to:le.tweesing?(le.tweeseDelta=le.to-se.cur,g(le.tweeseDelta)<1?se.cur=le.to:se.cur+=le.tweeseDelta*(ce.released?T.swingSpeed:T.syncSpeed)):(le.time=f(+new Date-le.start,T.speed),se.cur=le.from+le.delta*T.easing(le.time/T.speed)),le.to===se.cur?(se.cur=le.to,ce.tweese=!1,he=0):he=h(De),I(M,-se.cur,T.horizontal),P.trigger("move"),Le(),Ce(),we(),$e(),!he&&ce.released&&(P.trigger("moveend","move"),P.trigger("change"),de.init||(Se()&&ge(),we(!1),$e(!1)))):he=h(De))}function Ie(e){switch(e.preventDefault(),this){case O:P.trigger("movestart","button"),ve();break;case V:P.trigger("movestart","button"),ye()}}function Ee(e){const t=e instanceof b;if(!(ce.init||!t&&qe(e.target))&&(!t||T.touchDragging)&&(t||T.mouseDragging&&0===e.button)){ce.released=!1,ce.init=!0,ce.active=!1,ce.target=e.target,ce.touch=t,ce.pointer=t?e.touches[0]:e,ce.initX=ce.pointer.pageX,ce.initY=ce.pointer.pageY,ce.initPos=se.cur,ce.start=+new Date,ce.time=0,ce.path=0,ce.delta=0,ce.locked=0,ce.history=[0,0,0,0],ce.pathToLock=t?30:10;for(let e of t?o:r)i.addEventListener(e,ze,{passive:!0});ze(e)}}function ze(e){if((ce.touch?e instanceof b:e instanceof k)&&(ce.released="mouseup"===e.type||"touchend"===e.type,ce.pointer=ce.touch?e[ce.released?"changedTouches":"touches"][0]:e,ce.pathX=ce.pointer.pageX-ce.initX,ce.pathY=ce.pointer.pageY-ce.initY,ce.path=w($(ce.pathX,2)+$(ce.pathY,2)),ce.delta=T.horizontal?ce.pathX:ce.pathY,ce.released||!(ce.path<1))){if(!ce.active){if(ce.path<T.dragThreshold)return void(ce.released&&Ae());if(!(T.horizontal?g(ce.pathX)>g(ce.pathY):g(ce.pathX)<g(ce.pathY)))return void Ae();M.classList.add(T.draggedClass),P.trigger("movestart","drag"),ce.active=!0}!ce.locked&&ce.path>ce.pathToLock&&(ce.locked=!0,ce.target.addEventListener(c,S,{once:!0})),ce.released&&(Ae(),T.releaseSwing&&(ce.swing=(ce.delta-ce.history[0])/40*100,ce.delta+=ce.swing,ce.tweese=g(ce.swing)>10)),me(ce.initPos-ce.delta)}}function Ae(){ce.released=!0;for(let e of ce.touch?o:r)i.removeEventListener(e,ze);setTimeout((function(){ce.target.removeEventListener(c,S)})),se.cur===se.dest&&ce.active&&(M.classList.remove(T.draggedClass),P.trigger("moveend","drag")),ce.init=!1,ce.active=!1}function Be(){i.addEventListener(l,Te),ue=throttle(ve,T.speed+(T.keyboardRepeatDelay||0)),fe=throttle(ye,T.speed+(T.keyboardRepeatDelay||0)),de.init=!0,P.trigger("movestart","keyboard")}function Pe(e){if(T.keyboardNav&&!qe(e.target)&&!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){switch(e.key){case T.horizontal?"Left":"Up":case T.horizontal?"ArrowLeft":"ArrowUp":de.init||Be(),ue();break;case T.horizontal?"Right":"Down":case T.horizontal?"ArrowRight":"ArrowDown":de.init||Be(),fe();break;default:return}e.preventDefault()}}function Te(){i.removeEventListener(l,Te),ue=fe=null,se.cur===se.dest&&de.init&&(he||Se()&&ge(),P.trigger("moveend","keyboard")),de.init=!1}function qe(e){return d.hasOwnProperty(e.tagName.toLowerCase())||e.matches(T.interactive)}function Me(e,t){return function(){P.trigger(e,"external"),t.apply(this,u.call(arguments))}}P.initialized=!1,P.options=T,P.init=function(){if(P.initialized)return P;if(j.getInstance(e))throw new Error("There is already a "+n+" instance on this element");j.storeInstance(e,P),e.style.overflow="hidden",M.style.willChange="transform",M.style.transform="translateZ(0)";for(let e of s)q.addEventListener(e,Ee,{passive:!0});return i.addEventListener(a,Pe),T.prev&&O.addEventListener(c,Ie),T.next&&V.addEventListener(c,Ie),P.initialized=!0,pe(!0),P},P.destroy=function(){return j.removeInstance(e),i.removeEventListener(a,Pe),i.removeEventListener(l,Te),O.removeEventListener(c,Ie),V.removeEventListener(c,Ie),O.classList.remove(T.disabledClass),V.classList.remove(T.disabledClass),oe.length=0,ae.length=0,P.initialized=0,P},P.load=pe,P.reload=ge,P.getIndex=je,P.getByIndex=function(e){return oe[ke(e)]},P.getActive=function(){return null==Q?null:Q},P.getActiveIndex=function(){return null==ee?null:ee},P.activate=Me("movestart",(function(e,t){const i=be(se.cur+oe[ke(te)].start),n=oe[ke(e)].start;let s=n-i,r=n-i;s>0&&(s-=ne),r<0&&(r+=ne),me(t=null==t?g(s)<r?s:r:t<0?s:r)})),P.prev=Me("movestart",ve),P.next=Me("movestart",ye)}function S(e){e.preventDefault(),e.stopPropagation()}function x(e){let t=e.getBoundingClientRect();return t.width||t.right-t.left}function L(e){let t=e.getBoundingClientRect();return t.height||t.bottom-t.top}function D(e){return 1==e%2}function I(e,t,i){e.style.transform="translateZ(0) "+(i?"translateX":"translateY")+"("+t+"px)"}function E(e,t){e.style.transform="scale("+t+")"}function z(e,t=null){return e?e instanceof Element?e:i.querySelector(e):t}function A(e,t,i){if(e.hasOwnProperty(n)||(e[n]={}),void 0===i)return e[n][t];null!==i?e[n][t]=i:delete e[n][t]}return j.getInstance=function(e){return e[n]},j.storeInstance=function(e,t){return e[n]=t},j.removeInstance=function(e){return delete e[n],e},Object.assign(j.prototype,e.prototype),j.defaults={slidee:null,horizontal:!1,itemSelector:"*",dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,dragThreshold:3,interactive:null,syncSpeed:.5,speed:300,easing:function(e){return e<.5?4*e*e*e:1-$(-2*e+2,3)/2},startAt:0,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled",prev:null,next:null,keyboardNav:!0,keyboardRepeatDelay:500},t[n]=j,j})),define("js2/ServiceGallery2",["jquery","js2/InfinitySlider","js2/ZATimer"],(function(e,t,i){return function(n,s){var r=this,o={};if(r.node=n=e(n),n.length){if(n.data("ServiceGallery"))return n.data("ServiceGallery");n.data("ServiceGallery",this),s=s||{};var a=e(".gallery-container",n),l=e(".gallery-controls",n),c=e(".js-gallery-paging-counter-wrapper",n),d=e(".js-gallery-paging-counter",n),h=l.find("ul > li > a").map((function(){var t=e(this).data();return{src:t.original,copyright:t.copyright,id:t.original.split("/original_")[1]}})),u=!1;h.length<=1&&l.hide();var f=new t(a[0],{slidee:a.find("> ul")[0],horizontal:!0,mouseDragging:!0,touchDragging:!0,releaseSwing:!0,keyboardNav:!!s.hotkeys,prev:e(".prev",l)[0],next:e(".next",l)[0],paging:e(".js-paging",n)[0]||!1,activeClass:"active",startAt:0});s.modalGalleryView&&f.frame.addEventListener("click",(function(e){zrequire(["build/shared/js/modal"],(function(e){const t=e.create("gallery");t.setData("pictures",JSON.stringify(h.toArray())),t.setData("initialPictureId",f.getActive().index),t.open()}))}));var p=null!==document.querySelector("#js-ymap-balloon");f.on("visiblein",(function(t){var n=e(t),s=e(".js-org-photo"),r=v(t.dataset.original).cloneNode(!1);m(r,t.dataset.ratio),n.find("> img").eq(0).replaceWith(r).length||n.append(r),n.data("img",r),r.addEventListener("dragstart",(function(e){e.preventDefault()})),i.track(s,{ev_action:"display",ev_sourceType:"org_photo"},{interval:i.DISPLAY_INTERVAL,visible_percent:i.VISIBLE_PERCENT})})),f.on("movestart",(function e(t){function i(e){v(f.getByIndex(e).el.dataset.original)}"move"!==t&&(f.off("movestart",e),f.on("active",(function(e,t,n){for(var s=-1;s<=2;++s)0!==s&&setTimeout(i.bind(void 0,n+s))})))})),f.on("change",(function(e){c&&(d.text(`${f.getActive().index+1}/${f.orig.length}`),c.addClass("gallery-paging-counter--shown"))}));var g=debounce((function(){f.reload(!0),Array.prototype.forEach.call(f.rendered,(function(t){m(e(t.el).data("img"),t.el.dataset.ratio)}))}),100);e(window).on("resize",g),n.on("z-resize",g),f.init(),e(".gallery-show-layer",n).on("click","li",w),e(".gallery-zoom-container, .gallery-layer-container",n).on("click",w),f.on("active",(function(){var t=e(this.frame).closest(".service-gallery-box__offer");t.length&&!u?(u=!0,window.za({ev_action:"slide",ev_category:"photo",object_type:"offer",object_id:t.data("offer-id")})):t.length||e(window).trigger("track-event",s.stat||["service","photo"])})),r.update=function(){},r.setImage=function(e){f.activate(e)},r.openLayer=y}function m(e,t){if(e&&(t=+t))if(p)e.style.width="100%";else{var i={top:"0px",left:"0px",width:"auto",height:"auto"},r=n.width(),o=n.height();t<r/o?(i.top=(o-r/t)/2+"px",i.width=r+"px"):(i.left=(r-o*t)/2+"px",i.height=o+"px"),e.style.top=i.top,e.style.left=i.left,e.style.width=i.width,e.style.height=i.height,s.rightGalleryWidth&&(e.style.width=parseFloat(i.width)-s.rightGalleryWidth+"px")}}function v(e){var t=o[e];return t||((t=new Image).src=e,o[e]=t),t}function y(t,i,n,s){if(t){var r,o=t.split("/original_")[1];e.each(h,(function(e,t){t.id==o&&(r=e)}))}var a=h.length;create_layer("photoview",{offset:0,images:h,current:r||f.getActiveIndex(),source:i,owner_type:"org",orgId:n,promoSlides:s,beforeShow:function(){l.hide()},beforeClose:function(){f.orig.length>1&&l.show(),h.length-a&&(h.length-a==1?h.splice(-1,1):h.length-a==2&&(h.splice(-1,1),h.splice(1,1)))}})}function w(t,i){var n=e(i).data("original")||e(i).find(".right-gallery-list-item").data("original");t&&e(t.target).closest(".copyright").length||(t.preventDefault(),y(n,e(this).closest(".gallery-container").data("type"),e(this).closest(".gallery-container").data("org-id"),e(this).closest(".gallery-container").data("promo-slides")))}}})),define("js2/Hint",["jquery"],(function(e){return function(t,i){var n;i=i||{},n=e(".tooltip-darken").length?e(".tooltip-darken"):e('<div class="tooltip-darken"><span class="s-icons-closecross"></span><div class="tooltip-container"></div></div>');var s=e.extend({url:"/js.php",data:{}},i),r=e(t).attr("data-text");function o(i){var s=n.find(".s-icons-closecross"),r=e(t).closest(".tooltip-target");n.css("opacity",0),n.css("margin-top",0),n.find(".tooltip-container").html(i),r.append(n),n.show();var o=n.closest(".overview");if(o.length){var a=o.height()-n.prev().offset().top-n.prev().outerHeight(!0)+o.offset().top;n.outerHeight(!0)>a&&(r.prepend(n),n.css("margin-top",-n.outerHeight()-n.prev().outerHeight(!0)+"px"))}n.css("opacity",1),e(document).off("click.hint-tooltip").on("click.hint-tooltip",(function(i){var r=e(i.target);r.closest(n).length&&!r.closest(s).length||r.closest(t).length||(i.preventDefault(),n.hide(),e(document).off("click.hint-tooltip"))}))}r.length?o(r):e.get(s.url,s.data,(function(i){e(t).attr("data-text",i),o(i)}))}})),define("js2/scrollToBlock",["jquery","js2/env"],(function(e,t){return function(i,n){window.history&&"auto"===window.history.scrollRestoration&&(window.history.scrollRestoration="manual"),"string"==typeof i&&(i=document.getElementById(i));var s,r,o=e(i);return!!o.length&&(e.when((s=e("html, body"),r=o.offset().top-(window.topOffset||0),t.is_mobile?s.scrollTop(r):s.animate({scrollTop:r},300))).done((function(){"function"==typeof n&&n.call(this)})),!0)}})),define("js2/TrackTextReading",["jquery"],(function(e){var t=0;return function(i,n){var s="read_track"+ ++t,r=!1,o={x:0,y:0},a={x:0,y:0},l=0,c=0,d=0,h=0,u=Object.assign({track_mouse_interval:1e3,time_before_start:200,total_checks:5,needed_mouse_moves:3},n);function f(){r=!1,l=0,c=0,a.x=0,a.y=0,o.x=0,o.y=0}function p(){clearTimeout(d),clearInterval(h)}function g(e){a.x=e.pageX,a.y=e.pageY,r=!0,h=setInterval(m,u.track_mouse_interval)}function m(){if(c==u.total_checks)return l>=u.needed_mouse_moves&&(t="mouse",e(window).trigger("track-event",[i.data("track-text-category"),i.data("track-text-action"),t])),f(),i.off("mouseenter."+s).off("mouseleave."+s).off("mousemove."+s),p(),!1;var t;!r||o.x==a.x&&o.y==a.y||(l++,a.x=o.x,a.y=o.y),c++}this.node=i=e(i),i.length&&i.on("mouseenter."+s,(function(e){r||(d=setTimeout(g,u.time_before_start,e))})).on("mouseleave."+s,(function(){p(),f()})).on("mousemove."+s,(function(e){r&&(o.x=e.pageX,o.y=e.pageY)}))}})),define("js2/ServicePageController",["./ServiceGallery2","./Hint","js2/Toggler","js2/env","jquery","./scrollToBlock","./TrackTextReading","js2/ZATimer","js2/jquery.balloon","js2/Faq"],(function(e,t,i,n,s,r,o,a,l,c){return function(i,d,h){var u=this,f=(h=h||{}).is_mobile||!1,p=h.is_premium||!1,g=h.isBookingModal||!1,m=h.modalGalleryView||!1;new c,function(){var e=s(".js-verify-icon",d);if(e.length){var t=l.create("verify",{target:e,offset:4});f||e.on("mouseenter",(function(e){t.show()})).on("mouseleave",(function(){t.close()}))}}();var v=s("#phoneInformer",d),y=s(".service-good-default",v),w=s(".service-good-case",v),$=s(".service-good-done",v),b=s(".js-phone-action",v),k=s(".js-phone-case",v);b.on("click",(function(e){e.preventDefault(),y.hide(),w.show(),window.dispatchEvent(new Event("height"))})),k.on("click",(function(e){e.preventDefault(),w.hide(),$.show(),window.dispatchEvent(new Event("height")),s.post("/js.php",{area:"misc",action:"feedback",url:window.location.href,organizationId:v.data("id")||"",type:"complaint.phone",data:{type:s(this).data("type")}},(function(e){window.dispatchEvent(new Event("height"))}))})),s(".s-icons-question",d).on("click",(function(e){e.preventDefault();t(this)}));var _,C=document.querySelector(".gallery-item-wrapper"),j=C?C.offsetWidth:0,S=new e(s(".service-gallery-box",d).first(),{hotkeys:p,rightGalleryWidth:j,modalGalleryView:m});_=s("#menu",d),u.searchDish=function(e){return t={area:"menu",action:"search",owner_type:"organization",owner_id:h.service_id,item_id:e},i=_.find(".js-loader"),n=s.Deferred(),i.removeClass("hidden"),s.post("/js.php",t).always((function(){i.addClass("hidden")})).done((function(e){var t=_.find(".js-menu-list");t.html(e),n.resolve(t.find("> .js-menu-list-component"))})).fail((function(){n.reject()})),n;var t,i,n},u.scroll2Dish=function(e,t){var i=s.Deferred(),n=t.find("[data-id="+e+"]");return n.length?r(n,(function(){i.resolve(n,t)})):setTimeout((function(){i.reject()})),i},function(){var e=s("#serviceNavPanel");if(f&&!e.length)return window.topOffset=s("#header").outerHeight();e.addClass("get-out").show();var t=h.headerHeight||e.outerHeight();e.removeClass("get-out").css("display",""),window.topOffset=t}(),!f&&p&&function(){if(!S.node.length)return;function e(){f||S.update()}s(window).on("resize.premium",{passive:!0},e),e()}(),a.track(".js-toggle-content[data-za]",{ev_action:"write_comment_display"},{interval:a.DISPLAY_INTERVAL,visible_percent:a.VISIBLE_PERCENT}),s(".js-toggle-content",d).on("click",(function(e){e.preventDefault(),a.trigger(".js-toggle-content[data-za]",{ev_action:"write_comment_display"},{send_once:!0}),a.trigger(".js-toggle-content[data-za]",{ev_action:"write_comment_click"},{send_once:!0}),r(s(this).data("id"))})),function(){var e,t=window.location.href,i=window.location.hash;if(t.indexOf("/reviews/")>=0&&i.indexOf("#comment")<0?r("reviews"):t.indexOf("/social/")>=0?r("socialNetwork"):(t.indexOf("/menu/")>=0||t.indexOf("/price/")>=0)&&-1===i.indexOf("#price-")?r("menu"):t.indexOf("/specialist/")>=0?r("specialists"):t.indexOf("/schedule/")>=0?r("schedule"):-1!==i.indexOf("#booking")&&function(){if(g)window.dispatchEvent(new Event("booking-prof-modal.open"))}(),i.indexOf("#comment")>=0?r(i.replace("#","")):i.indexOf("#reviews")>=0?r("reviews"):i.indexOf("#send_review")>=0&&(r("reviews"),s("#reviews .js-comment-add").eq(0).trigger("click")),e=i.match(/#price-([a-f\d]{24})/)){var n=function(){create_layer("priceitem",{parameters:{owner_type:"organization",owner_id:h.service_id,item_id:e[1]},scrollByClick:!0})};s.when(e[1],u.searchDish(e[1]),function(){var e=s.Deferred();return!1===r("menu",e.resolve.bind(e))&&e.resolve(),e}()).then((function(e,t){return u.scroll2Dish(e,t)})).then((function(e,t){e.closest(".js-pricelist-item").addClass("active"),n()})).fail((function(){n()}))}}(),n.is_phone&&s(".js-stat-reviews").on("click",(function(e){e.preventDefault(),r("reviews")})),window.location.hash.indexOf("#photoview")>=0&&(S.openLayer(),window.history&&history.replaceState&&history.replaceState(null,null,window.location.pathname));var x=s(".js-desc",d);s(".show_more",d).bind("click",(function(){s(".js-desc-more",d).show(),s(".js-desc-control",d).remove(),s(window).trigger("track-event",["service","hidden_description","open"])})),s(".js-desc-control",d).length>0&&setTimeout((function(){s(window).trigger("track-event-nonint",["service","hidden_description","pageview"])}),0),o(x,{})}})),function(e){"function"==typeof define&&define.amd?define("js2/jquery.maskedinput",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}((function(e){var t,i=navigator.userAgent,n=/iphone/i.test(i),s=/chrome/i.test(i),r=/android/i.test(i);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(i,o){var a,l,c,d,h,u,f;if(!i&&this.length>0){var p=e(this[0]).data(e.mask.dataName);return p?p():void 0}return o=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},o),a=e.mask.definitions,l=[],c=u=i.length,d=null,e.each(i.split(""),(function(e,t){"?"==t?(u--,c=e):a[t]?(l.push(new RegExp(a[t])),null===d&&(d=l.length-1),c>e&&(h=l.length-1)):l.push(null)})),this.trigger("unmask").each((function(){function p(){if(o.completed){for(var e=d;h>=e;e++)if(l[e]&&_[e]===g(e))return;o.completed.call(k)}}function g(e){return o.placeholder.charAt(e<o.placeholder.length?e:0)}function m(e){for(;++e<u&&!l[e];);return e}function v(e,t){var i,n;if(!(0>e)){for(i=e,n=m(t);u>i;i++)if(l[i]){if(!(u>n&&l[i].test(_[n])))break;_[i]=_[n],_[n]=g(n),n=m(n)}$(),k.caret(Math.max(d,e))}}function y(){b(),k.val()!=j&&k.change()}function w(e,t){var i;for(i=e;t>i&&u>i;i++)l[i]&&(_[i]=g(i))}function $(){k.val(_.join(""))}function b(e){var t,i,n,s=k.val(),r=-1;for(t=0,n=0;u>t;t++)if(l[t]){for(_[t]=g(t);n++<s.length;)if(i=s.charAt(n-1),l[t].test(i)){_[t]=i,r=t;break}if(n>s.length){w(t+1,u);break}}else _[t]===s.charAt(n)&&n++,c>t&&(r=t);return e?$():c>r+1?o.autoclear||_.join("")===C?(k.val()&&k.val(""),w(0,u)):$():($(),k.val(k.val().substring(0,r+1))),c?t:d}var k=e(this),_=e.map(i.split(""),(function(e,t){return"?"!=e?a[e]?g(t):e:void 0})),C=_.join(""),j=k.val();k.data(e.mask.dataName,(function(){return e.map(_,(function(e,t){return l[t]&&e!=g(t)?e:null})).join("")})),k.one("unmask",(function(){k.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;k.prop("readonly")||(clearTimeout(t),j=k.val(),e=b(),t=setTimeout((function(){k.get(0)===document.activeElement&&($(),e==i.replace("?","").length?k.caret(0,e):k.caret(e))}),10))})).on("blur.mask",y).on("keydown.mask",(function(e){if(!k.prop("readonly")){var t,i,s,r=e.which||e.keyCode;f=k.val(),8===r||46===r||n&&127===r?(i=(t=k.caret()).begin,(s=t.end)-i==0&&(i=46!==r?function(e){for(;--e>=0&&!l[e];);return e}(i):s=m(i-1),s=46===r?m(s):s),w(i,s),v(i,s-1),e.preventDefault()):13===r?y.call(this,e):27===r&&(k.val(j),k.caret(0,b()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!k.prop("readonly")){var i,n,s,o=t.which||t.keyCode,a=k.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>o)&&o&&13!==o){if(a.end-a.begin!=0&&(w(a.begin,a.end),v(a.begin,a.end-1)),i=m(a.begin-1),u>i&&(n=String.fromCharCode(o),l[i].test(n))){if(function(e){var t,i,n,s;for(t=e,i=g(e);u>t;t++)if(l[t]){if(n=m(t),s=_[t],_[t]=i,!(u>n&&l[n].test(s)))break;i=s}}(i),_[i]=n,$(),s=m(i),r){setTimeout((function(){e.proxy(e.fn.caret,k,s)()}),0)}else k.caret(s);a.begin<=h&&p()}t.preventDefault()}}})).on("input.mask paste.mask",(function(){k.prop("readonly")||setTimeout((function(){var e=b(!0);k.caret(e),p()}),0)})),s&&r&&k.off("input.mask").on("input.mask",(function(){var e=k.val(),t=k.caret();if(f&&f.length&&f.length>e.length){for(b(!0);t.begin>0&&!l[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<d&&!l[t.begin];)t.begin++;k.caret(t.begin,t.begin)}else{for(b(!0);t.begin<u&&!l[t.begin];)t.begin++;k.caret(t.begin,t.begin)}p()})),b()}))}})})),define("js2/getLink",["jquery","js2/jquery.maskedinput"],(function(e,t){return function(t,i){i=i||{};var n=e(t),s=e(".js-icon",n),r=e(".balloon-simple",n),o=e("form",r),a=e(".done-content",r),l=e(".send-getLink",r),c=/^.+\@.+\..+$/i;s.on("click",(function(t){t.preventDefault();var i=e(this),n=i.closest(".getLink-ico");i.hasClass("active")?e(document).trigger("click.getLink"):(s.removeClass("active"),i.addClass("active"),r.hide(),n.find(r).show().find(o).show(),n.find(a).hide(),e("input[type=text]",o).focus(),e(document).on("click.getLink",(function(t){var i=e(t.target);(!i.closest(s).length&&!i.closest(r).length||i.closest(".balloon-close").length)&&(t.preventDefault(),s.removeClass("active"),r.hide(),e(document).off("click.getLink"))})))})),o.on("submit",(function(t){t.preventDefault();var n=e(this),s=e("input.text",n),r=s.data("type"),l=s.val();if(l.length&&("email"!=r||c.test(l))){var d=e.extend({area:"misc",action:"getLink",type:r,value:l},i.data);e.post("/js.php",d,(function(t){e(window).trigger("track-event",["send_link","email"==d.type?"email":"sms"]),t.success&&(o.hide(),a.show(),s.val(""))}))}})),l.on("click",(function(e){e.preventDefault(),o.toggle(),a.toggle()})),e(".text-mobile",n).mask("+7 (999) 999-9999")}})),define("js2/PhotosListController",["jquery"],(function(e){return function(t){window.lazyload(t[0]);var i=t.find(".photo-list"),n=i.data("total"),s=[],r=i.data("stat"),o=i.find("li");i.find("li").each((function(){s.push({src:e(this).data("src"),small_url:e(this).find("img").data("original"),copyright:e(this).data("copyright")})}));var a="";o.length&&(a=o.first().attr("class"));var l,c=Array.prototype.push,d=function(){if(l)return l;var r=e.Deferred();return e.ajax({url:t.data("url"),data:{offset:s.length,limit:20},dataType:"json"}).done((function(o){var l,d,h,u,f=document.createDocumentFragment();o.photos&&c.apply(s,o.photos),r.resolve(o.photos||[]);for(var p=0;p<o.photos.length;p++)l=o.photos[p],h=e("<img />").addClass("js-lazyload-images").attr("src","/images/border.gif").attr("data-original",l.small_url),u=e("<div></div>").addClass("js-photo-wrapper").append(h),d=e("<li></li>").attr("data-src",l.src).attr("class",a).append(u),f.appendChild(d[0]);i.append(f),t.addClass("expanded"),window.lazyload(t[0]),window.dispatchEvent(new Event("height")),i.scroll(),parseInt(n)===s.length&&t.find(".more-button-wrapper").hide()})).fail((function(e){r.reject(e)})).always((function(){l=null})),l=r.promise()};i.on("click",".js-photo-wrapper",(function(t){t.preventDefault(),"undefined"!==r&&window.za(r),window.create_layer("photoview",{usecache:!1,offset:0,images:s,current:e(this).parent().index(),total:n,loadMore:function(){return d()}})})),t.find(".js-show-more-images").on("click",(function(){return d(),!1}))}})),define("js2/analytics/Offers",[],(function(){return{clickOnPreview:function(e,t){var i=document.querySelector(e);i&&i.addEventListener("click",(function(e){var i=e.target.closest(".js-slider-item");i&&window.za({ev_action:"open",ev_category:"offer",object_type:"offer",object_id:i.dataset.offerId,ev_sourceType:"org_offer",ev_sourceId:t})}))},blockVisible:function(e,t){var i=document.querySelector(e);i&&new IntersectionObserver((function(e,i){e[0].isIntersecting&&(window.za({ev_action:"display_short",ev_category:"offer",ev_sourceType:"org_offer",ev_sourceId:t}),i.unobserve(e[0].target))})).observe(i)},displayPreviewsAnalytics:function(e,t){var i=document.querySelector(e);i&&i.querySelectorAll(".js-slider-item").forEach((function(e){new IntersectionObserver((function(i,n){i[0].isIntersecting&&(window.za({ev_action:"display",ev_category:"offer",object_type:"offer",object_id:e.dataset.offerId,ev_sourceType:"org_offer",ev_sourceId:t}),n.unobserve(i[0].target))})).observe(e)}))}}})),define("js2/Pricelist",["jquery","js2/LinksMaker","js2/env"],(function(e,t,i){var n=function(t,i){this.model=Object.assign({},i),this.node=t,this.$node=e(this.node),this.url="/js.php",this.$searchBox=e(".input-search",this.$node),this.$search=e("input[type=text]",this.$searchBox),this.$clearSearch=e(".input-clear",this.$searchBox),this.$filter=e(".js-pricelist-category",this.$node),this.$filterAll=this.$filter.closest(".show-all-price-items"),this.$markerList=e(".js-mp-markerlist"),this.$markerListItem=e(".mp-markerlist-item",this.$markerList),this.$markerListCost=e(".js-markers-cost",this.$markerList),this.$list=e(".js-pricelist-list",this.$node),this.$loader=e(".js-loader",this.$node),this.$inprogress=e(".js-search-inprogress",this.$node),this.$sortingBox=e(".sorting",this.$node),this.$sortingInput=e(".js-sort-pricelist",this.$node),this.$priceFilter=e(".js-price-filter",this.$node),this.$allPrice=e(".js-all-price",this.$node),this.$searchMob=e(".js-mob-search",this.$node),this.$searchSection=e(".js-section-search",this.$node),this.$emptySearch=e(".js-empty-search",this.$node),this.$dishSortFilter=e(".js-dish-filter",this.$node),this.$dishSortSelect=e(".dish-sort_select",this.$dishSortFilter),this.$priceFilterMobile=e(".dish-sort-price-filter",this.$dishSortFilter),this.$menuAnchor=e(".js-filter-item-anchor",this.$node),this.$filterItem=e(".js-filter-item",this.$node),this.$subFilterItem=e(".filter-items-container__sub",this.$filterItem),this.$categoryShowAllBtn=e(".js-pricelist-category-showall",this.$node),this.$categoryShowLessBtn=e(".js-pricelist-category-showless",this.$node),this.isShowAllCategories=!1,this.$backToPriceBtn=e(".js-back-to-price",this.$node),this.$backToPrevPriceScreen=e(".js-back-to-prev-screen",this.$node),this.$menuInterestList=e(".menu-section-dishes__interest .js-pricelist-list",this.$node),this.mpEventSent=!1,this.catChosenStatSent=!1,this.showAllCatsStatSent=!1,this.filterByPriceStatSent=!1,this.interestBlockScrollStatSent=!1,this.$searchInputs=e(".input-search input",this.$node),this.$showMoreButton=this.$node.find(".button-show-more"),this.$pricelistBlocks=this.$node.find(".pricelist-group-block"),this.init()};return Object.assign(n.prototype,{init:function(){var t=this;t.$list.find(".pagination").each((function(){var i=e(this);t.model.pagination={total:i.data("total"),limit:i.data("limit"),current:i.data("current")}})),t.initHandlers(),t.prevModel=JSON.stringify(t.model),t.tmpModel=t.prevModel,t.curModel="",i.is_phone&&!t.model.visible&&t.$list.hide(),t.$loader.addClass("hidden"),t.$inprogress.addClass("hide"),t.resetVisibleCategories(),t.update(!0),e(window).on("markeritem",(function(e,i){t.$markerListItem.filter('[data-id="'+i+'"]').triggerHandler("click")}))},updateView:function(t,i,n,s,r,o){var a=this;a.$search.val()!==a.model.search&&a.$search.val(a.model.search),a.$clearSearch.toggle(!!a.model.search);var l="active",c=a.$markerListCost.find(".mp-markerlist-item-cost__max"),d=a.$markerListCost.find(".mp-markerlist-item-cost__min");if(c.length&&c.closest(".js-markers-cost").find(d).find(".mp-markerlist-item-cost__currency").addClass("hide"),r||(r="likes"),a.$filter.removeClass(l).addClass(""),!a.model.visible||a.model.search||null!==a.model.masterprice_ids&&a.model.masterprice_ids.length||a.$filter.filter((function(){if(e(this).data("category")===a.model.category&&(!e(this).data("subcategory")||e(this).data("subcategory")===a.model.subcategory))return!0})).removeClass("").addClass(l),s&&a.$filterAll.removeClass(l).addClass(""),a.curModel=JSON.stringify(a.model),a.tmpModel=a.curModel,i&&a.$list[0]!==i[0]&&(a.$list.hide().empty(),a.$list=i),!a.model.visible||a.model.search.length>0&&a.model.search.length<2)return a.$list.hide(),a.$loader.addClass("hidden"),a.$inprogress.addClass("hide"),a.$filterAll.addClass("hidden"),e(".search-inprogress-bar",a.$inprogress).animate({width:"100%"},1e3),a.$node.removeClass("expand"),void window.dispatchEvent(new Event("height"));e(".input-search-pic",a.$searchSection).add(".js-search-empty").add(".js-search-result").addClass("hide"),a.$loader.removeClass("hidden"),a.$inprogress.removeClass("hide"),a.$emptySearch.addClass("hide"),e(".search-inprogress-bar",a.$inprogress).css("width",0),a.$list.show(),t?a.updateViewDeb(n,r,o,s):a.updateViewReal(n,r,o,s)},updateViewDeb:debounce((function(){this.updateViewReal.apply(this,arguments)}),300),updateViewReal:function(t,i,n,s){var r=this;r.prevModel=r.tmpModel,r.clearPaginationData(),t&&(r.model.pagination={limit:t}),e.get(r.url,{area:"menu",action:"itemList",owner_type:r.model.owner_type,owner_id:r.model.owner_id,masterprice_ids:r.model.masterprice_ids,category:r.model.category,subcategory:r.model.subcategory,search:r.model.search.length>0?r.model.search:null,pagination:r.model.pagination,page:r.model.pagination?r.model.pagination.current:null,sort:i,filter:n,isMenuSubPage:r.model.isMenuSubPage?1:0,firstUpdate:s?1:0},(function(t){e(".search-inprogress-bar",r.$inprogress).animate({width:"100%"},1e3),r.$loader.addClass("hidden"),r.$inprogress.addClass("hide"),r.$list.empty().html(t),r.resetVisibleCategories(),r.update(s)}))},update:function(e){var n,s=this,r=s.$node.find(".js-pricelist-list .js-pricelist-item").length>0;i.is_phone&&(n=s.$searchSection.find("input").val().length>0,s.$node.find(".js-search-result").toggleClass("hide",!n),s.$dishSortFilter.toggleClass("hidden",!r)),s.$emptySearch.toggleClass("hide",r),r||s.$filterAll.addClass("hidden"),s.$searchSection.find(".input-search-pic").toggleClass("hide",!r||n),s.$sortingBox.toggleClass("invisible",!r),r||s.$node.find(".js-input-value").html(s.$search.val()),1===s.$list.find(".group-title").length&&s.$list.find(".group-title").addClass("hide"),s.$node.addClass("expand"),lazyload(s.$list[0]),s.initPagination(e),new t(s.$list[0]),window.dispatchEvent(new Event("height"))},getPageLimit:function(){return i.is_phone?10:this.model.isMenuSubPage?50:4},removeMPFilterActiveState:function(){this.model.masterprice_ids=null,this.updateView(!0),this.$markerListItem.removeClass("active")},clear:function(){this.model.visible=!0,this.model.search="",this.clearPaginationData(),this.updateView(!1)},resetVisibleCategories:function(){var e=this;e.$pricelistBlocks=e.$node.find(".pricelist-group-block"),e.$pricelistBlocks.hide(),e.$showMoreButton.toggleClass("hidden",e.$pricelistBlocks.length<=5),e.$pricelistBlocks.slice(0,5).show(),e.visibleCategoriesCount=e.model.categoryCount},initHandlers:function(){var t=this;t.$showMoreButton.on("click",(function(){t.visibleCategoriesCount+=5,t.$pricelistBlocks.slice(0,t.visibleCategoriesCount).show(),t.visibleCategoriesCount>=t.$node.find(".pricelist-group-block").length&&t.$showMoreButton.addClass("hidden")})),t.$categoryShowAllBtn.on("click",(function(i){i.preventDefault(),e(this).addClass("hide"),t.$filter.closest(".js-filter-item").filter(".js-pricelist-category-hidden").removeClass("hidden"),t.$categoryShowLessBtn.removeClass("hide"),window.dispatchEvent(new Event("height")),t.isShowAllCategories=!0})),t.$categoryShowLessBtn.on("click",(function(i){i.preventDefault(),e(this).addClass("hide"),t.$filter.closest(".js-filter-item").filter(".js-pricelist-category-hidden").addClass("hidden"),t.$categoryShowAllBtn.removeClass("hide"),t.isShowAllCategories=!1,e("html, body").animate({scrollTop:t.$node.offset().top-75})}));var n=!1;t.$search.on("click",(function(n){i.is_phone&&!e(this).closest(".js-section-search").length&&t.$node.find(".js-section-search").removeClass("hide")})),t.$search.on("input",(function(s){s.preventDefault(),i.is_phone&&(e(this).closest(".input-search").find(".input-search__clear").toggleClass("hidden",!e(this).val().length),e(this).closest(".input-search").find(".input-search__close-icon").toggleClass("hidden",e(this).val().length>0),e(this).closest(".input-search").find(".input-search__close-text").toggleClass("hidden",!e(this).val().length));var r=e(this).val();r.length?(t.model.visible=!0,t.model.category="",t.model.search=r):t.model.search.length&&(t.model.visible=!0,t.model.category="",t.model.search=""),n||(n=!0,e(window).trigger("track-event",["organization","menu_search"])),t.clearPaginationData(),t.updateView(!0)})),t.$searchMob.find("input").on("click",(function(){t.$searchSection.removeClass("hide"),t.$searchSection.find("input").trigger("focus"),t.$node.find("#serviceCallBtnPanel").removeClass("fixed")})),t.$menuInterestList.on("scroll",{passive:!0},(function(){t.interestBlockScrollStatSent||(e(window).trigger("track-event",["service","price"]),t.interestBlockScrollStatSent=!0)})),t.$searchInputs.on("click",(function(n){n.preventDefault(),t.$searchSection.find("input").trigger("focus"),i.is_phone&&e(window).trigger("track-event",["organization","menu_search"])})),t.$sortingInput.on("change",(function(i){t.$markerList.find(".mp-markerlist-item").removeClass("active"),e(this).closest(".active").length&&e(this).closest("label").toggleClass("asc");var n="sort";e(this).closest("label").hasClass("asc")&&(n="sort_asc");var s=e(this);e(this).is("select")&&(n=(s=e(this).find(":selected")).data("type"));var r=s.data("field");"sort_asc"===n&&(r+="_asc"),e(this).val(r);var o=e(this).val();e(this).closest("label").addClass("active").siblings().removeClass("active");var a=t.$node.find(".js-min-price").val(),l=t.$node.find(".js-max-price").val(),c=null;(l||l)&&(c={min:a,max:l}),t.updateView(!1,null,!1,!1,o,c)})),t.$dishSortSelect.on("change",(function(){var i=e(this).find("select").val();t.updateView(!1,null,!1,!1,i)})),t.$priceFilterMobile.on("click",(function(e){e.preventDefault(),t.$node.find(".js-menu-section").addClass("hide"),t.$node.find(".js-section-price-filter").removeClass("hide"),t.$node.find("#serviceCallBtnPanel").removeClass("fixed"),t.$list.empty()})),t.$backToPriceBtn.on("click",(function(i){i.preventDefault(),t.removeMPFilterActiveState(),e(this).closest(".js-menu-section").addClass("hide")})),t.$backToPrevPriceScreen.on("click",(function(e){e.preventDefault(),t.removeMPFilterActiveState()})),t.$node.find(".js-clear-filter-btn").on("click",(function(i){i.preventDefault(),e(this).closest(".text-input").find("input").val("");var n=e(this).closest(".js-price-filter").find("input");if(2===n.filter((function(t,i){return 0===e(i).val().length})).length)t.clear();else{var s={min:n.closest(".js-min-price").val(),max:n.closest(".js-max-price").val()};t.updateView(!1,null,!1,!1,!1,s)}e(this).addClass("hide")})),t.$node.find(".js-section-price-filter").find(".price-filter-apply").on("click",(function(i){i.preventDefault();var n=e(this).closest(".js-section-price-filter").find(".price-filter-form");e(this).closest(".js-menu-section").addClass("hide"),t.$node.find(".js-section-all-dishes").removeClass("hide"),t.$node.find(".js-filter-note").removeClass("hidden"),t.filterByPrice(n)})),t.$node.find(".js-section-price-filter").find(".price-filter-form").on("input",(function(e){e.preventDefault(),t.$node.find(".js-min-price").val().length||t.$node.find(".js-max-price").val().length?t.$node.find(".price-filter-apply").removeAttr("disabled"):(t.$node.find(".price-filter-apply").attr("disabled",!0),t.$node.find(".js-filter-note").addClass("hidden"))})),t.$emptySearch.on("click",".js-empty-search__show-all",(function(){t.clear()})),t.$node.find(".js-section-price-filter").find(".price-filter-clear").on("click",(function(i){i.preventDefault(),e(this).closest(".js-section-price-filter").find(".price-filter-form").find("input").val(""),e(this).closest(".js-section-price-filter").find(".price-filter-apply").attr("disabled",!0),t.$node.find(".js-filter-note").addClass("hidden"),t.$list.empty()})),t.$priceFilter.on("input",(function(i){e(i.target).closest(".text-input").find(".js-clear-filter-btn").toggleClass("hide",!e(i.target).val().length>0),t.filterByPrice(e(this))})),t.$clearSearch.on("click",(function(n){n.preventDefault(),i.is_phone&&setTimeout((function(){e(this).closest(".input-search").find(".input-search__clear").addClass("hidden"),e(this).closest(".input-search").find(".input-search__close-icon").removeClass("hidden"),e(this).closest(".input-search").find(".input-search__close-text").addClass("hidden")}),1e3),t.clear()})),t.$filter.add(t.$markerListItem).on("click",(function(n){n.preventDefault();var s=e(this),r=s.closest(".mp-markerlist-item"),o=s.closest(t.$filterItem),a=s.data("category"),l=s.data("subcategory"),c=e(this).find(".dish-name").text()||e(this).text(),d=i.is_phone?t.$node.find("[data-subcategory]").closest(t.$filterItem):t.$node.find("[data-subcategory]");if(t.$node.find(".button-show-more").removeClass("hidden"),t.catChosenStatSent||s.closest(".show-all-price-items").length?!t.showAllCatsStatSent&&s.closest(".show-all-price-items").length&&(e(window).trigger("track-event",["service","price"]),t.showAllCatsStatSent=!0):(e(window).trigger("track-event",["service","price"]),t.catChosenStatSent=!0),o.length&&t.$markerList.find(".mp-markerlist-item").removeClass("active"),t.$markerListItem.removeClass("active"),r.length&&!t.mpEventSent&&(e(window).trigger("track-event",["price","marker_price"]),t.mpEventSent=!0),!i.is_phone&&r.closest(".active").length)return t.model.masterprice_ids=null,t.updateView(!1),void r.removeClass("active");r.addClass("active"),t.$node.find(".js-subcategory-title").text(c),d.addClass("hide"),t.$node.find('[data-category="'+a+'"]').each((function(){e(this).data("subcategory")&&(t.$node.find(".js-subcategory-title").text(c),d.removeClass("hide"))})),t.$filterAll.addClass("hidden"),o.find(t.$subFilterItem).length?(o.find(t.$subFilterItem).removeClass("hide"),o.addClass("hasSubCategories"),t.$filterItem.addClass("hide"),s.closest(t.$filterItem).removeClass("hide"),t.$categoryShowLessBtn.addClass("hide"),t.$categoryShowAllBtn.addClass("hide"),o.find(t.$menuAnchor).removeClass("hide")):r.length?(t.$menuAnchor.addClass("hide"),t.$filterItem.removeClass("hide"),t.$filter.removeClass("active"),t.$subFilterItem.addClass("hide"),t.isShowAllCategories?t.$categoryShowLessBtn.removeClass("hide"):t.$categoryShowAllBtn.removeClass("hide")):(t.$filterItem.removeClass("hasSubCategories"),t.$filterItem.find(t.$subFilterItem).addClass("hide")),i.is_phone&&t.$node.find(".js-section-all-dishes").find('input[type="text"]').focus(),t.model.masterprice_ids=null,t.model.visible=!0,t.model.subcategory=l;var h=s.data("id");t.model.masterprice_ids=h||null,t.model.visible=!0,t.model.category=a,t.model.search="",s.data("visible",t.model.visible),t.clearPaginationData(),t.updateView(!1,t.$list),(i.is_phone&&s.closest(".js-pricelist__main").length||s.closest(".js-section-all-cats").length)&&(s.data("final")||s.data("id")?t.$node.find(".js-section-all-dishes").removeClass("hide"):o.find(".js-section-all-subcats").removeClass("hide")),i.is_phone&&s.closest(".js-section-all-subcats").length&&t.$node.find(".js-section-all-dishes").removeClass("hide")})),t.$allPrice.on("click",(function(i){if(i.preventDefault(),e(this).closest(".js-all-price-items").length)return t.updateView(!1,null,null,!1),void t.$node.find(".js-section-all-dishes").removeClass("hide");t.$node.find(".js-section-all-cats").removeClass("hide")})),t.$menuAnchor.on("click",(function(){e(this).addClass("hide"),t.$filterItem.removeClass("hide"),t.$filter.removeClass("active"),t.$subFilterItem.addClass("hide"),t.isShowAllCategories?t.$categoryShowLessBtn.removeClass("hide"):t.$categoryShowAllBtn.removeClass("hide"),t.model.category="all",t.updateView(!1,null,4,!0)})),t.$node.on("click",".js-description-readmore",(function(t){t.preventDefault();var i=e(this),n=i.closest(".pricelist-item-container"),s=i.closest(".description"),r=s.find(".js-pricelist-description");n.hasClass("has-layer")||(s.css("max-height","").removeClass("oh"),r.css("max-height","").removeClass("oh"),i.remove(),window.dispatchEvent(new Event("height")))})),t.$node.on("click",".js-pricelist-item .pricelist-item-container",(function(e){if(this.classList.contains("has-layer")&&!t.model.is_lego&&!e.target.closest(".js-button-external")){e.preventDefault();var i=this.dataset.id;create_layer("priceitem",{parameters:{owner_type:t.model.owner_type,owner_id:t.model.owner_id,item_id:i},scrollByClick:!0,changeViewport:!1,popstate:!0})}}))},filterByPrice:function(t){var i=this,n=t.find(".js-min-price").val(),s=t.find(".js-max-price").val();i.filterByPriceStatSent||(e(window).trigger("track-event",["service","price"]),i.filterByPriceStatSent=!0),i.updateView(!1,null,!1,!1,null,{min:n,max:s})},initPagination:function(t){var i=this,n=e(".pagination",i.$list);t&&n.length&&i.$showMoreButton.hasClass("hidden")&&i.$filterAll.removeClass("hidden")},clearPaginationData:function(){delete this.model.pagination}}),n})),define("js2/GetRoute",["./env"],(function(e){return function(t,i){const n=(i=i||{}).lonlat,s=[window.Global.user.lon,window.Global.user.lat],r=t.querySelector(".open_web_yamaps"),o=t.querySelector(".open_ios_yanav"),a=t.querySelector(".open_ios_googlemaps"),l=t.querySelector(".open_ios_yamaps"),c=t.querySelector(".open_ios_maps"),d=t.querySelector(".open_android_geo"),h=t.querySelector(".open_web_googlemaps");var u=function(e){1==window.navigator.standalone?window.open(e):window.location.href=e},f=function(){return"https://www.google.com/maps/dir/"+(window.Global.user.has_coords?s[1]+"%2C"+s[0]:"")+"/"+n[1]+"%2C"+n[0]};h&&h.addEventListener("click",(function(t){var i=f();window.open(i,e.is_mobile?"_self":"_target")})),r&&r.addEventListener("click",(function(t){var i="google"===t.target.dataset.source?f():function(){var e="http://maps.yandex.ru/?rtext=";return window.Global.user.has_coords?e+=s[1]+"%2C"+s[0]+"~"+n[1]+"%2C"+n[0]+"&rtm=atm&source=route&l=map":e+="~"+n[1]+"%2C"+n[0]+"&rtm=atm&source=route&l=map&rtm=atm&source=route&l=map&z=14&ll="+n[0]+"%2C"+n[1],e}();window.open(i,e.is_mobile?"_self":"_target")})),a&&a.addEventListener("click",(function(){var e="comgooglemaps://?daddr="+(n[1]+","+n[0]);window.Global.user.has_coords&&(e+="&saddr="+s),u(e)})),o&&o.addEventListener("click",(function(){u("yandexnavi://build_route_on_map?lon_to="+n[0]+"&lat_to="+n[1])})),l&&l.addEventListener("click",(function(){var e=n[0]+","+n[1];u("yandexmaps://maps.yandex.ru/?pt="+e+"&ll="+e)})),c&&c.addEventListener("click",(function(){var e=n[1]+","+n[0];u("maps://?daddr="+e)})),d&&d.addEventListener("click",(function(){var e=n[1]+","+n[0];u("geo:"+e+"?q="+e)}))}}));