webpackJsonp([14],{252:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(9),o=s(153),a=s(2),d=s(239),r=s(154),n=s(155);const l="Adres[Zipcode]",m="Adres[Housenumber]",h="Adres[HousenumberAdd]",c="address-errors",u=document.querySelector(`[js-hook-${c}]`),A="[js-hook-form-streetname]",b="u-hidden",p="js-form-item",v="form__item--lap-active";t.default=class AccountModalAddAddress extends o.default{get formId(){return"add-address"}constructor(e){super(e),this.formItems=[...this.element.querySelectorAll(`.${p}`)],this.streetNameBlock=this.element.querySelector(A),a.a.$on("modal[modal-add-address]::close",()=>{this.element.reset(),this.formItems.forEach(e=>{e.classList.remove(v)}),this.element.removeChild(this.streetNameBlock)})}onFormChange(e){"change"===e.eventType&&Object(d.a)(this.state,e,l,m,h).then(e=>!e||(this.loading=!0,Object(d.b)(this.element,this.state,l,m,h))).then(e=>{if(e){if(this.state.isValid&&(this.loading=!1),e.Adres){var t=e.Adres;const s=t.Gemeente,i=t.Huisnr,o=t.HuisnrToev,a=t.Plaatsnaam,d=t.Straatnaam,r=t.Postcode;this.inputs["Adres[Address]"].value=d,this.inputs["Adres[Zipcode]"].value=r,this.inputs["Adres[Housenumber]"].value=i,this.inputs["Adres[HousenumberAdd]"].value=o,this.inputs["Adres[City]"].value=a,this.inputs["Adres[District]"].value=s,this.showStreetnameBlock(!0,`${d}, ${a}`)}}else this.loading=!1,this.showStreetnameBlock(!1)}).catch(()=>{this.loading=!1})}onFormSubmit(){this.formSubmitTimeout&&clearTimeout(this.formSubmitTimeout),this.loading=!0,this.formSubmitTimeout=setTimeout(()=>{Object(r.a)(c);const e=new FormData(this.element);this.addAddressCall(e,window.EnvironmentSettings.api.addAddress).then(e=>{e?window.location.reload():(this.loading=!1,Object(r.b)(u,window.messages.validationPasswordNotChange,c))})},500)}addAddressCall(e,t){return e.set("method",t),i.a.get(window.EnvironmentSettings.endpoint+Object(n.a)(e),{},!1,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(e=>!!e.data.success).catch(()=>(Object(r.b)(u,window.messages.validationRequestFailed,c),!1))}showStreetnameBlock(e,t){this.streetNameBlock&&(e?(this.streetNameBlock.textContent=t,this.streetNameBlock.classList.remove(b)):this.streetNameBlock.classList.add(b))}}}});