// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.41/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(D,B){D.bundle=B;return D})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,B,a){D=function(){return this}();var c=D.location,k=c.pathname;a=c.protocol;c={version:"3.41",_appBaseUrl:a+"//"+c.host+k.substring(0,k.lastIndexOf(k.split("/")[k.split("/").length-1]))};B.noGlobals||(D.esri=c);(c.dijit=c.dijit||{})._arcgisUrl=("http:"===a||"https:"===
a?a:"http:")+"//www.arcgis.com/sharing/rest";return c})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(D,B,a,c){a=function(){return this}();var k={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,
zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(n,r){B.publish("esri.Error",[n])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com",
"js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com",
"cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com",
"servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};c.config=k;D.noGlobals||(a.esriConfig=k);return k})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,B,a){var c=D("ff"),k=D("ie"),n=void 0===k&&7<=D("trident"),r=D("edge"),f=D("webkit"),m=D("opera"),q=D("chrome"),l=D("safari"),b=navigator.userAgent,g;(g=b.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(g[2].replace("_",".")));(g=b.match(/Android\s+(\d+(\.\d+)*)/i))&&
D.add("esri-android",parseFloat(g[1]));(g=b.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(g[1]));0<=b.indexOf("BlackBerry")&&0<=b.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||D("esri-android")||D("esri-blackberry")||6<=D("esri-fennec")||(c||f)&&(document.createTouch||"ontouchstart"in B||B.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(g=b.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&D.add("esri-mobile",!!g);D.add("esri-pointer",
!c&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!B.PointerEvent));a._getDOMAccessor=function(d){var h="";c?h="Moz":f?h="Webkit":k?h="ms":m&&(h="O");return h+d.charAt(0).toUpperCase()+d.substr(1)};D.add("esri-phonegap",!!B.cordova);D.add("esri-cors",D("esri-phonegap")||B.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",B.FormData&&B.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in B&&"HTMLIFrameElement"in B&&"sandbox"in HTMLIFrameElement.prototype});
D.add("esri-secure-context",function(){if("isSecureContext"in B)return B.isSecureContext;if(B.location&&B.location.origin)return 0===B.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in B);D.add("esri-workers",B.Worker?!0:!1);D.add("esri-featurelayer-webgl",!1);if(b=D("esri-featurelayer-webgl")){var e=D("esri-mobile");g=e?1:2;e=e?1:3;"object"===typeof b?(b.maxDrillLevel=null==b.maxDrillLevel?g:b.maxDrillLevel,b.maxRecordCountFactor=null==b.maxRecordCountFactor?e:b.maxRecordCountFactor,
b.enablePBFQuery=null==b.enablePBFQuery?!0:b.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:g,maxRecordCountFactor:e,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",!1);D.add("esri-pbf",!k||10<=k);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",n||r||9<=k||3.5<=c||4<=q||3.1<=l||10.5<=m||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",n||r||10<=k||4<=c||4<=q||3.1<=l||10.5<=m||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",
n||r||10<=c||12<=q||4<=l||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!B.document)return!1;var d=B.document.createElement("a");d.href="?'";return-1<d.href.indexOf("?%27")});3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=q||11.1<=l));a._css=function(d){var h=D("esri-transforms3d");void 0!==d&&null!==d?h=d:h&&(q||l&&!D("esri-iphone"))&&
(h=!1);var t=h?"translate3d(":"translate(",z=h?q?",-1px)":",0px)":")",v=h?"scale3d(":"scale(",y=h?",1)":")",C=h?"rotate3d(0,0,1,":"rotate(",F=h?"matrix3d(":"matrix(",x=h?",0,0,":",",u=h?",0,0,0,0,1,0,":",",w=h?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||c&&"MozTransition"||m&&"OTransition"||k&&"msTransition"||"transition",transform:f&&"-webkit-transform"||c&&"MozTransform"||m&&"OTransform"||k&&"msTransform"||"transform",transformName:f&&"-webkit-transform"||c&&"-moz-transform"||
m&&"-o-transform"||k&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||c&&"MozTransformOrigin"||m&&"OTransformOrigin"||k&&"msTransformOrigin"||"transformOrigin",endEvent:f&&"webkitTransitionEnd"||c&&"transitionend"||m&&"oTransitionEnd"||k&&"MSTransitionEnd"||"transitionend"},translate:function(A,E){return t+A+"px,"+E+"px"+z},scale:function(A){return v+A+","+A+y},rotate:function(A){return C+A+"deg)"},matrix:function(A){return F+A.xx+","+A.xy+x+A.yx+","+A.yy+u+A.dx.toFixed(10)+(c&&
59>=c?"px,":",")+A.dy.toFixed(10)+(c&&59>=c?"px":"")+w},getScaleFromMatrix:function(A){if(!A)return 1;A=A.toLowerCase();var E=-1<A.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(A.substring(E.length,A.indexOf(",")))}}};a.isiPhone=D("esri-iphone");a.isAndroid=D("esri-android");a.isFennec=D("esri-fennec");a.isBlackBerry=D("esri-blackberry");a.isTouchEnabled=D("esri-touch");a.isPointerEnabled=D("esri-pointer");a._hasCors=D("esri-cors");a._hasFileUpload=D("esri-file-upload");a._hasTransforms=
D("esri-transforms");a._hasTransitions=D("esri-transitions");a._has3DTransforms=D("esri-transforms3d");return D})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,B,a,c,k){var n={show:function(r){if(r=n.getNode(r))r.style.display="block"},
getNode:function(r){return r&&r.domNode||r},hide:function(r){if(r=n.getNode(r))r.style.display="none"},toggle:function(r){if(r=n.getNode(r))r.style.display="none"===r.style.display?"block":"none"},documentBox:8>=k("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(r){if(r=this.getNode(r)){var f=0,m=0,q=0,l=0,b=0,g=0;return[B.connect(r,"ontouchstart",function(e){f=e.touches[0].screenX;m=e.touches[0].screenY;
q=r.scrollWidth;l=r.scrollHeight;b=r.clientWidth;g=r.clientHeight}),B.connect(r,"ontouchmove",function(e){e.preventDefault();var d=r.firstChild;d instanceof Text&&(d=r.childNodes[1]);var h=d._currentX||0,t=d._currentY||0;h+=e.touches[0].screenX-f;0<h?h=0:0>h&&Math.abs(h)+b>q&&(h=-1*(q-b));d._currentX=h;t+=e.touches[0].screenY-m;0<t?t=0:0>t&&Math.abs(t)+g>l&&(t=-1*(l-g));d._currentY=t;c.set(d,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+h+"px, "+t+"px)"});f=e.touches[0].screenX;
m=e.touches[0].screenY})]}}};a.mixin(D,n);return n})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,B,a,c,k,n,r,f,m){function q(z,v,y,C){(v=v&&v[z])?v={formatType:v.formatType,options:v}:C&&-1!==D.indexOf(C.properties||"",z)?v={formatType:C.formatter||"DateString",options:null}:y&&-1!==D.indexOf(y.properties||"",z)&&(v={formatType:y.formatter||"NumberFormat",options:null});
return v}function l(z,v,y){return[c.isString(z)?z.split(""):z,v||a.global,c.isString(y)?new Function("item","index","array",y):y]}function b(z){return void 0!==z&&null!==z}function g(z){return b(z)?z:""}function e(z,v,y,C){var F=y.match(/([^\(]+)(\([^\)]+\))?/i);y=c.trim(F[1]);var x=F[2]?c.trim(F[2]):null;F=v[z];C=C||(x?B.fromJson(x.replace(/^\(/,"({").replace(/\)$/,"})")):{});x=C.utcOffset;if(-1===D.indexOf(h,y))y=c.getObject(y),c.isFunction(y)&&(F=y(F,z,v,C));else if("number"===typeof F||"string"===
typeof F&&F&&!isNaN(Number(F)))switch(F=Number(F),y){case "NumberFormat":return r.format(F,C);case "DateString":z=new Date(F);if(C.local||C.systemLocale)return C.systemLocale?z.toLocaleDateString()+(C.hideTime?"":" "+z.toLocaleTimeString()):z.toDateString()+(C.hideTime?"":" "+z.toTimeString());z=z.toUTCString();C.hideTime&&(z=z.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return z;case "DateFormat":return z=new Date(F),b(x)&&(z=k.add(z,"minute",z.getTimezoneOffset()-x)),f.format(z,C)}return g(F)}
function d(z,v){var y;if(v)for(y in z)z.hasOwnProperty(y)&&(void 0===z[y]?delete z[y]:z[y]instanceof Object&&d(z[y],!0));else for(y in z)z.hasOwnProperty(y)&&void 0===z[y]&&delete z[y];return z}var h=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;n={valueOf:function(z,v){for(var y in z)if(z[y]==v)return y;return null},stripTags:function(z){if(z){var v=typeof z;if("string"===v)z=z.replace(t,"");else if("object"===v)for(var y in z)(v=z[y])&&"string"===typeof v&&(v=v.replace(t,"")),z[y]=
v}return z},substitute:function(z,v,y){if(b(y))if(c.isObject(y)){var C=y.first;var F=y.dateFormat;var x=y.numberFormat;var u=y.format}else C=y;if(v&&"${*}"!==v)return c.replace(v,c.hitch({obj:z},function(A,E){var G=E.split(":"),H;return 1<G.length?(E=G[0],G.shift(),(H=u&&u[G[0]])?G=H.formatType:(G=G.join(":"),H=null),e(E,this.obj,G,H)):(H=q(E,u,x,F))?e(E,this.obj,H.formatType,H.options):g(this.obj[E])}),/\$\{([^\}]+)\}/g);v=[];for(var w in z)if(y=(y=q(w,u,x,F))?e(w,z,y.formatType,y.options):z[w],
v.push(w+" \x3d "+g(y)+"\x3cbr/\x3e"),C)break;return v.join("")},filter:function(z,v,y){v=l(z,y,v);y={};var C;z=v[0];for(C in z)v[2].call(v[C],z[C],C,z)&&(y[C]=z[C]);return y},startsWith:function(z,v,y){y=y||0;return z.indexOf(v,y)===y},endsWith:function(z,v,y){if("number"!==typeof y||!isFinite(y)||Math.floor(y)!==y||y>z.length)y=z.length;y-=v.length;z=z.indexOf(v,y);return-1!==z&&z===y},isDefined:b,fixJson:d,isObject:function(z){return z&&"object"===typeof z},isString:function(z){return"string"===
typeof z},mixin:function(z,v){for(var y in v)v.hasOwnProperty(y)&&(z[y]=v[y]);return z},clone2DArray:function(z){if(z=z?z.slice(0):null){var v,y=z.length;for(v=0;v<y;v++)z[v]=z[v]?z[v].slice(0):null}return z},clone3DArray:function(z){if(z=z?z.slice(0):null){var v,y=z.length;for(v=0;v<y;v++){z[v]=z[v]?z[v].slice(0):null;var C=z[v];if(C){var F,x=C.length;for(F=0;F<x;F++)C[F]=C[F]?C[F].slice(0):null}}}return z}};c.mixin(m,n);m._isDefined=b;m._getParts=l;m._sanitize=d;return n})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(D,B,a,c,k,n,r,f,m,q){var l={},b=f.defaults.io,g=/^[a-z][a-z0-9\+\-\.]*:/i,e=/^\s*http:/i,d=/^\s*https:/i,h=/:\d+$/,t=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;l.isHTTP=function(v){var y=c.location.protocol;return null==v?"http:"===y||"https:"===y:v?"https:"===y:"http:"===y};l.getProtocolForWebResource=function(v){return l.isHTTP()?c.location.protocol:v?"https:":"http:"};l.urlToObject=function(v){var y={},C=new a(v),F=v.indexOf("?");null===C.query?y={path:v,query:null}:(y.path=v.substring(0,
F),y.query=k.queryToObject(C.query));C.fragment&&(y.hash=C.fragment,null===C.query&&(y.path=y.path.substring(0,y.path.length-(C.fragment.length+1))));return y};l.getProxyUrl=function(v,y){var C=D.isString(v)?0===D.trim(v).toLowerCase().indexOf("https:"):v,F=b.proxyUrl,x,u=q.io.proxyNotSet;D.isString(v)&&(x=l.getProxyRule(v))&&(F=x.proxyUrl);if(!F)throw Error(u);if(C&&!1!==y&&0!==c.location.href.toLowerCase().indexOf("https:")&&(C=F,0!==C.toLowerCase().indexOf("http")&&(C=l.getAbsoluteUrl(C)),C=C.replace(/^http:/i,
"https:"),l.canUseXhr(C))){F=C;var w=1}F=l.urlToObject(F);F._xo=w;return F};l.addProxy=function(v){var y=l.getProxyRule(v),C;y?C=l.urlToObject(y.proxyUrl):b.alwaysUseProxy&&(C=l.getProxyUrl());C&&(y=l.urlToObject(v),v=C.path+"?"+y.path,(C=k.objectToQuery(D.mixin(C.query||{},y.query)))&&(v+="?"+C));return v};l.addProxyRule=function(v){var y=v.urlPrefix=l.urlToObject(v.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),C=b.proxyRules,F,x=C.length,u=x;for(F=0;F<x;F++){var w=
C[F].urlPrefix;if(0===y.indexOf(w)){if(y.length===w)return-1;u=F;break}else 0===w.indexOf(y)&&(u=F+1)}C.splice(u,0,v);return u};l.getProxyRule=function(v){var y=b.proxyRules,C=y.length,F=l.urlToObject(v).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(v=0;v<C;v++)if(0===F.indexOf(y[v].urlPrefix)){var x=y[v];break}return x};l.hasSameOrigin=function(v,y,C){v=v.toLowerCase();y=y.toLowerCase();var F=c.location.href.toLowerCase();v=0===v.indexOf("http")?new a(v):F=new a(F);
y=0===y.indexOf("http")?new a(y):D.isString(F)?new a(F):F;return(C||v.scheme===y.scheme)&&v.host===y.host&&v.port===y.port};l.canUseXhr=function(v,y){var C=m("esri-phonegap")?!0:!1,F=l.hasSameOrigin,x=b.corsEnabledServers,u,w=-1;!C&&m("esri-cors")&&x&&x.length&&(C=B.some(x,function(A,E){var G=!A||"object"!==typeof A||A instanceof RegExp?A:A.host;if(G instanceof RegExp){if(G.test(v))return w=E,!0}else if(G&&(u=0!==G.trim().toLowerCase().indexOf("http"),F(v,u?"http://"+G:G)||u&&F(v,"https://"+G)))return w=
E,!0;return!1}));return y?w:C};l.getAbsoluteUrl=function(v){var y=l.getProtocolForWebResource();return D.isString(v)&&!g.test(v)?0===v.indexOf("//")?y+v:0===v.indexOf("/")?y+"//"+c.location.host+v:n._appBaseUrl+v:v};l.fixUrl=function(v){v=D.trim(v);v=l.getAbsoluteUrl(v);v=l.normalizeSlashes(v);v=v.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");v=l.downgradeToHTTP(v);return v=l.upgradeToHTTPS(v)};l.normalize=function(v){return l.fixUrl(v)};l.normalizeSlashes=function(v){if(/^https?:\/\//i.test(v)){var y=
v.indexOf("?");if(-1<y){var C=v.slice(0,y);var F=v.slice(y+1)}else C=v;v=C.replace(/\/{2,}/g,"/");v=v.replace("/","//");F&&(v+="?"+F)}return v};l.downgradeToHTTP=function(v){return l.isHTTP(!1)&&d.test(v)&&l.hasSameOrigin(c.location.href,v,!0)&&!l.canUseXhr(v)?v.replace(d,"http:"):v};l.upgradeToHTTPS=function(v){var y=b.httpsDomains,C=l.isHTTP(!1),F=l.isHTTP(!0);if(!e.test(v))return v;v=D.trim(v);var x=v.indexOf("/",7);x=-1===x?v:v.slice(0,x);x=x.toLowerCase().slice(7);if(h.test(x))if(r.endsWith(x,
":80"))x=x.slice(0,-3),v=v.replace(":80","");else return v;if(C&&x===c.location.host&&(!t.test(v)||!l.canUseXhr(v)))return v;C=!1;if(F&&x===c.location.host)C=!0;else if(y)for(var u=0;u<y.length;u++){var w=y[u];if(x===w||r.endsWith(x,"."+w)){C=!0;break}}C||!F||b.alwaysUseProxy||l.getProxyRule(v)||(C=!0);C&&(v=v.replace(e,"https:"));return v};f=q.widgets.popup;var z=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:f.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:f.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:f.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:f.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:f.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:f.NLS_openLinkInApp}];l.getURIInfo=function(v){var y;B.some(z,function(C){C.pattern.test(v)&&(y=C);return!!y});return y};l.isKnownURI=function(v){return!!l.getURIInfo(v)};l.base64UrlEncode=function(v){return btoa(String.fromCharCode.apply(null,v)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};D.mixin(n,l);n._getProxyUrl=l.getProxyUrl;n._getProxiedUrl=l.addProxy;n._hasSameOrigin=l.hasSameOrigin;n._canDoXOXHR=l.canUseXhr;n._getAbsoluteUrl=l.getAbsoluteUrl;
n.fixUrl=l.fixUrl;return l})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v){function y(O){O=new n(O);return(O.host+(O.port?":"+O.port:"")).toLowerCase()}function C(O){return this._xhr?
this._xhr.getResponseHeader(O):null}function F(O,Y){var ba=b.objectToQuery(O.content);ba&&(O.url+=(-1===O.url.indexOf("?")?"?":"\x26")+ba);if(2E3<O.url.length){if("data:"!==O.url.toLowerCase().slice(0,5))return ba=new c,ba.reject(k.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),ba;if(3E6<O.url.length)return ba=new c,ba.reject(k.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),ba}var ha=
new Image;Y.allowImageDataAccess&&(ha.crossOrigin=O.withCredentials?"use-credentials":"anonymous");var U=!1,X=new c(function(Z){U=!0;ha.onload=ha.onerror=ha.onabort=null;ha.src=""});ba=function(Z){ha.onload=ha.onerror=ha.onabort=null;U||X.reject(Error("Unable to load the resource"))};ha.onload=function(){ha.onload=ha.onerror=ha.onabort=null;U||X.resolve(this)};ha.onerror=ba;ha.onabort=ba;ha.alt="";ha.src=O.url;return X}function x(O,Y,ba,ha){var U=!1,X=!1,Z=!1,P;if(h.isDefined(Y))if(k.isObject(Y)){U=
!!Y.useProxy;X=!!Y.usePost;Z=!!Y.returnProgress;var da=Y.crossOrigin}else U=!!Y;O=k.mixin({},O);delete O._credential;O._ssl&&(O.url=O.url.replace(/^http:/i,"https:"));10>d("ie")&&!M.test(O.url)&&(O.url=encodeURI(O.url));var ia=O.content,xa=O.url,Ca=ba&&O.form,Fa=I;da=h.isDefined(da)?da:Fa.useCors;O.load=function(Ta){if(Ta){if(Ta.error){var eb=k.mixin(Error(),Ta.error);eb.log=!!a.isDebug}else"error"===Ta.status&&(eb=k.mixin(Error(),Ta),eb.log=!!a.isDebug);eb&&(O.failOk=!eb.log,h.isDefined(eb.httpCode)||
(eb.httpCode=eb.code))}return eb||Ta};O.error=function(Ta,eb){eb&&eb.xhr&&eb.xhr.abort();Ta instanceof Error||(Ta=k.mixin(Error(),Ta));Ta.log=!!a.isDebug;O.failOk=!Ta.log;Fa.errorHandler(Ta,eb);return Ta};O._token&&(O.content=O.content||{},O.content.token=O._token);var Ma=0;if(ia&&xa){var Sa=b.objectToQuery(ia);Ma=Sa.length+xa.length+1;d("esri-url-encodes-apostrophe")&&(Ma=Sa.replace(/'/g,"%27").length+xa.length+1)}O.timeout=h.isDefined(O.timeout)?O.timeout:Fa.timeout;O.handleAs=O.handleAs||"json";
try{var Ba=da&&t.canUseXhr(O.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(O.url),ca=t.hasSameOrigin(O.url,window.location.href)||Ba,ua=X||ba||Ma>Fa.postLength?!0:!1,ya=ca||-1===O.handleAs.indexOf("json")||!O.callbackParamName||ba?!1:!0,ta=t.getProxyRule(O.url)||Fa.alwaysUseProxy||U||!("image"===O.handleAs&&!Y.allowImageDataAccess||ya&&!ua||ca)?!0:!1;ba&&!d("esri-file-upload")&&!ta&&Ba&&(ta=!0);if(ta){var pa=t.getProxyUrl(xa,da);var Aa=pa.path;pa._xo&&(Ba=!0);!ua&&Aa.length+1+Ma>Fa.postLength&&
(ua=!0);O.url=Aa+"?"+xa;if(ua)O.content=k.mixin(pa.query||{},ia);else{var T=b.objectToQuery(k.mixin(pa.query||{},ia));T&&(O.url+="?"+T);O.content=null}}if(!ya||ua||ta){var ea=O.headers;!Ba||ea&&ea.hasOwnProperty("X-Requested-With")||(ea=O.headers=ea||{},ea["X-Requested-With"]=null);if(ba){var na=O.callbackParamName||"callback.html",V=O.callbackElementName||"textarea",Ia,Ja,Da=Ca.elements?Ca.elements.length:0;if(ia=O.content)for(Ia in ia.token&&/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(xa)&&
(xa+=(-1===xa.indexOf("?")?"?":"\x26")+"token\x3d"+ia.token,O.url=ta?Aa+"?"+xa:xa,delete ia.token),ia){var W=ia[Ia];if(h.isDefined(W)){var oa=null;for(Ja=0;Ja<Da;Ja++){var ra=Ca.elements[Ja];if(ra.name===Ia){oa=ra;break}}oa?oa.value=W:ha?Ca.append(Ia,W):Ca.appendChild(l.create("input",{type:"hidden",name:Ia,value:W}))}}if(d("esri-file-upload")){B.forEach(Ca.elements,function(Ta){Ta.name===na&&Ca.removeChild(Ta)});var R=ha?Ca:new FormData(Ca);if(11<=d("safari")&&"entries"in R&&"delete"in R){ha=[];
for(var fa=R.entries(),ma=fa.next();!ma.done;){var wa=ma.value;wa[1]instanceof File&&""===wa[1].name&&ha.push(wa[0]);ma=fa.next()}ha.forEach(function(Ta){R["delete"](Ta)})}O.contentType=!1;O.postData=R;delete O.form}else{Ca.enctype="multipart/form-data";9>d("ie")&&(Ca.encoding="multipart/form-data");Ca.method="post";B.some(Ca.elements,function(Ta){return Ta.name===na})||Ca.appendChild(l.create("input",{type:"hidden",name:na,value:V}));if(-1!==xa.toLowerCase().indexOf("addattachment")||-1!==xa.toLowerCase().indexOf("updateattachment"))xa+=
(-1===xa.indexOf("?")?"?":"\x26")+na+"\x3d"+V,O.url=ta?Aa+"?"+xa:xa;delete O.content}}if(Ba&&!O.hasOwnProperty("withCredentials")&&"with-credentials"===I.useCors){Aa=ta?Aa:xa;var Ea=t.canUseXhr(Aa,!0),Ha=-1<Ea?I.corsEnabledServers[Ea]:null;if(Ha&&Ha.hasOwnProperty("withCredentials"))Ha.withCredentials&&(O.withCredentials=!0);else if(g.id){var La=g.id.findServerInfo(Aa);La&&La.webTierAuth&&(O.withCredentials=!0)}}O=K?K(O):O;var Ya=function(){if("image"===O.handleAs)return F(O,Y);if(ua){if(ba&&!d("esri-file-upload")){P=
new c(function(){Ta.cancel()});var Ta=q.post(O.url,O).then(function(db){P.resolve(db)}).otherwise(function(db){P.reject(db)});P.addCallback(function(db){return O.load(db)});P.addErrback(function(db){return O.error(db)});return P}!ta&&d("safari")&&(O.url+=(-1===O.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+L++);if(Z){O.uploadProgress=!0;O.data=O.postData;O.query=O.content;P=new c(function(){eb.cancel()});var eb=f.post(O.url,O).then(function(db){P.resolve(db)},function(db){P.reject(db)},
function(db){P.progress({transferType:db.transferType,loaded:db.loaded,total:db.total})});P.addCallback(function(db){return O.load(db)});P.addErrback(function(db){return O.error(db)});return P}return r.post(O)}return r.get(O)};return O.withCredentials&&v.isNoCorsRequestRequired(xa)?P=v.sendNoCorsRequest(xa,ia).addBoth(function(){var Ta=Ya();P.ioArgs=Ta.ioArgs;return Ta}):Ya()}O=K?K(O):O;O.jsonp=O.callbackParamName;O.query=O.content;P=new c(function(){Xa.cancel()});var Xa=m.get(O.url,O).then(function(Ta){P.resolve(Ta)}).otherwise(function(Ta){P.reject(Ta)});
P.addCallback(function(Ta){return O.load(Ta)});P.addErrback(function(Ta){return O.error(Ta)});return P}catch(Ta){return P=new c,P.errback(O.error(Ta)),P}}function u(O){var Y=I.corsStatus,ba=t.canUseXhr(O,!0);-1<ba&&I.corsEnabledServers.splice(ba,1);var ha=new c;ha.reject({log:!!a.isDebug});Y[y(O)]=ha.promise;return ba}function w(O){var Y=I.corsStatus;try{var ba=y(O);if(I.corsDetection&&I.useCors&&d("esri-cors")&&O&&-1!==O.toLowerCase().indexOf("/rest/services")&&!t.hasSameOrigin(O,window.location.href)&&
!t.canUseXhr(O)){if(Y[ba]&&!Y[ba].isCanceled())return Y[ba];var ha=new c(z._dfdCanceller);Y[ba]=ha.promise;var U=r.get({url:O.substring(0,O.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*I.corsDetectionTimeout});ha._pendingDfd=U;U.then(function(X){X?(t.canUseXhr(O)||I.corsEnabledServers.push(ba),ha.resolve()):ha.reject()},function(X){ha.reject(X)});return ha.promise}}catch(X){}return N}function A(O){K=O}function E(O,
Y,ba,ha){function U(Ba){Ba._pendingDfd=x(ba,ha,Ca,xa);if(!Ba._pendingDfd){Ba.ioArgs=Ba._pendingDfd&&Ba._pendingDfd.ioArgs;var ca=Error("Deferred object is missing");ca.log=!!a.isDebug;Ba.errback(ca);Ba._pendingDfd=null;return Ba}Ba._pendingDfd.addCallback(function(ua){if(!ua)return ua;var ya=Ba._pendingDfd&&Ba._pendingDfd.ioArgs&&Ba._pendingDfd.ioArgs.xhr;if(!ya)return ua;if(ya=ya.getResponseHeader("Content-Type"))if(ya=ya.toLowerCase(),-1===ya.indexOf("text/plain")&&-1===ya.indexOf("application/json"))return ua;
if(ua instanceof ArrayBuffer&&750>=ua.byteLength)ya=new Blob([ua]);else if(ua instanceof Blob&&750>=ua.size)ya=ua;else return ua;var ta=new c,pa=new FileReader;pa.readAsText(ya);pa.onloadend=function(){if(!pa.error)try{var Aa=JSON.parse(pa.result);if(Aa.error)var T=Aa.error}catch(ea){}T?(T=k.mixin(Error(),T),T.log=!!a.isDebug,null==T.httpCode&&(T.httpCode=T.code),ta.reject(T)):ta.resolve(ua)};return ta.promise}).addCallback(function(ua){Ba.ioArgs=Ba._pendingDfd&&Ba._pendingDfd.ioArgs;ha.returnFullResponse&&
(ua={data:ua,_xhr:Ba.ioArgs&&Ba.ioArgs.xhr,getHeader:C});Ba.callback(ua);Ba._pendingDfd=null}).addErrback(function(ua){if(ua){var ya=ua.code;var ta=ua.subcode;var pa=(pa=ua.messageCode)&&pa.toUpperCase()}if(ua&&403==ya&&(4==ta||ua.message&&-1<ua.message.toLowerCase().indexOf("ssl")&&-1===ua.message.toLowerCase().indexOf("permission"))){if(!ba._ssl){ba._ssl=ba._sslFromServer=!0;E(Ba,!0,ba,ha);return}}else if(ua&&415==ua.status){if(u(ba.url),!ba._err415){ba._err415=1;E(Ba,!0,ba,ha);return}}else if(g.id&&
-1!==B.indexOf(g.id._errorCodes,ya)&&!g.id._isPublic(ba.url)&&!Z&&(403!=ya||-1===B.indexOf(J,pa)&&(!h.isDefined(ta)||2==ta&&ba._token))){Ba._pendingDfd=g.id.getCredential(ba.url,{token:ba._token,error:ua});Ba._pendingDfd.addCallback(function(Aa){ba._token=Aa.token;ba._credential=Aa;ba._ssl=ba._sslFromServer||Aa.ssl;E(Ba,!0,ba,ha)}).addErrback(function(Aa){Ba.errback(Aa);Ba._pendingDfd=null});return}Ba.ioArgs=Ba._pendingDfd&&Ba._pendingDfd.ioArgs;Ba.isFulfilled()||Ba.errback(ua);Ba._pendingDfd=null}).then(null,
null,function(ua){Ba.progress(ua)})}var X=ba.form,Z=ha.disableIdentityLookup,P=ha._preLookup,da=!1;if(d("esri-workers")&&!1!==I.useWorkers)if(!0===ha.useWorkers||!0===I.useWorkers)da=!0;else if(ha.workerOptions){var ia=ha.workerOptions;if(ia.callback||ia.worker&&ia.worker.worker instanceof Worker)da=!0}var xa=X&&d("esri-file-upload")&&X instanceof FormData,Ca=X&&(X.elements?B.some(X.elements,function(Ba){return"file"===Ba.type}):xa),Fa=-1!==ba.url.toLowerCase().indexOf("token\x3d")||ba.content&&ba.content.token||
Ca&&B.some(X.elements,function(Ba){return"token"===Ba.name})?1:0;if(!Y){O.addCallback(function(Ba){if(Ba&&(/\/sharing\/rest\/accounts\/self/i.test(ba.url)||/\/sharing\/rest\/portals\/self/i.test(ba.url))){if(!Fa&&!ba._token&&Ba.user&&Ba.user.username){I.webTierAuthServers.push(y(ba.url));var ca=I.corsEnabledServers,ua=t.canUseXhr(ba.url,!0),ya={host:y(ba.url),withCredentials:!0};if(-1===ua)ca.push(ya);else{var ta=ca[ua];ta instanceof RegExp?(ya.host=ta,ca.splice(ua,1,ya)):"object"===typeof ta?ta.withCredentials=
!0:ca.splice(ua,1,ya)}}Array.isArray(Ba.authorizedCrossOriginNoCorsDomains)&&v.registerNoCorsDomains(Ba.authorizedCrossOriginNoCorsDomains)}if(Ba=ba._credential)if(ca=(ca=g.id.findServerInfo(Ba.server))&&ca.owningSystemUrl)ca=ca.replace(/\/?$/,"/sharing"),(Ba=g.id.findCredential(ca,Ba.userId))&&-1===g.id._getIdenticalSvcIdx(ca,Ba)&&Ba.resources.splice(0,0,ca)});O.addBoth(function(Ba){delete ba._credential;!Ba||d("ie")&&Ba.nodeType||(Ba._ssl=ba._ssl)});var Ma=ba.load,Sa=ba.error;Ma&&O.addCallback(function(Ba){var ca=
O._pendingDfd;ca=ca&&ca.ioArgs;return Ma.call(ca&&ca.args,Ba,ca)});Sa&&O.addErrback(function(Ba){var ca=O._pendingDfd;ca=ca&&ca.ioArgs;return Sa.call(ca&&ca.args,Ba,ca)})}!g.id||Fa||ba._token||g.id._isPublic(ba.url)||Z&&!P||!(Y=g.id.findCredential(ba.url))||(ba._token=Y.token,ba._ssl=Y.ssl);da?ha.workerOptions&&ha.workerOptions.worker?(H||(H=r),r=ha.workerOptions.worker,U(O)):D(["./workers/RequestClient"],function(Ba){H||(H=r);if(ha.workerOptions){var ca=ha.workerOptions;r=Ba.getClient(ca.callback,
ca.cbFunction)}else r=Ba.getClient();U(O)}):(H&&(r=H,H=null),U(O));return O}function G(O,Y){O.url=t.fixUrl(O.url);Y=Y||{};var ba=new c(z._dfdCanceller),ha=w(O.url);ba._pendingDfd=ha;ha.always(function(U){U&&"cancel"===U.dojoType?ba.reject(U):E(ba,!1,O,Y)});return ba}var H=null,K,I=e.defaults.io,J=["COM_0056","COM_0057","SB_0008"],L=0,M=/%[0-9A-F]{2}/i,N=function(){var O=new c;O.resolve();return O.promise}();G._makeRequest=x;G._processRequest=E;G._disableCors=u;G._detectCors=w;G.setRequestPreCallback=
A;g.request=G;g._makeRequest=x;g._processRequest=E;g._disableCors=u;g._detectCors=w;g.setRequestPreCallback=A;return G})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,B,a,c,k,n){function r(){var t=document.createElement("iframe");t.name="esri_core_jsonp_iframe";t.style.display="none";t.setAttribute("sandbox","allow-scripts");if(!n("ff")&&"srcdoc"in t){var z=D.toUrl("dojo/dojo.js"),v=k.replace("../../../dojo/dojo.js",
z);z=z.slice(0,-7);v=v.replace("../../../dojo/",z);t.srcdoc=v}else v=D.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===v.indexOf("https:")&&(v=v.replace("https:","http:")),t.src=v;document.body.appendChild(t);return t}function f(){var t=new MessageChannel;t.port1.addEventListener("message",m);t.port1.start();return t}function m(t){var z=t.data;if("ready"===z){z=0;for(var v=d;z<v.length;z++)t=v[z],l(t,g);d=null}else if(t=h[z.id])delete h[z.id],z.isError?t.dfd.reject(Error(z.message)):
t.dfd.resolve(z.response)}function q(t,z){t.addEventListener("load",function(){t.contentWindow.postMessage("init","*",[z.port2])})}function l(t,z){h[t.message.id]=t;z.port1.postMessage(t.message)}Object.defineProperty(B,"__esModule",{value:!0});var b,g,e=0,d=[],h={};B.get=function(t,z){if(!n("esri-script-sandbox"))return c.get(t,z);var v=null;z&&(v={jsonp:z.jsonp,preventCache:z.preventCache,query:z.query,timeout:z.timeout});var y=new a(function(){if(d){var F=d.indexOf(C);-1<F&&d.splice(F,1)}else C.message.id in
h&&delete h[C.message.id]}),C={dfd:y,message:{id:"id"+(++e+Math.random()),url:t,options:v}};b||(b=r(),g=f(),q(b,g));d?d.push(C):l(C,g);return y.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){function b(u,w){u.canDelete&&t._remove(u.id,w.options.frameDoc,!0)}function g(u){x&&x.length&&(k.forEach(x,function(w){t._remove(w.id,w.frameDoc);
w.frameDoc=null}),x=[]);return u.options.jsonp?!u.data:!0}function e(u){return!!this.scriptLoaded}function d(u){return(u=u.options.checkString)&&eval("typeof("+u+') !\x3d\x3d "undefined"')}function h(u,w){if(this.canDelete){var A=this.response.options;x.push({id:this.id,frameDoc:A.ioArgs?A.ioArgs.frameDoc:A.frameDoc});A.ioArgs&&(A.ioArgs.frameDoc=null);A.frameDoc=null}w?this.reject(w):this.resolve(u)}function t(u,w,A){var E=a.parseArgs(u,a.deepCopy({},w));u=E.url;w=E.options;var G=a.deferred(E,b,
g,w.jsonp?null:w.checkString?d:e,h);n.mixin(G,{id:z+v++,canDelete:!1});w.jsonp&&((new RegExp("[?\x26]"+w.jsonp+"\x3d")).test(u)||(u+=(~u.indexOf("?")?"\x26":"?")+w.jsonp+"\x3d"+(w.frameDoc?"parent.":"")+z+"_callbacks."+G.id),G.canDelete=!0,F[G.id]=function(I){E.data=I;G.handleResponse(E)});a.notify&&a.notify.emit("send",E,G.promise.cancel);if(!w.canAttach||w.canAttach(G)){var H=t._attach(G.id,u,w.frameDoc,function(I){if(!(I instanceof Error)){var J=Error("Error loading "+(I.target?I.target.src:"script"));
J.source=I;I=J}G.reject(I);t._remove(G.id,w.frameDoc,!0)});if(!w.jsonp&&!w.checkString)var K=r(H,y,function(I){if("load"===I.type||C.test(H.readyState))K.remove(),G.scriptLoaded=I})}B(G);return A?G:G.promise}q.add("script-readystatechange",function(u,w){return"undefined"!==typeof w.createElement("script").onreadystatechange&&("undefined"===typeof u.opera||"[object Opera]"!==u.opera.toString())});var z=D.id.replace(/[\/\.\-]/g,"_"),v=0,y=q("script-readystatechange")?"readystatechange":"load",C=/complete|loaded/,
F=c.global[z+"_callbacks"]={},x=[];t.get=t;t._attach=function(u,w,A,E){A=A||l.doc;var G=A.createElement("script");if(E)r.once(G,"error",E);G.type="text/javascript";try{G.src=w}catch(H){E&&E(G)}G.id=u;G.async=!0;G.charset="utf-8";return A.getElementsByTagName("head")[0].appendChild(G)};t._remove=function(u,w,A){m.destroy(f.byId(u,w));F[u]&&(A?F[u]=function(){delete F[u]}:delete F[u])};t._callbacksProperty=z+"_callbacks";return t})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},
"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){function g(C){return!this.isFulfilled()}function e(C){return!!this._finished}function d(C,F){if(!F)try{var x=C.options,u=t.doc(t._frame),w=x.handleAs;if("html"!==w){if("xml"===w)if("html"===u.documentElement.tagName.toLowerCase()){f("a",u.documentElement).orphan();
var A=u.documentElement.innerText||u.documentElement.textContent;A=A.replace(/>\s+</g,"\x3e\x3c");C.text=n.trim(A)}else C.data=u;else C.text=u.getElementsByTagName("textarea")[0].value;k(C)}else C.data=u}catch(E){F=E}F?this.reject(F):this._finished?this.resolve(C):this.reject(Error("Invalid dojo/request/iframe request state"))}function h(C){this._callNext()}function t(C,F,x){var u=c.parseArgs(C,c.deepCreate(y,F),!0);C=u.url;F=u.options;if("GET"!==F.method&&"POST"!==F.method)throw Error(F.method+" not supported by dojo/request/iframe");
t._frame||(t._frame=t.create(t._iframeName,v+"();"));C=c.deferred(u,null,g,e,d,h);C._callNext=function(){this._calledNext||(this._calledNext=!0,t._currentDfd=null,t._fireNextRequest())};C._legacy=x;t._dfdQueue.push(C);t._fireNextRequest();a(C);return x?C:C.promise}var z=D.id.replace(/[\/\.\-]/g,"_"),v=z+"_onload";b.global[v]||(b.global[v]=function(){var C=t._currentDfd;if(C){var F=q.byId(C.response.options.form)||C._tmpForm;if(F){for(var x=C._contentToClean,u=0;u<x.length;u++)for(var w=x[u],A=0;A<
F.childNodes.length;A++){var E=F.childNodes[A];if(E.name===w){l.destroy(E);break}}C._originalAction&&F.setAttribute("action",C._originalAction);C._originalMethod&&(F.setAttribute("method",C._originalMethod),F.method=C._originalMethod);C._originalTarget&&(F.setAttribute("target",C._originalTarget),F.target=C._originalTarget)}C._tmpForm&&(l.destroy(C._tmpForm),delete C._tmpForm);C._finished=!0}else t._fireNextRequest()});var y={method:"POST"};t.create=function(C,F,x){if(b.global[C])return b.global[C];
if(b.global.frames[C])return b.global.frames[C];x||(m("config-useXDomain")&&m("config-dojoBlankHtmlUrl"),x=m("config-dojoBlankHtmlUrl")||B.toUrl("dojo/resources/blank.html"));F=l.place('\x3ciframe id\x3d"'+C+'" name\x3d"'+C+'" src\x3d"'+x+'" onload\x3d"'+F+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',b.body());return b.global[C]=F};t.doc=function(C){if(C.contentDocument)return C.contentDocument;var F=C.name;if(F){var x=b.doc.getElementsByTagName("iframe");
if(C.document&&x[F].contentWindow&&x[F].contentWindow.document)return x[F].contentWindow.document;if(b.doc.frames[F]&&b.doc.frames[F].document)return b.doc.frames[F].document}return null};t.setSrc=function(C,F,x){C=b.global.frames[C.name];C.contentWindow&&(C=C.contentWindow);try{x?C.location.replace(F):C.location=F}catch(u){}};t._iframeName=z+"_IoIframe";t._notifyStart=function(){};t._dfdQueue=[];t._currentDfd=null;t._fireNextRequest=function(){try{if(!t._currentDfd&&t._dfdQueue.length){do var C=
t._currentDfd=t._dfdQueue.shift();while(C&&(C.canceled||C.isCanceled&&C.isCanceled())&&t._dfdQueue.length);if(!C||C.canceled||C.isCanceled&&C.isCanceled())t._currentDfd=null;else{var F=C.response,x=F.options,u=C._contentToClean=[],w=q.byId(x.form),A=c.notify,E=x.data||null;if(!C._legacy&&"POST"===x.method&&!w)w=C._tmpForm=l.create("form",{name:z+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},b.body());else if("GET"===x.method&&w&&-1<F.url.indexOf("?")){var G=F.url.slice(F.url.indexOf("?")+
1);E=n.mixin(r.queryToObject(G),E)}if(w){if(!C._legacy){var H=w;do H=H.parentNode;while(H&&H!==b.doc.documentElement);H||(w.style.position="absolute",w.style.left="-1000px",w.style.top="-1000px",b.body().appendChild(w));w.name||(w.name=z+"_form")}if(E){H=function(O,Y){l.create("input",{type:"hidden",name:O,value:Y},w);u.push(O)};for(var K in E){var I=E[K];if(n.isArray(I)&&1<I.length)for(G=0;G<I.length;G++)H(K,I[G]);else{var J=f("input[name\x3d'"+K+"']",w);-1==J.indexOf()?H(K,I):J.val(I)}}}var L=w.getAttributeNode("action"),
M=w.getAttributeNode("method"),N=w.getAttributeNode("target");F.url&&(C._originalAction=L?L.value:null,L?L.value=F.url:w.setAttribute("action",F.url));C._legacy?M&&M.value||(M?M.value=x.method:w.setAttribute("method",x.method)):(C._originalMethod=M?M.value:null,M?M.value=x.method:w.setAttribute("method",x.method));C._originalTarget=N?N.value:null;N?N.value=t._iframeName:w.setAttribute("target",t._iframeName);w.target=t._iframeName;A&&A.emit("send",F,C.promise.cancel);t._notifyStart(F);w.submit()}else x=
"",F.options.data&&(x=F.options.data,"string"!==typeof x&&(x=r.objectToQuery(x))),H=F.url+(-1<F.url.indexOf("?")?"\x26":"?")+x,A&&A.emit("send",F,C.promise.cancel),t._notifyStart(F),t.setSrc(t._frame,H,!0)}}}catch(O){C.reject(O)}};c.addCommonMethods(t,["GET","POST"]);return t})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(D,B,a,c,k){function n(m){for(;m.childNodes[0]&&1==m.childNodes[0].nodeType;)m=
m.childNodes[0];return m}function r(m,q){"string"==typeof m?(m=c.toDom(m,q&&q.ownerDocument),11==m.nodeType&&(m=m.childNodes[0])):1==m.nodeType&&m.parentNode&&(m=m.cloneNode(!1));return m}var f=D.NodeList;B.extend(f,{_placeMultiple:function(m,q){for(var l="string"==typeof m||m.nodeType?D(m):m,b=[],g=0;g<l.length;g++)for(var e=l[g],d=this.length,h=d-1,t;t=this[h];h--)0<g&&(t=this._cloneNode(t),b.unshift(t)),h==d-1?c.place(t,e,q):e.parentNode.insertBefore(t,e),e=t;b.length&&(b.unshift(0),b.unshift(this.length-
1),Array.prototype.splice.apply(this,b));return this},innerHTML:function(m){return arguments.length?this.addContent(m,"only"):this[0].innerHTML},text:function(m){if(arguments.length){for(var q=0,l;l=this[q];q++)1==l.nodeType&&k.set(l,"textContent",m);return this}var b="";for(q=0;l=this[q];q++)b+=k.get(l,"textContent");return b},val:function(m){if(arguments.length){for(var q=B.isArray(m),l=0,b;b=this[l];l++){var g=b.nodeName.toUpperCase(),e=b.type,d=q?m[l]:m;if("SELECT"==g)for(g=b.options,e=0;e<g.length;e++){var h=
g[e];h.selected=b.multiple?-1!=a.indexOf(m,h.value):h.value==d}else"checkbox"==e||"radio"==e?b.checked=b.value==d:b.value=d}return this}if((b=this[0])&&1==b.nodeType){m=b.value||"";if("SELECT"==b.nodeName.toUpperCase()&&b.multiple){m=[];g=b.options;for(e=0;e<g.length;e++)h=g[e],h.selected&&m.push(h.value);m.length||(m=null)}return m}},append:function(m){return this.addContent(m,"last")},appendTo:function(m){return this._placeMultiple(m,"last")},prepend:function(m){return this.addContent(m,"first")},
prependTo:function(m){return this._placeMultiple(m,"first")},after:function(m){return this.addContent(m,"after")},insertAfter:function(m){return this._placeMultiple(m,"after")},before:function(m){return this.addContent(m,"before")},insertBefore:function(m){return this._placeMultiple(m,"before")},remove:f.prototype.orphan,wrap:function(m){if(this[0]){m=r(m,this[0]);for(var q=0,l;l=this[q];q++){var b=this._cloneNode(m);l.parentNode&&l.parentNode.replaceChild(b,l);n(b).appendChild(l)}}return this},wrapAll:function(m){if(this[0]){m=
r(m,this[0]);this[0].parentNode.replaceChild(m,this[0]);m=n(m);for(var q=0,l;l=this[q];q++)m.appendChild(l)}return this},wrapInner:function(m){if(this[0]){m=r(m,this[0]);for(var q=0;q<this.length;q++){var l=this._cloneNode(m);this._wrap(B._toArray(this[q].childNodes),null,this._NodeListCtor).wrapAll(l)}}return this},replaceWith:function(m){m=this._normalize(m,this[0]);for(var q=0,l;l=this[q];q++)this._place(m,l,"before",0<q),l.parentNode.removeChild(l);return this},replaceAll:function(m){m=D(m);for(var q=
this._normalize(this,this[0]),l=0,b;b=m[l];l++)this._place(q,b,"before",0<l),b.parentNode.removeChild(b);return this},clone:function(){for(var m=[],q=0;q<this.length;q++)m.push(this._cloneNode(this[q]));return this._wrap(m,this,this._NodeListCtor)}});f.prototype.html||(f.prototype.html=f.prototype.innerHTML);return f})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,B,a){B={_dfdCanceller:function(c){c.canceled=!0;var k=c._pendingDfd;if(!c.isFulfilled()&&
k&&!k.isFulfilled()){k.cancel();var n=k.results&&k.results[1]}c._pendingDfd=null;return n},_fixDfd:function(c){var k=c.then;c.then=function(n,r,f){if(n){var m=n;n=function(q){return q&&q._argsArray?m.apply(null,q):m(q)}}return k.call(this,n,r,f)};return c},_resDfd:function(c,k,n){var r=k.length;1===r?n?c.errback(k[0]):c.callback(k[0]):1<r?(k._argsArray=!0,c.callback(k)):c.callback()}};D.mixin(a,B);return B})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred","dojo/_base/url","../config",
"../urlUtils"],function(D,B,a,c){function k(r){r=new B(r);return r.scheme+"://"+r.authority}var n=a.defaults.io;return{registerNoCorsDomains:function(r){n.crossOriginNoCorsDomains||(n.crossOriginNoCorsDomains={});for(var f=n.crossOriginNoCorsDomains,m=0;m<r.length;m++){var q=r[m];q=q.toLowerCase();/^https?:\/\//.test(q)?f[k(q)]=0:(f[k("http://"+q)]=0,f[k("https://"+q)]=0)}},isNoCorsRequestRequired:function(r){var f=n.crossOriginNoCorsDomains;return f?(r=k(r),r=r.toLowerCase(),!c.hasSameOrigin(r,window.location.origin)&&
f[r]<Date.now()-36E5):!1},sendNoCorsRequest:function(r,f){var m=new D,q=n.crossOriginNoCorsDomains;q&&(q[k(r).toLowerCase()]=Date.now());q=c.urlToObject(r);r=q.path;if(q.query&&"json"===q.query.f||f&&"json"===f.f)r+="?f\x3djson";fetch(r,{mode:"no-cors",credentials:"include"}).then(m.resolve,m.resolve);return m}}})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(D,B,a,c,k){B={_addFrameInfo:function(n,r){var f,m,q=2*r.origin[1],
l=r.origin[0],b=n.origin.x,g=n.width,e;D.forEach(n.lods,function(d){f=Math.round(q/d.resolution);m=Math.ceil(f/g);e=Math.floor((l-b)/(g*d.resolution));d._frameInfo||(d._frameInfo=[m,e,e+m-1,f])})},getContainingTileCoords:function(n,r,f){var m=n.origin;f=f.resolution;return{row:Math.floor((m.y-r.y)/(n.height*f)),col:Math.floor((r.x-m.x)/(n.width*f))}},getCandidateTileInfo:function(n,r,f){var m=n.width;var q=n.height,l=f.xmax-f.xmin,b=f.ymax-f.ymin,g=n.__tileInfo===r,e=g?n.getMinZoom():-1;g=g?n.getMaxZoom():
-1;var d=-1,h=r.lods,t=Math.abs,z;g=-1<g?g:h.length-1;for(e=-1<e?e:0;e<=g;e++)if(z=h[e]){var v=l>b?t(b-q*z.resolution):t(l-m*z.resolution);if(0>d||v<=d){var y=z;d=v}else break}m=y;y=m.resolution;q=(f.xmin+f.xmax)/2;l=(f.ymin+f.ymax)/2;b=n.width/2*y;y*=n.height/2;q=new k(q-b,l-y,q+b,l+y,f.spatialReference);f=new c(q.xmin,q.ymax,f.spatialReference);g=m.resolution;b=r.width;l=r.height;r=r.origin;n=n.__visibleDelta;y=Math.floor;h=b*g;t=l*g;g=y((r.y-f.y)/t);d=y((f.x-r.x)/h);e=r.y-g*t;r=y(Math.abs((f.x-
(r.x+d*h))*b/h))+n.x;n=y(Math.abs((f.y-e)*l/t))+n.y;return{tile:{point:f,coords:{row:g,col:d},offsets:{x:r,y:n}},lod:m,extent:q}},getTileExtent:function(n,r,f,m){var q=n.origin;r=n.lods[r].resolution;var l=n.width,b=n.height;return new k(m*r*l+q.x,q.y-(f+1)*r*b,(m+1)*r*l+q.x,q.y-f*r*b,n.spatialReference)}};return a.TileUtils=B})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(D,B,
a,c,k,n,r,f){function m(e,d){89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999);var h=.017453292519943*d;return[111319.49079327169*e,3189068.5*Math.log((1+Math.sin(h))/(1-Math.sin(h)))]}function q(e,d,h){e=e/6378137*57.29577951308232;return h?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)))]}function l(){}function b(){}function g(e){var d=e._json;e._unquantizeFn?(d=
e._unquantizeFn({x:d.x,y:d.y}),e._xVal=d.x,e._yVal=d.y,e._unquantizeFn=null):(e._xVal=d.x,e._yVal=d.y);e._json=null}a={type:"point",x:0,y:0};D=D(r,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(e,d,h){B.isArray(e)?(this.x=e[0],this.y=e[1],this.spatialReference=d):k.isObject(e)?(k.mixin(this,e),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):
(this.x=e,this.y=d,this.spatialReference=h);this.verifySR()},offset:function(e,d){return new this.constructor(this.x+e,this.y+d,this.spatialReference)},setX:function(e){this.x=e;this.clearCache();return this},setY:function(e){this.y=e;this.clearCache();return this},setLongitude:function(e){var d=this.spatialReference;d&&(d._isWebMercator()?this.setX(m(e,this.y)[0]):4326===d.wkid&&this.setX(e));return this},setLatitude:function(e){var d=this.spatialReference;d&&(d._isWebMercator()?this.setY(m(this.x,
e)[1]):4326===d.wkid&&this.setY(e));return this},getLongitude:function(){var e=this.spatialReference;if(e)if(e._isWebMercator())var d=q(this.x,this.y)[0];else 4326===e.wkid&&(d=this.x);return d},getLatitude:function(){var e=this.spatialReference;if(e)if(e._isWebMercator())var d=q(this.x,this.y)[1];else 4326===e.wkid&&(d=this.y);return d},update:function(e,d){this.x=e;this.y=d;this.clearCache();return this},normalize:function(){var e=this.x,d=this.spatialReference;if(d){var h=d._getInfo();h&&(e=this._normalizeX(e,
h))}return new this.constructor(e,this.y,d)},_normalizeX:function(e,d){var h=d.valid[0],t=d.valid[1],z=2*t;e>t?(h=Math.ceil(Math.abs(e-t)/z),e-=h*z):e<h&&(h=Math.ceil(Math.abs(e-h)/z),e+=h*z);return e},toJson:function(){var e={x:this.x,y:this.y},d=this.spatialReference;d&&(e.spatialReference=d.toJson());return e}});l.prototype=D.prototype;b.prototype=new l;Object.defineProperty(b.prototype,"x",{get:function(){this._json&&g(this);return this._xVal},set:function(e){this._xVal=e}});Object.defineProperty(b.prototype,
"y",{get:function(){this._json&&g(this);return this._yVal},set:function(e){this._yVal=e}});b.prototype.setupLazyUnquantization=function(e,d){this._unquantizeFn=e;this._json=d};D.simpleConstructor=l;D.accessorConstructor=b;D.lngLatToXY=m;D.xyToLngLat=q;D.defaultProps=a;D.metersPerDegree=6378137*Math.PI/180;B.setObject("geometry.Point",D,c);c.geometry.defaultPoint=a;return D})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(D,
B,a,c,k){function n(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var r=[-2.0037508342787E7,2.0037508342787E7];D=D(null,{declaredClass:"esri.SpatialReference",constructor:function(f){f&&(k.isObject(f)?k.mixin(this,f):k.isString(f)?this.wkt=f:this.wkid=f)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:r,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:r,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:r,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:r,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==B.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==B.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(f){var m=!1;f&&(m=this.isWebMercator()&&4326===f.wkid||f.isWebMercator()&&4326===this.wkid);return m},isWebMercator:function(){return this._isWebMercator()},equals:function(f){var m=!1;f&&(this===f&&
(m=!0),this.wkid||f.wkid?m=this.wkid===f.wkid||this.isWebMercator()&&f.isWebMercator()||this.wkid===f.latestWkid||f.wkid===this.latestWkid:this.wkt&&f.wkt&&(m=this.wkt.toUpperCase()===f.wkt.toUpperCase()));return m},toJson:function(){var f=null;null!=this.wkid?f={wkid:this.wkid}:null!=this.wkt&&(f={wkt:this.wkt});f&&null!=this.latestWkid&&(f.latestWkid=this.latestWkid);return f}});n.prototype=D.prototype;D.simpleConstructor=n;return c.SpatialReference=D})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(n){this.spatialReference=n;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new k(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(n){return this.cache&&this.cache[n]},setCacheValue:function(n,r){this.cache||
(this.cache={});this.cache[n]=r}});B.setObject("geometry.Geometry",D,c);return D})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(D,B,a,c,k){function n(r){var f=!1;r&&(r.ics||r.icsid)&&(f=!0);return f}c={isICS:n,createSpatialReference:function(r){var f=null;r&&(f=n(r)?new B(r):new D(r));return f}};k.mixin(a,c);return c})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.ImageSpatialReference",constructor:function(r){r&&B.isObject(r)&&B.mixin(this,r)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(r){var f=!1;if(r)if(this.icsid&&r.icsid){if(f=this.icsid===r.icsid,this.icsns||r.icsns)f=f&&this.icsns===r.icsns}else this.ics&&r.ics&&(f=this.ics===r.ics);return f},toJson:function(r){var f=null,m=k.isDefined;r=m(r)?r:!0;m(this.icsid)?(f={icsid:this.icsid},
m(this.icsns)&&(f.icsns=this.icsns)):m(this.ics)&&(f={ics:this.ics});m(this.url)&&m(f)&&r&&(f.url=this.url);return f}});return c.ImageSpatialReference=D})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){function g(){}c={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var e=D(f,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(d,h,t,z,v){n.isObject(d)?(n.mixin(this,d),this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference))):this.update(d,h,t,z,v);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new m((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new m(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new m(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new m(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new m(this.xmax,this.ymin,this.spatialReference)},centerAt:function(d){var h=this.getCenter(),t=d.x-h.x;d=d.y-h.y;return new e(this.xmin+t,this.ymin+d,this.xmax+t,this.ymax+d,this.spatialReference)},update:function(d,h,t,z,v){this.xmin=d;this.ymin=h;this.xmax=t;this.ymax=
z;this.spatialReference=v;this.clearCache();return this},offset:function(d,h){return new e(this.xmin+d,this.ymin+h,this.xmax+d,this.ymax+h,this.spatialReference)},expand:function(d){var h=(1-d)/2;d=this.getWidth()*h;h*=this.getHeight();return new e(this.xmin+d,this.ymin+h,this.xmax-d,this.ymax-h,this.spatialReference)},intersects:function(d){if(!d)return!1;var h=d.type,t=this.spatialReference,z=d.spatialReference;t&&z&&!t.equals(z)&&t._canProject(z)&&(d=t.isWebMercator()?q.geographicToWebMercator(d):
q.webMercatorToGeographic(d,!0));switch(h){case "point":return this.contains(d);case "multipoint":return this._intersectsMultipoint(d);case "extent":return this._intersectsExtent(d);case "polygon":return this._intersectsPolygon(d);case "polyline":return this._intersectsPolyline(d)}},normalize:function(){var d=this._normalize(!1,!0);a.isArray(d)||(d=[d]);return d},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var d=this.spatialReference,h=d&&d._getInfo(),t=[],z=0;if(h&&
this._isOutOfBounds(h)){var v=this;z=v.xmin;var y=v.ymin,C=v.ymax,F=h.valid[0],x=h.valid[1];v.getWidth()>2*x&&(v=v.getCenter(),v=new e(v.x-x,y,v.x+x,C,new r(d.toJson())));z=v.xmin-z;var u=this._normalizeX(v.xmin,h);h=this._normalizeX(v.xmax,h);u.frameId===h.frameId?t.push(new e(u.x,y,h.x,C,new r(d.toJson()))):t.push(new e(u.x,y,x,C,new r(d.toJson())),new e(F,y,h.x,C,new r(d.toJson())))}else t.push(this.getExtent());return{extents:t,marginLeft:z}},_intersectsMultipoint:function(d){var h=d.points.length,
t;for(t=0;t<h;t++)if(this.contains(d.getPoint(t)))return!0;return!1},_intersectsExtent:function(d){var h,t,z=!1;if(this.xmin<=d.xmin){var v=d.xmin;this.xmax<v?z=!0:h=Math.min(this.xmax,d.xmax)-v}else v=this.xmin,d.xmax<v?z=!0:h=Math.min(this.xmax,d.xmax)-v;if(this.ymin<=d.ymin){var y=d.ymin;this.ymax<y?z=!0:t=Math.min(this.ymax,d.ymax)-y}else y=this.ymin,d.ymax<y?z=!0:t=Math.min(this.ymax,d.ymax)-y;return z?null:new e(v,y,v+h,y+t,this.spatialReference)},_intersectsPolygon:function(d){var h=[this.xmin,
this.ymax],t=[this.xmax,this.ymax],z=[this.xmin,this.ymin],v=[this.xmax,this.ymin],y=[h,t,z,v];h=[[z,h],[h,t],[t,v],[v,z]];z=d.rings;v=z.length;var C=new m(0,0,this.spatialReference);var F=y.length;for(t=0;t<F;t++)if(C.update(y[t][0],y[t][1]),d.contains(C))return!0;C.setSpatialReference(d.spatialReference);for(t=0;t<v;t++)if(y=z[t],F=y.length){var x=y[0];C.update(x[0],x[1]);if(this.contains(C))return!0;for(d=1;d<F;d++){var u=y[d];C.update(u[0],u[1]);if(this.contains(C)||this._intersectsLine([x,u],
h))return!0;x=u}}return!1},_intersectsPolyline:function(d){var h=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],t,z=d.paths,v=z.length,y,C=new m(0,0,d.spatialReference);for(d=0;d<v;d++){var F=z[d];if(y=F.length){var x=F[0];C.update(x[0],x[1]);if(this.contains(C))return!0;for(t=1;t<y;t++){var u=F[t];C.update(u[0],u[1]);if(this.contains(C)||this._intersectsLine([x,
u],h))return!0;x=u}}}return!1},_intersectsLine:function(d,h){var t=l._getLineIntersection2,z,v=h.length;for(z=0;z<v;z++)if(t(d,h[z]))return!0;return!1},contains:function(d){if(!d)return!1;var h=d.type;if("point"===h){var t=this.spatialReference,z=d.spatialReference;h=d.x;d=d.y;t&&z&&!t.equals(z)&&t._canProject(z)&&(d=t.isWebMercator()?m.lngLatToXY(h,d):m.xyToLngLat(h,d,!0),h=d[0],d=d[1]);return h>=this.xmin&&h<=this.xmax&&d>=this.ymin&&d<=this.ymax}return"extent"===h?this._containsExtent(d):!1},_containsExtent:function(d){var h=
d.xmin,t=d.ymin,z=d.xmax,v=d.ymax,y=d.spatialReference;d=new m(h,t,y);h=new m(h,v,y);v=new m(z,v,y);t=new m(z,t,y);return this.contains(d)&&this.contains(h)&&this.contains(v)&&this.contains(t)?!0:!1},union:function(d){return new e(Math.min(this.xmin,d.xmin),Math.min(this.ymin,d.ymin),Math.max(this.xmax,d.xmax),Math.max(this.ymax,d.ymax),this.spatialReference)},getExtent:function(){var d=this.spatialReference;return new e(this.xmin,this.ymin,this.xmax,this.ymax,d&&new r(d.toJson()))},_shiftCM:function(d){var h=
this.getCacheValue("_shifted");if(!h){h=new e(this.toJson());var t=h.spatialReference;if(d=d||t._getInfo()){var z=this._getCM(d);if(z){var v=t._isWebMercator()?q.webMercatorToGeographic(z):z;h.xmin-=z.x;h.xmax-=z.x;t._isWebMercator()||(v.x=this._normalizeX(v.x,d).x);h.setSpatialReference(new r(n.substitute({Central_Meridian:v.x},4326===t.wkid?d.altTemplate:d.wkTemplate)))}}this.setCacheValue("_shifted",h)}return h},_getCM:function(d){var h;this._isOutOfBounds(d)&&(h=this.getCenter());return h},_isOutOfBounds:function(d){var h=
d.valid[0];d=d.valid[1];var t=this.xmin,z=this.xmax;return!(t>=h&&t<=d&&z>=h&&z<=d)},_normalize:function(d,h,t){var z=new e(this.toJson()),v=z.spatialReference;if(v&&(t=t||v._getInfo())){var y=B.map(this._getParts(t),function(C){return C.extent});return 2<y.length?d?this._shiftCM(t):z.update(t.valid[0],z.ymin,t.valid[1],z.ymax,v):2===y.length?d?this._shiftCM(t):h?y:{rings:B.map(y,function(C){return[[C.xmin,C.ymin],[C.xmin,C.ymax],[C.xmax,C.ymax],[C.xmax,C.ymin],[C.xmin,C.ymin]]}),spatialReference:v}:
y[0]||z}return z},_getParts:function(d){var h=this.getCacheValue("_parts");if(!h){h=[];var t=this.xmin,z=this.xmax,v=this.ymin,y=this.ymax,C=this.spatialReference,F=this.getWidth(),x=t,u=z,w=0,A=0;d=d||C._getInfo();var E=d.valid[0];var G=d.valid[1];A=this._normalizeX(t,d);t=A.x;w=A.frameId;A=this._normalizeX(z,d);z=A.x;A=A.frameId;d=t===z&&0<F;if(F>2*G){F=new e(x<u?t:z,v,G,y,C);t=new e(E,v,x<u?z:t,y,C);G=new e(0,v,G,y,C);v=new e(E,v,0,y,C);C=[];E=[];F.contains(G)&&C.push(w);F.contains(v)&&E.push(w);
t.contains(G)&&C.push(A);t.contains(v)&&E.push(A);for(y=w+1;y<A;y++)C.push(y),E.push(y);h.push({extent:F,frameIds:[w]},{extent:t,frameIds:[A]},{extent:G,frameIds:C},{extent:v,frameIds:E})}else t>z||d?h.push({extent:new e(t,v,G,y,C),frameIds:[w]},{extent:new e(E,v,z,y,C),frameIds:[A]}):h.push({extent:new e(t,v,z,y,C),frameIds:[w]});this.setCacheValue("_parts",h)}return h},_normalizeX:function(d,h){var t=0,z=h.valid[0],v=h.valid[1],y=2*v;d>v?(t=Math.ceil(Math.abs(d-v)/y),d-=t*y):d<z&&(t=Math.ceil(Math.abs(d-
z)/y),d+=t*y,t=-t);return{x:d,frameId:t}},toJson:function(){var d={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},h=this.spatialReference;h&&(d.spatialReference=h.toJson());return d}});g.prototype=e.prototype;e.simpleConstructor=g;e.defaultProps=c;a.setObject("geometry.Extent",e,k);k.geometry.defaultExtent=c;return e})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(D,B,a,c,k,n){function r(m,
q,l,b){if("point"===m.type){var g=q(m.x,m.y,b);return new m.constructor(g[0],g[1],new k(l))}if("extent"===m.type){g=q(m.xmin,m.ymin,b);var e=q(m.xmax,m.ymax,b);return new m.constructor(g[0],g[1],e[0],e[1],new k(l))}if("polyline"===m.type||"polygon"===m.type){g="polyline"===m.type;var d=[],h;D.forEach(g?m.paths:m.rings,function(z){d.push(h=[]);D.forEach(z,function(v){h.push(q(v[0],v[1],b))})});return g?new m.constructor({paths:d,spatialReference:new k(l)}):new m.constructor({rings:d,spatialReference:new k(l)})}if("multipoint"===
m.type){var t=[];D.forEach(m.points,function(z){t.push(q(z[0],z[1],b))});return new m.constructor({points:t,spatialReference:new k(l)})}}function f(m,q){var l=m&&(null!=m.wkid?m:m.spatialReference),b=q&&(null!=q.wkid?q:q.spatialReference);return l&&b?b.equals(l)?!0:b._canProject(l):!1}a={canProject:f,project:function(m,q){var l=m&&m.spatialReference,b=q&&(null!=q.wkid?q:q.spatialReference);l&&b?l.equals(b)?m=new m.constructor(m.toJson()):f(l,b)?b.isWebMercator()?m=r(m,n.lngLatToXY,{wkid:102100}):
4326===b.wkid&&(m=r(m,n.xyToLngLat,{wkid:4326})):m=null:m=null;return m},lngLatToXY:n.lngLatToXY,xyToLngLat:n.xyToLngLat,metersPerDegree:n.metersPerDegree,geographicToWebMercator:function(m){return r(m,n.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(m,q){return r(m,n.xyToLngLat,{wkid:4326},q)}};B.mixin(B.getObject("geometry",!0,c),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,B,a,c){function k(f,m,q){return f instanceof
c?new c(f.x+q*(m.x-f.x),f.y+q*(m.y-f.y)):[f[0]+q*(m[0]-f[0]),f[1]+q*(m[1]-f[1])]}function n(f,m){return 1E-8>Math.abs(f-m)}function r(f,m,q,l){var b=n(f[0],m[0])?1E10:(f[1]-m[1])/(f[0]-m[0]),g=n(q[0],l[0])?1E10:(q[1]-l[1])/(q[0]-l[0]),e=f[1]-b*f[0],d=q[1]-g*q[0];if(n(b,g)){if(n(e,d)){if(n(f[0],m[0]))if(Math.min(f[1],m[1])<Math.max(q[1],l[1])||Math.max(f[1],m[1])>Math.min(q[1],l[1])){f=(f[1]+m[1]+q[1]+l[1]-Math.min(f[1],m[1],q[1],l[1])-Math.max(f[1],m[1],q[1],l[1]))/2;var h=(f-e)/b}else return null;
else if(Math.min(f[0],m[0])<Math.max(q[0],l[0])||Math.max(f[0],m[0])>Math.min(q[0],l[0]))h=(f[0]+m[0]+q[0]+l[0]-Math.min(f[0],m[0],q[0],l[0])-Math.max(f[0],m[0],q[0],l[0]))/2,f=b*h+e;else return null;return[h,f]}return null}n(b,1E10)?(h=f[0],f=g*h+d):n(g,1E10)?(h=q[0],f=b*h+e):(h=-(e-d)/(b-g),f=f[1]===m[1]?f[1]:q[1]===l[1]?q[1]:b*h+e);return[h,f]}B={getLength:function(f,m){var q=m.x-f.x,l=m.y-f.y;return Math.sqrt(q*q+l*l)},_getLength:function(f,m){var q=m[0]-f[0],l=m[1]-f[1];return Math.sqrt(q*q+
l*l)},getPointOnLine:k,getMidpoint:function(f,m){return k(f,m,.5)},_equals:n,_getLineIntersection:r,getLineIntersection:function(f,m,q,l,b){(f=r([f.x,f.y],[m.x,m.y],[q.x,q.y],[l.x,l.y]))&&(f=new c(f[0],f[1],b));return f},_getLineIntersection2:function(f,m){var q=f[0],l=f[1],b=m[0],g=m[1],e=q[0];q=q[1];var d=l[0];l=l[1];var h=b[0],t=b[1];b=g[0]-h;h=e-h;var z=d-e;g=g[1]-t;t=q-t;var v=l-q,y=g*z-b*v;if(0===y)return!1;b=(b*t-g*h)/y;h=(z*t-v*h)/y;return 0<=b&&1>=b&&0<=h&&1>=h?[e+b*(d-e),q+b*(l-q)]:!1},
_pointLineDistance:function(f,m){var q=m[0],l=m[1],b=q[0],g=q[1];q=f[0];var e=f[1],d=l[0]-b,h=l[1]-g,t=q-b,z=e-g;l=Math.sqrt;var v=Math.pow,y=l(v(d,2)+v(h,2));t=(t*d+z*h)/(y*y);g+=t*h;return l(v(q-(b+t*d),2)+v(e-g,2))}};D.mixin(D.getObject("geometry",!0,a),B);return B})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(D,B,a,c,k){a={graphicsExtent:function(n){if(!n||!n.length)return null;var r=null,f,m=n.length;for(f=
0;f<m;f++){var q=n[f].geometry;if(q){var l=q.getExtent();l||"point"!==q.type||null==q.x||null==q.y||(l=new k(q.x,q.y,q.x,q.y,q.spatialReference));l&&(r=r?r.union(l):l)}}return 0>r.getWidth()&&0>r.getHeight()?null:r},getGeometries:function(n){return B.map(n,function(r){return r.geometry})},_encodeGraphics:function(n,r){return B.map(n,function(f,m){var q=f.toJson(),l={};if(q.geometry){var b=r&&r[m];l.geometry=b&&b.toJson()||q.geometry}q.attributes&&(l.attributes=q.attributes);return l})}};D.mixin(c,
a);return a})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(D,B,a,c,k){c={_serializeLayerDefinitions:function(n,r){var f=[],m=/[:;]/;if(n&&(B.forEach(n,function(l,b){l&&(f.push([b,l]),!r&&m.test(l)&&(r=!0))}),0<f.length)){if(r){var q={};B.forEach(f,function(l){q[l[0]]=l[1]});q=a.toJson(q)}else q=[],B.forEach(f,function(l){q.push(l[0]+":"+l[1])}),q=q.join(";");return q}return null},_serializeTimeOptions:function(n,r){if(n){var f=
[];B.forEach(n,function(m,q){if(m){var l=m.toJson();r&&-1!==B.indexOf(r,q)&&(l.useTime=!1);f.push('"'+q+'":'+a.toJson(l))}});if(f.length)return"{"+f.join(",")+"}"}},_getVisibleLayers:function(n,r){var f=[],m;if(!n)return f;if(r)for(f=r.concat(),m=0;m<n.length;m++){var q=n[m];var l=B.indexOf(n,q.id);q.subLayerIds&&-1<l&&(f.splice(l,1),f=f.concat(q.subLayerIds))}else f=this._getDefaultVisibleLayers(n);return f},_getDefaultVisibleLayers:function(n){var r=[],f;if(!n)return r;for(f=0;f<n.length;f++)0<=
n[f].parentLayerId&&-1===B.indexOf(r,n[f].parentLayerId)&&B.some(n,function(m){return m.id===n[f].parentLayerId})||n[f].defaultVisibility&&r.push(n[f].id);return r},_getLayersForScale:function(n,r){var f=[];if(0<n&&r){var m;for(m=0;m<r.length;m++)if(!(0<=r[m].parentLayerId&&-1===B.indexOf(f,r[m].parentLayerId)&&B.some(r,function(g){return g.id===r[m].parentLayerId}))&&0<=r[m].id){var q=!0,l=r[m].maxScale,b=r[m].minScale;if(0<l||0<b)0<l&&0<b?q=l<=n&&n<=b:0<l?q=l<=n:0<b&&(q=n<=b);q&&f.push(r[m].id)}}return f}};
D.mixin(k,c);return c})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){function g(u,w){return Math.ceil((u-w)/(2*w))}function e(u,w){var A=u.paths||u.rings,E,G,H=A.length;for(E=0;E<H;E++){var K=A[E].length;for(G=0;G<K;G++){var I=u.getPoint(E,G);u.setPoint(E,G,I.offset(w,0))}}return u}function d(u,
w){if(!(u instanceof m||u instanceof q))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var A=u instanceof m,E=[],G;D.forEach(A?u.paths:u.rings,function(H){E.push(G=[]);G.push([H[0][0],H[0][1]]);var K,I;for(K=0;K<H.length-1;K++){var J=H[K][0];var L=H[K][1];var M=H[K+1][0];var N=H[K+1][1];var O=Math.sqrt((M-J)*(M-J)+(N-L)*(N-L));var Y=(N-L)/O;var ba=(M-J)/O;var ha=O/w;if(1<ha){for(I=1;I<=ha-1;I++){var U=I*w;var X=ba*U+J;U=Y*U+L;G.push([X,U])}I=(O+Math.floor(ha-
1)*w)/2;X=ba*I+J;U=Y*I+L;G.push([X,U])}G.push([M,N])}});return A?new m({paths:E,spatialReference:u.spatialReference}):new q({rings:E,spatialReference:u.spatialReference})}function h(u,w,A){w&&(u=d(u,1E6),u=l.webMercatorToGeographic(u,!0));A&&(u=e(u,A));return u}function t(u,w,A){var E=u.x||u[0];if(E>w){var G=g(E,w);u.x?u=u.offset(-2*G*w,0):u[0]=E+-2*G*w}else E<A&&(G=g(E,A),u.x?u=u.offset(-2*G*A,0):u[0]=E+-2*G*A);return u}function z(u,w){var A=-1;D.forEach(w.cutIndexes,function(E,G){var H=w.geometries[G];
D.forEach(H.rings||H.paths,function(K,I){D.some(K,function(J){if(!(180>J[0])){J=0;var L,M=K.length;for(L=0;L<M;L++){var N=K[L][0];J=N>J?N:J}J=Number(J.toFixed(9));J=-360*g(J,180);M=K.length;for(L=0;L<M;L++)N=H.getPoint(I,L),H.setPoint(I,L,N.offset(J,0))}return!0})});E===A?H.rings?D.forEach(H.rings,function(K){u[E]=u[E].addRing(K)}):D.forEach(H.paths,function(K){u[E]=u[E].addPath(K)}):(A=E,u[E]=H)});return u}function v(u,w,A,E){var G=new a;G.addCallbacks(A,E);w=w||n.defaults.geometryService;var H=
[],K=[],I,J,L,M,N,O,Y,ba,ha=0;D.forEach(u,function(P){if(P)if(I||(I=P.spatialReference,J=I._getInfo(),M=(L=I._isWebMercator())?2.0037508342788905E7:180,N=L?-2.0037508342788905E7:-180,O=L?102100:4326,Y=new m({paths:[[[M,N],[M,M]]],spatialReference:{wkid:O}}),ba=new m({paths:[[[N,N],[N,M]]],spatialReference:{wkid:O}})),J){var da=b.fromJson(P.toJson()),ia=P.getExtent();"point"===P.type?H.push(t(da,M,N)):"multipoint"===P.type?(da.points=D.map(da.points,function(xa){return t(xa,M,N)}),H.push(da)):"extent"===
P.type?(da=ia._normalize(null,null,J),H.push(da.rings?new q(da):da)):ia?(P=2*g(ia.xmin,N)*M,da=0===P?da:e(da,P),ia=ia.offset(P,0),ia.intersects(Y)&&ia.xmax!==M?(ha=ia.xmax>ha?ia.xmax:ha,da=h(da,L),K.push(da),H.push("cut")):ia.intersects(ba)&&ia.xmin!==N?(ha=2*ia.xmax*M>ha?2*ia.xmax*M:ha,da=h(da,L,360),K.push(da),H.push("cut")):H.push(da)):H.push(da)}else H.push(P);else H.push(P)});A=new m;E=g(ha,M);for(var U=-90,X=E;0<E;){var Z=-180+360*E;A.addPath([[Z,U],[Z,-1*U]]);U*=-1;E--}0<K.length&&0<X?w?w.cut(K,
A,function(P){K=z(K,P);var da=[];D.forEach(H,function(ia,xa){if("cut"===ia){var Ca=K.shift();u[xa].rings&&1<u[xa].rings.length&&Ca.rings.length>=u[xa].rings.length?(H[xa]="simplify",da.push(Ca)):H[xa]=!0===L?l.geographicToWebMercator(Ca):Ca}});0<da.length?w.simplify(da,function(ia){D.forEach(H,function(xa,Ca){"simplify"===xa&&(H[Ca]=!0===L?l.geographicToWebMercator(ia.shift()):ia.shift())});G.callback(H)},function(ia){G.errback(ia)}):G.callback(H)},function(P){G.errback(P)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):
(D.forEach(H,function(P,da){if("cut"===P){var ia=K.shift();H[da]=!0===L?l.geographicToWebMercator(ia):ia}}),G.callback(H));return G}function y(u,w,A,E){var G=!1,H;B.isObject(u)&&u&&(B.isArray(u)?u.length&&((H=u[0]&&u[0].declaredClass)&&-1!==H.indexOf("Graphic")?(u=D.map(u,function(K){return K.geometry}),G=u.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(G=!0)):(H=u.declaredClass)&&-1!==H.indexOf("FeatureSet")?(u=D.map(u.features||[],function(K){return K.geometry}),G=u.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&
(G=!0));G&&w.push({index:A,property:E,value:u})}function C(u,w){var A=[];D.forEach(w,function(E){var G=E.i,H=u[G];E=E.p;var K;if(B.isObject(H)&&H)if(E)if("*"===E[0])for(K in H)H.hasOwnProperty(K)&&y(H[K],A,G,K);else D.forEach(E,function(I){y(B.getObject(I,!1,H),A,G,I)});else y(H,A,G)});return A}function F(u,w){var A=0,E={};D.forEach(w,function(G){var H=G.index,K=G.property,I=G.value,J=I.length||1,L=u.slice(A,A+J);B.isArray(I)||(L=L[0]);A+=J;delete G.value;K?(E[H]=E[H]||{},E[H][K]=L):E[H]=L});return E}
function x(u){for(var w=[],A=0,E=0,G=Math.min,H=Math.max,K=0;K<u.length;K++){for(var I=u[K],J=null,L=0;L<I.length;L++)J=I[L],w.push(J),0===L?E=A=J[0]:(A=G(A,J[0]),E=H(E,J[0]));J&&w.push([(A+E)/2,0])}return w}c={normalizeCentralMeridian:v,_foldCutResults:z,_prepareGeometryForCut:h,_offsetMagnitude:g,_pointNormalization:t,_updatePolyGeometry:e,_straightLineDensify:d,_createWrappers:function(u){var w=B.isObject(u)?u.prototype:B.getObject(u+".prototype");D.forEach(w.__msigns,function(A){var E=w[A.n];
w[A.n]=function(){var G=this,H=[],K,I=new a(r._dfdCanceller);A.f&&r._fixDfd(I);for(K=0;K<A.c;K++)H[K]=arguments[K];var J={dfd:I};H.push(J);var L=[],M;if(G.normalization&&!G._isTable){var N=C(H,A.a);D.forEach(N,function(O){L=L.concat(O.value)});L.length&&(M=v(L))}M?(I._pendingDfd=M,M.addCallbacks(function(O){I.canceled||(J.assembly=F(O,N),I._pendingDfd=E.apply(G,H))},function(O){var Y=G.declaredClass;Y&&-1!==Y.indexOf("FeatureLayer")?G._resolve([O],null,H[A.e],I,!0):G._errorHandler(O,H[A.e],I)})):
I._pendingDfd=E.apply(G,H);return I}})},_disassemble:C,_addToBucket:y,_reassemble:F,getDenormalizedExtent:function(u){if(!u)return null;var w=u.getExtent();if(!w)return null;var A=u.spatialReference&&u.spatialReference._getInfo();if(!A)return w;var E=A.valid[0];A=A.valid[1];var G=2*A,H=w.getWidth(),K=w.xmax,I=w.xmin;if("extent"===u.type||0===H||H<=A||H>G||K<E||I>A)return w;switch(u.type){case "polygon":if(1<u.rings.length)var J=x(u.rings);else return w;break;case "polyline":if(1<u.paths.length)J=
x(u.paths);else return w;break;case "multipoint":J=u.points}u=Math.min;E=Math.max;G=new f(w.toJson());for(var L=0;L<J.length;L++){var M=J[L][0];0>M?(M+=A,I=E(M,I)):(M-=A,K=u(M,K))}G.xmin=K;G.xmax=I;return G.getWidth()<H?(G.xmin-=A,G.xmax-=A,G):w}};B.mixin(B.getObject("geometry",!0,k),c);return c})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,
B,a,c,k,n,r,f,m,q,l){function b(){}function g(){}c={type:"polyline",paths:null};D=D(f,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(e){this.paths=[];this._path=0;e&&(a.isArray(e)?this.paths=a.isArray(e[0][0])?e:[e]:e.paths?n.mixin(this,e):this.spatialReference=e,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(e){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(e[0])?B.forEach(e,this._addPointArr,this):B.forEach(e,this._addPoint,this);return this},_addPointArr:function(e){this.paths[this._path].push(e)},_addPoint:function(e){this.paths[this._path].push([e.x,e.y])},_insertPoints:function(e,d){this.clearCache();this._path=d;this.paths[this._path]||(this.paths[this._path]=[]);B.forEach(e,this._addPoint,this)},_validateInputs:function(e,d){return null!==e&&void 0!==e&&(0>e||e>=this.paths.length)||null!==d&&void 0!==e&&(0>d||d>=this.paths[e].length)?
!1:!0},getPoint:function(e,d){if(this._validateInputs(e,d))return new m(this.paths[e][d],this.spatialReference)},setPoint:function(e,d,h){if(this._validateInputs(e,d))return this.clearCache(),this.paths[e][d]=[h.x,h.y],this},insertPoint:function(e,d,h){if(this._validateInputs(e)&&null!=d&&0<=d&&d<=this.paths[e].length)return this.clearCache(),this.paths[e].splice(d,0,[h.x,h.y]),this},removePath:function(e){if(this._validateInputs(e,null)){this.clearCache();e=this.paths.splice(e,1)[0];var d,h=e.length,
t=this.spatialReference;for(d=0;d<h;d++)e[d]=new m(e[d],t);return e}},removePoint:function(e,d){if(this._validateInputs(e,d))return this.clearCache(),new m(this.paths[e].splice(d,1)[0],this.spatialReference)},getExtent:function(){var e=this.getCacheValue("_extent");var d=this.getCacheValue("_partwise");if(e)return e=new q(e),e._partwise=d,e;e=this.paths;var h=e.length;if(h&&e[0].length){var t,z,v,y,C=t=e[0][0][0],F=z=e[0][0][1],x=Math.min,u=Math.max,w=this.spatialReference;d=[];var A,E;for(v=0;v<
h;v++){var G=e[v];var H=A=G[0]&&G[0][0];var K=E=G[0]&&G[0][1];var I=G.length;for(y=0;y<I;y++){var J=G[y];var L=J[0];J=J[1];C=x(C,L);F=x(F,J);t=u(t,L);z=u(z,J);H=x(H,L);K=x(K,J);A=u(A,L);E=u(E,J)}d.push(new q({xmin:H,ymin:K,xmax:A,ymax:E,spatialReference:w?w.toJson():null}))}e={xmin:C,ymin:F,xmax:t,ymax:z,spatialReference:w?w.toJson():null};d=1<d.length?d:null;this.setCacheValue("_extent",e);this.setCacheValue("_partwise",d);e=new q(e);e._partwise=d;return e}},toJson:function(){var e={paths:n.clone3DArray(this.paths)},
d=this.spatialReference;d&&(e.spatialReference=d.toJson());return e}});b.prototype=D.prototype;g.prototype=new b;Object.defineProperty(g.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:n.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(e){this._pathsVal=e}});g.prototype.setupLazyUnquantization=function(e,d){this._unquantizeFn=e;this._pathsVal=d.paths};D.simpleConstructor=b;D.accessorConstructor=g;D.defaultProps=
c;a.setObject("geometry.Polyline",D,k);k.geometry.defaultPolyline=c;return D})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){function g(){}function e(){}c={type:"polygon",rings:null};var d=D(f,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(h){this.rings=[];this._ring=
0;h&&(a.isArray(h)?this.rings=a.isArray(h[0][0])?h:[h]:h.rings?n.mixin(this,h):this.spatialReference=h,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(h){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(h[0])?B.forEach(h,this._addPointArr,this):B.forEach(h,this._addPoint,this);return this},_addPointArr:function(h){this.rings[this._ring].push(h)},_addPoint:function(h){this.rings[this._ring].push([h.x,
h.y])},_insertPoints:function(h,t){this.clearCache();this._ring=t;this.rings[this._ring]||(this.rings[this._ring]=[]);B.forEach(h,this._addPoint,this)},_validateInputs:function(h,t){return null!==h&&void 0!==h&&(0>h||h>=this.rings.length)||null!==t&&void 0!==h&&(0>t||t>=this.rings[h].length)?!1:!0},getPoint:function(h,t){if(this._validateInputs(h,t))return new m(this.rings[h][t],this.spatialReference)},setPoint:function(h,t,z){if(this._validateInputs(h,t))return this.clearCache(),this.rings[h][t]=
[z.x,z.y],this},insertPoint:function(h,t,z){if(this._validateInputs(h)&&null!=t&&0<=t&&t<=this.rings[h].length)return this.clearCache(),this.rings[h].splice(t,0,[z.x,z.y]),this},removeRing:function(h){if(this._validateInputs(h,null)){this.clearCache();h=this.rings.splice(h,1)[0];var t,z=h.length,v=this.spatialReference;for(t=0;t<z;t++)h[t]=new m(h[t],v);return h}},removePoint:function(h,t){if(this._validateInputs(h,t))return this.clearCache(),new m(this.rings[h].splice(t,1)[0],this.spatialReference)},
getExtent:function(){var h=this.getCacheValue("_extent");var t=this.getCacheValue("_partwise");if(h)return h=new q(h),h._partwise=t,h;h=this.rings;var z=h.length;if(z&&h[0].length){var v,y,C,F,x=v=h[0][0][0],u=y=h[0][0][1],w=Math.min,A=Math.max,E=this.spatialReference;t=[];var G,H;for(C=0;C<z;C++){var K=h[C];var I=G=K[0]&&K[0][0];var J=H=K[0]&&K[0][1];var L=K.length;for(F=0;F<L;F++){var M=K[F];var N=M[0];M=M[1];x=w(x,N);u=w(u,M);v=A(v,N);y=A(y,M);I=w(I,N);J=w(J,M);G=A(G,N);H=A(H,M)}t.push(new q({xmin:I,
ymin:J,xmax:G,ymax:H,spatialReference:E?E.toJson():null}))}h={xmin:x,ymin:u,xmax:v,ymax:y,spatialReference:E?E.toJson():null};t=1<t.length?t:null;this.setCacheValue("_extent",h);this.setCacheValue("_partwise",t);h=new q(h);h._partwise=t;return h}},contains:function(h){var t=this.rings,z=!1,v,y,C,F=t.length;var x=this.spatialReference;var u=h.spatialReference;var w=h.x;h=h.y;x&&u&&!x.equals(u)&&x._canProject(u)&&(h=x.isWebMercator()?m.lngLatToXY(w,h):m.xyToLngLat(w,h,!0),w=h[0],h=h[1]);for(C=0;C<F;C++){x=
t[C];var A=x.length;for(y=v=0;y<A;y++){v++;v===A&&(v=0);u=x[y];var E=x[v];(u[1]<h&&E[1]>=h||E[1]<h&&u[1]>=h)&&u[0]+(h-u[1])/(E[1]-u[1])*(E[0]-u[0])<w&&(z=!z)}}return z},getCentroid:function(){var h=this.getCacheValue("_centroid");if(void 0!==h)return h;h=this.rings;var t,z,v=[],y,C,F=Infinity,x=-Infinity,u=Infinity,w=-Infinity;B.forEach(h,function(G){A=t=z=0;B.forEach(G,function(H,K){K<G.length-1&&(y=G[K+1],C=H[0]*y[1]-y[0]*H[1],A+=(H[0]+y[0])*C,t+=(H[1]+y[1])*C,z+=C,H[0]<F&&(F=H[0]),H[0]>x&&(x=H[0]),
H[1]<u&&(u=H[1]),H[1]>w&&(w=H[1]))});0<z&&(z*=-1);z&&v.push([A,t,z/2])});v.sort(function(G,H){return G[2]-H[2]});var A=t=void 0;if(v[0]){var E=6*v[0][2];A=v[0][0]/E;t=v[0][1]/E;if(A<F||A>x||t<u||t>w)A=t=void 0}if(void 0===A||void 0===t)if(h=h[0]&&h[0].length?this._getLineCentroid(h[0]):null)A=h.x,t=h.y;h=isNaN(A)||isNaN(t)?null:new m(A,t,this.spatialReference);this.setCacheValue("_centroid",h);return h},_getLineCentroid:function(h){var t=0,z=0,v=0,y={x:0,y:0},C={x:0,y:0},F,x=h.length,u;for(F=0;F<
x-1;F++){var w=h[F];var A=h[F+1];if(w&&A){y.x=w[0];y.y=w[1];C.x=A[0];C.y=A[1];var E=l.getLength(y,C);0<E&&(t+=E,w=l.getMidpoint(w,A),z+=E*w[0],v+=E*w[1])}}0<t?u={x:z/t,y:v/t}:h[0]&&(u={x:h[0][0],y:h[0][1]});return u},isClockwise:function(h){var t=0,z,v=h.length,y=a.isArray(h[0])?function(C,F){return C[0]*F[1]-F[0]*C[1]}:function(C,F){return C.x*F.y-F.x*C.y};for(z=0;z<v;z++)t+=y(h[z],h[(z+1)%v]);return 0>=t/2},isSelfIntersecting:function(h){h=h||this;var t,z,v,y,C,F=h.rings.length;for(v=0;v<F;v++){for(t=
0;t<h.rings[v].length-1;t++){var x=[[h.rings[v][t][0],h.rings[v][t][1]],[h.rings[v][t+1][0],h.rings[v][t+1][1]]];for(z=v+1;z<F;z++)for(y=0;y<h.rings[z].length-1;y++){var u=[[h.rings[z][y][0],h.rings[z][y][1]],[h.rings[z][y+1][0],h.rings[z][y+1][1]]];if((C=l._getLineIntersection2(x,u))&&!(C[0]===x[0][0]&&C[1]===x[0][1]||C[0]===u[0][0]&&C[1]===u[0][1]||C[0]===x[1][0]&&C[1]===x[1][1]||C[0]===u[1][0]&&C[1]===u[1][1]))return!0}}y=h.rings[v].length;if(!(4>=y))for(t=0;t<y-3;t++){var w=y-1;0===t&&(w=y-2);
x=[[h.rings[v][t][0],h.rings[v][t][1]],[h.rings[v][t+1][0],h.rings[v][t+1][1]]];for(z=t+2;z<w;z++)if(u=[[h.rings[v][z][0],h.rings[v][z][1]],[h.rings[v][z+1][0],h.rings[v][z+1][1]]],(C=l._getLineIntersection2(x,u))&&!(C[0]===x[0][0]&&C[1]===x[0][1]||C[0]===u[0][0]&&C[1]===u[0][1]||C[0]===x[1][0]&&C[1]===x[1][1]||C[0]===u[1][0]&&C[1]===u[1][1]))return!0}}return!1},toJson:function(){var h={rings:n.clone3DArray(this.rings)},t=this.spatialReference;t&&(h.spatialReference=t.toJson());return h}});g.prototype=
d.prototype;e.prototype=new g;Object.defineProperty(e.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:n.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(h){this._ringsVal=h}});e.prototype.setupLazyUnquantization=function(h,t){this._unquantizeFn=h;this._ringsVal=t.rings};d.simpleConstructor=g;d.accessorConstructor=e;d.defaultProps=c;d.createEllipse=function(h){var t=h.center.x,z=h.center.y,v=h.longAxis,
y=h.shortAxis,C=h.numberOfPoints,F=h.map,x;h=[];var u=2*Math.PI/C;for(x=0;x<C;x++){var w=Math.cos(x*u);var A=Math.sin(x*u);w=F.toMap({x:v*w+t,y:y*A+z});h.push(w)}h.push(h[0]);t=new d(F.spatialReference);t.addRing(h);return t};d.createCircle=function(h){return d.createEllipse({center:h.center,longAxis:h.r,shortAxis:h.r,numberOfPoints:h.numberOfPoints,map:h.map})};d.fromExtent=function(h){var t=h.normalize();h=h.spatialReference;return new d({rings:B.map(t,function(z){return[[z.xmin,z.ymin],[z.xmin,
z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]}),spatialReference:h?h.toJson():null})};a.setObject("geometry.Polygon",d,k);k.geometry.defaultPolygon=c;k.geometry.createEllipse=d.createEllipse;k.geometry.createCircle=d.createCircle;k.geometry.isClockwise=d.prototype.isClockwise;k.geometry.polygonSelfIntersecting=d.prototype.isSelfIntersecting;return d})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(D,B,a,c,k,n,r,f,m){function q(e,d,h){var t=e.rings||e.paths,z,v;var y=0;for(z=t.length;y<z;y++){var C=t[y];var F=0;for(v=C.length;F<v;F++){var x=C[F];if(0<F)u+=x[0],w+=x[1];else{var u=x[0];var w=x[1]}x[0]=d(u);x[1]=h(w)}}return e}var l={esriGeometryPoint:function(e,d,h){e.x=d(e.x);e.y=h(e.y);return e},esriGeometryPolyline:q,esriGeometryPolygon:q,esriGeometryEnvelope:function(e,d,h){e.xmin=d(e.xmin);e.ymin=h(e.ymin);e.xmax=d(e.xmax);e.ymax=h(e.ymax);return e},esriGeometryMultipoint:function(e,
d,h){var t=e.points,z;var v=0;for(z=t.length;v<z;v++){var y=t[v];if(0<v)C+=y[0],F+=y[1];else{var C=y[0];var F=y[1]}y[0]=d(C);y[1]=h(F)}return e}},b={esriGeometryPoint:function(e,d,h){e.x=d(e.x);e.y=h(e.y);return e}},g={createInstance:function(e,d){var h=new e;d&&c.mixin(h,d);return h},fromJson:function(e){if(void 0!==e.x&&void 0!==e.y)return new k(e);if(void 0!==e.paths)return new n(e);if(void 0!==e.rings)return new r(e);if(void 0!==e.points)return new f(e);if(void 0!==e.xmin&&void 0!==e.ymin&&void 0!==
e.xmax&&void 0!==e.ymax)return new m(e)},getJsonType:function(e){return e instanceof k?"esriGeometryPoint":e instanceof n?"esriGeometryPolyline":e instanceof r?"esriGeometryPolygon":e instanceof m?"esriGeometryEnvelope":e instanceof f?"esriGeometryMultipoint":null},getGeometryType:function(e){return"esriGeometryPoint"===e?k:"esriGeometryPolyline"===e?n:"esriGeometryPolygon"===e?r:"esriGeometryEnvelope"===e?m:"esriGeometryMultipoint"===e?f:null},supportsLazyUnquantization:function(e){return"esriGeometryPoint"===
e||"esriGeometryPolyline"===e||"esriGeometryPolygon"===e||"esriGeometryMultipoint"===e},unquantizeFunction:function(e,d){if(e&&d){var h=d.translate[0],t=d.translate[1],z=d.scale[0],v=d.scale[1],y=function(x){return x*z+h},C=function(x){return t-x*v},F=l[e];return function(x){return x?F(x,y,C):null}}},unquantize:function(e,d,h){if(d=g.unquantizeFunction(d,h)){var t=e.length;for(h=0;h<t;h++)d(e[h].geometry)}},quantizeFunction:function(e,d){if(e&&"esriGeometryPoint"===e&&d){var h=d.translate[0],t=d.translate[1],
z=d.scale[0],v=d.scale[1],y=function(x){return Math.round((x-h)/z)},C=function(x){return Math.round((t-x)/v)},F=b[e];return function(x){return x?F(x,y,C):null}}},quantize:function(e,d,h){if(d=g.quantizeFunction(d,h)){var t=e.length;for(h=0;h<t;h++)d(e[h].geometry)}}};D.mixin(D.getObject("geometry",!0,a),g);return g})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,
B,a,c,k,n,r,f,m,q){function l(){}function b(){}a={type:"multipoint",points:null};D=D(r,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(g){this.points=[];g&&(g.points?k.mixin(this,g):this.spatialReference=g,this.spatialReference&&(this.spatialReference=q.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(g){this.clearCache();B.isArray(g)?this.points.push(g):this.points.push([g.x,g.y]);return this},removePoint:function(g){if(this._validateInputs(g))return this.clearCache(),
new f(this.points.splice(g,1)[0],this.spatialReference)},getExtent:function(){var g=this.getCacheValue("_extent");if(g)return new m(g);g=this.points;var e=g.length;if(e){var d=g[0],h,t,z=h=d[0],v=t=d[1],y=Math.min,C=Math.max,F=this.spatialReference,x;for(x=0;x<e;x++){d=g[x];var u=d[0];d=d[1];z=y(z,u);v=y(v,d);h=C(h,u);t=C(t,d)}g={xmin:z,ymin:v,xmax:h,ymax:t,spatialReference:F?F.toJson():null};this.setCacheValue("_extent",g);return new m(g)}},_validateInputs:function(g){return null===g||0>g||g>=this.points.length?
!1:!0},getPoint:function(g){if(this._validateInputs(g))return g=this.points[g],new f(g[0],g[1],this.spatialReference)},setPoint:function(g,e){if(this._validateInputs(g))return this.clearCache(),this.points[g]=[e.x,e.y],this},toJson:function(){var g={points:k.clone2DArray(this.points)},e=this.spatialReference;e&&(g.spatialReference=e.toJson());return g}});l.prototype=D.prototype;b.prototype=new l;Object.defineProperty(b.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:k.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(g){this._pointsVal=g}});b.prototype.setupLazyUnquantization=function(g,e){this._unquantizeFn=g;this._pointsVal=e.points};D.simpleConstructor=l;D.accessorConstructor=b;D.defaultProps=a;B.setObject("geometry.Multipoint",D,c);c.geometry.defaultMultipoint=a;return D})},"arcgisonline/init":function(){define(["dojo","dijit","dojox","dojo/require!dojo/DeferredList,arcgisonline/sharing/dijit/_Empty,esri/libs/sanitizer/Sanitizer,arcgisonline/sharing/geow/Account,arcgisonline/pages/utils/organization,arcgisonline/pages/utils/user,arcgisonline/pages/utils/setItemUrls"],
function(D,B,a){D.provide("arcgisonline.init");D.require("dojo.DeferredList");D.require("arcgisonline.sharing.dijit._Empty");D.require("esri.libs.sanitizer.Sanitizer");D.require("arcgisonline.sharing.geow.Account");D.require("arcgisonline.pages.utils.organization");D.require("arcgisonline.pages.utils.user");D.require("arcgisonline.pages.utils.setItemUrls");D.mixin(arcgisonline.init,{labels:null,feeds:[],currentFeed:null,allSSL:!1,isOrg:!1,isSingleTenant:!1,settings:null,galleryNodeMap:{},sanitizer:null,
orgUtil:arcgisonline.pages.utils.organization,userUtil:arcgisonline.pages.utils.user,loadLabels:function(){var c=arcgisonline.init;c.labels=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(c.labels,D.i18n.getLocalization("arcgisonline","arcgisonline").homePage);D.mixin(c.labels,D.i18n.getLocalization("arcgisonline","arcgisonline").emptyStates);D.attr("viewerLink","innerHTML",c.labels.viewerLink);D.attr("viewerDescription","innerHTML",c.labels.viewerDescription);D.attr("signUpLink",
"innerHTML",c.labels.signUpLink);D.attr("signUpDescription","innerHTML",c.labels.signUpDescription);D.attr("featuredVideosLink","innerHTML",c.labels.featuredVideosLink);D.attr("featuredVideosDescription","innerHTML",c.labels.featuredVideosDescription);D.attr("lnkExplore","innerHTML",c.labels.explorerLink);D.attr("pExplore","innerHTML",c.labels.explorerDescription);D.attr("signUpImg","alt",c.labels.signUpLink);D.attr("signUpImg","title",c.labels.signUpLink);D.attr("mapImg","alt",c.labels.viewerLink);
D.attr("mapImg","title",c.labels.viewerLink);D.attr("developersImg","alt",c.labels.explorerLink);D.attr("developersImg","title",c.labels.explorerLink);D.attr("videosImg","alt",c.labels.featuredVideosLink);D.attr("videosImg","title",c.labels.featuredVideosLink);D.attr("next","aria-label",esriGeowConfig.isRightToLeft?c.labels.previous:c.labels.next);D.attr("prev","aria-label",esriGeowConfig.isRightToLeft?c.labels.next:c.labels.previous);D.attr("skipToContent","innerHTML",c.labels.skipToContent)},initialize:function(c){var k=
arcgisonline.init;k.credential=c;esri.i18nBundle=D.i18n.getLocalization("arcgisonline","arcgisonline");k.loadLabels();k.initSanitizer();D.byId("logoImg")&&D.attr("logoImg","src",arcgisonline.sharing.util.relativeToExplicitUrl("images/logo-pod.jpg"));D.byId("featuredVideosLink").href=esriGeowConfig.learnArcGIS;k.isSingleTenant=void 0!==esriGeowConfig.isMultiTenant&&null!==esriGeowConfig.isMultiTenant&&!1===esriGeowConfig.isMultiTenant;this.userUtil.getUserProperties(esriGeowConfig.userInfo).then(function(n){esriGeowConfig.userProperties=
n;arcgisonline.sharing.geow.Account.getSelf(D.hitch(k,arcgisonline.init.initPage),D.hitch(arcgisonline.init,arcgisonline.init.initPage))})},unhide:function(){document.body.classList.remove("hide")},initSanitizer:function(){var c=arcgisonline.init;c.sanitizer=new esri.libs.sanitizer.Sanitizer(c.orgUtil.orgSettingsSanitizerParams,!0);c.sanitizer.sanitizeUrl=c.orgUtil.sanitizeUrlOrgOverride;c.orgUtil.adjustSanitizerForOrgSettingsUse(c.sanitizer)},overrideSettings:function(c){var k=arcgisonline.init;
k.settings=c;k.isPortal=arcgisonline.sharing.util.isPortal();if(k.settings.id&&0<k.settings.id.length){k.isOrg=!0;var n=D.byId("headerTitle");n&&n.parentNode.removeChild(n)}k.isPortal&&k.getFederatedServers();c.allSSL&&(k.allSSL=c.allSSL);c.portalName&&(esriGeowConfig.portalName=c.portalName);c.portalHostname&&(esriGeowConfig.portalHostname=c.portalHostname);c.portalHeaderImage&&(esriGeowConfig.portalHeaderImage=c.portalHeaderImage);c.homePageFeaturedContent?esriGeowConfig.homePageFeaturedContent=
c.homePageFeaturedContent:k.isOrg&&(esriGeowConfig.homePageFeaturedContent=null);esri.isDefined(c.homePageFeaturedContentCount)&&(esriGeowConfig.homePageFeaturedContentCount=c.homePageFeaturedContentCount);if(c.rotatorPanels)if(k.isOrg){esriGeowConfig.rotatorPanels=c.rotatorPanels;n=esriGeowConfig.rotatorPanels;for(var r,f,m,q=0;q<n.length;q++)r=n[q],k.isPortal&&"7443"===location.port&&-1===esriGeowConfig.self.portalHostname.indexOf(":7443")&&(f=new RegExp(esriGeowConfig.self.portalHostname,"gi"),
f.test(r.innerHTML)&&(m=esriGeowConfig.self.portalHostname.split("/"),m[0]+=":7443",m[1]="arcgis",r.innerHTML=r.innerHTML.replace(f,m.join("/")))),n[q].innerHTML=r.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl)}else D.create("div",{id:"homeCalciteBanner"},D.byId("matrixLayout")),D.addClass(D.byId("details"),"calcite_home calcite_home_details"),D.addClass(D.byId("matrixLayout"),"calcite_home calcite_home_matrixLayout"),D.addClass(D.byId("homeCalciteBanner"),"calcite_home calcite_home_banner"),
D.addClass(D.byId("featuredMaps"),"calcite_home calcite_home_featuredMaps"),D.addClass(D.byId("bottomContent"),"calcite_home calcite_home_bottomContent");else k.isOrg&&(esriGeowConfig.rotatorPanels=null);k=c.showHomePageDescription;esriGeowConfig.showHomePageDescription=void 0!==k&&null!==k?c.showHomePageDescription:!1},getFederatedServers:function(){var c=arcgisonline.sharing.util.getUser();!esriGeowConfig.federatedServers&&c&&arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/"+
esriGeowConfig.self.id+"/servers"}).then(D.hitch(this,function(k){arcgisonline.sharing.util.setFederatedServers((k||{}).servers||[])}))},initOrganization:function(){var c=arcgisonline.init;esri.hide(D.byId("bottomSection"));if(esriGeowConfig.explorerOnline){var k="http://developers.arcgis.com",n=c.labels.explorerLink,r=c.labels.explorerDescription;c.isSingleTenant&&(k=esriGeowConfig.explorerOnline,n=c.labels.explorerLinkPortal,r=c.labels.explorerDescriptionPortal);D.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'+
k+'" target\x3d"_blank" \x3e'+n+'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e'+r+"\x3c/p\x3e"},D.byId("topRow2"))}k=c.settings.name;n=c.settings.description;r=esriGeowConfig.showHomePageDescription;r=void 0!==r&&null!==r&&!1===r?!1:!0;var f=esri.isDefined(n)&&"\x3cbr\x3e"!==n&&"\x3cbr/\x3e"!==n&&"\x3cbr /\x3e"!==n&&""!==n;f&&r?(D.attr(D.byId("orgDetails"),"innerHTML",c.sanitizer.sanitize(n)),esri.show(D.byId("organizationSection"))):!arcgisonline.sharing.util.isPortal()||f||r||(n='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+
(c.settings.helpBase+c.settings.helpMap.m["120000837"])+'" target\x3d"_blank"\x3e',D.attr(D.byId("orgDetails"),"innerHTML",esri.substitute({linkStart:n,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},c.labels.portalDefaultDesc)),esri.show(D.byId("organizationSection")));n=(n=arcgisonline.sharing.util.getToken())?"?token\x3d"+n:"";r=c.settings.backgroundImage;esri.isDefined(r)?"none"!==r?0===r.indexOf("images/")?D.query("body").addClass("defaultBackground"):(r=esriGeowConfig.restBaseUrl+"portals/self/resources/"+
r+n,f=D.query("body.esri")[0],D.style(f,"backgroundImage","url('"+r+"')"),D.style(f,"backgroundPosition","top center"),D.style(f,"backgroundRepeat","repeat-x")):D.query("body").addClass("calciteBackground"):D.query("body").addClass("calciteBackground");if(esriGeowConfig.rotatorPanels){D.addClass(D.byId("matrixLayout"),"matrixLayoutShort");D.addClass(D.byId("details"),"detailsShort");k=arcgisonline.sharing.util.getToken();r=esriGeowConfig.rotatorPanels;for(f=0;f<r.length;f++)n=r[f],n.id&&(n.innerHTML=
c.allSSL||c.isPortal&&"https:"===location.protocol?n.innerHTML.replace(/http:/g,"https:"):n.innerHTML),n.innerHTML=n.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl),n.innerHTML=n.innerHTML.replace("SECURITY_TOKEN",k?k:""),n.innerHTML=c.expandPredefinedImageUrls(n.innerHTML),n.innerHTML=c.expandProtocolAgnosticUrls(n.innerHTML),n.innerHTML=c.sanitizer.sanitize(n.innerHTML);c.createRotator(r)}else r=esriGeowConfig.portalHeaderImage?esriGeowConfig.portalHeaderImage:arcgisonline.sharing.util.relativeToExplicitUrl("images/organizationSplash.jpg"),
D.create("img",{id:"headerImage",src:r},D.byId("matrixLayout")),D.addClass(D.byId("headerImage"),"portalImage"),r=D.create("div",{id:"logoDisplay"},D.byId("matrixLayout")),f="",c.settings&&c.settings.thumbnail&&(f=esriGeowConfig.restBaseUrl+"portals/self/resources/"+c.settings.thumbnail+n,D.create("img",{src:f,alt:k},r)),D.create("span",{innerHTML:k},r),D.addClass(D.byId("matrixLayout"),"matrixLayoutShort"),D.addClass(D.byId("details"),"detailsShort");c.unhide()},expandPredefinedImageUrls:function(c){var k=
window.location.href.substring(0,window.location.href.lastIndexOf("/")+1);c=this.expandPredefinedImageUrl(c,"images/banner-1.jpg",k);c=this.expandPredefinedImageUrl(c,"images/banner-2.jpg",k);c=this.expandPredefinedImageUrl(c,"images/banner-3.jpg",k);c=this.expandPredefinedImageUrl(c,"images/banner-4.jpg",k);c=this.expandPredefinedImageUrl(c,"images/banner-5.jpg",k);c=this.expandPredefinedImageUrl(c,"images/organizationSplash.jpg",k);return c=this.expandPredefinedImageUrl(c,"images/arcgis_background.jpg",
k)},expandPredefinedImageUrl:function(c,k,n){return c.replace('src\x3d"'+k+'"','src\x3d"'+n+k+'"').replace("src\x3d'"+k+"'","src\x3d'"+n+k+"'")},expandProtocolAgnosticUrls:function(c){var k=window.location.protocol;return c.replace('src\x3d"//','src\x3d"'+k+"//").replace("src\x3d'//","src\x3d'"+k+"//")},initPage:function(c,k){var n=arcgisonline.init;esriGeowConfig.userInfo&&n.credential&&(esriGeowConfig.userInfo.credential=n.credential,esriGeowConfig.userInfo.token=n.credential.token);!c||c.code||
c.message||n.overrideSettings(c);var r=arcgisonline.sharing.util.getUser();if(n.isSingleTenant||r&&r.accountId)n.isOrg=!0,(r=D.byId("headerTitle"))&&r.parentNode.removeChild(r);n.isOrg?document.title=n.settings.name:(document.title=esriGeowConfig.portalName||n.labels.arcgis,D.query("body").addClass("defaultBackground"),esriGeowConfig.portalHeaderImage?((r=D.byId("headerTitle"))&&r.parentNode.removeChild(r),D.create("img",{id:"headerImage",src:esriGeowConfig.portalHeaderImage},D.byId("matrixLayout")),
D.addClass(D.byId("headerImage"),"portalImage")):n.createRotator(esriGeowConfig.rotatorPanels));r="";(r=arcgisonline.sharing.util.getUser())&&!r.accountId?(D.attr("signUpLink","innerHTML",n.labels.readyToUse),D.attr("signUpDescription","innerHTML",n.labels.readyToUseDescription),D.query("#signUpLink").attr("href",location.protocol+"//www.esri.com/software/apps")):(-1===esriGeowConfig.signin.indexOf("http")?(r=esriGeowConfig.baseUrl+esriGeowConfig.signin,!1!==esriGeowConfig.useSSL&&(r=r.replace("http:",
"https:"))):r=esriGeowConfig.signin,D.query("#signUpLink").attr("href",r));esriGeowConfig.explorerOnline?D.query(".explorerLink").attr("href","http://developers.arcgis.com"):(D.style(D.byId("bottom3Grid"),"display","none"),D.removeClass(D.byId("bottomRow2"),"middle"),D.addClass(D.byId("bottomRow2"),"last"),D.addClass(D.byId("bottom2Grid"),"grid_6"),D.addClass(D.byId("bottom1Grid"),"grid_6"));D.style("page-border","visibility","visible");esriGeowConfig.homePageFeaturedContent?n.getGroup(esriGeowConfig.homePageFeaturedContent):
esri.hide(D.byId("featuredMaps"));n.isOrg?n.initOrganization():n.unhide()},createRotator:function(c){var k=new a.widget.AutoRotator({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:c,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},D.byId("imgRotator"));new a.widget.rotator.Controller({rotator:k,commands:"#"},D.byId("categories"));c&&1===c.length&&D.style("categories","display","none")},getNextElementSibling:function(c){if(c.nextElementSibling)return c.nextElementSibling;
for(;c.nextSibling;){if(1===c.nextSibling.nodeType)return c.nextSibling;c=c.nextSibling}},getGroup:function(c){c={q:c,f:"json",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/groups",content:c}).then(D.hitch(arcgisonline.init,arcgisonline.init.getGroupContent),D.hitch(arcgisonline.init,arcgisonline.init.getGroupContent))},getGroupContent:function(c){if(c&&c.results&&c.results[0]){for(var k=0,n=c.results[k];c.results.length>k+1&&!(-1<c.query.indexOf('"'+
n.title+'"'));)k++,n=c.results[k];D.byId("galleryTitle").innerHTML=n.title;0===esriGeowConfig.homePageFeaturedContentCount?this.showAllGroupItems(n):(c={q:"group:"+n.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:esriGeowConfig.homePageFeaturedContentCount,sortField:n.sortField?n.sortField:"modified",sortOrder:n.sortOrder?n.sortOrder:"desc",ts:(new Date).getTime()},arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+
"search",content:c}).then(D.hitch(arcgisonline.init,arcgisonline.init.createGallery),function(r){}))}else esri.hide(D.byId("featuredMaps"))},showAllGroupItems:function(c){var k={q:"group:"+c.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:100,sortField:c.sortField?c.sortField:"modified",sortOrder:c.sortOrder?c.sortOrder:"desc",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+
"search",content:k}).then(D.hitch(this,function(n){var r={results:n.results},f=0;f=0;if(0<n.nextStart){f=n.total-n.results.length;f=Math.ceil(f/100);var m=[];n=n.nextStart;for(var q=0;q<f;q++)k.start=n+100*q,m.push(arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:k}));(new D.DeferredList(m)).then(D.hitch(this,function(l){D.forEach(l,D.hitch(this,function(b){b[1]&&b[1].results&&(r.results=r.results.concat(b[1].results))}));this.createGallery(r)}),D.hitch(this,function(l){this.createGallery(r)}))}else this.createGallery(r)}),
function(n){})},createGallery:function(c,k){var n=c.results,r=new arcgisonline.sharing.dijit.Gallery({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:D.string.substitute(arcgisonline.sharing.dijit._Empty,{message:arcgisonline.init.labels.noContentAvailable,width:96})},"gallery");D.connect(r,"onContentChange",function(){n.length<=r.nodesPerPage&&(esriGeowConfig.isRightToLeft?(D.removeClass("next","prevButtonEnabled"),D.addClass("next",
"prevButtonDisabled")):(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")))});r.set("items",n);esriGeowConfig.isRightToLeft?(D.connect(D.byId("prev"),"click, keyup",r,r.nextPage),D.connect(D.byId("next"),"click, keyup",r,r.prevPage),D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.connect(D.byId("prev"),"click, keyup",r,r.prevPage),D.connect(D.byId("next"),"click, keyup",r,r.nextPage),D.removeClass("prev","prevButtonEnabled"),D.addClass("prev",
"prevButtonDisabled"));D.connect(r,"onPageChange",function(f){arcgisonline.init.galleryNodeMap={};esriGeowConfig.isRightToLeft?(1===f?(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.removeClass("next","nextButtonDisabled"),D.addClass("next","nextButtonEnabled")),f===r.pageCount?(D.removeClass("prev","prevButtonEnabled"),D.addClass("prev","prevuttonDisabled")):(D.removeClass("prev","prevButtonDisabled"),D.addClass("prev","prevButtonEnabled"))):(1===f?(D.removeClass("prev",
"prevButtonEnabled"),D.addClass("prev","prevButtonDisabled")):(D.removeClass("prev","prevButtonDisabled"),D.addClass("prev","prevButtonEnabled")),f===r.pageCount?(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.removeClass("next","nextButtonDisabled"),D.addClass("next","nextButtonEnabled")))});D.connect(r,"onNodeMouseEnter",function(f,m){var q=arcgisonline.init,l=f.currentTarget,b=arcgisonline.sharing.util.getUser();D.query("a",l).forEach(function(g){if(!q.galleryNodeMap[m.id]){"Web Experience"===
m.type&&arcgisonline.pages.utils.setItemUrls.webExperienceViewer(m);var e=arcgisonline.sharing.util.getHomePageGalleryLinkInfo(m),d=!1;e.href&&-1<e.href.toLowerCase().indexOf("javascript")&&m.url&&("Web Mapping Application"===m.type||"Mobile Application"===m.type||"Document Link"===m.type||"Site Application"===m.type||"Hub Site Application"===m.type||"StoryMap"===m.type)&&(e.href=m.url,d=!0);if("CityEngine Web Scene"===m.type||"Dashboard"===m.type||"Operation View"===m.type)d=!0;if(e&&e.href&&"JavaScript:void(0)"===
e.href&&e.onclick)D.connect(g,"onclick",e.onclick);else{if(!b&&"self"!==m.contentOrigin&&"public"===m.access&&e.href){var h=e.href.indexOf("/apps/");0===h?e.href="https://"+esriGeowConfig.self.portalHostname+e.href:0<e.href.indexOf(window.location.host+arcgisonline.sharing.util.getHomeAppContext())&&0<h?e.href="https://"+esriGeowConfig.self.portalHostname+e.href.substring(h):-1<e.href.indexOf(".arcgis.com")&&(h=e.href.split(".arcgis.com"),e.href="https://"+esriGeowConfig.self.portalHostname+h[h.length-
1])}D.attr(g,"href",e.href)}D.attr(g,"target",d?"_blank":"");q.galleryNodeMap[m.id]=!0}})})}})})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(D,B,a){D.DeferredList=function(c,k,n,r,f){var m=[];B.call(this);var q=this;0!==c.length||k||this.resolve([0,[]]);var l=0;a.forEach(c,function(b,g){function e(d,h){m[g]=[d,h];l++;l===c.length&&q.resolve(m)}b.then(function(d){k?q.resolve([g,d]):e(!0,d)},function(d){n?q.reject(d):e(!1,d);if(r)return null;
throw d;})})};D.DeferredList.prototype=new B;D.DeferredList.prototype.gatherResults=function(c){c=new D.DeferredList(c,!1,!0,!1);c.addCallback(function(k){var n=[];a.forEach(k,function(r){n.push(r[1])});return n});return c};return D.DeferredList})},"arcgisonline/sharing/dijit/_Empty":function(){define(["dojo/text!./templates/_Empty.html"],function(D){return D})},"esri/libs/sanitizer/Sanitizer":function(){!function(D,B){"object"==typeof exports&&"undefined"!=typeof module?module.exports=B():"function"==
typeof define&&define.amd?define(B):(D="undefined"!=typeof globalThis?globalThis:D||self).Sanitizer=B()}(this,function(){function D(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,
background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,
"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,
"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,
"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,"float":!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,
"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,
"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,
"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,
"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,
"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,
"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,
"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,
width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function B(Ba){var ca=Ba||{},ua={},ya;for(ya in ca)ua[ya]=ca[ya];(Ba=ua).whiteList=Ba.whiteList||H.whiteList;Ba.onAttr=Ba.onAttr||H.onAttr;Ba.onIgnoreAttr=Ba.onIgnoreAttr||H.onIgnoreAttr;Ba.safeAttrValue=Ba.safeAttrValue||H.safeAttrValue;this.options=Ba}function a(Ba){return Ba.replace(N,"\x26lt;").replace(O,"\x26gt;")}function c(Ba){return Ba.replace(Y,"\x26quot;")}
function k(Ba){return Ba.replace(ba,'"')}function n(Ba){return Ba.replace(ha,function(ca,ua){return"x"===ua[0]||"X"===ua[0]?String.fromCharCode(parseInt(ua.substr(1),16)):String.fromCharCode(parseInt(ua,10))})}function r(Ba){return Ba.replace(U,":").replace(X," ")}function f(Ba){for(var ca="",ua=0,ya=Ba.length;ua<ya;ua++)ca+=32>Ba.charCodeAt(ua)?" ":Ba.charAt(ua);return L.trim(ca)}function m(Ba){return Ba=f(Ba=r(Ba=n(Ba=k(Ba))))}function q(Ba){return Ba=a(Ba=c(Ba))}function l(Ba,ca){for(;ca<Ba.length;ca++){var ua=
Ba[ca];if(" "!==ua)return"\x3d"===ua?ca:-1}}function b(Ba,ca){for(;0<ca;ca--){var ua=Ba[ca];if(" "!==ua)return"\x3d"===ua?ca:-1}}function g(Ba){return'"'===Ba[0]&&'"'===Ba[Ba.length-1]||"'"===Ba[0]&&"'"===Ba[Ba.length-1]?Ba.substr(1,Ba.length-2):Ba}function e(Ba){var ca=Ba||{},ua={},ya;for(ya in ca)ua[ya]=ca[ya];(Ba=ua).stripIgnoreTag&&(Ba.onIgnoreTag=Fa.onIgnoreTagStripAll);Ba.whiteList=Ba.whiteList||Fa.whiteList;Ba.onTag=Ba.onTag||Fa.onTag;Ba.onTagAttr=Ba.onTagAttr||Fa.onTagAttr;Ba.onIgnoreTag=
Ba.onIgnoreTag||Fa.onIgnoreTag;Ba.onIgnoreTagAttr=Ba.onIgnoreTagAttr||Fa.onIgnoreTagAttr;Ba.safeAttrValue=Ba.safeAttrValue||Fa.safeAttrValue;Ba.escapeHtml=Ba.escapeHtml||Fa.escapeHtml;this.options=Ba;!1===Ba.css?this.cssFilter=!1:(Ba.css=Ba.css||{},this.cssFilter=new Ca(Ba.css))}var d,h,t=Object.prototype,z=Function.prototype.toString,v=t.hasOwnProperty,y=z.call(Object),C=t.toString,F=(d=Object.getPrototypeOf,h=Object,function(Ba){return d(h(Ba))}),x=function(Ba){var ca;if(!(ca=!Ba||"object"!=typeof Ba||
"[object Object]"!=C.call(Ba))&&(ca=!1,null!=Ba&&"function"!=typeof Ba.toString))try{ca=!!(Ba+"")}catch(ua){}if(ca)return!1;Ba=F(Ba);if(null===Ba)return!0;Ba=v.call(Ba,"constructor")&&Ba.constructor;return"function"==typeof Ba&&Ba instanceof Ba&&z.call(Ba)==y},u={exports:{}},w={};t={exports:{}};var A={},E=/javascript\s*:/gim;A.whiteList=D();A.getDefaultWhiteList=D;A.onAttr=function(Ba,ca,ua){};A.onIgnoreAttr=function(Ba,ca,ua){};A.safeAttrValue=function(Ba,ca){return E.test(ca)?"":ca};var G={indexOf:function(Ba,
ca){var ua;if(Array.prototype.indexOf)return Ba.indexOf(ca);var ya=0;for(ua=Ba.length;ya<ua;ya++)if(Ba[ya]===ca)return ya;return-1},forEach:function(Ba,ca,ua){var ya;if(Array.prototype.forEach)return Ba.forEach(ca,ua);var ta=0;for(ya=Ba.length;ta<ya;ta++)ca.call(ua,Ba[ta],ta,Ba)},trim:function(Ba){return String.prototype.trim?Ba.trim():Ba.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(Ba){return String.prototype.trimRight?Ba.trimRight():Ba.replace(/(\s*$)/g,"")}},H=A,K=function(Ba,ca){function ua(){if(!ta){var na=
G.trim(Ba.slice(pa,Aa)),V=na.indexOf(":");if(-1!==V){var Ia=G.trim(na.slice(0,V));V=G.trim(na.slice(V+1));Ia&&(na=ca(pa,T.length,Ia,V,na))&&(T+=na+"; ")}}pa=Aa+1}";"!==(Ba=G.trimRight(Ba))[Ba.length-1]&&(Ba+=";");for(var ya=Ba.length,ta=!1,pa=0,Aa=0,T="";Aa<ya;Aa++){var ea=Ba[Aa];if("/"===ea&&"*"===Ba[Aa+1]){ea=Ba.indexOf("*/",Aa+2);if(-1===ea)break;pa=(Aa=ea+1)+1;ta=!1}else"("===ea?ta=!0:")"===ea?ta=!1:";"===ea?ta||ua():"\n"===ea&&ua()}return G.trim(T)};B.prototype.process=function(Ba){if(!(Ba=(Ba=
Ba||"").toString()))return"";var ca=this.options,ua=ca.whiteList,ya=ca.onAttr,ta=ca.onIgnoreAttr,pa=ca.safeAttrValue;return K(Ba,function(Aa,T,ea,na,V){var Ia=ua[ea],Ja=!1;if(!0===Ia?Ja=Ia:"function"==typeof Ia?Ja=Ia(na):Ia instanceof RegExp&&(Ja=Ia.test(na)),!0!==Ja&&(Ja=!1),na=pa(ea,na)){var Da;Aa={position:T,sourcePosition:Aa,source:V,isWhite:Ja};return Ja?null==(Da=ya(ea,na,Aa))?ea+":"+na:Da:null==(Da=ta(ea,na,Aa))?void 0:Da}})};!function(Ba,ca){for(var ua in(ca=Ba.exports=function(ya,ta){return(new B(ta)).process(ya)}).FilterCSS=
B,A)ca[ua]=A[ua]}(t,t.exports);var I={indexOf:function(Ba,ca){var ua;if(Array.prototype.indexOf)return Ba.indexOf(ca);var ya=0;for(ua=Ba.length;ya<ua;ya++)if(Ba[ya]===ca)return ya;return-1},forEach:function(Ba,ca,ua){var ya;if(Array.prototype.forEach)return Ba.forEach(ca,ua);var ta=0;for(ya=Ba.length;ta<ya;ta++)ca.call(ua,Ba[ta],ta,Ba)},trim:function(Ba){return String.prototype.trim?Ba.trim():Ba.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(Ba){return(Ba=/\s|\n|\t/.exec(Ba))?Ba.index:-1}},J=t.exports.getDefaultWhiteList,
L=I,M=new t.exports.FilterCSS,N=/</g,O=/>/g,Y=/"/g,ba=/&quot;/g,ha=/&#([a-zA-Z0-9]*);?/gim,U=/&colon;?/gim,X=/&newline;?/gim,Z=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,P=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,da=/u\s*r\s*l\s*\(.*/gi;w.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],
bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],
strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};w.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords",
"href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width",
"height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};
w.onTag=function(Ba,ca,ua){};w.onIgnoreTag=function(Ba,ca,ua){};w.onTagAttr=function(Ba,ca,ua){};w.onIgnoreTagAttr=function(Ba,ca,ua){};w.safeAttrValue=function(Ba,ca,ua,ya){if(ua=m(ua),"href"===ca||"src"===ca){if("#"===(ua=L.trim(ua)))return"#";if("http://"!==ua.substr(0,7)&&"https://"!==ua.substr(0,8)&&"mailto:"!==ua.substr(0,7)&&"tel:"!==ua.substr(0,4)&&"data:image/"!==ua.substr(0,11)&&"ftp://"!==ua.substr(0,6)&&"./"!==ua.substr(0,2)&&"../"!==ua.substr(0,3)&&"#"!==ua[0]&&"/"!==ua[0])return""}else if("background"===
ca){if(Z.lastIndex=0,Z.test(ua))return""}else if("style"===ca){if((P.lastIndex=0,P.test(ua))||(da.lastIndex=0,da.test(ua)&&(Z.lastIndex=0,Z.test(ua))))return"";!1!==ya&&(ua=(ya=ya||M).process(ua))}return ua=q(ua)};w.escapeHtml=a;w.escapeQuote=c;w.unescapeQuote=k;w.escapeHtmlEntities=n;w.escapeDangerHtml5Entities=r;w.clearNonPrintableCharacter=f;w.friendlyAttrValue=m;w.escapeAttrValue=q;w.onIgnoreTagStripAll=function(){return""};w.StripTagBody=function(Ba,ca){"function"!=typeof ca&&(ca=function(){});
var ua=!Array.isArray(Ba),ya=[],ta=!1;return{onIgnoreTag:function(pa,Aa,T){return ua||-1!==L.indexOf(Ba,pa)?T.isClosing?(ya.push([!1!==ta?ta:T.position,T.position+10]),ta=!1,"[/removed]"):(ta||(ta=T.position),"[removed]"):ca(pa,Aa,T)},remove:function(pa){var Aa="",T=0;return L.forEach(ya,function(ea){Aa+=pa.slice(T,ea[0]);T=ea[1]}),Aa+=pa.slice(T)}}};w.stripCommentTag=function(Ba){for(var ca="",ua=0;ua<Ba.length;){var ya=Ba.indexOf("\x3c!--",ua);if(-1===ya){ca+=Ba.slice(ua);break}ca+=Ba.slice(ua,
ya);ua=Ba.indexOf("--\x3e",ya);if(-1===ua)break;ua+=3}return ca};w.stripBlankChar=function(Ba){Ba=Ba.split("");return(Ba=Ba.filter(function(ca){ca=ca.charCodeAt(0);return 127!==ca&&(!(31>=ca)||10===ca||13===ca)})).join("")};w.cssFilter=M;w.getDefaultCSSWhiteList=J;var ia={},xa=/[^a-zA-Z0-9_:\.\-]/gim;ia.parseTag=function(Ba,ca,ua){var ya="",ta=0,pa=!1,Aa=!1,T=0,ea=Ba.length,na="",V="";T=0;a:for(;T<ea;T++)if(V=Ba.charAt(T),!1===pa)"\x3c"===V&&(pa=T);else if(!1===Aa)if("\x3c"===V)ya+=ua(Ba.slice(ta,
T)),ta=pa=T;else if("\x3e"===V)ya+=ua(Ba.slice(ta,pa)),ta=V=Ba.slice(pa,T+1),na=I.spaceIndex(ta),ta=-1===na?ta.slice(1,-1):ta.slice(1,na+1),na=("/"===(ta=I.trim(ta).toLowerCase()).slice(0,1)&&(ta=ta.slice(1)),"/"===ta.slice(-1)&&(ta=ta.slice(0,-1)),ta),ya+=ca(pa,ya.length,na,V,"\x3c/"===V.slice(0,2)),ta=T+1,pa=!1;else{if('"'===V||"'"===V){na=1;for(var Ia=Ba.charAt(T-na);""===Ia.trim()||"\x3d"===Ia;){if("\x3d"===Ia){Aa=V;continue a}Ia=Ba.charAt(T-++na)}}}else V===Aa&&(Aa=!1);return ta<Ba.length&&(ya+=
ua(Ba.substr(ta))),ya};ia.parseAttr=function(Ba,ca){function ua(na,V){if(!(1>(na=(na=I.trim(na)).replace(xa,"").toLowerCase()).length)){var Ia=ca(na,V||"");Ia&&ta.push(Ia)}}for(var ya=0,ta=[],pa=!1,Aa=Ba.length,T=0;T<Aa;T++){var ea=Ba.charAt(T);if(!1!==pa||"\x3d"!==ea)if(!1===pa||T!==ya||'"'!==ea&&"'"!==ea||"\x3d"!==Ba.charAt(T-1))/\s|\n|\t/.test(ea)&&((Ba=Ba.replace(/\s|\n|\t/g," "),!1===pa)?-1===(ea=l(Ba,T))?(ua(I.trim(Ba.slice(ya,T))),pa=!1,ya=T+1):T=ea-1:-1===(ea=b(Ba,T-1))&&(ua(pa,g(I.trim(Ba.slice(ya,
T)))),pa=!1,ya=T+1));else{if(-1===(ea=Ba.indexOf(ea,T+1)))break;ua(pa,I.trim(Ba.slice(ya+1,ea)));pa=!1;ya=(T=ea)+1}else pa=Ba.slice(ya,T),ya=T+1}return ya<Ba.length&&(!1===pa?ua(Ba.slice(ya)):ua(pa,g(I.trim(Ba.slice(ya))))),I.trim(ta.join(" "))};var Ca=t.exports.FilterCSS,Fa=w,Ma=ia.parseTag,Sa=ia.parseAttr;e.prototype.process=function(Ba){if(!(Ba=(Ba=Ba||"").toString()))return"";var ca=this.options,ua=ca.whiteList,ya=ca.onTag,ta=ca.onIgnoreTag,pa=ca.onTagAttr,Aa=ca.onIgnoreTagAttr,T=ca.safeAttrValue,
ea=ca.escapeHtml,na=this.cssFilter;ca.stripBlankChar&&(Ba=Fa.stripBlankChar(Ba));ca.allowCommentTag||(Ba=Fa.stripCommentTag(Ba));var V=!1;ca.stripIgnoreTagBody&&(V=Fa.StripTagBody(ca.stripIgnoreTagBody,ta),ta=V.onIgnoreTag);Ba=Ma(Ba,function(Ia,Ja,Da,W,oa){Ja={sourcePosition:Ia,position:Ja,isClosing:oa,isWhite:ua.hasOwnProperty(Da)};if(null!=(Ia=ya(Da,W,Ja)))return Ia;if(Ja.isWhite){if(Ja.isClosing)return"\x3c/"+Da+"\x3e";Ia=function(R){var fa=I.spaceIndex(R);if(-1===fa)return{html:"",closing:"/"===
R[R.length-2]};fa="/"===(R=I.trim(R.slice(fa+1,-1)))[R.length-1];return fa&&(R=I.trim(R.slice(0,-1))),{html:R,closing:fa}}(W);var ra=ua[Da];Ja=Sa(Ia.html,function(R,fa){var ma,wa=-1!==I.indexOf(ra,R);return null==(ma=pa(Da,R,fa,wa))?wa?(fa=T(Da,R,fa,na))?R+'\x3d"'+fa+'"':R:null==(ma=Aa(Da,R,fa,wa))?void 0:ma:ma});W="\x3c"+Da;return Ja&&(W+=" "+Ja),Ia.closing&&(W+=" /"),W+="\x3e"}return null==(Ia=ta(Da,W,Ja))?ea(W):Ia},ea);return V&&(Ba=V.remove(Ba)),Ba};return function(Ba,ca){function ua(pa,Aa){return(new ya(Aa)).process(pa)}
var ya=e,ta;for(ta in(ca=Ba.exports=ua).filterXSS=ua,ca.FilterXSS=ya,w)ca[ta]=w[ta];for(ta in ia)ca[ta]=ia[ta];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=Ba.exports)}(u,u.exports),function(){function Ba(ca,ua){var ya,ta=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],
em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:"alt border height src style width".split(" "),li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:"border cellpadding cellspacing height style width".split(" "),tbody:[],tr:["align","height","style","valign"],td:"align colspan height nowrap rowspan style valign width".split(" "),
th:"align colspan height nowrap rowspan style valign width".split(" "),u:[],ul:[],video:"autoplay controls height loop muted poster preload width".split(" ")};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there arcgis-quickcapture mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");this.arcgisFilterOptions={allowCommentTag:!0,
safeAttrValue:function(pa,Aa,T,ea){return"a"===pa&&"href"===Aa||("img"===pa||"source"===pa)&&"src"===Aa?ta.sanitizeUrl(T):u.exports.safeAttrValue(pa,Aa,T,ea)}};ca&&!ua?ya=ca:ca&&ua?(ya=Object.create(this.arcgisFilterOptions),Object.keys(ca).forEach(function(pa){"whiteList"===pa?ya.whiteList=ta._extendObjectOfArrays([ta.arcgisWhiteList,ca.whiteList||{}]):ya[pa]=ca[pa]})):(ya=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=ya;this._xssFilter=new u.exports.FilterXSS(ya)}
return Ba.prototype.sanitize=function(ca,ua){switch(void 0===ua&&(ua={}),typeof ca){case "number":return isNaN(ca)||!isFinite(ca)?null:ca;case "boolean":return ca;case "string":return this._xssFilter.process(ca);case "object":return this._iterateOverObject(ca,ua);default:if(!ua.allowUndefined||void 0!==ca)return null}},Ba.prototype.sanitizeUrl=function(ca){var ua=this._trim(ca.substring(0,ca.indexOf(":")));return"/"===ca||"#"===ca||"#"===ca[0]||-1<this.allowedProtocols.indexOf(ua.toLowerCase())?u.exports.escapeAttrValue(ca):
""},Ba.prototype.sanitizeHTMLAttribute=function(ca,ua,ya,ta){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(ca,ua,ya,ta):u.exports.safeAttrValue(ca,ua,ya,ta)},Ba.prototype.validate=function(ca,ua){void 0===ua&&(ua={});var ya=this.sanitize(ca,ua);return{isValid:ca===ya,sanitized:ya}},Ba.prototype._extendObjectOfArrays=function(ca){var ua={};return ca.forEach(function(ya){Object.keys(ya).forEach(function(ta){Array.isArray(ya[ta])&&Array.isArray(ua[ta])?
ua[ta]=ua[ta].concat(ya[ta]):ua[ta]=ya[ta]})}),ua},Ba.prototype._iterateOverObject=function(ca,ua){var ya=this;void 0===ua&&(ua={});try{var ta=!1,pa=void 0;if(Array.isArray(ca))pa=ca.reduce(function(Aa,T){var ea=ya.validate(T,ua);return ea.isValid?Aa.concat([T]):(ta=!0,Aa.concat([ea.sanitized]))},[]);else{if(!x(ca))return ua.allowUndefined&&void 0===ca?void 0:null;pa=Object.keys(ca).reduce(function(Aa,T){var ea=ca[T],na=ya.validate(ea,ua);return na.isValid?Aa[T]=ea:(ta=!0,Aa[T]=na.sanitized),Aa},
{})}return ta?pa:ca}catch(Aa){return null}},Ba.prototype._trim=function(ca){return String.prototype.trim?ca.trim():ca.replace(/(^\s*)|(\s*$)/g,"")},Ba}()})},"arcgisonline/sharing/geow/Account":function(){define("require exports tslib dijit/registry dojo/_base/kernel dojo/Deferred dojo/json dojo/promise/all dojo/on dojo/request/iframe dojo/sniff dojo/data/util/sorter dojo/when dojo/_base/url esri/config esri/lang esri/request esri/IdentityManager ../../pages/utils/promises ../../pages/utils/signin ../../pages/utils/storage ../../pages/utils/enterprise ../../esriGeowConfig ../util ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importDefault(F);
x=a.__importDefault(x);u=a.__importDefault(u);w=a.__importDefault(w);A=a.__importDefault(A);E=a.__importDefault(E);return function(){function G(){}G.loadMapSettings=function(H){this.getSelf(function(K){var I;if(K){K.allSSL&&(x["default"].allSSL=K.allSSL);h["default"].isDefined(x["default"].allSSL)&&x["default"].allSSL&&"http:"===location.protocol&&(window.location.href=u["default"].getSecureUrl(location.href));K.basemapGalleryGroupQuery&&(x["default"].basemapGalleryGroupQuery=K.basemapGalleryGroupQuery);
K.templatesGroupQuery&&(x["default"].templatesGroupQuery=K.templatesGroupQuery);K.defaultBasemap&&(x["default"].defaultBasemap=K.defaultBasemap);K.defaultExtent&&(x["default"].defaultExtent=K.defaultExtent);K.symbolSetsGroupQuery&&(x["default"].symbolSetsGroupQuery=K.symbolSetsGroupQuery);K.staticImagesUrl&&(x["default"].staticImagesUrl=K.staticImagesUrl);K.layerTemplatesGroupQuery&&(x["default"].layerTemplatesGroupQuery=K.layerTemplatesGroupQuery);K.colorSetsGroupQuery&&(x["default"].colorSetsGroupQuery=
K.colorSetsGroupQuery);K.helpBase&&(x["default"].help=K.helpBase,x["default"].helpBase=K.helpBase);K.helpMap&&K.helpMap.m&&(x["default"].helpMap=K.helpMap.m);K.urlKey&&(x["default"].urlKey=K.urlKey);var J=void 0;if(K.authorizedCrossOriginDomains&&0<K.authorizedCrossOriginDomains.length)for(J=0;J<K.authorizedCrossOriginDomains.length;J++){var L=K.authorizedCrossOriginDomains[J];h["default"].isDefined(L)&&0<L.length&&d["default"].defaults.io.corsEnabledServers.push({host:L,withCredentials:!0})}y["default"].checkForOrgUserOnOnlineBaseHostAndRedirect(K);
K.isPortal&&-1===(null===(I=u["default"]._cookies)||void 0===I?void 0:I.arcgis_auth)&&delete u["default"]._cookies.arcgis_auth;I=!1===x["default"].isMultiTenant;L=(J=u["default"].getUser())?!0:!1;var M=window.location.pathname.toLowerCase(),N=-1!==M.indexOf(x["default"].signin),O=-1!==M.indexOf("troubleshoot.html");M=-1!==M.indexOf("setup.html");I||!J||"account_admin"!==J.role&&"org_admin"!==J.role||!K.id||K.urlKey||M||(window.location.href=x["default"].baseUrl+"setup.html");I?(!K.access||"private"!==
K.access||L||N||O||(window.location.href=""+u["default"].getSecureUrl()+x["default"].signin+"?returnUrl\x3d"+encodeURIComponent(window.location.href)),K.isPortal&&"singletenant"===K.portalMode&&("7080"===location.port||"7443"===location.port)&&u["default"].checkForIAA().then(function(Y){if(null===Y||void 0===Y?0:Y.hasIAA)if(K.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href=u["default"].getHttpUrl(x["default"].baseUrl)+"error.html?c\x3dWebAdaptorRequired"),
!K.portalHostname.match(/:7080\//)&&80!==x["default"].self.httpPort&&443!==x["default"].self.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){Y=new e["default"](location.href);var ba=Y.path.indexOf("/home/");ba=Y.path.substring(ba+6);Y=h["default"].isDefined(Y.query)?"?"+Y.query:"";window.location.href=""+u["default"].getHttpUrl("http://"+K.portalHostname)+"/home/"+ba+Y}})):K.id||!K.urlKey||L||N||O||(window.location.href=""+x["default"].baseUrl.replace("http:","https:")+
x["default"].signin+"?returnUrl\x3d"+encodeURIComponent(window.location.href))}H&&H(K)})};G.getSelf=function(H,K,I){var J=this;if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,H,K),75);else{var L=x["default"].restBaseUrl+"/portals/helpmap?culture\x3d"+k["default"].locale,M=x["default"].restBaseUrl+"portals/self?culture\x3d"+k["default"].locale;I&&(L+="\x26token\x3d"+I,M+="\x26token\x3d"+I);var N=x["default"].restBaseUrl+"/community/self";N=(I=z["default"].findCredential(x["default"].restBaseUrl))?
{url:N,content:{returnUserLicensedItems:!0,token:I.token}}:null;L=(null===x["default"]||void 0===x["default"]?void 0:x["default"].self)||v["default"].eachAlways({helpMapResult:u["default"]._requestWithAppHandlers({url:L}),selfResult:u["default"]._requestWithAppHandlers({url:M}),communitySelfResult:I?u["default"]._requestWithAppHandlers(N):v["default"].resolve(null)}).then(function(O){var Y,ba,ha;if(null===(Y=O.selfResult)||void 0===Y?0:Y.error)throw O.selfResult.error;var U=O.selfResult.value;if(null===
(ba=O.helpMapResult)||void 0===ba?0:ba.value)U.helpMap=O.helpMapResult.value.helpMap;if(null===(ha=O.communitySelfResult)||void 0===ha?0:ha.value)U.communitySelf=O.communitySelfResult.value;return U.user?z["default"].checkAppAccess(x["default"].restBaseUrl,J.getAppClientId()).always(function(X){return J.setupAfterSelf(U,!(null===X||void 0===X||!X.viewOnly)).then(function(Z){J._isRequestingSelf=!1;10>=l["default"]("ie")&&J.throwawayIEPostFix();return Z})}):J.setupAfterSelf(U).then(function(X){J._isRequestingSelf=
!1;10>=l["default"]("ie")&&J.throwawayIEPostFix();return X})},function(O){throw O;});this._isRequestingSelf=!x["default"].self;return g["default"](L,H,K)}};G.getAppClientId=function(){var H=-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline";try{return C["default"].getLocalStorageItem("portalAppClientId")||C["default"].getSessionStorageItem("portalAppClientId")||H}catch(K){return H}};G.setupAfterSelf=function(H,K){var I=new n["default"];x["default"].self=H;this.setupUserRole(H,
K);H.isPortal?this.getPortalAppSettings().then(function(J){if(J&&!J.code&&(null===J||void 0===J?0:J.portalConfigProperties)){var L=F["default"].copyPortalConfigProperties(J.portalConfigProperties,x["default"]);Object.keys(L).forEach(function(M){x["default"][M]=L[M]})}I.resolve(H)},function(){I.resolve(H)}):I.resolve(H);return I};G.getPortalAppSettings=function(){return u["default"].request({url:x["default"].restBaseUrl+"portals/self/settings",content:{f:"json"}})};G.setupUserRole=function(H,K){var I,
J;x["default"].userInfo=H.user&&a.__assign(a.__assign({},x["default"].userInfo),H.user);if(null===(I=x["default"].userInfo)||void 0===I?0:I.orgId)x["default"].userInfo.accountId=x["default"].userInfo.orgId;if(null===(J=H.user)||void 0===J?0:J.role)x["default"].userRole=new w["default"]({id:H.user.roleId?H.user.roleId:H.user.role,role:H.user.role,privileges:H.user.privileges?H.user.privileges:void 0,viewOnly:K}),K&&(x["default"].self.user.role=x["default"].userInfo.role=H.user.role=x["default"].userRole.baseRole,
x["default"].self.user.roleId=x["default"].userInfo.roleId=H.user.roleId=x["default"].userRole.id,x["default"].self.user.privileges=x["default"].userInfo.privileges=H.user.privileges=x["default"].userRole.privileges,x["default"].self.user.level=x["default"].userInfo.level=H.user.level="1");this.normalizeOrgIdAndRole()};G.normalizeOrgIdAndRole=function(){h["default"].isDefined(x["default"].self.user)&&(h["default"].isDefined(x["default"].self.user.orgId)&&(x["default"].self.user.accountId=x["default"].self.user.orgId),
h["default"].isDefined(x["default"].self.user.role)&&(x["default"].self.user.role=u["default"].normalizeOrgRole(x["default"].self.user.role)));h["default"].isDefined(x["default"].userInfo)&&(h["default"].isDefined(x["default"].userInfo.orgId)&&(x["default"].userInfo.accountId=x["default"].userInfo.orgId),h["default"].isDefined(x["default"].userInfo.role)&&(x["default"].userInfo.role=u["default"].normalizeOrgRole(x["default"].userInfo.role)))};G.throwawayIEPostFix=function(){var H=document.createElement("form");
H.encoding="multipart/form-data";H.method="POST";var K=document.createElement("input");K.type="hidden";K.name="f";K.value="json";H.appendChild(K);K=document.createElement("input");K.type="hidden";K.name="q";K.value="*";H.appendChild(K);K=document.createElement("input");K.type="hidden";K.name="callback.html";K.value="textarea";H.appendChild(K);q["default"].post(x["default"].restBaseUrl+"community/users",{form:H,handleAs:"json"}).then(function(){}).otherwise(function(){})};G.updateAccount=function(H,
K,I){var J;if(null!==u["default"].getUser()){var L="";H.defaultBasemap&&(L=r["default"].stringify(H.defaultBasemap));var M=0<(null===(J=H.metadataFormats)||void 0===J?void 0:J.length)?H.metadataFormats.join(","):"",N=!!x["default"].userRole,O=x["default"].userRole.isAdmin(),Y=x["default"].self&&(x["default"].self.canListApps||x["default"].self.canListData),ba=N&&(O||x["default"].userRole.canManageCredits());J=N&&(O||x["default"].userRole.canManageSecurity());var ha=N&&(O||x["default"].userRole.canManageWebsite());
Y=Y&&N&&(O||x["default"].userRole.canManageMarketplace());N=N&&(O||x["default"].userRole.canManageUtilityServices());O=ha||J||N||ba;ba={clearEmptyFields:!0};ha&&(ba.name=H.name,ba.description=H.description,ba.culture=H.culture,ba.cultureFormat=H.cultureFormat,ba.region=H.region,ba.featuredItemsGroupQuery=H.featuredItemsGroupQuery,ba.thumbnail=H.thumbnail,ba.basemapGalleryGroupQuery=H.basemapGalleryGroupQuery,ba.defaultBasemap=L,ba.defaultExtent=H.defaultExtent?r["default"].stringify(H.defaultExtent):
"",ba.featuredGroups=r["default"].stringify(H.featuredGroups),ba.homePageFeaturedContent=H.homePageFeaturedContent,ba.homePageFeaturedContentCount=H.homePageFeaturedContentCount,ba.rotatorPanels=r["default"].stringify(H.rotatorPanels),ba.showHomePageDescription=H.showHomePageDescription,ba.templatesGroupQuery=H.templatesGroupQuery,ba.analysisLayersGroupQuery=H.analysisLayersGroupQuery,ba.galleryTemplatesGroupQuery=H.galleryTemplatesGroupQuery,ba.stylesGroupQuery=H.stylesGroupQuery,ba.bingKey=H.bingKey,
ba.canShareBingPublic=H.canShareBingPublic,ba.backgroundImage=H.backgroundImage,ba.units=H.units,ba.metadataEditable=H.metadataEditable,ba.metadataFormats=M,ba.useVectorBasemaps=H.useVectorBasemaps);N&&H.helperServices&&(ba.geocodeService=r["default"].stringify(H.helperServices.geocode),ba.printServiceTask=r["default"].stringify(H.helperServices.printTask),ba.geometryService=r["default"].stringify(H.helperServices.geometry),ba.routeServiceLayer=r["default"].stringify(H.helperServices.route),h["default"].isDefined(H.helperServices.asyncRoute)&&
(ba.asyncRouteService=r["default"].stringify(H.helperServices.asyncRoute)),h["default"].isDefined(H.helperServices.closestFacility)&&(ba.closestFacilityService=r["default"].stringify(H.helperServices.closestFacility)),h["default"].isDefined(H.helperServices.asyncClosestFacility)&&(ba.asyncClosestFacilityService=r["default"].stringify(H.helperServices.asyncClosestFacility)),h["default"].isDefined(H.helperServices.serviceArea)&&(ba.serviceAreaService=r["default"].stringify(H.helperServices.serviceArea)),
h["default"].isDefined(H.helperServices.asyncServiceArea)&&(ba.asyncServiceAreaService=r["default"].stringify(H.helperServices.asyncServiceArea)),h["default"].isDefined(H.helperServices.syncVRP)&&(ba.syncVRPService=r["default"].stringify(H.helperServices.syncVRP)),h["default"].isDefined(H.helperServices.asyncVRP)&&(ba.asyncVRPService=r["default"].stringify(H.helperServices.asyncVRP)),h["default"].isDefined(H.helperServices.asyncLocationAllocation)&&(ba.asyncLocationAllocationService=r["default"].stringify(H.helperServices.asyncLocationAllocation)),
h["default"].isDefined(H.helperServices.routingUtilities)&&(ba.routingUtilitiesService=r["default"].stringify(H.helperServices.routingUtilities)),h["default"].isDefined(H.helperServices.traffic)&&(ba.trafficService=r["default"].stringify(H.helperServices.traffic)),h["default"].isDefined(H.helperServices.asyncODCostMatrix)&&(ba.asyncODCostMatrixService=r["default"].stringify(H.helperServices.asyncODCostMatrix)),u["default"].isPortal()&&(h["default"].isDefined(H.helperServices.analysis)&&(ba.analysisService=
r["default"].stringify(H.helperServices.analysis)),h["default"].isDefined(H.helperServices.asyncGeocode)&&(ba.asyncGeocodeService=r["default"].stringify(H.helperServices.asyncGeocode)),h["default"].isDefined(H.helperServices.geoenrichment)&&(ba.geoenrichmentService=r["default"].stringify(H.helperServices.geoenrichment)),h["default"].isDefined(H.helperServices.hydrology)&&(ba.hydrologyService=r["default"].stringify(H.helperServices.hydrology)),h["default"].isDefined(H.helperServices.orthomappingElevation)&&
(ba.orthomappingElevationService=r["default"].stringify(H.helperServices.orthomappingElevation)),h["default"].isDefined(H.helperServices.elevation)&&(ba.elevationService=r["default"].stringify(H.helperServices.elevation)),h["default"].isDefined(H.helperServices.elevationSync)&&(ba.elevationSyncService=r["default"].stringify(H.helperServices.elevationSync)),h["default"].isDefined(H.helperServices.defaultElevationLayers)&&(ba.elevation3DService=r["default"].stringify(H.helperServices.defaultElevationLayers))));
Y&&(ba.orgUrl=H.orgUrl,ba.orgEmail=H.orgEmail,ba.orgPhone=H.orgPhone);J&&(ba.access=H.access,ba.allSSL=H.allSSL,ba.commentsEnabled=H.commentsEnabled,ba.canSharePublic=H.canSharePublic,ba.canSearchPublic=H.canSearchPublic,ba.urlKey=H.urlKey,ba.canSignInIDP=H.canSignInIDP,ba.canSignInArcGIS=H.canSignInArcGIS,ba.useStandardizedQuery=H.useStandardizedQuery,ba.mfaEnabled=H.mfaEnabled,ba.mfaAdmins=r["default"].stringify(H.mfaAdmins),ba.authorizedCrossOriginDomains=r["default"].stringify(H.authorizedCrossOriginDomains),
ba.allowedOrigins=H.allowedOrigins,ba.allowedRedirectUris=r["default"].stringify(H.allowedRedirectUris),ba.updateUserProfileDisabled=H.updateUserProfileDisabled,ba.eueiEnabled=H.eueiEnabled,ba.contacts=r["default"].stringify(H.contacts||[]));O&&(ba.portalProperties=r["default"].stringify(H.portalProperties));H=Object.keys(ba);1===H.length&&"clearEmptyFields"===H[0]?null===K||void 0===K?void 0:K():(H=u["default"].getSecureUrl(x["default"].restBaseUrl)+"portals/self/update",u["default"].request({url:H,
content:ba},{usePost:!0}).then(K.bind(this),I.bind(this)))}};G.checkUsernames=function(H,K,I){var J="";0<(null===H||void 0===H?void 0:H.length)&&(J=H.join(","));u["default"].request({url:x["default"].restBaseUrl+"community/checkUsernames",content:{usernames:J}},{usePost:!0}).then(K,I)};G.getPendingAccountUsers=function(H,K,I){if(null!==u["default"].getUser()){var J=1,L=10;H=h["default"].isDefined(K.sortField)?K.sortField:void 0;var M=h["default"].isDefined(K.sortOrder)?K.sortOrder:void 0,N=h["default"].isDefined(K.type)?
K.type:void 0;h["default"].isDefined(K.start)&&(J=K.start);h["default"].isDefined(K.num)&&(L=K.num);K=x["default"].restBaseUrl+"portals/self/invitations?start\x3d"+J+"\x26num\x3d"+L;H&&(K+="\x26sortField\x3d"+H);M&&(K+="\x26sortOrder\x3d"+M);N&&(K+="\x26type\x3d"+N);u["default"].request({url:K}).then(I,I)}};G.getInvitation=function(H,K,I){null!==u["default"].getUser()&&u["default"].request({url:x["default"].restBaseUrl+"community/invitations/"+H}).then(K.bind(this),I)};G.acceptInvitation=function(H,
K,I){null!==u["default"].getUser()&&u["default"].request({url:x["default"].restBaseUrl+"community/invitations/"+H+"/accept",content:{invitationId:H}},{usePost:!0}).then(K.bind(this),I.bind(this))};G.updateUserRole=function(H,K,I,J){var L=null,M=u["default"].getUser();if(null!==M){L=M.accountId;var N=M.username||M.email;if(null!==L)if(N===H&&"account_admin"===M.role&&"account_admin"!==K){var O=new A["default"];m["default"].once(O._dialog,"hide",function(){O._dialog.destroyRecursive();O.destroyRecursive()});
O.onOkClick=function(){c["default"].byId("general-dialog").hide();I(null)};O.show(E["default"].common.errors.accountAdmin)}else u["default"].request({url:x["default"].restBaseUrl+"portals/self/updateUserRole",content:{user:H,role:K}},{usePost:!0}).then(I.bind(this),J.bind(this))}};G.deleteUser=function(H,K,I){null!==u["default"].getUser()&&u["default"].request({url:x["default"].restBaseUrl+"community/users/"+H+"/delete",content:{}},{usePost:!0}).then(K.bind(this),I.bind(this))};G.caseInsensitiveComparator=
function(H,K){H&&(H=H.toLowerCase());K&&(K=K.toLowerCase());return b["default"].basicComparator(H,K)};G.lastLoginComparator=function(H,K){var I,J=0===H||-1===H?void 0:H,L=0===K||-1===K?void 0:K,M=-1;(null===(I=x["default"].self)||void 0===I?0:I.isPortal)||!1===x["default"].isMultiTenant?M=b["default"].basicComparator(J,L):J===L?M=H===K?0:H<K?-1:1:J&&L&&H>K?M=1:J&&!L?M=1:!J&&L&&(M=-1);return M};G.getSupportedLanguages=function(H,K){return t["default"]({url:x["default"].restBaseUrl+"portals/languages",
content:{f:"json"},load:H,callbackParamName:"callback",error:K})};G.getSupportedRegions=function(H,K){return t["default"]({url:x["default"].restBaseUrl+"portals/regions",content:{f:"json",culture:k["default"].locale},load:H,callbackParamName:"callback",error:K})};G.getSupportedLanguagesAndRegions=function(){var H=new n["default"];f["default"]({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(K){H.resolve({languages:K.languages,regions:K.regions})},
function(K){H.resolve(K)});return H};G.displayedPortalNonSSLNotice=!1;return G}()})},"tslib/tslib":function(){var D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u;(function(w){function A(G,H){G!==E&&("function"===typeof Object.create?Object.defineProperty(G,"__esModule",{value:!0}):G.__esModule=!0);return function(K,I){return G[K]=H?H(K,I):I}}var E="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],
function(G){w(A(E,A(G)))}):"object"===typeof module&&"object"===typeof module.exports?w(A(E,A(module.exports))):w(A(E))})(function(w){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,H){G.__proto__=H}||function(G,H){for(var K in H)Object.prototype.hasOwnProperty.call(H,K)&&(G[K]=H[K])};D=function(G,H){function K(){this.constructor=G}if("function"!==typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");A(G,H);G.prototype=null===
H?Object.create(H):(K.prototype=H.prototype,new K)};B=Object.assign||function(G){for(var H,K=1,I=arguments.length;K<I;K++){H=arguments[K];for(var J in H)Object.prototype.hasOwnProperty.call(H,J)&&(G[J]=H[J])}return G};a=function(G,H){var K={},I;for(I in G)Object.prototype.hasOwnProperty.call(G,I)&&0>H.indexOf(I)&&(K[I]=G[I]);if(null!=G&&"function"===typeof Object.getOwnPropertySymbols){var J=0;for(I=Object.getOwnPropertySymbols(G);J<I.length;J++)0>H.indexOf(I[J])&&Object.prototype.propertyIsEnumerable.call(G,
I[J])&&(K[I[J]]=G[I[J]])}return K};c=function(G,H,K,I){var J=arguments.length,L=3>J?H:null===I?I=Object.getOwnPropertyDescriptor(H,K):I,M;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)L=Reflect.decorate(G,H,K,I);else for(var N=G.length-1;0<=N;N--)if(M=G[N])L=(3>J?M(L):3<J?M(H,K,L):M(H,K))||L;return 3<J&&L&&Object.defineProperty(H,K,L),L};k=function(G,H){return function(K,I){H(K,I,G)}};n=function(G,H){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(G,
H)};r=function(G,H,K,I){function J(L){return L instanceof K?L:new K(function(M){M(L)})}return new (K||(K=Promise))(function(L,M){function N(ba){try{Y(I.next(ba))}catch(ha){M(ha)}}function O(ba){try{Y(I["throw"](ba))}catch(ha){M(ha)}}function Y(ba){ba.done?L(ba.value):J(ba.value).then(N,O)}Y((I=I.apply(G,H||[])).next())})};f=function(G,H){function K(Y){return function(ba){return I([Y,ba])}}function I(Y){if(L)throw new TypeError("Generator is already executing.");for(;J;)try{if(L=1,M&&(N=Y[0]&2?M["return"]:
Y[0]?M["throw"]||((N=M["return"])&&N.call(M),0):M.next)&&!(N=N.call(M,Y[1])).done)return N;if(M=0,N)Y=[Y[0]&2,N.value];switch(Y[0]){case 0:case 1:N=Y;break;case 4:return J.label++,{value:Y[1],done:!1};case 5:J.label++;M=Y[1];Y=[0];continue;case 7:Y=J.ops.pop();J.trys.pop();continue;default:if(!(N=J.trys,N=0<N.length&&N[N.length-1])&&(6===Y[0]||2===Y[0])){J=0;continue}if(3===Y[0]&&(!N||Y[1]>N[0]&&Y[1]<N[3]))J.label=Y[1];else if(6===Y[0]&&J.label<N[1])J.label=N[1],N=Y;else if(N&&J.label<N[2])J.label=
N[2],J.ops.push(Y);else{N[2]&&J.ops.pop();J.trys.pop();continue}}Y=H.call(G,J)}catch(ba){Y=[6,ba],M=0}finally{L=N=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}var J={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},L,M,N,O;return O={next:K(0),"throw":K(1),"return":K(2)},"function"===typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O};m=function(G,H){for(var K in G)"default"===K||Object.prototype.hasOwnProperty.call(H,K)||u(H,G,K)};u=Object.create?
function(G,H,K,I){void 0===I&&(I=K);Object.defineProperty(G,I,{enumerable:!0,get:function(){return H[K]}})}:function(G,H,K,I){void 0===I&&(I=K);G[I]=H[K]};q=function(G){var H="function"===typeof Symbol&&Symbol.iterator,K=H&&G[H],I=0;if(K)return K.call(G);if(G&&"number"===typeof G.length)return{next:function(){G&&I>=G.length&&(G=void 0);return{value:G&&G[I++],done:!G}}};throw new TypeError(H?"Object is not iterable.":"Symbol.iterator is not defined.");};l=function(G,H){var K="function"===typeof Symbol&&
G[Symbol.iterator];if(!K)return G;var I=K.call(G),J,L=[];try{for(;(void 0===H||0<H--)&&!(J=I.next()).done;)L.push(J.value)}catch(N){var M={error:N}}finally{try{J&&!J.done&&(K=I["return"])&&K.call(I)}finally{if(M)throw M.error;}}return L};b=function(){for(var G=[],H=0;H<arguments.length;H++)G=G.concat(l(arguments[H]));return G};g=function(){for(var G=0,H=0,K=arguments.length;H<K;H++)G+=arguments[H].length;G=Array(G);var I=0;for(H=0;H<K;H++)for(var J=arguments[H],L=0,M=J.length;L<M;L++,I++)G[I]=J[L];
return G};e=function(G,H){for(var K=0,I=H.length,J=G.length;K<I;K++,J++)G[J]=H[K];return G};d=function(G){return this instanceof d?(this.v=G,this):new d(G)};h=function(G,H,K){function I(ha){O[ha]&&(Y[ha]=function(U){return new Promise(function(X,Z){1<ba.push([ha,U,X,Z])||J(ha,U)})})}function J(ha,U){try{var X=O[ha](U);X.value instanceof d?Promise.resolve(X.value.v).then(L,M):N(ba[0][2],X)}catch(Z){N(ba[0][3],Z)}}function L(ha){J("next",ha)}function M(ha){J("throw",ha)}function N(ha,U){(ha(U),ba.shift(),
ba.length)&&J(ba[0][0],ba[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=K.apply(G,H||[]),Y,ba=[];return Y={},I("next"),I("throw"),I("return"),Y[Symbol.asyncIterator]=function(){return this},Y};t=function(G){function H(J,L){K[J]=G[J]?function(M){return(I=!I)?{value:d(G[J](M)),done:"return"===J}:L?L(M):M}:L}var K,I;return K={},H("next"),H("throw",function(J){throw J;}),H("return"),K[Symbol.iterator]=function(){return this},K};z=function(G){function H(L){J[L]=
G[L]&&function(M){return new Promise(function(N,O){M=G[L](M);K(N,O,M.done,M.value)})}}function K(L,M,N,O){Promise.resolve(O).then(function(Y){L({value:Y,done:N})},M)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=G[Symbol.asyncIterator],J;return I?I.call(G):(G="function"===typeof q?q(G):G[Symbol.iterator](),J={},H("next"),H("throw"),H("return"),J[Symbol.asyncIterator]=function(){return this},J)};v=function(G,H){Object.defineProperty?Object.defineProperty(G,
"raw",{value:H}):G.raw=H;return G};var E=Object.create?function(G,H){Object.defineProperty(G,"default",{enumerable:!0,value:H})}:function(G,H){G["default"]=H};y=function(G){if(G&&G.__esModule)return G;var H={};if(null!=G)for(var K in G)"default"!==K&&Object.prototype.hasOwnProperty.call(G,K)&&u(H,G,K);E(H,G);return H};C=function(G){return G&&G.__esModule?G:{"default":G}};F=function(G,H,K,I){if("a"===K&&!I)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof H?
G!==H||!I:!H.has(G))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===K?I:"a"===K?I.call(G):I?I.value:H.get(G)};x=function(G,H,K,I,J){if("m"===I)throw new TypeError("Private method is not writable");if("a"===I&&!J)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof H?G!==H||!J:!H.has(G))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===I?J.call(G,
K):J?J.value=K:H.set(G,K),K};w("__extends",D);w("__assign",B);w("__rest",a);w("__decorate",c);w("__param",k);w("__metadata",n);w("__awaiter",r);w("__generator",f);w("__exportStar",m);w("__createBinding",u);w("__values",q);w("__read",l);w("__spread",b);w("__spreadArrays",g);w("__spreadArray",e);w("__await",d);w("__asyncGenerator",h);w("__asyncDelegator",t);w("__asyncValues",z);w("__makeTemplateObject",v);w("__importStar",y);w("__importDefault",C);w("__classPrivateFieldGet",F);w("__classPrivateFieldSet",
x)})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,B,a,c){var k=D.some;return function(n){var r,f;B.isArray(n)?f=n:n&&"object"===typeof n&&(r=n);var m=[];if(r){f=[];for(var q in r)Object.hasOwnProperty.call(r,q)&&(m.push(q),f.push(r[q]));var l={}}else f&&(l=[]);if(!f||!f.length)return(new a).resolve(l);var b=new a;b.promise.always(function(){l=m=null});var g=f.length;k(f,function(e,d){r||m.push(d);c(e,function(h){b.isFulfilled()||(l[m[d]]=
h,0===--g&&b.resolve(l))},b.reject);return b.isFulfilled()});return b.promise}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(D,B,a,c){D=new D;B.id=c.safeMixin(D,a);return B.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h){B=B([d],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(t){k.mixin(this,t);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(t,z,v){this._nls||(this._nls=h.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var y=this._loginDialog,C=v&&v.error,F=v&&v.token,x=new c(function(){y.onCancel()});if(y.open)return t=Error("BUSY"),t.name="identity-manager:busy",t.code="IdentityManager.1",t.log=!!a.isDebug,x.errback(t),x;g.hide(y.errMsg_);C&&403==C.code&&F&&(r.set(y.errMsg_,"innerHTML",this._nls.forbidden),
g.show(y.errMsg_));y.dfd_=x;y.serverInfo_=z;y.resUrl_=t;y.admin_=v&&v.isAdmin;r.set(y.resLink_,{title:t,innerHTML:"("+(this.getResourceName(t)||this._nls.lblItem)+")"});r.set(y.serverLink_,{title:z.server,innerHTML:(-1!==z.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":z.server)+" "});y.txtPwd_.set("value","");y.show();return x},_createLoginDialog:function(){var t=this._nls,z=b.substitute(t,this._dialogContent);z=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},z);var v=new q({title:t.title,content:z,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(y){y.charOrCode===f.ENTER&&this.execute_()},execute_:function(){var y=this.txtUser_.get("value"),C=this.txtPwd_.get("value"),F=this.dfd_,x=this;if(this.form_.validate()&&y&&C){this.btnSubmit_.set("label",t.lblSigning);var u=l.id.findCredential(x.resUrl_,y),w=function(A){x.btnSubmit_.set("label",
t.lblOk);x.btnSubmit_.set("disabled",!1);g.hide(x.errMsg_);x.hide();q._DialogLevelManager.hide(x);var E=x.serverInfo_;x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;var G=u;if(A){var H=A.token;var K=b.isDefined(A.expires)?Number(A.expires):null;var I=!!A.ssl;G?(G.userId=y,G.token=H,G.expires=K,G.validity=A.validity,G.ssl=I,G.creationTime=(new Date).getTime()):G=new e({userId:y,server:E.server,token:H,expires:K,ssl:I,isAdmin:x.admin_,validity:A.validity})}F.callback(G)};u&&!u._enqueued?w():(x.btnSubmit_.set("disabled",
!0),x.generateDfd_=l.id.generateToken(this.serverInfo_,{username:y,password:C},{isAdmin:this.admin_}).addCallback(w).addErrback(function(A){x.btnSubmit_.set("disabled",!1);x.generateDfd_=null;x.btnSubmit_.set("label",t.lblOk);r.set(x.errMsg_,"innerHTML",A&&A.code?t.invalidUser:t.noAuthService);g.show(x.errMsg_)}))}},cancel_:function(){v.generateDfd_&&v.generateDfd_.cancel();var y=v.dfd_,C=v.resUrl_,F=v.serverInfo_;v.btnSubmit_.set("disabled",!1);v.dfd_=v.serverInfo_=v.generateDfd_=v.resUrl_=null;
g.hide(v.errMsg_);q._DialogLevelManager.hide(v);v.esriIdMgr_.onDialogCancel({resourceUrl:C,serverInfo:F});C=Error("ABORTED");C.name="identity-manager:user-aborted";C.code="IdentityManager.2";C.log=!!a.isDebug;y.errback(C)}});z=v.domNode;v.form_=m.byNode(D.query(".esriIdForm",z)[0]);v.txtUser_=m.byNode(D.query(".esriIdUser",z)[0]);v.txtPwd_=m.byNode(D.query(".esriIdPwd",z)[0]);v.btnSubmit_=m.byNode(D.query(".esriIdSubmit",z)[0]);v.btnCancel_=m.byNode(D.query(".esriIdCancel",z)[0]);v.resLink_=D.query(".resLink",
z)[0];v.serverLink_=D.query(".serverLink",z)[0];v.errMsg_=D.query(".esriErrorMsg",z)[0];v.connect(v.txtUser_,"onKeyPress",v.keypressed_);v.connect(v.txtPwd_,"onKeyPress",v.keypressed_);v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v}});return l.IdentityManagerDialog=l.IdentityManager=B})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I){function J(){}var L=new k;L.resolve(!0);F=c("dijit._DialogBase"+(h("dojo-bidi")?"_NoBidi":""),[u,A,E,w],{templateString:I,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:F.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(Y){this._set("draggable",Y)},maxRatio:.9,
closable:!0,_setClosableAttr:function(Y){this.closeButtonNode.style.display=Y?"":"none";this._set("closable",Y)},postMixInProperties:function(){var Y=l.getLocalization("dijit","common");g.mixin(this,Y);this.inherited(arguments)},postCreate:function(){m.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",g.hitch(this,"hide"),!0);a.after(this,"onCancel",g.hitch(this,"hide"),!0);e(this.closeButtonNode,
t.press,function(Y){Y.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&N.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();C.focus(this._firstFocusItem)},_endDrag:function(){var Y=f.position(this.domNode),ba=z.getBox(this.ownerDocument);Y.y=Math.min(Math.max(Y.y,0),ba.h-Y.h);Y.x=Math.min(Math.max(Y.x,0),ba.w-Y.w);this._relativePosition=Y;this._position()},
_setup:function(){var Y=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==h("ie")?y:v)(Y,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",g.hitch(this,"_endDrag"),!0)):r.add(Y,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":B.map(this["class"].split(/\s/),function(ba){return ba+"_underlay"}).join(" "),_onKeyDown:g.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!r.contains(this.ownerDocumentBody,
"dojoMove")){var Y=this.domNode,ba=z.getBox(this.ownerDocument),ha=this._relativePosition,U=f.position(Y);m.set(Y,{left:Math.floor(ba.l+(ha?Math.min(ha.x,ba.w-U.w):(ba.w-U.w)/2))+"px",top:Math.floor(ba.t+(ha?Math.min(ha.y,ba.h-U.h):(ba.h-U.h)/2))+"px"})}},_onKey:function(Y){if(Y.keyCode==b.TAB){this._getFocusItems();var ba=Y.target;this._firstFocusItem==this._lastFocusItem?(Y.stopPropagation(),Y.preventDefault()):ba==this._firstFocusItem&&Y.shiftKey?(C.focus(this._lastFocusItem),Y.stopPropagation(),
Y.preventDefault()):ba!=this._lastFocusItem||Y.shiftKey||(C.focus(this._firstFocusItem),Y.stopPropagation(),Y.preventDefault())}else this.closable&&Y.keyCode==b.ESCAPE&&(this.onCancel(),Y.stopPropagation(),Y.preventDefault())},show:function(){if(this.open)return L.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),N.hide(this));var Y=z.get(this.ownerDocument);this._modalconnects.push(e(Y,
"scroll",g.hitch(this,"resize",null)));this._modalconnects.push(e(this.domNode,"keydown",g.hitch(this,"_onKey")));m.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new k(g.hitch(this,function(){ba.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,J);Y=this._fadeInDeferred.promise;var ba=q.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:g.hitch(this,function(){N.show(this,this.underlayAttrs)}),
onEnd:g.hitch(this,function(){this.autofocus&&N.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return Y},hide:function(){if(!this._alreadyInitialized||!this.open)return L.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new k(g.hitch(this,function(){ba.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,J);this._fadeOutDeferred.then(g.hitch(this,"onHide"));
var Y=this._fadeOutDeferred.promise;var ba=q.fadeOut({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,function(){this.domNode.style.display="none";N.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var ha;ha=this._modalconnects.pop();)ha.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return Y},resize:function(Y){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!Y){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),B.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(X){X&&m.set(X,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var ba=z.getBox(this.ownerDocument);ba.w*=this.maxRatio;ba.h*=this.maxRatio;var ha=f.position(this.domNode);
this._shrunk=!1;ha.w>=ba.w&&(Y={w:ba.w},f.setMarginBox(this.domNode,Y),ha=f.position(this.domNode),this._shrunk=!0);ha.h>=ba.h&&(Y||(Y={w:ha.w}),Y.h=ba.h,this._shrunk=!0);Y&&(Y.w||(Y.w=ha.w),Y.h||(Y.h=ha.h))}if(Y){f.setMarginBox(this.domNode,Y);ba=[];this.titleBar&&ba.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&ba.push({domNode:this.actionBarNode,region:"bottom"});ha={domNode:this.containerNode,region:"center"};ba.push(ha);var U=K.marginBox2contentBox(this.domNode,Y);K.layoutChildren(this.domNode,
U,ba);this._singleChild?(ba=K.marginBox2contentBox(this.containerNode,ha),this._singleChild.resize({w:ba.w,h:ba.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();h("touch")||Y||this._position()}},_layoutChildren:function(){B.forEach(this.getChildren(),function(Y){Y.resize&&Y.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();
for(var Y;Y=this._modalconnects.pop();)Y.remove();N.hide(this);this.inherited(arguments)}});h("dojo-bidi")&&(F=c("dijit._DialogBase",F,{_setTitleAttr:function(Y){this._set("title",Y);this.titleNode.innerHTML=Y;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(Y){this._created&&this.textDir!=Y&&(this._set("textDir",Y),this.set("title",this.title))}}));var M=c("dijit.Dialog",[H,F],{});M._DialogBase=F;var N=M._DialogLevelManager={_beginZIndex:950,show:function(Y,ba){O[O.length-1].focus=C.curNode;
var ha=O[O.length-1].dialog?O[O.length-1].zIndex+2:M._DialogLevelManager._beginZIndex;m.set(Y.domNode,"zIndex",ha);G.show(ba,ha-1);O.push({dialog:Y,underlayAttrs:ba,zIndex:ha})},hide:function(Y){if(O[O.length-1].dialog==Y){O.pop();var ba=O[O.length-1];1==O.length?G.hide():G.show(ba.underlayAttrs,ba.zIndex-1);if(Y.refocus&&(Y=ba.focus,!ba.dialog||Y&&n.isDescendant(Y,ba.dialog.domNode)||(ba.dialog._getFocusItems(),Y=ba.dialog._firstFocusItem),Y))try{Y.focus()}catch(ha){}}else ba=B.indexOf(B.map(O,function(ha){return ha.dialog}),
Y),-1!=ba&&O.splice(ba,1)},isTop:function(Y){return O[O.length-1].dialog==Y}},O=M._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];C.watch("curNode",function(Y,ba,ha){Y=O[O.length-1].dialog;if(ha&&Y&&!Y._fadeOutDeferred&&ha.ownerDocument==Y.ownerDocument){do if(ha==Y.domNode||r.contains(ha,"dijitPopup"))return;while(ha=ha.parentNode);Y.focus()}});h("dijit-legacy-requires")&&d(0,function(){D(["dijit/TooltipDialog"])});return M})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(D,B){var a=B.prototype.onMove;return D("dojo.dnd.TimedMoveable",B,{timeout:40,constructor:function(c,k){k||(k={});k.timeout&&"number"==typeof k.timeout&&0<=k.timeout&&(this.timeout=k.timeout)},onMoveStop:function(c){c._timer&&(clearTimeout(c._timer),a.call(this,c,c._leftTop));B.prototype.onMoveStop.apply(this,arguments)},onMove:function(c,k){c._leftTop=k;if(!c._timer){var n=this;c._timer=setTimeout(function(){c._timer=null;a.call(n,c,c._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(D,B,a,c,k,n){return B("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(r){var f=[];D.forEach(r||this.getChildren(),function(m){"value"in m?f.push(m):f=f.concat(this._getDescendantFormWidgets(m.getChildren()))},this);return f},reset:function(){D.forEach(this._getDescendantFormWidgets(),function(r){r.reset&&r.reset()})},validate:function(){var r=!1;return D.every(D.map(this._getDescendantFormWidgets(),function(f){f._hasBeenBlurred=!0;var m=f.disabled||!f.validate||
f.validate();m||r||(n.scrollIntoView(f.containerNode||f.domNode),f.focus(),r=!0);return m}),function(f){return f})},setValues:function(r){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",r)},_setValueAttr:function(r){var f={};D.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(f[b.name]||(f[b.name]=[])).push(b)});for(var m in f)if(f.hasOwnProperty(m)){var q=f[m],l=c.getObject(m,!1,r);void 0!==l&&(l=[].concat(l),
"boolean"==typeof q[0].checked?D.forEach(q,function(b){b.set("value",-1!=D.indexOf(l,b._get("value")))}):q[0].multiple?q[0].set("value",l):D.forEach(q,function(b,g){b.set("value",l[g])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var r={};D.forEach(this._getDescendantFormWidgets(),function(f){var m=f.name;if(m&&!f.disabled){var q=f.get("value");"boolean"==typeof f.checked?
/Radio/.test(f.declaredClass)?!1!==q?c.setObject(m,q,r):(q=c.getObject(m,!1,r),void 0===q&&c.setObject(m,null,r)):(f=c.getObject(m,!1,r),f||(f=[],c.setObject(m,f,r)),!1!==q&&f.push(q)):(f=c.getObject(m,!1,r),"undefined"!=typeof f?c.isArray(f)?f.push(q):c.setObject(m,[f,q],r):c.setObject(m,q,r))}});return r},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var r=D.map(this._descendants,function(f){return f.get("state")||""});return 0<=D.indexOf(r,"Error")?
"Error":0<=D.indexOf(r,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(r){this._descendants=this._getDescendantFormWidgets();D.forEach(this._descendants,function(f){f._started||f.startup()});r||this._onChildChange()},_onChildChange:function(r){r&&"state"!=r&&"disabled"!=r||this._set("state",this._getState());r&&"value"!=r&&"disabled"!=r&&"checked"!=r||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var r=this;this.own(k(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(f){f.target!=r.domNode&&r._onChildChange(f.type.replace("attrmodified-",""))}));this.watch("state",function(f,m,q){this.onValidStateChange(""==q)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(D,B){return D("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=B._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b){var g=D("dijit.DialogUnderlay",[f,m],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(e){c.set(this.node,"id",e+"_underlay");this._set("dialogId",e)},_setClassAttr:function(e){this.node.className="dijitDialogUnderlay "+e;this._set("class",e)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(n(this.domNode,"keydown",B.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var e=this.node.style,d=this.domNode.style;d.display="none";var h=r.getBox(this.ownerDocument);d.top=h.t+"px";d.left=h.l+"px";e.width=h.w+"px";e.height=h.h+"px";d.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new q(this.domNode);var e=r.get(this.ownerDocument);this._modalConnects=[l.on("resize",B.hitch(this,"layout")),n(e,"scroll",
B.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});g.show=function(e,d){var h=g._singleton;!h||h._destroyed?h=b._underlay=g._singleton=new g(e):e&&h.set(e);k.set(h.domNode,"zIndex",d);h.open||h.show()};g.hide=function(){var e=
g._singleton;e&&!e._destroyed&&e.hide()};return g})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h){return m("dijit.layout.ContentPane",[a,c,k],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:D._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(t,
z,v){var y=new v(t,z);return!y.href&&y._contentSetter&&y._contentSetter.parseDeferred&&!y._contentSetter.parseDeferred.isFulfilled()?y._contentSetter.parseDeferred.then(function(){return y}):y},create:function(t,z){if(!(t&&t.template||!z||"href"in t||"content"in t)){z=l.byId(z);for(var v=z.ownerDocument.createDocumentFragment();z.firstChild;)v.appendChild(z.firstChild);t=B.delegate(t,{content:v})}this.inherited(arguments,[t,z])},postMixInProperties:function(){this.inherited(arguments);var t=d.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=n.substitute(this.loadingMessage,t);this.errorMessage=n.substitute(this.errorMessage,t)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!B.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),
function(t){t._started||t._destroyed||!B.isFunction(t.startup)||(t.startup(),t._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!B.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},setHref:function(t){D.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",t)},_setHrefAttr:function(t){this.cancel();this.onLoadDeferred=new q(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,
"onLoad"));this._set("href",t);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(t){D.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",t)},_setContentAttr:function(t){this._set("href","");this.cancel();this.onLoadDeferred=new q(B.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._setContent(t||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(t){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new q(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var t=this,z={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};B.isObject(this.ioArgs)&&B.mixin(z,this.ioArgs);var v=this._xhrDfd=(this.ioMethod||e.get)(z),y;v.then(function(C){y=C;try{return t._isDownloaded=!0,t._setContent(C,!1)}catch(F){t._onError("Content",
F)}},function(C){v.canceled||t._onError("Download",C);delete t._xhrDfd;return C}).then(function(){t.onDownloadEnd();delete t._xhrDfd;return y});delete this._hrefChanged},_onLoadHandler:function(t){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(t)}catch(z){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(t){}},destroyDescendants:function(t){this.isLoaded&&this._onUnloadHandler();var z=this._contentSetter;f.forEach(this.getChildren(),function(v){v.destroyRecursive?
v.destroyRecursive(t):v.destroy&&v.destroy(t);v._destroyed=!0});z&&(f.forEach(z.parseResults,function(v){v._destroyed||(v.destroyRecursive?v.destroyRecursive(t):v.destroy&&v.destroy(t),v._destroyed=!0)}),delete z.parseResults);t||g.empty(this.containerNode);delete this._singleChild},_setContent:function(t,z){t=this.preprocessContent(t);this.destroyDescendants();var v=this._contentSetter;v&&v instanceof r._ContentSetter||(v=this._contentSetter=new r._ContentSetter({node:this.containerNode,_onError:B.hitch(this,
this._onError),onContentError:B.hitch(this,function(F){F=this.onContentError(F);try{this.containerNode.innerHTML=F}catch(x){}})}));var y=B.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!t.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});y=v.set(B.isObject(t)&&t.domNode?t.domNode:t,y);var C=this;return h(y&&y.then?y:v.parseDeferred,function(){delete C._contentSetterParams;
z||(C._started&&(C._startChildren(),C._scheduleLayout()),C._onLoadHandler(t))})},preprocessContent:function(t){return t},_onError:function(t,z,v){this.onLoadDeferred.reject(z);t=this["on"+t+"Error"].call(this,z);v||t&&this._setContent(t,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(D,B,a,c,k,n,r,f,m,q){return B("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var l=this.getParent();this._childOfLayoutWidget=l&&l.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(m.on("resize",n.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var l=[],b=!1;r("\x3e *",this.containerNode).some(function(g){var e=
f.byNode(g);e&&e.resize?l.push(e):!/script|link|style/i.test(g.nodeName)&&g.offsetHeight&&(b=!0)});this._singleChild=1!=l.length||b?null:l[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(l,b){this._resizeCalled=!0;this._scheduleLayout(l,b)},_scheduleLayout:function(l,b){this._isShown()?this._layout(l,b):(this._needLayout=!0,this._changeSize=l,this._resultSize=b)},_layout:function(l,b){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
l&&c.setMarginBox(this.domNode,l);var g=this.containerNode;if(g===this.domNode){var e=b||{};n.mixin(e,l||{});"h"in e&&"w"in e||(e=n.mixin(c.getMarginBox(g),e));this._contentBox=q.marginBox2contentBox(g,e)}else this._contentBox=c.getContentBox(g);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var l=this._contentBox||c.getContentBox(this.containerNode);this._singleChild.resize({w:l.w,h:l.h})}else{l=this.getChildren();for(var b,
g=0;b=l[g++];)b.resize&&b.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var l=this.domNode,b=this.domNode.parentNode;return"none"!=l.style.display&&"hidden"!=l.style.visibility&&!a.contains(l,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(D,B,a,c,k){function n(m){return m.substring(0,1).toUpperCase()+m.substring(1)}function r(m,q){var l=m.resize?m.resize(q):a.setMarginBox(m.domNode,q);l?k.mixin(m,l):(k.mixin(m,a.getMarginBox(m.domNode)),k.mixin(m,q))}var f={marginBox2contentBox:function(m,q){var l=c.getComputedStyle(m),b=a.getMarginExtents(m,l),g=a.getPadBorderExtents(m,l);return{l:c.toPixelValue(m,l.paddingLeft),t:c.toPixelValue(m,l.paddingTop),w:q.w-
(b.w+g.w),h:q.h-(b.h+g.h)}},layoutChildren:function(m,q,l,b,g){q=k.mixin({},q);B.add(m,"dijitLayoutContainer");l=D.filter(l,function(e){return"center"!=e.region&&"client"!=e.layoutAlign}).concat(D.filter(l,function(e){return"center"==e.region||"client"==e.layoutAlign}));D.forEach(l,function(e){var d=e.domNode,h=e.region||e.layoutAlign;if(!h)throw Error("No region setting for "+e.id);var t=d.style;t.left=q.l+"px";t.top=q.t+"px";t.position="absolute";B.add(d,"dijitAlign"+n(h));d={};b&&b==e.id&&(d["top"==
e.region||"bottom"==e.region?"h":"w"]=g);"leading"==h&&(h=e.isLeftToRight()?"left":"right");"trailing"==h&&(h=e.isLeftToRight()?"right":"left");"top"==h||"bottom"==h?(d.w=q.w,r(e,d),q.h-=e.h,"top"==h?q.t+=e.h:t.top=q.t+q.h+"px"):"left"==h||"right"==h?(d.h=q.h,r(e,d),q.w-=e.w,"left"==h?q.l+=e.w:t.left=q.l+q.w+"px"):"client"!=h&&"center"!=h||r(e,q)})}};k.setObject("dijit.layout.utils",f);return f})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(D,B,a,c,k,n,r){var f=0,m={_secureForInnerHtml:function(q){return q.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:n.empty,_setNodeContent:function(q,l){n.empty(q);if(l)if("number"==typeof l&&(l=l.toString()),"string"==typeof l&&(l=n.toDom(l,q.ownerDocument)),!l.nodeType&&B.isArrayLike(l))for(var b=l.length,g=0;g<l.length;g=b==l.length?g+1:0)n.place(l[g],q,"last");else n.place(l,q,"last");return q},_ContentSetter:c("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:D._scopeName,startup:!0,constructor:function(q,l){B.mixin(this,q||{});l=this.node=k.byId(this.node||l);this.id||(this.id=["Setter",l?l.id||l.tagName:"",f++].join("_"))},set:function(q,l){void 0!==q&&(this.content=q);"number"==typeof q&&(q=q.toString());l&&this._mixin(l);this.onBegin();this.setContent();var b=this.onEnd();return b&&b.then?b:this.node},setContent:function(){var q=this.node;if(!q)throw Error(this.declaredClass+
": setContent given no node");try{q=m._setNodeContent(q,this.content)}catch(b){var l=this.onContentError(b);try{q.innerHTML=l}catch(g){}}this.node=q},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(q){q.destroy&&q.destroy()}),delete this.parseResults);n.empty(this.node)},onBegin:function(){var q=this.content;if(B.isString(q)&&(this.cleanContent&&
(q=m._secureForInnerHtml(q)),this.extractContent)){var l=q.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);l&&(q=l[1])}this.empty();this.content=q;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(q){return"Error occurred setting content: "+q},onExecError:function(q){return"Error occurred executing scripts: "+q},_mixin:function(q){var l=
{},b;for(b in q)b in l||(this[b]=q[b])},_parse:function(){var q=this.node;try{var l={};a.forEach(["dir","lang","textDir"],function(g){this[g]&&(l[g]=this[g])},this);var b=this;this.parseDeferred=r.parse({rootNode:q,noStart:!this.startup,inherited:l,scope:this.parserScope}).then(function(g){return b.parseResults=g},function(g){b._onError("Content",g,"Error parsing in _ContentSetter#"+b.id)})}catch(g){this._onError("Content",g,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(q,l,b){q=
this["on"+q+"Error"].call(this,l);b||q&&m._setNodeContent(this.node,q,!0)}}),set:function(q,l,b){void 0==l&&(l="");"number"==typeof l&&(l=l.toString());return b?(new m._ContentSetter(B.mixin(b,{content:l,node:q}))).set():m._setNodeContent(q,l,!0)}};B.setObject("dojo.html",m);return m})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h){function t(F){return eval("("+F+")")}function z(F){var x=F._nameCaseMap,u=F.prototype;if(!x||x._extendCnt<y){x=F._nameCaseMap={};for(var w in u)"_"!==w.charAt(0)&&(x[w.toLowerCase()]=w);x._extendCnt=y}return x}function v(F,x){x||(x=D);var u=x._dojoParserCtorMap||(x._dojoParserCtorMap={}),w=F.join();if(!u[w]){for(var A=[],E=0,G=F.length;E<G;E++){var H=F[E];A[A.length]=u[H]=u[H]||a.getObject(H)||~H.indexOf("/")&&x(H)}E=A.shift();u[w]=A.length?E.createSubclass?
E.createSubclass(A):E.extend.apply(E,A):E}return u[w]}new Date("X");var y=0;m.after(a,"extend",function(){y++},!0);var C={_clearCache:function(){y++;_ctorMap={}},_functionFromScript:function(F,x){var u="",w="",A=F.getAttribute(x+"args")||F.getAttribute("args"),E=F.getAttribute("with");A=(A||"").split(/\s*,\s*/);E&&E.length&&c.forEach(E.split(/\s*,\s*/),function(G){u+="with("+G+"){";w+="}"});return new Function(A,u+F.innerHTML+w)},instantiate:function(F,x,u){x=x||{};u=u||{};var w=(u.scope||B._scopeName)+
"Type",A="data-"+(u.scope||B._scopeName)+"-",E=A+"type",G=A+"mixins",H=[];c.forEach(F,function(K){var I=w in x?x[w]:K.getAttribute(E)||K.getAttribute(w);if(I){var J=K.getAttribute(G);I=J?[I].concat(J.split(/\s*,\s*/)):[I];H.push({node:K,types:I})}});return this._instantiate(H,x,u)},_instantiate:function(F,x,u,w){function A(E){x._started||u.noStart||c.forEach(E,function(G){"function"!==typeof G.startup||G._started||G.startup()});return E}F=c.map(F,function(E){var G=E.ctor||v(E.types,u.contextRequire);
if(!G)throw Error("Unable to resolve constructor for: '"+E.types.join()+"'");return this.construct(G,E.node,x,u,E.scripts,E.inherited)},this);return w?q(F).then(A):A(F)},construct:function(F,x,u,w,A,E){function G(da){O&&a.setObject(O,da);for(M=0;M<U.length;M++)m[U[M].advice||"after"](da,U[M].method,a.hitch(da,U[M].func),!0);for(M=0;M<X.length;M++)X[M].call(da);for(M=0;M<Z.length;M++)da.watch(Z[M].prop,Z[M].func);for(M=0;M<P.length;M++)d(da,P[M].event,P[M].func);return da}var H=F&&F.prototype;w=w||
{};var K={};w.defaults&&a.mixin(K,w.defaults);E&&a.mixin(K,E);if(g("dom-attributes-explicit"))var I=x.attributes;else g("dom-attributes-specified-flag")?I=c.filter(x.attributes,function(da){return da.specified}):(E=(/^input$|^img$/i.test(x.nodeName)?x:x.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),I=c.map(E.split(/\s+/),function(da){var ia=da.toLowerCase();return{name:da,value:"LI"==x.nodeName&&"value"==da||"enctype"==
ia?x.getAttribute(ia):x.getAttributeNode(ia).value}}));var J=w.scope||B._scopeName;E="data-"+J+"-";var L={};"dojo"!==J&&(L[E+"props"]="data-dojo-props",L[E+"type"]="data-dojo-type",L[E+"mixins"]="data-dojo-mixins",L[J+"type"]="dojotype",L[E+"id"]="data-dojo-id");var M=0,N;J=[];for(var O,Y;N=I[M++];){var ba=N.name,ha=ba.toLowerCase();N=N.value;switch(L[ha]||ha){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":Y=N;break;case "data-dojo-id":case "jsid":O=N;break;
case "data-dojo-attach-point":case "dojoattachpoint":K.dojoAttachPoint=N;break;case "data-dojo-attach-event":case "dojoattachevent":K.dojoAttachEvent=N;break;case "class":K["class"]=x.className;break;case "style":K.style=x.style&&x.style.cssText;break;default:if(ba in H||(ba=z(F)[ha]||ba),ba in H)switch(typeof H[ba]){case "string":K[ba]=N;break;case "number":K[ba]=N.length?Number(N):NaN;break;case "boolean":K[ba]="false"!=N.toLowerCase();break;case "function":""===N||-1!=N.search(/[^\w\.]+/i)?K[ba]=
new Function(N):K[ba]=a.getObject(N,!1)||new Function(N);J.push(ba);break;default:ha=H[ba],K[ba]=ha&&"length"in ha?N?N.split(/\s*,\s*/):[]:ha instanceof Date?""==N?new Date(""):"now"==N?new Date:l.fromISOString(N):ha instanceof f?B.baseUrl+N:t(N)}else K[ba]=N}}for(I=0;I<J.length;I++)L=J[I].toLowerCase(),x.removeAttribute(L),x[L]=null;if(Y)try{Y=t.call(w.propsThis,"{"+Y+"}"),a.mixin(K,Y)}catch(da){throw Error(da.toString()+" in data-dojo-props\x3d'"+Y+"'");}a.mixin(K,u);A||(A=F&&(F._noScript||H._noScript)?
[]:e("\x3e script[type^\x3d'dojo/']",x));var U=[],X=[],Z=[],P=[];if(A)for(M=0;M<A.length;M++)L=A[M],x.removeChild(L),u=L.getAttribute(E+"event")||L.getAttribute("event"),w=L.getAttribute(E+"prop"),Y=L.getAttribute(E+"method"),J=L.getAttribute(E+"advice"),I=L.getAttribute("type"),L=this._functionFromScript(L,E),u?"dojo/connect"==I?U.push({method:u,func:L}):"dojo/on"==I?P.push({event:u,func:L}):K[u]=L:"dojo/aspect"==I?U.push({method:Y,advice:J,func:L}):"dojo/watch"==I?Z.push({prop:w,func:L}):X.push(L);
F=(A=F.markupFactory||H.markupFactory)?A(K,x,F):new F(K,x);return F.then?F.then(G):G(F)},scan:function(F,x){function u(U){if(!U.inherited){U.inherited={};var X=U.node,Z=u(U.parent);X={dir:X.getAttribute("dir")||Z.dir,lang:X.getAttribute("lang")||Z.lang,textDir:X.getAttribute(I)||Z.textDir};for(var P in X)X[P]&&(U.inherited[P]=X[P])}return U.inherited}var w=[],A=[],E={},G=(x.scope||B._scopeName)+"Type",H="data-"+(x.scope||B._scopeName)+"-",K=H+"type",I=H+"textdir";H+="mixins";var J=F.firstChild,L=
x.inherited;if(!L){L=function P(X,Z){return X.getAttribute&&X.getAttribute(Z)||X.parentNode&&P(X.parentNode,Z)};L={dir:L(F,"dir"),lang:L(F,"lang"),textDir:L(F,I)};for(var M in L)L[M]||delete L[M]}L={inherited:L};for(var N,O;;)if(J)if(1!=J.nodeType)J=J.nextSibling;else if(N&&"script"==J.nodeName.toLowerCase())(Y=J.getAttribute("type"))&&/^dojo\/\w/i.test(Y)&&N.push(J),J=J.nextSibling;else if(O)J=J.nextSibling;else{var Y=J.getAttribute(K)||J.getAttribute(G);M=J.firstChild;if(Y||M&&(3!=M.nodeType||M.nextSibling)){O=
null;if(Y){var ba=J.getAttribute(H);N=ba?[Y].concat(ba.split(/\s*,\s*/)):[Y];try{O=v(N,x.contextRequire)}catch(U){}O||c.forEach(N,function(U){~U.indexOf("/")&&!E[U]&&(E[U]=!0,A[A.length]=U)});ba=O&&!O.prototype._noScript?[]:null;L={types:N,ctor:O,parent:L,node:J,scripts:ba};L.inherited=u(L);w.push(L)}else L={node:J,scripts:N,parent:L};N=ba;O=J.stopParser||O&&O.prototype.stopParser&&!x.template;J=M}else J=J.nextSibling}else{if(!L||!L.node)break;J=L.node.nextSibling;O=!1;L=L.parent;N=L.scripts}var ha=
new b;A.length?(x.contextRequire||D)(A,function(){ha.resolve(c.filter(w,function(U){if(!U.ctor)try{U.ctor=v(U.types,x.contextRequire)}catch(P){}for(var X=U.parent;X&&!X.types;)X=X.parent;var Z=U.ctor&&U.ctor.prototype;U.instantiateChildren=!(Z&&Z.stopParser&&!x.template);U.instantiate=!X||X.instantiate&&X.instantiateChildren;return U.instantiate}))}):ha.resolve(w);return ha.promise},_require:function(F,x){var u=t("{"+F.innerHTML+"}"),w=[],A=[],E=new b,G=x&&x.contextRequire||D,H;for(H in u)w.push(H),
A.push(u[H]);G(A,function(){for(var K=0;K<w.length;K++)a.setObject(w[K],arguments[K]);E.resolve(arguments)});return E.promise},_scanAmd:function(F,x){var u=new b,w=u.promise;u.resolve(!0);var A=this;e("script[type\x3d'dojo/require']",F).forEach(function(E){w=w.then(function(){return A._require(E,x)});E.parentNode.removeChild(E)});return w},parse:function(F,x){!F||"string"==typeof F||"nodeType"in F||(x=F,F=x.rootNode);var u=F?n.byId(F):r.body();x=x||{};var w=x.template?{template:!0}:{},A=[],E=this,
G=this._scanAmd(u,x).then(function(){return E.scan(u,x)}).then(function(H){return E._instantiate(H,w,x,!0)}).then(function(H){return A=A.concat(H)}).otherwise(function(H){throw H;});a.mixin(A,G);return A}};B.parser=C;k.parseOnLoad&&h(100,C,"parse");return C})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(D,B,a,c){D=D(c.Credential,{});return a.Credential=D})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v){var y={},C=function(A){var E=(new n(A.owningSystemUrl)).host;A=(new n(A.server)).host;var G=/.+\.arcgis\.com$/i;return G.test(E)&&G.test(A)},F=function(A,E){return!!(C(A)&&E&&c.some(E,function(G){return G.test(A.server)}))},x=null,u=null;try{x=window.localStorage,u=window.sessionStorage}catch(A){}r=D(t,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=
[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();m(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:e.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(A){var E=this.serverInfos;E?(A=c.filter(A,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=E.concat(A)):
this.serverInfos=A;c.forEach(A,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var H=l.defaults.io.corsEnabledServers,K=this._getOrigin(G.tokenServiceUrl);e.canUseXhr(G.server)||H.push(G.server.replace(/^https?:\/\//i,""));e.canUseXhr(K)||H.push(K.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(A){var E=this.oAuthInfos;E?(c.forEach(A,function(G){(G=this.findOAuthInfo(G.portalUrl))&&E.splice(E.indexOf(G),1)},this),
this.oAuthInfos=E.concat(A)):this.oAuthInfos=A},registerToken:function(A){A=b.mixin({},A);var E=this._sanitizeUrl(A.server),G=this.findServerInfo(E),H=!0,K;G||(G=new g,G.server=this._getServerInstanceRoot(E),G.tokenServiceUrl=this._getTokenSvcUrl(E),G.hasPortal=!0,this.registerServers([G]));(K=this.findCredential(E,A.userId))?(delete A.server,a.mixin(K,A),H=!1):(K=new w({userId:A.userId,server:G.server,token:A.token,expires:A.expires,ssl:A.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),K.resources=
[E],this.credentials.push(K));K.onTokenChange(!1);H||K.refreshServerTokens()},toJson:function(){return b.fixJson({serverInfos:c.map(this.serverInfos,function(A){return A.toJson()}),oAuthInfos:c.map(this.oAuthInfos,function(A){return A.toJson()}),credentials:c.map(this.credentials,function(A){return A.toJson()})})},initialize:function(A){if(A){a.isString(A)&&(A=JSON.parse(A));var E=A.serverInfos,G=A.oAuthInfos;A=A.credentials;if(E){var H=[];c.forEach(E,function(I){I.server&&I.tokenServiceUrl&&H.push(I.declaredClass?
I:new g(I))});H.length&&this.registerServers(H)}if(G){var K=[];c.forEach(G,function(I){I.appId&&K.push(I.declaredClass?I:new v(I))});K.length&&this.registerOAuthInfos(K)}A&&c.forEach(A,function(I){I.userId&&I.server&&I.token&&I.expires&&I.expires>(new Date).getTime()&&(I=I.declaredClass?I:new w(I),I.onTokenChange(),this.credentials.push(I))},this)}},findServerInfo:function(A){var E;A=this._sanitizeUrl(A);c.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,A)&&(E=G);return!!E},
this);return E},findOAuthInfo:function(A){var E;A=this._sanitizeUrl(A);c.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,A)&&(E=G);return!!E},this);return E},findCredential:function(A,E){var G;A=this._sanitizeUrl(A);var H=this._isServerRsrc(A)?"server":"portal";E?c.some(this.credentials,function(K){this._hasSameServerInstance(K.server,A)&&E===K.userId&&K.scope===H&&(G=K);return!!G},this):c.some(this.credentials,function(K){this._hasSameServerInstance(K.server,A)&&-1!==this._getIdenticalSvcIdx(A,
K)&&K.scope===H&&(G=K);return!!G},this);return G},getCredential:function(A,E){var G=!0;if(b.isDefined(E))if(a.isObject(E)){var H=!!E.token;var K=E.error;G=!1!==E.prompt}else H=E;A=this._sanitizeUrl(A);var I=new k(d._dfdCanceller),J=this._isAdminResource(A);if((H=H?this.findCredential(A):null)&&K&&498===K.code)H.destroy();else if(H)return G=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+A),G.name="identity-manager:not-authorized",G.code="IdentityManagerBase.1",
G.httpCode=K&&K.httpCode,G.messageCode=K?K.messageCode:null,G.subcode=K?K.subcode:null,G.details=K?K.details:null,G.log=!!B.isDebug,I.errback(G),I;if(K=this._findCredential(A,E))return I.callback(K),I;var L=this.findServerInfo(A);if(L)!L.hasServer&&this._isServerRsrc(A)&&(L._restInfoDfd=this._getTokenSvcUrl(A,!0),L.hasServer=!0);else{K=this._getTokenSvcUrl(A);if(!K)return G=Error("Unknown resource - could not find token service endpoint."),G.name="identity-manager:unknown-resource",G.code="IdentityManagerBase.2",
G.log=!!B.isDebug,I.errback(G),I;L=new g;L.server=this._getServerInstanceRoot(A);a.isString(K)?(L.tokenServiceUrl=K,L.hasPortal=!0):(L._restInfoDfd=K,L.hasServer=!0);this.registerServers([L])}L.hasPortal&&void 0===L._selfReq&&(G||e.hasSameOrigin(L.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(M){return M.tokenServiceUrl===L.tokenServiceUrl}))&&(L._selfReq={owningTenant:E&&E.owningTenant,selfDfd:this._getPortalSelf(L.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),
A)});return this._enqueue(A,L,E,I,J)},getResourceName:function(A){return this._isRESTService(A)?A.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(A)&&A.replace(this._gwUser,"$1")||this._gwItem.test(A)&&A.replace(this._gwItem,"$1")||this._gwGroup.test(A)&&A.replace(this._gwGroup,"$1")||""},generateToken:function(A,E,G){var H=this._rePortalTokenSvc.test(A.tokenServiceUrl),K=new n(window.location.href.toLowerCase()),I=!E;var J=A.shortLivedTokenValidity;if(E){var L=
q.id.tokenValidity||J||q.id.defaultTokenValidity;L>J&&(L=J)}if(G){var M=G.isAdmin;var N=G.serverUrl;var O=G.token;var Y=G.ssl;A.customParameters=G.customParameters}if(M)J=A.adminTokenServiceUrl;else{J=A.tokenServiceUrl;var ba=new n(J.toLowerCase());A.webTierAuth&&G&&G.serverUrl&&!Y&&"http"===K.scheme&&(e.hasSameOrigin(K.uri,J,!0)||"https"===ba.scheme&&K.host===ba.host&&"7080"===K.port&&"7443"===ba.port)&&(J=J.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));I&&H&&(J=J.replace(/\/rest/i,""))}M=
a.mixin({url:J,content:a.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:N,token:O,expiration:L,referer:M||H?window.location.host:null,client:M?"referer":null,f:"json"},A.customParameters),handleAs:"json",callbackParamName:I?"callback":void 0},G&&G.ioArgs);G={usePost:!I,disableIdentityLookup:!0,useProxy:this._useProxy(A,G)};H||(M.withCredentials=!1);H=h(M,G);H.addCallback(function(ha){if(!ha||!ha.token)return ha=Error("Unable to generate token"),ha.name="identity-manager:authentication-failed",
ha.code="IdentityManagerBase.3",ha.log=!!B.isDebug,ha;var U=A.server;y[U]||(y[U]={});E&&(y[U][E.username]=E.password);ha.validity=L;return ha});H.addErrback(function(ha){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(A){var E=new k;this.checkAppAccess(A,"").then(function(G){E.resolve(G.credential)})["catch"](function(G){E.reject(G)});return E},checkAppAccess:function(A,E,G){var H=this,K=!1;return this.getCredential(A,{prompt:!1}).then(function(I){var J={f:"json"};if("portal"===
I.scope)if(E&&(H._doPortalSignIn(A)||G&&G.force)){var L=I.server+"/sharing/rest/oauth2/validateAppAccess";J.client_id=E}else if(I.token)L=I.server+"/sharing/rest";else return{credential:I};else if(I.token)L=I.server+"/rest/services";else return{credential:I};I.token&&(J.token=I.token);return h({url:L,content:J,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(M){if(!1===M.valid){var N=Error("You are currently signed in as: '"+I.userId+"'.  You do not have access to this app: '"+
E+"'.");N.name="identity-manager:not-authorized";N.code="IdentityManagerBase.1";N.log=!!B.isDebug;N.details=M;throw N;}K=!!M.viewOnlyUserTypeApp;return{credential:I}})["catch"](function(M){if("IdentityManagerBase.1"===M.code||400===M.code)throw 400===M.code&&(M.name="identity-manager:invalid-request"),M;if(498===M.code)throw I.destroy(),M=Error("User is not signed in."),M.name="identity-manager:not-authenticated",M.code="IdentityManagerBase.6",M.log=!!B.isDebug,M;return{credential:I}})}).then(function(I){return{credential:I.credential,
viewOnly:K}})},setProtocolErrorHandler:function(A){this._protocolFunc=A},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var A=this.credentials.slice();c.forEach(A,function(E){E.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(A){A||(A="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
m(window,"message",function(E){(E.origin===window.location.origin||b.endsWith(E.origin,".arcgis.com"))&&E.data&&"arcgis:auth:requestCredential"===E.data.type&&this.getCredential(A).then(function(G){E.source.postMessage({type:"arcgis:auth:credential",credential:{expires:G.expires,server:G.server,ssl:G.ssl,token:G.token,userId:G.userId}},E.origin)})["catch"](function(G){E.source.postMessage({type:"arcgis:auth:error",error:{name:G.name,message:G.message}},E.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var A=window.location.hash;if(A){"#"===A.charAt(0)&&(A=A.substring(1));A=f.queryToObject(A);var E=!1;if(A.access_token&&A.expires_in&&A.state&&A.hasOwnProperty("username"))try{A.state=JSON.parse(A.state),A.state.portalUrl&&(this._oAuthLocationParams=A,E=!0)}catch(H){}else if(A.error&&A.error_description&&"access_denied"===A.error&&(E=!0,A.state))try{A.state=JSON.parse(A.state)}catch(H){}E&&
(window.location.hash=A.state&&A.state.hash||"")}if(A=window.location.search){"?"===A.charAt(0)&&(A=A.substring(1));A=f.queryToObject(A);E=!1;if(A.code&&A.state)try{A.state=JSON.parse(A.state),A.state.portalUrl&&A.state.uid&&(this._oAuthLocationParams=A,E=!0)}catch(H){}else if(A.error&&A.error_description&&"access_denied"===A.error&&(E=!0,A.state))try{A.state=JSON.parse(A.state)}catch(H){}if(E){var G=b.mixin({},A);"code error error_description message_code persist state".split(" ").forEach(function(H){delete G[H]});
E=f.objectToQuery(G);window.history.replaceState(window.history.state,"",window.location.pathname+(E?"?"+E:"")+(A.state&&A.state.hash||""))}}},_getOAuthToken:function(A,E,G,H,K){A=A.replace(/^http:/i,"https:");return h({url:A+"/sharing/rest/oauth2/token",content:H&&K?{grant_type:"authorization_code",code:E,redirect_uri:H,client_id:G,code_verifier:K}:{grant_type:"refresh_token",refresh_token:E,client_id:G}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(A){A.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(A=Error("ABORTED"),A.name="identity-manager:user-aborted",A.code="IdentityManager.2",A.log=!!B.isDebug,this._errbackFunc(A))},_findCredential:function(A,E){var G=-1,H,K,I=E&&E.token;var J=E&&E.resource;var L=this._isServerRsrc(A)?"server":"portal",M=c.filter(this.credentials,function(ba){return this._hasSameServerInstance(ba.server,A)&&ba.scope===L},this);A=J||A;if(M.length)if(1===M.length){J=M[0];var N=(H=(K=this.findServerInfo(J.server))&&K.owningSystemUrl)&&this.findCredential(H,
J.userId);G=this._getIdenticalSvcIdx(A,J);if(I)-1!==G&&(J.resources.splice(G,1),this._removeResource(A,N));else return-1===G&&J.resources.push(A),this._addResource(A,N),J}else{var O,Y;c.some(M,function(ba){Y=this._getIdenticalSvcIdx(A,ba);return-1!==Y?(O=ba,N=(H=(K=this.findServerInfo(O.server))&&K.owningSystemUrl)&&this.findCredential(H,O.userId),G=Y,!0):!1},this);if(I)O&&(O.resources.splice(G,1),this._removeResource(A,N));else if(O)return this._addResource(A,N),O}},_findOAuthInfo:function(A){var E=
this.findOAuthInfo(A);E||c.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,A)&&(E=G);return!!E},this);return E},_addResource:function(A,E){E&&-1===this._getIdenticalSvcIdx(A,E)&&E.resources.push(A)},_removeResource:function(A,E){var G=-1;E&&(G=this._getIdenticalSvcIdx(A,E),-1<G&&E.resources.splice(G,1))},_useProxy:function(A,E){return E&&E.isAdmin&&!e.hasSameOrigin(A.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(A.tokenServiceUrl)&&10.1==A.currentVersion&&!e.hasSameOrigin(A.tokenServiceUrl,
window.location.href)},_getOrigin:function(A){A=new n(A);return A.scheme+"://"+A.host+(b.isDefined(A.port)?":"+A.port:"")},_getServerInstanceRoot:function(A){var E=A.toLowerCase(),G=E.indexOf(this._agsRest);-1===G&&this._isAdminResource(A)&&(G=this._agsAdmin.test(A)?A.replace(this._agsAdmin,"$1").length:A.search(this._adminSvcs));-1===G&&(G=E.indexOf("/sharing"));-1===G&&"/"===E.substr(-1)&&(G=E.length-1);return-1<G?A.substring(0,G):A},_hasSameServerInstance:function(A,E){"/"===A.substr(-1)&&(A=A.slice(0,
-1));A=A.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();A=this._normalizeAGOLorgDomain(A);E=this._normalizeAGOLorgDomain(E);A=A.substr(A.indexOf(":"));E=E.substr(E.indexOf(":"));return A===E},_normalizeAGOLorgDomain:function(A){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(A)?A=A.replace(E,"https://www.arcgis.com"):G.test(A)?A=A.replace(G,"https://devext.arcgis.com"):
H.test(A)&&(A=A.replace(H,"https://qaext.arcgis.com"));return A},_sanitizeUrl:function(A){var E=(l.defaults.io.proxyUrl||"").toLowerCase(),G=E?A.toLowerCase().indexOf(E+"?"):-1;-1!==G&&(A=A.substring(G+E.length+1));A=e.normalize(A);return e.urlToObject(A).path},_isRESTService:function(A){return-1<A.indexOf(this._agsRest)},_isAdminResource:function(A){return this._agsAdmin.test(A)||this._adminSvcs.test(A)},_isServerRsrc:function(A){return this._isRESTService(A)||this._isAdminResource(A)},_isIdenticalService:function(A,
E){if(this._isRESTService(A)&&this._isRESTService(E)){var G=this._getSuffix(A).toLowerCase(),H=this._getSuffix(E).toLowerCase();var K=G===H;K||(K=/(.*)\/(MapServer|FeatureServer).*/ig,K=G.replace(K,"$1")===H.replace(K,"$1"))}else this._isAdminResource(A)&&this._isAdminResource(E)?K=!0:this._isServerRsrc(A)||this._isServerRsrc(E)||!this._isPortalDomain(A)||(K=!0);return K},_isPortalDomain:function(A){var E=new n(A.toLowerCase()),G=this._portalConfig;A=c.some(this._gwDomains,function(H){return H.regex.test(E.uri)});
!A&&G&&(A=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),E.uri));A||(!this._arcgisUrl&&(G=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new n(G)).authority),this._arcgisUrl&&(A=this._arcgisUrl.toLowerCase()===E.authority));A||(A=c.some(this._portals,function(H){return this._hasSameServerInstance(H,E.uri)},this));return A=A||this._agsPortal.test(E.path)},_isIdProvider:function(A,E){var G=-1,H=-1;c.forEach(this._gwDomains,function(L,M){-1===G&&L.regex.test(A)&&
(G=M);-1===H&&L.regex.test(E)&&(H=M)});var K=!1;if(-1<G&&-1<H)if(0===G||4===G){if(0===H||4===H)K=!0}else if(1===G){if(1===H||2===H)K=!0}else 2===G?2===H&&(K=!0):3===G&&3===H&&(K=!0);if(!K){var I=this.findServerInfo(E),J=I&&I.owningSystemUrl;J&&C(I)&&this._isPortalDomain(J)&&this._isIdProvider(A,J)&&(K=!0)}return K},_isPublic:function(A){A=this._sanitizeUrl(A);return c.some(this._publicUrls,function(E){return E.test(A)})},_getIdenticalSvcIdx:function(A,E){var G=-1;c.some(E.resources,function(H,K){return this._isIdenticalService(A,
H)?(G=K,!0):!1},this);return G},_getSuffix:function(A){return A.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(A){if(this._isRESTService(A)||this._isAdminResource(A)){var E=this._getServerInstanceRoot(A);var G=E+"/admin/generateToken";A=E+"/rest/info";E=h({url:A,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=G;return E}if(this._isPortalDomain(A)){var H="";c.some(this._gwDomains,function(K){K.regex.test(A)&&(H=K.tokenServiceUrl);
return!!H});H||c.some(this._portals,function(K){this._hasSameServerInstance(K,A)&&(H=K+this._gwTokenUrl);return!!H},this);H||(G=A.toLowerCase().indexOf("/sharing"),-1!==G&&(H=A.substring(0,G)+this._gwTokenUrl));H||(H=this._getOrigin(A)+this._gwTokenUrl);H&&(G=(new n(A)).port,/^http:\/\//i.test(A)&&"7080"===G&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==A.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(A,
E,G){return h({url:A+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(A,E){A=A.replace(/^http:/i,"https:");return h({url:A+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":E,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(A,
E){var G="";c.some(this._gwDomains,function(K){K.regex.test(A)&&(G=K.customBaseUrl);return!!G});if(G){var H=new k;H.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0});return H}"https:"===window.location.protocol?A=A.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(A=A.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return h({url:A,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},{disableIdentityLookup:!0})},
_doPortalSignIn:function(A){var E=this._portalConfig,G=window.location.href,H=this.findServerInfo(A);return(E||this._isPortalDomain(G))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(A))&&(this._isIdProvider(G,A)||E&&(this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl),A)||this._isIdProvider(E.restBaseUrl,A))||e.hasSameOrigin(G,A,!0))?!0:!1},_checkProtocol:function(A,E,G,H){var K=!0;H=H?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==
a.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||l.defaults.io.useCors&&(e.canUseXhr(H)||e.canUseXhr(e.getProxyUrl(!0).path))||(K=this._protocolFunc?!!this._protocolFunc({resourceUrl:A,serverInfo:E}):!1,K||(A=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),A.name="identity-manager:aborted",A.code="IdentityManagerBase.4",A.log=!!B.isDebug,G(A)));return K},_enqueue:function(A,E,G,H,K,I){H||(H=new k(d._dfdCanceller));
H.resUrl_=A;H.sinfo_=E;H.options_=G;H.admin_=K;H.refresh_=I;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(A),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(A){this._busy=A;this._rejectOnPersistedPageShow=!1;var E=this,G=function(N){var O=A.options_&&A.options_.resource,Y=A.resUrl_,ba=A.refresh_,ha=!1;-1===c.indexOf(E.credentials,N)&&(ba&&-1!==
c.indexOf(E.credentials,ba)?(ba.userId=N.userId,ba.token=N.token,ba.expires=N.expires,ba.validity=N.validity,ba.ssl=N.ssl,ba.creationTime=N.creationTime,ha=!0,N=ba):E.credentials.push(N));N.resources||(N.resources=[]);-1===N.resources.indexOf(O||Y)&&N.resources.push(O||Y);N.scope=E._isServerRsrc(Y)?"server":"portal";N.onTokenChange();O=E._soReqs;var U={};E._soReqs=[];c.forEach(O,function(X){if(!this._isIdenticalService(Y,X.resUrl_)){var Z=this._getSuffix(X.resUrl_);U[Z]||(U[Z]=!0,N.resources.push(X.resUrl_))}},
E);A.callback(N);c.forEach(O,function(X){this._hasSameServerInstance(this._getServerInstanceRoot(Y),X.resUrl_)?X.callback(N):this._soReqs.push(X)},E);E._busy=A.resUrl_=A.sinfo_=A.refresh_=null;if(!ha)E.onCredentialCreate({credential:N});E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},H=function(N){A.errback(N);E._busy=A.resUrl_=A.sinfo_=A.refresh_=null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},
K=function(N,O,Y,ba){var ha=A.sinfo_,U=!A.options_||!1!==A.options_.prompt,X=ha.hasPortal&&E._findOAuthInfo(A.resUrl_);if(N)G(new w({userId:N,server:ha.server,token:Y||null,expires:b.isDefined(ba)?Number(ba):null,ssl:!!O}));else if(window!==window.parent&&E._appUrlObj.query&&E._appUrlObj.query["arcgis-auth-origin"]&&E._appUrlObj.query["arcgis-auth-portal"]&&E._hasSameServerInstance(E._getServerInstanceRoot(E._appUrlObj.query["arcgis-auth-portal"]),A.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},
E._appUrlObj.query["arcgis-auth-origin"]);var Z=m(window,"message",function(Fa){if(Fa.source===window.parent&&Fa.data)if("arcgis:auth:credential"===Fa.data.type&&Fa.data.credential.expires<Date.now()&&(Fa.data.type="arcgis:auth:error",Fa.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===Fa.data.type)Z.remove(),G(new w(Fa.data.credential));else if("arcgis:auth:error"===Fa.data.type){Z.remove();Fa=Fa.data.error;switch(Fa.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Ma=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Ma="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":Ma="IdentityManager.3";"tokenExpiredError"===Fa.name&&(Fa.name="identity-manager:credential-request-failed",Fa.message="Parent application's token has expired.");break;case "identity-manager:aborted":Ma=
"IdentityManager.4";break;case "identity-manager:not-authenticated":Ma="IdentityManager.6";break;case "identity-manager:invalid-request":Ma=400}var Sa=Error(Fa.message);Sa.name=Fa.name;Sa.code=Ma;Sa.log=!!B.isDebug;H(Sa)}})}else if(X){var P=X._oAuthCred;P||(N=new z(X,x),O=new z(X,u),N.isValid()&&O.isValid()?N.expires>O.expires?(P=N,O.destroy()):(P=O,N.destroy()):P=N.isValid()?N:O,X._oAuthCred=P);if(P.isValid()){var da=new w({userId:P.userId,server:ha.server,token:P.token,expires:P.expires,ssl:P.ssl,
_oAuthCred:P});var ia=X.appId!==P.appId&&E._doPortalSignIn(A.resUrl_);ia||P.refreshToken?(P.refreshToken?A._pendingDfd=E._getOAuthToken(ha.server,P.refreshToken,P.appId).then(function(Fa){da.expires=Date.now()+1E3*Fa.expires_in;da.token=Fa.access_token;return da}):(N=new k,N.resolve(da),A._pendingDfd=N),A._pendingDfd.then(function(Fa){return ia?E._exchangeToken(Fa.server,X.appId,Fa.token).then(function(Ma){Fa.token=Ma;return Fa})["catch"](function(){return Fa}):Fa}).then(function(Fa){G(Fa)})["catch"](function(){P.destroy();
K()})):G(da)}else if(E._oAuthLocationParams&&E._hasSameServerInstance(X.portalUrl,E._oAuthLocationParams.state.portalUrl)&&(E._oAuthLocationParams.access_token||E._oAuthLocationParams.code&&E._oAuthLocationParams.state.uid===P.stateUID&&P.codeVerifier))N=E._oAuthLocationParams,E._oAuthLocationParams=null,A._pendingDfd=E._processOAuthResponseParams(N,X,ha).then(function(Fa){G(Fa)})["catch"](H);else{var xa=function(){U?A._pendingDfd=E.oAuthSignIn(A.resUrl_,ha,X,A.options_).addCallbacks(G,H):(Ca=Error("User is not signed in."),
Ca.name="identity-manager:not-authenticated",Ca.code="IdentityManagerBase.6",Ca.log=!!B.isDebug,H(Ca))};E._doPortalSignIn(A.resUrl_)?A._pendingDfd=E._getPlatformSelf(ha.server,X.appId).then(function(Fa){var Ma=Fa.portalUrl;!Ma||e.hasSameOrigin(Ma,window.location.origin,!0)?(da=new w({userId:Fa.username,server:ha.server,expires:Date.now()+1E3*Fa.expires_in,token:Fa.token}),G(da)):xa()})["catch"](xa):xa()}}else if(U)E._checkProtocol(A.resUrl_,ha,H,A.admin_)&&(N=A.options_,A.admin_&&(N=N||{},N.isAdmin=
!0),A._pendingDfd=E.signIn(A.resUrl_,ha,N).addCallbacks(G,H));else{var Ca=Error("User is not signed in.");Ca.name="identity-manager:not-authenticated";Ca.code="IdentityManagerBase.6";Ca.log=!!B.isDebug;H(Ca)}},I=function(){var N=A.sinfo_,O=N.owningSystemUrl,Y=A.options_,ba;if(Y){var ha=Y.token;var U=Y.error;var X=Y.prompt}(ba=E._findCredential(O,{token:ha,resource:A.resUrl_}))||c.some(E.credentials,function(Z){this._isIdProvider(O,Z.server)&&(ba=Z);return!!ba},E);ba?(Y=E.findCredential(A.resUrl_,
ba.userId))?G(Y):F(N,E._legacyFed)?(Y=ba.toJson(),Y.server=N.server,Y.resources=null,G(new w(Y))):(A._pendingDfd=E.generateToken(E.findServerInfo(ba.server),null,{serverUrl:A.resUrl_,token:ba.token,ssl:ba.ssl})).addCallbacks(function(Z){G(new w({userId:ba.userId,server:N.server,token:Z.token,expires:b.isDefined(Z.expires)?Number(Z.expires):null,ssl:!!Z.ssl,isAdmin:A.admin_,validity:Z.validity}))},H):(E._busy=null,ha&&(A.options_.token=null),(A._pendingDfd=E.getCredential(O.replace(/\/?$/,"/sharing"),
{resource:A.resUrl_,owningTenant:N.owningTenant,token:ha,error:U,prompt:X})).addCallbacks(function(Z){E._enqueue(A.resUrl_,A.sinfo_,A.options_,A,A.admin_)},function(Z){H(Z)}))};this._errbackFunc=H;var J=A.sinfo_.owningSystemUrl,L=this._isServerRsrc(A.resUrl_),M=A.sinfo_._restInfoDfd;M?M.addCallbacks(function(N){var O=A.sinfo_;O._restInfoDfd&&(O.adminTokenServiceUrl=O._restInfoDfd.adminUrl_,O._restInfoDfd=null,O.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,N)||a.getObject("authInfo.tokenServiceUrl",
!1,N)||a.getObject("tokenServiceUrl",!1,N),O.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,N),O.currentVersion=N.currentVersion,O.owningTenant=N.owningTenant,(N=O.owningSystemUrl=N.owningSystemUrl)&&E._portals.push(N));L&&O.owningSystemUrl?I():K()},function(){A.sinfo_._restInfoDfd=null;var N=Error("Unknown resource - could not find token service endpoint.");N.name="identity-manager:server-identification-failed";N.code="IdentityManagerBase.2";N.log=!!B.isDebug;H(N)}):L&&
J?I():A.sinfo_._selfReq?A.sinfo_._selfReq.selfDfd.then(function(N){var O={};if(N){var Y=N.user&&N.user.username;O.username=Y;O.allSSL=N.allSSL;var ba=N.supportsOAuth;var ha=parseFloat(N.currentVersion);if("multitenant"===N.portalMode)var U=N.customBaseUrl;A.sinfo_.currentVersion=ha}A.sinfo_.webTierAuth=!!Y;return Y&&E.normalizeWebTierAuth?E.generateToken(A.sinfo_,null,{ssl:O.allSSL}).addBoth(function(X){O.portalToken=X&&X.token;O.tokenExpiration=X&&X.expires;return O}):!Y&&ba&&4.4<=ha&&!E._findOAuthInfo(A.resUrl_)?
E._generateOAuthInfo({portalUrl:A.sinfo_.server,customBaseUrl:U,owningTenant:A.sinfo_._selfReq.owningTenant}).always(function(){return O}):O}).always(function(N){A.sinfo_._selfReq=null;N?K(N.username,N.allSSL,N.portalToken,N.tokenExpiration):K()}):K()},_generateOAuthInfo:function(A){var E=this,G=A.portalUrl,H=A.customBaseUrl,K=A.owningTenant;if(A=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var I=window.location.href;var J=I.indexOf("?");-1<J&&(I=I.slice(0,
J));J=I.search(/\/(apps|home)\//);I=-1<J?I.slice(0,J):null}A&&I?(this._hasTestedIfAppIsOnPortal=!0,A=h({url:I+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new v({appId:"arcgisonline",popupCallbackUrl:I+"/home/oauth-callback.html"})})):(A=new k,A.resolve(),A=A.promise);return A.then(function(){if(E.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),h({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:K,client_id:E.defaultOAuthInfo.appId,
redirect_uri:e.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(L){if(L.valid){var M=E.defaultOAuthInfo.clone();M.portalUrl=L.urlKey&&H?"https://"+L.urlKey.toLowerCase()+"."+H:G;M.popup=window!==window.top||!(e.hasSameOrigin(G,window.location.origin)||E._gwDomains.some(function(N){return N.regex.test(G)&&N.regex.test(window.location.origin)}));E.oAuthInfos.push(M)}})})}});var w=D(t,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,
constructor:function(A){a.mixin(this,A);this.resources=this.resources||[];b.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var A=this,E=this.resources&&this.resources[0],G=q.id.findServerInfo(this.server),H=G&&G.owningSystemUrl,K=!!H&&"server"===this.scope,I=K&&F(G,q.id._legacyFed),J=K&&q.id.findServerInfo(H),L,M=(L=G.webTierAuth)&&q.id.normalizeWebTierAuth,N=y[this.server];N=N&&N[this.userId];var O={username:this.userId,password:N};
if(!L||M)if(K&&!J&&c.some(q.id.serverInfos,function(ha){q.id._isIdProvider(H,ha.server)&&(J=ha);return!!J}),L=J&&q.id.findCredential(J.server,this.userId),!K||L)if(I)L.refreshToken();else{if(K)var Y={serverUrl:E,token:L&&L.token,ssl:L&&L.ssl};else if(M)O=null,Y={ssl:this.ssl};else if(N)this.isAdmin&&(Y={isAdmin:!0});else{if(E){E=q.id._sanitizeUrl(E);this._enqueued=1;var ba=q.id._enqueue(E,G,null,null,this.isAdmin,this);ba.addCallback(function(){A._enqueued=0;A.refreshServerTokens()}).addErrback(function(){A._enqueued=
0})}return ba}return q.id.generateToken(K?J:G,K?null:O,Y).addCallback(function(ha){A.token=ha.token;A.expires=b.isDefined(ha.expires)?Number(ha.expires):null;A.creationTime=(new Date).getTime();A.validity=ha.validity;A.onTokenChange();A.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&c.forEach(q.id.credentials,function(A){var E=q.id.findServerInfo(A.server),G=E&&E.owningSystemUrl;A!==this&&A.userId===this.userId&&G&&"server"===A.scope&&(q.id._hasSameServerInstance(this.server,
G)||q.id._isIdProvider(G,this.server))&&(F(E,q.id._legacyFed)?(A.token=this.token,A.expires=this.expires,A.creationTime=this.creationTime,A.validity=this.validity,A.onTokenChange()):A.refreshToken())},this)},onTokenChange:function(A){clearTimeout(this._refreshTimer);var E=this.server&&q.id.findServerInfo(this.server),G=(E=E&&E.owningSystemUrl)&&q.id.findServerInfo(E);!1!==A&&(!E||"portal"===this.scope||G&&G.webTierAuth&&!q.id.normalizeWebTierAuth)&&(b.isDefined(this.expires)||b.isDefined(this.validity))&&
this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var A=c.indexOf(q.id.credentials,this);-1<A&&q.id.credentials.splice(A,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var A=b.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,
validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&(A.resources=E.slice());return A},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var A=6E4*this.tokenRefreshBuffer,E=Math.pow(2,31)-1,G=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>G?G=0:G>E&&(G=E);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),G>A?G-A:G)}});r.Credential=w;return q.IdentityManagerBase=
r})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.ServerInfo",constructor:function(n){B.mixin(this,n)},toJson:function(){return k.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,
hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return c.ServerInfo=D})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(D,B,a,c,k,n){D=D([c],{declaredClass:"esri.Evented",registerConnectEvents:function(){var r=this.constructor,f=this.constructor._meta.parents,m=[{}],q={},l,b=function(e,d){B.isArray(e)||(e=[e]);for(var h=0;h<e.length;h++){var t=e[h];t._meta&&t._meta.parents&&b(t._meta.parents,
d);t.prototype._eventMap&&d.push(B.mixin({},t.prototype._eventMap))}return d};if(!r._onMap){b(f,m);m.push(this._eventMap);f=B.mixin.apply(this,m);for(g in this)/^on\w/.test(g)&&B.isFunction(this[g])&&(m=this._hyphenLower(g).toLowerCase(),f[m]||(q[m]={method:g}));for(l in f){var g=this._onCamelCase(l);q[l]={method:g,argKeys:f[l]}}r._onMap=q;return r._onMap}},on:function(r,f){if(-1<r.indexOf(",")){for(var m=r.split(/\s*,\s*/),q=m.length,l=[];q--;)l.push(this.on(m[q],f));l.remove=function(){for(var e=
0;e<l.length;e++)l[e].remove()};return l}m=this.constructor._onMap||this.registerConnectEvents();q="string"==typeof r&&r.toLowerCase();var b=this._onCamelCase(q),g=m&&m[q];return(b=g&&g.method||this[b]&&B.isFunction(this[b])&&b)?g&&B.isArray(g.argKeys)?(m=this._onArr2Obj(f,m[q].argKeys),a.after(this,b,m,!0)):a.after(this,b,function(e){e=e||{};e.target||(e.target=this);f.call(this,e)},!0):this.inherited(arguments)},emit:function(r,f){var m,q,l=r.toLowerCase();var b=this._onCamelCase(r);var g=this.constructor._onMap||
this.registerConnectEvents();b=(q=g&&g[l]&&g[l].method||B.isFunction(this[b])&&b)&&this[q];q&&g&&g[l]&&this._onObj2Arr(function(){m=Array.prototype.slice.call(arguments)},g[l].argKeys)(f);f=f||{};f.target||(f.target=this);if(b){var e=m&&m.length?m:[f];e=b.apply(this,e)}this.inherited(arguments,[r,f]);return e},_onObj2Arr:function(r,f){if(f){var m=this;return function(q){var l,b=[],g=f.length;for(l=0;l<g;l++)b[l]=q[f[l]];r.apply(m,b)}}return r},_onArr2Obj:function(r,f){if(f){var m=this;return function(){var q,
l={},b=arguments.length;for(q=0;q<b;q++)l[f[q]]=arguments[q];l.target||(l.target=m);r.call(m,l)}}return r},_hyphenLower:function(r){return r.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(f,m){return(m?"-":"")+f.toLowerCase()})},_onCamelCase:function(r){return"on"+r.substr(0,1).toUpperCase()+r.substr(1).replace(/\-([a-z])/g,function(f,m){return m.toUpperCase()})}});return n.Evented=D})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(D,B,a){B=B(null,
{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(c,k){this.oAuthInfo=c;this.storage=k;this._init()},isValid:function(){var c=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)c=!0;else{var k=Date.now();this.expires>k&&(this.expires-k)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(c=!0)}return c},save:function(){if(!this.storage)return!1;
var c=this._load(),k=this.oAuthInfo;if(k&&k.authNamespace&&k.portalUrl){var n=c[k.authNamespace];n||(n=c[k.authNamespace]={});this.appId||(this.appId=k.appId);n[k.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(c))}catch(r){return!1}return!0}return!1},destroy:function(){var c=this._load(),k=this.oAuthInfo;
if(k&&k.appId&&k.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var n=k.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",r=new FormData;r.append("f","json");r.append("auth_token",this.refreshToken||this.token);r.append("client_id",k.appId);r.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(n,r);else{var f=new XMLHttpRequest;f.open("POST",n);
f.send(r)}}if(k&&k.authNamespace&&k.portalUrl&&this.storage&&(n=c[k.authNamespace])){delete n[k.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(c))}catch(m){}}k&&(this.oAuthInfo=k._oAuthCred=null)},_init:function(){var c=this._load(),k=this.oAuthInfo;k&&k.authNamespace&&k.portalUrl&&(c=c[k.authNamespace])&&(c=c[k.portalUrl])&&(this.appId=c.appId,this.codeVerifier=c.codeVerifier,this.expires=c.expires,this.refreshToken=c.refreshToken,this.ssl=c.ssl,this.stateUID=c.stateUID,this.token=
c.token,this.userId=c.userId)},_load:function(){var c={};if(this.storage){var k=this.storage.getItem("esriJSAPIOAuth");if(k)try{c=JSON.parse(k)}catch(n){}}return c}});return D.OAuthCredential=B})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(D,B,a,c,k){var n=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(r){c.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",
authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},r)},_oAuthCred:null,toJson:function(){return B.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,
popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new n(this.toJson())}});c.setObject("arcgis.OAuthInfo",n,D);return n})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(D,B,a,c,k,n,r,f){return D("dijit.form.Form",[k,n,r,f],{name:"",action:"",method:"",encType:"","accept-charset":"",
accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(m){B.set(this.domNode,"encType",m);c("ie")&&(this.domNode.encoding=m);this._set("encType",m)},reset:function(m){var q={returnValue:!0,
preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:m?m.target:this.domNode,target:m?m.target:this.domNode};!1!==this.onReset(q)&&q.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(m){this.reset(m);m.stopPropagation();m.preventDefault();return!1},_onSubmit:function(m){var q=this.constructor.prototype;if(this.execute!=q.execute||this.onExecute!=q.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(m)&&(m.stopPropagation(),m.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g){var e=null,d=null;try{e=window.localStorage,d=window.sessionStorage}catch(t){}var h=window.crypto||window.msCrypto;return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(t){this._oAuthRedirectFunc=t},oAuthSignIn:function(t,z,v,y){var C=this._oAuthDfd=new f;C.resUrl_=t;C.sinfo_=z;C.oinfo_=v;var F=v._oAuthCred;if(F.storage&&("authorization-code"===v.flowType||"auto"===v.flowType&&!v.popup&&8.4<=z.currentVersion)){var x=h.getRandomValues(new Uint8Array(32));var u=c.base64UrlEncode(x);F.codeVerifier=u;x=h.getRandomValues(new Uint8Array(32));F.stateUID=c.base64UrlEncode(x);F.save()||(F.codeVerifier=u=null)}else F.codeVerifier=null;var w=
this;this._getCodeChallenge(u).then(function(A){var E=!y||!1!==y.oAuthPopupConfirmation;if(!v.popup||!E)return w._doOAuthSignIn(t,z,v,A),C;C.codeChallenge_=A;w._nls||(w._nls=l.identity);w.oAuthDialog||(w.oAuthDialog=w._createOAuthDialog());A=w.oAuthDialog;E=y&&y.error;var G=y&&y.token;B.hide(A.errMsg_);E&&403==E.code&&G&&(q.set(A.errMsg_,"innerHTML",w._nls.forbidden),B.show(A.errMsg_));q.set(A.serverLink_,{title:z.server,innerHTML:-1!==z.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
z.server});A.show()});return C},setOAuthResponseHash:function(t){t&&("#"===t.charAt(0)&&(t=t.substring(1)),this._processOAuthPopupParams(b.queryToObject(t)))},_createOAuthDialog:function(){var t=this._nls,z=a.substitute(t,this._oAuthDialogContent);z=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},z);var v=new k({title:t.title,content:z,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var y=v.esriIdMgr_._oAuthDfd;
v.hide_();v.esriIdMgr_._doOAuthSignIn(y.resUrl_,y.sinfo_,y.oinfo_,y.codeChallenge_)},cancel_:function(){var y=v.esriIdMgr_._oAuthDfd;v.esriIdMgr_._oAuthDfd=null;v.hide_();var C=Error("ABORTED");C.code="IdentityManager.2";C.log=!!r.isDebug;y.errback(C)},hide_:function(){B.hide(v.errMsg_);v.hide();k._DialogLevelManager.hide(v)}});t=v.domNode;v.btnSubmit_=n.byNode(m.query(".esriIdSubmit",t)[0]);v.btnCancel_=n.byNode(m.query(".esriIdCancel",t)[0]);v.serverLink_=m.query(".serverLink",t)[0];v.errMsg_=m.query(".esriErrorMsg",
t)[0];v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v},_doOAuthSignIn:function(t,z,v,y){var C=this,F=v._oAuthCred,x={portalUrl:v.portalUrl};!v.popup&&v.preserveUrlHash&&window.location.hash&&(x.hash=window.location.hash);F.stateUID&&(x.uid=F.stateUID);x={client_id:v.appId,response_type:F.codeVerifier?"code":"token",state:JSON.stringify(x),expiration:v.expiration,locale:v.locale,redirect_uri:this._getRedirectURI(v,
!!F.codeVerifier)};v.forceLogin&&(x.force_login=!0);v.forceUserId&&v.userId&&(x.prepopulatedusername=v.userId);!v.popup&&this._doPortalSignIn(t)&&(x.redirectToUserOrgUrl=!0);F.codeVerifier&&(x.code_challenge=y||F.codeVerifier,x.code_challenge_method=y?"S256":"plain");y=v.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";F=y+"?"+b.objectToQuery(x);if(v.popup){var u=window.open(F,"esriJSAPIOAuth",v.popupWindowFeatures);u?(u.focus(),this._oAuthDfd.oAuthWin_=u,this._oAuthIntervalId=setInterval(function(){if(u.closed){clearInterval(C._oAuthIntervalId);
C._oAuthOnPopupHandle.remove();var w=C._oAuthDfd;if(w){var A=Error("ABORTED");A.code="IdentityManager.2";A.log=!!r.isDebug;w.errback(A)}}},500),C._oAuthOnPopupHandle=g.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(w){"arcgis:auth:hash"===w.type?C.setOAuthResponseHash(w.detail):C._setOAuthResponseQueryString(w.detail)})):(t=Error("ABORTED"),t.name="identity-manager:user-aborted",t.code="IdentityManager.2",t.log=!!r.isDebug,this._oAuthDfd.errback(t))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:x,authorizeUrl:y,resourceUrl:t,serverInfo:z,oAuthInfo:v}):window.location.href=F},_getCodeChallenge:function(t){if(t&&window.isSecureContext)return t=(new TextEncoder).encode(t),h.subtle.digest("SHA-256",t).then(function(z){return c.base64UrlEncode(new Uint8Array(z))});t=new f;t.resolve(null);return t},_getRedirectURI:function(t,z){var v=window.location.href.replace(/#.*$/,"");if(t.popup)return c.getAbsoluteUrl(t.popupCallbackUrl);
if(z){var y=c.urlToObject(v);if(y.query)return"code error error_description message_code persist state".split(" ").forEach(function(C){delete y.query[C]}),(v=b.objectToQuery(y.query))?y.path+"?"+v:y.path}return v},_processOAuthPopupParams:function(t){var z=this._oAuthDfd;this._oAuthDfd=null;if(z)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),t.error){var v="access_denied"===t.error;t=Error(v?"ABORTED":"OAuth: "+t.error+" - "+t.error_description);
t.name=v?"identity-manager:user-aborted":"identity-manager:authentication-failed";t.code="IdentityManagerBase."+(v?2:3);t.log=!!r.isDebug;z.errback(t)}else this._processOAuthResponseParams(t,z.oinfo_,z.sinfo_).then(function(y){z.resolve(y)})["catch"](function(y){z.reject(y)})},_processOAuthResponseParams:function(t,z,v){var y=z._oAuthCred;if(t.code){var C=y.codeVerifier;y.codeVerifier=null;y.stateUID=null;y.save();return this._getOAuthToken(v.server,t.code,z.appId,this._getRedirectURI(z,!0),C).then(function(x){var u=
new D({userId:x.username,server:v.server,token:x.access_token,expires:Date.now()+1E3*x.expires_in,ssl:x.ssl,oAuthState:t.state,_oAuthCred:y});z.userId=u.userId;y.storage=x.persist?e:d;y.refreshToken=x.refresh_token;y.token=null;y.expires=x.refresh_token_expires_in?Date.now()+1E3*x.refresh_token_expires_in:null;y.userId=u.userId;y.ssl=u.ssl;y.save();return u})}C=new D({userId:t.username,server:v.server,token:t.access_token,expires:Date.now()+1E3*Number(t.expires_in),ssl:"true"===t.ssl,oAuthState:t.state,
_oAuthCred:y});z.userId=C.userId;y.storage=t.persist?e:d;y.refreshToken=null;y.token=C.token;y.expires=C.expires;y.userId=C.userId;y.ssl=C.ssl;y.save();var F=new f;F.resolve(C);return F},_setOAuthResponseQueryString:function(t){t&&("?"===t.charAt(0)&&(t=t.substring(1)),this._processOAuthPopupParams(b.queryToObject(t)))}}})},"esri/core/events":function(){define([],function(){return{on:function(D,B,a){if(!D||"function"!==typeof D.on&&"function"!==typeof D.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in D)return D.on(B,a);if(Array.isArray(B)){for(var c=B.slice(),k=0;k<c.length;k++)D.addEventListener(c[k],a);return{remove:function(){for(var n=0;n<c.length;n++)D.removeEventListener(c[n],a)}}}D.addEventListener(B,a);return{remove:function(){D.removeEventListener(B,a)}}}}})},"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(D,B,a,c,k){c=a.__importDefault(c);k=a.__importDefault(k);return{isPromise:function(n){return n&&
"function"===typeof n.then},resolve:function(n){var r=new c["default"];r.resolve(n);return r.promise},reject:function(n){var r=new c["default"];r.reject(n);return r.promise},when:function(n){return this.isPromise(n)?n:this.resolve(n)},create:function(n,r,f){var m=this,q=new c["default"](f);n(function(l){return m.when(l).then(q.resolve,q.reject)});return q.promise},all:k["default"],filter:function(n,r){var f=n.slice();return this.all(n.map(function(m,q){return r(m,q)})).then(function(m){return f.filter(function(q,
l){return m[l]})})},eachAlways:function(n){if(n){if("function"!==typeof n.forEach){var r=Object.keys(n),f=r.map(function(m){return n[m]});return this.eachAlways(f).then(function(m){var q={};r.forEach(function(l,b){q[l]=m[b]});return q})}return this.create(function(m){var q=[],l=n.length;0===l&&m(q);n.forEach(function(b){var g={promise:b};q.push(g);b.then(function(e){g.value=e})["catch"](function(e){g.error=e}).then(function(){--l;0===l&&m(q)})})},function(m){n.forEach(function(q){q.cancel(m)})})}},
eachAlwaysValues:function(n){return this.eachAlways(n).then(function(r){return r.filter(function(f){return f.value}).map(function(f){return f.value})})},after:function(n,r){var f=this,m=0;return this.create(function(q){m=window.setTimeout(function(){f.resolve(r)},n)},function(){m&&(clearTimeout(m),m=0)})},timeout:function(n,r,f){var m=0,q=new c["default"](n.cancel);n.then(function(l){q.isFulfilled()||(q.resolve(l),m&&(clearTimeout(m),m=0))});n["catch"](function(l){q.isFulfilled()||(q.reject(l),m&&
(clearTimeout(m),m=0))});m=window.setTimeout(function(){q.reject(f||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within "+r+"ms"))},r);return q.promise}}})},"arcgisonline/pages/utils/signin":function(){define("require exports tslib ../../esriGeowConfig ./storage esri/IdentityManager esri/arcgis/OAuthInfo dojo/_base/kernel dojo/Deferred".split(" "),function(D,B,a,c,k,n,r,f,m){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=
a.__importDefault(f);m=a.__importDefault(m);return function(){function q(){}q.getPortalUrl=function(){var l,b=c["default"].restBaseUrl.substring(0,c["default"].restBaseUrl.indexOf("/sharing/rest")).replace("http://","https://");if(null===(l=c["default"].self)||void 0===l?0:l.portalHostname)b="https://"+c["default"].self.portalHostname;return b};q.setupOAuthInfo=function(l){var b={appId:q.getClientId(),portalUrl:q.getPortalUrl(),locale:f["default"].locale,popup:!1};l&&(b.forceLogin=l);l=new r["default"](b);
q.esriId.registerOAuthInfos([l]);q.esriId.useSignInPage=!1};q.checkSignInStatus=function(){var l=new m["default"];q.setupOAuthInfo(!1);var b=q.getPortalUrl()+"/sharing";q.esriId.checkSignInStatus(b).then(function(g){g&&(c["default"].userInfo=a.__assign(a.__assign({},c["default"].userInfo||{}),{username:g.userId,token:g.token,credential:g}));l.resolve(g)},function(){l.resolve(null)});return l};q.getCredential=function(l,b){var g=new m["default"];q.setupOAuthInfo(l);var e=q.getPortalUrl()+"/sharing";
q.esriId.getCredential(e,b).then(function(d){g.resolve(d)},function(){g.resolve(null)});return g};q.isValidReturnUrl=function(l,b){return l?this.isValidPortalReturnUrl(b):this.isValidOnlineReturnUrl(b)};q.isValidOnlineReturnUrl=function(l){var b=decodeURI(l),g=q.getHostName(window.location.href);l=this.getHostName(b);var e=0===b.indexOf("http://")||0===b.indexOf("https://"),d=e&&l?l.lastIndexOf(".arcgis.com"):-1,h=e&&l?l.lastIndexOf(".esri.com"):-1,t=e&&l?l.lastIndexOf(g):-1;b=-1<b.indexOf("/sharing/proxy");
d=-1<d&&d+11-1===l.length-1;h=-1<h&&h+9-1===l.length-1;g=-1<t&&t+g.length-1===l.length-1;return e&&l&&(d||h||g)&&!b};q.isValidPortalReturnUrl=function(l){l=decodeURI(l);var b=q.getDomainName(window.location.hostname),g=q.getDomainName(this.getHostName(l));return(0===l.indexOf("http://")||0===l.indexOf("https://"))&&g&&g===b};q.getHostName=function(l){l=l.match(/:\/\/(.[^/:]+)/i);return null!==l&&1<l.length&&"string"===typeof l[1]&&0<l[1].length?l[1]:null};q.getDomainName=function(l){return l.substring(l.lastIndexOf(".",
l.lastIndexOf(".")-1)+1)};q.getClientId=function(){try{return k["default"].getLocalStorageItem("portalAppClientId")||k["default"].getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(l){return"arcgisonline"}};q.checkForOrgUserOnOnlineBaseHostAndRedirect=function(l){var b=c["default"].isDebug,g=l.isPortal,e=l.user,d=l.urlKey,h=l.customBaseUrl;e=null===e||void 0===e?void 0:e.orgId;l=window.location.host===l.portalHostname;var t=!!d,z="arcgisonline"===q.getClientId();!b&&!g&&e&&l&&t&&z&&
(window.location.href=window.location.href.replace(window.location.host,d+"."+h))};q.esriId=n["default"];return q}()})},"arcgisonline/esriGeowConfig":function(){define(["require","exports"],function(D,B){return window.esriGeowConfig||{}})},"arcgisonline/pages/utils/storage":function(){define(["require","exports","tslib","./strings"],function(D,B,a,c){c=a.__importDefault(c);return function(){function k(){}k.setCookie=function(n,r,f,m){this.writeCookie(n,m?JSON.stringify(r):r,f)};k.getCookie=function(n,
r){var f=this.readCookie(n);return f&&r?JSON.parse(f):f};k.setLocalStorageItem=function(n,r,f){try{window.localStorage.setItem(n,f?JSON.stringify(r):r)}catch(m){}};k.getLocalStorageItem=function(n,r){try{var f=window.localStorage.getItem(n);return f&&r?JSON.parse(f):f}catch(m){}};k.removeLocalStorageItem=function(n){try{window.localStorage.removeItem(n)}catch(r){}};k.setSessionStorageItem=function(n,r,f){try{window.sessionStorage.setItem(n,f?JSON.stringify(r):r)}catch(m){}};k.getSessionStorageItem=
function(n,r){try{var f=window.sessionStorage.getItem(n);return f&&r?JSON.parse(f):f}catch(m){}};k.removeSessionStorageItem=function(n){try{window.sessionStorage.removeItem(n)}catch(r){}};k.readCookie=function(n){var r=document.cookie;n=new RegExp("(?:^|; )"+c["default"].escapeRegExp(n)+"\x3d([^;]*)");return(r=r.match(n))?decodeURIComponent(r[1]):void 0};k.writeCookie=function(n,r,f){f=f||{};var m=null===f||void 0===f?void 0:f.expires;if("number"===typeof m){var q=new Date;m*=864E5;q.setTime(Date.now()+
m);m=f.expires=q}"string"!==typeof m&&(null===m||void 0===m?0:m.toUTCString)&&(f.expires=m.toUTCString());n=n+"\x3d"+encodeURIComponent(r);for(var l in f)n+="; "+l,r=f[l],!0!==r&&(n+="\x3d"+r);document.cookie=n};return k}()})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(D,B){return function(){function a(){}a.isString=function(c){return(null===c||void 0===c?void 0:c.constructor)===String};a.startsWith=function(c,k){return k&&0===(null===c||void 0===c?void 0:
c.indexOf(k))};a.endsWith=function(c,k){if(c&&k){var n=c.lastIndexOf(k);return-1<n&&c.length>=k.length&&n===c.length-k.length}return!1};a.includes=function(c,k){return k&&-1<(null===c||void 0===c?void 0:c.indexOf(k))};a.isSet=function(c){return!!(0<(null===c||void 0===c?void 0:c.length))};a.areEqual=function(c,k){var n=this.isSet(c),r=this.isSet(k);return!n&&!r||n&&r&&c.trim()===k.trim()};a.replaceAll=function(c,k,n){return c.replace(new RegExp(this.escapeRegExp(k),"g"),n)};a.escapeRegExp=function(c){return c.replace(/[.*+?^${}()|[\]\\]/g,
"\\$\x26")};a.escapeQuestionMarks=function(c){return c.replace(/[?\\]/g,"\\$\x26")};a.stringToArray=function(c,k,n){c=c instanceof Array?c:c.split(k);return n?c.map(function(r){return r.trim()}):c};a.isValidHex=function(c){return/[0-9A-Fa-f]{6}/g.test(c)};a.stringToHex=function(c){for(var k=0,n=0;n<c.length;n++)k=c.charCodeAt(n)+((k<<5)-k);c="#";for(n=0;3>n;n++)c+=("00"+(k>>8*n&255).toString(16)).substr(-2);return c};a.hexToRgb=function(c){c=c.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(k,
n,r,f){return n+n+r+r+f+f});return(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null};a.htmlDecode=function(c){var k=document.createElement("textarea");k.innerHTML=c;return k.value};a.encodeWhitespace=function(c){return c?c.replace(/\s/g,"%20"):""};a.encodeAngleBrackets=function(c){var k;return null!==(k=null===c||void 0===c?void 0:c.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==k?k:""};a.decodeAngleBrackets=function(c){var k;
return null!==(k=null===c||void 0===c?void 0:c.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==k?k:""};a.escapeHTML=function(c){var k={"\x26":"\x26#x38;","\x3c":"\x26#x3C;","\x3e":"\x26#x3E;",'"':"\x26#x22;","'":"\x26#x27;","/":"\x26#x2F;"};return String(c).replace(/[&<>"'/]/gm,function(n){return k[n]})};a.shouldStripHTML=function(c){var k;if(!c)return!1;c=null!==(k=null===c||void 0===c?void 0:c.split("\x3c"))&&void 0!==k?k:[];return 1<c.length&&c.some(function(n){return-1<n.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};
a.stripHTML=function(c){if(!c)return"";var k=document.createElement("div");k.innerHTML=c;return k.textContent};a.addHyperlinks=function(c){return c.replace(/(https?:\/\/[^\s]+)/g,function(k){return'\x3ca href\x3d"'+k+'" target\x3d"_blank"\x3e'+k+"\x3c/a\x3e"})};a.escapeNewlines=function(c){return null===c||void 0===c?void 0:c.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};a.restoreNewlines=function(c){return null===c||void 0===c?void 0:c.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,
"\n")};a.insertHTMLLineBreaks=function(c){return null===c||void 0===c?void 0:c.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};a.containsHTTPProtocol=function(c){var k;return-1<(null!==(k=null===c||void 0===c?void 0:c.toLowerCase())&&void 0!==k?k:"").indexOf("http://")};return a}()})},"arcgisonline/pages/utils/enterprise":function(){define(["require","exports","tslib"],function(D,B,a){Object.defineProperty(B,"__esModule",{value:!0});var c="extentService footerLinks gcsBasemapService httpsDomains longTokenExpiration restrictOrganizationPageToAdmin searchArcGISOnlineEnabled showCreateDashboard showInAppLauncher sceneViewerEnabled surveyUrl tokenExpiration webAppBuilderEnabled configurePortalAGOEnv portalAGOConfigEnabled portalLivingAtlasConfigEnabled showSocialMediaLinks".split(" ");
B["default"]={copyPortalConfigProperties:function(k,n){if(!k)return n;var r=a.__assign({},n);c.forEach(function(f){void 0!==k[f]&&(r[f]=k[f])});return r}}})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,arcgisonline/pages/utils/mapViewer,arcgisonline/pages/utils/storage,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(D,B,a){D.provide("arcgisonline.sharing.util");D.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");D.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");D.require("dojo.request.xhr");D.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");D.require("arcgisonline.pages.utils.mapViewer");D.require("arcgisonline.pages.utils.storage");D.require("esri.IdentityManager");D.require("esri.libs.sanitizer.Sanitizer");D.require("dojo.sniff");D.require("dojo.has");D.require("dojo.json");
D.require("dojo.cookie");arcgisonline.sharing.util={i18n:D.mixin({},D.i18n.getLocalization("arcgisonline","arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,storageUtil:arcgisonline.pages.utils.storage,mapViewerUtil:arcgisonline.pages.utils.mapViewer,getSocialNetworkBadges:function(c,k){var n={},r=D.create,f=arcgisonline.sharing.util.socialNetworkTitle(c.title),m=unescape(window.location.href);if(!1===c.isOrganization||!0===c.isOrganization)m=arcgisonline.sharing.util.urlToObject(window.location.href).path+
"?id\x3d"+c.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<m.indexOf(esriGeowConfig.self.customBaseUrl)&&(m=m.replace(location.host,esriGeowConfig.self.portalHostname));var q=r("span",{"class":"esriItemLinks"}),l=encodeURI("socialnetwork.html?t\x3d"+f+"\x26n\x3dfb\x26u\x3d"+m),b=esri.i18nBundle.itemLinks.shareFacebook,g=r("a",{target:"_blank",onclick:D.partial(this._checkShare,c,"Facebook"),href:l,alt:b,title:b},q);r("span",{"class":"facebookBadge dijitInline"},
g);l=r("a",{target:"_blank",onclick:D.partial(this._checkShare,c,"Facebook"),href:l,alt:b,title:b},q);r("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},l);n.facebook=q;q=r("span",{"class":"esriItemLinks"});l=encodeURI("socialnetwork.html?t\x3d"+f+"\x26n\x3dtw\x26u\x3d"+m);b=esri.i18nBundle.itemLinks.shareTwitter;g=r("a",{target:"_blank",onclick:D.partial(this._checkShare,c,"Twitter"),href:l,alt:b,title:b},q);r("span",{"class":"twitterBadge dijitInline"},g);l=r("a",{target:"_blank",onclick:D.partial(this._checkShare,
c,"Twitter"),href:l,alt:b,title:b},q);r("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},l);n.twitter=q;k(n)},socialNetworkTitle:function(c){100<c.length&&(c=c.substring(0,97)+"...");return encodeURIComponent(c.replace(/ /g,"+"))},shortenUrl:function(c,k,n){var r=esriGeowConfig.bitlyUrl,f,m=new D.Deferred;this.request({url:r,content:{longUrl:c,format:"json"}}).then(function(q){(f=q&&q.data&&q.data.url||null)?k?k(f):m.resolve(f):n?n(q,args):m.reject(q,args)},function(q){n?n({},{}):m.reject(q)});
return m},_checkShare:function(c,k,n){k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();n=c&&esri.isDefined(c.isInvitationOnly);c.access&&"public"!==c.access&&k.show({title:esri.i18nBundle.itemLinks[n?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[n?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){esriGeowConfig.userInfo=esriGeowConfig.userInfo||""},isLoggedIn:function(){return null==
this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;esriGeowConfig.isSilverlightInstalled=!1;if(D.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(c){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&
-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var c="";-1==esriGeowConfig.signin.indexOf("http")&&(c=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(c=arcgisonline.sharing.util.getSecureUrl(c)));c+=esriGeowConfig.signin;window.location!==c&&(c+="?returnUrl\x3d"+escape(window.location));window.location=c+"\x26error\x3d403";return!1},htmlHasText:function(c){if(c&&0<c.length){c=D.trim(c);for(var k=!1,n=0;n<c.length;n++){var r=
c.charAt(n);if("\x3c"==r)k=!0;else if("\x3e"==r)k=!1;else if(!k&&""!==r)return!0}}return!1},endsWith:function(c,k){return null==c||null==k?!1:c.toLowerCase().lastIndexOf(k.toLowerCase())==c.length-k.length},toFullDateString:function(c){c=new Date(parseFloat(c));return D.date.locale.format(c,{selector:"date",formatLength:"long"})},toDateTimeString:function(c){c=new Date(parseFloat(c));return D.date.locale.format(c,{formatLength:"medium"})},capitalize:function(c){return c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()},
getItemDetailsLinkInfo:function(c){var k=null,n=null,r=null;esri.isDefined(c.isInvitationOnly)?(k=esriGeowConfig.baseUrl+"group.html?owner\x3d"+c.owner+"\x26title\x3d"+encodeURIComponent(c.title),n=esri.i18nBundle.itemLinks.details,r=esri.i18nBundle.itemLinks.viewGroupDetails):(k=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,n=esri.i18nBundle.itemLinks.details,r=esri.i18nBundle.itemLinks.viewDetails);return null!==k&&null!==n?{link:k,label:n,tip:r}:null},_isOperationsViewSupportedBrowser:function(c){var k=
navigator.userAgent.toLowerCase(),n=/Chrome\/[.0-9]* (?!Mobile)/i,r=/Chrome\/[.0-9]* Mobile/i;r=D.has("iphone")||D.has("ipod")||D.has("android")&&r.test(k)||-1<k.indexOf("android")&&-1<k.indexOf("mobile")||-1<k.indexOf("windows phone")||D.has("bb");c&&(r=r||k.match(/ipad/i)||D.has("android")&&n.test(k));return r?!1:void 0!==D.has("chrome")?(c=D.has("chrome"),!isNaN(c)&&19<=c):void 0!==D.has("ff")?4<=D.has("ff"):k.match(/fxios/i)?(c=parseFloat(k.split("fxios/")[1]),!isNaN(c)&&1<=c):void 0!==D.has("ie")?
9<=D.has("ie"):void 0!==D.has("edge")?1<=D.has("edge"):void 0!==D.has("trident")?5<=D.has("trident"):void 0!==D.has("safari")?(c=parseFloat(k.split("version/")[1]),k=parseFloat(k.split("crios/")[1]),isNaN(c)&&isNaN(k)||!isNaN(c)&&5.1>c||!isNaN(k)&&31>k?!1:!0):!1},_isPremiumService:function(c){return c.owner&&-1<c.owner.toLowerCase().indexOf("esri")&&(-1<D.indexOf(c.typeKeywords,"Requires Subscription")||-1<D.indexOf(c.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(c){var k=c.type?
c.type:"",n="",r="",f="",m=null;r=this.getUser();n=!1;n=null;esriGeowConfig.portalHostname&&(n=esriGeowConfig.portalHostname);n&&(f=n.split("."),1<f.length&&(n=f[f.length-2]+"."+f[f.length-1]));if("Web Map"==k)n=!r&&this._isPremiumService(c),r='JavaScript:arcgisonline.map.mapUtil.openMap("'+c.id+'",'+n+")",f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),n=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===k)n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+c.id,r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPage",n),f=esri.i18nBundle.itemLinks.viewApp,n=esri.i18nBundle.itemLinks.open;else if("Web Scene"===k&&esriGeowConfig.sceneViewerEnabled)n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+c.id,r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPage",n,!0),f=esri.i18nBundle.itemLinks.openSceneViewer,
n=esri.i18nBundle.itemLinks.open;else if("Scene Service"===k&&esriGeowConfig.sceneViewerEnabled)n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,n,!0),f=esri.i18nBundle.itemLinks.addToSceneViewer,n=esri.i18nBundle.itemLinks.open;else if("Operation View"===k){n=window.location;k=arcgisonline.sharing.util.isPortal();r=n.protocol+
"//"+(k?esriGeowConfig.self.portalHostname:n.host);n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+c.id;f=-1<D.indexOf(c.typeKeywords,"TabletLayout");D.indexOf(c.typeKeywords,"DesktopLayout");var q=-1<D.indexOf(c.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!q?m=D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,r+(k?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+c.id):
!q&&f&&this._isOperationsViewSupportedBrowser()&&(m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,n,!1));r="JavaScript:void(0)";f=esri.i18nBundle.itemLinks.openOperationViewDesktop;n=esri.i18nBundle.itemLinks.open}else"Map Service"==k||"Feature Service"==k||"Image Service"==k||"KML"==k||"Feature Collection"==k||"Stream Service"==k||"Vector Tile Service"===k?(f=c&&c.extraUrlParams?!0:!1,n=!r&&this._isPremiumService(c),r='JavaScript:arcgisonline.map.mapUtil.addToMap("'+c.id+'",'+n+","+f+
")",n=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===k&&-1<D.indexOf(c.typeKeywords,"Elevation 3D Layer")&&(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,n=esri.i18nBundle.itemLinks.open)):"WMS"==k||"WFS"===k||"WMTS"===
k?(r=c.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+c.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+c.id+'")',n=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==k?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url+"?f\x3dlyr\x26v\x3d9.3"),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):
this.couldHaveArcGISDesktop()&&("Map Package"==k||"Basemap Package"===k||"Mobile Map Package"==k||"Mobile Basemap Package"===k||"Layer Package"==k||"Pro Map"==k||"Layout"==k||-1<D.indexOf(c.typeKeywords,"lyrx"))?c&&c.name.indexOf(".mmpk")&&c.name.indexOf(".bpk")&&-1===c.name.indexOf(".bpkx")&&-1===c.name.indexOf(".lpkx")&&-1===c.name.indexOf(".mpkx")&&-1===c.name.indexOf(".lyrx")&&-1===c.name.indexOf(".mapx")&&-1===c.name.indexOf(".pagx")?(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,
this.getItemPkgPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=k&&"Geoprocessing Service"!=k&&"Locator Package"!=k&&"Tile Package"!=k&&"Vector Tile Package"!=k&&"Scene Package"!==k?!this.couldHaveArcGISDesktop()||"Map Document"!=k&&"Published Map"!=
k&&"Globe Document"!=k&&"Scene Document"!=k&&"Layer"!=k?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=k&&"ArcGIS Pro Add In"!==k?!this.isSilverlightInstalled()||"Explorer Map"!=k&&"Explorer Layer"!=k&&"Explorer Add In"!=k?"File Geodatabase"===k||"CSV Collection"===k||"KML Collection"===k||"Rule Package"===k||"GeoJson"===k||"Shapefile"===k||"CSV"===k||"Map Template"===k||"Code Sample"===k||"Geoprocessing Sample"===k||"Service Definition"===k||"Workflow Manager Package"===k||"Windows Viewer Add-in"===
k||"ArcPad Package"===k||"Operations Dashboard Addin"===k||"CAD Drawing"===k||"Microsoft Word"===k||"Raster function template"===k||"Microsoft PowerPoint"===k||"Microsoft Powerpoint"===k||"Microsoft Excel"===k||"iWork Pages"===k||"iWork Keynote"===k||"iWork Numbers"===k||"Image"===k||"Visio Document"===k||"PDF"===k||"Desktop Application"===k||"Task File"===k||"Project Package"===k||"ArcGIS Pro Configuration"===k||"Project Template"===k||"Desktop Style"===k||"Native Application Installer"===k||"360 VR Experience"==
k?(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"!=k&&"Application"!=k&&"Native Application"!==k&&"Native Application Template"!==k&&"Hub Initiative"!==k&&"Hub Page"!==k&&"Hub Site Application"!==k||-1!==D.indexOf(c.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==k?-1<D.indexOf(c.typeKeywords,"desktopApplicationTemplateUrl")&&c.url&&0<
c.url.length?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),f=esri.i18nBundle.itemLinks.viewApp,n=esri.i18nBundle.itemLinks.open):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==k?c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||n&&-1<c.url.indexOf(n))&&(c.originalUrl=c.originalUrl||
D.clone(c.url),c.url=esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.getApp):(r=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,n=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==k?(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,
f=esri.i18nBundle.itemLinks.download):"Document Link"===k?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),n=f=esri.i18nBundle.itemLinks.open):"Form"===k&&r&&r.accountId?(r="arcgis-survey123://?itemId\x3d"+c.id+"\x26username\x3d"+r.username,f=esri.i18nBundle.itemLinks.openInSurvey123,n=esri.i18nBundle.itemLinks.open):"Workforce Project"===k?(r=(k=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
r=window.location.protocol+"//"+r+((k?"/apps/workforce/#":"")+("/projects/"+c.id+"/dispatch/assignments")),f=esri.i18nBundle.itemLinks.openWorkforce,n=esri.i18nBundle.itemLinks.open):"Insights Workbook"===k||"Insights Data Engineering Workbook"===k||"Insights Page"===k||"Insights Model"===k||"Insights Data Engineering Model"===k?(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",r="Insights Model"===k||"Insights Data Engineering Model"===
k?r+("?model\x3d"+c.id):"Insights Page"===k?r+("view/"+c.id):r+c.id,f=esri.i18nBundle.itemLinks.openInsights,n=esri.i18nBundle.itemLinks.open):"Dashboard"===k?(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+c.id,r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,m),f=esri.i18nBundle.itemLinks.dashboardView,n=esri.i18nBundle.itemLinks.open):(r=esriGeowConfig.baseUrl+"item.html?id\x3d"+
c.id,n=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):(k=arcgisonline.sharing.util.isHostedTemplateItem(c.url),c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||n&&-1<c.url.indexOf(n))&&-1===c.url.indexOf(".opendata")&&(c.originalUrl=c.originalUrl||D.clone(c.url),c.url=esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),c.access&&"public"!==c.access&&k&&!arcgisonline.sharing.util.isPortal()&&(m=arcgisonline.sharing.util.parseUrl(c.url),
c.url=c.url.replace(m.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&c.url&&0===c.url.indexOf("/")&&(m=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===c.url.indexOf(m)&&(c.url=m+c.url)),r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),f=esri.i18nBundle.itemLinks.viewApp,n=esri.i18nBundle.itemLinks.open):(r=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,n=esri.i18nBundle.itemLinks.details,
f=esri.i18nBundle.itemLinks.viewDetails)):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openExplorer):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):
(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c)),n=esri.i18nBundle.itemLinks.open,f="Task File"!==k?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:n,href:r,target:"",tip:f,onclick:m}},getMapViewerLink:function(c){return c===this.mapViewerUtil.MapViewerType.Classic?esriGeowConfig.baseUrl+"webmap/viewer.html":esriGeowConfig.newMapViewerUrl},getHomePageGalleryLinkInfo:function(c){var k=c.type?c.type:"",n="",r="",f="",m=
null;n=this.getUser();r=!1;f=this.mapViewerUtil.determineMapViewerSetting();r=null;esriGeowConfig.portalHostname&&(r=esriGeowConfig.portalHostname);if(r){var q=r.split(".");1<q.length&&(r=q[q.length-2]+"."+q[q.length-1])}if("Web Map"==k)f=this.getMapViewerLink(f)+"?webmap\x3d"+c.id,q=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(f),r=(r=!n&&this._isPremiumService(c))?q:f,f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),n=esri.i18nBundle.itemLinks.open;
else if("CityEngine Web Scene"===k)r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+c.id,f=esri.i18nBundle.itemLinks.viewApp,n=esri.i18nBundle.itemLinks.open;else if("Web Scene"===k&&esriGeowConfig.sceneViewerEnabled)r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+c.id,f=esri.i18nBundle.itemLinks.openSceneViewer,
n=esri.i18nBundle.itemLinks.open;else if("Scene Service"===k&&esriGeowConfig.sceneViewerEnabled)r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,n=esri.i18nBundle.itemLinks.open;else if("Operation View"===k){r=window.location;k=arcgisonline.sharing.util.isPortal();n=-1<D.indexOf(c.typeKeywords,"V2");r=r.protocol+"//"+(k?esriGeowConfig.self.portalHostname:r.host);
f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+c.id;q=this.couldHaveArcGISDesktop();if(n)return null;if(q)r=r+(k?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+c.id;else if(this._isOperationsViewSupportedBrowser())r=f;else return null;f=esri.i18nBundle.itemLinks.openOperationViewDesktop;n=esri.i18nBundle.itemLinks.open}else if("Map Service"==k||"Feature Service"==k||"Image Service"==
k||"KML"==k||"Stream Service"==k||"Vector Tile Service"===k||"Feature Collection"==k){f=this.getMapViewerLink(f)+"?layers\x3d"+c.id;if("KML"==k||"Stream Service"==k||"Feature Collection"==k)f=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+c.id;q=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(f);r=(r=!n&&this._isPremiumService(c))?q:f;n=esri.i18nBundle.itemLinks.open;f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer);
esriGeowConfig.sceneViewerEnabled&&"Image Service"===k&&-1<D.indexOf(c.typeKeywords,"Elevation 3D Layer")&&(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,n=esri.i18nBundle.itemLinks.open)}else"WMS"==k||"WFS"===k||"WMTS"===k?(r=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+c.id,n=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==k?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url+"?f\x3dlyr\x26v\x3d9.3"),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==k||"Mobile Map Package"==k||"Basemap Package"===k||"Mobile Basemap Package"===k||"Layer Package"==k||"Pro Map"==k||"Layout"==k||-1<D.indexOf(c.typeKeywords,"lyrx"))?
c&&-1===c.name.indexOf(".bpkx")&&-1===c.name.indexOf(".mmpk")&&-1===c.name.indexOf(".bpk")&&-1===c.name.indexOf(".lpkx")&&-1===c.name.indexOf(".mpkx")&&-1===c.name.indexOf(".lyrx")&&-1===c.name.indexOf(".mapx")&&-1===c.name.indexOf(".pagx")?(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,
f=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=k&&"Locator Package"!=k&&"Tile Package"!=k&&"Vector Tile Package"!=k?!this.couldHaveArcGISDesktop()||"Map Document"!=k&&"Published Map"!=k&&"Globe Document"!=k&&"Scene Document"!=k&&"Layer"!=k?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=k&&"ArcGIS Pro Add In"!==k?!this.isSilverlightInstalled()||"Explorer Map"!=k&&"Explorer Layer"!=k&&"Explorer Add In"!=k?"File Geodatabase"===k||"CSV Collection"===
k||"KML Collection"===k||"Rule Package"===k||"GeoJson"===k||"Shapefile"===k||"CSV"===k||"Map Template"===k||"Code Sample"===k||"Geoprocessing Sample"===k||"Service Definition"===k||"Workflow Manager Package"===k||"Windows Viewer Add-in"===k||"ArcPad Package"===k||"Operations Dashboard Addin"===k||"Microsoft Word"===k||"CAD Drawing"===k||"Raster function template"===k||"Microsoft PowerPoint"===k||"Microsoft Powerpoint"===k||"Microsoft Excel"===k||"iWork Pages"===k||"iWork Keynote"===k||"iWork Numbers"===
k||"Image"===k||"Visio Document"===k||"PDF"===k||"Desktop Application"===k||"Task File"===k||"Project Package"===k||"ArcGIS Pro Configuration"===k||"Project Template"===k||"Desktop Style"===k||"Native Application Installer"===k||"360 VR Experience"==k?(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==k?-1<D.indexOf(c.typeKeywords,"desktopApplicationTemplateUrl")&&
c.url&&0<c.url.length?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),n=f=esri.i18nBundle.itemLinks.open):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==k&&-1===D.indexOf(c.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===k||"Hub Page"===k||"Hub Site Application"===k?(k=arcgisonline.sharing.util.isHostedTemplateItem(c.url),
c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||r&&-1<c.url.indexOf(r))&&-1===c.url.indexOf(".opendata")&&(c.url=esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),c.access&&"public"!==c.access&&k&&!arcgisonline.sharing.util.isPortal()&&(m=arcgisonline.sharing.util.parseUrl(c.url),c.url=c.url.replace(m.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&c.url&&0===c.url.indexOf("/")&&(m=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),
-1===c.url.indexOf(m)&&(c.url=m+c.url)),r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),f=esri.i18nBundle.itemLinks.viewApp,n=esri.i18nBundle.itemLinks.open):(r=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,n=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==k?c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||r&&-1<c.url.indexOf(r))&&(c.url=esriGeowConfig.allSSL?c.url.replace("http:",
"https:"):c.url),r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.getApp):(r=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,n=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==k?(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.download):"Document Link"===
k?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),n=f=esri.i18nBundle.itemLinks.open):"Form"===k&&(!n||n&&n.accountId)?(r=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+c.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),f=esri.i18nBundle.itemLinks.openSurvey123,n=esri.i18nBundle.itemLinks.open):"Workforce Project"===
k?(n=(k=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",r=window.location.protocol+"//"+n+((k?"/apps/workforce/#":"")+("/projects/"+c.id+"/dispatch/assignments")),f=esri.i18nBundle.itemLinks.openWorkforce,n=esri.i18nBundle.itemLinks.open):"Insights Workbook"===k||"Insights Data Engineering Workbook"===k||"Insights Page"===k||"Insights Model"===k||"Insights Data Engineering Model"===k?(n=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",r=n="Insights Model"===k||"Insights Data Engineering Model"===k?n+("?model\x3d"+c.id):"Insights Page"===k?n+("view/"+c.id):n+c.id,f=esri.i18nBundle.itemLinks.openInsights,n=esri.i18nBundle.itemLinks.open):"Dashboard"===k?(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+c.id,f=esri.i18nBundle.itemLinks.dashboardView,n=esri.i18nBundle.itemLinks.open):"StoryMap"===
k?(r="JavaScript:void(0)",m=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),n=f=esri.i18nBundle.itemLinks.open):"Web Experience"===k&&c.webExperienceUrl?(r=c.webExperienceUrl,n=f=esri.i18nBundle.itemLinks.open):(r=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,n=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openExplorer,
f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),n=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(r="JavaScript:void(0)",m=D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c)),n=esri.i18nBundle.itemLinks.open,f=
"Task File"!==k?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:n,href:r,target:"",tip:f,onclick:m}},getItemOpenLinkObjects:function(c,k){var n=this.isSilverlightInstalled(),r=[],f=c.type?c.type:"",m=this.getUser(),q=!1;if("Web Map"==f&&-1==D.indexOf(c.typeKeywords,"ArcGIS Online")&&n&&esriGeowConfig.explorerOnline)r.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:D.partial(arcgisonline.map.mapUtil.openMap,c.id,
q)}),this.couldHaveArcGISDesktop()&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))});else if("Web Map"==f)q=!m&&this._isPremiumService(c),r.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:D.partial(arcgisonline.map.mapUtil.openMap,c.id,q)}),this.couldHaveArcGISDesktop()&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))}),f=
window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/presentation/index.html?webmap\x3d"+c.id,-1<D.indexOf(c.typeKeywords,"Presentation Map")?(r.push({label:esri.i18nBundle.aboutPanel.viewPresentation,onClick:D.partial(arcgisonline.sharing.util.openPage,f)}),k&&r.push({label:esri.i18nBundle.aboutPanel.editPresentation,onClick:D.partial(arcgisonline.sharing.util.openPage,f+"\x26builder",!0)})):k&&r.push({label:esri.i18nBundle.aboutPanel.createPresentation,
onClick:D.partial(arcgisonline.sharing.util.openPage,f+"\x26builder",!0)});else if("Map Service"==f||"Vector Tile Service"===f)q=!m&&this._isPremiumService(c),r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,c.id,q)}),r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,
c.id,q)}),esriGeowConfig.sceneViewerEnabled&&r.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,!0)}),"Vector Tile Service"!==f?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(c)&&(-1<D.indexOf(c.typeKeywords,"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?
r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(c.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(c.url)?r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):c.url&&-1!==c.url.indexOf(".arcgis.com/")&&-1!==c.url.indexOf("//landscape")?r.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(c)&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))})):(f=c.access&&"public"!==c.access&&m&&m.token?"\x26token\x3d"+m.token:"",m=(c&&c.hasResources?
esriGeowConfig.restBaseUrl+"content/items/"+c.id:c.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(c.hasResources)&&(k&&c&&c.hasResources&&r.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:D.partial(arcgisonline.sharing.util.openPage,m+"\x26download\x3dtrue"+f,!0)}),(k&&c&&c.hasResources||c.url&&-1<c.url.indexOf("/VectorTileServer"))&&r.push({label:esri.i18nBundle.itemLinks.viewStyle,onClick:D.partial(arcgisonline.sharing.util.openPage,m+f,!1)})));else if(this.couldHaveArcGISDesktop()&&
"Globe Service"==f)r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==f||"Feature Service"==f||"KML"==f||"Feature Collection"==f||"Stream Service"==f){n=c&&c.extraUrlParams?!0:!1;q=!m&&this._isPremiumService(c);if("Image Service"!==f||"Image Service"===f&&-1===D.indexOf(c.typeKeywords,"Elevation 3D Layer"))r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},
esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,c.id,q,n)}),r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,c.id,q,n)});if("KML"==f)this.couldHaveArcGISDesktop()&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}),r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,
"_fetchItemData",c,this.getItemDataPath(c))});else if("Image Service"===f||"Feature Service"===f)esriGeowConfig.sceneViewerEnabled&&-1===D.indexOf(c.typeKeywords,"Table")&&("Feature Service"===f&&-1===D.indexOf(c.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===f&&-1<D.indexOf(c.typeKeywords,"Elevation 3D Layer"))&&r.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===f&&(c.url&&-1!==c.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(c.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(c.url)?r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):r.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===f&&this.couldHaveArcGISDesktop()&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))})}else if("Geoprocessing Service"===f&&this.couldHaveArcGISDesktop())r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))});else if("WMS"==f||
"WFS"===f||"WMTS"===f)c.noWebMercator?r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnGCSMap,c.id)}):(r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,c.id)}),r.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),
onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,c.id)})),esriGeowConfig.sceneViewerEnabled&&r.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,!0)}),this.couldHaveArcGISDesktop()&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))});
else if("File Geodatabase"===f||"CSV Collection"===f||"KML Collection"===f||"Rule Package"==f||"CSV"==f||"GeoJson"===f||"Shapefile"==f||"Service Definition"==f||"ArcPad Package"===f||"Operations Dashboard Addin"===f)r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Map Package"==f||"Mobile Map Package"===f||"Basemap Package"===f||"Mobile Basemap Package"===f||"Layer Package"==f||"Pro Map"==f||"Layout"==f||-1<D.indexOf(c.typeKeywords,
"lyrx"))this.couldHaveArcGISDesktop()&&c&&-1===c.name.indexOf(".bpkx")&&-1===c.name.indexOf(".mmpk")&&-1===c.name.indexOf(".bpk")&&-1===c.name.indexOf(".lpkx")&&-1===c.name.indexOf(".mpkx")&&-1===c.name.indexOf(".lyrx")&&-1===c.name.indexOf(".mapx")&&-1===c.name.indexOf(".pagx")&&r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))}),r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});
else if("Geoprocessing Package"==f||"Locator Package"==f||"Tile Package"==f||"Vector Tile Package"==f||"Project Package"===f||"Project Template"===f)this.couldHaveArcGISDesktop()&&"Task File"!==f&&"Project Package"!==f&&"Project Template"!==f&&r.push({label:"Task File"!==f?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))}),r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",
c,this.getItemDataPath(c))});else if("Scene Package"==f)r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=f&&"Published Map"!=f&&"Globe Document"!=f&&"Scene Document"!=f&&"Layer"!=f)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=f&&"ArcGIS Pro Add In"!==f)if("Explorer Layer"==f||"Explorer Add In"==f||"Explorer Map"==f)r.push({label:esri.i18nBundle.itemLinks.openExplorer,
onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Map Template"===f||"Code Sample"===f||"Geoprocessing Sample"===f||"Workflow Manager Package"===f||"Windows Viewer Add In"===f||"Microsoft Word"===f||"CAD Drawing"===f||"Raster function template"===f||"Microsoft PowerPoint"===f||"Microsoft Powerpoint"===f||"Microsoft Excel"===f||"iWork Pages"===f||"iWork Keynote"===f||"iWork Numbers"===f||"Image"===f||"Visio Document"===f||"PDF"===f||"Desktop Application"===f||"Task File"===
f||"Desktop Style"===f||"Native Application Installer"===f||"360 VR Experience"==f||"ArcGIS Pro Configuration"===f)r.push({label:"PDF"!==f?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Desktop Application Template"===f)(f=-1<D.indexOf(c.typeKeywords,"desktopApplicationTemplateUrl"))&&c.url&&c.url.length&&(f=!0,r.push({label:esri.i18nBundle.itemLinks.open,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,
c.id,c.url)})),f||r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Web Mapping Application"==f&&-1===D.indexOf(c.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==f||"Application"==f||"Native Application"===f||"Native Application Template"===f||"Hub Initiative"===f||"Hub Page"===f||"Hub Site Application"===f)arcgisonline.sharing.util.isHostedTemplateItem(c.url),m=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==
f&&(m=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&c.url&&0===c.url.indexOf("/")&&(f=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===c.url.indexOf(f)&&(c.url=f+c.url)),c.url&&0<c.url.length&&r.push({label:m,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url)}),-1<D.indexOf(c.typeKeywords,"Web AppBuilder")&&k&&(f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/webappbuilder/index.html?id\x3d"+c.id,f="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(f):arcgisonline.sharing.util.getHttpUrl(f),r.push({label:esri.i18nBundle.itemLinks.editApp,onClick:D.partial(arcgisonline.sharing.util.openPage,f,!0)}));else if("Windows Mobile Package"==f)r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("CityEngine Web Scene"==f)f=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+c.id,r.push({label:esri.i18nBundle.itemLinks.viewApp,onClick:D.partial(arcgisonline.sharing.util.openPage,f)}),r.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Web Scene"===f&&esriGeowConfig.sceneViewerEnabled)f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+
c.id,r.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPage,f,!0)});else if("Scene Service"===f&&esriGeowConfig.sceneViewerEnabled)f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,r.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,f,!0)});else if("Operation View"===f){f=window.location;
m=arcgisonline.sharing.util.isPortal();q=f.protocol+"//"+(m?esriGeowConfig.self.portalHostname:f.host);n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+c.id;var l=-1<D.indexOf(c.typeKeywords,"TabletLayout");D.indexOf(c.typeKeywords,"DesktopLayout");var b=-1<D.indexOf(c.typeKeywords,"V2"),g=this.couldHaveArcGISDesktop();f=this._isOperationsViewSupportedBrowser();g&&!b&&r.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,
onClick:D.partial(arcgisonline.sharing.util.openPage,q+(m?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+c.id)});!b&&l&&f&&r.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,onClick:D.partial(arcgisonline.sharing.util.openPage,n,!1)})}else"Document Link"===f?r.push({label:esri.i18nBundle.itemLinks.open,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url)}):"Form"===f&&m&&m.accountId?r.push({label:esri.i18nBundle.itemLinks.openSurvey123,
onClick:D.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+c.id+"\x26username\x3d"+m.username,!0)}):"Workforce Project"===f?(f=(m=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",r.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:D.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+f+((m?"/apps/workforce/#":"")+("/projects/"+c.id+"/dispatch/assignments")),!0)})):
"Insights Workbook"===f||"Insights Data Engineering Workbook"===f||"Insights Page"===f||"Insights Model"===f||"Insights Data Engineering Model"===f?(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",m="Insights Model"===f||"Insights Data Engineering Model"===f?m+("?model\x3d"+c.id):"Insights Page"===f?m+("view/"+c.id):m+c.id,r.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:D.partial(arcgisonline.sharing.util.openPage,
m,!0)})):"Dashboard"===f&&(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/",f=this._isOperationsViewSupportedBrowser(!0),m+=c.id,q=m+"?edit\x3dtrue",r.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:D.partial(arcgisonline.sharing.util.openPage,m,!1)}),k&&f&&r.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:D.partial(arcgisonline.sharing.util.openPage,q,!1)}));else r.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else r.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});return r},getGroupLinks:function(c){var k=D.create,n=k("span",{"class":"esriItemLinks",style:"white-space: nowrap"});k("a",{href:esriGeowConfig.baseUrl+"group.html?id\x3d"+c.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},
n);return n},getItemDataPath:function(c){var k=arcgisonline.sharing.util.getToken(),n=k?"?token\x3d"+k:"",r=esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/data";return"KML"==c.type&&(n="public"!==c.access&&k?"?token\x3d"+k:"",c.url&&-1===c.url.indexOf(r))?c.url+n:r+n},getItemPkgPath:function(c){var k=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/item.pkinfo"+(k?"?token\x3d"+k:"")},getPItemPath:function(c){var k=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/item.pitem"+(k?"?token\x3d"+k:"")},getItemZipPath:function(c){var k=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/data?f\x3dzip"+(k?"\x26token\x3d"+k:"")},getUser:function(){return esriGeowConfig.userInfo||null},meetsPasswordStrength:function(c){return 8<=c.length&&c.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(c,k){var n={meetsRequirements:function(){return this.minLength&&
this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};if(k&&0<k.length){c.minLength&&(n.minLength=k.length>=c.minLength);if(c.minLetter){var r=k.match(/[A-Za-z]/g);n.minLetter=!!(r&&r.length>=c.minLetter)}c.minUpper&&(r=k.match(/[A-Z]/g),n.minUpper=!!(r&&r.length>=c.minUpper));c.minLower&&(r=k.match(/[a-z]/g),n.minLower=!!(r&&r.length>=c.minLower));c.minDigit&&(r=k.match(/[0-9]/g),n.minDigit=!!(r&&r.length>=
c.minDigit));c.minOther&&(r=k.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),n.minOther=!!(r&&r.length>=c.minOther))}else c.minLength&&(n.minLength=!1),c.minLetter&&(n.minLetter=!1),c.minUpper&&(n.minUpper=!1),c.minLower&&(n.minLower=!1),c.minDigit&&(n.minDigit=!1),c.minOther&&(n.minOther=!1);return n},userPreferences:function(c,k,n){var r=D.cookie(k||"esri_prefs");if(c)r&&(c=D.mixin(D.json.parse(r),c)),D.cookie(k||"esri_prefs",D.json.stringify(c),{path:"/",expires:1E4,sameSite:"Strict"}),
c.contentMode&&n&&this.getUser()?(r=D.create,n=r("form",{method:"POST"},D.body()),r("input",{type:"hidden",name:"preferredView",value:c.contentMode},n),r("input",{type:"hidden",name:"clearEmptyFields",value:"false"},n),arcgisonline.sharing.geow.Community.updateProfile(n,function(f){D.publish("esri/userPreferences"+(k||"user_prefs"),[c])})):D.publish("esri/userPreferences"+(k||"user_prefs"),[c]);else return n="contentModePrefs"===k?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,
null!=r?D.json.parse(r):n?{contentMode:n}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.credential&&esriGeowConfig.userInfo.credential.token||esriGeowConfig.userInfo.token},callPage:function(c){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+c)},openPageAndCount:function(c,k,n){c=esriGeowConfig.restBaseUrl+"content/items/"+c+"/data";var r=arcgisonline.sharing.util.getToken(),f={f:"json"};null!=r&&""!==r&&(f.token=r);esri.request({url:c,
content:f,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(k,"boolean"===typeof n?n:!1)},openPage:function(c,k){k?window.location=c:window.open(c)},fix:function(c){null!=c&&1==c.length&&null!=c[0]&&0<c[0].length&&(c=c[0]);return c.replace(/&lt;/g,"\x3c")},stripHTML:function(c){return c?-1<c.indexOf("\x3c")&&-1<c.indexOf("\x3e")?c.replace(/<[^>]+>/g,""):c:c},urlToObject:function(c){c=esri.urlToObject(c);c.query=c.query||{};for(var k in c.query)c.query.hasOwnProperty(k)&&(Array.isArray(c.query[k])||
(c.query[k]=c.query[k].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return c},linkifyText:function(c){c=c.split(" ");for(var k=0;k<c.length;k++)if(0===c[k].indexOf("http://")||0===c[k].indexOf("https://"))c[k]="\x3ca href\x3d'"+c[k]+"' target\x3d'_blank'\x3e"+c[k]+"\x3c/a\x3e";return c.join(" ")},removeHTMLTags:function(c){if(null==c)return"";c=c.replace(/&(lt|gt);/g,function(k,n){return"lt"==n?"\x3c":"\x3e"});return c.replace(/<\/?[^>]+(>|$)/g,"")},escapeHTML:function(c){var k={"\x26":"\x26amp;","\x3c":"\x26lt;",
"\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(c).replace(/[&<>"'\/]/g,function(n){return k[n]})},unescapeHTML:function(c){return String(c).replace("\x26lt;","\x3c").replace("\x26gt;","\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;","\x26")},getSnippet:function(c,k){if(null==c||0===c.length)k=arcgisonline.sharing.util.removeHTMLTags(k),c=180<k.length?k.substring(0,180)+" ...":k;return c},trimTags:function(c){for(;-1<
c.indexOf("  ");)c=c.replace(/  /g," ");for(;-1<c.indexOf(",,");)c=c.replace(/,,/g,",");return c=D.trim(c.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(c){c=0<=c.indexOf("?")?c+"\x26f\x3djson":c+"?f\x3djson";var k=this.getToken();null!=k&&""!==k&&(c=c+"\x26token\x3d"+k);return this.useSSL(c)},replaceSSL:function(c){return!1===esriGeowConfig.useSSL?c:c.replace("http://","https://")},useSSL:function(c){return"https:"===window.location.protocol||esriGeowConfig.self&&
!0===esriGeowConfig.self.allSSL?c.replace("http:","https:"):c},errorHandler:function(c,k,n,r){c&&c.code&&"IdentityManagerBase.5"===c.code&&(c.code=498);if(-1<n.indexOf(esriGeowConfig.restBaseUrl)&&c.code&&498==c.code||403==c.code||400==c.code&&"Invalid account"==c.message)if(403==c.code&&!0===this.isLoggedIn())n&&-1<n.toLowerCase().indexOf("/generatetoken")?window.location.href=esriGeowConfig.baseUrl+"signin.html":n&&-1<n.indexOf("/invitations/")&&r?r(c,k):0>window.location.href.indexOf(esriGeowConfig.baseUrl+
"error.html")&&("Request not made over ssl"==c.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(c)&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccessDeniedResource"));else{if(!(403===c.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(c)||403===c.code&&!1===esriGeowConfig.isMultiTenant&&-1<D.indexOf(["COM_0056","COM_0057","SB_0008"],c.messageCode))){esriGeowConfig.userInfo=null;D.cookie("esri_auth",
null,{expires:-1,path:"/",domain:document.domain});D.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});D.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.arcgis_auth&&delete arcgisonline.sharing.util._cookies.arcgis_auth;k="";-1==esriGeowConfig.signin.indexOf("http")&&(k=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(k=k.replace("http:","https:")));k+=esriGeowConfig.signin;
n="";r=k+("?error\x3d"+c.code);var f=D.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(r)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&arcgisonline.map.main&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,!1),n="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):n="\x26returnUrl\x3d"+encodeURIComponent(f?
f:window.location):f&&(n="\x26returnUrl\x3d"+encodeURIComponent(f));r+=n;0>window.location.href.indexOf(r)?window.location=r:"User not part of this account"===c.message&&(window.location=k+"?error\x3d400"+n)}}else r&&r(c,k)},checkSubscriptionStatus:function(c){return-1!==D.indexOf(["SB_0001","SB_0002","SB_0003","SB_0004"],c.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),!1):-1!==D.indexOf(["SB_0005",
"SB_0006","SB_0007"],c.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(c.messageCode),!1):!0},isValidSubscriptionState:function(){var c=esriGeowConfig.self.subscriptionInfo,k=["cancelled","expired","suspended","restricted"];return!c||-1===k.indexOf(c.state)},checkError:function(c){var k;return-1!==D.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),c.messageCode)?(c=(k=D.mixin({},D.i18n.getLocalization("arcgisonline",
"arcgisonline").common))&&k.errors&&k.errors[c.messageCode]?{message:k.errors[c.messageCode]}:c,c=D.mixin(D.mixin({},k.errors.genericError),c),esriGeowConfig.hideDefaultCheckErrorMessage||(k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),k.show(c)),!1):!0},handler:function(c,k,n,r,f){c.error&&""!==c.error?arcgisonline.sharing.util.errorHandler(c.error,k,n,f):r&&r(c,k)},getJson:function(c,k,n){return arcgisonline.sharing.util._requestWithAppHandlers({url:c},{},k,n)},getJsonWithContent:function(c,
k,n,r){return arcgisonline.sharing.util._requestWithAppHandlers({url:c,content:k},{},n,r)},postJson:function(c,k,n,r){return arcgisonline.sharing.util._requestWithAppHandlers({url:k,content:c},{usePost:!0},n,r)},postJsonCheckProxy:function(c,k,n,r){return"http:"===window.location.protocol&&-1<k.indexOf("https://")?arcgisonline.sharing.util._requestWithAppHandlers({url:k,content:c},{usePost:!0,useProxy:!0},n,r):arcgisonline.sharing.util._requestWithAppHandlers({url:k,content:c},{usePost:!0},n,r)},
postForm:function(c,k,n,r){return arcgisonline.sharing.util._requestWithAppHandlers({url:k,form:c},{usePost:!0},n,r)},_requestWithAppHandlers:function(c,k,n,r){var f=arcgisonline.sharing.util.request(c,k);f.then(function(m,q){arcgisonline.sharing.util.handler(m||{},f.ioArgs,c.url,n,r);return m},function(m,q){arcgisonline.sharing.util.errorHandler(m||{},f.ioArgs,c.url,r);throw m;});return f},request:function(c,k){var n=c.url,r=c.content||{},f=arcgisonline.sharing.util.getToken();k=k||{};var m=arcgisonline.sharing.util.urlToObject(n).query||
{};r.f||m.f||k.removeFormatProp||(r=D.mixin(r,{f:"json"}));f&&!r.token&&!1!==k.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(c.url)||(r.token=f):!1===k.addToken&&delete r.token;c=D.mixin({},{url:!1===k.addSSL?n:arcgisonline.sharing.util.useSSL(n),content:r,form:c.form,callbackParamName:c.form?c.callbackParamName||null:c.callbackParamName||"callback",timeout:k&&
k.timeout||0});var q=esri.request(c,k);q.addErrback(function(l){"IdentityManagerBase.1"===l.code&&(l.code=l.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(l,q);arcgisonline.sharing.util.checkSubscriptionStatus(l)||(q.canceled=!0);arcgisonline.sharing.util.isUnlicensed(l)&&(q.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(l)&&(q.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&
(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(l)&&(q.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));arcgisonline.sharing.util.isOldLicense(l)&&(q.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));arcgisonline.sharing.util.isInvalidUser(l)&&(q.canceled=
!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(l)&&(q.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));arcgisonline.sharing.util.checkError(l)||(q.canceled=!0);throw l;});return q},_fetchItemData:function(c,k){var n=this.getUser(),r=this.getItemDataPath(c);"admin"===c.itemControl||n&&n.username===c.owner?this.openPage(k,!0):this._canAccessUrl(r).then(D.hitch(this,
function(){this.openPage(k,!0)}),D.hitch(this,function(f){f&&403===f.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(k,!0)}))},_canAccessUrl:function(c){var k=new D.Deferred;D.xhr("HEAD",{url:c,handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(n){k.resolve(!0)},function(n){k.reject(n)});return k},_showError:function(c){var k=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,
style:{width:"375px",height:"auto"}}),n=c||{};n.code=c.code||0;n=D.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[c.code]||c);k.show(n).then(D.hitch(this,function(){k.hide()}))},checkSoftwareAuthError:function(c,k){var n=["COM_0056","COM_0057"];!1===esriGeowConfig.isMultiTenant&&c.code&&403===c.code&&c.messageCode&&-1!==D.indexOf(n,c.messageCode)&&-1===window.location.href.indexOf("error.html")&&(k.canceled=!0,"COM_0056"===c.messageCode?window.location=esriGeowConfig.baseUrl+
"error.html?c\x3dPortalCreateAccount":"COM_0057"===c.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0006"===c.messageCode},isInsufficientLevel:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0012"===c.messageCode},isUnlicensed:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&
c.messageCode&&"GWM_0013"===c.messageCode},isOldLicense:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0014"===c.messageCode},isInvalidUser:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&404===c.code&&c.messageCode&&"POR_205244"===c.messageCode},isDisabledEnterpriseUser:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&403===c.code&&c.messageCode&&"SB_0008"===c.messageCode},isNode:function(c){return"object"===typeof Node?c instanceof
Node:c&&"object"===typeof c&&"number"===typeof c.nodeType&&"string"===typeof c.nodeName},isElement:function(c){return"object"===typeof HTMLElement?c instanceof HTMLElement:c&&"object"===typeof c&&1===c.nodeType&&"string"===typeof c.nodeName},isHostedService:function(c){if(!c)return!1;var k=(new D._Url(esriGeowConfig.restBaseUrl)).authority,n=!1===esriGeowConfig.isMultiTenant,r=-1!==c.indexOf(".arcgis.com/"),f=-1!==c.indexOf("//services")||-1!==c.indexOf("//tiles")||-1!==c.indexOf("//features")||-1!==
c.indexOf("//locationservices")||-1!==c.indexOf("//iservices")||-1!==c.indexOf("//tiledimageservices");c=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==c.indexOf(k)&&!n;return r&&f||!r&&c},isHostedServiceItem:function(c){return arcgisonline.sharing.util.isHostedService(c.item)||arcgisonline.sharing.util.isHostedService(c.url)},isHostedTemplateItem:function(c){c=c?c.split("?")[0]:"";var k=c.match(/http.+(arcgis.com\/apps)\/?/gi);c=c.match(/http.+(opendata)\/?/gi);
return k&&k.length&&!c?!0:!1},isAgolService:function(c){return c?-1!==c.indexOf("/services.arcgisonline.com/")||-1!==c.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(c){if(!c)return!1;var k=!1;D.forEach(esriGeowConfig.httpsDomains,function(r){if(-1<c.indexOf("."+r+"/")||-1<c.indexOf("/"+r+"/"))k=!0});if(!k){var n=esriGeowConfig.self.portalHostname;-1<n.indexOf("/")&&(n=n.substring(0,n.indexOf("/")));-1<c.indexOf(n)&&(k=!0)}return k},isArcGISServer:function(c){var k=/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/gi,
n=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/gi;return(c=(c=c&&c.split("?")[0])&&c.replace(k,"").match(n))&&c.length?c[0].split("/")[1]:null},getStaticImagesUrl:function(){var c=esriGeowConfig.staticImagesUrl||esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&c?c.replace("http:","https:"):c},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+
"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(c){var k=document.createElement("a");k.href=c;for(var n=k.protocol.replace(":",""),r=k.hostname||window.location.host,f=k.port,m=k.search,q={},l=k.search.replace(/^\?/,"").split("\x26"),b=l.length,g=0,e;g<b;g++)l[g]&&(e=l[g].split("\x3d"),q[e[0]]=e[1]);return{source:c,protocol:n,host:r,port:f,query:m,params:q,file:(k.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:k.hash.replace("#",""),path:k.pathname.replace(/^([^\/])/,"/$1"),
relative:(k.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:k.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(c){var k;return c?(k||(k=document.createElement("a")),k.href=c,k.href):c},ellipse:function(c,k){c&&c.length>k&&0<k-4&&(c=c.substring(0,k-4)+"...");return c},appendTags:function(c,k){var n=c.get("value");k=n?k.split(",").concat(n.split(",")):k.split(",");c.set("value",arcgisonline.sharing.util.getUniqueArray(k).join(","));D.style(c.domNode,"color","#000000")},getUniqueArray:function(c){var k=
{};return D.filter(c,function(n){return k[n]?!1:k[n]=!0})},relativeToExplicitUrl:function(c){esriGeowConfig.cdnServerUrl=D.baseUrl.substring(0,D.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-1?esriGeowConfig.cdnServerUrl+c:esriGeowConfig.cdnServerUrl+"/"+c},getCookie:function(c,k){c="esri_auth"===c?"arcgis_auth":c;var n=this._cookies&&this._cookies[c]||null;if(!n||k)(n=(n=D.cookie(c))?D.json.parse(n):-1)&&n.role&&(n.role=n.role?n.role.replace("org_",
"account_"):n.role),n&&(this._cookies||(this._cookies={}),this._cookies[c]=n);return-1===n||esriGeowConfig.ignoreCookie?null:n},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?!0:esriGeowConfig.self.canSharePublic},getSecureUrl:function(c){c||(c=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?
(c=c.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(c=c.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):c=c.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),c=c.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(c)):c.replace("http:","https:")},htmlEncode:function(c){return c?c.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):c},htmlDecode:function(c){return c?
c.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):c},getHttpUrl:function(c){c||(c=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpPort?(location.port?(c=c.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(c=c.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):c=c.replace(location.hostname,
location.hostname+":"+esriGeowConfig.self.httpPort),c=c.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(c)):c.replace("https:","http:")},cleanPorts:function(c){return c.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&
"https:"===location.protocol},onAGOLFederatedServer:function(c){for(var k=!1,n=0;n<esriGeowConfig.httpsDomains.length;n++)if(c&&-1<c.indexOf(esriGeowConfig.httpsDomains[n])){k=!0;break}return k},onFederatedServer:function(c){var k=!1,n=!1;c&&0<c.length&&esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&(k=D.some(esriGeowConfig.federatedServers,D.hitch(this,function(r){var f=-1<c.indexOf(":6080")?c.replace("http:","https:").replace(":6080",":6443"):c,m=r.url?arcgisonline.sharing.util.getUrlWithoutScheme(r.url):
r.url,q=r.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(r.adminUrl):r.adminUrl;m=-1<m.indexOf(":")?r.url:m;q=-1<q.indexOf(":")?r.adminUrl:q;n=f!==c;return-1<c.indexOf(m)||-1<c.indexOf(q)||n&&(-1<f.indexOf(m)||-1<f.indexOf(q))})));return k},getUrlWithoutScheme:function(c){if(esri.isDefined(c)){if(0===c.indexOf("http://"))return c.substring(7);if(0===c.indexOf("https://"))return c.substring(8)}return c},isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},
isArcGISEnterpriseOnKubernetes:function(){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var c=window.location.pathname,k=c.indexOf("/home");if(0<k)return c.substring(0,k)}return""},normalizeOrgRole:function(c){return c?c.replace("org_","account_"):c},checkForIAA:function(){var c=
new D.Deferred,k=!!esriGeowConfig.isDebug,n=arcgisonline.sharing.util.getPortalAdminBaseUrl(),r=arcgisonline.sharing.util.getUser();D.xhrGet({url:n+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(D.hitch(this,function(f){f&&f.status&&"error"===f.status&&f.code&&503===f.code?c.resolve({hasIAA:!0,error:f}):f&&(!f.error&&!r||f.error&&f.error.code&&(!r&&499!==f.error.code&&498!==f.error.code||r&&499!==f.error.code&&498!==f.error.code))?-1===window.location.href.indexOf("createadmin.html")?
window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):c.resolve({hasIAA:!1}):c.resolve({hasIAA:!0})}),D.hitch(this,function(f){!k&&(f.status&&499!==f.status||f&&(!f.error&&!r||f.error&&f.error.code&&(!r&&499!==f.error.code&&498!==f.error.code||r&&499!==f.error.code&&498!==f.error.code)))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+
"/home/createadmin.html"):c.resolve({hasIAA:!1}):c.resolve({hasIAA:!0,error:f})}));return c},getBridgeUrl:function(c,k){var n=esriGeowConfig.bridgeUrl+"?url\x3d"+encodeURIComponent(c);return k&&k.expires?n+"\x26exp\x3d"+Math.ceil((new Date(k.expires)-new Date)/1E3):n},getUserDisplayName:function(c){var k=c&&c.fullName||"";c=c.firstName||k;-1<k.indexOf("_")?c=k.split("_")[0]:-1<k.indexOf(",")?c=k.split(",").slice(1).join(" "):-1<k.indexOf(" ")&&(c=k.split(" ")[0]);return c.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,
"").replace(/\s+/g," ")},isProApp:function(c){return c&&"ArcGIS Pro"===c.title&&"esri_apps"===c.owner&&c.tags&&-1<D.indexOf(c.tags,"pro")},findProListing:function(){var c=new D.Deferred,k=!1,n=!1,r;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(D.hitch(this,function(f){f.purchases?(D.forEach(f.purchases,D.hitch(this,function(m){!n&&m.listing&&"ArcGIS Pro"===m.listing.title&&"esri_apps"===m.listing.owner&&"licenseByUser"===m.listing.licenseBy&&(k=
D.some(m.listing.tags,D.hitch(this,function(q){return q&&"pro"===q.toLowerCase()})))&&(r=m,n=!0)})),c.resolve(n?r:null)):c.resolve(null)}),D.hitch(this,function(f){c.reject(f)}));return c},findLicenseByUserProducts:function(){var c=new D.Deferred,k=esriGeowConfig.restBaseUrl+"portals/self/purchases",n=!1,r=!1,f={pro:null,products:null};this.isPortal();var m=D.hitch(this,function(q){if(q.listing&&"licenseByUser"===q.listing.licenseBy)if(n=!0,"ArcGIS Pro"===q.listing.title&&"esri_apps"===q.listing.owner){if(r=
D.some(q.listing.tags,D.hitch(this,function(l){return l&&"pro"===l.toLowerCase()})))f.pro=q}else q&&q.provision&&(f.products?f.products.push(q):f.products=[q])});arcgisonline.sharing.util.request({url:k}).then(D.hitch(this,function(q){q.purchases||q.trials?(q.purchases&&D.forEach(q.purchases,m),q.trials&&D.forEach(q.trials,m),c.resolve(n?f:null)):c.resolve(null)}),D.hitch(this,function(q){c.reject(q)}));return c},isEsriWorldGeocoder:function(c){var k=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(c);
c=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(c);return k||c},isEsriWorldGeocoderNoProxy:function(c){return(c=c.url||"")&&!!c.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi)},isEsriWorldGeocoderThroughProxy:function(c){var k=c.url||"";return c.isAGOWorldLocator||k&&!!k.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi)},filterBatchGeocoders:function(c,k){return D.filter(c,D.hitch(this,function(n){var r=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(n),
f=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(n);if(r||f)esri.isDefined(n.name)?"Esri World Geocoder"===n.name&&(n.name=esri.i18nBundle.common.esriWorldGeocoder):n.name=esri.i18nBundle.common.esriWorldGeocoder;return r&&(arcgisonline.sharing.util.isPortal()||k)?!1:esri.isDefined(n.batch)?!!n.batch:r||f}))},filterNonWorldGeocoders:function(c){return D.filter(c,D.hitch(this,function(k){var n=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(k),r=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(k);
return!n&&!r&&k.url}))},downloadWebMappingApp:function(c){var k="Mobile Application"!==c.type?"WMA2Code":"MobileApp2Code",n=esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/relatedItems";k=c.relatedItems||arcgisonline.sharing.util.request({url:n,content:{relationshipType:k}}).then(D.hitch(this,function(r){c.relatedItems=r&&r.relatedItems||[];return c.relatedItems}));return D.when(k,D.hitch(this,function(r){var f=r||[],m,q=D.filter(f,function(l){return l&&null!==l.url});r=q&&q.length?q[0]:f&&0<f.length?
f[0]:r;r.id&&(m=r.url||arcgisonline.sharing.util.getItemDataPath(r));r.url?window.open(m):window.location=m;B.byId("share-map-stack")&&B.byId("share-map-stack").selectChild(B.byId("share-map-application-help"))}),D.hitch(this,function(r){}))},loadUserTags:function(c){var k=new D.Deferred;c?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+c+"/tags",content:{ts:(new Date).getTime()}}).then(D.hitch(this,function(n){var r=[];n&&n.tags&&(r=n.tags);r=r.map(function(f){f.tag=
arcgisonline.sharing.util.sanitizer.sanitize(f.tag);return f}.bind(this));k.resolve(r)}),D.hitch(this,function(n){k.resolve([])})):k.resolve([]);return k},loadUserProperties:function(c){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+c+"/properties"})},isValidEmailAddress:function(c){var k=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(c)&&k.test(c)&&(k=c.match(k),k.length&&k.shift().length===c.length)?!0:!1},groupUsedInOrgSettings:function(c){return(c=c?"id:"+c:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(c)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(c)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(c)||esriGeowConfig.self.featuredItemsGroupQuery&&
-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(c)||esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(c)||esriGeowConfig.self.homePageFeaturedContent&&-1<esriGeowConfig.self.homePageFeaturedContent.indexOf(c)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(c)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(c)||esriGeowConfig.self.stylesGroupQuery&&
-1<esriGeowConfig.self.stylesGroupQuery.indexOf(c)||esriGeowConfig.self.symbolSetsGroupQuery&&-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(c)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(c)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(c))},canShowSocialMediaLinks:function(){var c=arcgisonline.sharing.util.isPortal(),k=arcgisonline.sharing.util.canSharePublic(),n=!(!esriGeowConfig.self||
!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),r=n&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(c?k&&r:k&&(!n||r))},getPortalAdminBaseUrl:function(){var c=arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl;return arcgisonline.sharing.util.getSecureUrl(c)},
formatPortalOrgUrl:function(c,k,n){return arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?c+"/orgs/"+n+k:c+k},getLevelSpan:function(c,k){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+c+" "+k+'"\x3e'+k+"\x3c/span\x3e"},getLevelSpanProperties:function(c,k){return{"class":"license-level-badge",innerHTML:k,"aria-label":c+" "+k}},createLevelSpan:function(c,k,n,r){return D.create("span",D.mixin(arcgisonline.sharing.util.getLevelSpanProperties(c,k),r||{}),n)},createLevelSpanAndPlace:function(c,
k,n,r,f){return D.create("span",D.mixin(arcgisonline.sharing.util.getLevelSpanProperties(c,k),r||{}),n,f)},getFullDomain:function(c){c=c.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=c&&2<c.length&&"string"===typeof c[2]&&0<c[2].length?c[2]:null},isValidOnlineReturnUrl:function(c){var k=decodeURI(c),n=arcgisonline.sharing.util.parseUrl(window.location.href);c=arcgisonline.sharing.util.parseUrl(k);var r=(k=0===k.indexOf("http://")||0===k.indexOf("https://"))&&c.host?c.host.lastIndexOf(".arcgis.com"):
-1,f=k&&c.host?c.host.lastIndexOf(".esri.com"):-1,m=k&&c.host?c.host.lastIndexOf(n.host):-1;r=-1<r&&r+11-1===c.host.length-1;f=-1<f&&f+9-1===c.host.length-1;n=-1<m&&m+n.host.length-1===c.host.length-1;return k&&c.host&&(r||f||n)?!0:!1},isValidPortalReturnUrl:function(c){var k=decodeURI(c),n=arcgisonline.sharing.util.parseUrl(window.location.href);c=arcgisonline.sharing.util.parseUrl(k);k=0===k.indexOf("http://")||0===k.indexOf("https://");var r=c.host?c.host.lastIndexOf(n.host):-1;n=-1<r&&r+n.host.length-
1===c.host.length-1;return k&&c.host&&n?!0:!1},isSameUrl:function(c,k,n){var r=c,f=k;n&&c&&k&&(r=c.substring(c.indexOf("://")+3),f=k.substring(k.indexOf("://")+3));return r===f},overrideDojoAriaLabel:function(c,k){c&&(D.attr(c,"aria-label",k),c.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(c,k){return{"class":"stepProgressBar stepProgressBar--"+k+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(c/k*100)+'%;"\x3e\x3c/div\x3e',
"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(c,k,n,r){n=D.create("div",{"class":"progressBarContainer"},n,r);D.create("div",D.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(c,k)),n,"first");D.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+c+"  "+esri.i18nBundle.common.steppedProgress.of+" "+k+"\x3c/span\x3e",n,"last");return n},clearProgressBars:function(){D.query(".progressBarContainer").forEach(function(c){D.destroy(c)})},
isServiceProxyGeocoder:function(c){var k=(c||"").toLowerCase();c=-1<k.indexOf("/geocodeserver")&&-1<k.indexOf("/servers/")&&-1<k.indexOf("/rest/services/");var n=arcgisonline.sharing.util.isPortal()&&-1<k.indexOf(esriGeowConfig.self.portalHostname.toLowerCase());k=!arcgisonline.sharing.util.isPortal()&&k.indexOf("utility")&&-1<k.indexOf(".arcgis.com");return c&&(n||k)},applyChrome62ButtonRepaintFix:function(c){D.has&&61<D.has("chrome")&&c&&(D.style(c,"display","none"),setTimeout(function(){D.style(c,
"display","")},1))},isValidUrl:function(c){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(c)},setFederatedServers:function(c){esriGeowConfig.federatedServers=c},shouldUseProxy:function(c){c=(((c||"").split("//")[1]||"").split("/")[0]||"").toLowerCase();return!!esriGeowConfig.self.isPortal&&c!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){var d=B("arcgisonline.sharing.dijit.dialog.GeneralDlg",[n,r,f,a],{baseClass:"esriThumbnailDlg",templateString:e,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=c.mixin({},g.common,g.generalDlg)},postCreate:function(){this.loadConnections()},show:function(h){this.clear();this.setTitle(h.title);this.setMessage(h.message);this.setContent(h.content);this.key=h.key;h.hideTitleBar&&q.set(m(".dijitDialogTitleBar")[0],
"display","none");h.error&&m("#general-dialog-content").addClass("error");h.buttonText&&(this._dialog.domNode.querySelector("#button_general-close_label").textContent=h.buttonText);this._dialog.show()},showWide:function(h){q.set(this._dialog,"width","700px");this.show(h)},destroy:function(){this.inherited(arguments);d.prototype.statics._instance&&(d.prototype.statics._instance=null)},clear:function(){this.setTitle("");m("#general-dialog-content").attr("innerHTML","");m("#general-dialog-content").removeClass("error")},
loadConnections:function(){m(".jevent").on("click",function(t){t.preventDefault()});m("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(c.hitch(this,function(t){l.set(t,"title",this.i18n.close)}));var h=this._dialog;this.own(b(h,"cancel",c.hitch(this,function(t){t&&t instanceof Event&&t.preventDefault();this.onCancel()})),b(h,"hide",c.hitch(this,function(t){t&&t instanceof Event&&t.preventDefault();this.onHide()})))},setTitle:function(h){h&&this._dialog.set("title",h)},setMessage:function(h){h&&
m("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+h+"\x3c/p\x3e")},setContent:function(h){h&&m("#general-dialog-content").attr("innerHTML",h)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(h){this._okBtn.setLabel(h)},hide:function(){this._dialog.hide()},onOkClick:function(h){this._dialog.hide()}});d.prototype.statics={getInstance:function(){this._instance||(this._instance=new d);return this._instance}};return d})},
"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(D,B,a){return function(c,k,n){var r=B.isString(c);r?n.declaredClass=c:(n=k,k=c);k=D(k,n);r&&a(c,k);return k}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,B,a){return function(c,k){var n=c.substring(c.indexOf(".")+1);D.setObject(n,k,a)}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],
function(D,B,a,c,k){return a("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var n=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);k.parse(n,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(c.hitch(this,
function(r){this._startupWidgets=r;for(var f=0;f<r.length;f++)this._processTemplateNode(r[f],function(m,q){return m[q]},function(m,q,l){return q in m?m.connect(m,q,l):m.on(q,l,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(n,r,f){return r(n,"dojoType")||r(n,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){D.forEach(this._startupWidgets,function(n){n&&!n._started&&n.startup&&n.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(D,B,a){D.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");
D.require("dijit.Dialog");D.require("dijit._Widget");D.require("dijit._Templated");D.require("dijit.form.Button");D.require("dojo.cookie");D.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",[B._Widget,B._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this.i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(c){this.clear();this.setSubscriptionState(c);this.setActionMessage(c);this.subscriptionStatusDlg.show()},showOther:function(c){this.clear();this.setOtherSubscriptionStatus(c);D.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(c){if(c&&c.state){var k=this.i18n.subscriptionStatusExpiredMsg;c=c.state.toLowerCase();"expired"===c?k=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===c?k=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===c?k=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===c&&(k=this.i18n.subscriptionStatusRestrictedMsgNoLink);D.attr(this.subscriptionStateDiv,"innerHTML",k)}},setOtherSubscriptionStatus:function(c){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var k=this.i18n.expiredStatus;
c&&("SB_0005"===c?k=this.i18n.suspendedStatus:"SB_0006"===c?k=this.i18n.cancelledStatus:"SB_0007"===c&&(k=this.i18n.expiredStatus));c=esri.substitute({subscriptionState:k},this.i18n.otherSubscriptionStatusMsg);D.attr(this.subscriptionStateDiv,"innerHTML",c)},setActionMessage:function(c){var k=this.getUser();k&&k.role&&("org_admin"===k.role||"account_admin"===k.role)?((c.type||"").toLowerCase(),c.state.toLowerCase(),c=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),D.attr(this.actionNeededDiv,"innerHTML",c)):D.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){D.query(".jevent").connect("onclick",function(c){c.preventDefault()});D.connect(this.subscriptionStatusDlg,"onCancel",D.hitch(this,function(c){this.onCancel(c)}));D.connect(this.subscriptionStatusDlg,"hide",D.hitch(this,function(c){this.onHide(c)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);D.attr(this.subscriptionStateDiv,"innerHTML","");D.attr(this.actionNeededDiv,"innerHTML","");D.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(c){B.byId("subscription-status-dialog").hide()},getUser:function(){var c=D.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(c)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(D,B,a,c,k,n,r){n.extend(D,{waiRole:"",waiState:""});return k("dijit._Templated",[B,a],{constructor:function(){r.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(f,m){var q=this.inherited(arguments),l=m(f,"waiRole");l&&f.setAttribute("role",l);(l=m(f,"waiState"))&&c.forEach(l.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),f.setAttribute("aria-"+b[0],b[1]))});
return q}})})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(D,B){D.cookie=function(a,c,k){var n=document.cookie;if(1==arguments.length)var r=(r=n.match(new RegExp("(?:^|; )"+B.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(r[1]):void 0;else{k=k||{};n=k.expires;if("number"==typeof n){var f=new Date;f.setTime(f.getTime()+864E5*n);n=k.expires=f}n&&n.toUTCString&&(k.expires=n.toUTCString());c=encodeURIComponent(c);n=a+"\x3d"+c;for(var m in k)n+="; "+m,f=k[m],!0!==f&&(n+=
"\x3d"+f);document.cookie=n}return r};D.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return D.cookie})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(D,B,a){return D("arcgisonline/sharing/dijit/dialog/ConfirmDialog",
[B,a],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){return D("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",b,{actionBarTemplate:e,
buttonOkLabel:g.common.ok,_setButtonOkLabelAttr:function(d){this.okButton.set("label",d)},buttonCancelLabel:g.common.cancel,_setButtonCancelLabelAttr:function(d){this.cancelButton.set("label",d)},busyMessage:g.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(d){r.set(this.cancelButton.domNode,"display",d?"":"none")},_setHelpLinkInfoAttr:function(d){var h=m(".dijitDialogTitle",this.domNode).shift();n.create("a",{className:"icon-ui-question margin-left-half font-size--1",
title:d.title,href:d.url||"#",target:"_blank"},h)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(d){var h=new a;d&&d.message&&(this._messageNode||(this._messageNode=n.create("p",{innerHTML:d,"class":"esriMessageNode trailer-0"},m(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",d.title||""),k.set(this._messageNode,"innerHTML",d.message||""));this.closeButtonNode&&(this.closeButtonNode.tabIndex=0);this.own(c(this,"hide",B.hitch(this,function(t){h.isResolved()||
h.resolve("onCancel");this.destroyRecursive()})),c(this.okButton,"click",B.hitch(this,function(t){t.preventDefault();q.publish("/dlg/onOk");h.isResolved()||h.resolve("onOk");this.onOk()})),c(this.cancelButton,"click",B.hitch(this,function(t){t.preventDefault();q.publish("/dlg/onCancel");h.isResolved()||h.resolve("onCancel");this.onCancel();this.hide()})),c(this.domNode,"keypress",B.hitch(this,function(t){if(t&&t.keyCode===l.ENTER)this.okButton.onClick(t)})),q.subscribe("/dlg/busyMessage",B.hitch(this,
function(t){this.set("busyMessage",t)})),q.subscribe("/esri/disable",B.hitch(this,function(t,z){this.set("busyMessage",z||this.busyMessage||g.common.pleaseWait);this.set("disabled",t)})));this.inherited(arguments);return h},_setDisabledAttr:function(d){m(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(h){h.set("disabled",d)});dojo[d?"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},"arcgisonline/pages/utils/mapViewer":function(){define(["require","exports","tslib",
"../../esriGeowConfig","./subscription"],function(D,B,a,c,k){function n(b){return-1<[l.Modern,l.Classic].indexOf(b)}function r(b,g){var e=(new Date("April 13, 2021")).getTime();return g?!1:b>=e}function f(b){var g,e;if(b.isPortal)return b.mapViewer||l.Classic;if(n(b.mapViewer))return b.mapViewer;if(b.subscriptionInfo){r(b.created,b.isPortal);if(k.isTrialSubscription(null===(g=b.subscriptionInfo)||void 0===g?void 0:g.type,b.isPortal))return l.Classic;k.isDeveloperSubscription(null===(e=b.subscriptionInfo)||
void 0===e?void 0:e.type,b.isPortal);return l.Modern}}function m(b){var g;if(b.isSignedIn){var e=null===(g=b.properties)||void 0===g?void 0:g.mapViewer;if(n(e))return e;if(!b.isViewingOrg)return l.Classic}else if(!b.isViewingOrg)return l.Modern}function q(b){var g,e,d,h,t=!!c["default"].self,z=!(!c["default"].userInfo||!c["default"].userInfo.username&&!c["default"].userInfo.email);b=m({isSignedIn:z,isViewingOrg:t&&!!c["default"].self.id,properties:b||c["default"].userProperties});var v=null===(e=
null===(g=c["default"].self)||void 0===g?void 0:g.portalProperties)||void 0===e?void 0:e.mapViewer;g=c["default"].self.id&&f({mapViewer:v,created:null===(d=c["default"].self)||void 0===d?void 0:d.created,subscriptionInfo:t&&c["default"].self.subscriptionInfo,isPortal:null===(h=c["default"].self)||void 0===h?void 0:h.isPortal});return b||g||(z?l.Classic:l.Modern)}Object.defineProperty(B,"__esModule",{value:!0});B.determineMapViewerSetting=B.determineUserMapViewer=B.determineOrgMapViewer=B.isOrgPastMapViewerCutOffDate=
B.MapViewerType=void 0;c=a.__importDefault(c);var l;(function(b){b.Modern="modern";b.Classic="classic"})(l=B.MapViewerType||(B.MapViewerType={}));B.isOrgPastMapViewerCutOffDate=r;B.determineOrgMapViewer=f;B.determineUserMapViewer=m;B.determineMapViewerSetting=q;B["default"]={MapViewerType:l,isValidMapViewerType:n,isOrgPastMapViewerCutOffDate:r,determineOrgMapViewer:f,determineUserMapViewer:m,determineMapViewerSetting:q}})},"arcgisonline/pages/utils/subscription":function(){define(["require","exports"],
function(D,B){function a(r,f){return f?!1:-1<[B.SubscriptionTypes.TrialDeveloper,B.SubscriptionTypes.DeveloperSubscription,B.SubscriptionTypes.Developer].indexOf(null===r||void 0===r?void 0:r.toLowerCase())}function c(r,f){return f?!1:-1<[B.SubscriptionTypes.Trial,B.SubscriptionTypes.TrialPress].indexOf(r.toLowerCase())}function k(r,f){return f?!1:B.SubscriptionTypes.PersonalUse.toLowerCase()===r.toLowerCase()}function n(r,f){return f?!1:B.SubscriptionTypes.StudentUse.toLowerCase()===r.toLowerCase()}
Object.defineProperty(B,"__esModule",{value:!0});B.isStudentUse=B.isPersonalUse=B.isTrialSubscription=B.isDeveloperSubscription=B.SubscriptionTypes=void 0;B.SubscriptionTypes={Developer:"developer",DeveloperSubscription:"developer subscription",PersonalUse:"Personal Use",StudentUse:"Student Use",Trial:"trial",TrialDeveloper:"trial developer",TrialPress:"trial press"};B.isDeveloperSubscription=a;B.isTrialSubscription=c;B.isPersonalUse=k;B.isStudentUse=n;B["default"]={isDeveloperSubscription:a,isPersonalUse:k,
isStudentUse:n,isTrialSubscription:c}})},"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin dojo/i18n!../../nls/arcgisonline dojo/json esri/lang".split(" "),function(D,B,a,c,k,n,r,f,m){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);return function(q){function l(b){var g=q.call(this)||this;g.declaredClass="arcgisonline.sharing.dijit.Role";
g.id=null;g.baseRole=null;g.name=null;g.description=null;g.privileges=[];g.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,updateMemberCategorySchema:!1,
manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,publishServerServices:!1,publishServerGPServices:!1,publishKnowledgeGraph:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,invitePartneredCollaborationMembers:!1,addExternalMembersToGroup:!1,
createItem:!1,reassignItems:!1,receiveItems:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,manageVersions:!1,editIndoorsSpaces:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,
scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};b=b||{};var e=b.portalUser;e?(g.id=e.roleId?e.roleId:e.role,g.baseRole=e.role,g.setPrivileges(e.privileges)):(g.id=b.id,g.baseRole=b.role,g.name=b.name,g.description=b.description,b.privileges&&g.setPrivileges(b.privileges));b.viewOnly&&g.setViewOnly();return g}a.__extends(l,q);l.prototype.setViewOnly=function(){var b=this;this.baseRole="org_user";this.id=this.SYSTEM_ROLES.VIEWER;
var g=this._buildPrivilegesArray().filter(function(e){return k["default"].includes(b.SYSTEM_ROLES.PRIVILEGES[b.id],e)});this.setPrivileges(g)};l.prototype.isViewer=function(){return m["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.VIEWER};l.prototype.isDataEditor=function(){return m["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.DATA_EDITOR};l.prototype.isFacilitator=function(){return m["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.FACILITATOR};l.prototype.isUser=
function(){return m["default"].isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};l.prototype.isPublisher=function(){return m["default"].isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)};l.prototype.isAdmin=function(){return m["default"].isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)};l.prototype.isBasedOnUser=function(){return this.isUser()||m["default"].isDefined(this.baseRole)&&("org_user"===this.baseRole||"account_user"===
this.baseRole)};l.prototype.isBasedOnPublisher=function(){return this.isPublisher()||m["default"].isDefined(this.baseRole)&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};l.prototype.isBasedOnAdmin=function(){return this.isAdmin()||m["default"].isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};l.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&m["default"].isDefined(this.id)&&0<this.id.length};
l.prototype.isBuiltIn=function(){var b=this.isUser()||this.isPublisher()||this.isAdmin(),g=this.isViewer()||this.isDataEditor()||this.isFacilitator();return b||g};l.prototype.canInviteUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.inviteUsers};l.prototype.canDisableUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.disableUsers};l.prototype.canViewUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===
b?void 0:b.portal.admin.viewUsers};l.prototype.canGetCoordinators=function(){return this.canViewUsers()||this.canViewOrgUsers()};l.prototype.canUpdateUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateUsers};l.prototype.canDeleteUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.deleteUsers};l.prototype.canChangeUserRoles=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.changeUserRoles};
l.prototype.canViewOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.viewGroups};l.prototype.canUpdateOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateGroups};l.prototype.canDeleteOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.deleteGroups};l.prototype.canReassignOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.reassignGroups};
l.prototype.canAssignUsersToOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.assignToGroups};l.prototype.canManageEnterpriseGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageEnterpriseGroups};l.prototype.canViewOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.viewItems};l.prototype.canUpdateOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===
b?void 0:b.portal.admin.updateItems};l.prototype.canDeleteOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.deleteItems};l.prototype.canReassignOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.reassignItems};l.prototype.canReassignOwnItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.reassignItems};l.prototype.canReceiveUserItems=function(){var b;return null===(b=this.privilegeObj)||
void 0===b?void 0:b.portal.user.receiveItems};l.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};l.prototype.canManageLicenses=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageLicenses};l.prototype.canShareOthersItemsToGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.shareToGroup};
l.prototype.canShareOthersItemsToOrg=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.shareToOrg};l.prototype.canShareOthersItemsToPublic=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.shareToPublic};l.prototype.canCreateUpdateCapableGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.createUpdateCapableGroup};l.prototype.canUpdateItemCategories=function(){var b;return null===(b=
this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateItemCategorySchema};l.prototype.canUpdateMemberCategories=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateMemberCategorySchema};l.prototype.canManageCollaborations=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageCollaborations};l.prototype.canManageSecurity=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageSecurity};
l.prototype.canManageWebsite=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageWebsite};l.prototype.canManageRoles=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageRoles};l.prototype.canManageServers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageServers};l.prototype.canManageUtilityServices=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageUtilityServices};
l.prototype.canManageCredits=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageCredits};l.prototype.canCreateGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.createGroup};l.prototype.canJoinOrgGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.joinGroup};l.prototype.canJoinNonOrgGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.joinNonOrgGroup};
l.prototype.canManageCollaborationGroupMembers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.invitePartneredCollaborationMembers};l.prototype.canAddExternalMembersToGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.addExternalMembersToGroup};l.prototype.canPublishFeatures=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishFeatures};l.prototype.canPublishTiles=function(){var b;
return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishTiles};l.prototype.canPublishScenes=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishScenes};l.prototype.canPublishTiledImagery=function(){var b,g;return(null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishTiledImagery)&&!(null===(g=c["default"].self)||void 0===g?0:g.isPortal)&&this._hasImageEntitlement()};l.prototype.canPublishDynamicImagery=function(){var b,
g;return(null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishDynamicImagery)&&((null===(g=c["default"].self)||void 0===g?void 0:g.isPortal)||this._hasImageEntitlement())};l.prototype.canPublishServerServices=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishServerServices};l.prototype.canPublishServerGPServices=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishServerGPServices};l.prototype.canPublishKnowledgeGraphServices=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishKnowledgeGraph};l.prototype.canPublishVectorTiles=function(){return!0};l.prototype.canPublishImageCollection=function(){var b=c["default"].self&&c["default"].self.isPortal,g=this.canPublishDynamicImagery()||this.canPublishTiledImagery();return b?this.canPublishDynamicImagery():g};l.prototype.canCreateItem=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.createItem};
l.prototype.canShareItemToGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareToGroup};l.prototype.canShareItemToOrg=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareToOrg};l.prototype.canShareItemToPublic=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareToPublic};l.prototype.canShareGroupToOrg=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareGroupToOrg};
l.prototype.canShareGroupToPublic=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareGroupToPublic};l.prototype.canViewOrgUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.viewOrgUsers};l.prototype.canViewOrgUserContent=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.viewOrgItems};l.prototype.canViewOrgUserGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:
b.portal.user.viewOrgGroups};l.prototype.canViewTracks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.viewTracks};l.prototype.canEditFeatures=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.features.user.edit};l.prototype.canEditFeaturesFullControl=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.features.user.fullEdit};l.prototype.canManageVersions=function(){var b;return null===(b=this.privilegeObj)||void 0===
b?void 0:b.features.user.manageVersions};l.prototype.canEditIndoorsSpaces=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.features.user.editIndoorsSpaces};l.prototype.canManageOpenData=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.opendata.user.openDataAdmin};l.prototype.canDesignateOpenDataGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.opendata.user.designateGroup};l.prototype.canUseGeocode=function(){var b;return null===
(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.geocode};l.prototype.canUseNetworkAnalysis=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.networkanalysis};l.prototype.canUseSpatialAnalysis=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.spatialanalysis};l.prototype.canUseGeoenrichment=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.geoenrichment};l.prototype.canUseDemographics=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.demographics};l.prototype.canUseFeatureReport=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.featurereport};l.prototype.canUseGeoanalytics=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.geoanalytics};l.prototype.canUseRasterAnalysis=function(){var b;return(null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.rasteranalysis)&&
this.canPublishImageCollection()};l.prototype.canPurchaseMarketplace=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.marketplace.admin.purchase};l.prototype.canManageMarketplace=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.marketplace.admin.manage};l.prototype.canTrialMarketplace=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.marketplace.admin.startTrial};l.prototype.canCreateNotebooks=function(){var b;return null===
(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.createNotebooks};l.prototype.canScheduleNotebooks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.scheduleNotebooks};l.prototype.canPublishNotebooks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.publishNotebooks};l.prototype.canCreateAdvancedNotebooks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.createAdvancedNotebooks};
l.prototype.canBulkPublishFromDataStores=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.bulkPublishFromDataStores};l.prototype.canEnumerateDataStores=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.enumerateDataStores};l.prototype.canRegisterDataStores=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.registerDataStores};l.prototype.setPrivileges=function(b){this.privileges=
b;this._initPrivilegesObject();m["default"].isDefined(b)&&this._readPrivileges(b)};l.prototype.stringify=function(){return f["default"].stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()})};l.prototype.stringifyRole=function(){return f["default"].stringify({id:this.id,name:this.name,description:this.description})};l.prototype.stringifyPrivileges=function(){return f["default"].stringify({privileges:this._buildPrivilegesArray()})};l.prototype.stringifyPretty=
function(){return f["default"].stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()},null,"  ")};l.prototype.summarize=function(){var b=[],g=c["default"].self&&c["default"].self.isPortal,e=c["default"].self&&c["default"].self.portalProperties&&c["default"].self.portalProperties.openData&&!0===c["default"].self.portalProperties.openData.enabled,d=this.privilegeObj;d.portal.user.viewOrgUsers&&b.push(g?r["default"].customRoles.users.canViewOrgUsersSumPortal:
r["default"].customRoles.users.canViewOrgUsersSum);d.portal.user.createGroup&&b.push(r["default"].customRoles.groups.canCreateSum);d.portal.user.joinGroup&&b.push(g?r["default"].customRoles.groups.canJoinIntSumPortal:r["default"].customRoles.groups.canJoinIntSum);d.portal.user.joinNonOrgGroup&&b.push(r["default"].customRoles.groups.canJoinExt);d.portal.user.viewOrgGroups&&b.push(g?r["default"].customRoles.groups.canViewOrgGroupsPortal:r["default"].customRoles.groups.canViewOrgGroups);!g&&d.portal.user.invitePartneredCollaborationMembers&&
b.push(r["default"].customRoles.groups.canInvitePartnered);!g&&d.portal.user.addExternalMembersToGroup&&b.push(r["default"].customRoles.groups.canAddExternal);d.portal.user.createItem&&b.push(r["default"].customRoles.items.canCreateSum);d.portal.publisher.publishFeatures&&b.push(r["default"].customRoles.items.canPublishFeatures);d.portal.publisher.publishTiles&&b.push(r["default"].customRoles.items.canPublishTiles);d.portal.publisher.publishScenes&&b.push(r["default"].customRoles.items.canPublishScenes);
d.portal.publisher.publishTiledImagery&&b.push(r["default"].customRoles.items.canPublishTiledImagery);d.portal.publisher.publishDynamicImagery&&b.push(r["default"].customRoles.items.canPublishDynamicImagery);g&&d.portal.publisher.publishServerServices&&b.push(r["default"].customRoles.items.canPublishServerServices);g&&d.portal.publisher.registerDataStores&&b.push(r["default"].customRoles.items.canRegisterDataStore);d.portal.user.viewOrgItems&&b.push(g?r["default"].customRoles.items.canViewOrgItemsPortal:
r["default"].customRoles.items.canViewOrgItems);d.portal.user.viewTracks&&b.push(r["default"].customRoles.items.canViewTracks);d.portal.user.reassignItems&&b.push(r["default"].customRoles.items.canReassignOwnItems);d.portal.user.receiveItems&&b.push(r["default"].customRoles.items.canReceiveReassignment);d.portal.user.shareToGroup&&b.push(r["default"].customRoles.itemSharing.canShareGroupsSum);d.portal.user.shareToOrg&&b.push(g?r["default"].customRoles.itemSharing.canShareOrgSumPortal:r["default"].customRoles.itemSharing.canShareOrgSum);
d.portal.user.shareToPublic&&b.push(r["default"].customRoles.itemSharing.canSharePublicSum);d.portal.user.shareGroupToOrg&&b.push(g?r["default"].customRoles.groupSharing.canShareOrgPortal:r["default"].customRoles.groupSharing.canShareOrg);d.portal.user.shareGroupToPublic&&b.push(r["default"].customRoles.groupSharing.canSharePublic);e&&d.opendata.user.openDataAdmin&&b.push(r["default"].customRoles.openData.canAdmin);d.premium.user.geocode&&b.push(r["default"].customRoles.geoservices.canUseGeocoding);
d.premium.user.networkanalysis&&b.push(r["default"].customRoles.geoservices.canUseNA);d.premium.user.spatialanalysis&&b.push(r["default"].customRoles.geoservices.canUseSA);d.premium.user.geoenrichment&&b.push(r["default"].customRoles.geoservices.canUseGeoenrichment);d.premium.user.demographics&&b.push(r["default"].customRoles.geoservices.canUseDemographics);d.premium.user.featurereport&&b.push(r["default"].customRoles.geoservices.canUseFeatureReport);g&&(d.premium.publisher.geoanalytics&&b.push(r["default"].customRoles.geoservices.canUseGeoanalytics),
d.premium.publisher.rasteranalysis&&b.push(r["default"].customRoles.geoservices.canUseRasterAnalysis));d.features.user.edit&&b.push(r["default"].customRoles.features.canEditSum);d.features.user.fullEdit&&b.push(r["default"].customRoles.features.canManageSum);d.features.user.manageVersions&&b.push(r["default"].customRoles.versioning.canManage);e&&d.opendata.user.designateGroup&&b.push(r["default"].customRoles.openData.canDesignate);d.portal.admin.viewUsers&&b.push(g?r["default"].customRoles.userAdmin.canViewSumPortal:
r["default"].customRoles.userAdmin.canViewSum);d.portal.admin.updateUsers&&b.push(g?r["default"].customRoles.userAdmin.canUpdateSumPortal:r["default"].customRoles.userAdmin.canUpdateSum);d.portal.admin.deleteUsers&&b.push(g?r["default"].customRoles.userAdmin.canDeleteSumPortal:r["default"].customRoles.userAdmin.canDeleteSum);d.portal.admin.inviteUsers&&b.push(g?r["default"].customRoles.userAdmin.canAddSum:r["default"].customRoles.userAdmin.canInviteSum);d.portal.admin.disableUsers&&b.push(g?r["default"].customRoles.userAdmin.canDisableSumPortal:
r["default"].customRoles.userAdmin.canDisableSum);d.portal.admin.changeUserRoles&&b.push(g?r["default"].customRoles.userAdmin.canChangeRolesSumPortal:r["default"].customRoles.userAdmin.canChangeRolesSum);d.portal.admin.manageLicenses&&b.push(g?r["default"].customRoles.userAdmin.canManageLicensesSumPortal:r["default"].customRoles.userAdmin.canManageLicensesSum);d.portal.admin.viewGroups&&b.push(g?r["default"].customRoles.groupAdmin.canViewSumPortal:r["default"].customRoles.groupAdmin.canViewSum);d.portal.admin.updateGroups&&
b.push(g?r["default"].customRoles.groupAdmin.canUpdateSumPortal:r["default"].customRoles.groupAdmin.canUpdateSum);d.portal.admin.deleteGroups&&b.push(g?r["default"].customRoles.groupAdmin.canDeleteSumPortal:r["default"].customRoles.groupAdmin.canDeleteSum);d.portal.admin.reassignGroups&&b.push(g?r["default"].customRoles.groupAdmin.canReassignSumPortal:r["default"].customRoles.groupAdmin.canReassignSum);d.portal.admin.assignToGroups&&b.push(g?r["default"].customRoles.groupAdmin.canAssignSumPortal:
r["default"].customRoles.groupAdmin.canAssignSum);d.portal.admin.manageEnterpriseGroups&&b.push(r["default"].customRoles.groupAdmin.canLink);d.portal.admin.createUpdateCapableGroup&&b.push(r["default"].customRoles.groupAdmin.canCreateUpdateCapable);d.portal.admin.viewItems&&b.push(g?r["default"].customRoles.itemAdmin.canViewSumPortal:r["default"].customRoles.itemAdmin.canViewSum);d.portal.admin.updateItems&&b.push(g?r["default"].customRoles.itemAdmin.canUpdateSumPortal:r["default"].customRoles.itemAdmin.canUpdateSum);
d.portal.admin.deleteItems&&b.push(g?r["default"].customRoles.itemAdmin.canDeleteSumPortal:r["default"].customRoles.itemAdmin.canDeleteSum);d.portal.admin.reassignItems&&b.push(g?r["default"].customRoles.itemAdmin.canReassignSumPortal:r["default"].customRoles.itemAdmin.canReassignSum);d.portal.admin.updateItemCategorySchema&&b.push(g?r["default"].customRoles.itemAdmin.canManageItemCategoriesSumPortal:r["default"].customRoles.itemAdmin.canManageItemCategoriesSum);d.portal.admin.updateMemberCategorySchema&&
b.push(g?r["default"].customRoles.userAdmin.canManageMemberCategoriesSumPortal:r["default"].customRoles.userAdmin.canManageMemberCategoriesSum);d.portal.admin.manageCollaborations&&b.push(g?r["default"].customRoles.settingsAdmin.canManageCollabPortalSum:r["default"].customRoles.settingsAdmin.canManageCollabSum);d.portal.admin.manageSecurity&&b.push(g?r["default"].customRoles.settingsAdmin.canManageSecurityPortalSum:r["default"].customRoles.settingsAdmin.canManageSecuritySum);d.portal.admin.manageWebsite&&
b.push(g?r["default"].customRoles.settingsAdmin.canManageWebsitePortalSum:r["default"].customRoles.settingsAdmin.canManageWebsiteSum);d.portal.admin.manageRoles&&b.push(g?r["default"].customRoles.settingsAdmin.canManageRolesPortalSum:r["default"].customRoles.settingsAdmin.canManageRolesSum);d.portal.admin.manageServers&&b.push(r["default"].customRoles.settingsAdmin.canManageServersSum);d.portal.admin.manageUtilityServices&&b.push(g?r["default"].customRoles.settingsAdmin.canManageUtilityServicesPortalSum:
r["default"].customRoles.settingsAdmin.canManageUtilityServicesSum);d.portal.admin.manageCredits&&b.push(r["default"].customRoles.settingsAdmin.canManageCreditsSum);g&&d.portal.publisher.publishServerGPServices&&b.push(r["default"].customRoles.items.canPublishServerGPServices);g&&d.portal.publisher.publishKnowledgeGraph&&b.push(r["default"].customRoles.items.canPublishKnowledgeGraph);d.portal.admin.shareToGroup&&b.push(r["default"].customRoles.itemAdmin.canShareToGroupSum);d.portal.admin.shareToOrg&&
b.push(g?r["default"].customRoles.itemAdmin.canShareToOrgSumPortal:r["default"].customRoles.itemAdmin.canShareToOrgSum);d.portal.admin.shareToPublic&&b.push(r["default"].customRoles.itemAdmin.canShareToPublicSum);g||(d.marketplace.admin.manage&&b.push(r["default"].customRoles.marketplace.canAdminSum),d.marketplace.admin.purchase&&b.push(r["default"].customRoles.marketplace.canPurchaseSum),d.marketplace.admin.startTrial&&b.push(r["default"].customRoles.marketplace.canTrialSum));d.premium.publisher.createAdvancedNotebooks&&
b.push(r["default"].customRoles.geoservices.canUseAdvancedNotebooks);d.premium.publisher.createNotebooks&&b.push(r["default"].customRoles.items.canCreateNotebooks);d.premium.publisher.publishNotebooks&&b.push(r["default"].customRoles.items.canPublishNotebooks);d.premium.publisher.scheduleNotebooks&&b.push(r["default"].customRoles.itemAdmin.canScheduleNotebooks);return b};l.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};l.prototype._readPrivileges=function(b){var g=this;m["default"].isDefined(b)&&
b instanceof Array&&b.forEach(function(e){g._readPrivilege(e)})};l.prototype._readPrivilege=function(b){this._applyEffectToAction(!0,b)};l.prototype._hasImageEntitlement=function(){var b,g,e;return!(null===(e=null===(g=null===(b=c["default"].self)||void 0===b?void 0:b.communitySelf)||void 0===g?void 0:g.userLicensedItems)||void 0===e||!e.some(function(d){var h;return null===(h=d.entitlements)||void 0===h?void 0:h.some(function(t){return"image"===t.toLowerCase()})}))};l.prototype._applyEffectToAction=
function(b,g){switch(g){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=b;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=b;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=b;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=b;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=b;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=
b;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=b;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=b;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=b;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=b;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=b;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=
b;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=b;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=b;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=b;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=b;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=b;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=
b;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=b;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=b;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=b;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=b;break;case "portal:admin:updateMemberCategorySchema":this.privilegeObj.portal.admin.updateMemberCategorySchema=b;
break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=b;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=b;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=b;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=b;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=b;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=
b;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=b;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=b;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=b;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=b;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=b;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=
b;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=b;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=b;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=b;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=b;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=
b;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=b;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=b;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=b;break;case "portal:user:invitePartneredCollaborationMembers":this.privilegeObj.portal.user.invitePartneredCollaborationMembers=b;break;case "portal:user:addExternalMembersToGroup":this.privilegeObj.portal.user.addExternalMembersToGroup=b;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=
b;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=b;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=b;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=b;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=b;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=b;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=
b;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=b;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=b;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=b;break;case "portal:user:reassignItems":this.privilegeObj.portal.user.reassignItems=b;break;case "portal:user:receiveItems":this.privilegeObj.portal.user.receiveItems=b;break;case "features:user:edit":this.privilegeObj.features.user.edit=b;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=
b;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;break;case "features:user:editIndoorsSpaces":this.privilegeObj.features.user.editIndoorsSpaces;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=b;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=b;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=b;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=
b;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=b;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=b;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=b;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=b;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=b;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=
b;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=b;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=b;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=b;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=b;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=b;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=
b;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=b}};l.prototype._applyToAll=function(b){this.privilegeObj.portal.admin.inviteUsers=b;this.privilegeObj.portal.admin.disableUsers=b;this.privilegeObj.portal.admin.viewUsers=b;this.privilegeObj.portal.admin.updateUsers=b;this.privilegeObj.portal.admin.deleteUsers=b;this.privilegeObj.portal.admin.changeUserRoles=b;this.privilegeObj.portal.admin.viewGroups=b;this.privilegeObj.portal.admin.updateGroups=
b;this.privilegeObj.portal.admin.deleteGroups=b;this.privilegeObj.portal.admin.reassignGroups=b;this.privilegeObj.portal.admin.assignToGroups=b;this.privilegeObj.portal.admin.manageEnterpriseGroups=b;this.privilegeObj.portal.admin.viewItems=b;this.privilegeObj.portal.admin.updateItems=b;this.privilegeObj.portal.admin.deleteItems=b;this.privilegeObj.portal.admin.reassignItems=b;this.privilegeObj.portal.admin.manageLicenses=b;this.privilegeObj.portal.admin.shareToGroup=b;this.privilegeObj.portal.admin.shareToOrg=
b;this.privilegeObj.portal.admin.shareToPublic=b;this.privilegeObj.portal.admin.createUpdateCapableGroup=b;this.privilegeObj.portal.admin.updateItemCategorySchema=b;this.privilegeObj.portal.admin.updateMemberCategorySchema=b;this.privilegeObj.portal.admin.manageCollaborations=b;this.privilegeObj.portal.admin.manageSecurity=b;this.privilegeObj.portal.admin.manageWebsite=b;this.privilegeObj.portal.admin.manageRoles=b;this.privilegeObj.portal.admin.manageServers=b;this.privilegeObj.portal.admin.manageUtilityServices=
b;this.privilegeObj.portal.admin.manageCredits=b;this.privilegeObj.portal.publisher.publishFeatures=b;this.privilegeObj.portal.publisher.publishTiles=b;this.privilegeObj.portal.publisher.publishScenes=b;this.privilegeObj.portal.publisher.publishServerServices=b;this.privilegeObj.portal.publisher.publishServerGPServices=b;this.privilegeObj.portal.user.createGroup=b;this.privilegeObj.portal.user.joinGroup=b;this.privilegeObj.portal.user.joinNonOrgGroup=b;this.privilegeObj.portal.user.invitePartneredCollaborationMembers=
b;this.privilegeObj.portal.user.addExternalMembersToGroup=b;this.privilegeObj.portal.user.createItem=b;this.privilegeObj.portal.user.shareToGroup=b;this.privilegeObj.portal.user.shareToOrg=b;this.privilegeObj.portal.user.shareToPublic=b;this.privilegeObj.portal.user.shareGroupToOrg=b;this.privilegeObj.portal.user.shareGroupToPublic=b;this.privilegeObj.portal.user.viewOrgUsers=b;this.privilegeObj.portal.user.viewOrgItems=b;this.privilegeObj.portal.user.viewOrgGroups=b;this.privilegeObj.portal.user.viewTracks=
b;this.privilegeObj.features.user.edit=b;this.privilegeObj.opendata.user.openDataAdmin=b;this.privilegeObj.opendata.user.designateGroup=b;this.privilegeObj.premium.user.geocode=b;this.privilegeObj.premium.user.networkanalysis=b;this.privilegeObj.premium.user.spatialanalysis=b;this.privilegeObj.premium.user.geoenrichment=b;this.privilegeObj.premium.user.demographics=b;this.privilegeObj.premium.user.featurereport=b;this.privilegeObj.premium.publisher.geoanalytics=b;this.privilegeObj.premium.publisher.rasteranalysis=
b;this.privilegeObj.marketplace.admin.purchase=b;this.privilegeObj.marketplace.admin.manage=b;this.privilegeObj.marketplace.admin.startTrial=b;this.privilegeObj.premium.publisher.createNotebooks=b;this.privilegeObj.premium.publisher.scheduleNotebooks=b;this.privilegeObj.premium.publisher.publishNotebooks=b;this.privilegeObj.premium.publisher.createAdvancedNotebooks=b};l.prototype._buildPrivilegesArray=function(){var b=[];!0===this.privilegeObj.portal.admin.inviteUsers&&b.push("portal:admin:inviteUsers");
!0===this.privilegeObj.portal.admin.disableUsers&&b.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&b.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&b.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&b.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&b.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&b.push("portal:admin:viewGroups");
!0===this.privilegeObj.portal.admin.updateGroups&&b.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&b.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&b.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&b.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&b.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&
b.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&b.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&b.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&b.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&b.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToGroup&&b.push("portal:admin:shareToGroup");!0===this.privilegeObj.portal.admin.shareToOrg&&
b.push("portal:admin:shareToOrg");!0===this.privilegeObj.portal.admin.shareToPublic&&b.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&b.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&b.push("portal:admin:updateItemCategorySchema");!0===this.privilegeObj.portal.admin.updateMemberCategorySchema&&b.push("portal:admin:updateMemberCategorySchema");!0===this.privilegeObj.portal.admin.manageCollaborations&&
b.push("portal:admin:manageCollaborations");!0===this.privilegeObj.portal.admin.manageSecurity&&b.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&b.push("portal:admin:manageWebsite");!0===this.privilegeObj.portal.admin.manageRoles&&b.push("portal:admin:manageRoles");!0===this.privilegeObj.portal.admin.manageServers&&b.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&b.push("portal:admin:manageUtilityServices");!0===
this.privilegeObj.portal.admin.manageCredits&&b.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.publisher.publishFeatures&&b.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&b.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&b.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&b.push("portal:publisher:publishTiledImagery");!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&
b.push("portal:publisher:publishDynamicImagery");!0===this.privilegeObj.portal.publisher.publishServerServices&&b.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&b.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&b.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&b.push("portal:publisher:enumerateDataStores");
!0===this.privilegeObj.portal.publisher.registerDataStores&&b.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.user.createGroup&&b.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&b.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&b.push("portal:user:joinNonOrgGroup");!0===this.privilegeObj.portal.user.invitePartneredCollaborationMembers&&b.push("portal:user:invitePartneredCollaborationMembers");!0===this.privilegeObj.portal.user.addExternalMembersToGroup&&
b.push("portal:user:addExternalMembersToGroup");!0===this.privilegeObj.portal.user.createItem&&b.push("portal:user:createItem");!0===this.privilegeObj.portal.user.shareToGroup&&b.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&b.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&b.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&b.push("portal:user:shareGroupToOrg");!0===this.privilegeObj.portal.user.shareGroupToPublic&&
b.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.portal.user.viewOrgUsers&&b.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&b.push("portal:user:viewOrgItems");!0===this.privilegeObj.portal.user.viewOrgGroups&&b.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&b.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&b.push("features:user:edit");!0===this.privilegeObj.features.user.fullEdit&&b.push("features:user:fullEdit");
!0===this.privilegeObj.features.user.manageVersions&&b.push("features:user:manageVersions");!0===this.privilegeObj.features.user.editIndoorsSpaces&&b.push("features:user:editIndoorsSpaces");!0===this.privilegeObj.opendata.user.openDataAdmin&&b.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&b.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&b.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&
b.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&b.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&b.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&b.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&b.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&b.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&
b.push("premium:publisher:rasteranalysis");!0===this.privilegeObj.marketplace.admin.purchase&&b.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&b.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&b.push("marketplace:admin:startTrial");!0===this.privilegeObj.premium.publisher.createNotebooks&&b.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&b.push("premium:publisher:scheduleNotebooks");
!0===this.privilegeObj.premium.publisher.publishNotebooks&&b.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&b.push("premium:publisher:createAdvancedNotebooks");return b};return l}(n["default"])})},"arcgisonline/pages/utils/arrays":function(){define(["require","exports"],function(D,B){return function(){function a(){}a.includes=function(c,k){return-1<(null===c||void 0===c?void 0:c.indexOf(k))};a.find=function(c,k){if(null===c||void 0===c?
0:c.length)for(var n=void 0,r=0;r<c.length;r++)if(n=c[r],k(n,r))return n};a.findIndex=function(c,k){if(null===c||void 0===c?0:c.length)for(var n=0;n<c.length;n++)if(k(c[n],n))return n;return-1};a.toArray=function(c){return Object.keys(c).map(function(k){return c[k]})};a.includesSome=function(c,k){return c&&(null===k||void 0===k?void 0:k.some(function(n){return-1<c.indexOf(n)}))};a.includesAll=function(c,k){return c&&(null===k||void 0===k?void 0:k.every(function(n){return-1<c.indexOf(n)}))};a.filterOut=
function(c,k){var n;return null!==(n=k&&(null===c||void 0===c?void 0:c.filter(function(r){return-1===k.indexOf(r)})))&&void 0!==n?n:[]};a.concatUnique=function(c,k){var n=[].concat(null!==c&&void 0!==c?c:[]);k&&k.forEach(function(r){r&&-1===n.indexOf(r)&&n.push(r)});return n};a.from=function(c){if(Array.from)return Array.from(c);for(var k=[],n=0;n<c.length;n++)k.push(c[n]);return k};a.batch=function(c,k){void 0===k&&(k=100);return(null!==c&&void 0!==c?c:[]).reduce(function(n,r,f){0===f%k&&n.push(c.slice(f,
f+k));return n},[])};return a}()})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require","exports","tslib"],function(D,B,a){Object.defineProperty(B,"__esModule",{value:!0});B.LevelAwareInfo=void 0;D="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");var c=a.__spreadArray(["features:user:edit"],D);B.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",
DATA_EDITOR:"iBBBBBBBBBBBBBBB",FACILITATOR:"iCCCCCCCCCCCCCCC",PRIVILEGES:{iAAAAAAAAAAAAAAA:D,iBBBBBBBBBBBBBBB:c,iCCCCCCCCCCCCCCC:a.__spreadArray("portal:admin:createUpdateCapableGroup portal:user:invitePartneredCollaborationMembers portal:user:addExternalMembersToGroup portal:publisher:publishFeatures portal:publisher:publishTiles portal:publisher:publishServerServices portal:user:createGroup portal:user:createItem portal:user:joinNonOrgGroup portal:user:shareGroupToOrg portal:user:shareGroupToPublic portal:user:shareToGroup portal:user:shareToOrg portal:user:shareToPublic portal:user:viewOrgUsers portal:user:viewOrgItems portal:user:viewOrgGroups premium:user:geoenrichment premium:user:spatialanalysis premium:publisher:geoanalytics premium:publisher:rasteranalysis portal:publisher:bulkPublishFromDataStores portal:publisher:enumerateDataStores portal:publisher:registerDataStores".split(" "),
c)}},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};a=function(){return function(){this.SYSTEM_ROLES=B.LevelAwareInfo.SYSTEM_ROLES;this.LICENSE_LEVELS=B.LevelAwareInfo.LICENSE_LEVELS}}();B["default"]=a})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/_base/kernel moment/moment ../../esriGeowConfig ../../pages/utils/queryHandler ./formatters ./arrays ./subscription ../../sharing/geow/Roles ../../sharing/util".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importStar(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);var z=D.toUrl("arcgisonline/sharing/dijit")+"/css/images/app-icons/";return function(){function v(){}v.isMobile=function(){return 720>=window.innerWidth};
v.getCompatibleUserTypes=function(y,C,F){var x=[];C.forEach(function(u){var w=!1,A=!1;y.isPro&&u.apps.forEach(function(I){I.isAppBundle||I.entitlements.forEach(function(J){if(-1!==v._proKeys.indexOf(J)){-1!==v._proKeys.indexOf(y.key)&&(A=!0);var L=null===F||void 0===F?void 0:F.filter(function(M){return M.key===J})[0];L&&v.isProExtension(y.key)&&-1!==L.extNotSupported.indexOf(y.key)&&(w=!0)}})});var E=!1,G=!1,H=!1,K=(y.isEsriApp||y.isAppBundle)&&u.preventSignInFromNonUTEsriApps;u.apps.forEach(function(I){y.isAppBundle&&
I.isAppBundle&&I.id===y.itemId&&(E=!0);y.isAppBundle||I.isAppBundle||I.id!==y.itemId||-1===I.entitlements.indexOf(y.key)?!y.isAppBundle&&I.isAppBundle&&I.apps.some(function(L){return-1!==L.entitlements.indexOf(y.key)})&&(G=!0):G=!0;var J=y.requiredListings;0<(null===J||void 0===J?void 0:J.length)?I.isAppBundle?I.apps.some(function(L){return-1<J.indexOf(L.id)})&&(H=!0):-1<J.indexOf(I.id)&&(H=!0):H=!0});-1===y.allowedLevels.indexOf(u.level)&&0!==y.allowedLevels.length||w||A||E||G||!(0<u.maxUsers)||
!H||u.supportsSignInOnlyFromUTApps||K||x.push(u)});return x};v.isBusinessAnalyst=function(y){return"ArcGIS Business Analyst Web and Mobile Apps"===y||-1<this.baKeys.indexOf(y)};v.isDrone2Map=function(y){return"ArcGIS Drone2Map"===y||-1<this.droneKeys.indexOf(y)};v.userTypePassesRequired=function(y,C){var F=C.requiredListings;if(!F||0===F.length)return!0;var x=!1;return y.apps.some(function(u){u.isAppBundle?u.apps.some(function(w){return-1<F.indexOf(w.id)})&&(x=!0):-1<F.indexOf(u.id)&&(x=!0);return x})};
v.checkPasswordStrength=function(y){return t["default"].request({url:t["default"].getSecureUrl(l["default"].restBaseUrl+"portals/checkPasswordStrength"),content:{password:y}},{usePost:!0})};v.getSubscriptionInfo=function(){return t["default"].request({url:t["default"].getSecureUrl(l["default"].restBaseUrl+"portals/self/subscriptionInfo")})};v.filterRoles=function(y,C,F,x,u){var w=[],A=a.__spreadArray(a.__spreadArray([],h["default"].extraLevelOnePrivileges),C.privileges);"11"===x&&A.push("features:user:edit");
y.forEach(function(E){if(F||!F&&C&&E.privileges&&!h["default"].exceedsRolePrivileges(A,E.privileges))u?w.push(E):w.push({name:E.name,role:E.id,description:E.description})});return w};v.alreadyIncludedInUserType=function(y,C){var F,x=0<y.apps.filter(function(u){return C.itemId===u.id}).length;y.apps.forEach(function(u){u.isAppBundle&&u.apps.forEach(function(w){w.id===C.itemId&&(x=!0)})});(null!==(F=y.extensions)&&void 0!==F?F:[]).some(function(u){(u=u.id===C.itemId)&&(x=!0);return u});return x};v.convertAppBundletoEntitlement=
function(y){return y.map(function(C){return{key:C.appBundleItemId,itemId:C.appBundleItemId,title:C.name,used:C.assigned,total:C.maxUsers,isAppBundle:!0,apps:C.apps,allowedLevels:C.allowedLevels,usernames:C.usernames}})};v.transformAppBundleApps=function(y,C){var F=[];y.forEach(function(x){var u,w,A;1>=(null===(u=x.entitlements)||void 0===u?void 0:u.length)?(u=((null===(w=v._appSwitcherResponse)||void 0===w?void 0:w.apps)||[]).filter(function(E){return E.entitlement===x.entitlements[0]})[0],w="Classic Story Maps"===
x.title&&C,null!==u&&void 0!==u&&u.hidden||w||(u&&(x.title=u.shortLabel||u.title||x.title||""),F.push(x))):null===(A=x.entitlements)||void 0===A?void 0:A.forEach(function(E){var G,H=((null===(G=v._appSwitcherResponse)||void 0===G?void 0:G.apps)||[]).filter(function(K){return E&&K.entitlement===E})[0];(null===H||void 0===H?0:H.title)&&!H.hidden&&(G=a.__assign(a.__assign({},x),{title:H.shortLabel||H.title}),F.push(G))})});return F};v.initLicensesConfig=function(y){var C=new c["default"];y||C.resolve();
v.queryAppSwitcherItem(y).then(function(F){var x;0<(null===(x=F.items)||void 0===x?void 0:x.length)?(F=F.items[0],v.licensesConfigItem=F,v.getAppSwitcherConfig(F,y).then(function(){C.resolve()})):C.resolve()});return C};v.clearLicensesConfigCache=function(){v._appSwitcherSearchResponse=void 0;v._appSwitcherSearchDfd=void 0;v._appSwitcherResponse=void 0;v._appSwitcherConfigDfd=void 0};v.queryAppSwitcherItem=function(y){var C=new c["default"];v._appSwitcherSearchResponse?C.resolve(v._appSwitcherSearchResponse):
v._appSwitcherSearchDfd?v._appSwitcherSearchDfd.then(function(F){C.resolve(F)}):(v._appSwitcherSearchDfd=C,y.queryItems(l["default"].licensesItemQuery,!0).then(function(F){v._appSwitcherSearchResponse=F;C.resolve(F)},function(F){v._appSwitcherSearchResponse={};C.resolve({})}));return C};v.getAppSwitcherConfig=function(y,C){var F=new c["default"];v._appSwitcherResponse?F.resolve(v._appSwitcherResponse):v._appSwitcherConfigDfd?v._appSwitcherConfigDfd.then(function(x){F.resolve(x)}):(v._appSwitcherConfigDfd=
F,t["default"].request({url:y.itemDataUrl}).then(function(x){v._appSwitcherResponse=x;v.licensesConfig=x;x.appSwitcher&&(v._apps=x.appSwitcher.apps);F.resolve(x)},function(){v._appSwitcherResponse={};F.resolve({})}));return F};v.isEntitlement=function(y){return void 0!==y.key||void 0!==y.itemId};v.getAppIconDir=function(){return z};v.getAppIcon=function(y,C){function F(J){E.imagePath="svg-app-icon.svg";E.abbr=J.title.substring(0,1);E.showAbbr=!0;E.abbrClass="";E.ordinal=1;E.shapeClass=""}function x(J){var L=
K.filter(function(M){var N,O;return M.entitlement&&1===(null===(N=J.entitlements)||void 0===N?void 0:N.length)&&M.entitlement===(null===(O=J.entitlements)||void 0===O?void 0:O[0])||M.title&&M.title===J.title||M.shortLabel&&M.shortLabel===J.title})[0];-1!==J.title.indexOf("ArcGIS Pro")?(E.imagePath="arcgis-pro.png",E.ordinal=0):(null===L||void 0===L?0:L.image)?(E.imagePath=""+H+L.image,E.ordinal=0,G=!0):L&&!L.image?F(J):(E.imagePath="fieldmapsmobile"===J.id?z+"fieldmaps.png":I?""+H+J.title.replace(/\s/g,
"_")+"/icon.png":z+"generic-app.png",E.shapeClass="not-hex",G=!0)}function u(J){var L,M,N,O=K.filter(function(Y){return Y.entitlement&&Y.entitlement===J.key||Y.title&&Y.title===J.title||Y.label&&Y.label===J.title||Y.shortLabel&&Y.shortLabel===J.title})[0];J.isPro||-1!==J.title.indexOf("ArcGIS Pro")?(E.imagePath="arcgis-pro.png",E.ordinal=0):(null===O||void 0===O?0:O.image)?(E.imagePath=""+H+O.image,E.ordinal=0,G=!0):O&&!O.image?F(J):(O=(null===(L=l["default"].userInfo.credential)||void 0===L?void 0:
L.token)||l["default"].userInfo.token,E.shapeClass="not-hex",J.icon?(E.imagePath=l["default"].restBaseUrl+"portals/self/resources/"+J.icon+"?token\x3d"+O,G=!0,E.ordinal=2):(null===(N=null===(M=J.properties)||void 0===M?void 0:M.appSwitcher)||void 0===N?0:N.image)?(E.imagePath="https://"+l["default"].self.portalHostname+"/sharing/rest/content/items/"+J.itemId+"/resources/"+J.properties.appSwitcher.image+"?token\x3d"+O,G=!0,E.ordinal=2):"esri"===J.owner||"esri_apps"===J.owner||J.isAppBundle?(E.imagePath=
I?""+H+J.title.replace(/\s/g,"_")+"/icon.png":z+"generic-app.png",G=!0):(E.imagePath=C,E.showAbbr=!0,E.abbrClass="",E.ordinal=3))}var w,A,E={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},G=!1,H=l["default"].restBaseUrl+"content/items/"+(null===(w=v.licensesConfigItem)||void 0===w?void 0:w.id)+"/resources/",K=(null===(A=v._appSwitcherResponse)||void 0===A?void 0:A.apps)||[];if("User License Type Extension"===y.type){w=K.filter(function(J){return J.entitlement&&J.entitlement===y.key||J.title&&
J.title===y.title})[0];A=t["default"].isPortal()?z+"user-type-extension.png":z+"user-type-extension-online.png";if(null===w||void 0===w?0:w.image)A=""+H+w.image;return a.__assign(a.__assign({},E),{imagePath:A,ordinal:0})}if("Application SDK"===y.type)return a.__assign(a.__assign({},E),{imagePath:z+"runtime.png",ordinal:0});if(y.isExtension)return a.__assign(a.__assign({},E),{imagePath:z+"pro-extension.png",ordinal:0});w=v._getAppSwitcherIcon(y,C);var I=v.licensesConfigItem;C&&0!==C.length||(C="svg-app-circle.svg");
w?E=w:(w=a.__assign({},y),-1<w.title.indexOf("ArcGIS Drone2Map")&&(w.title="ArcGIS Drone2Map"),v.isEntitlement(w)?u(w):x(w));G||(E.imagePath=z+E.imagePath);E.isAppBundle=y.isAppBundle;return E};v.getEmptyAppIcon=function(){return z+"svg-app-icon.svg"};v._getAppSwitcherIcon=function(y,C){if(v._apps){C="svg-app-icon.svg";var F=v._apps.filter(function(u){var w=u.title&&u.title===y.title;v.isEntitlement(y)&&!w&&(w=u.itemId&&u.itemId===y.itemId);return w})[0];if(F){var x={};F.image?(x.imagePath=F.image,
x.ordinal=0,x.abbrClass="hide",x.showAbbr=!1,x.abbr=""):(x.imagePath=C,x.abbr=F.abbr,x.showAbbr=!0,x.abbrClass="",x.ordinal=1);x.shapeClass="";return x}}};v.getUserTypesContainingPro=function(y){return y.filter(function(C){return C.apps?C.apps.some(function(F){return"ArcGIS Pro"===F.title}):!1})};v.userTypeIncludesPro=function(y){var C;return null===(C=null===y||void 0===y?void 0:y.apps)||void 0===C?void 0:C.some(function(F){return"ArcGIS Pro"===F.title})};v.getProFromUserTypes=function(y){var C;
y.forEach(function(F){F.apps&&(C=e["default"].find(F.apps,function(x){if("ArcGIS Pro"===x.title)return x}))});return C};v.getProFromAppBundles=function(y){var C;y.forEach(function(F){C=e["default"].find(F.apps,function(x){if("ArcGIS Pro"===x.title)return x})});return C};v.getProExtensions=function(y){return y.filter(function(C){return-1!==v._proExtensionKeys.indexOf(C.key)})};v.isProExtension=function(y){return-1!==v._proExtensionKeys.indexOf(y)};v.isProKey=function(y){return-1!==v._proKeys.indexOf(y)};
v.getProKeys=function(){return v._proKeys};v.filterOutProExtensions=function(y){return y.filter(function(C){return-1===v._proExtensionKeys.indexOf(C.key)})};v.getProEntitlements=function(y){y=y.filter(function(C){return C.isPro&&-1<v._proKeys.indexOf(C.key)});y.forEach(function(C){"desktopBasicN"===C.key?C.ordinal=0:"desktopStdN"===C.key?C.ordinal=1:"desktopAdvN"===C.key&&(C.ordinal=2)});y.sort(function(C,F){return C.ordinal>F.ordinal?1:C.ordinal<F.ordinal?-1:0});return y};v.getUserRole=function(y){var C;
return null!==(C=null===y||void 0===y?void 0:y.userRole)&&void 0!==C?C:{}};v.shouldShowMFA=function(y,C){var F=v.getUserRole(C).isAdmin(),x=!1;!y.isPortal&&y.subscriptionInfo?(x=d["default"].isDeveloperSubscription(y.subscriptionInfo.type,y.isPortal),x=F&&l["default"].multiFactorEnabled&&y.mfaEnabled&&!x):x=y.isPortal&&y.supportsEmail&&F&&y.mfaEnabled;return x};v.canViewLastLogin=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()};v.canLoadLicensesUI=function(y){y=v.getUserRole(y);
return y.isAdmin()||y.canViewOrgUsers()&&y.canManageLicenses()};v.canLoadMembersCard=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()};v.canManageMembers=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewUsers()&&(y.canUpdateUsers()||y.canDeleteUsers()||y.canChangeUserRoles()||y.canManageLicenses())};v.canGetUserTypes=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canInviteUsers()||y.canManageRoles()||y.canManageLicenses()};v.canGetUsersGroups=function(y){y=v.getUserRole(y);
return y.isAdmin()||y.canViewUsers()&&y.canViewOrgGroups()};v.canGetLicenseTypes=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canManageLicenses()||y.canInviteUsers()};v.canSelectMembers=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canViewOrgUsers()&&(y.canUpdateUsers()||y.canDisableUsers()||y.canManageLicenses()||y.canAssignUsersToOrgGroups()||y.canReassignOrgItems())};v.canUseMemberActions=function(y){y=v.getUserRole(y);return y.isAdmin()||y.canUpdateUsers()||y.canDeleteUsers()||
y.canDisableUsers()||y.canChangeUserRoles()};v.checkUserCultureSetting=function(y,C){var F=new c["default"],x=b.queryToObject(window.location.search.substring(1)),u=function(w){var A=-1<["hi"].indexOf(w);!w||m["default"].locale===w.toLowerCase()||A||x.locale?F.resolve():(A=l["default"].userInfo.culture,l["default"].userInfo.username===y.username&&(A&&(null===A||void 0===A?void 0:A.toLowerCase())===w.toLowerCase()||(l["default"].userInfo.culture=w.toLowerCase(),k["default"]("arcgisLocale",l["default"].userInfo.culture,
{sameSite:"Strict"})),F.resolve(),window.location.reload()))};C?t["default"].request({url:l["default"].restBaseUrl+"community/users/"+y.username}).then(function(w){return u(w.culture)},function(){return F.resolve()}):u(y.culture);return F};v.hasRequestedLegacyHomePageExtension=function(y){var C;return!y.isPortal&&!0===(null===(C=y.portalProperties)||void 0===C?void 0:C.extendLegacyHomePage)};v.hasModernHomePageEnabled=function(y){var C,F,x;return y.isPortal?"modern"===(null===(F=y.portalProperties)||
void 0===F?void 0:F.homePage)||"modernOnly"===(null===(x=y.portalProperties)||void 0===x?void 0:x.homePage):"modern"===(null===(C=y.portalProperties)||void 0===C?void 0:C.homePage)||v.isOrgPastLegacyHomePageCutOffDate(y)};v.hasLegacyHomePageEnabled=function(y){var C;return"legacy"===(null===(C=y.portalProperties)||void 0===C?void 0:C.homePage)};v.hasTransitionalHomePageEnabled=function(y){var C;return"transitional"===(null===(C=y.portalProperties)||void 0===C?void 0:C.homePage)};v.isOrgPastLegacyHomePageCutOffDate=
function(y){var C=(new Date("June 30, 2020")).getTime();return y.isPortal?!1:y.created>=C};v.isEnterpriseSetToModernHomePageOnly=function(y){var C;return y.isPortal&&"modernOnly"===(null===(C=y.portalProperties)||void 0===C?void 0:C.homePage)};v.hasLegacyHomePageDefaults=function(y){var C,F=null===(C=y.rotatorPanels)||void 0===C?void 0:C[0];C=!y.homePageFeaturedContent;var x=!y.description;y=!y.backgroundImage;F=!F||"banner-2"===(null===F||void 0===F?void 0:F.id)&&-1<F.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&
-1<F.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&-1<(null===F||void 0===F?void 0:F.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return x&&y&&F&&C};v.neverLoggedInLabel=function(y,C){return r["default"].substitute(f["default"].myOrganization.notYetTooltip,
{date:C})};v.lastLoginDate=function(y){var C=q["default"](new Date).diff(q["default"](y),"days"),F=q["default"](new Date).isSame(y,"day");return F?f["default"].filters.today:!F&&2>C?f["default"].myOrganization.membersTab.yesterday:0===y||-1===y||1E3===y?f["default"].myOrganization.notYet:g["default"].fullDate(y)};v.disabledStyle=function(y){return y?"org-member-disabled":""};v.disabledStyleAllowEvents=function(y){return y?"org-member-disabled__allow-events":""};v.disabledLinkClass=function(y){return y?
"org-member-disable-link":""};v.shouldShowOnboard=function(y,C){var F=t["default"].getCookie("esri_onboard",!0)||{},x=t["default"].isPortal(),u=!!l["default"].isDebug;u=x||u?document.domain:".arcgis.com";C||(C=new Date("June 30, 2019"));var w=!F[y]&&new Date<C;!x&&F[y]&&new Date>=C&&(delete F[y],k["default"]("esri_onboard",n["default"].stringify(F),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:u,sameSite:"Strict"}));return w};v.createOnboardCookie=function(y){var C,F=t["default"].getCookie("esri_onboard")||
{},x=t["default"].isPortal(),u=!!l["default"].isDebug;x=x||u?document.domain:".arcgis.com";k["default"]("esri_onboard",n["default"].stringify(a.__assign(a.__assign({},F),(C={},C[y]=!0,C))),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:x,sameSite:"Strict"})};v.createCookie=function(y,C,F,x){var u=t["default"].isPortal(),w=!!l["default"].isDebug;x=x||!l["default"].self.urlKey?".arcgis.com":l["default"].self.urlKey+"."+l["default"].self.customBaseUrl;u=u||w?document.domain:x;F*=
864E5;k["default"](y,n["default"].stringify(a.__assign({},C)),{expires:new Date((new Date).getTime()+F),path:"/",domain:u})};v.isSearchTermValid=function(y,C){var F=/^[^%()';]+$/,x=/^[a-zA-Z0-9@._]+$/;return("username"===C?x:F).test(y)||0===y.length};v.generateSearchErrorMessage=function(y,C){return{firstname:f["default"].myOrganization.restrictedFirstNameCharacters,lastname:f["default"].myOrganization.restrictedLastNameCharacters,username:f["default"].createAccount.errors.restrictedCharacters,fullname:f["default"].myOrganization.restrictedFullNameCharacters}[C]||
f["default"].controlBar.invalidSyntax};v.addBuiltInRolesAndTranslate=function(y,C){var F=[{id:"org_publisher",name:f["default"].myOrganization.formatters.rolePublisher},{id:"org_admin",name:f["default"].myOrganization.formatters.roleAdmin},{id:"org_user",name:f["default"].myOrganization.formatters.roleUser}];F=a.__spreadArray(a.__spreadArray([],y),F);F.forEach(function(x){var u=C.filter(function(w){return w.id===x.id})[0];u&&(x.name=u.name)});return F};v.highlight=function(y,C){if(C){var F=C.textContent.replace(new RegExp("("+
y+")","ig"),'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e');C.innerHTML=F}};v.categorizeEntitlements=function(y){var C=v.getProExtensions(y);y=v.filterOutProExtensions(y);var F=v.getProEntitlements(y),x=[],u=[],w=[],A=[];y.forEach(function(E){"User License Type Extension"===E.type?w.push(E):"Application SDK"===E.type?A.push(E):E.type&&(-1<E.type.indexOf("Application")||-1<E.type.indexOf("Web AppBuilder Widget"))?x.push(E):E.type&&-1===E.type.indexOf("Applcation")&&-1===E.type.indexOf("Web AppBuilder Widget")&&
u.push(E)});return{pro:F,proExtensions:C,apps:x,data:u,userTypeExtensions:w,runtime:A}};v.pickRandomHomePageStockImage=function(){return""+Math.floor(2*Math.random()+1)};v.getTitleColorBasedOnStockImage=function(y){return e["default"].includes(["4","5","6"],y)?"white-ramp":"dark-ramp"};v.isAdminRole=function(y){var C=!1;y.privileges?C=y.privileges.some(function(F){return-1<F.indexOf(":admin")}):"org_admin"===y.id&&(C=!0);return C};v.filterIncludedEntitlements=function(y){var C;return y.entitlements&&
null!==(C=y.licenseType)&&void 0!==C&&C.apps?y.entitlements.filter(function(F){var x,u=!1;u=null===(x=y.licenseType)||void 0===x?void 0:x.apps.some(function(w){return w.isAppBundle?w.apps.some(function(A){return-1<A.entitlements.indexOf(F)}):-1<w.entitlements.indexOf(F)});return!u}):y.entitlements};v.isIncludedThroughUserType=function(y,C){var F;return null===(F=y.licenseType)||void 0===F?void 0:F.apps.some(function(x){return x.isAppBundle?x.apps.some(function(u){return-1<u.entitlements.indexOf(C)}):
-1<x.entitlements.indexOf(C)})};v.getAppTitle=function(y){var C,F=((null===(C=v._appSwitcherResponse)||void 0===C?void 0:C.apps)||[]).filter(function(x){return x.entitlement===y.entitlements[0]})[0];return 1===y.entitlements.length?(null===F||void 0===F?void 0:F.title)||y.title||"":y.title||""};v.getClearEmptyFieldsStateForHelperService=function(y){return""===y?!0:void 0};v.adjustSanitizerForOrgSettingsUse=function(y){Object.keys(y._xssFilter.cssFilter.options.whiteList).forEach(function(C){y._xssFilter.cssFilter.options.whiteList[C]=
!0});y._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;y._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;y._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=!0};v.sanitizeUrlOrgOverride=function(y){return y};v.canShowDistributedCollaborations=function(y,C,F){if(y)return!0;var x=d["default"].isPersonalUse(F,y);y=d["default"].isDeveloperSubscription(F,y)||d["default"].isTrialSubscription(F,y);C=C>=(new Date("June 29, 2021")).getTime();return!(x||y&&C)};v.checkForAutoMigratedOrgHomePage=
function(y){var C,F=new c["default"],x=null===y||void 0===y?void 0:y.portalUser,u=null===x||void 0===x?void 0:x.userRole;x=!(null===x||void 0===x||!x.orgId);u=!!((null===u||void 0===u?0:u.isAdmin())||(null===u||void 0===u?0:u.canManageWebsite()));u=x&&u;x=v.hasModernHomePageEnabled(y);var w=v.hasLegacyHomePageEnabled(y),A=v.hasTransitionalHomePageEnabled(y),E=v.hasLegacyHomePageDefaults(y),G=v.hasRequestedLegacyHomePageExtension(y);x=!x&&!A&&(y.isPortal&&!w||!y.isPortal&&!G)&&!E;w=!y.isPortal&&!(null===
(C=y.portalProperties)||void 0===C?0:C.homePage)&&v.isOrgPastLegacyHomePageCutOffDate(y)&&!x;u&&(x||w)?v.markOrgHomePageAsMigrated(y,x).then(function(){F.resolve()},function(){F.resolve()}):F.resolve();return F};v.isTransitionalHomePage=function(y){var C,F=(null===y||void 0===y?void 0:y.portalUser)||(null===y||void 0===y?void 0:y.user),x=!(null===F||void 0===F||!F.orgId);F=!F&&0<(null===(C=y.id)||void 0===C?void 0:C.length);var u=v.hasModernHomePageEnabled(y),w=v.hasLegacyHomePageEnabled(y);C=v.hasTransitionalHomePageEnabled(y);
var A=v.hasLegacyHomePageDefaults(y),E=v.hasRequestedLegacyHomePageExtension(y),G=(new Date("June 30, 2020")).getTime();G=y.created<G;y=!u&&(y.isPortal&&!w||!y.isPortal&&!E)&&!A&&G;return(x||F)&&(C||y)};v.markOrgHomePageAsMigrated=function(y,C){var F=new c["default"],x=t["default"].getSecureUrl(l["default"].restBaseUrl)+"portals/self/update",u=JSON.stringify(a.__assign(a.__assign({},y.portalProperties),{homePage:C?"transitional":"modern"}));t["default"].request({url:x,content:{portalProperties:u}},
{usePost:!0}).then(function(w){null!==w&&void 0!==w&&w.code||(l["default"].self.portalProperties=y.portalProperties=u);F.resolve()},function(w){F.resolve()});return F};v.calculateHomePageLoadingProperties=function(y){var C,F,x,u=b.queryToObject(window.location.search.slice(1)),w=y.isPortal||0<(null===(F=null===(C=y.user)||void 0===C?void 0:C.orgId)||void 0===F?void 0:F.length)||0<(null===(x=y.id)||void 0===x?void 0:x.length);C=v.hasModernHomePageEnabled(y);F=v.hasLegacyHomePageDefaults(y);y=v.isTransitionalHomePage(y);
u=w&&(!C||C&&!F)&&"true"===u.legacy;return{showModern:!w||w&&(C||F||y)&&!u,previewLegacy:u}};v.getBuyLink=function(y){if(!y.isPortal){if(y.subscriptionInfo){var C=y.subscriptionInfo.type;if("Personal Use"===C||"Student Use"===C)return(y=y.ipCntryCode?l["default"].purchaseUrls[y.ipCntryCode.toLowerCase()]:void 0)?y:l["default"].purchaseUrls.renew}if(y.ipCntryCode)return y=y.ipCntryCode.toLowerCase(),l["default"].purchaseUrls[y]}};v.baKeys=["BusinessAnlyst","baStdN","businessanlyst"];v.droneKeys=["drone2MapStdN",
"drone2MapAdvN"];v._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];v._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN indoorsN".split(" ");v.orgSettingsSanitizerParams=
{whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv","charset"],p:["id","class"],
span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],section:["id","class","style"],
summary:["id","class","style"],time:["id","class","style"]}};return v}()})},"moment/moment":function(){(function(D,B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define(B):D.moment=B()})(this,function(){function D(){return Bc.apply(null,arguments)}function B(Q){return Q instanceof Array||"[object Array]"===Object.prototype.toString.call(Q)}function a(Q){return null!=Q&&"[object Object]"===Object.prototype.toString.call(Q)}function c(Q,
aa){return Object.prototype.hasOwnProperty.call(Q,aa)}function k(Q){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(Q).length;for(var aa in Q)if(c(Q,aa))return!1;return!0}function n(Q){return void 0===Q}function r(Q){return"number"===typeof Q||"[object Number]"===Object.prototype.toString.call(Q)}function f(Q){return Q instanceof Date||"[object Date]"===Object.prototype.toString.call(Q)}function m(Q,aa){var qa=[],za,Pa=Q.length;for(za=0;za<Pa;++za)qa.push(aa(Q[za],za));return qa}
function q(Q,aa){for(var qa in aa)c(aa,qa)&&(Q[qa]=aa[qa]);c(aa,"toString")&&(Q.toString=aa.toString);c(aa,"valueOf")&&(Q.valueOf=aa.valueOf);return Q}function l(Q,aa,qa,za){return Xa(Q,aa,qa,za,!0).utc()}function b(Q){null==Q._pf&&(Q._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return Q._pf}function g(Q){if(null==
Q._isValid){var aa=b(Q),qa=Kb.call(aa.parsedDateParts,function(za){return null!=za});qa=!isNaN(Q._d.getTime())&&0>aa.overflow&&!aa.empty&&!aa.invalidEra&&!aa.invalidMonth&&!aa.invalidWeekday&&!aa.weekdayMismatch&&!aa.nullInput&&!aa.invalidFormat&&!aa.userInvalidated&&(!aa.meridiem||aa.meridiem&&qa);Q._strict&&(qa=qa&&0===aa.charsLeftOver&&0===aa.unusedTokens.length&&void 0===aa.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(Q))return qa;Q._isValid=qa}return Q._isValid}function e(Q){var aa=l(NaN);
null!=Q?q(b(aa),Q):b(aa).userInvalidated=!0;return aa}function d(Q,aa){var qa,za=ja.length;n(aa._isAMomentObject)||(Q._isAMomentObject=aa._isAMomentObject);n(aa._i)||(Q._i=aa._i);n(aa._f)||(Q._f=aa._f);n(aa._l)||(Q._l=aa._l);n(aa._strict)||(Q._strict=aa._strict);n(aa._tzm)||(Q._tzm=aa._tzm);n(aa._isUTC)||(Q._isUTC=aa._isUTC);n(aa._offset)||(Q._offset=aa._offset);n(aa._pf)||(Q._pf=b(aa));n(aa._locale)||(Q._locale=aa._locale);if(0<za)for(qa=0;qa<za;qa++){var Pa=ja[qa];var fb=aa[Pa];n(fb)||(Q[Pa]=fb)}return Q}
function h(Q){d(this,Q);this._d=new Date(null!=Q._d?Q._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ua&&(Ua=!0,D.updateOffset(this),Ua=!1)}function t(Q){return Q instanceof h||null!=Q&&null!=Q._isAMomentObject}function z(Q,aa){var qa=!0;return q(function(){null!=D.deprecationHandler&&D.deprecationHandler(null,Q);if(qa){var za=[],Pa,fb,hb=arguments.length;for(Pa=0;Pa<hb;Pa++){var rb="";if("object"===typeof arguments[Pa]){rb+="\n["+Pa+"] ";for(fb in arguments[0])c(arguments[0],fb)&&
(rb+=fb+": "+arguments[0][fb]+", ");rb=rb.slice(0,-2)}else rb=arguments[Pa];za.push(rb)}Array.prototype.slice.call(za).join("");qa=!1}return aa.apply(this,arguments)},aa)}function v(Q,aa){null!=D.deprecationHandler&&D.deprecationHandler(Q,aa);Ra[Q]||(Ra[Q]=!0)}function y(Q){return"undefined"!==typeof Function&&Q instanceof Function||"[object Function]"===Object.prototype.toString.call(Q)}function C(Q,aa){var qa=q({},Q),za;for(za in aa)c(aa,za)&&(a(Q[za])&&a(aa[za])?(qa[za]={},q(qa[za],Q[za]),q(qa[za],
aa[za])):null!=aa[za]?qa[za]=aa[za]:delete qa[za]);for(za in Q)c(Q,za)&&!c(aa,za)&&a(Q[za])&&(qa[za]=q({},qa[za]));return qa}function F(Q){null!=Q&&this.set(Q)}function x(Q,aa,qa){var za=""+Math.abs(Q);return(0<=Q?qa?"+":"":"-")+Math.pow(10,Math.max(0,aa-za.length)).toString().substr(1)+za}function u(Q,aa,qa,za){var Pa=za;"string"===typeof za&&(Pa=function(){return this[za]()});Q&&(Qa[Q]=Pa);aa&&(Qa[aa[0]]=function(){return x(Pa.apply(this,arguments),aa[1],aa[2])});qa&&(Qa[qa]=function(){return this.localeData().ordinal(Pa.apply(this,
arguments),Q)})}function w(Q){return Q.match(/\[[\s\S]/)?Q.replace(/^\[|\]$/g,""):Q.replace(/\\/g,"")}function A(Q){var aa=Q.match(Oa),qa;var za=0;for(qa=aa.length;za<qa;za++)aa[za]=Qa[aa[za]]?Qa[aa[za]]:w(aa[za]);return function(Pa){var fb="",hb;for(hb=0;hb<qa;hb++)fb+=y(aa[hb])?aa[hb].call(Pa,Q):aa[hb];return fb}}function E(Q,aa){if(!Q.isValid())return Q.localeData().invalidDate();aa=G(aa,Q.localeData());Va[aa]=Va[aa]||A(aa);return Va[aa](Q)}function G(Q,aa){function qa(Pa){return aa.longDateFormat(Pa)||
Pa}var za=5;for(Wa.lastIndex=0;0<=za&&Wa.test(Q);)Q=Q.replace(Wa,qa),Wa.lastIndex=0,--za;return Q}function H(Q,aa){var qa=Q.toLowerCase();$a[qa]=$a[qa+"s"]=$a[aa]=Q}function K(Q){return"string"===typeof Q?$a[Q]||$a[Q.toLowerCase()]:void 0}function I(Q){var aa={},qa,za;for(za in Q)c(Q,za)&&(qa=K(za))&&(aa[qa]=Q[za]);return aa}function J(Q){var aa=[],qa;for(qa in Q)c(Q,qa)&&aa.push({unit:qa,priority:bb[qa]});aa.sort(function(za,Pa){return za.priority-Pa.priority});return aa}function L(Q){return 0===
Q%4&&0!==Q%100||0===Q%400}function M(Q){return 0>Q?Math.ceil(Q)||0:Math.floor(Q)}function N(Q){Q=+Q;var aa=0;0!==Q&&isFinite(Q)&&(aa=M(Q));return aa}function O(Q,aa){return function(qa){return null!=qa?(ba(this,Q,qa),D.updateOffset(this,aa),this):Y(this,Q)}}function Y(Q,aa){return Q.isValid()?Q._d["get"+(Q._isUTC?"UTC":"")+aa]():NaN}function ba(Q,aa,qa){if(Q.isValid()&&!isNaN(qa))if("FullYear"===aa&&L(Q.year())&&1===Q.month()&&29===Q.date())qa=N(qa),Q._d["set"+(Q._isUTC?"UTC":"")+aa](qa,Q.month(),
ia(qa,Q.month()));else Q._d["set"+(Q._isUTC?"UTC":"")+aa](qa)}function ha(Q,aa,qa){Uc[Q]=y(aa)?aa:function(za,Pa){return za&&qa?qa:aa}}function U(Q,aa){return c(Uc,Q)?Uc[Q](aa._strict,aa._locale):new RegExp(X(Q))}function X(Q){return Z(Q.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(aa,qa,za,Pa,fb){return qa||za||Pa||fb}))}function Z(Q){return Q.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function P(Q,aa){var qa,za=aa;"string"===typeof Q&&(Q=[Q]);r(aa)&&(za=function(fb,hb){hb[aa]=
N(fb)});var Pa=Q.length;for(qa=0;qa<Pa;qa++)Yc[Q[qa]]=za}function da(Q,aa){P(Q,function(qa,za,Pa,fb){Pa._w=Pa._w||{};aa(qa,Pa._w,Pa,fb)})}function ia(Q,aa){if(isNaN(Q)||isNaN(aa))return NaN;var qa=(aa%12+12)%12;return 1===qa?L(Q+(aa-qa)/12)?29:28:31-qa%7%2}function xa(Q,aa){if(!Q.isValid())return Q;if("string"===typeof aa)if(/^\d+$/.test(aa))aa=N(aa);else if(aa=Q.localeData().monthsParse(aa),!r(aa))return Q;var qa=Math.min(Q.date(),ia(Q.year(),aa));Q._d["set"+(Q._isUTC?"UTC":"")+"Month"](aa,qa);return Q}
function Ca(Q){return null!=Q?(xa(this,Q),D.updateOffset(this,!0),this):Y(this,"Month")}function Fa(){function Q(hb,rb){return rb.length-hb.length}var aa=[],qa=[],za=[],Pa;for(Pa=0;12>Pa;Pa++){var fb=l([2E3,Pa]);aa.push(this.monthsShort(fb,""));qa.push(this.months(fb,""));za.push(this.months(fb,""));za.push(this.monthsShort(fb,""))}aa.sort(Q);qa.sort(Q);za.sort(Q);for(Pa=0;12>Pa;Pa++)aa[Pa]=Z(aa[Pa]),qa[Pa]=Z(qa[Pa]);for(Pa=0;24>Pa;Pa++)za[Pa]=Z(za[Pa]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+
za.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+qa.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+aa.join("|")+")","i")}function Ma(Q,aa,qa,za,Pa,fb,hb){100>Q&&0<=Q?(aa=new Date(Q+400,aa,qa,za,Pa,fb,hb),isFinite(aa.getFullYear())&&aa.setFullYear(Q)):aa=new Date(Q,aa,qa,za,Pa,fb,hb);return aa}function Sa(Q){if(100>Q&&0<=Q){var aa=Array.prototype.slice.call(arguments);aa[0]=Q+400;aa=new Date(Date.UTC.apply(null,aa));isFinite(aa.getUTCFullYear())&&aa.setUTCFullYear(Q)}else aa=
new Date(Date.UTC.apply(null,arguments));return aa}function Ba(Q,aa,qa){qa=7+aa-qa;return-((7+Sa(Q,0,qa).getUTCDay()-aa)%7)+qa-1}function ca(Q,aa,qa,za,Pa){qa=(7+qa-za)%7;za=Ba(Q,za,Pa);za=1+7*(aa-1)+qa+za;0>=za?(aa=Q-1,Q=(L(aa)?366:365)+za):za>(L(Q)?366:365)?(aa=Q+1,Q=za-(L(Q)?366:365)):(aa=Q,Q=za);return{year:aa,dayOfYear:Q}}function ua(Q,aa,qa){var za=Ba(Q.year(),aa,qa);za=Math.floor((Q.dayOfYear()-za-1)/7)+1;1>za?(Q=Q.year()-1,aa=za+ya(Q,aa,qa)):za>ya(Q.year(),aa,qa)?(aa=za-ya(Q.year(),aa,qa),
Q=Q.year()+1):(Q=Q.year(),aa=za);return{week:aa,year:Q}}function ya(Q,aa,qa){var za=Ba(Q,aa,qa);aa=Ba(Q+1,aa,qa);return((L(Q)?366:365)-za+aa)/7}function ta(Q,aa){return Q.slice(aa,7).concat(Q.slice(0,aa))}function pa(Q,aa,qa){var za;Q=Q.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],za=0;7>za;++za){var Pa=l([2E3,1]).day(za);this._minWeekdaysParse[za]=this.weekdaysMin(Pa,"").toLocaleLowerCase();this._shortWeekdaysParse[za]=
this.weekdaysShort(Pa,"").toLocaleLowerCase();this._weekdaysParse[za]=this.weekdays(Pa,"").toLocaleLowerCase()}if(qa)aa="dddd"===aa?Mb.call(this._weekdaysParse,Q):"ddd"===aa?Mb.call(this._shortWeekdaysParse,Q):Mb.call(this._minWeekdaysParse,Q);else if("dddd"===aa){aa=Mb.call(this._weekdaysParse,Q);if(-1!==aa)return aa;aa=Mb.call(this._shortWeekdaysParse,Q);if(-1!==aa)return aa;aa=Mb.call(this._minWeekdaysParse,Q)}else if("ddd"===aa){aa=Mb.call(this._shortWeekdaysParse,Q);if(-1!==aa)return aa;aa=Mb.call(this._weekdaysParse,
Q);if(-1!==aa)return aa;aa=Mb.call(this._minWeekdaysParse,Q)}else{aa=Mb.call(this._minWeekdaysParse,Q);if(-1!==aa)return aa;aa=Mb.call(this._weekdaysParse,Q);if(-1!==aa)return aa;aa=Mb.call(this._shortWeekdaysParse,Q)}return-1!==aa?aa:null}function Aa(){function Q(vb,Lb){return Lb.length-vb.length}var aa=[],qa=[],za=[],Pa=[],fb;for(fb=0;7>fb;fb++){var hb=l([2E3,1]).day(fb);var rb=Z(this.weekdaysMin(hb,""));var wb=Z(this.weekdaysShort(hb,""));hb=Z(this.weekdays(hb,""));aa.push(rb);qa.push(wb);za.push(hb);
Pa.push(rb);Pa.push(wb);Pa.push(hb)}aa.sort(Q);qa.sort(Q);za.sort(Q);Pa.sort(Q);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+Pa.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+za.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+qa.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+aa.join("|")+")","i")}function T(){return this.hours()%12||12}function ea(Q,aa){u(Q,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),aa)})}function na(Q,aa){return aa._meridiemParse}function V(Q){return Q?Q.toLowerCase().replace("_","-"):Q}function Ia(Q){var aa=null;if(void 0===Hb[Q]&&"undefined"!==typeof module&&module&&module.exports&&null!=Q.match("^[^/\\\\]*$"))try{aa=Gc._abbr;var qa=require;qa("./locale/"+Q);Ja(aa)}catch(za){Hb[Q]=null}return Hb[Q]}function Ja(Q,aa){var qa;Q&&(qa=n(aa)?W(Q):Da(Q,aa))&&(Gc=qa);return Gc._abbr}function Da(Q,aa){if(null!==aa){var qa=ac;aa.abbr=Q;if(null!=Hb[Q])v("defineLocaleOverride",
"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),qa=Hb[Q]._config;else if(null!=aa.parentLocale)if(null!=Hb[aa.parentLocale])qa=Hb[aa.parentLocale]._config;else if(qa=Ia(aa.parentLocale),null!=qa)qa=qa._config;else return Hc[aa.parentLocale]||(Hc[aa.parentLocale]=[]),Hc[aa.parentLocale].push({name:Q,config:aa}),null;
Hb[Q]=new F(C(qa,aa));Hc[Q]&&Hc[Q].forEach(function(za){Da(za.name,za.config)});Ja(Q);return Hb[Q]}delete Hb[Q];return null}function W(Q){var aa;Q&&Q._locale&&Q._locale._abbr&&(Q=Q._locale._abbr);if(!Q)return Gc;if(!B(Q)){if(aa=Ia(Q))return aa;Q=[Q]}a:{aa=0;for(var qa,za,Pa,fb;aa<Q.length;){fb=V(Q[aa]).split("-");qa=fb.length;for(za=(za=V(Q[aa+1]))?za.split("-"):null;0<qa;){if(Pa=Ia(fb.slice(0,qa).join("-"))){Q=Pa;break a}if(Pa=za&&za.length>=qa){b:{Pa=void 0;var hb=Math.min(fb.length,za.length);
for(Pa=0;Pa<hb;Pa+=1)if(fb[Pa]!==za[Pa])break b;Pa=hb}Pa=Pa>=qa-1}if(Pa)break;qa--}aa++}Q=Gc}return Q}function oa(Q){var aa;(aa=Q._a)&&-2===b(Q).overflow&&(aa=0>aa[oc]||11<aa[oc]?oc:1>aa[mc]||aa[mc]>ia(aa[Vb],aa[oc])?mc:0>aa[Ob]||24<aa[Ob]||24===aa[Ob]&&(0!==aa[hc]||0!==aa[Sb]||0!==aa[Tb])?Ob:0>aa[hc]||59<aa[hc]?hc:0>aa[Sb]||59<aa[Sb]?Sb:0>aa[Tb]||999<aa[Tb]?Tb:-1,b(Q)._overflowDayOfYear&&(aa<Vb||aa>mc)&&(aa=mc),b(Q)._overflowWeeks&&-1===aa&&(aa=Ic),b(Q)._overflowWeekday&&-1===aa&&(aa=Zc),b(Q).overflow=
aa);return Q}function ra(Q){var aa=Q._i;var qa=gd.exec(aa)||hd.exec(aa);var za=Oc.length;var Pa=Jb.length;if(qa){b(Q).iso=!0;for(aa=0;aa<za;aa++)if(Oc[aa][1].exec(qa[1])){var fb=Oc[aa][0];var hb=!1!==Oc[aa][2];break}if(null==fb)Q._isValid=!1;else{if(qa[3]){aa=0;for(za=Pa;aa<za;aa++)if(Jb[aa][1].exec(qa[3])){var rb=(qa[2]||" ")+Jb[aa][0];break}if(null==rb){Q._isValid=!1;return}}if(hb||null==rb){if(qa[4])if(id.exec(qa[4]))var wb="Z";else{Q._isValid=!1;return}Q._f=fb+(rb||"")+(wb||"");Ea(Q)}else Q._isValid=
!1}}else Q._isValid=!1}function R(Q){var aa=nd.exec(Q._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(aa){var qa=aa[3],za=aa[2],Pa=aa[5],fb=aa[6],hb=aa[7],rb=parseInt(aa[4],10);qa=[49>=rb?2E3+rb:999>=rb?1900+rb:rb,Pc.indexOf(qa),parseInt(za,10),parseInt(Pa,10),parseInt(fb,10)];hb&&qa.push(parseInt(hb,10));a:{if(hb=aa[1])if(hb=sc.indexOf(hb),za=(new Date(qa[0],qa[1],qa[2])).getDay(),hb!==za){b(Q).weekdayMismatch=!0;hb=Q._isValid=!1;break a}hb=
!0}hb&&(Q._a=qa,(hb=aa[8])?aa=jd[hb]:aa[9]?aa=0:(aa=parseInt(aa[10],10),hb=aa%100,aa=(aa-hb)/100*60+hb),Q._tzm=aa,Q._d=Sa.apply(null,Q._a),Q._d.setUTCMinutes(Q._d.getUTCMinutes()-Q._tzm),b(Q).rfc2822=!0)}else Q._isValid=!1}function fa(Q){var aa=od.exec(Q._i);null!==aa?Q._d=new Date(+aa[1]):(ra(Q),!1===Q._isValid&&(delete Q._isValid,R(Q),!1===Q._isValid&&(delete Q._isValid,Q._strict?Q._isValid=!1:D.createFromInputFallback(Q))))}function ma(Q,aa,qa){return null!=Q?Q:null!=aa?aa:qa}function wa(Q){var aa=
[];if(!Q._d){var qa=new Date(D.now());qa=Q._useUTC?[qa.getUTCFullYear(),qa.getUTCMonth(),qa.getUTCDate()]:[qa.getFullYear(),qa.getMonth(),qa.getDate()];if(Q._w&&null==Q._a[mc]&&null==Q._a[oc]){var za=Q._w;if(null!=za.GG||null!=za.W||null!=za.E){var Pa=1;var fb=4;var hb=ma(za.GG,Q._a[Vb],ua(Ta(),1,4).year);var rb=ma(za.W,1);var wb=ma(za.E,1);if(1>wb||7<wb)var vb=!0}else if(Pa=Q._locale._week.dow,fb=Q._locale._week.doy,rb=ua(Ta(),Pa,fb),hb=ma(za.gg,Q._a[Vb],rb.year),rb=ma(za.w,rb.week),null!=za.d){if(wb=
za.d,0>wb||6<wb)vb=!0}else if(null!=za.e){if(wb=za.e+Pa,0>za.e||6<za.e)vb=!0}else wb=Pa;1>rb||rb>ya(hb,Pa,fb)?b(Q)._overflowWeeks=!0:null!=vb?b(Q)._overflowWeekday=!0:(vb=ca(hb,rb,wb,Pa,fb),Q._a[Vb]=vb.year,Q._dayOfYear=vb.dayOfYear)}if(null!=Q._dayOfYear){vb=ma(Q._a[Vb],qa[Vb]);if(Q._dayOfYear>(L(vb)?366:365)||0===Q._dayOfYear)b(Q)._overflowDayOfYear=!0;vb=Sa(vb,0,Q._dayOfYear);Q._a[oc]=vb.getUTCMonth();Q._a[mc]=vb.getUTCDate()}for(vb=0;3>vb&&null==Q._a[vb];++vb)Q._a[vb]=aa[vb]=qa[vb];for(;7>vb;vb++)Q._a[vb]=
aa[vb]=null==Q._a[vb]?2===vb?1:0:Q._a[vb];24===Q._a[Ob]&&0===Q._a[hc]&&0===Q._a[Sb]&&0===Q._a[Tb]&&(Q._nextDay=!0,Q._a[Ob]=0);Q._d=(Q._useUTC?Sa:Ma).apply(null,aa);aa=Q._useUTC?Q._d.getUTCDay():Q._d.getDay();null!=Q._tzm&&Q._d.setUTCMinutes(Q._d.getUTCMinutes()-Q._tzm);Q._nextDay&&(Q._a[Ob]=24);Q._w&&"undefined"!==typeof Q._w.d&&Q._w.d!==aa&&(b(Q).weekdayMismatch=!0)}}function Ea(Q){if(Q._f===D.ISO_8601)ra(Q);else if(Q._f===D.RFC_2822)R(Q);else{Q._a=[];b(Q).empty=!0;var aa=""+Q._i,qa,za,Pa=aa.length,
fb=0;var hb=G(Q._f,Q._locale).match(Oa)||[];var rb=hb.length;for(qa=0;qa<rb;qa++){var wb=hb[qa];if(za=(aa.match(U(wb,Q))||[])[0]){var vb=aa.substr(0,aa.indexOf(za));0<vb.length&&b(Q).unusedInput.push(vb);aa=aa.slice(aa.indexOf(za)+za.length);fb+=za.length}if(Qa[wb]){if(za?b(Q).empty=!1:b(Q).unusedTokens.push(wb),vb=Q,null!=za&&c(Yc,wb))Yc[wb](za,vb._a,vb,wb)}else Q._strict&&!za&&b(Q).unusedTokens.push(wb)}b(Q).charsLeftOver=Pa-fb;0<aa.length&&b(Q).unusedInput.push(aa);12>=Q._a[Ob]&&!0===b(Q).bigHour&&
0<Q._a[Ob]&&(b(Q).bigHour=void 0);b(Q).parsedDateParts=Q._a.slice(0);b(Q).meridiem=Q._meridiem;aa=Q._a;qa=Ob;Pa=Q._locale;hb=Q._a[Ob];fb=Q._meridiem;null!=fb&&(null!=Pa.meridiemHour?hb=Pa.meridiemHour(hb,fb):null!=Pa.isPM&&((Pa=Pa.isPM(fb))&&12>hb&&(hb+=12),Pa||12!==hb||(hb=0)));aa[qa]=hb;aa=b(Q).era;null!==aa&&(Q._a[Vb]=Q._locale.erasConvertYear(aa,Q._a[Vb]));wa(Q);oa(Q)}}function Ha(Q){if(!Q._d){var aa=I(Q._i);Q._a=m([aa.year,aa.month,void 0===aa.day?aa.date:aa.day,aa.hour,aa.minute,aa.second,aa.millisecond],
function(qa){return qa&&parseInt(qa,10)});wa(Q)}}function La(Q){var aa=Q._i,qa=Q._f;Q._locale=Q._locale||W(Q._l);if(null===aa||void 0===qa&&""===aa)return e({nullInput:!0});"string"===typeof aa&&(Q._i=aa=Q._locale.preparse(aa));if(t(aa))return new h(oa(aa));if(f(aa))Q._d=aa;else if(B(qa)){var za=!1,Pa=Q._f.length;if(0===Pa)b(Q).invalidFormat=!0,Q._d=new Date(NaN);else{for(aa=0;aa<Pa;aa++){qa=0;var fb=!1;var hb=d({},Q);null!=Q._useUTC&&(hb._useUTC=Q._useUTC);hb._f=Q._f[aa];Ea(hb);g(hb)&&(fb=!0);qa+=
b(hb).charsLeftOver;qa+=10*b(hb).unusedTokens.length;b(hb).score=qa;if(za)qa<rb&&(rb=qa,wb=hb);else if(null==rb||qa<rb||fb){var rb=qa;var wb=hb;fb&&(za=!0)}}q(Q,wb||hb)}}else qa?Ea(Q):Ya(Q);g(Q)||(Q._d=null);return Q}function Ya(Q){var aa=Q._i;n(aa)?Q._d=new Date(D.now()):f(aa)?Q._d=new Date(aa.valueOf()):"string"===typeof aa?fa(Q):B(aa)?(Q._a=m(aa.slice(0),function(qa){return parseInt(qa,10)}),wa(Q)):a(aa)?Ha(Q):r(aa)?Q._d=new Date(aa):D.createFromInputFallback(Q)}function Xa(Q,aa,qa,za,Pa){var fb=
{};if(!0===aa||!1===aa)za=aa,aa=void 0;if(!0===qa||!1===qa)za=qa,qa=void 0;if(a(Q)&&k(Q)||B(Q)&&0===Q.length)Q=void 0;fb._isAMomentObject=!0;fb._useUTC=fb._isUTC=Pa;fb._l=qa;fb._i=Q;fb._f=aa;fb._strict=za;Q=new h(oa(La(fb)));Q._nextDay&&(Q.add(1,"d"),Q._nextDay=void 0);return Q}function Ta(Q,aa,qa,za){return Xa(Q,aa,qa,za,!1)}function eb(Q,aa){var qa;1===aa.length&&B(aa[0])&&(aa=aa[0]);if(!aa.length)return Ta();var za=aa[0];for(qa=1;qa<aa.length;++qa)if(!aa[qa].isValid()||aa[qa][Q](za))za=aa[qa];
return za}function db(Q){var aa=I(Q);Q=aa.year||0;var qa=aa.quarter||0,za=aa.month||0,Pa=aa.week||aa.isoWeek||0,fb=aa.day||0,hb=aa.hour||0,rb=aa.minute||0,wb=aa.second||0,vb=aa.millisecond||0;a:{var Lb,tc=!1,Dc=Cc.length;for(Lb in aa)if(c(aa,Lb)&&(-1===Mb.call(Cc,Lb)||null!=aa[Lb]&&isNaN(aa[Lb]))){aa=!1;break a}for(Lb=0;Lb<Dc;++Lb)if(aa[Cc[Lb]]){if(tc){aa=!1;break a}parseFloat(aa[Cc[Lb]])!==N(aa[Cc[Lb]])&&(tc=!0)}aa=!0}this._isValid=aa;this._milliseconds=+vb+1E3*wb+6E4*rb+36E5*hb;this._days=+fb+7*
Pa;this._months=+za+3*qa+12*Q;this._data={};this._locale=W();this._bubble()}function gb(Q){return Q instanceof db}function qb(Q){return 0>Q?-1*Math.round(-1*Q):Math.round(Q)}function sb(Q,aa){u(Q,0,0,function(){var qa=this.utcOffset(),za="+";0>qa&&(qa=-qa,za="-");return za+x(~~(qa/60),2)+aa+x(~~qa%60,2)})}function tb(Q,aa){var qa=(aa||"").match(Q);if(null===qa)return null;qa=((qa[qa.length-1]||[])+"").match(Vc)||["-",0,0];var za=+(60*qa[1])+N(qa[2]);return 0===za?0:"+"===qa[0]?za:-za}function Cb(Q,
aa){if(aa._isUTC){var qa=aa.clone();var za=(t(Q)||f(Q)?Q.valueOf():Ta(Q).valueOf())-qa.valueOf();qa._d.setTime(qa._d.valueOf()+za);D.updateOffset(qa,!1);return qa}return Ta(Q).local()}function Gb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function nb(Q,aa){var qa=Q,za=null;gb(Q)?qa={ms:Q._milliseconds,d:Q._days,M:Q._months}:r(Q)||!isNaN(+Q)?(qa={},aa?qa[aa]=+Q:qa.milliseconds=+Q):(za=pd.exec(Q))?(qa="-"===za[1]?-1:1,qa={y:0,d:N(za[mc])*qa,h:N(za[Ob])*qa,m:N(za[hc])*qa,s:N(za[Sb])*qa,
ms:N(qb(1E3*za[Tb]))*qa}):(za=qd.exec(Q))?(qa="-"===za[1]?-1:1,qa={y:Ab(za[2],qa),M:Ab(za[3],qa),w:Ab(za[4],qa),d:Ab(za[5],qa),h:Ab(za[6],qa),m:Ab(za[7],qa),s:Ab(za[8],qa)}):null==qa?qa={}:"object"===typeof qa&&("from"in qa||"to"in qa)&&(za=Ta(qa.from),qa=Ta(qa.to),za.isValid()&&qa.isValid()?(qa=Cb(qa,za),za.isBefore(qa)?qa=Ub(za,qa):(qa=Ub(qa,za),qa.milliseconds=-qa.milliseconds,qa.months=-qa.months),za=qa):za={milliseconds:0,months:0},qa={},qa.ms=za.milliseconds,qa.M=za.months);qa=new db(qa);gb(Q)&&
c(Q,"_locale")&&(qa._locale=Q._locale);gb(Q)&&c(Q,"_isValid")&&(qa._isValid=Q._isValid);return qa}function Ab(Q,aa){var qa=Q&&parseFloat(Q.replace(",","."));return(isNaN(qa)?0:qa)*aa}function Ub(Q,aa){var qa={};qa.months=aa.month()-Q.month()+12*(aa.year()-Q.year());Q.clone().add(qa.months,"M").isAfter(aa)&&--qa.months;qa.milliseconds=+aa-+Q.clone().add(qa.months,"M");return qa}function Zb(Q,aa){return function(qa,za){if(null!==za&&!isNaN(+za)){v(aa,"moment()."+aa+"(period, number) is deprecated. Please use moment()."+
aa+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Pa=qa;qa=za;za=Pa}Pa=nb(qa,za);Nb(this,Pa,Q);return this}}function Nb(Q,aa,qa,za){var Pa=aa._milliseconds,fb=qb(aa._days);aa=qb(aa._months);Q.isValid()&&(za=null==za?!0:za,aa&&xa(Q,Y(Q,"Month")+aa*qa),fb&&ba(Q,"Date",Y(Q,"Date")+fb*qa),Pa&&Q._d.setTime(Q._d.valueOf()+Pa*qa),za&&D.updateOffset(Q,fb||aa))}function yb(Q){return"string"===typeof Q||Q instanceof String}function uc(Q){var aa=B(Q),qa=
!1;aa&&(qa=0===Q.filter(function(za){return!r(za)&&yb(Q)}).length);return aa&&qa}function Ib(Q,aa){if(Q.date()<aa.date())return-Ib(aa,Q);var qa=12*(aa.year()-Q.year())+(aa.month()-Q.month()),za=Q.clone().add(qa,"months");if(0>aa-za){var Pa=Q.clone().add(qa-1,"months");za=(aa-za)/(za-Pa)}else Pa=Q.clone().add(qa+1,"months"),za=(aa-za)/(Pa-za);return-(qa+za)||0}function bc(Q){if(void 0===Q)return this._locale._abbr;Q=W(Q);null!=Q&&(this._locale=Q);return this}function ic(){return this._locale}function Xb(Q,
aa){return(Q%aa+aa)%aa}function vc(Q,aa,qa){return 100>Q&&0<=Q?new Date(Q+400,aa,qa)-Wc:(new Date(Q,aa,qa)).valueOf()}function jc(Q,aa,qa){return 100>Q&&0<=Q?Date.UTC(Q+400,aa,qa)-Wc:Date.UTC(Q,aa,qa)}function pc(Q,aa){return aa.erasAbbrRegex(Q)}function wc(){var Q=[],aa=[],qa=[],za=[],Pa,fb=this.eras();var hb=0;for(Pa=fb.length;hb<Pa;++hb)aa.push(Z(fb[hb].name)),Q.push(Z(fb[hb].abbr)),qa.push(Z(fb[hb].narrow)),za.push(Z(fb[hb].name)),za.push(Z(fb[hb].abbr)),za.push(Z(fb[hb].narrow));this._erasRegex=
new RegExp("^("+za.join("|")+")","i");this._erasNameRegex=new RegExp("^("+aa.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+Q.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+qa.join("|")+")","i")}function xc(Q,aa){u(0,[Q,Q.length],0,aa)}function Jc(Q,aa,qa,za,Pa){if(null==Q)return ua(this,za,Pa).year;var fb=ya(Q,za,Pa);aa>fb&&(aa=fb);Q=ca(Q,aa,qa,za,Pa);Q=Sa(Q.year,0,Q.dayOfYear);this.year(Q.getUTCFullYear());this.month(Q.getUTCMonth());this.date(Q.getUTCDate());return this}function Qc(Q,
aa){aa[Tb]=N(1E3*("0."+Q))}function Kc(Q){return Q}function yc(Q,aa,qa,za){var Pa=W();aa=l().set(za,aa);return Pa[qa](aa,Q)}function kc(Q,aa,qa){r(Q)&&(aa=Q,Q=void 0);Q=Q||"";if(null!=aa)return yc(Q,aa,qa,"month");var za=[];for(aa=0;12>aa;aa++)za[aa]=yc(Q,aa,qa,"month");return za}function cc(Q,aa,qa,za){"boolean"!==typeof Q&&(qa=aa=Q,Q=!1);r(aa)&&(qa=aa,aa=void 0);aa=aa||"";var Pa=W();Q=Q?Pa._week.dow:0;Pa=[];if(null!=qa)return yc(aa,(qa+Q)%7,za,"day");for(qa=0;7>qa;qa++)Pa[qa]=yc(aa,(qa+Q)%7,za,
"day");return Pa}function dc(Q,aa,qa,za){aa=nb(aa,qa);Q._milliseconds+=za*aa._milliseconds;Q._days+=za*aa._days;Q._months+=za*aa._months;return Q._bubble()}function Rc(Q){return 0>Q?Math.floor(Q):Math.ceil(Q)}function ec(Q){return function(){return this.as(Q)}}function Yb(Q){return function(){return this.isValid()?this._data[Q]:NaN}}function Sc(Q,aa,qa,za,Pa){return Pa.relativeTime(aa||1,!!qa,Q,za)}function Pb(Q){return(0<Q)-(0>Q)||+Q}function $b(){if(!this.isValid())return this.localeData().invalidDate();
var Q=$c(this._milliseconds)/1E3,aa=$c(this._days),qa=$c(this._months),za=this.asSeconds();if(!za)return"P0D";var Pa=M(Q/60);var fb=M(Pa/60);Q%=60;Pa%=60;var hb=M(qa/12);qa%=12;var rb=Q?Q.toFixed(3).replace(/\.?0+$/,""):"";var wb=0>za?"-":"";var vb=Pb(this._months)!==Pb(za)?"-":"";var Lb=Pb(this._days)!==Pb(za)?"-":"";za=Pb(this._milliseconds)!==Pb(za)?"-":"";return wb+"P"+(hb?vb+hb+"Y":"")+(qa?vb+qa+"M":"")+(aa?Lb+aa+"D":"")+(fb||Pa||Q?"T":"")+(fb?za+fb+"H":"")+(Pa?za+Pa+"M":"")+(Q?za+rb+"S":"")}
var Kb=Array.prototype.some?Array.prototype.some:function(Q){var aa=Object(this),qa=aa.length>>>0,za;for(za=0;za<qa;za++)if(za in aa&&Q.call(this,aa[za],za,aa))return!0;return!1};var ja=D.momentProperties=[],Ua=!1,Ra={};D.suppressDeprecationWarnings=!1;D.deprecationHandler=null;var Ka=Object.keys?Object.keys:function(Q){var aa,qa=[];for(aa in Q)c(Q,aa)&&qa.push(aa);return qa};var Oa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Wa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Va={},Qa={},$a={},bb={},cb=/\d/,kb=/\d\d/,ab=/\d{3}/,lb=/\d{4}/,mb=/[+-]?\d{6}/,pb=/\d\d?/,Wb=/\d\d\d\d?/,Lc=/\d\d\d\d\d\d?/,zc=/\d{1,3}/,Ec=/\d{1,4}/,Fb=/[+-]?\d{1,6}/,fc=/\d+/,gc=/[+-]?\d+/,Mc=/Z|[+-]\d\d:?\d\d/gi,Xc=/Z|[+-]\d\d(?::?\d\d)?/gi,Nc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Uc={};var Yc={},Vb=0,oc=1,mc=2,Ob=3,hc=4,Sb=5,Tb=
6,Ic=7,Zc=8;var Mb=Array.prototype.indexOf?Array.prototype.indexOf:function(Q){var aa;for(aa=0;aa<this.length;++aa)if(this[aa]===Q)return aa;return-1};u("M",["MM",2],"Mo",function(){return this.month()+1});u("MMM",0,0,function(Q){return this.localeData().monthsShort(this,Q)});u("MMMM",0,0,function(Q){return this.localeData().months(this,Q)});H("month","M");bb.month=8;ha("M",pb);ha("MM",pb,kb);ha("MMM",function(Q,aa){return aa.monthsShortRegex(Q)});ha("MMMM",function(Q,aa){return aa.monthsRegex(Q)});
P(["M","MM"],function(Q,aa){aa[oc]=N(Q)-1});P(["MMM","MMMM"],function(Q,aa,qa,za){za=qa._locale.monthsParse(Q,za,qa._strict);null!=za?aa[oc]=za:b(qa).invalidMonth=Q});var Pc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),kd=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;u("Y",0,0,function(){var Q=this.year();return 9999>=Q?x(Q,4):"+"+Q});u(0,["YY",2],0,function(){return this.year()%100});u(0,["YYYY",4],0,"year");u(0,["YYYYY",5],0,"year");u(0,["YYYYYY",6,!0],0,"year");H("year","y");bb.year=1;ha("Y",
gc);ha("YY",pb,kb);ha("YYYY",Ec,lb);ha("YYYYY",Fb,mb);ha("YYYYYY",Fb,mb);P(["YYYYY","YYYYYY"],Vb);P("YYYY",function(Q,aa){aa[Vb]=2===Q.length?D.parseTwoDigitYear(Q):N(Q)});P("YY",function(Q,aa){aa[Vb]=D.parseTwoDigitYear(Q)});P("Y",function(Q,aa){aa[Vb]=parseInt(Q,10)});D.parseTwoDigitYear=function(Q){return N(Q)+(68<N(Q)?1900:2E3)};var Tc=O("FullYear",!0);u("w",["ww",2],"wo","week");u("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");bb.week=5;bb.isoWeek=5;ha("w",pb);ha("ww",pb,kb);ha("W",
pb);ha("WW",pb,kb);da(["w","ww","W","WW"],function(Q,aa,qa,za){aa[za.substr(0,1)]=N(Q)});u("d",0,"do","day");u("dd",0,0,function(Q){return this.localeData().weekdaysMin(this,Q)});u("ddd",0,0,function(Q){return this.localeData().weekdaysShort(this,Q)});u("dddd",0,0,function(Q){return this.localeData().weekdays(this,Q)});u("e",0,0,"weekday");u("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");bb.day=11;bb.weekday=11;bb.isoWeekday=11;ha("d",pb);ha("e",pb);ha("E",pb);ha("dd",function(Q,
aa){return aa.weekdaysMinRegex(Q)});ha("ddd",function(Q,aa){return aa.weekdaysShortRegex(Q)});ha("dddd",function(Q,aa){return aa.weekdaysRegex(Q)});da(["dd","ddd","dddd"],function(Q,aa,qa,za){za=qa._locale.weekdaysParse(Q,za,qa._strict);null!=za?aa.d=za:b(qa).invalidWeekday=Q});da(["d","e","E"],function(Q,aa,qa,za){aa[za]=N(Q)});var sc="Sun Mon Tue Wed Thu Fri Sat".split(" ");u("H",["HH",2],0,"hour");u("h",["hh",2],0,T);u("k",["kk",2],0,function(){return this.hours()||24});u("hmm",0,0,function(){return""+
T.apply(this)+x(this.minutes(),2)});u("hmmss",0,0,function(){return""+T.apply(this)+x(this.minutes(),2)+x(this.seconds(),2)});u("Hmm",0,0,function(){return""+this.hours()+x(this.minutes(),2)});u("Hmmss",0,0,function(){return""+this.hours()+x(this.minutes(),2)+x(this.seconds(),2)});ea("a",!0);ea("A",!1);H("hour","h");bb.hour=13;ha("a",na);ha("A",na);ha("H",pb);ha("h",pb);ha("k",pb);ha("HH",pb,kb);ha("hh",pb,kb);ha("kk",pb,kb);ha("hmm",Wb);ha("hmmss",Lc);ha("Hmm",Wb);ha("Hmmss",Lc);P(["H","HH"],Ob);
P(["k","kk"],function(Q,aa,qa){Q=N(Q);aa[Ob]=24===Q?0:Q});P(["a","A"],function(Q,aa,qa){qa._isPm=qa._locale.isPM(Q);qa._meridiem=Q});P(["h","hh"],function(Q,aa,qa){aa[Ob]=N(Q);b(qa).bigHour=!0});P("hmm",function(Q,aa,qa){var za=Q.length-2;aa[Ob]=N(Q.substr(0,za));aa[hc]=N(Q.substr(za));b(qa).bigHour=!0});P("hmmss",function(Q,aa,qa){var za=Q.length-4,Pa=Q.length-2;aa[Ob]=N(Q.substr(0,za));aa[hc]=N(Q.substr(za,2));aa[Sb]=N(Q.substr(Pa));b(qa).bigHour=!0});P("Hmm",function(Q,aa,qa){qa=Q.length-2;aa[Ob]=
N(Q.substr(0,qa));aa[hc]=N(Q.substr(qa))});P("Hmmss",function(Q,aa,qa){qa=Q.length-4;var za=Q.length-2;aa[Ob]=N(Q.substr(0,qa));aa[hc]=N(Q.substr(qa,2));aa[Sb]=N(Q.substr(za))});var ad=O("Hours",!0),ac={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",
ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Pc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekdaysShort:sc,meridiemParse:/[ap]\.?m?\.?/i},Hb={},Hc={},Gc,gd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,id=/Z|[+-]\d\d(?::?\d\d)?/,Oc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",
/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Jb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",
/\d\d/]],od=/^\/?Date\((-?\d+)/i,nd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jd={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};D.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(Q){Q._d=new Date(Q._i+(Q._useUTC?" UTC":""))});D.ISO_8601=function(){};D.RFC_2822=function(){};var bd=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Q=Ta.apply(null,arguments);return this.isValid()&&Q.isValid()?Q<this?this:Q:e()}),cd=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var Q=Ta.apply(null,arguments);return this.isValid()&&Q.isValid()?Q>this?
this:Q:e()}),Cc="year quarter month week day hour minute second millisecond".split(" ");sb("Z",":");sb("ZZ","");ha("Z",Xc);ha("ZZ",Xc);P(["Z","ZZ"],function(Q,aa,qa){qa._useUTC=!0;qa._tzm=tb(Xc,Q)});var Vc=/([\+\-]|\d\d)/gi;D.updateOffset=function(){};var pd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,qd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;nb.fn=db.prototype;
nb.invalid=function(){return nb(NaN)};var rd=Zb(1,"add"),Qb=Zb(-1,"subtract");D.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";D.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var dd=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(Q){return void 0===Q?this.localeData():this.locale(Q)}),Wc=126227808E5;u("N",0,0,"eraAbbr");u("NN",0,0,"eraAbbr");u("NNN",0,0,"eraAbbr");u("NNNN",0,0,"eraName");u("NNNNN",0,0,"eraNarrow");
u("y",["y",1],"yo","eraYear");u("y",["yy",2],0,"eraYear");u("y",["yyy",3],0,"eraYear");u("y",["yyyy",4],0,"eraYear");ha("N",pc);ha("NN",pc);ha("NNN",pc);ha("NNNN",function(Q,aa){return aa.erasNameRegex(Q)});ha("NNNNN",function(Q,aa){return aa.erasNarrowRegex(Q)});P(["N","NN","NNN","NNNN","NNNNN"],function(Q,aa,qa,za){(aa=qa._locale.erasParse(Q,za,qa._strict))?b(qa).era=aa:b(qa).invalidEra=Q});ha("y",fc);ha("yy",fc);ha("yyy",fc);ha("yyyy",fc);ha("yo",function(Q,aa){return aa._eraYearOrdinalRegex||
fc});P(["y","yy","yyy","yyyy"],Vb);P(["yo"],function(Q,aa,qa,za){var Pa;qa._locale._eraYearOrdinalRegex&&(Pa=Q.match(qa._locale._eraYearOrdinalRegex));aa[Vb]=qa._locale.eraYearOrdinalParse?qa._locale.eraYearOrdinalParse(Q,Pa):parseInt(Q,10)});u(0,["gg",2],0,function(){return this.weekYear()%100});u(0,["GG",2],0,function(){return this.isoWeekYear()%100});xc("gggg","weekYear");xc("ggggg","weekYear");xc("GGGG","isoWeekYear");xc("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");bb.weekYear=
1;bb.isoWeekYear=1;ha("G",gc);ha("g",gc);ha("GG",pb,kb);ha("gg",pb,kb);ha("GGGG",Ec,lb);ha("gggg",Ec,lb);ha("GGGGG",Fb,mb);ha("ggggg",Fb,mb);da(["gggg","ggggg","GGGG","GGGGG"],function(Q,aa,qa,za){aa[za.substr(0,2)]=N(Q)});da(["gg","GG"],function(Q,aa,qa,za){aa[za]=D.parseTwoDigitYear(Q)});u("Q",0,"Qo","quarter");H("quarter","Q");bb.quarter=7;ha("Q",cb);P("Q",function(Q,aa){aa[oc]=3*(N(Q)-1)});u("D",["DD",2],"Do","date");H("date","D");bb.date=9;ha("D",pb);ha("DD",pb,kb);ha("Do",function(Q,aa){return Q?
aa._dayOfMonthOrdinalParse||aa._ordinalParse:aa._dayOfMonthOrdinalParseLenient});P(["D","DD"],mc);P("Do",function(Q,aa){aa[mc]=N(Q.match(pb)[0])});var ed=O("Date",!0);u("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");bb.dayOfYear=4;ha("DDD",zc);ha("DDDD",ab);P(["DDD","DDDD"],function(Q,aa,qa){qa._dayOfYear=N(Q)});u("m",["mm",2],0,"minute");H("minute","m");bb.minute=14;ha("m",pb);ha("mm",pb,kb);P(["m","mm"],hc);var fd=O("Minutes",!1);u("s",["ss",2],0,"second");H("second","s");bb.second=15;
ha("s",pb);ha("ss",pb,kb);P(["s","ss"],Sb);var sd=O("Seconds",!1);u("S",0,0,function(){return~~(this.millisecond()/100)});u(0,["SS",2],0,function(){return~~(this.millisecond()/10)});u(0,["SSS",3],0,"millisecond");u(0,["SSSS",4],0,function(){return 10*this.millisecond()});u(0,["SSSSS",5],0,function(){return 100*this.millisecond()});u(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});u(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});u(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});u(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");bb.millisecond=16;ha("S",zc,cb);ha("SS",zc,kb);ha("SSS",zc,ab);var Ac;for(Ac="SSSS";9>=Ac.length;Ac+="S")ha(Ac,fc);for(Ac="S";9>=Ac.length;Ac+="S")P(Ac,Qc);var ld=O("Milliseconds",!1);u("z",0,0,"zoneAbbr");u("zz",0,0,"zoneName");var jb=h.prototype;jb.add=rd;jb.calendar=function(Q,aa){if(1===arguments.length)if(arguments[0]){var qa=arguments[0],za;if(!(za=t(qa)||f(qa)||yb(qa)||r(qa)||uc(qa))){za=
a(qa)&&!k(qa);var Pa=!1,fb="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),hb,rb=fb.length;for(hb=0;hb<rb;hb+=1){var wb=fb[hb];Pa=Pa||c(qa,wb)}za=za&&Pa}if(za||null===qa||void 0===qa)Q=arguments[0],aa=void 0;else{qa=arguments[0];za=a(qa)&&!k(qa);Pa=!1;fb="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(hb=0;hb<fb.length;hb+=1)wb=fb[hb],Pa=Pa||c(qa,wb);za&&Pa&&(aa=arguments[0],Q=void 0)}}else aa=
Q=void 0;qa=Q||Ta();za=Cb(qa,this).startOf("day");za=D.calendarFormat(this,za)||"sameElse";Pa=aa&&(y(aa[za])?aa[za].call(this,qa):aa[za]);return this.format(Pa||this.localeData().calendar(za,this,Ta(qa)))};jb.clone=function(){return new h(this)};jb.diff=function(Q,aa,qa){if(!this.isValid())return NaN;Q=Cb(Q,this);if(!Q.isValid())return NaN;var za=6E4*(Q.utcOffset()-this.utcOffset());aa=K(aa);switch(aa){case "year":aa=Ib(this,Q)/12;break;case "month":aa=Ib(this,Q);break;case "quarter":aa=Ib(this,Q)/
3;break;case "second":aa=(this-Q)/1E3;break;case "minute":aa=(this-Q)/6E4;break;case "hour":aa=(this-Q)/36E5;break;case "day":aa=(this-Q-za)/864E5;break;case "week":aa=(this-Q-za)/6048E5;break;default:aa=this-Q}return qa?aa:M(aa)};jb.endOf=function(Q){Q=K(Q);if(void 0===Q||"millisecond"===Q||!this.isValid())return this;var aa=this._isUTC?jc:vc;switch(Q){case "year":var qa=aa(this.year()+1,0,1)-1;break;case "quarter":qa=aa(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":qa=aa(this.year(),
this.month()+1,1)-1;break;case "week":qa=aa(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":qa=aa(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":qa=aa(this.year(),this.month(),this.date()+1)-1;break;case "hour":qa=this._d.valueOf();qa+=36E5-Xb(qa+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":qa=this._d.valueOf();qa+=6E4-Xb(qa,6E4)-1;break;case "second":qa=this._d.valueOf(),qa+=1E3-Xb(qa,1E3)-1}this._d.setTime(qa);
D.updateOffset(this,!0);return this};jb.format=function(Q){Q||(Q=this.isUtc()?D.defaultFormatUtc:D.defaultFormat);Q=E(this,Q);return this.localeData().postformat(Q)};jb.from=function(Q,aa){return this.isValid()&&(t(Q)&&Q.isValid()||Ta(Q).isValid())?nb({to:this,from:Q}).locale(this.locale()).humanize(!aa):this.localeData().invalidDate()};jb.fromNow=function(Q){return this.from(Ta(),Q)};jb.to=function(Q,aa){return this.isValid()&&(t(Q)&&Q.isValid()||Ta(Q).isValid())?nb({from:this,to:Q}).locale(this.locale()).humanize(!aa):
this.localeData().invalidDate()};jb.toNow=function(Q){return this.to(Ta(),Q)};jb.get=function(Q){Q=K(Q);return y(this[Q])?this[Q]():this};jb.invalidAt=function(){return b(this).overflow};jb.isAfter=function(Q,aa){var qa=t(Q)?Q:Ta(Q);if(!this.isValid()||!qa.isValid())return!1;aa=K(aa)||"millisecond";return"millisecond"===aa?this.valueOf()>qa.valueOf():qa.valueOf()<this.clone().startOf(aa).valueOf()};jb.isBefore=function(Q,aa){var qa=t(Q)?Q:Ta(Q);if(!this.isValid()||!qa.isValid())return!1;aa=K(aa)||
"millisecond";return"millisecond"===aa?this.valueOf()<qa.valueOf():this.clone().endOf(aa).valueOf()<qa.valueOf()};jb.isBetween=function(Q,aa,qa,za){Q=t(Q)?Q:Ta(Q);aa=t(aa)?aa:Ta(aa);if(!(this.isValid()&&Q.isValid()&&aa.isValid()))return!1;za=za||"()";return("("===za[0]?this.isAfter(Q,qa):!this.isBefore(Q,qa))&&(")"===za[1]?this.isBefore(aa,qa):!this.isAfter(aa,qa))};jb.isSame=function(Q,aa){var qa=t(Q)?Q:Ta(Q);if(!this.isValid()||!qa.isValid())return!1;aa=K(aa)||"millisecond";if("millisecond"===aa)return this.valueOf()===
qa.valueOf();qa=qa.valueOf();return this.clone().startOf(aa).valueOf()<=qa&&qa<=this.clone().endOf(aa).valueOf()};jb.isSameOrAfter=function(Q,aa){return this.isSame(Q,aa)||this.isAfter(Q,aa)};jb.isSameOrBefore=function(Q,aa){return this.isSame(Q,aa)||this.isBefore(Q,aa)};jb.isValid=function(){return g(this)};jb.lang=dd;jb.locale=bc;jb.localeData=ic;jb.max=cd;jb.min=bd;jb.parsingFlags=function(){return q({},b(this))};jb.set=function(Q,aa){if("object"===typeof Q){Q=I(Q);var qa=J(Q),za,Pa=qa.length;
for(za=0;za<Pa;za++)this[qa[za].unit](Q[qa[za].unit])}else if(Q=K(Q),y(this[Q]))return this[Q](aa);return this};jb.startOf=function(Q){Q=K(Q);if(void 0===Q||"millisecond"===Q||!this.isValid())return this;var aa=this._isUTC?jc:vc;switch(Q){case "year":var qa=aa(this.year(),0,1);break;case "quarter":qa=aa(this.year(),this.month()-this.month()%3,1);break;case "month":qa=aa(this.year(),this.month(),1);break;case "week":qa=aa(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":qa=
aa(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":qa=aa(this.year(),this.month(),this.date());break;case "hour":qa=this._d.valueOf();qa-=Xb(qa+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":qa=this._d.valueOf();qa-=Xb(qa,6E4);break;case "second":qa=this._d.valueOf(),qa-=Xb(qa,1E3)}this._d.setTime(qa);D.updateOffset(this,!0);return this};jb.subtract=Qb;jb.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),
this.second(),this.millisecond()]};jb.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};jb.toDate=function(){return new Date(this.valueOf())};jb.toISOString=function(Q){if(!this.isValid())return null;var aa=(Q=!0!==Q)?this.clone().utc():this;return 0>aa.year()||9999<aa.year()?E(aa,Q?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):y(Date.prototype.toISOString)?
Q?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",E(aa,"Z")):E(aa,Q?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};jb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var Q="moment",aa="";this.isLocal()||(Q=0===this.utcOffset()?"moment.utc":"moment.parseZone",aa="Z");Q="["+Q+'("]';var qa=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(Q+qa+"-MM-DD[T]HH:mm:ss.SSS"+(aa+'[")]'))};
"undefined"!==typeof Symbol&&null!=Symbol["for"]&&(jb[Symbol["for"]("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});jb.toJSON=function(){return this.isValid()?this.toISOString():null};jb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};jb.unix=function(){return Math.floor(this.valueOf()/1E3)};jb.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};jb.creationData=function(){return{input:this._i,format:this._f,
locale:this._locale,isUTC:this._isUTC,strict:this._strict}};jb.eraName=function(){var Q,aa=this.localeData().eras();var qa=0;for(Q=aa.length;qa<Q;++qa){var za=this.clone().startOf("day").valueOf();if(aa[qa].since<=za&&za<=aa[qa].until||aa[qa].until<=za&&za<=aa[qa].since)return aa[qa].name}return""};jb.eraNarrow=function(){var Q,aa=this.localeData().eras();var qa=0;for(Q=aa.length;qa<Q;++qa){var za=this.clone().startOf("day").valueOf();if(aa[qa].since<=za&&za<=aa[qa].until||aa[qa].until<=za&&za<=aa[qa].since)return aa[qa].narrow}return""};
jb.eraAbbr=function(){var Q,aa=this.localeData().eras();var qa=0;for(Q=aa.length;qa<Q;++qa){var za=this.clone().startOf("day").valueOf();if(aa[qa].since<=za&&za<=aa[qa].until||aa[qa].until<=za&&za<=aa[qa].since)return aa[qa].abbr}return""};jb.eraYear=function(){var Q,aa=this.localeData().eras();var qa=0;for(Q=aa.length;qa<Q;++qa){var za=aa[qa].since<=aa[qa].until?1:-1;var Pa=this.clone().startOf("day").valueOf();if(aa[qa].since<=Pa&&Pa<=aa[qa].until||aa[qa].until<=Pa&&Pa<=aa[qa].since)return(this.year()-
D(aa[qa].since).year())*za+aa[qa].offset}return this.year()};jb.year=Tc;jb.isLeapYear=function(){return L(this.year())};jb.weekYear=function(Q){return Jc.call(this,Q,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};jb.isoWeekYear=function(Q){return Jc.call(this,Q,this.isoWeek(),this.isoWeekday(),1,4)};jb.quarter=jb.quarters=function(Q){return null==Q?Math.ceil((this.month()+1)/3):this.month(3*(Q-1)+this.month()%3)};jb.month=Ca;jb.daysInMonth=function(){return ia(this.year(),
this.month())};jb.week=jb.weeks=function(Q){var aa=this.localeData().week(this);return null==Q?aa:this.add(7*(Q-aa),"d")};jb.isoWeek=jb.isoWeeks=function(Q){var aa=ua(this,1,4).week;return null==Q?aa:this.add(7*(Q-aa),"d")};jb.weeksInYear=function(){var Q=this.localeData()._week;return ya(this.year(),Q.dow,Q.doy)};jb.weeksInWeekYear=function(){var Q=this.localeData()._week;return ya(this.weekYear(),Q.dow,Q.doy)};jb.isoWeeksInYear=function(){return ya(this.year(),1,4)};jb.isoWeeksInISOWeekYear=function(){return ya(this.isoWeekYear(),
1,4)};jb.date=ed;jb.day=jb.days=function(Q){if(!this.isValid())return null!=Q?this:NaN;var aa=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=Q){var qa=this.localeData();"string"===typeof Q&&(isNaN(Q)?(Q=qa.weekdaysParse(Q),Q="number"===typeof Q?Q:null):Q=parseInt(Q,10));return this.add(Q-aa,"d")}return aa};jb.weekday=function(Q){if(!this.isValid())return null!=Q?this:NaN;var aa=(this.day()+7-this.localeData()._week.dow)%7;return null==Q?aa:this.add(Q-aa,"d")};jb.isoWeekday=function(Q){if(!this.isValid())return null!=
Q?this:NaN;if(null!=Q){var aa=this.localeData();Q="string"===typeof Q?aa.weekdaysParse(Q)%7||7:isNaN(Q)?null:Q;return this.day(this.day()%7?Q:Q-7)}return this.day()||7};jb.dayOfYear=function(Q){var aa=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==Q?aa:this.add(Q-aa,"d")};jb.hour=jb.hours=ad;jb.minute=jb.minutes=fd;jb.second=jb.seconds=sd;jb.millisecond=jb.milliseconds=ld;jb.utcOffset=function(Q,aa,qa){var za=this._offset||0,Pa;if(!this.isValid())return null!=
Q?this:NaN;if(null!=Q){if("string"===typeof Q){if(Q=tb(Xc,Q),null===Q)return this}else 16>Math.abs(Q)&&!qa&&(Q*=60);!this._isUTC&&aa&&(Pa=-Math.round(this._d.getTimezoneOffset()));this._offset=Q;this._isUTC=!0;null!=Pa&&this.add(Pa,"m");za!==Q&&(!aa||this._changeInProgress?Nb(this,nb(Q-za,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,D.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?za:-Math.round(this._d.getTimezoneOffset())};jb.utc=function(Q){return this.utcOffset(0,
Q)};jb.local=function(Q){this._isUTC&&(this.utcOffset(0,Q),this._isUTC=!1,Q&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};jb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var Q=tb(Mc,this._i);null!=Q?this.utcOffset(Q):this.utcOffset(0,!0)}return this};jb.hasAlignedHourOffset=function(Q){if(!this.isValid())return!1;Q=Q?Ta(Q).utcOffset():0;return 0===(this.utcOffset()-Q)%60};jb.isDST=function(){return this.utcOffset()>
this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};jb.isLocal=function(){return this.isValid()?!this._isUTC:!1};jb.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};jb.isUtc=Gb;jb.isUTC=Gb;jb.zoneAbbr=function(){return this._isUTC?"UTC":""};jb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};jb.dates=z("dates accessor is deprecated. Use date instead.",ed);jb.months=z("months accessor is deprecated. Use month instead",Ca);jb.years=
z("years accessor is deprecated. Use year instead",Tc);jb.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(Q,aa){return null!=Q?("string"!==typeof Q&&(Q=-Q),this.utcOffset(Q,aa),this):-this.utcOffset()});jb.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!n(this._isDSTShifted))return this._isDSTShifted;var Q={};d(Q,this);Q=La(Q);if(Q._a){var aa=
Q._isUTC?l(Q._a):Ta(Q._a);var qa;if(qa=this.isValid()){Q=Q._a;aa=aa.toArray();qa=Math.min(Q.length,aa.length);var za=Math.abs(Q.length-aa.length),Pa=0,fb;for(fb=0;fb<qa;fb++)N(Q[fb])!==N(aa[fb])&&Pa++;qa=0<Pa+za}this._isDSTShifted=qa}else this._isDSTShifted=!1;return this._isDSTShifted});var Bb=F.prototype;Bb.calendar=function(Q,aa,qa){Q=this._calendar[Q]||this._calendar.sameElse;return y(Q)?Q.call(aa,qa):Q};Bb.longDateFormat=function(Q){var aa=this._longDateFormat[Q],qa=this._longDateFormat[Q.toUpperCase()];
if(aa||!qa)return aa;this._longDateFormat[Q]=qa.match(Oa).map(function(za){return"MMMM"===za||"MM"===za||"DD"===za||"dddd"===za?za.slice(1):za}).join("");return this._longDateFormat[Q]};Bb.invalidDate=function(){return this._invalidDate};Bb.ordinal=function(Q){return this._ordinal.replace("%d",Q)};Bb.preparse=Kc;Bb.postformat=Kc;Bb.relativeTime=function(Q,aa,qa,za){var Pa=this._relativeTime[qa];return y(Pa)?Pa(Q,aa,qa,za):Pa.replace(/%d/i,Q)};Bb.pastFuture=function(Q,aa){var qa=this._relativeTime[0<
Q?"future":"past"];return y(qa)?qa(aa):qa.replace(/%s/i,aa)};Bb.set=function(Q){var aa;for(aa in Q)if(c(Q,aa)){var qa=Q[aa];y(qa)?this[aa]=qa:this["_"+aa]=qa}this._config=Q;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Bb.eras=function(Q,aa){var qa,za=this._eras||W("en")._eras;var Pa=0;for(qa=za.length;Pa<qa;++Pa){switch(typeof za[Pa].since){case "string":var fb=D(za[Pa].since).startOf("day");za[Pa].since=fb.valueOf()}switch(typeof za[Pa].until){case "undefined":za[Pa].until=
Infinity;break;case "string":fb=D(za[Pa].until).startOf("day").valueOf(),za[Pa].until=fb.valueOf()}}return za};Bb.erasParse=function(Q,aa,qa){var za,Pa=this.eras();Q=Q.toUpperCase();var fb=0;for(za=Pa.length;fb<za;++fb){var hb=Pa[fb].name.toUpperCase();var rb=Pa[fb].abbr.toUpperCase();var wb=Pa[fb].narrow.toUpperCase();if(qa)switch(aa){case "N":case "NN":case "NNN":if(rb===Q)return Pa[fb];break;case "NNNN":if(hb===Q)return Pa[fb];break;case "NNNNN":if(wb===Q)return Pa[fb]}else if(0<=[hb,rb,wb].indexOf(Q))return Pa[fb]}};
Bb.erasConvertYear=function(Q,aa){var qa=Q.since<=Q.until?1:-1;return void 0===aa?D(Q.since).year():D(Q.since).year()+(aa-Q.offset)*qa};Bb.erasAbbrRegex=function(Q){c(this,"_erasAbbrRegex")||wc.call(this);return Q?this._erasAbbrRegex:this._erasRegex};Bb.erasNameRegex=function(Q){c(this,"_erasNameRegex")||wc.call(this);return Q?this._erasNameRegex:this._erasRegex};Bb.erasNarrowRegex=function(Q){c(this,"_erasNarrowRegex")||wc.call(this);return Q?this._erasNarrowRegex:this._erasRegex};Bb.months=function(Q,
aa){return Q?B(this._months)?this._months[Q.month()]:this._months[(this._months.isFormat||kd).test(aa)?"format":"standalone"][Q.month()]:B(this._months)?this._months:this._months.standalone};Bb.monthsShort=function(Q,aa){return Q?B(this._monthsShort)?this._monthsShort[Q.month()]:this._monthsShort[kd.test(aa)?"format":"standalone"][Q.month()]:B(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Bb.monthsParse=function(Q,aa,qa){var za;if(this._monthsParseExact){a:{Q=Q.toLocaleLowerCase();
if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],za=0;12>za;++za){var Pa=l([2E3,za]);this._shortMonthsParse[za]=this.monthsShort(Pa,"").toLocaleLowerCase();this._longMonthsParse[za]=this.months(Pa,"").toLocaleLowerCase()}if(qa)aa="MMM"===aa?Mb.call(this._shortMonthsParse,Q):Mb.call(this._longMonthsParse,Q);else if("MMM"===aa){aa=Mb.call(this._shortMonthsParse,Q);if(-1!==aa)break a;aa=Mb.call(this._longMonthsParse,Q)}else{aa=Mb.call(this._longMonthsParse,
Q);if(-1!==aa)break a;aa=Mb.call(this._shortMonthsParse,Q)}aa=-1!==aa?aa:null}return aa}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(za=0;12>za;za++)if(Pa=l([2E3,za]),qa&&!this._longMonthsParse[za]&&(this._longMonthsParse[za]=new RegExp("^"+this.months(Pa,"").replace(".","")+"$","i"),this._shortMonthsParse[za]=new RegExp("^"+this.monthsShort(Pa,"").replace(".","")+"$","i")),qa||this._monthsParse[za]||(Pa="^"+this.months(Pa,"")+"|^"+this.monthsShort(Pa,
""),this._monthsParse[za]=new RegExp(Pa.replace(".",""),"i")),qa&&"MMMM"===aa&&this._longMonthsParse[za].test(Q)||qa&&"MMM"===aa&&this._shortMonthsParse[za].test(Q)||!qa&&this._monthsParse[za].test(Q))return za};Bb.monthsRegex=function(Q){if(this._monthsParseExact)return c(this,"_monthsRegex")||Fa.call(this),Q?this._monthsStrictRegex:this._monthsRegex;c(this,"_monthsRegex")||(this._monthsRegex=Nc);return this._monthsStrictRegex&&Q?this._monthsStrictRegex:this._monthsRegex};Bb.monthsShortRegex=function(Q){if(this._monthsParseExact)return c(this,
"_monthsRegex")||Fa.call(this),Q?this._monthsShortStrictRegex:this._monthsShortRegex;c(this,"_monthsShortRegex")||(this._monthsShortRegex=Nc);return this._monthsShortStrictRegex&&Q?this._monthsShortStrictRegex:this._monthsShortRegex};Bb.week=function(Q){return ua(Q,this._week.dow,this._week.doy).week};Bb.firstDayOfYear=function(){return this._week.doy};Bb.firstDayOfWeek=function(){return this._week.dow};Bb.weekdays=function(Q,aa){var qa=B(this._weekdays)?this._weekdays:this._weekdays[Q&&!0!==Q&&this._weekdays.isFormat.test(aa)?
"format":"standalone"];return!0===Q?ta(qa,this._week.dow):Q?qa[Q.day()]:qa};Bb.weekdaysMin=function(Q){return!0===Q?ta(this._weekdaysMin,this._week.dow):Q?this._weekdaysMin[Q.day()]:this._weekdaysMin};Bb.weekdaysShort=function(Q){return!0===Q?ta(this._weekdaysShort,this._week.dow):Q?this._weekdaysShort[Q.day()]:this._weekdaysShort};Bb.weekdaysParse=function(Q,aa,qa){var za;if(this._weekdaysParseExact)return pa.call(this,Q,aa,qa);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=
[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(za=0;7>za;za++){var Pa=l([2E3,1]).day(za);qa&&!this._fullWeekdaysParse[za]&&(this._fullWeekdaysParse[za]=new RegExp("^"+this.weekdays(Pa,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[za]=new RegExp("^"+this.weekdaysShort(Pa,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[za]=new RegExp("^"+this.weekdaysMin(Pa,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[za]||(Pa="^"+this.weekdays(Pa,"")+"|^"+this.weekdaysShort(Pa,
"")+"|^"+this.weekdaysMin(Pa,""),this._weekdaysParse[za]=new RegExp(Pa.replace(".",""),"i"));if(qa&&"dddd"===aa&&this._fullWeekdaysParse[za].test(Q)||qa&&"ddd"===aa&&this._shortWeekdaysParse[za].test(Q)||qa&&"dd"===aa&&this._minWeekdaysParse[za].test(Q)||!qa&&this._weekdaysParse[za].test(Q))return za}};Bb.weekdaysRegex=function(Q){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||Aa.call(this),Q?this._weekdaysStrictRegex:this._weekdaysRegex;c(this,"_weekdaysRegex")||(this._weekdaysRegex=
Nc);return this._weekdaysStrictRegex&&Q?this._weekdaysStrictRegex:this._weekdaysRegex};Bb.weekdaysShortRegex=function(Q){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||Aa.call(this),Q?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Nc);return this._weekdaysShortStrictRegex&&Q?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Bb.weekdaysMinRegex=function(Q){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||
Aa.call(this),Q?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Nc);return this._weekdaysMinStrictRegex&&Q?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Bb.isPM=function(Q){return"p"===(Q+"").toLowerCase().charAt(0)};Bb.meridiem=function(Q,aa,qa){return 11<Q?qa?"pm":"PM":qa?"am":"AM"};Ja("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",
narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(Q){var aa=Q%10;aa=1===N(Q%100/10)?"th":1===aa?"st":2===aa?"nd":3===aa?"rd":"th";return Q+aa}});D.lang=z("moment.lang is deprecated. Use moment.locale instead.",Ja);D.langData=z("moment.langData is deprecated. Use moment.localeData instead.",W);var qc=Math.abs,td=ec("ms"),ud=ec("s"),vd=ec("m"),wd=ec("h"),xd=ec("d"),yd=ec("w"),zd=ec("M"),Ad=ec("Q"),Bd=ec("y"),md=Yb("milliseconds"),Cd=Yb("seconds"),Dd=Yb("minutes"),
Ed=Yb("hours"),Fd=Yb("days"),Gd=Yb("months"),Hd=Yb("years"),rc=Math.round,Fc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},$c=Math.abs,zb=db.prototype;zb.isValid=function(){return this._isValid};zb.abs=function(){var Q=this._data;this._milliseconds=qc(this._milliseconds);this._days=qc(this._days);this._months=qc(this._months);Q.milliseconds=qc(Q.milliseconds);Q.seconds=qc(Q.seconds);Q.minutes=qc(Q.minutes);Q.hours=qc(Q.hours);Q.months=qc(Q.months);Q.years=qc(Q.years);return this};zb.add=function(Q,aa){return dc(this,
Q,aa,1)};zb.subtract=function(Q,aa){return dc(this,Q,aa,-1)};zb.as=function(Q){if(!this.isValid())return NaN;var aa=this._milliseconds;Q=K(Q);if("month"===Q||"quarter"===Q||"year"===Q){var qa=this._days+aa/864E5;qa=this._months+4800*qa/146097;switch(Q){case "month":return qa;case "quarter":return qa/3;case "year":return qa/12}}else switch(qa=this._days+Math.round(146097*this._months/4800),Q){case "week":return qa/7+aa/6048E5;case "day":return qa+aa/864E5;case "hour":return 24*qa+aa/36E5;case "minute":return 1440*
qa+aa/6E4;case "second":return 86400*qa+aa/1E3;case "millisecond":return Math.floor(864E5*qa)+aa;default:throw Error("Unknown unit "+Q);}};zb.asMilliseconds=td;zb.asSeconds=ud;zb.asMinutes=vd;zb.asHours=wd;zb.asDays=xd;zb.asWeeks=yd;zb.asMonths=zd;zb.asQuarters=Ad;zb.asYears=Bd;zb.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*N(this._months/12):NaN};zb._bubble=function(){var Q=this._milliseconds,aa=this._days,qa=this._months,za=this._data;
0<=Q&&0<=aa&&0<=qa||0>=Q&&0>=aa&&0>=qa||(Q+=864E5*Rc(146097*qa/4800+aa),qa=aa=0);za.milliseconds=Q%1E3;Q=M(Q/1E3);za.seconds=Q%60;Q=M(Q/60);za.minutes=Q%60;Q=M(Q/60);za.hours=Q%24;aa+=M(Q/24);Q=M(4800*aa/146097);qa+=Q;aa-=Rc(146097*Q/4800);Q=M(qa/12);za.days=aa;za.months=qa%12;za.years=Q;return this};zb.clone=function(){return nb(this)};zb.get=function(Q){Q=K(Q);return this.isValid()?this[Q+"s"]():NaN};zb.milliseconds=md;zb.seconds=Cd;zb.minutes=Dd;zb.hours=Ed;zb.days=Fd;zb.weeks=function(){return M(this.days()/
7)};zb.months=Gd;zb.years=Hd;zb.humanize=function(Q,aa){if(!this.isValid())return this.localeData().invalidDate();var qa=!1,za=Fc;"object"===typeof Q&&(aa=Q,Q=!1);"boolean"===typeof Q&&(qa=Q);"object"===typeof aa&&(za=Object.assign({},Fc,aa),null!=aa.s&&null==aa.ss&&(za.ss=aa.s-1));var Pa=this.localeData();var fb=!qa;var hb=nb(this).abs(),rb=rc(hb.as("s")),wb=rc(hb.as("m")),vb=rc(hb.as("h")),Lb=rc(hb.as("d")),tc=rc(hb.as("M")),Dc=rc(hb.as("w"));hb=rc(hb.as("y"));rb=rb<=za.ss&&["s",rb]||rb<za.s&&["ss",
rb]||1>=wb&&["m"]||wb<za.m&&["mm",wb]||1>=vb&&["h"]||vb<za.h&&["hh",vb]||1>=Lb&&["d"]||Lb<za.d&&["dd",Lb];null!=za.w&&(rb=rb||1>=Dc&&["w"]||Dc<za.w&&["ww",Dc]);rb=rb||1>=tc&&["M"]||tc<za.M&&["MM",tc]||1>=hb&&["y"]||["yy",hb];rb[2]=fb;rb[3]=0<+this;rb[4]=Pa;fb=Sc.apply(null,rb);qa&&(fb=Pa.pastFuture(+this,fb));return Pa.postformat(fb)};zb.toISOString=$b;zb.toString=$b;zb.toJSON=$b;zb.locale=bc;zb.localeData=ic;zb.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
$b);zb.lang=dd;u("X",0,0,"unix");u("x",0,0,"valueOf");ha("x",gc);ha("X",/[+-]?\d+(\.\d{1,3})?/);P("X",function(Q,aa,qa){qa._d=new Date(1E3*parseFloat(Q))});P("x",function(Q,aa,qa){qa._d=new Date(N(Q))});D.version="2.29.3";var Bc=Ta;D.fn=jb;D.min=function(){var Q=[].slice.call(arguments,0);return eb("isBefore",Q)};D.max=function(){var Q=[].slice.call(arguments,0);return eb("isAfter",Q)};D.now=function(){return Date.now?Date.now():+new Date};D.utc=l;D.unix=function(Q){return Ta(1E3*Q)};D.months=function(Q,
aa){return kc(Q,aa,"months")};D.isDate=f;D.locale=Ja;D.invalid=e;D.duration=nb;D.isMoment=t;D.weekdays=function(Q,aa,qa){return cc(Q,aa,qa,"weekdays")};D.parseZone=function(){return Ta.apply(null,arguments).parseZone()};D.localeData=W;D.isDuration=gb;D.monthsShort=function(Q,aa){return kc(Q,aa,"monthsShort")};D.weekdaysMin=function(Q,aa,qa){return cc(Q,aa,qa,"weekdaysMin")};D.defineLocale=Da;D.updateLocale=function(Q,aa){if(null!=aa){var qa=ac;if(null!=Hb[Q]&&null!=Hb[Q].parentLocale)Hb[Q].set(C(Hb[Q]._config,
aa));else{var za=Ia(Q);null!=za&&(qa=za._config);aa=C(qa,aa);null==za&&(aa.abbr=Q);za=new F(aa);za.parentLocale=Hb[Q];Hb[Q]=za}Ja(Q)}else null!=Hb[Q]&&(null!=Hb[Q].parentLocale?(Hb[Q]=Hb[Q].parentLocale,Q===Ja()&&Ja(Q)):null!=Hb[Q]&&delete Hb[Q]);return Hb[Q]};D.locales=function(){return Ka(Hb)};D.weekdaysShort=function(Q,aa,qa){return cc(Q,aa,qa,"weekdaysShort")};D.normalizeUnits=K;D.relativeTimeRounding=function(Q){return void 0===Q?rc:"function"===typeof Q?(rc=Q,!0):!1};D.relativeTimeThreshold=
function(Q,aa){if(void 0===Fc[Q])return!1;if(void 0===aa)return Fc[Q];Fc[Q]=aa;"s"===Q&&(Fc.ss=aa-1);return!0};D.calendarFormat=function(Q,aa){var qa=Q.diff(aa,"days",!0);return-6>qa?"sameElse":-1>qa?"lastWeek":0>qa?"lastDay":1>qa?"sameDay":2>qa?"nextDay":7>qa?"nextWeek":"sameElse"};D.prototype=jb;D.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",
WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return D})},"arcgisonline/pages/utils/queryHandler":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.queryToObject=B.objectToQuery=void 0;B.objectToQuery=function(a){var c=new URLSearchParams,k=function(f,m){void 0!==m&&null!==m&&(Array.isArray(m)?0<m.length&&m.forEach(function(q){return c.append(f,q)}):c.append(f,String(m)))},n=0;for(a=Object.entries(a);n<a.length;n++){var r=a[n];k(r[0],r[1])}return c.toString()};
B.queryToObject=function(a,c){var k=new URLSearchParams(a);k=Array.from(k.entries());if(c){for(var n={},r=0;r<k.length;r++){var f=k[r],m=f[0];f=f[1];var q=n[m];Array.isArray(q)?q.push(f):n[m]="string"===typeof n[m]?[n[m],f]:f}return n}n={};for(r=0;r<k.length;r++)f=k[r],m=f[0],f=f[1],n[m]=n[m]?n[m]+(","+f):f;return n}})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./date ./number ./icons dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);return function(){function e(){}e.timeFromPresent=function(d){return g["default"].utc(d).fromNow()};e.fullDate=function(d){return d&&-1<d?n["default"].format(new Date(d),"day-short-month-year"):""};e.timeOnly=function(d){return d&&-1<d?
n["default"].format(new Date(d),"short-time"):""};e.dayOfWeek=function(d){return d&&-1<d?n["default"].format(new Date(d),"weekday"):""};e.fullDateEnhanced=function(d){var h=g["default"](new Date).diff(g["default"](d),"days"),t=g["default"](new Date).isSame(d,"day");return t?m["default"].filters.today:!t&&2>h?m["default"].myOrganization.membersTab.yesterday:15>h?b["default"].substitute(m["default"].myOrganization.membersTab.daysAgo,{num:h}):this.fullDate(d)};e.completeDate=function(d){return d&&-1<
d?n["default"].format(new Date(d),"long-date-long-time"):""};e.capitalize=function(d){return d.charAt(0).toUpperCase()+d.slice(1)};e.shortenNumber=function(d){return 1E6<=d?r["default"].format(Math.round(d/1E5)/10)+"M":1E3<=d?r["default"].format(Math.round(d/100)/10)+"K":""+d};e.empty=function(d){return null!==d&&void 0!==d?d:""};e.hide=function(d){return d?"":"hide"};e.show=function(d){return d?"hide":""};e.firstChar=function(d){var h;return null!==(h=null===d||void 0===d?void 0:d.charAt(0).toUpperCase())&&
void 0!==h?h:""};e.stripHTML=function(d){var h,t;d=(new DOMParser).parseFromString(d,"text/html");return null!==(t=d.body&&(null!==(h=d.body.textContent)&&void 0!==h?h:d.body.innerText))&&void 0!==t?t:""};e.formatCategoryChip=function(d){var h=d;"/"===(null===d||void 0===d?void 0:d[0])&&(h=d.slice(1));return h=h.split("/").join(" / ")};e.lowerCase=function(d){var h;return null!==(h=(null===d||void 0===d?void 0:d.toLowerCase)&&d.toLowerCase())&&void 0!==h?h:""};e.hyphenate=function(d){return(d||"").replace(/\s+/g,
"-")};e.formatDisplayName=function(d,h,t){var z=(null===d||void 0===d?void 0:d.portal)&&d.portal.portalUser&&d.portal.portalUser.userRole;z=d&&(d.isAdminView?z&&z.canUpdateOrgItems():d.canUpdate);var v="Data Store"===(null===d||void 0===d?void 0:d.type);d&&z&&h&&!d.isUtilityNetwork&&(d.isHostedService?t+=" ("+(d.isDataView?m["default"].viewsWidget.hostedView:"Feature Service"===d.type?m["default"].viewsWidget.hostedData:m["default"].viewsWidget.hostedService)+")":d.isLocatorView?t+=" ("+m["default"].viewsWidget.locatorView+
")":d.isPhotoLocations&&(t+=" ("+m["default"].viewsWidget.photoLocations+")"));v&&(t=c["default"].formatDataStoreItem(t,d.typeKeywords));return t};e.formatNumViews=function(d){return r["default"].format(null!==d&&void 0!==d?d:0)};e.formatViewsLabel=function(d){d="file"!==d.classification||k["default"].includes(d.types,"is-views")||k["default"].includes(d.types,"is-pdf")?"viewsColon":"downloadsLbl";return m["default"].viewsWidget[d]};e.formatOwnerText=function(d,h,t){var z,v,y;if(h)return null!==(v=
null===(z=d.verified)||void 0===z?void 0:z.name)&&void 0!==v?v:d.owner;h=(null===(y=d.verified)||void 0===y?void 0:y.name)&&d.verified.url;y=b["default"].substitute(q["default"],{item:d,i18n:m["default"]});return h?(d=b["default"].substitute(l["default"],{item:d,i18n:m["default"]}),t?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'+d.replace("js-owner-section","")+' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e'+m["default"].itemProperties.managedByOwner+" "+y.replace("js-owner-section",
"")+"\x3c/div\x3e":d):y};e.getAccess=function(d){return m["default"].itemSharingLabel[d]};e.getAccessIcon=function(d){return{"private":f["default"].lock["16"],shared:f["default"].users["16"],org:f["default"].organization["16"],"public":f["default"].globe["16"]}[d]};e.getGroupAccess=function(d){return{"public":m["default"].groupsPage.everyone,"private":m["default"].groupsPage.groupMembers,org:m["default"].groupsPage.organization}[d]};e.getGroupAccessIcon=function(d){return{"public":f["default"].inline.globe["16"],
"private":f["default"].inline.lock["16"],org:f["default"].inline.organization["16"]}[d]};return e}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./utils/arrays ./utils/number ./utils/strings ./utils/clone ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/Dialog dojo/_base/kernel dojo/dom-attr dojo/Deferred dojo/on dojo/hash dojo/string dojo/query dojo/sniff dojo/keys dojo/promise/all esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline ./utils/queryHandler".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importDefault(F);
x=a.__importDefault(x);u=a.__importDefault(u);w=a.__importDefault(w);A=a.__importDefault(A);E=a.__importDefault(E);G=a.__importDefault(G);H=a.__importDefault(H);K=a.__importStar(K);return function(){function I(){}I.editorDefaults=function(J){return{id:J,"aria-label":J,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","|","createEsriLink","unlink","insertEsriImage","removeFormat",
"|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize","class":"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: '"+("vi"===(c["default"].userInfo&&c["default"].userInfo.culture)?"SST Vietnamese":"Avenir Next")+"', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};I.tagDefaults=function(J){return{id:J,minWidth:"100%",maxWidth:"100%"}};I.getQueryParams=function(){return K.queryToObject(window.location.search.slice(1))};
I.setQueryParams=function(J,L){I[L?"pushCurrentLocation":"replaceCurrentLocation"](window.location.pathname+"?"+K.objectToQuery(J)+window.location.hash)};I.updateQueryParams=function(J,L){I.setQueryParams(a.__assign(a.__assign({},I.getQueryParams()),J),L)};I.removeQueryParams=function(J,L){var M=I.getQueryParams();J.forEach(function(N){return delete M[N]});I.setQueryParams(M,L)};I.clearAllQueryParams=function(){I.setQueryParams({})};I.replaceCurrentLocation=function(J){history&&history.replaceState&&
history.replaceState({},document.title,J)};I.pushCurrentLocation=function(J){null===history||void 0===history?void 0:history.pushState({},document.title,J)};I.applyCSSClassToStringMatch=function(J,L,M){var N=L.indexOf(J),O=L.slice(0,N),Y=L.slice(N,N+J.length),ba=L.slice(N+J.length);return-1<N?0===N?(J=L.slice(0,J.length),'\x3cspan class\x3d"'+M+'"\x3e'+J+"\x3c/span\x3e"+ba):O+'\x3cspan class\x3d"'+M+'"\x3e'+Y+"\x3c/span\x3e"+ba:L};I.isEmptyObject=function(J){for(var L in J)if(Object.prototype.hasOwnProperty.call(J,
L))return!1;return!0};I.isJson=function(J){try{JSON.parse(J)}catch(L){return!1}return!0};I.extentToString=function(J){return J=J instanceof Array&&2===J.length&&2===J[0].length&&2===J[1].length?[J[0].join(","),J[1].join(",")].join():J&&J+""||""};I.getClosestValue=function(J,L,M){return M-J>=L-M?L:J};I.findClosestValue=function(J,L){if(L<=J[0])return J[0];if(L>=J[J.length-1])return J[J.length-1];for(var M=0,N=J.length,O=0;M<N;){O=Math.floor((M+N)/2);if(J[O]===L)break;if(L<J[O]){if(0<O&&L>J[O-1])return I.getClosestValue(J[O-
1],J[O],L);N=O}else{if(O<J.length-1&&L<J[O+1])return I.getClosestValue(J[O],J[O+1],L);M=O+1}}return J[O]};I.isFavorite=function(J){var L=J.portal,M=L.getPortalUser();M=M&&M.favGroupId;var N=new d["default"];x["default"].isDefined(J.isFavorite)?N.resolve(J.isFavorite):M?(J.isFavorite=!1,L.queryItems('(group:"'+M+'" AND id:"'+J.id+'")',!0).then(function(O){J.isFavorite=0<(null===O||void 0===O?void 0:O.total);N.resolve(J.isFavorite)},function(){N.resolve(!1)})):(J.isFavorite=!1,N.resolve(!1));return N};
I.isConfigurableApplication=function(J){var L,M=new d["default"],N=J.owner,O=J.itemData||{},Y=-1<(null===(L=J.itemControl)||void 0===L?void 0:L.indexOf("admin"));L=J.typeKeywords||[];var ba=L.some(function(ha){return ha.match(/(sourceId#).*/gi)});x["default"].isDefined(J.isConfigurableApp)?M.resolve(J.isConfigurableApp):J.portal.isPortal&&!J.isOwner&&Y&&-1<N.indexOf("esri_")?(J.isConfigurableApp=!1,M.resolve(!1)):J.type&&(0===J.type.indexOf("Hub")&&!["Hub Initiative Template","Hub Event","Hub Project"].includes(J.type)||
"Site Application"===J.type)?(J.isConfigurableApp=J.canUpdate,M.resolve(J.isConfigurableApp)):J.canUpdate&&"Web Mapping Application"===J.type?(J.isConfigurableApp=!1,n["default"].includes(L,"WABTemplate")?(J.isConfigurableApp=!1,M.resolve(!1)):n["default"].includes(L,"selfConfigured")?(J.isConfigurableApp=O&&(O.source||q["default"].isHostedTemplateItem(J.url)||!ba),M.resolve(J.isConfigurableApp)):n["default"].includes(L,"configurableApp")?(J.isConfigurableApp=!0,M.resolve(J.isConfigurableApp)):(null===
O||void 0===O?0:O.source)?q["default"].request({url:J.portal.url+"content/items/"+O.source+"/data"}).then(function(ha){J.isConfigurableApp=!(null===ha||void 0===ha||!ha.configurationSettings);M.resolve(J.isConfigurableApp)},function(){J.isConfigurableApp=!1;M.resolve(J.isConfigurableApp)}):M.resolve(!1)):(J.isConfigurableApp=!1,M.resolve(!1));return M};I.isFilePublishableByUser=function(J){var L,M,N,O=new d["default"],Y=J.portal,ba=Y.getPortalUser(),ha=null===ba||void 0===ba?void 0:ba.userRole,U=
Y.supportsHostedServices;ba=x["default"].isDefined(null===(M=null===(L=Y.helperServices)||void 0===L?void 0:L.rasterAnalytics)||void 0===M?void 0:M.url);L=ha&&ha.canCreateItem();M=(L=U&&L&&J.isAdmin)&&ha.canPublishTiles();U=L&&ha.canPublishFeatures();ha=L&&ha.canPublishScenes();var X=(null===(N=J.resultData)||void 0===N?void 0:N.length)||null;N=Y.isPortal&&L&&ba;Y=!Y.isPortal||Y.supportsSceneServices;Y=x["default"].isDefined(J.canPublishFile)?J.canPublishFile:U&&(n["default"].includes(J.types,"is-feature")||
n["default"].includes(J.types,"is-featureCollection")&&!X&&!J.isMarkup)||M&&n["default"].includes(J.types,"is-tile")||ha&&Y&&n["default"].includes(J.types,"is-scene-package")||M&&n["default"].includes(J.types,"is-vector-tile")||N&&n["default"].includes(J.types,"is-image-collection")||L&&n["default"].includes(J.typeKeywords,"Photo locations")||L&&J.typeKeywords.includes("GeoPackage")||L&&n["default"].includes(J.types,"is-notebook")?!0:!1;J.canPublishFile=Y;O.resolve(Y);return O};I.isServicePublishableByUser=
function(J,L){var M=new d["default"],N=J.portal.getPortalUser();N=(N=null===N||void 0===N?void 0:N.userRole)&&N.canCreateItem();var O=J.serviceInfo||{},Y=J.isSDS,ba=J.isTable&&!L,ha=J.isLocationTrackingService;N=!(J.isMultiServicesView||O.isMultiServicesView||!J.isHostedService||"Feature Service"!==J.type||!N||!Y||ba||ha);J.canPublish=N;M.resolve(N);return M};I.canPublishTileServiceFromFeatureService=function(J){var L=new d["default"],M=J.portal.getPortalUser();M=null===M||void 0===M?void 0:M.userRole;
var N=I.isServicePublishableByUser(J)&&J.isAdmin&&M.canPublishTiles(),O=n["default"].includes(J.typeKeywords,"Spatiotemporal"),Y=J.typeKeywords.includes("Hosted Service"),ba=(J.resultData||[]).filter(function(U){return"Map Service"===U.type});M=J.featureLayers;var ha=J.isHostedService&&(M||[]).every(function(U){return I.canUseForPublish(J,U,!0)});I.isServicePublishableByUser(J).then(function(U){U=!(!(U&&N&&ha&&!O&&Y)||ba&&ba.length);J.canPublishTiles=U;L.resolve(U)});return L};I.canPublishVectorTileServiceFromFeatureService=
function(J){var L=new d["default"],M=null===c["default"]||void 0===c["default"]?void 0:c["default"].publishVectorTilesFromFeaturesEnabled,N=(J.resultData||[]).filter(function(Y){return"Vector Tile Service"===Y.type}),O=J.isHostedService&&(J.featureLayers||[]).every(function(Y){return I.canUseForPublish(J,Y,!0)});I.isServicePublishableByUser(J).then(function(Y){Y=!(!(M&&O&&Y)||N&&N.length);J.canPublishVectorTiles=Y;L.resolve(Y)});return L};I.canPublishWFSServiceFromFeatureService=function(J){var L=
new d["default"],M=J.portal,N=M.getPortalUser();N=null===N||void 0===N?void 0:N.userRole;var O=n["default"].includes(J.typeKeywords,"Spatiotemporal"),Y=I.isServicePublishableByUser(J),ba=Y&&(!M.isPortal||M.isPortal&&!O),ha=Y&&J.isAdmin&&N.canPublishFeatures(),U=(J.resultData||[]).filter(function(X){return"WFS"===X.type});I.isServicePublishableByUser(J).then(function(X){X=!(!(X&&ba&&ha)||!M.isPortal&&O||U&&U.length);J.canPublishWFS=X;L.resolve(X)});return L};I.canPublishOGCFeatureServerFromFeatureService=
function(J){var L=new d["default"],M=J.portal.isPortal,N=J.portal.getPortalUser();N=null===N||void 0===N?void 0:N.userRole;var O=I.isServicePublishableByUser(J)&&!M&&J.isAdmin&&N.canPublishFeatures(),Y=(J.resultData||[]).filter(function(ha){return"OGCFeatureServer"===ha.type}),ba=n["default"].includes(J.typeKeywords,"Spatiotemporal");I.isServicePublishableByUser(J).then(function(ha){ha=!(!ha||!O||ba||Y&&Y.length);J.canPublishOGCFeatures=ha;L.resolve(ha)});return L};I.canPublishSceneServiceFromFeatureService=
function(J){var L=this,M=new d["default"],N=J.portal,O=N.getPortalUser();O=null===O||void 0===O?void 0:O.userRole;var Y=I.isServicePublishableByUser(J),ba=N&&!N.isPortal&&Y&&J.isAdmin&&O.canPublishScenes();N=J.featureLayers||[];var ha=J.isHostedService&&N.every(function(ia){return L.canUseForPublish(J,ia,!0,"scene")}),U=J.tables||[],X=N.every(function(ia){return"esriGeometryPoint"===(null===ia||void 0===ia?void 0:ia.geometryType)}),Z=N.every(function(ia){return"esriGeometryMultiPatch"===(null===ia||
void 0===ia?void 0:ia.geometryType)}),P=(J.resultData||[]).filter(function(ia){return"Scene Service"===ia.type}),da=-1<J.typeKeywords.indexOf("View Service")||J.isViewService;I.isServicePublishableByUser(J).then(function(ia){ia=!(!(ia&&ba&&ha&&(X||Z))||P&&P.length||da||U.length||J.hasGeocodeReviewTable);J.canPublishScenes=ia;M.resolve(ia)});return M};I.canPublishViewServiceFromFeatureService=function(J){var L=new d["default"],M=J.portal||{},N=M.getPortalUser();N=null===N||void 0===N?void 0:N.userRole;
var O=J.isAdmin&&N.canPublishFeatures(),Y=I.isMultipatchFeatureService(J),ba=J.isLocationTrackingService&&!M.isPortal,ha=n["default"].includes(J.typeKeywords,"View Service");I.isServicePublishableByUser(J,!0).then(function(U){U=Y||!U||!O||ha||ba?!1:!0;J.canPublishView=U;L.resolve(U)});return L};I.canPublishImageServiceAsTiled=function(J){var L,M=new d["default"],N=I.canPublishFromImageService(J),O=null===(L=J.portal.getPortalUser())||void 0===L?void 0:L.userRole.canPublishTiledImagery();J.canPublishImageServiceAsTiled=
N&&O&&!I.isTiledOnlyImageryService(J.serviceInfo);M.resolve(J.canPublishImageServiceAsTiled);return M};I.canPublishImageServiceAsDynamic=function(J){var L,M=new d["default"],N=I.canPublishFromImageService(J),O=null===(L=J.portal.getPortalUser())||void 0===L?void 0:L.userRole.canPublishDynamicImagery();J.canPublishImageServiceAsDynamic=N&&O&&I.isTiledOnlyImageryService(J.serviceInfo);M.resolve(J.canPublishImageServiceAsDynamic);return M};I.canExportImagery=function(J){var L,M=new d["default"],N=I.canPublishFromImageService(J),
O=null===(L=J.portal.getPortalUser())||void 0===L?void 0:L.userRole.canPublishTiledImagery();J.canExportImagery=N&&O&&I.isTiledOnlyImageryService(J.serviceInfo);M.resolve(J.canExportImagery);return M};I.canEnableAttachments=function(J){var L,M=new d["default"],N=J.isDataView,O=J.isLocationTrackingService,Y=-1<(null===(L=J.typeKeywords)||void 0===L?void 0:L.indexOf("Spatiotemporal"));L=x["default"].isDefined(J.canEnableAttachments)?J.canEnableAttachments:!(!J.isHostedService||N||O||Y||!J.canUpdate);
J.canEnableAttachments=L;M.resolve(L);return M};I.canEditViewAttachments=function(J){x["default"].isDefined(J.canEditViewAttachments)||(J.canEditViewAttachments=!!(J.isHostedService&&J.isDataView&&J.canUpdate));return J.canEditViewAttachments};I.canAppendData=function(J){var L,M=new d["default"],N=n["default"].includes(J.typeKeywords,"View Service"),O=n["default"].includes(J.typeKeywords,"Cloud Drive"),Y=J.isLocationTrackingService;N=!O&&!N&&!Y&&J.isAdmin&&J.isHostedService&&(J.portal.isPortal&&(null===
(L=J.serviceInfo)||void 0===L?void 0:L.supportsAppend)||!J.portal.isPortal&&(J.layers||[]).some(function(ba){return ba.supportsAppend}));J.canAppendData=N;M.resolve(N);return M};I.canUseForPublish=function(J,L,M,N){var O;J=(null===(O=J.itemData)||void 0===O?void 0:O.layers)||[];O=n["default"].find(J,function(Y){return Y.id===L.id});J=m["default"](L);if(null===O||void 0===O?0:O.layerDefinition)J.drawingInfo=a.__assign(a.__assign({},J.drawingInfo),O.layerDefinition.drawingInfo),J.featureReduction=a.__assign(a.__assign({},
J.featureReduction),O.layerDefinition.featureReduction);return k["default"](a.__assign({},J),M,N)};I.canPublishFromImageService=function(J){var L,M=J.portal,N=J.isAdmin,O=J.isOwner,Y=J.isHostedService,ba=J.serviceInfo,ha=J.type,U=null===(L=M.getPortalUser())||void 0===L?void 0:L.userRole;L=N||O;M=Y&&!M.isPortal;return"Image Service"===ha&&(null===ba||void 0===ba?void 0:ba.bandCount)&&!n["default"].includes(J.typeKeywords,"Elevation 3D Layer")&&L&&M&&(null===U||void 0===U?void 0:U.canCreateItem())&&
(null===U||void 0===U?void 0:U.canPublishImageCollection())};I.isTiledOnlyImageryService=function(J){J=J.capabilities.split(",").map(function(L){return L.toLowerCase().trim()});return n["default"].includes(J,"tilesonly")};I.isTiledImageryService=function(J){var L=new d["default"];J="Image Service"===J.type&&n["default"].includesSome(J.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);L.resolve(J);return L};I.isServiceEditableByUser=function(J){var L,M=J.isOrgItem,N=J.isHostedService,O=J.serviceInfo,
Y=J.canEditService,ba=J.portal,ha=new d["default"],U=ba.getPortalUser();ba=null===(L=null===U||void 0===U?void 0:U.userRole)||void 0===L?void 0:L.canEditFeaturesFullControl();L=U&&M;M=-1<((null===O||void 0===O?void 0:O.capabilities)||"").indexOf("Editing");O=null===O||void 0===O?void 0:O.isMultiServicesView;x["default"].isDefined(Y)||(J.canEditService=!(!N||O||!(J.canUpdate||M&&ba&&L)));ha.resolve(J.canEditService);return ha};I.isExportableByUser=function(J){var L,M=J.portal,N=J.serviceInfo,O=J.isLocationTrackingService,
Y=J.isHostedService,ba=J.isAdmin,ha=J.type,U=new d["default"],X=M.getPortalUser();N=!!(-1<(null===(L=null===N||void 0===N?void 0:N.capabilities)||void 0===L?void 0:L.indexOf("Extract")));L=(null===X||void 0===X?void 0:X.userRole)&&X.userRole.canCreateItem();L=X&&N&&(!X.isOrgUser||L);x["default"].isDefined(J.canExport)||(J.canExport=!(!Y||!X||M.isPortal&&(!M.isPortal||O)||!("Feature Service"===ha&&ba||L)));U.resolve(J.canExport);return U};I.isOverwriteableService=function(J,L){var M,N,O=J.type,Y=J.serviceInfo,
ba=J.adminServiceInfo,ha=J.isPortal,U=J.isSDS,X=J.typeKeywords,Z=J.sourceData,P=new d["default"],da={shapefile:1,"file geodatabase":1,geojson:1};ba=null===(M=ha&&!U?Y:ba)||void 0===M?void 0:M.capabilities;M=f["default"].stringToArray(ba||"",",",!0);M=n["default"].includes(M,"ChangeTracking");!L&&n["default"].includes(X,"Cloud Drive")&&P.resolve(!1);J.isHostedService&&"Feature Service"===O&&J.serviceInfo&&!1===J.serviceInfo.sourceSchemaChangesAllowed&&P.resolve(!1);!J.isAdmin||!J.isHostedService||
"Feature Service"!==O||Y.syncEnabled||J.isDataView||M?P.resolve(!1):Z&&Z.owner===J.owner&&(null===(N=Z.type)||void 0===N?void 0:N.toLowerCase())in da?P.resolve(!0):!Z||"CSV"!==Z.type&&"Microsoft Excel"!==Z.type?P.resolve(!1):I.fetchPublishParameters(J).then(function(ia){J.publishParameters=ia;P.resolve(!!ia)});return P};I.isOverwriteableCloudService=function(J){var L=new d["default"],M=J.cloudProviderInfo,N=J.sourceData;if(n["default"].includes(J.typeKeywords,"Cloud Drive")&&M&&M.mimeType){var O=
!N;J.sourceData=N||{type:-1!==M.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};I.isOverwriteableService(J,!0).then(function(Y){O&&(J.sourceData=null);L.resolve(!!Y)})}else L.resolve(!1);return L};I.isApplicationCreateableFromItem=function(J){var L=new d["default"],M=J.portal.getPortalUser(),N=null===M||void 0===M?void 0:M.userRole;N=N&&N.canCreateItem()||M&&!M.isOrgUser;var O=!1;if(x["default"].isDefined(J.isApplicationCreateableFromItem))L.resolve(J.isApplicationCreateableFromItem);else{J.isApplicationCreateableFromItem=
O;if(N)if(n["default"].includes(J.types,"is-map")||n["default"].includes(J.types,"is-scene"))J.isApplicationCreateableFromItem=!0,J.privileges.push("can-create-app"),n["default"].includes(J.types,"is-map")&&c["default"].showCreateDashboard&&M&&M.isOrgUser&&J.privileges.push("can-create-dashboard-item"),O=!0;else if(n["default"].includes(J.typeKeywords,"Configurable")&&n["default"].includes(J.typeKeywords,"createAppWithoutMap")&&!n["default"].includes(J.typeKeywords,"Web AppBuilder for ArcGIS")||n["default"].includes(J.typeKeywords,
"Web AppBuilder for ArcGIS")&&M.isOrgUser)J.isApplicationCreateableFromItem=!0,J.types.push("is-hostedTemplate"),O=!0;L.resolve(O)}return L};I.isMultipatchFeatureService=function(J){var L=J.isHostedService,M=J.typeKeywords,N=J.serviceInfo;J="Feature Service"===J.type&&(L||n["default"].includes(M,"Hosted"));N=((null===N||void 0===N?void 0:N.layers)||[]).some(function(O){return"esriGeometryMultiPatch"===(null===O||void 0===O?void 0:O.geometryType)});return J&&N};I.registerItemActions=function(J,L,M,
N,O){v["default"]("[class*\x3djs-action-]",L).forEach(function(Y){var ba=e["default"].get(Y,"data-action");M[ba]&&J.own(h["default"](Y,"click",function(ha){ha.preventDefault();if(O&&O(ba))ha.stopPropagation();else M[ba](a.__assign({evt:ha,item:J.item,user:J.portalUser,page:N,scope:J}))}))},J)};I.calculateExpectedTiles=function(J,L,M){var N=new w["default"](L.xmax,L.ymin,L.spatialReference);L=new w["default"](L.xmin,L.ymax,L.spatialReference);L=A["default"].getContainingTileCoords(J,L,M);J=A["default"].getContainingTileCoords(J,
N,M);J=(J.row+1-L.row)*(J.col+1-L.col);return 0>=J?1:J};I.sizeInMB=function(J){var L=J||0;0<J&&(L=J/1048567);L=Math.round(100*L)/100;return r["default"].format(L)};I.getHashParts=function(){return t["default"]().split("/")};I.splitHashParts=function(J){return J?J.split("/"):[""]};I.removeUrlQueryParameter=function(J,L){var M;if(J){var N=E["default"].urlToObject(J),O=N.path,Y=t["default"]()?"#"+t["default"]():"";if(!(L&&(null===(M=N.query)||void 0===M?0:M[L])))return J;delete N.query[L];M=0;for(var ba in N.query)Object.prototype.hasOwnProperty.call(N.query,
ba)&&ba!==L&&(O=""+O+(0===M?"?":"\x26")+ba+"\x3d"+encodeURIComponent(N.query[ba]),M++);return O+Y}return J};I.needsToken=function(J,L){var M,N,O=null===(M=J.portal)||void 0===M?void 0:M.getPortalUser();M=J.serverToken||(null===(N=null===O||void 0===O?void 0:O.credential)||void 0===N?void 0:N.token)||(null===O||void 0===O?void 0:O.token);return J&&"WFS"!==J.type&&"OGCFeatureServer"!==J.type&&O&&((J.isServiceProxy||J.hasKMLItemData)&&"public"!==J.access||J.isHostedService&&(J.isAdmin||"public"!==J.access)||
J.isFeatureCollection&&"public"!==J.access)?L+(M?"?token\x3d"+M:""):L};I.getNeededToken=function(J){var L,M,N=null===(L=J.portal)||void 0===L?void 0:L.getPortalUser();L=J.serverToken||(null===(M=null===N||void 0===N?void 0:N.credential)||void 0===M?void 0:M.token)||(null===N||void 0===N?void 0:N.token);return J&&"WFS"!==J.type&&N&&((J.isServiceProxy||J.hasKMLItemData)&&"public"!==J.access||J.isHostedService&&(J.isAdmin||"public"!==J.access)||J.isFeatureCollection&&"public"!==J.access)?L:null};I.addToken=
function(J){J=I.needsToken(J,J.url);return-1<(null===J||void 0===J?void 0:J.indexOf("?token\x3d"))};I.needsSSL=function(J,L){return J.portal.allSSL||-1<window.location.protocol.indexOf("https:")?q["default"].getSecureUrl(J.url):L};I.registerKeystrokeHandler=function(J,L){return h["default"](J,10>=y["default"]("ie")||7>y["default"]("trident")?"keydown":"keyup",L)};I.registerEnterSpaceKeystrokeHandler=function(J,L){return h["default"](J,"keyup",function(M){M.keyCode!==C["default"].ENTER&&M.keyCode!==
C["default"].SPACE||L(M)})};I.sendAllResources=function(J,L,M,N,O,Y){var ba=new d["default"];M=m["default"](M);var ha=[],U=M.splice(0,L);for(x["default"].isDefined(Y)||(Y=!0);0<(null===U||void 0===U?void 0:U.length);)ha.push(q["default"].request({url:J,content:N(U)},a.__assign({usePost:Y},O||{}))),U=M.splice(0,L);F["default"](ha).then(function(X){return ba.resolve(X)},function(X){return ba.reject(X)});return ba};I.sendAllResourcesWithDelay=function(J,L,M,N,O){function Y(){setTimeout(function(){da=
ha.splice(0,L);0<(null===da||void 0===da?void 0:da.length)&&(q["default"].request({url:J,content:N(da)},{usePost:!0}).then(function(ia){Z++;U.push(ia);Z>=ba&&X.resolve(U)},function(ia){Z++;Z>=ba&&X.reject(ia)}),P++,Y())},0===P?0:O)}var ba=Math.ceil(M.length/L),ha=m["default"](M),U=[],X=new d["default"],Z=0,P=0,da;Y();return X};I.sendAllResourcesSerially=function(J,L,M,N){function O(){X=ba.splice(0,L);0<(null===X||void 0===X?void 0:X.length)&&q["default"].request({url:J,content:N(X)},{usePost:!0}).then(function(P){Z++;
ha.push(P);Z>=Y?U.resolve(ha):O()},function(P){Z++;Z>=Y?U.reject(P):O()})}var Y=Math.ceil(M.length/L),ba=m["default"](M),ha=[],U=new d["default"],X,Z=0;O();return U};I.fetchAllResources=function(J,L,M){var N=new d["default"],O=1,Y=[],ba=100,ha,U,X,Z;L=L||{};M=M||"results";L.start=O;!L.num||L.num>ba?L.num=ba:ba=L.num;q["default"].request({url:J,content:L}).then(function(P){if(null===P||void 0===P?0:P[M]){Y=Y.concat(P[M]);O=P.nextStart;ha=P.total-Y.length;U=Math.ceil(ha/ba);X=[];if(-1<O)for(Z=0;Z<U;Z++)L.start=
O+Z*ba,X.push(q["default"].request({url:J,content:L}));F["default"](X).then(function(da){da.forEach(function(ia){Y=Y.concat(ia[M])});N.resolve(Y)},function(da){return N.reject(da)})}else N.resolve(Y)},function(P){return N.reject(P)});return N};I.deleteItem=function(J){var L=J.userItemUrl+"/delete";if("Deep Learning Package"===(null===J||void 0===J?void 0:J.type)){var M=new d["default"];I.uninstallDeepLearningPackage(J).then(function(N){"uninstallFail"===(null===N||void 0===N?void 0:N.messageCode)?
M.resolve(N):q["default"].request({url:L},{usePost:!0}).then(function(O){return M.resolve(O)})});return M}return q["default"].request({url:L},{usePost:!0})};I.uninstallDeepLearningPackage=function(J){var L,M,N=J.portal,O=new d["default"],Y=null===(L=N.helperServices)||void 0===L?void 0:L.rasterAnalytics;L=J.portal.getPortalUser()||{};L=(null===(M=L.credential)||void 0===M?void 0:M.token)||L.token;var ba={messageCode:"uninstallFail"},ha={messageCode:"uninstallSuccess"};if((null===N||void 0===N?0:N.isPortal)&&
Y&&x["default"].isDefined(Y.url)){M={modelItemId:JSON.stringify({itemId:J.id})};var U=Y.url+"/UninstallDeepLearningModel";O=(new G["default"](U+(L?"?token\x3d"+L:""))).submitJob(M).then(function(X){var Z,P,da=null===(P=null===(Z=null===X||void 0===X?void 0:X.results)||void 0===Z?void 0:Z.uninstallSucceed)||void 0===P?void 0:P.paramUrl;X=X.jobId;return da&&X?q["default"].request({url:U+"/jobs/"+X+"/"+da},{usePost:!0}).then(function(ia){return(ia=null===ia||void 0===ia?void 0:ia.value)&&ia===J.id?ha:
ba}):ba},function(){return ba})}else O.resolve(ha);return O};I.getUserProfile=function(J){J="string"===typeof J?{username:J}:J;var L=c["default"].restBaseUrl+"community/users/"+J.username,M=q["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");return q["default"].request({url:L}).then(function(N){var O=N.thumbnail?u["default"].PortalUtil.formatUrl(L+"/info/"+N.thumbnail):M;return a.__assign(a.__assign(a.__assign({},N),{thumbnailUrl:O}),J)})};I.getItemSharing=function(J){var L=
new d["default"],M=J.portal,N=J.itemOwner,O=J.access,Y=J.canUpdate,ba=J.isOwner,ha=J.userItemUrl,U=M.getPortalUser(),X=(null===U||void 0===U?void 0:U.canShareOthers)&&J.isOwnedByMyOrg,Z={access:O};Y&&(ba||(null===U||void 0===U?0:U.canViewOthersOrgItems))||X?q["default"].request({url:ha}).then(function(P){Z=P.sharing;var da=null===Z||void 0===Z?void 0:Z.groups;"shared"===Z.access&&1===(null===da||void 0===da?void 0:da.length)&&da[0]===U.favGroupId&&(Z={access:"private"});da&&(P={userGroups:U.getGroups(),
ownerGroups:J.isOwner?null:N.getGroups()},F["default"](P).then(function(ia){(ia=(ia.userGroups||[]).concat(ia.ownerGroups||[]).filter(function(xa){return n["default"].find(da,function(Ca){return xa.id===Ca})}).map(function(xa){return'id: "'+xa.id+'"'}))&&ia.length?M.queryGroups({q:ia.join(" OR "),num:100},!0).then(function(xa){Z.groups=(xa.results||[]).sort(function(Ca,Fa){return Fa.title.localeCompare(Ca.title)});Z.total=xa.total;J=a.__assign(a.__assign({},J),{sharing:Z});L.resolve(Z)}):(delete Z.groups,
J=a.__assign(a.__assign({},J),{sharing:Z}),L.resolve(Z))}))}):(J=a.__assign(a.__assign({},J),{sharing:Z}),L.resolve(Z));return L};I.protectItem=function(J){return q["default"].request({url:J.userItemUrl+"/protect"},{usePost:!0})};I.unprotectItem=function(J){return q["default"].request({url:J.userItemUrl+"/unprotect"},{usePost:!0})};I.protectGroup=function(J){return q["default"].request({url:c["default"].restBaseUrl+"community/groups/"+J.id+"/protect"},{usePost:!0})};I.unprotectGroup=function(J){return q["default"].request({url:c["default"].restBaseUrl+
"community/groups/"+J.id+"/unprotect"},{usePost:!0})};I.fetchPublishParameters=function(J){var L=J.sourceData;J=J.itemUrl;var M=new d["default"];J+="/info/publishParameters.json";!L||"CSV"!==L.type&&"Microsoft Excel"!==L.type?M.resolve(!1):q["default"].request({url:J}).then(function(N){return M.resolve(N)},function(){return M.resolve(!1)});return M};I.fetchRegisteredAppInfo=function(J){J=q["default"].getSecureUrl(J.userItemUrl+"/registeredAppInfo");return q["default"].request({url:J})};I.refreshAppSecret=
function(J){J=q["default"].getSecureUrl(c["default"].restBaseUrl)+"oauth2/apps/"+J+"/resetSecret";return q["default"].request({url:J},{usePost:!0})};I.registerApp=function(J,L){var M=L?"apps/"+J.client_id+"/update":"registerApp";M=q["default"].getSecureUrl(c["default"].restBaseUrl)+"oauth2/"+M;return q["default"].request({url:M,content:J},{usePost:!0})};I.unregisterApp=function(J){J=q["default"].getSecureUrl(c["default"].restBaseUrl)+"oauth2/apps/"+J+"/unregister";return q["default"].request({url:J},
{usePost:!0})};I.enableAttachments=function(J,L,M){return q["default"].request({url:J.adminUrl+"/"+L.id+"/updateDefinition",content:{updateDefinition:JSON.stringify({hasAttachments:!!M})}},{usePost:!0}).then(function(){return L.hasAttachments=M})};I.isItemListable=function(J){var L=J.portal.getPortalUser().userRole,M=L&&L.isCustom()&&L.canManageMarketplace();L=L&&L.isAdmin()||M;M=n["default"].includes(J.typeKeywords,"Service Proxy")&&J.sourceUrl&&(-1<J.sourceUrl.indexOf(".arcgis.com")||-1<J.sourceUrl.indexOf(".esri.com"));
var N=c["default"].self,O=N.canListApps;N=N.canListData;!J.listed&&c["default"].self&&L?N&&M?(L=new d["default"],L.resolve("Geoprocessing Service"===J.type)):O&&(n["default"].includes(J.typeKeywords,"Registered App")||n["default"].includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],J.type))?(L=new d["default"],L.resolve(!0)):N&&"Rule Package"===J.type?(L=new d["default"],L.resolve(!0)):N?L=I.isServiceListable(J):(L=new d["default"],L.resolve(!1)):(L=new d["default"],L.resolve(!1));return L};
I.isServiceListable=function(J){var L=c["default"].restBaseUrl+"portals/isServerRegistered",M=J.type?J.type.toLowerCase():"",N=J.url&&q["default"].parseUrl(J.url);"web map"===M?(J=new d["default"],J.resolve(!0)):n["default"].includes(["feature service","map service","image service","scene service"],M)?q["default"].isHostedServiceItem(J)?(J=new d["default"],J.resolve(!0)):N&&x["default"].isDefined(N.protocol)&&x["default"].isDefined(N.host)?J=q["default"].request({url:L,content:{serverUrl:N.protocol+
"://"+N.host}}).then(function(O){return O.registered}):(J=new d["default"],J.resolve(!1)):(J=new d["default"],J.resolve(!1));return J};I.findLayer=function(J,L){var M=parseInt(J,10);if(x["default"].isDefined(M))return(L||[]).filter(function(N){return N.id===M}).shift()};I.getServiceNameFromUrl=function(J){var L=J.url||"",M=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,
N=L.replace(M,"").replace(/^.*\//,"").replace(/\?.*$/,"");L=L.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,"").match(M);try{return L?decodeURI(N):J.title}catch(O){return N}};I.getAppPurpose=function(J){J=J.typeKeywords;if(n["default"].includes(J,"Ready To Use")||n["default"].includes(J,"Ready to Use"))return H["default"].itemProperties.readyToUse;if(n["default"].includes(J,"selfConfigured"))return H["default"].itemProperties.selfConfigurable;if(n["default"].includes(J,
"Configurable"))return H["default"].itemProperties.configurable;if(n["default"].includes(J,"Code Sample"))return H["default"].itemProperties.codeSample};I.getAppApi=function(J){var L={"Windows Mobile":H["default"].common.mobile,"ArcGIS for iPhone":H["default"].common.ios,"ArcGIS for Windows Phone":H["default"].common.windowsPhone,"ArcGIS for Windows Store":H["default"].common.windowsStore,"ArcGIS for Windows Universal":H["default"].common.windowsUniversal,"ArcGIS for Android":H["default"].common.Android,
Flex:H["default"].common.Flex,JavaScript:H["default"].common.JavaScript,Silverlight:H["default"].common.Silverlight,"Web ADF":H["default"].common.WebADF,Other:H["default"].common.other,Java:"Java",Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(L).reduce(function(M,N){n["default"].includes(J.typeKeywords,N)&&(M=L[N]);return M},"")};I.linkify=function(J){J=q["default"].htmlEncode(J);for(var L=J.indexOf("http"),M;-1<L;){M=J.substring(L,L+8);if(-1<
M.indexOf("http://")||-1<M.indexOf("https://")){M=!0;if(6<L&&"href\x3d"===J.substring(L-6,L-1).toLowerCase()){M=!1;var N=J.toLowerCase().indexOf("/a",L);L=L+J.toLowerCase().substring(L,N).length+1}if(M){M=J.indexOf(" ",L);-1===M&&(M=J.length);N=J.substring(L,M);var O='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+N+'" target\x3d"_blank"\x3e'+N+"\x3c/a\x3e\x3c/span\x3e";J=""+J.substring(0,L)+O+J.substring(M,J.length);L=L+O.length-N.length+5}}else L+=1;L=J.indexOf("http",L)}return J};I.includeTimestampInRequest=
function(J){if(10>=y["default"]("ie")||7>y["default"]("trident"))J.ts=(new Date).getTime();return J};I.fetchIDPConfig=function(){var J=q["default"].getSecureUrl(c["default"].restBaseUrl)+"portals/self/idp";return q["default"].request({url:J})};I.checkEnterpriseGroupStore=function(){var J=new d["default"],L=q["default"].getPortalAdminBaseUrl()+"/security/config";q["default"].request({url:L}).then(function(M){M=null===M||void 0===M?void 0:M.groupStoreConfig;var N=!1,O=null;if(null===M||void 0===M?0:
M.type)O=null===M||void 0===M?void 0:M.type.toLowerCase(),"builtin"!==O&&"saml"!==O&&(N=!0);J.resolve({storeType:O,supportsEnterpriseGroups:N})},function(){J.resolve({supportsEnterpriseGroups:!1})});return J};I.enterpriseGroupMatches=function(J,L){return!(!x["default"].isDefined(J)||!x["default"].isDefined(L)||J.toLowerCase()!==L.toLowerCase())};I.isAmazonBasedTileService=function(J){return!q["default"].isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(J)};I.createDialogWrapper=function(J,L){var M=(new b["default"](J)).placeAt(document.body);
M.setContent(L);h["default"].once(M,"hide",function(){return M.destroyRecursive()});return M};I.createSpecifiedDialog=function(J,L,M){var N=L?new J(L):new J,O=N._dialog||N.dialog;if(O)h["default"].once(O,"hide",function(){var Y;O.destroyRecursive();N.destroyRecursive();null===(Y=null===M||void 0===M?void 0:M.focus)||void 0===Y?void 0:Y.call(M)});return N};I.getPageRangeString=function(J,L){var M=g["default"].locale?g["default"].locale.substring(0,2):"en",N=L?L:H["default"].common.pageRange;J.total&&
1E4<=J.total&&(J.total="10000+");return z["default"].substitute(N["en"===M?"en":"other"],J)};I.sortListByStrProp=function(J,L,M){J.sort(function(N,O){var Y=N[L].toLowerCase(),ba=O[L].toLowerCase();return M?Y<ba?1:Y>ba?-1:0:Y<ba?-1:Y>ba?1:0})};I.formatDataStoreItem=function(J,L){if((L||[]).length)if(L.some(function(M){return n["default"].includes(M.toLowerCase(),"cloud")}))J+=" ("+H["default"].AddDatastoreDlg.cloud+")";else if(-1!==L.indexOf("egdb"))J+=" ("+H["default"].AddDatastoreDlg.database+")";
else if(-1!==L.indexOf("folder"))J+=" ("+H["default"].AddDatastoreDlg.folder+")";else if(-1!==L.indexOf("nosql"))J+=" ("+H["default"].AddDatastoreDlg.nosql+")";else if(-1!==L.indexOf("fileShare")||-1!==L.indexOf("hdfs")||-1!==L.indexOf("hive")||-1!==L.indexOf("dataStore"))J+=" ("+H["default"].AddDatastoreDlg.bigdata+")";return J};I.downloadImage=function(J){var L,M;J=J.item;var N=J.portal,O=new l["default"],Y=new d["default"],ba=null===(L=N.helperServices)||void 0===L?void 0:L.rasterUtilities;L=J.portal.getPortalUser()||
{};L=(null===(M=L.credential)||void 0===M?void 0:M.token)||L.token;if((null===N||void 0===N?0:N.isPortal)&&(null===ba||void 0===ba?0:ba.url)){M={inputImageLayer:JSON.stringify({itemId:J.id})};var ha=ba.url+"/DownloadRaster",U=L?"?token\x3d"+L:"";Y=(new G["default"](ha+U)).submitJob(M,function(X){var Z,P="esriJobSucceeded"===(null===X||void 0===X?void 0:X.jobStatus)&&(null===(Z=X.results)||void 0===Z?void 0:Z.outputRaster);X=X.jobId;O.updateMessage(H["default"].downloadImageDlg.succeeded);return P&&
X?(O.hide(),q["default"].request({url:ha+"/jobs/"+X+"/results/outputRaster"},{usePost:!0}).then(function(da){var ia;return null===(ia=null===da||void 0===da?void 0:da.value)||void 0===ia?void 0:ia[0]})):""},function(X){O.setCancelUrl(ba.url+"/DownloadRaster/jobs/"+X.jobId+"/cancel"+U)});O.show();O.updateMessage(H["default"].downloadImageDlg.message)}else Y.resolve("");return Y};I.cancelDownloadImage=function(J,L){(new G["default"](J)).cancelJob(L,null,null)};I.goToPage=function(J,L){var M=L.username,
N=L.orgId,O=q["default"].getUser(),Y=null===O||void 0===O?void 0:O.userRole,ba=(null===O||void 0===O?void 0:O.username)===M;M=("groups"===J&&(null===Y||void 0===Y?0:Y.canViewOrgGroups())||"content"===J&&(null===Y||void 0===Y?0:Y.canManageItems())||(null===Y||void 0===Y?0:Y.isAdmin())||ba)&&N===O.orgId?""+c["default"].baseUrl+J+".html"+(ba?"":"?user\x3d"+M):c["default"].baseUrl+"search.html?q\x3downer:%22"+M+"%22\x26t\x3d"+J+"\x26restrict\x3dfalse";window.open(M,"_blank")};return I}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["dojo/_base/array"],
function(D){function B(c,k){if("esriGeometryMultiPatch"===c.geometryType)return!1;var n=c.drawingInfo.renderer,r=c.drawingInfo.labelingInfo,f=c.featureReduction,m=c.fields;c.layerDefinition&&c.layerDefinition.featureReduction&&(f=c.layerDefinition.featureReduction);if("heatmap"===n.type||"esriGeometryPolygon"===c.geometryType&&n.uniqueValueInfos&&n.visualVariables&&D.some(n.visualVariables,function(l){if("sizeInfo"===l.type&&!l.target)return!0}))return!1;var q=D.map(D.filter(m,function(l){return"esriFieldTypeDate"===
l.type}),function(l){return l.name});return q.length&&(-1<D.indexOf(q,n.field)||-1<D.indexOf(q,n.field1)||n.visualVariables&&D.some(n.visualVariables,function(l){if(l.field&&-1<D.indexOf(q,l.field))return!0}))||f&&0<Object.keys(f).length||!k&&r&&r.length?!1:!0}function a(c,k){var n=c.drawingInfo.renderer,r=c.drawingInfo.labelingInfo,f=c.featureReduction,m=c.fields,q;if(-1===D.indexOf(["esriGeometryPoint","esriGeometryMultiPatch"],c.geometryType)||n.observationRenderer||n.latestObservationRenderer||
"heatmap"===n.type||n.valueExpression&&n.valueExpression.length)return!1;if(n.visualVariables)for(q=0;q<n.visualVariables.length;q++)if(n.visualVariables[q].valueExpression&&n.visualVariables[q].valueExpression.length)return!1;var l=D.map(D.filter(m,function(b){return"esriFieldTypeDate"===b.type}),function(b){return b.name});return l.length&&(-1<D.indexOf(l,n.field)||-1<D.indexOf(l,n.field1)||n.visualVariables&&D.some(n.visualVariables,function(b){if(b.field&&-1<D.indexOf(l,b.field))return!0}))||
f&&0<Object.keys(f).length||!k&&r&&r.length?!1:!0}return function(c,k,n){return"Feature Layer"===c.type&&c.drawingInfo?"scene"===n?a(c,k):B(c,k):!1}})},"arcgisonline/pages/utils/number":function(){define(["require","exports"],function(D,B){function a(r,f){if(void 0===f||null===f)return k.has(n)||k.set(n,new Intl.NumberFormat(n.locale)),k.get(n).format(r);var m={locale:c,options:{minimumFractionDigits:f,maximumFractionDigits:f}};k.has(m)||k.set(m,new Intl.NumberFormat(m.locale,m.options));return k.get(m).format(r)}
Object.defineProperty(B,"__esModule",{value:!0});B.format=void 0;var c={ar:"ar-u-nu-latn"}[document.documentElement.lang]||document.documentElement.lang,k=new WeakMap,n={locale:c};B.format=a;B["default"]={format:a}})},"arcgisonline/pages/utils/clone":function(){define(["require","exports"],function(D,B){function a(n){for(var r=Object.keys(n),f=Array(r.length),m=0;m<r.length;++m)f[m]=c(n[m]);return f}function c(n){return"object"!==typeof n||null===n?n:Array.isArray(n)?a(n):n instanceof Map?new Map(a(Array.from(n))):
n instanceof Set?new Set(a(Array.from(n))):ArrayBuffer.isView(n)?new n.constructor(n.buffer.slice(),n.byteOffset,n.length):n instanceof Node&&n.cloneNode?n.cloneNode(!0):k(n)}function k(n){if("object"!==typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return a(n);if(n instanceof Map)return new Map(a(Array.from(n)));if(n instanceof Set)return new Set(a(Array.from(n)));if(n instanceof Node&&n.cloneNode)return n.cloneNode(!0);var r={},f;for(f in n)r[f]=c(n[f]);
return r}Object.defineProperty(B,"__esModule",{value:!0});B["default"]=k})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),function(D,B,a,c,k,n,r){return D([c,k,n],{templateString:a,widgetsInTemplate:!0,_i18nStrings:B,constructor:function(f,m){D.safeMixin(this,f)},show:function(){this.dialog.show();
this.own(dojo.connect(this.dialog,"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(f){this.message.innerHTML=f},setCancelUrl:function(f){this.cancelUrl=f;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&r.request({url:this.cancelUrl});this.dialog.hide()}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),function(D,B,a,c,
k,n,r,f){function m(v,y){var C=v.indexOf(y);return 0<=C?v.substring(C+1):""}function q(){return m(location.href,"#")}function l(){n.publish("/dojo/hashchange",q())}function b(){q()!==d&&(d=q(),l())}function g(v){if(h)if(h.isTransitioning())setTimeout(k.hitch(null,g,v),z);else{var y=h.iframe.location.href,C=y.indexOf("?");h.iframe.location.replace(y.substring(0,C)+"?"+v)}else y=location.href.replace(/#.*/,""),location.replace(y+"#"+v),!t&&b()}function e(){function v(){d=q();F=A?d:m(E.href,"?");x=!1;
u=null}var y=document.createElement("iframe"),C=a.dojoBlankHtmlUrl||B.toUrl("./resources/blank.html");y.id="dojo-hash-iframe";y.src=C+"?"+q();y.style.display="none";document.body.appendChild(y);this.iframe=D.global["dojo-hash-iframe"];var F,x,u,w,A,E=this.iframe.location;this.isTransitioning=function(){return x};this.pollLocation=function(){if(!A)try{var G=m(E.href,"?");document.title!=w&&(w=this.iframe.document.title=document.title)}catch(K){A=!0}var H=q();if(x&&d===H)if(A||G===u)v(),l();else{setTimeout(k.hitch(this,
this.pollLocation),0);return}else if(d!==H||!A&&F!==G){if(d!==H){d=H;x=!0;u=H;y.src=C+"?"+u;A=!1;setTimeout(k.hitch(this,this.pollLocation),0);return}A||(location.href="#"+E.search.substring(1),v(),l())}setTimeout(k.hitch(this,this.pollLocation),z)};v();setTimeout(k.hitch(this,this.pollLocation),z)}D.hash=function(v,y){if(!arguments.length)return q();"#"==v.charAt(0)&&(v=v.substring(1));y?g(v):location.hash="#"+v;return v};var d,h,t,z=a.hashPollFrequency||100;r(function(){"onhashchange"in D.global&&
(!f("ie")||8<=f("ie")&&"BackCompat"!=document.compatMode)?t=c.after(D.global,"onhashchange",l,!0):document.addEventListener?(d=q(),setInterval(b,z)):document.attachEvent&&(h=new e)});return D.hash})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../config ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){var e={options:{disableIdentityLookup:!0},
requestParams:{f:"json"}},d=function(w){function A(E){w[E]||(w[E]=function(){var G=arguments;return c.when(w,function(H){Array.prototype.unshift.call(G,H.results||H);return d(k[E].apply(k,G))})})}if(!w)return w;w.then&&(w=B.delegate(w));w.total||(w.total=c.when(w,function(E){return q.isDefined(E.total)?E.total:E.length||0}));A("forEach");A("filter");A("map");A("some");A("every");return w},h={useSSL:function(w,A){var E=e&&e.self||{};if(E&&!E.isPortal)return-1!==w.indexOf("https:")||E.allSSL?A.replace("http:",
"https:"):A;var G=h.getLocation(A);if(-1<E.portalHostname.toLowerCase().indexOf(G.hostname.toLowerCase())&&G.port&&"80"!==G.port&&"443"!==G.port){var H=G.pathname;H=0===H.indexOf("/")?H:"/"+H;return E.allSSL||-1<w.indexOf("https:")?"https://"+G.hostname+(E.httpsPort&&"443"!==E.httpsPort?":"+E.httpsPort:"")+H+G.search:"http://"+G.hostname+(E.httpPort&&"80"!==E.httpPort?":"+E.httpPort:"")+H+G.search}return-1!==w.indexOf("https:")||E.allSSL?A.replace("http:","https:"):A},formatUrl:function(w){var A=
e.currentToken;return-1!==w.indexOf("null")?null:h.useSSL(window.location.protocol,A?w+(-1!==w.indexOf("?")?"\x26":"?")+("token\x3d"+A):w)},getLocation:function(w){var A=document.createElement("a");A.href=w;return{protocol:A.protocol,hostname:A.hostname,port:A.port,pathname:A.pathname,search:A.search,hash:A.hash,host:A.host}},resultsToTypedArray:function(w,A,E){E=E?E.listings||E.notifications||E.userInvitations||E.tags||E.items||E.groups||E.comments||E.provisions||E.results||E:[];return k.map(E,function(G){G=
B.mixin(G,A||{});return w?new w(G):G})},clearFieldsFromObject:function(w,A){var E,G=w.length;if(B.isArray(w))for(E=0;E<G;E++)delete A[w[E]];else for(E in w)delete A[E];return A},requestToTypedArray:function(w,A,E,G,H){return d(h.request(w,A,E).then(B.partial(h.resultsToTypedArray,G,H)))},request:function(w,A,E){if(A){A.portal&&delete A.portal;if(A.form){var G=A.form;delete A.form}if(A.hasOwnProperty("withCredentials")){var H=A.withCredentials;delete A.withCredentials}}A=B.mixin(B.mixin({},A||{}),
e.requestParams);w={url:h.useSSL(window.location.protocol,w.url||w),content:A,callbackParamName:"callback",timeout:K&&K.timeout||0,form:G};null!=H&&(w.withCredentials=H);var K=B.mixin(E||{},e.options);return l(w,K)},formatQueryParams:function(w,A,E){w=B.mixin(B.mixin({},w),B.isString(A)?{q:A}:A||{});w.q=!E&&e.extraQuery?"("+w.q+")"+e.extraQuery:w.q;return w}},t=D([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(w){B.mixin(this,w);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=
this.created?new Date(this.created):null}}),z=D([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(w){B.mixin(this,w);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),v=D([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(w){B.mixin(this,w);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/",
"/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=h.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=h.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var w=
this.type;return{source:-1<k.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===w?w:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(w){var A=B.isString(w)?{comment:w}:w;return h.request(this.itemUrl+"/addComment",A,{usePost:!0}).then(B.hitch(this,function(E){return new t(B.mixin(A,{id:E.commentId,item:this}))}))},updateComment:function(w){if(w&&w.url&&w.comment)return h.request(w.url+
"/update",{comment:w.comment},{usePost:!0}).then(function(A){w.id=A.commentId;return w});throw Error();},getComments:function(){return h.requestToTypedArray(this.itemUrl+"/comments",null,null,t,{item:this})},deleteComment:function(w){if(w&&w.url)return h.request(w.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(w){var A=B.isObject(w)?w:{rating:parseFloat(w)};return h.request(this.itemUrl+"/addRating",A,{usePost:!0}).then(B.hitch(this,function(E){return new z(B.mixin(A,{id:E.ratingId,
item:this}))}))},getRating:function(){return h.request(this.itemUrl+"/rating").then(B.hitch(this,function(w){return new z(B.mixin(w,{item:this}))}))},deleteRating:function(){return h.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var w=this.type,A=this.typeKeywords||[],E=w;"Feature Service"===w||"Feature Collection"===w?E=-1<k.indexOf(A,"Table")?"Table":-1<k.indexOf(A,"Route Layer")?"Route Layer":-1<k.indexOf(A,"Markup")?"Markup":"Feature Layer":"Image Service"===
w?E=-1<k.indexOf(A,"Elevation 3D Layer")?"Elevation Layer":-1<k.indexOf(A,"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===w?E="Scene Layer":"Video Service"===w?E="Video Layer":"Scene Package"===w?E="Scene Layer Package":"Stream Service"===w?E="Feature Layer":"Geoprocessing Service"===w&&this.portal&&this.portal.isPortal?E=-1<k.indexOf(A,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===w?E="GeoEnrichment Service":"Geocoding Service"===w?E="Locator":"Microsoft Powerpoint"===
w?E="Microsoft PowerPoint":"GeoJson"===w?this.type=E="GeoJSON":"Globe Service"===w?E="Globe Layer":"Vector Tile Service"===w?E="Tile Layer":"netCDF"===w?E="NetCDF":"Map Service"===w?E=-1===k.indexOf(A,"Spatiotemporal")&&(-1<k.indexOf(A,"Hosted Service")||-1<k.indexOf(A,"Tiled"))&&-1===k.indexOf(A,"Relational")?"Tile Layer":"Map Image Layer":w&&-1<w.toLowerCase().indexOf("add in")?E=w.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===w?E="Big Data File Share":"Compact Tile Package"===w?
E="Tile Package (tpkx)":"Raster function template"===w?E="Raster Function Template":"OGCFeatureServer"===w?E="OGC Feature Layer":"web mapping application"===w&&-1<k.indexOf(A,"configurableApp")&&(E="Instant App");return E},_getIconUrl:function(){var w=this.type&&this.type.toLowerCase()||"",A=this.typeKeywords||[],E=!1,G=!1,H=!1,K=!1,I=!1,J=!1;G=!1;0<w.indexOf("service")||"feature collection"===w||"kml"===w||"wms"===w||"wmts"===w||"wfs"===w?(E=-1<k.indexOf(A,"Hosted Service"),"feature service"===w||
"feature collection"===w||"kml"===w||"wfs"===w?(K=-1<k.indexOf(A,"Table"),G=-1<k.indexOf(A,"Route Layer"),H=-1<k.indexOf(A,"Markup"),I=-1!==k.indexOf(A,"Spatiotemporal"),J=-1!==k.indexOf(A,"UtilityNetwork"),w=I&&K?"spatiotemporaltable":K?"table":G?"routelayer":H?"markup":I?"spatiotemporal":J?"utilitynetwork":E?"featureshosted":"features"):"map service"===w||"wms"===w||"wmts"===w?(I=-1!==k.indexOf(A,"Spatiotemporal"),G=-1!==k.indexOf(A,"Relational"),w=I||G?"mapimages":E||-1<k.indexOf(A,"Tiled")||"wmts"===
w?"maptiles":"mapimages"):w="scene service"===w?-1<k.indexOf(A,"Line")?"sceneweblayerline":-1<k.indexOf(A,"3DObject")?"sceneweblayermultipatch":-1<k.indexOf(A,"Point")?"sceneweblayerpoint":-1<k.indexOf(A,"IntegratedMesh")?"sceneweblayermesh":-1<k.indexOf(A,"PointCloud")?"sceneweblayerpointcloud":-1<k.indexOf(A,"Polygon")?"sceneweblayerpolygon":-1<k.indexOf(A,"Building")?"sceneweblayerbuilding":-1<k.indexOf(A,"Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===w?-1<k.indexOf(A,"Elevation 3D Layer")?
"elevationlayer":-1<k.indexOf(A,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===w?"streamlayer":"vector tile service"===w?"vectortile":"datastore catalog service"===w?"datastorecollection":"geocoding service"===w?"geocodeservice":"video service"===w?"mediaservice":"geoprocessing service"===w?-1<k.indexOf(A,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"geodata service"===w?"geodataservice":"layers"):w="web map"===w||"cityengine web scene"===w?"maps":"web scene"===
w?-1<k.indexOf(A,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===w&&-1<k.indexOf(A,"configurableApp")?"instantapps":"web mapping application"===w||"mobile application"===w||"application"===w||"operation view"===w||"desktop application"===w?"apps":"map document"===w||"map package"===w||"published map"===w||"scene document"===w||"globe document"===w||"basemap package"===w||"mobile basemap package"===w||"mobile map package"===w||"project package"===w||"project template"===
w||"pro map"===w||"layout"===w||"layer"===w&&-1<k.indexOf(A,"ArcGIS Pro")||"explorer map"===w&&k.indexOf(A,"Explorer Document")?"mapsgray":"service definition"===w||"csv"===w||"shapefile"===w||"cad drawing"===w||"geojson"===w||"360 vr experience"===w||"netcdf"===w||"administrative report"===w?"datafiles":"explorer add in"===w||"desktop add in"===w||"windows viewer add in"===w||"windows viewer configuration"===w?"appsgray":"arcgis pro add in"===w||"arcgis pro configuration"===w?"addindesktop":"rule package"===
w||"file geodatabase"===w||"sqlite geodatabase"===w||"csv collection"===w||"kml collection"===w||"windows mobile package"===w||"map template"===w||"desktop application template"===w||"gml"===w||"arcpad package"===w||"code sample"===w||"form"===w||"document link"===w||"earth configuration"===w||"operations dashboard add in"===w||"rules package"===w||"image"===w||"workflow manager package"===w||"explorer map"===w&&-1<k.indexOf(A,"Explorer Mapping Application")||-1<k.indexOf(A,"Document")?"datafilesgray":
"network analysis service"===w||"geoprocessing service"===w||"geodata service"===w||"geometry service"===w||"geoprocessing package"===w||"locator package"===w||"geoprocessing sample"===w||"workflow manager service"===w?"toolsgray":"layer"===w||"layer package"===w||"explorer layer"===w?"layersgray":"scene package"===w?"scenepackage":"mobile scene package"===w?"mobilescenepackage":"tile package"===w||"compact tile package"===w?"tilepackage":"task file"===w?"taskfile":"report template"===w?"report-template":
"statistical data collection"===w?"statisticaldatacollection":"insights workbook"===w?"workbook":"insights model"===w?"insightsmodel":"insights page"===w?"insightspage":"insights theme"===w?"insightstheme":"hub initiative"===w?"hubinitiative":"hub page"===w?"hubpage":"hub site application"===w?"hubsite":"hub event"===w?"hubevent":"hub project"===w?"hubproject":"relational database connection"===w?"relationaldatabaseconnection":"big data file share"===w?"datastorecollection":"image collection"===w?
"imagecollection":"desktop style"===w?"desktopstyle":"style"===w?"style":"dashboard"===w?"dashboard":"raster function template"===w?"rasterprocessingtemplate":"vector tile package"===w?"vectortilepackage":"ortho mapping project"===w?"orthomappingproject":"ortho mapping template"===w?"orthomappingtemplate":"solution"===w?"solutions":"geopackage"===w?"geopackage":"deep learning package"===w?"deeplearningpackage":"real time analytic"===w?"realtimeanalytics":"big data analytic"===w?"bigdataanalytics":
"feed"===w?"feed":"excalibur imagery project"===w?"excaliburimageryproject":"notebook"===w?"notebook":"storymap"===w?"storymap":"survey123 add in"===w?"survey123addin":"mission"===w?"mission":"mission report"===w?"missionreport":"quickcapture project"===w?"quickcaptureproject":"pro report"===w?"proreport":"urban model"===w?"urbanmodel":"web experience"===w?"experiencebuilder":"web experience template"===w?"webexperiencetemplate":"experience builder widget"===w?"experiencebuilderwidget":"experience builder widget package"===
w?"experiencebuilderwidgetpackage":"workflow"===w?"workflow":"kernel gateway connection"===w?"kernelgatewayconnection":"insights script"===w?"insightsscript":"hub initiative template"===w?"hubinitiativetemplate":"storymap theme"===w?"storymaptheme":"knowledge graph"===w?"knowledgegraph":"native application"===w?"nativeapp":"native application installer"===w?"nativeappinstaller":"link chart"===w?"linkchart":"investigation"===w?"investigation":"ogcfeatureserver"===w?"features":"pro project"===w?"proproject":
"insights workbook package"===w?"insightsworkbookpackage":"apache parquet"===w?"apacheparquet":"notebook code snippets"===w?"notebookcodesnippets":"suitability model"===w?"suitabilitymodel":"esri classifier definition"===w?"classifierdefinition":"esri classification schema"===w?"classificationschema":"insights data engineering workbook"===w?"dataengineeringworkbook":"insights data engineering model"===w?"dataengineeringmodel":"deep learning studio project"===w?"deeplearningproject":"maps";return w?
r.toUrl("../css/images/item_type_icons/"+w+"16.png"):null},_getIsPremiumContent:function(){var w=this.typeKeywords,A=!1;if(-1<k.indexOf(w,"Requires Subscription")||-1<k.indexOf(w,"Requires Credits"))A=!0;return A},_getPremiumIconUrl:function(){var w=this.typeKeywords,A;this.isPremiumContent&&(A=-1<k.indexOf(w,"Requires Credits")?"premiumcredits":"premiumitem");return A?r.toUrl("../css/images/item_type_icons/"+A+"16.png"):null},getThumbnailUrl:function(w){var A=this.thumbnailUrl;A&&w&&(A+=(-1===A.indexOf("?")?
"?":"\x26")+"w\x3d"+w);return A}}),y=D([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(w){B.mixin(this,w);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?h.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?h.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=
this.largeThumbnail?h.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var A in this.listingProperties)this[A]&&(this.listingProperties[A]=this[A]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",
version:"1.0"};this.screenshots=k.map(this.screenshots,B.hitch(this,function(E){return h.formatUrl(this.url+"/info/"+E)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?h.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):h.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return h.requestToTypedArray(this.commentsUrl,null,null,t,{item:this})},getVendor:function(){return this.vendor}}),
C=D([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(w){B.mixin(this,w);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=w.listing?new y(B.mixin(w.listing,{portal:this.portal})):null}}),F=D([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(w){B.mixin(this,w);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+
this.id;this.thumbnailUrl=h.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return h.request(this.url+"/users")},queryItems:function(w,A){w=h.formatQueryParams({},w,A);w.q="group:"+this.id+(w.q?" "+w.q:"");return this.portal.queryItems(w)},getThumbnailUrl:function(w){var A=this.thumbnailUrl;A&&w&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+w);return A}}),x=D([],{declaredClass:"esri.arcgis.PortalFolder",
constructor:function(w){B.mixin(this,w);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return h.requestToTypedArray(this.url,null,null,v,{portal:this.portal,folderId:this.id})}}),u=D([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(w){B.mixin(this,w);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+
"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?h.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return d(h.request(this.url).then(B.hitch(this,function(w){return h.resultsToTypedArray(F,{portal:this.portal},w.groups)})))},getNotifications:function(){return h.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return h.requestToTypedArray(this.url+
"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return h.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return d(this.getContent(null,{num:1}).then(function(w){return w.folders}))},getItems:function(w){return d(this.getContent(w).then(function(A){return A.items}))},getItem:function(w){return h.request(this.portal.portalUrl+"content/items/"+w).then(B.hitch(this,function(A){return new v(B.mixin(A,{portal:this.portal}))}))},getContent:function(w,
A){var E=this.url.replace("/community/","/content/")+(w?"/"+w:"");return h.request(E,A).then(B.hitch(this,function(G){G.folders=h.resultsToTypedArray(x,{portal:this.portal},G.folders);G.items=h.resultsToTypedArray(v,{portal:this.portal,folderId:w},G.items);return G}))},getThumbnailUrl:function(w){var A=this.thumbnailUrl;A&&w&&(A+=(-1===A.indexOf("?")?"?":"\x26")+"w\x3d"+w);return A}});D={Portal:D([g],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(w){w=
B.isObject(w)?w:{url:w};this.registerConnectEvents();e={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};w.self?(e.self=w.self,B.mixin(this,{url:w.url||b.getProtocolForWebResource()+"//"+(w.self.urlKey?w.self.urlKey+"."+w.self.customBaseUrl:w.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",w=w.self.user?this.signIn():this.init(this.url)):(w.url&&B.mixin(this,{url:w.url}),w=this.init(this.url));w.then(B.hitch(this,function(){this.emit("ready",
this);this.onLoad(this)}))},init:function(w,A){w=(w||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==w.indexOf("/sharing")?w+"/":w+"/sharing/rest/";b.canUseXhr(this.portalUrl)||f.defaults.io.corsEnabledServers.push(this.portalUrl.replace(/^https?:\/\//i,""));return this._getSelf(this.portalUrl).then(B.hitch(this,function(E){e.self=B.mixin({},E);(E=E.user)&&A&&(e.currentToken=A&&A.token,e.loggedInUser=new u(B.mixin(E,{portal:this,credential:A})));e.self.id&&!1===e.self.canSearchPublic&&(e.extraQuery=
" AND orgid:"+e.self.id);B.mixin(this,e.self);this.thumbnailUrl=h.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),B.hitch(this,function(E){this.onError(E);throw E;}))},signIn:function(){var w=new c,A=B.hitch(this,function(){this._onSignIn().then(B.hitch(this,function(){w.resolve(e.loggedInUser)}),B.hitch(this,
function(E){w.reject(E)}))});if(e&&e.self)e&&e.loggedInUser?setTimeout(function(){w.resolve(e.loggedInUser)},0):A();else this.on("load",B.hitch(this,function(){A()}));return w},signOut:function(){e.loggedInUser.credential&&e.loggedInUser.credential.destroy();e.loggedInUser=null;e.options.disableIdentityLookup=!0;h.clearFieldsFromObject(e.self,this);e.self=null;return this.init(this.url)},getPortalUser:function(){return e.loggedInUser},addResource:function(w,A){return h.request(this.portalUrl+"portals/self/addResource",
{key:w,text:A},{usePost:!0})},update:function(w){return h.request(this.portalUrl+"portals/self/update",w,{usePost:!0})},queryGroups:function(w,A){return this._queryPortal(this.portalUrl+"community/groups",h.formatQueryParams({},w,A),F)},queryItems:function(w,A){return this._queryPortal(this.portalUrl+"search",h.formatQueryParams({},w,A),v)},queryListings:function(w){w=h.formatQueryParams({},w,!0);var A="";w.q&&-1<w.q.toLowerCase().indexOf("mylistings:true")?(w.q=w.q.toLowerCase().replace("mylistings:true",
""),A="?mylistings\x3dtrue"):w.q||(w.q='""');return this._queryPortal(this.portalUrl+"content/listings"+A,w,y)},queryCustomerList:function(w,A){var E=h.formatQueryParams({},w,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",E)},getProvisions:function(){return this.getCustomers().then(B.hitch(this,function(w){return w.purchases}))},getInterests:function(){return this.getCustomers().then(B.hitch(this,function(w){return w.interests}))},getTrials:function(){return this.getCustomers().then(B.hitch(this,
function(w){return w.trials}))},getCustomers:function(w){return h.request(this.portalUrl+"portals/self/customers",{status:w||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(w){return w.purchases})},getMyInterests:function(){return this.getPurchases().then(function(w){return w.interests})},getPurchases:function(){return h.request(this.portalUrl+"portals/self/purchases").then(B.hitch(this,function(w){w.interests=k.map(w.interests,function(A){return B.mixin(A.provision,{listing:A.listing})});
w.purchases=k.map(w.purchases,function(A){return B.mixin(A.provision,{listing:A.listing})});w.trials=k.map(w.trials,function(A){return B.mixin(A.provision,{listing:A.listing})});w.interests=h.resultsToTypedArray(C,{portal:this},w.interests);w.trials=h.resultsToTypedArray(C,{portal:this},w.trials);w.purchases=h.resultsToTypedArray(C,{portal:this},w.purchases);return w}))},queryUsers:function(w,A){return this._queryPortal(this.portalUrl+"community/users",h.formatQueryParams({sortField:"username"},w,
A),u)},_onSignIn:function(){e.options.disableIdentityLookup=!1;e.self=null;return m.id.getCredential(this.portalUrl).then(B.hitch(this,"init",this.url)).then(function(){return e.loggedInUser},B.hitch(this,function(w){e.options.disableIdentityLookup=!0;this.onError(w);throw w;}))},_getSelf:function(w){w+="portals/self";if(e.self){var A=new c;setTimeout(function(){A.resolve(e.self)},0)}else A=h.request(w,{culture:a.locale,withCredentials:!0});return A},_queryPortal:function(w,A,E){var G=B.mixin({num:10,
start:0,sortField:"title",sortOrder:"asc"},A),H=["start","query","num","nextStart"];w=h.request(w,G).then(B.hitch(this,function(K){K.results=h.resultsToTypedArray(E,{portal:this},K);K.queryParams=B.mixin({},G);K.nextQueryParams=B.mixin(G,{start:K.nextStart});return h.clearFieldsFromObject(H,K)}));w=B.delegate(w);w.queryParams=B.mixin({},G);w.nextQueryParams=c.when(w,function(K){return K.nextQueryParams});return d(w)}}),PortalFolder:x,PortalGroup:F,PortalItem:v,PortalUser:u,PortalComment:t,PortalRating:z,
PortalUtil:h,PortalResult:d,PortalListing:y};B.mixin(B.getObject("arcgis",!0,m),D);return D})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x){D=D(b,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(u){this._jobUpdateHandler=B.hitch(this,this._jobUpdateHandler);this._getJobStatus=B.hitch(this,this._getJobStatus);this._getResultDataHandler=
B.hitch(this,this._getResultDataHandler);this._getResultImageHandler=B.hitch(this,this._getResultImageHandler);this._executeHandler=B.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(u){this.updateDelay=u},setProcessSpatialReference:function(u){this.processSpatialReference=u},setOutputSpatialReference:function(u){this._setOutSR(u)},setOutSpatialReference:function(u){this._setOutSR(u)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(u){this.outSpatialReference=this.outputSpatialReference=u},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(u,w,A){for(var E in u){var G=u[E];B.isArray(G)?u[E]=k.toJson(a.map(G,function(H){return this._gpEncode({item:H},!0).item},this)):G instanceof Date&&(u[E]=G.getTime())}return this._encode(u,w,A)},_decode:function(u){var w=u.dataType,
A=new y(u);if(-1!==a.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],w))return A;if("GPLinearUnit"===w)A.value=new h(A.value);else if("GPFeatureRecordSetLayer"===w||"GPRecordSet"===w)A.value=new g(A.value);else if("GPDataFile"===w)A.value=new t(A.value);else if("GPDate"===w)u=A.value,B.isString(u)?A.value=new v({date:u}):A.value=new Date(u);else if("GPRasterData"===w||"GPRasterDataLayer"===w)u=u.value.mapImage,A.value=u?new x(u):new z(A.value);else if(-1!==w.indexOf("GPMultiValue:")){var E=w.split(":")[1];
u=A.value;A.value=a.map(u,function(G){return this._decode({paramName:"_name",dataType:E,value:G}).value},this)}else A=null;return A},submitJob:function(u,w,A,E,G){var H=this._getOutSR(),K=G.assembly;u=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||k.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||k.toJson(this.processSpatialReference.toJson()):null},u),null,K&&K[0]);var I=this._jobUpdateHandler,J=this._errorHandler;
return m({url:this._url.path+"/submitJob",content:u,callbackParamName:"callback",load:function(L,M){I(L,M,!1,w,A,G.dfd)},error:function(L){J(L,E,G.dfd)}})},_jobUpdateHandler:function(u,w,A,E,G,H){var K=u.jobId;w=new e(u);this._successHandler([w],"onStatusUpdate",G,A&&H);if(!A)switch(clearTimeout(this._updateTimers[K]),this._updateTimers[K]=null,H&&H.progress(w),u.jobStatus){case e.STATUS_SUBMITTED:case e.STATUS_EXECUTING:case e.STATUS_WAITING:case e.STATUS_NEW:var I=this._getJobStatus;this._updateTimers[K]=
setTimeout(function(){I(K,A,E,G,H)},this.updateDelay);break;default:this._successHandler([w],"onJobComplete",E,H)}},_getJobStatus:function(u,w,A,E,G){var H=this._jobUpdateHandler;m({url:this._url.path+"/jobs/"+u,content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(K,I){H(K,I,w,A,E,G)},error:this._errorHandler})},_getResultDataHandler:function(u,w,A,E,G){try{var H=this._decode(u);this._successHandler([H],"onGetResultDataComplete",A,G)}catch(K){this._errorHandler(K,
E,G)}},getResultData:function(u,w,A,E){var G=this._getResultDataHandler,H=this._errorHandler,K=new c(q._dfdCanceller);K._pendingDfd=m({url:this._url.path+"/jobs/"+u+"/results/"+w,content:B.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(I,J){G(I,J,A,E,K)},error:function(I){H(I,E,K)}});return K},checkJobStatus:function(u,w,A){var E=this._jobUpdateHandler,G=this._errorHandler,H=new c(q._dfdCanceller);H._pendingDfd=m({url:this._url.path+"/jobs/"+u,content:B.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(K,I){E(K,I,!0,null,w,H)},error:function(K){G(K,A,H)}});return H},cancelJob:function(u,w,A){var E=this._errorHandler,G=new c(q._dfdCanceller);G._pendingDfd=m({url:this._url.path+"/jobs/"+u+"/cancel",content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:B.hitch(this,function(H,K){this._successHandler([H],"onJobCancel",w,G)}),error:function(H){E(H,A,G)}});return G},execute:function(u,w,A,E){var G=this._getOutSR(),
H=E.assembly;u=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":G?G.wkid||k.toJson(G.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||k.toJson(this.processSpatialReference.toJson()):null},u),null,H&&H[0]);var K=this._executeHandler,I=this._errorHandler;return m({url:this._url.path+"/execute",content:u,callbackParamName:"callback",load:function(J,L){K(J,L,w,A,E.dfd)},error:function(J){I(J,A,E.dfd)}})},_executeHandler:function(u,w,A,E,G){try{var H=
u.results,K,I=u.messages;var J=0;for(K=H.length;J<K;J++)H[J]=this._decode(H[J]);J=0;for(K=I.length;J<K;J++)I[J]=new d(I[J]);this._successHandler([H,I],"onExecuteComplete",A,G)}catch(L){this._errorHandler(L,E,G)}},_getResultImageHandler:function(u,w,A,E,G){try{var H=this._decode(u);this._successHandler([H],"onGetResultImageComplete",A,G)}catch(K){this._errorHandler(K,E,G)}},getResultImage:function(u,w,A,E,G){var H=this._getResultImageHandler,K=this._errorHandler;A=this._gpEncode(B.mixin({},this._url.query,
{f:"json"},A.toJson()));var I=new c(q._dfdCanceller);I._pendingDfd=m({url:this._url.path+"/jobs/"+u+"/results/"+w,content:A,callbackParamName:"callback",load:function(J,L){H(J,L,E,G,I)},error:function(J){K(J,G,I)}});return I},cancelJobStatusUpdates:function(u){clearTimeout(this._updateTimers[u]);this._updateTimers[u]=null},getResultImageLayer:function(u,w,A,E){if(null==w){var G=this._url.path.indexOf("/GPServer/");u=this._url.path.substring(0,G)+"/MapServer/jobs/"+u}else u=this._url.path+"/jobs/"+
u+"/results/"+w;this._url.query&&(u+="?"+r.objectToQuery(this._url.query));w=null==w?new F(u,{imageParameters:A}):new C(u,{imageParameters:A},!0);this.onGetResultImageLayerComplete(w);E&&E(w);return w},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});l._createWrappers(D);B.setObject("tasks.Geoprocessor",D,f);return D})},
"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(D,B,a,c,k,n,r,f){D=D(f,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(m,q){m&&B.isString(m)&&(this._url=r.urlToObject(this.url=m));q&&q.requestOptions&&(this.requestOptions=q.requestOptions);this.normalization=!0;this._errorHandler=B.hitch(this,this._errorHandler);this.registerConnectEvents()},
_useSSL:function(){var m=this._url,q=/^http:/i;this.url&&(this.url=this.url.replace(q,"https:"));m&&m.path&&(m.path=m.path.replace(q,"https:"))},_encode:function(m,q,l){var b={},g;for(g in m)if("declaredClass"!==g){var e=m[g];var d=typeof e;if(null!==e&&void 0!==e&&"function"!==d)if(B.isArray(e)){b[g]=[];var h=e.length;for(d=0;d<h;d++)b[g][d]=this._encode(e[d])}else"object"===d?e.toJson&&(d=e.toJson(l&&l[g]),"esri.tasks.FeatureSet"===e.declaredClass&&d.spatialReference&&(d.sr=d.spatialReference,delete d.spatialReference),
b[g]=q?d:a.toJson(d)):b[g]=e}return b},_successHandler:function(m,q,l,b){q&&this[q].apply(this,m);l&&l.apply(null,m);b&&n._resDfd(b,m)},_errorHandler:function(m,q,l){this.onError(m);q&&q(m);l&&l.errback(m)},setNormalization:function(m){this.normalization=m},onError:function(){}});return k.Task=D})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b){D=D(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(g,e){if(g){B.mixin(this,g);var d=this.features=this.features||[],h=g.spatialReference;h=this.spatialReference=l.createInstance(f.simpleConstructor,h);var t=l.getGeometryType(g.geometryType);this.geometryType=g.geometryType;g.fields&&(this.fields=g.fields);var z=l.supportsLazyUnquantization(this.geometryType),v=l.unquantizeFunction(this.geometryType,this.transform),y=!!(e&&z&&v),C=t&&(y?t.accessorConstructor:
t.simpleConstructor);a.forEach(d,function(F,x){var u=l.createInstance(r.simpleConstructor),w=F.geometry;if(t&&w){var A=u.geometry=l.createInstance(C,y?null:w);A.setSpatialReference(w.spatialReference?l.createInstance(f.simpleConstructor,w.spatialReference):h);y&&A.setupLazyUnquantization(v,w)}u.symbol=F.symbol?b.fromJson(F.symbol):null;u.attributes=F.attributes;d[x]=u});y||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(g){var e=
{};this.displayFieldName&&(e.displayFieldName=this.displayFieldName);this.fields&&(e.fields=this.fields);this.spatialReference?e.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(e.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(e.geometryType=l.getJsonType(this.features[0].geometry)),e.features=m._encodeGraphics(this.features,g));e.geometryType=e.geometryType||this.geometryType;e.exceededTransferLimit=
this.exceededTransferLimit;e.transform=this.transform;return n.fixJson(e)},_hydrate:function(){l.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(g){if(!this.geometryType)return this.transform=null,this;var e=g.translate[0],d=g.translate[1],h=g.scale[0],t=g.scale[1],z=this.features,v=function(x,u,w){var A,E=[];var G=0;for(A=x.length;G<A;G++){var H=x[G];if(0<G){var K=u(H[0]);H=w(H[1]);if(K!==I||H!==J){E.push([K-I,H-J]);var I=K;var J=H}}else I=u(H[0]),
J=w(H[1]),E.push([I,J])}return 0<E.length?E:null},y=function(x,u,w){if("esriGeometryPoint"===x)return function(A){A.x=u(A.x);A.y=w(A.y);return A};if("esriGeometryPolyline"===x||"esriGeometryPolygon"===x)return function(A){var E;var G=A.rings||A.paths;var H=[];var K=0;for(E=G.length;K<E;K++){var I=G[K];(I=v(I,u,w))&&H.push(I)}return 0<H.length?(A.rings?A.rings=H:A.paths=H,A):null};if("esriGeometryMultipoint"===x)return function(A){var E=v(A.points,u,w);return 0<E.length?(A.points=E,A):null};if("esriGeometryEnvelope"===
x)return function(A){return A}}(this.geometryType,function(x){return Math.round((x-e)/h)},function(x){return Math.round((d-x)/t)}),C;var F=0;for(C=z.length;F<C;F++)z[F].geometry&&(y(z[F].geometry)||z[F].setGeometry(null));this.transform=g;return this}});D.createGraphics=function(g){var e=g.geometryType,d=l.createInstance(f.simpleConstructor,g.spatialReference),h=l.getGeometryType(e).accessorConstructor,t=l.unquantizeFunction(e,g.transform);return a.map(g.features,function(z,v){var y=l.createInstance(r.simpleConstructor),
C=z.geometry;if(C){var F=y.geometry=l.createInstance(h);F.setSpatialReference(d);F.setupLazyUnquantization(t,C)}y.attributes=z.attributes;return y})};D.createPolygon=function(g,e,d){if(g){var h=l.createInstance(q.accessorConstructor);h.setSpatialReference(e);e=l.unquantizeFunction("esriGeometryPolygon",d);h.setupLazyUnquantization(e,g)}return h};B.setObject("tasks.FeatureSet",D,k);return D})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(D,B,a,c,k,n,r,f,m){function q(){}D=D(null,{declaredClass:"esri.Graphic",constructor:function(l,b,g,e){this._construct();l&&!l.declaredClass?(this.geometry=l.geometry?f.fromJson(l.geometry):null,this.symbol=l.symbol?m.fromJson(l.symbol):null,this.attributes=l.attributes||null,this.infoTemplate=l.infoTemplate?new r(l.infoTemplate):null):(this.geometry=l,this.symbol=b,this.attributes=g,this.infoTemplate=e)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,
_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(l){this._parentGraphic=l},setSize:function(l){this.size=l;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(l){this._aggregationSourceLayer=
l;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(l){this._aggregationInfo=l;return this},getChildGraphics:function(){var l=this.getAggregationSourceLayer();return l?l.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var l=[];this._shape&&l.push(this._shape);this._bgShape&&l.push(this._bgShape);return l},getNode:function(){var l=this._shape&&this._shape.getNode();
return l&&l.nodeType?l:null},getNodes:function(){var l=this.getShapes(),b,g,e=l.length,d=[];for(g=0;g<e;g++)(b=l[g]&&l[g].getNode())&&b.nodeType&&d.push(b);return d},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var l=new this.constructor(this.toJson());l.visible=this.visible;l._layer=this._layer;l._sourceLayer=this._sourceLayer;l._aggregationSourceLayer=this._aggregationSourceLayer;l._aggregationInfo=this._aggregationInfo;
l._resolution=this._resolution;return l},draw:function(){var l=this._graphicsLayer;l&&l._draw(this,!0);return this},setGeometry:function(l){this.geometry=l;this._geomVersion++;var b=this._graphicsLayer;b&&(b._updateExtent(this),this.draw(),l&&"polyline"===l.type&&b._updateSVGMarkers());return this},setResolution:function(l){this._resolution=l;return this},getResolution:function(){return this._resolution},setSymbol:function(l,b){var g=this._graphicsLayer,e=this._shape;this.symbol=l;g&&(b&&e&&g._removeShape(this),
this.draw());return this},setAttributes:function(l){this.attributes=l;this.clearCache();return this},setInfoTemplate:function(l){this.infoTemplate=l;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var l=this.getLayer();return this.infoTemplate||l&&l.infoTemplate},getTitle:function(){var l=this.getInfoTemplate(),b=l&&l.title;if(B.isFunction(b))b=b.call(l,this);else if(B.isString(b)){var g=(l=this.getLayer())&&l._getDateOpts;b=n.substitute(this.attributes,
b,{first:!0,dateFormat:g&&g.call(l)})}return b},getContent:function(){var l=this.getInfoTemplate(),b=l&&l.content;if(B.isFunction(b))b=b.call(l,this);else if(B.isString(b)){var g=(l=this.getLayer())&&l._getDateOpts;b=n.substitute(this.attributes,b,{dateFormat:g&&g.call(l)})}return b},attr:function(l,b){null==b||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[l]=b,this._setDataAttr(l,b));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=
!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var l;if(this.getShapes().length){var b=this.getNodes();var g=b.length;for(l=0;l<g;l++)k.show(b[l])}else this.draw();(b=this._graphicsLayer)&&b._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var l=this._graphicsLayer,b,g;if(l){if("canvas-2d"===l.surfaceType)l._removeShape(this);else{var e=this.getNodes();if(g=e.length)for(b=
0;b<g;b++)k.hide(e[b])}l._graphicVisibilityChanged(this)}return this},toJson:function(){var l={};this.geometry&&(l.geometry=this.geometry.toJson());this.attributes&&(l.attributes=B.mixin({},this.attributes));this.symbol&&(l.symbol=this.symbol.toJson());this.infoTemplate&&(l.infoTemplate=this.infoTemplate.toJson());return l},_setDataAttr:function(l,b){var g=this.getNodes(),e,d=g.length;for(e=0;e<d;e++)this._setDOMDataAttr(g[e],l,b)},_setDOMDataAttr:function(l,b,g){null==g?l.removeAttribute(b):l.setAttribute(b,
g)},_applyDataAttrs:function(){var l=this._dataAttrs;if(l){var b=this.getNodes(),g,e=b.length;for(g=0;g<e;g++)for(var d in l)this._setDOMDataAttr(b[g],d,l[d])}},_getViewInfo:function(l){return(l=(l=l||this.getLayer())&&l.getMap())&&l.getViewInfo()},evaluateExpression:function(l,b){return this._getDataValue(l._attributeDef,l._attributeCache,null,null,l,b)},_getDataValue:function(l,b,g,e,d,h){var t=b.id,z=this.attributes,v=l.field,y=b.isNumeric,C=null;if(t){var F=this._computedAttributes,x=this._computedVersion,
u=this._computedGeomVersion;e=this._getViewInfo(e);var w=!(!d||!d.async),A=h&&h.skipCache||w,E=!h||!1!==h.strictReturnType,G=b.dependsOnView||b.isJSFunc,H=b.dependsOnGeometry;F||(F=this._computedAttributes={});G&&!x&&(x=this._computedVersion={});H&&!u&&(u=this._computedGeomVersion={});var K=G&&x[t]!==e.version||H&&u[t]!==this._geomVersion;C=F[t];if(void 0===C||K||A)C=null,b.hasExpr?C=d?d.evaluate(h&&h.context):g.executeFunction(b.compiledFunc,g.createExecContext(this,e)):b.isJSFunc?C=v(this,l):z&&
(C=z[v],y&&this._isValidNumber(C)&&(b=l.normalizationType||"field",g=C,C=null,d=l.normalizationTotal,l=z[l.normalizationField],"log"===b&&0!==g?C=Math.log(g)*Math.LOG10E:"percent-of-total"===b&&this._isValidNumber(d)&&0!==d?C=g/d*100:"field"===b&&this._isValidNumber(l)&&0!==l&&(C=g/l))),E&&(w?y&&(this._construct(),C=C.then(this._sanitizeNumericValue)):C=this._sanitizeValue(C,y)),A||(F[t]=C,G&&(x[t]=e.version),H&&(u[t]=this._geomVersion))}else z&&(C=this._sanitizeValue(z[v],y));return C},_sanitizeValue:function(l,
b){b&&!this._isValidNumber(l)&&(l=null);return l},_sanitizeNumericValue:function(l){return this._sanitizeValue(l,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=B.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(l){return"number"===typeof l&&!isNaN(l)&&Infinity!==l&&-Infinity!==l},clearCache:function(l){if(null!=l){var b=this._computedAttributes,g=this._computedVersion,e=this._computedGeomVersion;b&&(b[l]=void 0);g&&(g[l]=void 0);e&&(e[l]=
void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});D.prototype.getShape=D.prototype.getDojoShape;q.prototype=D.prototype;D.simpleConstructor=q;return c.Graphic=D})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.InfoTemplate",constructor:function(n,r){n&&B.isObject(n)&&!B.isFunction(n)?B.mixin(this,n):(this.title=n||"${*}",this.content=r||"${*}")},
setTitle:function(n){this.title=n;return this},setContent:function(n){this.content=n;return this},toJson:function(){return k.fixJson({title:this.title,content:this.content})}});return c.InfoTemplate=D})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){var b={createDefaultSymbol:function(g){switch(g){case "esriGeometryPoint":case "esriGeometryMultipoint":var e=
b.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":e=b.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":e=b.createDefaultFillSymbol()}return e},createDefaultMarkerSymbol:function(){return new k},createDefaultLineSymbol:function(){return new r},createDefaultFillSymbol:function(){return new m},getFirstSupportedSymbol:function(g){var e;B.some(g,function(d){d&&-1<b.supportedSymbolTypes.indexOf(d.type)&&(e=d);return!!e});
return e},isPointSymbol:function(g){return g?-1<b.supportedPointSymbolTypes.indexOf(g.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(g,e){var d=null;switch(g.type){case "esriSMS":d=new k(g);break;case "esriPMS":d=new n(g);break;case "esriTS":d=new l(g);break;case "esriSLS":d=void 0!==g.cap?new f(g):new r(g);break;case "esriCLS":d=new f(g);break;case "esriSFS":d=new m(g);break;
case "esriPFS":d=new q(g);break;default:d=(d=e&&e.geometryType)?b.createDefaultSymbol(d):null}return d},getShapeDescriptors:function(g){return g&&g.getShapeDescriptors?g.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};D.mixin(D.getObject("symbol",!0,c),b);return b})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(D,B,a,c,k,n,
r,f,m){var q={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},l={style:q.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};D=D(f,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(b,g,e,d){b?B.isString(b)?(this.style=b,g&&(this.size=g),e&&(this.outline=e),d&&(this.color=d)):(this.style=r.valueOf(this._styles,this.style),b.outline&&(this.outline=new m(b.outline))):(B.mixin(this,l),this.size=k.pt2px(this.size),this.outline=new m(this.outline),this.color=new a(this.color));this.style||(this.style=q.STYLE_CIRCLE)},setStyle:function(b){this.style=b;return this},setPath:function(b){this.path=b;this.setStyle(q.STYLE_PATH);return this},setOutline:function(b){this.outline=
b;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(b,g,e){this._targetWidth=b;this._targetHeight=g;this._spikeSize=e},getShapeDescriptors:function(){var b,g=this.style,e=(this.size||k.pt2px(l.size))/2,d=0-e,h=0+e,t=0-e,z=0+e;switch(g){case q.STYLE_CIRCLE:var v={type:"circle",cx:0,cy:0,r:e};var y=this.getFill();if(b=this.getStroke())b.style=b.style||"Solid";break;case q.STYLE_CROSS:v={type:"path",path:"M "+d+",0 L "+
h+",0 M 0,"+t+" L 0,"+z+" E"};y=null;b=this.getStroke();break;case q.STYLE_DIAMOND:v={type:"path",path:"M "+d+",0 L 0,"+t+" L "+h+",0 L 0,"+z+" L "+d+",0 Z"};y=this.getFill();b=this.getStroke();break;case q.STYLE_SQUARE:v={type:"path",path:"M "+d+","+z+" L "+d+","+t+" L "+h+","+t+" L "+h+","+z+" L "+d+","+z+" Z"};y=this.getFill();b=this.getStroke();break;case q.STYLE_TRIANGLE:v={type:"path",path:"M "+d+","+z+" L 0,"+t+" L "+h+","+z+" L "+d+","+z+" Z"};y=this.getFill();b=this.getStroke();break;case q.STYLE_X:v=
{type:"path",path:"M "+d+","+z+" L "+h+","+t+" M "+d+","+t+" L "+h+","+z+" E"};y=null;b=this.getStroke();break;case q.STYLE_PATH:v={type:"path",path:this.path||""},y=this.getFill(),b=this.getStroke()}return{defaultShape:v,fill:y,stroke:b}},toJson:function(){var b=this.style,g=this.outline,e=B.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[b]||"esriSMSCircle"});g&&(e.outline=g.toJson());"x"===b||"cross"===b?delete e.color:"target"===b&&(e.style="esriSMSSquare",delete e.color,
0<this._targetHeight&&0<this._targetWidth&&(e.size=k.px2pt(Math.max(this._targetHeight,this._targetWidth))));e.path=this.path;return r.fixJson(e)}});B.mixin(D,q);D.defaultProps=l;B.setObject("symbol.SimpleMarkerSymbol",D,n);n.symbol.defaultSimpleMarkerSymbol=l;return D})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(D,B,a,c,k,n,r,f,m){var q=
B.getObject("dojox.gfx",!0),l=q._base={};q._hasClass=function(t,z){var v=t.getAttribute("className");return v&&0<=(" "+v+" ").indexOf(" "+z+" ")};q._addClass=function(t,z){var v=t.getAttribute("className")||"";(!v||0>(" "+v+" ").indexOf(" "+z+" "))&&t.setAttribute("className",v+(v?" ":"")+z)};q._removeClass=function(t,z){var v=t.getAttribute("className");v&&t.setAttribute("className",v.replace(new RegExp("(^|\\s+)"+z+"(\\s+|$)"),"$1$2"))};l._getFontMeasurements=function(){var t={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},z;if(c("ie")){var v=k.doc.documentElement.style.fontSize||"";v||(k.doc.documentElement.style.fontSize="100%")}var y=f.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},k.body());for(z in t)y.style.fontSize=z,t[z]=16*Math.round(12*y.offsetHeight/16)/12/1E3;c("ie")&&(k.doc.documentElement.style.fontSize=
v);k.body().removeChild(y);return t};var b=null;l._getCachedFontMeasurements=function(t){if(t||!b)b=l._getFontMeasurements();return b};var g=null,e={};l._getTextBox=function(t,z,v){var y=arguments.length,C;g||(g=f.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},k.body()));var F=g;F.className="";var x=F.style;x.borderWidth="0";x.margin="0";x.padding="0";x.outline="0";if(1<y&&z)for(C in z)C in e||(x[C]=z[C]);2<y&&v&&(F.className=v);F.innerHTML=t;F.getBoundingClientRect?
(x=F.getBoundingClientRect(),x={l:x.left,t:x.top,w:x.width||x.right-x.left,h:x.height||x.bottom-x.top}):x=m.getMarginBox(F);F.innerHTML="";return x};l._computeTextLocation=function(t,z,v,y){var C={};switch(t.align){case "end":C.x=t.x-z;break;case "middle":C.x=t.x-z/2;break;default:C.x=t.x}C.y=t.y-v*(y?.75:1);return C};l._computeTextBoundingBox=function(t){if(!q._base._isRendered(t))return{x:0,y:0,width:0,height:0};var z=t.getShape();var v=t.getFont()||q.defaultFont;t=t.getTextWidth();v=q.normalizedLength(v.size);
z=l._computeTextLocation(z,t,v,!0);return{x:z.x,y:z.y,width:t,height:v}};l._isRendered=function(t){for(t=t.parent;t&&t.getParent;)t=t.parent;return null!==t};var d=0;l._getUniqueId=function(){do var t=D._scopeName+"xUnique"+ ++d;while(r.byId(t));return t};var h=c("pointer-events")?"touchAction":c("MSPointer")?"msTouchAction":null;l._fixMsTouchAction=h?function(t){t.rawNode.style[h]="none"}:function(){};B.mixin(q,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var t={};return function(z){var v=t[z];if(v)return new v;v=t[z]=
function(){};v.prototype=q["default"+z];return new v}}(),normalizeColor:function(t){return t instanceof a?t:new a(t)},normalizeParameters:function(t,z){var v;if(z){var y={};for(v in t)v in z&&!(v in y)&&(t[v]=z[v])}return t},makeParameters:function(t,z){var v=null;if(!z)return B.delegate(t);var y={};for(v in t)v in y||(y[v]=B.clone(v in z?z[v]:t[v]));return y},formatNumber:function(t,z){var v=t.toString();if(0<=v.indexOf("e"))v=t.toFixed(4);else{var y=v.indexOf(".");0<=y&&5<v.length-y&&(v=t.toFixed(4))}return 0>
t?v:z?" "+v:v},makeFontString:function(t){return t.style+" "+t.variant+" "+t.weight+" "+t.size+" "+t.family},splitFontString:function(t){var z=q.getDefault("Font");t=t.split(/\s+/);if(!(5>t.length)){z.style=t[0];z.variant=t[1];z.weight=t[2];var v=t[3].indexOf("/");z.size=0>v?t[3]:t[3].substring(0,v);var y=4;0>v&&("/"==t[4]?y=6:"/"==t[4].charAt(0)&&(y=5));y<t.length&&(z.family=t.slice(y).join(" "))}return z},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return q._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(t){return t*q.px_in_pt()},px2pt:function(t){return t/q.px_in_pt()},normalizedLength:function(t){if(0===t.length)return 0;if(2<t.length){var z=q.px_in_pt(),v=parseFloat(t);switch(t.slice(-2)){case "px":return v;case "pt":return v*z;case "in":return 72*v*z;case "pc":return 12*v*z;case "mm":return v*q.mm_in_pt*z;case "cm":return v*q.cm_in_pt*z}}return parseFloat(t)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(t,z){return t&&z&&t===z},switchTo:function(t){var z="string"==typeof t?q[t]:t;z&&(n.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(v){q[v]=z[v]}),"string"==typeof t?q.renderer=t:n.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(v){return q.renderer=q[v]&&q[v].Surface===q.Surface?v:null}))}});return q})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(D,B,a){B.switchTo(a);return B})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(D,B,a,c,k){var n=null;a.add("vml",function(r,f,m){m.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';r="adj"in m.firstChild;m.innerHTML="";return r});return{load:function(r,f,m){function q(){f(["dojox/gfx/"+l],function(e){D.renderer=l;n=e;m(e)})}if(n&&"force"!=r)m(n);else{var l=k.forceGfxRenderer;r=!l&&(B.isString(k.gfxRenderer)?
k.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var b,g;!l&&r.length;)switch(r.shift()){case "svg":"SVGAngle"in c.global&&(l="svg");break;case "vml":a("vml")&&(l="vml");break;case "silverlight":try{a("ie")?(b=new ActiveXObject("AgControl.AgControl"),b.IsVersionSupported("1.0"))&&(g=!0):navigator.plugins["Silverlight Plug-In"]&&(g=!0)}catch(e){g=!1}finally{b=null}g&&(l="silverlight");break;case "canvas":c.global.CanvasRenderingContext2D&&(l="canvas")}"canvas"===l&&!1!==k.canvasEvents&&(l=
"canvasWithEvents");"svg"==l&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(q):q()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){function g(u,w){return a.doc.createElementNS?a.doc.createElementNS(u,w):a.doc.createElement(w)}function e(u,w,A,E){return u.setAttributeNS?u.setAttributeNS(w,
A,E):u.setAttribute(A,E)}function d(u){return h.useSvgWeb?a.doc.createTextNode(u,!0):a.doc.createTextNode(u)}var h=q.svg={};h.useSvgWeb="undefined"!=typeof window.svgweb;var t=navigator.userAgent,z=B("ios"),v=B("android"),y=B("chrome")||v&&4<=v?"auto":"optimizeLegibility";h.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};h.getRef=function(u){return u&&"none"!=u?u.match(/^url\(#.+\)$/)?c.byId(u.slice(5,-1)):u.match(/^#dojoUnique\d+$/)?c.byId(u.slice(1)):null:null};h.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var C=0;h.Shape=k("dojox.gfx.svg.Shape",l.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var u=this.rawNode.getAttribute("fill");(u=h.getRef(u))&&u.parentNode.removeChild(u)}this.clip&&(u=this.rawNode.getAttribute("clip-path"))&&(u=c.byId(u.match(/gfx_clip[\d]+/)[0]))&&u.parentNode.removeChild(u);
l.Shape.prototype.destroy.apply(this,arguments)},setFill:function(u){if(!u)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var w=function(E){this.setAttribute(E,A[E].toFixed(8))};if("object"==typeof u&&"type"in u){switch(u.type){case "linear":var A=q.makeParameters(q.defaultLinearGradient,u);u=this._setFillObject(A,"linearGradient");n.forEach(["x1","y1","x2","y2"],w,u);break;case "radial":A=q.makeParameters(q.defaultRadialGradient,
u);u=this._setFillObject(A,"radialGradient");n.forEach(["cx","cy","r"],w,u);break;case "pattern":A=q.makeParameters(q.defaultPattern,u),u=this._setFillObject(A,"pattern"),n.forEach(["x","y","width","height"],w,u)}this.fillStyle=A;return this}this.fillStyle=A=q.normalizeColor(u);this.rawNode.setAttribute("fill",A.toCss());this.rawNode.setAttribute("fill-opacity",A.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(u){var w=this.rawNode;if(!u)return this.strokeStyle=
null,w.setAttribute("stroke","none"),w.setAttribute("stroke-opacity",0),this;if("string"==typeof u||D.isArray(u)||u instanceof m)u={color:u};u=this.strokeStyle=q.makeParameters(q.defaultStroke,u);u.color=q.normalizeColor(u.color);if(u){var A=0>u.width?0:u.width;w.setAttribute("stroke",u.color.toCss());w.setAttribute("stroke-opacity",u.color.a);w.setAttribute("stroke-width",A);w.setAttribute("stroke-linecap",u.cap);"number"==typeof u.join?(w.setAttribute("stroke-linejoin","miter"),w.setAttribute("stroke-miterlimit",
u.join)):w.setAttribute("stroke-linejoin",u.join);var E=u.style.toLowerCase();E in h.dasharray&&(E=h.dasharray[E]);if(E instanceof Array){E=D._toArray(E);var G;for(G=0;G<E.length;++G)E[G]*=A;if("butt"!=u.cap){for(G=0;G<E.length;G+=2)E[G]-=A,1>E[G]&&(E[G]=1);for(G=1;G<E.length;G+=2)E[G]+=A}E=E.join(",")}w.setAttribute("stroke-dasharray",E);w.setAttribute("dojoGfxStrokeStyle",u.style)}return this},_getParentSurface:function(){for(var u=this.parent;u&&!(u instanceof q.Surface);u=u.parent);return u},
_setFillObject:function(u,w){var A=h.xmlns.svg;this.fillStyle=u;var E=this._getParentSurface().defNode,G=this.rawNode.getAttribute("fill");if(G=h.getRef(G))if(G.tagName.toLowerCase()!=w.toLowerCase()){var H=G.id;G.parentNode.removeChild(G);G=g(A,w);G.setAttribute("id",H);E.appendChild(G)}else for(;G.childNodes.length;)G.removeChild(G.lastChild);else G=g(A,w),G.setAttribute("id",q._base._getUniqueId()),E.appendChild(G);if("pattern"==w)G.setAttribute("patternUnits","userSpaceOnUse"),A=g(A,"image"),
A.setAttribute("x",0),A.setAttribute("y",0),A.setAttribute("width",(0>u.width?0:u.width).toFixed(8)),A.setAttribute("height",(0>u.height?0:u.height).toFixed(8)),e(A,h.xmlns.xlink,"xlink:href",u.src),G.appendChild(A);else for(G.setAttribute("gradientUnits","userSpaceOnUse"),E=0;E<u.colors.length;++E){H=u.colors[E];var K=g(A,"stop"),I=H.color=q.normalizeColor(H.color);K.setAttribute("offset",H.offset.toFixed(8));K.setAttribute("stop-color",I.toCss());K.setAttribute("stop-opacity",I.a);G.appendChild(K)}this.rawNode.setAttribute("fill",
"url(#"+G.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return G},_applyTransform:function(){if(this.matrix){var u=this.matrix;this.rawNode.setAttribute("transform","matrix("+u.xx.toFixed(8)+","+u.yx.toFixed(8)+","+u.xy.toFixed(8)+","+u.yy.toFixed(8)+","+u.dx.toFixed(8)+","+u.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(u){u=this.rawNode=u;"image"!=this.shape.type&&u.setAttribute("fill",
"none");u.setAttribute("fill-opacity",0);u.setAttribute("stroke","none");u.setAttribute("stroke-opacity",0);u.setAttribute("stroke-width",1);u.setAttribute("stroke-linecap","butt");u.setAttribute("stroke-linejoin","miter");u.setAttribute("stroke-miterlimit",4);u.__gfxObject__=this},setShape:function(u){this.shape=q.makeParameters(this.shape,u);for(var w in this.shape)if("type"!=w){u=this.shape[w];if("width"===w||"height"===w)u=0>u?0:u;this.rawNode.setAttribute(w,u)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(u){this.inherited(arguments);var w=u?"width"in u?"rect":"cx"in u?"ellipse":"points"in u?"polyline":"d"in u?"path":null:null;if(u&&!w)return this;"polyline"===w&&(u=D.clone(u),u.points=u.points.join(","));var A,E=f.get(this.rawNode,"clip-path");E&&(A=c.byId(E.match(/gfx_clip[\d]+/)[0]))&&A.removeChild(A.childNodes[0]);u?(A?(w=g(h.xmlns.svg,w),A.appendChild(w)):
(E="gfx_clip"+ ++C,this.rawNode.setAttribute("clip-path","url(#"+E+")"),A=g(h.xmlns.svg,"clipPath"),w=g(h.xmlns.svg,w),A.appendChild(w),this.rawNode.parentNode.insertBefore(A,this.rawNode),f.set(A,"id",E)),f.set(w,u)):(this.rawNode.removeAttribute("clip-path"),A&&A.parentNode.removeChild(A));return this},_removeClipNode:function(){var u,w=f.get(this.rawNode,"clip-path");w&&(u=c.byId(w.match(/gfx_clip[\d]+/)[0]))&&u.parentNode.removeChild(u);return u}});h.Group=k("dojox.gfx.svg.Group",h.Shape,{constructor:function(){l.Container._init.call(this)},
setRawNode:function(u){this.rawNode=u;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);h.Shape.prototype.destroy.apply(this,arguments)}});h.Group.nodeType="g";h.Rect=k("dojox.gfx.svg.Rect",[h.Shape,l.Rect],{setShape:function(u){this.shape=q.makeParameters(this.shape,u);this.bbox=null;for(var w in this.shape)if("type"!=w&&"r"!=w){u=this.shape[w];if("width"===w||"height"===w)u=0>u?0:u;this.rawNode.setAttribute(w,u)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});h.Rect.nodeType="rect";h.Ellipse=k("dojox.gfx.svg.Ellipse",[h.Shape,l.Ellipse],{});h.Ellipse.nodeType="ellipse";h.Circle=k("dojox.gfx.svg.Circle",[h.Shape,l.Circle],{});h.Circle.nodeType="circle";h.Line=k("dojox.gfx.svg.Line",[h.Shape,l.Line],{});h.Line.nodeType="line";h.Polyline=k("dojox.gfx.svg.Polyline",[h.Shape,l.Polyline],{setShape:function(u,w){u&&u instanceof Array?(this.shape=q.makeParameters(this.shape,{points:u}),w&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=q.makeParameters(this.shape,u);this.bbox=null;this._normalizePoints();for(var A=[],E=this.shape.points,G=0;G<E.length;++G)A.push(E[G].x.toFixed(8),E[G].y.toFixed(8));this.rawNode.setAttribute("points",A.join(" "));return this}});h.Polyline.nodeType="polyline";h.Image=k("dojox.gfx.svg.Image",[h.Shape,l.Image],{setShape:function(u){this.shape=q.makeParameters(this.shape,u);this.bbox=null;u=this.rawNode;for(var w in this.shape)if("type"!=w&&"src"!=
w){var A=this.shape[w];if("width"===w||"height"===w)A=0>A?0:A;u.setAttribute(w,A)}u.setAttribute("preserveAspectRatio","none");e(u,h.xmlns.xlink,"xlink:href",this.shape.src);u.__gfxObject__=this;return this}});h.Image.nodeType="image";h.Text=k("dojox.gfx.svg.Text",[h.Shape,l.Text],{setShape:function(u){this.shape=q.makeParameters(this.shape,u);this.bbox=null;u=this.rawNode;var w=this.shape;u.setAttribute("x",w.x);u.setAttribute("y",w.y);u.setAttribute("text-anchor",w.align);u.setAttribute("text-decoration",
w.decoration);u.setAttribute("rotate",w.rotated?90:0);u.setAttribute("kerning",w.kerning?"auto":0);u.setAttribute("text-rendering",y);u.firstChild?u.firstChild.nodeValue=w.text:u.appendChild(d(w.text));return this},getTextWidth:function(){var u=this.rawNode,w=u.parentNode;u=u.cloneNode(!0);u.style.visibility="hidden";var A=0,E=u.firstChild.nodeValue;w.appendChild(u);if(""!=E)for(;!A;)A=u.getBBox?parseInt(u.getBBox().width):68;w.removeChild(u);return A},getBoundingBox:function(){var u=null;if(this.getShape().text)try{u=
this.rawNode.getBBox()}catch(w){u={x:0,y:0,width:0,height:0}}return u}});h.Text.nodeType="text";h.Path=k("dojox.gfx.svg.Path",[h.Shape,b.Path],{_updateWithSegment:function(u){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(u){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});h.Path.nodeType="path";h.TextPath=k("dojox.gfx.svg.TextPath",
[h.Shape,b.TextPath],{_updateWithSegment:function(u){this.inherited(arguments);this._setTextPath()},setShape:function(u){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var u=this.rawNode;if(!u.firstChild){var w=g(h.xmlns.svg,"textPath"),A=d("");w.appendChild(A);u.appendChild(w)}w=(w=u.firstChild.getAttributeNS(h.xmlns.xlink,"href"))&&h.getRef(w);if(!w&&(A=this._getParentSurface())){A=A.defNode;w=g(h.xmlns.svg,"path");var E=q._base._getUniqueId();
w.setAttribute("id",E);A.appendChild(w);e(u.firstChild,h.xmlns.xlink,"xlink:href","#"+E)}w&&w.setAttribute("d",this.shape.path)}},_setText:function(){var u=this.rawNode;if(!u.firstChild){var w=g(h.xmlns.svg,"textPath"),A=d("");w.appendChild(A);u.appendChild(w)}u=u.firstChild;w=this.text;u.setAttribute("alignment-baseline","middle");switch(w.align){case "middle":u.setAttribute("text-anchor","middle");u.setAttribute("startOffset","50%");break;case "end":u.setAttribute("text-anchor","end");u.setAttribute("startOffset",
"100%");break;default:u.setAttribute("text-anchor","start"),u.setAttribute("startOffset","0%")}u.setAttribute("baseline-shift","0.5ex");u.setAttribute("text-decoration",w.decoration);u.setAttribute("rotate",w.rotated?90:0);u.setAttribute("kerning",w.kerning?"auto":0);u.firstChild.data=w.text}});h.TextPath.nodeType="text";var F=534<function(){var u=/WebKit\/(\d*)/.exec(t);return u?u[1]:0}();h.Surface=k("dojox.gfx.svg.Surface",l.Surface,{constructor:function(){l.Container._init.call(this)},destroy:function(){l.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(u,w){if(!this.rawNode)return this;var A=0>u?0:u,E=0>w?0:w;this.rawNode.setAttribute("width",A);this.rawNode.setAttribute("height",E);F&&(this.rawNode.style.width=A,this.rawNode.style.height=E);return this},getDimensions:function(){return this.rawNode?{width:q.normalizedLength(this.rawNode.getAttribute("width")),height:q.normalizedLength(this.rawNode.getAttribute("height"))}:null}});h.createSurface=function(u,w,A){var E=new h.Surface;
E.rawNode=g(h.xmlns.svg,"svg");E.rawNode.setAttribute("overflow","hidden");w&&E.rawNode.setAttribute("width",0>w?0:w);A&&E.rawNode.setAttribute("height",0>A?0:A);w=g(h.xmlns.svg,"defs");E.rawNode.appendChild(w);E.defNode=w;E._parent=c.byId(u);E._parent.appendChild(E.rawNode);q._base._fixMsTouchAction(E);return E};B={_setFont:function(){var u=this.fontStyle;this.rawNode.setAttribute("font-style",u.style);this.rawNode.setAttribute("font-variant",u.variant);this.rawNode.setAttribute("font-weight",u.weight);
this.rawNode.setAttribute("font-size",u.size);this.rawNode.setAttribute("font-family",u.family)}};var x=l.Container;k=h.Container={openBatch:function(){if(!this._batch){var u=h.useSvgWeb?a.doc.createDocumentFragment(!0):a.doc.createDocumentFragment();this.fragment=u}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(u){this!=u.getParent()&&(this.fragment?
this.fragment.appendChild(u.rawNode):this.rawNode.appendChild(u.rawNode),x.add.apply(this,arguments),u.setClip(u.clip));return this},remove:function(u,w){this==u.getParent()&&(this.rawNode==u.rawNode.parentNode&&this.rawNode.removeChild(u.rawNode),this.fragment&&this.fragment==u.rawNode.parentNode&&this.fragment.removeChild(u.rawNode),u._removeClipNode(),x.remove.apply(this,arguments));return this},clear:function(){for(var u=this.rawNode;u.lastChild;)u.removeChild(u.lastChild);var w=this.defNode;
if(w){for(;w.lastChild;)w.removeChild(w.lastChild);u.appendChild(w)}return x.clear.apply(this,arguments)},getBoundingBox:x.getBoundingBox,_moveChildToFront:x._moveChildToFront,_moveChildToBack:x._moveChildToBack};b=h.Creator={createObject:function(u,w){if(!this.rawNode)return null;var A=new u,E=g(h.xmlns.svg,u.nodeType);A.setRawNode(E);A.setShape(w);this.add(A);return A}};D.extend(h.Text,B);D.extend(h.TextPath,B);D.extend(h.Group,k);D.extend(h.Group,l.Creator);D.extend(h.Group,b);D.extend(h.Surface,
k);D.extend(h.Surface,l.Creator);D.extend(h.Surface,b);h.fixTarget=function(u,w){u.gfxTarget||(u.gfxTarget=z&&u.target.wholeText?u.target.parentElement.__gfxObject__:u.target.__gfxObject__);return!0};h.useSvgWeb&&(h.createSurface=function(u,w,A){var E=new h.Surface;w=0>w?0:w;A=0>A?0:A;if(!w||!A){var G=r.position(u);w=w||G.w;A=A||G.h}u=c.byId(u);G=u.id?u.id+"_svgweb":q._base._getUniqueId();var H=g(h.xmlns.svg,"svg");H.id=G;H.setAttribute("width",w);H.setAttribute("height",A);svgweb.appendChild(H,u);
H.addEventListener("SVGLoad",function(){E.rawNode=this;E.isLoaded=!0;var K=g(h.xmlns.svg,"defs");E.rawNode.appendChild(K);E.defNode=K;if(E.onLoad)E.onLoad(E)},!1);E.isLoaded=!1;return E},h.Surface.extend({destroy:function(){var u=this.rawNode;svgweb.removeChild(u,u.parentNode)}}),B={connect:function(u,w,A){"on"===u.substring(0,2)&&(u=u.substring(2));A=2==arguments.length?w:D.hitch(w,A);this.getEventSource().addEventListener(u,A,!1);return[this,u,A]},disconnect:function(u){this.getEventSource().removeEventListener(u[1],
u[2],!1);delete u[0]}},D.extend(h.Shape,B),D.extend(h.Surface,B));return h})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(D,B,a,c,k,n,r,f,m,q){function l(g,e){for(var d=g.length-1;e<d;)g[e]=g[++e];g.length=d}var b=D.shape={};b.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(k("gfxRegistry")){var g=b.register(this);this.getUID=function(){return g}}},destroy:function(){k("gfxRegistry")&&b.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var g=this.getBoundingBox();if(!g)return null;var e=this._getRealMatrix();return[q.multiplyPoint(e,g.x,g.y),q.multiplyPoint(e,g.x+g.width,g.y),q.multiplyPoint(e,g.x+g.width,g.y+g.height),q.multiplyPoint(e,g.x,g.y+g.height)]},getEventSource:function(){return this.rawNode},setClip:function(g){this.clip=g},getClip:function(){return this.clip},setShape:function(g){this.shape=D.makeParameters(this.shape,g);this.bbox=null;
return this},setFill:function(g){if(!g)return this.fillStyle=null,this;var e=null;if("object"==typeof g&&"type"in g)switch(g.type){case "linear":e=D.makeParameters(D.defaultLinearGradient,g);break;case "radial":e=D.makeParameters(D.defaultRadialGradient,g);break;case "pattern":e=D.makeParameters(D.defaultPattern,g)}else e=D.normalizeColor(g);this.fillStyle=e;return this},setStroke:function(g){if(!g)return this.strokeStyle=null,this;if("string"==typeof g||B.isArray(g)||g instanceof m)g={color:g};g=
this.strokeStyle=D.makeParameters(D.defaultStroke,g);g.color=D.normalizeColor(g.color);return this},setTransform:function(g){this.matrix=q.clone(g?q.normalize(g):q.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var g=this.getParent();g&&(g._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var g=this.getParent();g&&(g._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(g){return g?this.setTransform([this.matrix,g]):this},applyLeftTransform:function(g){return g?this.setTransform([g,this.matrix]):this},applyTransform:function(g){return g?this.setTransform([this.matrix,g]):this},removeShape:function(g){this.parent&&this.parent.remove(this,g);return this},_setParent:function(g,e){this.parent=g;return this._updateParentMatrix(e)},_updateParentMatrix:function(g){this.parentMatrix=g?q.clone(g):null;return this._applyTransform()},_getRealMatrix:function(){for(var g=
this.matrix,e=this.parent;e;)e.matrix&&(g=q.multiply(e.matrix,g)),e=e.parent;return g}});b._eventsProcessing={on:function(g,e){return n(this.getEventSource(),g,b.fixCallback(this,D.fixTarget,e))},connect:function(g,e,d){"on"==g.substring(0,2)&&(g=g.substring(2));return this.on(g,d?B.hitch(e,d):e)},disconnect:function(g){return g.remove()}};b.fixCallback=function(g,e,d,h){h||(h=d,d=null);if(B.isString(h)){d=d||c.global;if(!d[h])throw['dojox.gfx.shape.fixCallback: scope["',h,'"] is null (scope\x3d"',
d,'")'].join("");return function(t){return e(t,g)?d[h].apply(d,arguments||[]):void 0}}return d?function(t){return e(t,g)?h.apply(d,arguments||[]):void 0}:function(t){return e(t,g)?h.apply(d,arguments):void 0}};B.extend(b.Shape,b._eventsProcessing);b.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(g){var e=g.getParent();e&&e.remove(g,!0);this.children.push(g);return g._setParent(this,this._getRealMatrix())},
remove:function(g,e){for(var d=0;d<this.children.length;++d)if(this.children[d]==g){e||(g.parent=null,g.parentMatrix=null);l(this.children,d);break}return this},clear:function(g){for(var e,d=0;d<this.children.length;++d)e=this.children[d],e.parent=null,e.parentMatrix=null,g&&e.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var g=null;r.forEach(this.children,function(e){var d=e.getBoundingBox();d&&((e=e.getTransform())&&(d=q.multiplyRectangle(e,d)),g?(g.x=Math.min(g.x,
d.x),g.y=Math.min(g.y,d.y),g.endX=Math.max(g.endX,d.x+d.width),g.endY=Math.max(g.endY,d.y+d.height)):g={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height})});g&&(g.width=g.endX-g.x,g.height=g.endY-g.y);return g}return null},_moveChildToFront:function(g){for(var e=0;e<this.children.length;++e)if(this.children[e]==g){l(this.children,e);this.children.push(g);break}return this},_moveChildToBack:function(g){for(var e=0;e<this.children.length;++e)if(this.children[e]==g){l(this.children,e);this.children.unshift(g);
break}return this}};b.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){r.forEach(this._nodes,f.destroy);this._nodes=[];r.forEach(this._events,function(g){g&&g.remove()});this._events=[];this.rawNode=null;if(k("ie"))for(;this._parent.lastChild;)f.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(g){},whenLoaded:function(g,e){var d=B.hitch(g,e);if(this.isLoaded)d(this);else n.once(this,"load",function(h){d(h)})}});B.extend(b.Surface,b._eventsProcessing);b.Rect=a("dojox.gfx.shape.Rect",b.Shape,{constructor:function(g){this.shape=D.getDefault("Rect");this.rawNode=g},getBoundingBox:function(){return this.shape}});b.Ellipse=a("dojox.gfx.shape.Ellipse",b.Shape,{constructor:function(g){this.shape=D.getDefault("Ellipse");this.rawNode=g},getBoundingBox:function(){if(!this.bbox){var g=
this.shape;this.bbox={x:g.cx-g.rx,y:g.cy-g.ry,width:2*g.rx,height:2*g.ry}}return this.bbox}});b.Circle=a("dojox.gfx.shape.Circle",b.Shape,{constructor:function(g){this.shape=D.getDefault("Circle");this.rawNode=g},getBoundingBox:function(){if(!this.bbox){var g=this.shape;this.bbox={x:g.cx-g.r,y:g.cy-g.r,width:2*g.r,height:2*g.r}}return this.bbox}});b.Line=a("dojox.gfx.shape.Line",b.Shape,{constructor:function(g){this.shape=D.getDefault("Line");this.rawNode=g},getBoundingBox:function(){if(!this.bbox){var g=
this.shape;this.bbox={x:Math.min(g.x1,g.x2),y:Math.min(g.y1,g.y2),width:Math.abs(g.x2-g.x1),height:Math.abs(g.y2-g.y1)}}return this.bbox}});b.Polyline=a("dojox.gfx.shape.Polyline",b.Shape,{constructor:function(g){this.shape=D.getDefault("Polyline");this.rawNode=g},setShape:function(g,e){g&&g instanceof Array?(this.inherited(arguments,[{points:g}]),e&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[g]);return this},_normalizePoints:function(){var g=
this.shape.points,e=g&&g.length;if(e&&"number"==typeof g[0]){for(var d=[],h=0;h<e;h+=2)d.push({x:g[h],y:g[h+1]});this.shape.points=d}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var g=this.shape.points,e=g.length,d=g[0],h=d.x,t=d.y,z=d.x,v=d.y,y=1;y<e;++y)d=g[y],h>d.x&&(h=d.x),z<d.x&&(z=d.x),t>d.y&&(t=d.y),v<d.y&&(v=d.y);this.bbox={x:h,y:t,width:z-h,height:v-t}}return this.bbox}});b.Image=a("dojox.gfx.shape.Image",b.Shape,{constructor:function(g){this.shape=D.getDefault("Image");
this.rawNode=g},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});b.Text=a(b.Shape,{constructor:function(g){this.fontStyle=null;this.shape=D.getDefault("Text");this.rawNode=g},getFont:function(){return this.fontStyle},setFont:function(g){this.fontStyle="string"==typeof g?D.splitFontString(g):D.makeParameters(D.defaultFont,g);this._setFont();return this},getBoundingBox:function(){var g=null;this.getShape().text&&(g=D._base._computeTextBoundingBox(this));
return g}});b.Creator={createShape:function(g){switch(g.type){case D.defaultPath.type:return this.createPath(g);case D.defaultRect.type:return this.createRect(g);case D.defaultCircle.type:return this.createCircle(g);case D.defaultEllipse.type:return this.createEllipse(g);case D.defaultLine.type:return this.createLine(g);case D.defaultPolyline.type:return this.createPolyline(g);case D.defaultImage.type:return this.createImage(g);case D.defaultText.type:return this.createText(g);case D.defaultTextPath.type:return this.createTextPath(g)}return null},
createGroup:function(){return this.createObject(D.Group)},createRect:function(g){return this.createObject(D.Rect,g)},createEllipse:function(g){return this.createObject(D.Ellipse,g)},createCircle:function(g){return this.createObject(D.Circle,g)},createLine:function(g){return this.createObject(D.Line,g)},createPolyline:function(g){return this.createObject(D.Polyline,g)},createImage:function(g){return this.createObject(D.Image,g)},createText:function(g){return this.createObject(D.Text,g)},createPath:function(g){return this.createObject(D.Path,
g)},createTextPath:function(g){return this.createObject(D.TextPath,{}).setText(g)},createObject:function(g,e){return null}};return b})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(D,B){var a=D.matrix={},c={};a._degToRad=function(k){return c[k]||(c[k]=Math.PI*k/180)};a._radToDeg=function(k){return k/Math.PI*180};a.Matrix2D=function(k){if(k)if("number"==typeof k)this.xx=this.yy=k;else if(k instanceof Array){if(0<k.length){for(var n=a.normalize(k[0]),r=1;r<k.length;++r){var f=
n,m=a.normalize(k[r]);n=new a.Matrix2D;n.xx=f.xx*m.xx+f.xy*m.yx;n.xy=f.xx*m.xy+f.xy*m.yy;n.yx=f.yx*m.xx+f.yy*m.yx;n.yy=f.yx*m.xy+f.yy*m.yy;n.dx=f.xx*m.dx+f.xy*m.dy+f.dx;n.dy=f.yx*m.dx+f.yy*m.dy+f.dy}B.mixin(this,n)}}else B.mixin(this,k)};B.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});B.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(k,n){return 1<arguments.length?new a.Matrix2D({dx:k,dy:n}):
new a.Matrix2D({dx:k.x,dy:k.y})},scale:function(k,n){return 1<arguments.length?new a.Matrix2D({xx:k,yy:n}):"number"==typeof k?new a.Matrix2D({xx:k,yy:k}):new a.Matrix2D({xx:k.x,yy:k.y})},rotate:function(k){var n=Math.cos(k);k=Math.sin(k);return new a.Matrix2D({xx:n,xy:-k,yx:k,yy:n})},rotateg:function(k){return a.rotate(a._degToRad(k))},skewX:function(k){return new a.Matrix2D({xy:Math.tan(k)})},skewXg:function(k){return a.skewX(a._degToRad(k))},skewY:function(k){return new a.Matrix2D({yx:Math.tan(k)})},
skewYg:function(k){return a.skewY(a._degToRad(k))},reflect:function(k,n){1==arguments.length&&(n=k.y,k=k.x);var r=k*k,f=n*n,m=r+f,q=2*k*n/m;return new a.Matrix2D({xx:2*r/m-1,xy:q,yx:q,yy:2*f/m-1})},project:function(k,n){1==arguments.length&&(n=k.y,k=k.x);var r=k*k,f=n*n,m=r+f,q=k*n/m;return new a.Matrix2D({xx:r/m,xy:q,yx:q,yy:f/m})},normalize:function(k){return k instanceof a.Matrix2D?k:new a.Matrix2D(k)},isIdentity:function(k){return 1==k.xx&&0==k.xy&&0==k.yx&&1==k.yy&&0==k.dx&&0==k.dy},clone:function(k){var n=
new a.Matrix2D,r;for(r in k)"number"==typeof k[r]&&"number"==typeof n[r]&&n[r]!=k[r]&&(n[r]=k[r]);return n},invert:function(k){k=a.normalize(k);var n=k.xx*k.yy-k.xy*k.yx;return k=new a.Matrix2D({xx:k.yy/n,xy:-k.xy/n,yx:-k.yx/n,yy:k.xx/n,dx:(k.xy*k.dy-k.yy*k.dx)/n,dy:(k.yx*k.dx-k.xx*k.dy)/n})},_multiplyPoint:function(k,n,r){return{x:k.xx*n+k.xy*r+k.dx,y:k.yx*n+k.yy*r+k.dy}},multiplyPoint:function(k,n,r){k=a.normalize(k);return"number"==typeof n&&"number"==typeof r?a._multiplyPoint(k,n,r):a._multiplyPoint(k,
n.x,n.y)},multiplyRectangle:function(k,n){var r=a.normalize(k);n=n||{x:0,y:0,width:0,height:0};if(a.isIdentity(r))return{x:n.x,y:n.y,width:n.width,height:n.height};var f=a.multiplyPoint(r,n.x,n.y),m=a.multiplyPoint(r,n.x,n.y+n.height),q=a.multiplyPoint(r,n.x+n.width,n.y);r=a.multiplyPoint(r,n.x+n.width,n.y+n.height);var l=Math.min(f.x,m.x,q.x,r.x),b=Math.min(f.y,m.y,q.y,r.y);return{x:l,y:b,width:Math.max(f.x,m.x,q.x,r.x)-l,height:Math.max(f.y,m.y,q.y,r.y)-b}},multiply:function(k){for(var n=a.normalize(k),
r=1;r<arguments.length;++r){var f=n,m=a.normalize(arguments[r]);n=new a.Matrix2D;n.xx=f.xx*m.xx+f.xy*m.yx;n.xy=f.xx*m.xy+f.xy*m.yy;n.yx=f.yx*m.xx+f.yy*m.yx;n.yy=f.yx*m.xy+f.yy*m.yy;n.dx=f.xx*m.dx+f.xy*m.dy+f.dx;n.dy=f.yx*m.dx+f.yy*m.dy+f.dy}return n},_sandwich:function(k,n,r){return a.multiply(a.translate(n,r),k,a.translate(-n,-r))},scaleAt:function(k,n,r,f){switch(arguments.length){case 4:return a._sandwich(a.scale(k,n),r,f);case 3:return"number"==typeof r?a._sandwich(a.scale(k),n,r):a._sandwich(a.scale(k,
n),r.x,r.y)}return a._sandwich(a.scale(k),n.x,n.y)},rotateAt:function(k,n,r){return 2<arguments.length?a._sandwich(a.rotate(k),n,r):a._sandwich(a.rotate(k),n.x,n.y)},rotategAt:function(k,n,r){return 2<arguments.length?a._sandwich(a.rotateg(k),n,r):a._sandwich(a.rotateg(k),n.x,n.y)},skewXAt:function(k,n,r){return 2<arguments.length?a._sandwich(a.skewX(k),n,r):a._sandwich(a.skewX(k),n.x,n.y)},skewXgAt:function(k,n,r){return 2<arguments.length?a._sandwich(a.skewXg(k),n,r):a._sandwich(a.skewXg(k),n.x,
n.y)},skewYAt:function(k,n,r){return 2<arguments.length?a._sandwich(a.skewY(k),n,r):a._sandwich(a.skewY(k),n.x,n.y)},skewYgAt:function(k,n,r){return 2<arguments.length?a._sandwich(a.skewYg(k),n,r):a._sandwich(a.skewYg(k),n.x,n.y)}});D.Matrix2D=a.Matrix2D;return a})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(D,B,a,c,k){k=a("dojox.gfx.path.Path",k.Shape,{constructor:function(n){this.shape=B.clone(D.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=n;this.segmented=!1},setAbsoluteMode:function(n){this._confirmSegmented();this.absolute="string"==typeof n?"absolute"==n:n;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var n=this.bbox,r=this._getRealMatrix();this.bbox=null;for(var f=0,m=this.segments.length;f<m;++f)this._updateWithSegment(this.segments[f],r);r=this.bbox;this.bbox=n;return this.tbbox=r?[{x:r.l,y:r.t},{x:r.r,y:r.t},{x:r.r,y:r.b},{x:r.l,y:r.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(n,r,f){f&&(r=c.multiplyPoint(f,
n,r),n=r.x,r=r.y);this.bbox&&"l"in this.bbox?(this.bbox.l>n&&(this.bbox.l=n),this.bbox.r<n&&(this.bbox.r=n),this.bbox.t>r&&(this.bbox.t=r),this.bbox.b<r&&(this.bbox.b=r)):this.bbox={l:n,b:r,r:n,t:r}},_updateWithSegment:function(n,r){var f=n.args,m=f.length,q;switch(n.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(q=0;q<m;q+=2)this._updateBBox(f[q],f[q+1],r);this.last.x=f[m-2];this.last.y=f[m-1];this.absolute=!0;break;case "H":for(q=0;q<m;++q)this._updateBBox(f[q],this.last.y,r);
this.last.x=f[m-1];this.absolute=!0;break;case "V":for(q=0;q<m;++q)this._updateBBox(this.last.x,f[q],r);this.last.y=f[m-1];this.absolute=!0;break;case "m":q=0;"x"in this.last||(this._updateBBox(this.last.x=f[0],this.last.y=f[1],r),q=2);for(;q<m;q+=2)this._updateBBox(this.last.x+=f[q],this.last.y+=f[q+1],r);this.absolute=!1;break;case "l":case "t":for(q=0;q<m;q+=2)this._updateBBox(this.last.x+=f[q],this.last.y+=f[q+1],r);this.absolute=!1;break;case "h":for(q=0;q<m;++q)this._updateBBox(this.last.x+=
f[q],this.last.y,r);this.absolute=!1;break;case "v":for(q=0;q<m;++q)this._updateBBox(this.last.x,this.last.y+=f[q],r);this.absolute=!1;break;case "c":for(q=0;q<m;q+=6)this._updateBBox(this.last.x+f[q],this.last.y+f[q+1],r),this._updateBBox(this.last.x+f[q+2],this.last.y+f[q+3],r),this._updateBBox(this.last.x+=f[q+4],this.last.y+=f[q+5],r);this.absolute=!1;break;case "s":case "q":for(q=0;q<m;q+=4)this._updateBBox(this.last.x+f[q],this.last.y+f[q+1],r),this._updateBBox(this.last.x+=f[q+2],this.last.y+=
f[q+3],r);this.absolute=!1;break;case "A":for(q=0;q<m;q+=7)this._updateBBox(f[q+5],f[q+6],r);this.last.x=f[m-2];this.last.y=f[m-1];this.absolute=!0;break;case "a":for(q=0;q<m;q+=7)this._updateBBox(this.last.x+=f[q+5],this.last.y+=f[q+6],r);this.absolute=!1}var l=[n.action];for(q=0;q<m;++q)l.push(D.formatNumber(f[q],!0));if("string"==typeof this.shape.path)this.shape.path+=l.join("");else for(q=0,m=l.length;q<m;++q)this.shape.path.push(l[q])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},
_pushSegment:function(n,r){this.tbbox=null;var f=this._validSegments[n.toLowerCase()];"number"==typeof f&&(f?r.length>=f&&(f={action:n,args:r.slice(0,r.length-r.length%f)},this.segments.push(f),this._updateWithSegment(f)):(f={action:n,args:[]},this.segments.push(f),this._updateWithSegment(f)))},_collectArgs:function(n,r){for(var f=0;f<r.length;++f){var m=r[f];"boolean"==typeof m?n.push(m?1:0):"number"==typeof m?n.push(m):m instanceof Array?this._collectArgs(n,m):"x"in m&&"y"in m&&n.push(m.x,m.y)}},
moveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"M":"m",n);return this},lineTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"L":"l",n);return this},hLineTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"H":"h",n);return this},vLineTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);
this._pushSegment(this.absolute?"V":"v",n);return this},curveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"C":"c",n);return this},smoothCurveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"S":"s",n);return this},qCurveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"Q":"q",n);return this},qSmoothCurveTo:function(){this._confirmSegmented();
var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"T":"t",n);return this},arcTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"A":"a",n);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var n=this.shape.path;this.shape.path=[];this._setPath(n);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(n){n=
B.isArray(n)?n:n.match(D.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(n){for(var r="",f=[],m=n.length,q=0;q<m;++q){var l=n[q],b=parseFloat(l);isNaN(b)?(r&&this._pushSegment(r,f),f=[],r=l):f.push(b)}this._pushSegment(r,f)}},setShape:function(n){this.inherited(arguments,["string"==typeof n?{path:n}:n]);this.segmented=!1;this.segments=[];D.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",k,{constructor:function(n){"text"in
this||(this.text=B.clone(D.defaultTextPath));"fontStyle"in this||(this.fontStyle=B.clone(D.defaultFont))},getText:function(){return this.text},setText:function(n){this.text=D.makeParameters(this.text,"string"==typeof n?{text:n}:n);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(n){this.fontStyle="string"==typeof n?D.splitFontString(n):D.makeParameters(D.defaultFont,n);this._setFont();return this}});return D.path={Path:k,TextPath:a}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang",
"dojo/_base/array"],function(D,B){var a={},c={x:"0%",y:"0%",width:"100%",height:"100%"},k={};a.createFilter=function(b,g){var e=D.mixin({},c,b);e.primitives||(e.primitives=[]);g&&Array.prototype.push.apply(e.primitives,g);return e};var n=function(b,g,e){g instanceof Array&&(e=g,g=null);g=D.mixin({},g);g.children=e;g.tag=b;return g};B.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(b){a[b]=function(g,e){return n(b,g,e)}});a.feMerge=function(b,g){if("string"===typeof b){for(var e=[],d=0;d<arguments.length;++d)e.push(a.feMergeNode({"in":arguments[d]}));return n("feMerge",{},e)}return n("feMerge",b,g)};var r=a.createFilter;k.convolutions=[r({_gfxName:"boxBlur3"},[a.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),r({_gfxName:"boxBlur5"},[a.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
r({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),r({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",
tableValues:"1,1"})])]),r({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),r({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",
tableValues:"1,1"})])])];B.forEach(k.convolutions,function(b){D.mixin(b,c)});k.shadows=[r({_gfxName:"fastSmallDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:3,dy:3,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),r({_gfxName:"fastDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),r({_gfxName:"fastDropShadowLight"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),r({_gfxName:"dropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur",
"SourceGraphic")]),r({_gfxName:"dropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),r({_gfxName:"smallDropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),a.feOffset({dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),r({_gfxName:"smallDropShadowLight"},
[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")])];var f={x:"-10%",y:"-10%",width:"125%",height:"125%"};B.forEach(k.shadows,function(b){D.mixin(b,f)});k.blurs=[r({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),r({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),r({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),r({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),r({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),a.feComponentTransfer([a.feFuncA({type:"linear",
slope:10})])])];k.colors=[r({_gfxName:"negate"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"1,0"}),a.feFuncG({type:"table",tableValues:"1,0"}),a.feFuncB({type:"table",tableValues:"1,0"})])]),r({_gfxName:"sepia"},[a.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),a.feComponentTransfer({"in":"grey"},[a.feFuncR({type:"linear",slope:.5,intercept:.5}),a.feFuncB({type:"table",tableValues:"0,0"})])]),r({_gfxName:"grayscale"},
[a.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),r({_gfxName:"showRed"},[a.feComponentTransfer([a.feFuncG({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),r({_gfxName:"showGreen"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),r({_gfxName:"showBlue"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncG({type:"table",
tableValues:"0,0"})])]),r({_gfxName:"hueRotate60"},[a.feColorMatrix({type:"hueRotate",values:60})]),r({_gfxName:"hueRotate120"},[a.feColorMatrix({type:"hueRotate",values:120})]),r({_gfxName:"hueRotate180"},[a.feColorMatrix({type:"hueRotate",values:180})]),r({_gfxName:"hueRotate270"},[a.feColorMatrix({type:"hueRotate",values:270})])];B.forEach(k.colors,function(b){D.mixin(b,c)});k.miscs=[r({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),r({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),a.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[a.fePointLight({x:-5E3,y:-1E4,z:2E4})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),r({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),r({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),r({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feComponentTransfer({"in":"blur",
result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),a.feMerge("offsetBlur",
"litPaint")]),r({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),r({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),r({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),r({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),a.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),a.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),a.feComponentTransfer({"in":"bb",result:"BendedSource"},[a.feFuncA({type:"linear",slope:10,intercept:"-1"})]),a.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[a.feFuncR({type:"linear",slope:"0",intercept:"0"}),a.feFuncG({type:"linear",slope:"0",intercept:"0"}),a.feFuncB({type:"linear",slope:"0",intercept:"0"}),a.feFuncA({type:"linear",slope:"1",intercept:"0"})]),a.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),a.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),a.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),r({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[a.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),r({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"0,1"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),r({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"1,0"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];k.reliefs=[r({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[a.feFuncA({type:"table",tableValues:"1,0"})]),a.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),r({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
a.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),r({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),r({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),r({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];k.textures=[r({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),r({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),
a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),r({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),r({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[a.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),a.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),a.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),a.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),a.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),a.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var m in k)if(k.hasOwnProperty(m)){a[m]={};for(var q=
k[m],l=0;l<q.length;++l)(function(){var b=q[l];a[m][b._gfxName]=function(g){return D.delegate(b,g)}})()}return a})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(D,B,a,c,k){function n(f,m){var q=m.ownerDocument.createElementNS(k.xmlns.svg,f.tag);m.appendChild(q);for(var l in f)l in r||q.setAttribute(l,f[l]);f.children&&B.forEach(f.children,function(b){n(b,q)});return q}a=c.svgext={};var r={primitives:null,tag:null,children:null};
k.Shape.extend({addRenderingOption:function(f,m){this.rawNode.setAttribute(f,m);return this},setFilter:function(f){if(!f)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=f;f.id=f.id||c._base._getUniqueId();var m=D.byId(f.id);if(!m){m=this.rawNode.ownerDocument.createElementNS(k.xmlns.svg,"filter");m.setAttribute("filterUnits","userSpaceOnUse");for(var q in f)q in r||m.setAttribute(q,f[q]);B.forEach(f.primitives,function(l){n(l,m)});(q=this._getParentSurface())&&q.defNode.appendChild(m)}this.rawNode.setAttribute("filter",
"url(#"+f.id+")");return this},getFilter:function(){return this.filter}});return a})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(D,B,a,c,k,n,r,f,m,q){function l(e,d){var h=b(d);h&&D.utils.forEach(e,function(t){if(t instanceof D.Surface||t instanceof D.Group)t.textDir=h;t instanceof D.Text&&t.setShape({textDir:h});t instanceof D.TextPath&&t.setText({textDir:h})},
e);return e}function b(e){var d=["ltr","rtl","auto"];return e&&(e=e.toLowerCase(),0>n.indexOf(d,e))?null:e}B.getObject("dojox.gfx._gfxBidiSupport",!0);switch(D.renderer){case "vml":D.isVml=!0;break;case "svg":D.isSvg=!0;D.svg.useSvgWeb&&(D.isSvgWeb=!0);break;case "silverlight":D.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":D.isCanvas=!0}var g=new q;B.extend(D.shape.Surface,{textDir:"",setTextDir:function(e){l(this,e)},getTextDir:function(){return this.textDir}});B.extend(D.Group,{textDir:"",
setTextDir:function(e){l(this,e)},getTextDir:function(){return this.textDir}});B.extend(D.Text,{textDir:"",formatText:function(e,d){if(d&&e&&1<e.length){var h="ltr",t=d;if("auto"==t){if(D.isVml)return e;t=g.checkContextual(e)}if(D.isVml)return h=g.checkContextual(e),t!=h?"rtl"==t?g.hasBidiChar(e)?"\u200f\u200f"+e:g.bidiTransform(e,"IRNNN","ILNNN"):"\u200e"+e:e;if(D.isSvgWeb)return"rtl"==t?g.bidiTransform(e,"IRNNN","ILNNN"):e;if(D.isSilverlight)return"rtl"==t?g.bidiTransform(e,"IRNNN","VLYNN"):g.bidiTransform(e,
"ILNNN","VLYNN");if(D.isCanvas)return"rtl"==t?"\u202b"+e+"\u202c":"\u202a"+e+"\u202c";if(D.isSvg)return 4>a("ff")?"rtl"==t?g.bidiTransform(e,"IRYNN","VLNNN"):g.bidiTransform(e,"ILYNN","VLNNN"):"\u200e"+("rtl"==t?"\u202b":"\u202a")+e+"\u202c"}return e},bidiPreprocess:function(e){return e}});B.extend(D.TextPath,{textDir:"",formatText:function(e,d){if(d&&e&&1<e.length){var h="ltr",t=d;if("auto"==t){if(D.isVml)return e;t=g.checkContextual(e)}if(D.isVml)return h=g.checkContextual(e),t!=h?"rtl"==t?g.hasBidiChar(e)?
"\u200f\u200f"+e:g.bidiTransform(e,"IRNNN","ILNNN"):"\u200e"+e:e;if(D.isSvgWeb)return"rtl"==t?g.bidiTransform(e,"IRNNN","ILNNN"):e;D.isSvg&&(e=a("opera")||4<=a("ff")?"\u200e"+("rtl"==t?"\u202b":"\u202a")+e+"\u202c":"rtl"==t?g.bidiTransform(e,"IRYNN","VLNNN"):g.bidiTransform(e,"ILYNN","VLNNN"))}return e},bidiPreprocess:function(e){e&&"string"==typeof e&&(this.origText=e,e=this.formatText(e,this.textDir));return e}});r=function(e,d,h,t){var z=e.prototype[d];e.prototype[d]=function(){var v;h&&(v=h.apply(this,
arguments));v=z.call(this,v);t&&(v=t.call(this,v,arguments));return v}};f=function(e){e&&(e.textDir&&(e.textDir=b(e.textDir)),e.text&&e.text instanceof Array&&(e.text=e.text.join(",")));!e||void 0==e.text&&!e.textDir||this.textDir==e.textDir&&e.text==this.origText||(this.origText=void 0!=e.text?e.text:this.origText,e.textDir&&(this.textDir=e.textDir),e.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(e)};r(D.Text,"setShape",f,null);r(D.TextPath,"setText",f,null);f=function(e){(e=
B.clone(e))&&this.origText&&(e.text=this.origText);return e};r(D.Text,"getShape",null,f);r(D.TextPath,"getText",null,f);f=function(e,d){var h;d&&d[0]&&(h=b(d[0]));e.setTextDir(h?h:this.textDir);return e};r(D.Surface,"createGroup",null,f);r(D.Group,"createGroup",null,f);f=function(e){if(e){var d=e.textDir?b(e.textDir):this.textDir;d&&(e.textDir=d)}return e};r(D.Surface,"createText",f,null);r(D.Surface,"createTextPath",f,null);r(D.Group,"createText",f,null);r(D.Group,"createTextPath",f,null);D.createSurface=
function(e,d,h,t){d=D[D.renderer].createSurface(e,d,h);t=b(t);if(D.isSvgWeb)return d.textDir=t?t:k.style(c.byId(e),"direction"),d;if(D.isVml||D.isSvg||D.isCanvas)d.textDir=t?t:k.style(d.rawNode,"direction");D.isSilverlight&&(d.textDir=t?t:k.style(d._nodes[1],"direction"));return d};return D})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l){var b=a.utils={};B.mixin(b,{forEach:function(g,e,d){d=d||D.global;e.call(d,g);(g instanceof a.Surface||g instanceof a.Group)&&k.forEach(g.children,function(h){b.forEach(h,e,d)})},serialize:function(g){var e={},d;if((d=g instanceof a.Surface)||g instanceof a.Group){if(e.children=k.map(g.children,b.serialize),d)return e.children}else e.shape=g.getShape();g.getTransform&&(d=g.getTransform())&&(e.transform=d);g.getStroke&&(d=g.getStroke())&&(e.stroke=d);g.getFill&&(d=g.getFill())&&
(e.fill=d);g.getFont&&(d=g.getFont())&&(e.font=d);return e},toJson:function(g,e){return r.toJson(b.serialize(g),e)},deserialize:function(g,e){if(e instanceof Array)return k.map(e,B.hitch(null,b.deserialize,g));var d="shape"in e?g.createShape(e.shape):g.createGroup();"transform"in e&&d.setTransform(e.transform);"stroke"in e&&d.setStroke(e.stroke);"fill"in e&&d.setFill(e.fill);"font"in e&&d.setFont(e.font);"children"in e&&k.forEach(e.children,B.hitch(null,b.deserialize,d));return d},fromJson:function(g,
e){return b.deserialize(g,r.fromJson(e))},toSvg:function(g){var e=new f;if("svg"===a.renderer)try{var d=b._cleanSvg(b._innerXML(g.rawNode));e.callback(d)}catch(t){e.errback(t)}else{b._initSvgSerializerDeferred||b._initSvgSerializer();var h=b.toJson(g);d=function(){try{var t=g.getDimensions(),z=t.width,v=t.height,y=b._gfxSvgProxy.document.createElement("div");b._gfxSvgProxy.document.body.appendChild(y);n.withDoc(b._gfxSvgProxy.document,function(){c.style(y,"width",z);c.style(y,"height",v)},this);b._gfxSvgProxy[dojox._scopeName].gfx.createSurface(y,
z,v).whenLoaded(null,function(C){try{b._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(C,h);var F=b._cleanSvg(y.innerHTML);C.clear();C.destroy();b._gfxSvgProxy.document.body.removeChild(y);e.callback(F)}catch(x){e.errback(x)}})}catch(C){e.errback(C)}};0<b._initSvgSerializerDeferred.fired?d():b._initSvgSerializerDeferred.addCallback(d)}return e},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){b._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!b._initSvgSerializerDeferred){b._initSvgSerializerDeferred=
new f;var g=n.doc.createElement("iframe");c.style(g,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var e;m("ie")?g.onreadystatechange=function(){"complete"==g.contentWindow.document.readyState&&(g.onreadystatechange=function(){},e=setInterval(function(){g.contentWindow[D.scopeMap.dojo[1]._scopeName]&&g.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&g.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(e),g.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
g.contentWindow,g.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:g.onload=function(){g.onload=function(){};e=setInterval(function(){g.contentWindow[D.scopeMap.dojo[1]._scopeName]&&g.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&g.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(e),g.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=g.contentWindow,g.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var d=l.dojoxGfxSvgProxyFrameUrl||q.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");g.setAttribute("src",d.toString());n.body().appendChild(g)}},_innerXML:function(g){return g.innerXML?g.innerXML:g.xml?g.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(g):null},_cleanSvg:function(g){g&&(-1==g.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(g=g.substring(4,g.length),g='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+g),-1==g.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(g=g.substring(4,g.length),g='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+g),-1===g.indexOf("xlink:href")&&(g=g.replace(/href\s*=/g,"xlink:href\x3d")),g=g.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),g=g.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),g=g.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),g=g.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),g=g.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return g}});return b})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(D,B,a){function c(ra,R,fa,ma,wa){var Ea=ra;void 0===R&&(R=wa.defInFormat);void 0===fa&&(fa=wa.defOutFormat);void 0===ma&&(ma=wa.defSwap);if(R!==fa){var Ha=R.substring(0,1);var La=R.substring(1,4);var Ya=fa.substring(0,1),Xa=fa.substring(1,4);"C"===La.charAt(0)&&(La=k(Ea),La="ltr"===La||"rtl"===La?La.toUpperCase():"L"===R.charAt(2)?"LTR":"RTL",R=Ha+La);"C"===Xa.charAt(0)&&(La=k(Ea),"rtl"===La?Xa="RTL":"ltr"===La?(Ea=Ea.split(""),Ea.reverse(),La=k(Ea.join("")),
Xa=La.toUpperCase()):Xa="L"===fa.charAt(2)?"LTR":"RTL",fa=Ya+Xa)}if(R===fa)return ra;Ya=R.substring(0,1);Ea=R.substring(1,4);Ha=fa.substring(0,1);Xa=fa.substring(1,4);wa.inFormat=R;wa.outFormat=fa;wa.swap=ma;if("L"===Ya&&"VLTR"===fa){if("LTR"===Ea)return wa.dir=u,n(ra,wa);if("RTL"===Ea)return wa.dir=w,n(ra,wa)}if("V"===Ya&&"V"===Ha)return wa.dir="RTL"===Ea?w:u,f(ra,wa);if("L"===Ya&&"VRTL"===fa)return wa.dir="LTR"===Ea?u:w,ra=n(ra,wa),f(ra);if("VLTR"===R&&"LLTR"===fa)return wa.dir=u,n(ra,wa);if("V"===
Ya&&"L"===Ha&&Ea!==Xa)return ra=f(ra),"RTL"===Ea?c(ra,"LLTR","VLTR",ma,wa):c(ra,"LRTL","VRTL",ma,wa);if("VRTL"===R&&"LRTL"===fa)return c(ra,"LRTL","VRTL",ma,wa);if("L"===Ya&&"L"===Ha)return R=wa.swap,wa.swap=R.substr(0,1)+"N","RTL"===Ea?(wa.dir=w,ra=n(ra,wa),wa.swap="N"+R.substr(1,2),wa.dir=u,ra=n(ra,wa)):(wa.dir=u,ra=n(ra,wa),wa.swap="N"+R.substr(1,2),ra=c(ra,"VLTR","LRTL",wa.swap,wa)),ra}function k(ra){return(ra=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(ra))?
"z">=ra[0]?"ltr":"rtl":""}function n(ra,R){var fa=ra.split(""),ma=[];r(fa,ma,R);if(0!==R.hiLevel&&R.swap.substr(0,1)!==R.swap.substr(1,2))for(var wa=0;wa<fa.length;wa++)if(1===ma[wa]){var Ea=wa;b:{var Ha=void 0;for(var La=fa[wa],Ya=0,Xa=G.length-1;Ya<=Xa;)if(Ha=Math.floor((Ya+Xa)/2),La<G[Ha][0])Xa=Ha-1;else if(La>G[Ha][0])Ya=Ha+1;else{Ha=G[Ha][1];break b}Ha=La}fa[Ea]=Ha}l(2,fa,ma,R);l(1,fa,ma,R);y=ma;return fa.join("")}function r(ra,R,fa){var ma=ra.length,wa=fa.dir?Z:X,Ea=null,Ha=null,La=null;Ea=
0;Ha=Ha=null;var Ya=-1,Xa=Ha=null,Ta=[],eb=[];fa.hiLevel=fa.dir;fa.lastArabic=!1;fa.hasUbatAl=!1;fa.hasUbatB=!1;fa.hasUbatS=!1;for(Ha=0;Ha<ma;Ha++){Xa=Ha;La=ra[Ha].charCodeAt(0);var db=W[La>>8];Ta[Xa]=db<ta?db:oa[db-ta][La&255]}for(Xa=0;Xa<ma;Xa++){eb[Xa]=Ha=b(ra,Ta,eb,Xa,fa);Ea=wa[Ea][Ha];Ha=Ea&240;Ea&=15;R[Xa]=La=wa[Ea][F];if(0<Ha){if(16===Ha)for(Ha=Ya;Ha<Xa;Ha++)R[Ha]=1;Ya=-1}if(Ha=wa[Ea][x])-1===Ya&&(Ya=Xa);else if(-1<Ya){for(Ha=Ya;Ha<Xa;Ha++)R[Ha]=La;Ya=-1}Ta[Xa]===Fa&&(R[Xa]=0);fa.hiLevel|=
La}if(fa.hasUbatS)for(ra=0;ra<ma;ra++)if(Ta[ra]===Ma)for(R[ra]=fa.dir,wa=ra-1;0<=wa;wa--)if(Ta[wa]===Ba)R[wa]=fa.dir;else break}function f(ra,R){var fa=ra.split("");if(R){var ma=[];r(fa,ma,R);y=ma}fa.reverse();z.reverse();return fa.join("")}function m(ra){for(var R=0;R<ha.length;R++)if(ra>=ha[R]&&ra<=U[R])return!0;return!1}function q(ra,R,fa,ma){for(;R*fa<ma&&e(ra[R]);)R+=fa;return R*fa<ma&&m(ra[R])?!0:!1}function l(ra,R,fa,ma){if(!(ma.hiLevel<ra))if(1!==ra||ma.dir!==w||ma.hasUbatB){ma=R.length;for(var wa=
0,Ea,Ha,La;wa<ma;){if(fa[wa]>=ra){for(Ea=wa+1;Ea<ma&&fa[Ea]>=ra;)Ea++;for(Ha=Ea-1;wa<Ha;wa++,Ha--)La=R[wa],R[wa]=R[Ha],R[Ha]=La,La=z[wa],z[wa]=z[Ha],z[Ha]=La;wa=Ea}wa++}}else R.reverse(),z.reverse()}function b(ra,R,fa,ma,wa){return{UBAT_L:function(){wa.lastArabic=!1;return P},UBAT_R:function(){wa.lastArabic=!1;return da},UBAT_ON:function(){return Ca},UBAT_AN:function(){return xa},UBAT_EN:function(){return wa.lastArabic?xa:ia},UBAT_AL:function(){wa.lastArabic=!0;wa.hasUbatAl=!0;return da},UBAT_WS:function(){return Ca},
UBAT_CS:function(){var Ea,Ha;if(1>ma||ma+1>=R.length||(Ea=fa[ma-1])!==ia&&Ea!==xa||(Ha=R[ma+1])!==ia&&Ha!==xa)return Ca;wa.lastArabic&&(Ha=xa);return Ha===Ea?Ha:Ca},UBAT_ES:function(){return(0<ma?fa[ma-1]:Fa)===ia&&ma+1<R.length&&R[ma+1]===ia?ia:Ca},UBAT_ET:function(){if(0<ma&&fa[ma-1]===ia)return ia;if(wa.lastArabic)return Ca;for(var Ea=ma+1,Ha=R.length;Ea<Ha&&R[Ea]===ca;)Ea++;return Ea<Ha&&R[Ea]===ia?ia:Ca},UBAT_NSM:function(){if("VLTR"===wa.inFormat){for(var Ea=R.length,Ha=ma+1;Ha<Ea&&R[Ha]===
ua;)Ha++;if(Ha<Ea&&(Ea=ra[ma],Ha=R[Ha],(1425<=Ea&&2303>=Ea||64286===Ea)&&(Ha===da||Ha===Sa)))return da}return 1>ma||R[ma-1]===Fa?Ca:fa[ma-1]},UBAT_B:function(){wa.lastArabic=!0;wa.hasUbatB=!0;return wa.dir},UBAT_S:function(){wa.hasUbatS=!0;return Ca},UBAT_LRE:function(){wa.lastArabic=!1;return Ca},UBAT_RLE:function(){wa.lastArabic=!1;return Ca},UBAT_LRO:function(){wa.lastArabic=!1;return Ca},UBAT_RLO:function(){wa.lastArabic=!1;return Ca},UBAT_PDF:function(){wa.lastArabic=!1;return Ca},UBAT_BN:function(){return Ca}}[ya[R[ma]]]()}
function g(ra,R){for(var fa=0;fa<J.length;fa++)if(ra===J[fa])return R[fa];return ra}function e(ra){return"\u064b"<=ra&&"\u0655">=ra?!0:!1}function d(ra){if("L"===ra)return"LTR";if("R"===ra)return"RTL";if("C"===ra)return"CLR";if("D"===ra)return"CRL"}function h(ra,R){for(var fa=0;fa<H.length;fa++)if(ra===H[fa])return R[fa];return ra}function t(ra,R,fa,ma){for(var wa=0;wa<ra.length;wa++)if(ra[wa]>R||!fa&&ra[wa]===R)ra[wa]+=ma}D.getObject("string",!0,dojox);D=B("dojox.string.BidiEngine",a,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(ra,R,fa){this.sourceToTarget=[];this.targetToSource=[];if(!ra)return"";var ma=this.sourceToTarget,wa=this.targetToSource,Ea=ra.length;z=[];y=[];for(var Ha=0;Ha<Ea;Ha++)ma[Ha]=Ha,wa[Ha]=Ha,z[Ha]=Ha;if(!this.checkParameters(R,fa))return ra;R=this.inputFormat;fa=this.outputFormat;ma=ra;ma=C;Ha=d(R.charAt(1));wa=d(fa.charAt(1));var La="I"===R.charAt(0)?"L":R.charAt(0);Ea="I"===fa.charAt(0)?"L":fa.charAt(0);Ha=La+
Ha;wa=Ea+wa;Ea=R.charAt(2)+fa.charAt(2);ma.defInFormat=Ha;ma.defOutFormat=wa;ma.defSwap=Ea;ra=c(ra,Ha,wa,Ea,ma);ma=!1;if("R"===fa.charAt(1))ma=!0;else if("C"===fa.charAt(1)||"D"===fa.charAt(1))ma=this.checkContextual(ra);wa=this.sourceToTarget=z;Ea=Array(wa.length);for(Ha=0;Ha<wa.length;Ha++)Ea[wa[Ha]]=Ha;v=this.targetToSource=Ea;if(R.charAt(3)===fa.charAt(3))ma=ra;else if("S"===fa.charAt(3))if(R=ma,fa=!0,0===ra.length)ma=void 0;else{void 0===R&&(R=!0);void 0===fa&&(fa=!0);ra=String(ra);ra=ra.split("");
var Ya=0;wa=1;ma=ra.length;R||(Ya=ra.length-1,wa=-1,ma=1);Ea=ma;Ha=fa;var Xa=0;ma=[];for(La=0;Ya*wa<Ea;Ya+=wa)if(m(ra[Ya])||e(ra[Ya])){var Ta;if(Ta="\u0644"===ra[Ya])b:{for(var eb=ra,db=Ya+wa,gb=wa,qb=Ea;db*gb<qb&&e(eb[db]);)db+=gb;Ta=" ";if(db*gb<qb)for(Ta=eb[db],eb=0;eb<H.length;eb++)if(H[eb]===Ta){Ta=!0;break b}Ta=!1}if(Ta){ra[Ya]=0===Xa?h(ra[Ya+wa],K):h(ra[Ya+wa],I);Ya+=wa;Xa=ra;Ta=Ya;eb=wa;for(db=Ea;Ta*eb<db&&e(Xa[Ta]);)Ta+=eb;Ta*eb<db&&(Xa[Ta]=" ");Ha&&(ma[La]=Ya,La++);Xa=0}else{Ta=ra[Ya];if(1===
Xa){eb=Ya;if(q(ra,Ya+wa,wa,Ea))b:for(db=ra[Ya],gb=0;gb<J.length;gb++){if(db===J[gb]){db=N[gb];break b}}else db=g(ra[Ya],M);ra[eb]=db}else!0===q(ra,Ya+wa,wa,Ea)?ra[Ya]=g(ra[Ya],O):ra[Ya]=g(ra[Ya],L);e(Ta)||(Xa=1);b:{for(eb=0;eb<Y.length;eb++)if(Y[eb]===Ta){Ta=!0;break b}Ta=!1}!0===Ta&&(Xa=0)}}else Xa=0;wa="";for(Ea=0;Ea<ra.length;Ea++){if(Ha=fa){b:{for(Ha=0;Ha<ma.length;Ha++)if(ma[Ha]===Ea)break b;Ha=-1}Ha=-1<Ha}Ha?(t(v,Ea,!R,-1),z.splice(Ea,1)):wa+=ra[Ea]}ma=wa}else if(R=ra,fa=ma,ra=!0,0===R.length)ma=
void 0;else for(void 0===ra&&(ra=!0),void 0===fa&&(fa=!0),R=String(R),ma="",wa=[],wa=R.split(""),Ea=0;Ea<R.length;Ea++)Ha=!1,"\ufe70"<=wa[Ea]&&"\ufeff">wa[Ea]?(La=R.charCodeAt(Ea),"\ufef5"<=wa[Ea]&&"\ufefc">=wa[Ea]?(fa?(0<Ea&&ra&&" "===wa[Ea-1]?ma=ma.substring(0,ma.length-1)+"\u0644":(ma+="\u0644",Ha=!0),ma+=H[(La-65269)/2]):(ma+=H[(La-65269)/2],ma+="\u0644",Ea+1<R.length&&ra&&" "===wa[Ea+1]?Ea++:Ha=!0),Ha&&(t(v,Ea,!0,1),z.splice(Ea,0,z[Ea]))):ma+=ba[La-65136]):ma+=wa[Ea];this.sourceToTarget=z;this.targetToSource=
v;this.levels=y;return ma},_inputFormatSetter:function(ra){if(!A.test(ra))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=ra},_outputFormatSetter:function(ra){if(!A.test(ra))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=ra},checkParameters:function(ra,R){ra?this.set("inputFormat",ra):ra=this.inputFormat;R?this.set("outputFormat",R):R=this.outputFormat;return ra===R?!1:!0},checkContextual:function(ra){ra=k(ra);if("ltr"!==
ra&&"rtl"!==ra){try{ra=document.dir.toLowerCase()}catch(R){}"ltr"!==ra&&"rtl"!==ra&&(ra="ltr")}return ra},hasBidiChar:function(ra){return E.test(ra)}});var z=[],v=[],y=[],C={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},F=5,x=6,u=0,w=1,A=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],K=["\ufef5","\ufef7","\ufef9","\ufefb"],
I=["\ufef6","\ufef8","\ufefa","\ufefc"],J="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),L="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
M="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),N="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
O="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),Y="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),ba="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
ha=["\u0621","\u0641"],U=["\u063a","\u064a"],X=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Z=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P=0,da=1,ia=2,xa=3,Ca=4,Fa=5,Ma=6,Sa=7,Ba=8,ca=11,ua=12,ya="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ta=100;B=P;a=da;var pa=ia,Aa=xa,T=Ca,ea=Fa,na=Ma,V=Sa,Ia=Ba,
Ja=ca,Da=ua,W=[ta+0,B,B,B,B,ta+1,ta+2,ta+3,a,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,ta+4,T,T,T,B,T,B,T,B,T,T,T,B,B,T,T,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,B,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,B,B,T,T,B,B,T,T,B,B,T,T,T,T,T,T,T,T,T,T,T,
T,T,T,T,T,T,T,T,T,T,T,T,B,B,B,ta+5,V,V,ta+6,ta+7],oa=[[18,18,18,18,18,18,18,18,18,na,ea,na,Ia,ea,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ea,ea,ea,na,Ia,T,T,Ja,Ja,Ja,T,T,T,T,T,10,9,10,9,9,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,9,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,18,18,18,18,18,18,ea,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,T,Ja,Ja,Ja,Ja,T,T,T,T,B,T,T,18,T,T,Ja,Ja,pa,
pa,T,B,T,T,T,pa,B,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,B,B,B,B,B,B,B,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,B,T,T,T,T,T,T,T,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,
Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,a,Da,a,Da,Da,a,Da,Da,a,Da,T,T,T,T,T,T,T,T,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,T,T,T,T,T,a,a,a,a,a,T,T,T,T,T,T,T,T,T,T,T],[Aa,Aa,Aa,Aa,T,T,T,T,V,Ja,Ja,V,9,V,T,T,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,V,T,T,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Ja,Aa,Aa,V,V,V,Da,V,
V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,Da,Da,Da,Da,Da,Da,Da,Aa,T,Da,Da,Da,Da,Da,Da,V,V,Da,Da,T,Da,Da,Da,Da,V,V,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,V,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,T,V,V,Da,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,T,T,V,V,
V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,V,T,T,T,T,T,T,T,T,T,T,T,T,T,T,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Da,Da,Da,Da,Da,Da,Da,Da,Da,a,a,T,T,T,T,a,T,T,T,T,T],[Ia,Ia,Ia,Ia,Ia,Ia,Ia,Ia,Ia,Ia,Ia,18,18,18,B,a,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Ia,ea,13,14,15,16,17,9,Ja,Ja,Ja,
Ja,Ja,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,9,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Ia,18,18,18,18,18,T,T,T,T,T,18,18,18,18,18,18,pa,B,T,T,pa,pa,pa,pa,pa,pa,10,10,T,T,T,B,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,10,10,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,T,T,T,T,T,T,T,T,T,T,T,T,T,T,
T],[B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,T,B,B,B,B,B,T,T,T,T,T,a,Da,a,a,a,a,a,a,a,a,a,a,10,a,a,a,a,a,a,a,a,a,a,a,a,a,T,a,a,a,a,a,T,a,T,a,a,T,a,a,T,a,a,a,a,a,a,a,a,a,a,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,
V,V,V,V,V,V,V,V],[Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,Da,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Da,Da,Da,Da,Da,Da,Da,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,9,T,9,T,T,9,T,T,T,T,T,T,T,T,T,Ja,T,T,10,10,T,T,T,T,T,Ja,Ja,T,T,T,T,T,V,V,V,V,V,T,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,
V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,T,T,18],[T,T,T,Ja,Ja,Ja,T,T,T,T,T,10,9,10,9,9,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,9,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,B,B,B,B,B,B,T,T,B,B,B,B,B,B,T,T,B,B,B,B,
B,B,T,T,B,B,B,T,T,T,Ja,Ja,T,T,T,Ja,Ja,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];return D})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(r){r&&B.isObject(r)&&(this.size="auto"===this.size?this.size:c.pt2px(this.size),this.xoffset=c.pt2px(this.xoffset),this.yoffset=c.pt2px(this.yoffset),
this.angle&&(this.angle*=-1))},setAngle:function(r){this.angle=r;return this},setSize:function(r){this.size=r;return this},setOffset:function(r,f){this.xoffset=r;this.yoffset=f;return this},toJson:function(){var r=c.px2pt(this.size);r=isNaN(r)?void 0:r;var f=c.px2pt(this.xoffset);f=isNaN(f)?void 0:f;var m=c.px2pt(this.yoffset);m=isNaN(m)?void 0:m;return B.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:r,angle:this.angle&&-1*this.angle,xoffset:f,yoffset:m})}});B.setObject("symbol.MarkerSymbol",
D,k);return D})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(D,B,a,c,k,n){D=D(null,{declaredClass:"esri.symbol.Symbol",color:new n([0,0,0,1]),type:null,constructor:function(r){r&&B.isObject(r)&&(B.mixin(this,r),this.color&&k.isDefined(this.color[0])&&(this.color=n.toDojoColor(this.color)),(r=this.type)&&0===r.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",
esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[r]))},setColor:function(r){this.color=r;return this},toJson:function(){return{color:n.toJsonColor(this.color)}}});B.setObject("symbol.Symbol",D,c);return D})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(D,B,a,c){var k=D([B],{declaredClass:"esri.Color"});k.toJsonColor=function(n){return n&&[n.r,n.g,n.b,1<
n.a?n.a:Math.round(255*n.a)]};k.toDojoColor=function(n){return n&&new k([n[0],n[1],n[2],n[3]/255])};a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<a.length;D++)k[a[D]]=B[a[D]];return c.Color=k})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(D,B,a,c,k,n,r,f){var m={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",
STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},q={color:[0,0,0,1],style:m.STYLE_SOLID,width:1};D=D(f,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",
none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(l,b,g){l?B.isString(l)?(this.style=l,b&&(this.color=b),g&&(this.width=g)):(this.style=r.valueOf(this._styles,l.style)||m.STYLE_SOLID,this.marker=l.marker):(B.mixin(this,q),this.color=new a(this.color),this.width=k.pt2px(this.width))},setStyle:function(l){this.style=
l;return this},setMarker:function(l){this.marker=l},getStroke:function(){return this.style===m.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return r.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?B.clone(this.marker):
void 0}))}});B.mixin(D,m);D.defaultProps=q;B.setObject("symbol.SimpleLineSymbol",D,n);n.symbol.defaultSimpleLineSymbol=q;return D})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.symbol.LineSymbol",constructor:function(r){B.isObject(r)?this.width=c.pt2px(this.width):this.width=12},setWidth:function(r){this.width=r;return this},toJson:function(){var r=c.px2pt(this.width);
r=isNaN(r)?void 0:r;return B.mixin(this.inherited("toJson",arguments),{width:r})}});B.setObject("symbol.LineSymbol",D,k);return D})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(D,B,a,c,k,n,r,f){var m={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=D(f,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(q,l,
b){q?B.isString(q)?(this.url=q,l&&(this.width=l),b&&(this.height=b)):(this.width=c.pt2px(null==q.width?m.width:q.width),this.height=c.pt2px(null==q.height?m.height:q.height),l=q.imageData,9>a("ie")||!l||(b=this.url,this.url="data:"+(q.contentType||"image")+";base64,"+l,this.imageData=b)):(B.mixin(this,m),this.width=c.pt2px(this.width),this.height=c.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(q){this.width=q;return this},setHeight:function(q){this.height=
q;return this},setUrl:function(q){q!==this.url&&(delete this.imageData,delete this.contentType);this.url=q;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var q=this.url,l=this.imageData;if(0===q.indexOf("data:")){var b=q;q=l;l=b.indexOf(";base64,")+8;l=b.substr(l)}!B.isString(q)||0!==q.indexOf("/")&&0!==q.indexOf("//")&&
0!==q.indexOf("./")&&0!==q.indexOf("../")||(q=r.getAbsoluteUrl(q));b=c.px2pt(this.width);b=isNaN(b)?void 0:b;var g=c.px2pt(this.height);g=isNaN(g)?void 0:g;q=n.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:q,imageData:l,contentType:this.contentType,width:b,height:g}));delete q.color;delete q.size;q.imageData||delete q.imageData;return q}});D.defaultProps=m;B.setObject("symbol.PictureMarkerSymbol",D,k);k.symbol.defaultPictureMarkerSymbol=m;return D})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),
function(D,B,a,c,k,n,r,f){var m={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},q={color:[0,
0,0,1],style:m.STYLE_SOLID,width:1,cap:m.CAP_BUTT,join:m.JOIN_MITER,miterLimit:10};D=D(f,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(l,b,g,e,d,h){l?B.isString(l)?(this.style=l,b&&(this.color=b),void 0!==g&&(this.width=g),e&&(this.cap=e),d&&(this.join=d),void 0!==h&&(this.miterLimit=h)):(this.cap=r.valueOf(this._caps,
l.cap),this.join=r.valueOf(this._joins,l.join),this.width=k.pt2px(l.width),this.miterLimit=k.pt2px(l.miterLimit)):(B.mixin(this,q),this.color=new a(this.color),this.width=k.pt2px(this.width),this.miterLimit=k.pt2px(this.miterLimit))},setCap:function(l){this.cap=l;return this},setJoin:function(l){this.join=l;return this},setMiterLimit:function(l){this.miterLimit=l;return this},getStroke:function(){return B.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===m.JOIN_MITER?this.miterLimit:
this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var l=k.px2pt(this.miterLimit);l=isNaN(l)?void 0:l;return r.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:l}))}});B.mixin(D,m);D.defaultProps=q;B.setObject("symbol.CartographicLineSymbol",D,n);n.symbol.defaultCartographicLineSymbol=
q;return D})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(D,B,a,c,k,n,r,f,m,q){var l={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",
STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},b={style:l.STYLE_SOLID,color:[0,0,0,.25]};D=D(f,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(g,e,d){g?B.isString(g)?(this.style=
g,void 0!==e&&(this.outline=e),void 0!==d&&(this.color=d)):this.style=r.valueOf(this._styles,g.style):(B.mixin(this,b),this.outline=new m(this.outline),this.color=new a(this.color))},setStyle:function(g){this.style=g;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var g=this.style;return g===l.STYLE_NULL?null:g===l.STYLE_SOLID?this.color:B.mixin({},k.defaultPattern,{src:q.toUrl("../images/symbol/sfs/"+g+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return r.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});B.mixin(D,l);D.defaultProps=b;B.setObject("symbol.SimpleFillSymbol",D,n);n.symbol.defaultSimpleFillSymbol=b;return D})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(D,
B,a,c,k,n){D=D(k,{declaredClass:"esri.symbol.FillSymbol",constructor:function(r){r&&B.isObject(r)&&r.outline&&(this.outline=new n(r.outline))},setOutline:function(r){this.outline=r;return this},toJson:function(){var r=this.inherited("toJson",arguments);this.outline&&(r.outline=this.outline.toJson());return r}});B.setObject("symbol.FillSymbol",D,c);return D})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
function(D,B,a,c,k,n,r,f){var m={xoffset:0,yoffset:0,width:12,height:12};D=D(f,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(q,l,b,g){q?B.isString(q)?(this.url=q,void 0!==l&&(this.outline=l),void 0!==b&&(this.width=b),void 0!==g&&(this.height=g)):(this.xoffset=c.pt2px(q.xoffset),this.yoffset=c.pt2px(q.yoffset),this.width=c.pt2px(q.width),this.height=c.pt2px(q.height),l=q.imageData,9>a("ie")||!l||(b=this.url,this.url=
"data:"+(q.contentType||"image")+";base64,"+l,this.imageData=b)):(B.mixin(this,m),this.width=c.pt2px(this.width),this.height=c.pt2px(this.height))},setWidth:function(q){this.width=q;return this},setHeight:function(q){this.height=q;return this},setOffset:function(q,l){this.xoffset=q;this.yoffset=l;return this},setUrl:function(q){q!==this.url&&(delete this.imageData,delete this.contentType);this.url=q;return this},setXScale:function(q){this.xscale=q;return this},setYScale:function(q){this.yscale=q;
return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return B.mixin({},c.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var q=this.url,l=this.imageData;if(0===q.indexOf("data:")){var b=q;q=l;l=b.indexOf(";base64,")+
8;l=b.substr(l)}!B.isString(q)||0!==q.indexOf("/")&&0!==q.indexOf("//")&&0!==q.indexOf("./")&&0!==q.indexOf("../")||(q=r.getAbsoluteUrl(q));b=c.px2pt(this.width);b=isNaN(b)?void 0:b;var g=c.px2pt(this.height);g=isNaN(g)?void 0:g;var e=c.px2pt(this.xoffset);e=isNaN(e)?void 0:e;var d=c.px2pt(this.yoffset);d=isNaN(d)?void 0:d;q=n.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:q,imageData:l,contentType:this.contentType,width:b,height:g,xoffset:e,yoffset:d,xscale:this.xscale,yscale:this.yscale}));
q.imageData||delete q.imageData;return q}});D.defaultProps=m;B.setObject("symbol.PictureFillSymbol",D,k);k.symbol.defaultPictureFillSymbol=m;return D})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(D,B,a,c,k,n,r,f,m){var q={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:c.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},l={start:"left",
middle:"center",end:"right"},b={left:"start",center:"middle",right:"end",justify:"start"},g={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},e=document.createElement("canvas");D=D(f,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(d,h,t){B.mixin(this,q);this.font=new m(this.font);this.color=new r(this.color);d&&(B.isObject(d)?(B.mixin(this,d),this.color&&n.isDefined(this.color[0])&&(this.color=r.toDojoColor(this.color)),
this.type="textsymbol",this.font=new m(this.font),this.xoffset=c.pt2px(this.xoffset),this.yoffset=c.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=c.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=r.toDojoColor(this.haloColor))):(this.text=d,h&&(this.font=h),t&&(this.color=t)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(d){this.font=d;return this},setSize:function(d){this.font.size=d;return this},setAngle:function(d){this.angle=d;return this},
setOffset:function(d,h){this.xoffset=d;this.yoffset=h;return this},setHaloColor:function(d){this.haloColor=d;return this},setHaloSize:function(d){this.haloSize=d;return this},setAlign:function(d){this.align=d;this.setHorizontalAlignment(d&&l[d.toLowerCase()]||"center");return this},setHorizontalAlignment:function(d){this.horizontalAlignment=d;return this},getSVGAlign:function(){var d=this.horizontalAlignment;return d=d&&b[d.toLowerCase()]||"middle"},setVerticalAlignment:function(d){this.verticalAlignment=
d;return this},getSVGBaseline:function(){var d=this.verticalAlignment;return d&&g[d.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(d){this.decoration=d;this.font||this.setFont(new m);this.font.setDecoration(d);return this},setRotated:function(d){this.rotated=d;return this},setKerning:function(d){this.kerning=d;return this},setText:function(d){this.text=d;return this},getStroke:function(){return null},getFill:function(){return this.color},
getWidth:function(){var d=e&&e.getContext&&e.getContext("2d");if(d){var h=this.font;d.font=(h.style?h.style:c.defaultFont.style)+" "+(h.weight?h.weight:c.defaultFont.weight)+" "+(h.size?h.size:c.defaultFont.size)+"px "+(h.family?h.family:c.defaultFont.family);return d.measureText(this.text).width}d=this.getHeight();h=0;var t;for(t=0;t<this.text.length;t++){var z=this.text.charAt(t);h=z==z.toUpperCase()?h+.7*d:h+.5*d}return h},getHeight:function(){return c.normalizedLength(this.font.size)},getShapeDescriptors:function(){var d=
this.font;if(d){var h={};d.size&&(h.size=d.size);d.style&&(h.style=d.style);d.variant&&(h.variant=d.variant);d.decoration&&(h.decoration=d.decoration);d.weight&&(h.weight=d.weight);d.family&&(h.family=d.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||d&&d.decoration,rotated:this.rotated,kerning:this.kerning},font:h,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var d=c.px2pt(this.xoffset),h=c.px2pt(this.yoffset),
t=c.px2pt(this.haloSize);d=isNaN(d)?void 0:d;h=isNaN(h)?void 0:h;t=isNaN(t)?void 0:t;return n.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:t,haloColor:this.haloColor&&r.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:d,
yoffset:h,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});B.mixin(D,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});D.defaultProps=q;B.setObject("symbol.TextSymbol",D,k);k.symbol.defaultTextSymbol=q;return D})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),
function(D,B,a,c,k,n){D=D(null,{declaredClass:"esri.symbol.Font",constructor:function(r,f,m,q,l){r?B.isObject(r)?B.mixin(this,r):(this.size=r,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==f&&(this.style=f),void 0!==m&&(this.variant=m),void 0!==q&&(this.weight=q),void 0!==l&&(this.family=l)):B.mixin(this,c.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&B.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=c.pt2px(12*parseFloat(this.size))+
"px");this.size=this._convert2PxSize(this.size)},setSize:function(r){this.size=this._convert2PxSize(r);return this},_convert2PxSize:function(r){var f;parseFloat(r)==r?f=r:B.isString(r)&&(-1<r.indexOf("pt")?f=c.pt2px(parseFloat(r)):-1<r.indexOf("px")?f=parseFloat(r):-1<r.indexOf("em")?f=c.pt2px(12*parseFloat(r)):-1<r.indexOf("%")&&(f=c.pt2px(.12*parseFloat(r))));return f},setStyle:function(r){this.style=r;return this},setVariant:function(r){this.variant=r;return this},setWeight:function(r){this.weight=
r;return this},setFamily:function(r){this.family=r;return this},setDecoration:function(r){this.decoration=r;return this},toJson:function(){return n.fixJson({size:c.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});B.mixin(D,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});B.setObject("symbol.Font",
D,k);return D})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(n){this.messages=[];B.mixin(this,n);n=this.messages;var r,f=n.length;for(r=0;r<f;r++)n[r]=new k(n[r])},jobId:"",jobStatus:""});B.mixin(D,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",
STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});B.setObject("tasks.JobInfo",D,c);return D})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(k){B.mixin(this,k)}});B.mixin(D,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",
TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});B.setObject("tasks.GPMessage",D,c);return D})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.LinearUnit",
constructor:function(k){k&&B.mixin(this,k)},distance:0,units:null,toJson:function(){var k={};this.distance&&(k.distance=this.distance);this.units&&(k.units=this.units);return k}});B.setObject("tasks.LinearUnit",D,c);return D})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.DataFile",constructor:function(k){k&&B.mixin(this,k)},url:null,itemID:null,toJson:function(){var k={};this.url&&(k.url=
this.url);this.itemID&&(k.itemID=this.itemID);return k}});B.setObject("tasks.DataFile",D,c);return D})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.RasterData",constructor:function(k){k&&B.mixin(this,k)},url:null,format:null,itemID:null,toJson:function(){var k={};this.url&&(k.url=this.url);this.format&&(k.format=this.format);this.itemID&&(k.itemID=this.itemID);return k}});B.setObject("tasks.RasterData",
D,c);return D})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.tasks.Date",constructor:function(n){n&&(n.format&&(this.format=n.format),this.date=a.parse(n.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:a.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});B.setObject("tasks.Date",
D,k);return D})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(k){B.mixin(this,k)}});B.setObject("tasks.ParameterValue",D,c);return D})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(D,B,a,c,k,n,r){D=
D(r,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(f,m){m&&m.imageParameters&&m.imageParameters.extent&&(this.initialExtent=this.fullExtent=m.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=B.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(f,m,q,l){var b=f.spatialReference.wkid;l(this._url.path+"?"+k.objectToQuery(B.mixin(this._params,{f:"image",bbox:a.toJson(f.toJson()),bboxSR:b,imageSR:b,
size:m+","+q})))}});B.setObject("tasks._GPResultImageLayer",D,n);return D})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,
d,h,t,z,v,y){D=D([e,d],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(C,F,x){C=F&&F.imageParameters;var u=B.hitch;if(C){var w=C.layerDefinitions;w&&this.setLayerDefinitions(w);C.layerOption===z.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(C.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=u(this,this._setIsPNG32);this.dpi=C&&C.dpi||96;this.imageFormat=C&&C.format||"png8";this.imageTransparency=
C&&!1===C.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=F&&F.gdbVersion;this._params.gdbVersion=this.gdbVersion;w=C&&C.layerDefinitions;B.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},C?C.toJson():{});w&&(this._params.layerDefs=w);this.getImageUrl=u(this,this.getImageUrl);this._initLayer=u(this,this._initLayer);this._load=u(this,this._load);this.useMapImage=F?F.useMapImage:!1;this._loadCallback=F&&F.loadCallback;(F=F&&F.resourceInfo)?
this._initLayer(F):(void 0===x||!1===x)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(C,F){this.inherited(arguments);C.timeInfo&&(this.timeInfo=new h(C.timeInfo));this.loaded=!0;this.onLoad(this);var x=this._loadCallback;x&&(delete this._loadCallback,x(this))},getImageUrl:function(C,F,x,u){var w=this._url.path+"/export",A=this._params,E=A.token=this._getToken(),G=C.spatialReference.wkid||c.toJson(C.spatialReference.toJson()),H=this._errorHandler;
delete A._ts;B.mixin(A,{bbox:C.xmin+","+C.ymin+","+C.xmax+","+C.ymax,bboxSR:G,imageSR:G,size:F+","+x},this.disableClientCaching?{_ts:(new Date).getTime()}:{});A.layerDefs&&(C=b._serializeLayerDefinitions(A.layerDefs,10.5<=this.version),A=B.mixin({},A),delete A.layerDefs,A.layerDefs=C);C=l.addProxy(l.normalize(w)+"?"+n.objectToQuery(B.mixin({},A,{f:"image"})));C.length>f.defaults.io.postLength||this.useMapImage?this._jsonRequest=q({url:w,content:B.mixin(A,{f:"json"}),callbackParamName:"callback",load:function(K){K.imageData?
K="data:"+(K.contentType||"image")+";base64,"+K.imageData:(K=K.href,E&&(K+=-1===K.indexOf("?")?"?token\x3d"+E:"\x26token\x3d"+E),K=l.addProxy(K));u(K)},error:H}):u(C)},_setIsPNG32:function(){var C=this.imageFormat.toLowerCase(),F=k("ie");this.isPNG32=F&&6===F&&("png32"===C||"png24"===C)&&this.imageTransparency},_setTime:function(C){var F=this.timeInfo;C=this._params.time=C?C.toJson().join(","):null;if(10.02>this.version&&F)if(C)this._params.layerTimeOptions=b._serializeTimeOptions(this.layerTimeOptions);
else{var x=this.layerInfos;if(x){var u=this.layerTimeOptions,w=u?u.slice(0):[],A=[];a.forEach(x,function(E){E.subLayerIds||A.push(E.id)});A.length&&(a.forEach(A,function(E){if(!w[E]){var G=new t;G.useTime=!1;w[E]=G}}),this._params.layerTimeOptions=b._serializeTimeOptions(w,A))}}10.02<=this.version&&F&&!C&&!F.hasLiveData&&(this._params.time="null,null")},setDPI:function(C,F){this.dpi=this._params.dpi=C;F||this.refresh(!0)},setImageFormat:function(C,F){this.imageFormat=this._params.format=C;this._setIsPNG32();
F||this.refresh(!0)},setImageTransparency:function(C,F){this.imageTransparency=this._params.transparent=C;this._setIsPNG32();F||this.refresh(!0)},setVisibleLayers:function(C,F){this.visibleLayers=C;this._params.layers=z.LAYER_OPTION_SHOW+":"+(C.length?C.join():"-1");this._updateDynamicLayers();F||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(C){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();C||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(C,F){this.layerDefinitions=C;this._params.layerDefs=C;this._updateDynamicLayers();F||this.refresh(!0)},setDefaultLayerDefinitions:function(C){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();C||this.refresh(!0)},setDisableClientCaching:function(C){this.disableClientCaching=C},setLayerTimeOptions:function(C,F){this.layerTimeOptions=C;this._params.layerTimeOptions=
b._serializeTimeOptions(C);this._updateDynamicLayers();F||this.refresh(!0)},refresh:function(C){if(!0===C)this.inherited(arguments);else{var F=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=F}},setLayerDrawingOptions:function(C,F){this.layerDrawingOptions=C;this._updateDynamicLayers();F||this.refresh(!0)},setDynamicLayerInfos:function(C,F){C&&0<C.length?(this.dynamicLayerInfos=C,this.visibleLayers=b._getDefaultVisibleLayers(C),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();F||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var C=[],F;a.forEach(this.layerInfos,function(x){F=new v(x.toJson());F.source=new y({mapLayerId:x.id});C.push(F)});return C},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var C=this._map&&g.getScale(this._map);C=this._getDynLayerObjs(C);C=c.toJson(C);this._params.dynamicLayers&&this._params.dynamicLayers.length===C.length&&this._params.dynamicLayers===C||(this._params.dynamicLayers=C,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(C){var F=
this.dynamicLayerInfos,x=[],u=this.visibleLayers,w=C?b._getLayersForScale(C,F):u;a.forEach(F,function(A){if(!A.subLayerIds){var E=A.id;if(-1!==a.indexOf(u,E)&&-1!==a.indexOf(w,E)){var G={id:E,name:A.name};G.source=A.source&&A.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[E]&&(H=this.layerDefinitions[E]);H&&(G.definitionExpression=H);var K;this.layerDrawingOptions&&this.layerDrawingOptions[E]&&(K=this.layerDrawingOptions[E]);K&&(H=K.toJson(),this._fixMarkerColor(H.renderer),G.drawingInfo=
H);var I;this.layerTimeOptions&&this.layerTimeOptions[E]&&(I=this.layerTimeOptions[E]);I&&(G.layerTimeOptions=I.toJson());G.minScale=A.minScale||0;G.maxScale=A.maxScale||0;x.push(G)}}},this);return x},_fixMarkerColor:function(C){a.forEach(this._getAllSimpleMarkerSymbols(C),function(F){if(!F.color){var x=[0,0,0,0],u=F.outline&&F.outline.color;"esriSMSX"!==F.style&&"esriSMSCross"!==F.style||!u||(x=u.slice(0));F.color=x}})},_getAllSimpleMarkerSymbols:function(C){return a.filter(this._getAllSymbols(C),
function(F){return"esriSMS"===F.type})},_getAllSymbols:function(C){var F=[];C&&(F.push(C.symbol),F.push(C.defaultSymbol),a.forEach(C.uniqueValueInfos||C.classBreakInfos,function(x){F.push(x.symbol)}),F=a.filter(F,m.isDefined));return F},_onExtentChangeHandler:function(C,F,x){x&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(C,F,x){this._map=C;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(C,F){this.gdbVersion=
C;this._params.gdbVersion=C;this.onGDBVersionChange();F||this.refresh(!0)},exportMapImage:function(C,F){var x=B.hitch(this,function(){var u=f.defaults.map,w=C&&C.layerDefinitions;C=C?C.toJson(this.normalization):{};w&&(C.layerDefs=w);C=B.mixin({size:u.width+","+u.height},this._params,C,{f:"json"});delete C._ts;C.layerDefs&&(u=b._serializeLayerDefinitions(C.layerDefs,10.5<=this.version),delete C.layerDefs,C.layerDefs=u);this._exportMapImage(this._url.path+"/export",C,F)});if(this.loaded)x();else this.on("load",
x)}});B.setObject("layers.ArcGISDynamicMapServiceLayer",D,r);return D})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(D,B,a,c,k){function n(b,g,e){return b&&g?b.getWidth()/g*(e||f)*39.37*m.screenDPI:0}function r(b,g,e,d,h){return b.expand(d*g/(39.37*((h?e:q.values[q[e]])||f)*m.screenDPI)/b.getWidth())}var f=6370997*Math.PI/180,m=c.defaults,q=k,l={getUnitValueForSR:function(b){return this.getUnitValue(b)||f},getUnitValue:function(b){if(b)if("object"===
typeof b){var g=b.wkid;var e=b.wkt}else"number"===typeof b?g=b:"string"===typeof b&&(e=b);if(g)var d=q.values[q[g]];else e&&-1!==e.search(/^PROJCS/i)&&(b=/UNIT\[([^\]]+)\]\]$/i.exec(e))&&b[1]&&(d=parseFloat(b[1].split(",")[1]));return d},getScale:function(b,g,e){if(1<arguments.length&&null!=g&&!g.declaredClass){var d=b;var h=g;g=null;var t=l.getUnitValue(e)}else d=g||b.extent,h=b.width,t=l.getUnitValue(d&&d.spatialReference);return n(d,h,t)},getExtentForScale:function(b,g,e){return r(e||b.extent,
b.width,l.getUnitValue(b.spatialReference),g,!0)}};D.mixin(D.getObject("geometry",!0,a),l);a.geometry._getScale=n;a.geometry._getExtentForScale=r;return l})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(D,B){var a,c={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,
22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,
29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,
102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,
103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,
103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,
103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,
103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)c[a]=0;for(a=2056;2065>=a;a++)c[a]=0;for(a=2067;2135>=a;a++)c[a]=0;for(a=2137;2154>=a;a++)c[a]=0;for(a=2161;2170>=a;a++)c[a]=0;for(a=2172;2193>=a;a++)c[a]=0;for(a=2195;2198>=a;a++)c[a]=0;for(a=2200;2203>=a;a++)c[a]=0;for(a=2205;2217>=a;a++)c[a]=0;for(a=2222;2224>=a;a++)c[a]=1;for(a=2225;2250>=a;a++)c[a]=2;for(a=2251;2253>=a;a++)c[a]=1;for(a=2257;2264>=a;a++)c[a]=2;for(a=2274;2279>=a;a++)c[a]=2;for(a=2280;2282>=a;a++)c[a]=1;for(a=
2283;2289>=a;a++)c[a]=2;for(a=2290;2292>=a;a++)c[a]=0;for(a=2308;2313>=a;a++)c[a]=0;for(a=2315;2491>=a;a++)c[a]=0;for(a=2494;2866>=a;a++)c[a]=0;for(a=2867;2869>=a;a++)c[a]=1;for(a=2870;2888>=a;a++)c[a]=2;for(a=2891;2895>=a;a++)c[a]=2;for(a=2896;2898>=a;a++)c[a]=1;for(a=2902;2908>=a;a++)c[a]=2;for(a=2915;2920>=a;a++)c[a]=2;for(a=2921;2923>=a;a++)c[a]=1;for(a=2924;2930>=a;a++)c[a]=2;for(a=2931;2962>=a;a++)c[a]=0;for(a=2964;2968>=a;a++)c[a]=2;for(a=2969;2973>=a;a++)c[a]=0;for(a=2975;2991>=a;a++)c[a]=
0;for(a=2995;3051>=a;a++)c[a]=0;for(a=3054;3079>=a;a++)c[a]=0;for(a=3081;3088>=a;a++)c[a]=0;for(a=3092;3101>=a;a++)c[a]=0;for(a=3106;3138>=a;a++)c[a]=0;for(a=3146;3151>=a;a++)c[a]=0;for(a=3153;3166>=a;a++)c[a]=0;for(a=3168;3172>=a;a++)c[a]=0;for(a=3174;3203>=a;a++)c[a]=0;for(a=3294;3358>=a;a++)c[a]=0;for(a=3367;3403>=a;a++)c[a]=0;for(a=3408;3416>=a;a++)c[a]=0;for(a=3417;3438>=a;a++)c[a]=2;for(a=3441;3446>=a;a++)c[a]=2;for(a=3447;3450>=a;a++)c[a]=0;for(a=3451;3459>=a;a++)c[a]=2;for(a=3460;3478>=a;a++)c[a]=
0;for(a=3554;3559>=a;a++)c[a]=0;for(a=3560;3570>=a;a++)c[a]=2;for(a=3571;3581>=a;a++)c[a]=0;for(a=3594;3597>=a;a++)c[a]=0;for(a=3601;3604>=a;a++)c[a]=0;for(a=3637;3639>=a;a++)c[a]=0;for(a=3665;3667>=a;a++)c[a]=0;for(a=3693;3695>=a;a++)c[a]=0;for(a=3701;3727>=a;a++)c[a]=0;for(a=3728;3739>=a;a++)c[a]=2;for(a=3740;3751>=a;a++)c[a]=0;for(a=3753;3760>=a;a++)c[a]=2;for(a=3761;3773>=a;a++)c[a]=0;for(a=3775;3777>=a;a++)c[a]=0;for(a=3779;3781>=a;a++)c[a]=0;for(a=3783;3785>=a;a++)c[a]=0;for(a=3788;3791>=a;a++)c[a]=
0;for(a=3797;3802>=a;a++)c[a]=0;for(a=3814;3816>=a;a++)c[a]=0;for(a=3825;3829>=a;a++)c[a]=0;for(a=3832;3841>=a;a++)c[a]=0;for(a=3844;3852>=a;a++)c[a]=0;for(a=3873;3885>=a;a++)c[a]=0;for(a=3890;3893>=a;a++)c[a]=0;for(a=3907;3912>=a;a++)c[a]=0;for(a=3942;3950>=a;a++)c[a]=0;for(a=3968;3970>=a;a++)c[a]=0;for(a=3973;3976>=a;a++)c[a]=0;for(a=3986;3989>=a;a++)c[a]=0;for(a=3994;3997>=a;a++)c[a]=0;for(a=4048;4051>=a;a++)c[a]=0;for(a=4056;4063>=a;a++)c[a]=0;for(a=4093;4096>=a;a++)c[a]=0;for(a=4390;4398>=a;a++)c[a]=
0;for(a=4399;4413>=a;a++)c[a]=2;for(a=4418;4433>=a;a++)c[a]=2;for(a=4455;4457>=a;a++)c[a]=2;for(a=4484;4489>=a;a++)c[a]=0;for(a=4491;4554>=a;a++)c[a]=0;for(a=4568;4589>=a;a++)c[a]=0;for(a=4652;4656>=a;a++)c[a]=0;for(a=4766;4800>=a;a++)c[a]=0;for(a=5014;5016>=a;a++)c[a]=0;for(a=5069;5072>=a;a++)c[a]=0;for(a=5105;5130>=a;a++)c[a]=0;for(a=5173;5188>=a;a++)c[a]=0;for(a=5253;5259>=a;a++)c[a]=0;for(a=5269;5275>=a;a++)c[a]=0;for(a=5292;5311>=a;a++)c[a]=0;for(a=5329;5331>=a;a++)c[a]=0;for(a=5343;5349>=a;a++)c[a]=
0;for(a=5355;5357>=a;a++)c[a]=0;for(a=5387;5389>=a;a++)c[a]=0;for(a=5459;5463>=a;a++)c[a]=0;for(a=5479;5482>=a;a++)c[a]=0;for(a=5518;5520>=a;a++)c[a]=0;for(a=5530;5539>=a;a++)c[a]=0;for(a=5550;5552>=a;a++)c[a]=0;for(a=5562;5583>=a;a++)c[a]=0;for(a=5623;5625>=a;a++)c[a]=2;for(a=5631;5639>=a;a++)c[a]=0;for(a=5649;5653>=a;a++)c[a]=0;for(a=5663;5680>=a;a++)c[a]=0;for(a=5682;5685>=a;a++)c[a]=0;for(a=5875;5877>=a;a++)c[a]=0;for(a=5896;5899>=a;a++)c[a]=0;for(a=5921;5940>=a;a++)c[a]=0;for(a=6050;6125>=a;a++)c[a]=
0;for(a=6244;6275>=a;a++)c[a]=0;for(a=6328;6348>=a;a++)c[a]=0;for(a=6350;6356>=a;a++)c[a]=0;for(a=6366;6372>=a;a++)c[a]=0;for(a=6381;6387>=a;a++)c[a]=0;for(a=6393;6404>=a;a++)c[a]=0;for(a=6480;6483>=a;a++)c[a]=0;for(a=6511;6514>=a;a++)c[a]=0;for(a=6579;6581>=a;a++)c[a]=0;for(a=6619;6624>=a;a++)c[a]=0;for(a=6625;6627>=a;a++)c[a]=2;for(a=6628;6632>=a;a++)c[a]=0;for(a=6634;6637>=a;a++)c[a]=0;for(a=6669;6692>=a;a++)c[a]=0;for(a=6707;6709>=a;a++)c[a]=0;for(a=6720;6723>=a;a++)c[a]=0;for(a=6732;6738>=a;a++)c[a]=
0;for(a=6931;6933>=a;a++)c[a]=0;for(a=6956;6959>=a;a++)c[a]=0;for(a=7005;7007>=a;a++)c[a]=0;for(a=7057;7070>=a;a++)c[a]=2;for(a=7074;7082>=a;a++)c[a]=0;for(a=7109;7118>=a;a++)c[a]=0;for(a=7119;7127>=a;a++)c[a]=1;for(a=7374;7376>=a;a++)c[a]=0;for(a=7528;7586>=a;a++)c[a]=0;for(a=7587;7645>=a;a++)c[a]=2;for(a=7692;7696>=a;a++)c[a]=0;for(a=7755;7787>=a;a++)c[a]=0;for(a=7791;7795>=a;a++)c[a]=0;for(a=7799;7801>=a;a++)c[a]=0;for(a=7803;7805>=a;a++)c[a]=0;for(a=7825;7831>=a;a++)c[a]=0;for(a=7845;7859>=a;a++)c[a]=
0;for(a=8013;8032>=a;a++)c[a]=0;for(a=8065;8068>=a;a++)c[a]=1;for(a=8518;8529>=a;a++)c[a]=2;for(a=8533;8536>=a;a++)c[a]=2;for(a=8538;8540>=a;a++)c[a]=2;for(a=8677;8679>=a;a++)c[a]=0;for(a=8836;8840>=a;a++)c[a]=0;for(a=8857;8859>=a;a++)c[a]=0;for(a=8908;8910>=a;a++)c[a]=0;for(a=9154;9159>=a;a++)c[a]=0;for(a=9205;9218>=a;a++)c[a]=0;for(a=9271;9273>=a;a++)c[a]=0;for(a=9295;9297>=a;a++)c[a]=0;for(a=9356;9360>=a;a++)c[a]=0;for(a=9404;9407>=a;a++)c[a]=0;for(a=9476;9482>=a;a++)c[a]=0;for(a=9487;9494>=a;a++)c[a]=
0;for(a=9697;9699>=a;a++)c[a]=0;for(a=20002;20032>=a;a++)c[a]=0;for(a=20062;20092>=a;a++)c[a]=0;for(a=20135;20138>=a;a++)c[a]=0;for(a=20248;20258>=a;a++)c[a]=0;for(a=20348;20358>=a;a++)c[a]=0;for(a=20436;20440>=a;a++)c[a]=0;for(a=20822;20824>=a;a++)c[a]=0;for(a=20904;20932>=a;a++)c[a]=0;for(a=20934;20936>=a;a++)c[a]=0;for(a=21004;21032>=a;a++)c[a]=0;for(a=21035;21037>=a;a++)c[a]=0;for(a=21095;21097>=a;a++)c[a]=0;for(a=21148;21150>=a;a++)c[a]=0;for(a=21207;21264>=a;a++)c[a]=0;for(a=21307;21364>=a;a++)c[a]=
0;for(a=21413;21423>=a;a++)c[a]=0;for(a=21453;21463>=a;a++)c[a]=0;for(a=21473;21483>=a;a++)c[a]=0;for(a=21780;21782>=a;a++)c[a]=0;for(a=21891;21894>=a;a++)c[a]=0;for(a=21896;21899>=a;a++)c[a]=0;for(a=22171;22177>=a;a++)c[a]=0;for(a=22181;22187>=a;a++)c[a]=0;for(a=22191;22197>=a;a++)c[a]=0;for(a=22234;22236>=a;a++)c[a]=0;for(a=22521;22525>=a;a++)c[a]=0;for(a=22991;22994>=a;a++)c[a]=0;for(a=23028;23038>=a;a++)c[a]=0;for(a=23830;23853>=a;a++)c[a]=0;for(a=23866;23872>=a;a++)c[a]=0;for(a=23877;23884>=
a;a++)c[a]=0;for(a=23886;23894>=a;a++)c[a]=0;for(a=23946;23948>=a;a++)c[a]=0;for(a=24311;24313>=a;a++)c[a]=0;for(a=24342;24347>=a;a++)c[a]=0;for(a=24370;24374>=a;a++)c[a]=10;for(a=24375;24381>=a;a++)c[a]=0;for(a=24718;24721>=a;a++)c[a]=0;for(a=24817;24821>=a;a++)c[a]=0;for(a=24877;24882>=a;a++)c[a]=0;for(a=24891;24893>=a;a++)c[a]=0;for(a=25391;25395>=a;a++)c[a]=0;for(a=25828;25838>=a;a++)c[a]=0;for(a=26191;26195>=a;a++)c[a]=0;for(a=26391;26393>=a;a++)c[a]=0;for(a=26701;26722>=a;a++)c[a]=0;for(a=26729;26799>=
a;a++)c[a]=2;for(a=26801;26803>=a;a++)c[a]=2;for(a=26811;26813>=a;a++)c[a]=2;for(a=26847;26870>=a;a++)c[a]=2;for(a=26891;26899>=a;a++)c[a]=0;for(a=26901;26923>=a;a++)c[a]=0;for(a=26929;26946>=a;a++)c[a]=0;for(a=26948;26998>=a;a++)c[a]=0;for(a=27037;27040>=a;a++)c[a]=0;for(a=27205;27232>=a;a++)c[a]=0;for(a=27258;27260>=a;a++)c[a]=0;for(a=27391;27398>=a;a++)c[a]=0;for(a=27561;27564>=a;a++)c[a]=0;for(a=27571;27574>=a;a++)c[a]=0;for(a=27581;27584>=a;a++)c[a]=0;for(a=27591;27594>=a;a++)c[a]=0;for(a=28191;28193>=
a;a++)c[a]=0;for(a=28348;28358>=a;a++)c[a]=0;for(a=28402;28432>=a;a++)c[a]=0;for(a=28462;28492>=a;a++)c[a]=0;for(a=29118;29122>=a;a++)c[a]=0;for(a=29168;29172>=a;a++)c[a]=0;for(a=29177;29185>=a;a++)c[a]=0;for(a=29187;29195>=a;a++)c[a]=0;for(a=29900;29903>=a;a++)c[a]=0;for(a=30161;30179>=a;a++)c[a]=0;for(a=30491;30494>=a;a++)c[a]=0;for(a=30729;30732>=a;a++)c[a]=0;for(a=31251;31259>=a;a++)c[a]=0;for(a=31265;31268>=a;a++)c[a]=0;for(a=31275;31279>=a;a++)c[a]=0;for(a=31281;31297>=a;a++)c[a]=0;for(a=31461;31469>=
a;a++)c[a]=0;for(a=31491;31495>=a;a++)c[a]=0;for(a=31917;31922>=a;a++)c[a]=0;for(a=31965;32E3>=a;a++)c[a]=0;for(a=32001;32003>=a;a++)c[a]=2;for(a=32005;32031>=a;a++)c[a]=2;for(a=32033;32060>=a;a++)c[a]=2;for(a=32064;32067>=a;a++)c[a]=2;for(a=32074;32077>=a;a++)c[a]=2;for(a=32081;32086>=a;a++)c[a]=0;for(a=32107;32130>=a;a++)c[a]=0;for(a=32133;32158>=a;a++)c[a]=0;for(a=32164;32167>=a;a++)c[a]=2;for(a=32180;32199>=a;a++)c[a]=0;for(a=32201;32260>=a;a++)c[a]=0;for(a=32301;32360>=a;a++)c[a]=0;for(a=32601;32662>=
a;a++)c[a]=0;for(a=32664;32667>=a;a++)c[a]=2;for(a=32701;32761>=a;a++)c[a]=0;for(a=53001;53004>=a;a++)c[a]=0;for(a=53008;53019>=a;a++)c[a]=0;for(a=53021;53032>=a;a++)c[a]=0;for(a=53034;53037>=a;a++)c[a]=0;for(a=53042;53046>=a;a++)c[a]=0;for(a=53074;53080>=a;a++)c[a]=0;for(a=54001;54004>=a;a++)c[a]=0;for(a=54008;54019>=a;a++)c[a]=0;for(a=54021;54032>=a;a++)c[a]=0;for(a=54034;54037>=a;a++)c[a]=0;for(a=54042;54046>=a;a++)c[a]=0;for(a=54048;54053>=a;a++)c[a]=0;for(a=54074;54080>=a;a++)c[a]=0;for(a=54098;54101>=
a;a++)c[a]=0;for(a=102001;102040>=a;a++)c[a]=0;for(a=102042;102063>=a;a++)c[a]=0;for(a=102065;102067>=a;a++)c[a]=0;for(a=102070;102117>=a;a++)c[a]=0;for(a=102122;102216>=a;a++)c[a]=0;for(a=102221;102377>=a;a++)c[a]=0;for(a=102382;102388>=a;a++)c[a]=0;for(a=102389;102398>=a;a++)c[a]=2;for(a=102399;102444>=a;a++)c[a]=0;for(a=102445;102447>=a;a++)c[a]=2;for(a=102448;102458>=a;a++)c[a]=0;for(a=102459;102468>=a;a++)c[a]=2;for(a=102469;102499>=a;a++)c[a]=0;for(a=102500;102519>=a;a++)c[a]=1;for(a=102520;102524>=
a;a++)c[a]=0;for(a=102525;102529>=a;a++)c[a]=2;for(a=102530;102588>=a;a++)c[a]=0;for(a=102590;102598>=a;a++)c[a]=0;for(a=102601;102603>=a;a++)c[a]=0;for(a=102605;102628>=a;a++)c[a]=0;for(a=102629;102646>=a;a++)c[a]=2;for(a=102648;102700>=a;a++)c[a]=2;for(a=102701;102703>=a;a++)c[a]=0;for(a=102707;102730>=a;a++)c[a]=2;for(a=102733;102758>=a;a++)c[a]=2;for(a=102767;102900>=a;a++)c[a]=0;for(a=102901;102933>=a;a++)c[a]=2;for(a=102934;102950>=a;a++)c[a]=13;for(a=102951;102955>=a;a++)c[a]=0;for(a=102961;102963>=
a;a++)c[a]=0;for(a=102965;102969>=a;a++)c[a]=0;for(a=102971;102973>=a;a++)c[a]=0;for(a=102975;102989>=a;a++)c[a]=0;for(a=102990;102992>=a;a++)c[a]=1;for(a=102997;103002>=a;a++)c[a]=0;for(a=103003;103008>=a;a++)c[a]=2;for(a=103009;103011>=a;a++)c[a]=0;for(a=103012;103014>=a;a++)c[a]=2;for(a=103019;103021>=a;a++)c[a]=0;for(a=103022;103024>=a;a++)c[a]=2;for(a=103029;103031>=a;a++)c[a]=0;for(a=103032;103034>=a;a++)c[a]=2;for(a=103065;103068>=a;a++)c[a]=0;for(a=103074;103076>=a;a++)c[a]=0;for(a=103077;103079>=
a;a++)c[a]=1;for(a=103080;103082>=a;a++)c[a]=0;for(a=103083;103085>=a;a++)c[a]=2;for(a=103090;103093>=a;a++)c[a]=0;for(a=103097;103099>=a;a++)c[a]=0;for(a=103100;103102>=a;a++)c[a]=2;for(a=103107;103109>=a;a++)c[a]=0;for(a=103110;103112>=a;a++)c[a]=2;for(a=103113;103116>=a;a++)c[a]=0;for(a=103117;103120>=a;a++)c[a]=2;for(a=103153;103157>=a;a++)c[a]=0;for(a=103158;103162>=a;a++)c[a]=2;for(a=103163;103165>=a;a++)c[a]=0;for(a=103166;103168>=a;a++)c[a]=1;for(a=103169;103171>=a;a++)c[a]=2;for(a=103186;103188>=
a;a++)c[a]=0;for(a=103189;103191>=a;a++)c[a]=2;for(a=103192;103195>=a;a++)c[a]=0;for(a=103196;103199>=a;a++)c[a]=2;for(a=103200;103224>=a;a++)c[a]=0;for(a=103225;103227>=a;a++)c[a]=1;for(a=103232;103237>=a;a++)c[a]=0;for(a=103238;103243>=a;a++)c[a]=2;for(a=103244;103246>=a;a++)c[a]=0;for(a=103247;103249>=a;a++)c[a]=2;for(a=103254;103256>=a;a++)c[a]=0;for(a=103257;103259>=a;a++)c[a]=2;for(a=103264;103266>=a;a++)c[a]=0;for(a=103267;103269>=a;a++)c[a]=2;for(a=103300;103375>=a;a++)c[a]=0;for(a=103381;103383>=
a;a++)c[a]=0;for(a=103384;103386>=a;a++)c[a]=1;for(a=103387;103389>=a;a++)c[a]=0;for(a=103390;103392>=a;a++)c[a]=2;for(a=103397;103399>=a;a++)c[a]=0;for(a=103400;103471>=a;a++)c[a]=2;for(a=103476;103478>=a;a++)c[a]=0;for(a=103479;103481>=a;a++)c[a]=2;for(a=103486;103488>=a;a++)c[a]=0;for(a=103489;103491>=a;a++)c[a]=2;for(a=103492;103495>=a;a++)c[a]=0;for(a=103496;103499>=a;a++)c[a]=2;for(a=103528;103543>=a;a++)c[a]=0;for(a=103544;103548>=a;a++)c[a]=2;for(a=103549;103551>=a;a++)c[a]=0;for(a=103552;103554>=
a;a++)c[a]=1;for(a=103555;103557>=a;a++)c[a]=2;for(a=103558;103560>=a;a++)c[a]=0;for(a=103571;103573>=a;a++)c[a]=0;for(a=103574;103576>=a;a++)c[a]=2;for(a=103577;103580>=a;a++)c[a]=0;for(a=103581;103583>=a;a++)c[a]=2;for(a=103595;103694>=a;a++)c[a]=0;for(a=103696;103699>=a;a++)c[a]=0;for(a=103700;103793>=a;a++)c[a]=2;for(a=103794;103887>=a;a++)c[a]=0;for(a=103900;103971>=a;a++)c[a]=2;return B.WKIDUnitConversion=c})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g){var e=f.defaults.map.zoomDuration;D=D(b,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(d,h){this.useMapTime=h&&h.hasOwnProperty("useMapTime")?!!h.useMapTime:!0;this.extentProcessor=h&&h.extentProcessor;var t=a.hitch;this._exportMapImageHandler=t(this,this._exportMapImageHandler);this._imgSrcFunc=t(this,this._imgSrcFunc);this._divAlphaImageFunc=t(this,this._divAlphaImageFunc);this._tileLoadHandler=
t(this,this._tileLoadHandler);this._tileErrorHandler=t(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(d,h,t){this.inherited(arguments);this._map=d;var z=this._div=c.create("div",null,h),v=r._css.names,y={position:"absolute",width:d.width+"px",height:d.height+"px",overflow:"visible",opacity:this.opacity},C=m("ie"),F=B.connect,x=d.__visibleDelta;8===C&&delete y.opacity;"css-transforms"===d.navigationMode?(this._isChildLayer||(y[v.transform]=r._css.translate(x.x,
x.y),k.set(z,y)),this._left=x.x,this._top=x.y):(y.left="0px",y.top="0px",k.set(z,y),this._left=this._top=0);k.set(z,y);this._onResizeHandler_connect=F(d,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=F(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!d.loaded)var u=B.connect(d,"onLoad",this,function(){B.disconnect(u);u=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=
B.connect(d,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=B.connect(d,"onZoomEnd",this,this.evaluateSuspension));return z},_unsetMap:function(d,h){this._img&&this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);c.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var t=B.disconnect;t(this._onResizeHandler_connect);t(this._opacityChangeHandler_connect);t(this._panEndEvalHandle);t(this._zoomEndEvalHandle);this._panEndEvalHandle=
this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(d,h,t){k.set(this._div,{width:h+"px",height:t+"px"});this._onExtentChangeHandler(d)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();l.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=
null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var d=this._map;this._toggleTime();"css-transforms"===d.navigationMode&&(d=d.__visibleDelta,this._left=d.x,this._top=d.y,this._isChildLayer||k.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var d=
this.inherited(arguments);if(d){var h=this._map.extent;this.extentProcessor&&h&&(d=!!this.extentProcessor({layer:this,extent:h,width:this._map.width}).extent)}return d},_enableDrawConnectors:function(){var d=B.connect,h=this._map;h&&(this._onPanHandler_connect=d(h,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=d(h,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===h.navigationMode?this._onScaleHandler_connect=d(h,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=
d(h,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var d=B.disconnect;d(this._onPanHandler_connect);d(this._onExtentChangeHandler_connect);d(this._onZoomHandler_connect);d(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var d=this._map;this.timeInfo&&this.useMapTime&&d&&!this.suspended?(this._timeConnect||(this._timeConnect=B.connect(d,"onTimeExtentChange",
this,this._onTimeExtentChangeHandler)),this._setTime(d.timeExtent)):(B.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(d){this._params&&(this._params.time=d?d.toJson().join(","):null)},_onPanHandler:function(d,h){this._panDx=h.x;this._panDy=h.y;var t=this._dragOrigin,z=this._map.__visibleDelta,v=this._img;v&&("css-transforms"===this._map.navigationMode?(this._left=z.x+h.x,this._top=z.y+h.y,this._isChildLayer||k.set(this._div,r._css.names.transform,r._css.translate(this._left,
this._top))):k.set(v,{left:t.x+h.x+"px",top:t.y+h.y+"px"}))},_onExtentChangeHandler:function(d,h,t){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var z=this._map,v=this._img,y=v&&v.style,C=this._dragOrigin;!h||t||!v||h.x===this._panDx&&h.y===this._panDy||("css-transforms"===z.navigationMode?(h=z.__visibleDelta,this._left=h.x,this._top=h.y,this._isChildLayer||k.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top))):k.set(v,{left:C.x+h.x+"px",top:C.y+
h.y+"px"}));v?(C.x=parseInt(y.left,10),C.y=parseInt(y.top,10)):C.x=C.y=0;"css-transforms"===z.navigationMode&&t&&v&&(k.set(v,r._css.names.transition,"none"),v._multiply=v._multiply?n.multiply(v._matrix,v._multiply):v._matrix);this._fireUpdateStart();if(t=this._img_loading)if(this._clearEventListeners(t),c.destroy(t),this._img_loading=null,t=this._jsonRequest){try{t.cancel()}catch(G){}this._jsonRequest=null}var F=z.width;t=z.height;h=F;var x=0;10<=this.version&&z.wrapAround180&&(d=d._normalize(!0));
this.extentProcessor&&(x=this.extentProcessor({layer:this,extent:d,width:h}),d=x.extent,h=x.width,x=x.marginLeft||0);if(this.isPNG32)v=this._img_loading=c.create("div"),v.id=z.id+"_"+this.id+"_"+(new Date).getTime(),k.set(v,{position:"absolute",left:"0px",top:"0px",width:h+"px",height:t+"px"}),z=v.appendChild(c.create("div")),k.set(z,{opacity:0,width:h+"px",height:t+"px"}),this.getImageUrl(d,h,t,this._divAlphaImageFunc),v=null;else{var u=this._img_loading=c.create("img"),w=r._css.names,A=m("ie"),
E={position:"absolute",width:h+"px",height:t+"px"};u.setAttribute("decoding","sync");8===A&&(E.opacity=this.opacity);null!=x&&0!==x&&(E.marginLeft=x+"px");"css-transforms"===z.navigationMode?(E[w.transform]=r._css.translate(-this._left,-this._top),u._tdx=-this._left,u._tdy=-this._top,E[w.transition]=w.transformName+" "+e+"ms ease",this.extentProcessor&&(E[w.origin]=F/2-x+"px "+t/2+"px")):(E.left="0px",E.top="0px");u.id=z.id+"_"+this.id+"_"+(new Date).getTime();k.set(u,E);u._onload_connect=B.connect(u,
"onload",this,"_onLoadHandler");u._onerror_connect=B.connect(u,"onerror",this,"_onErrorHandler");u._onabort_connect=B.connect(u,"onabort",this,"_onErrorHandler");this._startRect={left:C.x,top:C.y,width:v?parseInt(y.width,10):h,height:v?parseInt(y.height,10):t,marginLeft:v?parseInt(y.marginLeft||"0",10):x,zoom:y&&y.zoom?parseFloat(y.zoom):1};this.getImageUrl(d,h,t,this._imgSrcFunc);u=null}}},_onTimeExtentChangeHandler:function(d){this.suspended||(this._setTime(d),this.refresh(!0))},getImageUrl:function(d,
h,t,z){},_imgSrcFunc:function(d){this._img_loading.src=d},_divAlphaImageFunc:function(d){k.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+d+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(d){d=d.currentTarget;var h=this._map;this._clearEventListeners(d);!h||h.__panning||h.__zooming?c.destroy(d):(this._img&&this._div.removeChild(this._img),this._img=d,h=d.style,this._startRect={left:0,top:0,
width:parseInt(h.width,10),height:parseInt(h.height,10),marginLeft:parseInt(h.marginLeft||"0",10),zoom:1},this._div.appendChild(d),this.suspended||l.show(this._div),this._img_loading=null,d=this._dragOrigin,d.x=d.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(d){d=d.currentTarget;k.set(d,"visibility","hidden");this._clearEventListeners(d);d=Error("Unable to load image: "+d.src);this.onError(d);this._fireUpdateEnd(d)},_clearEventListeners:function(d){B.disconnect(d._onload_connect);
B.disconnect(d._onerror_connect);B.disconnect(d._onabort_connect);d._onload_connect=d._onerror_connect=d._onabort_connect=null},setUseMapTime:function(d,h){this.useMapTime=d;this._toggleTime();h||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(d,h){var t={},z=r._css.names,v=this._img;if(v){k.set(v,z.transition,h?"none":z.transformName+" "+e+"ms ease");v._matrix=d;d=v._multiply?n.multiply(d,v._multiply):d;if(v._tdx||v._tdy)d=n.multiply(d,
{xx:1,xy:0,yx:0,yy:1,dx:v._tdx,dy:v._tdy});t[z.transform]=r._css.matrix(d);k.set(v,t)}},_onZoomHandler:function(d,h,t){d=this._startRect;var z=d.width*h,v=d.height*h,y=d.marginLeft*h,C=this._img,F=m("ie");C&&(F&&8>F?k.set(C,{left:d.left-(z-d.width)*(t.x-d.left)/d.width+"px",top:d.top-(v-d.height)*(t.y-d.top)/d.height+"px",zoom:h*d.zoom}):k.set(C,{left:d.left-(z-d.width)*(t.x-d.left)/d.width+"px",top:d.top-(v-d.height)*(t.y-d.top)/d.height+"px",width:z+"px",height:v+"px"}),null!=y&&0!==y&&k.set(C,
{marginLeft:y+"px"}))},_exportMapImage:function(d,h,t){var z=this._exportMapImageHandler;h.token=this._getToken();q({url:d,content:h,callbackParamName:"callback",load:function(v,y){z(v,y,t)},error:f.defaults.io.errorHandler})},_exportMapImageHandler:function(d,h,t){d=new g(d);this.onMapImageExport(d);t&&t(d)},onMapImageExport:function(){},setOpacity:function(d){if(this.opacity!=d)this.onOpacityChange(this.opacity=d)},onOpacityChange:function(){},_opacityChangeHandler:function(d){var h=8===m("ie")?
this._img:this._div;k.set(h,"opacity",d)}});a.setObject("layers.DynamicMapServiceLayer",D,r);return D})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){var h=D([f],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],
"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(t,z){this._attrs={};t&&c.isString(t)?this._url=g.urlToObject(this.url=g.normalize(t)):(this.url=this._url=null,(z=z||t)&&(z.layerDefinition||z.query)&&(z=null));this.spatialReference=new e(4326);this.initialExtent=new d(-180,-90,180,90,new e(4326));this._map=this._div=null;this.normalization=!0;z&&(z.id&&(this.id=z.id),this.arcgisProps=z.arcgisProps,this.parentLayer=z.parentLayer,!1===z.visible&&
(this.visible=!1),q.isDefined(z.opacity)&&(this.opacity=z.opacity),q.isDefined(z.minScale)&&this.setMinScale(z.minScale),q.isDefined(z.maxScale)&&this.setMaxScale(z.maxScale),this.attributionDataUrl=z.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,q.isDefined(z.showAttribution)&&(this.showAttribution=z.showAttribution),this.className=z.className,this.refreshInterval=z.refreshInterval||0);this._errorHandler=c.hitch(this,this._errorHandler);this._scheduledRefresh=c.hitch(this,
this._scheduledRefresh);this.refresh=c.hitch(this,this.refresh);if(this.managedSuspension){var v=this._setMap;this._setMap=function(y){var C=v.apply(this,arguments);this._fireAttach(y);this.evaluateSuspension();if(this.suspended&&!y.loaded)var F=a.connect(y,"onLoad",this,function(){a.disconnect(F);F=null;this.evaluateSuspension()});return C}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",
hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(t){this.loaded||(this.loadError=t);this.onError(t)},_setMap:function(t,z,v,y){this._map=t;this._lyrZEHandle=a.connect(t,"onZoomEnd",this,this._processMapScale);if(t.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var C=a.connect(t,"onLoad",this,function(){a.disconnect(C);C=null;this._processMapScale()})},_unsetMap:function(t,z){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0;this._fireDetach(t)},_fireAttach:function(t){this.attached=!0;this.onAttach({map:t})},_fireDetach:function(t){this.attached=!1;this.onDetach({map:t})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(t,z){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(t,z),this._map&&
this._map._decr())},_getToken:function(){var t=this._url,z=this.credential;return t&&t.query&&t.query.token||z&&z.token||void 0},_findCredential:function(){this.credential=m.id&&this._url&&m.id.findCredential(this._url.path)},_useSSL:function(){var t=this._url,z=/^http:/i;this.url&&(this.url=this.url.replace(z,"https:"));t&&t.path&&(t.path=t.path.replace(z,"https:"))},refresh:function(t){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(t){this.setScaleRange(t)},
setMaxScale:function(t){this.setScaleRange(null,t)},setScaleRange:function(t,z){var v=q.isDefined(t),y=q.isDefined(z);this.loaded||(this._hasMin=this._hasMin||v,this._hasMax=this._hasMax||y);var C=this.minScale,F=this.maxScale;this.minScale=(v?t:this.minScale)||0;this.maxScale=(y?z:this.maxScale)||0;if(C!==this.minScale||F!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var t=void 0===this._resumedOnce,z=this.className,v=this._attrs,y=this.getNode(),
C;if(t){this._resumedOnce=!0;if(z&&y){var F=y.getAttribute("class")||"";(new RegExp("(^|\\s)"+z+"(\\s|$)","i")).test(F)||y.setAttribute("class",F+((F?" ":"")+z))}if(v&&y)for(C in v)v.hasOwnProperty(C)&&y.setAttribute(C,v[C])}this._refreshRT();this.onResume({firstOccurrence:t});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var t=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();t!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(t){return t?h.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(t,z){if(!(t||this._map&&this._map.loaded))return!1;var v=this._map;t=t||v.getScale();var y=this.minScale,C=this.maxScale,F=!y,x=!C,u;z&&(u=v.width>v.height?v.width:v.height);F||(t<=y?F=!0:z&&(F=Math.abs(y-t)/y<1/u));x||(t>=C?x=!0:z&&(x=Math.abs(C-t)/C<1/u));return F&&x},getAttributionData:function(){var t=this.attributionDataUrl,z=new k(b._dfdCanceller);this.hasAttributionData&&
t?(z._pendingDfd=l({url:t,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),z._pendingDfd.then(function(v){z.callback(v)},function(v){z.errback(v)})):(t=Error("Layer does not have attribution data"),t.log=!!B.isDebug,z.errback(t));return z},getResourceInfo:function(){var t=this.resourceInfo;return c.isString(t)?n.fromJson(t):c.clone(t)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(t,z){var v=this.getNode();if("data-reference"===t&&11>r("ie"))return this;
v&&(null==z?v.removeAttribute(t):v.setAttribute(t,z));this._attrs&&(null==z?delete this._attrs[t]:this._attrs[t]=z);return this},setRefreshInterval:function(t){var z=this.refreshInterval;this.refreshInterval=t;this._toggleRT(!1);t&&this._toggleRT(!0);if(z!==t)this.onRefreshIntervalChange();return this},_toggleRT:function(t){t&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(t){var z=this._refreshTS;z&&(t=this._reCheckTS.test(t)?t.replace(this._reReplaceTS,"$$$1"+z):t+((-1===t.indexOf("?")?"?":"\x26")+"_ts\x3d"+z));return t},setNormalization:function(t){this.normalization=
t},setVisibility:function(t){this.visible!==t&&(this.visible=t,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",t?null:"")},onLoad:function(){},onAttach:function(t){},onDetach:function(t){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});c.setObject("layers.Layer",h,m);return h})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(D,B,a,c,k,n,r){D=D(null,{declaredClass:"esri.layers.MapImage",constructor:function(f){B.mixin(this,f);this.extent=new r(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=
!0;var f=this._node,m=this._layer,q;if(f){if(q=m&&m._div)m.suspended||m._setPos(f,q._left,q._top),(m._active||q).appendChild(f);n.show(f)}}},hide:function(){if(this.visible){this.visible=!1;var f=this._node;f&&(n.hide(f),f.parentNode&&f.parentNode.removeChild(f))}},setOpacity:function(f){var m=this._node;this.opacity=f;m&&a.set(m,"opacity",f)}});B.setObject("layers.MapImage",D,k);return D})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),
function(D,B,a,c,k,n,r,f,m,q){D=D(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(l,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var g=this._params={},e=this._url.query?this._url.query.token:null;e&&(g.token=e)},setInfoTemplates:function(l){this.infoTemplates=l},_load:function(){r({url:this._url.path,content:B.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,
initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(l,b){try{this._findCredential();(this.credential&&this.credential.ssl||l&&l._ssl)&&this._useSSL();this.description=l.description;this.copyright=l.copyrightText;this.spatialReference=l.spatialReference&&new f(l.spatialReference);this.initialExtent=l.initialExtent&&new m(l.initialExtent);this.fullExtent=l.fullExtent&&new m(l.fullExtent);this.units=l.units;this.maxRecordCount=l.maxRecordCount;this.maxImageHeight=l.maxImageHeight;
this.maxImageWidth=l.maxImageWidth;this.supportsDynamicLayers=l.supportsDynamicLayers;var g=this.layerInfos=[],e=l.layers,d=this._defaultVisibleLayers=[];a.forEach(e,function(h,t){g[t]=new q(h);h.defaultVisibility&&d.push(h.id)});this.visibleLayers||(this.visibleLayers=d);this.version=l.currentVersion;this.cimVersion=l.cimVersion;this.version||(this.version="capabilities"in l||"tables"in l?10:"supportedImageFormatTypes"in l?9.31:9.3);this.capabilities=l.capabilities;n.isDefined(l.minScale)&&!this._hasMin&&
this.setMinScale(l.minScale);n.isDefined(l.maxScale)&&!this._hasMax&&this.setMaxScale(l.maxScale)}catch(h){this._errorHandler(h)}}});B.setObject("layers.ArcGISMapServiceLayer",D,k);return D})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(n){B.mixin(this,n)},toJson:function(){return k.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});B.setObject("layers.LayerInfo",D,c);return D})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(D,B,a,c,k,n,r){D=D(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(f){null!==f&&(B.mixin(this,f),f.exportOptions&&(this.exportOptions=new r(f.exportOptions)),
this.timeExtent=null,f.timeExtent&&2===f.timeExtent.length&&(this.timeExtent=new k(f.timeExtent)),this.timeReference=new n(f.timeReference))}});B.mixin(D,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",
UNIT_YEARS:"esriTimeUnitsYears"});B.setObject("layers.TimeInfo",D,c);return D})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(D,B,a,c){var k=D(null,{declaredClass:"esri.TimeExtent",constructor:function(n){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(n)if(B.isArray(n)){var r=n[0],f=n[1];this.startTime=null===r||"null"===r?null:new Date(r);this.endTime=null===f||"null"===f?null:new Date(f)}else n instanceof Date&&
this._create(n,null)},offset:function(n,r){var f=new k,m=this.startTime,q=this.endTime;m&&(f.startTime=this._getOffsettedDate(m,n,r));q&&(f.endTime=this._getOffsettedDate(q,n,r));return f},intersection:function(n){return this._intersection(this,n)},toJson:function(){var n=[],r=this.startTime;n.push(r?r.getTime():"null");r=this.endTime;n.push(r?r.getTime():"null");return n},_create:function(n,r){this.startTime=n?new Date(n.getTime()):null;this.endTime=r?new Date(r.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(n,r){if(n&&r){var f=n.startTime,m=n.endTime,q=r.startTime,l=r.endTime;f=f?f.getTime():-Infinity;q=q?q.getTime():-Infinity;m=m?m.getTime():Infinity;l=l?l.getTime():Infinity;var b,g;q>=f&&q<=m?b=q:f>=q&&f<=l&&(b=f);m>=q&&m<=
l?g=m:l>=f&&l<=m&&(g=l);if(isNaN(b)||isNaN(g))return null;f=new k;f.startTime=-Infinity===b?null:new Date(b);f.endTime=Infinity===g?null:new Date(g);return f}return null},_getOffsettedDate:function(n,r,f){var m=this._refData;n=new Date(n.getTime());r&&f&&(m=m[f],n[m.setter](n[m.getter]()+r*m.multiplier));return n}});return c.TimeExtent=k})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.TimeReference",
constructor:function(k){k&&B.mixin(this,k)}});B.setObject("layers.TimeReference",D,c);return D})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(n){n&&B.mixin(this,n)},toJson:function(){return k.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});
B.setObject("layers.LayerTimeOptions",D,c);return D})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(D,B,a,c,k,n,r,f){B=B(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,
layerTimeOptions:null,toJson:function(m){this.bbox&&D.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var q=this.bbox||this.extent;q=q&&m&&q._normalize(!0);m=this.layerOption;var l=q?q.spatialReference.wkid||c.toJson(q.spatialReference.toJson()):null,b=this.imageSpatialReference;q={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:q?q.xmin+","+q.ymin+","+q.xmax+","+q.ymax:
null,bboxSR:l,layers:m?m+":"+this.layerIds.join(","):null,imageSR:b?b.wkid||c.toJson(b.toJson()):l};q.layerDefs=f._serializeLayerDefinitions(this.layerDefinitions);m=this.timeExtent;q.time=m?m.toJson().join(","):null;q.layerTimeOptions=f._serializeTimeOptions(this.layerTimeOptions);return r.filter(q,function(g){if(null!==g)return!0})}});a.mixin(B,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});a.setObject("layers.ImageParameters",
B,n);return B})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(D,B,a,c,k,n,r,f){D=D(n,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(m){m&&(m.source?m="mapLayer"===m.source.type?new r(m.source):new f(m.source):(m=new r,m.mapLayerId=this.id),this.source=m)},toJson:function(){var m=this.inherited(arguments);
m.source=this.source&&this.source.toJson();return k.fixJson(m)}});B.setObject("layers.DynamicLayerInfo",D,c);return D})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return k.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});B.setObject("layers.LayerMapSource",D,c);return D})},
"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(k){k&&B.mixin(this,k)},toJson:function(){}});B.setObject("layers.LayerSource",D,c);return D})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(D,B,a,c,k,n,r,f,m,q){D=D(n,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(l){if(l&&l.dataSource){switch(l.dataSource.type){case "table":l=new r(l.dataSource);break;case "queryTable":l=new f(l.dataSource);break;case "joinTable":l=new m(l.dataSource);break;case "raster":l=new q(l.dataSource);break;default:l=l.dataSource}this.dataSource=l}},toJson:function(){var l={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return k.fixJson(l)}});
B.setObject("layers.LayerDataSource",D,c);return D})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return k.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});B.setObject("layers.TableDataSource",D,c);return D})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.DataSource",constructor:function(k){k&&B.mixin(this,k)},toJson:function(){}});B.setObject("layers.DataSource",D,c);return D})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(D,B,a,c,k,n,r){D=D(n,{declaredClass:"esri.layers.QueryDataSource",constructor:function(f){f&&(f.oidFields&&B.isString(f.oidFields)&&
(this.oidFields=f.oidFields.split(",")),f.spatialReference&&(this.spatialReference=new r(f.spatialReference)))},toJson:function(){var f={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var m="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;f.geometryType=m}return k.fixJson(f)}});B.setObject("layers.QueryDataSource",D,c);return D})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(D,B,a,c,k,n,r,f,m,q){var l=D(n,{declaredClass:"esri.layers.JoinDataSource",constructor:function(b){b&&
(b.leftTableSource&&(this.leftTableSource=this._createLayerSource(b.leftTableSource)),b.rightTableSource&&(this.rightTableSource=this._createLayerSource(b.rightTableSource)))},_createLayerSource:function(b){if("mapLayer"===b.type)var g=new r(b);else{g={type:"dataLayer"};switch(b.dataSource.type){case "table":var e=new f(b.dataSource);break;case "queryTable":e=new m(b.dataSource);break;case "joinTable":e=new l(b.dataSource);break;case "raster":e=new q(b.dataSource);break;default:e=b.dataSource}g.dataSource=
e;g.toJson=function(){var d={type:"dataLayer",dataSource:e.toJson()};return k.fixJson(d)}}return g},toJson:function(){var b={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var g="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
b.joinType=g;return k.fixJson(b)}});B.setObject("layers.JoinDataSource",l,c);return l})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return k.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});B.setObject("layers.RasterDataSource",D,c);return D})},"arcgisonline/pages/utils/date":function(){define(["require",
"exports","tslib"],function(D,B,a){function c(h){h=h||d;var t=document.documentElement.lang;t=g[t]||t;e.has(h)||e.set(h,new Intl.DateTimeFormat(t,h));return e.get(h)}function k(h){return b[h]||null}function n(h,t){var z=k(t)||d;return c(z).format(h)}Object.defineProperty(B,"__esModule",{value:!0});B.format=B.convertDateFormatToIntlOptions=B.getDateTimeFormatter=B.dateFormats=B.dictionary=void 0;D={year:"numeric",month:"numeric",day:"numeric"};var r={year:"numeric",month:"long",day:"numeric"},f={year:"numeric",
month:"short",day:"numeric"},m={year:"numeric",month:"long",weekday:"long",day:"numeric"},q={hour:"numeric",minute:"numeric"},l=a.__assign(a.__assign({},q),{second:"numeric"}),b={"short-date":D,"short-date-numeric":{year:"numeric",month:"2-digit",day:"2-digit"},"short-date-no-year":{month:"numeric",day:"numeric"},"short-date-short-time":a.__assign(a.__assign({},D),q),"short-date-short-time-24":a.__assign(a.__assign(a.__assign({},D),q),{hour12:!1}),"short-date-long-time":a.__assign(a.__assign({},D),
l),"short-date-long-time-24":a.__assign(a.__assign(a.__assign({},D),l),{hour12:!1}),"short-date-le":D,"short-date-le-short-time":a.__assign(a.__assign({},D),q),"short-date-le-short-time-24":a.__assign(a.__assign(a.__assign({},D),q),{hour12:!1}),"short-date-le-long-time":a.__assign(a.__assign({},D),l),"short-date-le-long-time-24":a.__assign(a.__assign(a.__assign({},D),l),{hour12:!1}),"long-month-day-year":r,"long-month-day-year-short-time":a.__assign(a.__assign({},r),q),"long-month-day-year-short-time-24":a.__assign(a.__assign(a.__assign({},
r),q),{hour12:!1}),"long-month-day-year-long-time":a.__assign(a.__assign({},r),l),"long-month-day-year-long-time-24":a.__assign(a.__assign(a.__assign({},r),l),{hour12:!1}),"day-short-month-year":f,"day-short-month-year-short-time":a.__assign(a.__assign({},f),q),"day-short-month-year-short-time-24":a.__assign(a.__assign(a.__assign({},f),q),{hour12:!1}),"day-short-month-year-long-time":a.__assign(a.__assign({},f),l),"day-short-month-year-long-time-24":a.__assign(a.__assign(a.__assign({},f),l),{hour12:!1}),
"long-date":m,"long-date-short-time":a.__assign(a.__assign({},m),q),"long-date-short-time-24":a.__assign(a.__assign(a.__assign({},m),q),{hour12:!1}),"long-date-long-time":a.__assign(a.__assign({},m),l),"long-date-long-time-24":a.__assign(a.__assign(a.__assign({},m),l),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},weekday:{weekday:"long"},year:{year:"numeric"},"short-time":q,"long-time":l};B.dictionary=new Map;[["shortDate","short-date"],
["shortDateNumeric","short-date-numeric"],["shortDateNoYear","short-date-no-year"],["shortDateShortTime","short-date-short-time"],["shortDateShortTime24","short-date-short-time-24"],["shortDateLongTime","short-date-long-time"],["shortDateLongTime24","short-date-long-time-24"],["shortDateLE","short-date-le"],["shortDateLEShortTime","short-date-le-short-time"],["shortDateLEShortTime24","short-date-le-short-time-24"],["shortDateLELongTime","short-date-le-long-time"],["shortDateLELongTime24","short-date-le-long-time-24"],
["longMonthDayYear","long-month-day-year"],["longMonthDayYearShortTime","long-month-day-year-short-time"],["longMonthDayYearShortTime24","long-month-day-year-short-time-24"],["longMonthDayYearLongTime","long-month-day-year-long-time"],["longMonthDayYearLongTime24","long-month-day-year-long-time-24"],["dayShortMonthYear","day-short-month-year"],["dayShortMonthYearShortTime","day-short-month-year-short-time"],["dayShortMonthYearShortTime24","day-short-month-year-short-time-24"],["dayShortMonthYearLongTime",
"day-short-month-year-long-time"],["dayShortMonthYearLongTime24","day-short-month-year-long-time-24"],["longDate","long-date"],["longDateShortTime","long-date-short-time"],["longDateShortTime24","long-date-short-time-24"],["longDateLongTime","long-date-long-time"],["longDateLongTime24","long-date-long-time-24"],["longMonthYear","long-month-year"],["shortMonthYear","short-month-year"],["weekday","weekday"],["year","year"]].forEach(function(h){B.dictionary.set(h[0],h[1])});B.dateFormats=B.dictionary.values;
var g={ar:"ar-u-nu-latn-ca-gregory",sr:"sr-Latn"},e=new WeakMap,d=b["short-date-short-time"];B.getDateTimeFormatter=c;B.convertDateFormatToIntlOptions=k;B.format=n;B["default"]={format:n,getDateTimeFormatter:c,convertDateFormatToIntlOptions:k,dictionary:B.dictionary,dateFormats:B.dateFormats}})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],function(D,B,a,c){function k(m){var q,l,b=m.paths,g=m.size,e=m.direction,d=m.rtl,h=m.title,t=m.titleId;
m=m.inline?"icon-inline--on-"+(null!==e&&void 0!==e?e:"left"):"";e=null!==(l=null===(q=c["default"].locale)||void 0===q?void 0:q.split("-")[0])&&void 0!==l?l:"en";q="icon-inline "+m+" "+(!0===d||d===e?"icon-inline--flip-rtl":"");b=Array.isArray(b)?n(b):'\x3cpath d\x3d"'+b+'"/\x3e';l=h&&t;return'\x3csvg viewBox\x3d"0 0 '+g+" "+g+'" width\x3d"'+g+'" height\x3d"'+g+'" class\x3d"'+q+'" '+(l?'aria-labelledby\x3d"'+t+'"':'role\x3d"none" focusable\x3d"false" aria-hidden\x3d"true"')+"\x3e\n    "+(l?'\x3ctitle id\x3d"'+
t+'" \x3e'+h+"\x3c/title\x3e":"")+"\n    "+b+"\n  \x3c/svg\x3e"}function n(m){return m.reduce(function(q,l){return q+" \x3cpath "+(l.opacity?'opacity\x3d"'+l.opacity+'" ':"")+' d\x3d"'+l.d+'" /\x3e'},"")}c=a.__importDefault(c);var r={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{16:"M6 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 5H2V2h4zm4 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4V2h4zm-4 9h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4v-4h4zM6 9H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm0 5H2v-4h4z",24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},"caret-down":{16:"M13.1 6L8 11.1 2.9 6z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",24:"M12 7h1v7h-1zm1.5 9.5a1 1 0 1 0-1 1 1.002 1.002 0 0 0 1-1zm9.3-4A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},
"exclamation-mark-circle-f":{24:"M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
24:"M1.225 21.225A1.678 1.678 0 0 0 2.707 22H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656L13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656zm.859-1.143l9.82-17.773A.71.71 0 0 1 12.508 2a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632zM13 15h-1V8h1zm-1.5 2.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1z",32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},
"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},
file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},group:{16:"M7.5 5h2a1.497 1.497 0 0 1 1.486 1.359 3.452 3.452 0 0 1 .969-.304 2.498 2.498 0 0 0-1.6-1.895 2.5 2.5 0 1 0-3.71 0 2.498 2.498 0 0 0-1.6 1.895 3.452 3.452 0 0 1 .97.304A1.497 1.497 0 0 1 7.5 5zm1-4A1.5 1.5 0 1 1 7 2.5 1.502 1.502 0 0 1 8.5 1zm5.855 10.16a2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 9 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34zM12.5 8A1.5 1.5 0 1 1 11 9.5 1.502 1.502 0 0 1 12.5 8zm2.5 7h-5v-1.5a1.517 1.517 0 0 1 1.5-1.5h2a1.517 1.517 0 0 1 1.5 1.5zM1 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34 2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 1 13.5zM7 15H2v-1.5A1.517 1.517 0 0 1 3.5 12h2A1.517 1.517 0 0 1 7 13.5zM4.5 8A1.5 1.5 0 1 1 3 9.5 1.502 1.502 0 0 1 4.5 8z",
32:"M16 9a4 4 0 1 0-4-4 4.005 4.005 0 0 0 4 4zm0-7a3 3 0 1 1-3 3 3.003 3.003 0 0 1 3-3zm3.101 16a4.944 4.944 0 0 0 .323 1h-6.848a4.944 4.944 0 0 0 .323-1zm-8.588-5.297a4.945 4.945 0 0 0-.908-.415A4.485 4.485 0 0 1 13.5 10h5a4.485 4.485 0 0 1 3.895 2.288 4.945 4.945 0 0 0-.908.415A3.49 3.49 0 0 0 18.5 11h-5a3.49 3.49 0 0 0-2.987 1.703zM12 17a4 4 0 1 0-4 4 4.005 4.005 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm-7 6.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5h-5A4.505 4.505 0 0 0 1 26.5zm9.5-3.5a3.504 3.504 0 0 1 3.5 3.5V30H2v-3.5A3.504 3.504 0 0 1 5.5 23zM24 13a4 4 0 1 0 4 4 4.005 4.005 0 0 0-4-4zm0 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm2.5 2h-5a4.505 4.505 0 0 0-4.5 4.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5zm3.5 8H18v-3.5a3.504 3.504 0 0 1 3.5-3.5h5a3.504 3.504 0 0 1 3.5 3.5z"},
home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},
imagePlus:{16:"M7 14v1H0V1h16v9h-1V2H1v8.2l1.4-1.4a.377.377 0 0 1 .533 0 .377.377 0 0 0 .534 0l2.69-2.69a.377.377 0 0 1 .508-.023L9.37 8.343a.377.377 0 0 0 .468.012L10 8.234v1.133a1.326 1.326 0 0 1-1.269-.256L6.461 7.22 4.173 9.509a1.37 1.37 0 0 1-.973.402 1.387 1.387 0 0 1-.429-.068L1 11.614V14zm4.5-9.5a1 1 0 1 0-1 1 1 1 0 0 0 1-1zM13 16v-3h3v-1h-3V9h-1v3H9v1h3v3z"},info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",
24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},
key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",
24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z",24:"M22 4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1h-2zm-8 18v-5h-4v5H3V5h3V3h5v2h10v17zM5 11h4V7H5zm1-3h2v2H6zm4 3h4V7h-4zm1-3h2v2h-2zm4 3h4V7h-4zm1-3h2v2h-2zM5 16h4v-4H5zm1-3h2v2H6zm4 3h4v-4h-4zm1-3h2v2h-2zm4 3h4v-4h-4zm1-3h2v2h-2z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},
pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},
plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",
24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",
24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
"question-f":{24:"M12.5 19.5a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-17.3a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zm2.144 9.9l-.113.11a3.321 3.321 0 0 0-1.33 2.79v.2H11.8V15a4.735 4.735 0 0 1 1.77-3.807l.092-.09c.664-.652 1.144-1.122 1.138-1.906A1.998 1.998 0 0 0 12.607 7.2a2.228 2.228 0 0 0-2.424 2.19v.2h-1.4v-.2a3.382 3.382 0 0 1 1.237-2.711 4.082 4.082 0 0 1 2.587-.88A3.36 3.36 0 0 1 16.2 9.194a3.937 3.937 0 0 1-1.556 2.908z",32:"M16.5 25.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zm0-22.3a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm2.77 13.388c-.137.155-.273.3-.406.443A4.936 4.936 0 0 0 17.2 21v.2h-1.4V21a6.202 6.202 0 0 1 2.039-4.92c.128-.138.256-.276.383-.42.922-1.038 1.588-1.787 1.578-3.13 0-2.3-1.824-3.33-3.632-3.33-1.911 0-3.968 1.132-3.968 3.617v.2h-1.4v-.2a4.715 4.715 0 0 1 1.721-3.782A5.741 5.741 0 0 1 16.168 7.8c2.424 0 5.032 1.478 5.032 4.725a5.76 5.76 0 0 1-1.93 4.063z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",
32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},users:{16:"M6.5 7a3.49 3.49 0 0 1 .663.067A3.97 3.97 0 0 0 7.8 8.375 2.475 2.475 0 0 0 6.5 8h-3A2.503 2.503 0 0 0 1 10.5V12h4.068a4.642 4.642 0 0 0-.218 1H0v-2.5A3.504 3.504 0 0 1 3.5 7zm1.456-3.564a3.969 3.969 0 0 0-.857 1.702A2.996 2.996 0 1 1 8 3a2.964 2.964 0 0 1-.044.436zM7 3a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2zm5.5 7a3.504 3.504 0 0 1 3.5 3.5V16H6v-2.5A3.504 3.504 0 0 1 9.5 10zm-3 1A2.503 2.503 0 0 0 7 13.5V15h8v-1.5a2.503 2.503 0 0 0-2.5-2.5zM8 6a3 3 0 1 1 3 3 3.003 3.003 0 0 1-3-3zm1 0a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2z",
24:"M7.5 9A3.5 3.5 0 1 0 4 5.5 3.504 3.504 0 0 0 7.5 9zm0-6A2.5 2.5 0 1 1 5 5.5 2.503 2.503 0 0 1 7.5 3zm2.713 14a5.456 5.456 0 0 0-.188 1H2v-3.5A4.505 4.505 0 0 1 6.5 10h2a4.503 4.503 0 0 1 4.414 3.649 5.518 5.518 0 0 0-.936.632A3.495 3.495 0 0 0 8.5 11h-2A3.504 3.504 0 0 0 3 14.5V17zm6.287-4A3.5 3.5 0 1 0 13 9.5a3.504 3.504 0 0 0 3.5 3.5zm0-6A2.5 2.5 0 1 1 14 9.5 2.503 2.503 0 0 1 16.5 7zM22 18.5a4.505 4.505 0 0 0-4.5-4.5h-2a4.505 4.505 0 0 0-4.5 4.5V22h11zM21 21h-9v-2.5a3.504 3.504 0 0 1 3.5-3.5h2a3.504 3.504 0 0 1 3.5 3.5z",
32:"M10.5 11A4.5 4.5 0 1 0 6 6.5a4.505 4.505 0 0 0 4.5 4.5zm0-8A3.5 3.5 0 1 1 7 6.5 3.504 3.504 0 0 1 10.5 3zm1.166 19a6.98 6.98 0 0 0-.14 1H2v-5.5A5.506 5.506 0 0 1 7.5 12h6a5.464 5.464 0 0 1 2.65.683 5.985 5.985 0 0 0-.138 1.085A4.474 4.474 0 0 0 13.5 13h-6A4.505 4.505 0 0 0 3 17.5V22zm9.834-4a4.5 4.5 0 1 0-4.5-4.5 4.505 4.505 0 0 0 4.5 4.5zm0-8a3.5 3.5 0 1 1-3.5 3.5 3.504 3.504 0 0 1 3.5-3.5zm3 9h-6a5.506 5.506 0 0 0-5.5 5.5V30h17v-5.5a5.506 5.506 0 0 0-5.5-5.5zM29 29H14v-4.5a4.505 4.505 0 0 1 4.5-4.5h6a4.505 4.505 0 0 1 4.5 4.5z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},f={inline:{},"inline-end":{},getIconWithTitle:function(m,q,l,b){m=r[m];return k({paths:m[q],size:q,rtl:m.rtl,title:l,titleId:b})}};Object.keys(r).forEach(function(m){Object.keys(r[m]).filter(function(q){return"rtl"!==q}).forEach(function(q){var l,b,g,e=r[m],d=e.rtl;f[m]=null!==(l=f[m])&&void 0!==l?l:{};f.inline[m]=
null!==(b=f.inline[m])&&void 0!==b?b:{};f["inline-end"][m]=null!==(g=f["inline-end"][m])&&void 0!==g?g:{};f[m][q]=k({paths:e[q],size:q,rtl:d});f.inline[m][q]=k({paths:e[q],size:q,inline:!0,rtl:d});f["inline-end"][m][q]=k({paths:e[q],size:q,inline:!0,direction:"right",rtl:d})})});return f})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),function(D,B,a,c,k,n,r){c=a.__importDefault(c);k=a.__importDefault(k);
n=a.__importDefault(n);r=a.__importDefault(r);return function(){function f(){this.declaredClass="arcgisonline.sharing.geow.Roles"}f.exceedsRolePrivileges=function(m,q,l){q=q||[];var b;l&&(m=a.__spreadArray(a.__spreadArray([],m),f.extraLevelOnePrivileges));for(b=0;b<q.length;b++)if(l=q[b],-1===m.indexOf(l))return!0;return!1};f.prototype.createRole=function(m,q){return k["default"].request({url:c["default"].restBaseUrl+"portals/self/createRole",content:{name:m,description:q}},{usePost:!0})};f.prototype.updateRole=
function(m,q,l){return k["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+m+"/update",content:{name:q,description:l}},{usePost:!0})};f.prototype.deleteRole=function(m){return k["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+m+"/delete"},{usePost:!0})};f.prototype.setPrivileges=function(m,q){var l=c["default"].restBaseUrl+"portals/self/roles/"+m+"/setPrivileges",b={id:m,privileges:JSON.stringify({privileges:q})};return k["default"].request({url:l,content:b},
{usePost:!0})};f.prototype.getPrivileges=function(m){return k["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+m+"/privileges"})};f.prototype.getAllUsersForRole=function(m){var q=this,l=new n["default"],b=[],g=[],e=1,d,h,t;q.getUsersForRole(1,100,m).then(function(z){if(z&&z.users){g=g.concat(z.users);e=z.nextStart;d=z.total-g.length;h=Math.ceil(d/100);for(t=0;t<h;t++)b.push(q.getUsersForRole(e+100*t,100,m));r["default"](b).then(function(v){v.forEach(function(y){g=g.concat(y.users)});
l.resolve(g)},function(){l.resolve(g)})}},function(){l.resolve(g)});return l};f.prototype.getUsersForRole=function(m,q,l){return k["default"].request({url:c["default"].restBaseUrl+"portals/self/users",content:{start:m,num:q,role:l}})};f.prototype.getAllRoles=function(m){var q=this,l=new n["default"],b=[],g=1,e=[],d,h,t;q.getRoles(g,100,m).then(function(z){if(z&&z.roles){e=e.concat(z.roles);g=z.nextStart;d=z.total-e.length;h=Math.ceil(d/100);for(t=0;t<h;t++)b.push(q.getRoles(g+100*t,100,m));r["default"](b).then(function(v){v.forEach(function(y){e=
e.concat(y.roles)});l.resolve(e)},function(){l.resolve(e)})}},function(){l.resolve(e)});return l};f.prototype.getRoles=function(m,q,l){var b=c["default"].restBaseUrl+"portals/self/roles";m={start:m,num:q,returnPrivileges:null};l&&(m.returnPrivileges=l);return k["default"].request({url:b,content:m})};f.prototype.getRole=function(m){return k["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+m})};f.prototype.containsPrivilegesOutsideRole=function(m,q,l){var b=new n["default"];m=
{roleResult:this.getPrivileges(m),compareResult:this.getPrivileges(q)};var g=!1,e,d;r["default"](m).then(function(h){e=h.roleResult&&h.roleResult.privileges||[];d=h.compareResult&&h.compareResult.privileges||[];l&&l instanceof Array?e=e.concat(l):l&&l instanceof String&&e.push(l);g=f.exceedsRolePrivileges(e,d);b.resolve(g)},function(){b.resolve(g)});return b};f.extraLevelOnePrivileges=["portal:user:joinNonOrgGroup","portal:user:viewTracks"];return f}()})},"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays ../../sharing/util dojo/Deferred dojo/_base/kernel esri/lang".split(" "),
function(D,B,a,c,k,n,r,f,m,q){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);return function(){function l(){}l.createFullName=function(b,g){var e=null===b||void 0===b?void 0:b.fullName;g||(g=m["default"].locale);q["default"].isDefined(b.firstName)&&q["default"].isDefined(b.lastName)&&(e="ja"===g?b.lastName+" "+b.firstName:b.firstName+" "+b.lastName);return e};l.splitFullName=function(b){var g=
{first:void 0,last:void 0};b&&(b=b.split(" "),1===b.length?(g.first=b[0],g.last=""):1<b.length&&(g.last=b.splice(b.length-1,1)[0],g.first=b.join(" ")));return g};l.checkUsernames=function(b){var g=new f["default"],e={usernames:[]};k["default"].sendAllResources(c["default"].restBaseUrl+"community/checkUsernames",200,b,function(d){return{usernames:d.join(",")}}).then(function(d){d.forEach(function(h){return e.usernames=e.usernames.concat(h.usernames)});g.resolve(e)},function(d){g.resolve(d)});return g};
l.checkForFavorites=function(b,g,e){var d=new f["default"],h=(null===e||void 0===e?void 0:e.items)||[];b=null===b||void 0===b?void 0:b.favGroupId;var t=h.map(function(z){return z.id});b&&(null===t||void 0===t?0:t.length)?(b='(group:"'+b+'" AND id:('+t.join(" OR ")+"))",g.queryItems({q:b,num:h.length||1},!0).then(function(z){var v=z.results||[];h.forEach(function(y){y.isFavorite=!!n["default"].find(v,function(C){return y.id===C.id})});d.resolve(e)},function(z){d.resolve(e)})):d.resolve(e);return d};
l.createValidOrgUsername=function(b,g,e,d){var h,t=null!==(h=(null===b||void 0===b?void 0:b.length)+(null===g||void 0===g?void 0:g.length))&&void 0!==h?h:0;b=b.substring(0,b.length-(t>d?t%d:0))+g.replace(/-/g,"_");b.length<e&&(g=e-b.length,b&&0<g&&(e=""+(new Date).getTime(),b+=e.substring(e.length-g)));return b};l.stripOrgKeyFromUsername=function(b,g){if(b){var e=b.lastIndexOf(g);if(-1<e&&e<b.length-1&&e===b.length-g.length-1)return b.substring(0,e)}return b};l.cleanUsername=function(b,g){var e=/[^[a-zA-Z0-9@_\.]]*/g,
d=/[^[a-zA-Z0-9@_\.\-]]*/g;return 0<(null===b||void 0===b?void 0:b.length)?g?b.replace(d,"_"):b.replace(e,"_"):b};l.cleanUsernameDomain=function(b,g,e){return b&&(g||e)&&(g=b.indexOf("\\"),-1<g&&g<=b.length-2)?b.substring(g+1)+"@"+b.substring(0,g).toUpperCase():b};l.stripUsernameDomain=function(b,g,e){return b&&!g&&e?b.split("@").shift():b};l.removeSAMLSuffix=function(b,g){var e="_"+g;return b.lastIndexOf(e)===b.length-e.length?b.substring(0,b.lastIndexOf(e)):b};l.addSAMLSuffix=function(b,g){var e=
b&&g,d="_"+g,h=e&&-1===b.indexOf(d);e=e&&b.lastIndexOf(d)===b.length-d.length;return h||e?b+d:b};l.isStoryteller=function(b){var g;return"storytellerut"===(null===(g=b.userLicenseTypeId)||void 0===g?void 0:g.toLowerCase())};l.getUserProperties=function(b){var g=new f["default"];(null===b||void 0===b?0:b.username)?r["default"].request({url:c["default"].restBaseUrl+"community/users/"+b.username+"/properties",content:{f:"json"}}).then(function(e){g.resolve(e.properties)},function(){g.resolve(null)}):
g.resolve(null);return g};return l}()})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ./clone ../../sharing/util dojo/promise/all dojo/Deferred esri/lang".split(" "),function(D,B,a,c,k,n,r,f){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);return function(){function m(){}m.sendAllResources=function(q,l,b,g,e,d){var h=new r["default"];b=c["default"](b);var t=[],z=b.splice(0,l);for(f["default"].isDefined(d)||
(d=!0);0<(null===z||void 0===z?void 0:z.length);)t.push(k["default"].request({url:q,content:g(z)},a.__assign({usePost:d},e))),z=b.splice(0,l);n["default"](t).then(function(v){h.resolve(v)},function(v){h.reject(v)});return h};m.sendAllResourcesWithDelay=function(q,l,b,g,e){function d(){setTimeout(function(){y=z.splice(0,l);0<(null===y||void 0===y?void 0:y.length)&&(k["default"].request({url:q,content:g(y)},{usePost:!0}).then(function(x){C++;v.push(x);C>=t&&h.resolve(v)},function(x){C++;C>=t&&h.reject(x)}),
F++,d())},0===F?0:e)}var h=new r["default"],t=Math.ceil(b.length/l),z=c["default"](b),v=[],y,C=0,F=0;d();return h};m.sendAllResourcesSerially=function(q,l,b,g){function e(){v=t.splice(0,l);0<(null===v||void 0===v?void 0:v.length)&&k["default"].request({url:q,content:g(v)},{usePost:!0}).then(function(C){y++;z.push(C);y>=h?d.resolve(z):e()},function(C){y++;y>=h?d.reject(C):e()})}var d=new r["default"],h=Math.ceil(b.length/l),t=c["default"](b),z=[],v,y=0;e();return d};m.fetchAllResources=function(q,
l,b){void 0===l&&(l={});void 0===b&&(b="results");var g=new r["default"],e=[],d=100,h=[],t=1,z,v,y;l.start=t;!l.num||l.num>d?l.num=d:d=l.num;k["default"].request({url:q,content:l}).then(function(C){if(null===C||void 0===C?0:C[b]){h=h.concat(C[b]);t=C.nextStart;z=C.total-h.length;v=Math.ceil(z/d);for(y=0;y<v;y++)l.start=t+y*d,e.push(k["default"].request({url:q,content:l}));n["default"](e).then(function(F){F.forEach(function(x){h=h.concat(x[b])});g.resolve(h)},function(F){g.reject(F)})}else g.resolve(h)},
function(C){g.reject(C)});return g};return m}()})},"arcgisonline/pages/utils/setItemUrls":function(){define("require exports tslib ../../esriGeowConfig ../../sharing/util ./arrays dojo/_base/lang dojo/query esri/geometry/Extent ./url ./queryHandler".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);l=a.__importStar(l);return function(){function b(){}b.sceneViewer=function(g){var e=
"./webscene/viewer.html?";switch(g.classification){case "layer":e+="layers\x3d"+g.id;break;default:e+="webscene\x3d"+g.id}g.sceneViewerUrl=e};b.mapViewer=function(g){var e=c["default"].baseUrl+"webmap/viewer.html?",d=(c["default"].newMapViewerUrl||"")+"?",h="map"===g.classification,t=g.sourceData||{},z=g.type,v={},y=g.portal;y=!(y&&y.getPortalUser())&&g.isPremiumContent&&!y.isPortal;var C={};g.numViews||n["default"].includes(g.typeKeywords,"Layer Template")||!g.isHostedService||"Feature Service"!==
z&&"Feature Collection"!==z||"Feature Service"===z&&("Feature Service"!==z||"Feature Collection"===t.type||"Service Definition"===t.type||n["default"].includes(g.typeKeywords,"View Service"))||(v=r["default"].mixin(C,{panel:"gallery",suggestField:!0}));!g.numViews&&g.isHostedService&&"Map Service"===z&&g.serviceInfo&&g.adminServiceInfo&&(v=r["default"].mixin(C,this._getLevelCenter(g)));switch(g.classification){case "map":C.webmap=g.id;break;default:C.layers=g.id}g.mapViewerWithReviewUrl=e+l.objectToQuery(r["default"].mixin({},
C,h?{}:{review:!0}));g.mapViewerWithEditUrl=e+l.objectToQuery(r["default"].mixin({},C,h?{}:{isAdmin:!0}));g.mapViewerUrl=e+l.objectToQuery(r["default"].mixin(h?{}:{useExisting:1},C,v));g.mapNewViewerUrl=e+l.objectToQuery(r["default"].mixin({},C,v));g.newMapViewerUrl=c["default"].newMapViewerEnabled?d+l.objectToQuery(r["default"].mixin({},C,v)):"";y&&(g.mapViewerUrl="signin.html?returnUrl\x3d"+encodeURIComponent(g.mapViewerUrl),g.mapNewViewerUrl="signin.html?returnUrl\x3d"+encodeURIComponent(g.mapNewViewerUrl),
g.newMapViewerUrl="signin.html?returnUrl\x3d"+encodeURIComponent(g.newMapViewerUrl));f["default"](".js-open-mapViewer.js-open-btn.js-action-newWebMapViewer").attr("data-href",g.mapViewerUrl);f["default"](".add-to-new-viewer").attr("data-href",g.mapNewViewerUrl)};b.cityEngineViewer=function(g){var e="/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+g.id;g.cityEngineViewerUrl=g.portal.isPortal?".."+e:q.redirectExternalAppURL(g,e,!0)};b.appViewer=function(g){var e,d,h=n["default"].includes(g.typeKeywords,
"Web AppBuilder");g.appViewerUrl=g.url;h&&(h=-1<(null===(e=g.url)||void 0===e?void 0:e.indexOf("/webappviewer3d/")),g.wabEditUrl=null===(d=g.url)||void 0===d?void 0:d.replace(h?"/webappviewer3d/":"/webappviewer/","/webappbuilder/"))};b.fieldMaps=function(g){g.fieldMapsUrl=(g.portal.isPortal?"..":"")+"/apps/fieldmaps/maps/"+g.id};b.instantApps=function(g){g.instantAppsUrl=q.redirectExternalAppURL(g,"../apps/instantgallery/index.html?"+("Web Scene"===g.type?"webscene":"webmap")+"\x3d"+g.id,!0)};b.experienceBuilderBaseUrl=
function(g){return g.isPortal?"../apps/experiencebuilder":c["default"].webExperienceUrl||"https://experience.arcgis.com"};b.experienceBuilderPath=function(g,e){var d,h="Web Scene"===g.type?"webscene":"webmap";return(null===(d=g.portal)||void 0===d?0:d.isPortal)?"builder/?page\x3d"+e+"\x26"+h+"\x3d"+g.id:"builder/page/"+e+"/?"+h+"\x3d"+g.id};b.webExperienceViewer=function(g){var e=g.portal,d=this.experienceBuilderBaseUrl(e),h=g&&"Web Experience Template"===g.type;g.webExperienceUrl=d+(h?"/template/":
"/experience/")+(e.isPortal?"?id\x3d":"")+g.id;g.webExperienceCreateUrl=h?d+"/builder/?template\x3d"+g.id:"";g.canUpdate&&(g.webExperienceEditUrl=d+"/builder/?id\x3d"+g.id)};b.experienceBuilder=function(g){var e=this.experienceBuilderBaseUrl(g.portal);g.experienceBuilderUrl=e+"/"+this.experienceBuilderPath(g,"template")};b.vrExperienceViewer=function(g){g.vrExperienceUrl="/apps/360vr/index.html?id\x3d"+g.id};b.workforceViewer=function(g){var e=g.portal.isPortal,d=(e?"..":"")+"/apps/workforce"+(e?
"/#":"")+"/projects/"+g.id+"/dispatch/assignments";e=e?d:q.redirectExternalAppURL(g,d,!0);g.workforceViewerUrl=e};b.workflowViewer=function(g){var e="/apps/workflowmanager/"+g.id;e=g.portal.isPortal?".."+e:q.redirectExternalAppURL(g,e,!0);g.workflowViewerUrl=e};b.storyMapViewer=function(g){g.storyMapViewerUrl=g.url};b.excaliburViewer=function(g){var e=g.portal.isPortal,d=(e?"..":"")+"/apps/excalibur/app.html#/canvas/project?id\x3d"+g.id;d=e?d:q.redirectExternalAppURL(g,"/apps/excalibur/app.html#/canvas/project?id\x3d"+
g.id,!0);e=(e?"..":"")+"/apps/excalibur/app.html#/projects/"+g.id;g.excaliburViewerUrl=d;g.excaliburProjectUrl=e};b.excaliburMediaViewer=function(g){var e=g.portal.isPortal,d="/apps/excalibur/app.html#/canvas/service/"+g.id;e=e?(e?"..":"")+d:q.redirectExternalAppURL(g,d,!0);g.excaliburMediaUrl=e};b.surveyViewer=function(g){var e=g.portal||{};e=location.protocol+"//"+(e.urlKey?e.urlKey+"."+e.customBaseUrl:e.portalHostname);var d=c["default"].surveyUrl||"https://survey123.arcgis.com";g.surveyViewerUrl=
d+"/share/"+g.id+"?portalUrl\x3d"+e;g.surveyAppUrl=d+"/share/"+g.id+"?portalUrl\x3d"+e+"\x26open\x3dnative";g.surveyEditUrl="arcgis-survey123connect://?itemID\x3d"+g.id+"\x26portalUrl\x3d"+e;g.surveyManageUrl=d+"/surveys/"+g.id+"?portalUrl\x3d"+e};b.geoBIM=function(g){g.geoBIMUrl="../apps/geobim?id\x3d"+g.id;return"../apps/geobim?id\x3d"+g.id};b.insightsViewer=function(g){var e=c["default"].insightsUrl||"https://insights.arcgis.com",d=n["default"].includes(g.types,"is-insightsModel"),h=n["default"].includes(g.types,
"is-insightsTheme");n["default"].includes(g.types,"is-insightsPage")?g.insightsViewerUrl=e+"/#/view/"+g.id:g.insightsViewerUrl=d?e+"/#/?model\x3d"+g.id:h?e+"/index.html#/?theme\x3d"+g.id:e+"/#/"+g.id};b.urbanViewer=function(g){g.urbanViewerUrl=(c["default"].urbanUrl||"https://urban.arcgis.com")+"?id\x3d"+g.id};b.orthoMaker=function(g){var e="/apps/orthomaker/#/projects/"+g.id;g.orthoMakerUrl=g.portal.isPortal?".."+e:q.redirectExternalAppURL(g,e,!0)};b.notebookViewer=function(g){g.notebookViewerUrl=
c["default"].baseUrl+"notebook/notebook.html?id\x3d"+g.id};b.geoAIStudioUrlViewer=function(g){var e="/apps/deeplearningstudio/#/projects/"+g.id;g.geoAIStudioUrl=g.portal.isPortal?".."+e:q.redirectExternalAppURL(g,e,!0)};b.missionViewer=function(g){var e="/apps/mission/app.html#missiondetails/"+g.id;g.missionViewerUrl=g.portal.isPortal?".."+e:q.redirectExternalAppURL(g,e,!0)};b.iotViewer=function(g){g.iotViewerUrl=(c["default"].iotViewerUrl||"https://velocity.arcgis.com")+"/"+(g&&"Big Data Analytic"===
g.type?"bigdata":"realtime")+"/"+g.id};b.iotFeed=function(g){g.iotFeedUrl=(c["default"].iotViewerUrl||"https://velocity.arcgis.com")+"/feeds/"+g.id};b.createPresentation=function(g){g.createPresentationUrl="../apps/presentation/index.html?builder\x3dtrue\x26webmap\x3d"+g.id};b.openPresentation=function(g){var e="/apps/presentation/index.html?webmap\x3d"+g.id;g.openPresentationUrl=g.portal.isPortal?".."+e:q.redirectExternalAppURL(g,e,!0)};b.dashboard=function(g){var e=g.portal.isPortal,d=(e?"..":"")+
"/apps/dashboards/"+g.id,h=d+"#mode\x3dedit";g.dashboardUrl=e?d:q.redirectExternalAppURL(g,d);g.dashboardEditUrl=h};b.createDashboard=function(g){g.createDashboardUrl=(g.portal.isPortal?"..":"")+"/apps/dashboards/new#id\x3d"+g.id};b.hubInitiative=function(g){var e=g.portal,d=g.id,h=e.urlKey;e=(null===e||void 0===e?void 0:e.getEnvironment())||"";g.hubInitiativeUrl="https://"+h+".hub"+e+".arcgis.com/edit/new/browse?name\x3d"+d};b.hubProject=function(g){var e=g.portal,d=g.id,h=e.urlKey;e=(null===e||
void 0===e?void 0:e.getEnvironment())||"";d="https://"+h+".hub"+e+".arcgis.com/projects/"+d;g.hubProjectUrl=d;g.hubProjectEditUrl=d+"/edit"};b.hubEventViewer=function(g){var e=g.portal,d=g.id;e=(null===e||void 0===e?void 0:e.getEnvironment())||"";g.hubEventUrl="https://hub"+e+".arcgis.com/events/"+d+"?open\x3dhome"};b.configureApp=function(g){var e=g.typeKeywords||[],d=[],h="appid\x3d"+g.id,t=g.folderId&&"/"!==g.folderId?"folderid\x3d"+g.folderId:"",z="./webmap/configureApp.html";if(-1<e.indexOf("selfConfigured")||
"Hub Initiative"===g.type){if(z=g.url)d.push("edit\x3dtrue"),-1===z.indexOf("appid\x3d")&&d.push(h),-1===z.indexOf("folderId")&&t&&d.push(t)}else{if("Site Application"===g.type){g.configureUrl="../apps/sites/admin/#/layout/"+g.id;return}if(-1<e.indexOf("configurableApp")){g.configureUrl="../apps/configure-template/index.html?appid\x3d"+g.id;return}t&&d.push(t);d.push(h)}g.configureUrl=z?z+(-1<z.indexOf("?")?"\x26":"?")+d.join("\x26"):""};b.configureStoryMap=function(g){var e=-1<g.typeKeywords.indexOf("storymapcollection")?
"collections":"stories";g.configureStoryMapUrl=c["default"].storymapsUrl+"/"+e+"/"+g.id+"/edit"};b.configureStoryMapTheme=function(g){g.configureStoryMapThemeUrl=c["default"].storymapsUrl+"/themes/"+g.id+"/edit";g.newStoryMapFromThemeUrl=c["default"].storymapsUrl+"/stories/new?theme\x3d"+g.id;g.newStoryMapCollectionFromThemeUrl=c["default"].storymapsUrl+"/collections/new?theme\x3d"+g.id};b.createListing=function(g){var e=c["default"].marketplaceUrl+"/listing.html?itemId\x3d"+g.id;"private"===g.access&&
(g.createListingUrl=e)};b.downloadAttachment=function(g){var e,d=g.portal.getPortalUser();d=null===(e=null===d||void 0===d?void 0:d.credential)||void 0===e?void 0:e.token;e=n["default"].includes(g.typeKeywords,"Web AppBuilder");e="public"!==g.access&&d||e&&g.isAdmin?"?token\x3d"+d:"";var h=(d=g.codeAttachment)&&(d.url||this.getItemDataUrl(r["default"].mixin(d,{portal:g.portal})));try{h=k["default"].getAbsoluteUrl(h)||h}catch(t){}g.downloadAttachmentUrl=d&&d.url?h+e:h};b.viewStyle=function(g){var e,
d,h=null===(e=g.portal)||void 0===e?void 0:e.isPortal;e=g.portal.getPortalUser();e="public"!==g.access&&(null===(d=null===e||void 0===e?void 0:e.credential)||void 0===d?0:d.token)?"\x26token\x3d"+e.credential.token:"";d=(g.hasResources?g.itemUrl:g.url)+"/resources/styles/root.json?f\x3dpjson";var t=g.portal.portalHostname.toLowerCase();h=h&&"esri_livingatlas"===g.owner&&-1===d.indexOf(t);if((g.isAdmin||g.isOwner)&&g.hasResources||g.hasViewStyle)g.viewStyleUrl=""+d+(h?"":e)};b.downloadStyle=function(g){var e,
d=g.portal.getPortalUser();d="public"!==g.access&&(null===(e=null===d||void 0===d?void 0:d.credential)||void 0===e?0:e.token)?"\x26token\x3d"+d.credential.token:"";e=(g.hasResources?g.itemUrl:g.url)+"/resources/styles/root.json?f\x3dpjson";(g.isAdmin||g.isOwner)&&g.hasResources&&(g.downloadStyleUrl=e+"\x26download\x3dtrue"+d)};b.getItemDataUrl=function(g){var e,d,h=null===(e=g.portal)||void 0===e?void 0:e.getPortalUser();e="public"!==g.access&&(null===(d=null===h||void 0===h?void 0:h.credential)||
void 0===d?0:d.token)?"?token\x3d"+h.credential.token:"";d=c["default"].restBaseUrl+"content/items/"+g.id+"/data";return"KML"!==g.type?g.itemDataUrl||d+e:(g.url!==g.itemDataUrl&&""===e?g.url:g.itemDataUrl)||d+e};b.swivelToken=function(g,e,d){return d&&e&&d!==e&&-1<g.indexOf("token\x3d"+e)?g.replace("token\x3d"+e,"token\x3d"+d):g};b.removeToken=function(g){if(-1<(null===g||void 0===g?void 0:g.indexOf("?"))){g=g.split("?");var e=1<g.length?l.queryToObject(g[1]):{};delete e.token;return g[0]+"?"+l.objectToQuery(e)}return g};
b._getLevelCenter=function(g){var e=-1,d=(null===g||void 0===g?void 0:g.serviceInfo)||{};g=(null===g||void 0===g?void 0:g.adminServiceInfo)||{};if(d.tileInfo&&d.tileInfo.lods&&g.cacheOnDemand&&g.cacheOnDemandMinScale){var h=g.cacheOnDemandMinScale;d.tileInfo.lods.forEach(function(t,z){-1===e&&h>=t.scale&&(e=z)});d=(new m["default"](d.fullExtent)).getCenter();return{level:e,center:[d.x,d.y,d.spatialReference.wkid].join()}}return{}};return b}()})},"arcgisonline/pages/utils/url":function(){define(["require",
"exports","tslib","../utils/arrays"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});B.redirectExternalAppURL=B.sanitizeServerURL=void 0;c=a.__importDefault(c);B.sanitizeServerURL=function(k){k=k||"";var n=k.split("/"),r=n.indexOf("FeatureServer");0<r&&(k=r-1,n.splice(k,1,n[k].replace(/:/g,"")),k=n.join("/"));return k};B.redirectExternalAppURL=function(k,n,r){var f=["Web Mapping Application","Dashboard"],m=c["default"].find([{org:".mapsdevext.arcgis.com",www:"devext.arcgis.com"},
{org:".maps.arcgis.com",www:"www.arcgis.com"},{org:".mapsqa.arcgis.com",www:"qaext.arcgis.com"}],function(q){return-1<(null===n||void 0===n?void 0:n.indexOf(q.org))});if(!k.portalUser&&"self"!==k.contentOrigin&&"public"===k.access&&(r||-1<f.indexOf(k.type))&&n){if(0===n.indexOf("/apps/"))return"https://"+k.portal.portalHostname+n;if(m)return k=n.split(m.org),"https://"+m.www+k[k.length-1]}return n}})},"arcgisonline/sharing/dijit/SiteHeader":function(){define("require exports tslib ../../agoNav ../../esriGeowConfig ../../pages/utils/signin ../../pages/utils/storage ../util ../geow/Account ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/Deferred dojo/_base/url dojo/_base/kernel dojo/sniff dojo/topic esri/config esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SiteHeaderSimple.html ../../pages/utils/queryHandler".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importStar(F);return function(){function x(u,
w){this.declaredClass="arcgisonline.sharing.dijit.SiteHeader";this.templateString=C["default"];this.i18n=a.__assign(a.__assign({},y["default"].common),y["default"].siteHeader)}x.prototype.postMixInProperties=function(){this.inherited(arguments);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=k["default"].baseUrl||"./"};x.prototype.postCreate=function(){var u=window.location.pathname.toLowerCase();
this.isSignInPage=-1!==u.indexOf(k["default"].signin);this.isSignUpPage=-1!==u.indexOf(k["default"].signup);this.isJoinPage=-1!==u.indexOf(k["default"].join);this.isSetupPage=-1!==u.indexOf(k["default"].setup);this.isIEPage=-1!==u.indexOf("ie6.html");this.isTroubleshootPage=-1!==u.indexOf("troubleshoot.html");7>h["default"]("ie")&&!this.isIEPage&&(window.location.href="ie6.html");if(u=document.getElementById("page-border"))u.onclick=function(){}};x.prototype.startup=function(){this.inherited(arguments);
z["default"].defaults.io.corsEnabledServers.push("http://"+location.host);z["default"].defaults.io.corsEnabledServers.push("https://"+location.host);z["default"].defaults.io.proxyUrl=k["default"].proxyServer;return this._fetchSelf()};x.prototype._generateGlobalNav=function(u){this._agoNavIsLoaded||(this.agoNav=new c["default"],this.agoNav.init({config:k["default"].self,legacy:this.legacy,relativePath:this.relativePath}),this._agoNavIsLoaded=!0)};x.prototype._logCookieChange=function(u){var w=this.telemetry;
u&&(null===w||void 0===w?0:w.logEvent)&&w.logEvent({category:"cookie",label:"Organization changed",details:"Yes"})};x.prototype._fetchSelf=function(){var u=this,w=new g["default"];m["default"].getSelf(function(A){u._finishStartup(A);w.resolve(A);t["default"].publish("OnFetchSelf",A)},function(A){u._finishStartup();throw A;});return w};x.prototype._finishStartup=function(u){var w;if(u&&!u.code&&!u.message){var A=void 0,E=void 0;u.httpsPort&&(k["default"].httpsPort=u.httpsPort,E=z["default"].defaults.io.corsEnabledServers.pop());
u.httpPort&&(k["default"].httpPort=u.httpPort,A=z["default"].defaults.io.corsEnabledServers.pop());A&&z["default"].defaults.io.corsEnabledServers.push(f["default"].getHttpUrl("http://"+location.host).replace(/:80$/,""));E&&z["default"].defaults.io.corsEnabledServers.push(f["default"].getSecureUrl("http://"+location.host).replace(/:443$/,""));(u.authorizedCrossOriginDomains||[]).forEach(function(I){v["default"].isDefined(I)&&0<I.length&&z["default"].defaults.io.corsEnabledServers.push({host:I,withCredentials:!0})});
n["default"].checkForOrgUserOnOnlineBaseHostAndRedirect(u);this._generateGlobalNav({user:u.user});this.isLoggedIn=f["default"].isLoggedIn();u.isPortal&&f["default"]._cookies&&-1===f["default"]._cookies.arcgis_auth&&delete f["default"]._cookies.arcgis_auth;E=void 0;A=(null===(w=u.user)||void 0===w?void 0:w.culture)||u.culture||d["default"].locale;w=f["default"].getUser();E=F.queryToObject(window.location.search.substring(1));var G=-1<["hi"].indexOf(A);if(u.culture&&!w)u.culture=u.culture.toLowerCase(),
this.updateLocaleCookie(u.culture,u.isPortal,u.allSSL),-1!==u.culture.indexOf("ar")?k["default"].isRightToLeft=!0:k["default"].isRightToLeft=!1,d["default"].locale.toLowerCase()!==u.culture.toLowerCase()&&window.location.reload();else if(!u.culture&&!w)this.hasLocaleCookie()&&(this.removeLocaleCookie(u.isPortal,u.allSSL),window.location.reload());else if(w&&A&&d["default"].locale!==A.toLowerCase()&&!G&&!E.locale&&w.username&&w.username===u.user.username){var H=f["default"].getCookie("esri_auth");
9>h["default"]("ie")&&u.isWebTierAuth&&(E=new Date,H.expires=new Date(E.setSeconds(E.getSeconds()+Number(7200))));!w.culture||w.culture&&w.culture!==A.toLowerCase()?(w.culture=A.toLowerCase(),this.updateLocaleCookie(w.culture.toLowerCase(),u.isPortal,u.allSSL)):w.culture&&w.culture===A.toLowerCase()&&d["default"].locale!==A.toLowerCase()&&this.updateLocaleCookie(A.toLowerCase(),u.isPortal,u.allSSL);window.location.reload()}if(u.isWebTierAuth)if(w&&(w.username=w.username||w.email),(null===w||void 0===
w?0:w.culture)&&w.culture.toLowerCase()!==A.toLowerCase()&&!G){var K=f["default"].getCookie("esri_auth")||{};9>h["default"]("ie")&&(E=new Date,K.expires=new Date(E.setSeconds(E.getSeconds()+Number(7200))));if(!w.culture||w.culture&&w.culture.toLowerCase()!==(null===A||void 0===A?void 0:A.toLowerCase()))w.culture=A.toLowerCase(),K.culture=w.culture,u.allSSL&&(K.allSSL=!0,K.secure=!0),w=a.__assign(a.__assign({},w),K);window.location.reload()}else(null===(K=null===w||void 0===w?void 0:w.culture)||void 0===
K?void 0:K.toLowerCase())!==A.toLowerCase()||d["default"].locale.toLowerCase()===A.toLowerCase()||G||window.location.reload();u.allSSL&&(this.allSSL=k["default"].allSSL=u.allSSL);v["default"].isDefined(k["default"].allSSL)&&k["default"].allSSL&&"http:"===location.protocol&&(window.location.href=f["default"].getSecureUrl(location.href));u.helpBase&&(k["default"].help=u.helpBase,k["default"].helpBase=u.helpBase,K=k["default"].self&&k["default"].self.helpBase||"support.html",f["default"].isPortal()&&
(K=location.protocol+"//"+location.host+u.helpBase,K=this.allSSL||f["default"].usePortalSSL()?f["default"].getSecureUrl(K):f["default"].getHttpUrl(K)));u.helpMap&&u.helpMap.m&&(k["default"].helpMap=u.helpMap.m);u.portalHostname&&(k["default"].portalHostname=u.portalHostname);u.urlKey&&(k["default"].urlKey=u.urlKey);u.staticImagesUrl&&(k["default"].staticImagesUrl=u.staticImagesUrl);K=!1===k["default"].isMultiTenant;K||(A=window.location.host,A===u.portalHostname||-1===A.indexOf(u.customBaseUrl)||
u.access||u.name||"geoanalyticsengine"===this.getClientId()||(window.location.href=window.location.href.replace(A,u.portalHostname)),!w||"account_admin"!==w.role&&"org_admin"!==w.role||!u.id||u.urlKey||this.isSetupPage||(window.location.href=k["default"].baseUrl+"setup.html"));K?("private"!==(null===u||void 0===u?void 0:u.access)||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location.href=""+f["default"].getSecureUrl()+k["default"].signin+
"?returnUrl\x3d"+encodeURIComponent(window.location.href)),!u.isPortal||"singletenant"!==u.portalMode||"7080"!==location.port&&"7443"!==location.port||f["default"].checkForIAA().then(function(I){if(null===I||void 0===I?0:I.hasIAA)if(u.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href=f["default"].getHttpUrl(k["default"].baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!u.portalHostname.match(/:7080\//)&&80!==k["default"].httpPort&&
443!==k["default"].httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){I=new e["default"](location.href);var J=I.path.indexOf("/home/");J=I.path.substring(J+6);I=v["default"].isDefined(I.query)?"?"+I.query:"";window.location.href=""+f["default"].getHttpUrl("http://"+u.portalHostname)+"/home/"+J+I}})):u.id||!u.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location.href=""+k["default"].baseUrl.replace("http:","https:")+k["default"].signin+
"?returnUrl\x3d"+encodeURIComponent(window.location.href))}};x.prototype.getClientId=function(){try{return r["default"].getLocalStorageItem("portalAppClientId")||r["default"].getSessionStorageItem("portalAppClientId")||k["default"].clientId||"arcgisonline"}catch(u){return k["default"].clientId||"arcgisonline"}};x.prototype.hasLocaleCookie=function(){return!!r["default"].getCookie("arcgisLocale")||!!r["default"].getCookie("esri_locale")};x.prototype.removeLocaleCookie=function(u,w){r["default"].setCookie("arcgisLocale",
null,{expires:-1});r["default"].setCookie("esri_locale",null,{path:"/",domain:u?window.location.hostname:".arcgis.com",secure:!u||w,expires:-1})};x.prototype.updateLocaleCookie=function(u,w,A){r["default"].setCookie("arcgisLocale",u,{sameSite:"Strict"});r["default"].setCookie("esri_locale",u,{path:"/",domain:w?window.location.hostname:".arcgis.com",secure:!w||A})};x.prototype.updateEsriAccessLinks=function(u){var w=this;k["default"].self.user.userType=u;window.require(["arcgisonline/agoNav"],function(A){w.agoNav=
A;A.updateHeaderComponent({config:k["default"].self})})};return x=a.__decorate([q["default"](l["default"],b["default"])],x)}()})},"arcgisonline/agoNav":function(){define("require exports tslib arcgis-components/wrappers/InfoBanner ./esriGeowConfig ./pages/components/ConfirmDialog ./pages/components/StatusBanner ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/a11y ./pages/utils/notifications ./pages/utils/icons ./pages/utils/notebook ./pages/utils/mapViewer ./pages/utils/storage ./pages/utils/organization ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/util dojo/promise/all dojo/debounce dojo/string dojo/topic dojo/query dojo/_base/kernel dojo/_base/lang dojo/Deferred dojo/on esri/arcgis/Portal esri/request esri/IdentityManager ./pages/utils/queryHandler esri-global-nav/esri-global-nav preact dojo/i18n!./nls/arcgisonline".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I,J,L,M,N,O,Y,ba){Object.defineProperty(B,"__esModule",{value:!0});k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);
C=a.__importDefault(C);F=a.__importDefault(F);x=a.__importDefault(x);u=a.__importDefault(u);w=a.__importDefault(w);A=a.__importDefault(A);E=a.__importDefault(E);G=a.__importDefault(G);H=a.__importDefault(H);K=a.__importDefault(K);I=a.__importDefault(I);J=a.__importDefault(J);L=a.__importDefault(L);M=a.__importDefault(M);N=a.__importStar(N);ba=a.__importDefault(ba);D=function(){function ha(){this.GlobalNavLink={label:void 0,href:void 0,data:void 0,active:void 0,newContext:void 0,init:function(U,X){this.label=
U;var Z=X.href,P=X.data,da=X.active,ia=X.openInNewTab;this.href=Z?"function"===typeof Z?Z():Z:"#";this.data=P||void 0;this.active=da||void 0;this.newContext=ia||void 0;return this}}}ha.prototype.init=function(U){var X=this;this.legacy=U.legacy;x["default"]({orgSettings:this.getOrgSettings(),userProperties:this.getUserProperties()}).then(function(Z){X.orgSettings=Z.orgSettings;X.userProperties=Z.userProperties;X.setup(U)});A["default"].subscribe("account-menu/close",this.closeAccountMenu.bind(this));
A["default"].subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));A["default"].subscribe("top-nav/update",this.updateMenu.bind(this));A["default"].subscribe("mapviewer/user-update",this.updateUserMapViewerPreference.bind(this));A["default"].subscribe("mapviewer/org-update",this.updateOrgMapViewerPreference.bind(this))};ha.prototype.setup=function(U){var X=this,Z,P,da,ia=this.orgSettings;if(ia&&ia.anonymousAccessNotice&&ia.anonymousAccessNotice.enabled&&!t["default"].getCookie("ago_conditions_accepted"))return window.location.href=
k["default"].baseUrl+"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_url\x3d"+window.location.href;(null===(Z=null===ia||void 0===ia?void 0:ia.informationalBanner)||void 0===Z?0:Z.enabled)&&this.createClassificationBanner(ia.informationalBanner);Z=36E5>=Date.now()-U.config.created;!U.config.isPortal&&0>=(null===(P=U.config.subscriptionInfo)||void 0===P?void 0:P.availableCredits)&&!Z&&"suspended"!==U.config.subscriptionInfo.state&&"expired"!==U.config.subscriptionInfo.state&&
("geoanalyticsengine"===this.getAppClientId()?this.createNoCoreHoursBanner():this.createRestrictedStatusBanner());this.relativePath=U.relativePath||"./";k["default"].self=U.config;this.customNavStructure=U.customNavStructure;this.isOrgUser=null===(da=k["default"].userInfo)||void 0===da?void 0:da.orgId;this.userIsSignedIn=!(!k["default"].userInfo||!k["default"].userInfo.username&&!k["default"].userInfo.email);this.defaultNavStructure={header:{theme:"web",brand:{label:"ArcGIS Online",href:"../features/features.html",
brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",href:"../features/plans/pricing.html"},{label:"Map",href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:ba["default"].common.search,hide:"search.html"===window.location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",action:k["default"].baseUrl+"search.html",
label:"ArcGIS Online",submitLabel:ba["default"].common.search,cancelLabel:ba["default"].common.cancel,queryLabel:ba["default"].siteHeader.searchAgo}},account:{label:ba["default"].siteHeader.yourProfile,controls:{signin:ba["default"].siteHeader.signIn,signout:ba["default"].siteHeader.signOut,"switch":ba["default"].siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:this.relativePath+"user.html"},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},{label:"training",href:"#",data:{agoMethod:"goTraining"}},
{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",href:"http://doc.arcgis.com/en/arcgis-online/"}]}}};this.fixMobileBannerHeight();this.createPortalInstance().then(function(){var xa=N.queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&(null===xa||void 0===xa?0:xa.hideNav)?(document.body.classList.add("is-embedded"),xa=document.querySelector(".esri-header-barrier"),
xa.parentNode.removeChild(xa)):(X.navLinks=X.buildNavLinks(X,k["default"]),X.createGlobalNav(k["default"].userInfo,U.customNavStructure));(xa=window.esri)&&!xa.i18nBundle&&(xa.i18nBundle=ba["default"])})};ha.prototype.createRestrictedStatusBanner=function(){var U=this,X,Z=document.createElement("div"),P=ba["default"].restrictedOrg,da=P.title,ia=P.you,xa=P.allMembers,Ca=P.learnMore;P=P.removeRestrictions;var Fa=""+k["default"].self.helpBase+(k["default"].self.helpMap.m["120001308"]||""),Ma={};Ma=(null===
(X=k["default"].userRole)||void 0===X?0:X.isAdmin())?{strings:{title:da,message:xa,action:P},onAction:function(Sa){U.openRemoveRestrictionsDialog(null===Sa||void 0===Sa?void 0:Sa.target,Fa)}}:{strings:{title:da,message:ia,learnMore:Ca},link:Fa};document.body.insertBefore(Z,document.body.firstChild);Y.render(Y.h(r["default"],Ma),Z);this.hasStatusBanner=!0};ha.prototype.createNoCoreHoursBanner=function(){var U=document.createElement("div"),X=ba["default"].myOrganization.geoAnalyticsEngine.noCoreHours;
X={strings:{title:X.title,message:X.message}};document.body.insertBefore(U,document.body.firstChild);Y.render(Y.h(r["default"],X),U);this.hasStatusBanner=!0};ha.prototype.openRemoveRestrictionsDialog=function(U,X){var Z=ba["default"].restrictedOrg.removeRestrictions,P=z["default"].getBuyLink(k["default"].self),da='\x3ca href\x3d"'+X+'" target\x3d"_blank"\x3e'+ba["default"].restrictedOrg.learnMoreLong+' \x3ccalcite-icon icon\x3d"launch" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\x3c/a\x3e';P='\x3cp class\x3d"leader-half esriItemLinks"\x3e'+
ba["default"].restrictedOrg.noCredits+" "+(P?w["default"].substitute(ba["default"].restrictedOrg.visitEsriStore,{startLink:'\x3ca href\x3d"'+P+'" target\x3d"_blank"\x3e',endLink:"\x3c/a\x3e"}):w["default"].substitute(ba["default"].restrictedOrg.contactCS,{startLink:'\x3ca href\x3d"http://www.esri.com/about-esri/offices/"\x3e',endLink:"\x3c/a\x3e"}))+'\x3c/p\x3e\x3cp class\x3d"esriItemLinks"\x3e'+da+"\x3c/p\x3e";Z={title:Z,description:P,ok:ba["default"].common.ok};var ia=document.createElement("div");
P=function(){Y.render(null,ia);document.body.removeChild(ia);null===U||void 0===U?void 0:U.focus()};document.body.appendChild(ia);Y.render(Y.h(n["default"],{strings:Z,onOk:P,onCancel:P,autoCloseOnOk:!0,hideCancel:!0,renderHtmlDescription:!0,width:"s"}),ia);window.setTimeout(function(){var xa;null===(xa=ia.querySelector("calcite-modal"))||void 0===xa?void 0:xa.setFocus("close-button")},200)};ha.prototype.closeAccountMenu=function(){this.updateComponent("header:menu:close",document.getElementById("esri-header-account-menu"))};
ha.prototype.updateUserMapViewerPreference=function(U){var X,Z;this.userProperties.mapViewer=U;U=null===(Z=null===(X=k["default"].self)||void 0===X?void 0:X.portalProperties)||void 0===Z?void 0:Z.topNav;this.updateMenu(U||{})};ha.prototype.updateOrgMapViewerPreference=function(U){var X=k["default"].self;X&&(X.portalProperties=X.portalProperties||{},X.portalProperties.mapViewer=U,this.updateMenu(X.portalProperties.topNav||{}))};ha.prototype.getMapViewerLink=function(U){return U===h["default"].MapViewerType.Classic?
this.relativePath+"webmap/viewer.html?useExisting\x3d1":k["default"].newMapViewerUrl};ha.prototype.updateHelpUrl=function(U){this.updateHeaderComponent({config:U})};ha.prototype.updateMenu=function(U){var X=k["default"].self.portalProperties||{};X.topNav=U;k["default"].self.portalProperties=X;this.navLinks=this.buildNavLinks(this,k["default"]);U=this.getNavStructure(k["default"].userInfo,this.customNavStructure);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),
U.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),U.header.menus)};ha.prototype.createClassificationBanner=function(U){var X=document.createElement("div"),Z=document.createElement("div");document.body.insertBefore(X,document.body.childNodes[0]);document.body.appendChild(Z);new c.InfoBanner({bannerConfig:U,topContainer:X,bottomContainer:Z});this.hasInfoBanner=!0};ha.prototype.getAppClientId=function(){try{return t["default"].getLocalStorageItem("portalAppClientId")||
t["default"].getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(U){return"arcgisonline"}};ha.prototype.createPortalInstance=function(){var U=this,X=new K["default"];(this.portal=k["default"]&&k["default"].portal)?X.resolve(!0):v["default"].getSelf(function(Z){U.portal=new J["default"].Portal({url:k["default"].restBaseUrl.replace("http://","https://"),self:H["default"].clone(Z)});I["default"].once(U.portal,"load",function(){U.portal.portalUser=U.portal.getPortalUser();q["default"].isOrgUser=
U.isOrgUser;q["default"].portal=U.portal;q["default"].getLicenseInfo().then(function(){k["default"].userInfo&&(k["default"].userInfo=a.__assign(a.__assign({},k["default"].userInfo),q["default"]));U.portal.portalUser?M["default"].checkAppAccess(U.portal.portalUrl,U.getAppClientId()).always(function(P){if(P=!(!P||!P.viewOnly))U.portal.user.cookie=U.getUserCookie(),U.portal.user.credential=U.portal.portalUser.credential,U.portal.user.portal=U.portal,U.portal.user.viewOnly=P,U.portal.portalUser=new m["default"](U.portal.user);
X.resolve(!0)}):X.resolve(!0)})})});return X};ha.prototype.fixMobileBannerHeight=function(){var U;this.hasInfoBanner&&!this.hasStatusBanner||this.hasStatusBanner&&!this.hasInfoBanner?U=56+document.body.childNodes[0].clientHeight:this.hasInfoBanner&&this.hasStatusBanner&&(U=56+document.body.childNodes[0].clientHeight+document.body.childNodes[1].clientHeight);U&&setTimeout(function(){var X=document.getElementById("esri-header-menus-content-mobile");X&&(X.style.height="calc(var(--esri-vh) - "+U+"px)")},
1E3)};ha.prototype.createGlobalNav=function(U,X){var Z,P,da,ia=this.getNavStructure(U,X),xa=((null===(P=null===(Z=k["default"].self)||void 0===Z?void 0:Z.portalProperties)||void 0===P?void 0:P.topNav)||{}).search;Z=this.isOrgUser&&k["default"].self&&k["default"].userInfo.orgId===k["default"].self.id;"members"!==xa||Z||delete ia.header.search;O.createHeader({targetElm:".esri-header-barrier",menuData:ia});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),
this.setupNotifications(U),this.isOrgUser&&(k["default"].self.isPortal||"active"===(null===(da=k["default"].self.subscriptionInfo)||void 0===da?void 0:da.state))&&(k["default"].self.isPortal||(this.defaultNavStructure.header.apps=this._getAppsLoadingJson(),this.updateAppLauncherComponent()),this.createAppLauncher())):this.setupSignInLink();this.addLegacyClasses()};ha.prototype.addLegacyClasses=function(){if(this.legacy){var U=window.location.pathname.toLowerCase();if(-1!==U.indexOf("index.html")||
-1===U.indexOf(".html"))E["default"](".siteHeader").addClass("top-nav"),E["default"](".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),E["default"](".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}};ha.prototype.getNavStructure=function(U,X){var Z=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?
this.getSignedInNavStructure(U,this.userCookie):this.getSignedOutNavStructure();return H["default"].mixin(k["default"].self.isPortal?this.modifyStructureForPortal(Z):Z,X||{})};ha.prototype.getSignedOutNavStructure=function(){var U=k["default"].self.isPortal,X=this.showProductLinks()?["overview","pricing","map","scene","help"]:["home_link","gallery","map","scene","groups"].concat(U?["help"]:[]);this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(X,ba["default"].siteHeader)];this.defaultNavStructure.header.brand.href=
""+this.relativePath+(U?"index.html":"../features/features.html");return this.defaultNavStructure};ha.prototype.isGeode=function(){return"geoanalyticsengine"===this.getAppClientId()};ha.prototype.getSignedInNavStructure=function(U,X){var Z=this.isGeode(),P={name:U.fullName,id:U.username,group:"",image:this.getUserProfileImage(U.username,U.thumbnail,X.token)},da=Z?[]:"myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" "),ia=this.isPublicAccount()?"ArcGIS overview pricing map scene groups myContent".split(" "):
"home_link gallery map scene notebook groups myContent myAccount".split(" ");this.defaultNavStructure.header.account.user=P;this.defaultNavStructure.header.menus=Z?[[{active:!0,href:this.relativePath+"geoanalyticsengine.html#subscription",label:ba["default"].siteHeader.subscription},{href:this.relativePath+"geoanalyticsengine.html#downloads",label:ba["default"].siteHeader.downloads}]]:[this.filterAndCreateLinks(ia,ba["default"].siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks(da,
ba["default"].siteHeader);this.defaultNavStructure.header.brand.href=""+this.relativePath+(k["default"].self.isPortal?"index.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=this._getDefaultNotifications());Z&&delete this.defaultNavStructure.header.search;return this.defaultNavStructure};ha.prototype.modifyStructureForPortal=function(U){U.header.search.dialog.queryLabel=ba["default"].siteHeader.searchAgoEnterprise;return U};ha.prototype.getFooterLinks=
function(){var U=this,X,Z,P,da;this.i18n=a.__assign(a.__assign(a.__assign({},ba["default"].siteFooter),ba["default"].common),{helpLabel:ba["default"].supportPage.helpLabel});var ia=k["default"].footerLinks.reduce(function(xa,Ca){var Fa=Ca.title.indexOf("${");Fa=-1<Fa?U._evalString(Ca.title,Fa):Ca.title;return"ArcGIS Marketplace"===Ca.title?k["default"].self&&U.userIsSignedIn?xa.concat({label:Fa,href:k["default"].marketplaceUrl.replace("http://","https://")}):xa:"contactUs"===Ca.type?xa.concat({label:Fa,
href:U._constructContactUsUrl(Ca)}):"reportAbuse"===Ca.type?xa.concat({label:Fa,href:U._constructReportAbuseUrl(Ca)}):Ca.url?xa.concat({label:Fa,href:Ca.url}):xa},[]);(null===(da=null===(P=null===(Z=null===(X=k["default"].self)||void 0===X?void 0:X.portalProperties)||void 0===Z?void 0:Z.links)||void 0===P?void 0:P.contactUs)||void 0===da?0:da.visible)&&ia.push({label:this.i18n.customContactUs,href:k["default"].self.portalProperties.links.contactUs.url});return ia};ha.prototype.updateComponent=function(U,
X,Z){var P=document.createEvent("CustomEvent");P.initCustomEvent(U,!0,!0,Z);X.dispatchEvent(P)};ha.prototype.updateAppLauncherComponent=function(U){this.updateComponent("header:update:apps",document.querySelector(".esri-header-apps"),this._appsJson(U))};ha.prototype.updateHeaderComponent=function(U){k["default"].self=U.config;this.navLinks=this.buildNavLinks(this,k["default"]);U=this.getNavStructure(k["default"].userInfo,U.customNavStructure);this.updateComponent("header:update:account",document.querySelector(".esri-header-client").lastChild,
U.header.account)};ha.prototype.updateNotificationsComponent=function(U){this.defaultNavStructure.header.notifications.messages=U;this.updateComponent("header:update:notifications",document.querySelector(".esri-header-notifications"),this._getDefaultNotifications(U));0===U.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))};ha.prototype.updateSearchComponent=function(U,X){this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),
this._searchJson(U,X))};ha.prototype.createAppLauncher=function(){var U=this,X;this.portal.token=(null===(X=this.userCookie.credential)||void 0===X?void 0:X.token)||this.userCookie.token;this.appLauncher=new C["default"](this.portal,this.userProperties);this.appLauncher.getApps({noStrings:!0}).then(function(Z){if(Z.primary.length||Z.secondary.length)U.fixRelativeAppUrls(Z.primary),U.fixRelativeAppUrls(Z.secondary),U.updateAppLauncherComponent(Z),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",
function(P){U.appLauncher.setApps(JSON.stringify(P.detail.icons),!0)}),A["default"].subscribe("appLauncher/app/updated",U._restartAppLauncherApp.bind(U)),A["default"].subscribe("appLauncher/app/deleted",U._restartAppLauncherApp.bind(U)),A["default"].subscribe("appLauncher/restart",U._restartAppLauncherApp.bind(U,!0)),A["default"].subscribe("appLauncher-license/refresh",U._refreshLicenseAndRestartAppLauncher.bind(U)),U.addLegacyClasses()})};ha.prototype.fixRelativeAppUrls=function(U){if(-1!==window.location.pathname.indexOf("/home/notebook/")){var X=
window.location.protocol+"//"+window.location.host+F["default"].getHomeAppContext()+"/";(U||[]).forEach(function(Z){Z.url=(Z.url||"").replace("../",X)})}};ha.prototype._restartAppLauncherApp=function(U){var X=this;this.appLauncher&&this.appLauncher.refreshApps(U).then(function(Z){return X.updateAppLauncherComponent(Z)})};ha.prototype._refreshLicenseAndRestartAppLauncher=function(){var U=this;this.appLauncher&&(q["default"].licenses={arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,
className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},this.appLauncher.fetchAndSetupLicenseInfo().then(function(){return U.appLauncher.refreshApps(!0)}).then(function(X){return U.updateAppLauncherComponent(X)}))};
ha.prototype._appsJson=function(U){return a.__assign(a.__assign({},{label:ba["default"].appSwitcher.appLauncher,disableDragDrop:!1,loading:!U,text:{title:ba["default"].appSwitcher.appLauncher,confirm:ba["default"].appSwitcher.gotIt,dragAppsHere:ba["default"].appSwitcher.dragAppsHere,intro:ba["default"].appSwitcher.dragAndDropIntroText,removed:ba["default"].appSwitcher.noLongerAvailable,removedMessage:ba["default"].appSwitcher.removedApp,showMore:ba["default"].appSwitcher.showMore}}),U)};ha.prototype._getAppsLoadingJson=
function(U){return{label:ba["default"].appSwitcher.appLauncher,disableDragDrop:!1,loading:U}};ha.prototype._searchJson=function(U,X){var Z;return null!==(Z=null===X||void 0===X?void 0:X.results)&&void 0!==Z&&Z.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:U,category:"item",data:X.results})]}:{suggestions:[]}};ha.prototype._disabledSearchJson=function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:ba["default"].search.error.wildCardSearchError,
secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+e["default"]["exclamation-mark-circle"]["16"]+"\x3c/span\x3e"}]}]}};ha.prototype._generateSuggestionsSection=function(U){return{hideHR:!0,links:U.data.map(this._generateSuggestionLink.bind(this,U.category))}};ha.prototype._generateSuggestionLink=function(U,X){var Z={text:X.title,secondary:this._getSecondaryOwnerText(U,X),href:""+this.relativePath+U+".html?id\x3d"+X.id,iconSize:"group"===U?"28":
"22"},P=X.icon||"group"!==U?{icon:X.icon}:{htmlIcon:this._getGroupIcon(X)};return a.__assign(a.__assign({},Z),P)};ha.prototype._getGroupIcon=function(U){return(new l["default"]({portal:this.portal,group:U,size:"28",letterSize:"1",tooltipClass:"",cssClasses:"org-member-card__group-title esri-header-inlineSearch-suggestion-icon"})).domNode.outerHTML};ha.prototype._getSecondaryOwnerText=function(U,X){var Z=X.owner;return"item"===U?w["default"].substitute(ba["default"].siteHeader.itemTypeBy,{itemType:X.type,
owner:Z}):w["default"].substitute(ba["default"].siteHeader.groupOwner,{owner:Z})};ha.prototype._generateSearchLink=function(U){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26sortField\x3drelevance\x26"+U)};ha.prototype._constructSearchQ=function(U,X){var Z;return""+U+(X&&(null===(Z=k["default"].userInfo)||void 0===Z?0:Z.orgId)?" orgid:"+k["default"].userInfo.orgId:"")};ha.prototype._getSuggestFilters=function(){return(k["default"].self.id?'accountid:"'+k["default"].self.id+
'"':"")+(k["default"].viewQueries.none||"")};ha.prototype.fetchSuggestionResults=function(U){U=U.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return L["default"]({url:k["default"].restBaseUrl.replace("http://","https://")+"search/suggest",content:{suggest:U,filters:this._getSuggestFilters(),searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})};ha.prototype.fetchItemSearchResults=function(U){return L["default"]({url:k["default"].restBaseUrl.replace("http://",
"https://")+"search",content:{q:this._constructSearchQ(U,!0),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};ha.prototype.fetchGroupSearchResults=function(U){return L["default"]({url:k["default"].restBaseUrl.replace("http://","https://")+"/community/groups",content:{q:this._constructSearchQ(U,!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};ha.prototype.mixinItemIcon=function(U){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=
k["default"].userRole);var X=new f["default"](a.__assign(a.__assign({},U),{portal:this.portal}));return a.__assign(a.__assign({},U),{type:X.displayName,icon:""+k["default"].baseUrl+X.svgIconUrl32})};ha.prototype.mixinGroupIcon=function(U){return a.__assign(a.__assign({},U),{icon:U.thumbnail?this._constructRestUrlWithToken("community/groups/"+U.id+"/info/"+U.thumbnail):null})};ha.prototype._constructRestUrlWithToken=function(U){return""+this.portal.portalUrl+U+(this.userCookie?"?token\x3d"+this.userCookie.token:
"")};ha.prototype._constructSecureBaseUrl=function(U){return""+k["default"].baseUrl.replace("http://","https://")+U};ha.prototype.buildNavLinks=function(U,X){var Z,P,da,ia,xa=!!k["default"].self,Ca=window.location.pathname.toLowerCase(),Fa=xa&&(null===(Z=k["default"].self.portalProperties)||void 0===Z?void 0:Z.topNav)||{};Z=Fa.gallery;var Ma=Fa.map,Sa=Fa.scene;Fa=Fa.groups;xa=this.isOrgUser&&xa&&k["default"].userInfo.orgId===k["default"].self.id;var Ba=k["default"].notebookLandingEnabled?"notebookhome.html":
"notebook.html",ca=h["default"].determineMapViewerSetting(this.userProperties);return{myProfile:{href:this.relativePath+"user.html"},mySettings:{href:this.relativePath+"user.html#settings"},pricing:{href:this.relativePath+"../features/plans/pricing.html"},overview:{href:this.relativePath+"../features/features.html"},ArcGIS:{href:""+this.relativePath+(U.isPublicAccount()?"index.html":"../features/features.html")},groups:{show:!Fa||"all"===Fa||"members"===Fa&&xa,href:this.relativePath+"groups.html",
active:-1<Ca.indexOf("groups.html")},myContent:{href:this.relativePath+"content.html",active:-1<Ca.indexOf("content.html")},map:{show:q["default"].isLicensed("arcgisWebApps")&&(!Ma||"all"===Ma||"members"===Ma&&xa||"mapCreators"===Ma&&xa&&(null===(P=k["default"].userRole)||void 0===P?void 0:P.canCreateItem())),href:this.getMapViewerLink(ca)},help:{href:U._getHelpUrl.bind(U),openInNewTab:!0},gallery:{show:"noOne"!==Z&&(!Z||"all"===Z||"members"===Z&&xa)&&k["default"].self.id,href:this.relativePath+"gallery.html",
active:-1<Ca.indexOf("gallery.html")},home_link:{show:!U.isPublicAccount(),href:this.relativePath+"index.html",active:-1<Ca.indexOf("index.html")||0>Ca.indexOf(".html")},scene:{show:X.sceneViewerEnabled&&q["default"].isLicensed("arcgisWebApps")&&(!Sa||"all"===Sa||"members"===Sa&&xa||"sceneCreators"===Sa&&xa&&(null===(da=k["default"].userRole)||void 0===da?void 0:da.canCreateItem())),href:this.relativePath+"webscene/viewer.html"},notebook:{show:d["default"].notebookServerConfigured()&&(null===(ia=
k["default"].userRole)||void 0===ia?void 0:ia.canCreateNotebooks()),href:this.relativePath+"notebook/"+Ba,openInNewTab:!k["default"].notebookLandingEnabled},myAccount:{show:U.canViewOrgUsers()&&U.orgPageRestrictionsDoNotApply(),href:this.relativePath+"organization.html",active:-1<Ca.indexOf("organization.html")},marketplace:{show:!U.isPublicAccount(),href:U._getMarketplaceUrl.bind(U)},features:{show:U.isPublicAccount()&&!k["default"].self.isPortal,href:this.relativePath+"../features/features.html"},
esriCommunity:{show:U.showEsriLinks(),href:U._getEsriCommunityUrl.bind(U),openInNewTab:!0},myEsri:{show:U.showEsriLinks(),href:U._getMyEsriUrl.bind(U),openInNewTab:!0},arcgisBlog:{show:U.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:U.showEsriLinks(),href:U._getEsriTrainingUrl.bind(U),openInNewTab:!0},trialDownload:{show:U.subscriptionIsTrial(),href:U._getTrialDownloadUrl.bind(U),openInNewTab:!0}}};ha.prototype.filterAndCreateLinks=function(U,
X){var Z=this,P=[];U.forEach(function(da){var ia=Z.navLinks[da];!ia||"show"in ia&&!ia.show||P.push(Z.createGlobalNavLink(X[da]||da,ia))},this);return P};ha.prototype.createGlobalNavLink=function(U,X){return Object.create(this.GlobalNavLink).init(U,X)};ha.prototype.getUserProfileImage=function(U,X,Z){return X?k["default"].restBaseUrl.replace("http://","https://")+"community/users/"+U+"/info/"+X+"?token\x3d"+Z:this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")};ha.prototype.getUserCookie=
function(){return k["default"].userInfo||null};ha.prototype.getOrgSettings=function(){return F["default"].request({url:k["default"].restBaseUrl+"portals/self/settings",content:{f:"json"}})};ha.prototype.getUserProperties=function(){var U,X=new K["default"];(null===(U=k["default"].userInfo)||void 0===U?0:U.username)?F["default"].request({url:k["default"].restBaseUrl+"community/users/"+k["default"].userInfo.username+"/properties",content:{f:"json"}}).then(function(Z){X.resolve(Z.properties)},function(){X.resolve(null)}):
X.resolve(null);return X};ha.prototype.setupSignInLink=function(){var U;if(this.hideSignInLink())return null===(U=document.querySelector(".esri-header-account-control--signin"))||void 0===U?void 0:U.classList.add("hide");E["default"](".esri-header-account-control--signin").on("click",function(){var X=k["default"].baseUrl+"signin.html?";-1<window.location.href.indexOf("item.html")?window.location.href=X+"useLandingPage\x3dfalse\x26returnUrl\x3d"+window.location.href:window.location.href=X+"useLandingPage\x3dtrue"})};
ha.prototype.setupSignOutAndAccountSwitcherLinks=function(){var U=this,X;k["default"].showAccountSwitcher&&(null===(X=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===X?void 0:X.classList.add("hide"));I["default"](document.querySelector(".esri-header-account-control-logout"),"click",function(Z){U._selectLogOut(Z)});I["default"](document.querySelector(".esri-header-account-control.-switch"),"click",function(){U._openSwitchAccounts()})};ha.prototype.setupSignOutLink=
function(){var U=this,X;if(null===(X=this.portal)||void 0===X?0:X.isWebTierAuth)return document.querySelector(".esri-header-account-signin-control.-logout").classList.add("hide");I["default"](document.querySelector(".esri-header-account-signin-control.-logout"),"click",function(Z){U._selectLogOut(Z)})};ha.prototype.setupAccountSwitcherLink=function(){var U=this,X;if("showAccountSwitcher"in k["default"]&&!k["default"].showAccountSwitcher)return null===(X=document.querySelector(".esri-header-account-signin-control.-switch"))||
void 0===X?void 0:X.classList.add("hide");I["default"](document.querySelector(".esri-header-account-signin-control.-switch"),"click",function(){U._openSwitchAccounts()})};ha.prototype.setupInlineSearch=function(){var U=this;document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",u["default"](function(X){-1<X.detail.indexOf("*")?U.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),U._disabledSearchJson()):2<=X.detail.length&&
U.fetchSuggestionResults(X.detail).then(function(Z){Z.results=Z.results.map(U.mixinItemIcon.bind(U));b["default"].postToLiveRegion(w["default"].substitute(1===Z.results.length?ba["default"].searchPage.contentSearchResultLabel:ba["default"].searchPage.contentSearchResultsLabel,{resultcount:Z.results.length,keyword:X.detail}));U.updateSearchComponent(X.detail,Z)})},280))};ha.prototype.setupNotifications=function(U){var X=this;g["default"].fetchNotifications(U,this.portal).then(this.updateNotificationsComponent.bind(this));
document.addEventListener("header:click:notifications:dismiss",function(Z){g["default"].deleteNotifications(U,Z.detail).then(function(P){var da=P.filter(function(ia){return ia.success}).map(function(ia){return ia.notificationId});P=(X.defaultNavStructure.header.notifications.messages||[]).filter(function(ia){return 0>da.indexOf(ia.id)});X.updateNotificationsComponent(P)})})};ha.prototype._getDefaultNotifications=function(U){var X=ba["default"].notifications;return{label:X.label,dismissAllLabel:X.dismissAllLabel,
dismissLabel:X.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],viewBox:"0 0 32 32"},text:X.noNotifications},messages:U||[]}};ha.prototype._evalString=function(U,X){var Z=U.indexOf("}",X),P=U.substring(X+2,Z);return""+U.substring(0,X)+this[P]+U.substring(Z+1,U.length)};ha.prototype._constructContactUsUrl=function(U){var X=
k["default"].portalName||"ArcGIS.com",Z=encodeURIComponent(window.location.href);return"mailto:"+U.email+"?subject\x3dA comment about "+X+"\x26body\x3dI have the following comment about the "+X+" Web site. %0AReferring page: "+Z+" %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"};ha.prototype._constructReportAbuseUrl=function(U){var X=encodeURIComponent(window.location.href);return"mailto:"+U.email+"?subject\x3dConcerns about an item\x26body\x3dI have concerns about the following. %0AReferring page: "+
X+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)"};ha.prototype._selectLogOut=function(U){U.preventDefault();k["default"].self.isPortal?this._standardLogOut():this._agolLogOut()};ha.prototype._agolLogOut=function(){t["default"].setCookie("esri_webmap","",{expires:-1,path:"/"});var U=(k["default"].isDebug?k["default"].baseUrl:
k["default"].baseUrl.replace("http://","https://"))+"pages/Account/manage_accounts.html#client_id\x3d"+(this.getAppClientId()+"\x26signout\x3dtrue");window.location.href=U};ha.prototype._standardLogOut=function(){t["default"].setCookie("esri_webmap","",{expires:-1,path:"/"});var U=F["default"].getHttpUrl()+"index.html";"private"===k["default"].self.access&&(U=""+F["default"].getSecureUrl()+k["default"].signin);"public"===k["default"].self.access&&(U=(k["default"].self.allSSL||this.usePortalSSL()?
F["default"].getSecureUrl():F["default"].getHttpUrl())+"index.html");y["default"].signout(U)};ha.prototype._openSwitchAccounts=function(){window.open(k["default"].baseUrl+"pages/Account/manage_accounts.html#client_id\x3darcgisonline","_blank").focus()};ha.prototype.relativeToExplicitUrl=function(U){k["default"].cdnServerUrl=G["default"].baseUrl.substring(0,G["default"].baseUrl.indexOf("/js/"));return k["default"].cdnServerUrl.lastIndexOf("/")===k["default"].cdnServerUrl.length-1?""+k["default"].cdnServerUrl+
U:k["default"].cdnServerUrl+"/"+U};ha.prototype._getHelpUrl=function(){var U;return k["default"].self.isPortal?this._getPortalHelpUrl():(null===(U=k["default"].self)||void 0===U?void 0:U.helpBase)||"support.html"};ha.prototype._getPortalHelpUrl=function(){if(-1<k["default"].self.helpBase.indexOf("enterprise.arcgis.com"))return k["default"].self.helpBase+"portal/";var U=k["default"].self.helpBase;"ArcGISEnterpriseOnKubernetes"!==(k["default"].self||{}).portalDeploymentType&&(U+="portal/");return k["default"].self.allSSL||
"https:"===window.location.protocol||this.usePortalSSL()||"7443"===window.location.port?""+F["default"].getSecureUrl(window.location.protocol+"//"+window.location.host)+U:U};ha.prototype._getEsriTrainingUrl=function(){return this.generateEsriLoginHandlerUrl(window.location.protocol+"//www.esri.com/training/arcgis-online-training")};ha.prototype._getMyEsriUrl=function(){return this.generateEsriLoginHandlerUrl(k["default"].myEsriLink)};ha.prototype._getEsriCommunityUrl=function(){return this.generateEsriLoginHandlerUrl(k["default"].esriCommunityLink)};
ha.prototype._getMarketplaceUrl=function(){var U=this.getDevEnviroment();return window.location.protocol+"//marketplace"+(U?U+"ext":"")+".arcgis.com"};ha.prototype._getTrialDownloadUrl=function(){var U,X,Z={"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},P=((null===(U=k["default"].userInfo)||void 0===U?void 0:U.culture)||(null===(X=k["default"].self)||void 0===X?void 0:X.culture)||G["default"].locale||"en").toLowerCase();U={nl:1}[P]?"en":P in Z?P:P.split("-")[0].toLowerCase();return k["default"].learnArcGIS+
"/"+U+"/trial"};ha.prototype.generateEsriLoginHandlerUrl=function(U){var X=this.getDevEnviroment();X="https://accounts"+(X?"dev"===X?"-dev":"-stg":"")+".esri.com/";var Z="\x26authBaseUrl\x3d"+F["default"].getSecureUrl(k["default"].restBaseUrl.replace("/sharing/rest/",""));return X+"LoginHandler/switchuser?username\x3d"+(k["default"].userInfo.username+"\x26redirect_uri\x3d"+U+Z)};ha.prototype.getDevEnviroment=function(){var U=k["default"].self.portalHostname;return-1!==U.indexOf("dev")?"dev":-1!==
U.indexOf("qa")?"qa":null};ha.prototype._getOriginOfUrl=function(U){var X=window.location;U=U?U+":":X.protocol;return U+"//"+X.hostname+(X.port?":"+X.port:"")+"/"};ha.prototype.hideSignInLink=function(){return k["default"].self.isPortal&&"singletenant"===k["default"].self.portalMode&&k["default"].self.isWebTierAuth&&"7443"!==window.location.port};ha.prototype.showProductLinks=function(){var U=k["default"].self,X=U.access,Z=U.isPortal;return!U.id&&!X&&!Z};ha.prototype.isPublicAccount=function(){var U=
k["default"].self,X=U.isPortal;return!U.urlKey&&!X&&!!k["default"].userInfo};ha.prototype.canViewOrgUsers=function(){var U;return null===(U=k["default"].userRole)||void 0===U?void 0:U.canViewOrgUsers()};ha.prototype.orgPageRestrictionsDoNotApply=function(){var U=k["default"].userInfo,X=!U.accountId;U=U.role&&("org_admin"===U.role||"account_admin"===U.role)&&!U.roleId;return!k["default"].restrictOrganizationPageToAdmin||X||U};ha.prototype.showEsriLinks=function(){var U;return!k["default"].self.isPortal&&
"both"===(null===(U=k["default"].userInfo)||void 0===U?void 0:U.userType)};ha.prototype.subscriptionIsTrial=function(){return!k["default"].self.isPortal&&k["default"].self.subscriptionInfo&&("Trial"===k["default"].self.subscriptionInfo.type||"Trial Press"===k["default"].self.subscriptionInfo.type)};ha.prototype.usePortalSSL=function(){var U;return(!1===k["default"].isMultiTenant||F["default"].isPortal())&&(null===(U=k["default"].self)||void 0===U?void 0:U.portalHostname)&&!k["default"].self.portalHostname.match(/:7080\//)&&
80!==k["default"].self.httpPort&&443!==k["default"].self.httpsPort&&"https:"===window.location.protocol};return ha}();B["default"]=D})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(D,B){return function(a){function c(n){if(k[n])return k[n].exports;var r=k[n]={i:n,l:!1,exports:{}};return a[n].call(r.exports,r,r.exports,c),r.l=!0,r.exports}var k={};return c.m=a,c.c=k,c.d=function(n,r,f){c.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:f})},
c.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,r){if((1&r&&(n=c(n)),8&r)||4&r&&"object"==typeof n&&n&&n.__esModule)return n;var f=Object.create(null);if(c.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var m in n)c.d(f,m,function(q){return n[q]}.bind(null,m));return f},c.n=function(n){var r=n&&n.__esModule?function(){return n["default"]}:
function(){return n};return c.d(r,"a",r),r},c.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},c.p="",c(c.s=982)}({0:function(a,c,k){function n(e,d){function h(){this.constructor=e}if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");b(e,d);e.prototype=null===d?Object.create(d):(h.prototype=d.prototype,new h)}function r(e,d){var h={},t;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>d.indexOf(t)&&(h[t]=e[t]);
if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(t=Object.getOwnPropertySymbols(e);z<t.length;z++)0>d.indexOf(t[z])&&Object.prototype.propertyIsEnumerable.call(e,t[z])&&(h[t[z]]=e[t[z]])}return h}function f(e,d,h,t){var z,v=arguments.length,y=3>v?d:null===t?t=Object.getOwnPropertyDescriptor(d,h):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(e,d,h,t);else for(var C=e.length-1;0<=C;C--)(z=e[C])&&(y=(3>v?z(y):3<v?z(d,h,y):z(d,h))||y);return 3<
v&&y&&Object.defineProperty(d,h,y),y}function m(e,d,h,t){return new (h||(h=Promise))(function(z,v){function y(x){try{F(t.next(x))}catch(u){v(u)}}function C(x){try{F(t["throw"](x))}catch(u){v(u)}}function F(x){var u;x.done?z(x.value):(u=x.value,u instanceof h?u:new h(function(w){w(u)})).then(y,C)}F((t=t.apply(e,d||[])).next())})}function q(e,d){function h(F){return function(x){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;C;)try{if(t=1,z&&(v=2&u[0]?z["return"]:
u[0]?z["throw"]||((v=z["return"])&&v.call(z),0):z.next)&&!(v=v.call(z,u[1])).done)return v;switch(z=0,v&&(u=[2&u[0],v.value]),u[0]){case 0:case 1:v=u;break;case 4:return C.label++,{value:u[1],done:!1};case 5:C.label++;z=u[1];u=[0];continue;case 7:u=C.ops.pop();C.trys.pop();continue;default:if(!(v=C.trys,(v=0<v.length&&v[v.length-1])||6!==u[0]&&2!==u[0])){C=0;continue}if(3===u[0]&&(!v||u[1]>v[0]&&u[1]<v[3]))C.label=u[1];else if(6===u[0]&&C.label<v[1])C.label=v[1],v=u;else if(v&&C.label<v[2])C.label=
v[2],C.ops.push(u);else{v[2]&&C.ops.pop();C.trys.pop();continue}}u=d.call(e,C)}catch(w){u=[6,w],z=0}finally{t=v=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([F,x])}}var t,z,v,y,C={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:h(0),"throw":h(1),"return":h(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function l(e,d){for(var h=0,t=d.length,z=e.length;h<t;h++,z++)e[z]=d[h];return e}k.d(c,"d",function(){return n});
k.d(c,"a",function(){return g});k.d(c,"f",function(){return r});k.d(c,"c",function(){return f});k.d(c,"b",function(){return m});k.d(c,"e",function(){return q});k.d(c,"g",function(){return l});var b=function(e,d){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,t){h.__proto__=t}||function(h,t){for(var z in t)Object.prototype.hasOwnProperty.call(t,z)&&(h[z]=t[z])})(e,d)},g=function(){return(g=Object.assign||function(e){for(var d,h=1,t=arguments.length;h<t;h++)for(var z in d=
arguments[h])Object.prototype.hasOwnProperty.call(d,z)&&(e[z]=d[z]);return e}).apply(this,arguments)};Object.create;Object.create},16:function(a,c){a.exports=D},170:function(a,c){var k=function(){return this}();try{k=k||(new Function("return this"))()}catch(n){"object"==typeof window&&(k=window)}a.exports=k},189:function(a,c){function k(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function r(v){if(g===setTimeout)return setTimeout(v,
0);if((g===k||!g)&&setTimeout)return g=setTimeout,setTimeout(v,0);try{return g(v,0)}catch(y){try{return g.call(null,v,0)}catch(C){return g.call(this,v,0)}}}function f(){t&&d&&(t=!1,d.length?h=d.concat(h):z=-1,h.length&&m())}function m(){if(!t){var v=r(f);t=!0;for(var y=h.length;y;){d=h;for(h=[];++z<y;)d&&d[z].run();z=-1;y=h.length}d=null;t=!1;(function(C){if(e===clearTimeout)return clearTimeout(C);if((e===n||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(C);try{e(C)}catch(F){try{return e.call(null,
C)}catch(x){return e.call(this,C)}}})(v)}}function q(v,y){this.fun=v;this.array=y}function l(){}var b=a.exports={};try{var g="function"==typeof setTimeout?setTimeout:k}catch(v){g=k}try{var e="function"==typeof clearTimeout?clearTimeout:n}catch(v){e=n}!0;var d,h=[],t=!1,z=-1;b.nextTick=function(v){var y=Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)y[C-1]=arguments[C];h.push(new q(v,y));1!==h.length||t||r(m)};q.prototype.run=function(){this.fun.apply(null,this.array)};
b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=l;b.addListener=l;b.once=l;b.off=l;b.removeListener=l;b.removeAllListeners=l;b.emit=l;b.prependListener=l;b.prependOnceListener=l;b.listeners=function(v){return[]};b.binding=function(v){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(v){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},28:function(a,c,k){(function(n,r){a.exports=function(){function f(){var X=
setTimeout;return function(){return X(m,1)}}function m(){for(var X=0;X<x;X+=2)(0,I[X])(I[X+1]),I[X]=void 0,I[X+1]=void 0;x=0}function q(X,Z){var P=this,da=new this.constructor(b);void 0===da[Y]&&C(da);var ia=P._state;if(ia){var xa=arguments[ia-1];A(function(){return y(ia,da,xa,P._result)})}else z(P,da,X,Z);return da}function l(X){if(X&&"object"==typeof X&&X.constructor===this)return X;var Z=new this(b);return e(Z,X),Z}function b(){}function g(X,Z,P){Z.constructor===X.constructor&&P===q&&Z.constructor.resolve===
l?function(da,ia){1===ia._state?h(da,ia._result):2===ia._state?t(da,ia._result):z(ia,void 0,function(xa){return e(da,xa)},function(xa){return t(da,xa)})}(X,Z):void 0===P?h(X,Z):"function"==typeof P?function(da,ia,xa){A(function(Ca){var Fa=!1,Ma=function(Sa,Ba,ca,ua){try{Sa.call(Ba,ca,ua)}catch(ya){return ya}}(xa,ia,function(Sa){Fa||(Fa=!0,ia!==Sa?e(Ca,Sa):h(Ca,Sa))},function(Sa){Fa||(Fa=!0,t(Ca,Sa))},Ca._label);!Fa&&Ma&&(Fa=!0,t(Ca,Ma))},da)}(X,Z,P):h(X,Z)}function e(X,Z){if(X===Z)t(X,new TypeError("You cannot resolve a promise with itself"));
else if(da=typeof(P=Z),null===P||"object"!==da&&"function"!==da)h(X,Z);else{P=void 0;try{P=Z.then}catch(ia){return void t(X,ia)}g(X,Z,P)}var P,da}function d(X){X._onerror&&X._onerror(X._result);v(X)}function h(X,Z){void 0===X._state&&(X._result=Z,X._state=1,0!==X._subscribers.length&&A(v,X))}function t(X,Z){void 0===X._state&&(X._state=2,X._result=Z,A(d,X))}function z(X,Z,P,da){var ia=X._subscribers,xa=ia.length;X._onerror=null;ia[xa]=Z;ia[xa+1]=P;ia[xa+2]=da;0===xa&&X._state&&A(v,X)}function v(X){var Z=
X._subscribers,P=X._state;if(0!==Z.length){for(var da=void 0,ia=void 0,xa=X._result,Ca=0;Ca<Z.length;Ca+=3)da=Z[Ca],ia=Z[Ca+P],da?y(P,da,ia,xa):ia(xa);X._subscribers.length=0}}function y(X,Z,P,da){var ia="function"==typeof P,xa=void 0,Ca=void 0,Fa=!0;if(ia){try{xa=P(da)}catch(Ma){Fa=!1,Ca=Ma}if(Z===xa)return void t(Z,new TypeError("A promises callback cannot return that same promise."))}else xa=da;void 0!==Z._state||(ia&&Fa?e(Z,xa):!1===Fa?t(Z,Ca):1===X?h(Z,xa):2===X&&t(Z,xa))}function C(X){X[Y]=
ba++;X._state=void 0;X._result=void 0;X._subscribers=[]}var F=Array.isArray?Array.isArray:function(X){return"[object Array]"===Object.prototype.toString.call(X)},x=0,u=void 0,w=void 0,A=function(X,Z){I[x]=X;I[x+1]=Z;2===(x+=2)&&(w?w(m):O())},E="undefined"!=typeof window?window:void 0,G=E||{};G=G.MutationObserver||G.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&
"undefined"!=typeof MessageChannel,I=Array(1E3),J,L,M,N,O=void 0;H?O=function(){return n.nextTick(m)}:G?(L=0,M=new G(m),N=document.createTextNode(""),M.observe(N,{characterData:!0}),O=function(){N.data=L=++L%2}):K?((J=new MessageChannel).port1.onmessage=m,O=function(){return J.port2.postMessage(0)}):O=void 0===E?function(){try{var X=Function("return this")().require("vertx");return void 0!==(u=X.runOnLoop||X.runOnContext)?function(){u(m)}:f()}catch(Z){return f()}}():f();var Y=Math.random().toString(36).substring(2),
ba=0,ha=function(){function X(Z,P){this._instanceConstructor=Z;this.promise=new Z(b);this.promise[Y]||C(this.promise);F(P)?(this.length=P.length,this._remaining=P.length,this._result=Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(P),0===this._remaining&&h(this.promise,this._result))):t(this.promise,Error("Array Methods must be provided an Array"))}return X.prototype._enumerate=function(Z){for(var P=0;void 0===this._state&&P<Z.length;P++)this._eachEntry(Z[P],
P)},X.prototype._eachEntry=function(Z,P){var da=this._instanceConstructor,ia=da.resolve;if(ia===l){var xa=ia=void 0,Ca=!1;try{ia=Z.then}catch(Fa){Ca=!0,xa=Fa}ia===q&&void 0!==Z._state?this._settledAt(Z._state,P,Z._result):"function"!=typeof ia?(this._remaining--,this._result[P]=Z):da===U?(da=new da(b),Ca?t(da,xa):g(da,Z,ia),this._willSettleAt(da,P)):this._willSettleAt(new da(function(Fa){return Fa(Z)}),P)}else this._willSettleAt(ia(Z),P)},X.prototype._settledAt=function(Z,P,da){var ia=this.promise;
void 0===ia._state&&(this._remaining--,2===Z?t(ia,da):this._result[P]=da);0===this._remaining&&h(ia,this._result)},X.prototype._willSettleAt=function(Z,P){var da=this;z(Z,void 0,function(ia){return da._settledAt(1,P,ia)},function(ia){return da._settledAt(2,P,ia)})},X}(),U=function(){function X(Z){this[Y]=ba++;this._result=this._state=void 0;this._subscribers=[];if(b!==Z){if("function"!=typeof Z)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof X)(function(P,da){try{da(function(ia){e(P,ia)},function(ia){t(P,ia)})}catch(ia){t(P,ia)}})(this,Z);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return X.prototype["catch"]=function(Z){return this.then(null,Z)},X.prototype["finally"]=function(Z){var P=this.constructor;return"function"==typeof Z?this.then(function(da){return P.resolve(Z()).then(function(){return da})},function(da){return P.resolve(Z()).then(function(){throw da;
})}):this.then(Z,Z)},X}();return U.prototype.then=q,U.all=function(X){return(new ha(this,X)).promise},U.race=function(X){var Z=this;return F(X)?new Z(function(P,da){for(var ia=X.length,xa=0;xa<ia;xa++)Z.resolve(X[xa]).then(P,da)}):new Z(function(P,da){return da(new TypeError("You must pass an array to race."))})},U.resolve=l,U.reject=function(X){var Z=new this(b);return t(Z,X),Z},U._setScheduler=function(X){w=X},U._setAsap=function(X){A=X},U._asap=A,U.polyfill=function(){var X=void 0;if(void 0!==
r)X=r;else if("undefined"!=typeof self)X=self;else try{X=Function("return this")()}catch(da){throw Error("polyfill failed because global object is unavailable in this environment");}var Z=X.Promise;if(Z){var P=null;try{P=Object.prototype.toString.call(Z.resolve())}catch(da){}if("[object Promise]"===P&&!Z.cast)return}X.Promise=U},U.Promise=U,U}()}).call(this,k(189),k(170))},30:function(a,c,k){function n(I){return I.reduce(function(J,L){return L&&L.relatedItems?J.concat(L.relatedItems.map(function(M){return M})):
J},[])}function r(I,J,L){return I(J,{query:Object(q.a)({f:"json"},L)}).then(function(M){return M.data})}function f(I,J){void 0===J&&(J=100);for(var L=[],M=0;M<Math.ceil(I.length/J);M++)L.push(I.slice(M*J,(M+1)*J));return L.filter(function(N){return 0<N.length})}function m(I){var J=I.itemIds,L=I.request,M=I.groupIds,N=I.portal.restUrl+"/content/itemsgroups";return new l.Promise(function(O,Y){L(N,{method:"get",query:{f:"json",items:J,groups:M}}).then(function(ba){O(ba.data)},Y)})}k.d(c,"u",function(){return b});
k.d(c,"n",function(){return g});k.d(c,"h",function(){return e});k.d(c,"e",function(){return d});k.d(c,"f",function(){return h});k.d(c,"j",function(){return t});k.d(c,"o",function(){return z});k.d(c,"l",function(){return v});k.d(c,"k",function(){return y});k.d(c,"m",function(){return C});k.d(c,"c",function(){return F});k.d(c,"d",function(){return x});k.d(c,"r",function(){return u});k.d(c,"s",function(){return w});k.d(c,"t",function(){return A});k.d(c,"g",function(){return E});k.d(c,"p",function(){return G});
k.d(c,"q",function(){return H});k.d(c,"v",function(){return r});k.d(c,"a",function(){return f});k.d(c,"i",function(){return m});k.d(c,"b",function(){return K});var q=k(0),l=k(28),b=function(I){return function(J,L){return I({url:J,content:L.query},{usePost:"post"===L.method}).then(function(M){return{data:M}})}},g=function(I,J,L){return r(I,J.restUrl+"/portals/self",{culture:L,"default":!0})},e=function(I,J,L){return r(I,J.restUrl+"/content/items/"+L+"/data")},d=function(I,J,L,M){return r(I,J.restUrl+
"/community/groups",Object(q.a)({q:L},M))},h=function(I,J,L){return r(I,J.restUrl+"/community/groups/"+L+"/categorySchema")},t=function(I,J,L){return r(I,J.restUrl+"/portals/"+(L||J.id)+"/categorySchema")},z=function(I,J){return r(I,J.restUrl+"/portals/"+J.id+"/servers")},v=function(I,J,L,M){return I(J.restUrl+"/portals/"+(L||J.id)+"/collaborationsSummary",M)},y=function(I,J,L,M){return I(J.restUrl+"/portals/"+(L||J.id)+"/collaboratedItems",M)},C=function(I,J,L){return r(I,location.protocol+"//"+
J.portalHostname+"/sharing/rest/portals/"+(L||"self"))},F=function(I,J,L){return I(J.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+J.id+" AND access:public",num:100,start:L||1,sortField:"title",sortOrder:"asc"}}).then(function(M){return M.data.total>M.data.start+M.data.num?F(I,J,M.data.start+M.data.num).then(function(N){return Object(q.a)(Object(q.a)({},N),{data:Object(q.a)(Object(q.a)({},N.data),{results:M.data.results.concat(N.data.results)})})}):M})},x=function(I,J,L,M){return I(J.restUrl+
"/community/users/"+L+"/provisionedListings",{query:{f:"json",num:100,start:M||1}}).then(function(N){var O=l.Promise.all(N.data.provisionedListings.filter(function(ba){return ba.itemId}).map(function(ba){return(new l.Promise(function(ha,U){I(J.restUrl+"/content/items/"+ba.itemId,{method:"get",query:{f:"json"}}).then(function(X){ha(X.data)},U)}))["catch"](function(ha){return 0})})),Y=N.data.provisionedListings.map(function(ba){return r(I,J.restUrl+"/content/items/"+(ba.id||ba.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(ha){return ha},
function(ha){})});return N.data.total>N.data.start+N.data.num?x(I,J,L,N.data.start+N.data.num).then(function(ba){return l.Promise.all([O].concat(Y)).then(function(ha){return ha[0].results.concat(n(ha.slice(1))).concat(ba)})}):l.Promise.all([O].concat(Y)).then(function(ba){return ba[0].filter(function(ha){return void 0!==ha}).concat(n(ba.slice(1)))})})},u=function(I,J,L){return r(I,J.restUrl+"/community/users/"+(L||J.user.username))},w=function(I,J,L){return r(I,J.restUrl+"/content/users/"+(L||J.user.username),
{num:1})},A=function(I,J,L){return r(I,J.restUrl+"/content/groups/"+L)},E=function(I,J,L){return r(I,J.restUrl+"/community/groups",L)},G=function(I,J){return r(I,J.restUrl+"/portals/self/settings")},H=function(I,J){return r(I,J.restUrl+"/portals/self/trustedOrgs",{num:100})},K=function(I,J){return void 0===J&&(J=","),I.map(function(L){return L.id}).join(J)}},709:function(a,c){a.exports=B},982:function(a,c,k){k.r(c);k.d(c,"InfoBanner",function(){return q});var n=k(0),r=k(16);a=k(709);var f=k.n(a),
m=k(30),q=function(){function l(b){var g=this;this.options=b;var e=b.bottomContainer;(this.topContainer=b.topContainer,this.bottomContainer=e,b.bannerConfig)?this.setupBanners(b.bannerConfig):b.request&&b.portal&&b.apiVersion&&(e=4===b.apiVersion?b.request:this.shimmedRequest.bind(this),b=4===b.apiVersion?b.portal:Object(n.a)(Object(n.a)({},b.portal),{restUrl:b.portal.portalUrl.slice(0,-1),credential:b.portal.user&&b.portal.user.credential?b.portal.user.credential:void 0}),Object(m.p)(e,b).then(function(d){g.setupBanners(d.informationalBanner)}))}
return l.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&this.bottomContainer.parentNode.removeChild(this.bottomContainer))},l.prototype.setupBanners=function(b){b&&b.enabled&&(this.topContainer&&
(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",b)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",b)))},l.prototype.createProjector=function(b,g,e,d){var h={key:g,position:e,bannerConfig:d};return this.store=Object(r.createStore)(function(t,z){z.type;z.payload;return Object(n.a)({},h)},h),Object(r.createProjector)(this.store,function(t){return t(f.a,Object(n.a)({},h))},b)},l.prototype.shimmedRequest=
function(b,g){var e=Object(n.a)({},g.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<b.indexOf(this.options.portal.restUrl)&&(e.token=this.options.portal.user.credential.token),this.options.request({url:b,content:g.query},{usePost:"post"===g.method}).then(function(d){return{data:d}})},l}()}})})},"arcgis-components/Component":function(){define(function(){return function(D){function B(c){if(a[c])return a[c].exports;var k=a[c]={i:c,l:!1,exports:{}};
return D[c].call(k.exports,k,k.exports,B),k.l=!0,k.exports}var a={};return B.m=D,B.c=a,B.d=function(c,k,n){B.o(c,k)||Object.defineProperty(c,k,{enumerable:!0,get:n})},B.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},B.t=function(c,k){if((1&k&&(c=B(c)),8&k)||4&k&&"object"==typeof c&&c&&c.__esModule)return c;var n=Object.create(null);if(B.r(n),Object.defineProperty(n,"default",
{enumerable:!0,value:c}),2&k&&"string"!=typeof c)for(var r in c)B.d(n,r,function(f){return c[f]}.bind(null,r));return n},B.n=function(c){var k=c&&c.__esModule?function(){return c["default"]}:function(){return c};return B.d(k,"a",k),k},B.o=function(c,k){return Object.prototype.hasOwnProperty.call(c,k)},B.p="",B(B.s=809)}({0:function(D,B,a){function c(b,g){function e(){this.constructor=b}if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");
q(b,g);b.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)}function k(b,g){var e={},d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&0>g.indexOf(d)&&(e[d]=b[d]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(d=Object.getOwnPropertySymbols(b);h<d.length;h++)0>g.indexOf(d[h])&&Object.prototype.propertyIsEnumerable.call(b,d[h])&&(e[d[h]]=b[d[h]])}return e}function n(b,g,e,d){var h,t=arguments.length,z=3>t?g:null===d?d=Object.getOwnPropertyDescriptor(g,
e):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(b,g,e,d);else for(var v=b.length-1;0<=v;v--)(h=b[v])&&(z=(3>t?h(z):3<t?h(g,e,z):h(g,e))||z);return 3<t&&z&&Object.defineProperty(g,e,z),z}function r(b,g,e,d){return new (e||(e=Promise))(function(h,t){function z(C){try{y(d.next(C))}catch(F){t(F)}}function v(C){try{y(d["throw"](C))}catch(F){t(F)}}function y(C){var F;C.done?h(C.value):(F=C.value,F instanceof e?F:new e(function(x){x(F)})).then(z,v)}y((d=d.apply(b,
g||[])).next())})}function f(b,g){function e(y){return function(C){return function(F){if(d)throw new TypeError("Generator is already executing.");for(;v;)try{if(d=1,h&&(t=2&F[0]?h["return"]:F[0]?h["throw"]||((t=h["return"])&&t.call(h),0):h.next)&&!(t=t.call(h,F[1])).done)return t;switch(h=0,t&&(F=[2&F[0],t.value]),F[0]){case 0:case 1:t=F;break;case 4:return v.label++,{value:F[1],done:!1};case 5:v.label++;h=F[1];F=[0];continue;case 7:F=v.ops.pop();v.trys.pop();continue;default:if(!(t=v.trys,(t=0<t.length&&
t[t.length-1])||6!==F[0]&&2!==F[0])){v=0;continue}if(3===F[0]&&(!t||F[1]>t[0]&&F[1]<t[3]))v.label=F[1];else if(6===F[0]&&v.label<t[1])v.label=t[1],t=F;else if(t&&v.label<t[2])v.label=t[2],v.ops.push(F);else{t[2]&&v.ops.pop();v.trys.pop();continue}}F=g.call(b,v)}catch(x){F=[6,x],h=0}finally{d=t=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([y,C])}}var d,h,t,z,v={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return z={next:e(0),"throw":e(1),"return":e(2)},
"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z}function m(b,g){for(var e=0,d=g.length,h=b.length;e<d;e++,h++)b[h]=g[e];return b}a.d(B,"d",function(){return c});a.d(B,"a",function(){return l});a.d(B,"f",function(){return k});a.d(B,"c",function(){return n});a.d(B,"b",function(){return r});a.d(B,"e",function(){return f});a.d(B,"g",function(){return m});var q=function(b,g){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,
d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(e[h]=d[h])})(b,g)},l=function(){return(l=Object.assign||function(b){for(var g,e=1,d=arguments.length;e<d;e++)for(var h in g=arguments[e])Object.prototype.hasOwnProperty.call(g,h)&&(b[h]=g[h]);return b}).apply(this,arguments)};Object.create;Object.create},15:function(D,B,a){function c(n){return function f(){for(var m=this,q=[],l=0;l<arguments.length;l++)q[l]=arguments[l];return q.length>=n.length?n.call.apply(n,Object(k.g)([this],q)):function(){for(var b=
[],g=0;g<arguments.length;g++)b[g]=arguments[g];return f.call.apply(f,Object(k.g)(Object(k.g)([m],q),b))}}}a.d(B,"a",function(){return c});var k=a(0)},441:function(D,B,a){!function(c){var k=[],n=function(A,E){var G={};return Object.keys(A).forEach(function(H){G[H]=A[H]}),E&&Object.keys(E).forEach(function(H){G[H]=E[H]}),G},r=function(A,E){return A.vnodeSelector===E.vnodeSelector&&(A.properties&&E.properties?A.properties.key===E.properties.key&&A.properties.bind===E.properties.bind:!A.properties&&
!E.properties)},f=function(A){if("string"!=typeof A)throw Error("Style values must be strings");},m=function(A,E,G,H){var K=A[E];if(""!==K.vnodeSelector){var I=K.properties;if(!(I&&(void 0===I.key?I.bind:I.key)))for(I=0;I<A.length;I++)if(I!==E&&r(A[I],K))throw Error(G.vnodeSelector+" had a "+K.vnodeSelector+" child "+("added"===H?H:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},q=[],l=!1,b=function(A){(A.children||[]).forEach(b);
A.properties&&A.properties.afterRemoved&&A.properties.afterRemoved.apply(A.properties.bind||A.properties,[A.domNode])},g=function(){l=!1;q.forEach(b);q.length=0},e=function(A){q.push(A);l||(l=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(g,{timeout:16}):setTimeout(g,16))},d=function(A){var E=A.domNode;if(A.properties){var G=A.properties.exitAnimation;if(G)return E.style.pointerEvents="none",void G(E,function(){E.parentNode&&(E.parentNode.removeChild(E),e(A))},
A.properties)}E.parentNode&&(E.parentNode.removeChild(E),e(A))},h=function(A,E,G){!function(H,K,I){if(K)for(var J=0;J<K.length;J++)t(K[J],H,void 0,I)}(A,E.children,G);E.text&&(A.textContent=E.text);(function(H,K,I){if(K)for(var J=I.eventHandlerInterceptor,L=Object.keys(K),M=L.length,N=function(Y){var ba,ha=L[Y];Y=K[ha];if("className"===ha)throw Error('Property "className" is not supported, use "class".');if("class"===ha)z(H,Y,!0);else if("classes"===ha){var U=Object.keys(Y),X=U.length;for(ha=0;ha<
X;ha++){var Z=U[ha];Y[Z]&&H.classList.add(Z)}}else if("styles"===ha)for(U=Object.keys(Y),X=U.length,ha=0;ha<X;ha++){Z=U[ha];var P=Y[Z];P&&(f(P),I.styleApplyer(H,Z,P))}else"key"!==ha&&null!=Y&&(U=typeof Y,"function"===U?(0===ha.lastIndexOf("on",0)&&(J&&(Y=J(ha,Y,H,K)),"oninput"===ha&&(ba=Y,Y=function(da){ba.apply(this,[da]);da.target["oninput-value"]=da.target.value})),H[ha]=Y):"http://www.w3.org/2000/svg"===I.namespace?"href"===ha?H.setAttributeNS("http://www.w3.org/1999/xlink",ha,Y):H.setAttribute(ha,
Y):"string"===U&&"value"!==ha&&"innerHTML"!==ha?H.setAttribute(ha,Y):H[ha]=Y)},O=0;O<M;O++)N(O)})(A,E.properties,G);E.properties&&E.properties.afterCreate&&E.properties.afterCreate.apply(E.properties.bind||E.properties,[A,G,E.vnodeSelector,E.properties,E.children])},t=function(A,E,G,H){var K=0,I=A.vnodeSelector,J=E.ownerDocument;if(""===I){var L=A.domNode=J.createTextNode(A.text);void 0!==G?E.insertBefore(L,G):E.appendChild(L)}else{for(var M=0;M<=I.length;++M){var N=I.charAt(M);if(M===I.length||"."===
N||"#"===N)N=I.charAt(K-1),K=I.slice(K,M),"."===N?L.classList.add(K):"#"===N?L.id=K:("svg"===K&&(H=n(H,{namespace:"http://www.w3.org/2000/svg"})),void 0!==H.namespace?L=A.domNode=J.createElementNS(H.namespace,K):(L=A.domNode=A.domNode||J.createElement(K),"input"===K&&A.properties&&void 0!==A.properties.type&&L.setAttribute("type",A.properties.type)),void 0!==G?E.insertBefore(L,G):L.parentNode!==E&&E.appendChild(L)),K=M+1}h(L,A,H)}},z=function(A,E,G){E&&E.split(" ").forEach(function(H){H&&A.classList.toggle(H,
G)})};var v=function(A,E,G){var H=A.domNode,K=!1;if(A===E)return!1;var I=!1;if(""===E.vnodeSelector){if(E.text!==A.text)return A=H.ownerDocument.createTextNode(E.text),H.parentNode.replaceChild(A,H),E.domNode=A,K=!0;E.domNode=H}else 0===E.vnodeSelector.lastIndexOf("svg",0)&&(G=n(G,{namespace:"http://www.w3.org/2000/svg"})),A.text!==E.text&&(I=!0,void 0===E.text?H.removeChild(H.firstChild):H.textContent=E.text),E.domNode=H,I=function(J,L,M,N,O){if(M===N)return!1;N=N||k;for(var Y,ba=(M=M||k).length,
ha=N.length,U=Y=0,X=!1;U<ha;){var Z=Y<ba?M[Y]:void 0,P=N[U];if(void 0!==Z&&r(Z,P))X=v(Z,P,O)||X,Y++;else{a:{Z=M;var da=P;if(""!==da.vnodeSelector)for(var ia=Y+1;ia<Z.length;ia++)if(r(Z[ia],da)){Z=ia;break a}Z=-1}if(0<=Z){for(;Y<Z;Y++)d(M[Y]),m(M,Y,J,"removed");X=v(M[Z],P,O)||X;Y=Z+1}else t(P,L,Y<ba?M[Y].domNode:void 0,O),P.properties&&(Z=P.properties.enterAnimation)&&Z(P.domNode,P.properties),m(N,U,J,"added")}U++}if(ba>Y)for(;Y<ba;Y++)d(M[Y]),m(M,Y,J,"removed");return X}(E,H,A.children,E.children,
G)||I,I=function(J,L,M,N){if(M){for(var O=!1,Y=Object.keys(M),ba=Y.length,ha=0;ha<ba;ha++){var U=Y[ha],X=M[U],Z=L[U];if("class"===U)Z!==X&&(z(J,Z,!1),z(J,X,!0));else if("classes"===U){var P=J.classList,da=Object.keys(X),ia=da.length;for(U=0;U<ia;U++){var xa=da[U],Ca=!!X[xa];Ca!==!!Z[xa]&&(O=!0,Ca?P.add(xa):P.remove(xa))}}else if("styles"===U)for(P=Object.keys(X),da=P.length,U=0;U<da;U++)ia=P[U],xa=X[ia],xa!==Z[ia]&&(O=!0,xa?(f(xa),N.styleApplyer(J,ia,xa)):N.styleApplyer(J,ia,""));else(X||"string"!=
typeof Z||(X=""),"value"===U)?(P=J[U],P!==X&&(J["oninput-value"]?P===J["oninput-value"]:X!==Z)&&(J[U]=X,J["oninput-value"]=void 0),X!==Z&&(O=!0)):X!==Z&&(Z=typeof X,"function"===Z&&N.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===N.namespace?"href"===U?J.setAttributeNS("http://www.w3.org/1999/xlink",U,X):J.setAttribute(U,X):"string"===Z&&"innerHTML"!==U?"role"===U&&""===X?J.removeAttribute(U):J.setAttribute(U,X):J[U]!==X&&(J[U]=X),O=!0))}return O}}(H,A.properties,E.properties,G)||I,E.properties&&
E.properties.afterUpdate&&E.properties.afterUpdate.apply(E.properties.bind||E.properties,[H,G,E.vnodeSelector,E.properties,E.children]);return I&&E.properties&&E.properties.updateAnimation&&E.properties.updateAnimation(H,E.properties,A.properties),K};var y=function(A,E){return{getLastRender:function(){return A},update:function(G){if(A.vnodeSelector!==G.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
var H=A;A=G;v(H,G,E)},domNode:A.domNode}},C={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(A,E,G){"-"===E.charAt(0)?A.style.setProperty(E,G):A.style[E]=G}},F={create:function(A,E){return E=n(C,E),t(A,document.createElement("div"),void 0,E),y(A,E)},append:function(A,E,G){return G=n(C,G),t(E,A,void 0,G),y(E,G)},insertBefore:function(A,E,G){return G=n(C,G),t(E,A.parentNode,A,G),y(E,G)},merge:function(A,E,G){return G=n(C,G),E.domNode=A,h(A,E,G),y(E,
G)},replace:function(A,E,G){return G=n(C,G),t(E,A.parentNode,A,G),A.parentNode.removeChild(A),y(E,G)}},x=function(A,E,G){for(var H=0,K=E.length;H<K;H++){var I=E[H];Array.isArray(I)?x(A,I,G):null!=I&&!1!==I&&("string"==typeof I&&(I={vnodeSelector:"",properties:void 0,children:void 0,text:I.toString(),domNode:null}),G.push(I))}};var u=Array.prototype.find?function(A,E){return A.find(E)}:function(A,E){return A.filter(E)[0]};var w=function(A,E){var G=A;return E.forEach(function(H){G=G&&G.children?u(G.children,
function(K){return K.domNode===H}):void 0}),G};c.createCache=function(){var A,E;return{invalidate:function(){A=E=void 0},result:function(G,H){if(A)for(var K=0;K<G.length;K++)A[K]!==G[K]&&(E=void 0);return E||(E=H(),A=G),E}}};c.createMapping=function(A,E,G){var H=[],K=[];return{results:K,map:function(I){for(var J=I.map(A),L=K.slice(),M=0,N=0;N<I.length;N++){var O=I[N],Y=J[N];if(Y===H[M])K[N]=L[M],G(O,L[M],N),M++;else{for(var ba=!1,ha=1;ha<H.length+1;ha++){var U=(M+ha)%H.length;if(H[U]===Y){K[N]=L[U];
G(I[N],L[U],N);M=U+1;ba=!0;break}}ba||(K[N]=E(O,N))}}K.length=I.length;H=J}}};c.createProjector=function(A){var E,G,H=n(C,A),K=H.performanceLogger,I=!0,J=!1,L=[],M=[],N=function(Y,ba,ha){H.eventHandlerInterceptor=function(X,Z,P){function da(ia){P("domEvent",ia);for(var xa=Z(),Ca=ia.currentTarget,Fa=xa.domNode,Ma=[];Ca&&Ca!==Fa;)Ma.push(Ca),Ca=Ca.parentNode;Ma.reverse();var Sa;xa=w(xa.getLastRender(),Ma);return X.scheduleRender(),xa&&(Sa=xa.properties["on"+ia.type].apply(xa.properties.bind||this,arguments)),
P("domEventProcessed",ia),Sa}return function(ia,xa,Ca,Fa){return da}}(E,function(){return U},K);var U=Y(ba,ha(),H);L.push(U);M.push(ha)},O=function(){if(G=void 0,I){I=!1;K("renderStart",void 0);for(var Y=0;Y<L.length;Y++){var ba=M[Y]();K("rendered",void 0);L[Y].update(ba);K("patched",void 0)}K("renderDone",void 0);I=!0}};return E={renderNow:O,scheduleRender:function(){G||J||(G=requestAnimationFrame(O))},stop:function(){G&&(cancelAnimationFrame(G),G=void 0);J=!0},resume:function(){J=!1;I=!0;E.scheduleRender()},
append:function(Y,ba){N(F.append,Y,ba)},insertBefore:function(Y,ba){N(F.insertBefore,Y,ba)},merge:function(Y,ba){N(F.merge,Y,ba)},replace:function(Y,ba){N(F.replace,Y,ba)},detach:function(Y){for(var ba=0;ba<M.length;ba++)if(M[ba]===Y)return M.splice(ba,1),L.splice(ba,1)[0];throw Error("renderFunction was not found");}}};c.dom=F;c.h=function(A,E,G){if(Array.isArray(E))G=E,E=void 0;else if(E&&("string"==typeof E||E.vnodeSelector)||G&&("string"==typeof G||G.vnodeSelector))throw Error("h called with invalid arguments");
var H,K;return G&&1===G.length&&"string"==typeof G[0]?H=G[0]:G&&(x(A,G,K=[]),0===K.length&&(K=void 0)),{vnodeSelector:A,properties:E,children:K,text:""===H?void 0:H,domNode:null}};Object.defineProperty(c,"__esModule",{value:!0})}(B)},5:function(D,B,a){function c(b){return 0===Object.keys(b).length&&b.constructor===Object}function k(b){return null!=b}function n(b,g){return q.apply(null,arguments)}function r(b,g){return l.apply(null,arguments)}a.d(B,"b",function(){return c});a.d(B,"a",function(){return k});
a.d(B,"e",function(){return m});a.d(B,"c",function(){return n});a.d(B,"d",function(){return r});var f=a(0);D=a(15);var m=Object(D.a)(function(b,g){var e=Object(f.a)({},g);return delete e[b],e}),q=Object(D.a)(function(b,g){return Object.keys(g).reduce(function(e,d){return e[d]=b(g[d],d,g),e},{})}),l=Object(D.a)(function(b,g){return Object.keys(g).reduce(function(e,d){return b(g[d],d,g)&&(e[d]=g[d]),e},{})})},63:function(D,B,a){function c(){for(var k=[],n=0;n<arguments.length;n++)k[n]=arguments[n];
return function(r){return k.reduceRight(function(f,m){return m(f)},r)}}a.d(B,"a",function(){return c})},809:function(D,B,a){function c(z,v,y,C){var F=new h({key:"root"},v);z&&(F.store=z);var x=Object(b.createProjector)(C);v=Object(l.a)(Object(l.a)({},x),{append:function(u){return x.append(u,function(){return F.render.bind(F)(F.tsx.bind(F))})}});return v.append(y),z&&z.subscribe(function(){return x.scheduleRender()}),v}function k(z,v){return function(y){return function(C,F){return function(x,u){return F(y,
Object(l.a)(Object(l.a)(Object(l.a)({},C),z(u(),C)),v(x,C)))}}}}function n(){for(var z=[],v=0;v<arguments.length;v++)z[v]=arguments[v];return function(y){return function(C,F){var x=y(C,F),u=g.a,w=x.dispatch,A=z.map(function(E){return E({dispatch:function(G){return w(G)},getState:x.getState})});return w=u.apply(void 0,A)(x.dispatch),Object(l.a)(Object(l.a)({},x),{dispatch:w})}}}function r(z){return function(v){return function(y,C){return v(function(F,x){if("@@shunt/SETSTATE"===x.type)return x.payload;
var u=y(F,x);return-1===x.type.indexOf("@@component/INIT")&&z(x,u),u},C)}}}function f(z){return function(v){v.dispatch;var y=v.getState;return function(C){return function(F){var x=C(F);return z(F,y()),x}}}}function m(z){var v=Object(e.d)(function(y){return"function"==typeof y},z);return function(y,C){return void 0===y&&(y={}),Object(e.c)(function(F,x){return F(y[x],C)},v)}}function q(z,v){var y=v,C=[],F={dispatch:function(x){return y=z(y,x),C.forEach(function(u){return u()}),x},subscribe:function(x){return C.push(x),
function(){C.splice(C.indexOf(x),1)}},getState:function(){return y}};return F.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),F}a.r(B);a.d(B,"createProjector",function(){return c});a.d(B,"Component",function(){return d});a.d(B,"RootComponent",function(){return h});a.d(B,"connect",function(){return k});a.d(B,"applyMiddleware",function(){return n});a.d(B,"shunt",function(){return r});a.d(B,"thunk",function(){return t});a.d(B,"addListener",function(){return f});a.d(B,"combineReducers",
function(){return m});a.d(B,"createStore",function(){return q});var l=a(0),b=a(441),g=a(63),e=a(5),d=function(){function z(v){this.childComponents={};this.state={};this.props=v}return z.prototype.componentDidConnect=function(){},z.prototype.componentWillReceiveProps=function(v){},z.prototype.setState=function(v){this.state=Object(l.a)(Object(l.a)({},this.state),v);this.store&&this.store.dispatch({type:this.props.key+"_COMPONENT_STATE_UPDATE"})},z.prototype.tsx=function(v,y,C){var F=Array.prototype.slice.call(arguments).slice(2);
if("string"==typeof v)var x=b.h.apply(this,[v,y,F]);else if(v.prototype&&v.prototype.constructor.name){var u=v;F=Object(l.a)(Object(l.a)({},y),{children:F});var w=this.childComponents[F.key];w?(w.componentWillReceiveProps(F),w.props=F,x=w.render(w.tsx.bind(w))):((w=this.childComponents[F.key]=new u(F)).store=this.store,w.componentDidConnect(),x=w.render(w.tsx.bind(w)))}else x=(u=v)(Object(l.a)(Object(l.a)({},y),{children:F}),this.tsx.bind(this));return"function"==typeof x?x(this.store.dispatch,this.store.getState):
x},z}(),h=function(z){function v(y,C){var F=z.call(this,y)||this;return F.renderRoot=C,F}return Object(l.d)(v,z),v.prototype.render=function(y){var C=this;return y(function(F,x){return C.renderRoot(x)})},v}(d);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var z=/function\s([^(]{1,})\(/.exec(this.toString());return z&&1<z.length?z[1].trim():""},set:function(z){}});var t=function(z){var v=z.dispatch,y=z.getState;return function(C){return function(F){return"function"==
typeof F?F(v,y):C(F)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(D){return function(B){function a(k){if(c[k])return c[k].exports;var n=c[k]={i:k,l:!1,exports:{}};return B[k].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var c={};return a.m=B,a.c=c,a.d=function(k,n,r){a.o(k,n)||Object.defineProperty(k,n,{enumerable:!0,get:r})},a.r=function(k){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"});Object.defineProperty(k,
"__esModule",{value:!0})},a.t=function(k,n){if((1&n&&(k=a(k)),8&n)||4&n&&"object"==typeof k&&k&&k.__esModule)return k;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:k}),2&n&&"string"!=typeof k)for(var f in k)a.d(r,f,function(m){return k[m]}.bind(null,f));return r},a.n=function(k){var n=k&&k.__esModule?function(){return k["default"]}:function(){return k};return a.d(n,"a",n),n},a.o=function(k,n){return Object.prototype.hasOwnProperty.call(k,n)},a.p="",a(a.s=
858)}({0:function(B,a,c){function k(g,e){function d(){this.constructor=g}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");l(g,e);g.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}function n(g,e){var d={},h;for(h in g)Object.prototype.hasOwnProperty.call(g,h)&&0>e.indexOf(h)&&(d[h]=g[h]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(h=Object.getOwnPropertySymbols(g);t<h.length;t++)0>
e.indexOf(h[t])&&Object.prototype.propertyIsEnumerable.call(g,h[t])&&(d[h[t]]=g[h[t]])}return d}function r(g,e,d,h){var t,z=arguments.length,v=3>z?e:null===h?h=Object.getOwnPropertyDescriptor(e,d):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)v=Reflect.decorate(g,e,d,h);else for(var y=g.length-1;0<=y;y--)(t=g[y])&&(v=(3>z?t(v):3<z?t(e,d,v):t(e,d))||v);return 3<z&&v&&Object.defineProperty(e,d,v),v}function f(g,e,d,h){return new (d||(d=Promise))(function(t,z){function v(F){try{C(h.next(F))}catch(x){z(x)}}
function y(F){try{C(h["throw"](F))}catch(x){z(x)}}function C(F){var x;F.done?t(F.value):(x=F.value,x instanceof d?x:new d(function(u){u(x)})).then(v,y)}C((h=h.apply(g,e||[])).next())})}function m(g,e){function d(C){return function(F){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;y;)try{if(h=1,t&&(z=2&x[0]?t["return"]:x[0]?t["throw"]||((z=t["return"])&&z.call(t),0):t.next)&&!(z=z.call(t,x[1])).done)return z;switch(t=0,z&&(x=[2&x[0],z.value]),x[0]){case 0:case 1:z=
x;break;case 4:return y.label++,{value:x[1],done:!1};case 5:y.label++;t=x[1];x=[0];continue;case 7:x=y.ops.pop();y.trys.pop();continue;default:if(!(z=y.trys,(z=0<z.length&&z[z.length-1])||6!==x[0]&&2!==x[0])){y=0;continue}if(3===x[0]&&(!z||x[1]>z[0]&&x[1]<z[3]))y.label=x[1];else if(6===x[0]&&y.label<z[1])y.label=z[1],z=x;else if(z&&y.label<z[2])y.label=z[2],y.ops.push(x);else{z[2]&&y.ops.pop();y.trys.pop();continue}}x=e.call(g,y)}catch(u){x=[6,u],t=0}finally{h=z=0}if(5&x[0])throw x[1];return{value:x[0]?
x[1]:void 0,done:!0}}([C,F])}}var h,t,z,v,y={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return v={next:d(0),"throw":d(1),"return":d(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v}function q(g,e){for(var d=0,h=e.length,t=g.length;d<h;d++,t++)g[t]=e[d];return g}c.d(a,"d",function(){return k});c.d(a,"a",function(){return b});c.d(a,"f",function(){return n});c.d(a,"c",function(){return r});c.d(a,"b",function(){return f});c.d(a,"e",function(){return m});
c.d(a,"g",function(){return q});var l=function(g,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var t in h)Object.prototype.hasOwnProperty.call(h,t)&&(d[t]=h[t])})(g,e)},b=function(){return(b=Object.assign||function(g){for(var e,d=1,h=arguments.length;d<h;d++)for(var t in e=arguments[d])Object.prototype.hasOwnProperty.call(e,t)&&(g[t]=e[t]);return g}).apply(this,arguments)};Object.create;Object.create},16:function(B,a){B.exports=
D},858:function(B,a,c){c.r(a);var k=c(0);B=function(n){function r(f){return n.call(this,f)||this}return Object(k.d)(r,n),r.prototype.render=function(f){var m=this.props.position,q=this.props.bannerConfig;return f("div",{classes:{"info-banner":!0,"info-banner--top":"top"===m,"info-banner--bottom":"bottom"===m},style:"background-color: "+q.bgColor+"; color: "+q.fontColor},f("p",{"class":"info-banner-text"},q.text))},r}(c(16).Component);a["default"]=B}})})},"arcgisonline/pages/components/ConfirmDialog":function(){define(["require",
"exports","preact","preact/hooks"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});B["default"]=function(k){var n=k.autoCloseOnOk,r=k.hideCancel,f=k.hideClose,m=k.renderHtmlDescription,q=k.strings,l=k.onOk,b=k.onCancel,g=k.width;g=void 0===g?"m":g;k=k.okColor;k=void 0===k?"blue":k;var e=c.useState(!0),d=e[0],h=e[1];e=c.useState(!1);var t=e[0],z=e[1];e=c.useRef();var v=function(){t||(h(!1),b())};return a.h("calcite-modal",{active:d,"intl-close":q.close,role:"dialog","aria-modal":"true",
ref:e,"data-test":"dialog",disableCloseButton:t||f,disableEscape:t,"aria-label":q.title,oncalciteModalClose:v,width:g,"disable-outside-close":!0},a.h("h3",{slot:"header","class":"font-size-2 trailer-0","data-test":"title"},q.title),t?a.h("calcite-loader",{slot:"content","class":"leader-half trailer-half",active:t,label:"processing-loader",text:q.processing}):a.h("div",{slot:"content","class":"position-relative leader-half trailer-half","data-test":"description"},m?a.h("div",{dangerouslySetInnerHTML:{__html:q.description}}):
q.description),a.h("calcite-button",{slot:"primary",width:"full",color:k,appearance:"solid",disabled:t,onClick:function(){n?(h(!1),l()):(z(!0),l(function(){h(!1)}))},"data-test":"ok"},q.ok),r?null:a.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",color:"blue",onClick:v,"data-test":"cancel",disabled:t},null===q||void 0===q?void 0:q.cancel))}})},"arcgisonline/pages/components/StatusBanner":function(){define(["require","exports","preact"],function(D,B,a){Object.defineProperty(B,
"__esModule",{value:!0});B["default"]=function(c){var k=c.strings,n=c.link,r=c.onAction;c=function(f){if(!f.defaultPrevented&&"status-banner__link"===f.target.id)switch(f.key){case "Enter":null===r||void 0===r?void 0:r(f),f.preventDefault()}};return a.h("div",{"class":"status-banner status-banner__danger text-center"},a.h("div",{"class":"status-banner__wrapper leader-half padding-trailer-half grid-container"},a.h("calcite-icon",{icon:"exclamation-mark-triangle","class":"status-banner-icon__danger",
scale:"s"}),a.h("span",{"class":"status-banner__title margin-left-half margin-right-half"},a.h("strong",null,k.title)),a.h("span",{"class":"status-banner__message margin-right-half"},k.message),k.learnMore&&n?a.h("a",{"class":"status-banner_link",href:n,target:"_blank",id:"status-banner__link"},k.learnMore," ",a.h("calcite-icon",{icon:"launch",scale:"s","class":"status-banner__link-icon margin-left-half margin-right-half"})):null,k.action&&r?a.h("a",{"class":"status-banner_link",onClick:r,onKeyUp:c,
id:"status-banner__link",tabIndex:0},k.action):null))}})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,
d,h,t,z,v,y,C){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);return function(){function F(u){var w,A,E,G,H,K,I;this.portalUser=null!==(A=null===(w=this.portal)||void 0===w?void 0:
w.getPortalUser())&&void 0!==A?A:null;this.title=null!==(E=this.title)&&void 0!==E?E:"";this.snippet=null!==(G=this.snippet)&&void 0!==G?G:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(K=this.screenshots)||void 0===K?0:K.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?this.thumbnailUrl:this.itemDataUrl;
this.sourceLabel=this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();h["default"].mixin(this,{extent:c["default"].extentToString(this.extent)});h["default"].mixin(this,r["default"].getItemInfo(this));(null===(I=this.portal)||void 0===I?0:I.isPortal)&&"Web Mapping Application"===
this.type&&-1<this.typeKeywords.indexOf("Story Map")&&(this.isRetiredStoryMap=!0);this.checkIsRetiredApp()}var x=F;F.prototype.postscript=function(){};F.prototype.getOwnerProfile=function(u,w){var A=this,E=this.owner,G=new e["default"];this.ownerProfile?G.resolve(this.ownerProfile):(this.isOwner?(E=new e["default"],E.resolve(this.portalUser)):E=this.portal.getUserProfile(E),E.then(function(H){A.isOwner||H.orgId===A.portal.id||(w=u=!1);t["default"]({folders:A.isAdmin&&w?H.getFolders():null,tags:A.isAdmin&&
u?H.getTags():null,contentTags:A.isAdmin&&u?H.getContentTags():null}).then(function(K){A.ownerProfile=H;A.itemOwner=H;A._setAdminFlags();G.resolve(H)},function(K){A.ownerProfile=H;A.itemOwner=H;A._setAdminFlags();G.resolve(H)})}));return G};F.prototype.getComments=function(u,w){var A=this,E=new e["default"];this.commentsEnabled&&this.numComments?n["default"].fetchComments(u,w,this.commentsInfo).then(function(G){A.commentsInfo=h["default"].mixin(A.commentsInfo,G.commentsInfo);A.comments=A.commentsInfo.comments;
E.resolve(A.comments)}):E.resolve([]);return E};F.prototype.getRelatedItems=function(u,w){var A=this,E={WMA2Code:1,MobileApp2Code:1},G,H,K=new e["default"];this.relatedItems=this.relatedItems||{};v["default"].isDefined(this.relatedItems[u+"_"+w])?K.resolve(this.relatedItems[u+"_"+w].slice(0)):l["default"].request({url:this.itemUrl+"/relatedItems",content:{relationshipType:u,direction:w}}).then(function(I){G=(null===I||void 0===I?0:I.relatedItems)?I.relatedItems:null!==I&&void 0!==I?I:[];G=G.map(function(J){return new x(a.__assign(a.__assign({},
J),{portal:A.portal}))});H=u in E?(G||[]).shift():G||[];A.relatedItems[u+"_"+w]=H;K.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(I){K.reject(I)});return K};F.prototype.getSourceData=function(){var u=this,w=new e["default"],A="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type||"OGCFeatureServer"===this.type,E="Map Service"===this.type,G=A?"Service2Service":this.isRouteLayer?"Service2Route":"Service2Data",H="Service2Service"===G||"Service2Route"===G?"reverse":
"forward",K;-1<this.typeKeywords.indexOf("Bulk Published Service")&&(G="DataStore2BPService",H="reverse");this.sourceData?w.resolve(this.sourceData):this.getRelatedItems(G,H).then(function(I){K=(null===I||void 0===I?0:I.length)?I.shift():null;A?E&&!u._isView(K)||!K?u.getRelatedItems("Service2Data","forward").then(function(J){J=(null===J||void 0===J?0:J.length)?J.shift():K;w.resolve(J)}):w.resolve(K):w.resolve(K)},function(I){w.reject(I)});return w};F.prototype._isView=function(u){return u&&f["default"].includes(u.typeKeywords,
"View Service")||!1};F.prototype.getResultData=function(){var u=new e["default"],w=this.isHostedService?"Service2Service":"Service2Data";this.getRelatedItems(w,"Service2Service"===w&&"Feed"!==this.type?"forward":"reverse").then(function(A){return u.resolve((null===A||void 0===A?0:A.length)?A:null)});return u};F.prototype.getThumbnail=function(u){var w=this,A=new e["default"];this._fetchingThumbnail?setTimeout(function(){w.getThumbnail(!1).then(function(E){w._fetchingThumbnail=!1;A.resolve(E)},function(E){w._fetchingThumbnail=
!1;A.resolve(void 0)})},50):(this._fetchingThumbnail=!0,k["default"](this,u).then(function(E){w._fetchingThumbnail=!1;E.dataURL?w._updateThumbnail(E).then(function(G){w.set("thumbnailUrl",G);A.resolve(G)},function(G){A.reject()}):(w.set("thumbnailUrl",E),A.resolve(E))},function(E){w._fetchingThumbnail=!1;A.resolve()}));return A};F.prototype.getData=function(){var u=new e["default"];l["default"].request({url:this.itemDataUrl}).then(function(w){return u.resolve(w)});return u};F.prototype.canBeDeleted=
function(){var u=new e["default"];l["default"].request({url:this.userItemUrl+"/canDelete"}).then(function(w){return u.resolve(w)},function(w){return u.resolve(w)});return u};F.prototype.resetTypeKeywordInfo=function(){this.setTypeKeywordFlags();this.set("displayName",this._getDisplayName())};F.prototype.setTypeKeywordFlags=function(){var u,w,A,E=this.typeKeywords;this.isViewOnly=f["default"].includes(E,"useOnly");this.isOfflineEnabled=f["default"].includes(E,"Offline");this.isHostedService=f["default"].includes(E,
"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Data Engineering Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=f["default"].includes(E,"Service Proxy");this.isAppProxy=f["default"].includes(E,"App Proxy");this.isAppCollector=f["default"].includes(["Web Map","Web Scene"],this.type);this.useInCollector=f["default"].includes(E,"Collector");this.disableInCollector=f["default"].includes(E,"CollectorDisabled");this.isFeatureCollection="Feature Collection"===this.type||
f["default"].includes(E,"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&f["default"].includes(E,"Map Notes");this.isTable=f["default"].includes(E,"Table");this.hasMetadata=f["default"].includes(E,"Metadata");this.isSDS=!this.portal.isPortal||this.portal.isPortal&&f["default"].includes(E,"providerSDS");this.isBDS=this.portal.isPortal&&f["default"].includes(E,"providerBDS");this.isRegisteredApp=f["default"].includes(E,"Registered App");this.hasGeocodeReviewTable=f["default"].includes(E,
"Involved Lookup");this.isHostedTemplate=f["default"].includes(E,"configurableApp")||f["default"].includes(E,"Configurable")&&f["default"].includes(E,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&this.isPremiumContent;this.requiresCredits=f["default"].includes(this.typeKeywords,"Requires Credits");this.typeInfo=h["default"].mixin({},this.getTypeInfo(),{premiumTitle:d["default"].common[(this.requiresCredits?"premiumcontentcreditstitle":"premiumcontenttitle")+(this.portal.isPortal?
"portal":"")],premiumLabel:d["default"].common[this.requiresCredits?"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(u=this.url)||void 0===u?void 0:u.indexOf("rest/content/items/"+this.id+"/data"));this.isDataView=f["default"].includes(E,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(w=this.portalUser)||void 0===w?void 0:w.userRole.canDeleteOrgItems())||!1;this.isLocatorView=this.isServiceProxy&&f["default"].includes(E,
"Geocoding filter");this.isRouteLayer=f["default"].includes(E,"Route Layer");this.isSpatiotemporal=f["default"].includes(E,"Spatiotemporal");this.isMarkup=f["default"].includes(E,"Markup");this.isMultiServicesView=f["default"].includes(E,"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&f["default"].includes(E,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===this.type&&f["default"].includes(E,"Location Tracking Service"))&&
f["default"].includes(E,"Location Tracking View");this.canShowSocialMediaLinks=q["default"].canShowSocialMediaLinksOnItems(this.portal);this.isVectorTileService=f["default"].includes(E,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===this.type&&f["default"].includes(this.typeKeywords,"UtilityNetwork");u=v["default"].isDefined(b["default"].newMapViewerEnabled)&&!0===b["default"].newMapViewerEnabled;w=!b["default"].self.portalProperties||!v["default"].isDefined(b["default"].self.portalProperties.newMapViewerEnabled)||
!0===b["default"].self.portalProperties.newMapViewerEnabled;u&&w&&(this.canOpenInNewMapViewer=this._canOpenInNewMapViewer());this.userItemUrl=null===(A=this.itemUrl)||void 0===A?void 0:A.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/")};F.prototype.addBlockClasses=function(u){var w=this,A,E,G,H;this.blockedApps||(this.blockedApps=null===(A=this.portal)||void 0===A?void 0:A.blockedApps);if(null!==(E=this.blockedApps)&&void 0!==E&&E.length){-1<this.blockedApps.indexOf("survey123")&&
u.some(function(K){return-1<["is-surveyForm","is-surveyFormBrowser"].indexOf(K)})&&-1===u.indexOf("survey-blocked")&&u.push("survey-blocked");if(-1<this.blockedApps.indexOf("webappbuilder")){u.some(function(K){return"can-edit-wab"===K})&&-1===u.indexOf("wab-blocked")&&u.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(K){return w.typeKeywords.some(function(I){return I===K})})||-1<(null===(G=this.url)||void 0===G?void 0:G.indexOf("webappviewer")))A=u.indexOf("has-url"),-1<A&&u.splice(A,
1);-1<(null===(H=this.configureUrl)||void 0===H?void 0:H.indexOf("webappviewer"))&&(u=this.privileges.indexOf("can-configure"),-1<u&&this.privileges.splice(u,1))}"StoryMap"===this.type&&this.origin&&(u=this.privileges.indexOf("can-configure"),-1<u&&this.privileges.splice(u,1))}};F.prototype.removeBlockedTypes=function(u){var w=this,A;if((null===u||void 0===u?0:u.length)||(null===(A=this.blockedApps)||void 0===A?0:A.length)){(null===u||void 0===u?0:u.length)?this.blockedApps=u:u=this.blockedApps;var E=
{arcgis360vr:{types:["is-vrExperience"],blockedType:"vrExperience-blocked",openIn:["vrExperienceViewer"]},arcgisInsights:{types:["is-insights"],blockedType:"insights-blocked",texts:[d["default"].itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap","is-editable-storymap"],blockedType:"storymap-blocked",openIn:["storyMapViewer","configureStoryMap"]},experienceBuilder:{types:["is-published-webExperience","is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",
openIn:["webExperienceViewer"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent","is-hubProject"],blockedType:"hub-blocked",texts:[d["default"].itemLinks.viewInHub,d["default"].itemLinks.openHubInitiative,d["default"].itemLinks.editHubProject],openIn:["hubEventViewer","hubInitiative","hubProject"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",texts:[d["default"].itemLinks.dashboardView],openIn:["dashboard"]},survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",
openIn:["surveyViewer"],texts:[d["default"].itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",texts:[d["default"].itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(E).forEach(function(G){var H;if(-1<u.indexOf(G)){var K=E[G],I=K.types,J=K.blockedType,L=K.texts;K=K.openIn;"arcgisstorymaps"===G&&"StoryMap"===w.type&&(w.defaultOpenText=void 0);I&&(w.types.some(function(M){return I.some(function(N){return N===
M})})||(null===(H=w.privileges)||void 0===H?0:H.some(function(M){return I.some(function(N){return N===M})})))&&-1===w.types.indexOf(J)&&(w.types=a.__spreadArray(a.__spreadArray([],w.types),[J]));if(null===L||void 0===L?0:L.some(function(M){return M===w.defaultOpenText}))w.defaultOpenText=w.defaultOpenIcon=void 0;K&&K.forEach(function(M){M=w.openIn.indexOf(M);-1<M&&w.openIn.splice(M,1)})}});-1<u.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")&&(this.defaultOpenText=void 0,
this.openIn=[])}};F.prototype.isVelocity=function(){return-1<this.typeKeywords.indexOf("IoTFeatureLayer")};F.prototype._getAdjustedSize=function(){var u=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,w=this.isHostedService&&"Image Service"===this.type&&!f["default"].includes(this.typeKeywords,"Tiled Imagery Layer")&&!f["default"].includes(this.typeKeywords,"Elevation 3D Layer")&&0<=this.subInfo;return this.size&&(u||w)?this.size-this.subInfo:this.size};F.prototype._canOpenInNewMapViewer=
function(){var u,w=this.type,A=this.isRouteLayer,E=r["default"][w],G={"Feature Service":1,"Map Service":1,"Vector Tile Service":1,"Image Service":1,"Imagery Layer":1,KML:1,OGCFeatureServer:1,WFS:1,WMS:1,WMTS:1};return-1<(null===(u=null===E||void 0===E?void 0:E.openIn)||void 0===u?void 0:u.indexOf("mapViewer"))?"Web Map"===w?!0:A||w in G&&this._canOpenServiceInNewMapViewer()?!0:!1:!1};F.prototype._canOpenServiceInNewMapViewer=function(){var u=this.type,w=this.typeKeywords,A="Map Service;Vector Tile Service;Imagery Layer;Image Service;Feature Service;KML;WFS;WMS;WMTS;OGCFeatureServer".split(";");
return this.isTable||A.includes(u)||w.includes("Hosted Service")||this.isRouteLayer};F.prototype._getAdjustedUrl=function(){var u;if(this.url){var w=/^(?:[a-z]+:)?\/\//i.test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var A=void 0;try{A=l["default"].parseUrl(this.url)}catch(E){A=this.url}if("public"!==this.access&&l["default"].isHostedTemplateItem(this.url))return this.url.replace(A.host,window.location.hostname);if("KML"===this.type)return this.url.includes("/sharing/rest/content/items/")?
(null===(u=this.itemDataUrl)||void 0===u?void 0:u.replace(A.host,this.portal.portalHostname),this.url.replace(A.host,this.portal.portalHostname)):this.url}return this.portal.isPortal&&!w&&(u=l["default"].getHomeAppContext(),-1===this.url.indexOf(u))?u+this.url:C.sanitizeServerURL(this.url)}return null};F.prototype._getSourceLabel=function(){var u=this.type,w=this.typeKeywords,A=f["default"].includes(w,"Service")||"Feature Collection"===u?d["default"].itemProperties.source+" ":"";return"Web Scene"===
u?f["default"].includes(w,"ViewingMode-Local")?d["default"].common.localWebScene:d["default"].common.globalWebScene:"Web Mapping Application"===u&&(null===w||void 0===w?0:w.includes("configurableApp"))?d["default"].items.instantApp:A?A+u:u};F.prototype._setAdminFlags=function(){var u,w,A,E,G;this.isOwnedByMyOrg=this.isOwner||(null===(u=this.itemOwner)||void 0===u?void 0:u.orgId)===this.portal.id||this.portalUser&&(null===(w=this.itemOwner)||void 0===w?void 0:w.orgId)&&this.portal&&this.portalUser.orgId===
this.portal.id||!1;u=this.isAdminView||(null===(E=null===(A=this.portal)||void 0===A?void 0:A.portalUser)||void 0===E?void 0:E.isOrgAdmin)&&this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?this.isOwner||m["default"].isItemAdmin(this,this.portal)||u:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(G=this.portalUser)||void 0===G?void 0:
G.userRole.canDeleteOrgItems())||!1};F.prototype._setContentStatusTo=function(u){return l["default"].request({url:this.itemUrl+"/setContentStatus",content:{status:u,clearEmptyFields:!u}},{usePost:!0})};F.prototype.setScoreCompleteness=function(u){u=parseInt(u,10);return this.scoreCompleteness=10*Math.ceil(u/10)};F.prototype._updateThumbnail=function(u){var w=this,A=new e["default"],E=this.itemUrl,G;l["default"].request({url:this.userItemUrl+"/updateThumbnail",content:{data:u.dataURL,filename:"ago_downloaded.png"}},
{usePost:!0}).then(function(){l["default"].request({url:E}).then(function(H){G=new x(a.__assign(a.__assign({},H),{portal:w.portal}));A.resolve(G.thumbnailUrl)})});return A};F.prototype.checkIsRetiredApp=function(){function u(E){return A.some(function(G){var H=-1<G.indexOf(".html");return-1<E.indexOf("/apps/"+G+(H?"":"/"))})}var w,A="3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ");
this.isRetiredApp=(null===(w=this.portal)||void 0===w?void 0:w.isPortal)&&"Web Mapping Application"===this.type&&this.url&&u(this.url)};return F=x=a.__decorate([g["default"](y.PortalItem,z["default"])],F)}()})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/buildThumbnailURLFromImageryItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l){function b(e,d,h){var t=new c["default"];e=k["default"](e,d,"4326",null,"800,532",null,"json",null,h||null);q["default"].request({url:e},{addToken:!1}).then(function(z){t.resolve(z)},function(){t.resolve(q["default"].getAbsoluteUrl("images/transparent.gif"))});return t}function g(e){return 2===(null===e||void 0===e?void 0:e.length)&&2===e[0].length&&2===e[1].length?Math.round(1E3*e[0][0])/1E3+","+Math.round(1E3*e[0][1])/1E3+","+Math.round(1E3*e[1][0])/1E3+","+Math.round(1E3*
e[1][1])/1E3:null}Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);B["default"]=function(e,d){var h,t,z,v=new c["default"],y=e.portal,C=y.getPortalUser();C=(null===(h=null===C||void 0===C?void 0:C.credential)||void 0===h?0:h.token)?"?token\x3d"+C.credential.token:"";var F=q["default"].getAbsoluteUrl("images/transparent.gif"),
x=q["default"].getAbsoluteUrl("images/arcgis-transparent-background-div.png"),u=q["default"].getStaticImagesUrl();h=e.itemUrl||e.url;var w=e.itemDataUrl,A=e.serviceInfo||{},E=e.itemData||{},G=e.type.toLowerCase(),H=e.typeKeywords||[],K=e.thumbnail!==F&&(!y.isPortal&&-1===(null===(t=e.thumbnail)||void 0===t?void 0:t.indexOf("thumbnail/ago_downloaded."))||y.isPortal&&-1===(null===(z=e.thumbnail)||void 0===z?void 0:z.indexOf("Utilities/PrintingTools")));t=l["default"].includes(H,"Tiled Imagery");z="image service"===
G&&!t;K=d&&("Feature Service"===e.type&&!K||"Vector Tile Service"===e.type&&!K);var I=Array.isArray(e.extent)?g(e.extent):e.extent||"-180,-90,180,90",J;e||v.resolve(x);if(e.thumbnail&&!K||"Image"===e.type||e.thumbnailUrl&&!K)v.resolve(e.thumbnail&&!e.thumbnail.startsWith("http")?h+"/info/"+e.thumbnail+C:e.thumbnailUrl);else if(e.isAdmin&&("image service"===G&&!t||"map service"===G))"image service"===G?f["default"](e,[800,532]).then(function(M){v.resolve(M.dataURL?M:M.url||x)},function(){return v.resolve(x)}):
e.isHostedService?e.getSourceData().then(function(M){(J=null===M||void 0===M?void 0:M.thumbnailUrl)?(e.thumbnail=J,v.resolve(J)):(e.thumbnail=u+"/desktopapp.png",v.resolve(e.thumbnail))},function(){e.thumbnail=u+"/desktopapp.png";v.resolve(e.thumbnail)}):b(h,I,A).then(function(M){v.resolve(M&&M.href||x)});else if(e.isLocationTrackingService)e.thumbnail=u+"/locationtrackingservice.png",v.resolve(e.thumbnail);else if(e.isAdmin&&"feature service"===G)e.isTable?(e.thumbnail=u+"/desktopapp.png",v.resolve(e.thumbnail)):
r["default"](e,null,E.layers).then(function(M){v.resolve(M)},function(){v.resolve(F)});else if("vector tile service"===G){y=[[-180,-90],[180,90]];if("string"===typeof e.extent){var L=e.extent.split(",");y=[[parseFloat(L[0]),parseFloat(L[1])],[parseFloat(L[2]),parseFloat(L[3])]]}else 0<(null===(L=e.extent)||void 0===L?void 0:L.length)&&(y=e.extent);m["default"]({operationalLayers:[],baseMap:{baseMapLayers:[{id:e.id,type:"VectorTileLayer",layerType:"VectorTileLayer",title:e.title,styleUrl:e.itemUrl+
"/resources/styles/root.json",visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},y,function(M){(M=M.layerIds.map(M.getLayer.bind(M)).shift())?M.takeScreenshot({format:"png",width:800,height:532}).then(function(N){(null===N||void 0===N?0:N.dataURL)?v.resolve(N):v.resolve(F)},function(){v.resolve(F)}):v.resolve(F)},function(){return v.resolve(F)})}else e.isAdmin&&"kml"===G?n["default"](e).then(function(M){return v.resolve(M)}):
"web mapping application"===G?v.resolve(u+"/webapp.png"):"mobile application"===G?v.resolve(u+"/mobileapp.png"):"image"===G?(L=2097134<e.size?q["default"].relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):w,v.resolve(L)):"workforce project"===G?v.resolve(u+"/workforceproject.png"):"hub initiative"===G?v.resolve(u+"/hubinitiative.png"):"hub page"===G?v.resolve(u+"/hubpage.png"):"hub site application"===G?v.resolve(u+"/hubsite.png"):"hub event"===G?v.resolve(u+"/hubevent.png"):
"hub project"===G?v.resolve(u+"/hubproject.png"):"dashboard"===G?(L=l["default"].includes(H,"ArcGIS Dashboards"),v.resolve(""+u+(L?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===G&&(null===y||void 0===y?0:y.isPortal)?v.resolve(u+"/webtool.png"):"web scene"===G||"scene service"===G?v.resolve(u+"/scene.png"):"ortho mapping project"===G?v.resolve(u+"/orthomappingproject.png"):"ortho mapping template"===G?v.resolve(u+"/orthomappingtemplate.png"):"insights theme"===G?v.resolve(u+"/insightstheme.png"):
"insights workbook package"===G?v.resolve(u+"/insightsworkbookpackage.png"):"solution"===G?v.resolve(u+"/solution.png"):"mobile scene package"===G?v.resolve(u+"/mobilescenepackage.png"):"deep learning package"===G?v.resolve(u+"/deeplearningpackage.png"):"big data analytic"===G?v.resolve(u+"/bigdataanalytic.png"):"real time analytic"===G?v.resolve(u+"/realtimeanalytic.png"):"feed"===G?v.resolve(u+"/feed.png"):"excalibur imagery project"===G?v.resolve(u+"/excaliburimageryproject.png"):"notebook"===
G?v.resolve(q["default"].relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===G?v.resolve(u+"/storymap.png"):"survey123 add in"===G?v.resolve(u+"/survey123addin.png"):"mission"===G?v.resolve(u+"/mission.png"):"quickcapture project"===G?v.resolve(u+"/quickcaptureproject.png"):"pro report"===G?v.resolve(u+"/proreport.png"):"pro package"===G?v.resolve(u+"/propackage.png"):"urban model"===G?v.resolve(u+"/urbanmodel.png"):"web experience"===G?v.resolve(u+"/webexperience.png"):
"web experience template"===G?v.resolve(u+"/webexperiencetemplate.png"):"experience builder widget"===G?v.resolve(u+"/experiencebuilderwidget.png"):"experience builder widget package"===G?v.resolve(u+"/experiencebuilderwidgetpackage.png"):"workflow"===G?v.resolve(u+"/workflow.png"):"insights script"===G?v.resolve(u+"/insightsscript.png"):"kernel gateway connection"===G?v.resolve(u+"/kernelgatewayconnection.png"):"hub initiative template"===G?v.resolve(u+"/hubinitiativetemplate.png"):t?v.resolve(u+
"/tiledimagerylayer.png"):z?v.resolve(u+"/imagerylayer.png"):"mission report"===G?v.resolve(u+"/missionreport.png"):"administrative report"===G?v.resolve(u+"/administrativereport.png"):"storymap theme"===G?v.resolve(u+"/storymaptheme.png"):"knowledge graph"===G?v.resolve(u+"/knowledgegraph.png"):"earth configuration"===G?v.resolve(u+"/earthconfiguration.png"):"raster function template"===G?v.resolve(u+"/rasterfunctiontemplate.png"):"link chart"===G?v.resolve(u+"/linkchart.png"):"investigation"===
G?v.resolve(u+"/investigation.png"):"apache parquet"===G?v.resolve(u+"/apacheparquet.png"):"video service"===G?v.resolve(u+"/mediaservice.png"):"geodata service"===G?v.resolve(u+"/geodataservice.png"):"notebook code snippets"===G?v.resolve(u+"/notebookcodesnippets.png"):"suitability model"===G?v.resolve(u+"/suitabilitymodel.png"):"esri classifier definition"===G?v.resolve(u+"/classifierdefinition.png"):"deep learning studio project"===G?v.resolve(u+"/deeplearningstudioproject.png"):"esri classification schema"===
G?v.resolve(u+"/classificationschema.png"):"insights data engineering workbook"===G?v.resolve(u+"/dataengineeringworkbook.png"):"insights data engineering model"===G?v.resolve(u+"/dataengineeringmodel.png"):v.resolve(u+"/desktopapp.png");return v}})},"arcgisonline/map/core/buildExportCall":function(){define([],function(){return function(D,B,a,c,k,n,r,f,m){if(!f&&-1<D.indexOf("/MapServer/")){n=D.indexOf("/MapServer/");var q=D.indexOf("?");-1<q?(f=D.substring(n+11,q),D=D.substring(0,n+10)+D.substring(q)):
(f=D.substring(n+11),D=D.substring(0,n+10))}q=-1<D.indexOf("/MapServer");!q&&m&&(q=m.capabilities?-1<m.capabilities.toLowerCase().indexOf("map"):m.supportedImageFormatTypes);n=D.indexOf("?");if(-1==n)if(q)D+="/export?";else{if("undefined"!==typeof m.currentVersion&&10.1<=m.currentVersion)return D+"/info/thumbnail";D+="/exportImage?"}else if(q)D=D.substring(0,n)+"/export"+D.substring(n,D.length)+"\x26";else{if("undefined"!==typeof m.currentVersion&&10.1<=m.currentVersion)return D=D.substring(0,n)+
"/info/thumbnail"+D.substring(n,D.length);D=D.substring(0,n)+"/exportImage"+D.substring(n,D.length)+"\x26"}D+="size\x3d"+k+"\x26bbox\x3d"+B;null!==a&&0<a.length&&(D+="\x26bboxSR\x3d"+a);null!==c&&0<c.length&&(D+="\x26imageSR\x3d"+c);D=q&&m&&m.supportedImageFormatTypes&&-1<m.supportedImageFormatTypes.indexOf("PNG32")?D+("\x26format\x3dpng32\x26f\x3d"+r):q?D+("\x26format\x3dpng24\x26f\x3d"+r):D+("\x26format\x3djpgpng\x26f\x3d"+r);q?null!==f&&0<f.length&&(D+="\x26layers\x3dshow:"+f):D+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";
return D}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),function(D,B,a,c,k,n){var r=window.esriGeowConfig;return function(f,m){var q={};q.baseMap=r.defaultBasemap||r.self.defaultBasemap;q.baseMap.title="basemap";q.operationalLayers=[];var l=f.url;l||"KML"!==f.type||(l=r.restBaseUrl+"content/items/"+f.id+
"/data");var b=(new B(r.restBaseUrl)).authority;-1<l.indexOf(b)&&(b=c.getToken())&&(l+="?token\x3d"+b);q.operationalLayers.push({url:l,id:"KML_"+Math.random(),opacity:1,title:f.title,visibility:!0,type:"KML"});var g=new D;l=m;l||("string"==typeof f.extent?(l=f.extent.split(","),l=[[parseFloat(l[0]),parseFloat(l[1])],[parseFloat(l[2]),parseFloat(l[3])]]):l=f.extent&&0<f.extent.length?f.extent:[[-180,-90],[180,90]]);n(q,l,new k({wkid:4326}),a.hitch(this,function(e){g.resolve(e)}),a.hitch(this,function(e){g.reject(e)}));
return g}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(D,B,a,c){var k=window.esriGeowConfig;return function(n,r,f,m,q){n=B.clone(n);a.forEach(n.baseMap.baseMapLayers,function(l){delete l.resourceInfo});n.mapOptions={showAttribution:!1,extent:{xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1],spatialReference:{wkid:4326}},spatialReference:f};n.exportOptions={dpi:96,outputSize:[600,
400]};n.layoutOptions={};r=new c(k.self.helperServices.printTask.url);f={Web_Map_as_JSON:D.stringify(n),Format:"PNG32",Layout_Template:"MAP_ONLY"};r.execute(f).then(B.hitch(this,function(l){if(l){for(var b=!1,g=0;g<l.length;g++)if("Output_File"==l[g].paramName){m(l[g].value.url);b=!0;break}!b&&q&&q()}else q&&q()}),B.hitch(this,function(l){q&&q()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){return function(d,h,t){var z={};z.baseMap=n.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);z.baseMap.title="basemap";for(var v=z.baseMap.baseMapLayers.length,y=!1===d.itemData?{}:d.itemData,C=0;C<v;C++){var F=z.baseMap.baseMapLayers[C];if(!F.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!q.isHostedService(F.url)&&!q.supportsHttps(F.url)||(F.url=F.url.replace("http:","https:"));F.visibility=!1;z.baseMap.baseMapLayers=
[F];break}}z.operationalLayers=[];var x=new B;v=function(u,w){w?u&&k.forEach(u,function(G){k.forEach(w,function(H,K){H.id===G.id&&(H[K]=G)})}):w=[];var A=function(G,H){for(var K=G&&G.layers||[],I=K.length-1;0<=I;I--){var J=K[I],L=r.id.findCredential(q.urlToObject(d.url).path);L={url:d.url+"/"+J.id+(L?"?token\x3d"+L.token:""),id:(d.id||Math.random())+"_"+J.id,opacity:1,title:(d.title||"title")+"_"+J.id,visibility:!0};for(var M=!1,N=0;N<K.length;N++)if(K[N].id===J.id){M=!0;L.layerDefinition=K[N].layerDefinition;
break}(!K.length||K.length&&M)&&z.operationalLayers.push(L)}var O=function(X){x.resolve(X)},Y=function(X){x.reject(X)},ba=[[-180,-90],[180,90]];"string"==typeof d.extent&&""!==d.extent?(I=d.extent.split(","),ba=[[parseFloat(I[0]),parseFloat(I[1])],[parseFloat(I[2]),parseFloat(I[3])]]):d.extent&&0<d.extent.length&&(ba=d.extent);if(1===z.operationalLayers.length)L=new f(z.operationalLayers[0].url),D(L,"load",n.hitch(this,function(X){X.layer&&(X=X.layer);b({layer:X},h||ba).then(n.hitch(this,function(Z,
P){l(Z,P,n.hitch(this,O),n.hitch(this,Y))},z))}));else{I=h||d.extent||ba;ba=new m(I[0][0],I[0][1],I[1][0],I[1][1]);var ha=function(X,Z){var P=20015077/180,da=r.config.defaults,ia=r.WKIDUnitConversion,xa=X.spatialReference;if(xa){var Ca=xa.wkid;var Fa=xa.wkt}xa=null;Ca?xa=ia.values[ia[Ca]]:Fa&&-1!==Fa.search(/^PROJCS/i)&&(ia=/UNIT\[([^\]]+)\]\]$/i.exec(Fa))&&ia[1]&&(xa=parseFloat(ia[1].split(",")[1]));return X.getWidth()/Z*(xa||P)*39.37*da.screenDPI}(ba,200),U=[];K=[];for(I=0;I<z.operationalLayers.length;I++)L=
z.operationalLayers[I],J=new B,K.push(J),L=new f(L.url),U.push(L),c.connect(L,"onLoad",n.hitch(this,function(X,Z){Z.minScale<=ha&&Z.maxScale>ha?X.resolve(!0):X.resolve(!1)},J));(new a(K)).addCallback(function(X){for(var Z=!1,P=0;P<X.length;P++)if(!0===X[P][1]){Z=!0;break}Z?l(z,h||d.extent,n.hitch(this,O),n.hitch(this,Y)):b({layer:U[U.length-1]},h||d.extent).then(n.hitch(this,function(da,ia){l(da,ia,n.hitch(this,O),n.hitch(this,Y))},z))})}},E=function(G){x.reject(G)};d.serviceInfo&&!d.serviceInfo.error?
A(d.serviceInfo):e(d.url,"",n.hitch(this,A),n.hitch(this,E))};t?y?v(t,y):g(d.id,n.hitch(this,v,t),n.hitch(this,v)):d.id?y?v(null,y):g(d.id,n.hitch(this,v,null),n.hitch(this,v)):v();return x}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I,J,L,M,N,O,Y,ba,ha,U,X,Z,P,da,ia,xa,Ca,Fa,Ma,Sa,Ba,ca,ua,ya,ta,pa,Aa,T,ea,na){var V=y.defaults,Ia=!!h("esri-pbf"),Ja=!!h("esri-featurelayer-pbf"),Da=a(Z,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(W,oa){this._preventInit||this._initFeatureLayer(W,oa)},_initFeatureLayer:function(W,oa){oa=oa||{};this._tileWidth=oa.tileWidth||512;this._tileHeight=oa.tileHeight||512;this.i18n=na;this._featureReduction=this._featureReduction||oa.featureReduction;this._featureReductionEnabled=null!=oa.featureReductionEnabled?oa.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=oa.featureUpdatesCheckEnabled?oa.featureUpdatesCheckEnabled:!0;this.showLabels=null!=oa.showLabels?
oa.showLabels:!0;this._outFields=oa.outFields;this._defnExpr=oa.definitionExpression;this._loadCallback=oa.loadCallback;this._trackIdField=oa.trackIdField;this.objectIdField=oa.objectIdField;var ra=null!=oa.resolution,R=null!=oa.maxAllowableOffset;this._maxOffset=this._optMaxOffset=ra||R?ra?oa.resolution:oa.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=oa.quantize?oa.quantize:!0;this._optEditable=oa.editable;this._optAutoGen=oa.autoGeneralize;this.editSummaryCallback=oa.editSummaryCallback;
this.userId=oa.userId;this.userIsAdmin=oa.userIsAdmin;this.useMapTime=oa.hasOwnProperty("useMapTime")?!!oa.useMapTime:!0;this.source=oa.source;this.gdbVersion=oa.gdbVersion;this.orderByFields=oa.orderByFields;this.maxPointCountForAuto=null!=oa.maxPointCountForAuto?oa.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=oa.maxRecordCountForAuto?oa.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=oa.maxVertexCountForAuto?oa.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=oa.generalizeForScale?oa.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=oa.queryPagination?oa.queryPagination:!0;this.multipatchOption=oa.multipatchOption;this.subtypeSublayerInfo=oa.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();ra=z.isDefined(oa.mode)?oa.mode:Da.MODE_ONDEMAND;this._isStream&&(ra=Da.MODE_STREAM);this.mode=
ra;switch(ra){case Da.MODE_SNAPSHOT:this.currentMode=Da.MODE_SNAPSHOT;this._mode=new ca(this);break;case Da.MODE_ONDEMAND:case Da.MODE_AUTO:this.currentMode=Da.MODE_ONDEMAND;this._mode=new ua(this);this.latticeTiling=oa.latticeTiling;break;case Da.MODE_SELECTION:this.currentMode=Da.MODE_SELECTION;this._mode=new ya(this);this._isSelOnly=!0;break;case Da.MODE_STREAM:this.currentMode=Da.MODE_STREAM,this._mode=new ta(this),this._isStream=!0}this._initLayer=k.hitch(this,this._initLayer);this._selectHandler=
k.hitch(this,this._selectHandler);this._editable=!1;if(k.isObject(W)&&W.layerDefinition)return this._collection=!0,this.mode=this._isStream?Da.MODE_STREAM:Da.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(W),this;this.source&&(ra={source:this.source.toJson()},this._url.query=k.mixin(this._url.query,{layer:r.toJson(ra)}));this.gdbVersion&&(this._url.query=k.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new M(this.url,{source:this.source,gdbVersion:this.gdbVersion});
ra=this._url.path;this._fserver=!1;-1!==ra.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(R=oa.resourceInfo)?this._initLayer(R):v({url:ra,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(W,oa){if(W||oa){this._json=W;var ra=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||W&&W._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=Da.MODE_SNAPSHOT,this._mode=new ca(this)),this._featureSet=W.featureSet,this._nextId=W.nextObjectId,W=W.layerDefinition);this.version=W.currentVersion;this.version||(this.version="capabilities"in W||"drawingInfo"in W||"hasAttachments"in W||"htmlPopupType"in W||"relationships"in W||"timeInfo"in W||"typeIdField"in W||"types"in W?10:9.3);this.geometryType=W.geometryType;W.bandCount&&W.fields&&1<W.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(W.hasOwnProperty("capabilities")){var R=this.capabilities=W.capabilities;R&&-1!==R.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);z.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=r.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=z.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Da.MODE_ONDEMAND||this.mode===Da.MODE_AUTO,delete this._optAutoGen);R=W.effectiveMinScale||W.minScale;var fa=W.effectiveMaxScale||W.maxScale;!this._hasMin&&R&&this.setMinScale(R);!this._hasMax&&fa&&this.setMaxScale(fa);this.layerId=W.id;this.name=ra&&ra.title||W.name;this.description=
W.description;this.copyright=W.copyrightText;this.type=W.type;this.displayField=W.displayField;this.defaultDefinitionExpression=W.definitionExpression||(W.isView?W.viewDefinitionQuery:W.definitionQuery);this.fullExtent=new ba(W.extent);this.initialExtent=new ba(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new x(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=W.defaultVisibility;this.editingInfo=W.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=W.hasM||!1;this.hasZ=W.hasZ||!1;this.indexedFields=W.indexedFields;this.indexes=W.indexes;this.maxRecordCount=W.maxRecordCount;this.canModifyLayer=W.canModifyLayer;this.supportsStatistics=W.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:W.supportsAdvancedQueries;this.supportsCalculate=W.supportsCalculate;this.supportsASyncCalculate=
W.supportsASyncCalculate;this.supportsAttachmentsByUploadId=W.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=W.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=W.supportsQuantizationEditMode;this.supportsFieldDescription=W.supportsFieldDescriptionProperty;this.supportsFormatPBF=W.supportedQueryFormats?-1!==n.map(W.supportedQueryFormats.toLowerCase().split(","),k.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
W.hasLabels;this.canScaleSymbols=W.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=W.supportsRollbackOnFailure;this.syncCanReturnChanges=W.syncCanReturnChanges;this.isDataVersioned=W.isDataVersioned;this.editFieldsInfo=W.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=W.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=W.relationships;
this.allowGeometryUpdates=z.isDefined(W.allowGeometryUpdates)?W.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!W.allowUpdateWithoutMValues;this.enableZDefaults=!!W.enableZDefaults;this.zDefault=z.isDefined(W.zDefault)?W.zDefault:null;this.advancedQueryCapabilities=W.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=W.hasGeometryProperties&&W.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=W.useStandardizedQueries;this.tileMaxRecordCount=W.tileMaxRecordCount;this.standardMaxRecordCount=W.standardMaxRecordCount;if(R=W.dateFieldsTimeReference)this.dateFieldsTimeReference=new ia(R);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;fa=W.fields;this._createFields(fa);if(!this.objectIdField&&(this.objectIdField=W.objectIdField,!this.objectIdField))for(fa=W.fields,R=0;R<fa.length;R++){var ma=fa[R];if("esriFieldTypeOID"===ma.type){this.objectIdField=ma.name;break}}if(!z.isDefined(this._nextId)){fa=this.objectIdField;ma=-1;if(this._collection&&fa){var wa=(R=this._featureSet)&&R.features,Ea=wa?wa.length:0;for(R=0;R<Ea;R++){var Ha=(Ha=wa[R].attributes)&&Ha[fa];Ha>ma&&(ma=Ha)}}this._nextId=ma+1}this.globalIdField=
W.globalIdField;if(R=this.typeIdField=W.typeIdField)if(R=!this._getField(R)&&this._getField(R,!0))this.typeIdField=R.name;this.visibilityField=W.visibilityField;if(fa=W.defaultSymbol)this.defaultSymbol=G.fromJson(fa);var La=this.types=[],Ya=W.types;ma=(R=this.editFieldsInfo)&&R.creatorField;wa=R&&R.editorField;Ha=ma||wa;Ea=[];if(Ya)for(R=0;R<Ya.length;R++){var Xa=new xa(Ya[R]);var Ta=Xa.templates;Ha&&Ta&&Ta.length&&(Ea=Ea.concat(Ta));La.push(Xa)}Ya=W.templates;Xa=this.templates=[];if(Ya)for(R=0;R<
Ya.length;R++)La=new Ca(Ya[R]),Ha&&Ea.push(La),Xa.push(La);for(R=0;R<Ea.length;R++)if(Ha=k.getObject("prototype.attributes",!1,Ea[R]))ma&&delete Ha[ma],wa&&delete Ha[wa];if(R=W.subtypeField)this.subtypeField=(R=this.getField(R))?R.name:null;this.defaultSubtypeCode=W.defaultSubtypeCode;this.subtypes=n.map(W.subtypes,function(tb){return new Fa(tb)});this._applySTSublayerInfo(ra);if(ra=W.timeInfo)this.timeInfo=new da(ra),this._startTimeField=ra.startTimeField,this._endTimeField=ra.endTimeField,this._startTimeField&&
this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?ra.trackIdField=this._trackIdField:this._trackIdField=ra.trackIdField;this.hasAttachments=!this._collection&&W.hasAttachments?!0:!1;this.htmlPopupType=W.htmlPopupType;ra=W.drawingInfo;(R=ra&&ra.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=n.map(R,function(tb){return new Sa(tb)}),this._fixLabelExpr());if(!this.renderer)if(ra&&ra.renderer){var eb=ra.renderer;this.setRenderer(I.fromJson(eb,{geometryType:this.geometryType}));"classBreaks"===
eb.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var db=eb.type;R=[];eb=this.renderer;switch(db){case "simple":R.push(eb.symbol);break;case "uniqueValue":case "classBreaks":R.push(eb.defaultSymbol),R=R.concat(n.map(eb.infos,function(tb){return tb.symbol}))}R=n.filter(R,z.isDefined);var gb=this._url.path+"/images/",qb=this._getToken();n.forEach(R,function(tb){var Cb=tb.url;Cb&&(-1===Cb.search(/https?:/)&&-1===Cb.indexOf("data:")&&(tb.url=gb+Cb),qb&&-1!==tb.url.search(/https?:/)&&(tb.url+=
"?token\x3d"+qb))})}}else if(fa)Ya=this.types,0<Ya.length?(eb=new K(this.defaultSymbol,this.typeIdField),n.forEach(Ya,function(tb){eb.addValue(tb.id,tb.symbol)})):eb=new H(this.defaultSymbol),this.setRenderer(eb);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":db=new w;break;case "esriGeometryPolyline":db=new A;break;case "esriGeometryPolygon":db=new E;break;default:this.hasXYFootprint()&&(db=new E)}this.setRenderer(db?new H(db):null)}db=ra&&
ra.transparency||0;!this.hasOwnProperty("opacity")&&0<db&&(this.opacity=1-db/100);(h("ie")||7<=h("trident")||h("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=W.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var sb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==
Da.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var tb=this._loadCallback;tb&&(delete this._loadCallback,tb(this))};db=[];this._collection?(ra=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new O(ra)),this._fcAdded=!0):(db.push(this._forceIdentity()),this._limitPromise&&db.push(this._limitPromise));db.push(this._evalArcadeSupport());db.length?F(db).then(k.hitch(this,function(){sb.call(this)})):sb.call(this)}},_applySTSublayerInfo:function(W){W&&this.subtypeField&&(this.subtypeCode=
W.subtypeCode,this._applySTSublayerDefinitionExpression(W),this._filterSubtypes(W),this._applySTTemplates(W),this._applySTFieldOverrides(W))},_applySTSublayerDefinitionExpression:function(W){var oa=[],ra=this.getDefinitionExpression();ra&&oa.push(ra);(W=W.layerDefinition&&W.layerDefinition.definitionExpression)&&oa.push(W);1<oa.length&&(oa=n.map(oa,function(R){return"("+R+")"}));this.setDefinitionExpression(oa.length?oa.join(" AND "):null)},_applySTTemplates:function(W){if(W=W.layerDefinition&&W.layerDefinition.templates)this.templates=
n.map(W,function(oa){return new Ca(oa)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=n.filter(this.subtypes,function(W){return W.code===this.subtypeCode},this))},_applySTFieldOverrides:function(W){var oa=W.layerDefinition&&W.layerDefinition.fieldOverrides;if(oa){this.fields=n.filter(this.fields,function(R){return n.some(oa,function(fa){return fa.name===R.name})});var ra=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(R){var fa=n.filter(oa,function(ma){return ma.name===
R.name})[0];fa.alias&&(R.alias=fa.alias);if(!1===fa.editable||R.name===this.subtypeField)R.editable=!1;ra&&(fa=ra[R.name])&&"inherited"!==fa.type&&(R.domain=Ba.fromJson(fa.toJson()))},this)}},setShowLabels:function(W){var oa=this.showLabels;this.showLabels=W;oa!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(W){this.inherited(arguments);var oa=this._map;this._ager=!!(W&&W.observationAger&&W.observationRenderer);W&&"colors"in
W&&"blurRadius"in W&&"maxPixelIntensity"in W?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&oa&&(this._heatmapManager=new T(this),this._heatmapManager.initialize(oa))):this.renderer&&this.renderer.getRendererInfo?n.some(this.renderer.rendererInfos,function(fa){return fa.renderer&&"colors"in fa.renderer&&"blurRadius"in fa.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&oa&&(W&&(W.latestObservationRenderer||W.trackRenderer)?
this._trackManager||(this._trackManager=new Aa(this),this._trackManager.initialize(oa),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(W){var ra=[];oa=n.filter([W,W.observationRenderer,W.latestObservationRenderer,W.trackRenderer],z.isDefined);var R=function(fa){return null!=fa&&"function"!=typeof fa&&fa};n.forEach(oa,function(fa){var ma=R(fa.attributeField),wa=R(fa.attributeField2);
fa=R(fa.attributeField3);!1!==ma&&ra.push(ma);!1!==wa&&ra.push(wa);!1!==fa&&ra.push(fa)});this._requiredFields=ra}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(W){W&&(W=k.mixin({},W),null!=W.clusterSize&&null==W.clusterRadius&&(W.clusterRadius=W.clusterSize),delete W.clusterSize);this.loaded?this._isFeatureReductionSupported(W)?this._featureReduction=W:this._featureReduction=
null:this._featureReduction=W;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var W=this._featureReduction;if(W){W=k.mixin({},W);var oa=this._clusterManager;if(oa=oa&&oa.aggregationInfo)W.clusterRadius=oa.clusterRadius,W.infoTemplate=oa.infoTemplate}return W},isFeatureReductionActive:function(){var W=this._clusterManager;return!!(W&&W.isClusteringEnabled()&&W.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},
enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?
this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(W){return this._clusterManager?this._clusterManager.getFeaturesInCluster(W):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(W){var oa,
ra=this._clusterManager?this._clusterManager.getClusterFields():null;W=W?W.toLowerCase():"";n.some(ra,function(R){W===R.name.toLowerCase()&&(oa=R);return!!oa});return oa},_isFeatureReductionSupported:function(W){return W&&"cluster"===W.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(W){W=W&&W.declaredClass||"";W=W.toLowerCase();return-1<W.indexOf("simplerenderer")||
-1<W.indexOf("classbreaksrenderer")||-1<W.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(W){this.loaded&&this.getMap()&&(W=W||this.getFeatureReduction(),this._evalModeFromFReduction(W),W&&this.isFeatureReductionEnabled()?this._canCluster(W)?this._clusterManager?this._updateClusterManager(W):(this._clusterManager=this._createClusterManager(W),this.onFeatureReductionChange()):this._destroyClusterManager():this._destroyClusterManager())},_canCluster:function(W){var oa=this._map;if(!oa)return!1;
oa=oa.spatialReference;return this._isFeatureReductionSupported(W)&&this._isReductionCompatibleRenderer(this.renderer)&&(oa.isWebMercator()||4326===oa.wkid)},_createClusterManager:function(W){W=new ea({layer:this,aggregationInfo:W});this._clusterHandles=[W.on("renderer-change",k.hitch(this,function(){this.onFeatureReductionRendererChange()}))];W.initialize(this._map);return W},_updateClusterManager:function(W){var oa=this._clusterManager;oa&&oa.setAggregationInfo(W)},_destroyClusterManager:function(W){n.forEach(this._clusterHandles,
function(oa){oa.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(W),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(W){this.inherited(arguments);var oa=this._getRenderer();this._ager=!!(oa&&oa.observationAger&&oa.observationRenderer);this._trackManager&&
this._trackManager.container&&this._trackManager.container.setRenderer(oa&&oa.trackRenderer);W&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(W){this._clusterManager?this._clusterManager.toggleFeatureVisibility(W):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(W){this._hasOnDemandDrillMode()&&(W=W||{},null!=W.maxDrillLevel&&(this._mode.maxDrillLevel=W.maxDrillLevel),null!=W.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=W.maxRecordCountFactor),
null!=W.enablePBFQuery&&(this._mode.enablePBFQuery=W.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&this.currentMode===Da.MODE_ONDEMAND&&(!this._preSurfaceChangeState||
this._preSurfaceChangeState.currentMode===Da.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var W=this.renderer,oa=W.declaredClass?W.declaredClass.toLowerCase():"";return(-1<oa.indexOf("simplerenderer")||-1<oa.indexOf("classbreaksrenderer")||-1<oa.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(W)&&this._hasWebGLCompatibleVVs(W)},_hasWebGLCompatibleSymbols:function(W){W=this._getAllSymbolsInRenderer(W);return!(this._hasSLSWithMarker(W)||this._hasIncompatibleSMSStyles(W)||
this._hasGIFMarker(W))},_hasWebGLCompatibleVVs:function(W){return!n.some(W&&W.visualVariables,function(oa){var ra=oa.type;return("colorInfo"===ra||"opacityInfo"===ra)&&oa.stops&&8<oa.stops.length||"sizeInfo"===ra&&(oa.field||oa.valueExpression&&"$view.scale"!==oa.valueExpression||oa.expression&&"view.scale"!==oa.expression)&&oa.stops&&6<oa.stops.length?!0:!1})},_hasSLSWithMarker:function(W){return n.some(W,function(oa){return oa&&"simplelinesymbol"===oa.type&&!!oa.marker})},_hasIncompatibleSMSStyles:function(W){var oa=
void 0===h("ie")&&7==h("trident");return n.some(W,function(ra){return ra&&"simplemarkersymbol"===ra.type&&("triangle"===ra.style||"path"===ra.style&&oa)})},_hasGIFMarker:function(W){var oa=/\.gif$/,ra=/^image\/gif$/;return n.some(W,function(R){return R&&"picturemarkersymbol"===R.type?oa.test(R.url)||ra.test(R.contentType):!1})},_getAllSymbolsInRenderer:function(W){var oa=[];W&&(oa.push(W.symbol),oa.push(W.defaultSymbol),n.forEach(W.infos,function(ra){oa.push(ra.symbol)}),oa=n.filter(oa,function(ra){return!!ra}));
return oa},_setMap:function(W){var oa=this.inherited(arguments),ra=this._mode,R=this;ra&&W.loaded&&ra.initialize(W);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(fa){fa=fa.graphic.attributes;(fa=R._selectedFeatures[fa&&fa[R.objectIdField]])&&fa.attr("data-selected","")});return oa},_unsetMap:function(W){this._suspendImpl(!0);this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),
this._trackManager=null);c.disconnect(this._zoomConnect);c.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(W){!this._needsRefresh&&W&&W.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(W=this._mode)&&W.refresh())},setFeatureUpdatesCheckEnabled:function(W){this._featureUpdatesCheckEnabled=
W},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!k.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var W=new f;if(!this.supportsLastEditDate)return W.reject(Error("FeatureLayer does not support supportsLastEditDate")),W.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=
v({url:this._url.path,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(k.hitch(this,function(oa){oa=oa.editingInfo.lastEditDate;var ra=this.editingInfo.lastEditDate!==oa;this.editingInfo.lastEditDate=oa;return ra}));this._fetchMetadataPromise.then(function(oa){W.isFulfilled()||W.resolve(oa)}).otherwise(function(oa){W.isFulfilled()||W.reject(oa)});return W.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},
getOutFields:function(){return n.filter(this._getOutFields(),function(W){return"*"===W||!!this._getField(W)},this)},getField:function(W){return this._getField(W,!0)},isOutField:function(W){W=this.getField(W);if(!W)return!1;var oa=this.getOutFields();return-1<n.indexOf(oa,"*")||-1<n.indexOf(oa,W.name)},getFieldLabel:function(W){var oa=this.infoTemplate;oa=oa&&oa.getFieldInfo&&oa.getFieldInfo(W);W=k.isFunction(W)?null:this.getField(W);var ra=oa||W,R="";ra&&(R=oa&&oa.label||W&&W.alias||ra.name||ra.fieldName);
return R},getDomain:function(W,oa){var ra,R,fa=oa&&oa.feature,ma=fa&&this.typeIdField&&fa.attributes&&fa.attributes[this.typeIdField];null!=ma&&n.some(this.types,function(wa){return wa.id==ma?((ra=wa.domains&&wa.domains[W])&&"inherited"===ra.type&&(ra=this._getLayerDomain(W),R=!0),!0):!1},this);R||ra||(ra=this._getLayerDomain(W));return ra},_getLayerDomain:function(W){this._createFieldsIndex();var oa=this._fieldsIndex;if(oa)return oa=oa.caseSensitive,(oa=oa.get(W))?oa.domain:null;var ra;n.some(this.fields,
function(R){R.name===W&&(ra=R.domain);return!!ra});return ra},getType:function(W){return this.getTypeById(W&&this.typeIdField&&W.attributes&&W.attributes[this.typeIdField])},getTypeById:function(W){var oa;n.some(this.types,function(ra){ra.id==W&&(oa=ra);return!!oa});return oa},getSubtypeByCode:function(W){var oa;n.some(this.subtypes,function(ra){ra.code==W&&(oa=ra);return!!oa});return oa},setEditable:function(W){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=
W,this;var oa=this._editable;this._editable=W;this._updateCaps();if(oa!==W)this.onCapabilitiesChange();return this},getEditCapabilities:function(W){var oa={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return oa;var ra=W&&W.feature;W=W&&W.userId||this.getUserId();var R=n.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],k.trim),fa=(oa=-1<n.indexOf(R,"editing"))&&-1<n.indexOf(R,"create"),ma=oa&&-1<n.indexOf(R,"update");R=oa&&-1<n.indexOf(R,
"delete");var wa=this.ownershipBasedAccessControlForFeatures,Ea=this.editFieldsInfo,Ha=Ea&&Ea.creatorField;Ea=Ea&&Ea.realm;ra=(ra=ra&&ra.attributes)&&Ha?ra[Ha]:void 0;var La=!!this.userIsAdmin;Ha=!wa||La||!(!wa.allowOthersToUpdate&&!wa.allowUpdateToOthers);var Ya=!wa||La||!(!wa.allowOthersToDelete&&!wa.allowDeleteToOthers),Xa=!wa||La||!wa.hasOwnProperty("allowAnonymousToUpdate")||wa.allowAnonymousToUpdate;wa=!wa||La||!wa.hasOwnProperty("allowAnonymousToDelete")||wa.allowAnonymousToDelete;W&&Ea&&(W=
W+"@"+Ea);if(La||oa&&!(fa||ma||R))fa=ma=R=!0;oa={canCreate:fa,canUpdate:ma,canDelete:R,canUpdateGeometry:La||this.allowGeometryUpdates};W||(oa.canUpdate=oa.canUpdate&&Xa,oa.canDelete=oa.canDelete&&wa);null===ra?(oa.canUpdate=oa.canUpdate&&Ha,oa.canDelete=oa.canDelete&&Ya):""!==ra&&ra&&W.toLowerCase()!==ra.toLowerCase()&&(oa.canUpdate=oa.canUpdate&&Ha,oa.canDelete=oa.canDelete&&Ya);return oa},getUserId:function(){var W;this.loaded&&(W=this.credential&&this.credential.userId||this.userId||"");return W},
setUserIsAdmin:function(W){this.userIsAdmin=W},setEditSummaryCallback:function(W){this.editSummaryCallback=W},getEditSummary:function(W,oa,ra){ra=z.isDefined(ra)?ra:(new Date).getTime();var R="";ra=this.getEditInfo(W,oa,ra);(oa=oa&&oa.callback||this.editSummaryCallback)&&(ra=oa(W,ra)||"");if(k.isString(ra))R=ra;else{if(ra){W=ra.action;oa=ra.userId;var fa=ra.timeValue,ma=0;W&&ma++;oa&&ma++;z.isDefined(fa)&&ma++;1<ma&&(R=("edit"===W?"edit":"create")+(oa?"User":"")+(z.isDefined(fa)?ra.displayPattern:
""))}R=R&&z.substitute(ra,this.i18n.layers.FeatureLayer[R])}return R},getEditInfo:function(W,oa,ra){if(this.loaded){ra=z.isDefined(ra)?ra:(new Date).getTime();oa=oa&&oa.action||"last";var R=this.editFieldsInfo,fa=R&&R.creatorField,ma=R&&R.creationDateField,wa=R&&R.editorField;R=R&&R.editDateField;wa=(W=W&&W.attributes)&&wa?W[wa]:void 0;R=W&&R?W[R]:null;fa=this._getEditData(W&&fa?W[fa]:void 0,W&&ma?W[ma]:null,ra);ra=this._getEditData(wa,R,ra);switch(oa){case "creation":var Ea=fa;break;case "edit":Ea=
ra;break;case "last":Ea=ra||fa}Ea&&(Ea.action=Ea===ra?"edit":"creation");return Ea}},_getEditData:function(W,oa,ra){if(z.isDefined(oa)){var R=ra-oa;var fa=0>R?"Full":6E4>R?"Seconds":12E4>R?"Minute":36E5>R?"Minutes":72E5>R?"Hour":864E5>R?"Hours":6048E5>R?"WeekDay":"Full"}if(void 0!==W||fa){var ma=ma||{};ma.userId=W;fa&&(W=m.format,ra=new Date(oa),ma.minutes=Math.floor(R/6E4),ma.hours=Math.floor(R/36E5),ma.weekDay=W(ra,{datePattern:"EEEE",selector:"date"}),ma.formattedDate=W(ra,{selector:"date"}),ma.formattedTime=
W(ra,{selector:"time"}),ma.displayPattern=fa,ma.timeValue=oa)}return ma},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var W=n.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],k.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==n.indexOf(W,"query")||-1!==n.indexOf(W,"catalog")},setResolution:function(W){return this.setMaxAllowableOffset(W)},setMaxAllowableOffset:function(W){this.isEditable()||(this._optMaxOffset=W,
this._setMaxOffset(W,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var W=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?
this._maxOffset:W},_setMaxOffset:function(W,oa){if(null==W)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=W:delete this._maxOffset,this._quantizationParameters=W?{mode:"view",originPosition:"upperLeft",tolerance:W,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&oa||(W=Math.floor(W)),isNaN(W)||0===W?delete this._maxOffset:this._maxOffset=W,delete this._quantizationParameters);
return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(W){W=(W=W&&W.split("-"))&&W[0]&&W[0].toLowerCase();return-1!==n.indexOf(this._langsWithDot,W)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(W){this.loaded?this._canAutoGeneralize()&&((this._autoGeneralize=W)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):
this._setMaxOffset(null)):this._optAutoGen=W;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Da.MODE_SNAPSHOT},setGDBVersion:function(W){this._collection||W===this.gdbVersion||!W&&!this.gdbVersion||(this.gdbVersion=W,this._task.gdbVersion=W,this._url.query=k.mixin(this._url.query,{gdbVersion:W}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():
!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(W){this._defnExpr=W;this._hasPendingLimitQuery()||((W=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(W):this._applyDefnExpr());return this},_applyDefnExpr:function(){var W=this._mode;W&&W.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(W){W.then(k.hitch(this,function(oa){oa&&(oa instanceof Error||!oa.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},
hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(W){this._isSnapshotMode()&&(this._timeDefn=W,(W=this._mode)&&W.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(W,oa){this._timeOffset=W;this._timeOffsetUnits=oa;var ra=this._mode;ra&&ra.propertyChangeHandler(0);return this},setUseMapTime:function(W){this.useMapTime=W;this._toggleTime(!this.suspended);
(W=this._mode)&&W.propertyChangeHandler(0)},selectFeatures:function(W,oa,ra,R){oa=oa||Da.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;W=this._getShallowClone(W);var fa=this._map,ma=this,wa=C._fixDfd(new f(C._dfdCanceller));W.outFields=this.getOutFields();W.returnGeometry=!0;W.multipatchOption=this.multipatchOption;fa&&(W.outSpatialReference=new x(fa.spatialReference.toJson()));if(!this._applyQueryFilters(W,!0)){var Ea={features:[]};this._selectHandler(Ea,oa,ra,R,wa);return wa}if(fa=
this._canDoClientSideQuery(W))wa._pendingDfd=g(this._doQuery(W,fa)),wa._pendingDfd.then(function(La){Ea={features:La};ma._selectHandler(Ea,oa,ra,R,wa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,R,wa,!0),wa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,R,wa,!0),wa;var Ha=this;this._ts&&(W._ts=(new Date).getTime());fa=this._canFetchPBFForQuery(W);this._enableEditModeQuantization(W,
fa);(wa._pendingDfd=this._task.execute(W,null,null,fa?{format:"pbf"}:null)).addCallbacks(function(La){Ha._selectHandler(La,oa,ra,R,wa)},function(La){Ha._hasPartialSelectedFeatures=!0;Ha._hasSelectionError=!0;Ha._resolve([La],null,R,wa,!0)})}return wa},getSelectedFeatures:function(){var W=this._selectedFeatures,oa=[],ra;for(ra in W)W.hasOwnProperty(ra)&&oa.push(W[ra]);return oa},clearSelection:function(W){var oa=this._selectedFeatures,ra=this._mode,R;for(R in oa)oa.hasOwnProperty(R)&&(this._unSelectFeatureIIf(R,
ra),ra._removeFeatureIIf(R));this._selectedFeatures={};this._isSelOnly&&ra._applyTimeFilter(!0);if(!W)this.onSelectionClear();return this},setSelectionSymbol:function(W){if(this._selectionSymbol=W){var oa=this._selectedFeatures,ra;for(ra in oa)oa.hasOwnProperty(ra)&&oa[ra].setSymbol(W)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(W){W?(this.labelingInfo=W,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();
this.onLabelingInfoChange()},_fixLabelExpr:function(){var W=/\[([^\[\]]+)\]/ig,oa,ra=this,R=function(fa,ma){var wa=ra._getField(ma,!0);return"["+(wa&&wa.name||ma)+"]"};n.forEach(this.labelingInfo,function(fa){if(oa=fa.labelExpression)fa.labelExpression=oa.replace(W,R)})},_updateRequiredFieldsFromLabelingInfo:function(){var W=[];n.forEach(this.labelingInfo,function(oa){var ra=oa.labelExpressionInfo;if(oa.labelExpression){var R=/[\[\]]/ig;oa=oa.labelExpression.match(/\[[^\[\]]+\]/ig);(oa=n.map(oa,function(ma){return ma.replace(R,
"")}))&&(W=W.concat(oa))}if(ra){if(ra.value){var fa=/[\{\}]/ig;oa=ra.value.match(/\{[^\{\}]+\}/ig);(oa=n.map(oa,function(ma){return ma.replace(fa,"")}))&&(W=W.concat(oa))}ra.expression&&(oa=n.map(this.fields,function(ma){return ma.name},this),W=W.concat(J.extractFieldNames(ra.expression,oa)))}},this);W=n.map(W,function(oa){var ra=this.getField(oa);return ra?ra.name:oa},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(W))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],
e:4,f:1}],applyEdits:function(W,oa,ra,R,fa,ma){var wa=ma.assembly,Ea=ma.dfd;this._applyNormalized(W,wa&&wa[0]);this._applyNormalized(oa,wa&&wa[1]);this.onBeforeApplyEdits(W,oa,ra);var Ha={},La=this.objectIdField;wa={f:"json"};var Ya=!1;if(this._collection)ma={},ma.addResults=W?n.map(W,function(){Ya=!0;return{objectId:this._nextId++,success:!0}},this):null,ma.updateResults=oa?n.map(oa,function(eb){Ya=!0;var db=eb.attributes[La];Ha[db]=eb;return{objectId:db,success:!0}},this):null,ma.deleteResults=
ra?n.map(ra,function(eb){Ya=!0;return{objectId:eb.attributes[La],success:!0}},this):null,Ya?this._editHandler(ma,W,Ha,R,fa,Ea):this._resolve([ma.addResults,ma.updateResults,ma.deleteResults],null,R,Ea);else{W&&0<W.length&&(wa.adds=this._convertFeaturesToJson(W,0,1),Ya=!0);if(oa&&0<oa.length){for(ma=0;ma<oa.length;ma++){var Xa=oa[ma];Ha[Xa.attributes[La]]=Xa}wa.updates=this._convertFeaturesToJson(oa,0,0,1);Ya=!0}if(ra&&0<ra.length){oa=[];for(ma=0;ma<ra.length;ma++)oa.push(ra[ma].attributes[La]);wa.deletes=
oa.join(",");Ya=!0}if(Ya){var Ta=this;return v({url:this._url.path+"/applyEdits",content:k.mixin(wa,this._url.query),callbackParamName:"callback",load:function(eb){Ta._editHandler(eb,W,Ha,R,fa,Ea)},error:function(eb){Ta._resolve([eb],null,fa,Ea,!0)}},{usePost:!0})}this._resolve([],null,R,Ea)}},queryFeatures:function(W,oa,ra,R){return this._query("execute","onQueryFeaturesComplete",W,oa,ra,R)},queryRelatedFeatures:function(W,oa,ra){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",
W,oa,ra)},queryIds:function(W,oa,ra,R){return this._query("executeForIds","onQueryIdsComplete",W,oa,ra,R)},queryCount:function(W,oa,ra,R){return this._query("executeForCount","onQueryCountComplete",W,oa,ra,R)},queryExtent:function(W,oa,ra,R){return this._query("executeForExtent","onQueryExtentComplete",W,oa,ra,R)},queryAttachmentInfos:function(W,oa,ra){var R=this._url.path+"/"+W+"/attachments",fa=new f(C._dfdCanceller),ma=this;R=u.normalize(R);fa._pendingDfd=v({url:R,content:k.mixin({f:"json"},this._url.query),
callbackParamName:"callback",load:function(wa){wa=wa.attachmentInfos;var Ea;n.forEach(wa,function(Ha){Ea=q.objectToQuery({gdbVersion:ma._url.query&&ma._url.query.gdbVersion,layer:ma._url.query&&ma._url.query.layer,token:ma._getToken()});Ha.url=R+"/"+Ha.id+(Ea?"?"+Ea:"");Ha.objectId=W});ma._resolve([wa],"onQueryAttachmentInfosComplete",oa,fa)},error:function(wa){ma._resolve([wa],null,ra,fa,!0)}});return fa},addAttachment:function(W,oa,ra,R){return this._sendAttachment("add",W,oa,ra,R)},updateAttachment:function(W,
oa,ra,R,fa){ra.appendChild(l.create("input",{type:"hidden",name:"attachmentId",value:oa}));return this._sendAttachment("update",W,ra,R,fa)},deleteAttachments:function(W,oa,ra,R){var fa=this._url.path+"/"+W+"/deleteAttachments",ma=new f(C._dfdCanceller),wa=this;oa={f:"json",attachmentIds:oa.join(",")};ma._pendingDfd=v({url:fa,content:k.mixin(oa,this._url.query),callbackParamName:"callback",load:k.hitch(this,function(Ea){Ea=Ea.deleteAttachmentResults;Ea=n.map(Ea,function(Ha){Ha=new Ma(Ha);Ha.attachmentId=
Ha.objectId;Ha.objectId=W;return Ha});wa._resolve([Ea],"onDeleteAttachmentsComplete",ra,ma)}),error:function(Ea){wa._resolve([Ea],null,R,ma,!0)}},{usePost:!0});return ma},addType:function(W){var oa=this.types;if(oa){if(n.some(oa,function(ra){return ra.id==W.id?!0:!1}))return!1;oa.push(W)}else this.types=[W];return this._typesDirty=!0},deleteType:function(W){if(this._collection){var oa=this.types;if(oa){var ra=-1;n.some(oa,function(R,fa){return R.id==W?(ra=fa,!0):!1});if(-1<ra)return this._typesDirty=
!0,oa.splice(ra,1)[0]}}},toJson:function(){var W=this._cloneJson();if(W){W=W.layerDefinition?W:{layerDefinition:W};var oa=W.layerDefinition,ra=this._collection;this._updateLayerDefinition(oa);var R=null;if(!ra||this._fcAdded)R={geometryType:oa.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};W.featureSet=k.mixin({},W.featureSet||{},R);if(W.featureSet.transform){var fa=W.featureSet.transform;delete W.featureSet.transform;R=new O(W.featureSet);R.quantize(fa);W.featureSet=R.toJson()}ra&&
(W.nextObjectId=this._nextId,oa.capabilities=this.capabilities);return W}},getLayerDefinition:function(){var W=this._cloneJson();(W=W?W.layerDefinition||W:null)&&this._updateLayerDefinition(W);return W},getFeatureCollectionLayer:function(W){var oa=new f,ra=this.getLayerDefinition();if(!ra)return oa.reject(Error("layerDefinition not available")),oa.promise;W=W||[];var R=new Da({layerDefinition:ra,featureSet:{geometryType:ra.geometryType,features:n.map(W,function(wa){return wa.toJson()})}}),fa=R.on("load",
function(){fa.remove();ma.remove();oa.resolve(R)}),ma=R.on("error",function(){R.loaded||(fa.remove(),ma.remove(),oa.reject(R.loadError))});return oa.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},
onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_cloneJson:function(){var W=this._json;return k.isString(W)?r.fromJson(W):k.clone(W)},_updateLayerDefinition:function(W){if(this._collection&&
this._typesDirty){W.types=n.map(this.types||[],function(fa){return fa.toJson()});var oa=this.renderer,ra=this.labelingInfo,R=W.drawingInfo;!oa&&!ra||R||(R=W.drawingInfo={});R&&oa&&-1===oa.declaredClass.indexOf("TemporalRenderer")&&(R.renderer=oa.toJson());ra&&(R.labelingInfo=n.map(ra,function(fa){return fa.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(W){return!(W&&
"cancel"===W.dojoType)}).always(k.hitch(this,function(W){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:W})}))},_evalRefresh:function(W){(W.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var W=new f;setTimeout(k.hitch(this,function(){this._initializeArcadeEngine().always(function(){W.resolve()})}),0);return W.promise},_initializeArcadeEngine:function(){var W=[],oa=this.infoTemplate;oa&&oa.initializeArcadeEngine&&
W.push(oa.initializeArcadeEngine());(oa=this.renderer)&&oa.initializeArcadeEngine&&W.push(oa.initializeArcadeEngine());var ra=[];n.forEach(this.labelingInfo,function(R){(R=R.labelExpressionInfo)&&R.expression&&ra.push(R.expression)});W.push(L.initialize(ra));return F(W)},_isGeometryOperationsUsed:function(){var W=this.infoTemplate,oa=this.renderer,ra=this.labelingInfo;return W&&W.hasGeometryOperations&&W.hasGeometryOperations()||oa&&oa.hasGeometryOperations&&oa.hasGeometryOperations()||n.some(ra,
function(R){return J.hasGeometryOperations(R.labelExpressionInfo&&R.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var W=new f,oa=this,ra=this._url&&this._url.path;var R=ra&&ra.toLowerCase().indexOf("/rest/services");var fa=this.editFieldsInfo;fa=fa&&(fa.creatorField||fa.editorField);(this.userIsAdmin||fa)&&!this._getToken()&&-1<R&&t.id?(R=ra.substring(0,R)+"/rest/info",v({url:R,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ma){if(ma.owningSystemUrl)return t.id.checkSignInStatus(ma.owningSystemUrl+
"/sharing")}).then(function(ma){if(ma)return t.id.getCredential(ra)}).then(function(ma){ma&&oa._findCredential()}).always(function(){W.resolve()})):W.resolve();return W.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(ca):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(ua):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===Da.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var W=this.geometryType;
if("esriGeometryPolyline"===W||"esriGeometryPolygon"===W||"esriGeometryMultipoint"===W||this.hasXYFootprint())var oa=this.maxRecordCountForAuto;else"esriGeometryPoint"===W&&(oa=this.maxPointCountForAuto);return oa},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(W){this._lastExceedsLimitResult=W=(W=W&&W.features&&W.features[0])&&W.attributes&&W.attributes.exceedslimit;return!(this.mode!==Da.MODE_AUTO||this.isEditable()||0!==W||!(this._isPaginationAllowed()||
this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(W){this._canUseSnapshotMode(W)?this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var W=Da.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(W):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(W),this._evalSurfaceType(!0)):this.currentMode!==W&&this._setFetchMode(Da.MODE_AUTO,W)},_enableAutoOnDemandMode:function(){var W=
Da.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(W):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(W):this.currentMode!==W&&(this._setFetchMode(Da.MODE_AUTO,W),this._evalSurfaceType())},_evalModeFromFReduction:function(W){this.loaded&&(W&&this.isFeatureReductionEnabled()&&this._canCluster(W)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var W=this.currentMode;
W!==Da.MODE_SNAPSHOT&&W!==Da.MODE_STREAM&&W!==Da.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Da.MODE_AUTO?Da.MODE_AUTO:Da.MODE_SNAPSHOT,Da.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var W=this._preFReductionState;this._preFReductionState=null;!W||W.mode===this.mode&&W.currentMode===this.currentMode||(this._setFetchMode(W.mode,W.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(W){this._preFReductionState=
this._preFReductionState||{};this._preFReductionState.mode=Da.MODE_AUTO;this._preFReductionState.currentMode=W},_evalModeFromSurface:function(){this.hasWebGLSurface()?this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Da.MODE_AUTO?Da.MODE_AUTO:Da.MODE_ONDEMAND,Da.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var W=
this._preSurfaceChangeState;W&&(this._preSurfaceChangeState=null,this._setFetchMode(W.mode,W.currentMode))},_updatePreSurfaceChangeState:function(W){this._preSurfaceChangeState=this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Da.MODE_AUTO;this._preSurfaceChangeState.currentMode=W},_setFetchMode:function(W,oa,ra){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=W;this.currentMode=oa;ra=ra||this._getModeConstructor(oa);this._mode=new ra(this);this.queryPagination=
oa===Da.MODE_ONDEMAND&&-1===ra.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(W=this.getMap())&&W.loaded&&(this._resetMaxAllowableOffset(),this._mode.initialize(W),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(W){var oa;W===Da.MODE_SNAPSHOT?oa=ca:W===Da.MODE_ONDEMAND&&(oa=ua);return oa},_hasOnDemandDrillMode:function(){var W=
this._mode;W=W&&W.declaredClass;return!!(W&&-1<W.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=null);var W=this._queryLimit();W&&(this._lastExceedsLimitResult=null,this._limitPromise=W.then(k.hitch(this,function(oa){var ra=this.currentMode;this._evalModeFromFLimit(oa);return{modeChanged:this.currentMode!==ra}})).always(k.hitch(this,function(oa){this._limitPromise=null;return oa})));return this._limitPromise},
_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var W,oa,ra=new f(function(){clearTimeout(W);W=null;oa&&!oa.isFulfilled()&&oa.cancel();oa=null});this._exceedsLimitTimer=W=setTimeout(k.hitch(this,function(){this._exceedsLimitTimer=null;var R=new N,fa=new Y;fa.statisticType="exceedslimit";fa.maxPointCount=this.maxPointCountForAuto;fa.maxRecordCount=this.maxRecordCountForAuto;fa.maxVertexCount=this.maxVertexCountForAuto;fa.outStatisticFieldName=
"exceedslimit";R.outStatistics=[fa];oa=this.queryFeatures(R).promise.then(function(ma){ra.resolve(ma)}).otherwise(function(ma){ra.reject(ma)})}),0);return ra.promise}},_isAutoModeEnabled:function(){return this.mode===Da.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var W=this._editable,oa=k.trim(this.capabilities||""),ra=n.map(oa?oa.split(","):[],k.trim),R=n.map(oa?oa.toLowerCase().split(","):[],k.trim);oa=n.indexOf(R,"editing");var fa;R={Create:n.indexOf(R,"create"),Update:n.indexOf(R,
"update"),Delete:n.indexOf(R,"delete")};if(W&&-1===oa)ra.push("Editing");else if(!W&&-1<oa){W=[oa];for(fa in R)-1<R[fa]&&W.push(R[fa]);W.sort();for(fa=W.length-1;0<=fa;fa--)ra.splice(W[fa],1)}this.capabilities=ra.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(W){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var oa=this._mode;
oa&&(oa.suspend(),W&&oa.destroy())},onResume:function(W){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",k.hitch(this,this._evalRefresh));var oa=this._map,ra=this._getRenderer();if(W.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||ra&&(ra.latestObservationRenderer||ra.trackRenderer))&&
(this._trackManager=new Aa(this),this._trackManager.initialize(oa),this._childLayer=this._trackManager.container),ra&&"colors"in ra&&"blurRadius"in ra&&"maxPixelIntensity"in ra&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new T(this),this._heatmapManager.initialize(oa)),this._zoomConnect=c.connect(oa,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),ra=this._mode)ra._init||ra.initialize(oa),ra.startup()}else this._zoomEndHandler(),this._mode&&
this._mode.resume()},_zoomEndHandler:function(){var W=this._map;this._updateMaxOffset();this._prevScale=W.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var W=this._map;W&&W.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(W=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=W!=this.getMaxAllowableOffset())):this._setMaxOffset(W.extent.getWidth()/W.width,!W.extent.spatialReference.isWebMercator()))},
_getMaxOffsetForScale:function(){if(this._map){var W=this._map.getScale(),oa=this._calculatedScale,ra=this._calcMaxOffset,R=this._prevScale;return W>=oa&&(null==R||R<oa)?ra:W<oa&&(null==R||R>=oa)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var W=this._map;if(W&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var oa=this.generalizeForScale;this._calculatedScale=oa=this.maxScale?this.maxScale:this.minScale?
Math.min(oa,this.minScale):Math.min(oa,X.getScale(W,this.initialExtent));this._calcMaxOffset=W.extent.getWidth()/W.width/W.getScale()*oa}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(W){var oa=this._map;W&&this.timeInfo&&this.useMapTime&&oa?(this._mapTimeExtent=oa.timeExtent,this._timeConnect||(this._timeConnect=c.connect(oa,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,c.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(W){this._mapTimeExtent=
W;(W=this._mode)&&W.propertyChangeHandler(0)},_getOffsettedTE:function(W){var oa=this._timeOffset,ra=this._timeOffsetUnits;return W&&oa&&ra?W.offset(-1*oa,ra):W},_getTimeOverlap:function(W,oa){return W&&oa?W.intersection(oa):W||oa},_getTimeFilter:function(W){var oa=this.getTimeDefinition();if(oa){var ra=this._getTimeOverlap(oa,null);if(!ra)return[!1]}if(W){if(W=ra?this._getTimeOverlap(W,ra):W,!W)return[!1]}else W=ra;return[!0,W]},_getAttributeFilter:function(W){var oa=[],ra=this.getDefinitionExpression();
ra&&oa.push(ra);W&&oa.push(W);this.subtypeField&&this.subtypeCode&&oa.push(this.subtypeField+" \x3d "+this.subtypeCode);1<oa.length&&(oa=n.map(oa,function(R){return"("+R+")"}));return oa.length?oa.join(" AND "):null},_applyQueryFilters:function(W,oa){W.where=this._getAttributeFilter(W.where);W.returnGeometry&&null==W.maxAllowableOffset&&!W.quantizationParameters&&(W.maxAllowableOffset=this._maxOffset,W.quantizationParameters=this._quantizationParameters);oa&&this.supportsAdvancedQueries&&(W.orderByFields=
W.orderByFields||this.getOrderByFields());if(this.timeInfo){var ra=this._getTimeFilter(W.timeExtent);if(ra[0])W.timeExtent=ra[1];else return!1}return!0},_add:function(W){var oa=this._selectionSymbol,ra=W.attributes,R=this.visibilityField;oa&&this._isSelOnly&&W.setSymbol(oa);if(R&&ra&&ra.hasOwnProperty(R))W[ra[R]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(W,oa){var ra=[],R=this._map,fa;if((this._collection||
!this._isTable&&R)&&!(W.text||W.where&&W.where!==this.getDefinitionExpression()||W.orderByFields&&W.orderByFields.length&&(fa=this.getOrderByFields()||[])&&W.orderByFields.join()!==fa.join()||W.outStatistics||W.returnDistinctValues)){fa=this._isSnapshotMode();var ma=this._isSelOnly;R=fa?null:oa?this._getExtentOfTiles(R.extent):R.extent;var wa=W.geometry;if(wa){if(ma||W.spatialRelationship!==N.SPATIAL_REL_INTERSECTS||"extent"!==wa.type||!fa&&!R.contains(wa))return;ra.push(1)}if(R=W.objectIds)if(fa)ra.push(2);
else{wa=R.length;var Ea=this._mode,Ha=0,La;for(La=0;La<wa;La++)Ea._getFeature(R[La])&&Ha++;if(Ha===wa)ra.push(2);else return}if(this.timeInfo)if(R=W.timeExtent,wa=this._mapTimeExtent,fa)R&&ra.push(3);else if(ma){if(R)return}else if(wa)if(-1!==n.indexOf(ra,2))R&&ra.push(3);else if(-1!==n.indexOf(ra,1))R==wa&&ra.push(3);else return;else if(0<ra.length)R&&ra.push(3);else if(R)return;return 0<ra.length?ra:null}},_getAbsMid:function(W){return D.toAbsMid?D.toAbsMid(W):B.id.replace(/\/[^\/]*$/ig,"/")+W},
_doQuery:function(W,oa,ra){var R=[],fa=this.objectIdField,ma=this,wa=new f,Ea=new f,Ha=this.graphics;if(-1!==n.indexOf(oa,1)){var La=this.spatialIndex||this._map&&this._map.spatialIndex,Ya,Xa=W.geometry._normalize(null,!0);null==La&&V.autoSpatialIndexing?Ya=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(k.hitch(this,k.partial(this._getFromIndex,Xa,La)),function(Ta){Ea.resolve(k.hitch(this,k.partial(this._filterByExtent,Ha,Xa)))}):La&&(Ya=this._getFromIndex(Xa,La));Ya?
Ya.then(function(Ta){for(var eb=0;eb<Ta.length;eb++)Ta[eb].results&&(R=R.concat(Ta[eb].results));Ea.resolve(R)}).otherwise(function(Ta){Ea.reject(Ta)}):Ea.resolve(this._filterByExtent(Ha,Xa))}else Ea.resolve(Ha);Ea.then(function(Ta){R=Ta;if(-1!==n.indexOf(oa,2)){var eb=W.objectIds;R=n.filter(R,function(db){return-1<n.indexOf(eb,db.attributes[fa])})}-1!==n.indexOf(oa,3)&&ma.timeInfo&&(Ta=W.timeExtent,R=ma._filterByTime(R,Ta.startTime,Ta.endTime).match);ra&&(R=n.map(R,function(db){return db.attributes[fa]},
this));wa.resolve(R)});return wa},_getFromIndex:function(W,oa){oa=oa||this.spatialIndex||this._map.spatialIndex;W instanceof Array||(W=[W]);var ra=this.id;return d(n.map(W,function(R){return oa.intersects(R,ra)}))},_filterByExtent:function(W,oa){for(var ra=[],R=0,fa=W.length;R<fa;R++){var ma=W[R],wa=ma.geometry;wa&&(this.normalization&&oa.length?(oa[0].intersects(wa)||oa[1].intersects(wa))&&ra.push(ma):oa.intersects(wa)&&ra.push(ma))}return ra},_filterByTime:function(W,oa,ra){var R=this._startTimeField,
fa=this._endTimeField,ma;this._twoTimeFields||(ma=R||fa);var wa=z.isDefined,Ea=[],Ha=[],La,Ya=W.length;oa=oa?oa.getTime():-Infinity;ra=ra?ra.getTime():Infinity;if(ma)for(La=0;La<Ya;La++){var Xa=W[La];var Ta=Xa.attributes;R=Ta[ma];R>=oa&&R<=ra?Ea.push(Xa):Ha.push(Xa)}else for(La=0;La<Ya;La++)Xa=W[La],Ta=Xa.attributes,ma=Ta[R],Ta=Ta[fa],ma=wa(ma)?ma:-Infinity,Ta=wa(Ta)?Ta:Infinity,ma>=oa&&ma<=ra||Ta>=oa&&Ta<=ra||oa>=ma&&ra<=Ta?Ea.push(Xa):Ha.push(Xa);return{match:Ea,noMatch:Ha}},_getSizeVariables:function(W){return W&&
n.filter(W.getVisualVariablesForType("sizeInfo",!1),function(oa){return!(!oa.field&&!oa.valueExpression)})},_needClientSideSorting:function(W){return this._collection?!(!W||!W.length):n.some(W,function(oa){return!!oa.valueExpression})},_sortFeatures:function(W){var oa=this.renderer,ra=this._getSizeVariables(oa);if(W&&1<W.length&&this._needClientSideSorting(ra)){var R=ra[0],fa=this;W.sort(function(ma,wa){ma._layer||(ma._layer=fa);wa._layer||(wa._layer=fa);var Ea=oa._getDataValue(ma,R,"sizeInfo"),Ha=
oa._getDataValue(wa,R,"sizeInfo");return null==Ea?-1:null==Ha?1:Ha-Ea})}return W},_resolve:function(W,oa,ra,R,fa){oa&&this[oa].apply(this,W);ra&&ra.apply(null,W);R&&C._resDfd(R,W,fa)},_getShallowClone:function(W){var oa=new N,ra;for(ra in W)W.hasOwnProperty(ra)&&(oa[ra]=W[ra]);return oa},_canFetchPBF:function(){return!!(Ia&&Ja&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(W){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(W)&&this._isAutoSnapshotMode()||!(W.quantizationParameters||
!this.isEditable()&&this.supportsQuantizationEditMode)||W.outStatistics)},_enableEditModeQuantization:function(W,oa){W&&oa&&!W.quantizationParameters&&(W.quantizationParameters={mode:"edit"})},_enableCacheHint:function(W,oa){var ra=this.advancedQueryCapabilities;ra&&ra.supportsQueryWithCacheHint?null==W.cacheHint&&(W.cacheHint=!0):ra&&ra.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!W.resultType&&(W.resultType=oa||"coherent")},_isCacheHintSupported:function(){var W=this.advancedQueryCapabilities;
return W?!!(W.supportsQueryWithCacheHint||W.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(W){var oa=this.advancedQueryCapabilities;return W&&oa?!!(oa.supportsQueryWithCacheHint&&W.cacheHint||oa.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===W.resultType||"tile"===W.resultType)):!1},_query:function(W,oa,ra,R,fa,ma){var wa=this,Ea=this._map;ma=ma&&ma.snapToTiles;var Ha=new f(C._dfdCanceller),La=ra,Ya,Xa,Ta;if("executeRelationshipQuery"!==
W){La=this._getShallowClone(ra);var eb=this.getOutFields();La.outFields||(La.outFields=eb);La.outFields&&La.outFields.length&&(Xa=-1<n.indexOf(eb,"*")?!1:!n.every(La.outFields,function(gb){return-1<n.indexOf(eb,gb)}));La.returnGeometry=ra.hasOwnProperty("returnGeometry")?ra.returnGeometry:!ra.outStatistics;La.returnGeometry&&(La.multipatchOption=this.multipatchOption,null!=La.maxAllowableOffset||La.quantizationParameters)&&(ra=null!=La.maxAllowableOffset?La.maxAllowableOffset:La.quantizationParameters.tolerance,
null!=ra&&ra!==this.getMaxAllowableOffset()&&(Ta=!0));Ea&&(Ea=Ea&&Ea.spatialReference,(ra=La.outSpatialReference)?Ya=!ra.equals(Ea):La.outSpatialReference=new x(Ea.toJson()));ma&&(Ea=La.geometry)&&"extent"===Ea.type&&(La.geometry=this._getExtentOfTiles(Ea),Ea!==La.geometry&&this._enableCacheHint(La));if(!this._applyQueryFilters(La,"execute"===W&&!La.outStatistics)){switch(W){case "execute":var db=new O({features:[]});break;case "executeForIds":db=[];break;case "executeForCount":db=0;break;case "executeForExtent":db=
{}}this._resolve([db],oa,R,Ha);return Ha}if(ma="executeForExtent"!==W&&!Ya&&!Xa&&!Ta&&this._canDoClientSideQuery(La,ma))return Ha._pendingDfd=g(this._doQuery(La,ma,"executeForIds"===W||"executeForCount"===W)),Ha._pendingDfd.then(function(gb){switch(W){case "execute":db=new O;db.features=gb;break;case "executeForIds":db=gb;break;case "executeForCount":db=gb.length}wa._resolve([db],oa,R,Ha)}),Ha}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,fa,Ha,
!0),Ha;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,fa,Ha,!0),Ha;this._ts&&(La._ts=(new Date).getTime());ma="execute"===W&&this._canFetchPBFForQuery(La);this._enableEditModeQuantization(La,ma);(Ha._pendingDfd=this._task[W](La,null,null,ma?{format:"pbf"}:null)).addCallbacks(function(gb){var qb=!!La.outStatistics||Ya||Xa||Ta;if("execute"===W||"executeRelationshipQuery"===W)if("execute"===W){var sb=gb.features;var tb=sb.length;for(--tb;0<=
tb;tb--)if(sb[tb]._layer=wa,!qb&&!wa._isTable){var Cb=wa._mode._getFeature(sb[tb].attributes[wa.objectIdField]);Cb&&sb.splice(tb,1,Cb)}}else for(Cb in gb)if(gb.hasOwnProperty(Cb))for(sb=gb[Cb].features,tb=sb.length,--tb;0<=tb;tb--)sb[tb]._layer=wa;wa._resolve([gb],oa,R,Ha)},function(gb){wa._resolve([gb],null,fa,Ha,!0)});return Ha},_getExtentOfTiles:function(W){var oa=this._isOnDemandMode()&&this._mode._gridLayer||pa.createFromFeatureLayer({layer:this}),ra=this.getMap();ra=ra&&ra.getTargetExtent(W);
return oa&&ra&&oa.getExtentOfIntersectingCells(ra)||W},_convertFeaturesToJson:function(W,oa,ra,R){var fa=[],ma=this._selectionSymbol,wa=this.visibilityField,Ea,Ha=this.objectIdField;this.loaded&&(ra||R)&&(Ea=n.filter(this.fields,function(db){return!1===db.editable&&(!R||db.name!==Ha)}));for(ra=0;ra<W.length;ra++){var La=W[ra],Ya={},Xa=La.geometry,Ta=La.attributes,eb=La.symbol;!Xa||R&&this.loaded&&!this.allowGeometryUpdates||(Ya.geometry=Xa.toJson());wa?(Ya.attributes=Ta=k.mixin({},Ta),Ta[wa]=La.visible?
1:0):Ta&&(Ya.attributes=k.mixin({},Ta));Ya.attributes&&Ea&&Ea.length&&n.forEach(Ea,function(db){delete Ya.attributes[db.name]});eb&&eb!==ma&&(Ya.symbol=eb.toJson());fa.push(Ya)}return oa?fa:r.toJson(fa)},_selectHandler:function(W,oa,ra,R,fa){switch(oa){case Da.SELECTION_NEW:this.clearSelection(!0);var ma=!0;break;case Da.SELECTION_ADD:ma=!0;break;case Da.SELECTION_SUBTRACT:ma=!1}R=W.features;var wa=this._mode,Ea=[],Ha=this.objectIdField;if(ma)for(ma=0;ma<R.length;ma++){var La=R[ma];var Ya=La.attributes[Ha];
La=wa._addFeatureIIf(Ya,La);Ea.push(La);this._selectFeatureIIf(Ya,La,wa)}else for(ma=0;ma<R.length;ma++)La=R[ma],Ya=La.attributes[Ha],this._unSelectFeatureIIf(Ya,wa),Ya=wa._removeFeatureIIf(Ya),Ea.push(Ya||La);this._isSelOnly&&wa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===W.exceededTransferLimit&&(W.exceededTransferLimit=R.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!W.exceededTransferLimit;this._resolve([Ea,oa,W.exceededTransferLimit?{queryLimitExceeded:!0}:
null],"onSelectionComplete",ra,fa);if(W.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(W,oa,ra){var R=this._selectedFeatures,fa=R[W];fa||(ra._incRefCount(W),R[W]=oa,this._isTable||(this._setSelectSymbol(oa),oa.attr("data-selected","")));return fa||oa},_unSelectFeatureIIf:function(W,oa){var ra=this._selectedFeatures[W];ra&&(oa._decRefCount(W),delete this._selectedFeatures[W],this._isTable||(this._setUnSelectSymbol(ra),ra.attr("data-selected")));return ra},_setSelectSymbol:function(W){var oa=
this._selectionSymbol;oa&&!this._isSelOnly&&W.setSymbol(oa)},_setUnSelectSymbol:function(W){var oa=this._selectionSymbol;oa&&!this._isSelOnly&&oa===W.symbol&&W.setSymbol(null,!0)},_getOutFields:function(){var W=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);W=n.filter(W,function(ra,R,fa){return!!ra&&n.indexOf(fa,ra)===R});var oa=k.clone(this._outFields);if(oa){if(-1!==n.indexOf(oa,
"*"))return oa;n.forEach(W,function(ra){-1===n.indexOf(oa,ra)&&oa.push(ra)});return oa}return W},_checkFields:function(W){var oa=W||this._getOutFields();n.forEach(oa,function(ra){"*"!==ra&&this._getField(ra)},this);W||this._isTable||this._fserver||this._collection||this._isStream||n.some(this.fields,function(ra){return ra&&"esriFieldTypeGeometry"===ra.type?!0:!1})},_fixFieldCase:function(W,oa,ra){var R=W&&W[oa],fa;if(R&&!k.isFunction(R)){if(fa=!this._getField(R)&&this._getField(R,!0))R=W[oa]=fa.name;
ra&&ra.push(R)}return R},_fixRendererFields:function(){var W=this.renderer;this._orderBy=null;this._requiredFields=[];if(W&&0<this.fields.length){var oa=[],ra;W=n.filter([W,W.observationRenderer,W.latestObservationRenderer,W.trackRenderer],z.isDefined);var R=[].concat(W);n.forEach(W,function(fa){n.forEach(fa.rendererInfos,function(ma){ma.renderer&&R.push(ma.renderer)})});n.forEach(R,function(fa){this._fixFieldCase(fa,"attributeField",oa);this._fixFieldCase(fa,"attributeField2",oa);this._fixFieldCase(fa,
"attributeField3",oa);this._fixFieldCase(fa.rotationInfo,"field",oa);(ra=this._fixFieldCase(fa.sizeInfo,"field",oa))&&!this._orderBy&&(this._orderBy=[ra+" DESC"]);this._fixFieldCase(fa.sizeInfo,"normalizationField",oa);this._fixFieldCase(fa.colorInfo,"field",oa);this._fixFieldCase(fa.colorInfo,"normalizationField",oa);this._fixFieldCase(fa.field,"field",oa);this._fixFieldCase(fa.opacityInfo,"field",oa);this._fixFieldCase(fa.opacityInfo,"normalizationField",oa);n.forEach(fa.visualVariables,function(wa){ra=
this._fixFieldCase(wa,"field",oa);"sizeInfo"===wa.type&&ra&&!this._orderBy&&(this._orderBy=[ra+" DESC"]);this._fixFieldCase(wa,"normalizationField",oa)},this);var ma=n.map(this.fields,function(wa){return wa.name},this);ma=n.map(fa.getFieldsUsedInExpressions(ma),function(wa){var Ea=this.getField(wa);return Ea?Ea.name:wa},this);oa=oa.concat(ma);this._orderBy||!fa.addBreak||k.isFunction(fa.attributeField)||!fa.backgroundFillSymbol&&!this._hasSizeDiff(fa)||(this._orderBy=[fa.attributeField+" DESC"])},
this);this._requiredFields=n.filter(oa,z.isDefined)}},_hasSizeDiff:function(W){var oa=Number.MAX_VALUE,ra=-Number.MAX_VALUE,R,fa;n.forEach(W.infos,function(ma){if(fa=ma.symbol){R=0;switch(fa.type){case "simplemarkersymbol":R=fa.size;break;case "picturemarkersymbol":R=(fa.width+fa.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":R=fa.width;break;case "simplefillsymbol":case "picturefillsymbol":R=fa.outline&&fa.outline.width}R&&(oa=Math.min(oa,R),ra=Math.max(ra,R))}});return oa!==
Number.MAX_VALUE&&ra!==-Number.MAX_VALUE&&1<Math.abs(ra-oa)},getOrderByFields:function(){var W=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&W?n.filter(W,function(oa){oa=oa.split(" ")[0];return!!this._getField(oa,!0)},this):null},_createFields:function(W){var oa=W?W.length:0,ra,R=[];for(ra=0;ra<oa;ra++)R.push(new P(W[ra]));this.fields=R},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var W=this.fields,oa=W?W.length:0;if(50<oa&&this._canUseFieldsIndex()){var ra=new Map;
for(var R=new Map,fa=0;fa<oa;fa++){var ma=W[fa];ra.set(ma.name,ma);R.set(ma.name.toLowerCase(),ma)}ra={caseSensitive:ra,caseInsensitive:R}}this._fieldsIndex=ra;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var W=e.Map;return!("function"!==typeof e.Proxy||"function"!==typeof e.Proxy.revocable||"function"!==typeof W||!W.prototype||"function"!==typeof W.prototype.set)},_getField:function(W,oa){var ra=this.fields;if(!ra||0===ra.length)return null;oa&&(W=W.toLowerCase());this._createFieldsIndex();
var R=this._fieldsIndex;if(R)return R=oa?R.caseInsensitive:R.caseSensitive,R.get(W);var fa;n.some(ra,function(ma){var wa=!1;(wa=oa?ma&&ma.name.toLowerCase()===W?!0:!1:ma&&ma.name===W?!0:!1)&&(fa=ma);return wa});return fa},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:n.map(n.filter(this.fields,function(W){return!(!W||"esriFieldTypeDate"!==W.type)}),function(W){return W.name})});return this._dtOpts},_applyNormalized:function(W,oa){W&&oa&&n.forEach(W,function(ra,R){ra&&oa[R]&&ra.setGeometry(oa[R])})},
_editHandler:function(W,oa,ra,R,fa,ma){fa=W.addResults;var wa=W.updateResults;W=W.deleteResults;var Ea,Ha=this.objectIdField,La=this._mode,Ya=this._isTable;var Xa=this.editFieldsInfo;var Ta=this.getOutFields()||[];var eb=Xa&&Xa.creatorField,db=Xa&&Xa.creationDateField,gb=Xa&&Xa.editorField,qb=Xa&&Xa.editDateField;Xa=Xa&&Xa.realm;-1===n.indexOf(Ta,"*")&&(eb&&-1===n.indexOf(Ta,eb)&&(eb=null),db&&-1===n.indexOf(Ta,db)&&(db=null),gb&&-1===n.indexOf(Ta,gb)&&(gb=null),qb&&-1===n.indexOf(Ta,qb)&&(qb=null));
var sb=db||qb?(new Date).getTime():null,tb=eb||gb?this.getUserId():void 0;tb&&Xa&&(tb=tb+"@"+Xa);if(fa){var Cb=this.globalIdField;for(Xa=0;Xa<fa.length;Xa++)if(fa[Xa]=new Ma(fa[Xa]),!Ya){var Gb=fa[Xa];if(Gb.success){var nb=Gb.objectId;Ta=oa[Xa];(Ea=Ta._graphicsLayer)&&Ea!==this&&Ea.remove(Ta);Ea=Ta.attributes||{};Ea[Ha]=nb;nb=Gb.globalId;Cb&&nb&&(Ea[Cb]=nb);eb&&(Ea[eb]=tb);gb&&(Ea[gb]=tb);db&&(Ea[db]=sb);qb&&(Ea[qb]=sb);Ta.setAttributes(Ea);La._init&&La.drawFeature(Ta)}}}if(wa)for(Xa=0;Xa<wa.length;Xa++)if(wa[Xa]=
new Ma(wa[Xa]),!Ya&&(Gb=wa[Xa],Gb.success)){nb=Gb.objectId;Ta=ra[nb];if(oa=La._getFeature(nb))oa.geometry!==Ta.geometry&&Ta.geometry&&oa.setGeometry(ha.fromJson(Ta.geometry.toJson())),oa.attributes!==Ta.attributes&&Ta.attributes&&oa.setAttributes(k.mixin(oa.attributes,Ta.attributes)),this._repaint(oa,nb);Ta=oa||Ta;Ea=Ta.attributes||{};gb&&(Ea[gb]=tb);qb&&(Ea[qb]=sb);Ta.setAttributes(Ea)}if(W){ra=[];for(Xa=0;Xa<W.length;Xa++)if(W[Xa]=new Ma(W[Xa]),!Ya&&(Gb=W[Xa],Gb.success&&(nb=Gb.objectId,Ta=La._getFeature(nb))))this._unSelectFeatureIIf(nb,
La)&&ra.push(Ta),Ta._count=0,La._removeFeatureIIf(nb);if(0<ra.length)this.onSelectionComplete(ra,Da.SELECTION_SUBTRACT)}this._resolve([fa,wa,W],"onEditsComplete",R,ma)},_sendAttachment:function(W,oa,ra,R,fa){var ma=this;return v({url:this._url.path+"/"+oa+"/"+("add"===W?"addAttachment":"updateAttachment"),form:ra,content:k.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(wa){var Ea="add"===W?"onAddAttachmentComplete":
"onUpdateAttachmentComplete";wa=new Ma(wa["add"===W?"addAttachmentResult":"updateAttachmentResult"]);wa.attachmentId=wa.objectId;wa.objectId=oa;ma._resolve([wa],Ea,R);return wa}).addErrback(function(wa){ma._resolve([wa],null,fa,null,!0)})},_repaint:function(W,oa,ra){oa=z.isDefined(oa)?oa:W.attributes[this.objectIdField];oa in this._selectedFeatures&&this._selectionSymbol||W.setSymbol(W.symbol,ra)},_getKind:function(W){var oa=this._trackManager;return oa?oa.isLatestObservation(W)?1:0:0}});k.mixin(Da,
{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});U._createWrappers(Da);Object.defineProperty(Da.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(W){this._graphicsVal=W}});Object.defineProperty(Da.prototype,"name",
{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(W){this._name=W;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Da.prototype,"fields",{get:function(){return this._fields},set:function(W){W&&this._canUseFieldsIndex()&&(W=new Proxy(W,{set:k.hitch(this,function(oa,ra,R){if(ra)if("length"===ra)this._fieldsIndexDirty=!0;else{var fa=Number(ra);"number"!==typeof fa||isNaN(fa)||(this._fieldsIndexDirty=!0)}oa[ra]=
R;return!0})}));this._fields=W;this._fieldsIndexDirty=!0}});k.setObject("layers.FeatureLayer",Da,t);return Da})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(D,B,a){var c=D.forEach;return function(k){function n(e,d){l[d]=e;b.progress([e,d]);0===--g&&b.resolve(l)}var r,f;k instanceof Array?f=k:k&&"object"===typeof k&&(r=k);var m=[];if(r){f=[];for(var q in r)Object.hasOwnProperty.call(r,q)&&(m.push(q),f.push(r[q]));var l={}}else f&&(l=[]);if(!f||!f.length)return(new B).resolve(l);
var b=new B;b.promise.always(function(){l=m=null});var g=f.length;c(f,function(e,d){r||m.push(d);a(e,function(h){b.isFulfilled()||n(h,m[d])},function(h){b.isFulfilled()||n(h,m[d])})});return b.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(D,B,a,c,k,n,r){D=D(r,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(f,m){if(f&&!f.declaredClass){var q=f;this.symbol=
(f=q.symbol)&&(f.declaredClass?f:n.fromJson(f,m));this.label=q.label;this.description=q.description}else this.symbol=f},getSymbol:function(f){return this.symbol},toJson:function(){var f=B.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return k.fixJson(f)}});B.setObject("renderer.SimpleRenderer",D,c);return D})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),
function(D,B,a,c,k,n,r,f,m,q){var l=Math.PI;D=D(null,{declaredClass:"esri.renderer.Renderer",constructor:function(b){this._cache={};if(b&&!b.declaredClass){this.rotationInfo=b.rotationInfo;if(!this.rotationInfo){var g=b.rotationType,e=b.rotationExpression;if(g||e)this.rotationInfo={type:g,expression:e}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(b.sizeInfo));this.setColorInfo(this._readColorInfo(b.colorInfo));this.setOpacityInfo(this._readOpacityInfo(b.transparencyInfo));
this.setVisualVariables(this._readVariables(b.visualVariables));this.setAuthoringInfo(b.authoringInfo)}this.getSymbol=B.hitch(this,this.getSymbol)},getSymbol:function(b){},_readSizeInfo:function(b){if(b){var g=b.minSize,e=b.maxSize;g&&(b.minSize="number"===typeof g?k.pt2px(g):this._readSizeInfo(g));e&&(b.maxSize="number"===typeof e?k.pt2px(e):this._readSizeInfo(e));b.stops&&a.forEach(b.stops,function(d){d.size&&"number"===typeof d.size&&(d.size=k.pt2px(d.size))})}return b},_readColorInfo:function(b){b&&
(a.forEach(b.colors,function(g,e){B.isArray(g)&&(b.colors[e]=r.toDojoColor(g))}),a.forEach(b.stops,function(g,e){g.color&&B.isArray(g.color)&&(b.stops[e].color=r.toDojoColor(g.color))}));return b},_readOpacityInfo:function(b){if(b){var g=B.mixin({},b);g.transparencyValues&&(g.opacityValues=a.map(g.transparencyValues,function(e){return 1-e/100}),delete g.transparencyValues);g.stops&&(g.stops=a.map(g.stops,function(e){e=B.mixin({},e);e.opacity=1-e.transparency/100;delete e.transparency;return e}))}return g},
_readVariables:function(b){b&&(b=a.map(b,function(g){"sizeInfo"===g.type?g=this._readSizeInfo(g):"colorInfo"===g.type?g=this._readColorInfo(g):"transparencyInfo"===g.type&&(g=this._readOpacityInfo(g),g.type="opacityInfo");return g},this));return b},setAuthoringInfo:function(b){this.authoringInfo=b},setRotationInfo:function(b){if(b=this.rotationInfo="string"===typeof b?{field:b}:b){if(b.expression&&!B.isFunction(b.expression)&&!b.field){var g=b.expression.match(this.rotationRE);g&&g[1]&&(b.field=g[1])}b.rotationType=
b.type}this._cache.rotationInfo=this._processRotationInfo(b);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(b){b&&!b.rotationType&&(b.rotationType="geographic");return this._createCache(b)},getRotationAngle:function(b,g){var e=this._getVarInfo(g&&g.rotationInfo,"rotationInfo"),d=e.variable;e=this._cache[e.cacheKey];var h="arithmetic"===this._getRotationType(d),t=e&&e.hasExpr,z=null;if(d.field||t)z=this._getDataValue(b,d,null,e),null!=z&&(z=(z+(h?-90:0))*(h?-1:1));return z},
_getRotationType:function(b){return b&&("rotationInfo"===b.type?b.rotationType:b.type)},_getDataValue:function(b,g,e,d,h){d||(d=this._getVarInfo(g,e),g=d.variable,d=this._cache[d.cacheKey],"sizeInfo"===e&&(d=d.root));return b._getDataValue(g,d,m,h)},setVisualVariables:function(b){var g=this._cache;a.forEach(this.visualVariables,function(e,d){g.hasOwnProperty(d)&&(g[d]=null)},this);this.visualVariables=b;a.some(b,function(e){return!!e.target})&&b.sort(function(e,d){return e.target===d.target?0:e.target?
1:-1});a.forEach(b,function(e,d){"colorInfo"===e.type?g[d]=this._processColorInfo(e):"opacityInfo"===e.type?g[d]=this._processOpacityInfo(e):"sizeInfo"===e.type?g[d]=this._processSizeInfo(e):"rotationInfo"===e.type&&(g[d]=this._processRotationInfo(e))},this);return this},getVisualVariableValues:function(b){var g=this.visualVariables,e;g&&(e=a.map(g,function(d){switch(d.type){case "sizeInfo":var h=this.getSize(b,{sizeInfo:d});break;case "colorInfo":h=this.getColor(b,{colorInfo:d});break;case "opacityInfo":h=
this.getOpacity(b,{opacityInfo:d});break;case "rotationInfo":h=this.getRotationAngle(b,{rotationInfo:d})}return{variable:d,value:h}},this));return e},getFieldsUsedInExpressions:function(b){var g=[];a.forEach(this._getCacheObjects(),function(e){e.syntaxTree&&(g=g.concat(m.extractFieldNames(e.syntaxTree,b)))});g.sort();return a.filter(g,function(e,d){return 0===d||g[d-1]!==e})},hasGeometryOperations:function(){return a.some(this._getCacheObjects(),function(b){return b.syntaxTree?m.hasGeometryOperations(b.syntaxTree):
!1})},initializeArcadeEngine:function(){var b=[];a.forEach(this._getCacheObjects(),function(g){g.syntaxTree&&b.push(g.syntaxTree)});return q.initialize(b)},hasVisualVariables:function(b,g){return b?!!this.getVisualVariablesForType(b,g):!!(this.getVisualVariablesForType("sizeInfo",g)||this.getVisualVariablesForType("colorInfo",g)||this.getVisualVariablesForType("opacityInfo",g)||this.getVisualVariablesForType("rotationInfo",g))},getVisualVariablesForType:function(b,g){var e=this.visualVariables;if(!g&&
this[b]){"rotationInfo"===b&&(this[b].rotationType=this[b].type);var d=[this[b]]}else e&&(d=a.filter(e,function(h){return h.type===b&&("string"===typeof g?h.target===g:!1===g?!h.target:!0)}))&&0===d.length&&(d=void 0);return d},setSizeInfo:function(b){this.sizeInfo=this.proportionalSymbolInfo=b;this._cache.sizeInfo=this._processSizeInfo(b);return this},_processSizeInfo:function(b){return b&&{root:this._createCache(b),minSize:this._createCache(b.minSize),maxSize:this._createCache(b.maxSize)}},_convertExpressionToArcade:function(b){b&&
b.expression&&(b.valueExpression="$view.scale")},_getVarInfo:function(b,g){if(b&&b.type===g){var e=a.indexOf(this.visualVariables,b);b=this.visualVariables[e]}else e=g,b=this[g];return{variable:b,cacheKey:e}},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},getSize:function(b,g){var e=this._getVarInfo(g&&g.sizeInfo,"sizeInfo"),d=e.variable;e=this._cache[e.cacheKey];var h=null;if(d){var t=d.minSize;h=d.maxSize;t="object"===typeof t&&t?this._getSize(b,t,e&&e.minSize,g):t;h="object"===
typeof h&&h?this._getSize(b,h,e&&e.maxSize,g):h;h=this._getSize(b,d,e&&e.root,g,[t,h])}return h},_getSize:function(b,g,e,d,h){var t=g.stops,z=0,v=e&&e.hasExpr,y=e&&e.ipData,C=e&&e.isScaleDriven,F="object"===typeof b&&!!b,x="number"===typeof b?b:null;if(g.field||C||v){var u=d&&d.scale;v=h?h[0]:g.minSize;h=h?h[1]:g.maxSize;var w=g.minDataValue,A=g.maxDataValue,E=g.valueUnit||"unknown",G=g.valueRepresentation,H=g.scaleBy,K=d&&d.shape;C?x=u:"number"!==typeof x&&F&&(x=this._getDataValue(b,g,null,e));if(!this._isValidNumber(x))return null;
if(t)v=this._lookupData(x,y),x=v[0],h=v[1],x===h?z=t[x].size:(x=t[x].size,t=t[h].size,z=x+(t-x)*v[2]);else if(null!=v&&null!=h&&null!=w&&null!=A)x<=w?z=v:x>=A?z=h:(t=(x-w)/(A-w),"area"===H&&K?(v=(x="circle"===K)?l*Math.pow(v/2,2):v*v,t=v+t*((x?l*Math.pow(h/2,2):h*h)-v),z=x?2*Math.sqrt(t/l):Math.sqrt(t)):z=v+t*(h-v));else if("unknown"===E)null!=v&&null!=w&&(v&&w?(t=x/w,z="circle"===K?2*Math.sqrt(t*Math.pow(v/2,2)):"square"===K||"diamond"===K||"image"===K?Math.sqrt(t*Math.pow(v,2)):t*v):z=x+(v||w),
z=z<v?v:z,null!=h&&z>h&&(z=h));else{t=(d&&d.resolution?d.resolution:1)*this._meterIn[E];if("area"===G)z=Math.sqrt(x/l)/t,z*=2;else if(z=x/t,"radius"===G||"distance"===G)z*=2;null!=v&&z<v&&(z=v);null!=h&&z>h&&(z=h)}}else z=t&&t[0]&&t[0].size,null==z&&(z=g.minSize);return z=isNaN(z)?0:z},getSizeRangeAtScale:function(b,g){var e=this._getVarInfo(b,"sizeInfo"),d=this._cache[e.cacheKey],h={scale:g};if((b=e.variable)&&g){e=b.minSize;var t=b.maxSize,z=b.stops;z&&z.length?(e=z[0].size,d=z[z.length-1].size):
(e="object"===typeof e&&e?this._getSize({},e,d&&d.minSize,h):e,d="object"===typeof t&&t?this._getSize({},t,d&&d.maxSize,h):t);if(null!=e||null!=d){if(e>d){var v=d;d=e;e=v}v={minSize:e,maxSize:d}}}return v},setColorInfo:function(b){this.colorInfo=b;this._cache.colorInfo=this._processColorInfo(b);return this},_createCache:function(b,g){var e=f.createAttributeCache(b,g);e&&(e.ipData=this._interpolateData(b));return e},_getCacheObjects:function(b){var g;b=b||this._cache;var e=[];for(g in b){var d=b[g];
b.hasOwnProperty(g)&&d&&"object"===typeof d&&(d.hasOwnProperty("idSource")?e.push(d):e=e.concat(this._getCacheObjects(d)))}return e},_processColorInfo:function(b){b&&(a.forEach(b.colors,function(g,e){B.isArray(g)&&(b.colors[e]=new r(g))}),a.forEach(b.stops,function(g,e){g.color&&B.isArray(g.color)&&(b.stops[e].color=new r(g.color))}));return this._createCache(b)},getColor:function(b,g){var e=this._getVarInfo(g&&g.colorInfo,"colorInfo");return this._getColorComponent(b,e.variable,this._cache[e.cacheKey])},
setOpacityInfo:function(b){this.opacityInfo=b;this._cache.opacityInfo=this._processOpacityInfo(b);return this},_processOpacityInfo:function(b){return this._createCache(b)},getOpacity:function(b,g){var e=this._getVarInfo(g&&g.opacityInfo,"opacityInfo");return this._getColorComponent(b,e.variable,this._cache[e.cacheKey],!0)},_getColorComponent:function(b,g,e,d,h){var t="number"===typeof b?b:null,z=e&&e.hasExpr,v=e&&e.ipData,y;g&&g.field||z?("number"!==typeof t&&"object"===typeof b&&b&&(t=this._getDataValue(b,
g,null,e)),this._isValidNumber(t)||(t=null),null!=t&&(y=d?this._getOpacity(t,g,v):this._getColor(t,g,v))):g&&(b=g.stops,d?(y=b&&b[0]&&b[0].opacity,null==y&&(y=g.opacityValues&&g.opacityValues[0])):y=b&&b[0]&&b[0].color||g.colors&&g.colors[0]);h&&(h.data=t,h.value=y);return h||y},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},_interpolateData:function(b){if(b)if(b.colors||b.opacityValues){var g=(b.colors||b.opacityValues).length,e=b.minDataValue,d=(b.maxDataValue-
e)/(g-1);var h=[];for(b=0;b<g;b++)h[b]=e+b*d}else b.stops&&(h=a.map(b.stops,function(t){return t.value}));return h},_getOpacity:function(b,g,e){b=this._lookupData(b,e);g=g||this.opacityInfo;if(b){e=b[0];var d=b[1];e===d?d=this._getOpacValue(g,e):(e=this._getOpacValue(g,e),g=this._getOpacValue(g,d),d=e+(g-e)*b[2])}return d},_getOpacValue:function(b,g){return b.opacityValues?b.opacityValues[g]:b.stops[g].opacity},_getColor:function(b,g,e){b=this._lookupData(b,e);g=g||this.colorInfo;if(b){var d=b[0];
e=b[1];d=d===e?this._getColorObj(g,d):r.blendColors(this._getColorObj(g,d),this._getColorObj(g,e),b[2])}return d},_getColorObj:function(b,g){return b.colors?b.colors[g]:b.stops[g].color},_lookupData:function(b,g){if(g){var e=0,d=g.length-1;a.some(g,function(t,z){if(b<t)return d=z,!0;e=z;return!1});var h=[e,d,(b-g[e])/(g[d]-g[e])]}return h},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,
"decimal-degrees":180/20015077},_writeSizeInfo:function(b){if(b){b=B.mixin({},b);this._convertExpressionToArcade(b);var g=b.minSize,e=b.maxSize;g&&(b.minSize="number"===typeof g?k.px2pt(g):this._writeSizeInfo(g));e&&(b.maxSize="number"===typeof e?k.px2pt(e):this._writeSizeInfo(e));if(g=b.legendOptions)if(b.legendOptions=B.mixin({},g),g=g.customValues)b.legendOptions.customValues=g.slice(0);b.stops&&(b.stops=a.map(b.stops,function(d){d=B.mixin({},d);d.size&&"number"===typeof d.size&&(d.size=k.px2pt(d.size));
return d}))}return b},_writeColorInfo:function(b){b&&(b=B.mixin({},b),b.colors&&(b.colors=a.map(b.colors,function(g){return r.toJsonColor(g)})),b.stops&&(b.stops=a.map(b.stops,function(g){g=B.mixin({},g);g.color&&(g.color=r.toJsonColor(g.color));return g})),b.legendOptions&&(b.legendOptions=B.mixin({},b.legendOptions)));return b},_writeOpacityInfo:function(b){if(b){var g=B.mixin({},b);g.opacityValues&&(g.transparencyValues=a.map(g.opacityValues,function(e){return 100*(1-e)}),delete g.opacityValues);
g.stops&&(g.stops=a.map(g.stops,function(e){e=B.mixin({},e);e.transparency=100*(1-e.opacity);delete e.opacity;return e}));g.legendOptions&&(g.legendOptions=B.mixin({},g.legendOptions))}return g},toJson:function(b){var g=this.visualVariables,e=B.clone(this.authoringInfo),d=b&&b.useLegacyRotationProperties,h=(b=(b=this.getVisualVariablesForType("rotationInfo",!1))&&b[0])&&b.field,t;b&&(b===this.rotationInfo||d)&&(t=b.expression||h&&(B.isFunction(h)?h:"["+h+"]"));g&&(g=a.map(g,function(z){"sizeInfo"===
z.type?z=this._writeSizeInfo(z):"colorInfo"===z.type?z=this._writeColorInfo(z):"opacityInfo"===z.type?(z=this._writeOpacityInfo(z),z.type="transparencyInfo"):"rotationInfo"===z.type&&(z=d?null:B.mixin({},z));return z},this),g=a.filter(g,function(z){return null!=z}));e&&a.forEach(e.visualVariables,function(z){"opacityInfo"===z.type&&(z.type="transparencyInfo")});return{rotationType:t&&(this._getRotationType(b)||"geographic"),rotationExpression:t,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:g,authoringInfo:e}}});B.setObject("renderer.Renderer",D,n);return D})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(D,B,a,c,k,n){var r={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(f){return"string"===typeof f?c(f,a.outputTypes.Hex):null},getAttributeIdSource:function(f){if(!f)return null;
var m=f.field,q=f.valueExpression,l=null;if(q)l=q;else if(D.isFunction(m))l=m.toString();else if(m){var b=(q=f.normalizationField)?"field":f.normalizationType;f=parseFloat(f.normalizationTotal);b&&(b=b.toLowerCase(),l=m.toLowerCase()+",norm:"+b,q?l+=","+q.toLowerCase():"percent-of-total"===b&&(m=f,"number"===typeof m&&!isNaN(m)&&Infinity!==m&&-Infinity!==m&&0!==f||(f=null),l+=","+f))}return l},createAttributeCache:function(f,m){if(!f)return null;var q=f.valueExpression,l=n.createSyntaxTree(q),b=r.getAttributeIdSource(f);
return{attributeInfo:f,isNumeric:!m,idSource:b,id:r.getAttributeId(b),hasExpr:!!q,compiledFunc:n.createFunction(l),syntaxTree:l,isScaleDriven:!!f.expression||r.viewScaleRE.test(q),dependsOnView:l?n.dependsOnView(l):!1,dependsOnGeometry:l?n.hasGeometryOperations(l):!1,isJSFunc:D.isFunction(f.field)}}};D.setObject("layers.support.attributeUtils",r,k);return r})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(D){D=D.getObject("dojox.encoding.digests",!0);D.outputTypes=
{Base64:0,Hex:1,String:2,Raw:3};D.addWords=function(B,a){var c=(B&65535)+(a&65535);return(B>>16)+(a>>16)+(c>>16)<<16|c&65535};D.stringToWord=function(B){for(var a=[],c=0,k=8*B.length;c<k;c+=8)a[c>>5]|=(B.charCodeAt(c/8)&255)<<c%32;return a};D.wordToString=function(B){for(var a=[],c=0,k=32*B.length;c<k;c+=8)a.push(String.fromCharCode(B[c>>5]>>>c%32&255));return a.join("")};D.wordToHex=function(B){for(var a=[],c=0,k=4*B.length;c<k;c++)a.push("0123456789abcdef".charAt(B[c>>2]>>c%4*8+4&15)+"0123456789abcdef".charAt(B[c>>
2]>>c%4*8&15));return a.join("")};D.wordToBase64=function(B){for(var a=[],c=0,k=4*B.length;c<k;c+=3)for(var n=(B[c>>2]>>c%4*8&255)<<16|(B[c+1>>2]>>(c+1)%4*8&255)<<8|B[c+2>>2]>>(c+2)%4*8&255,r=0;4>r;r++)8*c+6*r>32*B.length?a.push("\x3d"):a.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6*(3-r)&63));return a.join("")};D.stringToUtf8=function(B){for(var a="",c=-1,k,n;++c<B.length;)k=B.charCodeAt(c),n=c+1<B.length?B.charCodeAt(c+1):0,55296<=k&&56319>=k&&56320<=n&&57343>=
n&&(k=65536+((k&1023)<<10)+(n&1023),c++),127>=k?a+=String.fromCharCode(k):2047>=k?a+=String.fromCharCode(192|k>>>6&31,128|k&63):65535>=k?a+=String.fromCharCode(224|k>>>12&15,128|k>>>6&63,128|k&63):2097151>=k&&(a+=String.fromCharCode(240|k>>>18&7,128|k>>>12&63,128|k>>>6&63,128|k&63));return a};return D})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(D){function B(f,m){return f<<m|f>>>32-m}function a(f,m,q,l,b,g){return D.addWords(B(D.addWords(D.addWords(m,f),D.addWords(l,g)),
b),q)}function c(f,m,q,l,b,g,e){return a(m&q|~m&l,f,m,b,g,e)}function k(f,m,q,l,b,g,e){return a(m&l|q&~l,f,m,b,g,e)}function n(f,m,q,l,b,g,e){return a(q^(m|~l),f,m,b,g,e)}function r(f,m){f[m>>5]|=128<<m%32;f[(m+64>>>9<<4)+14]=m;for(var q=1732584193,l=-271733879,b=-1732584194,g=271733878,e=0;e<f.length;e+=16){var d=q,h=l,t=b,z=g;q=c(q,l,b,g,f[e+0],7,-680876936);g=c(g,q,l,b,f[e+1],12,-389564586);b=c(b,g,q,l,f[e+2],17,606105819);l=c(l,b,g,q,f[e+3],22,-1044525330);q=c(q,l,b,g,f[e+4],7,-176418897);g=c(g,
q,l,b,f[e+5],12,1200080426);b=c(b,g,q,l,f[e+6],17,-1473231341);l=c(l,b,g,q,f[e+7],22,-45705983);q=c(q,l,b,g,f[e+8],7,1770035416);g=c(g,q,l,b,f[e+9],12,-1958414417);b=c(b,g,q,l,f[e+10],17,-42063);l=c(l,b,g,q,f[e+11],22,-1990404162);q=c(q,l,b,g,f[e+12],7,1804603682);g=c(g,q,l,b,f[e+13],12,-40341101);b=c(b,g,q,l,f[e+14],17,-1502002290);l=c(l,b,g,q,f[e+15],22,1236535329);q=k(q,l,b,g,f[e+1],5,-165796510);g=k(g,q,l,b,f[e+6],9,-1069501632);b=k(b,g,q,l,f[e+11],14,643717713);l=k(l,b,g,q,f[e+0],20,-373897302);
q=k(q,l,b,g,f[e+5],5,-701558691);g=k(g,q,l,b,f[e+10],9,38016083);b=k(b,g,q,l,f[e+15],14,-660478335);l=k(l,b,g,q,f[e+4],20,-405537848);q=k(q,l,b,g,f[e+9],5,568446438);g=k(g,q,l,b,f[e+14],9,-1019803690);b=k(b,g,q,l,f[e+3],14,-187363961);l=k(l,b,g,q,f[e+8],20,1163531501);q=k(q,l,b,g,f[e+13],5,-1444681467);g=k(g,q,l,b,f[e+2],9,-51403784);b=k(b,g,q,l,f[e+7],14,1735328473);l=k(l,b,g,q,f[e+12],20,-1926607734);q=a(l^b^g,q,l,f[e+5],4,-378558);g=a(q^l^b,g,q,f[e+8],11,-2022574463);b=a(g^q^l,b,g,f[e+11],16,1839030562);
l=a(b^g^q,l,b,f[e+14],23,-35309556);q=a(l^b^g,q,l,f[e+1],4,-1530992060);g=a(q^l^b,g,q,f[e+4],11,1272893353);b=a(g^q^l,b,g,f[e+7],16,-155497632);l=a(b^g^q,l,b,f[e+10],23,-1094730640);q=a(l^b^g,q,l,f[e+13],4,681279174);g=a(q^l^b,g,q,f[e+0],11,-358537222);b=a(g^q^l,b,g,f[e+3],16,-722521979);l=a(b^g^q,l,b,f[e+6],23,76029189);q=a(l^b^g,q,l,f[e+9],4,-640364487);g=a(q^l^b,g,q,f[e+12],11,-421815835);b=a(g^q^l,b,g,f[e+15],16,530742520);l=a(b^g^q,l,b,f[e+2],23,-995338651);q=n(q,l,b,g,f[e+0],6,-198630844);g=
n(g,q,l,b,f[e+7],10,1126891415);b=n(b,g,q,l,f[e+14],15,-1416354905);l=n(l,b,g,q,f[e+5],21,-57434055);q=n(q,l,b,g,f[e+12],6,1700485571);g=n(g,q,l,b,f[e+3],10,-1894986606);b=n(b,g,q,l,f[e+10],15,-1051523);l=n(l,b,g,q,f[e+1],21,-2054922799);q=n(q,l,b,g,f[e+8],6,1873313359);g=n(g,q,l,b,f[e+15],10,-30611744);b=n(b,g,q,l,f[e+6],15,-1560198380);l=n(l,b,g,q,f[e+13],21,1309151649);q=n(q,l,b,g,f[e+4],6,-145523070);g=n(g,q,l,b,f[e+11],10,-1120210379);b=n(b,g,q,l,f[e+2],15,718787259);l=n(l,b,g,q,f[e+9],21,-343485551);
q=D.addWords(q,d);l=D.addWords(l,h);b=D.addWords(b,t);g=D.addWords(g,z)}return[q,l,b,g]}D.MD5=function(f,m){var q=m||D.outputTypes.Base64,l=r(D.stringToWord(f),8*f.length);switch(q){case D.outputTypes.Raw:return l;case D.outputTypes.Hex:return D.wordToHex(l);case D.outputTypes.String:return D.wordToString(l);default:return D.wordToBase64(l)}};D.MD5._hmac=function(f,m,q){q=q||D.outputTypes.Base64;var l=D.stringToWord(m);16<l.length&&(l=r(l,8*m.length));var b=[];m=[];for(var g=0;16>g;g++)b[g]=l[g]^
909522486,m[g]=l[g]^1549556828;f=r(b.concat(D.stringToWord(f)),512+8*f.length);f=r(m.concat(f),640);switch(q){case D.outputTypes.Raw:return f;case D.outputTypes.Hex:return D.wordToHex(f);case D.outputTypes.String:return D.wordToString(f);default:return D.wordToBase64(f)}};return D.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(D,B,a,c,k,n,r){function f(g){var e=new c;
g.then(function(d){if(!e.isFulfilled())return e.resolve(d)},function(d){if(!e.isFulfilled())return e.reject(d)});return e.promise}function m(g){return g.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var q={vars:{$feature:"any",$view:"any"}},l=/^\$(feature|aggregatedFeatures)\./i,b={_getSyntaxTree:function(g){return"string"===typeof g?b.createSyntaxTree(g):g},createSyntaxTree:function(g){try{var e=g?n.parseScript(g):null}catch(d){e=null}return e},createFunction:function(g,e){e=e||D.clone(q);var d=b._getSyntaxTree(g);
try{var h=d?n.compileScript(d,e):null}catch(t){h=null}return h},createExecContext:function(g,e){return{vars:{$feature:g?r.createFromGraphic(g):new r,$view:e&&e.view},spatialReference:e&&e.sr}},evalSyntaxTree:function(g,e){try{var d=n.executeScript(g,e)}catch(h){d=null}return d},executeFunction:function(g,e){try{var d=g?g(e):null}catch(h){d=null}return d},executeAsyncFunction:function(g,e){try{var d=g?f(g(e)):(new c).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(h){d=
(new c).reject(h)}return d},extractFieldNames:function(g,e){var d=b._getSyntaxTree(g);d=n.extractExpectedFieldLiterals(d);var h=[];B.forEach(d,function(z){l.test(z)&&(z=z.replace(l,""),h.push(z))});var t=B.filter(h,function(z){return-1!==z.indexOf("*")});h=B.filter(h,function(z){return-1===t.indexOf(z)});e&&B.forEach(t,function(z){var v=new RegExp("^"+z.split(/\*+/).map(m).join(".*")+"$","i");B.forEach(e,function(y){v.test(y)&&h.push(y)})});h.sort();return B.filter(h,function(z,v){return 0===v||h[v-
1]!==z})},dependsOnView:function(g){return b.hasVariable(g,"$view")},hasGeometryFunctions:function(g){return(g=b._getSyntaxTree(g))?n.scriptTouchesGeometry(g):!1},hasGeometryOperations:function(g){return(g=b._getSyntaxTree(g))?n.scriptUsesGeometryEngine(g):!1},enableGeometryOperations:function(){return f(n.enableGeometrySupport())},hasVariable:function(g,e){var d=b._getSyntaxTree(g);return d?n.referencesMember(d,e):!1},hasFunction:function(g,e){var d=b._getSyntaxTree(g);return d?n.referencesFunction(d,
e):!1},createFeatureSetFromLayer:function(g,e){e=e||{};var d=n.featureSetUtils();return d?d.constructFeatureSet(g,e.spatialReference,e.outFields,e.returnGeometry,e.cache):null},createFeatureSetFromLayerUrl:function(g,e){e=e||{};var d=n.featureSetUtils();return d?d.constructFeatureSetFromUrlRaw(g,e.spatialReference,e.outFields,e.returnGeometry,e.cache):null},createFeatureSetCollectionFromMap:function(g,e){var d=n.featureSetUtils();return d?d.createFeatureSetCollectionFromMap(g,g.spatialReference,e&&
e.cache):null},createFeatureSetCollectionFromServiceUrl:function(g,e){e=e||{};var d=n.featureSetUtils();return d?d.createFeatureSetCollectionFromService(g,e.spatialReference,e.cache):null},hasFeatureSetOperations:function(g){return(g=b._getSyntaxTree(g))?n.scriptUsesFeatureSet(g):!1},enableFeatureSetOperations:function(){return f(n.enableFeatureSetSupport().then(function(){var g=n.featureSetUtils();g&&g.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return f(n.enableAsyncSupport())}};
D.setObject("support.expressionUtils",b,k);return b})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has".split(" "),function(D,B,a,c,k,n,r,f,m){function q(L,M){if(null===E)throw Error("Async Arcade must be enabled for this script");return m("esri-csp-restrictions")||!1===u?function(N){return E.executeScript(L,N)}:k.compileScript(L,M,!0)}function l(L,M){void 0===M&&(M=
[]);return r.parseScript(L,M)}function b(L,M){if(!0===M.useAsync||!0===L.isAsync){if(null===E)throw Error("Async Arcade must be enabled for this script");return E.executeScript(L,M)}return n.executeScript(L,M)}function g(L,M){return n.referencesMember(L,M)}function e(L,M){void 0===M&&(M=[]);void 0===L.usesGeometry&&f.findScriptDependencies(L,M);return!0===L.usesGeometry}function d(){return H?H:H=h()}function h(){return a(this,void 0,void 0,function(){return c(this,function(L){return[2,new Promise(function(M,
N){D(["../geometry/geometryEngine","./functions/geomsync"],function(O,Y){A=!0;Y.setGeometryEngine(O);M(!0)},function(O){N(O)})})]})})}function t(){return null!==K?K:K=z()}function z(){return a(this,void 0,void 0,function(){var L,M,N;return c(this,function(O){switch(O.label){case 0:return[4,k.enableAsyncSupport()];case 1:return O.sent(),[4,new Promise(function(Y,ba){D(["./arcadeAsyncRuntime"],function(ha){Y(ha)},ba)})];case 2:E=O.sent();L=0;for(M=G;L<M.length;L++)N=M[L],E.extend(N),k.extend(N,"async");
G=null;return[2,!0]}})})}function v(){return E?!0:!1}function y(){return I?I:I=C()}function C(){return a(this,void 0,void 0,function(){var L;return c(this,function(M){switch(M.label){case 0:return[4,t()];case 1:return M.sent(),[4,new Promise(function(N,O){D(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(Y,ba,ha,U,X){N({featuresetutils:Y,libraries:[ba,ha,U,X]})},O)})];case 2:return L=M.sent(),J=L.featuresetutils,
E.extend(L.libraries),k.extend(L.libraries,"async"),w=!0,[2,!0]}})})}function F(L,M){void 0===M&&(M=[]);void 0===L.usesFeatureSet&&f.findScriptDependencies(L,M);return!0===L.usesFeatureSet}Object.defineProperty(B,"__esModule",{value:!0});B.featureSetUtils=B.scriptTouchesGeometry=B.loadScriptDependencies=B.scriptIsAsync=B.scriptUsesFeatureSet=B.enableFeatureSetSupportImpl=B.enableFeatureSetSupport=B.isGeometryEnabled=B.isAsyncEnabled=B.isFeatureSetSupportEnabled=B.enableAsyncSupportImpl=B.enableAsyncSupport=
B.enableGeometrySupportImpl=B.enableGeometrySupport=B.scriptUsesGeometryEngine=B.extractExpectedFieldLiterals=B.extractFieldLiterals=B.referencesFunction=B.referencesMember=B.executeScript=B.parseAndExecuteScript=B.scriptCheck=B.validateScript=B.parseScript=B.extend=B.compileScript=void 0;var x="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),u=function(){if(m("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(L){return!1}}(),
w=!1,A=!1,E=null,G=[];B.compileScript=function(L,M){return!0===M.useAsync||!0===L.isAsync?q(L,M):m("esri-csp-restrictions")?function(N){return n.executeScript(L,N)}:k.compileScript(L,M)};B.extend=function(L){n.extend(L);k.extend(L,"sync");null===E?G.push(L):(k.extend(L,"async"),E.extend(L))};B.parseScript=l;B.validateScript=function(L,M,N){void 0===N&&(N="");return r.validateScript(L,M,N)};B.scriptCheck=function(L,M,N,O){void 0===O&&(O="");return r.scriptCheck(L,M,N,O)};B.parseAndExecuteScript=function(L,
M,N){void 0===N&&(N=[]);L=r.parseScript(L,N);return b(L,M)};B.executeScript=b;B.referencesMember=g;B.referencesFunction=function(L,M){return n.referencesFunction(L,M)};B.extractFieldLiterals=function(L,M){void 0===M&&(M=!1);return r.extractFieldLiterals(L,M)};B.extractExpectedFieldLiterals=function(L){return r.extractExpectedFieldLiterals(L)};B.scriptUsesGeometryEngine=e;var H=null;B.enableGeometrySupport=d;B.enableGeometrySupportImpl=h;var K=null;B.enableAsyncSupport=t;B.enableAsyncSupportImpl=z;
B.isFeatureSetSupportEnabled=function(){return w};B.isAsyncEnabled=v;B.isGeometryEnabled=function(){return A};var I=null;B.enableFeatureSetSupport=y;B.enableFeatureSetSupportImpl=C;B.scriptUsesFeatureSet=F;B.scriptIsAsync=function(L,M){void 0===M&&(M=[]);void 0===L.isAsync&&f.findScriptDependencies(L,M);return!0===L.isAsync};B.loadScriptDependencies=function(L,M,N,O){void 0===N&&(N=[]);void 0===O&&(O=!1);return a(this,void 0,void 0,function(){var Y,ba;return c(this,function(ha){switch(ha.label){case 0:Y=
"string"===typeof L?l(L):L;ba=[];if(Y&&(!1===A&&(e(Y)||O)&&ba.push(d()),!1===v()&&(!0===Y.isAsync||M)&&ba.push(t()),!1===w)){if(!(ha=F(Y)))a:{ha=Y;if(N)for(var U=0,X=N;U<X.length;U++)if(g(ha,X[U])){ha=!0;break a}ha=!1}ha&&ba.push(y())}return ba.length?[4,Promise.all(ba)]:[3,2];case 1:return ha.sent(),[2,!0];case 2:return[2,!0]}})})};B.scriptTouchesGeometry=function(L){if(e(L))return!0;L=f.findFunctionCalls(L);for(var M=!1,N=0;N<L.length;N++)if(x.includes(L[N])){M=!0;break}return M};var J=null;B.featureSetUtils=
function(){return J}})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(D,B,a,c){function k(n){return n instanceof a?n:new a(function(r){r(n)})}return new (a||(a=Promise))(function(n,r){function f(l){try{q(c.next(l))}catch(b){r(b)}}function m(l){try{q(c["throw"](l))}catch(b){r(b)}}function q(l){l.done?n(l.value):k(l.value).then(f,m)}q((c=c.apply(D,B||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(D,
B){function a(q){return function(l){return c([q,l])}}function c(q){if(n)throw new TypeError("Generator is already executing.");for(;k;)try{if(n=1,r&&(f=q[0]&2?r["return"]:q[0]?r["throw"]||((f=r["return"])&&f.call(r),0):r.next)&&!(f=f.call(r,q[1])).done)return f;if(r=0,f)q=[q[0]&2,f.value];switch(q[0]){case 0:case 1:f=q;break;case 4:return k.label++,{value:q[1],done:!1};case 5:k.label++;r=q[1];q=[0];continue;case 7:q=k.ops.pop();k.trys.pop();continue;default:if(!(f=k.trys,f=0<f.length&&f[f.length-
1])&&(6===q[0]||2===q[0])){k=0;continue}if(3===q[0]&&(!f||q[1]>f[0]&&q[1]<f[3]))k.label=q[1];else if(6===q[0]&&k.label<f[1])k.label=f[1],f=q;else if(f&&k.label<f[2])k.label=f[2],k.ops.push(q);else{f[2]&&k.ops.pop();k.trys.pop();continue}}q=B.call(D,k)}catch(l){q=[6,l],r=0}finally{n=f=0}if(q[0]&5)throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}var k={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},n,r,f,m;return m={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(m[Symbol.iterator]=function(){return this}),m}}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H){function K(ea,na,V){try{return V(ea,null,na.arguments)}catch(Ia){throw Ia;}}function I(ea,na){try{switch(na.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return O(ea,na);case "VariableDeclaration":for(var V=[],Ia=0;Ia<na.declarations.length;Ia++)V.push(I(ea,na.declarations[Ia]));return V.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return N(ea,na);case "FunctionDeclaration":var Ja=
na.id.name.toLowerCase(),Da={isAsync:ea.isAsync,spatialReference:ea.spatialReference,console:ea.console,lrucache:ea.lrucache,interceptor:ea.interceptor,services:ea.services,symbols:ea.symbols,mangleMap:ea.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:ea.depthCounter+1,globalScope:ea.globalScope};if(64<Da.depthCounter)throw Error("Exceeded maximum function depth");V="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(Ia=0;Ia<na.params.length;Ia++){var W=na.params[Ia].name.toLowerCase(),oa=ia(ea);Da.localScope._SymbolsMap[W]=oa;Da.mangleMap[W]=oa;V+="lscope['"+oa+"']\x3darguments["+Ia.toString()+"];\n"}!0===ea.isAsync?(V=V+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(N(Da,na.body)+"\n return lastStatement; "),V=V+"});  }, runtimeCtx),"+(na.params.length+")")):V+=N(Da,na.body)+"\n return lastStatement; }, runtimeCtx),"+na.params.length+")";V+="\n lastStatement \x3d lc.voidOperation; \n";if(void 0!==
ea.globalScope[Ja])var ra="gscope['"+Ja+"']\x3d"+V;else void 0!==ea.globalScope._SymbolsMap[Ja]?ra="gscope['"+ea.globalScope._SymbolsMap[Ja]+"']\x3d"+V:(oa=ia(ea),ea.globalScope._SymbolsMap[Ja]=oa,ea.mangleMap[Ja]=oa,ra="gscope['"+oa+"']\x3d"+V);return ra;case "ReturnStatement":var R=null===na.argument?"return lc.voidOperation":"return "+I(ea,na.argument);return R;case "IfStatement":if("AssignmentExpression"===na.test.type||"UpdateExpression"===na.test.type)throw Error(e.nodeErrorMessage(na.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var fa=I(ea,na.test),ma=xa(ea),wa="var "+ma+" \x3d "+fa+";\n if ("+ma+" \x3d\x3d\x3d true) {\n"+M(ea,na.consequent)+"\n }\n";wa=null!==na.alternate?wa+("else if ("+ma+"\x3d\x3d\x3dfalse)   { \n"+M(ea,na.alternate)+"}\n"):wa+("else if ("+ma+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return wa+="else { lang.error({type: '"+na.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ea=
"AssignmentExpression"===na.expression.type?"lastStatement \x3d lc.voidOperation; "+I(ea,na.expression)+"; \n ":"lastStatement \x3d "+I(ea,na.expression)+"; ";return Ea;case "AssignmentExpression":return L(ea,na);case "UpdateExpression":return J(ea,na);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Ha=[];Ja=ra=0;for(Ia=na.quasis;Ja<Ia.length;Ja++){var La=Ia[Ja];Ha.push(La.value?JSON.stringify(La.value.cooked):JSON.stringify(""));!1===La.tail&&
(Ha.push(na.expressions[ra]?"lang.castString(lang.aCheck("+I(ea,na.expressions[ra])+", 'TemplateLiteral'))":""),ra++)}V="(["+Ha.join(",")+"]).join('')"}catch(yb){throw yb;}return V;case "TemplateElement":return JSON.stringify(na.value?na.value.cooked:"");case "ForStatement":V="lastStatement \x3d lc.voidOperation; \n";null!==na.init&&(V+=I(ea,na.init)+"; ");var Ya=xa(ea),Xa=xa(ea);V+="var "+Ya+" \x3d true; \n do { ";null!==na.update&&(V+=" if ("+Ya+"\x3d\x3d\x3dfalse) {\n "+I(ea,na.update)+"  \n}\n "+
Ya+"\x3dfalse; \n");null!==na.test&&(V+="var "+Xa+" \x3d "+I(ea,na.test)+"; ",V+="if ("+Xa+"\x3d\x3d\x3dfalse) { break; } else if ("+Xa+"!\x3d\x3dtrue) { lang.error({type: '"+na.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");V+=I(ea,na.body);null!==na.update&&(V+="\n "+I(ea,na.update));return V+("\n"+Ya+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ta=xa(ea),eb=xa(ea),db=xa(ea),gb="var "+Ta+" \x3d "+I(ea,na.right)+";\n";"VariableDeclaration"===
na.left.type&&(gb+=I(ea,na.left));var qb="VariableDeclaration"===na.left.type?na.left.declarations[0].id.name:na.left.name;qb=qb.toLowerCase();V="";null!==ea.localScope&&(void 0!==ea.localScope[qb]?V="lscope['"+qb+"']":void 0!==ea.localScope._SymbolsMap[qb]&&(V="lscope['"+ea.localScope._SymbolsMap[qb]+"']"));""===V&&(void 0!==ea.globalScope[qb]?V="gscope['"+qb+"']":void 0!==ea.globalScope._SymbolsMap[qb]&&(V="gscope['"+ea.globalScope._SymbolsMap[qb]+"']"));gb=gb+("if ("+Ta+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ta+") || lc.isString("+Ta+")) {var ")+(eb+"\x3d"+Ta+".length; \nfor(var ")+(db+"\x3d0; "+db+"\x3c"+eb+"; "+db+"++) {\n");gb+=V+"\x3d"+db+";\n";gb+=I(ea,na.body);gb+="\n}\n";gb+=" lastStatement \x3d lc.voidOperation; \n";gb+=" \n}\n";gb+="else if (lc.isImmutableArray("+Ta+")) {";gb=gb+("var "+eb+"\x3d"+Ta+".length(); \nfor(var ")+(db+"\x3d0; "+db+"\x3c"+eb+"; "+db+"++) {\n");gb+=V+"\x3d"+db+";\n";gb+=I(ea,na.body);gb+="\n}\n";gb+=" lastStatement \x3d lc.voidOperation; \n";gb+=" \n}\n";gb+="else if (( "+
Ta+" instanceof lang.Dictionary) || ( "+Ta+" instanceof lang.Feature)) {";gb=gb+("var "+eb+"\x3d"+Ta+".keys(); \nfor(var ")+(db+"\x3d0; "+db+"\x3c"+eb+".length; "+db+"++) {\n");gb+=V+"\x3d"+eb+"["+db+"];\n";gb+=I(ea,na.body);gb+="\n}\n";gb+=" lastStatement \x3d lc.voidOperation; \n";gb+=" \n}\n";ea.isAsync&&(gb+="else if (lc.isFeatureSet("+Ta+")) {",gb=gb+("var "+eb+"\x3d"+Ta+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(db+"\x3dlang. graphicToFeature( yield "+eb+".next(),"+Ta+"); "+db+"!\x3dnull; "+
db+"\x3dlang. graphicToFeature( yield "+eb+".next(),"+Ta+")) {\n")+(V+"\x3d"+db+";\n"),gb+=I(ea,na.body),gb+="\n}\n",gb+=" lastStatement \x3d lc.voidOperation; \n",gb+=" \n}\n");return gb+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ba(ea,na);case "MemberExpression":try{V=void 0;V=!0===na.computed?I(ea,na.property):"'"+na.property.name+"'";var sb="lang.member("+I(ea,na.object)+","+V+")"}catch(yb){throw yb;}return sb;case "Literal":return null===na.value||void 0===na.value?
"null":JSON.stringify(na.value);case "ThisExpression":throw Error(e.nodeErrorMessage(na,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==na.callee.type)throw Error(e.nodeErrorMessage(na,"RUNTIME","ONLYNODESSUPPORTED"));var tb=na.callee.name.toLowerCase();V="";null!==ea.localScope&&(void 0!==ea.localScope[tb]?V="lscope['"+tb+"']":void 0!==ea.localScope._SymbolsMap[tb]&&(V="lscope['"+ea.localScope._SymbolsMap[tb]+"']"));""===V&&(void 0!==ea.globalScope[tb]?V="gscope['"+tb+"']":
void 0!==ea.globalScope._SymbolsMap[tb]&&(V="gscope['"+ea.globalScope._SymbolsMap[tb]+"']"));if(""!==V){Ia="[";for(La=0;La<na.arguments.length;La++)0<La&&(Ia+=", "),Ia+=I(ea,na.arguments[La]);Ia+="]";Ha=ea.isAsync?"(yield lang.callfunc("+V+","+Ia+",runtimeCtx) )":"lang.callfunc("+V+","+Ia+",runtimeCtx)"}else throw Error(e.nodeErrorMessage(na,"RUNTIME","NOTFOUND"));}catch(yb){throw yb;}return Ha;case "UnaryExpression":try{var Cb="lang.unary("+I(ea,na.argument)+",'"+na.operator+"')"}catch(yb){throw yb;
}return Cb;case "BinaryExpression":try{var Gb="lang.binary("+I(ea,na.left)+","+I(ea,na.right)+",'"+na.operator+"')"}catch(yb){throw yb;}return Gb;case "LogicalExpression":try{if("AssignmentExpression"===na.left.type||"UpdateExpression"===na.left.type)throw Error(e.nodeErrorMessage(na.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===na.right.type||"UpdateExpression"===na.right.type)throw Error(e.nodeErrorMessage(na.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("\x26\x26"===na.operator||"||"===na.operator)var nb="(lang.logicalCheck("+I(ea,na.left)+") "+na.operator+" lang.logicalCheck("+I(ea,na.right)+"))";else throw Error(e.nodeErrorMessage(na,"RUNTIME","ONLYORORAND"));}catch(yb){throw yb;}return nb;case "ConditionalExpression":throw Error(e.nodeErrorMessage(na,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{V=[];for(Ia=0;Ia<na.elements.length;Ia++)"Literal"===na.elements[Ia].type?V.push(I(ea,na.elements[Ia])):V.push("lang.aCheck("+I(ea,na.elements[Ia])+
",'ArrayExpression')");var Ab="["+V.join(",")+"]"}catch(yb){throw yb;}return Ab;case "ObjectExpression":V="lang.dictionary([";for(Ia=0;Ia<na.properties.length;Ia++){var Ub=na.properties[Ia],Zb="Identifier"===Ub.key.type?"'"+Ub.key.name+"'":I(ea,Ub.key),Nb=I(ea,Ub.value);0<Ia&&(V+=",");V+="lang.strCheck("+Zb+",'ObjectExpression'),lang.aCheck("+Nb+", 'ObjectExpression')"}return V+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(e.nodeErrorMessage(na,"RUNTIME","NOTSUPPORTED"));
default:throw Error(e.nodeErrorMessage(na,"RUNTIME","UNREOGNISED"));}}catch(yb){throw yb;}}function J(ea,na){var V=null,Ia="";if("MemberExpression"===na.argument.type)return V=I(ea,na.argument.object),Ia=!0===na.argument.computed?I(ea,na.argument.property):"'"+na.argument.property.name+"'","lang.memberupdate("+V+","+Ia+",'"+na.operator+"',"+na.prefix+")";V=na.argument.name.toLowerCase();if(null!==ea.localScope){if(void 0!==ea.localScope[V])return"lang.update(lscope, '"+V+"','"+na.operator+"',"+na.prefix+
")";if(void 0!==ea.localScope._SymbolsMap[V])return"lang.update(lscope, '"+ea.localScope._SymbolsMap[V]+"','"+na.operator+"',"+na.prefix+")"}if(void 0!==ea.globalScope[V])return"lang.update(gscope, '"+V+"','"+na.operator+"',"+na.prefix+")";if(void 0!==ea.globalScope._SymbolsMap[V])return"lang.update(gscope, '"+ea.globalScope._SymbolsMap[V]+"','"+na.operator+"',"+na.prefix+")";throw Error("Variable not recognised");}function L(ea,na){var V=I(ea,na.right),Ia=null,Ja="";if("MemberExpression"===na.left.type)return Ia=
I(ea,na.left.object),Ja=!0===na.left.computed?I(ea,na.left.property):"'"+na.left.property.name+"'","lang.assignmember("+Ia+","+Ja+",'"+na.operator+"',"+V+")";Ia=na.left.name.toLowerCase();if(null!==ea.localScope){if(void 0!==ea.localScope[Ia])return"lscope['"+Ia+"']\x3dlang.assign("+V+",'"+na.operator+"', lscope['"+Ia+"'])";if(void 0!==ea.localScope._SymbolsMap[Ia])return"lscope['"+ea.localScope._SymbolsMap[Ia]+"']\x3dlang.assign("+V+",'"+na.operator+"', lscope['"+ea.localScope._SymbolsMap[Ia]+"'])"}if(void 0!==
ea.globalScope[Ia])return"gscope['"+Ia+"']\x3dlang.assign("+V+",'"+na.operator+"', gscope['"+Ia+"'])";if(void 0!==ea.globalScope._SymbolsMap[Ia])return"gscope['"+ea.globalScope._SymbolsMap[Ia]+"']\x3dlang.assign("+V+",'"+na.operator+"', gscope['"+ea.globalScope._SymbolsMap[Ia]+"'])";throw Error("Variable not recognised");}function M(ea,na){return"BlockStatement"===na.type?I(ea,na):"ReturnStatement"===na.type||"BreakStatement"===na.type||"ContinueStatement"===na.type?I(ea,na)+"; ":"UpdateExpression"===
na.type?"lastStatement \x3d "+I(ea,na)+"; ":"ExpressionStatement"===na.type?I(ea,na):"ObjectExpression"===na.type?"lastStatement \x3d "+I(ea,na)+"; ":I(ea,na)+"; "}function N(ea,na){for(var V="",Ia=0;Ia<na.body.length;Ia++)V="ReturnStatement"===na.body[Ia].type?V+(I(ea,na.body[Ia])+"; \n"):"BreakStatement"===na.body[Ia].type?V+(I(ea,na.body[Ia])+"; \n"):"ContinueStatement"===na.body[Ia].type?V+(I(ea,na.body[Ia])+"; \n"):"UpdateExpression"===na.body[Ia].type?V+("lastStatement \x3d "+I(ea,na.body[Ia])+
"; \n"):"ObjectExpression"===na.body[Ia].type?V+("lastStatement \x3d "+I(ea,na.body[Ia])+"; \n"):V+(I(ea,na.body[Ia])+" \n");return V}function O(ea,na){var V=null===na.init?null:I(ea,na.init);V===g.voidOperation&&(V=null);var Ia=na.id.name.toLowerCase();if(null!==ea.localScope){if(void 0!==ea.localScope[Ia])return"lscope['"+Ia+"']\x3d"+V+"; ";if(void 0!==ea.localScope._SymbolsMap[Ia])return"lscope['"+ea.localScope._SymbolsMap[Ia]+"']\x3d"+V+"; ";var Ja=ia(ea);ea.localScope._SymbolsMap[Ia]=Ja;ea.mangleMap[Ia]=
Ja;return"lscope['"+Ja+"']\x3d"+V+"; "}if(void 0!==ea.globalScope[Ia])return"gscope['"+Ia+"']\x3d"+V+"; ";if(void 0!==ea.globalScope._SymbolsMap[Ia])return"gscope['"+ea.globalScope._SymbolsMap[Ia]+"']\x3d"+V+"; ";Ja=ia(ea);ea.globalScope._SymbolsMap[Ia]=Ja;ea.mangleMap[Ia]=Ja;return"gscope['"+Ja+"']\x3d"+V+"; "}function Y(ea,na,V){na=na.toLowerCase();switch(na){case "hasz":return ea=ea.hasZ,void 0===ea?!1:ea;case "hasm":return ea=ea.hasM,void 0===ea?!1:ea;case "spatialreference":return na=ea.spatialReference._arcadeCacheId,
void 0===na&&(V=!0,Object.freeze&&Object.isFrozen(ea.spatialReference)&&(V=!1),V&&(Ba++,na=ea.spatialReference._arcadeCacheId=Ba)),ea=new m({wkt:ea.spatialReference.wkt,wkid:ea.spatialReference.wkid}),void 0!==na&&(ea._arcadeCacheId="SPREF"+na.toString()),ea}switch(ea.type){case "extent":switch(na){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ea=ea[na],void 0!==ea?ea:null;case "type":return"Extent"}break;case "polygon":switch(na){case "rings":return na=
ea.getCacheValue("_arcadeCacheId"),void 0===na&&(Ba++,na=Ba,ea.setCacheValue("_arcadeCacheId",na)),ea=new l(ea.rings,ea.spatialReference,!0===ea.hasZ,!0===ea.hasM,na);case "type":return"Polygon"}break;case "point":switch(na){case "x":case "y":case "z":case "m":return void 0!==ea[na]?ea[na]:null;case "type":return"Point"}break;case "polyline":switch(na){case "paths":return na=ea.getCacheValue("_arcadeCacheId"),void 0===na&&(Ba++,na=Ba,ea.setCacheValue("_arcadeCacheId",na)),ea=new l(ea.paths,ea.spatialReference,
!0===ea.hasZ,!0===ea.hasM,na);case "type":return"Polyline"}break;case "multipoint":switch(na){case "points":return na=ea.getCacheValue("_arcadeCacheId"),void 0===na&&(Ba++,na=Ba,ea.setCacheValue("_arcadeCacheId",na)),ea=new b(ea.points,ea.spatialReference,!0===ea.hasZ,!0===ea.hasM,na,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(V,"RUNTIME","PROPERTYNOTFOUND"));}function ba(ea,na){try{var V=na.name.toLowerCase();if(null!==ea.localScope){if(void 0!==ea.localScope[V])return"lscope['"+
V+"']";if(void 0!==ea.localScope._SymbolsMap[V])return"lscope['"+ea.localScope._SymbolsMap[V]+"']"}if(void 0!==ea.globalScope[V])return"gscope['"+V+"']";if(void 0!==ea.globalScope._SymbolsMap[V])return"gscope['"+ea.globalScope._SymbolsMap[V]+"']";throw Error(e.nodeErrorMessage(na,"RUNTIME","VARIABLENOTFOUND"));}catch(Ia){throw Ia;}}function ha(ea){return null===ea?"":g.isArray(ea)||g.isImmutableArray(ea)?"Array":g.isDate(ea)?"Date":g.isString(ea)?"String":g.isBoolean(ea)?"Boolean":g.isNumber(ea)?
"Number":ea instanceof f?"Attachment":ea instanceof r?"Portal":ea instanceof m?"Dictionary":g.isFeature(ea)?"Feature":ea instanceof A?"Point":ea instanceof E?"Polygon":ea instanceof G?"Polyline":ea instanceof w?"Multipoint":ea instanceof x?"Extent":g.isFunctionParameter(ea)?"Function":g.isFeatureSet(ea)?"FeatureSet":g.isFeatureSetCollection(ea)?"FeatureSetCollection":ea===g.voidOperation?"":"number"===typeof ea&&isNaN(ea)?"Number":"Unrecognised Type"}function U(ea,na,V,Ia){try{if(g.equalityTest(na[V],
Ia))return na[V+1];var Ja=na.length-V;return 1===Ja?na[V]:2===Ja?null:3===Ja?na[V+2]:U(ea,na,V+2,Ia)}catch(Da){throw Da;}}function X(ea,na,V,Ia){try{if(!0===Ia)return na[V+1];if(3===na.length-V)return na[V+2];var Ja=na[V+2];if(!1===g.isBoolean(Ja))throw Error("WHEN needs boolean test conditions");return X(ea,na,V+2,Ja)}catch(Da){throw Da;}}function Z(ea,na){var V=ea.length,Ia=Math.floor(V/2);if(0===V)return[];if(1===V)return[ea[0]];var Ja=Z(ea.slice(0,Ia),na);V=Z(ea.slice(Ia,V),na);for(Ia=[];0<Ja.length||
0<V.length;)if(0<Ja.length&&0<V.length){var Da=na(Ja[0],V[0]);isNaN(Da)&&(Da=0);0>=Da?(Ia.push(Ja[0]),Ja=Ja.slice(1)):(Ia.push(V[0]),V=V.slice(1))}else 0<Ja.length?(Ia.push(Ja[0]),Ja=Ja.slice(1)):0<V.length&&(Ia.push(V[0]),V=V.slice(1));return Ia}function P(ea,na){return a(this,void 0,void 0,function(){var V,Ia,Ja,Da;return c(this,function(W){switch(W.label){case 0:V=ea.length;Ia=Math.floor(V/2);if(0===V)return[2,[]];if(1===V)return[2,[ea[0]]];Ja=[P(ea.slice(0,Ia),na),P(ea.slice(Ia,V),na)];return[4,
Promise.all(Ja)];case 1:return Da=W.sent(),[2,da(Da[0],Da[1],na,[])]}})})}function da(ea,na,V,Ia){return a(this,void 0,void 0,function(){var Ja,Da;return c(this,function(W){switch(W.label){case 0:return Ja=Ia,0<ea.length||0<na.length?0<ea.length&&0<na.length?[4,V(ea[0],na[0])]:[3,2]:[3,4];case 1:return Da=W.sent(),isNaN(Da)&&(Da=1),0>=Da?(Ja.push(ea[0]),ea=ea.slice(1)):(Ja.push(na[0]),na=na.slice(1)),[2,da(ea,na,V,Ia)];case 2:if(0<ea.length)return Ja.push(ea[0]),ea=ea.slice(1),[2,da(ea,na,V,Ia)];
if(0<na.length)return Ja.push(na[0]),na=na.slice(1),[2,da(ea,na,V,Ia)];W.label=3;case 3:return[3,5];case 4:return[2,Ia];case 5:return[2]}})})}function ia(ea){ea.symbols.symbolCounter++;return"_T"+ea.symbols.symbolCounter.toString()}function xa(ea){ea.symbols.symbolCounter++;return"_Tvar"+ea.symbols.symbolCounter.toString()}function Ca(ea,na,V){var Ia={};ea||(ea={});V||(V={});Ia._SymbolsMap={};Ia.textformatting=1;Ia.infinity=1;Ia.pi=1;for(var Ja in na)Ia[Ja]=1;for(Ja in V)Ia[Ja]=1;for(Ja in ea)Ia[Ja]=
1;return Ia}function Fa(ea,na){for(var V={mode:na,compiled:!0,functions:{},signatures:[],standardFunction:K,standardFunctionAsync:K,evaluateIdentifier:Ma},Ia=0;Ia<ea.length;Ia++)ea[Ia].registerFunctions(V);if("sync"===na){for(var Ja in V.functions)ca[Ja]=new g.NativeFunction(V.functions[Ja]),ta.prototype[Ja]=ca[Ja];for(Ia=0;Ia<V.signatures.length;Ia++)e.addFunctionDeclaration(V.signatures[Ia],"sync")}else{for(Ja in V.functions)ua[Ja]=new g.NativeFunction(V.functions[Ja]),pa.prototype[Ja]=ua[Ja];for(Ia=
0;Ia<V.signatures.length;Ia++)e.addFunctionDeclaration(V.signatures[Ia],"async")}}function Ma(ea,na){var V=na.name;if("_SymbolsMap"===V)throw Error("Illegal");if(0<ea.localStack.length){if("_t"!==V.substr(0,2).toLowerCase()&&void 0!==ea.localStack[ea.localStack.length-1][V])return ea.localStack[ea.localStack.length-1][V];var Ia=ea.mangleMap[V];if(void 0!==Ia&&void 0!==ea.localStack[ea.localStack.length-1][Ia])return ea.localStack[ea.localStack.length-1][Ia]}if("_t"!==V.substr(0,2).toLowerCase()&&
void 0!==ea.globalScope[V]||1===ea.globalScope._SymbolsMap[V])return ea.globalScope[V];V=ea.mangleMap[V];if(void 0!==V)return ea.globalScope[V]}function Sa(ea){}Object.defineProperty(B,"__esModule",{value:!0});B.enableAsyncSupport=B.compileScript=B.referencesFunction=B.referencesMember=B.validateScript=B.extractExpectedFieldLiterals=B.extractFieldLiterals=B.executeScript=B.extend=B.functionHelper=void 0;var Ba=0,ca={};h.registerFunctions(ca,K);C.registerFunctions(ca,K);v.registerFunctions(ca,K);t.registerFunctions(ca,
K);y.registerFunctions(ca,K);ca["typeof"]=function(ea,na){return K(ea,na,function(V,Ia,Ja){g.pcCheck(Ja,1,1);V=ha(Ja[0]);if("Unrecognised Type"===V)throw Error("Unrecognised Type");return V})};ca.iif=function(ea,na){try{return K(ea,na,function(V,Ia,Ja){g.pcCheck(Ja,3,3);if(!1===g.isBoolean(Ja[0]))throw Error("IF Function must have a boolean test condition");return Ja[0]?Ja[1]:Ja[2]})}catch(V){throw V;}};ca.decode=function(ea,na){try{return K(ea,na,function(V,Ia,Ja){if(2>Ja.length)throw Error("Missing Parameters");
if(2===Ja.length)return Ja[1];if(0===(Ja.length-1)%2)throw Error("Must have a default value result.");return U(ea,Ja,1,Ja[0])})}catch(V){throw V;}};ca.when=function(ea,na){try{return K(ea,na,function(V,Ia,Ja){if(3>Ja.length)throw Error("Missing Parameters");if(0===Ja.length%2)throw Error("Must have a default value result.");V=Ja[0];if(!1===g.isBoolean(V))throw Error("WHEN needs boolean test conditions");return X(ea,Ja,0,V)})}catch(V){throw V;}};ca.top=function(ea,na){return K(ea,na,function(V,Ia,
Ja){g.pcCheck(Ja,2,2);if(g.isArray(Ja[0]))return g.toNumber(Ja[1])>=Ja[0].length?Ja[0].slice(0):Ja[0].slice(0,g.toNumber(Ja[1]));if(g.isImmutableArray(Ja[0]))return g.toNumber(Ja[1])>=Ja[0].length()?Ja[0].slice(0):Ja[0].slice(0,g.toNumber(Ja[1]));throw Error("Top cannot accept this parameter type");})};ca.first=function(ea,na){return K(ea,na,function(V,Ia,Ja){g.pcCheck(Ja,1,1);return g.isArray(Ja[0])?0===Ja[0].length?null:Ja[0][0]:g.isImmutableArray(Ja[0])?0===Ja[0].length()?null:Ja[0].get(0):null})};
ca.sort=function(ea,na){return K(ea,na,function(V,Ia,Ja){g.pcCheck(Ja,1,2);Ia=Ja[0];g.isImmutableArray(Ia)&&(Ia=Ia.toArray());if(!1===g.isArray(Ia))throw Error("Illegal Argument");if(1<Ja.length){if(!1===g.isFunctionParameter(Ja[1]))throw Error("Illegal Argument");var Da=function(fa,ma){return T.callfunc(Ja[1],[fa,ma],V)};return ea.isAsync?P(Ia,Da):Ia=Z(Ia,function(fa,ma){return Da(fa,ma)})}if(0===Ia.length)return[];for(var W={},oa=0;oa<Ia.length;oa++){var ra=ha(Ia[oa]);""!==ra&&(W[ra]=!0)}if(!0===
W.Array||!0===W.Dictionary||!0===W.Feature||!0===W.Point||!0===W.Polygon||!0===W.Polyline||!0===W.Multipoint||!0===W.Extent||!0===W.Function)return Ia.slice(0);oa=0;ra="";for(var R in W)oa++,ra=R;return Ia=1<oa||"String"===ra?Z(Ia,function(fa,ma){if(null===fa||void 0===fa||fa===g.voidOperation)return null===ma||void 0===ma||ma===g.voidOperation?0:1;if(null===ma||void 0===ma||ma===g.voidOperation)return-1;var wa=g.toString(fa),Ea=g.toString(ma);return wa<Ea?-1:wa===Ea?0:1}):"Number"===ra?Z(Ia,function(fa,
ma){return fa-ma}):"Boolean"===ra?Z(Ia,function(fa,ma){return fa===ma?0:ma?-1:1}):"Date"===ra?Z(Ia,function(fa,ma){return ma-fa}):Ia.slice(0)})};var ua={},ya;for(ya in ca)ua[ya]=new g.NativeFunction(ca[ya]);z.registerFunctions(ca,K);for(ya in ca)ca[ya]=new g.NativeFunction(ca[ya]);var ta=function(){};ta.prototype=ca;var pa=function(){};pa.prototype=ua;B.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:function(ea,na){for(var V=[],Ia=0;Ia<na.arguments.length;Ia++)V.push(I(ea,
na.arguments[Ia]));return V},standardFunction:K};B.extend=Fa;Fa([d],"sync");Fa([d],"async");B.executeScript=function(ea,na){return ea(na)};B.extractFieldLiterals=function(ea,na){void 0===na&&(na=!1);return e.findFieldLiterals(ea)};B.extractExpectedFieldLiterals=function(ea){return e.findExpectedFieldLiterals(ea)};B.validateScript=function(ea,na){return e.validateScript(ea,na,"sync")};B.referencesMember=function(ea,na){return e.referencesMember(ea,na)};B.referencesFunction=function(ea,na){return e.referencesFunction(ea,
na)};var Aa=0,T={error:function(ea,na,V){throw Error(e.nodeErrorMessage(ea,na,V));},__awaiter:function(ea,na,V,Ia){return new Promise(function(Ja,Da){function W(R){try{ra(Ia.next(R))}catch(fa){Da(fa)}}function oa(R){try{ra(Ia["throw"](R))}catch(fa){Da(fa)}}function ra(R){R.done?Ja(R.value):R.value&&R.value.then?R.value.then(W,oa):(Aa++,0===Aa%100?setTimeout(function(){Aa=0;W(R.value)},0):W(R.value))}ra((Ia=Ia.apply(ea,na||[])).next())})},functionDepthchecker:function(ea,na){return function(){na.depthCounter++;
na.localStack.push([]);if(64<na.depthCounter)throw Error("Exceeded maximum function depth");var V=ea.apply(this,arguments);if(F.isPromiseLike(V))return V.then(function(Ia){na.depthCounter--;--na.localStack.length;return Ia});na.depthCounter--;--na.localStack.length;return V}},castString:function(ea){return g.toString(ea)},aCheck:function(ea,na){if(g.isFunctionParameter(ea))throw Error(e.nodeErrorMessage({type:na},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return ea===g.voidOperation?null:ea},Dictionary:m,
Feature:q,dictionary:function(ea){for(var na={},V=0;V<ea.length;V+=2){if(g.isFunctionParameter(ea[V+1]))throw Error("Illegal Argument");if(!1===g.isString(ea[V]))throw Error("Illegal Argument");na[ea[V].toString()]=ea[V+1]===g.voidOperation?null:ea[V+1]}ea=new m(na);ea.immutable=!1;return ea},strCheck:function(ea){if(!1===g.isString(ea))throw Error("Illegal Argument");return ea},unary:function(ea,na){if(g.isBoolean(ea)){if("!"===na)return!ea;if("-"===na)return-1*g.toNumber(ea);if("+"===na)return 1*
g.toNumber(ea);if("~"===na)return~g.toNumber(ea);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:na,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===na)return-1*g.toNumber(ea);if("+"===na)return 1*g.toNumber(ea);if("~"===na)return~g.toNumber(ea);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:na,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(ea){if(!1===g.isBoolean(ea))throw Error(e.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return ea},logical:function(ea,na,V){if(g.isBoolean(ea)&&g.isBoolean(na))switch(V){case "||":return ea||na;case "\x26\x26":return ea&&na}throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(ea,na,V){switch(V){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(ea),g.toNumber(na),V);case "\x3d\x3d":return g.equalityTest(ea,
na);case "\x3d":return g.equalityTest(ea,na);case "!\x3d":return!g.equalityTest(ea,na);case "\x3c":return g.greaterThanLessThan(ea,na,V);case "\x3e":return g.greaterThanLessThan(ea,na,V);case "\x3c\x3d":return g.greaterThanLessThan(ea,na,V);case "\x3e\x3d":return g.greaterThanLessThan(ea,na,V);case "+":return g.isString(ea)||g.isString(na)?g.toString(ea)+g.toString(na):g.toNumber(ea)+g.toNumber(na);case "-":return g.toNumber(ea)-g.toNumber(na);case "*":return g.toNumber(ea)*g.toNumber(na);case "/":return g.toNumber(ea)/
g.toNumber(na);case "%":return g.toNumber(ea)%g.toNumber(na);default:throw Error(e.nodeErrorMessage({type:"BinaryExpression",operator:V,left:ea,right:na},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(ea,na,V){switch(na){case "\x3d":return ea===g.voidOperation?null:ea;case "/\x3d":return g.toNumber(V)/g.toNumber(ea);case "*\x3d":return g.toNumber(V)*g.toNumber(ea);case "-\x3d":return g.toNumber(V)-g.toNumber(ea);case "+\x3d":return g.isString(V)||g.isString(ea)?g.toString(V)+g.toString(ea):
g.toNumber(V)+g.toNumber(ea);case "%\x3d":return g.toNumber(V)%g.toNumber(ea);default:throw Error(e.nodeErrorMessage({type:"AssignmentExpression",operator:na,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(ea,na,V,Ia){var Ja=g.toNumber(ea[na]);ea[na]="++"===V?Ja+1:Ja-1;return!1===Ia?Ja:"++"===V?Ja+1:Ja-1},graphicToFeature:function(ea,na){return null===ea?null:q.createFromGraphicLikeObject(ea.geometry,ea.attributes,na)},memberupdate:function(ea,na,V,Ia){if(g.isArray(ea))if(g.isNumber(na)){0>
na&&(na=ea.length+na);if(0>na||na>=ea.length)throw Error("Assignment outside of array bounds");var Ja=g.toNumber(ea[na]);ea[na]="++"===V?Ja+1:Ja-1}else throw Error("Invalid Parameter");else if(ea instanceof m){if(!1===g.isString(na))throw Error("Dictionary accessor must be a string");if(!0===ea.hasField(na))Ja=g.toNumber(ea.field(na)),ea.setField(na,"++"===V?Ja+1:Ja-1);else throw Error("Invalid Parameter");}else if(g.isFeature(ea)){if(!1===g.isString(na))throw Error("Feature accessor must be a string");
if(!0===ea.hasField(na))Ja=g.toNumber(ea.field(na)),ea.setField(na,"++"===V?Ja+1:Ja-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(ea))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===Ia?Ja:"++"===V?Ja+1:Ja-1},assignmember:function(ea,na,V,Ia){if(g.isArray(ea))if(g.isNumber(na)){0>na&&(na=ea.length+na);if(0>na||na>ea.length)throw Error("Assignment outside of array bounds");if(na===ea.length&&"\x3d"!==V)throw Error("Invalid Parameter");ea[na]=this.assign(Ia,
V,ea[na])}else throw Error("Invalid Parameter");else if(ea instanceof m){if(!1===g.isString(na))throw Error("Dictionary accessor must be a string");if(!0===ea.hasField(na))ea.setField(na,this.assign(Ia,V,ea.field(na)));else{if("\x3d"!==V)throw Error("Invalid Parameter");ea.setField(na,this.assign(Ia,V,null))}}else if(g.isFeature(ea)){if(!1===g.isString(na))throw Error("Feature accessor must be a string");if(!0===ea.hasField(na))ea.setField(na,this.assign(Ia,V,ea.field(na)));else{if("\x3d"!==V)throw Error("Invalid Parameter");
ea.setField(na,this.assign(Ia,V,null))}}else{if(g.isImmutableArray(ea))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(ea,na){if(null===ea)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(ea instanceof m||g.isFeature(ea)){if(g.isString(na))return ea.field(na);throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(ea instanceof
u){if(g.isString(na))return Y(ea,na,"MemberExpression");throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isArray(ea)){if(g.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=ea.length+na);if(na>=ea.length||0>na)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ea[na]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,
property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isString(ea)){if(g.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=ea.length+na);if(na>=ea.length||0>na)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ea[na]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(ea)&&g.isNumber(na)&&isFinite(na)&&Math.floor(na)===
na){0>na&&(na=ea.length()+na);if(na>=ea.length()||0>na)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ea.get(na)}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(ea,na,V){return ea instanceof g.NativeFunction?ea.fn(V,{arguments:na,preparsed:!0}):ea instanceof g.SizzleFunction?ea.fn.apply(this,na):ea.apply(this,na)}};B.compileScript=
function(ea,na,V){void 0===na&&(na=null);void 0===V&&(V=!1);null===na&&(na={vars:{},customfunctions:{}});na={isAsync:V,globalScope:Ca(na.vars,V?ua:ca,na.customfunctions),localScope:null,mangleMap:{},console:Sa,lrucache:na.lrucache,interceptor:na.interceptor,services:na.services,symbols:{symbolCounter:0}};ea=I(na,ea.body[0].body);""===ea&&(ea="lc.voidOperation; ");na={lc:g,lang:T,mangles:na.mangleMap,postProcess:function(Ia){Ia instanceof g.ReturnResult&&(Ia=Ia.value);Ia instanceof g.ImplicitResult&&
(Ia=Ia.value);Ia===g.voidOperation&&(Ia=null);if(Ia===g.breakResult)throw Error("Cannot return BREAK");if(Ia===g.continueResult)throw Error("Cannot return CONTINUE");if(g.isFunctionParameter(Ia))throw Error("Cannot return FUNCTION");return Ia},prepare:function(Ia,Ja){var Da=Ia.spatialReference;if(null===Da||void 0===Da)Da=new H({wkid:102100});var W=Ia.vars,oa=Ia.customfunctions,ra=Ja?new pa:new ta;W||(W={});oa||(oa={});var R=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",
backwardslash:"\\"});R.immutable=!1;ra._SymbolsMap={textformatting:1,infinity:1,pi:1};ra.textformatting=R;ra.infinity=Number.POSITIVE_INFINITY;ra.pi=Math.PI;for(var fa in oa)ra[fa]=oa[fa],ra._SymbolsMap[fa]=1;for(fa in W)ra._SymbolsMap[fa]=1,ra[fa]=W[fa]&&"esri.Graphic"===W[fa].declaredClass?q.createFromGraphic(W[fa]):W[fa];return{localStack:[],isAsync:Ja,mangleMap:this.mangles,spatialReference:Da,globalScope:ra,abortSignal:void 0===Ia.abortSignal||null===Ia.abortSignal?{aborted:!1}:Ia.abortSignal,
localScope:null,services:Ia.services,console:Ia.console?Ia.console:Sa,lrucache:Ia.lrucache,interceptor:Ia.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",V?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
ea+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ea+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(na)};B.enableAsyncSupport=function(){return new Promise(function(ea,na){D(["./functions/geomasync"],function(V){Fa([V],"async");
ea(!0)},function(V){na(V)})})}})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||function(D){for(var B,a=1,c=arguments.length;a<c;a++){B=arguments[a];for(var k in B)Object.prototype.hasOwnProperty.call(B,k)&&(D[k]=B[k])}return D}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(D,B,a){if(a||2===arguments.length)for(var c=0,k=
B.length,n;c<k;c++)!n&&c in B||(n||(n=Array.prototype.slice.call(B,0,c)),n[c]=B[c]);return D.concat(n||Array.prototype.slice.call(B))}}()})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(D,B,a,c){return function(k){function n(r){var f=k.call(this)||this;f.immutable=!1;f.setField("url",r);f.immutable=!0;return f}a(n,k);return n}(c)})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var D=
function(B,a){D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,k){c.__proto__=k}||function(c,k){for(var n in k)Object.prototype.hasOwnProperty.call(k,n)&&(c[n]=k[n])};return D(B,a)};return function(B,a){function c(){this.constructor=B}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");D(B,a);B.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}()})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),
function(D,B,a,c,k,n,r){function f(q,l){void 0===l&&(l=!1);if(null===q||void 0===q)return null;if(n.isNumber(q))return n.toNumber(q);if(n.isBoolean(q))return n.toBoolean(q);if(n.isString(q))return n.toString(q);if(n.isDate(q))return n.toDate(q);if(n.isArray(q)){for(var b=[],g=0;g<q.length;g++)b.push(f(q[g],l));return b}g=new m;g.immutable=!1;for(var e=0,d=Object.keys(q);e<d.length;e++){var h=d[e];b=q[h];void 0!==b&&g.setField(h,f(b,l))}g.immutable=l;return g}var m=function(){function q(l){this.declaredClass=
"esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=l instanceof q?l.attributes:void 0===l?{}:null===l?{}:l}q.prototype.field=function(l){var b=l.toLowerCase(),g=this.attributes[l];if(void 0!==g)return g;for(var e in this.attributes)if(e.toLowerCase()===b)return this.attributes[e];throw Error("Field not Found : "+l);};q.prototype.setField=function(l,b){if(this.immutable)throw Error("Dictionary is Immutable");var g=l.toLowerCase();if(void 0===this.attributes[l])for(var e in this.attributes)if(e.toLowerCase()===
g){this.attributes[e]=b;return}this.attributes[l]=b};q.prototype.hasField=function(l){var b=l.toLowerCase();if(void 0!==this.attributes[l])return!0;for(var g in this.attributes)if(g.toLowerCase()===b)return!0;return!1};q.prototype.keys=function(){var l=[],b;for(b in this.attributes)l.push(b);return l=l.sort()};q.prototype.castToText=function(){var l="",b;for(b in this.attributes){""!==l&&(l+=",");var g=this.attributes[b];null==g?l+=JSON.stringify(b)+":null":n.isBoolean(g)||n.isNumber(g)||n.isString(g)?
l+=JSON.stringify(b)+":"+JSON.stringify(g):g instanceof r?l+=JSON.stringify(b)+":"+n.toStringExplicit(g):g instanceof k?l+=JSON.stringify(b)+":"+n.toStringExplicit(g):g instanceof Array?l+=JSON.stringify(b)+":"+n.toStringExplicit(g):g instanceof Date?l+=JSON.stringify(b)+":"+JSON.stringify(g):null!==g&&"object"===typeof g&&void 0!==g.castToText&&(l+=JSON.stringify(b)+":"+g.castToText())}return"{"+l+"}"};q.convertObjectToArcadeDictionary=function(l,b){void 0===b&&(b=!0);var g=new q;g.immutable=!1;
for(var e in l){var d=l[e];void 0!==d&&g.setField(e.toString(),f(d))}g.immutable=b;return g};q.convertJsonToArcade=function(l,b){void 0===b&&(b=!1);return f(l,b)};q.prototype.castAsJson=function(l){void 0===l&&(l=null);var b={};for(e in this.attributes){var g=this.attributes[e];if(void 0!==g){if(null===l||void 0===l?0:l.keyTranslate)var e=l.keyTranslate(e);b[e]=n.castAsJson(g,l)}}return b};q.prototype.castDictionaryValueAsJsonAsync=function(l,b,g,e,d){void 0===e&&(e=null);return a(this,void 0,void 0,
function(){var h;return c(this,function(t){switch(t.label){case 0:return[4,n.castAsJsonAsync(g,e,d)];case 1:return h=t.sent(),l[b]=h,[2,h]}})})};q.prototype.castAsJsonAsync=function(l,b){void 0===l&&(l=null);void 0===b&&(b=null);return a(this,void 0,void 0,function(){var g,e,d,h;return c(this,function(t){switch(t.label){case 0:g={};e=[];for(d in this.attributes){h=this.attributes[d];if(null===b||void 0===b?0:b.keyTranslate)d=b.keyTranslate(d);void 0!==h&&(n.isSimpleType(h)||h instanceof r||h instanceof
Date?g[d]=n.castAsJson(h,b):e.push(this.castDictionaryValueAsJsonAsync(g,d,h,l,b)))}return 0<e.length?[4,Promise.all(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,g]}})})};return q}();return m})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(D,B){return function(){function a(c){void 0===c&&(c=[]);this._elements=c}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(c){return this._elements[c]};a.prototype.toArray=function(){for(var c=
[],k=0;k<this.length();k++)c.push(this.get(k));return c};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y){function C(ca,ua,ya){return""===ua||null===ua||void 0===ua||ua===ya||ua===ya?ca:ca=ca.split(ua).join(ya)}function F(ca){return ca instanceof Ma||ca instanceof r||ca instanceof Sa}function x(ca){return u(ca)||A(ca)||H(ca)||w(ca)||null===ca||ca===B.voidOperation||"number"===typeof ca?!0:!1}function u(ca){return"string"===typeof ca||ca instanceof String}function w(ca){return"boolean"===typeof ca}function A(ca){return"number"===typeof ca}function E(ca){return ca instanceof
Array}function G(ca){return ca instanceof f}function H(ca){return ca instanceof Date}function K(ca,ua){if(!1===isNaN(ca)){if(void 0===ua||null===ua||""===ua)return ca.toString();ua=C(ua,"\u2030","");ua=C(ua,"\u00a4","");return z.format(ca,{pattern:ua})}return ca.toString()}function I(ca,ua){var ya=t.DateTime.fromJSDate(ca);return void 0===ua||null===ua||""===ua?ya.toISO({suppressMilliseconds:!0}):ya.toFormat(J(ua),{locale:v.locale,numberingSystem:"latn"})}function J(ca){ca=ca.replace(/LTS|LT|LL?L?L?|l{1,4}/g,
"[$\x26]");var ua="",ya=0;for(ca=ca.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);ya<ca.length;ya++){var ta=ca[ya];switch(ta){case "D":ua+="d";break;case "DD":ua+="dd";break;case "DDD":ua+="o";break;case "d":ua+="c";break;case "ddd":ua+="ccc";break;case "dddd":ua+="cccc";break;case "M":ua+="L";break;case "MM":ua+="LL";break;case "MMM":ua+=
"LLL";break;case "MMMM":ua+="LLLL";break;case "YY":ua+="yy";break;case "Y":case "YYYY":ua+="yyyy";break;case "Q":ua+="q";break;case "Z":ua+="ZZ";break;case "ZZ":ua+="ZZZ";break;case "S":ua+="'S'";break;case "SS":ua+="'SS'";break;case "SSS":ua+="u";break;case "A":case "a":ua+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ua+=ta;break;default:ua=2<=ta.length&&"["===ta.slice(0,1)&&"]"===ta.slice(-1)?ua+("'"+ta.slice(1,-1)+"'"):ua+("'"+ta+"'")}}return ua}
function L(ca,ua,ya){switch(ya){case "\x3e":return ca>ua;case "\x3c":return ca<ua;case "\x3e\x3d":return ca>=ua;case "\x3c\x3d":return ca<=ua}return!1}function M(ca,ua){if(ca===ua||null===ca&&ua===B.voidOperation||null===ua&&ca===B.voidOperation)return!0;if(H(ca)&&H(ua))return ca.getTime()===ua.getTime();if(ca instanceof m||ca instanceof q)return ca.equalityTest(ua);if(ca instanceof e&&ua instanceof e){var ya=ca.getCacheValue("_arcadeCacheId"),ta=ua.getCacheValue("_arcadeCacheId");if(void 0!==ya&&
null!==ya)return ya===ta}return void 0!==ca&&void 0!==ua&&null!==ca&&null!==ua&&"object"===typeof ca&&"object"===typeof ua&&(ca._arcadeCacheId===ua._arcadeCacheId&&void 0!==ca._arcadeCacheId&&null!==ca._arcadeCacheId||ca._underlyingGraphic===ua._underlyingGraphic&&void 0!==ca._underlyingGraphic&&null!==ca._underlyingGraphic)?!0:!1}function N(ca,ua){if(u(ca))return ca;if(null===ca)return"";if(A(ca))return K(ca,ua);if(w(ca))return ca.toString();if(H(ca))return I(ca,ua);if(ca instanceof b)return JSON.stringify(ca.toJson());
if(E(ca)){for(var ya=[],ta=0;ta<ca.length;ta++)ya[ta]=Y(ca[ta]);return"["+ya.join(",")+"]"}if(ca instanceof f){ya=[];for(ta=0;ta<ca.length();ta++)ya[ta]=Y(ca.get(ta));return"["+ya.join(",")+"]"}return null!==ca&&"object"===typeof ca&&void 0!==ca.castToText?ca.castToText():F(ca)?"object, Function":""}function O(ca,ua){if(u(ca))return ca;if(null===ca)return"";if(A(ca))return K(ca,ua);if(w(ca))return ca.toString();if(H(ca))return I(ca,ua);if(ca instanceof b)return ca instanceof l?'{"xmin":'+ca.xmin.toString()+
',"ymin":'+ca.ymin.toString()+","+(ca.hasZ?'"zmin":'+ca.zmin.toString()+",":"")+(ca.hasM?'"mmin":'+ca.mmin.toString()+",":"")+'"xmax":'+ca.xmax.toString()+',"ymax":'+ca.ymax.toString()+","+(ca.hasZ?'"zmax":'+ca.zmax.toString()+",":"")+(ca.hasM?'"mmax":'+ca.mmax.toString()+",":"")+'"spatialReference":'+da(ca.spatialReference)+"}":da(ca.toJson(),function(pa,Aa){return pa.key===Aa.key?0:"spatialReference"===pa.key?1:"spatialReference"===Aa.key||pa.key<Aa.key?-1:pa.key>Aa.key?1:0});if(E(ca)){for(var ya=
[],ta=0;ta<ca.length;ta++)ya[ta]=Y(ca[ta]);return"["+ya.join(",")+"]"}if(ca instanceof f){ya=[];for(ta=0;ta<ca.length();ta++)ya[ta]=Y(ca.get(ta));return"["+ya.join(",")+"]"}return null!==ca&&"object"===typeof ca&&void 0!==ca.castToText?ca.castToText():F(ca)?"object, Function":""}function Y(ca){return null===ca?"null":w(ca)||A(ca)||u(ca)?JSON.stringify(ca):ca instanceof b||ca instanceof f||ca instanceof Array?O(ca):ca instanceof Date?JSON.stringify(I(ca,"")):null!==ca&&"object"===typeof ca&&void 0!==
ca.castToText?ca.castToText():"null"}function ba(ca,ua){return A(ca)?ca:null===ca||""===ca?0:H(ca)?NaN:w(ca)?ca?1:0:E(ca)||""===ca||void 0===ca?NaN:void 0!==ua&&u(ca)?(ua=C(ua,"\u2030",""),ua=C(ua,"\u00a4",""),z.parse(ca,{pattern:ua})):ca===B.voidOperation?0:Number(ca)}function ha(ca){var ua=/ (\d\d)/,ya=t.DateTime.fromISO(ca);return ya.isValid||ua.test(ca)&&(ca=ca.replace(ua,"T$1"),ya=t.DateTime.fromISO(ca),ya.isValid)?ya:null}function U(ca,ua){if(!ca||!ca.domain)return ua;var ya=null;if("string"===
ca.field.type||"esriFieldTypeString"===ca.field.type)ua=N(ua);else{if(null===ua||void 0===ua)return null;if(""===ua)return ua;ua=ba(ua)}for(var ta=0;ta<ca.domain.codedValues.length;ta++){var pa=ca.domain.codedValues[ta];pa.code===ua&&(ya=pa)}return null===ya?ua:ya.name}function X(ca,ua){if(!ca||!ca.domain)return ua;var ya=null;ua=N(ua);for(var ta=0;ta<ca.domain.codedValues.length;ta++){var pa=ca.domain.codedValues[ta];pa.name===ua&&(ya=pa)}return null===ya?ua:ya.code}function Z(ca,ua,ya,ta){void 0===
ya&&(ya=null);void 0===ta&&(ta=null);if(!ua||!ua.fields)return null;for(var pa=null,Aa=0;Aa<ua.fields.length;Aa++){var T=ua.fields[Aa];T.name.toLowerCase()===ca.toString().toLowerCase()&&(pa=T)}if(null===pa)throw Error("Field not found");var ea,na;null===ta&&ya&&ua.typeIdField&&(ta=ya.hasField(ua.typeIdField)?ya.field(ua.typeIdField):null);null!==ta&&void 0!==ta&&ua.types.some(function(V){return V.id===ta?((ea=V.domains&&V.domains[pa.name])&&"inherited"===ea.type&&(ea=P(pa.name,ua),na=!0),!0):!1});
na||ea||(ea=P(ca,ua));return{field:pa,domain:ea}}function P(ca,ua){var ya;ua.fields.some(function(ta){ta.name.toLowerCase()===ca.toLowerCase()&&(ya=ta.domain);return!!ya});return ya}function da(ca,ua){ua||(ua={});"function"===typeof ua&&(ua={cmp:ua});var ya="boolean"===typeof ua.cycles?ua.cycles:!1,ta=ua.cmp&&function(Aa){return function(T){return function(ea,na){return Aa({key:ea,value:T[ea]},{key:na,value:T[na]})}}}(ua.cmp),pa=[];return function ea(T){T&&T.toJson&&"function"===typeof T.toJson&&
(T=T.toJson());if(void 0!==T){if("number"===typeof T)return isFinite(T)?""+T:"null";if("object"!==typeof T)return JSON.stringify(T);var na;if(Array.isArray(T)){var V="[";for(na=0;na<T.length;na++)na&&(V+=","),V+=ea(T[na])||"null";return V+"]"}if(null===T)return"null";if(pa.includes(T)){if(ya)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ia=pa.push(T)-1,Ja=Object.keys(T).sort(ta&&ta(T));V="";for(na=0;na<Ja.length;na++){var Da=Ja[na],W=ea(T[Da]);
W&&(V&&(V+=","),V+=JSON.stringify(Da)+":"+W)}pa.splice(Ia,1);return"{"+V+"}"}}(ca)}function ia(ca,ua){if(ua instanceof e)ca.push([ua.x,ua.y]);else throw Error("Invalid Argument");}function xa(ca,ua){void 0===ua&&(ua=null);if(null!=ca){if(w(ca)||A(ca)||u(ca))return ca;if(ca instanceof b)return!0===(null===ua||void 0===ua?void 0:ua.keepGeometryType)?ca:ca.toJson();if(ca instanceof f)return ca.toArray().map(function(ya){return xa(ya,ua)});if(ca instanceof Array)return ca.map(function(ya){return xa(ya,
ua)});if(ca instanceof Date)return ca;if(null!==ca&&"object"===typeof ca&&void 0!==ca.castAsJson)return ca.castAsJson(ua)}return null}function Ca(ca,ua,ya,ta,pa){return a(this,void 0,void 0,function(){var Aa;return c(this,function(T){switch(T.label){case 0:return[4,Fa(ca,ua,ya)];case 1:return Aa=T.sent(),pa[ta]=Aa,[2]}})})}function Fa(ca,ua,ya){void 0===ua&&(ua=null);void 0===ya&&(ya=null);return a(this,void 0,void 0,function(){var ta,pa,Aa,T,ea;return c(this,function(na){switch(na.label){case 0:return ca instanceof
f&&(ca=ca.toArray()),null!=ca?[3,1]:[2,null];case 1:return x(ca)||ca instanceof b||ca instanceof Date?[2,xa(ca,ya)]:[3,2];case 2:if(!(ca instanceof Array))return[3,5];ta=[];pa=[];Aa=0;for(T=ca;Aa<T.length;Aa++)ea=T[Aa],null===ea||x(ea)||ea instanceof b||ea instanceof Date?pa.push(xa(ea,ya)):(pa.push(null),ta.push(Ca(ea,ua,ya,pa.length-1,pa)));return 0<ta.length?[4,Promise.all(ta)]:[3,4];case 3:na.sent(),na.label=4;case 4:return[2,pa];case 5:if(null!==ca&&"object"===typeof ca&&void 0!==ca.castAsJsonAsync)return[2,
ca.castAsJsonAsync(ua,ya)];na.label=6;case 6:return[2,null]}})})}Object.defineProperty(B,"__esModule",{value:!0});B.featureSchema=B.featureDomainCodeLookup=B.featureDomainValueLookup=B.featureSubtypes=B.featureFullDomain=B.castAsJsonAsync=B.castAsJson=B.binaryOperator=B.tick=B.toStringArray=B.autoCastArrayOfPointsToMultiPoint=B.autoCastArrayOfPointsToPolyline=B.autoCastArrayOfPointsToPolygon=B.autoCastFeatureToGeometry=B.stableStringify=B.getDomain=B.getDomainCode=B.getDomainValue=B.fixNullGeometry=
B.fixSpatialReference=B.toBoolean=B.toDateTime=B.toDate=B.toNumber=B.toStringExplicit=B.toNumberArray=B.toString=B.equalityTest=B.greaterThanLessThan=B.standardiseDateFormat=B.formatDate=B.formatNumber=B.generateUUID=B.absRound=B.pcCheck=B.isDate=B.isImmutableArray=B.isFeatureSetCollection=B.isFeatureSet=B.isFeature=B.isArray=B.isInteger=B.isNumber=B.isBoolean=B.isString=B.defaultUndefined=B.isSimpleType=B.isFunctionParameter=B.multiReplace=B.continueResult=B.breakResult=B.voidOperation=B.SizzleFunction=
B.ReturnResult=B.ImplicitResult=B.NativeFunction=B.SizzleFunctionE=B.NativeFunctionE=B.ImplicitResultE=B.ReturnResultE=void 0;D=function(){return function(ca){this.value=ca}}();B.ReturnResultE=D;k=function(){return function(ca){this.value=ca}}();B.ImplicitResultE=k;var Ma=function(){return function(ca){this.fn=ca}}();B.NativeFunctionE=Ma;var Sa=function(){return function(ca,ua){this.paramCount=ua;this.fn=ca}}();B.SizzleFunctionE=Sa;B.NativeFunction=Ma;B.ImplicitResult=k;B.ReturnResult=D;B.SizzleFunction=
Sa;B.voidOperation={type:"VOID"};B.breakResult={type:"BREAK"};B.continueResult={type:"CONTINUE"};B.multiReplace=C;B.isFunctionParameter=F;B.isSimpleType=x;B.defaultUndefined=function(ca,ua){return void 0===ca?ua:ca};B.isString=u;B.isBoolean=w;B.isNumber=A;B.isInteger=function(ca){return"number"===typeof ca&&isFinite(ca)&&Math.floor(ca)===ca};B.isArray=E;B.isFeature=function(ca){return"esri.arcade.Feature"===(null===ca||void 0===ca?void 0:ca.arcadeDeclaredClass)?!0:!1};B.isFeatureSet=function(ca){return!0===
(ca&&ca.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===ca.declaredRootClass)};B.isFeatureSetCollection=function(ca){return!0===(ca&&ca.declaredRootClass&&"esri.arcade.featureSetCollection"===ca.declaredRootClass)};B.isImmutableArray=G;B.isDate=H;B.pcCheck=function(ca,ua,ya){if(ca.length<ua||ca.length>ya)throw Error("Function called with wrong number of Parameters");};B.absRound=function(ca){return 0>ca?-Math.round(-ca):Math.round(ca)};B.generateUUID=function(){var ca=Date.now();
return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ua){var ya=(ca+16*Math.random())%16|0;ca=Math.floor(ca/16);return("x"===ua?ya:ya&3|8).toString(16)})};B.formatNumber=K;B.formatDate=I;B.standardiseDateFormat=J;B.greaterThanLessThan=function(ca,ua,ya){if(null===ca){if(null===ua||ua===B.voidOperation)return L(null,null,ya);if(A(ua))return L(0,ua,ya);if(u(ua)||w(ua))return L(0,ba(ua),ya);if(H(ua))return L(0,ua.getTime(),ya)}if(ca===B.voidOperation){if(null===ua||ua===B.voidOperation)return L(null,
null,ya);if(A(ua))return L(0,ua,ya);if(u(ua)||w(ua))return L(0,ba(ua),ya);if(H(ua))return L(0,ua.getTime(),ya)}else if(A(ca)){if(A(ua))return L(ca,ua,ya);if(w(ua))return L(ca,ba(ua),ya);if(null===ua||ua===B.voidOperation)return L(ca,0,ya);if(u(ua))return L(ca,ba(ua),ya);if(H(ua))return L(ca,ua.getTime(),ya)}else if(u(ca)){if(u(ua))return L(N(ca),N(ua),ya);if(H(ua))return L(ba(ca),ua.getTime(),ya);if(A(ua))return L(ba(ca),ua,ya);if(null===ua||ua===B.voidOperation)return L(ba(ca),0,ya);if(w(ua))return L(ba(ca),
ba(ua),ya)}else if(H(ca)){if(H(ua))return L(ca,ua,ya);if(null===ua||ua===B.voidOperation)return L(ca.getTime(),0,ya);if(A(ua))return L(ca.getTime(),ua,ya);if(w(ua)||u(ua))return L(ca.getTime(),ba(ua),ya)}else if(w(ca)){if(w(ua))return L(ca,ua,ya);if(A(ua))return L(ba(ca),ba(ua),ya);if(H(ua))return L(ba(ca),ua.getTime(),ya);if(null===ua||ua===B.voidOperation)return L(ba(ca),0,ya);if(u(ua))return L(ba(ca),ba(ua),ya)}return!M(ca,ua)||"\x3c\x3d"!==ya&&"\x3e\x3d"!==ya?!1:!0};B.equalityTest=M;B.toString=
N;B.toNumberArray=function(ca){var ua=[];if(!1===E(ca))return null;if(ca instanceof f){for(var ya=0;ya<ca.length();ya++)ua[ya]=ba(ca.get(ya));return ua}for(ya=0;ya<ca.length;ya++)ua[ya]=ba(ca[ya]);return ua};B.toStringExplicit=O;B.toNumber=ba;B.toDate=function(ca){return H(ca)?ca:u(ca)&&(ca=ha(ca))?ca.toJSDate():null};B.toDateTime=function(ca){return H(ca)?t.DateTime.fromJSDate(ca):u(ca)?ha(ca):null};B.toBoolean=function(ca){return w(ca)?ca:u(ca)?(ca=ca.toLowerCase(),"true"===ca?!0:!1):A(ca)?0===
ca||isNaN(ca)?!1:!0:!1};B.fixSpatialReference=function(ca,ua){if(null===ca||void 0===ca)return null;if(null===ca.spatialReference||void 0===ca.spatialReference)ca.spatialReference=ua;return ca};B.fixNullGeometry=function(ca){if(null===ca)return null;if(ca instanceof e)return"NaN"===ca.x||null===ca.x||isNaN(ca.x)?null:ca;if(ca instanceof d){if(0===ca.rings.length)return null;for(var ua=0,ya=ca.rings;ua<ya.length;ua++){var ta=ya[ua];if(0<ta.length)return ca}return null}if(ca instanceof h){if(0===ca.paths.length)return null;
ua=0;for(ya=ca.paths;ua<ya.length;ua++)if(ta=ya[ua],0<ta.length)return ca;return null}return ca instanceof g?0===ca.points.length?null:ca:ca instanceof l?"NaN"===ca.xmin||null===ca.xmin||isNaN(ca.xmin)?null:ca:null};B.getDomainValue=U;B.getDomainCode=X;B.getDomain=Z;B.stableStringify=da;B.autoCastFeatureToGeometry=function(ca){if(null===ca)return null;for(var ua=[],ya=0;ya<ca.length;ya++){var ta=ca[ya];ta&&ta.arcadeDeclaredClass&&"esri.arcade.Feature"===ta.arcadeDeclaredClass?ua.push(ta.geometry()):
ua.push(ta)}return ua};B.autoCastArrayOfPointsToPolygon=function(ca,ua){if(E(ca)||G(ca)){var ya=!1,ta=!1,pa=[],Aa=ua;if(E(ca)){for(var T=0;T<ca.length;T++){var ea=ca[T];ia(pa,ea)}0<pa.length&&(Aa=ca[0].spatialReference,ya=ca[0].hasZ,ta=ca[0].hasM)}else if(ca instanceof q)pa=ca._elements,0<pa.length&&(ya=ca._hasZ,ta=ca._hasM,Aa=ca.get(0).spatialReference);else if(G(ca)){T=0;for(var na=ca.toArray();T<na.length;T++)ea=na[T],ia(pa,ea);0<pa.length&&(Aa=ca.get(0).spatialReference,ya=!0===ca.get(0).hasZ,
ta=!0===ca.get(0).hasM)}else throw Error("Invalid Argument");if(0===pa.length)return null;!1===(new d({rings:[],spatialReference:{wkid:4326}})).isClockwise(pa)&&(pa=pa.slice(0).reverse());return new d({rings:[pa],spatialReference:Aa,hasZ:ya,hasM:ta})}return ca};B.autoCastArrayOfPointsToPolyline=function(ca,ua){if(E(ca)||G(ca)){var ya=!1,ta=!1,pa=[],Aa=ua;if(E(ca)){for(var T=0;T<ca.length;T++){var ea=ca[T];ia(pa,ea)}0<pa.length&&(Aa=ca[0].spatialReference,ya=!0===ca[0].hasZ,ta=!0===ca[0].hasM)}else if(ca instanceof
q)pa=ca._elements,0<pa.length&&(ya=ca._hasZ,ta=ca._hasM,Aa=ca.get(0).spatialReference);else if(G(ca)){T=0;for(var na=ca.toArray();T<na.length;T++)ea=na[T],ia(pa,ea);0<pa.length&&(Aa=ca.get(0).spatialReference,ya=!0===ca.get(0).hasZ,ta=!0===ca.get(0).hasM)}return 0===pa.length?null:new h({paths:[pa],spatialReference:Aa,hasZ:ya,hasM:ta})}return ca};B.autoCastArrayOfPointsToMultiPoint=function(ca,ua){if(E(ca)||G(ca)){var ya=!1,ta=!1,pa=[],Aa=ua;if(E(ca)){for(var T=0;T<ca.length;T++){var ea=ca[T];ia(pa,
ea)}0<pa.length&&(Aa=ca[0].spatialReference,ya=!0===ca[0].hasZ,ta=!0===ca[0].hasM)}else if(ca instanceof q)pa=ca._elements,0<pa.length&&(ya=ca._hasZ,ta=ca._hasM,Aa=ca.get(0).spatialReference);else if(G(ca)){T=0;for(var na=ca.toArray();T<na.length;T++)ea=na[T],ia(pa,ea);0<pa.length&&(Aa=ca.get(0).spatialReference,ya=!0===ca.get(0).hasZ,ta=!0===ca.get(0).hasM)}return 0===pa.length?null:new g({points:pa,spatialReference:Aa,hasZ:ya,hasM:ta})}return ca};B.toStringArray=function(ca,ua){void 0===ua&&(ua=
!1);var ya=[];if(null===ca)return ya;if(!0===E(ca)){for(var ta=0;ta<ca.length;ta++){var pa=N(ca[ta]);""===pa&&!0!==ua||ya.push(pa)}return ya}if(ca instanceof f){for(ta=0;ta<ca.length();ta++)pa=N(ca.get(ta)),""===pa&&!0!==ua||ya.push(pa);return ya}return x(ca)?(pa=N(ca),""===pa&&!0!==ua||ya.push(pa),ya):[]};var Ba=0;B.tick=function(ca){Ba++;return 0===Ba%100?(Ba=0,new Promise(function(ua){setTimeout(function(){ua(ca)},0)})):ca};B.binaryOperator=function(ca,ua,ya){switch(ya){case "\x26":return ca&ua;
case "|":return ca|ua;case "^":return ca^ua;case "\x3c\x3c":return ca<<ua;case "\x3e\x3e":return ca>>ua;case "\x3e\x3e\x3e":return ca>>>ua}};B.castAsJson=xa;B.castAsJsonAsync=Fa;B.featureFullDomain=function(ca,ua,ya){var ta=ca.fullSchema();return null!==ta&&ta.fields?Z(ua,ta,ca,ya):null};B.featureSubtypes=function(ca){ca=ca.fullSchema();return null!==ca&&ca.fields?ca.typeIdField?{subtypeField:ca.typeIdField,subtypes:ca.types?ca.types.map(function(ua){return{name:ua.name,code:ua.id}}):[]}:null:null};
B.featureDomainValueLookup=function(ca,ua,ya,ta){var pa=ca.fullSchema();if(null===pa||!pa.fields)return null;ta=Z(ua,pa,ca,ta);if(void 0===ya)try{ya=ca.field(ua)}catch(Aa){return null}return U(ta,ya)};B.featureDomainCodeLookup=function(ca,ua,ya,ta){var pa=ca.fullSchema();if(null===pa||!pa.fields)return null;if(void 0===ya){try{ya=ca.field(ua)}catch(Aa){return null}return ya}ca=Z(ua,pa,ca,ta);return X(ca,ya)};B.featureSchema=function(ca){ca=ca.fullSchema();if(null===ca||!ca.fields)return null;for(var ua=
[],ya=0,ta=ca.fields;ya<ta.length;ya++)ua.push(y.esriFieldToJson(ta[ya]));return{objectIdField:ca.objectIdField,globalIdField:ca.globalIdField,geometryType:void 0===y.layerGeometryEsriRestConstants[ca.geometryType]?"":y.layerGeometryEsriRestConstants[ca.geometryType],fields:ua}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(D,B){return function(){return function(a,c){this.context=this.definition=null;this.definition=a;this.context=c}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require",
"exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(D,B,a,c,k){return function(n){function r(f,m,q,l,b){f=n.call(this,f)||this;f._lazyPath=[];f._hasZ=!1;f._hasM=!1;f._hasZ=q;f._hasM=l;f._spRef=m;f._cacheId=b;return f}a(r,n);r.prototype.get=function(f){if(void 0===this._lazyPath[f]){var m=this._elements[f];if(void 0===m)return;this._lazyPath[f]=new k(m,this._spRef,this._hasZ,this._hasM,this._cacheId,f)}return this._lazyPath[f]};r.prototype.equalityTest=function(f){return f===
this?!0:null===f||!1===f instanceof r?!1:f.getUniqueHash()===this.getUniqueHash()};r.prototype.getUniqueHash=function(){return this._cacheId.toString()};return r}(c)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(D,B,a,c,k){return function(n){function r(f,m,q,l,b,g){f=n.call(this,f)||this;f._lazyPt=[];f._hasZ=!1;f._hasM=!1;f._spRef=m;f._hasZ=q;f._hasM=l;f._cacheId=b;f._partId=g;return f}a(r,
n);r.prototype.get=function(f){if(void 0===this._lazyPt[f]){var m=this._elements[f];if(void 0===m)return;var q=this._hasZ,l=this._hasM,b=null;b=q&&!l?new k(m[0],m[1],m[2],void 0,this._spRef):l&&!q?new k(m[0],m[1],void 0,m[2],this._spRef):q&&l?new k(m[0],m[1],m[2],m[3],this._spRef):new k(m[0],m[1],this._spRef);b.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+f.toString());this._lazyPt[f]=b}return this._lazyPt[f]};r.prototype.equalityTest=function(f){return f===
this?!0:null===f||!1===f instanceof r?!1:f.getUniqueHash()===this.getUniqueHash()};r.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return r}(c)})},"esri/libs/luxon/luxon":function(){define(["exports"],function(D){function B(ka,sa){for(var S=0;S<sa.length;S++){var la=sa[S];la.enumerable=la.enumerable||!1;la.configurable=!0;"value"in la&&(la.writable=!0);Object.defineProperty(ka,la.key,la)}}function a(ka,sa,S){sa&&B(ka.prototype,sa);S&&B(ka,S);return ka}
function c(){c=Object.assign||function(ka){for(var sa=1;sa<arguments.length;sa++){var S=arguments[sa],la;for(la in S)Object.prototype.hasOwnProperty.call(S,la)&&(ka[la]=S[la])}return ka};return c.apply(this,arguments)}function k(ka,sa){ka.prototype=Object.create(sa.prototype);ka.prototype.constructor=ka;r(ka,sa)}function n(ka){n=Object.setPrototypeOf?Object.getPrototypeOf:function(sa){return sa.__proto__||Object.getPrototypeOf(sa)};return n(ka)}function r(ka,sa){r=Object.setPrototypeOf||function(S,
la){S.__proto__=la;return S};return r(ka,sa)}function f(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ka){return!1}}function m(ka,sa,S){m=f()?Reflect.construct:function(la,va,Ga){var Na=[null];Na.push.apply(Na,va);la=new (Function.bind.apply(la,Na));Ga&&r(la,Ga.prototype);return la};return m.apply(null,arguments)}function q(ka){var sa=
"function"===typeof Map?new Map:void 0;q=function(S){function la(){return m(S,arguments,n(this).constructor)}if(null===S||-1===Function.toString.call(S).indexOf("[native code]"))return S;if("function"!==typeof S)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof sa){if(sa.has(S))return sa.get(S);sa.set(S,la)}la.prototype=Object.create(S.prototype,{constructor:{value:la,enumerable:!1,writable:!0,configurable:!0}});return r(la,S)};return q(ka)}function l(ka,
sa){if(null==ka)return{};var S={},la=Object.keys(ka),va;for(va=0;va<la.length;va++){var Ga=la[va];0<=sa.indexOf(Ga)||(S[Ga]=ka[Ga])}return S}function b(ka,sa){if(ka){if("string"===typeof ka)return g(ka,sa);var S=Object.prototype.toString.call(ka).slice(8,-1);"Object"===S&&ka.constructor&&(S=ka.constructor.name);if("Map"===S||"Set"===S)return Array.from(ka);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return g(ka,sa)}}function g(ka,sa){if(null==sa||sa>ka.length)sa=ka.length;
for(var S=0,la=Array(sa);S<sa;S++)la[S]=ka[S];return la}function e(ka,sa){var S="undefined"!==typeof Symbol&&ka[Symbol.iterator]||ka["@@iterator"];if(S)return(S=S.call(ka)).next.bind(S);if(Array.isArray(ka)||(S=b(ka))||sa&&ka&&"number"===typeof ka.length){S&&(ka=S);var la=0;return function(){return la>=ka.length?{done:!0}:{done:!1,value:ka[la++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function d(ka){return"undefined"===typeof ka}function h(ka){return"number"===typeof ka}function t(ka){return"number"===typeof ka&&0===ka%1}function z(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(ka){return!1}}function v(ka,sa,S){if(0!==ka.length)return ka.reduce(function(la,va){var Ga=[sa(va),va];return la?S(la[0],Ga[0])===la[0]?la:Ga:Ga},null)[1]}function y(ka,sa){return sa.reduce(function(S,la){S[la]=ka[la];return S},{})}function C(ka,sa){return Object.prototype.hasOwnProperty.call(ka,
sa)}function F(ka,sa,S){return t(ka)&&ka>=sa&&ka<=S}function x(ka,sa){void 0===sa&&(sa=2);return 0>ka?"-"+(""+-ka).padStart(sa,"0"):(""+ka).padStart(sa,"0")}function u(ka){if(!d(ka)&&null!==ka&&""!==ka)return parseInt(ka,10)}function w(ka){if(!d(ka)&&null!==ka&&""!==ka)return parseFloat(ka)}function A(ka){if(!d(ka)&&null!==ka&&""!==ka)return ka=1E3*parseFloat("0."+ka),Math.floor(ka)}function E(ka,sa,S){void 0===S&&(S=!1);sa=Math.pow(10,sa);return(S?Math.trunc:Math.round)(ka*sa)/sa}function G(ka){return 0===
ka%4&&(0!==ka%100||0===ka%400)}function H(ka,sa){var S=sa-1;S=S-12*Math.floor(S/12)+1;return 2===S?G(ka+(sa-S)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][S-1]}function K(ka){var sa=Date.UTC(ka.year,ka.month-1,ka.day,ka.hour,ka.minute,ka.second,ka.millisecond);100>ka.year&&0<=ka.year&&(sa=new Date(sa),sa.setUTCFullYear(sa.getUTCFullYear()-1900));return+sa}function I(ka){var sa=ka-1;sa=(sa+Math.floor(sa/4)-Math.floor(sa/100)+Math.floor(sa/400))%7;return 4===(ka+Math.floor(ka/4)-Math.floor(ka/
100)+Math.floor(ka/400))%7||3===sa?53:52}function J(ka){return 99<ka?ka:60<ka?1900+ka:2E3+ka}function L(ka,sa,S,la){void 0===la&&(la=null);ka=new Date(ka);var va={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};la&&(va.timeZone=la);sa=c({timeZoneName:sa},va);return(S=(new Intl.DateTimeFormat(S,sa)).formatToParts(ka).find(function(Ga){return"timezonename"===Ga.type.toLowerCase()}))?S.value:null}function M(ka,sa){var S=parseInt(ka,10);Number.isNaN(S)&&(S=
0);var la=parseInt(sa,10)||0;la=0>S||Object.is(S,-0)?-la:la;return 60*S+la}function N(ka){var sa=Number(ka);if("boolean"===typeof ka||""===ka||Number.isNaN(sa))throw new Pb("Invalid unit value "+ka);return sa}function O(ka,sa){var S={},la;for(la in ka)if(C(ka,la)){var va=ka[la];void 0!==va&&null!==va&&(S[sa(la)]=N(va))}return S}function Y(ka,sa){var S=Math.trunc(Math.abs(ka/60)),la=Math.trunc(Math.abs(ka%60)),va=0<=ka?"+":"-";switch(sa){case "short":return""+va+x(S,2)+":"+x(la,2);case "narrow":return""+
va+S+(0<la?":"+la:"");case "techie":return""+va+x(S,2)+x(la,2);default:throw new RangeError("Value format "+sa+" is out of range for property format");}}function ba(ka){return y(ka,["hour","minute","second","millisecond"])}function ha(ka){switch(ka){case "narrow":return[].concat(Xc);case "short":return[].concat(Mc);case "long":return[].concat(gc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}
function U(ka){switch(ka){case "narrow":return[].concat(Yc);case "short":return[].concat(Uc);case "long":return[].concat(Nc);case "numeric":return"1234567".split("");default:return null}}function X(ka){switch(ka){case "narrow":return[].concat(Ob);case "short":return[].concat(mc);case "long":return[].concat(oc);default:return null}}function Z(ka,sa,S,la){void 0===S&&(S="always");void 0===la&&(la=!1);var va={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],
days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Ga=-1===["hours","minutes","seconds"].indexOf(ka);if("auto"===S&&Ga)switch(S="days"===ka,sa){case 1:return S?"tomorrow":"next "+va[ka][0];case -1:return S?"yesterday":"last "+va[ka][0];case 0:return S?"today":"this "+va[ka][0]}S=Object.is(sa,-0)||0>sa;sa=Math.abs(sa);Ga=1===sa;var Na=va[ka];ka=la?Ga?Na[1]:Na[2]||Na[1]:Ga?va[ka][0]:ka;return S?sa+" "+ka+" ago":"in "+sa+" "+ka}function P(ka,sa){for(var S=
"",la=e(ka),va;!(va=la()).done;)va=va.value,S=va.literal?S+va.val:S+sa(va.val);return S}function da(ka,sa){if(d(ka)||null===ka)return sa;if(ka instanceof Ic)return ka;if("string"===typeof ka){var S=ka.toLowerCase();return"local"===S||"system"===S?sa:"utc"===S||"gmt"===S?ac.utcInstance:ac.parseSpecifier(S)||sc.create(ka)}return h(ka)?ac.instance(ka):"object"===typeof ka&&ka.offset&&"number"===typeof ka.offset?ka:new Hb(ka)}function ia(ka,sa){void 0===sa&&(sa={});var S=JSON.stringify([ka,sa]),la=bd[S];
la||(la=new Intl.DateTimeFormat(ka,sa),bd[S]=la);return la}function xa(ka){for(var sa=[],S=1;12>=S;S++){var la=Rb.utc(2016,S,1);sa.push(ka(la))}return sa}function Ca(ka){for(var sa=[],S=1;7>=S;S++){var la=Rb.utc(2016,11,13+S);sa.push(ka(la))}return sa}function Fa(ka,sa,S,la,va){ka=ka.listingMode(S);return"error"===ka?null:"en"===ka?la(sa):va(sa)}function Ma(){for(var ka=arguments.length,sa=Array(ka),S=0;S<ka;S++)sa[S]=arguments[S];ka=sa.reduce(function(la,va){return la+va.source},"");return RegExp("^"+
ka+"$")}function Sa(){for(var ka=arguments.length,sa=Array(ka),S=0;S<ka;S++)sa[S]=arguments[S];return function(la){return sa.reduce(function(va,Ga){var Na=va[0],Za=va[1],ib=Ga(la,va[2]),ob=ib[1],ub=ib[2];return[c({},Na,ib[0]),ob||Za,ub]},[{},null,1]).slice(0,2)}}function Ba(ka){if(null==ka)return[null,null];for(var sa=arguments.length,S=Array(1<sa?sa-1:0),la=1;la<sa;la++)S[la-1]=arguments[la];for(sa=0;sa<S.length;sa++){var va=S[sa];la=va[1];if(va=va[0].exec(ka))return la(va)}return[null,null]}function ca(){for(var ka=
arguments.length,sa=Array(ka),S=0;S<ka;S++)sa[S]=arguments[S];return function(la,va){var Ga={},Na;for(Na=0;Na<sa.length;Na++)Ga[sa[Na]]=u(la[va+Na]);return[Ga,null,va+Na]}}function ua(ka,sa,S){ka=ka[sa];return d(ka)?S:u(ka)}function ya(ka,sa){return[{hours:ua(ka,sa,0),minutes:ua(ka,sa+1,0),seconds:ua(ka,sa+2,0),milliseconds:A(ka[sa+3])},null,sa+4]}function ta(ka,sa){var S=!ka[sa]&&!ka[sa+1],la=M(ka[sa+1],ka[sa+2]);return[{},S?null:ac.instance(la),sa+3]}function pa(ka,sa){return[{},ka[sa]?sc.create(ka[sa]):
null,sa+1]}function Aa(ka){var sa=ka[2],S=ka[3],la=ka[4],va=ka[5],Ga=ka[6],Na=ka[7],Za=ka[8],ib="-"===ka[0][0],ob=Na&&"-"===Na[0],ub=function(Eb,xb){void 0===xb&&(xb=!1);return void 0!==Eb&&(xb||Eb&&ib)?-Eb:Eb};return[{years:ub(w(ka[1])),months:ub(w(sa)),weeks:ub(w(S)),days:ub(w(la)),hours:ub(w(va)),minutes:ub(w(Ga)),seconds:ub(w(Na),"-0"===Na),milliseconds:ub(A(Za),ob)}]}function T(ka,sa,S,la,va,Ga,Na){sa={year:2===sa.length?J(u(sa)):u(sa),month:Mc.indexOf(S)+1,day:u(la),hour:u(va),minute:u(Ga)};
Na&&(sa.second=u(Na));ka&&(sa.weekday=3<ka.length?Nc.indexOf(ka)+1:Uc.indexOf(ka)+1);return sa}function ea(ka){var sa=ka[8],S=ka[9],la=ka[10],va=ka[11];ka=T(ka[1],ka[4],ka[3],ka[2],ka[5],ka[6],ka[7]);sa=sa?td[sa]:S?0:M(la,va);return[ka,new ac(sa)]}function na(ka){return[T(ka[1],ka[4],ka[3],ka[2],ka[5],ka[6],ka[7]),ac.utcInstance]}function V(ka){return[T(ka[1],ka[7],ka[2],ka[3],ka[4],ka[5],ka[6]),ac.utcInstance]}function Ia(ka,sa,S){void 0===S&&(S=!1);ka={values:S?sa.values:c({},ka.values,sa.values||
{}),loc:ka.loc.clone(sa.loc),conversionAccuracy:sa.conversionAccuracy||ka.conversionAccuracy};return new aa(ka)}function Ja(ka,sa,S,la,va){ka=ka[va][S];var Ga=sa[S]/ka;Ga=Math.sign(Ga)!==Math.sign(la[va])&&0!==la[va]&&1>=Math.abs(Ga)?0>Ga?Math.floor(Ga):Math.ceil(Ga):Math.trunc(Ga);la[va]+=Ga;sa[S]-=Ga*ka}function Da(ka,sa){Q.reduce(function(S,la){if(d(sa[la]))return S;S&&Ja(ka,sa,S,sa,la);return la},null)}function W(ka,sa){var S=function(la){return la.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};
S=S(sa)-S(ka);return Math.floor(aa.fromMillis(S).as("days"))}function oa(ka,sa,S){for(var la={},va,Ga,Na=0,Za=[["years",function(xb,Db){return Db.year-xb.year}],["quarters",function(xb,Db){return Db.quarter-xb.quarter}],["months",function(xb,Db){return Db.month-xb.month+12*(Db.year-xb.year)}],["weeks",function(xb,Db){var nc=W(xb,Db);return(nc-nc%7)/7}],["days",W]];Na<Za.length;Na++){var ib=Za[Na],ob=ib[0];ib=ib[1];if(0<=S.indexOf(ob)){var ub;va=ob;ib=ib(ka,sa);Ga=ka.plus((ub={},ub[ob]=ib,ub));if(Ga>
sa){var Eb;ka=ka.plus((Eb={},Eb[ob]=ib-1,Eb));--ib}else ka=Ga;la[ob]=ib}}return[ka,la,Ga,va]}function ra(ka,sa,S,la){var va=oa(ka,sa,S);ka=va[0];var Ga=va[1],Na=va[2],Za=va[3];va=sa-ka;S=S.filter(function(ub){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(ub)});if(0===S.length){if(Na<sa){var ib;Na=ka.plus((ib={},ib[Za]=1,ib))}Na!==ka&&(Ga[Za]=(Ga[Za]||0)+va/(Na-ka))}sa=aa.fromObject(Ga,la);if(0<S.length){var ob;return(ob=aa.fromMillis(va,la)).shiftTo.apply(ob,S).plus(sa)}return sa}
function R(ka,sa){var S=ka.numberingSystem;void 0===sa&&(sa="");return new RegExp(""+Pa[S||"latn"]+sa)}function fa(ka,sa){void 0===sa&&(sa=function(S){return S});return{regex:ka,deser:function(S){var la=sa;S=S[0];var va=parseInt(S,10);if(isNaN(va)){va="";for(var Ga=0;Ga<S.length;Ga++){var Na=S.charCodeAt(Ga);if(-1!==S[Ga].search(Pa.hanidec))va+=hb.indexOf(S[Ga]);else for(ob in fb){var Za=fb[ob],ib=Za[0];Za=Za[1];Na>=ib&&Na<=Za&&(va+=Na-ib)}}var ob=parseInt(va,10)}else ob=va;return la(ob)}}}function ma(ka){return ka.replace(/\./g,
"\\.?").replace(wb,rb)}function wa(ka,sa){return null===ka?null:{regex:RegExp(ka.map(ma).join("|")),deser:function(S){var la=S[0];return ka.findIndex(function(va){return la.replace(/\./g,"").replace(wb," ").toLowerCase()===va.replace(/\./g,"").replace(wb," ").toLowerCase()})+sa}}}function Ea(ka,sa){return{regex:ka,deser:function(S){return M(S[1],S[2])},groups:sa}}function Ha(ka){return{regex:ka,deser:function(sa){return sa[0]}}}function La(ka,sa){var S=R(sa),la=R(sa,"{2}"),va=R(sa,"{3}"),Ga=R(sa,
"{4}"),Na=R(sa,"{6}"),Za=R(sa,"{1,2}"),ib=R(sa,"{1,3}"),ob=R(sa,"{1,6}"),ub=R(sa,"{1,9}"),Eb=R(sa,"{2,4}"),xb=R(sa,"{4,6}"),Db=function(lc){return{regex:RegExp(lc.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(Kd){return Kd[0]},literal:!0}},nc=function(lc){if(ka.literal)return Db(lc);switch(lc.val){case "G":return wa(sa.eras("short",!1),0);case "GG":return wa(sa.eras("long",!1),0);case "y":return fa(ob);case "yy":return fa(Eb,J);case "yyyy":return fa(Ga);case "yyyyy":return fa(xb);
case "yyyyyy":return fa(Na);case "M":return fa(Za);case "MM":return fa(la);case "MMM":return wa(sa.months("short",!0,!1),1);case "MMMM":return wa(sa.months("long",!0,!1),1);case "L":return fa(Za);case "LL":return fa(la);case "LLL":return wa(sa.months("short",!1,!1),1);case "LLLL":return wa(sa.months("long",!1,!1),1);case "d":return fa(Za);case "dd":return fa(la);case "o":return fa(ib);case "ooo":return fa(va);case "HH":return fa(la);case "H":return fa(Za);case "hh":return fa(la);case "h":return fa(Za);
case "mm":return fa(la);case "m":return fa(Za);case "q":return fa(Za);case "qq":return fa(la);case "s":return fa(Za);case "ss":return fa(la);case "S":return fa(ib);case "SSS":return fa(va);case "u":return Ha(ub);case "uu":return Ha(Za);case "uuu":return fa(S);case "a":return wa(sa.meridiems(),0);case "kkkk":return fa(Ga);case "kk":return fa(Eb,J);case "W":return fa(Za);case "WW":return fa(la);case "E":case "c":return fa(S);case "EEE":return wa(sa.weekdays("short",!1,!1),1);case "EEEE":return wa(sa.weekdays("long",
!1,!1),1);case "ccc":return wa(sa.weekdays("short",!0,!1),1);case "cccc":return wa(sa.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ea(new RegExp("([+-]"+Za.source+")(?::("+la.source+"))?"),2);case "ZZZ":return Ea(new RegExp("([+-]"+Za.source+")("+la.source+")?"),2);case "z":return Ha(/[a-z_+-/]{1,256}?/i);default:return Db(lc)}}(ka)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};nc.token=ka;return nc}function Ya(ka){return["^"+ka.map(function(sa){return sa.regex}).reduce(function(sa,
S){return sa+"("+S.source+")"},"")+"$",ka]}function Xa(ka,sa,S){if(ka=ka.match(sa)){sa={};var la=1,va;for(va in S)if(C(S,va)){var Ga=S[va],Na=Ga.groups?Ga.groups+1:1;!Ga.literal&&Ga.token&&(sa[Ga.token.val[0]]=Ga.deser(ka.slice(la,la+Na)));la+=Na}return[ka,sa]}return[ka,{}]}function Ta(ka){var sa=function(va){switch(va){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";
case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}},S=null;d(ka.z)||(S=sc.create(ka.z));if(!d(ka.Z)){S||(S=new ac(ka.Z));var la=ka.Z}d(ka.q)||(ka.M=3*(ka.q-1)+1);d(ka.h)||(12>ka.h&&1===ka.a?ka.h+=12:12===ka.h&&0===ka.a&&(ka.h=0));0===ka.G&&ka.y&&(ka.y=-ka.y);d(ka.u)||(ka.S=A(ka.u));return[Object.keys(ka).reduce(function(va,Ga){var Na=sa(Ga);Na&&(va[Na]=ka[Ga]);return va},{}),S,la]}function eb(){Lb||
(Lb=Rb.fromMillis(1555555555555));return Lb}function db(ka,sa){if(ka.literal)return ka;var S=Sb.macroTokenToFormatOpts(ka.val);if(!S)return ka;var la=Sb.create(sa,S).formatDateTimeParts(eb()).map(function(va){var Ga=va.type;va=va.value;"literal"===Ga?Ga={literal:!0,val:va}:(va=S[Ga],Ga=vb[Ga],"object"===typeof Ga&&(Ga=Ga[va]),Ga=Ga?{literal:!1,val:Ga}:void 0);return Ga});return la.includes(void 0)?ka:la}function gb(ka,sa){var S;return(S=Array.prototype).concat.apply(S,ka.map(function(la){return db(la,
sa)}))}function qb(ka,sa,S){S=gb(Sb.parseFormat(S),ka);var la=S.map(function(ob){return La(ob,ka)}),va=la.find(function(ob){return ob.invalidReason});if(va)return{input:sa,tokens:S,invalidReason:va.invalidReason};va=Ya(la);la=RegExp(va[0],"i");var Ga=Xa(sa,la,va[1]);va=Ga[0];var Na=(Ga=Ga[1])?Ta(Ga):[null,null,void 0],Za=Na[0],ib=Na[1];Na=Na[2];if(C(Ga,"a")&&C(Ga,"H"))throw new Yb("Can't include meridiem when specifying 24-hour format");return{input:sa,tokens:S,regex:la,rawMatches:va,matches:Ga,result:Za,
zone:ib,specificOffset:Na}}function sb(ka,sa){return new Tb("unit out of range","you specified "+sa+" (of type "+typeof sa+") as a "+ka+", which is invalid")}function tb(ka,sa,S){sa=new Date(Date.UTC(ka,sa-1,S));100>ka&&0<=ka&&sa.setUTCFullYear(sa.getUTCFullYear()-1900);ka=sa.getUTCDay();return 0===ka?7:ka}function Cb(ka,sa){var S=G(ka)?Dc:tc,la=S.findIndex(function(va){return va<sa});return{month:la+1,day:sa-S[la]}}function Gb(ka){var sa=ka.year,S=ka.month,la=ka.day;var va=la+(G(sa)?Dc:tc)[S-1];
S=tb(sa,S,la);va=Math.floor((va-S+10)/7);1>va?(--sa,va=I(sa)):va>I(sa)&&(sa+=1,va=1);return c({weekYear:sa,weekNumber:va,weekday:S},ba(ka))}function nb(ka){var sa=ka.weekYear,S=ka.weekNumber,la=ka.weekday,va=tb(sa,1,4),Ga=G(sa)?366:365;S=7*S+la-va-3;1>S?(Ga=sa-1,S+=G(Ga)?366:365):S>Ga?(Ga=sa+1,S-=G(sa)?366:365):Ga=sa;sa=Cb(Ga,S);return c({year:Ga,month:sa.month,day:sa.day},ba(ka))}function Ab(ka){var sa=ka.year;var S=ka.month;S=ka.day+(G(sa)?Dc:tc)[S-1];return c({year:sa,ordinal:S},ba(ka))}function Ub(ka){var sa=
ka.year,S=Cb(sa,ka.ordinal);return c({year:sa,month:S.month,day:S.day},ba(ka))}function Zb(ka){var sa=t(ka.year),S=F(ka.month,1,12),la=F(ka.day,1,H(ka.year,ka.month));return sa?S?la?!1:sb("day",ka.day):sb("month",ka.month):sb("year",ka.year)}function Nb(ka){var sa=ka.hour,S=ka.minute,la=ka.second;ka=ka.millisecond;var va=F(sa,0,23)||24===sa&&0===S&&0===la&&0===ka,Ga=F(S,0,59),Na=F(la,0,59),Za=F(ka,0,999);return va?Ga?Na?Za?!1:sb("millisecond",ka):sb("second",la):sb("minute",S):sb("hour",sa)}function yb(ka){return new Tb("unsupported zone",
'the zone "'+ka.name+'" is not supported')}function uc(ka){null===ka.weekData&&(ka.weekData=Gb(ka.c));return ka.weekData}function Ib(ka,sa){var S={ts:ka.ts,zone:ka.zone,c:ka.c,o:ka.o,loc:ka.loc,invalid:ka.invalid};return new Rb(c({},S,sa,{old:S}))}function bc(ka,sa,S){var la=ka-6E4*sa,va=S.offset(la);if(sa===va)return[la,sa];la-=6E4*(va-sa);sa=S.offset(la);return va===sa?[la,va]:[ka-6E4*Math.min(va,sa),Math.max(va,sa)]}function ic(ka,sa){var S=new Date(ka+6E4*sa);return{year:S.getUTCFullYear(),month:S.getUTCMonth()+
1,day:S.getUTCDate(),hour:S.getUTCHours(),minute:S.getUTCMinutes(),second:S.getUTCSeconds(),millisecond:S.getUTCMilliseconds()}}function Xb(ka,sa,S){return bc(K(ka),sa,S)}function vc(ka,sa){var S=ka.o,la=ka.c.year+Math.trunc(sa.years),va=ka.c.month+Math.trunc(sa.months)+3*Math.trunc(sa.quarters);va=c({},ka.c,{year:la,month:va,day:Math.min(ka.c.day,H(la,va))+Math.trunc(sa.days)+7*Math.trunc(sa.weeks)});la=aa.fromObject({years:sa.years-Math.trunc(sa.years),quarters:sa.quarters-Math.trunc(sa.quarters),
months:sa.months-Math.trunc(sa.months),weeks:sa.weeks-Math.trunc(sa.weeks),days:sa.days-Math.trunc(sa.days),hours:sa.hours,minutes:sa.minutes,seconds:sa.seconds,milliseconds:sa.milliseconds}).as("milliseconds");va=K(va);va=bc(va,S,ka.zone);S=va[0];va=va[1];0!==la&&(S+=la,va=ka.zone.offset(S));return{ts:S,o:va}}function jc(ka,sa,S,la,va,Ga){var Na=S.setZone,Za=S.zone;return ka&&0!==Object.keys(ka).length?(ka=Rb.fromObject(ka,c({},S,{zone:sa||Za,specificOffset:Ga})),Na?ka:ka.setZone(Za)):Rb.invalid(new Tb("unparsable",
'the input "'+va+"\" can't be parsed as "+la))}function pc(ka,sa,S){void 0===S&&(S=!0);return ka.isValid?Sb.create(Qb.create("en-US"),{allowZ:S,forceSimple:!0}).formatDateTimeFromString(ka,sa):null}function wc(ka,sa){var S=9999<ka.c.year||0>ka.c.year,la="";S&&0<=ka.c.year&&(la+="+");la+=x(ka.c.year,S?6:4);sa?(la=la+"-"+x(ka.c.month),la=la+"-"+x(ka.c.day)):(la+=x(ka.c.month),la+=x(ka.c.day));return la}function xc(ka,sa,S,la,va,Ga){var Na=x(ka.c.hour);sa?(Na=Na+":"+x(ka.c.minute),0===ka.c.second&&S||
(Na+=":")):Na+=x(ka.c.minute);0===ka.c.second&&S||(Na+=x(ka.c.second),0===ka.c.millisecond&&la||(Na=Na+"."+x(ka.c.millisecond,3)));va&&(ka.isOffsetFixed&&0===ka.offset&&!Ga?Na+="Z":0>ka.o?(Na=Na+"-"+x(Math.trunc(-ka.o/60)),Na=Na+":"+x(Math.trunc(-ka.o%60))):(Na=Na+"+"+x(Math.trunc(ka.o/60)),Na=Na+":"+x(Math.trunc(ka.o%60))));Ga&&(Na+="["+ka.zone.ianaName+"]");return Na}function Jc(ka){var sa={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",
minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[ka.toLowerCase()];if(!sa)throw new Sc(ka);return sa}function Qc(ka,sa){var S=da(sa.zone,Jb.defaultZone),la=Qb.fromObject(sa),va=Jb.now();if(!d(ka.year)){var Ga=e(Id);for(var Na;!(Na=Ga()).done;)Na=
Na.value,d(ka[Na])&&(ka[Na]=Jd[Na]);if(Ga=Zb(ka)||Nb(ka))return Rb.invalid(Ga);va=S.offset(va);Ga=Xb(ka,va,S);va=Ga[0];Ga=Ga[1]}return new Rb({ts:va,zone:S,loc:la,o:Ga})}function Kc(ka,sa,S){var la=d(S.round)?!0:S.round,va=function(ob,ub){ob=E(ob,la||S.calendary?0:2,!0);return sa.loc.clone(S).relFormatter(S).format(ob,ub)},Ga=function(ob){return S.calendary?sa.hasSame(ka,ob)?0:sa.startOf(ob).diff(ka.startOf(ob),ob).get(ob):sa.diff(ka,ob).get(ob)};if(S.unit)return va(Ga(S.unit),S.unit);for(var Na=
e(S.units),Za;!(Za=Na()).done;){Za=Za.value;var ib=Ga(Za);if(1<=Math.abs(ib))return va(ib,Za)}return va(ka>sa?-0:0,S.units[S.units.length-1])}function yc(ka){var sa={};0<ka.length&&"object"===typeof ka[ka.length-1]?(sa=ka[ka.length-1],ka=Array.from(ka).slice(0,ka.length-1)):ka=Array.from(ka);return[sa,ka]}function kc(ka){if(Rb.isDateTime(ka))return ka;if(ka&&ka.valueOf&&h(ka.valueOf()))return Rb.fromJSDate(ka);if(ka&&"object"===typeof ka)return Rb.fromObject(ka);throw new Pb("Unknown datetime argument: "+
ka+", of type "+typeof ka);}var cc=function(ka){function sa(){return ka.apply(this,arguments)||this}k(sa,ka);return sa}(q(Error)),dc=function(ka){function sa(S){return ka.call(this,"Invalid DateTime: "+S.toMessage())||this}k(sa,ka);return sa}(cc),Rc=function(ka){function sa(S){return ka.call(this,"Invalid Interval: "+S.toMessage())||this}k(sa,ka);return sa}(cc),ec=function(ka){function sa(S){return ka.call(this,"Invalid Duration: "+S.toMessage())||this}k(sa,ka);return sa}(cc),Yb=function(ka){function sa(){return ka.apply(this,
arguments)||this}k(sa,ka);return sa}(cc),Sc=function(ka){function sa(S){return ka.call(this,"Invalid unit "+S)||this}k(sa,ka);return sa}(cc),Pb=function(ka){function sa(){return ka.apply(this,arguments)||this}k(sa,ka);return sa}(cc),$b=function(ka){function sa(){return ka.call(this,"Zone is an abstract class")||this}k(sa,ka);return sa}(cc),Kb={year:"numeric",month:"numeric",day:"numeric"},ja={year:"numeric",month:"short",day:"numeric"},Ua={year:"numeric",month:"short",day:"numeric",weekday:"short"},
Ra={year:"numeric",month:"long",day:"numeric"},Ka={year:"numeric",month:"long",day:"numeric",weekday:"long"},Oa={hour:"numeric",minute:"numeric"},Wa={hour:"numeric",minute:"numeric",second:"numeric"},Va={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Qa={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},$a={hour:"numeric",minute:"numeric",hourCycle:"h23"},bb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},cb={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},kb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},ab={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},lb={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},pb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
Wb={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Lc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},zc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ec={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Fb={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},fc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,gc="January February March April May June July August September October November December".split(" "),Mc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Xc="JFMAMJJASOND".split(""),Nc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Uc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Yc="MTWTFSS".split(""),Vb=["AM","PM"],oc=["Before Christ",
"Anno Domini"],mc=["BC","AD"],Ob=["B","A"],hc={D:Kb,DD:ja,DDD:Ra,DDDD:Ka,t:Oa,tt:Wa,ttt:Va,tttt:Qa,T:$a,TT:bb,TTT:cb,TTTT:kb,f:ab,ff:mb,fff:Lc,ffff:Ec,F:lb,FF:pb,FFF:zc,FFFF:Fb},Sb=function(){function ka(S,la){this.opts=la;this.loc=S;this.systemLoc=null}ka.create=function(S,la){void 0===la&&(la={});return new ka(S,la)};ka.parseFormat=function(S){for(var la=null,va="",Ga=!1,Na=[],Za=0;Za<S.length;Za++){var ib=S.charAt(Za);"'"===ib?(0<va.length&&Na.push({literal:Ga,val:va}),la=null,va="",Ga=!Ga):Ga?
va+=ib:ib===la?va+=ib:(0<va.length&&Na.push({literal:!1,val:va}),la=va=ib)}0<va.length&&Na.push({literal:Ga,val:va});return Na};ka.macroTokenToFormatOpts=function(S){return hc[S]};var sa=ka.prototype;sa.formatWithSystemDefault=function(S,la){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(S,c({},this.opts,la)).format()};sa.formatDateTime=function(S,la){void 0===la&&(la={});return this.loc.dtFormatter(S,c({},this.opts,la)).format()};sa.formatDateTimeParts=
function(S,la){void 0===la&&(la={});return this.loc.dtFormatter(S,c({},this.opts,la)).formatToParts()};sa.resolvedOptions=function(S,la){void 0===la&&(la={});return this.loc.dtFormatter(S,c({},this.opts,la)).resolvedOptions()};sa.num=function(S,la){void 0===la&&(la=0);if(this.opts.forceSimple)return x(S,la);var va=c({},this.opts);0<la&&(va.padTo=la);return this.loc.numberFormatter(va).format(S)};sa.formatDateTimeFromString=function(S,la){var va=this,Ga="en"===this.loc.listingMode(),Na=this.loc.outputCalendar&&
"gregory"!==this.loc.outputCalendar,Za=function(xb,Db){return va.loc.extract(S,xb,Db)},ib=function(xb){return S.isOffsetFixed&&0===S.offset&&xb.allowZ?"Z":S.isValid?S.zone.formatOffset(S.ts,xb.format):""},ob=function(xb,Db){return Ga?ha(xb)[S.month-1]:Za(Db?{month:xb}:{month:xb,day:"numeric"},"month")},ub=function(xb,Db){return Ga?U(xb)[S.weekday-1]:Za(Db?{weekday:xb}:{weekday:xb,month:"long",day:"numeric"},"weekday")},Eb=function(xb){return Ga?X(xb)[0>S.year?0:1]:Za({era:xb},"era")};return P(ka.parseFormat(la),
function(xb){switch(xb){case "S":return va.num(S.millisecond);case "u":case "SSS":return va.num(S.millisecond,3);case "s":return va.num(S.second);case "ss":return va.num(S.second,2);case "uu":return va.num(Math.floor(S.millisecond/10),2);case "uuu":return va.num(Math.floor(S.millisecond/100));case "m":return va.num(S.minute);case "mm":return va.num(S.minute,2);case "h":return va.num(0===S.hour%12?12:S.hour%12);case "hh":return va.num(0===S.hour%12?12:S.hour%12,2);case "H":return va.num(S.hour);case "HH":return va.num(S.hour,
2);case "Z":return ib({format:"narrow",allowZ:va.opts.allowZ});case "ZZ":return ib({format:"short",allowZ:va.opts.allowZ});case "ZZZ":return ib({format:"techie",allowZ:va.opts.allowZ});case "ZZZZ":return S.zone.offsetName(S.ts,{format:"short",locale:va.loc.locale});case "ZZZZZ":return S.zone.offsetName(S.ts,{format:"long",locale:va.loc.locale});case "z":return S.zoneName;case "a":return Ga?Vb[12>S.hour?0:1]:Za({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Na?Za({day:"numeric"},"day"):
va.num(S.day);case "dd":return Na?Za({day:"2-digit"},"day"):va.num(S.day,2);case "c":return va.num(S.weekday);case "ccc":return ub("short",!0);case "cccc":return ub("long",!0);case "ccccc":return ub("narrow",!0);case "E":return va.num(S.weekday);case "EEE":return ub("short",!1);case "EEEE":return ub("long",!1);case "EEEEE":return ub("narrow",!1);case "L":return Na?Za({month:"numeric",day:"numeric"},"month"):va.num(S.month);case "LL":return Na?Za({month:"2-digit",day:"numeric"},"month"):va.num(S.month,
2);case "LLL":return ob("short",!0);case "LLLL":return ob("long",!0);case "LLLLL":return ob("narrow",!0);case "M":return Na?Za({month:"numeric"},"month"):va.num(S.month);case "MM":return Na?Za({month:"2-digit"},"month"):va.num(S.month,2);case "MMM":return ob("short",!1);case "MMMM":return ob("long",!1);case "MMMMM":return ob("narrow",!1);case "y":return Na?Za({year:"numeric"},"year"):va.num(S.year);case "yy":return Na?Za({year:"2-digit"},"year"):va.num(S.year.toString().slice(-2),2);case "yyyy":return Na?
Za({year:"numeric"},"year"):va.num(S.year,4);case "yyyyyy":return Na?Za({year:"numeric"},"year"):va.num(S.year,6);case "G":return Eb("short");case "GG":return Eb("long");case "GGGGG":return Eb("narrow");case "kk":return va.num(S.weekYear.toString().slice(-2),2);case "kkkk":return va.num(S.weekYear,4);case "W":return va.num(S.weekNumber);case "WW":return va.num(S.weekNumber,2);case "o":return va.num(S.ordinal);case "ooo":return va.num(S.ordinal,3);case "q":return va.num(S.quarter);case "qq":return va.num(S.quarter,
2);case "X":return va.num(Math.floor(S.ts/1E3));case "x":return va.num(S.ts);default:var Db=ka.macroTokenToFormatOpts(xb);xb=Db?va.formatWithSystemDefault(S,Db):xb;return xb}})};sa.formatDurationFromString=function(S,la){var va=this,Ga=function(ib){switch(ib[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}},Na=ka.parseFormat(la),Za=Na.reduce(function(ib,
ob){var ub=ob.val;return ob.literal?ib:ib.concat(ub)},[]);Za=S.shiftTo.apply(S,Za.map(Ga).filter(function(ib){return ib}));return P(Na,function(ib){return function(ob){var ub=Ga(ob);return ub?va.num(ib.get(ub),ob.length):ob}}(Za))};return ka}(),Tb=function(){function ka(sa,S){this.reason=sa;this.explanation=S}ka.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return ka}(),Ic=function(){function ka(){}var sa=ka.prototype;sa.offsetName=function(S,
la){throw new $b;};sa.formatOffset=function(S,la){throw new $b;};sa.offset=function(S){throw new $b;};sa.equals=function(S){throw new $b;};a(ka,[{key:"type",get:function(){throw new $b;}},{key:"name",get:function(){throw new $b;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new $b;}},{key:"isValid",get:function(){throw new $b;}}]);return ka}(),Zc=null,Mb=function(ka){function sa(){return ka.apply(this,arguments)||this}k(sa,ka);var S=sa.prototype;S.offsetName=
function(la,va){return L(la,va.format,va.locale)};S.formatOffset=function(la,va){return Y(this.offset(la),va)};S.offset=function(la){return-(new Date(la)).getTimezoneOffset()};S.equals=function(la){return"system"===la.type};a(sa,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Zc&&(Zc=new sa);
return Zc}}]);return sa}(Ic),Pc={},kd={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Tc={},sc=function(ka){function sa(la){var va=ka.call(this)||this;va.zoneName=la;va.valid=sa.isValidZone(la);return va}k(sa,ka);sa.create=function(la){Tc[la]||(Tc[la]=new sa(la));return Tc[la]};sa.resetCache=function(){Tc={};Pc={}};sa.isValidSpecifier=function(la){return this.isValidZone(la)};sa.isValidZone=function(la){if(!la)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:la})).format(),!0}catch(va){return!1}};
var S=sa.prototype;S.offsetName=function(la,va){return L(la,va.format,va.locale,this.name)};S.formatOffset=function(la,va){return Y(this.offset(la),va)};S.offset=function(la){la=new Date(la);if(isNaN(la))return NaN;var va=this.name;Pc[va]||(Pc[va]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:va,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));va=Pc[va];if(va.formatToParts){va=va.formatToParts(la);for(var Ga=[],Na=0;Na<va.length;Na++){var Za=
va[Na],ib=Za.type;Za=Za.value;var ob=kd[ib];"era"===ib?Ga[ob]=Za:d(ob)||(Ga[ob]=parseInt(Za,10))}va=Ga}else va=va.format(la).replace(/\u200E/g,""),va=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(va),va=[va[3],va[1],va[2],va[4],va[5],va[6],va[7]];Ga=va[0];Na=va[1];ib=va[2];Za=va[4];ob=va[5];var ub=va[6];"BC"===va[3]&&(Ga=-Math.abs(Ga)+1);va=K({year:Ga,month:Na,day:ib,hour:24===Za?0:Za,minute:ob,second:ub,millisecond:0});la=+la;Ga=la%1E3;return(va-(la-(0<=Ga?Ga:1E3+Ga)))/6E4};S.equals=function(la){return"iana"===
la.type&&la.name===this.name};a(sa,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return sa}(Ic),ad=null,ac=function(ka){function sa(la){var va=ka.call(this)||this;va.fixed=la;return va}k(sa,ka);sa.instance=function(la){return 0===la?sa.utcInstance:new sa(la)};sa.parseSpecifier=function(la){return la&&(la=la.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new sa(M(la[1],la[2])):null};var S=sa.prototype;S.offsetName=function(){return this.name};S.formatOffset=function(la,va){return Y(this.fixed,va)};S.offset=function(){return this.fixed};S.equals=function(la){return"fixed"===la.type&&la.fixed===this.fixed};a(sa,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+Y(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+Y(-this.fixed,"narrow")}},{key:"isUniversal",
get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===ad&&(ad=new sa(0));return ad}}]);return sa}(Ic),Hb=function(ka){function sa(la){var va=ka.call(this)||this;va.zoneName=la;return va}k(sa,ka);var S=sa.prototype;S.offsetName=function(){return null};S.formatOffset=function(){return""};S.offset=function(){return NaN};S.equals=function(){return!1};a(sa,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},
{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return sa}(Ic),Hc=function(){return Date.now()},Gc="system",gd=null,hd=null,id=null,Oc,Jb=function(){function ka(){}ka.resetCaches=function(){Qb.resetCache();sc.resetCache()};a(ka,null,[{key:"now",get:function(){return Hc},set:function(sa){Hc=sa}},{key:"defaultZone",get:function(){return da(Gc,Mb.instance)},set:function(sa){Gc=sa}},{key:"defaultLocale",get:function(){return gd},set:function(sa){gd=sa}},{key:"defaultNumberingSystem",
get:function(){return hd},set:function(sa){hd=sa}},{key:"defaultOutputCalendar",get:function(){return id},set:function(sa){id=sa}},{key:"throwOnInvalid",get:function(){return Oc},set:function(sa){Oc=sa}}]);return ka}(),od=["base"],nd=["padTo","floor"],jd={},bd={},cd={},Cc={},Vc=null,pd=function(){function ka(sa,S,la){this.padTo=la.padTo||0;this.floor=la.floor||!1;la.padTo;la.floor;var va=l(la,nd);if(!S||0<Object.keys(va).length)S=c({useGrouping:!1},la),0<la.padTo&&(S.minimumIntegerDigits=la.padTo),
la=S,void 0===la&&(la={}),S=JSON.stringify([sa,la]),va=cd[S],va||(va=new Intl.NumberFormat(sa,la),cd[S]=va),this.inf=va}ka.prototype.format=function(sa){if(this.inf)return this.inf.format(this.floor?Math.floor(sa):sa);sa=this.floor?Math.floor(sa):E(sa,3);return x(sa,this.padTo)};return ka}(),qd=function(){function ka(S,la,va){this.opts=va;if(S.zone.isUniversal){var Ga=S.offset/60*-1;Ga=0<=Ga?"Etc/GMT+"+Ga:"Etc/GMT"+Ga;0!==S.offset&&sc.create(Ga).valid?this.dt=S:(Ga="UTC",this.dt=va.timeZoneName?S:
0===S.offset?S:Rb.fromMillis(S.ts+6E4*S.offset))}else"system"===S.zone.type?this.dt=S:(this.dt=S,Ga=S.zone.name);S=c({},this.opts);Ga&&(S.timeZone=Ga);this.dtf=ia(la,S)}var sa=ka.prototype;sa.format=function(){return this.dtf.format(this.dt.toJSDate())};sa.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};sa.resolvedOptions=function(){return this.dtf.resolvedOptions()};return ka}(),rd=function(){function ka(S,la,va){this.opts=c({style:"long"},va);if(!la&&z()){la=va;void 0===
la&&(la={});va=la;va.base;va=l(va,od);va=JSON.stringify([S,va]);var Ga=Cc[va];Ga||(Ga=new Intl.RelativeTimeFormat(S,la),Cc[va]=Ga);this.rtf=Ga}}var sa=ka.prototype;sa.format=function(S,la){return this.rtf?this.rtf.format(S,la):Z(la,S,this.opts.numeric,"long"!==this.opts.style)};sa.formatToParts=function(S,la){return this.rtf?this.rtf.formatToParts(S,la):[]};return ka}(),Qb=function(){function ka(S,la,va,Ga){var Na=S.indexOf("-u-");if(-1===Na)S=[S];else{Na=S.substring(0,Na);try{var Za=ia(S).resolvedOptions()}catch(ib){Za=
ia(Na).resolvedOptions()}S=Za;S=[Na,S.numberingSystem,S.calendar]}Za=S[1];Na=S[2];this.locale=S[0];this.numberingSystem=la||Za||null;this.outputCalendar=va||Na||null;la=this.locale;va=this.numberingSystem;if((S=this.outputCalendar)||va)la+="-u",S&&(la+="-ca-"+S),va&&(la+="-nu-"+va);this.intl=la;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Ga;this.fastNumbersCached=null}ka.fromOpts=function(S){return ka.create(S.locale,
S.numberingSystem,S.outputCalendar,S.defaultToEN)};ka.create=function(S,la,va,Ga){void 0===Ga&&(Ga=!1);S=S||Jb.defaultLocale;var Na;(Na=S)||(Ga?Ga="en-US":(Vc||(Vc=(new Intl.DateTimeFormat).resolvedOptions().locale),Ga=Vc),Na=Ga);return new ka(Na,la||Jb.defaultNumberingSystem,va||Jb.defaultOutputCalendar,S)};ka.resetCache=function(){Vc=null;bd={};cd={};Cc={}};ka.fromObject=function(S){S=void 0===S?{}:S;return ka.create(S.locale,S.numberingSystem,S.outputCalendar)};var sa=ka.prototype;sa.listingMode=
function(){var S=this.isEnglish(),la=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return S&&la?"en":"intl"};sa.clone=function(S){return S&&0!==Object.getOwnPropertyNames(S).length?ka.create(S.locale||this.specifiedLocale,S.numberingSystem||this.numberingSystem,S.outputCalendar||this.outputCalendar,S.defaultToEN||!1):this};sa.redefaultToEN=function(S){void 0===S&&(S={});return this.clone(c({},S,{defaultToEN:!0}))};sa.redefaultToSystem=
function(S){void 0===S&&(S={});return this.clone(c({},S,{defaultToEN:!1}))};sa.months=function(S,la,va){var Ga=this;void 0===la&&(la=!1);void 0===va&&(va=!0);return Fa(this,S,va,ha,function(){var Na=la?{month:S,day:"numeric"}:{month:S},Za=la?"format":"standalone";Ga.monthsCache[Za][S]||(Ga.monthsCache[Za][S]=xa(function(ib){return Ga.extract(ib,Na,"month")}));return Ga.monthsCache[Za][S]})};sa.weekdays=function(S,la,va){var Ga=this;void 0===la&&(la=!1);void 0===va&&(va=!0);return Fa(this,S,va,U,function(){var Na=
la?{weekday:S,year:"numeric",month:"long",day:"numeric"}:{weekday:S},Za=la?"format":"standalone";Ga.weekdaysCache[Za][S]||(Ga.weekdaysCache[Za][S]=Ca(function(ib){return Ga.extract(ib,Na,"weekday")}));return Ga.weekdaysCache[Za][S]})};sa.meridiems=function(S){var la=this;void 0===S&&(S=!0);return Fa(this,void 0,S,function(){return Vb},function(){if(!la.meridiemCache){var va={hour:"numeric",hourCycle:"h12"};la.meridiemCache=[Rb.utc(2016,11,13,9),Rb.utc(2016,11,13,19)].map(function(Ga){return la.extract(Ga,
va,"dayperiod")})}return la.meridiemCache})};sa.eras=function(S,la){var va=this;void 0===la&&(la=!0);return Fa(this,S,la,X,function(){var Ga={era:S};va.eraCache[S]||(va.eraCache[S]=[Rb.utc(-40,1,1),Rb.utc(2017,1,1)].map(function(Na){return va.extract(Na,Ga,"era")}));return va.eraCache[S]})};sa.extract=function(S,la,va){return(S=this.dtFormatter(S,la).formatToParts().find(function(Ga){return Ga.type.toLowerCase()===va}))?S.value:null};sa.numberFormatter=function(S){void 0===S&&(S={});return new pd(this.intl,
S.forceSimple||this.fastNumbers,S)};sa.dtFormatter=function(S,la){void 0===la&&(la={});return new qd(S,this.intl,la)};sa.relFormatter=function(S){void 0===S&&(S={});return new rd(this.intl,this.isEnglish(),S)};sa.listFormatter=function(S){void 0===S&&(S={});var la=this.intl;void 0===S&&(S={});var va=JSON.stringify([la,S]),Ga=jd[va];Ga||(Ga=new Intl.ListFormat(la,S),jd[va]=Ga);return Ga};sa.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};
sa.equals=function(S){return this.locale===S.locale&&this.numberingSystem===S.numberingSystem&&this.outputCalendar===S.outputCalendar};a(ka,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var S=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=S}return this.fastNumbersCached}}]);return ka}(),dd=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Wc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ed=RegExp(""+Wc.source+("(?:"+dd.source+"?(?:\\[("+fc.source+")\\])?)?")),fd=RegExp("(?:T"+ed.source+")?"),sd=ca("weekYear","weekNumber","weekDay"),Ac=ca("year","ordinal"),ld=RegExp(Wc.source+" ?(?:"+dd.source+"|("+fc.source+"))?"),jb=RegExp("(?: "+ld.source+")?"),Bb=RegExp("^T?"+Wc.source+"$"),qc=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
td={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},ud=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,vd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,wd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
xd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,yd=Ma(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fd),zd=Ma(/(\d{4})-?W(\d\d)(?:-?(\d))?/,fd),Ad=Ma(/(\d{4})-?(\d{3})/,fd),Bd=Ma(ed),md=Sa(function(ka,sa){return[{year:ua(ka,sa),month:ua(ka,sa+1,1),day:ua(ka,sa+2,1)},null,sa+3]},ya,ta,pa),Cd=Sa(sd,ya,ta,pa),Dd=Sa(Ac,ya,ta,pa),Ed=Sa(ya,ta,pa),Fd=Sa(ya),Gd=Ma(/(\d{4})-(\d\d)-(\d\d)/,jb),Hd=Ma(ld),rc=Sa(ya,ta,pa),Fc={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},$c=c({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,
seconds:2592E3,milliseconds:2592E6}},Fc),zb=c({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Fc),Bc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Q=Bc.slice(0).reverse(),
aa=function(){function ka(S){var la="longterm"===S.conversionAccuracy||!1;this.values=S.values;this.loc=S.loc||Qb.create();this.conversionAccuracy=la?"longterm":"casual";this.invalid=S.invalid||null;this.matrix=la?zb:$c;this.isLuxonDuration=!0}ka.fromMillis=function(S,la){return ka.fromObject({milliseconds:S},la)};ka.fromObject=function(S,la){void 0===la&&(la={});if(null==S||"object"!==typeof S)throw new Pb("Duration.fromObject: argument expected to be an object, got "+(null===S?"null":typeof S));
return new ka({values:O(S,ka.normalizeUnit),loc:Qb.fromObject(la),conversionAccuracy:la.conversionAccuracy})};ka.fromDurationLike=function(S){if(h(S))return ka.fromMillis(S);if(ka.isDuration(S))return S;if("object"===typeof S)return ka.fromObject(S);throw new Pb("Unknown duration argument "+S+" of type "+typeof S);};ka.fromISO=function(S,la){var va=Ba(S,[qc,Aa])[0];return va?ka.fromObject(va,la):ka.invalid("unparsable",'the input "'+S+"\" can't be parsed as ISO 8601")};ka.fromISOTime=function(S,la){var va=
Ba(S,[Bb,Fd])[0];return va?ka.fromObject(va,la):ka.invalid("unparsable",'the input "'+S+"\" can't be parsed as ISO 8601")};ka.invalid=function(S,la){void 0===la&&(la=null);if(!S)throw new Pb("need to specify a reason the Duration is invalid");var va=S instanceof Tb?S:new Tb(S,la);if(Jb.throwOnInvalid)throw new ec(va);return new ka({invalid:va})};ka.normalizeUnit=function(S){var la={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",
day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[S?S.toLowerCase():S];if(!la)throw new Sc(S);return la};ka.isDuration=function(S){return S&&S.isLuxonDuration||!1};var sa=ka.prototype;sa.toFormat=function(S,la){void 0===la&&(la={});var va=c({},la,{floor:!1!==la.round&&!1!==la.floor});return this.isValid?Sb.create(this.loc,va).formatDurationFromString(this,S):"Invalid Duration"};
sa.toHuman=function(S){var la=this;void 0===S&&(S={});var va=Bc.map(function(Ga){var Na=la.values[Ga];return d(Na)?null:la.loc.numberFormatter(c({style:"unit",unitDisplay:"long"},S,{unit:Ga.slice(0,-1)})).format(Na)}).filter(function(Ga){return Ga});return this.loc.listFormatter(c({type:"conjunction",style:S.listStyle||"narrow"},S)).format(va)};sa.toObject=function(){return this.isValid?c({},this.values):{}};sa.toISO=function(){if(!this.isValid)return null;var S="P";0!==this.years&&(S+=this.years+
"Y");if(0!==this.months||0!==this.quarters)S+=this.months+3*this.quarters+"M";0!==this.weeks&&(S+=this.weeks+"W");0!==this.days&&(S+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)S+="T";0!==this.hours&&(S+=this.hours+"H");0!==this.minutes&&(S+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)S+=E(this.seconds+this.milliseconds/1E3,3)+"S";"P"===S&&(S+="T0S");return S};sa.toISOTime=function(S){void 0===S&&(S={});if(!this.isValid)return null;
var la=this.toMillis();if(0>la||864E5<=la)return null;S=c({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},S);la=this.shiftTo("hours","minutes","seconds","milliseconds");var va="basic"===S.format?"hhmm":"hh:mm";S.suppressSeconds&&0===la.seconds&&0===la.milliseconds||(va+="basic"===S.format?"ss":":ss",S.suppressMilliseconds&&0===la.milliseconds||(va+=".SSS"));la=la.toFormat(va);S.includePrefix&&(la="T"+la);return la};sa.toJSON=function(){return this.toISO()};sa.toString=
function(){return this.toISO()};sa.toMillis=function(){return this.as("milliseconds")};sa.valueOf=function(){return this.toMillis()};sa.plus=function(S){if(!this.isValid)return this;S=ka.fromDurationLike(S);for(var la={},va=e(Bc),Ga;!(Ga=va()).done;)if(Ga=Ga.value,C(S.values,Ga)||C(this.values,Ga))la[Ga]=S.get(Ga)+this.get(Ga);return Ia(this,{values:la},!0)};sa.minus=function(S){if(!this.isValid)return this;S=ka.fromDurationLike(S);return this.plus(S.negate())};sa.mapUnits=function(S){if(!this.isValid)return this;
for(var la={},va=0,Ga=Object.keys(this.values);va<Ga.length;va++){var Na=Ga[va];la[Na]=N(S(this.values[Na],Na))}return Ia(this,{values:la},!0)};sa.get=function(S){return this[ka.normalizeUnit(S)]};sa.set=function(S){if(!this.isValid)return this;S=c({},this.values,O(S,ka.normalizeUnit));return Ia(this,{values:S})};sa.reconfigure=function(S){var la=void 0===S?{}:S;S=la.conversionAccuracy;la={loc:this.loc.clone({locale:la.locale,numberingSystem:la.numberingSystem})};S&&(la.conversionAccuracy=S);return Ia(this,
la)};sa.as=function(S){return this.isValid?this.shiftTo(S).get(S):NaN};sa.normalize=function(){if(!this.isValid)return this;var S=this.toObject();Da(this.matrix,S);return Ia(this,{values:S},!0)};sa.shiftTo=function(){for(var S=arguments.length,la=Array(S),va=0;va<S;va++)la[va]=arguments[va];if(!this.isValid||0===la.length)return this;la=la.map(function(nc){return ka.normalizeUnit(nc)});S={};va={};for(var Ga=this.toObject(),Na,Za=e(Bc),ib;!(ib=Za()).done;)if(ib=ib.value,0<=la.indexOf(ib)){Na=ib;var ob=
0,ub;for(ub in va)ob+=this.matrix[ub][ib]*va[ub],va[ub]=0;h(Ga[ib])&&(ob+=Ga[ib]);var Eb=Math.trunc(ob);S[ib]=Eb;va[ib]=(1E3*ob-1E3*Eb)/1E3;for(var xb in Ga)Bc.indexOf(xb)>Bc.indexOf(ib)&&Ja(this.matrix,Ga,xb,S,ib)}else h(Ga[ib])&&(va[ib]=Ga[ib]);for(var Db in va)0!==va[Db]&&(S[Na]+=Db===Na?va[Db]:va[Db]/this.matrix[Na][Db]);return Ia(this,{values:S},!0).normalize()};sa.negate=function(){if(!this.isValid)return this;for(var S={},la=0,va=Object.keys(this.values);la<va.length;la++){var Ga=va[la];S[Ga]=
0===this.values[Ga]?0:-this.values[Ga]}return Ia(this,{values:S},!0)};sa.equals=function(S){if(!this.isValid||!S.isValid||!this.loc.equals(S.loc))return!1;for(var la=e(Bc),va;!(va=la()).done;){var Ga=va.value;va=this.values[Ga];Ga=S.values[Ga];va=void 0===va||0===va?void 0===Ga||0===Ga:va===Ga;if(!va)return!1}return!0};a(ka,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",
get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||
0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return ka}(),qa=function(){function ka(S){this.s=S.start;this.e=S.end;this.invalid=S.invalid||
null;this.isLuxonInterval=!0}ka.invalid=function(S,la){void 0===la&&(la=null);if(!S)throw new Pb("need to specify a reason the Interval is invalid");var va=S instanceof Tb?S:new Tb(S,la);if(Jb.throwOnInvalid)throw new Rc(va);return new ka({invalid:va})};ka.fromDateTimes=function(S,la){var va=kc(S),Ga=kc(la);var Na=va&&va.isValid?Ga&&Ga.isValid?Ga<va?qa.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+va.toISO()+" and end\x3d"+Ga.toISO()):null:qa.invalid("missing or invalid end"):
qa.invalid("missing or invalid start");return null==Na?new ka({start:va,end:Ga}):Na};ka.after=function(S,la){var va=aa.fromDurationLike(la),Ga=kc(S);return ka.fromDateTimes(Ga,Ga.plus(va))};ka.before=function(S,la){var va=aa.fromDurationLike(la),Ga=kc(S);return ka.fromDateTimes(Ga.minus(va),Ga)};ka.fromISO=function(S,la){var va=(S||"").split("/",2),Ga=va[0];va=va[1];if(Ga&&va){try{var Na=Rb.fromISO(Ga,la);var Za=Na.isValid}catch(ub){Za=!1}try{var ib=Rb.fromISO(va,la);var ob=ib.isValid}catch(ub){ob=
!1}if(Za&&ob)return ka.fromDateTimes(Na,ib);if(Za){if(ib=aa.fromISO(va,la),ib.isValid)return ka.after(Na,ib)}else if(ob&&(Na=aa.fromISO(Ga,la),Na.isValid))return ka.before(ib,Na)}return ka.invalid("unparsable",'the input "'+S+"\" can't be parsed as ISO 8601")};ka.isInterval=function(S){return S&&S.isLuxonInterval||!1};var sa=ka.prototype;sa.length=function(S){void 0===S&&(S="milliseconds");return this.isValid?this.toDuration.apply(this,[S]).get(S):NaN};sa.count=function(S){void 0===S&&(S="milliseconds");
if(!this.isValid)return NaN;var la=this.start.startOf(S),va=this.end.startOf(S);return Math.floor(va.diff(la,S).get(S))+1};sa.hasSame=function(S){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,S):!1};sa.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};sa.isAfter=function(S){return this.isValid?this.s>S:!1};sa.isBefore=function(S){return this.isValid?this.e<=S:!1};sa.contains=function(S){return this.isValid?this.s<=S&&this.e>S:!1};sa.set=function(S){S=void 0===S?{}:
S;return this.isValid?ka.fromDateTimes(S.start||this.s,S.end||this.e):this};sa.splitAt=function(){var S=this;if(!this.isValid)return[];for(var la=arguments.length,va=Array(la),Ga=0;Ga<la;Ga++)va[Ga]=arguments[Ga];la=va.map(kc).filter(function(ib){return S.contains(ib)}).sort();va=[];Ga=this.s;for(var Na=0;Ga<this.e;){var Za=la[Na]||this.e;Za=+Za>+this.e?this.e:Za;va.push(ka.fromDateTimes(Ga,Za));Ga=Za;Na+=1}return va};sa.splitBy=function(S){S=aa.fromDurationLike(S);if(!this.isValid||!S.isValid||0===
S.as("milliseconds"))return[];for(var la=this.s,va=1,Ga,Na=[];la<this.e;)Ga=this.start.plus(S.mapUnits(function(Za){return Za*va})),Ga=+Ga>+this.e?this.e:Ga,Na.push(ka.fromDateTimes(la,Ga)),la=Ga,va+=1;return Na};sa.divideEqually=function(S){return this.isValid?this.splitBy(this.length()/S).slice(0,S):[]};sa.overlaps=function(S){return this.e>S.s&&this.s<S.e};sa.abutsStart=function(S){return this.isValid?+this.e===+S.s:!1};sa.abutsEnd=function(S){return this.isValid?+S.e===+this.s:!1};sa.engulfs=
function(S){return this.isValid?this.s<=S.s&&this.e>=S.e:!1};sa.equals=function(S){return this.isValid&&S.isValid?this.s.equals(S.s)&&this.e.equals(S.e):!1};sa.intersection=function(S){if(!this.isValid)return this;var la=this.s>S.s?this.s:S.s;S=this.e<S.e?this.e:S.e;return la>=S?null:ka.fromDateTimes(la,S)};sa.union=function(S){return this.isValid?ka.fromDateTimes(this.s<S.s?this.s:S.s,this.e>S.e?this.e:S.e):this};ka.merge=function(S){var la=S.sort(function(va,Ga){return va.s-Ga.s}).reduce(function(va,
Ga){var Na=va[0],Za=va[1];return Za?Za.overlaps(Ga)||Za.abutsStart(Ga)?[Na,Za.union(Ga)]:[Na.concat([Za]),Ga]:[Na,Ga]},[[],null]);S=la[0];(la=la[1])&&S.push(la);return S};ka.xor=function(S){var la,va=null,Ga=0,Na=[];S=S.map(function(Za){return[{time:Za.s,type:"s"},{time:Za.e,type:"e"}]});S=(la=Array.prototype).concat.apply(la,S).sort(function(Za,ib){return Za.time-ib.time});for(la=e(S);!(S=la()).done;)S=S.value,Ga+="s"===S.type?1:-1,1===Ga?va=S.time:(va&&+va!==+S.time&&Na.push(ka.fromDateTimes(va,
S.time)),va=null);return ka.merge(Na)};sa.difference=function(){for(var S=this,la=arguments.length,va=Array(la),Ga=0;Ga<la;Ga++)va[Ga]=arguments[Ga];return ka.xor([this].concat(va)).map(function(Na){return S.intersection(Na)}).filter(function(Na){return Na&&!Na.isEmpty()})};sa.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};sa.toISO=function(S){return this.isValid?this.s.toISO(S)+"/"+this.e.toISO(S):"Invalid Interval"};sa.toISODate=function(){return this.isValid?
this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};sa.toISOTime=function(S){return this.isValid?this.s.toISOTime(S)+"/"+this.e.toISOTime(S):"Invalid Interval"};sa.toFormat=function(S,la){var va=(void 0===la?{}:la).separator;va=void 0===va?" \u2013 ":va;return this.isValid?""+this.s.toFormat(S)+va+this.e.toFormat(S):"Invalid Interval"};sa.toDuration=function(S,la){return this.isValid?this.e.diff(this.s,S,la):aa.invalid(this.invalidReason)};sa.mapEndpoints=function(S){return ka.fromDateTimes(S(this.s),
S(this.e))};a(ka,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return ka}(),za=function(){function ka(){}ka.hasDST=function(sa){void 0===sa&&(sa=Jb.defaultZone);var S=Rb.now().setZone(sa).set({month:12});
return!sa.isUniversal&&S.offset!==S.set({month:6}).offset};ka.isValidIANAZone=function(sa){return sc.isValidZone(sa)};ka.normalizeZone=function(sa){return da(sa,Jb.defaultZone)};ka.months=function(sa,S){void 0===sa&&(sa="long");var la=void 0===S?{}:S,va=la.locale,Ga=la.numberingSystem,Na=la.locObj;la=la.outputCalendar;return((void 0===Na?null:Na)||Qb.create(void 0===va?null:va,void 0===Ga?null:Ga,void 0===la?"gregory":la)).months(sa)};ka.monthsFormat=function(sa,S){void 0===sa&&(sa="long");var la=
void 0===S?{}:S,va=la.locale,Ga=la.numberingSystem,Na=la.locObj;la=la.outputCalendar;return((void 0===Na?null:Na)||Qb.create(void 0===va?null:va,void 0===Ga?null:Ga,void 0===la?"gregory":la)).months(sa,!0)};ka.weekdays=function(sa,S){void 0===sa&&(sa="long");var la=void 0===S?{}:S,va=la.locale,Ga=la.numberingSystem;la=la.locObj;return((void 0===la?null:la)||Qb.create(void 0===va?null:va,void 0===Ga?null:Ga,null)).weekdays(sa)};ka.weekdaysFormat=function(sa,S){void 0===sa&&(sa="long");var la=void 0===
S?{}:S,va=la.locale,Ga=la.numberingSystem;la=la.locObj;return((void 0===la?null:la)||Qb.create(void 0===va?null:va,void 0===Ga?null:Ga,null)).weekdays(sa,!0)};ka.meridiems=function(sa){sa=(void 0===sa?{}:sa).locale;return Qb.create(void 0===sa?null:sa).meridiems()};ka.eras=function(sa,S){void 0===sa&&(sa="short");var la=(void 0===S?{}:S).locale;return Qb.create(void 0===la?null:la,null,"gregory").eras(sa)};ka.features=function(){return{relative:z()}};return ka}(),Pa={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",
bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},fb={arab:[1632,
1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hb=Pa.hanidec.replace(/[\[|\]]/g,"").split(""),rb="[ "+String.fromCharCode(160)+"]",wb=new RegExp(rb,"g"),vb={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",
"short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Lb=null,tc=[0,31,59,90,120,151,181,212,243,273,304,334],Dc=[0,31,60,91,121,152,182,213,244,274,305,335],Jd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ld={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Md={ordinal:1,hour:0,minute:0,second:0,
millisecond:0},Id="year month day hour minute second millisecond".split(" "),Nd="weekYear weekNumber weekday hour minute second millisecond".split(" "),Od="year ordinal hour minute second millisecond".split(" "),Rb=function(){function ka(S){var la=S.zone||Jb.defaultZone,va=S.invalid||(Number.isNaN(S.ts)?new Tb("invalid input"):null)||(la.isValid?null:yb(la));this.ts=d(S.ts)?Jb.now():S.ts;var Ga=null,Na=null;va||(S.old&&S.old.ts===this.ts&&S.old.zone.equals(la)?(Na=[S.old.c,S.old.o],Ga=Na[0],Na=Na[1]):
(Na=la.offset(this.ts),Ga=ic(this.ts,Na),Ga=(va=Number.isNaN(Ga.year)?new Tb("invalid input"):null)?null:Ga,Na=va?null:Na));this._zone=la;this.loc=S.loc||Qb.create();this.invalid=va;this.weekData=null;this.c=Ga;this.o=Na;this.isLuxonDateTime=!0}ka.now=function(){return new ka({})};ka.local=function(){var S=yc(arguments),la=S[1];return Qc({year:la[0],month:la[1],day:la[2],hour:la[3],minute:la[4],second:la[5],millisecond:la[6]},S[0])};ka.utc=function(){var S=yc(arguments),la=S[0],va=S[1];S=va[0];var Ga=
va[1],Na=va[2],Za=va[3],ib=va[4],ob=va[5];va=va[6];la.zone=ac.utcInstance;return Qc({year:S,month:Ga,day:Na,hour:Za,minute:ib,second:ob,millisecond:va},la)};ka.fromJSDate=function(S,la){void 0===la&&(la={});var va="[object Date]"===Object.prototype.toString.call(S)?S.valueOf():NaN;if(Number.isNaN(va))return ka.invalid("invalid input");var Ga=da(la.zone,Jb.defaultZone);return Ga.isValid?new ka({ts:va,zone:Ga,loc:Qb.fromObject(la)}):ka.invalid(yb(Ga))};ka.fromMillis=function(S,la){void 0===la&&(la=
{});if(h(S))return-864E13>S||864E13<S?ka.invalid("Timestamp out of range"):new ka({ts:S,zone:da(la.zone,Jb.defaultZone),loc:Qb.fromObject(la)});throw new Pb("fromMillis requires a numerical input, but received a "+typeof S+" with value "+S);};ka.fromSeconds=function(S,la){void 0===la&&(la={});if(h(S))return new ka({ts:1E3*S,zone:da(la.zone,Jb.defaultZone),loc:Qb.fromObject(la)});throw new Pb("fromSeconds requires a numerical input");};ka.fromObject=function(S,la){void 0===la&&(la={});S=S||{};var va=
da(la.zone,Jb.defaultZone);if(!va.isValid)return ka.invalid(yb(va));var Ga=Jb.now(),Na=d(la.specificOffset)?va.offset(Ga):la.specificOffset,Za=O(S,Jc),ib=!d(Za.ordinal),ob=!d(Za.year),ub=!d(Za.month)||!d(Za.day);ob=ob||ub;var Eb=Za.weekYear||Za.weekNumber,xb=Qb.fromObject(la);if((ob||ib)&&Eb)throw new Yb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ub&&ib)throw new Yb("Can't mix ordinal dates with month/day");ub=Eb||Za.weekday&&!ob;Eb=ic(Ga,Na);if(ub){var Db=Nd;Ga=Ld;
Eb=Gb(Eb)}else ib?(Db=Od,Ga=Md,Eb=Ab(Eb)):(Db=Id,Ga=Jd);var nc=!1;Db=e(Db);for(var lc;!(lc=Db()).done;)lc=lc.value,d(Za[lc])?Za[lc]=nc?Ga[lc]:Eb[lc]:nc=!0;ub?(Ga=t(Za.weekYear),Eb=F(Za.weekNumber,1,I(Za.weekYear)),nc=F(Za.weekday,1,7),Ga=Ga?Eb?nc?!1:sb("weekday",Za.weekday):sb("week",Za.week):sb("weekYear",Za.weekYear)):ib?(Ga=t(Za.year),Eb=F(Za.ordinal,1,G(Za.year)?366:365),Ga=Ga?Eb?!1:sb("ordinal",Za.ordinal):sb("year",Za.year)):Ga=Zb(Za);if(Ga=Ga||Nb(Za))return ka.invalid(Ga);ib=ub?nb(Za):ib?Ub(Za):
Za;Na=Xb(ib,Na,va);va=new ka({ts:Na[0],zone:va,o:Na[1],loc:xb});return Za.weekday&&ob&&S.weekday!==va.weekday?ka.invalid("mismatched weekday","you can't specify both a weekday of "+Za.weekday+" and a date of "+va.toISO()):va};ka.fromISO=function(S,la){void 0===la&&(la={});var va=Ba(S,[yd,md],[zd,Cd],[Ad,Dd],[Bd,Ed]);return jc(va[0],va[1],la,"ISO 8601",S)};ka.fromRFC2822=function(S,la){void 0===la&&(la={});var va=Ba(S.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[ud,ea]);return jc(va[0],
va[1],la,"RFC 2822",S)};ka.fromHTTP=function(S,la){void 0===la&&(la={});var va=Ba(S,[vd,na],[wd,na],[xd,V]);return jc(va[0],va[1],la,"HTTP",la)};ka.fromFormat=function(S,la,va){void 0===va&&(va={});if(d(S)||d(la))throw new Pb("fromFormat requires an input string and a format");var Ga=va,Na=Ga.locale;Ga=Ga.numberingSystem;Na=Qb.fromOpts({locale:void 0===Na?null:Na,numberingSystem:void 0===Ga?null:Ga,defaultToEN:!0});Na=qb(Na,S,la);var Za=[Na.result,Na.zone,Na.specificOffset,Na.invalidReason];Na=Za[0];
Ga=Za[1];var ib=Za[2];return(Za=Za[3])?ka.invalid(Za):jc(Na,Ga,va,"format "+la,S,ib)};ka.fromString=function(S,la,va){void 0===va&&(va={});return ka.fromFormat(S,la,va)};ka.fromSQL=function(S,la){void 0===la&&(la={});var va=Ba(S,[Gd,md],[Hd,rc]);return jc(va[0],va[1],la,"SQL",S)};ka.invalid=function(S,la){void 0===la&&(la=null);if(!S)throw new Pb("need to specify a reason the DateTime is invalid");var va=S instanceof Tb?S:new Tb(S,la);if(Jb.throwOnInvalid)throw new dc(va);return new ka({invalid:va})};
ka.isDateTime=function(S){return S&&S.isLuxonDateTime||!1};var sa=ka.prototype;sa.get=function(S){return this[S]};sa.resolvedLocaleOptions=function(S){void 0===S&&(S={});S=Sb.create(this.loc.clone(S),S).resolvedOptions(this);return{locale:S.locale,numberingSystem:S.numberingSystem,outputCalendar:S.calendar}};sa.toUTC=function(S,la){void 0===S&&(S=0);void 0===la&&(la={});return this.setZone(ac.instance(S),la)};sa.toLocal=function(){return this.setZone(Jb.defaultZone)};sa.setZone=function(S,la){var va=
void 0===la?{}:la,Ga=va.keepLocalTime;Ga=void 0===Ga?!1:Ga;va=va.keepCalendarTime;va=void 0===va?!1:va;S=da(S,Jb.defaultZone);if(S.equals(this.zone))return this;if(S.isValid){var Na=this.ts;if(Ga||va)Ga=S.offset(this.ts),va=this.toObject(),Na=Xb(va,Ga,S)[0];return Ib(this,{ts:Na,zone:S})}return ka.invalid(yb(S))};sa.reconfigure=function(S){S=void 0===S?{}:S;S=this.loc.clone({locale:S.locale,numberingSystem:S.numberingSystem,outputCalendar:S.outputCalendar});return Ib(this,{loc:S})};sa.setLocale=function(S){return this.reconfigure({locale:S})};
sa.set=function(S){if(!this.isValid)return this;S=O(S,Jc);var la=!d(S.weekYear)||!d(S.weekNumber)||!d(S.weekday),va=!d(S.ordinal),Ga=!d(S.year),Na=!d(S.month)||!d(S.day),Za=S.weekYear||S.weekNumber;if((Ga||Na||va)&&Za)throw new Yb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Na&&va)throw new Yb("Can't mix ordinal dates with month/day");la?la=nb(c({},Gb(this.c),S)):d(S.ordinal)?(la=c({},this.toObject(),S),d(S.day)&&(la.day=Math.min(H(la.year,la.month),la.day))):la=Ub(c({},
Ab(this.c),S));S=Xb(la,this.o,this.zone);return Ib(this,{ts:S[0],o:S[1]})};sa.plus=function(S){if(!this.isValid)return this;S=aa.fromDurationLike(S);return Ib(this,vc(this,S))};sa.minus=function(S){if(!this.isValid)return this;S=aa.fromDurationLike(S).negate();return Ib(this,vc(this,S))};sa.startOf=function(S){if(!this.isValid)return this;var la={};S=aa.normalizeUnit(S);switch(S){case "years":la.month=1;case "quarters":case "months":la.day=1;case "weeks":case "days":la.hour=0;case "hours":la.minute=
0;case "minutes":la.second=0;case "seconds":la.millisecond=0}"weeks"===S&&(la.weekday=1);"quarters"===S&&(la.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(la)};sa.endOf=function(S){var la;return this.isValid?this.plus((la={},la[S]=1,la)).startOf(S).minus(1):this};sa.toFormat=function(S,la){void 0===la&&(la={});return this.isValid?Sb.create(this.loc.redefaultToEN(la)).formatDateTimeFromString(this,S):"Invalid DateTime"};sa.toLocaleString=function(S,la){void 0===S&&(S=Kb);void 0===la&&(la=
{});return this.isValid?Sb.create(this.loc.clone(la),S).formatDateTime(this):"Invalid DateTime"};sa.toLocaleParts=function(S){void 0===S&&(S={});return this.isValid?Sb.create(this.loc.clone(S),S).formatDateTimeParts(this):[]};sa.toISO=function(S){var la=void 0===S?{}:S,va=la.format;S=la.suppressSeconds;S=void 0===S?!1:S;var Ga=la.suppressMilliseconds;Ga=void 0===Ga?!1:Ga;var Na=la.includeOffset;Na=void 0===Na?!0:Na;la=la.extendedZone;la=void 0===la?!1:la;if(!this.isValid)return null;va="extended"===
(void 0===va?"extended":va);var Za=wc(this,va);return Za=Za+"T"+xc(this,va,S,Ga,Na,la)};sa.toISODate=function(S){S=(void 0===S?{}:S).format;return this.isValid?wc(this,"extended"===(void 0===S?"extended":S)):null};sa.toISOWeekDate=function(){return pc(this,"kkkk-'W'WW-c")};sa.toISOTime=function(S){var la=void 0===S?{}:S;S=la.suppressMilliseconds;var va=la.suppressSeconds,Ga=la.includeOffset,Na=la.includePrefix,Za=la.extendedZone;la=la.format;return this.isValid?((void 0===Na?0:Na)?"T":"")+xc(this,
"extended"===(void 0===la?"extended":la),void 0===va?!1:va,void 0===S?!1:S,void 0===Ga?!0:Ga,void 0===Za?!1:Za):null};sa.toRFC2822=function(){return pc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};sa.toHTTP=function(){return pc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};sa.toSQLDate=function(){return this.isValid?wc(this,!0):null};sa.toSQLTime=function(S){var la=void 0===S?{}:S;S=la.includeOffset;S=void 0===S?!0:S;var va=la.includeZone;va=void 0===va?!1:va;la=la.includeOffsetSpace;la=void 0===
la?!0:la;var Ga="HH:mm:ss.SSS";if(va||S)la&&(Ga+=" "),va?Ga+="z":S&&(Ga+="ZZ");return pc(this,Ga,!0)};sa.toSQL=function(S){void 0===S&&(S={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(S):null};sa.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};sa.valueOf=function(){return this.toMillis()};sa.toMillis=function(){return this.isValid?this.ts:NaN};sa.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};sa.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/
1E3):NaN};sa.toJSON=function(){return this.toISO()};sa.toBSON=function(){return this.toJSDate()};sa.toObject=function(S){void 0===S&&(S={});if(!this.isValid)return{};var la=c({},this.c);S.includeConfig&&(la.outputCalendar=this.outputCalendar,la.numberingSystem=this.loc.numberingSystem,la.locale=this.loc.locale);return la};sa.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};sa.diff=function(S,la,va){void 0===la&&(la="milliseconds");void 0===va&&(va={});if(!this.isValid||!S.isValid)return aa.invalid("created by diffing an invalid DateTime");
va=c({locale:this.locale,numberingSystem:this.numberingSystem},va);var Ga=(Array.isArray(la)?la:[la]).map(aa.normalizeUnit);la=S.valueOf()>this.valueOf();S=ra(la?this:S,la?S:this,Ga,va);return la?S.negate():S};sa.diffNow=function(S,la){void 0===S&&(S="milliseconds");void 0===la&&(la={});return this.diff(ka.now(),S,la)};sa.until=function(S){return this.isValid?qa.fromDateTimes(this,S):this};sa.hasSame=function(S,la){if(!this.isValid)return!1;var va=S.valueOf(),Ga=this.setZone(S.zone,{keepLocalTime:!0});
return Ga.startOf(la)<=va&&va<=Ga.endOf(la)};sa.equals=function(S){return this.isValid&&S.isValid&&this.valueOf()===S.valueOf()&&this.zone.equals(S.zone)&&this.loc.equals(S.loc)};sa.toRelative=function(S){void 0===S&&(S={});if(!this.isValid)return null;var la=S.base||ka.fromObject({},{zone:this.zone}),va=S.padding?this<la?-S.padding:S.padding:0,Ga="years months days hours minutes seconds".split(" "),Na=S.unit;Array.isArray(S.unit)&&(Ga=S.unit,Na=void 0);return Kc(la,this.plus(va),c({},S,{numeric:"always",
units:Ga,unit:Na}))};sa.toRelativeCalendar=function(S){void 0===S&&(S={});return this.isValid?Kc(S.base||ka.fromObject({},{zone:this.zone}),this,c({},S,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};ka.min=function(){for(var S=arguments.length,la=Array(S),va=0;va<S;va++)la[va]=arguments[va];if(!la.every(ka.isDateTime))throw new Pb("min requires all arguments be DateTimes");return v(la,function(Ga){return Ga.valueOf()},Math.min)};ka.max=function(){for(var S=arguments.length,
la=Array(S),va=0;va<S;va++)la[va]=arguments[va];if(!la.every(ka.isDateTime))throw new Pb("max requires all arguments be DateTimes");return v(la,function(Ga){return Ga.valueOf()},Math.max)};ka.fromFormatExplain=function(S,la,va){void 0===va&&(va={});var Ga=va;va=Ga.locale;Ga=Ga.numberingSystem;va=Qb.fromOpts({locale:void 0===va?null:va,numberingSystem:void 0===Ga?null:Ga,defaultToEN:!0});return qb(va,S,la)};ka.fromStringExplain=function(S,la,va){void 0===va&&(va={});return ka.fromFormatExplain(S,la,
va)};a(ka,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",
get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:
NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?uc(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?uc(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?uc(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Ab(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?
za.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?za.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?za.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?za.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return G(this.year)}},{key:"daysInMonth",
get:function(){return H(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?G(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?I(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Kb}},{key:"DATE_MED",get:function(){return ja}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return Ua}},{key:"DATE_FULL",get:function(){return Ra}},{key:"DATE_HUGE",get:function(){return Ka}},{key:"TIME_SIMPLE",get:function(){return Oa}},{key:"TIME_WITH_SECONDS",
get:function(){return Wa}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Va}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Qa}},{key:"TIME_24_SIMPLE",get:function(){return $a}},{key:"TIME_24_WITH_SECONDS",get:function(){return bb}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return cb}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return kb}},{key:"DATETIME_SHORT",get:function(){return ab}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return lb}},{key:"DATETIME_MED",get:function(){return mb}},
{key:"DATETIME_MED_WITH_SECONDS",get:function(){return pb}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Wb}},{key:"DATETIME_FULL",get:function(){return Lc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return zc}},{key:"DATETIME_HUGE",get:function(){return Ec}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Fb}}]);return ka}();D.DateTime=Rb;D.Duration=aa;D.FixedOffsetZone=ac;D.IANAZone=sc;D.Info=za;D.Interval=qa;D.InvalidZone=Hb;D.Settings=Jb;D.SystemZone=Mb;D.VERSION="2.4.0";
D.Zone=Ic;Object.defineProperty(D,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../../geometry/Extent ../../../layers/Field".split(" "),function(D,B,a,c,k,n){function r(m){var q=null;m.domain&&(q="range"===m.domain.type?{type:"range",range:[m.domain.minValue,m.domain.maxValue]}:{type:"codedValue",codedValues:m.domain.toJson().codedValues});return a(a({name:m.name,type:m.type,
alias:m.alias},void 0!==m.length?{length:m.length}:{}),{editable:!0===m.editable,nullable:!0===m.nullable,domain:q})}function f(m){return m instanceof Date}Object.defineProperty(B,"__esModule",{value:!0});B.stableStringify=B.extractServiceUrl=B.toEsriGeometryType=B.layerFieldEsriConstants=B.layerGeometryEsriRestConstants=B.layerGeometryEsriConstants=B.callback=B.errback=B.defaultMaxRecords=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=B.cloneAttributes=B.equalityTest=
B.isDate=B.isArray=B.isNumber=B.isBoolean=B.isString=B.IdState=B.esriFieldToJson=B.cloneField=B.FeatureServiceDatabaseType=void 0;(function(m){m[m.Standardised=0]="Standardised";m[m.StandardisedNoInterval=1]="StandardisedNoInterval";m[m.SqlServer=2]="SqlServer";m[m.Oracle=3]="Oracle";m[m.Postgres=4]="Postgres";m[m.PGDB=5]="PGDB";m[m.FILEGDB=6]="FILEGDB";m[m.NotEvaluated=7]="NotEvaluated"})(B.FeatureServiceDatabaseType||(B.FeatureServiceDatabaseType={}));B.cloneField=function(m){return new n(r(m))};
B.esriFieldToJson=r;(function(m){m[m.InFeatureSet=0]="InFeatureSet";m[m.NotInFeatureSet=1]="NotInFeatureSet";m[m.Unknown=2]="Unknown"})(B.IdState||(B.IdState={}));B.isString=function(m){return"string"===typeof m||m instanceof String};B.isBoolean=function(m){return"boolean"===typeof m};B.isNumber=function(m){return"number"===typeof m};B.isArray=function(m){return m instanceof Array};B.isDate=f;B.equalityTest=function(m,q){return m===q?!0:f(m)&&f(q)?m.getTime()===q.getTime():!1};B.cloneAttributes=function(m){var q=
{},l;for(l in m)q[l]=m[l];return q};B.convertSquareUnitsToCode=function(m){if(void 0===m)return null;if("number"===typeof m)return m;switch(m.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};B.shapeExtent=function(m){if(null===m)return null;switch(m.type){case "polygon":case "multipoint":case "polyline":return m.getExtent();case "point":return new k({xmin:m.x,ymin:m.y,xmax:m.x,ymax:m.y,
spatialReference:m.spatialReference});case "extent":return m}return null};B.convertLinearUnitsToCode=function(m){if(void 0===m)return null;if("number"===typeof m||"number"===typeof m)return m;switch(m.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};B.sameGeomType=function(m,q){return m===q||"point"===m&&"esriGeometryPoint"===q||"polyline"===m&&"esriGeometryPolyline"===q||"polygon"===m&&
"esriGeometryPolygon"===q||"extent"===m&&"esriGeometryEnvelope"===q||"multipoint"===m&&"esriGeometryMultipoint"===q||"point"===q&&"esriGeometryPoint"===m||"polyline"===q&&"esriGeometryPolyline"===m||"polygon"===q&&"esriGeometryPolygon"===m||"extent"===q&&"esriGeometryEnvelope"===m||"multipoint"===q&&"esriGeometryMultipoint"===m?!0:!1};B.defaultMaxRecords=1E3;B.errback=function(m){return function(q){m.reject(q)}};B.callback=function(m,q){return function(){try{m.apply(null,arguments)}catch(l){q.reject(l)}}};
B.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};B.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",
esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};B.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",
esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};B.toEsriGeometryType=function(m){switch(m){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};B.extractServiceUrl=function(m){if(void 0===
m)return"";m=m.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");m=m.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return m=m.split("?")[0]};B.stableStringify=function(m,q){q||(q={});"function"===typeof q&&(q={cmp:q});var l="boolean"===typeof q.cycles?q.cycles:!1,b=q.cmp&&function(e){return function(d){return function(h,t){return e({key:h,value:d[h]},{key:t,value:d[t]})}}}(q.cmp),g=[];return function h(d){d&&d.toJson&&"function"===typeof d.toJson&&(d=d.toJson());if(void 0!==d){if("number"===typeof d)return isFinite(d)?
""+d:"null";if("object"!==typeof d)return JSON.stringify(d);var t;if(Array.isArray(d)){var z="[";for(t=0;t<d.length;t++)t&&(z+=","),z+=h(d[t])||"null";return z+"]"}if(null===d)return"null";if(g.includes(d)){if(l)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var v=g.push(d)-1,y=Object.keys(d).sort(b&&b(d));z="";for(t=0;t<y.length;t++){var C=y[t],F=h(d[C]);F&&(z&&(z+=","),z+=JSON.stringify(C)+":"+F)}g.splice(v,1);return"{"+z+"}"}}(m)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),
function(D,B,a,c,k,n,r){D=D(null,{declaredClass:"esri.layers.Field",constructor:function(f){if(f&&B.isObject(f)&&(this.name=f.name,this.type=f.type,this.alias=f.alias,this.length=f.length,this.editable=f.editable,this.nullable=f.nullable,this.defaultValue=f.defaultValue,this.description=f.description?JSON.parse(f.description):null,this.isViewOverride=!!f.isViewOverride,(f=f.domain)&&B.isObject(f)))switch(f.type){case "range":this.domain=new n(f);break;case "codedValue":this.domain=new r(f)}},toJson:function(){return k.fixJson({name:this.name,
type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});B.setObject("layers.Field",D,c);return D})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(D,
B,a,c,k,n){D=D([n],{declaredClass:"esri.layers.RangeDomain",constructor:function(r){r&&B.isObject(r)&&(this.minValue=r.range[0],this.maxValue=r.range[1])},toJson:function(){var r=this.inherited(arguments);r.range=[this.minValue,this.maxValue];return k.fixJson(r)}});B.setObject("layers.RangeDomain",D,c);return D})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.layers.Domain",constructor:function(n){n&&
B.isObject(n)&&(this.name=n.name,this.type=n.type)},toJson:function(){return k.fixJson({name:this.name,type:this.type})}});B.setObject("layers.Domain",D,c);return D})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(D,B,a,c,k,n,r){D=D([r],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(f){f&&B.isObject(f)&&(this.codedValues=f.codedValues)},getName:function(f){var m;a.some(this.codedValues,
function(q){q.code==f&&(m=q.name);return!!m});return m},toJson:function(){var f=this.inherited(arguments);f.codedValues=B.clone(this.codedValues);return n.fixJson(f)}});B.setObject("layers.CodedValueDomain",D,k);return D})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(D,B,a,c){return function(k){function n(r,f,m,q,l,b){var g=k.call(this)||this;g.attachmentUrl=l;g.immutable=!1;g.setField("id",r);g.setField("name",f);g.setField("contenttype",
m);g.setField("size",q);g.setField("exifinfo",b);g.immutable=!0;return g}a(n,k);return n}(c)})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){return function(){function g(){this.arcadeDeclaredClass="esri.arcade.Feature";
this._layer=this.attributes=this._geometry=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}g.createFromGraphic=function(e){var d=new g;d._geometry=e.geometry?e.geometry:null;d.attributes=void 0===e.attributes?{}:null===e.attributes?{}:e.attributes;e._sourceLayer?(d._layer=e._sourceLayer,d._datesfixed=!1):e._layer?(d._layer=e._layer,d._datesfixed=!1):e.layer&&"fields"in e.layer?(d._layer=e.layer,d._datesfixed=!1):e.sourceLayer&&"fields"in e.sourceLayer&&(d._layer=e.sourceLayer,
d._datesfixed=!1);return d};g.createFromArcadeFeature=function(e){var d=new g;d._datesfixed=e._datesfixed;d.attributes=e.attributes;d._geometry=e._geometry;e._layer&&(d._layer=e._layer);return d};g.createFromArcadeDictionary=function(e){var d=new g;d.attributes=e.field("attributes");null!==d.attributes?d.attributes instanceof r?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=e.field("geometry");null!==d._geometry&&(d._geometry instanceof
r?d._geometry=g.parseGeometryFromDictionary(d._geometry):d._geometry instanceof q||(d._geometry=null));return d};g.createFromGraphicLikeObject=function(e,d,h){void 0===h&&(h=null);var t=new g;null===d&&(d={});t.attributes=d;t._geometry=e?e:null;t._layer=h;t._layer&&(t._datesfixed=!1);return t};g.prototype.repurposeFromGraphicLikeObject=function(e,d,h){void 0===h&&(h=null);null===d&&(d={});this.attributes=d;this._geometry=e?e:null;this._datesfixed=(this._layer=h)?!1:!0};g.prototype.castToText=function(){var e=
"";!1===this._datesfixed&&this._fixDates();for(var d in this.attributes){""!==e&&(e+=",");var h=this.attributes[d];null==h?e+=JSON.stringify(d)+":null":m.isBoolean(h)||m.isNumber(h)||m.isString(h)?e+=JSON.stringify(d)+":"+JSON.stringify(h):h instanceof q?e+=JSON.stringify(d)+":"+m.toStringExplicit(h):h instanceof f?e+=JSON.stringify(d)+":"+m.toStringExplicit(h):h instanceof Array?e+=JSON.stringify(d)+":"+m.toStringExplicit(h):h instanceof Date?e+=JSON.stringify(d)+":"+JSON.stringify(h):null!==h&&
"object"===typeof h&&void 0!==h.castToText&&(e+=JSON.stringify(d)+":"+h.castToText())}return'{"geometry":'+(null===this.geometry()?"null":m.toStringExplicit(this.geometry()))+',"attributes":{'+e+"}}"};g.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var e=[],d=0;d<this._layer.fields.length;d++){var h=this._layer.fields[d];"date"!==h.type&&"esriFieldTypeDate"!==h.type||e.push(h.name)}this._datefields=e;0<e.length&&
this._fixDateFields(e)}this._datesfixed=!0};g.prototype._fixDateFields=function(e){this.attributes=k({},this.attributes);for(var d=0;d<e.length;d++){var h=this.attributes[e[d]];if(null!==h)if(void 0===h)for(var t in this.attributes){if(t.toLowerCase()===e[d].toLowerCase()){h=this.attributes[t];null===h||h instanceof Date||(this.attributes[t]=new Date(h));break}}else h instanceof Date||(this.attributes[e[d]]=new Date(h))}};g.prototype.geometry=function(){if(null===this._geometry)return this._geometry;
this._geometry instanceof q||(this._geometry=b.fromJson(this._geometry));return this._geometry};g.prototype.field=function(e){!1===this._datesfixed&&this._fixDates();var d=this.attributes[e];if(void 0!==d)return d;d=e.toLowerCase();for(var h in this.attributes)if(h.toLowerCase()===d)return this.attributes[h];if(this._hasFieldDefinition(d))return null;throw Error("Field not Found : "+e);};g.prototype._hasFieldDefinition=function(e){if(null===this._layer)return!1;for(var d=0;d<this._layer.fields.length;d++)if(this._layer.fields[d].name.toLowerCase()===
e)return!0;return!1};g.prototype.setField=function(e,d){if(this.immutable)throw Error("Feature is Immutable");if(!1===m.isSimpleType(d))throw Error("Illegal Value Assignment to Feature");var h=e.toLowerCase();if(void 0===this.attributes[e])for(var t in this.attributes)if(t.toLowerCase()===h){this.attributes[t]=d;return}this.attributes[e]=d};g.prototype.hasField=function(e){var d=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(var h in this.attributes)if(h.toLowerCase()===d)return!0;return this._hasFieldDefinition(d)?
!0:!1};g.prototype.keys=function(){var e=[],d={},h;for(h in this.attributes)e.push(h),d[h.toLowerCase()]=1;if(null!==this._layer)for(h=0;h<this._layer.fields.length;h++){var t=this._layer.fields[h];1!==d[t.name.toLowerCase()]&&e.push(t.name)}return e=e.sort()};g.parseGeometryFromDictionary=function(e){e=g._convertDictionaryToJson(e,!0);void 0!==e.hasm&&(e.hasM=e.hasm,delete e.hasm);void 0!==e.hasz&&(e.hasZ=e.hasz,delete e.hasz);void 0!==e.spatialreference&&(e.spatialReference=e.spatialreference,delete e.spatialreference);
void 0!==e.rings&&(e.rings=this._fixPathArrays(e.rings,!0===e.hasZ,!0===e.hasZ));void 0!==e.paths&&(e.paths=this._fixPathArrays(e.paths,!0===e.hasZ,!0===e.hasM));void 0!==e.points&&(e.points=this._fixPointArrays(e.points,!0===e.hasZ,!0===e.hasM));return b.fromJson(e)};g._fixPathArrays=function(e,d,h){var t=[];if(e instanceof Array)for(var z=0;z<e.length;z++)t.push(this._fixPointArrays(e[z],d,h));else if(e instanceof f)for(z=0;z<e.length();z++)t.push(this._fixPointArrays(e.get(z),d,h));return t};g._fixPointArrays=
function(e,d,h){var t=[];if(e instanceof Array)for(var z=0;z<e.length;z++){var v=e[z];v instanceof l?d&&h?t.push([v.x,v.y,v.z,v.m]):d?t.push([v.x,v.y,v.z]):h?t.push([v.x,v.y,v.m]):t.push([v.x,v.y]):v instanceof f?t.push(v.toArray()):t.push(v)}else if(e instanceof f)for(z=0;z<e.length();z++)v=e.get(z),v instanceof l?d&&h?t.push([v.x,v.y,v.z,v.m]):d?t.push([v.x,v.y,v.z]):h?t.push([v.x,v.y,v.m]):t.push([v.x,v.y]):v instanceof f?t.push(v.toArray()):t.push(v);return t};g._convertDictionaryToJson=function(e,
d){void 0===d&&(d=!1);var h={},t;for(t in e.attributes){var z=e.attributes[t];z instanceof r&&(z=g._convertDictionaryToJson(z));d?h[t.toLowerCase()]=z:h[t]=z}return h};g.parseAttributesFromDictionary=function(e){var d={},h;for(h in e.attributes){var t=e.attributes[h];if(m.isSimpleType(t))d[h]=t;else throw Error("Illegal Argument");}return d};g.fromJson=function(e){var d=null;null!==e.geometry&&void 0!==e.geometry&&(d=b.fromJson(e.geometry));var h={};if(null!==e.attributes&&void 0!==e.attributes)for(var t in e.attributes){var z=
e.attributes[t];if(null===z)h[t]=z;else if(m.isString(z)||m.isNumber(z)||m.isBoolean(z)||m.isDate(z))h[t]=z;else throw Error("Illegal Argument");}return g.createFromGraphicLikeObject(d,h,null)};g.prototype.fullSchema=function(){return this._layer};g.prototype.gdbVersion=function(){if(null===this._layer)return"";var e=this._layer.gdbVersion;return void 0===e?"":""===e&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":e};g.prototype.castAsJson=function(e){var d={attributes:{},
geometry:!0===(null===e||void 0===e?void 0:e.keepGeometryType)?this.geometry():this.geometry().toJson()},h;for(h in this.attributes){var t=this.attributes[h];void 0!==t&&(d.attributes[h]=m.castAsJson(t,e))}return d};g.prototype.castAsJsonAsync=function(e,d){void 0===e&&(e=null);return a(this,void 0,void 0,function(){return c(this,function(h){return[2,this.castAsJson(d)]})})};return g}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports","./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],
function(D,B,a,c){function k(u){return"string"===typeof u||u instanceof String}function n(u,w){return"0"!==u.min&&w.length<Number(u.min)||"*"!==u.max&&w.length>Number(u.max)?-2:1}function r(u,w,A){if(null!==A.localScope&&void 0!==A.localScope[u.toLowerCase()]){var E=A.localScope[u.toLowerCase()];if("FormulaFunction"===E.type||"any"===E.type)return void 0===E.signature&&(E.signature={min:"0",max:"*"}),n(E.signature,w)}return void 0!==A.globalScope[u.toLowerCase()]&&(E=A.globalScope[u.toLowerCase()],
"FormulaFunction"===E.type||"any"===E.type)?(void 0===E.signature&&(E.signature={min:"0",max:"*"}),n(E.signature,w)):-1}function f(u,w){if(u)for(var A=0;A<u.length;A++)m(u[A],w)}function m(u,w){if(u&&!1!==w(u))switch(u.type){case "ArrayExpression":f(u.elements,w);break;case "AssignmentExpression":case "BinaryExpression":m(u.left,w);m(u.right,w);break;case "BlockStatement":f(u.body,w);break;case "CallExpression":m(u.callee,w);f(u.arguments,w);break;case "ExpressionStatement":m(u.expression,w);break;
case "ForInStatement":m(u.left,w);m(u.right,w);m(u.body,w);break;case "ForStatement":m(u.init,w);m(u.test,w);m(u.update,w);m(u.body,w);break;case "FunctionDeclaration":m(u.id,w);f(u.params,w);m(u.body,w);break;case "IfStatement":m(u.test,w);m(u.consequent,w);m(u.alternate,w);break;case "LogicalExpression":m(u.left,w);m(u.right,w);break;case "MemberExpression":m(u.object,w);m(u.property,w);break;case "ObjectExpression":f(u.properties,w);break;case "Program":f(u.body,w);break;case "Property":m(u.key,
w);m(u.value,w);break;case "ReturnStatement":m(u.argument,w);break;case "UnaryExpression":m(u.argument,w);break;case "UpdateExpression":m(u.argument,w);break;case "VariableDeclaration":f(u.declarations,w);break;case "VariableDeclarator":m(u.id,w);m(u.init,w);break;case "TemplateLiteral":f(u.expressions,w),f(u.quasis,w)}}function q(u,w){void 0===w&&(w=!0);var A=h(u,"SYNTAX","UNREOGNISED");try{switch(u.type){case "VariableDeclarator":return"Identifier"!==u.id.type?h(u,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):
null!==u.init?q(u.init,!1):"";case "VariableDeclaration":for(var E=0;E<u.declarations.length;E++)if(A=q(u.declarations[E],w),""!==A)return A;return"";case "ForInStatement":A=q(u.left,w);if(""!==A)break;if("VariableDeclaration"===u.left.type){if(1<u.left.declarations.length)return h(u,"SYNTAX","ONLY1VAR");if(null!==u.left.declarations[0].init)return h(u,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==u.left.type)return h(u,"SYNTAX","LEFTNOTVAR");A=q(u.right,w);if(""!==A)break;A=q(u.body,w);if(""!==
A)break;return"";case "ForStatement":if(null!==u.test&&(A=q(u.test,w),""!==A))break;if(null!==u.init&&(A=q(u.init,w),""!==A))break;if(null!==u.update&&(A=q(u.update,w),""!==A))break;if(null!==u.body&&(A=q(u.body,w),""!==A))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":A=q(u.test,w);if(""!==A)break;if(null!==u.consequent&&(A=q(u.consequent,!1),""!==A))break;if(null!==u.alternate&&(A=q(u.alternate,!1),""!==A))break;
return"";case "BlockStatement":var G=[];for(E=0;E<u.body.length;E++)"EmptyStatement"!==u.body[E].type&&G.push(u.body[E]);u.body=G;for(E=0;E<u.body.length;E++)if(A=q(u.body[E],w),""!==A)return A;return"";case "FunctionDeclaration":return!1===w?h(u,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==u.id.type?h(u,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):q(u.body,!1);case "ReturnStatement":return null!==u.argument?q(u.argument,w):"";case "UpdateExpression":return"Identifier"!==u.argument.type&&"MemberExpression"!==
u.argument.type?h(u,"SYNTAX","ASSIGNMENTTOVARSONLY"):q(u.argument,w);case "AssignmentExpression":if("Identifier"!==u.left.type&&"MemberExpression"!==u.left.type)return h(u,"SYNTAX","ASSIGNMENTTOVARSONLY");A=q(u.left,w);if(""!==A)break;switch(u.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return h(u,"SYNTAX","OPERATORNOTRECOGNISED")}return q(u.right,!1);case "ExpressionStatement":return q(u.expression,!1);case "Identifier":A="";break;case "MemberExpression":A=
q(u.object,w);if(""!==A)break;return!0===u.computed?q(u.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==u.callee.type)return h(u,"SYNTAX","ONLYNODESSUPPORTED");A="";for(E=0;E<u.arguments.length;E++)if(A=q(u.arguments[E],w),""!==A)return A;return"";case "UnaryExpression":A=q(u.argument,w);break;case "BinaryExpression":A=q(u.left,w);if(""!==A)break;A=q(u.right,w);if(""!==A)break;switch(u.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return h(u,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":A=q(u.left,w);if(""!==A)break;A=q(u.right);if(""!==A)break;switch(u.operator){case "\x26\x26":case "||":break;default:return h(u,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":A="";for(E=0;E<u.elements.length&&(A=q(u.elements[E],w),""===A);E++);break;case "TemplateLiteral":A="";for(E=0;E<u.quasis.length;E++)if(A=q(u.quasis[E],w),""!==A)return A;for(E=0;E<u.expressions.length&&(A=q(u.expressions[E],
w),""===A);E++);break;case "ObjectExpression":A="";for(E=0;E<u.properties.length;E++){A="";if(null!==u.properties[E].key&&("Literal"!==u.properties[E].key.type&&"Identifier"!==u.properties[E].key.type&&(A=h(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===u.properties[E].key.type)){G=u.properties[E].key;var H="value"in G?G.value:null;"string"===typeof H||H instanceof String||(A=h(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===A&&(A=q(u.properties[E],w));if(""!==A)break}break;case "Property":if("Literal"!==
u.key.type&&"Identifier"!==u.key.type)return h(u,"SYNTAX","ONLYLITERAL");if("Identifier"!==u.key.type&&(A=q(u.key,w),""!==A))break;A=q(u.value,w)}return A}catch(K){throw K;}}function l(u,w){var A=h(u,"SYNTAX","UNREOGNISED"),E=null,G="";try{switch(u.type){case "VariableDeclarator":var H=null===u.init?"":l(u.init,w);if(""!==H)return H;"Identifier"===u.id.type&&(null===w.localScope?w.globalScope[u.id.name.toLowerCase()]={type:"any"}:w.localScope[u.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":E=
g(u.id.name.toLowerCase(),u);G=e(u,w);if(""!==G)return G;if(null!==w.localScope)return h(u,"SYNTAX","GLOBALFUNCTIONSONLY");E.isnative=!1;w.globalScope[u.id.name.toLowerCase()]={type:"FormulaFunction",signature:[E]};return"";case "VariableDeclaration":A="";for(var K=0;K<u.declarations.length&&(A=l(u.declarations[K],w),""===A);K++);break;case "IfStatement":A=l(u.test,w);if(""!==A)break;if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)return h(u.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==u.consequent&&(A=l(u.consequent,w),""!==A))break;if(null!==u.alternate&&(A=l(u.alternate,w),""!==A))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(K=0;K<u.body.length;K++)if(A=l(u.body[K],w),""!==A)return A;return"";case "ReturnStatement":return null!==u.argument?l(u.argument,w):"";case "ForInStatement":if("VariableDeclaration"===u.left.type){if(1<u.left.declarations.length)return h(u,"SYNTAX","ONLY1VAR");if(null!==u.left.declarations[0].init)return h(u,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==u.left.type)return h(u,"SYNTAX","LEFTNOTVAR");A=l(u.left,w);if(""!==A)break;A=l(u.right,w);if(""!==A)break;A=l(u.body,w);if(""!==A)break;return"";case "ForStatement":if(null!==u.init&&(A=l(u.init,w),""!==A))break;if(null!==u.test&&(A=l(u.test,w),""!==A))break;if(null!==u.body&&(A=l(u.body,w),""!==A))break;if(null!==u.update&&(A=l(u.update,w),""!==A))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
u.argument.type&&"MemberExpression"!==u.argument.type)return h(u,"SYNTAX","ASSIGNMENTTOVARSONLY");var I=!1;if("MemberExpression"===u.argument.type)return l(u.argument,w);null!==w.localScope&&void 0!==w.localScope[u.argument.name.toLowerCase()]&&(I=!0);void 0!==w.globalScope[u.argument.name.toLowerCase()]&&(I=!0);return!1===I?"Identifier "+u.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==u.left.type&&"MemberExpression"!==u.left.type)return h(u,"SYNTAX","ASSIGNMENTTOVARSONLY");
var J=l(u.right,w);if(""!==J)return J;I=!1;if("MemberExpression"===u.left.type)return J=l(u.left,w),""!==J?J:"";null!==w.localScope&&void 0!==w.localScope[u.left.name.toLowerCase()]&&(I=!0);void 0!==w.globalScope[u.left.name.toLowerCase()]&&(I=!0);return!1===I?"Identifier "+u.left.name+" has not been declared.":"";case "ExpressionStatement":return l(u.expression,w);case "Identifier":var L=u.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[L])return"";A=void 0!==w.globalScope[L]?"":
h(u,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":A=l(u.object,w);if(""!==A)break;return!0===u.computed?l(u.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==u.callee.type)return h(u,"SYNTAX","ONLYNODESSUPPORTED");A="";for(K=0;K<u.arguments.length;K++)if(A=l(u.arguments[K],w),""!==A)return A;var M=r(u.callee.name,u.arguments,w);-1===M&&(A=h(u,"SYNTAX","NOTFOUND"));-2===M&&(A=h(u,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":A=
l(u.argument,w);break;case "BinaryExpression":A=l(u.left,w);if(""!==A)break;A=l(u.right,w);if(""!==A)break;return"";case "LogicalExpression":A=l(u.left,w);if(""!==A)break;if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)return h(u.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");A=l(u.right,w);if(""!==A)break;return"AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type?h(u.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":A=
"";for(K=0;K<u.elements.length&&(A=l(u.elements[K],w),""===A);K++);break;case "TemplateLiteral":A="";for(K=0;K<u.quasis.length;K++)if(A=l(u.quasis[K],w),""!==A)return A;for(K=0;K<u.expressions.length&&(A=l(u.expressions[K],w),""===A);K++);break;case "ObjectExpression":A="";for(K=0;K<u.properties.length;K++){A="";if(null!==u.properties[K].key&&("Literal"!==u.properties[K].key.type&&"Identifier"!==u.properties[K].key.type&&(A=h(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===u.properties[K].key.type)){var N=
u.properties[K].key,O="value"in N?N.value:null;"string"===typeof O||O instanceof String||(A=h(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===A&&(A=l(u.properties[K],w));if(""!==A)break}break;case "Property":if("Literal"!==u.key.type&&"Identifier"!==u.key.type)return h(u,"SYNTAX","ONLYLITERAL");if("Identifier"!==u.key.type&&(A=l(u.key,w),""!==A))break;A=l(u.value,w)}return A}catch(Y){throw Y;}}function b(u,w){var A=!1,E=w.toLowerCase();m(u,function(G){if(A)return!1;"Identifier"===G.type&&G.name&&G.name.toLowerCase()===
E&&(A=!0);return!0});return A}function g(u,w){var A=[];if(void 0!==w.params&&null!==w.params)for(var E=0;E<w.params.length;E++)A.push("any");return{name:u,"return":"any",params:A}}function e(u,w){for(var A={globalScope:w.globalScope,localScope:{}},E=0;E<u.params.length;E++)A.localScope[u.params[E].name.toLowerCase()]={type:"any"};return l(u.body,A)}function d(u,w,A,E){var G={};if(void 0===u||null===u)u={};if(void 0===A||null===A)A={};G.infinity={type:"any"};G.textformatting={type:"any"};G.pi={type:"any"};
for(var H in w)"sync"===E&&void 0!==w[H].min?G[H]={type:"FormulaFunction",signature:{min:w[H].min,max:w[H].max}}:"sync"!==E&&void 0!==w[H].fmin&&(G[H]={type:"FormulaFunction",signature:{min:w[H].fmin,max:w[H].fmax}});for(w=0;w<A.length;w++)H=A[w],G[H.name]={type:"FormulaFunction",signature:H};for(H in u)G[H]=u[H],G[H].type="any";return G}function h(u,w,A){var E="";switch(w){case "SYNTAX":E="Syntax Error: ";break;case "RUNTIME":E="Runtime Error: ";break;default:E="Syntax Error: "}try{switch(u.type){case "IfStatement":switch(A){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":E+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":E+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(A){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":E+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":E+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":E+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(A){case "GLOBALFUNCTIONSONLY":E+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":E+=" Function Definition must have an identifier"}break;case "VariableDeclaration":E+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(A){case "FUNCTIONVARIABLEDECLARATOR":E+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":E+=" Variable Definition must have an identifier"}break;case "Identifier":E+=" Identifier Not Found. ";E+=u.name;break;case "ObjectExpression":switch(A){case "OBJECTPROPERTYMUSTBESTRING":E+=
" Property name must be a string"}break;case "ForStatement":switch(A){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":E+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(A){case "ONLY1VAR":E+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":E+=" Can only declare value for use with IN";break;case "LEFTNOVAR":E+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":E+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":E+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(A){case "PROPERTYNOTFOUND":E+="Cannot find member property. ";E+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "OUTOFBOUNDS":E+="Out of Bounds. ";E+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "NOTFOUND":E+="Cannot call member method on null. ";E+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "INVALIDTYPE":E+="Cannot call member property on object of this type. ",
E+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":""}break;case "Property":switch(A){case "ONLYLITERAL":E+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(A){case "WRONGSIGNATURE":E+="Function signature does not match: ";E+="Identifier"===u.callee.type?u.callee.name:"";break;case "ONLYNODESUPPORTED":E+="Functions must be declared.";E+="Identifier"===u.callee.type?u.callee.name:"";break;case "NOTAFUNCTION":E+="Not a Function: ";
E+="Identifier"===u.callee.type?u.callee.name:"";break;case "NOTFOUND":E+="Function Not Found: "+("Identifier"===u.callee.type?u.callee.name:"")}break;case "UnaryExpression":switch(A){case "NOTSUPPORTEDUNARYOPERATOR":E+="Operator "+u.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":E+="Unary operator "+u.operator+" cannot be used with this argument."}case "BinaryExpression":switch(A){case "OPERATORNOTRECOGNISED":E+="Binary Operator not recognised "+
u.operator}break;case "LogicalExpression":switch(A){case "ONLYBOOLEAN":E+="Operator "+u.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":E+="Logical Expression "+u.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(A){case "FUNCTIONCONTEXTILLEGAL":E+=" Cannot Put Function inside Array."}break;default:E+="Expression contains unrecognised code structures."}}catch(G){throw G;}return E}function t(u,w,A){return{line:u.loc.start.line,
character:u.loc.start.column,reason:h(u,w,A)}}function z(u,w,A,E){w={globalScope:w.globalScope,localScope:{}};for(var G=0;G<u.params.length;G++)w.localScope[u.params[G].name.toLowerCase()]={type:"any"};v(u.body,w,A,E,!1)}function v(u,w,A,E,G){void 0===G&&(G=!0);if(null===u)throw Error("Unnexpexted Expression Syntax");var H=null;try{switch(u.type){case "VariableDeclarator":"Identifier"!==u.id.type?E.push(t(u,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(u.id.name.toLowerCase(),null===w.localScope?w.globalScope[u.id.name.toLowerCase()]=
{type:"any"}:w.localScope[u.id.name.toLowerCase()]={type:"any"});null!==u.init&&v(u.init,w,A,E,G);break;case "FunctionDeclaration":!1===G&&E.push(t(u,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==u.id.type&&E.push(t(u,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));H=g("",u);z(u,w,A,E);null!==w.localScope&&E.push(t(u,"SYNTAX","GLOBALFUNCTIONSONLY"));H.isnative=!1;"Identifier"===u.id.type&&(w.globalScope[u.id.name.toLowerCase()]={type:"FormulaFunction",signature:[H]});break;case "VariableDeclaration":for(var K=
0;K<u.declarations.length;K++)v(u.declarations[K],w,A,E,G);break;case "IfStatement":null!==u.test&&(v(u.test,w,A,E,G),"AssignmentExpression"!==u.test.type&&"UpdateExpression"!==u.test.type||E.push(t(u.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==u.consequent&&v(u.consequent,w,A,E,G);null!==u.alternate&&v(u.alternate,w,A,E,G);break;case "EmptyStatement":break;case "BlockStatement":if(null!==u.body)for(K=0;K<u.body.length;K++)v(u.body[K],w,A,E,G);break;case "ReturnStatement":null!==
u.argument&&v(u.argument,w,A,E,G);break;case "ForInStatement":"VariableDeclaration"===u.left.type?(1<u.left.declarations.length&&E.push(t(u,"SYNTAX","ONLY1VAR")),null!==u.left.declarations[0].init&&E.push(t(u,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==u.left.type&&E.push(t(u,"SYNTAX","LEFTNOTVAR"));v(u.left,w,A,E,G);v(u.right,w,A,E,G);v(u.body,w,A,E,G);break;case "ForStatement":null!==u.init&&v(u.init,w,A,E,G);null!==u.test&&v(u.test,w,A,E,G);null!==u.body&&v(u.body,w,A,E,G);null!==u.update&&v(u.update,
w,A,E,G);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==u.argument.type&&"MemberExpression"!==u.argument.type)E.push(t(u,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===u.argument.type){var I=!1;!1===A&&(null!==w.localScope&&void 0!==w.localScope[u.argument.name.toLowerCase()]&&(I=!0),void 0!==w.globalScope[u.argument.name.toLowerCase()]&&(I=!0),!1===I&&E.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,
reason:"Identifier "+u.argument.name+" has not been declared."}))}"MemberExpression"===u.argument.type&&v(u.argument,w,A,E,G)}break;case "AssignmentExpression":"Identifier"!==u.left.type&&"MemberExpression"!==u.left.type&&E.push(t(u,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(u.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:E.push(t(u,"SYNTAX","OPERATORNOTRECOGNISED"))}v(u.right,w,A,E,G);I=!1;"Identifier"===u.left.type&&(null!==w.localScope&&void 0!==
w.localScope[u.left.name.toLowerCase()]&&(I=!0),void 0!==w.globalScope[u.left.name.toLowerCase()]&&(I=!0),!1===A&&!1===I&&E.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Identifier "+u.left.name+" has not been declared."}));"MemberExpression"===u.left.type&&v(u.left,w,A,E,G);break;case "ExpressionStatement":v(u.expression,w,A,E,G);break;case "Identifier":var J=u.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[J]||void 0!==w.globalScope[J])break;
!1===A&&E.push(t(u,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":v(u.object,w,A,E,G);!0===u.computed&&v(u.property,w,A,E,G);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==u.callee.type&&E.push(t(u,"SYNTAX","ONLYNODESSUPPORTED"));for(K=0;K<u.arguments.length;K++)v(u.arguments[K],w,A,E,G);if("Identifier"===u.callee.type){var L=r(u.callee.name,u.arguments,w);!1===A&&-1===L&&E.push(t(u,"SYNTAX","NOTFOUND"));-2===L&&E.push(t(u,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":v(u.argument,w,A,E,G);break;case "BinaryExpression":v(u.left,w,A,E,G);v(u.right,w,A,E,G);switch(u.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:E.push(t(u,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(u.operator){case "\x26\x26":case "||":break;default:E.push(t(u,
"SYNTAX","OPERATORNOTRECOGNISED"))}v(u.left,w,A,E,G);"AssignmentExpression"!==u.left.type&&"UpdateExpression"!==u.left.type||E.push(t(u,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));v(u.right,w,A,E,G);"AssignmentExpression"!==u.right.type&&"UpdateExpression"!==u.right.type||E.push(t(u,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(K=0;K<u.elements.length;K++)v(u.elements[K],w,A,E,G);break;case "TemplateLiteral":for(K=0;K<u.quasis.length;K++)v(u.quasis[K],w,A,E,
G);for(K=0;K<u.expressions.length;K++)v(u.expressions[K],w,A,E,G);break;case "ObjectExpression":for(K=0;K<u.properties.length;K++)v(u.properties[K],w,A,E,G);break;case "Property":"Literal"!==u.key.type&&"Identifier"!==u.key.type&&E.push(t(u,"SYNTAX","ONLYLITERAL"));"Literal"===u.key.type&&v(u.key,w,A,E,G);v(u.value,w,A,E,G);break;default:E.push(t(u,"SYNTAX","UNRECOGNISED"))}}catch(M){E.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Unnexpected Syntax"})}}function y(u){var w=
[];m(u,function(A){"CallExpression"===A.type&&"Identifier"===A.callee.type&&w.push(A.callee.name.toLowerCase());return!0});return w}Object.defineProperty(B,"__esModule",{value:!0});B.scriptUsesFeatureSet=B.findScriptDependencies=B.findFunctionCalls=B.checkScript=B.extractAllIssues=B.extractAllIssuesInFunction=B.makeError=B.nodeErrorMessage=B.validateLanguage=B.validateScript=B.constructGlobalScope=B.validateFunction=B.extractFunctionDeclaration=B.findExpectedFieldLiterals=B.findFieldLiterals=B.referencesFunction=
B.referencesMember=B.testValidityOfExpression=B.validateLanguageNode=B.walk=B.findFunction=B.checkFunctionSignature=B.addFunctionDeclaration=B.functionDecls=void 0;B.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",
max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},
split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",
max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},
multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",
max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},
haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},
length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},
portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var C in B.functionDecls)B.functionDecls[C].fmin=B.functionDecls[C].min,B.functionDecls[C].fmax=B.functionDecls[C].max;var F="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),
x="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");B.addFunctionDeclaration=function(u,w){var A=B.functionDecls[u.name.toLowerCase()];void 0===A?"sync"===w?B.functionDecls[u.name.toLowerCase()]={min:u.min,max:u.max}:B.functionDecls[u.name.toLowerCase()]=
{fmin:u.min,fmax:u.max}:"sync"===w?(A.min=u.min,A.max=u.max):(A.fmin=u.min,A.fmax=u.max)};B.checkFunctionSignature=n;B.findFunction=r;B.walk=m;B.validateLanguageNode=q;B.testValidityOfExpression=l;B.referencesMember=b;B.referencesFunction=function(u,w){var A=!1,E=w.toLowerCase();m(u,function(G){return A?!1:"CallExpression"===G.type&&"Identifier"===G.callee.type&&G.callee.name&&G.callee.name.toLowerCase()===E?(A=!0,!1):!0});return A};B.findFieldLiterals=function(u){var w=[];m(u,function(A){if("MemberExpression"!==
A.type||"Identifier"!==A.object.type)return!0;!1===A.computed&&A.object&&A.object.name&&A.property&&"Identifier"===A.property.type&&A.property.name?w.push(A.object.name.toLowerCase()+"."+A.property.name.toLowerCase()):A.object&&A.object.name&&A.property&&"Literal"===A.property.type&&"string"===typeof A.property.value&&w.push(A.object.name.toLowerCase()+"."+A.property.value.toString().toLowerCase());return!1});return w};B.findExpectedFieldLiterals=function(u){var w=[];m(u,function(A){if("CallExpression"===
A.type){if("Identifier"===A.callee.type&&"expects"===A.callee.name.toLowerCase()){for(var E="",G=0;G<(A.arguments||[]).length;G++)0===G?"Identifier"===A.arguments[G].type&&(E=A.arguments[G].name.toLowerCase()):E&&"Literal"===A.arguments[G].type&&k(A.arguments[G].value)&&w.push(E+"."+A.arguments[G].value.toLowerCase());return!1}if("Identifier"===A.callee.type&&["domainname","domaincode","domain","haskey"].includes(A.callee.name.toLowerCase())&&2<=A.arguments.length)return E="","Identifier"===A.arguments[0].type&&
(E=A.arguments[0].name.toLowerCase()),E&&"Literal"===A.arguments[1].type&&k(A.arguments[1].value)&&w.push(E+"."+A.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==A.type||"Identifier"!==A.object.type)return!0;!1===A.computed&&A.object&&A.object.name&&A.property&&"Identifier"===A.property.type&&A.property.name?w.push(A.object.name.toLowerCase()+"."+A.property.name.toLowerCase()):A.object&&A.object.name&&A.property&&"Literal"===A.property.type&&"string"===typeof A.property.value&&w.push(A.object.name.toLowerCase()+
"."+A.property.value.toString().toLowerCase());return!1});return w};B.extractFunctionDeclaration=g;B.validateFunction=e;B.constructGlobalScope=d;B.validateScript=function(u,w,A,E){void 0===A&&(A="async");void 0===E&&(E=B.functionDecls);w={globalScope:d(w.vars,E,w.customFunctions,A),localScope:null};return l(u.body[0].body,w)};B.validateLanguage=function(u){return"BlockStatement"!==u.body[0].body.type?"Invalid formula content.":q(u.body[0].body)};B.nodeErrorMessage=h;B.makeError=t;B.extractAllIssuesInFunction=
z;B.extractAllIssues=v;B.checkScript=function(u,w,A,E,G){void 0===E&&(E="async");void 0===G&&(G=B.functionDecls);var H=[];if("BlockStatement"!==u.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===w||void 0===w)w={vars:{},customFunctions:[]};w={globalScope:d(w.vars,G,w.customFunctions,E),localScope:null};try{v(u.body[0].body,w,A,H)}catch(K){}return H};B.findFunctionCalls=y;B.findScriptDependencies=function(u,w){void 0===w&&(w=[]);var A=null;if(void 0===u.usesFeatureSet){null===
A&&(A=y(u));u.usesFeatureSet=!1;for(var E=0;E<A.length;E++)F.includes(A[E])&&(u.usesFeatureSet=!0,u.isAsync=!0);if(!1===u.usesFeatureSet&&w&&0<w.length){E=0;for(var G=w;E<G.length;E++)if(b(u,G[E])){u.usesFeatureSet=!0;u.isAsync=!0;break}}}if(void 0===u.usesGeometry)for(u.usesGeometry=!1,null===A&&(A=y(u)),E=0;E<A.length;E++)x.includes(A[E])&&(u.usesGeometry=!0)};B.scriptUsesFeatureSet=function(u){u=y(u);for(var w=0;w<u.length;w++)if(F.includes(u[w]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(D,B,a,c,k,n,r,f,m,q){Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(l){function b(e,d){if(d instanceof r)return l.arcadeCustomFunctionHandler(d);if(d instanceof m.NativeFunction)return function(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];return d.fn(e,{preparsed:!0,arguments:h})};if(d instanceof m.SizzleFunction)return function(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];if(h.length!==d.paramCount)throw Error("Invalid parameters");
return d.fn.apply(d,h)};throw Error("Invalid Parameter");}function g(e){if(e instanceof f)return e.toArray();if(m.isArray(e))return e;throw Error("Invalid Parameter");}l.functions.array=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,1,2);h=m.toNumber(z[0]);if(isNaN(h)||!1===m.isInteger(h))throw Error("Invalid Parameter");z=m.defaultUndefined(z[1],null);h=Array(h);h.fill(z);return h})};l.functions.front=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,
1,1);if(m.isImmutableArray(z[0])){if(0>=z[0].length())throw Error("Array is empty");return z[0].get(0)}if(m.isArray(z[0])){if(0>=z[0].length)throw Error("Array is empty");return z[0][0]}throw Error("Invalid Parameter");})};l.functions.back=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,1,1);if(m.isImmutableArray(z[0])){if(0>=z[0].length())throw Error("Array is empty");return z[0].get(z[0].length()-1)}if(m.isArray(z[0])){if(0>=z[0].length)throw Error("Array is empty");return z[0][z[0].length-
1]}throw Error("Invalid Parameter");})};l.functions.push=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,1,2);if(m.isArray(z[0]))return z[0][z[0].length]=z[1],z[0].length;throw Error("Invalid Parameter");})};l.functions.pop=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,1,1);if(m.isArray(z[0])){if(0>=z[0].length)throw Error("Array is empty");h=z[0][z[0].length-1];--z[0].length;return h}throw Error("Invalid Parameter");})};l.functions.erase=function(e,
d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);if(m.isArray(z[0])){h=m.toNumber(z[1]);if(isNaN(h)||!1===m.isInteger(h))throw Error("Invalid Parameter");z=z[0];if(0>=z.length)throw Error("Array is empty");0>h&&(h=z.length+h);if(0>h)throw Error("Element not found");if(h>=z.length)throw Error("Index is greater than array");z.splice(h,1);return m.voidOperation}throw Error("Invalid Parameter");})};l.functions.insert=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,
3,3);if(m.isArray(z[0])){h=m.toNumber(z[1]);if(isNaN(h)||!1===m.isInteger(h))throw Error("Invalid Parameter");t=z[2];z=z[0];if(h>z.length)throw Error("Index is greater than array");if(0>h&&h<-1*z.length)throw Error("Index is greater than array");if(h===z.length)return z[h]=t,m.voidOperation;z.splice(h,0,t);return m.voidOperation}throw Error("Invalid Parameter");})};l.functions.resize=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,3);if(m.isArray(z[0])){t=m.toNumber(z[1]);
if(isNaN(t)||!1===m.isInteger(t))throw Error("Invalid Parameter");if(0>t)throw Error("Size cannot be negative");h=m.defaultUndefined(z[2],null);z=z[0];if(z.length>=t)return z.length=t,m.voidOperation;var v=z.length;z.length=t;for(t=v;t<z.length;t++)z[t]=h;return m.voidOperation}throw Error("Invalid Parameter");})};l.functions.includes=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);if(m.isArray(z[0])){var v=z[1];h=z[0];return-1<h.findIndex(function(C){return m.equalityTest(C,
v)})?!0:!1}if(m.isImmutableArray(z[0])){var y=z[1];h=z[0].toArray();return-1<h.findIndex(function(C){return m.equalityTest(C,y)})?!0:!1}throw Error("Invalid Parameter");})};l.functions.slice=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,1,3);if(m.isArray(z[0])){h=m.toNumber(m.defaultUndefined(z[1],0));t=m.toNumber(m.defaultUndefined(z[2],z[0].length));if(isNaN(h)||!1===m.isInteger(h))throw Error("Invalid Parameter");if(isNaN(t)||!1===m.isInteger(t))throw Error("Invalid Parameter");
var v=z[0];return v.slice(h,t)}if(m.isImmutableArray(z[0])){v=z[0];h=m.toNumber(m.defaultUndefined(z[1],0));t=m.toNumber(m.defaultUndefined(z[2],v.length()));if(isNaN(h)||!1===m.isInteger(h))throw Error("Invalid Parameter");if(isNaN(t)||!1===m.isInteger(t))throw Error("Invalid Parameter");return v.toArray().slice(h,t)}throw Error("Invalid Parameter");})};l.functions.splice=function(e,d){return l.standardFunction(e,d,function(h,t,z){h=[];for(t=0;t<z.length;t++)m.isArray(z[t])?h.push.apply(h,z[t]):
m.isImmutableArray(z[t])?h.push.apply(h,z[t].toArray()):h.push(z[t]);return h})};"sync"===l.mode&&(l.functions.any=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);h=b(e,z[1]);t=0;for(z=g(z[0]);t<z.length;t++){var v=h(z[t]);if(m.isBoolean(v)&&!0===v)return!0}return!1})},l.functions.all=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);h=b(e,z[1]);t=0;for(z=g(z[0]);t<z.length;t++)if(!0!==h(z[t]))return!1;return!0})},l.functions.none=function(e,
d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);h=b(e,z[1]);t=0;for(z=g(z[0]);t<z.length;t++)if(!0===h(z[t]))return!1;return!0})},l.functions.reduce=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,3);var v=b(e,z[1]);h=g(z[0]);return 2===z.length?0===h.length?null:h.reduce(function(y,C){var F=v(y,C);return y=void 0!==F&&F!==m.voidOperation?F:null}):h.reduce(function(y,C){var F=v(y,C);return y=void 0!==F&&F!==m.voidOperation?F:null},z[2])})},l.functions.map=
function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);h=b(e,z[1]);t=[];var v=0;for(z=g(z[0]);v<z.length;v++){var y=h(z[v]);void 0!==y&&y!==m.voidOperation?t.push(y):t.push(null)}return t})},l.functions.filter=function(e,d){return l.standardFunction(e,d,function(h,t,z){m.pcCheck(z,2,2);h=b(e,z[1]);t=[];var v=0;for(z=g(z[0]);v<z.length;v++){var y=z[v];!0===h(y)&&t.push(y)}return t})});"async"===l.mode&&(l.functions.any=function(e,d){return l.standardFunctionAsync(e,d,function(h,
t,z){return a(this,void 0,void 0,function(){var v,y,C,F,x,u,w;return c(this,function(A){switch(A.label){case 0:m.pcCheck(z,2,2),v=b(e,z[1]),y=g(z[0]),C=0,F=y,A.label=1;case 1:if(!(C<F.length))return[3,7];x=F[C];return[4,v(x)];case 2:return u=A.sent(),w=null,q.isPromiseLike(w)?[4,u]:[3,4];case 3:return w=A.sent(),[3,5];case 4:w=u,A.label=5;case 5:if(m.isBoolean(w)&&!0===w)return[2,!0];A.label=6;case 6:return C++,[3,1];case 7:return[2,!1]}})})})},l.functions.all=function(e,d){return l.standardFunctionAsync(e,
d,function(h,t,z){return a(this,void 0,void 0,function(){var v,y,C,F,x,u,w;return c(this,function(A){switch(A.label){case 0:m.pcCheck(z,2,2),v=b(e,z[1]),y=g(z[0]),C=0,F=y,A.label=1;case 1:if(!(C<F.length))return[3,7];x=F[C];return[4,v(x)];case 2:return u=A.sent(),w=null,q.isPromiseLike(w)?[4,u]:[3,4];case 3:return w=A.sent(),[3,5];case 4:w=u,A.label=5;case 5:if(!0!==w)return[2,!1];A.label=6;case 6:return C++,[3,1];case 7:return[2,!0]}})})})},l.functions.none=function(e,d){return l.standardFunctionAsync(e,
d,function(h,t,z){return a(this,void 0,void 0,function(){var v,y,C,F,x,u,w;return c(this,function(A){switch(A.label){case 0:m.pcCheck(z,2,2),v=b(e,z[1]),y=g(z[0]),C=0,F=y,A.label=1;case 1:if(!(C<F.length))return[3,7];x=F[C];return[4,v(x)];case 2:return u=A.sent(),w=null,q.isPromiseLike(w)?[4,u]:[3,4];case 3:return w=A.sent(),[3,5];case 4:w=u,A.label=5;case 5:if(!0===w)return[2,!1];A.label=6;case 6:return C++,[3,1];case 7:return[2,!0]}})})})},l.functions.filter=function(e,d){return l.standardFunctionAsync(e,
d,function(h,t,z){return a(this,void 0,void 0,function(){var v,y,C,F,x,u,w,A;return c(this,function(E){switch(E.label){case 0:m.pcCheck(z,2,2),v=b(e,z[1]),y=g(z[0]),C=[],F=0,x=y,E.label=1;case 1:if(!(F<x.length))return[3,7];u=x[F];return[4,v(u)];case 2:return w=E.sent(),A=null,q.isPromiseLike(A)?[4,w]:[3,4];case 3:return A=E.sent(),[3,5];case 4:A=w,E.label=5;case 5:!0===A&&C.push(u),E.label=6;case 6:return F++,[3,1];case 7:return[2,C]}})})})},l.functions.reduce=function(e,d){return l.standardFunctionAsync(e,
d,function(h,t,z){var v=this;m.pcCheck(z,2,3);var y=b(e,z[1]);h=g(z[0]);t=null;if(2<z.length)z=m.defaultUndefined(z[2],null),t=h.reduce(function(C,F){return a(v,void 0,void 0,function(){var x;return c(this,function(u){switch(u.label){case 0:return[4,C];case 1:x=u.sent();if(void 0===x||x===m.voidOperation)x=null;return[2,y(x,F)]}})})},Promise.resolve(z));else{if(0===h.length)return null;t=h.reduce(function(C,F,x){return a(v,void 0,void 0,function(){var u;return c(this,function(w){switch(w.label){case 0:return 1>=
x?[2,y(C,F)]:[4,C];case 1:u=w.sent();if(void 0===u||u===m.voidOperation)u=null;return[2,y(u,F)]}})})})}return t.then(function(C){return void 0!==C&&C!==m.voidOperation?C:null})})},l.functions.map=function(e,d){return l.standardFunctionAsync(e,d,function(h,t,z){return a(this,void 0,void 0,function(){var v,y,C,F,x,u,w,A;return c(this,function(E){switch(E.label){case 0:m.pcCheck(z,2,2),v=b(e,z[1]),y=g(z[0]),C=[],F=0,x=y,E.label=1;case 1:if(!(F<x.length))return[3,7];u=x[F];return[4,v(u)];case 2:return w=
E.sent(),A=null,q.isPromiseLike(A)?[4,w]:[3,4];case 3:return A=E.sent(),[3,5];case 4:A=w,E.label=5;case 5:void 0!==A&&A!==m.voidOperation?C.push(A):C.push(null),E.label=6;case 6:return F++,[3,1];case 7:return[2,C]}})})})})}})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(D,B,a,c){function k(m,q){var l=new a(q);m(function(b){return f(b).then(l.resolve)},l.reject);return l.promise}function n(m){if(m){if("function"!==typeof m.forEach){var q=
Object.keys(m),l=q.map(function(g){return m[g]});return n(l).then(function(g){var e={};q.forEach(function(d,h){return e[d]=g[h]});return e})}var b=null;return k(function(g,e){var d=[],h=m.length;0===h&&g(d);m.forEach(function(t){var z={promise:t};d.push(z);t.then(function(v){z.value=v})["catch"](function(v){z.error=v}).then(function(){--h;0===h&&(b?e(Error("AbortError")):g(d))})})},function(g){b=g||"Invocation cancellation";m.forEach(function(e){return e.cancel(g)})})}}function r(m){void 0===m&&(m=
void 0);var q=new a;q.resolve(m);return q.promise}function f(m){return m&&"function"===typeof m.then?m:r(m)}Object.defineProperty(B,"__esModule",{value:!0});B.createResolver=B.when=B.isPromiseLike=B.wrapCallback=B.timeout=B.after=B.resolve=B.reject=B.first=B.eachAlwaysValues=B.eachAlways=B.createDeferred=B.create=B.filter=B.all=void 0;B.all=function(m){return c(m)};B.filter=function(m,q){var l=m.slice();return c(m.map(function(b,g){return q(b,g)})).then(function(b){return l.filter(function(g,e){return b[e]})})};
B.create=k;B.createDeferred=function(m){var q=null;m=k(function(l,b){q={resolve:l,reject:b}},m);q.promise=m;q.cancel=function(){q.reject(Error("AbortError"))};return q};B.eachAlways=n;B.eachAlwaysValues=function(m){return n(m).then(function(q){return q.filter(function(l){return!!l.value}).map(function(l){return l.value})})};B.first=function(m){return m&&m.length?k(function(q,l){for(var b=0;b<m.length;b++)m[b].then(q,l)}):r()};B.reject=function(m){var q=new a;q.reject(m);return q.promise};B.resolve=
r;B.after=function(m,q){void 0===q&&(q=void 0);var l=0;return k(function(b){l=setTimeout(function(){b(q)},m)},function(){l&&(clearTimeout(l),l=0)})};B.timeout=function(m,q,l){var b=0,g=new a(m.cancel);m.then(function(e){g.isFulfilled()||(g.resolve(e),b&&(clearTimeout(b),b=0))});m["catch"](function(e){g.isFulfilled()||(g.reject(e),b&&(clearTimeout(b),b=0))});b=setTimeout(function(){g.reject(l||Error("promiseUtils:timeout"))},q);return g.promise};B.wrapCallback=function(m){var q=!1;return k(function(){m(function(l){q||
r(l)})},function(){return q=!0})};B.isPromiseLike=function(m){return m&&"function"===typeof m.then};B.when=f;B.createResolver=function(m){var q,l;m=k(function(g,e){q=g;l=e},m);var b=function(g){q(g)};b.resolve=function(g){return q(g)};b.reject=function(g){return l(g)};b.promise=m;return b}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(D,B,a,c,k){function n(l){l=new Date(l.getTime());var b=l.getFullYear(),
g=new Date(0);g.setFullYear(b+1,0,4);g.setHours(0,0,0,0);g=r(g);var e=new Date(0);e.setFullYear(b,0,4);e.setHours(0,0,0,0);e=r(e);return l.getTime()>=g.getTime()?b+1:l.getTime()>=e.getTime()?b:b-1}function r(l){l=new Date(l.getTime());var b=l.getDay();b=(1>b?7:0)+b-1;l.setDate(l.getDate()-b);l.setHours(0,0,0,0);return l}function f(l){return null===l?l:isNaN(l.getTime())?null:l}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;var m=[0,31,59,90,120,151,181,212,243,273,304,
334],q=[0,31,60,91,121,152,182,213,244,274,305,335];B.registerFunctions=function(l,b){l.today=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,0,0);d=new Date;d.setHours(0,0,0,0);return d})};l.now=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,0,0);return new Date})};l.timestamp=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,0,0);d=new Date;return d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())})};
l.toutc=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?null:new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())})};l.tolocal=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?null:c.DateTime.utc(d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()).toJSDate()})};l.day=function(g,
e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getDate()})};l.month=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMonth()})};l.year=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getFullYear()})};l.hour=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getHours()})};l.second=function(g,e){return b(g,e,
function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getSeconds()})};l.millisecond=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMilliseconds()})};l.minute=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMinutes()})};l.week=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,2);d=a.toDate(t[0]);if(null===d)return NaN;t=a.toNumber(a.defaultUndefined(t[1],0));if(0>t||
6<t)throw Error("Invalid Parameter");h=d.getDate();var z=d.getMonth(),v=d.getFullYear();d=d.getDay();h=h+(0!==v%4||0===v%100&&0!==v%400?m:q)[z]-1;z=Math.floor(h/7);return d-t+(0>d-t?7:0)<h-7*z?z+1:z})};l.weekday=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getDay()})};l.isoweekday=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);if(null===d)return NaN;d=d.getDay();0===d&&(d=7);return d})};l.isomonth=function(g,e){return b(g,
e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMonth()+1})};l.isoweek=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);h=a.toDate(t[0]);if(null===h)return NaN;d=r(h).getTime();h=n(h);t=new Date(0);t.setFullYear(h,0,4);t.setHours(0,0,0,0);h=r(t);d-=h.getTime();return Math.round(d/6048E5)+1})};l.isoyear=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:n(d)})};l.date=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,
0,7);if(3===t.length)return f(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),0,0,0,0));if(4===t.length)return f(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),0,0,0));if(5===t.length)return f(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),0,0));if(6===t.length)return f(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),0));if(7===t.length)return f(new Date(a.toNumber(t[0]),
a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),a.toNumber(t[6])));if(2===t.length){d=a.toString(t[1]);if(""===d)return null;d=a.standardiseDateFormat(d);h=void 0;h="X"===d?c.DateTime.fromSeconds(a.toNumber(t[0])):"x"===d?c.DateTime.fromMillis(a.toNumber(t[0])):c.DateTime.fromFormat(a.toString(t[0]),d,{locale:k.locale,numberingSystem:"latn"});return h.isValid?h.toJSDate():null}if(1===t.length){if(a.isString(t[0])){if(""===t[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(t[0]))return a.toDate(t[0]+"-01-01")}d=a.toNumber(t[0]);return!1===isNaN(d)?f(new Date(d)):a.toDate(t[0])}if(0===t.length)return new Date})};l.datediff=function(g,e){return b(g,e,function(d,h,t){a.pcCheck(t,2,3);d=a.toDateTime(t[0]);h=a.toDateTime(t[1]);if(null===d||null===h)return NaN;switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":return d.diff(h,"days").days;case "months":case "month":return d.diff(h,"months").months;
case "minutes":case "minute":case "m":return"M"===t[2]?d.diff(h,"months").months:d.diff(h,"minutes").minutes;case "seconds":case "second":case "s":return d.diff(h,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return d.diff(h).milliseconds;case "hours":case "hour":case "h":return d.diff(h,"hours").hours;case "years":case "year":case "y":return d.diff(h,"years").years;default:return d.diff(h).milliseconds}})};l.dateadd=function(g,e){return b(g,e,function(d,h,t){var z;a.pcCheck(t,
2,3);d=a.toDateTime(t[0]);if(null===d)return null;h=a.toNumber(t[1]);if(isNaN(h))return d.toJSDate();var v="milliseconds";switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":v="days";h=a.absRound(h);break;case "months":case "month":v="months";h=a.absRound(h);break;case "minutes":case "minute":case "m":v="M"===t[2]?"months":"minutes";break;case "seconds":case "second":case "s":v="seconds";break;case "milliseconds":case "millisecond":case "ms":v="milliseconds";break;case "hours":case "hour":case "h":v=
"hours";break;case "years":case "year":case "y":v="years"}return d.plus((z={},z[v]=h,z)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(D,
B,a,c,k,n,r,f,m,q,l,b,g,e,d,h){function t(z){return z&&"esri.arcade.Feature"===z.arcadeDeclaredClass}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(z,v){z.ringisclockwise=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,1,1);F=[];if(null===u[0])return!1;if(f.isArray(u[0])){var w=0;for(u=u[0];w<u.length;w++)if(x=u[w],x instanceof b)F.push([x.x,x.y]);else throw Error("Invalid Argument");}else if(u[0]instanceof r)F=u[0]._elements;else if(f.isImmutableArray(u[0])){w=
0;for(var A=u[0].toArray();w<A.length;w++)if(x=A[w],x instanceof b)F.push([x.x,x.y]);else throw Error("Invalid Argument");0<F.length&&(u[0].get(0),u[0].get(0))}else throw Error("Invalid Argument");return 3>F.length?!1:(new g({rings:[],spatialReference:{wkid:4326}})).isClockwise(F)})};z.polygon=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,1,1);F=null;if(u[0]instanceof k){if(F=f.fixSpatialReference(n.parseGeometryFromDictionary(u[0]),y.spatialReference),!1===F instanceof g)throw Error("Illegal Parameter");
}else F=u[0]instanceof g?h.fromJson(u[0].toJson()):f.fixSpatialReference(new g(JSON.parse(u[0])),y.spatialReference);if(null!==F&&!1===F.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(F)})};z.polyline=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,1,1);F=null;if(u[0]instanceof k){if(F=f.fixSpatialReference(n.parseGeometryFromDictionary(u[0]),y.spatialReference),
!1===F instanceof e)throw Error("Illegal Parameter");}else F=u[0]instanceof e?h.fromJson(u[0].toJson()):f.fixSpatialReference(new e(JSON.parse(u[0])),y.spatialReference);if(null!==F&&!1===F.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(F)})};z.point=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,1,1);F=null;if(u[0]instanceof k){if(F=f.fixSpatialReference(n.parseGeometryFromDictionary(u[0]),
y.spatialReference),!1===F instanceof b)throw Error("Illegal Parameter");}else F=u[0]instanceof b?h.fromJson(u[0].toJson()):f.fixSpatialReference(new b(JSON.parse(u[0])),y.spatialReference);if(null!==F&&!1===F.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(F)})};z.multipoint=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,1,1);F=null;if(u[0]instanceof k){if(F=
f.fixSpatialReference(n.parseGeometryFromDictionary(u[0]),y.spatialReference),!1===F instanceof l)throw Error("Illegal Parameter");}else F=u[0]instanceof l?h.fromJson(u[0].toJson()):f.fixSpatialReference(new l(JSON.parse(u[0])),y.spatialReference);if(null!==F&&!1===F.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(F)})};z.extent=function(y,C){return v(y,C,function(F,
x,u){u=f.autoCastFeatureToGeometry(u);f.pcCheck(u,1,1);F=null;u[0]instanceof k?F=f.fixSpatialReference(n.parseGeometryFromDictionary(u[0]),y.spatialReference):u[0]instanceof b?(F={xmin:u[0].x,ymin:u[0].y,xmax:u[0].x,ymax:u[0].y,spatialReference:u[0].spatialReference.toJson()},u=u[0],u.hasZ?(F.zmin=u.z,F.zmax=u.z):u.hasM&&(F.mmin=u.m,F.mmax=u.m),F=h.fromJson(F)):F=u[0]instanceof g?h.fromJson(u[0].getExtent().toJson()):u[0]instanceof e?h.fromJson(u[0].getExtent().toJson()):u[0]instanceof l?h.fromJson(u[0].getExtent().toJson()):
u[0]instanceof m?h.fromJson(u[0].toJson()):f.fixSpatialReference(new m(JSON.parse(u[0])),y.spatialReference);if(null!==F&&!1===F.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(F)})};z.geometry=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,1,1);F=null;if(null===u[0])return null;F=t(u[0])?f.fixSpatialReference(u[0].geometry(),y.spatialReference):u[0]instanceof
k?f.fixSpatialReference(n.parseGeometryFromDictionary(u[0]),y.spatialReference):f.fixSpatialReference(h.fromJson(JSON.parse(u[0])),y.spatialReference);if(null!==F&&!1===F.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(F)})};z.setgeometry=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,2,2);if(t(u[0])){if(!0===u[0].immutable)throw Error("Feature is Immutable");
if(u[1]instanceof q||null===u[1])u[0]._geometry=u[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return f.voidOperation})};z.feature=function(y,C){return v(y,C,function(F,x,u){if(0===u.length)throw Error("Missing Parameters");F=null;if(1===u.length)if(f.isString(u[0]))F=n.fromJson(JSON.parse(u[0]));else if(t(u[0]))F=n.createFromArcadeFeature(u[0]);else if(u[0]instanceof q)F=n.createFromGraphicLikeObject(u[0],null,null);else if(u[0]instanceof k)F=u[0].hasField("geometry")?
u[0].field("geometry"):null,x=u[0].hasField("attributes")?u[0].field("attributes"):null,null!==F&&F instanceof k&&(F=n.parseGeometryFromDictionary(F)),null!==x&&(x=n.parseAttributesFromDictionary(x)),F=n.createFromGraphicLikeObject(F,x,null);else throw Error("Illegal Argument");else{if(2===u.length){x=F=null;if(null!==u[0])if(u[0]instanceof q)F=u[0];else if(F instanceof k)F=n.parseGeometryFromDictionary(u[0]);else throw Error("Illegal Argument");if(null!==u[1])if(u[1]instanceof k)x=n.parseAttributesFromDictionary(u[1]);
else throw Error("Illegal Argument");}else{F=null;x={};if(null!==u[0])if(u[0]instanceof q)F=u[0];else if(F instanceof k)F=n.parseGeometryFromDictionary(u[0]);else throw Error("Illegal Argument");for(var w=1;w<u.length;w+=2){var A=f.toString(u[w]),E=u[w+1];if(null===E||void 0===E||f.isString(E)||isNaN(E)||f.isDate(E)||f.isNumber(E)||f.isBoolean(E)){if(f.isFunctionParameter(E)||!1===f.isSimpleType(E))throw Error("Illegal Argument");x[A]=E===f.voidOperation?null:E}else throw Error("Illegal Argument");
}}F=n.createFromGraphicLikeObject(F,x,null)}F._geometry=f.fixSpatialReference(F.geometry(),y.spatialReference);F.immutable=!1;return F})};z.dictionary=function(y,C){return v(y,C,function(F,x,u){if(0===u.length)return u=new k,u.immutable=!1,u;if(1===u.length&&f.isString(u[0]))try{var w=JSON.parse(u[0]),A=k.convertObjectToArcadeDictionary(w,!1);A.immutable=!1;return A}catch(E){throw Error("Missing Parameters or Illegal Json");}if(0!==u.length%2)throw Error("Missing Parameters");F={};for(x=0;x<u.length;x+=
2)if(w=f.toString(u[x]),A=u[x+1],null===A||void 0===A||f.isString(A)||isNaN(A)||f.isDate(A)||f.isNumber(A)||f.isBoolean(A)||f.isArray(A)||f.isImmutableArray(A)){if(f.isFunctionParameter(A))throw Error("Illegal Argument");F[w]=A===f.voidOperation?null:A}else throw Error("Illegal Argument");u=new k(F);u.immutable=!1;return u})};z.haskey=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,2,2);F=f.toString(u[1]);if(t(u[0])||u[0]instanceof k)return u[0].hasField(F);throw Error("Illegal Argument");
})};z.indexof=function(y,C){return v(y,C,function(F,x,u){f.pcCheck(u,2,2);F=u[1];if(f.isArray(u[0])){for(x=0;x<u[0].length;x++)if(f.equalityTest(F,u[0][x]))return x;return-1}if(f.isImmutableArray(u[0])){var w=u[0].length();for(x=0;x<w;x++)if(f.equalityTest(F,u[0].get(x)))return x;return-1}throw Error("Illegal Argument");})};z.angle=function(y,C){return v(y,C,function(F,x,u){u=f.autoCastFeatureToGeometry(u);f.pcCheck(u,2,3);if(!(u[0]instanceof b))throw Error("Illegal Argument");if(!(u[1]instanceof
b))throw Error("Illegal Argument");if(2<u.length&&!(u[2]instanceof b))throw Error("Illegal Argument");return 2===u.length?d.angle2D(u[0],u[1]):d.angleBetween2D(u[0],u[1],u[2])})};z.bearing=function(y,C){return v(y,C,function(F,x,u){u=f.autoCastFeatureToGeometry(u);f.pcCheck(u,2,3);if(!(u[0]instanceof b))throw Error("Illegal Argument");if(!(u[1]instanceof b))throw Error("Illegal Argument");if(2<u.length&&!(u[2]instanceof b))throw Error("Illegal Argument");return 2===u.length?d.bearing2D(u[0],u[1]):
d.bearingBetween2D(u[0],u[1],u[2])})};z.isselfintersecting=function(y,C){return v(y,C,function(F,x,u){u=f.autoCastFeatureToGeometry(u);f.pcCheck(u,1,1);F=u[0];if(F instanceof g)return F.isSelfIntersecting(F);if(F instanceof e)return F=F.paths,d.pathsSelfIntersecting(F);if(F instanceof l)for(x=F.points,u=0;u<x.length;u++)for(var w=0;w<x.length;w++)if(w!==u){for(var A=!0,E=0;E<x[u].length;E++)if(x[u][E]!==x[w][E]){A=!1;break}if(!0===A)return!0}return f.isArray(F)||f.isImmutableArray(F)?(F=f.autoCastArrayOfPointsToPolyline(F,
y.spatialReference),null!==F&&(F=F.paths),d.pathsSelfIntersecting(F)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(D,B,a){function c(l,b,g){var e={x:0,y:0};b&&(e.z=0);g&&(e.m=0);for(var d=0,h=l[0],t=0;t<l.length;t++){var z=l[t];a:if(z.length!==h.length)var v=!1;else{for(v=0;v<z.length;v++)if(z[v]!==h[v]){v=!1;break a}v=!0}if(!1===v){v=k(h,z,b);var y=z,C=b,F=g,x={x:(h[0]+y[0])/2,y:(h[1]+y[1])/2};C&&(x.z=(h[2]+y[2])/2);C&&F?x.m=(h[3]+
y[3])/2:F&&(x.m=(h[2]+y[2])/2);h=x;h.x*=v;h.y*=v;e.x+=h.x;e.y+=h.y;b&&(h.z*=v,e.z+=h.z);g&&(h.m*=v,e.m+=h.m);d+=v;h=z}}0<d?(e.x/=d,e.y/=d,b&&(e.z/=d),g&&(e.m/=d)):(e.x=l[0][0],e.y=l[0][1],b&&(e.z=l[0][2]),g&&b?e.m=l[0][3]:g&&(e.m=l[0][2]));return e}function k(l,b,g){var e=b[0]-l[0];l=b[1]-l[1];return g?(b=b[2]-b[2],Math.sqrt(e*e+l*l+b*b)):Math.sqrt(e*e+l*l)}function n(l,b,g){for(void 0===g&&(g=0);l<g;)l+=b;for(g+=b;l>=g;)l-=b;return l}function r(l,b){return Math.atan2(b.y-l.y,b.x-l.x)}function f(l,
b,g){var e=l.x-b.x;l=l.y-b.y;var d=g.x-b.x;b=g.y-b.y;return Math.atan2(e*b-d*l,e*d+l*b)}function m(l,b,g,e,d){var h=l[0];l=l[1];var t=b[0];b=b[1];var z=g[0],v=g[1];g=e[0]-z;z=h-z;var y=t-h;e=e[1]-v;v=l-v;var C=b-l,F=e*y-g*C;if(0===F)return!1;g=(g*v-e*z)/F;z=(y*v-C*z)/F;return 0<=g&&1>=g&&0<=z&&1>=z?(d&&(d[0]=h+g*(t-h),d[1]=l+g*(b-l)),!0):!1}Object.defineProperty(B,"__esModule",{value:!0});B.pathsSelfIntersecting=B.bearingBetween2D=B.angleBetween2D=B.angleBetweenRad=B.bearing2D=B.angle2D=B.angleRad=
B.centroidMultiPoint=B.centroidPolyline=void 0;B.centroidPolyline=function(l){for(var b={x:0,y:0,spatialReference:l.spatialReference.toJson()},g={x:0,y:0,spatialReference:l.spatialReference.toJson()},e=0,d=0,h=0;h<l.paths.length;h++)if(0!==l.paths[h].length){var t=l.paths[h];var z=!0===l.hasZ;if(1>=t.length)t=0;else{for(var v=0,y=1;y<t.length;y++)v+=k(t[y-1],t[y],z);t=v}0===t?(z=c(l.paths[h],!0===l.hasZ,!0===l.hasM),b.x+=z.x,b.y+=z.y,!0===l.hasZ&&(b.z+=z.z),!0===l.hasM&&(b.m+=z.m),++e):(z=c(l.paths[h],
!0===l.hasZ,!0===l.hasM),g.x+=z.x*t,g.y+=z.y*t,!0===l.hasZ&&(g.z+=z.z*t),!0===l.hasM&&(g.m+=z.m*t),d+=t)}return 0<d?(g.x/=d,g.y/=d,!0===l.hasZ&&(g.z/=d),!0===l.hasM&&(g.m/=d),new a(g)):0<e?(b.x/=e,b.y/=e,!0===l.hasZ&&(g.z/=e),!0===l.hasM&&(b.m/=e),new a(b)):null};B.centroidMultiPoint=function(l){if(0===l.points.length)return null;for(var b=0,g=0,e=0,d=0,h=0;h<l.points.length;h++){var t=l.getPoint(h);!0===t.hasZ&&(e+=t.z);!0===t.hasM&&(d+=t.m);b+=t.x;g+=t.y;d+=t.m}b={x:b/l.points.length,y:g/l.points.length,
spatialReference:null};b.spatialReference=l.spatialReference.toJson();!0===l.hasZ&&(b.z=e/l.points.length);!0===l.hasM&&(b.m=d/l.points.length);return new a(b)};B.angleRad=r;B.angle2D=function(l,b){return n(r(l,b),2*Math.PI)*(180/Math.PI)};B.bearing2D=function(l,b){return n(Math.PI/2-r(l,b),2*Math.PI)*(180/Math.PI)};B.angleBetweenRad=f;B.angleBetween2D=function(l,b,g){return n(f(l,b,g),2*Math.PI)*(180/Math.PI)};B.bearingBetween2D=function(l,b,g){return n(-1*f(l,b,g),2*Math.PI)*(180/Math.PI)};var q=
[0,0];B.pathsSelfIntersecting=function(l){for(var b=0;b<l.length;b++){for(var g=l[b],e=0;e<g.length-1;e++)for(var d=g[e],h=g[e+1],t=b+1;t<l.length;t++)for(var z=0;z<l[t].length-1;z++){var v=l[t][z],y=l[t][z+1],C=m(d,h,v,y,q);if(C&&!(q[0]===d[0]&&q[1]===d[1]||q[0]===v[0]&&q[1]===v[1]||q[0]===h[0]&&q[1]===h[1]||q[0]===y[0]&&q[1]===y[1]))return!0}z=g.length;if(!(3>z))for(e=0;e<=z-2;e++)for(d=g[e],h=g[e+1],t=e+2;t<=z-2;t++)if(v=g[t],y=g[t+1],(C=m(d,h,v,y,q))&&!(q[0]===d[0]&&q[1]===d[1]||q[0]===v[0]&&
q[1]===v[1]||q[0]===h[0]&&q[1]===h[1]||q[0]===y[0]&&q[1]===y[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){function e(h){return 0===a.version.indexOf("4.")?l.fromExtent(h):new l({spatialReference:h.spatialReference,
rings:[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]]]})}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=B.setGeometryEngine=void 0;var d=null;B.setGeometryEngine=function(h){d=h};B.registerFunctions=function(h,t){function z(v){k.pcCheck(v,2,2);if(!(v[0]instanceof f&&v[1]instanceof f||v[0]instanceof f&&null===v[1]||v[1]instanceof f&&null===v[0]||null===v[0]&&null===v[1]))throw Error("Illegal Argument");}h.disjoint=function(v,y){return t(v,y,
function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?!0:d.disjoint(x[0],x[1])})};h.intersects=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?!1:d.intersects(x[0],x[1])})};h.touches=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?!1:d.touches(x[0],x[1])})};h.crosses=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);
z(x);return null===x[0]||null===x[1]?!1:d.crosses(x[0],x[1])})};h.within=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?!1:d.within(x[0],x[1])})};h.contains=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?!1:d.contains(x[0],x[1])})};h.overlaps=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?!1:d.overlaps(x[0],
x[1])})};h.equals=function(v,y){return t(v,y,function(C,F,x){k.pcCheck(x,2,2);return x[0]===x[1]?!0:x[0]instanceof f&&x[1]instanceof f?d.equals(x[0],x[1]):k.isDate(x[0])&&k.isDate(x[1])?x[0].getTime()===x[1].getTime():!1})};h.relate=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,3,3);if(x[0]instanceof f&&x[1]instanceof f)return d.relate(x[0],x[1],k.toString(x[2]));if(x[0]instanceof f&&null===x[1]||x[1]instanceof f&&null===x[0]||null===x[0]&&null===x[1])return!1;
throw Error("Illegal Argument");})};h.intersection=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]||null===x[1]?null:d.intersect(x[0],x[1])})};h.union=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);C=[];if(0===x.length)throw Error("Function called with wrong number of Parameters");if(1===x.length)if(k.isArray(x[0]))for(x=k.autoCastFeatureToGeometry(x[0]),F=0;F<x.length;F++){if(null!==x[F]){if(!(x[F]instanceof f))throw Error("Illegal Argument");
C.push(x[F])}}else if(k.isImmutableArray(x[0]))for(x=k.autoCastFeatureToGeometry(x[0].toArray()),F=0;F<x.length;F++){if(null!==x[F]){if(!(x[F]instanceof f))throw Error("Illegal Argument");C.push(x[F])}}else{if(x[0]instanceof f)return k.fixSpatialReference(c.cloneGeometry(x[0]),v.spatialReference);if(null===x[0])return null;throw Error("Illegal Argument");}else for(F=0;F<x.length;F++)if(null!==x[F]){if(!(x[F]instanceof f))throw Error("Illegal Argument");C.push(x[F])}return 0===C.length?null:d.union(C)})};
h.difference=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null!==x[0]&&null===x[1]?c.cloneGeometry(x[0]):null===x[0]?null:d.difference(x[0],x[1])})};h.symmetricdifference=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);z(x);return null===x[0]&&null===x[1]?null:null===x[0]?c.cloneGeometry(x[1]):null===x[1]?c.cloneGeometry(x[0]):d.symmetricDifference(x[0],x[1])})};h.clip=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);
k.pcCheck(x,2,2);if(!(x[1]instanceof r)&&null!==x[1])throw Error("Illegal Argument");if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");return null===x[1]?null:d.clip(x[0],x[1])})};h.cut=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,2);if(!(x[1]instanceof b)&&null!==x[1])throw Error("Illegal Argument");if(null===x[0])return[];if(!(x[0]instanceof f))throw Error("Illegal Argument");return null===x[1]?[c.cloneGeometry(x[0])]:
d.cut(x[0],x[1])})};h.area=function(v,y){return t(v,y,function(C,F,x){k.pcCheck(x,1,2);x=k.autoCastFeatureToGeometry(x);if(null===x[0])return 0;if(k.isArray(x[0])||k.isImmutableArray(x[0]))return C=k.autoCastArrayOfPointsToPolygon(x[0],v.spatialReference),null===C?0:d.planarArea(C,c.convertSquareUnitsToCode(k.defaultUndefined(x[1],-1)));if(!(x[0]instanceof f))throw Error("Illegal Argument");return d.planarArea(x[0],c.convertSquareUnitsToCode(k.defaultUndefined(x[1],-1)))})};h.areageodetic=function(v,
y){return t(v,y,function(C,F,x){k.pcCheck(x,1,2);x=k.autoCastFeatureToGeometry(x);if(null===x[0])return 0;if(k.isArray(x[0])||k.isImmutableArray(x[0]))return C=k.autoCastArrayOfPointsToPolygon(x[0],v.spatialReference),null===C?0:d.geodesicArea(C,c.convertSquareUnitsToCode(k.defaultUndefined(x[1],-1)));if(!(x[0]instanceof f))throw Error("Illegal Argument");return d.geodesicArea(x[0],c.convertSquareUnitsToCode(k.defaultUndefined(x[1],-1)))})};h.length=function(v,y){return t(v,y,function(C,F,x){k.pcCheck(x,
1,2);x=k.autoCastFeatureToGeometry(x);if(null===x[0])return 0;if(k.isArray(x[0])||k.isImmutableArray(x[0]))return C=k.autoCastArrayOfPointsToPolyline(x[0],v.spatialReference),null===C?0:d.planarLength(C,c.convertLinearUnitsToCode(k.defaultUndefined(x[1],-1)));if(!(x[0]instanceof f))throw Error("Illegal Argument");return d.planarLength(x[0],c.convertLinearUnitsToCode(k.defaultUndefined(x[1],-1)))})};h.length3d=function(v,y){return t(v,y,function(C,F,x){k.pcCheck(x,1,2);x=k.autoCastFeatureToGeometry(x);
if(null===x[0])return 0;if(k.isArray(x[0])||k.isImmutableArray(x[0]))return C=k.autoCastArrayOfPointsToPolyline(x[0],v.spatialReference),null===C?0:d.planarLength(C,c.convertLinearUnitsToCode(k.defaultUndefined(x[1],-1)));if(!(x[0]instanceof f))throw Error("Illegal Argument");return d.planarLength(x[0],c.convertLinearUnitsToCode(k.defaultUndefined(x[1],-1)))})};h.lengthgeodetic=function(v,y){return t(v,y,function(C,F,x){k.pcCheck(x,1,2);x=k.autoCastFeatureToGeometry(x);if(null===x[0])return 0;if(k.isArray(x[0])||
k.isImmutableArray(x[0]))return C=k.autoCastArrayOfPointsToPolyline(x[0],v.spatialReference),null===C?0:d.geodesicLength(C,c.convertLinearUnitsToCode(k.defaultUndefined(x[1],-1)));if(!(x[0]instanceof f))throw Error("Illegal Argument");return d.geodesicLength(x[0],c.convertLinearUnitsToCode(k.defaultUndefined(x[1],-1)))})};h.distance=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);C=x[0];if(k.isArray(x[0])||k.isImmutableArray(x[0]))C=k.autoCastArrayOfPointsToMultiPoint(x[0],
v.spatialReference);F=x[1];if(k.isArray(x[1])||k.isImmutableArray(x[1]))F=k.autoCastArrayOfPointsToMultiPoint(x[1],v.spatialReference);if(!(C instanceof f))throw Error("Illegal Argument");if(!(F instanceof f))throw Error("Illegal Argument");return d.distance(C,F,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1)))})};h.distancegeodetic=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);C=x[0];F=x[1];if(!(C instanceof q))throw Error("Illegal Argument");
if(!(F instanceof q))throw Error("Illegal Argument");var u=new b({paths:[],spatialReference:C.spatialReference});u.addPath([C,F]);return d.geodesicLength(u,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1)))})};h.densify=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");C=k.toNumber(x[1]);if(isNaN(C))throw Error("Illegal Argument");if(0>=C)throw Error("Illegal Argument");
return x[0]instanceof l||x[0]instanceof b?d.densify(x[0],C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1))):x[0]instanceof r?d.densify(e(x[0]),C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1))):x[0]})};h.densifygeodetic=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");C=k.toNumber(x[1]);if(isNaN(C))throw Error("Illegal Argument");if(0>=C)throw Error("Illegal Argument");
return x[0]instanceof l||x[0]instanceof b?d.geodesicDensify(x[0],C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1))):x[0]instanceof r?d.geodesicDensify(e(x[0]),C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1))):x[0]})};h.generalize=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,4);if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");C=k.toNumber(x[1]);if(isNaN(C))throw Error("Illegal Argument");return d.generalize(x[0],
C,k.toBoolean(k.defaultUndefined(x[2],!0)),c.convertLinearUnitsToCode(k.defaultUndefined(x[3],-1)))})};h.buffer=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");C=k.toNumber(x[1]);if(isNaN(C))throw Error("Illegal Argument");return 0===C?c.cloneGeometry(x[0]):d.buffer(x[0],C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1)))})};h.buffergeodetic=function(v,y){return t(v,
y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");C=k.toNumber(x[1]);if(isNaN(C))throw Error("Illegal Argument");return 0===C?c.cloneGeometry(x[0]):d.geodesicBuffer(x[0],C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1)))})};h.offset=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,6);if(null===x[0])return null;if(!(x[0]instanceof l||x[0]instanceof b))throw Error("Illegal Argument");
C=k.toNumber(x[1]);if(isNaN(C))throw Error("Illegal Argument");F=k.toNumber(k.defaultUndefined(x[4],10));if(isNaN(F))throw Error("Illegal Argument");var u=k.toNumber(k.defaultUndefined(x[5],0));if(isNaN(u))throw Error("Illegal Argument");return d.offset(x[0],C,c.convertLinearUnitsToCode(k.defaultUndefined(x[2],-1)),k.toString(k.defaultUndefined(x[3],"round")).toLowerCase(),F,u)})};h.rotate=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,2,3);C=x[0];if(null===
C)return null;if(!(C instanceof f))throw Error("Illegal Argument");C instanceof r&&(C=l.fromExtent(C));F=k.toNumber(x[1]);if(isNaN(F))throw Error("Illegal Argument");x=k.defaultUndefined(x[2],null);if(null===x)return d.rotate(C,F);if(x instanceof q)return d.rotate(C,F,x);throw Error("Illegal Argument");})};h.centroid=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,1,1);if(null===x[0])return null;C=x[0];if(k.isArray(x[0])||k.isImmutableArray(x[0]))C=k.autoCastArrayOfPointsToMultiPoint(x[0],
v.spatialReference);if(null===C)return null;if(!(C instanceof f))throw Error("Illegal Argument");return C instanceof q?k.fixSpatialReference(c.cloneGeometry(x[0]),v.spatialReference):C instanceof l?C.getCentroid():C instanceof b?n.centroidPolyline(C):C instanceof m?n.centroidMultiPoint(C):C instanceof r?C.getCenter():null})};h.multiparttosinglepart=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,1,1);F=[];if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");
if(x[0]instanceof q||x[0]instanceof r)return[k.fixSpatialReference(c.cloneGeometry(x[0]),v.spatialReference)];C=d.simplify(x[0]);if(C instanceof l){F=[];var u=[];for(x=0;x<C.rings.length;x++)if(C.isClockwise(C.rings[x])){var w=g.fromJson({rings:[C.rings[x]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()});F.push(w)}else u.push({ring:C.rings[x],pt:C.getPoint(x,0)});for(C=0;C<u.length;C++)for(x=0;x<F.length;x++)if(F[x].contains(u[C].pt)){F[x].addRing(u[C].ring);break}return F}if(C instanceof
b){F=[];for(x=0;x<C.paths.length;x++)u=g.fromJson({paths:[C.paths[x]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()}),F.push(u);return F}if(x[0]instanceof m){C=k.fixSpatialReference(c.cloneGeometry(x[0]),v.spatialReference);for(x=0;x<C.points.length;x++)F.push(C.getPoint(x));return F}return null})};h.issimple=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,1,1);if(null===x[0])return!0;if(!(x[0]instanceof f))throw Error("Illegal Argument");
return d.isSimple(x[0])})};h.simplify=function(v,y){return t(v,y,function(C,F,x){x=k.autoCastFeatureToGeometry(x);k.pcCheck(x,1,1);if(null===x[0])return null;if(!(x[0]instanceof f))throw Error("Illegal Argument");return d.simplify(x[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});B.cloneGeometry=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=
void 0;B.convertSquareUnitsToCode=function(k){if(void 0===k)return null;if("number"===typeof k)return k;k=k.toLowerCase();k=k.replace(/\s/g,"");k=k.replace(/-/g,"");switch(k){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};B.shapeExtent=function(k){if(null===k)return null;switch(k.type){case "polygon":case "multipoint":case "polyline":return k.extent;case "point":return new a({xmin:k.x,ymin:k.y,xmax:k.x,ymax:k.y,
spatialReference:k.spatialReference});case "extent":return k}return null};B.convertLinearUnitsToCode=function(k){if(void 0===k)return null;if("number"===typeof k)return k;k=k.toLowerCase();k=k.replace(/\s/g,"");k=k.replace(/-/g,"");switch(k){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};B.sameGeomType=function(k,n){return k===n||"point"===k&&"esriGeometryPoint"===n||"polyline"===k&&"esriGeometryPolyline"===n||"polygon"===k&&"esriGeometryPolygon"===n||"extent"===k&&"esriGeometryEnvelope"===
n||"multipoint"===k&&"esriGeometryMultipoint"===n||"point"===n&&"esriGeometryPoint"===k||"polyline"===n&&"esriGeometryPolyline"===k||"polygon"===n&&"esriGeometryPolygon"===k||"extent"===n&&"esriGeometryEnvelope"===k||"multipoint"===n&&"esriGeometryMultipoint"===k?!0:!1};B.cloneGeometry=function(k){if(null===k)return null;var n=c.fromJson(k.toJson());k.getCacheValue("_geVersion")&&n.setCacheValue("_geVersion",k.getCacheValue("_geVersion"));return n}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),
function(D,B,a,c,k,n){function r(f,m,q){if("undefined"===typeof q||0===+q)return Math[f](m);m=+m;q=+q;if(isNaN(m)||"number"!==typeof q||0!==q%1)return NaN;m=m.toString().split("e");m=Math[f](+(m[0]+"e"+(m[1]?+m[1]-q:-q)));m=m.toString().split("e");return+(m[0]+"e"+(m[1]?+m[1]+q:q))}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(f,m){function q(l,b,g){l=k.toNumber(l);return isNaN(l)?l:isNaN(b)||isNaN(g)||b>g?NaN:l<b?b:l>g?g:l}f.number=function(l,
b){return m(l,b,function(g,e,d){k.pcCheck(d,1,2);g=d[0];return k.isNumber(g)?g:null===g?0:k.isDate(g)||k.isBoolean(g)?Number(g):k.isArray(g)?NaN:""===g||void 0===g?Number(g):k.isString(g)?void 0!==d[1]?(d=k.multiReplace(d[1],"\u2030",""),d=k.multiReplace(d,"\u00a4",""),n.parse(g,{pattern:d})):Number(g.trim()):Number(g)})};f.abs=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.abs(k.toNumber(d[0]))})};f.acos=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.acos(k.toNumber(d[0]))})};
f.asin=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.asin(k.toNumber(d[0]))})};f.atan=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.atan(k.toNumber(d[0]))})};f.atan2=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,2,2);return Math.atan2(k.toNumber(d[0]),k.toNumber(d[1]))})};f.ceil=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,2);return 2===d.length?(g=k.toNumber(d[1]),isNaN(g)&&(g=0),r("ceil",k.toNumber(d[0]),-1*g)):Math.ceil(k.toNumber(d[0]))})};
f.round=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,2);return 2===d.length?(g=k.toNumber(d[1]),isNaN(g)&&(g=0),r("round",k.toNumber(d[0]),-1*g)):Math.round(k.toNumber(d[0]))})};f.floor=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,2);return 2===d.length?(g=k.toNumber(d[1]),isNaN(g)&&(g=0),r("floor",k.toNumber(d[0]),-1*g)):Math.floor(k.toNumber(d[0]))})};f.cos=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.cos(k.toNumber(d[0]))})};f.isnan=function(l,
b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};f.exp=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.exp(k.toNumber(d[0]))})};f.log=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.log(k.toNumber(d[0]))})};f.pow=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,2,2);return Math.pow(k.toNumber(d[0]),k.toNumber(d[1]))})};f.random=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,0,0);return Math.random()})};
f.sin=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.sin(k.toNumber(d[0]))})};f.sqrt=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.sqrt(k.toNumber(d[0]))})};f.tan=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return Math.tan(k.toNumber(d[0]))})};f.defaultvalue=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};f.isempty=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,
1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};f["boolean"]=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,1,1);return k.toBoolean(d[0])})};f.constrain=function(l,b){return m(l,b,function(g,e,d){k.pcCheck(d,3,3);g=k.toNumber(d[1]);e=k.toNumber(d[2]);if(k.isArray(d[0])){var h=[],t=0;for(d=d[0];t<d.length;t++)h.push(q(d[t],g,e));return h}if(k.isImmutableArray(d[0])){h=[];for(t=0;t<d[0].length();t++)h.push(q(d[0].get(t),g,e));return h}return q(d[0],g,e)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(D,B,a,c){function k(n,r,f,m){if(1===m.length){if(a.isArray(m[0]))return c.calculateStat(n,m[0],-1);if(a.isImmutableArray(m[0]))return c.calculateStat(n,m[0].toArray(),-1)}return c.calculateStat(n,m,-1)}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(n,r){n.stdev=function(f,m){return r(f,m,function(q,l,b){return k("stdev",q,l,b)})};n.variance=function(f,m){return r(f,m,function(q,l,b){return k("variance",
q,l,b)})};n.average=function(f,m){return r(f,m,function(q,l,b){return k("mean",q,l,b)})};n.mean=function(f,m){return r(f,m,function(q,l,b){return k("mean",q,l,b)})};n.sum=function(f,m){return r(f,m,function(q,l,b){return k("sum",q,l,b)})};n.min=function(f,m){return r(f,m,function(q,l,b){return k("min",q,l,b)})};n.max=function(f,m){return r(f,m,function(q,l,b){return k("max",q,l,b)})};n.distinct=function(f,m){return r(f,m,function(q,l,b){return k("distinct",q,l,b)})};n.count=function(f,m){return r(f,
m,function(q,l,b){a.pcCheck(b,1,1);if(a.isArray(b[0])||a.isString(b[0]))return b[0].length;if(a.isImmutableArray(b[0]))return b[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(D,B,a){function c(n){for(var r=0,f=0;f<n.length;f++)r+=n[f];return r/n.length}function k(n){for(var r=c(n),f=0,m=0;m<n.length;m++)f+=Math.pow(r-n[m],2);return f/n.length}Object.defineProperty(B,"__esModule",
{value:!0});B.calculateStat=B.decodeStatType=void 0;B.decodeStatType=function(n){switch(n.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};B.calculateStat=function(n,r,f){void 0===f&&(f=1E3);switch(n.toLowerCase()){case "distinct":a:{n=f;f=[];for(var m={},q=[],l=0;l<r.length;l++){if(void 0!==
r[l]&&null!==r[l]&&r[l]!==a.voidOperation){var b=r[l];if(a.isNumber(b)||a.isString(b))void 0===m[b]&&(f.push(b),m[b]=1);else{for(var g=!1,e=0;e<q.length;e++)!0===a.equalityTest(q[e],b)&&(g=!0);!1===g&&(q.push(b),f.push(b))}}if(f.length>=n&&-1!==n){r=f;break a}}r=f}return r;case "avg":case "mean":return c(a.toNumberArray(r));case "min":return Math.min.apply(Math,a.toNumberArray(r));case "sum":r=a.toNumberArray(r);for(f=n=0;f<r.length;f++)n+=r[f];return n;case "max":return Math.max.apply(Math,a.toNumberArray(r));
case "stdev":case "stddev":return Math.sqrt(k(a.toNumberArray(r)));case "var":case "variance":return k(a.toNumberArray(r));case "count":return r.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t){function z(v,y,C){if(null===v)y.updateUint8Array([0,139]);else if(f.isArray(v)){y.updateUint8Array([61]);if(C.map.has(v))v=C.map.get(v),y.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);for(var F=0;F<v.length;F++){var x=v[F];z(x,y,C)}C.map["delete"](v);C.currentLength--}y.updateUint8Array([199])}else if(f.isImmutableArray(v)){y.updateUint8Array([61]);if(C.map.has(v))v=C.map.get(v),y.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);
F=0;for(var u=v.toArray();F<u.length;F++)x=u[F],z(x,y,C);C.map["delete"](v);C.currentLength--}y.updateUint8Array([199])}else if(f.isDate(v))y.updateIntArray([v.getTime()]),y.updateUint8Array([241]);else if(f.isString(v))y.updateIntArray([v.length]),y.updateWithString(v),y.updateUint8Array([41]);else if(f.isBoolean(v))y.updateUint8Array([!0===v?1:0,113]);else if(f.isNumber(v))y.updateFloatArray([v]),y.updateUint8Array([173]);else{if(v instanceof n)throw Error("Type not supported in Hash");if(v instanceof
k)throw Error("Type not supported in Hash");if(v instanceof r){y.updateUint8Array([223]);if(C.map.has(v))v=C.map.get(v),y.updateIntArray([v^61237541]);else{C.map.set(v,C.currentLength++);F=0;for(u=v.keys();F<u.length;F++)x=u[F],y.updateIntArray([x.length]),y.updateWithString(x),y.updateUint8Array([251]),x=v.field(x),z(x,y,C),y.updateUint8Array([239]);C.map["delete"](v);C.currentLength--}y.updateUint8Array([73])}else{if(f.isFeature(v))throw Error("Type not supported in Hash");if(v instanceof e)y.updateIntArray([3833836621]),
y.updateIntArray([0]),y.updateFloatArray([v.x]),y.updateIntArray([1]),y.updateFloatArray([v.y]),y.updateIntArray([3765347959]),z(v.spatialReference.wkid,y,C);else if(v instanceof d){y.updateIntArray([1266616829]);for(F=0;F<v.rings.length;F++){u=v.rings[F];var w=[],A=null,E=null;for(x=0;x<u.length;x++){var G=v.getPoint(F,x);if(0===x)A=G;else if(E.x===G.x&&E.y===G.y)continue;E=G;x===u.length-1&&A.x===G.x&&A.y===G.y||w.push(G)}y.updateIntArray([1397116793,w.length]);for(x=0;x<w.length;x++)G=w[x],y.updateIntArray([3962308117,
x]),z(G,y,C),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}y.updateIntArray([3878477243]);z(v.spatialReference.wkid,y,C)}else if(v instanceof h){y.updateIntArray([4106883559]);for(F=0;F<v.paths.length;F++){u=v.paths[F];y.updateIntArray([1397116793,u.length]);for(x=0;x<u.length;x++)y.updateIntArray([3962308117,x]),z(v.getPoint(F,x),y,C),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}y.updateIntArray([2568784753]);z(v.spatialReference.wkid,y,C)}else if(v instanceof g){y.updateIntArray([588535921,
v.points.length]);for(x=0;x<v.points.length;x++)F=v.getPoint(x),y.updateIntArray([x]),z(F,y,C);y.updateIntArray([1700171621]);z(v.spatialReference.wkid,y,C)}else if(v instanceof b)y.updateIntArray([3483648373]),y.updateIntArray([0]),y.updateFloatArray([v.xmax]),y.updateIntArray([1]),y.updateFloatArray([v.xmin]),y.updateIntArray([2]),y.updateFloatArray([v.ymax]),y.updateIntArray([3]),y.updateFloatArray([v.ymin]),y.updateIntArray([3622027469]),z(v.spatialReference.wkid,y,C);else if(v instanceof t)y.updateIntArray([14]),
void 0!==v.wkid&&null!==v.wkid&&y.updateIntArray([v.wkid]),v.wkt&&y.updateWithString(v.wkt);else{if(f.isFunctionParameter(v))throw Error("Type not supported in Hash");if(f.isFeatureSet(v))throw Error("Type not supported in Hash");f.isFeatureSetCollection(v);throw Error("Type not supported in Hash");}}}}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(v,y){v.portal=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);return new k(f.toString(w[0]))})};
v.trim=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);return f.toString(w[0]).trim()})};v.tohex=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);x=f.toNumber(w[0]);return isNaN(x)?x:x.toString(16)})};v.upper=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);return f.toString(w[0]).toUpperCase()})};v.proper=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,2);x=1;2===w.length&&"firstword"===f.toString(w[1]).toLowerCase()&&(x=2);u=/\s/;w=f.toString(w[0]);for(var A=
"",E=!0,G=0;G<w.length;G++){var H=w[G];u.test(H)?1===x&&(E=!0):H.toUpperCase()!==H.toLowerCase()&&(E?(H=H.toUpperCase(),E=!1):H=H.toLowerCase());A+=H}return A})};v.lower=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);return f.toString(w[0]).toLowerCase()})};v.guid=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,0,1);if(0<w.length)switch(f.toString(w[0]).toLowerCase()){case "digits":return f.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return f.generateUUID();
case "digits-hyphen-parentheses":return"("+f.generateUUID()+")"}return"{"+f.generateUUID()+"}"})};v.console=function(C,F){return y(C,F,function(x,u,w){0!==w.length&&(1===w.length?C.console(f.toString(w[0])):C.console(f.toString(w)));return f.voidOperation})};v.mid=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,3);x=f.toNumber(w[1]);if(isNaN(x))return"";0>x&&(x=0);if(2===w.length)return f.toString(w[0]).substr(x);u=f.toNumber(w[2]);if(isNaN(u))return"";0>u&&(u=0);return f.toString(w[0]).substr(x,
u)})};v.find=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,3);x=0;if(2<w.length){x=f.toNumber(f.defaultUndefined(w[2],0));if(isNaN(x))return-1;0>x&&(x=0)}return f.toString(w[1]).indexOf(f.toString(w[0]),x)})};v.left=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,2);x=f.toNumber(w[1]);if(isNaN(x))return"";0>x&&(x=0);return f.toString(w[0]).substr(0,x)})};v.right=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,2);x=f.toNumber(w[1]);if(isNaN(x))return"";0>x&&(x=0);return f.toString(w[0]).substr(-1*
x,x)})};v.split=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,4);x=f.toNumber(f.defaultUndefined(w[2],-1));u=f.toBoolean(f.defaultUndefined(w[3],!1));-1===x||null===x||!0===u?w=f.toString(w[0]).split(f.toString(w[1])):(isNaN(x)&&(x=-1),-1>x&&(x=-1),w=f.toString(w[0]).split(f.toString(w[1]),x));if(!1===u)return w;u=[];for(var A=0;A<w.length&&!(-1!==x&&u.length>=x);A++)""!==w[A]&&void 0!==w[A]&&u.push(w[A]);return u})};v.text=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,2);return f.toStringExplicit(w[0],
w[1])})};v.concatenate=function(C,F){return y(C,F,function(x,u,w){x=[];if(1>w.length)return"";if(f.isArray(w[0])){u=f.defaultUndefined(w[2],"");for(var A=0;A<w[0].length;A++)x[A]=f.toStringExplicit(w[0][A],u);return 1<w.length?x.join(w[1]):x.join("")}if(f.isImmutableArray(w[0])){u=f.defaultUndefined(w[2],"");for(A=0;A<w[0].length();A++)x[A]=f.toStringExplicit(w[0].get(A),u);return 1<w.length?x.join(w[1]):x.join("")}for(A=0;A<w.length;A++)x[A]=f.toStringExplicit(w[A]);return x.join("")})};v.reverse=
function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(f.isArray(w[0]))return x=w[0].slice(0),x.reverse(),x;if(f.isImmutableArray(w[0]))return x=w[0].toArray().slice(0),x.reverse(),x;throw Error("Invalid Parameter");})};v.replace=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,3,4);x=f.toString(w[0]);u=f.toString(w[1]);var A=f.toString(w[2]);return(4===w.length?f.toBoolean(w[3]):1)?f.multiReplace(x,u,A):x.replace(u,A)})};v.schema=function(C,F){return y(C,F,function(x,u,w){if(f.isFeature(w[0]))return(x=
f.featureSchema(w[0]))?r.convertObjectToArcadeDictionary(x):null;throw Error("Invalid Parameter");})};v.subtypes=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(f.isFeature(w[0]))return(x=f.featureSubtypes(w[0]))?r.convertObjectToArcadeDictionary(x):null;throw Error("Invalid Parameter");})};v.subtypecode=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(f.isFeature(w[0])){u=f.featureSubtypes(w[0]);if(!u)return null;if(u.subtypeField&&w[0].hasField(u.subtypeField))for(w=
w[0].field(u.subtypeField),x=0,u=u.subtypes;x<u.length;x++){var A=u[x];if(A.code===w)return A.code}return null}throw Error("Invalid Parameter");})};v.subtypename=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(f.isFeature(w[0])){u=f.featureSubtypes(w[0]);if(!u)return"";if(u.subtypeField&&w[0].hasField(u.subtypeField))for(w=w[0].field(u.subtypeField),x=0,u=u.subtypes;x<u.length;x++){var A=u[x];if(A.code===w)return A.name}return""}throw Error("Invalid Parameter");})};v.gdbversion=function(C,
F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(f.isFeature(w[0]))return w[0].gdbVersion();throw Error("Invalid Parameter");})};v.domain=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,3);if(f.isFeature(w[0]))return(x=f.featureFullDomain(w[0],f.toString(w[1]),void 0===w[2]?void 0:f.toNumber(w[2])))&&x.domain?"coded-value"===x.domain.type||"codedValue"===x.domain.type?r.convertObjectToArcadeDictionary({type:"codedValue",name:x.domain.name,dataType:m.layerFieldEsriConstants[x.field.type],
codedValues:x.domain.codedValues.map(function(A){return{name:A.name,code:A.code}})}):r.convertObjectToArcadeDictionary({type:"range",name:x.domain.name,dataType:m.layerFieldEsriConstants[x.field.type],min:x.domain.min,max:x.domain.max}):null;throw Error("Invalid Parameter");})};v.domainname=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,4);if(f.isFeature(w[0]))return f.featureDomainValueLookup(w[0],f.toString(w[1]),w[2],void 0===w[3]?void 0:f.toNumber(w[3]));throw Error("Invalid Parameter");
})};v.domaincode=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,2,4);if(f.isFeature(w[0]))return f.featureDomainCodeLookup(w[0],f.toString(w[1]),w[2],void 0===w[3]?void 0:f.toNumber(w[3]));throw Error("Invalid Parameter");})};v.urlencode=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(null===w[0])return"";if(w[0]instanceof r){x="";u=0;for(var A=w[0].keys();u<A.length;u++){var E=A[u],G=w[0].field(E);""!==x&&(x+="\x26");x=null===G?x+(encodeURIComponent(E)+"\x3d"):x+(encodeURIComponent(E)+
"\x3d"+encodeURIComponent(G))}return x}return encodeURIComponent(f.toString(w[0]))})};v.hash=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);x=new l.XXH(0);z(w[0],x,{map:new Map,currentLength:0});return x.digest()})};v.convertdirection=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,3,3);return q.convertDirection(w[0],w[1],w[2])})};v.fromjson=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,1);if(!1===f.isString(w[0]))throw Error("Invalid Parameter");return r.convertJsonToArcade(JSON.parse(f.toString(w[0])))})};
v.expects=function(C,F){return y(C,F,function(x,u,w){if(1>w.length)throw Error("Function called with wrong number of Parameters");return f.voidOperation})};v.tocharcode=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,2);x=f.toNumber(f.defaultUndefined(w[1],0));u=f.toString(w[0]);if(0===u.length&&1===w.length)return null;if(u.length<=x||0>x)throw Error("Illegal argument");return u.charCodeAt(x)})};v.tocodepoint=function(C,F){return y(C,F,function(x,u,w){f.pcCheck(w,1,2);x=f.toNumber(f.defaultUndefined(w[1],
0));u=f.toString(w[0]);if(0===u.length&&1===w.length)return null;if(u.length<=x||0>x)throw Error("Illegal argument");return u.codePointAt(x)})};v.fromcharcode=function(C,F){return y(C,F,function(x,u,w){if(1>w.length)throw Error("Function called with wrong number of Parameters");x=w.map(function(A){return Math.trunc(f.toNumber(A))}).filter(function(A){return 0<=A&&65535>=A});return 0===x.length?null:String.fromCharCode.apply(null,x)})};v.fromcodepoint=function(C,F){return y(C,F,function(x,u,w){if(1>
w.length)throw Error("Function called with wrong number of Parameters");try{var A=w.map(function(E){return Math.trunc(f.toNumber(E))}).filter(function(E){return 1114111>=E&&E>>>0===E})}catch(E){return null}return 0===A.length?null:String.fromCodePoint.apply(null,A)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(D,B,a,c){function k(U){if(!1===c.isString(U))throw Error("Invalid Parameter");return U}function n(U,X){var Z=
Math.pow(10,X);return Math.round(U*Z)/Z}function r(U){U=+U;return isFinite(U)?U-U%1||(0>U?-0:0===U?U:0):U}function f(U){var X=parseFloat(U.toString().replace(r(U).toString(),"0"))*((0<U)-(0>U)||+U);return 0>U?{fraction:X,integer:Math.ceil(U)}:{fraction:X,integer:Math.floor(U)}}function m(U,X){switch(U){case 0:return"SHORT"===X?"N":"North";case 1:return"SHORT"===X?"E":"East";case 2:return"SHORT"===X?"S":"South";case 3:return"SHORT"===X?"W":"West"}}function q(U,X,Z){for(;U.length<Z;)U=X+U;return U}
function l(U,X){return U-Math.floor(U/X)*X}function b(U){switch(U){case 6:case 1:return 360;case 4:return G;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function g(U){switch(U.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function e(U){switch(U.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function d(U,X,Z){var P=null;switch(X){case 1:P=B.preciseMultiply(U,3600);break;case 2:P=U;break;case 5:P=B.preciseMultiply(U,3240);break;case 4:P=B.preciseMultiply(U,H);break;default:throw Error("Unnexpected evaluation");
}switch(Z){case 1:return B.preciseDivide(P,3600);case 2:return P;case 5:return B.preciseDivide(P,3240);case 4:return P/H;default:throw Error("Unnexpected evaluation");}}function h(U){switch(U){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function t(U){switch(c.toNumber(U)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function z(U){switch(U.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function v(U){U=parseFloat(U);if(c.isNumber(U)){if(isNaN(U))throw Error("Invalid conversion");return U}throw Error("Invalid conversion");}function y(U,X,Z){var P=3===Z,da=null,ia=null,xa=0,Ca=0;Ca=0;if(P){if(2>U.length)throw Error("Conversion Error");Ca=1;(ia=t(c.toString(U[U.length-1])))?(da=ia.first,ia=ia.second):(xa=1,da=z(c.toString(U[0])),ia=z(c.toString(U[U.length-1])));if(null===da||null===
ia)throw Error("Invalid Conversion");}switch(X){case 1:case 4:case 5:if(0===U.length)throw Error("Invalid Conversion");return P?Y.createFromAngleMeridianAndDirection(ba.createFromAngleAndUnits(v(U[xa]),h(X)),da,ia):Y.createFromAngleAndDirection(ba.createFromAngleAndUnits(v(U[xa]),h(X)),Z);case 3:Ca=U.length-Ca-xa;if(3===Ca)return U=ba.createFromDegreesMinutesSeconds(v(U[xa]),v(U[xa+1]),v(U[xa+2])),P?Y.createFromAngleMeridianAndDirection(U,da,ia):Y.createFromAngleAndDirection(U,Z);if(1===Ca)return U=
v(U[xa]),U=N.numberToDms(U),U=ba.createFromDegreesMinutesSeconds(U.m_degrees,U.m_minutes,U.m_seconds),P?Y.createFromAngleMeridianAndDirection(U,da,ia):Y.createFromAngleAndDirection(U,Z)}throw Error("Conversion Error");}function C(U){for(var X=[" ","-","/","'",'"',"\\","^","\u00b0",K,"\t","\r","\n","*"],Z="",P=0;P<U.length;P++){var da=U.charAt(P);Z=X.includes(da)?Z+"RRSPLITRRSPLITRR":Z+da}return Z.split("RRSPLITRRSPLITRR").filter(function(ia){return""!==ia})}function F(U,X,Z){for(var P={padding:0,
rounding:0,newpos:X},da=!1;X<U.length;){var ia=U[X];if(ia===Z)da?P.rounding++:P.padding++,X++;else if("."===ia)da=!0,X++;else break}P.newpos=X-1;return P}Object.defineProperty(B,"__esModule",{value:!0});B.convertDirection=B.preciseDivide=B.preciseMultiply=B.preciseMinus=B.preciseAdd=void 0;var x=function(U){return function(X,Z,P){P=P||14;return+U(X,Z).toFixed(P)}},u=function(U,X){return U+X},w=function(U,X){return U-X},A=function(U,X){return U*X},E=function(U,X){return U/X};B.preciseAdd=function(U,
X,Z){return x(u)(U,X,Z)};B.preciseMinus=function(U,X,Z){return x(w)(U,X,Z)};B.preciseMultiply=function(U,X,Z){return x(A)(U,X,Z)};B.preciseDivide=function(U,X,Z){return x(E)(U,X,Z)};var G=2*Math.PI,H=648E3/Math.PI,K=String.fromCharCode(7501),I;(function(U){U[U.north=0]="north";U[U.east=1]="east";U[U.south=2]="south";U[U.west=3]="west"})(I||(I={}));var J;(function(U){U[U.decimal_degrees=1]="decimal_degrees";U[U.seconds=2]="seconds";U[U.degrees_minutes_seconds=3]="degrees_minutes_seconds";U[U.radians=
4]="radians";U[U.gradians=5]="gradians";U[U.truncated_degrees=6]="truncated_degrees";U[U.fractional_degree_minutes=7]="fractional_degree_minutes";U[U.fractional_minute_seconds=8]="fractional_minute_seconds"})(J||(J={}));var L;(function(U){U[U.north_azimuth=1]="north_azimuth";U[U.polar=2]="polar";U[U.quadrant=3]="quadrant";U[U.south_azimuth=4]="south_azimuth"})(L||(L={}));var M;(function(U){U[U.meridian=0]="meridian";U[U.direction=1]="direction"})(M||(M={}));var N=function(){function U(X,Z,P){this.m_degrees=
X;this.m_minutes=Z;this.m_seconds=P}U.prototype.getField=function(X){switch(X){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};U.secondsToDMS=function(X){var Z=f(X).fraction;X=f(X).integer;var P=Math.floor(X/3600);X-=3600*P;var da=Math.floor(X/60);return new U(P,da,X-60*da+Z)};U.numberToDms=function(X){var Z=f(X).fraction;X=f(X).integer;var P=B.preciseMultiply(f(100*Z).fraction,100);Z=f(100*Z).integer;
return new U(X,Z,P)};U.prototype.format=function(X,Z){var P=n(this.m_seconds,Z),da=this.m_minutes,ia=this.m_degrees;if(2===X||8===X)60<=P&&(P-=60,++da),60<=da&&(da=0,++ia),360<=ia&&(ia=0);else if(7===X)P=0,da=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ia=this.m_degrees,60<=da&&(da=0,++ia),360<=ia&&(ia=0);else if(1===X||6===X)P=B.preciseDivide(this.m_seconds,3600),da=B.preciseDivide(this.m_minutes,60),ia=Math.round(this.m_degrees+da+P),P=da=0;return new U(ia,da,P)};U.dmsToSeconds=function(X,
Z,P){return 3600*X+60*Z+P};return U}(),O=function(){function U(X,Z,P){this.meridian=X;this.angle=Z;this.direction=P}U.prototype.fetchAzimuth=function(X){return X===M.meridian?this.meridian:this.direction};return U}(),Y=function(){function U(X){this.m_angle=X}U.createFromAngleAndDirection=function(X,Z){return new U(new ba(U._convertDirectionFormat(X.extractAngularUnits(2),Z,1)))};U.prototype.getAngle=function(X){var Z=this.m_angle.extractAngularUnits(2);switch(X){case 1:case 4:case 2:return X=new ba(U._convertDirectionFormat(Z,
1,X));case 3:return X=U.secondsNorthAzimuthToQuadrant(Z),X=new ba(X.angle)}};U.prototype.getMeridian=function(X){var Z=this.m_angle.extractAngularUnits(2);switch(X){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return U.secondsNorthAzimuthToQuadrant(Z).meridian}};U.prototype.getDirection=function(X){var Z=this.m_angle.extractAngularUnits(2);switch(X){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return U.secondsNorthAzimuthToQuadrant(Z).direction}};U.secondsNorthAzimuthToQuadrant=
function(X){var Z=324E3>=X||972E3<=X?0:2;return new O(Z,0===Z?Math.min(1296E3-X,X):Math.abs(X-648E3),648E3<X?3:1)};U.createFromAngleMeridianAndDirection=function(X,Z,P){return new U(new ba(U.secondsQuadrantToNorthAzimuth(X.extractAngularUnits(2),Z,P)))};U.secondsQuadrantToNorthAzimuth=function(X,Z,P){return 0===Z?1===P?X:1296E3-X:1===P?648E3-X:648E3+X};U._convertDirectionFormat=function(X,Z,P){var da=0;switch(Z){case 1:da=X;break;case 2:da=324E3-X;break;case 3:throw Error("Unnexpected evaluation");
case 4:da=X+648E3}X=0;switch(P){case 1:X=da;break;case 2:X=324E3-da;break;case 3:throw Error("Unnexpected evaluation");case 4:X=da-648E3}X%=1296E3;return 0>X?1296E3+X:X};return U}(),ba=function(){function U(X){this.m_seconds=X}U.createFromAngleAndUnits=function(X,Z){return new U(d(X,Z,2))};U.prototype.extractAngularUnits=function(X){return d(this.m_seconds,2,h(X))};U.createFromDegreesMinutesSeconds=function(X,Z,P){return new U(B.preciseAdd(B.preciseAdd(B.preciseMultiply(X,3600),B.preciseMultiply(Z,
60)),P))};return U}(),ha=function(){function U(X,Z,P,da){this.m_view=X;this.m_angle=Z;this.m_merdian=P;this.m_direction=da;this.m_formatted_dms=this.m_dms=null}U.createFromStringAndBearing=function(X,Z,P){return new U(X,Z.getAngle(P),Z.getMeridian(P),Z.getDirection(P))};U.prototype.fetchAngle=function(){return this.m_angle};U.prototype.fetchMeridian=function(){return this.m_merdian};U.prototype.fetchDirection=function(){return this.m_direction};U.prototype.fetchView=function(){return this.m_view};
U.prototype.fetchDms=function(){null===this.m_dms&&this._calculateDms();return this.m_dms};U.prototype.fetchFormattedDms=function(){null===this.m_formatted_dms&&this._calculateDms();return this.m_formatted_dms};U.prototype._calculateDms=function(){var X=null,Z=6,P=0;for(X=0;X<this.m_view.length;X++){var da=this.m_view[X];switch(da){case "m":X=F(this.m_view,X,da);Z=6===Z?7:Z;X=X.newpos;continue;case "s":X=F(this.m_view,X,da),Z=8,P=P<X.rounding?X.rounding:P,X=X.newpos}}this.m_dms=N.secondsToDMS(this.m_angle.extractAngularUnits(2));
this.m_formatted_dms=N.secondsToDMS(this.m_angle.extractAngularUnits(2)).format(Z,P)};return U}();B.convertDirection=function(U,X,Z){if(!(X instanceof a))throw Error("Invalid Parameter");if(!1===X.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===X.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var P=g(k(X.field("directiontype")));X=e(k(X.field("angletype")));if(c.isNumber(U)){U=c.toNumber(U);if(3===P)throw Error("Conversion error");
3===X?(U=N.numberToDms(U),X=Y.createFromAngleAndDirection(ba.createFromDegreesMinutesSeconds(U.m_degrees,U.m_minutes,U.m_seconds),P)):X=Y.createFromAngleAndDirection(ba.createFromAngleAndUnits(U,h(X)),P)}else if(c.isString(U))X=y(C(U),X,P);else if(c.isArray(U))X=y(U,X,P);else if(c.isImmutableArray(U))X=y(U.toArray(),X,P);else throw Error("Conversion Error");if(!(Z instanceof a))throw Error("Invalid Parameter");if(!1===Z.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");
if(!1===Z.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");P=g(k(Z.field("directiontype")));U=Z.hasField("angleType")?e(k(Z.field("angletype"))):null;var da=k(Z.field("outputType")).toUpperCase().trim();if(!P||!da)throw Error("Conversion error");if(!(U||"TEXT"===da&&Z.hasField("format")))throw Error("Invalid unit");switch(da){case "VALUE":if(3===P||3===U)return Z=X,X=Z.getAngle(P),3===P&&3===U?(U=N.secondsToDMS(X.extractAngularUnits(2)),P=[m(Z.getMeridian(P),"SHORT"),
U.m_degrees,U.m_minutes,U.m_seconds,m(Z.getDirection(P),"SHORT")]):3===U?(U=N.secondsToDMS(X.extractAngularUnits(2)),P=[U.m_degrees,U.m_minutes,U.m_seconds]):P=3===P?[m(Z.getMeridian(P),"SHORT"),X.extractAngularUnits(U),m(Z.getDirection(P),"SHORT")]:[X.extractAngularUnits(U)],P;Z=X;if((X=h(U))&&3!==U)P=Z.getAngle(P).extractAngularUnits(X);else throw Error("Conversion Error");return P;case "TEXT":da="";Z.hasField("format")&&(da=c.toString(Z.field("format")));if(null===da||""===da){Z="";switch(U){case 1:Z=
3===P?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:Z=3===P?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:Z="R.RR";break;case 5:Z="GGG.GG"+K;break;default:throw Error("Conversion error");}3===P&&(Z="p "+Z+" b");da=Z}Z=X;U=da;var ia="",xa=null,Ca=null;X=ha.createFromStringAndBearing(U,Z,P);da={D:1,d:6,m:7,s:8,R:4,G:5};for(Ca=0;Ca<U.length;Ca++){var Fa=U[Ca];switch(Fa){case "[":xa=U;Fa={escaped:"",newpos:Ca};for(Ca++;Ca<xa.length;){var Ma=xa[Ca];Ca++;if("]"===Ma)break;Fa.escaped+=Ma}Fa.newpos=
Ca-1;xa=Fa;ia+=xa.escaped;Ca=xa.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":xa=F(U,Ca,Fa);Ca=Z.getAngle(P);a:{Fa=da[Fa];Ma=xa.padding;var Sa=xa.rounding,Ba=X,ca=null;switch(Fa){case 1:case 4:case 5:ca=l(n(Ca.extractAngularUnits(Fa),Sa),b(Fa));Ca=q(ca.toFixed(Sa),"0",Ma+Sa+(0<Sa?1:0));break a;case 6:case 7:ca=l(Ba.fetchFormattedDms().getField(Fa),b(Fa));Ca=q(ca.toFixed(Sa),"0",Ma+Sa+(0<Sa?1:0));break a;case 8:ca=l(n(Ba.fetchDms().getField(Fa),Sa),b(Fa));Ca=q(ca.toFixed(Sa),
"0",Ma+Sa+(0<Sa?1:0));break a;default:throw Error("Unnexepected evaluation");}}ia+=Ca;Ca=xa.newpos;continue;case "P":case "p":ia+=m(X.fetchMeridian(),"p"===Fa?"SHORT":"LONG");continue;case "B":case "b":ia+=m(X.fetchDirection(),"b"===Fa?"SHORT":"LONG");continue;default:ia+=Fa}}return ia;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(D,B){function a(k){for(var n=[],r=0,f=k.length;r<f;r++){var m=k.charCodeAt(r);128>m?n.push(m):
2048>m?n.push(192|m>>6,128|m&63):55296>m||57344<=m?n.push(224|m>>12,128|m>>6&63,128|m&63):(r++,m=65536+((m&1023)<<10|k.charCodeAt(r)&1023),n.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|m&63))}return new Uint8Array(n)}Object.defineProperty(B,"__esModule",{value:!0});B.XXH=void 0;var c=function(){function k(n){this.seed=n;this.totallen=0;this.bufs=[];this.init()}k.prototype.init=function(){this.bufs=[];this.totallen=0;return this};k.prototype.updateFloatArray=function(n){for(var r=[],f=0;f<n.length;f++){var m=
n[f];isNaN(m)?r.push("NaN"):Infinity===m?r.push("Infinity"):-Infinity===m?r.push("-Infinity"):0===m?r.push("0"):r.push(m.toString(16))}this.update(a(r.join("")))};k.prototype.updateIntArray=function(n){n=Int32Array.from(n);this.update(new Uint8Array(n.buffer))};k.prototype.updateUint8Array=function(n){this.update(Uint8Array.from(n))};k.prototype.updateWithString=function(n){return this.update(a(n))};k.prototype.update=function(n){this.bufs.push(n);this.totallen+=n.length;return this};k.prototype.digest=
function(){for(var n=new Uint8Array(this.totallen),r=0,f=0,m=this.bufs;f<m.length;f++){var q=m[f];n.set(q,r);r+=q.length}this.init();return this._xxHash32(n,this.seed)};k.prototype._xxHash32=function(n,r){void 0===r&&(r=0);var f=r+374761393&4294967295,m=0;if(16<=n.length){f=[r+2654435761+2246822519&4294967295,r+2246822519&4294967295,r+0&4294967295,r-2654435761&4294967295];var q=n.length-16,l=0;for(m=0;(m&4294967280)<=q;m+=4){var b=m,g=n[b+0]+(n[b+1]<<8);b=n[b+2]+(n[b+3]<<8);g=f[l]+(2246822519*g+(2246822519*
b<<16))&4294967295;g=g<<13|g>>>19;f[l]=2654435761*(g&65535)+(2654435761*(g>>>16)<<16)&4294967295;l=l+1&3}f=(f[0]<<1|f[0]>>>31)+(f[1]<<7|f[1]>>>25)+(f[2]<<12|f[2]>>>20)+(f[3]<<18|f[3]>>>14)&4294967295}f=f+n.length&4294967295;for(l=n.length-4;m<=l;m+=4)b=m,g=n[b+0]+(n[b+1]<<8),b=n[b+2]+(n[b+3]<<8),f=f+(3266489917*g+(3266489917*b<<16))&4294967295,f=f<<17|f>>>15,f=668265263*(f&65535)+(668265263*(f>>>16)<<16)&4294967295;for(;m<n.length;++m)l=n[m],f+=374761393*l,f=f<<11|f>>>21,f=2654435761*(f&65535)+(2654435761*
(f>>>16)<<16)&4294967295;f^=f>>>15;f=(2246822519*(f&65535)&4294967295)+(2246822519*(f>>>16)<<16);f^=f>>>13;f=(3266489917*(f&65535)&4294967295)+(3266489917*(f>>>16)<<16);f^=f>>>16;return 0>f?f+4294967296:f};return k}();B.XXH=c})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H){function K(ta,pa){for(var Aa=[],T=0;T<pa.arguments.length;T++)Aa.push(J(ta,pa.arguments[T]));return Aa}function I(ta,pa,Aa){try{return!0===pa.preparsed?Aa(ta,null,pa.arguments):Aa(ta,pa,K(ta,pa))}catch(T){throw T;}}function J(ta,pa){try{switch(pa.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var Aa=null===pa.init?null:J(ta,pa.init);Aa===e.voidOperation&&(Aa=null);if("Identifier"!==pa.id.type)throw Error("Can only assign a regular variable");
var T=pa.id.name.toLowerCase();null!==ta.localScope?ta.localScope[T]={value:Aa,valueset:!0,node:pa.init}:ta.globalScope[T]={value:Aa,valueset:!0,node:pa.init};return e.voidOperation;case "VariableDeclaration":for(var ea=0;ea<pa.declarations.length;ea++)J(ta,pa.declarations[ea]);return e.voidOperation;case "BlockStatement":a:{var na=e.voidOperation;for(ea=0;ea<pa.body.length;ea++)if(na=J(ta,pa.body[ea]),na instanceof e.ReturnResult||na===e.breakResult||na===e.continueResult){var V=na;break a}V=na}return V;
case "FunctionDeclaration":var Ia=pa.id.name.toLowerCase();ta.globalScope[Ia]={valueset:!0,node:null,value:new l(pa,ta)};return e.voidOperation;case "ReturnStatement":if(null===pa.argument)var Ja=new e.ReturnResult(e.voidOperation);else{var Da=J(ta,pa.argument);Ja=new e.ReturnResult(Da)}return Ja;case "IfStatement":if("AssignmentExpression"===pa.test.type||"UpdateExpression"===pa.test.type)throw Error(d.nodeErrorMessage(pa.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var W=J(ta,pa.test);
if(!0===W)var oa=J(ta,pa.consequent);else if(!1===W)oa=null!==pa.alternate?J(ta,pa.alternate):e.voidOperation;else throw Error(d.nodeErrorMessage(pa,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return oa;case "ExpressionStatement":if("AssignmentExpression"===pa.expression.type||"UpdateExpression"===pa.expression.type)var ra=J(ta,pa.expression);else{var R=J(ta,pa.expression);ra=R===e.voidOperation?e.voidOperation:new e.ImplicitResult(R)}return ra;case "AssignmentExpression":var fa=J(ta,pa.right);
ea=null;var ma="";if("MemberExpression"===pa.left.type){ea=J(ta,pa.left.object);!0===pa.left.computed?ma=J(ta,pa.left.property):"Identifier"===pa.left.property.type&&(ma=pa.left.property.name);if(e.isArray(ea))if(e.isNumber(ma)){0>ma&&(ma=ea.length+ma);if(0>ma||ma>ea.length)throw Error("Assignment outside of array bounds");if(ma===ea.length&&"\x3d"!==pa.operator)throw Error("Invalid Parameter");ea[ma]=M(fa,pa.operator,ea[ma],pa)}else throw Error("Invalid Parameter");else if(ea instanceof m){if(!1===
e.isString(ma))throw Error("Dictionary accessor must be a string");if(!0===ea.hasField(ma))ea.setField(ma,M(fa,pa.operator,ea.field(ma),pa));else{if("\x3d"!==pa.operator)throw Error("Invalid Parameter");ea.setField(ma,M(fa,pa.operator,null,pa))}}else if(e.isFeature(ea)){if(!1===e.isString(ma))throw Error("Feature accessor must be a string");if(!0===ea.hasField(ma))ea.setField(ma,M(fa,pa.operator,ea.field(ma),pa));else{if("\x3d"!==pa.operator)throw Error("Invalid Parameter");ea.setField(ma,M(fa,pa.operator,
null,pa))}}else{if(e.isImmutableArray(ea))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var wa=e.voidOperation}else if(ea=pa.left.name.toLowerCase(),null!==ta.localScope&&void 0!==ta.localScope[ea])ta.localScope[ea]={value:M(fa,pa.operator,ta.localScope[ea].value,pa),valueset:!0,node:pa.right},wa=e.voidOperation;else if(void 0!==ta.globalScope[ea])ta.globalScope[ea]={value:M(fa,pa.operator,ta.globalScope[ea].value,pa),valueset:!0,node:pa.right},wa=e.voidOperation;else throw Error("Variable not recognised");
return wa;case "UpdateExpression":ea=null;ma="";if("MemberExpression"===pa.argument.type){ea=J(ta,pa.argument.object);!0===pa.argument.computed?ma=J(ta,pa.argument.property):"Identifier"===pa.argument.property.type&&(ma=pa.argument.property.name);if(e.isArray(ea))if(e.isNumber(ma)){0>ma&&(ma=ea.length+ma);if(0>ma||ma>=ea.length)throw Error("Assignment outside of array bounds");var Ea=e.toNumber(ea[ma]);ea[ma]="++"===pa.operator?Ea+1:Ea-1}else throw Error("Invalid Parameter");else if(ea instanceof
m){if(!1===e.isString(ma))throw Error("Dictionary accessor must be a string");if(!0===ea.hasField(ma))Ea=e.toNumber(ea.field(ma)),ea.setField(ma,"++"===pa.operator?Ea+1:Ea-1);else throw Error("Invalid Parameter");}else if(e.isFeature(ea)){if(!1===e.isString(ma))throw Error("Feature accessor must be a string");if(!0===ea.hasField(ma))Ea=e.toNumber(ea.field(ma)),ea.setField(ma,"++"===pa.operator?Ea+1:Ea-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(ea))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var Ha=!1===pa.prefix?Ea:"++"===pa.operator?Ea+1:Ea-1}else{ea="Identifier"===pa.argument.type?pa.argument.name.toLowerCase():"";if(!ea)throw Error("Invalid identifier");if(null!==ta.localScope&&void 0!==ta.localScope[ea])Ea=e.toNumber(ta.localScope[ea].value),ta.localScope[ea]={value:"++"===pa.operator?Ea+1:Ea-1,valueset:!0,node:pa},Ha=!1===pa.prefix?Ea:"++"===pa.operator?Ea+1:Ea-1;else if(void 0!==ta.globalScope[ea])Ea=e.toNumber(ta.globalScope[ea].value),ta.globalScope[ea]=
{value:"++"===pa.operator?Ea+1:Ea-1,valueset:!0,node:pa},Ha=!1===pa.prefix?Ea:"++"===pa.operator?Ea+1:Ea-1;else throw Error("Variable not recognised");}return Ha;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "TemplateElement":return pa.value?pa.value.cooked:"";case "TemplateLiteral":var La="",Ya=0;wa=0;for(ea=pa.quasis;wa<ea.length;wa++)if(ma=ea[wa],La+=ma.value?ma.value.cooked:"",!1===ma.tail){var Xa=pa.expressions[Ya]?e.toString(J(ta,pa.expressions[Ya])):
"";La+=Xa;Ya++}return La;case "ForStatement":null!==pa.init&&J(ta,pa.init);Ya={testResult:!0,lastAction:e.voidOperation};do b:{ea=ta;ma=pa;Xa=Ya;if(null!==ma.test){Xa.testResult=J(ea,ma.test);if(!1===Xa.testResult)break b;if(!0!==Xa.testResult)throw Error(d.nodeErrorMessage(ma,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Xa.lastAction=J(ea,ma.body);Xa.lastAction===e.breakResult?Xa.testResult=!1:Xa.lastAction instanceof e.ReturnResult?Xa.testResult=!1:null!==ma.update&&J(ea,ma.update)}while(!0===
Ya.testResult);La=Ya.lastAction instanceof e.ReturnResult?Ya.lastAction:e.voidOperation;return La;case "ForInStatement":return L(ta,pa);case "Identifier":return U(ta,pa);case "MemberExpression":return O(ta,pa);case "Literal":return pa.value;case "CallExpression":return X(ta,pa);case "UnaryExpression":return Y(ta,pa);case "BinaryExpression":return ba(ta,pa);case "LogicalExpression":return ha(ta,pa);case "ArrayExpression":try{for(ea=[],ma=0;ma<pa.elements.length;ma++){var Ta=J(ta,pa.elements[ma]);if(e.isFunctionParameter(Ta))throw Error(d.nodeErrorMessage(pa,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Ta===e.voidOperation?ea.push(null):ea.push(Ta)}}catch(gb){throw gb;}return ea;case "ObjectExpression":ea={};for(ma=0;ma<pa.properties.length;ma++){var eb=J(ta,pa.properties[ma]);if(e.isFunctionParameter(eb.value))throw Error("Illegal Argument");if(!1===e.isString(eb.key))throw Error("Illegal Argument");ea[eb.key.toString()]=eb.value===e.voidOperation?null:eb.value}var db=new m(ea);db.immutable=!1;return db;case "Property":return{key:"Identifier"===pa.key.type?
pa.key.name:J(ta,pa.key),value:J(ta,pa.value)};default:throw Error(d.nodeErrorMessage(pa,"RUNTIME","UNREOGNISED"));}}catch(gb){throw gb;}}function L(ta,pa){var Aa=J(ta,pa.right);"VariableDeclaration"===pa.left.type&&J(ta,pa.left);var T=null,ea="";if("VariableDeclaration"===pa.left.type){var na=pa.left.declarations[0].id;"Identifier"===na.type&&(ea=na.name)}else"Identifier"===pa.left.type&&(ea=pa.left.name);if(!ea)throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDVARIABLE"));ea=ea.toLowerCase();
null!==ta.localScope&&void 0!==ta.localScope[ea]&&(T=ta.localScope[ea]);null===T&&void 0!==ta.globalScope[ea]&&(T=ta.globalScope[ea]);if(null===T)throw Error(d.nodeErrorMessage(pa,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(Aa)||e.isString(Aa)){Aa=Aa.length;for(na=0;na<Aa;na++){T.value=na;ea=J(ta,pa.body);if(ea===e.breakResult)break;if(ea instanceof e.ReturnResult)return ea}return e.voidOperation}if(e.isImmutableArray(Aa)){for(na=0;na<Aa.length();na++){T.value=na;ea=J(ta,pa.body);if(ea===e.breakResult)break;
if(ea instanceof e.ReturnResult)return ea}return e.voidOperation}if(Aa instanceof m||e.isFeature(Aa))for(Aa=Aa.keys(),na=0;na<Aa.length;na++){T.value=Aa[na];ea=J(ta,pa.body);if(ea===e.breakResult)break;if(ea instanceof e.ReturnResult)return ea}else return e.voidOperation}function M(ta,pa,Aa,T){switch(pa){case "\x3d":return ta===e.voidOperation?null:ta;case "/\x3d":return e.toNumber(Aa)/e.toNumber(ta);case "*\x3d":return e.toNumber(Aa)*e.toNumber(ta);case "-\x3d":return e.toNumber(Aa)-e.toNumber(ta);
case "+\x3d":return e.isString(Aa)||e.isString(ta)?e.toString(Aa)+e.toString(ta):e.toNumber(Aa)+e.toNumber(ta);case "%\x3d":return e.toNumber(Aa)%e.toNumber(ta);default:throw Error(d.nodeErrorMessage(T,"RUNTIME","OPERATORNOTRECOGNISED"));}}function N(ta,pa,Aa){pa=pa.toLowerCase();switch(pa){case "hasz":return ta=ta.hasZ,void 0===ta?!1:ta;case "hasm":return ta=ta.hasM,void 0===ta?!1:ta;case "spatialreference":return pa=ta.spatialReference._arcadeCacheId,void 0===pa&&(Aa=!0,Object.freeze&&Object.isFrozen(ta.spatialReference)&&
(Aa=!1),Aa&&(Ba++,pa=ta.spatialReference._arcadeCacheId=Ba)),ta=new m({wkt:ta.spatialReference.wkt,wkid:ta.spatialReference.wkid}),void 0!==pa&&(ta._arcadeCacheId="SPREF"+pa.toString()),ta}switch(ta.type){case "extent":switch(pa){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ta=ta[pa],void 0!==ta?ta:null;case "type":return"Extent"}break;case "polygon":switch(pa){case "rings":return pa=ta.getCacheValue("_arcadeCacheId"),void 0===pa&&(Ba++,pa=
Ba,ta.setCacheValue("_arcadeCacheId",pa)),ta=new b(ta.rings,ta.spatialReference,!0===ta.hasZ,!0===ta.hasM,pa);case "type":return"Polygon"}break;case "point":switch(pa){case "x":case "y":case "z":case "m":return void 0!==ta[pa]?ta[pa]:null;case "type":return"Point"}break;case "polyline":switch(pa){case "paths":return pa=ta.getCacheValue("_arcadeCacheId"),void 0===pa&&(Ba++,pa=Ba,ta.setCacheValue("_arcadeCacheId",pa)),ta=new b(ta.paths,ta.spatialReference,!0===ta.hasZ,!0===ta.hasM,pa);case "type":return"Polyline"}break;
case "multipoint":switch(pa){case "points":return pa=ta.getCacheValue("_arcadeCacheId"),void 0===pa&&(Ba++,pa=Ba,ta.setCacheValue("_arcadeCacheId",pa)),ta=new g(ta.points,ta.spatialReference,!0===ta.hasZ,!0===ta.hasM,pa,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(Aa,"RUNTIME","PROPERTYNOTFOUND"));}function O(ta,pa){try{var Aa=J(ta,pa.object);if(null===Aa)throw Error(d.nodeErrorMessage(pa,"RUNTIME","NOTFOUND"));if(!1===pa.computed){if("Identifier"===pa.property.type){if(Aa instanceof
m||e.isFeature(Aa))return Aa.field(pa.property.name);if(Aa instanceof u)return N(Aa,pa.property.name,pa)}throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDTYPE"));}var T=J(ta,pa.property);if(Aa instanceof m||e.isFeature(Aa)){if(e.isString(T))return Aa.field(T);throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDTYPE"));}if(Aa instanceof u){if(e.isString(T))return N(Aa,T,pa);throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDTYPE"));}if(e.isArray(Aa)){if(e.isNumber(T)&&isFinite(T)&&Math.floor(T)===
T){0>T&&(T=Aa.length+T);if(T>=Aa.length||0>T)throw Error(d.nodeErrorMessage(pa,"RUNTIME","OUTOFBOUNDS"));return Aa[T]}throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDTYPE"));}if(e.isString(Aa)){if(e.isNumber(T)&&isFinite(T)&&Math.floor(T)===T){0>T&&(T=Aa.length+T);if(T>=Aa.length||0>T)throw Error(d.nodeErrorMessage(pa,"RUNTIME","OUTOFBOUNDS"));return Aa[T]}throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(Aa)&&e.isNumber(T)&&isFinite(T)&&Math.floor(T)===T){0>T&&
(T=Aa.length()+T);if(T>=Aa.length()||0>T)throw Error(d.nodeErrorMessage(pa,"RUNTIME","OUTOFBOUNDS"));return Aa.get(T)}throw Error(d.nodeErrorMessage(pa,"RUNTIME","INVALIDTYPE"));}catch(ea){throw ea;}}function Y(ta,pa){try{var Aa=J(ta,pa.argument);if(e.isBoolean(Aa)){if("!"===pa.operator)return!Aa;if("-"===pa.operator)return-1*e.toNumber(Aa);if("+"===pa.operator)return 1*e.toNumber(Aa);if("~"===pa.operator)return~e.toNumber(Aa);throw Error(d.nodeErrorMessage(pa,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));
}if("~"===pa.operator)return~e.toNumber(Aa);if("-"===pa.operator)return-1*e.toNumber(Aa);if("+"===pa.operator)return 1*e.toNumber(Aa);throw Error(d.nodeErrorMessage(pa,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(T){throw T;}}function ba(ta,pa){try{var Aa=[J(ta,pa.left),J(ta,pa.right)],T=Aa[0],ea=Aa[1];switch(pa.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return e.binaryOperator(e.toNumber(T),e.toNumber(ea),pa.operator);case "\x3d\x3d":return e.equalityTest(T,
ea);case "!\x3d":return!e.equalityTest(T,ea);case "\x3c":return e.greaterThanLessThan(T,ea,pa.operator);case "\x3e":return e.greaterThanLessThan(T,ea,pa.operator);case "\x3c\x3d":return e.greaterThanLessThan(T,ea,pa.operator);case "\x3e\x3d":return e.greaterThanLessThan(T,ea,pa.operator);case "+":return e.isString(T)||e.isString(ea)?e.toString(T)+e.toString(ea):e.toNumber(T)+e.toNumber(ea);case "-":return e.toNumber(T)-e.toNumber(ea);case "*":return e.toNumber(T)*e.toNumber(ea);case "/":return e.toNumber(T)/
e.toNumber(ea);case "%":return e.toNumber(T)%e.toNumber(ea);default:throw Error(d.nodeErrorMessage(pa,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(na){throw na;}}function ha(ta,pa){try{if("AssignmentExpression"===pa.left.type||"UpdateExpression"===pa.left.type)throw Error(d.nodeErrorMessage(pa.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===pa.right.type||"UpdateExpression"===pa.right.type)throw Error(d.nodeErrorMessage(pa.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var Aa=J(ta,pa.left);if(e.isBoolean(Aa))switch(pa.operator){case "||":if(!0===Aa)return Aa;var T=J(ta,pa.right);if(e.isBoolean(T))return T;throw Error(d.nodeErrorMessage(pa,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===Aa)return Aa;T=J(ta,pa.right);if(e.isBoolean(T))return T;throw Error(d.nodeErrorMessage(pa,"RUNTIME","ONLYORORAND"));default:throw Error(d.nodeErrorMessage(pa,"RUNTIME","ONLYORORAND"));}throw Error(d.nodeErrorMessage(pa,"RUNTIME","ONLYBOOLEAN"));}catch(ea){throw ea;}}function U(ta,
pa){try{var Aa=pa.name.toLowerCase();if(null!==ta.localScope&&void 0!==ta.localScope[Aa]){var T=ta.localScope[Aa];if(!0===T.valueset)return T.value;T.value=J(ta,T.node);T.valueset=!0;return T.value}if(void 0!==ta.globalScope[Aa]){T=ta.globalScope[Aa];if(!0===T.valueset)return T.value;T.value=J(ta,T.node);T.valueset=!0;return T.value}throw Error(d.nodeErrorMessage(pa,"RUNTIME","VARIABLENOTFOUND"));}catch(ea){throw ea;}}function X(ta,pa){try{if("Identifier"!==pa.callee.type)throw Error(d.nodeErrorMessage(pa,
"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ta.localScope&&void 0!==ta.localScope[pa.callee.name.toLowerCase()]){var Aa=ta.localScope[pa.callee.name.toLowerCase()];if(Aa.value instanceof e.NativeFunction)return Aa.value.fn(ta,pa);if(Aa.value instanceof l)return Ca(ta,pa,Aa.value.definition);throw Error(d.nodeErrorMessage(pa,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ta.globalScope[pa.callee.name.toLowerCase()]){Aa=ta.globalScope[pa.callee.name.toLowerCase()];if(Aa.value instanceof e.NativeFunction)return Aa.value.fn(ta,
pa);if(Aa.value instanceof l)return Ca(ta,pa,Aa.value.definition);throw Error(d.nodeErrorMessage(pa,"RUNTIME","NOTAFUNCTION"));}throw Error(d.nodeErrorMessage(pa,"RUNTIME","NOTFOUND"));}catch(T){throw T;}}function Z(ta){return null==ta?"":e.isArray(ta)||e.isImmutableArray(ta)?"Array":e.isDate(ta)?"Date":e.isString(ta)?"String":e.isBoolean(ta)?"Boolean":e.isNumber(ta)?"Number":ta instanceof f?"Attachment":ta instanceof r?"Portal":ta instanceof m?"Dictionary":e.isFeature(ta)?"Feature":ta instanceof
A?"Point":ta instanceof E?"Polygon":ta instanceof G?"Polyline":ta instanceof w?"Multipoint":ta instanceof x?"Extent":e.isFunctionParameter(ta)?"Function":e.isFeatureSet(ta)?"FeatureSet":e.isFeatureSetCollection(ta)?"FeatureSetCollection":ta===e.voidOperation?"":"number"===typeof ta&&isNaN(ta)?"Number":"Unrecognised Type"}function P(ta,pa,Aa,T){try{var ea=J(ta,pa.arguments[Aa]);if(e.equalityTest(ea,T))return J(ta,pa.arguments[Aa+1]);var na=pa.arguments.length-Aa;return 1===na?J(ta,pa.arguments[Aa]):
2===na?null:3===na?J(ta,pa.arguments[Aa+2]):P(ta,pa,Aa+2,T)}catch(V){throw V;}}function da(ta,pa,Aa,T){try{if(!0===T)return J(ta,pa.arguments[Aa+1]);if(3===pa.arguments.length-Aa)return J(ta,pa.arguments[Aa+2]);var ea=J(ta,pa.arguments[Aa+2]);if(!1===e.isBoolean(ea))throw Error("WHEN needs boolean test conditions");return da(ta,pa,Aa+2,ea)}catch(na){throw na;}}function ia(ta,pa){var Aa=ta.length,T=Math.floor(Aa/2);if(0===Aa)return[];if(1===Aa)return[ta[0]];var ea=ia(ta.slice(0,T),pa);Aa=ia(ta.slice(T,
Aa),pa);for(T=[];0<ea.length||0<Aa.length;)if(0<ea.length&&0<Aa.length){var na=pa(ea[0],Aa[0]);isNaN(na)&&(na=0);0>=na?(T.push(ea[0]),ea=ea.slice(1)):(T.push(Aa[0]),Aa=Aa.slice(1))}else 0<ea.length?(T.push(ea[0]),ea=ea.slice(1)):0<Aa.length&&(T.push(Aa[0]),Aa=Aa.slice(1));return T}function xa(ta,pa,Aa){try{var T=ta.body;if(Aa.length!==ta.params.length)throw Error("Invalid Parameter calls to function.");for(var ea=0;ea<Aa.length;ea++)pa.localScope[ta.params[ea].name.toLowerCase()]={value:Aa[ea],valueset:!0,
node:null};var na=J(pa,T);if(na instanceof e.ReturnResult)return na.value;if(na===e.breakResult)throw Error("Cannot Break from a Function");if(na===e.continueResult)throw Error("Cannot Continue from a Function");return na instanceof e.ImplicitResult?na.value:na}catch(V){throw V;}}function Ca(ta,pa,Aa){return I(ta,pa,function(T,ea,na){T={spatialReference:ta.spatialReference,globalScope:ta.globalScope,depthCounter:ta.depthCounter+1,console:ta.console,lrucache:ta.lrucache,interceptor:ta.interceptor,
localScope:{}};if(64<T.depthCounter)throw Error("Exceeded maximum function depth");return xa(Aa,T,na)})}function Fa(ta){return function(){var pa={spatialReference:ta.context.spatialReference,console:ta.context.console,lrucache:ta.context.lrucache,interceptor:ta.context.interceptor,localScope:{},depthCounter:ta.context.depthCounter+1,globalScope:ta.context.globalScope};if(64<pa.depthCounter)throw Error("Exceeded maximum function depth");return xa(ta.definition,pa,arguments)}}function Ma(ta){}function Sa(ta){for(var pa=
{mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:I,evaluateIdentifier:U,arcadeCustomFunctionHandler:Fa},Aa=0;Aa<ta.length;Aa++)ta[Aa].registerFunctions(pa);for(var T in pa.functions)ca[T]={value:new e.NativeFunction(pa.functions[T]),valueset:!0,node:null},ya.prototype[T]=ca[T];for(Aa=0;Aa<pa.signatures.length;Aa++)d.addFunctionDeclaration(pa.signatures[Aa],"async")}Object.defineProperty(B,"__esModule",{value:!0});B.findFunctionCalls=B.referencesFunction=B.referencesMember=B.validateScript=
B.extractExpectedFieldLiterals=B.extractFieldLiterals=B.executeScript=B.extend=B.functionHelper=void 0;var Ba=0,ca={};t.registerFunctions(ca,I);F.registerFunctions(ca,I);y.registerFunctions(ca,I);z.registerFunctions(ca,I);C.registerFunctions(ca,I);v.registerFunctions(ca,I);ca["typeof"]=function(ta,pa){return I(ta,pa,function(Aa,T,ea){e.pcCheck(ea,1,1);Aa=Z(ea[0]);if("Unrecognised Type"===Aa)throw Error("Unrecognised Type");return Aa})};ca.iif=function(ta,pa){try{e.pcCheck(null===pa.arguments?[]:pa.arguments,
3,3);var Aa=J(ta,pa.arguments[0]);if(!1===e.isBoolean(Aa))throw Error("IF Function must have a boolean test condition");var T=J(ta,pa.arguments[1]),ea=J(ta,pa.arguments[2]);return!0===Aa?T:ea}catch(na){throw na;}};ca.decode=function(ta,pa){try{if(2>pa.arguments.length)throw Error("Missing Parameters");if(2===pa.arguments.length)return J(ta,pa.arguments[1]);if(0===(pa.arguments.length-1)%2)throw Error("Must have a default value result.");var Aa=J(ta,pa.arguments[0]);return P(ta,pa,1,Aa)}catch(T){throw T;
}};ca.when=function(ta,pa){try{if(3>pa.arguments.length)throw Error("Missing Parameters");if(0===pa.arguments.length%2)throw Error("Must have a default value result.");var Aa=J(ta,pa.arguments[0]);if(!1===e.isBoolean(Aa))throw Error("WHEN needs boolean test conditions");return da(ta,pa,0,Aa)}catch(T){throw T;}};ca.top=function(ta,pa){return I(ta,pa,function(Aa,T,ea){e.pcCheck(ea,2,2);if(e.isArray(ea[0]))return e.toNumber(ea[1])>=ea[0].length?ea[0].slice(0):ea[0].slice(0,e.toNumber(ea[1]));if(e.isImmutableArray(ea[0]))return e.toNumber(ea[1])>=
ea[0].length()?ea[0].slice(0):ea[0].slice(0,e.toNumber(ea[1]));throw Error("Top cannot accept this parameter type");})};ca.first=function(ta,pa){return I(ta,pa,function(Aa,T,ea){e.pcCheck(ea,1,1);return e.isArray(ea[0])?0===ea[0].length?null:ea[0][0]:e.isImmutableArray(ea[0])?0===ea[0].length()?null:ea[0].get(0):null})};ca.sort=function(ta,pa){return I(ta,pa,function(Aa,T,ea){e.pcCheck(ea,1,2);Aa=ea[0];e.isImmutableArray(Aa)&&(Aa=Aa.toArray());if(!1===e.isArray(Aa))throw Error("Illegal Argument");
if(1<ea.length){if(!1===e.isFunctionParameter(ea[1]))throw Error("Illegal Argument");var na=Fa(ea[1]);return Aa=ia(Aa,function(Ja,Da){return na(Ja,Da)})}if(0===Aa.length)return[];ea={};for(T=0;T<Aa.length;T++){var V=Z(Aa[T]);""!==V&&(ea[V]=!0)}if(!0===ea.Array||!0===ea.Dictionary||!0===ea.Feature||!0===ea.Point||!0===ea.Polygon||!0===ea.Polyline||!0===ea.Multipoint||!0===ea.Extent||!0===ea.Function)return Aa.slice(0);T=0;V="";for(var Ia in ea)T++,V=Ia;return Aa=1<T||"String"===V?ia(Aa,function(Ja,
Da){if(null===Ja||void 0===Ja||Ja===e.voidOperation)return null===Da||void 0===Da||Da===e.voidOperation?0:1;if(null===Da||void 0===Da||Da===e.voidOperation)return-1;var W=e.toString(Ja),oa=e.toString(Da);return W<oa?-1:W===oa?0:1}):"Number"===V?ia(Aa,function(Ja,Da){return Ja-Da}):"Boolean"===V?ia(Aa,function(Ja,Da){return Ja===Da?0:Da?-1:1}):"Date"===V?ia(Aa,function(Ja,Da){return Da-Ja}):Aa.slice(0)})};for(var ua in ca)ca[ua]={value:new e.NativeFunction(ca[ua]),valueset:!0,node:null};var ya=function(){};
ya.prototype=ca;ya.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ya.prototype.pi={value:Math.PI,valueset:!0,node:null};B.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:K,standardFunction:I};B.extend=Sa;Sa([h]);B.executeScript=function(ta,pa){var Aa=pa.spatialReference;if(null===Aa||void 0===Aa)Aa=new H({wkid:102100});var T=pa.vars,ea=pa.customfunctions,na=new ya;T||(T={});ea||(ea={});var V=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',
forwardslash:"/",backwardslash:"\\"});V.immutable=!1;na.textformatting={value:V,valueset:!0,node:null};for(var Ia in ea)na[Ia]={value:new e.NativeFunction(ea[Ia]),"native":!0,valueset:!0,node:null};for(Ia in T)na[Ia]=T[Ia]&&"esri.Graphic"===T[Ia].declaredClass?{value:q.createFromGraphic(T[Ia]),valueset:!0,node:null}:{value:T[Ia],valueset:!0,node:null};Aa=J({spatialReference:Aa,globalScope:na,localScope:null,console:pa.console?pa.console:Ma,lrucache:pa.lrucache,interceptor:pa.interceptor,depthCounter:1},
ta.body[0].body);Aa instanceof e.ReturnResult&&(Aa=Aa.value);Aa instanceof e.ImplicitResult&&(Aa=Aa.value);Aa===e.voidOperation&&(Aa=null);if(Aa===e.breakResult)throw Error("Cannot return BREAK");if(Aa===e.continueResult)throw Error("Cannot return CONTINUE");if(Aa instanceof l)throw Error("Cannot return FUNCTION");if(Aa instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return Aa};B.extractFieldLiterals=function(ta,pa){void 0===pa&&(pa=!1);return d.findFieldLiterals(ta)};B.extractExpectedFieldLiterals=
function(ta){return d.findExpectedFieldLiterals(ta)};B.validateScript=function(ta,pa){return d.validateScript(ta,pa,"simple")};B.referencesMember=function(ta,pa){return d.referencesMember(ta,pa)};B.referencesFunction=function(ta,pa){return d.referencesFunction(ta,pa)};B.findFunctionCalls=function(ta){return d.findFunctionCalls(ta)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});
B.referencesFunction=B.referencesMember=B.extractExpectedFieldLiterals=B.validateScript=B.extractFieldLiterals=B.scriptCheck=B.parseScript=void 0;B.parseScript=function(k,n){void 0===n&&(n=[]);var r=c.parse("function _() { "+k+"\n}");if(null===r.body||void 0===r.body)throw Error("No formula provided.");if(0===r.body.length)throw Error("No formula provided.");if(0===r.body.length)throw Error("No formula provided.");if("BlockStatement"!==r.body[0].body.type)throw Error("Invalid formula content.");var f=
a.validateLanguage(r);if(""!==f)throw Error(f);a.findScriptDependencies(r,n);return r};B.scriptCheck=function(k,n,r,f,m){var q=[];k="function _() { \n"+k+"\n}";try{var l=c.parse(k,{tolerant:!0,loc:!0,range:!0}),b=l.errors;if(0<b.length)for(var g=0;g<b.length;g++)q.push({line:b[g].lineNumber-2,character:b[g].column,reason:b[g].description});var e=a.checkScript(l,n,r,f,m);for(n=0;n<e.length;n++)e[n].line-=2,e[n].range&&(e[n].range=[e[n][0]-15,e[n][1]-15]),e[n].loc&&(e[n].loc.start.line-=2,e[n].loc.end.line-=
2),q.push(e[n])}catch(h){try{if("Unexpected token }"===h.description){var d=k.split("\n").length;h.lineNumber===d?(h.index=k.length-1,q.push({line:h.lineNumber-4,character:h.column,reason:"Unexpected end of script"})):(h.index=k.length-1,q.push({line:h.lineNumber-2,character:h.column,reason:"Unexpected end of script"}))}else q.push({line:h.lineNumber-2,character:h.column,reason:h.description})}catch(t){}}return q};B.extractFieldLiterals=function(k,n){void 0===n&&(n=!1);return a.findFieldLiterals(k)};
B.validateScript=function(k,n,r){return a.validateScript(k,n,r)};B.extractExpectedFieldLiterals=function(k){return a.findExpectedFieldLiterals(k)};B.referencesMember=function(k,n){return a.referencesMember(k,n)};B.referencesFunction=function(k,n){return a.referencesFunction(k,n)}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(D,B,a,c,k,n,r,f,m){Object.defineProperty(B,
"__esModule",{value:!0});B.version=B.Syntax=B.tokenize=B.parse=void 0;B.parse=function(q,l,b){var g=null,e=function(z,v){b&&b(z,v);g&&g.visit(z,v)},d="function"===typeof b?e:void 0,h=!1;if(l){h="boolean"===typeof l.comment&&l.comment;var t="boolean"===typeof l.attachComment&&l.attachComment;if(h||t)g=new c.CommentHandler,g.attach=t,l.comment=!0,d=e}q=new k.Parser(q,l,d);l=q.parseScript();h&&g&&(l.comments=g.comments);q.config.tokens&&(l.tokens=q.tokens);q.config.tolerant&&(l.errors=q.errorHandler.errors);
return l};B.tokenize=function(q,l,b){q=new n.Tokenizer(q,l);l=[];var g=void 0;try{for(;;){var e=q.getNextToken();if(!e)break;b&&(e=b(e));l.push(e)}}catch(d){q.errorHandler.tolerate(d)}q.errorHandler.tolerant&&(g=q.errors());return{tokens:l,errors:g}};Object.defineProperty(B,"Syntax",{enumerable:!0,get:function(){return r.Syntax}});a(f,B);a(m,B);B.version="4.0.0-dev"})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var D=this&&this.__createBinding||(Object.create?
function(B,a,c,k){void 0===k&&(k=c);Object.defineProperty(B,k,{enumerable:!0,get:function(){return a[c]}})}:function(B,a,c,k){void 0===k&&(k=c);B[k]=a[c]});return function(B,a){for(var c in B)"default"===c||Object.prototype.hasOwnProperty.call(a,c)||D(a,B,c)}}()})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(D,B,a){Object.defineProperty(B,"__esModule",{value:!0});B.CommentHandler=void 0;D=function(){function c(){this.attach=!1;this.comments=[];this.stack=
[];this.leading=[];this.trailing=[]}c.prototype.insertInnerComments=function(k,n){if(k.type===a.Syntax.BlockStatement&&0===k.body.length){for(var r=[],f=this.leading.length-1;0<=f;--f){var m=this.leading[f];n.end.offset>=m.start&&(r.unshift(m.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}r.length&&(k.innerComments=r)}};c.prototype.findTrailingComments=function(k){var n=[];if(0<this.trailing.length){for(var r=this.trailing.length-1;0<=r;--r){var f=this.trailing[r];f.start>=k.end.offset&&
n.unshift(f.comment)}this.trailing.length=0;return n}(r=this.stack[this.stack.length-1])&&r.node.trailingComments&&(f=r.node.trailingComments[0])&&f.range[0]>=k.end.offset&&(n=r.node.trailingComments,delete r.node.trailingComments);return n};c.prototype.findLeadingComments=function(k){for(var n=[],r;0<this.stack.length;){var f=this.stack[this.stack.length-1];if(f&&f.start>=k.start.offset)r=f.node,this.stack.pop();else break}if(r){for(var m=(r.leadingComments?r.leadingComments.length:0)-1;0<=m;--m)f=
r.leadingComments[m],f.range[1]<=k.start.offset&&(n.unshift(f),r.leadingComments.splice(m,1));r.leadingComments&&0===r.leadingComments.length&&delete r.leadingComments;return n}for(m=this.leading.length-1;0<=m;--m)f=this.leading[m],f.start<=k.start.offset&&(n.unshift(f.comment),this.leading.splice(m,1));return n};c.prototype.visitNode=function(k,n){if(!(k.type===a.Syntax.Program&&0<k.body.length)){this.insertInnerComments(k,n);var r=this.findTrailingComments(n),f=this.findLeadingComments(n);0<f.length&&
(k.leadingComments=f);0<r.length&&(k.trailingComments=r);this.stack.push({node:k,start:n.start.offset})}};c.prototype.visitComment=function(k,n){this.comments.push(k);if(this.attach){var r={comment:{type:k.type,value:k.value,range:[n.start.offset,n.end.offset]},start:n.start.offset};k.loc&&(r.comment.loc=k.loc);this.leading.push(r);this.trailing.push(r)}};c.prototype.visit=function(k,n){"Line"===k.type||"Block"===k.type?this.visitComment(k,n):this.attach&&this.visitNode(k,n)};return c}();B.CommentHandler=
D})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.Syntax=void 0;B.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",
ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",
VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){Object.defineProperty(B,"__esModule",{value:!0});B.Parser=void 0;D=function(){function g(e,d,h){void 0===d&&(d={});this.config={range:"boolean"===
typeof d.range&&d.range,loc:"boolean"===typeof d.loc&&d.loc,source:null,tokens:"boolean"===typeof d.tokens&&d.tokens,comment:"boolean"===typeof d.comment&&d.comment,tolerant:"boolean"===typeof d.tolerant&&d.tolerant,globalReturn:!!d.globalReturn};this.config.loc&&d.source&&null!==d.source&&(this.config.source=String(d.source));this.delegate=h;this.errorHandler=new r.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new q.Scanner(e,this.errorHandler);this.scanner.trackComment=
this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:b.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,
isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}g.prototype.tolerateError=function(e){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var t=d.slice();d=e.replace(/%(\d)/g,function(z,
v){n.assert(v<t.length,"Message reference must be in range");return t[v]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,d)};g.prototype.unexpectedTokenError=function(e,d){var h=d||f.Messages.UnexpectedToken;if(e){d||(h=e.type===b.TokenType.EOF?f.Messages.UnexpectedEOS:e.type===b.TokenType.Identifier?f.Messages.UnexpectedIdentifier:e.type===b.TokenType.NumericLiteral?f.Messages.UnexpectedNumber:e.type===b.TokenType.StringLiteral?f.Messages.UnexpectedString:
e.type===b.TokenType.Template?f.Messages.UnexpectedTemplate:f.Messages.UnexpectedToken);var t=e.value.toString()}else t="ILLEGAL";h=h.replace("%0",t);return e&&"number"===typeof e.lineNumber?this.errorHandler.createError(e.start,e.lineNumber,e.start-(this.lastMarker.index-this.lastMarker.column)+1,h):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,h)};g.prototype.throwUnexpectedToken=function(e,d){throw this.unexpectedTokenError(e,d);};g.prototype.tolerateUnexpectedToken=
function(e,d){this.errorHandler.tolerate(this.unexpectedTokenError(e,d))};g.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e&&0<e.length&&this.delegate)for(var d=0;d<e.length;++d){var h=e[d],t=new m.Comment(h.multiLine?"Block":"Line",this.scanner.source.slice(h.slice[0],h.slice[1]));this.config.range&&(t.range=h.range);this.config.loc&&(t.loc=h.loc);this.delegate(t,{start:{line:h.loc.start.line,column:h.loc.start.column,offset:h.range[0]},end:{line:h.loc.end.line,
column:h.loc.end.column,offset:h.range[1]}})}}else this.scanner.scanComments()};g.prototype.peekAhead=function(e){var d=this,h=this.scanner.saveState();e.call(this,function(){d.scanner.scanComments();return d.scanner.lex()});this.scanner.restoreState(h)};g.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)};g.prototype.convertToken=function(e){var d={type:b.TokenName[e.type],value:this.getTokenRaw(e)};this.config.range&&(d.range=[e.start,e.end]);this.config.loc&&(d.loc=
{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});e.type===b.TokenType.RegularExpression&&(d.regex={pattern:e.pattern,flags:e.flags});return d};g.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&
(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var d=this.scanner.lex();this.hasLineTerminator=e.lineNumber!==d.lineNumber;this.lookahead=d;this.config.tokens&&d.type!==b.TokenType.EOF&&this.tokens.push(this.convertToken(d));return e};g.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};g.prototype.startNode=function(e,
d){void 0===d&&(d=0);var h=e.start-e.lineStart,t=e.lineNumber;0>h&&(h+=d,t--);return{index:e.start,line:t,column:h}};g.prototype.finalize=function(e,d){this.config.range&&(d.range=[e.index,this.lastMarker.index]);this.config.loc&&(d.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(d.loc.source=this.config.source));this.delegate&&this.delegate(d,{start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,
column:this.lastMarker.column,offset:this.lastMarker.index}});return d};g.prototype.expect=function(e){var d=this.nextToken();d.type===b.TokenType.Punctuator&&d.value===e||this.throwUnexpectedToken(d)};g.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;e.type===b.TokenType.Punctuator&&","===e.value?this.nextToken():e.type===b.TokenType.Punctuator&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,f.Messages.UnexpectedToken)}else this.expect(",")};
g.prototype.expectKeyword=function(e){var d=this.nextToken();d.type===b.TokenType.Keyword&&d.value.toString().toLowerCase()===e.toLowerCase()||this.throwUnexpectedToken(d)};g.prototype.match=function(e){return this.lookahead.type===b.TokenType.Punctuator&&this.lookahead.value===e};g.prototype.matchKeyword=function(e){return this.lookahead.type===b.TokenType.Keyword&&this.lookahead.value.toLowerCase()===e.toLowerCase()};g.prototype.matchContextualKeyword=function(e){return this.lookahead.type===b.TokenType.Identifier&&
this.lookahead.value===e};g.prototype.matchAssign=function(){return this.lookahead.type!==b.TokenType.Punctuator?!1:m.AssignmentOperators.includes(this.lookahead.value)};g.prototype.isolateCoverGrammar=function(e){var d=this.context.isBindingElement,h=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;e=e.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=d;this.context.isAssignmentTarget=h;this.context.firstCoverInitializedNameError=t;return e};g.prototype.inheritCoverGrammar=function(e){var d=this.context.isBindingElement,h=this.context.isAssignmentTarget,t=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;e=e.call(this);this.context.isBindingElement=
this.context.isBindingElement&&d;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&h;this.context.firstCoverInitializedNameError=t||this.context.firstCoverInitializedNameError;return e};g.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===b.TokenType.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=
this.startMarker.column)};g.prototype.parsePrimaryExpression=function(){var e=this.createNode();switch(this.lookahead.type){case b.TokenType.Identifier:e=this.finalize(e,new m.Identifier(this.nextToken().value));break;case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var d=this.nextToken();var h=this.getTokenRaw(d);e=this.finalize(e,new m.Literal(d.value,h));break;case b.TokenType.BooleanLiteral:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;d=this.nextToken();h=this.getTokenRaw(d);e=this.finalize(e,new m.Literal("true"===d.value.toString().toLowerCase(),h));break;case b.TokenType.NullLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;d=this.nextToken();h=this.getTokenRaw(d);e=this.finalize(e,new m.Literal(null,h));break;case b.TokenType.Template:e=this.parseTemplateLiteral();break;case b.TokenType.Punctuator:switch(this.lookahead.value){case "(":this.context.isBindingElement=
!1;e=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case b.TokenType.Keyword:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=this.throwUnexpectedToken(this.nextToken());break;default:e=this.throwUnexpectedToken(this.nextToken())}return e};g.prototype.parseArrayInitializer=
function(){var e=this.createNode(),d=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),d.push(null)):(d.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(e,new m.ArrayExpression(d))};g.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),d=this.nextToken();switch(d.type){case b.TokenType.StringLiteral:case b.TokenType.NumericLiteral:e=this.finalize(e,new m.Literal(d.value,
this.getTokenRaw(d)));break;case b.TokenType.Identifier:case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.Keyword:e=this.finalize(e,new m.Identifier(d.value));break;default:e=this.throwUnexpectedToken(d)}return e};g.prototype.parseObjectProperty=function(){var e=this.createNode(),d=this.lookahead,h=!1,t=!1,z=null;if(d.type===b.TokenType.Identifier){var v=d.value;this.nextToken();h=this.match("[");z=this.finalize(e,new m.Identifier(v))}else this.match("*")?this.nextToken():
(h=this.match("["),z=this.parseObjectPropertyKey());z||this.throwUnexpectedToken(this.lookahead);v=null;this.match(":")?(this.nextToken(),v=this.inheritCoverGrammar(this.parseAssignmentExpression)):d.type===b.TokenType.Identifier?(v=this.finalize(e,new m.Identifier(d.value)),t=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(e,new m.Property("init",z,h,v,!1,t))};g.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var d=[];!this.match("}");)d.push(this.parseObjectProperty()),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(e,new m.ObjectExpression(d))};g.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),d=this.nextToken();return this.finalize(e,new m.TemplateElement({raw:d.value,cooked:d.cooked},d.tail))};g.prototype.parseTemplateElement=function(){this.lookahead.type!==b.TokenType.Template&&this.throwUnexpectedToken();var e=this.createNode(),
d=this.nextToken();return this.finalize(e,new m.TemplateElement({raw:d.value,cooked:d.cooked},d.tail))};g.prototype.parseTemplateLiteral=function(){var e=this.createNode(),d=[],h=[],t=this.parseTemplateHead();for(h.push(t);!t.tail;)d.push(this.parseExpression()),t=this.parseTemplateElement(),h.push(t);return this.finalize(e,new m.TemplateLiteral(h,d))};g.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var e=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.expect(")");this.context.isBindingElement=!1;return e};g.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var d=this.isolateCoverGrammar(this.parseAssignmentExpression);e.push(d);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return e};g.prototype.isIdentifierName=function(e){return e.type===b.TokenType.Identifier||e.type===b.TokenType.Keyword||e.type===b.TokenType.BooleanLiteral||e.type===b.TokenType.NullLiteral};
g.prototype.parseIdentifierName=function(){var e=this.createNode(),d=this.nextToken();this.isIdentifierName(d)||this.throwUnexpectedToken(d);return this.finalize(e,new m.Identifier(d.value))};g.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,d=this.context.allowIn;this.context.allowIn=!0;for(var h=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var t=this.parseArguments();
h=this.finalize(this.startNode(e),new m.CallExpression(h,t))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),t=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),h=this.finalize(this.startNode(e),new m.ComputedMemberExpression(h,t));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),t=this.parseIdentifierName(),h=this.finalize(this.startNode(e),new m.StaticMemberExpression(h,
t));else break;this.context.allowIn=d;return h};g.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),d=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var h=this.isolateCoverGrammar(this.parseExpression);this.expect("]");d=this.finalize(e,new m.ComputedMemberExpression(d,
h))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),h=this.parseIdentifierName(),d=this.finalize(e,new m.StaticMemberExpression(d,h));else break;return d};g.prototype.parseUpdateExpression=function(){var e=this.lookahead;if(this.match("++")||this.match("--")){e=this.startNode(e);var d=this.nextToken();var h=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(f.Messages.InvalidLHSInAssignment);
h=this.finalize(e,new m.UpdateExpression(d.value,h,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else h=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||this.lookahead.type!==b.TokenType.Punctuator||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(f.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken().value,h=this.finalize(this.startNode(e),
new m.UpdateExpression(d,h,!1)));return h};g.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var e=this.startNode(this.lookahead),d=this.nextToken();var h=this.inheritCoverGrammar(this.parseUnaryExpression);h=this.finalize(e,new m.UnaryExpression(d.value,h));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else h=this.parseUpdateExpression();return h};g.prototype.binaryPrecedence=function(e){var d=e.value;return e.type===
b.TokenType.Punctuator?this.operatorPrecedence[d]||0:e.type===b.TokenType.Keyword?this.context.allowIn&&"in"===d?12:0:0};g.prototype.parseBinaryExpression=function(){var e=this.lookahead,d=this.inheritCoverGrammar(this.parseUnaryExpression),h=this.lookahead,t=this.binaryPrecedence(h);if(0<t){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=[e,this.lookahead];var z=this.inheritCoverGrammar(this.parseUnaryExpression);h=[d,h.value,z];for(var v=[t];;){t=this.binaryPrecedence(this.lookahead);
if(0>=t)break;for(;2<h.length&&t<=v[v.length-1];){z=h.pop();var y=h.pop();v.pop();d=h.pop();e.pop();var C=e[e.length-1],F=this.startNode(C,C.lineStart);h.push(this.finalize(F,new m.BinaryExpression(y,d,z)))}h.push(this.nextToken().value);v.push(t);e.push(this.lookahead);h.push(this.inheritCoverGrammar(this.parseUnaryExpression))}t=h.length-1;d=h[t];for(y=e.pop();1<t;){C=e.pop();if(!C)break;F=this.startNode(C,y&&y.lineStart);y=h[t-1];d=this.finalize(F,new m.BinaryExpression(y,h[t-2],d));t-=2;y=C}}return d};
g.prototype.parseAssignmentExpression=function(){var e=this.lookahead,d=e,h=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(f.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);d=this.nextToken();d=d.value;var t=this.isolateCoverGrammar(this.parseAssignmentExpression);h=this.finalize(this.startNode(e),new m.AssignmentExpression(d,h,t));this.context.firstCoverInitializedNameError=
null}return h};g.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};g.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(this.lookahead.type===b.TokenType.Keyword)switch(this.lookahead.value){case "function":var e=this.parseFunctionDeclaration();break;default:e=this.parseStatement()}else e=this.parseStatement();return e};g.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");
for(var d=[];!this.match("}");)d.push(this.parseStatementListItem());this.expect("}");return this.finalize(e,new m.BlockStatement(d))};g.prototype.parseObjectStatement=function(){var e=this.createNode(),d=this.parseObjectInitializer();return this.finalize(e,new m.ExpressionStatement(d))};g.prototype.parseBlockOrObjectStatement=function(){var e="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(d){var h=d();if(h.type===b.TokenType.Identifier||
h.type===b.TokenType.StringLiteral)h=d(),h.type===b.TokenType.Punctuator&&":"===h.value&&(e=!0)});return e?this.parseObjectStatement():this.parseBlock()};g.prototype.parseVariableIdentifier=function(){var e=this.createNode(),d=this.nextToken();d.type!==b.TokenType.Identifier&&this.throwUnexpectedToken(d,f.Messages.IdentiferExpected);return this.finalize(e,new m.Identifier(d.value))};g.prototype.parseVariableDeclaration=function(e){var d=this.createNode(),h=this.parseVariableIdentifier(),t=null;this.match("\x3d")?
(this.nextToken(),t=this.isolateCoverGrammar(this.parseAssignmentExpression)):h.type===l.Syntax.Identifier||e.inFor||this.expect("\x3d");return this.finalize(d,new m.VariableDeclarator(h,t))};g.prototype.parseVariableDeclarationList=function(e){for(var d=[this.parseVariableDeclaration(e)];this.match(",");)this.nextToken(),d.push(this.parseVariableDeclaration(e));return d};g.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var d=this.parseVariableDeclarationList({inFor:!1});
this.consumeSemicolon();return this.finalize(e,new m.VariableDeclaration(d,"var"))};g.prototype.parseEmptyStatement=function(){var e=this.createNode();this.expect(";");return this.finalize(e,new m.EmptyStatement)};g.prototype.parseExpressionStatement=function(){var e=this.createNode(),d=this.parseExpression();this.consumeSemicolon();return this.finalize(e,new m.ExpressionStatement(d))};g.prototype.parseIfClause=function(){var e=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";
var d=this.parseStatement();this.context.curlyParsing=e;return d};g.prototype.parseIfStatement=function(){var e=this.createNode(),d=null;this.expectKeyword("if");this.expect("(");var h=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var t=this.finalize(this.createNode(),new m.EmptyStatement)}else this.expect(")"),t=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),d=this.parseIfClause());return this.finalize(e,new m.IfStatement(h,
t,d))};g.prototype.parseForStatement=function(){var e=null,d=null,h=null,t=null,z=null,v=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var y=this.createNode();this.nextToken();var C=this.context.allowIn;this.context.allowIn=!1;var F=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=C;1===F.length&&this.matchKeyword("in")?(F[0].init&&this.tolerateError(f.Messages.ForInOfLoopInitializer,"for-in"),t=
this.finalize(y,new m.VariableDeclaration(F,"var")),this.nextToken(),z=this.parseExpression()):(e=this.finalize(y,new m.VariableDeclaration(F,"var")),this.expect(";"))}else{y=this.context.isBindingElement;F=this.context.isAssignmentTarget;var x=this.context.firstCoverInitializedNameError;C=this.context.allowIn;this.context.allowIn=!1;e=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=C;this.matchKeyword("in")?(this.context.isAssignmentTarget&&e.type!==l.Syntax.AssignmentExpression||
this.tolerateError(f.Messages.InvalidLHSInForIn),this.nextToken(),t=e,z=this.parseExpression(),e=null):(this.context.isBindingElement=y,this.context.isAssignmentTarget=F,this.context.firstCoverInitializedNameError=x,this.expect(";"))}t||(this.match(";")||(d=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(h=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),C=this.finalize(this.createNode(),
new m.EmptyStatement)):(this.expect(")"),y=this.context.inIteration,F=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",C=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=F,this.context.inIteration=y);return t&&z?this.finalize(v,new m.ForInStatement(t,z,C)):this.finalize(v,new m.ForStatement(e,d,h,C))};g.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(e,
new m.ContinueStatement)};g.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(e,new m.BreakStatement)};g.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(f.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var d=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===b.TokenType.EOF)&&this.lookahead.type!==
b.TokenType.StringLiteral&&this.lookahead.type!==b.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize(e,new m.ReturnStatement(d))};g.prototype.parseStatement=function(){switch(this.lookahead.type){case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:case b.TokenType.Template:case b.TokenType.Identifier:var e=this.parseExpressionStatement();break;case b.TokenType.Punctuator:e=this.lookahead.value;
e="{"===e?this.parseBlockOrObjectStatement():"("===e?this.parseExpressionStatement():";"===e?this.parseEmptyStatement():this.parseExpressionStatement();break;case b.TokenType.Keyword:switch(this.lookahead.value.toLowerCase()){case "break":e=this.parseBreakStatement();break;case "continue":e=this.parseContinueStatement();break;case "for":e=this.parseForStatement();break;case "function":e=this.parseFunctionDeclaration();break;case "if":e=this.parseIfStatement();break;case "return":e=this.parseReturnStatement();
break;case "var":e=this.parseVariableStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e};g.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var d=this.context.inIteration,h=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var t=[];this.lookahead.type!==b.TokenType.EOF&&!this.match("}");)t.push(this.parseStatementListItem());this.expect("}");
this.context.inIteration=d;this.context.inFunctionBody=h;return this.finalize(e,new m.BlockStatement(t))};g.prototype.parseFormalParameters=function(){var e=[];this.expect("(");if(!this.match(")"))for(;this.lookahead.type!==b.TokenType.EOF;){e.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return e};g.prototype.parseFunctionDeclaration=function(){var e=this.createNode();this.expectKeyword("function");var d=this.parseVariableIdentifier(),
h=this.parseFormalParameters(),t=this.parseFunctionSourceElements();return this.finalize(e,new m.FunctionDeclaration(d,h,t))};g.prototype.parseScript=function(){for(var e=this.createNode(),d=[];this.lookahead.type!==b.TokenType.EOF;)d.push(this.parseStatementListItem());return this.finalize(e,new m.Program(d))};return g}();B.Parser=D})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.assert=void 0;B.assert=function(a,
c){if(!a)throw Error("ASSERT: "+c);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.ErrorHandler=void 0;var a=function(){function c(){this.errors=[];this.tolerant=!1}c.prototype.recordError=function(k){this.errors.push(k)};c.prototype.tolerate=function(k){if(this.tolerant)this.recordError(k);else throw k;};c.prototype.constructError=function(k,n){var r=Error(k);try{throw r;}catch(f){Object.create&&Object.defineProperty&&
(r=Object.create(f),Object.defineProperty(r,"column",{value:n}))}return r};c.prototype.createError=function(k,n,r,f){r=this.constructError("Line "+n+": "+f,r);r.index=k;r.lineNumber=n;r.description=f;return r};c.prototype.throwError=function(k,n,r,f){throw this.createError(k,n,r,f);};c.prototype.tolerateError=function(k,n,r,f){k=this.createError(k,n,r,f);if(this.tolerant)this.recordError(k);else throw k;};return c}();B.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],
function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.Messages=void 0;B.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",
InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",
UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/extends ./syntax".split(" "),
function(D,B,a,c,k,n){Object.defineProperty(B,"__esModule",{value:!0});B.VariableDeclarator=B.VariableDeclaration=B.UpdateExpression=B.UpdateOperators=B.UnaryExpression=B.UnaryOperators=B.TemplateLiteral=B.TemplateElement=B.Program=B.ReturnStatement=B.Property=B.ObjectExpression=B.Literal=B.IfStatement=B.Identifier=B.FunctionDeclaration=B.ForStatement=B.ForInStatement=B.ExpressionStatement=B.EmptyStatement=B.ContinueStatement=B.StaticMemberExpression=B.ComputedMemberExpression=B.CallExpression=B.BreakStatement=
B.BlockStatement=B.BinaryExpression=B.BinaryOperators=B.LogicalOperators=B.AssignmentExpression=B.AssignmentOperators=B.ArrayExpression=B.Comment=void 0;D=function(){return function(){}}();a=function(r){function f(m,q){var l=r.call(this)||this;l.type=m;l.value=q;return l}k(f,r);return f}(D);B.Comment=a;a=function(r){function f(m){var q=r.call(this)||this;q.elements=m;q.type=n.Syntax.ArrayExpression;return q}k(f,r);return f}(D);B.ArrayExpression=a;B.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");
a=function(r){function f(m,q,l){var b=r.call(this)||this;b.operator=m;b.left=q;b.right=l;b.type=n.Syntax.AssignmentExpression;return b}k(f,r);return f}(D);B.AssignmentExpression=a;B.LogicalOperators=["||","\x26\x26"];B.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");a=function(r){function f(m,q,l){var b=r.call(this)||this;b.operator=m;b.left=q;b.right=l;b.type=B.LogicalOperators.includes(m)?n.Syntax.LogicalExpression:
n.Syntax.BinaryExpression;return b}k(f,r);return f}(D);B.BinaryExpression=a;a=function(r){function f(m){var q=r.call(this)||this;q.body=m;q.type=n.Syntax.BlockStatement;return q}k(f,r);return f}(D);B.BlockStatement=a;a=function(r){function f(){var m=null!==r&&r.apply(this,arguments)||this;m.type=n.Syntax.BreakStatement;return m}k(f,r);return f}(D);B.BreakStatement=a;a=function(r){function f(m,q){var l=r.call(this)||this;l.callee=m;l.args=q;l.type=n.Syntax.CallExpression;l.arguments=q;return l}k(f,
r);return f}(D);B.CallExpression=a;a=function(r){function f(m,q){var l=r.call(this)||this;l.object=m;l.property=q;l.type=n.Syntax.MemberExpression;l.computed=!0;return l}k(f,r);return f}(D);B.ComputedMemberExpression=a;a=function(r){function f(m,q){var l=r.call(this)||this;l.object=m;l.property=q;l.type=n.Syntax.MemberExpression;l.computed=!1;return l}k(f,r);return f}(D);B.StaticMemberExpression=a;a=function(r){function f(){var m=null!==r&&r.apply(this,arguments)||this;m.type=n.Syntax.ContinueStatement;
return m}k(f,r);return f}(D);B.ContinueStatement=a;a=function(r){function f(){var m=null!==r&&r.apply(this,arguments)||this;m.type=n.Syntax.EmptyStatement;return m}k(f,r);return f}(D);B.EmptyStatement=a;a=function(r){function f(m){var q=r.call(this)||this;q.expression=m;q.type=n.Syntax.ExpressionStatement;return q}k(f,r);return f}(D);B.ExpressionStatement=a;a=function(r){function f(m,q,l){var b=r.call(this)||this;b.left=m;b.right=q;b.body=l;b.type=n.Syntax.ForInStatement;b.each=!1;return b}k(f,r);
return f}(D);B.ForInStatement=a;a=function(r){function f(m,q,l,b){var g=r.call(this)||this;g.init=m;g.test=q;g.update=l;g.body=b;g.type=n.Syntax.ForStatement;return g}k(f,r);return f}(D);B.ForStatement=a;a=function(r){function f(m,q,l){var b=r.call(this)||this;b.id=m;b.params=q;b.body=l;b.type=n.Syntax.FunctionDeclaration;b.generator=!1;b.expression=!1;b.async=!1;return b}k(f,r);return f}(D);B.FunctionDeclaration=a;a=function(r){function f(m){var q=r.call(this)||this;q.name=m;q.type=n.Syntax.Identifier;
return q}k(f,r);return f}(D);B.Identifier=a;a=function(r){function f(m,q,l){var b=r.call(this)||this;b.test=m;b.consequent=q;b.alternate=l;b.type=n.Syntax.IfStatement;return b}k(f,r);return f}(D);B.IfStatement=a;a=function(r){function f(m,q){var l=r.call(this)||this;l.value=m;l.raw=q;l.type=n.Syntax.Literal;return l}k(f,r);return f}(D);B.Literal=a;a=function(r){function f(m){var q=r.call(this)||this;q.properties=m;q.type=n.Syntax.ObjectExpression;return q}k(f,r);return f}(D);B.ObjectExpression=a;
a=function(r){function f(m,q,l,b,g,e){var d=r.call(this)||this;d.kind=m;d.key=q;d.computed=l;d.value=b;d.method=g;d.shorthand=e;d.type=n.Syntax.Property;return d}k(f,r);return f}(D);B.Property=a;a=function(r){function f(m){var q=r.call(this)||this;q.argument=m;q.type=n.Syntax.ReturnStatement;return q}k(f,r);return f}(D);B.ReturnStatement=a;a=function(r){function f(m){var q=r.call(this)||this;q.body=m;q.type=n.Syntax.Program;return q}k(f,r);return f}(D);B.Program=a;a=function(r){function f(m,q){var l=
r.call(this)||this;l.value=m;l.tail=q;l.type=n.Syntax.TemplateElement;return l}k(f,r);return f}(D);B.TemplateElement=a;a=function(r){function f(m,q){var l=r.call(this)||this;l.quasis=m;l.expressions=q;l.type=n.Syntax.TemplateLiteral;return l}k(f,r);return f}(D);B.TemplateLiteral=a;B.UnaryOperators=["-","+","!","~"];a=function(r){function f(m,q){var l=r.call(this)||this;l.operator=m;l.argument=q;l.type=n.Syntax.UnaryExpression;l.prefix=!0;return l}k(f,r);return f}(D);B.UnaryExpression=a;B.UpdateOperators=
["++","--"];a=function(r){function f(m,q,l){var b=r.call(this)||this;b.operator=m;b.argument=q;b.prefix=l;b.type=n.Syntax.UpdateExpression;return b}k(f,r);return f}(D);B.UpdateExpression=a;a=function(r){function f(m,q){var l=r.call(this)||this;l.declarations=m;l.kind=q;l.type=n.Syntax.VariableDeclaration;return l}k(f,r);return f}(D);B.VariableDeclaration=a;D=function(r){function f(m,q){var l=r.call(this)||this;l.id=m;l.init=q;l.type=n.Syntax.VariableDeclarator;return l}k(f,r);return f}(D);B.VariableDeclarator=
D})},"esri/arcade/lib/scanner":function(){define("require exports ./assert ./character ./messages ./token".split(" "),function(D,B,a,c,k,n){Object.defineProperty(B,"__esModule",{value:!0});B.Scanner=void 0;D=function(){function r(f,m){this.source=f;this.errorHandler=m;this.isModule=this.trackComment=!1;this.length=f.length;this.index=0;this.lineNumber=0<f.length?1:0;this.lineStart=0;this.curlyStack=[]}r.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,
curlyStack:this.curlyStack.slice()}};r.prototype.restoreState=function(f){this.index=f.index;this.lineNumber=f.lineNumber;this.lineStart=f.lineStart;this.curlyStack=f.curlyStack};r.prototype.eof=function(){return this.index>=this.length};r.prototype.throwUnexpectedToken=function(f){void 0===f&&(f=k.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,f)};r.prototype._tolerateUnexpectedToken=function(f){void 0===f&&(f=k.Messages.UnexpectedTokenIllegal);
this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,f)};r.prototype._skipSingleLineComment=function(f){var m=[],q=0,l=null;this.trackComment&&(m=[],q=this.index-f,l={start:{line:this.lineNumber,column:this.index-this.lineStart-f},end:{line:0,column:0}});for(;!this.eof();){var b=this.source.charCodeAt(this.index);++this.index;if(c.Character.isLineTerminator(b))return l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart-1},f={multiLine:!1,slice:[q+f,this.index-
1],range:[q,this.index-1],loc:l},m.push(f)),13===b&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,m}l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!1,slice:[q+f,this.index],range:[q,this.index],loc:l},m.push(f));return m};r.prototype._skipMultiLineComment=function(){var f=[],m=0,q=null;this.trackComment&&(m=this.index-2,q={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var l=
this.source.charCodeAt(this.index);if(c.Character.isLineTerminator(l))13===l&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===l&&47===this.source.charCodeAt(this.index+1))return this.index+=2,q&&(q.end={line:this.lineNumber,column:this.index-this.lineStart},m={multiLine:!0,slice:[m+2,this.index-2],range:[m,this.index],loc:q},f.push(m)),f;++this.index}}q&&(q.end={line:this.lineNumber,column:this.index-this.lineStart},m={multiLine:!0,
slice:[m+2,this.index],range:[m,this.index],loc:q},f.push(m));this._tolerateUnexpectedToken();return f};r.prototype.scanComments=function(){var f=null;this.trackComment&&(f=[]);for(var m=0===this.index;!this.eof();){var q=this.source.charCodeAt(this.index);if(c.Character.isWhiteSpace(q))++this.index;else if(c.Character.isLineTerminator(q))++this.index,13===q&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,m=!0;else if(47===q)if(q=this.source.charCodeAt(this.index+
1),47===q)this.index+=2,q=this._skipSingleLineComment(2),f&&(f=f.concat(q)),m=!0;else if(42===q)this.index+=2,q=this._skipMultiLineComment(),f&&(f=f.concat(q));else break;else if(m&&45===q)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,q=this._skipSingleLineComment(3),f&&(f=f.concat(q));else break;else if(60!==q||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,q=this._skipSingleLineComment(4),f&&
(f=f.concat(q));else break}return f};r.prototype._isKeyword=function(f){f=f.toLowerCase();switch(f.length){case 2:return"if"===f||"in"===f;case 3:return"var"===f||"for"===f;case 4:return"else"===f;case 5:return"break"===f;case 6:return"return"===f;case 8:return"function"===f||"continue"===f;default:return!1}};r.prototype._codePointAt=function(f){var m=this.source.charCodeAt(f);55296<=m&&56319>=m&&(f=this.source.charCodeAt(f+1),56320<=f&&57343>=f&&(m=1024*(m-55296)+f-56320+65536));return m};r.prototype._scanHexEscape=
function(f){f="u"===f?4:2;for(var m=0,q=0;q<f;++q)if(!this.eof()&&c.Character.isHexDigit(this.source.charCodeAt(this.index)))m=16*m+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(m)};r.prototype._scanUnicodeCodePointEscape=function(){var f=this.source[this.index],m=0;for("}"===f&&this.throwUnexpectedToken();!this.eof();){f=this.source[this.index++];if(!c.Character.isHexDigit(f.charCodeAt(0)))break;m=16*m+"0123456789abcdef".indexOf(f.toLowerCase())}(1114111<
m||"}"!==f)&&this.throwUnexpectedToken();return c.Character.fromCodePoint(m)};r.prototype._getIdentifier=function(){for(var f=this.index++;!this.eof();){var m=this.source.charCodeAt(this.index);if(92===m||55296<=m&&57343>m)return this.index=f,this._getComplexIdentifier();if(c.Character.isIdentifierPart(m))++this.index;else break}return this.source.slice(f,this.index)};r.prototype._getComplexIdentifier=function(){var f=this._codePointAt(this.index),m=c.Character.fromCodePoint(f);this.index+=m.length;
if(92===f){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var q=this._scanUnicodeCodePointEscape()}else q=this._scanHexEscape("u"),null!==q&&"\\"!==q&&c.Character.isIdentifierStart(q.charCodeAt(0))||this.throwUnexpectedToken();m=q}for(;!this.eof();){f=this._codePointAt(this.index);if(!c.Character.isIdentifierPart(f))break;q=c.Character.fromCodePoint(f);m+=q;this.index+=q.length;92===f&&(m=m.substr(0,m.length-1),117!==
this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,q=this._scanUnicodeCodePointEscape()):(q=this._scanHexEscape("u"),null!==q&&"\\"!==q&&c.Character.isIdentifierPart(q.charCodeAt(0))||this.throwUnexpectedToken()),m+=q)}return m};r.prototype._octalToDecimal=function(f){var m="0"!==f,q="01234567".indexOf(f);!this.eof()&&c.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(m=!0,q=8*q+"01234567".indexOf(this.source[this.index++]),
"0123".includes(f)&&!this.eof()&&c.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(q=8*q+"01234567".indexOf(this.source[this.index++])));return{code:q,octal:m}};r.prototype._scanIdentifier=function(){var f=this.index,m=92===this.source.charCodeAt(f)?this._getComplexIdentifier():this._getIdentifier();var q=1===m.length?n.TokenType.Identifier:this._isKeyword(m)?n.TokenType.Keyword:"null"===m.toLowerCase()?n.TokenType.NullLiteral:"true"===m.toLowerCase()||"false"===m.toLowerCase()?n.TokenType.BooleanLiteral:
n.TokenType.Identifier;if(q!==n.TokenType.Identifier&&f+m.length!==this.index){var l=this.index;this.index=f;this._tolerateUnexpectedToken(k.Messages.InvalidEscapedReservedWord);this.index=l}return{type:q,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._scanPunctuator=function(){var f=this.index,m=this.source[this.index];switch(m){case "(":case "{":"{"===m&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;
this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:m=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===m?this.index+=4:(m=m.substr(0,3),"\x3d\x3d\x3d"===m||"!\x3d\x3d"===m||"\x3e\x3e\x3e"===m||"\x3c\x3c\x3d"===m||"\x3e\x3e\x3d"===m||"**\x3d"===m?this.index+=3:(m=m.substr(0,2),"\x26\x26"===m||"||"===m||"\x3d\x3d"===m||"!\x3d"===m||"+\x3d"===m||"-\x3d"===m||"*\x3d"===m||"/\x3d"===m||"++"===m||"--"===m||"\x3c\x3c"===m||"\x3e\x3e"===
m||"\x26\x3d"===m||"|\x3d"===m||"^\x3d"===m||"%\x3d"===m||"\x3c\x3d"===m||"\x3e\x3d"===m||"\x3d\x3e"===m||"**"===m?this.index+=2:(m=this.source[this.index],"\x3c\x3e\x3d!+-*%\x26|^/".includes(m)&&++this.index)))}this.index===f&&this.throwUnexpectedToken();return{type:n.TokenType.Punctuator,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._scanHexLiteral=function(f){for(var m="";!this.eof()&&c.Character.isHexDigit(this.source.charCodeAt(this.index));)m+=
this.source[this.index++];0===m.length&&this.throwUnexpectedToken();c.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:n.TokenType.NumericLiteral,value:parseInt("0x"+m,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._scanBinaryLiteral=function(f){for(var m="";!this.eof();){var q=this.source[this.index];if("0"!==q&&"1"!==q)break;m+=this.source[this.index++]}0===m.length&&this.throwUnexpectedToken();
this.eof()||(q=this.source.charCodeAt(this.index),(c.Character.isIdentifierStart(q)||c.Character.isDecimalDigit(q))&&this.throwUnexpectedToken());return{type:n.TokenType.NumericLiteral,value:parseInt(m,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._scanOctalLiteral=function(f,m){var q="",l=!1;c.Character.isOctalDigit(f.charCodeAt(0))?(l=!0,q="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&c.Character.isOctalDigit(this.source.charCodeAt(this.index));)q+=
this.source[this.index++];l||0!==q.length||this.throwUnexpectedToken();(c.Character.isIdentifierStart(this.source.charCodeAt(this.index))||c.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:n.TokenType.NumericLiteral,value:parseInt(q,8),octal:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};r.prototype._scanNumericLiteral=function(){var f=this.index,m=this.source[f];a.assert(c.Character.isDecimalDigit(m.charCodeAt(0))||
"."===m,"Numeric literal must start with a decimal digit or a decimal point");var q="";if("."!==m){q=this.source[this.index++];m=this.source[this.index];if("0"===q){if("x"===m||"X"===m)return++this.index,this._scanHexLiteral(f);if("b"===m||"B"===m)return++this.index,this._scanBinaryLiteral(f);if("o"===m||"O"===m)return this._scanOctalLiteral(m,f)}for(;c.Character.isDecimalDigit(this.source.charCodeAt(this.index));)q+=this.source[this.index++];m=this.source[this.index]}if("."===m){for(q+=this.source[this.index++];c.Character.isDecimalDigit(this.source.charCodeAt(this.index));)q+=
this.source[this.index++];m=this.source[this.index]}if("e"===m||"E"===m){q+=this.source[this.index++];m=this.source[this.index];if("+"===m||"-"===m)q+=this.source[this.index++];if(c.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;c.Character.isDecimalDigit(this.source.charCodeAt(this.index));)q+=this.source[this.index++];else this.throwUnexpectedToken()}c.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:n.TokenType.NumericLiteral,
value:parseFloat(q),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._scanStringLiteral=function(){var f=this.index,m=this.source[f];a.assert("'"===m||'"'===m,"String literal must starts with a quote");++this.index;for(var q=!1,l="";!this.eof();){var b=this.source[this.index++];if(b===m){m="";break}if("\\"===b)if((b=this.source[this.index++])&&c.Character.isLineTerminator(b.charCodeAt(0)))++this.lineNumber,"\r"===b&&"\n"===this.source[this.index]&&++this.index,
this.lineStart=this.index;else switch(b){case "u":"{"===this.source[this.index]?(++this.index,l+=this._scanUnicodeCodePointEscape()):(b=this._scanHexEscape(b),null===b&&this.throwUnexpectedToken(),l+=b);break;case "x":b=this._scanHexEscape(b);null===b&&this.throwUnexpectedToken(k.Messages.InvalidHexEscapeSequence);l+=b;break;case "n":l+="\n";break;case "r":l+="\r";break;case "t":l+="\t";break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\x0B";break;case "8":case "9":l+=b;this._tolerateUnexpectedToken();
break;default:b&&c.Character.isOctalDigit(b.charCodeAt(0))?(b=this._octalToDecimal(b),q=b.octal||q,l+=String.fromCharCode(b.code)):l+=b}else if(c.Character.isLineTerminator(b.charCodeAt(0)))break;else l+=b}""!==m&&(this.index=f,this.throwUnexpectedToken());return{type:n.TokenType.StringLiteral,value:l,octal:q,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._scanTemplate=function(){var f="",m=!1,q=this.index,l="`"===this.source[q],b=!1,g=2;for(++this.index;!this.eof();){var e=
this.source[this.index++];if("`"===e){g=1;m=b=!0;break}if("$"===e){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;m=!0;break}f+=e}else if("\\"===e)if(e=this.source[this.index++],c.Character.isLineTerminator(e.charCodeAt(0)))++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(e){case "n":f+="\n";break;case "r":f+="\r";break;case "t":f+="\t";break;case "u":if("{"===this.source[this.index])++this.index,f+=this._scanUnicodeCodePointEscape();
else{var d=this.index,h=this._scanHexEscape(e);null!==h?f+=h:(this.index=d,f+=e)}break;case "x":e=this._scanHexEscape(e);null===e&&this.throwUnexpectedToken(k.Messages.InvalidHexEscapeSequence);f+=e;break;case "b":f+="\b";break;case "f":f+="\f";break;case "v":f+="\v";break;default:"0"===e?(c.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(k.Messages.TemplateOctalLiteral),f+="\x00"):c.Character.isOctalDigit(e.charCodeAt(0))?this.throwUnexpectedToken(k.Messages.TemplateOctalLiteral):
f+=e}else c.Character.isLineTerminator(e.charCodeAt(0))?(++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,f+="\n"):f+=e}m||this.throwUnexpectedToken();l||this.curlyStack.pop();return{type:n.TokenType.Template,value:this.source.slice(q+1,this.index-g),cooked:f,head:l,tail:b,lineNumber:this.lineNumber,lineStart:this.lineStart,start:q,end:this.index}};r.prototype._testRegExp=function(f,m){var q=this,l=f;m.includes("u")&&(l=l.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(b,g,e){b=parseInt(g||e,16);1114111<b&&q.throwUnexpectedToken(k.Messages.InvalidRegExp);return 65535>=b?String.fromCharCode(b):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(l)}catch(b){this.throwUnexpectedToken(k.Messages.InvalidRegExp)}try{return new RegExp(f,m)}catch(b){return null}};r.prototype._scanRegExpBody=function(){var f=this.source[this.index];a.assert("/"===f,"Regular expression literal must start with a slash");for(var m=this.source[this.index++],q=
!1,l=!1;!this.eof();)if(f=this.source[this.index++],m+=f,"\\"===f)f=this.source[this.index++],c.Character.isLineTerminator(f.charCodeAt(0))&&this.throwUnexpectedToken(k.Messages.UnterminatedRegExp),m+=f;else if(c.Character.isLineTerminator(f.charCodeAt(0)))this.throwUnexpectedToken(k.Messages.UnterminatedRegExp);else if(q)"]"===f&&(q=!1);else{if("/"===f){l=!0;break}"["===f&&(q=!0)}l||this.throwUnexpectedToken(k.Messages.UnterminatedRegExp);return m.substr(1,m.length-2)};r.prototype._scanRegExpFlags=
function(){for(var f="";!this.eof();){var m=this.source[this.index];if(!c.Character.isIdentifierPart(m.charCodeAt(0)))break;++this.index;if("\\"!==m||this.eof())f+=m;else{m=this.source[this.index];if("u"===m){++this.index;m=this.index;var q=this._scanHexEscape("u");if(null!==q)for(f+=q;m<this.index;++m);else this.index=m,f+="u"}this._tolerateUnexpectedToken()}}return f};r.prototype.scanRegExp=function(){var f=this.index,m=this._scanRegExpBody(),q=this._scanRegExpFlags(),l=this._testRegExp(m,q);return{type:n.TokenType.RegularExpression,
value:"",pattern:m,flags:q,regex:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype.lex=function(){if(this.eof())return{type:n.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var f=this.source.charCodeAt(this.index);return c.Character.isIdentifierStart(f)?this._scanIdentifier():40===f||41===f||59===f?this._scanPunctuator():39===f||34===f?this._scanStringLiteral():46===f?c.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this._scanNumericLiteral():this._scanPunctuator():c.Character.isDecimalDigit(f)?this._scanNumericLiteral():96===f||125===f&&"${"===this.curlyStack[this.curlyStack.length-1]?this._scanTemplate():55296<=f&&57343>f&&c.Character.isIdentifierStart(this._codePointAt(this.index))?this._scanIdentifier():this._scanPunctuator()};return r}();B.Scanner=D})},"esri/arcade/lib/character":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.Character=void 0;
var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
c=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
B.Character={fromCodePoint:function(k){return 65536>k?String.fromCharCode(k):String.fromCharCode(55296+(k-65536>>10))+String.fromCharCode(56320+(k-65536&1023))},isWhiteSpace:function(k){return 32===k||9===k||11===k||12===k||160===k||5760<=k&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(k)},isLineTerminator:function(k){return 10===k||13===k||8232===k||8233===k},isIdentifierStart:function(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||92===k||
128<=k&&a.test(B.Character.fromCodePoint(k))},isIdentifierPart:function(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||48<=k&&57>=k||92===k||128<=k&&c.test(B.Character.fromCodePoint(k))},isDecimalDigit:function(k){return 48<=k&&57>=k},isHexDigit:function(k){return 48<=k&&57>=k||65<=k&&70>=k||97<=k&&102>=k},isOctalDigit:function(k){return 48<=k&&55>=k}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.TokenName=
B.TokenType=void 0;var a,c=a=B.TokenType||(B.TokenType={});c[c.BooleanLiteral=1]="BooleanLiteral";c[c.EOF=2]="EOF";c[c.Identifier=3]="Identifier";c[c.Keyword=4]="Keyword";c[c.NullLiteral=5]="NullLiteral";c[c.NumericLiteral=6]="NumericLiteral";c[c.Punctuator=7]="Punctuator";c[c.StringLiteral=8]="StringLiteral";c[c.RegularExpression=9]="RegularExpression";c[c.Template=10]="Template";B.TokenName={};B.TokenName[a.BooleanLiteral]="Boolean";B.TokenName[a.EOF]="\x3cend\x3e";B.TokenName[a.Identifier]="Identifier";
B.TokenName[a.Keyword]="Keyword";B.TokenName[a.NullLiteral]="Null";B.TokenName[a.NumericLiteral]="Numeric";B.TokenName[a.Punctuator]="Punctuator";B.TokenName[a.StringLiteral]="String";B.TokenName[a.RegularExpression]="RegularExpression";B.TokenName[a.Template]="Template"})},"esri/arcade/lib/tokenizer":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ./error-handler ./nodes ./scanner ./token".split(" "),function(D,B,a,c,k,n,r,f){Object.defineProperty(B,
"__esModule",{value:!0});B.Tokenizer=void 0;var m=function(){function q(){this.values=[];this.curly=this.paren=-1}q.prototype.beforeFunctionExpression=function(l){return c(c(c(c(["(","{","[","return",","],n.AssignmentOperators),n.BinaryOperators),n.LogicalOperators),n.UnaryOperators).includes(l)};q.prototype.isRegexStart=function(){var l=this.values[this.values.length-1],b=null!==l;switch(l){case "this":case "]":b=!1;break;case ")":l=this.values[this.paren-1];b="if"===l||"while"===l||"for"===l||"with"===
l;break;case "}":b=!0,"function"===this.values[this.curly-3]?b=(l=this.values[this.curly-4])?!this.beforeFunctionExpression(l):!1:"function"===this.values[this.curly-4]&&(b=(l=this.values[this.curly-5])?!this.beforeFunctionExpression(l):!0)}return b};q.prototype.push=function(l){l.type===f.TokenType.Punctuator||l.type===f.TokenType.Keyword?("{"===l.value?this.curly=this.values.length:"("===l.value&&(this.paren=this.values.length),this.values.push(l.value)):this.values.push(null)};return q}();D=function(){function q(l,
b){this.errorHandler=new k.ErrorHandler;this.errorHandler.tolerant=b?"boolean"===typeof b.tolerant&&b.tolerant:!1;this.scanner=new r.Scanner(l,this.errorHandler);this.scanner.trackComment=b?"boolean"===typeof b.comment&&b.comment:!1;this.trackRange=b?"boolean"===typeof b.range&&b.range:!1;this.trackLoc=b?"boolean"===typeof b.loc&&b.loc:!1;this.buffer=[];this.reader=new m}q.prototype.errors=function(){return this.errorHandler.errors};q.prototype.getNextToken=function(){if(0===this.buffer.length){var l=
this.scanner.scanComments();if(l)for(var b=0;b<l.length;++b){var g=l[b],e=this.scanner.source.slice(g.slice[0],g.slice[1]);e={type:g.multiLine?"BlockComment":"LineComment",value:e};this.trackRange&&(e.range=g.range);this.trackLoc&&(e.loc=g.loc);this.buffer.push(e)}if(!this.scanner.eof()){l=null;this.trackLoc&&(l={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});b=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){g=
this.scanner.saveState();try{b=this.scanner.scanRegExp()}catch(d){this.scanner.restoreState(g),b=this.scanner.lex()}}else b=this.scanner.lex();this.reader.push(b);g={type:f.TokenName[b.type],value:this.scanner.source.slice(b.start,b.end)};this.trackRange&&(g.range=[b.start,b.end]);this.trackLoc&&l&&(l.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},g.loc=l);b.type===f.TokenType.RegularExpression&&(g.regex={pattern:b.pattern,flags:b.flags});this.buffer.push(g)}}return this.buffer.shift()};
return q}();B.Tokenizer=D})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(D,B,a,c,k,n,r){D=new (D(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(f){var m=[];r.hasGeometryOperations(f)&&m.push(n.enableGeometryOperations());return k(m)}}));B.setObject("arcadeProfiles.visualizationProfile",D,c);return D})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(D,B,a,c,k){var n=/(\/(MapServer|FeatureServer)).*/ig;a={hasGeometryOperations:function(r){return B.some(r,function(f){return f.hasGeometryOperations?f.hasGeometryOperations():k.hasGeometryOperations(f)})},hasFeatureSetOperations:function(r){return B.some(r,function(f){return f.hasFeatureSetOperations?f.hasFeatureSetOperations():k.hasFeatureSetOperations(f)})},hasVariables:function(r,f){return B.some(r,function(m){return B.some(f,
function(q){return m.hasVariable?m.hasVariable(q):k.hasVariable(m,q)})})},isAsync:function(r){return B.some(r,function(f){return f.async})},getServiceUrl:function(r){return n.test(r)?r.replace(n,"$1"):null}};D.setObject("arcadeProfiles.utils",a,c);return a})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(D,B,a,c,k,n,r,f,m){D=D(f,{declaredClass:"esri.renderer.UniqueValueRenderer",
constructor:function(q,l,b,g,e,d){this.values=[];this._symbols={};this.infos=[];q&&!q.declaredClass?(l=q,b=d&&d.geometryType,this.defaultSymbol=(q=l.defaultSymbol)&&(q.declaredClass?q:r.fromJson(q,d)),this.attributeField=l.field1,this.attributeField2=l.field2,this.attributeField3=l.field3,this.fieldDelimiter=l.fieldDelimiter,this.defaultLabel=l.defaultLabel,this.setValueExpression(l.valueExpression),this.valueExpressionTitle=l.valueExpressionTitle,this.legendOptions=l.legendOptions,l.backgroundFillSymbol&&
(this.backgroundFillSymbol=r.fromJson(l.backgroundFillSymbol,b?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===b&&this.hasVisualVariables("sizeInfo",!1)&&(d={geometryType:"esriGeometryPoint"}),B.forEach(l.uniqueValueInfos,function(h){this._addValueInfo(h,d)},this)):(this.defaultSymbol=q,this.attributeField=l,this.attributeField2=b,this.attributeField3=g,this.fieldDelimiter=e);this._multiple=!!this.attributeField2},addValue:function(q,l){var b=a.isObject(q)?q:{value:q,symbol:l};
this._addValueInfo(b)},removeValue:function(q){var l=B.indexOf(this.values,q);-1!==l&&(this.values.splice(l,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[q],this.infos.splice(l,1))},getUniqueValueInfo:function(q){var l=this.attributeField,b=q.attributes;if(this.valueExpression)l=this._getDataValue(q,this._uvInfo,null,this._cache.uvInfo),l=this._normalizeNullValue(l);else if(this._multiple){q=this.attributeField2;var g=this.attributeField3,e=[];l&&e.push(this._normalizeNullValue(b[l]));
q&&e.push(this._normalizeNullValue(b[q]));g&&e.push(this._normalizeNullValue(b[g]));l=e.join(this.fieldDelimiter||"")}else l=a.isFunction(l)?l(q):b[l],l=this._normalizeNullValue(l);return this._symbols[l]},setValueExpression:function(q){this.valueExpression=q;this._uvInfo={valueExpression:q};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(q){var l=this.inherited(arguments);this.valueExpression&&(l=l.concat(m.extractFieldNames(this.valueExpression,q)));l.sort();
return B.filter(l,function(b,g){return 0===g||l[g-1]!==b})},getSymbol:function(q){return(q=this.getUniqueValueInfo(q))&&q.symbol||this.defaultSymbol},_addValueInfo:function(q,l){var b=q.value;this.values.push(b);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(q);var g=q.symbol;g&&!g.declaredClass&&(q.symbol=r.fromJson(g,l));this._symbols[b]=q},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(q){return this._hasNullKeyword&&null==q?this._nullCode:q},_evalNullKeyword:function(q){var l=
this.fieldDelimiter||"",b=new RegExp("(^|"+l+")("+this._nullCode+")("+l+"|$)");return B.some(q,function(g){return b.test(g)})},toJson:function(){var q=n.fixJson;var l={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,
uniqueValueInfos:B.map(this.infos||[],function(b){b=a.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.value+="";return q(b)})};this.backgroundFillSymbol&&(l.backgroundFillSymbol=this.backgroundFillSymbol.toJson());l=a.mixin(this.inherited(arguments),l);return q(l)}});a.setObject("renderer.UniqueValueRenderer",D,k);return D})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y){var C={createDefaultRenderer:function(F){F=r.createDefaultSymbol(F);return new f(F)},fromJson:function(F,x){switch(F.type||""){case "simple":var u=new f(F,x);break;case "uniqueValue":u=new m(F,null,null,null,null,x);break;case "classBreaks":u=new q(F,null,x);break;case "vectorField":u=new l(F);break;case "scaleDependent":u=this._scaleDependentFromJson(F);break;case "dotDensity":u=F.attributes?C.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(F);
break;case "temporal":u=this._temporalFromJson(F,x);break;case "heatmap":u=this._heatmapFromJson(F);break;case "rasterStretch":u=new z(F);break;case "rasterShadedRelief":u=new v(F);break;case "rasterColormap":u=new y(F);break;default:u=(u=x&&x.geometryType)?C.createDefaultRenderer(u):null}return u},_scaleDependentFromJson:function(F){var x={},u=F.minScale;x.rendererInfos=D.map(F.rendererInfos,function(w){var A=w.maxScale;w={minScale:u,maxScale:A,renderer:w.renderer&&this.fromJson(w.renderer)};u=A;
return w},this);return new g(x)},_dotDensityFromJson:function(F){F.backgroundColor&&B.isArray(F.backgroundColor)&&(F.backgroundColor=n.toDojoColor(F.backgroundColor));0<F.dotSize&&(F.dotSize=c.pt2px(F.dotSize));F.fields&&D.forEach(F.fields,function(x){x&&B.isArray(x.color)&&(x.color=n.toDojoColor(x.color))});F.legendOptions&&(F.legendOptions.backgroundColor&&B.isArray(F.legendOptions.backgroundColor)&&(F.legendOptions.backgroundColor=n.toDojoColor(F.legendOptions.backgroundColor)),F.legendOptions.outline&&
(F.legendOptions.outline=r.fromJson(F.legendOptions.outline)));F.outline&&(F.outline=r.fromJson(F.outline));return new b(F)},_temporalFromJson:function(F,x){var u=x&&x.geometryType;F=F||{};var w=this.fromJson(F.observationRenderer,x);var A=F.latestObservationRenderer?this.fromJson(F.latestObservationRenderer,x):null;u=F.trackRenderer?this.fromJson(F.trackRenderer,u?{geometryType:"esriGeometryPolyline"}:null):null;var E=this._agerFromJson(F.observationAger);return new h(w,A,u,E)},_agerFromJson:function(F){var x;
F=F||{};F.colorRange||F.sizeRange||F.alphaRange?x=this._timeRampFromJson(F):F.agerClassBreakInfos&&(x=this._timeClassBreaksFromJson(F));return x},_timeRampFromJson:function(F){var x,u,w;F.colorRange&&1<F.colorRange.length&&(x=[n.toDojoColor(F.colorRange[0]),n.toDojoColor(F.colorRange[1])]);F.sizeRange&&1<F.sizeRange.length&&(u=[F.sizeRange[0],F.sizeRange[1]]);F.alphaRange&&1<F.alphaRange.length&&(w=[F.alphaRange[0]/255,F.alphaRange[1]/255]);return new d(x,u,w)},_timeClassBreaksFromJson:function(F){var x=
F.agerClassBreakInfos,u=[],w;var A=e.UNIT_DAYS;switch(F.timeUnits){case "esriTimeUnitsSeconds":A=e.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":A=e.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":A=e.UNIT_HOURS;break;case "esriTimeUnitsMinutes":A=e.UNIT_MINUTES;break;case "esriTimeUnitsMonths":A=e.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":A=e.UNIT_WEEKS;break;case "esriTimeUnitsYears":A=e.UNIT_YEARS}for(w=0;w<x.length;w+=1){F=x[w];var E={minAge:0,maxAge:F.oldestAge||Infinity};F.color&&
(E.color=n.toDojoColor(F.color));F.alpha&&(E.alpha=F.alpha/255);E.size=F.size;u[w]=E}return new e(u,A)},_heatmapFromJson:function(F){var x=F.colorStops;x&&x instanceof Array&&D.forEach(x,function(u){u.color=n.toDojoColor(u.color)});return new t(F)}};B.mixin(B.getObject("renderer",!0,k),C);return C})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(D,B,a,c,k,n,r,f,m){D=D(f,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(q,l,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(q&&!q.declaredClass){var g=q;l=b&&b.geometryType;this.attributeField=g.field;this.setValueExpression(g.valueExpression);this.valueExpressionTitle=g.valueExpressionTitle;this.legendOptions=g.legendOptions;this.defaultSymbol=(q=g.defaultSymbol)&&(q.declaredClass?q:r.fromJson(q,b));this.backgroundFillSymbol=(q=g.backgroundFillSymbol)&&
(q.declaredClass?q:r.fromJson(q,l?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],g,this);var e=g.minValue;(q=g.classBreakInfos)&&q[0]&&n.isDefined(q[0].classMaxValue)&&B.forEach(q,function(d){var h=d.classMaxValue;d.minValue=e;e=d.maxValue=h},this);"esriGeometryPolygon"===l&&(this.hasVisualVariables("sizeInfo",!1)||r.isPointSymbol(r.getFirstSupportedSymbol(B.map(q,function(d){return d.symbol}))))&&
(b={geometryType:"esriGeometryPoint"});B.forEach(q,function(d){this._addBreakInfo(d,b)},this)}else this.defaultSymbol=q,this.attributeField=l},addBreak:function(q,l,b){q=a.isObject(q)?q:{minValue:q,maxValue:l,symbol:b};this._addBreakInfo(q)},removeBreak:function(q,l){var b=this.breaks,g,e=b.length,d=this._symbols;for(g=0;g<e;g++){var h=b[g];if(h[0]==q&&h[1]==l){b.splice(g,1);delete d[q+"-"+l];this.infos.splice(g,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(q){var l=
this.attributeField,b=q.attributes,g=this.breaks,e=g.length,d=this.isMaxInclusive;if(this.valueExpression)q=this._getDataValue(q,this._cbInfo,null,this._cache.cbInfo);else if(a.isFunction(l))q=l(q);else if(q=parseFloat(b[l]),l=this.normalizationType,l){var h=parseFloat(this.normalizationTotal);b=parseFloat(b[this.normalizationField]);if("log"===l)q=Math.log(q)*Math.LOG10E;else if("percent-of-total"===l&&!isNaN(h))q=q/h*100;else if("field"===l){if(isNaN(q)||isNaN(b))return-1;q/=b}}if(null!=q&&!isNaN(q)&&
"number"===typeof q)for(b=0;b<e;b++)if(l=g[b],l[0]<=q&&(d?q<=l[1]:q<l[1]))return b;return-1},getBreakInfo:function(q){q=this.getBreakIndex(q);return-1!==q?this.infos[q]:null},getSymbol:function(q){return(q=this.breaks[this.getBreakIndex(q)])?this._symbols[q[0]+"-"+q[1]]:this.defaultSymbol},setMaxInclusive:function(q){this.isMaxInclusive=q},setValueExpression:function(q){this.valueExpression=q;this._cbInfo={valueExpression:q};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(q){var l=
this.inherited(arguments);this.valueExpression&&(l=l.concat(m.extractFieldNames(this.valueExpression,q)));l.sort();return B.filter(l,function(b,g){return 0===g||l[g-1]!==b})},isContinuousRenderer:function(){var q=!1;if(this.infos&&1===this.infos.length){var l=this.attributeField,b=this.normalizationField,g=this.valueExpression;q=this.getVisualVariablesForType("colorInfo",!1)||[];var e=this.getVisualVariablesForType("sizeInfo",!1)||[],d=this.getVisualVariablesForType("opacityInfo",!1)||[];q=q.concat(e).concat(d);
q=B.some(q,function(h){return(h.field===l||h.valueExpression===g)&&h.normalizationField==b})}return q},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"],["manual-interval","esriClassifyManual"]],_copy:function(q,l,b){B.forEach(q,function(g){var e=g.split(":");if(1<e.length){g=e[0];var d=this["_"+g+"Enums"];if("rest"===e[1]){var h="1";var t="0"}else"sdk"===e[1]&&(h="0",t="1")}e=l[g];if(void 0!==e&&(b[g]=e,d&&h)){var z,v=d.length;for(z=0;z<v;z++)if(d[z][h]===e){b[g]=d[z][t];break}}},this)},_addBreakInfo:function(q,l){var b=q.minValue,g=q.maxValue;this.breaks.push([b,g]);this.infos.push(q);var e=q.symbol;
e&&!e.declaredClass&&(q.symbol=r.fromJson(e,l));this._symbols[b+"-"+g]=q.symbol},toJson:function(){var q=this.infos||[],l=n.fixJson,b=q[0]&&q[0].minValue,g=this.backgroundFillSymbol;q=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:g&&g.toJson(),minValue:-Infinity===
b?-Number.MAX_VALUE:b,classBreakInfos:B.map(q,function(e){e=a.mixin({},e);e.symbol=e.symbol&&e.symbol.toJson();e.classMaxValue=Infinity===e.maxValue?Number.MAX_VALUE:e.maxValue;delete e.minValue;delete e.maxValue;return l(e)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,q);q.hasOwnProperty("normalizationType")&&!q.normalizationType&&delete q.normalizationType;q.hasOwnProperty("classificationMethod")&&!q.classificationMethod&&
delete q.classificationMethod;return l(q)}});a.setObject("renderer.ClassBreaksRenderer",D,k);return D})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){var d={STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},h=D(f,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(t){n.isDefined(t)||(t={});t.attributeField=t.attributeField||"Magnitude";
t.rotationInfo=t.rotationInfo||this._getRotationInfo(t);D.safeMixin(this,t);this.setRotationInfo(this.rotationInfo);this.style=this.style||h.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:g.fromJson(this.singleArrowSymbol));this.renderer=new m(this._getDefaultSymbol(),t.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(t){return this.renderer&&
this.renderer.getSymbol(t)},setVisualVariables:function(t){t=c.filter(t,function(z){if("sizeInfo"===z.type)return n.isDefined(this._updateSizeInfo(z))},this);this.inherited(arguments);return this},setSizeInfo:function(t){this._updateSizeInfo(t);this.inherited(arguments);return this},setProportionalSymbolInfo:function(t){this.setSizeInfo(t);return this},setColorInfo:function(t){return this},_updateRenderer:function(t){return n.isDefined(this.renderer)?t===h.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():
t===h.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():t===h.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():t===h.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():t===h.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():t===h.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():t===h.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():t===h.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():t===h.STYLE_SCALAR?this._createSimpleScalarRenderer():t===h.STYLE_WIND_BARBS?
this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(t){return t&&n.isDefined(t.minSize)&&n.isDefined(t.maxSize)&&n.isDefined(t.minDataValue)&&n.isDefined(t.maxDataValue)?(this.style===h.STYLE_WIND_BARBS&&(t.minSize=t.maxSize),t.field=t.field||"Magnitude",t.type="sizeInfo",this.minDataValue=t.minDataValue,this.maxDataValue=t.maxDataValue,t):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([56,
168,0]));var t=[0,1E-6,3.5,7,10.5,14];if(n.isDefined(this.minDataValue)&&n.isDefined(this.maxDataValue)){var z=(this.maxDataValue-this.minDataValue)/5;t=[];var v;var y=this.minDataValue;for(v=0;6>v;v++)t[v]=y,y+=z}this._addBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,
47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,
250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.forEach(t,function(z,v){t[v]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var t=
[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.forEach(t,function(z,v){t[v]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.forEach(t,function(z,v){t[v]*=3.6});this.renderer.defaultSymbol=
this._getDefaultSymbol(new r([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([177,
177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new l({url:e.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var t=[],z;for(z=0;150>=z;z+=5)t.push(z);var v="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var y=new l({url:e.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=y;for(z=0;z<t.length-1;z++)0===z?this.renderer.addBreak({minValue:t[z],maxValue:t[z+1],symbol:y}):this.renderer.addBreak({minValue:t[z],maxValue:t[z+1],symbol:(new q).setPath(v[z]).setOutline((new b).setWidth(1.5)).setSize(20).setColor(new r([0,0,0,255]))})},_getDefaultSymbol:function(t){return(new q).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new b).setWidth(0)).setSize(20).setColor(t||
new r([0,92,230]))},_getRotationInfo:function(t){var z=t&&t.rotationField||"Direction",v=(t&&t.flowRepresentation||h.FLOW_FROM)===h.FLOW_FROM;!t.style||t.style!==d.STYLE_OCEAN_CURRENT_KN&&t.style!==d.STYLE_OCEAN_CURRENT_M||(v=!v);return{field:function(y){y=y.attributes[z];return v?y:y+180},type:"geographic"}},_addBreaks:function(t,z){if(!n.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(t&&z&&t.length&&z.length&&t.length>=z.length))return Error("AddBreaks: Input arguments break values and colors not valid");
var v;for(v=0;v<z.length;v++)this.renderer.addBreak({minValue:t[v],maxValue:t[v+1],symbol:this._getDefaultSymbol(new r(z[v]))})},toJson:function(){var t=B.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===h.STYLE_SINGLE_ARROW&&(t.singleArrowSymbol=this.renderer.defaultSymbol.toJson());
return n.fixJson(t)}});B.mixin(h,d,{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});B.setObject("renderer.VectorFieldRenderer",h,k);return h})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){D=D(q,{declaredClass:"esri.renderer.DotDensityRenderer",
constructor:function(e){this.dotSize=e.dotSize||3;this.dotValue=e.dotValue;this.fields=e.fields;this.outline=e.outline;this.backgroundColor=e.backgroundColor;this.exactCount=e.exactCount||!0;this.dotShape=e.dotShape||"square";this.legendOptions=e.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(e){this._currentGraphic=
e;if(!this._supportsCanvas)return null;this._map||(this._map=e.getLayer()._map,this._objectIdField=e.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",B.hitch(this,function(t){this._currentMapScale=this._map.getScale();this._currentResolution=t.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][e.attributes[this._objectIdField]]){var d=
this._symbolMap[this._currentMapScale][e.attributes[this._objectIdField]];var h=this._getShapeProperties(e);d.setOffset(h.dx,h.dy);return d}d=this._generateFieldsCount(this.fields,e.attributes,this.dotValue);h=this._getShapeProperties(e);if(!h.width||!h.height)return null;d=new l(this._generateImageSrc(h.width,h.height,d,h.minXY,h.maxXY),this.outline,h.width,h.height);d.setOffset(h.dx,h.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][e.attributes[this._objectIdField]]=
d},_generateFieldsCount:function(e,d,h){var t;for(t=e.length-1;0<=t;t--){var z=d[e[t].name]/h;e[t].numPoints=Math.round(z)}return e},_getShapeProperties:function(e){var d=e.geometry.getExtent();d.contains(this._map.extent)&&(d=this._map.extent);var h=Math.ceil(d.getWidth()/this._currentResolution);var t=Math.ceil(d.getHeight()/this._currentResolution);var z=this._map.toScreen(new g(d.xmin,d.ymin,d.spatialReference));d=this._map.toScreen(new g(d.xmax,d.ymax,d.spatialReference));e=e.getLayer().getNavigationTransform();
return{minXY:z,maxXY:d,dx:(z.x-e.dx)%h,dy:(d.y-e.dy)%t,width:h,height:t}},_generateImageSrc:function(e,d,h,t,z,v){var y=this.dotSize,C;this._canvas?(this._canvas.width=e,this._canvas.height=d):this._canvas=this._initCanvas(e,d);var F=this._canvas.getContext("2d");if(v=v||this.backgroundColor)F.fillStyle=v.toCss(!0),F.fillRect(0,0,e,d),F.fill();for(v=h.length-1;0<=v;v--)for(F.fillStyle=h[v].color.toCss(!0),C=h[v].numPoints-1;0<=C;C--){var x=this._getRandomPoint(e,d,t,z);"square"===this.dotShape?F.fillRect(x.x,
x.y,y,y):"circle"===this.dotShape&&(F.beginPath(),F.arc(x.x,x.y,y/2,0,2*Math.PI,!0));F.fill()}return this._canvas.toDataURL()},_initCanvas:function(e,d){var h=c.create("canvas",{id:"canvas",width:e+"px",height:d+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(h);return h},_getRandomInt:function(e,d){return Math.floor(Math.random()*(d-e+1)+e)},_getRandomPoint:function(e,d,h,t){var z={},v=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&
e*d>this._exactCountMinArea){e=!1;do z.x=this._getRandomInt(h.x,t.x),z.y=this._getRandomInt(t.y,h.y),e=new b(z.x,z.y),e=this._checkPointShapeBounds(e,this.dotSize+v,this._currentGraphic.geometry),!0===e&&(z.x-=h.x,z.y-=t.y);while(!1===e)}else z.x=this._getRandomInt(0,e),z.y=this._getRandomInt(0,d);return z},_checkPointShapeBounds:function(e,d,h){var t=null;t=!1;var z=!0,v=0;do{switch(v){case 1:e.x+=d;break;case 2:e.y+=d;break;case 3:e.x-=d}t=this._map.toMap(e);t=h.contains(t);!1===t&&(z=!1);v+=1}while(3>=
v&&!0===z);return t},setDotSize:function(e){0<e&&(this.dotSize=e)},setDotValue:function(e){0<e&&(this.dotValue=e)},setOutline:function(e){this.outline=e},setBackgroundColor:function(e){this.backgroundColor=e},toJson:function(){var e=B.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:m.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?n.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(d){return f.fixJson({color:m.toJsonColor(d.color),
name:d.name})}),legendOptions:this.legendOptions&&f.fixJson({backgroundColor:m.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return f.fixJson(e)}});B.setObject("renderer.DotDensityRenderer",D,r);return D})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./Point"],function(D,B,a,c,k){D=D(k,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});B.setObject("geometry.ScreenPoint",D,c);return D})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(D,B,a,c,k,n,r){D=D(r,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(f){this.setRendererInfos(f&&f.rendererInfos||[])},setRendererInfos:function(f){this.rendererInfos=
f;this._setRangeType();return this},getSymbol:function(f){var m=this.getRendererInfo(f);return m&&m.renderer&&m.renderer.getSymbol(f)},getRendererInfo:function(f){f=f.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(f.getZoom()):this.getRendererInfoByScale(f.getScale())},getRendererInfoByZoom:function(f){var m=this.rendererInfos,q,l=0;do{var b=m[l];f>=b.minZoom&&f<=b.maxZoom&&(q=b);l++}while(!q&&l<m.length);return q},getRendererInfoByScale:function(f){var m=this.rendererInfos,
q,l=0;do{var b=m[l];var g=b.minScale;var e=b.maxScale;var d=!g;var h=!e;!d&&f<=g&&(d=!0);!h&&f>=e&&(h=!0);d&&h&&(q=b);l++}while(!q&&l<m.length);return q},addRendererInfo:function(f){var m=0,q=this.rendererInfos,l=f.hasOwnProperty("minZoom")?"minZoom":"minScale",b=q.length;do{var g=q[m];if(b===m||f[l]<g[l]){q.splice(m,0,f);this._setRangeType();var e=!0}m++}while(!e&&m<b);return this},_setRangeType:function(){var f=this.rendererInfos;if(f=f&&f[0])this.rangeType=f.hasOwnProperty("minZoom")?"zoom":f.hasOwnProperty("minScale")?
"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var f=this.rendererInfos||[],m=f[0]&&f[0].minScale;f=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<m?m:0,rendererInfos:B.map(f,function(q){return n.fixJson({maxScale:0<q.maxScale?q.maxScale:0,renderer:q.renderer&&q.renderer.toJson()})})});return n.fixJson(f)}});a.setObject("renderer.ScaleDependentRenderer",D,k);return D})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(D,B,a,c,k,n,r,f,m,q){var l=D(q,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(b,g){this.infos=b;this.timeUnits=g||"day";b.sort(function(e,d){return e.minAge<d.minAge?-1:e.minAge>d.minAge?1:0})},getAgedSymbol:function(b,g){var e=g.getLayer(),d=g.attributes,h=r.isDefined;b=f.fromJson(b.toJson());var t=e._map.timeExtent.endTime;if(!t)return b;var z=k.difference(new Date(d[e._startTimeField]),t,this.timeUnits);B.some(this.infos,function(v){if(z>=v.minAge&&z<=v.maxAge){var y=
v.color,C=v.size;v=v.alpha;y&&b.setColor(y);h(C)&&this._setSymbolSize(b,C);h(v)&&b.color&&(b.color.a=v);return!0}},this);return b},toJson:function(){var b={agerClassBreakInfos:[]},g;b.timeUnits=this._getRestUnits(this.timeUnits);for(g=0;g<this.infos.length;g+=1){var e=this.infos[g];var d={};d.oldestAge=Infinity===e.maxAge?null:e.maxAge;d.size=e.size;e.color&&(d.color=m.toJsonColor(e.color));e.alpha&&(d.alpha=Math.round(255*e.alpha));b.agerClassBreakInfos[g]=d}return b},_getRestUnits:function(b){var g=
"esriTimeUnitsDays";switch(b){case l.UNIT_SECONDS:g="esriTimeUnitsSeconds";break;case l.UNIT_MILLISECONDS:g="esriTimeUnitsMilliseconds";break;case l.UNIT_HOURS:g="esriTimeUnitsHours";break;case l.UNIT_MINUTES:g="esriTimeUnitsMinutes";break;case l.UNIT_MONTHS:g="esriTimeUnitsMonths";break;case l.UNIT_WEEKS:g="esriTimeUnitsWeeks";break;case l.UNIT_YEARS:g="esriTimeUnitsYears"}return g}});a.mixin(l,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});a.setObject("renderer.TimeClassBreaksAger",l,n);return l})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(k,n){},_setSymbolSize:function(k,n){switch(k.type){case "simplemarkersymbol":k.setSize(n);break;case "picturemarkersymbol":k.setWidth(n);k.setHeight(n);break;case "simplelinesymbol":case "cartographiclinesymbol":k.setWidth(n);
break;case "simplefillsymbol":case "picturefillsymbol":k.outline&&k.outline.setWidth(n)}}});B.setObject("renderer.SymbolAger",D,c);return D})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(D,B,a,c,k,n,r,f){D=D(f,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(m,q,l){this.colorRange=m;this.sizeRange=q;this.alphaRange=l},getAgedSymbol:function(m,
q){var l=q.getLayer(),b=q.attributes;m=n.fromJson(m.toJson());var g=l._map.timeExtent,e=g.startTime;g=g.endTime;if(!e||!g)return m;e=e.getTime();g=g.getTime();l=new Date(b[l._startTimeField]);l=l.getTime();l<e&&(l=e);e=g===e?1:(l-e)/(g-e);if(l=this.sizeRange)b=l[0],g=l[1],l=Math.abs(g-b)*e,this._setSymbolSize(m,b<g?b+l:b-l);if(l=this.colorRange){g=l[0];var d=l[1],h=Math.round;b=new a;var t=g.r,z=d.r;l=Math.abs(z-t)*e;b.r=h(t<z?t+l:t-l);t=g.g;z=d.g;l=Math.abs(z-t)*e;b.g=h(t<z?t+l:t-l);t=g.b;z=d.b;
l=Math.abs(z-t)*e;b.b=h(t<z?t+l:t-l);g=g.a;d=d.a;l=Math.abs(d-g)*e;b.a=g<d?g+l:g-l;m.setColor(b)}b=m.color;(l=this.alphaRange)&&b&&(g=l[0],d=l[1],l=Math.abs(d-g)*e,b.a=g<d?g+l:g-l);return m},toJson:function(){var m={};this.sizeRange&&(m.sizeRange=this.sizeRange);this.colorRange&&(m.colorRange=[r.toJsonColor(this.colorRange[0]),r.toJsonColor(this.colorRange[1])]);this.alphaRange&&(m.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return m}});B.setObject("renderer.TimeRampAger",
D,k);return D})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(D,B,a,c,k){D=D(k,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(n,r,f,m){this.observationRenderer=n;this.latestObservationRenderer=r;this.trackRenderer=f;this.observationAger=m},getSymbol:function(n){var r=n.getLayer(),f=this.getObservationRenderer(n),m=f&&f.getSymbol(n),q=this.observationAger;r.timeInfo&&r._map.timeExtent&&
f===this.observationRenderer&&q&&m&&(m=q.getAgedSymbol(m,n));return m},getObservationRenderer:function(n){return 0===n.getLayer()._getKind(n)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var n={type:"temporal"};n.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(n.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(n.trackRenderer=this.trackRenderer.toJson());this.observationAger&&
(n.observationAger=this.observationAger.toJson());return n}});B.setObject("renderer.TemporalRenderer",D,c);return D})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(D,B,a,c,k,n,r,f,m,q){D=D([q],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,
colorStops:null,constructor:function(l){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof l&&(l=JSON.parse(l)),B.mixin(this,l),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(l){if(!this._supportsCanvas)return!1;var b=l.attributes.imageData;l=l.attributes.size;
if(!l)return null;var g=this._getContext(l[0],l[1]),e=g.getImageData(0,0,l[0],l[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&e.data instanceof window.CanvasPixelArray)for(var d=e.data,h=d.length;h--;)d[h]=b[h];else e.data.set(b);g.putImageData(e,0,0);return new f(g.canvas.toDataURL(),
l[0],l[1])},setColors:function(l){l&&(l instanceof Array||l.colors)&&(this.gradient=this._generateGradient(l.colors||l),this.colors=l);return this},setColorStops:function(l){l&&(l instanceof Array||l.colorStops)&&(this.gradient=this._generateGradient(l.colorStops||l),this.colorStops=l);return this},setMaxPixelIntensity:function(l){this.maxPixelIntensity=l;return this},setMinPixelIntensity:function(l){this.minPixelIntensity=l;return this},setField:function(l){this.field=l;return this},setFieldOffset:function(l){this.fieldOffset=
l;return this},setBlurRadius:function(l){this.blurRadius=l;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var l=B.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(l.fieldOffset=this.fieldOffset);a.forEach(l.colorStops,function(b){b.color=m.toJsonColor(b.color)});
return r.fixJson(l)},_getContext:function(l,b){this._canvas?(this._canvas.width=l,this._canvas.height=b):this._canvas=this._initCanvas(l,b);return this._canvas.getContext("2d")},_initCanvas:function(l,b){var g=c.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);g.width=l;g.height=b;document.body.appendChild(g);return g},_generateGradient:function(l,b){b||(b=512);for(var g=this._colorsToStops(l),e=this._getContext(1,b||512),
d=e.createLinearGradient(0,0,0,b),h=0,t;h<g.length;h++)t=g[h],d.addColorStop(t.ratio,t.color.toCss(!0));e.fillStyle=d;e.fillRect(0,0,1,b);return e.getImageData(0,0,1,b).data},_colorsToStops:function(l){var b=[];if(!l[0])return b;if(null!=l[0].ratio)b=a.map(l,function(z){return{ratio:z.ratio,color:this._toColor(z.color)}},this);else if(null!=l[0].value){var g=Infinity;b=-Infinity;var e=0,d;for(d=0;d<l.length;d++){var h=l[d].value;h<g&&(g=h);h>b&&(b=h)}e=b-g;this.maxPixelIntensity=b;this.minPixelIntensity=
g;b=a.map(l,function(z){var v=z.value;z=this._toColor(z.color);return{value:v,ratio:(v-g)/e,color:z}},this)}else{var t=l.length-1;b=a.map(l,function(z,v){return{color:this._toColor(z),ratio:v/t}},this)}return b},_toColor:function(l){l.toRgba||l.declaredClass||(l=new m(l));return l}});B.setObject("renderer.HeatmapRenderer",D,n);return D})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(D,B,a,c,k,n,r,f){var m={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};D=D(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(q){q=q||{};this.stretchType=m.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;a.mixin(this,q);this.colorRamp=f.fromJson(q.colorRamp)},toJson:function(){var q={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:a.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:a.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return n.fixJson(q)},toRenderingRule:function(q){q=q||{};var l=new r;l.functionName="Stretch";var b=this._convertStretchTypeEnumToIndex(this.stretchType),g={StretchType:b,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};n.isDefined(this.min)&&(g.Min=this.min);n.isDefined(this.min)&&(g.Max=this.max);3===b?(g.NumberOfStandardDeviations=this.numberOfStandardDeviations,l.outputPixelType="U8"):6===b?(g.MinPercent=parseFloat(this.minPercent),
g.MaxPercent=parseFloat(this.maxPercent),l.outputPixelType="U8"):5===b?l.outputPixelType="U8":9===b&&(g.SigmoidStrengthLevel=this.sigmoidStrengthLevel);l.functionArguments=g;l.variableName="Raster";return this.colorRamp?(b=new r,b.functionArguments=q.convertToColormap?{Colormap:f.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},b.variableName="Raster",b.functionName="Colormap",b.functionArguments.Raster=l,b):l},_convertStretchTypeEnumToIndex:function(q){var l=0;
q===m.TYPE_STANDARDDEVIATION?l=3:q===m.TYPE_HISTOGRAMEQUALIZATION?l=4:q===m.TYPE_MINMAX?l=5:q===m.TYPE_PERCENTCLIP?l=6:q===m.TYPE_SIGMOID&&(l=9);return l},_convertStretchTypeIndexToEnum:function(q){var l=m.TYPE_NONE;3===q?l=m.TYPE_STANDARDDEVIATION:4===q?l=m.TYPE_HISTOGRAMEQUALIZATION:5===q?l=m.TYPE_MINMAX:6===q?l=m.TYPE_PERCENTCLIP:9===q&&(l=m.TYPE_SIGMOID);return l}});a.mixin(D,m);a.setObject("renderer.StretchRenderer",D,k);return D})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,k){var n=D(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(r){if(B.isObject(r)){this._isRFTJson(r)&&(this._isTemplate=!0,this._templateJson=r);var f=0;this.functionName=r.rasterFunction||r.name;this.functionArguments=B.clone(r.rasterFunctionArguments||r.arguments);B.mixin(this,r);
if(r=this.functionArguments)if(r.Raster=this._toRasterFunction(r.Raster),r.Raster2=this._toRasterFunction(r.Raster2),r.DEM=this._toRasterFunction(r.DEM),r.FillRaster=this._toRasterFunction(r.FillRaster),r.Rasters&&r.Rasters.length)for(f=0;f<r.Rasters.length;f++)r.Rasters[f]=this._toRasterFunction(r.Rasters[f])}},_isRFTJson:function(r){return r.name&&r.arguments&&r["function"]&&r.hasOwnProperty("functionType")},_toRasterFunction:function(r){return r&&(r.rasterFunction||r.functionName)?new n(r):r},
_rfToJson:function(r){r&&"esri.layers.RasterFunction"===r.declaredClass&&(r=r.toJson());return r},toJson:function(){if(this._isTemplate)return this._templateJson;var r=B.clone(this.functionArguments||this.arguments);if(r&&(r.Raster=this._rfToJson(r.Raster),r.Raster2=this._rfToJson(r.Raster2),r.DEM=this._rfToJson(r.DEM),r.FillRaster=this._rfToJson(r.FillRaster),r.Rasters&&r.Rasters.length)){var f,m=[];for(f=0;f<r.Rasters.length;f++)m.push(this._rfToJson(r.Rasters[f]));r.Rasters=m}return k.filter({rasterFunction:this.functionName,
rasterFunctionArguments:r,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(q){if(null!==q&&void 0!==q)return!0})}});B.setObject("layers.RasterFunction",n,c);return n})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(D,B,a,c,k,n,r){function f(v){if(null==v||"algorithmic"!==v.type&&!v.fromColor)return v;
var y=v.declaredClass?new c:D.clone(v);y.fromColor=v.toColor;y.toColor=v.fromColor;y.algorithm=v.algorithm;return y}function m(v){if(null==v)return null;if("multipart"===v.type||v.colorRamps&&0<v.colorRamps.length){var y=v.declaredClass?new k:D.clone(v);y.colorRamps=B.map(v.colorRamps.slice().reverse(),function(C){return f(C)});return y}return f(v)}function q(v,y,C){if(!v)return{id:null,isInverted:!1};var F=v.name;F&&(v.fromColor||v.colorRamps)&&(v.name=void 0);var x=l(v,y,C);if(x)return F&&(v.name=
F),{id:x,isInverted:!1};x=l(v,y,C,!0);F&&(v.name=F);return x?{id:x,isInverted:!0}:F&&(x=l(v,y,C))?{id:x,isInverted:!1}:{id:null,isInverted:!1}}function l(v,y,C,F){if(v){F&&(v=m(v));y=y||h;C=C||t;var x=null;F=v.declaredClass;var u,w;if((u="string"===typeof v?v:v.name)&&B.some(C,function(A){if(A.name===u)return x=A.id,!0})&&x)return x;"esri.tasks.AlgorithmicColorRamp"===F?B.some(y,function(A){if(g(v.fromColor.toRgb(),A.fromColor)&&g(v.toColor.toRgb(),A.toColor))return x=A.id,!0},this):"esri.tasks.MultipartColorRamp"===
F&&B.some(y,function(A){if(v.colorRamps&&A.colorRamps&&v.colorRamps.length===A.colorRamps.length&&(w=v.colorRamps,!B.some(A.colorRamps,function(E,G){if(!g(w[G].fromColor.toRgb(),E.fromColor)||!g(w[G].toColor.toRgb(),E.toColor))return!0},this))){if(x)return!0;x=A.id}},this);return x}}function b(v){var y=new c,C=v.algorithm;y.fromColor=n.toDojoColor(v.fromColor);y.toColor=n.toDojoColor(v.toColor);C?"esriCIELabAlgorithm"===C?y.algorithm="cie-lab":"esriHSVAlgorithm"===C?y.algorithm="hsv":"esriLabLChAlgorithm"===
C&&(y.algorithm="lab-lch"):y.algorithm="hsv";return y}function g(v,y){if(!v||!y)return!1;v=v.slice(0,3);y=y.slice(0,3);return!B.some(v,function(C,F){if(C>y[F]+2||C<y[F]-2)return!0})}function e(v,y,C){v=r.toLAB(v);y=r.toLAB(y);return r.toRGB({l:v.l*(1-C)+C*y.l,a:v.a*(1-C)+C*y.a,b:v.b*(1-C)+C*y.b})}var d={},h=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,
254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,
56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,
110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,
113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,
127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,
139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,
142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,
154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,
158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,
170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,
173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,
187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,
190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},
{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,
96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,
204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,
9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,
11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,
12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,
12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,
11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,
9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,
102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,
11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,
249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,
253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,
255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,
10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,
13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,
16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,
17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,
18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,
17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],
toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,
15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,
167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,
203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,
237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,
153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},
{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,
27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],
toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],t=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",
id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},
{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",
name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",
type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",
name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",
name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",
name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],
z=new a({data:t});D.mixin(d,{predefinedColorRamps:h,predefinedColorRampNameMap:t,getColorRampName:function(v){v=q(v);return v.id?(v=z.query({id:v.id}),v[0]?v[0].name:null):null},fromJson:function(v){var y=null;if(!v)return y;"multipart"===v.type?(y=new k,y.colorRamps=B.map(v.colorRamps,function(C){return b(C)},this)):"algorithmic"===v.type&&(y=b(v));return y},colorsEqual:g,getColorRampId:q,invertColorRamp:m,convertColorRampToColormap:function(v,y){if(v&&y){var C=v.colorRamps?v.colorRamps.length:1,
F=[],x=[],u,w,A,E,G=0,H=0;for(G=0;G<C;G++)F[G]={},F[G].start=H,F[G].end=H+1/C,H=F[G].end;for(G=0;G<y;G++){var K=(G+.5)/y;B.forEach(F,function(I,J){K>=I.start&&K<I.end&&(E=(K-I.start)/(I.end-I.start),1<F.length?(u=r.getDojoColor(v.colorRamps[J].fromColor),w=r.getDojoColor(v.colorRamps[J].toColor)):(u=r.getDojoColor(v.fromColor),w=r.getDojoColor(v.toColor)),A=e(u,w,E),x.push([G,A.r,A.g,A.b]))},this)}return x}},interpolateLabColor:e});return d})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var r="esriCIELabAlgorithm";break;case "hsv":r="esriHSVAlgorithm";break;case "lab-lch":r="esriLabLChAlgorithm"}r={type:"algorithmic",algorithm:r};r.fromColor=k.toJsonColor(this.fromColor);r.toColor=k.toJsonColor(this.toColor);return r}});B.setObject("tasks.AlgorithmicColorRamp",
D,c);return D})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.ColorRamp",type:null});B.setObject("tasks.ColorRamp",D,c);return D})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(D,B,a,c,k,n){D=D(n,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",
constructor:function(){this.colorRamps=[]},addColorRamp:function(r){this.colorRamps.push(r)},toJson:function(){return{type:"multipart",colorRamps:a.map(this.colorRamps,function(r){return r.toJson()})}}});B.setObject("tasks.MultipartColorRamp",D,k);return D})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(D,B){var a={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],
[.0557,-.204,1.057]],matrixProduct:function(k,n){var r=[],f,m;if(k[0].length!==n.length)throw"dimensions do not match";var q=k.length,l=k[0].length,b=0;for(f=0;f<q;f++){for(m=b=0;m<l;m++)b+=k[f][m]*n[m];r.push(b)}return r},rgb2xyz:function(k){k=[k.r/255,k.g/255,k.b/255].map(function(n){return.04045>=n?n/12.92:Math.pow((n+.055)/1.055,2.4)});k=this.matrixProduct(this.COEF_RGB2XYZ,k);return{x:100*k[0],y:100*k[1],z:100*k[2]}},xyz2rgb:function(k){k=this.matrixProduct(this.COEF_XYZ2RGB,[k.x/100,k.y/100,
k.z/100]).map(function(n){return Math.min(1,Math.max(.0031308>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055,0))});return{r:Math.round(255*k[0]),g:Math.round(255*k[1]),b:Math.round(255*k[2])}},xyz2lab:function(k){k=[k.x/95.047,k.y/100,k.z/108.883].map(function(n){return n>Math.pow(6/29,3)?Math.pow(n,1/3):1/3*Math.pow(29/6,2)*n+4/29});return{l:116*k[1]-16,a:500*(k[0]-k[1]),b:200*(k[1]-k[2])}},lab2xyz:function(k){var n=k.l;k=[(n+16)/116+k.a/500,(n+16)/116,(n+16)/116-k.b/200].map(function(r){return r>6/29?
Math.pow(r,3):3*Math.pow(6/29,2)*(r-4/29)});return{x:95.047*k[0],y:100*k[1],z:108.883*k[2]}},lab2lch:function(k){var n=k.l,r=k.a,f=k.b;k=Math.sqrt(r*r+f*f);r=Math.atan2(f,r);r=0<r?r:r+2*Math.PI;return{l:n,c:k,h:r}},lch2lab:function(k){var n=k.c,r=k.h;return{l:k.l,a:n*Math.cos(r),b:n*Math.sin(r)}},rgb2lab:function(k){return this.xyz2lab(this.rgb2xyz(k))},lab2rgb:function(k){return this.xyz2rgb(this.lab2xyz(k))},rgb2lch:function(k){return this.lab2lch(this.xyz2lab(this.rgb2xyz(k)))},lch2rgb:function(k){return this.xyz2rgb(this.lab2xyz(this.lch2lab(k)))}},
c={rgb2hsv:function(k){var n=k.r,r=k.g;k=k.b;var f=Math.max(n,r,k),m=f-Math.min(n,r,k),q;0===m?q=0:f===n?q=(r-k)/m%6:f===r?q=(k-n)/m+2:f===k&&(q=(n-r)/m+4);0>q&&(q+=6);return{h:60*q,s:100*(0===m?0:m/f),v:100/255*f}},hsv2rgb:function(k){var n=(k.h+360)%360/60,r=k.v/100*255;k=k.s/100*r;var f=k*(1-Math.abs(n%2-1));switch(Math.floor(n)){case 0:n={r:k,g:f,b:0};break;case 1:n={r:f,g:k,b:0};break;case 2:n={r:0,g:k,b:f};break;case 3:n={r:0,g:f,b:k};break;case 4:n={r:f,g:0,b:k};break;case 5:case 6:n={r:k,
g:0,b:f};break;default:n={r:0,g:0,b:0}}n.r=Math.round(n.r+r-k);n.g=Math.round(n.g+r-k);n.b=Math.round(n.b+r-k);return n}};return{toRGB:function(k){var n;void 0!==k.r&&void 0!==k.g&&void 0!==k.b?n=k:void 0!==k.l&&void 0!==k.c&&void 0!==k.h?n=a.lch2rgb(k):void 0!==k.l&&void 0!==k.a&&void 0!==k.b?n=a.lab2rgb(k):void 0!==k.x&&void 0!==k.y&&void 0!==k.z?n=a.xyz2rgb(k):void 0!==k.h&&void 0!==k.s&&void 0!==k.v&&(n=c.hsv2rgb(k));return n},toHSV:function(k){if(void 0!==k.h&&void 0!==k.s&&void 0!==k.v)return k;
k=this.toRGB(k);return c.rgb2hsv(k)},toLAB:function(k){return void 0!==k.l&&void 0!==k.a&&void 0!==k.b?k:a.rgb2lab(this.toRGB(k))},toLCH:function(k){return void 0!==k.l&&void 0!==k.c&&void 0!==k.h?k:a.rgb2lch(this.toRGB(k))},toXYZ:function(k){return void 0!==k.x&&void 0!==k.y&&void 0!==k.z?k:a.rgb2xyz(this.toRGB(k))},getDojoColor:function(k){if(k){if(Array.isArray(k))return D.fromArray(k);if(void 0!==k.r&&void 0!==k.g&&void 0!==k.b)return k}},correctRGBLimits:function(k){var n=[k.r,k.g,k.b];B.forEach(n,
function(r,f){0>n[f]?n[f]=0:255<n[f]&&(n[f]=255);n[f]=Math.floor(n[f])});return{r:n[0],g:n[1],b:n[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(D,B,a,c,k,n,r,f){D=D(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(m){m=m||{};this.hillshadeType=m.hillshadeType||"traditional";this.azimuth=null!=m.azimuth?m.azimuth:
315;this.altitude=null!=m.altitude?m.altitude:45;this.zFactor=m.zFactor||1;this.scalingType=m.scalingType||"none";this.pixelSizePower=null!=m.pixelSizePower?m.pixelSizePower:.664;this.pixelSizeFactor=null!=m.pixelSizeFactor?m.pixelSizeFactor:.024;this.removeEdgeEffect=m.removeEdgeEffect||!1;this.colorRamp=f.fromJson(m.colorRamp)},toJson:function(){var m={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return n.fixJson(m)},toRenderingRule:function(m){}});a.setObject("renderer.ShadedReliefRenderer",D,k);return D})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(D,B,a,c,k,n,r,f,m){D=D(f,{declaredClass:"esri.renderer.ColormapRenderer",
constructor:function(q){this.colormapInfos=q&&q.colormapInfos},toJson:function(){var q=n.fixJson;var l={type:"rasterColormap",colormapInfos:B.map(this.colormapInfos||[],function(b,g){var e={};b.color&&null!==b.color&&3<=b.color.length&&(e.color=b.color,e.value=b.value||g,e.label=(b.label||g)+"");return q(e)})};l=a.mixin(this.inherited(arguments),l);return q(l)}});a.setObject("renderer.ColormapRenderer",D,k);return D})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel",
"../support/expressionUtils"],function(D,B,a,c){D.setObject("renderer.arcadeUtils",c,a);return c})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(D,B,a,c,k,n,r,f){D=new (D(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(m){var q=[];f.hasGeometryOperations(m)&&q.push(r.enableGeometryOperations());
return k(q)},isAsync:function(m){return!1},parse:function(m){return r.createSyntaxTree(m.expression)},compile:function(m){var q=B.clone(this.defaults.context);return m.syntaxTree?r.createFunction(m.syntaxTree,q):null},getEvalOptions:function(m){var q=m.feature;return{context:{vars:{$feature:q&&m.expression.hasVariable("$feature")?n.createFromGraphicLikeObject(q.geometry,q.attributes,m.layer):null},spatialReference:m.spatialReference}}}}));B.setObject("arcadeProfiles.labelingProfile",D,c);return D})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){var h=m("esri-pbf"),t=B(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(v){this._handleSuccess=
a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,v);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var v=new k(this._canceler);this._fetchDfd=v;this._result=null;this._sendRequest();return v.promise},_canceler:function(v){var y=v._pendingRequest;if(!v.isFulfilled()&&y&&!y.isFulfilled()){y.cancel();var C=y.results&&y.results[1]}v._pendingRequest=null;return C},_sendRequest:function(v){var y=this.query;
this.pagination&&(this._startPage=y.resultOffset=null==v?0:v,y.resultRecordCount=this.pageSize);v=this.requestOptions;this._fetchDfd._pendingRequest=q({url:this.url,content:y,handleAs:"pbf"===y.f?"arraybuffer":"json",callbackParamName:"callback",timeout:v&&v.timeout},v);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(v){this.pagination?(v.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(v.features):this._result=v,this._fetchDfd.progress(v),v.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(v),this._fetchDfd.resolve(v))},_handleError:function(v){this._fetchDfd.reject(v)}}),z=B(e,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(v,y){this._handler=
a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=y&&y.source;this.gdbVersion=y&&y.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(v,y,C,F,x){var u=x.assembly;v=this._encode(a.mixin({},this._url.query,{f:F&&F.format||"json"},v.toJson(u&&u[0])));var w=this._handler,
A=this._errorHandler;this.source&&(F={source:this.source.toJson()},v.layer=n.toJson(F));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);var E="pbf"===v.f;if(E){var G;h||(G="QueryTask.execute: 'pbf' format is not supported in your browser.");if(G)return v=new k,v.addErrback(function(H){A(H,C,x.dfd)}),v.reject(Error(G)),v}G=this.requestOptions;G=q({url:this._url.path+"/query",content:v,callbackParamName:"callback",handleAs:E?"arraybuffer":"json",timeout:G&&G.timeout},G);v=[G];E&&v.push(z.loadPBFReader());
(new r(v)).then(function(H){x.dfd.isFulfilled()||(H=H[0],H[0]?w(H[1],E,y,C,x.dfd):A(H[1],C,x.dfd))});return G},rawExecute:function(v,y,C){y=y||{};v=this._encode(a.mixin({},this._url.query,{f:y.format||"json"},v.toJson(C.assembly&&C.assembly[0])));this.source&&(v.layer=n.toJson({source:this.source.toJson()}));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);return(new t({url:this._url.path+"/query",query:v,requestOptions:this.requestOptions,pagination:y.pagination,pageSize:y.pageSize})).execute().then(null,
null,function(F){C.dfd.progress(F)}).then(a.hitch(this,function(F){this._successHandler([F],"onRawExecuteComplete",null,C.dfd)})).otherwise(a.hitch(this,function(F){this._errorHandler(F,null,C.dfd)}))},executeRelationshipQuery:function(v,y,C){v=this._encode(a.mixin({},this._url.query,{f:"json"},v.toJson()));var F=this._relationshipQueryHandler,x=this._errorHandler;this.gdbVersion&&(v.gdbVersion=this.gdbVersion);var u=new k(l._dfdCanceller),w=this.requestOptions,A=this._url.path;this.source&&void 0!==
this.source.mapLayerId&&null!==this.source.mapLayerId&&A.endsWith("/dynamicLayer")&&(A=A.slice(0,-13),A=A+"/"+this.source.mapLayerId);u._pendingDfd=q({url:A+"/queryRelatedRecords",content:v,callbackParamName:"callback",timeout:w&&w.timeout,load:function(E,G){F(E,G,y,C,u)},error:function(E){x(E,C,u)}},w);return u},executeForIds:function(v,y,C,F){var x=F.assembly;v=this._encode(a.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},v.toJson(x&&x[0])));var u=this._executeForIdsHandler,w=this._errorHandler;
this.source&&(x={source:this.source.toJson()},v.layer=n.toJson(x));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);x=this.requestOptions;return q({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:x&&x.timeout,load:function(A,E){u(A,E,y,C,F.dfd)},error:function(A){w(A,C,F.dfd)}},x)},executeForCount:function(v,y,C,F){var x=F.assembly;v=this._encode(a.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},v.toJson(x&&x[0])));var u=this._countHandler,w=this._errorHandler;
this.source&&(x={source:this.source.toJson()},v.layer=n.toJson(x));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);x=this.requestOptions;return q({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:x&&x.timeout,load:function(A,E){u(A,E,y,C,F.dfd)},error:function(A){w(A,C,F.dfd)}},x)},executeForExtent:function(v,y,C,F){var x=F.assembly;v=this._encode(a.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},v.toJson(x&&x[0])));var u=this._extentHandler,w=
this._errorHandler;this.source&&(x={source:this.source.toJson()},v.layer=n.toJson(x));this.gdbVersion&&(v.gdbVersion=this.gdbVersion);x=this.requestOptions;return q({url:this._url.path+"/query",content:v,callbackParamName:"callback",timeout:x&&x.timeout,load:function(A,E){u(A,E,y,C,F.dfd)},error:function(A){w(A,C,F.dfd)}},x)},_handler:function(v,y,C,F,x){try{v&&y&&(v=z.pbfDeps.optimizedFeatures.convertToFeatureSet(z.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(v)));var u=new d(v);this._successHandler([u],
"onComplete",C,x)}catch(w){this._errorHandler(w,F,x)}},_relationshipQueryHandler:function(v,y,C,F,x){try{var u=v.geometryType,w=v.spatialReference,A={};c.forEach(v.relatedRecordGroups,function(E){var G={};G.geometryType=u;G.spatialReference=w;G.features=E.relatedRecords;G=new d(G);if(null!=E.objectId)A[E.objectId]=G;else for(var H in E)E.hasOwnProperty(H)&&"relatedRecords"!==H&&(A[E[H]]=G)});this._successHandler([A],"onExecuteRelationshipQueryComplete",C,x)}catch(E){this._errorHandler(E,F,x)}},_executeForIdsHandler:function(v,
y,C,F,x){try{this._successHandler([v.objectIds],"onExecuteForIdsComplete",C,x)}catch(u){this._errorHandler(u,F,x)}},_countHandler:function(v,y,C,F,x){try{var u=v.features,w=v.objectIds;if(w)var A=w.length;else{if(u)throw Error("Unable to perform query. Please check your parameters.");A=v.count}this._successHandler([A],"onExecuteForCountComplete",C,x)}catch(E){this._errorHandler(E,F,x)}},_extentHandler:function(v,y,C,F,x){try{v.extent&&(v.extent=new b(v.extent)),this._successHandler([v],"onExecuteForExtentComplete",
C,x)}catch(u){this._errorHandler(u,F,x)}}});z.loadPBFReader=function(){var v=new k;z.pbfDeps?v.resolve():D(["./support/pbfDeps"],function(y){z.pbfDeps=y;v.isFulfilled()||v.resolve()});return v.promise};g._createWrappers(z);a.setObject("tasks.QueryTask",z,f);return z})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(D,B,a,c,k,n,r,f){var m=D(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=m.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(q){var l={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},b=q&&q.geometry||this.geometry,g=this.objectIds,e=this.outFields,d=this.outSpatialReference,h=this.groupByFieldsForStatistics,t=this.orderByFields,z=this.outStatistics;q=this.distance;b&&(l.geometry=b,l.geometryType=r.getJsonType(b),l.inSR=b.spatialReference.wkid||c.toJson(b.spatialReference.toJson()));g&&(l.objectIds=g.join(","));e&&(l.outFields=e.join(","));null!=this.returnCentroid&&(l.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(l.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(l.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(l.maxRecordCountFactor=this.maxRecordCountFactor);h&&(l.groupByFieldsForStatistics=h.join(","));t&&(l.orderByFields=t.join(","));if(z){var v=[];a.forEach(z,function(y){v.push(y.toJson())});l.outStatistics=c.toJson(v)}d?l.outSR=d.wkid||c.toJson(d.toJson()):b&&(l.outSR=b.spatialReference.wkid||c.toJson(b.spatialReference.toJson()));b=
this.timeExtent;l.time=b?b.toJson().join(","):null;(b=this.relationParam)&&this.spatialRelationship===m.SPATIAL_REL_RELATION&&(l.relationParam=b);q&&(l.distance=this.distance,this.hasOwnProperty("units")?l.units=this._units[this.units]||this._units.meters:l.units=this._units.meters);this.hasOwnProperty("start")&&(l.resultOffset=this.start,l.resultRecordCount=10,""===l.where&&(l.where="1\x3d1"));this.hasOwnProperty("num")&&(l.resultRecordCount=this.num);l.resultType=this.resultType;null!=this.cacheHint&&
(l.cacheHint=this.cacheHint);l.pixelSize=this.pixelSize?c.toJson(this.pixelSize.toJson()):null;l.multipatchOption=this.multipatchOption;this.quantizationParameters&&(l.quantizationParameters=c.toJson(this.quantizationParameters));l._ts=this._ts;return l}});B.mixin(m,f);B.setObject("tasks.Query",m,n);return m})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(D,B,a){B={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};D.setObject("tasks._SpatialRelationship",B,a);return B})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json",
"dojo/has","../kernel"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var n={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},r=this.objectIds,f=this.outFields,m=this.outSpatialReference,
q=this.orderByFields;r&&(n.objectIds=r.join(","));f&&(n.outFields=f.join(","));m&&(n.outSR=m.wkid||a.toJson(m.toJson()));q&&(n.orderByFields=q.join(","));n._ts=this._ts;return n}});B.setObject("tasks.RelationshipQuery",D,k);return D})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,
outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});B.setObject("tasks.StatisticDefinition",D,c);return D})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I){var J=-1!==b.renderer.toLowerCase().indexOf("svg"),L=-1!==b.renderer.toLowerCase().indexOf("canvas"),M=L?"canvas-2d":b.renderer,N=9>y("ie");r=10===y("ie");var O=void 0===y("ie")&&7==y("trident"),Y=r||O,ba=y("esri-touch"),ha=!!y("chrome"),U=h.isWebGLEnabled(),X=J&&y("esri-will-change"),Z=U||L;h=B(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(P,da){var ia=this._connects=[];this._map=P;this._useWillChange=
this._useGlobalTransform="css-transforms"===P.navigationMode&&X;if(Z){var xa=m.create("div",{style:{position:"absolute",overflow:"visible"}},da);this._surface={getEventSource:function(){return xa}};L&&(ia.push(c.connect(xa,"onmousedown",this,this._canvasDownHandler)),ia.push(c.connect(xa,"onmouseup",this,this._canvasUpHandler)),ia.push(c.connect(xa,"onclick",this,this._canvasClickHandler)));U&&(this._webglSurface=new t({map:P,node:xa}))}else xa=(this._surface=b.createSurface(da,P.width,P.height)).getEventSource(),
this._useWillChange&&q.set(xa,"will-change","transform"),q.set(xa=N?xa.parentNode:xa,{overflow:"visible",position:"absolute"});ia.push(c.connect(P,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ia.push(c.connect(P,"onPan",this,"_onPanHandler")),ia.push(c.connect(P,"onPanEnd",this,"_onPanEndHandler")),ia.push(c.connect(P,"onExtentChange",this,"_onExtentChangeHandler")));return xa},_reorderLayer:function(P,da,ia){da=da.getEventSource();Z&&"svg"===P.surfaceType&&(da=da.parentNode);m.place(da,
this._surface.getEventSource(),ia)},_onPanHandler:function(P,da){var ia=this._map.__visibleRect,xa=ia.x+da.x;ia=ia.y+da.y;this._panDx=xa;this._panDy=ia;Z||q.set(this._surface.getEventSource(),z._css.names.transform,z._css.translate(xa,ia))},_onPanEndHandler:function(P,da){var ia=this._map.__visibleRect,xa=ia.x;ia=ia.y;this._panDx=xa;this._panDy=ia;Z||q.set(this._surface.getEventSource(),z._css.names.transform,z._css.translate(xa,ia))},_onExtentChangeHandler:function(P,da,ia,xa){ia&&(this._panDy=this._panDx=
0,Z||q.set(this._surface.getEventSource(),z._css.names.transform,z._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(P,da,ia){P=this._surface.getEventSource();var xa=this._map,Ca;N&&q.set(P=P.parentNode,{width:da+"px",height:ia+"px",clip:"rect(0px "+da+"px "+ia+"px 0px)"});f.set(P,"width",da);f.set(P,"height",ia);this._surface.declaredClass||n.forEach(P.childNodes,function(Fa){f.set(Fa,"width",da);f.set(Fa,"height",ia)});xa.loaded&&
(xa.graphics.suspended||(xa.graphics._resized=!0),n.forEach(xa.graphicsLayerIds,function(Fa){Ca=xa.getLayer(Fa);Ca.suspended||(Ca._resized=!0,Ca._childLayer&&(Ca._childLayer._resized=!0));Ca._updateSVGFilters(null,null,da,ia)}),xa.graphics._updateSVGFilters(null,null,da,ia),xa._labels&&xa._labels._updateSVGFilters(null,null,da,ia))},_cleanUp:function(){n.forEach(this._connects,c.disconnect,c);this._map=this._surface=null},_processEvent:function(P){var da=this._map;P.screenPoint=new E(P.pageX-da.position.x,
P.pageY-da.position.y);P.mapPoint=da.toMap(P.screenPoint)},_canvasDownHandler:function(P){this._processEvent(P);this._downPt=P.screenPoint.x+","+P.screenPoint.y},_canvasUpHandler:function(P){this._processEvent(P);this._upPt=P.screenPoint.x+","+P.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(P,da,ia,xa){if(!P.visible||!da)return!1;var Ca=da.getTransformedBoundingBox();if(Ca){var Fa=new G(Ca[0].x,Ca[0].y,Ca[2].x,Ca[2].y);delete Fa.spatialReference;return ba?Fa.intersects(ia):Fa.contains(xa)}return n.some(da.children||
[],function(Ma){Ca=Ma.getTransformedBoundingBox();Fa=new G(Ca[0].x,Ca[0].y,Ca[2].x,Ca[2].y);delete Fa.spatialReference;return ba?Fa.intersects(ia):Fa.contains(xa)})},_canvasClickHandler:function(P){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(P);var da=this._map,ia=n.map(da.graphicsLayerIds,function(ya){return da.getLayer(ya)});ia.push(da.graphics);ia.reverse();ia=n.filter(ia,function(ya){return ya.loaded&&!ya.hasWebGLSurface()&&ya._mouseEvents&&!ya.suspended&&(!v.isDefined(ya.opacity)||
0<ya.opacity)});var xa=P.screenPoint,Ca=this._tolerance,Fa=xa.x-Ca,Ma=xa.y+Ca,Sa=xa.x+Ca;Ca=xa.y-Ca;var Ba=new G(Fa,Ca,Sa,Ma);Fa=da.toMap(new E(Fa,Ma));Sa=da.toMap(new E(Sa,Ca));Ma=Fa.spatialReference._getInfo();var ca=new G(G.prototype._normalizeX(Fa.x,Ma).x,Fa.y,G.prototype._normalizeX(Sa.x,Ma).x,Sa.y,Fa.spatialReference),ua;delete Ba.spatialReference;n.some(ia,function(ya){ya=n.filter(ya.graphics,function(pa){return this._isPrimaryMatch(pa,pa.getDojoShape(),Ba,xa)||!(!pa._bgShape||!this._isPrimaryMatch(pa,
pa._bgShape,Ba,xa))},this);ya.reverse();if(0<ya.length){var ta;n.some(ya,function(pa){return pa.geometry&&ca.intersects(pa.geometry)?(ta=pa,!0):!1});if(ta)return ua=ta,!0}return!1},this);ua&&(ia=ua.getLayer())&&(P.graphic=ua,ia.onClick(P))}}});d=B(d,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:M,webglEnabled:U,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(P,da){P=
P||{};if(k.isString(P)||k.isObject(P)&&(P.layerDefinition||P.query))P=da;this._params=k.mixin({displayOnPan:!0,drawMode:!0,styling:!0},P);var ia=this._params.dataAttributes;"string"===typeof ia&&(ia=[ia]);this.styling=J?this._params.styling:!0;this.dataAttributes=ia;this.infoTemplate=P&&P.infoTemplate;this.graphics=[];this._draw=k.hitch(this,this._draw);this._refresh=k.hitch(this,this._refresh);this._acquireSVGMarker=k.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=k.hitch(this,this._evalSurfaceType);
this._setSurfaceType=k.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(P){this._params.drawMode=P},suspendGraphics:function(P){this._suspendGraphics=P;n.forEach(this.graphics,function(da){da._suspended=P})},setWebGLEnabled:function(P){var da=this.webglEnabled;this.webglEnabled=(P||!1)&&U;da!==this.webglEnabled&&
(this._evalSurfaceType(),this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(P){return P&&"webgl"===P.surfaceType?"webgl":M},_evalSurfaceType:function(P){U&&(P?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;var P=this._canUseWebGLSurface()?"webgl":M;this.surfaceType!==P?(this.surfaceType=P,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(k.hitch(this,function(P){this._webglDepsPromise=null;P&&"cancel"===P.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var P=this._map,da=this._div;P&&da&&this._getSurfaceType(da)!==this.surfaceType&&(P._detachGraphicsLayer(this),P._attachGraphicsLayer(this))},_canUseWebGLSurface:function(P){P=P||this._map;return this.webglEnabled&&(!P||P.webglEnabled&&(P.ownsWebGLContext(this)||P.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(P){var da=
new a;!this.webglDeps&&this._canUseWebGLSurface(P)?D(["./support/webglDeps"],k.hitch(this,function(ia){this.webglDeps=ia;da.isFulfilled()||da.resolve()})):da.resolve();return da.promise},_setMap:function(P,da){this.inherited(arguments);this._map=P;this._evalSurfaceType(!0);this._webglChangeMapHandle=P.on("webgl-enabled-change",k.hitch(this,function(){this._evalSurfaceType()}));this._wrap=P.wrapAround180;this._srInfo=P.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())P.acquireWebGLContext(this),
this._div=P._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,P.width,P.height,this);else{if("svg"===this.surfaceType)if(Z){da=b.createSurface(da.getEventSource(),P.width,P.height);var ia=da.getEventSource();q.set(ia,{position:"absolute",overflow:"visible",pointerEvents:"none"});P._gc._useWillChange&&q.set(ia,"will-change","transform");this._div=da.createGroup();q.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=da.createGroup();else da=b.createSurface(da.getEventSource(),
P.width,P.height),q.set(da.rawNode,"position","absolute"),this._div=da.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=k.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(P,da){P.releaseWebGLContext(this);"webgl"===this._div.surfaceType?P._gc._webglSurface.destroyRenderer(this._div):(n.forEach(this.graphics,function(ia){ia._shape=null}),
"svg"===this.surfaceType?Z?(da=this._div.parent,this._div.clear(),da.remove(this._div),m.destroy(this._div.getEventSource()),m.destroy(da.getEventSource())):(this._div.clear(),da.remove(this._div),m.destroy(this._div.getEventSource())):(da=this._div.getParent(),da._parent={},m.destroy(da.rawNode),da.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var P=this.opacity;v.isDefined(P)&&1>P&&this.setOpacity(P,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||F.hide(this._div.getEventSource())},_onExtentChangeHandler:function(P,da,ia,xa){clearTimeout(this._wakeTimer);this._wakeTimer=null;ia?(P=this._map.__visibleRect,da=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(da,P.x,P.y,!0),this._renderProto&&da.surface.pendingRender?this._dirty=!0:this.suspended||F.show(da.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var P=this._div;this._dirty&&(delete this._dirty,this.suspended||F.show(P.getEventSource()));return this._renderProto.apply(P,arguments)},_refresh:function(P){if(!this.hasWebGLSurface()){var da=this.graphics,ia=da.length,
xa,Ca=this._draw;for(xa=0;xa<ia;xa++)Ca(da[xa],P)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var P={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(P=this._div.getTransform()):P=this._map._gc._getTransform());return P},_onPanHandler:function(P,da){this._panDx=da.x;this._panDy=da.y;var ia=this._map.__visibleRect;this._updateTransform(this._div,ia.x+da.x,ia.y+da.y);O&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(P,da){var ia=this._map.__visibleRect;this._params._child||da.x===this._panDx&&da.y===this._panDy?(this._updateSVGFilters(-ia.x,-ia.y),this._updateSVGMarkers()):this._updateTransform(this._div,ia.x,ia.y,!0);this._refresh(!1);
if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){F.hide(this._div.getEventSource())},_onPanEndHandler:function(){var P=this._map.__visibleRect,da=this._div;this._updateTransform(da,P.x,P.y,!0);this._refresh(!1);this._renderProto&&da.surface.pendingRender?this._dirty=!0:F.show(da.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(P,da,ia,xa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?P.setTransform(g.translate({x:da,y:ia})):Z&&
q.set(this._div.parent.getEventSource(),z._css.names.transform,z._css.translate(da,ia)),xa&&(this._updateSVGFilters(-da,-ia),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);F.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(P){this.inherited(arguments);P.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(k.hitch(this,function(){this.suspended||
this._map.__zooming||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var P=this._map,da=c.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=da(P,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=da(P,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=da(P,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=da(P,"onPanEnd",this,"_onPanEndHandler"));
this._onZoomStartHandler_connect=da(P,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=da(P,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var P=c.disconnect;P(this._onExtentChangeHandler_connect);P(this._onZoomStartHandler_connect);P(this._onPanHandler_connect);P(this._onPanStartHandler_connect);P(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=
this._onPanEndHandler_connect=null},_updateExtent:function(P){var da=P.geometry;if(!da)P._extent=null;else if(!(P._extent=da.getExtent())){if("esri.geometry.Point"===da.declaredClass){var ia=da.x;var xa=da.y}else if("esri.geometry.Multipoint"===da.declaredClass)ia=da.points[0][0],xa=da.points[0][1];else{P._extent=null;return}P._extent=new G(ia,xa,ia,xa,da.spatialReference)}},_intersects:function(P,da,ia){var xa=P.spatialReference,Ca=da.spatialReference,Fa=xa&&Ca&&!xa.equals(Ca)&&xa._canProject(Ca)&&
4326===Ca.wkid;if(this._wrap&&!ia){ia=[];xa=P._getFrameWidth();var Ma=this._srInfo,Sa=P._clip?P._getAvailExtent():P.extent,Ba,ca=[];var ua=da._partwise;Fa&&(Sa=P.geographicExtent,Ma=Ca._getInfo());P=Sa._getParts(Ma);if(ua&&ua.length)for(da=[],Ca=0,Fa=ua.length;Ca<Fa;Ca++)da=da.concat(ua[Ca]._getParts(Ma));else da=da._getParts(Ma);Ca=0;for(Fa=da.length;Ca<Fa;Ca++){var ya=da[Ca];Ma=0;for(Sa=P.length;Ma<Sa;Ma++){var ta=P[Ma];if(ta.extent.intersects(ya.extent))for(ua=0,Ba=ya.frameIds.length;ua<Ba;ua++)ia.push((ta.frameIds[0]-
ya.frameIds[ua])*xa)}}Ca=0;for(Fa=ia.length;Ca<Fa;Ca++)ua=ia[Ca],n.indexOf(ia,ua)===Ca&&ca.push(ua);return ca.length?ca:null}return(Fa?P.geographicExtent:P.extent).intersects(da)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(P,da){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ia=P._extent,xa,Ca,Fa=!J||this.styling,Ma=J&&this.dataAttributes,Sa=P.getDojoShape(),
Ba;if(!P._suspended&&P.visible&&ia&&(xa=this._intersects(this._map,ia,P.geometry._originOnly))&&(Ca=Fa?this._getSymbol(P):this._defaultMarker)){if(P._offsets&&P._offsets.join(",")===xa.join(",")?Ba=!0:P._offsets=xa,!Sa||da||!Ba){var ca=P.geometry.type;ia={graphic:P};var ua=P._bgShape,ya=Fa&&!P.symbol?this._getRenderer(P):null,ta=ya&&ya.backgroundFillSymbol;if("point"===ca)this._isInvalidShape(Ca,Sa)&&this._removeShape(P),P._shape=this._drawPoint(this._div,P.geometry,Ca,P.getDojoShape(),xa,ya,P),Fa&&
this._symbolizePoint(P.getDojoShape(),Ca,ya,P);else if("multipoint"===ca)this._drawMarkers(P,Ca,xa,ya),Fa&&this._symbolizeMarkers(P,Ca,ya);else{var pa;ca=Ca;var Aa;Fa&&(ca=(pa="simplemarkersymbol"===Ca.type||"picturemarkersymbol"===Ca.type||"textsymbol"===Ca.type?Ca:null)?ta:Ca);if(Fa&&ca&&-1<ca.type.indexOf("fillsymbol")){var T=this._bgGroup;var ea=!(!T||!pa)}ua&&!ea&&this._removeBgShape(P);if(ca){!ea&&(this._isInvalidShape(ca,P._shape)||P._shape&&P._shape._isCentroidMarker)&&this._removeShape(P,
!1);if(Aa=this._drawShape(P,xa,T||this._div,ea?ua:P.getDojoShape()))Aa._isCentroidMarker=!1;Fa&&this._symbolizeShape(Aa,ca,ya,ca===ta,P);P[ea?"_bgShape":"_shape"]=Aa}if(pa){(this._isInvalidShape(pa,P._shape)||P._shape&&!P._shape._isCentroidMarker)&&this._removeShape(P,!1);var na=P.geometry.getCentroid();if(Aa=na&&this._drawPoint(this._div,na,pa,P._shape,xa,ya,P))Aa._isCentroidMarker=!0,this._symbolizePoint(Aa,pa,ya,P);P._shape=Aa}}L||(P._bgShape&&this._initNode(P,P._bgShape,P._bgShape!==ua,ia,Ma),
P._shape&&this._initNode(P,P._shape,P._shape!==Sa,ia,Ma));P._applyDataAttrs();ia.node=P.getNode();this.onGraphicDraw(ia)}}else Sa&&this._removeShape(P)}catch(V){this._errorHandler(V,P)}},_initNode:function(P,da,ia,xa,Ca){if(da=da&&da.getNode())da.e_graphic=P,this._addDataAttrs(P,Ca,da),ia&&(xa.node=da,this.onGraphicNodeAdd(xa))},_removeShape:function(P,da,ia){var xa=P.getDojoShape(),Ca=xa&&xa.getNode();xa&&!ia&&(xa.removeShape(),xa.destroy());P._shape=P._offsets=null;!1!==da&&this._removeBgShape(P,
ia);if(Ca&&(Ca.e_graphic=null,!L))this.onGraphicNodeRemove({graphic:P,node:Ca})},_removeBgShape:function(P,da){var ia=P._bgShape,xa=ia&&ia.getNode();ia&&!da&&(ia.removeShape(),ia.destroy());P._bgShape=null;if(xa&&(xa.e_graphic=null,!L))this.onGraphicNodeRemove({graphic:P,node:xa})},_addDataAttrs:function(P,da,ia){var xa=P.attributes,Ca,Fa=da?da.length:0,Ma=this._getRenderer(P);if(ia&&xa){for(Ca=0;Ca<Fa;Ca++)(ia=da[Ca])&&P.attr("data-"+ia,xa[ia]);!this.styling&&Ma&&(Ma.getBreakIndex?(da=Ma.getBreakIndex(P),
P.attr("data-class-break",-1!==da?da:null)):Ma.getUniqueValueInfo&&(da=Ma.getUniqueValueInfo(P),P.attr("data-unique-value",da?da.value:null)))}},_drawShape:function(P,da,ia,xa){P=P.geometry;var Ca=P.type,Fa=this._map,Ma=Fa.extent,Sa=Fa.width,Ba=Fa.height;Fa=Fa.__visibleRect;var ca=[],ua;var ya="extent"===Ca;if("rect"===Ca||ya)ca={x:0,y:0,spatialReference:P.spatialReference},ca.x=ya?P.xmin:P.x,ca.y=ya?P.ymax:P.y,Ca=K.toScreenPoint(Ma,Sa,Ba,ca),ca.x=ya?P.xmax:P.x+P.width,ca.y=ya?P.ymin:P.y+P.height,
P=K.toScreenPoint(Ma,Sa,Ba,ca),da={x:Ca.x-Fa.x+da[0],y:Ca.y-Fa.y,width:Math.abs(P.x-Ca.x),height:Math.abs(P.y-Ca.y)},0===da.width&&(da.width=1),0===da.height&&(da.height=1),xa=this._drawRect(ia,xa,da);else if("polyline"===Ca||"polygon"===Ca){ya=0;for(ua=da.length;ya<ua;ya++)ca=ca.concat(K._toScreenPath(Ma,Sa,Ba,P,-Fa.x+da[ya],-Fa.y));xa=this._drawPath(ia,xa,ca);this._rendererLimits&&("polyline"===Ca?this._clipPolyline(xa,P):this._clipPolygon(xa,P))}return xa},_drawRect:function(P,da,ia){return da?
da.setShape(ia):P.createRect(ia)},_drawImage:function(P,da,ia){return da?da.setShape(ia):P.createImage(ia)},_drawCircle:function(P,da,ia){return da?da.setShape(ia):P.createCircle(ia)},_drawPath:function(){return N?function(P,da,ia,xa){ia=xa?ia:ia.join(" ");if(da)return da.setShape(ia);da=P.createObject(xa?b.Path:b.EsriPath,ia);P._overrideSize(da.getEventSource());return da}:function(P,da,ia,xa){ia=xa?ia:ia.join(" ");return da?da.setShape(ia):P.createPath(ia)}}(),_drawText:function(P,da,ia){return da?
da.setShape(ia):P.createText(ia)},_evalSDRenderer:function(P){var da=this._map,ia=this.renderer,xa,Ca=this._rndForScale;da&&da.loaded&&ia&&ia.getRendererInfo&&(xa="zoom"===ia.rangeType?ia.getRendererInfoByZoom(da.getZoom()):ia.getRendererInfoByScale(da.getScale()));this._rndForScale=xa&&xa.renderer;P||this._rndForScale==Ca||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(P){var da=this._rndForScale||this.renderer;P&&da&&da.getObservationRenderer&&(da=da.getObservationRenderer(P));
return da},_getSymbol:function(P){var da=this._getRenderer();return P.symbol||da&&da.getSymbol(P)},_getVariable:function(P,da,ia){if(P)var xa=(P=P.getVisualVariablesForType(da,ia))&&P[0];return xa},_applyOpacity:function(P,da,ia,xa){da=da.getOpacity(xa,{opacityInfo:ia});null!=da&&(P=new C(P),P.a=da);return P},_symbolizeShape:function(P,da,ia,xa,Ca){var Fa=da.getStroke(),Ma=da.getFill(),Sa=da.type,Ba=-1!==Sa.indexOf("linesymbol"),ca=-1!==Sa.indexOf("fillsymbol")?null:this._getVariable(ia,"sizeInfo",
!1),ua=this._getVariable(ia,"colorInfo",!1),ya=this._getVariable(ia,"opacityInfo",!1),ta=Ba?"none"!==da.style:da.outline&&"none"!==da.outline.style,pa=Ba?null:this._getVariable(ia,"sizeInfo","outline");ca=(ca=xa?pa:pa||ca)?ia.getSize(Ca,{sizeInfo:ca,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;xa&&(ua=ya=null);if((ua||ya)&&"picturefillsymbol"!==Sa)if(Ba){var Aa=Fa&&Fa.color;ua&&(Aa=ia.getColor(Ca,{colorInfo:ua})||Aa);Aa&&ya&&(Aa=this._applyOpacity(Aa,ia,ya,Ca))}else if(Ma&&
Ma.toCss){var T=Ma;ua&&(T=ia.getColor(Ca,{colorInfo:ua})||T);T&&ya&&(T=this._applyOpacity(T,ia,ya,Ca))}P.setStroke(!ta||null==ca&&!Aa?Fa:k.mixin({},Fa,null!=ca?{width:ca}:null,Aa&&{color:Aa})).setFill(T||Ma);Ba&&w.applyLineMarker(P,da,Aa,this._acquireSVGMarker)},_smsToPath:function(){return N?function(P,da,ia,xa,Ca,Fa,Ma,Sa,Ba){switch(da){case P.STYLE_SQUARE:return["M",Ca+","+Ma,"L",Fa+","+Ma,Fa+","+Sa,Ca+","+Sa,"X","E"];case P.STYLE_CROSS:return["M",ia+","+Ma,"L",ia+","+Sa,"M",Ca+","+xa,"L",Fa+","+
xa,"E"];case P.STYLE_X:return["M",Ca+","+Ma,"L",Fa+","+Sa,"M",Ca+","+Sa,"L",Fa+","+Ma,"E"];case P.STYLE_DIAMOND:return["M",ia+","+Ma,"L",Fa+","+xa,ia+","+Sa,Ca+","+xa,"X","E"];case P.STYLE_TARGET:return["M",Ca+","+Ma,"L",Fa+","+Ma,Fa+","+Sa,Ca+","+Sa,Ca+","+Ma,"M",Ca-Ba+","+xa,"L",Ca+","+xa,"M",ia+","+(Ma-Ba),"L",ia+","+Ma,"M",Fa+Ba+","+xa,"L",Fa+","+xa,"M",ia+","+(Sa+Ba),"L",ia+","+Sa,"E"]}}:function(P,da,ia,xa,Ca,Fa,Ma,Sa,Ba){switch(da){case P.STYLE_SQUARE:return["M",Ca+","+Ma,Fa+","+Ma,Fa+","+
Sa,Ca+","+Sa,"Z"];case P.STYLE_TRIANGLE:return["M",ia+","+Ma,Fa+","+Sa,Ca+","+Sa,"Z"];case P.STYLE_CROSS:return["M",ia+","+Ma,ia+","+Sa,"M",Ca+","+xa,Fa+","+xa];case P.STYLE_X:return["M",Ca+","+Ma,Fa+","+Sa,"M",Ca+","+Sa,Fa+","+Ma];case P.STYLE_DIAMOND:return["M",ia+","+Ma,Fa+","+xa,ia+","+Sa,Ca+","+xa,"Z"];case P.STYLE_TARGET:return P=["M",Ca+","+Ma,Fa+","+Ma,Fa+","+Sa,Ca+","+Sa,Ca+","+Ma],Ba&&P.push("M",Ca-Ba+","+xa,Ca+","+xa,"M",ia+","+(Ma-Ba),ia+","+Ma,"M",Fa+Ba+","+xa,Fa+","+xa,"M",ia+","+(Sa+
Ba),ia+","+Sa),P}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(P,da){var ia=da&&da.shape&&da.shape.type,xa=P&&P.type,Ca=P&&P.style;"rect"===ia&&(ia="path");xa&&(Ca=this._typeMaps[xa]||Ca);this._pathStyles[Ca]&&(Ca="path");return"shieldlabelsymbol"===xa?!0:!(!ia||!Ca||ia===Ca)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,
_fallbackFont:"Arial",_drawPoint:function(P,da,ia,xa,Ca,Fa,Ma){var Sa=ia.type,Ba=this._map,ca=Ba.__visibleRect,ua=K.toScreenPoint(Ba.extent,Ba.width,Ba.height,da).offset(-ca.x+Ca[0],-ca.y);ca=ua.x;var ya=ua.y;da=[];var ta=this._getVariable(Fa,"rotationInfo",!1);ta=ta?Fa.getRotationAngle(Ma,{rotationInfo:ta}):null;var pa=this._getVariable(Fa,"sizeInfo",!1);Ba=null!=Ma.size?Ma.size:pa&&Fa.getSize(Ma,{sizeInfo:pa,shape:ia.style,resolution:Ba.getResolutionInMeters(),scale:Ba.getScale()});ta&&da.push(g.rotategAt(ta,
ua));if(0!==ia.xoffset||0!==ia.yoffset){var Aa=g.translate(ia.xoffset,-ia.yoffset);da.push(Aa)}0!==ia.angle&&da.push(g.rotategAt(ia.angle,ua));if("simplemarkersymbol"===Sa){var T=ia.style;Fa=Math.round;null!=Ba?Aa&&(null!=Aa.dx&&(Aa.dx=Aa.dx/ia.size*Ba),null!=Aa.dy&&(Aa.dy=Aa.dy/ia.size*Ba)):Ba=ia.size;switch(T){case u.STYLE_SQUARE:case u.STYLE_TRIANGLE:case u.STYLE_CROSS:case u.STYLE_X:case u.STYLE_DIAMOND:ia=isNaN(Ba)?16:Ba/2;T=this._drawPath(P,xa,this._smsToPath(u,T,ca,ya,Fa(ca-ia),Fa(ca+ia),Fa(ya-
ia),Fa(ya+ia)));break;case u.STYLE_TARGET:Ma=ia._targetWidth/2;Aa=ia._targetHeight/2;T=this._drawPath(P,xa,this._smsToPath(u,T,ca,ya,Fa(ca-Ma),Fa(ca+Ma),Fa(ya-Aa),Fa(ya+Aa),ia._spikeSize));break;case u.STYLE_PATH:T=this._drawPath(P,xa,ia.path,!0);ia=T.getBoundingBox();P=this._getScaleMatrix(ia,Ba);1===P.xx&&1===P.yy||da.push(g.scaleAt(P.xx,P.yy,ua));da.push(g.translate(-(ia.x+ia.width/2)+ca,-(ia.y+ia.height/2)+ya));break;default:ia=isNaN(Ba)?16:Ba/2,T=this._drawCircle(P,xa,{cx:ca,cy:ya,r:ia})}}else if("shieldlabelsymbol"===
Sa)T=ia.width,ua=ia.height,xa=P.createGroup(),T=P.createImage({x:ca-T/2,y:ya-ua/2,width:T,height:ua,src:ia.url}),xa.add(T),null!=ia.font&&(ya+=.2*ia.getHeight(),P=P.createText({type:"text",text:ia.text,x:ca,y:ya,align:"middle",decoration:ia.decoration,rotated:ia.rotated,kerning:ia.kerning}),P.setFont(ia.font),P.setFill(ia.color),xa.add(P)),T=xa;else if("picturemarkersymbol"===Sa){if(null==Ba?(T=ia.width,ua=ia.height):(ua=Ba,T=ia.width/ia.height*ua,Aa&&(null!=Aa.dx&&(Aa.dx=Aa.dx/ia.width*T),null!=
Aa.dy&&(Aa.dy=Aa.dy/ia.height*ua))),T=this._drawImage(P,xa,{x:ca-T/2,y:ya-ua/2,width:T,height:ua,src:ia.url}),J&&(P=T.getNode()))ia=(ia=this._getVariable(Fa,"opacityInfo",!1))?Fa.getOpacity(Ma,{opacityInfo:ia}):null,null!=ia?P.setAttribute("opacity",ia):P.setAttribute("opacity",1)}else if("textsymbol"===Sa){if(Fa=ia.font){T=null!=Ba;Ma=Fa.family&&!this._reArialFont.test(Fa.family);if(T||Ma||L)Fa=new Fa.constructor(Fa.toJson());T&&Fa.setSize(Ba);L&&(Fa.size+="px");Ma&&Fa.setFamily(Fa.family+","+this._fallbackFont)}T=
this._drawText(P,xa,{type:"text",text:ia.text,x:ca,y:ya,align:ia.getSVGAlign(),decoration:ia.decoration||Fa&&Fa.decoration,rotated:ia.rotated,kerning:ia.kerning});Fa&&T.setFont(Fa);J&&(P=T.getNode(),ca=ia.getSVGBaseline(),ya=ia.getSVGBaselineShift(),P&&(P.setAttribute("dominant-baseline",ca),ya&&P.setAttribute("baseline-shift",ya),this._applyHalo(T,ia.haloColor,ia.haloSize)))}T.setTransform(g.multiply(da));T._wrapOffsets=Ca;return T},_acquireSVGMarker:function(P,da,ia,xa){P=this._getSVGMarkerId(da,
xa);var Ca=this._getSVGMarker(P);Ca||(Ca=w.createSVGMarker(da,P,ia,xa),this._div.getParent().defNode.appendChild(Ca),this._lineMarkers[P]=Ca);return Ca},_getSVGMarkerId:function(P,da){return"marker_"+this._map.id+"_"+P.r+"_"+P.g+"_"+P.b+"_"+da},_getSVGMarker:function(P){return this._lineMarkers[P]},_updateSVGMarkers:function(){if(J&&Y){var P=this._lineMarkers,da;for(da in P){var ia=P[da];ia.setAttribute("id",da+"_temp");ia.setAttribute("id",da)}}},_applyHalo:function(P,da,ia){var xa=da&&ia?this._getHaloId(da,
ia):null;P.setFilter(da&&ia?y("webkit")||y("ff")?this._getDilateFilter(da,ia,xa):this._getOffsetFilter(da,ia,xa):null)},_getDilateFilter:function(P,da,ia){var xa=this._getSVGFilter(ia);xa||(xa=this._createSVGFilter({id:ia},[e.feMorphology({operator:"dilate",radius:da,result:"dilated"}),e.feFlood({"flood-color":P.toCss(!0)}),e.feComposite({in2:"dilated",operator:"in",result:"composite"}),e.feMerge("composite","SourceGraphic")]));return xa},_getOffsetFilter:function(P,da,ia){var xa=this._getSVGFilter(ia);
if(!xa){P=P.toCss(!0);xa=this._offsetPrimitives;var Ca,Fa=xa.length,Ma=[],Sa=[];for(Ca=0;Ca<Fa;Ca++){var Ba=xa[Ca],ca="offset"+Ba.dir,ua="composite"+Ba.dir;Sa.push(ua);Ma.push(e.feOffset({dx:Ba.dx*da,dy:Ba.dy*da,"in":"SourceAlpha",result:ca}),e.feFlood({"flood-color":P}),e.feComposite({in2:ca,operator:"in",result:ua}))}Sa.push("SourceGraphic");Ma.push(e.feMerge.apply(e.feMerge,Sa));xa=this._createSVGFilter({id:ia},Ma)}return xa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",
dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(P,da){return"halo_"+this._map.id+"_"+this.id+"_"+P.r+"_"+P.g+"_"+P.b+"_"+P.a+"_"+da},_getSVGFilter:function(P){return this._svgFilters[P]},_createSVGFilter:function(P,da){var ia=e.createFilter(P,da),xa=this._map,Ca=xa.__visibleRect;ia.x=-Ca.x;ia.y=-Ca.y;ia.width=xa.width;ia.height=xa.height;return this._svgFilters[P.id]=ia},_updateSVGFilters:function(P,da,ia,xa){var Ca=
this._svgFilters,Fa,Ma,Sa;for(Ma in Ca)if(Fa=Ca[Ma]){if(Sa=l.byId(Ma))null!=P&&Sa.setAttribute("x",P),null!=da&&Sa.setAttribute("y",da),null!=ia&&Sa.setAttribute("width",ia),null!=xa&&Sa.setAttribute("height",xa);null!=P&&(Fa.x=P);null!=da&&(Fa.y=da);null!=ia&&(Fa.width=ia);null!=xa&&(Fa.height=xa)}},_getScaleMatrix:function(P,da){var ia=P.width/P.height,xa=1,Ca=1;isNaN(da)||(1<ia?(xa=da/P.width,Ca=da/ia/P.height):(Ca=da/P.height,xa=da*ia/P.width));return{xx:xa,yy:Ca}},_symbolizePoint:function(P,
da,ia,xa){var Ca=da.type,Fa=da.style;if("shieldlabelsymbol"!==Ca&&"picturemarkersymbol"!==Ca){var Ma=da.getStroke();da=da.getFill();Fa=Fa===u.STYLE_X||Fa===u.STYLE_CROSS;var Sa=Ma&&Ma.color,Ba=Fa?Sa:da;if(ia){var ca=this._getVariable(ia,"colorInfo",!1),ua=this._getVariable(ia,"opacityInfo",!1);ca&&(Ba=ia.getColor(xa,{colorInfo:ca})||Ba);Ba&&ua&&(Ba=this._applyOpacity(Ba,ia,ua,xa));Ba&&(Fa?Ba!==Sa&&(Ma=Ma?k.mixin({},Ma):{},Ma.color=Ba):Ba!==da&&(da=Ba))}"textsymbol"===Ca?P.setFill(da):"simplemarkersymbol"===
Ca&&P.setFill(da).setStroke(Ma)}},_drawMarkers:function(P,da,ia,xa){var Ca=P.geometry,Fa=Ca.points,Ma=P.getDojoShape()||this._div.createGroup(),Sa,Ba=Fa.length,ca=[],ua=0,ya,ta=ia?ia.length:0;Ma.children[0]&&this._isInvalidShape(da,Ma.children[0])&&Ma.clear();for(Sa=0;Sa<Ba;Sa++){var pa=Fa[Sa];for(ya=0;ya<ta;ya++)ca[0]=ia[ya],this._drawPoint(Ma,{x:pa[0],y:pa[1],spatialReference:Ca.spatialReference},da,Ma.children[ua++],ca,xa,P)}da=Ma.children.length;if(Ba*ia.length<da)for(Sa=da-1;Sa>=Ba*ia.length;Sa--)Ma.children[Sa].removeShape();
P._shape=Ma},_symbolizeMarkers:function(P,da,ia){var xa=P.getDojoShape().children,Ca,Fa=xa.length;for(Ca=0;Ca<Fa;Ca++)this._symbolizePoint(xa[Ca],da,ia,P)},_errorHandler:function(P,da){da&&(P.message="Unable to draw graphic (geometry:"+(da.geometry?da.geometry.declaredClass:null)+", symbol:"+(da.symbol?da.symbol.declaredClass:null)+"): "+P.message);this.inherited(arguments)},_rendererLimits:function(){if(N){var P=1E5;var da=-1E5;var ia=1E5}else y("chrome")&&6>y("chrome")&&(P=8150,da=-1E4,ia=1E4);
if(P)return{clipLimit:P,rangeMin:da,rangeMax:ia,clipBBox:[-P,-P,P,P],clipSegments:[[[-P,-P],[P,-P]],[[P,-P],[P,P]],[[P,P],[-P,P]],[[-P,P],[-P,-P]]]}}(),_clipPolyline:function(P,da){var ia=this._getCorners(P,da),xa=ia.br,Ca=this._rendererLimits,Fa=Ca.rangeMin,Ma=Ca.rangeMax,Sa=Ca.clipBBox,Ba=Ca.clipSegments;Ca=this._isPointWithinRange;var ca=this._isPointWithinBBox,ua=this._getClipperIntersection,ya=this._getPlaneIndex;if(!Ca(ia.tl,Fa,Ma)||!Ca(xa,Fa,Ma)){N&&this._createSegments(P);var ta=[];n.forEach(P.segments,
function(pa){pa=pa.args;var Aa=pa.length,T=[],ea;for(ea=0;ea<Aa;ea+=2){var na=[pa[ea],pa[ea+1]],V=[pa[ea+2],pa[ea+3]],Ia=ca(na,Sa),Ja=ca(V,Sa);if(Ia^Ja){if(Ja=ua([na,V],Ba))Ia?(ea?T.push(Ja[1]):T.push(na,Ja[1]),ta.push(T),T=[]):T.push(Ja[1],V)}else Ia?ea?T.push(V):T.push(na,V):(Ja=ya(na,Sa),Ia=ya(V,Sa),-1!==Ja&&-1!==Ia&&Ja!==Ia&&(na=ua([na,V],Ba,!0),0<na.length&&(na[Ja]||(Ja=na[Ja[0]]?Ja[0]:Ja[1]),na[Ia]||(Ia=na[Ia[0]]?Ia[0]:Ia[1]),V=na[Ja],na=na[Ia],V&&T.push(V),na&&(T.push(na),ta.push(T),T=[]))))}ta.push(T)});
P.setShape(this._getPathStringFromPaths(ta))}},_clipPolygon:function(P,da){var ia=this._getCorners(P,da),xa=ia.br,Ca=this._rendererLimits,Fa=Ca.clipLimit,Ma=Ca.rangeMin,Sa=Ca.rangeMax,Ba=Ca.clipBBox,ca=Ca.clipSegments;Ca=this._isPointWithinRange;var ua=this._isPointWithinBBox,ya=this._getClipperIntersection,ta=this._getPlaneIndex,pa=H._pointLineDistance;Ca(ia.tl,Ma,Sa)&&Ca(xa,Ma,Sa)||(N&&this._createSegments(P),ia=n.filter(P.segments,function(Aa){return Aa.args&&Aa.args.length}),ia=n.map(ia,function(Aa){var T=
Aa.args,ea=T.length,na=[];Aa=[];var V;for(V=0;V<ea;V+=2){var Ia=[T[V],T[V+1]],Ja=[T[V+2],T[V+3]];if(V===ea-2){na.push(Ia);break}var Da=ua(Ia,Ba),W=ua(Ja,Ba);na.push(Ia);if(Da^W){if(W=ya([Ia,Ja],ca))Ia=W[1],Ia[Da?"inOut":"outIn"]=!0,na.push(Ia),Aa.push([Da?"INOUT":"OUTIN",na.length-1,W[0]])}else if(!Da){Da=ta(Ia,Ba);var oa=ta(Ja,Ba);-1!==Da&&-1!==oa&&Da!==oa&&(W=ya([Ia,Ja],ca,!0),0<W.length?(W[Da]||(Da=W[Da[0]]?Da[0]:Da[1]),W[oa]||(oa=W[oa[0]]?oa[0]:oa[1]),Ia=W[Da],Ja=W[oa],Ia&&(Ia.outIn=!0,na.push(Ia),
Aa.push(["OUTIN",na.length-1,Da])),Ja&&(Ja.inOut=!0,na.push(Ja),Aa.push(["INOUT",na.length-1,oa]))):k.isArray(Da)&&k.isArray(oa)&&(W=Da.concat(oa),W.sort(),"0123"===W.join("")&&(W=[],3===Da[0]+Da[1]?W.push([Fa,-Fa],[-Fa,Fa]):W.push([-Fa,-Fa],[Fa,Fa]),Da=pa(W[0],[Ia,Ja]),Ia=pa(W[1],[Ia,Ja]),na.push(Da<Ia?W[0]:W[1]))))}}var ra=Ba[0],R=Ba[1],fa=Ba[2],ma=Ba[3];n.forEach(na,function(Ha){Ha[0]<ra&&(Ha[1]>=R&&Ha[1]<=ma?Ha[0]=ra:(Ha[0]=ra,Ha[1]=Ha[1]<R?R:ma))});n.forEach(na,function(Ha){Ha[1]<R&&(Ha[0]>=
ra&&Ha[0]<=fa?Ha[1]=R:(Ha[1]=R,Ha[0]=Ha[0]<ra?ra:fa))});n.forEach(na,function(Ha){Ha[0]>fa&&(Ha[1]>=R&&Ha[1]<=ma?Ha[0]=fa:(Ha[0]=fa,Ha[1]=Ha[1]<R?R:ma))});n.forEach(na,function(Ha){Ha[1]>ma&&(Ha[0]>=ra&&Ha[0]<=fa?Ha[1]=ma:(Ha[1]=ma,Ha[0]=Ha[0]<ra?ra:fa))});T=0;ea=Aa.length;if(0<ea){do{Ja=Aa[T];V=Aa[(T+1)%ea];if(Ja[2]===V[2]&&"INOUT"===Ja[0]&&"OUTIN"===V[0])if(Ia=Ja[1],V=V[1],Ia<V)for(Ia+=1;Ia<V;Ia++)na[Ia][2]=!0;else if(Ia>V){for(Ia+=1;Ia<na.length;Ia++)na[Ia][2]=!0;for(Ia=0;Ia<V;Ia++)na[Ia][2]=!0}T=
(T+1)%ea}while(0!==T)}ea=na[0];T=na[na.length-1];ea[2]&&(T[2]=!0,n.some(Aa,function(Ha){return 1===Ha[1]?(na.splice(na.length-1,0,k.clone(na[1])),!0):!1}));na=n.filter(na,function(Ha){return Ha[2]?!1:!0});for(T=0;T<na.length-1;T++)ea=na[T],(V=na[T+1])&&ea[0]===V[0]&&ea[1]===V[1]&&(V.outIn?ea.outIn=!0:V.inOut&&(ea.inOut=!0),na.splice(T+1,1));ea=Math.abs;Aa=[];for(T=0;T<na.length-1;T++){Ja=na[T];Ia=Ja[0];Ja=Ja[1];Da=ea(Ia)===Fa;W=ea(Ja)===Fa;V=na[T+1];oa=V[0];V=V[1];var wa=ea(oa)===Fa,Ea=ea(V)===Fa;
Da&&Ea?Aa.push([T+1,[Ia,V]]):W&&wa&&Aa.push([T+1,[oa,Ja]])}for(T=Aa.length-1;0<=T;T--)V=Aa[T],Ia=na[V[0]-1],ea=na[V[0]],Ia.outIn||Ia.inOut||ea.outIn||ea.inOut||na.splice(V[0],0,V[1]);ea=na[0];T=na[na.length-1];ea[0]===T[0]&&ea[1]===T[1]||na.push(ea);return na}),P.setShape(this._getPathStringFromPaths(ia)))},_getCorners:function(P,da){if(N){var ia=this._map,xa=da.getExtent(),Ca=xa.spatialReference,Fa=ia.toScreen(new A(xa.xmin,xa.ymax,Ca));ia=ia.toScreen(new A(xa.xmax,xa.ymin,Ca));return{tl:Fa,br:ia}}Fa=
P.getTransformedBoundingBox();return{tl:Fa[0],br:Fa[2]}},_createSegments:function(P){P.shape.path=P.vmlPath;P.segmented=!1;P._confirmSegmented();var da=P.segments;1<da.length&&(P.segments=n.filter(da,function(ia,xa,Ca){xa=Ca[xa+1];return"M"===ia.action&&xa&&"L"===xa.action?(ia.args=ia.args.concat(xa.args),!0):!1}))},_getPathStringFromPaths:function(P){N?(P=n.map(P,function(da){return"m "+n.map(da,function(ia,xa){return(1===xa?"l ":"")+ia.join(",")}).join(" ")}),P.push("e")):P=n.map(P,function(da){return"M "+
n.map(da,function(ia){return ia.join(",")}).join(" ")});return P.join(" ")},_isPointWithinBBox:function(P,da){var ia=da[1],xa=da[2],Ca=da[3],Fa=P[0],Ma=P[1];return Fa>da[0]&&Fa<xa&&Ma>ia&&Ma<Ca?!0:!1},_isPointWithinRange:function(P,da,ia){var xa=P.x;P=P.y;return xa<da||P<da||xa>ia||P>ia?!1:!0},_getClipperIntersection:function(P,da,ia){var xa,Ca=H._getLineIntersection2,Fa=Math.round,Ma={length:0};for(xa=0;4>xa;xa++){var Sa=Ca(P,da[xa]);if(Sa)if(Sa[0]=Fa(Sa[0]),Sa[1]=Fa(Sa[1]),ia)Ma[xa]=Sa,Ma.length++;
else return[xa,Sa]}return ia?Ma:null},_getPlaneIndex:function(P,da){var ia=P[0],xa=P[1],Ca=da[0],Fa=da[1],Ma=da[2],Sa=da[3];return ia<=Ca?xa>=Fa&&xa<=Sa?3:xa<Fa?[0,3]:[2,3]:xa<=Fa?ia>=Ca&&ia<=Ma?0:ia<Ca?[3,0]:[1,0]:ia>=Ma?xa>=Fa&&xa<=Sa?1:xa<Fa?[0,1]:[2,1]:xa>=Sa?ia>=Ca&&ia<=Ma?2:ia<Ca?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},
onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(P){this.infoTemplate=P;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(P,da){if(P._graphicsLayer===this)return P;P._suspended=this._suspendGraphics;da||this.graphics.push(P);P._graphicsLayer=this;P._sourceLayer||(P._layer&&"esri.layers.GraphicsLayer"!==P._layer.declaredClass?P._sourceLayer=P._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&
(P._sourceLayer=this));P._layer=this;this.hasWebGLSurface()||(this._updateExtent(P),this._draw(P));if(!da)this.onGraphicAdd(P);return P},remove:function(P,da,ia){if(!da&&!ia){da=this.graphics;var xa;if(-1===(xa=n.indexOf(da,P)))return null;if(!ha||64<=ha)da.splice(xa,1);else{var Ca=da.length;if(Ca){for(;xa<Ca;)da[xa]=da[xa+1],xa++;da.length--}}}this.hasWebGLSurface()||P.getDojoShape()&&this._removeShape(P,null,ia);P._shape=P._graphicsLayer=null;this.onGraphicRemove(P);return P},clear:function(P,da){var ia=
this.graphics,xa,Ca=!N;for(xa=ia.length-1;0<=xa;xa--)this.remove(ia[xa],null,Ca);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!da)this.onGraphicsClear()},_destroyAllNodes:function(){if(!N&&this._div){var P;this._childLayer&&(P=this._childLayer.getNode())&&P.parentNode&&P.parentNode.removeChild(P);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();P&&this._div.getEventSource().appendChild(P);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var P=
this.graphics,da=P.length,ia;for(ia=0;ia<da;ia++)this._removeShape(P[ia],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(P){},_setIEOpacity:function(P,da){var ia=P&&P.getNode();if(ia){var xa=P.strokeStyle,Ca=ia.stroke;xa&&Ca&&(Ca.opacity=xa.color.a*da);xa=P.fillStyle;Ca=ia.fill;xa&&Ca&&("tile"===Ca.type?q.set(ia,"opacity",da):Ca.opacity=xa.a*da)}},setOpacity:function(P,da){if(da||this.opacity!=P){var ia=this._div;ia&&!this.hasWebGLSurface()&&(N?(n.forEach(this.graphics,function(xa){this._setIEOpacity(xa._shape,
P);this._setIEOpacity(xa._bgShape,P)},this),ia._esriIeOpacity=P,this._bgGroup._esriIeOpacity=P):"canvas-2d"===this.surfaceType?q.set(ia.getEventSource(),"opacity",P):ia.getEventSource().setAttribute("opacity",P));this.opacity=P;if(!da)this.onOpacityChange(P)}},setRenderer:function(P){this.renderer=P;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||P})}});B=B([d,I],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=
k.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var P=this.inherited("_setMap",arguments);this.enableMouseEvents();return P},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(P){var da=this._map,ia=P.target,xa;P.screenPoint=new E(P.pageX-da.position.x,P.pageY-da.position.y);for(P.mapPoint=da.toMap(P.screenPoint);ia&&!(xa=ia.e_graphic);)ia=ia.parentNode;if(xa)return P.graphic=
xa,P},_onMouseOverHandler:function(P){if(this._processEvent(P))this.onMouseOver(P)},_onMouseMoveHandler:function(P){if(this._processEvent(P))this.onMouseMove(P)},_onMouseDragHandler:function(P){if(this._processEvent(P))this.onMouseDrag(P)},_onMouseOutHandler:function(P){if(this._processEvent(P))this.onMouseOut(P)},_onMouseDownHandler:function(P){this._downGr=this._downPt=null;this._processEvent(P)&&(c.disconnect(this._onmousemove_connect),c.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=
c.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=P.graphic,this._downPt=P.screenPoint.x+","+P.screenPoint.y,this.onMouseDown(P))},_onMouseUpHandler:function(P){this._upGr=this._upPt=null;this._processEvent(P)&&(c.disconnect(this._onmousedrag_connect),c.disconnect(this._onmousemove_connect),this._onmousemove_connect=c.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=P.graphic,this._upPt=P.screenPoint.x+","+P.screenPoint.y,
this.onMouseUp(P))},_onClickHandler:function(P){if(this._processEvent(P)){var da=this._downGr,ia=this._upGr;da&&ia&&da===ia&&this._downPt===this._upPt&&(N&&(z._ieGraphic=P.graphic),this.onClick(P))}},_onDblClickHandler:function(P){if(this._processEvent(P))this.onDblClick(P)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var P=
c.connect,da=this._div.getEventSource();L||(this._onmouseover_connect=P(da,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=P(da,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=P(da,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=P(da,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=P(da,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=P(da,"onclick",this,"_onClickHandler"),this._ondblclick_connect=P(da,"ondblclick",
this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var P=c.disconnect;P(this._onmouseover_connect);P(this._onmousemove_connect);P(this._onmousedrag_connect);P(this._onmouseout_connect);P(this._onmousedown_connect);P(this._onmouseup_connect);P(this._onclick_connect);P(this._ondblclick_connect);this._mouseEvents=!1}}});B._GraphicsContainer=h;B._GraphicsLayer=d;k.setObject("layers.GraphicsLayer",B,z);k.setObject("layers._GraphicsContainer",h,z);k.setObject("layers._GraphicsLayer",
d,z);return B})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(D,B){D.add("esri-svg",function(){return-1!==B.renderer.toLowerCase().indexOf("svg")});return D})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(D,B,a,c){var k=!1,n=a("esri-webgl-max-contexts");n=null!=n?n:a("esri-mobile")?8:16;var r={isWebGLSupported:function(){return!!k},isWebGLEnabled:function(){return this.isWebGLSupported()&&
!!a("esri-featurelayer-webgl")},createCanvas:function(f,m){var q=document.createElement("canvas");q.style.width=f+"px";q.style.height=m+"px";return q},createWebGLContext:function(f){var m;B.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(q){try{m=f.getContext?f.getContext(q):null}catch(l){m=null}return!!m});return m},_contextOwners:[],isContextAvailable:function(){return-1===n||0<n&&r._contextOwners.length<n},acquireContext:function(f){return-1!==B.indexOf(r._contextOwners,f)?
!0:r.isContextAvailable()?(r._contextOwners.push(f),!0):!1},releaseContext:function(f){f=B.indexOf(r._contextOwners,f);-1!==f&&r._contextOwners.splice(f,1)}};k=r.createWebGLContext(r.createCanvas());D.setObject("layers.support.webglUtils",r,c);return r})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(D,B,a,c,k){D=D(null,{map:null,node:null,renderers:null,constructor:function(n){B.mixin(this,n);this.renderers=
[]},destroy:function(){a.forEach(this.renderers,function(n){n.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(n,r,f,m){n=new n({surface:this,width:r,height:f,map:this.map,layer:m});this.renderers.push(n);return n},destroyRenderer:function(n){var r=a.indexOf(this.renderers,n);-1<r&&(n.destroy(),this.renderers.splice(r,1))},_createNode:function(){var n=document.createElement("div");n.style.pointerEvents="auto";n.style.position="absolute";return n}});
B.setObject("layers.support.WebGLSurface",D,k);return D})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(D,B,a,c,k,n){function r(g){g.removeAttribute("marker-start");g.removeAttribute("marker-end");g.removeAttribute("opacity")}function f(g,e){for(var d in e)g.setAttribute(d,e[d])}function m(g,e,d){e="url(#"+e.getAttribute("id")+")";g.rawNode.setAttribute("marker-"+d,e)}var q=-1!==c.renderer.toLowerCase().indexOf("svg"),
l=9===a("ie"),b={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};a={applyLineMarker:function(g,e,d,h){if(q&&!l){var t=g&&g.rawNode,z=e.marker;d=d||e.color;t&&"none"!==
e.style&&d&&z&&"arrow"===z.style&&z.placement?t.getTotalLength&&0===t.getTotalLength()?r(t):(e=-1!==z.placement.indexOf("begin"),z=-1!==z.placement.indexOf("end"),e||z?(t.removeAttribute("stroke-opacity"),t.setAttribute("opacity",d.a),e?(e=h(g,d,"spear","start"),m(g,e,"start")):t.removeAttribute("marker-start"),z?(d=h(g,d,"spear","end"),m(g,d,"end")):t.removeAttribute("marker-end")):r(t)):t&&r(t)}},createSVGMarker:function(g,e,d,h){d=b[d];var t=B.doc.createElementNS("http://www.w3.org/2000/svg","marker");
t.setAttribute("id",e);f(t,b.marker);f(t,d.marker[h]);e=B.doc.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("fill",g.toCss());f(e,d.path.common);f(e,d.path[h]);t.appendChild(e);return t},create2DColorRamp:function(g){var e=g.surface.createGroup(),d=g.colors,h=g.numClasses;g=(g.size||75)/h;for(var t=0;t<h;t++)for(var z=t*g,v=0;v<h;v++){var y=d[t][v];e.createRect({x:v*g,y:z,width:g,height:g}).setFill(y).setStroke(null)}return e},setSymbolFillColor:function(g,e){if(g)switch(e=e?
new n(e):null,g.type){case "simplemarkersymbol":"cross"===g.style||"x"===g.style?g.outline&&g.outline.setColor(e):g.setColor(e);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":g.setColor(e)}}};D.setObject("renderer.utils",a,k);return a})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,
B,a,c,k,n,r,f,m,q){var l=function(){return 9>a("ie")?function(g,e,d,h,t,z,v,y,C){var F=[],x=Math.round,u,w=v.length,A;for(u=0;u<w;u++){var E=v[u];var G=y?y(E[0][0],E[0][1],C):E[0];if(1<(A=E.length)){var H=x((G[0]-g)*d+t);var K=x((e-G[1])*h+z);G=y?y(E[1][0],E[1][1],C):E[1];var I=x((G[0]-g)*d+t);G=x((e-G[1])*h+z);F.push("M",H+","+K,"L",I+","+G);for(I=2;I<A;I++)G=y?y(E[I][0],E[I][1],C):E[I],H=x((G[0]-g)*d+t),K=x((e-G[1])*h+z),F.push(H+","+K)}else H=x((G[0]-g)*d+t),K=x((e-G[1])*h+z),F.push("M",H+","+
K)}return F}:function(g,e,d,h,t,z,v,y,C,F){var x=[],u,w,A=Math.round;var E=0;for(u=v?v.length:0;E<u;E++){var G=v[E];x.push("M");var H=0;for(w=G?G.length:0;H<w;H++){var K=y?y(G[H][0],G[H][1],C):G[H];x.push(A((K[0]-g)*d+t)+","+A((e-K[1])*h+z))}F||x.push("Z")}return x}}(),b={toScreenPoint:function(g,e,d,h,t){var z=g.spatialReference,v=h.spatialReference,y=h.x;h=h.y;z&&v&&!z.equals(v)&&z._canProject(v)&&(z=z.isWebMercator()?k.lngLatToXY(y,h):k.xyToLngLat(y,h,!0),y=z[0],h=z[1]);y=(y-g.xmin)*(e/g.getWidth());
h=(g.ymax-h)*(d/g.getHeight());t||(y=Math.round(y),h=Math.round(h));return new n(y,h)},toScreenGeometry:function(g,e,d,h){var t=g.xmin,z=g.ymax,v=e/g.getWidth(),y=d/g.getHeight(),C=D.forEach,F=Math.round;if(h instanceof k)return new k(F((h.x-t)*v),F((z-h.y)*y));if(h instanceof m){g=new m;var x=g.points;C(h.points,function(G,H){x[H]=[F((G[0]-t)*v),F((z-G[1])*y)]});return g}if(h instanceof q)return new q(F((h.xmin-t)*v),F((z-h.ymin)*y),F((h.xmax-t)*v),F((z-h.ymax)*v));if(h instanceof r){g=new r;var u=
g.paths,w;C(h.paths,function(G,H){w=u[H]=[];C(G,function(K,I){w[I]=[F((K[0]-t)*v),F((z-K[1])*y)]})});return g}if(h instanceof f){g=new f;var A=g.rings,E;C(h.rings,function(G,H){E=A[H]=[];C(G,function(K,I){E[I]=[F((K[0]-t)*v),F((z-K[1])*y)]})});return g}},_toScreenPath:function(g,e,d,h,t,z){var v=h instanceof r,y=g.spatialReference,C=h.spatialReference;if(y&&C&&!y.equals(C)&&y._canProject(C))if(y.isWebMercator())var F=k.lngLatToXY;else{F=k.xyToLngLat;var x=!0}return l(g.xmin,g.ymax,e/g.getWidth(),
d/g.getHeight(),t,z,v?h.paths:h.rings,F,x,v)},toMapPoint:function(g,e,d,h){return new k(g.xmin+h.x/(e/g.getWidth()),g.ymax-h.y/(d/g.getHeight()),g.spatialReference)},toMapGeometry:function(g,e,d,h){var t=g.xmin,z=g.ymax,v=g.spatialReference,y=e/g.getWidth(),C=d/g.getHeight(),F=D.forEach;if(h instanceof k)return new k(t+h.x/y,z-h.y/C,v);if(h instanceof m){g=new m(v);var x=g.points;F(h.points,function(G,H){x[H]=[t+G[0]/y,z-G[1]/C]});return g}if(h instanceof q)return new q(t+h.xmin/y,z-h.ymin/C,t+h.xmax/
y,z-h.ymax/C,v);if(h instanceof r){g=new r(v);var u=g.paths,w;F(h.paths,function(G,H){w=u[H]=[];F(G,function(K,I){w[I]=[t+K[0]/y,z-K[1]/C]})});return g}if(h instanceof f){g=new f(v);var A=g.rings,E;F(h.rings,function(G,H){E=A[H]=[];F(G,function(K,I){E[I]=[t+K[0]/y,z-K[1]/C]})});return g}}};B.mixin(B.getObject("geometry",!0,c),b);return b})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(D,B,a,c,k,n){function r(){B.after(this.constructor._meta,
"ctor",this._pluginsHandler,!0);this._plugins={}}r.prototype={addPlugin:function(f,m){var q=this,l=this._plugins,b=new k;try{D([f],function(g){f in l?b.resolve({id:l[f].declaredId||f.replace(/\//g,".")}):(l[f]=g,n(g.add(q,m),function(){var e={id:g.declaredId||f.replace(/\//g,".")};q.emit("plugin-add",e);b.resolve(e)},function(e){b.reject(e)}))})}catch(g){b.reject(g)}return b.promise},removePlugin:function(f){if(f in this._plugins){var m=this._plugins[f];m.remove(this);delete this._plugins[f];this.emit("plugin-remove",
{id:m.declaredId||f.replace(/\//g,".")})}},_pluginsHandler:function(){var f=this;a.some(arguments,function(m){if(m&&m.plugins&&m.plugins instanceof Array){m=m.plugins;var q;for(q=0;q<m.length;q++){var l=m[q];var b=l instanceof Object?l.id:l;f.addPlugin(b,l.options)}return!0}})}};return r})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(D,B,
a,c,k,n,r,f,m){D=D(null,{declaredClass:"esri.layers.FeatureType",constructor:function(q){if(q&&B.isObject(q)){this.id=q.id;this.name=q.name;var l=q.symbol;l&&(this.symbol=r.fromJson(l));l=q.domains;var b=this.domains={};for(g in l)l.hasOwnProperty(g)&&(b[g]=m.fromJson(l[g]));if(q=q.templates){var g=this.templates=[];for(l=0;l<q.length;l++)g.push(new f(q[l]))}}},toJson:function(){var q={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},l,b=this.domains,g=this.templates,e=n.fixJson;
if(b){var d=q.domains={};for(l in b)b.hasOwnProperty(l)&&(d[l]=b[l]&&b[l].toJson());e(d)}g&&(q.templates=a.map(g,function(h){return h.toJson()}));return e(q)}});B.setObject("layers.FeatureType",D,k);return D})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(D,B,a,c,k,n){D=D(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(r){r&&B.isObject(r)&&(this.name=r.name,this.description=r.description,
this.drawingTool=r.drawingTool,this.thumbnail=r.thumbnail,r=r.prototype,this.prototype=new n(r.geometry,null,r.attributes))},toJson:function(){return k.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:k.fixJson(B.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});B.mixin(D,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",
TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});B.setObject("layers.FeatureTemplate",
D,c);return D})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(D,B,a,c,k,n){B={fromJson:function(r){if(r)switch(r.type){case "range":var f=new c(r);break;case "codedValue":f=new k(r);break;case "inherited":f=new n(r)}return f}};D.setObject("layers.support.domainUtils",B,a);return B})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./Domain"],function(D,B,a,c,k){D=D([k],{declaredClass:"esri.layers.InheritedDomain"});B.setObject("layers.InheritedDomain",D,c);return D})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(D,B,a,c,k,n){D=D(null,{declaredClass:"esri.layers.FeatureSubtype",constructor:function(r){if(r&&B.isObject(r)){this.code=r.code;this.name=r.name;this.defaultValues=r.defaultValues;r=r.domains;var f=
this.domains={},m;for(m in r)r.hasOwnProperty(m)&&(f[m]=n.fromJson(r[m]))}},toJson:function(){var r=k.fixJson,f={code:this.code,name:this.name,defaultValues:r(B.clone(this.defaultValues))},m=this.domains;if(m){var q=f.domains={},l;for(l in m)m.hasOwnProperty(l)&&(q[l]=m[l]&&m[l].toJson());r(q)}return r(f)}});B.setObject("layers.FeatureSubtype",D,c);return D})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,
{declaredClass:"esri.layers.FeatureEditResult",constructor:function(k){k&&B.isObject(k)&&(this.objectId=k.objectId,this.globalId=k.globalId,this.success=k.success,k.success||(k=k.error,this.error=Error(),this.error.code=k.code,this.error.message=k.description))}});B.setObject("layers.FeatureEditResult",D,c);return D})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(D,B,a,c,k,n,r,f){var m=RegExp("__begin__","ig"),q=RegExp("__end__","ig"),l=/^__begin__/i,b=/__end__$/i;D=D(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(g){g&&(B.mixin(this,g),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=n.valueOf(this._labelPlacementLookup,g.labelPlacement)),g.format&&(this.format=g.format),g.fieldInfos&&(this.fieldInfos=g.fieldInfos),g.symbol&&(this.symbol="esriSHD"===g.symbol.type?new f(g.symbol):new r(g.symbol)),g=this.sizeInfo)&&(g.minSize&&(g.minSize=c.pt2px(g.minSize)),g.maxSize&&(g.maxSize=c.pt2px(g.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var g=this.sizeInfo;g&&(g=B.mixin({},g),g.minSize&&(g.minSize=c.px2pt(g.minSize)),g.maxSize&&(g.maxSize=c.px2pt(g.maxSize)));var e=n.fixJson(this.labelExpressionInfo&&B.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(e);g={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:e,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:g||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return n.fixJson(g)},_processLabelExpressionInfo:function(g){g&&g.value&&(g.expression=this._convertTemplatedStringToArcade(g.value))},_convertTemplatedStringToArcade:function(g){if(g){var e=B.replace(g,function(d,h){return'__begin__$feature["'+h+'"]__end__'});e=l.test(e)?e.replace(l,
""):'"'+e;e=b.test(e)?e.replace(b,""):e+'"';e=e.replace(m,'" + ').replace(q,' + "')}return e}});B.setObject("layers.LabelClass",D,k);return D})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(D,B,a,c,k,n,r,f,m){var q={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=D(f,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:c.defaultFont,constructor:function(l,b,g,e,d){l?B.isString(l)?(this.url=l,b&&(this.color=b),g&&(this.width=g),e&&(this.height=e),void 0!==d&&(this.font=d)):(this.width=c.pt2px(l.width),this.height=c.pt2px(l.height),b=l.imageData,9>a("ie")||!b||(g=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+b,this.imageData=g)):B.mixin(this,q)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(l){this.width=l;return this},
setHeight:function(l){this.height=l;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},setFont:function(l){this.font=l;return this},setText:function(l){this.text=l;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var l=this.url,b=this.imageData;if(0===l.indexOf("data:")){var g=l;l=b;b=g.indexOf(";base64,")+8;b=g.substr(b)}l=r.getAbsoluteUrl(l);g=c.px2pt(this.width);g=isNaN(g)?void 0:g;var e=c.px2pt(this.height);e=isNaN(e)?void 0:e;l=n.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:l,imageData:b,contentType:this.contentType,width:g,height:e}));this.font?(b=new m(this.font),l.font=b.toJson()):l.font=null;delete l.size;l.imageData||delete l.imageData;return l}});
D.defaultProps=q;B.setObject("symbol.ShieldLabelSymbol",D,k);k.symbol.defaultShieldLabelSymbol=q;return D})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(D,B,a,c,k,n,r,f,m){D=D([f],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(q){this.featureLayer=
q;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler);this._handleSuccess=B.hitch(this,this._handleSuccess);this._handleError=B.hitch(this,this._handleError);this._handleProgress=B.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var q=this.featureLayer,l=q.reHostedFS.test(q.url);this.pagination=
q.queryPagination&&null!=q.maxRecordCount;this._cacheHintSupported=q._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();l&&this.pagination&&(this._parallelSnapshot=new m({layer:q,mode:this,queryTask:q._task}));this._isSuspendedAtStartup=q.suspended;this._startup()}},propertyChangeHandler:function(q){this._init&&(q?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);
this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(q){var l=q.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(l,q);this._incRefCount(l)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var q=this.featureLayer;q._collection?(q._fireUpdateStart(),q._refresh(!0),q._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},
hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(q){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(q)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var q=this.featureLayer;q._collection||q.suspended||!q.isQueryable()?this._pendingRefresh=q.suspended:(this._pendingRefresh=!1,q._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?
this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(q){this._hasPartialFeatures=q.hasPartialFeatures;this._hasUpdateError=q.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(q){this._queryErrorHandler(q)},_handleProgress:function(q){q.isError?this.featureLayer._errorHandler(q.error):this._addFeatures(q.features)},_getScaleToTileFactor:function(){var q=this.featureLayer.tileMaxRecordCount,
l=this.featureLayer.maxRecordCount,b=1;null!=q&&null!=l&&(b=Number((q/l).toFixed(2)));return b},_getPageSize:function(q){var l=this.featureLayer.tileMaxRecordCount;l="tile"===q.resultType&&l?l:this.featureLayer.maxRecordCount;q.maxRecordCountFactor&&(l=Math.floor(l*q.maxRecordCountFactor));return l},_sendRequest:function(q){var l=this.featureLayer,b=this._createQueryInfo(),g=b.query;this.pagination&&(this._pageSize=this._getPageSize(g),this._start=g.start=null==q?0:q,g.num=this._pageSize);this._pendingRequest&&
this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=l._task.execute(g,this._drawFeatures,this._queryErrorHandler,b.pbf?{format:"pbf"}:null)},_drawFeatures:function(q){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===q.exceededTransferLimit&&(q.exceededTransferLimit=q.features.length===this.featureLayer.maxRecordCount);var l=this.featureLayer,b=q.exceededTransferLimit,g=b&&!l._collection;q=this._checkMaxLimit(q.features);var e=
q.maxLimitReached;this._addFeatures(q.features);this.pagination&&g&&!e||(this._hasPartialFeatures=!!b,l._fireUpdateEnd(null,b?{queryLimitExceeded:!0}:null));g&&(this.pagination&&!e&&this._sendRequest(this._start+this._pageSize),l.onQueryLimitExceeded())},_queryErrorHandler:function(q){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var l=this.featureLayer;l._errorHandler(q);l._fireUpdateEnd(q)},_checkMaxLimit:function(q){var l=q?q.length:0,b=this.featureLayer.graphics.length+
l,g=b>=this.maxFeatures;if(g){var e=b-this.maxFeatures;e&&q.splice(l-e,e)}return{maxLimitReached:g,featuresDiscarded:b>this.maxFeatures,features:q}},_createQueryInfo:function(){var q=this.featureLayer,l=new r;l.outFields=q.getOutFields();l.where=q._getAttributeFilter()||"1\x3d1";l.returnGeometry=!0;l.outSpatialReference=n.createSpatialReference(this.map.spatialReference.toJson());l.timeExtent=q.getTimeDefinition();l.maxAllowableOffset=q._maxOffset;l.quantizationParameters=q._quantizationParameters;
l.orderByFields=q.supportsAdvancedQueries?q.getOrderByFields():null;l.multipatchOption=q.multipatchOption;q._ts&&(l._ts=(new Date).getTime());this._cacheHintSupported&&q._enableCacheHint(l);var b=this.canFetchPBF(l);q._enableEditModeQuantization(l,b);this._applyMaxRecordCountFactor(l,b);return{query:l,pbf:b}},_applyMaxRecordCountFactor:function(q,l){var b=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(q)&&b&&b.supportsMaxRecordCountFactor&&("tile"!==q.resultType&&
1<this.scaleToTileFactor&&(q.maxRecordCountFactor=this.scaleToTileFactor),l&&1<this.maxRecordCountFactor&&(q.maxRecordCountFactor=this.maxRecordCountFactor),5<q.maxRecordCountFactor&&(q.maxRecordCountFactor=5))},_addFeatures:function(q){var l=this.featureLayer,b=l.objectIdField,g=q.length,e=l._selectedFeatures,d=l.mode===l.constructor.MODE_AUTO;l._fireUpdateStart();l._sortFeatures(q);for(l=0;l<g;l++){var h=q[l];var t=h.attributes[b];var z=this._addFeatureIIf(t,h);this._incRefCount(t);d&&z!==h&&e[t]&&
(z.setGeometry(h.geometry),z.setAttributes(h.attributes))}this._applyTimeFilter(!0)}});B.setObject("layers._SnapshotMode",D,c);return D})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(D,B,a,c,k){var n=!!c("esri-pbf");c=!!c("esri-featurelayer-pbf");D=D(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:n&&c,initialize:function(r){this.map=r;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(r){},
destroy:function(){this._init=this._started=!1},drawFeature:function(r){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(r){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(r){(r=this._featureMap[r])&&r._count++},_decRefCount:function(r){(r=this._featureMap[r])&&r._count--},_getFeature:function(r){return this._featureMap[r]},_addFeatureIIf:function(r,f){var m=
this._featureMap,q=m[r],l=this.featureLayer;q||(m[r]=f,l._add(f),f._count=0);return q||f},_removeFeatureIIf:function(r){var f=this._featureMap[r],m=this.featureLayer;if(f){if(f._count)return;delete this._featureMap[r];m._remove(f)}return f},_registerFeature:function(r,f){var m=this._featureMap,q=m[r];q?(q.attributes=f.attributes,q.geometry=f.geometry):(m[r]=f,f._count=0,f._layer=f._graphicsLayer=f._sourceLayer=this.featureLayer);return q||f},_unregisterFeature:function(r){var f=this._featureMap,m=
f[r];m&&!m._count&&(delete f[r],m._graphicsLayer=null)},_clearIIf:function(){var r=this.featureLayer;var f=r.graphics,m=r._selectedFeatures,q=r.getSelectedFeatures().length,l=r.objectIdField;if(q)for(r=f.length-1;0<=r;r--){q=f[r];var b=q.attributes[l];b in m?q._count=1:(q._count=0,this._removeFeatureIIf(b))}else r.clear(),this._featureMap={}},_cancelPendingRequest:function(r){if(r)try{r.cancel()}catch(f){}},_toggleVisibility:function(r){var f=this.featureLayer,m=f.graphics,q=r?"show":"hide",l,b=m.length;
r=r&&f._ager;for(l=0;l<b;l++){var g=m[l];g[q]();r&&f._repaint(g)}},_applyTimeFilter:function(r){var f=this.featureLayer;if(f.timeInfo&&!f.suspended){r||f._fireUpdateStart();var m=f._trackManager;m&&m.clearTracks();var q=f.getTimeDefinition(),l=f._getOffsettedTE(f._mapTimeExtent);l?(l=f._getTimeOverlap(q,l))?(q=f._filterByTime(f.graphics,l.startTime,l.endTime),m&&m.addFeatures(q.match),a.forEach(q.match,function(b){var g=b._shape;b.visible||(b.show(),(g=b._shape)&&g._moveToFront());f._ager&&g&&f._repaint(b)}),
a.forEach(q.noMatch,function(b){b.visible&&b.hide()})):this._toggleVisibility(!1):(m&&m.addFeatures(f.graphics),this._toggleVisibility(!0));m&&(m.moveLatestToFront(),m.drawTracks());r||f._fireUpdateEnd()}}});B.setObject("layers._RenderMode",D,k);return D})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(D,B,a,c,k,n){D=D(null,{declaredClass:"esri.layers.support.ParallelSnapshot",
layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(r){B.mixin(this,r);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var r=new k;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/this._pageSize);this._fetchDfd=r;this._sendRequests();
return r.promise},cancel:function(r){this._cancelPendingRequests(r);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(r){var f=this._queryInfo.query,m=this.queryTask,q=this._requests;r=null==r?1:r;var l=r+this.batchSize-1;l>this._maxPages&&
(l=this._maxPages);if(!(r>l))for(this._startPage=r,this._lastPage=l;r<=l;r++)f.start=(r-1)*this._pageSize,f.num=this._pageSize,q[r]=m.execute(f,null,null,this._queryInfo.pbf?{format:"pbf"}:null),q[r].then(B.hitch(this,this._handleSuccess,r)).otherwise(B.hitch(this,this._handleError,r))},_evalNextBatch:function(r){r===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(r,f){f.exceededTransferLimit||this._cancelLaterRequests(r,!0);var m=this.mode._checkMaxLimit(f.features);
this._fetchDfd.progress({features:m.features,isError:!1});m.maxLimitReached?((m=m.featuresDiscarded||this._hasRejectedRequests())||(m=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(m)):(f.exceededTransferLimit&&this._evalNextBatch(r),this._evalResolution())},_handleError:function(r,f){var m=this._requests;m&&m[r]&&(1===r?this._rejectFetch(f):(this._evalNextBatch(r),this._fetchDfd.progress({error:f,isError:!0}),this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||
this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(r){var f=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:r,hasUpdateError:f})},_rejectFetch:function(r){this.cancel(!0);this._fetchDfd.reject(r)},_getResult:function(r){return r&&r.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var r=this._requests,f,m=[];for(f in r){var q=r[f];q.isFulfilled()||m.push({pageId:Number(f),
dfd:q})}return m},_getLastSuccessfulRequest:function(){var r=this._getResolvedRequests(),f=-Infinity,m;r=a.filter(r,function(q){return!!this._getResult(q).features.length||1===q.pageId},this);a.forEach(r,function(q){q.pageId>f&&(f=q.pageId,m=q)});return m},_getResolvedRequests:function(){var r=this._requests,f,m=[];for(f in r){var q=r[f];q.isResolved()&&m.push({pageId:Number(f),dfd:q})}return m},_hasRejectedRequests:function(){var r=this._getRejectedRequests(),f=this._getLastSuccessfulRequest(),m=
this._getResult(f);m&&!m.exceededTransferLimit&&(r=a.filter(r,function(q){return q.pageId<=f.pageId}));return!!r.length},_getRejectedRequests:function(){var r=this._requests,f,m=[];for(f in r){var q=r[f];q.isRejected()&&m.push({pageId:Number(f),dfd:q})}return m},_cancelPendingRequests:function(r){this._cancelRequests(this._getPendingRequests(),r)},_cancelLaterRequests:function(r,f){var m=a.filter(this._getPendingRequests(),function(q){return q.pageId>r});this._cancelRequests(m,f)},_cancelRequests:function(r,
f){var m=this.mode,q=this._requests;a.forEach(r,function(l){f&&delete q[l.pageId];m._cancelPendingRequest(l.dfd)})}});B.setObject("layers.support.ParallelSnapshot",D,n);return D})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(D,B,a,c,k,n,r,f,m,q){D=D([m],{declaredClass:"esri.layers._OnDemandMode",constructor:function(l){this.featureLayer=
l;this._featureMap={}},initialize:function(l){this.inherited(arguments);this._cellMap={};this._gridLayer=q.createFromFeatureLayer({layer:this.featureLayer,map:l})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(l){this._init&&2>l&&this._zoomHandler()},destroy:function(){this._disableConnectors();
this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(l){var b=l.geometry,g=[];if(b){g=this._gridLayer.getCellsInExtent("point"===b.type?{xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y}:b.getExtent(),!1).cells;b=this._cellMap;var e,d=l.attributes[this.featureLayer.objectIdField];for(e=0;e<g.length;e++){var h=g[e];var t=h.latticeID;var z=h.row;var v=h.col;t?h=b[t]=b[t]||h:(b[z]=b[z]||{},h=b[z][v]=b[z][v]||h);h.features=h.features||[];h.features.push(l);this._addFeatureIIf(d,l);this._incRefCount(d)}}},
suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var l=!1,b=this._getCurrentCells(),g;for(g=0;g<b.length;g++)if(b[g].hasPartialFeatures){l=!0;break}return!l},hasUpdateError:function(){var l=!1,b=this._getCurrentCells(),g;for(g=0;g<b.length;g++)if(b[g].hasUpdateError){l=!0;break}return l},canFetchPBF:function(l){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(l)},
_enableConnectors:function(){var l=this.map;this._zoomConnect=B.connect(l,"onZoomEnd",this,this._zoomHandler);this._panConnect=B.connect(l,"onPanEnd",this,this._panHandler);this._resizeConnect=B.connect(l,"onResize",this,this._panHandler)},_disableConnectors:function(){B.disconnect(this._zoomConnect);B.disconnect(this._panConnect);B.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var l=this.featureLayer,b=this.map;!l.suspended&&l.isQueryable()&&(l._fireUpdateStart(),
this._clearIIf(),(l=l._trackManager)&&l.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(l){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var b=this.featureLayer._resized;l=b?l:null;b&&this._gridLayer.setMapState(l,this.map.width,this.map.height);this._sendRequest(l)}},_sendRequest:function(l){this._exceeds=!1;var b=this.featureLayer,g=this.map;l=l||g.extent;g=this._gridLayer.getCellsInExtent(l,b.latticeTiling).cells;
if(!b.isEditable()){var e=this._cellMap;g=c.filter(g,function(z){if(z.lattice){if(e[z.latticeID])return!1}else if(e[z.row]&&e[z.row][z.col])return!1;return!0})}this._pending=this._pending||0;var d;for(d=0;d<g.length;d++){var h=g[d],t=this._createQueryInfo(h);this._pending++;this._ioQueue.push(b._task.execute(t.query,a.hitch(this,this._drawFeatures,h),a.hitch(this,this._queryErrorHandler,h),t.pbf?{format:"pbf"}:null))}this._removeOldCells(l);this._endCheck()},_drawFeatures:function(l,b){this.featureLayer._isImageService&&
10.7>this.featureLayer.version&&void 0===b.exceededTransferLimit&&(b.exceededTransferLimit=b.features.length===this.featureLayer.maxRecordCount);l.hasPartialFeatures=!!b.exceededTransferLimit;l.hasUpdateError=!1;this._exceeds=this._exceeds||b.exceededTransferLimit;this._finalizeIO();var g=this.featureLayer,e=this.map.extent,d=l.extent,h=l.row,t=l.col,z=g.objectIdField,v=b.features,y=this._gridLayer,C=this._cellMap,F=l.latticeID;C=F?C[F]:C[h]&&C[h][t];if(l.resolution==y.resolution&&(F?F===y.getLatticeID(e):
y.intersects(d,e)))if(C)g._sortFeatures(v),this._updateCell(C,v);else for(g._sortFeatures(v),l.features=v,this._addCellToCellMap(l),e=v.length,g=0;g<e;g++)d=v[g],h=d.attributes[z],this._addFeatureIIf(h,d),this._incRefCount(h);else C&&this._removeCell(h,t,F);this._endCheck()},_queryErrorHandler:function(l,b){this._finalizeIO();l.hasPartialFeatures=!0;l.hasUpdateError=!0;this._addCellToCellMap(l);this.featureLayer._errorHandler(b);this._endCheck(b)},_finalizeIO:function(){this._pending--},_endCheck:function(l){if(0===
this._pending){this._processIOQueue();var b=this.featureLayer,g=b._trackManager;g&&(g.clearTracks(),g.addFeatures(b.graphics),b._ager&&c.forEach(b.graphics,function(e){e._shape&&b._repaint(e)}),g.moveLatestToFront(),g.drawTracks());this.featureLayer._fireUpdateEnd(!!l&&Error("FeatureLayer: "+(l.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(l){this._ioQueue=c.filter(this._ioQueue,
function(b){return-1<b.fired?!1:!0});l&&c.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(l){var b=this.featureLayer,g=new f;g.outFields=b.getOutFields();g.where=b._getAttributeFilter();g.returnGeometry=!0;g.geometry=l.extent||l.lattice;b.latticeTiling&&l.extent&&(g.spatialRelationship=f.SPATIAL_REL_CONTAINS);g.timeExtent=b._getOffsettedTE(b._mapTimeExtent);g.maxAllowableOffset=b._maxOffset;g.quantizationParameters=b._quantizationParameters;g.orderByFields=b.supportsAdvancedQueries?
b.getOrderByFields():null;g.multipatchOption=b.multipatchOption;b._ts&&(g._ts=(new Date).getTime());(l=b.advancedQueryCapabilities)&&l.supportsQueryWithResultType&&(g.resultType="tile");l=this.canFetchPBF(g);b._enableEditModeQuantization(g,l);return{query:g,pbf:l}},_getCurrentCells:function(l){var b=[];l=l||this._cellMap;for(var g in l)if(l.hasOwnProperty(g)){var e=l[g];e&&(e.hasOwnProperty("row")||e.hasOwnProperty("latticeID")?b.push(e):"object"===typeof e&&b.push.apply(b,this._getCurrentCells(e)))}return b},
_addCellToCellMap:function(l){var b=this._cellMap;if(l.latticeID)b[l.latticeID]=l;else{var g=l.row,e=l.col;b[g]=b[g]||{};b[g][e]=l}},_removeOldCells:function(l){var b=this._cellMap,g=this._gridLayer,e,d;for(e in b)if(b[e]){var h=b[e],t=h.latticeID,z=0,v=0;if(t)z++,t!==g.getLatticeID(l)&&(this._removeCell(null,null,t),v++);else for(d in h)h[d]&&(z++,g.intersects(h[d].extent,l)||(this._removeCell(e,d),v++));v===z&&delete b[e]}},_updateCell:function(l,b){var g=this.featureLayer,e=g.objectIdField;g=g._selectedFeatures;
var d,h=b.length;l.features=l.features||[];for(d=0;d<h;d++){var t=b[d],z=t.attributes[e],v=this._addFeatureIIf(z,t);v===t?(this._incRefCount(z),l.features.push(v)):z in g||(v.setGeometry(t.geometry),v.setAttributes(t.attributes))}},_removeCell:function(l,b,g){var e=this._cellMap,d=this.featureLayer,h=d.objectIdField,t=g?e[g]:e[l]&&e[l][b];if(t&&(g?delete e[g]:delete e[l][b],l=t.features))for(b=0;b<l.length;b++)g=l[b].attributes[h],this._decRefCount(g),g in d._selectedFeatures||this._removeFeatureIIf(g)}});
a.setObject("layers._OnDemandMode",D,n);return D})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){var b=D(null,{declaredClass:"esri.layers._GridLayout",constructor:function(g,e,d,h){this.origin=g;this.cellWidth=e.width;this.cellHeight=e.height;this.mapWidth=d.width;this.mapHeight=
d.height;this.srInfo=h},setResolution:function(g){this.resolution=(g.xmax-g.xmin)/this.mapWidth;this.srInfo&&(g=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[g,0,g-1])},setMapState:function(g,e,d){this.mapWidth=e;this.mapHeight=d;this.setResolution(g)},getCellCoordinates:function(g){var e=this.resolution,d=this.origin;return{row:Math.floor((d.y-g.y)/(this.cellHeight*e)),col:Math.floor((g.x-d.x)/(this.cellWidth*e))}},normalize:function(g){var e=this._frameStats;
if(e){var d=e[0],h=e[1];e=e[2];g<h?(g%=d,g=g<h?g+d:g):g>e&&(g%=d)}return g},intersects:function(g,e){var d=this.srInfo;return d?a.some(e._getParts(d),function(h){return g.intersects(h.extent)}):g.intersects(e)},getCellExtent:function(g,e){var d=this.resolution,h=this.origin,t=this.cellWidth,z=this.cellHeight;return new r(e*t*d+h.x,h.y-(g+1)*z*d,(e+1)*t*d+h.x,h.y-g*z*d,l.createSpatialReference(h.spatialReference.toJson()))},getLatticeID:function(g){var e=this.getCellCoordinates({x:g.xmin,y:g.ymax}),
d=this.getCellCoordinates({x:g.xmax,y:g.ymin});g=e.row;var h=d.row;e=this.normalize(e.col);d=this.normalize(d.col);return g+"_"+h+"_"+e+"_"+d},sorter:function(g,e){return g<e?-1:1},getCellsInExtent:function(g,e){var d=this.getCellCoordinates({x:g.xmin,y:g.ymax}),h=this.getCellCoordinates({x:g.xmax,y:g.ymin}),t=d.row,z=h.row;d=d.col;h=h.col;var v=[],y,C,F=[],x=[],u=[];for(y=t;y<=z;y++)for(C=d;C<=h;C++){var w=this.normalize(C);g=this.getCellExtent(y,w);a.some(v,function(K){return K.row===y&&K.col===
w})||v.push({row:y,col:w,extent:g,resolution:this.resolution});e&&(F.push(g.xmin,g.xmax),x.push(g.ymin,g.ymax))}d=this.normalize(d);h=this.normalize(h);F.sort(this.sorter);x.sort(this.sorter);C=F.length;for(y=C-1;0<=y;y--)y<C-1&&F[y]===F[y+1]&&F.splice(y,1);C=x.length;for(y=C-1;0<=y;y--)y<C-1&&x[y]===x[y+1]&&x.splice(y,1);if(F.length&&x.length){var A=F[0];var E=F[F.length-1];var G=x[0];var H=x[x.length-1];C=F.length;for(y=0;y<C;y++)u.push([[F[y],H],[F[y],G]]);C=x.length;for(y=0;y<C;y++)u.push([[A,
x[y]],[E,x[y]]]);F=new f({paths:u,spatialReference:this.origin.spatialReference.toJson()});v.push({latticeID:t+"_"+z+"_"+d+"_"+h,lattice:F,resolution:this.resolution})}return{minRow:t,maxRow:z,minCol:d,maxCol:h,topRow:t,bottomRow:z,leftCol:d,rightCol:h,cells:v}},_findCell:function(g,e,d){var h;a.some(g,function(t){t.row===e&&t.col===d&&(h=t);return!!h});return h},getExtentOfIntersectingCells:function(g){var e=this.getCellsInExtent(g),d=e&&e.cells;if(d&&d.length){var h=e.topRow,t=e.leftCol,z=0;a.forEach(d,
function(F){F.row===h&&z++});var v=this._findCell(d,h,t).extent,y=this.srInfo;if(!y||z!==this._frameStats[0]&&t!==e.rightCol){var C=v.xmin;y=C+z*v.getWidth()}else C=y.valid[0],y=y.valid[1];e=this._findCell(d,e.bottomRow,t).extent.ymin;(g=(new r(C,e,y,v.ymax,g.spatialReference))._normalize(!1,!1))&&g.rings&&(g=new m(g),g=q.getDenormalizedExtent(g));return g}}});b.createFromFeatureLayer=function(g){var e=g.layer;g=e.getMap()||g.map;var d=e._srInfo;(e=g&&g.loaded?new b(new n(d?d.valid[0]:g.extent.xmin,
d?d.valid[1]:g.extent.ymax,g.spatialReference),{width:e._tileWidth,height:e._tileHeight},{width:g.width,height:g.height},d):null)&&e.setResolution(g.extent);return e};B.setObject("layers._GridLayout",b,k);return b})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(D,B,a,c,k){D=D([k],{declaredClass:"esri.layers._SelectionMode",constructor:function(n){this.featureLayer=n;this._featureMap={}},propertyChangeHandler:function(n){this._init&&
0===n&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});B.setObject("layers._SelectionMode",D,c);return D})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l){D=D([l],{declaredClass:"esri.layers._StreamMode",constructor:function(b,g){this.featureLayer=b;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=B.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;b.purgeOptions&&b.purgeOptions.age&&"number"===typeof b.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*b.purgeOptions.age));this._drawFeatures=
B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(b){this._init&&(0===b?this._applyTimeFilter():3===b&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(b){var g=this.featureLayer,e=g.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));g._joinField&&this._getFeature(b.attributes[e])?this._drawBuffer.updates.push({oid:b.attributes[e],updates:b}):this._drawBuffer.adds.push(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var b=this.featureLayer;b&&(b._relatedUrl||b._keepLatestUrl?(b._fireUpdateStart(),b._refreshing=!0,b.disconnect(),b.clear(),b._relatedQueried=!1,b._keepLatestQueried=!1,
b.connect()):(b._fireUpdateStart(),b.clear(),b._fireUpdateEnd()))},_drawFeatures:function(b,g){var e=this.featureLayer;e._create(b.features||[]);e._fireUpdateEnd(null,g)},_applyTimeFilter:function(b){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var g=this.featureLayer,e=g.objectIdField;b&&a.forEach(b,function(d){d=d.attributes[e];g._unSelectFeatureIIf(d,this);this._decRefCount(d);this._removeFeatureIIf(d)},this)},_addFeatures:function(b){var g=this.featureLayer,e=
g._endTimeField,d=g._startTimeField,h,t=[],z=[],v=[];var y=g._trackManager;var C=g.objectIdField;if(y)for(h in b=y.addFeatures(b),b)b.hasOwnProperty(h)&&(t.push(h),b[h].adds&&(z=z.concat(b[h].adds)),b[h].deletes&&(v=v.concat(b[h].deletes)));else z=b;a.forEach(z,function(F){var x=F.attributes[C];var u=e&&F.attributes[e];!u&&this._maxFeatureAge&&(u=d&&F.attributes[d]?F.attributes[d]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);u&&(u=1E3*Math.ceil(u/1E3),this._featuresByTime[u]?this._featuresByTime[u].push(x):
this._featuresByTime[u]=[x]);this._addFeatureIIf(x,F);this._incRefCount(x)},this);v.length&&this._removeFeatures(v);y&&y.refreshTracks(t)},_updateFeatures:function(b){var g=this.featureLayer,e=[];var d=g._trackManager;var h=g._trackIdField;a.forEach(b,function(t){var z=t.updates;t=this._getFeature(t.oid);var v;if(t){z.geometry&&t.setGeometry(z.geometry);z=z.attributes||{};for(v in z)z.hasOwnProperty(v)&&(t.attributes[v]=z[v]);t.setAttributes(t.attributes);t.visible=this._checkFeatureTimeIntersects(t);
d&&t.attributes[h]?e.push(t.attributes[h]):g._repaint(t,null,!0)}},this);e.length&&d.refreshTracks(e)},_redrawAllTracks:function(){var b=this.featureLayer._trackManager,g;b&&(g=b.trimTracks())&&0<g.length&&(this._removeFeatures(g),b.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var b=this._drawBuffer,g=b.adds.splice(0,b.adds.length),e=b.updates.splice(0,b.updates.length);b=this.featureLayer;if(!b)return!1;b.updating||b._fireUpdateStart();this._addFeatures(g);this._updateFeatures(e);
(g=this._getExpiredFeatures())&&g.length&&(this._removeFeatures(g),b._trackManager&&b._trackManager.removeFeatures(g));b._purge();b._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var b=this._timeoutId,g=this._drawBuffer,e=g.adds;g=g.updates;b&&clearTimeout(b);e.splice(0,e.length);g.splice(0,g.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(b){b=
b||0===b?b:200;0>b&&(b=200);this._refreshRate=b},_checkFeatureTimeIntersects:function(b){var g=this.featureLayer,e=g.getMap();return(e=e?e.timeExtent:null)&&g.timeInfo&&(g.timeInfo.startTimeField||g.timeInfo.endTimeField)?0<g._filterByTime([b],e.startTime,e.endTime).match.length:!0},_fetchArchive:function(b){var g=new c,e=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);e._fireUpdateStart();if(b&&this.map){b=new m(b);var d=new f;var h=this.map;var t=e.getFilter()||
{};var z=t.where||"1\x3d1";var v=t.geometry?q.fromJson(t.geometry):null;t=t.outFields?t.outFields.split(","):["*"];d.geometry=v;d.where=z;d.outFields=t;d.returnGeometry=!0;d.outSpatialReference=new r(h.spatialReference.toJson());this._pendingRequest=b.execute(d).then(function(y){this._pendingRequest=null;var C=this._fixFieldNameCasing(e,y);y.features=C;this._drawFeatures(y);e._fireUpdateEnd();g.resolve()}.bind(this)).otherwise(function(y){this._pendingRequest=null;e._errorHandler(y);e._fireUpdateEnd(y);
g.reject(y)}.bind(this))}else g.resolve();return g.promise},_queryErrorHandler:function(b){var g=this.featureLayer;g._errorHandler(b);g._fireUpdateEnd(b)},_fixFieldNameCasing:function(b,g){var e=g.features||[],d=g.fields;if(!d||!e.length)return e;d=this._mapFieldNameDifferences(b.fields,d);for(var h=[],t,z,v=0,y=g.features.length;v<y;v++)t=e[v],z=this._swizzleResponseAttributes(t.attributes,d),h.push({geometry:t.geometry,attributes:z});return h},_mapFieldNameDifferences:function(b,g){var e=[],d={},
h;var t=0;for(h=g.length;t<h;t++)e.push(g[t].name);t=0;for(h=b.length;t<h;t++){var z=b[t].name,v=this._checkForStreamFieldName(z,e);v&&(d[v]=z)}return d},_checkForStreamFieldName:function(b,g){for(var e=b.toLowerCase(),d,h=0,t=g.length;h<t;h++)if(g[h].toLowerCase()===e){d=g[h];break}return d},_swizzleResponseAttributes:function(b,g){var e={},d;for(d in b)if(b.hasOwnProperty(d)){var h=b[d];g.hasOwnProperty(d)?e[g[d]]=h:e[d]=h}return e},_getExpiredFeatures:function(){var b,g,e=[],d=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return d;var h=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=b=1E3*Math.ceil(Date.now()/1E3);if(h&&h!==b)for(g=this._featuresByTime;h<=b;h+=1E3)g[h]&&(e=e.concat(g[h]),delete g[h]);a.forEach(e,function(t){(t=this._getFeature(t))&&d.push(t)},this);return d}});B.setObject("layers._StreamMode",D,n);return D})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(D,B,a,c,k,n,r,f,m,q){var l=-1!==n.renderer.toLowerCase().indexOf("canvas");D=D(null,{declaredClass:"esri.layers._TrackManager",constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;b=this.layer;this.createTracklineContainer()&&(this._handles=[b.on("visibility-change",B.hitch(this,function(g){this.container.setVisibility(g.visible);this.container.evaluateSuspension()})),b.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var b=this.layer;if("esriGeometryPoint"!==b.geometryType)return null;var g=this.map,e=b._getRenderer();e=e&&e.trackRenderer;var d=this.container=new q._GraphicsLayer({id:b.id+"_tracks",_child:!0,visible:b.visible,minScale:b.minScale,maxScale:b.maxScale});d.loaded=!0;d.onLoad(d);d._setMap(g,b._div);l||(g=d._div.getNode(),b=b._div.getNode(),g&&b&&k.place(g,b,"first"));d.setRenderer(e);return d},addFeatures:function(b){var g=this.trackMap,
e=this.layer,d=e._trackIdField,h=[];a.forEach(b,function(y){var C=y.attributes[d];(g[C]=g[C]||[]).push(y);-1===a.indexOf(h,C)&&h.push(C)});var t=e._startTimeField,z=e.objectIdField,v=function(y,C){var F=y.attributes[t],x=C.attributes[t];return F===x?y.attributes[z]<C.attributes[z]?-1:1:F<x?-1:1};a.forEach(h,function(y){g[y].sort(v)})},trimTracks:function(b){function g(z){for(z=e[z]||[];z.length>d;)h.push(z.shift())}var e=this.trackMap,d=this.layer.maximumTrackPoints||0,h=[],t;if(!d)return h;if(b)a.forEach(b,
function(z){g(z)});else for(t in e)e.hasOwnProperty(t)&&g(t);return h},drawTracks:function(b){function g(y){var C=t[y],F,x;var u=e.trackLineMap[y];d.remove(u);delete e.trackLineMap[y];u=null;if(!C||2>C.length)return!1;u=[];for(F=C.length-1;0<=F;F--)(x=C[F].geometry)&&u.push([x.x,x.y]);C={};C[v]=y;1<u.length&&(u=new f(new m({paths:[u],spatialReference:z}),null,C),d.add(u),e.trackLineMap[y]=u)}var e=this,d=this.container,h;if(d){var t=this.trackMap;var z=this.map.spatialReference;var v=this.layer._trackIdField;
if(b)a.forEach(b,function(y){g(y)});else for(h in t)t.hasOwnProperty(h)&&g(h)}},refreshTracks:function(b){function g(v){var y;e.drawTracks([v]);if(t&&t.latestObservationRenderer){v=d[v]||[];var C=v.length;for(y=0;y<C;y++)h._repaint(v[y],null,!0)}}var e=this,d=this.trackMap,h=this.layer,t=h._getRenderer(),z;if(b)a.forEach(b,function(v){g(v)});else for(z in d)d.hasOwnProperty(z)&&g(z);this.moveLatestToFront()},moveLatestToFront:function(b){a.forEach(this.getLatestObservations(b),function(g){var e=g._shape;
e&&e._moveToFront();this._repaint(g,null,!0)},this.layer)},getLatestObservations:function(b){function g(z){z=h[z];return z[z.length-1]}var e=[],d=this.layer._getRenderer(),h=this.trackMap,t;if(!d.latestObservationRenderer)return e;if(b)a.forEach(b,function(z){e.push(g(z))});else for(t in h)h.hasOwnProperty(t)&&e.push(g(t));return e},clearTracks:function(b){var g=this.getLatestObservations(b),e=this.container,d=this.trackMap,h;if(b)a.forEach(b,function(z){delete this.trackMap[z];e&&(t=this.trackLineMap[z],
e.remove(t),delete this.trackLineMap[z])},this);else{if(e)for(h in d){var t=this.trackLineMap[h];e.remove(t)}this.trackMap={};this.trackLineMap={}}a.forEach(g,function(z){this._repaint(z,null,!0)},this.layer)},isLatestObservation:function(b){var g=this.trackMap[b.attributes[this.layer._trackIdField]];return g?g[g.length-1]===b:!1},destroy:function(){a.forEach(this._handles,function(g){g.remove()});var b=this.container;b&&(b.clear(),b._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});B.setObject("layers._TrackManager",D,r);return D})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){function e(){}function d(h){var t=h.layer;return{geometry:h.geometry,attributes:h.attributes,getLayer:function(){return t}}}
D=D(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(h){this.sourceLayer=h;this._hndls=[]},initialize:function(h){this.map=h;var t=this.sourceLayer,z=t.renderer;t.setDrawMode(!1);this.imageLayer=h._getMapImageLyr();var v=this;this.heatmapRenderer=z instanceof l?z:(z.getRendererInfoByZoom(h.getZoom())||z.getRendererInfoByScale(h.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);k(["../workers/heatmapCalculator"],function(y){v._calculator=new y(B.mixin({width:v.map.width,height:v.map.height},v._getOptions()));v._setupRenderer();
v.heatmapRenderer.getStats=y.calculateStats;v.heatmapRenderer.getHistogramData=y.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(h){var t=h.renderer,z=t instanceof l;this.heatmapRenderer?z?this.heatmapRenderer=t:this._removeRenderer(h):z&&(this.heatmapRenderer=t,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(h){h=h.opacity;var t=this._getImageBySourceId(this.sourceLayer.id);t&&t.setOpacity(h)},_setupRenderer:function(){var h=this._hndls,t=this.sourceLayer,z=this.map,v=this;t._originalDraw=t._draw;t._draw=e;t._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);h.push(t.on("update-end",this.redraw));h.push(t.on("suspend",function(y){(y=v._getImageBySourceId(v.sourceLayer.id))&&y.hide()}));h.push(t.on("resume",
function(y){(y=v._getImageBySourceId(v.sourceLayer.id))&&y.show()}));h.push(a.after(t,"redraw",this.redraw));h.push(z.on("layer-remove",function(y){y.layer==t&&((y=v._getImageBySourceId(v.sourceLayer.id))&&v.imageLayer.removeImage(y),v._removeRenderer({target:t}))}));t._collection&&h.push(t.on("graphic-add",function(y){v._reprojectFeature(y.graphic);v.redraw()}));1!==t.mode&&(h.push(z.on("resize, pan-end",this.redraw)),h.push(z.on("zoom-end",this.redraw)));h.push(t.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();t.graphics&&t.graphics.length&&(t.graphics[0].geometry&&!z.spatialReference.equals(t.graphics[0].geometry.spatialReference)&&c.forEach(t.graphics,function(y){this._reprojectFeature(y)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var h=this;this._drawTimer=setTimeout(function(){clearTimeout(h._drawTimer);h._drawTimer=null;h.sourceLayer._getRenderer().isInstanceOf(l)&&h.recalculateHeatmap()},16)}},_removeRenderer:function(h){var t=
h.target;t._draw=t._originalDraw;delete t._originalDraw;t.setDrawMode(!0);this._removeHandlers();this._hndls=[];var z=this._getImageBySourceId(this.sourceLayer.id);z&&this.imageLayer.removeImage(z);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;t.renderer!=h.renderer&&t.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),t.renderer&&t.renderer.getRendererInfo&&t.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(h){if(h&&h.geometry){var t=h.geometry,z=this.map.spatialReference;z.equals(t.spatialReference)||(t=m.project(t,z),null!=t&&(h.geometry=t))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var h=this.sourceLayer,t=this.map,z=this.heatmapRenderer,v=this.map.extent,y=this.map.width,C=this.map.height,F=this._calculator,x=this,u=function(A){A=x._getScreenPoints(A.features,t,h);A=F.calculateImageData(B.mixin({screenPoints:A,
mapinfo:{extent:[v.xmin,v.ymin,v.xmax,v.ymax],resolution:t.getResolution()},width:y,height:C},x._getOptions()));A=z.getSymbol(d({geometry:t.extent,attributes:{size:[y,C],imageData:A},layer:h}));A=new q({extent:t.extent,href:A.url,opacity:0,sourceId:h.id});x._swapMapImages(A,x._getImageBySourceId(h.id));h.suspended&&A.hide()},w={geometry:t.extent,timeExtent:h.useMapTime?t.timeExtent:void 0,spatialRelationship:b.SPATIAL_REL_INTERSECTS};null!=h._canDoClientSideQuery(w)?h.queryFeatures(w,u):u({features:h.graphics})},
_getScreenPoints:function(h,t,z){var v=[],y=h.length,C=0,F=0,x=new f(t.extent.xmin,t.extent.ymax,t.spatialReference),u=t.toScreen(x),w=u.x;u=u.y;var A=t.getResolution(),E;for((F=t.extent.getCacheValue("_parts"))&&(E=c.map(F,function(H){return z._intersects(t,H.extent)[0]}));y--;)if(F=h[y],F.geometry&&F.visible){var G={x:Math.ceil((F.geometry.x-x.x)/A+w),y:Math.floor((x.y-F.geometry.y)/A-u),attributes:F.attributes};E&&(F=1<E.length&&G.x<-E[0]?E[1]:E[0],G.x+=F);v[C++]=G}return v},_getImageBySourceId:function(h){var t=
this.imageLayer.getImages();t=c.filter(t,function(z){return z.sourceId==h});if(t.length)return t[t.length-1]},_swapMapImages:function(h,t){function z(){v.removeImage(t)}var v=this.imageLayer,y=this.sourceLayer.opacity;v.addImage(h);g.anim(h._node,{opacity:y},null,null,function(){h.opacity=y});null!=t&&g.anim(t._node,{opacity:0},null,null,z)},_removeHandlers:function(){if(null!=this._hndls)for(var h=this._hndls.length;h--;)this._hndls[h].remove()},_getOptions:function(){var h=this.heatmapRenderer;
return{blurRadius:h.blurRadius,gradient:h.gradient,maxPixelIntensity:h.maxPixelIntensity,minPixelIntensity:h.minPixelIntensity,field:h.field,fieldOffset:h.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var h=this.sourceLayer.graphics,t=h.length,z;t--;)z=h[t],z._shape=z._offsets=void 0}});B.setObject("layers.HeatmapManager",D,n);return D})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y){var C=y.layers.clusters,F=y.widgets.popup,x=C.numFeatures,u=Math.pow(2,53)-1;D=D(n,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(w){this._eventHandles=[];this.layer=w.layer;this.setAggregationInfo(w.aggregationInfo)},initialize:function(w){this._initialized=!0;this._map=w;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(w){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(w);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(w){this.aggregationInfo=w?B.mixin({},w):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(w){w=w&&w.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(w):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(w){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(w)},_createContainer:function(){var w=this.layer,A=new h._GraphicsLayer({_child:!0,id:w.id+"_clusters",visible:w.visible,minScale:w.minScale,maxScale:w.maxScale,infoTemplate:this._infoTemplate});A.fields=this._fields;A.setRenderer(this._renderer);A.loaded=!0;A.onLoad(A);A._setMap(this._map,w._div);return w._childLayer=A},_destroyContainer:function(){var w=
this.container;w&&(w.clear(),w._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new z({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var w=this._clusterGenerator;w.loaded?this._awaitClusterGenerator():this._eventHandles.push(w.on("load",B.hitch(this,function(){this._awaitClusterGenerator()})),w.on("load-error",B.hitch(this,function(A){})))},
_destroyClusterGenerator:function(w){this._clusterGenerator&&this._clusterGenerator.destroy(w);this._clusterGenerator=null},_awaitClusterGenerator:function(){var w=this._clusterGenerator;w.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(w.on("start",B.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var w=this.aggregationInfo;this._clusterRadius=w&&w.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var w=this.aggregationInfo||{};w.clusterRadius=this._clusterRadius;this.aggregationInfo=w},_applyRenderer:function(){var w=this.container,A=this._getClusterRendererInfo(),E=this._compareStatInfos(this._statisticInfos,
A.statisticInfos);E&&(this._statisticInfos=A.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(a.map(this._statisticInfos,function(G){return{attributeInfo:G.attributeInfo,statisticType:G.statisticType}})),w&&a.forEach(w.graphics,function(G){this._applyClusterAttributes(G,G.getAggregationInfo())},this)));this._renderer=A.renderer;this._applyFields();this._applyInfoTemplate(!!E&&this._initialized);w&&(w.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(w){var A=this.aggregationInfo,E=A&&A.disablePopup;this.layer.infoTemplate&&!E?(A=A&&A.infoTemplate||this._infoTemplate,w=w||!A?this._createInfoTemplate():this._updateInfoTemplate(A)):w=null;this._infoTemplate=w;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var w=this.aggregationInfo||{};w.infoTemplate=
this._infoTemplate;this.aggregationInfo=w},_getClusterRendererInfo:function(){var w=this.layer&&this.layer.renderer;return w?this._createClusterRenderer(w):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var w=this._createContinuousCountRenderer();this._addSizeByCountVariable(w);return{renderer:w,statisticInfos:[]}},_createContinuousCountRenderer:function(w){var A=new g(null,"cluster_count");A.addBreak({minValue:-u,maxValue:u,symbol:w?new w.constructor(w.toJson()):new e(B.clone(this.defaults.markerSymbol))});
return A},_createClusterRenderer:function(w){if(!this._isSupportedRenderer(w))return this._getDefaultClusterRenderer();var A=[];if(this._isSimpleRenderer(w))var E=this._createContinuousCountRenderer(w.symbol);else{E=new w.constructor(w.toJson());var G=this._getRendererAttributeInfo(w);if(this._isCBRenderer(E)){var H=v.getClusterField(G,"avg");A.push(this._getStatInfo(G,"avg"));E.normalizationType=null;E.normalizationField=null;E.normalizationTotal=null}else this._isUVRenderer(E)&&(H=v.getClusterField(G,
"type"),A.push(this._getStatInfo(G,"type")));E.attributeField=H;E.setValueExpression(null);E.valueExpressionTitle=null;E.setVisualVariables(null);this._setRendererTitle(E,w)}w=this._getSupportedVariables(w);G=this._createClusterVariables(w.allVars,A);E.setVisualVariables(G);w.sizeVars.length||this._isCBSizeRenderer(E)||this._addSizeByCountVariable(E);return{renderer:E,statisticInfos:A}},_isSupportedRenderer:function(w){if(this._isSimpleRenderer(w))return!0;if(this._isCBRenderer(w)){var A=w.normalizationType;
return"function"===typeof w.attributeField||A&&"field"!==A?!1:!0}return this._isUVRenderer(w)?"function"===typeof w.attributeField||w.attributeField2?!1:!0:!1},_isSimpleRenderer:function(w){return-1<w.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(w){return-1<w.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(w){return-1<w.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(w){var A=w.infos;if(!this._isCBRenderer(w)||
!A||2>A.length)return!1;var E=Infinity,G=-Infinity;a.forEach(A,function(H){if(H=H.symbol){var K=0;switch(H.type){case "simplemarkersymbol":K=H.size;break;case "picturemarkersymbol":K=(H.width+H.height)/2}E=Math.min(E,K);G=Math.max(G,K)}});return Infinity!==E&&-Infinity!==G&&E!==G},_getRendererAttributeInfo:function(w){var A=w.attributeField,E=A?this.layer.getField(A):null;return{field:A,attributeType:E&&"esriFieldTypeDate"===E.type?"date":null,rotationType:null,valueExpression:w.valueExpression,valueExpressionTitle:w.valueExpressionTitle,
normalizationField:w.normalizationField}},_setRendererTitle:function(w,A){w.legendOptions=B.clone(A.legendOptions);w.legendOptions&&w.legendOptions.title||(w.legendOptions=w.legendOptions||{},w.legendOptions.title=b.getRendererTitle(A,this.layer))},_getSupportedVariables:function(w){var A=w.getVisualVariablesForType("colorInfo",!1)||[],E=w.getVisualVariablesForType("sizeInfo",!1)||[],G=w.getVisualVariablesForType("opacityInfo",!1)||[];w=w.getVisualVariablesForType("rotationInfo",!1)||[];A=a.filter(A,
this._variableFilter);E=a.filter(E,this._variableFilter);G=a.filter(G,this._variableFilter);w=a.filter(w,this._variableFilter);return{sizeVars:E,allVars:A.concat(E).concat(G).concat(w)}},_variableFilter:function(w){return"function"!==typeof w.field&&!d.viewScaleRE.test(w.valueExpression)},_createClusterVariables:function(w,A){return a.map(w,function(E){return this._createVarForAvg(E,A)},this)},_createVarForAvg:function(w,A){var E=B.clone(w),G=this._getVariableAttributeInfo(w);E.field=v.getClusterField(G,
"avg");E.normalizationField=null;E.valueExpression=null;E.valueExpressionTitle=null;G=this._getStatInfo(G,"avg");this._addStatInfo(A,G);this._setVariableTitle(E,w);return E},_getVariableAttributeInfo:function(w){var A="rotationInfo"===w.type,E=A?"angle":null;A=A?w.rotationType:null;var G=w.legendOptions&&w.legendOptions.title,H=w.field,K=H?this.layer.getField(H):null;K&&"esriFieldTypeDate"===K.type&&(E="date");return{field:H,attributeType:E,rotationType:A,valueExpression:w.valueExpression,valueExpressionTitle:w.valueExpressionTitle||
w.valueExpression&&G,normalizationField:w.normalizationField}},_setVariableTitle:function(w,A){w.legendOptions&&w.legendOptions.title||(w.legendOptions=w.legendOptions||{},w.legendOptions.title=b.getVisualVariableTitle(A,this.layer))},_getStatInfo:function(w,A){return{statisticHash:v.getStatisticHash(w,A),attributeInfo:w,statisticType:A}},_addStatInfo:function(w,A){var E=this._findStatInfo(w,A);E?E.attributeInfo.valueExpressionTitle||(E.attributeInfo.valueExpressionTitle=A.attributeInfo.valueExpressionTitle):
w.push(A)},_findStatInfo:function(w,A){var E;a.some(w,function(G){G.statisticHash===A.statisticHash&&(E=G);return!!E});return E},_compareStatInfos:function(w,A){var E=a.filter(w,function(H){return!this._findStatInfo(A,H)},this),G=a.filter(A,function(H){return!this._findStatInfo(w,H)},this);return G.length||E.length?{added:G,removed:E}:null},_addSizeByCountVariable:function(w){var A=this._createSizeByCountVariable();A&&this._addVariable(w,A)},_getSizeByCountVariable:function(w){w=w.getVisualVariablesForType("sizeInfo",
!1)||[];return a.filter(w,function(A){return"cluster_count"===A.field})[0]},_updateSizeByCountVariable:function(){var w=this._renderer,A=this._getSizeByCountVariable(w);if(A){var E=this._createSizeByCountVariable();E&&this._replaceVariable(w,A,E)}},_createSizeByCountVariable:function(){var w=this._clusterGenerator;if(w){var A=w.getCurrentLodStats();if(A){var E=w.getNumFeatures();w=w.clusters;var G=A.min,H=A.max;1===A.count&&G===E||1===w.length&&w[0].count===E?(G=1,H=E):G&&G===H&&(H=2*G);E={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:G,maxDataValue:H,legendOptions:{title:x}}}}return E},_addVariable:function(w,A){var E=w.visualVariables||[];E.push(A);w.setVisualVariables(E)},_replaceVariable:function(w,A,E){var G=w.visualVariables;A=a.indexOf(G,A);-1<A&&G.splice(A,1);G.push(E);w.setVisualVariables(G)},_getFields:function(w){var A=[new t({name:"cluster_count",type:"esriFieldTypeInteger"})];a.forEach(w,function(E){var G=E.statisticType;E=E.attributeInfo;
var H;"avg"===G?H="date"===E.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===G&&(H=E.field?this.layer.getField(E.field).type:"esriFieldTypeString");A.push(new t({name:v.getClusterField(E,G),type:H}))},this);return A},_createInfoTemplate:function(){var w=this._statisticInfos,A=this._renderer,E=[{fieldName:"cluster_count",label:x,visible:!0,format:{digitSeparator:!0,places:0}}],G=[],H=[f.substitute({count:"{cluster_count}"},C.countSummary)],K=this._isUVRenderer(A)?A.infos:[];a.forEach(w,
function(I){var J=I.statisticType,L=I.attributeInfo,M=v.getClusterField(L,J),N=this._getFieldLabel(I);if("avg"===J){var O={fieldName:M,label:N,visible:!0,format:"date"===L.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var Y=this._getFieldSummary(I,M)}else"type"===J&&(Y="expression/"+M,O={fieldName:Y,visible:!0},G.push({name:M,title:N,returnType:"string",expression:this._getExpression(K,M)}),Y=this._getFieldSummary(I,Y));O&&E.push(O);Y&&H.push(Y)},this);return this._createPopupTemplate({fieldInfos:E,
expressionInfos:G,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(w){var A=w.toJson(),E=this._isUVRenderer(this._renderer)?this._renderer.infos:[];a.forEach(this._statisticInfos,function(G){var H=G.statisticType;G=v.getClusterField(G.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(G,A))&&(H.expression=this._getExpression(E,G))},this);return this._createPopupTemplate(A)},_createPopupTemplate:function(w){var A=new l(w),E=A.title;A.setTitle(B.hitch(this,function(G){var H=
this._map&&this._map.infoWindow;if("esri.dijit.PopupMobile"!==(H&&H.declaredClass)||A.info.title)return E.call(A,G);G=(G=G.attributes)&&G.cluster_count;return null==G?"":f.substitute({count:G},C.countTitle)}));return A},_findExpressionInfo:function(w,A){var E;a.some(A.expressionInfos,function(G){G.name===w&&(E=G);return!!E});return E},_escapeDoubleQuotes:function(w){return w?w.replace(/"/g,'\\"'):""},_getExpression:function(w,A){return["var uvInfos \x3d ["+this._getObjects(w).join(", ")+"];",'var predominantType \x3d Text($feature["'+
A+'"]);','var label \x3d "'+this._escapeDoubleQuotes(C.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(w){return a.map(w,function(A){return'{"value": "'+String(A.value)+'","label": "'+this._escapeDoubleQuotes(String(A.label))+'"}'},this)},_getFieldLabel:function(w){var A=w.statisticType,E=w.attributeInfo,G=E.field;w=E.normalizationField;
var H="";if("avg"===A)var K=w?C.avgNormFieldLabel:C.avgFieldLabel;else"type"===A&&(K=C.predominantFieldLabel);K&&(A=E.valueExpression?E.valueExpressionTitle:this.layer.getFieldLabel(G),w=w&&this.layer.getFieldLabel(w),H=f.substitute({fieldLabel:A||"",normFieldLabel:w||""},K));return H},_getFieldSummary:function(w,A){var E=w.statisticType,G=w.attributeInfo,H=G.field,K=G.normalizationField,I="";if("avg"===E)var J=K?C.avgNormFieldSummary:C.avgFieldSummary;else"type"===E&&(J=C.predominantFieldSummary);
J&&(E=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(H),K=K&&this.layer.getFieldLabel(K),I=f.substitute({fieldLabel:E||"",normFieldLabel:K||"",fieldValue:"{"+A+"}"},J));return I},_removeFromPopup:function(w){var A=this._map.infoWindow,E=A.features;if(E&&E.length){var G=a.filter(E,function(H){return H.getLayer()!==w});G.length<E.length&&(G.length?A.setFeatures(G):(A.clearFeatures(),A.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=
null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions&&this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(w,A){var E=A.clusterFillSymbol;E&&(E=new E.constructor(E.toJson()));E=new r(w,E);this._map.graphics.add(E);this._clusterBoundary=E},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:F.NLS_browseFeatures,
className:"browseFeatures",callback:B.hitch(this,function(w){w.preventDefault();w=this._map.infoWindow;var A=w.getSelectedFeature(),E=A.getChildGraphics(),G=w.getCurrentAnchor();w.setFeatures(E,{anchor:G});if(E=q.graphicsExtent(E))this._addClusterBoundary(E,w),w.show(this._getPopupLocation(E,G));this._popupClusterGraphic=A})}])[0]},_getPopupLocation:function(w,A){var E=w.getCenter();A=A.toLowerCase();-1<A.indexOf("top")?E.update(E.x,w.ymax):-1<A.indexOf("bottom")?E.update(E.x,w.ymin):-1<A.indexOf("left")?
E.update(w.xmin,E.y):E.update(w.xmax,E.y);return E},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:F.NLS_viewSummary,className:"viewSummary",callback:B.hitch(this,function(w){w.preventDefault();w=this._popupClusterGraphic;var A=this._map.infoWindow;A.setFeatures([w]);A.show(w.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",
B.hitch(this,function(w){(w.mapLevelChange||w.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",B.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();var w=[],A=[];a.forEach(this._clusterGenerator.clusters,function(E){var G=new r(E.centroid);G.setAggregationSourceLayer(this.layer);G.setAggregationInfo(E);this._applyClusterAttributes(G,E);1===E.count?(E=this._getSingleGraphic(G),
A.push(E)):w.push(G)},this);this._showSingleGraphics(A);this._addGraphics(w)},_addGraphics:function(w){var A=this.container;A.clear();a.forEach(w,function(E){A.add(E)})},_getSingleGraphic:function(w){var A=this._clusterGenerator.getCell(w.getAggregationInfo().primary).features[0],E=this.layer.renderer;E=E&&E.getSymbol(A);var G=this._getSizeByCountVariable(this._renderer);E&&G&&(w=G?this._renderer.getSize(w,{sizeInfo:G,shape:E.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):
null,A.setSize(w));return A},_showSingleGraphics:function(w){a.forEach(w,this._showSingleGraphic);this._singleGraphics=w},_hideSingleGraphics:function(){a.forEach(this._singleGraphics,function(w){w.setSize(null);this._hideSingleGraphic(w)},this);this._singleGraphics=null},_clearSingleGraphics:function(){a.forEach(this._singleGraphics,function(w){w.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(w){w&&w._resume()},_hideSingleGraphic:function(w){w&&w._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&
(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(w,A){w.setAttributes(A.attributes)},_createLayerEventListeners:function(){var w=this.layer;this._eventHandles.push(w.on("visibility-change",B.hitch(this,function(A){this.container.setVisibility(A.visible)})),w.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),w.on("renderer-change",B.hitch(this,function(){this._applyRenderer()})),
w.on("info-template-change",B.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",B.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var w=this._map.infoWindow;this._eventHandles.push(w.on("selection-change",B.hitch(this,function(){this._resetClusterNavPartial();
var A=this._map.infoWindow.getSelectedFeature(),E=A&&A.getLayer();if(E){var G;E===this.container?(this._removeClusterBoundary(),this._map.infoWindow.addActions&&(G=this._createBrowseFeaturesAction())):E===this.layer&&A._isSuspended()?(this._map.infoWindow.addActions&&(G=this._createViewSummaryAction()),this._popupSingleGraphic=A,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=G?[G]:null}})),w.on("clear-features",B.hitch(this,function(A){this._resetClusterNav();
A.isIntermediate||this._removeClusterBoundary()})),w.on("hide",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),w.on("show",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){a.forEach(this._eventHandles,function(w){w.remove()})}});B.setObject("layers.clustering.ClusterManager",D,k);
return D})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(D,B,a,c,k,n,r,f){D=D([n,r],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(m,q){B.mixin(this,q);this.initialize(m,q)},getTitle:function(m){var q;this.info&&(q=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(m,
this._fetchAttributes(m,null,this.getExpressionFieldsInTitle()),!0).title);return q||""},getContent:function(m){return this.info?(new f({template:this,graphic:m,chartTheme:this.chartTheme},c.create("div"))).domNode:""}});B.setObject("dijit.PopupTemplate",D,k);return D})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F){D=D(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(x,u){if(x){B.mixin(this,u);this.info=x;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var w=this._fieldLabels=
{},A=this._fieldsMap={};this.info.fieldInfos&&a.forEach(this.info.fieldInfos,function(E){var G=E.fieldName.toLowerCase(),H=this._isExpressionField(G)?this.getExpressionInfo(G):null;w[G]=H?H.title:E.label;A[G]=E},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return c.fromJson(c.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(x){var u;a.some(this.info&&this.info.fieldInfos,function(w){w.fieldName===x&&(u=w);return!!u});return u},getExpressionInfo:function(x){if(x=this._getExprField(x)){x=x.toLowerCase();var u;a.some(this.info.expressionInfos,function(w){w.name.toLowerCase()===x&&(u=w);return!!u});return u}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var x=
this._collectExprFieldsFromTemplatedString(this.info.description,[]);this.info.description||a.forEach(this.info.fieldInfos,function(u){u.visible&&this._collectExprField(u.fieldName,x)},this);a.forEach(this.info.mediaInfos,function(u){this._collectExprFieldsFromTemplatedString(u.title,x);this._collectExprFieldsFromTemplatedString(u.caption,x);if(u=u.value)this._collectExprFieldsFromTemplatedString(u.linkURL,x),this._collectExprFieldsFromTemplatedString(u.sourceURL,x),a.forEach(u.fields,function(w){this._collectExprField(w,
x)},this),this._collectExprField(u.normalizeField,x),this._collectExprField(u.tooltipField,x)},this);return x},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return a.some(this._getArcadeExpressions(),function(x){return x.hasGeometryOperations()})},hasAsyncExpressions:function(){return a.some(this._getArcadeExpressions(),function(x){return x.async})},initializeArcadeEngine:function(){return y.initialize(this._getArcadeExpressions())},
getComponents:function(x,u){var w=this.info,A={initArcadeEngine:this.initializeArcadeEngine()};w.fieldInfos&&(w=a.filter(w.fieldInfos,function(E){return-1!==E.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<w.length&&(A.relatedInfo=this._getRelatedRecords({graphic:x,fieldsInfo:w}));this._needFullResolutionFeature(x)&&(A.fullResolutionFeature=this._getFullResolutionFeature(x));this._needAggregatedFeaturesLayer(x)&&(A.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(x));return e(A).then(B.hitch(this,
function(E){var G=E.fullResolutionFeature,H=u&&u.evaluateAllExpressions,K=H?null:this.getRequiredExpressionFields();E=(H?this.hasAsyncExpressions():this._hasAsyncExpressions(K))?this._fetchAttributesAsync(x,G,K,E.aggregatedFeaturesLayer):this._fetchAttributes(x,G,K);return e([E]).then(B.hitch(this,function(I){return this._getPopupValues(x,I[0])}))}))},getAttachments:function(x){var u=x.getSourceLayer();x=x.attributes;if(this.info.showAttachments&&u&&u.hasAttachments&&u.objectIdField&&(x=x&&x[u.objectIdField]))return u.queryAttachmentInfos(x)},
_needAggregatedFeaturesLayer:function(x){return x.isAggregate()?a.some(this._getArcadeExpressions(),function(u){return u.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(x){return x.getAggregationSourceLayer().getFeatureCollectionLayer(x.getChildGraphics()).always(function(u){return u instanceof Error?null:u})},_needFullResolutionFeature:function(x){return(x=x.getSourceLayer())?"function"===typeof x.getMaxAllowableOffset&&0<x.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(x){var u=x.getSourceLayer(),w=u.objectIdField;x=(x=x.attributes)&&w&&x[w];if(null==x)return null;var A=new h;A.where=w+"\x3d"+x;A.maxAllowableOffset=0;A.outFields=[w];u._enableCacheHint(A);return u.queryFeatures(A).then(function(E){return E.features&&E.features[0]})},_isExpressionField:function(x){return this._reExprField.test(x)},_getExprField:function(x){return this._isExpressionField(x)?x.replace(this._reExprField,""):null},_collectExprField:function(x,u){var w=
this._getExprField(x);w&&u.push(w);return u},_collectExprFieldsFromTemplatedString:function(x,u){var w=this._getExprFieldsFromTemplatedString(x);w.length&&Array.prototype.push.apply(u,w);return u},_getExprFieldsFromTemplatedString:function(x){x=x?x.match(this._reExprFieldPattern):null;return a.map(x,function(u){return u.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(x){return a.some(x,function(u){u=this._exprCache[u];return!(!u||!u.async)},this)},_compileExpressions:function(x){var u={};a.forEach(x,function(w){var A=w.returnType&&w.returnType.toLowerCase();u[w.name]=new d({expression:w.expression,returnType:"number"===A?"number":"string",profile:y})});return u},_getArcadeExpressions:function(){var x=[],u;for(u in this._exprCache)x.push(this._exprCache[u]);return x},_fetchAttributesAsync:function(x,u,w,A){var E=this._fetchAttributes(x,
u,w,A);x={};for(var G in E)(u=E[G])&&u.then&&(x[G]=u);return e(x).then(B.hitch(this,function(H){for(var K in H){var I=H[K];E[K]=I instanceof Error?null:this._processArcadeResult(I)}return E}))},_processArcadeResult:function(x){"string"===typeof x&&(x=q.encode(x));return x},_fetchAttributes:function(x,u,w,A){var E=B.clone(x.attributes)||{},G=u&&u.geometry,H=this._exprPrefix,K=this._exprCache;w=w||a.map(this.info.expressionInfos,function(I){return I.name});a.forEach(w,function(I){var J=H+I;I=(I=K[I])?
x.evaluateExpression(I,this._getEvalOptions(I,x,G,A)):null;E[J]=this._processArcadeResult(I)},this);return E},_getEvalOptions:function(x,u,w,A){var E=x.hasGeometryOperations(),G=u.getSourceLayer(),H=G&&(G.getMap()||G.parentLayer&&G.parentLayer.getMap());A&&(A._map=H);x=y.getEvalOptions({expression:x,feature:u,layer:G,aggregatedFeaturesLayer:A,map:H,spatialReference:H&&H.spatialReference});u=x.context.vars.$feature;E=!(!E||!w);u&&E&&(u._geometry=w);x.skipCache=E;return x},_getPopupValues:function(x,
u,w){u=u||this._fetchAttributes(x);var A=this.info,E=x.getSourceLayer(),G=B.clone(u),H="",K="",I,J,L=E&&E._getDateOpts&&E._getDateOpts().properties;L=L&&L.slice(0);var M={dateFormat:{properties:L,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(Y in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(Y)){var N=this._relatedInfo[Y],O=this._relatedLayersInfo[Y];N&&(a.forEach(N.relatedFeatures,function(Z){for(J in Z.attributes)if(Z.attributes.hasOwnProperty(J)&&
"esriRelCardinalityOneToOne"===O.relation.cardinality){var P=this._toRelatedFieldName([O.relation.id,J]);u[P]=G[P]=Z.attributes[J]}},this),a.forEach(N.relatedStatsFeatures,function(Z){for(J in Z.attributes)if(Z.attributes.hasOwnProperty(J)){var P=this._toRelatedFieldName([O.relation.id,J]);u[P]=G[P]=Z.attributes[J]}},this))}for(I in G){var Y=this._fieldsMap[I.toLowerCase()];N=this._getLayerFieldInfo(E,I);Y&&N&&(Y.fieldName=N.name);G[I]=this._formatValue(G[I],I,M);L&&Y&&Y.format&&Y.format.dateFormat&&
(Y=a.indexOf(L,I),-1<Y&&L.splice(Y,1))}if(E)for(I in L=E.typeIdField,u)if(u.hasOwnProperty(I)&&-1===I.indexOf(this._relatedFieldPrefix)){var ba=u[I];l.isDefined(ba)&&(Y=this._getDomainName(E,x,I,ba),l.isDefined(Y)?G[I]=Y:I===L&&(Y=this._getTypeName(E,x,ba),l.isDefined(Y)&&(G[I]=Y)))}A.title&&(H=this._processFieldsInLinks(this._fixTokens(A.title,E),u),H=B.trim(this._removeEmptyHref(l.substitute(G,H,M)||"")));if(w)return{title:H};A.description&&(K=this._processFieldsInLinks(this._fixTokens(A.description,
E),u),K=B.trim(this._removeEmptyHref(l.substitute(G,K,M)||"")));if(A.fieldInfos){var ha=[];a.forEach(A.fieldInfos,function(Z){(I=Z.fieldName)&&Z.visible&&ha.push([this._fieldLabels[I.toLowerCase()]||I,l.substitute(G,"${"+I+"}",M)||""])},this)}var U;if(A.mediaInfos){var X=[];a.forEach(A.mediaInfos,function(Z){U=0;ba=Z.value;switch(Z.type){case "image":var P=ba.sourceURL;P=P&&B.trim(this._removeEmptyHref(l.substitute(u,this._fixTokens(P,E))));U=!!P;break;case "piechart":case "linechart":case "columnchart":case "barchart":P=
ba.normalizeField;ba.fields=a.map(ba.fields,function(Fa){return(da=this._getLayerFieldInfo(E,Fa))?da.name:Fa},this);if(P){var da=this._getLayerFieldInfo(E,P);ba.normalizeField=da?da.name:P}U=a.some(ba.fields,function(Fa){return l.isDefined(u[Fa])||-1!==Fa.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(U){Z=B.clone(Z);ba=Z.value;P=Z.title?this._processFieldsInLinks(this._fixTokens(Z.title,E),u):"";var ia=Z.caption?this._processFieldsInLinks(this._fixTokens(Z.caption,
E),u):"";Z.title=P?B.trim(this._removeEmptyHref(l.substitute(G,P,M)||"")):"";Z.caption=ia?B.trim(this._removeEmptyHref(l.substitute(G,ia,M)||"")):"";if("image"===Z.type)ba.sourceURL=l.substitute(u,this._fixTokens(ba.sourceURL,E)),ba.linkURL&&(ba.linkURL=B.trim(l.substitute(u,this._fixTokens(ba.linkURL,E))||""));else{var xa,Ca;a.forEach(ba.fields,function(Fa,Ma){if(-1!==Fa.indexOf(this._relatedFieldPrefix))Ca=this._getRelatedChartInfos(Fa,ba,u,M),Ca instanceof Array?ba.fields=Ca:ba.fields[Ma]=Ca;else{var Sa=
u[Fa];Sa=void 0===Sa?null:Sa;xa=u[ba.normalizeField]||0;Sa&&xa&&(Sa/=xa);ba.fields[Ma]={y:Sa,tooltip:(this._fieldLabels[Fa.toLowerCase()]||Fa)+":\x3cbr/\x3e"+this._formatValue(Sa,Fa,M,!!xa)}}},this)}X.push(Z)}},this)}return{title:H,description:K,hasDescription:!!A.description,fields:ha&&ha.length?ha:null,mediaInfos:X&&X.length?X:null,formatted:G,editSummary:!1!==A.showLastEditInfo&&E&&E.getEditSummary?E.getEditSummary(x):""}},_getRelatedChartInfos:function(x,u,w,A){var E,G;var H=[];var K=this._fromRelatedFieldName(x);
var I=K[0];var J=this._relatedInfo[I];I=this._relatedLayersInfo[I];J&&a.forEach(J.relatedFeatures,function(L){L=L.attributes;var M;for(M in L)if(L.hasOwnProperty(M)&&M===K[1]){var N={};G=L[M];u.normalizeField&&(E=-1!==u.normalizeField.indexOf(this._relatedFieldPrefix)?L[this._fromRelatedFieldName(u.normalizeField)[1]]:w[u.normalizeField]);G&&E&&(G/=E);if(u.tooltipField)if(-1!==u.tooltipField.indexOf(this._relatedFieldPrefix)){var O=this._fromRelatedFieldName(u.tooltipField)[1],Y=l.isDefined(L[O])?
this._formatValue(L[O],u.tooltipField,A,!!E):O;N.tooltip=Y+":\x3cbr/\x3e"+this._formatValue(G,O,A,!!E)}else N.tooltip=(this._fieldLabels[x.toLowerCase()]||x)+":\x3cbr/\x3e"+this._formatValue(G,u.tooltipField,A,!!E);else N.tooltip=G;N.y=G;H.push(N)}},this);return"esriRelCardinalityOneToMany"===I.relation.cardinality||"esriRelCardinalityManyToMany"===I.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(x,u){var w=this;return x.replace(/(\{([^\{\r\n]+)\})/g,function(A,E,G){A=w._getLayerFieldInfo(u,G);return"$"+(A?"{"+
A.name+"}":E)})},_encodeAttributes:function(x,u){var w=B.clone(x)||{},A,E;for(A in w)(E=w[A])&&"string"===typeof E&&(E=u?E:encodeURIComponent(E),E=E.replace(/'/g,"\x26apos;"),w[A]=E);return w},_processFieldsInLinks:function(x,u){var w=this._encodeAttributes(u),A=this._encodeAttributes(u,!0);w=B.hitch(this,this._addValuesToHref,u,w,A);x&&(x=x.replace(this._reHref,w).replace(this._reHrefApos,w));return x},_addValuesToHref:function(x,u,w,A,E,G){G=G&&B.trim(G);return A=l.substitute(G&&0===G.indexOf("${")?
"'"===E?w:x:u,A)},_getLayerFieldInfo:function(x,u){return x&&x.getField?x.getField(u):null},_formatValue:function(x,u,w,A){var E=this._fieldsMap[u.toLowerCase()],G=E&&E.format;u=-1!==a.indexOf(w.dateFormat.properties,u);var H="number"===typeof x&&!u&&(!G||!G.dateFormat);if(!l.isDefined(x)||!E||!l.isDefined(G))return this._applyFormatting(x,H);E=G.hasOwnProperty("places")||G.hasOwnProperty("digitSeparator");var K=G.hasOwnProperty("digitSeparator")?G.digitSeparator:!0;if(E&&!u)var I={formatType:"NumberFormat",
places:l.isDefined(G.places)&&(!A||0<G.places)?Number(G.places):Infinity};else if(G.dateFormat)I=B.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[G.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(x,H);var J=this._applyFormatFunctions(x,I,w);E&&-1<x.constructor.toString().indexOf("Array")&&(J="",a.forEach(x,B.hitch(this,function(L,M){M&&(J+=" ");J+=this._applyFormatFunctions(L,I,w)})));E&&!K&&F.group&&(J=J.replace(new RegExp("\\"+
F.group,"g"),""));u&&(J='\x3cspan class\x3d"esriDateValue"\x3e'+J+"\x3c/span\x3e");return this._applyFormatting(J,H)},_applyFormatFunctions:function(x,u,w){u&&w&&(w.format={myKey:u});x=l.substitute({myKey:x},"${myKey}",w)||"";u&&w&&(w.format=null);return x},_applyFormatting:function(x,u){return u?this._forceLTR(x):this._applyPreWrap(x)},_forceLTR:function(x){var u=f("ie");return u&&10>=u?x:"\x3cspan class\x3d'esriNumericValue'\x3e"+x+"\x3c/span\x3e"},_applyPreWrap:function(x){return"string"===typeof x?
x.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):x},_insertOffset:function(x){x&&(x=l.isDefined(this.utcOffset)?x.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):x);return x},_getDomainName:function(x,u,w,A){return(x=x.getDomain&&x.getDomain(w,{feature:u}))&&x.codedValues?x.getName(A):null},_getTypeName:function(x,u,w){return(x=x.getType&&x.getType(u))&&x.name},_getRelatedRecords:function(x){var u=x.graphic,w;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(x).then(B.hitch(this,function(A){for(w in A)A.hasOwnProperty(w)&&A[w]&&(this._relatedLayersInfo[w].relatedLayerInfo=A[w])})));return this._relatedLayersInfoPromise.then(B.hitch(this,function(){return this._queryRelatedLayers(u)})).then(B.hitch(this,function(A){this._setRelatedRecords(u,A);return A}))},_getRelatedLayersInfo:function(x){var u=x.fieldsInfo,w,A={};var E=x.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});a.forEach(u,function(G){var H;
var K=this._fromRelatedFieldName(G.fieldName);var I=K[0];K=K[1];if(I&&(!this._relatedLayersInfo[I]&&E&&E.relationships&&(a.some(E.relationships,function(L){if(L.id==I)return H=L,!0}),H&&(this._relatedLayersInfo[I]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[I]&&(this._relatedLayersInfo[I].relatedFields.push(K),G.statisticType))){var J=new v;J.statisticType=G.statisticType;J.onStatisticField=K;J.outStatisticFieldName=K;this._relatedLayersInfo[I].outStatistics.push(J)}},
this);for(w in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(w)&&this._relatedLayersInfo[w]&&(x=this._relatedLayersInfo[w].relation,x=E.url.replace(/[0-9]+$/,x.relatedTableId),this._relatedLayersInfo[w].relatedLayerUrl=x,A[w]=g({url:x,content:{f:"json"},callbackParamName:"callback"}));return m(A)},_queryRelatedLayers:function(x){var u={},w;for(w in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(w)&&(u[w]=this._queryRelatedLayer({graphic:x,relatedInfo:this._relatedLayersInfo[w]}));
return m(u)},_queryRelatedLayer:function(x){var u,w;var A=x.graphic;var E=A.getSourceLayer();var G=E.url.match(/[0-9]+$/g)[0];var H=x.relatedInfo;var K=H.relatedLayerInfo;var I=H.relatedLayerUrl;var J=H.relation;x=a.filter(K.relationships,function(ba){return ba.relatedTableId===parseInt(G,10)});1===x.length?u=x[0]:1<x.length&&a.some(x,function(ba){ba.id===J.id&&(u=ba);return!!u});if(u){var L=new h;a.some(K.fields,function(ba){if(ba.name===u.keyField)return w=-1!==a.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],ba.type)?"number":"string",!0});if(u.relationshipTableId&&u.keyFieldInRelationshipTable){var M=new r;this._queryRelatedRecords(A,u).then(B.hitch(this,function(ba){var ha;(ha=ba[A.attributes[E.objectIdField]])?(ba=a.map(ha.features,function(U){return U.attributes[K.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&K.supportsStatistics&&(O=new h,O.where=this._chunkWhereInClause(K.objectIdField,ba,1E3),O.outFields=L.outFields,
O.outStatistics=H.outStatistics),O&&(Y=new t(I),Y.execute(O).then(B.hitch(this,function(U){var X=[];X.push(ha);X.push(U);M.resolve(X)})))):M.resolve()}))}else{var N="string"===w?u.keyField+"\x3d'"+A.attributes[J.keyField]+"'":u.keyField+"\x3d"+A.attributes[J.keyField];L.where=N;L.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&K.supportsStatistics){var O=new h;O.where=L.where;O.outFields=L.outFields;O.outStatistics=H.outStatistics}var Y=new t(I);N=[];N.push(Y.execute(L));O&&
N.push(Y.execute(O))}}return N?m(N):M?M.promise:void 0},_setRelatedRecords:function(x,u){this._relatedInfo=[];for(var w in u)if(u.hasOwnProperty(w)&&u[w]){var A=u[w];this._relatedInfo[w]={};this._relatedInfo[w].relatedFeatures=A[0].features;l.isDefined(A[1])&&(this._relatedInfo[w].relatedStatsFeatures=A[1].features)}},_handlerErrorResponse:function(x,u){x.reject(u)},_fromRelatedFieldName:function(x){var u=[];-1!==x.indexOf(this._relatedFieldPrefix)&&(x=x.split("/"),u=x.slice(1));return u},_toRelatedFieldName:function(x){var u=
"";x&&0<x.length&&(u=this._relatedFieldPrefix+x[0]+"/"+x[1]);return u},_queryRelatedRecords:function(x,u){var w=x.getSourceLayer(),A=new z;A.outFields=["*"];A.relationshipId=u.id;A.objectIds=[x.attributes[w.objectIdField]];return w.queryRelatedFeatures(A)},_removeEmptyHref:function(x){return x.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(x,u,w){for(var A=0,E=[];A<u.length;)E.push(x+" IN ("+u.slice(A,w+A)+")"),A+=w;return E.join(" OR ")}});return b.PopupInfo=b.PopupInfoTemplate=D})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(D){var B=D.getObject("dojox.html.entities",!0),a=function(k,n){if(n._encCache&&n._encCache.regexp&&n._encCache.mapper&&n.length==n._encCache.length){var r=n._encCache.mapper;var f=n._encCache.regexp}else{r={};f=["["];var m;for(m=0;m<n.length;m++)r[n[m][0]]="\x26"+n[m][1]+";",f.push(n[m][0]);f.push("]");f=new RegExp(f.join(""),"g");n._encCache={mapper:r,regexp:f,length:n.length}}return k=k.replace(f,function(q){return r[q]})},c=function(k,
n){if(n._decCache&&n._decCache.regexp&&n._decCache.mapper&&n.length==n._decCache.length){var r=n._decCache.mapper;var f=n._decCache.regexp}else{r={};f=["("];var m;for(m=0;m<n.length;m++){var q="\x26"+n[m][1]+";";m&&f.push("|");r[q]=n[m][0];f.push(q)}f.push(")");f=new RegExp(f.join(""),"g");n._decCache={mapper:r,regexp:f,length:n.length}}return k=k.replace(f,function(l){return r[l]})};B.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];B.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];B.encode=function(k,n){k&&(n?k=a(k,n):(k=a(k,B.html),k=a(k,B.latin)));return k};B.decode=function(k,n){k&&(n?k=c(k,n):(k=c(k,B.html),k=c(k,B.latin)));return k};return B})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(D,B,a,c,k,n){D=D(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,
syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(r){B.mixin(this,r);this.returnType=this.returnType||"string";this.id=k.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var r=this._traits.geometryOperations;void 0===r&&(r=this._traits.geometryOperations=n.hasGeometryOperations(this.syntaxTree));return r},hasFeatureSetOperations:function(){var r=
this._traits.featureSetOperations;void 0===r&&(r=this._traits.featureSetOperations=n.hasFeatureSetOperations(this.syntaxTree));return r},hasVariable:function(r){var f=this._traits.variables;void 0===f[r]&&(f[r]=n.hasVariable(this.syntaxTree,r));return f[r]},hasFunction:function(r){var f=this._traits.functions;void 0===f[r]&&(f[r]=n.hasFunction(this.syntaxTree,r));return f[r]},evaluate:function(r){this._compile();var f=this._attributeCache.compiledFunc;return this.async?n.executeAsyncFunction(f,r):
n.executeFunction(f,r)},_setSyntaxTree:function(r){this.syntaxTree=r;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),
isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return c.ArcadeExpression=D})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(D,B,a,c,k,n,r,f){D=new (D(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map",
"$aggregatedfeatures"],async:["$layer","$datastore","$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(m){var q=[];f.hasGeometryOperations(m)&&q.push(r.enableGeometryOperations());(f.hasFeatureSetOperations(m)||f.hasVariables(m,this.defaults.globals.featureSet))&&q.push(r.enableFeatureSetOperations());f.isAsync(m)&&q.push(r.enableAsyncOperations());return k(q)},isAsync:function(m){m=[m];return f.hasFeatureSetOperations(m)||
f.hasVariables(m,this.defaults.globals.async)},parse:function(m){return r.createSyntaxTree(m.expression)},compile:function(m){var q=B.clone(this.defaults.context);q.useAsync=m.async;return m.syntaxTree?r.createFunction(m.syntaxTree,q):null},getEvalOptions:function(m){var q=m.expression,l=m.feature,b=m.layer,g=m.aggregatedFeaturesLayer,e=m.map;m=m.spatialReference;l=l&&q.hasVariable("$feature")?n.createFromGraphicLikeObject(l.geometry,l.attributes,b):null;var d,h;if(b){var t={spatialReference:m};q.hasVariable("$layer")&&
(d=b.getMap()?r.createFeatureSetFromLayer(b,t):r.createFeatureSetFromLayerUrl(b.url,t));if(q.hasVariable("$datastore"))var z=(z=f.getServiceUrl(b.url))?r.createFeatureSetCollectionFromServiceUrl(z,t):null;q.hasVariable("$aggregatedfeatures")&&g&&(h=g.getMap()?r.createFeatureSetFromLayer(g,t):null)}q=e&&q.hasVariable("$map")?r.createFeatureSetCollectionFromMap(e):null;return{context:{vars:{$feature:l,$layer:d,$datastore:z,$map:q,$aggregatedfeatures:h},spatialReference:m}}}}));B.setObject("arcadeProfiles.popupProfile",
D,c);return D})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F){var x=0,u=F.widgets.popup,
w=F.widgets.templatePicker;B=B([C,h,t],{declaredClass:"esri.dijit._PopupRenderer",_sanitizer:new e({whiteList:{span:["class"],dd:[],dl:[],dt:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],sub:[],sup:[],animate:[],animatetransform:[],circle:[],clippath:[],defs:[],ellipse:[],g:[],image:[],line:[],lineargradient:[],marker:[],mask:[],path:[],pattern:[],polygon:[],polyline:[],radialgradient:[],rect:[],stop:[],svg:[],"switch":[],symbol:[],text:[],textpath:[],tspan:[],use:[]}},!0),constructor:function(){this._nls=
c.mixin({},u)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(w.loading);this._contentDfd=this.template.getComponents(this.graphic).then(c.hitch(this,this._handleComponentsSuccess)).otherwise(c.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var A=this._mediaInfos,E=A.length,G=this.domNode,H=this._prevMedia,K=this._nextMedia;if(1<E){var I=0,J=0;k.forEach(A,function(L){"image"===L.type?I++:-1!==L.type.indexOf("chart")&&J++});I&&(q.set(this._imageCount,"innerHTML",I),n.query(".summary .image",
G).removeClass("hidden"));J&&(q.set(this._chartCount,"innerHTML",J),n.query(".summary .chart",G).removeClass("hidden"))}else n.query(".summary",G).addClass("hidden"),l.add(H,"hidden"),l.add(K,"hidden");A=this._mediaPtr;0===A?l.add(H,"hidden"):l.remove(H,"hidden");A===E-1?l.add(K,"hidden"):l.remove(K,"hidden");this._destroyFrame()},_displayMedia:function(){var A=this._mediaInfos[this._mediaPtr],E=A.title,G=A.caption,H=n.query(".mediaSection .hzLine",this.domNode)[0];q.set(this._mediaTitle,"innerHTML",
this._sanitizer.sanitize(E));l[E?"remove":"add"](this._mediaTitle,"hidden");q.set(this._mediaCaption,"innerHTML",this._sanitizer.sanitize(G));l[G?"remove":"add"](this._mediaCaption,"hidden");l[E&&G?"remove":"add"](H,"hidden");this._rid=null;if("image"===A.type)this._showImage(A);else{var K=this;E=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];G=A.value.theme||this.chartTheme;c.isString(G)&&(G=G.replace(/\./gi,"/"),-1===G.indexOf("/")&&(G="dojox/charting/themes/"+G));G||(G="./Rainbow");
E.push(G);try{var I=this._rid=x++;D(E,function(J,L,M){I===K._rid&&(K._rid=null,K._showChart(A.type,A.value,J,L,M))})}catch(J){}}},_preventNewTab:function(A){return(A=A&&c.trim(A).toLowerCase())&&(0===A.indexOf("mailto:")||0===A.indexOf("tel:"))},_showImage:function(A){l.add(this._mediaFrame,"image");var E=g.get(this._gallery,"height"),G=A.value,H=d.decode(G.linkURL);G=d.decode(G.sourceURL);var K;H&&(K=b.create("a",{href:H,target:this._preventNewTab(H)?"":"_blank"},this._mediaFrame));H=A.refreshInterval?
this._addURLParameter(G,"timestamp",Date.now()):G;b.create("img",{className:"esriPopupMediaImage",src:H},K||this._mediaFrame);var I=n.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=a.connect(I,"onload",this,function(){this._clearImageHandles();this._imageLoaded(I,E);this._initImageRefresh(A)})},_addURLParameter:function(A,E,G){var H=-1===A.indexOf("?")?"?":"\x26";return A+H+E+"\x3d"+G},_initImageRefresh:function(A){if(A.refreshInterval){var E=6E4*A.refreshInterval;this._imageRefreshHandle=
setTimeout(c.hitch(this,function(){this._destroyFrame();this._showImage(A)}),E)}},_clearImageHandles:function(){a.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(A,E,G,H,K){l.remove(this._mediaFrame,"image");G=this._chart=new G(b.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});K&&G.setTheme(K);switch(A){case "piechart":G.addPlot("default",{type:"Pie",labels:!1});G.addSeries("Series A",
E.fields);break;case "linechart":G.addPlot("default",{type:"Markers"});G.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});G.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});k.forEach(E.fields,function(I,J){I.x=J+1});G.addSeries("Series A",E.fields);break;case "columnchart":G.addPlot("default",{type:"Columns",gap:3});G.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});G.addSeries("Series A",E.fields);break;case "barchart":G.addPlot("default",{type:"Bars",
gap:3}),G.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),G.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),G.addSeries("Series A",E.fields)}this._action=new H(G);G.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);q.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(A,E){var G=A.height;G<E&&g.set(A,"marginTop",
Math.round((E-G)/2)+"px")},_attListHandler:function(A,E){if(A===this._attachmentsDfd){this._attachmentsDfd=null;var G="";E instanceof Error||!E||!E.length||k.forEach(E,function(H){G+="\x3cli\x3e";G+="\x3ca href\x3d'"+y.addProxy(H.url)+"' target\x3d'_blank'\x3e"+(H.name||"[No name]")+"\x3c/a\x3e";G+="\x3c/li\x3e"});q.set(this._attachmentsList,"innerHTML",G||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(A,E){var G=y.getURIInfo(A);if(G){var H=A.match(G.pattern),K=H&&
H[2];H=d.decode(H[1]);b.create("a",{target:"_blank",href:H,title:H,innerHTML:this._sanitizer.sanitize(v.substitute({appName:G.appName,hierPart:K},G.label))},E)}else q.set(E,"innerHTML",this._sanitizer.sanitize(A))},_showStatus:function(A){q.set(this._status,"innerHTML",A);l.remove(this._status,"hidden");n.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){q.set(this._status,"innerHTML","");l.add(this._status,"hidden");n.query(".mainSection",this.domNode).removeClass("hidden")},
_handleComponentsSuccess:function(A){if(A){this._hideStatus();var E=this.showTitle?A.title:"",G=A.description,H=A.fields,K=A.mediaInfos,I=this.domNode,J=this._nls,L=this,M=this.template,N=this.graphic;this._prevMedia.title=J.NLS_prevMedia;this._nextMedia.title=J.NLS_nextMedia;q.set(this._title,"innerHTML",this._sanitizer.sanitize(E));E||l.add(this._title,"hidden");if(!A.hasDescription&&H&&(G="",H=k.map(H,function(Y){var ba=b.create("tr",{vAlign:"top"});b.create("td",{className:"attrName",innerHTML:this._sanitizer.sanitize(Y[0])},
ba);var ha=b.create("td",{className:"attrValue"},ba);this._createLinkIfURI(Y[1],ha);return ba},this),H.length)){var O=b.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});k.forEach(H,function(Y){O.appendChild(Y)})}O?(this._description.appendChild(O),G=!0):q.set(this._description,"innerHTML",this._sanitizer.sanitize(G));G||l.add(this._description,"hidden");n.query("a",this._description).forEach(function(Y){L._preventNewTab(Y.href)?"_blank"===Y.target&&q.remove(Y,"target"):
q.set(Y,"target","_blank")});E&&G?n.query(".mainSection .hzLine",I).removeClass("hidden"):E||G?n.query(".mainSection .hzLine",I).addClass("hidden"):n.query(".mainSection",I).addClass("hidden");if(E=this._attachmentsDfd=M.getAttachments(N))E.addBoth(c.hitch(this,this._attListHandler,E)),q.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+J.NLS_searching+"...\x3c/li\x3e"),n.query(".attachmentsSection",I).removeClass("hidden");K&&K.length&&(n.query(".mediaSection",I).removeClass("hidden"),m.setSelectable(this._mediaFrame,
!1),this._mediaInfos=K,this._mediaPtr=0,this._updateUI(),this._displayMedia());A.editSummary&&(q.set(this._editSummary,"innerHTML",this._sanitizer.sanitize(A.editSummary)),K&&K.length&&l.remove(this._mediaBreak,"hidden"),l.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(u.NLS_noInfo)},_handleComponentsError:function(A){A&&"cancel"===A.dojoType||this._showStatus(u.NLS_noInfo)}});c.setObject("dijit._PopupRenderer",B,z);return B})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(D,B,a,c,k,n){return D([n,k],{_onMap:function(r){var f=this.constructor._onMap;f&&f.FINAL||(delete this.constructor._onMap,f=this.registerConnectEvents(),f.FINAL=!0);r=r.toLowerCase();if(f[r])var m=this[f[r].method];else r=this._onCamelCase(r),this[r]&&(m=r);return m},on:function(r,f){var m=this._onMap(r),q=r.replace(/\-/g,""),l="on"+q in this.domNode;return m||!l?this.inherited(arguments):this.own(c(this.domNode,q,f))[0]},emit:function(r,f,m){var q,l=r.toLowerCase(),b=this.constructor._onMap||
this.registerConnectEvents();var g=this[this._onMap(l)];f=f||{};f.target||(f.target=this);if(g&&b&&b[l]){this._onObj2Arr(function(){q=Array.prototype.slice.call(arguments)},b[l].argKeys)(f);var e=B.mixin({},arguments);e[2]=q;e[0]=b[l].name.replace(/^on/,"")}return this.inherited(e||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(D,B,a){var c=a.widgets.legend;return{getVisualVariableTitle:function(k,n){var r=k.field,
f=k.normalizationField,m=!1,q=!1,l=!1,b;r=D.isFunction(r)?null:r;f=D.isFunction(f)?null:f;if(k.legendOptions&&k.legendOptions.title)var g=k.legendOptions.title;else if(k.valueExpressionTitle)g=k.valueExpressionTitle;else{if(n.renderer&&n.renderer.authoringInfo&&n.renderer.authoringInfo.visualVariables){var e=n.renderer.authoringInfo.visualVariables;for(b=0;b<e.length;b++){var d=e[b];if("colorInfo"===d.type&&"ratio"===d.style){m=!0;break}else if("colorInfo"===d.type&&"percent"===d.style){q=!0;break}else if("colorInfo"===
d.type&&"percentTotal"===d.style){l=!0;break}}}(m=l&&"showRatioPercentTotal"||q&&"showRatioPercent"||m&&"showRatio"||f&&"showNormField"||r&&"showField"||null)&&(g=B.substitute({field:r&&n.getFieldLabel(r),normField:f&&n.getFieldLabel(f)},"showField"===m?"${field}":c[m]))}return g},getRendererTitle:function(k,n){if(k){if("esri.renderer.ClassBreaksRenderer"===k.declaredClass){var r=k.attributeField;var f=k.normalizationField;var m="percent-of-total"===k.normalizationType}r=D.isFunction(r)?null:r;f=
D.isFunction(f)?null:f;if(k.legendOptions&&k.legendOptions.title)var q=k.legendOptions.title;else k.valueExpressionTitle?q=k.valueExpressionTitle:(m=f&&"showNormField"||(m?"showNormPct":null)||r&&"showField"||null)&&(q=B.substitute({field:r&&n.getFieldLabel(r),normField:f&&n.getFieldLabel(f)},"showField"===m?"${field}":c[m]))}return q}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){D=B(n,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(d){this._update=a.hitch(this,this._update);this._indexFeatures=a.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=d.map;this.layer=d.layer;this.setLod(d.lod);this.setTolerance(d.tolerance);this.setClusterMode(d.clusterMode);this.setClusterRadius(d.clusterRadius);this.setSortEnabled(d.sortEnabled);this.setFilterEnabled(d.filterEnabled);this.setBufferEnabled(d.bufferEnabled);this.setUpdateEnabled(d.updateEnabled);this.setStatisticInfos(d.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",a.hitch(this,this._startup)))},destroy:function(d){this._displayFeatures(!0,
d);c.forEach(this._eventHandles,function(h){h.remove()});l.clearTimeout(this._updateHandle);l.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(d){var h=this.lod;this.lod=d||this.defaults.lod;h!==this.lod&&this.update()},setTolerance:function(d){var h=this.tolerance;this.tolerance=d||this.defaults.tolerance;h!==this.tolerance&&this.update()},setClusterMode:function(d){var h=
this.clusterMode;this.clusterMode=d||this.defaults.clusterMode;this._evalClusterParams();h!==this.clusterMode&&this.update()},setClusterRadius:function(d){var h=this.clusterRadius;this.clusterRadius=null!=d?d:this.defaults.clusterRadius;this._evalClusterParams();h!==this.clusterRadius&&this.update()},setSortEnabled:function(d){var h=this.sortEnabled;this.sortEnabled=null!=d?!!d:this.defaults.sortEnabled;h!==this.sortEnabled&&this.update()},setFilterEnabled:function(d){var h=this.filterEnabled;this.filterEnabled=
null!=d?!!d:this.defaults.filterEnabled;h!==this.filterEnabled&&this.update()},setBufferEnabled:function(d){var h=this.bufferEnabled;this.bufferEnabled=null!=d?!!d:this.defaults.bufferEnabled;h!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(d){var h=this.updateEnabled;(this.updateEnabled=null!=d?!!d:this.defaults.updateEnabled)&&h!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(d){this.statisticInfos=d||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=l.setTimeout(this._update,l.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=l.setTimeout(this._indexFeatures,l.priority.HIGH))},getCell:function(d){return this._cellIndex[d.length][d]},getCluster:function(d){var h;c.some(this.clusters,function(t){-1<c.indexOf(t.geohashes,d)&&(h=t);return!!h});return h},getCellsInCluster:function(d){var h=
[];c.forEach(d&&d.geohashes,function(t){(t=this.getCell(t))&&h.push(t)},this);return h},getFeaturesInCluster:function(d){var h=[];d=this.getCellsInCluster(d);c.forEach(d,function(t){Array.prototype.push.apply(h,t.features)});return h},toggleFeatureVisibility:function(d){this.index()},getCurrentLodStats:function(){var d=this._globalIndex.lodStats;return d&&d[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var d=this._globalIndex.fullExtent;return d&&
Infinity!==d.xmin?new f(d):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",a.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",a.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var d=Error("GeohashAggregation is supported only for points");else{var h=this.map.spatialReference;
h.isWebMercator()||4326===h.wkid||(d=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}d?(this.loadError=d,this.emit("load-error",{error:d})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",a.hitch(this,this.index)),this.layer.on("edits-complete",a.hitch(this,this.index)),this.layer.on("graphics-clear",a.hitch(this,this.index)),
this.layer.on("suspend",a.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",a.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",a.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(d){this._mapLevelChange=!(!d||!d.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var d=
this.map.geographicExtent;if(d){var h=this._getIntersectingCells(d);d=this._getClusters(h.cells,d);this.clusters=d.clusters;this._applyStatInfosToClusters();h=h.profile;d=d.profile;var t=h.total+d.total;h.total=this._getElapsedTime(h.total);d.total=this._getElapsedTime(d.total);var z=this._perfProfile.lastUpdate={};z.cells=h;z.clusters=d;z.total=this._getElapsedTime(t)}}else this.clusters=[],this._perfProfile.lastUpdate=null;h=this._indexUpdated;this._indexUpdated=!1;d=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:d,indexChange:h})}},_displayFeatures:function(d,h){var t=this.layer,z=!d;t.suspendGraphics(z);!1!==h&&(z?t.clearNodes():t.redraw())},_indexFeatures:function(){this._indexHandle=null;var d=this._getTime();this._initializeIndexing();var h=0,t=this._globalIndex.fullExtent;c.forEach(this.layer.graphics,function(y){if(y.visible){var C=y.geometry,F=this._getLngLat(C);if(F){var x=C.getCacheValue("_geohash");void 0===x&&(x=g.pointToGeohash(F),
C.setCacheValue("_geohash",x||null))}x&&(this._addGeohashToIndex(x,y,F),h++,this._updateExtent(t,F))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=h;for(var z=this._globalIndex.lodStats,v=1;v<=this._maxGeohashLength;v++)z[v]=this._getLODStats(v,h);this._perfProfile.lastIndex.total=this._getElapsedTime(d,this._getTime());this._perfProfile.lastIndex.numFeatures=h;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var d=this._cellIndex=[],h=1;h<=this._maxGeohashLength;h++)d[h]={}},_getLngLat:function(d){if(d){var h=d.getLongitude();d=d.getLatitude();d=null!=h&&null!=d?{x:h,y:d}:null}return d},_addGeohashToIndex:function(d,h,t){for(var z=this._cellIndex,v="",y=0;y<this._maxGeohashLength;y++){v+=d[y];var C=z[v.length],F=C[v];F||(F=C[v]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:v,statistics:null});this._updateItem(F,1,t,!0);F.features.push(h)}},_getLODStats:function(d,h){var t=this._cellIndex[d],z=0,v=Infinity,y=-Infinity,C=null,F;for(F in t){var x=t[F];z++;x.count<v&&(v=x.count);x.count>y&&(y=x.count)}0<z&&(C=Number((h/z).toFixed(2)));return{lod:d,count:z,min:Infinity===v?null:v,max:-Infinity===y?null:y,avg:C}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var d=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==d.lod;this.lod=d.lod;this.tolerance=d.tolerance}},_getClusterParams:function(d,h,t){h<t&&(h=t);d=Math.ceil(d*h);h=this._getClosestLODRange(d).max;do t=this._getCellSize(h),(t=d>=this._cellSizeScaleFactor*t||1===t)||(h+=1);while(!t);t=d/this._getCellSize(h);return{lod:h,tolerance:d,multiplier:Number(t.toFixed(2))}},_getClosestLODRange:function(d){for(var h,t=this._maxGeohashLength;1<=
t;t--)if(this._getCellSize(t)>=d){h=t;break}null==h&&(h=1);d=h+1;d>this._maxGeohashLength&&(d=this._maxGeohashLength);return{min:h,max:d}},_getCellSize:function(d){d=g.getCellSizeInMeters(d);return Math.ceil(Math.min(d.width,d.height))},_sorter:function(d,h){var t=d.centroid,z=h.centroid;return d.count>h.count?-1:d.count<h.count?1:t.x>z.x?-1:t.x<z.x?1:0},_getIntersectingCells:function(d){var h=this._getTime();this.bufferEnabled&&(d=d.expand(this._extentScaleFactor));var t=g.getIntersecting(d,this.lod,
this.bufferEnabled?this.tolerance:0);d=this._getTime();var z=[],v=this.tolerance,y=this.sortEnabled;c.forEach(t,function(C){(C=this.getCell(C))&&z.push(C)},this);v&&y&&z.sort(this._sorter);t=this._getTime();return{cells:z,profile:{findCells:this._getElapsedTime(h,d),scanAndSortCells:this._getElapsedTime(d,t),total:t-h}}},_getClusters:function(d,h){var t=this._getTime(),z=[],v={},y={findCells:0};c.forEach(d,function(F,x){var u=this._createCluster(F,v,y);u&&z.push(u)},this);this._markIntersecting(z,
h);this.filterEnabled&&(z=this._getIntersectingClusters(z));var C=this._getTime();return{clusters:z,profile:{findCellsInCluster:this._getElapsedTime(y.findCells),total:C-t}}},_markIntersecting:function(d,h){var t=h.normalize();c.forEach(d,function(z){var v=z.centroid.x,y=z.centroid.y;z.isIntersecting=c.some(t,function(C){return v>=C.xmin&&v<=C.xmax&&y>=C.ymin&&y<=C.ymax})})},_getIntersectingClusters:function(d){return c.filter(d,function(h){return h.isIntersecting})},_createCluster:function(d,h,t){if(!h[d.geohash]){var z=
[{cell:d,distance:0}];if(this.tolerance){var v=this._getTime(),y=g.getNeighborsWithinDistance(d.centroid,this.lod,this.tolerance);t.findCells+=this._getTime()-v;c.forEach(y,function(C){if(C!==d.geohash&&(C=this.getCell(C))){var F=this._calculateDistance(d.centroid,C.centroid);F<=this.tolerance&&z.push({cell:C,distance:F})}},this)}return this._mergeCells(z,h)}},_calculateDistance:function(d,h){return m.getLength(g.geographicToWebMercator(d),g.geographicToWebMercator(h))},_mergeCells:function(d,h){var t=
this._initializeCluster({},d[0].cell.geohash);c.forEach(d,function(z){var v=z.cell,y=v.geohash;z=z.distance;var C=h[y];if(C)if(z<C.distance)this._removeCellFromCluster(y,h);else return;h[y]={cluster:t,distance:z};this._updateItem(t,v.count,v.centroid);t.geohashes.push(y)},this);return t},_removeCellFromCluster:function(d,h){var t=h[d].cluster;delete h[d];var z=c.indexOf(t.geohashes,d);-1<z&&t.geohashes.splice(z,1);this._reevaluateCluster(t)},_reevaluateCluster:function(d){var h=d.geohashes;d=this._initializeCluster(d,
d.primary);c.forEach(h,function(t){var z=this.getCell(t);z&&(this._updateItem(d,z.count,z.centroid),d.geohashes.push(t))},this)},_initializeCluster:function(d,h){d.count=0;d.centroid=new r(null,null);d.geohashes=[];d.primary=h;d.statistics=null;return d},_applyStatInfos:function(d){d=this._getValidStatInfos(d);this._applyStatInfosToIndex(d);this._applyStatInfosToClusters(d)},_getValidStatInfos:function(d){var h=[];c.forEach(d,function(t){var z=t.attributeInfo;t=t.statisticType;var v="angle"===z.attributeType;
if(e.isSupportedStatisticType(t)&&(!v||"avg"===t)){var y="arithmetic"===z.rotationType;h.push({attributeCache:b.createAttributeCache(z,"type"===t),identifier:e.getStatisticId(z,t),statFunctions:e.getStatisticFunctions(t),isAngular:v,isDate:"date"===z.attributeType,isArithmetic:y})}});return h},_applyStatInfosToIndex:function(d){d=d||this._getValidStatInfos(this.statisticInfos);var h=this._cellIndex;if(h)for(var t=1;t<=this._maxGeohashLength;t++){var z=h[t],v;for(v in z)this._applyStatInfosToCell(z[v],
d)}},_applyStatInfosToCell:function(d,h){var t=this._initializeStats(d,h);c.forEach(d.features,function(z){this._calcFeatureStats(z,h,t)},this);this._summarizeStats(d,t,h)},_calcFeatureStats:function(d,h,t){d.attributes&&c.forEach(h,function(z){var v=t[z.identifier],y=z.attributeCache;y=y?d._getDataValue(y.attributeInfo,y,q):null;z.statFunctions.updateCellStat(v,y,z)})},_applyStatInfosToClusters:function(d){d=d||this._getValidStatInfos(this.statisticInfos);var h=this._clusterFieldPrefix;c.forEach(this.clusters,
function(t){var z=this._initializeStats(t,d);c.forEach(this.getCellsInCluster(t),function(v){this._calcCellStats(v,d,z)},this);this._summarizeStats(t,z,d,h);t.attributes[h+"id"]=t.primary},this)},_calcCellStats:function(d,h,t){var z=d.statistics;c.forEach(h,function(v){var y=v.identifier;v.statFunctions.updateClusterStat(t[y],z[y],v)})},_initializeStats:function(d,h){var t=d.statistics={};c.forEach(h,function(z){t[z.identifier]=z.statFunctions.initialize(z)});return t},_summarizeStats:function(d,
h,t,z){var v=d.attributes={};z=z||"";v[z+"count"]=d.count;c.forEach(t,function(y){var C=this._getStatFieldName(y,z);v[C]=y.statFunctions.summarize(h[y.identifier],y)},this)},_getStatFieldName:function(d,h){return(h||"")+d.identifier},_updateItem:function(d,h,t,z){var v=t.y,y=d.centroid,C=d.count;y.x=(C*y.x+h*t.x)/(C+h);y.y=(C*y.y+h*v)/(C+h);d.count+=h;z&&this._updateExtent(d.extent,t)},_updateExtent:function(d,h){var t=h.x,z=h.y;t<d.xmin&&(d.xmin=t);t>d.xmax&&(d.xmax=t);z<d.ymin&&(d.ymin=z);z>d.ymax&&
(d.ymax=z)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(d,h){var t=null!=d&&null!=h?h-d:d;if(null!=t){var z="millisecond";1E3<=t&&(t/=1E3,z="second",60<=t&&(t/=60,z="minute"));z={value:Number(t.toFixed(2)),unit:z}}return z}});a.setObject("layers.clustering.GeohashAggregation",D,k);return D})},"esri/core/timerUtils":function(){define([],function(){function D(n){var r,f=n.length;for(r=0;r<f;r++)n[r]()}var B={LOW:1,HIGH:2},a,c=
{};c[B.LOW]=[];c[B.HIGH]=[];var k=function(){clearTimeout(a);a=null;var n=c[B.HIGH];c[B.HIGH]=[];D(n);n=c[B.LOW];c[B.LOW]=[];D(n)};return{priority:B,callbackQueue:c,setTimeout:function(n,r){var f=[r,c[r].push(n)-1];a||(a=setTimeout(k,0));return f},clearTimeout:function(n){n&&c[n[0]].splice(n[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(D,B,a,c,k,n,r,f,m){function q(K){var I=K.spatialReference;if(!I)return{x:K.x,y:K.y};var J=I.isWebMercator(),L;4326===I.wkid?L={x:K.x,y:K.y}:J&&(L={x:K.getLongitude(),y:K.getLatitude()});return L}function l(K){var I=K.spatialReference,J=!(!I||!I.isWebMercator()),L;I&&4326===I.wkid?L=new r(K.toJson()):J&&(L=m.webMercatorToGeographic(K,!0));return L}function b(K,I){I.x=n.prototype._normalizeX(K.x,f.prototype._info[4326]);I.y=K.y;return I}function g(K){K=G.decimals[K].toString(2);return B.pad(K,
G.bitsPerBase32Char,"0")}function e(K,I){I=I.slice();I.splice(1,0,0);for(var J=I[0],L=I[2],M=0;M<K.length;M++){Number(K[M])?I[0]=I[1]:I[2]=I[1];var N=I[1]=(I[0]+I[2])/2;J=I[0];L=I[2]}return{value:N,min:J,max:L}}function d(K,I,J){var L=[];I=I.slice();I.splice(1,0,0);for(var M=I[0],N=I[2],O=0;O<J;O++)K>=I[1]?(I[0]=I[1],M=1):(I[2]=I[1],M=0),I[1]=(I[0]+I[2])/2,L.push(M),M=I[0],N=I[2];return{value:L.join(""),min:M,max:N}}function h(K){var I=K*G.bitsPerBase32Char;0===I%2?K=I/=2:(K=(I+1)/2,I-=K);return{lon:K,
lat:I}}function t(K){var I=0;K=K.split("").reverse().join("");for(var J=0;J<K.length;J++)I+=Number(K[J])*Math.pow(2,J);return G.base32[I]}function z(K,I){var J={x:K.xmin,y:K.ymax},L={x:K.xmax,y:K.ymin},M={x:K.xmax,y:K.ymax};return{sw:H.pointToGeohash({x:K.xmin,y:K.ymin},I),nw:H.pointToGeohash(J,I),se:H.pointToGeohash(L,I),ne:H.pointToGeohash(M,I)}}function v(K,I,J,L,M){var N=K;do M[N]||(M[N]=!0,L.push(N)),(K=N===I)||(N=E(N,J));while(!K)}function y(K,I,J,L){var M=z(K,I);K=[];v(M.sw,M.nw,"n",K,{});
I=[];v(M.se,M.ne,"n",I,{});for(M=0;M<K.length;M++)v(K[M],I[M],"e",J,L)}function C(K){return c.filter(K,function(I){return 180===I.xmax?!0:!1})[0]}function F(K){return c.filter(K,function(I){return-180===I.xmin?!0:!1})[0]}function x(K,I,J,L){var M=H.geographicToWebMercator(K);K={x:M.x-I,y:M.y-I};I=H.webMercatorToGeographic({x:M.x+I,y:M.y+I},!0);K=H.webMercatorToGeographic(K,!0);return new r(null!=J?J:K.x,K.y,null!=L?L:I.x,I.y)}function u(K,I,J,L){K=z(K,I);var M,N;"min"===L?N=180:"max"===L&&(M=-180);
var O=M;L=N;var Y=H.geohashToCell(K.sw).extent;I=H.geohashToCell(K.ne).extent;K=null!=O?O:Y.xmin;Y=Y.ymin;L=null!=L?L:I.xmax;I=I.ymax;K=x({x:K,y:Y},J,M,N);J=x({x:L,y:I},J,M,N);return new r(K.xmin,K.ymin,J.xmax,J.ymax)}function w(K,I,J){var L=K,M=0;do M++,(K=L===I)||(L=E(L,J));while(!K);return M}function A(K,I){var J=z(K,I),L=w(J.nw,J.ne,"e");return{rows:w(J.nw,J.sw,"s"),cols:L}}function E(K,I){var J=K.length%2,L=K.slice(-1),M=G.decimals[L],N=K.slice(0,-1);-1!=G.borders[I][J].indexOf(L)&&N&&(N=E(N,
I));return N+G.neighbors[I][J][M]}var G={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var K={},I=0;32>I;I++)K["0123456789bcdefghjkmnpqrstuvwxyz"[I]]=I;return K}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,
180],latitudeRange:[-90,90]};G.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";G.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";G.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";G.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";G.borders.n[0]="prxz";G.borders.s[0]="028b";G.borders.e[0]="bcfguvyz";G.borders.w[0]="0145hjnp";var H={geographicToWebMercator:function(K){K=n.lngLatToXY(K.x,K.y);return{x:K[0],y:K[1]}},webMercatorToGeographic:function(K,I){var J=n.xyToLngLat(K.x,K.y,I);return{x:J[0],
y:J[1]}},geohashToCell:function(K){var I;var J=[];for(I=0;I<K.length;I++)J.push(g(K[I]));J=J.join("");I=[];for(var L=[],M=0;M<J.length;M++)0===M%2?I.push(J[M]):L.push(J[M]);I=I.join("");L=L.join("");I=[I,L];J=e(I[0],G.longitudeRange);L=e(I[1],G.latitudeRange);I=J.value;return{point:{x:I,y:L.value},extent:{xmin:J.min,xmax:J.max,ymin:L.min,ymax:L.max},geohash:K}},pointToCell:function(K,I){I=I||G.maxGeohashLength;var J=q(K);if(J){J=b(J,J);var L=h(I);var M=d(J.x,G.longitudeRange,L.lon);var N=d(J.y,G.latitudeRange,
L.lat);L=M.value;var O=N.value;M={xmin:M.min,xmax:M.max,ymin:N.min,ymax:N.max};N=[];for(var Y=Math.ceil((L.length+O.length)/G.bitsPerBase32Char),ba=0,ha=0,U=0;U<Y*G.bitsPerBase32Char;U++){var X=0===U%2?L[ba++]:O[ha++];null==X&&(X=0);N.push(X)}L=N.join("");O=G.bitsPerBase32Char;N=L.length/O;Y=[];for(ba=0;ba<N;ba++)ha=L.substr(ba*O,O),Y.push(t(ha));L=Y.join("");return{point:J,extent:M,geohash:L}}},geohashToPoint:function(K){return H.geohashToCell(K).point},pointToGeohash:function(K,I){var J=H.pointToCell(K,
I);return J&&J.geohash},getCells:function(K){return c.map(K,function(I){return H.geohashToCell(I)})},getCellSize:function(K){var I=G.longitudeRange,J=G.latitudeRange;I=Math.abs(I[1]-I[0]);J=Math.abs(J[1]-J[0]);K=h(K||1);return{width:I/Math.pow(2,K.lon),height:J/Math.pow(2,K.lat)}},getCellSizeInMeters:function(K){K=H.getCellSize(K);var I=m.metersPerDegree;K.width*=I;K.height*=I;return K},getIntersecting:function(K,I,J){I=I||1;J=J||0;var L=[],M=l(K);if(M){J&&(M=H.expandExtent(K,I,J));K=M.normalize();
var N={};c.forEach(K,function(O){y(O,I,L,N)})}return L},countIntersecting:function(K,I,J){I=I||1;J=J||0;var L=0,M=l(K);if(M){J&&(M=H.expandExtent(K,I,J));K=M.normalize();if(2===K.length){L=C(K);M=F(K);J=A(L,I);var N=A(M,I);K=J.rows;J=J.cols+N.cols;L={x:L.xmin,y:L.ymax};M={x:M.xmax,y:M.ymax};L=b(L,{});M=b(M,{});L=H.pointToGeohash(L,I);I=H.pointToGeohash(M,I);L===I&&J--;I={rows:K,cols:J}}else I=A(K[0],I);L=I.cols*I.rows}return L},getChildren:function(K){K=K||"";var I=[],J;for(J in G.decimals)I.push(K+
J);return I},getNeighbors:function(K){var I=E(K,"n"),J=E(K,"s");return[I,E(I,"e"),E(I,"w"),J,E(J,"e"),E(J,"w"),E(K,"e"),E(K,"w")]},getExtentFromDistance:function(K,I){I=I||1E3;var J,L=q(K);L&&(J=x(L,I));return J},expandExtent:function(K,I,J){I=I||1;J=J||0;if(K=l(K)){if(J){K=K.normalize();if(2===K.length){var L=J;J=C(K);K=F(K);J=u(J,I,L,"min");K=u(K,I,L,"max");360<=J.getWidth()+K.getWidth()?(I=-180,K=180):(I=J.xmin,K=K.xmax);return new r(I,J.ymin,K,J.ymax)}return u(K[0],I,J)}return K}},getNeighborsWithinDistance:function(K,
I,J){J=J||1E3;I=I||1;var L=[];if(K=q(K)){J=x(K,J).normalize();var M={};c.forEach(J,function(N){y(N,I,L,M)})}return L}};a.setObject("layers.clustering.geohashUtils",H,k);return H})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(D,B){function a(n){return"number"===typeof n&&!isNaN(n)&&Infinity!==n&&-Infinity!==n}var c={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(n,r){a(r)&&(n.count++,n.sum+=r)},updateClusterStat:function(n,
r){r.count&&(n.count+=r.count,n.sum+=r.sum)},summarize:function(n){return n.sum}},avg:{initialize:function(n){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(n,r,f){a(r)&&(n.count++,f.isAngular?(f.isArithmetic||(r=-1*r+90),n.sum_cosine+=Math.cos(r*Math.PI/180),n.sum_sine+=Math.sin(r*Math.PI/180)):n.sum+=r)},updateClusterStat:function(n,r,f){r.count&&(n.count+=r.count,f.isAngular?(n.sum_cosine+=r.sum_cosine,n.sum_sine+=r.sum_sine):n.sum+=r.sum)},summarize:function(n,
r){if(0<n.count){var f=n.count;r.isAngular?(f=180*Math.atan2(n.sum_sine/f,n.sum_cosine/f)/Math.PI,r.isArithmetic||(f=-1*(f-90)),n.avg=0>f?f+360:f):(n.avg=n.sum/f,r.isDate&&(n.avg=Math.ceil(n.avg)))}return n.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(n,r){if(null==r||""===r||"string"===typeof r&&""===D.trim(r))r=null;var f=n.uvInfos;null==f[r]?f[r]={count:1,value:r}:f[r].count++},updateClusterStat:function(n,r){var f=n.uvInfos,m=r.uvInfos,q;for(q in m){var l=m[q];
null==f[q]?f[q]={count:l.count,value:l.value}:f[q].count+=l.count}},summarize:function(n){n=n.uvInfos;var r,f=-Infinity;for(r in n){var m=n[r];if(m.count>f){f=m.count;var q=m.value}else m.count===f&&(q=null)}return q}}},k={isSupportedStatisticType:function(n){return c.hasOwnProperty(n)},getStatisticFunctions:function(n){return c[n]},getStatisticId:function(n,r){var f=B.getAttributeIdSource(n);f=f&&B.getAttributeId(f)||n.field;return r+"_"+f},getClusterField:function(n,r){return"cluster_"+k.getStatisticId(n,
r)},getStatisticHash:function(n,r){var f=[k.getStatisticId(n,r)];n.attributeType&&f.push(n.attributeType.toLowerCase());n.rotationType&&f.push(n.rotationType.toLowerCase());return f.join("_")}};return k})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(D,B,a,c,k,n,r,f){D=D(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(m){if(m&&(B.mixin(this,m),m.renderer&&(this.renderer=r.fromJson(m.renderer)),m.labelingInfo&&0<m.labelingInfo.length)){this.labelingInfo=[];var q;a.forEach(m.labelingInfo,function(l){q=new f(l);
this.labelingInfo.push(q)},this)}},toJson:function(){var m={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(m.labelingInfo=[],a.forEach(this.labelingInfo,function(q){m.labelingInfo.push(q.toJson())}));return n.fixJson(m)}});B.setObject("layers.LayerDrawingOptions",D,k);return D})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t){return{units:D,SpatialReference:B,Geometry:a,Point:c,ScreenPoint:k,Multipoint:n,Polyline:r,Polygon:f,Extent:m,Rect:q,geodesicUtils:l,jsonUtils:b,mathUtils:g,normalizeUtils:e,scaleUtils:d,screenUtils:h,webMercatorUtils:t}})},"esri/units":function(){define(["dojo/has","./kernel"],function(D,B){var a={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",
FEET_US:"esriFeetUS",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",
SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",
RADIANS:"esriDURadians"};return B.Units=a})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,B,a,c,k,n,r,f,m){function q(b){return new f(parseFloat(b.x),parseFloat(b.y)-parseFloat(b.height),parseFloat(b.x)+parseFloat(b.width),parseFloat(b.y),b.spatialReference)}var l=D(n,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(b,g,e,d,h){k.isObject(b)&&
"extent"===b.type&&(g=b.ymax,e=b.getWidth(),d=b.getHeight(),h=b.spatialReference,b=b.xmin);k.isObject(b)?(k.mixin(this,b),this.spatialReference&&(this.spatialReference=m.createSpatialReference(this.spatialReference))):(this.x=b,this.y=g,this.width=e,this.height=d,this.spatialReference=h);this.verifySR()},getCenter:function(){return new r(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(b,g){return new l(this.x+b,this.y+g,this.width,this.height,this.spatialReference)},
intersects:function(b){return b.x+b.width<=this.x||b.y+b.height<=this.y||b.y>=this.y+this.height||b.x>=this.x+this.width?!1:!0},getExtent:function(){return q(this)},update:function(b,g,e,d,h){this.x=b;this.y=g;this.width=e;this.height=d;this.spatialReference=h;this.clearCache();return this}});B.setObject("geometry.Rect",l,c);c.geometry._rectToExtent=q;c.geometry._extentToRect=function(b){return new l(b)};return l})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(D,B,a,c,k,n,r,f){function m(z){return!!(z&&z.wkid&&t[z.wkid])}function q(z){return m(z)?t[z.wkid]:t[4326]}function l(z){var v=z.spatialReference,y=q(v),C=y.a;y=y.eSq;var F=Math.sqrt(y),x=Math.sin(z.y*h);return new n(C*z.x*h,0<y?C*(1-y)*(x/(1-y*x*x)-1/(2*F)*Math.log((1-F*x)/(1+F*x)))*.5:C*x,v)}function b(z,v,y,C,F){var x=q(F),u=x.a,w=x.b;x=x.f;var A=Math.sin(y);y=Math.cos(y);var E=(1-x)*Math.tan(z);z=1/Math.sqrt(1+E*E);var G=E*z,H=Math.atan2(E,y);E=z*A;var K=E*E,I=1-K;u=I*(u*u-w*w)/(w*w);
var J=1+u/16384*(4096+u*(-768+u*(320-175*u))),L=u/1024*(256+u*(-128+u*(74-47*u)));u=C/(w*J);for(var M=2*Math.PI,N,O,Y,ba;1E-12<Math.abs(u-M);)Y=Math.cos(2*H+u),N=Math.sin(u),O=Math.cos(u),ba=L*N*(Y+L/4*(O*(-1+2*Y*Y)-L/6*Y*(-3+4*N*N)*(-3+4*Y*Y))),M=u,u=C/(w*J)+ba;C=G*N-z*O*y;w=x/16*I*(4+x*(4-3*I));return new n((v+(Math.atan2(N*A,z*O-G*N*y)-(1-w)*x*E*(u+w*N*(Y+w*O*(-1+2*Y*Y)))))/h,Math.atan2(G*O+z*N*y,(1-x)*Math.sqrt(K+C*C))/h,F)}function g(z,v,y,C,F){var x=q(F),u=x.a;F=x.b;var w=x.f,A=C-v,E=Math.atan((1-
w)*Math.tan(z)),G=Math.atan((1-w)*Math.tan(y)),H=Math.sin(E);E=Math.cos(E);var K=Math.sin(G);G=Math.cos(G);var I=A,J=1E3;do{var L=Math.sin(I);var M=Math.cos(I);var N=Math.sqrt(G*L*G*L+(E*K-H*G*M)*(E*K-H*G*M));if(0===N)return 0;M=H*K+E*G*M;var O=Math.atan2(N,M);var Y=E*G*L/N;var ba=1-Y*Y;L=M-2*H*K/ba;isNaN(L)&&(L=0);var ha=w/16*ba*(4+w*(4-3*ba));var U=I;I=A+(1-ha)*w*Y*(O+ha*N*(L+ha*M*(-1+2*L*L)))}while(1E-12<Math.abs(I-U)&&0<--J);if(0===J)return F=C-v,{azimuth:Math.atan2(Math.sin(F)*Math.cos(y),Math.cos(z)*
Math.sin(y)-Math.sin(z)*Math.cos(y)*Math.cos(F)),geodesicDistance:Math.acos(Math.sin(z)*Math.sin(y)+Math.cos(z)*Math.cos(y)*Math.cos(C-v))*x.radius};z=ba*(u*u-F*F)/(F*F);v=z/1024*(256+z*(-128+z*(74-47*z)));return{azimuth:Math.atan2(G*Math.sin(I),E*K-H*G*Math.cos(I)),geodesicDistance:F*(1+z/16384*(4096+z*(-768+z*(320-175*z))))*(O-v*N*(L+v/4*(M*(-1+2*L*L)-v/6*L*(-3+4*N*N)*(-3+4*L*L)))),reverseAzimuth:Math.atan2(E*Math.sin(I),E*K*Math.cos(I)-H*G)}}function e(z,v){if(!(z instanceof r||z instanceof f))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var y=z.spatialReference,C=q(y).radius/1E4;v<C&&(v=C);C=z instanceof r;var F=[],x;D.forEach(C?z.paths:z.rings,function(u){F.push(x=[]);x.push([u[0][0],u[0][1]]);var w,A;var E=u[0][0]*h;var G=u[0][1]*h;for(w=0;w<u.length-1;w++){var H=u[w+1][0]*h;var K=u[w+1][1]*h;if(E!==H||G!==K){K=g(G,E,K,H,y);H=K.azimuth;K=K.geodesicDistance;var I=K/v;if(1<I){for(A=1;A<=I-1;A++){var J=b(G,E,H,A*v,y);x.push([J.x,J.y])}A=b(G,E,H,(K+Math.floor(I-1)*v)/2,y);x.push([A.x,A.y])}G=b(G,E,H,K,y);x.push([G.x,G.y]);E=G.x*h;
G=G.y*h}}});return C?new r({paths:F,spatialReference:y}):new f({rings:F,spatialReference:y})}var d={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},h=Math.PI/180,t={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};a={isSupported:m,getSpheroidInfo:q,geodesicDensify:e,geodesicLengths:function(z,v){var y=[];D.forEach(z,function(C,F){var x=0,u=C.spatialReference;D.forEach(C.paths,function(w,A){var E=0,G;for(G=1;G<w.length;G++){var H=w[G-1][0]*h;var K=w[G][0]*h;var I=w[G-1][1]*h;var J=w[G][1]*h;if(I!==J||H!==K)H=g(I,H,J,K,u),E+=H.geodesicDistance}x+=E});x/=d[v];y.push(x)});
return y},geodesicAreas:function(z,v){var y=[],C=[];D.forEach(z,function(F,x){var u=.0015696101447650193*q(F.spatialReference).radius;y.push(e(F,u))});D.forEach(y,function(F,x){var u=0,w=F.spatialReference;D.forEach(F.rings,function(A,E){var G=l(new n(A[0][0],A[0][1],w)),H=l(new n(A[A.length-1][0],A[A.length-1][1],w)),K=H.x*G.y-G.x*H.y,I;for(I=0;I<A.length-1;I++)G=l(new n(A[I+1][0],A[I+1][1],w)),H=l(new n(A[I][0],A[I][1],w)),K+=H.x*G.y-G.x*H.y;u+=K});u/=d[v];C.push(u/-2)});return C},_unitsDictionary:d,
_toEqualAreaPoint:l,_directGeodeticSolver:b,_inverseGeodeticSolver:g};B.mixin(B.getObject("geometry",!0,c),a);return a})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){return function(g,e,d,h){var t=
function(z,v){d(v);z.destroy();B.byId("hiddenMapDiv").removeChild(B.byId("hiddenMap"))};b(g,e,f.hitch(this,function(z){l(z,f.hitch(this,t,z),h)}),h)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I,J,L){function M(ja){return!(!ja||"BingMapsAerial"!==ja.layerType&&"BingMapsAerial"!==ja.type)}function N(ja){return!(!ja||"BingMapsRoad"!==ja.layerType&&"BingMapsRoad"!==ja.type)}function O(ja){return M(ja)||N(ja)||!(!ja||"BingMapsHybrid"!==ja.layerType&&"BingMapsHybrid"!==ja.type)}function Y(ja){return!(!ja||"OpenStreetMap"!==ja.layerType&&"OpenStreetMap"!==ja.type)}function ba(ja){return!!(ja&&ja.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(ja.layerType)||
!ja.layerType&&!ja.type))}function ha(ja){return t({url:Kb.arcgisUrl+"/"+ja.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function U(ja,Ua){var Ra={f:"json"};Ua&&(Ra.token=Ua);return t({url:ja,content:Ra,callbackParamName:"callback"},{disableIdentityLookup:!0})}function X(ja){!ja.layerDefinition||ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.labelingInfo||(ja.showLabels=!1);ja.itemProperties.layerDefinition&&(ja.layerDefinition?
(ja.layerDefinition.drawingInfo||(ja.layerDefinition.drawingInfo=ja.itemProperties.layerDefinition.drawingInfo),h.isDefined(ja.layerDefinition.definitionExpression)||(ja.layerDefinition.definitionExpression=ja.itemProperties.layerDefinition.definitionExpression),h.isDefined(ja.layerDefinition.minScale)||(ja.layerDefinition.minScale=ja.itemProperties.layerDefinition.minScale),h.isDefined(ja.layerDefinition.maxScale)||(ja.layerDefinition.maxScale=ja.itemProperties.layerDefinition.maxScale)):ja.layerDefinition=
ja.itemProperties.layerDefinition);!ja.itemProperties.popupInfo||ja.popupInfo||ja.disablePopup||(ja.popupInfo=ja.itemProperties.popupInfo);h.isDefined(ja.itemProperties.showLabels)&&!h.isDefined(ja.showLabels)&&(ja.showLabels=ja.itemProperties.showLabels);h.isDefined(ja.itemProperties.showLegend)&&!h.isDefined(ja.showLegend)&&(ja.showLegend=ja.itemProperties.showLegend);h.isDefined(ja.itemProperties.refreshInterval)&&!h.isDefined(ja.refreshInterval)&&(ja.refreshInterval=ja.itemProperties.refreshInterval)}
function Z(ja){X(ja);ja.itemProperties.layerDefinition&&ja.layerDefinition&&(!h.isDefined(ja.layerDefinition.maximumTrackPoints)&&h.isDefined(ja.itemProperties.layerDefinition.maximumTrackPoints)&&(ja.layerDefinition.maximumTrackPoints=ja.itemProperties.layerDefinition.maximumTrackPoints),!ja.layerDefinition.definitionGeometry&&ja.itemProperties.layerDefinition.definitionGeometry&&(ja.layerDefinition.definitionGeometry=ja.itemProperties.layerDefinition.definitionGeometry));ja.itemProperties.purgeOptions&&
!ja.purgeOptions&&(ja.purgeOptions=ja.itemProperties.purgeOptions)}function P(ja,Ua){var Ra=new k,Ka=ja.itemData,Oa=[],Wa=[];a.forEach(Ka.operationalLayers,function(Qa){if(Qa.itemId&&ba(Qa)){var $a=Qa.url.toLowerCase();-1<$a.indexOf("/featureserver")||-1<$a.indexOf("/mapserver/")?(Wa.push(Qa),Oa.push(ha(Qa))):-1<$a.indexOf("/mapserver")&&-1===$a.indexOf("/mapserver/")&&(!Qa.layers||!h.isDefined(Qa.minScale)&&!h.isDefined(Qa.maxScale))?(Wa.push(Qa),Oa.push(ha(Qa))):-1<$a.indexOf("/imageserver")?(Wa.push(Qa),
Oa.push(ha(Qa))):-1<$a.indexOf("/streamserver")&&(Wa.push(Qa),Oa.push(ha(Qa)))}});Ka.baseMap&&Ka.baseMap.baseMapLayers&&a.forEach(Ka.baseMap.baseMapLayers,function(Qa){Qa.itemId&&"VectorTileLayer"!==Qa.layerType&&(Wa.push(Qa),Oa.push(ha(Qa)))});if(0<Oa.length){var Va={};(new m(Oa)).addCallback(function(Qa){a.forEach(Wa,function($a,bb){var cb=Qa[bb][1];if(cb&&!(cb instanceof Error)&&(Va[$a.itemId]=cb,ba($a))){var kb=$a.url.toLowerCase();(-1<kb.indexOf("/featureserver")||-1<kb.indexOf("/mapserver/"))&&
cb.layers?a.forEach(cb.layers,function(ab){var lb="/featureserver/"+ab.id;(lb=kb.match(lb+"$")==lb)||(lb="/mapserver/"+ab.id,lb=kb.match(lb+"$")==lb);lb&&($a.itemProperties=ab,X($a))}):-1<kb.indexOf("/streamserver")?($a.itemProperties=cb,Z($a)):-1<kb.indexOf("/mapserver")?(cb.layers&&!$a.layers&&($a.layers=cb.layers),h.isDefined(cb.minScale)&&!h.isDefined($a.minScale)&&($a.minScale=cb.minScale),h.isDefined(cb.maxScale)&&!h.isDefined($a.maxScale)&&($a.maxScale=cb.maxScale),h.isDefined(cb.refreshInterval)&&
!h.isDefined($a.refreshInterval)&&($a.refreshInterval=cb.refreshInterval),cb.visibleLayers&&!$a.visibleLayers&&($a.visibleLayers=cb.visibleLayers)):-1<kb.indexOf("/imageserver")&&(h.isDefined(cb.minScale)&&!h.isDefined($a.minScale)&&($a.minScale=cb.minScale),h.isDefined(cb.maxScale)&&!h.isDefined($a.maxScale)&&($a.maxScale=cb.maxScale),h.isDefined(cb.refreshInterval)&&!h.isDefined($a.refreshInterval)&&($a.refreshInterval=cb.refreshInterval),!cb.popupInfo||$a.popupInfo||$a.disablePopup||($a.popupInfo=
cb.popupInfo),cb.renderingRule&&!$a.renderingRule&&($a.renderingRule=cb.renderingRule,cb.renderingRule.functionName&&($a.renderingRule.rasterFunction=cb.renderingRule.functionName)),cb.bandIds&&!$a.bandIds&&($a.bandIds=cb.bandIds),cb.mosaicRule&&!$a.mosaicRule&&($a.mosaicRule=cb.mosaicRule),cb.format&&!$a.format&&($a.format=cb.format),h.isDefined(cb.compressionQuality)&&!h.isDefined($a.compressionQuality)&&($a.compressionQuality=cb.compressionQuality),!cb.layerDefinition||!cb.layerDefinition.definitionExpression||
h.isDefined($a.layerDefinition)&&h.isDefined($a.layerDefinition.definitionExpression)||($a.layerDefinition=$a.layerDefinition||{},$a.layerDefinition.definitionExpression=cb.layerDefinition.definitionExpression),cb=B.getObject("layerDefinition.drawingInfo.renderer",!1,cb),null==B.getObject("layerDefinition.drawingInfo.renderer",!1,$a)&&null!=cb&&($a.layerDefinition=$a.layerDefinition||{},$a.layerDefinition.drawingInfo=$a.layerDefinition.drawingInfo||{},$a.layerDefinition.drawingInfo.renderer=cb))}});
ja.relatedItemsData=Va;Ra.callback(ja)})}else Ra.callback(ja);return Ra}function da(ja,Ua){var Ra=new k,Ka=ja.itemData,Oa=Ka.baseMap.baseMapLayers[0];if(O(Oa))if(Oa.portalUrl&&g.id)delete Ua.bingMapsKey,g.id.checkSignInStatus(y.urlToObject(Kb.arcgisUrl).path).then(B.hitch(null,function(Va,Qa,$a,bb,cb){U(Oa.portalUrl,cb.token).then(B.hitch(null,xa,Va,Qa,$a,bb),B.hitch(null,Ca,Va,Qa,$a,bb))},ja,Ua,Ka,Ra),B.hitch(null,function(Va,Qa,$a,bb,cb){U(Oa.portalUrl).then(B.hitch(null,xa,Va,Qa,$a,bb),B.hitch(null,
Ca,Va,Qa,$a,bb))},ja,Ua,Ka,Ra));else if(Ua.bingMapsKey){var Wa=new dc({bingMapsKey:Ua.bingMapsKey,mapStyle:dc.MAP_STYLE_AERIAL});c.connect(Wa,"onLoad",B.hitch(this,function(){Ra.callback([ja,Ua])}));c.connect(Wa,"onError",function(Va){delete Ua.bingMapsKey;ja.itemData=Fa(Ka);Oa=ja.itemData.baseMap.baseMapLayers[0];Oa.errors=[];Oa.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ra.callback([ja,Ua])})}else ja.itemData=
Fa(Ka),Oa=ja.itemData.baseMap.baseMapLayers[0],Oa.errors=[],Oa.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Ra.callback([ja,Ua]);else Ra.callback([ja,Ua]);return Ra}function ia(ja){var Ua=new k;ja=ja.itemData;var Ra=ja.baseMap&&ja.baseMap.baseMapLayers;if(kc&&!kc.supported())for(ja=0;ja<Ra.length;ja++){var Ka=Ra[ja];if(!Ka.isReference){if("VectorTileLayer"===Ka.layerType){var Oa=Ka.itemId;var Wa=ja}break}}Oa?
Ub(Oa,!1).addBoth(function(Va){var Qa=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Va&&Va.item&&Qa.test(Va.item.url)&&(Ra[Wa]={id:"FB_"+Ka.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ka?Ka.opacity:1,visibility:"visibility"in Ka?Ka.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ua.resolve()}):Ua.resolve();return Ua}function xa(ja,Ua,Ra,Ka,Oa){Oa.bingKey?(Ua.bingMapsKey=
Oa.bingKey,Oa=new dc({bingMapsKey:Ua.bingMapsKey,mapStyle:dc.MAP_STYLE_AERIAL}),c.connect(Oa,"onLoad",B.hitch(this,function(){Ka.callback([ja,Ua])})),c.connect(Oa,"onError",function(Wa){delete Ua.bingMapsKey;ja.itemData=Fa(Ra);Wa=ja.itemData.baseMap.baseMapLayers[0];Wa.errors=[];Wa.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([ja,Ua])})):Ca(ja,Ua,Ra,Ka)}function Ca(ja,Ua,Ra,Ka){delete Ua.bingMapsKey;
ja.itemData=Fa(Ra);Ra=ja.itemData.baseMap.baseMapLayers[0];Ra.errors=[];Ra.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([ja,Ua])}function Fa(ja){M(ja.baseMap.baseMapLayers[0])?ja.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:N(ja.baseMap.baseMapLayers[0])?ja.baseMap={title:"Streets",
baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:ja.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return ja}function Ma(ja,Ua,Ra,Ka){var Oa=ja.dynamicLayerInfos||ja.layerInfos,Wa=Ua.layers;if(Wa&&Oa)if(Ka.usePopupManager){var Va;a.forEach(Oa,function(lb){var mb=lb.id;if(!lb.subLayerIds)for(lb=0;lb<Wa.length;lb++){var pb=Wa[lb];if(pb.id===mb&&pb.popupInfo&&!pb.disablePopup){Va||(Va={});Va[mb]={infoTemplate:new Ra(pb.popupInfo),layerUrl:pb.layerUrl};break}}});Va&&ja.setInfoTemplates(Va)}else{var Qa=[],$a=[],bb=[],cb=[],kb=[],ab=[];a.forEach(Oa,function(lb){var mb=lb.id;if(!lb.subLayerIds&&-1!==
a.indexOf(ja.visibleLayers,mb))for(lb=0;lb<Wa.length;lb++){var pb=Wa[lb];if(pb.id===mb){$a.push(mb);Qa.push(pb.popupInfo);bb.push(pb.layerUrl||"");pb.layerDefinition&&pb.layerDefinition.definitionExpression?cb.push(pb.layerDefinition.definitionExpression):cb.push("");kb.push(h.isDefined(pb.minScale)?pb.minScale:null);ab.push(h.isDefined(pb.maxScale)?pb.maxScale:null);break}}});Qa.length&&(ja.__popups=Qa,ja.__popupIds=$a,ja.__popupUrls=bb,ja.__popupWhereClauses=cb,ja.__popupMinScales=kb,ja.__popupMaxScales=
ab,ja.__resourceInfo=Ua.resourceInfo)}}function Sa(ja){if(!ja)return!1;var Ua=(new r(Kb.arcgisUrl)).authority;return-1!==ja.indexOf(".arcgis.com/")||-1!==ja.indexOf(Ua)}function Ba(ja){return ja?-1!==ja.indexOf("/services.arcgisonline.com/")||-1!==ja.indexOf("/server.arcgisonline.com/"):!1}function ca(ja){"https:"===location.protocol&&(Sa(ja)||Ba(ja))&&(ja=ja.replace("http:","https:"));return ja}function ua(ja,Ua,Ra){var Ka=[];ja.displayLevels||(Ka=a.map(ja.resourceInfo.tileInfo.lods,function(Va){return Va.level}));
if(ja.exclusionAreas){var Oa=B.clone(ja.exclusionAreas);Oa=a.map(Oa,function(Va){Va.geometry=new x(Va.geometry);return Va})}var Wa=ja.resourceInfo&&"Raster"===ja.resourceInfo.cacheType;Wa?(Ka=ja.layerDefinition&&ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.renderer,Ka=new Qc(ca(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval,multidimensionalDefinition:ja.multidimensionalDefinition,
bandIds:ja.bandIds,renderer:Ka||null})):Ka=new I(ca(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,displayLevels:ja.displayLevels||Ka,id:ja.id,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval,exclusionAreas:Oa});Ra.ignorePopups||(Wa&&ja.popupInfo&&!ja.disablePopup?Ka.setInfoTemplate(new Ua(ja.popupInfo)):Ma(Ka,ja,Ua,Ra));return Ka}function ya(ja,Ua){if(!ja||!Ua||0===Ua.length)return[];var Ra=","+Ua+",",Ka=[],Oa,Wa=",";for(Oa=0;Oa<ja.length;Oa++)if(null!==
ja[Oa].subLayerIds){if(-1===Ra.indexOf(","+ja[Oa].id+",")||-1<Wa.indexOf(","+ja[Oa].id+","))Wa+=ja[Oa].subLayerIds.toString()+","}else-1<Ra.indexOf(","+ja[Oa].id+",")&&-1===Wa.indexOf(","+ja[Oa].id+",")&&Ka.push(ja[Oa].id);return Ka}function ta(ja,Ua,Ra){var Ka=new ic;Ka.format="png24";ja.resourceInfo&&ja.resourceInfo.supportedImageFormatTypes&&-1<ja.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ka.format="png32");Ka=new Zb(ca(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,
id:ja.id,imageParameters:Ka,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval});var Oa=ja.visibleLayers;if(!ja.visibleLayers){var Wa="";a.forEach(Ka.layerInfos,function(ab){ab.defaultVisibility&&(Wa+=(0<Wa.length?",":"")+ab.id)});Oa=Wa}if(ja.layers&&0<ja.layers.length){var Va=[],Qa=[],$a,bb=[],cb,kb;a.forEach(ja.layers,function(ab){var lb=ab.layerDefinition;lb&&lb.definitionExpression&&(Va[ab.id]=lb.definitionExpression);if(lb&&lb.source){$a=null;kb=lb.source;if("mapLayer"===
kb.type){var mb=a.filter(ja.resourceInfo.layers,function(pb){return pb.id===kb.mapLayerId});mb.length&&($a=B.mixin(mb[0],ab))}else $a=B.mixin({},ab);$a&&($a.source=kb,delete $a.popupInfo,$a=new Ib($a),ja.visibleLayers&&(mb="string"==typeof ja.visibleLayers?ja.visibleLayers.split(","):ja.visibleLayers,-1<a.indexOf(mb,ab.id)?$a.defaultVisibility=!0:$a.defaultVisibility=!1),Qa.push($a))}lb&&null!=lb.transparency&&(mb=lb.drawingInfo||{},null==mb.transparency&&(mb.transparency=lb.transparency,lb.drawingInfo=
mb));lb&&lb.source&&lb.drawingInfo&&(cb=new pc(lb.drawingInfo),bb[ab.id]=cb)},this);0<Va.length&&Ka.setLayerDefinitions(Va);0<Qa.length?(Ka.setDynamicLayerInfos(Qa,!0),0<bb.length&&Ka.setLayerDrawingOptions(bb,!0)):(Oa=ya(Ka.layerInfos,Oa),Ka.setVisibleLayers(Oa))}else Oa=ya(Ka.layerInfos,Oa),Ka.setVisibleLayers(Oa);Ra.ignorePopups||Ma(Ka,ja,Ua,Ra);return Ka}function pa(ja,Ua,Ra){var Ka=new Xb;Ka.bandIds=ja.bandIds;null!=ja.format&&(Ka.format=ja.format,null!=ja.compressionQuality&&(Ka.compressionQuality=
ja.compressionQuality));if(ja.renderingRule&&ja.renderingRule.rasterFunction){var Oa=new Jc(ja.renderingRule);Ka.renderingRule=Oa}ja.mosaicRule&&(Oa=new wc(ja.mosaicRule),Ka.mosaicRule=Oa);h.isDefined(ja.noData)&&(Ka.noData=ja.noData);h.isDefined(ja.noDataInterpretation)&&(Ka.noDataInterpretation=ja.noDataInterpretation);h.isDefined(ja.interpolation)&&(Ka.interpolation=ja.interpolation);Oa=ja.layerType?"ArcGISImageServiceVectorLayer"===ja.layerType:!1;h.isDefined(ja.layerType)||(Oa=ja.resourceInfo.hasMultidimensions&&
("esriImageServiceDataTypeVector-UV"===ja.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===ja.resourceInfo.serviceDataType));Ka={resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,imageServiceParameters:Ka,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval};Ka=Oa?new yb(ca(ja.url),Ka):new Nb(ca(ja.url),Ka);ja.layerDefinition&&(ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.renderer&&(Oa=A.fromJson(ja.layerDefinition.drawingInfo.renderer),
Ka.setRenderer(Oa)),ja.layerDefinition.definitionExpression&&Ka.setDefinitionExpression(ja.layerDefinition.definitionExpression,!0));Ra.ignorePopups||!ja.popupInfo||ja.disablePopup||Ka.setInfoTemplate(new Ua(ja.popupInfo));return Ka}function Aa(ja,Ua,Ra){var Ka=[102113,102100,3857],Oa=Ra||new z(Ua[0].layerObject.fullExtent.spatialReference),Wa=new z(ja.resourceInfo.fullExtent.spatialReference);return Oa.wkt==Wa.wkt&&(Oa.wkid==Wa.wkid||h.isDefined(Oa.latestWkid)&&Oa.latestWkid==Wa.wkid||h.isDefined(Wa.latestWkid)&&
Oa.wkid==Wa.latestWkid||h.isDefined(Oa.latestWkid)&&Oa.latestWkid==Wa.latestWkid)||Oa.wkid&&Wa.wkid&&a.some(Ka,function(Va){return Va===Wa.wkid})&&a.some(Ka,function(Va){return Va===Oa.wkid})?!0:!1}function T(ja,Ua,Ra){if(!Ua[0].layerObject.tileInfo)return!1;ja=ja.resourceInfo.tileInfo;Ua=Ua[0].layerObject.tileInfo;Ra=Ra.width>Ra.height?Ra.width:Ra.height;for(var Ka=!1,Oa=!1,Wa=0;Wa<ja.lods.length;Wa++){for(var Va=ja.lods[Wa].scale/ja.dpi,Qa=0;Qa<Ua.lods.length;Qa++){var $a=Ua.lods[Qa].scale/Ua.dpi;
if(Math.abs($a-Va)/$a<1/Ra)if(Ka){Oa=!0;break}else Ka=!0}if(Oa)break}return Oa||Ka&&(1===ja.lods.length||1===Ua.lods.length)?!0:!1}function ea(ja,Ua,Ra,Ka,Oa,Wa){var Va=Ra._clazz;if(Y(ja))var Qa=new xc({id:ja.id,opacity:ja.opacity,visible:null!==ja.visibility&&void 0!==ja.visibility?ja.visibility:!0});else if(ja&&("WFS"===ja.layerType||"WFS"===ja.type)){var $a={customParameters:ja.wfsInfo.customParameters,geometryType:ja.layerDefinition.geometryType,id:ja.id,labelingInfo:ja.layerDefinition.drawingInfo.labelingInfo,
maxFeatures:ja.wfsInfo.maxFeatures,mode:ja.mode,name:ja.wfsInfo.name,showLabels:!0,swapXY:ja.wfsInfo.swapXY,title:ja.title,url:ja.url,version:ja.wfsInfo.version,visible:ja.visibility,wkid:ja.layerDefinition.spatialReference.wkid};Qa=new ec;Qa.fromJson($a,function(){h.isDefined(ja.opacity)&&Qa.setOpacity(ja.opacity);h.isDefined(ja.visibility)&&Qa.setVisibility(ja.visibility);(ja.minScale||ja.maxScale)&&Qa.setScaleRange(ja.minScale,ja.maxScale);Qa.renderer=A.fromJson(ja.layerDefinition.drawingInfo.renderer,
{geometryType:$a.geometryType});!Ra.ignorePopups&&ja.popupInfo&&Qa.setInfoTemplate(new Va(ja.popupInfo));Qa.emit("fromJsonComplete")})}else if(ja&&("WMS"===ja.layerType||"WMS"===ja.type)){var bb=[],cb=[];a.forEach(ja.layers,function(mb){cb.push(new Sc({name:mb.name,title:mb.title,legendURL:mb.legendURL||mb.legendUrl,queryable:mb.queryable,showPopup:mb.showPopup}));bb.push(mb.name)},this);ja.visibleLayers&&(bb=ja.visibleLayers);Ka=new x(ja.extent[0][0],ja.extent[0][1],ja.extent[1][0],ja.extent[1][1],
new z({wkid:4326}));Ka={customLayerParameters:ja.customLayerParameters,customParameters:ja.customParameters,extent:Ka,layerInfos:cb,version:ja.version,maxWidth:ja.maxWidth,maxHeight:ja.maxHeight,featureInfoFormat:ja.featureInfoFormat,getFeatureInfoURL:ja.featureInfoUrl,getMapURL:ja.mapUrl,spatialReferences:ja.spatialReferences,title:ja.title,copyright:ja.copyright,minScale:ja.minScale||0,maxScale:ja.maxScale||0,format:ja.format};Qa=new Yb(ja.url,{id:ja.id,visibleLayers:bb,format:"png",transparent:ja.firstLayer?
!1:!0,opacity:ja.opacity,visible:null!==ja.visibility?ja.visibility:!0,resourceInfo:Ka,refreshInterval:ja.refreshInterval});Qa.spatialReference.wkid=Ka.spatialReferences[0]}else if(ja&&("KML"===ja.layerType||"KML"===ja.type)){var kb=ja.url;if(g.id){var ab=g.id.findCredential(y.urlToObject(Kb.arcgisUrl).path);ab&&(Ua=Kb.arcgisUrl.substring(Kb.arcgisUrl.indexOf("//")+2,Kb.arcgisUrl.indexOf("/",Kb.arcgisUrl.indexOf("//")+3)),Oa=Ua.split("."),Oa=Oa[Oa.length-2]+"."+Oa[Oa.length-1],Wa=kb.indexOf(Oa),-1<
Wa&&(kb="https://"+Ua+kb.substring(Wa+Oa.length),kb+="?token\x3d"+ab.token))}Qa=new vc(kb,{id:ja.id,visible:null!==ja.visibility?ja.visibility:!0,outSR:Ka,refreshInterval:ja.refreshInterval});c.connect(Qa,"onLoad",function(){(ja.opacity||0===ja.opacity)&&Qa.setOpacity(ja.opacity);h.isDefined(ja.minScale)&&h.isDefined(ja.maxScale)&&Qa.setScaleRange(ja.minScale,ja.maxScale);ja.visibleFolders&&a.forEach(Qa.folders,function(mb){-1<a.indexOf(ja.visibleFolders,mb.id)?Qa.setFolderVisibility(mb,!0):Qa.setFolderVisibility(mb,
!1)},this)})}else if(!ja||"WebTiledLayer"!==ja.layerType&&"WebTiledLayer"!==ja.type)if(!ja||"GeoRSS"!==ja.layerType&&"GeoRSS"!==ja.type)if(ja&&("CSV"===ja.layerType||"CSV"===ja.type)&&ja.url)Ka={layerDefinition:ja.layerDefinition,columnDelimiter:ja.columnDelimiter,id:ja.id?ja.id:null,visible:null!==ja.visibility?ja.visibility:!0,opacity:ja.opacity,refreshInterval:ja.refreshInterval},ja.locationInfo&&(Ka.latitudeFieldName=ja.locationInfo.latitudeFieldName,Ka.longitudeFieldName=ja.locationInfo.longitudeFieldName),
!Ra.ignorePopups&&ja.popupInfo&&(Ka.infoTemplate=new Va(ja.popupInfo)),Qa=new uc(ja.url,Ka);else if("VectorTileLayer"!==ja.layerType||!ja.styleUrl||ja.resourceInfo&&ja.resourceInfo instanceof Error)if(ja.layerDefinition&&!ja.url)Ka=n.fromJson(n.toJson(ja)),delete Ka.id,delete Ka.opacity,delete Ka.visibility,Qa=new J(Ka,{id:ja.id,opacity:ja.opacity,visible:ja.visibility,outFields:["*"],autoGeneralize:!0}),Ra.ignorePopups||!Ka.popupInfo||Ka.disablePopup||Qa.setInfoTemplate(new Va(Ka.popupInfo)),Ja(Qa);
else if(O(ja))Ra.bingMapsKey?(Ka=dc.MAP_STYLE_AERIAL_WITH_LABELS,M(ja)?Ka=dc.MAP_STYLE_AERIAL:N(ja)&&(Ka=dc.MAP_STYLE_ROAD),Qa=new dc({bingMapsKey:Ra.bingMapsKey,mapStyle:Ka,opacity:ja.opacity,id:ja.id}),c.connect(Qa,"onError",B.hitch(this,function(mb){mb.errors=mb.errors||[];mb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(mb?mb.layerType||mb.type:"")+"]"})},ja))):(ja.errors=ja.errors||[],ja.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(ja?ja.layerType||ja.type:"")+"]"}));else if(ja.resourceInfo&&(ja.resourceInfo.mapName||""===ja.resourceInfo.mapName))Qa=!0===ja.resourceInfo.singleFusedMapCache&&(ja.baseMapLayer||Aa(ja,Ua,Ka)&&T(ja,Oa,Wa))?ua(ja,Va,Ra):ta(ja,Va,Ra);else if(ja.resourceInfo&&ja.resourceInfo.pixelSizeX)Qa=!0===ja.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==ja.layerType&&(ja.baseMapLayer||"Raster"===ja.resourceInfo.cacheType||Aa(ja,Ua,Ka)&&T(ja,Oa,Wa))?ua(ja,Va,Ra):pa(ja,Va,Ra);else if(ja.resourceInfo&&
"Feature Layer"===ja.resourceInfo.type){ja.capabilities&&(ja.resourceInfo.capabilities=ja.capabilities);var lb;!1===Ra.editable?lb=!1:Ra.privileges&&-1===a.indexOf(Ra.privileges,"features:user:edit")&&g.id&&g.id.findCredential(ja.url)&&(lb=!1);Qa=new J(ca(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,mode:ja.mode===J.MODE_SELECTION?J.MODE_SELECTION:J.MODE_AUTO,editable:lb,outFields:["*"],autoGeneralize:!0,refreshInterval:ja.refreshInterval});Ra.ignorePopups||
!ja.popupInfo||ja.disablePopup||Qa.setInfoTemplate(new Va(ja.popupInfo));ja.layerDefinition&&(ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.renderer&&(Ka=A.fromJson(ja.layerDefinition.drawingInfo.renderer,{geometryType:Qa.geometryType}),Ka.isMaxInclusive=!0,Qa.setRenderer(Ka)),ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.labelingInfo&&(Ka=a.map(ja.layerDefinition.drawingInfo.labelingInfo,function(mb){return new jc(mb)}),Qa.setLabelingInfo(Ka)),ja.layerDefinition.definitionExpression&&
Qa.setDefinitionExpression(ja.layerDefinition.definitionExpression),h.isDefined(ja.layerDefinition.minScale)&&Qa.setMinScale(ja.layerDefinition.minScale),h.isDefined(ja.layerDefinition.maxScale)&&Qa.setMaxScale(ja.layerDefinition.maxScale));Ja(Qa)}else ja.resourceInfo&&ja.resourceInfo.streamUrls&&(Ka={resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id},ja.layerDefinition&&(kb=ja.layerDefinition.drawingInfo,ja.layerDefinition.definitionGeometry&&(ab=ab||{},ab.geometry=ja.layerDefinition.definitionGeometry),
h.isDefined(ja.layerDefinition.definitionExpression)&&(ab=ab||{},ab.where=ja.layerDefinition.definitionExpression),h.isDefined(ja.layerDefinition.maximumTrackPoints)&&(Ka.maximumTrackPoints=ja.layerDefinition.maximumTrackPoints)),ab&&(Ka.filter=ab),ja.purgeOptions&&(Ka.purgeOptions=ja.purgeOptions),Qa=new Kc(ca(ja.url),Ka),kb&&kb.renderer&&(Ka=kb.renderer,Qa.setRenderer(A.fromJson(Ka,{geometryType:ja.resourceInfo.geometryType}))),kb&&kb.labelingInfo&&(Ka=a.map(kb.labelingInfo,function(mb){return new jc(mb)}),
Qa.setLabelingInfo(Ka)),Ra.ignorePopups||!ja.popupInfo||ja.disablePopup||Qa.setInfoTemplate(new Va(ja.popupInfo)),ja.layerDefinition&&(h.isDefined(ja.layerDefinition.minScale)&&Qa.setMinScale(ja.layerDefinition.minScale),h.isDefined(ja.layerDefinition.maxScale)&&Qa.setMaxScale(ja.layerDefinition.maxScale)),f.once(Qa,"error",function(mb){ja.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Qa=new kc(ja.styleUrl,{id:ja.id,minScale:ja.minScale,maxScale:ja.maxScale,opacity:ja.opacity,
visible:ja.visibility,resourceInfo:ja.resourceInfo});else Qa=new bc(ja.url,{id:ja.id,opacity:ja.opacity,outSpatialReference:Ka,refreshInterval:ja.refreshInterval}),c.connect(Qa,"onLoad",function(){!1===ja.visibility&&Qa.hide();h.isDefined(ja.minScale)&&h.isDefined(ja.maxScale)&&Qa.setScaleRange(ja.minScale,ja.maxScale);var mb=Qa.getFeatureLayers();a.forEach(mb,function(pb){ja.pointSymbol&&"esriGeometryPoint"===pb.geometryType?(pb.renderer.symbol=w.fromJson(ja.pointSymbol),1===mb.length&&(Qa.pointSymbol=
w.fromJson(ja.pointSymbol))):ja.lineSymbol&&"esriGeometryPolyline"===pb.geometryType?(pb.renderer.symbol=w.fromJson(ja.lineSymbol),1===mb.length&&(Qa.polylineSymbol=w.fromJson(ja.lineSymbol))):ja.polygonSymbol&&"esriGeometryPolygon"===pb.geometryType&&(pb.renderer.symbol=w.fromJson(ja.polygonSymbol),1===mb.length&&(Qa.polygonSymbol=w.fromJson(ja.polygonSymbol)))})});else if(Qa=new Rc(ja.templateUrl,{id:ja.id,visible:null!==ja.visibility?ja.visibility:!0,opacity:ja.opacity,copyright:ja.copyright,fullExtent:ja.fullExtent&&
new x(ja.fullExtent),initialExtent:ja.fullExtent&&new x(ja.fullExtent),subDomains:ja.subDomains,tileInfo:ja.tileInfo?new yc(ja.tileInfo):null,refreshInterval:ja.refreshInterval,wmtsInfo:ja.wmtsInfo}),h.isDefined(ja.minScale)||h.isDefined(ja.maxScale))Qa.loaded?Qa.setScaleRange(ja.minScale,ja.maxScale):c.connect(Qa,"onLoad",function(){Qa.setScaleRange(ja.minScale,ja.maxScale)});Qa&&(Qa.arcgisProps={title:ja.title},ja.baseMapLayer&&(ja.isReference?(Qa.attr("data-reference",!0),Qa._basemapGalleryLayerType=
"reference"):Qa._basemapGalleryLayerType="basemap"),Qa instanceof J&&ja.layerDefinition&&ja.layerDefinition.featureReduction&&"cluster"===ja.layerDefinition.featureReduction.type&&(Ka=ja.layerDefinition.featureReduction,Ka.clusterSize&&(Ka.clusterSize=b.pt2px(Ka.clusterSize)),Ka.clusterRadius&&(Ka.clusterRadius=b.pt2px(Ka.clusterRadius)),Ka.popupInfo&&(Ka.infoTemplate=new E(Ka.popupInfo),delete Ka.popupInfo),Qa.setFeatureReduction(Ka)));return Qa}function na(ja,Ua,Ra,Ka,Oa){a.forEach(ja,function(Qa){Qa.layerObject=
ea(Qa,ja,Ua,Ra,Ka,Oa)});var Wa=a.filter(ja,function(Qa){return!Qa.isReference}),Va=a.filter(ja,function(Qa){return!!Qa.isReference});return ja=Wa.concat(Va)}function V(ja){var Ua=null;ja=ja[0];ja.url&&ba(ja)&&ja.resourceInfo.spatialReference&&(Ua=new z,ja.resourceInfo.spatialReference.wkid&&(Ua.wkid=ja.resourceInfo.spatialReference.wkid),ja.resourceInfo.spatialReference.wkt&&(Ua.wkt=ja.resourceInfo.spatialReference.wkt));O(ja)||Y(ja)?Ua=new z({wkid:102100}):ja&&("WMS"===ja.layerType||"WMS"===ja.type)&&
(Ua=new z({wkid:ja.spatialReferences[0]}));return Ua}function Ia(ja,Ua,Ra,Ka,Oa,Wa,Va,Qa){a.forEach(Ua,function($a){if(ba($a)||$a&&"VectorTileLayer"===$a.layerType)$a.resourceInfo=ja[$a.deferredsPos][1],delete $a.deferredsPos});Wa=Wa||V(Ua);Ua=na(Ua,Ra,Wa,Va,Qa);Oa.callback(Ua);return Oa}function Ja(ja){!window.CanvasRenderingContext2D&&ja.renderer&&"esri.renderer.HeatmapRenderer"===ja.renderer.declaredClass&&ja.setRenderer(A.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,
yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Da(ja,Ua,Ra){ja.message=ja.message?ja.message+(" [url:"+Ua+"]"):"[url:"+Ua+"]";Ra.push(ja);e.defaults.io.errorHandler(ja)}function W(ja,Ua){var Ra=ca(ja);return t({url:Ra,content:{f:"json"},callbackParamName:"callback",error:function(Ka,Oa){Da(Ka,Ra,Ua)}})}function oa(ja){var Ua=Kb.arcgisUrl+"/"+ja.itemId+"/data";return t({url:Ua,content:{f:"json"},callbackParamName:"callback",
error:function(Ra,Ka){ja.errors=ja.errors||[];Da(Ra,Ua,ja.errors)}})}function ra(ja,Ua){return cc.loadMetadata(ja).otherwise(function(Ra){Da(Ra,ja,Ua);return Ra})}function R(ja,Ua,Ra){var Ka=new k;if(!(Ra.featureCollection&&Ra.featureCollection.layers||Ra.layers))return ja.errors=ja.errors||[],ja.errors.push({message:"Invalid Feature Collection item data. [item id: "+ja.itemId+"]"}),Ka.errback(),Ka;Ra.layers&&(Ra.featureCollection={layers:Ra.layers},delete Ra.layers,h.isDefined(Ra.showLegend)&&(Ra.featureCollection.showLegend=
Ra.showLegend,delete Ra.showLegend));fa(ja,Ra.featureCollection,Ua).then(function(Oa){Ra.featureCollection=Oa;ja.featureCollection&&ja.featureCollection.layers?a.forEach(Ra.featureCollection.layers,function(Wa,Va){var Qa=ja.featureCollection.layers[Va];Qa.popupInfo||Qa.layerDefinition?Qa.layerDefinition?(h.isDefined(Qa.layerDefinition.minScale)&&h.isDefined(Qa.layerDefinition.maxScale)&&(Qa.layerDefinition.minScale!==Wa.layerDefinition.minScale||Qa.layerDefinition.maxScale!==Wa.layerDefinition.maxScale)&&
(delete Wa.layerDefinition.minScale,delete Wa.layerDefinition.maxScale),Qa.layerDefinition.drawingInfo&&n.toJson(Qa.layerDefinition.drawingInfo)!==n.toJson(Wa.layerDefinition.drawingInfo)&&delete Wa.layerDefinition.drawingInfo,Qa.layerDefinition.showLegend!==Wa.layerDefinition.showLegend&&delete Wa.layerDefinition.showLegend,Qa.layerDefinition=B.mixin(Qa.layerDefinition,Wa.layerDefinition)):Qa.layerDefinition=Wa.layerDefinition:(Qa.popupInfo=Wa.popupInfo,Qa.layerDefinition=Wa.layerDefinition);Qa.featureSet=
Wa.featureSet;Qa.nextObjectId=Wa.nextObjectId}):(ja.featureCollection=ja.featureCollection||{},ja.featureCollection=B.mixin(ja.featureCollection,Ra.featureCollection));Ka.callback(ja)});return Ka}function fa(ja,Ua,Ra){var Ka=new k;D(["./csv"],function(Oa){var Wa=[];a.forEach(Ua.layers,function(Va){Va.featureSet&&Va.featureSet.features&&Va.featureSet.features.length&&Va.featureSet.features[0].geometry&&Va.featureSet.features[0].geometry.spatialReference&&(Va.deferredsPos=Wa.length,Wa.push(Oa.projectFeatureCollection(Va,
Ra,Va.featureSet.features[0].geometry.spatialReference)))});(new m(Wa)).addCallback(function(){a.forEach(Ua.layers,function(Va){h.isDefined(Va.deferredsPos)&&(Wa[Va.deferredsPos].results&&Wa[Va.deferredsPos].results.length?Va=Wa[Va.deferredsPos].results[0]:(Va.errors=Va.errors||[],Va.errors.push({message:"Errors projecting feature collection. ["+ja.title+" - "+Va.layerDefinition.name+"]"})),delete Va.deferredsPos)});Ka.callback(Ua)})});return Ka}function ma(ja,Ua,Ra,Ka,Oa){var Wa=new k,Va=new k,Qa=
[];a.forEach(ja.operationalLayers,function(bb){bb.itemId&&"Feature Collection"==bb.type&&Qa.push(oa(bb).then(B.hitch(null,R,bb,Ra)))});if(0===Qa.length)wa(ja,Ua,Ra,Ka,Va,Oa);else{var $a=new m(Qa);$a.addCallback(function(bb){wa(ja,Ua,Ra,Ka,Va,Oa)})}Va.then(function(bb){Qa=[];a.forEach(bb,function(kb){kb=kb.layerObject;if(kb instanceof J&&!kb.loaded&&!kb.loadError){var ab=new k;f.once(kb,"load, error",function(){ab.callback(kb)});Qa.push(ab)}else kb&&"esri.layers.WFSLayer"===kb.declaredClass&&!kb.loadError&&
(ab=new k,f.once(kb,"fromJsonComplete, error",function(lb){ab.callback(kb)}),Qa.push(ab))});if(Qa.length){var cb=new k;$a=new m(Qa);$a.addCallback(function(){cb.callback(bb)});return cb.promise}return bb}).then(function(bb){var cb=[];a.forEach(bb,function(kb){var ab=kb.layerObject;ab&&(ab instanceof J||"esri.layers.StreamLayer"===ab.declaredClass)?ab.loaded&&ab.labelingInfo&&(kb.showLabels||ab._collection?cb.push(ab):ab.setShowLabels&&ab.setShowLabels(!1)):ab&&"esri.layers.WFSLayer"===ab.declaredClass&&
ab.loaded&&ab.labelingInfo&&cb.push(ab)});cb.length?D(["../layers/LabelLayer"],function(kb){var ab=new kb;a.forEach(cb,function(lb){ab.addFeatureLayer(lb)});bb.push({layerObject:ab});Wa.callback(bb)}):Wa.callback(bb)});return Wa}function wa(ja,Ua,Ra,Ka,Oa,Wa){var Va=[],Qa=[],$a=[];a.forEach(ja.operationalLayers,function(bb,cb){if(bb.featureCollection&&bb.featureCollection.layers){var kb=bb.featureCollection.layers.length;a.forEach(bb.featureCollection.layers,function(ab,lb){var mb=!0;bb.visibleLayers&&
-1==a.indexOf(bb.visibleLayers,lb)&&(mb=!1);ab.visibility=(null!=bb.visibility?!!bb.visibility:!0)&&mb;ab.opacity=bb.opacity;ab.id=(bb.id||"operational"+cb)+"_"+lb;bb.title&&(ab.title=1!==kb&&ab.layerDefinition.name&&bb.title!==ab.layerDefinition.name?bb.title+" - "+ab.layerDefinition.name:bb.title);null==ab.disablePopup&&(ab.disablePopup=bb.disablePopup);$a.push(ab)},this)}else $a.push(bb)});a.forEach(ja.baseMap.baseMapLayers,function(bb,cb){bb.baseMapLayer=!0;bb.id=bb.id||"base"+cb;Va.push(bb)});
a.forEach($a,function(bb,cb){bb.id=bb.id||"operational"+cb;Va.push(bb)});a.forEach(Va,function(bb){var cb=!(!bb||"VectorTileLayer"!==bb.layerType);if(ba(bb)||cb)bb.deferredsPos=Qa.length,bb.errors=bb.errors||[],cb?Qa.push(ra(bb.styleUrl,bb.errors)):Qa.push(W(bb.url,bb.errors))});0===Qa.length?(Ra=Ra||V(Va),Va=na(Va,Ua,Ra,Ka,Wa),Oa.callback(Va)):(new m(Qa)).addCallback(function(bb){Ia(bb,Va,Ua,Qa,Oa,Ra,Ka,Wa)});return Oa}function Ea(ja,Ua,Ra,Ka){var Oa=ja.minScale,Wa=ja.maxScale;if(10.1>=Ra.version&&
Ua)for(ja=Ua.length-1;0<=ja;ja--){if(Ua[ja].id==Ka)if(0==Oa&&0<Ua[ja].minScale?Oa=Ua[ja].minScale:0<Oa&&0==Ua[ja].minScale?Oa=Ra.minScale:0<Oa&&0<Ua[ja].minScale&&(Oa=Math.min(Oa,Ua[ja].minScale)),Wa=Math.max(Ra.maxScale||0,Ua[ja].maxScale||0),Ra.setScaleRange(Oa,Wa),-1<Ua[ja].parentLayerId)Ka=Ua[ja].parentLayerId;else break}else 10.1<Ra.version&&(a.forEach(ja.layerInfos,function(Va){Va.id==Ka&&(0==Oa&&0<Va.minScale?Oa=Va.minScale:0<Oa&&0==Va.minScale||0<Oa&&0<Va.minScale&&(Oa=Math.min(Oa,Va.minScale)),
Wa=Math.max(Wa||0,Va.maxScale||0))}),Ra.setScaleRange(Oa,Wa))}function Ha(ja,Ua,Ra,Ka){var Oa=ja.url,Wa=ja.__popupIds,Va=ja.__popupUrls,Qa=ja.__popupWhereClauses,$a=ja.__popupMinScales,bb=ja.__popupMaxScales,cb=ja.__resourceInfo,kb=[];a.forEach(ja.__popups,function(ab,lb){if(ab){var mb=[];a.forEach(ab.fieldInfos,function(Fb){"shape"!==Fb.fieldName.toLowerCase()&&mb.push(Fb.fieldName)});if(ja.dynamicLayerInfos&&0<ja.dynamicLayerInfos.length){var pb=a.filter(ja.dynamicLayerInfos,function(Fb){return Wa[lb]==
Fb.id})[0].source;var Wb=new J(Oa+"/dynamicLayer",{parentLayer:ja,id:ja.id+"_"+Wa[lb],source:pb,outFields:mb,mode:J.MODE_SELECTION,infoTemplate:ab&&new Ra(ab),drawMode:!1,visible:ja.visible,autoGeneralize:!0});var Lc=function(Fb,fc){0<Qa[Fb].length&&fc.setDefinitionExpression(Qa[Fb]);if(h.isDefined($a[Fb])||h.isDefined(bb[Fb]))if(h.isDefined(ja.minScale)||h.isDefined(ja.maxScale)){var gc=ja.minScale,Mc=ja.maxScale;0==gc&&0<$a[Fb]?gc=$a[Fb]:0<gc&&0==$a[Fb]||0<gc&&0<$a[Fb]&&(gc=Math.min(gc,$a[Fb]));
Mc=Math.max(Mc||0,bb[Fb]||0);fc.setScaleRange(gc,Mc)}else fc.setScaleRange($a[Fb],bb[Fb]);else Ea(ja,Ua||cb.layers,fc,Wa[Fb])};Wb.loaded?Lc(lb,Wb):c.connect(Wb,"onLoad",function(Fb){Lc(lb,Wb)})}else{var zc=null,Ec=Oa+"/"+Wa[lb];if(Va[lb].length)Ec=Va[lb];else if(Ua)for(pb=0;pb<Ua.length;pb++)if(Ua[pb].id===Wa[lb]){zc=Ua[pb];break}Wb=new J(ca(Ec),{parentLayer:ja,id:ja.id+"_"+Wa[lb],outFields:mb,mode:J.MODE_SELECTION,infoTemplate:ab&&new Ra(ab),drawMode:!1,visible:ja.visible,resourceInfo:zc,autoGeneralize:!0});
Wb.loaded?(0<Qa[lb].length&&Wb.setDefinitionExpression(Qa[lb]),Ea(ja,Ua||cb.layers,Wb,Wa[lb])):c.connect(Wb,"onLoad",function(Fb){0<Qa[lb].length&&Wb.setDefinitionExpression(Qa[lb]);Ea(ja,Ua||cb.layers,Fb,Wa[lb])})}kb.push(Wb)}});0<kb.length&&(c.connect(ja,"onVisibilityChange",B.hitch(this,function(ab,lb){a.forEach(ab,function(mb){lb?mb.show():mb.hide()})},kb)),c.connect(Ka,"onLayerRemove",B.hitch(this,function(ab,lb,mb){ab.id===mb.id&&a.forEach(lb,function(pb){Ka.removeLayer(pb)})},ja,kb)));delete ja.__popups;
delete ja.__popupIds;delete ja.__popupUrls;delete ja.__popupWhereClauses;delete ja.__popupMinScales;delete ja.__popupMaxScales;delete ja.__resourceInfo;return kb}function La(ja){return t({url:ca(ja.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Ya(ja,Ua,Ra){var Ka=[];a.forEach(ja,function(Wa){var Va=Wa.__popups;Va&&1<Va.length&&10<=Wa.version&&(Wa.__deferredsPos=Ka.length,Ka.push(La(Wa)))});var Oa=[];0<Ka.length?(new m(Ka)).addCallback(function(Wa){a.forEach(ja,
function(Va){Va.__popups&&0<Va.__popups.length&&(Va.__deferredsPos||0===Va.__deferredsPos?(Oa=Oa.concat(Ha(Va,Wa[Va.__deferredsPos][1].layers,Ra,Ua)),delete Va.__deferredsPos):Oa=Oa.concat(Ha(Va,null,Ra,Ua)))});Ua.addLayers(Oa)}):(a.forEach(ja,function(Wa){Wa.__popups&&0<Wa.__popups.length&&(Oa=Oa.concat(Ha(Wa,null,Ra,Ua)))}),Ua.addLayers(Oa))}function Xa(ja){a.forEach(ja,function(Ua){var Ra=Ua.layer;Ra.toJson&&(Ua=Ra.toJson(),Ua.featureSet&&Ra.name&&-1<Ra.name.indexOf("Text")&&a.forEach(Ua.featureSet.features,
function(Ka,Oa){if(Ka.attributes.TEXT){var Wa=Ra.graphics[Oa];Wa.symbol.setText(Ka.attributes.TEXT);Ka.symbol.horizontalAlignment&&(Wa.symbol.align=Ka.symbol.horizontalAlignment);Wa.setSymbol(Wa.symbol);Wa.setAttributes(Ka.attributes)}},this))})}function Ta(ja){var Ua=6;a.forEach(ja,function(Ra){if(Ra=Ra.renderer)"esri.renderer.SimpleRenderer"===Ra.declaredClass?((Ra=Ra.symbol)&&Ra.xoffset&&(Ua=Math.max(Ua,Math.abs(Ra.xoffset))),Ra&&Ra.yoffset&&(Ua=Math.max(Ua,Math.abs(Ra.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
Ra.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Ra.declaredClass||a.forEach(Ra.infos,function(Ka){(Ka=Ka.symbol)&&Ka.xoffset&&(Ua=Math.max(Ua,Math.abs(Ka.xoffset)));Ka&&Ka.yoffset&&(Ua=Math.max(Ua,Math.abs(Ka.yoffset)))})});return Ua}function eb(ja){var Ua=this,Ra=Ua.infoWindow,Ka=ja.graphic;if(Ua.loaded){Ra.hide();Ra.clearFeatures();var Oa=[];a.forEach(Ua.graphicsLayerIds,function(ab){(ab=Ua.getLayer(ab))&&ab instanceof J&&ab.loaded&&ab.visible&&(ab.clearSelection(),ab.infoTemplate&&!ab.suspended&&
Oa.push(ab))});a.forEach(Ua.layerIds,function(ab){(ab=Ua.getLayer(ab))&&(-1!==ab.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==ab.declaredClass.indexOf("RasterXLayer"))&&ab.loaded&&ab.visible&&ab.infoTemplate&&Oa.push(ab)});Ka=Ka&&Ka.getInfoTemplate()?Ka:null;if(Oa.length||Ka){var Wa=Ta(Oa),Va=ja.screenPoint,Qa=Ua.toMap(new F(Va.x-Wa,Va.y+Wa));Wa=Ua.toMap(new F(Va.x+Wa,Va.y-Wa));var $a=new x(Qa.x,Qa.y,Wa.x,Wa.y,Ua.spatialReference),bb=new H;bb.geometry=$a;bb.timeExtent=Ua.timeExtent;var cb=
!0;Qa=a.map(Oa,function(ab){ab=ab&&ab.isFeatureReductionActive&&ab.isFeatureReductionActive()?ab.getFeatureReductionLayer():ab;if(-1!==ab.declaredClass.indexOf("ArcGISImageServiceLayer")){bb.geometry=ja.mapPoint;cb=!1;var lb=ab.queryVisibleRasters(bb,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});lb.addCallback(function(){return ab.getVisibleRasters()})}else if(-1!==ab.declaredClass.indexOf("RasterXLayer"))lb=ab.fetchPopupFromTiles({geometry:ja.mapPoint});else if("function"===
typeof ab.selectFeatures)lb=ab.selectFeatures(bb),lb.addCallback(function(){return ab.getSelectedFeatures()});else{lb=new k;var mb=a.filter(ab.graphics,function(pb){return pb&&pb.visible&&$a.intersects(pb.geometry)});lb.resolve(mb)}return lb});Ka&&(Wa=new k,Wa.callback([Ka]),Qa.splice(0,0,Wa));if(!a.some(Qa,function(ab){return-1===ab.fired})){var kb=Ka?1:0;a.forEach(Oa,function(ab){kb=-1!==ab.declaredClass.indexOf("ArcGISImageServiceLayer")?kb+ab.getVisibleRasters().length:-1!==ab.declaredClass.indexOf("RasterXLayer")?
kb+ab.getPopupFromTiles().length:kb+ab.getSelectedFeatures().length});if(!kb)return}Ra.setFeatures(Qa);Ra.show(ja.mapPoint,{closestFirst:cb})}}}function db(ja,Ua){var Ra=Ua.mapOptions||{};if(!Ra.infoWindow){var Ka=new G({visibleWhenEmpty:!1},q.create("div"));Ra.infoWindow=Ka}h.isDefined(Ra.showInfoWindowOnClick)||Ua.usePopupManager||(Ra.showInfoWindowOnClick=!1);Ra=new v(ja,Ra);c.connect(Ra,"onLayersAddResult",Xa);return Ra}function gb(ja,Ua,Ra,Ka,Oa,Wa){if(Ka.map){var Va=Ka.map;var Qa=Ka.clickEventHandle;
var $a=Ka.clickEventListener;var bb=Ka.errors}else{var cb=Ra.itemData;!Oa.mapOptions.backgroundColor&&cb.background&&cb.background.color&&null!=cb.background.color[0]&&(Oa.mapOptions.backgroundColor=d.toDojoColor(cb.background.color));Va=db(Ka,Oa);Oa.ignorePopups||Oa.disableClickBehavior||Oa.usePopupManager||(Qa=c.connect(Va,"onClick",eb),$a=eb)}Va.addLayers(ja);Oa.ignorePopups||Oa.usePopupManager||Ya(ja,Va,Oa._clazz);var kb=bb||[];a.forEach(Ua,function(ab){ab.errors&&(kb=kb.concat(ab.errors))},this);
Va.loaded?Wa.callback({map:Va,itemInfo:Ra,errors:kb,clickEventHandle:Qa,clickEventListener:$a}):c.connect(Va,"onLoad",function(){Wa.callback({map:Va,itemInfo:Ra,errors:kb,clickEventHandle:Qa,clickEventListener:$a})})}function qb(ja,Ua,Ra,Ka,Oa){var Wa=[];a.forEach(Oa,function($a){B.isArray($a.layerObject)?a.forEach($a.layerObject,function(bb){Wa.push(bb)}):Wa.push($a.layerObject)});if(O(Oa[0]))var Va=setInterval(function(){if(Oa[0].layerObject&&Oa[0].layerObject.loaded)clearInterval(Va),sb(ja,Ua,
Ra,Ka,Oa,Wa);else if(Oa[0].errors){clearInterval(Va);var $a="";Oa[0].errors&&Oa[0].errors.length&&($a=" ("+Oa[0].errors[0].message+")");Ka.errback(Error(L.arcgis.utils.baseLayerError+$a))}},10);else if(!Wa[0]&&Oa[0].baseMapLayer){var Qa="";Oa[0].errors&&Oa[0].errors.length&&(Qa=" ("+Oa[0].errors[0].message+")");Ka.errback(Error(L.arcgis.utils.baseLayerError+Qa))}else sb(ja,Ua,Ra,Ka,Oa,Wa)}function sb(ja,Ua,Ra,Ka,Oa,Wa){try{var Va=Ra.mapOptions||{};Ra.mapOptions=Va;Wa=a.filter(Wa,h.isDefined);if(Ua.map||
Va.extent)gb(Wa,Oa,ja,Ua,Ra,Ka);else{var Qa=Wa[0].spatialReference;if(Va.center&&(null!=Va.zoom||Va.scale)&&(B.isArray(Va.center)&&(Va.center=new C(Va.center)),u.canProject(Va.center,Qa))){gb(Wa,Oa,ja,Ua,Ra,Ka);return}var $a=ja.item;if($a&&$a.extent&&$a.extent.length){var bb=new x($a.extent[0][0],$a.extent[0][1],$a.extent[1][0],$a.extent[1][1],new z({wkid:4326}));4326===Qa.wkid?(Va.extent=bb,gb(Wa,Oa,ja,Ua,Ra,Ka)):900913===Qa.wkid||102100===Qa.wkid||102113===Qa.wkid||3857===Qa.wkid?(bb.xmin=Math.max(bb.xmin,
-180),bb.xmax=Math.min(bb.xmax,180),bb.ymin=Math.max(bb.ymin,-89.99),bb.ymax=Math.min(bb.ymax,89.99),Va.extent=u.geographicToWebMercator(bb),gb(Wa,Oa,ja,Ua,Ra,Ka)):Ra.geometryServiceURL||e.defaults.geometryService?(Ra.geometryServiceURL?new K(Ra.geometryServiceURL):e.defaults.geometryService).project([bb],Qa,function(cb){cb=cb[0];Va.extent=Va.extent||cb;gb(Wa,Oa,ja,Ua,Ra,Ka)},function(){gb(Wa,Oa,ja,Ua,Ra,Ka)}):Ka.errback(Error(L.arcgis.utils.geometryServiceError))}else gb(Wa,Oa,ja,Ua,Ra,Ka)}}catch(cb){Ka.errback(cb)}}
function tb(ja){var Ua=[];a.forEach(ja.operationalLayers,function(Ra){Ra.featureCollection?Ua.push({featureCollection:Ra.featureCollection,visibility:null!=Ra.visibility?!!Ra.visibility:!0,title:Ra.title}):Ra.layerObject&&Ua.push({layer:Ra.layerObject,visibility:null!=Ra.visibility?!!Ra.visibility:!0,title:Ra.title})});return Ua}function Cb(ja){var Ua=[],Ra=ja.baseMap.baseMapLayers;ja.operationalLayers&&(Ra=Ra.concat(ja.operationalLayers));a.forEach(Ra,function(Ka){var Oa={};if(Ka.featureCollection&&
(!Ka||"CSV"!==Ka.layerType&&"CSV"!==Ka.type))!0===Ka.featureCollection.showLegend&&a.forEach(Ka.featureCollection.layers,function(Qa){if(!1!==Qa.showLegend){var $a=Qa.layerObject.renderer;Oa={layer:Qa.layerObject,title:Ka.title,defaultSymbol:$a&&$a.defaultSymbol&&$a.defaultLabel?!0:!1};1<Ka.featureCollection.layers.length&&(Oa.title+=" - "+Qa.layerDefinition.name);Ua.push(Oa)}});else if(Ka.baseMapLayer&&!0===Ka.showLegend&&Ka.layerObject||!Ka.baseMapLayer&&!1!==Ka.showLegend&&Ka.layerObject&&!(Ka.layerObject instanceof
J&&Ka.layerObject.mode===J.MODE_SELECTION)){var Wa=Ka.layerObject.renderer,Va=Ka.layerObject.declaredClass;Wa=!Wa||Wa&&Wa.defaultSymbol&&Wa.defaultLabel?!0:!1;if(10.1>Ka.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Va||"esri.layers.ArcGISTiledMapServiceLayer"===Va)||"esri.layers.ArcGISImageServiceLayer"===Va)Wa=!0;Oa={layer:Ka.layerObject,title:Ka.title,defaultSymbol:Wa};Ka.layers&&(Va=a.map(a.filter(Ka.layers,function(Qa){return!1===Qa.showLegend}),function(Qa){return Qa.id}),
Va.length&&(Oa.hideLayers=Va));Ua.push(Oa)}});return Ua}function Gb(ja,Ua){function Ra(bb,cb){a.forEach(bb,function(kb,ab){switch(kb){case "../layers/ArcGISDynamicMapServiceLayer":Zb=cb[ab];break;case "../layers/ArcGISImageServiceLayer":Nb=cb[ab];break;case "../layers/ArcGISImageServiceVectorLayer":yb=cb[ab];break;case "../layers/CSVLayer":uc=cb[ab];break;case "../layers/DynamicLayerInfo":Ib=cb[ab];break;case "../layers/GeoRSSLayer":bc=cb[ab];break;case "../layers/ImageParameters":ic=cb[ab];break;
case "../layers/ImageServiceParameters":Xb=cb[ab];break;case "../layers/KMLLayer":vc=cb[ab];break;case "../layers/LabelClass":jc=cb[ab];break;case "../layers/LayerDrawingOptions":pc=cb[ab];break;case "../layers/MosaicRule":wc=cb[ab];break;case "../layers/OpenStreetMapLayer":xc=cb[ab];break;case "../layers/RasterFunction":Jc=cb[ab];break;case "../layers/RasterXLayer":Qc=cb[ab];break;case "../layers/StreamLayer":Kc=cb[ab];break;case "../layers/TileInfo":yc=cb[ab];break;case "../layers/VectorTileLayer":kc=
cb[ab];break;case "../layers/vectorTiles/layers/support/vectorTileLayerLoader":cc=cb[ab];break;case "../virtualearth/VETiledLayer":dc=cb[ab];break;case "../layers/WebTiledLayer":Rc=cb[ab];break;case "../layers/WFSLayer":ec=cb[ab];break;case "../layers/WMSLayer":Yb=cb[ab];break;case "../layers/WMSLayerInfo":Sc=cb[ab]}})}var Ka=new k,Oa=ja.itemData,Wa=[];Oa.baseMap&&Oa.baseMap.baseMapLayers&&(Wa=Wa.concat(Oa.baseMap.baseMapLayers));Oa.operationalLayers&&(Wa=Wa.concat(Oa.operationalLayers));Oa=a.map(Wa,
function(bb){return bb&&bb.layerType});var Va=[],Qa=[];Wa=!1;for(var $a=0;$a<Oa.length;$a++){switch(Oa[$a]){case "ArcGISFeatureLayer":-1===a.indexOf(Va,"../layers/LabelClass")&&Va.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===a.indexOf(Va,"../layers/ArcGISImageServiceLayer")&&(Va.push("../layers/ArcGISImageServiceLayer"),Qa.push("../layers/ImageServiceParameters"),Qa.push("../layers/MosaicRule"),Qa.push("../layers/RasterFunction"),Va.push("../layers/RasterXLayer"));
break;case "ArcGISImageServiceVectorLayer":-1===a.indexOf(Va,"../layers/ArcGISImageServiceVectorLayer")&&(Va.push("../layers/ArcGISImageServiceVectorLayer"),Qa.push("../layers/ImageServiceParameters"),Qa.push("../layers/MosaicRule"),Qa.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===a.indexOf(Va,"../layers/ArcGISDynamicMapServiceLayer")&&(Va.push("../layers/ArcGISDynamicMapServiceLayer"),Qa.push("../layers/DynamicLayerInfo"),Qa.push("../layers/ImageParameters"),
Qa.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===a.indexOf(Va,"../layers/StreamLayer")&&Va.push("../layers/StreamLayer");-1===a.indexOf(Va,"../layers/LabelClass")&&Va.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===a.indexOf(Va,"../virtualearth/VETiledLayer")&&Va.push("../virtualearth/VETiledLayer");break;case "CSV":-1===a.indexOf(Va,"../layers/CSVLayer")&&(Va.push("../layers/CSVLayer"),Qa.push("./csv"));break;case "GeoRSS":-1===
a.indexOf(Va,"../layers/GeoRSSLayer")&&Va.push("../layers/GeoRSSLayer");break;case "KML":-1===a.indexOf(Va,"../layers/KMLLayer")&&Va.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===a.indexOf(Va,"../layers/OpenStreetMapLayer")&&Va.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===a.indexOf(Va,"../layers/VectorTileLayer")&&Va.push("../layers/VectorTileLayer");-1===a.indexOf(Qa,"../layers/vectorTiles/layers/support/vectorTileLayerLoader")&&Qa.push("../layers/vectorTiles/layers/support/vectorTileLayerLoader");
break;case "WebTiledLayer":-1===a.indexOf(Va,"../layers/WebTiledLayer")&&(Va.push("../layers/WebTiledLayer"),Qa.push("../layers/TileInfo"));break;case "WFS":-1===a.indexOf(Va,"../layers/WFSLayer")&&Va.push("../layers/WFSLayer");break;case "WMS":-1===a.indexOf(Va,"../layers/WMSLayer")&&(Va.push("../layers/WMSLayer"),Qa.push("../layers/WMSLayerInfo"));break;default:Wa=!0}if(Wa)break}Wa&&(Va=Pb,Qa=$b);Va.length?D(Va,function(){Ra(Va,arguments);Qa.length?D(Qa,function(){Ra(Qa,arguments);Ka.resolve()}):
Ka.resolve()}):Ka.resolve();return Ka}function nb(ja){ja=ja.itemData;var Ua=function(Ka,Oa){"GroupLayer"===Ka.layerType?a.forEach(Ka.layers,function(Wa){Wa.visibility=!1===Ka.visibility?!1:Wa.visibility;Wa.opacity=h.isDefined(Ka.opacity)?h.isDefined(Wa.opacity)?Wa.opacity*Ka.opacity:Ka.opacity:Wa.opacity;Ua(Wa,Oa)}):Oa.push(Ka)},Ra=[];a.forEach(ja.operationalLayers,function(Ka){Ua(Ka,Ra)});ja.operationalLayers=Ra}function Ab(ja,Ua,Ra,Ka){nb(Ka);var Oa=Ka.itemData;Oa.baseMap&&Oa.baseMap.baseMapLayers&&
Oa.baseMap.baseMapLayers.length&&(Oa.baseMap.baseMapLayers[0].firstLayer=!0);var Wa=Ua.layerMixins,Va=Wa&&Wa.length;if(Va){var Qa=function($a){for(var bb=0;bb<Va;bb++){var cb=Wa[bb];if(cb.mixin)if(cb.hasOwnProperty("id")){if($a.id===cb.id){B.mixin($a,cb.mixin);break}}else if($a.url===cb.url){B.mixin($a,cb.mixin);break}}};a.forEach(Oa.baseMap&&Oa.baseMap.baseMapLayers,Qa);a.forEach(Oa.operationalLayers,Qa)}Gb(Ka,Ua).then(function(){return ia(Ka,Ua)}).then(function(){return da(Ka,Ua)}).then(function($a){var bb=
$a[0],cb=$a[1];if(bb.itemData.operationalLayers&&0!==bb.itemData.operationalLayers.length){var kb=new k,ab=bb.itemData.baseMap.baseMapLayers.slice(),lb=a.filter(bb.itemData.baseMap.baseMapLayers,function(mb){return!mb.isReference});$a={item:bb.item,itemData:{baseMap:{baseMapLayers:lb},background:B.clone(bb.itemData.background)}};bb.itemData.baseMap.baseMapLayers=a.filter(bb.itemData.baseMap.baseMapLayers,function(mb){return mb.isReference});P($a,cb).addCallback(function(mb){ma(mb.itemData,cb).addCallback(B.hitch(null,
qb,mb,ja,cb,kb))});kb.then(function(mb){P(bb,cb).addCallback(function(pb){ma(pb.itemData,cb,mb.map.spatialReference,lb,mb.map).addCallback(function(Wb){pb.itemData.baseMap.baseMapLayers=ab;qb(pb,mb,cb,Ra,Wb)})})},B.hitch(Ra,Ra.errback))}else P(bb,cb).addCallback(function(mb){ma(mb.itemData,cb).addCallback(B.hitch(null,qb,mb,ja,cb,Ra))})})}function Ub(ja,Ua){"undefined"===typeof Ua&&(Ua=!0);Kb._arcgisUrl&&0<Kb._arcgisUrl.length&&(Kb.arcgisUrl=Kb._arcgisUrl);var Ra={},Ka=new k;t({url:Kb.arcgisUrl+"/"+
ja,content:{f:"json"},callbackParamName:"callback",load:function(Oa){Ra.item=Oa;Ua?t({url:Kb.arcgisUrl+"/"+ja+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Wa){Ra.itemData=Wa;Ka.callback(Ra)},error:function(Wa){Ka.errback(Wa)}}):Ka.callback(Ra)},error:function(Oa){Ka.errback(Oa)}});return Ka}var Zb,Nb,yb,uc,Ib,bc,ic,Xb,vc,jc,pc,wc,xc,Jc,Qc,Kc,yc,kc,cc,dc,Rc,ec,Yb,Sc,Pb="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
$b="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/vectorTiles/layers/support/vectorTileLayerLoader ../layers/WMSLayerInfo".split(" ");var Kb={arcgisUrl:y.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Ub,createMap:function(ja,Ua,Ra){var Ka=new k;Ra=Ra||{};var Oa=Ra.infoTemplateClass;Ra._clazz=Oa&&(B.isObject(Oa)?Oa:
B.getObject(Oa))||E;B.isString(ja)?Ub(ja).addCallback(B.hitch(null,Ab,Ua,Ra,Ka)).addErrback(B.hitch(Ka,Ka.errback)):Ab(Ua,Ra,Ka,ja);Ka.addCallback(function(Wa){var Va=Wa.map;Va&&(Va.tables=B.getObject("itemInfo.itemData.tables",!1,Wa)||[])});return Ka},getLayerList:function(ja){return ja&&ja.itemInfo&&ja.itemInfo.itemData?tb(ja.itemInfo.itemData):[]},getLegendLayers:function(ja){return ja&&ja.itemInfo&&ja.itemInfo.itemData?Cb(ja.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:P,_getItemData:ha,
_getBingKey:U,_portalUrlResponse:xa,_portalUrlFailure:Ca,_processFSItemProperties:X,_processSSItemProperties:Z,_getLayers:ma,_preBuildLayerObjects:Ia,_buildLayerObjects:na,_preCreateMap:qb,_getMapSR:V,_createMap:gb,_addSelectionLayers:Ya,_createSelectionFeatureLayers:Ha,_getServiceInfo:W,_getFeatureCollectionItem:oa,_mergeFeatureCollectionItem:R,_projectFeatureCollection:fa,_getLayersInfo:La,_initLayer:ea,_loadAsCached:ua,_loadAsDynamic:ta,_processPopups:Ma,_onLayersAddResult:Xa,_sameSpatialReferenceAsBasemap:Aa,
_sameTilingSchemeAsBasemap:T,_showPopup:eb,_calculateClickTolerance:Ta,_getVisibleFeatureLayers:ya,_updateLayerScaleInfo:Ea,_checkUrl:ca,_isHostedService:Sa,_isAgolService:Ba,_getLegendLayers:Cb};B.setObject("arcgis.utils",Kb,g);return Kb})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u){var w={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},A={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},E=c.connect,G=c.disconnect,H=g.create,K=d.set,I=k.hitch,J=e.getMarginBox,L=B.deprecated,M=k.mixin,N=0;B=a(F,{declaredClass:"esri.Map",constructor:function(O,Y){Y=Y||{};M(this,{_slider:null,_navDiv:null,_mapParams:M({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},Y)});M(this,{isMapNavigation:null!=Y.isMapNavigation?Y.isMapNavigation:!0,isDoubleClickZoom:null!=Y.isDoubleClickZoom?Y.isDoubleClickZoom:!0,isClickRecenter:null!=Y.isClickRecenter?Y.isClickRecenter:!0,isPan:null!=Y.isPan?Y.isPan:!0,isRubberBandZoom:null!=Y.isRubberBandZoom?Y.isRubberBandZoom:!0,isPinchZoom:null!=Y.isPinchZoom?Y.isPinchZoom:!0,isKeyboardNavigation:null!=Y.isKeyboardNavigation?Y.isKeyboardNavigation:!0,isScrollWheel:null!=
Y.isScrollWheel?Y.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});k.isFunction(z._css)&&(z._css=z._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var ba=y("esri-transforms")&&y("esri-transitions");this.navigationMode=this._mapParams.navigationMode||ba&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||ba||(this.navigationMode="classic");this.fadeOnZoom=C.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=Y&&Y.smartNavigation;if(!(C.isDefined(this.smartNavigation)||!y("mac")||y("esri-touch")||y("esri-pointer")||3.5>=y("ff"))){var ha=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);ha&&C.isDefined(ha[1])&&C.isDefined(ha[3])&&(ba=parseInt(ha[1],10),ha=parseInt(ha[3],10),this.smartNavigation=10<ba||10===ba&&
6<=ha)}this.showAttribution=C.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=E(this,"onLoad",this,"_onLoadInitNavsHandler");var U=H("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(ba=k.getObject("esri.dijit.Attribution",!1))this._initAttribution(ba,U);else{var X=N++,Z=this;this._rids&&this._rids.push(X);D(["./dijit/Attribution"],function(P){var da=Z._rids?n.indexOf(Z._rids,X):
-1;-1!==da&&(Z._rids.splice(da,1),Z._initAttribution(P,U))})}this._mapParams.logo&&(ba={},6===y("ie")&&(ba.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+D.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:ba,tabIndex:"0",title:"Esri"},U),this._setLogoSize(),this._onMapResizeLogo_connect=E(this,"onResize",this,"_setLogoSize"),this._ogol_connect=E(this._ogol,h,this,"_openLogoLink"));this.navigationManager=new x(this);
Y&&Y.basemap&&(this._onLoadFix=!0,this.setBasemap(Y.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)ba=this._getEnclosingResizableWidget(this.container)||window,ha=this.resize,this._rszSignal=f.pausable(ba,"resize",ha),this._oriSignal=f.pausable(window,"orientationchange",ha),m.after(ba,"resize",ha,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(O){var Y=
t.getEnclosingWidget(O);return Y?Y.resize?Y:this._getEnclosingResizableWidget(O.parentNode):Y},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(b.remove(this._ogol,"logo-med"),b.add(this._ogol,"logo-sm")):(b.remove(this._ogol,"logo-sm"),b.add(this._ogol,"logo-med")))},_initAttribution:function(O,Y){var ba=H("span",{"class":"esriAttribution"},Y,"first");K(ba,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(E(ba,h,function(){b.contains(this,
"esriAttributionOpen")?b.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&b.add(this,"esriAttributionOpen")}));this.attribution=new O({map:this},ba)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var O=this._slider;O&&O.destroy&&!O._destroyed&&O.destroy();O=this._navDiv;var Y=this.attribution;O&&g.destroy(O);Y&&Y.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);n.forEach(this._connects,G);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(O){var Y=this.getLevel();return!this.__tileInfo||!(Y===this.getMinZoom()&&0>O||Y===this.getMaxZoom()&&0<O)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var O=-1!==this._getSliderClass(!0).indexOf("Horizontal");O=[O?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",O?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",O?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(n.some(O,function(ha){return!k.getObject(ha,!1)})){O=n.map(O,function(ha){return ha.replace(/\./g,"/")});var Y=N++,ba=this;this._rids&&
this._rids.push(Y);D(O,function(){var ha=ba._rids?n.indexOf(ba._rids,Y):-1;-1!==ha&&(ba._rids.splice(ha,1),ba._createSlider.apply(ba,arguments))})}else O=n.map(O,function(ha){return k.getObject(ha,!1)}),this._createSlider.apply(this,O)}G(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var O,Y=b.add,ba=this.id;this._navDiv=H("div",{id:ba+"_navdiv"},this.root);Y(this._navDiv,"navDiv");var ha=this.width/2,U=this.height/2;for(O in w){var X=w[O];var Z=H("div",{id:ba+"_pan_"+
O},this._navDiv);Y(Z,"fixedPan "+X);if("up"===O||"down"===O){var P=parseInt(J(Z).w,10)/2;K(Z,{left:ha-P+"px",zIndex:30})}else P=parseInt(J(Z).h,10)/2,K(Z,{top:U-P+"px",zIndex:30});this._connects.push(E(Z,"onclick",I(this,this[X])))}this._onMapResizeNavHandler_connect=E(this,"onResize",this,"_onMapResizeNavHandler");for(O in A)X=A[O],Z=H("div",{id:ba+"_pan_"+O,style:{zIndex:30}},this._navDiv),Y(Z,"fixedPan "+X),this._connects.push(E(Z,"onclick",I(this,this[X])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(O,
Y,ba){O=this.id;Y/=2;ba/=2;var ha=q.byId,U;for(U in w){var X=ha(O+"_pan_"+U);if("up"===U||"down"===U){var Z=parseInt(J(X).w,10)/2;K(X,"left",Y-Z+"px")}else Z=parseInt(J(X).h,10)/2,K(X,"top",ba-Z+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var O=this._slider=H("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),Y=H("div",{"class":"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},O),ba=H("div",{"class":"esriSimpleSliderDecrementButton",
tabIndex:"0",role:"button"},O);this._addZoomButtonTooltips(Y,ba);this._incButton=Y;this._decButton=ba;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var ha=u.widgets.zoomSlider;this._addZoomButtonIcon(Y,"+",ha.zoomIn);this._addZoomButtonIcon(ba,"\x26minus;",ha.zoomOut);8>y("ie")&&b.add(ba,"dj_ie67Fix");this._connects.push(E(Y,h,this,this._simpleSliderChangeHandler));this._connects.push(E(ba,h,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(E(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>y("ie")&&q.setSelectable(O,!1);this.root.appendChild(O);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(O){r.stop(O);O=-1!==O.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:O?1:-1})},_simpleSliderZoomHandler:function(O,Y,ba,ha){var U;O=this._incButton;Y=this._decButton;-1<ha&&ha===this.getMaxZoom()?U=O:-1<ha&&ha===this.getMinZoom()&&(U=Y);U?(b.add(U,"esriSimpleSliderDisabledButton"),b.remove(U===O?
Y:O,"esriSimpleSliderDisabledButton")):(b.remove(O,"esriSimpleSliderDisabledButton"),b.remove(Y,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(O){O=O?"Large":"Simple";var Y=this._mapParams.sliderOrientation,ba=this._mapParams.sliderPosition||"";Y=Y&&"horizontal"===Y.toLowerCase()?"esri"+O+"SliderHorizontal":"esri"+O+"SliderVertical";if(ba)switch(ba.toLowerCase()){case "top-left":ba="esri"+O+"SliderTL";break;case "top-right":ba="esri"+O+"SliderTR";break;case "bottom-left":ba="esri"+O+
"SliderBL";break;case "bottom-right":ba="esri"+O+"SliderBR"}return"esri"+O+"Slider "+Y+" "+ba},_addZoomButtonIcon:function(O,Y,ba){g.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:Y},O);g.create("span",{"class":"esriIconFallbackText",innerHTML:ba},O)},_addZoomButtonTooltips:function(O,Y){var ba=u.widgets.zoomSlider;l.set(O,"title",ba.zoomIn);l.set(Y,"title",ba.zoomOut)},_createSlider:function(O,Y,ba){if(this._mapParams.slider){var ha=H("div",{id:this.id+"_zoom_slider"},this.root),
U=v.defaults.map,X=this._getSliderClass(!0),Z=-1!==X.indexOf("Horizontal"),P=this.getNumLevels();if(0<P){var da,ia,xa=this._mapParams.sliderLabels,Ca=!!xa,Fa=!1!==xa;if(Fa){var Ma=Z?"bottomDecoration":"rightDecoration";if(!xa)for(xa=[],U=0;U<P;U++)xa[U]="";n.forEach([{"class":"esriLargeSliderTicks",container:Ma,count:P,dijitClass:Y},{"class":Ca&&"esriLargeSliderLabels",container:Ma,count:P,labels:xa,dijitClass:ba}],function(Ba){var ca=H("div"),ua=Ba.dijitClass;delete Ba.dijitClass;ha.appendChild(ca);
ua===Y?da=new ua(Ba,ca):ia=new ua(Ba,ca)})}O=this._slider=new O({id:ha.id,"class":X,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:P,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},ha);O.startup();Fa&&(da.startup(),ia.startup());this._slider_connect=E(O,"onChange",this,"_onSliderChangeHandler");this._connects.push(E(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(E(O._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{O=
this._slider=new O({id:ha.id,"class":X,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:U.sliderChangeImmediate,style:"height:50px; z-index:30;"},ha);ba=O.domNode.firstChild.childNodes;for(U=1;3>=U;U++)K(ba[U],"visibility","hidden");O.startup();this._slider_connect=E(O,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(E(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}U=O.incrementButton;ba=O.decrementButton;Z?this._addZoomButtonTooltips(U,
ba):this._addZoomButtonTooltips(ba,U);U.style.outline="none";ba.style.outline="none";O.sliderHandle.style.outline="none";O._onKeyPress=function(){};if(Z=O._movable){var Sa=Z.onMouseDown;Z.onMouseDown=function(Ba){9>y("ie")&&1!==Ba.button||Sa.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect);this._slider_connect=E(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=E(this._slider._movable,
"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(O){this._extentUtil({targetLevel:O})},_onSliderMoveEndHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect)},_onSliderChangeHandler:function(O){this.setLevel(O)},_updateSliderValue:function(O,Y){G(this._slider_connect);var ba=this._slider,ha=ba._onChangeActive;ba._onChangeActive=!1;ba.set("value",O);ba._onChangeActive=ha;this._slider_connect=E(ba,"onChange",this,Y)},_onExtentChangeSliderHandler:function(O,
Y,ba,ha){G(this._slidermovestop_connect);this._updateSliderValue(ha.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(O){this._extentUtil({numLevels:0<O?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(O){window.open(v.defaults.map.logoLink,"_blank");r.stop(O)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&
(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(O){if(this.isMapNavigation&&this["is"+O])this.navigationManager["enable"+O]();else this.navigationManager["disable"+O]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(L(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(L(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(K(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(K(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(O){O.graphic||(O.graphic=this.syncHitTestForWebGL(O))}});return z.Map=B})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I,J,L,M,N,O,Y,ba,ha,U,X,Z,P,da,ia,xa,Ca,Fa){function Ma(R,fa){var ma=R.lods;ma.sort(function(La,Ya){return La.scale>Ya.scale?-1:La.scale<Ya.scale?1:0});var wa=[];ma=f.filter(ma,function(La){if(-1===Aa(wa,La.scale))return wa.push(La.scale),!0});var Ea=fa.lods=[],Ha;f.forEach(ma,function(La,Ya){Ha=Ea[Ya]=new P(La);Ha.level=Ya});fa.tileInfo=new Z(T(R,{lods:Ea}))}var Sa,Ba=ha.toMapPoint,ca=ha.toScreenPoint,ua=k.connect,ya=k.disconnect,
ta=r.hitch,pa=h.set,Aa=f.indexOf,T=r.mixin,ea=0,na=C.defaults.map,V=na.layerNamePrefix,Ia=na.graphicsLayerNamePrefix,Ja=new RegExp("^"+V+"(\\d+)$"),Da=new RegExp("^"+Ia+"(\\d+)$"),W=function(){},oa=0,ra=Ca.isWebGLEnabled();c=c([u,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:ra,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(R,fa){fa=fa||{};this.registerConnectEvents();T(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var ma=this.container=l.byId(R),wa=this.id=b.get(ma,"id")||z.getUniqueId(this.declaredClass);g.add(ma,"map");
var Ea=d.getContentBox(ma),Ha=g.add,La=e.create;this.position=new M(0,0);this._reposition();var Ya=this.width=0<Ea.w?Ea.w:na.width,Xa=this.height=0<Ea.h?Ea.h:na.height,Ta=this.root=La("div",{id:wa+"_root",style:{width:Ya+"px",height:Xa+"px",direction:"ltr"}});Ha(Ta,"esriMapContainer");Ea=this.__container=La("div",{id:wa+"_container"},Ta);pa(Ea,"position","absolute");Ha(Ea,"esriMapContainer");ma.appendChild(Ta);ma=this._params=T({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,
showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},fa);this.setWebGLEnabled(null!=ma.webglEnabled?ma.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=ma.maxWebGLContexts?ma.maxWebGLContexts:-1;this.wrapAround180=ma.wrapAround180;this.optimizePanAnimation=ma.optimizePanAnimation;this.setBackgroundColor(ma.backgroundColor);x.isDefined(ma.resizeDelay)&&(this.resizeDelay=ma.resizeDelay);ma.lods&&(Ma({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:ma.lods},ma),this.__tileInfo=ma.tileInfo);this.extent=ma.extent;this._extentUtil({mapCenter:ma.center,targetLevel:ma.zoom,targetScale:ma.scale});this.__visibleRect=new O(0,0,Ya,Xa);this.__visibleDelta=new O(0,0,Ya,Xa);wa=this._layersDiv=La("div",{id:wa+"_layers"});Ha(wa,"esriMapLayers");Ea.appendChild(wa);this._zoomAnimDiv=La("div",{style:{position:"absolute"}});ma.infoWindow?this.infoWindow=ma.infoWindow:(Ha=this.infoWindow=
new Fa(ma.popupOptions,La("div")),Ha.startup(),Ha._ootb=!0,pa(Ha.domNode,"zIndex",40));if(ma.showLabels){var eb=this;D(["./layers/LabelLayer"],function(db){Sa=db;eb._createLabelLayer()});this.on("load",function(){eb._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:ma.showInfoWindowOnClick});this._zoomStartHandler=ta(this,this._zoomStartHandler);this._zoomingHandler=ta(this,this._zoomingHandler);this._zoomEndHandler=ta(this,this._zoomEndHandler);this._panningHandler=
ta(this,this._panningHandler);this._panEndHandler=ta(this,this._panEndHandler);this._endTranslate=ta(this,this._endTranslate);this._timedResize=ta(this,this._timedResize);this._execResize=ta(this,this._execResize);this._processLabelLayers=ta(this,this._processLabelLayers);this._updateLabelLayers=ta(this,this._updateLabelLayers);this.resize=ta(this,this.resize);q.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(R){return D.toAbsMid?D.toAbsMid(R):B.id.replace(/\/[^\/]*$/ig,"/")+R},_cleanUp:function(){var R=
this.infoWindow;R&&(R._ootb&&R.destroy?R.destroy():R.unsetMap(this),delete this.infoWindow);ya(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");e.destroy(this.root);this.root=null},_addLayer:function(R,fa,ma){if(R.id){var wa=R.id.match(R instanceof X?Da:Ja);wa&&wa[1]&&(wa=Number(wa[1]),ea<=wa&&(ea=wa+1))}var Ea=R.id||(R instanceof X?Ia:V)+ea++;R.id=Ea;this._layers[Ea]=R;R._isRefLayer="top"===ma;ma=!x.isDefined(ma)||0>ma||ma>fa.length||"top"===ma?fa.length:ma;var Ha;if(!R._isRefLayer)for(;(Ha=
this.getLayer(fa[ma-1]))&&Ha._isRefLayer;)ma--;if(wa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===ma&&(fa===this.layerIds||fa===this.graphicsLayerIds))this._firstLayerId=Ea;fa.splice(ma,0,Ea);var La=ta(this,this._addLayerHandler),Ya=this;ma=this._connects;Ha=function(){R.loaded?Ya._onLoadFix?(Ya._onLoadFix=!1,setTimeout(function(){La(R)},0)):La(R):(Ya["_"+Ea+"_addtoken_load"]=ua(R,"onLoad",Ya,"_addLayerHandler"),Ya["_"+Ea+"_addtoken_err"]=ua(R,"onError",Ya,function(Xa){La(R,Xa,fa)}))};
this.loaded||wa||R.loaded&&-1===Aa(this.graphicsLayerIds,Ea)?Ha():ma.push(ua(this,"onLoad",Ha));return R},_forgetLayer:function(R){R=R.id;ya(this["_"+R+"_addtoken_load"]);ya(this["_"+R+"_addtoken_err"]);var fa=this._layerAddPromises[R];fa&&(delete this._layerAddPromises[R],fa.cancel())},_addLayerHandler:function(R,fa,ma){fa?this._attachLayerToMap(R,fa,ma):R._prepareToAttach?(this._layerAddPromises[R.id]=R._prepareToAttach(this)).always(r.hitch(this,function(wa){wa&&"cancel"===wa.dojoType||this._attachLayerToMap(R,
null,ma)})):R.declaredClass&&(-1<R.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<R.declaredClass.toLowerCase().indexOf("rasterxlayer")&&R.useWebGL)&&!this.isWebGLContextAvailable()?(fa=Error("Too many WebGL contexts. Unable to add the layer: ",R.url),this._attachLayerToMap(R,fa,this.layerIds)):this._attachLayerToMap(R,fa,ma)},_attachLayerToMap:function(R,fa,ma){var wa=this.id,Ea=R.id,Ha=Aa(R instanceof X?this.graphicsLayerIds:this.layerIds,Ea),La=Ha,Ya=!1,Xa=this._params;this._forgetLayer(R);
if(fa)delete this._layers[Ea],-1!==Ha&&(ma.splice(Ha,1),this.onLayerAddResult(R,fa));else{-1===Ha&&(Ha=Aa(this._internalLayerIds,Ea),La=20+Ha,Ya=!0);if(Ea===this._firstLayerId){fa=R.spatialReference;ma=this.extent&&this.extent.spatialReference;!ma||ma.equals(fa)||!R.tileInfo&&R.url||(ma=null);ma=this.spatialReference=ma||fa;this.wrapAround180=this.wrapAround180&&ma&&ma._isWrappable()?!0:!1;R.tileInfo&&(this.__tileInfo?(fa=this.__tileInfo.lods,this.__tileInfo=T({},R.tileInfo),this.__tileInfo.lods=
fa):(Ma(T({},R.tileInfo),Xa),this.__tileInfo=Xa.tileInfo));if(this.wrapAround180){fa=this.__tileInfo;ma=ma._getInfo();if(!fa||Math.abs(ma.origin[0]-fa.origin.x)>ma.dx)this.wrapAround180=!1;this.wrapAround180&&fa&&E._addFrameInfo(fa,ma)}Xa.units=R.units;if((fa=this.__tileInfo&&this.__tileInfo.lods)&&fa.length){ma=Xa.minScale;Ha=Xa.maxScale;var Ta=-1,eb=-1,db=!1,gb=!1,qb;for(qb=0;qb<fa.length;qb++)0<ma&&!db&&ma>=fa[qb].scale&&(Ta=fa[qb].level,db=!0),0<Ha&&!gb&&Ha>=fa[qb].scale&&(eb=0<qb?fa[qb-1].level:
-1,gb=!0);-1===Xa.minZoom&&(Xa.minZoom=0===ma?fa[0].level:Ta);-1===Xa.maxZoom&&(Xa.maxZoom=0===Ha?fa[fa.length-1].level:eb);for(qb=0;qb<fa.length;qb++)Xa.minZoom===fa[qb].level&&(Xa.minScale=fa[qb].scale,this._minResolution=fa[qb].resolution),Xa.maxZoom===fa[qb].level&&(Xa.maxScale=fa[qb].scale,this._maxResolution=fa[qb].resolution)}else Xa.minZoom=Xa.maxZoom=Xa.zoom=-1}R instanceof X?(this._gc||(this._gc=new X._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=wa+"_gc"),this._attachGraphicsLayer(R).id=
wa+"_"+Ea):(La=R._setMap(this,this._layersDiv,La,this.__LOD),La.id=wa+"_"+Ea,this._layerDivs[Ea]=La,this._reorderLayers(this.layerIds),Ya||-1===R.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(R));Ea===this._firstLayerId&&(this.graphics=new X({id:wa+"_graphics",displayOnPan:Xa.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(R===this.graphics){ma=this._layers[this._firstLayerId];wa=Xa.zoom;La=Xa.scale;fa=Xa.center;ma=ma.initialExtent||ma.fullExtent;this._firstLayerId=
null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&ma&&(fa&&(fa=this._convertGeometry(ma,fa)),fa&&(ma=ma.centerAt(fa),fa=null));if(fa=this.extent||ma&&new N(ma.toJson()))-1<wa?fa=this.__getExtentForLevel(wa,null,fa).extent:0<La&&(fa=ba.getExtentForScale(this,La,fa));if(!fa)return;Xa=this._fixExtent(fa,Xa.fitExtent);this.extent=Xa.extent;this.__LOD=Xa.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Ya||
(this.onLayerAdd(R),this.onLayerAddResult(R));ya(this[Ea+"_addLayerHandler_connect"])}},_convertGeometry:function(R,fa){var ma=R&&R.spatialReference,wa=fa&&fa.spatialReference;ma&&wa&&!ma.equals(wa)&&(ma._canProject(wa)?ma.isWebMercator()?fa=U.geographicToWebMercator(fa):4326===ma.wkid&&(fa=U.webMercatorToGeographic(fa,!0)):fa=null);return fa},_attachGraphicsLayer:function(R){var fa=R.id;R=R._setMap(this,this._gc._surface);this._layerDivs[fa]=R;this._reorderLayers(this.graphicsLayerIds);return R},
_detachGraphicsLayer:function(R){R.loaded&&R.getMap()&&R._unsetMap(this,this._gc._surface)},_reorderLayers:function(R){var fa=this.onLayerReorder,ma=e.place,wa=this._layerDivs,Ea=this._layers,Ha=this._gc?this._gc._surface.getEventSource():null;if(R===this.graphicsLayerIds)f.forEach(R,function(eb,db){var gb=wa[eb],qb=Ea[eb];gb&&(this._gc._reorderLayer(qb,gb,db),fa(qb,db))},this);else{var La=this.graphics,Ya=La?La.id:null,Xa=this._layersDiv,Ta;f.forEach(R,function(eb,db){Ta=wa[eb];eb!==Ya&&Ta&&(ma(Ta,
Xa,db),fa(Ea[eb],db))});this._mapImageLyr&&this._placeMapImageLyr();Ha&&(Ha=9>t("ie")?Ha.parentNode:Ha,ma(Ha,Ha.parentNode,"last"))}this.onLayersReordered([].concat(R))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(R){var fa=parseFloat(R.left),ma=parseFloat(R.top);R=new N(fa,ma-parseFloat(R.height),fa+parseFloat(R.width),ma,this.spatialReference);fa=this.extent.getWidth()/R.getWidth();this.__zoom(R,fa,this._zoomAnimDiv.anchor)},
_zoomEndHandler:function(){var R=this._zoomAnimDiv,fa=R.extent,ma=this.extent.getWidth()/fa.getWidth(),wa=R.anchor,Ea=R.newLod,Ha=R.levelChange;R.extent=R.anchor=R.levelChange=R.startingExtent=R.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(fa,ma,wa,Ea,Ha)},_panningHandler:function(R){if(isNaN(parseFloat(R.left))||isNaN(parseFloat(R.top))){var fa=Math.round,ma=this._panAnim.node;R.left=-1*(this._delta.x-fa(this.width/2))+"px";R.top=-1*(this._delta.y-fa(this.height/2))+"px";h.set(ma,"left",
R.left);h.set(ma,"top",R.top)}R=new M(parseFloat(R.left),parseFloat(R.top));fa=this.toMap(R);this.onPan(this.extent.offset(this.extent.xmin-fa.x,this.extent.ymax-fa.y),R)},_panEndHandler:function(R){this.__panning=!1;var fa=Math.round;R=new M(-fa(parseFloat(R.style.left)),-fa(parseFloat(R.style.top)));fa=R.x;var ma=R.y,wa=this.__visibleRect,Ea=this.__visibleDelta;wa.x+=-fa;wa.y+=-ma;Ea.x+=-fa;Ea.y+=-ma;pa(this._zoomAnimDiv,{left:"0px",top:"0px"});wa=this.extent;Ea=this._ratioW;var Ha=this._ratioH;
wa=new N(wa.xmin+fa/Ea,wa.ymin-ma/Ha,wa.xmax+fa/Ea,wa.ymax-ma/Ha,this.spatialReference);R.setX(-R.x);R.setY(-R.y);this._delta=this._panAnim=null;this._updateExtent(wa);this.onPanEnd(wa,R);this._fireExtChg([wa,R,!1,this.__LOD])},_fixExtent:function(R,fa){for(var ma=this._reshapeExtent(R),wa=1.25;!0===fa&&(ma.extent.getWidth()<R.getWidth()||ma.extent.getHeight()<R.getHeight())&&0<ma.lod.level&&3>=wa;)ma=this._reshapeExtent(R.expand(wa)),wa+=.25;return ma},_getFrameWidth:function(){var R=-1,fa=this.spatialReference._getInfo();
this.__LOD?(fa=this.__LOD._frameInfo)&&(R=fa[3]):fa&&(R=Math.round(2*fa.valid[1]/(this.extent.getWidth()/this.width)));return R},_fixAspectRatio:function(R){var fa=R.getWidth(),ma=R.getHeight(),wa=fa/ma,Ea=this.width/this.height,Ha=0,La=0;this.width>this.height?fa>ma?Ea>wa?Ha=ma*Ea-fa:La=fa/Ea-ma:Ha=ma*Ea-fa:this.width<this.height?fa<ma?Ea>wa?Ha=ma*Ea-fa:La=fa/Ea-ma:La=fa/Ea-ma:fa<ma?Ha=ma-fa:fa>ma&&(La=fa/Ea-ma);Ha&&(R.xmin-=Ha/2,R.xmax+=Ha/2);La&&(R.ymin-=La/2,R.ymax+=La/2);return R},_reshapeExtent:function(R){R=
this._fixAspectRatio(R);return this._getAdjustedExtent(R)},_getAdjustedExtent:function(R){if(this.__tileInfo)return E.getCandidateTileInfo(this,this.__tileInfo,R);var fa=ba.getScale(this,R),ma=this.getMinScale(),wa=this.getMaxScale();!ma||fa<=ma?!wa||fa>=wa||(R=ba.getExtentForScale(this,wa,R)):R=ba.getExtentForScale(this,ma,R);return{extent:R}},_onBingLayerAdd:function(R){this["__"+R.id+"_vis_connect"]=k.connect(R,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(R.visible)},_onBingLayerRemove:function(R){k.disconnect(this["__"+
R.id+"_vis_connect"]);delete this["__"+R.id+"_vis_connect"];var fa=f.some(this.layerIds,function(ma){return(R=this._layers[ma])&&R.visible&&-1!==R.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(fa)},_toggleBingLogo:function(R){R&&!this._bingLogo?(R={left:this._mapParams&&this._mapParams.nav?"25px":""},6===t("ie")&&(R.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+D.toUrl("./images/map/bing-logo-lg.png")+"')"),R=this._bingLogo=
e.create("div",{style:R},this.root),g.add(R,"bingLogo-lg")):!R&&this._bingLogo&&(e.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(R,fa){var ma=this._zoomAnim,wa=this._panAnim;if(ma&&ma._active)ma.stop(),ma._fire("onEnd",[ma.node]);else if(wa&&wa._active){wa.stop();this._panAnim=null;wa=wa.curve.getValue(wa._getStep());ma=Math.round(parseFloat(wa.left));wa=Math.round(parseFloat(wa.top));var Ea=this.navigationManager._dragOrigin;this.__pan(ma,wa);Ea&&(Ea.x-=ma,Ea.y-=wa);return}this.__panning=
!0;this.onPanStart(this.extent,new M(R,fa))},__pan:function(R,fa){var ma=this.extent,wa=this._ratioW,Ea=this._ratioH;this.onPan(new N(ma.xmin-R/wa,ma.ymin+fa/Ea,ma.xmax-R/wa,ma.ymax+fa/Ea,this.spatialReference),new M(R,fa))},__panEnd:function(R,fa){var ma=this.__visibleRect,wa=this.__visibleDelta;ma.x+=R;ma.y+=fa;wa.x+=R;wa.y+=fa;ma=new M(R,fa);wa=this.extent;var Ea=this._ratioW,Ha=this._ratioH;wa=new N(wa.xmin-R/Ea,wa.ymin+fa/Ha,wa.xmax-R/Ea,wa.ymax+fa/Ha,this.spatialReference);this.__panning=!1;
this._updateExtent(wa);this.onPanEnd(wa,ma);this._fireExtChg([wa,ma,!1,this.__LOD])},__zoomStart:function(R,fa){this.__zooming=!0;this.onZoomStart(R,1,fa,this.__LOD?this.__LOD.level:null)},__zoom:function(R,fa,ma){this.onZoom(R,fa,ma)},__zoomEnd:function(R,fa,ma,wa,Ea){pa(this._layersDiv,{left:"0px",top:"0px"});this._delta=new M(0,0);this.__visibleRect.x=this.__visibleRect.y=0;R=new N(R);this.__LOD=wa;this._ratioW=this.width/R.getWidth();this._ratioH=this.height/R.getHeight();var Ha=this._delta;this._delta=
null;this.__zooming=!1;this._updateExtent(R,Ea);this.onZoomEnd(R,fa,ma,wa?wa.level:null);this._fireExtChg([R,Ha,Ea,wa])},_extentUtil:function(R,fa,ma,wa,Ea){var Ha=new n,La=this.width,Ya=this.height;if(R){var Xa=R.numLevels;var Ta=R.targetLevel;var eb=x.isDefined(Ta);var db=R.factor;var gb=R.mapAnchor;var qb=R.screenAnchor;var sb=R.mapCenter;var tb=R.levelOrFactor;var Cb=R.targetScale;var Gb=x.isDefined(Cb)&&0<Cb}if(fa){var nb=fa.dx;var Ab=fa.dy;sb=fa.mapCenter}r.isArray(sb)&&(sb=new L(sb));var Ub=
this._panAnim;fa=(R=this._stopAnim())?R.divExtent:this.extent;var Zb=this.__tileInfo,Nb=this._params;if(!this.loaded){if(ma)fa&&(ma=this._convertGeometry(fa,ma)),ma&&(this.extent=ma,Nb.zoom=Nb.scale=-1,Nb.center=null);else if(sb||eb||Gb){if(sb)if(fa){if(sb=this._convertGeometry(fa,sb))this.extent=fa.centerAt(sb),Nb.center=null}else Nb.center=sb;eb&&-1<Ta?(Nb.zoom=Ta,Nb.scale=-1):Gb&&(Nb.scale=Cb,Nb.zoom=-1)}Ha.resolve();return Ha}if(sb&&(sb=this._convertGeometry(this,sb),!sb)||gb&&(gb=this._convertGeometry(this,
gb),!gb)||ma&&(ma=this._convertGeometry(this,ma),!ma))return Ha.reject(),Ha;Ub&&gb&&qb&&(gb=Ba(this.extent,La,Ya,qb));R&&gb&&qb&&(gb=Ba(R.divExtent,La,Ya,qb));if(eb)if(Zb)Xa=this.getMinZoom(),eb=this.getMaxZoom(),Ta<Xa?Ta=Xa:Ta>eb&&(Ta=eb),Xa=Ta-(R?R.level:this.getLevel());else{Xa=0<Ta?-1:1;var yb=tb?Ta:null}if(!ma)if(x.isDefined(Xa))Zb?(La=R?R.level:this.getLevel(),La=this.__getExtentForLevel(La+Xa,sb,fa).extent):(La=(R?R.end:this.extent).expand(yb||(0<Xa?.5*Xa:2*-Xa)),yb&&sb&&(La=La.centerAt(sb))),
La&&(sb?ma=La:(nb=gb||fa.getCenter(),Ya=La.getWidth(),Ab=La.getHeight(),La=nb.x>=fa.xmin&&nb.x<=fa.xmax?(nb.x-fa.xmin)/fa.getWidth():.5,ma=nb.y>=fa.ymin&&nb.y<=fa.ymax?(nb.y-fa.ymin)/fa.getHeight():.5,La=nb.x-La*Ya,nb=nb.y-ma*Ab,ma=new N(La,nb,La+Ya,nb+Ab,this.spatialReference)));else if(Gb)ma=ba.getExtentForScale(this,Cb,fa);else if(x.isDefined(db))ma=fa.expand(db);else if(nb||Ab)R?(ma=R.end,gb=ma.getCenter(),yb=ca(ma,La,Ya,gb),yb.x+=nb,yb.y+=Ab,yb=Ba(ma,La,Ya,yb),ma=ma.offset(yb.x-gb.x,yb.y-gb.y)):
(nb=new M(La/2+nb,Ya/2+Ab),nb=Ba(fa,La,Ya,nb),Ya=fa.getWidth(),Ab=fa.getHeight(),La=nb.x-Ya/2,nb=nb.y-Ab/2,ma=new N(La,nb,La+Ya,nb+Ab,this.spatialReference));ma||(sb?(fa=R?R.end:fa,Ya=fa.getWidth(),Ab=fa.getHeight(),La=sb.x-Ya/2,nb=sb.y-Ab/2,ma=new N(La,nb,La+Ya,nb+Ab,this.spatialReference)):R&&(ma=R.end));ma?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,W),this._extentDfd.reject()),this._extentDfd=Ha,this.__setExtent(ma,null,qb,wa,R,Ea)):Ha.reject();return Ha},__setExtent:function(R,
fa,ma,wa,Ea,Ha){try{if(this._firstLayerId)this.extent=R;else{var La=!0,Ya=this.spatialReference,Xa=Ea?Ea.divExtent:this.extent,Ta=this._fixExtent(R,wa||!1);R=Ta.extent;var eb=R.getWidth(),db=R.getHeight(),gb=Math.round;if(Xa){var qb=gb(1E6*Xa.getWidth()),sb=gb(1E6*eb),tb=gb(1E6*Xa.getHeight()),Cb=gb(1E6*db);La=qb!==sb||tb!==Cb}var Gb,nb=Ea&&Ea.rect,Ab=Ea&&Ea.divExtent;if(na.zoomDuration&&La&&Xa){Ab=Ab||new N(Xa);nb=nb||{left:Xa.xmin,top:Xa.ymax,width:Xa.getWidth(),height:Xa.getHeight()};var Ub={left:R.xmin,
top:R.ymax,width:eb,height:db};var Zb=new L(R.xmin,R.ymax,Ya),Nb=new L(R.xmin,R.ymin,Ya),yb=new L(this.extent.xmin,this.extent.ymax,Ya),uc=new L(this.extent.xmin,this.extent.ymin,Ya);(Gb=Y.getLineIntersection(yb,Zb,uc,Nb,Ya))||Ea||(La=!1)}this._ratioW=this.width/eb;this._ratioH=this.height/db;var Ib=this._zoomAnimDiv;if(La)if(pa(this._layersDiv,{left:"0px",top:"0px"}),fa=new M(0,0),this.__visibleRect.x=this.__visibleRect.y=0,nb&&Ub){this._delta=fa;Ib.id="_zAD";Ib.startingExtent=Ab;Ib.extent=R;Ib.levelChange=
La;Ib.newLod=Ta.lod;Ib.anchor=ma?ma:!Gb&&Ea?Ea.anchor:ca(this.extent,this.width,this.height,Gb);var bc=this.extent.getWidth()/R.getWidth();na.zoomAnimationThrottled&&1024<(1>bc?1/bc:bc)?(this.__zoomStart(Ab,Ib.anchor),this.__zoom(Ab,1,Ib.anchor),this._fireOnScale(1,Ib.anchor,!0),this.__zoomEnd(R,bc,Ib.anchor,Ta.lod,La)):(this._zoomAnim=w.resize({node:Ib,start:nb,end:Ub,duration:na.zoomDuration,rate:na.zoomRate,beforeBegin:Ea?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(bc,Ib.anchor,Ha))}else this._updateExtent(R,La,Ha),this._fireExtChg([this.extent,fa,La,this.__LOD=Ta.lod]);else if(!this.__panning)if(!1===this.loaded||Ha)this._updateExtent(R,La,Ha),this._fireExtChg([this.extent,fa,La,this.__LOD=Ta.lod]);else{this.__panning=!0;nb=(new O(0,0,this.width,this.height,this.spatialReference)).getCenter();nb.x=gb(nb.x);nb.y=gb(nb.y);var ic=this._delta=this.toScreen(R.getCenter()),Xb=Math.abs(nb.x-ic.x),vc=Math.abs(nb.y-ic.y);this.optimizePanAnimation&&
(Xb>2*this.width||vc>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(R,!1,Ha),this.onPanEnd(this.extent,new M(0,0)),this._fireExtChg([this.extent,new M(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new M(0,0)),this._panAnim=w.slideTo({node:Ib,left:nb.x-ic.x,top:nb.y-ic.y,duration:na.panDuration,rate:na.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(jc){}},_fireOnScale:function(R,fa,ma){if("css-transforms"===this.navigationMode){var wa=this.__visibleDelta;this.onScale(v.scaleAt(R,{x:-1*(this.width/2-(fa.x-wa.x)),y:-1*(this.height/2-(fa.y-wa.y))}),ma)}},_stopAnim:function(){var R=this._zoomAnim,fa=this._panAnim;if(R&&R._active){R.stop();fa=R.curve.getValue(R._getStep());var ma=parseFloat(fa.left),wa=parseFloat(fa.top);R=R.node;return{anchor:R.anchor,start:R.startingExtent,end:R.extent,level:R.newLod&&R.newLod.level,
rect:fa,divExtent:new N(ma,wa-parseFloat(fa.height),ma+parseFloat(fa.width),wa,this.spatialReference)}}fa&&fa._active&&(fa.stop(),fa._fire("onEnd",[fa.node]))},__getExtentForLevel:function(R,fa,ma){var wa=this.__tileInfo;wa=wa&&wa.lods;R=x.isDefined(R)?R:0;ma=ma||this.extent;fa=fa||ma&&ma.getCenter();if(wa){if(fa){ma=this.getMinZoom();var Ea=this.getMaxZoom();R>Ea&&(R=Ea);R<ma&&(R=ma);R=wa[R];wa=this.width*R.resolution/2;ma=this.height*R.resolution/2;return{extent:new N(fa.x-wa,fa.y-ma,fa.x+wa,fa.y+
ma,fa.spatialReference),lod:R}}}else return ma?{extent:ma.expand(!R||1>R?1:R).centerAt(fa)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var R=--this._jobs;R?0>R&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(R,fa){this[R]&&this[R].apply(this,fa)},_updateExtent:function(R,fa,ma){this.extent=R;R=this.spatialReference;this._viewInfo={view:new J({viewingMode:"map",
scale:this.getScale()}),sr:R,version:fa?++oa:oa};(fa||ma)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var R=this.spatialReference;R&&(R.isWebMercator()?this.geographicExtent=U.webMercatorToGeographic(this._getAvailExtent(),!0):4326===R.wkid&&(this.geographicExtent=new N(this._getAvailExtent().toJson())))},_fireExtChg:function(R){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",R);if(R=this._extentDfd)delete this._extentDfd,
R.resolve()},attr:function(R,fa){var ma=this.container;ma&&(null==fa?ma.removeAttribute(R):ma.setAttribute(R,fa));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(R,fa,ma){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},
onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),
this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(R){pa(this.__container,"cursor",this.cursor=R)},setMapCursor:function(R){this.setCursor(this._cursor=R)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(R){R&&!R.declaredClass&&(R=new K(R));this.backgroundColor=R||null;var fa="";R&&(fa=9>t("ie")?R.toHex():"rgba("+R.toRgba().join(",")+")");h.set(this.root,{backgroundColor:fa})},setInfoWindow:function(R){var fa=this.infoWindow;
fa&&fa.unsetMap(this);this.infoWindow=R;this.loaded&&R&&R.setMap(this)},setInfoWindowOnClick:function(R){this._params.showInfoWindowOnClick=R;this.popupManager&&this.popupManager.set("enabled",R)},getInfoWindowAnchor:function(R){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(R)||"upperright"},toScreen:function(R,fa){return ca(this.extent,this.width,this.height,R,fa)},toMap:function(R){return Ba(this.extent,this.width,this.height,R)},addLayer:function(R,fa){R&&!this.getLayer(R.id)&&
this._addLayer(R,R instanceof X?this.graphicsLayerIds:this.layerIds,fa);return R},addLayers:function(R){var fa=[],ma=R.length,wa,Ea=R.length;var Ha=k.connect(this,"onLayerAddResult",function(La,Ya){-1!==f.indexOf(R,La)&&(ma--,fa.push({layer:La,success:!Ya,error:Ya}),ma||(k.disconnect(Ha),this.onLayersAddResult(fa)))});for(wa=0;wa<Ea;wa++)this.addLayer(R[wa]);return this},removeLayer:function(R,fa){var ma=R.id,wa=R instanceof X?this.graphicsLayerIds:this.layerIds,Ea=Aa(wa,ma);0<=Ea&&(this._forgetLayer(R),
wa.splice(Ea,1),this.loaded||this._firstLayerId!==ma||(this._firstLayerId=null),R instanceof X?this._detachGraphicsLayer(R):R.loaded&&(R.getMap()&&R._unsetMap(this,this._layersDiv),-1!==R.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(R)),delete this._layers[ma],delete this._layerDivs[ma],fa||this._reorderLayers(wa),this.onLayerRemove(R))},removeAllLayers:function(){var R=this.layerIds,fa;for(fa=R.length-1;0<=fa;fa--)this.removeLayer(this._layers[R[fa]],1);R=this.graphicsLayerIds;
for(fa=R.length-1;0<=fa;fa--)this.removeLayer(this._layers[R[fa]],1);this.onLayersRemoved()},reorderLayer:function(R,fa){r.isString(R)&&(a.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),R=this.getLayer(R));var ma=R.id,wa=R instanceof X?this.graphicsLayerIds:this.layerIds;0>fa?fa=0:fa>=wa.length&&(fa=wa.length-1);var Ea=Aa(wa,ma);-1!==Ea&&Ea!==fa&&(wa.splice(Ea,1),wa.splice(fa,0,ma),
this._reorderLayers(wa))},getLayer:function(R){return this._layers[R]},setWebGLEnabled:function(R){var fa=this.webglEnabled;this.webglEnabled=(R||!1)&&ra;if(fa!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return Ca.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(R){return-1!==f.indexOf(this._webglContextOwners,R)},acquireWebGLContext:function(R){return-1!==
f.indexOf(this._webglContextOwners,R)?!0:this.isWebGLContextAvailable()?(Ca.acquireContext(R),this._webglContextOwners.push(R),!0):!1},releaseWebGLContext:function(R){var fa=f.indexOf(this._webglContextOwners,R);-1!==fa&&this._webglContextOwners.splice(fa,1);Ca.releaseContext(R)},releaseAllWebGLContexts:function(){var R=this._webglContextOwners.slice(0);f.forEach(R,function(fa){this.releaseWebGLContext(fa)},this)},syncHitTestForWebGL:function(R){var fa,ma=R.screenPoint;R=this.graphicsLayerIds.slice(0).reverse();
f.some(R,function(wa){wa=this.getLayer(wa);wa.loaded&&!wa.suspended&&wa.hasWebGLSurface()&&(fa=wa._div.syncHitTest(ma.x,ma.y));return!!fa},this);return fa},setExtent:function(R,fa){R=new N(R.toJson());var ma=R.getWidth(),wa=R.getHeight();return 0===ma&&0===wa?this.centerAt(new L({x:R.xmin,y:R.ymin,spatialReference:R.spatialReference&&R.spatialReference.toJson()})):this._extentUtil(null,null,R,fa)},getTargetExtent:function(R){if(R)return R=new N(R.toJson()),0!==R.getWidth()&&0!==R.getHeight()&&(R=
(R=this._convertGeometry(this,R))&&this._fixExtent(R).extent),R},centerAt:function(R){return this._extentUtil(null,{mapCenter:R})},centerAndZoom:function(R,fa){return this._extentUtil({targetLevel:fa,mapCenter:R,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:ba.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*ba.getUnitValueForSR(this.spatialReference)},
getResolutionForPopup:function(){var R=this.getResolution(),fa=this.getResolutionInMeters(),ma=fa/16;return 10>=ma?0:R/fa*ma},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(R){return this._extentUtil({targetScale:R})},getLayersVisibleAtScale:function(R){var fa=[];(R=
R||this.getScale())&&f.forEach(this.layerIds.concat(this.graphicsLayerIds),function(ma){ma=this.getLayer(ma);ma.isVisibleAtScale(R)&&fa.push(ma)},this);return fa},getNumLevels:function(){var R=this.getMinZoom(),fa=this.getMaxZoom();return R===fa&&0>R?0:fa-R+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(R){if(-1<R)return this._extentUtil({targetLevel:R})},getZoom:function(){return this.getLevel()},setZoom:function(R){return this.setLevel(R)},getMinZoom:function(){return this._params.minZoom},
getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(R){if(r.isObject(R)){var fa=R;R=fa.title}else fa=F&&F[R];if(fa){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var ma=[],wa=0;f.forEach(fa.baseMapLayers||fa.layers,function(Ha){var La={id:Ha.id,displayLevels:Ha.displayLevels,opacity:x.isDefined(Ha.opacity)?Ha.opacity:null,visible:x.isDefined(Ha.visibility)?Ha.visibility:null};if(La=this._createBaseLayerInstance(Ha,La,R))ma.push(La),Ha.isReference||
wa++},this);ma.length&&wa&&(this._basemapDfd=I(ma).otherwise(ta(this,function(Ha){this._basemapPending=!1;Ha&&"cancel"===Ha.dojoType&&f.forEach(ma,function(La){La.cancel()});throw Ha;})).then(function(Ha){var La=[],Ya=[];f.forEach(Ha,function(Xa){Xa&&(Xa.layerInfo&&La.push(Xa.layerInfo),Xa.layer&&Ya.push(Xa.layer))});return{basemapName:R,infos:La,layers:Ya}}).then(ta(this,this._waitForBaseLayers)).then(ta(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{fa=
[];for(var Ea in F)fa.push(Ea)}},_createBaseLayerInstance:function(R,fa,ma){var wa=new n;if(R.type)switch(R.type){case "OpenStreetMap":wa.resolve({layerInfo:R,layer:new xa(fa)});break;case "VectorTile":D(["./layers/VectorTileLayer"],function(Ha){Ea=G.normalize(R.url);wa.promise.isFulfilled()||wa.resolve({layerInfo:R,layer:new Ha(Ea,fa)})});break;default:return null}else{var Ea=G.normalize(R.url);wa.resolve({layerInfo:R,layer:new da(Ea,fa)})}return wa.promise},_waitForBaseLayers:function(R){var fa=
new n(A._dfdCanceller);fa.promise.otherwise(function(wa){if(wa&&"cancel"===wa.dojoType){for(var Ea in fa._layerEvents)wa=fa._layerEvents[Ea],k.disconnect(wa[0]),k.disconnect(wa[1]);delete fa._layerEvents}});if(!this.loaded)return fa.resolve(R),fa.promise;var ma=function(wa){fa._pendingLayers--;wa=f.indexOf(R.layers,this);-1<wa&&(wa=fa._layerEvents[wa])&&(k.disconnect(wa[0]),k.disconnect(wa[1]));0>=fa._pendingLayers&&(delete fa._layerEvents,fa.isFulfilled()||fa.resolve(R))};fa._pendingLayers=0;fa._layerEvents=
{};f.forEach(R.layers,function(wa,Ea){wa&&fa._pendingLayers++});f.forEach(R.layers,function(wa,Ea){wa&&(wa.loaded?ma(wa):fa._layerEvents[Ea]=[k.connect(wa,"onLoad",wa,ma),k.connect(wa,"onError",wa,ma)])});return fa.promise},_setBasemap:function(R){var fa=R.layers,ma=R.infos,wa=0,Ea=!0;this._basemapPending=!1;this.loaded&&(f.forEach(fa,function(La,Ya){La.loaded&&(ma[Ya].isReference||wa++)}),Ea=wa);if(Ea){if(Ea=this._getBasemapLayerIds()){var Ha={basemapName:this._basemap,infos:F&&F[this._basemap]&&
F[this._basemap].baseMapLayers};Ha.basemapName||(f.forEach(Ea,function(La){if(this.getLayer(La)instanceof xa)return Ha.basemapName="osm",Ha.infos=F&&F.osm&&F.osm.baseMapLayers,!1},this),Ha.basemapName||(Ha=null))}this._removeBasemap(Ea);this._basemap=R.basemapName;this.basemapLayerIds=this._addBasemapLayers(fa,ma);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:R,previous:Ha})}},_getBasemapLayerIds:function(){var R=[];f.forEach(this.layerIds,function(fa){fa=this.getLayer(fa);
fa._basemapGalleryLayerType&&R.push(fa.id)},this);return R},_addBasemapLayers:function(R,fa){var ma=[],wa=[],Ea=0;f.forEach(R,function(Ha,La){fa[La].isReference?ma.push(Ha):(Ha._basemapGalleryLayerType="basemap",this.addLayer(Ha,Ea++),wa.push(Ha.id))},this);ma.length&&f.forEach(ma,function(Ha){Ha.attr("data-reference",!0);Ha._basemapGalleryLayerType="reference";this.addLayer(Ha,"top");wa.push(Ha.id)},this);return wa},_removeBasemap:function(R){f.forEach(R,function(fa){(fa=this.getLayer(fa))&&this.removeLayer(fa)},
this)},getBasemap:function(){return this._basemap||""},translate:function(R,fa){R=R||0;fa=fa||0;if(!this._txTimer){this._tx=this._ty=0;var ma=this.toScreen(this.extent.getCenter());this.__panStart(ma.x,ma.y)}this._tx+=R;this._ty+=fa;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var R=this._tx,fa=this._ty;this._tx=this._ty=0;this.__panEnd(R,fa)},setTimeExtent:function(R){R=
(this.timeExtent=R)?new R.constructor(R.toJson()):null;this.onTimeExtentChange(R)},setTimeSlider:function(R){this.timeSlider&&(ya(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);R&&(this.timeSlider=R,this.setTimeExtent(R.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=ua(R,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(R){if(this.visible!==R){this.visible=R;R||(this._display=this.container.style.display);this.container.style.display=
R?this._display:"none";if(this.autoResize){var fa=R?"resume":"pause";this._rszSignal[fa]();this._oriSignal[fa]()}R&&this.resize()}return this},resize:function(R){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===R?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();
this.autoResize&&this._startResizeTimer()},_resize:function(){var R=this.width,fa=this.height,ma=h.get(this.container,"display"),wa=d.getContentBox(this.container);if(!("none"===ma||0>=wa.w||0>=wa.h||R===wa.w&&fa===wa.h)){if(ma=this._zoomAnim||this._panAnim)ma.stop(),ma._fire("onEnd",[ma.node]);pa(this.root,{width:(this.width=wa.w)+"px",height:(this.height=wa.h)+"px"});wa=this.width;ma=this.height;this.attribution&&this.attribution.domNode&&h.set(this.attribution.domNode,"maxWidth",Math.floor(wa*
this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,wa,ma);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,wa,ma);var Ea=new O(this.extent);R=(new O(Ea.x,Ea.y,wa/R*Ea.width,ma/fa*Ea.height,this.spatialReference)).getExtent();this.onResize(R,wa,ma);this._extentUtil(null,null,R,null,!0)}},reposition:function(){var R=this.position,fa=R.x,ma=R.y;this._reposition();R=this.position;if(fa!==R.x||ma!==R.y)this.onReposition(R.x,
R.y)},_reposition:function(){var R=d.position(this.container,!0),fa=d.getPadBorderExtents(this.container);this.position.update(R.x+fa.l,R.y+fa.t)},_setClipRect:function(){delete this._clip;var R=7>=t("ie")||void 0===t("ie")&&7<=t("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var fa=this.width,ma=this.height,wa=this._getFrameWidth(),Ea=fa-wa;0<Ea&&(R=Ea/2,R="rect(0px,"+(R+wa)+"px,"+ma+"px,"+R+"px)",ma=this.extent.getWidth(),fa=wa/fa*ma,this._clip=[(ma-fa)/2,fa])}pa(this.__container,
"clip",R)},_getAvailExtent:function(){var R=this.extent,fa=this._clip;if(fa){if(!R._clip){var ma=new O(R);ma.width=fa[1];ma.x+=fa[0];R._clip=ma.getExtent()}return R._clip}return R},_fixedPan:function(R,fa){return this._extentUtil(null,{dx:R,dy:fa})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*
this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(R){R=R||{};if("esri.SnappingManager"===R.declaredClass)this.snappingManager=R;else{var fa=ea++,ma=this;this._rids&&this._rids.push(fa);D(["./SnappingManager"],function(wa){var Ea=
ma._rids?f.indexOf(ma._rids,fa):-1;-1!==Ea&&(ma._rids.splice(Ea,1),ma.snappingManager=new wa(r.mixin({map:ma},R)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&Sa&&this.loaded&&(this._labels=new Sa({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==
this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),f.forEach(this.graphicsLayerIds,function(R){R=this.getLayer(R);"function"===typeof R.applyEdits?this._labels.addFeatureLayer(R):"esri.layers.WFSLayer"===R.declaredClass&&this._labels.addFeatureLayer(R)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ia,this._mapImageLyr._setMap(this,
this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var R=this.layerIds,fa=this._layerDivs,ma=!1,wa,Ea,Ha=R.length-1;0<=Ha;Ha--)if(wa=R[Ha],Ea=this.getLayer(wa),wa=fa[wa],Ea&&wa&&!Ea._isReference){e.place(this._mapImageLyr._div,wa,"after");ma=!0;break}ma||e.place(this._mapImageLyr._div,this._layersDiv,"first")}});return y._CoreMap=c})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(D,B,a,c){D={streets:{title:c.basemaps.streets,
thumbnailUrl:D.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:c.basemaps.satellite,thumbnailUrl:D.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:c.basemaps.hybrid,thumbnailUrl:D.toUrl("./images/basemap/hybrid.jpg"),
itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:c.basemaps.terrain,thumbnailUrl:D.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:c.basemaps.topo,thumbnailUrl:D.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:c.basemaps.gray,thumbnailUrl:D.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:c.basemaps["dark-gray"],thumbnailUrl:D.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},
oceans:{title:c.basemaps.oceans,thumbnailUrl:D.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:c.basemaps["national-geographic"],thumbnailUrl:D.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:c.basemaps.osm,thumbnailUrl:D.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:c.basemaps["dark-gray"],thumbnailUrl:D.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
type:"VectorTile"}]},"gray-vector":{title:c.basemaps.gray,thumbnailUrl:D.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:c.basemaps.streets,thumbnailUrl:D.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",
type:"VectorTile"}]},"topo-vector":{title:c.basemaps.topo,thumbnailUrl:D.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:c.basemaps["streets-night-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-night.jpg"),
itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:c.basemaps["streets-relief-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},
"streets-navigation-vector":{title:c.basemaps["streets-navigation-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}};return a.basemaps=D})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(D,B,a,c,k,n,r,f,m){f={animateRange:function(q){var l=q.range;return new B.Animation(a.mixin({curve:new B._Line(l.start,l.end)},q))},resize:function(q){var l=q.node=c.byId(q.node),b=q.start,g=q.end;b||(b=k.getMarginBox(l),l=k.getPadBorderExtents(l),b=q.start={left:b.l+l.l,top:b.t+l.t,width:b.w-l.w,height:b.h-l.h});g||(g=q.anchor?q.anchor:{x:b.left,y:b.top},l=q.size,g=q.end={left:b.left-(l.width-b.width)*(g.x-b.left)/b.width,top:b.top-(l.height-b.height)*(g.y-b.top)/b.height,width:l.width,
height:l.height});return B.animateProperty(a.mixin({properties:{left:{start:b.left,end:g.left},top:{start:b.top,end:g.top},width:{start:b.width,end:g.width},height:{start:b.height,end:g.height}}},q))},slideTo:function(q){var l=q.node=c.byId(q.node),b=n.getComputedStyle,g=null,e=null,d=function(){return function(){var h="absolute"==l.style.position?"absolute":"relative";g="absolute"==h?l.offsetTop:parseInt(b(l).top)||0;e="absolute"==h?l.offsetLeft:parseInt(b(l).left)||0;"absolute"!=h&&"relative"!=
h&&(h=k.position(l,!0),g=h.y,e=h.x,l.style.position="absolute",l.style.top=g+"px",l.style.left=e+"px")}}();d();q=B.animateProperty(a.mixin({properties:{top:{start:g,end:q.top||0},left:{start:e,end:q.left||0}}},q));D.connect(q,"beforeBegin",q,d);return q},flash:function(q){q=a.mixin({end:"#f00",duration:500,count:1},q);q.duration/=2*q.count;var l=c.byId(q.node),b=q.start;b||(b=n.getComputedStyle(l).backgroundColor);var g=q.end,e=[],d=q.count;l={node:l,duration:q.duration};for(q=0;q<d;q++)e.push(B.animateProperty(a.mixin({properties:{backgroundColor:{start:b,
end:g}}},l))),e.push(B.animateProperty(a.mixin({properties:{backgroundColor:{start:g,end:b}}},l)));return r.chain(e)}};a.mixin(a.getObject("fx",!0,m),f);return f})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){a.isAsync||q(0,function(){l(["./fx/Toggler"])});a=a.fx={};q={_fire:function(e,d){this[e]&&this[e].apply(this,d||[]);return this}};var b=function(e){this._index=
-1;this._animations=e||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;c.forEach(this._animations,function(d){d&&("undefined"!=typeof d.duration&&(this.duration+=d.duration),d.delay&&(this.duration+=d.delay))},this)};b.prototype=new B;D.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=
this._animations[++this._index],this._onAnimateCtx=k.after(this._current,"onAnimate",D.hitch(this,"_onAnimate"),!0),this._onEndCtx=k.after(this._current,"onEnd",D.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(e,d){this._current||(this._current=this._animations[this._index=0]);if(!d&&"playing"==this._current.status())return this;var h=k.after(this._current,"beforeBegin",D.hitch(this,function(){this._fire("beforeBegin")}),!0),t=k.after(this._current,"onBegin",D.hitch(this,function(v){this._fire("onBegin",
arguments)}),!0),z=k.after(this._current,"onPlay",D.hitch(this,function(v){this._fire("onPlay",arguments);h.remove();t.remove();z.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=k.after(this._current,"onAnimate",D.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=k.after(this._current,"onEnd",D.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var e=k.after(this._current,
"onPause",D.hitch(this,function(d){this._fire("onPause",arguments);e.remove()}),!0);this._current.pause()}return this},gotoPercent:function(e,d){this.pause();var h=this.duration*e;this._current=null;c.some(this._animations,function(t,z){if(h<=t.duration)return this._current=t,this._index=z,!0;h-=t.duration;return!1},this);this._current&&this._current.gotoPercent(h/this._current.duration);d&&this.play();return this},stop:function(e){if(this._current){if(e){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);
this._current=this._animations[this._index]}var d=k.after(this._current,"onStop",D.hitch(this,function(h){this._fire("onStop",arguments);d.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});D.extend(b,q);a.chain=function(e){return new b(D.isArray(e)?e:Array.prototype.slice.call(e,0))};var g=function(e){this._animations=
e||[];this._connects=[];this.duration=this._finished=0;c.forEach(e,function(h){var t=h.duration;h.delay&&(t+=h.delay);this.duration<t&&(this.duration=t);this._connects.push(k.after(h,"onEnd",D.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new n.Animation({curve:[0,1],duration:this.duration});var d=this;c.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(h){d._connects.push(k.after(d._pseudoAnimation,h,function(){d._fire(h,arguments)},!0))})};D.extend(g,
{_doAction:function(e,d){c.forEach(this._animations,function(h){h[e].apply(h,d)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(e,d){var h=this._pseudoAnimation;h[e].apply(h,d)},play:function(e,d){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(e,d){var h=this.duration*e;c.forEach(this._animations,
function(t){t.gotoPercent(t.duration<h?1:h/t.duration,d)});this._call("gotoPercent",arguments);return this},stop:function(e){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();c.forEach(this._connects,function(e){e.remove()})}});D.extend(g,q);a.combine=function(e){return new g(D.isArray(e)?e:Array.prototype.slice.call(e,0))};a.wipeIn=function(e){var d=e.node=r.byId(e.node),h=d.style,t;e=
n.animateProperty(D.mixin({properties:{height:{start:function(){t=h.overflow;h.overflow="hidden";if("hidden"==h.visibility||"none"==h.display)return h.height="1px",h.display="",h.visibility="",1;var v=f.get(d,"height");return Math.max(v,1)},end:function(){return d.scrollHeight}}}},e));var z=function(){h.height="auto";h.overflow=t};k.after(e,"onStop",z,!0);k.after(e,"onEnd",z,!0);return e};a.wipeOut=function(e){var d=(e.node=r.byId(e.node)).style,h;e=n.animateProperty(D.mixin({properties:{height:{end:1}}},
e));k.after(e,"beforeBegin",function(){h=d.overflow;d.overflow="hidden";d.display=""},!0);var t=function(){d.overflow=h;d.height="auto";d.display="none"};k.after(e,"onStop",t,!0);k.after(e,"onEnd",t,!0);return e};a.slideTo=function(e){var d=null,h=null,t=function(z){return function(){var v=f.getComputedStyle(z),y=v.position;d="absolute"==y?z.offsetTop:parseInt(v.top)||0;h="absolute"==y?z.offsetLeft:parseInt(v.left)||0;"absolute"!=y&&"relative"!=y&&(v=m.position(z,!0),d=v.y,h=v.x,z.style.position=
"absolute",z.style.top=d+"px",z.style.left=h+"px")}}(e.node=r.byId(e.node));t();e=n.animateProperty(D.mixin({properties:{top:e.top||0,left:e.left||0}},e));k.after(e,"beforeBegin",t,!0);return e};return a})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(D,B,a,c,k,n,r,f,m){D=D(null,{declaredClass:"esri.layers.TileInfo",constructor:function(q){B.mixin(this,q);this.width=
this.cols;this.height=this.rows;this._levelToLOD={};q=this.spatialReference;var l=this.origin;q&&(q=this.spatialReference=new r(q.toJson?q.toJson():q));l&&(this.origin=new f(l.toJson?l.toJson():l),!l.spatialReference&&q&&this.origin.setSpatialReference(new r(q.toJson())));this.lods=a.map(this.lods,function(e){return new m(e)});a.forEach(this.lods,function(e){this._levelToLOD[e.level]=e},this);q=!1;l=this.spatialReference;var b=this.origin;if(l&&b){var g=l._getInfo();g&&(q=l._isWrappable()&&Math.abs(g.origin[0]-
b.x)<=g.dx)}this.isWrappable=q;this._initializeUpsampleLevels()},toJson:function(){return n.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(q){return q.toJson()})})},lodAt:function(q){return this._levelToLOD&&this._levelToLOD[q]||null},updateTileInfo:function(q){var l=this.lodAt(q.level),
b=l.resolution*this.width;l=l.resolution*this.height;q.id=q.level+"/"+q.row+"/"+q.col;q.extent||(q.extent=[0,0,0,0]);q.extent[0]=this.origin.x+q.col*b;q.extent[1]=this.origin.y-(q.row+1)*l;q.extent[2]=q.extent[0]+b;q.extent[3]=q.extent[1]+l},upsampleTile:function(q){var l=this._upsampleLevels[q.level];if(!l||-1===l.parentLevel)return!1;q.level=l.parentLevel;q.row=Math.floor(q.row/l.factor+.001);q.col=Math.floor(q.col/l.factor+.001);this.updateTileInfo(q);return!0},_initializeUpsampleLevels:function(){var q=
this.lods;this._upsampleLevels=[];for(var l=null,b=0;b<q.length;b++){var g=q[b];this._upsampleLevels[g.level]={parentLevel:l?l.level:-1,factor:l?l.resolution/g.resolution:0};l=g}}});B.setObject("layers.TileInfo",D,k);return D})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,k){D=D(null,{declaredClass:"esri.layers.LOD",constructor:function(n){B.mixin(this,n)},toJson:function(){return k.fixJson({level:this.level,levelValue:this.levelValue,
resolution:this.resolution,scale:this.scale})}});B.setObject("layers.LOD",D,c);return D})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){B=B([l,b],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(h,t){t&&(t.roundrobin&&(D.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),t.tileServers=t.roundrobin),this._setTileServers(t.tileServers),
this._loadCallback=t.loadCallback);this._params=a.mixin({},this._url.query);this._initLayer=a.hitch(this,this._initLayer);var z=t&&t.resourceInfo;z?this._initLayer(z):(this._load=a.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(h){if(h&&0<h.length){this.tileServers=h;var t,z=h.length;for(t=0;t<z;t++)h[t]=m.urlToObject(h[t]).path}},_initLayer:function(h,t){this.inherited(arguments);this.resourceInfo=
k.toJson(h);this.tileInfo=new g(h.tileInfo);!1!==this.resampling&&(h.capabilities&&-1<h.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new d(this)):this.resampling=!!h.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new q(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;h.timeInfo&&(this.timeInfo=new e(h.timeInfo));h.mensurationCapabilities&&(this.mensurationCapabilities=
h.mensurationCapabilities);var z=this._url.path,v=this._loadCallback,y=m.getProtocolForWebResource(!0),C=z.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);C=C&&C[2];if(!this.tileServers)if(h.tileServers)this._setTileServers(h.tileServers);else{var F=-1!==z.search(/^https?:\/\/server\.arcgisonline\.com/i),x=-1!==z.search(/^https?:\/\/services\.arcgisonline\.com/i);(F||x)&&this._setTileServers([z,z.replace(F?/server\.arcgisonline/i:
/services\.arcgisonline/i,F?"services.arcgisonline":"server.arcgisonline")])}if(C){C=C.toLowerCase();for(z=0;z<this._agolAttrs.length;z++)if(F=this._agolAttrs[z],F.toLowerCase()===C){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||y+"//static.arcgis.com/attribution/"+F;break}for(z=0;z<this._referenceLayers.length;z++)if(F=this._referenceLayers[z],F.toLowerCase()===C){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);v&&(delete this._loadCallback,v(this))},getTileUrl:function(h,
t,z){var v=this.tileServers,y=this._getToken(),C=this._url.query;h=(v?v[t%v.length]:this._url.path)+"/tile/"+h+"/"+t+"/"+z;h=m.upgradeToHTTPS(h);this.resampling&&!this.tileMap&&(h+="?blankTile\x3dfalse");C&&(h=this.resampling&&!this.tileMap?h+("\x26"+r.objectToQuery(C)):h+("?"+r.objectToQuery(C)));!y||C&&C.token||(h+=(-1===h.indexOf("?")?"?":"\x26")+"token\x3d"+y);h=this.addTimestampToURL(h);return m.addProxy(h)}});a.setObject("layers.ArcGISTiledMapServiceLayer",B,f);return B})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C){D=D(C,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(F,x){B.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=x?x.displayLevels:null)?this._displayLevels[0]:0;this.resampling=x?x.resampling:void 0;this._resamplingTolerance=x?x.resamplingTolerance:null;this.exclusionAreas=x?x.exclusionAreas:null;var u=a.hitch;this._addImage=u(this,this._addImage);this._tileLoadHandler=u(this,this._tileLoadHandler);
this._tileErrorHandler=u(this,this._tileErrorHandler);this._popTile=u(this,this._popTile);this._cleanUpRemovedImages=u(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=u(this,this._fireOnUpdateEvent);this._transitionEnd=u(this,this._transitionEnd);this._tileMapCallback=u(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var F=this.tileInfo,x=F.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=F.width;this._tileH=
F.height;var u=this.scales=[],w=this._displayLevels,A=-Infinity,E=Infinity,G=this.fullExtent,H=new z(G.xmin,G.ymax);G=new z(G.xmax,G.ymin);var K=t.getContainingTileCoords,I,J=x.length;for(I=0;I<J;I++){var L=x[I];var M=K(F,H,L);L.startTileRow=0>M.row?0:M.row;L.startTileCol=0>M.col?0:M.col;M=K(F,G,L);L.endTileRow=M.row;L.endTileCol=M.col;w&&-1===c.indexOf(w,L.level)||(u[I]=L.scale,A=L.scale>A?L.scale:A,E=L.scale<E?L.scale:E)}-Infinity===A||this._hasMin||this.setMinScale(A);Infinity===E||this._hasMax||
this.setMaxScale(E);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=d("ie")&&7>d("ie")&&(this.isPNG32||"Mixed"===F.format)},isVisibleAtScale:function(F){return F?C.prototype._isMapAtVisibleScale.call(this,F,!0):!1},_isMapAtVisibleScale:function(F){var x=this.inherited(arguments,[F,!0]);if(x){var u=this._map;x=this.scales;var w=u.getScale(),A=!1,E=u.width>u.height?u.width:u.height;for(u=0;u<x.length;u++)if(Math.abs(x[u]-w)/x[u]<1/E){A=!0;break}x=A}return x},_setMap:function(F,x,u,w){this.inherited(arguments);
this._map=F;var A=this._div=n.create("div",null,x),E=F.__visibleDelta,G=B.connect,H=g._css.names,K={position:"absolute",width:F.width+"px",height:F.height+"px",overflow:"visible"},I=e.defaults.map.zoomDuration;"css-transforms"===F.navigationMode?(K[H.transform]=g._css.translate(-E.x,-E.y),m.set(A,K),delete K[H.transform],K[H.transition]=H.transformName+" "+I+"ms ease",m.set(this._active=n.create("div",null,A),K),this._active._remove=0,this._passives=[]):(K.left=-E.x+"px",K.top=-E.y+"px",m.set(A,K));
this._onResizeHandler_connect=G(F,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=G(this,"onOpacityChange",this,"_opacityChangeHandler");E=this.tileInfo;G=E.spatialReference;H=G._getInfo();(this._wrap=F.wrapAround180&&G._isWrappable()&&Math.abs(H.origin[0]-E.origin.x)<=H.dx)&&t._addFrameInfo(E,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!F.loaded)var J=B.connect(F,"onLoad",this,function(){B.disconnect(J);J=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return A},_unsetMap:function(F,x){this.suspended||this._suspendImpl();n.destroy(this._div);this._map=this._div=null;var u=B.disconnect;u(this._onResizeHandler_connect);u(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){h.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var F=this._tiles,x=this._tileIds,u=this._loadingList,
w,A,E=B.disconnect,G=n.destroy;u&&0<u.count&&(u.forEach(function(K){if(w=F[K])E(w._onload_connect),E(w._onerror_connect),E(w._onabort_connect),w._onload_connect=w._onerror_connect=w._onabort_connect=null}),u.clear(),this._fireUpdateEnd());this._removeList.clear();for(u=x.length-1;0<=u;u--)(w=(A=x[u])&&F[A])&&G(w);if("css-transforms"===this._map.navigationMode){x=this._active;A=this._passives;this._noDom=0;for(u=A.length-1;0<=u;u--){var H=A[u];H._endHandle&&E(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;A.splice(u,1);G(H)}x._matrix=x._multiply=null;x._marked=x._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new l;this._loadingList=new l;h.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var F=this._map,x=B.connect;if("css-transforms"===F.navigationMode){if(this._onScaleHandler_connect=x(F,"onScale",this,this._onScaleHandler),d("esri-mobile")){this._standby=[];var u=this,w=function(){u._noDom=1};this._onPanStartHandler_connect=x(F,"onPanStart",w);this._onZoomStartHandler_connect=x(F,"onZoomStart",w)}}else this._onZoomHandler_connect=x(F,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=x(F,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=x(F,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var F=B.disconnect;F(this._onPanHandler_connect);F(this._onZoomHandler_connect);F(this._onScaleHandler_connect);F(this._onExtentChangeHandler_connect);F(this._onPanStartHandler_connect);F(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(F,x,u){F={width:x+"px",height:u+"px"};x=m.set;x(this._div,F);if("css-transforms"===this._map.navigationMode)for(this._active&&x(this._active,F),u=this._passives.length-1;0<=u;u--)x(this._passives[u],F)},_onExtentChangeHandler:function(F,x,u,w){x=this._map;var A=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!x._isPanningOrZooming()){if("css-transforms"===x.navigationMode){if(u)for(w=this._passives.length-1;0<=w;w--){var E=this._passives[w];m.set(E,
g._css.names.transition,"none");E._marked?(this._passives.splice(w,1),E.parentNode&&E.parentNode.removeChild(E),n.destroy(E)):0<E.childNodes.length&&(E._multiply=E._multiply?b.multiply(E._matrix,E._multiply):E._matrix)}this._noDom=0;if(A&&A.length)for(w=A.length-1;0<=w;w--)E=A[w],m.set(E,"visibility","inherit"),this._popTile(E),A.splice(w,1)}this._fireUpdateStart();this._rrIndex=0;w=t.getCandidateTileInfo(x,this.tileInfo,F);F=x.__visibleDelta;if(!this._ct||w.lod.level!==this._ct.lod.level||u){E=w&&
this._ct&&w.lod.level!==this._ct.lod.level;this._ct=w;var G=this._tiles,H=this._tileIds,K=this._tileBounds,I=this._removeList,J=H.length;this._cleanUpRemovedImages();for(w=0;w<J;w++){A=H[w];var L=G[A];K[A]=H[w]=null;"css-transforms"===x.navigationMode&&E&&L.parentNode&&x.fadeOnZoom&&(L._fadeOut=E,L.parentNode._remove++);I.add(L)}u&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}w=F.x;u=F.y;"css-transforms"===x.navigationMode?(A={},A[g._css.names.transform]=g._css.translate(w,u),m.set(this._div,
A)):m.set(this._div,{left:w+"px",top:u+"px"});this.__coords_dx=w;this.__coords_dy=u;this._updateImages(new v(0,0,F.width,F.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;u=this._tileW;G=this._tileH;F=new v(-F.x,-F.y,F.width,F.height);for(w=this._tileIds.length-1;0<=w;w--)(A=this._tileIds[w])?(E=this._tiles[A],H=f.getMarginBox(E),H=new v(H.l,H.t,u,G),"css-transforms"===x.navigationMode&&(H.x=E._left,H.y=E._top),F.intersects(H)?
this._tileBounds[A]=H:(this._loadingList.contains(A)&&this._popTile(E),n.destroy(E),this._tileIds.splice(w,1),delete this._tileBounds[A],delete this._tiles[A])):(this._tileIds.splice(w,1),delete this._tileBounds[A],delete this._tiles[A])}},_onPanHandler:function(F,x){var u=this._map,w=u.__visibleDelta.offset(x.x,x.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===u.navigationMode?(u={},u[g._css.names.transform]=g._css.translate(w.x,w.y),m.set(this._div,u),d("esri-mobile")||this._updateImages({x:-w.x,
y:-w.y,width:w.width,height:w.height})):(m.set(this._div,{left:w.x+"px",top:w.y+"px"}),this._updateImages({x:-w.x,y:-w.y,width:w.width,height:w.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(F,x){var u,w={},A=g._css.names,E=this._map,G=e.defaults.map.zoomDuration;for(u=this._passives.length-1;0<=u;u--){var H=this._passives[u];0===H.childNodes.length?(this._passives.splice(u,1),n.destroy(H)):("none"===H.style[A.transition]&&m.set(H,A.transition,
A.transformName+" "+G+"ms ease"),m.set(H,A.transition,x?"none":A.transformName+" "+G+"ms ease"),H._matrix=F,w[A.transform]=g._css.matrix(H._multiply?b.multiply(F,H._multiply):F),m.set(H,w))}this._active&&0===this._active.childNodes.length||(m.set(this._active,A.transition,x?"none":A.transformName+" "+G+"ms ease"),this._active._matrix=F,w[A.transform]=g._css.matrix(this._active._matrix),m.set(this._active,w),this._passives.push(this._active),w={position:"absolute",width:E.width+"px",height:E.height+
"px",overflow:"visible"},w[A.transition]=A.transformName+" "+G+"ms ease",m.set(this._active=n.create("div",null,this._div),w),this._active._remove=0,E.fadeOnZoom&&n.place(this._active,this._div,"first"))},_onZoomHandler:function(F,x,u){F=f.getMarginBox(this._div);u=u.offset(-F.l,-F.t);this._previousScale&&1!==x||(this._previousScale=1);var w,A=this._tileW*x,E=this._tileH*x,G=this._tileBounds,H=this._tiles,K=this._previousScale,I=this._multiple,J=m.set,L,M;if((F=d("ie"))&&8>F)c.forEach(this._tileIds,
function(ha){M="";w=G[ha];L=H[ha].style.margin.split(" ");c.forEach(L,function(U){""!==M&&(M+=" ");U=parseFloat(U);M+=U/K*x+"px"});J(H[ha],{left:w.x-(A-w.width)*(u.x-w.x)/w.width+"px",top:w.y-(E-w.height)*(u.y-w.y)/w.height+"px",margin:1!==I&&-1===M.indexOf("NaN")?M:"",zoom:x})});else{var N=A*I,O=E*I,Y,ba;c.forEach(this._tileIds,function(ha){M="";w=G[ha];Y=w.x-(A-w.width)*(u.x-w.x)/w.width;ba=w.y-(E-w.height)*(u.y-w.y)/w.height;L=H[ha].style.margin.split(" ");c.forEach(L,function(U){""!==M&&(M+=" ");
U=parseFloat(U);M+=U/K*x+"px"});J(H[ha],{left:Y+"px",top:ba+"px",margin:1!==I&&-1===M.indexOf("NaN")?M:"",width:N+"px",height:O+"px"})})}this._previousScale=x},_updateImages:function(F){if(this._ct){var x=this._tileW,u=this._tileH,w=this._ct;var A=w.lod;w=w.tile;var E=w.offsets,G=w.coords,H=G.row;G=G.col;var K=A.level,I=this.opacity,J=this._tileIds,L=this._loadingList,M=this._addImage,N=this._map.id,O=this.id,Y=F.x,ba=F.y,ha=A.startTileRow,U=A.endTileRow,X=A.startTileCol,Z=A.endTileCol,P=c.indexOf,
da=E.x-this.__coords_dx,ia=E.y-this.__coords_dy;var xa=x-da+-F.x;var Ca=u-ia+-F.y;var Fa=Math.ceil;xa=0<xa?xa%x:x-Math.abs(xa)%x;Ca=0<Ca?Ca%u:u-Math.abs(Ca)%u;Y=0<Y?Math.floor((Y+da)/x):Fa((Y-(x-da))/x);ba=0<ba?Math.floor((ba+ia)/u):Fa((ba-(u-ia))/u);ia=Y+Fa((F.width-xa)/x);F=ba+Fa((F.height-Ca)/u);if(this._wrap){var Ma=A._frameInfo;var Sa=Ma[0];var Ba=Ma[1];Ma=Ma[2]}for(Ca=Y;Ca<=ia;Ca++)for(Y=ba;Y<=F;Y++)Fa=H+Y,xa=G+Ca,this._wrap&&(xa<Ba?(xa%=Sa,xa=xa<Ba?xa+Sa:xa):xa>Ma&&(xa%=Sa)),!this._isExcluded(K,
Fa,xa)&&Fa>=ha&&Fa<=U&&xa>=X&&xa<=Z&&(A=N+"_"+O+"_tile_"+K+"_"+Y+"_"+Ca,-1===P(J,A)&&(L.add(A),J.push(A),M(K,Y,Fa,Ca,xa,A,x,u,I,w,E)))}},_cleanUpRemovedImages:function(){var F=this._removeList,x=n.destroy,u,w=g._css.names;F.forEach(function(E){E._fadeOut||(E.style.filter="",E.style.zoom=1,x(E))});if("css-transforms"===this._map.navigationMode)for(u=this._passives.length-1;0<=u;u--){var A=this._passives[u];0===A.childNodes.length?(this._passives.splice(u,1),x(A)):this._map.fadeOnZoom&&!A._marked&&
A._remove===A.childNodes.length&&(A._marked=1,2048>g._css.getScaleFromMatrix(m.get(A,w.transform))?(m.set(A,w.transition,"opacity 0.65s"),m.set(A,"opacity",0),B.disconnect(A._endHandle),A._endHandle=B.connect(A,w.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:A}))}F.clear()},_transitionEnd:function(F){var x=F.target;"opacity"===F.propertyName&&(B.disconnect(x._endHandle),x._endHandle=null,F=c.indexOf(this._passives,x),-1<F&&this._passives.splice(F,1),x.parentNode&&
x.parentNode.removeChild(x),n.destroy(x))},_addImage:function(F,x,u,w,A,E,G,H,K,I,J){if(this._patchIE)I=this._tiles[E]=n.create("div"),I.id=E,r.add(I,"layerTile"),m.set(I,{left:G*w-J.x+"px",top:H*x-J.y+"px",width:G+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(F,u,A)+"', sizingMethod\x3d'scale')"}),1>K&&m.set(I,"opacity",K),F=I.appendChild(n.create("div")),m.set(F,{opacity:0,width:G+"px",height:H+"px"}),this._div.appendChild(I),I=null,this._loadingList.remove(E),
this._fireOnUpdateEvent();else{I=this._tiles[E]=n.create("img");var L=B.connect;I.id=E;I._uid=F+"_"+u+"_"+A;I.alt="";r.add(I,"layerTile");w=G*w-J.x;J=H*x-J.y;x=this._map;var M=g._css.names;G={width:G+"px",height:H+"px",visibility:"hidden"};"css-transforms"===x.navigationMode?(G[M.transform]=g._css.translate(w,J),m.set(I,G),I._left=w,I._top=J):(G.left=w+"px",G.top=J+"px",m.set(I,G));1>K&&m.set(I,"opacity",K);I._onload_connect=L(I,"onload",this,"_tileLoadHandler");I._onerror_connect=L(I,"onerror",a.hitch(this,
"_tileErrorHandler",u,A));I._onabort_connect=L(I,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(F,u,A,E,this._tileMapCallback);else if(E=this.getTileUrl(F,u,A,I))this._failedRequests&&this._failedRequests[E]?(m.set(I,this._failedRequests[E].css),I.src=this._failedRequests[E].src,this._multiple=parseInt(this._failedRequests[E].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,I.src=E);"css-transforms"===x.navigationMode?this._active.appendChild(I):
this._div.appendChild(I);I=null}},_tileMapCallback:function(F,x){if(!this.suspended){var u=this._tiles[x.id]||q.byId(x.id);var w=x.level+"_"+x.row+"_"+x.col;u&&u._uid===w?(this._multiple=2*(x.level-F.level)||1,this.isResampling=1!==this._multiple,w=this.tileMap.style(F,x),m.set(u,w),u.src=this.getTileUrl(F.level,F.row,F.col)):this._popTile(x)}},getTileUrl:function(F,x,u){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(F){var x=B.disconnect;x(F._onload_connect);x(F._onerror_connect);x(F._onabort_connect);F._onload_connect=F._onerror_connect=F._onabort_connect=null;this._loadingList.remove(F.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(F){F=F.currentTarget;this._noDom?this._standby.push(F):(m.set(F,"visibility","inherit"),this._popTile(F))},_tileAbortHandler:function(F){F=F.currentTarget;this.onError(Error("Unable to load tile: "+F.src));m.set(F,"visibility","hidden");this._popTile(F)},
_tileErrorHandler:function(F,x,u){u=u.currentTarget;var w=!0;if(this.tileMap||!this.resampling)w=!1;else{var A=new k(u.src);A=A.path.split("/");A=parseInt(A[A.length-3]);var E=this._ct.lod.level-A+1;this._multiple=Math.pow(2,E);if(A===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)w=!1}w?(this.isResampling=!0,this._resample(u,F,x)):(this.onError(Error("Unable to load tile: "+u.src)),m.set(u,"visibility","hidden"),
this._popTile(u))},_resample:function(F,x,u){var w=(new k(F.src)).path.split("/"),A=this._multiple,E=parseInt(w[w.length-3])-1,G=parseInt(x/A),H=parseInt(u/A);w=u%A;var K=x%A;G=this.getTileUrl(E,G,H);x=this.getTileUrl(E+Math.log(A)/Math.LN2,x,u);A={width:this._tileW*A+"px",height:this._tileH*A+"px",margin:"-"+this._tileW*K+"px 0 0 -"+(this._tileH*w+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[x]={src:G,css:A};m.set(F,A);d("chrome")&&F.setAttribute("src",null);F.src=
G},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(F){if(this.opacity!=F)this.onOpacityChange(this.opacity=F)},onOpacityChange:function(){},_opacityChangeHandler:function(F){var x=m.set,u,w;if("css-transforms"===this._map.navigationMode){if(this._active){var A=this._active.childNodes;for(u=A.length-1;0<=u;u--)x(A[u],"opacity",F)}for(u=this._passives.length-
1;0<=u;u--)for(A=this._passives[u].childNodes,w=A.length-1;0<=w;w--)x(A[w],"opacity",F)}else for(A=this._div.childNodes,u=A.length-1;0<=u;u--)x(A[u],"opacity",F)},setExclusionAreas:function(F){this.exclusionAreas=F;if(this.loaded&&this._map&&this._map.loaded){var x=this._map.spatialReference,u=this.tileInfo,w=u.origin,A=u.lods,E=A[0].level,G=A[A.length-1].level,H,K,I;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var J=0;for(H=F.length;J<H;J++){var L=F[J];if((I=L.geometry)&&
"extent"===I.type&&I.xmin<=I.xmax&&I.ymin<=I.ymax){if(!x.equals(I.spatialReference))if(x._canProject(I.spatialReference)){if(x.isWebMercator()){var M=z.lngLatToXY(I.xmin,I.ymin);I=z.lngLatToXY(I.xmax,I.ymax)}else M=z.xyToLngLat(I.xmin,I.ymin,!0),I=z.xyToLngLat(I.xmax,I.ymax,!0);I=new y(M[0],M[1],I[0],I[1],x)}else continue;var N=-1;if(L.minZoom&&-1!==L.minZoom)N=L.minZoom;else if(L.minScale&&-1!==L.minScale){var O=0;for(K=A.length;O<K;O++)if(A[O].scale<=L.minScale){N=A[O].level;break}}N=Math.max(N,
E);M=-1;if(L.maxZoom&&-1!==L.maxZoom)M=L.maxZoom;else if(L.maxScale&&-1!==L.maxScale)for(O=0,K=A.length;O<K;O++)if(A[O].scale<L.maxScale){M=A[O-1].level;break}else if(A[O].scale===L.maxScale){M=A[O].level;break}M=-1===M?G:Math.min(M,G);for(L=N;L<=M;L++){O=0;for(K=A.length;O<K;O++)if(A[O].level===L){var Y=A[O];break}Y&&(this._exclusionsPerZoom[L]||(this._exclusionsPerZoom[L]=[]),O=1/Y.resolution/u.rows,K=1/Y.resolution/u.cols,this._exclusionsPerZoom[L].push({rowFrom:Math.floor((w.y-I.ymax)*O),rowTo:Math.ceil((w.y-
I.ymin)*O),colFrom:Math.floor((I.xmin-w.x)*K),colTo:Math.ceil((I.xmax-w.x)*K)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(F,x,u){var w;if(!this._exclusionsPerZoom)return!1;var A=this._exclusionsPerZoom[F];if(!A)return!1;var E=0;for(w=A.length;E<w;E++)if(F=A[E],x>=F.rowFrom&&x<F.rowTo&&u>=F.colFrom&&u<F.colTo)return!0;return!1}});a.setObject("layers.TiledMapServiceLayer",D,g);return D})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(D,B,a){a.ArrayList=function(c){var k=[];c&&(k=k.concat(c));this.count=k.length;this.add=function(n){k.push(n);this.count=k.length};this.addRange=function(n){if(n.getIterator)for(n=n.getIterator();!n.atEnd();)this.add(n.get());else for(var r=0;r<n.length;r++)k.push(n[r]);this.count=k.length};this.clear=function(){k.splice(0,k.length);this.count=0};this.clone=function(){return new a.ArrayList(k)};this.contains=function(n){for(var r=0;r<k.length;r++)if(k[r]==n)return!0;
return!1};this.forEach=function(n,r){D.forEach(k,n,r)};this.getIterator=function(){return new a.Iterator(k)};this.indexOf=function(n){for(var r=0;r<k.length;r++)if(k[r]==n)return r;return-1};this.insert=function(n,r){k.splice(n,0,r);this.count=k.length};this.item=function(n){return k[n]};this.remove=function(n){n=this.indexOf(n);0<=n&&k.splice(n,1);this.count=k.length};this.removeAt=function(n){k.splice(n,1);this.count=k.length};this.reverse=function(){k.reverse()};this.sort=function(n){n?k.sort(n):
k.sort()};this.setByIndex=function(n,r){k[n]=r;this.count=k.length};this.toArray=function(){return[].concat(k)};this.toString=function(n){return k.join(n||",")}};return a.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(D,B,a){D=B.getObject("dojox.collections",!0);D.DictionaryEntry=function(c,k){this.key=c;this.value=k;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};D.Iterator=
function(c){var k=0;this.element=c[k]||null;this.atEnd=function(){return k>=c.length};this.get=function(){return this.atEnd()?null:this.element=c[k++]};this.map=function(n,r){return a.map(c,n,r)};this.reset=function(){k=0;this.element=c[k]}};D.DictionaryIterator=function(c){var k=[],n={},r;for(r in c)n[r]||k.push(c[r]);var f=0;this.element=k[f]||null;this.atEnd=function(){return f>=k.length};this.get=function(){return this.atEnd()?null:this.element=k[f++]};this.map=function(m,q){return a.map(k,m,
q)};this.reset=function(){f=0;this.element=k[f]}};return D})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(D,B,a,c,k,n,r){return D(null,{declaredClass:"esri.layers.TileMap",constructor:function(f){this.layer=f;this._tileMaps={}},getTile:function(f,m,q,l,b){f={id:l,level:f,row:m,col:q};m=this._getResamplingBudget();0<m?this._process({tile:f,requestedTile:f,callback:b,resamplingBudget:m}):
(b||this.callback).call(this,f,f)},statusOf:function(f,m,q){var l=this._getResamplingBudget();f={level:f,row:m,col:q};if(0===l)return 1;for(;0<=l;){m=this._tileToTileMap(f);if(!this._tileMaps[m.uid])return-1;m=this._tileMaps[m.uid];if(!m.promise.isFulfilled())return-1;if(this._isTileAvailable(f,m))return 1;f=this._parentTile(f);if(!f)break;l--}return 0},style:function(f,m){if(f.level!==m.level||f.row!==m.row||f.col!==m.col){var q=this.layer.tileInfo,l=q.lods,b=q.cols;q=q.rows;for(var g,e,d=l.length-
1;!g||!e;)g||l[d].level!==f.level||(g=l[d]),e||l[d].level!==m.level||(e=l[d]),d--;g=Math.round(g.resolution/e.resolution);e=m.col%g*-1*b;l=m.row%g*-1*q;g={width:b*g+"px",height:q*g+"px",margin:l+"px 0 0 "+e+"px","will-change":"transform"};e=0===e?0:-1*e;l=0===l?0:-1*l;g.clip="rect("+l+"px,"+(e+b)+"px,"+(l+q)+"px,"+e+"px)";return g}},_process:function(f){var m=f.tile,q=this._tileToTileMap(m),l=this._parentTile(m);this._getTileMap(q).then(B.hitch(this,function(b){q=b;this._isTileAvailable(m,q)?(f.callback||
this.callback).call(this,m,f.requestedTile):0<f.resamplingBudget&&l?(f.resamplingBudget--,f.tile=l,this._process(f)):(f.callback||this.callback).call(this,f.requestedTile,f.requestedTile)}),B.hitch(this,function(){(f.callback||this.callback).call(this,f.requestedTile,f.requestedTile)}))},_getTileMap:function(f){var m,q,l=null;if(this._tileMaps[f.uid]){f=this._tileMaps[f.uid];var b=f.promise}else{this._tileMaps[f.uid]=f;var g=new c;n({url:this._getTileMapUrl(f.level,f.row,f.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(e){B.mixin(f,e);if(f.data&&0<f.data.length){q=f.data.length;if(1===q)l=f.data[0];else for(l=f.data[0],m=1;m<q;m++)if(f.data[m]!==l){l=null;break}null!==l&&(delete f.data,f.value=l);null==f.valid&&(f.valid=!0)}g.resolve(f)},error:function(e){e&&422===e.code?(B.mixin(f,{location:{top:f.row,left:f.col,width:8,height:8},valid:!0,value:0}),g.resolve(f)):g.reject()}});b=f.promise=g.promise}return b},_parentTile:function(f){var m=this.layer.tileInfo.lods,
q,l,b=null;a.some(m,function(g,e){return f.level===g.level?(q=g,l=e,!0):!1});0<l&&(m=m[l-1],b={id:f.id,level:m.level,row:Math.floor(f.row*q.resolution/m.resolution+.01),col:Math.floor(f.col*q.resolution/m.resolution+.01)});return b},_tileToTileMap:function(f){var m=8*Math.floor(f.row/8),q=8*Math.floor(f.col/8);return{uid:f.level+"_"+m+"_"+q,level:f.level,row:m,col:q}},_isTileAvailable:function(f,m){if(m.valid)if(void 0!==m.value)var q=m.value;else{q=m.location.left;var l=m.location.top;q=(f.row-l)*
m.location.width+(f.col-q);q=q<m.data.length?m.data[q]:0}else q=0;return q},_getTileMapUrl:function(f,m,q){var l=this.layer,b=l.tileServers,g=l._getToken(),e=l._url.query;f=(b?b[m%b.length]:l._url.path)+"/tilemap/"+f+"/"+m+"/"+q+"/8/8";e&&(f+="?"+k.objectToQuery(e));!g||e&&e.token||(f+=(-1===f.indexOf("?")?"?":"\x26")+"token\x3d"+g);return f=l.addTimestampToURL(f)},_getResamplingBudget:function(){var f=this.layer,m=0;f.resampling&&(m=f._resamplingTolerance,null===m||void 0===m)&&(m=f.tileInfo.lods.length);
return m}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){var e=D([g],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(d){this.inherited(arguments,[null,d]);this._mapImages=[];var h=a.hitch;this._panStart=
h(this,this._panStart);this._pan=h(this,this._pan);this._extentChange=h(this,this._extentChange);this._zoom=h(this,this._zoom);this._zoomStart=h(this,this._zoomStart);this._scale=h(this,this._scale);this._resize=h(this,this._resize);B.connect(this,"onSuspend",this,this._onSuspend);B.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(d){var h=this._mapImages.push(d);--h;d._idx=h;d._layer=this;this._div&&this._createImage(d,h)},removeImage:function(d){if(d){var h=
d._idx,t=this._mapImages;if(t[h]===d){delete t[h];if(h=d._node)this._clearEvents(h),h.e_idx=h.e_bl=h.e_tr=h.e_l=h.e_t=h.e_w=h.e_h=null,h.parentNode&&(h.parentNode.removeChild(h),k.destroy(h));d._node=d._idx=d._layer=null}}},removeAllImages:function(){var d=this._mapImages,h,t=d.length;for(h=0;h<t;h++){var z=d[h];z&&this.removeImage(z)}this._mapImages=[]},getImages:function(){var d=this._mapImages,h=[],t,z=d.length;for(t=0;t<z;t++)d[t]&&h.push(d[t]);return h},setOpacity:function(d){this.opacity!=d&&
(this._opacityChanged(this.opacity=d),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(d){var h=this._div;if(h)if(!m("ie")||8<m("ie"))n.set(h,"opacity",d);else{var t=h.childNodes;var z=t.length;for(h=0;h<z;h++)n.set(t[h],"opacity",d)}},_createImage:function(d,h){var t=k.create("img");n.set(t,{position:"absolute"});1>d.opacity?n.set(t,"opacity",d.opacity):8>=m("ie")&&n.set(t,"opacity",this.opacity);!d.rotation||9>m("ie")||n.set(t,r._css.names.transform,r._css.rotate(360-
d.rotation));d._node=t;t.e_idx=h;t.e_layer=this;t.e_load=B.connect(t,"onload",e.prototype._imageLoaded);t.e_error=B.connect(t,"onerror",e.prototype._imageError);t.e_abort=B.connect(t,"onabort",e.prototype._imageError);t.src=d.href},_imageLoaded:function(d,h){var t=h||d.target||d.currentTarget,z=t.e_layer,v=z._mapImages[t.e_idx],y=z._map;y&&(y.__zooming||y.__panning||!z._sr)?z._standby.push(t):(z._clearEvents(t),v&&v._node===t&&y&&z._attach(v))},_imageError:function(d){d=d.target||d.currentTarget;
var h=d.e_layer,t=h._mapImages[d.e_idx];h._clearEvents(d);t&&(t._node=null)},_clearEvents:function(d){var h=B.disconnect;h(d.e_load);h(d.e_error);h(d.e_abort);d.e_load=d.e_error=d.e_abort=d.e_layer=null},_attach:function(d){var h=d.extent,t=h.spatialReference,z=this._sr,v=this._div,y=d._node,C=new l({x:h.xmin,y:h.ymin,spatialReference:t});h=new l({x:h.xmax,y:h.ymax,spatialReference:t});z.equals(t)||(z.isWebMercator()&&4326===t.wkid?(C=b.geographicToWebMercator(C),h=b.geographicToWebMercator(h)):t.isWebMercator()&&
4326===z.wkid&&(C=b.webMercatorToGeographic(C),h=b.webMercatorToGeographic(h)));y.e_bl=C;y.e_tr=h;d.visible&&(this._setPos(y,v._left,v._top),(this._active||v).appendChild(y))},_setPos:function(d,h,t){var z=d.e_bl,v=d.e_tr,y=this._map;z=y.toScreen(z);v=y.toScreen(v);h=z.x-h;t=v.y-t;var C=Math.abs(v.x-z.x);z=Math.abs(z.y-v.y);v={width:C+"px",height:z+"px"};var F=this._mapImages[d.e_idx];"css-transforms"===y.navigationMode?v[r._css.names.transform]=r._css.translate(h,t)+(F.rotation?" "+r._css.rotate(360-
F.rotation):""):(v.left=h+"px",v.top=t+"px");n.set(d,v);d.e_l=h;d.e_t=t;d.e_w=C;d.e_h=z},managedSuspension:!0,_setMap:function(d,h){this.inherited(arguments);var t=this._div=k.create("div",null,h),z=r._css.names,v={position:"absolute"},y=d.__visibleDelta;if(!m("ie")||8<m("ie"))v.opacity=this.opacity;"css-transforms"===d.navigationMode?(v[z.transform]=r._css.translate(y.x,y.y),n.set(t,v),t._left=y.x,t._top=y.y,v={position:"absolute",width:d.width+"px",height:d.height+"px",overflow:"visible"},this._active=
k.create("div",null,t),n.set(this._active,v),this._passive=k.create("div",null,t),n.set(this._passive,v)):(t._left=0,t._top=0,n.set(t,v));this._standby=[];z=this._mapImages;y=z.length;for(v=0;v<y;v++){var C=z[v];C._node||this._createImage(C,C._idx)}q.hide(t);return t},_unsetMap:function(d,h){this._disconnect();var t=this._div;if(t){var z=this._mapImages,v,y=z.length;for(v=0;v<y;v++){var C=z[v];if(C){var F=C._node;F&&(this._clearEvents(F),F.e_idx=F.e_bl=F.e_tr=F.e_l=F.e_t=F.e_w=F.e_h=null);C._node=
null}}h.removeChild(t);k.destroy(t)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();q.hide(this._div)},_onResume:function(d){d.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());d=this._map;var h=this._div,t=d.__visibleDelta;"css-transforms"===d.navigationMode&&(h._left=t.x,h._top=t.y,n.set(h,r._css.names.transform,r._css.translate(h._left,h._top)));this._redraw("css-transforms"===
d.navigationMode);this._connect(d);q.show(h)},_connect:function(d){if(!this._connections){var h=B.connect,t="css-transforms"===d.navigationMode;this._connections=[h(d,"onPanStart",this._panStart),h(d,"onPan",this._pan),h(d,"onExtentChange",this._extentChange),t&&h(d,"onZoomStart",this._zoomStart),t?h(d,"onScale",this._scale):h(d,"onZoom",this._zoom),t&&h(d,"onResize",this._resize)];t&&this._resize(d.extent,d.width,d.height)}},_disconnect:function(){this._connections&&(c.forEach(this._connections,
B.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(d,h){var t=this._div;t._left=this._panL+h.x;t._top=this._panT+h.y;"css-transforms"===this._map.navigationMode?n.set(t,r._css.names.transform,r._css.translate(t._left,t._top)):n.set(t,{left:t._left+"px",top:t._top+"px"})},_extentChange:function(d,h,t){t?this._redraw("css-transforms"===this._map.navigationMode):h&&this._pan(d,h);this._processStandbyList()},_processStandbyList:function(){var d,
h=this._standby;if(h&&h.length)for(d=h.length-1;0<=d;d--)this._imageLoaded(null,h[d]),h.splice(d,1)},_redraw:function(d){if(d){d=this._passive;var h=r._css.names;n.set(d,h.transition,"none");this._moveImages(d,this._active);n.set(d,h.transform,"none")}d=this._active||this._div;h=this._div._left;var t=this._div._top,z,v=d.childNodes.length;for(z=0;z<v;z++){var y=d.childNodes[z];this._setPos(y,h,t)}},_zoom:function(d,h,t){d=this._div;var z=d._left,v=d._top,y,C=d.childNodes.length;for(y=0;y<C;y++){var F=
d.childNodes[y];var x=F.e_w*h,u=F.e_h*h,w=(t.x-z-F.e_l)*(x-F.e_w)/F.e_w,A=(t.y-v-F.e_t)*(u-F.e_h)/F.e_h;w=isNaN(w)?0:w;A=isNaN(A)?0:A;n.set(F,{left:F.e_l-w+"px",top:F.e_t-A+"px",width:x+"px",height:u+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(d,h){var t=d.childNodes;var z=t.length;if(0<z)for(--z;0<=z;z--)h.appendChild(t[z])},_scale:function(d,h){var t=r._css.names,z=this._passive;n.set(z,t.transition,h?"none":t.transformName+" "+f.defaults.map.zoomDuration+
"ms ease");({})[t.transform]=r._css.matrix(d);n.set(z,t.transform,r._css.matrix(d))},_resize:function(d,h,t){n.set(this._active,{width:h+"px",height:t+"px"});n.set(this._passive,{width:h+"px",height:t+"px"})}});a.setObject("layers.MapImageLayer",e,r);return e})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(D,B,a,c,k,n,r,f,m){D=D(f,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(q){this.spatialReference=new n({wkid:102100});this.tileInfo=new m({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new r({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new r({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=q&&q.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=q?q.displayLevels:null;this.copyright=q&&q.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(q=
q&&q.loadCallback)&&q(this)},getTileUrl:function(q,l,b){q=this.tileServers[l%this.serversLength]+"/"+q+"/"+b+"/"+l+".png";q=k.normalize(q);q=this.addTimestampToURL(q);return k.addProxy(q)}});B.setObject("layers.OpenStreetMapLayer",D,c);return D})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A){D=D([u,w,f],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(E,G){this.initialize();B.mixin(this,E);this.domNode=q.byId(G);var H=this._nls=B.mixin({},A.widgets.popup),K=this.domNode;b.add(K,"esriPopup");(this._isRTL=
!e.isBodyLtr())&&d.set(K,"direction","rtl");l.set(K,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+H.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+H.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+H.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
H.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+H.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+H.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+H.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=k.query(".sizer",K);H=k.query(".titlePane",K)[0];this._title=k.query(".title",H)[0];this._prevFeatureButton=k.query(".prev",H)[0];this._nextFeatureButton=k.query(".next",H)[0];this._maxButton=k.query(".maximize",H)[0];this._spinner=k.query(".spinner",H)[0];this._contentPane=k.query(".contentPane",K)[0];this._positioner=k.query(".esriPopupWrapper",K)[0];this._pointer=k.query(".pointer",K)[0];this._outerPointer=k.query(".outerPointer",K)[0];this._actionList=k.query(".actionsPane .actionList",
K)[0];this._contentUpdateHandles={};this._eventConnections=[c.connect(k.query(".close",H)[0],"onclick",this,this.hide),c.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),c.connect(this._nextFeatureButton,"onclick",this,this.selectNext),c.connect(this._maxButton,"onclick",this,this._toggleSize),c.connect(k.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),c.connect(this,"onClearFeatures",this,this._featuresCleared),c.connect(this,"onSelectionChange",this,this._featureSelected),
c.connect(this,"onDfdComplete",this,this._updateUI)];n("esri-touch")&&(K=v.setScrollable(this._contentPane),this._eventConnections.push(K[0],K[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(E){this.inherited(arguments);g.place(this.domNode,E.root);this.highlight&&this.enableHighlight(E);this._maxHeight=d.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(E){this.popupWindow&&
(z.isDefined(E)&&""!==E||(E="\x26nbsp;"),this.destroyDijits(this._title),this.place(E,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(E){this.popupWindow&&(z.isDefined(E)&&""!==E||(E="\x26nbsp;"),this._destroyContent(),this.place(E,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(E,G){if(this.popupWindow)if(this._delayHide=!1,E){var H=this.map;if(E.spatialReference){this.location=E;var K=H.toScreen(E)}else this.location=
H.toMap(E),K=E;var I=H._getFrameWidth();if(-1!==I&&(K.x%=I,0>K.x&&(K.x+=I),H.width>I))for(H=(H.width-I)/2;K.x<H;)K.x+=I;this._maximized?this.restore():this._setPosition(K);G&&G.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(E,G){this.popupWindow&&(this._sizers.style({width:E+"px"}),d.set(this._contentPane,"maxHeight",G+"px"),this._maxHeight=G,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(E){return a.map(E,function(G){var H=g.create("a",{href:"javascript:void(0);",className:"action "+
G.className,title:G.title,innerHTML:G.title},this._actionList);c.connect(H,"onclick",G.callback);return{action:G,node:H}},this)},removeActions:function(E){a.forEach(E,function(G){g.destroy(G.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var E=this.map;if(E&&!this._maximized&&this.popupWindow){this._maximized=!0;var G=this._maxButton;b.remove(G,"maximize");b.add(G,"restore");l.set(G,"title",this._nls.NLS_restore);G=this.marginLeft;var H=this.marginTop,K=E.width-2*G;
E=E.height-2*H;d.set(this.domNode,{left:this._isRTL?null:G+"px",right:this._isRTL?G+"px":null,top:H+"px",bottom:null});d.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=d.get(this._sizers[0],"width");this._savedHeight=d.get(this._contentPane,"maxHeight");this._sizers.style({width:K+"px"});d.set(this._contentPane,{maxHeight:E-65+"px",height:E-65+"px"});this._showPointer("");this._unfollowMap();b.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var E=this._maxButton;b.remove(E,"restore");b.add(E,"maximize");l.set(E,"title",this._nls.NLS_maximize);d.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();b.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();a.forEach(this._eventConnections,c.disconnect);g.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(E,G){this._transientAnchor=
G&&G.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(E){E||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(E){var G=this.highlight,H=this.map;this.highlight=E;if(H&&E!==G)if(E){if(this.enableHighlight(H),E=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,E),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(E){var G=this.pagingControls,H=this.map;this.pagingControls=E;
H&&E!==G&&this._updatePagingControls()},_pagingInfoSetter:function(E){var G=this.pagingInfo,H=this.map;this.pagingInfo=E;H&&E!==G&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(E){var G=this.popupWindow,H=this.map;this.popupWindow=E;H&&E!==G&&(E?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(E){var G=this.anchor;this.anchor=E;this.map&&E!==G&&this.reposition()},_startupContent:function(){var E=this._contentPane;
this.startupDijits(E);a.forEach(this._getPopupRendererDijits(E),function(G){if(!this._contentUpdateHandles[G.id]){var H=G.on("content-update",B.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[G.id]=H}},this)},_destroyContent:function(){var E=this._contentPane;a.forEach(this._getPopupRendererDijits(E),function(G){var H=this._contentUpdateHandles[G.id];H&&(H.remove(),delete this._contentUpdateHandles[G.id])},this);this.destroyDijits(E)},_getPopupRendererDijits:function(E){E=this.getDijits(E);
return E=a.filter(E,function(G){return G&&G.set&&/_PopupRenderer/.test(G.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var E=this.selectedIndex;if(0<=E){var G=this.features[E].getContent();if(!this.titleInBody&&G&&B.isString(G.id)){var H=h.byId(G.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(G);this.updateHighlight(this.map,this.features[E]);this.showHighlight()}},_toggleVisibility:function(E){this._setVisibility(E);this.isShowing=E},_setVisibility:function(E){b.toggle(this.domNode,"esriPopupVisible",E);b.toggle(this.domNode,"esriPopupHidden",!E)},_waitAndHide:function(E){var G=this;this._delayHide=!0;setTimeout(function(){G._delayHide&&(G._delayHide=!1,G.hide())},E)},_followMap:function(){this._unfollowMap();var E=this.map;this._handles=[c.connect(E,
"onPanStart",this,this._onPanStart),c.connect(E,"onPan",this,this._onPan),c.connect(E,"onZoomStart",this,this._onZoomStart),c.connect(E,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var E=this._handles;E&&(a.forEach(E,c.disconnect),this._handles=null)},_onPanStart:function(){var E=this.domNode.style;this._panOrigin={left:E.left,top:E.top,right:E.right,bottom:E.bottom}},_onPan:function(E,G){var H=this._panOrigin,K=G.x,I=G.y,J=H.left,L=H.top,M=H.right;H=H.bottom;J&&(J=parseFloat(J)+
K+"px");L&&(L=parseFloat(L)+I+"px");M&&(M=parseFloat(M)-K+"px");H&&(H=parseFloat(H)-I+"px");d.set(this.domNode,{left:J,top:L,right:M,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(E,G,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(E){var G=
E.x,H=E.y;E=this.offsetX||0;var K=this.offsetY||0,I=0,J=0,L=this.map,M=L.position.x,N=L.position.y,O=L.width,Y=L.height;L="Left";var ba="bottom",ha="right",U="top",X=e.getContentBox(this._positioner),Z=X.w/2,P=X.h/2,da=d.get(this._sizers[0],"height")+this._maxHeight+d.get(this._sizers[2],"height"),ia=da/2,xa=0,Ca=0,Fa=O,Ma=Y,Sa=G,Ba=H,ca=this._getTargetAnchor().toLowerCase();if("auto"===ca){if(ca=r.getBox)ca=ca(),xa=Math.max(ca.l,M),Fa=Math.min(ca.l+ca.w,M+O),Ca=Math.max(ca.t,N),Ma=Math.min(ca.t+
ca.h,N+Y),Sa+=M,Ba+=N;M=Ba-Ca>=da;N=Ma-Ba>=da;O=Fa-Sa>=X.w;X=Sa-xa>=X.w;Ba-Ca>ia&&Ma-Ba>=ia&&(O?(ba="",L="Left",U="",ha="right"):X&&(ba="",L="Right",U="",ha="left"));L&&ba&&Sa-xa>Z&&Fa-Sa>=Z&&(M?(L="",ba="bottom",ha="",U="top"):N&&(L="",ba="top",ha="",U="bottom"));L&&ba&&(O&&M?(L="Left",ba="bottom",ha="right",U="top"):O&&N?(L="Left",ba="top",ha="right",U="bottom"):X&&N?(L="Right",ba="top",ha="left",U="bottom"):X&&M&&(L="Right",ba="bottom",ha="left",U="top"));this._anchor=U&&ha?U+"-"+ha:U||ha}else ba=
L="",-1!==ca.indexOf("top")?ba="bottom":-1!==ca.indexOf("bottom")&&(ba="top"),-1!==ca.indexOf("left")?L="Right":-1!==ca.indexOf("right")&&(L="Left"),this._anchor=this._getTargetAnchor();ha=ba+L;switch(ha){case "top":case "bottom":J=14;break;case "Left":case "Right":I=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":J=14,I=-16}d.set(this.domNode,{left:G+"px",top:H+"px",right:null,bottom:null});G={left:null,right:null,top:null,bottom:null};L?G[L.toLowerCase()]=I+E+"px":G.left=
-Z+"px";ba?G[ba]=J+K+"px":G.top=-P+"px";d.set(this._positioner,G);this._showPointer(ha)},_showPointer:function(E){b.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));b.remove(this._outerPointer,["right","left","hidden"]);"Right"===E||"Left"===E?(E=E.toLowerCase(),b.add(this._outerPointer,E)):b.add(this._pointer,E)},_setPagerCallbacks:function(E,G,H){if(this.pagingControls&&(E!==this||this._pagerScope&&this._pagerScope!==this)&&E!==this._pagerScope){this._pagerScope=
E;E===this&&(G=this.selectPrevious,H=this.selectNext);var K=this._eventConnections;c.disconnect(K[1]);c.disconnect(K[2]);G&&(K[1]=c.connect(this._prevFeatureButton,"onclick",E,G));H&&(K[2]=c.connect(this._nextFeatureButton,"onclick",E,H))}},_getLocation:function(E){var G=E&&E.geometry;if(G)switch(G.type){case "point":var H=G;if(E.isAggregate()){E=E.getChildGraphics();var K=E[0];E=(K=K.geometry&&K.geometry.spatialReference)&&new F({points:a.map(E,function(I){I=I.geometry;return[I.x,I.y]}),spatialReference:K.toJson()});
K=x.getDenormalizedExtent(E)}break;case "multipoint":H=G.getPoint(0);K=x.getDenormalizedExtent(G);break;case "polyline":case "polygon":H=G.getPoint(0,0),K=x.getDenormalizedExtent(G)}return[H,K]},_zoomToFeature:function(E){E.preventDefault();var G=this.features,H=this.selectedIndex;E=this.map;if(G)if(H=this._getLocation(G[H]),G=H[0],H=H[1],G||(G=this.location),H&&H.intersects(this.location)||(this.location=G),H&&H.getWidth()&&H.getHeight())E.setExtent(H,!0);else{var K=E.getNumLevels();H=E.getLevel();
var I=E.getMaxZoom(),J=this.zoomFactor||1;0<K?H!==I&&(K=H+J,K>I&&(K=I),E.navigationManager._wheelZoom({value:K-H,mapPoint:G},!0)):E.navigationManager._wheelZoom({value:1/Math.pow(2,J)*2,mapPoint:G},!0)}},_updatePagingControls:function(){var E=this._prevFeatureButton,G=this._nextFeatureButton,H=this.selectedIndex,K=this.features?this.features.length:0;this.pagingControls&&1<K?(0===H?b.add(E,"hidden"):b.remove(E,"hidden"),H===K-1?b.add(G,"hidden"):b.remove(G,"hidden")):(b.add(E,"hidden"),b.add(G,"hidden"))},
_updatePagingInfo:function(){var E=this.features?this.features.length:0,G=this._nls,H="\x26nbsp;";this.pagingInfo&&1<E&&G.NLS_pagingInfo&&(H=z.substitute({index:this.selectedIndex+1,total:E},G.NLS_pagingInfo));E&&(G=this.getSelectedFeature(),E=G.getInfoTemplate(),G=G.getTitle(),E&&!/esri\.InfoTemplate/.test(E.declaredClass)&&this.titleInBody||!G||(H=G+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var E=this.features,G=this.deferreds,H=E?E.length:0,K=this._spinner,
I=this._actionList,J=this._nls;this._updatePagingControls();this._updatePagingInfo();H?b.remove(I,"hidden"):b.add(I,"hidden");G&&G.length?E?b.remove(K,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+J.NLS_searching+"...\x3c/div\x3e"):b.add(K,"hidden");H||G&&G.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+J.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});B.setObject("dijit.Popup",D,t);return D})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){D=D(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var b=B.hitch;this.__set_title=b(this,this.__set_title);this.__err_title=b(this,this.__err_title);this.__set_content=b(this,this.__set_content);this.__err_content=b(this,this.__err_content)},
setMap:function(b){this.map=b},unsetMap:function(b){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(b,g){q.isDefined(b)?B.isObject(b)?n.place(b,g,"only"):g.innerHTML=b:g.innerHTML=""},startupDijits:function(b){this._processDijits(b)},destroyDijits:function(b){this._processDijits(b,!0)},getDijits:function(b){var g=[];b&&1===b.children.length&&(b=b.children[0])&&(g=(g=f.byNode(b))?
[g]:f.findWidgets(b));return g},_processDijits:function(b,g){var e=this.getDijits(b);a.forEach(e,function(d){if(g){if(d._started&&!d._destroyed)try{d.destroyRecursive?d.destroyRecursive():d.destroy&&d.destroy()}catch(h){}}else if(!d._started)try{d.startup()}catch(h){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var b=this.map;this.__handles=[c.connect(b,"onPan",this,this.__onMapPan),c.connect(b,"onZoomStart",this,this.__onMapZmStart),c.connect(b,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var b=this.__handles;b&&(a.forEach(b,c.disconnect,c),this.__handles=null)},__onMapPan:function(b,g){this.move(g,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new l(this.coords));this.hide(null,!0)},__onMapExtChg:function(b,g,e){b=this.map;var d=this.mapCoords;d?this.show(d,null,!0):(g=e?b.toScreen(this.__mcoords):this.coords.offset(g&&g.x||0,g&&g.y||0),this.show(g,null,!0))},__setValue:function(b,g){this[b].innerHTML="";var e="_dfd"+
b,d=this[e];d&&-1===d.fired&&(d.cancel(),this[e]=null);q.isDefined(g)&&(g instanceof k?(this[e]=g,g.addCallbacks(this["__set"+b],this["__err"+b])):this.__render(b,g))},__set_title:function(b){this._dfd_title=null;this.__render("_title",b)},__err_title:function(b){this._dfd_title=null},__set_content:function(b){this._dfd_content=null;this.__render("_content",b)},__err_content:function(b){this._dfd_content=null},__render:function(b,g){var e=this[b];this.place(g,e);this.isShowing&&(this.startupDijits(e),
"_title"===b&&this._adjustContentArea&&this._adjustContentArea())}});return m.InfoWindowBase=D})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z){function v(y){return"sizeInfo"===y.type}D=D(z,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",B.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",B.hitch(this,this._processFeatures));this.on("set-features",B.hitch(this,this._processFeatures));this.on("selection-change",B.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(y){if(y&&y.length){this.clearFeatures(!0);var C,F;y[0]instanceof k?F=y:C=y;C?this._updateFeatures(null,C):(this.deferreds=F,F=F.slice(0),a.forEach(F,function(x){x.addBoth(B.hitch(this,
this._updateFeatures,x))},this))}},clearFeatures:function(y){this.features=this.deferreds=this._marked=null;this.count=0;var C=this.selectedIndex;this.selectedIndex=-1;if(-1<C)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!y})},getSelectedFeature:function(){var y=this.features;if(y)return y[this.selectedIndex]},select:function(y){0>y||y>=this.count||(this.selectedIndex=y,this.onSelectionChange())},enableHighlight:function(y){this._highlighted=y.graphics.add(new f(new m(0,0,y.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(y);this.markerSymbol||(y=this.markerSymbol=new g,y.setStyle(g.STYLE_TARGET),y._setDim(16,16,0),y.setOutline(new d(e.STYLE_SOLID,new c([0,255,255]),2,d.CAP_ROUND,d.JOIN_ROUND)),y.setColor(new c([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new e(e.STYLE_SOLID,new c([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new h(h.STYLE_NULL,new e(e.STYLE_SOLID,new c([0,255,255]),2),new c([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new h(h.STYLE_SOLID,new e(e.STYLE_SOLID,new c([0,255,255]),1.33),null))},disableHighlight:function(y){var C=this._highlighted;C&&(C.hide(),y.graphics.remove(C),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var y=this.features&&this.features[this.selectedIndex];this._highlighted&&y&&y.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(y,C){var F=C.geometry,x=this._highlighted;if(F&&x){x.hide();!x._graphicsLayer&&y&&y.graphics.add(x);x.setGeometry(q.fromJson(F.toJson()));switch(F.type){case "point":case "multipoint":var u=C.getLayer(),w=C.symbol||u&&u._getSymbol(C);if(u&&w){var A;F=w.xoffset||0;var E=w.yoffset||0,G=w.angle||0;switch(w.type){case "simplemarkersymbol":var H=A=w.size||0;break;case "picturemarkersymbol":H=w.width||0;A=w.height||0;break;case "textsymbol":H=A=w.font&&w.font.size||0}var K=C.symbol?
null:u._getRenderer(C);(u=this._getSizeInfo(K))?w=u=K.getSize(C,{sizeInfo:u,shape:w.style,resolution:y&&y.getResolutionInMeters&&y.getResolutionInMeters()}):null!=C.size?w=u=C.size:(w=H,u=A);K=this.markerSymbol;w&&u&&(F&&(F=F/H*w),E&&(E=E/A*u),K._setDim(w+4,u+4,0));K.setOffset(F,E);K.setAngle(G)}break;case "polyline":K=this.lineSymbol;break;case "polygon":K=this.fillSymbol}x.setSymbol(K)}else x&&x.hide()},showClosestFirst:function(y){var C=this.features;if(C&&C.length){if(1<C.length){var F,x=Infinity,
u=-1,w,A=l.getLength,E=y.spatialReference;y=y.normalize();for(F=C.length-1;0<=F;F--)if(w=C[F].geometry){var G=w.spatialReference;var H=0;try{var K="point"===w.type?w:w.getExtent().getCenter();K=K.normalize();E&&G&&!E.equals(G)&&E._canProject(G)&&(K=E.isWebMercator()?b.geographicToWebMercator(K):b.webMercatorToGeographic(K));H=A(y,K)}catch(I){}0<H&&H<x&&(x=H,u=F)}0<u&&(C.splice(0,0,C.splice(u,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=y)},_trackMapLevelChange:function(y){this._untrackMapLevelChange();
this._mapLevelChangeHandle=y.on("extent-change",B.hitch(this,function(C){C.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(y){y=a.indexOf(this.deferreds,y);if(-1!==y)return this.deferreds.splice(y,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(y){var C=this._marked;C&&(this._marked=null,this.showClosestFirst(C));this.onDfdComplete(y)},
_updateFeatures:function(y,C){if(y){if(this.deferreds){var F=this._unbind(y);if(F)if(C&&C instanceof Error){if(this._fireComplete(C),2===F)this.onSetFeatures()}else if(C&&C.length)if(this.features){var x=a.filter(C,function(u){return-1===a.indexOf(this.features,u)},this);this.features=this.features.concat(x);this.count=this.features.length;this._fireComplete();if(2===F)this.onSetFeatures()}else{this.features=C;this.count=C.length;this.selectedIndex=0;this._fireComplete();if(2===F)this.onSetFeatures();
this.select(0)}else if(this._fireComplete(),2===F)this.onSetFeatures()}}else this.features=C,this.count=C.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(y){return y?y.sizeInfo||a.filter(y.visualVariables,v)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};a.forEach(this._updateEndHandles,function(y){y.remove()});this._updateEndHandles=[]},_processFeatures:function(){a.forEach(this.features,function(y){(y=y.getLayer())&&!this._featureLayers[y.id]&&
(1===y.currentMode||0===y.currentMode&&6===y.mode)&&y.objectIdField&&y.hasXYFootprint&&y.queryFeatures&&(this._featureLayers[y.id]=y,y=y.on("update-end",B.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(y))},this)},_fLyrUpdateEndHandler:function(y){if(!y.error){var C=this,F=y.target,x=F.getSelectedFeatures(),u=0===F.currentMode&&6===F.mode,w={},A=[];a.forEach(this.features,function(E){if(E.getLayer()===F){var G=E.attributes[F.objectIdField];w[G]=E;A.push(G)}});A.length&&(y=new t,
y.objectIds=A,F.queryFeatures(y,function(E){a.forEach(E.features,function(G){var H=w[G.attributes[F.objectIdField]],K=!1;H.geometry!==G.geometry||F.hasWebGLSurface()?(H.setGeometry(G.geometry),K=!0):u&&x&&-1!==a.indexOf(x,G)&&(K=!0);K&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(G.geometry)},C)}))}},_checkFeatureResolution:function(){var y=this.getSelectedFeature(),C=this.map;if(y&&C){var F=y.getLayer();if(F){var x=y.getResolution();2===F.currentMode&&y.geometry&&
x&&x>C.getResolution()&&(C=C.getResolutionForPopup(),(F=this._refetchFeature(y,C,F))&&F.then(B.hitch(this,this._updateFeatureResolution,y,C)))}}},_refetchFeature:function(y,C,F){if(y=this._createQueryForCustomResolution(y,C,F))return F.queryFeatures(y).then(function(x){return x&&x.features[0]})},_createQueryForCustomResolution:function(y,C,F){F=F.objectIdField;var x=y.attributes;x=x&&F&&x[F];if(null==x)return null;var u=new t;u.objectIds=[x];u.maxAllowableOffset=C;u.outFields=[F];u.outSpatialReference=
y.geometry.spatialReference;return u},_updateFeatureResolution:function(y,C,F){y.getResolution()!==C&&(y.setResolution(C),y.setGeometry(F.geometry),this._highlighted&&y===this.getSelectedFeature()&&this._highlighted.setGeometry(y.geometry))}});return r.PopupBase=D})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(D){return{add:function(B,a){B.popupManager||(B.popupManager=new D(a),B.popupManager.setMap(B))},remove:function(B){var a=B.popupManager;a&&(a.unsetMap(),B.popupManager=
void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){var h;f=f(e,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(t){this._mapClickHandler=q.hitch(this,this._mapClickHandler)},
setMap:function(t){if(this.map)if(t!==this.map)this.unsetMap();else return;this.map=t;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(t){var z;if(t&&(z=t.getLayer())&&(t=z.id,this._featureLayersCache[t])){var v=t.lastIndexOf("_");-1<v&&(t=t.substring(0,v),z=this.map.getLayer(t))}return z},_enabledSetter:function(t){this.enabled=t;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&
(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(t){var z=this.map.infoWindow,v=t.graphic;z&&this.map.loaded&&(z.clearFeatures&&z.setFeatures?this._showPopup(t):v&&v.getInfoTemplate()&&this._showInfoWindow(v,t.mapPoint))},_showPopup:function(t){var z=this.map,v=z.infoWindow,y=this,C=[],F=[z.graphics].concat(r.map(z.graphicsLayerIds,z.getLayer,z));r.forEach(F,function(w){var A=
w.getFeatureReduction&&w.getFeatureReduction();w&&w.loaded&&w.infoTemplate&&!w.suspended&&(!A||!y._isReductionEnabled(w)||A.infoTemplate&&!A.disablePopup)&&C.push(w)});var x=[];r.forEach(z.layerIds,function(w){(w=z.getLayer(w))&&w.loaded&&!w.suspended&&(y._isImageServiceLayer(w)&&w.infoTemplate?C.push(w):"esri.layers.WMSLayer"===w.declaredClass&&w.getFeatureInfoURL?C.push(w):"esri.layers.ArcGISDynamicMapServiceLayer"!==w.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==w.declaredClass||!w.infoTemplates||
x.push(w))});var u=z.getResolutionForPopup();this._getSubLayerFeatureLayers(x,u).then(function(w){C=C.concat(w);w=t.graphic&&t.graphic.getParentGraphic()||t.graphic;var A=null;w&&w.getInfoTemplate()&&!y._isImageServiceLayer(w.getLayer())&&(A=w);if(C.length||A){var E=y._calculateClickTolerance(C),G=t.screenPoint;w=z.toMap(new B(G.x-E,G.y+E));E=z.toMap(new B(G.x+E,G.y-E));var H=new D(w.x,w.y,E.x,E.y,z.spatialReference);if(H=H.intersects(z.extent)){var K=new k,I=!!A,J=!0;w=r.map(C,function(L){K.timeExtent=
L.useMapTime?z.timeExtent:null;var M=y._isReductionEnabled(L);L=M?L.getFeatureReductionLayer():L;var N=y._featureLayersCache[L.id];if(y._isImageServiceLayer(L)){K.geometry=t.mapPoint;J=!1;var O={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};y._isTiledImageServiceLayer(L)?O=L.fetchPopupFromTiles(K):(O=L.queryVisibleRasters(K,O),O.addCallback(function(){var ba=L.getVisibleRasters();I=I||0<ba.length;return ba}))}else if("esri.layers.WMSLayer"===L.declaredClass){O=new m;var Y=L._getPopupGraphic(z,
t.screenPoint);Y?(O.resolve([Y]),I=!0):O.resolve([])}else N||"function"===typeof L.queryFeatures&&(0===L.currentMode||1===L.currentMode)?(K.geometry=H,O=L.queryFeatures(K),O.addCallback(function(ba){var ha=[];r.forEach(ba.features,function(U){U.visible&&(ha.push(U),N&&U.setResolution(u))});I=I||0<ha.length;return ha})):(O=new m,Y=r.filter(L.graphics,function(ba){return ba&&ba.visible&&H.intersects(ba.geometry)}),M&&y._isParentLayer(L,A)&&(M=y._findGraphicById(Y,A,"cluster_id"))&&(A=M),I=I||0<Y.length,
O.resolve(Y));return O});A&&(E=new m,E.resolve([A]),w.unshift(E));r.some(w,function(L){return!L.isFulfilled()})||I?(v.setFeatures(w),v.show(t.mapPoint,{closestFirst:J})):(v.hide(),v.clearFeatures())}}})},_getSubLayerFeatureLayers:function(t,z,v){z=z||null;var y=v||new m,C=[];v=t.length;var F=this.map.getScale(),x=!1,u=this,w=0;a:for(;w<v;w++){var A=t[w],E=A.dynamicLayerInfos||A.layerInfos;if(E){var G=null;A._params&&(A._params.layers||A._params.dynamicLayers)&&(G=A.visibleLayers);G=c._getVisibleLayers(E,
G);for(var H=c._getLayersForScale(F,E),K=E.length,I=0;I<K;I++){var J=E[I],L=J.id,M=A.infoTemplates[L];if(!J.subLayerIds&&M&&M.infoTemplate&&-1<r.indexOf(G,L)&&-1<r.indexOf(H,L)){if(!h){x=!0;break a}var N=A.id+"_"+L,O=this._featureLayersCache[N];O&&O.loadError||(O||((O=M.layerUrl)||(O=J.source?this._getLayerUrl(A.url,"/dynamicLayer"):this._getLayerUrl(A.url,L)),O=new h(O,{parentLayer:A,id:N,drawMode:!1,mode:h.MODE_SELECTION,outFields:this._getOutFields(M.infoTemplate),resourceInfo:M.resourceInfo,source:J.source}),
this._featureLayersCache[N]=O),O.setDefinitionExpression(A.layerDefinitions&&A.layerDefinitions[L]),O.setGDBVersion(A.gdbVersion),O.setInfoTemplate(M.infoTemplate),O.setMaxAllowableOffset(z),O.setUseMapTime(!!A.useMapTime),A.layerDrawingOptions&&A.layerDrawingOptions[L]&&A.layerDrawingOptions[L].renderer&&O.setRenderer(A.layerDrawingOptions[L].renderer),C.push(O))}}}}if(x){var Y=new m;d(["./layers/FeatureLayer"],function(ha){h=ha;Y.resolve()});Y.then(function(){u._getSubLayerFeatureLayers(t,z,y)})}else{var ba=
[];r.forEach(C,function(ha){if(!ha.loaded){var U=new m;b.once(ha,"load, error",function(){U.resolve()});ba.push(U.promise)}});ba.length?g(ba).then(function(){C=r.filter(C,function(ha){return!ha.loadError&&ha.isVisibleAtScale(F)});y.resolve(C)}):(C=r.filter(C,function(ha){return ha.isVisibleAtScale(F)}),y.resolve(C))}return y.promise},_getLayerUrl:function(t,z){var v=t.indexOf("?");return-1===v?t+"/"+z:t.substring(0,v)+"/"+z+t.substring(v)},_getOutFields:function(t){var z=t.info&&t.info.fieldInfos;
if(z&&z.length&&"esri.dijit.PopupTemplate"===t.declaredClass){var v=[];r.forEach(z,function(y){var C=y.fieldName&&y.fieldName.toLowerCase();C&&"shape"!==C&&0!==C.indexOf("relationships/")&&v.push(y.fieldName)})}else v=["*"];return v},_calculateClickTolerance:function(t){var z=l("esri-touch")?9:6,v,y;r.forEach(t,function(C){if(v=C.renderer)"esri.renderer.SimpleRenderer"===v.declaredClass?((y=v.symbol)&&y.xoffset&&(z=Math.max(z,Math.abs(y.xoffset))),y&&y.yoffset&&(z=Math.max(z,Math.abs(y.yoffset)))):
"esri.renderer.UniqueValueRenderer"!==v.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==v.declaredClass||r.forEach(v.infos,function(F){(y=F.symbol)&&y.xoffset&&(z=Math.max(z,Math.abs(y.xoffset)));y&&y.yoffset&&(z=Math.max(z,Math.abs(y.yoffset)))})});return z},_showInfoWindow:function(t,z){var v=this.map.infoWindow,y=t.geometry;y=y&&"point"===y.type?y:z;var C=t.getContent();v.setTitle(t.getTitle());if(C&&q.isString(C.id)){var F=n.byId(C.id);F&&F.set&&/_PopupRenderer/.test(F.declaredClass)&&F.set("showTitle",
!1)}v.setContent(C);v.show(y)},_findGraphicById:function(t,z,v){var y,C=(z=z.attributes)&&z[v];r.some(t,function(F){var x=F.attributes;x&&x[v]===C&&(y=F);return!!y});return y},_isParentLayer:function(t,z){var v=z&&z.getLayer();return t&&v===t},_isReductionEnabled:function(t){return t&&t.isFeatureReductionActive&&t.isFeatureReductionActive()},_isImageServiceLayer:function(t){return"esri.layers.ArcGISImageServiceLayer"===t.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===t.declaredClass||
"esri.layers.RasterXLayer"===t.declaredClass},_isTiledImageServiceLayer:function(t){return"esri.layers.RasterXLayer"===t.declaredClass}});return a.PopupManager=f})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x){var u=c.connect,w=c.disconnect,A=e("chrome"),E=e("safari"),G=[r.NUMPAD_PLUS,61,187,r.NUMPAD_MINUS,173,189,r.UP_ARROW,r.NUMPAD_8,r.RIGHT_ARROW,r.NUMPAD_6,r.DOWN_ARROW,r.NUMPAD_2,r.LEFT_ARROW,r.NUMPAD_4,r.PAGE_UP,r.NUMPAD_9,r.PAGE_DOWN,r.NUMPAD_3,r.END,r.NUMPAD_1,r.HOME,r.NUMPAD_7];D=D(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,K){this.map=H;B.mixin(this,K);var I=H.__container;e("esri-pointer")?(this.pointerEvents=
new b(I,{map:H}),this.eventModel="pointer"):e("esri-touch")?(e("ios")||(this.mouseEvents=new q(I,{map:H})),this.touchEvents=new l(I,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new q(I,{map:H}),this.eventModel="mouse");this._zoomRect=new t(null,new x(g.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=B.hitch(this,this._adjustPinch);this._adjustPinchEnd=B.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var K=this.mouseEvents;n.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new v(0,0),B.mixin(this._dragOrigin,H.screenPoint),w(this._panStartHandle),w(this._panHandle),w(this._panEndHandle),this._panStartHandle=u(K,"onMouseDragStart",this,this._panStart),this._panHandle=u(K,"onMouseDrag",this,this._pan),this._panEndHandle=u(K,"onMouseUp",this,this._panEnd),A||E)&&(H.preventDefault(),f.curNode&&f.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){w(this._panStartHandle);w(this._panHandle);w(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var K=this.map;K.__panning&&(K.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),K.resetMapCursor())},_zoomInit:function(H){var K=this.map,I=this.pointerEvents||this.mouseEvents;(n.isLeft(H)||H.pointerType)&&K.isRubberBandZoom&&H.shiftKey&&(K.setCursor("crosshair"),this._dragOrigin=
B.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=u(I,"onSwipeMove",this,this._zoom),this._zoomEndHandle=u(I,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=u(I,"onMouseDrag",this,this._zoom),this._zoomEndHandle=u(I,"onMouseUp",this,this._zoomEnd)),A&&H.preventDefault())},_zoom:function(H){var K=this.map,I=this._normalizeRect(H).offset(K.__visibleRect.x,K.__visibleRect.y);H=K.graphics;var J=this._zoomRect;J.geometry||K.setCursor("crosshair");
J.geometry&&H.remove(J,!0);var L=K.toMap(new v(I.x,I.y));I=K.toMap(new v(I.x+I.width,I.y+I.height));I=new C(L.x,L.y,I.x-L.x,L.y-I.y,K.spatialReference);I._originOnly=!0;J.setGeometry(I);H.add(J,!0)},_zoomEnd:function(H){var K=this._zoomRect,I=this.map,J=I.extent,L=I.spatialReference;w(this._zoomHandle);w(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(I._canZoom(this._zoomDir)&&K.getDojoShape()){I.graphics.remove(K);K.geometry=null;H=this._normalizeRect(H);H.x+=I.__visibleRect.x;
H.y+=I.__visibleRect.y;if(-1===this._zoomDir){var M=J.getWidth();H=(M*I.width/H.width-M)/2;L=new y(J.xmin-H,J.ymin-H,J.xmax+H,J.ymax+H,L)}else J=I.toMap({x:H.x,y:H.y+H.height}),H=I.toMap({x:H.x+H.width,y:H.y}),L=new y(J.x,J.y,H.x,H.y,L);I._extentUtil(null,null,L)}K.getDojoShape()&&I.graphics.remove(K,!0);this._zoomDir=0;I.resetMapCursor()},_wheelZoom:function(H,K){var I=this.map;if(!K){if(I.smartNavigation&&!H.shiftKey&&!I._isPanningOrZooming()){I.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}var J=H.timeStamp;if(!d.isDefined(J)||0>=J)J=(new Date).getTime();if(100>(this._mwts?J-this._mwts:J))return;this._mwts=J}I._canZoom(H.value)&&I._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var K=this.map;if(H.shiftKey&&!K._isPanningOrZooming())this._setScrollWheelPan(!1),K.enableScrollWheelZoom(),this._wheelZoom(H);else{var I=0,J=0;e("ff")?H.axis===H.HORIZONTAL_AXIS?I=-H.detail:J=-H.detail:(I=H.wheelDeltaX,J=H.wheelDeltaY);
K.translate(I,J)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);w(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=u(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var K=H.keyCode,I=this.map;if(-1!==a.indexOf(G,K)){if(K===r.NUMPAD_PLUS||61===K||187===K)I._extentUtil({numLevels:1});else if(K===r.NUMPAD_MINUS||173===K||189===K)I._extentUtil({numLevels:-1});else{I.__panning||I.__panStart(0,0);switch(K){case r.UP_ARROW:case r.NUMPAD_8:this._keyDy+=10;break;
case r.RIGHT_ARROW:case r.NUMPAD_6:this._keyDx-=10;break;case r.DOWN_ARROW:case r.NUMPAD_2:this._keyDy-=10;break;case r.LEFT_ARROW:case r.NUMPAD_4:this._keyDx+=10;break;case r.PAGE_UP:case r.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case r.PAGE_DOWN:case r.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case r.END:case r.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case r.HOME:case r.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}I.__pan(this._keyDx,this._keyDy)}k.stop(H)}},_keyEnd:function(H){var K=
this.map;K.__panning&&H.keyCode!==r.SHIFT&&(K.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var K=this.map;K=K._zoomAnim||K._panAnim;if(H.shiftKey)return!1;K&&K._active&&(K.stop(),K._fire("onEnd",[K.node]));this._dragOrigin=new v(0,0);B.mixin(this._dragOrigin,H.screenPoint);w(this._swipeHandle);w(this._swipeEndHandle);this._swipeHandle=u(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=u(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var K=this.map;K.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,K.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(K.setCursor("move"),K.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){w(this._swipeHandle);w(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var K=this.map;K.__panning&&(K.resetMapCursor(),K.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var K=this.map,I=K._zoomAnim||K._panAnim;I&&I._active?(I.stop(),I._fire("onEnd",[I.node])):K.__panning&&(H.screenPoint=new v(this._panX,this._panY),H.mapPoint=K.toMap(H.screenPoint),this._swipeEnd(H));w(this._pinchHandle);w(this._pinchEndHandle);this._pinchHandle=u(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=u(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var K=this.map;
if(H.screenPoints){this.currLength=F.getLength(H.screenPoints[0],H.screenPoints[1]);if(K.__zooming){var I=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(K.extent,I,this._dragOrigin);K.__zoom(this._zoomStartExtent,I,this._dragOrigin)}else this._dragOrigin=new v((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,K.__zoomStart(K.extent,this._dragOrigin);this._pinchScale=I;K._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;w(this._pinchHandle);w(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var K=this.currLength/this._length,I=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/K,this._zoomAnimAnchor);if(H.__tileInfo){var J=z.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),L=H.__getExtentForLevel(J.lod.level,this._zoomAnimAnchor),
M=H.getMinZoom(),N=H.getMaxZoom(),O=L.extent;L=L.lod;var Y=I/O.getWidth(),ba=J.lod.level;1>K?Y>K&&ba--:Y<K&&ba++;ba<M?ba=M:ba>N&&(ba=N);ba!==J.lod.level&&(L=H.__getExtentForLevel(ba,this._zoomAnimAnchor),O=L.extent,L=L.lod);this._zoomEndExtent=O;this._zoomEndLod=L;H._zoomAnim=h.animateRange({range:{start:I/this._zoomStartExtent.getWidth(),end:Y},duration:g.defaults.map.zoomDuration,rate:g.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var K=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(K,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,K=H.extent.getWidth()/this._zoomEndExtent.getWidth(),I=this.__scaleExtent(H.extent,1/K,this._zoomAnimAnchor),J=this._dragOrigin,
L=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(I,K,J,L,!0)},__scaleExtent:function(H,K,I){I=I||H.getCenter();K=H.expand(K);var J=H.xmin-(K.getWidth()-H.getWidth())*(I.x-H.xmin)/H.getWidth();I=H.ymax-(K.getHeight()-H.getHeight())*(I.y-H.ymax)/H.getHeight();return new y(J,I-K.getHeight(),J+K.getWidth(),I,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var K=this._dragOrigin.x,I=this._dragOrigin.y;
H=new C((H.x<K?H.x:K)-this.map.__visibleRect.x,(H.y<I?H.y:I)-this.map.__visibleRect.y,Math.abs(H.x-K),Math.abs(H.y-I));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=u(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=u(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=u(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=u(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){w(this._panInitHandle);this._panInitHandle=null;w(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?u(this.pointerEvents,"onSwipeStart",this,this._zoomInit):u(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){w(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=u(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){w(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=u(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){w(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=u(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=u(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=u(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=u(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
u(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=u(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){w(this._dblClickHandle);w(this._zoomOutHandle);this._dblTapHandle&&w(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=u(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){w(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=u(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){w(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=u(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
u(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){w(this._keyHandle);w(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,K=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<K.length;H++)w(K[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return m.MapNavigationManager=D})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(D,
B,a,c,k,n,r,f,m,q){var l=k.connect,b=k.disconnect;D=D([f],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==c("mac")?1:3,wheelDivisor:2>c("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(g,e){this.node=g;a.mixin(this,e);var d=function(h){n.stop(h);return!1};c("mozilla")&&B.style(g,"MozUserSelect","none");this._handles=[l(g,"onselectstart",d),l(g,"ondragstart",d),l(g,"onmouseenter",this,this._onMouseEnterHandler),l(g,
"onmouseleave",this,this._onMouseLeaveHandler),l(g,"onmousedown",this,this._onMouseDownHandler),l(g,"onclick",this,this._onClickHandler),l(g,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=l(g,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=l(g,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=a.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(d=this.map)?d.isScrollWheelZoom||
d.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(g,e){if(!this._preventClick||"onClick"!==g&&"onDblClick"!==g){if(this[g])this[g](e);if(this.map&&this.map[g])this.map[g](e)}},_processEvent:function(g){g=n.fix(g,g.target);var e=this.map,d=e&&e.position;d&&("DOMMouseScroll"===g.type&&3>c("ff")?g.screenPoint=new q(window.scrollX+g.screenX-d.x,window.scrollY+g.screenY-d.y):g.screenPoint=new q(g.pageX-d.x,g.pageY-d.y),g.mapPoint=e.extent?e.toMap(g.screenPoint):new m);
g.numPoints=0;return g},_onMouseEnterHandler:function(g){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=l(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=l(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(g))},_onMouseLeaveHandler:function(g){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(g))},_onMouseMoveHandler:function(g){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(g))},_onMouseDownHandler:function(g){b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=l(document,"onmousemove",this,this._onMouseDragHandler);this._startX=g.pageX;this._startY=g.pageY;this._fire("onMouseDown",this._processEvent(g))},_onMouseUpHandler:function(g){var e=this.node;e.releaseCapture&&e.releaseCapture();
b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=l(e,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(g))},_onMouseDragHandler:function(g){b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=l(document,"onmousemove",this,this._onMouseDraggingHandler);b(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=l(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=l(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(g))},_onMouseDraggingHandler:function(g){n.stop(g);this._fire("onMouseDrag",this._processEvent(g))},_onDragMouseUpHandler:function(g){var e=this.node;e.releaseCapture&&e.releaseCapture();this._dragEnd=!0;b(this._docLeaveConnect);b(this._onMouseDragHandler_connect);b(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
l(e,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=l(e,"onmouseup",this,this._onMouseUpHandler);g=this._processEvent(g);this._fire("onMouseDragEnd",g);this._fire("onMouseUp",g)},_onDocMouseOut:function(g){var e=9>c("ie")?g.toElement:g.relatedTarget,d=e&&e.nodeName.toLowerCase();(!e||(c("chrome")||c("safari"))&&"html"===d)&&this._onDragMouseUpHandler(g)},_onClickHandler:function(g){g=this._processEvent(g);if(g.pageX===this._startX&&g.pageY===this._startY){clearTimeout(this._clickTimer);
var e={},d="movementX"in g,h;for(h in g)"mozInputSource"===h||"mozPressure"===h||d&&("webkitMovementX"===h||"webkitMovementY"===h)||(e[h]=g[h]);this._clickEvent=e;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>c("ie")&&(this._clickEvent.graphic=r._ieGraphic,delete r._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(g){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(g))},
_onMouseWheelHandler:function(g){var e=this.map;(e?e.isScrollWheelZoom||e.isScrollWheelPan:this.preventPageScroll)&&n.stop(g);e=c("ff")||c("mozilla")?-g.detail/this.mozWheelDivisor:g.wheelDelta/this.wheelDivisor;var d=Math.abs(e);d=d<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;g.value=0>e?-d:d;this._fire("onMouseWheel",this._processEvent(g))},_onKeyDownHandler:function(g){this._fire("onKeyDown",g)},_onKeyUpHandler:function(g){this._fire("onKeyUp",g)},enableMouseWheel:function(g){b(this._scrollHandle);
this._scrollHandle=l(this.node,c("ff")||c("mozilla")?g?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(g){this.doubleClickDuration=g?0:this._initialDuration},preventClickEvents:function(g){this._preventClick=g},destroy:function(){var g=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
e;for(e=0;e<g.length;e++)b(g[e]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return r.MouseEvents=D})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(D,B,a,c,k,n,r,f,m){D=D([r],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(q,l){this.node=q;a.mixin(this,l);B.setSelectable(q,!1);this._touchStart=a.hitch(this,this._touchStart);this._touchMove=a.hitch(this,this._touchMove);this._touchEnd=a.hitch(this,this._touchEnd);this._touchCancel=a.hitch(this,this._touchCancel);this._fireClickEvent=a.hitch(this,this._fireClickEvent);q.addEventListener("touchstart",
this._touchStart,!1);q.addEventListener("touchmove",this._touchMove,!1);q.addEventListener("touchend",this._touchEnd,!1);q.addEventListener("touchcancel",this._touchCancel,!1);this.map&&c("ios")&&(this._mouseOver=a.hitch(this,this._mouseOver),this._mouseOut=a.hitch(this,this._mouseOut),this._mouseDown=a.hitch(this,this._mouseDown),this._mouseUp=a.hitch(this,this._mouseUp),this._mouseClick=a.hitch(this,this._mouseClick),q.addEventListener("mouseover",this._mouseOver,!1),q.addEventListener("mouseout",
this._mouseOut,!1),q.addEventListener("mousedown",this._mouseDown,!1),q.addEventListener("mouseup",this._mouseUp,!1),q.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(q){var l=this._touches,b,g=q.changedTouches.length,e,d,h=(new Date).getTime();this._touchStartTS=h;if(!(c("android")&&c("safari")&&1===q.targetTouches.length&&q.touches.length===q.targetTouches.length&&q.targetTouches.length===
q.changedTouches.length&&0===q.changedTouches[0].identifier&&l[q.changedTouches[0].identifier])){this._addTouch(q);for(b=0;b<g;b++){var t=q.changedTouches[b];var z=l[t.identifier]={};z.startX=t.pageX;z.startY=t.pageY;z.startTS=h;-1===this._touchIds.indexOf(t.identifier)&&this._touchIds.push(t.identifier)}this._swipeActive&&(e=this._nodeTouches[0]);this._pinchActive&&(d=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(q,
e))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(q,[e,d]))):2===this._numTouches?this._swipeActive&&(e&&(z=l[this._touchIds[0]],z.startX=e.pageX,z.startY=e.pageY,z.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(q,e))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(q,e))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(q,[e,d])))}},_touchMove:function(q){q.preventDefault();
this._updateTouch(q);var l=this._touches,b,g=q.changedTouches.length,e;if(!(c("android")&&c("safari")&&1===q.targetTouches.length&&q.touches.length===q.targetTouches.length&&q.targetTouches.length===q.changedTouches.length&&0===q.changedTouches[0].identifier&&l[q.changedTouches[0].identifier]&&1<this._touchIds.length)){for(b=0;b<g;b++){var d=q.changedTouches[b];if(e=l[d.identifier]){var h=Math.abs(d.pageX-e.startX);d=Math.abs(d.pageY-e.startY);!e.moved&&(h>=this.tapRadius||d>=this.tapRadius)&&(e.moved=
e.absMoved=!0);var t=t?t:e.moved}}1===this._numTouches?(l=q.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(q,l)):t&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(q,l)))):2===this._numTouches&&(b=this._nodeTouches[0],g=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(q,[b,g])):t&&(t=l[b.identifier],e=l[g.identifier],l=Math.abs(t.startX-e.startX),t=Math.abs(t.startY-e.startY),e=Math.abs(b.pageX-g.pageX),
h=Math.abs(b.pageY-g.pageY),Math.abs(Math.sqrt(e*e+h*h)-Math.sqrt(l*l+t*t))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(q,[b,g])))))}},_touchEnd:function(q){this._removeTouch(q);var l=this._touches,b=q.changedTouches,g,e=b.length,d,h,t=(new Date).getTime(),z=this._touchIds;for(g=0;g<e;g++)if(h=l[b[g].identifier])h.absMoved&&(d=!0),h.pageX=b[g].pageX,h.pageY=b[g].pageY,h.endTS=t;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(q,b[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(q,b));else{if(!d){e=Infinity;d=-Infinity;t=Infinity;var v=-Infinity,y=this.tapStartTolerance,C=[],F=!0;for(g=0;g<z.length;g++)h=l[z[g]],C.push(h),h.startTS<e&&(e=h.startTS),h.startTS>d&&(d=h.startTS),h.endTS<t&&(t=h.endTS),h.endTS>v&&(v=h.endTS),delete l[z[g]];1===C.length&&b[0]&&(l=Math.abs(b[0].pageY-C[0].startY),Math.abs(b[0].pageX-C[0].startX)>=
this.tapRadius||l>=this.tapRadius)&&(F=!1);F&&Math.abs(d-e)<=y&&Math.abs(v-t)<=y&&this._basicTap(q,C)}}else 1===this._numTouches&&this._pinchActive&&(g=this._nodeTouches[0],h=l[g.identifier],h.startX=g.pageX,h.startY=g.pageY,this._pinchActive=h.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(q,[b[0],g])))},_touchCancel:function(q){this._numTouches&&this._touchEnd(q)},_basicTap:function(q,l){var b=(new Date).getTime(),g=this;q=this._processTouchEvent(q,l);this._taps.push({touchInfos:l,ts:b,
event:q});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",q);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var e=g;g=null;clearTimeout(e._tapTimer);e._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(q){var l=this._taps,b=l[0],g=l[1],e=b.touchInfos,d=g&&g.touchInfos;l.length&&(q||(this._taps=[]),b&&g?e.length===d.length?g.ts-b.ts<=this.doubleTapDuration?(1===e.length?
(q=Math.abs(e[0].startX-d[0].startX),e=Math.abs(e[0].startY-d[0].startY),e=q<=this.doubleTapRadius&&e<=this.doubleTapRadius):e=!0,e?this._processedDoubleTap(l):this._processedTap(g)):this._processedTap(g):this._processedTap(g):this._processedTap(b||g))},_processedTap:function(q){var l=q.event;this._fire("onProcessedTap",l);1===q.touchInfos.length?this._fire("onTap",this._fixEvent(l)):2===q.touchInfos.length&&this._fire("onTwoFingerTap",l)},_processedDoubleTap:function(q){var l=1===q[1].touchInfos.length;
if(l){var b=[this._fixEvent(q[0].event),this._fixEvent(q[1].event)];b[1].relatedEvents=b}q=[q[0].event,q[1].event];q[1].relatedEvents=q;this._fire("onProcessedDoubleTap",q[1]);l&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_addTouch:function(q){var l=q.changedTouches,b=this._nodeTouches,g;this._numTouches+=l.length;for(q=0;q<l.length;q++){var e=b.length;var d=!1;for(g=0;g<e&&!(d=b[g].identifier===l[q].identifier);g++);d?this._numTouches--:b.push(l[q])}for(q=b.length-1;0<=q;q--)k.isDescendant(b[q].target,
document.body)||(b.splice(q,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(q){var l=[],b=[],g=q.changedTouches,e=this._nodeTouches;this._numTouches-=g.length;0>this._numTouches&&(this._numTouches=0);for(q=0;q<g.length;q++)l.push(g[q].identifier);for(q=e.length-1;0<=q;q--)-1!==l.indexOf(e[q].identifier)&&b.push(e.splice(q,1)[0]);return b},_updateTouch:function(q){var l=[],b=q.changedTouches,g=this._nodeTouches;for(q=0;q<b.length;q++)l.push(b[q].identifier);for(q=
0;q<g.length;q++){var e=l.indexOf(g[q].identifier);-1!==e&&g.splice(q,1,b[e])}},_mouseOver:function(q){this._fire("onMouseOver",this._processMouseEvent(q))},_mouseOut:function(q){this._fire("onMouseOut",this._processMouseEvent(q))},_mouseDown:function(q){this._fire("onMouseDown",this._processMouseEvent(q))},_mouseUp:function(q){this._fire("onMouseUp",this._processMouseEvent(q))},_mouseClick:function(q){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(q)):(this._clickEvent=q,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(q,l){"onDblClick"===q&&clearTimeout(this._clickTimer);if("onDblClick"===q&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var b=this;setTimeout(function(){b.mouseEvents.preventClickEvents(!1)},350)}if(this[q])this[q](l);if(this.map&&
this.map[q])this.map[q](l)},_fixEvent:function(q){var l={},b;for(b in q)l[b]=q[b];this.map&&(l.screenPoint=l.screenPoints[0],l.mapPoint=l.mapPoints[0]);return l},_processTouchEvent:function(q,l){var b=this.map,g=b&&b.position,e=0;if(g&&l)if(a.isArray(l)){var d;q.screenPoints=[];q.mapPoints=[];for(d=0;d<l.length;d++)if(l[d]){var h=new m(l[d].pageX-g.x,l[d].pageY-g.y);q.screenPoints.push(h);q.mapPoints.push(b.extent?b.toMap(h):new f)}else e++}else q.screenPoint=new m(l.pageX-g.x,l.pageY-g.y),q.mapPoint=
b.extent?b.toMap(q.screenPoint):new f;q.numPoints=l?a.isArray(l)?l.length-e:1:0;return q},_processMouseEvent:function(q){var l=this.map,b=l&&l.position;b&&(q.screenPoint=new m(q.pageX-b.x,q.pageY-b.y),q.mapPoint=l.extent?l.toMap(q.screenPoint):new f);return q},setImmediateTap:function(q){this._immediate=q},destroy:function(){var q=this.node;q.removeEventListener("touchstart",this._touchStart,!1);q.removeEventListener("touchmove",this._touchMove,!1);q.removeEventListener("touchend",this._touchEnd,
!1);q.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(q.removeEventListener("mouseover",this._mouseOver,!1),q.removeEventListener("mouseout",this._mouseOut,!1),q.removeEventListener("mousedown",this._mouseDown,!1),q.removeEventListener("mouseup",this._mouseUp,!1),q.removeEventListener("click",this._mouseClick,!1));B.setSelectable(q,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return n.TouchEvents=D})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(D,B,a,c,k,n,r,f){D=D([n],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==c("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(m,
q){this.node=m;B.mixin(this,q);void 0!==m.style.msTouchAction?m.style.msTouchAction="none":void 0!==m.style.touchAction&&(m.style.touchAction="none");var l=navigator.msPointerEnabled,b=function(g){g.preventDefault()};m.addEventListener("selectstart",b,!1);m.addEventListener("dragstart",b,!1);this._pointerDown=B.hitch(this,this._pointerDown);this._pointerMove=B.hitch(this,this._pointerMove);this._pointerUp=B.hitch(this,this._pointerUp);this._pointerCancel=B.hitch(this,this._pointerCancel);m.addEventListener(l?
"MSPointerDown":"pointerdown",this._pointerDown,!1);m.addEventListener(l?"MSPointerMove":"pointermove",this._pointerMove,!1);m.addEventListener(l?"MSPointerUp":"pointerup",this._pointerUp,!1);m.addEventListener(l?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=B.hitch(this,this._mouseOver),this._mouseOut=B.hitch(this,this._mouseOut),this._mouseLeave=B.hitch(this,this._mouseLeave),this._mouseDown=B.hitch(this,this._mouseDown),this._mouseUp=B.hitch(this,this._mouseUp),
this._mouseClick=B.hitch(this,this._mouseClick),this._mouseWheel=B.hitch(this,this._mouseWheel),this._mouseMove=B.hitch(this,this._mouseMove),this._mouseEnter=B.hitch(this,this._mouseEnter),this._onKeyDown=B.hitch(this,this._onKeyDown),this._onKeyUp=B.hitch(this,this._onKeyUp),m.addEventListener("mouseover",this._mouseOver,!1),m.addEventListener("mouseout",this._mouseOut,!1),m.addEventListener("mouseleave",this._mouseLeave,!1),m.addEventListener("mousedown",this._mouseDown,!1),m.addEventListener("mouseup",
this._mouseUp,!1),m.addEventListener("click",this._mouseClick,!1),m.addEventListener("mousewheel",this._mouseWheel,!1),m.addEventListener("mousemove",this._mouseMove,!1),m.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(m){if(-1<a.indexOf(this._touchIds,m.pointerId))this._pointerUp(m);else{var q=this._touches,l=m.target,b=m.pointerId,g=this._touchIds,e=(new Date).getTime();var d=q[b]=
{};d.pointerId=b;d.startX=d.pageX=m.pageX;d.startY=d.pageY=m.pageY;d.startTS=e;g.push(b);this._numTouches++;l.setPointerCapture?l.setPointerCapture(b):l.msSetPointerCapture&&l.msSetPointerCapture(b);l=q[g[0]];q=q[g[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(l&&(l.startX=l.pageX,l.startY=l.pageY,l.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,l))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,l))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[l,q]))))}},_pointerMove:function(m){var q=this._touches,l=this._touchIds,b;if((b=q[m.pointerId])&&(b.pageX!==m.pageX||b.pageY!==m.pageY)){b.pageX=m.pageX;b.pageY=m.pageY;var g=Math.abs(b.pageX-b.startX);var e=Math.abs(b.pageY-b.startY);!b.moved&&(g>=this.tapRadius||e>=this.tapRadius)&&(b.moved=b.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(m,m)):b.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(m,m)));else if(2===this._numTouches)if(b=q[l[0]],q=q[l[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(m,[b,q]));else if(b.moved||q.moved){l=Math.abs(b.startX-q.startX);g=Math.abs(b.startY-q.startY);e=Math.abs(b.pageX-q.pageX);var d=Math.abs(b.pageY-q.pageY);Math.abs(Math.sqrt(e*e+d*d)-Math.sqrt(l*l+g*g))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(m,[b,q])))}}},
_pointerUp:function(m){var q=this._touches,l,b=this.node,g=m.target,e=m.pointerId,d=this._touchIds,h=d.slice(0),t=a.map(h,function(C){return q[C]}),z=(new Date).getTime();if(l=q[e])if(l.pageX=m.pageX,l.pageY=m.pageY,l.endTS=z,this._numTouches--,g.releasePointerCapture?g.releasePointerCapture(e):g.msReleasePointerCapture&&g.msReleasePointerCapture(e),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,m));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,m));else{if(!l.absMoved){g=Infinity;e=-Infinity;d=Infinity;z=-Infinity;var v=this.tapStartTolerance,y;for(y=0;y<h.length;y++)l=t[y],l.startTS<g&&(g=l.startTS),l.startTS>e&&(e=l.startTS),l.endTS<d&&(d=l.endTS),l.endTS>z&&(z=l.endTS);Math.abs(e-g)<=v&&Math.abs(z-d)<=v&&this._basicTap(m,t)}}else 1===this._numTouches&&this._pinchActive&&(d.splice(a.indexOf(d,m.pointerId),1),delete q[m.pointerId],l=q[d[0]],
l.startX=l.pageX,l.startY=l.pageY,l.moved=!1,document.msElementsFromPoint&&(h=document.msElementsFromPoint(l.pageX,l.pageY),a.some(h,function(C){return C===b})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[m,l])))},_pointerCancel:function(m){this._numTouches&&this._pointerUp(m)},_basicTap:function(m,q){var l=(new Date).getTime(),b=this,g=this._immediate;m=this._processTouchEvent(m,q);this._taps.push({touchInfos:q,
ts:l,event:m});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",m);clearTimeout(this._tapTimer);l=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var e=b;b=null;clearTimeout(e._tapTimer);e._analyzeTap(g)},g?0:l)},_analyzeTap:function(m){var q=this._taps,l=q[0],b=q[1],g=l.touchInfos,e=b&&b.touchInfos;q.length&&(m||(this._taps=[]),l&&b?g.length===e.length?b.ts-l.ts<=this.doubleTapDuration?(1===g.length?(m=Math.abs(g[0].startX-
e[0].startX),g=Math.abs(g[0].startY-e[0].startY),g=m<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(q):this._processedTap(b)):this._processedTap(b):this._processedTap(b):this._processedTap(l||b))},_processedTap:function(m){var q=m.event;this._fire("onProcessedTap",q);1===m.touchInfos.length?this._fire("onTap",this._fixEvent(q)):2===m.touchInfos.length&&this._fire("onTwoFingerTap",q)},_processedDoubleTap:function(m){var q=1===m[1].touchInfos.length;if(q){var l=[this._fixEvent(m[0].event),
this._fixEvent(m[1].event)];l[1].relatedEvents=l}m=[m[0].event,m[1].event];m[1].relatedEvents=m;this._fire("onProcessedDoubleTap",m[1]);q&&(this._fire("onDoubleTap",l[1]),this._fire("onDblClick",l[1]))},_mouseOver:function(m){this._fire("onMouseOver",this._processMouseEvent(m))},_mouseMove:function(m){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(m)):this._fire("onMouseMove",this._processMouseEvent(m))},_mouseOut:function(m){this._fire("onMouseOut",this._processMouseEvent(m))},_mouseLeave:function(m){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(m))},_mouseDown:function(m){this._downX=m.pageX;this._downY=m.pageY;this._fire("onMouseDown",this._processMouseEvent(m));0===m.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(m)))},_mouseUp:function(m){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(m)));this._fire("onMouseUp",this._processMouseEvent(m))},
_mouseClick:function(m){Math.abs(m.pageX-this._downX)<=this.clickRadius&&Math.abs(m.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(m))},_mouseWheel:function(m){var q=this.map;(q?q.isScrollWheelZoom||q.isScrollWheelPan:this.preventPageScroll)&&m.preventDefault();q=m.wheelDelta?m.wheelDelta/this.wheelDivisor:-m.detail/this.mozWheelDivisor;var l=Math.abs(q);l=l<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;m.value=0>q?-l:l;this._fire("onMouseWheel",this._processMouseEvent(m))},
_mouseEnter:function(m){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(m))},_onKeyDown:function(m){this._fire("onKeyDown",m)},_onKeyUp:function(m){this._fire("onKeyUp",m)},_fire:function(m,q){if(this[m])this[m](q);if(this.map&&this.map[m])this.map[m](q)},_fixEvent:function(m){var q=
{},l;for(l in m)q[l]=m[l];q.preventDefault=function(){m.preventDefault()};q.stopPropagation=function(){m.stopPropagation()};this.map&&(q.screenPoint=q.screenPoints[0],q.mapPoint=q.mapPoints[0]);return q},_processTouchEvent:function(m,q){var l=this.map,b=l&&l.position,g=0;if(b&&q)if(B.isArray(q)){var e;m.screenPoints=[];m.mapPoints=[];for(e=0;e<q.length;e++)if(q[e]){var d=new f(q[e].pageX-b.x,q[e].pageY-b.y);m.screenPoints.push(d);m.mapPoints.push(l.extent?l.toMap(d):new r)}else g++}else m.screenPoint=
new f(q.pageX-b.x,q.pageY-b.y),m.mapPoint=l.extent?l.toMap(m.screenPoint):new r;m.numPoints=q?B.isArray(q)?q.length-g:1:0;return m},_processMouseEvent:function(m){var q=this.map,l=q&&q.position;l&&(m.screenPoint=new f(m.pageX-l.x,m.pageY-l.y),m.mapPoint=q.extent?q.toMap(m.screenPoint):new r);return m},setImmediateTap:function(m){this._immediate=m},destroy:function(){var m=this.node;m.removeEventListener("MSPointerDown",this._pointerDown,!1);m.removeEventListener("MSPointerMove",this._pointerMove,
!1);m.removeEventListener("MSPointerUp",this._pointerUp,!1);m.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(m.removeEventListener("mouseover",this._mouseOver,!1),m.removeEventListener("mousemove",this._mouseMove,!1),m.removeEventListener("mouseout",this._mouseOut,!1),m.removeEventListener("mouseleave",this._mouseLeave,!1),m.removeEventListener("mousedown",this._mouseDown,!1),m.removeEventListener("mouseup",this._mouseUp,!1),m.removeEventListener("click",this._mouseClick,
!1),m.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return k.PointerEvents=D})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){D=D(q,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(h){h=B.hitch;this._projectHandler=h(this,this._projectHandler);this._simplifyHandler=h(this,this._simplifyHandler);this._bufferHandler=h(this,this._bufferHandler);this._areasAndLengthsHandler=h(this,this._areasAndLengthsHandler);this._lengthsHandler=
h(this,this._lengthsHandler);this._labelPointsHandler=h(this,this._labelPointsHandler);this._relationHandler=h(this,this._relationHandler);this._convexHullHandler=h(this,this._convexHullHandler);this._unionHandler=h(this,this._unionHandler);this._autoCompleteHandler=h(this,this._autoCompleteHandler);this._reshapeHandler=h(this,this._reshapeHandler);this._cutHandler=h(this,this._cutHandler);this._intersectHandler=h(this,this._intersectHandler);this._differenceHandler=h(this,this._differenceHandler);
this._trimExtendHandler=h(this,this._trimExtendHandler);this._densifyHandler=h(this,this._densifyHandler);this._generalizeHandler=h(this,this._densifyHandler);this._offsetHandler=h(this,this._offsetHandler);this._distanceHandler=h(this,this._distanceHandler);this._toGeoCoordinateHandler=h(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=h(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(h){var t=[],z,v=h.length;for(z=0;z<v;z++)t.push(h[z].toJson());
return{geometryType:d.getJsonType(h[0]),geometries:t}},_decodeGeometries:function(h,t,z){var v=d.getGeometryType(t);h=h.geometries;var y=[],C={spatialReference:z.toJson()},F=B.mixin;a.forEach(h,function(x,u){y[u]=new v(F(x,C))});return y},_toProjectGeometry:function(h){var t=h.spatialReference.toJson();return h instanceof l?new g({rings:[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]]],spatialReference:t}):new b({paths:[[].concat(h.points)],spatialReference:t})},
_fromProjectedGeometry:function(h,t,z){return"esriGeometryEnvelope"===t?(h=h.rings[0],new l(h[0][0],h[0][1],h[2][0],h[2][1],z)):new e({points:h.paths[0],spatialReference:z.toJson()})},project:function(h,t,z,v){var y=B.mixin({},this._url.query,{f:"json"});if(h.geometries){v=z;z=t;t=h.outSR;var C=h.geometries[0];y=B.mixin(y,h.toJson())}else C=h[0],y=B.mixin(y,{outSR:t.wkid||c.toJson(t.toJson()),inSR:C.spatialReference.wkid||c.toJson(C.spatialReference.toJson()),geometries:c.toJson(this._encodeGeometries(h))});
var F=d.getJsonType(C),x=this._projectHandler,u=this._errorHandler,w=new k(m._dfdCanceller);w._pendingDfd=f({url:this._url.path+"/project",content:y,callbackParamName:"callback",load:function(A,E){x(A,E,F,t,z,v,w)},error:function(A){u(A,v,w)}});return w},_projectHandler:function(h,t,z,v,y,C,F){try{var x=this._decodeGeometries(h,z,v);this._successHandler([x],"onProjectComplete",y,F)}catch(u){this._errorHandler(u,C,F)}},onProjectComplete:function(){},simplify:function(h,t,z){var v=h[0].spatialReference,
y=B.mixin({},this._url.query,{f:"json",sr:v.wkid?v.wkid:c.toJson(v.toJson()),geometries:c.toJson(this._encodeGeometries(h))}),C=d.getJsonType(h[0]),F=this._simplifyHandler,x=this._errorHandler,u=new k(m._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/simplify",content:y,callbackParamName:"callback",load:function(w,A){F(w,A,C,v,t,z,u)},error:function(w){x(w,z,u)}});return u},_simplifyHandler:function(h,t,z,v,y,C,F){try{var x=this._decodeGeometries(h,z,v);this._successHandler([x],"onSimplifyComplete",
y,F)}catch(u){this._errorHandler(u,C,F)}},onSimplifyComplete:function(){},convexHull:function(h,t,z){var v=h[0].spatialReference;h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(v.toJson()),geometries:c.toJson(this._encodeGeometries(h))});var y=this._convexHullHandler,C=this._errorHandler,F=new k(m._dfdCanceller);F._pendingDfd=f({url:this._url.path+"/convexHull",content:h,callbackParamName:"callback",load:function(x,u){y(x,u,v,t,z,F)},error:function(x){C(x,z,F)}});return F},_convexHullHandler:function(h,
t,z,v,y,C){try{var F=d.fromJson(h.geometry).setSpatialReference(z);this._successHandler([F],"onConvexHullComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onConvexHullComplete:function(){},union:function(h,t,z){var v=h[0].spatialReference;h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(v.toJson()),geometries:c.toJson(this._encodeGeometries(h))});var y=this._unionHandler,C=this._errorHandler,F=new k(m._dfdCanceller);F._pendingDfd=f({url:this._url.path+"/union",content:h,callbackParamName:"callback",
load:function(x,u){y(x,u,v,t,z,F)},error:function(x){C(x,z,F)}});return F},_unionHandler:function(h,t,z,v,y,C){try{var F=d.fromJson(h.geometry).setSpatialReference(z);this._successHandler([F],"onUnionComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onUnionComplete:function(){},autoComplete:function(h,t,z,v){var y=h[0].spatialReference;h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),polygons:c.toJson(this._encodeGeometries(h).geometries),polylines:c.toJson(this._encodeGeometries(t).geometries)});
var C=this._autoCompleteHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/autoComplete",content:h,callbackParamName:"callback",load:function(u,w){C(u,w,y,z,v,x)},error:function(u){F(u,v,x)}});return x},_autoCompleteHandler:function(h,t,z,v,y,C){try{var F=h.geometries;h=[];var x,u=F.length;for(x=0;x<u;x++)h[x]=new g({spatialReference:z,rings:F[x].rings});this._successHandler([h],"onAutoCompleteComplete",v,C)}catch(w){this._errorHandler(w,y,C)}},onAutoCompleteComplete:function(){},
reshape:function(h,t,z,v){var y=h.spatialReference;h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),target:c.toJson({geometryType:d.getJsonType(h),geometry:h.toJson()}),reshaper:c.toJson(t.toJson())});var C=this._reshapeHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/reshape",content:h,callbackParamName:"callback",load:function(u,w){C(u,w,y,z,v,x)},error:function(u){F(u,v,x)}});return x},_reshapeHandler:function(h,t,z,v,y,C){try{var F=d.fromJson(h.geometry).setSpatialReference(z);
this._successHandler([F],"onReshapeComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onReshapeComplete:function(){},cut:function(h,t,z,v){var y=h[0].spatialReference,C=a.map(h,function(w){return w.toJson()});h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),target:c.toJson({geometryType:d.getJsonType(h[0]),geometries:C}),cutter:c.toJson(t.toJson())});var F=this._cutHandler,x=this._errorHandler,u=new k(m._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/cut",content:h,callbackParamName:"callback",
load:function(w,A){F(w,A,y,z,v,u)},error:function(w){x(w,v,u)}});return u},_cutHandler:function(h,t,z,v,y,C){try{var F=h.geometries,x={};x.cutIndexes=h.cutIndexes;x.geometries=[];a.forEach(F,function(u){x.geometries.push(d.fromJson(u).setSpatialReference(z))});this._successHandler([x],"onCutComplete",v,C)}catch(u){this._errorHandler(u,y,C)}},onCutComplete:function(){},intersect:function(h,t,z,v){var y=h[0].spatialReference;h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),geometries:c.toJson(this._encodeGeometries(h)),
geometry:c.toJson({geometryType:d.getJsonType(t),geometry:t.toJson()})});var C=this._intersectHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/intersect",content:h,callbackParamName:"callback",load:function(u,w){C(u,w,y,z,v,x)},error:function(u){F(u,v,x)}});return x},_intersectHandler:function(h,t,z,v,y,C){try{var F=[];a.forEach(h.geometries,function(x){F.push(d.fromJson(x).setSpatialReference(z))});this._successHandler([F],"onIntersectComplete",v,C)}catch(x){this._errorHandler(x,
y,C)}},onIntersectComplete:function(){},difference:function(h,t,z,v){var y=h[0].spatialReference;h=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),geometries:c.toJson(this._encodeGeometries(h)),geometry:c.toJson({geometryType:d.getJsonType(t),geometry:t.toJson()})});var C=this._differenceHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/difference",content:h,callbackParamName:"callback",load:function(u,w){C(u,w,y,z,v,x)},error:function(u){F(u,
v,x)}});return x},_differenceHandler:function(h,t,z,v,y,C){try{var F=[];a.forEach(h.geometries,function(x){F.push(d.fromJson(x).setSpatialReference(z))});this._successHandler([F],"onDifferenceComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onDifferenceComplete:function(){},buffer:function(h,t,z){var v=B.mixin({},this._url.query,{f:"json"},h.toJson()),y=h.outSpatialReference||h.geometries[0].spatialReference,C=this._bufferHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+
"/buffer",content:v,callbackParamName:"callback",load:function(u,w){C(u,w,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_bufferHandler:function(h,t,z,v,y,C){try{var F=h.geometries;h=[];var x,u=F.length;for(x=0;x<u;x++)h[x]=new g({spatialReference:z,rings:F[x].rings});this._successHandler([h],"onBufferComplete",v,C)}catch(w){this._errorHandler(w,y,C)}},onBufferComplete:function(){},areasAndLengths:function(h,t,z){h=B.mixin({},this._url.query,{f:"json"},h.toJson());var v=this._areasAndLengthsHandler,
y=this._errorHandler,C=new k(m._dfdCanceller);C._pendingDfd=f({url:this._url.path+"/areasAndLengths",content:h,callbackParamName:"callback",load:function(F,x){v(F,x,t,z,C)},error:function(F){y(F,z,C)}});return C},_areasAndLengthsHandler:function(h,t,z,v,y){try{this._successHandler([h],"onAreasAndLengthsComplete",z,y)}catch(C){this._errorHandler(C,v,y)}},onAreasAndLengthsComplete:function(){},lengths:function(h,t,z){h=B.mixin({},this._url.query,{f:"json"},h.toJson());var v=this._lengthsHandler,y=this._errorHandler,
C=new k(m._dfdCanceller);C._pendingDfd=f({url:this._url.path+"/lengths",content:h,callbackParamName:"callback",load:function(F,x){v(F,x,t,z,C)},error:function(F){y(F,z,C)}});return C},_lengthsHandler:function(h,t,z,v,y){try{this._successHandler([h],"onLengthsComplete",z,y)}catch(C){this._errorHandler(C,v,y)}},onLengthsComplete:function(){},labelPoints:function(h,t,z){var v=a.map(h,function(u){return u.toJson()}),y=h[0].spatialReference;v=B.mixin({},this._url.query,{f:"json",sr:y.wkid?y.wkid:c.toJson(y.toJson()),
polygons:c.toJson(v)});var C=this._labelPointsHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/labelPoints",content:v,callbackParamName:"callback",load:function(u,w){C(u,w,h,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_labelPointsHandler:function(h,t,z,v,y,C,F){try{var x=[];a.forEach(h.labelPoints,function(u){x.push(d.fromJson(u).setSpatialReference(v))});this._successHandler([x],"onLabelPointsComplete",y,F)}catch(u){this._errorHandler(u,C,F)}},onLabelPointsComplete:function(){},
relation:function(h,t,z){h=B.mixin({},this._url.query,{f:"json"},h.toJson());var v=this._relationHandler,y=this._errorHandler,C=new k(m._dfdCanceller);C._pendingDfd=f({url:this._url.path+"/relation",content:h,callbackParamName:"callback",load:function(F,x){v(F,x,t,z,C)},error:function(F){y(F,z,C)}});return C},_relationHandler:function(h,t,z,v,y){try{this._successHandler([h.relations],"onRelationComplete",z,y)}catch(C){this._errorHandler(C,v,y)}},onRelationComplete:function(){},trimExtend:function(h,
t,z){var v=B.mixin({},this._url.query,{f:"json"},h.toJson()),y=h.sr,C=this._trimExtendHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/trimExtend",content:v,callbackParamName:"callback",load:function(u,w){C(u,w,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_trimExtendHandler:function(h,t,z,v,y,C){try{var F=h.geometries;h=[];var x,u=F.length;for(x=0;x<u;x++)h[x]=new b({spatialReference:z,paths:F[x].paths});this._successHandler([h],"onTrimExtendComplete",
v,C)}catch(w){this._errorHandler(w,y,C)}},onTrimExtendComplete:function(){},densify:function(h,t,z){var v=B.mixin({},this._url.query,{f:"json"},h.toJson()),y=h.geometries[0].spatialReference,C=this._densifyHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/densify",content:v,callbackParamName:"callback",load:function(u,w){C(u,w,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_densifyHandler:function(h,t,z,v,y,C){try{var F=[];a.forEach(h.geometries,function(x){F.push(d.fromJson(x).setSpatialReference(z))});
this._successHandler([F],"onDensifyComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onDensifyComplete:function(){},generalize:function(h,t,z){var v=B.mixin({},this._url.query,{f:"json"},h.toJson()),y=h.geometries[0].spatialReference,C=this._generalizeHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/generalize",content:v,callbackParamName:"callback",load:function(u,w){C(u,w,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_generalizeHandler:function(h,
t,z,v,y,C){try{var F=[];a.forEach(h.geometries,function(x){F.push(d.fromJson(x).setSpatialReference(z))});this._successHandler([F],"onGeneralizeComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onGeneralizeComplete:function(){},offset:function(h,t,z){var v=B.mixin({},this._url.query,{f:"json"},h.toJson()),y=h.geometries[0].spatialReference,C=this._offsetHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/offset",content:v,callbackParamName:"callback",load:function(u,
w){C(u,w,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_offsetHandler:function(h,t,z,v,y,C){try{var F=[];a.forEach(h.geometries,function(x){F.push(d.fromJson(x).setSpatialReference(z))});this._successHandler([F],"onOffsetComplete",v,C)}catch(x){this._errorHandler(x,y,C)}},onOffsetComplete:function(){},distance:function(h,t,z){var v=B.mixin({},this._url.query,{f:"json"},h.toJson()),y=h.geometry1.spatialReference,C=this._distanceHandler,F=this._errorHandler,x=new k(m._dfdCanceller);x._pendingDfd=
f({url:this._url.path+"/distance",content:v,callbackParamName:"callback",load:function(u,w){C(u,w,y,t,z,x)},error:function(u){F(u,z,x)}});return x},_distanceHandler:function(h,t,z,v,y,C){try{h=h&&h.distance,this._successHandler([h],"onDistanceComplete",v,C)}catch(F){this._errorHandler(F,y,C)}},onDistanceComplete:function(){},toGeoCoordinateString:function(h,t,z){var v={};B.isObject(h.sr)?v.sr=h.sr.wkid||c.toJson(h.sr.toJson()):v.sr=h.sr;v.coordinates=c.toJson(h.coordinates);v.conversionType=h.conversionType||
"MGRS";v.conversionMode=h.conversionMode;v.numOfDigits=h.numOfDigits;v.rounding=h.rounding;v.addSpaces=h.addSpaces;h=B.mixin({},this._url.query,{f:"json"},v);var y=this._toGeoCoordinateHandler,C=this._errorHandler,F=new k(m._dfdCanceller);F._pendingDfd=f({url:this._url.path+"/toGeoCoordinateString",content:h,callbackParamName:"callback",load:function(x,u){y(x,u,t,z,F)},error:function(x){C(x,z,F)}});return F},_toGeoCoordinateHandler:function(h,t,z,v,y){try{this._successHandler([h.strings],"onToGeoCoordinateStringComplete",
z,y)}catch(C){this._errorHandler(C,v,y)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(h,t,z){var v={};B.isObject(h.sr)?v.sr=h.sr.wkid||c.toJson(h.sr.toJson()):v.sr=h.sr;v.strings=c.toJson(h.strings);v.conversionType=h.conversionType||"MGRS";v.conversionMode=h.conversionMode;h=B.mixin({},this._url.query,{f:"json"},v);var y=this._fromGeoCoordinateHandler,C=this._errorHandler,F=new k(m._dfdCanceller);F._pendingDfd=f({url:this._url.path+"/fromGeoCoordinateString",content:h,
callbackParamName:"callback",load:function(x,u){y(x,u,t,z,F)},error:function(x){C(x,z,F)}});return F},_fromGeoCoordinateHandler:function(h,t,z,v,y){try{this._successHandler([h.coordinates],"onToGeoCoordinateStringComplete",z,y)}catch(C){this._errorHandler(C,v,y)}},onFromGeoCoordinateStringComplete:function(){}});B.mixin(D,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});B.setObject("tasks.GeometryService",D,r);return D})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(D,B,a,c,k,n){var r=window.esriGeowConfig;return function(f,m,q,l,b){for(var g=600,e=400,d=function(h){return l&&(h=B(f.extent,h),l[0].scale<h)?!1:!0};!d(g)&&!(g*=2,e*=2,1600<=g););d=new c;d.layout="MAP_ONLY";d.format="png32";d.preserveScale=!1;d.showAttribution=!1;d.showLabels=!1;d.exportOptions={width:g,height:e,dpi:96};b||(b=new k(r.self.helperServices.printTask.url,{}));g=new n;g.map=f;g.template=d;a.config.defaults.io.timeout=12E4;b.execute(g,D.hitch(this,function(h){a.config.defaults.io.timeout=
6E4;return m(h.url)}),D.hitch(this,function(h){a.config.defaults.io.timeout=6E4;if(q)return q(h)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["esri/config","esri/WKIDUnitConversion"],function(D,B){return function(a,c){var k=20015077/180,n=a.spatialReference;if(n){var r=n.wkid;var f=n.wkt}n=null;r?n=B.values[B[r]]:f&&-1!==f.search(/^PROJCS/i)&&(r=/UNIT\[([^\]]+)\]\]$/i.exec(f))&&r[1]&&(n=parseFloat(r[1].split(",")[1]));return a.getWidth()/c*(n||k)*39.37*D.defaults.screenDPI}})},
"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,showAttribution:null,showLabels:!0});B.setObject("tasks.PrintTemplate",D,c);return D})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u){D=D(v,{declaredClass:"esri.tasks.PrintTask",constructor:function(w,A){this.url=w;this.printGp=new t(this.url);this._handler=B.hitch(this,this._handler);A&&A.async&&(this.async=!0);this._colorEvaluator=u("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(w,A,E){if(!this._loadGpServerMetadata)return this._execute(w,A,E);var G=new k(q._dfdCanceller),H=this._url.path,K=H.lastIndexOf("/GPServer/");
0<K&&(H=H.slice(0,K+9));G._pendingDfd=b({url:H,callbackParamName:"callback",content:B.mixin({},this._url.query,{f:"json"})}).then(B.hitch(this,function(I){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===I.executionType;this._cimVersion=I.cimVersion;this._is11xService=!!this._cimVersion;G._pendingDfd=this._execute(w);return G._pendingDfd})).then(B.hitch(this,function(I){this._successHandler([I],null,A,G)})).otherwise(function(I){E&&E(I);G.errback(I)});return G},_handler:function(w,
A,E,G,H){try{if(this.async)"esriJobSucceeded"===w.jobStatus?this.printGp.getResultData(w.jobId,"Output_File",B.hitch(this,function(I){K=I.value;this._successHandler([K],"onComplete",E,H)})):this._errorHandler(Error(w.jobStatus),G,H);else{var K=w[0].value;this._successHandler([K],"onComplete",E,H)}}catch(I){this._errorHandler(I,G,H)}},_execute:function(w,A,E){var G=this._handler,H=this._errorHandler,K=w.template||new z;K.hasOwnProperty("showLabels")||(K.showLabels=!0);var I=K.exportOptions,J;I&&(J=
{outputSize:[I.width,I.height],dpi:I.dpi});I=K.layoutOptions;var L=[];if(I){this.legendAll=!1;I.legendLayers?a.forEach(I.legendLayers,function(da){var ia={};ia.id=da.layerId;da.subLayerIds&&(ia.subLayerIds=da.subLayerIds);L.push(ia)}):this.legendAll=!0;if("Miles"===I.scalebarUnit||"Kilometers"===I.scalebarUnit){var M="esriKilometers";var N="esriMiles"}else if("Meters"===I.scalebarUnit||"Feet"===I.scalebarUnit)M="esriMeters",N="esriFeet";var O={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
O={titleText:I.titleText,authorText:I.authorText,copyrightText:I.copyrightText,customTextElements:I.customTextElements,scaleBarOptions:{metricUnit:M,metricLabel:O[M],nonMetricUnit:N,nonMetricLabel:O[N]},legendOptions:{operationalLayers:L}}}M=this._getPrintDefinition(w.map,K);w.outSpatialReference&&(M.mapOptions.spatialReference=w.outSpatialReference.toJson());w.template&&f.isDefined(w.template.showAttribution)&&(M.mapOptions.showAttribution=w.template.showAttribution);B.mixin(M,{exportOptions:J,layoutOptions:O});
this.allLayerslegend&&B.mixin(M.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(M.operationalLayers){J=M.operationalLayers;var Y=function(da){return f.fixJson(B.mixin(da,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},ba=RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),ha=/[\u0600-\u06FF]/,U=function(da){var ia=da.text,xa=(da=da.font)&&da.family&&da.family.toLowerCase();ia&&da&&("arial"===xa||"arial unicode ms"===
xa)&&(da.family=ba.test(ia)?"Arial Unicode MS":"Arial","normal"!==da.style&&ha.test(ia)&&(da.family="Arial Unicode MS"))};for(O=0;O<J.length;O++)if(J[O].featureCollection&&J[O].featureCollection.layers)for(N=0;N<J[O].featureCollection.layers.length;N++){var X=J[O].featureCollection.layers[N];if(X.layerDefinition&&X.layerDefinition.drawingInfo&&X.layerDefinition.drawingInfo.renderer&&X.layerDefinition.drawingInfo.renderer.symbol){var Z=X.layerDefinition.drawingInfo.renderer;"esriCLS"===Z.symbol.type?
Z.symbol=Y(Z.symbol):"esriTS"===Z.symbol.type?U(Z.symbol):Z.symbol.outline&&"esriCLS"===Z.symbol.outline.type&&(Z.symbol.outline=Y(Z.symbol.outline))}if(X.featureSet&&X.featureSet.features)for(I=0;I<X.featureSet.features.length;I++)Z=X.featureSet.features[I],Z.symbol&&("esriCLS"===Z.symbol.type?Z.symbol=Y(Z.symbol):"esriTS"===Z.symbol.type?U(Z.symbol):Z.symbol.outline&&"esriCLS"===Z.symbol.outline.type&&(Z.symbol.outline=Y(Z.symbol.outline)))}}K={Web_Map_as_JSON:c.toJson(f.fixJson(M)),Format:K.format,
Layout_Template:K.layout};w.extraParameters&&(K=B.mixin(K,w.extraParameters));var P=new k(q._dfdCanceller);w=function(da,ia){G(da,ia,A,E,P)};M=function(da){H(da,E,P)};P._pendingDfd=this.async?this.printGp.submitJob(K,w,null,M):this.printGp.execute(K,w,M);return P},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},
_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",
drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},_convertSvgSymbol:function(w){if(!(8>=n("ie")||!w.path&&"image/svg+xml"!==w.contentType)){var A=x.createSurface(C.create("div"),1024,1024);var E="image/svg+xml"===w.contentType?A.createObject(x.Image,{src:"data:image/svg+xml;base64,"+w.imageData,width:F.pt2px(w.width),height:F.pt2px(w.height),x:0,y:0}):A.createObject(x.Path,w.path).setFill(w.color).setStroke(w.outline);"pendingRender"in A&&A._render(!0);var G=
A.rawNode.getContext("2d"),H=Math.ceil(E.getBoundingBox().width),K=Math.ceil(E.getBoundingBox().height);E=G.getImageData(E.getBoundingBox().x,E.getBoundingBox().y,H,K);G.canvas.width=H;G.canvas.height=K;G.putImageData(E,0,0);G=G.canvas.toDataURL("image/png");w={type:"esriPMS",imageData:G.substr(22,G.length),angle:w.angle,contentType:"image/png",height:w.size?w.size:F.px2pt(K),width:w.size?H/K*w.size:F.px2pt(H),xoffset:w.xoffset,yoffset:w.yoffset};A.destroy();return w}},_convertSvgRenderer:function(w){"simple"===
w.type&&w.symbol&&(w.symbol.path||"image/svg+xml"===w.symbol.contentType)?w.symbol=this._convertSvgSymbol(w.symbol):"uniqueValue"===w.type?(w.defaultSymbol&&(w.defaultSymbol.path||"image/svg+xml"===w.defaultSymbol.contentType)&&(w.defaultSymbol=this._convertSvgSymbol(w.defaultSymbol)),w.uniqueValueInfos&&a.forEach(w.uniqueValueInfos,function(A){if(A.symbol.path||"image/svg+xml"===A.symbol.contentType)A.symbol=this._convertSvgSymbol(A.symbol)},this)):"classBreaks"===w.type&&(w.defaultSymbol&&(w.defaultSymbol.path||
"image/svg+xml"===w.defaultSymbol.contentType)&&(w.defaultSymbol=this._convertSvgSymbol(w.defaultSymbol)),w.classBreakInfos&&a.forEach(w.classBreakInfos,function(A){if(A.symbol.path||"image/svg+xml"===A.symbol.contentType)A.symbol=this._convertSvgSymbol(A.symbol)},this))},_createFeatureCollection:function(w,A,E,G){var H=this._createPolygonLayer(),K=this._createPolylineLayer(),I=this._createPointLayer(),J=this._createMultipointLayer(),L=this._createPointLayer();L.layerDefinition.name="textLayer";delete L.layerDefinition.drawingInfo;
if("esri.layers.FeatureLayer"===w.declaredClass||"esri.layers.StreamLayer"===w.declaredClass)H.layerDefinition.name=K.layerDefinition.name=I.layerDefinition.name=J.layerDefinition.name=B.getObject("arcgisProps.title",!1,w)||w.name||w.id;var M=w.renderer&&"esri.renderer.SimpleRenderer"===w.renderer.declaredClass;if(!w.renderer||w.renderer.valueExpression||B.isFunction(w.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete K.layerDefinition.drawingInfo,delete I.layerDefinition.drawingInfo,
delete J.layerDefinition.drawingInfo;else{var N=w.renderer.toJson({useLegacyRotationProperties:!0});if("temporal"===N.type){N={latestObservationRenderer:N.latestObservationRenderer,trackLinesRenderer:N.trackRenderer,observationAger:N.observationAger,renderer:N.observationRenderer};var O={};w._trackIdField&&(O.trackIdField=w._trackIdField);w._startTimeField&&(O.startTimeField=w._startTimeField);w._endTimeField&&(O.endTimeField=w._endTimeField);H.layerDefinition.drawingInfo=N;H.layerDefinition.timeInfo=
O;K.layerDefinition.drawingInfo=N;K.layerDefinition.timeInfo=O;I.layerDefinition.drawingInfo=N;I.layerDefinition.timeInfo=O;J.layerDefinition.drawingInfo=N;J.layerDefinition.timeInfo=O}else H.layerDefinition.drawingInfo.renderer=N,K.layerDefinition.drawingInfo.renderer=N,I.layerDefinition.drawingInfo.renderer=N,J.layerDefinition.drawingInfo.renderer=N}N=w.fields;N||!w.renderer||w.renderer.valueExpression||B.isFunction(w.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===w.renderer.declaredClass?
(N=[{name:w.renderer.attributeField,type:"esriFieldTypeDouble"}],w.renderer.normalizationField&&N.push({name:w.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===w.renderer.declaredClass&&(N=[{name:w.renderer.attributeField,type:"esriFieldTypeString"}],w.renderer.attributeField2&&N.push({name:w.renderer.attributeField2,type:"esriFieldTypeString"}),w.renderer.attributeField3&&N.push({name:w.renderer.attributeField3,type:"esriFieldTypeString"})));N&&(H.layerDefinition.fields=
N,K.layerDefinition.fields=N,I.layerDefinition.fields=N,J.layerDefinition.fields=N);N=w.graphics;w.isFeatureReductionActive&&w.isFeatureReductionActive()&&(N=w.getSingleGraphics());O=N.length;var Y;for(Y=0;Y<O;Y++){var ba=N[Y];if(!1!==ba.visible&&ba.geometry){var ha=ba.toJson();ha.symbol&&ha.symbol.outline&&ha.symbol.outline.color&&ha.symbol.outline.color[3]&&!this._is11xService&&(ha.symbol.outline.color[3]=255);if(w.renderer&&!ha.symbol&&(B.isFunction(w.renderer.attributeField)||w.renderer.valueExpression||
this._isFeatureCollectionRequired(w.renderer,w)||"esri.renderer.DotDensityRenderer"===w.renderer.declaredClass||E)){E=E||w.renderer;var U=null;try{U=E.getSymbol(ba)}catch(X){}if(!U)continue;ha.symbol=U.toJson();this._isFeatureCollectionRequired(E,w)&&this._applyVisualVariables(ha.symbol,{renderer:E,graphic:ba,symbol:U,mapResolution:A&&A.getResolutionInMeters(),mapScale:A&&A.getScale()})}ha.symbol&&(ha.symbol.path||"image/svg+xml"===ha.symbol.contentType?ha.symbol=this._convertSvgSymbol(ha.symbol):
ha.symbol.text&&delete ha.attributes);switch(ba.geometry.type){case "polygon":H.featureSet.features.push(ha);break;case "polyline":K.featureSet.features.push(ha);break;case "point":ha.symbol&&ha.symbol.text?L.featureSet.features.push(ha):I.featureSet.features.push(ha);break;case "multipoint":J.featureSet.features.push(ha);break;case "extent":ha.geometry=e.fromExtent(ba.geometry).toJson(),H.featureSet.features.push(ha)}}}A=[];0<H.featureSet.features.length&&A.push(H);0<K.featureSet.features.length&&
A.push(K);0<J.featureSet.features.length&&A.push(J);0<I.featureSet.features.length&&A.push(I);0<L.featureSet.features.length&&A.push(L);if(!A.length)return null;a.forEach(A,function(X){var Z=a.every(X.featureSet.features,function(P){return P.symbol});if(M||Z)G&&G.forceFeatureAttributes||a.forEach(X.featureSet.features,function(P){delete P.attributes}),G.forceFeatureAttributes||delete X.layerDefinition.fields;Z&&delete X.layerDefinition.drawingInfo});a.forEach(A,function(X){X.layerDefinition.drawingInfo&&
X.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(X.layerDefinition.drawingInfo.renderer)},this);return{id:w.id,opacity:w.opacity,minScale:w.minScale||0,maxScale:w.maxScale||0,featureCollection:{layers:A}}},_getPrintDefinition:function(w,A){var E={operationalLayers:this._createOperationalLayers(w,A)},G=this._vtlExtent||w.extent,H=w.spatialReference;this._vtlExtent=null;w.spatialReference._isWrappable()&&(G=G._normalize(!0),H=G.spatialReference);G={mapOptions:{showAttribution:w.showAttribution,
extent:G.toJson(),spatialReference:H.toJson()}};A.preserveScale&&B.mixin(G.mapOptions,{scale:A.outScale||w.getScale()});w.timeExtent&&B.mixin(G.mapOptions,{time:[w.timeExtent.startTime.getTime(),w.timeExtent.endTime.getTime()]});H={};B.mixin(H,G,E);return H},_createOperationalLayers:function(w,A){var E,G=[],H=0;A.preserveScale&&(H=A.outScale||w.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var K=a.map(w.layerIds,w.getLayer,w);w._mapImageLyr&&K.push(w._mapImageLyr);for(E=
0;E<K.length;E++){var I=K[E];if(I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H))){var J=I.declaredClass;var L={id:I.id,title:B.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0};L=B.mixin(L,this._getUrlAndToken(I));I.getNode()&&y.get(I.getNode(),"data-reference")&&(L._isRefLayer=!0);switch(J){case "esri.layers.ArcGISDynamicMapServiceLayer":var M=[];J=!!I._params.layers;if(I._params.dynamicLayers)J=A.outScale?I._getDynLayerObjs(A.outScale):c.fromJson(I._params.dynamicLayers),
a.forEach(J,function(ha){M.push({id:ha.id,name:ha.name,layerDefinition:ha});delete ha.id;delete ha.name;delete ha.maxScale;delete ha.minScale}),0===M.length&&(L.visibleLayers=[-1]);else if(I.supportsDynamicLayers){if(J||I.layerDefinitions||I.layerTimeOptions){var N=I.createDynamicLayerInfosFromLayerInfos(),O=null;J&&(O=I.visibleLayers);O=m._getVisibleLayers(N,O);var Y=m._getLayersForScale(A.outScale||w.getScale(),N);a.forEach(N,function(ha){if(!ha.subLayerIds){var U=ha.id;-1<a.indexOf(O,U)&&-1<a.indexOf(Y,
U)&&(ha={source:ha.source.toJson()},I.layerDefinitions&&I.layerDefinitions[U]&&(ha.definitionExpression=I.layerDefinitions[U]),I.layerTimeOptions&&I.layerTimeOptions[U]&&(ha.layerTimeOptions=I.layerTimeOptions[U].toJson()),M.push({id:U,layerDefinition:ha}))}});0===M.length&&(L.visibleLayers=[-1])}}else a.forEach(I.layerInfos,function(ha){var U={id:ha.id,layerDefinition:{}};I.layerDefinitions&&I.layerDefinitions[ha.id]&&(U.layerDefinition.definitionExpression=I.layerDefinitions[ha.id]);I.layerTimeOptions&&
I.layerTimeOptions[ha.id]&&(U.layerDefinition.layerTimeOptions=I.layerTimeOptions[ha.id].toJson());(U.layerDefinition.definitionExpression||U.layerDefinition.layerTimeOptions)&&M.push(U)}),J&&(L.visibleLayers=I.visibleLayers.length?I.visibleLayers:[-1]);M.length&&(L.layers=M);G.push(L);this.allLayerslegend&&this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":L=B.mixin(L,{url:I.url,bandIds:I.bandIds,compressionQuality:I.compressionQuality,
format:I.format,interpolation:I.interpolation});I.mosaicRule&&B.mixin(L,{mosaicRule:I.mosaicRule.toJson()});if(I.renderingRule||I.renderer)this._is11xService?(I.renderingRule&&(L.renderingRule=I.renderingRule.toJson()),I.renderer&&(L.layerDefinition=L.layerDefinition||{},L.layerDefinition.drawingInfo=L.layerDefinition.drawingInfo||{},L.layerDefinition.drawingInfo.renderer=I.renderer.toJson())):(J=I.getExportImageRenderingRule())&&B.mixin(L,{renderingRule:J.toJson()});G.push(L);this.allLayerslegend&&
this.allLayerslegend.push({id:I.id});break;case "esri.layers.RasterXLayer":this._is11xService&&(L=B.mixin(L,{url:I.url,bandIds:I.bandIds,interpolation:I.interpolation}),I.renderer&&(L.layerDefinition=L.layerDefinition||{},L.layerDefinition.drawingInfo=L.layerDefinition.drawingInfo||{},L.layerDefinition.drawingInfo.renderer=I.renderer.toJson()),G.push(L),this.allLayerslegend&&this.allLayerslegend.push({id:I.id}));break;case "esri.layers.WMSLayer":L=B.mixin(L,{url:I.url,title:I.title,type:"wms",version:I.version,
transparentBackground:I.imageTransparency,visibleLayers:I.visibleLayers});G.push(L);this.allLayerslegend&&this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.virtualearth.VETiledLayer":J=I.mapStyle;"roadOnDemand"===J?J="Road":"aerialWithLabelsOnDemand"===J&&(J="Hybrid");L=B.mixin(L,{visibility:I.visible,type:"BingMaps"+J,culture:I.culture,key:I.bingMapsKey});G.push(L);break;case "esri.layers.OpenStreetMapLayer":L=B.mixin(L,{credits:I.copyright,type:"OpenStreetMap",url:g.getAbsoluteUrl(I.tileServers[0])});
G.push(L);break;case "esri.layers.WMTSLayer":L=B.mixin(L,{url:I.url,type:"wmts",layer:I._identifier,style:I._style,format:I.format,tileMatrixSet:I._tileMatrixSetId});G.push(L);break;case "esri.layers.MapImageLayer":J=I.getImages();a.forEach(J,function(ha,U){ha.visible&&ha.href&&(L={id:I.id+"_image"+U,type:"image",title:I.id,minScale:I.minScale||0,maxScale:I.maxScale||0,opacity:I.opacity*ha.opacity,extent:ha.extent.toJson()},"data:image/png;base64,"===ha.href.substr(0,22)?L.imageData=ha.href.substr(22):
L.url=ha.href,G.push(L))});break;case "esri.layers.VectorTileLayer":delete L.url;delete L.token;if(this._is11xService&&I.currentStyleInfo.serviceUrl&&I.currentStyleInfo.styleUrl&&(J=r.id&&r.id.findCredential(I.currentStyleInfo.styleUrl),N=r.id&&r.id.findCredential(I.currentStyleInfo.serviceUrl),!J&&!N||"2.1.0"!==this._cimVersion)){L.type="VectorTileLayer";L.styleUrl=I.currentStyleInfo.styleUrl;J&&(L.token=J.token);N&&N.token!==L.token&&(L.additionalTokens=[{url:I.currentStyleInfo.serviceUrl,token:N.token}]);
G.push(L);break}L.type="image";J=this._vtlExtent||w.extent.offset(0,0);var ba=A.exportOptions&&A.exportOptions.dpi||96;N={format:"png",pixelRatio:ba/96};"MAP_ONLY"!==A.layout||!A.preserveScale||A.outScale&&A.outScale!==w.getScale()||96!==ba||!A.exportOptions||A.exportOptions.width%2===w.width%2&&A.exportOptions.height%2===w.height%2||(N.area={x:0,y:0,width:w.width,height:w.height},A.exportOptions.width%2!==w.width%2&&--N.area.width,A.exportOptions.height%2!==w.height%2&&--N.area.height,this._vtlExtent||
(ba=w.toMap({x:N.area.width,y:N.area.height}),J.update(J.xmin,ba.y,ba.x,J.ymax,J.spatialReference),this._vtlExtent=J));L.extent=J._normalize(!0).toJson();J=I.takeScreenshot(N);J.isResolved()&&J.then(function(ha){"data:image/png;base64,"===ha.dataURL.substr(0,22)&&(L.imageData=ha.dataURL.substr(22))});L.imageData&&G.push(L);break;case "esri.layers.WebTiledLayer":J=I.url.replace(/\$\{/g,"{");L=B.mixin(L,{type:"WebTiledLayer",urlTemplate:J,credits:I.copyright});I.subDomains&&0<I.subDomains.length&&(L.subDomains=
I.subDomains);I._wmtsInfo&&(L.wmtsInfo=I._wmtsInfo);delete L.url;G.push(L);break;default:if(I.getTileUrl||I.getImageUrl)L=B.mixin(L,{url:I.url}),G.push(L)}}}K=a.map(w.graphicsLayerIds,w.getLayer,w);for(E=0;E<K.length;E++)I=K[E],I.isFeatureReductionActive&&I.isFeatureReductionActive()&&(I.getSingleGraphics().length?K.splice(++E,0,I.getFeatureReductionLayer()):K[E]=I.getFeatureReductionLayer());for(E=0;E<K.length;E++)if(I=K[E],I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H)))switch(J=I.declaredClass,
J){case "esri.layers.CSVLayer":if(this._is11xService){L={id:I.id,url:I.url,title:I.title,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:I.latitudeFieldName,longitudeFieldName:I.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:I.renderer&&I.renderer.toJson()}}};G.push(L);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===J&&!A.showLabels||I.renderer&&"esri.renderer.HeatmapRenderer"===
I.renderer.declaredClass)continue;J=null;I.url&&I.renderer&&("esri.renderer.ScaleDependentRenderer"===I.renderer.declaredClass?"scale"===I.renderer.rangeType?J=I.renderer.getRendererInfoByScale(w.getScale())&&I.renderer.getRendererInfoByScale(w.getScale()).renderer:"zoom"===I.renderer.rangeType&&(J=I.renderer.getRendererInfoByZoom(w.getZoom())&&I.renderer.getRendererInfoByZoom(w.getZoom()).renderer):J=I.renderer);N=J&&"esri.layers.CSVLayer"!==I.declaredClass&&!this._isFeatureCollectionRequired(J,
I)&&!J.valueExpression;ba=I.isFeatureReductionActive&&I.isFeatureReductionActive();if(J&&!ba&&"esri.renderer.DotDensityRenderer"!==J.declaredClass&&"esri.layers.StreamLayer"!==I.declaredClass&&(this._is11xService||N)&&("esri.renderer.SimpleRenderer"===J.declaredClass||"esri.renderer.TemporalRenderer"===J.declaredClass||null==J.attributeField||B.isString(J.attributeField)&&I._getField(J.attributeField,!0)))if(L={id:I.id,title:B.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||
0,maxScale:I.maxScale||0,layerDefinition:{drawingInfo:{renderer:J.toJson({useLegacyRotationProperties:!this._is11xService})}}},L=B.mixin(L,this._getUrlAndToken(I)),"esri.renderer.TemporalRenderer"===J.declaredClass&&(N=L.layerDefinition.drawingInfo,N.latestObservationRenderer=N.renderer.latestObservationRenderer,N.trackLinesRenderer=N.renderer.trackRenderer,N.observationAger=N.renderer.observationAger,N.renderer=N.renderer.observationRenderer,I._trackIdField&&(L.layerDefinition.timeInfo={trackIdField:I._trackIdField})),
this._convertSvgRenderer(L.layerDefinition.drawingInfo.renderer),this._is11xService||1>I.opacity||"esri.renderer.TemporalRenderer"===J.declaredClass||this._updateLayerOpacity(L))if(I._params.source&&(J=I._params.source.toJson(),B.mixin(L.layerDefinition,{source:J})),I.getDefinitionExpression()&&B.mixin(L.layerDefinition,{definitionExpression:I.getDefinitionExpression()}),2!==I.mode)0<I.getSelectedFeatures().length&&(J=a.map(I.getSelectedFeatures(),function(ha){return ha.attributes[I.objectIdField]}),
0<J.length&&I.getSelectionSymbol()&&B.mixin(L,{selectionObjectIds:J,selectionSymbol:I.getSelectionSymbol().toJson()}));else{J=a.map(I.getSelectedFeatures(),function(ha){return ha.attributes[I.objectIdField]});if(0===J.length||!I._params.drawMode)break;B.mixin(L.layerDefinition,{objectIds:J});J=null;I.getSelectionSymbol()&&(J=new d(I.getSelectionSymbol()));B.mixin(L.layerDefinition.drawingInfo,{renderer:J&&J.toJson()})}else L=this._createFeatureCollection(I,w,null,A);else L=J&&(J.valueExpression||
this._isFeatureCollectionRequired(J,I)||"esri.renderer.DotDensityRenderer"===J.declaredClass)?this._createFeatureCollection(I,w,J,A):this._createFeatureCollection(I,w,null,A);if(!L)continue;G.push(L);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":L=this._createFeatureCollection(I,w,null,A);if(!L)continue;G.push(L);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":L=
{id:I.id,title:B.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,visibility:I.visible,symbolTileSize:I.symbolTileSize,layerDefinition:{drawingInfo:{renderer:I.renderer.toJson({useLegacyRotationProperties:!this._is11xService})}}},L=B.mixin(L,this._getUrlAndToken(I)),I.mosaicRule&&B.mixin(L,{mosaicRule:I.mosaicRule.toJson()}),G.push(L),this.allLayerslegend&&this.allLayerslegend.push({id:I.id})}H&&a.forEach(G,function(ha){ha.minScale=0;ha.maxScale=
0});w.graphics&&0<w.graphics.graphics.length&&(L=this._createFeatureCollection(w.graphics,w,null,A))&&G.push(L);w._labels&&A.showLabels&&(L=this._createFeatureCollection(w._labels,w,null,A))&&G.push(L);a.forEach(G,function(ha,U,X){ha._isRefLayer&&(delete ha._isRefLayer,X.splice(U,1),X.push(ha))});return G},_getUrlAndToken:function(w){return{token:w._getToken(),url:w._url?w._url.path:null}},_updateLayerOpacity:function(w){var A=this._colorEvaluator(w);A=a.filter(A,function(K){return B.isArray(K)&&
4===K.length});var E=!0;if(A.length){var G=A[0][3],H;for(H=1;H<A.length;H++)if(G!==A[H][3]){E=!1;break}if(E)for(w.opacity=G/255,H=0;H<A.length;H++)A[H][3]=255}return E},_isFeatureCollectionRequired:function(w,A){if(A&&A.isFeatureReductionActive&&A.isFeatureReductionActive())return!0;var E=!1,G=this._getVariable(w,"rotationInfo",!1);G&&(E=(E=G.field)&&B.isFunction(E)||G.valueExpression);return w.hasVisualVariables("sizeInfo")||w.hasVisualVariables("colorInfo")||w.hasVisualVariables("opacityInfo")||
E},_getVariable:function(w,A,E){if(w)var G=(w=w.getVisualVariablesForType(A,E))&&w[0];return G},_applyVisualVariables:function(w,A){var E=A.renderer,G=A.graphic,H=A.symbol,K=A.mapResolution,I=A.mapScale,J=H.type;if("textsymbol"!==J&&"shieldlabelsymbol"!==J){var L=this._getVariable(E,"sizeInfo",!1),M=this._getVariable(E,"colorInfo",!1),N=this._getVariable(E,"opacityInfo",!1),O=this._getVariable(E,"rotationInfo",!1);H instanceof h&&(L=this._getVariable(E,"sizeInfo","outline")||L);K=L?E.getSize(G,{sizeInfo:L,
shape:"simplemarkersymbol"===J?H.style:null,resolution:K,scale:I}):G.size;null!=K&&("simplemarkersymbol"===J?w.size=F.px2pt(K):"picturemarkersymbol"===J?(I=H.width/H.height*K,w.width=F.px2pt(I),w.height=F.px2pt(K),0!==H.xoffset&&(w.xoffset=F.px2pt(H.xoffset/H.width*I)),0!==H.yoffset&&(w.yoffset=F.px2pt(H.yoffset/H.height*K))):"simplelinesymbol"===J?w.width=F.px2pt(K):w.outline&&(w.outline.width=F.px2pt(K)));M&&(!(H=E.getColor(G,{colorInfo:M}))||"simplemarkersymbol"!==J&&"simplelinesymbol"!==J&&"simplefillsymbol"!==
J||(w.color=l.toJsonColor(H)));N&&(J=E.getOpacity(G,{opacityInfo:N}),null!=J&&w.color&&(w.color[3]=Math.round(255*J)));O&&(E=E.getRotationAngle(G,{rotationInfo:O}))&&(w.angle=-E)}}});B.setObject("tasks.PrintTask",D,r);return D})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){function e(M,N,O,Y,ba,ha,
U,X,Z,P){var da=N.length,ia=0;if(P){var xa=P.l/ba;ia=P.i}else xa=N[0]/ba;for(;ha<U;){if(ha+xa>U){var Ca={l:(ha+xa-U)*ba,i:ia};xa=U-ha}ia%2||(M.beginPath(),M.arc(O,Y,ba,ha,ha+xa,X),Z&&M.stroke());ha+=xa;++ia;xa=N[ia%da]/ba}return Ca}function d(M,N,O,Y){var ba=0,ha=0,U=0;if(Y){var X=Y.l;U=Y.i}else X=N[0];for(;1>ha;)ha=g.tAtLength(M,X),1==ha&&(ba=g.computeLength(M),ba={l:X-ba,i:U}),M=g.splitBezierAtT(M,ha),U%2||O.push(M[0]),M=M[1],++U,X=N[U%N.length];return ba}function h(M,N,O,Y){var ba=[N.last.x,N.last.y].concat(O),
ha=!(M instanceof Array);O=4===O.length?"quadraticCurveTo":"bezierCurveTo";var U=[];N=d(ba,N.canvasDash,U,Y);for(Y=0;Y<U.length;++Y)ba=U[Y],ha?(M.moveTo(ba[0],ba[1]),M[O].apply(M,ba.slice(2))):(M.push("moveTo",[ba[0],ba[1]]),M.push(O,ba.slice(2)));return N}function t(M,N,O,Y,ba,ha,U){var X=0,Z=0,P=0,da=g.distance(O,Y,ba,ha),ia=0;N=N.canvasDash;var xa=O,Ca=Y,Fa=!(M instanceof Array);U?(P=U.l,ia=U.i):P+=N[0];for(;.01<Math.abs(1-Z);){P>da&&(X={l:P-da,i:ia},P=da);Z=P/da;U=O+(ba-O)*Z;var Ma=Y+(ha-Y)*Z;
ia++%2||(Fa?(M.moveTo(xa,Ca),M.lineTo(U,Ma)):(M.push("moveTo",[xa,Ca]),M.push("lineTo",[U,Ma])));xa=U;Ca=Ma;P+=N[ia%N.length]}return X}var z=D.canvas={},v=null,y=l.multiplyPoint,C=Math.PI,F=2*C,x=C/2;b=B.extend;if(k.global.CanvasRenderingContext2D){k=k.doc.createElement("canvas").getContext("2d");var u="function"==typeof k.setLineDash,w="function"==typeof k.fillText}var A={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,
3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};z.Shape=c("dojox.gfx.canvas.Shape",f.Shape,{_render:function(M){M.save();this._renderTransform(M);this._renderClip(M);this._renderShape(M);this._renderFill(M,!0);this._renderStroke(M,!0);M.restore()},_renderClip:function(M){this.canvasClip&&(this.canvasClip.render(M),M.clip())},_renderTransform:function(M){if("canvasTransform"in this){var N=this.canvasTransform;M.translate(N.dx,N.dy);M.rotate(N.angle2);M.scale(N.sx,N.sy);M.rotate(N.angle1)}},
_renderShape:function(M){},_renderFill:function(M,N){if("canvasFill"in this){var O=this.fillStyle;if("canvasFillImage"in this){var Y=O.width,ba=O.height,ha=this.canvasFillImage.width,U=this.canvasFillImage.height,X=Math.min(Y==ha?1:Y/ha,ba==U?1:ba/U),Z=(Y-X*ha)/2,P=(ba-X*U)/2;v.width=Y;v.height=ba;var da=v.getContext("2d");da.clearRect(0,0,Y,ba);da.drawImage(this.canvasFillImage,0,0,ha,U,Z,P,X*ha,X*U);this.canvasFill=M.createPattern(v,"repeat");delete this.canvasFillImage}M.fillStyle=this.canvasFill;
N&&("pattern"!==O.type||0===O.x&&0===O.y||M.translate(O.x,O.y),M.fill())}else M.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(M,N){var O=this.strokeStyle;O?(M.strokeStyle=O.color.toString(),M.lineWidth=O.width,M.lineCap=O.cap,"number"==typeof O.join?(M.lineJoin="miter",M.miterLimit=O.join):M.lineJoin=O.join,this.canvasDash?u?(M.setLineDash(this.canvasDash),N&&M.stroke()):this._renderDashedStroke(M,N):N&&M.stroke()):N||(M.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(M,N){},getEventSource:function(){return null},
on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(M){this.inherited(arguments);var N=M?"width"in M?"rect":"cx"in M?"ellipse":"points"in M?"polyline":"d"in M?"path":null:null;if(M&&!N)return this;this.canvasClip=M?E(N,M):null;this.parent&&this.parent._makeDirty();return this}});var E=function(M,N){switch(M){case "ellipse":return{canvasEllipse:I({shape:N}),render:function(O){return z.Ellipse.prototype._renderShape.call(this,O)}};case "rect":return{shape:B.delegate(N,
{r:0}),render:function(O){return z.Rect.prototype._renderShape.call(this,O)}};case "path":return{canvasPath:G(N),render:function(O){this.canvasPath._renderShape(O)}};case "polyline":return{canvasPolyline:N.points,render:function(O){return z.Polyline.prototype._renderShape.call(this,O)}}}return null},G=function(M){var N=new dojox.gfx.canvas.Path;N.canvasPath=[];N._setPath(M.d);return N},H=function(M,N,O){var Y=M.prototype[N];M.prototype[N]=O?function(){this.parent&&this.parent._makeDirty();Y.apply(this,
arguments);O.call(this);return this}:function(){this.parent&&this.parent._makeDirty();return Y.apply(this,arguments)}};H(z.Shape,"setTransform",function(){this.matrix?this.canvasTransform=D.decompose(this.matrix):delete this.canvasTransform});H(z.Shape,"setFill",function(){var M=this.fillStyle;if(M){if("object"==typeof M&&"type"in M){var N=this.surface.rawNode.getContext("2d");switch(M.type){case "linear":case "radial":var O="linear"==M.type?N.createLinearGradient(M.x1,M.y1,M.x2,M.y2):N.createRadialGradient(M.cx,
M.cy,0,M.cx,M.cy,M.r);a.forEach(M.colors,function(Y){O.addColorStop(Y.offset,D.normalizeColor(Y.color).toString())});break;case "pattern":v||(v=document.createElement("canvas")),N=new Image,this.surface.downloadImage(N,M.src),this.canvasFillImage=N}}else O=M.toString();this.canvasFill=O}else delete this.canvasFill});H(z.Shape,"setStroke",function(){var M=this.strokeStyle;if(M){var N=this.strokeStyle.style.toLowerCase();N in A&&(N=A[N]);if(N instanceof Array){this.canvasDash=N=N.slice();var O;for(O=
0;O<N.length;++O)N[O]*=M.width;if("butt"!=M.cap){for(O=0;O<N.length;O+=2)N[O]-=M.width,1>N[O]&&(N[O]=1);for(O=1;O<N.length;O+=2)N[O]+=M.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!u&&!!this.canvasDash});H(z.Shape,"setShape");z.Group=c("dojox.gfx.canvas.Group",z.Shape,{constructor:function(){f.Container._init.call(this)},_render:function(M){M.save();this._renderTransform(M);this._renderClip(M);for(var N=0;N<this.children.length;++N)this.children[N]._render(M);M.restore()},
destroy:function(){f.Container.clear.call(this,!0);z.Shape.prototype.destroy.apply(this,arguments)}});z.Rect=c("dojox.gfx.canvas.Rect",[z.Shape,f.Rect],{_renderShape:function(M){var N=this.shape,O=Math.min(N.r,N.height/2,N.width/2),Y=N.x,ba=Y+N.width,ha=N.y;N=ha+N.height;var U=Y+O,X=ba-O,Z=ha+O,P=N-O;M.beginPath();M.moveTo(U,ha);O?(M.arc(X,Z,O,-x,0,!1),M.arc(X,P,O,0,x,!1),M.arc(U,P,O,x,C,!1),M.arc(U,Z,O,C,C+x,!1)):(M.lineTo(X,ha),M.lineTo(ba,P),M.lineTo(U,N),M.lineTo(Y,Z));M.closePath()},_renderDashedStroke:function(M,
N){var O=this.shape,Y=Math.min(O.r,O.height/2,O.width/2),ba=O.x,ha=ba+O.width,U=O.y,X=U+O.height,Z=ba+Y,P=ha-Y,da=U+Y,ia=X-Y;Y?(M.beginPath(),O=t(M,this,Z,U,P,U),N&&M.stroke(),O=e(M,this.canvasDash,P,da,Y,-x,0,!1,N,O),M.beginPath(),O=t(M,this,ha,da,ha,ia,O),N&&M.stroke(),O=e(M,this.canvasDash,P,ia,Y,0,x,!1,N,O),M.beginPath(),O=t(M,this,P,X,Z,X,O),N&&M.stroke(),O=e(M,this.canvasDash,Z,ia,Y,x,C,!1,N,O),M.beginPath(),O=t(M,this,ba,ia,ba,da,O),N&&M.stroke(),e(M,this.canvasDash,Z,da,Y,C,C+x,!1,N,O)):(M.beginPath(),
O=t(M,this,Z,U,P,U),O=t(M,this,P,U,ha,ia,O),O=t(M,this,ha,ia,Z,X,O),t(M,this,Z,X,ba,da,O),N&&M.stroke())}});var K=[];(function(){var M=q.curvePI4;K.push(M.s,M.c1,M.c2,M.e);for(var N=45;360>N;N+=45){var O=l.rotateg(N);K.push(y(O,M.c1),y(O,M.c2),y(O,M.e))}})();var I=function(M){var N=[],O=M.shape,Y=l.normalize([l.translate(O.cx,O.cy),l.scale(O.rx,O.ry)]);var ba=y(Y,K[0]);N.push([ba.x,ba.y]);for(O=1;O<K.length;O+=3){var ha=y(Y,K[O]);var U=y(Y,K[O+1]);ba=y(Y,K[O+2]);N.push([ha.x,ha.y,U.x,U.y,ba.x,ba.y])}if(M._needsDash){ba=
[];ha=N[0];for(O=1;O<N.length;++O)U=[],d(ha.concat(N[O]),M.canvasDash,U),ha=[N[O][4],N[O][5]],ba.push(U);M._dashedPoints=ba}return N};z.Ellipse=c("dojox.gfx.canvas.Ellipse",[z.Shape,f.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=I(this);return this},setStroke:function(){this.inherited(arguments);u||(this.canvasEllipse=I(this));return this},_renderShape:function(M){var N=this.canvasEllipse,O;M.beginPath();M.moveTo.apply(M,N[0]);for(O=1;O<N.length;++O)M.bezierCurveTo.apply(M,
N[O]);M.closePath()},_renderDashedStroke:function(M,N){var O=this._dashedPoints;M.beginPath();for(var Y=0;Y<O.length;++Y)for(var ba=O[Y],ha=0;ha<ba.length;++ha){var U=ba[ha];M.moveTo(U[0],U[1]);M.bezierCurveTo(U[2],U[3],U[4],U[5],U[6],U[7])}N&&M.stroke()}});z.Circle=c("dojox.gfx.canvas.Circle",[z.Shape,f.Circle],{_renderShape:function(M){var N=this.shape;M.beginPath();M.arc(N.cx,N.cy,N.r,0,F,1)},_renderDashedStroke:function(M,N){var O=this.shape,Y=0,ba=this.canvasDash.length;for(i=0;Y<F;){var ha=
this.canvasDash[i%ba]/O.r;i%2||(M.beginPath(),M.arc(O.cx,O.cy,O.r,Y,Y+ha,0),N&&M.stroke());Y+=ha;++i}}});z.Line=c("dojox.gfx.canvas.Line",[z.Shape,f.Line],{_renderShape:function(M){var N=this.shape;M.beginPath();M.moveTo(N.x1,N.y1);M.lineTo(N.x2,N.y2)},_renderDashedStroke:function(M,N){var O=this.shape;M.beginPath();t(M,this,O.x1,O.y1,O.x2,O.y2);N&&M.stroke()}});z.Polyline=c("dojox.gfx.canvas.Polyline",[z.Shape,f.Polyline],{setShape:function(){this.inherited(arguments);var M=this.shape.points,N=M[0],
O;this.bbox=null;this._normalizePoints();if(M.length)if("number"==typeof N)N=M;else for(N=[],O=0;O<M.length;++O){var Y=M[O];N.push(Y.x,Y.y)}else N=[];this.canvasPolyline=N;return this},_renderShape:function(M){var N=this.canvasPolyline;if(N.length){M.beginPath();M.moveTo(N[0],N[1]);for(var O=2;O<N.length;O+=2)M.lineTo(N[O],N[O+1])}},_renderDashedStroke:function(M,N){var O=this.canvasPolyline,Y=0;M.beginPath();for(var ba=0;ba<O.length;ba+=2)Y=t(M,this,O[ba],O[ba+1],O[ba+2],O[ba+3],Y);N&&M.stroke()}});
z.Image=c("dojox.gfx.canvas.Image",[z.Shape,f.Image],{setShape:function(){this.inherited(arguments);var M=new Image;this.surface.downloadImage(M,this.shape.src);this.canvasImage=M;return this},_renderShape:function(M){var N=this.shape;M.drawImage(this.canvasImage,N.x,N.y,N.width,N.height)}});z.Text=c("dojox.gfx.canvas.Text",[z.Shape,f.Text],{_setFont:function(){this.fontStyle?this.canvasFont=D.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var M=this.shape,N=0;if(M.text){var O=
this.surface.rawNode.getContext("2d");O.save();this._renderTransform(O);this._renderFill(O,!1);this._renderStroke(O,!1);this.canvasFont&&(O.font=this.canvasFont);N=O.measureText(M.text).width;O.restore()}return N},_render:function(M){M.save();this._renderTransform(M);this._renderFill(M,!1);this._renderStroke(M,!1);this._renderShape(M);M.restore()},_renderShape:function(M){var N=this.shape;N.text&&(M.textAlign="middle"===N.align?"center":N.align,this.canvasFont&&(M.font=this.canvasFont),this.canvasFill&&
M.fillText(N.text,N.x,N.y),this.strokeStyle&&(M.beginPath(),M.strokeText(N.text,N.x,N.y),M.closePath()))}});H(z.Text,"setFont");w||z.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var J={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",
A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};z.Path=c("dojox.gfx.canvas.Path",[z.Shape,m.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);u||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(M){var N=B.clone(this.last);this[J[M.action]](this.canvasPath,
M.action,M.args,this._needsDash?this._dashedPath:null);this.last=N;this.inherited(arguments)},_renderShape:function(M){var N=this.canvasPath;M.beginPath();for(var O=0;O<N.length;O+=2)M[N[O]].apply(M,N[O+1])},_renderDashedStroke:u?function(){}:function(M,N){var O=this._dashedPath;M.beginPath();for(var Y=0;Y<O.length;Y+=2)M[O[Y]].apply(M,O[Y+1]);N&&M.stroke()},_moveToA:function(M,N,O,Y){M.push("moveTo",[O[0],O[1]]);Y&&Y.push("moveTo",[O[0],O[1]]);for(N=2;N<O.length;N+=2)M.push("lineTo",[O[N],O[N+1]]),
Y&&(this._dashResidue=t(Y,this,O[N-2],O[N-1],O[N],O[N+1],this._dashResidue));this.last.x=O[O.length-2];this.last.y=O[O.length-1];this.lastControl={}},_moveToR:function(M,N,O,Y){N="x"in this.last?[this.last.x+=O[0],this.last.y+=O[1]]:[this.last.x=O[0],this.last.y=O[1]];M.push("moveTo",N);Y&&Y.push("moveTo",N);for(N=2;N<O.length;N+=2)M.push("lineTo",[this.last.x+=O[N],this.last.y+=O[N+1]]),Y&&(this._dashResidue=t(Y,this,Y[Y.length-1][0],Y[Y.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl=
{}},_lineToA:function(M,N,O,Y){for(N=0;N<O.length;N+=2)Y&&(this._dashResidue=t(Y,this,this.last.x,this.last.y,O[N],O[N+1],this._dashResidue)),M.push("lineTo",[O[N],O[N+1]]);this.last.x=O[O.length-2];this.last.y=O[O.length-1];this.lastControl={}},_lineToR:function(M,N,O,Y){for(N=0;N<O.length;N+=2)M.push("lineTo",[this.last.x+=O[N],this.last.y+=O[N+1]]),Y&&(this._dashResidue=t(Y,this,Y[Y.length-1][0],Y[Y.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(M,
N,O,Y){for(N=0;N<O.length;++N)M.push("lineTo",[O[N],this.last.y]),Y&&(this._dashResidue=t(Y,this,Y[Y.length-1][0],Y[Y.length-1][1],O[N],this.last.y,this._dashResidue));this.last.x=O[O.length-1];this.lastControl={}},_hLineToR:function(M,N,O,Y){for(N=0;N<O.length;++N)M.push("lineTo",[this.last.x+=O[N],this.last.y]),Y&&(this._dashResidue=t(Y,this,Y[Y.length-1][0],Y[Y.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(M,N,O,Y){for(N=0;N<O.length;++N)M.push("lineTo",
[this.last.x,O[N]]),Y&&(this._dashResidue=t(Y,this,Y[Y.length-1][0],Y[Y.length-1][1],this.last.x,O[N],this._dashResidue));this.last.y=O[O.length-1];this.lastControl={}},_vLineToR:function(M,N,O,Y){for(N=0;N<O.length;++N)M.push("lineTo",[this.last.x,this.last.y+=O[N]]),Y&&(this._dashResidue=t(Y,this,Y[Y.length-1][0],Y[Y.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(M,N,O,Y){for(N=0;N<O.length;N+=6)M.push("bezierCurveTo",O.slice(N,N+6)),Y&&(this._dashResidue=
h(Y,this,M[M.length-1],this._dashResidue));this.last.x=O[O.length-2];this.last.y=O[O.length-1];this.lastControl.x=O[O.length-4];this.lastControl.y=O[O.length-3];this.lastControl.type="C"},_curveToR:function(M,N,O,Y){for(N=0;N<O.length;N+=6)M.push("bezierCurveTo",[this.last.x+O[N],this.last.y+O[N+1],this.lastControl.x=this.last.x+O[N+2],this.lastControl.y=this.last.y+O[N+3],this.last.x+O[N+4],this.last.y+O[N+5]]),Y&&(this._dashResidue=h(Y,this,M[M.length-1],this._dashResidue)),this.last.x+=O[N+4],
this.last.y+=O[N+5];this.lastControl.type="C"},_smoothCurveToA:function(M,N,O,Y){for(N=0;N<O.length;N+=4){var ba="C"==this.lastControl.type;M.push("bezierCurveTo",[ba?2*this.last.x-this.lastControl.x:this.last.x,ba?2*this.last.y-this.lastControl.y:this.last.y,O[N],O[N+1],O[N+2],O[N+3]]);Y&&(this._dashResidue=h(Y,this,M[M.length-1],this._dashResidue));this.lastControl.x=O[N];this.lastControl.y=O[N+1];this.lastControl.type="C"}this.last.x=O[O.length-2];this.last.y=O[O.length-1]},_smoothCurveToR:function(M,
N,O,Y){for(N=0;N<O.length;N+=4){var ba="C"==this.lastControl.type;M.push("bezierCurveTo",[ba?2*this.last.x-this.lastControl.x:this.last.x,ba?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+O[N],this.last.y+O[N+1],this.last.x+O[N+2],this.last.y+O[N+3]]);Y&&(this._dashResidue=h(Y,this,M[M.length-1],this._dashResidue));this.lastControl.x=this.last.x+O[N];this.lastControl.y=this.last.y+O[N+1];this.lastControl.type="C";this.last.x+=O[N+2];this.last.y+=O[N+3]}},_qCurveToA:function(M,N,O,Y){for(N=
0;N<O.length;N+=4)M.push("quadraticCurveTo",O.slice(N,N+4));Y&&(this._dashResidue=h(Y,this,M[M.length-1],this._dashResidue));this.last.x=O[O.length-2];this.last.y=O[O.length-1];this.lastControl.x=O[O.length-4];this.lastControl.y=O[O.length-3];this.lastControl.type="Q"},_qCurveToR:function(M,N,O,Y){for(N=0;N<O.length;N+=4)M.push("quadraticCurveTo",[this.lastControl.x=this.last.x+O[N],this.lastControl.y=this.last.y+O[N+1],this.last.x+O[N+2],this.last.y+O[N+3]]),Y&&(this._dashResidue=h(Y,this,M[M.length-
1],this._dashResidue)),this.last.x+=O[N+2],this.last.y+=O[N+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(M,N,O,Y){for(N=0;N<O.length;N+=2){var ba="Q"==this.lastControl.type;M.push("quadraticCurveTo",[this.lastControl.x=ba?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=ba?2*this.last.y-this.lastControl.y:this.last.y,O[N],O[N+1]]);Y&&(this._dashResidue=h(Y,this,M[M.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=O[O.length-2];this.last.y=O[O.length-1]},
_qSmoothCurveToR:function(M,N,O,Y){for(N=0;N<O.length;N+=2){var ba="Q"==this.lastControl.type;M.push("quadraticCurveTo",[this.lastControl.x=ba?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=ba?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+O[N],this.last.y+O[N+1]]);Y&&(this._dashResidue=h(Y,this,M[M.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=O[N];this.last.y+=O[N+1]}},_arcTo:function(M,N,O,Y){N="a"==N;for(var ba=0;ba<O.length;ba+=7){var ha=O[ba+
5],U=O[ba+6];N&&(ha+=this.last.x,U+=this.last.y);var X=q.arcAsBezier(this.last,O[ba],O[ba+1],O[ba+2],O[ba+3]?1:0,O[ba+4]?1:0,ha,U);a.forEach(X,function(Z){M.push("bezierCurveTo",Z)});Y&&(this._dashResidue=h(Y,this,p,this._dashResidue));this.last.x=ha;this.last.y=U}this.lastControl={}},_closePath:function(M,N,O,Y){M.push("closePath",[]);Y&&(this._dashResidue=t(Y,this,this.last.x,this.last.y,Y[1][0],Y[1][1],this._dashResidue));this.lastControl={}}});a.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),
function(M){H(z.Path,M)});z.TextPath=c("dojox.gfx.canvas.TextPath",[z.Shape,m.TextPath],{_renderShape:function(M){},_setText:function(){},_setFont:function(){}});z.Surface=c("dojox.gfx.canvas.Surface",f.Surface,{constructor:function(){f.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){f.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(M,N){this.width=D.normalizedLength(M);this.height=D.normalizedLength(N);if(!this.rawNode)return this;
var O=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,O=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,O=!0);O&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(M){!this.rawNode||!M&&this.pendingImageCount||(M=this.rawNode.getContext("2d"),M.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(M),"pendingRender"in this&&(clearTimeout(this.pendingRender),
delete this.pendingRender))},render:function(M){M.save();for(var N=0;N<this.children.length;++N)this.children[N]._render(M);M.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(B.hitch(this,this._render),0))},downloadImage:function(M,N){var O=B.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);M.onload=O;M.onerror=O;M.onabort=O;M.src=
N},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});z.createSurface=function(M,N,O){if(!N&&!O){var Y=n.position(M);N=N||Y.w;O=O||Y.h}"number"==typeof N&&(N+="px");"number"==typeof O&&(O+="px");Y=new z.Surface;M=r.byId(M);var ba=M.ownerDocument.createElement("canvas");ba.width=D.normalizedLength(N);ba.height=D.normalizedLength(O);
M.appendChild(ba);Y.rawNode=ba;Y._parent=M;return Y.surface=Y};var L=f.Container;c={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(M){this._makeDirty();return L.add.apply(this,arguments)},remove:function(M,N){this._makeDirty();return L.remove.apply(this,arguments)},clear:function(){this._makeDirty();return L.clear.apply(this,arguments)},
getBoundingBox:L.getBoundingBox,_moveChildToFront:function(M){this._makeDirty();return L._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(M){this._makeDirty();return L._moveChildToBack.apply(this,arguments)}};m={createObject:function(M,N){var O=new M;O.surface=this.surface;O.setShape(N);this.add(O);return O}};b(z.Group,c);b(z.Group,f.Creator);b(z.Group,m);b(z.Surface,c);b(z.Surface,f.Creator);b(z.Surface,m);z.fixTarget=function(M,N){return!0};return z})},"dojox/gfx/arc":function(){define(["./_base",
"dojo/_base/lang","./matrix"],function(D,B,a){function c(q){var l=Math.cos(q);q=Math.sin(q);var b={x:l+4/3*(1-l),y:q-4/3*l*(1-l)/q};return{s:{x:l,y:-q},c1:{x:b.x,y:-b.y},c2:b,e:{x:l,y:q}}}var k=2*Math.PI,n=Math.PI/4,r=Math.PI/8,f=n+r,m=c(r);return D.arc={unitArcAsBezier:c,curvePI4:m,arcAsBezier:function(q,l,b,g,e,d,h,t){e=!!e;d=!!d;var z=a._degToRad(g);g=l*l;var v=b*b,y=a.multiplyPoint(a.rotate(-z),{x:(q.x-h)/2,y:(q.y-t)/2}),C=y.x*y.x,F=y.y*y.y;g=Math.sqrt((g*v-g*F-v*C)/(g*F+v*C));isNaN(g)&&(g=0);
g={x:g*l*y.y/b,y:-g*b*y.x/l};e==d&&(g={x:-g.x,y:-g.y});g=a.multiplyPoint([a.translate((q.x+h)/2,(q.y+t)/2),a.rotate(z)],g);l=a.normalize([a.translate(g.x,g.y),a.rotate(z),a.scale(l,b)]);g=a.invert(l);q=a.multiplyPoint(g,q);t=a.multiplyPoint(g,h,t);h=Math.atan2(q.y,q.x);g=h-Math.atan2(t.y,t.x);d&&(g=-g);0>g?g+=k:g>k&&(g-=k);b=r;t=m;b=d?b:-b;q=[];for(e=g;0<e;e-=n)e<f&&(b=e/2,t=c(b),b=d?b:-b,e=0),y=a.normalize([l,a.rotate(h+b)]),d?(g=a.multiplyPoint(y,t.c1),z=a.multiplyPoint(y,t.c2),y=a.multiplyPoint(y,
t.e)):(g=a.multiplyPoint(y,t.c2),z=a.multiplyPoint(y,t.c1),y=a.multiplyPoint(y,t.s)),q.push([g.x,g.y,z.x,z.y,y.x,y.y]),h+=2*b;return q}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(D,B,a){function c(m,q){return Math.abs(m-q)<=1E-6*(Math.abs(m)+Math.abs(q))}function k(m,q,l,b){if(!isFinite(m))return l;if(!isFinite(l))return m;q=Math.abs(q);b=Math.abs(b);return(q*m+b*l)/(q+b)}function n(m){m=a.normalize(m);var q=-m.xx-m.yy,l=m.xx*m.yy-m.xy*m.yx,b=Math.sqrt(q*
q-4*l);q=-(q+(0>q?-b:b))/2;l/=q;b=m.xy/(q-m.xx);var g=1,e=m.xy/(l-m.xx),d=1;c(q,l)&&(b=1,e=g=0,d=1);isFinite(b)||(b=1,g=(q-m.xx)/m.xy,isFinite(g)||(b=(q-m.yy)/m.yx,g=1,isFinite(b)||(b=1,g=m.yx/(q-m.yy))));isFinite(e)||(e=1,d=(l-m.xx)/m.xy,isFinite(d)||(e=(l-m.yy)/m.yx,d=1,isFinite(e)||(e=1,d=m.yx/(l-m.yy))));m=Math.sqrt(b*b+g*g);var h=Math.sqrt(e*e+d*d);isFinite(b/=m)||(b=0);isFinite(g/=m)||(g=0);isFinite(e/=h)||(e=0);isFinite(d/=h)||(d=0);return{value1:q,value2:l,vector1:{x:b,y:g},vector2:{x:e,y:d}}}
function r(m,q){var l=0>m.xx*m.yy||0<m.xy*m.yx?-1:1,b=q.angle1=(Math.atan2(m.yx,m.yy)+Math.atan2(-l*m.xy,l*m.xx))/2;l=Math.cos(b);b=Math.sin(b);q.sx=k(m.xx/l,l,-m.xy/b,b);q.sy=k(m.yy/l,l,m.yx/b,b);return q}function f(m,q){var l=0>m.xx*m.yy||0<m.xy*m.yx?-1:1,b=q.angle2=(Math.atan2(l*m.yx,l*m.xx)+Math.atan2(-m.xy,m.yy))/2;l=Math.cos(b);b=Math.sin(b);q.sx=k(m.xx/l,l,m.yx/b,b);q.sy=k(m.yy/l,l,-m.xy/b,b);return q}return D.decompose=function(m){var q=a.normalize(m);m={dx:q.dx,dy:q.dy,sx:1,sy:1,angle1:0,
angle2:0};if(c(q.xy,0)&&c(q.yx,0))return B.mixin(m,{sx:q.xx,sy:q.yy});if(c(q.xx*q.yx,-q.xy*q.yy))return r(q,m);if(c(q.xx*q.xy,-q.yx*q.yy))return f(q,m);var l=new a.Matrix2D(q);var b=B.mixin(l,{dx:0,dy:0,xy:l.yx,yx:l.xy});l=n([q,b]);b=n([b,q]);l=new a.Matrix2D({xx:l.vector1.x,xy:l.vector2.x,yx:l.vector1.y,yy:l.vector2.y});b=new a.Matrix2D({xx:b.vector1.x,xy:b.vector1.y,yx:b.vector2.x,yy:b.vector2.y});q=new a.Matrix2D([a.invert(l),q,a.invert(b)]);r(b,m);q.xx*=m.sx;q.yy*=m.sy;f(l,m);q.xx*=m.sx;q.yy*=
m.sy;return B.mixin(m,{sx:q.xx,sy:q.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(D){D=D.bezierutils={};D.tAtLength=function(r,f){var m=0,q=6==r.length,l=0,b=0,g=q?c:n,e=function(d,h){for(var t=0,z=0;z<d.length-2;z+=2)t+=a(d[z],d[z+1],d[z+2],d[z+3]);z=q?a(r[0],r[1],r[4],r[5]):a(r[0],r[1],r[6],r[7]);t-z>h||l+t>f+h?(++b,t=g(d,.5),e(t[0],h),Math.abs(l-f)<=h||e(t[1],h)):(l+=t,m+=1/(1<<b))};f&&e(r,.5);return m};var B=D.computeLength=function(r){for(var f=6==r.length,m=0,q=0;q<
r.length-2;q+=2)m+=a(r[q],r[q+1],r[q+2],r[q+3]);q=f?a(r[0],r[1],r[4],r[5]):a(r[0],r[1],r[6],r[7]);return.1<m-q?(r=f?c(r,.5):k(r,.5),m=B(r[0],f),m+=B(r[1],f)):m},a=D.distance=function(r,f,m,q){return Math.sqrt((m-r)*(m-r)+(q-f)*(q-f))},c=function(r,f){var m=1-f,q=m*m,l=f*f,b=r[0],g=r[1],e=r[2],d=r[3],h=r[4],t=r[5],z=q*b+2*m*f*e+l*h;q=q*g+2*m*f*d+l*t;return[[b,g,m*b+f*e,m*g+f*d,z,q],[z,q,m*e+f*h,m*d+f*t,h,t]]},k=function(r,f){var m=1-f,q=m*m,l=q*m,b=f*f,g=b*f,e=r[0],d=r[1],h=r[2],t=r[3],z=r[4],v=r[5],
y=r[6],C=r[7],F=l*e+3*q*f*h+3*m*b*z+g*y;l=l*d+3*q*f*t+3*m*b*v+g*C;return[[e,d,m*e+f*h,m*d+f*t,q*e+2*m*f*h+b*z,q*d+2*m*f*t+b*v,F,l],[F,l,q*h+2*m*f*z+b*y,q*t+2*m*f*v+b*C,m*z+f*y,m*v+f*C,y,C]]},n=D.splitBezierAtT=function(r,f){return 6==r.length?c(r,f):k(r,f)};return D})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(D,B,a){B.getObject("json",!0,a);a.json._slice=function(c,k,n,r){var f=c.length,m=[];n=n||f;k=0>k?Math.max(0,k+f):Math.min(f,
k);for(n=0>n?Math.max(0,n+f):Math.min(f,n);k<n;k+=r)m.push(c[k]);return m};a.json._find=function(c,k){function n(m){k&&(!0!==k||m instanceof Array?m[k]&&r.push(m[k]):r.push(m));for(var q in m){var l=m[q];k?l&&"object"==typeof l&&n(l):r.push(l)}}var r=[];if(k instanceof Array){if(1==k.length)return c[k[0]];for(var f=0;f<k.length;f++)r.push(c[k[f]])}else n(c);return r};a.json._distinctFilter=function(c,k){for(var n=[],r={},f=0,m=c.length;f<m;++f){var q=c[f];k(q,f,c)&&("object"==typeof q&&q?q.__included||
(q.__included=!0,n.push(q)):r[q+typeof q]||(r[q+typeof q]=!0,n.push(q)))}f=0;for(m=n.length;f<m;++f)n[f]&&delete n[f].__included;return n};return a.json.query=function(c,k){function n(b,g,e,d,h,t,z,v){return f[v].match(/[\*\?]/)||"~"==z?"/^"+f[v].substring(1,f[v].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==z?"$/i":"$/")+".test("+g+")":b}var r=0,f=[];c=c.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(b){r+="["==b?1:"]"==b?-1:0;return"]"==
b&&0<r?"`]":'"'==b.charAt(0)||"'"==b.charAt(0)?"`"+(f.push(b)-1):b});var m="";c.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});c=c.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(b){return"."==b.charAt(0)?b:"@"==b?"$obj":(b.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+b}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(b,g,e){return(g=b.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?
(e="",b.match(/^\./)&&(m="dojox.json._find("+m,e=",true)"),m=(g[1].match(/=/)?"dojo.map":g[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+m,e+",function($obj){return "+g[2]+"})"):(g=b.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+g[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(d,h,t){return"var av\x3d "+t.replace(/\$obj/,"a")+",bv\x3d "+t.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==h?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==
h?-1:1)+";}\n"})+"return 0;})":(g=b.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(m="dojox.json._slice("+m,","+(g[1]||0)+","+(g[2]||0)+","+(g[3]||1)+")"):b.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(m="dojox.json._find("+m,("."==b.charAt(1)?",'"+e+"'":b.match(/,/)?","+b:"")+")"):b}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,n).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(b,g,e,d,h,t,z,v){return n(b,d,h,t,z,v,e,g)});
c=m+("$"==c.charAt(0)?"":"$")+c.replace(/`([0-9]+|\])/g,function(b,g){return"]"==g?"]":f[g]});for(var q=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+c+"}"),l=0;l<arguments.length-1;l++)arguments[l]=arguments[l+1];return k?q.apply(this,arguments):q}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,
extraParameters:null});B.setObject("tasks.PrintParameters",D,c);return D})},"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,subLayerIds:null});B.setObject("tasks.LegendLayer",D,c);return D})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l){return function(b,g,e,d){var h=B.byId("hiddenMapDiv");B.byId("hiddenMapDiv")||(h=r.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",width:"200px",height:"130px"}},document.body));r.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},h);h={item:{}};h.item.extent=g;h.itemData=b;l.arcgisUrl=q.restBaseUrl+"content/items";l.createMap(h,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(t){var z=
function(x){var u=new k;x._heatmapManager?c.after(x._heatmapManager,"recalculateHeatmap",function(){u.resolve()}):u.resolve();return u},v=function(x){var u=new k;if(x.updating){"esri.layers.VectorTileLayer"===x.declaredClass&&setTimeout(function(){w&&(w.remove(),u.resolve())},1E4);var w=D(x,"update-end",function(){w.remove();u.resolve()})}else u.resolve();return u},y=function(x){var u=new k;"esri.layers.VectorTileLayer"===x.declaredClass&&setTimeout(function(){w&&(w.remove(),u.resolve())},5E3);var w=
D(x,"update-start",function(){w.remove();v(x).then(function(){u.resolve()})});return u},C=function(x){var u=new k,w=setInterval(f.hitch(this,function(A,E){A.graphics&&A.graphics.length?(clearInterval(w),u.resolve()):10<E[0]?(clearInterval(w),u.resolve()):E[0]+=1},x,[0]),500);return u},F=[];m.forEach(t.map.graphicsLayerIds,function(x){x=t.map.getLayer(x);x.renderer&&"heatmap"===x.renderer.type?F.push(z(x)):"esri.layers.WFSLayer"===x.declaredClass?F.push(C(x)):x.updating&&F.push(v(x))});m.forEach(t.map.layerIds,
function(x){x=t.map.getLayer(x);x.updating?F.push(v(x)):"esri.layers.VectorTileLayer"===x.declaredClass&&F.push(y(x))});F.length?n(F).then(function(x){setTimeout(function(){e(t.map)},1E3)}):e(t.map)},function(t){d&&d(t)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),
function(D,B,a,c,k,n,r){return function(f,m,q){function l(){b.resolve(m)}var b=new D;if(!(f.layer instanceof B)||f.layer instanceof a)return b.resolve(m),b;var g=f.layer;f.layers&&(g=f.layers[0]);g.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){g.statisticsPlugin.getSuggestedScaleRange().then(function(e){if(e.center){var d=n(e.center,1280,e.minScale);if(0<e.relaxedMinScale)for(var h=r(d,200),t=800;h>e.relaxedMinScale&&!(d=n(e.center,t,e.minScale),h=r(d,200),t-=200,0>=t););k(d,new c({wkid:4326}),
function(z){m=[[z[0].xmin,z[0].ymin],[z[0].xmax,z[0].ymax]];l()},l)}else l()},l)},l);return b}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F){D=D([e],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(x,u){u=u||{};u.mode&&u.mode!==e.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=e.MODE_STREAM,this._mode=new d(this));this.purgeOptions=new F(this,u.purgeOptions||{});this.purgeInterval=u.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=k.hitch(this,this._attemptReconnect);this._purge=k.hitch(this,this._purge);this._processServiceJson=k.hitch(this,this._processServiceJson);if(k.isObject(x)&&x.layerDefinition)this._initFeatureLayer(x,u);else{var w=this;b({url:x,content:k.mixin({f:"json"}),callbackParamName:"callback"}).then(function(A){w._processServiceJson(A,u)},function(A){w._errorHandler(A)})}},_processServiceJson:function(x,
u){var w=this;x.relatedFeatures&&x.relatedFeatures.featuresUrl&&x.relatedFeatures.joinField?(this._relatedUrl=x.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=x.relatedFeatures.joinField,b({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(A){A=A.fields||[];var E=a.map(x.fields,function(G){return G.name.toLowerCase()});a.forEach(A,function(G){-1===a.indexOf(E,G.name.toLowerCase())&&x.fields.push(G)});u.resourceInfo=x;w._initFeatureLayer(w._url,u)},
function(A){w.onError({error:A})})):(u.resourceInfo=x,this._initFeatureLayer(this._url,u))},_initLayer:function(x,u){this.inherited(arguments);if(x){var w;if(x.layerDefinition)this.purgeOptions=new F(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||x.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var A=this._getWebsocketConnectionInfo(x),E=A.urls;E&&E.length?(this._socketUrls=E,this.socketUrl=E[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=A.token,E.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=E.length)):(this.socketUrl=void 0,A="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(A+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(A)))}if(this._params.filter)try{this._filter=
w=this._makeFilter(this._params.filter)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){w=w||{};w.geometry=this._params.geometryDefinition;w.outFields=this._outFields;w.where=this._defnExpr;try{this._filter=w=this._makeFilter(w)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=x.keepLatestArchive?x.keepLatestArchive.featuresUrl:null;x.relatedFeatures&&x.relatedFeatures.featuresUrl&&x.relatedFeatures.joinField&&(this._relatedUrl=x.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=x.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(x){var u=this.inherited(arguments),w=this._getRenderer();this.timeInfo&&(this._trackIdField||w&&(w.latestObservationRenderer||w.trackRenderer))&&(this._trackManager=new h(this),this._trackManager.initialize(x));this.socketUrl&&!this._connected&&this._map&&this.connect();return u},_unsetMap:function(x,
u){a.forEach(this._connects,B.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(x){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(x){this.setFilter({where:x})},getDefinitionExpression:function(){if(this._filter)var x=this._filter.where;return x},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(x){this.inherited(arguments)},setGeometryDefinition:function(x){this.setFilter({geometry:x})},getGeometryDefinition:function(){if(this._filter)var x=this._filter.geometry;return x},connect:function(x){var u=new n,w={},A=this._filter,E,G,H=this.socketUrl,K;try{this._connected||this._connecting?u.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(w.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(w.outSR=this._map.spatialReference.wkid);if(A)for(G in A)null!==A[G]&&(E="geometry"===G?JSON.stringify(A[G]):A[G],w[G]=E);H+="?"+f.objectToQuery(w);K=this._createConnection(H,x);u.resolve(K)}.bind(this)).otherwise(function(I){u.reject(I)}))}catch(I){x&&(x(I,!1),u.reject(I)),this.onConnectionError({error:I})}return u.promise},disconnect:function(x){var u=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",w=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:w,message:u});x&&x(null,!0)},setFilter:function(x){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
x.outFields){var u=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:u});return!1}var w=this._makeFilter(x)}catch(A){return u=Error(A),this.onFilterChange({filter:this.getFilter(),error:u}),!1}if(this.socket)x={filter:w},this.socket.send(JSON.stringify(x));else m.once(this,"connect",function(A){this.setFilter(w)});return!0},getFilter:function(){var x=this._filter,u={},w=["geometry","outFields","where"];x&&a.forEach(w,function(A){var E=
x[A];E&&("geometry"===A?E=t.fromJson(E):"outFields"===A&&(E=E.split(",")),u[A]=E)});return u},setMaximumTrackPoints:function(x){if(!x&&0!==x)return!1;this.maximumTrackPoints=x;this._mode.propertyChangeHandler(3)},getUniqueValues:function(x){var u={},w=[];var A=this._getField(x,!0);if(!A)return w;x=A.name;a.forEach(this.graphics||[],function(E){E=(E.attributes||{})[x];void 0===E||u[E]||(u[E]=1,w.push(E))});w.sort(function(E,G){return E<G?-1:E>G?1:0});return w},getLatestObservations:function(){var x=
[];return x=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(x){var u=this.purgeInterval;this.purgeInterval=x;this._togglePurgeT();x&&this._togglePurgeT(!0);if(u!==x)this.onPurgeIntervalChange();return this},_togglePurgeT:function(x){if(x&&this.purgeInterval){var u=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){u.updating||u.suspended||(u._mode._flushDrawBuffer(),u._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(x,u){var w=this,A=new WebSocket(x);A.onopen=function(){w.socket=A;w._connected=!0;w._connecting=!1;w._reconnecting=!1;w._reconnectAttempts=0;w._bind();w.onConnect();u&&u(null,!0)};A.onclose=
function(E){var G=!0,H=w._connected,K=null;if(w._connected||w._reconnecting){if(E.code){var I="Connection failed: ";if(1001===E.code)I+=E.reason||"Service is going away.",G=!1;else if(4400===E.code)I+=E.reason||"Invalid url parameters. Check filter properties.",G=!1;else if(4404===E.code)I+="Service not found",G=!1;else if(4401===E.code||4403===E.code)I+="Not authorized",G=!1}G&&(w._reconnectAttempts+=1,w._reconnectAttempts>w.maxReconnectAttempts&&(I="Maximum reconnect attempts exceeded",G=!1,H=!0));
w._connected=!1;H&&(I&&(K=Error(I)),w.onDisconnect({error:K,willReconnect:G}));G?w._attemptReconnect():w.socket=null}else w.socket||(K=Error("Could not make connection to service"),w.onConnectionError({error:K})),w.socket=null,w._connected=!1};A.onerror=function(E){};return A},_getKeepLatestFeatures:function(){var x=new n;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){x.resolve()}.bind(this)).otherwise(function(u){x.reject(u)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):x.resolve();return x.promise},_getRelatedFeatures:function(){var x=new n;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){x.resolve()}.bind(this)).otherwise(function(u){x.reject(u)}).always(function(){this._relatedQueried=!0}.bind(this)):x.resolve();return x.promise},_purge:function(){var x,u=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(x=0;x<this.graphics.length-
this.purgeOptions.displayCount;x++){var w=this.graphics[x];u.push(w)}0<u.length&&(this._mode._removeFeatures(u),this._trackManager&&this._trackManager.removeFeatures(u))},_bind:function(){var x=this;this.socket.onmessage=function(u){x._onMessage(JSON.parse(u.data))}},_onMessage:function(x){var u=this;this.onMessage(x);var w={create:function(A){u._create(A)},update:function(A){u._update(A)},"delete":function(A){u._delete(A)}};if(x.type)w[x.type](x.feature);else x.hasOwnProperty("filter")?u._handleFilterMessage(x):
this._create(x)},_create:function(x){function u(E){if(!w._featureHasOID(E,A)){if(!E.geometry)return!1;E.attributes=E.attributes||{};E.attributes[A]=w._nextId++}E=E.declaredClass?E:new g(E);w._mode.drawFeature(E)}var w=this,A=w.objectIdField;x.length?x.forEach(function(E){E&&u(E)}):x&&u(x)},_delete:function(x){var u=this,w=x[u.objectIdField]||x.attributes[u.objectIdField],A=!1;this.graphics.forEach(function(E){E.attributes[u.objectIdField]==w&&(A=E)});A&&this.remove(A)},_update:function(x){var u=this,
w=!1;this.graphics.forEach(function(A){A.attributes[u.objectIdField]==x.attributes[u.objectIdField]&&(w=A)});w&&(x.attributes&&w.setAttributes(x.attributes),x.geometry&&w.setGeometry(t.fromJson(x.geometry)))},_makeFilter:function(x){var u=null;x=x||{};if(void 0!==x.geometry)if(u=u||{},null===x.geometry)u.geometry=null;else{var w="string"===typeof x.geometry?t.fromJson(JSON.parse(x.geometry)):x.geometry.declaredClass?x.geometry:t.fromJson(x.geometry);if(!w||"point"===w.type)throw"Query object contains invalid geometry";
"extent"!==w.type&&(w=w.getExtent());if(!w||0===w.getHeight()&&0===w.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";u.spatialRel="esriSpatialRelIntersects";u.geometryType="esriGeometryEnvelope";u.geometry=w.toJson()}void 0!==x.where&&(u=u||{},u.where=x.where);if(void 0!==x.outFields&&(u=u||{},x="string"===typeof x.outFields?"*"===x.outFields?null:x.outFields.replace(/,\s+/g,",").split(","):null===x.outFields?null:x.outFields,x=this._makeOutFields(x))){if(x.errors&&
0<x.errors.length)throw"Invalid filter outFields. "+x.errors.join(",");u.outFields=x.fields?x.fields.join(","):null}return u},_makeOutFields:function(x){var u=this,w=[],A=[],E={fields:null};if(!x||0===x.length)return E;a.forEach(x,function(G){if("*"===G)return E;var H=u._getField(G,!0);H?w.push(H.name):A.push("Field named "+G+" not found in schema.")});x=u._getOutFields();a.forEach(x,function(G){u._getField(G)&&-1===a.indexOf(w,G)&&w.push(G)});E.fields=w;E.errors=A;return E},_handleFilterMessage:function(x){x.error?
(x=Error(x.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:x})):(x=x.filter,x.geometry&&"string"===typeof x.geometry&&(x.geometry=JSON.parse(x.geometry)),this._filter=x,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(x){var u={urls:[]},w,A=[],E=[],G;x.streamUrls&&a.forEach(x.streamUrls,function(I){"ws"===I.transport&&(w=I.urls,u.token=I.token)});if(!w)return u;a.forEach(w,function(I){0===I.lastIndexOf("wss",0)?E.push(I):A.push(I)});x="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?E:0===A.length?E:A;if(1<x.length)for(G=0;G<x.length-1;G++){var H=G+Math.floor(Math.random()*(x.length-G));var K=x[H];x[H]=x[G];x[G]=K}u.urls=x;return u},_attemptReconnect:function(){var x=this;this._reconnectTimeoutId=null;x._connected=!1;if(!x._socketUrls)return!1;if(!x._collection&&!x._reconnecting&&x.socket&&x.credential)return x._reconnecting=!0,x._getServiceConnectionMetadata(x._attemptReconnect),!1;x._reconnecting=!0;x.socket=null;if(x._reconnectAttempts>
x.maxReconnectAttempts)return x._reconnecting=!1;x.socketUrl=x._socketUrls[x._reconnectAttempts>x._socketUrls.length-1?x._reconnectAttempts%x._socketUrls.length:x._reconnectAttempts];x.socketUrl+="/"+x.socketDirection;var u=x._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){x.onAttemptReconnect({count:x._reconnectAttempts,url:x.socketUrl});x.connect()},1E3*x._reconnectAttempts+u)},_getServiceConnectionMetadata:function(x){var u=this,w=u._url.path;x="function"===typeof x?
x:null;b({url:w,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(A){A=u._getWebsocketConnectionInfo(A);u._websocketToken=A.token;x&&x()},function(A){u.onError(Error(A))})},_setDefaultRenderer:function(){var x=this.geometryType,u=new c([5,112,176,.8]),w=new c([255,255,255]);w=new v(v.STYLE_SOLID,w,1);if("esriGeometryPoint"===x||"esriGeometryMultipoint"===x)var A=new y(y.STYLE_CIRCLE,10,w,u);else if("esriGeometryPolyline"===x)A=new v(v.STYLE_SOLID,u,2);else if("esriGeometryPolygon"===
x||"esriGeometryEnvelope"===x)u=new c([5,112,176,.2]),w=new c([5,112,176,.8]),w=new v(v.STYLE_SOLID,w,1),A=new z(z.STYLE_SOLID,w,u);A&&this.setRenderer(new C(A))},_makeObjectIdField:function(){var x=1,u,w=[];if(!this.objectIdField){var A=this.fields.length;for(u=0;u<A;u++)w.push(this.fields[u].name.toLowerCase());for(;-1!==a.indexOf(w,"objectid_"+x);)x+=1;this.objectIdField="objectid_"+x;this.fields.push({name:"objectid_"+x,type:"esriFieldTypeOID",alias:"objectid_"+x,nullable:!1})}},_featureHasOID:function(x,
u){return x.attributes&&(x.attributes[u]||0===x.attributes[u])},_randomIntFromInterval:function(x,u){return Math.floor(Math.random()*(u-x+1)+x)}});k.setObject("layers.StreamLayer",D,l);return D})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(D,B,a,c,k,n,r,f,m){D=D([m],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(q){this.inherited(arguments);
var l=q.getMap().spatialReference;this.isWebMercator=l.isWebMercator();this.canWrap=l._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(q){this.inherited(arguments)},addFeatures:function(q,l){function b(y,C){var F,x;h[y]||(h[y]=[]);var u=h[y];if(0<v){C.length>v&&C.splice(0,C.length-v);var w=C.length+u.length;w>v&&(F=u.splice(0,w-v))}w=C.length;for(x=0;x<w;x+=1)u.push(C[x]);return{deletes:F,adds:C}}var g={},e={},d;if(l)return this.inherited(arguments),
g;var h=this.trackMap;var t=this.layer;var z=t._trackIdField;var v=t.maximumTrackPoints||0;a.forEach(q,function(y){var C=y.attributes[z];y.visible&&(e[C]||(e[C]=[]),e[C].push(y))});for(d in e)e.hasOwnProperty(d)&&(t=b(d,e[d]),g[d]=t);return g},removeFeatures:function(q){var l=[],b=this.layer.objectIdField,g=this.layer._trackIdField;q&&(a.forEach(q,function(e){var d;var h=e.attributes[g];var t=e.attributes[b];if(d=this.trackMap[h])for(e=0;e<d.length;e+=1){var z=d[e];if(z.attributes[b]===t){this.trackMap[h].splice(e,
1);-1===a.indexOf(h)&&l.push(h);break}}},this),0<q.length&&this.refreshTracks(l))},drawTracks:function(q){function l(z){var v=d[z],y=v&&1<v.length,C=b.trackLineMap[z];C&&!y&&(g.remove(C),delete b.trackLineMap[z],C=null);if(!y)return!1;y=[];for(var F=[],x,u=v.length,w=0;w<u;w++)if(x=v[w].geometry){x=x.normalize();var A=x.x,E=0,G=!1;H&&b.canWrap&&(E=A-H.x,Math.abs(E)>b.wrapThreshold&&(G=!0));G?(F.push([b.getWrappedX(A),x.y]),y.push(F.slice(0)),F=[[A,x.y]]):F.push([A,x.y]);var H=new r(A,x.y,h)}1<F.length&&
y.push(F);v={};v[t]=z;if(y.length)if(C){for(var K=C.geometry;K.paths.length;)K.removePath(K.paths.length-1);y.forEach(function(I){K.addPath(I)});C.setGeometry(K)}else C=new n(new f({paths:y,spatialReference:h}),null,v),g.add(C),b.trackLineMap[z]=C}var b=this,g=this.container,e;if(g){var d=this.trackMap;var h=this.map.spatialReference;var t=this.layer._trackIdField;if(q)a.forEach(q,function(z){l(z)});else for(e in d)d.hasOwnProperty(e)&&l(e)}},refreshTracks:function(q){function l(d){var h;d=b[d]||
[];var t=d.length;for(h=0;h<t;h++)g._repaint(d[h],null,!0)}var b=this.trackMap,g=this.layer,e;this.drawTracks(q);if(q)a.forEach(q,function(d){l(d)});else for(e in b)b.hasOwnProperty(e)&&l(e)},getLatestObservations:function(){var q,l=this.trackMap,b=[];for(q in l)if(l.hasOwnProperty(q)){var g=l[q];b.push(g[g.length-1])}return b},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(q){var l=this.isWebMercator,b=l?2.0037508342788905E7:180;l=l?-2.0037508342788905E7:
-180;return(0<q?l:b)-((0<q?b:l)-q)}});B.setObject("layers._StreamTrackManager",D,k);return D})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(D,B,a,c,k){D=D([a],{declaredClass:"esri.layers.PurgeOptions",constructor:function(n,r){this.parent=n;for(var f in r)this[f]=r[f]},_displayCountSetter:function(n){this.displayCount=n;this.parent.refresh()}});B.setObject("layers.PurgeOptions",D,k);return D})},"arcgisonline/map/core/projectExtent":function(){define(["arcgisonline/map/utils/contains",
"esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(D,B,a,c,k){function n(r,f){if(r&&f.xmin>f.xmax){var m=r.valid[1]-f.xmin,q=f.xmax-r.valid[0];m>q?f.xmax=r.valid[1]+q:f.xmin=r.valid[0]-m}}return function(r,f,m,q,l,b){var g=[102113,102100,3857],e=r.spatialReference.wkid;if(e===f.wkid)return m([r],null);if(4326==e&&D(g,f.wkid))return r.ymin=Math.max(r.ymin,-89.99),r.ymax=Math.min(r.ymax,89.99),r=a.geographicToWebMercator(r),l=r.spatialReference._getInfo(),
n(l,r),r.spatialReference.wkid=f.wkid,m([r],null);if(D(g,e)&&4326==f.wkid)return r=a.webMercatorToGeographic(r),l=r.spatialReference._getInfo(),n(l,r),m([r],null);b||(b=new k(window.esriGeowConfig.self.helperServices.geometry.url));if(l&&l.wrapAround180&&"extent"===r.type){var d=r;r=c.fromExtent(r)}b.project([r],f,function(h,t){if(!(h&&0<h.length&&h[0]&&"extent"==h[0].type)||isNaN(h[0].xmin)||isNaN(h[0].ymin)||isNaN(h[0].xmax)||isNaN(h[0].ymax)){if(h&&0<h.length&&h[0]&&"point"==h[0].type&&!isNaN(h[0].x)&&
!isNaN(h[0].y))return m(h,t);if(d&&"polygon"===h[0].type){if(1===h[0].rings.length)h[0]=new B(h[0].getExtent());else{var z=(new c(h[0].spatialReference.toJson())).addRing(h[0].rings[0]).getExtent(),v=(new c(h[0].spatialReference.toJson())).addRing(h[0].rings[1]).getExtent();h[0]=v;h[0].xmin=v.xmin-z.getWidth();h[0].ymin=Math.min(v.ymin,z.ymin);h[0].ymax=Math.max(v.ymax,z.ymax)}return m(h,t)}if(q)return q()}else return m(h,t)},q)}})},"arcgisonline/map/utils/contains":function(){define([],function(){return function(D,
B){for(var a=D.length;a--;)if(D[a]===B)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["esri/geometry/Extent","arcgisonline/map/core/getExtentForScale"],function(D,B){return function(a,c,k){a=new D(a.x-1,a.y-.5,a.x+1,a.y+.5,a.spatialReference);return B(a,c,k)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["esri/config","esri/WKIDUnitConversion"],function(D,B){return function(a,c,k){var n=20015077/180,r=a.spatialReference;if(r){var f=r.wkid;var m=
r.wkt}r=null;f?r=B.values[B[f]]:m&&-1!==m.search(/^PROJCS/i)&&(f=/UNIT\[([^\]]+)\]\]$/i.exec(m))&&f[1]&&(r=parseFloat(f[1].split(",")[1]));return a.expand(k*c/(39.37*(r||n)*D.defaults.screenDPI)/a.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(D,B,a){return function(c,k,n){a.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+c+"/data"},{disableIdentityLookup:!0}).then(B.hitch(this,function(r){if(r&&
(r.wfsInfo||r.wmtsInfo))var f=r;else if(r&&r.layers)f=r.layers;else if(n){n();return}k&&k(f)}),B.hitch(this,function(r){n&&n(r)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(D,B,a,c,k,n,r,f,m,q,l){var b=window.esriGeowConfig;return function z(e,
d,h,t){var v=function(u,w){clearTimeout(F);a.publish("ServiceAnswerReceived",[]);var A=u.fullExtent;A||(A=u.extent);!A||A.spatialReference&&(A.spatialReference.wkid||A.spatialReference.wkt)||(u.fullExtent=null,A=u.extent=null);(b.allSSL||"https:"==location.protocol)&&u.tileServers&&u.tileServers.length&&B.forEach(u.tileServers,function(E,G){if(m.isHostedService(E)||m.supportsHttps(E))u.tileServers[G]=E.replace("http:","https:")});A?h&&h(u,e,w):u.spatialReference&&(u.spatialReference.wkid||u.spatialReference.wkt)?
(A=new f(-180,-90,180,90,new r({wkid:4326})),q(A,new r(u.spatialReference),D.hitch(this,function(E){u.fullExtent=E[0];u.extent=E[0];h&&h(u,e,w)}),D.hitch(this,function(E,G){t&&(E.details=[],E.details.push("Missing extent and could not project GCS into service spatial reference."),t(E,G))}))):h&&h(u,e,w)},y=function(u,w){clearTimeout(F);a.publish("ServiceAnswerReceived",[]);t&&t(u,w)},C=!1,F=setTimeout(function(){clearTimeout(F);F=null;var u=e.toLowerCase();if(-1===u.indexOf("/arcgis/rest/")&&-1<u.indexOf("/arcgis/"))return e=
e.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),z(e,d,h,t);k.id.isBusy()?C=!0:d?(l.prototype.statics.getInstance().show({title:k.i18nBundle.generalDlg.waitDlgTitle,message:d}),F=setTimeout(function(){clearTimeout(F);F=null;k.id.isBusy()?C=!0:y("Request timed out.",{args:{url:e}})},45E3)):y("Request timed out.",{args:{url:e}})},1E4),x=e+(-1<e.indexOf("?")?"\x26f\x3djson":"?f\x3djson");n({url:x,callbackParamName:"callback",load:function(u,w){if(F||C)clearTimeout(F),u?u.error&&
""!==u.error?y(u.error,w):v(u,w):y("Request error.",{args:{url:e}})},error:function(u){if(F||C)clearTimeout(F),u&&u.message&&-1<u.message.indexOf("Aborted the Sign-In process")?a.publish("ServiceAnswerReceived",[]):y(u,{args:{url:e}})}})}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromImageryItem":function(){define("require exports tslib esri/IdentityManager esri/request esri/urlUtils".split(" "),function(D,B,a,c,k,n){function r(b,g){return new Promise(function(e,d){return window.require(["esri/layers/ArcGISImageServiceLayer",
"esri/layers/MosaicRule","esri/layers/RasterFunction","esri/renderers/jsonUtils"],function(h,t,z,v){var y;h=new h(b);h.onError(function(){return d(Error("failed to generate thumbnail for service "+b))});var C=g.layerProperties;C&&((null===(y=C.bandIds)||void 0===y?0:y.length)&&h.setBandIds(C.bandIds,!0),C.mosaicRule&&h.setMosaicRule(new t(C.mosaicRule),!0),C.renderingRule&&h.setRenderingRule(new z(C.renderingRule),!0),C.renderer&&h.setRenderer(v.fromJson(C.renderer),!0));h.getImageUrl(g.extent||g.serviceInfo.extent,
g.size[0],g.size[1],function(F){if(!g.returnDataURL)return e({url:F});k["default"]({url:F,content:{},handleAs:"arraybuffer"}).then(function(x){var u=m(x);if(u)return q(x,u);d(Error("failed to generate thumbnail for service "+b))})})})})}function f(b,g){var e,d,h;return a.__awaiter(this,void 0,void 0,function(){var t,z,v,y,C,F,x,u,w,A,E,G,H,K,I,J,L,M,N,O,Y,ba;return a.__generator(this,function(ha){switch(ha.label){case 0:return t=g.serviceInfo,z=g.size,v=g.query,y=g.layerProperties,C=g.returnDataURL,
F=null!==(e=g.extent)&&void 0!==e?e:t.extent,x=F.xmin,u=F.ymin,w=F.xmax,A=F.ymax,E=F.spatialReference,G=x+","+u+","+w+","+A,H=E?E.wkid||E.wkt:null,K=t.serviceDataType,I=t.bandCount,J=2===I&&(null===K||void 0===K?0:K.includes("Vector"))?{rasterFunction:"VectorFieldRenderer",rasterFunctionArguments:{MagnitudeBandID:0,DirectionBandID:1,IsUVComponents:"esriImageServiceDataTypeVector-UV"===K,ReferenceSystem:1,MassFlowAngleRepresentation:0,SymbolTileSize:30,SymbolTileSizeUnits:100,CalculationMethod:"Vector Average",
SymbologyName:"Single Arrow",MinimumMagnitude:1,MaximumMagnitude:-1,MinimumSymbolSize:40,MaximumSymbolSize:80},outputPixelType:"U8",variableName:"Raster"}:null===y||void 0===y?void 0:y.renderingRule,L=(null===y||void 0===y?void 0:y.mosaicRule)&&JSON.stringify(y.mosaicRule),M=C?"image":"json",N=C?"arraybuffer":"json",[4,k["default"]({url:b+"/exportImage",content:a.__assign({bbox:G,bboxSR:H,size:z.join(","),bandIds:null===(d=null===y||void 0===y?void 0:y.bandIds)||void 0===d?void 0:d.join(","),mosaicRule:L,
renderingRule:J&&JSON.stringify(J),f:M},v),handleAs:N})];case 1:O=ha.sent();if(C){Y=m(O);if(!Y)throw Error("failed to generate thumbnail for service "+b);return[2,q(O,Y)]}(ba=(null===(h=c["default"].findCredential(b))||void 0===h?void 0:h.token)||(null===v||void 0===v?void 0:v.token))&&(null===O||void 0===O?0:O.href)&&(O.href+="?token\x3d"+ba);return[2,{url:null===O||void 0===O?void 0:O.href}]}})})}function m(b){if(!b||10>b.byteLength)return null;b=new Uint8Array(b,0,4);return 255===b[0]&&216===b[1]?
"jpeg":137===b[0]&&80===b[1]&&78===b[2]&&71===b[3]?"png":null}function q(b,g){var e=new Blob([b],{type:"image/"+g}),d=new FileReader;d.readAsDataURL(e);return new Promise(function(h){d.onloadend=function(){h({dataURL:d.result})}})}function l(b){var g,e;"string"===typeof b.extent?(b=b.extent.split(",").map(function(d){return parseFloat(d)}),4===b.length&&(e=[[b[0],b[1]],[b[2],b[3]]])):0<(null===(g=b.extent)||void 0===g?void 0:g.length)&&(e=b.extent);return(null===e||void 0===e?0:e.length)?{xmin:e[0][0],
ymin:e[0][1],xmax:e[1][0],ymax:e[1][1],spatialReference:{wkid:4326}}:null}Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);B["default"]=function(b,g,e){var d,h,t,z,v,y;void 0===e&&(e=!0);return a.__awaiter(this,void 0,void 0,function(){var C,F,x,u,w,A,E,G,H,K,I,J,L,M,N,O,Y,ba,ha;return a.__generator(this,function(U){switch(U.label){case 0:return C=n["default"].urlToObject(b.url),F=C.path,x=C.query,(u=b.serviceInfo)&&Object.keys(u).length?
[3,2]:[4,k["default"]({url:F,content:a.__assign({f:"json"},x)})];case 1:u=U.sent(),U.label=2;case 2:if(null===u||void 0===u||!u.bandCount)throw Error("failed to access service info for service: "+F);if(w=null===(d=u.capabilities)||void 0===d?void 0:d.toLowerCase().includes("tilesonly"))throw Error("unsupported thumbnail request for tiled imagery");if(null===(h=b.itemData)||void 0===h)return[3,3];E=h;return[3,5];case 3:return[4,b.getData()];case 4:E=U.sent(),U.label=5;case 5:A=null!==(t=E)&&void 0!==
t?t:{};G=A.bandIds;H=A.mosaicRule;K=A.renderingRule;I=null===(v=null===(z=A.layerDefinition)||void 0===z?void 0:z.drawingInfo)||void 0===v?void 0:v.renderer;if((J=(null===G||void 0===G?void 0:G.length)||H||K||I)||b.isHostedService||!(10.1<=u.currentVersion))return[3,7];L=F+"/info/thumbnail";return[4,k["default"]({url:L,content:a.__assign({},x),handleAs:"arraybuffer"})];case 6:M=U.sent();if(N=m(M)){if(e)return[2,q(M,N)];Y=(O=(null===(y=c["default"].findCredential(F))||void 0===y?void 0:y.token)||(null===
x||void 0===x?void 0:x.token))?L+"?token\x3d"+O:L;return[2,{url:Y}]}U.label=7;case 7:return ba=l(b),ha=J?{bandIds:G,mosaicRule:H,renderingRule:K,renderer:I}:null,I?[2,r(F,{serviceInfo:u,extent:ba,size:g,layerProperties:ha,query:x,returnDataURL:e})]:[2,f(F,{serviceInfo:u,extent:ba,size:g,layerProperties:ha,query:x,returnDataURL:e})]}})})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),
function(D,B,a,c,k,n,r,f){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);return function(){function m(){}m.fetchComments=function(q,l,b){var g=this,e=new r["default"],d=b.item,h=(null===d||void 0===d?void 0:d.itemUrl)+"/comments",t,z=(null===b||void 0===b?void 0:b.parentId)||"none";q=q||(null===b||void 0===b?void 0:b.nextStart)||b.start;var v=b.sortField,y=b.sortOrder;l=l||b.overrideNum||b.num;var C=b.comments;if(-1===q)e.resolve(C);
else{var F={parentId:z,sortField:v,sortOrder:y,start:q,num:l};k["default"].request({url:h,content:F}).then(function(x){return g._toPortalComments(d,x)}).then(function(x){t=f["default"].mixin(b,x,{num:b.num,comments:[].concat(b.comments||[]).concat(x.comments)});F=x;return F.comments}).then(function(x){return g._getOwnerProfiles(x)}).then(function(x){F.comments=F.comments.map(function(u,w){u.ownerProfile=x[w];return u});e.resolve({commentsInfo:t,comments:t.comments})})}return e};m._toPortalComments=
function(q,l){var b=new r["default"],g=q.portal;l.comments=l.comments.map(function(e){return new c["default"](a.__assign(a.__assign({},e),{item:q,portal:g}))});b.resolve(l);return b};m._getOwnerProfiles=function(q){q=q.map(function(l){return l.portal.getUserProfile(l.owner)});return n["default"](q)};return m}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(D,B,a,c,k,n,r,f,m){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);return function(){function q(l){this.owner=l.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=c["default"].linkify(unescape(l.comment))}q.prototype.postscript=function(){};q.prototype.getReplies=function(l,b){var g=this,e=new n["default"],
d=window.require("arcgisonline/pages/portal/CommentsUtil");this.numReplies?d.fetchComments(l,b,this.repliesInfo).then(function(h){g.repliesInfo=r["default"].mixin(g.repliesInfo,h.commentsInfo);g.replies=g.repliesInfo.comments;e.resolve(g.replies)}):e.resolve([]);return e};return q=a.__decorate([k["default"](m["default"].PortalComment,f["default"])],q)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require","exports","tslib","dojo/_base/declare"],function(D,B,a,c){Object.defineProperty(B,
"__esModule",{value:!0});c=a.__importDefault(c);B["default"]=function(){for(var k=[],n=0;n<arguments.length;n++)k[n]=arguments[n];return function(r){return c["default"](k,r.prototype)}}})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),function(D,B,a,c,k,n,r){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],
classification:"file"},"Feature Service":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-tile","is-desktopPro","is-mapService"],classification:"layer",hasServiceInfo:!0},
"Map Image Layer":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service","is-mapImage"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:n["default"].itemLinks.openSceneViewer,
defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Feature Collection":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views",
"is-pro"],classification:"layer"},"Route Layer":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish","is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},
"Geoprocessing Service":{types:["is-desktop","is-service"],classification:"layer"},Tool:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],classification:"layer"},"Stream Service":{defaultOpenText:n["default"].itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",hasServiceInfo:!0},"GeoBIM Project":{defaultOpenText:n["default"].itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"GeoBIM Application":{defaultOpenText:n["default"].itemLinks.openGeoBIM,
defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"Knowledge Graph":{types:["is-service"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:n["default"].itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-bigDataAnalytic"],classification:"app"},"Real Time Analytic":{defaultOpenText:n["default"].itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:n["default"].itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},OGCFeatureServer:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer"},WMTS:{defaultOpenText:n["default"].itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:n["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:n["default"].itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,hasViewStyle:!0},"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Video Service":{defaultOpenText:n["default"].itemLinks.openExcalibur,
defaultOpenIcon:"launch",openIn:["excaliburMediaViewer"],types:["is-excaliburMedia"],classification:"layer"},"Web Map":{defaultOpenText:n["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","createPresentation","openPresentation"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:n["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:n["default"].itemLinks.openSceneViewer,
defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:n["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:n["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:n["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:n["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:n["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Page":{defaultOpenText:n["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:n["default"].itemLinks.viewInHub,defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:n["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:n["default"].itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:n["default"].itemLinks.getApp,defaultOpenIcon:"launch",openIn:["appViewer","downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:n["default"].itemLinks.openWorkforce,
defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",hasItemData:!0},Workflow:{defaultOpenText:n["default"].itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},Form:{defaultOpenText:n["default"].itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:n["default"].itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Data Engineering Workbook":{defaultOpenText:n["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:n["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:n["default"].itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Data Engineering Model":{defaultOpenText:n["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:n["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:n["default"].itemLinks.openOrthoMaker,
defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:n["default"].itemLinks.openMission,defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:n["default"].itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"Hub Project":{defaultOpenText:n["default"].itemLinks.openHubInitiative,
defaultOpenIcon:"launch",openIn:["hubProject"],types:["is-hubProject"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},Solution:{classification:"solution",hasItemData:!0},"Deep Learning Studio Project":{defaultOpenText:n["default"].itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:n["default"].itemLinks.openNotebook,
defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:n["default"].itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:n["default"].itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],
classification:"app"},"Web Experience":{defaultOpenText:n["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],classification:"app"},"Web Experience Template":{defaultOpenText:n["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperienceTemplate"],classification:"app"},"360 VR Experience":{defaultOpenText:n["default"].itemLinks.openVRExperience,defaultOpenIcon:"launch",openIn:["vrExperienceViewer"],
types:["is-vrExperience","is-file","is-update"],classification:"app"},CSV:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:n["default"].itemLinks.openArcMap,defaultOpenIcon:"download-to",
types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},"Vector Tile Package":{defaultOpenText:n["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",openPkg:!0},"Deep Learning Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Esri Classifier Definition":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classication:"file",openPkg:!0},"Image Collection":{defaultOpenText:n["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},"Desktop Add In":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:n["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",
isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},
"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:n["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",
types:["is-file","is-update","is-pro"],classification:"file"},Layer:{defaultOpenText:n["default"].itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},"Pro Layer":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:n["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},Dashboard:{defaultOpenText:n["default"].itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:n["default"].itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:n["default"].itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:n["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Basemap Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"Mobile Map Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Scene Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},
"Pro Project":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro"],classification:"file"},"Insights Workbook Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Apache Parquet":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Rule Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file",
"is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Workflow Manager Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GeoPackage:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish"],classification:"file"},
"Export Package":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Desktop Application Template":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},
"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},"Map Template":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Template":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Raster function template":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer",
"is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:n["default"].itemLinks.open,defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],classification:"file"},PDF:{defaultOpenText:n["default"].itemLinks.open,defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],classification:"file"},"CAD Drawing":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Earth Configuration":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update",
"is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),
classification:"file"},"Microsoft Powerpoint":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Word":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl",
"is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],classification:"file"},netCDF:{defaultOpenText:n["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Link Chart":{defaultOpenText:n["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-linkChart","is-pro"],classification:"app"},filePath:"js/arcgisonline/img/item-types/",computeFileName:function(f){var m,q,l,b="Web Mapping Application"===
f.type&&(null===(m=f.typeKeywords)||void 0===m?void 0:m.includes("configurableApp"));m=null===(q=null===f||void 0===f?void 0:f.iconUrl)||void 0===q?void 0:q.split("/").pop();"featureshosted16.png"===m&&(m="features16.png");f.isUtilityNetwork&&(m="utilitynetwork16.png");b&&(m="instantapps16.png");"Data Store"===f.type&&(m="datastore16.png");"notebook code snippets"===(null===(l=f.type)||void 0===l?void 0:l.toLowerCase())&&(m="codeSnippet16.svg");return m},computeSvgIconUrl:function(f,m,q){return f?
""+this.filePath+f.replace("16.png",q+".svg"):m.iconUrl},getSvgIconUrl:function(f,m){var q=this.computeFileName(f);return this.computeSvgIconUrl(q,f,m)},getItemInfo:function(f){var m,q,l,b,g,e=this[f.displayName]?f.displayName:f.type,d=!!f.origin,h=this[f.type],t="Web Mapping Application"===f.type&&(null===(m=f.typeKeywords)||void 0===m?void 0:m.includes("configurableApp"));"GeoJson"===f.type&&(f.type="GeoJSON");m=this.computeFileName(f);f.svgIconUrl16=this.computeSvgIconUrl(m,f,"16");f.svgIconUrl32=
this.computeSvgIconUrl(m,f,"32");this[f.displayName]&&(h=this[f.displayName]);h=a.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},h);"Feature Collection"===f.type&&k["default"].includes(f.typeKeywords,"Table")&&(h.types=k["default"].filterOut(h.types,["is-data"]));if("Feature Service"===f.type){m=["is-data","is-layer"];if(k["default"].includes(f.typeKeywords,"Multipatch")||k["default"].includes(f.typeKeywords,"HasOnlyMultipatchGeometries"))m=a.__spreadArray(a.__spreadArray([],
m),["is-scene-2"]);h.types=k["default"].filterOut(h.types,m);k["default"].includes(f.typeKeywords,"EditExtensionIndoorsSpaces")&&(h.displayName="Indoors Spaces Feature Layer")}f.isUtilityNetwork&&(h.displayName=f.displayName+" ("+n["default"].itemProperties.utilityNetwork+((f.canUpdate||f.canDelete)&&f.isHostedService?", "+n["default"].viewsWidget.hostedData:"")+")");"Application"!==f.type||f.url||(h.openIn=[],h.defaultOpenText=null);m="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");
c["default"].couldHaveArcGISDesktop()&&-1<m.indexOf(e)&&(h.defaultOpenText=k["default"].includes(f.types,"is-desktopPro")?n["default"].itemLinks.openArcMap:n["default"].itemLinks.openDesktop,h.defaultOpenIcon="launch");"Layer"===f.type&&k["default"].includes(f.typeKeywords,"lyrx")&&(h=a.__assign(a.__assign({},h),this["Pro Layer"]));"Layer Package"===f.type&&k["default"].includes(f.typeKeywords,"lpkx")&&(h=a.__assign(a.__assign({},h),this["Pro Layer Package"]));"Map Package"===f.type&&k["default"].includes(f.typeKeywords,
"mpkx")&&(h=a.__assign(a.__assign({},h),this["Pro Map Package"]));"Compact Tile Package"===f.type&&(f.type="Tile Package");"Dashboard"===f.type&&c["default"]._isOperationsViewSupportedBrowser(!0)&&(h.types.push("is-browser"),f.isSupportedBrowser=!0);h.types=k["default"].concatUnique(h.types,"public"===f.access?["is-public"]:["is-not-public"]);c["default"].couldHaveArcGISDesktop()||(h.types=h.types.filter(function(v){return"is-desktop"!==v&&"is-desktopPro"!==v}));e=null===(l=null===(q=f.portalUser)||
void 0===q?void 0:q.userRole)||void 0===l?void 0:l.canUpdateOrgItems();if("StoryMap"===f.type){q=k["default"].includes(f.typeKeywords,"storymapcollection");l=k["default"].includes(f.typeKeywords,"smstatusdraft");m=f.isOwner||f.canUpdate&&(f.isAdmin||e);var z=!m||!l||d;h.types.push(q?"is-storymap-collection":"is-storymap-item");z&&(h.openIn=["storyMapViewer"],h.defaultOpenText=n["default"].itemLinks[q?"viewStorymapCollection":"viewStorymap"],h.defaultOpenIcon="launch");m&&!d&&(h.types.push("is-editable-storymap"),
h.openIn=h.openIn||[],h.openIn.push("configureStoryMap"),z||(h.defaultOpenText=n["default"].itemLinks[q?"editStorymapCollection":"editStorymap"],h.defaultOpenIcon="launch"));l||h.types.push("is-published-storymap")}"StoryMap Theme"===f.type&&(l=k["default"].includes(f.typeKeywords,"smstatusdraft"),f.isOwner||f.canUpdate&&(f.isAdmin||e))&&(h.openIn=["configureStoryMapTheme"],h.types.push("is-editable-storymap-theme"),l||h.types.push("is-published-storymap-theme"));"Web Experience"===f.type&&(k["default"].includes(f.typeKeywords,
"status: Published")||k["default"].includes(f.typeKeywords,"status: Changed"))&&h.types.push("is-published-webExperience");"Web Experience Template"===f.type&&(k["default"].includes(f.typeKeywords,"status: Published")||k["default"].includes(f.typeKeywords,"status: Changed"))&&h.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===f.type&&(k["default"].includes(f.typeKeywords,"configurableApp")&&(f.isOwner||f.isOwnedByMyOrg&&(f.isAdmin||e))&&h.types.push("can-configure"),f.url=
r.redirectExternalAppURL(f,f.url));"Web Map"===f.type&&(d=f.portalUser,q=f.isOwner||f.isAdmin,(null===(b=null===d||void 0===d?void 0:d.userRole)||void 0===b?0:b.canCreateItem())&&(null===d||void 0===d?0:d.isOrgUser)&&q&&(h.openIn.push("fieldMaps"),h.types.push("is-fieldMaps")));"Image Service"!==f.type||k["default"].includes(f.typeKeywords,"Managed Image Collection")||(h.types=h.types.filter(function(v){return"is-imageManagement"!==v}));f.canOpenInNewMapViewer&&(h.defaultOpenText="modern"===f.portal.defaultMapViewer?
n["default"].itemLinks.openMapViewerBeta:n["default"].itemLinks.openMapViewer,h.types.push("can-openInNewMapViewer"));"KML"===f.type&&f.name&&!f.url&&h.types.push("is-download");-1<f.type.indexOf("GeoBIM")&&(null===(g=f.portal)||void 0===g||!g.canCreateGeoBIM)&&(h={privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"});t&&(h.displayName=n["default"].items.instantApp);return h}}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/solution.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importDefault(F);return function(){function x(){}
x.getBadges=function(u,w,A){var E,G,H,K=[],I={i18n:l["default"],hideText:w?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};w=w?"":"Labeled";var J=u.groupDesignations&&u.groupDesignations.split(", "),L=null===(E=u.portal)||void 0===E?void 0:E.isPortal;"org_authoritative"===u.contentStatus&&(I.tooltipLabel=l["default"].badges["authoritativeTooltip"+w],K.push(f["default"].substitute(b["default"],I)));"public_authoritative"===u.contentStatus&&(u.verified||L)&&(I.tooltipLabel=f["default"].substitute(l["default"].badges["publicAuthoritativeTooltip"+
w],{name:L?u.portal.name:u.verified.name}),K.push(f["default"].substitute(b["default"],I)));"Solution"===u.type&&-1<u.typeKeywords.indexOf("ArcGIS Solution")&&(I.tooltipLabel=l["default"].badges["solutionTooltip"+w],K.push(f["default"].substitute(e["default"],I)));"deprecated"===u.contentStatus&&(I.tooltipLabel=l["default"].badges["deprecatedTooltip"+w],K.push(f["default"].substitute(g["default"],I)));-1<(null===(G=u.typeKeywords)||void 0===G?void 0:G.indexOf("Public Data Collection"))&&A&&(I.tooltipLabel=
l["default"].badges["publicDataCollectionTooltip"+w],K.push(f["default"].substitute(y["default"],I)));u.isRetired&&(I.tooltipLabel=l["default"].badges["retiredTooltip"+w],K.push(f["default"].substitute(v["default"],I)));u.isRetiredStoryMap&&(I.tooltipLabel=l["default"].badges["retiredStoryMapTooltip"+w],K.push(f["default"].substitute(v["default"],I)));u.isRetiredApp&&(I.tooltipClass=I.tooltipClass.replace("tooltip-bottom-left","tooltip-right"),I.tooltipLabel=l["default"].badges["retiredAppTooltip"+
w],K.push(f["default"].substitute(v["default"],I)));J&&-1<J.indexOf("livingatlas")&&(I.tooltipLabel=l["default"].badges["livingAtlasTooltip"+w],K.push(f["default"].substitute(d["default"],I)));J&&-1<J.indexOf("opendata")&&K.push(f["default"].substitute(t["default"],I));u.isPremium&&(A=(null===(H=u.portal)||void 0===H?0:H.user)?u.portal.user.orgId?"org":"public":"anon",I.tooltipLabel=l["default"].badges[A+(u.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+w],K.push(f["default"].substitute(u.requiresCredits?
z["default"]:C["default"],I)));u.listed&&!L&&K.push(f["default"].substitute(h["default"],I));u.origin&&K.push(f["default"].substitute(F["default"],I));return K.join("")};x.getContentStatusBadges=function(u){var w,A={i18n:l["default"],hideText:"",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"},E=null===(w=u.portal)||void 0===w?void 0:w.isPortal;switch(u.contentStatus){case "org_authoritative":return A.tooltipLabel=l["default"].badges.authoritativeTooltip,f["default"].substitute(b["default"],
A);case "public_authoritative":if(u.verified||E)return A.tooltipLabel=f["default"].substitute(l["default"].badges.publicAuthoritativeTooltip,{name:E?u.portal.name:u.verified.name}),f["default"].substitute(b["default"],A);break;case "deprecated":return A.tooltipLabel=l["default"].badges.deprecatedTooltip,f["default"].substitute(g["default"],A)}};x.isItemAdmin=function(u,w){var A,E=!1;E=u.owner;var G=null!==w&&void 0!==w?w:u.portal,H=-1<(null===(A=u.itemControl)||void 0===A?void 0:A.indexOf("admin"));
A=["esri_livingatlas","esri_demographics","esri_boundaries"];return E=G.isPortal&&!u.isOwner&&H&&-1<E.indexOf("esri_")&&!c["default"].includes(A,E)?!1:!!H};x.canShareItem=function(u,w){var A,E,G=w||{},H=G.userRole,K=G.canShare,I=G.canShareOthers&&u.isOwnedByMyOrg,J=(null===H||void 0===H?void 0:H.canPurchaseMarketplace())||(null===H||void 0===H?void 0:H.canTrialMarketplace()),L=u.access||"private",M=u.isAdmin||u.isOwner||G.isOrgAdmin&&u.isOwnedByMyOrg||I,N="public"===L&&"AppBuilder Extension"!==u.type&&
"AppBuilder Widget Package"!==u.type;L="org"===L&&(null===(A=u.ownerProfile)||void 0===A?void 0:A.orgId)===w.orgId;A="licenseByUser"===(null===(E=u.listingProperties)||void 0===E?void 0:E.licenseBy);E="Native Application Installer"!==u.type&&"API Key"!==u.type&&!n["default"].isProApp(u)&&!A;J=J&&u.listed;G=((null===H||void 0===H?void 0:H.canShareItemToGroup())||!G.isOrgUser)&&(N||L);return E&&(K&&(M||J||G)||I)};x.canDeleteItem=function(u,w){var A=w||{},E=A.userRole;A=u.isAdmin||u.isOwner||A.isOrgAdmin&&
u.isOwnedByMyOrg;E=(null===E||void 0===E?void 0:E.isCustom())&&E.canDeleteOrgItems();return!!(A||u.isOwnedByMyOrg&&E)};x.getProtectedItems=function(u){var w=new m["default"],A=[],E=[],G=[];u.forEach(function(H){H["protected"]?A.push(H):H.portal.isPortal?G.push(H):E.push(H)});u=G.map(function(H){return H.canBeDeleted().then(function(K){K&&!K.success?(H.error=K,A.push(H)):E.push(H)})});q["default"](u).then(function(){w.resolve({protectedItems:A,unprotectedItems:E})});return w};x.deleteItemsByOwner=
function(u,w){var A=new m["default"],E=r["default"].restBaseUrl+"content/users/"+u;if(1===w.length){var G=w[0];E=""+E+(G.folderId&&"/"!==G.folderId?"/"+G.folderId:"")+"/items/"+G.id+"/delete";n["default"].request({url:E,content:""},{usePost:!0}).then(function(H){return A.resolve([H])},function(H){return A.resolve([H])})}else 1<w.length&&(E+="/deleteItems",G={items:w.map(function(H){return H.id}).join(",")},n["default"].request({url:E,content:G},{usePost:!0}).then(function(H){return A.resolve(H.results)},
function(H){return A.resolve([H])}));return A};x.deleteItems=function(u){var w=this,A=new m["default"],E={},G=[],H=[],K=[];u.forEach(function(J){var L;"Deep Learning Package"===(null===J||void 0===J?void 0:J.type)?G.push(k["default"].uninstallDeepLearningPackage(J).then(function(M){var N;"uninstallFail"===(null===M||void 0===M?void 0:M.messageCode)?H.push(M):E[J.owner]=[J].concat(null!==(N=E[J.owner])&&void 0!==N?N:[])})):E[J.owner]=[J].concat(null!==(L=E[J.owner])&&void 0!==L?L:[])});var I=Object.keys(E).map(function(J){return w.deleteItemsByOwner(J,
E[J])});q["default"](G).then(function(){return q["default"](I)}).then(function(J){J.forEach(function(L){L.forEach(function(M){M.success?K.push(M):H.push(M)})});A.resolve({removed:K,errors:H})});return A};x.getContentStatus=function(u){if(u.contentStatus&&-1<u.contentStatus.indexOf("authoritative")){var w=u.portal;return"public"===u.access&&(null===w||void 0===w?0:w.isVerified)?"public_authoritative":"org_authoritative"}return u.contentStatus};x.shouldOpenToItemURLInNewTab=function(u){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(u.type)};
x.shouldOpenInNewTab=function(u){return-1<["CityEngine Web Scene","Dashboard","Operation View"].indexOf(u.type)};return x}()})},"arcgisonline/pages/utils/socialMedia":function(){define(["require","exports","tslib","../../esriGeowConfig","esri/lang"],function(D,B,a,c,k){c=a.__importDefault(c);k=a.__importDefault(k);return function(){function n(){}n.canShowSocialMediaLinks=function(r){var f=r.isPortal,m=k["default"].isDefined(r.canSharePublic)?!!r.canSharePublic:!0,q=!!r.portalProperties&&k["default"].isDefined(r.portalProperties.showSocialMediaLinks);
r=q&&!0===r.portalProperties.showSocialMediaLinks;return c["default"].showSocialMediaLinks&&!0===c["default"].showSocialMediaLinks&&(f?m&&r:m&&(!q||r))};n.canShowSocialMediaLinksOnItems=function(r){var f=r.portalUser,m=!!f&&!f.orgId,q=!!f&&!!f.orgId;f=!f||m||q&&(f.userRole.canShareItemToPublic()||f.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(r)&&f};n.canShowSocialMediaLinksOnGroups=function(r){var f=r.portalUser,m=!!f&&!f.orgId,q=!!f&&!!f.orgId;f=!f||m||q&&f.userRole.canShareGroupToPublic();
return this.canShowSocialMediaLinks(r)&&f};return n}()})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../utils/mapViewer ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);f=a.__importDefault(f);
m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);return function(){function z(v){var y;v=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();b["default"].mixin(this,{thumbnailUrl:this.thumbnailUrl||f["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),defaultThumbnailUrl:f["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});
b["default"].mixin(this,k["default"]);this.token=null===(y=this.credential)||void 0===y?void 0:y.token;this.id=this.username;this.orgUrl=v.urlKey&&v.customBaseUrl?v.urlKey+"."+v.customBaseUrl:v.portalUrl;this.accountId=this.orgId;this.computeFlags()}z.prototype.postscript=function(){};z.prototype.setRole=function(v){return this.userRole=new m["default"]({portalUser:this,viewOnly:v})};z.prototype.getDefaultMapViewer=function(){var v=this,y=new g["default"];this.defaultMapViewer?y.resolve(this.defaultMapViewer):
this.getProperties().then(function(C){var F,x=v.portal;v.defaultMapViewer=r.determineUserMapViewer({isSignedIn:!0,isViewingOrg:!!x.id,properties:C})||r.determineOrgMapViewer({mapViewer:null===(F=x.portalProperties)||void 0===F?void 0:F.mapViewer,created:x.created,subscriptionInfo:x.subscriptionInfo,isPortal:x.isPortal});y.resolve(v.defaultMapViewer)});return y};z.prototype.getProperties=function(){var v=this,y=this.portal.url+"community/users/"+this.username+"/properties",C=new g["default"];this.userProperties?
C.resolve(this.userProperties):f["default"].request({url:y}).then(function(F){v.userProperties=(null===F||void 0===F?void 0:F.properties)||null;C.resolve(v.userProperties)},function(F){C.reject(F)});return C};z.prototype.computeFlags=function(){var v,y=this.portal.supportsHostedServices||!1,C=(null===(v=this.portal.helperServices)||void 0===v?void 0:v.rasterAnalytics)&&t["default"].isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||
this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||this.portal.canSharePublic&&this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToGroup()||this.userRole.canShareOthersItemsToOrg()||this.portal.canSharePublic&&this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();
this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();this.canPublishTiles=this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();this.canPublishScenes=this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=C&&this.userRole.canPublishImageCollection()?
!0:!1;this.canUserPublish=y&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=this.isOrgAdmin||this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};z.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};z.prototype.getTags=
function(){var v=this,y=new g["default"];this.tags&&this.tags.length?y.resolve(this.tags):this.inherited(arguments).then(function(C){v.set("tags",C);y.resolve(v.tags)},function(C){v.set("tags",[]);y.resolve([])});return y};z.prototype.getContentTags=function(){var v=this,y,C=new g["default"];(null===(y=this.contentTags)||void 0===y?0:y.length)?C.resolve(this.contentTags):f["default"].loadUserTags(this.username).then(function(F){v.set("contentTags",F);C.resolve(v.contentTags)},function(F){v.set("contentTags",
[]);C.resolve([])});return C};z.prototype.getCurrentFolder=function(){if(!t["default"].isDefined(this.currentFolder)){var v=f["default"].getCookie("ESRI_Content"),y=v&&"/"!==v.folderId?v.folderId:this.username;this.set("currentFolder",{id:y,isAll:null===v||void 0===v?void 0:v.isAll,isHome:"/"!==y&&y&&y!==this.username?!1:!0})}return this.currentFolder};z.prototype.setCurrentFolder=function(v){var y=f["default"].getCookie("ESRI_Content")||{},C=(null===v||void 0===v?void 0:v.id)||v||this.username,F=
"all"===C;v={folderId:C===this.username||F?"/":C,isAll:F,isHome:(null===v||void 0===v?0:v.isHome)||"/"===C||!C||C===this.username?!0:!1};b["default"].mixin(y,v);l["default"]("ESRI_Content",JSON.stringify(y),{path:"/",sameSite:"Strict"});this.set("currentFolder",b["default"].mixin(v,{id:C}))};z.prototype.getFolders=function(){var v=this,y=new g["default"];f["default"].request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(C){v.set("folders",C);y.resolve(C.slice(0))});
return y};z.prototype.createFolder=function(v){var y=this,C=new g["default"],F=this.userContentUrl+"/createFolder";v={folderName:v.replace(/ /g,"_"),title:v};f["default"].request({url:F,content:v},{usePost:!0}).then(function(x){y.folders.push(x.folder);y.folders.shift();y.set("folders",y._toFolders({folders:y.folders}));d["default"].publish("folders/refresh");C.resolve(x.folder)},function(x){C.reject(x)});return C};z.prototype.updateFolder=function(v,y){var C=this,F=new g["default"];f["default"].request({url:this.userContentUrl+
"/"+v+"/updateFolder",content:{newTitle:y}},{usePost:!0}).then(function(){return C.getFolders()},function(x){F.reject(x)}).then(function(x){F.resolve(x);d["default"].publish("folders/refresh")},function(x){F.reject(x)});return F};z.prototype.deleteFolder=function(v){var y=this,C=new g["default"];f["default"].request({url:this.userContentUrl+"/"+v+"/delete"},{usePost:!0}).then(function(F){var x,u=null===(x=null===F||void 0===F?void 0:F.folder)||void 0===x?void 0:x.id;y.folders=y.folders.filter(function(w){return(null===
w||void 0===w?void 0:w.id)!==u});y.folders.shift();y.set("folders",y._toFolders({folders:y.folders}));C.resolve(F.folder)},function(F){C.reject(F)});return C};z.prototype.deleteItems=function(v){var y=new g["default"],C=this.userContentUrl+"/deleteItems";v={items:v.map(function(F){return F.id})};f["default"].request({url:C,content:v},{usePost:!0}).then(function(){y.resolve(!0)},function(F){y.reject(F)});return y};z.prototype._toFolders=function(v){var y=this;v=(null===v||void 0===v?void 0:v.folders)||
[];v=v.sort(function(C,F){return C.title.localeCompare(F.title)});n["default"].find(v,function(C){return C.id===y.username})||v.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return v};z.prototype.getGroups=function(){var v=this,y=this.portal.url+"community/users/"+this.username,C=new g["default"];this.userGroups?C.resolve(this.adminGroups||this.userGroups):f["default"].request({url:y}).then(function(F){v.userGroups=(null===F||void 0===F?0:F.groups)?v._toGroup(F.groups):
[];C.resolve(v.userGroups)},function(F){C.reject(F)});return C};z.prototype.getSharedOwnershipGroups=function(){var v=this,y=new g["default"];this.ownershipGroups&&y.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){y.resolve(0<v.ownershipGroups.length?v.ownershipGroups:null)});return y};z.prototype._toGroup=function(v){var y=this;this.ownershipGroups=[];return(null!==v&&void 0!==v?v:[]).map(function(C){var F=new c["default"](b["default"].mixin(C,{portal:y.portal}));
y._isSharedOwnershipGroup(C)&&y.ownershipGroups.push(C);return b["default"].mixin(C,{portalGroup:F})})};z.prototype._isSharedOwnershipGroup=function(v){var y=v.capabilities&&v.capabilities.join(",")||"";return(v.owner===this.username||!v.isViewOnly||v.userMembership&&"admin"===v.userMembership.memberType)&&-1<y.toLowerCase().indexOf("updateitemcontrol")};return z=a.__decorate([q["default"](h["default"].PortalUser,e["default"])],z)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);return function(){function z(v){var y,C,F,x,u,w,A;this.portalUser=null!==(C=null===(y=this.portal)||void 0===y?void 0:y.getPortalUser())&&void 0!==C?C:null;this.groupContentUrl=this.url.replace("/community/",
"/content/");this.searchContentUrl=this.portal.portalUrl+"search";this.canShowSocialMediaLinks=f["default"].canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(F=this.userMembership)||void 0===F?void 0:F.memberType);this.isManager="admin"===(null===(x=this.userMembership)||void 0===x?void 0:x.memberType);this.isMember="member"===(null===(u=this.userMembership)||void 0===u?void 0:u.memberType);this.isPublic="public"===this.access;this.belongsToGroup=this.userMembership&&k["default"].includes(["owner",
"admin","member"],this.userMembership.memberType);this.isSharedOwnership=k["default"].includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(w=this.title)&&void 0!==w?w:"";this.snippet=null!==(A=this.snippet)&&void 0!==A?A:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+l["default"].getToken():"./images/group-no-image.png";this.portal.isPortal&&!this.membershipAccess&&(this.membershipAccess=
"org")}z.prototype.postscript=function(){};z.prototype.getOwnerProfile=function(v,y){var C=this,F=this.owner,x=new e["default"];this.ownerProfile?x.resolve(this.ownerProfile):(this.isOwner?(F=new e["default"],F.resolve(this.portalUser)):F=this.portal.getUserProfile(F),F.then(function(u){C.isAdmin=C.isOwner||C._isGroupAdmin(u);g["default"]({folders:C.isAdmin&&y?u.getFolders():null,tags:C.isAdmin&&v?u.getTags():null,contentTags:C.isAdmin&&v?u.getContentTags():null}).then(function(){C.set("ownerProfile",
u);x.resolve(u)})}));return x};z.prototype._isOpenDataSetter=function(v){this.isOpenData=v;this.computeIsOpenDataEnabled()};z.prototype._providerSetter=function(v){this.provider=v;this.computeIsBackedByEnterpriseGroup()};z.prototype._providerGroupNameSetter=function(v){this.providerGroupName=v;this.computeIsBackedByEnterpriseGroup()};z.prototype.leave=function(){var v=this,y=new e["default"];l["default"].request({url:this.url+"/leave"},{usePost:!0}).then(function(C){v.set("isMember",!1);y.resolve(C)});
return y};z.prototype.join=function(){var v=this,y=new e["default"];l["default"].request({url:this.url+"/join"},{usePost:!0}).then(function(C){v.autoJoin&&(v.set("belongsToGroup",!0),v.set("isMember",!0));y.resolve(C)},function(C){y.reject(C)});return y};z.prototype.getApplications=function(){var v=this,y=new e["default"];l["default"].request({url:this.url+"/applications"}).then(function(C){v.set("applications",C.applications);y.resolve(C.applications)},function(C){y.reject(C)});return y};z.prototype.groupContent=
function(v,y){var C=this;void 0===v&&(v={});var F=v.q;F=void 0===F?"":F;var x=v.sortField;x=void 0===x?"modified":x;var u=v.sortOrder;u=void 0===u?"desc":u;var w=v.num;w=void 0===w?12:w;var A=v.start;A=void 0===A?1:A;var E=this.portalUser,G=this.portal,H=new e["default"];l["default"].request({url:""+this.groupContentUrl+(y?"/search":"")+"?"+("string"===typeof v?v:"sortField\x3d"+x+"\x26sortOrder\x3d"+u+"\x26num\x3d"+w+"\x26start\x3d"+A+(F?"\x26q\x3d":"")+F)}).then(function(K){return q.getAllItemsGroups({response:K,
portalUser:E,url:G.url})}).then(function(K){return C.toPortalItems(K)}).then(function(K){return H.resolve(K)},function(K){H.reject(K)});return H};z.prototype.search=function(v){var y=this,C=new e["default"],F=this.portal.portalUrl+"search";v=a.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},v||{});l["default"].request({url:F,content:v}).then(function(x){return y.toPortalItems(x)}).then(function(x){return C.resolve(x)},function(x){C.reject(x)});return C};z.prototype.toPortalItems=
function(v){var y=this,C=new e["default"];v.results&&(v.items=v.results,delete v.results);var F=v.items.map(function(x){return new c["default"](a.__assign(a.__assign({},x),{portal:y.portal}))}).map(function(x){return m["default"].setVerifiedInfo(x)});g["default"](F).then(function(x){v.items=x;C.resolve(v)},function(x){return 0});return C};z.prototype.groupMembers=function(v){var y=this;v=v||{};var C=new e["default"],F=d["default"].clone(v);v=this.url+"/userlist";F=a.__assign(a.__assign({},{sortField:"joined",
sortOrder:"desc",num:25,start:1}),F);l["default"].request({url:v,content:F}).then(function(x){return y.toMembers(x)}).then(function(x){return C.resolve(x)},function(x){C.reject(x)});return C};z.prototype.toMembers=function(v){var y=this,C=new e["default"],F=window.require("arcgisonline/pages/portal/PortalUser");v.users=v.users.map(function(x){return new F(a.__assign(a.__assign({},x),{portal:y.portal}))});C.resolve(v);return C};z.prototype.allGroupMembers=function(v){var y=this;v=v||{};var C=new e["default"],
F=d["default"].clone(v);v=this.url+"/userlist";F=a.__assign(a.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),F);r["default"].fetchAllResources(v,F,"users").then(function(x){return y.toMembers({total:x.length,users:x})}).then(function(x){return C.resolve(x)},function(x){C.reject(x)});return C};z.prototype.itemCount=function(){var v=new e["default"];this.search({num:1}).then(function(y){return v.resolve(y&&y.total||0)});return v};z.prototype._isGroupAdmin=function(v){var y,C;v=v||
this.portal.portalUser||{};var F=v.username,x=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||void 0;y=this._getAdmins();y=k["default"].includes(y,F);F=v.orgId||x?v.orgId===x:!1;x=v.isOrgAdmin&&F;v=(null===(C=v.userRole)||void 0===C?void 0:C.isCustom())&&F&&v.userRole.canUpdateOrgGroups();return y||x||v};z.prototype.isGroupOwnerOrgMember=function(){return this.portal.portalUser?this.orgId&&this.portal.portalUser.orgId===this.orgId:!1};z.prototype._getAdmins=function(){var v,y;return(null!==
(y=null===(v=this.members)||void 0===v?void 0:v.users)&&void 0!==y?y:[]).filter(function(C){return"admin"===C.memberType}).map(function(C){return C.username})};z.prototype._canRemoveContent=function(v){var y,C=v||this.portal.portalUser||{},F=(null===(y=this.groupOwner)||void 0===y?void 0:y.username)||{};v=this._isGroupAdmin(v);C=C.username===F;return v||C};z.prototype._canAssignToThisGroup=function(v){var y,C;v=v||this.portal.portalUser||{};var F=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||
void 0;F=v.orgId||F?v.orgId===F:!1;y=v.isOrgAdmin&&F;v=(null===(C=v.userRole)||void 0===C?void 0:C.isCustom())&&F&&v.userRole.canAssignUsersToOrgGroups();return(y||v)&&!this.isOwner};z.prototype._canChangeOwner=function(v){var y,C;v=v||this.portal.portalUser||{};var F=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};F=v.orgId||F?v.orgId===F:!1;y=v.isOrgAdmin&&F;v=(null===(C=v.userRole)||void 0===C?void 0:C.isCustom())&&F&&v.userRole.canReassignOrgGroups();return!(!y&&!v)};z.prototype._canManageMembershipRequests=
function(v){var y;v=v||this.portal.portalUser||{};var C=v.username,F=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=this._getAdmins();F=v.orgId||F?v.orgId===F:!1;C=k["default"].includes(y,C);v=v.isOrgAdmin&&F;return!!(this.isOwner||C||v)};z.prototype._canInviteOthers=function(v){var y,C,F=v||this.portal.portalUser||{};v=F.username;var x=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=this._getAdmins();var u=F.orgId||x?F.orgId===x:!1;x=F.isOrgAdmin&&u;F=(null===(C=F.userRole)||
void 0===C?void 0:C.isCustom())&&u&&F.userRole.canAssignUsersToOrgGroups();C=k["default"].includes(y,v);return!!(this.isOwner||C||x||F)};z.prototype._canJoinGroup=function(v){var y,C,F;v=v||this.portal.portalUser||{};var x=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=v.orgId||x?v.orgId===x:!1;x=!this.isInvitationOnly;var u=!this.belongsToGroup,w=null===(C=v.userRole)||void 0===C?void 0:C.canJoinOrgGroup();C=!v.orgId||(null===(F=v.userRole)||void 0===F?void 0:F.canJoinNonOrgGroup());
return u&&x?y?w:w||C:!1};z.prototype._canDeleteGroup=function(v,y){var C,F,x=v||this.portal.portalUser||{},u=x.username,w=(null===(C=this.groupOwner)||void 0===C?void 0:C.orgId)||{};C=this._getAdmins();u=k["default"].includes(C,u);x=(x.orgId||w?x.orgId===w:!1)&&(null===(F=x.userRole)||void 0===F?void 0:F.canDeleteOrgGroups());return y&&y.isAdminView?y.canDelete:!!(this.isOwner||u||x)};z.prototype.getCategories=function(){var v=this,y=new e["default"],C,F,x,u;l["default"].request({url:this.url+"/categorySchema"}).then(function(w){C=
w.categorySchema||[];v.categorySchema=[];C.forEach(function(A){v._isReferencingCategorySet(A)?(F=-1<A.source.indexOf("portal.regions"),x=-1<A.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):v.categorySchema.push(A)});F||x?n["default"](v.portal,"LivingAtlas",F).then(function(A){u=(null===A||void 0===A?0:A.length)?A.shift():{};v.categorySchema=d["default"].mixin(u.categorySchema,{isLivingAtlas:!0});y.resolve(v.categorySchema)}):y.resolve(v.categorySchema)},function(w){y.reject(w)});return y};
z.prototype.allowExternalMembers=function(){return"org"!==this.membershipAccess};z.prototype._isReferencingCategorySet=function(v){var y,C;return-1<(null===(y=v.source)||void 0===y?void 0:y.indexOf("portal.regions"))||-1<(null===(C=v.source)||void 0===C?void 0:C.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};z.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=this.portal&&!this.portal.isPortal&&!0===this.isOpenData};z.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup=
"enterprise"===this.provider&&!!this.providerGroupName};return z=a.__decorate([b["default"](t.PortalGroup,h["default"])],z)}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),function(D,B,a,c,k,n,r,f,m,q){function l(v){var y=new r["default"];k["default"].request({url:v.portalUrl+"portals/self",content:{culture:m["default"].locale,
"default":!0}}).then(function(C){y.resolve(null===C||void 0===C?void 0:C.contentCategorySetsGroupQuery)});return y}function b(v,y){var C=new r["default"],F=window.require("arcgisonline/pages/portal/PortalGroup");y?v.queryGroups(y,!0).then(function(x){(x=x.total?x.results.shift():null)?C.resolve(new F(q["default"].mixin(x,{portal:v}))):C.reject(!1)}):C.reject(!1);return C}function g(v,y,C,F){var x=new r["default"];F?y?e(v,F,y).then(function(u){return d(v,C,[u])}).then(function(u){return x.resolve(u)}):
F.groupContent().then(function(u){return x.resolve(u.items)}).then(function(u){return d(v,C,u)}).then(function(u){return x.resolve(u)}):x.reject(!1);return x}function e(v,y,C){var F=new r["default"],x;y.search({q:"group:"+y.id+' typekeywords:"'+C+'"',num:1}).then(function(u){x=u.total?u.items.shift():{};F.resolve(new c["default"](q["default"].mixin(x,{portal:v})))});return F}function d(v,y,C){var F=new r["default"];C=q["default"].isArray(C)?C:[C];y=y&&!v.isPortal;C=C.map(function(x){return h(v,y,
x)});n["default"](C).then(function(x){F.resolve(x)});return F}function h(v,y,C){var F=new r["default"],x=[z(C)];y&&x.push(t(v));n["default"](x).then(function(u){C.set("categorySchema",u);F.resolve(C)});return F}function t(v){var y=new r["default"],C={title:"Region",description:"Living Atlas Regions",displayName:f["default"].common.regions};v.getRegions().then(function(F){F=(F||[]).map(function(x){return q["default"].mixin(x,{displayName:x.localizedName,name:x.region})});C=q["default"].mixin(C,{categories:F});
y.resolve(C)});return y}function z(v){var y=new r["default"];v.getData().then(function(C){C=null===C||void 0===C?void 0:C.categorySchema;C=(null===C||void 0===C?0:C.length)?C.shift():{};y.resolve(q["default"].mixin(C,{displayName:f["default"].GroupWidget.categories}))});return y}c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);return function(v,y,C){var F=new r["default"];l(v).then(function(x){return b(v,
x)}).then(function(x){return g(v,y,C,x)}).then(function(x){return F.resolve(x)},function(){return F.resolve(null)});return F}})},"arcgisonline/pages/utils/verified":function(){define(["require","exports","tslib","../../sharing/util","dojo/Deferred"],function(D,B,a,c,k){c=a.__importDefault(c);k=a.__importDefault(k);return function(){function n(){}n.getVerifiedInfo=function(r){var f,m,q,l=new k["default"],b=n.orgHash,g=null!==(f=r.orgId)&&void 0!==f?f:null===(m=r.portal)||void 0===m?void 0:m.id;f=null===
(q=r.portal)||void 0===q?void 0:q.isPortal;if(r.contentStatus&&"public_authoritative"===r.contentStatus&&g&&!f)if(b[g])l.resolve(n.orgHash[g]);else{var e=location.protocol+"//"+r.portal.portalHostname+"/sharing/rest/portals/"+g;c["default"].request({url:e}).then(function(d){return n.getOrgProps(e).then(function(h){h&&(d.localizedOrgProperties=h);return d})}).then(function(d){var h,t,z=(d.allSSL?"https://":"http://")+(d.urlKey||"")+"."+d.customBaseUrl+"/",v=d.thumbnail?z+"sharing/rest/portals/self/resources/"+
d.thumbnail:"./images/group-no-image.png";b[d.id]={name:d.name,description:null===(t=null===(h=d.localizedOrgProperties)||void 0===h?void 0:h["default"])||void 0===t?void 0:t.description,url:z+"home/",thumbnail:v};l.resolve(b[d.id])},function(d){return 0})}else l.resolve(!1);return l};n.getOrgProps=function(r){var f=new k["default"];c["default"].request({url:r+"/resources/localizedOrgProperties",content:{start:1,num:100}}).then(function(m){m&&!m.code?f.resolve(m):f.resolve(!1)},function(){f.resolve(!1)});
return f};n.setVerifiedInfo=function(r){var f=new k["default"];n.getVerifiedInfo(r).then(function(m){r.verified=m;f.resolve(r)});return f};n.orgHash={};return n}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),function(D,B,a,c,k,n,r){function f(b){var g=b.response,e=b.url,d=b.portalUser;b=b.contentUser;var h=[];d&&(h=h.concat(d.userGroups||[]));b&&(h=h.concat(b.groups||[]));if(g.results&&
0<(null===h||void 0===h?void 0:h.length)){var t=g.results.map(function(z){return z.id}).join(",");d=h.map(function(z){return z.id});d=k["default"].batch(d,100).map(function(z){return m(e,z,t)});return n["default"].eachAlwaysValues(d).then(function(z){z=q(z);return l(g,z)})}d=new c["default"];d.resolve(g);return d}function m(b,g,e){if(!e||0===g.length)return e=new c["default"],e.resolve({}),e;b+="content/itemsgroups";g=g.join(",");return r["default"].request({url:b,content:{items:e,groups:g}})}function q(b){return b.reduce(function(g,
e){e&&Object.keys(e).forEach(function(d){d&&e[d]&&(g[d]=e[d])});return g},{})}function l(b,g){if(g){var e={};b.results.forEach(function(d){return e[d.id]=d});Object.keys(g).forEach(function(d){var h=g[d];if(h&&h.items){d=g[d];var t=d.groupId,z=d.groupTitle,v=d.groupThumbnail;d.items.forEach(function(y){y=e[y.itemId];y.groupData=y.groupData||[];y.sharedGroups=y.sharedGroups||0;0!==y.groupData.length&&k["default"].find(y.groupData,function(C){return C.id===t})||(y.groupData.push({groupId:t,groupTitle:z,
groupThumbnail:v}),y.sharedGroups+=1)})}})}return b}Object.defineProperty(B,"__esModule",{value:!0});B.parseItemsGroups=B.collateItemsGroupsResponse=B.fetchItemsGroupsPage=B.getAllItemsGroups=B.getItemGroups=void 0;c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);B.getItemGroups=function(b){var g=b.url,e=b.portalUser,d=b.contentUser;b={results:[b.item]};var h=new c["default"];f({response:b,url:g,portalUser:e,contentUser:d}).then(function(t){h.resolve(null===
t||void 0===t?void 0:t.results[0])});return h};B.getAllItemsGroups=f;B.fetchItemsGroupsPage=m;B.collateItemsGroupsResponse=q;B.parseItemsGroups=l})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),function(D,B,a,c,k,n){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);return{_licensesAPI:new k["default"],licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},
arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},getLicenseInfo:function(){var r=this,f=new n["default"],m=this.licenses||{};this._getSubscriptionInfo().then(function(){return r._getProvisionedListings()}).then(function(){return f.resolve(m)});
return f},_getSubscriptionInfo:function(){var r=this,f=new n["default"],m=this.licenses||{};this.portal.user&&this.isOrgUser?c["default"].getSubscriptionInfo().then(function(q){var l;r.orgCapabilities=null!==(l=null===q||void 0===q?void 0:q.orgCapabilities)&&void 0!==l?l:[];r.orgCapabilities.forEach(function(b){return r._addCapabilityInfo(b)});f.resolve(m)}):f.resolve(m);return f},_addCapabilityInfo:function(r){var f,m,q=this.licenses||{},l=(null===(f=r.id)||void 0===f?void 0:f.toLowerCase())||null;
r&&(f=null!==(m=q[l])&&void 0!==m?m:{},q[l]=a.__assign(a.__assign(a.__assign({},f),r),{title:r.id,valid:!0}))},_getProvisionedListings:function(){var r=this,f=new n["default"],m=this.portal.user,q={returnAppClientIds:!0,returnAllProvisions:!0},l=this.licenses||{};m&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(m.username,q).then(function(b){r.provisionedListings=null!==b&&void 0!==b?b:[];r.provisionedListings.forEach(function(g){return r._addListingInfo(g)});f.resolve(l)},function(){f.resolve([])}):
(Object.keys(l).forEach(function(b){l[b].isCapability||(l[b].valid=!0)}),f.resolve(l));return f},_addListingInfo:function(r){var f,m=this.licenses||{},q=(null===(f=r.clientId)||void 0===f?void 0:f.toLowerCase())||null;q&&(m[q]=a.__assign(a.__assign({},m[q]||{}),{valid:!0,itemId:r.itemId,clientId:r.clientId}))},isLicensed:function(r){var f,m,q;r=null!==(f=null===r||void 0===r?void 0:r.toLowerCase())&&void 0!==f?f:"";f=this.licenses||{};return null!==(q=null===(m=null===f||void 0===f?void 0:f[r])||
void 0===m?void 0:m.valid)&&void 0!==q?q:!1}}})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);
f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);return function(){function e(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=f["default"].restBaseUrl+"content/listings/${itemId}/userEntitlements";this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";
this._userSessionsUrl=f["default"].restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}e.terminateUserSession=function(d,h,t){var z=g["default"].getSecureUrl(f["default"].restBaseUrl);return g["default"].request({url:z+"content/listings/"+d+"/terminateUserSession",content:{username:h,sessionId:t}},{usePost:!0})};e.prototype.provisionUserEntitlements=function(d,h,t){return m["default"].sendAllResourcesSerially(f["default"].restBaseUrl+"content/listings/"+d+"/provisionUserEntitlements",
25,h.users,function(z){return{userEntitlements:JSON.stringify({users:z,entitlements:h.entitlements}),suppressCustomerEmail:!t}})};e.prototype.retrieveProvisionedUserEntitlement=function(d,h){var t=k["default"].substitute(this._userEntitlementUrl,{itemId:d,username:h});return g["default"].request({url:t})};e.prototype.retrieveProvisionedUserEntitlements=function(d,h,t){d=k["default"].substitute(this._userEntitlementsUrl,{itemId:d});return g["default"].request({url:d,content:{start:h?h:1,num:t?t:10}})};
e.prototype.retrieveSessionInformation=function(d,h){var t=k["default"].substitute(this._userSessionsUrl,{itemId:d,username:h});return g["default"].request({url:t})};e.prototype.provisionUserAppBundle=function(d,h,t){var z=new c["default"],v=new c["default"];t?v.resolve():this.getAppBundles(!0).then(function(y){y=y.appBundles.filter(function(C){return C.appBundleItemId===d})[0];y.maxUsers-y.assigned>=h.length?v.resolve():z.reject()});v.then(function(){m["default"].sendAllResourcesWithDelay(f["default"].restBaseUrl+
"content/listings/"+d+"/provisionUserAppBundle",25,h,function(y){return{users:JSON.stringify(y),revoke:t}},500).then(function(y){z.resolve(y)},function(y){z.reject(y)})});return z};e.prototype.updateUserLicenseType=function(d,h){var t=new c["default"];m["default"].sendAllResourcesSerially(f["default"].restBaseUrl+"portals/self/updateUserLicenseType",25,d,function(z){return{users:JSON.stringify(z),userLicenseType:h}}).then(function(z){t.resolve(z)},function(){t.reject()});return t};e.prototype.getUserCounts=
function(d){return g["default"].request({url:f["default"].restBaseUrl+"portals/self/users/counts?type\x3d"+d})};e.prototype.getUserLicenseType=function(d){var h=new c["default"],t;b["default"].getBlockedAppsWithInfo().then(function(z){t=z;return g["default"].request({url:f["default"].restBaseUrl+"/community/users/"+d+"/userLicenseType"})}).then(function(z){z.apps.forEach(function(v){v.isAppBundle?v.apps.forEach(function(y){y.blocked=b["default"].isBlocked(t,y)}):v.blocked=b["default"].isBlocked(t,
v)});h.resolve(z)},function(){h.resolve()});return h};e.prototype.getUserAppBundles=function(d){return m["default"].fetchAllResources(f["default"].restBaseUrl+"/community/users/"+d+"/appBundles",{num:10},"appBundles")};e.prototype.getUserProvisionedListings=function(d,h,t){var z=h||{},v=new c["default"],y;t?b["default"].getBlockedAppsWithInfo().then(function(C){v.resolve(C)}):v.resolve([]);return v.then(function(C){y=C;return m["default"].fetchAllResources(f["default"].restBaseUrl+"/community/users/"+
d+"/provisionedListings",z,"provisionedListings")}).then(function(C){q["default"].licensesConfig&&C.forEach(function(F){var x=q["default"].licensesConfig.apps.filter(function(u){return u.title===F.title})[0];x&&x.label&&(F.title=x.label);F.blocked=b["default"].isBlocked(y,F)});return C})};e.prototype.getUserEntitlements=function(d,h){return g["default"].request({url:f["default"].restBaseUrl+"/content/listings/"+d+"/userEntitlements/"+h})};e.prototype.getLicenseTypes=function(d){var h=this,t=new c["default"],
z;b["default"].getBlockedAppsWithInfo().then(function(v){z=v;return m["default"].fetchAllResources(f["default"].restBaseUrl+"portals/self/userLicenseTypes",{num:10},"userLicenseTypes")}).then(function(v){(null===z||void 0===z?0:z.length)&&v.forEach(function(y){y.apps.forEach(function(C){C.isAppBundle?C.apps.forEach(function(F){F.blocked=z.some(function(x){var u;return x.itemid&&x.itemid===F.id||x.title===F.title||(null===(u=x.related)||void 0===u?void 0:u.some(function(w){return w.itemid&&w.itemid===
F.id||w.title===F.title}))})}):C.blocked=z.some(function(F){var x;return F.itemid&&F.itemid===C.id||F.title===C.title||(null===(x=F.related)||void 0===x?void 0:x.some(function(u){return u.itemid&&u.itemid===C.id||u.title===C.title}))})})});h.getUserCounts("userLicenseType").then(function(y){v.forEach(function(F){var x=y.results.filter(function(u){return u.key===F.id})[0];F.assigned=x?x.count:0});var C=v.filter(function(F){return d||0!==F.assigned||0!==F.maxUsers});m["default"].sortListByStrProp(C,
"name");t.resolve({userLicenseTypes:C})})});return t};e.prototype.getAppBundles=function(d){var h=this,t=new c["default"],z;b["default"].getBlockedAppsWithInfo().then(function(v){z=v;return g["default"].request({url:f["default"].restBaseUrl+"portals/self/appBundles"})}).then(function(v){v.appBundles.forEach(function(y){y.apps.forEach(function(C){C.blocked=z.some(function(F){var x;return F.itemid&&F.itemid===C.id||F.title===C.title||(null===(x=F.related)||void 0===x?void 0:x.some(function(u){return u.itemid&&
u.itemid===C.id||u.title===C.title}))})})});h.getUserCounts("appBundle").then(function(y){v.appBundles.forEach(function(C){var F=y.results.filter(function(x){return x.key===C.appBundleItemId})[0];C.assigned=F?F.count:0});v.appBundles=v.appBundles.filter(function(C){return 0!==C.maxUsers||0!==C.assigned});m["default"].sortListByStrProp(v.appBundles,"name");d?t.resolve(v):l["default"].eachAlways(v.appBundles.map(function(C){return h.getUsersForAppBundle(C.appBundleItemId)})).then(function(C){C.forEach(function(F,
x){v.appBundles[x].usernames=F.value.results.map(function(u){return u.username})});l["default"].eachAlways(v.appBundles.map(function(F){return h.getAppBundleListing(F.appBundleItemId)})).then(function(F){v.appBundles.forEach(function(x,u){x.allowedLevels=F[u].value.allowedUserLevels?F[u].value.allowedUserLevels.split(",").map(function(w){return w.trim()}):[]});t.resolve(v)})})})});return t};e.prototype.getAppBundleListing=function(d){return g["default"].request({url:g["default"].getSecureUrl(f["default"].restBaseUrl)+
"content/listings/"+d})};e.prototype.getUsersForAppBundle=function(d){return g["default"].request({url:f["default"].restBaseUrl+"portals/self/users/search",content:{q:"appbundle: "+d}})};e.prototype.getLicensedEntitlements=function(){var d=this,h=new c["default"],t;q["default"].initLicensesConfig(f["default"].portal).then(function(){return b["default"].getBlockedAppsWithInfo()}).then(function(z){t=z;return d.retrieveProductListings()}).then(function(){d._retrieveUserEntitlements().then(function(){var z;
d._hasNegativeLicenses();var v=[];if(d._hasProListing()){var y={};d.appUserCounts.forEach(function(u){u.key!==d._proListing.listing.itemId||y[u.secondaryKey]||(y[u.secondaryKey]={num:0})});var C=!(d._proListing.provision.orgEntitlements&&d._proListing.provision.orgEntitlements.entitlements),F=[];var x=C?y:d._proListing.provision.orgEntitlements.entitlements;C||Object.keys(y).forEach(function(u){x[u]||(x[u]=y[u],F.push(u))});Object.keys(x).forEach(function(u){var w;C||(C=-1!==F.indexOf(u));var A=(null===
(w=d.appUserCounts.filter(function(I){return I.key===d._proListing.listing.itemId&&I.secondaryKey===u})[0])||void 0===w?void 0:w.count)||0;w=x[u].num;var E=w-A,G=d.proEntitlements.filter(function(I){return-1!==I.entitlements.indexOf(u)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(u),K=d._isLicenseExpired(d._proListing.provision.endDate,C,w,A);A={title:e.getProEntitlementTitle(u),key:u,total:w,used:A,remaining:E,status:k["default"].substitute(e.i18n.licensesUsed,{used:A,total:w}),
isPro:!0,proEntitlements:d.proEntitlements,allowedLevels:["2"],itemId:d._proListing.listing.itemId,usernames:G.map(function(I){return I.username}),extNotSupported:e.getExtNotSupported(u),expiration:d._proListing.provision.endDate,isExpired:K,isExtension:H,trial:d._proListing.provision.trial,isEsriApp:!0};v.push(A)})}null===(z=d._productListings)||void 0===z?void 0:z.forEach(function(u){var w,A=u.listing,E=A.itemId,G={},H=!(u.provision.orgEntitlements&&u.provision.orgEntitlements.entitlements),K=A.title,
I=d.appUserCounts.filter(function(M){return M.key===E})[0];I&&(G[I.secondaryKey]={num:0});x=H?G:u.provision.orgEntitlements.entitlements;G&&Object.keys(G).length&&Object.keys(G).forEach(function(M){x[M]||(x[M]=G[M])});var J=[],L="esri"===A.owner||"esri_apps"===A.owner;!L&&x&&Object.keys(x).length&&(J=Object.keys(x),I=J[0],x=(w={},w[I]=x[I],w));Object.keys(x).forEach(function(M){var N,O,Y,ba=!0;if(q["default"].licensesConfig){var ha=-1<(null===(N=u.listing.typeKeywords)||void 0===N?void 0:N.indexOf("User License Type Extension"));
N=ha?q["default"].licensesConfig.userTypeExtensions:q["default"].licensesConfig.apps;if(N=null===N||void 0===N?void 0:N.filter(function(X){return X.entitlement===M})[0])ha||(K=N.label||N.title),"false"===N.supportsKubernetes&&(ba=!1)}ha=(null===(O=d.appUserCounts.filter(function(X){return X.key===E&&X.secondaryKey===M})[0])||void 0===O?void 0:O.count)||0;O={drone2MapAdvN:"ArcGIS Drone2Map Advanced",drone2MapStdN:"ArcGIS Drone2Map Standard"};O[M]&&(K=O[M]);O=x[M].num;N=O-ha;var U=d._isLicenseExpired(u.provision.endDate,
H,O,ha);ba={title:K,key:M,total:O,used:ha,remaining:N,status:k["default"].substitute(e.i18n.licensesUsed,{used:ha,total:O}),icon:A.icon,properties:A.properties,itemId:E,type:A.type,allowedLevels:A.allowedUserLevels?A.allowedUserLevels.split(",").map(function(X){return X.trim()}):[],usernames:d.productEntitlements[E]?d.productEntitlements[E].map(function(X){return X.username}):[],expiration:u.provision.endDate,isExpired:U,trial:u.provision.trial,requiredListings:A.requiredListings,dependentListings:A.dependentListings,
owner:A.owner,isBusinessAnalyst:q["default"].isBusinessAnalyst(M),isDrone2Map:q["default"].isDrone2Map(M),blocked:t.some(function(X){var Z;return X.itemid&&X.itemid===E||X.title===K||(null===(Z=X.related)||void 0===Z?void 0:Z.some(function(P){return P.itemid&&P.itemid===E||P.title===K}))}),entitlementKeys:J,isEsriApp:L,supportsKubernetes:ba};"ArcGIS for Power BI"===ba.title&&(null===(Y=q["default"].licensesConfig)||void 0===Y?0:Y.hidePowerBI)||v.push(ba)})});m["default"].sortListByStrProp(v,"title");
h.resolve(v)})});return h};e.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};e.prototype.getDisconnectSettingForListing=function(d){d=g["default"].getSecureUrl(f["default"].restBaseUrl)+"content/listings/"+d+"/disconnectSettings";return g["default"].request({url:d})};e.prototype.updateDisconnectSettingForListing=function(d,h,t){d=g["default"].getSecureUrl(f["default"].restBaseUrl)+"content/listings/"+d+"/setDisconnectSettings";var z=new c["default"];h={canDisconnect:h};
r["default"].isDefined(t)&&(h.maxDisconnectTime=t);g["default"].request({url:d,content:h},{usePost:!0}).then(function(v){v&&v.code&&v.messageCode?z.resolve({error:!0,messageCode:v.messageCode}):z.resolve(v)},function(v){var y={error:!0,messageCode:void 0};v&&v.messageCode&&(y.messageCode=v.messageCode);z.resolve(y)});return z};e.getExtNotSupported=function(d){return this._extNotSupported[d]};e.getProEntitlementTitle=function(d){switch(d){case "desktopBasicN":return e.i18n.licenseTypes.agsProLabel+
" "+e.i18n.licenseTypes.basicLabel;case "desktopStdN":return e.i18n.licenseTypes.agsProLabel+" "+e.i18n.licenseTypes.standardLabel;case "desktopAdvN":return e.i18n.licenseTypes.agsProLabel+" "+e.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return e.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return e.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return e.i18n.licenseTypes.networkAnalyst;case "geostatAnalystN":return e.i18n.licenseTypes.geostatisticalAnalyst;case "dataReviewerN":return e.i18n.licenseTypes.dataReviewer;
case "workflowMgrN":return e.i18n.licenseTypes.workflowManager;case "dataInteropN":return e.i18n.licenseTypes.dataInterop;case "defenseN":return e.i18n.licenseTypes.defenseMapping;case "FMVN":return e.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return e.i18n.licenseTypes.businessBasic;case "businessStdN":return e.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return e.i18n.licenseTypes.roadsHighways;case "publisherN":return e.i18n.licenseTypes.publisher;case "productionMapN":return e.i18n.licenseTypes.productionMapping;
case "schematicsN":return e.i18n.licenseTypes.schematics;case "trackingN":return e.i18n.licenseTypes.tracking;case "aviationN":return e.i18n.licenseTypes.aviation;case "airportsN":return e.i18n.licenseTypes.airports;case "maritimeN":return e.i18n.licenseTypes.maritime;case "bathymetryN":return e.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return e.i18n.licenseTypes.streetMapNA;case "smpEuropeN":return e.i18n.licenseTypes.streetMapEU;case "smpAsiaPacificN":return e.i18n.licenseTypes.streetMapAPAC;
case "smpMidEAfricaN":return e.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return e.i18n.licenseTypes.streetMapLA;case "smpJapanN":return e.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return e.i18n.licenseTypes.locationRef;case "imageAnalystN":return e.i18n.licenseTypes.imageAnalyst;case "locateXTN":return e.i18n.licenseTypes.locateXT;case "indoorsN":return e.i18n.licenseTypes.indoors;default:return""}};e.prototype._hasNegativeLicenses=function(){var d=this,h={},t=!1,z=!1;this._proListing&&
(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(h=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),this._remainingProEntitlements=a.__assign({},h),this.proEntitlements.forEach(function(v){v.entitlements.forEach(function(y){d._remainingProEntitlements[y]||(d._remainingProEntitlements[y]=0);--d._remainingProEntitlements[y];0>d._remainingProEntitlements[y]&&(t=!0)})}));this._productListings&&0<this._productListings.length&&
(this._remainingProductEntitlements={},this._productListings.forEach(function(v){h={};var y=v.listing.itemId;v.provision.orgEntitlements&&v.provision.orgEntitlements.entitlements&&(h=d._convertOrgEntitlementsToPurchaseMap(v.provision.orgEntitlements.entitlements));d._remainingProductEntitlements[y]=a.__assign({},h);d.productEntitlements[y]&&d.productEntitlements[y].forEach(function(C){C.entitlements.forEach(function(F){d._remainingProductEntitlements[y]||(d._remainingProductEntitlements[y]={});d._remainingProductEntitlements[y][F]||
(d._remainingProductEntitlements[y][F]=0);--d._remainingProductEntitlements[y][F];0>d._remainingProductEntitlements[y][F]&&(z=!0)})})}));return t||z};e.prototype._convertOrgEntitlementsToPurchaseMap=function(d){var h={};if(d)for(var t in d)d[t]&&r["default"].isDefined(d[t].num)?h[t]=d[t].num:h[t]=d[t];return h};e.prototype._hasProListing=function(){var d=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&!m["default"].isEmptyObject(this._proListing.provision.orgEntitlements)||
this.appUserCounts.some(function(h){var t;return h.key===(null===(t=d._proListing.listing)||void 0===t?void 0:t.itemId)})))};e.prototype._isLicenseExpired=function(d,h,t,z){var v=r["default"].isDefined(d),y=-1===d;d=d<Date.now();return v&&!y&&d||h||0===t&&0<z};e.prototype.retrieveProductListings=function(){var d=this,h=new c["default"];g["default"].findLicenseByUserProducts().then(function(t){t&&t.pro&&(d._proListing=a.__assign({},t.pro));t&&t.products&&(d._productListings=a.__spreadArray([],t.products));
h.resolve()},function(){d._proListing=void 0;d._productListings=void 0;h.resolve()});return h};e.prototype.retrieveUserEntitlementsForListing=function(d){d=k["default"].substitute(this._userEntitlementsUrl,{itemId:d});return m["default"].fetchAllResources(d,{},"userEntitlements")};e.prototype.getAppUserCounts=function(){var d=this;return m["default"].fetchAllResources(f["default"].restBaseUrl+"portals/self/users/counts?type\x3dapp").then(function(h){d.appUserCounts=h})};e.prototype._retrieveUserEntitlements=
function(){var d=new c["default"];this.getAppUserCounts().then(function(){d.resolve()},function(){d.resolve()});return d};e.prototype._retrieveProUserEntitlements=function(){var d=k["default"].substitute(this._userEntitlementsUrl,{itemId:this._proListing.listing.itemId});return m["default"].fetchAllResources(d,{},"userEntitlements")};e.prototype._retrieveProductUserEntitlements=function(){var d=this,h={};this._productListings.forEach(function(t){t=t.listing.itemId;var z=k["default"].substitute(d._userEntitlementsUrl,
{itemId:t});h[t]=m["default"].fetchAllResources(z,{},"userEntitlements")});return h};e.prototype.getUserLicensedItems=function(d){return a.__awaiter(this,void 0,void 0,function(){var h;return a.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,g["default"].request({url:f["default"].restBaseUrl+"community/users/"+d,content:{returnUserLicensedItems:!0}})];case 1:return h=t.sent(),[2,(null===h||void 0===h?void 0:h.userLicensedItems)||[]];case 2:return t.sent(),[2,[]];
case 3:return[2]}})})};e.i18n=a.__assign({},n["default"].manageLicenses);e._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),desktopStdN:["maritimeN"],desktopAdvN:[]};return e}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),function(D,B,a,c,k,
n,r){Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);var f,m,q,l,b,g,e=function(){var z=new c["default"];if(r["default"].self.isPortal)return z.resolve([]),z;if(q)return q;if((null===m||void 0===m?0:m.blockedApps)&&3E3>=Date.now()-m.timestamp)return z.resolve(m.blockedApps),q=void 0,z;q=z;n["default"].request({url:r["default"].restBaseUrl+"portals/self/signinSettings"}).then(function(v){m={blockedApps:null===
v||void 0===v?void 0:v.blockedApps,timestamp:Date.now()};z.resolve(null===v||void 0===v?void 0:v.blockedApps);q=void 0},function(){z.resolve([]);q=void 0});return z},d=function(){var z=new c["default"];if(g)return z.resolve(g),z;if(l)return l;l=z;n["default"].request({url:r["default"].restBaseUrl+"search",content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:r["default"].blockedAppsConfigItemQuery}}).then(function(v){l=void 0;g=v;z.resolve(v)},function(){l=void 0;z.resolve(void 0)});return z},
h=function(z){var v=new c["default"];if(!z)return v.resolve(void 0),v;if(b)return b;b=v;n["default"].request({url:r["default"].restBaseUrl+"content/items/"+z+"/data"}).then(function(y){b=void 0;f=(null===y||void 0===y?void 0:y.blockedApps)||[];v.resolve(f)},function(){b=void 0;v.resolve(f)});return v},t=function(){var z=new c["default"];if(r["default"].self.isPortal)return z.resolve([]),z;if(f)return z.resolve(f),z;d().then(function(v){var y,C;if(v)return v=null===(C=null===(y=v.results)||void 0===
y?void 0:y[0])||void 0===C?void 0:C.id,h(v);z.resolve(f)}).then(function(v){z.resolve(v)});return z};B["default"]={updateBlockedApps:function(z){z=a.__assign({blockedApps:z.length?JSON.stringify(z):""},!z.length&&{clearEmptyFields:!0});return n["default"].request({url:r["default"].restBaseUrl+"portals/self/setSigninSettings",content:z},{usePost:!0})},getBlockedApps:e,getBlockableApps:t,getBlockedAppsWithInfo:function(){var z=new c["default"];if(r["default"].self.isPortal)return z.resolve([]),z;k["default"]({blockable:t(),
clientIds:e()}).then(function(v){var y=v.blockable,C=v.clientIds;(null===y||void 0===y?0:y.length)&&C||z.resolve([]);z.resolve((y||[]).filter(function(F){return-1<(null===C||void 0===C?void 0:C.indexOf(F.clientid))}))},function(){z.resolve([])});return z},isBlocked:function(z,v){return z.some(function(y){var C;return y.itemid&&(y.itemid===v.id||y.itemid===v.itemId)||y.title===v.title||(null===(C=y.related)||void 0===C?void 0:C.some(function(F){return F.itemid&&(F.itemid===v.id||F.itemid===v.itemId)||
F.title===v.title}))})},extractClientIds:function(z){var v=[];z.forEach(function(y){var C,F;v.push(y.clientid);null===(F=null===(C=y.related)||void 0===C?void 0:C.forEach)||void 0===F?void 0:F.call(C,function(x){v.push(x.clientid)})});return v}}})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../utils/formatters ../../utils/strings ../../../tsutils/declareDecorator".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);return function(){function b(g,e){this.templateString=c["default"];this.hide=m["default"].hide;this.show=m["default"].show;this.firstChar=m["default"].firstChar;this.stripHTML=m["default"].stripHTML;this.empty=m["default"].empty;this.cssClasses="";this.size="50";this.letterSize="4";this.tooltipClass=
"tooltip";this.tooltipId="";this._viewBoxSize="65"}b.prototype.postMixInProperties=function(){var g;this.inherited(arguments);this._group=new r["default"](a.__assign(a.__assign({},this.group),{portal:this.portal}));this._group.fillColor=this._group.id?"#"+this._group.id.substr(this._group.id.length-6):q["default"].stringToHex(this._group.title);this._group.useLetter=!(null===(g=this._group.title.charAt(0))||void 0===g||!g.match(/^\w+$/));this._group.useLetter&&(this._viewBoxSize=this.size);this.tooltipId=
"group-icon-"+(this._group.id||Date.now())};b.prototype.postCreate=function(){var g=this;this._img.addEventListener("error",function(){f["default"].hideNode(g._img);g._svg.classList.remove("hide")})};return b=a.__decorate([l["default"](n["default"],k["default"])],b)}()})},"arcgisonline/pages/utils/dom":function(){define(["require","exports","tslib","./strings","dojo/dom-style"],function(D,B,a,c,k){c=a.__importDefault(c);k=a.__importDefault(k);return function(){function n(){}n.createElement=function(r,
f,m){m||(m=document.createElement("div"),document.body.appendChild(m));var q=document.createElement(r);Object.keys(f||{}).forEach(function(l){q[l]=f[l]});m.appendChild(q);return q};n.addStylesheet=function(r){var f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=r;document.head.appendChild(f)};n.isHidden=function(r){var f=["none","none !important","none!important"],m=["hidden","hidden !important","hidden!important"],q=""+k["default"].get(r,"visibility"),l=""+k["default"].get(r,
"display");return r&&(-1<f.indexOf(l)||-1<m.indexOf(q))};n.hideNode=function(r){null===r||void 0===r?void 0:r.classList.add("hide")};n.hideNodes=function(r){if(r)if(r.forEach)r.forEach(this.hideNode);else for(var f=0;f<r.length;f++)this.hideNode(r[f])};n.showNode=function(r){null===r||void 0===r?void 0:r.classList.remove("hide")};n.showNodes=function(r){if(r)if(r.forEach)r.forEach(this.showNode);else for(var f=0;f<r.length;f++)this.showNode(r[f])};n.showHide=function(r,f){null===r||void 0===r?void 0:
r.classList[f?"remove":"add"]("hide")};n.showHideAll=function(r,f){var m=this;null===r||void 0===r?void 0:r.forEach(function(q){return m.showHide(q,f)})};n.addRemoveClass=function(r,f,m){null===r||void 0===r?void 0:r.classList[m?"add":"remove"](f)};n.addRemoveClassAll=function(r,f,m){var q=this;null===r||void 0===r?void 0:r.forEach(function(l){return q.addRemoveClass(l,f,m)})};n.setVisibility=function(r,f){null===r||void 0===r?void 0:r.classList[f?"remove":"add"]("visibility-hidden")};n.toggleHide=
function(r){null===r||void 0===r?void 0:r.classList.toggle("hide")};n.toggleHideAll=function(r){null===r||void 0===r?void 0:r.forEach(function(f){f.classList.toggle("hide")})};n.activateNode=function(r){null===r||void 0===r?void 0:r.classList.add("is-active")};n.deactivateNode=function(r){null===r||void 0===r?void 0:r.classList.remove("is-active")};n.canBeDisabled=function(r){return r instanceof HTMLInputElement||r instanceof HTMLButtonElement||r instanceof HTMLFieldSetElement||r instanceof HTMLOptGroupElement||
r instanceof HTMLOptionElement||r instanceof HTMLSelectElement||r instanceof HTMLTextAreaElement};n.isDisabled=function(r){var f;return null!==(f=null===r||void 0===r?void 0:r.disabled)&&void 0!==f?f:!1};n.disableNode=function(r,f){r&&(r.disabled=f)};n.disableNodes=function(r,f){var m=this;null===r||void 0===r?void 0:r.forEach(function(q){m.disableNode(q,f)})};n.isNodeVisible=function(r){return 0!==(null===r||void 0===r?void 0:r.offsetHeight)};n.isChecked=function(r){var f;return null!==(f=null===
r||void 0===r?void 0:r.checked)&&void 0!==f?f:!1};n.checkNode=function(r,f){r&&(r.checked=f)};n.selectOption=function(r,f){if(r)for(var m=0;m<r.length;m++){var q=r[m];if(c["default"].areEqual(q.value,f)){q.selected=!0;break}}};n.getSelectedOption=function(r){if(r)for(var f=0;f<r.length;f++){var m=r[f];if(m.selected)return m}return null};n.addClasses=function(r,f){r&&(null===f||void 0===f?0:f.length)&&f.forEach(function(m){r.classList.add(m)})};n.removeClasses=function(r,f){r&&(null===f||void 0===
f?0:f.length)&&f.forEach(function(m){r.classList.remove(m)})};n.setModifierClass=function(r,f,m){var q,l=null===(q=r.className.match(new RegExp("(^| )"+f+"\\S+","g")))||void 0===q?void 0:q[0].replace(/ +/g,"");l&&r.classList.remove(l);r.classList.add(""+f+m)};n.appendChildren=function(r,f){var m=document.createDocumentFragment();null===r||void 0===r?void 0:r.forEach(function(q){m.appendChild(q)});null===f||void 0===f?void 0:f.appendChild(m)};n.forEachNode=function(r,f,m){for(var q=0;q<r.length;q++)null===
f||void 0===f?void 0:f.call(m,r[q],q)};n.nodeListToArray=function(r){return Array.prototype.slice.call(r)};n.querySelectorAllAsArray=function(r,f){return this.nodeListToArray(f.querySelectorAll(r))};return n}()})},"arcgisonline/pages/utils/a11y":function(){define(["require","exports"],function(D,B){function a(k){var n,r,f,m=null!==(n=null===k||void 0===k?void 0:k.parent)&&void 0!==n?n:document.body;n=null!==(r=null===k||void 0===k?void 0:k.id)&&void 0!==r?r:"a11y-live-region";k=null!==(f=null===k||
void 0===k?void 0:k.mode)&&void 0!==f?f:"polite";f=m.querySelector("#"+n);f||(f=document.createElement("div"),f.id=n,f.classList.add("screen-readers-only"),f.setAttribute("role","alert"),f.setAttribute("aria-live",k),f.setAttribute("aria-atomic","true"),f.textContent="",m.appendChild(f));return f}function c(k,n){var r=document.body.querySelector("#"+(n?n:"a11y-live-region"));r&&(r.textContent=k)}Object.defineProperty(B,"__esModule",{value:!0});B.postToLiveRegion=B.setupLiveRegion=void 0;B.setupLiveRegion=
a;B.postToLiveRegion=c;B["default"]={setupLiveRegion:a,postToLiveRegion:c}})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string dojo/_base/kernel ../../esriGeowConfig ../../sharing/util ./date dojo/i18n!../../nls/arcgisonline".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b){function g(e){return q["default"].request({url:m["default"].restBaseUrl+"community/users/"+e.username+"/notifications/"+e.id+"/delete"},{usePost:!0})}
c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);return{fetchNotifications:function(e,d){var h=e.username||e.email;return h?q["default"].request({url:m["default"].restBaseUrl+"community/users/"+h+"/notifications"}).then(function(t){return(t.notifications||[]).map(function(z){var v=z.received,y=z.id,C=f["default"].locale?f["default"].locale.substring(0,
2):"en";z&&z.received&&z.id?(v={date:"en"===C?c["default"](v).fromNow():l["default"].format(new Date(v),"day-short-month-year-short-time"),id:y,text:""},"webapp_not_copied"===z.type&&d.isPortal&&(z.type="webapp_not_copied_portal"),b["default"].notifications.types[z.type]&&(z.data.baseUrl=m["default"].baseUrl,v.text=r["default"].substitute(b["default"].notifications.types[z.type],z.data)),"message_received"===z.type&&z.data&&z.data.message&&(v.text=z.data.message),z=v.text&&v):z=null;return z}).filter(function(z){return z})}):
(h=new n["default"],h.resolve([]),h)},deleteNotifications:function(e,d){var h=d.map(function(t){return{username:e.username,id:t}}).map(g);return k["default"](h)}}})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig esri/lang esri/request ../../sharing/util dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string dojo/dom-construct dojo/dom-class dojo/dom-attr arcgisonline/pages/pageUtil arcgisonline/sharing/dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);return function(){function v(){}v.notebookServerConfigured=function(){var y,C;if(c["default"].self&&c["default"].self.isPortal)return c["default"].notebookServerEnabled&&
c["default"].self.supportsHostedNotebooks?!0:!1;var F=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(y=c["default"].self.subscriptionInfo)||void 0===y?void 0:y.type);return c["default"].notebookServerEnabled&&(!F||-1!==((null===(C=c["default"].self)||void 0===C?void 0:C.allowedBetaFeatures)||[]).indexOf("notebooks"))};v.closeNotebook=function(y,C){var F=C.split("/"),x=F[F.length-3],u=F[F.length-1];x&&u&&v.notebookRequest(y+"/admin/system/containers/"+x+"/notebooks",
"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(w){var A;if(null===(A=w.selectedNotebooks)||void 0===A?0:A.length)w=w.selectedNotebooks.filter(function(E){return E.FileName===u}),w.length&&v.closeNotebookRequest(y,x,w[0].id)})};v.closeNotebookRequest=function(y,C,F){return v.notebookRequest(y+"/admin/system/containers/"+C+"/notebooks/"+F+"/closeNotebook","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};v.getNotebookServer=function(){var y=new f["default"];(c["default"].portal||
c["default"].self).isPortal?c["default"].userInfo?c["default"].portal.getFederatedServers().then(function(C){k["default"].isDefined(C)&&k["default"].isDefined(C.servers)&&k["default"].isDefined(C.servers.length)?(C=C.servers.filter(function(F){return"ARCGIS_NOTEBOOK_SERVER"===F.serverType&&"NotebookServer"===F.serverFunction}),C.length?(C=C[0],C.adminContext="/admin",y.resolve(C)):y.resolve(null)):y.resolve(null)},function(C){y.resolve(null)}):y.resolve(null):r["default"].request({url:c["default"].restBaseUrl+
"/portals/self/urls"}).then(function(C){var F,x;(C=null===(x=null===(F=null===C||void 0===C?void 0:C.urls)||void 0===F?void 0:F.notebooks)||void 0===x?void 0:x.https)?y.resolve({url:"https://"+C,adminContext:""}):y.resolve(null)},function(C){y.resolve(null)});return y};v.notebooksBetaFormatter=function(y){return y};v.buildSelfSignedErrorMessage=function(y,C,F){y.messageHTML="\n      \x3ch4\x3e\n        "+(F?z["default"].notebookViewer.openNotebookServerCertificateError:z["default"].notebookViewer.openNotebookCertificateError)+
"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        "+z["default"].notebookViewer.openNotebookCertificateErrorDescription+"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          "+z["default"].notebookViewer.openNotebookCertificateErrorStep1+'\n          \x3ca href\x3d"'+(C.url+C.adminContext)+'" target\x3d"_blank" \x3e\n            '+(C.url+C.adminContext)+"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e"+z["default"].notebookViewer.openNotebookCertificateErrorStep2+"\x3c/li\x3e\n        \x3cli\x3e"+
z["default"].notebookViewer.openNotebookCertificateErrorStep3+"\x3c/li\x3e\n      \x3c/ol\x3e"};v.getNotebookServerMachines=function(y){var C=new f["default"],F=[],x={useJsonFormatParam:!0,useCredentials:!0};v.notebookRequest(y+"/admin/machines/","GET",null,x).then(function(u){u=(null===u||void 0===u?void 0:u.machines)||[];u.length?(u.forEach(function(w){var A=new f["default"];q["default"]({hardware:v.getNotebookServerMachineHardware(y,w,x),health:v.getNotebookServerMachineHealth(y,w,x)}).then(function(E){A.resolve({machineName:w.machineName,
hardware:E.hardware,health:E.health})});F.push(A)}),q["default"](F).then(function(w){C.resolve(w)})):C.resolve([])});return C};v.getNotebookServerMachineHardware=function(y,C,F){var x=new f["default"];v.notebookRequest(y+"/admin/machines/"+C.machineName+"/hardware","GET",null,F).then(function(u){x.resolve(u)},function(u){x.resolve({error:u})});return x};v.getNotebookServerMachineHealth=function(y,C,F){var x=new f["default"];v.notebookRequest(y+"/admin/machines/"+C.machineName+"/status","GET",null,
F).then(function(u){x.resolve(u)},function(u){x.resolve({error:u})});return x};v.getNotebookServerOS=function(y){var C=new f["default"],F={useJsonFormatParam:!0,useCredentials:!0};v.notebookRequest(y+"/admin/machines/","GET",null,F).then(function(x){((null===x||void 0===x?void 0:x.machines)||[]).length?v.notebookRequest(y+"/admin/machines/"+x.machines[0].machineName+"/hardware","GET",null,F).then(function(u){u=-1!==(u.os||"").toLowerCase().indexOf("windows")?"windows":"linux";C.resolve(u)},function(u){C.reject(u)}):
C.reject()});return C};v.getNotebookRuntimes=function(y){var C=new f["default"];v.getNotebookServer().then(function(F){null!==F?v.getNotebookRuntimesBase(F.url).then(function(x){y?C.resolve({runtimes:x.runtimes,server:F}):C.resolve(x.runtimes)},function(x){C.reject(x)}):C.reject()});return C};v.getNotebookRuntimesBase=function(y){return v.notebookRequest(y+"/admin/notebooks/runtimes","GET",null,{useJsonFormatParam:!0,useCredentials:!0})};v.getNotebookRuntimeInfo=function(y,C){var F=this,x=new f["default"];
y&&C?this.getNotebookRuntimes(!0).then(function(u){var w=u.runtimes.filter(function(A){return A.name.toLowerCase()===y.toLowerCase()&&A.version.toLowerCase()===C.toLowerCase()});1!==w.length?x.reject():F.notebookRequest(u.server.url+"/admin/notebooks/runtimes/"+w[0].id+"/manifest","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(A){x.resolve(A)},function(A){x.reject(A)})},function(u){x.reject(u)}):x.reject();return x};v.startNotebookServerPoller=function(){return window.setInterval(function(){v.getNotebookServerInfo()},
6E5)};v.getNotebookServerInfo=function(){var y=new f["default"];v.getNotebookServer().then(function(C){null!==C?v.pingNotebookServer(C.url).then(function(F){y.resolve(F)},function(F){y.reject(F)}):y.reject()});return y};v.pingNotebookServer=function(y){var C=new f["default"];v.notebookRequest(y+"/rest/info","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(F){C.resolve(F)},function(F){C.reject(F)});return C};v.getSampleNotebooksGroup=function(){var y=new f["default"],C=c["default"].self&&
c["default"].self.isPortal?"esri sample notebooks":"arcgis sample notebooks";r["default"].request({url:c["default"].restBaseUrl+"community/groups",content:{q:"title:("+C+') AND owner:"esri_notebook"'}}).then(function(F){F=(F.results||[]).filter(function(x){return(x.title||"").toLowerCase()===C});1===F.length?y.resolve({id:F[0].id}):y.resolve({id:null})},function(F){y.resolve({id:null})});return y};v.getSampleNotebooksUrl=function(){var y=new f["default"];v.getSampleNotebooksGroup().then(function(C){C.id&&
y.resolve(c["default"].baseUrl+"group.html?id\x3d"+C.id+"#content")});return y};v.getSampleNotebooks=function(){var y=new f["default"];v.getSampleNotebooksGroup().then(function(C){C.id?r["default"].request({url:c["default"].restBaseUrl+"content/groups/"+C.id}).then(function(F){y.resolve({items:(F.items||[]).filter(function(x){return"notebook"===(x.type||"").toLowerCase()})})},function(F){y.resolve({items:[]})}):y.resolve({items:[]})});return y};v.getAllNotebooks=function(y){var C=new f["default"];
v.notebookRequest(y+"/admin/notebooks","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(F){C.resolve(F)},function(F){C.reject({error:F})});return C};v.getNotebookServerDirectories=function(y){var C=new f["default"];v.notebookRequest(y+"/admin/system/directories","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(F){C.resolve(F)},function(F){C.resolve({error:F})});return C};v.deleteDataDirectory=function(y,C){var F=new f["default"];v.notebookRequest(y+"/admin/system/directories/"+
C+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){F.resolve(x)},function(x){F.resolve({error:x})});return F};v.deleteNotebookRuntime=function(y,C){var F=new f["default"];v.notebookRequest(y+"/admin/notebooks/runtimes/"+C+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){F.resolve(x)},function(x){F.resolve({error:x})});return F};v.getAllContainers=function(y){var C=new f["default"],F={allUsers:c["default"].userRole.isAdmin()};
v.notebookRequest(y+"/admin/system/containers","GET",F,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){C.resolve(x)},function(x){C.resolve({error:x})});return C};v.terminateContainer=function(y,C){var F=new f["default"];v.notebookRequest(y+"/admin/system/containers/"+C+"/terminateContainer","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){F.resolve(x)},function(x){F.resolve({error:x})});return F};v.getNotebookServerLogs=function(y,C){var F=new f["default"];v.notebookRequest(y+
"/admin/logs/query","GET",C,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){F.resolve(x)},function(x){F.resolve({error:x})});return F};v.deleteNotebookServerLogs=function(y){var C=new f["default"];v.notebookRequest(y+"/admin/logs/clean","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(F){C.resolve(F)},function(F){C.reject({error:F})});return C};v.createNotebookRuntimeProperties=function(y,C,F){void 0===F&&(F=null);F=F||C.value;y=y.filter(function(x){return x.id===F})[0];
return JSON.stringify({notebookRuntimeName:y.name,notebookRuntimeVersion:y.version})};v.formatNotebookRuntimeVersion=function(y){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[y]||y};v.showRuntimeInfo=function(y,C,F){var x=F.target;"runtime-button"===(null===x||void 0===x?void 0:x.name)&&(x.disabled=!0);F.stopPropagation();F.preventDefault();y=y||d["default"].get(F.currentTarget,"data-runtime-name");C=C||d["default"].get(F.currentTarget,"data-runtime-version");
var u=y+(C?" - "+v.formatNotebookRuntimeVersion(C):""),w=h["default"].createSpecifiedDialog(t["default"]);e["default"].add(w._dialog.domNode,"notebook__runtime-info-dialog");v.getNotebookRuntimeInfo(y,C).then(function(A){A=v.buildRuntimeInfoTable(A,u);w.show({title:u,content:A})},function(A){w.show({title:z["default"].generalDlg.errorDlgTitle,message:z["default"].notebookViewer.tabContent.info.runtimeInfoError})});l["default"].once(w,"hide",function(){w.destroyRecursive();"runtime-button"===(null===
x||void 0===x?void 0:x.name)&&(x.disabled=!1)})};v.buildRuntimeInfoTable=function(y,C){var F=g["default"].create("div",null);if((y.libraries||[]).length){g["default"].create("p",{innerHTML:b["default"].substitute(z["default"].notebookViewer.tabContent.info.runtimeMessage,[C])},F);var x=g["default"].create("table",{"class":"table"},F),u=g["default"].create("thead",null,x);u=g["default"].create("tr",null,u);g["default"].create("th",{innerHTML:z["default"].notebookViewer.tabContent.info.name},u);g["default"].create("th",
{innerHTML:z["default"].notebookViewer.tabContent.info.version},u);var w=g["default"].create("tbody",null,x);y.libraries.forEach(function(A){var E=g["default"].create("tr",null,w);g["default"].create("td",{innerHTML:A.name},E);g["default"].create("td",{innerHTML:A.version},E)})}else g["default"].create("p",{innerHTML:b["default"].substitute(z["default"].notebookViewer.tabContent.info.runtimeMessageNoManifest,[C])},F);return F.outerHTML};v.getContainerLogs=function(y,C){return v.notebookRequest(y+
"/admin/system/containers/"+C+"/logs","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};v.getContainerInformation=function(y,C){var F=new f["default"],x={useJsonFormatParam:!0,useCredentials:!0};q["default"]({containerInfo:v.notebookRequest(y+"/admin/system/containers/"+C,"GET",null,x),containerStats:v.notebookRequest(y+"/admin/system/containers/"+C+"/statistics","GET",null,x)}).then(function(u){F.resolve(u)},function(u){F.reject(u)});return F};v.createRuntimeSelect=function(y,C,F,x){void 0===
x&&(x=!1);y=y||[];y.sort(function(A,E){return E.esriProvidedRuntime-A.esriProvidedRuntime});var u=c["default"].userRole.canCreateAdvancedNotebooks();u||(y=y.filter(function(A){return!A.requiresAdvancedPrivileges}));var w={esriProvided:0,custom:0};y.forEach(function(A){var E={value:x?v.createNotebookRuntimeProperties(y,null,A.id):A.id,innerHTML:A.name+(A.version?" - "+v.formatNotebookRuntimeVersion(A.version):"")};v.formatNotebookRuntimeVersion(C)!==v.formatNotebookRuntimeVersion(A.version)&&A.esriProvidedRuntime||
(A.esriProvidedRuntime?(w.esriProvided++,u?A.requiresAdvancedPrivileges&&!A.supportsGPU&&(E.selected=""):E.selected=""):w.custom++,g["default"].create("option",E,F))});return w};v.showNotebookPreview=function(y,C,F){var x=new f["default"];C=c["default"].restBaseUrl+"content/items/"+C+"/resources/"+F;r["default"].request({url:C,content:{"request.preventCache":+new Date}},{useProxy:r["default"].shouldUseProxy(C)}).then(function(u){if(u.html){var w=y.contentWindow.document;w.open();w.write(u.html);w.close();
x.resolve({success:!0})}else x.resolve({success:!1,error:u.error})},function(u){x.resolve({success:!1,error:u})});return x};v.canScheduleNotebooks=function(y,C){var F=new f["default"],x="Notebook"===(null===C||void 0===C?void 0:C.type),u=v.notebookServerConfigured();x&&u&&v.getNotebookRuntimes().then(function(w){var A,E,G,H=null===(A=C.properties)||void 0===A?void 0:A.notebookRuntimeName,K=v.formatNotebookRuntimeVersion(null===(E=C.properties)||void 0===E?void 0:E.notebookRuntimeVersion);w=(w||[]).some(function(I){return H===
I.name&&K===v.formatNotebookRuntimeVersion(I.version)&&"1.0"!==K&&"2.0"!==K});(null===(G=null===y||void 0===y?void 0:y.userRole)||void 0===G?0:G.canScheduleNotebooks())&&(null===C||void 0===C?0:C.isOwner)&&w&&document.body.classList.add("can-schedule-notebooks");F.resolve(!0)},function(w){F.resolve(!1)});return F};v.getNotebooksInContainer=function(y,C){return v.notebookRequest(C+"/admin/system/containers/"+y+"/notebooks","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};v.getNotebookDataAccessUrl=
function(y){return r["default"].request({url:c["default"].restBaseUrl+"content/users/"+y+"/generateDirectAccessUrl",content:{storeType:"notebookWorkspace"}},{usePost:!0})};v.getParametersJson=function(y){return new Promise(function(C,F){r["default"].request({url:y}).then(function(x){x=a.__spreadArray(a.__spreadArray([],x.inputs.map(function(u){u.direction="input";return u})),x.outputs.map(function(u){u.direction="output";return u}));x.forEach(function(u,w){u.idx=w});C({initialized:!0,parameters:x})},
function(x){404===x.code?C({initialized:!1,parameters:[]}):F(x)})})};v.checkIfWebToolsPublished=function(y){var C=c["default"].restBaseUrl+"/content/items/"+y+"/relatedItems?relationshipType\x3dNotebook2WebTool";return new Promise(function(F,x){r["default"].request({url:C}).then(function(u){u.error&&x(u.error.message);return 0<u.total?F(u.relatedItems[0]):F(null)},function(u){x(u)})})};v.publishAsWebtool=function(y,C){return v.notebookRequest(y+"/admin/services/createService","POST",C,{useJsonFormatParam:!0,
useCredentials:!0})};v.getOpenNotebookToken=function(){return n["default"]({url:r["default"].getSecureUrl(c["default"].restBaseUrl+"oauth2/platformSelf"),content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":"arcgisonline","X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0}).then(function(y){return y.token},function(){return""})};v.notebookRequest=function(y,C,F,x){x=x||{};var u={},w={"X-Requested-With":null},A=c["default"].userInfo?
c["default"].userInfo.credential.token:null;if(null===F||void 0===F?0:F.token)A=F.token,delete F.token;x.useJsonFormatParam&&(u.f="json");"GET"===C&&(u=a.__assign(a.__assign({},u),F));x.bypassCustomHeaders||(w["X-Esri-Authorization"]="Bearer "+A,x.useJsonBody&&(w["Content-Type"]="application/json"));x.contentType&&(w["Content-Type"]=x.contentType);u={data:x.useJsonBody?F?JSON.stringify(F):null:F,method:C,handleAs:"json",headers:Object.keys(w).length?w:null,query:Object.keys(u).length?u:null,preventCache:!1===
x.preventCache?!1:!0,withCredentials:x.bypassCustomHeaders?!1:!0};w={url:y};"multipart/form-data"===x.contentType?w.form=F:w.content=F;return x.useProxy?r["default"].request(w,{usePost:"POST"===C,useProxy:x.useProxy}):m["default"](y,u)};return v}()})},"arcgisonline/sharing/geow/Geow":function(){define("require exports tslib ../../esriGeowConfig ../../telemetry ../../map/utils/deleteMapStorageNoFeedback ../util ./Community ../../pages/utils/storage dojo/Deferred dojo/dom-construct dojo/topic dojo/_base/window esri/IdentityManager ../../pages/utils/queryHandler".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importStar(d);return function(){function h(){}h.generatetoken=function(t,z,v){var y=c["default"].restBaseUrl.replace("http:","https:")+"generatetoken",C=document.domain,F=C.split(".");1<F.length&&(C=F[F.length-
2]+"."+F[F.length-1]);t.referer=C;this._tokenExpiration=t.expiration;r["default"].postJson(t,y,z,v)};h.signup=function(t,z,v){var y=c["default"].restBaseUrl+"community/signup",C=document.domain,F=C.split(".");1<F.length&&(C=F[F.length-2]+"."+F[F.length-1]);t.referer=C;r["default"].postJson(t,y,z,v)};h.signin=function(t,z,v){this.generatetoken(t,h.signInHandler(t.username,z,v),v)};h.signInHandler=function(t,z,v,y,C){var F=new Date,x=new Date(F.setMinutes(F.getMinutes()+(this._tokenExpiration||120)));
r["default"].getJson(r["default"].useSSL(c["default"].restBaseUrl+"community/users/"+t+"?token\x3d"+y.token),function(u){u.culture&&(u.culture=u.culture.toLowerCase());var w={email:u.username,username:u.username,privacy:u.privacy,token:y.token,ssl:y.ssl,culture:u.culture,region:u.region,expires:x.getTime()};u.orgId&&u.role&&(w.accountId=u.orgId,w.role=u.role);c["default"].userInfo=a.__assign(a.__assign({},c["default"].userInfo),w);if(u.preferredView&&null!==u.preferredView)r["default"].userPreferences({contentMode:u.preferredView},
c["default"].contentModeCookieName);else{var A=r["default"].userPreferences(null,c["default"].contentModeCookieName);if(null===A||void 0===A?0:A.contentMode){var E=l["default"].create,G=E("form",{method:"POST"},g["default"].body());E("input",{type:"hidden",name:"preferredView",value:A.contentMode},G);E("input",{type:"hidden",name:"clearEmptyFields",value:"false"},G);f["default"].updateProfile(G,function(){})}}w=a.__assign(a.__assign({},w),u);z&&z(w,C);b["default"].publish("onSignIn",[w])},v)};h.signInHandler2=
function(t,z,v){z=c["default"].restBaseUrl+"community/users/"+t.username+"?token\x3d"+t.token;v=new Date;var y=Number(t.expires_in),C=new Date(v.setSeconds(v.getSeconds()+Number(y))),F=t&&!!t.ssl;return r["default"].getJson(r["default"].useSSL(z)).then(h._hasSecurityQuestion.bind(h)).then(function(x){var u,w={email:x.username,username:x.username,privacy:x.privacy,token:t.token,culture:(null===(u=x.culture)||void 0===u?void 0:u.toLowerCase())||"",region:x.region,expires:C&&C.getTime()||null,persistent:t.persist?
!0:void 0,allSSL:F};x.orgId&&x.role&&(w.accountId=x.orgId,w.role=x.role);c["default"].userInfo=a.__assign(a.__assign({},c["default"].userInfo),w);x.preferredView&&r["default"].userPreferences({contentMode:x.preferredView},c["default"].contentModeCookieName);w=a.__assign(a.__assign({},w),x);b["default"].publish("onSignIn",[w]);return w})};h._hasSecurityQuestion=function(t){var z=new q["default"];t.validateUserProfile=!0;if(!t||t.idpUsername||"arcgisonly"!==t.userType&&"both"!==t.userType||!t.validateUserProfile)z.resolve(t);
else return r["default"].request({url:c["default"].restBaseUrl+"community/users/"+t.username+"/forgotPassword",content:{}}).then(function(v){v&&"enterprise"!==v.provider&&-1===v.securityQuestionIdx&&(t.noSecurityQuestion=!0);return t});return z};h.signout=function(t){var z,v,y=null===(z=c["default"].userInfo)||void 0===z?void 0:z.token;z=0===window.location.href.indexOf("http://");c["default"].userInfo=null;c["default"].userPreferences=null;e["default"].destroyCredentials();m["default"].removeSessionStorageItem("portalAppClientId");
m["default"].removeLocalStorageItem("portalAppClientId");n["default"]().then(function(){b["default"].publish("onSignOut",[])});var C;t&&(C={client_id:"arcgisonline",redirect_uri:t});y&&c["default"].self&&z&&(c["default"].self.isPortal||"enterprise"===(null===(v=c["default"].self.user)||void 0===v?void 0:v.provider))&&(C=a.__assign(a.__assign({},C||{}),{token:y}));t=t||window.location.href;t=r["default"].getSecureUrl(c["default"].restBaseUrl+"oauth2/signout");window.location.href=""+t+(C?"?"+d.objectToQuery(C):
"")};h.getSharedCookie=function(){var t=e["default"],z={};t&&(t=(t._getAllCookies("esri_auth")||[]).map(function(v){return JSON.parse(v)}).filter(function(v){return!v.portalApp}),z=(null===t||void 0===t?0:t.length)?t.shift():{});return z};h._logCookieChange=function(t,z){var v=k["default"].init({config:t});!this._cookieChangeLogged&&(null===v||void 0===v?0:v.logEvent)&&(this._cookieChangeLogged=!0,v.logEvent({category:"cookie",label:"Organization changed",details:z?"Yes":"No"}))};h.setCookies=function(t,
z){t.isPortal||c["default"].isDebug||!t.urlKey||-1!==window.location.hostname.toLowerCase().indexOf(t.urlKey.toLowerCase())||z&&"arcgisonline"!==z||(window.location.href=window.location.href.replace(window.location.hostname,t.urlKey+"."+t.customBaseUrl))};return h}()})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(D,B,a,c,k){Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);k=a.__importDefault(k);
D=function(){function n(){}n.init=function(r,f){var m;if(this._instance)return this._instance;this._envCredentials=JSON.parse(atob(c["default"].telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==JSON.stringify("{}")){var q=new k["default"]({disabled:!(c["default"].usageTrackingEnabled&&!r.disabled&&!r.config.isPortal),portal:r.config,amazon:this._getAmazonCredentials(r)});"logPageView"in r&&!0!==r.logPageView||q.logPageView(null===(m=null===window||void 0===window?void 0:
window.location)||void 0===m?void 0:m.href);return this._instance=q}};n._getAmazonCredentials=function(r){var f=this._getEnvironment(r.config.portalHostname);return{userPoolID:this._envCredentials[f].userPoolID,app:{name:r.name||"Arcgis Online",id:this._envCredentials[f].appId,version:r.config.currentVersion||"5.2"}}};n._getEnvironment=function(r){r=r.replace("www.","");return"arcgis.com"===r&&"production"||"qaext.arcgis.com"===r&&"qa"||"dev"};return n}();B["default"]=D})},"telemetry/telemetry.dojo.min":function(){define(function(){function D(X,
Z){var P=new XMLHttpRequest;P.addEventListener("load",function(){Z(P.responseText)});P.open(X.method,X.url);Object.keys(X.headers).forEach(function(da){P.setRequestHeader(da,X.headers[da])});P.send(X.body)}function B(X,Z){var P=C.get(A);if(P&&Date.now()/1E3<P.Expiration)return Z(P);a(X,function(da){C.set(A,da);Z(da)})}function a(X,Z){var P=w({},E);P.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";P.body=JSON.stringify({IdentityPoolId:X});D(P,function(da){c(JSON.parse(da),Z)})}function c(X,
Z){var P=w({},E);P.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";P.body=JSON.stringify({IdentityId:X.IdentityId});D(P,function(da){da=JSON.parse(da);Z(da.Credentials)})}function k(){var X=void 0,Z=C.get(H);var P=((!Z||Date.now()>Z.expiration)&&(X=!0,Z={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),Z.expiration=Date.now()+G,C.set(H,Z),X&&(Z["new"]=!0),Z);Z=C.get(K);X=(Z||(Z=n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+
n()+n()+n(),C.set(K,Z)),Z);return{session:P,id:X}}function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function r(X,Z){var P={host:Z.uri.host,"content-type":X.config.defaultContentType,accept:X.config.defaultAcceptType,"x-amz-date":m(Z.signDate)};Z.request.method=Z.request.method.toUpperCase();Z.request.body?Z.payload=Z.request.body:Z.request.data&&X.payloadSerializer?Z.payload=X.payloadSerializer(Z.request.data):delete P["content-type"];Z.request.headers=q(P,Object.keys(Z.request.headers||
{}).reduce(function(da,ia){return da[ia.toLowerCase()]=Z.request.headers[ia],da},{}));Z.sortedHeaderKeys=Object.keys(Z.request.headers).sort();Z.request.headers["content-type"]&&(Z.request.headers["content-type"]=Z.request.headers["content-type"].split(";")[0]);"object"===F(Z.request.params)&&q(Z.uri.queryParams,Z.request.params)}function f(X,Z){Z.signedHeaders=Z.sortedHeaderKeys.map(function(P){return P.toLowerCase()}).join(";");Z.canonicalRequest=String(Z.request.method).toUpperCase()+"\n"+encodeURI(Z.uri.path)+
"\n"+Object.keys(Z.uri.queryParams).sort().map(function(P){return encodeURIComponent(P)+"\x3d"+encodeURIComponent(Z.uri.queryParams[P])}).join("\x26")+"\n"+Z.sortedHeaderKeys.map(function(P){return P.toLocaleLowerCase()+":"+Z.request.headers[P]}).join("\n")+"\n\n"+Z.signedHeaders+"\n"+X.hasher.hash(Z.payload?Z.payload:"")}function m(X,Z){var P=X.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return Z?P.substr(0,8):P}function q(X){return[].slice.call(arguments,1).forEach(function(Z){Z&&"object"===
(void 0===Z?"undefined":F(Z))&&Object.keys(Z).forEach(function(P){var da=Z[P];void 0!==da&&(null!==da&&"object"===(void 0===da?"undefined":F(da))?(X[P]=Array.isArray(da)?[]:{},q(X[P],da)):X[P]=da)})}),X}function l(X){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},P=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},da=k().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),session:{id:da.id,startTimestamp:da.startTimestamp},attributes:w({referrer:document.referrer,
hostname:window.location.hostname,path:X||window.location.pathname,pageUrl:X||window.location.pathname,pageName:document.title,previousPageUrl:Z.pageUrl,previousPageName:Z.pageName},b(P)),metrics:g(P)}}function b(X){var Z=w({},X);return delete Z.workflow,M.forEach(function(P){return delete Z[P]}),Object.keys(Z).forEach(function(P){Z[P]="json"===P?Z[P]?JSON.stringify(Z[P]):"null":void 0!==Z[P]?Z[P].toString():"null"}),Z}function g(X){var Z={};return M.forEach(function(P){X[P]&&(Z[P]=X[P])}),Z}function e(){var X=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=arguments[1];return(new L({region:"us-east-1",service:"mobileanalytics",accessKeyId:X.AccessKeyId,secretAccessKey:X.SecretKey,sessionToken:X.SessionToken})).sign(Z)}function d(X,Z,P){var da=k();X=Array.isArray(X)?X:[X];var ia=h(X);B(Z,function(xa){try{ia.headers=e(xa,ia),ia.headers["x-amz-Client-Context"]=JSON.stringify({client:{client_id:da.id,app_title:P.name,app_version_name:P.version||"unknown"},services:{mobile_analytics:{app_id:P.id}}})}catch(Ca){return}D(ia,
function(Ca){})})}function h(X){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:N,method:"POST",body:JSON.stringify({events:X})}}function t(X){window.ga&&window.ga(function(){X(window.ga.getAll())})}function z(X,Z){return y({hitType:"pageview",page:X||window.location.pathname},Z,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}function v(X){return y({hitType:"event",eventCategory:X.category||"none",eventAction:X.action,
eventLabel:X.label},X,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function y(X,Z,P,da){return Object.keys(P).forEach(function(ia){X["dimension"+P[ia]]=Z[ia]}),Object.keys(da).forEach(function(ia){X["metric"+da[ia]]=Z[ia]}),X}var C={storage:{},memory:!0,get:function(X){var Z=void 0;try{Z=window.localStorage&&window.localStorage.getItem(X)||this.storage[X]}catch(P){Z=this.storage[X]}if(Z)try{return JSON.parse(Z)}catch(P){}},set:function(X,
Z){Z=JSON.stringify(Z);try{window.localStorage.setItem(X,Z)}catch(P){this.memory||(this.memory=!0),this.storage[X]=Z}},"delete":function(X){try{window.localStorage.removeItem(X)}catch(Z){this.memory||(this.memory=!0),delete this.storage[X]}}},F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},x=function(X,Z){if(!(X instanceof Z))throw new TypeError("Cannot call a class as a function");
},u=function(){function X(Z,P){for(var da=0;da<P.length;da++){var ia=P[da];ia.enumerable=ia.enumerable||!1;ia.configurable=!0;"value"in ia&&(ia.writable=!0);Object.defineProperty(Z,ia.key,ia)}}return function(Z,P,da){return P&&X(Z.prototype,P),da&&X(Z,da),Z}}(),w=Object.assign||function(X){for(var Z=1;Z<arguments.length;Z++){var P=arguments[Z],da;for(da in P)Object.prototype.hasOwnProperty.call(P,da)&&(X[da]=P[da])}return X},A="TELEMETRY_COGNITO_CREDENTIALS",E={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",
headers:{"Content-type":"application/x-amz-json-1.1"}},G=18E5,H="TELEMETRY_SESSION",K="TELEMETRY_CLIENT_ID",I=function(X,Z){var P={},da=P.lib={},ia=function(){},xa=da.Base={extend:function(ya){ia.prototype=this;var ta=new ia;return ya&&ta.mixIn(ya),ta.hasOwnProperty("init")||(ta.init=function(){ta.$super.init.apply(this,arguments)}),ta.init.prototype=ta,ta.$super=this,ta},create:function(){var ya=this.extend();return ya.init.apply(ya,arguments),ya},init:function(){},mixIn:function(ya){for(var ta in ya)ya.hasOwnProperty(ta)&&
(this[ta]=ya[ta]);ya.hasOwnProperty("toString")&&(this.toString=ya.toString)},clone:function(){return this.init.prototype.extend(this)}},Ca=da.WordArray=xa.extend({init:function(ya,ta){ya=this.words=ya||[];this.sigBytes=void 0!=ta?ta:4*ya.length},toString:function(ya){return(ya||Ma).stringify(this)},concat:function(ya){var ta=this.words,pa=ya.words,Aa=this.sigBytes;if(ya=ya.sigBytes,this.clamp(),Aa%4)for(var T=0;T<ya;T++)ta[Aa+T>>>2]|=(pa[T>>>2]>>>24-T%4*8&255)<<24-(Aa+T)%4*8;else if(65535<pa.length)for(T=
0;T<ya;T+=4)ta[Aa+T>>>2]=pa[T>>>2];else ta.push.apply(ta,pa);return this.sigBytes+=ya,this},clamp:function(){var ya=this.words,ta=this.sigBytes;ya[ta>>>2]&=4294967295<<32-ta%4*8;ya.length=X.ceil(ta/4)},clone:function(){var ya=xa.clone.call(this);return ya.words=this.words.slice(0),ya},random:function(ya){for(var ta=[],pa=0;pa<ya;pa+=4)ta.push(4294967296*X.random()|0);return new Ca.init(ta,ya)}}),Fa=P.enc={},Ma=Fa.Hex={stringify:function(ya){var ta=ya.words;ya=ya.sigBytes;for(var pa=[],Aa=0;Aa<ya;Aa++){var T=
ta[Aa>>>2]>>>24-Aa%4*8&255;pa.push((T>>>4).toString(16));pa.push((15&T).toString(16))}return pa.join("")},parse:function(ya){for(var ta=ya.length,pa=[],Aa=0;Aa<ta;Aa+=2)pa[Aa>>>3]|=parseInt(ya.substr(Aa,2),16)<<24-Aa%8*4;return new Ca.init(pa,ta/2)}},Sa=Fa.Latin1={stringify:function(ya){var ta=ya.words;ya=ya.sigBytes;for(var pa=[],Aa=0;Aa<ya;Aa++)pa.push(String.fromCharCode(ta[Aa>>>2]>>>24-Aa%4*8&255));return pa.join("")},parse:function(ya){for(var ta=ya.length,pa=[],Aa=0;Aa<ta;Aa++)pa[Aa>>>2]|=(255&
ya.charCodeAt(Aa))<<24-Aa%4*8;return new Ca.init(pa,ta)}},Ba=Fa.Utf8={stringify:function(ya){try{return decodeURIComponent(escape(Sa.stringify(ya)))}catch(ta){throw Error("Malformed UTF-8 data");}},parse:function(ya){return Sa.parse(unescape(encodeURIComponent(ya)))}},ca=da.BufferedBlockAlgorithm=xa.extend({reset:function(){this._data=new Ca.init;this._nDataBytes=0},_append:function(ya){"string"==typeof ya&&(ya=Ba.parse(ya));this._data.concat(ya);this._nDataBytes+=ya.sigBytes},_process:function(ya){var ta=
this._data,pa=ta.words,Aa=ta.sigBytes,T=this.blockSize,ea=Aa/(4*T);ea=ya?X.ceil(ea):X.max((0|ea)-this._minBufferSize,0);if(ya=ea*T,Aa=X.min(4*ya,Aa),ya){for(var na=0;na<ya;na+=T)this._doProcessBlock(pa,na);na=pa.splice(0,ya);ta.sigBytes-=Aa}return new Ca.init(na,Aa)},clone:function(){var ya=xa.clone.call(this);return ya._data=this._data.clone(),ya},_minBufferSize:0});da.Hasher=ca.extend({cfg:xa.extend(),init:function(ya){this.cfg=this.cfg.extend(ya);this.reset()},reset:function(){ca.reset.call(this);
this._doReset()},update:function(ya){return this._append(ya),this._process(),this},finalize:function(ya){return ya&&this._append(ya),this._doFinalize()},blockSize:16,_createHelper:function(ya){return function(ta,pa){return(new ya.init(pa)).finalize(ta)}},_createHmacHelper:function(ya){return function(ta,pa){return(new ua.HMAC.init(ya,pa)).finalize(ta)}}});var ua=P.algo={};return P}(Math);!function(X){var Z=I.lib,P=Z.WordArray,da=Z.Hasher;Z=I.algo;for(var ia=[],xa=[],Ca=function(ya){return 4294967296*
(ya-(0|ya))|0},Fa=2,Ma=0;64>Ma;){a:{var Sa=Fa;for(var Ba=X.sqrt(Sa),ca=2;ca<=Ba;ca++)if(!(Sa%ca)){Sa=!1;break a}Sa=!0}Sa&&(8>Ma&&(ia[Ma]=Ca(X.pow(Fa,.5))),xa[Ma]=Ca(X.pow(Fa,1/3)),Ma++);Fa++}var ua=[];Z=Z.SHA256=da.extend({_doReset:function(){this._hash=new P.init(ia.slice(0))},_doProcessBlock:function(ya,ta){for(var pa=this._hash.words,Aa=pa[0],T=pa[1],ea=pa[2],na=pa[3],V=pa[4],Ia=pa[5],Ja=pa[6],Da=pa[7],W=0;64>W;W++){if(16>W)ua[W]=0|ya[ta+W];else{var oa=ua[W-15],ra=ua[W-2];ua[W]=((oa<<25|oa>>>7)^
(oa<<14|oa>>>18)^oa>>>3)+ua[W-7]+((ra<<15|ra>>>17)^(ra<<13|ra>>>19)^ra>>>10)+ua[W-16]}oa=Da+((V<<26|V>>>6)^(V<<21|V>>>11)^(V<<7|V>>>25))+(V&Ia^~V&Ja)+xa[W]+ua[W];ra=((Aa<<30|Aa>>>2)^(Aa<<19|Aa>>>13)^(Aa<<10|Aa>>>22))+(Aa&T^Aa&ea^T&ea);Da=Ja;Ja=Ia;Ia=V;V=na+oa|0;na=ea;ea=T;T=Aa;Aa=oa+ra|0}pa[0]=pa[0]+Aa|0;pa[1]=pa[1]+T|0;pa[2]=pa[2]+ea|0;pa[3]=pa[3]+na|0;pa[4]=pa[4]+V|0;pa[5]=pa[5]+Ia|0;pa[6]=pa[6]+Ja|0;pa[7]=pa[7]+Da|0},_doFinalize:function(){var ya=this._data,ta=ya.words,pa=8*this._nDataBytes,Aa=
8*ya.sigBytes;return ta[Aa>>>5]|=128<<24-Aa%32,ta[14+(Aa+64>>>9<<4)]=X.floor(pa/4294967296),ta[15+(Aa+64>>>9<<4)]=pa,ya.sigBytes=4*ta.length,this._process(),this._hash},clone:function(){var ya=da.clone.call(this);return ya._hash=this._hash.clone(),ya}});I.SHA256=da._createHelper(Z);I.HmacSHA256=da._createHmacHelper(Z)}(Math);(function(){var X=I.enc.Utf8;I.algo.HMAC=I.lib.Base.extend({init:function(Z,P){Z=this._hasher=new Z.init;"string"==typeof P&&(P=X.parse(P));var da=Z.blockSize,ia=4*da;P.sigBytes>
ia&&(P=Z.finalize(P));P.clamp();for(var xa=this._oKey=P.clone(),Ca=this._iKey=P.clone(),Fa=xa.words,Ma=Ca.words,Sa=0;Sa<da;Sa++)Fa[Sa]^=1549556828,Ma[Sa]^=909522486;xa.sigBytes=Ca.sigBytes=ia;this.reset()},reset:function(){var Z=this._hasher;Z.reset();Z.update(this._iKey)},update:function(Z){return this._hasher.update(Z),this},finalize:function(Z){var P=this._hasher;return Z=P.finalize(Z),P.reset(),P.finalize(this._oKey.clone().concat(Z))}})})();var J={region:"eu-west-1",service:"execute-api",defaultContentType:"application/json",
defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(X){return JSON.stringify(X)}},uriParserFactory:function(){function X(P){return/^\??(.*)$/.exec(P)[1].split("\x26").reduce(function(da,ia){return ia=/^(.+)=(.*)$/.exec(ia),ia&&(da[ia[1]]=ia[2]),da},{})}var Z=document?document.createElement("a"):{};return function(P){return Z.href=P,{protocol:Z.protocol,host:Z.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==Z.pathname.charAt(0)?"/":"")+Z.pathname,queryParams:X(Z.search)}}},
hasherFactory:function(){return{hash:function(X,Z){Z=q({hexOutput:!0,textInput:!0},Z);var P=I.SHA256(X);return Z.hexOutput?P.toString(I.enc.Hex):P},hmac:function(X,Z,P){P=q({hexOutput:!0,textInput:!0},P);X=I.HmacSHA256(Z,X,{asBytes:!0});return P.hexOutput?X.toString(I.enc.Hex):X}}}},L=function(){function X(Z){x(this,X);this.config=q({},J,Z);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=this.config.uriParserFactory();this.hasher=this.config.hasherFactory();
Z=this.config.accessKeyId;if(void 0===Z||!Z)throw Error("AwsSigner requires AWS AccessKeyID");Z=this.config.secretAccessKey;if(void 0===Z||!Z)throw Error("AwsSigner requires AWS SecretAccessKey");}return u(X,[{key:"sign",value:function(Z,P){var da={request:q({},Z),signDate:P||new Date,uri:this.uriParser(Z.url)};r(this,da);f(this,da);da.credentialScope=[m(da.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");da.stringToSign="AWS4-HMAC-SHA256\n"+m(da.signDate)+"\n"+da.credentialScope+
"\n"+this.hasher.hash(da.canonicalRequest);var ia=this.hasher.hmac,xa=ia(ia(ia(ia("AWS4"+this.config.secretAccessKey,m(da.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,{hexOutput:!1,textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});da.signature=ia(xa,da.stringToSign,{textInput:!1});da.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+da.credentialScope+", SignedHeaders\x3d"+da.signedHeaders+", Signature\x3d"+da.signature;
return{Accept:da.request.headers.accept,Authorization:da.authorization,"Content-Type":da.request.headers["content-type"],"x-amz-date":da.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),X}(),M=["size","duration","position","number","count"],N="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",O=function(){function X(Z){x(this,X);this.name="amazon";w(this,Z);k().session["new"]&&!Z.test&&this.logEvent({eventType:"_session.start"})}return u(X,
[{key:"logPageView",value:function(Z,P){var da=l(Z,this.previousPage,P);d(da,this.userPoolID,this.app);this.previousPage=da.attributes}},{key:"logEvent",value:function(Z){var P=k().session;Z={eventType:Z.eventType||"other",timestamp:(new Date).toISOString(),session:{id:P.id,startTimestamp:P.startTimestamp},attributes:w({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},b(Z)),metrics:g(Z)};d(Z,this.userPoolID,this.app)}}]),X}(),Y=function(){function X(){var Z=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};x(this,X);this.name="google";w(this,Z)}return u(X,[{key:"logPageView",value:function(Z,P){var da=z(Z,P,this.dimensions,this.metrics);t(function(ia){ia.forEach(function(xa){xa.send(da)})})}},{key:"logEvent",value:function(Z){var P=v(Z,this.dimensions,this.metrics);t(function(da){da.forEach(function(ia){ia.send(P)})})}}]),X}(),ba=function(X){if(X)return I.SHA256(X).toString(I.enc.Hex)},ha="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),
U=function(){var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=X.portal||{};return!X.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===Z.eueiEnabled||!1!==Z.eueiEnabled)&&(!(!Z.eueiEnabled||!Z.user||Z.user.orgId!==Z.id)||!(!Z.user||Z.user.orgId||"US"!==Z.ipCntryCode)||!Z.user&&"US"===Z.ipCntryCode||!(0<Object.keys(Z).length))};return function(){function X(Z){x(this,X);try{(this.trackers=[],this.workflows={},this.test=Z.test,this.debug=Z.debug,this.disabled=!U(Z),
Z.portal&&Z.portal.user)?this.setUser(Z.portal.user,(Z.portal.subscriptionInfo||{}).type):Z.user&&this.setUser(Z.user),this.disabled||this._initTrackers(Z)}catch(P){this.disabled=!0}}return u(X,[{key:"_initTrackers",value:function(Z){if(Z.amazon){var P=new O(Z.amazon);this.trackers.push(P)}Z.google&&(Z=new Y(Z.google),this.trackers.push(Z))}},{key:"setUser",value:function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Public";
this.user=Z="string"==typeof Z?{username:Z}:Z;this.user.accountType=P;var da=void 0;if(Z.email&&Z.email.split){var ia=Z.email.split("@")[1];da=0<ha.filter(function(xa){return ia===xa}).length}(da||-1<["In House","Demo and Marketing"].indexOf(P))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(Z){var P=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(da){try{da.logPageView(Z,
P)}catch(ia){}}),!0):P}},{key:"logEvent",value:function(){var Z=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?Z:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(P){try{P.logEvent(Z)}catch(da){}}),!0)}},{key:"logError",value:function(){var Z=w({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(Z)}},{key:"startWorkflow",value:function(Z){var P=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},da={name:Z,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(da);P=w({name:Z,step:"start"},P);return this._logWorkflow(P),da}},{key:"stepWorkflow",value:function(Z,P){var da=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};da=w({name:Z,step:P,details:"string"==typeof options?da:da.details},da);this._logWorkflow(da)}},{key:"endWorkflow",value:function(Z){var P=w({name:Z,step:"finish"},1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{});this._logWorkflow(P)}},{key:"cancelWorkflow",value:function(Z){var P=w({name:Z,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(P)}},{key:"getWorkflow",value:function(Z){if(Z=C.get("TELEMETRY-WORKFLOW:"+Z)){if(18E5>Date.now()-Z.start)return Z;this._deleteWorkflow(Z)}}},{key:"_saveWorkflow",value:function(Z){C.set("TELEMETRY-WORKFLOW:"+Z.name,Z)}},{key:"_deleteWorkflow",value:function(Z){C["delete"]("TELEMETRY-WORKFLOW:"+Z.name)}},
{key:"_logWorkflow",value:function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Z=this.preProcess(Z);var P=this.getWorkflow(Z.name);P||(this.startWorkflow(Z.name),P=this.getWorkflow(Z.name));P.steps.push(Z.step);P.duration=(Date.now()-P.start)/1E3;-1<["cancel","finish"].indexOf(Z.step)?this._deleteWorkflow(P):this._saveWorkflow(P);Z=w(Z,{eventType:"workflow",category:Z.name,action:Z.step,label:Z.details,duration:P.duration,workflowId:P.workflowId});this.logEvent(Z)}},{key:"preProcess",
value:function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},P={};return this.user&&(P={user:ba(this.user.username),orgId:ba(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),w({},Z,P)}}]),X}()})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["dojo/Deferred"],function(D){return function(){var B=new D;sessionStorage.removeItem("Esri_webmap");B.resolve(!0);
return B}})},"arcgisonline/sharing/geow/Community":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/topic dojo/data/ItemFileReadStore dojo/i18n!../../nls/arcgisonline".split(" "),function(D,B,a,c,k,n,r,f,m){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);return function(){function q(){}q.getProfile=function(l,b,g){if(null===l)return r["default"].publish("globalMessage",
[{message:q.i18n.noUser,type:"error",duration:0}]),null;k["default"].getJson(c["default"].restBaseUrl+"community/users/"+l,b)};q.getProfileThumbnailUrl=function(l,b){if(null!==l.thumbnail){var g=k["default"].getToken();g=null===g||0===g.length?"":"?token\x3d"+g;if(b){var e=c["default"].restBaseUrl;c["default"].useDefaultIdentityStore&&(e=!1!==c["default"].useSSL?k["default"].getSecureUrl(e):e);return e+"community/users/"+l.username+"/info/"+l.thumbnail+g}return c["default"].restBaseUrl+"community/users/"+
l.username+"/info/"+l.thumbnail+g}return null};q.updateProfile=function(l,b,g){g=k["default"].getUser();null===g&&r["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);g=g.username||g.email;g=k["default"].getSecureUrl(c["default"].restBaseUrl)+"community/users/"+g+"/update";k["default"].postForm(l,g,b)};q.updateProfileByUser=function(l,b,g){null!==k["default"].getUser()&&(g=k["default"].getSecureUrl(c["default"].restBaseUrl)+"community/users/"+l.username.value+
"/update",k["default"].postForm(l,g,b))};q.getUserGroups=function(l,b){var g=k["default"].getUser();(g=g&&(g.username||g.email))?g=q.getUserGroupsByUser(g,l,b):(g=new n["default"],g.resolve());return g};q.getUserGroupsByUser=function(l,b,g){l=c["default"].restBaseUrl+"community/users/"+l;var e=new n["default"];k["default"].request({url:l}).then(function(d){e.resolve(d);b&&b(d)},function(d){e.reject(d);g&&g(d)});return e};q.getGroup=function(l,b,g){k["default"].getJson(c["default"].restBaseUrl+"community/groups/"+
l,b,g)};q.createGroup=function(l,b,g){null!==k["default"].getUser()&&k["default"].postForm(l,c["default"].restBaseUrl+"community/createGroup",b,g)};q.updateGroup=function(l,b,g,e){null!==k["default"].getUser()&&k["default"].postForm(b,c["default"].restBaseUrl+"community/groups/"+l+"/update",g,e)};q.deleteGroup=function(l,b,g){null!==k["default"].getUser()&&k["default"].postJson("",c["default"].restBaseUrl+"community/groups/"+l.id+"/delete",b,g)};q.reassignGroup=function(l,b,g,e){null!==k["default"].getUser()&&
k["default"].postJson({targetUsername:b},c["default"].restBaseUrl+"community/groups/"+l.id+"/reassign",g,e)};q.leaveGroup=function(l,b,g){k["default"].postJson("",c["default"].restBaseUrl+"community/groups/"+l.id+"/leave",b,g)};q.inviteToGroup=function(l,b,g){k["default"].getUser()};q.searchGroups=function(l,b,g){k["default"].getJson(c["default"].restBaseUrl+"community/groups?q\x3d"+l,b)};q.searchToStore=function(l){var b=[];(l.results||[]).forEach(function(g,e){var d={id:e,title:q._getGroupTitleLink(g),
owner:g.owner,description:g.description,imageUrl:g.imageUrl,tags:g.keywords,created:g.created};b[e]=d});return new f["default"]({data:{identifier:"id",label:"item",items:b},url:void 0})};q._getGroupTitleLink=function(l){var b=encodeURIComponent(l.title);return'\x3ca href\x3d"group.html?owner\x3d'+l.owner+"\x26title\x3d"+b+'" class\x3d"esriGroupTitle" alt\x3d"'+q.i18n.viewGroupDetails+'" title\x3d"'+q.i18n.viewGroupDetails+"\x3e"+l.title+"\x3c/a\x3e"};q.getNotificationsCount=function(){var l=k["default"].getUser();
if(null!==l){var b;k["default"].getJson(c["default"].restBaseUrl+"community/users/"+(l.username||l.email)+"/notifications").then(function(g){b=((null===g||void 0===g?void 0:g.notifications)||[]).filter(function(e){return e&&"message_received"!==e.type});r["default"].publish("onNotificationCount",[b.length])})}};q.deleteNotifictation=function(l){var b=k["default"].getUser();null!==b&&k["default"].postJson("",c["default"].restBaseUrl+"community/users/"+(b.username||b.email)+"/notifications/"+l+"/delete",
function(g,e){r["default"].publish("onNotificationDelete",[""])}.bind(this))};q.updateUserSecure=function(l,b,g,e){e=c["default"].restBaseUrl;c["default"].useDefaultIdentityStore&&(e=!1!==c["default"].useSSL?k["default"].getSecureUrl(e):e);k["default"].postForm(b,e+"community/users/"+l+"/update",g)};q.getProvisionedListings=function(l,b,g){return k["default"].request({url:c["default"].restBaseUrl+"community/users/"+l+"/provisionedListings",content:{start:b||1,num:g||100}})};q.i18n=a.__assign(a.__assign({},
m["default"].common),m["default"].community);return q}()})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/components/ManageBlockedApps/blocked-apps-service ../../../pages/portal/LicenseInfo ../../../pages/utils/storage ../../util dojo/_base/lang dojo/Deferred dojo/promise/all dojo/sniff esri/request dojo/i18n!../../../nls/arcgisonline".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){c=a.__importDefault(c);k=a.__importDefault(k);
n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);return function(){function d(h,t){var z;this._browserIsEdge=!1;this.appIconPath="/css/images/app-icons/";this.basePath="js/arcgisonline/sharing/dijit";this._portal=h;this._portalUser=this._portal.portalUser||this._portal.user;this._self=c["default"].self||h;this._userProperties=t;this.userToken=
(null===(z=h.credential)||void 0===z?void 0:z.token)||h.token;c["default"].userInfo&&c["default"].userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=f["default"].relativeToExplicitUrl(""+this.basePath+this.appIconPath);this.appSwitcherInConfig=c["default"].appSwitcherConfigItemQuery?!0:null;this.__displayIntro=!1}d.prototype.getApps=function(h){var t=this;h&&h.noStrings||!e["default"]||(this.i18n=a.__assign({},e["default"].appSwitcher),this._clearText=e["default"].configAGOLUtilServices.clear);
return this.queryItems().then(function(z){t.appSwitcherConfig=z.results[0];return t.refreshApps()})};d.prototype.refreshApps=function(h){var t=this;return this._queryItemsAndInitApps(this.appSwitcherConfig,null,null,h).then(function(z){return(new q["default"]).resolve({provisionedListings:z.provisionedListings,willQueryForItems:z.willQueryForItems})}).then(function(z){return t._init(z.provisionedListings,z.willQueryForItems)})};d.prototype.setApps=function(h){if("string"===typeof h)try{h=JSON.parse(h)}catch(z){return(new q["default"]).resolve({success:!1})}if(this._appArraysAreValid(h.primaryApps,
h.secondaryApps)){var t=h.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(h.primaryApps,t.targetUid,t.isNew&&"isNew",t.targetValue||!1),this.populateDataIdAttributes(h.secondaryApps))}return(new q["default"]).resolve({success:!1})};d.prototype._appArraysAreValid=function(h,t){return h&&t&&Array.isArray(h)&&Array.isArray(t)?h.length+t.length>=this._minNumberOfAppsToSave:!1};d.prototype.fetchAndSetupLicenseInfo=function(){var h=this,t=new q["default"];n["default"].isOrgUser=
this._portalUser&&this._portalUser.orgId;n["default"].portal=this._portal;n["default"].portal.user=n["default"].portal.user||this._portalUser;return n["default"].getLicenseInfo().then(function(){h._portalUser&&(c["default"].userInfo=m["default"].mixin(h._portalUser,n["default"]));return t.resolve(!0)})};d.prototype.queryItems=function(h,t){return this.portalQueryItems(c["default"].appSwitcherConfigItemQuery,1)};d.prototype._queryItemsAndInitApps=function(h,t,z,v){var y=this,C;h.itemDataUrl=this.formatUrlWithToken(this._portal.portalUrl+
"content/items/"+h.id+"/data");this._browserInUse=this._getBrowserInUse();this.__changedApp=t&&z?t:null;var F=!this._cookieForQueryingItemsExists(),x=new q["default"];if(null===(C=this._portalUser)||void 0===C?0:C.orgId)return l["default"]({config:g["default"]({url:h.itemDataUrl,content:{f:"json"}}),marketplace:this._getMarketPlaceProvisionedListings(v),preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(function(u){var w;y.userProperties=u.preferences.properties||{};
y.userApps=u.config.appSwitcher;y._self.isPortal||y.userApps.apps.unshift(y._getAgoApp());y.approvedApps=(null===(w=u.customOrgApps.approvedApps)||void 0===w?void 0:w.filter(function(A){return!A.hideForNonPrivilegedMember}))||[];y.userProperties.appLauncher||(F=!1,y.__displayIntro=!0);return x.resolve({provisionedListings:u.marketplace,willQueryForItems:F})})};d.prototype._filterBlockedApps=function(h){var t=this;return h.filter(function(z){var v;return!(null===(v=t._blockedApps)||void 0===v?0:v.some(function(y){return z.itemId&&
z.itemId===y.itemid||z.title&&z.title===y.title}))})};d.prototype._mapAppTitles=function(h){var t=this._self.isPortal,z={"Map Viewer Beta":{value:"Map Viewer"},"Operations Dashboard for ArcGIS":{value:"ArcGIS Dashboards Classic",isPortal:!0},"Workforce for ArcGIS":{value:"ArcGIS Workforce",isPortal:!0}};h.forEach(function(v){Object.keys(z).forEach(function(y){var C=z[y];C.isPortal&&!t||v.uid!==y||(v.uid=C.value)})})};d.prototype._init=function(h,t,z,v){var y=this;return this._getBlockedApps().then(function(){return y._getLicensedApps(h,
t)}).then(function(C){y._appDictionary=C[1];var F=new q["default"];y.userProperties.appLauncher&&(y.userProperties.appLauncher.primary&&y._mapAppTitles(y.userProperties.appLauncher.primary),y.userProperties.appLauncher.secondary&&y._mapAppTitles(y.userProperties.appLauncher.secondary));if(y.userProperties.appLauncher&&y.userProperties.appLauncher.primary&&y.userProperties.appLauncher.secondary)return y._queryAppItemsForChanges(y.approvedApps,t).then(function(){y._newAppDictionary=m["default"].clone(y._appDictionary);
y.primaryApps=y.userProperties.appLauncher.primary.reduce(y._populateAppIdentifiers.bind(y),[]);y.secondaryApps=y.userProperties.appLauncher.secondary.reduce(y._populateAppIdentifiers.bind(y),[]);y.primaryApps=y._filterBlockedApps(y.primaryApps);y.secondaryApps=y._filterBlockedApps(y.secondaryApps);for(var x in y._newAppDictionary)y._newAppDictionary[x].canAccess&&(y._newAppDictionary[x].isNew=!0,y._appDictionary[x]=y._newAppDictionary[x],y.primaryApps.push(y._newAppDictionary[x]));y._minNumberOfAppsToSave=
y.primaryApps.concat(y.secondaryApps).filter(function(u){return u.canAccess}).length;return F.resolve(y._getResponseObject())});y.primaryApps=C[0].slice().sort(function(x,u){return x.label<u.label?-1:1});y.primaryApps=y._filterBlockedApps(y.primaryApps);y.secondaryApps=[];y._minNumberOfAppsToSave=y.primaryApps.filter(function(x){return x.canAccess}).length;return F.resolve(y._getResponseObject())})};d.prototype._getResponseObject=function(){var h=this.i18n?{text:this.getAppLauncherStrings()}:{};return a.__assign(a.__assign({},
h),{primary:this.primaryApps,secondary:this.secondaryApps,ieVersion:this._browserInUse,highContrast:b["default"]("highcontrast"),displayIntro:this.__displayIntro})};d.prototype.getAppLauncherStrings=function(){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,showMore:this.i18n.showMore}};d.prototype._getBlockedApps=function(){var h=this;return l["default"]({blockedApps:k["default"].getBlockedApps(),
blockableApps:k["default"].getBlockableApps()}).then(function(t){if(!t.blockableApps||!t.blockableApps.length)return[];var z=t.blockableApps||[];t=t.blockedApps||[];h._blockedApps=[];t.forEach(function(v){var y=z.filter(function(C){return C.clientid===v})[0];y&&h._blockedApps.push(y)})})};d.prototype._getLicensedApps=function(h,t){for(var z=this,v,y,C={},F={},x=this._getAppExceptions(),u=this._getExcludedProvisionedListings(),w=[],A=new q["default"],E=this.userApps.apps.length,G=function(I){var J=
H.userApps.apps[I];I=J.itemId||J.title;var L=!0,M=null===(v=H._blockedApps)||void 0===v?void 0:v.some(function(N){return J.itemId&&J.itemId===N.itemid||J.title&&J.title===N.title});C[I]=1;F[I]=J;if(M||f["default"].isArcGISEnterpriseOnKubernetes()&&!1===J.supportsKubernetes||x[J.title]&&!x[J.title].hasAccess(J.title))return"continue";if(!(J.privileges&&0!==J.privileges.length||J.isLicensed)||H._portalUser.userLicenseTypeId&&"storytellerut"===H._portalUser.userLicenseTypeId.toLowerCase()&&J.label&&
"storymaps"===J.label.toLowerCase())return F[I].canAccess=!0,w.push(H._modifySystemAppForView(J,I)),"continue";if(0<(null===(y=J.privileges)||void 0===y?void 0:y.length)&&H._portalUser.privileges){for(M=0;M<J.privileges.length;M++)if(0>H._portalUser.privileges.indexOf(J.privileges[M])){L=!1;break}if(!J.isLicensed&&L)return F[I].canAccess=!0,w.push(H._modifySystemAppForView(J,I)),"continue"}if(J.isLicensed&&L)for(L=0;L<h.length;L++)if(I===h[L].itemId||I===h[L].title){F[I].canAccess=!0;w.push(H._modifySystemAppForView(J,
I));break}},H=this,K=0;K<E;K++)G(K);h.forEach(function(I){"Web Mapping Application"===I.type&&!u[I.clientId]&&!C[I.itemId]&&I.url&&I.title&&!C[I.title]&&0>I.typeKeywords.indexOf("hideFromAppSwitcher")&&(I=z._modifyPartnerAppForView(I),F[I.itemId]=I,w.push(I))});return A.resolve([this.approvedApps.map(function(I){var J=a.__assign(a.__assign({},I.appProperties),{itemId:I.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!t});F[I.itemId]=J;return z._modifyWebAppForView(J)}).concat(w),F])};d.prototype._getApprovedApps=
function(h){return this.requestWithAuth(c["default"].restBaseUrl.replace("http://","https://")+"portals/"+this._portalUser.orgId+"/approvedApps",{f:"json",returnAllApps:h})};d.prototype._populateAppIdentifiers=function(h,t,z){var v=this;(z=Object.keys(this._appDictionary).map(function(y){return v._appDictionary[y]}).filter(function(y){return y.itemId===t.uid||y.title===t.uid}).shift())&&!this._appDictionary[t.uid]&&(t.uid=z.itemId||z.title);if(null===z||void 0===z?0:z.hasBeenPopulated)return h;z?
((t.hasChanged||z.hasChanged||!z.canAccess&&!z.ignoreNoAccess)&&this._isAdmin()&&(t.hasChanged||t.ignoreNoAccess||(this.__saveOnLoad=!0),this._appDictionary[t.uid].hasChanged=!0,this._appDictionary[t.uid].ignoreNoAccess=t.ignoreNoAccess),t.isNew&&(this._appDictionary[t.uid].isNew=!0),delete this._newAppDictionary[t.uid]):(z=t,z.canAccess=!1,z.itemId=t.uid,this._appDictionary[t.uid]=z);this._appDictionary[t.uid].hasBeenPopulated=!0;h.push(z);return h};d.prototype.populateDataIdAttributes=function(h,
t,z,v){var y=this;return h.map(function(C,F){var x=y._appDictionary[C],u={label:x.label,uid:C};x.isNew&&(u.isNew=!0);x.hasChanged&&!x.ignoreNoAccess&&(u.hasChanged=!0);t&&C===t&&(h[F-1]===C&&(y.__duplicateValueIndex=F),v?(y._appDictionary[C][z]=v,u[z]=v):(delete y._appDictionary[C][z],delete u[z]));x.canAccess&&x.ignoreNoAccess&&delete u.ignoreNoAccess;return u})};d.prototype._getImgSrcForWebMappingApp=function(h){return h.icon?c["default"].restBaseUrl+"portals/self/resources/"+h.icon+"?token\x3d"+
this.userToken:"https://"+this._self.portalHostname+"/sharing/rest/content/items/"+h.itemId+"/resources/"+h.appSwitcher.image+"?token\x3d"+this.userToken};d.prototype._modifySystemAppForView=function(h,t){var z;h.image?h.image=""+this.imgDir+h.image:h.placeHolderIcon=this.imgDir+"svg-app-icon.svg";0===(null===(z=h.url)||void 0===z?void 0:z.indexOf("../"))&&(h.url=location.protocol+"//"+(this._portal.urlKey?this._portal.urlKey+"."+this._portal.customBaseUrl:this._self.portalHostname)+h.url.substring(2,
h.url.length));delete h.isLicensed;delete h.privileges;h.itemId=t;return h};d.prototype._modifyWebAppForView=function(h){var t,z;(null===(t=h.appSwitcher)||void 0===t?0:t.image)||h.icon?h.image=this._getImgSrcForWebMappingApp(h):h.placeHolderIcon=this.imgDir+"svg-app-circle.svg";h.abbr=(null===(z=h.appSwitcher)||void 0===z?void 0:z.abbr)||h.abbreviation;delete h.abbreviation;delete h.appSwitcher;delete h.approvedApp;delete h.webMappingApp;return h};d.prototype._modifyPartnerAppForView=function(h){var t,
z,v;h.appSwitcher=null===(t=h.properties)||void 0===t?void 0:t.appSwitcher;t=(null===(z=h.appSwitcher)||void 0===z?void 0:z.image)||h.icon;return{abbr:(null===(v=h.appSwitcher)||void 0===v?void 0:v.abbr)||h.abbreviation,itemId:h.itemId,canAccess:!0,webMappingApp:!0,image:t?this._getImgSrcForWebMappingApp(h):null,label:h.title||h.label,url:h.url,placeHolderIcon:h.placeHolderIcon||this.imgDir+"svg-app-circle.svg"}};d.prototype._saveAppOrderToUserProperties=function(h,t){this.userProperties.appLauncher||
(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(h)||JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(t))return this.userProperties.appLauncher.primary=h,this.userProperties.appLauncher.secondary=t,this._updateUserProperties(this.userProperties)};d.prototype._getUserProperties=function(){var h=new q["default"];return this._userProperties?(this._userProperties.properties||(this._userProperties={properties:this._userProperties}),
h.resolve(this._userProperties)):this.requestWithAuth(c["default"].restBaseUrl+"community/users/"+this._portalUser.username+"/properties",{f:"json"})};d.prototype._getMarketPlaceProvisionedListings=function(h){var t,z=new q["default"];return!h&&(null===(t=c["default"].userInfo)||void 0===t?0:t.provisionedListings)?(z.resolve(c["default"].userInfo.provisionedListings),z):this.fetchAllResources(this._portal.portalUrl+"community/users/"+this._portalUser.username+"/provisionedListings",{returnAppClientIds:!0,
returnAllProvisions:!0},"provisionedListings")};d.prototype._updateUserProperties=function(h){var t=c["default"].restBaseUrl+"community/users/"+this._portalUser.username+"/setProperties",z=this._portalUser?{token:this.userToken}:{};h=a.__assign({f:"json",properties:JSON.stringify(h)},z);return g["default"]({url:t,content:h},{usePost:!0})};d.prototype._getExcludedProvisionedListings=function(){var h={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,
survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&(h.arcgisonline=1);return h};d.prototype._getAppExceptions=function(){var h=this;return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},
"ArcGIS Experience Builder":{hasAccess:function(t){return h._isInPortalConfig(t)}},"ArcGIS StoryMaps":{hasAccess:function(t){return h._isInPortalConfig(t)}},"ArcGIS QuickCapture Web Designer":{hasAccess:function(t){return h._isInPortalConfig(t)&&h._hasLicense("arcgisWebApps")}},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(t){return c["default"].showCreateDashboard&&
h._isInPortalConfig(t)&&h._hasLicense("dashboards")}},"ArcGIS Solutions":{hasAccess:function(t){return!h._self.isPortal||h._isInPortalConfig(t)}},"ArcGIS Workforce":{hasAccess:function(t){return!h._self.isPortal||h._isInPortalConfig(t)}},"Deep Learning Studio":{hasAccess:function(t){return!h._self.isPortal||h._isInPortalConfig(t)}},"Map Viewer":{hasAccess:function(t){return h._userHasAccessToMapViewer()&&h._isInPortalConfig("ArcGIS Map Viewer")}},"Map Viewer Classic":{hasAccess:function(t){return h._hasLicense("arcgisWebApps")&&
h._isInPortalConfig("ArcGIS Map Viewer Classic")}},"Operations Dashboard for ArcGIS":{hasAccess:function(){return h._hasLicense("opsdashboard")&&h._isInPortalConfig("ArcGIS Dashboards Classic")}},"ArcGIS Dashboards Classic":{hasAccess:function(t){return h._hasLicense("opsdashboard")&&h._isInPortalConfig(t)}},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Scene Viewer":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},
"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}};d.prototype._hasAccessToNotebooks=function(h){return this._notebookServerConfigured()&&this._isInPortalConfig(h)&&this._canCreateNotebooks()};d.prototype._notebookServerConfigured=function(){return this._self.isPortal?c["default"].notebookServerEnabled&&this._self.supportsHostedNotebooks:c["default"].notebookServerEnabled};
d.prototype._canCreateNotebooks=function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(h){return"premium:publisher:createNotebooks"===h}):!1};d.prototype._isInPortalConfig=function(h){return!this._self.isPortal||c["default"].showInAppLauncher&&-1!==c["default"].showInAppLauncher.indexOf(h)};d.prototype._userHasAccessToMapViewer=function(){var h=this._self.isPortal&&this._self.portalProperties&&!1===this._self.portalProperties.newMapViewerEnabled;return c["default"].newMapViewerEnabled&&
!h&&this._hasLicense("arcgisWebApps")};d.prototype._userHasAccessToOpenData=function(){var h;return(null===(h=this._self)||void 0===h?0:h.portalProperties)&&(!this._self.portalProperties.openData||this._self.portalProperties.openData&&!this._self.portalProperties.openData.enabled)?!1:this._hasLicense("HubforArcGIS")};d.prototype._userHasAccessToAnalyticsForIoT=function(){var h=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],
t=(this._portalUser.privileges||[]).some(function(v){return-1<h.indexOf(v)}),z=this._hasLicense("velocity");return t&&z};d.prototype._userHasAccessToSites=function(h){return this._isInPortalConfig(h)&&this._hasLicense("HubforArcGIS")};d.prototype._userHasAccessToCollectorWeb=function(h){return this._isInPortalConfig(h)};d.prototype._userHasAccessToOrthoMaker=function(){var h,t;return(null===(t=null===(h=this._self)||void 0===h?void 0:h.helperServices)||void 0===t?void 0:t.rasterAnalytics)&&this._self.helperServices.orthoMapping&&
this._isInPortalConfig("Ortho Maker")};d.prototype._userHasAccessToTrackViewer=function(){var h,t;return(null===(t=null===(h=this._self)||void 0===h?void 0:h.helperServices)||void 0===t?void 0:t.locationTracking)&&c["default"].trackViewerEnabled&&this._isInPortalConfig("Track Viewer")};d.prototype._hasLicense=function(h){var t;return(null===(t=c["default"].userInfo)||void 0===t?0:t.isLicensed)?c["default"].userInfo.isLicensed(h):!0};d.prototype._getAgoApp=function(){return{image:"arcgis-online.png",
label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?""+c["default"].baseUrl+this.userProperties.landingPage.url:this._portalUser.isOrgAdmin?"organization.html":"index.html"}};d.prototype._getOriginOfUrl=function(h){h=window.location;return h.protocol+"//"+h.hostname+(h.port?":"+h.port:"")};d.prototype._getNewAppIconFromAppIdAndProperties=function(h,t){if(!this._appDictionary[h]){var z=a.__assign(a.__assign({},JSON.parse(t)),{itemId:h,webMappingApp:!0,approvedApp:!0,canAccess:!0,
isNew:!0});return this._appDictionary[h]=z}};d.prototype._queryAppItemsForChanges=function(h,t){var z=this,v=new q["default"],y=c["default"].restBaseUrl+"search?";if(!t||!h||!h.length)return v.resolve({success:!0});y=y+"f\x3djson\x26num\x3d100\x26q\x3d id:("+(h.map(function(C){return'"'+C.itemId+'"'}).join(" OR ")+")");return this.requestWithAuth(y,{f:"json"}).then(function(C){var F;0<(null===(F=C.results)||void 0===F?void 0:F.length)&&C.results.forEach(function(x){var u=z._appDictionary[x.id];u.canAccess=
1;u.hasChanged=u.url!==x.url?x.url:0});return v.resolve({success:!0})})};d.prototype._getAppsFromLocalStorage=function(){if(!this.__localStorageIsAvailable)return!1;var h=localStorage.getItem("APSW-primary"),t=localStorage.getItem("APSW-secondary");return h?{primaryApps:h,secondaryApps:t}:!1};d.prototype._saveAppsToLocalStorage=function(h,t){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(h)),localStorage.setItem("APSW-secondary",JSON.stringify(t)))};d.prototype._cookieForQueryingItemsExists=
function(){var h=r["default"].getCookie("APSW-query",!0);if((null===h||void 0===h?void 0:h.expires)>(new Date).setHours((new Date).getHours()))return!0;h={expires:(new Date).setHours((new Date).getHours()+5)};r["default"].setCookie("APSW-query",h,{path:"/",domain:document.domain,sameSite:"Strict"},!0);return!1};d.prototype.requestWithAuth=function(h,t){t=this.userToken?a.__assign(a.__assign({},t),{token:this.userToken}):t;return g["default"]({url:h,content:t})};d.prototype.fetchAllResources=function(h,
t,z){var v=new q["default"],y=1,C=[],F,x,u,w,A={f:"json",token:this.userToken};t=t?a.__assign(a.__assign({},t),A):A;z=z||"results";t.start=y;t.num||(t.num=100);g["default"]({url:h,content:t}).then(function(E){if(E&&E[z]){C=C.concat(E[z]);y=E.nextStart;F=E.total-C.length;x=Math.ceil(F/100);u=[];for(w=0;w<x;w++)t.start=y+100*w,u.push(f["default"].request({url:h,content:t}));l["default"](u).then(function(G){G.forEach(function(H){C=C.concat(H[z])});v.resolve(C)},function(G){v.reject(G)})}else v.resolve(C)},
function(E){v.reject(E)});return v};d.prototype._isAdmin=function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||"account_admin"===this._portalUser.role)};d.prototype.portalQueryItems=function(h,t){var z={num:t||10,start:0,sortField:"title",sortOrder:"asc",f:"json",q:h},v="";v=this._portal.urlKey?"https://"+this._portal.urlKey+"."+this._portal.customBaseUrl+"/sharing/rest/search":this._portal.url+"search";return this.requestWithAuth(v,z)};d.prototype.useSSL=function(h,t){if(this._self.isPortal){var z=
this.getLocation(t);if(-1<this._self.portalHostname.toLowerCase().indexOf(z.hostname.toLowerCase())&&z.port&&"80"!==z.port&&"443"!==z.port){var v=z.pathname;v=0===v.indexOf("/")?v:"/"+v;return this._self.allSSL||-1<h.indexOf("https:")?"https://"+z.hostname+(this._self.httpsPort&&"443"!==this._self.httpsPort?":"+this._self.httpsPort:"")+v+z.search:"http://"+z.hostname+(this._self.httpPort&&"80"!==this._self.httpPort?":"+this._self.httpPort:"")+v+z.search}}return-1!==h.indexOf("https:")||this._self.allSSL?
t.replace("http:","https:"):t};d.prototype.getLocation=function(h){var t=document.createElement("a");t.href=h;return{protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}};d.prototype.formatUrlWithToken=function(h){var t=this.userToken;return-1!==h.indexOf("null")?null:this.useSSL(window.location.protocol,t?""+h+(-1!==h.indexOf("?")?"\x26":"?")+"token\x3d"+t:h)};d.prototype._checkIfLocalStorageIsAvailable=function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage",
"1"),localStorage.removeItem("testLocalStorage"),!0}catch(h){return!1}};d.prototype._getBrowserInUse=function(){return 10>=b["default"]("ie")||6<b["default"]("trident")?"ie11":b["default"]("edge")?"edge":null};return d}()})},"dojo/debounce":function(){define([],function(){return function(D,B){var a;return function(){a&&clearTimeout(a);var c=this,k=arguments;a=setTimeout(function(){D.apply(c,k)},B)}}})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);return function(){function y(C,F){this.templateString=t["default"];this.isTroubleshootPage=
this.isSignInPage=!1}y.prototype.postMixInProperties=function(){this.i18n=z["default"].mixin({},e["default"].common);z["default"].mixin(this.i18n,e["default"].siteFooter);z["default"].mixin(this.i18n,e["default"].supportPage.helpLabel)};y.prototype.postCreate=function(){var C=window.location.pathname.toLowerCase();this.isSignInPage=-1!==C.indexOf(c["default"].signin);this.isTroubleshootPage=-1!==C.indexOf("troubleshoot.html");this.addEventListeners()};y.prototype.startup=function(){this._loadLinks()};
y.prototype.refresh=function(){g["default"].destroy(this.id+"_links");g["default"].create("span",{id:this.id+"_links",className:"esriItemLinks"},this.domNode);this._loadLinks()};y.prototype.addEventListeners=function(){this.own(h["default"].subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};y.prototype.handleContactUsLinkUpdate=function(C){var F=b["default"].byId(this.id+"_links"),x=window.location.href,u=!1,w=null;-1<x.indexOf("viewer.html")&&!n["default"].isMobile()&&
-1===x.indexOf("returnUrl")&&(u=!0);w=u?g["default"].create("span",{innerHTML:"\x26nbsp;. "}):g["default"].create("span",{innerHTML:""});v["default"].isDefined(C)||(C={visible:!1,url:""});(x=b["default"].byId(this.id+"_customContactUs"))?(k["default"].showHide(x,C.visible),x.href=C.url):(x=g["default"].create("a",{href:C.url,innerHTML:this.i18n.customContactUs,id:this.id+"_customContactUs","class":C.visible?"footer__contact-us":"footer__contact-us hide"}),C=b["default"].byId(this.id+"_contactEsri"),
v["default"].isDefined(C)?(g["default"].place(x,C,"after"),g["default"].place(w,C,"after")):(0<c["default"].footerLinks.length&&g["default"].place(w,F,"last"),g["default"].place(x,F,"last")))};y.prototype._getTitle=function(C){return-1<(null===C||void 0===C?void 0:C.indexOf("${"))&&-1<C.indexOf("}")?d["default"].substitute(C,{i18n:this.i18n}):C};y.prototype._loadLinks=function(){var C=this;f["default"].getSelf(function(F){var x,u,w,A=r["default"].getUser(),E=F.isPortal,G=b["default"].byId(C.id+"_links"),
H=window.location.href,K=!1,I=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-14));-1<H.indexOf("viewer.html")&&!n["default"].isMobile()&&-1===H.indexOf("returnUrl")&&(K=!0);(c["default"].footerLinks||[]).forEach(function(L){var M="${i18n.legal}"===(null===L||void 0===L?void 0:L.title),N=!!(M&&v["default"].isDefined(A)&&v["default"].isDefined(A.accountId)),O="${i18n.help}"===(null===L||void 0===L?void 0:L.title)||"support.html"===(null===L||void 0===L?void 0:L.url),Y=!(O&&!v["default"].isDefined(A)&&
v["default"].isDefined(F.access)&&"public"===F.access&&(E||!E&&v["default"].isDefined(F.customBaseUrl)));N=!M&&!O||M&&!N||O&&!Y;I&&N&&g["default"].place(I,G,"last");M=C._getTitle(L.title);if(L.url){-1===L.url.indexOf("http")&&-1===L.url.indexOf("mailto:")&&K&&(L.url="support.html"===L.url?F.helpBase||c["default"].baseUrl+L.url:c["default"].baseUrl+L.url);if("${i18n.help}"===L.title||"support.html"===L.url)L.url=F.helpBase;L=g["default"].create("a",{href:L.url,target:"_blank",innerHTML:M});N&&g["default"].place(L,
G,"last")}else E&&"contactUs"===L.type?(N=c["default"].portalName||"ArcGIS.com",O=escape(H),L="mailto:"+L.email,L=g["default"].create("a",{id:C.id+"_contactEsri",href:L+('?subject\x3d"A comment about '+N+'"\x26body\x3d"I have the following comment about the ')+(N+" Web site. %0AReferring page: "+O+' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),innerHTML:M}),g["default"].place(L,G,"last")):"reportAbuse"===
L.type&&(O=escape(H),L="mailto:"+L.email+'?subject\x3d"Concerns about an item"',L=g["default"].create("a",{href:L+('\x26body\x3d"I have concerns about the following. %0AReferring page: '+O+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),innerHTML:M}),g["default"].place(L,G,"last"));I=K?g["default"].create("span",
{innerHTML:"\x26nbsp;. "}):g["default"].create("span",{innerHTML:""})});var J=null!==(w=null===(u=null===(x=F.portalProperties)||void 0===x?void 0:x.links)||void 0===u?void 0:u.contactUs)&&void 0!==w?w:{visible:!1,url:""};(x=b["default"].byId(C.id+"_customContactUs"))?(k["default"].showHide(x,J.visible),x.href=J.url):(x=g["default"].create("a",{href:J.url,innerHTML:C.i18n.customContactUs,id:C.id+"_customContactUs","class":J.visible?"footer__contact-us":"footer__contact-us hide"}),J=b["default"].byId(C.id+
"_contactEsri"),v["default"].isDefined(J)?(g["default"].place(x,J,"after"),g["default"].place(I,J,"after")):(0<c["default"].footerLinks.length&&g["default"].place(I,G,"last"),g["default"].place(x,G,"last")))})};return y=a.__decorate([m["default"](l["default"],q["default"])],y)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),
function(D,B,a,c,k,n,r,f){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);return function(){function m(){this.templateString=f["default"]}return m=a.__decorate([k["default"](r["default"],n["default"],c["default"])],m)}()})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ./dialog/GeneralDlg ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang esri/request ../../pages/utils/queryHandler".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A,E,G,H,K,I){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importDefault(F);
x=a.__importDefault(x);u=a.__importDefault(u);w=a.__importDefault(w);A=a.__importDefault(A);E=a.__importDefault(E);G=a.__importDefault(G);H=a.__importDefault(H);K=a.__importDefault(K);I=a.__importStar(I);return function(){function J(L,M){this.templateString=A["default"];this.widgetsInTemplate=!0;this.i18n=a.__assign(a.__assign(a.__assign({},x["default"].common),x["default"].signUpInternalWidget),{securityQuestions:x["default"].securityQuestions,passwordTooWeak:x["default"].myOrganization.inviteMembers.passwordTooWeak,
usernameTooShort:x["default"].organizationInvite.step2Create.invalid.usernameTooShort,usernameTooLong:x["default"].organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:x["default"].organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:x["default"].organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl=c["default"].baseUrl.replace("https:","http:")+"index.html";this.orgRedirectUrl=c["default"].baseUrl.replace("https:","http:")+
"organization.html";this.isValidUsername=!1;this.accountMode="arcgis"}J.prototype.postCreate=function(){this.inherited(arguments);this.fetchPasswordPolicy()};J.prototype.startup=function(){var L=this;this.inherited(arguments);q["default"].getSelf(function(M){L._portal=new r["default"]({url:c["default"].restBaseUrl,self:u["default"].clone(M)});L._portal.on("load",function(){L.setupPasswordStrength()});G["default"].defaults.io.corsEnabledServers.push(c["default"].DEPLOY_ROOT);G["default"].defaults.io.corsEnabledServers.push("http://"+
location.host);G["default"].defaults.io.corsEnabledServers.push("https://"+location.host);G["default"].defaults.io.proxyUrl=c["default"].proxyUrl;u["default"].mixin(L,I.queryToObject(window.location.search.slice(1)));L._svcUrl=c["default"].restBaseUrl+(c["default"].restBaseUrl.lastIndexOf("/")===c["default"].restBaseUrl.length-1?"":"/");L._communityUri=L._svcUrl+"community/";v["default"].set("pagetitle","innerHTML",L.i18n.signUpInternalTitle);L.setupQuestions();L.loadConnections();L.checkInvitation();
setTimeout(function(){L._firstname.focus()},50);E["default"].subscribe("registerUser",L.registerUser.bind(L));L.adjustNameRows()})};J.prototype.loadConnections=function(){this.own(w["default"](this._firstname,"change",this.validFirstName.bind(this)),w["default"](this._lastname,"change",this.validLastName.bind(this)),w["default"](this._email,"change",this.validEmail.bind(this)),w["default"](this._confirmEmail,"change",this.validConfirmEmail.bind(this)),w["default"](this._username,"change",this.usernameChange.bind(this)),
w["default"](this._pwd,"change",this.validPassword.bind(this)),w["default"](this._pwd,"keyup",this.validPassword.bind(this)),w["default"](this._verifyPwd,"change",this.validVerifyPassword.bind(this)),w["default"](this._identityQuestion,"change",this.identityQuestionChange.bind(this)),w["default"](this._identityAnswer,"change",this.validIdentityAnswer.bind(this)),w["default"](this._form,"submit",this.initiateSignUp.bind(this)),w["default"](this._cancelBtn,"click",this.cancel.bind(this)))};J.prototype.adjustNameRows=
function(){"ja"===C["default"].locale&&y["default"].place("first-name-block","last-name-block","after")};J.prototype.checkInvitation=function(){var L=this;this.invitation&&this.fetchInvitation().then(function(M){L.invitationOrgName=M.account.name},this.fetchInvitationError.bind(this))};J.prototype.setupPasswordStrength=function(){this._strengthMeter=new n["default"]({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};
J.prototype.setupQuestions=function(){var L=this;this.identityQuestions=[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,
name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(M){y["default"].create("option",{value:M.id,innerHTML:M.name},L._identityQuestion)})};J.prototype.fetchPasswordPolicy=function(){var L=this,M=e["default"].getSecureUrl(c["default"].restBaseUrl)+"portals/self/securityPolicy/passwordPolicy";e["default"].request({url:M}).then(function(N){L._passwordPolicy=
!N||N.code||N.messageCode?null:N})};J.prototype.registerUser=function(L){var M=this;L=F["default"].trim(this._firstname.value);var N=F["default"].trim(this._lastname.value),O=F["default"].trim(this._email.value),Y=e["default"].stripHTML(F["default"].trim(this._username.value)),ba=F["default"].trim(this._pwd.value),ha=F["default"].trim(this._identityAnswer.value),U={fullname:"ja"===C["default"].locale?N+" "+L:L+" "+N,firstname:L,lastname:N,email:O,username:Y,password:ba,securityQuestionIdx:this._identityQuestionID,
securityAnswer:ha,invitationId:void 0,provider:void 0};this.invitation&&(U.invitationId=this.invitation,U.provider=this.accountMode);this.signUp(U).then(function(X){null!=X.error&&""!==X.error?(f["default"].disableNode(M._createAccountBtn,!1),v["default"].set(M._createAccountBtn,"innerHTML",M.i18n.createAcc),X.error.messageCode&&"COM_1054"===X.error.messageCode?k["default"].createSpecifiedDialog(l["default"]).show({title:M.i18n.errorTitle,message:M.i18n.error.maxUsers}):M.handleError(X)):M.invitation?
b["default"].signInHandler(U.username,M.acceptInvitation.bind(M,U),M.signInError.bind(M),X):b["default"].signInHandler(U.username,M.signIn.bind(M),M.signInError.bind(M),X)},this.signUpError.bind(this))};J.prototype.signUp=function(L){L=a.__assign({},L);var M=c["default"].restBaseUrl+"community/signup",N=document.domain,O=N.split(".");1<O.length&&(N=O[O.length-2]+"."+O[O.length-1]);L.referer=N;L.f="json";return K["default"]({url:M,content:L,headers:{"X-Esri-Auth-Client-Id":"arcgisonline","X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,
"")}},{disableIdentityLookup:!0,usePost:!0})};J.prototype.signIn=function(){c["default"].self=null;q["default"].getSelf(this.routeUser.bind(this))};J.prototype.routeUser=function(L){var M=e["default"].getUser(),N=new g["default"]({portalUser:L.user||{}}),O=I.queryToObject(window.location.search.slice(1)).returnUrl;if(!L||L.code||L.message)null!==O?window.location.href=O:(M=e["default"].getHttpUrl()+"user.html?newUser\x3dtrue",window.location.href=e["default"].getSecureUrl(M));else{L=L.allSSL;var Y=
e["default"].usePortalSSL();this.redirectUrl=e["default"].getHttpUrl()+"index.html";this.orgRedirectUrl=e["default"].getHttpUrl()+"organization.html";O?(Y=-1<O.indexOf("https:"),window.location.href=L||Y?e["default"].getSecureUrl(O):O):"account_admin"===M.role&&(!c["default"].self.restrictOrganizationPageToAdmin&&N.canViewOrgUsers()||c["default"].self.restrictOrganizationPageToAdmin&&N.isAdmin())?window.location.href=L||Y?e["default"].getSecureUrl(this.orgRedirectUrl):this.orgRedirectUrl:window.location.href=
L||Y?e["default"].getSecureUrl(this.redirectUrl):this.redirectUrl}};J.prototype.acceptInvitation=function(L){var M=this;q["default"].acceptInvitation(this.invitation,function(){M.signIn()},this.acceptFail.bind(this))};J.prototype.initiateSignUp=function(L){var M=this;L&&L.preventDefault();this.validates().then(function(N){N&&(f["default"].disableNode(M._createAccountBtn,!0),v["default"].set(M._createAccountBtn,"innerHTML",M.i18n.creatingAcc),M.registerUser(!0))})};J.prototype.cancel=function(){var L=
""+c["default"].baseUrl.replace("http:","https:")+c["default"].signin;this.invitation&&(L+="?invitation\x3d"+this.invitation);window.location.href=L};J.prototype.fetchInvitationError=function(L){if((null===L||void 0===L?0:L.code)&&L.message&&403===L.code){L="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e";var M=k["default"].createSpecifiedDialog(l["default"]);M.onOkClick=function(){M.hide();window.location.href=""+c["default"].baseUrl.replace("http:",
"https:")+c["default"].signin};M.show({title:this.i18n.notice,message:L})}else(null===L||void 0===L?0:L.code)&&L.message&&400===L.code?(L="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",M=k["default"].createSpecifiedDialog(l["default"]),M.onOkClick=function(){M.hide();window.location.href=""+e["default"].getSecureUrl()+c["default"].signin},M.show({title:this.i18n.notice,message:L})):(null===L||void 0===L?void 0:L.id)===this.invitation?this.invitationOrgName=
L.account.name:this.invitation=null};J.prototype.acceptFail=function(){var L=this,M=k["default"].createSpecifiedDialog(l["default"]);M.onOkClick=function(){M.hide();f["default"].disableNode(L._createAccountBtn,!1);v["default"].set(L._createAccountBtn,"innerHTML",L.i18n.createAcc)};M.show({title:this.i18n.unableToJoin,message:this.i18n.problemJoining})};J.prototype.usernameChange=function(){var L=e["default"].stripHTML(F["default"].trim(this._username.value)),M=this.handleCheckUsername.bind(this);
q["default"].checkUsernames([e["default"].stripHTML(L)],M,M)};J.prototype.identityQuestionChange=function(){var L=this._identityQuestion.value;this._identityQuestionID=L?parseInt(L,10):void 0;this.validIdentityQuestion()};J.prototype.handleCheckUsername=function(L){this.isValidUsername=!1;var M=e["default"].stripHTML(F["default"].trim(this._username.value));!L||L.code||L.message?L.messageCode&&"DB_0006"===L.messageCode?this.showErrorMessage(this.i18n.error.restrictedCharacters):M?this.showErrorMessage(this.i18n.error.checkingUsername):
this.isValidUsername=!0:0<(null===L||void 0===L?void 0:L.usernames.length)&&M===L.usernames[0].suggested&&(this.isValidUsername=!0);this.validUsername()};J.prototype.signUpError=function(L){f["default"].disableNode(this._createAccountBtn,!1);v["default"].set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var M=this.i18n.unableCreateAccount,N=this.i18n.contactAdmin;-1<L.message.indexOf("already registered")&&(N=this.i18n.error.emailInUse);-1<L.message.indexOf("Username '")&&-1<L.message.indexOf("' not available.")&&
(N=this.i18n.error.usernameInValid);this.showErrorMessage('\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+M+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+N+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};J.prototype.signInError=function(){f["default"].disableNode(this._createAccountBtn,!1);v["default"].set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);this.showErrorMessage('\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+this.i18n.unableSignAuto+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+
this.i18n.pleaseTrySignManually+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};J.prototype.showErrorMessage=function(L){k["default"].createSpecifiedDialog(l["default"]).show({title:this.i18n.errorTitle,message:L})};J.prototype.usernameContainsAlphaNumeric=function(L){var M=/^[a-zA-Z0-9@_.]+$/g;return L&&!!M.test(L)};J.prototype.usernameValidStartEnd=function(L){var M=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-.]+[a-zA-Z0-9_])?$/g;return L&&M.test(L)};J.prototype.validFirstName=function(){var L=F["default"].trim(this._firstname.value);
m["default"].clearState([this._firstname,this._firstnameError]);if(H["default"].isDefined(L)&&""!==L)return m["default"].setValidState(this._firstname),!0;m["default"].setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);return!1};J.prototype.validLastName=function(){var L=F["default"].trim(this._lastname.value);m["default"].clearState([this._lastname,this._lastnameError]);if(H["default"].isDefined(L)&&""!==L)return m["default"].setValidState(this._lastname),!0;m["default"].setInvalidState(this._lastname,
this._lastnameError,this.i18n.error.lastNameReqd);return!1};J.prototype.validEmail=function(){var L=F["default"].trim(this._email.value);m["default"].clearState([this._email,this._emailError]);if(H["default"].isDefined(L)&&0!==L.length&&e["default"].isValidEmailAddress(L))return m["default"].setValidState(this._email),!0;m["default"].setInvalidState(this._email,this._emailError,this.i18n.error.emailReqd);return!1};J.prototype.validConfirmEmail=function(){var L=F["default"].trim(this._email.value),
M=F["default"].trim(this._confirmEmail.value);m["default"].clearState([this._confirmEmail,this._confirmEmailError]);if(H["default"].isDefined(M)&&0!==M.length&&e["default"].isValidEmailAddress(M)){if(L!==M)return m["default"].setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailNoMatch),!1;m["default"].setValidState(this._confirmEmail);return!0}m["default"].setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};J.prototype.validUsername=
function(){var L=e["default"].stripHTML(F["default"].trim(this._username.value));m["default"].clearState([this._username,this._usernameError]);if(H["default"].isDefined(L)&&""!==L){if(6>L.length)return m["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),!1;if(128<L.length)return m["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),!1;if(this.usernameContainsAlphaNumeric(L)){if(this.usernameValidStartEnd(L)){if(this.isValidUsername)return m["default"].setValidState(this._username),
!0;L=F["default"].substitute(this.i18n.error.usernameInUse,{username:L,linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+e["default"].getSecureUrl(c["default"].baseUrl)+c["default"].signin+window.location.search+'"\x3e',linkEnd:"\x3c/a\x3e\x3c/span\x3e"});m["default"].setInvalidState(this._username,this._usernameError,L);return!1}m["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameStartEndChars)}else return m["default"].setInvalidState(this._username,this._usernameError,
this.i18n.usernameInvalidChars),!1}else return m["default"].setInvalidState(this._username,this._usernameError,this.i18n.error.userReqd),!1};J.prototype.validPassword=function(){var L=this,M=e["default"].stripHTML(F["default"].trim(this._username.value)),N=F["default"].trim(this._pwd.value);m["default"].clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(N).then(function(O){if(H["default"].isDefined(N)&&""!==N){if(L._passwordPolicy){if(!O.isValidStrength)return m["default"].setInvalidState(L._pwd,
L._pwdError,L.i18n.passwordTooWeak),!1;if(O.isValid){if(M.toLowerCase()===N.toLowerCase())return m["default"].setInvalidState(L._pwd,L._pwdError,L.i18n.passwordNotToPolicy),!1;m["default"].setValidState(L._pwd);return!0}if(!1===O.longEnough)return m["default"].setInvalidState(L._pwd,L._pwdError,F["default"].substitute(L.i18n.error.passwordLength,{num:L._passwordPolicy.minLength})),!1;if(!1===O.enoughLetter)return m["default"].setInvalidState(L._pwd,L._pwdError,F["default"].substitute(L.i18n.error.passwordLetter,
{num:L._passwordPolicy.minLetter})),!1;if(!1===O.enoughUpper)return m["default"].setInvalidState(L._pwd,L._pwdError,F["default"].substitute(L.i18n.error.passwordUpper,{num:L._passwordPolicy.minUpper})),!1;if(!1===O.enoughLower)return m["default"].setInvalidState(L._pwd,L._pwdError,F["default"].substitute(L.i18n.error.passwordLower,{num:L._passwordPolicy.minLower})),!1;if(!1===O.enoughDigit)return m["default"].setInvalidState(L._pwd,L._pwdError,F["default"].substitute(L.i18n.error.passwordDigit,{num:L._passwordPolicy.minDigit})),
!1;if(!1===O.enoughOther)return m["default"].setInvalidState(L._pwd,L._pwdError,F["default"].substitute(L.i18n.error.passwordOther,{num:L._passwordPolicy.minOther})),!1;m["default"].setValidState(L._pwd);return!0}if(O.isValidStrength){if(8>N.length||28<N.length)return m["default"].setInvalidState(L._pwd,L._pwdError,L.i18n.error.invalidPassword),!1;if(M.toLowerCase()===N.toLowerCase())return m["default"].setInvalidState(L._pwd,L._pwdError,L.i18n.passwordNotToPolicy),!1;m["default"].setValidState(L._pwd);
return!0}m["default"].setInvalidState(L._pwd,L._pwdError,L.i18n.passwordTooWeak);return!1}m["default"].setInvalidState(L._pwd,L._pwdError,L.i18n.error.passReqd);return!1})};J.prototype.validVerifyPassword=function(){var L=F["default"].trim(this._pwd.value),M=F["default"].trim(this._verifyPwd.value);m["default"].clearState([this._verifyPwd,this._verifyPwdError]);if(L!==M)return m["default"].setInvalidState(this._verifyPwd,this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;m["default"].setValidState(this._verifyPwd);
return!0};J.prototype.validIdentityQuestion=function(){m["default"].clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return m["default"].setInvalidState(this._identityQuestion,this._identityQuestionError,this.i18n.error.questionSelection),!1;m["default"].setValidState(this._identityQuestion);return!0};J.prototype.validIdentityAnswer=function(){var L=F["default"].trim(this._identityAnswer.value);m["default"].clearState([this._identityAnswer,
this._identityAnswerError]);if(H["default"].isDefined(L)&&""!==L){if(60<L.length)return m["default"].setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;m["default"].setValidState(this._identityAnswer);return!0}m["default"].setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};J.prototype.validates=function(){var L=this,M=[this.validFirstName(),this.validLastName(),this.validEmail(),this.validConfirmEmail(),
this.validUsername(),this.validVerifyPassword(),this.validIdentityQuestion(),this.validIdentityAnswer()].every(function(N){return!0===N});return this.validPassword().then(function(N){(M=M&&N)||m["default"].focusFirstInvalidInput(L._form.domNode);return M})};J.prototype.fetchInvitation=function(){return e["default"].request({url:this._communityUri+"invitations/"+this.invitation})};J.prototype.handleError=function(L){var M,N;L=L.error||L||{};L.code=L.code||0;L=this.i18n.errors[L.code]||L;L.details=
(null===(M=L.details)||void 0===M?0:M.length)?L.details.filter(function(O){return null!==O}):null;if(null===(N=L.details)||void 0===N?0:N.length)L.details=L.details.join("\x3cbr /\x3e"),L.message=L.message?L.message+"\x3cbr\x3e"+L.details:L.details;L=a.__assign(a.__assign({},this.i18n.errors.error),L);this.showErrorMessage(L.message);return!0};return J=a.__decorate([d["default"](t["default"],h["default"],z["default"])],J)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);return function(){function g(e,d){this.templateString=c["default"];this.i18n=k["default"];this.icons=m["default"]}g.prototype.postCreate=function(){var e,d,h;this.inherited(arguments);var t=null!==(d=null===(e=this.portal.helpMap)||void 0===e?void 0:e.m)&&void 0!==
d?d:{};e=this.portal.helpBase+(null!==(h=t["120001688"])&&void 0!==h?h:"");this._moreInfo.href=e};g.prototype.update=function(e){var d=this,h,t=new n["default"];(null===(h=this._previousResult)||void 0===h?void 0:h.password)===e?t.resolve(this._previousResult):e?l["default"].checkPasswordStrength(e).then(function(z){var v=z.strength;d._strengthLabel.className="password-strength__label--"+v;d._strengthLabel.textContent=d.i18n.passwordStrengthMeter["score"+v];d._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--"+
v;var y=Object.keys(z).every(function(C){var F=z[C];return"strength"===C?1<F:!1!==F});y?q["default"].hideNode(d._moreInfo):q["default"].showNode(d._moreInfo);d._previousResult=a.__assign({password:e,isValidStrength:1<v,isValid:y},z);t.resolve(d._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:e,
isValid:!1,isValidStrength:!1},t.resolve(this._previousResult));return t};return g=a.__decorate([b["default"](f["default"],r["default"])],g)}()})},"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/clone ../utils/enterprise ../utils/promises ../utils/verified ../components/ManageBlockedApps/blocked-apps-service ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request esri/IdentityManager ../utils/itemsgroups ../utils/mapViewer ../utils/queryHandler".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importDefault(F);w=a.__importStar(w);
return function(){function A(E){this.blockedApps=[];this.blockedAppsTimestamp=-1;this.userProfiles=new n["default"]({portal:this})}A.prototype.postscript=function(){};A.prototype._getSelf=function(E){var G=this,H,K=new e["default"],I=E+"portals/helpmap",J=E+"community/self",L=null===(H=F["default"].findCredential(E))||void 0===H?void 0:H.token;m["default"].eachAlways({selfResult:this.inherited(arguments),helpMapResult:this._hasHelpMap?m["default"].resolve(null):v["default"].PortalUtil.request(I,{culture:h["default"].locale}),
communitySelfResult:L?v["default"].PortalUtil.request(J,{returnUserLicensedItems:!0,token:L}):m["default"].resolve(null)}).then(function(M){var N,O,Y,ba,ha,U;if(null===(N=M.selfResult)||void 0===N?0:N.error)K.reject(M.selfResult.error);else{var X={};if(null===(O=M.selfResult)||void 0===O?0:O.value)if(X=a.__assign(a.__assign({},X),M.selfResult.value),!G._hasHelpMap&&(null===(Y=M.helpMapResult)||void 0===Y?0:Y.value)&&(X=a.__assign(a.__assign({},X),M.helpMapResult.value)),null===(ba=M.communitySelfResult)||
void 0===ba?0:ba.value)X=a.__assign(a.__assign({},X),{communitySelf:M.communitySelfResult.value}),G.canCreateGeoBIM=null===(U=null===(ha=G.communitySelf)||void 0===ha?void 0:ha.userLicensedItems)||void 0===U?void 0:U.find(function(Z){var P;return-1<(null===(P=null===Z||void 0===Z?void 0:Z.entitlements)||void 0===P?void 0:P.indexOf("geobim"))});G._hasHelpMap=G._hasHelpMap||!!X.helpMap;c["default"].self=a.__assign(a.__assign({},c["default"].self||{}),r["default"](X));X.isPortal?G.getPortalAppSettings().then(function(Z){if(Z&&
!Z.code&&Z.portalConfigProperties){var P=f["default"].copyPortalConfigProperties(Z.portalConfigProperties,c["default"]);Object.keys(P).forEach(function(da){c["default"][da]=P[da]})}K.resolve(X)},function(){K.resolve(X)}):K.resolve(X)}});return K};A.prototype.getPortalUser=function(){return this.portalUser};A.prototype.getEnvironment=function(){var E=this.customBaseUrl;E=null===E||void 0===E?void 0:E.split(".")[0].replace("maps","");return-1<(null===E||void 0===E?void 0:E.indexOf("dev"))?"dev":-1<
(null===E||void 0===E?void 0:E.indexOf("qa"))?"qa":""};A.prototype.getPortalAppSettings=function(){return b["default"].request({url:c["default"].restBaseUrl+"portals/self/settings"})};A.prototype.getDefaultMapViewer=function(){var E=this,G=new e["default"],H=this.portalUser,K=this.portalProperties,I=u.determineOrgMapViewer({mapViewer:null===K||void 0===K?void 0:K.mapViewer,created:this.created,subscriptionInfo:this.subscriptionInfo,isPortal:this.isPortal});this.defaultMapViewer?G.resolve(this.defaultMapViewer):
H?H.getDefaultMapViewer().then(function(J){E.defaultMapViewer=H.isOrgUser?J||I:J||I||u.MapViewerType.Classic;G.resolve(E.defaultMapViewer)}):(this.defaultMapViewer=I||u.MapViewerType.Modern,G.resolve(this.defaultMapViewer));return G};A.prototype.queryItems=function(E,G,H,K){var I=this,J,L=new e["default"],M=null!==(J=null===E||void 0===E?void 0:E.q)&&void 0!==J?J:E;J=null===M||void 0===M?void 0:M.match(/ownerfolder:([^\s]+)/);var N=(null===J||void 0===J?0:J.length)?J[0].split(":")[1]:null,O=this.url,
Y=this.portalUser;J=O+"search";E?(E.categories&&(J=J+"?categories\x3d"+E.categories,delete E.categories),"object"===typeof E&&"bbox"in E&&(E.sortField="bbox",E.srSort="true",E.spatialFilter="true",M=w.queryToObject(document.URL.replace(/^[^\?]*\?/,"")),E.srsConfig="srsConfig"in M?M.srsConfig:"offset:.5,scale:2"),K&&(E.filter=K),this._queryPortal(J,v["default"].PortalUtil.formatQueryParams({},E,G),v["default"].PortalItem).then(function(ba){return x.getAllItemsGroups({response:ba,contentUser:H,portalUser:Y,
url:O})}).then(function(ba){return I.toPortalItems(N,I.isAdminView,ba)}).then(function(ba){return I.addHighlights(ba)}).then(function(ba){return L.resolve(t["default"].mixin(ba,{total:ba.total,nextStart:ba.nextQueryParams.start,start:ba.queryParams.start}))})):L.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return v["default"].PortalResult(L)};A.prototype.getUserProfile=function(E){var G=new e["default"];this.userProfiles.find(E).then(function(H){return G.resolve(H)});return G};A.prototype.getFederatedServers=
function(){var E=new e["default"],G=this.getPortalUser(),H=this.url+"portals/self/servers/";G?b["default"].request({url:H}).then(function(K){b["default"].setFederatedServers((null===K||void 0===K?void 0:K.servers)||[]);E.resolve(K&&K.servers?K:null)}):E.resolve(null);return E};A.prototype.getHostedFederatedServers=function(){var E=new e["default"],G;this.getFederatedServers().then(function(H){var K;G=(null!==(K=null===H||void 0===H?void 0:H.servers)&&void 0!==K?K:[]).filter(function(I){return I.isHosted});
E.resolve(G[0])});return E};A.prototype.getFederatedServerByFunction=function(E){var G=new e["default"],H;this.getFederatedServers().then(function(K){var I;H=(null!==(I=null===K||void 0===K?void 0:K.servers)&&void 0!==I?I:[]).filter(function(J){var L;return-1<(null===(L=J.serverFunction)||void 0===L?void 0:L.indexOf(E))});G.resolve(H.shift())});return G};A.prototype.getManagedServers=function(){var E=new e["default"],G,H;this.getHostedFederatedServers().then(function(K){K?(G=K.adminUrl+"/admin/data/findItems",
b["default"].request({url:G,content:{managed:!0}},{useProxy:b["default"].shouldUseProxy(G)}).then(function(I){var J;H=(null!==(J=null===I||void 0===I?void 0:I.items)&&void 0!==J?J:I||[]).filter(function(L){var M;return"arcgis data store"===(null===(M=null===L||void 0===L?void 0:L.provider)||void 0===M?void 0:M.toLowerCase())});E.resolve(H)},function(){return E.resolve(null)})):E.resolve(null)});return E};A.prototype.getIsBackedBySDS=function(){var E=this,G,H,K,I,J,L,M,N=new e["default"],O=this.getPortalUser(),
Y=null!==(G=null===O||void 0===O?void 0:O.userRole)&&void 0!==G?G:{},ba;y["default"].isDefined(this.isBackedBySDS)?N.resolve(this.isBackedBySDS):(G=(null===(H=Y.isAdmin)||void 0===H?void 0:H.call(Y))||(null===(K=Y.canManageSecurity)||void 0===K?void 0:K.call(Y))||(null===(I=Y.canManageServers)||void 0===I?void 0:I.call(Y))||(null===(J=Y.canUpdateOrgItems)||void 0===J?void 0:J.call(Y))||(null===(L=Y.canDeleteOrgItems)||void 0===L?void 0:L.call(Y)),this.isPortal&&O&&(G||(null===(M=Y.isBasedOnPublisher)||
void 0===M?0:M.call(Y)))?this.getManagedServers().then(function(ha){var U;ba=null!==(U=null===ha||void 0===ha?void 0:ha[0])&&void 0!==U?U:null;E.isBackedBySDS=ba?!0:!1;N.resolve(E.isBackedBySDS)}):(this.isBackedBySDS=!0,N.resolve(!0)));return N};A.prototype.getOrgIsVerified=function(E){var G,H=new e["default"];return!E&&y["default"].isDefined(this.isVerified)?(H.resolve(this.isVerified),H):this.queryItems({q:"(orgid: "+(E||(null===(G=this.portalUser)||void 0===G?void 0:G.orgId))+" AND contentstatus: public_authoritative)",
num:1}).then(function(K){return!!K.total})};A.prototype.getCategories=function(){var E=new e["default"];b["default"].request({url:this.url+"portals/"+this.id+"/categorySchema"}).then(function(G){return E.resolve(G.categorySchema)},function(G){return E.reject(G)});return E};A.prototype.getRegions=function(){var E,G,H=new e["default"],K=(null===(E=this.portalUser)||void 0===E?void 0:E.culture)||(null===(G=this.portal)||void 0===G?void 0:G.culture)||h["default"].locale||"en",I;b["default"].request({url:this.portalUrl+
"portals/regions",content:{culture:K}}).then(function(J){J&&J.length&&(I=J.sort(function(L,M){return"WO"===L.region?-1:L.localizedName.localeCompare(M.localizedName)}));H.resolve(I)});return H};A.prototype.getMemberDefaults=function(){var E=this,G=new e["default"];b["default"].request({url:this.url+"portals/self/userDefaultSettings"}).then(function(H){E.userDefaults=H;G.resolve()},function(){G.resolve()});return G};A.prototype.getHomePageConfig=function(){var E=this,G=new e["default"];b["default"].request({url:this.url+
"portals/self/resources/home.page.json"}).then(function(H){E.homePageConfig=H;G.resolve()},function(){G.resolve()});return G};A.prototype.toPortalItems=function(E,G,H){var K=this,I={},J=new e["default"];E&&"root"!==E&&t["default"].mixin(I,{folderId:E,ownerFolder:E});G&&(I.isAdminView=!0);this.getBlockedApps().then(function(){var L=H.results.map(function(M){var N=new k["default"](t["default"].mixin(M,I,{portal:K}));N.groupData=M.groupData;N.removeBlockedTypes(K.blockedApps);return q["default"].setVerifiedInfo(N)});
z["default"](L).then(function(M){H.items=M;J.resolve(H)},function(M){return 0})});return J};A.prototype.addHighlights=function(E){var G=new e["default"];if(!c["default"].deepLayerSearchEnabled)return G.resolve(E),G;var H=E.items.reduce(function(K,I){K[I.id]=I;return K},{});(E.highlights||[]).forEach(function(K){var I=H[K.id];if(I.sublayers){var J=Object.keys(K).filter(function(L){return"id"!==L&&L.includes("sublayers.")}).reduce(function(L,M){L[M.replace("sublayers.","")]=K[M].map(function(N){return N.replaceAll("\x3cem\x3e",
"").replaceAll("\x3c/em\x3e","")});return L},{});I.highlights=K;I.sublayers=I.sublayers.map(function(L){L.matched=Object.keys(L).some(function(M){var N;return null===(N=J[M])||void 0===N?void 0:N.some(function(O){return L[M].includes(O)})});return L})}});G.resolve(E);return G};A.prototype.formatThumbnailUrl=function(E){return v["default"].PortalUtil.formatUrl(this.portalUrl+"portals/self/resources/"+E)};A.prototype.getLocalizedOrgProperties=function(){var E=this,G,H,K=new e["default"],I=c["default"].restBaseUrl+
"portals/self/resources",J=null===(H=null===(G=this.portalUser)||void 0===G?void 0:G.credential)||void 0===H?void 0:H.token;G={f:"json"};J&&(G.token=J);C["default"]({url:I+"/localizedOrgProperties",content:G},{disableIdentityLookup:!0}).then(function(L){L&&!L.code?(E.localizedOrgProperties=L,E.localizedOrgProperties["default"]||(E.localizedOrgProperties["default"]={name:E.name,description:null})):E.createLocalizedOrgPropertiesDefault();K.resolve(E.localizedOrgProperties)},function(){E.createLocalizedOrgPropertiesDefault();
K.resolve(E.localizedOrgProperties)});return K};A.prototype.isTrialOrg=function(){var E,G=null===(E=this.subscriptionInfo)||void 0===E?void 0:E.type;return"Trial"===G||"Trial Press"===G||"Trial Developer"===G||"Developer Subscription"===G};A.prototype.canHavePartnerCollab=function(){var E="Organizational Plan;Community;In House;ConnectED;ELA;Education Site License;Education;HUP Online Entitlement;Demo and Marketing".split(";");return this.subscriptionInfo&&-1<E.indexOf(this.subscriptionInfo.type)};
A.prototype.isKubernetes=function(){return"ArcGISEnterpriseOnKubernetes"===this.portalDeploymentType};A.prototype.getGeoAnalyticsPlan=function(){var E;return null===(E=this.subscriptionInfo)||void 0===E?void 0:E.subType};A.prototype.getGeoAnalyticsBillingType=function(){var E;return null===(E=this.subscriptionInfo)||void 0===E?void 0:E.billingType};A.prototype.getRemainingCoreHours=function(){return this.availableCredits||0};A.prototype.getContentCategoryLimit=function(){var E=this,G=new e["default"];
if(this.isPortal||!this.id)return this.maxCategoriesPerItem=20,G.resolve(),G;b["default"].request({url:this.url+"portals/self/limits",content:{limitsType:"content",limitName:"MaxCategories"}}).then(function(H){E.maxCategoriesPerItem=(null===H||void 0===H?void 0:H.limitValue)||20;G.resolve()},function(){G.resolve()});return G};A.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={"default":{name:this.name,description:null}}};A.prototype.getBlockedApps=function(){var E=
this,G,H=new e["default"];if(null===(G=this.portalUser)||void 0===G||!G.orgId)return H.resolve(),H;l["default"].getBlockedApps().then(function(K){E.blockedApps=K;H.resolve()});return H};A.prototype.getOIDCId=function(){var E,G;return a.__awaiter(this,void 0,void 0,function(){var H;return a.__generator(this,function(K){switch(K.label){case 0:if(this.oidcId)return[2,this.oidcId];K.label=1;case 1:return K.trys.push([1,3,,4]),[4,b["default"].request({url:c["default"].restBaseUrl+"portals/self/oidc"})];
case 2:return H=K.sent(),this.oidcId=null===(E=null===H||void 0===H?void 0:H.oidcProviders)||void 0===E?void 0:E[0].id,[2,null===(G=null===H||void 0===H?void 0:H.oidcProviders)||void 0===G?void 0:G[0].id];case 3:return K.sent(),[2];case 4:return[2]}})})};return A=a.__decorate([g["default"](v["default"].Portal,d["default"])],A)}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),
function(D,B,a,c,k,n,r,f,m,q){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);return function(){function l(b){this.NO_THUMBNAIL_PATH=k["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}l.prototype.find=function(b){var g=this,e=this.users,d="string"===typeof b?{username:b}:b,h=d&&d.username;d="deletedUser"===h;var t={username:d?f["default"].common.deletedUser:
h,thumbnailUrl:this.NO_THUMBNAIL_PATH},z=new r["default"];"fetching"===e[h]?setTimeout(function(){g.find(b).then(function(v){z.resolve(v)})},50):e[h]?z.resolve(e[h]):d?(e[h]=m["default"].mixin({},{isDeleted:!0},t),z.resolve(e[h])):(e[h]="fetching",this.getUserProfile(h).then(function(v){e[h]=v;z.resolve(e[h])},function(){e[h]=m["default"].mixin({},t);z.resolve(e[h])}));return z};l.prototype.getUserProfile=function(b){var g=this,e=new r["default"],d;k["default"].request({url:this.portal.portalUrl+
"community/users/"+b}).then(function(h){d=new c["default"](m["default"].mixin(h,{portal:g.portal}));e.resolve(d)});return e};return l=a.__decorate([n["default"](q["default"])],l)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(D,B){return function(){function a(){}a.clearState=function(c){null===c||void 0===c?void 0:c.forEach(function(k){var n,r,f;null===k||void 0===k?void 0:k.removeAttribute("aria-live");null===(n=null===k||void 0===k?void 0:k.classList)||
void 0===n?void 0:n.remove("input-success");null===(r=null===k||void 0===k?void 0:k.classList)||void 0===r?void 0:r.remove("input-error");null===(f=null===k||void 0===k?void 0:k.classList)||void 0===f?void 0:f.remove("is-active")})};a.setValidState=function(c){var k;null===(k=null===c||void 0===c?void 0:c.classList)||void 0===k?void 0:k.add("input-success")};a.setInvalidState=function(c,k,n,r){var f,m,q;null===(f=null===c||void 0===c?void 0:c.classList)||void 0===f?void 0:f.add("input-error");null===
(m=null===k||void 0===k?void 0:k.classList)||void 0===m?void 0:m.add("is-active");k&&n&&(null===k||void 0===k?void 0:k.setAttribute("aria-live","polite"),k.innerHTML=n);r&&(null===(q=null===c||void 0===c?void 0:c.focus)||void 0===q?void 0:q.call(c))};a.focusFirstInvalidInput=function(c){var k;c=null!==(k=null===c||void 0===c?void 0:c.querySelector(".input-error"))&&void 0!==k?k:void 0;(null===c||void 0===c?0:c.focus)&&c.focus()};a.toggleError=function(c,k,n,r){n?a.setInvalidState(c,k,r):a.clearState([c,
k])};return a}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define(["dojo/_base/declare","dijit/_WidgetBase","../util","../../esriGeowConfig"],function(D,B,a,c){var k=D([B],{helpBaseUrl:null,helpTopics:null,_isSingleTenant:!1,postCreate:function(){this._isSingleTenant=void 0!==c.isMultiTenant&&null!==c.isMultiTenant&&!1===c.isMultiTenant;this.helpBaseUrl=c.self.helpBase;this._load()},_load:function(){c.self.helpMap&&c.self.helpMap.m?(this.helpTopics=c.self.helpMap.m,this.onLoad(this.helpBaseUrl,
this.helpTopics)):a.request({url:c.restBaseUrl+"portals/helpmap"}).then(function(n){!n||n.code||n.message||(this.helpBaseUrl=n.helpBase,this.helpTopics=n.helpMap&&n.helpMap.m||{},this.onLoad(this.helpBaseUrl,this.helpTopics))}.bind(this))},onLoad:function(n,r){},isLoaded:function(){return this.helpBaseUrl&&this.helpTopics},getHelpUrl:function(n){return this.isLoaded()?this.helpBaseUrl+this.helpTopics[n]:"#"}});k.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=
new k);return this._instance}};return k})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){B=B("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(h,
t){c.mixin(this,h);var z=this,v=z.transition,y=z._transitions={};z._idMap={};var C=z.transitionParams=eval("({ "+z.transitionParams+" })");t=z._domNode=r.byId(t);z._domNodeContentBox=q.getContentBox(t);z.id=t.id||(new Date).getTime();"static"==l.get(t,"position")&&l.set(t,"position","relative");y[v]=c.getObject(v);y[v]||(this._transitionWarn(v,"dojox.widget.rotator.swap"),y[z.transition="dojox.widget.rotator.swap"]=c.getObject("dojox.widget.rotator.swap"));C.duration||(C.duration=500);k.forEach(z.panes,
function(F){m.create("div",F,t)});z.panes=[];d("\x3e *",t).forEach(function(F,x){z._initializePane(F,x)});z._controlSub=b.subscribe(z.id+"/rotator/control",c.hitch(z,this.control))},insert:function(h,t){var z=this.panes;null==t&&(t=z.length);t<z.length?(z=z[t],m.place(h,z.node,"before")):m.place(h,this._domNode,"last");this._initializePane(h,t)},remove:function(h){function t(F){var x=v.splice(F,1)[0];x&&(x.id&&(z._idMap[x.id]=void 0),z._domNode.removeChild(x.node));z.idx>F&&z.idx--}var z=this,v=this.panes;
if("number"===typeof h)var y=h;else{for(var C=0;C<v.length;C++)if(v[C].node===h){y=C;break}if(null==y)return}if(y===this.idx&&(h=this.go(this.idx-1)))return h.then(function(){t(y)});t(y)},destroy:function(){k.forEach([this._controlSub,this.wfe],function(h){h&&h.remove()});m.destroy(this._domNode);this.panes=[]},next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(h){var t=this,z=t.idx,v=t.panes,y=v.length,C=t._idMap[h];t._resetWaitForEvent();h=null!=
C?C:h||0;h=h<y?0>h?y-1:h:0;if(h==z||t.anim)return null;var F=v[z],x=v[h];l.set(F.node,"zIndex",2);l.set(x.node,"zIndex",1);var u={current:F,next:x,rotator:t};if(z=t.anim=t._transitions[x.trans](c.mixin({rotatorBox:t._domNodeContentBox},u,x.params))){var w=new a,A=x.waitForEvent,E=D.after(z,"onEnd",function(){l.set(F.node,{display:"none",left:0,opacity:1,top:0,zIndex:0});E.remove();t.anim=null;t.idx=h;if(F.onAfterOut)F.onAfterOut(u);if(x.onAfterIn)x.onAfterIn(u);t.onUpdate("onAfterTransition");A||
(t._resetWaitForEvent(),w.callback())},!0);t.wfe=A?b.subscribe(A,function(){t._resetWaitForEvent();w.callback(!0)}):null;t.onUpdate("onBeforeTransition");if(F.onBeforeOut)F.onBeforeOut(u);if(x.onBeforeIn)x.onBeforeIn(u);z.play();return w}},onUpdate:function(h,t){b.publish(this.id+"/rotator/update",h,this,t||{})},_initializePane:function(h,t){var z={node:h,idx:t,params:c.mixin({},this.transitionParams,eval("({ "+(f.get(h,"transitionParams")||"")+" })"))},v=z.trans=f.get(h,"transition")||this.transition,
y=this._transitions,C=this.panes,F={left:0,top:0,position:"absolute",display:"none"};k.forEach(["id","title","duration","waitForEvent"],function(x){z[x]=f.get(h,x)});z.id&&(this._idMap[z.id]=t);y[v]||(y[v]=c.getObject(v))||this._transitionWarn(v,z.trans=this.transition);if(null==this.idx||f.get(h,"selected"))null!=this.idx&&l.set(C[this.idx].node,"display","none"),this.idx=t,F.display="";l.set(h,F);d("\x3e script[type^\x3d'dojo/method']",h).orphan().forEach(function(x){var u=f.get(x,"event");u&&(z[u]=
e._functionFromScript(x))});C.splice(t,0,z)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(h){var t=c._toArray(arguments),z=this;t.shift();z._resetWaitForEvent();z[h]&&((t=z[h].apply(z,t))&&t.addCallback(function(){z.onUpdate(h)}),z.onManualChange(h))},resize:function(h,t){var z=this._domNodeContentBox={w:h,h:t};q.setContentSize(this._domNode,z);k.forEach(this.panes,function(v){q.setContentSize(v.node,z)})},onManualChange:function(){},_transitionWarn:function(h,
t){}});c.setObject("dojox.widget.rotator.swap",function(h){return new n.Animation({play:function(){l.set(h.current.node,"display","none");l.set(h.next.node,"display","");this._fire("onEnd")}})});return B})},"dojo/fx/easing":function(){define(["../_base/lang"],function(D){var B={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a*=2;return 1>a?Math.pow(a,2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},
cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=2;return 1>a?Math.pow(a,5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(Math.PI/
2*a)+1},sineOut:function(a){return Math.sin(Math.PI/2*a)},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=
2;return 1>a?-.5*(Math.sqrt(1-Math.pow(a,2))-1):.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){--a;return Math.pow(a,2)*(2.70158*a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;--a;return-1*Math.pow(2,10*a)*Math.sin(2*(a-.075)*Math.PI/.3)},elasticOut:function(a){return 0==a||1==a?a:
Math.pow(2,-10*a)*Math.sin(2*(a-.075)*Math.PI/.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var c=.3*1.5,k=c/4;if(1>a)return--a,-.5*Math.pow(2,10*a)*Math.sin(2*(a-k)*Math.PI/c);--a;return.5*Math.pow(2,-10*a)*Math.sin(2*(a-k)*Math.PI/c)+1},bounceIn:function(a){return 1-B.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*Math.pow(a,2):a<2/2.75?7.5625*Math.pow(a-1.5/2.75,2)+.75:a<2.5/2.75?7.5625*Math.pow(a-2.25/2.75,2)+.9375:7.5625*Math.pow(a-2.625/2.75,2)+.984375},
bounceInOut:function(a){return.5>a?B.bounceIn(2*a)/2:B.bounceOut(2*a-1)/2+.5}};D.setObject("dojo.fx.easing",B);return B})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),function(D,B,a,c,k,n){return D("dojox.widget.AutoRotator",n,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,cycles:-1,random:!1,reverse:!1,constructor:function(){var r=this;r.cycles-0==r.cycles&&0<r.cycles?r.cycles++:
r.cycles=r.cycles?-1:0;r._signals=[c(r._domNode,k.enter,function(){if(r.suspendOnHover&&!r.anim&&!r.wfe){var f=r._endTime,m=r._now();r._suspended=!0;r._resetTimer();r._resumeDuration=f>m?f-m:.01}}),c(r._domNode,k.leave,function(){r.suspendOnHover&&!r.anim&&(r._suspended=!1,r.playing&&!r.wfe&&r.play(!0))})];r.autoStart&&1<r.panes.length?r.play():r.pause()},destroy:function(){B.forEach(this._signals,function(r){r.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},
play:function(r,f){this.playing=!0;this._resetTimer();!0!==r&&0<this.cycles&&this.cycles--;if(0==this.cycles)this.pause();else if(!this._suspended)if(this.onUpdate("play"),f)this._cycle();else{var m=(this._resumeDuration||0)-0;m=(0<m?m:this.panes[this.idx].duration||this.duration)-0;this._resumeDuration=0;this._endTime=this._now()+m;this._timer=setTimeout(a.hitch(this,"_cycle",!1),m)}},pause:function(){this.playing=this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},
_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(r){var f=this;r=f.idx;if(f.random){do var m=Math.floor(Math.random()*f.panes.length+1);while(m==r)}else m=r+(f.reverse?-1:1);(r=f.go(m))&&r.addCallback(function(q){f.onUpdate("cycle");f.playing&&f.play(!1,q)})},onManualChange:function(r){this.cycles=-1;"play"!=r&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());this.playing&&this.play()}})})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),
function(D,B,a,c,k,n,r){return D("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",constructor:function(f,m){B.mixin(this,f);var q=this.rotator;if(q){for(;m.firstChild;)m.removeChild(m.firstChild);var l=this._domNode=a.create("ul",null,m),b=function(g,e,d){a.create("li",{className:e,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+g+"\x3c/span\x3e\x3c/a\x3e",onclick:function(h){c.stop(h);q&&q.control.apply(q,d)}},l)};k.forEach(this.commands.split(","),function(g,
e){switch(g){case "prev":b("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":b("Play","dojoxRotatorPlay dojoxRotatorIcon",["play"]);b("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=a.create("li",{className:"dojoxRotatorInfo",innerHTML:this._buildInfo(q)},l);break;case "next":b("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(var d=0;d<q.panes.length;d++)b("#"==g?d+1:q.panes[d].title||"Tab "+(d+1),
("#"==g?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(d==q.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+d,["go",d])}},this);r("li:first-child",l).addClass("dojoxRotatorFirst");r("li:last-child",l).addClass("dojoxRotatorLast");this._togglePlay();this._con=n.connect(q,"onUpdate",this,"_onUpdate")}},destroy:function(){n.disconnect(this._con);a.destroy(this._domNode)},_togglePlay:function(f){f=this.rotator.playing;r(".dojoxRotatorPlay",this._domNode).style("display",f?"none":"");r(".dojoxRotatorPause",
this._domNode).style("display",f?"":"none")},_buildInfo:function(f){return"\x3cspan\x3e"+(f.idx+1)+" / "+f.panes.length+"\x3c/span\x3e"},_onUpdate:function(f){var m=this.rotator;switch(f){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=this._buildInfo(m)),f=function(q){m.idx<q.length&&a.addClass(q[m.idx],"dojoxRotatorSelected")},f(r(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),f(r(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},
"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang","dojo/_base/fx","dojo/dom-style","dojo/fx"],function(D,B,a,c){function k(r,f){var m=r.next.node;a.set(m,{display:"",opacity:0});r.node=r.current.node;return c[f]([B.fadeOut(r),B.fadeIn(D.mixin(r,{node:m}))])}var n={fade:function(r){return k(r,"chain")},crossFade:function(r){return k(r,"combine")}};D.mixin(D.getObject("dojox.widget.rotator"),n);return n})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e){c=B("dijit.layout._StackButton",e,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(d){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});B=B("dijit.layout.StackController",[l,b,g],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:c,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(d){return q.byId(this.id+
"_"+d)},postCreate:function(){this.inherited(arguments);this.own(f.subscribe(this.containerId+"-startup",n.hitch(this,"onStartup")),f.subscribe(this.containerId+"-addChild",n.hitch(this,"onAddChild")),f.subscribe(this.containerId+"-removeChild",n.hitch(this,"onRemoveChild")),f.subscribe(this.containerId+"-selectChild",n.hitch(this,"onSelectChild")),f.subscribe(this.containerId+"-containerKeyDown",n.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(r(this.containerNode,"click",
n.hitch(this,function(d){var h=q.getEnclosingWidget(d.target);if(h!=this.containerNode&&!h.disabled&&h.page)for(d=d.target;d!==this.containerNode;d=d.parentNode)if(a.contains(d,this.buttonWidgetCloseClass)){this.onCloseButtonClick(h.page);break}else if(d==h.domNode){this.onButtonClick(h.page);break}})))},onStartup:function(d){this.textDir=d.textDir;D.forEach(d.children,this.onAddChild,this);if(d.selected)this.onSelectChild(d.selected);var h=q.byId(this.containerId).containerNode,t=n.hitch(this,"pane2button");
d={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var z=function(y,C){return r(h,"attrmodified-"+y,function(F){var x=t(F.detail&&F.detail.widget&&F.detail.widget.id);x&&x.set(C,F.detail.newValue)})},v;for(v in d)this.own(z(v,d[v]))},destroy:function(d){this.destroyDescendants(d);this.inherited(arguments)},onAddChild:function(d,h){var t=new (n.isString(this.buttonWidget)?n.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+d.id,name:this.id+"_"+d.id,label:d.title,disabled:d.disabled,ownerDocument:this.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir||this.textDir,showLabel:d.showTitle,iconClass:d.iconClass,closeButton:d.closable,title:d.tooltip,page:d});this.addChild(t,h);d.controlButton=t;if(!this._currentChild)this.onSelectChild(d);t=d._wrapper.getAttribute("aria-labelledby")?d._wrapper.getAttribute("aria-labelledby")+" "+t.id:t.id;d._wrapper.removeAttribute("aria-label");d._wrapper.setAttribute("aria-labelledby",
t)},onRemoveChild:function(d){this._currentChild===d&&(this._currentChild=null);var h=this.pane2button(d.id);h&&(this.removeChild(h),h.destroy());delete d.controlButton},onSelectChild:function(d){if(d){if(this._currentChild){var h=this.pane2button(this._currentChild.id);h.set("checked",!1);h.focusNode.setAttribute("tabIndex","-1")}h=this.pane2button(d.id);h.set("checked",!0);this._currentChild=d;h.focusNode.setAttribute("tabIndex","0");q.byId(this.containerId)}},onButtonClick:function(d){var h=this.pane2button(d.id);
m.focus(h.focusNode);this._currentChild&&this._currentChild.id===d.id&&h.set("checked",!0);q.byId(this.containerId).selectChild(d)},onCloseButtonClick:function(d){q.byId(this.containerId).closeChild(d);this._currentChild&&(d=this.pane2button(this._currentChild.id))&&m.focus(d.focusNode||d.domNode)},adjacent:function(d){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(d=!d);var h=this.getChildren(),t=D.indexOf(h,this.pane2button(this._currentChild.id)),z=h[t];do{t=(t+
(d?1:h.length-1))%h.length;var v=h[t]}while(v.disabled&&v!=z);return v},onkeydown:function(d,h){if(!this.disabled&&!d.altKey){var t=null;if(d.ctrlKey||!d._djpage){switch(d.keyCode){case k.LEFT_ARROW:case k.UP_ARROW:d._djpage||(t=!1);break;case k.PAGE_UP:d.ctrlKey&&(t=!1);break;case k.RIGHT_ARROW:case k.DOWN_ARROW:d._djpage||(t=!0);break;case k.PAGE_DOWN:d.ctrlKey&&(t=!0);break;case k.HOME:for(var z=this.getChildren(),v=0;v<z.length;v++){var y=z[v];if(!y.disabled){this.onButtonClick(y.page);break}}d.stopPropagation();
d.preventDefault();break;case k.END:z=this.getChildren();for(v=z.length-1;0<=v;v--)if(y=z[v],!y.disabled){this.onButtonClick(y.page);break}d.stopPropagation();d.preventDefault();break;case k.DELETE:case 87:this._currentChild.closable&&(d.keyCode==k.DELETE||d.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),d.stopPropagation(),d.preventDefault());break;case k.TAB:d.ctrlKey&&(this.onButtonClick(this.adjacent(!d.shiftKey).page),d.stopPropagation(),d.preventDefault())}null!==t&&(this.onButtonClick(this.adjacent(t).page),
d.stopPropagation(),d.preventDefault())}}},onContainerKeyDown:function(d){d.e._djpage=d.page;this.onkeydown(d.e)}});B.StackButton=c;return B})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(D,B,a){D.provide("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.declare("arcgisonline.sharing.dijit.TextMenu",[B._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",
href:"#",iconClass:null}],labelNode:null,triggerNode:null,menu:null,handlers:[],constructor:function(c){D.mixin(this,c)},postCreate:function(){this.menu=(new B.Menu({})).placeAt(D.body());D.addClass(this.menu.domNode,"esriTextMenu");B.popup.moveOffScreen(this.menu.domNode);null!==this.textMenuItems&&this._renderItems(this.textMenuItems);D.style(this.triggerNode,"cursor","hand");D.style(this.triggerNode,"cursor","pointer");this.handlers.push(D.connect(this.triggerNode,"onclick",this,this.show));D.connect(this.menu,
"onMouseLeave",D.hitch(this,function(){this.hide()}))},show:function(c){c.preventDefault();B.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:D.hitch(this,this.hide),onCancel:D.hitch(this,this.hide)});this.menu.focus()},hide:function(){B.popup.close(this.menu)},destroy:function(){this.hide();D.forEach(this.handlers,function(c){D.disconnect(c)});D.forEach(D.query(".esriTextMenuItem"),function(c){B.byNode(c).destroy()},this);this.menu.destroy();this.inherited(arguments)},
_renderItems:function(c){D.forEach(c,function(k){k=new B.MenuItem(k);D.addClass(k.domNode,"esriTextMenuItem");this.menu.addChild(k)},this)}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(D){return D._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(D,B,
a,c){var k=B("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(n){if(this._hash[n.id])throw Error("Tried to register widget with id\x3d\x3d"+n.id+" but that id is already registered");this._hash[n.id]=n;this.length++},remove:function(n){this._hash[n]&&(delete this._hash[n],this.length--)},forEach:function(n,r){r=r||a.global;var f=0,m;for(m in this._hash)n.call(r,this._hash[m],f++,this._hash);return this},filter:function(n,r){r=r||a.global;var f=new k,m=0,q;for(q in this._hash){var l=
this._hash[q];n.call(r,l,m++,this._hash)&&f.add(l)}return f},byId:function(n){return this._hash[n]},byClass:function(n){var r=new k,f;for(f in this._hash){var m=this._hash[f];m.declaredClass==n&&r.add(m)}return r},toArray:function(){var n=[],r;for(r in this._hash)n.push(this._hash[r]);return n},map:function(n,r){return D.map(this.toArray(),n,r)},every:function(n,r){r=r||a.global;var f=0,m;for(m in this._hash)if(!n.call(r,this._hash[m],f++,this._hash))return!1;return!0},some:function(n,r){r=r||a.global;
var f=0,m;for(m in this._hash)if(n.call(r,this._hash[m],f++,this._hash))return!0;return!1}});D.forEach("forEach filter byClass map every some".split(" "),function(n){c[n]=k.prototype[n]});return k})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(D,B,a,c,k,n,r,f){n.focus=function(m){if(m){var q="node"in m?m.node:m,l=m.bookmark;m=m.openedForWindow;var b=l?l.isCollapsed:!1;if(q){var g="iframe"==
q.tagName.toLowerCase()?q.contentWindow:q;if(g&&g.focus)try{g.focus()}catch(e){}n._onFocusNode(q)}if(l&&k.withGlobal(m||k.global,f.isCollapsed)&&!b){m&&m.focus();try{k.withGlobal(m||k.global,f.moveToBookmark,null,[l])}catch(e){}}}};n.watch("curNode",function(m,q,l){f._curFocus=l;f._prevFocus=q;l&&c.publish("focusNode",l)});n.watch("activeStack",function(m,q,l){f._activeStack=l});n.on("widget-blur",function(m,q){c.publish("widgetBlur",m,q)});n.on("widget-focus",function(m,q){c.publish("widgetFocus",
m,q)});a.mixin(f,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return f.getBookmark().isCollapsed},getBookmark:function(){return(k.global==window?r:new r.SelectionManager(k.global)).getBookmark()},moveToBookmark:function(m){return(k.global==window?r:new r.SelectionManager(k.global)).moveToBookmark(m)},getFocus:function(m,q){var l=!n.curNode||m&&B.isDescendant(n.curNode,m.domNode)?f._prevFocus:n.curNode;return{node:l,bookmark:l&&l==n.curNode&&k.withGlobal(q||k.global,f.getBookmark),openedForWindow:q}},
_activeStack:[],registerIframe:function(m){return n.registerIframe(m)},unregisterIframe:function(m){m&&m.remove()},registerWin:function(m,q){return n.registerWin(m,q)},unregisterWin:function(m){m&&m.remove()}});return f})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(D,B,a,c,k){var n={getViewport:function(){return a.getBox()}};n.placeOnScreen=c.at;n.placeOnScreenAroundElement=function(r,f,m,q){if(B.isArray(m))var l=m;else{l=
[];for(var b in m)l.push({aroundCorner:b,corner:m[b]})}return c.around(r,f,l,!0,q)};n.placeOnScreenAroundNode=n.placeOnScreenAroundElement;n.placeOnScreenAroundRectangle=n.placeOnScreenAroundElement;n.getPopupAroundAlignment=function(r,f){var m={};D.forEach(r,function(q){var l=f;switch(q){case "after":m[f?"BR":"BL"]=f?"BL":"BR";break;case "before":m[f?"BL":"BR"]=f?"BR":"BL";break;case "below-alt":l=!l;case "below":m[l?"BL":"BR"]=l?"TL":"TR";m[l?"BR":"BL"]=l?"TR":"TL";break;case "above-alt":l=!l;default:m[l?
"TL":"TR"]=l?"BL":"BR",m[l?"TR":"TL"]=l?"BR":"BL"}});return m};B.mixin(k,n);return k})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(D,B,a){var c=a._createWrapper;a._createWrapper=function(n){n.declaredClass||(n={_popupWrapper:n.parentNode&&D.contains(n.parentNode,"dijitPopup")?n.parentNode:null,domNode:n,destroy:function(){},ownerDocument:n.ownerDocument,ownerDocumentBody:B.body(n.ownerDocument)});return c.call(this,n)};var k=
a.open;a.open=function(n){if(n.orient&&"string"!=typeof n.orient&&!("length"in n.orient)){var r=[],f;for(f in n.orient)r.push({aroundCorner:f,corner:n.orient[f]});n.orient=r}return k.call(this,n)};return a})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(D,B){B.scrollIntoView=function(a,c){D.scrollIntoView(a,c)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr",
"dojo/_base/lang","../main","../hccss"],function(D,B,a){B.mixin(a,{hasWaiRole:function(c,k){var n=this.getWaiRole(c);return k?-1<n.indexOf(k):0<n.length},getWaiRole:function(c){return B.trim((D.get(c,"role")||"").replace("wairole:",""))},setWaiRole:function(c,k){D.set(c,"role",k)},removeWaiRole:function(c,k){var n=D.get(c,"role");n&&(k?(n=B.trim((" "+n+" ").replace(" "+k+" "," ")),D.set(c,"role",n)):c.removeAttribute("role"))},hasWaiState:function(c,k){return c.hasAttribute?c.hasAttribute("aria-"+
k):!!c.getAttribute("aria-"+k)},getWaiState:function(c,k){return c.getAttribute("aria-"+k)||""},setWaiState:function(c,k,n){c.setAttribute("aria-"+k,n)},removeWaiState:function(c,k){c.removeAttribute("aria-"+k)}});return a})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(D,B){B.getDocumentWindow=function(a){return D.get(a)}})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),
function(D,B,a,c,k){return D("dijit.form.ComboButton",c,{templateString:k,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(n){n.keyCode==B[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(a.focus(this._popupStateNode),n.stopPropagation(),n.preventDefault())},_onArrowKeyDown:function(n){n.keyCode==
B[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(a.focus(this.titleNode),n.stopPropagation(),n.preventDefault())},focus:function(n){this.disabled||a.focus("start"==n?this.titleNode:this._popupStateNode)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(D,B,a){return D("dijit.form.RadioButton",[B,a],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(D,B,a,c,k,n){return B("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var r=[];k("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(c.hitch(this,function(f){f.name==this.name&&f.form==this.focusNode.form&&(f=n.getEnclosingWidget(f))&&r.push(f)}));return r},_setCheckedAttr:function(r){this.inherited(arguments);this._created&&r&&D.forEach(this._getRelatedWidgets(),c.hitch(this,function(f){f!=this&&f.checked&&f.set("checked",!1)}))},_getSubmitValue:function(r){return null==
r?"on":r},_onClick:function(r){if(this.checked||this.disabled)return r.stopPropagation(),r.preventDefault(),!1;if(this.readOnly)return r.stopPropagation(),r.preventDefault(),D.forEach(this._getRelatedWidgets(),c.hitch(this,function(q){a.set(this.focusNode||this.domNode,"checked",q.checked)})),!1;var f=!1,m;D.some(this._getRelatedWidgets(),function(q){return q.checked?(m=q,!0):!1});this.checked=!0;m&&(m.checked=!1);if(!1===this.onClick(r)||r.defaultPrevented)f=!0;this.checked=!1;m&&(m.checked=!0);
f?r.preventDefault():this.set("checked",!0);return!f}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(D,B,a,c,k,n,r){return D("dijit.PopupMenuItem",r,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var f=c("*",this.srcNodeRef);this.inherited(arguments,[f[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(f,m){var q=this.popup;
k.open(a.delegate(f,{popup:this.popup,around:this.domNode}));m&&q.focus&&q.focus()},_closePopup:function(){k.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var f=c("[widgetId]",this.dropDownContainer)[0];this.popup=n.byNode(f)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&
B.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(f){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(f),delete this.popup);this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],
function(D,B,a){D.provide("arcgisonline.sharing.dijit.Gallery");D.require("arcgisonline.sharing.dijit.views");D.require("dijit._Widget");D.require("dijit._Templated");D.require("dojo.NodeList-fx");D.require("dijit.layout.ContentPane");D.require("arcgisonline.sharing.util");D.require("dijit.form.Button");D.requireLocalization("arcgisonline","arcgisonline");D.require("arcgisonline.sharing.geow.QueryReadStore");D.declare("arcgisonline.sharing.dijit.Gallery",[B._Widget,B._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\r\n      \x3cp style\x3d"text-align: center;"\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\r\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this.i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},D.create("div",{id:this.id+"_popup"},D.body())),this._galleryFadeIn=D.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=D.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=D.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),D.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(D.connect(this,"onContentChange",this,this._layoutPageControls),D.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(c,k){var n=this.tooltip.domNode,r;esriGeowConfig.isRightToLeft||(r=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(r=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});r=B.placeOnScreenAroundNode(n,c,r);this.tooltip.set("content",this._buildItemDetailsLayout(k,r,c));if(this.showThumbnailInDetails){var f="none"==D.style(n,"display");f&&D.style(n,{visibility:"hidden",display:"block"});var m=D.contentBox(n),q=D.coords(n);f&&D.style(n,{visibility:"",display:"none"});"TR"==r.aroundCorner?(D.style(n,"top",q.t-m.t+"px"),D.style(n,"left",q.l+m.l+"px")):"TL"==r.aroundCorner&&(D.style(n,"top",q.t-m.t+"px"),D.style(n,"left",q.l-m.l+"px"))}this._highlightNode(k);
this.tooltip.show()},node_onMouseEnter:function(c){var k=c.currentTarget,n=this._getItemByNode(k);this.onNodeMouseEnter(c,n);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(D.hitch(this,function(){this._showTooltip(k,n)}),this.showDelay)))},node_onMouseLeave:function(c){this._timer&&(clearTimeout(this._timer),this._timer=null);var k=this._getItemByNode(c.currentTarget);
this.onNodeMouseLeave(c,k)},tooltip_onMouseLeave:function(c){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(c){c=D.byId("galleryNode_"+c.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):D.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&D.addClass(c,this.nodeHighlightClass);this._lastFocusedNode=c},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):D.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&D.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(c){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=D.hitch(this,function(k){D.empty(this.flowContainer);0<k.length?(this.maxNodes&&(k=k.splice(0,this.maxNodes)),D.forEach(k,D.hitch(this,function(n,r){n.id||(n.id=r);this.flowContainer.appendChild(this._buildNodeLayout(n,
r<this.largeNodes))})),D.create("br",{style:{clear:"both"}},this.flowContainer),k=D.query("."+this.nodeClass,this.domNode),k.connect("onmouseenter",this,this.node_onMouseEnter),k.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&D.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):D.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},c);this._galleryFadeOutTotal.play()},clear:function(c){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();D.empty(this.flowContainer);D.empty(this._pages);D.create("span",{innerHTML:c,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(c,k){var n=D.create("div",{id:"galleryNode_"+c.id,"class":this.nodeClass});D.addClass(n,k?"large":
"small");var r=arcgisonline.sharing.util,f=r.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==c.type&&(f=r.getStaticImagesUrl()+"/webapp.png");f="Mobile Application"==c.type?r.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===c.type||"Scene Service"===c.type?r.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===c.type?r.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===c.type?r.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===c.type?r.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===c.type?r.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===c.type?r.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===c.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?r.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===c.type?r.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===c.type?r.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===c.type?r.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
r.getStaticImagesUrl()+"/desktopapp.png";r.getGalleryMainLinkInfo(c);r=D.create("a",{href:"#"},n);D.connect(r,"onclick",this,this.onNodeClick,c);D.create("img",{"class":this.thumbClass,alt:c.snippet||"",src:c.thumbnail?this._getThumbailUrl(c):f},r);this.showNodeLabels&&(f=D.create("div",{"class":"galleryLabelContainer"},n),r=c.title||"",D.create("span",{innerHTML:r,alt:r,title:r},f));return n},_buildItemDetailsLayout:function(c,k,n){return arcgisonline.sharing.dijit.views.item.medium(c,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==k.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(c){for(;!D.hasClass(c,this.nodeClass);)c=c.parentNode;c=c.id.substr(c.id.indexOf("_")+1);for(var k=0;k<this.items.length;k++)if(this.items[k].id==c)return this.items[k];return null},_getThumbailUrl:function(c){var k=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/info/"+c.thumbnail+(k?"?token\x3d"+k:"")},_layoutPageControls:function(){D.empty(this._pages);
if(1!==this.pageCount){for(var c=1;c<=this.pageCount;c++){var k=D.create("span",{innerHTML:c},D.create("a",{onclick:D.hitch(this,this.goToPage,c)},this._pages));c==this.currentPage&&D.addClass(k,"currentPage")}1==this.currentPage?D.style(this._prev.domNode,"visibility","hidden"):D.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?D.style(this._next.domNode,"visibility","hidden"):D.style(this._next.domNode,"visbility","")}},nextPage:function(c){this.currentPage<this.pageCount&&
(!c.keyCode||13===c.keyCode||32===c.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(c){1<this.currentPage&&(!c.keyCode||13===c.keyCode||32===c.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(c){0<this.pageCount&&!isNaN(c)&&0<c&&(this._suspendTooltip=!0,this._loadRange((c-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=c,this.onPageChange(this.currentPage,-1))},_loadRange:function(c,k){var n=D.clone(this.items);this._loadItems(n.splice(c,k))},_setItemsAttr:function(c){this.items=
this.includeNode?D.filter(c,this.includeNode):c;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(c,k){},onContentChange:function(c){},onNodeClick:function(c,k){},onNodeMouseEnter:function(c,k){},onNodeMouseLeave:function(c,k){}});D.declare("arcgisonline.sharing.dijit._GalleryContentPane",B.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);D.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});D.style(this.domNode,esriGeowConfig.isRightToLeft||-1<D.indexOf(["ar","he"],D.locale)?"right":"left","-1000px");this.fadeIn=D.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=D.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:D.hitch(this,"_afterFade")})},_afterFade:function(){D.style(this.domNode,
{top:"-1000px"});D.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(c){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):D.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):D.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(D,B,a){D.provide("arcgisonline.sharing.dijit.views");D.require("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.require("arcgisonline.pages.organization.widgets.ProfilePopup");D.require("arcgisonline.pages.portal.Portal");D.require("arcgisonline.pages.utils.arrays");D.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);D.mixin(this._i18n,{source:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});D.mixin(this._i18n,{visitOrganization:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(c,k,n){var r=D.create,f=r("div",{"class":this.detailClass+" small"}),m=this._util.getGalleryMainLinkInfo(c);k&&(k=r("div",{"class":this.thumbContainerClass},f),D.addClass(f,n),r("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},r("a",{href:m.href||"#",target:m.target,alt:m.tip,title:m.tip},k)));r("a",{href:"#",innerHTML:c.title},r("span",{"class":this.titleClass},f));n=this._util.getSnippet(c.snippet,c.description);r("span",{"class":this.snippetClass,innerHTML:n},f);c=arcgisonline.sharing.geow.Content.changeTypename(c)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+c.owner+"\x3c/span\x3e ("+this._util.toFullDateString(c.modified)+")";r("span",{innerHTML:c},f);return f},mediumFormat:function(c,k){return this.medium(k,!0,"left")},itemLinkInfo:function(c){var k=this._util.getGalleryMainLinkInfo(c);c=this._util.getItemDetailsLinkInfo(c);return{openLink:k,detailLink:c}},medium:function(c,k){var n=D.create,r=n("div",{"class":this.detailClass+" medium"});if(k.unshareHandler){var f=
n("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},r);n("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},f);D.connect(f,"onclick",D.partial(k.unshareHandler,c.id,r))}var m=this.itemLinkInfo(c);f=m.openLink;m=m.detailLink;if(k.showThumb){var q=n("div",{"class":this.thumbContainerClass},r);D.addClass(r,
k.align||"left");if(c.thumbnail&&0<c.thumbnail.length){var l=n("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},n("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip},q));f.onclick&&D.connect(l,"onclick",f.onclick)}else l=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),l="Web Mapping Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===c.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===c.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===c.type||"Scene Service"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",l=n("img",{src:l,"class":this.thumbClass},n("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip},q)),f.onclick&&D.connect(l,"onclick",f.onclick);n("br",null,q);q=n("span",{"class":"esriItemLinks"},q);l=this._util.getItemOpenLinkObjects(c);if(0<l.length){var b=n("span",{innerHTML:f.label},n("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip,style:{marginRight:0}},q));f.onclick&&D.connect(b,"onclick",f.onclick);k.hideOpenMenu||
(n("span",{innerHTML:"\x26nbsp;"},q),f=n("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},q),new arcgisonline.sharing.dijit.TextMenu({triggerNode:f,labelNode:b,textMenuItems:l}));n("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},q)}null!==m&&n("span",{innerHTML:m.label},n("a",{href:m.link||"#",alt:m.tip,title:m.tip,target:m.target?
m.target:""},q))}f=n("div",{"class":"itemTextContainer"},r);n("a",{href:m.link,innerHTML:c.title,alt:m.tip,title:m.tip},n("span",{"class":this.titleClass},f));m=this._util.getSnippet(c.snippet,c.description);n("span",{"class":this.snippetClass,innerHTML:m||""},f);m=n("div",null,f);(q=this._getTypeIcon(c))&&n("span",{innerHTML:q},m);q="";q=arcgisonline.sharing.geow.Content.changeTypename(c)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;l=-1<D.indexOf(c.typeKeywords,"ArcGIS Server")||"Feature Collection"==
c.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";b="GeoJson"===c.type?"GeoJSON":c.type;b=-1<b.toLowerCase().indexOf("add in")?b.replace(/(add in)/ig,"Add-In"):b;n("span",{title:l+b,innerHTML:q,"class":"dim"},m);q=n("span",{"class":"esriItemAuthor"},m);q=n("a",{innerHTML:c.owner,"class":"linkNoHref",owner:c.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},q);k.showProfilePopup?(this._bindProfilePopup(q),
D.attr(q,{"class":"linkNoHref",owner:c.owner})):D.attr(q,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+c.owner);n("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(c.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},m);(q=arcgisonline.sharing.geow.Content._getPremiumItemNode(c))&&D.place(q,D.create("div",{className:"dim esriPremiumContent"},m,"last"));m=D.create("span",{"class":"dojoxRating dijitInline"});
9>D.isIE&&D.style(m,"zoom",0);q=D.create("ul",null,m);l=Math.round(c.avgRating);for(b=1;b<=l;b++)D.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},q);for(;5>l;l++)D.create("li",{"class":"dojoxRatingStar dijitInline Hover"},q);q=this._getMsgRatings(c);n=n("span",{innerHTML:q,"class":"dim"},f);D.place(m,n,"first");return r},map:function(c,k){var n=D.create;k=k||n("div",{"class":this.detailClass+" medium"});if("public_authoritative"===c.contentStatus&&!c.orgSelf)if(esriGeowConfig.self.id&&
c.orgId===esriGeowConfig.self.id)c.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+c.orgId+"?f\x3djson",callbackParamName:"callback",load:function(b,g){c.orgSelf=b;arcgisonline.sharing.dijit.views.item.map(c,k)},error:function(b,g){c.orgSelf={};arcgisonline.sharing.dijit.views.item.map(c,k)}}),k;var r=n("div",{"class":"itemTextContainer"},k),f=this._util.getSnippet(c.snippet,c.description);n("span",{"class":this.snippetClass,
innerHTML:f?this._util.htmlEncode(f):""},r);f=n("span",null,r);var m=this._getTypeIcon(c,!0);m&&n("span",{innerHTML:m},f);m="";m=c.url&&-1<D.indexOf(c.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(c)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(c,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(c,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var q=-1<D.indexOf(c.typeKeywords,"ArcGIS Server")||"Feature Collection"==c.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",l="GeoJson"===c.type?"GeoJSON":c.type;l=-1<l.toLowerCase().indexOf("add in")?l.replace(/(add in)/ig,"Add-In"):l;n("span",{title:q+l,innerHTML:m,"class":"dim"},f);m=n("span",{"class":"esriItemAuthor"},
f);"public_authoritative"===c.contentStatus&&c.orgSelf&&c.orgSelf.name?(m=n("a",{innerHTML:c.orgSelf.name,"class":"linkNoHref",owner:c.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},m),D.connect(m,"onclick",this,function(b){arcgisonline.map.storage.saveMapInCookie(null,!1);c.orgSelf.urlKey?b=location.protocol+"//"+c.orgSelf.urlKey+"."+c.orgSelf.customBaseUrl+"/home/index.html":(b=location.protocol+
"//"+c.orgSelf.portalHostname+"/home/index.html","7443"===location.port&&(b=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(b)})):(m=n("a",{innerHTML:c.owner,"class":"linkNoHref",owner:c.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},m),this._bindProfilePopup(m));D.attr(m,{"class":"linkNoHref",owner:c.owner});n("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(c.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},f);(m=arcgisonline.sharing.geow.Content._getPremiumItemNode(c))&&D.place(m,D.create("div",{className:"dim esriPremiumContent"},f,"last"));f=D.create("span",{"class":"dojoxRating dijitInline"});9>D.isIE&&D.style(f,"zoom",0);m=D.create("ul",null,f);q=Math.round(c.avgRating);for(l=1;l<=q;l++)D.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},m);for(;5>q;q++)D.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},m);m=this._getMsgRatings(c);n=n("span",{innerHTML:m,"class":"dim"},r);D.place(f,n,"first");return k},_bindProfilePopup:function(c){this.popup&&this.popup.close();D.connect(c,"onclick",this,function(k){var n=D.attr(k.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:n,opener:k.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(c){var k=
"";k=1===c.numRatings?k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:D.number.format(c.numRatings,{pattern:"#,###,###,##0"})}):k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:D.number.format(c.numRatings,{pattern:"#,###,###,##0"})});k=1===c.numComments?k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:D.number.format(c.numComments,{pattern:"#,###,###,##0"})}):k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:D.number.format(c.numComments,{pattern:"#,###,###,##0"})});var n=c.type;n=n?arcgisonline.pages.item._Info[n]||null:null;k=!n||"file"!==n.classification||arcgisonline.pages.utils.arrays.includes(n.types,"is-views")||arcgisonline.pages.utils.arrays.includes(n.types,"is-pdf")?1===c.numViews?k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})}):k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})}):1===c.numViews?k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})}):k+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})});return k=arcgisonline.sharing.dijit.views.item.i18n().startBracket+k+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(c){var k=this._util.getToken();k=k?"?token\x3d"+k:"";if(c.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/info/"+c.thumbnail+k;k=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return k="Web Mapping Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===c.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==c.type||"Scene Service"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(c,k){var n=arcgisonline.sharing.geow.Content._getItemIconUrl(c,!0),r=(-1<D.indexOf(c.typeKeywords,"ArcGIS Server")||"Feature Collection"==
c.type?this.i18n().source+" ":"")+("GeoJson"===c.type?"GeoJSON":c.type),f="";n&&("Web Scene"===r&&(r=-1<D.indexOf(c.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),f='\x3cimg src\x3d"'+n+'" alt\x3d"'+r+'" title\x3d"'+r+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return f}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(c){var k=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+c.id+"/info/"+c.thumbnail+(k?"?token\x3d"+k:"")},small:function(c,k,n){var r=D.create,f=r("div",{"class":this.detailClass});D.addClass(f,
"small");var m={target:"",href:"#"};k&&(k=r("div",{"class":this.thumbContainerClass},f),D.addClass(f,n||"left"),c.thumbnail&&0<c.thumbnail.length?r("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},k):r("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},k));r("a",{href:m.href,target:m.target,innerHTML:c.title,alt:m.tip,title:m.tip},r("span",{"class":this.titleClass},f));n=this._util.getSnippet(c.snippet,c.description);r("span",{"class":this.snippetClass,
innerHTML:n},f);n=r("span",null,null);r("span",{innerHTML:"owned by ","class":"dim"},n);n=r("span",{"class":"esriItemAuthor"},n);r("a",{innerHTML:c.owner,href:""},n);return f},medium:function(c,k){var n=D.create,r=n("div",{"class":this.detailClass+" medium"}),f=esriGeowConfig.baseUrl+"group.html?id\x3d"+c.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(k.showThumb){var m=n("div",{"class":this.thumbContainerClass},r);D.addClass(r,k.align||"left");if(k.groupsUser){var q=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(c.owner,D.hitch(this,function(g,e,d){e.code||e.message?n("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},n("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):"public"===g.access||e.orgId&&e.orgId===q.accountId?c.thumbnail&&0<c.thumbnail.length?n("img",{src:this._getThumbnailUrl(c),
"class":this.thumbClass},n("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):n("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},n("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):n("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},n("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m))},c))}else c.thumbnail&&0<c.thumbnail.length?n("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},n("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):n("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},n("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)),n("br",null,m),D.place(this._util.getGroupLinks(c),m)}var l=n("div",{"class":"itemTextContainer"},r);n("a",{href:f,innerHTML:c.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n("span",{"class":this.titleClass},l));var b=this._util.getSnippet(c.snippet,
c.description);n("span",{"class":this.snippetClass,innerHTML:b||""},l);l=n("span",null,l);n("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},l);b=n("span",{"class":"esriItemAuthor"},l);b=n("a",{innerHTML:c.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},b);k.showProfilePopup?(this._bindProfilePopup(b),D.attr(b,{"class":"linkNoHref",owner:c.owner})):D.attr(b,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+c.owner);b=c.created;n("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(b),"class":"dim"},l);return r}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(c){var k=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+c.username+"/info/"+c.thumbnail+(k?"?token\x3d"+k:"")},medium:function(c,k){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var n=arcgisonline.sharing.util.getUser(),r=D.create,f=r("div",{"class":this.detailClass});D.addClass(f,"medium");r("div",{"class":this.titleClass,innerHTML:c.fullName||c.username},f);if(n&&n.accountId&&c.accountId&&c.role&&n.accountId==c.accountId){var m="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===c.role?m+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===c.role?m+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===c.role&&(m+=arcgisonline.sharing.dijit.views.profile.i18n().user);r("span",{innerHTML:m},r("strong",{},f))}k.showThumb&&(m=r("div",{"class":this.thumbContainerClass},f),D.addClass(f,k.align||"left"),c.thumbnail&&0<c.thumbnail.length?r("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},m):r("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},m));m=r("div",{"class":this.snippetClass},
r("span",{"class":"esriItemLinks"},f));var q=this._util.removeHTMLTags(c.description),l=n&&n.accountId&&c.orgId&&n.accountId===c.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;q=0<q.length?c.description:l;q=this._util.linkifyText(q);8>D.isIE&&(q="\x3cpre class\x3d'esriProfileDesc'\x3e"+q+"\x3c/pre\x3e");r("span",{innerHTML:q,style:"white-space:pre-wrap;"},m,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return f;
m=r("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},f);q=r("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+c.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},m,"last");D.connect(q,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,D.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+c.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+c.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");q=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var b=(l=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();n&&(n.username===c.username?r("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},m,"last"):n.accountId&&n.role&&c.orgId&&c.role&&(q||l&&b)&&n.accountId===c.orgId&&r("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+c.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},m,"last"));r("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
c.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},m,"last");r("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+c.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},m,"last");r("div",{style:{clear:"both",width:"100%"}},f);return f}}})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/organization/widgets/GroupIcon arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d,h,t,z,v,y,C,F,x,u,w,A){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importDefault(d);h=a.__importDefault(h);t=a.__importDefault(t);z=a.__importDefault(z);v=a.__importDefault(v);y=a.__importDefault(y);C=a.__importDefault(C);F=a.__importDefault(F);x=
a.__importDefault(x);u=a.__importDefault(u);w=a.__importDefault(w);A=a.__importDefault(A);return function(){function E(G,H){this.templateString=r["default"];this.i18n=f["default"];this.icons=g["default"];this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}E.prototype.postCreate=function(){var G;this.inherited(arguments);this.telemetry=w["default"].init(this.portal,!0);this.dialog=new b["default"]({"class":"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});
this.currentUser=F["default"].getUser();this.isSelf=(null===(G=this.currentUser)||void 0===G?void 0:G.username)===this.username;this.addEventListeners()};E.prototype.open=function(){this.logEvent("open");this.render()};E.prototype.close=function(){this.loaded&&(l["default"].close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};E.prototype.handleDialogKeydown=function(G){var H=this;if(G.keyCode===k["default"].TAB)if(G.stopPropagation(),this.lastFocusItem!==G.target||G.shiftKey)G.shiftKey&&
this.firstFocusItem===G.target&&(G.preventDefault(),this.opener.focus(),this.close());else{G.preventDefault();var K=t["default"].getFocusableElements(document.body);K.forEach(function(I,J){I===H.opener&&K[J+1].focus()});this.close()}};E.prototype.render=function(){var G=this;this.getUser(this.username).then(function(H){var K,I,J=null===(K=G.currentUser)||void 0===K?void 0:K.userRole;K=H.orgId&&H.orgId===(null===(I=G.currentUser)||void 0===I?void 0:I.orgId);I=(null===J||void 0===J?void 0:J.isAdmin())&&
K;G.canUpdateProfile=G.isSelf||I||(null===J||void 0===J?void 0:J.canUpdateUsers())&&K;H.fullName||(H.fullName=h["default"].createFullName(H));J=H.username;I=H.fullName;K=H.groups;var L=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new v["default"]({member:new C["default"](a.__assign(a.__assign({},H),{portal:G.portal})),cssClasses:"member-thumb--small margin-right-half flex-0"},G.domNode.querySelector(".js-member-thumb"));G.fullNameEl.textContent=I;G.usernameEl.textContent=J;L&&(L=d["default"].escapeNewlines(d["default"].addHyperlinks(d["default"].restoreNewlines(L))));
G.bioEl.innerHTML=d["default"].insertHTMLLineBreaks(L);L||e["default"].hideNode(G.bioContainer);K?G.renderGroups(K):G.getUserGroups(J).then(function(M){G.renderGroups(M.results)});G.user=H;G.getUserItems(J).then(function(M){M.total&&(G.itemCountEl.textContent=G.itemTotal=M.total,e["default"].showNode(G.itemsSection));G.showContent();G.checkIfHideProfileLink()},function(){G.showContent();G.checkIfHideProfileLink()})})};E.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||
e["default"].hideNode(this.viewProfileBtn)};E.prototype.renderGroups=function(G){var H=this;if(G&&G.length){if(G.slice(0,5).forEach(function(I){I=new y["default"]({group:I,portal:H.portal,size:"32",letterSize:"1",cssClasses:"org-member-card__group-tile"});H.groupIcons.appendChild(I.domNode)}),5<G.length){var K=document.createElement("div");K.className="org-member-card__more-tile link-darker-gray flex-center";K.textContent="+"+(G.length-5);this.groupIcons.appendChild(K)}}else e["default"].hideNode(this.groupsSection)};
E.prototype.getUserItems=function(G){var H;return F["default"].request({url:x["default"].restBaseUrl+"search",content:{q:'owner:"'+G+'" '+((null===(H=null===x["default"]||void 0===x["default"]?void 0:x["default"].viewQueries)||void 0===H?void 0:H.none)||""),sortField:"relevance",sortOrder:"desc",num:100}})};E.prototype.getUserGroups=function(G){return F["default"].request({url:x["default"].restBaseUrl+"community/groups",content:{q:'(owner:"'+G+'")'}})};E.prototype.showContent=function(){var G=this;
this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&!this.bioEl.innerHTML&&e["default"].hideNode(this.bottomSection);this.loader.classList.remove("is-active");e["default"].showNode(this.content);this.loaded=!0;l["default"].open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){G.opener.focus();G.close()}});var H=t["default"].getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-1];
this.firstFocusItem.focus();this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){e["default"].showHide(G.bioToggle,G.bioEl.scrollHeight>G.bioEl.clientHeight)},100)};E.prototype.getUser=function(G){return F["default"].request({url:x["default"].restBaseUrl+"community/users/"+G})};E.prototype.addEventListeners=function(){var G=this;this.own(n["default"](this.closeIcon,"click",
function(){l["default"].close(G.dialog)}),n["default"](this.domNode,"click",function(H){H.stopPropagation()}),n["default"](document.body,"click",function(){G.close()}),n["default"](this.groupsSection,"click",function(){G.logEvent("view all groups");z["default"].goToPage("groups",G.user)}),n["default"](this.itemsSection,"click",function(){G.logEvent("view all content");z["default"].goToPage("content",G.user)}),n["default"](this.viewProfileBtn,"click",function(){G.logEvent("view profile");window.open(x["default"].baseUrl+
"user.html"+(G.isSelf?"":"?user\x3d"+G.username),"_blank")}),n["default"](this.bioToggle,"click",function(){return G.handleBioToggleClick()}))};E.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};E.prototype.logEvent=function(G){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:G})};return E=a.__decorate([A["default"](q["default"],m["default"],u["default"],c["default"])],E)}()})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g){D=D("dijit.TooltipDialog",[f,l,q,m],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:b,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(n(this.domNode,"keydown",k.hitch(this,"_onKey")))},orient:function(e,d,h){e={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[d+"-"+h];B.replace(this.domNode,e,this._currentOrientClass||"");this._currentOrientClass=e},focus:function(){this._getFocusItems();
r.focus(this._firstFocusItem)},onOpen:function(e){this.orient(this.domNode,e.aroundCorner,e.corner);var d=e.aroundNodePos;"M"==e.corner.charAt(0)&&"M"==e.aroundCorner.charAt(0)?(this.connectorNode.style.top=d.y+(d.h-this.connectorNode.offsetHeight>>1)-e.y+"px",this.connectorNode.style.left=""):"M"==e.corner.charAt(1)&&"M"==e.aroundCorner.charAt(1)&&(this.connectorNode.style.left=d.x+(d.w-this.connectorNode.offsetWidth>>1)-e.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(e){if(e.keyCode==
c.ESCAPE)this.defer("onCancel"),e.stopPropagation(),e.preventDefault();else if(e.keyCode==c.TAB){var d=e.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(e.stopPropagation(),e.preventDefault()):d==this._firstFocusItem&&e.shiftKey?(r.focus(this._lastFocusItem),e.stopPropagation(),e.preventDefault()):d!=this._lastFocusItem||e.shiftKey?e.stopPropagation():(r.focus(this._firstFocusItem),e.stopPropagation(),e.preventDefault())}}});a("dojo-bidi")&&D.extend({_setTitleAttr:function(e){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,e):e;this._set("title",e)},_setTextDirAttr:function(e){this._created&&this.textDir==e||(this._set("textDir",e),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return D})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(D,B,a,c){c=a.__importDefault(c);return function(){function k(){}k.getFocusableElements=function(n){n=n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');
for(var r=[],f=0;f<n.length;f++){var m=n[f];null===m.offsetParent||c["default"].canBeDisabled(m)&&m.disabled||r.push(m)}return r};k.trapFocus=function(n){function r(m){var q=f(),l=q[0];q=q[q.length-1];if("Tab"===m.key||9===m.keyCode)m.shiftKey?document.activeElement===l&&(q.focus(),m.preventDefault()):document.activeElement===q&&(l.focus(),m.preventDefault())}var f=this.getFocusableElements.bind(this,n);n.addEventListener("keydown",r);return r};k.untrapFocus=function(n,r){n.removeEventListener("keydown",
r)};return k}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),function(D,B,a,c,k,n,r,f,m,q,l,b,g){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);
q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);return function(){function e(d,h){this.icons=q["default"];this.templateString=k["default"];this.hide=f["default"].hide;this.show=f["default"].show;this.cssClasses="";this.showTooltip=!1}e.prototype.postMixInProperties=function(){var d,h,t;this.inherited(arguments);if(this.member.thumbnailUrl&&this.member.thumbnailUrl!==this.member.defaultThumbnailUrl){var z=(null===(h=null===(d=g["default"].userInfo)||void 0===
d?void 0:d.credential)||void 0===h?void 0:h.token)||(null===(t=g["default"].userInfo)||void 0===t?void 0:t.token);z&&-1===this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+=(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?")+"token\x3d"+z);this.member.initials="";this.member.backgroundColor="#FFFFFF"}else this.showInitials()};e.prototype.postCreate=function(){var d=this;this.inherited(arguments);this.showTooltip&&(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));
this.own(c["default"](this.img,"error",function(){return d.showInitials()}))};e.prototype.showInitials=function(){if(this.member.fullName.trim()){var d=this.member.fullName.split(" ");this.member.initials=d[0].substring(0,1)+(d[1]?d[1].substring(0,1):"")}else this.member.username&&(this.member.initials=this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=
this.member.backgroundColor);l["default"].hideNode(this.img);l["default"].showNode(this.initials)};e.prototype._getMemberFillColor=function(d){var h=d.id?d.id.substr(d.id.length-6):"";m["default"].isValidHex(h)||(h=m["default"].stringToHex(d.username));d=m["default"].hexToRgb(h);return"rgba("+d.r+","+d.g+","+d.b+", 0.2)"};return e=a.__decorate([b["default"](r["default"],n["default"])],e)}()})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(D,
B,a,c,k){D=D.NodeList;B.extend(D,{_anim:function(n,r,f){f=f||{};var m=k.combine(this.map(function(q){q={node:q};B.mixin(q,f);return n[r](q)}));return f.auto?m.play()&&this:m},wipeIn:function(n){return this._anim(k,"wipeIn",n)},wipeOut:function(n){return this._anim(k,"wipeOut",n)},slideTo:function(n){return this._anim(k,"slideTo",n)},fadeIn:function(n){return this._anim(c,"fadeIn",n)},fadeOut:function(n){return this._anim(c,"fadeOut",n)},animateProperty:function(n){return this._anim(c,"animateProperty",
n)},anim:function(n,r,f,m,q){var l=k.combine(this.map(function(b){return c.animateProperty({node:b,properties:n,duration:r||350,easing:f})}));m&&a.after(l,"onEnd",m,!0);return l.play(q||0)}});return D})},"arcgisonline/sharing/geow/QueryReadStore":function(){define("require exports tslib ./Community ./Content ../../tsutils/declareDecorator dojo/topic dojox/data/QueryReadStore".split(" "),function(D,B,a,c,k,n,r,f){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);
f=a.__importDefault(f);return function(){function m(){}m.prototype._fetchItems=function(q,l,b){var g=this,e=q.serverQuery||q.query||{};e.start=q.start||0;e.start++;q.count&&(e.num=q.count);k["default"].search(this.url,e,function(d){var h=d.total||-1;r["default"].publish("gridCount",[d.total]);g.onResultCount(d.total);g._total=d.total;g._items=[];(d.results||[]).forEach(function(v){var y,C,F=v.tags||v.keywords||[],x=void 0===v.imageUrl?k["default"]._getItemImageUrl(v):v.imageUrl,u=v.uploaded||v.created,
w=void 0===v.extent?c["default"]._getGroupTitleLink(v):v.title,A=v.item||"",E="";0<(null===(y=v.snippet)||void 0===y?void 0:y.length)&&"null"!==v.snippet?E=150<v.snippet.length?v.snippet.substring(0,150)+"...":v.snippet:0<(null===(C=v.description)||void 0===C?void 0:C.length)&&"null"!==v.description&&(E=150<v.description.length?v.description.substring(0,150)+"...":v.description);v={id:v.id||"",owner:v.owner,title:w,description:v.description,snippet:E,snippetFull:v.snippet,tags:F.join?F.join(","):
F,imageUrl:x,thumbnail:v.thumbnail,isInvitationOnly:v.isInvitationOnly,created:u,modified:v.modified,itemType:v.itemType||"",typeKeywords:v.typeKeywords||"",type:v.type||"",extent:v.extent||"",item:A,numComments:v.numComments,numRatings:v.numRatings,avgRating:v.avgRating,numViews:v.numViews};g._items.push({i:v,r:g})},g);g._itemsByIdentity={};g._identifier="id";for(d=0;d<g._items.length;++d){var t=g._items[d].i,z=t.id;g._itemsByIdentity[z]||(g._itemsByIdentity[z]=t)}h=-1===h?g._items.length:h;l(g._items,
q,h);g.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);g._lastServerQuery=a.__assign({},e)}.bind(this))};m.prototype.onResultCount=function(q){};return m=a.__decorate([n["default"](f["default"])],m)}()})},"arcgisonline/sharing/geow/Content":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ../util dojo/dom-construct dojo/_base/lang dojo/data/ItemFileReadStore dojo/data/ItemFileWriteStore dojo/topic esri/arcgis/Portal esri/config dojo/i18n!../../nls/arcgisonline ../../pages/utils/queryHandler".split(" "),
function(D,B,a,c,k,n,r,f,m,q,l,b,g,e,d){c=a.__importDefault(c);k=a.__importDefault(k);n=a.__importDefault(n);r=a.__importDefault(r);f=a.__importDefault(f);m=a.__importDefault(m);q=a.__importDefault(q);l=a.__importDefault(l);b=a.__importDefault(b);g=a.__importDefault(g);e=a.__importDefault(e);d=a.__importStar(d);return function(){function h(){}h.getUserInfo=function(t,z){var v=n["default"].getUser();null!==v&&n["default"].getJson(c["default"].restBaseUrl+"content/users/"+(v.username||v.email),t,z)};
h.getUserItems=function(t,z,v){var y=n["default"].getUser();null!==y&&(y=c["default"].restBaseUrl+"content/users/"+(y.username||y.email),null!==t&&""!==t&&(y=y+"/"+t),n["default"].getJson(y,z,v))};h.getUserItemsByUser=function(t,z,v,y){null!==n["default"].getUser()&&(t=c["default"].restBaseUrl+"content/users/"+t,null!=z&&""!==z&&(t=t+"/"+z),n["default"].getJson(t,v,y))};h.getUserServers=function(t){void 0!==h._userServers&&t(h._userServers);n["default"].getJson(c["default"].serversRestBaseUrl,function(z){t(h._userServers=
z.servers)},function(){t(null)})};h.addItem=function(t,z,v,y){var C=n["default"].getUser();if(null!==C){C=c["default"].restBaseUrl+"content/users/"+(C.username||C.email);null!==t&&(C=C+"/"+t);C+="/addItem";t=!1;for(var F=0;F<z.childNodes.length;F++){var x=z.childNodes[F];if("async"===x.name&&"true"===x.value){t=!0;break}}t?n["default"].postForm(z,C,h.addItemAsyncHandler.bind(h,v,y),y):n["default"].postForm(z,C,v,y)}};h.addItemByUser=function(t,z,v,y,C){if(null!==n["default"].getUser()){t=c["default"].restBaseUrl+
"content/users/"+t;null!=z&&(t=t+"/"+z);t+="/addItem";z=!1;for(var F=0;F<v.childNodes.length;F++){var x=v.childNodes[F];if("async"===x.name&&"true"===x.value){z=!0;break}}z?n["default"].postForm(v,t,h.addItemByUserAsyncHandler.bind(h,y,C),C):n["default"].postForm(v,t,y,C)}};h.addItemAsyncHandler=function(t,z,v,y){(null===v||void 0===v?0:v.success)&&!0===v.success?h.itemStatus(v,h.itemStatusHandler.bind(h,0,v,t,z),z):z(v,y)};h.addItemByUserAsyncHandler=function(t,z,v,y){(null===v||void 0===v?0:v.success)&&
!0===v.success?h.itemStatus(v,h.itemStatusByUserHandler.bind(h,0,v,t,z),z):z(v,y)};h.deleteService=function(t,z){this.getUserServers(function(v){if((null===v||void 0===v?0:v.length)&&-1<t.indexOf(""+c["default"].featuresRestBaseUrl+v[0].id+"/")){v=""+c["default"].serversRestBaseUrl+v[0].id+"/arcgis/admin/services/";v+=t.substr(t.indexOf(z)).replace("/",".")+"/delete";g["default"].defaults.io.proxyUrl=c["default"].proxyServer;var y=function(){g["default"].defaults.io.proxyUrl=null};n["default"].postJson("",
v,y,y)}})};h.publishService=function(t,z,v,y){t=n["default"].getUser();null!==t&&n["default"].postJson(z.params,c["default"].restBaseUrl+"content/users/"+(t.username||t.email)+"/publish",function(C){var F;C=C.services[0];C.success=C.success||0<(null===(F=C.serviceurl)||void 0===F?void 0:F.length);C.success&&(C.id=C.serviceItemId);v(C)},function(){v({success:!1})})};h.itemStatus=function(t,z,v){var y,C=n["default"].getUser();if(null!==C){var F=C.username||C.email;C=t.folder;F=c["default"].restBaseUrl+
"content/users/"+(t.overrideUser||F);0<(null===C||void 0===C?void 0:C.length)&&"/"!==C&&(F+="/"+C);F=F+"/items/"+t.id+"/status";t.jobid&&(F+="?jobid\x3d"+t.jobid);"image service"===(null===(y=t.type)||void 0===y?void 0:y.toLowerCase())&&(F+="\x26jobType\x3dPublishImageService");n["default"].getJson(F,z,v)}};h.itemStatusByUser=function(t,z,v){if(null!==n["default"].getUser()){var y=t.folder,C=c["default"].restBaseUrl+"content/users/"+t.owner;0<(null===y||void 0===y?void 0:y.length)&&"/"!==y&&(C+="/"+
y);C=C+"/items/"+t.id+"/status";n["default"].getJson(C,z,v)}};h.itemStatusHandler=function(t,z,v,y,C,F){(null===C||void 0===C?0:C.status)&&"processing"===C.status?(t++,setTimeout(function(){h.itemStatus(z,h.itemStatusHandler.bind(h,t,z,v,y),y)},Math.min(1E3*Math.pow(2,t),6E4))):(C=a.__assign(a.__assign({},C),z),v(C,F))};h.itemStatusByUserHandler=function(t,z,v,y,C,F){(null===C||void 0===C?0:C.status)&&"processing"===C.status?(t++,setTimeout(function(){h.itemStatusByUser(z,h.itemStatusByUserHandler.bind(h,
t,z,v,y),y)},Math.min(1E3*Math.pow(2,t),6E4))):(C=a.__assign(a.__assign({},C),z),v(C,F))};h.deleteItems=function(t,z,v){var y=n["default"].getUser();if(null!==y){y=y.username||y.email;if(1===t.length)return t=t[0],y=c["default"].restBaseUrl+"content/users/"+y,null!=t.folderId&&""!==t.folderId&&"/"!==t.folderId&&(y+="/"+t.folderId),y=y+"/items/"+t.id+"/delete",n["default"].postJson("",y,z,v);if(1<t.length){var C="",F="";t.forEach(function(x){C+=""+F+x.id;F=","});t={items:C};y=c["default"].restBaseUrl+
"content/users/"+y+"/deleteItems";return n["default"].postJson(t,y,z,v)}}};h.deleteItemsByUser=function(t,z,v,y){if(null!==n["default"].getUser()){if(1===z.length)return z=z[0],t=c["default"].restBaseUrl+"content/users/"+t,null!==z.folderId&&""!==z.folderId&&"/"!==z.folderId&&(t+="/"+z.folderId),t=t+"/items/"+z.id+"/delete",n["default"].postJson("",t,v,y);if(1<z.length){var C="",F="";z.forEach(function(x){C+=""+F+x.id;F=","},this);z={items:C};t=c["default"].restBaseUrl+"content/users/"+t+"/deleteItems";
return n["default"].postJson(z,t,v,y)}}};h.getApplicationCode=function(t,z,v){var y=null,C="WMA2Code";f["default"].isObject(t)?(y=t.id,"Mobile Application"===t.type&&(C="MobileApp2Code")):y=t;n["default"].getJson(c["default"].restBaseUrl+"content/items/"+y+"/relatedItems?relationshipType\x3d"+C,z,v)};h.addApplicationCodeRelate=function(t,z,v,y){var C=n["default"].getUser();if(null===C)l["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);else{var F=null,x="WMA2Code";
f["default"].isObject(t)?(F=t.id,"Mobile Application"===t.type&&(x="MobileApp2Code")):F=t;n["default"].postJson({relationshipType:x,originItemId:F,desinationItemId:z},c["default"].restBaseUrl+"content/users/"+(C.username||C.email)+"/addRelationship?relationshipType\x3d"+x+"\x26originItem\x3d"+F+"\x26destinationItemId\x3d"+z,v,y)}};h.getComments=function(t,z,v,y){n["default"].getJson(c["default"].restBaseUrl+"content/items/"+t+"/comments",v,y)};h.addComment=function(t,z,v,y){null===n["default"].getUser()?
l["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):n["default"].postJson({comment:z},c["default"].restBaseUrl+"content/items/"+t+"/addComment",v,y)};h.deleteComment=function(t,z,v,y){null===n["default"].getUser()?l["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):n["default"].postJson({},c["default"].restBaseUrl+"content/items/"+t+"/comments/"+z+"/delete",v,y)};h.addRating=function(t,z,v,y){null===n["default"].getUser()?
l["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):n["default"].postJson({rating:z},c["default"].restBaseUrl+"content/items/"+t+"/addRating",v,y)};h.getRating=function(t,z,v){null!=n["default"].getUser()&&n["default"].postJson({},c["default"].restBaseUrl+"content/items/"+t+"/rating",z,v)};h.deleteItem=function(t,z,v){var y=n["default"].getUser();if(null!==y){y=y.username||y.email;y=c["default"].restBaseUrl+"content/users/"+(t.owner||y);var C=t.ownerFolder||
t.folderId;C&&"/"!==C&&(y=y+"/"+C);y=y+"/items/"+t.id+"/delete";n["default"].postJson("",y,z,v)}};h.deleteItemByUser=function(t,z,v){if(null!==n["default"].getUser()){var y=c["default"].restBaseUrl+"content/users/"+t.owner;null!=t.folderId&&(y=y+"/"+t.folderId);y=y+"/items/"+t.id+"/delete";n["default"].postJson("",y,z,v)}};h.updateItem=function(t,z,v,y){var C=n["default"].getUser();null!==C&&(C=C.username||C.email,C=c["default"].restBaseUrl+"content/users/"+(t.owner||C),null!=t.folderId&&(C=C+"/"+
t.folderId),C=C+"/items/"+t.id+"/update",n["default"].postForm(z,C,v,y))};h.updateItemByUser=function(t,z,v,y){if(null!==n["default"].getUser()){var C=c["default"].restBaseUrl+"content/users/"+t.owner;null!==t.folderId&&(C=C+"/"+t.folderId);C=C+"/items/"+t.id+"/update";n["default"].postForm(z,C,v,y)}};h.updateItemJson=function(t,z,v,y){var C=n["default"].getUser();null!==C&&(C=C.username||C.email,C=c["default"].restBaseUrl+"content/users/"+(t.overrideUser||C),null!==t.folderId&&(C=C+"/"+t.folderId),
C=C+"/items/"+t.id+"/update",n["default"].postJson(z,C,v,y))};h.updateItemJsonByUser=function(t,z,v,y){null!==n["default"].getUser()&&(t=c["default"].restBaseUrl+"content/users/"+t,null!==z.folderId&&(t=t+"/"+z.folderId),t=t+"/items/"+z.id+"/update",n["default"].postJson(v,t,y))};h.filterErrors=function(t){t=null===t||void 0===t?void 0:t.results;if(null===t||void 0===t?0:t.length)if(t=t.filter(function(z){return z.error}),null===t||void 0===t?0:t.length)return n["default"].checkError(t[0].error),
t;return!1};h.shareItems=function(t,z,v){var y=n["default"].getUser();y&&(y=y.username||y.email,n["default"].postJson(t,c["default"].restBaseUrl+"content/users/"+(t.owner||y)+"/shareItems",function(C){var F=h.filterErrors(C);F?v(F):z(C)},v))};h.shareItemsByUser=function(t,z,v,y){null!==n["default"].getUser()&&n["default"].postJson(z,c["default"].restBaseUrl+"content/users/"+t+"/shareItems",v,y)};h.shareItem=function(t,z,v,y){var C=n["default"].getUser();null!==C&&(C=c["default"].restBaseUrl+"content/users/"+
(C.username||C.email),null!=t.folderId&&(C=C+"/"+t.folderId),C=C+"/items/"+t.id+"/share",n["default"].postJson(z,C,v,y))};h.shareItemByID=function(t,z,v,y){null!==n["default"].getUser()&&n["default"].postJson(z,c["default"].restBaseUrl+"content/items/"+t.id+"/share",v,y)};h.unshareItems=function(t,z,v){var y=n["default"].getUser();null!==y&&(y=y.username||y.email,n["default"].postJson(t,c["default"].restBaseUrl+"content/users/"+(t.owner||y)+"/unshareItems",function(C){var F=h.filterErrors(C);F?v(F):
z(C)},v))};h.unshareItemsByUser=function(t,z,v,y){null!==n["default"].getUser()&&n["default"].postJson(z,c["default"].restBaseUrl+"content/users/"+t+"/unshareItems",v,y)};h.unshareItem=function(t,z,v,y){var C=n["default"].getUser();null!==C&&(C=c["default"].restBaseUrl+"content/users/"+(C.username||C.email),null!=t.folderId&&(C=C+"/"+t.folderId),C=C+"/items/"+t.id+"/unshare",n["default"].postJson(z,C,v,y))};h.unshareItemByID=function(t,z,v,y){null!==n["default"].getUser()&&n["default"].postJson(z,
c["default"].restBaseUrl+"content/items/"+t.id+"/unshare",v,y)};h.moveItems=function(t,z,v,y){var C=n["default"].getUser();if(null!==C){var F="",x="";(t||[]).forEach(function(u){F+=""+x+u.id;x=","});z.items=F;n["default"].postJson(z,c["default"].restBaseUrl+"content/users/"+(C.username||C.email)+"/moveItems",v,y)}};h.moveItemsByUser=function(t,z,v,y,C){if(null!==n["default"].getUser()){var F="",x="";(z||[]).forEach(function(u){F+=""+x+u.id;x=","});v.items=F;n["default"].postJson(v,c["default"].restBaseUrl+
"content/users/"+t+"/moveItems",y,C)}};h.reassignItem=function(t,z,v,y,C){if(null!==n["default"].getUser()){var F=c["default"].restBaseUrl+"content/users/"+t.owner;null!==t.folderId&&(F=F+"/"+t.folderId);F=F+"/items/"+t.id+"/reassign";n["default"].postJson({targetUsername:z,targetFolderName:v},F,y,C)}};h.moveItem=function(t,z,v,y){var C=n["default"].getUser();null!==C&&(C=c["default"].restBaseUrl+"content/users/"+(C.username||C.email),null!=t.folderId&&(C=C+"/"+t.folderId),C=C+"/items/"+t.id+"/move",
n["default"].postJson(z,C,v,y))};h.moveItemByUser=function(t,z,v,y){if(null!==n["default"].getUser()){var C=c["default"].restBaseUrl+"content/users/"+t.owner;null!=t.folderId&&(C=C+"/"+t.folderId);C=C+"/items/"+t.id+"/move";n["default"].postJson(z,C,v,y)}};h.search=function(t,z,v,y){var C,F;if(t){y="";if(0>t.indexOf("community/groups")){var x=n["default"].userPreferences(null,"contentModePrefs"),u=d.queryToObject(window.location.search.slice(1));"all"===(null===(C=u.content)||void 0===C?void 0:C.toLowerCase())?
x.contentMode="GIS":"web"===(null===(F=u.content)||void 0===F?void 0:F.toLowerCase())&&(x.contentMode="Web");y=(null===x||void 0===x?0:x.contentMode)&&"GIS"===x.contentMode?c["default"].viewQueries.gis:y+c["default"].viewQueries.web;y+=c["default"].viewQueries.none}z.q+=y;n["default"].getJsonWithContent(t,z,v)}};h.getFeaturedItems=function(t,z,v){n["default"].getJson(c["default"].restBaseUrl+"content/items/"+t+"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward",z)};h.getUserItem=
function(t,z,v){v=n["default"].getUser();null!==v&&(v=c["default"].restBaseUrl+"content/users/"+(v.username||v.email),null!=t.folderId&&(v=v+"/"+t.folderId),v=v+"/items/"+t.id,n["default"].getJson(v,z))};h.getItem=function(t,z,v){n["default"].getJson(c["default"].restBaseUrl+"content/items/"+t,z,v)};h.getItemData=function(t,z,v){n["default"].getJson(c["default"].restBaseUrl+"content/items/"+t+"/data",z,v)};h.getItemFolder=function(t,z){var v=n["default"].getUser();if(null!==v){var y=v.username||v.email;
n["default"].getJson(c["default"].restBaseUrl+"content/users/"+y,function(C){for(var F=null,x=0;x<C.items.length;x++)if(C.items[x].id===t){F="";break}if(null!==F)z(F);else{var u=function(w){for(var A=w.currentFolder.id,E=0;E<w.items.length;E++)if(w.items[E].id===t){F=A;z(F);break}};C.folders.forEach(function(w){n["default"].getJson(c["default"].restBaseUrl+"content/users/"+y+"/"+w.folderName,u)})}})}};h.itemsToStore=function(t){var z,v=(null===(z=t.currentFolder)||void 0===z?void 0:z.id)||"",y=[];
(t.items||[]).forEach(function(C,F){var x,u;C.folderId=v;C.imageUrl=h._getItemIconUrl(C);C.selected=!1;C.item=C.name||C.url||C.title;0<(null===(x=C.snippet)||void 0===x?void 0:x.length)&&"null"!==C.snippet?C.snippet=C.snippet:0<(null===(u=C.description)||void 0===u?void 0:u.length)&&"null"!==C.description?(x=n["default"].removeHTMLTags(C.description),C.snippet=150<x.length?x.substring(0,150)+"...":x):C.snippet="";delete C.listingProperties;delete C.properties;y[F]=C});return new q["default"]({data:{identifier:"id",
label:"item",items:y},url:void 0})};h.searchToStore=function(t){var z=[];(t.items||t.results||[]).forEach(function(v,y){var C,F=v.id,x=v.owner,u=v.title,w=v.description,A=v.created,E=v.modified,G=(null===(C=v.tags)||void 0===C?void 0:C.join(","))||[];C=h._getItemImageUrl(v);z[y]={id:F,owner:x,title:u,description:w,tags:G,imageUrl:C,created:A,modified:E}});return new m["default"]({data:{identifier:"id",label:"item",items:z},url:void 0})};h._getPremiumItemNode=function(t){var z,v,y=(new b["default"].PortalItem(a.__assign(a.__assign({},
t),{portal:{isPortal:null===(z=c["default"].self)||void 0===z?void 0:z.isPortal}}))).getTypeInfo();z=(null===(v=c["default"].self)||void 0===v?0:v.isPortal)?"portal":"";t=k["default"].includes(t.typeKeywords,"Requires Credits");return y.isPremiumContent?(t=r["default"].create("div",{className:"esri-premium-content",title:t?this.i18n["premiumcontentcreditstitle"+z]:this.i18n["premiumcontenttitle"+z],innerHTML:t?this.i18n.premiumcontent:this.i18n.subscriptioncontent}),r["default"].create("img",{className:"esri-premium-icon",
src:y.premiumIconUrl},t,"first"),t):!1};h._getItemIconUrl=function(t){var z;return(new b["default"].PortalItem(a.__assign(a.__assign({},t),{portal:{isPortal:null===(z=c["default"].self)||void 0===z?void 0:z.isPortal}}))).iconUrl};h._getItemImageUrl=function(t,z){var v,y=(null===(v=t.type)||void 0===v?void 0:v.toLowerCase())||"";return n["default"].relativeToExplicitUrl("geocoding service"===y||"network analysis service"===y||"geoprocessing service"===y||"geodata service"===y||"geometry service"===
y||"workflow manager service"===y?z?"images/tool_16x16.png":"images/tool_32x32.png":"wms"===y||"kml"===y||"globe service"===y||"map service"===y||"image service"===y||"feature service"===y||"scene service"===y||"stream service"===y?z?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"===y||"mobile application"===y||"web map"===y?z?"images/map_16x16.png":"images/map_32x32.png":"layer"===y||"layer package"===y||"tile package"===y||"vector tile package"===y||"scene package"===
y||"image collection"===y||"explorer layer"===y||"cad drawing"===y?z?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"===y||"desktop add in"===y||"geoprocessing package"===y||"locator package"===y?z?"images/tool-download_16x16.png":"images/tool-download_32x32.png":"map document"===y||"globe document"===y||"scene document"===y?z?"images/map-download_16x16.png":"images/map-download_32x32.png":"task file"===y?z?"images/taskfile16.png":"images/taskfile32.png":z?"images/noimage_16.png":
"images/noimage.gif")};h.changeTypename=function(t,z,v){var y,C,F=new b["default"].PortalItem(a.__assign(a.__assign({},t),{portal:{isPortal:null===(y=c["default"].self)||void 0===y?void 0:y.isPortal}}));y=F.getTypeInfo();F=-1<(null===(C=t.type)||void 0===C?void 0:C.toLowerCase().indexOf("add in"))?F.displayName:F.type;C=k["default"].includes(t.typeKeywords,"Hosted Service");var x=k["default"].includes(t.typeKeywords,"View Service"),u=k["default"].includes(t.typeKeywords,"ArcGIS Server"),w="Feature Service"===
t.type;t="Feature Collection"===t.type;y=y.displayName;v&&(y=C?y+(" ("+(x?this.i18n.viewsWidget.hostedView:w?this.i18n.viewsWidget.hostedData:this.i18n.viewsWidget.hostedService)+")"):y+(" ("+this.i18n.viewsWidget.locatorView+")"));v=u||t?this.i18n.source+" ":"";return z?'\x3cspan title\x3d"'+v+F+'"\x3e'+y+"\x3c/span\x3e":y};h.getFavorites=function(){var t,z={};return n["default"].request({url:c["default"].restBaseUrl+"content/groups/"+c["default"].self.user.favGroupId}).then(function(v){t=v.items||
[];t.forEach(function(y){z[y.id]=!0});return z})};h.addToFavorites=function(t){var z,v,y=n["default"].getUser().favGroupId,C=c["default"].restBaseUrl+"content/items/"+t.id+"/share",F=t.access&&"public"===t.access||(null===(z=t.sharing)||void 0===z?void 0:z.access)&&"public"===t.sharing.access;z=t.access&&"org"===t.access||(null===(v=t.sharing)||void 0===v?void 0:v.access)&&"org"===t.sharing.access;return n["default"].request({url:C,content:{f:"json",everyone:F||!1,org:z||!1,groups:[y],items:[t.id]}},
{usePost:!0})};h.removeFromFavorites=function(t){var z=n["default"].getUser().favGroupId;return n["default"].request({url:c["default"].restBaseUrl+"content/items/"+t.id+"/unshare",content:{f:"json",everyone:!1,org:!1,groups:[z],items:[t.id]}},{usePost:!0})};h.i18n=a.__assign(a.__assign({},e["default"].common),{source:e["default"].itemProperties.source,viewsWidget:e["default"].viewsWidget});return h}()})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),
function(D,B,a,c,k,n,r){return B("dojo.data.ItemFileWriteStore",n,{constructor:function(f){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(m){return r.toISOString(m,{zulu:!0})});f&&!1===f.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(f){if(!f)throw Error("assertion failed in ItemFileWriteStore");
},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(f,m){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof f&&"undefined"!=typeof f)throw Error("newItem() was passed something other than an object");var q=null,l=this._getIdentifierAttribute();if(l===Number)q=this._arrayOfAllItems.length;else{q=f[l];if("undefined"===typeof q)throw Error("newItem() was not passed an identity for the new item");if(D.isArray(q))throw Error("newItem() was not passed an single-valued identity");
}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[q]);this._assert("undefined"===typeof this._pending._newItems[q]);this._assert("undefined"===typeof this._pending._deletedItems[q]);var b={};b[this._storeRefPropName]=this;b[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[q]=b,b[l]=[q]);this._arrayOfAllItems.push(b);l=null;if(m&&m.parent&&m.attribute){l={item:m.parent,attribute:m.attribute,oldValue:void 0};var g=this.getValues(m.parent,
m.attribute);if(g&&0<g.length){var e=g.slice(0,g.length);l.oldValue=1===g.length?g[0]:g.slice(0,g.length);e.push(b);this._setValueOrValues(m.parent,m.attribute,e,!1);l.newValue=this.getValues(m.parent,m.attribute)}else this._setValueOrValues(m.parent,m.attribute,b,!1),l.newValue=b}else b[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(b);this._pending._newItems[q]=b;for(var d in f){if(d===this._storeRefPropName||d===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");
q=f[d];D.isArray(q)||(q=[q]);b[d]=q;if(this.referenceIntegrity)for(g=0;g<q.length;g++)e=q[g],this.isItem(e)&&this._addReferenceToMap(e,b,d)}this.onNew(b,l);return b},_removeArrayElement:function(f,m){var q=a.indexOf(f,m);return-1!=q?(f.splice(q,1),!0):!1},deleteItem:function(f){this._assert(!this._saveInProgress);this._assertIsItem(f);var m=f[this._itemNumPropName],q=this.getIdentity(f);if(this.referenceIntegrity){var l=this.getAttributes(f);f[this._reverseRefMap]&&(f["backup_"+this._reverseRefMap]=
D.clone(f[this._reverseRefMap]));a.forEach(l,function(t){a.forEach(this.getValues(f,t),function(z){this.isItem(z)&&(f["backupRefs_"+this._reverseRefMap]||(f["backupRefs_"+this._reverseRefMap]=[]),f["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(z),attr:t}),this._removeReferenceFromMap(z,f,t))},this)},this);if(l=f[this._reverseRefMap])for(var b in l){var g=null;if(g=this._itemsByIdentity?this._itemsByIdentity[b]:this._arrayOfAllItems[b])for(var e in l[b]){var d=this.getValues(g,e)||[],
h=a.filter(d,function(t){return!(this.isItem(t)&&this.getIdentity(t)==q)},this);this._removeReferenceFromMap(f,g,e);h.length<d.length&&this._setValueOrValues(g,e,h,!0)}}}this._arrayOfAllItems[m]=null;f[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[q];this._pending._deletedItems[q]=f;f[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,f);this.onDelete(f);return!0},setValue:function(f,m,q){return this._setValueOrValues(f,m,q,!0)},setValues:function(f,
m,q){return this._setValueOrValues(f,m,q,!0)},unsetAttribute:function(f,m){return this._setValueOrValues(f,m,[],!0)},_setValueOrValues:function(f,m,q,l){this._assert(!this._saveInProgress);this._assertIsItem(f);this._assert(D.isString(m));this._assert("undefined"!==typeof q);var b=this._getIdentifierAttribute();if(m==b)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");b=this._getValueOrValues(f,m);var g=this.getIdentity(f);if(!this._pending._modifiedItems[g]){var e=
{};for(d in f)e[d]=d===this._storeRefPropName||d===this._itemNumPropName||d===this._rootItemPropName?f[d]:d===this._reverseRefMap?D.clone(f[d]):f[d].slice(0,f[d].length);this._pending._modifiedItems[g]=e}g=!1;if(D.isArray(q)&&0===q.length){if(g=delete f[m],q=void 0,this.referenceIntegrity&&b){var d=b;D.isArray(d)||(d=[d]);for(var h=0;h<d.length;h++)e=d[h],this.isItem(e)&&this._removeReferenceFromMap(e,f,m)}}else{g=D.isArray(q)?q.slice(0,q.length):[q];if(this.referenceIntegrity)if(b){d=b;D.isArray(d)||
(d=[d]);var t={};a.forEach(d,function(z){this.isItem(z)&&(z=this.getIdentity(z),t[z.toString()]=!0)},this);a.forEach(g,function(z){if(this.isItem(z)){var v=this.getIdentity(z);t[v.toString()]?delete t[v.toString()]:this._addReferenceToMap(z,f,m)}},this);for(h in t)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[h]:this._arrayOfAllItems[h],f,m)}else for(h=0;h<g.length;h++)e=g[h],this.isItem(e)&&this._addReferenceToMap(e,f,m);f[m]=g;g=!0}if(l)this.onSet(f,m,b,q);return g},_addReferenceToMap:function(f,
m,q){m=this.getIdentity(m);var l=f[this._reverseRefMap];l||(l=f[this._reverseRefMap]={});(f=l[m])||(f=l[m]={});f[q]=!0},_removeReferenceFromMap:function(f,m,q){m=this.getIdentity(m);var l=f[this._reverseRefMap],b;if(l){for(b in l)b==m&&(delete l[b][q],this._isEmpty(l[b])&&delete l[b]);this._isEmpty(l)&&delete f[this._reverseRefMap]}},_dumpReferenceMap:function(){var f;for(f=0;f<this._arrayOfAllItems.length;f++);},_getValueOrValues:function(f,m){var q=void 0;this.hasAttribute(f,m)&&(q=this.getValues(f,
m),q=1==q.length?q[0]:q);return q},_flatten:function(f){if(this.isItem(f))return{_reference:this.getIdentity(f)};if("object"===typeof f)for(var m in this._datatypeMap){var q=this._datatypeMap[m];if(D.isObject(q)&&!D.isFunction(q)){if(f instanceof q.type){if(!q.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+m+"]");return{_type:m,_value:q.serialize(f)}}}else if(f instanceof q)return{_type:m,_value:f.toString()}}return f},_getNewFileContentString:function(){var f=
{},m=this._getIdentifierAttribute();m!==Number&&(f.identifier=m);this._labelAttr&&(f.label=this._labelAttr);f.items=[];for(m=0;m<this._arrayOfAllItems.length;++m){var q=this._arrayOfAllItems[m];if(null!==q){var l={},b;for(b in q)if(b!==this._storeRefPropName&&b!==this._itemNumPropName&&b!==this._reverseRefMap&&b!==this._rootItemPropName){var g=this.getValues(q,b);if(1==g.length)l[b]=this._flatten(g[0]);else for(var e=[],d=0;d<g.length;++d)e.push(this._flatten(g[d])),l[b]=e}f.items.push(l)}}return c.toJson(f,
!0)},_isEmpty:function(f){var m=!0;if(D.isObject(f))for(var q in f){m=!1;break}else D.isArray(f)&&0<f.length&&(m=!1);return m},save:function(f){this._assert(!this._saveInProgress);this._saveInProgress=!0;var m=this,q=function(){m._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};m._saveInProgress=!1;f&&f.onComplete&&f.onComplete.call(f.scope||k.global)},l=function(g){m._saveInProgress=!1;f&&f.onError&&f.onError.call(f.scope||k.global,g)};if(this._saveEverything){var b=this._getNewFileContentString();
this._saveEverything(q,l,b)}this._saveCustom&&this._saveCustom(q,l);this._saveEverything||this._saveCustom||q()},revert:function(){this._assert(!this._saveInProgress);for(var f in this._pending._modifiedItems){var m=this._pending._modifiedItems[f],q=null;q=this._itemsByIdentity?this._itemsByIdentity[f]:this._arrayOfAllItems[f];m[this._storeRefPropName]=this;for(var l in q)delete q[l];D.mixin(q,m)}for(f in this._pending._deletedItems){var b=this._pending._deletedItems[f];b[this._storeRefPropName]=
this;m=b[this._itemNumPropName];b["backup_"+this._reverseRefMap]&&(b[this._reverseRefMap]=b["backup_"+this._reverseRefMap],delete b["backup_"+this._reverseRefMap]);this._arrayOfAllItems[m]=b;this._itemsByIdentity&&(this._itemsByIdentity[f]=b);b[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(b)}for(f in this._pending._deletedItems)b=this._pending._deletedItems[f],b["backupRefs_"+this._reverseRefMap]&&(a.forEach(b["backupRefs_"+this._reverseRefMap],function(g){this._addReferenceToMap(this._itemsByIdentity?
this._itemsByIdentity[g.id]:this._arrayOfAllItems[g.id],b,g.attr)},this),delete b["backupRefs_"+this._reverseRefMap]);for(f in this._pending._newItems)m=this._pending._newItems[f],m[this._storeRefPropName]=null,this._arrayOfAllItems[m[this._itemNumPropName]]=null,m[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,m),this._itemsByIdentity&&delete this._itemsByIdentity[f];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(f){return f?
(f=this.getIdentity(f),(new Boolean(this._pending._newItems[f]||this._pending._modifiedItems[f]||this._pending._deletedItems[f])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(f,m,q,l){},onNew:function(f,m){},onDelete:function(f){},close:function(f){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(D,B){return D.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(a){D.mixin(this,
a)},getValue:function(a,c,k){this._assertIsItem(a);if(!D.isString(c))throw Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(a,c)&&k?k:a.i[c]},getValues:function(a,c){this._assertIsItem(a);var k=[];this.hasAttribute(a,c)&&k.push(a.i[c]);return k},getAttributes:function(a){this._assertIsItem(a);var c=[],k;for(k in a.i)c.push(k);return c},hasAttribute:function(a,c){return this.isItem(a)&&"undefined"!=typeof a.i[c]},containsValue:function(a,c,k){a=this.getValues(a,
c);c=a.length;for(var n=0;n<c;n++)if(a[n]==k)return!0;return!1},isItem:function(a){return a?"undefined"!=typeof a.r&&a.r==this:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(a){a=a||{};a.store||(a.store=this);var c=this;this._fetchItems(a,function(k,n,r){var f=n.abort||null,m=!1,q=n.start?n.start:0;0==c.doClientPaging&&(q=0);var l=n.count?q+n.count:k.length;n.abort=function(){m=!0;f&&f.call(n)};var b=n.scope||D.global;n.store||(n.store=
c);n.onBegin&&n.onBegin.call(b,r,n);n.sort&&c.doClientSorting&&k.sort(D.data.util.sorter.createSortFunction(n.sort,c));if(n.onItem)for(r=q;r<k.length&&r<l;++r){var g=k[r];m||n.onItem.call(b,g,n)}n.onComplete&&!m&&(r=null,n.onItem||(r=k.slice(q,l)),n.onComplete.call(b,r,n))},function(k,n){n.onError&&n.onError.call(n.scope||D.global,k,n)});return a},getFeatures:function(){return this._features},close:function(a){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},
getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(a,c,k,n){a=this._filterResponse(a);a.label&&(this._labelAttr=a.label);n=a.numRows||-1;this._items=[];D.forEach(a.items,function(q){this._items.push({i:q,r:this})},this);a=a.identifier;this._itemsByIdentity={};if(a){this._identifier=a;var r;for(r=0;r<this._items.length;++r){var f=this._items[r].i,m=f[a];if(this._itemsByIdentity[m])throw Error(this._className+":  The json data as specified by: ["+
this.url+"] is malformed.  Items within the list have identifier: ["+a+"].  Value collided: ["+m+"]");this._itemsByIdentity[m]=f}}else for(this._identifier=Number,r=0;r<this._items.length;++r)this._items[r].n=r;n=this._numRows=-1===n?this._items.length:n;k(this._items,c,n);this._numRows=n},_fetchItems:function(a,c,k){var n=a.serverQuery||a.query||{};this.doClientPaging||(n.start=a.start||0,a.count&&(n.count=a.count));if(!this.doClientSorting&&a.sort){var r=[];D.forEach(a.sort,function(m){m&&m.attribute&&
r.push((m.descending?"-":"")+m.attribute)});n.sort=r.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&D.toJson(n)==D.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,c(this._items,a,this._numRows);else{var f=("post"==this.requestMethod.toLowerCase()?D.xhrPost:D.xhrGet)({url:this.url,handleAs:"json-comment-optional",content:n,failOk:!0});a.abort=function(){f.cancel()};f.addCallback(D.hitch(this,function(m){this._xhrFetchHandler(m,a,c,k)}));
f.addErrback(function(m){k(m,a)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=D.mixin({},n)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this._className+": Invalid attribute argument ('"+a+"').");},fetchItemByIdentity:function(a){if(this._itemsByIdentity){var c=this._itemsByIdentity[a.identity];
if(void 0!==c){a.onItem&&a.onItem.call(a.scope?a.scope:D.global,{i:c,r:this});return}}this._fetchItems({serverQuery:{id:a.identity}},function(k,n){var r=a.scope?a.scope:D.global;try{var f=null;k&&1==k.length&&(f=k[0]);a.onItem&&a.onItem.call(r,f)}catch(m){a.onError&&a.onError.call(r,m)}},function(k,n){var r=a.scope?a.scope:D.global;a.onError&&a.onError.call(r,k)})},getIdentity:function(a){var c=null;return c=this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(a){return[this._identifier]}})})},
"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(D,B){return D("dojo.dnd.AutoSource",B,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(D,B,a){return D("dojo.dnd.Target",a,{constructor:function(){this.isSource=!1;B.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(D,B,a,c){return B("dojo.fx.Toggler",
null,{node:null,showFunc:a.fadeIn,hideFunc:a.fadeOut,showDuration:200,hideDuration:200,constructor:function(k){D.mixin(this,k);this.node=k.node;this._showArgs=D.mixin({},k);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=D.mixin({},k);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);c.after(this.showAnim,"beforeBegin",D.hitch(this.hideAnim,"stop",!0),
!0);c.after(this.hideAnim,"beforeBegin",D.hitch(this.showAnim,"stop",!0),!0)},show:function(k){return this.showAnim.play(k||0)},hide:function(k){return this.hideAnim.play(k||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(D,B,a,c,k,n){return D("dijit.MenuSeparator",[a,c,k],{templateString:n,buildRendering:function(){this.inherited(arguments);B.setSelectable(this.domNode,
!1)},isFocusable:function(){return!1}})})},"xstyle/core/load-css":function(){define([],function(){function D(n){if(c.createStyleSheet){var r=c.createStyleSheet();r.cssText=n;return r.owningElement}r=c.createElement("style");r.setAttribute("type","text/css");r.appendChild(c.createTextNode(n));k.appendChild(r);return r}function B(n,r,f){var m=a[n];if(m)return q=D(m),r(q);var q=c.createElement("link");q.type="text/css";q.rel="stylesheet";q.href=n;var l=!f||!1!==f.wait;n=(n=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&
+n[1];if(null===q.onload&&!(536>n))q.onload=function(){q.onload=null;q.onerror=null;l&&r(q)},q.onerror=function(){l&&r(q)};else if(l)var b=setInterval(function(){q.style&&(clearInterval(b),r(q))},15);(k||c.getElementsByTagName("head")[0]).appendChild(q);l||r(q)}var a="undefined"==typeof _css_cache?{}:_css_cache,c=document,k=c.head;B.insertCss=D;return B})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\r\n    \x3cspan\x3e${message}\x3c/span\x3e\r\n  \x3c/p\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog" aria-labelledby\x3d"general-dialog-${id} general-dialog-content"\x3e\r\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\r\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\r\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\r\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link font-size--1 text-left text-ellipsis flex-1 max-full-width js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\r\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/solution.html":'\x3cspan class\x3d"badge badge--solution ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\r\n    \x3cpath fill\x3d"#312b43" d\x3d"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/\x3e\r\n    \x3cpath class\x3d"cls-1" d\x3d"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.solution}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\r\n\x3c/span\x3e\r\n\r\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n      \x3cg fill\x3d"#196FA6"\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n      \x3c/g\x3e\r\n    \x3c/svg\x3e\r\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv class\x3d"${cssClasses:empty} ${tooltipClass:empty}" aria-label\x3d"${_group.title}"\x3e\r\n  \x3cimg src\x3d"${_group.thumbnailUrl}" alt\x3d"" class\x3d"${_group.thumbnail:hide}" data-dojo-attach-point\x3d"_img"\x3e\r\n  \x3csvg data-dojo-attach-point\x3d"_svg" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 ${_viewBoxSize} ${_viewBoxSize}" class\x3d"${_group.thumbnail:show}" \x3e\r\n    \x3cpath fill\x3d"${_group.fillColor}" d\x3d"M0 0h65v65H0z" /\x3e\r\n    \x3cpath fill\x3d"#ccc" d\x3d"M0 0h65v65H0z" fill-opacity\x3d"0.8" /\x3e\r\n    \x3cpath class\x3d"${_group.useLetter:show}" fill\x3d"#FFF" d\x3d"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"\r\n    /\x3e\r\n    \x3ctext class\x3d"${_group.useLetter:hide} font-size-${letterSize}" x\x3d"50%" y\x3d"50%" fill\x3d"white" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-default-text" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-ie-text" y\x3d"70%" x\x3d"55%" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n  \x3c/svg\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteHeaderSimple.html":'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\r\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"password-strength-meter"\x3e\r\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\r\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\r\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\r\n          ${i18n.firstNameLabel}\r\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\r\n          ${i18n.lastNameLabel}\r\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\r\n          ${i18n.currentEmailAdr}\r\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\r\n          ${i18n.confirmEmailAdr}\r\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\r\n          ${i18n.yourUserName}\r\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\r\n          ${i18n.choosePwd}\r\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\r\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\r\n          ${i18n.renterPwd}\r\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\r\n          ${i18n.identityQLabel}\x3cbr\x3e\r\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\r\n          ${i18n.identityALabel}\r\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 right"\x3e\r\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\r\n        \x3cdiv class\x3d"avenir-bold font-size-1 profile-popup__full-name" data-dojo-attach-point\x3d"fullNameEl"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"usernameEl"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"member-thumb ${cssClasses}" style\x3d"background:${member.backgroundColor};"\x3e\r\n    \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\r\n    \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\r\n      ${member.initials}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"member-thumb__edit-mask"\x3e\r\n      ${!icons.plus-circle.32}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(D){D(['dojo/i18n!*preload*arcgisonline/nls/base*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/base",["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],function(D,
B,a){D.provide("arcgisonline.base");D.require("esri.main");D.require("esri.utils");D.require("arcgisonline.init");D.require("arcgisonline.sharing.dijit.SiteHeader");D.require("arcgisonline.sharing.dijit.SiteFooter");D.require("arcgisonline.sharing.dijit.SiteFooterMap");D.require("arcgisonline.sharing.dijit.SignUpInternal");D.require("dijit.form.Form");D.require("arcgisonline.sharing.geow.Account");D.require("arcgisonline.sharing.dijit.HelpManager");D.require("dojo.date.locale");D.require("dojox.widget.Rotator");
D.require("dojox.widget.AutoRotator");D.require("dojox.widget.rotator.Controller");D.require("dojox.widget.rotator.Fade");D.require("dijit.layout.StackController");D.require("dojo.cookie");D.require("dojo.json");D.require("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.require("dojo.topic");D.require("dijit._base");D.require("dijit.form.DropDownButton");D.require("dijit.form.ComboButton");D.require("dijit.form.ToggleButton");D.require("dijit.form.RadioButton");D.require("dijit.PopupMenuItem");
D.require("dijit._Contained");D.require("dijit._Container");D.require("dijit._WidgetBase");D.require("dijit.main");D.require("dojo.Stateful");D.require("dojo.date.locale");D.require("arcgisonline.sharing.dijit.Gallery");D.require("arcgisonline.sharing.util");D.require("arcgisonline.sharing.dijit.views");D.require("dojo.parser");D.require("dijit._base");D.require("dojo.dnd.AutoSource");D.require("dojo.dnd.Target");D.require("dojo.fx.Toggler");D.require("dijit.TooltipDialog");D.require("dijit.MenuSeparator");
D.requireLocalization("arcgisonline","arcgisonline")});