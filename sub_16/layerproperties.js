//>>built
/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
require({cache:{"tslib/tslib":function(){var N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q,G,I,k,w,r,a;(function(c){function x(E,h){E!==O&&("function"===typeof Object.create?Object.defineProperty(E,"__esModule",{value:!0}):E.__esModule=!0);return function(z,q){return E[z]=h?h(z,q):q}}var O="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(E){c(x(O,x(E)))}):"object"===typeof module&&"object"===
typeof module.exports?c(x(O,x(module.exports))):c(x(O))})(function(c){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,h){E.__proto__=h}||function(E,h){for(var z in h)Object.prototype.hasOwnProperty.call(h,z)&&(E[z]=h[z])};N=function(E,h){function z(){this.constructor=E}if("function"!==typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");x(E,h);E.prototype=null===h?Object.create(h):(z.prototype=h.prototype,new z)};n=Object.assign||
function(E){for(var h,z=1,q=arguments.length;z<q;z++){h=arguments[z];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(E[p]=h[p])}return E};l=function(E,h){var z={},q;for(q in E)Object.prototype.hasOwnProperty.call(E,q)&&0>h.indexOf(q)&&(z[q]=E[q]);if(null!=E&&"function"===typeof Object.getOwnPropertySymbols){var p=0;for(q=Object.getOwnPropertySymbols(E);p<q.length;p++)0>h.indexOf(q[p])&&Object.prototype.propertyIsEnumerable.call(E,q[p])&&(z[q[p]]=E[q[p]])}return z};A=function(E,h,z,q){var p=
arguments.length,S=3>p?h:null===q?q=Object.getOwnPropertyDescriptor(h,z):q,P;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)S=Reflect.decorate(E,h,z,q);else for(var T=E.length-1;0<=T;T--)if(P=E[T])S=(3>p?P(S):3<p?P(h,z,S):P(h,z))||S;return 3<p&&S&&Object.defineProperty(h,z,S),S};m=function(E,h){return function(z,q){h(z,q,E)}};D=function(E,h){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(E,h)};y=function(E,h,z,q){function p(S){return S instanceof
z?S:new z(function(P){P(S)})}return new (z||(z=Promise))(function(S,P){function T(V){try{M(q.next(V))}catch(aa){P(aa)}}function F(V){try{M(q["throw"](V))}catch(aa){P(aa)}}function M(V){V.done?S(V.value):p(V.value).then(T,F)}M((q=q.apply(E,h||[])).next())})};v=function(E,h){function z(M){return function(V){return q([M,V])}}function q(M){if(S)throw new TypeError("Generator is already executing.");for(;p;)try{if(S=1,P&&(T=M[0]&2?P["return"]:M[0]?P["throw"]||((T=P["return"])&&T.call(P),0):P.next)&&!(T=
T.call(P,M[1])).done)return T;if(P=0,T)M=[M[0]&2,T.value];switch(M[0]){case 0:case 1:T=M;break;case 4:return p.label++,{value:M[1],done:!1};case 5:p.label++;P=M[1];M=[0];continue;case 7:M=p.ops.pop();p.trys.pop();continue;default:if(!(T=p.trys,T=0<T.length&&T[T.length-1])&&(6===M[0]||2===M[0])){p=0;continue}if(3===M[0]&&(!T||M[1]>T[0]&&M[1]<T[3]))p.label=M[1];else if(6===M[0]&&p.label<T[1])p.label=T[1],T=M;else if(T&&p.label<T[2])p.label=T[2],p.ops.push(M);else{T[2]&&p.ops.pop();p.trys.pop();continue}}M=
h.call(E,p)}catch(V){M=[6,V],P=0}finally{S=T=0}if(M[0]&5)throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}var p={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},S,P,T,F;return F={next:z(0),"throw":z(1),"return":z(2)},"function"===typeof Symbol&&(F[Symbol.iterator]=function(){return this}),F};L=function(E,h){for(var z in E)"default"===z||Object.prototype.hasOwnProperty.call(h,z)||a(h,E,z)};a=Object.create?function(E,h,z,q){void 0===q&&(q=z);Object.defineProperty(E,q,{enumerable:!0,
get:function(){return h[z]}})}:function(E,h,z,q){void 0===q&&(q=z);E[q]=h[z]};J=function(E){var h="function"===typeof Symbol&&Symbol.iterator,z=h&&E[h],q=0;if(z)return z.call(E);if(E&&"number"===typeof E.length)return{next:function(){E&&q>=E.length&&(E=void 0);return{value:E&&E[q++],done:!E}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.");};f=function(E,h){var z="function"===typeof Symbol&&E[Symbol.iterator];if(!z)return E;E=z.call(E);var q,p=[];try{for(;(void 0===
h||0<h--)&&!(q=E.next()).done;)p.push(q.value)}catch(P){var S={error:P}}finally{try{q&&!q.done&&(z=E["return"])&&z.call(E)}finally{if(S)throw S.error;}}return p};b=function(){for(var E=[],h=0;h<arguments.length;h++)E=E.concat(f(arguments[h]));return E};e=function(){for(var E=0,h=0,z=arguments.length;h<z;h++)E+=arguments[h].length;E=Array(E);var q=0;for(h=0;h<z;h++)for(var p=arguments[h],S=0,P=p.length;S<P;S++,q++)E[q]=p[S];return E};g=function(E,h,z){if(z||2===arguments.length)for(var q=0,p=h.length,
S;q<p;q++)!S&&q in h||(S||(S=Array.prototype.slice.call(h,0,q)),S[q]=h[q]);return E.concat(S||Array.prototype.slice.call(h))};t=function(E){return this instanceof t?(this.v=E,this):new t(E)};d=function(E,h,z){function q(aa){F[aa]&&(M[aa]=function(ka){return new Promise(function(la,X){1<V.push([aa,ka,la,X])||p(aa,ka)})})}function p(aa,ka){try{var la=F[aa](ka);la.value instanceof t?Promise.resolve(la.value.v).then(S,P):T(V[0][2],la)}catch(X){T(V[0][3],X)}}function S(aa){p("next",aa)}function P(aa){p("throw",
aa)}function T(aa,ka){(aa(ka),V.shift(),V.length)&&p(V[0][0],V[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=z.apply(E,h||[]),M,V=[];return M={},q("next"),q("throw"),q("return"),M[Symbol.asyncIterator]=function(){return this},M};H=function(E){function h(p,S){z[p]=E[p]?function(P){return(q=!q)?{value:t(E[p](P)),done:"return"===p}:S?S(P):P}:S}var z,q;return z={},h("next"),h("throw",function(p){throw p;}),h("return"),z[Symbol.iterator]=function(){return this},
z};Q=function(E){function h(S){p[S]=E[S]&&function(P){return new Promise(function(T,F){P=E[S](P);z(T,F,P.done,P.value)})}}function z(S,P,T,F){Promise.resolve(F).then(function(M){S({value:M,done:T})},P)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q=E[Symbol.asyncIterator],p;return q?q.call(E):(E="function"===typeof J?J(E):E[Symbol.iterator](),p={},h("next"),h("throw"),h("return"),p[Symbol.asyncIterator]=function(){return this},p)};G=function(E,h){Object.defineProperty?
Object.defineProperty(E,"raw",{value:h}):E.raw=h;return E};var O=Object.create?function(E,h){Object.defineProperty(E,"default",{enumerable:!0,value:h})}:function(E,h){E["default"]=h};I=function(E){if(E&&E.__esModule)return E;var h={};if(null!=E)for(var z in E)"default"!==z&&Object.prototype.hasOwnProperty.call(E,z)&&a(h,E,z);O(h,E);return h};k=function(E){return E&&E.__esModule?E:{"default":E}};w=function(E,h,z,q){if("a"===z&&!q)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof h?E!==h||!q:!h.has(E))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===z?q:"a"===z?q.call(E):q?q.value:h.get(E)};r=function(E,h,z,q,p){if("m"===q)throw new TypeError("Private method is not writable");if("a"===q&&!p)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof h?E!==h||!p:!h.has(E))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===q?p.call(E,z):p?p.value=z:h.set(E,z),z};c("__extends",N);c("__assign",n);c("__rest",l);c("__decorate",A);c("__param",m);c("__metadata",D);c("__awaiter",y);c("__generator",v);c("__exportStar",L);c("__createBinding",a);c("__values",J);c("__read",f);c("__spread",b);c("__spreadArrays",e);c("__spreadArray",g);c("__await",t);c("__asyncGenerator",d);c("__asyncDelegator",H);c("__asyncValues",Q);c("__makeTemplateObject",G);c("__importStar",I);c("__importDefault",k);c("__classPrivateFieldGet",w);
c("__classPrivateFieldSet",r)})},"app/widgets/panels/MapMaker/LayerProperties":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget esri/widgets/Legend esri/layers/support/arcgisLayerUrl ../../../utils/topic ../../../utils/appUtils ../../../utils/layerUtils ../../../utils/debounce ../../../utils/mapUtils/canSaveLayer ./savelayer/copyLayer esri/widgets/Slider esri/widgets/ScaleRangeSlider esri/intl/substitute ./blending/LayerBlending ./customparameters/CustomParameters".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q,G){Object.defineProperty(n,"__esModule",{value:!0});D=l.__importDefault(D);y=l.__importDefault(y);v=l.__importStar(v);L=l.__importDefault(L);J=l.__importStar(J);f=l.__importStar(f);b=l.__importDefault(b);t=l.__importDefault(t);d=l.__importDefault(d);H=l.__importStar(H);Q=l.__importDefault(Q);G=l.__importDefault(G);N=function(I){function k(w){w=I.call(this,w)||this;w.isTable=!1;return w}l.__extends(k,I);k.prototype.postInitialize=function(){var w=this,r,
a=this.layer;this.isTable=null===a||void 0===a?void 0:a.isTable;if(null===(r=a.featureReduction)||void 0===r?0:r.popupTemplate)this.popupTemplate=a.featureReduction.popupTemplate;this.own([L.default.subscribe("trigger-hotkey",function(c){"blending"!==c.modifier||w.layerBlending.isOpen||w.layerBlending.open()}),L.default.subscribe("layer-save-done",function(){var c;(null===(c=w.layerOverride)||void 0===c?0:c.refresh)&&w.layerOverride.refresh()})])};k.prototype.destroy=function(){this.slider&&this.slider.destroy();
this.scaleRangeSlider&&this.scaleRangeSlider.destroy();this.legend&&this.legend.destroy();this.layerBlending&&this.layerBlending.destroy();this.customParameters&&this.customParameters.destroy()};k.prototype.render=function(){return this.isTable?this.renderTable():this.renderLayer()};k.prototype.renderTable=function(){var w=this,r=this.layer,a=r.portalItem,c=a&&a.loadStatus,x=this.state.portal,O={helpMap:x.helpMap,helpBase:x.helpBase};return m.tsx("div",null,a&&"failed"!==c?m.tsx("calcite-block",{key:"layer-info",
class:"layer-info",heading:this.messagesActions.information,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0},m.tsx("arcgis-layer-override",{config:O,layer:r,portal:x,onArcgisLayerOverrideChange:function(E){return L.default.publish("layer-updated")},onArcgisLayerOverrideDuplicateClick:function(){return w.copyLayer()},onArcgisLayerOverrideSaveLayerClick:function(){return w.saveLayer()},onArcgisLayerOverrideSaveAsLayerClick:function(){return w.saveLayerAs()},
afterCreate:function(E){return w.layerOverride=E}})):null)};k.prototype.renderLayer=function(){var w=this,r,a,c=this.layer,x=this.state,O=x.config,E=O.appSettings,h=c.type,z=c.portalItem,q=c.url,p=x.portal,S=p.user,P={helpMap:p.helpMap,helpBase:p.helpBase};O=null===O||void 0===O?void 0:O.isVisualization;var T="feature"===h&&q||"csv"===h||"geo-rss"===h||"geojson"===h,F=z&&z.loadStatus,M=c.layer?"map-notes"===c.layer.type||f.supportsModification(c):!0,V=f.isDynamicLayer(c),aa=f.isMapImageLayer(c),ka=
f.isImageryLayer(c),la=(null===c||void 0===c?void 0:c.hasOwnProperty("useViewTime"))&&(null===(r=null===c||void 0===c?void 0:c.timeInfo)||void 0===r?void 0:r.fullTimeExtent)&&"wms"!==(null===c||void 0===c?void 0:c.type);r=(S&&M&&"feature"===h&&q?!0:!1)&&f.supportsEditing(c);var X=null===(a=null===E||void 0===E?void 0:E.tips)||void 0===a?void 0:a.showLayerSwitcherTip;a=f.isBasemapLayer(c,x.map.webMap);x=M&&"imagery"!==c.type&&"imagery-tile"!==c.type&&(null===c||void 0===c?void 0:c.hasOwnProperty("refreshInterval"));
var Z=f.getCacheMaxAge(c),da=this.getDefaultRefreshinterval().interval;Z=H.substitute(this.messagesRefreshInterval.errors.minimum,{min:Z});return m.tsx("div",null,X?m.tsx("calcite-notice",{icon:!0,active:!0,dismissible:!0,scale:"s",width:"auto",color:"blue",class:"margin-left-half margin-right-half leader-half trailer-half calcite-theme-light",afterCreate:function(ia){ia.addEventListener("calciteNoticeClose",function(){E.tips.showLayerSwitcherTip=!1;L.default.publish("app-properties-updated",E)},
{once:!0})}},m.tsx("div",{slot:"message"},this.messages.layerSwitcherTip)):null,!O&&(!z&&"feature"===h||z&&"failed"!==F||"route"===h)?m.tsx("calcite-block",{key:"layer-info",class:"layer-info",heading:this.messagesActions.information,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0},"feature"===h&&q?m.tsx("arcgis-layer-override",{config:P,layer:c,portal:p,onArcgisLayerOverrideChange:function(ia){return L.default.publish("layer-updated")},onArcgisLayerOverrideDuplicateClick:function(){return w.copyLayer()},
onArcgisLayerOverrideSaveLayerClick:function(){return w.saveLayer()},onArcgisLayerOverrideSaveAsLayerClick:function(){return w.saveLayerAs()},afterCreate:function(ia){return w.layerOverride=ia}}):z||"route"===h?this.getPortalItemTemplate():null):null,m.tsx("calcite-block",{key:"layer-symbology",heading:this.messages.symbology,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0,open:!0},S&&(T||aa||ka)?m.tsx("calcite-label",{scale:"s",layout:"inline-space-between",
class:"esri-select-label"},a?this.messages.enableBasemapLayerLegend:this.messages.enableLayerLegend,m.tsx("calcite-switch",{scale:"s",afterCreate:function(ia){ia.setAttribute("intl-expand",w.messagesCommon.enable);ia.setAttribute("intl-collapse",w.messagesCommon.disable);ia.checked=c.legendEnabled?!0:!1;ia.addEventListener("calciteSwitchChange",function(va){c.legendEnabled=!c.legendEnabled;L.default.publish("layer-legend-toggle",c)})}})):m.tsx("div",null),m.tsx("div",{bind:this,afterCreate:this.addLegend,
key:"legend"}),S?m.tsx("div",{bind:this,afterCreate:this.addEditStyles,key:"edit-styles"}):null,S?m.tsx("div",{bind:this,afterCreate:this.addEditSketch,key:"edit-sketch"}):null),(null===c||void 0===c?0:c.hasOwnProperty("blendMode"))||(null===c||void 0===c?0:c.hasOwnProperty("opacity"))&&M?m.tsx("calcite-block",{key:"layer-appearance",heading:this.messages.layerAppearance,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0,open:!0},(null===c||void 0===
c?0:c.hasOwnProperty("blendMode"))?m.tsx("calcite-label",null,this.messages.blending,m.tsx("div",{bind:this,afterCreate:this.addBlending,key:"blending",class:"esri-blending-slider"})):null,M&&(null===c||void 0===c?0:c.hasOwnProperty("opacity"))?m.tsx("calcite-label",null,this.messages.transparency,m.tsx("div",{bind:this,afterCreate:this.addTransparency,key:"transparency",class:"esri-transparency-slider"})):null):null,!c.layer||M||V?m.tsx("calcite-block",{key:"layer-visible-range",heading:this.messages.visibleRange,
"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0,open:!0},m.tsx("div",{bind:this,afterCreate:this.addScaleRangeSlider,key:"scale-range"})):null,r?m.tsx("calcite-block",{key:"layer-editing",heading:this.messages.editing,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0,open:!0},m.tsx("calcite-label",{scale:"s",layout:"inline-space-between",class:"esri-select-label"},this.messages.enableLayerEditing,
m.tsx("calcite-switch",{scale:"s",afterCreate:function(ia){ia.checked="undefined"===typeof c.editingEnabled||c.editingEnabled?!0:!1;ia.addEventListener("calciteSwitchChange",function(va){var ya;c.editingEnabled=(null===(ya=null===va||void 0===va?void 0:va.currentTarget)||void 0===ya?void 0:ya.checked)||!1;L.default.publish("layer-editing-toggle",c)})}}))):null,la?m.tsx("calcite-block",{key:"layer-time",heading:this.messages.time,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,
collapsible:!0,open:!0},m.tsx("calcite-block-section",{text:this.messages.enableLayerTime,open:c.useViewTime,"toggle-display":"switch",afterCreate:function(ia){ia.setAttribute("intl-expand",w.messagesCommon.enable);ia.setAttribute("intl-collapse",w.messagesCommon.disable);ia.addEventListener("calciteBlockSectionToggle",function(va){c.useViewTime!==va.target.open&&(c.set("useViewTime",va.target.open),L.default.publish("layer-time-toggle",c))})}})):null,x?m.tsx("calcite-block",{key:"layer-refresh",
heading:this.messagesRefreshInterval.refresh,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,collapsible:!0,open:!0},m.tsx("calcite-block-section",{text:this.messagesRefreshInterval.enableRefresh,open:0<parseFloat(c.refreshInterval),"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,"toggle-display":"switch",scale:"s",afterCreate:function(ia){w.refreshIntervalSwitch=ia;ia.addEventListener("calciteBlockSectionToggle",function(){return w.setRefreshInterval()})}},
m.tsx("section",{class:"refresh-interval"},m.tsx("calcite-label",{scale:"m"},this.messagesRefreshInterval.refreshEvery,m.tsx("calcite-label",{layout:"inline"},m.tsx("calcite-input",{type:"number",value:da||"5",min:"0.5",max:"1440",scale:"s",onCalciteInputInput:b.default(function(){return w.setRefreshInterval()},1E3,!1),onfocusout:function(){w.refreshIntervalSwitch.open&&!w.refreshIntervalInput.value&&(w.refreshIntervalInput.value=w.layer.refreshInterval)},afterCreate:function(ia){w.refreshIntervalInput=
ia}}),m.tsx("span",{class:"minutes-label",scale:"s",layout:"inline"},this.messagesRefreshInterval.minutesLower)))),m.tsx("calcite-notice",{class:"js-refreshInterval-notice",theme:"light",scale:"s",color:"yellow"},m.tsx("div",{slot:"message"},Z)))):null,this.getOrderByBlock(),this.getCustomParametersBlock())};k.prototype.getDefaultRefreshinterval=function(){var w=this.layer,r=f.getCacheMaxAge(w);return{unit:"minutes",interval:w.refreshInterval||(5<r?r:5)}};k.prototype.setRefreshInterval=function(){var w=
this.refreshIntervalSwitch.open,r=this.refreshIntervalInput.value;r&&(this.adjustMinMaxRefreshInterval(r,"minutes"),this.layer.set("refreshInterval",w?parseFloat(this.toMinutes(this.refreshIntervalInput.value,"minutes")):0),L.default.publish("layer-updated"))};k.prototype.adjustMinMaxRefreshInterval=function(w,r){var a=f.getCacheMaxAge(this.layer);w=this.round(w||(5<a?a:5));r="minutes"===r?1440:24;this.refreshIntervalInput.setAttribute("value",w>r?r:w<a?a:w);document.querySelector(".js-refreshInterval-notice").active=
w<a};k.prototype.round=function(w){return Math.round(100*parseFloat(w))/100};k.prototype.toMinutes=function(w,r){var a=w;"hours"===r&&(a=60*w);return a};k.prototype.getDisplayName=function(w){var r=w&&w.portalItem||null;return"group"!==w.type&&(null===r||void 0===r?void 0:r.displayName)||this.layerTypeToDisplayName(w)};k.prototype.layerTypeToDisplayName=function(w){switch(w.type){case "csv":return"CSV";case "feature":return"Feature Layer";case "elevation":return"Elevation Layer";case "geojson":return"GeoJSON";
case "group":return"Group Layer";case "imagery":return"Imagery Layer";case "imagery-tile":return"Tiled Imagery Layer";case "kml":return"KML";case "map-image":return"Map Image Layer";case "map-notes":return"Sketch Layer";case "ogc-feature":return"OGC Feature Layer";case "route":return"Route Layer";case "stream":return"Stream Layer";case "tile":return"Tile Layer";case "vector-tile":return"Tile Layer";case "web-tile":return"Tile Layer";case "wfs":return"WFS";case "wms":return"WMS";case "wmts":return"WMTS";
case "subtype-group":return"Subtype Group Layer";default:return"Unknown Layer"}};k.prototype.getCustomParametersBlock=function(){var w,r=this.layer,a=(null===(w=null===r||void 0===r?void 0:r.layer)||void 0===w?void 0:w.type)in{"map-image":1,wms:1,wmts:1,wfs:1,"ogc-feature":1,tile:1};w="ogc-feature"===(null===r||void 0===r?void 0:r.type)||"wfs"===(null===r||void 0===r?void 0:r.type)||"wms"===(null===r||void 0===r?void 0:r.type)||"wmts"===(null===r||void 0===r?void 0:r.type)||"geojson"===(null===r||
void 0===r?void 0:r.type)||"csv"===(null===r||void 0===r?void 0:r.type);var c=!0;!a&&(r.customParameters||r.customLayerParameters||v.isArcGISUrl(r.url)||w)&&(c=!1);return c?null:m.tsx("calcite-block",{key:"layer-custom-parameters",heading:this.messagesCustomParameters.customParameters,"intl-collapse":this.messagesCommon.collapse,"intl-expand":this.messagesCommon.expand,bind:this,afterCreate:this.addCustomParameters,collapsible:!0,open:!1})};k.prototype.getOrderByBlock=function(){var w=this.layer;
return w.type in{feature:1,csv:1,"ogc-feature":1}?m.tsx("arcgis-symbol-order",{key:"layer-order-by",open:!1,layer:w,onArcgisSymbolOrderChange:function(){return L.default.publish("layer-updated")}}):null};k.prototype.getPortalItemTemplate=function(){var w=this,r=this.layer,a=r.url,c=r&&r.portalItem||null,x=c?this.getItemLink(c):a||null;a=e.canSaveLayer(r,this.state.portal);var O=this.getDisplayName(r);return[m.tsx("div",{class:"information"},m.tsx("calcite-tile",{class:"update-layer-tile",description:O,
heading:(null===r||void 0===r?void 0:r.title)||(null===c||void 0===c?void 0:c.title),onclick:function(){return w.openDetails(x)}},x?m.tsx("calcite-action",{slot:"content-end",class:"js-open-details",appearance:"solid",compact:!0,scale:"s",icon:"launch",text:this.messages.moreInfo,onClick:function(){return w.openDetails(x)}}):null)),a.save?m.tsx("calcite-button",{class:"leader-half",appearance:"outline",color:"neutral",alignment:"center","icon-start":"save",width:"full",key:"save-layer",onclick:function(){return w.saveLayer()}},
this.messagesCommon.save):null,a.saveas?m.tsx("calcite-button",{class:"leader-half",appearance:"outline",color:"neutral",alignment:"center","icon-start":"save",width:"full",key:"save-layer-as",onclick:function(){return w.saveLayerAs()}},this.messagesCommon.saveAs):null]};k.prototype.getItemLink=function(w){return this.state.portal.restUrl.replace("sharing/rest","home")+"/item.html?id\x3d"+w.id};k.prototype.addLegend=function(w){var r;if(!this.legend){var a=this.layer,c=this.state,x=(null===(r=null===
a||void 0===a?void 0:a.layer)||void 0===r?void 0:r.type)||(null===a||void 0===a?void 0:a.type);this.legend=new y.default({container:w,view:c.mapView,respectLayerVisibility:"group"===x,keepCacheOnDestroy:!0,layerInfos:[{layer:a&&a.layer||a,sublayerIds:a&&a.layer?[a.id]:[]}]})}};k.prototype.addEditStyles=function(w){var r=this;if(this.canStyleLayer(this.layer)){var a=document.createElement("calcite-button");a.appearance="transparent";a.width="full";a.color="blue";a.alignment="center";a.innerHTML=this.messages.editStyles;
a.addEventListener("click",function(){r.panel.processAction("layerstyles")});w.appendChild(a)}};k.prototype.addEditSketch=function(w){var r=this;if(this.canSketchLayer(this.layer)){var a=document.createElement("calcite-button");a.appearance="transparent";a.width="full";a.color="blue";a.alignment="center";a.innerHTML=this.messages.editSketch;a.addEventListener("click",function(){r.panel.processAction("sketch")});w.appendChild(a)}};k.prototype.canStyleLayer=function(w){var r,a=f.isDynamicLayer(w),c=
f.isMapImageLayer(w),x="geo-rss"===(null===w||void 0===w?void 0:w.type),O=w.layer?f.supportsModification(w):!0;a=w.layer&&!w.sublayers&&c&&a&&O;c=f.isLikeFeatureLayer(w);O="map-image"===(null===w||void 0===w?void 0:w.type)||"map-image"===(null===(r=null===w||void 0===w?void 0:w.layer)||void 0===r?void 0:r.type);return w&&!O&&!w.isTable&&(c||a||x)};k.prototype.canSketchLayer=function(w){return"map-notes"===(null===w||void 0===w?void 0:w.type)&&!this.isClassicMapNotesLayer(w)};k.prototype.isClassicMapNotesLayer=
function(w){return"map-notes"===(null===w||void 0===w?void 0:w.type)&&!(null===w||void 0===w?0:w.get("capabilities.operations.supportsMapNotesEditing"))};k.prototype.addTransparency=function(w){var r=this,a=J.isRTL();if(this.layer&&!this.slider){var c=this.layer;this.slider=new t.default({container:w,min:0,max:100,precision:0,steps:1,values:[100*(1-(-1<(null===c||void 0===c?void 0:c.opacity)?c.opacity:1))],layout:a?"horizontal-reversed":"horizontal",visibleElements:{labels:!0,rangeLabels:!0},labelInputsEnabled:!0,
labelFormatFunction:function(x,O){O=document.querySelector("html").lang||"en";x=parseInt(x,10);return"ar"!==O.toLowerCase()?(new Intl.NumberFormat(O,{style:"percent"})).format(x/100):"%"+x},tickConfigs:[{mode:"position",labelsVisible:!0,values:[25,50,75],tickCreatedFunction:function(x,O,E){O.onclick=function(){c.opacity=J.clamp((100-x)/100,0,1);r.slider.set({values:[x]})};E.onclick=function(){c.opacity=J.clamp((100-x)/100,0,1);r.slider.set({values:[x]})}}}]});this.slider.on("thumb-change",function(x){return r.adjustTransparency(x)});
this.slider.on("thumb-drag",function(x){return r.adjustTransparency(x)})}};k.prototype.adjustTransparency=function(w){this.layer.opacity=J.clamp((100-w.value)/100,0,1);L.default.publish("transparency-updated")};k.prototype.addBlending=function(w){w=this.layerBlending=new Q.default({state:this.state,layer:this.layer,container:w});"blending"===this.mode&&w.open()};k.prototype.addCustomParameters=function(w){var r=this.layer;this.customParameters=new G.default({state:this.state,layer:r,showAdvanced:r.type in
{wms:1,wmts:1},container:w})};k.prototype.addScaleRangeSlider=function(w){var r=this.state,a=this.layer,c=r.mapView;r=(r=r.portal)&&r.getRegion().toLowerCase();var x=this.scaleRangeSlider;!x&&a&&(this.scaleRangeSlider=x=new d.default({view:c,layer:a,region:r}),x.set("container",w),x.watch(["minScale","maxScale"],function(O,E,h){a[h]!==O&&(a[h]=O,L.default.publish("visible-range-updated"))}))};k.prototype.copyLayer=function(){var w;return l.__awaiter(this,void 0,void 0,function(){var r,a;return l.__generator(this,
function(c){switch(c.label){case 0:return[4,g.duplicate(this.layer,this.state.mapView)];case 1:return r=c.sent(),a=(null===r||void 0===r?0:r.hasOwnProperty("useViewTime"))&&(null===(w=null===r||void 0===r?void 0:r.timeInfo)||void 0===w?0:w.fullTimeExtent)&&"wms"!==(null===r||void 0===r?void 0:r.type)?!0:!1,setTimeout(function(){L.default.publish("layerswitcher-selected",r);L.default.publish("layer-selected",{layer:r,firstLayer:a})},100),[2]}})})};k.prototype.saveLayer=function(){return l.__awaiter(this,
void 0,void 0,function(){return l.__generator(this,function(w){switch(w.label){case 0:return[4,g.saveLayer(this.layer,this.state.mapView,this.state.portal)];case 1:return w.sent(),[2]}})})};k.prototype.saveLayerAs=function(){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(w){switch(w.label){case 0:return[4,g.saveLayerAs(this.layer,this.state)];case 1:return w.sent(),[2]}})})};k.prototype.openDetails=function(w){w&&window.open(w)};l.__decorate([A.property(),m.messageBundle("mapviewer/common")],
k.prototype,"messagesCommon",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/mapMaker")],k.prototype,"messages",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/actions")],k.prototype,"messagesActions",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/customParameters")],k.prototype,"messagesCustomParameters",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/refreshInterval")],k.prototype,"messagesRefreshInterval",void 0);return k=l.__decorate([A.subclass("esri.widgets.MapMaker.LayerProperties")],
k)}(D.default);n.default=N})},"esri/core/accessorSupport/decorators":function(){define("exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(N,n,l,A,m,D,y,v,L,J){N.aliasOf=n.aliasOf;N.autoDestroy=l.autoDestroy;N.cast=A.cast;N.enumeration=m.enumeration;N.ensureRange=D.ensureRange;N.property=D.property;N.propertyJSONMeta=D.propertyJSONMeta;
N.reader=y.reader;N.shared=v.shared;N.finalizeClass=L.finalizeClass;N.subclass=L.subclass;N.writer=J.writer;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["exports","../metadata"],function(N,n){N.autoDestroy=function(){return(l,A)=>{n.getOwnClassMetadata(l).autoDestroy=!0;return l[A]}};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Legend/LegendViewModel ./Legend/styles/Card ./Legend/styles/Classic ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q){y=function(G){function I(w,r){w=G.call(this,w,r)||this;w._handles=new l;w.activeLayerInfos=null;w.basemapLegendVisible=!1;w.groundLegendVisible=!1;w.headingLevel=3;w.hideLayersNotInCurrentView=!1;w.keepCacheOnDestroy=!1;w.respectLayerVisibility=!0;w.iconClass="esri-icon-layer-list";w.label=void 0;w.layerInfos=null;w.messages=null;w.style=new t;w.view=null;w.viewModel=new e;return w}N._inheritsLoose(I,G);var k=I.prototype;k.initialize=function(){this.own([m.on(()=>
this.view,"resize",()=>this.scheduleRender()),m.on(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),m.watch(()=>this.headingLevel,w=>{const {style:r}=this;r&&(r.headingLevel=w)}),m.watch(()=>this.style,(w,r)=>{r&&w!==r&&r.destroy();w&&(w.activeLayerInfos=this.activeLayerInfos,"card"===w.type&&(w.view=this.view),w.headingLevel=this.headingLevel)},m.initial)])};k.destroy=function(){this._handles=A.destroyMaybe(this._handles)};k.castStyle=function(w){if(w instanceof
g||w instanceof t)return w;if("string"===typeof w)return"card"===w?new g:new t;if(w&&"string"===typeof w.type){const r={...w};delete r.type;return new ("card"===w.type?g:t)(r)}return new t};k.render=function(){return Q.tsx("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof t?"esri-widget--panel":null)},this.style.render())};k._refreshActiveLayerInfos=function(w){this._handles.removeAll();w.forEach(r=>this._renderOnActiveLayerInfoChange(r));this.scheduleRender()};k._renderOnActiveLayerInfoChange=
function(w){var r=m.watch(()=>w.version,()=>this.scheduleRender());this._handles.add(r,`version_${w.layer.uid}`);r=m.on(()=>w.children,"change",()=>w.children.forEach(a=>this._renderOnActiveLayerInfoChange(a)),m.initial);this._handles.add(r,`children_${w.layer.uid}`);w.children.forEach(a=>this._renderOnActiveLayerInfoChange(a))};return I}(b);n.__decorate([D.aliasOf("viewModel.activeLayerInfos")],y.prototype,"activeLayerInfos",void 0);n.__decorate([D.aliasOf("viewModel.basemapLegendVisible")],y.prototype,
"basemapLegendVisible",void 0);n.__decorate([D.aliasOf("viewModel.groundLegendVisible")],y.prototype,"groundLegendVisible",void 0);n.__decorate([J.property()],y.prototype,"headingLevel",void 0);n.__decorate([D.aliasOf("viewModel.hideLayersNotInCurrentView")],y.prototype,"hideLayersNotInCurrentView",void 0);n.__decorate([D.aliasOf("viewModel.keepCacheOnDestroy")],y.prototype,"keepCacheOnDestroy",void 0);n.__decorate([D.aliasOf("viewModel.respectLayerVisibility")],y.prototype,"respectLayerVisibility",
void 0);n.__decorate([J.property()],y.prototype,"iconClass",void 0);n.__decorate([J.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],y.prototype,"label",void 0);n.__decorate([D.aliasOf("viewModel.layerInfos")],y.prototype,"layerInfos",void 0);n.__decorate([J.property(),H.messageBundle("esri/widgets/Legend/t9n/Legend")],y.prototype,"messages",void 0);n.__decorate([J.property()],y.prototype,"style",void 0);n.__decorate([L.cast("style")],y.prototype,"castStyle",null);n.__decorate([D.aliasOf("viewModel.view")],
y.prototype,"view",void 0);n.__decorate([J.property()],y.prototype,"viewModel",void 0);return y=n.__decorate([f.subclass("esri.widgets.Legend")],y)})},"esri/widgets/Legend/LegendViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./support/ActiveLayerInfo ../../intl/locale".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g){const t=m.ofType(e),d="esri.layers.BuildingSceneLayer esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.GeoJSONLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.HeatmapLayer esri.layers.ImageryLayer esri.layers.ImageryTileLayer esri.layers.MapImageLayer esri.layers.OGCFeatureLayer esri.layers.PointCloudLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.TileLayer esri.layers.VoxelLayer esri.layers.WFSLayer esri.layers.WMSLayer esri.layers.WMTSLayer esri.layers.WCSLayer".split(" "),
H=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];l=function(Q){function G(k){k=Q.call(this,k)||this;k._handles=new D;k._layerViewByLayerId={};k._layerInfosByLayerViewId={};k._activeLayerInfosByLayerViewId={};k._activeLayerInfosWithNoParent=new m;k.activeLayerInfos=new t;k.basemapLegendVisible=!1;k.groundLegendVisible=!1;k.hideLayersNotInCurrentView=!1;k.keepCacheOnDestroy=!1;k.respectLayerVisibility=!0;k.layerInfos=[];k.view=
null;return k}N._inheritsLoose(G,Q);var I=G.prototype;I.initialize=function(){this._handles.add(y.watch(()=>this.view,()=>this._viewHandles(),y.initial),"view");this._handles.add(g.onLocaleChange(()=>this._refresh()))};I.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null};I._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(y.watch(()=>this.state,()=>this._stateHandles(),y.initial),"state")};I._stateHandles=function(){this._resetAll();
"ready"===this.state&&this._watchPropertiesAndAllLayerViews()};I._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()};I._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)};I._destroyViewActiveLayerInfo=function(k){this._handles.remove(k);const w=this._activeLayerInfosByLayerViewId[k];delete this._activeLayerInfosByLayerViewId[k];
w&&w.parent&&w.parent.children.remove(w)};I._watchPropertiesAndAllLayerViews=function(){const {allLayerViews:k}=this.view;k.length&&this._refresh();this._handles.add(k.on("change",w=>this._allLayerViewsChangeHandle(w)),"all-layer-views");this._handles.add(y.watch(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),"legend-properties")};I._allLayerViewsChangeHandle=function(k){k.removed.forEach(w=>this._destroyViewActiveLayerInfo(w.uid));this._refresh()};
I._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos();this._refresh()};I._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this);this._sortActiveLayerInfos(this.activeLayerInfos)};I._sortActiveLayerInfos=function(k){if(!(2>k.length)){var w=[];k.forEach(a=>{if(!a.parent){var c=a.layer.parent;
(c=(c=c&&"uid"in c&&this._layerViewByLayerId[c.uid])&&this._activeLayerInfosByLayerViewId[c.uid])&&k.includes(c)&&(w.push(a),a.parent=c,c.children.add(a),this._sortActiveLayerInfos(c.children))}});k.removeMany(w);var r={};this.view.allLayerViews.forEach((a,c)=>r[a.layer.uid]=c);k.sort((a,c)=>(r[c.layer.uid]||0)-(r[a.layer.uid]||0))}};I._generateLayerViews=function(){const k=[];H.filter(this._filterLayerViews,this).map(this.get,this).filter(w=>null!=w).forEach(this._collectLayerViews("layerViews",
k));return k};I._filterLayerViews=function(k){const w=!this.groundLegendVisible&&"view.groundView.layerViews"===k;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===k||"view.basemapView.referenceLayerViews"===k))&&!w};I._collectLayerViews=function(k,w){const r=a=>{a&&a.forEach(c=>{w.push(c);r(c[k])});return w};return r};I._filterLayerViewsByLayerInfos=function(k){const w=this.layerInfos;return w&&w.length?w.some(r=>this._hasLayerInfo(r,k)):!0};I._hasLayerInfo=function(k,w){const r=
this._isLayerUIDMatching(k.layer,w.layer.uid);r&&(this._layerInfosByLayerViewId[w.uid]=k);return r};I._isLayerUIDMatching=function(k,w){return k&&(k.uid===w||this._hasLayerUID(k.layers,w))};I._hasLayerUID=function(k,w){return k&&k.some(r=>this._isLayerUIDMatching(r,w))};I._isLayerViewSupported=function(k){return d.includes(k.layer.declaredClass)?(this._layerViewByLayerId[k.layer.uid]=k,!0):!1};I._generateActiveLayerInfo=function(k){this._isLayerActive(k)?this._buildActiveLayerInfo(k):(this._handles.remove(k.uid),
this._handles.add(y.watch(()=>{var w;return[k.legendEnabled,null==(w=k.layer)?void 0:w.legendEnabled]},()=>this._layerActiveHandle(k)),k.uid))};I._layerActiveHandle=function(k){this._isLayerActive(k)&&(this._handles.remove(k.uid),this._buildActiveLayerInfo(k))};I._isLayerActive=function(k){return this.respectLayerVisibility?k.legendEnabled&&k.get("layer.legendEnabled"):!0};I._buildActiveLayerInfo=function(k){var w;const r=k.layer,a=k.uid;var c=this._layerInfosByLayerViewId[a];let x=this._activeLayerInfosByLayerViewId[a];
x||(x=new e({layer:r,layerView:k,title:c&&void 0!==c.title&&c.layer.uid===r.uid?c.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:c&&c.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[a]=x);c=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(w=r.parent)?void 0:w.uid];x.parent=this._activeLayerInfosByLayerViewId[null==c?void 0:c.uid];if(!this._handles.has(a)){w=
y.watch(()=>r.title,z=>this._titleHandle(z,x));c=y.watch(()=>[r.opacity,"renderer"in r&&r.renderer,"pointSymbol"in r&&r.pointSymbol,"lineSymbol"in r&&r.lineSymbol,"polygonSymbol"in r&&r.polygonSymbol],()=>this._constructLegendElements(x));var O=y.when(()=>{var z;return!0===(null==(z=this.view)?void 0:z.stationary)},()=>this._scaleHandle(x),y.initial);const E=y.watch(()=>k._effectiveRenderer,()=>this._constructLegendElements(x)),h=y.watch(()=>"effect"in r&&r.effect,()=>this._constructLegendElements(x));
w=[w,c,O,E,h];this.respectLayerVisibility&&(c=y.watch(()=>k.legendEnabled,z=>this._legendEnabledHandle(z,x)),O=y.watch(()=>r.legendEnabled,z=>this._legendEnabledHandle(z,x)),w.push(c,O));this._handles.add(w,a)}x.isScaleDriven||this._constructLegendElements(x);this._addActiveLayerInfo(x)};I._titleHandle=function(k,w){w.title=k;this._constructLegendElements(w)};I._legendEnabledHandle=function(k,w){k?this._addActiveLayerInfo(w):this._removeActiveLayerInfo(w)};I._scaleHandle=function(k){(k.isScaleDriven||
k.hideLayersNotInCurrentView)&&this._constructLegendElements(k)};I._addActiveLayerInfo=function(k){const {layerView:w,layer:r}=k;if(this._isLayerActive(w)&&!this.activeLayerInfos.includes(k)){var a=k.parent;if(a)a.children.includes(k)||a.children.push(k),this._sortActiveLayerInfos(a.children);else{var c;a=null==(c=this.layerInfos)?void 0:c.some(x=>x.layer.uid===r.uid);r.parent&&"uid"in r.parent&&!a?this._activeLayerInfosWithNoParent.add(k):(this.activeLayerInfos.add(k),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const x=
[];this._activeLayerInfosWithNoParent.forEach(O=>{var E=O.layer.parent;E=E&&"uid"in E&&this._layerViewByLayerId[null==E?void 0:E.uid];if(E=this._activeLayerInfosByLayerViewId[null==E?void 0:E.uid])x.push(O),O.parent=E});x.length&&(this._activeLayerInfosWithNoParent.removeMany(x),x.forEach(O=>this._addActiveLayerInfo(O)))}}};I._removeActiveLayerInfo=function(k){const w=k.parent;w?w.children.remove(k):this.activeLayerInfos.remove(k)};I._constructLegendElements=function(k){var w;const r=k.layer;"featureCollections"in
r&&r.featureCollections?k.buildLegendElementsForFeatureCollections(r.featureCollections):"featureReduction"in r&&"binning"===(null==(w=r.featureReduction)?void 0:w.type)&&"renderer"in r.featureReduction?k.buildLegendElementsForRenderer(r.featureReduction.renderer):"renderer"in r&&r.renderer?k.buildLegendElementsForRenderer(r.renderer):"url"in r&&r.url?k.buildLegendElementsForTools():k.children.forEach(a=>this._constructLegendElements(a))};N._createClass(G,[{key:"state",get:function(){return this.get("view.ready")?
"ready":"disabled"}}]);return G}(A);n.__decorate([v.property({type:t})],l.prototype,"activeLayerInfos",void 0);n.__decorate([v.property()],l.prototype,"basemapLegendVisible",void 0);n.__decorate([v.property()],l.prototype,"groundLegendVisible",void 0);n.__decorate([v.property()],l.prototype,"hideLayersNotInCurrentView",void 0);n.__decorate([v.property()],l.prototype,"keepCacheOnDestroy",void 0);n.__decorate([v.property()],l.prototype,"respectLayerVisibility",void 0);n.__decorate([v.property()],l.prototype,
"layerInfos",void 0);n.__decorate([v.property({readOnly:!0})],l.prototype,"state",null);n.__decorate([v.property()],l.prototype,"view",void 0);return l=n.__decorate([b.subclass("esri.widgets.Legend.LegendViewModel")],l)})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../kernel ../../../request ../../../symbols ../../../core/Accessor ../../../core/Collection ../../../core/Handles ../../../core/jsonMap ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/PropertyOrigin ../../../layers/effects/EffectView ../../../layers/effects/jsonUtils ../../../layers/support/ExportImageParameters ../../../layers/support/fieldUtils ../../../renderers/support/jsonUtils ../../../renderers/support/rendererConversion ../../../renderers/visualVariables/support/SizeVariableLegendOptions ../../../symbols/support/cimSymbolUtils ../../../symbols/support/previewUtils ../../../symbols/support/renderUtils ../../../symbols/support/symbolUtils ../../../symbols/support/utils ./clusterUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils ./utils ../../smartMapping/support/utils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleFillSymbol".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q,G,I,k,w,r,a,c,x,O,E,h,z,q,p,S,P,T,F,M,V,aa,ka,la,X,Z,da){function ia(Da){return"esri.renderers.SimpleRenderer"===Da.declaredClass}function va(Da){return"esri.renderers.ClassBreaksRenderer"===Da.declaredClass}function ya(Da){return"esri.renderers.UniqueValueRenderer"===Da.declaredClass}function Ba(Da){return"esri.renderers.HeatmapRenderer"===Da.declaredClass}function ca(Da){return"esri.renderers.PointCloudClassBreaksRenderer"===Da.declaredClass}function fa(Da){return"esri.renderers.PointCloudStretchRenderer"===
Da.declaredClass}function ea(Da){return"esri.renderers.PointCloudUniqueValueRenderer"===Da.declaredClass}function pa(Da){return"esri.renderers.DotDensityRenderer"===Da.declaredClass}function oa(Da){return"esri.renderers.PieChartRenderer"===Da.declaredClass}function ra(Da){return"esri.layers.BuildingSceneLayer"===Da.declaredClass}function Aa(Da){Da="authoringInfo"in Da&&(null==Da?void 0:Da.authoringInfo);return"univariate-color-size"===(null==Da?void 0:Da.type)}function Ca(Da){Da="authoringInfo"in
Da&&(null==Da?void 0:Da.authoringInfo);return"univariate-color-size"===(null==Da?void 0:Da.type)&&"above-and-below"===(null==Da?void 0:Da.univariateTheme)}const za=b.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Ja=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,La=new f.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Va={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,
127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Ta=new Z({size:6,outline:{color:[128,128,128,.5],width:.5}}),Ya=new da({style:"solid"}),Wa=new Z({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Pa={};y=function(Da){function Ua(R){R=Da.call(this,R)||this;R._handles=new J;R._hasColorRamp=!1;R._hasOpacityRamp=!1;R._hasSizeRamp=!1;R._webStyleSymbolCache=
new Map;R._dotDensityUrlCache=new Map;R._scaleDrivenSizeVariable=null;R._hasClusterSizeVariable=!1;R.children=new L;R.layerView=null;R.layer=null;R.legendElements=[];R.parent=null;R.hideLayersNotInCurrentView=!1;R.keepCacheOnDestroy=!1;R.respectLayerVisibility=!0;R.sublayerIds=[];R.title=null;R.view=null;return R}n._inheritsLoose(Ua,Da);var wa=Ua.prototype;wa.initialize=function(){const R=()=>this.notifyChange("ready");this._handles.add([t.on(()=>this.children,"change",B=>{const {added:W,removed:u}=
B,C=this._handles;W.forEach(K=>{const U=`activeLayerInfo-ready-watcher-${K.layer.uid}`;C.add(t.watch(()=>K.ready,R,t.initial),U)});u.forEach(K=>C.remove(K.layer.uid));R()})]);this.keepCacheOnDestroy||(Pa={})};wa.destroy=function(){this._handles.destroy();this._scaleDrivenSizeVariable=this._dotDensityUrlCache=this._webStyleSymbolCache=this._handles=null;this.keepCacheOnDestroy||(Pa=null)};wa.buildLegendElementsForFeatureCollections=function(){var R=n._asyncToGenerator(function*(B){if(this.hideLayersNotInCurrentView&&
!(yield this._isLayerInCurrentView()))this.legendElements=[],this.notifyChange("ready");else{B=Array.from(B,W=>{if("esri.layers.FeatureLayer"===W.declaredClass)return this._getRendererLegendElements(W.renderer,{title:W.title});if(W.featureSet&&W.featureSet.features.length){var u=W.layerDefinition,C=u&&u.drawingInfo;C=C&&E.fromJSON(C.renderer);u=La.read(u.geometryType);return C?this._getRendererLegendElements(C,{title:W.name,geometryType:u}):(za.warn("drawingInfo not available!"),null)}return null});
try{const W=[];yield g.eachAlways(B).then(u=>{u.forEach(({value:C})=>C&&W.push(...C))});this.legendElements=W;this.notifyChange("ready")}catch(W){za.warn("error while building legend for layer!",W)}}});return function(B){return R.apply(this,arguments)}}();wa.buildLegendElementsForRenderer=function(){var R=n._asyncToGenerator(function*(B){try{this.legendElements=(this.hideLayersNotInCurrentView?yield this._isLayerInCurrentView():1)?yield this._getRendererLegendElements(B):[],this.notifyChange("ready")}catch(W){za.warn("error while building legend for layer!",
W)}});return function(B){return R.apply(this,arguments)}}();wa.buildLegendElementsForTools=function(){var R=n._asyncToGenerator(function*(){var B=this;const W=this.layer;if("esri.layers.VoxelLayer"===W.declaredClass)this._constructLegendElementsForVoxellayer();else if("esri.layers.WMTSLayer"===W.declaredClass)this._constructLegendElementsForWMTSlayer();else if("esri.layers.WMSLayer"===W.declaredClass)yield this._constructLegendElementsForWMSSublayers();else if(ra(W))yield this._constructLegendElementsForBuildingSceneLayer();
else if("esri.layers.MapImageLayer"===W.declaredClass||"esri.layers.TileLayer"===W.declaredClass||ra(W))yield this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");var u="default";if("esri.layers.ImageryLayer"===W.declaredClass){var C,K;u=(null==W?void 0:null==(C=W.renderingRule)?void 0:C.functionName)||"default";C=null!=(K=W.bandIds)&&K.length?W.bandIds.join(""):"###";u=u+"_"+C}yield this._getLegendLayers(`${W.uid}-${u}`).then(function(){var U=n._asyncToGenerator(function*(Y){B.legendElements=
[];B.notifyChange("ready");Y=Y.map(function(){var ba=n._asyncToGenerator(function*(ha){if("esri.layers.ImageryLayer"===W.declaredClass||"esri.layers.ImageryTileLayer"===W.declaredClass){const na=t.watch(()=>["renderingRule"in W&&W.renderingRule,W.bandIds],()=>g.debounce(n._asyncToGenerator(function*(){Pa["default"]=null;W.renderer?yield B.buildLegendElementsForRenderer(W.renderer):yield B.buildLegendElementsForTools()}))());B._handles.add(na,"imageryLayers-watcher")}(ha=B._generateSymbolTableElementForLegendLayer(ha))&&
ha.infos.length&&("esri.layers.ImageryLayer"===W.declaredClass&&(ha.title=W.title),B.legendElements.push(ha));B.notifyChange("ready")});return function(ha){return ba.apply(this,arguments)}}());yield g.eachAlways(Y)});return function(Y){return U.apply(this,arguments)}}()).catch(U=>{za.warn("Request to server for legend has failed!",U)})}});return function(){return R.apply(this,arguments)}}();wa._isLayerInCurrentView=function(){var R=n._asyncToGenerator(function*(){const B=this.layer,W=this.layerView,
u=W&&"createQuery"in W&&"queryFeatureCount"in W;if(!(u||W&&"createQuery"in B&&"queryFeatureCount"in B))return!0;yield t.whenOnce(()=>!W.updating);const C=u?"createQuery"in W&&W.createQuery():"createQuery"in B&&B.createQuery();C.geometry=this.view.extent;return 0!==(u?"queryFeatureCount"in W&&(yield W.queryFeatureCount(C)):"queryFeatureCount"in B&&(yield B.queryFeatureCount(C)))});return function(){return R.apply(this,arguments)}}();wa._getParentLayerOpacity=function(R){let B=1;const W=R.parent;W&&
"uid"in W&&(B=this._getParentLayerOpacity(W));return R.opacity*B};wa._isGroupActive=function(){const R=this.children;return R.length?R.some(B=>B.ready):!1};wa._isRendererScaleDriven=function(R){return"dot-density"===R.type||Ja.test("valueExpression"in R&&R.valueExpression)?!0:(R="visualVariables"in R&&R.visualVariables)?R.some(B=>this._isScaleDrivenSizeVariable(B)):!1};wa._isScaleDrivenSizeVariable=function(R){if(R&&"size"!==R.type)return!1;const B=R.minSize,W=R.maxSize;return"object"===typeof B&&
B?this._isScaleDrivenSizeVariable(B):"object"===typeof W&&W?this._isScaleDrivenSizeVariable(W):!!R.expression||Ja.test(R.valueExpression)};wa._isLayerScaleDriven=function(R){if("minScale"in R&&0<R.minScale||"maxScale"in R&&0<R.maxScale)return!0;if("sublayers"in R&&R.sublayers)return R.sublayers.some(W=>this._isLayerScaleDriven(W));const B=R.parent;if(!1===R.loaded&&B&&"esri.layers.MapImageLayer"===B.declaredClass&&"source"in R&&R.source&&"map-layer"===R.source.type)for(const W of B.sourceJSON.layers)if(W.id===
R.source.mapLayerId&&(0<W.minScale||0<W.maxScale))return!0;return!1};wa._constructLegendElementsForVoxellayer=function(){var R=n._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("voxel-style-watcher");const B=this.layer;this._handles.add(t.watch(()=>B.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");var W=e.unwrap(B.getVariableStyle(null));const u=[];if(W){var C;if(null!=(C=W.uniqueValues)&&C.length){const U=[];W.uniqueValues.forEach(Y=>
{Y.enabled&&U.push({label:Y.label||`${Y.value}`,value:Y.value,symbol:new da({color:Y.color,outline:null})})});U.length&&u.push({type:"symbol-table",title:W.label,infos:U})}else if(W.transferFunction){const {colorStops:U,stretchRange:Y}=W.transferFunction;C=U.toArray().reverse();const ba=Y.map((na,ja)=>`${0===ja?la.SPECIAL_CHARS_LESS_THAN:la.SPECIAL_CHARS_GREATER_THAN} ${X.formatNumberLabel(na)}`).reverse(),ha=C.map(na=>({color:na.color,value:null,label:null}));ha[0].label=ba[0];ha[ha.length-1].label=
ba[1];u.push({type:"color-ramp",title:W.label,infos:ha,preview:P.renderColorRampPreviewHTML(C.map(na=>na.color))})}}const K=B.opacity;W=u.reduce((U,Y)=>U.concat(this._getAllInfos(Y)),[]).filter(U=>!(null==U||!U.symbol)).map(U=>this._getSymbolPreview(U,K));yield g.eachAlways(W);this.legendElements=u;this.notifyChange("ready")});return function(){return R.apply(this,arguments)}}();wa._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");
const R=this.layer.activeLayer;this._handles.add(t.watch(()=>{const {layer:B}=this;return B&&"activeLayer"in B&&B.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");if(R.styleId&&R.styles){let B=null;R.styles.some(W=>R.styleId===W.id?(B=W.legendUrl,!0):!1);B&&(this.legendElements=[{type:"symbol-table",title:R.title,infos:[{src:B,opacity:this.opacity}]}])}this.notifyChange("ready")};wa._constructLegendElementsForWMSSublayers=function(){var R=n._asyncToGenerator(function*(){this.legendElements=
[];this._handles.remove("wms-sublayers-watcher");const B=this.layer;let W=null;if(B.customParameters||B.customLayerParameters)W={...B.customParameters,...B.customLayerParameters};this._handles.add(t.watch(()=>{const {layer:u}=this;return u&&"sublayers"in u&&u.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");this.legendElements=yield this._generateLegendElementsForWMSSublayers(B.sublayers,W);this.notifyChange("ready")});return function(){return R.apply(this,arguments)}}();
wa._generateLegendElementsForWMSSublayers=function(){var R=n._asyncToGenerator(function*(B,W){const u=[];this._handles.add(B.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");B=B.toArray();for(const C of B)B=t.watch(()=>[C.title,C.visible,C.legendEnabled],()=>this._constructLegendElementsForWMSSublayers()),this._handles.add(B,"wms-sublayers-watcher"),(!this.respectLayerVisibility||C.visible&&C.legendEnabled)&&(B=yield this._generateSymbolTableElementForWMSSublayer(C,
W))&&B.infos.length&&u.unshift(B);return u});return function(B,W){return R.apply(this,arguments)}}();wa._generateSymbolTableElementForWMSSublayer=function(){var R=n._asyncToGenerator(function*(B,W){return!B.legendUrl&&B.sublayers?(W=(yield this._generateLegendElementsForWMSSublayers(B.sublayers,W)).filter(u=>u),{type:"symbol-table",title:B.title,infos:W}):this._generateSymbolTableElementForLegendUrl(B,W)});return function(B,W){return R.apply(this,arguments)}}();wa._generateSymbolTableElementForLegendUrl=
function(){var R=n._asyncToGenerator(function*(B,W){var u;let C=B.legendUrl;if(C){var K={type:"symbol-table",title:B.title||B.name||B.id&&B.id+"",infos:[]};W&&(C=H.addQueryParameters(C,W));W=null;B=null==(u=B.layer)?void 0:u.opacity;try{if(W=(yield D(C,{responseType:"image"})).data)W.style.opacity=B}catch{}K.infos.push({src:C,preview:W,opacity:B});return K}});return function(B,W){return R.apply(this,arguments)}}();wa._getLegendLayers=function(R,B){const W=Pa&&Pa[R];return W?Promise.resolve(W):this._legendRequest(B).then(u=>
{u=u.layers;return Pa[R]=u})};wa._legendRequest=function(R){var B=this.layer;R={f:"json",dynamicLayers:R};if("esri.layers.ImageryLayer"===B.declaredClass){var W=B.exportImageServiceParameters.renderingRule;W&&(R.renderingRule=JSON.stringify(W.rasterFunctionDefinition||W.toJSON()));B.bandIds&&(R.bandIds=B.bandIds.join());if(B.raster||B.viewId||B.customParameters){const {raster:u,viewId:C,customParameters:K}=B;R={raster:u,viewId:C,...R,...K}}}W=B.url.replace(/(\/)+$/,"");"version"in B&&10.01<=B.version?
(B=W.indexOf("?"),W=-1<B?W.substring(0,B)+"/legend"+W.substring(B):W+"/legend"):(B=W.toLowerCase().indexOf("/rest/"),B=W.substring(0,B)+W.substring(B+5,W.length),W="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(B)+"\x26returnbytes\x3dtrue");return D(W,{query:R}).then(u=>u.data)};wa._constructLegendElementsForBuildingSceneLayer=function(){var R=n._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const B=this.layer;this._handles.add(t.watch(()=>
B.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForBuildingSublayers(B.sublayers,this.opacity),this.notifyChange("ready")}catch(W){za.warn("Request to server for legend has failed!",W)}});return function(){return R.apply(this,arguments)}}();wa._generateLegendElementsForBuildingSublayers=function(){var R=n._asyncToGenerator(function*(B,W){let u=[];this._handles.add(B.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),
"sublayers-watcher");B=B.toArray();for(const K of B)if(B=t.watch(()=>["renderer"in K&&K.renderer,K.opacity,K.title,K.visible],()=>this._constructLegendElementsForBuildingSceneLayer()),this._handles.add(B,"sublayers-watcher"),!this.respectLayerVisibility||K.visible){B=K&&null!=K.opacity?K.opacity:null;var C=null!=B?B*W:W;"building-group"===K.type?(B={type:"symbol-table",title:K.title,infos:[]},C=yield this._generateLegendElementsForBuildingSublayers(K.sublayers,C),B.infos.push(...C),u=[B,...u]):K.renderer&&
(u=[...yield this._getRendererLegendElements(K.renderer,{title:K.title,opacity:C,sublayer:K}),...u])}return u.filter(K=>!!K&&("infos"in K?0<K.infos.length:!0))});return function(B,W){return R.apply(this,arguments)}}();wa._constructLegendElementsForSublayers=function(){var R=n._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const B=this.layer;this._handles.add(t.watch(()=>B.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");
try{this.legendElements=yield this._generateLegendElementsForSublayers(B.sublayers,this.opacity),this.notifyChange("ready")}catch(W){za.warn("Request to server for legend has failed!",W)}});return function(){return R.apply(this,arguments)}}();wa._generateLegendElementsForSublayers=function(){var R=n._asyncToGenerator(function*(B,W,u){const C=this.layer;let K=[];this._handles.add(B.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");B=B.toArray();!u&&this.sublayerIds&&
this.sublayerIds.length&&(B=this.sublayerIds.map(U=>C.findSublayerById(U)).filter(Boolean));for(const U of B)if(B=t.watch(()=>[U.renderer,U.opacity,U.title,U.visible,U.legendEnabled],()=>this._constructLegendElementsForSublayers()),this._handles.add(B,"sublayers-watcher"),!this.respectLayerVisibility||U.visible&&U.legendEnabled&&this._isSublayerInScale(U))B=U&&null!=U.opacity?U.opacity:null,B=null!=B?B*W:W,U.renderer&&!U.sublayers&&U.originIdOf("renderer")>r.OriginId.SERVICE?(yield U.load(),K=[...yield this._getRendererLegendElements(U.renderer,
{title:U.title,opacity:B,sublayer:U}),...K]):(B=yield this._generateSymbolTableElementForSublayer(U,B,u))&&K.unshift(B);return K.filter(U=>!!U&&("infos"in U?0<U.infos.length:!0))});return function(B,W,u){return R.apply(this,arguments)}}();wa._generateSymbolTableElementForSublayer=function(){var R=n._asyncToGenerator(function*(B,W,u){if(!u){u=new Map;var C=this.layer,K=B.source;let U=null;if(K&&("map-layer"!==K.type||K.mapLayerId!==B.id||K.gdbVersion&&K.gdbVersion!==("gdbVersion"in C&&C.gdbVersion))||
B.originIdOf("renderer")>r.OriginId.SERVICE||B.originIdOf("labelingInfo")>r.OriginId.SERVICE||B.originIdOf("labelsVisible")>r.OriginId.SERVICE)K=new x.ExportImageParameters({layer:this.layer}),U=K.hasDynamicLayers?K.dynamicLayers:null,K.destroy();(yield this._getLegendLayers(U||`${C.uid}-default`,U)).forEach(Y=>u.set(Y.layerId,Y))}C=u.get(B.id);return(!C||null!=C&&C.subLayerIds&&C.defaultVisibility)&&B.sublayers?(W=yield this._generateLegendElementsForSublayers(B.sublayers,W,u),{type:"symbol-table",
title:B.title,infos:W}):this._generateSymbolTableElementForLegendLayer(C,B,W)});return function(B,W,u){return R.apply(this,arguments)}}();wa._generateSymbolTableElementForLegendLayer=function(R,B,W){var u;if(!R||!R.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(R,B))return null;var C=null==B?void 0:B.renderer;let K=(null==B?void 0:B.title)||R.layerName;C&&(!B||(null==B?void 0:B.originIdOf("renderer"))>r.OriginId.SERVICE)&&(C=(null==B?void 0:B.title)||this._getRendererTitle(C,B))&&
(K&&"string"!==typeof C&&"title"in C&&(C.title=K),K=C);const U={type:"symbol-table",title:K,legendType:R.legendType?R.legendType:null,infos:[]},Y=B?this._sanitizeLegendForSublayer(R.legend.slice(),B):R.legend;0<(null==(u=R.legendGroups)?void 0:u.length)?R.legendGroups.forEach(ba=>{var ha;const na={type:"symbol-table",title:ba.heading,legendType:R.legendType?R.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(Y.filter(ja=>ja.groupId===ba.id),R.layerId,W)};0<(null==(ha=na.infos)?
void 0:ha.length)&&U.infos.push(na)}):U.infos=this._generateSymbolTableElementInfosForLegendLayer(Y,R.layerId,W);return 0<U.infos.length?U:null};wa._generateSymbolTableElementInfosForLegendLayer=function(R,B,W){return R.map(u=>{let C=u.url;if(u.imageData&&0<u.imageData.length)C=`data:image/png;base64,${u.imageData}`;else if(0!==C.indexOf("http"))C=m.addTokenParameter(`${this.layer.url}/${B}/images/${C}`);else return null;return{label:u.label,src:C,opacity:null==W?this.opacity:W,width:u.width,height:u.height}}).filter(u=>
!!u)};wa._isSublayerInScale=function(R){const B=R.minScale||0;R=R.maxScale||0;return 0<B&&B<this.scale||R>this.scale?!1:!0};wa._isLegendLayerInScale=function(R,B){B=B||this.layer;let W=null,u=null,C=!0;!B.minScale&&0!==B.minScale||!B.maxScale&&0!==B.maxScale?(0===R.minScale&&B.tileInfo&&(W=B.tileInfo.lods[0].scale),0===R.maxScale&&B.tileInfo&&(u=B.tileInfo.lods[B.tileInfo.lods.length-1].scale)):(W=Math.min(B.minScale,R.minScale)||B.minScale||R.minScale,u=Math.max(B.maxScale,R.maxScale));if(0<W&&W<
this.scale||u>this.scale)C=!1;return C};wa._sanitizeLegendForSublayer=function(R,B){if("version"in this.layer&&10.1>this.layer.version||0===R.length)return R;B=B.renderer;let W=null,u=null;R.some(C=>C.values)&&R.some((C,K)=>{C.values||(W=K,u=C,u.label||(u.label="others"));return null!=u});B?"unique-value"===B.type?u&&(R.splice(W,1),R.push(u)):"class-breaks"===B.type&&(u&&R.splice(W,1),R.reverse(),u&&R.push(u)):u&&(R.splice(W,1),R.push(u));return R};wa._getRendererLegendElements=function(){var R=n._asyncToGenerator(function*(B,
W={}){var u=this.view;u=ia(B)||va(B)||ya(B)||Ba(B)||pa(B)||oa(B)?"2d"===u.type||h.isSupportedRenderer3D(B):"raster-stretch"===B.type||"raster-colormap"===B.type||"raster-shaded-relief"===B.type||ca(B)||fa(B)||ea(B)||"vector-field"===B.type||"flow"===B.type;return u?ca(B)||fa(B)||ea(B)||"esri.renderers.PointCloudRGBRenderer"===B.declaredClass?this._constructPointCloudRendererLegendElements(B,W):pa(B)?this._constructDotDensityRendererLegendElements(B):oa(B)?this._constructPieChartRendererLegendElements(B):
this._constructRendererLegendElements(B,W):(za.warn(`Renderer of type '${B.type}' not supported!`),[])});return function(B){return R.apply(this,arguments)}}();wa._getPointCloudRendererTitle=function(R){return R.legendOptions&&R.legendOptions.title||R.field};wa._constructPointCloudRendererLegendElements=function(R,B={}){B=B.title;const W=[];let u=null;var C=null;if(ca(R))u={type:"symbol-table",title:B||this._getPointCloudRendererTitle(R),infos:[]},R.colorClassBreakInfos.forEach(K=>{u.infos.unshift({label:K.label||
K.minValue+" - "+K.maxValue,value:[K.minValue,K.maxValue],symbol:this._getAppliedCloneSymbol(Ta,K.color)})});else if(fa(R)){C=R.stops;let K=null;if(C.length&&(1===C.length&&(K=C[0].color),!K)){const U=C[0].value,Y=C[C.length-1].value;null!=U&&null!=Y&&(K=M.getColorFromPointCloudStops(U+(Y-U)/2,C))}u={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Ta,K||Ta.color)}]};C=M.getRampStopsForPointCloud(R.stops);C={type:"color-ramp",title:B||this._getPointCloudRendererTitle(R),
infos:C,preview:P.renderColorRampPreviewHTML(C.map(U=>U.color))}}else ea(R)&&(u={type:"symbol-table",title:B||this._getPointCloudRendererTitle(R),infos:[]},R.colorUniqueValueInfos.forEach(K=>{u.infos.push({label:K.label||K.values.join(", "),value:K.values.join(", "),symbol:this._getAppliedCloneSymbol(Ta,K.color)})}));u&&u.infos.length&&W.push(u);C&&C.infos.length&&W.push(C);B=W.reduce((K,U)=>K.concat(U.infos),[]).filter(K=>!!K.symbol).map(K=>this._getSymbolPreview(K,this.opacity,{symbolConfig:{applyColorModulation:!!R.colorModulation}}));
return g.eachAlways(B).then(()=>W)};wa._getElementInfoForDotDensity=function(R,B){const {backgroundColor:W,outline:u,dotSize:C}=R;var K=this.effectList;K=null==K?void 0:K.effects.map(Y=>Y.toJSON());K=c.effectFunctionsFromJSON(K);K=C+"-"+B+"-"+W+"-"+(u&&JSON.stringify(u.toJSON()))+"-"+K;const U=this._dotDensityUrlCache;R=U.has(K)?U.get(K):P.renderDotDensityPreviewHTML(R,B);U.set(K,R);B=S.renderSymbol([[{shape:{type:"image",x:0,y:0,width:R.width,height:R.height,src:R.src},fill:null,stroke:null,offset:[0,
0]}]],[R.width,R.height],{effectView:this.effectList});return{opacity:1,src:R.src,preview:B,width:R.width,height:R.height}};wa._constructDotDensityRendererLegendElements=function(R){const B=R.calculateDotValue(this.view.scale),W={type:"symbol-table",title:{value:B&&Math.round(B),unit:R.legendOptions&&R.legendOptions.unit||""},infos:[]};R.attributes.forEach(u=>{const C=this._getElementInfoForDotDensity(R,u.color);C.label=u.label||u.valueExpressionTitle||u.field;W.infos.push(C)});return Promise.resolve([W])};
wa._constructPieChartRendererLegendElements=function(){var R=n._asyncToGenerator(function*(B){var W,u,C;const K=this.layer.opacity,U=[],Y=B.outline;B.attributes.forEach(na=>{const ja=new Z({color:na.color,outline:Y});U.push({label:na.label||na.valueExpressionTitle||na.field,symbol:ja})});var ba=U.length?[...U]:[];null!=(W=B.othersCategory)&&W.color&&0!==(null==(u=B.othersCategory)?void 0:u.threshold)&&(W=new Z({color:B.othersCategory.color,outline:Y}),U.push({label:B.othersCategory.label||"Others",
symbol:W}));null!=(C=B.defaultColor)&&C.a&&(C=new Z({color:B.defaultColor,outline:Y}),U.push({label:B.defaultLabel,symbol:C}));C=(yield this._getVisualVariableLegendElements(B,this.layer))||[];if(U.length){var ha;C.unshift({type:"symbol-table",title:null,infos:U});ba=ba.filter(na=>"Others"!==na.label).map(na=>na.symbol.color).filter(Boolean);ba=P.renderPieChartPreviewHTML(ba,{holePercentage:B.holePercentage,backgroundColor:null==(ha=B.backgroundFillSymbol)?void 0:ha.color,effectList:this.effectList,
outline:Y});C.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(B,this.layer),infos:U,preview:ba})}B=C.reduce((na,ja)=>na.concat(this._getAllInfos(ja)),[]).filter(na=>!(null==na||!na.symbol)&&!(null!=na&&na.preview)).map(na=>this._getSymbolPreview(na,K,{effectList:this.effectList}));yield g.eachAlways(B);return C});return function(B){return R.apply(this,arguments)}}();wa._constructRendererLegendElements=function(){var R=n._asyncToGenerator(function*(B,W={}){const {title:u,sublayer:C}=W,
K=C||this.layer;B=yield this._loadRenderer(B);this._hasSizeRamp=this._hasOpacityRamp=this._hasColorRamp=!1;this._scaleDrivenSizeVariable=null;const U=(yield this._getVisualVariableLegendElements(B,K))||[],Y={type:"symbol-table",title:u||this._getRendererTitle(B,K),infos:[]};let ba=null,ha=!1;const na=new Set;if("flow"!==B.type||this._hasSizeRamp)if(Aa(B)){var ja=u,ma=Ca(B)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",qa=U.findIndex(sa=>"color-ramp"===sa.type);qa=-1!==qa?U.splice(qa,
1)[0]:null;var ta=U.findIndex(sa=>"size-ramp"===sa.type);ta=-1!==ta?U.splice(ta,1)[0]:null;var xa=[];qa&&(ja=qa.title,xa.push(qa));ta&&(ja=ta.title,xa.push(ta));0<xa.length&&U.push({type:ma,title:ja,infos:xa})}else if(Ba(B))ja=V.getHeatmapRampStops(B),U.push({type:"heatmap-ramp",title:u||(null==(ta=B.legendOptions)?void 0:ta.title),infos:ja,preview:P.renderColorRampPreviewHTML(ja.map(sa=>sa.color),{effectList:this.effectList})});else if(ya(B)){if((ma=B&&B.authoringInfo)&&"relationship"===ma.type){const {focus:sa,
numClasses:Ha,field1:Ka,field2:Ea}=ma;if(Ha&&Ka&&Ea){qa=[Ka,Ea];ma=aa.getRotationAngleForFocus(sa)||0;for(ja of qa){const {field:Qa,normalizationField:Sa,label:Ma}=ja;qa=Ma||{field:this._getFieldAlias(Qa,K),normField:Sa&&this._getFieldAlias(Sa,K)};ta=Wa.clone();ta.angle=ma;Y.infos.push({label:qa,symbol:ta});na.add(ta);ma+=90}ja=aa.getRelationshipRampElement({focus:sa,numClasses:Ha,infos:B.uniqueValueInfos});U.unshift(ja)}}else{const sa=B.field;B.uniqueValueInfos.forEach(Ha=>{Ha.symbol&&Y.infos.push({label:Ha.label||
this._getDomainName(sa,Ha.value,K)||Ha.value,value:Ha.value,symbol:Ha.symbol})})}B.defaultSymbol&&(Y.infos.push({label:B.defaultLabel||"others",symbol:B.defaultSymbol}),ha=!0)}else if(va(B))ba=this._isUnclassedRenderer(B),ba&&this._hasSizeRamp||(B.classBreakInfos.forEach(sa=>{sa.symbol&&Y.infos.unshift({label:sa.label||(ba?null:sa.minValue+" - "+sa.maxValue),value:[sa.minValue,sa.maxValue],symbol:sa.symbol})}),ba&&(Y.title=null),this._updateInfosforClassedSizeRenderer(B,Y.infos)),B.defaultSymbol&&
!ba&&(Y.infos.push({label:B.defaultLabel||"others",symbol:B.defaultSymbol}),ha=!0);else if("raster-stretch"===B.type)if("esri.layers.ImageryTileLayer"===this.layer.declaredClass||"esri.layers.WCSLayer"===this.layer.declaredClass)ja=this._constructTileImageryStretchRendererElements(B),"stretch-ramp"===ja.type?U.push(ja):Y.infos=ja;else{ja=this.layer;B.statistics&&B.statistics.length&&(ma=null!=B.statistics[0].min?B.statistics[0].min:B.statistics[0][0],qa=null!=B.statistics[0].max?B.statistics[0].max:
B.statistics[0][1]);ta=[];ta=e.unwrap(ja.renderingRule?yield ja.generateRasterInfo(ja.renderingRule):ja.serviceRasterInfo);const sa=ta.keyProperties.BandProperties;xa=Va[ja.rasterInfo.pixelType.toLowerCase()];1===ta.bandCount?(ma=null!=ma?ma:ta.statistics?ta.statistics[ja.bandIds[0]].min:xa[0],qa=null!=qa?qa:ta.statistics?ta.statistics[ja.bandIds[0]].max:xa[1],ma||qa?U.push(this._getStretchLegendElements(B,{min:ma,max:qa})):this._getServerSideLegend()):ja.bandIds&&1===ja.bandIds.length?(ma=null!=
ma?ma:ta.statistics?ta.statistics[ja.bandIds[0]].min:xa[0],qa=null!=qa?qa:ta.statistics?ta.statistics[ja.bandIds[0]].max:xa[1],ma||qa?U.push(this._getStretchLegendElements(B,{min:ma,max:qa})):this._getServerSideLegend()):3<=ta.bandCount?sa&&sa.length>=ta.bandCount?ja.bandIds&&3===ja.bandIds.length?(ta=ja.bandIds.map(Ha=>sa[Ha].BandName),Y.infos=this._createSymbolTableElementMultiBand(ta)):"lerc"===ja.format?(ta=[0,1,2].map(Ha=>sa[Ha].BandName),Y.infos=this._createSymbolTableElementMultiBand(ta)):
this._getServerSideLegend():"lerc"===ja.format?(ta=["band1","band2","band3"],Y.infos=this._createSymbolTableElementMultiBand(ta)):this._getServerSideLegend():this._getServerSideLegend()}else if("raster-colormap"===B.type)B.colormapInfos.forEach(sa=>{Y.infos.push({label:sa.label,value:sa.value,symbol:this._getAppliedCloneSymbol(Ya,sa.color)})});else if(ia(B)){ja=B.symbol;switch(W.geometryType){case "point":ja="pointSymbol"in K&&K.pointSymbol;break;case "polyline":ja="lineSymbol"in K&&K.lineSymbol;
break;case "polygon":ja="polygonSymbol"in K&&K.polygonSymbol}B.symbol&&!this._hasSizeRamp&&Y.infos.push({label:B.label,symbol:ja})}else"vector-field"===B.type?(B.outputUnit&&(this.title="("+B.toJSON().outputUnit+")"),Y.title=B.attributeField,ja=B.getClassBreakInfos(),null!=ja&&ja.length?ja.forEach(sa=>{Y.infos.push({label:sa.minValue+" - "+sa.maxValue,symbol:sa.symbol})}):Y.infos.push({label:B.attributeField,symbol:B.getDefaultSymbol()})):"raster-shaded-relief"===B.type&&U.push(this._getStretchLegendElements(B,
{min:0,max:255}));else ja=yield la.getSymbolForFlowRenderer(B),Y.infos.push({label:null,symbol:ja});const ua=B.defaultSymbol;!ua||ha||ia(B)||ba&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||U.push({type:"symbol-table",infos:[{label:B.defaultLabel||"others",symbol:ua}]});Y.infos.length&&U.unshift(Y);const Fa=null==W.opacity?this.opacity:W.opacity,Ga=this._isTallSymbol("visualVariables"in B&&B.visualVariables),Ia="esri.layers.ImageryLayer"===this.layer.declaredClass||"esri.layers.ImageryTileLayer"===
this.layer.declaredClass;W=U.reduce((sa,Ha)=>sa.concat(this._getAllInfos(Ha)),[]).filter(sa=>!(null==sa||!sa.symbol)).map(sa=>this._getSymbolPreview(sa,Fa,{isDefault:sa.symbol===ua,applyScaleDrivenSize:!na.has(sa.symbol),symbolConfig:{isTall:Ga,isSquareFill:Ia},effectList:na.has(sa.symbol)?null:this.effectList}));B=null;yield g.eachAlways(W);return U});return function(B){return R.apply(this,arguments)}}();wa._getServerSideLegend=function(){setTimeout(()=>this.buildLegendElementsForTools(),0)};wa._getAllInfos=
function(R){const B=null==R?void 0:R.infos;return B?B.reduce((W,u)=>W.concat(this._getAllInfos(u)),[]):[R]};wa._constructTileImageryStretchRendererElements=function(R){function B(ha){var na;const ja=(null!=C&&null!=(na=C.bandIds)&&na.length?C.bandIds:Array.from(Array(Math.min(K.bandCount,3)).keys())).map(ma=>ha&&ha[ma]&&ha[ma].BandName||"band"+(ma+1));3>ja.length?ja.push(ja[1]):3<ja.length&&ja.splice(3);return ja}var W,u;const C=this.layer,K=C.rasterInfo,U=K.bandCount||R.statistics.length;var Y,ba=
[];ba=K.keyProperties&&K.keyProperties.BandProperties;(Y=null!=R&&null!=(W=R.statistics)&&W.length?R.statistics:null==K?void 0:K.statistics)?(W=void 0!==Y[0].min?Y[0].min:Y[0][0],Y=Y[0].max||Y[0][1]):(Y=Va[C.rasterInfo.pixelType.toLowerCase()],W=Y[0],Y=Y[1]);C.hasStandardTime()&&(W=C.getStandardTimeValue(W),Y=C.getStandardTimeValue(Y));if(1===K.bandCount||1===(null==(u=C.bandIds)?void 0:u.length))return this._getStretchLegendElements(R,{min:W,max:Y});ba=ba&&ba.length>=U?B(ba):B();return this._createSymbolTableElementMultiBand(ba)};
wa._getStretchLegendElements=function(R,B){R=M.getStrectchRampStops(R.colorRamp,B);return{type:"stretch-ramp",title:"",infos:R,preview:P.renderColorRampPreviewHTML(R.map(W=>W.color))}};wa._getSizeLegendElement=function(){var R=n._asyncToGenerator(function*(B,W,u,C){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(W):B,infos:yield ka.getRampStops(u,W,yield la.getMedianColor(u),this.scale,this.view.type,C)}});return function(B,W,u,C){return R.apply(this,arguments)}}();
wa._createSymbolTableElementMultiBand=function(R){const B=[],W=["red","green","blue"];R.forEach((u,C)=>{var K;B.push({label:{colorName:W[C],bandName:u},src:la.RGB_IMG_SOURCE[C],opacity:null!=(K=this.opacity)?K:1})});return B};wa._updateInfosforClassedSizeRenderer=function(R,B){const W=R.authoringInfo&&"class-breaks-size"===R.authoringInfo.type,u=R.classBreakInfos.some(C=>T.isVolumetricSymbol(C.symbol));if(W&&u){const C=ka.REAL_WORLD_MAX_SIZE;R=R.classBreakInfos.length;const K=(C-ka.REAL_WORLD_MIN_SIZE)/
(1<R?R-1:R);B.forEach((U,Y)=>{U.size=C-K*Y})}};wa._isTallSymbol=function(R){let B=!1,W=!1;if(R)for(let u=0;u<R.length&&(!B||!W);u++){const C=R[u];"size"===C.type&&("height"===C.axis&&(B=!0),"width-and-depth"===C.axis&&(W=!0))}return B&&W};wa._getSymbolPreview=function(){var R=n._asyncToGenerator(function*(B,W,u){var C=null!=u&&u.isDefault||null!=B.size||!this._hasSizeRamp?B.size:d.px2pt(p.SymbolSizeDefaults.size);this._scaleDrivenSizeVariable&&null!=u&&u.applyScaleDrivenSize&&({getSize:C}=yield new Promise((K,
U)=>N(["../../../renderers/visualVariables/support/visualVariableUtils"],K,U)),C=C(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===B.symbol.type?B.symbol.style:null}));return P.renderPreviewHTML(B.symbol,{size:C,opacity:W,scale:!1,symbolConfig:null==u?void 0:u.symbolConfig,effectView:null==u?void 0:u.effectList}).then(K=>{B.preview=K;return B}).catch(()=>{B.preview=null;return B})});return function(B,W,u){return R.apply(this,arguments)}}();wa._loadRenderer=
function(){var R=n._asyncToGenerator(function*(B){var W,u;const C=[];var K=this.layer;B=B.clone();this._hasClusterSizeVariable=!1;const U="visualVariables"in B&&(null==(W=B.visualVariables)?void 0:W.some(ba=>"size"===ba.type&&"outline"!==ba.target&&!Ja.test(ba.valueExpression)));if(B&&"visualVariables"in B&&!U&&"featureReduction"in K&&"cluster"===(null==(u=K.featureReduction)?void 0:u.type)&&(W=e.unwrap(F.getClusterSizeVariable(this.layerView._effectiveRenderer,this.view)))){K=K.featureReduction;
if("clusterMinSize"in K&&"clusterMaxSize"in K){const {clusterMinSize:ba,clusterMaxSize:ha}=K;W.legendOptions=new z({showLegend:ba!==ha})}B.visualVariables=(B.visualVariables||[]).concat([W]);this._hasClusterSizeVariable=!0}const Y=yield la.getMedianColor(B);if(va(B)||ya(B))K=(B.classBreakInfos||B.uniqueValueInfos).map(ba=>this._fetchSymbol(ba.symbol,Y).then(ha=>{ba.symbol=ha}).catch(()=>{ba.symbol=null})),Array.prototype.push.apply(C,K);C.push(this._fetchSymbol(B.symbol||B.defaultSymbol,B.defaultSymbol?
null:Y).then(ba=>{this._applySymbolToRenderer(B,ba,ia(B))}).catch(()=>{this._applySymbolToRenderer(B,null,ia(B))}));return g.eachAlways(C).then(()=>B)});return function(B){return R.apply(this,arguments)}}();wa._applySymbolToRenderer=function(R,B,W){W?R.symbol=B:R.defaultSymbol=B};wa._fetchSymbol=function(){var R=n._asyncToGenerator(function*(B,W){if(!B)throw Error();if("web-style"===B.type){const u=this._webStyleSymbolCache;try{const C=yield"2d"===this.view.type?B.fetchCIMSymbol({cache:u}):B.fetchSymbol({cache:u});
return this._getAppliedCloneSymbol(C,W)}catch{throw za.warn("Fetching web-style failed!"),Error();}}return this._getAppliedCloneSymbol(B,W)});return function(B,W){return R.apply(this,arguments)}}();wa._getAppliedCloneSymbol=function(R,B){if(!R||!B)return R;R=R.clone();const W=B&&B.toRgba();R.type.includes("3d")?this._applyColorTo3dSymbol(R,W):"cim"===R.type?q.applyCIMSymbolColor(R,B):R.color&&(R.color=new A(W||R.color));return R};wa._applyColorTo3dSymbol=function(R,B){B&&R.symbolLayers.forEach(W=>
{W&&(W.material||(W.material={}),W.material.color=new A(B))})};wa._getVisualVariableLegendElements=function(){var R=n._asyncToGenerator(function*(B,W){var u=this;if(!("visualVariables"in B&&B.visualVariables)||"vector-field"===B.type)return null;var C=B.visualVariables,K=[];const U=[],Y=[];for(const ja of C)"color"===ja.type?K.push(ja):"size"===ja.type?U.push(ja):"opacity"===ja.type&&Y.push(ja);C=[...K,...U,...Y];let ba;if(0===K.length&&va(B)&&B.classBreakInfos&&1===B.classBreakInfos.length)var ha=
(ha=B.classBreakInfos[0])&&ha.symbol;0===K.length&&ia(B)&&(ha=B.symbol);ha&&(ha.type.includes("3d")?(K=ha.symbolLayers.getItemAt(0),"water"===K.type?e.isSome(K.color)&&(ba=K.color):e.isSome(K.material)&&e.isSome(K.material.color)&&(ba=K.material.color)):ha.url||(ba=ha.color));const na=this.effectList;return(yield Promise.all(C.map(function(){var ja=n._asyncToGenerator(function*(ma){if(!ma.legendOptions||!1!==ma.legendOptions.showLegend){const ta="flow"===B.type?ma.field:u._getRampTitle(ma,W);let xa=
null;var qa="getField"in W&&W.getField&&W.getField(ma.field);qa=qa&&O.isDateField(qa);"color"===ma.type?(ma=yield M.getRampStops(ma,null,qa),xa={type:"color-ramp",title:ta,infos:ma,preview:P.renderColorRampPreviewHTML(ma.map(ua=>ua.color),{effectList:na})},u._hasColorRamp||(u._hasColorRamp=!(null==xa.infos||!xa.infos.length))):"size"===ma.type&&"outline"!==ma.target?Ja.test(ma.valueExpression)?u._hasClusterSizeVariable||(u._scaleDrivenSizeVariable=ma):(xa=yield u._getSizeLegendElement(ta,ma,B,qa),
u._hasSizeRamp||(u._hasSizeRamp=!(null==xa.infos||!xa.infos.length))):"opacity"===ma.type&&(ma=yield M.getRampStops(ma,ba,qa),xa={type:"opacity-ramp",title:ta,infos:ma,preview:P.renderColorRampPreviewHTML(ma.map(ua=>ua.color),{effectList:na})},u._hasOpacityRamp||(u._hasOpacityRamp=!(null==xa.infos||!xa.infos.length)));return xa&&xa.infos?xa:null}});return function(ma){return ja.apply(this,arguments)}}()))).filter(ja=>!!ja)});return function(B,W){return R.apply(this,arguments)}}();wa._getDomainName=
function(R,B,W){return R&&"function"!==typeof R?(W=(R="getField"in W&&W.getField&&W.getField(R))&&"getFieldDomain"in W&&W.getFieldDomain?W.getFieldDomain(R.name):null)&&"coded-value"===W.type?W.getName(B):null:null};wa._getClusterTitle=function(R){var B=this.layer;R=R.field;if("featureReduction"in B&&B.featureReduction&&"cluster"===B.featureReduction.type&&(B=B.featureReduction,B=(B="popupTemplate"in B&&B.popupTemplate)&&B.fieldInfos))for(const W of B)if(W.fieldName===R)return"cluster_count"===R?
W.label||{showCount:!0}:W.label;return{showCount:!0}};wa._getRampTitle=function(R,B){let W=R.field,u=R.normalizationField,C=!1,K=!1,U=!1;var Y=null;W="function"===typeof W?null:W;u="function"===typeof u?null:u;Y=R.legendOptions&&R.legendOptions.title;if(null==Y)if(R.valueExpressionTitle)Y=R.valueExpressionTitle;else{if("renderer"in B&&B.renderer&&"authoringInfo"in B.renderer&&B.renderer.authoringInfo&&B.renderer.authoringInfo.visualVariables)for(R=B.renderer.authoringInfo.visualVariables,Y=0;Y<R.length;Y++){const ba=
R[Y];if("color"===ba.type){if("ratio"===ba.style){C=!0;break}if("percent"===ba.style){K=!0;break}if("percent-of-total"===ba.style){U=!0;break}}}Y={field:W&&this._getFieldAlias(W,B),normField:u&&this._getFieldAlias(u,B),ratio:C,ratioPercent:K,ratioPercentTotal:U}}return Y};wa._getRendererTitle=function(R,B){if(R.legendOptions&&R.legendOptions.title)return R.legendOptions.title;if(R.valueExpressionTitle)return R.valueExpressionTitle;let W=R.field,u=null,C=null;va(R)&&(u=R.normalizationField,C="percent-of-total"===
R.normalizationType);W="function"===typeof W?null:W;u="function"===typeof u?null:u;R=null;if(W||u)R={field:W&&this._getFieldAlias(W,B),normField:u&&this._getFieldAlias(u,B),normByPct:C};return R};wa._getFieldAlias=function(R,B){var W="popupTemplate"in B&&B.popupTemplate;W=W&&W.fieldInfos;let u=null;W&&W.some(K=>R===K.fieldName?(u=K,!0):!1);W=null;"getField"in B&&B.getField?W=B.getField(R):"fieldsIndex"in B&&B.fieldsIndex&&(W=B.fieldsIndex.get(R));B=u||W;let C=null;B&&(C=u&&u.label||W&&W.alias||"name"in
B&&B.name||"fieldName"in B&&B.fieldName);return C};wa._isUnclassedRenderer=function(R){const B=R.visualVariables;let W=!1;va(R)&&R.classBreakInfos&&1===R.classBreakInfos.length&&B&&(W=R.field?B.some(u=>!(!u||R.field!==u.field||(R.normalizationField||u.normalizationField)&&R.normalizationField!==u.normalizationField)):!!B.length);return W};n._createClass(Ua,[{key:"effectList",get:function(){const R=this.layer;let B=null;"effect"in R&&R.effect&&(B=new a.EffectView,B.effect=R.effect,B.end(),B.scale=
this.scale);return B}},{key:"opacity",get:function(){var R;const B=this.layer.opacity,W=null==(R=this.parent)?void 0:R.opacity;R=(R=this.layer.parent)&&"uid"in R?this._getParentLayerOpacity(R):null;return null!=W?W*B:null!=R?R*B:B}},{key:"ready",get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length}},{key:"scale",get:function(){return this.view&&this.view.scale}},{key:"isScaleDriven",get:function(){const R=this.layer;if(null===R)return!1;
if("effect"in R&&R.effect&&Array.isArray(R.effect))return!0;if("featureReduction"in R&&R.featureReduction){if("cluster"===R.featureReduction.type)return!0;if("binning"===R.featureReduction.type&&"renderer"in R.featureReduction&&R.featureReduction.renderer)return this._isRendererScaleDriven(R.featureReduction.renderer)}return"renderer"in R&&R.renderer?this._isRendererScaleDriven(R.renderer):this._isLayerScaleDriven(this.layer)}},{key:"version",get:function(){return this._get("version")+1}}]);return Ua}(v);
l.__decorate([Q.property()],y.prototype,"children",void 0);l.__decorate([Q.property({readOnly:!0})],y.prototype,"effectList",null);l.__decorate([Q.property()],y.prototype,"layerView",void 0);l.__decorate([Q.property()],y.prototype,"layer",void 0);l.__decorate([Q.property()],y.prototype,"legendElements",void 0);l.__decorate([Q.property({readOnly:!0})],y.prototype,"opacity",null);l.__decorate([Q.property()],y.prototype,"parent",void 0);l.__decorate([Q.property({readOnly:!0,dependsOn:[]})],y.prototype,
"ready",null);l.__decorate([Q.property()],y.prototype,"hideLayersNotInCurrentView",void 0);l.__decorate([Q.property()],y.prototype,"keepCacheOnDestroy",void 0);l.__decorate([Q.property()],y.prototype,"respectLayerVisibility",void 0);l.__decorate([Q.property({readOnly:!0})],y.prototype,"scale",null);l.__decorate([Q.property()],y.prototype,"sublayerIds",void 0);l.__decorate([Q.property({readOnly:!0})],y.prototype,"isScaleDriven",null);l.__decorate([Q.property()],y.prototype,"title",void 0);l.__decorate([Q.property({readOnly:!0,
dependsOn:["ready"],value:0})],y.prototype,"version",null);l.__decorate([Q.property()],y.prototype,"view",void 0);return y=l.__decorate([w.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],y)})},"esri/layers/effects/EffectView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./parser ./utils".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b){function e(d){d=f.parse(d)||[];var H=(H=d[0])?"type"in H:!1;return H?[{scale:-1,effects:d}]:d}function g(d,H,Q){var G,I,k,w;return null!=(G=d[0])&&G.effects&&null!=(I=H[0])&&I.effects?(-1===(null==(k=d[0])?void 0:k.scale)||-1===(null==(w=H[0])?void 0:w.scale))&&(1<d.length||1<H.length)&&0>=Q?!1:b.canInterpolateEffects(d[0].effects,H[0].effects):!0}function t(d,H,Q){var G,I;const k=d.length>H.length?d:H;d=d.length>H.length?H:d;const w=d[d.length-1];H=null!=(G=null==
w?void 0:w.scale)?G:Q;G=null!=(I=null==w?void 0:w.effects)?I:[];for(I=d.length;I<k.length;I++)d.push({scale:H,effects:[...G]});for(I=0;I<k.length;I++)d[I].scale=-1===d[I].scale?Q:d[I].scale,k[I].scale=-1===k[I].scale?Q:k[I].scale,b.normalizeEffects(d[I].effects,k[I].effects)}N.EffectView=function(d){function H(G){G=d.call(this,G)||this;G._from=null;G._to=null;G._final=null;G._current=[];G._time=0;G.duration=m("mapview-transitions-duration");G.effects=[];return G}n._inheritsLoose(H,d);var Q=H.prototype;
Q.canTransitionTo=function(G){try{return 0<this.scale&&g(this._current,e(G),this.scale)}catch{return!1}};Q.transitionStep=function(G,I){this._applyTimeTransition(G);this._updateForScale(I)};Q.end=function(){this._applyTimeTransition(this.duration)};Q._transitionTo=function(G){0<this.scale&&g(this._current,G,this.scale)?(this._final=G,this._to=D.clone(G),t(this._current,this._to,this.scale),this._from=D.clone(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=G);this._set("effects",
this._current[0]?D.clone(this._current[0].effects):[])};Q._applyTimeTransition=function(G){if(this._to&&this._from&&this._current&&this._final){this._time+=G;G=Math.min(1,this._time/this.duration);for(let k=0;k<this._current.length;k++){const w=this._current[k],r=this._from[k],a=this._to[k];var I=r.scale;w.scale=I+(a.scale-I)*G;for(I=0;I<w.effects.length;I++)w.effects[I].interpolate(r.effects[I],a.effects[I],G)}1===G&&(this._current=this._final,this._set("effects",this._current[0]?D.clone(this._current[0].effects):
[]),this._from=this._to=this._final=null)}};Q._updateForScale=function(G){this._set("scale",G);if(0!==this._current.length){var I=this._current,k=this._current.length-1,w,r=1;if(1===I.length||G>=I[0].scale)var a=w=I[0].effects;else if(G<=I[k].scale)a=w=I[k].effects;else for(let c=0;c<k;c++){const x=I[c],O=I[c+1];if(x.scale>=G&&O.scale<=G){r=(G-x.scale)/(O.scale-x.scale);w=x.effects;a=O.effects;break}}for(G=0;G<this.effects.length;G++)this.effects[G].interpolate(w[G],a[G],r)}};n._createClass(H,[{key:"effect",
set:function(G){const I=this._get("effect");G=G||"";if(I!==G){this._set("effect",G);try{this._transitionTo(e(G))}catch(k){this._transitionTo([]),y.getLogger(this.declaredClass).warn("Invalid Effect",{effect:G,error:k})}}}},{key:"hasEffects",get:function(){return this.transitioning||!!this.effects.length}},{key:"scale",set:function(G){this._updateForScale(G)}},{key:"transitioning",get:function(){return null!==this._to}}]);return H}(A);l.__decorate([v.property()],N.EffectView.prototype,"_to",void 0);
l.__decorate([v.property()],N.EffectView.prototype,"duration",void 0);l.__decorate([v.property({value:""})],N.EffectView.prototype,"effect",null);l.__decorate([v.property({readOnly:!0})],N.EffectView.prototype,"effects",void 0);l.__decorate([v.property({readOnly:!0})],N.EffectView.prototype,"hasEffects",null);l.__decorate([v.property({value:0})],N.EffectView.prototype,"scale",null);l.__decorate([v.property({readOnly:!0})],N.EffectView.prototype,"transitioning",null);N.EffectView=l.__decorate([J.subclass("esri.layers.effects.EffectView")],
N.EffectView);N.canInterpolateEffectStops=g;N.convertEffectToStops=e;N.normalizeEffectStops=t;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/ExportImageParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/sql ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ./floorFilterUtils ./sublayerUtils".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t){const d={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};N.ExportImageParameters=function(H){function Q(I){I=H.call(this,I)||this;I.floors=null;I.scale=0;return I}n._inheritsLoose(Q,H);var G=Q.prototype;G.destroy=function(){this.layer=null};G.toJSON=
function(){var I=this.layer;I={dpi:I.dpi,format:I.imageFormat,transparent:I.imageTransparency,gdbVersion:I.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?I.dynamicLayers=this.dynamicLayers:I={...I,layers:this.layers,layerDefs:this.layerDefs};return I};n._createClass(Q,[{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;const I=this.visibleSublayers.map(k=>{const w=g.getLayerFloorFilterClause(this.floors,k);return k.toExportImageJSON(w)});return I.length?JSON.stringify(I):
null}},{key:"hasDynamicLayers",get:function(){return this.layer&&t.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}},{key:"layer",set:function(I){this._get("layer")!==I&&(this._set("layer",I),this.handles.remove("layer"),I&&this.handles.add([I.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),I.on("sublayer-update",k=>this.notifyChange(d[k.propertyName]))],"layer"))}},{key:"layers",get:function(){const I=this.visibleSublayers;return I?I.length?
"show:"+I.map(k=>k.id).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var I;const k=!(null==(I=this.floors)||!I.length);I=this.visibleSublayers.filter(w=>null!=w.definitionExpression||k&&null!=w.floorInfo);return I.length?JSON.stringify(I.reduce((w,r)=>{var a=g.getLayerFloorFilterClause(this.floors,r);a=y.sqlAnd(a,r.definitionExpression);D.isSome(a)&&(w[r.id]=a);return w},{})):null}},{key:"version",get:function(){this.commitProperty("layers");this.commitProperty("layerDefs");this.commitProperty("dynamicLayers");
this.commitProperty("timeExtent");const I=this.layer;I&&(I.commitProperty("dpi"),I.commitProperty("imageFormat"),I.commitProperty("imageTransparency"),I.commitProperty("gdbVersion"));return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const I=[];if(!this.layer)return I;var k=this.layer.sublayers;const w=r=>{const a=this.scale,c=0===r.minScale||a<=r.minScale,x=0===r.maxScale||a>=r.maxScale;r.visible&&(0===a||c&&x)&&(r.sublayers?r.sublayers.forEach(w):I.unshift(r))};k&&k.forEach(w);
k=this._get("visibleSublayers");return!k||k.length!==I.length||k.some((r,a)=>I[a]!==r)?I:k}}]);return Q}(m.HandleOwnerMixin(A));l.__decorate([v.property({readOnly:!0})],N.ExportImageParameters.prototype,"dynamicLayers",null);l.__decorate([v.property()],N.ExportImageParameters.prototype,"floors",void 0);l.__decorate([v.property({readOnly:!0})],N.ExportImageParameters.prototype,"hasDynamicLayers",null);l.__decorate([v.property()],N.ExportImageParameters.prototype,"layer",null);l.__decorate([v.property({readOnly:!0})],
N.ExportImageParameters.prototype,"layers",null);l.__decorate([v.property({readOnly:!0})],N.ExportImageParameters.prototype,"layerDefs",null);l.__decorate([v.property({type:Number})],N.ExportImageParameters.prototype,"scale",void 0);l.__decorate([v.property(e.combinedViewLayerTimeExtentProperty)],N.ExportImageParameters.prototype,"timeExtent",void 0);l.__decorate([v.property({readOnly:!0})],N.ExportImageParameters.prototype,"version",null);l.__decorate([v.property({readOnly:!0})],N.ExportImageParameters.prototype,
"visibleSublayers",null);N.ExportImageParameters=l.__decorate([b.subclass("esri.layers.mixins.ExportImageParameters")],N.ExportImageParameters);Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/floorFilterUtils":function(){define(["exports"],function(N){function n(l,A){if(null==l||!l.length)return null;l=l.filter(m=>""!==m).map(m=>`'${m}'`);l.push("''");return`${A} IN (${l.join(",")}) OR ${A} IS NULL`}N.getFloorFilterClause=function(l){var A;
const m=l.layer;return"floorInfo"in m&&null!=(A=m.floorInfo)&&A.floorField&&"floors"in l.view?n(l.view.floors,m.floorInfo.floorField):null};N.getLayerFloorFilterClause=function(l,A){var m;return"floorInfo"in A&&null!=(m=A.floorInfo)&&m.floorField?n(l,A.floorInfo.floorField):null};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/maybe","../../core/accessorSupport/PropertyOrigin"],
function(N,n,l){function A(m,D){if(!m||!m.length||n.isNone(D))return!0;D=D.slice().reverse().flatten(({sublayers:L})=>L&&L.toArray().reverse()).map(L=>L.id).toArray();if(m.length>D.length)return!1;let y=0;const v=D.length;for(const {id:L}of m){for(;y<v&&D[y]!==L;)y++;if(y>=v)return!1}return!0}N.isExportDynamic=function(m,D,y){return m.some(v=>{const L=v.source;return!(!L||"map-layer"===L.type&&L.mapLayerId===v.id&&(n.isNone(L.gdbVersion)||L.gdbVersion===y))||v.originIdOf("renderer")>l.OriginId.SERVICE||
v.originIdOf("labelingInfo")>l.OriginId.SERVICE||v.originIdOf("opacity")>l.OriginId.SERVICE||v.originIdOf("labelsVisible")>l.OriginId.SERVICE})?!0:!A(m,D)};N.isSublayerOverhaul=function(m){return!!m&&m.some(D=>null!=D.minScale||D.layerDefinition&&null!=D.layerDefinition.minScale)};N.shouldWriteSublayerStructure=function(m,D,y){return D.flatten(({sublayers:v})=>v).length!==m.length||m.some(v=>v.originIdOf("minScale")>y||v.originIdOf("maxScale")>y||v.originIdOf("renderer")>y||v.originIdOf("labelingInfo")>
y||v.originIdOf("opacity")>y||v.originIdOf("labelsVisible")>y||v.originIdOf("source")>y)?!0:!A(m,D)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/rendererConversion":function(){define(["exports","../../core/has","../../core/Error","../../core/maybe","../../symbols/support/symbolConversion"],function(N,n,l,A,m){function D(J){return A.isNone(J)||"simple"===J.type||"unique-value"===J.type||"class-breaks"===J.type||"dictionary"===
J.type||"heatmap"===J.type}function y(J,f){if(!f)return null;f=Array.isArray(f)?f:[f];if(0<f.length){const b=f.map(g=>g.details.symbol.type||g.details.symbol.declaredClass).filter(g=>!!g);b.sort();const e=[];b.forEach((g,t)=>{0!==t&&g===b[t-1]||e.push(g)});return new l("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${e.join(", ")}) which are not supported in 3D`,{renderer:J,symbolErrors:f})}return null}function v(J){const f=J.uniqueValueInfos.map(e=>m.to3D(e.symbol).error).filter(e=>
!!e),b=m.to3D(J.defaultSymbol);b.error&&f.unshift(b.error);return y(J,f)}function L(J){const f=J.classBreakInfos.map(e=>m.to3D(e.symbol).error).filter(e=>!!e),b=m.to3D(J.defaultSymbol);b.error&&f.unshift(b.error);return y(J,f)}N.isSupportedRenderer3D=D;N.validateTo3D=function(J){if(A.isNone(J))return null;if(!D(J))return new l("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${J.type||J.declaredClass}'`,{renderer:J});switch(J.type){case "simple":return y(J,m.to3D(J.symbol).error);
case "unique-value":return v(J);case "class-breaks":return L(J)}return null};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(N,n,l){function A(b){b=l.toCIMSymbolJSON(b);if("CIMTextSymbol"===b.type)return b.height;let e=0;if(b.symbolLayers)for(const g of b.symbolLayers)l.isCIMMarker(g)&&g.size>e?e=g.size:l.isCIMStroke(g)&&g.width>e?e=g.width:l.isCIMFill(g);
return e}function m(b,e,g,t){if("CIMTextSymbol"===b.type)b.height*=e;else{if(g&&b.effects)for(const d of b.effects)v(d,e);if(b.symbolLayers)for(const d of b.symbolLayers)switch(d.type){case "CIMPictureMarker":case "CIMVectorMarker":D(d,e,t);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=t&&t.preserveOutlineWidth||!d.width||(d.width*=e);break;case "CIMPictureFill":d.height&&(d.height*=e);d.offsetX&&(d.offsetX*=e);d.offsetY&&(d.offsetY*=e);break;case "CIMHatchFill":m(d.lineSymbol,e,!0,{...t,
preserveOutlineWidth:!1}),d.offsetX&&(d.offsetX*=e),d.offsetY&&(d.offsetY*=e),d.separation&&(d.separation*=e)}}}function D(b,e,g){b.markerPlacement&&y(b.markerPlacement,e);b.offsetX&&(b.offsetX*=e);b.offsetY&&(b.offsetY*=e);b.anchorPoint&&"Absolute"===b.anchorPointUnits&&(b.anchorPoint={x:b.anchorPoint.x*e,y:b.anchorPoint.y*e});b.size*=e;if("CIMVectorMarker"===b.type&&b.markerGraphics)for(const t of b.markerGraphics)b.scaleSymbolsProportionally||m(t.symbol,e,!0,g)}function y(b,e){l.isCIMMarkerStrokePlacement(b)&&
b.offset&&(b.offset*=e);switch(b.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":b.customEndingOffset&&(b.customEndingOffset*=e);b.offsetAlongLine&&(b.offsetAlongLine*=e);if(b.placementTemplate&&b.placementTemplate.length){var g=b.placementTemplate.map(t=>t*e);b.placementTemplate=g}break;case "CIMMarkerPlacementAlongLineVariableSize":b.maxRandomOffset&&(b.maxRandomOffset*=e);b.placementTemplate&&b.placementTemplate.length&&(g=b.placementTemplate.map(t=>
t*e),b.placementTemplate=g);break;case "CIMMarkerPlacementOnLine":b.startPointOffset&&(b.startPointOffset*=e);break;case "CIMMarkerPlacementAtExtremities":b.offsetAlongLine&&(b.offsetAlongLine*=e);break;case "CIMMarkerPlacementAtRatioPositions":b.beginPosition&&(b.beginPosition*=e);b.endPosition&&(b.endPosition*=e);break;case "CIMMarkerPlacementPolygonCenter":b.offsetX&&(b.offsetX*=e);b.offsetY&&(b.offsetY*=e);break;case "CIMMarkerPlacementInsidePolygon":b.offsetX&&(b.offsetX*=e),b.offsetY&&(b.offsetY*=
e),b.stepX&&(b.stepX*=e),b.stepY&&(b.stepY*=e)}}function v(b,e){switch(b.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":b.width&&(b.width*=e);break;case "CIMGeometricEffectBuffer":b.size&&(b.size*=e);break;case "CIMGeometricEffectCut":b.beginCut&&(b.beginCut*=e);b.endCut&&(b.endCut*=e);b.middleCut&&(b.middleCut*=e);break;case "CIMGeometricEffectDashes":b.customEndingOffset&&(b.customEndingOffset*=e);b.offsetAlongLine&&(b.offsetAlongLine*=e);if(b.dashTemplate&&b.dashTemplate.length){const g=
b.dashTemplate.map(t=>t*e);b.dashTemplate=g}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":b.length&&(b.length*=e);break;case "CIMGeometricEffectMove":b.offsetX&&(b.offsetX*=e);b.offsetY&&(b.offsetY*=e);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":b.offset&&(b.offset*=e);break;case "CIMGeometricEffectRegularPolygon":b.radius&&(b.radius*=e);break;case "CIMGeometricEffectTaperedPolygon":b.fromWidth&&(b.fromWidth*=
e);b.length&&(b.length*=e);b.toWidth&&(b.toWidth*=e);break;case "CIMGeometricEffectWave":b.amplitude&&(b.amplitude*=e),b.period&&(b.period*=e)}}function L(b,e){let g;g="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type;if(g.symbolLayers)for(const t of g.symbolLayers)if(!(t.colorLocked||b&&(l.isCIMStroke(t)||l.isCIMMarker(t)&&t.markerPlacement&&l.isCIMMarkerStrokePlacement(t.markerPlacement))))switch(t.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":t.tintColor&&
J(e,t.tintColor);break;case "CIMVectorMarker":t.markerGraphics.forEach(d=>{L(d.symbol,e)});break;case "CIMSolidStroke":case "CIMSolidFill":J(e,t.color);break;case "CIMHatchFill":L(t.lineSymbol,e)}}function J(b,e){for(const g of b)if(g.join(".")===e.join("."))return;b.push(e)}function f(b,e,g){var t="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===t.type?!0:!1;if(t.symbolLayers)for(const d of t.symbolLayers)if(!d.colorLocked){if(b)if(g){if({layersToColor:t}=g,(l.isCIMStroke(d)||l.isCIMMarker(d)&&
d.markerPlacement&&l.isCIMMarkerStrokePlacement(d.markerPlacement))&&"fill"===t||l.isCIMFill(d)&&"outline"===t)continue}else if(l.isCIMStroke(d)||l.isCIMMarker(d)&&d.markerPlacement&&l.isCIMMarkerStrokePlacement(d.markerPlacement))continue;t=e.toArray();switch(d.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":d.tintColor=t;break;case "CIMVectorMarker":d.markerGraphics.forEach(H=>{f(H.symbol,e,g)});break;case "CIMSolidStroke":case "CIMSolidFill":d.color=t;break;case "CIMHatchFill":f(d.lineSymbol,
e,g)}}}N.applyCIMSymbolColor=function(b,e,g){e instanceof n||(e=new n(e));(b=l.toCIMSymbolJSON(b))&&f(b,e,g)};N.applyCIMSymbolRotation=function(b,e,g=!1){b=l.toCIMSymbolJSON(b);g&&0!==e&&(e=360-e);if("CIMTextSymbol"===b.type)b.angle=e;else if("CIMPointSymbol"===b.type&&b.symbolLayers){g=e-(b.angle||0);for(const t of b.symbolLayers)if(l.isCIMMarker(t)){let d=t.rotation||0;d=t.rotateClockwise?d-g:d+g;t.rotation=d}b.angle=e}};N.getCIMSymbolColor=function(b){b=l.toCIMSymbolJSON(b);const e=[];L(b,e);return e.length?
new n(l.fromCIMColor(e[0])):null};N.getCIMSymbolRotation=function(b,e=!1){b=l.toCIMSymbolJSON(b);return"CIMTextSymbol"===b.type||"CIMPointSymbol"===b.type?e&&0!==b.angle?360-b.angle:b.angle||0:0};N.getCIMSymbolSize=A;N.scaleCIMMarker=D;N.scaleCIMSymbolTo=function(b,e,g){const t=l.toCIMSymbolJSON(b);b=A(b);if(0===b)if("CIMTextSymbol"===t.type)t.height=e;else{if(t.symbolLayers)for(const d of t.symbolLayers)switch(d.type){case "CIMPictureMarker":case "CIMVectorMarker":d.size=e;break;case "CIMPictureStroke":case "CIMSolidStroke":d.width=
e}}else m(t,e/b,!1,g)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(N,n){function l(A,m){"string"!==typeof A&&(A=String(A));switch(m){case "LowerCase":return A.toLowerCase();case "Allcaps":return A.toUpperCase();default:return A}}n._adjustTextCase=l;n.colorToArray=function(A){return[A.r,A.g,A.b,A.a]};n.createLabelOverrideFunction=function(A,m,D){const y=f=>{let b=f.length;for(;b--;)if(!" /-,\n".includes(f.charAt(b)))return!1;
return!0},v=[];var L=0;let J=-1;do J=m.indexOf("[",L),J>=L&&(J>L&&(L=m.substr(L,J-L),v.push([L,null,y(L)])),L=J+1,J=m.indexOf("]",L),J>=L&&(J>L&&(L=m.substr(L,J-L),(L=A[L])&&v.push([null,L,!1])),L=J+1));while(-1!==J);L<m.length-1&&(A=m.substr(L),v.push([A,null,y(A)]));return f=>{let b="",e=null;for(const g of v){const [t,d,H]=g;if(t)H?e=t:(e&&(b+=e,e=null),b+=t);else{const Q=f.attributes[d];Q&&(e&&(b+=e,e=null),b+=Q)}}return l(b,D)}};n.evaluateValueOrFunction=function(A,m,D,y){return"function"===
typeof A?A(m,D,y):A};n.fromCIMColor=function(A){return A?{r:A[0],g:A[1],b:A[2],a:A[3]/255}:{r:0,g:0,b:0,a:0}};n.getValue=A=>isNaN(A)||!A?0:A;n.importGeometryEngine=function(){return new Promise((A,m)=>N(["../../geometry/geometryEngineJSON"],A,m))};n.isCIMFill=function(A){return"CIMGradientFill"===A.type||"CIMHatchFill"===A.type||"CIMPictureFill"===A.type||"CIMSolidFill"===A.type||"CIMWaterFill"===A.type};n.isCIMMarker=function(A){return"CIMVectorMarker"===A.type||"CIMPictureMarker"===A.type||"CIMBarChartMarker"===
A.type||"CIMCharacterMarker"===A.type||"CIMPieChartMarker"===A.type||"CIMStackedBarChartMarker"===A.type};n.isCIMMarkerStrokePlacement=function(A){return"CIMMarkerPlacementAlongLineRandomSize"===A.type||"CIMMarkerPlacementAlongLineSameSize"===A.type||"CIMMarkerPlacementAlongLineVariableSize"===A.type||"CIMMarkerPlacementAtExtremities"===A.type||"CIMMarkerPlacementAtMeasuredUnits"===A.type||"CIMMarkerPlacementAtRatioPositions"===A.type||"CIMMarkerPlacementOnLine"===A.type||"CIMMarkerPlacementOnVertices"===
A.type};n.isCIMStroke=function(A){return"CIMGradientStroke"===A.type||"CIMPictureStroke"===A.type||"CIMSolidStroke"===A.type};n.isGeometryEngineRequired=A=>{if(!A)return!1;for(const m of A)switch(m.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};n.resampleHermite=function(A,m,D,y,v,L,J=!0){const f=m/v;D/=L;const b=Math.ceil(f/2),e=Math.ceil(D/2);for(let d=0;d<L;d++)for(let H=0;H<v;H++){const Q=4*(H+(J?L-d-1:d)*v);var g=0;let G=0,I=0,k=0,w=0,r=0,a=0;const c=
(d+.5)*D;for(let x=Math.floor(d*D);x<(d+1)*D;x++){var t=Math.abs(c-(x+.5))/e;const O=(H+.5)*f;t*=t;for(let E=Math.floor(H*f);E<(H+1)*f;E++){let h=Math.abs(O-(E+.5))/b;g=Math.sqrt(t+h*h);-1<=g&&1>=g&&(g=2*g*g*g-3*g*g+1,0<g&&(h=4*(E+x*m),a+=g*A[h+3],I+=g,255>A[h+3]&&(g=g*A[h+3]/250),k+=g*A[h],w+=g*A[h+1],r+=g*A[h+2],G+=g))}}y[Q]=k/G;y[Q+1]=w/G;y[Q+2]=r/G;y[Q+3]=a/I}};n.toCIMSymbolJSON=function(A){var m;return null==(m=A.data)?void 0:m.symbol};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(N,n){function l(A,m){return Math.round(Math.min(Math.max(A+191.25*m,0),255))}N.SymbolSizeDefaults=void 0;(function(A){A[A.size=22]="size";A[A.lineWidth=50]="lineWidth";A[A.maxSize=120]="maxSize";A[A.maxOutlineSize=80]="maxOutlineSize";A[A.tallSymbolWidth=20]="tallSymbolWidth"})(N.SymbolSizeDefaults||(N.SymbolSizeDefaults={}));N.adjustColorBrightness=function(A,m){if("type"in A&&("linear"===A.type||"pattern"===
A.type))return A;A=new n(A);return new n([l(A.r,m),l(A.g,m),l(A.b,m),A.a])};N.adjustColorComponentBrightness=l;N.getConeShapes=function(A,m){let D=m?N.SymbolSizeDefaults.tallSymbolWidth:A;m=m?4:6;D=D<=N.SymbolSizeDefaults.size?D-.5*m:D-m;m=.15*D;const y=D;A-=m;return[{type:"ellipse",cx:.5*D,cy:A,rx:.5*D,ry:m},{type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,A]},{command:"L",values:[0,A]},{command:"Z",values:[]}]}]};N.getCubeShapes=function(A,m){let D=m?N.SymbolSizeDefaults.tallSymbolWidth:
A;var y=m?4:6;y=D=D<=N.SymbolSizeDefaults.size?D-.5*y:D-y;m=m?.35*D:.5*D;return[{type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,.5*m]},{command:"L",values:[.5*y,m]},{command:"L",values:[0,.5*m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*m]},{command:"L",values:[.5*y,m]},{command:"L",values:[.5*y,A]},{command:"L",values:[0,A-.5*m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*y,m]},{command:"L",values:[.5*y,A]},{command:"L",
values:[y,A-.5*m]},{command:"L",values:[y,.5*m]},{command:"Z",values:[]}]}]};N.getCylinderShapes=function(A,m){var D=m?N.SymbolSizeDefaults.tallSymbolWidth:A;m=m?4:6;D=D<=N.SymbolSizeDefaults.size?D-.5*m:D-m;m=.5*D;const y=.15*D;A-=y;return[{type:"ellipse",cx:.5*D,cy:A,rx:m,ry:y},{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[0,A]},{command:"L",values:[D,A]},{command:"L",values:[D,y]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*D,cy:y,rx:m,ry:y}]};N.getDiamondShapes=function(A){var m=
A;m=m<N.SymbolSizeDefaults.size?m-2:m-4;const D=Math.floor(A/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*m,0]},{command:"L",values:[m,.5*A-D]},{command:"L",values:[.45*m-D,.5*A+D]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*m,0]},{command:"L",values:[.45*m-D,.5*A+D]},{command:"L",values:[0,.5*A-D]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*A-D]},{command:"L",values:[.45*m-D,.5*A+D]},{command:"L",values:[.45*m,A]},{command:"Z",
values:[]}]},{type:"path",path:[{command:"M",values:[.45*m,A]},{command:"L",values:[m,.5*A-D]},{command:"L",values:[.45*m-D,.5*A+D]},{command:"Z",values:[]}]}]};N.getExtrudeSymbolShapes=function(A){const m=N.SymbolSizeDefaults.size;A*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*m]},{command:"L",values:[.3*m,.7*m]},{command:"L",values:[.3*m,.7*m+A]},{command:"L",values:[0,.7*m+A-.35*m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*m,.7*m]},{command:"L",values:[.3*
m,.7*m+A]},{command:"L",values:[m,A]},{command:"L",values:[m,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*m,0]},{command:"L",values:[m,0]},{command:"L",values:[.3*m,.7*m]},{command:"L",values:[0,.35*m]},{command:"Z",values:[]}]}]};N.getInvertedConeShapes=function(A){let m=A;m=m<N.SymbolSizeDefaults.size?m-3:m-6;const D=.15*m,y=m;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,0]},{command:"L",values:[.5*y,A-D]},{command:"Z",values:[]}]},{type:"ellipse",
cx:.5*m,cy:0,rx:.5*m,ry:D}]};N.getPathSymbolShapes=function(A,m,D){var y=N.SymbolSizeDefaults.size;let v=y,L=y;1>A?v*=.75:1<A&&(L*=1.25);A=y;m&&D&&(v=L=A=y=0);return[{type:"path",path:[{command:"M",values:[A,0]},{command:"L",values:[D?A:.875*A,0]},{command:"L",values:[D?v-.5*A:0,L-.5*y]},{command:"L",values:[v-.5*A,L-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[A,0]},{command:"L",values:[A,m?0:.125*y]},{command:"L",values:[v-.5*A,m?L-.5*y:y]},{command:"L",values:[v-.5*
A,L-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[v-.5*A,L-.5*y]},{command:"L",values:[D?v-.5*A:0,L-.5*y]},{command:"L",values:[D?v-.5*A:0,m?L-.5*y:y]},{command:"L",values:[v-.5*A,m?L-.5*y:y]},{command:"Z",values:[]}]}]};N.getTetrahedronShapes=function(A){var m=A;m=m<N.SymbolSizeDefaults.size?m-1:m-2;return[{type:"path",path:[{command:"M",values:[.45*A,0]},{command:"L",values:[A,m]},{command:"L",values:[.45*A,.6*m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.45*A,0]},{command:"L",values:[.45*A,.6*m]},{command:"L",values:[0,m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,m]},{command:"L",values:[.45*A,.6*m]},{command:"L",values:[A,m]},{command:"Z",values:[]}]}]};N.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
N.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(N,n,l,A,m,D,y,v,L,J){function f(e,g,t){return e?l(e,{responseType:"image"}).then(d=>{d=d.data;const H=d.width,Q=d.height,G=H/Q;let I=g;t&&(I=Math.min(I,Math.max(H,Q)));return{image:d,width:1>=G?Math.ceil(I*G):I,height:1>=G?I:Math.ceil(I/G)}}):Promise.reject(new m("renderUtils: imageDataSize","href not provided."))}const b=v.createProjector();N.renderSymbol=function(e,g,t){const d=Math.ceil(g[0]);g=Math.ceil(g[1]);if(!e.some(Q=>!!Q.length))return null;const H=t&&t.node||document.createElement("div");
null!=t.opacity&&(H.style.opacity=t.opacity.toString());null!=t.effectView&&(H.style.filter=J.getCSSFilterFromEffectList(t.effectView));b.append(H,L.renderSVG.bind(null,e,d,g,t));return H};N.tintImageWithColor=function(e,g,t,d,H){return f(e,g,H).then(Q=>{const G=Q.width?Q.width:g,I=Q.height?Q.height:g;var k;if(k=Q.image)k=t&&"ignore"!==d?"multiply"===d&&255===t.r&&255===t.g&&255===t.b&&1===t.a?!1:!0:!1;if(k){var w=Q.image.width,r=Q.image.height;D("edge")&&/\.svg$/i.test(e)&&(--w,--r);k=Math.ceil(G);
var a=Math.ceil(I);var c=document.createElement("canvas");c.width=k;c.height=a;c.style.width=k+"px";c.style.height=a+"px";c=c.getContext("2d");c.clearRect(0,0,k,a);k=c;k.drawImage(Q.image,0,0,w,r,0,0,G,I);a=k.getImageData(0,0,G,I);c=[t.r/255,t.g/255,t.b/255,t.a];const O=A.toHSV(t);for(let E=0;E<a.data.length;E+=4){Q=a.data;w=E;r=c;var x=O;switch(d){case "multiply":Q[w+0]*=r[0];Q[w+1]*=r[1];Q[w+2]*=r[2];Q[w+3]*=r[3];break;default:{const h=A.toHSV({r:Q[w+0],g:Q[w+1],b:Q[w+2]});h.h=x.h;h.s=x.s;h.v=h.v/
100*x.v;x=A.toRGB(h);Q[w+0]=x.r;Q[w+1]=x.g;Q[w+2]=x.b;Q[w+3]*=r[3]}}}k.putImageData(a,0,0);e=k.canvas.toDataURL("image/png")}else(k=n.id&&n.id.findCredential(e))&&k.token&&(Q=e.includes("?")?"\x26":"?",e=`${e}${Q}token=${k.token}`);return{url:e,width:G,height:I}}).catch(()=>({url:e,width:g,height:g}))};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(N,n,l,A,m,D,y){function v(F,M){F*=P/180;return Math.abs(M*Math.sin(F))+Math.abs(M*Math.cos(F))}function L(F){return F.map(M=>`${M.command} ${M.values.join(" ")}`).join(" ").trim()}function J(F,M,V,aa){if(F){if("circle"===F.type)return y.tsx("circle",{fill:M,"fill-rule":"evenodd",stroke:V.color,"stroke-width":V.width,"stroke-linecap":V.cap,"stroke-linejoin":V.join,"stroke-dasharray":V.dashArray,"stroke-dashoffset":V.dashOffset,"stroke-miterlimit":"4",cx:F.cx,cy:F.cy,r:F.r});if("ellipse"===
F.type)return y.tsx("ellipse",{fill:M,"fill-rule":"evenodd",stroke:V.color,"stroke-width":V.width,"stroke-linecap":V.cap,"stroke-linejoin":V.join,"stroke-dasharray":V.dashArray,"stroke-miterlimit":"4",cx:F.cx,cy:F.cy,rx:F.rx,ry:F.ry});if("rect"===F.type)return y.tsx("rect",{fill:M,"fill-rule":"evenodd",stroke:V.color,"stroke-width":V.width,"stroke-linecap":V.cap,"stroke-linejoin":V.join,"stroke-dasharray":V.dashArray,"stroke-miterlimit":"4",x:F.x,y:F.y,width:F.width,height:F.height});if("image"===
F.type)return y.tsx("image",{href:F.src,x:F.x,y:F.y,width:F.width,height:F.height,preserveAspectRatio:"none"});if("path"===F.type)return F="string"!==typeof F.path?L(F.path):F.path,y.tsx("path",{fill:M,"fill-rule":"evenodd",stroke:V.color,"stroke-width":V.width,"stroke-linecap":V.cap,"stroke-linejoin":V.join,"stroke-dasharray":V.dashArray,"stroke-miterlimit":"4",d:F});if("text"===F.type)return y.tsx("text",{"alignment-baseline":aa.alignBaseline,fill:M,"fill-rule":"evenodd",stroke:V.color,"stroke-width":V.width,
"stroke-linecap":V.cap,"stroke-linejoin":V.join,"stroke-dasharray":V.dashArray,"stroke-miterlimit":"4","text-anchor":aa.align,"text-decoration":aa.decoration,kerning:aa.kerning,rotate:aa.rotate,"text-rendering":E,"font-style":aa.font.style,"font-variant":aa.font.variant,"font-weight":aa.font.weight,"font-size":aa.font.size,"font-family":aa.font.family,x:F.x,y:F.y},F.text)}return null}function f(F){const M={fill:"none",pattern:null,linearGradient:null};if(F)if("type"in F&&"pattern"===F.type){var V=
`patternId-${++x}`;M.fill=`url(#${V})`;M.pattern={id:V,x:F.x,y:F.y,width:F.width,height:F.height,image:{x:0,y:0,width:F.width,height:F.height,href:F.src}}}else"type"in F&&"linear"===F.type?(V=`linearGradientId-${++O}`,M.fill=`url(#${V})`,M.linearGradient={id:V,x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,stops:F.colors.map(aa=>({offset:aa.offset,color:aa.color&&(new n(aa.color)).toString()}))}):F&&(F=new n(F),M.fill=F.toString());return M}function b(F){const M={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",
dashOffset:"0"};if(F&&(null!=F.width&&(M.width=F.width),F.cap&&(M.cap=F.cap),F.join&&(M.join=F.join.toString()),F.color&&(M.color=(new n(F.color)).toString()),F.dashArray&&(M.dashArray=F.dashArray),F.dashArray&&(M.dashOffset=F.dashoffset),F.style)){let aa=null;F.style in S&&(aa=S[F.style]);if(Array.isArray(aa)){aa=aa.slice(0);for(var V=0;V<aa.length;++V)aa[V]*=F.width;if("butt"!==F.cap){for(V=0;V<aa.length;V+=2)aa[V]-=F.width,1>aa[V]&&(aa[V]=1);for(V=1;V<aa.length;V+=2)aa[V]+=F.width}aa=aa.join(",")}M.dashArray=
aa}return M}function e(F,M){const V={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};F&&(V.align=F.align,V.alignBaseline=F.alignBaseline,V.decoration=F.decoration,V.kerning=F.kerning?"auto":"0",V.rotate=F.rotated?"90":"0",V.font.style=M.style||"normal",V.font.variant=M.variant||"normal",V.font.weight=M.weight||"normal",V.font.size=M.size&&M.size.toString()||"10pt",V.font.family=M.family||"serif");return V}function g(F){const {pattern:M,
linearGradient:V}=F;return M?y.tsx("pattern",{id:M.id,patternUnits:"userSpaceOnUse",x:M.x,y:M.y,width:M.width,height:M.height},y.tsx("image",{x:M.image.x,y:M.image.y,width:M.image.width,height:M.image.height,href:M.image.href})):V?(F=V.stops.map((aa,ka)=>y.tsx("stop",{key:`${ka}-stop`,offset:aa.offset,"stop-color":aa.color})),y.tsx("linearGradient",{id:V.id,gradientUnits:"userSpaceOnUse",x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2},F)):null}function t(F,M){if(!F)return null;const V=[];for(const aa of F){const {shape:ka,
fill:la,stroke:X,font:Z}=aa;F=f(la);const da=b(X),ia="text"===ka.type?e(ka,Z):null;V.push(J(ka,F.fill,da,ia))}return y.tsx("mask",{id:M,maskUnits:"userSpaceOnUse"},y.tsx("g",null,V))}function d(F,M,V){return m.translate(F,m.identity(F),[M,V])}function H(F,M,V,aa,ka){m.scale(F,m.identity(F),[M,V]);F[4]=F[4]*M-aa*M+aa;F[5]=F[5]*V-ka*V+ka;return F}function Q(F,M,V,aa){var ka=M%360*Math.PI/180;m.rotate(F,m.identity(F),ka);M=Math.cos(ka);ka=Math.sin(ka);const la=F[4],X=F[5];F[4]=la*M-X*ka+aa*ka-V*M+V;
F[5]=X*M+la*ka-V*ka-aa*M+aa;return F}function G(F,M){q&&"left"in q?(q.left>F&&(q.left=F),q.right<F&&(q.right=F),q.top>M&&(q.top=M),q.bottom<M&&(q.bottom=M)):q={left:F,bottom:M,right:F,top:M}}function I(F){const M=F.args,V=M.length;switch(F.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(F=0;F<V;F+=2)G(M[F],M[F+1]);p.x=M[V-2];p.y=M[V-1];break;case "H":for(F=0;F<V;++F)G(M[F],p.y);p.x=M[V-1];break;case "V":for(F=0;F<V;++F)G(p.x,M[F]);p.y=M[V-1];break;case "m":F=0;"x"in p||(G(p.x=M[0],
p.y=M[1]),F=2);for(;F<V;F+=2)G(p.x+=M[F],p.y+=M[F+1]);break;case "l":case "t":for(F=0;F<V;F+=2)G(p.x+=M[F],p.y+=M[F+1]);break;case "h":for(F=0;F<V;++F)G(p.x+=M[F],p.y);break;case "v":for(F=0;F<V;++F)G(p.x,p.y+=M[F]);break;case "c":for(F=0;F<V;F+=6)G(p.x+M[F],p.y+M[F+1]),G(p.x+M[F+2],p.y+M[F+3]),G(p.x+=M[F+4],p.y+=M[F+5]);break;case "s":case "q":for(F=0;F<V;F+=4)G(p.x+M[F],p.y+M[F+1]),G(p.x+=M[F+2],p.y+=M[F+3]);break;case "A":for(F=0;F<V;F+=7)G(M[F+5],M[F+6]);p.x=M[V-2];p.y=M[V-1];break;case "a":for(F=
0;F<V;F+=7)G(p.x+=M[F+5],p.y+=M[F+6])}}function k(F,M,V){const aa=h[F.toLowerCase()];"number"===typeof aa&&(aa?M.length>=aa&&(F={action:F,args:M.slice(0,M.length-M.length%aa)},V.push(F),I(F)):(F={action:F,args:[]},V.push(F),I(F)))}function w(F){const M={x:0,y:0,width:0,height:0};if("circle"===F.type)M.x=F.cx-F.r,M.y=F.cy-F.r,M.width=2*F.r,M.height=2*F.r;else if("ellipse"===F.type)M.x=F.cx-F.rx,M.y=F.cy-F.ry,M.width=2*F.rx,M.height=2*F.ry;else if("image"===F.type||"rect"===F.type)M.x=F.x,M.y=F.y,M.width=
F.width,M.height=F.height;else if("path"===F.type){{const ka=("string"!==typeof F.path?L(F.path):F.path).match(z),la=[];q={};p={};if(ka){F="";var V=[],aa=ka.length;for(let X=0;X<aa;++X){const Z=ka[X],da=parseFloat(Z);isNaN(da)?(F&&k(F,V,la),V=[],F=Z):V.push(da)}k(F,V,la);F={x:0,y:0,width:0,height:0};q&&"left"in q&&(F.x=q.left,F.y=q.top,F.width=q.right-q.left,F.height=q.bottom-q.top)}else F=null}M.x=F.x;M.y=F.y;M.width=F.width;M.height=F.height}return M}function r(F){const M={x:0,y:0,width:0,height:0};
let V=null,aa=Number.NEGATIVE_INFINITY,ka=Number.NEGATIVE_INFINITY;for(const la of F)V?(V.x=Math.min(V.x,la.x),V.y=Math.min(V.y,la.y),aa=Math.max(aa,la.x+la.width),ka=Math.max(ka,la.y+la.height)):(V=M,V.x=la.x,V.y=la.y,aa=la.x+la.width,ka=la.y+la.height);V&&(V.width=aa-V.x,V.height=ka-V.y);return V}function a(F,M,V,aa,ka,la,X,Z,da){var ia=(X&&la?v(la,M):M)/2,va=(X&&la?v(la,V):V)/2;da&&(ia=da[0],va=da[1],ia=(X&&la?v(la,ia):ia)/2,va=(X&&la?v(la,va):va)/2);const ya=F.width+aa,Ba=F.height+aa;X=A.create();
da=A.create();var ca=!1;if(ka&&0!==ya&&0!==Ba){ka=M!==V?M/V:ya/Ba;ca=M>V?M:V;let fa=1,ea=1;isNaN(ca)||(1<ka?(fa=ca/ya,ea=ca/ka/Ba):(ea=ca/Ba,fa=ca*ka/ya));m.multiply(da,da,H(X,fa,ea,ia,va));ca=!0}ka=F.x+(ya-aa)/2;F=F.y+(Ba-aa)/2;m.multiply(da,da,d(X,ia-ka,va-F));!ca&&(ya>M||Ba>V)&&(aa=ya/M>Ba/V,M=(aa?M:V)/(aa?ya:Ba),m.multiply(da,da,H(X,M,M,ka,F)));la&&m.multiply(da,da,Q(X,la,ka,F));Z&&m.multiply(da,da,d(X,Z[0],Z[1]));return`matrix(${da[0]},${da[1]},${da[2]},${da[3]},${da[4]},${da[5]})`}function c(F,
M,V){F=null==F?void 0:F.effects.find(Z=>"bloom"===Z.type);if(!F)return null;const {strength:aa,radius:ka}=F;F=0<aa?ka:0;const la=(aa+F)*M,X=4*aa+1;return y.tsx("filter",{id:`bloom${V}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},y.tsx("feMorphology",{operator:"dilate",radius:(aa+.5*F)*5**(M/100)*(.4+M/100),in:"SourceGraphic",result:"dilate"}),y.tsx("feGaussianBlur",{in:"dilate",stdDeviation:la/25,result:"blur"}),y.tsx("feGaussianBlur",{in:"blur",stdDeviation:la/50,
result:"intensityBlur"}),y.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},y.tsx("feFuncR",{type:"linear",slope:X}),y.tsx("feFuncG",{type:"linear",slope:X}),y.tsx("feFuncB",{type:"linear",slope:X})),y.tsx("feMerge",null,y.tsx("feMergeNode",{in:"intensityBlur"}),y.tsx("feMergeNode",{in:"intensityBrightness"}),y.tsx("feGaussianBlur",{stdDeviation:aa/10})))}let x=0,O=0;D=l("android");const E=l("chrome")||D&&4<=D?"auto":"optimizeLegibility",h={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,
a:7,z:0},z=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let q={},p={};const S={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},P=Math.PI;let T=1;N.computeBBox=r;N.generateFillAttributes=f;N.generateStrokeAttributes=b;N.generateTextAttributes=e;N.getBoundingBox=w;N.getTransformMatrix=a;N.renderDef=g;N.renderSVG=function(F,M,V,aa={}){const ka=
[],la=[],X=++T,Z=c(aa.effectView,M,X);var da=null;if(Z){var ia;da=null==(ia=aa.effectView)?void 0:ia.effects.find(ca=>"bloom"===ca.type);da=(da.strength?da.strength+da.radius/2:0)/3;da=[Math.max(M+M*da,10),Math.max(V+V*da,10)]}for(ia=0;ia<F.length;ia++){var va=F[ia];const ca=[];var ya=[],Ba=0;let fa=0,ea=0;for(const pa of va){const {shape:oa,fill:ra,stroke:Aa,font:Ca,offset:za}=pa;aa.ignoreStrokeWidth||(Ba+=Aa&&Aa.width||0);va=f(ra);const Ja=b(Aa),La="text"===oa.type?e(oa,Ca):null;ka.push(g(va));
ca.push(J(oa,va.fill,Ja,La));ya.push(w(oa));za&&(fa+=za[0],ea+=za[1])}ya=a(r(ya),M,V,Ba,aa.scale,aa.rotation,aa.useRotationSize,[fa,ea],da);Ba=null;aa.masking&&(Ba=`mask-${ia}`,ka.push(t(aa.masking[ia],Ba)),Ba=`url(#${Ba})`);la.push(Ba?y.tsx("g",{mask:Ba},y.tsx("g",{transform:ya},ca)):y.tsx("g",{transform:ya},ca))}aa.useRotationSize&&aa.rotation&&(M=v(aa.rotation,M),V=v(aa.rotation,V));Z&&(M=da[0],V=da[1]);return y.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:M,height:V,style:"display: block;"},
Z,y.tsx("defs",null,ka),Z?y.tsx("g",{filter:`url(#bloom${X})`},la):la)};N.renderShape=J;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(N){function n(){const L=new Float32Array(6);L[0]=1;L[3]=1;return L}function l(L){const J=new Float32Array(6);J[0]=L[0];J[1]=L[1];J[2]=L[2];J[3]=L[3];J[4]=L[4];J[5]=L[5];return J}function A(L,J,f,b,e,g){const t=new Float32Array(6);t[0]=L;t[1]=J;t[2]=f;t[3]=b;t[4]=
e;t[5]=g;return t}function m(L,J){return new Float32Array(L,J,6)}function D(L,J,f,b){const e=J[b];J=J[b+1];L[b]=f[0]*e+f[2]*J+f[4];L[b+1]=f[1]*e+f[3]*J+f[5]}function y(L,J,f,b=0,e=0,g=2){for(e=e||J.length/g;b<e;b++)D(L,J,f,b*g)}const v=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:l,fromValues:A,createView:m,transform:D,transformMany:y},Symbol.toStringTag,{value:"Module"}));N.clone=l;N.create=n;N.createView=m;N.fromValues=A;N.mat2df32=v;N.transform=D;N.transformMany=y})},"esri/chunks/mat2d":function(){define(["exports",
"./common"],function(N,n){function l(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a}function A(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a}function m(a,c,x,O,E,h,z){a[0]=c;a[1]=x;a[2]=O;a[3]=E;a[4]=h;a[5]=z;return a}function D(a,c){const x=c[0],O=c[1],E=c[2],h=c[3],z=c[4];c=c[5];let q=x*h-O*E;if(!q)return null;q=1/q;a[0]=h*q;a[1]=-O*q;a[2]=-E*q;a[3]=x*q;a[4]=(E*c-h*z)*q;a[5]=(O*z-x*c)*q;return a}function y(a){return a[0]*a[3]-a[1]*a[2]}function v(a,c,x){const O=
c[0],E=c[1],h=c[2],z=c[3],q=c[4];c=c[5];const p=x[0],S=x[1],P=x[2],T=x[3],F=x[4];x=x[5];a[0]=O*p+h*S;a[1]=E*p+z*S;a[2]=O*P+h*T;a[3]=E*P+z*T;a[4]=O*F+h*x+q;a[5]=E*F+z*x+c;return a}function L(a,c,x){const O=c[0],E=c[1],h=c[2],z=c[3],q=c[4];c=c[5];const p=Math.sin(x);x=Math.cos(x);a[0]=O*x+h*p;a[1]=E*x+z*p;a[2]=O*-p+h*x;a[3]=E*-p+z*x;a[4]=q;a[5]=c;return a}function J(a,c,x){const O=c[1],E=c[2],h=c[3],z=c[4],q=c[5],p=x[0];x=x[1];a[0]=c[0]*p;a[1]=O*p;a[2]=E*x;a[3]=h*x;a[4]=z;a[5]=q;return a}function f(a,
c,x){const O=c[0],E=c[1],h=c[2],z=c[3],q=c[4];c=c[5];const p=x[0];x=x[1];a[0]=O;a[1]=E;a[2]=h;a[3]=z;a[4]=O*p+h*x+q;a[5]=E*p+z*x+c;return a}function b(a,c){const x=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=x;a[2]=-x;a[3]=c;a[4]=0;a[5]=0;return a}function e(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=c[1];a[4]=0;a[5]=0;return a}function g(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=c[0];a[5]=c[1];return a}function t(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"}function d(a){return Math.sqrt(a[0]**
2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+1)}function H(a,c,x){a[0]=c[0]+x[0];a[1]=c[1]+x[1];a[2]=c[2]+x[2];a[3]=c[3]+x[3];a[4]=c[4]+x[4];a[5]=c[5]+x[5];return a}function Q(a,c,x){a[0]=c[0]-x[0];a[1]=c[1]-x[1];a[2]=c[2]-x[2];a[3]=c[3]-x[3];a[4]=c[4]-x[4];a[5]=c[5]-x[5];return a}function G(a,c,x){a[0]=c[0]*x;a[1]=c[1]*x;a[2]=c[2]*x;a[3]=c[3]*x;a[4]=c[4]*x;a[5]=c[5]*x;return a}function I(a,c,x,O){a[0]=c[0]+x[0]*O;a[1]=c[1]+x[1]*O;a[2]=c[2]+x[2]*O;a[3]=c[3]+x[3]*O;a[4]=c[4]+x[4]*O;a[5]=c[5]+x[5]*O;return a}
function k(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]}function w(a,c){const x=a[0],O=a[1],E=a[2],h=a[3],z=a[4];a=a[5];const q=c[0],p=c[1],S=c[2],P=c[3],T=c[4];c=c[5];return Math.abs(x-q)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(q))&&Math.abs(O-p)<=n.EPSILON*Math.max(1,Math.abs(O),Math.abs(p))&&Math.abs(E-S)<=n.EPSILON*Math.max(1,Math.abs(E),Math.abs(S))&&Math.abs(h-P)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(z-T)<=n.EPSILON*Math.max(1,
Math.abs(z),Math.abs(T))&&Math.abs(a-c)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}const r=Object.freeze(Object.defineProperty({__proto__:null,copy:l,identity:A,set:m,invert:D,determinant:y,multiply:v,rotate:L,scale:J,translate:f,fromRotation:b,fromScaling:e,fromTranslation:g,str:t,frob:d,add:H,subtract:Q,multiplyScalar:G,multiplyScalarAndAdd:I,exactEquals:k,equals:w,mul:v,sub:Q},Symbol.toStringTag,{value:"Module"}));N.add=H;N.copy=l;N.determinant=y;N.equals=w;N.exactEquals=k;N.frob=d;N.fromRotation=
b;N.fromScaling=e;N.fromTranslation=g;N.identity=A;N.invert=D;N.mat2d=r;N.mul=v;N.multiply=v;N.multiplyScalar=G;N.multiplyScalarAndAdd=I;N.rotate=L;N.scale=J;N.set=m;N.str=t;N.sub=Q;N.subtract=Q;N.translate=f})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e){function g(q){q=q.symbolLayers;if(!q)return null;let p=null;q.forEach(S=>{if("object"!==S.type||null==S.resource.href)p="water"===S.type?v.unwrap(S.color):v.isSome(S.material)?v.unwrap(S.material.color):null});return p?new A(p):null}function t(q,p){if(null==p)return q;q=q.toRgba();q[3]*=p;return new A(q)}function d(q,p,S){if(q=q.symbolLayers){var P=T=>{T=v.isSome(T)?T:null;p=p||T||null!=S&&z;return t(p,S)};q.forEach(T=>{if("object"!==T.type||null==T.resource.href||
p)if("water"===T.type)T.color=P(T.color);else{var F=v.isSome(T.material)?T.material.color:null;F=P(F);v.isNone(T.material)?T.material=new e.Symbol3DMaterial({color:F}):T.material.color=F;null!=S&&"outline"in T&&v.isSome(T.outline)&&v.isSome(T.outline.color)&&(T.outline.color=t(T.outline.color,S))}})}}function H(q,p){return Q.apply(this,arguments)}function Q(){Q=l._asyncToGenerator(function*(q,p){(q=q.symbolLayers)&&(yield D.forEach(q,function(){var S=l._asyncToGenerator(function*(P){return G(P,p)});
return function(P){return S.apply(this,arguments)}}()))});return Q.apply(this,arguments)}function G(q,p){return I.apply(this,arguments)}function I(){I=l._asyncToGenerator(function*(q,p){switch(q.type){case "extrude":q.size="number"===typeof p[2]?p[2]:0;break;case "icon":case "line":case "text":p=k(p);v.isSome(p)&&(q.size=p);break;case "path":{const S=a(p,J.ONES,[q.width,void 0,q.height]);q.width=O(p[0],q.width,1,S);q.height=O(p[2],q.height,1,S)}break;case "object":yield w(q,p)}});return I.apply(this,
arguments)}function k(q){for(const p of q)if("number"===typeof p)return p;return null}function w(q,p){return r.apply(this,arguments)}function r(){r=l._asyncToGenerator(function*(q,p){const {resourceSize:S,symbolSize:P}=yield c(q),T=a(p,S,P);q.width=O(p[0],P[0],S[0],T);q.depth=O(p[1],P[1],S[1],T);q.height=O(p[2],P[2],S[2],T)});return r.apply(this,arguments)}function a(q,p,S){for(let P=0;3>P;P++){const T=q[P];switch(T){case "symbol-value":return null!=S[P]?S[P]/p[P]:1;case "proportional":break;default:if(T&&
p[P])return T/p[P]}}return 1}function c(q){return x.apply(this,arguments)}function x(){x=l._asyncToGenerator(function*(q){const p=yield(yield new Promise((V,aa)=>N(["./symbolLayerUtils"],V,aa))).computeObjectLayerResourceSize(q,10),{width:S,height:P,depth:T}=q;q=[S,T,P];let F=1;for(var M=0;3>M;M++)if(null!=q[M]){F=q[M]/p[M];break}for(M=0;3>M;M++)null==q[M]&&(q[M]=p[M]*F);return{resourceSize:p,symbolSize:q}});return x.apply(this,arguments)}function O(q,p,S,P){switch(q){case "proportional":return S*
P;case "symbol-value":return null!=p?p:S;default:return q}}function E(){E=l._asyncToGenerator(function*(q,p){if(q&&p){if(m.isSymbol3D(q))return H(q,p);if(m.isSymbol2D(q)&&(p=k(p),!v.isNone(p)))switch(q.type){case "simple-marker":q.size=p;break;case "picture-marker":{const S=q.width/q.height;1<S?(q.width=p,q.height=p*S):(q.width=p*S,q.height=p);break}case "simple-line":q.width=p;break;case "text":q.font.size=p}}});return E.apply(this,arguments)}const h=/\/resource\/(.*?)\.svg$/,z=new A("white");n.applyColorToSymbol=
function(q,p,S){if(q&&(p||null!=S))if(p&&(p=new A(p)),m.isSymbol3D(q))d(q,p,S);else if(m.isSymbol2D(q)){if(p=p||q.color)q.color=t(p,S);null!=S&&"outline"in q&&q.outline&&q.outline.color&&(q.outline.color=t(q.outline.color,S))}};n.applyOpacityToColor=t;n.applyRotationToSymbol=function(q,p,S){q&&null!=p&&(m.isSymbol3D(q)?(q=q.symbolLayers)&&q.forEach(P=>{if(P&&"object"===P.type)switch(S){case "tilt":P.tilt=p;break;case "roll":P.roll=p;break;default:P.heading=p}}):!m.isSymbol2D(q)||"simple-marker"!==
q.type&&"picture-marker"!==q.type&&"text"!==q.type||(q.angle=p))};n.applySizesToSymbol=function(q,p){return E.apply(this,arguments)};n.getCSSFilterFromEffectList=function(q){if(!q)return null;q=q.effects.filter(p=>"bloom"!==p.type).map(p=>p.toJSON());return f.effectFunctionsFromJSON(q)};n.getColorFromSymbol=function(q,p){if(!q)return null;let S=null;m.isSymbol3D(q)?S=g(q):m.isSymbol2D(q)&&(S=q.color?new A(q.color):null);return S?t(S,p):null};n.getIconHref=function(q,p){p=p.resource.href;return!y("esri-canvas-svg-support")&&
q.styleOrigin&&h.test(p)?p.replace(h,"/resource/png/$1.png"):p};n.getSymbolOutlineSize=function(q){if(!q)return 0;if(m.isSymbol3D(q)){{const p=q.symbolLayers&&q.symbolLayers.length;p?(q=q.symbolLayers.getItemAt(p-1),q="outline"in q?v.get(q,"outline","size"):void 0):q=void 0}return v.isSome(q)?q:0}return(q=b.getStroke(q))&&L.px2pt(q.width)||0};n.isVolumetricSymbol=function(q){if(v.isNone(q)||!("symbolLayers"in q)||v.isNone(q.symbolLayers))return!1;switch(q.type){case "point-3d":return q.symbolLayers.some(p=>
"object"===p.type);case "line-3d":return q.symbolLayers.some(p=>"path"===p.type);case "polygon-3d":return q.symbolLayers.some(p=>"object"===p.type||"extrude"===p.type);default:return!1}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(N,n,l,A,m,D,y){function v(e){if(!e)return null;
let g;switch(e.type){case "simple-fill":case "picture-fill":case "simple-marker":g=v(e.outline);break;case "simple-line":{const t=D.pt2px(e.width);"none"!==e.style&&0!==t&&(g={color:e.color,style:b(e.style),width:t,cap:e.cap,join:"miter"===e.join?D.pt2px(e.miterLimit):e.join});break}default:g=null}return g}const L={left:"start",center:"middle",right:"end",justify:"start"},J={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},f=new m(1E3),b=(()=>{const e={};return g=>
{if(e[g])return e[g];const t=g.replace(/-/g,"");return e[g]=t}})();l=new l([128,128,128]);N.defaultThematicColor=l;N.dekebabifyLineStyle=b;N.getFill=function(e){const g=e.style;let t=null;if(e)switch(e.type){case "simple-marker":"cross"!==g&&"x"!==g&&(t=e.color);break;case "simple-fill":"solid"===g?t=e.color:"none"!==g&&(t={type:"pattern",x:0,y:0,src:n.getAssetUrl(`esri/symbols/patterns/${g}.png`),width:5,height:5});break;case "picture-fill":t={type:"pattern",src:e.url,width:D.pt2px(e.width)*e.xscale,
height:D.pt2px(e.height)*e.yscale,x:D.pt2px(e.xoffset),y:D.pt2px(e.yoffset)};break;case "text":t=e.color;break;case "cim":t=y.getCIMSymbolColor(e)}return t};N.getPatternUrlWithColor=function(e,g){const t=e+"-"+g;return void 0!==f.get(t)?Promise.resolve(f.get(t)):A(e,{responseType:"image"}).then(d=>{d=d.data;const H=d.naturalWidth,Q=d.naturalHeight,G=document.createElement("canvas");G.width=H;G.height=Q;const I=G.getContext("2d");I.fillStyle=g;I.fillRect(0,0,H,Q);I.globalCompositeOperation="destination-in";
I.drawImage(d,0,0);d=G.toDataURL();f.put(t,d);return d})};N.getSVGAlign=function(e){return e=(e=e.horizontalAlignment)&&L[e.toLowerCase()]||"middle"};N.getSVGBaseline=function(e){return(e=e.verticalAlignment)&&J[e.toLowerCase()]||"alphabetic"};N.getSVGBaselineShift=function(e){return"bottom"===e.verticalAlignment?"super":null};N.getStroke=v;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(N){return function(){function n(A,
m){this._storage=new N.MemCacheStorage;this._storage.maxSize=A;m&&this._storage.registerRemoveFunc("",m)}var l=n.prototype;l.put=function(A,m){this._storage.put(A,m,1,1)};l.pop=function(A){return this._storage.pop(A)};l.get=function(A){return this._storage.get(A)};l.clear=function(){this._storage.clearAll()};l.destroy=function(){this._storage.destroy()};return n}()})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),
function(N,n,l,A,m,D,y,v,L,J){function f(G,I){if(I&&(G.style.filter=J.getCSSFilterFromEffectList(I),I=I.effects))for(const k of I)if("drop-shadow"===(null==k?void 0:k.type)){0>k.offsetX?G.style.marginLeft=`${Math.abs(k.offsetX)}px`:G.style.marginRight=`${k.offsetX}px`;break}}function b(G,I){return e.apply(this,arguments)}function e(){e=l._asyncToGenerator(function*(G,I){switch(G.type){case "web-style":var {previewWebStyleSymbol:k}=yield new Promise((w,r)=>N(["./previewWebStyleSymbol"],w,r));return k(G,
b,I);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:k}=yield new Promise((w,r)=>N(["./previewSymbol3D"],w,r)),k(G,I);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:k}=yield new Promise((w,r)=>N(["./previewSymbol2D"],w,r)),k(G,I);case "cim":return{previewCIMSymbol:k}=yield new Promise((w,r)=>N(["./previewCIMSymbol"],w,r)),k(G,I)}});return e.apply(this,arguments)}
function g(G){return G&&"opacity"in G?G.opacity*g(G.parent):1}function t(){t=l._asyncToGenerator(function*(G,I){var k,w;if(G){var r=G.sourceLayer;r=null!=(k=m.isSome(I)&&null!=(w=I.useSourceLayer)&&w?r:G.layer)?k:r;k=g(r);if(m.isSome(G.symbol)&&(!m.isSome(I)||!0!==I.ignoreGraphicSymbol))return G="web-style"===G.symbol.type?yield G.symbol.fetchSymbol({...I,cache:m.isSome(I)?I.webStyleCache:null}):G.symbol.clone(),J.applyColorToSymbol(G,null,k),G;var a=m.isSome(I)&&I.renderer||r&&"renderer"in r&&r.renderer;
if(w=a&&"getSymbolAsync"in a?yield a.getSymbolAsync(G,I):null){w="web-style"===w.type?yield w.fetchSymbol({...I,cache:m.isSome(I)?I.webStyleCache:null}):w.clone();if(!("visualVariables"in a&&a.visualVariables&&a.visualVariables.length))return J.applyColorToSymbol(w,null,k),w;"arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&(m.isNone(I)||m.isNone(I.arcade))&&(I={...m.unwrap(I)},I.arcade=yield D.loadArcade());r=yield new Promise((z,q)=>N(["../../renderers/visualVariables/support/visualVariableUtils"],
z,q));var c=[],x=[],O=[],E=[];for(var h of a.visualVariables)switch(h.type){case "color":c.push(h);break;case "opacity":x.push(h);break;case "rotation":E.push(h);break;case "size":h.target||O.push(h)}h=(h=!!c.length&&c[c.length-1])?r.getColor(h,G,I):null;x=(x=!!x.length&&x[x.length-1])?r.getOpacity(x,G,I):null;null!=k&&(x=null!=x?x*k:k);J.applyColorToSymbol(w,h,x);O.length&&(k=r.getAllSizes(O,G,I),yield J.applySizesToSymbol(w,k));for(const z of E)J.applyRotationToSymbol(w,r.getRotationAngle(z,G,I),
z.axis);return w}}});return t.apply(this,arguments)}function d(){d=l._asyncToGenerator(function*(G,I){var k;if(G){var w=g(G.layer||G.sourceLayer);if(m.isSome(G.symbol)&&(!m.isSome(I)||!0!==I.ignoreGraphicSymbol))return G="web-style"===G.symbol.type?yield G.symbol.fetchSymbol(I):G.symbol.clone(),J.getColorFromSymbol(G,w);var r=m.isSome(I)&&I.renderer||G.get("layer.renderer")||G.get("sourceLayer.renderer"),a=yield r.getSymbolAsync(G,I);if(a){a="web-style"===a.type?yield a.fetchSymbol(I):a.clone();a=
J.getColorFromSymbol(a,w);if(!("visualVariables"in r)||"visualVariables"in r&&!r.visualVariables||"visualVariables"in r&&(null==(k=r.visualVariables)||!k.length))return a;r.arcadeRequiredForVisualVariables&&(m.isNone(I)||m.isNone(I.arcade))&&(I={...m.unwrap(I)},I.arcade=yield D.loadArcade());k=yield new Promise((O,E)=>N(["../../renderers/visualVariables/support/visualVariableUtils"],O,E));var c=[],x=[];for(const O of r.visualVariables)switch(O.type){case "color":c.push(O);break;case "opacity":x.push(O)}r=
(r=0<c.length?c[c.length-1]:null)?k.getColor(r,G,I):a;G=(a=0<x.length?x[x.length-1]:null)?k.getOpacity(a,G,I):null;null!=w&&(G=null!=G?G*w:w);return r?J.applyOpacityToColor(r,G):null}}});return d.apply(this,arguments)}let H=null;const Q=[255,255,255];n.getDisplayedColor=function(G,I){return d.apply(this,arguments)};n.getDisplayedSymbol=function(G,I){return t.apply(this,arguments)};n.renderColorRampPreviewHTML=function(G,I={}){var k="horizontal"===I.align;const {width:w=k?75:24,height:r=k?24:75,gradient:a=
!0}=I;var c=window.devicePixelRatio,x=w*c,O=r*c;c=document.createElement("canvas");c.width=x;c.height=O;c.style.width=`${w}px`;c.style.height=`${r}px`;const E=c.getContext("2d");var h=k?x:0,z=k?0:O;if(a){const q=E.createLinearGradient(0,0,h,z);k=G.length;const p=1===k?0:1/(k-1);G.forEach((S,P)=>q.addColorStop(P*p,S.toString()));E.fillStyle=q;E.fillRect(0,0,x,O)}else{x=k?x/G.length:x;O=k?O:O/G.length;z=h=0;for(const q of G)E.fillStyle=q.toString(),E.fillRect(h,z,x,O),h=k?h+x:0,z=k?0:z+O}G=document.createElement("div");
G.style.width=`${w}px`;G.style.height=`${r}px`;f(G,null==I?void 0:I.effectList);G.appendChild(c);return G};n.renderDotDensityPreviewHTML=function(G,I,k){const {backgroundColor:w,outline:r,dotSize:a}=G;k=k&&k.swatchSize||v.SymbolSizeDefaults.size;const c=Math.round(k*k/a**2*.8),x=window.devicePixelRatio;G=document.createElement("canvas");const O=k*x;G.width=O;G.height=O;G.style.width=`${G.width/x}px`;G.style.height=`${G.height/x}px`;const E=G.getContext("2d");w&&(E.fillStyle=w.toCss(!0),E.fillRect(0,
0,O,O),E.fill());E.fillStyle=I.toCss(!0);if(H&&H.length/2===c)for(I=0;I<2*c;I+=2)E.fillRect(H[I],H[I+1],a*x,a*x),E.fill();else for(H=[],I=0;I<2*c;I+=2){const h=Math.floor(Math.random()*(O-0+1)),z=Math.floor(Math.random()*(O-0+1));H.push(h,z);E.fillRect(h,z,a*x,a*x);E.fill()}r&&(r.color&&(E.strokeStyle=r.color.toCss(!0)),E.lineWidth=r.width,E.strokeRect(0,0,O,O));k=new Image(k,k);k.src=G.toDataURL();return k};n.renderPieChartPreviewHTML=function(G,I={}){const k=I.radius||40;var w=2*Math.PI*k,r=G.length;
const a=w/r,c=[],x=y.getStroke(I.outline);x&&(x.width*=2);(x||I.backgroundColor)&&c.push({shape:{type:"circle",cx:k,cy:k,r:k},fill:I.backgroundColor,stroke:x,offset:[0,0]});const O=I.values,E=O&&O.length===r&&100===O.reduce((z,q)=>z+q,0),h=[0];for(let z=0;z<r;z++){const q=E?O[z]*w/100:null;E&&h.push(q+h[z]);c.push({shape:{type:"circle",cx:k,cy:k,r:k/2},fill:[0,0,0,0],stroke:{width:k,dashArray:`${q||a} ${w}`,dashoffset:`-${E?h[z]/2:a/2*z}`,color:G[z]},offset:[0,0]})}r=null;G=2*k+((null==x?void 0:x.width)||
0);if(w=I.holePercentage)x&&c.push({shape:{type:"circle",cx:k,cy:k,r:k*w},fill:null,stroke:x,offset:[0,0]}),r=G/2,r=[[{shape:{type:"circle",cx:r,cy:r,r},fill:Q,stroke:x?{...x,color:Q}:null,offset:[0,0]},{shape:{type:"circle",cx:r,cy:r,r:k*w},fill:[0,0,0],stroke:null,offset:[0,0]}]];return L.renderSymbol([c],[G,G],{effectView:I.effectList,ignoreStrokeWidth:!0,masking:r,rotation:-90})};n.renderPreviewHTML=b;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/clusterUtils":function(){define(["exports","../../../renderers/visualVariables/SizeVariable"],function(N,n){const l=(A,m)=>{A=A.featuresTilingScheme.getClosestInfoForScale(A.scale).level;return null!=m&&m.levels?m.levels[A]:null};N.getClusterSizeVariable=function(A,m){if(!(A&&"visualVariables"in A&&A.visualVariables))return null;A=A.visualVariables.find(D=>"size"===D.type);return(m=l(m,A))?new n({field:A.field,minSize:m[2].size,minDataValue:m[2].value,maxSize:m[3].size,
maxDataValue:m[3].value}):null};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(N,n,l,A,m){function D(e,g){const t=[],d=e.length-1;5===e.length?t.push(0,2,4):t.push(0,d);return e.map((H,Q)=>t.includes(Q)?m.createStopLabel(H,Q,d,g):null)}function y(){y=l._asyncToGenerator(function*(e,g,t){let d=
!1,H=[],Q=[];if(e.stops){var G=e.stops;H=G.map(k=>k.value);(d=G.some(k=>!!k.label))&&(Q=G.map(k=>k.label))}G=H[H.length-1];if(null==H[0]&&null==G)return null;const I=d?null:D(H,t);return(yield Promise.all(H.map(function(){var k=l._asyncToGenerator(function*(w,r){const a="opacity"===e.type?yield v(w,e,g):(yield new Promise((c,x)=>N(["../../../renderers/visualVariables/support/visualVariableUtils"],c,x))).getColor(e,w);return{value:w,color:a,label:d?Q[r]:I[r]}});return function(w,r){return k.apply(this,
arguments)}}()))).reverse()});return y.apply(this,arguments)}function v(e,g){return L.apply(this,arguments)}function L(){L=l._asyncToGenerator(function*(e,g,t=b){t=new A(t);e=(yield new Promise((d,H)=>N(["../../../renderers/visualVariables/support/visualVariableUtils"],d,H))).getOpacity(g,e);null!=e&&(t.a=e);return t});return L.apply(this,arguments)}function J(e,g){const {startIndex:t,endIndex:d,weight:H}=f(e,g);if(t===d)return g[t].color;e=A.blendColors(g[t].color,g[d].color,H);return new A(e)}function f(e,
g){let t=0,d=g.length-1;g.some((H,Q)=>{if(e<H.value)return d=Q,!0;t=Q;return!1});return{startIndex:t,endIndex:d,weight:(e-g[t].value)/(g[d].value-g[t].value)}}const b=new A([64,64,64]);n.getColorFromPointCloudStops=J;n.getRampStops=function(e,g,t){return y.apply(this,arguments)};n.getRampStopsForPointCloud=function(e){let g=!1,t=[],d=[];t=e.map(G=>G.value);(g=e.some(G=>!!G.label))&&(d=e.map(G=>G.label));const H=t[t.length-1];if(null==t[0]&&null==H)return null;const Q=g?null:D(t,!1);return t.map((G,
I)=>{const k=J(G,e);return{value:G,color:k,label:g?d[I]:Q[I]}}).reverse()};n.getStrectchRampStops=function(e,g){let t=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((d,H)=>{0===H?t.push({value:g.max,color:new A(d.toColor),label:"high"}):t.push({value:null,color:new A(d.toColor),label:""});H===e.colorRamps.length-1?t.push({value:g.min,color:new A(d.fromColor),label:"low"}):t.push({value:null,color:new A(d.fromColor),label:""})});else{let d,H;e&&"algorithmic"===e.type?(d=e.fromColor,H=
e.toColor):(d=[0,0,0,1],H=[255,255,255,1]);t=[{value:g.max,color:new A(H),label:"high"},{value:g.min,color:new A(d),label:"low"}]}return t};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(N,n,l,A,m,D,y){function v(b){return L.apply(this,
arguments)}function L(){L=l._asyncToGenerator(function*(b){if(!("visualVariables"in b&&b.visualVariables))return null;b=b.visualVariables.find(t=>"color"===t.type);if(!b)return null;var e=null,g=null;if(b.stops){if(1===b.stops.length)return b.stops[0].color;e=b.stops[0].value;g=b.stops[b.stops.length-1].value}e+=(g-e)/2;({getColor:g}=yield new Promise((t,d)=>N(["../../../renderers/visualVariables/support/visualVariableUtils"],t,d)));return g(b,e)});return L.apply(this,arguments)}function J(){J=l._asyncToGenerator(function*(b,
e){const g=b.trailCap,t=b.trailWidth||1;b=e||(yield v(b))||b.color;return new y({cap:g,color:b,width:t})});return J.apply(this,arguments)}const f=m.convertDateFormatToIntlOptions("short-date");n.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];n.SPECIAL_CHARS_GREATER_THAN="\x3e";n.SPECIAL_CHARS_LESS_THAN="\x3c";n.createStopLabel=function(b,e,g,t){let d="";0===e?d="\x3c ":e===g&&(d="\x3e ");e=null;e=t?m.formatDate(b,f):D.format(b);return d+e};n.getMedianColor=v;n.getSymbolForFlowRenderer=function(b,e){return J.apply(this,arguments)};Object.defineProperties(n,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(N,n,l){function A(f,b){return f-b}function m(f,b){let e;e=Number(f.toFixed(b));e<f?f=e+1/10**b:(f=e,e-=1/10**b);e=Number(e.toFixed(b));f=Number(f.toFixed(b));return[e,f]}function D(f,b,e,g,t){f=v(f,b,e,g);b=null==f.next||f.next<=t;return(null==f.previous||f.previous<=t)&&b||f.previous+f.next<=2*t}function y(f){f=String(f);var b=
f.match(L);if(b&&b[1])return{integer:b[1].split("").length,fractional:b[3]?b[3].split("").length:0};if(f.toLowerCase().includes("e")&&(b=f.split("e"),f=b[0],b=b[1],f&&b)){f=Number(f);b=Number(b);const e=0<b;e||(b=Math.abs(b));f=y(f);e?(f.integer+=b,f.fractional=b>f.fractional?0:f.fractional-b):(f.fractional+=b,f.integer=b>f.integer?1:f.integer-b);return f}return{integer:0,fractional:0}}function v(f,b,e,g){const t={previous:null,next:null};if(null!=e){const d=f-e;t.previous=Math.floor(Math.abs(100*
(b-e-d)/d))}null!=g&&(f=g-f,t.next=Math.floor(Math.abs(100*(g-b-f)/f)));return t}const L=/^-?(\d+)(\.(\d+))?$/i,J={maximumFractionDigits:20};N.format=function(f){return l.formatNumber(f,J)};N.numDigits=y;N.percentChange=v;N.round=function(f,b={}){f=f.slice(0);const {tolerance:e=2,strictBounds:g=!1,indexes:t=f.map((H,Q)=>Q)}=b;t.sort(A);for(b=0;b<t.length;b++){const H=t[b],Q=f[H],G=0===H?null:f[H-1],I=H===f.length-1?null:f[H+1],k=y(Q).fractional;if(k){let w=0,r=!1;for(var d=void 0;w<=k&&!r;)d=m(Q,
w),d=g&&0===b?d[1]:d[0],r=D(Q,d,G,I,e),w++;r&&(f[H]=d)}}return f};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(N,n){N.getHeatmapRampStops=function(l){if(!l.colorStops)return[];const A=[...l.colorStops].filter(D=>{var y;return 0<(null==(y=D.color)?void 0:y.a)});let m=A.length-1;if(A&&A[0]){const D=A[m];D&&1!==D.ratio&&(A.push(new n({ratio:1,
color:D.color})),m++)}return A.map((D,y)=>{let v="";if(0===y){var L;v=(null==(L=l.legendOptions)?void 0:L.minLabel)||"low"}else if(y===m){var J;v=(null==(J=l.legendOptions)?void 0:J.maxLabel)||"high"}return{color:D.color,label:v,ratio:D.ratio}}).reverse()};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],
function(N,n,l,A){function m(J){if(J){var {type:f}=J;return f.includes("3d")?A.getSymbolLayerFill(J.symbolLayers.getItemAt(0)):"simple-line"===f||"simple-marker"===J.type&&("x"===J.style||"cross"===J.style)?(J=l.getStroke(J))&&J.color:l.getFill(J)}}function D(J,f){const b=f.HH.label,e=f.LL.label,g=f.HL.label;f=f.LH.label;switch(J){case "HH":return{top:b,bottom:e,left:g,right:f};case "HL":return{top:g,bottom:f,left:e,right:b};case "LL":return{top:e,bottom:b,left:f,right:g};case "LH":return{top:f,bottom:g,
left:b,right:e};default:return{top:b,bottom:e,left:g,right:f}}}function y(J){let f=v[J];J&&null==f&&(f=v.HH);return f||0}const v={HH:315,HL:45,LL:135,LH:225},L={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};N.getRelationshipRampColors2D=function(J,f){const b=[],e=J.length**.5;J=n.clone(J);var g=(f||"HH").split("");f=g[0];for(g="H"===g[1];J.length;){const t=
[];for(;t.length<e;)t.push(J.shift());g&&t.reverse();b.push(t)}"L"===f&&b.reverse();return b};N.getRelationshipRampElement=function(J){const {focus:f,infos:b,numClasses:e}=J;var g=L[e];const t={};b.forEach(d=>{t[d.value]={label:d.label,fill:m(d.symbol)}});J=[];for(let d=0;d<e;d++){const H=[];for(let Q=0;Q<e;Q++)H.push(t[g[d][Q]].fill);J.push(H)}g=D(f,t);return{type:"relationship-ramp",numClasses:e,focus:f,colors:J,labels:g,rotation:y(f)}};N.getRotationAngleForFocus=y;Object.defineProperties(N,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H){function Q(X){const Z=
X.outline;var da=v.isSome(X.material)?X.material.color:null;da=v.isSome(da)?da.toHex():null;if(v.isNone(Z)||"pattern"in Z&&v.isSome(Z.pattern)&&"style"===Z.pattern.type&&"none"===Z.pattern.style)return"fill"===X.type&&"#ffffff"===da?{color:"#bdc3c7",width:.75}:null;X=J.pt2px(Z.size)||0;return{color:"rgba("+(v.isSome(Z.color)?Z.color.toRgba():"255,255,255,1")+")",width:Math.min(X,V),style:"pattern"in Z&&v.isSome(Z.pattern)&&"style"===Z.pattern.type?f.dekebabifyLineStyle(Z.pattern.style):null,join:"butt",
cap:"patternCap"in Z?Z.patternCap:"butt"}}function G(X,Z){var da=Z&&Z.resource;da=da&&da.href;if(X.thumbnail&&X.thumbnail.url)return Promise.resolve(X.thumbnail.url);if(da&&"object"!==Z.type)return Promise.resolve(d.getIconHref(X,Z));const ia=l.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return X.styleOrigin&&(X.styleOrigin.styleName||X.styleOrigin.styleUrl)?H.resolveWebStyleSymbol(X.styleOrigin,{portal:X.styleOrigin.portal},"webRef").catch(va=>va).then(va=>{var ya;return(null==va?
void 0:null==(ya=va.thumbnail)?void 0:ya.url)||ia}):Promise.resolve(ia)}function I(X,Z=1){const da=X.a;X=A.toHSV(X);const {r:ia,g:va,b:ya}=A.toRGB({h:X.h,s:X.s/Z,v:100-(100-X.v)/Z});return[ia,va,ya,da]}function k(X){return"water"===X.type?v.isNone(X.color)?null:X.color:v.isNone(X.material)||v.isNone(X.material.color)?null:X.material.color}function w(X,Z=0){var da=k(X);if(!da){if("fill"===X.type)return null;Z=g.adjustColorComponentBrightness(f.defaultThematicColor.r,Z);return[Z,Z,Z,100]}X=da.toRgba();
for(da=0;3>da;da++)X[da]=g.adjustColorComponentBrightness(X[da],Z);return X}function r(X,Z){return a.apply(this,arguments)}function a(){a=n._asyncToGenerator(function*(X,Z){X=X.style;return"none"===X?null:{type:"pattern",x:0,y:0,src:yield f.getPatternUrlWithColor(l.getAssetUrl(`esri/symbols/patterns/${X}.png`),Z.toCss(!0)),width:5,height:5}});return a.apply(this,arguments)}function c(X){return X.outline?Q(X):{color:"rgba(0, 0, 0, 1)",width:1.5}}function x(X,Z){X=k(X);if(!X)return null;let da;da="rgba("+
(g.adjustColorComponentBrightness(X.r,Z)+",");da+=g.adjustColorComponentBrightness(X.g,Z)+",";da+=g.adjustColorComponentBrightness(X.b,Z)+",";return da+X.a+");"}function O(X,Z){Z=x(X,Z);if(!Z)return{};if("pattern"in X&&v.isSome(X.pattern)&&"style"===X.pattern.type&&"none"===X.pattern.style)return null;const da=Math.min(X.size?J.pt2px(X.size):.75,V);return{color:Z,width:da,style:"pattern"in X&&v.isSome(X.pattern)&&"style"===X.pattern.type?f.dekebabifyLineStyle(X.pattern.style):null,cap:"cap"in X?X.cap:
null,join:"join"in X?"miter"===X.join?J.pt2px(2):X.join:null}}function E(X,Z,da){da*=.75;return{type:"linear",x1:da?.25*da:0,y1:da?.5*da:0,x2:da||4,y2:da?.5*da:4,colors:[{color:X,offset:0},{color:Z,offset:1}]}}function h(X){const Z=X.depth,da=X.height;return(X=X.width)&&Z&&da&&X===Z&&X<da}function z(X,Z,da){const ia=[];if(!X)return ia;switch(X.type){case "icon":switch(X.resource&&X.resource.primitive||b.defaultPrimitive){case "circle":ia.push({shape:{type:"circle",cx:0,cy:0,r:.5*Z},fill:w(X,0),stroke:Q(X)});
break;case "square":ia.push({shape:{type:"path",path:[{command:"M",values:[0,Z]},{command:"L",values:[0,0]},{command:"L",values:[Z,0]},{command:"L",values:[Z,Z]},{command:"Z",values:[]}]},fill:w(X,0),stroke:Q(X)});break;case "triangle":ia.push({shape:{type:"path",path:[{command:"M",values:[0,Z]},{command:"L",values:[.5*Z,0]},{command:"L",values:[Z,Z]},{command:"Z",values:[]}]},fill:w(X,0),stroke:Q(X)});break;case "cross":ia.push({shape:{type:"path",path:[{command:"M",values:[.5*Z,0]},{command:"L",
values:[.5*Z,Z]},{command:"M",values:[0,.5*Z]},{command:"L",values:[Z,.5*Z]}]},stroke:c(X)});break;case "x":ia.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[Z,Z]},{command:"M",values:[Z,0]},{command:"L",values:[0,Z]}]},stroke:c(X)});break;case "kite":ia.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Z]},{command:"L",values:[.5*Z,0]},{command:"L",values:[Z,.5*Z]},{command:"L",values:[.5*Z,Z]},{command:"Z",values:[]}]},fill:w(X,0),stroke:Q(X)})}break;case "object":switch(X.resource&&
X.resource.primitive||e.defaultPrimitive){case "cone":var va=w(X,0);X=w(X,-.6);X=E(va,X,da?ka:Z);Z=g.getConeShapes(Z,da);ia.push({shape:Z[0],fill:X});ia.push({shape:Z[1],fill:X});break;case "inverted-cone":da=w(X,0);X=w(X,-.6);X=E(da,X,Z);Z=g.getInvertedConeShapes(Z);ia.push({shape:Z[0],fill:X});ia.push({shape:Z[1],fill:da});break;case "cube":Z=g.getCubeShapes(Z,da);ia.push({shape:Z[0],fill:w(X,0)});ia.push({shape:Z[1],fill:w(X,-.3)});ia.push({shape:Z[2],fill:w(X,-.5)});break;case "cylinder":{va=
w(X,0);const ya=w(X,-.6);va=E(va,ya,da?ka:Z);Z=g.getCylinderShapes(Z,da);ia.push({shape:Z[0],fill:va});ia.push({shape:Z[1],fill:va});ia.push({shape:Z[2],fill:w(X,0)});break}case "diamond":Z=g.getDiamondShapes(Z);ia.push({shape:Z[0],fill:w(X,-.3)});ia.push({shape:Z[1],fill:w(X,0)});ia.push({shape:Z[2],fill:w(X,-.3)});ia.push({shape:Z[3],fill:w(X,-.7)});break;case "sphere":da=w(X,0);X=w(X,-.6);X=E(da,X);X.x1=0;X.y1=0;X.x2=.25*Z;X.y2=.25*Z;ia.push({shape:{type:"circle",cx:0,cy:0,r:.5*Z},fill:X});break;
case "tetrahedron":Z=g.getTetrahedronShapes(Z),ia.push({shape:Z[0],fill:w(X,-.3)}),ia.push({shape:Z[1],fill:w(X,0)}),ia.push({shape:Z[2],fill:w(X,-.6)})}}return ia}function q(X){return(X="number"===typeof(null==X?void 0:X.size)?null==X?void 0:X.size:null)?J.pt2px(X):null}function p(X,Z){const da=q(Z),ia=Z&&Z.maxSize?J.pt2px(Z.maxSize):null,va=Z&&Z.disableUpsampling,ya=X.symbolLayers,Ba=[];let ca=0,fa=0;const ea=ya.getItemAt(ya.length-1);let pa;ea&&"icon"===ea.type&&(pa=ea.size&&J.pt2px(ea.size));
ya.forEach(oa=>{if("icon"===oa.type||"object"===oa.type){var ra="icon"===oa.type?oa.size&&J.pt2px(oa.size):0,Aa=da||ra?Math.ceil(Math.min(da||ra,ia||M)):F;if(oa&&oa.resource&&oa.resource.href){var Ca=G(X,oa).then(za=>{const Ja=oa.get("material.color");var La="icon"===oa.type?"multiply":"tint";return t.tintImageWithColor(za,Aa,Ja,La,va)}).then(za=>{const Ja=za.width,La=za.height;ca=Math.max(ca,Ja);fa=Math.max(fa,La);return[{shape:{type:"image",x:0,y:0,width:Ja,height:La,src:za.url},fill:null,stroke:null}]});
Ba.push(Ca)}else{let za=Aa;"icon"===oa.type&&pa&&da&&(za=ra/pa*Aa);ra="tall"===(null==Z?void 0:Z.symbolConfig)||(null==Z?void 0:null==(Ca=Z.symbolConfig)?void 0:Ca.isTall)||("object"===oa.type?h(oa):!1);ca=Math.max(ca,ra?ka:za);fa=Math.max(fa,za);Ba.push(Promise.resolve(z(oa,za,ra)))}}});return L.eachAlways(Ba).then(oa=>{const ra=[];oa.forEach(Aa=>{Aa.value?ra.push(Aa.value):Aa.error&&la.warn("error while building swatchInfo!",Aa.error)});return t.renderSymbol(ra,[ca,fa],{node:Z&&Z.node,scale:!1,
opacity:Z&&Z.opacity})})}function S(X,Z){const da=X.symbolLayers,ia=[];X=d.isVolumetricSymbol(X);const va=q(Z),ya=(Z&&Z.maxSize?J.pt2px(Z.maxSize):null)||V;let Ba=0,ca=0,fa;da.forEach((ea,pa)=>{if(ea&&("line"===ea.type||"path"===ea.type)){var oa=[];switch(ea.type){case "line":var ra=O(ea,0);if(v.isNone(ra))break;var Aa=ra&&ra.width||0;0===pa&&(fa=Aa);ea=Math.min(va||Aa,ya);pa=0===pa?ea:va?Aa/fa*ea:ea;Aa=pa>aa/2?2*pa:aa;ca=Math.max(ca,pa);Ba=Math.max(Ba,Aa);ra.width=pa;oa.push({shape:{type:"path",
path:[{command:"M",values:[0,.5*ca]},{command:"L",values:[Ba,.5*ca]}]},stroke:ra});break;case "path":ra=Math.min(va||F,ya);pa=w(ea,0);Aa=w(ea,-.2);var Ca=x(ea,-.4);Ca=Ca?{color:Ca,width:1}:{};if("quad"===ea.profile){const za=ea.width;ea=ea.height;ea=g.getPathSymbolShapes(za&&ea?za/ea:1,0===ea,0===za);Ca={...Ca,join:"bevel"};oa.push({shape:ea[0],fill:Aa,stroke:Ca});oa.push({shape:ea[1],fill:Aa,stroke:Ca});oa.push({shape:ea[2],fill:pa,stroke:Ca})}else oa.push({shape:g.shapes.pathSymbol3DLayer[0],fill:Aa,
stroke:Ca}),oa.push({shape:g.shapes.pathSymbol3DLayer[1],fill:pa,stroke:Ca});Ba=ca=Math.max(ca,ra)}ia.push(oa)}});return Promise.resolve(t.renderSymbol(ia,[Ba,ca],{node:Z&&Z.node,scale:X,opacity:Z&&Z.opacity}))}function P(X,Z){return T.apply(this,arguments)}function T(){T=n._asyncToGenerator(function*(X,Z){const da="mesh-3d"===X.type;X=X.symbolLayers;var ia=q(Z);const va=Z&&Z.maxSize?J.pt2px(Z.maxSize):null;ia=ia||F;const ya=[];let Ba=0,ca=0;var fa=!1;for(let Ca=0;Ca<X.length;Ca++){var ea=X.getItemAt(Ca);
const za=[];if(!da||"fill"===ea.type){var pa=g.shapes.fill[0];switch(ea.type){case "fill":var oa=Q(ea);fa=Math.min(ia,va||M);Ba=Math.max(Ba,fa);ca=Math.max(ca,fa);fa=!0;var ra=w(ea,0),Aa="pattern"in ea&&ea.pattern;ea=k(ea);!da&&v.isSome(Aa)&&"style"===Aa.type&&"solid"!==Aa.style&&ea&&(ra=yield r(Aa,ea));za.push({shape:pa,fill:ra,stroke:oa});break;case "line":ea=O(ea,0);if(v.isNone(ea))break;ea={stroke:ea,shape:pa};Ba=Math.max(Ba,F);ca=Math.max(ca,F);za.push(ea);break;case "extrude":pa={join:"round",
width:1,...O(ea,-.4)};oa=w(ea,0);ea=w(ea,-.2);ra=Math.min(ia,va||M);Aa=g.getExtrudeSymbolShapes(ra);pa.width=1;za.push({shape:Aa[0],fill:ea,stroke:pa});za.push({shape:Aa[1],fill:ea,stroke:pa});za.push({shape:Aa[2],fill:oa,stroke:pa});ea=.7*F+.5*ra;Ba=Math.max(Ba,F);ca=Math.max(ca,ea);break;case "water":fa=k(ea),ea=I(fa),pa=I(fa,2),oa=I(fa,3),ra=g.getWaterSymbolShapes(),fa=!0,za.push({shape:ra[0],fill:ea}),za.push({shape:ra[1],fill:pa}),za.push({shape:ra[2],fill:oa}),ea=Math.min(ia,va||M),Ba=Math.max(Ba,
ea),ca=Math.max(ca,ea)}ya.push(za)}}return t.renderSymbol(ya,[Ba,ca],{node:Z&&Z.node,scale:fa,opacity:Z&&Z.opacity})});return T.apply(this,arguments)}const F=g.SymbolSizeDefaults.size,M=g.SymbolSizeDefaults.maxSize,V=g.SymbolSizeDefaults.maxOutlineSize,aa=g.SymbolSizeDefaults.lineWidth,ka=g.SymbolSizeDefaults.tallSymbolWidth,la=y.getLogger("esri.symbols.support.previewSymbol3D");N.getPatternDescriptor=r;N.getSizeFromOptions=q;N.getSymbolLayerFill=w;N.previewSymbol3D=function(X,Z){if(0===X.symbolLayers.length)return Promise.reject(new D("symbolPreview: renderPreviewHTML3D",
"No symbolLayers in the symbol."));switch(X.type){case "point-3d":return p(X,Z);case "line-3d":return S(X,Z);case "polygon-3d":case "mesh-3d":return P(X,Z)}return Promise.reject(new D("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b){function e(t,d,H,Q,G){var I=t.data;const k=H&&m.isSome(H.portal)?H.portal:y.getDefault(),w={portal:k,url:D.urlToObject(t.baseUrl),origin:"portal-item"};I=I.items.find(O=>O.name===d);if(!I)return Promise.reject(new A("symbolstyleutils:symbol-name-not-found",`The symbol name '${d}' could not be found`,{symbolName:d}));let r=v.fromJSON(f.symbolUrlFromStyleItem(I,Q),w),a=I.thumbnail&&I.thumbnail.href;const c=I.thumbnail&&I.thumbnail.imageData;l.isDevEnvironment()&&(r=
l.adjustStaticAGOUrl(r),a=l.adjustStaticAGOUrl(a));const x={portal:k,url:D.urlToObject(D.removeFile(r)),origin:"portal-item"};return f.requestJSON(r,G).then(O=>{O="cimRef"===Q?f.makeCIMSymbolRef(O.data):O.data;if((O=L.fromJSON(O,x))&&n.isSymbol3D(O)){if(a){const E=v.fromJSON(a,w);O.thumbnail=new b.Thumbnail({url:E})}else c&&(O.thumbnail=new b.Thumbnail({url:`data:image/png;base64,${c}`}));t.styleUrl?O.styleOrigin=new J({portal:H.portal,styleUrl:t.styleUrl,name:d}):t.styleName&&(O.styleOrigin=new J({portal:H.portal,
styleName:t.styleName,name:d}))}return O})}function g(t,d,H){const Q=f.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,t.name),G=m.isSome(d.portal)?d.portal:y.getDefault();return f.requestJSON(Q,H).then(I=>{I=f.makeCIMSymbolRef(I.data);return L.fromJSON(I,{portal:G,url:D.urlToObject(D.removeFile(Q)),origin:"portal-item"})})}N.fetchSymbolFromStyle=e;N.resolveWebStyleSymbol=function(t,d,H,Q){return t.name?t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?g(t,d,Q):f.fetchStyle(t,d,Q).then(G=>e(G,t.name,
d,H,Q)):Promise.reject(new A("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(N){const n=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,A=/^[\w-]*\.mapsdevext.arcgis.com$/,m=/^[\w-]*\.mapsqa.arcgis.com$/,D=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,n,l,/^jsapps.esri.com$/,A,m];N.adjustStaticAGOUrl=
function(y,v){return y?(v=v||globalThis.location.hostname)?null!=v.match(n)||null!=v.match(A)?y.replace("static.arcgis.com","staticdev.arcgis.com"):null!=v.match(l)||null!=v.match(m)?y.replace("static.arcgis.com","staticqa.arcgis.com"):y:y:y};N.isDevEnvironment=function(y){y=y||globalThis.location.hostname;return D.some(v=>{var L;return null!=(null==(L=y)?void 0:L.match(v))})};N.isTelemetryDevEnvironment=function(y){y=y||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(D).some(v=>
{var L;return null!=(null==(L=y)?void 0:L.match(v))})};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../symbols ../../../renderers/support/numberUtils ../../../symbols/support/cimSymbolUtils ../../../symbols/support/utils ./utils ../../support/widgetUtils ../../../support/themeUtils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleLineSymbol".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e){function g(P,T){const F=P.length-1;return P.map((M,V)=>L.createStopLabel(M,V,F,T))}function t(){t=l._asyncToGenerator(function*(P,T,F,M,V,aa){var ka,la,X=T.legendOptions;X=X&&X.customValues;const Z=yield Q(P,F);var da=null!=T.minSize&&null!=T.maxSize;F=T.stops&&1<T.stops.length;var ia=!!T.target;if(Z&&(X||da||F&&!ia)){var va=v.isVolumetricSymbol(Z),ya=null,Ba=da=null;da=va&&!F?D.round([T.minDataValue,T.maxDataValue]):X||(yield r(T,Z,M,V));X=null==P?void 0:P.authoringInfo;
var ca=(ia="univariate-color-size"===(null==X?void 0:X.type))&&"above-and-below"===(null==X?void 0:X.univariateTheme);!da&&F&&(da=T.stops.map(oa=>oa.value),ya=T.stops.some(oa=>!!oa.label),"flow"===P.type&&(da=D.round(da)),ya&&(Ba=T.stops.map(oa=>oa.label)));va&&2<(null==(ka=da)?void 0:ka.length)&&!ca&&(da=[da[0],da[da.length-1]]);if(!da)return null;ia&&5!==(null==(la=da)?void 0:la.length)&&(da=c({minSize:da[0],maxSize:da[da.length-1]}));var fa=va?d(P,da):null,ea=v.getSymbolOutlineSize(Z),pa=ya?null:
g(da,aa);return(yield Promise.all(da.map(function(){var oa=l._asyncToGenerator(function*(ra,Aa){const Ca=va?fa[Aa]:yield E(T,Z,ra,M,V),za=z(ca&&"class-breaks"===P.type?H(P,Aa):Z,Ca);return{value:ra,symbol:za,label:ya?Ba[Aa]:pa[Aa],size:Ca,outlineSize:ea}});return function(ra,Aa){return oa.apply(this,arguments)}}()))).reverse()}});return t.apply(this,arguments)}function d(P,T){P=null==P?void 0:P.authoringInfo;const F="univariate-color-size"===(null==P?void 0:P.type);let M=[12,30];if(F){const V=T[0],
aa=T[T.length-1];M=T.map(ka=>12+(ka-V)/(aa-V)*18)}F&&"below"===(null==P?void 0:P.univariateTheme)&&M.reverse();return M}function H(P,T){const F=P.classBreakInfos,M=F.length;T=2>M||!(2<=T)?F[0].symbol.clone():F[M-1].symbol.clone();P.visualVariables.some(V=>"color"===V.type)&&(T.type.includes("3d")?k(T):w(T));return T}function Q(P,T){return G.apply(this,arguments)}function G(){G=l._asyncToGenerator(function*(P,T){if("flow"===P.type)return L.getSymbolForFlowRenderer(P,T);if("pie-chart"===P.type){var F;
return new b({color:null,outline:null!=(F=P.outline)&&F.width?P.outline:new e})}let M=F=null;"simple"===P.type?F=P.symbol:"class-breaks"===P.type?(F=(P=P.classBreakInfos)&&P[0]&&P[0].symbol,M=1<P.length):"unique-value"===P.type&&(F=(P=P.uniqueValueInfos)&&P[0]&&P[0].symbol,M=1<P.length);if(!F||I(F))return null;F=F.clone();if(T||M)F.type.includes("3d")?k(F):w(F);return F});return G.apply(this,arguments)}function I(P){return P?m.isSymbol3D(P)?P.symbolLayers?P.symbolLayers.some(T=>T&&"fill"===T.type):
!1:P.type.includes("fill"):!1}function k(P){"line-3d"===P.type?P.symbolLayers.forEach(T=>{T.material={color:S}}):P.symbolLayers.forEach(T=>{"icon"!==T.type||T.resource&&T.resource.href?T.material={color:p}:(T.material={color:q},T.outline={color:S,size:1.5})})}function w(P){const T=f.isDarkTheme();if("cim"===P.type)y.applyCIMSymbolColor(P,new A(p));else if(P.type.includes("line"))P.color=S;else if(P.color=T?S:q,"simple-marker"===P.type)if(P.outline){var F,M;"#ffffff"===(null==(F=P.outline)?void 0:
null==(M=F.color)?void 0:M.toHex())&&(P.outline.color=S)}else P.outline={color:S,width:1.5}}function r(P,T,F,M){return a.apply(this,arguments)}function a(){a=l._asyncToGenerator(function*(P,T,F,M){const V=(yield new Promise((la,X)=>N(["../../../renderers/visualVariables/support/visualVariableUtils"],la,X))).getSizeRangeAtScale(P,F,M),aa=V&&c(V);if(V||aa){var ka=aa.map(la=>{{const X=V.minSize,Z=V.maxSize,da=P.minDataValue,ia=P.maxDataValue;let va=null;la=va=la<=X?da:la>=Z?ia:(la-X)/(Z-X)*(ia-da)+da}return la});
ka=D.round(ka);for(let la=1;la<ka.length-1;la++){const X=yield x(P,T,ka[la],ka[la-1],F,M);X&&(ka[la]=X[0],aa[la]=X[1])}return ka}});return a.apply(this,arguments)}function c(P){const T=P.minSize;P=(P.maxSize-T)/4;const F=[];for(let M=0;5>M;M++)F.push(T+P*M);return F}function x(P,T,F,M,V,aa){return O.apply(this,arguments)}function O(){O=l._asyncToGenerator(function*(P,T,F,M,V,aa){const ka=yield E(P,T,F,V,aa);M=yield E(P,T,M,V,aa);var la=D.numDigits(F),X=la.fractional,Z=la.integer;let da=la=null;0<
F&&1>F&&(la=10**X,F*=la,Z=D.numDigits(F).integer);for(X=Z-1;0<=X;X--){var ia=10**X;Z=Math.floor(F/ia)*ia;ia*=Math.ceil(F/ia);null!=la&&(Z/=la,ia/=la);let va=(Z+ia)/2;[,va]=D.round([Z,va,ia],{indexes:[1]});const ya=yield E(P,T,Z,V,aa),Ba=yield E(P,T,ia,V,aa),ca=yield E(P,T,va,V,aa),fa=D.percentChange(ka,ya,M,null),ea=D.percentChange(ka,Ba,M,null),pa=D.percentChange(ka,ca,M,null);let oa=20>=fa.previous,ra=20>=ea.previous;oa&&ra&&(fa.previous<=ea.previous?(oa=!0,ra=!1):(ra=!0,oa=!1));oa?da=[Z,ya]:ra?
da=[ia,Ba]:20>=pa.previous&&(da=[va,ca]);if(da)break}return da});return O.apply(this,arguments)}function E(P,T,F,M,V){return h.apply(this,arguments)}function h(){h=l._asyncToGenerator(function*(P,T,F,M,V){const {getSize:aa}=yield new Promise((ka,la)=>N(["../../../renderers/visualVariables/support/visualVariableUtils"],ka,la));return aa(P,F,{scale:M,view:V,shape:"simple-marker"===T.type?T.style:null})});return h.apply(this,arguments)}function z(P,T){P=P.clone();if(m.isSymbol3D(P))v.isVolumetricSymbol(P)||
P.symbolLayers.forEach(F=>{"fill"!==F.type&&(F.size=T)});else if("esri.symbols.SimpleMarkerSymbol"===P.declaredClass)P.size=T;else if("esri.symbols.PictureMarkerSymbol"===P.declaredClass){const F=P.width,M=P.height;P.height=T;P.width=F/M*T}else"esri.symbols.SimpleLineSymbol"===P.declaredClass?P.width=T:"esri.symbols.TextSymbol"===P.declaredClass&&P.font&&(P.font.size=T);return P}const q=[255,255,255],p=[200,200,200],S=[128,128,128];n.REAL_WORLD_MAX_SIZE=30;n.REAL_WORLD_MIN_SIZE=12;n.getRampStops=
function(P,T,F,M,V,aa){return t.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/smartMapping/support/utils":function(){define("exports ../../../Color ../../../core/maybe ../../../intl/date ../../../intl/number ../../../renderers/support/utils ../../../renderers/visualVariables/SizeVariable".split(" "),function(N,n,l,A,m,D,y){N.formatDateLabel=function(v){return A.formatDate(new Date(v),D.timelineDateFormatOptions)};N.formatNumberLabel=
function(v){const L=Math.floor(Math.log10(Math.abs(v)))+1;return m.formatNumber(v,{notation:1E6<=Math.abs(v)?"compact":"standard",minimumSignificantDigits:2,maximumSignificantDigits:4>L||6<L?4:L})};N.getDeviationValues=function(v,L,J){if(l.isNone(L)||l.isNone(v))return[];const f=[];for(let b=-1*J;b<=J;b++)0!==b&&f.push(L+b*v);return f};N.getDynamicPathForSizeStops=function(v){const {max:L,min:J,padding:f,pathHeight:b,pathWidth:e,stops:g}=v,t=L-J;let d=`M0 0 L${e} 0 `,H;v=3===g.length?[g[0],g[1],g[2]]:
[g[0],g[2],g[4]];const Q=Math.min.apply(Math,v.map(I=>I.size)),G=Math.max(Math.abs(v[0].size-v[1].size),Math.abs(v[2].size-v[1].size));v.reverse();v.forEach(({size:I,value:k},w)=>{k=Math.round(b-(k-J)/t*b);H=Math.round((I-Q)/G*100)/100*e;0===H&&(H=f*e);0===w&&(d+=`L${H} 0 `);d+=`L${H} ${k} `});return d+=`L${H} ${b} L0 ${b} L0 0 Z`};N.getFillFromColor=function(v){return v instanceof n?v.toCss(!0):n.fromString(v).toCss(!0)};N.getPathForSizeStops=function(v){const {bottomValue:L,bottomWidth:J,max:f,
min:b,pathHeight:e,pathWidth:g,topValue:t,topWidth:d}=v;v=d*g;const H=J*g,Q=f-b;return`M${v} 0 L${v} ${Math.round(e-(t-b)/Q*e)} L${H} ${Math.round(e-(L-b)/Q*e)} L${H} ${e} L0 ${e} L0 0 Z`};N.getSizesFromVariable=function(v){let L=v.maxSize;v=v.minSize;L instanceof y&&(L=L.stops[0].size);v instanceof y&&(v=v.stops[0].size);return[L,v]};N.getStopChanges=function(v,L,J){const f=J.length-1,b=J[0],e=J[f]-b,g=L-v,t=[];for(let d=1;d<f;d++)t.push({index:d,value:(J[d]-b)/e*g+v});t.unshift({index:0,value:v});
t.push({index:f,value:L});return t};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(N,n,l,A,m,
D,y,v,L,J,f){function b(k,w,r){m.getOrCreateMapValue(k,w,()=>[]).push(...r)}function e(){e=n._asyncToGenerator(function*(k){const w=new Map;if("visualVariables"in k&&k.visualVariables){var r=k.visualVariables.filter(x=>"color"===x.type);for(const x of r){r=x.field||x.valueExpression;const O=(yield J.getRampStops(x)).map(E=>E.color);b(w,r,O)}}if("heatmap"===k.type){var a=f.getHeatmapRampStops(k).map(x=>x.color);b(w,k.field,a)}else if("pie-chart"===k.type){for(const x of k.attributes)b(w,x.field,[x.color]);
b(w,null,[null==k?void 0:null==(a=k.othersCategory)?void 0:a.color,L.getColorFromSymbol(k.backgroundFillSymbol,null)])}else if("dot-density"===k.type){for(const x of k.attributes)b(w,x.field,[x.color]);b(w,null,[k.backgroundColor])}else if("unique-value"===k.type){var c;if("predominance"===(null==(c=k.authoringInfo)?void 0:c.type))for(const x of k.uniqueValueInfos)b(w,x.value.toString(),[L.getColorFromSymbol(x.symbol,null)]);else{a=k.uniqueValueInfos.map(z=>L.getColorFromSymbol(z.symbol,null));const {field:x,
field2:O,field3:E,valueExpression:h}=k;(x||h)&&b(w,x||h,a);O&&b(w,O,a);E&&b(w,E,a)}}else"class-breaks"===k.type?(a=k.classBreakInfos.map(x=>L.getColorFromSymbol(x.symbol,null)),b(w,k.field||k.valueExpression,a)):"simple"===k.type&&b(w,null,[L.getColorFromSymbol(k.symbol,null)]);"defaultSymbol"in k&&k.defaultSymbol&&b(w,null,[L.getColorFromSymbol(k.defaultSymbol,null)]);w.forEach((x,O)=>{x=l.unique(x.filter(Boolean),(E,h)=>JSON.stringify(E)===JSON.stringify(h));w.set(O,x)});return w});return e.apply(this,
arguments)}function g(k,w,r){let a="";0===w?a=Q.lt+" ":w===r&&(a=Q.gt+" ");return a+k}function t(k){let w=k.minValue,r=k.maxValue;const a=k.isFirstBreak?"":Q.gt+" ";k="percent-of-total"===k.normalizationType?Q.pct:"";w=null==w?"":y.format(w);r=null==r?"":y.format(r);return a+w+k+" "+Q.ld+" "+r+k}function d(k,w){return"normalizationField"in k&&k.normalizationField?{type:"normalized-field",field:k.field,normalizationField:k.normalizationField}:"field"in k&&k.field?{type:"field",field:k.field}:"valueExpression"in
k&&k.valueExpression?{type:"expression",expression:k.valueExpression,title:k.valueExpressionTitle,returnType:w}:null}const H=A.getLogger("esri.renderers.support.utils"),Q={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},G={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},I={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",
year:"year"};A=D.convertDateFormatToIntlOptions("short-date");N.calculateDateFormatInterval=function(k){k=k.map(x=>new Date(x));const w=k.length;let r=Infinity,a=null;for(let x=0;x<w-1;x++){const O=k[x];let E=Infinity,h=null;for(let z=x+1;z<w;z++){var c=k[z];c=O.getFullYear()!==c.getFullYear()&&"year"||O.getMonth()!==c.getMonth()&&"month"||O.getDate()!==c.getDate()&&"day"||O.getHours()!==c.getHours()&&"hour"||O.getMinutes()!==c.getMinutes()&&"minute"||O.getSeconds()!==c.getSeconds()&&"second"||"millisecond";
const q=G[c];q<E&&(E=q,h=c)}E<r&&(r=E,a=h)}return a};N.createClassBreakLabel=t;N.createColorStops=function(k){const {values:w,colors:r,labelIndexes:a,isDate:c,dateFormatOptions:x}=k;return w.map((O,E)=>{let h=null;if(!a||a.includes(E)){let z;(z=c?D.formatDate(O,x):y.format(O))&&(h=g(z,E,w.length-1))}return new v({value:O,color:r[E],label:h})})};N.createUniqueValueLabel=function(k){const {value:w,domain:r,fieldInfo:a,dateFormatInterval:c}=k;k=String(w);const x=r&&"codedValues"in r&&r.codedValues?r.getName(w):
null;x?k=x:"number"===typeof w&&(k=a&&"date"===a.type?D.formatDate(w,c&&D.convertDateFormatToIntlOptions(I[c])):y.format(w));return k};N.getAttribute=d;N.getAttributes=function(k,w){const r=[];if("class-breaks"===k.type||"heatmap"===k.type)r.push(d(k,"number"));else if("unique-value"===k.type){var a=k.authoringInfo;if(a&&"relationship"===a.type){if(a.field1&&a.field2){var c=a.field2.field;const x=a.field2.normalizationField;r.push(d({field:a.field1.field,normalizationField:a.field1.normalizationField}));
r.push(d({field:c,normalizationField:x}))}}else c=k.uniqueValueInfos[0],a=null,c&&c.value&&(c=typeof k.uniqueValueInfos[0].value,"string"===c||"number"===c)&&(a=c),r.push(d(k,a)),[k.field2,k.field3].forEach(x=>x&&r.push({type:"field",field:x}))}else"attributes"in k&&k.attributes.forEach(x=>r.push(d(x,"number")));(k=w?w(k):"visualVariables"in k?k.visualVariables:null)&&k.forEach(x=>r.push(d(x,"number")));return l.unique(r.filter(Boolean),(x,O)=>"field"===x.type&&"field"===O.type?x.field===O.field:
"normalized-field"===x.type&&"normalized-field"===O.type?x.field===O.field&&x.normalizationField===O.normalizationField:"expression"===x.type&&"expression"===O.type?x.expression===O.expression:!1)};N.getColorsFromRenderer=function(k){return e.apply(this,arguments)};N.setLabelsForClassBreaks=function(k){const w=k.classBreakInfos,r=k.normalizationType;let a=[];if(w&&w.length)if("standard-deviation"===k.classificationMethod)H.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(k.round){a.push(w[0].minValue);for(const c of w)a.push(c.maxValue);a=y.round(a);w.forEach((c,x)=>{c.label=t({minValue:0===x?a[0]:a[x],maxValue:a[x+1],isFirstBreak:0===x,normalizationType:r})})}else w.forEach((c,x)=>{c.label=t({minValue:c.minValue,maxValue:c.maxValue,isFirstBreak:0===x,normalizationType:r})})};N.timelineDateFormatOptions=A;N.updateClassBreak=function(k){if("standard-deviation"===k.classificationMethod)H.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");
else{var w=k.classBreaks,r=k.change,a=r.index;r=r.value;var c=w.length,x=-1,O=-1;0===a?x=a:a===c?O=a-1:(O=a-1,x=a);k=k.normalizationType;a=null;-1<x&&x<c&&(a=w[x],a.minValue=r,a.label=t({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===x,normalizationType:k}));-1<O&&O<c&&(a=w[O],a.maxValue=r,a.label=t({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===O,normalizationType:k}))}};N.updateColorStops=function(k){const {stops:w,changes:r,isDate:a,dateFormatOptions:c}=k,x=w.map(E=>E.value);
k=[];for(const E of r)k.push(E.index),x[E.index]=E.value;const O=y.round(x,{indexes:k});w.forEach((E,h)=>{E.value=x[h];if(null!=E.label){let z,q=null;(z=a?D.formatDate(O[h],c):y.format(O[h]))&&(q=g(z,h,w.length-1));E.label=q}})};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/Card":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/Handles ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../symbols/support/svgUtils ../../../symbols/support/utils ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/decorators/accessibleHandler ../../support/decorators/messageBundle ../../support/jsxFactory ../../support/widgetUtils ../../../intl/substitute".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q,G,I,k,w,r){var a;(function(x){x.Auto="auto";x.Stack="stack";x.SideBySide="side-by-side"})(a||(a={}));const c=window.devicePixelRatio;l=function(x){function O(h,z){h=x.call(this,h,z)||this;h._handles=new A;h._hasIndicators=!1;h._selectedSectionName=null;h._sectionNames=[];h._sectionMap=new Map;h.activeLayerInfos=null;h.headingLevel=3;h.layout=a.Stack;h.messages=null;h.messagesCommon=null;h.type="card";h.view=null;return h}N._inheritsLoose(O,x);var E=O.prototype;
E.initialize=function(){this.own(m.watch(()=>this.activeLayerInfos,h=>{this._handles.removeAll();this._watchForSectionChanges(h)}))};E.destroy=function(){this._handles.destroy();this._handles=null};E.render=function(){this._hasIndicators=this.layout===a.Auto&&768>=this.view.container.clientWidth||this.layout===a.Stack;var h=this.activeLayerInfos;h=h&&h.toArray().map(p=>this._renderLegendForLayer(p)).filter(p=>!!p);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||
(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const z=this._sectionNames.length;var q=this._sectionNames.map((p,S)=>{S=r.substitute(this.messagesCommon.pagination.pageText,{index:S+1,total:z});return k.tsx("div",{key:p,role:"tab",id:p,"aria-label":S,"aria-controls":`${p}-panel`,"aria-selected":(this._selectedSectionName===p).toString(),tabIndex:this._selectedSectionName===p?0:-1,title:S,onclick:this._selectSection,onkeydown:this._focusSection,
bind:this,class:this.classes("esri-legend--card__carousel-indicator",{["esri-legend--card__carousel-indicator--activated"]:this._selectedSectionName===p}),"data-section-name":p})});q=this._hasIndicators&&1<z?k.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation",role:"tablist"},q):null;h=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):h&&h.length?h:null;return k.tsx("div",{class:this.classes("esri-legend--card",{["esri-legend--stacked"]:this._hasIndicators})},
h?h:k.tsx("div",{class:"esri-legend--card__message"},this.messages.noLegend),q)};E._selectSection=function(h){if(h=h.target.getAttribute("data-section-name"))this._selectedSectionName=h};E._focusSection=function(h){switch(h.key){case "ArrowLeft":case "ArrowRight":this._switchSectionOnArrowPress(h);break;case "Enter":case " ":this._selectSection(h)}};E._switchSectionOnArrowPress=function(h){const z=h.key,q="ArrowLeft"===z?-1:1;h=h.target.getAttribute("data-section-name");h=this._sectionNames.indexOf(h);
const p=this._sectionNames;let S=null;-1!==h&&(p[h+q]?S=document.getElementById(p[h+q]):"ArrowLeft"===z?S=document.getElementById(p[p.length-1]):"ArrowRight"===z&&(S=document.getElementById(p[0])),S&&S.focus())};E._watchForSectionChanges=function(h){this._generateSectionNames();h&&(h.forEach(z=>{const q=`activeLayerInfo-${z.layer.uid}-version-change`;this._handles.remove(q);this._watchForSectionChanges(z.children);this._handles.add(m.watch(()=>z.version,()=>this._generateSectionNames()),q)}),this._handles.remove("activeLayerInfos-collection-change"),
this._handles.add(h.on("change",()=>this._watchForSectionChanges(h)),"activeLayerInfos-collection-change"))};E._generateSectionNames=function(){this._sectionNames.length=0;this._selectedSectionName=null;this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)};E._getSectionName=function(h,z,q){return`${this.id}${h.uid}-type-${z.type}-${q}`};E._generateSectionNamesForActiveLayerInfo=function(h){h.children.forEach(this._generateSectionNamesForActiveLayerInfo,
this);h.legendElements&&h.legendElements.forEach((z,q)=>{this._sectionNames.push(this._getSectionName(h.layer,z,q))})};E._renderLegendForLayer=function(h){if(!h.ready)return null;if(h.children.length){var z=h.children.map(q=>this._renderLegendForLayer(q)).toArray();return k.tsx("div",{key:h.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},k.tsx("div",{class:"esri-legend--card__service-caption-container"},h.title),z)}{if((z=h.legendElements)&&!z.length)return null;
const q=z.some(p=>"relationship-ramp"===p.type);z=z.map((p,S)=>this._renderLegendForElement(p,h,S,q)).filter(p=>!!p);return z.length?k.tsx("div",{key:h.layer.uid,class:this.classes("esri-legend--card__service",{["esri-legend--card__group-layer-child"]:!!h.parent})},k.tsx("div",{class:"esri-legend--card__service-caption-container"},k.tsx("div",{class:"esri-legend--card__service-caption-text"},h.title)),k.tsx("div",{class:"esri-legend--card__service-content"},z)):null}};E._renderLegendForElement=function(h,
z,q,p=!1){var S="color-ramp"===h.type,P="opacity-ramp"===h.type,T="size-ramp"===h.type;const F=z.layer;var M=null;"string"===typeof h.title?M=h.title:h.title&&(M=h.title,S=H.getTitle(this.messages,M,S||P),M=M.title?`${M.title} (${S})`:S);q=this._getSectionName(F,h,q);S=this._hasIndicators?k.tsx("div",null,k.tsx(Q.Heading,{level:this.headingLevel,class:"esri-legend--card__carousel-title"},z.title),k.tsx(Q.Heading,{level:Q.incrementHeadingLevel(this.headingLevel),class:"esri-legend--card__layer-caption"},
M)):M?k.tsx(Q.Heading,{level:this.headingLevel,class:"esri-legend--card__layer-caption"},M):null;M=z.effectList;P=null;"symbol-table"===h.type?(T=h.infos.map((V,aa)=>this._renderLegendForElementInfo(V,z,h.legendType,aa)).filter(V=>!!V),T.length&&(P=k.tsx("div",{class:this.classes({["esri-legend--card__label-container"]:!(T[0].properties.classes&&T[0].properties.classes["esri-legend--card__symbol-row"])&&!p,["esri-legend--card__relationship-label-container"]:p})},T))):"color-ramp"===h.type||"opacity-ramp"===
h.type||"heatmap-ramp"===h.type?P=this._renderLegendForRamp(h,F.opacity,M):T?P=this._renderSizeRamp(h,F.opacity):"pie-chart-ramp"===h.type?P=this._renderPieChartRamp(h):"relationship-ramp"===h.type?P=t.renderRelationshipRamp(h,this.id,F.opacity,M):"univariate-above-and-below-ramp"===h.type?P=this._renderUnivariateAboveAndBelowRamp(h,F.opacity,M):"univariate-color-size-ramp"===h.type&&(P=this._renderUnivariateColorSizeRamp(h,F.opacity,M));if(!P)return null;p=k.tsx("div",{key:q,class:"esri-legend--card__section",
id:`${q}-panel`,role:"tabpanel","aria-labelledby":q,tabIndex:0},[S,P]);this._sectionMap.set(q,p);return p};E._renderPieChartRamp=function(h){return k.tsx("div",{class:"esri-legend--card__pie-chart-ramp-preview",bind:h.preview,afterCreate:H.attachToNode})};E._renderUnivariateAboveAndBelowRamp=function(h,z,q){const {sizeRampElement:p,colorRampElement:S}=d.getUnivariateAboveAndBelowRampElements(h,z,"horizontal");if(!p)return null;h=d.getUnivariateSizeRampSize(p,"full",!0,"horizontal");var P=d.getUnivariateColorRampSize(p,
"above",!0,"horizontal"),T=d.getUnivariateColorRampSize(p,"below",!0,"horizontal");P=d.getUnivariateColorRampPreview(S,{width:P,height:12,rampAlignment:"horizontal",opacity:z,type:"above",effectList:q});z=d.getUnivariateColorRampPreview(S,{width:T,height:12,rampAlignment:"horizontal",opacity:z,type:"below",effectList:q});q=d.getUnivariateColorRampMargin(p,"card");T=p.infos.map(V=>V.label);const F=T.length-1;T=T.map((V,aa)=>0===aa||aa===F?k.tsx("div",{key:aa},V):null);const M={marginTop:"3px",display:"flex"};
w.isRTL(this.container)?M.marginRight=`${q}px`:M.marginLeft=`${q}px`;h={width:`${h}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},k.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},p.infos.map((V,aa)=>k.tsx("div",{key:aa,class:"esri-legend--card__symbol",
bind:V.preview,afterCreate:H.attachToNode}))),P?k.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:M,key:"color-ramp-preview"},k.tsx("div",{bind:P,afterCreate:H.attachToNode}),k.tsx("div",{bind:z,afterCreate:H.attachToNode})):null,k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},k.tsx("div",{class:"esri-legend__ramp-labels",styles:h},T)))};E._renderUnivariateColorSizeRamp=function(h,z,q){const {sizeRampElement:p,colorRampElement:S}=d.getUnivariateColorSizeRampElements(h,
"horizontal");if(!p)return null;h=d.getUnivariateSizeRampSize(p,"full",!1,"horizontal");var P=d.getUnivariateColorRampSize(p,"full",!1,"horizontal");z=d.getUnivariateColorRampPreview(S,{width:P,height:12,rampAlignment:"horizontal",opacity:z,type:"full",effectList:q});const T=d.getUnivariateColorRampMargin(p,"card"),F=p.infos.length-1;q=p.infos.map((M,V)=>0===V||V===F?k.tsx("div",{key:V},M.label):null);P={marginTop:"3px",display:"flex"};w.isRTL(this.container)?P.marginRight=`${T}px`:P.marginLeft=`${T}px`;
h={width:`${h}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},k.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},p.infos.map((M,V)=>k.tsx("div",{key:V,class:"esri-legend--card__symbol",bind:M.preview,afterCreate:H.attachToNode}))),k.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",
styles:P,key:"color-ramp-preview"},k.tsx("div",{bind:z,afterCreate:H.attachToNode})),k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},k.tsx("div",{class:"esri-legend__ramp-labels",styles:h},q)))};E._renderLegendForElementInfo=function(h,z,q,p){var S=z.layer;if(h.type)return this._renderLegendForElement(h,z,p);q=H.isImageryStretchedLegend(S,q);if(h.preview){var P;if(!h.symbol||!h.symbol.type.includes("simple-fill")){if(!h.label)return k.tsx("div",{key:p,bind:h.preview,afterCreate:H.attachToNode});
z={["esri-legend--card__symbol-cell"]:this._hasIndicators};return k.tsx("div",{key:p,class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__symbol-row"]:this._hasIndicators})},k.tsx("div",{class:this.classes(z),bind:h.preview,afterCreate:H.attachToNode}),k.tsx("div",{class:this.classes("esri-legend--card__image-label",{["esri-legend--card__label-cell"]:this._hasIndicators})},H.getTitle(this.messages,h.label,!1)||""))}let F=q=255,M=255,V=0,aa=255,ka=255,la=255,X=0;const Z=h.symbol.color&&
h.symbol.color.a,da=h.symbol.outline&&h.symbol.outline.color&&h.symbol.outline.color.a;Z&&(q=h.symbol.color.r,F=h.symbol.color.g,M=h.symbol.color.b,V=h.symbol.color.a*S.opacity);da&&(aa=h.symbol.outline.color.r,ka=h.symbol.outline.color.g,la=h.symbol.outline.color.b,X=h.symbol.outline.color.a*S.opacity);var T=(S=null!=(T=null==(P=h.symbol.color)?void 0:P.isBright)?T:!0)?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";z={background:Z?`rgba(${q}, ${F}, ${M}, ${V})`:"none",color:S?"black":"white",textShadow:`-1px -1px 0 ${T},\n                                              1px -1px 0 ${T},\n                                              -1px 1px 0 ${T},\n                                              1px 1px 0 ${T}`,
border:da?`1px solid rgba(${aa}, ${ka}, ${la}, ${X})`:"none",filter:e.getCSSFilterFromEffectList(z.effectList)};return k.tsx("div",{key:p,class:"esri-legend--card__layer-row"},k.tsx("div",{class:"esri-legend--card__label-element",styles:z}," ",h.label," "))}if(h.src)return z=this._renderImage(h,S,q),k.tsx("div",{key:p,class:"esri-legend--card__layer-row"},z,k.tsx("div",{class:"esri-legend--card__image-label"},h.label||""))};E._renderImage=function(h,z,q){const {label:p,src:S,opacity:P}=h;q={["esri-legend--card__imagery-layer-image--stretched"]:q,
["esri-legend--card__symbol"]:!q};z={opacity:`${null!=P?P:z.opacity}`};return k.tsx("img",{alt:H.getTitle(this.messages,p,!1),src:S,border:0,width:h.width,height:h.height,class:this.classes(q),styles:z})};E._renderSizeRampLines=function(h){h=h.infos;var z=h[0],q=h[h.length-1],p=z.symbol;h=this._hasIndicators;z=D.pt2px(z.size+z.outlineSize)*c;q=D.pt2px(q.size+q.outlineSize)*c;const S=h?z:z+50*c,P=h?z/2+50*c:z;var T;p?p.type.includes("3d")?(T=p.symbolLayers&&p.symbolLayers.length)?(T=p.symbolLayers.getItemAt(T-
1).get("resource.primitive"),T="triangle"===T||"cone"===T||"tetrahedron"===T):T=void 0:T="triangle"===p.style:T=void 0;if(p)if(p.type.includes("3d")){var F=p.symbolLayers&&p.symbolLayers.length;F?(p=p.symbolLayers.getItemAt(F-1),p=p.resource&&p.resource.primitive,p="circle"===p||"cross"===p||"kite"===p||"sphere"===p||"cube"===p||"diamond"===p):p=void 0}else p=p.style,p="circle"===p||"diamond"===p||"cross"===p;else p=void 0;F=document.createElement("canvas");F.width=S;F.height=P;F.style.width=`${F.width/
c}px`;F.style.height=`${F.height/c}px`;const M=F.getContext("2d");if(h){M.beginPath();var V=S/2-q/2;M.moveTo(0,0);M.lineTo(V,P);V=S/2+q/2;M.moveTo(S,0);M.lineTo(V,P)}else M.beginPath(),M.moveTo(0,P/2-q/2),M.lineTo(S,0),M.moveTo(0,P/2+q/2),M.lineTo(S,P);M.strokeStyle="#ddd";M.stroke();return k.tsx("div",{bind:F,afterCreate:H.attachToNode,styles:h?{display:"flex",marginTop:`-${T?0:p?z/2:0}px`,marginBottom:`-${T?q:p?q/2:0}px`}:{display:"flex",marginRight:`-${T?0:p?z/2:0}px`,marginLeft:`-${T?0:p?q/2:
0}px`}})};E._renderSizeRamp=function(h,z){var q=h.infos;const p=q[0].label,S=q[q.length-1].label;let P=q[0].preview;q=q[q.length-1].preview;const T=this._hasIndicators,F={"flex-direction":T?"column":"row-reverse"};P&&(P=P.cloneNode(!0),P.style.display="flex");q&&(q=q.cloneNode(!0),q.style.display="flex");z={opacity:null!=z?`${z}`:""};return k.tsx("div",{class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__size-ramp-row"]:T})},k.tsx("div",{class:"esri-legend--card__ramp-label"},
T?p:S),k.tsx("div",{class:"esri-legend--card__size-ramp-container",styles:F},k.tsx("div",{bind:P,afterCreate:H.attachToNode,class:"esri-legend--card__size-ramp-preview",styles:z}),this._renderSizeRampLines(h),k.tsx("div",{bind:q,afterCreate:H.attachToNode,class:"esri-legend--card__size-ramp-container",styles:z})),k.tsx("div",{class:"esri-legend--card__ramp-label"},T?S:p))};E._renderLegendForRamp=function(h,z,q){var p=h.infos;const S="heatmap-ramp"===h.type,P=p.length-1;var T=2<P&&!S?25*P:100,F=T+
20;const M=p.slice(0).reverse();M.forEach((ka,la)=>{ka.offset=S?ka.ratio:la/P});const V=M.length-1;h=(h=0!==M.length%2&&M[M.length/2|0])&&k.tsx("div",{class:"esri-legend--card__interval-separators-container"},k.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),k.tsx("div",{class:"esri-legend--card__ramp-label"},h.label));const aa=p[p.length-1].label;p=p[0].label;T=b.renderSVG([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:M[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,
y:0,width:T,height:25},fill:{type:"linear",x1:10,y1:0,x2:T+10,y2:0,colors:M},stroke:{width:0}},{shape:{type:"path",path:`M${T+10} 0 L${F} ${12.5} L${T+10} ${25} Z`},fill:M[V].color,stroke:{width:0}}]],F,25);({messages:F}=this);z={filter:e.getCSSFilterFromEffectList(q),opacity:null==z?null:`${z}`};return k.tsx("div",{class:"esri-legend--card__layer-row",styles:{justifyContent:"center"}},k.tsx("div",{class:"esri-legend--card__ramp-label"},S?F[aa]:aa),k.tsx("div",{class:"esri-legend--card__symbol-container"},
k.tsx("div",{styles:z},T),h),k.tsx("div",{class:"esri-legend--card__ramp-label"},S?F[p]:p))};return O}(g);n.__decorate([y.property()],l.prototype,"activeLayerInfos",void 0);n.__decorate([y.property()],l.prototype,"headingLevel",void 0);n.__decorate([y.property()],l.prototype,"layout",void 0);n.__decorate([y.property(),I.messageBundle("esri/widgets/Legend/t9n/Legend")],l.prototype,"messages",void 0);n.__decorate([y.property(),I.messageBundle("esri/t9n/common")],l.prototype,"messagesCommon",void 0);
n.__decorate([y.property({readOnly:!0})],l.prototype,"type",void 0);n.__decorate([y.property()],l.prototype,"view",void 0);n.__decorate([G.accessibleHandler()],l.prototype,"_selectSection",null);return l=n.__decorate([f.subclass("esri.widgets.Legend.styles.Card")],l)})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports","../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(N,
n,l,A,m){function D(L,J,f){const b=`${f}_arrowStart`;f=`${f}_arrowEnd`;L="left"===L;const e={markerStart:null,markerEnd:null};switch(J){case "HL":L?e.markerStart=`url(#${f})`:e.markerEnd=`url(#${b})`;break;case "LL":e.markerStart=`url(#${f})`;break;case "LH":L?e.markerEnd=`url(#${b})`:e.markerStart=`url(#${f})`;break;default:e.markerEnd=`url(#${b})`}return e}function y(L,J,f,b,e=60){const {focus:g,numClasses:t,colors:d,rotation:H}=L;L=!!g;const Q=Math.sqrt(e**2+e**2)+(L?0:5),G=[],I=[];var k=[],w=
(e||75)/t;for(var r=0;r<t;r++){var a=r*w;for(var c=0;c<t;c++){var x=c*w;const O=n.generateFillAttributes(d[r][c]),E=n.generateStrokeAttributes(null);x={type:"rect",x,y:a,width:w,height:w};G.push(n.renderDef(O));I.push(n.renderShape(x,O.fill,E,null));k.push(n.getBoundingBox(x))}}w=null;L||(w="margin: -15px -15px -18px -15px");r=D("left",g,J);a=D("right",g,J);c=n.computeBBox(k);k=n.getTransformMatrix(c,Q,Q,0,!1,H,!1);c=n.getTransformMatrix(c,Q,Q,0,!1,L?-45:null,!1);f={filter:l.getCSSFilterFromEffectList(b),
opacity:null==f?null:`${f}`};return m.tsx("div",{styles:f,class:L?v.diamondMidColRamp:v.squareTableCell},m.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:Q,height:Q,style:w},m.tsx("defs",null,m.tsx("marker",{id:`${J}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},m.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),m.tsx("marker",{id:`${J}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",
markerUnits:"strokeWidth",orient:"auto"},m.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),G),m.tsx("g",{transform:k},I),m.tsx("g",{transform:c},m.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":r.markerStart,"marker-end":r.markerEnd,x1:-10,y1:e-15,x2:-10,y2:15}),m.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":a.markerStart,"marker-end":a.markerEnd,x1:15,y1:e+10,x2:e-15,y2:e+10}))))}const v={diamondContainer:"esri-relationship-ramp--diamond__container",
diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",
squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};N.renderRelationshipRamp=function(L,J,f,b){const {focus:e,labels:g}=L,t=!!e;L=y(L,J,f,b);J={justifyContent:"center"};
f=A.isRTL();return t?m.tsx("div",{class:v.diamondContainer,styles:J},m.tsx("div",{class:v.diamondLeftCol},f?g.right:g.left),m.tsx("div",{class:v.diamondMidCol},m.tsx("div",{class:v.diamondMidColLabel},g.top),L,m.tsx("div",{class:v.diamondMidColLabel},g.bottom)),m.tsx("div",{class:v.diamondRightCol},f?g.left:g.right)):m.tsx("div",{class:v.squareTable},m.tsx("div",{class:v.squareTableRow},m.tsx("div",{class:A.classes(v.squareTableCell,v.squareTableLabel,v.squareTableLabelRightBottom)},f?g.top:g.left),
m.tsx("div",{class:v.squareTableCell}),m.tsx("div",{class:A.classes(v.squareTableCell,v.squareTableLabel,v.squareTableLabelLeftBottom)},f?g.left:g.top)),m.tsx("div",{class:v.squareTableRow},m.tsx("div",{class:v.squareTableCell}),L,m.tsx("div",{class:v.squareTableCell})),m.tsx("div",{class:v.squareTableRow},m.tsx("div",{class:A.classes(v.squareTableCell,v.squareTableLabel,v.squareTableLabelRightTop)},f?g.right:g.bottom),m.tsx("div",{class:v.squareTableCell}),m.tsx("div",{class:A.classes(v.squareTableCell,
v.squareTableLabel,v.squareTableLabelLeftTop)},f?g.bottom:g.right)))};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/support/univariateUtils":function(){define("exports ../../../../core/screenUtils ../../../../libs/maquette/projection ../../../../libs/maquette/projector ../../../../symbols/support/symbolUtils ../../../support/widgetUtils ../../../support/jsxFactory".split(" "),function(N,n,l,A,m,D,y){function v(g="vertical"){return"vertical"===
g?y.tsx("svg",{height:"4",width:"10"},y.tsx("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:"stroke:rgb(200, 200, 200);stroke-width:1"})):y.tsx("svg",{height:"10",width:"10"},y.tsx("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:"stroke:rgb(200, 200, 200);stroke-width:1"}))}function L(g,t="vertical"){const d=document.createElement("div");d.style.height="20px";d.className=e.univariateAboveAndBelowSymbol;null!=g&&(d.style.opacity=g.toString());b.append(d,v.bind(null,t));return d}function J(g,t,d="vertical",H){g.infos.forEach((Q,
G)=>{if(H&&2===G)Q.preview=L(t,d);else{G=n.pt2px(Q.size)+("horizontal"===d?20:10);const I="div"===Q.preview.tagName.toLowerCase(),k=I?Q.preview:document.createElement("div");k.className=e.univariateAboveAndBelowSymbol;"horizontal"===d?k.style.width=`${G}px`:k.style.height=`${G}px`;I||k.appendChild(Q.preview);Q.preview=k}})}function f(g,t,d,H="vertical"){let Q=0;g=g.infos;const G=Math.floor(g.length/2);var I="full"===t||"above"===t?0:G;for(t="full"===t||"below"===t?g.length-1:G;I<=t;I++)if(d&&I===
G)Q+="horizontal"===H?10:20;else{const k=n.pt2px(g[I].size)+("horizontal"===H?20:10);Q+=k}return Math.round(Q)}const b=A.createProjector(),e={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};N.getUnivariateAboveAndBelowRampElements=function(g,t,d="vertical"){var H=g.infos;g=H.find(({type:I})=>"size-ramp"===I);H=H.find(({type:I})=>"color-ramp"===I);g&&(g={...g},g.infos=[...g.infos],J(g,t,d,!0));H&&(H={...H},H.infos=[...H.infos]);if("horizontal"===
d){var Q,G;null==(Q=g)?void 0:Q.infos.reverse();null==(G=H)?void 0:G.infos.reverse()}return{sizeRampElement:g,colorRampElement:H}};N.getUnivariateColorRampMargin=function(g,t="classic"){g=g.infos;return"classic"===t?(n.pt2px(g[0].size)+10)/2:(n.pt2px(g[0].size)-n.pt2px(g[g.length-1].size))/2};N.getUnivariateColorRampPreview=function(g,t){if(!g)return null;g=g.infos.map(d=>d.color);g=m.renderColorRampPreviewHTML("full"===t.type?g:"above"===t.type?g.slice(0,3):g.slice(2,5),{width:t.width,height:t.height,
align:t.rampAlignment,effectList:t.effectList});g.className=e.colorRamp;null!=t.opacity&&(g.style.opacity=t.opacity.toString());return g};N.getUnivariateColorRampSize=function(g,t,d,H="vertical"){const Q=f(g,t,d,H);g=g.infos;var G=Math.floor(g.length/2);const I="full"===t||"above"===t?0:G;G="full"===t||"below"===t?g.length-1:G;d=d?"vertical"===H?20:10:0;H="vertical"===H?10*("full"===t?2:1):20*("full"===t?2:1);return Math.round(Q-(n.pt2px("full"===t?g[I].size+g[G].size:"above"===t?g[I].size:g[G].size)/
2+d/2+H/2))};N.getUnivariateColorSizeRampElements=function(g,t="vertical"){var d=g.infos;g=d.find(({type:G})=>"size-ramp"===G);d=d.find(({type:G})=>"color-ramp"===G);g&&(g={...g},g.infos=[...g.infos],J(g,null,t,!1));d&&(d={...d},d.infos=[...d.infos]);if("horizontal"===t){var H,Q;null==(H=g)?void 0:H.infos.reverse();null==(Q=d)?void 0:Q.infos.reverse()}return{sizeRampElement:g,colorRampElement:d}};N.getUnivariateSizeRampSize=f;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/styleUtils":function(){define(["exports","../../../intl","../../../intl/substitute"],function(N,n,l){N.attachToNode=function(A){A.appendChild(this)};N.getTitle=function(A,m,D){if(m){if("string"===typeof m||"number"===typeof m)return m;if("value"in m||"unit"in m)return l.substitute(A.dotValue,m);if("colorName"in m||"bandName"in m)return A[m.colorName]+": "+(A[m.bandName]||m.bandName);if("showCount"in m)return m.showCount?A.clusterCountTitle:null;var y=null;D?y=m.ratioPercentTotal?
"showRatioPercentTotal":m.ratioPercent?"showRatioPercent":m.ratio?"showRatio":m.normField?"showNormField":m.field?"showField":null:D||(y=m.normField?"showNormField":m.normByPct?"showNormPct":m.field?"showField":null);return y?l.substitute("showField"===y?"{field}":A[y],{field:m.field,normField:m.normField}):null}};N.isImageryStretchedLegend=function(A,m){return!!(m&&"Stretched"===m&&10.3<=A.version&&"esri.layers.ImageryLayer"===A.declaredClass)};N.isRendererTitle=function(A,m){return!m};Object.defineProperties(N,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],function(N,n,l,A){const m={heading:"esri-widget__heading"};N.CSS=m;N.Heading=function(D,y){const v=n.clamp(Math.ceil(D.level),1,6),L=`h${v}`;delete D.level;return A.tsx(L,{...D,class:l.classes(m.heading,D.class),role:"heading","aria-level":String(v)},y)};N.incrementHeadingLevel=function(D,y=1){return n.clamp(Math.ceil(D+
y),1,6)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/Classic":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/widgetUtils ../../support/decorators/messageBundle ../../support/jsxFactory ../../../intl/number".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H){const Q={display:"flex",alignItems:"flex-start"},G={marginLeft:"3px"},I={display:"table-cell",verticalAlign:"middle"};l=function(k){function w(a,c){a=k.call(this,a,c)||this;a.activeLayerInfos=null;a.headingLevel=3;a.messages=null;a.type="classic";return a}N._inheritsLoose(w,k);var r=w.prototype;r.render=function(){var a=this.activeLayerInfos;a=a&&a.toArray().map(c=>this._renderLegendForLayer(c)).filter(c=>!!c);return d.tsx("div",null,a&&a.length?a:d.tsx("div",
{class:"esri-legend__message"},this.messages.noLegend))};r._renderLegendForLayer=function(a){if(!a.ready)return null;var c=!!a.children.length;const x=`${"esri-legend__"}${a.layer.uid}-version-${a.version}`,O=a.title?e.Heading({level:this.headingLevel,class:this.classes("esri-widget__heading","esri-legend__service-label")},a.title):null;if(c)return c=a.children.map(E=>this._renderLegendForLayer(E)).toArray(),d.tsx("div",{key:x,class:this.classes("esri-legend__service","esri-legend__group-layer")},
O,c);if((c=a.legendElements)&&!c.length)return null;c=c.map(E=>this._renderLegendForElement(E,a.layer,a.effectList)).filter(E=>!!E);return c.length?d.tsx("div",{key:x,class:this.classes("esri-legend__service",{["esri-legend__group-layer-child"]:!!a.parent}),tabIndex:0},O,d.tsx("div",{class:"esri-legend__layer"},c)):null};r._renderLegendForElement=function(a,c,x,O){var E="color-ramp"===a.type,h="opacity-ramp"===a.type;const z="size-ramp"===a.type;let q=null;if("symbol-table"===a.type||z){var p=a.infos.map(P=>
this._renderLegendForElementInfo(P,c,x,z,a.legendType)).filter(P=>!!P);p.length&&(q=d.tsx("div",{class:"esri-legend__layer-body"},p))}else"color-ramp"===a.type||"opacity-ramp"===a.type||"heatmap-ramp"===a.type||"stretch-ramp"===a.type?q=this._renderLegendForRamp(a,c.opacity):"relationship-ramp"===a.type?q=J.renderRelationshipRamp(a,this.id,c.opacity,x):"pie-chart-ramp"===a.type?q=this._renderPieChartRamp(a):"univariate-above-and-below-ramp"===a.type?q=this._renderUnivariateAboveAndBelowRamp(a,c.opacity,
x):"univariate-color-size-ramp"===a.type&&(q=this._renderUnivariateColorSizeRamp(a,c.opacity,x));if(!q)return null;p=a.title;var S=null;"string"===typeof p?S=p:p&&(S=b.getTitle(this.messages,p,E||h),S=b.isRendererTitle(p,E||h)&&p.title?`${p.title} (${S})`:S);E=O?"esri-legend__layer-child-table":"esri-legend__layer-table";h=S?d.tsx("div",{class:"esri-legend__layer-caption"},S):null;return d.tsx("div",{class:this.classes(E,{["esri-legend__layer-table--size-ramp"]:z||!O})},h,q)};r._renderPieChartRamp=
function(a){return d.tsx("div",{bind:a.preview,afterCreate:b.attachToNode})};r._renderUnivariateAboveAndBelowRamp=function(a,c,x){const {sizeRampElement:O,colorRampElement:E}=f.getUnivariateAboveAndBelowRampElements(a,c);if(!O)return null;var h=f.getUnivariateColorRampSize(O,"above",!0);a=f.getUnivariateColorRampSize(O,"below",!0);const z=f.getUnivariateColorRampPreview(E,{width:12,height:h,rampAlignment:"vertical",opacity:c,type:"above",effectList:x});c=f.getUnivariateColorRampPreview(E,{width:12,
height:a,rampAlignment:"vertical",opacity:c,type:"below",effectList:x});var q=f.getUnivariateColorRampMargin(O);const p=O.infos.map(M=>M.label);x=p.map((M,V)=>{const aa=2===V;return 0===V?d.tsx("div",{key:V,class:M?z?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},M):aa?d.tsx("div",null):null});const S=p.length-1,P=Math.floor(p.length/2),T=p.map((M,V)=>{const aa=V===S;return V===P||aa?d.tsx("div",{key:V,class:M?z?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":
null},M):null}),F={display:"table-cell",verticalAlign:"middle"};q={marginTop:`${q}px`};h={height:`${h}px`};a={height:`${a}px`};return d.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:Q},d.tsx("div",{class:"esri-legend__layer-body"},O.infos.map((M,V)=>d.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},d.tsx("div",{class:"esri-legend__symbol",styles:F,bind:M.preview,afterCreate:b.attachToNode}),z||0!==V%2?null:d.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},
p[V])))),z?d.tsx("div",{styles:q,key:"color-ramp-preview"},d.tsx("div",{styles:G},d.tsx("div",{styles:I},d.tsx("div",{class:"esri-legend__ramps",bind:z,afterCreate:b.attachToNode})),d.tsx("div",{styles:I},d.tsx("div",{class:"esri-legend__ramp-labels",styles:h},x))),d.tsx("div",{styles:G},d.tsx("div",{styles:I},d.tsx("div",{class:"esri-legend__ramps",bind:c,afterCreate:b.attachToNode})),d.tsx("div",{styles:I},d.tsx("div",{class:"esri-legend__ramp-labels",styles:a},T)))):null)};r._renderUnivariateColorSizeRamp=
function(a,c,x){const {sizeRampElement:O,colorRampElement:E}=f.getUnivariateColorSizeRampElements(a);if(!O)return null;var h=f.getUnivariateColorRampMargin(O);a=f.getUnivariateColorRampSize(O,"full",!1);c=f.getUnivariateColorRampPreview(E,{width:12,height:a,rampAlignment:"vertical",opacity:c,type:"full",effectList:x});const z=O.infos.length-1;x=O.infos.map((p,S)=>0===S||S===z?d.tsx("div",{key:S,class:p.label?E?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},p.label):
null);const q={display:"table-cell",verticalAlign:"middle"};h={marginTop:`${h}px`};a={height:`${a}px`};return d.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:Q},d.tsx("div",{class:"esri-legend__layer-body"},O.infos.map(p=>d.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},d.tsx("div",{class:"esri-legend__symbol",styles:q,bind:p.preview,afterCreate:b.attachToNode})))),d.tsx("div",{styles:h,key:"color-ramp-preview"},d.tsx("div",{styles:G},d.tsx("div",
{styles:I},d.tsx("div",{class:"esri-legend__ramps",bind:c,afterCreate:b.attachToNode})),d.tsx("div",{styles:I},d.tsx("div",{class:"esri-legend__ramp-labels",styles:a},x)))))};r._renderLegendForRamp=function(a,c){const x=a.infos,O="heatmap-ramp"===a.type,E="stretch-ramp"===a.type,h=a.preview;h.className=`${"esri-legend__color-ramp"} ${"opacity-ramp"===a.type?"esri-legend__opacity-ramp":""}`;null!=c&&(h.style.opacity=c.toString());a=x.map(z=>d.tsx("div",{class:z.label?"esri-legend__ramp-label":null},
O?this.messages[z.label]||z.label:E?this._getStretchStopLabel(z):z.label));c={height:h.style.height};return d.tsx("div",{class:"esri-legend__layer-row"},d.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--symbols",styles:{width:"24px"}},d.tsx("div",{class:"esri-legend__ramps",bind:h,afterCreate:b.attachToNode})),d.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},d.tsx("div",{class:"esri-legend__ramp-labels",styles:c},a)))};r._getStretchStopLabel=function(a){return a.label?
this.messages[a.label]+": "+("string"===typeof a.value?a.value:H.formatNumber(a.value,{style:"decimal",notation:a.value.toString().includes("e")?"scientific":"standard"})):""};r._renderLegendForElementInfo=function(a,c,x,O,E){if(a.type)return this._renderLegendForElement(a,c,x,!0);x=null;E=b.isImageryStretchedLegend(c,E);a.preview?x=d.tsx("div",{class:"esri-legend__symbol",bind:a.preview,afterCreate:b.attachToNode}):a.src&&(x=this._renderImage(a,c,E));if(!x)return null;c={["esri-legend__imagery-layer-info--stretched"]:E};
return d.tsx("div",{class:"esri-legend__layer-row"},d.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--symbols",{["esri-legend__imagery-layer-info--stretched"]:E,["esri-legend__size-ramp"]:!E&&O})},x),d.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--info",c)},b.getTitle(this.messages,a.label,!1)||""))};r._renderImage=function(a,c,x){const {label:O,src:E,opacity:h}=a;x={["esri-legend__imagery-layer-image--stretched"]:x,["esri-legend__symbol"]:!x};
c={opacity:`${null!=h?h:c.opacity}`};return d.tsx("img",{alt:b.getTitle(this.messages,O,!1),src:E,border:0,width:a.width,height:a.height,class:this.classes(x),styles:c})};return w}(L);n.__decorate([A.property()],l.prototype,"activeLayerInfos",void 0);n.__decorate([A.property()],l.prototype,"headingLevel",void 0);n.__decorate([A.property(),t.messageBundle("esri/widgets/Legend/t9n/Legend")],l.prototype,"messages",void 0);n.__decorate([A.property({readOnly:!0})],l.prototype,"type",void 0);return l=n.__decorate([v.subclass("esri.widgets.Legend.styles.Classic")],
l)})},"app/utils/topic":function(){define(["require","exports","tslib","esri/core/Evented"],function(N,n,l,A){Object.defineProperty(n,"__esModule",{value:!0});A=l.__importDefault(A);N=function(){function m(){}m.publish=function(D,y){return this.hub.emit.apply(this.hub,arguments)};m.subscribe=function(D,y){return this.hub.on.apply(this.hub,arguments)};m.hub=new A.default;return m}();n.default=N})},"app/utils/appUtils":function(){define(["require","exports"],function(N,n){Object.defineProperty(n,"__esModule",
{value:!0});n.clamp=n.isRTL=n.find=n.isNodeVisible=n.toggleNode=n.hideNode=n.showNode=n.parseUrl=n.concatUnique=n.filterOut=n.includes=n.objectToArray=n.stripStringTags=n.urlToObject=void 0;n.urlToObject=function(){var l=this,A={};(window.location.search||"?").substr(1).replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(m,D,y){A[D]=l.stripStringTags(decodeURIComponent(y));return""});return A};n.stripStringTags=function(l){return l.replace(/<\/?[^>]+>/g,"")};n.objectToArray=function(l){return Object.keys(l).map(function(A){return l[A]})};
n.includes=function(l,A){return-1<l.indexOf(A)};n.filterOut=function(l,A){return l.filter(function(m){return-1===A.indexOf(m)})};n.concatUnique=function(l,A){var m=[].concat(l||[]);A.forEach(function(D){D&&-1===m.indexOf(D)&&m.push(D)});return m};n.parseUrl=function(l){var A=document.createElement("a");A.href=l;for(var m=A.protocol.replace(":",""),D=A.hostname||window.location.host,y=A.port,v=A.search,L={},J=A.search.replace(/^\?/,"").split("\x26"),f=J.length,b=0,e;b<f;b++)J[b]&&(e=J[b].split("\x3d"),
L[e[0]]=e[1]);return{source:l,protocol:m,host:D,port:y,query:v,params:L,file:(A.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:A.hash.replace("#",""),path:A.pathname.replace(/^([^\/])/,"/$1"),relative:(A.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:A.pathname.replace(/^\//,"").split("/")}};n.showNode=function(l){(l="string"===typeof l?document.querySelector(l):l)&&l.classList.remove("hide")};n.hideNode=function(l){(l="string"===typeof l?document.querySelector(l):l)&&l.classList.add("hide")};
n.toggleNode=function(l){this[l&&l.classList.contains("hide")?"showNode":"hideNode"](l)};n.isNodeVisible=function(l){return l&&l.classList.contains("hide")?!1:!0};n.find=function(l,A){for(var m,D=0;D<l.length;D++)if(m=l[D],A(m))return m;return null};n.isRTL=function(){return"rtl"===document.getElementsByTagName("html")[0].getAttribute("dir")};n.clamp=function(l,A,m){return Math.min(Math.max(l,A),m)}})},"app/utils/layerUtils":function(){define(["require","exports","tslib","esri/request","esri/layers/support/arcgisLayerUrl"],
function(N,n,l,A,m){function D(f,b){return(f.supportedSpatialReferences||[]).find(function(e){return e.equals(b)})?!0:!1}function y(f){var b=f.layers,e=f.popupTemplate;f.popupEnabled&&!e&&f.createPopupTemplate&&(f.popupTemplate=f.createPopupTemplate());(null===b||void 0===b?0:b.length)&&b.forEach(function(g){return y(g)})}function v(f){var b,e,g={geojson:1,csv:1},t=(null===f||void 0===f?void 0:f.layer)||f;t=t&&t.url&&"Feature Layer"===(null===(b=null===t||void 0===t?void 0:t.sourceJSON)||void 0===
b?void 0:b.type);b=null===f||void 0===f?void 0:f.isTable;var d=(null===(e=null===f||void 0===f?void 0:f.layer)||void 0===e?void 0:e.type)||(null===f||void 0===f?void 0:f.type);return f.url&&d in g||t||b}function L(f){return(f=(f&&f.layer||f).type)&&("map-layer"===f||"map-image"===f||"tile"===f)}function J(f){return f&&f.get&&f.get("capabilities.exportMap.supportsDynamicLayers")||!1}Object.defineProperty(n,"__esModule",{value:!0});n.isSupportedChartsLayer=n.fetchUpdates=n.isImageryLayerRF=n.isImageryLayer=
n.isMapImageLayer=n.supportsData=n.supportsExportTiles=n.supportsEditing=n.supportsModification=n.supportsExportMap=n.supportsQuery=n.isTilesOnly=n.hasLiveData=n.canCluster=n.isTrackViewLayer=n.isBasemapLayer=n.isLikeFeatureLayer=n.isDynamicLayer=n.getCacheMaxAge=n.checkPopup=n.checkWMTSSpatialReferences=n.isSameSpatialReference=void 0;A=l.__importDefault(A);m=l.__importStar(m);n.isSameSpatialReference=function(f,b){var e=(f||{}).tileInfo,g={};return"wmts"===f.type&&D(f,b)?!0:!(f.type in g)&&b&&(null===
e||void 0===e?0:e.spatialReference)?b.equals(e.spatialReference):"map-image"!==f.type&&"imagery"!==f.type&&"wmts"!==f.type||!f.spatialReference?!0:b.equals(f.spatialReference)};n.checkWMTSSpatialReferences=D;n.checkPopup=y;n.getCacheMaxAge=function(f){var b=f.sourceJSON,e=f.portalItem;f=null===e||void 0===e?void 0:e.isHostedService;e=(null===e||void 0===e?void 0:e.advancedSettings)||{};b=(b=(null===b||void 0===b?void 0:b.cacheMaxAge)||(null===e||void 0===e?void 0:e.cacheMaxAge))?parseInt(b):f?30:
6;return Math.ceil(b/60*100)/100};n.isDynamicLayer=function(f){var b=f&&f.layer;return L(f)?b?J(b):J(f):!1};n.isLikeFeatureLayer=v;n.isBasemapLayer=function(f,b){b=b.basemap;return b.baseLayers.concat(b.referenceLayers).flatten(function(e){return(null===e||void 0===e?void 0:e.allSublayers)||(null===e||void 0===e?void 0:e.sublayers)||(null===e||void 0===e?void 0:e.layers)}).includes(f)};n.isTrackViewLayer=function(f){return(f=f.portalItem)&&((null===f||void 0===f?void 0:f.typeKeywords)||[]).find(function(b){return"Location Tracking Service"===
b})||!1};n.canCluster=function(f){var b=f.geometryType,e=f.type,g=f.renderer;g=g&&g.type;return!("feature"===e&&!f.url)&&"point"===b&&"stream"!==e&&"heatmap"!==g&&"pie-chart"!==g};n.hasLiveData=function(f){var b;return(null===(b=null===f||void 0===f?void 0:f.timeInfo)||void 0===b?0:b.hasLiveData)?!0:!1};n.isTilesOnly=function(f){var b;f=f.sourceJSON;return-1<(null===(b=null===f||void 0===f?void 0:f.capabilities)||void 0===b?void 0:b.toLowerCase().split(",").map(function(e){return e.trim()}).indexOf("tilesonly"))||
!1};n.supportsQuery=function(f){return(f=f&&f.layer||f)&&(f&&f.get&&f.get("capabilities.operations.supportsQuery")||!1)};n.supportsExportMap=function(f){return f&&(f&&f.get&&f.get("capabilities.operations.supportsExportMap")||!1)};n.supportsModification=function(f){return f&&(f&&f.get?f.get("capabilities.exportMap.supportsModification"):!0)};n.supportsEditing=function(f){return f&&(f&&f.get&&f.get("capabilities.operations.supportsEditing")||!1)};n.supportsExportTiles=function(f){return f&&f.get&&
f.get("capabilities.exportTiles")||!1};n.supportsData=function(f){return f&&f.get&&f.get("capabilities.operations.supportsIdentify")||!1};n.isMapImageLayer=L;n.isImageryLayer=function(f){var b={imagery:1,"imagery-tile":1};return(f=(f&&f.layer||f).type)&&f in b};n.isImageryLayerRF=function(f){var b={imagery:1};return(f=(f&&f.layer||f).type)&&f in b};n.fetchUpdates=function(f){return A.default(f.url,{responseType:"json",query:{returnUpdates:!0,f:"json"}}).then(function(b){return b.data})};n.isSupportedChartsLayer=
function(f){var b,e,g,t,d,H,Q,G=(null===(b=null===f||void 0===f?void 0:f.layer)||void 0===b?void 0:b.type)||(null===f||void 0===f?void 0:f.type);G=f.url&&"csv"===G;b=!0===(null===(g=null===(e=f.portalItem)||void 0===e?void 0:e.typeKeywords)||void 0===g?void 0:g.includes("Location Tracking Service"));g=void 0!==f.url&&!0===m.isHostedAgolService(f.url);e=!!g&&void 0===(null===(t=null===f||void 0===f?void 0:f.sourceJSON)||void 0===t?void 0:t.sqlParserVersion)&&10.91<=f.version;t=g&&void 0===(null===
(d=null===f||void 0===f?void 0:f.sourceJSON)||void 0===d?void 0:d.sqlParserVersion)||10.91<=f.version&&!0===(null===(Q=null===(H=null===f||void 0===f?void 0:f.sourceJSON)||void 0===H?void 0:H.sqlParserVersion)||void 0===Q?void 0:Q.includes("PG_"));d=v(f)&&!G&&(t||e);return void 0!==f&&d&&!b}})},"app/utils/debounce":function(){define(["require","exports"],function(N,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(l,A,m){var D;return function(){var y=this,v=arguments,L=m&&!D;
clearTimeout(D);D=setTimeout(function(){D=null;m||l.apply(y,v)},A);L&&l.apply(y,v)}}})},"app/utils/mapUtils/canSaveLayer":function(){define(["require","exports","tslib","../../portal/Role"],function(N,n,l,A){function m(y){var v=y.user,L=!1;v&&(y=y.urlKey&&y.customBaseUrl||y.isPortal?!0:!1,v=new A.default({portalUser:v}),L=!y||v.canCreateItem());return L}function D(y){var v=y.owner,L=y.itemControl,J=y.portal.user;v=J&&v===J.username;if(J){if(!(J=v)){J=!1;J=y.owner;var f=y.portal;y=(y=y.itemControl)&&
-1<y.indexOf("admin");var b=["esri_livingatlas","esri_demographics","esri_boundaries"];J=f.isPortal&&v&&y&&-1<J.indexOf("esri_")&&!b.indexOf(J)?!1:!!y}v=J}else v=!1;return v||L&&-1<L.indexOf("update")}Object.defineProperty(n,"__esModule",{value:!0});n.canSaveLayer=void 0;A=l.__importDefault(A);n.canSaveLayer=function(y,v){var L=y.portalItem,J=y.type,f={save:!1,saveas:!1},b="route"===J;"feature"===J&&!y.url||"feature"!==J?b&&(y=y.routeInfo,f.save=y&&L&&D(L),f.saveas=y&&m(v)):(f.save=L&&D(L),f.saveas=
m(v));return f}})},"app/portal/Role":function(){define(["require","exports","tslib","esri/core/accessorSupport/decorators","./LevelAware"],function(N,n,l,A,m){Object.defineProperty(n,"__esModule",{value:!0});m=l.__importDefault(m);N=function(D){function y(v){var L=D.call(this)||this;L.id=null;L.baseRole=null;L.name=null;L.description=null;L.privileges=[];L.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,
deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishServerServices:!1,publishServerGPServices:!1,
registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,createItem:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},
publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};v=v||{};var J=v.portalUser;J?(L.id=J.roleId?J.roleId:J.role,L.baseRole=J.role,L.setPrivileges(J.privileges)):(L.id=v.id,L.baseRole=v.role,L.name=v.name,L.description=v.description,v.privileges&&L.setPrivileges(v.privileges));return L}l.__extends(y,D);y.prototype.isViewer=function(){return this.id&&this.id===
this.SYSTEM_ROLES.VIEWER};y.prototype.isUser=function(){return this.id&&("org_user"===this.id||"account_user"===this.id)};y.prototype.isPublisher=function(){return this.id&&("org_publisher"===this.id||"account_publisher"===this.id)};y.prototype.isAdmin=function(){return this.id&&("org_admin"===this.id||"account_admin"===this.id)};y.prototype.isBasedOnUser=function(){return this.isUser()||this.baseRole&&("org_user"===this.baseRole||"account_user"===this.baseRole)};y.prototype.isBasedOnPublisher=function(){return this.isPublisher()||
this.baseRole&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};y.prototype.isBasedOnAdmin=function(){return this.isAdmin()||this.baseRole&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};y.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&this.id&&0<this.id.length};y.prototype.canInviteUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.inviteUsers};y.prototype.canDisableUsers=function(){return this.privilegeObj&&
this.privilegeObj.portal.admin.disableUsers};y.prototype.canViewUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewUsers};y.prototype.canUpdateUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateUsers};y.prototype.canDeleteUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteUsers};y.prototype.canChangeUserRoles=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.changeUserRoles};y.prototype.canViewOrgGroups=
function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewGroups};y.prototype.canUpdateOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateGroups};y.prototype.canDeleteOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteGroups};y.prototype.canReassignOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.reassignGroups};y.prototype.canAssignUsersToOrgGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.assignToGroups};
y.prototype.canManageEnterpriseGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageEnterpriseGroups};y.prototype.canViewOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewItems};y.prototype.canUpdateOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateItems};y.prototype.canDeleteOrgItems=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteItems};y.prototype.canReassignOrgItems=function(){return this.privilegeObj&&
this.privilegeObj.portal.admin.reassignItems};y.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};y.prototype.canManageLicenses=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageLicenses};y.prototype.canShareOthersItemsToGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.shareToGroup};y.prototype.canShareOthersItemsToOrg=
function(){return this.privilegeObj&&this.privilegeObj.portal.admin.shareToOrg};y.prototype.canShareOthersItemsToPublic=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.shareToPublic};y.prototype.canCreateUpdateCapableGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.createUpdateCapableGroup};y.prototype.canUpdateItemCategories=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateItemCategorySchema};y.prototype.canManageCollaborations=
function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageCollaborations};y.prototype.canManageSecurity=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageSecurity};y.prototype.canManageWebsite=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageWebsite};y.prototype.canManageRoles=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageRoles};y.prototype.canManageServers=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageServers};
y.prototype.canManageUtilityServices=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageUtilityServices};y.prototype.canManageCredits=function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageCredits};y.prototype.canCreateGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.createGroup};y.prototype.canJoinOrgGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.joinGroup};y.prototype.canJoinNonOrgGroup=function(){return this.privilegeObj&&
this.privilegeObj.portal.user.joinNonOrgGroup};y.prototype.canPublishFeatures=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishFeatures};y.prototype.canPublishTiles=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishTiles};y.prototype.canPublishScenes=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishScenes};y.prototype.canPublishServerServices=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishServerServices};
y.prototype.canPublishServerGPServices=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishServerGPServices};y.prototype.canPublishVectorTiles=function(){return!0};y.prototype.canPublishImageCollection=function(){return this.canPublishServerServices()};y.prototype.canCreateItem=function(){return this.privilegeObj&&this.privilegeObj.portal.user.createItem};y.prototype.canShareItemToGroup=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToGroup};y.prototype.canShareItemToOrg=
function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToOrg};y.prototype.canShareItemToPublic=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToPublic};y.prototype.canShareGroupToOrg=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareGroupToOrg};y.prototype.canShareGroupToPublic=function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareGroupToPublic};y.prototype.canViewOrgUsers=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewOrgUsers};
y.prototype.canViewOrgUserContent=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewOrgItems};y.prototype.canViewOrgUserGroups=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewOrgGroups};y.prototype.canViewTracks=function(){return this.privilegeObj&&this.privilegeObj.portal.user.viewTracks};y.prototype.canEditFeatures=function(){return this.privilegeObj&&this.privilegeObj.features.user.edit};y.prototype.canEditFeaturesFullControl=function(){return this.privilegeObj&&
this.privilegeObj.features.user.fullEdit};y.prototype.canManageOpenData=function(){return this.privilegeObj&&this.privilegeObj.opendata.user.openDataAdmin};y.prototype.canDesignateOpenDataGroups=function(){return this.privilegeObj&&this.privilegeObj.opendata.user.designateGroup};y.prototype.canUseGeocode=function(){return this.privilegeObj&&this.privilegeObj.premium.user.geocode};y.prototype.canUseNetworkAnalysis=function(){return this.privilegeObj&&this.privilegeObj.premium.user.networkanalysis};
y.prototype.canUseSpatialAnalysis=function(){return this.privilegeObj&&this.privilegeObj.premium.user.spatialanalysis};y.prototype.canUseGeoenrichment=function(){return this.privilegeObj&&this.privilegeObj.premium.user.geoenrichment};y.prototype.canUseDemographics=function(){return this.privilegeObj&&this.privilegeObj.premium.user.demographics};y.prototype.canUseFeatureReport=function(){return this.privilegeObj&&this.privilegeObj.premium.user.featurereport};y.prototype.canUseGeoanalytics=function(){return this.privilegeObj&&
this.privilegeObj.premium.publisher.geoanalytics};y.prototype.canUseRasterAnalysis=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.rasteranalysis};y.prototype.canPurchaseMarketplace=function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.purchase};y.prototype.canManageMarketplace=function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.manage};y.prototype.canTrialMarketplace=function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.startTrial};
y.prototype.canCreateNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.createNotebooks};y.prototype.canScheduleNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.scheduleNotebooks};y.prototype.canPublishNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.publishNotebooks};y.prototype.canCreateAdvancedNotebooks=function(){return this.privilegeObj&&this.privilegeObj.premium.publisher.createAdvancedNotebooks};
y.prototype.canBulkPublishFromDataStores=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.bulkPublishFromDataStores};y.prototype.canEnumerateDataStores=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.enumerateDataStores};y.prototype.canRegisterDataStores=function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.registerDataStores};y.prototype.setPrivileges=function(v){this.privileges=v;this._initPrivilegesObject();v&&this._readPrivileges(v)};
y.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};y.prototype._readPrivileges=function(v){var L=this;v&&v instanceof Array&&v.forEach(function(J){L._readPrivilege(J)})};y.prototype._readPrivilege=function(v){this._applyEffectToAction(!0,v)};y.prototype._applyEffectToAction=function(v,L){switch(L){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=v;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=v;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=
v;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=v;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=v;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=v;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=v;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=v;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=
v;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=v;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=v;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=v;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=v;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=v;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=
v;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=v;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=v;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=v;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=v;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=v;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=
v;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=v;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=v;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=v;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=v;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=v;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=
v;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=v;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=v;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=v;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=v;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=v;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=
v;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=v;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=v;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=v;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=v;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=
v;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=v;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=v;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=v;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=v;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=v;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=v;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=
v;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=v;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=v;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=v;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=v;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=v;break;case "features:user:edit":this.privilegeObj.features.user.edit=v;break;
case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=v;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=v;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=v;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=v;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=v;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=
v;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=v;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=v;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=v;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=v;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=v;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=
v;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=v;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=v;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=v;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=v;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=v;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=
v}};y.prototype._applyToAll=function(v){this.privilegeObj.portal.admin.inviteUsers=v;this.privilegeObj.portal.admin.disableUsers=v;this.privilegeObj.portal.admin.viewUsers=v;this.privilegeObj.portal.admin.updateUsers=v;this.privilegeObj.portal.admin.deleteUsers=v;this.privilegeObj.portal.admin.changeUserRoles=v;this.privilegeObj.portal.admin.viewGroups=v;this.privilegeObj.portal.admin.updateGroups=v;this.privilegeObj.portal.admin.deleteGroups=v;this.privilegeObj.portal.admin.reassignGroups=v;this.privilegeObj.portal.admin.assignToGroups=
v;this.privilegeObj.portal.admin.manageEnterpriseGroups=v;this.privilegeObj.portal.admin.viewItems=v;this.privilegeObj.portal.admin.updateItems=v;this.privilegeObj.portal.admin.deleteItems=v;this.privilegeObj.portal.admin.reassignItems=v;this.privilegeObj.portal.admin.manageLicenses=v;this.privilegeObj.portal.admin.shareToGroup=v;this.privilegeObj.portal.admin.shareToOrg=v;this.privilegeObj.portal.admin.shareToPublic=v;this.privilegeObj.portal.admin.createUpdateCapableGroup=v;this.privilegeObj.portal.admin.updateItemCategorySchema=
v;this.privilegeObj.portal.admin.manageCollaborations=v;this.privilegeObj.portal.admin.manageSecurity=v;this.privilegeObj.portal.admin.manageWebsite=v;this.privilegeObj.portal.admin.manageRoles=v;this.privilegeObj.portal.admin.manageServers=v;this.privilegeObj.portal.admin.manageUtilityServices=v;this.privilegeObj.portal.admin.manageCredits=v;this.privilegeObj.portal.publisher.publishFeatures=v;this.privilegeObj.portal.publisher.publishTiles=v;this.privilegeObj.portal.publisher.publishScenes=v;this.privilegeObj.portal.publisher.publishServerServices=
v;this.privilegeObj.portal.publisher.publishServerGPServices=v;this.privilegeObj.portal.user.createGroup=v;this.privilegeObj.portal.user.joinGroup=v;this.privilegeObj.portal.user.joinNonOrgGroup=v;this.privilegeObj.portal.user.createItem=v;this.privilegeObj.portal.user.shareToGroup=v;this.privilegeObj.portal.user.shareToOrg=v;this.privilegeObj.portal.user.shareToPublic=v;this.privilegeObj.portal.user.shareGroupToOrg=v;this.privilegeObj.portal.user.shareGroupToPublic=v;this.privilegeObj.portal.user.viewOrgUsers=
v;this.privilegeObj.portal.user.viewOrgItems=v;this.privilegeObj.portal.user.viewOrgGroups=v;this.privilegeObj.portal.user.viewTracks=v;this.privilegeObj.features.user.edit=v;this.privilegeObj.opendata.user.openDataAdmin=v;this.privilegeObj.opendata.user.designateGroup=v;this.privilegeObj.premium.user.geocode=v;this.privilegeObj.premium.user.networkanalysis=v;this.privilegeObj.premium.user.spatialanalysis=v;this.privilegeObj.premium.user.geoenrichment=v;this.privilegeObj.premium.user.demographics=
v;this.privilegeObj.premium.user.featurereport=v;this.privilegeObj.premium.publisher.geoanalytics=v;this.privilegeObj.premium.publisher.rasteranalysis=v;this.privilegeObj.marketplace.admin.purchase=v;this.privilegeObj.marketplace.admin.manage=v;this.privilegeObj.marketplace.admin.startTrial=v;this.privilegeObj.premium.publisher.createNotebooks=v;this.privilegeObj.premium.publisher.scheduleNotebooks=v;this.privilegeObj.premium.publisher.publishNotebooks=v;this.privilegeObj.premium.publisher.createAdvancedNotebooks=
v};return y=l.__decorate([A.subclass("")],y)}(m.default);n.default=N})},"app/portal/LevelAware":function(){define(["require","exports"],function(N,n){Object.defineProperty(n,"__esModule",{value:!0});N=function(){return function(){this.SYSTEM_ROLES={VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB"};this.LICENSE_LEVELS={ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}}}();n.default=N})},"app/widgets/panels/MapMaker/savelayer/copyLayer":function(){define("require exports tslib esri/intl/substitute esri/portal/PortalItem esri/layers/support/layerOriginUtils esri/layers/save/featureLayerUtils ../../../../utils/messageBundleLoader ../../../../utils/topic ../../../../utils/mapUtils/errorUtils".split(" "),
function(N,n,l,A,m,D,y,v,L,J){function f(G,I){var k=this;return new Promise(function(w){return l.__awaiter(k,void 0,void 0,function(){var r,a,c,x,O,E=this;return l.__generator(this,function(h){switch(h.label){case 0:return r=I.portal,a=-1<window.location.href.indexOf("visualization.html"),[4,(new Promise(function(z,q){N(["./SaveLayerAs"],z,q)})).then(l.__importStar)];case 1:return c=h.sent(),x={infoElement:!a},O=new c.default({sourceLayer:G,visibleElements:x,portal:r}),O.on("save",function(z){return l.__awaiter(E,
void 0,void 0,function(){var q,p,S,P,T,F;return l.__generator(this,function(M){switch(M.label){case 0:return M.trys.push([0,3,,4]),q=z.itemProps,(null===(P=q.ownerFolder)||void 0===P?void 0:P.username)===(null===(T=q.ownerFolder)||void 0===T?void 0:T.id)?q.ownerFolder=null:q.ownerFolder=(null===(F=q.ownerFolder)||void 0===F?void 0:F.id)||null,[4,Q(I)];case 1:return M.sent(),p=new m.default(q),[4,G.saveAs(p,{folder:q.ownerFolder})];case 2:return M.sent(),O.close(),g(G),[3,4];case 3:return S=M.sent(),
J.showError(S,G.portalItem),O.close(),[3,4];case 4:return[2]}})})}),O.on("cancel",function(){return w(null)}),O.on("done",function(){return w(G)}),[2]}})})})}function b(G,I,k){var w=this;return new Promise(function(r){return l.__awaiter(w,void 0,void 0,function(){var a,c,x,O;return l.__generator(this,function(E){switch(E.label){case 0:a=H(G,I);if(!(1<(null===a||void 0===a?void 0:a.length)))return[3,2];c={save:!1,saveas:!1};return[4,(new Promise(function(h,z){N(["./UpdateLayer"],h,z)})).then(l.__importStar)];
case 1:return x=E.sent(),O=new x.default({portal:k,view:I,layer:G,layers:a}),O.on("save",function(){c={update:!0,save:!1};O.close()}),O.on("saveas",function(){c={saveas:!0,save:!1};O.close()}),O.on("done",function(){return r(c)}),[3,3];case 2:r({save:!0}),E.label=3;case 3:return[2]}})})})}function e(G,I){var k=this;return new Promise(function(w){return l.__awaiter(k,void 0,void 0,function(){var r,a,c=this;return l.__generator(this,function(x){switch(x.label){case 0:return r=I.map,a=d(G,I),[4,Promise.all(a.map(function(O){return l.__awaiter(c,
void 0,void 0,function(){var E,h,z,q,p;return l.__generator(this,function(S){switch(S.label){case 0:return E=O.clone(),[4,E.load()];case 1:return S.sent(),E.id=O.id,z=(h="group"===(null===(p=O.parent)||void 0===p?void 0:p.type)?O.parent:null)?h.layers:r.layers,q=z.indexOf(O),r.layers.remove(O),z.add(E,q),[2]}})})}))];case 1:return x.sent(),w(!0),[2]}})})})}function g(G){L.default.publish("layer-save-done");L.default.publish("layer-updated");t(G,"saveSuccessMsg")}function t(G,I){return l.__awaiter(this,
void 0,void 0,function(){var k,w;return l.__generator(this,function(r){switch(r.label){case 0:return[4,v.fetchMessageBundles(["mapviewer/saveLayer"])];case 1:return k=r.sent()[0],w=A.substitute(k[I],G),L.default.publish("alert/show",{type:"success",message:w}),[2]}})})}function d(G,I){return H(G,I).filter(function(k){var w;if(w=k.id!==G.id)k=D.getLayerOriginInfo(k,"web-map"),w="source"===k.status||"mixed"===k.status;return w})}function H(G,I){var k=G.portalItem.id,w=G.url+"/"+G.layerId;return(I.map.allLayers||
[]).filter(function(r){var a;return"feature"===r.type&&(null===(a=r.portalItem)||void 0===a?void 0:a.id)===k&&r.url+"/"+r.layerId===w})}function Q(G){return l.__awaiter(this,void 0,void 0,function(){var I,k,w,r,a;return l.__generator(this,function(c){switch(c.label){case 0:I=G.config.app.contextualPanel;k=I.activeWidget;w=I.activeActionName;if("layerfilter"!==w)return[3,2];r=null===I||void 0===I?void 0:I.actionBar;a=r.findAction("layerfilter");return a.active?[4,k.done()]:[3,2];case 1:c.sent(),c.label=
2;case 2:return[2]}})})}Object.defineProperty(n,"__esModule",{value:!0});n.saveLayer=n.saveAllLayers=n.saveLayerAs=n.duplicate=void 0;A=l.__importStar(A);m=l.__importDefault(m);D=l.__importStar(D);y=l.__importStar(y);L=l.__importDefault(L);n.duplicate=function(G,I){return l.__awaiter(this,void 0,void 0,function(){var k,w;return l.__generator(this,function(r){switch(r.label){case 0:if(!G||!G.clone)return[3,3];k=G.clone();return[4,k.load()];case 1:return r.sent(),[4,v.fetchMessageBundles(["mapviewer/mapMaker"])];
case 2:w=r.sent()[0];k.title=A.substitute(w.saveAsCopy,{title:G.title});r=k;var a,c=I.map,x="group"===(null===(a=G.parent)||void 0===a?void 0:a.type)?G.parent:null;a=x?x.layers:(null===r||void 0===r?0:r.isTable)?c.tables:c.layers;c=a.indexOf(G);a.add(r,c+1);L.default.publish("layer-updated");return[2,k];case 3:return[2]}})})};n.saveLayerAs=f;n.saveAllLayers=function(G,I){return l.__awaiter(this,void 0,void 0,function(){var k,w,r;return l.__generator(this,function(a){switch(a.label){case 0:k=G[0].portalItem,
a.label=1;case 1:return a.trys.push([1,4,,5]),[4,t(k,"saveInProcessMsg")];case 2:return a.sent(),[4,y.saveAll(G)];case 3:return w=a.sent(),g(k),[2,w];case 4:return r=a.sent(),J.showError(r,k),[2,Promise.resolve(k)];case 5:return[2]}})})};n.saveLayer=function(G,I,k){return l.__awaiter(this,void 0,void 0,function(){var w,r;return l.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,8,,9]),[4,b(G,I,k)];case 1:return w=a.sent(),w.save||w.update?[4,t(G,"saveInProcessMsg")]:[3,6];
case 2:return a.sent(),[4,G.save()];case 3:a.sent();if(!w.update)return[3,5];L.default.publish("layer-save-start");return[4,e(G,I)];case 4:a.sent(),a.label=5;case 5:return g(G),[3,7];case 6:if(w.saveas)return[2,f(G,k)];a.label=7;case 7:return[2,Promise.resolve(G)];case 8:return r=a.sent(),J.showError(r,G.portalItem),[2,Promise.reject(G)];case 9:return[2]}})})}})},"esri/layers/support/layerOriginUtils":function(){define(["exports","../../core/accessorSupport/PropertyOrigin","./layerUtils"],function(N,
n,l){function A(J){return L[J.type].propertyGroups.filter(f=>!f.predicate||f.predicate(J))}function m(J){J=A(J);const f=[];for(const b of J)f.push(...b.properties);return f}function D(J,f,b){const e=n.writableNameToId(b),{id:g,properties:t}=f;f=t.map(d=>J.originIdOf(d)<e?"source":"overridden").reduce((d,H)=>d===H?d:"overridden");return{id:g,properties:[...t],status:f}}function y(J){const f=L[J.type];return!(!f||f.predicate&&!f.predicate(J))}const v=J=>"feature"===J.type&&!J.isTable,L={feature:{predicate:l.isFeatureServiceLayer,
propertyGroups:[{id:"blend-mode",properties:["blendMode"],predicate:v},{id:"charts",properties:["charts"]},{id:"custom-parameters",properties:["customParameters"]},{id:"definition-expression",properties:["definitionExpression"]},{id:"effect",properties:["effect","featureEffect"],predicate:v},{id:"feature-reduction",properties:["featureReduction"],predicate:v},{id:"floor-info",properties:["floorInfo"],predicate:v},{id:"form-template",properties:["formTemplate"]},{id:"labels",properties:["labelingInfo",
"labelsVisible"],predicate:v},{id:"legend-enabled",properties:["legendEnabled"],predicate:v},{id:"opacity",properties:["opacity"],predicate:v},{id:"order-by",properties:["orderBy"],predicate:v},{id:"popup",properties:["popupTemplate","popupEnabled"]},{id:"refresh-interval",properties:["refreshInterval"]},{id:"renderer",properties:["renderer"],predicate:v},{id:"scale-range",properties:["minScale","maxScale"],predicate:v},{id:"use-view-time",properties:["useViewTime"]}]}};N.clearOverrides=function(J,
f){if(y(J)){var b=m(J);for(const g of b){{b=J;var e=g;const t=n.writableNameToId(f);b.revert(e,n.idToReadableName(t-1))}}}};N.disconnectFromSource=function(J,f){if(y(J)){var b=m(J);for(const g of b){{var e=J;b=g;const t=n.writableNameToId(f),d=e.originIdOf(b);d<t&&d!==n.OriginId.COMPUTED&&e.updateOrigin(b,n.idToWritableName(t))}}}};N.getLayerOriginInfo=function(J,f){if(y(J)){var b=A(J).map(e=>D(J,e,f));return{propertyGroupOriginInfos:b,status:b.map(e=>e.status).reduce((e,g)=>e===g?e:"mixed")}}};N.isSupportedLayer=
y;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/save/featureLayerUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/originUtils ../FeatureLayer ../support/arcgisLayers ../support/arcgisLayerUrl ../support/layerUtils ../../portal/Portal ../../portal/PortalItem ../../portal/support/jsonContext ../../portal/support/portalItemUtils".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d){function H(ca,fa){return`Layer (title: ${ca.title}, id: ${ca.id}) of type '${ca.declaredClass}' ${fa}`}function Q(ca,fa){if("Feature Service"!==fa.type)throw new A("feature-layer:portal-item-wrong-type",H(ca,'should have portal item of type "Feature Service"'));}function G(ca){return I.apply(this,arguments)}function I(){I=n._asyncToGenerator(function*(ca){yield ca.load();if(b.isFeatureCollectionLayer(ca))throw new A("feature-layer:save",H(ca,"using an in-memory source cannot be saved to a portal item"));
});return I.apply(this,arguments)}function k(ca,fa){ca=ca.messages.filter(({type:ea})=>"error"===ea).map(({name:ea,message:pa,details:oa})=>new A(ea,pa,oa));null!=fa&&fa.ignoreUnsupported&&(ca=ca.filter(({name:ea})=>"layer:unsupported"!==ea&&"symbol:unsupported"!==ea&&"symbol-layer:unsupported"!==ea&&"property:unsupported"!==ea&&"url:unsupported"!==ea));if(0<ca.length)throw new A("feature-layer:save","Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information",
{errors:ca});}function w(ca,fa,ea){return r.apply(this,arguments)}function r(){r=n._asyncToGenerator(function*(ca,fa,ea){"beforeSave"in ca&&"function"===typeof ca.beforeSave&&(yield ca.beforeSave());ca=ca.write({},fa);k(fa,ea);return ca});return r.apply(this,arguments)}function a(ca){const {layer:fa,layerJSON:ea}=ca;return fa.isTable?{layers:[],tables:[ea]}:{layers:[ea],tables:[]}}function c(ca){d.addTypeKeyword(ca,d.TypeKeyword.JSAPI);ca.typeKeywords&&(ca.typeKeywords=ca.typeKeywords.filter((fa,
ea,pa)=>pa.indexOf(fa)===ea))}function x(ca,fa){return O.apply(this,arguments)}function O(){O=n._asyncToGenerator(function*(ca,fa){return/\/\d+\/?$/.test(ca.url)?a(fa[0]):E(ca,fa)});return O.apply(this,arguments)}function E(ca,fa){return h.apply(this,arguments)}function h(){h=n._asyncToGenerator(function*(ca,fa){const {layer:{url:ea,customParameters:pa,apiKey:oa}}=fa[0];(ca=yield ca.fetchData("json"))&&null!=ca.layers&&null!=ca.tables||(ca=yield z(ca,{url:ea,customParameters:pa,apiKey:oa},fa.map(ra=>
ra.layer.layerId)));for(const ra of fa)T(ra.layer,ra.layerJSON,ca);return ca});return h.apply(this,arguments)}function z(ca,fa,ea){return q.apply(this,arguments)}function q(){q=n._asyncToGenerator(function*(ca,fa,ea){var pa,oa;ca||(ca={});(pa=ca).layers||(pa.layers=[]);(oa=ca).tables||(oa.tables=[]);const {url:ra,customParameters:Aa,apiKey:Ca}=fa,{serviceJSON:za,layersJSON:Ja}=yield J.fetchFeatureService(ra,{customParameters:Aa,apiKey:Ca});fa=p(ca.layers,za.layers,ea);ea=p(ca.tables,za.tables,ea);
ca.layers=fa.itemResources;ca.tables=ea.itemResources;ea=[...fa.added,...ea.added];fa=Ja?[...Ja.layers,...Ja.tables]:[];yield S(ca,ea,ra,fa);return ca});return q.apply(this,arguments)}function p(ca,fa,ea){const pa=l.difference(ca,fa,(oa,ra)=>oa.id===ra.id);ca=ca.filter(oa=>!pa.removed.some(ra=>ra.id===oa.id));fa=pa.added.map(({id:oa})=>({id:oa}));fa.forEach(({id:oa})=>{ca.push({id:oa})});return{itemResources:ca,added:fa.filter(({id:oa})=>!ea.includes(oa))}}function S(ca,fa,ea,pa){return P.apply(this,
arguments)}function P(){P=n._asyncToGenerator(function*(ca,fa,ea,pa){fa=fa.map(({id:oa})=>new L({url:ea,layerId:oa,sourceJSON:pa.find(({id:ra})=>ra===oa)}));yield y.eachAlways(fa.map(oa=>oa.load()));fa.forEach(oa=>{const {layerId:ra,loaded:Aa,defaultPopupTemplate:Ca}=oa;if(Aa&&!D.isNone(Ca)){var za={id:ra,popupInfo:Ca.toJSON()};T(oa,za,ca)}})});return P.apply(this,arguments)}function T(ca,fa,ea){ca.isTable?F(ea.tables,fa):F(ea.layers,fa)}function F(ca,fa){const ea=ca.findIndex(({id:pa})=>pa===fa.id);
-1===ea?ca.push(fa):ca[ea]=fa}function M(ca){const {portalItem:fa}=ca;return b.isFeatureServiceLayer(ca)&&!ca.dynamicDataSource&&!(null==fa||!fa.loaded)&&"Feature Service"===fa.type}function V(ca){return aa.apply(this,arguments)}function aa(){aa=n._asyncToGenerator(function*(ca){if(null==ca||!ca.length)throw new A("feature-layer-utils-saveall:missing-parameters","'layers' array should contain at least one feature layer");yield Promise.all(ca.map(ea=>ea.load()));for(var fa of ca)if(!M(fa))throw new A("feature-layer-utils-saveall:invalid-parameters",
`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${H(fa,"does not conform")}`,{layer:fa});fa=ca.map(ea=>ea.portalItem.id);if(1<(new Set(fa)).size)throw new A("feature-layer-utils-saveall:invalid-parameters","All layers in the 'layers' array should be loaded from the same portal item");ca=ca.map(ea=>ea.layerId);if((new Set(ca)).size!==ca.length)throw new A("feature-layer-utils-saveall:invalid-parameters","'layers' array should contain only one instance each of layer or table in a feature service");
});return aa.apply(this,arguments)}function ka(ca,fa){return la.apply(this,arguments)}function la(){la=n._asyncToGenerator(function*(ca,fa){const {url:ea,layerId:pa,title:oa,fullExtent:ra,isTable:Aa}=ca;ca=f.parse(ea);ca=D.isSome(ca)&&"FeatureServer"===ca.serverType;fa.url=ca?ea:`${ea}/${pa}`;fa.title||(fa.title=oa);fa.extent=null;!Aa&&D.isSome(ra)&&(fa.extent=yield d.getWGS84ExtentForItem(ra));d.removeTypeKeyword(fa,d.TypeKeyword.METADATA);d.removeTypeKeyword(fa,d.TypeKeyword.MULTI_LAYER);d.addTypeKeyword(fa,
d.TypeKeyword.SINGLE_LAYER);Aa&&d.addTypeKeyword(fa,d.TypeKeyword.TABLE);c(fa)});return la.apply(this,arguments)}function X(ca,fa,ea){return Z.apply(this,arguments)}function Z(){Z=n._asyncToGenerator(function*(ca,fa,ea){const pa=ca.portal;yield pa._signIn();yield pa.user.addItem({item:ca,data:fa,folder:null==ea?void 0:ea.folder})});return Z.apply(this,arguments)}function da(){da=n._asyncToGenerator(function*(ca,fa){yield G(ca);var ea=ca.portalItem;if(!ea)throw va.error("save: requires the portalItem property to be set"),
new A("feature-layer:portal-item-not-set",H(ca,"requires the portalItem property to be set"));if(!ea.loaded)throw new A("feature-layer:portal-item-not-loaded",H(ca,"cannot be saved to a portal item that does not exist or is inaccessible"));Q(ca,ea);ea=ca.portalItem;const pa=t.createForItemWrite(ea);fa=yield w(ca,pa,fa);ca=yield x(ea,[{layer:ca,layerJSON:fa}]);c(ea);yield ea.update({data:ca});v.updateOrigins(pa);return ea});return da.apply(this,arguments)}function ia(){ia=n._asyncToGenerator(function*(ca,
fa,ea){yield G(ca);var pa,oa,ra,Aa;fa=g.from(fa);fa.id&&(fa=fa.clone(),fa.id=null);null!=(oa=(pa=fa).type)?oa:pa.type="Feature Service";null!=(Aa=(ra=fa).portal)?Aa:ra.portal=e.getDefault();Q(ca,fa);pa=fa;oa=t.createForItemWrite(pa);ra=yield w(ca,oa,ea);ra=a({layer:ca,layerJSON:ra});yield ka(ca,pa);yield X(pa,ra,ea);ca.portalItem=pa;v.updateOrigins(oa);return pa});return ia.apply(this,arguments)}const va=m.getLogger("esri.layers.FeatureLayer");m=y.debounce(function(ca,fa){return da.apply(this,arguments)});
var ya=function(){var ca=n._asyncToGenerator(function*(fa,ea){yield V(fa);const pa=fa[0].portalItem,oa=t.createForItemWrite(pa),ra=yield Promise.all(fa.map(Ca=>w(Ca,oa,ea))),Aa=yield x(pa,fa.map((Ca,za)=>({layer:Ca,layerJSON:ra[za]})));c(pa);yield pa.update({data:Aa});yield Promise.all(fa.slice(1).map(Ca=>Ca.portalItem.reload()));v.updateOrigins(oa);return pa.clone()});return function(fa,ea){return ca.apply(this,arguments)}}();ya=y.debounce(ya);const Ba=y.debounce(function(ca,fa,ea){return ia.apply(this,
arguments)});N.save=m;N.saveAll=ya;N.saveAs=Ba;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(N,n){N.updateOrigins=function(l){l&&l.writtenProperties&&l.writtenProperties.forEach(({target:A,propName:m,newOrigin:D})=>{n.isMultiOriginJSONMixin(A)&&D&&A.originOf(m)!==D&&A.updateOrigin(m,D)})};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(N){N.isMultiOriginJSONMixin=function(n){return n&&"getAtOrigin"in n&&"originOf"in n};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/arcgisLayers":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils ./arcgisLayerUrl ./lazyLayerLoader".split(" "),function(N,n,l,A,m,D,
y,v,L){function J(){J=l._asyncToGenerator(function*(h){var z,q=null==(z=h.properties)?void 0:z.customParameters;z=yield e(h.url,q);h={...h.properties,url:h.url};if(!z.sublayerIds)return null!=z.layerOrTableId&&(h.layerId=z.layerOrTableId,h.sourceJSON=z.sourceJSON),new z.Constructor(h);q=new (yield new Promise((p,S)=>N(["../GroupLayer"],P=>p(Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}))),S))).default({title:z.parsedUrl.title});b(q,z,h);return q});
return J.apply(this,arguments)}function f(h,z){return h?h.find(q=>q.id===z):null}function b(h,z,q){function p(S,P){S={...q,layerId:S,sublayerTitleMode:"service-name"};D.isSome(P)&&(S.sourceJSON=P);return new z.Constructor(S)}z.sublayerIds.forEach(S=>{S=p(S,f(z.sublayerInfos,S));h.add(S)});z.tableIds.forEach(S=>{S=p(S,f(z.tableInfos,S));h.tables.add(S)})}function e(h,z){return g.apply(this,arguments)}function g(){g=l._asyncToGenerator(function*(h,z){var q=v.parse(h);D.isNone(q)&&(q=yield t(h,z));if(D.isNone(q))throw new m("arcgis-layers:url-mismatch",
"The url '${url}' is not a valid arcgis resource",{url:h});const {serverType:p,sublayer:S}=q;var P={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(p){case "MapServer":var T=null!=S?"FeatureLayer":c(h,z).then(V=>V?"TileLayer":"MapImageLayer");break;case "ImageServer":T=O(h,{customParameters:z}).then(V=>{const aa=V.tileInfo&&V.tileInfo.format;return V.tileInfo?"LERC"!==(null==aa?void 0:aa.toUpperCase())||V.cacheType&&"elevation"!==V.cacheType.toLowerCase()?
"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case "SceneServer":T=O(q.url.path,{customParameters:z}).then(V=>{if(V){if("Voxel"===(null==V?void 0:V.layerType))return"VoxelLayer";if(null!=V&&V.layers&&Array.isArray(V.layers)&&0<V.layers.length){var aa;const ka={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};V=null==(aa=V.layers[0])?void 0:aa.layerType;if(null!=ka[V])return ka[V]}}return"SceneLayer"});
break;default:T=P[p]}P="FeatureServer"===p;q={parsedUrl:q,Constructor:null,layerOrTableId:P?S:null,sublayerIds:null,tableIds:null};T=yield T;if({FeatureLayer:!0,SceneLayer:!0}[T]&&null==S)if(h=yield Q(h,p,z),P&&(q.sublayerInfos=h.layerInfos,q.tableInfos=h.tableInfos),1!==h.layerIds.length+h.tableIds.length)q.sublayerIds=h.layerIds,q.tableIds=h.tableIds;else if(P){var F,M;q.layerOrTableId=null!=(F=h.layerIds[0])?F:h.tableIds[0];q.sourceJSON=null!=(M=h.layerInfos[0])?M:h.tableInfos[0]}q.Constructor=
yield r(T);return q});return g.apply(this,arguments)}function t(h,z){return d.apply(this,arguments)}function d(){d=l._asyncToGenerator(function*(h,z){var q;z=yield O(h,{customParameters:z});let p=null,S=null;const P=z.type;"Feature Layer"===P||"Table"===P?(p="FeatureServer",S=z.id):"indexedVector"===P?p="VectorTileServer":z.hasOwnProperty("mapName")?p="MapServer":z.hasOwnProperty("bandCount")&&z.hasOwnProperty("pixelSizeX")?p="ImageServer":z.hasOwnProperty("maxRecordCount")&&z.hasOwnProperty("allowGeometryUpdates")?
p="FeatureServer":z.hasOwnProperty("streamUrls")?p="StreamServer":H(z)?(p="SceneServer",S=z.id):z.hasOwnProperty("layers")&&H(null==(q=z.layers)?void 0:q[0])&&(p="SceneServer");if(!p)return null;q=null!=S?v.parseNonStandardSublayerUrl(h):null;return{title:D.isSome(q)&&z.name||y.getFilename(h),serverType:p,sublayer:S,url:{path:D.isSome(q)?q.serviceUrl:y.urlToObject(h).path}}});return d.apply(this,arguments)}function H(h){return(null==h?void 0:h.hasOwnProperty("store"))&&h.hasOwnProperty("id")&&"number"===
typeof h.id}function Q(h,z,q){return G.apply(this,arguments)}function G(){G=l._asyncToGenerator(function*(h,z,q){var p,S;let P=!1;"FeatureServer"===z?(h=yield k(h,{customParameters:q}),P=!!h.layersJSON,z=h.layersJSON||h.serviceJSON):z=yield O(h,{customParameters:q});h=null==(p=z)?void 0:p.layers;p=null==(S=z)?void 0:S.tables;return{layerIds:(null==h?void 0:h.map(T=>T.id).reverse())||[],tableIds:(null==p?void 0:p.map(T=>T.id).reverse())||[],layerInfos:P?h:[],tableInfos:P?p:[]}});return G.apply(this,
arguments)}function I(h){return!h.type||"Feature Layer"===h.type}function k(h,z){return w.apply(this,arguments)}function w(){w=l._asyncToGenerator(function*(h,z){var q,p;let S=yield O(h,z);S=S||{};S.layers=(null==(q=S.layers)?void 0:q.filter(I))||[];q={serviceJSON:S};if(10.5>S.currentVersion)return q;h=yield O(h+"/layers",z);q.layersJSON={layers:(null==h?void 0:null==(p=h.layers)?void 0:p.filter(I))||[],tables:(null==h?void 0:h.tables)||[]};return q});return w.apply(this,arguments)}function r(h){return a.apply(this,
arguments)}function a(){a=l._asyncToGenerator(function*(h){return(0,L.layerLookupMap[h])()});return a.apply(this,arguments)}function c(h,z){return x.apply(this,arguments)}function x(){x=l._asyncToGenerator(function*(h,z){return(yield O(h,{customParameters:z})).tileInfo});return x.apply(this,arguments)}function O(h,z){return E.apply(this,arguments)}function E(){E=l._asyncToGenerator(function*(h,z){return(yield A(h,{responseType:"json",query:{f:"json",...null==z?void 0:z.customParameters,token:null==
z?void 0:z.apiKey}})).data});return E.apply(this,arguments)}n.fetchFeatureService=k;n.fromUrl=function(h){return J.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"app/utils/messageBundleLoader":function(){define(["require","exports","tslib","esri/intl","esri/request"],function(N,n,l,A,m){function D(v,L){return l.__awaiter(this,void 0,void 0,function(){var J,f;return l.__generator(this,function(b){switch(b.label){case 0:J=A.normalizeMessageBundleLocale(L),
b.label=1;case 1:return b.trys.push([1,3,,5]),[4,y("./js/app/"+v+"_"+J.toLowerCase()+".json")];case 2:return f=b.sent(),[2,f];case 3:return b.sent(),[4,y("./js/app/"+v+"_en.json")];case 4:return f=b.sent(),[2,f];case 5:return[2]}})})}function y(v){return l.__awaiter(this,void 0,void 0,function(){var L,J;return l.__generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,m.default(""+v,{responseType:"json"})];case 1:return L=f.sent(),[2,(null===L||void 0===L?void 0:L.data)||
{}];case 2:throw J=f.sent(),console.error("Error loading locale: "+v,J),Error(J);case 3:return[2]}})})}Object.defineProperty(n,"__esModule",{value:!0});n.fetchMessageBundles=n.createMessageBundleLoader=n.isLoadingLocale=void 0;A=l.__importStar(A);m=l.__importDefault(m);n.isLoadingLocale=!1;n.createMessageBundleLoader=function(v){return l.__awaiter(this,void 0,void 0,function(){var L,J,f;return l.__generator(this,function(b){f=/^mapviewer\/(.+)/;A.registerMessageBundleLoader({pattern:f,fetchMessageBundle:function(e,
g){return l.__awaiter(this,void 0,void 0,function(){var t,d;return l.__generator(this,function(H){switch(H.label){case 0:n.isLoadingLocale&&setTimeout(function(){return n.isLoadingLocale=!1},250);if(g===L)return[3,2];n.isLoadingLocale=!0;return[4,D("t9n/app",g)];case 1:J=H.sent(),L=g,H.label=2;case 2:return t=f.exec(e)[1],"all"!==t?[3,3]:[2,J];case 3:return J[t]?[2,J[t]]:[3,4];case 4:return[4,D(t,g)];case 5:return d=H.sent(),[2,d]}})})}});return[2]})})};n.fetchMessageBundles=function(v,L){return l.__awaiter(this,
void 0,void 0,function(){var J;return l.__generator(this,function(f){J=v.map(function(b){return A.fetchMessageBundle(b)});return[2,Promise.all(J)]})})}})},"app/utils/mapUtils/errorUtils":function(){define("require exports tslib ../topic esri/intl/substitute esri/layers/support/arcgisLayerUrl ../messageBundleLoader".split(" "),function(N,n,l,A,m,D,y){function v(f){var b=f&&f.type||"error";var e=f.name;e=void 0===e?"":e;var g=f.details,t=f.type;g=f.item||g&&g.layer||g&&g.item||{title:""};t="warning"===
(void 0===t?"error":t)?n.messagesErrors.genericWarningTitle:n.messagesErrors.genericErrorTitle;-1<e.indexOf("layerview:create-error")?t=m.substitute(n.messagesErrors.failedToAddLayer,g):"request:server"===e||"identity-manager:not-authorized"===e?(e=g&&g.title||L(f)||"",t=m.substitute(n.messagesErrors.failedToAddLayer,{title:e})):"webmap:save"===e?t=n.messagesErrors.failedToSaveMap:"csv"===e&&(t=m.substitute(n.messagesErrors.unableToAdd,{type:"CSV"}));e=t;t=f&&f.message||n.messagesErrors.genericError;
g=f&&f.name;f&&f.details?(t=(t=f.details)&&t.errors||t&&t.error||[],g=f.item||f.details.layer||f.details.item||{title:""},t=t&&t.name?J(l.__assign(l.__assign({},t),{item:g})):t.length?J(l.__assign(l.__assign({},t.shift()),{item:g})):J(f)):g?t=J(f):t&&-1<t.toLowerCase().indexOf("you do not have access to this resource")&&(t=J({name:"webmap:no-permission",message:t}));return{type:b,title:e,message:t}}function L(f){return(f=(f=(f=(null===f||void 0===f?void 0:f.details)||"")&&f.url)&&D.parse(f))&&f.title||
""}function J(f){var b=f.name,e=f.details,g=f.item||e&&(e.layer||e.item)||{},t=null===e||void 0===e?void 0:e.messageCode;if(g){var d=g.portal;d=null===d||void 0===d?void 0:d.user}else d=null;g.title=g.title||L(f)||"";var H=f&&f.message||n.messagesErrors.genericError;if(g&&"layerview:spatial-reference-incompatible"===b)H=m.substitute(n.messagesErrors.spatialReference,g);else if(g&&"featurelayerview:table-not-supported"===b)H=m.substitute(n.messagesErrors.tableNotSupported,g);else if(g&&"layer:unsupported-layer-type"===
b)f=g&&g.resourceInfo||{type:""},H=m.substitute(n.messagesErrors.unsupportedLayerType,l.__assign(l.__assign({},g),f));else if(g&&"url:unknown-item-type"===b)H=m.substitute(n.messagesErrors.unsupportedUrlType,{});else if(g&&"imageserverraster:open"===b||"imagery-layer:fetch-service-info"===b)H=n.messagesErrors.unsupportedLayer;else if("request:server"===b&&(-1<(null===H||void 0===H?void 0:H.indexOf("Unexpected token \x3c in JSON at position 0"))||-1<(null===H||void 0===H?void 0:H.indexOf("JSON.parse: unexpected character"))))H=
0===e.httpStatus?n.messagesErrors.layerNotOGCFeatures:n.messagesErrors.layerNotAdded;else if("request:server"!==b||"CONT_0155"!==t)"request:server"===b&&400===e.httpStatus||"wmtslayer:unsupported-service-data"===b?H=(null===g||void 0===g?0:g.title)?m.substitute(n.messagesErrors.layerNotAddedSecure,g):n.messagesErrors.layerNotAdded:"request:server"===b&&0===e.httpStatus&&"GeoJSON"===(null===e||void 0===e?void 0:e.type)?H=n.messagesErrors.layerNotGeoJSON:"request:server"===b&&(503===e.httpStatus||500===
e.httpStatus||400===e.httpStatus||404===e.httpStatus||301===e.httpStatus&&"GeoJSON"===(null===e||void 0===e?void 0:e.type))?H=(null===g||void 0===g?0:g.title)?m.substitute(n.messagesErrors.layerNotAddedItem,g):n.messagesErrors.layerNotAdded:"TypeError"===b?H=n.messagesErrors.layerNotAdded:"request:not-secure"===b?H=n.messagesErrors.httpNotAllowed:"webmap:save"===b?H=m.substitute(n.messagesErrors.layerNotSaved,g):"web-document-write:property-required"===b?H=m.substitute(n.messagesErrors.webMapPropRequired,
e):"webmap:unsupported-version"===b?H=m.substitute(n.messagesErrors.webMapUnsupportedVersion,g):"webmap:no-permission"===b?H=m.substitute(n.messagesErrors.webMapNoPermission,g):"basemap:spatial-reference-incompatible"===b?H=m.substitute(n.messagesErrors.basemapIncompatibleSR,g):"basemap:spatial-reference-incompatible-layers"===b?H=m.substitute(n.messagesErrors.basemapLayersIncompatibleSR,g):"basemap:spatial-reference-incompatible-basemap"===b?H=m.substitute(n.messagesErrors.basemapIncompatible,g):
"basemap:arcgis-layers:url-mismatch"===b?H=n.messagesErrors.basemapNotAvailable:"feature-layer-source:unsupported-type"===b||"ogc-feature-layer:missing-property"===b?(f=g&&g.title||L(f),H=m.substitute(n.messagesErrors.unsupportedLayerType,{type:f||"Layer"})):"identity-manager:not-authorized"===b||"request:server"===b&&403===e.httpStatus?(g=(null===g||void 0===g?void 0:g.portalItem)||g,g=null===g||void 0===g?void 0:g.typeKeywords,g=-1<(null===g||void 0===g?void 0:g.indexOf("Requires Subscription"))||
-1<(null===g||void 0===g?void 0:g.indexOf("Requires Credits"))||!1,f=L(f),H=g?m.substitute((null===d||void 0===d?0:d.isOrgUser)?n.messagesErrors.subscriptionContentOrg:n.messagesErrors.subscriptionContentPublic,{title:f||""}):m.substitute(n.messagesErrors.failedToAddLayer,{title:f||""})):-1<(null===H||void 0===H?void 0:H.indexOf("Unable to identify latitudeField and/or longitudeField from"))?H=n.messagesErrors.unableToAddCSV:"shortcut:invalid"===b?H=m.substitute(n.messagesErrors.shortcutInvalid,{name:f.currentCommand.alias}):
"forms:missingRequiredField"===b?H=n.messagesErrors.missingRequiredField:"csv-layer:location-fields-not-found"===b?H=n.messagesErrors.csvLayerLocationFieldsNotFound:"wfs-layer:kvp-encoding-not-supported"===b?H=n.messagesErrors.wfsEncodingNotSupported:"web-document-write:unsupported-feature-effect"===b&&(H=n.tempErrorMessage);return H}Object.defineProperty(n,"__esModule",{value:!0});n.getErrorInfo=n.showError=n.fetchErrorMessages=n.messagesErrors=n.tempErrorMessage=void 0;A=l.__importDefault(A);m=
l.__importStar(m);D=l.__importStar(D);n.tempErrorMessage="Close the Filter pane before saving.";n.fetchErrorMessages=function(){return l.__awaiter(this,void 0,void 0,function(){var f;return l.__generator(this,function(b){switch(b.label){case 0:return[4,y.fetchMessageBundles(["mapviewer/errors"])];case 1:return f=b.sent()[0],n.messagesErrors=f,[2]}})})};n.showError=function(f,b){f=v(l.__assign(l.__assign({},f&&f.error||f),{item:b}));A.default.publish("alert/show",f)};n.getErrorInfo=v})},"app/widgets/panels/MapMaker/savelayer/SaveLayerAs":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget esri/core/domUtils ../../../../utils/waitFor ../../../../utils/learnMoreLink esri/intl/substitute".split(" "),
function(N,n,l,A,m,D,y,v,L,J){Object.defineProperty(n,"__esModule",{value:!0});D=l.__importDefault(D);y=l.__importStar(y);J=l.__importStar(J);N=function(f){function b(e){e=f.call(this,e)||this;e.isTable=!1;return e}l.__extends(b,f);b.prototype.postInitialize=function(){var e;return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(g){this.close=this.close.bind(this);this.onSave=this.onSave.bind(this);this.onCancel=this.onCancel.bind(this);this.onDone=this.onDone.bind(this);
this.onSetInitalFocus=this.onSetInitalFocus.bind(this);this.isTable=null===(e=this.sourceLayer)||void 0===e?void 0:e.isTable;this.createContainer();this.open();this.initItemProps();this.overrideFocus();return[2]})})};b.prototype.destroy=function(){this.modal&&(y.remove(this.itemPropertiesElement),y.remove(this.modal),this.modal=null)};b.prototype.open=function(){var e=this.modal;setTimeout(function(){return e.active=!0},250)};b.prototype.close=function(){this.modal.active=!1};b.prototype.disable=
function(e){var g=this.modal;g.querySelector(".js-save").loading=e;g.querySelector(".js-cancel").disabled=e;g.querySelector(".js-content").classList[e?"add":"remove"]("disabled")};b.prototype.onSave=function(){this.disable(!0);this.emit("save",{itemProps:this.itemProps})};b.prototype.onCancel=function(){this.emit("cancel");this.close()};b.prototype.onChange=function(e){this.itemProps[e.prop]=e.value||"";this.validate()};b.prototype.onDone=function(){var e=this;this.emit("done");return new Promise(function(g){g(!0);
setTimeout(function(){return e.destroy()},250)})};b.prototype.onSetInitalFocus=function(e){var g,t,d;return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(H){switch(H.label){case 0:return null===e||void 0===e?void 0:e.preventDefault(),null===(g=this.actionElement)||void 0===g?void 0:g.removeEventListener("focus",this.onSetInitalFocus),null===(t=this.cancelBtn)||void 0===t?void 0:t.removeEventListener("focus",this.onSetInitalFocus),null===(d=this.infoElement)||void 0===
d?void 0:d.removeEventListener("focus",this.onSetInitalFocus),[4,this.modal.setFocus("close-button")];case 1:return H.sent(),[2]}})})};b.prototype.initItemProps=function(){return l.__awaiter(this,void 0,void 0,function(){var e,g,t,d,H,Q;return l.__generator(this,function(G){switch(G.label){case 0:return e=this,g=e.sourceLayer,t=e.portal,d=this.portalItem=null===g||void 0===g?void 0:g.portalItem,H=this.getUpdatedTitle(g),d?[4,t.getUniqueItemTitle(H,d.ownerFolder,d.type)]:[3,2];case 1:return Q=G.sent(),
this.itemProps={title:Q},this.itemProps.ownerFolder=this.findFolder(d.ownerFolder),this.itemProps.categories=d.categories,this.itemProps.tags=d.tags,this.itemProps.snippet=d.snippet,[3,3];case 2:this.itemProps={title:H},G.label=3;case 3:return[2]}})})};b.prototype.getUpdatedTitle=function(e){return e.title};b.prototype.validate=function(){var e=this;setTimeout(function(){return l.__awaiter(e,void 0,void 0,function(){var g,t;return l.__generator(this,function(d){switch(d.label){case 0:return[4,this.titleInput.getErrorMessage()];
case 1:return g=d.sent(),t=this.modal.querySelector(".js-save"),t.disabled=g?!0:!1,[2]}})})},850)};b.prototype.createContainer=function(){var e=this.modal=document.createElement("calcite-modal");e.setAttribute("area-labeledby","modal-title");e.size="s";e.width="s";e.intlClose=this.messagesCommon.close;e.disableOutsideClose=!0;e.disableEscape=!0;e.beforeClose=this.onDone;document.body.appendChild(e);this.container=e};b.prototype.findFolder=function(e){return this.portal.user.folders.find(function(g){return g.id===
e})};b.prototype.overrideFocus=function(){return l.__awaiter(this,void 0,void 0,function(){var e,g,t,d,H,Q,G=this;return l.__generator(this,function(I){switch(I.label){case 0:return g=this,[4,v.waitForElement("calcite-button.js-cancel",this.modal)];case 1:return e=g.cancelBtn=I.sent(),e.addEventListener("focus",this.onSetInitalFocus),d=this,[4,v.waitForElement("arcgis-title-input",this.modal)];case 2:t=d.actionElement=I.sent();t.addEventListener("focus",this.onSetInitalFocus);if(!this.visibleElements.infoElement)return[3,
4];Q=this;return[4,v.waitForElement(".js-info",this.modal)];case 3:H=Q.infoElement=I.sent(),H.addEventListener("focus",this.onSetInitalFocus),I.label=4;case 4:return setTimeout(function(){return G.onSetInitalFocus()},400),[2]}})})};b.prototype.render=function(){return m.tsx("div",null,this.renderHeader(),this.renderContent(),this.renderFooter())};b.prototype.renderHeader=function(){return m.tsx("h3",{slot:"header",id:"modal-title"},this.messages.createItem)};b.prototype.renderContent=function(){var e=
this,g=this.visibleElements,t=this.portalItem,d=this.itemProps,H=this.portal;t=(null===t||void 0===t?void 0:t.type)||"Feature Service";var Q=d||{},G=Q.title,I=Q.tags,k=Q.categories,w=Q.snippet;Q=Q.ownerFolder;var r=H.user;return d?m.tsx("div",{slot:"content",class:"save-layer js-content"},m.tsx("arcgis-item-properties",{scale:"m",portal:H,user:r,api:4,type:t||"Feature Service",afterCreate:function(a){return e.itemPropertiesElement=a}},m.tsx("arcgis-title-input",{scale:"m","item-title":G,currentFolder:Q,
onArcgisTitleInputChange:function(a){return e.onChange({prop:"title",value:a.detail})},afterCreate:function(a){e.titleInput=a;e.validate()}}),m.tsx("arcgis-folder-picker",{scale:"m",folder:Q,onArcgisFolderPickerChange:function(a){return e.onChange({prop:"ownerFolder",value:a.detail})}}),m.tsx("arcgis-categories-picker",{scale:"m",categories:k,onArcgisCategoriesPickerChange:function(a){return e.onChange({prop:"categories",value:a.detail})}}),m.tsx("arcgis-tags-picker",{scale:"m",activeTags:I,onArcgisTagsPickerChange:function(a){return e.onChange({prop:"tags",
value:a.detail})}}),m.tsx("arcgis-summary-input",{scale:"m",summary:w,onArcgisSummaryInputChange:function(a){return e.onChange({prop:"snippet",value:a.detail})}})),g.infoElement?m.tsx("p",{class:"js-info",afterCreate:function(a){var c=L.getLearnMoreUrl("120003727",{portal:e.portal});a.innerHTML=J.substitute(e.isTable?e.messages.messageTable:e.messages.message,{url:c})}}):null):m.tsx("div",{slot:"content",class:"save-layer js-content"})};b.prototype.renderFooter=function(){return[m.tsx("calcite-button",
{class:"js-cancel",slot:"secondary",width:"full",appearance:"outline",onclick:this.onCancel},this.messagesCommon.cancel),m.tsx("calcite-button",{class:"js-save",slot:"primary",width:"full",disabled:!0,onclick:this.onSave},this.messagesCommon.save)]};l.__decorate([A.property(),m.messageBundle("mapviewer/saveLayer")],b.prototype,"messages",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/common")],b.prototype,"messagesCommon",void 0);l.__decorate([A.property()],b.prototype,"portal",void 0);
l.__decorate([A.property()],b.prototype,"sourceLayer",void 0);l.__decorate([A.property()],b.prototype,"portalItem",void 0);l.__decorate([A.property()],b.prototype,"itemProps",void 0);l.__decorate([A.property()],b.prototype,"visibleElements",void 0);return b=l.__decorate([A.subclass("")],b)}(D.default);n.default=N})},"app/utils/waitFor":function(){define(["require","exports","tslib"],function(N,n,l){var A=this;Object.defineProperty(n,"__esModule",{value:!0});n.waitForElement=void 0;n.waitForElement=
function(m,D){return l.__awaiter(A,void 0,void 0,function(){return l.__generator(this,function(y){return[2,new Promise(function(v){if(document.querySelector(m))return v(document.querySelector(m));var L=new MutationObserver(function(J){document.querySelector(m)&&(v(document.querySelector(m)),L.disconnect())});L.observe(D||document.body,{childList:!0,subtree:!0})})]})})}})},"app/utils/learnMoreLink":function(){define(["require","exports","tslib","esri/intl/substitute"],function(N,n,l,A){Object.defineProperty(n,
"__esModule",{value:!0});n.getLearnMoreUrl=n.getLearnMoreLink=void 0;A=l.__importStar(A);n.getLearnMoreLink=function(m,D,y){m=n.getLearnMoreUrl(m,y);return A.substitute(D,m)};n.getLearnMoreUrl=function(m,D){D=D.portal;var y=D.helpMap;return D.helpBase+(y&&(y[m]||y[120002710])||"")}})},"app/widgets/panels/MapMaker/savelayer/UpdateLayer":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget esri/core/domUtils esri/intl/substitute ../../../../utils/learnMoreLink ../../../../utils/waitFor".split(" "),
function(N,n,l,A,m,D,y,v,L,J){Object.defineProperty(n,"__esModule",{value:!0});D=l.__importDefault(D);y=l.__importStar(y);v=l.__importStar(v);N=function(f){function b(e){e=f.call(this,e)||this;e.isTable=!1;return e}l.__extends(b,f);b.prototype.postInitialize=function(){var e;return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(g){this.close=this.close.bind(this);this.onSave=this.onSave.bind(this);this.onSaveAs=this.onSaveAs.bind(this);this.onCancel=this.onCancel.bind(this);
this.onOpenDetails=this.onOpenDetails.bind(this);this.onDone=this.onDone.bind(this);this.onSetInitalFocus=this.onSetInitalFocus.bind(this);this.isTable=null===(e=this.layer)||void 0===e?void 0:e.isTable;this.createContainer();this.open();this.overrideFocus();return[2]})})};b.prototype.destroy=function(){this.modal&&(y.remove(this.modal),this.modal=null)};b.prototype.open=function(){var e=this.modal;setTimeout(function(){return e.active=!0},250)};b.prototype.close=function(){this.modal.active=!1};
b.prototype.disable=function(e){var g=this.modal;g.querySelector(".js-save").loading=e;g.querySelector(".js-cancel").disabled=e};b.prototype.onOpenDetails=function(){var e=this.portal&&this.portal.restUrl.replace("sharing/rest","home");window.open(e+"/item.html?id\x3d"+this.layer.portalItem.id)};b.prototype.onSave=function(){this.disable(!0);this.emit("save")};b.prototype.onSaveAs=function(){this.disable(!0);this.emit("saveas")};b.prototype.onCancel=function(){this.emit("cancel");this.close()};b.prototype.onDone=
function(){var e=this;this.emit("done");return new Promise(function(g){g(!0);setTimeout(function(){return e.destroy()},250)})};b.prototype.onSetInitalFocus=function(e){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(g){switch(g.label){case 0:return e.preventDefault(),[4,this.modal.setFocus("close-button")];case 1:return g.sent(),this.actionElement.removeEventListener("focus",this.onSetInitalFocus),[2]}})})};b.prototype.createContainer=function(){var e=this.modal=
document.createElement("calcite-modal");e.setAttribute("area-labeledby","modal-title");e.size="s";e.width="s";e.color="red";e.intlClose=this.messagesCommon.close;e.disableOutsideClose=!0;e.disableEscape=!0;e.beforeClose=this.onDone;document.body.appendChild(e);this.container=e};b.prototype.overrideFocus=function(){return l.__awaiter(this,void 0,void 0,function(){var e,g;return l.__generator(this,function(t){switch(t.label){case 0:return g=this,[4,J.waitForElement(".js-open-details",this.modal)];case 1:return e=
g.actionElement=t.sent(),e.addEventListener("focus",this.onSetInitalFocus),[2]}})})};b.prototype.render=function(){return m.tsx("div",null,this.renderHeader(),this.renderContent(),this.renderFooter())};b.prototype.renderHeader=function(){var e=this.isTable;return m.tsx("h3",{slot:"header",id:"modal-title"},m.tsx("calcite-icon",{class:"update-layer-icon",icon:"exclamation-mark-triangle"}),e?this.messages.saveTable:this.messages.save)};b.prototype.renderContent=function(){var e=this.layer,g=this.isTable,
t=e.portalItem,d=v.substitute(g?this.messages.updateSourceSummaryTable:this.messages.updateSourceSummary,e);e=g?this.messages.updateSourceLayerDescriptionTable:this.messages.updateSourceLayerDescription;return m.tsx("div",{slot:"content",class:"update-layer js-content"},m.tsx("p",{afterCreate:function(H){return H.innerHTML=d}}),m.tsx("calcite-label",{alignment:"start",scale:"m",layout:"default"},g?this.messages.sourceTable:this.messages.sourceLayer,m.tsx("calcite-tile",{class:"update-layer-tile",
description:t.displayName,heading:t.title,onclick:this.onOpenDetails},m.tsx("calcite-action",{slot:"content-end",class:"js-open-details",appearance:"solid",compact:!0,scale:"s",icon:"launch",text:g?this.messages.sourceTable:this.messages.sourceLayer,onClick:this.onOpenDetails}))),m.tsx("p",null,e," ",this.renderLearnMoreLink()),this.renderList())};b.prototype.renderLearnMoreLink=function(){var e=L.getLearnMoreUrl("120003727",{portal:this.portal});return m.tsx("calcite-link",{target:"_blank",href:e},
this.messagesCommon.learnMore)};b.prototype.renderList=function(){var e=this;return m.tsx("calcite-list",{class:"update-layer-list"},this.layers.items.map(function(g){return e.renderListItem(g)}))};b.prototype.renderListItem=function(e){var g=this.isTable;return m.tsx("calcite-list-item",{label:e.title,nonInteractive:!0},this.layer.id===e.id?m.tsx("calcite-chip",{slot:"content-end",appearance:"solid",color:"grey",scale:"s"},g?this.messages.currentTable:this.messages.currentLayer):null)};b.prototype.renderFooter=
function(){return[m.tsx("calcite-button",{class:"js-cancel",slot:"back",width:"full",appearance:"outline",onclick:this.onCancel},this.messagesCommon.cancel),m.tsx("calcite-button",{class:"js-save-as",slot:"secondary",width:"full",appearance:"outline",onclick:this.onSaveAs},this.messages.saveNewItem),m.tsx("calcite-button",{class:"js-save",slot:"primary",width:"full",onclick:this.onSave},this.messagesCommon.save)]};l.__decorate([A.property(),m.messageBundle("mapviewer/saveLayer")],b.prototype,"messages",
void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/common")],b.prototype,"messagesCommon",void 0);l.__decorate([A.property()],b.prototype,"portal",void 0);l.__decorate([A.property()],b.prototype,"view",void 0);l.__decorate([A.property()],b.prototype,"layer",void 0);l.__decorate([A.property()],b.prototype,"layers",void 0);return b=l.__decorate([A.subclass("")],b)}(D.default);n.default=N})},"esri/widgets/Slider":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/maybe ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Slider/SliderViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q){const G={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},I={labels:!1,rangeLabels:!1};l=function(k){function w(a,c){a=k.call(this,a,c)||this;a._activeLabelInputIndex=null;a._anchorElements=[];a._dragged=!1;a._dragStartInfo=null;a._focusedAnchorIndex=null;a._isMinInputActive=!1;
a._isMaxInputActive=!1;a._lastMovedHandleIndex=null;a._positionPrecision=5;a._segmentDragStartInfo=null;a._trackHeight=null;a._trackWidth=null;a._zIndices=null;a._zIndexOffset=3;a.disabled=!1;a.draggableSegmentsEnabled=!0;a.effectiveMax=null;a.effectiveMin=null;a.effectiveSegmentElements=new A;a.extraNodes=[];a.inputCreatedFunction=null;a.inputFormatFunction=null;a.inputParseFunction=null;a.label=void 0;a.labelElements=new A;a.labelInputsEnabled=!1;a.labelFormatFunction=null;a.labels=null;a.max=null;
a.maxLabelElement=null;a.messages=null;a.min=null;a.minLabelElement=null;a.precision=4;a.rangeLabelInputsEnabled=!1;a.segmentElements=new A;a.snapOnClickEnabled=!0;a.steps=null;a.syncedSegmentsEnabled=!1;a.thumbsConstrained=!0;a.thumbCreatedFunction=null;a.thumbElements=new A;a.tickElements=new A;a.trackElement=null;a.values=null;a.viewModel=new g;a.visibleElements={...I};a._onAnchorPointerDown=a._onAnchorPointerDown.bind(N._assertThisInitialized(a));a._onAnchorPointerMove=a._onAnchorPointerMove.bind(N._assertThisInitialized(a));
a._onAnchorPointerUp=a._onAnchorPointerUp.bind(N._assertThisInitialized(a));a._onLabelPointerDown=a._onLabelPointerDown.bind(N._assertThisInitialized(a));a._onLabelPointerUp=a._onLabelPointerUp.bind(N._assertThisInitialized(a));a._onSegmentPointerDown=a._onSegmentPointerDown.bind(N._assertThisInitialized(a));a._onSegmentPointerMove=a._onSegmentPointerMove.bind(N._assertThisInitialized(a));a._onSegmentPointerUp=a._onSegmentPointerUp.bind(N._assertThisInitialized(a));a._onTrackPointerDown=a._onTrackPointerDown.bind(N._assertThisInitialized(a));
a._onTrackPointerMove=a._onTrackPointerMove.bind(N._assertThisInitialized(a));a._onTrackPointerUp=a._onTrackPointerUp.bind(N._assertThisInitialized(a));return a}N._inheritsLoose(w,k);var r=w.prototype;r.destroy=function(){document.removeEventListener("pointerup",this._onLabelPointerUp);document.removeEventListener("pointermove",this._onLabelPointerMove);document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);this.labelElements.removeAll();
this.labelElements.destroy();this.segmentElements.removeAll();this.segmentElements.destroy();this.effectiveSegmentElements.removeAll();this.effectiveSegmentElements.destroy();this.thumbElements.removeAll();this.thumbElements.destroy();this.tickElements.removeAll();this.tickElements.destroy()};r.castVisibleElements=function(a){return{...I,...a}};r.render=function(){const {label:a}=this,c=this.classes("esri-slider","esri-widget",this._isHorizontalLayout()?"esri-slider--horizontal":"esri-slider--vertical",
this._isReversedLayout()?"esri-slider--reversed":null,this._isDisabled()?"esri-disabled":null);this._storeTrackDimensions();return H.tsx("div",{"aria-label":a,class:c,"touch-action":"none",bind:this,afterCreate:this._afterContainerCreate},this.renderContent())};r.toNextStep=function(a){this._toStep(a,1)};r.toPreviousStep=function(a){this._toStep(a,-1)};r.renderContent=function(){const {max:a,min:c}=this;if(!(D.isNone(c)||D.isNone(a)||c>=a))return[this.renderMin(),this.renderSliderContainer(),this.renderMax()]};
r.renderSliderContainer=function(){return H.tsx("div",{key:"slider-container",bind:this,class:"esri-slider__content"},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())};r.renderTrackElement=function(){return H.tsx("div",{afterCreate:this._afterTrackCreate,afterRemoved:this._afterTrackRemoved,bind:this,class:"esri-slider__track","data-node-ref":"trackElement","touch-action":"none"},this.renderEffectiveSegmentElements(),this.renderSegmentElements(),this.renderAnchorElements())};
r.renderEffectiveSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){var a=D.isSome(this.effectiveMax),c=D.isSome(this.effectiveMin);if(a||c){var {max:x,min:O,viewModel:E}=this,h=E.getBounds(),z=[];c&&z.push(this.renderEffectiveSegmentElement(O,h.min,!0));a&&z.push(this.renderEffectiveSegmentElement(h.max,x,!1));return z}}};r.renderSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){var a=this.values.length,c=[];for(let x=0;x<=a;x++)c.push(this.renderSegmentElement(x));
return c}};r.renderSegmentElement=function(a){const {_trackHeight:c,_trackWidth:x,draggableSegmentsEnabled:O,id:E,state:h,values:z}=this;var q=this._isHorizontalLayout(),p=q?x:c,S=this.viewModel.getBounds(),P=this._positionFromValue(S.max),T=this._positionFromValue(S.min);S=a===z.length?null:a;const F=0===a?null:a-1;var M=D.isSome(S);const V=D.isSome(F);let aa;const ka=[...z].sort((la,X)=>la-X);this._isReversedLayout()?(aa=V?this._positionFromValue(ka[F]):T,T=M?this._positionFromValue(ka[S]):P):(aa=
M?this._positionFromValue(ka[S]):P,T=V?this._positionFromValue(ka[F]):T);P=this._applyPrecisionToPosition(100*T/p);p=(aa-T)/p;q=q?`transform: translate(${P}%, 0px) scale(${p}, 1);`:`transform: translate(0px, ${P}%) scale(1, ${p});`;M=this.classes("esri-slider__segment","esri-slider__segment-"+a,O&&M&&V&&"disabled"!==h?"esri-slider__segment--interactive":null);return H.tsx("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:M,"data-max-thumb-index":S,
"data-min-thumb-index":F,"data-segment-index":a,key:`${E}-segment-${a}`,style:q,"touch-action":"none"})};r.renderEffectiveSegmentElement=function(a,c,x){const {_trackHeight:O,_trackWidth:E,layout:h}=this;a=this._positionFromValue(a);c=this._positionFromValue(c);const z=this._isHorizontalLayout(),q=z?E:O,p=this._applyPrecisionToPosition(100*a/q);let S=null;"horizontal"===h?(a=a===q?0:p,S=`clip-path: inset(0% ${c===q?0:this._applyPrecisionToPosition((x?q-c:c)/q*100)}% 0% ${a}%);`):(a=(c-a)/q,S=z?`transform: translate(${p}%, 0px) scale(${a}, 1);`:
`transform: translate(0px, ${p}%) scale(1, ${a});`);x=this.classes("esri-slider__segment","esri-slider__effective-segment",x?"esri-slider__effective-min-segment":"esri-slider__effective-max-segment");return H.tsx("div",{afterCreate:this._afterEffectiveSegmentCreate,afterRemoved:this._afterEffectiveSegmentRemoved,bind:this,class:x,style:S,"touch-action":"none"})};r.renderAnchorElements=function(){const {trackElement:a,values:c}=this;if(c&&c.length)return this._zIndices=c.map((x,O)=>{x=this._positionFromValue(x);
x=this._positionToPercent(x);x=this._isHorizontalLayout()?50<x:50>x;return this._zIndexOffset+(c.length+(x?-1:1)*O)}),a&&c&&c.length?c.map((x,O)=>this.renderAnchorElement(x,O)):null};r.renderAnchorElement=function(a,c){var x=this._positionFromValue(a);x=this._valueFromPosition(x);if(!D.isNone(x)&&!isNaN(x)){var {_dragStartInfo:O,_lastMovedHandleIndex:E,id:h,layout:z,values:q,visibleElements:{labels:p}}=this,S=O&&O.index===c,P=E===c;x=this.classes("esri-slider__anchor","esri-slider__anchor-"+c,S?"esri-slider__anchor--moving":
null,P?"esri-slider__anchor--moved":null);var T=this.labels.values[c];S=this._getStyleForAnchor(a,c,S||P);var {min:F,max:M}=this.viewModel.getBoundsForValueAtIndex(c),{disabled:V,messages:aa}=this;T=2===q.length?0===c?Q.substitute(aa.rangeMinimum,{value:a}):Q.substitute(aa.rangeMaximum,{value:a}):T;return H.tsx("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":1===q.length?null:0===c?`${h}-handle-${c+1}`:c===q.length-
1?`${h}-handle-${c-1}`:`${h}-handle-${c-1} ${h}-handle-${c+1}`,"aria-label":aa.sliderValue,"aria-labelledby":p?`${h}-label-${c}`:null,"aria-orientation":z,"aria-valuemax":M.toString(),"aria-valuemin":F.toString(),"aria-valuenow":a.toString(),"aria-valuetext":T,bind:this,class:x,"data-thumb-index":c,"data-value":a,id:`${h}-handle-${c}`,key:`${h}-handle-${c}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:S,tabIndex:V?-1:0},H.tsx("span",{afterCreate:this._afterThumbCreate,
afterRemoved:this._afterThumbRemoved,bind:this,class:"esri-slider__thumb","data-thumb-index":c,"touch-action":"none"}),this.renderThumbLabel(c))}};r.renderThumbLabel=function(a){const {id:c,labels:x,labelInputsEnabled:O,state:E}=this,h=this.visibleElements.labels,z=x.values[a],q=this.classes("esri-slider__label",h?null:"esri-hidden",O&&"disabled"!==E?"esri-slider__label--interactive":null);return H.tsx("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":(!h).toString(),
bind:this,class:q,"data-thumb-index":a,key:`${c}-label-${a}`,id:`${c}-label-${a}`,role:O?"button":null,"touch-action":"none"},this._activeLabelInputIndex===a?this.renderValueInput(a):z)};r.renderValueInput=function(a){const {disabled:c,values:x}=this;return H.tsx("input",{key:`value-input-${a}`,afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:"esri-slider__label-input","data-input-type":"thumb","data-input-index":a,required:!0,tabIndex:c?-1:0,type:"text",value:this._formatInputValue(x[a],
"value",a),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})};r.renderMax=function(){const {_isMaxInputActive:a,labels:c,rangeLabelInputsEnabled:x,state:O}=this,E=this.visibleElements.rangeLabels,h=this.classes("esri-slider__max",{["esri-hidden"]:!E,["esri-slider__max--interactive"]:x&&"disabled"!==O,["esri-slider__range--active"]:a});return H.tsx("div",{"aria-hidden":(!E).toString(),afterCreate:this._afterMaxLabelCreate,bind:this,class:h,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,
role:x?"button":null,tabIndex:!this.disabled&&x?0:-1},a?this.renderMaxInput():c.max)};r.renderMin=function(){const {_isMinInputActive:a,labels:c,rangeLabelInputsEnabled:x,state:O}=this,E=this.visibleElements.rangeLabels,h=this.classes("esri-slider__min",{["esri-hidden"]:!E,["esri-slider__min--interactive"]:x&&"disabled"!==O,["esri-slider__range--active"]:a});return H.tsx("div",{"aria-hidden":(!E).toString(),afterCreate:this._afterMinLabelCreate,bind:this,class:h,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,
role:x?"button":null,tabIndex:!this.disabled&&x?0:-1},a?this.renderMinInput():c.min)};r.renderMaxInput=function(){return H.tsx("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:"esri-slider__range-input","data-input-type":"max",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})};r.renderMinInput=function(){return H.tsx("input",{afterCreate:this._afterInputCreate,
"aria-label":this.messages.minimumValue,bind:this,class:"esri-slider__range-input","data-input-type":"min",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.min,"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})};r.renderExtraContentElements=function(){return H.tsx("div",{bind:this,class:"esri-slider__extra-content"},this.extraNodes)};r.renderTicksContainer=function(){if(this.tickConfigs&&this.trackElement&&(0!==this._trackHeight||0!==this._trackWidth))return this.tickConfigs.map((a,
c)=>H.tsx("div",{key:"ticks-container",class:this.classes("esri-slider__ticks")},this.renderTicks(a,c)))};r.renderTicks=function(a,c){const {mode:x,values:O}=a;this.tickElements.getItemAt(c)||this.tickElements.add(new A,c);if("position"===x){var E=Array.isArray(O)?O:[O];return this._calculateTickPositions(E).map((h,z)=>this.renderTickGroup(a,z,c,h))}if("percent"===x&&Array.isArray(O)){const {max:h,min:z}=this,q=h-z;E=O.map(p=>this._applyPrecisionToPosition(p/100*q+z));return this._calculateTickPositions(E).map((p,
S)=>this.renderTickGroup(a,S,c,p))}E=Array.isArray(O)&&O.length?O[0]:isNaN(O)?null:O;E=this._getTickCounts(E,a);return this._calculateEquidistantTickPositions(E).map((h,z)=>this.renderTickGroup(a,z,c,h))};r.renderTickGroup=function(a,c,x,O){const E="position"===a.mode?Array.isArray(a.values)?a.values[c]:a.values:this._valueFromPosition(O);if(!D.isNone(E)&&!isNaN(E))return H.tsx("div",{afterCreate:this._afterTickGroupCreate,afterRemoved:this._afterTickGroupRemoved,bind:this,"data-config":a,"data-position":O,
"data-tick-config-index":x,"data-tick-group-index":c,"data-value":E,onclick:this._onTickGroupClick,key:`tick-group-${c}`},this.renderTickLine(a,c,x,E),a.labelsVisible?this.renderTickLabel(a,c,x,E):null)};r.renderTickLine=function(a,c,x,O){return H.tsx("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":O.toString(),bind:this,class:"esri-slider__tick","data-config":a,"data-tick-config-index":x,"data-tick-group-index":c,"data-value":O,key:`tick-label-${c}`,style:this._getPositionStyleForElement(O)})};
r.renderTickLabel=function(a,c,x,O){const E=a.labelFormatFunction?a.labelFormatFunction(O,"tick",c):this.viewModel.getLabelForValue(O,"tick",c);return H.tsx("div",{afterCreate:this._afterTickLabelCreate,"aria-label":E,"aria-valuenow":O.toString(),"aria-valuetext":E,bind:this,class:"esri-slider__tick-label","data-config":a,"data-tick-config-index":x,"data-tick-group-index":c,"data-value":O,key:`tick-label-${c}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(O)}`},E)};r._afterContainerCreate=
function(a){this.own(t.onResize(a,()=>this.scheduleRender()))};r._afterTrackCreate=function(a){this._set("trackElement",a);a.addEventListener("pointerdown",this._onTrackPointerDown);this.scheduleRender()};r._afterTrackRemoved=function(a){a.removeEventListener("pointerdown",this._onTrackPointerDown);document.removeEventListener("pointermove",this._onTrackPointerMove);document.removeEventListener("pointerup",this._onTrackPointerUp)};r._afterSegmentCreate=function(a){this.segmentElements.add(a);a.addEventListener("pointerdown",
this._onSegmentPointerDown)};r._afterSegmentRemoved=function(a){this.segmentElements.remove(a);a.removeEventListener("pointerdown",this._onSegmentPointerDown)};r._afterEffectiveSegmentCreate=function(a){this.effectiveSegmentElements.add(a)};r._afterEffectiveSegmentRemoved=function(a){this.effectiveSegmentElements.remove(a)};r._afterAnchorCreate=function(a){this._anchorElements.push(a);a.addEventListener("pointerdown",this._onAnchorPointerDown);if(this.thumbCreatedFunction){const c=a["data-thumb-index"];
a=a["data-value"];const x=this.thumbElements.getItemAt(c)||null,O=this.labelElements.getItemAt(c)||null;this.thumbCreatedFunction(c,a,x,O)}};r._afterAnchorUpdate=function(a){D.isSome(this._focusedAnchorIndex)&&a["data-thumb-index"]===this._focusedAnchorIndex&&(a.focus(),this._focusedAnchorIndex=null)};r._afterAnchorRemoved=function(a){const c=this._anchorElements.indexOf(a,0);-1<c&&this._anchorElements.splice(c,1);a.removeEventListener("pointerdown",this._onAnchorPointerDown)};r._afterThumbCreate=
function(a){this.thumbElements.add(a)};r._afterThumbRemoved=function(a){this.thumbElements.remove(a)};r._afterLabelCreate=function(a){this.labelElements.add(a);a.addEventListener("pointerdown",this._onLabelPointerDown);a.addEventListener("pointerup",this._onLabelPointerUp)};r._afterLabelRemoved=function(a){this.labelElements.remove(a);a.removeEventListener("pointerdown",this._onLabelPointerDown);a.removeEventListener("pointerup",this._onLabelPointerUp)};r._afterInputCreate=function(a){a.focus();a.select();
if(this.inputCreatedFunction){const c=a.getAttribute("data-input-type");this.inputCreatedFunction(a,c,"thumb"===c?a["data-input-index"]:null)}};r._afterTickLineCreate=function(a){const c=a["data-tick-group-index"],x=this.tickElements.getItemAt(a["data-tick-config-index"]);x.getItemAt(c)?x.getItemAt(c).tickElement=a:x.add({groupElement:null,tickElement:a,labelElement:null},c)};r._afterTickLabelCreate=function(a){const c=a["data-tick-group-index"],x=this.tickElements.getItemAt(a["data-tick-config-index"]);
x.getItemAt(c)?x.getItemAt(c).labelElement=a:x.add({groupElement:null,labelElement:a,tickElement:null},c)};r._afterTickGroupRemoved=function(a){const c=this.tickElements.items[a["data-tick-config-index"]],x=null==c?void 0:c.find(O=>O.groupElement===a);x&&c.remove(x)};r._afterTickGroupCreate=function(a){const c=a["data-config"];if(c&&c.tickCreatedFunction){var x,O,E=a["data-tick-config-index"];const h=a["data-tick-group-index"],z=a["data-value"];if(E=null==(x=this.tickElements)?void 0:null==(O=x.getItemAt(E))?
void 0:O.getItemAt(h))E.groupElement=a,c.tickCreatedFunction(z,E.tickElement||null,E.labelElement||null)}};r._afterMaxLabelCreate=function(a){this._set("maxLabelElement",a)};r._afterMinLabelCreate=function(a){this._set("minLabelElement",a)};r._onAnchorKeyDown=function(a){if(!this._isDisabled()&&"editing"!==this.state){var {target:c}=a,x=m.eventKey(a),{_anchorElements:O,values:E}=this;c=c["data-thumb-index"];var h=O[c],z=E[c],q=[G.moveAnchorUp,G.moveAnchorDown,G.moveAnchorLeft,G.moveAnchorRight];if(x===
G.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=c,this.notifyChange("state");else if(q.includes(x))a.preventDefault(),{steps:a}=this,x=x===G.moveAnchorUp||x===G.moveAnchorRight?1:-1,D.isSome(a)?this._toStep(c,this._isReversedLayout()?-1*x:x):({precision:a}=this,h=this._getPositionOfElement(h),q=this._valueFromPosition(h),x=this._isHorizontalLayout()?x:-1*x,h=0===a?this._positionFromValue(q+x):1===a?this._positionFromValue(q+.1*x):h+x,this._toPosition(c,h)),h=this.values[c],z!==h&&
this._emitThumbChangeEvent({index:c,oldValue:z,value:h});else if(x===G.moveAnchorToMax||x===G.moveAnchorToMin){a.preventDefault();const {min:p,max:S}=this._getAnchorBoundsInPixels(c);h=this._isPositionInverted()?x===G.moveAnchorToMax?p:S:x===G.moveAnchorToMin?p:S;this._toPosition(c,h);h=this.values[c];z!==h&&this._emitThumbChangeEvent({index:c,oldValue:z,value:h})}}};r._onAnchorPointerDown=function(a){if(!this._isDisabled()){var {target:c,clientX:x,clientY:O}=a,E=c["data-thumb-index"];void 0!==E&&
(a.preventDefault(),this._anchorElements[E]&&this._anchorElements[E].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:x,clientY:O,index:E,position:this._getPositionOfElement(this._anchorElements[E])},this.notifyChange("state"),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}};r._onAnchorPointerMove=function(a){if("editing"!==this.state&&this._dragStartInfo){a.preventDefault();var {values:c,_anchorElements:x,
_dragged:O,_dragStartInfo:E,_dragStartInfo:{index:h,position:z}}=this,{clientX:q,clientY:p}=a;a=O?"drag":"start";var S=this._getPositionOfElement(x[h]),P=this._applyPrecisionToPosition(this._isHorizontalLayout()?z+q-E.clientX:z+p-E.clientY);S!==P&&(S=c[h],this._dragged=!0,this._toPosition(h,P),P=this.values[h],O?S!==P&&this._emitThumbDragEvent({index:h,state:a,value:P}):this._emitThumbDragEvent({index:h,state:a,value:S}))}};r._onAnchorPointerUp=function(a){document.removeEventListener("pointerup",
this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);if(this._dragStartInfo){a.preventDefault();({index:a}=this._dragStartInfo);var c=this._dragged,x=this.values[a];this._dragged=!1;this._dragStartInfo=null;this._lastMovedHandleIndex=a;this.notifyChange("state");c?this._emitThumbDragEvent({index:a,state:"stop",value:x}):(this.scheduleRender(),"editing"!==this.state&&this._emitThumbClickEvent({index:a,value:x}))}};r._onTrackPointerDown=function(a){const {_dragStartInfo:c,
snapOnClickEnabled:x,state:O,values:E}=this;if(!this._isDisabled()&&"editing"!==O&&!c&&(document.addEventListener("pointermove",this._onTrackPointerMove),document.addEventListener("pointerup",this._onTrackPointerUp),x&&E.length)){var {steps:h}=this,{clientX:z,clientY:q}=a,p=this._getCursorPositionFromEvent(a);a=this._valueFromPosition(p);var S=this._getIndexOfNearestValue(a),P=E[S];a=E.some((F,M)=>F===P&&M!==S)&&a>P?this.values.lastIndexOf(P):S;if(!D.isNone(a)){var T=E[a];h=D.isSome(h)?this._calculateNearestStepPosition(p):
p;this._toPosition(a,h);this._dragged=!0;this._dragStartInfo={clientX:z,clientY:q,index:a,position:h};this._focusedAnchorIndex=a;this.notifyChange("state");this._emitThumbDragEvent({index:a,state:"start",value:T});h=this.values[a];T!==h&&this._emitThumbDragEvent({index:a,state:"drag",value:h});document.addEventListener("pointerup",this._onAnchorPointerUp);document.addEventListener("pointermove",this._onAnchorPointerMove)}}};r._onTrackPointerMove=function(a){a.preventDefault();this._dragged=!0};r._onTrackPointerUp=
function(a){a.preventDefault();document.removeEventListener("pointermove",this._onTrackPointerMove);document.removeEventListener("pointerup",this._onTrackPointerUp);this.snapOnClickEnabled||(this._dragged=!1);this._dragged||(a=this._getCursorPositionFromEvent(a),a=this._valueFromPosition(a),this._emitTrackClickEvent({value:a}))};r._onSegmentPointerDown=function(a){a.preventDefault();var c=a.target;const x=c["data-segment-index"],O=c["data-min-thumb-index"];c=c["data-max-thumb-index"];if(!(this._isDisabled()||
D.isNone(O)||D.isNone(c))){a.stopPropagation();this._storeTrackDimensions();document.addEventListener("pointerup",this._onSegmentPointerUp);var E=this._getAnchorDetails(O),h=this._getAnchorDetails(c);if(this.syncedSegmentsEnabled)this.segmentElements.forEach(p=>p.classList.add("esri-slider__segment--active")),this._anchorElements.forEach(p=>p.classList.add("esri-slider__anchor--active"));else{var z,q;this.segmentElements.getItemAt(x).classList.add("esri-slider__segment--active");null==(z=this._anchorElements[E.index])?
void 0:z.classList.add("esri-slider__anchor--active");null==(q=this._anchorElements[h.index])?void 0:q.classList.add("esri-slider__anchor--active")}this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(a),index:x,details:this._normalizeSegmentDetails({min:E,max:h})};this.draggableSegmentsEnabled&&(document.addEventListener("pointermove",this._onSegmentPointerMove),this.notifyChange("state"),this._emitSegmentDragEvent({index:x,state:"start",thumbIndices:[O,c]}))}};r._onSegmentPointerMove=
function(a){if(this._segmentDragStartInfo){a.preventDefault();var {_trackHeight:c,_trackWidth:x,_segmentDragStartInfo:{index:O,cursorPosition:E,details:{min:h,max:z}}}=this,{index:q,position:p,value:S}=h,{index:P,position:T,value:F}=z;this._dragged=!0;a=this._getCursorPositionFromEvent(a);if(a!==E){var M=this._positionToPercent(E);M=this._positionToPercent(a)-M;a=this._positionToPercent(p)+M;M=this._positionToPercent(T)+M;var {min:V}=this._getAnchorBoundsAsPercents(q),{max:aa}=this._getAnchorBoundsAsPercents(P),
ka=!1,la=!1;a<V?ka=!0:M>aa&&(la=!0);if(ka){const {min:Z,max:da}=this.viewModel.getBoundsForValueAtIndex(q);a=this._isPositionInverted()?da:Z;M=F+(a-S);V=M-this.values[P];this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(V):this._updateAnchorValues([q,P],[a,M])}else if(la){const {min:Z,max:da}=this.viewModel.getBoundsForValueAtIndex(P);a=this._isPositionInverted()?Z:da;M=S+(a-F);V=M-this.values[q];this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(V):this._updateAnchorValues([q,
P],[M,a])}else{V=this._isHorizontalLayout()?x:c;M=M/100*V;aa=this.values;var X=[aa[q],aa[P]];a=this._getValueForAnchorAtPosition(q,a/100*V);M=this._getValueForAnchorAtPosition(P,M);this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(a-X[0]):this._updateAnchorValues([q,P],[a,M]);[this.values[q],this.values[P]].every((Z,da)=>Z===X[da])||this._emitSegmentDragEvent({index:O,state:"drag",thumbIndices:[q,P]})}}}};r._onSegmentPointerUp=function(a){a.preventDefault();document.removeEventListener("pointerup",
this._onSegmentPointerUp);document.removeEventListener("pointermove",this._onSegmentPointerMove);if(this._segmentDragStartInfo){var {_dragged:c,max:x,min:O,values:E}=this,{index:h,details:{min:{index:z},max:{index:q}}}=this._segmentDragStartInfo;this.segmentElements.forEach(p=>p.classList.remove("esri-slider__segment--active"));this._anchorElements.forEach(p=>p.classList.remove("esri-slider__anchor--active"));if(this.draggableSegmentsEnabled){const p=E[z];this._lastMovedHandleIndex=p===E[q]?p>(x-
O)/2?z:q:null;this._dragged=!1;this._segmentDragStartInfo=null;this.notifyChange("state");this._emitSegmentDragEvent({index:h,state:"stop",thumbIndices:[z,q]})}c||(a=this._getCursorPositionFromEvent(a),a=this._valueFromPosition(a),this._emitSegmentClickEvent({index:h,value:a,thumbIndices:[z,q]}))}};r._onTickGroupClick=function(a){a=a.target;a["data-config"]&&this._emitTickClickEvent({configIndex:a["data-tick-config-index"],groupIndex:a["data-tick-group-index"],value:a["data-value"]})};r._storeTrackDimensions=
function(){if(this.trackElement){const a=this._getDimensions(this.trackElement);this._trackHeight=a.height;this._trackWidth=a.width}};r._onLabelPointerDown=function(){this._isDisabled()||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))};r._onLabelPointerMove=function(){this._isDisabled()||(this._dragged=!0)};r._onLabelPointerUp=function(a){this._isDisabled()||(a=a.target["data-thumb-index"],this.labelInputsEnabled&&
!this._dragged&&D.isSome(a)&&(this._activeLabelInputIndex=a),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove))};r._onLabelInputBlur=function(a){const {_activeLabelInputIndex:c,values:x,viewModel:O}=this;a=a.target.value;this._activeLabelInputIndex=null;this.notifyChange("state");if(a){var E=this._parseInputValue(a,"value",c);a=x[c];var {min:h,max:z}=this.viewModel.getBoundsForValueAtIndex(c);
E<h||E>z||(O.setValue(c,E),E=this.values[c],a!==E&&this._emitThumbChangeEvent({index:c,oldValue:a,value:E}))}};r._onInputKeyDown=function(a){if(!this._isDisabled()){var {target:c}=a,x=m.eventKey(a),{hideInput1:O,hideInput2:E,hideInput3:h}=G,{_activeLabelInputIndex:z,_anchorElements:q}=this;if(x===O||x===E||x===h)a.stopPropagation(),c.blur(),D.isSome(z)?q[z].focus():c.parentElement.focus()}};r._onMaxLabelClick=function(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"max-click",value:this.max}),
this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state")))};r._onMaxLabelKeyDown=function(a){this._isDisabled()||m.eventKey(a)!==G.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"))};r._onMaxInputBlur=function(a){var c=a.target.value;this._isMaxInputActive=!1;this.notifyChange("state");c&&(a=this.max,c=this._parseInputValue(c,"max"),c<=this.min||(this.viewModel.set("max",c),this.max!==a&&this._emitMaxChangeEvent({oldValue:a,value:this.max})))};r._onMinLabelClick=
function(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"min-click",value:this.min}),this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state")))};r._onMinLabelKeyDown=function(a){this._isDisabled()||m.eventKey(a)!==G.showInput||(this._isMinInputActive=!0,this.notifyChange("state"))};r._onMinInputBlur=function(a){var c=a.target.value;this._isMinInputActive=!1;this.notifyChange("state");c&&(a=this.min,c=this._parseInputValue(c,"min"),c>=this.max||(this.viewModel.set("min",
c),this.min!==a&&this._emitMinChangeEvent({oldValue:a,value:this.min})))};r._isDisabled=function(){return this.disabled||"disabled"===this.state};r._positionFromValue=function(a){const {max:c,min:x}=this,O=c-x;if(0===O)return 0;const {_trackHeight:E,_trackWidth:h}=this,z=this._isHorizontalLayout();a=z?parseFloat((h*(a-x)/O).toFixed(2)):parseFloat((E*(c-a)/O).toFixed(2));this._isReversedLayout()&&(a=z?h-a:E-a);return a};r._valueFromPosition=function(a){const {_trackHeight:c,_trackWidth:x,max:O,min:E,
precision:h}=this,z=O-E;a=this._isHorizontalLayout()?a*z/x+E:z*(1E3-a/c*1E3)/1E3+E;this._isReversedLayout()&&(a=O+E-a);return parseFloat(a.toFixed(h))};r._positionToPercent=function(a){const {_trackHeight:c,_trackWidth:x}=this,O=this._isHorizontalLayout()?x:c;return this._applyPrecisionToPosition(100*a/O)};r._applyPrecisionToPosition=function(a){return parseFloat(a.toFixed(this._positionPrecision))};r._isPositionInverted=function(){const {layout:a}=this;return"horizontal-reversed"===a||"vertical"===
a};r._isHorizontalLayout=function(){return this.layout.includes("horizontal")};r._isReversedLayout=function(){return this.layout.includes("reversed")};r._normalizeSegmentDetails=function(a){if(this._isPositionInverted()){const {min:c,max:x}=a;return{min:x,max:c}}return a};r._parseInputValue=function(a,c,x){return this.inputParseFunction?this.inputParseFunction(a,c,x):this.viewModel.defaultInputParseFunction(a)};r._formatInputValue=function(a,c,x){return this.inputFormatFunction?this.inputFormatFunction(a,
c,x):this.viewModel.defaultInputFormatFunction(a)};r._getAnchorDetails=function(a){a=[...this.values].sort((O,E)=>O-E)[a];const c=this.values.indexOf(a),x=this._getPositionOfElement(this._anchorElements[c]);return{index:c,position:x,value:a}};r._updateAnchorStyle=function(a,c){if(a=this._anchorElements[a])this._isHorizontalLayout()?a.style.left=`${c}`:a.style.top=`${c}`};r._getStyleForAnchor=function(a,c,x){a=this._getPositionStyleForElement(a);if(1===this.values.length)return`${a}`;c=this._zIndices[c];
return`${a}; z-index: ${x?this._zIndexOffset+c:c}`};r._getPositionStyleForElement=function(a){a=this._positionFromValue(a);a=this._positionToPercent(a);return`${this._isHorizontalLayout()?"left":"top"}: ${a+"%"}`};r._getPositionOfElement=function(a){const c=this._getDimensions(a.offsetParent);a=this._getDimensions(a);return this._isHorizontalLayout()?this._applyPrecisionToPosition(a.left-c.left):this._applyPrecisionToPosition(a.top-c.top)};r._updateAnchorValues=function(a,c){a.forEach((x,O)=>this._toValue(x,
c[O]))};r._updateAnchorValuesByDifference=function(a){const {min:c,max:x,values:O}=this;O.forEach((E,h)=>this._toValue(h,Math.max(Math.min(E+a,x),c)))};r._toValue=function(a,c){if(D.isSome(this.steps)){const x=this._getStepValues();c=this._getIndexOfNearestStepValue(c);c=x[c]}this._updateAnchorStyle(a,this._getPositionStyleForElement(c));this.viewModel.setValue(a,c)};r._toPosition=function(a,c){c=D.isSome(this.steps)?this._getStepValueForAnchorAtPosition(a,c):this._getValueForAnchorAtPosition(a,c);
this._updateAnchorStyle(a,this._getPositionStyleForElement(c));this.viewModel.setValue(a,c)};r._getValueForAnchorAtPosition=function(a,c){const {min:x,max:O}=this._getAnchorBoundsInPixels(a),{min:E,max:h}=this.viewModel.getBoundsForValueAtIndex(a);a=null;let z;this._isPositionInverted()?(a=E,z=h):(a=h,z=E);a=c>O?a:c<x?z:this._valueFromPosition(c);a>h?a=h:a<E&&(a=E);return a};r._getStepValueForAnchorAtPosition=function(a,c){const x=this._getStepValues();c=this._calculateNearestStepPosition(c);a=this._getValueForAnchorAtPosition(a,
c);a=this._getIndexOfNearestStepValue(a);return x[a]};r._getAnchorBoundsAsPercents=function(a){const {min:c,max:x}=this._getAnchorBoundsInPixels(a);return{min:this._positionToPercent(c),max:this._positionToPercent(x)}};r._getAnchorBoundsInPixels=function(a){const {_anchorElements:c,_trackHeight:x,_trackWidth:O,effectiveMax:E,effectiveMin:h,thumbsConstrained:z}=this,q=c[a-1];a=c[a+1];var p=this._isHorizontalLayout()?O:x;let S;this._isPositionInverted()?(p=D.isSome(h)?this._positionFromValue(h):p,S=
D.isSome(E)?this._positionFromValue(E):0):(p=D.isSome(E)?this._positionFromValue(E):p,S=D.isSome(h)?this._positionFromValue(h):0);return z?this._isPositionInverted()?{max:q?this._getPositionOfElement(q):p,min:a?this._getPositionOfElement(a):S}:{max:a?this._getPositionOfElement(a):p,min:q?this._getPositionOfElement(q):S}:{max:p,min:S}};r._getIndexOfNearestValue=function(a){return this.values.indexOf(this.values.reduce((c,x)=>Math.abs(x-a)<Math.abs(c-a)?x:c))};r._getCursorPositionFromEvent=function(a){const c=
this._getDimensions(this.trackElement);return this._isHorizontalLayout()?a.clientX-c.left:a.clientY-c.top};r._getStepValues=function(){const {steps:a}=this;if(Array.isArray(a))return a;const {max:c,min:x}=this,O=Math.ceil((c-x)/a),E=[];for(let h=0;h<=O;h++){const z=x+a*h;E.push(z>c?c:z)}return E};r._toStep=function(a,c){const {values:x,viewModel:O}=this,E=x[a];var h=this._getStepValues(),z=h.indexOf(E);let q=null;-1<z?(c=h[z+c],isNaN(c)&&(c=h[z]),h=this._positionFromValue(c),q=this._getStepValueForAnchorAtPosition(a,
h)):(z=this._getIndexOfNearestStepValue(E),q=h[z+c]);O.setValue(a,q)};r._getIndexOfNearestStepValue=function(a){var {steps:c}=this;if(D.isNone(c))return null;c=this._getStepValues();const x=c.reduce((O,E)=>Math.abs(E-a)<Math.abs(O-a)?E:O);return c.indexOf(x)};r._calculateNearestStepPosition=function(a){a=this._valueFromPosition(a);a=this._getIndexOfNearestStepValue(a);const c=this._getStepValues();return this._positionFromValue(c[a])};r._getTickCounts=function(a,c){({mode:c}=c);return"count"===c||
"position"===c?a||0:"percent"===c?100/a||0:0};r._calculateTickPositions=function(a){return a.map(c=>this._positionFromValue(c))};r._calculateEquidistantTickPositions=function(a){const {_trackWidth:c,_trackHeight:x}=this,O=this._isHorizontalLayout()?c:x,E=O/(a-1),h=[];if(1===a)return[O/2];for(let z=0;z<a;z++){const q=z*E;q<=O&&h.push(q)}return h};r._getDimensions=function(a){try{return a.getBoundingClientRect()}catch(c){if("object"===typeof c&&null!==c)return new DOMRect(0,0,0,0);throw c;}};r._emitTrackClickEvent=
function(a){this.emit("track-click",{...a,type:"track-click"})};r._emitTickClickEvent=function(a){this.emit("tick-click",{...a,type:"tick-click"})};r._emitMaxChangeEvent=function(a){this.emit("max-change",{...a,type:"max-change"})};r._emitMinChangeEvent=function(a){this.emit("min-change",{...a,type:"min-change"})};r._emitThumbChangeEvent=function(a){this.emit("thumb-change",{...a,type:"thumb-change"})};r._emitThumbClickEvent=function(a){this.emit("thumb-click",{...a,type:"thumb-click"})};r._emitThumbDragEvent=
function(a){this.emit("thumb-drag",{...a,type:"thumb-drag"})};r._emitSegmentClickEvent=function(a){this.emit("segment-click",{...a,type:"segment-click"})};r._emitSegmentDragEvent=function(a){this.emit("segment-drag",{...a,type:"segment-drag"})};r._emitRangeLabelClickEvent=function(a){this.emit(a.type,{...a})};N._createClass(w,[{key:"layout",set:function(a){["vertical","vertical-reversed","horizontal","horizontal-reversed"].includes(a)||(a="horizontal");this._set("layout",a)}},{key:"state",get:function(){const {_activeLabelInputIndex:a,
_isMaxInputActive:c,_isMinInputActive:x,_dragStartInfo:O,_segmentDragStartInfo:E,disabled:h,viewModel:z}=this,q=D.isSome(O)||D.isSome(E);return h?"disabled":null!==a||c||x?"editing":q?"dragging":z.state}},{key:"tickConfigs",set:function(a){this._set("tickConfigs",a);this.scheduleRender()}}]);return w}(e);n.__decorate([f.property()],l.prototype,"disabled",void 0);n.__decorate([f.property()],l.prototype,"draggableSegmentsEnabled",void 0);n.__decorate([y.aliasOf("viewModel.effectiveMax")],l.prototype,
"effectiveMax",void 0);n.__decorate([y.aliasOf("viewModel.effectiveMin")],l.prototype,"effectiveMin",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"effectiveSegmentElements",void 0);n.__decorate([f.property()],l.prototype,"extraNodes",void 0);n.__decorate([f.property()],l.prototype,"inputCreatedFunction",void 0);n.__decorate([y.aliasOf("viewModel.inputFormatFunction")],l.prototype,"inputFormatFunction",void 0);n.__decorate([y.aliasOf("viewModel.inputParseFunction")],l.prototype,"inputParseFunction",
void 0);n.__decorate([f.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"labelElements",void 0);n.__decorate([f.property()],l.prototype,"labelInputsEnabled",void 0);n.__decorate([y.aliasOf("viewModel.labelFormatFunction")],l.prototype,"labelFormatFunction",void 0);n.__decorate([y.aliasOf("viewModel.labels")],l.prototype,"labels",void 0);n.__decorate([f.property({value:"horizontal"})],l.prototype,"layout",
null);n.__decorate([y.aliasOf("viewModel.max")],l.prototype,"max",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"maxLabelElement",void 0);n.__decorate([f.property(),d.messageBundle("esri/widgets/Slider/t9n/Slider")],l.prototype,"messages",void 0);n.__decorate([y.aliasOf("viewModel.min")],l.prototype,"min",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"minLabelElement",void 0);n.__decorate([y.aliasOf("viewModel.precision")],l.prototype,"precision",void 0);n.__decorate([f.property()],
l.prototype,"rangeLabelInputsEnabled",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"segmentElements",void 0);n.__decorate([f.property()],l.prototype,"snapOnClickEnabled",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"state",null);n.__decorate([f.property()],l.prototype,"steps",void 0);n.__decorate([f.property()],l.prototype,"syncedSegmentsEnabled",void 0);n.__decorate([y.aliasOf("viewModel.thumbsConstrained")],l.prototype,"thumbsConstrained",void 0);n.__decorate([f.property()],
l.prototype,"thumbCreatedFunction",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"thumbElements",void 0);n.__decorate([f.property()],l.prototype,"tickConfigs",null);n.__decorate([f.property({readOnly:!0})],l.prototype,"tickElements",void 0);n.__decorate([f.property({readOnly:!0})],l.prototype,"trackElement",void 0);n.__decorate([y.aliasOf("viewModel.values")],l.prototype,"values",void 0);n.__decorate([f.property()],l.prototype,"viewModel",void 0);n.__decorate([f.property()],l.prototype,
"visibleElements",void 0);n.__decorate([J.cast("visibleElements")],l.prototype,"castVisibleElements",null);return l=n.__decorate([b.subclass("esri.widgets.Slider")],l)})},"esri/widgets/Slider/SliderViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f){const b=m.getLogger("esri.widgets.Slider.SliderViewModel");l=function(e){function g(d){d=e.call(this,d)||this;d.precision=4;d.thumbsConstrained=!0;return d}N._inheritsLoose(g,e);var t=g.prototype;t.toPrecision=function(d){return parseFloat(d.toFixed(this.precision))};t.defaultLabelFormatFunction=function(d){const {max:H,min:Q,precision:G}=this;return parseFloat(d.toFixed(10<H-Q?2:G)).toString()};t.defaultInputFormatFunction=function(d){return d.toString()};t.defaultInputParseFunction=
function(d){return parseFloat(d)};t.getBounds=function(){const {effectiveMax:d,effectiveMin:H,max:Q,min:G}=this;return{min:D.isSome(H)?Math.max(G,H):G,max:D.isSome(d)?Math.min(Q,d):Q}};t.getBoundsForValueAtIndex=function(d){const {thumbsConstrained:H,values:Q}=this,{min:G,max:I}=this.getBounds();if(H){const k=d-1;d+=1;return{min:D.isSome(Q[k])?Q[k]:G,max:D.isSome(Q[d])?Q[d]:I}}return{min:G,max:I}};t.getLabelForValue=function(d,H,Q){return D.isNone(d)?null:this.labelFormatFunction?this.labelFormatFunction(d,
H,Q):this.defaultLabelFormatFunction(d)};t.setMax=function(d){const {max:H,values:Q}=this;if(isNaN(d))this._logError("slider:invalid-value","Supplied value for property 'max' is NaN.");else if(null===d)this._set("max",null);else if(d=this.toPrecision(d),H!==d&&(this._set("max",d),Q&&Q.length))for(let G=0;G<Q.length;G++)d<Q[G]&&this.setValue(G,d)};t.setMin=function(d){const {min:H,values:Q}=this;if(isNaN(d))this._logError("slider:invalid-value","Supplied value for property 'min' is NaN.");else if(null===
d)this._set("min",null);else if(d=this.toPrecision(d),H!==d&&(this._set("min",d),Q&&Q.length))for(let G=0;G<Q.length;G++)d>Q[G]&&this.setValue(G,d)};t.setEffectiveMax=function(d){isNaN(d)?this._logError("slider:invalid-value","Supplied value for property 'effectiveMax' is NaN."):null===d?this._set("effectiveMax",null):(d=this.toPrecision(d),this.effectiveMax!==d&&this._set("effectiveMax",this._applyBoundsToValue(d)))};t.setEffectiveMin=function(d){isNaN(d)?this._logError("slider:invalid-value","Supplied value for property 'effectiveMin' is NaN."):
null===d?this._set("effectiveMin",null):(d=this.toPrecision(d),this.effectiveMin!==d&&this._set("effectiveMin",this._applyBoundsToValue(d)))};t.setValue=function(d,H){if(isNaN(H))this._logError("slider:invalid-value","Supplied value for member of property 'values' is NaN.");else{var {values:Q}=this,G=Q[d];H=this.toPrecision(H);G!==H&&(Q=[...Q],Q[d]=H,this._set("values",Q),this.notifyChange("labels"))}};t._applyBoundsToValue=function(d){const {max:H,min:Q}=this;return D.isSome(Q)&&d<Q?Q:D.isSome(H)&&
d>H?H:d};t._logError=function(d,H,Q){b.error(new A(d,H,Q))};N._createClass(g,[{key:"effectiveMax",set:function(d){this.setEffectiveMax(d)}},{key:"effectiveMin",set:function(d){this.setEffectiveMin(d)}},{key:"labelFormatFunction",set:function(d){this._set("labelFormatFunction",d)}},{key:"inputFormatFunction",set:function(d){this._set("inputFormatFunction",d)}},{key:"inputParseFunction",set:function(d){this._set("inputParseFunction",d)}},{key:"labels",get:function(){const {max:d,min:H,values:Q}=this,
G=Q&&Q.length?Q.map((I,k)=>this.getLabelForValue(I,"value",k)):[];return{max:this.getLabelForValue(d,"max"),min:this.getLabelForValue(H,"min"),values:G}}},{key:"max",set:function(d){this.setMax(d)}},{key:"min",set:function(d){this.setMin(d)}},{key:"state",get:function(){const {max:d,min:H}=this;return D.isSome(d)&&D.isSome(H)&&d>H?"ready":"disabled"}},{key:"values",set:function(d){const {max:H,min:Q}=this,G=this.values;G&&d&&G.length===d.length&&G.every((I,k)=>I===d[k])||(this._set("values",null),
d&&d.length&&(D.isSome(Q)&&d.some(I=>I<Q)&&(this.min=Math.min(...d)),D.isSome(H)&&d.some(I=>I>H)&&(this.max=Math.max(...d))),this._set("values",d))}}]);return g}(l);n.__decorate([y.property()],l.prototype,"effectiveMax",null);n.__decorate([y.property()],l.prototype,"effectiveMin",null);n.__decorate([y.property()],l.prototype,"labelFormatFunction",null);n.__decorate([y.property()],l.prototype,"inputFormatFunction",null);n.__decorate([y.property()],l.prototype,"inputParseFunction",null);n.__decorate([y.property({readOnly:!0})],
l.prototype,"labels",null);n.__decorate([y.property()],l.prototype,"max",null);n.__decorate([y.property()],l.prototype,"min",null);n.__decorate([y.property()],l.prototype,"precision",void 0);n.__decorate([y.property({readOnly:!0})],l.prototype,"state",null);n.__decorate([y.property()],l.prototype,"thumbsConstrained",void 0);n.__decorate([y.property()],l.prototype,"values",null);return l=n.__decorate([f.subclass("esri.widgets.Slider.SliderViewModel")],l)})},"esri/widgets/ScaleRangeSlider":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/domUtils ../core/events ../core/HandleOwner ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Slider ./Widget ./ScaleRangeSlider/scalePreviewUtils ./ScaleRangeSlider/ScaleRanges ./ScaleRangeSlider/ScaleRangeSliderViewModel ./support/Popover ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils ../intl/number ../intl/substitute".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b,e,g,t,d,H,Q,G,I,k,w,r,a){const c={preview:!0,scaleMenus:{maxScaleMenu:!0,minScaleMenu:!0}},x={maximumFractionDigits:0};l=function(O){function E(z,q){var p=O.call(this,z,q)||this;p._activeMenu=null;p._activeMenuNode=null;p._activeMenuToggleNode=null;p._activeThumb=null;p._customMaxScale=-1;p._customMinScale=-1;p._focusedMenuItemIndex=-1;p._maxScaleMenuPopover=new Q({owner:N._assertThisInitialized(p),placement:"bottom-end",anchorElement:()=>p._activeMenuToggleNode,renderContentFunction:()=>
p._maxScaleMenuEnabled?p.renderMaxScaleMenu():null});p._minScaleMenuPopover=new Q({owner:N._assertThisInitialized(p),placement:"bottom-start",anchorElement:()=>p._activeMenuToggleNode,renderContentFunction:()=>p._minScaleMenuEnabled?p.renderMinScaleMenu():null});p._previewAutoCloseTimeoutId=null;p._previewPopover=new Q({owner:N._assertThisInitialized(p),placement:"top",anchorElement:()=>0===p._activeThumb?p._minThumbNode:p._maxThumbNode,offset:[0,16],renderContentFunction:p.renderScalePreview});p._scaleMenuNode=
null;p._slider=new e({thumbCreatedFunction:(S,P,T)=>{0===S&&(p._minThumbNode=T);1===S&&(p._maxThumbNode=T);p.own([m.on(T,"mouseenter",()=>{const {visibleElements:{preview:F}}=N._assertThisInitialized(p);p._activeThumb=S;p._previewPopover.open=F;p.scheduleRender()}),m.on(T,"mouseleave",()=>{p._previewAutoCloseTimeoutId||(p._activeThumb=null,p._previewPopover.open=!1,p.scheduleRender())})])}});p.disabled=!1;p.effectiveMaxScale=null;p.effectiveMinScale=null;p.label=void 0;p.layer=null;p.maxScale=null;
p.maxScaleLimit=null;p.messages=null;p.minScale=null;p.minScaleLimit=null;p.region="US";p.view=null;p.viewModel=new H;p.visibleElements=c;p._handleScaleMenuToggleClick=S=>{S=S.currentTarget;const P=S.getAttribute("data-type");p.handles.remove("menu-closing-click-handle");P===p._activeMenu?(p._setActiveMenu(null),p._activeMenuToggleNode=null):(p._setActiveMenu(P),p._activeMenuToggleNode=S,p.handles.add(m.on(document,"mousedown",T=>{T=T.target;const F=A.closest(T,".esri-scale-range-slider__scale-menu-toggle"),
M=F&&F.getAttribute("data-type");F&&M===p._activeMenu||M||!p._scaleMenuNode||p._scaleMenuNode.contains(T)||(p._setActiveMenu(null),p.handles.remove("menu-closing-click-handle"),p.scheduleRender())}),"menu-closing-click-handle"))};p._afterMenuListCreate=S=>{p._activeMenuNode=S;S.children[0].focus({preventScroll:!0})};p._handleCustomScaleEntry=S=>{p._setScaleFromMenuSelection(S);p._customMaxScale=-1;p._customMinScale=-1};p._handleCustomScaleInputBlur=()=>{"max"===p._activeMenu?p._customMaxScale=-1:
p._customMinScale=-1};p._handleCustomScaleInputKeyDown=S=>{var P=S.currentTarget;const {handleCustomScaleSelect:T}=P["data-render-props"],{key:F,ctrlKey:M,metaKey:V}=S,{viewModel:{scaleRanges:aa}}=N._assertThisInitialized(p);"Enter"===F?(P=P.value.replace(/.*\(/,"").replace(/\).*$/,"").replace(/.*:/,"").replace(/[^\d.\s]/g,""),P=parseFloat(P),T(isNaN(P)?-1:aa.clampScale(P)),S.preventDefault(),S.stopPropagation()):1<F.length||M||V||/[:,.\d]/.test(F)||(S.preventDefault(),S.stopPropagation())};p._handleScaleMenuKeyDown=
S=>{var P=m.eventKey(S);if("Escape"===P||"Tab"===P)p._setActiveMenu(null),p._activeMenuToggleNode.focus();else if("ArrowUp"===P||"ArrowDown"===P){var T=p._activeMenuNode.children,F=p._focusedMenuItemIndex;P="ArrowUp"===P?(0===F?T.length:F)-1:(F+1)%T.length;S.preventDefault();S.stopPropagation();T[P].focus();p._focusedMenuItemIndex=P}};return p}N._inheritsLoose(E,O);var h=E.prototype;h.initialize=function(){this.own([y.watch(()=>this.viewModel,z=>this._slider.viewModel=z?z.sliderViewModel:null,y.initial),
y.watch(()=>this._interactive,z=>{this._slider.disabled=!z;z||this._setActiveMenu(null)},y.initial),this._slider.on("thumb-drag",({index:z})=>{const {visibleElements:{preview:q}}=this;this._activeThumb=z;this._previewPopover.open=q;clearTimeout(this._previewAutoCloseTimeoutId);this._previewAutoCloseTimeoutId=setTimeout(()=>{this._activeThumb=this._previewAutoCloseTimeoutId=null;this._previewPopover.open=!1;this.scheduleRender()},250)}),y.when(()=>{var z;return!0===(null==(z=this.view)?void 0:z.stationary)},
()=>this.scheduleRender())])};h.destroy=function(){this._previewPopover.destroy();this._previewPopover=null;this._maxScaleMenuPopover.destroy();this._maxScaleMenuPopover=null;this._minScaleMenuPopover.destroy();this._minScaleMenuPopover=null;this._slider.destroy();this._slider=null};h.castVisibleElements=function(z){return{...c,...z,scaleMenus:"boolean"===typeof(null==z?void 0:z.scaleMenus)?z.scaleMenus:{...c.scaleMenus,...null==z?void 0:z.scaleMenus}}};h.render=function(){const {_interactive:z,_slider:q,
label:p,messages:S,view:P,viewModel:{scaleRanges:T,state:F}}=this,M=S.scaleRangeLabels[T.findScaleRangeByIndex(q.values[0]).id],V=S.scaleRangeLabels[T.findScaleRangeByIndex(q.values[1]).id];q.layout=w.isRTL(this.container)?"horizontal-reversed":"horizontal";return k.tsx("div",{"aria-label":p,class:this.classes("esri-scale-range-slider","esri-widget",z?null:"esri-disabled")},"ready"===F&&P?this.renderCurrentScaleIndicator():null,q.render(),k.tsx("div",{class:"esri-scale-range-slider__scale-menu-container",
key:"scale-menu-toggles"},this._minScaleMenuEnabled?this.renderScaleMenuToggle("min",M):null,this._maxScaleMenuEnabled?this.renderScaleMenuToggle("max",V):null))};h.renderMinScaleMenu=function(){const {effectiveMaxScale:z,minScaleLimit:q,view:p,viewModel:{scaleRanges:S}}=this,P=p?p.scale:void 0;return this.renderScaleMenu({type:"min",min:q,max:S.findScaleRange(z).minScale,map:P})};h.renderMaxScaleMenu=function(){const {effectiveMinScale:z,maxScaleLimit:q,view:p,viewModel:{scaleRanges:S}}=this,P=p?
p.scale:void 0;return this.renderScaleMenu({type:"max",min:S.findScaleRange(z).maxScale,max:q,map:P})};h.renderScalePreview=function(){const {_activeThumb:z,_slider:q,region:p,viewModel:{scaleRanges:S}}=this;var P=0===z?q.values[0]:q.values[1];P=Object.keys(d.RecommendedScales).indexOf(S.findScaleRangeByIndex(P).id);P={backgroundImage:t.getScalePreviewSource(p),backgroundPosition:t.getScalePreviewSpriteBackgroundPosition(P)};return k.tsx("div",{class:"esri-scale-range-slider__scale-preview"},k.tsx("div",
{class:"esri-scale-range-slider__scale-preview-thumbnail",styles:P}))};h.renderScaleMenu=function({map:z,min:q,max:p,type:S}){const P=d.fromScaleRange({minScale:q,maxScale:p}),T=this.messages.featuredScaleLabels,F=d.RecommendedScales;q=Object.keys(F).filter(ka=>P.contains(F[ka])).map(ka=>this.renderScaleMenuItem({scaleLabel:T[ka],scaleValue:F[ka],valueVisible:"world"!==ka,handleNamedScaleSelect:this._handleRecommendedScaleClick}));const {_customMaxScale:M,_customMinScale:V,messages:aa}=this;return k.tsx("div",
{bind:this,class:"esri-scale-range-slider__scale-menu","data-type":S,id:`${this.id}__scale-menu--${S}`,key:`${S}-scale-menu`,afterCreate:w.storeNode,"data-node-ref":"_scaleMenuNode",onkeydown:this._handleScaleMenuKeyDown},k.tsx("div",{class:"esri-scale-range-slider__scale-menu-scroller"},k.tsx("ul",{class:"esri-scale-range-slider__scale-menu-list",afterCreate:this._afterMenuListCreate},this.renderScaleMenuItem({scaleValue:"max"===S?M:V,scaleLabel:aa.featuredScaleLabels.custom,valueVisible:!1,handleNamedScaleSelect:this._handleScaleSelection,
handleCustomScaleSelect:this._handleCustomScaleEntry}),null!=z?this.renderScaleMenuItem({scaleValue:z,scaleLabel:aa.featuredScaleLabels.current,valueVisible:!0,handleNamedScaleSelect:this._handleRecommendedScaleClick}):null,q)))};h._handleScaleSelection=function(){"max"===this._activeMenu?this._customMaxScale=this.effectiveMaxScale:this._customMinScale=this.effectiveMinScale};h.renderScaleMenuToggle=function(z,q){const {_activeMenu:p,_interactive:S}=this,P=p===z;return k.tsx("button",{"aria-controls":P?
`${this.id}__scale-menu--${z}`:"","aria-pressed":P?"true":"false",class:this.classes("esri-scale-range-slider__scale-menu-toggle",P?"esri-scale-range-slider__scale-menu-toggle--active":null),"data-type":z,key:`${z}-scale-menu-toggle`,onclick:this._handleScaleMenuToggleClick,disabled:!S,type:"button"},k.tsx("div",{class:"esri-scale-range-slider__scale-menu-toggle-text","aria-label":q,title:q},q),k.tsx("span",{class:this.classes("esri-scale-range-slider__scale-menu-toggle-icon","esri-icon-down"),"aria-hidden":"true"}))};
h.renderScaleMenuItem=function(z){const {scaleValue:q,scaleLabel:p,valueVisible:S,handleNamedScaleSelect:P,handleCustomScaleSelect:T=null}=z;var {id:F}=this;F=`${F}__custom-scale-input`;return k.tsx("li",{bind:this,class:"esri-scale-range-slider__scale-menu-item","data-scale":q,key:p,onclick:P,onkeydown:P,tabIndex:-1},k.tsx("label",{class:"esri-scale-range-slider__scale-item-label",for:F},p),-1<q?T?k.tsx("input",{afterCreate:this._focusAndSelectInputOnCreate,class:this.classes("esri-scale-range-slider__scale-item-value",
"esri-scale-range-slider__scale-item-value--editable"),"data-render-props":z,id:F,key:"value",value:`1:${r.formatNumber(q,x)}`,onkeydown:this._handleCustomScaleInputKeyDown,onblur:this._handleCustomScaleInputBlur}):S?k.tsx("div",{class:"esri-scale-range-slider__scale-item-value",key:"value"},`1:${r.formatNumber(q,x)}`):null:null)};h._focusAndSelectInputOnCreate=function(z){z.focus();z.select()};h.renderCurrentScaleIndicator=function(){const {_slider:z,messages:q,view:p,viewModel:{scaleRanges:S}}=
this;var P=S.clampScale(p.scale),T=this.viewModel.mapScaleToSlider(P);P=T/z.max;T=q.scaleRangeLabels[S.findScaleRangeByIndex(T).id];T=a.substitute(q.currentScaleTooltip,{scaleLabel:T});return k.tsx("div",{class:"esri-scale-range-slider__scale-indicator-container",key:"scale-indicator"},k.tsx("div",{"aria-label":T,class:"esri-scale-range-slider__scale-indicator",styles:{left:`${(w.isRTL(this.container)?-1:1)*P*100}%`},title:T},this.renderCurrentScaleIndicatorIcon()))};h.renderCurrentScaleIndicatorIcon=
function(){return k.tsx("svg",{class:"esri-scale-range-slider__scale-indicator-icon",height:"8",width:"8",viewBox:"0 0 8 8",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},k.tsx("polygon",{points:"4 0 8 8 0 8"}))};h._handleRecommendedScaleClick=function(z){this._setScaleFromMenuSelection(Number(z.currentTarget["data-scale"]))};h._setScaleFromMenuSelection=function(z){"max"===this._activeMenu?this.maxScale=Math.min(z,this.effectiveMinScale-1):this.minScale=Math.max(z,this.effectiveMaxScale+1);this._setActiveMenu(null);
this._activeMenuToggleNode.focus()};h._setActiveMenu=function(z){this._activeMenu=z;this._maxScaleMenuPopover.open="max"===z;this._minScaleMenuPopover.open="min"===z;this._focusedMenuItemIndex=z?0:-1};N._createClass(E,[{key:"_maxScaleMenuEnabled",get:function(){const {scaleMenus:z}=this.visibleElements;return!0===z||"boolean"!==typeof z&&z.maxScaleMenu}},{key:"_minScaleMenuEnabled",get:function(){const {scaleMenus:z}=this.visibleElements;return!0===z||"boolean"!==typeof z&&z.minScaleMenu}},{key:"_interactive",
get:function(){return"disabled"!==this.get("viewModel.state")&&!this.disabled}}]);return E}(D.HandleOwnerMixin(g));n.__decorate([v.property()],l.prototype,"_maxScaleMenuEnabled",null);n.__decorate([v.property()],l.prototype,"_minScaleMenuEnabled",null);n.__decorate([v.property()],l.prototype,"_slider",void 0);n.__decorate([v.property({readOnly:!0})],l.prototype,"_interactive",null);n.__decorate([v.property()],l.prototype,"disabled",void 0);n.__decorate([v.property({aliasOf:"viewModel.effectiveMaxScale"})],
l.prototype,"effectiveMaxScale",void 0);n.__decorate([v.property({aliasOf:"viewModel.effectiveMinScale"})],l.prototype,"effectiveMinScale",void 0);n.__decorate([v.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l.prototype,"label",void 0);n.__decorate([v.property({aliasOf:"viewModel.layer"})],l.prototype,"layer",void 0);n.__decorate([v.property({aliasOf:"viewModel.maxScale"})],l.prototype,"maxScale",void 0);n.__decorate([v.property({aliasOf:"viewModel.maxScaleLimit"})],l.prototype,
"maxScaleLimit",void 0);n.__decorate([v.property(),I.messageBundle("esri/widgets/ScaleRangeSlider/t9n/ScaleRangeSlider")],l.prototype,"messages",void 0);n.__decorate([v.property({aliasOf:"viewModel.minScale"})],l.prototype,"minScale",void 0);n.__decorate([v.property({aliasOf:"viewModel.minScaleLimit"})],l.prototype,"minScaleLimit",void 0);n.__decorate([v.property()],l.prototype,"region",void 0);n.__decorate([v.property({aliasOf:"viewModel.view"})],l.prototype,"view",void 0);n.__decorate([v.property()],
l.prototype,"viewModel",void 0);n.__decorate([v.property()],l.prototype,"visibleElements",void 0);n.__decorate([f.cast("visibleElements")],l.prototype,"castVisibleElements",null);n.__decorate([G.accessibleHandler()],l.prototype,"_handleScaleSelection",null);n.__decorate([G.accessibleHandler()],l.prototype,"_handleRecommendedScaleClick",null);return l=n.__decorate([b.subclass("esri.widgets.ScaleRangeSlider")],l)})},"esri/widgets/ScaleRangeSlider/scalePreviewUtils":function(){define(["exports","../../assets",
"../../intl","../../intl/locale"],function(N,n,l,A){const m=A.getLocale().substr(0,2);var D;(function(L){L.ar="ar";L.bg="bg";L.cs="cs";L.da="da";L.de="de";L.el="el";L.en="en";L.es="es";L.et="et";L.fi="fi";L.fr="fr";L.is="is";L.it="it";L.ja="ja";L.ko="ko";L.lt="lt";L.lv="lv";L.nl="nl";L.nn="nn";L.pl="pl";L.pt="pt";L.ro="ro";L.ru="ru";L.sk="sk";L.sv="sv";L.th="th";L.zh="zh"})(D||(D={}));const y={ae:D.en,ar:D.es,at:D.de,au:D.en,be:D.nl,bg:D.bg,bo:D.es,br:D.pt,ca:D.en,ch:D.de,ci:D.fr,cl:D.es,cn:D.zh,
co:D.es,cr:D.es,cz:D.cs,de:D.de,dk:D.da,ee:D.et,eg:D.en,es:D.es,fi:D.fi,fr:D.fr,gb:D.en,gl:D.da,gr:D.el,gt:D.es,hk:D.en,id:D.en,ie:D.en,il:D.en,in:D.en,iq:D.ar,is:D.is,it:D.it,jp:D.ja,ke:D.en,kr:D.ko,kw:D.ar,li:D.de,lt:D.lt,lu:D.en,lv:D.lv,ma:D.fr,mg:D.fr,ml:D.fr,mo:D.en,mx:D.es,my:D.en,ni:D.es,nl:D.nl,no:D.nn,nz:D.en,pe:D.es,pl:D.pl,pr:D.es,pt:D.pt,ro:D.ro,ru:D.ru,rw:D.en,se:D.sv,sg:D.en,sk:D.sk,sr:D.nl,sv:D.es,th:D.th,tn:D.fr,tw:D.zh,us:D.en,ve:D.es,vi:D.en,wo:D.en,za:D.en},v="ar-iq ar-kw bg-bg cs-cz da-dk da-gl de-at de-ch de-de de-li el-gr en-ae en-au en-ca en-eg en-gb en-hk en-id en-ie en-il en-in en-iq en-ke en-lu en-mo en-my en-nz en-rw en-sg en-us en-vi en-wo en-za es-ar es-bo es-cl es-co es-cr es-es es-gt es-mx es-ni es-pe es-pr es-sv es-ve et-ee fi-fi fr-ci fr-fr fr-ma fr-mg fr-ml fr-tn is-is it-it ja-jp ko-kr lt-lt lv-lv nl-be nl-nl nl-sr nn-no pl-pl pt-br pt-pt ro-ro ru-ru sk-sk sv-se th-th zh-cn zh-tw".split(" ");
N.fallbackSpriteSheetFileName="en-wo";N.getScalePreviewSource=function(L){L=L.toLowerCase();var J=`${m}-${L}`;L=`${y[L]}-${L}`;J=v.includes(J)?J:v.includes(L)?L:"en-wo";return`url(${n.getAssetUrl(`esri/widgets/ScaleRangeSlider/images/scalePreview/${J}.jpg`)})`};N.getScalePreviewSpriteBackgroundPosition=function(L){return 0>L||25<=L?null:`-${L%5*128}px -${128*Math.floor(L/5)}px`};N.languageCode=m;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/ScaleRangeSlider/ScaleRanges":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(N,n,l,A,m,D,y,v){function L(b,e){const g=f,t=g.length,d=[];let H,Q=b;b=0<=b?b:0;e=0<e?e:g[t-1].minScale;for(let G=0;G<t;G++){const I=Math.min(g[G].minScale,e);H=Math.min(I,e);b<=I&&Q<e&&d.push({id:g[G].id,maxScale:Math.max(Q,b),minScale:H});Q=H+1}d.reverse();0!==d.length&&([b]=d,e=d[d.length-1],b.minScale===b.maxScale&&(d.shift(),b.minScale+=1),e.minScale===e.maxScale&&(d.pop(),--e.maxScale));return d}var J;const f=[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},
{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"stateProvince",minScale:3999999},{id:"statesProvinces",minScale:6999999},{id:"countriesSmall",minScale:14999999},{id:"countriesBig",minScale:34999999},{id:"continent",
minScale:99999999},{id:"world",minScale:147914382}];l=J=function(b){function e(){var t=b.apply(this,arguments)||this;t.ranges=[];return t}N._inheritsLoose(e,b);e.fromScaleRange=function({maxScale:t,minScale:d}){return new J({ranges:L(t,d)})};e.fromLayer=function(){var t=N._asyncToGenerator(function*(d){yield d.when();d=(d=d.get("tileInfo.lods"))?L(d[d.length-1].scale,d[0].scale):L(0,0);return new J({ranges:d})});return function(d){return t.apply(this,arguments)}}();var g=e.prototype;g.isMinScaleEdge=
function(t){const {firstRange:d}=this,H=J.RecommendedScales[d.id]||d.maxScale;return t<=d.minScale&&t>=H};g.isMaxScaleEdge=function(t){const {lastRange:d}=this,H=d.maxScale;return t<=(J.RecommendedScales[d.id]||d.minScale)&&t>=H};g.findScaleRange=function(t){const d=this.ranges;let H;if(t>=d[0].maxScale)return d[0];if(t<=d[d.length-1].minScale)return d[d.length-1];for(let Q=0;Q<d.length;Q++){const G=d[Q];if(t>=G.maxScale&&t<=G.minScale){H=G;break}}return H};g.findScaleRangeByIndex=function(t){return this.ranges[this._clampScaleRangeIndex(t)]};
g.scaleToRangeIndex=function(t){return this.ranges.indexOf(this.findScaleRange(t))};g.clampScale=function(t){return Math.min(this.minScale,Math.max(this.maxScale,t))};g.clampMinScale=function(t){return 0===t?this.minScale:this.clampScale(t)};g.clampMaxScale=function(t){return this.clampScale(t)};g.contains=function(t){const d=this.ranges;let H=!1;for(let Q=0;Q<d.length;Q++){const {maxScale:G,minScale:I}=d[Q];if(t>=G&&t<=I){H=!0;break}}return H};g._clampScaleRangeIndex=function(t){if(0>=t)return 0;
const d=this.ranges.length-1;return t>d?d:Math.floor(t)};N._createClass(e,[{key:"firstRange",get:function(){return this.ranges[0]}},{key:"lastRange",get:function(){const t=this.ranges;return t[t.length-1]}},{key:"length",get:function(){return this.ranges.length}},{key:"maxScale",get:function(){return this.lastRange.maxScale}},{key:"minScale",get:function(){return this.firstRange.minScale}}]);return e}(l);l.RecommendedScales=Object.freeze({world:147914382,continent:5E7,countriesBig:25E6,countriesSmall:12E6,
statesProvinces:6E6,stateProvince:3E6,counties:15E5,county:75E4,metropolitanArea:32E4,cities:16E4,city:8E4,town:4E4,neighborhood:2E4,streets:1E4,street:5E3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100});n.__decorate([A.property()],l.prototype,"firstRange",null);n.__decorate([A.property()],l.prototype,"lastRange",null);n.__decorate([A.property()],l.prototype,"length",null);n.__decorate([A.property()],l.prototype,"maxScale",null);n.__decorate([A.property()],l.prototype,"minScale",
null);n.__decorate([A.property()],l.prototype,"ranges",void 0);return l=J=n.__decorate([v.subclass("esri.widgets.ScaleRangeSlider.ScaleRanges")],l)})},"esri/widgets/ScaleRangeSlider/ScaleRangeSliderViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ScaleRanges ../Slider/SliderViewModel".split(" "),
function(N,n,l,A,m,D,y,v,L,J,f,b){l=function(e){function g(d){d=e.call(this,d)||this;d.layer=null;d.scaleRanges=f.fromScaleRange({minScale:0,maxScale:0});({max:H}=d._getSliderIndexRange(d.scaleRanges.length-1));var H=new b({precision:10,min:0,max:H,values:[0,H]});d.sliderViewModel=H;return d}N._inheritsLoose(g,e);var t=g.prototype;t.initialize=function(){var d=this;this.handles.add([m.watch(()=>{var H;return null==(H=this.layer)?void 0:H.loaded},N._asyncToGenerator(function*(){const {layer:H,view:Q}=
d;if(H){Q&&(yield Q.when());yield H.when();if(d._hasTiledLayer()){const G=d.mapScaleToSlider(d._getTiledLayerMaxScale()),I=d.mapScaleToSlider(d._getTiledLayerMinScale());d.sliderViewModel.effectiveMax=G;d.sliderViewModel.effectiveMin=I}if("minScale"in H&&"maxScale"in H){const {minScale:G,maxScale:I}=H;d.set({minScale:G,maxScale:I})}else d.set({minScale:void 0,maxScale:void 0})}}),m.initial)])};t.mapScaleToSlider=function(d){const H=this.scaleRanges.scaleToRangeIndex(d),Q=this.scaleRanges.findScaleRangeByIndex(H),
{maxScale:G,minScale:I}=Q,{max:k,min:w}=this._getSliderIndexRange(H);return this._mapToRange(d,I,G,w,k)};t.mapSliderToScale=function(d){const H=this.scaleRanges.findScaleRangeByIndex(d),{maxScale:Q,minScale:G}=H,{max:I,min:k}=this._getSliderIndexRange(d);return this._mapToRange(d,k,I,G,Q)};t._setSliderRange=function(d){this.scaleRanges=f.fromScaleRange(d);({max:d}=this._getSliderIndexRange(this.scaleRanges.length-1));this.sliderViewModel.max=d;this.sliderViewModel.min=0;this.notifyChange("maxScaleLimit");
this.notifyChange("minScaleLimit")};t._getSliderIndexRange=function(d){d=Math.floor(d);return{min:d,max:d+.99999}};t._mapToRange=function(d,H,Q,G,I){return G+(d-H)*(I-G)/(Q-H)};t._setMaxScaleOnSlider=function(d){const {scaleRanges:H,sliderViewModel:Q}=this;void 0!==d&&(d=this.mapScaleToSlider(this._constrainMaxScaleToLayer(H.clampMaxScale(d))),Q.values=[Q.values[0],d])};t._setMinScaleOnSlider=function(d){const {scaleRanges:H,sliderViewModel:Q}=this;void 0!==d&&(d=this.mapScaleToSlider(this._constrainMinScaleToLayer(H.clampMinScale(d))),
Q.values=[d,Q.values[1]])};t._constrainMinScaleToLayer=function(d){var {scaleRanges:H}=this;if(this._hasTiledLayer()){({firstRange:H}=H);const Q=this._getTiledLayerMinScale();d=.85<this._mapToRange(d,H.maxScale,H.minScale,0,1)?Q:d>Q?Q:d}return d};t._constrainMaxScaleToLayer=function(d){if(this._hasTiledLayer()){const H=this._getTiledLayerMaxScale();d=d<H?H:d}return d};t._normalizeScale=function(d,H){var Q="max"===d?"maxScale":"minScale";Q=this._hasTiledLayer()?"min"===d?this._getTiledLayerMinScale():
this._getTiledLayerMaxScale():this.scaleRanges[Q];d=this._hasTiledLayer()?"min"===d?this._getTiledLayerRealMinScale():this._getTiledLayerRealMaxScale():Q;return Number((0===H||d===H||1E-6>=Math.abs(d-H)?0:H).toFixed(6))};t._getLayerLODS=function(){var d,H;return this.layer&&"tileInfo"in this.layer?"imagery-tile"===(null==(d=this.layer)?void 0:d.type)&&"Raster"===(null==(H=this.layer.raster)?void 0:H.tileType)?null:this.layer.tileInfo.lods:null};t._getTiledLayerMinScale=function(){const d=this._getLayerLODS();
return this.scaleRanges.clampMinScale(d[0].scale)};t._getTiledLayerMaxScale=function(){const d=this._getLayerLODS();return d[d.length-1].scale};t._getTiledLayerRealMinScale=function(){var d,H,Q,G=this._getLayerLODS();G="sourceJSON"in this.layer?null!=(d=null==(H=this.layer.sourceJSON)?void 0:null==(Q=H.tileInfo)?void 0:Q.lods)?d:G:G;return this.scaleRanges.clampMinScale(G[0].scale)};t._getTiledLayerRealMaxScale=function(){var d,H,Q,G=this._getLayerLODS();G="sourceJSON"in this.layer?null!=(d=null==
(H=this.layer.sourceJSON)?void 0:null==(Q=H.tileInfo)?void 0:Q.lods)?d:G:G;return G[G.length-1].scale};t._hasTiledLayer=function(){return!!this._getLayerLODS()};N._createClass(g,[{key:"effectiveMaxScale",get:function(){return 0===this.maxScale?this.maxScaleLimit:this.maxScale}},{key:"effectiveMinScale",get:function(){return 0===this.minScale?this.minScaleLimit:this.minScale}},{key:"maxScale",get:function(){const d=this.mapSliderToScale(this.sliderViewModel.values[1]);return this._normalizeScale("max",
d)},set:function(d){this._setMaxScaleOnSlider(d)}},{key:"maxScaleLimit",get:function(){return this.mapSliderToScale(this.sliderViewModel.max)},set:function(d){this._setSliderRange({maxScale:d,minScale:this.minScaleLimit})}},{key:"minScale",get:function(){const d=this.mapSliderToScale(this.sliderViewModel.values[0]);return this._normalizeScale("min",d)},set:function(d){this._setMinScaleOnSlider(d)}},{key:"minScaleLimit",get:function(){return this.mapSliderToScale(this.sliderViewModel.min)},set:function(d){this._setSliderRange({maxScale:this.maxScaleLimit,
minScale:d})}},{key:"state",get:function(){const {view:d,layer:H}=this;return!d&&!H||!d&&H&&H.loaded||!H&&d&&d.ready||d&&d.ready&&H&&H.loaded?"ready":"disabled"}},{key:"view",set:function(d){this._set("view",d)}}]);return g}(A.HandleOwnerMixin(l));n.__decorate([D.property({readOnly:!0})],l.prototype,"effectiveMaxScale",null);n.__decorate([D.property({readOnly:!0})],l.prototype,"effectiveMinScale",null);n.__decorate([D.property()],l.prototype,"layer",void 0);n.__decorate([D.property()],l.prototype,
"maxScale",null);n.__decorate([D.property()],l.prototype,"maxScaleLimit",null);n.__decorate([D.property()],l.prototype,"minScale",null);n.__decorate([D.property()],l.prototype,"minScaleLimit",null);n.__decorate([D.property()],l.prototype,"scaleRanges",void 0);n.__decorate([D.property()],l.prototype,"sliderViewModel",void 0);n.__decorate([D.property({readOnly:!0})],l.prototype,"state",null);n.__decorate([D.property()],l.prototype,"view",null);return l=n.__decorate([J.subclass("esri.widgets.ScaleRangeSlider.ScaleRangeSliderViewModel")],
l)})},"esri/widgets/support/Popover":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./jsxFactory".split(" "),function(N,n,l,A,m,D,y,v,L,J,f,b,e){function g(u){return null==u?window:"[object Window]"!==u.toString()?
(u=u.ownerDocument)?u.defaultView||window:window:u}function t(u){var C=g(u).Element;return u instanceof C||u instanceof Element}function d(u){var C=g(u).HTMLElement;return u instanceof C||u instanceof HTMLElement}function H(u){if("undefined"===typeof ShadowRoot)return!1;var C=g(u).ShadowRoot;return u instanceof C||u instanceof ShadowRoot}function Q(u,C){void 0===C&&(C=!1);var K=u.getBoundingClientRect(),U=1,Y=1;d(u)&&C&&(C=u.offsetHeight,u=u.offsetWidth,0<u&&(U=Ja(K.width)/u||1),0<C&&(Y=Ja(K.height)/
C||1));return{width:K.width/U,height:K.height/Y,top:K.top/Y,right:K.right/U,bottom:K.bottom/Y,left:K.left/U,x:K.left/U,y:K.top/Y}}function G(u){u=g(u);return{scrollLeft:u.pageXOffset,scrollTop:u.pageYOffset}}function I(u){return u?(u.nodeName||"").toLowerCase():null}function k(u){return((t(u)?u.ownerDocument:u.document)||window.document).documentElement}function w(u){return Q(k(u)).left+G(u).scrollLeft}function r(u){return g(u).getComputedStyle(u)}function a(u){u=r(u);return/auto|scroll|overlay|hidden/.test(u.overflow+
u.overflowY+u.overflowX)}function c(u,C,K){void 0===K&&(K=!1);var U=d(C),Y;if(Y=d(C)){var ba=C.getBoundingClientRect();Y=Ja(ba.width)/C.offsetWidth||1;ba=Ja(ba.height)/C.offsetHeight||1;Y=1!==Y||1!==ba}ba=Y;Y=k(C);u=Q(u,ba);ba={scrollLeft:0,scrollTop:0};var ha={x:0,y:0};if(U||!U&&!K){if("body"!==I(C)||a(Y))ba=C!==g(C)&&d(C)?{scrollLeft:C.scrollLeft,scrollTop:C.scrollTop}:G(C);d(C)?(ha=Q(C,!0),ha.x+=C.clientLeft,ha.y+=C.clientTop):Y&&(ha.x=w(Y))}return{x:u.left+ba.scrollLeft-ha.x,y:u.top+ba.scrollTop-
ha.y,width:u.width,height:u.height}}function x(u){var C=Q(u),K=u.offsetWidth,U=u.offsetHeight;1>=Math.abs(C.width-K)&&(K=C.width);1>=Math.abs(C.height-U)&&(U=C.height);return{x:u.offsetLeft,y:u.offsetTop,width:K,height:U}}function O(u){return"html"===I(u)?u:u.assignedSlot||u.parentNode||(H(u)?u.host:null)||k(u)}function E(u){return 0<=["html","body","#document"].indexOf(I(u))?u.ownerDocument.body:d(u)&&a(u)?u:E(O(u))}function h(u,C){var K;void 0===C&&(C=[]);var U=E(u);u=U===(null==(K=u.ownerDocument)?
void 0:K.body);K=g(U);U=u?[K].concat(K.visualViewport||[],a(U)?U:[]):U;C=C.concat(U);return u?C:C.concat(h(O(U)))}function z(u){return d(u)&&"fixed"!==r(u).position?u.offsetParent:null}function q(u){for(var C=g(u),K=z(u);K&&0<=["table","td","th"].indexOf(I(K))&&"static"===r(K).position;)K=z(K);if(K&&("html"===I(K)||"body"===I(K)&&"static"===r(K).position))return C;if(!K)a:{K=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1===navigator.userAgent.indexOf("Trident")||!d(u)||"fixed"!==
r(u).position)for(u=O(u),H(u)&&(u=u.host);d(u)&&0>["html","body"].indexOf(I(u));){var U=r(u);if("none"!==U.transform||"none"!==U.perspective||"paint"===U.contain||-1!==["transform","perspective"].indexOf(U.willChange)||K&&"filter"===U.willChange||K&&U.filter&&"none"!==U.filter){K=u;break a}else u=u.parentNode}K=null}return K||C}function p(u){function C(ba){U.add(ba.name);[].concat(ba.requires||[],ba.requiresIfExists||[]).forEach(function(ha){U.has(ha)||(ha=K.get(ha))&&C(ha)});Y.push(ba)}var K=new Map,
U=new Set,Y=[];u.forEach(function(ba){K.set(ba.name,ba)});u.forEach(function(ba){U.has(ba.name)||C(ba)});return Y}function S(u){var C=p(u);return Ya.reduce(function(K,U){return K.concat(C.filter(function(Y){return Y.phase===U}))},[])}function P(u){var C;return function(){C||(C=new Promise(function(K){Promise.resolve().then(function(){C=void 0;K(u())})}));return C}}function T(u){return u.split("-")[0]}function F(u){var C=u.reduce(function(K,U){var Y=K[U.name];K[U.name]=Y?Object.assign({},Y,U,{options:Object.assign({},
Y.options,U.options),data:Object.assign({},Y.data,U.data)}):U;return K},{});return Object.keys(C).map(function(K){return C[K]})}function M(u,C){var K=C.getRootNode&&C.getRootNode();if(u.contains(C))return!0;if(K&&H(K)){do{if(C&&u.isSameNode(C))return!0;C=C.parentNode||C.host}while(C)}return!1}function V(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function aa(u,C){if("viewport"===C){C=g(u);var K=k(u);C=C.visualViewport;var U=K.clientWidth;K=K.clientHeight;
var Y=0,ba=0;C&&(U=C.width,K=C.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(Y=C.offsetLeft,ba=C.offsetTop));u={width:U,height:K,x:Y+w(u),y:ba};u=V(u)}else t(C)?(u=Q(C),u.top+=C.clientTop,u.left+=C.clientLeft,u.bottom=u.top+C.clientHeight,u.right=u.left+C.clientWidth,u.width=C.clientWidth,u.height=C.clientHeight,u.x=u.left,u.y=u.top):(ba=k(u),u=k(ba),U=G(ba),C=null==(K=ba.ownerDocument)?void 0:K.body,K=Ca(u.scrollWidth,u.clientWidth,C?C.scrollWidth:0,C?C.clientWidth:0),Y=Ca(u.scrollHeight,
u.clientHeight,C?C.scrollHeight:0,C?C.clientHeight:0),ba=-U.scrollLeft+w(ba),U=-U.scrollTop,"rtl"===r(C||u).direction&&(ba+=Ca(u.clientWidth,C?C.clientWidth:0)-K),u=V({width:K,height:Y,x:ba,y:U}));return u}function ka(u){var C=h(O(u)),K=0<=["absolute","fixed"].indexOf(r(u).position)&&d(u)?q(u):u;return t(K)?C.filter(function(U){return t(U)&&M(U,K)&&"body"!==I(U)}):[]}function la(u,C,K){C="clippingParents"===C?ka(u):[].concat(C);K=[].concat(C,[K]);K=K.reduce(function(U,Y){Y=aa(u,Y);U.top=Ca(Y.top,
U.top);U.right=za(Y.right,U.right);U.bottom=za(Y.bottom,U.bottom);U.left=Ca(Y.left,U.left);return U},aa(u,K[0]));K.width=K.right-K.left;K.height=K.bottom-K.top;K.x=K.left;K.y=K.top;return K}function X(u){return u.split("-")[1]}function Z(u){return 0<=["top","bottom"].indexOf(u)?"x":"y"}function da(u){var C=u.reference,K=u.element,U=(u=u.placement)?T(u):null;u=u?X(u):null;var Y=C.x+C.width/2-K.width/2,ba=C.y+C.height/2-K.height/2;switch(U){case "top":Y={x:Y,y:C.y-K.height};break;case "bottom":Y={x:Y,
y:C.y+C.height};break;case "right":Y={x:C.x+C.width,y:ba};break;case "left":Y={x:C.x-K.width,y:ba};break;default:Y={x:C.x,y:C.y}}U=U?Z(U):null;if(null!=U)switch(ba="y"===U?"height":"width",u){case "start":Y[U]-=C[ba]/2-K[ba]/2;break;case "end":Y[U]+=C[ba]/2-K[ba]/2}return Y}function ia(u){return Object.assign({},{top:0,right:0,bottom:0,left:0},u)}function va(u,C){return C.reduce(function(K,U){K[U]=u;return K},{})}function ya(u,C){void 0===C&&(C={});var K=C;C=K.placement;C=void 0===C?u.placement:C;
var U=K.boundary,Y=void 0===U?"clippingParents":U;U=K.rootBoundary;var ba=void 0===U?"viewport":U;U=K.elementContext;U=void 0===U?"popper":U;var ha=K.altBoundary,na=void 0===ha?!1:ha;K=K.padding;K=void 0===K?0:K;K=ia("number"!==typeof K?K:va(K,La));ha=u.rects.popper;na=u.elements[na?"popper"===U?"reference":"popper":U];Y=la(t(na)?na:na.contextElement||k(u.elements.popper),Y,ba);ba=Q(u.elements.reference);na=da({reference:ba,element:ha,strategy:"absolute",placement:C});ha=V(Object.assign({},ha,na));
ba="popper"===U?ha:ba;var ja={top:Y.top-ba.top+K.top,bottom:ba.bottom-Y.bottom+K.bottom,left:Y.left-ba.left+K.left,right:ba.right-Y.right+K.right};u=u.modifiersData.offset;if("popper"===U&&u){var ma=u[C];Object.keys(ja).forEach(function(qa){var ta=0<=["right","bottom"].indexOf(qa)?1:-1,xa=0<=["top","bottom"].indexOf(qa)?"y":"x";ja[qa]+=ma[xa]*ta})}return ja}function Ba(){for(var u=arguments.length,C=Array(u),K=0;K<u;K++)C[K]=arguments[K];return!C.some(function(U){return!(U&&"function"===typeof U.getBoundingClientRect)})}
function ca(u){var C,K=u.popper,U=u.popperRect,Y=u.placement,ba=u.variation,ha=u.offsets,na=u.position,ja=u.gpuAcceleration,ma=u.adaptive,qa=u.roundOffsets,ta=u.isFixed;u=ha.x;u=void 0===u?0:u;var xa=ha.y,ua=void 0===xa?0:xa;xa="function"===typeof qa?qa({x:u,y:ua}):{x:u,y:ua};u=xa.x;ua=xa.y;xa=ha.hasOwnProperty("x");ha=ha.hasOwnProperty("y");var Fa="left",Ga="top",Ia=window;if(ma){var sa=q(K),Ha="clientHeight",Ka="clientWidth";sa===g(K)&&(sa=k(K),"static"!==r(sa).position&&"absolute"===na&&(Ha="scrollHeight",
Ka="scrollWidth"));if("top"===Y||("left"===Y||"right"===Y)&&"end"===ba)Ga="bottom",ua-=(ta&&sa===Ia&&Ia.visualViewport?Ia.visualViewport.height:sa[Ha])-U.height,ua*=ja?1:-1;if("left"===Y||("top"===Y||"bottom"===Y)&&"end"===ba)Fa="right",u-=(ta&&sa===Ia&&Ia.visualViewport?Ia.visualViewport.width:sa[Ka])-U.width,u*=ja?1:-1}K=Object.assign({position:na},ma&&Da);!0===qa?(qa=ua,U=window.devicePixelRatio||1,u={x:Ja(u*U)/U||0,y:Ja(qa*U)/U||0}):u={x:u,y:ua};qa=u;u=qa.x;ua=qa.y;if(ja){var Ea;return Object.assign({},
K,(Ea={},Ea[Ga]=ha?"0":"",Ea[Fa]=xa?"0":"",Ea.transform=1>=(Ia.devicePixelRatio||1)?"translate("+u+"px, "+ua+"px)":"translate3d("+u+"px, "+ua+"px, 0)",Ea))}return Object.assign({},K,(C={},C[Ga]=ha?ua+"px":"",C[Fa]=xa?u+"px":"",C.transform="",C))}function fa(u){return u.replace(/left|right|bottom|top/g,function(C){return Ua[C]})}function ea(u){return u.replace(/start|end/g,function(C){return wa[C]})}function pa(u,C){void 0===C&&(C={});var K=C.boundary,U=C.rootBoundary,Y=C.padding,ba=C.flipVariations,
ha=C.allowedAutoPlacements,na=void 0===ha?Ta:ha,ja=X(C.placement);C=ja?ba?Va:Va.filter(function(qa){return X(qa)===ja}):La;ba=C.filter(function(qa){return 0<=na.indexOf(qa)});0===ba.length&&(ba=C);var ma=ba.reduce(function(qa,ta){qa[ta]=ya(u,{placement:ta,boundary:K,rootBoundary:U,padding:Y})[T(ta)];return qa},{});return Object.keys(ma).sort(function(qa,ta){return ma[qa]-ma[ta]})}function oa(u){if("auto"===T(u))return[];var C=fa(u);return[ea(u),C,ea(C)]}function ra(u,C,K){void 0===K&&(K={x:0,y:0});
return{top:u.top-C.height-K.y,right:u.right-C.width+K.x,bottom:u.bottom-C.height+K.y,left:u.left-C.width-K.x}}function Aa(u){return["top","right","bottom","left"].some(function(C){return 0<=u[C]})}var Ca=Math.max,za=Math.min,Ja=Math.round,La=["top","bottom","right","left"],Va=La.reduce(function(u,C){return u.concat([C+"-start",C+"-end"])},[]),Ta=[].concat(La,["auto"]).reduce(function(u,C){return u.concat([C,C+"-start",C+"-end"])},[]),Ya="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" "),
Wa={placement:"bottom",modifiers:[],strategy:"absolute"},Pa={passive:!0},Da={top:"auto",right:"auto",bottom:"auto",left:"auto"},Ua={left:"right",right:"left",bottom:"top",top:"bottom"},wa={start:"end",end:"start"},R=function(u){void 0===u&&(u={});var C=u.defaultModifiers,K=void 0===C?[]:C;u=u.defaultOptions;var U=void 0===u?Wa:u;return function(Y,ba,ha){function na(){ma.orderedModifiers.forEach(function(ua){var Fa=ua.name,Ga=ua.options;Ga=void 0===Ga?{}:Ga;ua=ua.effect;"function"===typeof ua&&(Fa=
ua({state:ma,name:Fa,instance:xa,options:Ga}),qa.push(Fa||function(){}))})}function ja(){qa.forEach(function(ua){return ua()});qa=[]}void 0===ha&&(ha=U);var ma={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wa,U),modifiersData:{},elements:{reference:Y,popper:ba},attributes:{},styles:{}},qa=[],ta=!1,xa={state:ma,setOptions:function(ua){ua="function"===typeof ua?ua(ma.options):ua;ja();ma.options=Object.assign({},U,ma.options,ua);ma.scrollParents={reference:t(Y)?h(Y):Y.contextElement?
h(Y.contextElement):[],popper:h(ba)};ua=S(F([].concat(K,ma.options.modifiers)));ma.orderedModifiers=ua.filter(function(Fa){return Fa.enabled});na();return xa.update()},forceUpdate:function(){if(!ta){var ua=ma.elements,Fa=ua.reference;ua=ua.popper;if(Ba(Fa,ua))for(ma.rects={reference:c(Fa,q(ua),"fixed"===ma.options.strategy),popper:x(ua)},ma.reset=!1,ma.placement=ma.options.placement,ma.orderedModifiers.forEach(function(sa){return ma.modifiersData[sa.name]=Object.assign({},sa.data)}),Fa=0;Fa<ma.orderedModifiers.length;Fa++)if(!0===
ma.reset)ma.reset=!1,Fa=-1;else{var Ga=ma.orderedModifiers[Fa];ua=Ga.fn;var Ia=Ga.options;Ia=void 0===Ia?{}:Ia;Ga=Ga.name;"function"===typeof ua&&(ma=ua({state:ma,options:Ia,name:Ga,instance:xa})||ma)}}},update:P(function(){return new Promise(function(ua){xa.forceUpdate();ua(ma)})}),destroy:function(){ja();ta=!0}};if(!Ba(Y,ba))return xa;xa.setOptions(ha).then(function(ua){if(!ta&&ha.onFirstUpdate)ha.onFirstUpdate(ua)});return xa}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",
fn:function(){},effect:function(u){var C=u.state,K=u.instance;u=u.options;var U=u.scroll,Y=void 0===U?!0:U;u=u.resize;var ba=void 0===u?!0:u,ha=g(C.elements.popper),na=[].concat(C.scrollParents.reference,C.scrollParents.popper);Y&&na.forEach(function(ja){ja.addEventListener("scroll",K.update,Pa)});ba&&ha.addEventListener("resize",K.update,Pa);return function(){Y&&na.forEach(function(ja){ja.removeEventListener("scroll",K.update,Pa)});ba&&ha.removeEventListener("resize",K.update,Pa)}},data:{}},{name:"popperOffsets",
enabled:!0,phase:"read",fn:function(u){var C=u.state;C.modifiersData[u.name]=da({reference:C.rects.reference,element:C.rects.popper,strategy:"absolute",placement:C.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(u){var C=u.state,K=u.options;u=K.gpuAcceleration;u=void 0===u?!0:u;var U=K.adaptive;U=void 0===U?!0:U;K=K.roundOffsets;K=void 0===K?!0:K;u={placement:T(C.placement),variation:X(C.placement),popper:C.elements.popper,popperRect:C.rects.popper,gpuAcceleration:u,
isFixed:"fixed"===C.options.strategy};null!=C.modifiersData.popperOffsets&&(C.styles.popper=Object.assign({},C.styles.popper,ca(Object.assign({},u,{offsets:C.modifiersData.popperOffsets,position:C.options.strategy,adaptive:U,roundOffsets:K}))));null!=C.modifiersData.arrow&&(C.styles.arrow=Object.assign({},C.styles.arrow,ca(Object.assign({},u,{offsets:C.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:K}))));C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-placement":C.placement})},
data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(u){var C=u.state;Object.keys(C.elements).forEach(function(K){var U=C.styles[K]||{},Y=C.attributes[K]||{},ba=C.elements[K];d(ba)&&I(ba)&&(Object.assign(ba.style,U),Object.keys(Y).forEach(function(ha){var na=Y[ha];!1===na?ba.removeAttribute(ha):ba.setAttribute(ha,!0===na?"":na)}))})},effect:function(u){var C=u.state,K={popper:{position:C.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(C.elements.popper.style,
K.popper);C.styles=K;C.elements.arrow&&Object.assign(C.elements.arrow.style,K.arrow);return function(){Object.keys(C.elements).forEach(function(U){var Y=C.elements[U],ba=C.attributes[U]||{};U=Object.keys(C.styles.hasOwnProperty(U)?C.styles[U]:K[U]).reduce(function(ha,na){ha[na]="";return ha},{});d(Y)&&I(Y)&&(Object.assign(Y.style,U),Object.keys(ba).forEach(function(ha){Y.removeAttribute(ha)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(u){var C=
u.state,K=u.name;u=u.options.offset;var U=void 0===u?[0,0]:u;u=Ta.reduce(function(ha,na){var ja=C.rects;var ma=T(na);var qa=0<=["left","top"].indexOf(ma)?-1:1,ta="function"===typeof U?U(Object.assign({},ja,{placement:na})):U;ja=ta[0];ta=ta[1];ja=ja||0;ta=(ta||0)*qa;ma=0<=["left","right"].indexOf(ma)?{x:ta,y:ja}:{x:ja,y:ta};ha[na]=ma;return ha},{});var Y=u[C.placement],ba=Y.x;Y=Y.y;null!=C.modifiersData.popperOffsets&&(C.modifiersData.popperOffsets.x+=ba,C.modifiersData.popperOffsets.y+=Y);C.modifiersData[K]=
u}},{name:"flip",enabled:!0,phase:"main",fn:function(u){var C=u.state,K=u.options;u=u.name;if(!C.modifiersData[u]._skip){var U=K.mainAxis;U=void 0===U?!0:U;var Y=K.altAxis;Y=void 0===Y?!0:Y;var ba=K.fallbackPlacements,ha=K.padding,na=K.boundary,ja=K.rootBoundary,ma=K.altBoundary,qa=K.flipVariations,ta=void 0===qa?!0:qa,xa=K.allowedAutoPlacements;K=C.options.placement;qa=T(K);ba=ba||(qa!==K&&ta?oa(K):[fa(K)]);var ua=[K].concat(ba).reduce(function(Ma,Ra){return Ma.concat("auto"===T(Ra)?pa(C,{placement:Ra,
boundary:na,rootBoundary:ja,padding:ha,flipVariations:ta,allowedAutoPlacements:xa}):Ra)},[]);K=C.rects.reference;ba=C.rects.popper;var Fa=new Map;qa=!0;for(var Ga=ua[0],Ia=0;Ia<ua.length;Ia++){var sa=ua[Ia],Ha=T(sa),Ka="start"===X(sa),Ea=0<=["top","bottom"].indexOf(Ha),Qa=Ea?"width":"height",Sa=ya(C,{placement:sa,boundary:na,rootBoundary:ja,altBoundary:ma,padding:ha});Ka=Ea?Ka?"right":"left":Ka?"bottom":"top";K[Qa]>ba[Qa]&&(Ka=fa(Ka));Qa=fa(Ka);Ea=[];U&&Ea.push(0>=Sa[Ha]);Y&&Ea.push(0>=Sa[Ka],0>=
Sa[Qa]);if(Ea.every(function(Ma){return Ma})){Ga=sa;qa=!1;break}Fa.set(sa,Ea)}if(qa)for(U=function(Ma){var Ra=ua.find(function(Na){if(Na=Fa.get(Na))return Na.slice(0,Ma).every(function(Xa){return Xa})});if(Ra)return Ga=Ra,"break"},Y=ta?3:1;0<Y&&"break"!==U(Y);Y--);C.placement!==Ga&&(C.modifiersData[u]._skip=!0,C.placement=Ga,C.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(u){var C=u.state,K=u.options;u=u.name;var U=K.mainAxis,
Y=void 0===U?!0:U;U=K.altAxis;var ba=void 0===U?!1:U;U=K.tether;var ha=void 0===U?!0:U;U=K.tetherOffset;var na=void 0===U?0:U,ja=ya(C,{boundary:K.boundary,rootBoundary:K.rootBoundary,padding:K.padding,altBoundary:K.altBoundary}),ma=T(C.placement),qa=X(C.placement),ta=!qa,xa=Z(ma);K="x"===xa?"y":"x";U=C.modifiersData.popperOffsets;var ua=C.rects.reference,Fa=C.rects.popper;na="function"===typeof na?na(Object.assign({},C.rects,{placement:C.placement})):na;var Ga="number"===typeof na?{mainAxis:na,altAxis:na}:
Object.assign({mainAxis:0,altAxis:0},na),Ia=C.modifiersData.offset?C.modifiersData.offset[C.placement]:null;na={x:0,y:0};if(U){if(Y){var sa,Ha="y"===xa?"top":"left",Ka="y"===xa?"bottom":"right",Ea="y"===xa?"height":"width";Y=U[xa];var Qa=Y+ja[Ha],Sa=Y-ja[Ka],Ma=ha?-Fa[Ea]/2:0,Ra="start"===qa?ua[Ea]:Fa[Ea];qa="start"===qa?-Fa[Ea]:-ua[Ea];var Na=C.elements.arrow;Na=ha&&Na?x(Na):{width:0,height:0};var Xa=C.modifiersData["arrow#persistent"]?C.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,
left:0};Ha=Xa[Ha];Ka=Xa[Ka];Na=Ca(0,za(ua[Ea],Na[Ea]));Ra=ta?ua[Ea]/2-Ma-Na-Ha-Ga.mainAxis:Ra-Na-Ha-Ga.mainAxis;ta=ta?-ua[Ea]/2+Ma+Na+Ka+Ga.mainAxis:qa+Na+Ka+Ga.mainAxis;Ea=(Ea=C.elements.arrow&&q(C.elements.arrow))?"y"===xa?Ea.clientTop||0:Ea.clientLeft||0:0;Ma=null!=(sa=null==Ia?void 0:Ia[xa])?sa:0;sa=Y+ta-Ma;Qa=ha?za(Qa,Y+Ra-Ma-Ea):Qa;sa=ha?Ca(Sa,sa):Sa;sa=Ca(Qa,za(Y,sa));U[xa]=sa;na[xa]=sa-Y}if(ba){var Oa;ba=U[K];Y="y"===K?"height":"width";sa=ba+ja["x"===xa?"top":"left"];ja=ba-ja["x"===xa?"bottom":
"right"];ma=-1!==["top","left"].indexOf(ma);xa=null!=(Oa=null==Ia?void 0:Ia[K])?Oa:0;Oa=ma?sa:ba-ua[Y]-Fa[Y]-xa+Ga.altAxis;ua=ma?ba+ua[Y]+Fa[Y]-xa-Ga.altAxis:ja;ha&&ma?(Oa=Ca(Oa,za(ba,ua)),Oa=Oa>ua?ua:Oa):Oa=Ca(ha?Oa:sa,za(ba,ha?ua:ja));U[K]=Oa;na[K]=Oa-ba}C.modifiersData[u]=na}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(u){var C,K=u.state,U=u.name,Y=u.options,ba=K.elements.arrow,ha=K.modifiersData.popperOffsets,na=T(K.placement);u=Z(na);na=0<=["left","right"].indexOf(na)?
"height":"width";if(ba&&ha){Y=Y.padding;Y="function"===typeof Y?Y(Object.assign({},K.rects,{placement:K.placement})):Y;Y=ia("number"!==typeof Y?Y:va(Y,La));var ja=x(ba),ma="y"===u?"top":"left",qa="y"===u?"bottom":"right",ta=K.rects.reference[na]+K.rects.reference[u]-ha[u]-K.rects.popper[na];ha=ha[u]-K.rects.reference[u];ba=(ba=q(ba))?"y"===u?ba.clientHeight||0:ba.clientWidth||0:0;ha=ba/2-ja[na]/2+(ta/2-ha/2);na=Ca(Y[ma],za(ha,ba-ja[na]-Y[qa]));K.modifiersData[U]=(C={},C[u]=na,C.centerOffset=na-ha,
C)}},effect:function(u){var C=u.state;u=u.options.element;u=void 0===u?"[data-popper-arrow]":u;if(null!=u){if("string"===typeof u&&(u=C.elements.popper.querySelector(u),!u))return;M(C.elements.popper,u)&&(C.elements.arrow=u)}},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(u){var C=u.state;u=u.name;var K=C.rects.reference,U=C.rects.popper,Y=C.modifiersData.preventOverflow,ba=ya(C,{elementContext:"reference"}),
ha=ya(C,{altBoundary:!0});K=ra(ba,K);U=ra(ha,U,Y);Y=Aa(K);ha=Aa(U);C.modifiersData[u]={referenceClippingOffsets:K,popperEscapeOffsets:U,isReferenceHidden:Y,hasPopperEscaped:ha};C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-reference-hidden":Y,"data-popper-escaped":ha})}}]});const B="bottom bottom-start bottom-end left left-start left-end right right-start right-end top top-start top-end".split(" "),W={position:"fixed","z-index":"1000"};y=function(u){function C(U,Y){var ba=
u.call(this,U,Y)||this;ba._popper=null;ba._contentNode=null;ba._renderAttached=!1;ba._rootNode=null;ba.anchorElement=null;ba.offset=[0,0];ba.open=!1;ba.renderContentFunction=null;ba._afterRootCreate=ha=>{ba._rootNode=ha};ba._afterContentCreate=ha=>{ba._contentNode=ha};ba._updatePosition=()=>{A.isSome(ba._popper)&&ba._popper.update()};return ba}N._inheritsLoose(C,u);var K=C.prototype;K.initialize=function(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=
!0)});this.own([m.watch(()=>[this.open,this.anchorElement],()=>this._buildPopper(),m.initial),m.watch(()=>[this.placement,this.offset],()=>this._setPopperOptions(),m.initial)])};K.destroy=function(){this.renderContentFunction=this.anchorElement=this.owner=null;this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1);A.isSome(this._rootNode)&&(l.remove(this._rootNode),this._rootNode=null);this._contentNode=null;A.isSome(this._popper)&&(this._popper.destroy(),this._popper=
null)};K.render=function(){var U;const {open:Y,owner:ba,renderContentFunction:ha}=this;return e.tsx("div",{afterCreate:this._afterRootCreate,class:this.classes("esri-popover",Y?"esri-popover--open":null),styles:W},e.tsx("div",{dir:b.getDir(null==(U=this.owner)?void 0:U.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},Y&&(null==ha?void 0:ha.call(ba))))};K._buildPopper=function(){A.isSome(this._popper)&&(this._popper.destroy(),this._popper=null);const U=this._contentNode;
if(!A.isNone(U)&&this.open&&this.renderContentFunction){var Y=this._getAnchor();Y&&(this._popper=R(Y,U),this._setPopperOptions())}};K._setPopperOptions=function(){const {placement:U,offset:Y,_popper:ba}=this;A.isNone(ba)||(ba.setOptions({placement:U,modifiers:[{name:"offset",options:{offset:Y}}]}),ba.forceUpdate())};K._getAnchor=function(){const {anchorElement:U}=this;return l.byId("function"===typeof U?U():U)};N._createClass(C,[{key:"container",set:function(U){}},{key:"owner",set:function(U){this._set("owner",
U)}},{key:"placement",get:function(){return"top"},set:function(U){B.includes(U)?this._override("placement",U):this._clearOverride("placement")}}]);return C}(f);n.__decorate([D.property()],y.prototype,"anchorElement",void 0);n.__decorate([D.property()],y.prototype,"container",null);n.__decorate([D.property()],y.prototype,"offset",void 0);n.__decorate([D.property()],y.prototype,"open",void 0);n.__decorate([D.property()],y.prototype,"owner",null);n.__decorate([D.property()],y.prototype,"placement",null);
n.__decorate([D.property()],y.prototype,"renderContentFunction",void 0);return y=n.__decorate([J.subclass("esri.widgets.support.Popover")],y)})},"app/widgets/panels/MapMaker/blending/LayerBlending":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget ../../../../utils/topic ../ItemSwitcher".split(" "),function(N,n,l,A,m,D,y,v){Object.defineProperty(n,"__esModule",{value:!0});D=l.__importDefault(D);y=l.__importDefault(y);v=l.__importDefault(v);
N=function(L){function J(f){f=L.call(this,f)||this;f.isOpen=!1;return f}l.__extends(J,L);J.prototype.postInitialize=function(){this.onAfterCreate=this.onAfterCreate.bind(this)};J.prototype.destroy=function(){var f;null===(f=this.itemSwitcher)||void 0===f?void 0:f.destroy()};J.prototype.open=function(){var f=this;this.itemSwitcher?this.itemSwitcher.showPickList():setTimeout(function(){return f.open()},200)};J.prototype.onAfterCreate=function(f){var b=this,e=this.layer;f=this.itemSwitcher=new v.default({state:this.state,
items:this.getBlendingModes(),selectionFollowsFocus:!0,infoCardElement:this.getInfoCardElement(),value:e.blendMode||"normal",container:f});this.own([f.on("selectionChange",function(g){return b.adjustBlending(null===g||void 0===g?void 0:g.value)}),f.on("open",function(g){return b.isOpen=g})])};J.prototype.getInfoCardElement=function(){var f=this.state.portal,b=f.helpBase+f.helpMap[120002711],e=this.messages.blendingInfo,g=document.createElement("calcite-tip");g.classList.add("esri-blending-infoCard");
g.nonDismissible=!0;var t=document.createElement("p");t.classList.add("esri-blending-infoCard--p");t.innerHTML=e+" ";g.appendChild(t);f.isPortal||(f=document.createElement("calcite-link"),f.text=this.messages.blendingInfoLink,f.innerHTML=this.messages.blendingInfoLink,f.iconEnd="launch",f.setAttribute("target","_blank"),f.setAttribute("href",b),g.appendChild(f));return g};J.prototype.render=function(){return m.tsx("div",{bind:this,afterCreate:this.onAfterCreate})};J.prototype.adjustBlending=function(f){this.layer.blendMode=
"normal"!==f?f:"normal";this.isOpen=!1;y.default.publish("blending-updated")};J.prototype.getBlendingModes=function(){var f=this.messagesBlendingModes;return[{label:"",items:["normal"]},{label:this.messages.blendLightening,items:["lighter","lighten","screen","color-dodge","plus"]},{label:this.messages.blendDarkening,items:["darken","color-burn","multiply"]},{label:this.messages.blendContrasting,items:["overlay","hard-light","soft-light","vivid-light"]},{label:this.messages.blendComponent,items:["color",
"hue","saturation","luminosity"]},{label:this.messages.blendComposting,items:"destination-over destination-atop destination-in destination-out source-atop source-in source-out xor".split(" ")},{label:this.messages.blendInvert,items:"invert reflect average difference exclusion minus".split(" ")}].map(function(b){var e=b.label,g=b.help;b=b.items.map(function(t){return{label:f[t],value:t}});return{label:e,items:b,help:g}})};l.__decorate([A.property(),m.messageBundle("mapviewer/mapMaker")],J.prototype,
"messages",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/blendingModes")],J.prototype,"messagesBlendingModes",void 0);return J=l.__decorate([A.subclass("")],J)}(D.default);n.default=N})},"app/widgets/panels/MapMaker/ItemSwitcher":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget ../../../utils/topic esri/core/domUtils".split(" "),function(N,n,l,A,m,D,y,v){Object.defineProperty(n,"__esModule",{value:!0});D=
l.__importDefault(D);y=l.__importDefault(y);v=l.__importStar(v);N=function(L){function J(f){f=L.call(this,f)||this;f.itemsHash={};return f}l.__extends(J,L);J.prototype.postInitialize=function(){this.processItems(this.items);this.addEventListeners()};J.prototype.destroy=function(){this.popover&&v.remove(this.popover);this.container.removeEventListener("click",null);this.pickList&&(this.pickList.removeEventListener("calciteListChange",null),v.remove(this.pickList))};J.prototype.addEventListeners=function(){var f=
this;this.own(y.default.subscribe("app-click",function(b){var e=b.target;b=e.closest("calcite-popover");e=e.closest("calcite-action");b||e||f.close()}))};J.prototype.open=function(){var f=this.popover,b=this.pickList,e=this.panel,g=this.action;f&&(f.open=!0,this.disablePanel());e.querySelector("calcite-panel").dismissed=!1;g.active=!0;this.emit("open",!0);setTimeout(function(){b.setFocus()},200)};J.prototype.disablePanel=function(){var f=this.container.closest("calcite-panel");f&&(f.disabled=!0)};
J.prototype.enablePanel=function(){var f=this.container.closest("calcite-panel");f&&(f.disabled=!1)};J.prototype.close=function(){var f=this.action,b=this.popover;b&&(b.open=!1,this.enablePanel());this.emit("open",!1);f.active=!1};J.prototype.toggle=function(){var f=this.action;if(f)this[f.active?"close":"open"]()};J.prototype.getSelectedItem=function(){var f=this.value;return this.selectedItem=(this.allItems||[]).filter(function(b){return b.value===f}).shift()};J.prototype.render=function(){var f=
this.selectedItem;return m.tsx("div",null,m.tsx("calcite-action",{bind:this,afterCreate:this.afterCreateAction,onclick:this.onClick,scale:"m",label:f.label,text:f.label,textEnabled:!0,icon:"caret-down"}))};J.prototype.afterCreateAction=function(f){this.action=f};J.prototype.onClick=function(f){this.popover?this.toggle():this.showPickList()};J.prototype.showPickList=function(){var f=this,b=this.container,e=this.popover=document.createElement("calcite-popover");e.classList.add("esri-blending-pickList");
e.classList.add("js-app-flyout");e.referenceElement=b;e.placement="bottom-start";e.label="";e.disablePointer=!0;document.body.appendChild(e);b=this.panel=document.createElement("calcite-flow");var g=document.createElement("calcite-panel");g.setAttribute("heading",this.messages.blending);g.heightScale="s";g.dismissible=!0;g.dismissed=!1;b.appendChild(g);g.addEventListener("calcitePanelDismissedChange",function(){g.dismissed&&f.close()});this.infoCardElement&&g.appendChild(this.infoCardElement);var t=
this.pickList=this.createPickList();g.appendChild(t);e.appendChild(b);setTimeout(function(){return f.open()},50);t.addEventListener("calciteListChange",function(d){return l.__awaiter(f,void 0,void 0,function(){var H,Q,G,I;return l.__generator(this,function(k){switch(k.label){case 0:return H=this.action,[4,t.getSelectedItems()];case 1:return Q=k.sent(),G=Q.values().next().value,I=this.itemsHash[G.value],"parent-item"!==G.slot&&I&&(H.label=I.label,H.text=I.label,this.value=I.value,this.selectedItem=
I,this.emit("selectionChange",I)),[2]}})})})};J.prototype.createPickList=function(){var f=this,b=this.items;b=void 0===b?[]:b;var e=document.createElement("calcite-pick-list");e.filterPlaceholder=this.messages.filterResults;e.filterEnabled=!0;e.multiple=!1;e.selectionFollowsFocus=this.selectionFollowsFocus;b.forEach(function(g){return f.addItemToList(g,e)},null);return e};J.prototype.addItemToList=function(f,b){return f.items?this.getParentLayer(f,b):this.getPickListItem(f,b)};J.prototype.getParentLayer=
function(f,b){var e=this,g=f.items;if(null===f||void 0===f?0:f.label){var t=void 0;if(f.help){t=document.createElement("div");t.classList.add("list-group");var d=document.createElement("h3");d.innerHTML=f.label;t.appendChild(d);d=document.createElement("calcite-action");d.scale="s";d.label=this.messages.moreInfo;d.addEventListener("click",function(){var Q=document.createElement("calcite-panel");Q.heading=f.label;Q.heightScale="s";Q.dismissible=!0;e.panel.appendChild(Q);var G=document.createElement("section");
G.innerHTML=f.help;Q.appendChild(G)});var H=document.createElement("calcite-icon");H.scale="s";H.icon="information";d.appendChild(H);t.appendChild(d)}else t=document.createElement("calcite-pick-list-group"),t.groupTitle=f.label;b.appendChild(t)}g.forEach(function(Q){return e.addItemToList(Q,b)})};J.prototype.getPickListItem=function(f,b,e){var g=f.label;g=void 0===g?"":g;var t=f.value;t=void 0===t?"":t;var d=null===f||void 0===f?void 0:f.parent;d=(d?d.id+"_":"")+t;this.itemsHash[d]=f;f=document.createElement("calcite-pick-list-item");
f.setAttribute("label",g);e&&f.setAttribute("slot",e||"");f.setAttribute("value",d);t===this.value&&f.setAttribute("selected",t===this.value);b.appendChild(f)};J.prototype.processItems=function(f){this.allItems=f.reduce(function(b,e){return b.concat(e.items||[{label:e.label,value:e.value,help:e.help}])},[]);this.selectedItem=this.getSelectedItem()};l.__decorate([A.property(),m.messageBundle("mapviewer/mapMaker")],J.prototype,"messages",void 0);l.__decorate([A.property()],J.prototype,"selectionFollowsFocus",
void 0);return J=l.__decorate([A.subclass("")],J)}(D.default);n.default=N})},"app/widgets/panels/MapMaker/customparameters/CustomParameters":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/core/domUtils esri/widgets/support/widget ../../../../utils/topic esri/widgets/Widget ./AddParameter".split(" "),function(N,n,l,A,m,D,y,v,L){Object.defineProperty(n,"__esModule",{value:!0});m=l.__importStar(m);y=l.__importDefault(y);v=l.__importDefault(v);L=l.__importDefault(L);
N=function(J){function f(b){b=J.call(this,b)||this;b.showAdvanced=!1;return b}l.__extends(f,J);Object.defineProperty(f.prototype,"customParameters",{get:function(){return Object.keys(this._customParameters).length?this._customParameters:null},set:function(b){this._customParameters=b;this.scheduleRender()},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"customLayerParameters",{get:function(){return Object.keys(this._customLayerParameters).length?this._customLayerParameters:null},
set:function(b){this._customLayerParameters=b;this.scheduleRender()},enumerable:!1,configurable:!0});f.prototype.postInitialize=function(){var b,e;this.customParameters=(null===(b=this.layer)||void 0===b?void 0:b.customParameters)||{};this.customLayerParameters=(null===(e=this.layer)||void 0===e?void 0:e.customLayerParameters)||{}};f.prototype.destroy=function(){this.destroyPopup()};f.prototype.destroyPopup=function(){var b;this.addParameterBtn.removeAttribute("disabled");this.handleAddParameterDone&&
(this.handleAddParameterDone.remove(),this.handleAddParameterDone=null);this.popover&&(this.popover.open=!1,m.remove(this.popover),this.enablePanel(),this.popover=null);this.addParameter&&!this.addParameter.destroyed&&(null===(b=this.addParameter)||void 0===b?void 0:b.destroy(),this.addParameter=null)};f.prototype.reset=function(){this.customParameters={};this.customLayerParameters={};this.scheduleRender()};f.prototype.toParameter=function(b){var e={},g=b.label;b=b.value;g&&b&&(e[g]=b);return e};
f.prototype.removePickListIcons=function(){var b=this;setTimeout(function(){b.pickList.querySelectorAll("calcite-pick-list-item").forEach(function(e){e.removeAttribute("icon");e.removeAttribute("hidden")})},450)};f.prototype.render=function(){var b=this,e=this.customParameters,g=this.customLayerParameters;g=void 0===g?{}:g;var t=l.__assign(l.__assign({},void 0===e?{}:e),g);e=t&&Object.keys(t).length?!0:!1;return D.tsx("div",null,e?D.tsx("calcite-pick-list",{class:"trailer-half",afterCreate:function(d){b.pickList=
d;d.addEventListener("calciteListChange",function(H){return l.__awaiter(b,void 0,void 0,function(){var Q,G,I;return l.__generator(this,function(k){switch(k.label){case 0:return this.removePickListIcons(),[4,d.getSelectedItems()];case 1:Q=k.sent();if(null===Q||void 0===Q?0:Q.size)G=Q.values().next().value,I=this.toParameter(G),Q.forEach(function(w){return w.selected=!1}),this.onShowParameter(I);return[2]}})})})}},Object.keys(t).map(function(d){return b.getPickListItem(d,t[d])})):null,D.tsx("div",{class:"custom-parameters-fab trailer-half"},
D.tsx("calcite-fab",{appearance:"outline",icon:"plus",label:this.messages.addParameter,text:this.messages.addParameter,textEnabled:!0,scale:"s",bind:this,onclick:function(){return b.onShowParameter()},afterCreate:function(d){return b.addParameterBtn=d}})))};f.prototype.getPickListItem=function(b,e){var g=this;return D.tsx("calcite-pick-list-item",{key:b,label:b,value:e,icon:null,hidden:!0,removeable:!0,afterCreate:function(t){return g.removePickListIcons()}},D.tsx("calcite-action",{slot:"actions-end",
"data-key":b,label:this.messagesCommon.remove,bind:this,onclick:function(t){return g.removeParameter(t)},onCalciteListItemChange:function(){return g.removePickListIcons()},appearance:"clear",scale:"s",icon:"x"}))};f.prototype.onShowParameter=function(b){var e=this;this.popover&&this.destroyPopup();this.addParameterBtn.setAttribute("disabled",!0);var g=this.popover=document.createElement("calcite-popover");document.body.appendChild(g);g.referenceElement=this.addParameterBtn;g.placement="bottom";g.label=
"";g.disablePointer=!0;g.offsetDistance=-30;g.offsetSkidding=0;g.classList.add("js-app-primary-flyout","js-app-flyout");var t=b&&Object.keys(b).length&&this.customLayerParameters&&this.customLayerParameters[Object.keys(b).shift()]?!0:!1,d=document.createElement("div"),H=this.addParameter=new L.default({referenceElement:this.container,showAdvanced:this.showAdvanced,isCustomLayerParameter:t,container:g,customParameter:b});g.open=!0;g.appendChild(d);setTimeout(function(){e.disablePanel();H.setFocus()},
125);this.handleAddParameterDone=H.on("done",function(Q){return l.__awaiter(e,void 0,void 0,function(){var G=this;return l.__generator(this,function(I){if(null===Q||void 0===Q?0:Q.parameter)b&&Object.keys(b).forEach(function(k){G.remove(G.customParameters,k);G.remove(G.customLayerParameters,k)}),Q.appendToLayerOnly?this.updateCustomLayerParameter(Q.parameter):this.updateCustomParameter(Q.parameter),this.emit("customparameter-changed",this.customParameters);this.destroyPopup();this.scheduleRender();
return[2]})})})};f.prototype.remove=function(b,e){Object.keys(b||{}).length&&delete b[e]};f.prototype.updateCustomParameter=function(b){b=this.customParameters=b&&Object.assign({},this.customParameters,b)||null;this.updateLayer("customParameters",b)};f.prototype.updateCustomLayerParameter=function(b){b=this.customLayerParameters=b&&Object.assign({},this.customLayerParameters,b)||null;this.updateLayer("customLayerParameters",b)};f.prototype.updateLayer=function(b,e){return l.__awaiter(this,void 0,
void 0,function(){return l.__generator(this,function(g){switch(g.label){case 0:if(!this.layer)return[3,2];this.layer.set(b,e&&Object.keys(e).length?l.__assign({},e):null);return[4,this.layer.load()];case 1:g.sent(),this.layer.refresh&&this.layer.refresh(),y.default.publish("layer-updated"),g.label=2;case 2:return[2]}})})};f.prototype.removeParameter=function(b){var e,g,t=this.customParameters,d=this.customLayerParameters;b=null===(g=null===(e=null===b||void 0===b?void 0:b.target)||void 0===e?void 0:
e.dataset)||void 0===g?void 0:g.key;this.remove(d,b);this.remove(t,b);this.removePickListIcons();this.scheduleRender();this.layer&&(this.updateLayer("customParameters",t),this.updateLayer("customLayerParameters",d),y.default.publish("layer-updated"));this.emit("customparameter-changed",t)};f.prototype.disablePanel=function(){var b=this.container.closest("calcite-panel");b&&(b.disabled=!0)};f.prototype.enablePanel=function(){var b=this.container.closest("calcite-panel");b&&(b.disabled=!1)};l.__decorate([A.property(),
D.messageBundle("mapviewer/customParameters")],f.prototype,"messages",void 0);l.__decorate([A.property(),D.messageBundle("mapviewer/common")],f.prototype,"messagesCommon",void 0);return f=l.__decorate([A.subclass("")],f)}(v.default);n.default=N})},"app/widgets/panels/MapMaker/customparameters/AddParameter":function(){define("require exports tslib esri/core/accessorSupport/decorators esri/widgets/support/widget esri/widgets/Widget".split(" "),function(N,n,l,A,m,D){Object.defineProperty(n,"__esModule",
{value:!0});D=l.__importDefault(D);N=function(y){function v(L){L=y.call(this,L)||this;L.appendToLayerOnly=!1;L.isCustomLayerParameter=!1;L.showAdvanced=!1;return L}l.__extends(v,y);v.prototype.onDone=function(L){var J,f;L.preventDefault();if(this.isValid()){L=this.parameterInput;var b=this.valueInput;L=null===(J=null===L||void 0===L?void 0:L.value)||void 0===J?void 0:J.trim();J=null===(f=null===b||void 0===b?void 0:b.value)||void 0===f?void 0:f.trim();f={};f[L]=J;this.emit("done",{parameter:f,appendToLayerOnly:this.appendToLayerOnly})}};
v.prototype.onCancel=function(){this.emit("done")};v.prototype.setFocus=function(){this.panel.setFocus("dismiss-button")};v.prototype.isValid=function(){var L,J,f=this.parameterInput,b=this.valueInput;f=null===(L=null===f||void 0===f?void 0:f.value)||void 0===L?void 0:L.trim();L=null===(J=null===b||void 0===b?void 0:b.value)||void 0===J?void 0:J.trim();this.valueInput.status=L?"valid":"invalid";this.valueInputMessage.active=!L;this.parameterInput.status=f?"valid":"invalid";this.parameterInputMessage.active=
!f;return L&&f};v.prototype.render=function(){var L=this,J=this.customParameter,f,b,e=this.messagesCommon.add;J&&(Object.keys(J).forEach(function(g){f=g;b=J[g]}),e=this.messagesCommon.update);return m.tsx("div",null,m.tsx("calcite-panel",{intlClose:this.messagesCommon.close,dismissible:!0,"height-scale":"m","width-scale":"m",required:!0,class:"add-parameter-panel",afterCreate:function(g){L.panel=g;g.addEventListener("calcitePanelDismissedChange",function(){return L.onCancel()})}},m.tsx("div",{class:"heading",
slot:"header-content"},this.messages.addParameter),m.tsx("div",{class:"mapviewer-form"},m.tsx("calcite-label",null,this.messages.parameter,m.tsx("calcite-input",{scale:"s",autofocus:!0,afterCreate:function(g){return L.parameterInput=g},value:f}),m.tsx("calcite-input-message",{status:"invalid",icon:"exclamation-mark-triangle",afterCreate:function(g){return L.parameterInputMessage=g}},this.messagesCommon.required)),m.tsx("calcite-label",null,this.messages.value,m.tsx("calcite-input",{scale:"s",afterCreate:function(g){return L.valueInput=
g},value:b}),m.tsx("calcite-input-message",{status:"invalid",icon:"exclamation-mark-triangle",afterCreate:function(g){return L.valueInputMessage=g}},this.messagesCommon.required)),this.showAdvanced?m.tsx("calcite-label",{layout:"inline",alignment:"start",for:"checked-item",scale:"s"},m.tsx("calcite-checkbox",{id:"checked-item",name:"checked-item",checked:this.isCustomLayerParameter,onCalciteCheckboxChange:function(g){return L.appendToLayerOnly=g.target.checked}}),this.messages.appendToRequest):null,
m.tsx("calcite-button",{bind:this,onclick:this.onCancel,slot:"footer-actions",appearance:"clear",width:"half",text:this.messagesCommon.cancel},this.messagesCommon.cancel),m.tsx("calcite-button",{bind:this,onclick:this.onDone,slot:"footer-actions",appearance:"solid",width:"half",text:e},e))))};l.__decorate([A.property(),m.messageBundle("mapviewer/customParameters")],v.prototype,"messages",void 0);l.__decorate([A.property(),m.messageBundle("mapviewer/common")],v.prototype,"messagesCommon",void 0);return v=
l.__decorate([A.subclass("")],v)}(D.default);n.default=N})},"app/utils/closeBtn":function(){define(["require","exports"],function(N,n){Object.defineProperty(n,"__esModule",{value:!0});n.addCloseBtn=void 0;n.addCloseBtn=function(l,A,m){m.dismissible=!0}})}}});
define("require exports tslib ../LayerProperties ../../../../utils/closeBtn ../../../../utils/messageBundleLoader".split(" "),function(N,n,l,A,m,D){Object.defineProperty(n,"__esModule",{value:!0});n.createWidget=void 0;A=l.__importDefault(A);n.createWidget=function(y){return l.__awaiter(this,void 0,void 0,function(){var v,L,J,f,b,e,g,t,d,H,Q,G,I,k;return l.__generator(this,function(w){switch(w.label){case 0:return[4,D.fetchMessageBundles(["mapviewer/actions","mapviewer/common"])];case 1:return v=
w.sent(),L=v[0],J=v[1],f=y.state,b=y.payload,e=y.options,g=y.panel,t=y.action,d=y.container||document.createElement("div"),H=document.createElement("calcite-panel"),H.setAttribute("heading",L.layerProps),H.setAttribute("intl-back",J.back),m.addCloseBtn(g,t,H),d.appendChild(H),Q=document.createElement("div"),H.appendChild(Q),b.load?[4,b.load()]:[3,3];case 2:return I=w.sent(),[3,4];case 3:I=b,w.label=4;case 4:return G=I,k=new A.default({state:f,panel:g,container:Q,layer:G,mode:e}),H.setFocus("dismiss-button"),
[2,{destroy:function(){k&&!k.destroyed&&k.destroy()}}]}})})}});