function drawChart(n){setTimeout(n[n.getFunc()].bind(n),0);$(window).resize()}function drawChartLarge(n){setTimeout(n[n.getFunc()].bind(n),0);$(window).resize()}function prepareDashboard(n,t,i,r){var u=this,f="?id="+n+"&lang="+r+"&lazy=0",e="https://dataservice.wecr.wur.nl/MetaBaseOpenServices/RestServices.svc/data/container/json/"+f,o=i/2;$.ajax({url:e,cache:!1,dataType:"jsonp",xhrFields:{withCredentials:!1},error:function(n,t,i){u.errorCode=n.status;u.error=i},success:function(i){DrawDashBoard(i,n,r,t,o)}})}function DrawDashBoard(n,t,i,r,u){(document.getElementById("ContentPlaceHolder1_divThumbNails")!=null&&drawDashboardChart(n,t,i,r,null),document.getElementById("ContentPlaceHolder1_divThumbNail"+u)!=null)&&drawDashboardChart(n,t,i,r,u)}function drawDashboardChart(n,t,i,r,u){var o,l,f,p,a,w,h,b,g,k,e,c,v,d,s;u==null?(l=document.getElementById("ContentPlaceHolder1_divThumbNails"),a=document.getElementById("ContentPlaceHolder1_divLargeGroup")):(l=document.getElementById("ContentPlaceHolder1_divThumbNail"+u),a=document.getElementById("ContentPlaceHolder1_divLargeGroup"+u));switch(i){case 0:w="Klik om de grafiek te vergroten";break;default:w="Click to enlarge the chart"}for(h="",b="",e=0;e<n.getContainerJSONResult.Presentations.length;e++)for(v=n.getContainerJSONResult.Presentations[e].MetaBaseResponses.length,s=0;s<v;s++)c=n.getContainerJSONResult.Presentations[e].MetaBaseResponses[s].Id,h=h==""?c:h+"#"+c;for(b=getArticleURLs(h),g=h.split("#"),k=b.split("#"),e=0;e<n.getContainerJSONResult.Presentations.length;e++)for(f="",f=f+"<div class='sub_title_green'>"+n.getContainerJSONResult.Presentations[e].Name+"<\/div>",c=n.getContainerJSONResult.Presentations[e].ID,v=n.getContainerJSONResult.Presentations[e].MetaBaseResponses.length,s=0;s<v;s++){var tt=Math.floor(Math.random()*1e5+1),nt=c+"_"+tt,y=n.getContainerJSONResult.Presentations[e].MetaBaseResponses[s];f=f+"<div class='"+r+"'>";f=f+"<div class='divTitle'><\/div>";f=f+"<div id='plot_"+nt+"' class=divChart><\/div>";f=f+"<div class='divChartFooter'>";f=f+"<div class='divImg'><img src='Images/expand.png' title='"+w+"' onclick=enlarge('"+y.Id+"_large') /><\/div>";f=f+"<div id='divInfo'><span class='mlb'>";d=g.indexOf(y.Id.toString());k[d]!="-1"&&(f=f+k[d]);f=f+"<\/span><\/div>";f=f+"<\/div><\/div>";l.innerHTML=l.innerHTML+f;f="";p="";p="<div id='plot_"+y.Id+"_large' class='divChartLarge' title='Grafiek'><\/div>";a.innerHTML=a.innerHTML+p;o=new HighChartFactory(c,"plot_"+nt,null,!0,i);o.setDefaultPaletteString(null);o.minimized=!0;o.initializeWithData(drawChart,y);$("#"+o.target).height(225);$("#"+o.target).width(369);$("#"+o.targetPrefix).height(225);$("#"+o.targetPrefix).width(369)}}function getArticleURLs(n){var t="",i=window.location.href.toString();return $.ajax({type:"POST",url:"SectorResultaat.aspx/getArticleURLs",data:"{ids: "+JSON.stringify(n)+", currentpage: "+JSON.stringify(i)+"}",contentType:"Application/json; charset=utf-8",dataType:"json",async:!1,failure:function(n){alert(n.d)},success:function(n){t=n.d}}),t}function buildChart(n,t,i,r,u,f){var e;return e=u=="nl"?new HighChartFactory(n,t,null,!0,0):new HighChartFactory(n,t,null,!0,1),e.setDefaultPaletteString(null),e.minimized=i,f=="1"?e.initializeNoCache(r):e.initialize(r),i&&($("#"+e.target).height(225),$("#"+e.target).width(369),$("#"+e.targetPrefix).height(225),$("#"+e.targetPrefix).width(369)),e}function enlarge(n){var i;document.getElementById("plot_"+n).innerHTML="";var t=document.getElementById("HFLocale"),r=document.getElementById("HFPreview"),u=n.substring(0,n.indexOf("_"));buildChart(u,"plot_"+n,!1,drawChartLarge,t.value,r.value);i=t.value=="nl"?"Sluiten":"Close";document.getElementById("plot_"+n).style.display="block";$("#plot_"+n).dialog({height:600,width:800,title:"",buttons:[{text:i,id:"mybut",click:function(){$(this).dialog("close")}}]});$(".ui-dialog-titlebar").hide()}function enlargeHighMap(n){var u=document.getElementById("HFLocale"),t,i,r;u.value=="nl"?(t="Sluiten",i="<iframe width='700px' height='800px' src='"+n+"?lang='nl' style='text-align:center'><\/iframe>"):(t="Close",i="<iframe width='700px' height='800px' src='"+n+"?lang='uk' style='text-align:center'><\/iframe>");r=$("<div style=text-align:center><\/div>").html(i).dialog({autoOpen:!1,modal:!0,height:900,width:800,title:"",buttons:[{text:t,id:"mybut",click:function(){$(this).dialog("close")}}]});r.dialog("open");$(".ui-dialog-titlebar").hide()}function enlargeImage(n){var r=document.getElementById("HFLocale"),t,i;t=r.value=="nl"?"Sluiten":"Close";i=$("<div style=text-align:center><\/div>").html("<img src='"+n+"' />").dialog({autoOpen:!1,modal:!0,height:750,width:650,title:"",buttons:[{text:t,id:"mybut",click:function(){$(this).dialog("close")}}]});i.dialog("open");$(".ui-dialog-titlebar").hide()}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function canShowxLabel(n){var t=!0;return TryParseInt(n[0],-1)==-1&n.length>3&&(t=!1),TryParseInt(n[0],-1)!=-1&n.length>8&&(t=!1),t}function getTitle(n,t,i,r){var f=n,e="",u;if(i!=null)for(u=0;u<i.length;u++)if(i[u].selections.length>0){e=i[u].namesDictionary[i[u].selections[0]];f=f+"<br><p>"+e+"<\/p>";break}e==""&&t!=" "&t!=null&&(f=f+"<br><p>"+t+"<\/p>");document.getElementById(r).parentNode.childNodes[0].innerHTML=f}$(document).ready(function(){var i=document.getElementById("HFChart"),n,f,u;if(i!=null&&i.value!=-1){var e=document.getElementById("HFLocale"),o=document.getElementById("HFPreview"),t=i.value.split(";"),r;for(n=0,f=t.length;n<f;n++)r=t[n].substring(0,t[n].indexOf("_")),u=e.value=="nl"?new HighChartFactory(r,"plot_"+t[n],null,!0,0):new HighChartFactory(r,"plot_"+t[n],null,!0,1),o.value=="1"?u.initializeNoCache(drawChart):u.initialize(drawChart)}});$(document).ready(function(){var t=document.getElementById("HFChartDashboard"),n,u;if(t!=null&&t.value!=-1&&t.value!=""){var f=document.getElementById("HFLocale"),e=document.getElementById("HFPreview"),i=t.value.split(";"),r;for(n=0,u=i.length;n<u;n++)r=i[n].substring(0,i[n].indexOf("_")),buildChart(r,"plot_"+i[n],!0,drawChart,f.value,e.value)}});$(document).ready(function(){var t=document.getElementById("HFContainer"),r,u,f,i,n;if(t!=null&&t.value!="-1"&&t.value!="")for(r=document.getElementById("HFLocale"),u=r.value=="nl"?0:1,f=document.getElementById("HFPreview"),i=t.value.split("#"),n=0;n<i.length;n+=2)prepareDashboard(i[n],i[n+1],n,u)});HighChartFactory.prototype.drawHighChart=function(){var r,n,t,i,u;this.errorCheck()&&(r=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC(),Highcharts.setOptions(this.getGlobalOpts(!0)),n=this.getSharedOpts(),this.minimized?getTitle(n.title.text,this.subtitle(),this.reducableDimensions,this.targetPrefix):(n.legend=this.chartOptions.legend,n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}}),t={fontSize:this.theme.labelFontSize},i=this,this.minimized?(u=canShowxLabel(this.chartData.categories),n.xAxis=u?this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(i.dateFormat.displayFormat,this.value)}}}:this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t,formatter:function(){return""}}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(i.dateFormat.displayFormat,this.value)}}},n.yAxis={min:this.getMin(),max:this.getMax(),labels:{format:this.yLabelFormat(this.chartData,0),style:t},title:null}):(n.xAxis=this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(i.dateFormat.displayFormat,this.value)}}},n.yAxis={min:this.getMin(),max:this.getMax(),labels:{format:this.yLabelFormat(this.chartData,0),style:t},title:{text:this.suffix(0),rotation:this.suffix(0).length==1?0:270,margin:20,style:{color:"#333",fontWeight:"bold",fontSize:this.theme.axisFontSize}}}),n.series=r,this.minimized?(n.legend={enabled:!1},n.credits={enabled:!1},this.chart=new Highcharts.Chart(n),$("#"+this.target).find(".highcharts-button").remove(),$("#"+this.targetPrefix).find(".squaredFour").remove(),$("#"+this.target).find(".highcharts-title").remove()):(this.addLegendTooltip(),this.addText(),this.chart=new Highcharts.Chart(n)))};HighChartFactory.prototype.drawHighChart_2axes=function(){var t,r,u;if(this.errorCheck()){var f=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC(),i=Highcharts.setOptions(this.getGlobalOpts(!0)),n=this.getSharedOpts();this.minimized?getTitle(n.title.text,this.subtitle(),this.reducableDimensions,this.targetPrefix):(n.legend=this.chartOptions.legend,n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}});t={fontSize:this.theme.labelFontSize};r=this;this.minimized?(u=canShowxLabel(this.chartData.categories),n.xAxis=u?this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}}:this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t,formatter:function(){return""}}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}},n.yAxis=[{min:this.getMin(),max:this.getMax(),labels:{format:this.yLabelFormat(this.chartData,0),style:{color:i.colors[0],fontSize:this.theme.labelFontSize}},title:null},{min:this.getMin(),max:this.getMax(),labels:{format:this.yLabelFormat(this.chartData,1),style:{color:i.colors[1],fontSize:this.theme.labelFontSize}},opposite:!0,title:null}]):(n.xAxis=this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:t}}:{type:"datetime",labels:{style:t,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}},n.yAxis=[{min:this.getMin(),title:{text:this.yAxisTitle(this.chartData,0),style:{color:i.colors[0],fontWeight:"bold",fontSize:this.theme.axisFontSize}},labels:{format:this.yLabelFormat(this.chartData,0),style:{color:i.colors[0],fontSize:this.theme.labelFontSize}}},{min:this.getMin(),title:{text:this.yAxisTitle(this.chartData,1),style:{color:i.colors[1],fontWeight:"bold",fontSize:this.theme.axisFontSize}},labels:{format:this.yLabelFormat(this.chartData,1),style:{color:i.colors[1],fontSize:this.theme.labelFontSize}},opposite:!0}]);n.series=f;this.chart=new Highcharts.Chart(n);this.minimized?(n.legend={enabled:!1},n.credits={enabled:!1},this.chart=new Highcharts.Chart(n),$("#"+this.target).find(".highcharts-button").remove(),$("#"+this.targetPrefix).find(".squaredFour").remove(),$("#"+this.target).find(".highcharts-title").remove(),$("#"+this.target).find(".highcharts-subtitle").remove()):(this.addLegendTooltip(),this.addText())}};HighChartFactory.prototype.drawHighChart_3axes=function(){var u,t,n,i,r,f;this.errorCheck()&&(u=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC(),t=this.getGlobalOpts(!0),Highcharts.setOptions(t),n=this.getSharedOpts(),this.minimized?getTitle(n.title.text,this.subtitle(),this.reducableDimensions,this.targetPrefix):(n.legend=this.chartOptions.legend,n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}}),i={fontSize:this.theme.labelFontSize},r=this,this.minimized?(f=canShowxLabel(this.chartData.categories),n.xAxis=f?this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:i}}:{type:"datetime",labels:{style:i,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}}:this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:i,formatter:function(){return""}}}:{type:"datetime",labels:{style:i,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}},n.yAxis=[{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,0),style:{color:"#666",fontSize:this.theme.labelFontSize}},title:null},{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,1),style:{color:t.colors[1],fontSize:this.theme.labelFontSize}},title:null,opposite:!0},{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,2),style:{color:t.colors[2],fontSize:this.theme.labelFontSize}},title:null,opposite:!0}]):(n.xAxis=this.dateFormat==undefined?{categories:this.chartData.categories,labels:{style:i}}:{type:"datetime",labels:{style:i,formatter:function(){return Highcharts.dateFormat(r.dateFormat.displayFormat,this.value)}}},n.yAxis=[{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,0),style:{color:"#666",fontSize:this.theme.labelFontSize}},title:{text:this.yAxisTitle(this.chartData,0),style:{color:t.colors[0],fontWeight:"bold",fontSize:this.theme.axisFontSize}}},{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,1),style:{color:t.colors[1],fontSize:this.theme.labelFontSize}},title:{text:this.yAxisTitle(this.chartData,1),style:{color:t.colors[1],fontWeight:"bold",fontSize:this.theme.axisFontSize}},opposite:!0},{min:this.getMin(),labels:{format:this.yLabelFormat(this.chartData,2),style:{color:t.colors[2],fontSize:this.theme.labelFontSize}},title:{text:this.yAxisTitle(this.chartData,2),style:{color:t.colors[2],fontWeight:"bold",fontSize:this.theme.axisFontSize}},opposite:!0}]),n.series=u,this.chart=new Highcharts.Chart(n),this.minimized?(n.legend={enabled:!1},n.credits={enabled:!1},this.chart=new Highcharts.Chart(n),$("#"+this.target).find(".highcharts-button").remove(),$("#"+this.targetPrefix).find(".squaredFour").remove(),$("#"+this.target).find(".highcharts-title").remove(),$("#"+this.target).find(".highcharts-subtitle").remove()):(this.addLegendTooltip(),this.addText()))};HighChartFactory.prototype.drawHighChart_AreaRange=function(){var n,t;this.errorCheck()&&(Highcharts.setOptions(this.getGlobalOpts(!1)),n=this.getSharedOpts(),this.minimized&&getTitle(n.title.text,this.subtitle(),this.reducableDimensions,this.targetPrefix),n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}},n.legend=this.chartOptions.legend,t={fontSize:this.theme.labelFontSize},n.xAxis={type:"datetime",labels:{style:t}},n.yAxis={title:{text:this.suffix(0),style:{fontSize:this.theme.axisFontSize}},labels:{style:t}},n.series=[{name:this.chartData.avgName,data:this.chartData.avg,type:"line",zIndex:1,color:"#35992A",marker:{fillColor:"white",lineWidth:2,lineColor:"#35992A"}},{name:this.chartData.rangeName,data:this.chartData.range,type:"arearange",lineWidth:0,linkedTo:":previous",color:"#35992A",fillOpacity:.3,zIndex:0}],this.chart=new Highcharts.Chart(n,function(){this.series[0].showDataLabels=!0}),this.minimized?(n.credits={enabled:!1},this.chart=new Highcharts.Chart(n),$("#"+this.target).find(".highcharts-button").remove(),$("#"+this.targetPrefix).find(".squaredFour").remove(),$("#"+this.target).find(".highcharts-title").remove(),$("#"+this.target).find(".highcharts-subtitle").remove()):this.addText())};HighChartFactory.prototype.drawHighChart_MasterDetail=function(){var t,n;if(this.errorCheck()){t=this.dateFormat==undefined?this.chartData.series:this.convertCategoryToUTC();Highcharts.setOptions(this.getGlobalOpts(!0));n={};n.chart={renderTo:this.target,marginLeft:20,marginRight:20};var r=this.dateToUTC(Date.parseString(this.chartData.categories[0],this.dateFormat.sourceFormat)),u=this.dateToUTC(Date.parseString(this.chartData.categories[this.chartData.categories.length-1],this.dateFormat.sourceFormat)),i={fontSize:this.theme.labelFontSize};n.xAxis={range:(u-r)/2,labels:{style:i}};n.yAxis={labels:{x:-20,style:i}};n.tooltip=this.getToolTip();n.series=t;this.minimized?(getTitle(this.title(),this.subtitle(),null,this.targetPrefix),n.exporting={enabled:!1},n.title={enabled:!1},n.subtitle={enabled:!1},n.credits={enabled:!1},n.legend={enabled:!1}):(n.legend={enabled:!0,itemStyle:{fontSize:this.theme.legendFontSize}},n.credits={text:(this.languageID?"Source: ":"Bron: ")+this.meta.DataSupplier.Name,href:this.meta.DataSupplier.Url,style:{fontSize:this.theme.creditsFontSize}},n.title={text:this.title(),style:{fontSize:this.theme.titleFontSize,fontWeight:this.theme.titleFontWeight}},n.subtitle={text:this.subtitle(),style:{fontSize:this.theme.subtitleFontSize}});n.exporting={enabled:!0,buttons:{contextButton:{text:this.languageID?"Save":"Opslaan",theme:{style:{color:"#909090",fontSize:this.theme.exportFontSize}},symbolX:15,symbolY:12,menuItems:this.menuItems()}}};n.colors=_.isUndefined(this.chartOptions.colorPalette)?this.LEIcolors("sectcijf",this.chartData.series.length,!1):this.LEIcolors(this.chartOptions.colorPalette,this.chartData.series.length,!1);n.plotOptions={series:{connectNulls:!0}};this.minimized?(this.chart=new Highcharts.StockChart(n),$("#"+this.target).find(".highcharts-button").remove(),$("#"+this.targetPrefix).find(".squaredFour").remove(),$("#"+this.target).find(".highcharts-title").remove(),$("#"+this.target).find(".highcharts-subtitle").remove(),$("#"+this.target).find(".highcharts-range-selector-buttons").remove(),$("#"+this.target).find(".highcharts-navigator").remove(),$("#"+this.target).find(".highcharts-navigator-handle-left").remove(),$("#"+this.target).find(".highcharts-navigator-handle-right").remove()):(this.chart=new Highcharts.StockChart(n),this.addLegendTooltip(),this.addText())}};HighChartFactory.prototype.drawHighMapDrillDown=function(){var t,n,i,u,r;Highcharts.setOptions({lang:{drillUpText:"<< Terug"}});t=Highcharts.geojson(JSON.parse(this.meta.Map));this.presentGeoLocations=[];n={};i=this;$.each(t,function(){this.properties.mbCode=this.properties["hc-key"].replace(/-/g,".").toUpperCase();i.presentGeoLocations.push(this.properties.mbCode);this.drilldown=this.properties.mbCode;n[this.properties.mbCode]=this;this.value=0});u=this.getMapData()[0];$.each(u,function(){n[this.code].value=this.value;n[this.code].min=this.min;n[this.code].max=this.max});this.minimized?($("#"+this.target).highcharts("Map",{chart:{events:{click:function(){},drilldown:function(n){n.seriesOptions||i.drilldown(this,n.point);this.setTitle(null,{text:n.point.name})},drillup:function(){this.setTitle(null,{text:""})}}},credits:{enabled:!1},colorAxis:{min:0,minColor:"#E6E7E8",maxColor:"#34b233"},series:[{animation:!0,data:t,name:this.title(),states:{hover:{color:"#BADA55"}},dataLabels:{enabled:!1}}],tooltip:this.getMapToolTip()}),$("#"+this.target).find(".highcharts-button").remove(),$("#"+this.targetPrefix).find(".squaredFour").remove(),$("#"+this.target).find(".highcharts-title").remove(),r=this.chartOptions.title,this.subtitle()!=null&&(r=r+"<br><p>"+this.subtitle()+"<\/p>"),document.getElementById(this.targetPrefix).parentNode.childNodes[0].innerHTML=r):$("#"+this.target).highcharts("Map",{chart:{events:{click:function(){},drilldown:function(n){n.seriesOptions||i.drilldown(this,n.point);this.setTitle(null,{text:n.point.name})},drillup:function(){this.setTitle(null,{text:""})}}},title:{text:this.title()},credits:{text:(this.languageID?"Source: ":"Bron: ")+this.meta.DataSupplier.Name,href:this.meta.DataSupplier.Url,style:{fontSize:this.theme.creditsFontSize}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},mapNavigation:{enabled:!0,buttonOptions:{verticalAlign:"bottom"}},colorAxis:{min:0,minColor:"#E6E7E8",maxColor:"#34b233"},series:[{animation:!0,data:t,name:this.title(),states:{hover:{color:"#BADA55"}},dataLabels:{enabled:!0,format:"{point.properties.name}"}}],tooltip:this.getMapToolTip(),drilldown:{activeDataLabelStyle:{color:"white",textDecoration:"none"},drillUpButton:{relativeTo:"plotBox",position:{x:0,y:60}}}})};
