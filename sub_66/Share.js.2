define(["../Component","dojo/i18n!../Share/nls/resources","../Share/index"],(function(e,t,r){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=963)}({0:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return a})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return s})),r.d(t,"g",(function(){return l}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function u(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function c(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function u(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))}function s(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}Object.create;function l(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}Object.create},113:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(16),i=function(e,t,r){var n,o=null==t?void 0:t.toLowerCase(),i=!1,a=!1,u=!1,c=!1;if("ogcfeatureserver"===o)n="featureshosted";else if((null==o?void 0:o.indexOf("service"))>0||"feature collection"===o||"kml"===o||"wms"===o||"wmts"===o||"wfs"===o){var s=r.indexOf("Hosted Service")>-1;if("feature service"===o||"feature collection"===o||"kml"===o||"wfs"===o)c=r.indexOf("Table")>-1,i=r.indexOf("Route Layer")>-1,a=r.indexOf("Markup")>-1,n=(u=-1!==r.indexOf("Spatiotemporal"))&&c?"spatiotemporaltable":c?"table":i?"routelayer":a?"markup":u?"spatiotemporal":s?"featureshosted":"features";else if("map service"===o||"wms"===o||"wmts"===o)n=s||r.indexOf("Tiled")>-1||"wmts"===o?"maptiles":"mapimages";else if("scene service"===o)n=r.indexOf("Line")>-1?"sceneweblayerline":r.indexOf("3DObject")>-1?"sceneweblayermultipatch":r.indexOf("Point")>-1?"sceneweblayerpoint":r.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":r.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":r.indexOf("Polygon")>-1?"sceneweblayerpolygon":r.indexOf("Building")>-1?"sceneweblayerbuilding":r.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer";else if("image service"===o){var l=r.indexOf("Elevation 3D Layer")>-1,f=r.indexOf("Tiled Imagery")>-1;n=l?"elevationlayer":f?"tiledimagerylayer":"imagery"}else n="stream service"===o?"streamlayer":"vector tile service"===o?"vectortile":"datastore catalog service"===o?"datastorecollection":"geocoding service"===o?"geocodeservice":"geoprocessing service"===o&&r.indexOf("Web Tool")>-1?"tool":"layers"}else n="web map"===o||"cityengine web scene"===o?"maps":"web scene"===o?r.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===o&&(null==r?void 0:r.indexOf("configurableApp"))>-1?"instantapps":"web mapping application"===o||"mobile application"===o||"application"===o||"operation view"===o||"desktop application"===o?"apps":"map document"===o||"map package"===o||"published map"===o||"scene document"===o||"globe document"===o||"basemap package"===o||"mobile basemap package"===o||"mobile map package"===o||"project package"===o||"project template"===o||"pro map"===o||"layout"===o||"layer"===o&&r.indexOf("ArcGIS Pro")>-1||"explorer map"===o&&r.indexOf("Explorer Document")>-1?"mapsgray":"service definition"===o||"csv"===o||"administrative report"===o||"shapefile"===o||"cad drawing"===o||"geojson"===o||"360 vr experience"===o||"netcdf"===o?"datafiles":"explorer add in"===o||"desktop add in"===o||"windows viewer add in"===o||"windows viewer configuration"===o?"appsgray":"arcgis pro add in"===o||"arcgis pro configuration"===o?"addindesktop":"rule package"===o||"file geodatabase"===o||"csv collection"===o||"kml collection"===o||"windows mobile package"===o||"map template"===o||"desktop application template"===o||"arcpad package"===o||"code sample"===o||"form"===o||"document link"===o||"vector tile package"===o||"operations dashboard add in"===o||"rules package"===o||"image"===o||"workflow manager package"===o||"explorer map"===o&&r.indexOf("Explorer Mapping Application")>-1||r.indexOf("Document")>-1?"datafilesgray":"network analysis service"===o||"geoprocessing service"===o||"geodata service"===o||"geometry service"===o||"geoprocessing package"===o||"locator package"===o||"geoprocessing sample"===o||"workflow manager service"===o||"raster function template"===o||"deep learning package"===o?"toolsgray":"layer"===o||"layer package"===o||"explorer layer"===o?"layersgray":"scene package"===o?"scenepackage":"tile package"===o?"tilepackage":"storymap"===o?"storymap":"storymap theme"===o?"storymaptheme":"web experience"===o?"experiencebuilder":"web experience template"===o?"webexperiencetemplate":"task file"===o?"taskfile":"report template"===o?"report-template":"statistical data collection"===o?"statisticaldatacollection":"insights workbook"===o?"workbook":"insights model"===o?"insightsmodel":"insights page"===o?"insightspage":"hub initiative"===o?"hubinitiative":"hub page"===o?"hubpage":"hub site application"===o?"hubsite":"relational database connection"===o?"relationaldatabaseconnection":"big data file share"===o?"datastorecollection":"image collection"===o?"imagecollection":"desktop style"===o?"desktopstyle":"style"===o?"style":"dashboard"===o?"dashboard":"feed"===o?"feed":"real time analytic"===o?"realtimeanalytics":"big data analytic"===o?"bigdataanalytics":"maps";return e+"/"+n+"16.png"},a=Object(o.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{iconURI:i(e,t.type,t.typeKeywords?t.typeKeywords:[])})}))},117:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(16),i=function(e,t){var r,n="notebook"!==(null===(r=t.type)||void 0===r?void 0:r.toLowerCase())?"default_thumb.png":"notebook-thumb.png",o=e.baseUrl+"/home/js/arcgisonline/css/images/"+n;return t.thumbnail&&(o=e.restUrl+"/content/items/"+t.id+"/info/"+t.thumbnail+(e.credential?"?token="+e.credential.token:"")),o},a=Object(o.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{thumbURI:i(e,t)})}))},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(16),i=function(e,t){return t.description?t.description.replace(/src=('|")js\/jsapi\/esri\//g,(function(t){return"src="+('"'===t[4]?'"':"'")+e.baseUrl+"/home/js/jsapi/esri/"})):void 0},a=Object(o.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{patchedDescription:i(e,t)})}))},119:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(0),o=r(121),i=r(16),a=r(56),u=function(e,t){var r,n=t.type,i=t.typeKeywords||[],u=n,c=(null==e?void 0:e.portalUser)||(null==e?void 0:e.user);if("Feature Service"===n||"Feature Collection"===n){if(u=i.indexOf("Table")>-1?"Table":i.indexOf("Route Layer")>-1?"Route Layer":i.indexOf("Markup")>-1?"Markup":"Feature Layer",c&&Object(a.d)(t,c)&&(null==i?void 0:i.indexOf("Hosted Service"))>-1){var s=(null===(r=null===document||void 0===document?void 0:document.documentElement)||void 0===r?void 0:r.lang)||"en";u=u+" ("+(o.a[s]||o.a[s.split("-")[0]]||o.a.en)+")"}}else if("Image Service"===n){var l=i.indexOf("Elevation 3D Layer")>-1,f=i.indexOf("Tiled Imagery")>-1;u=l?"Elevation Layer":f?"Tiled Imagery Layer":"Imagery Layer"}else"Scene Service"===n?u="Scene Layer":"Scene Package"===n?u="Scene Layer Package":"Stream Service"===n?u="Feature Layer":"Geocoding Service"===n?u="Locator":"Microsoft Powerpoint"===n?u="Microsoft PowerPoint":"OGCFeatureServer"===n?u="OGC Feature Layer":"GeoJson"===n?u="GeoJSON":"Globe Service"===n?u="Globe Layer":"Vector Tile Service"===n?u="Tile Layer":"netCDF"===n?u="NetCDF":"Map Service"===n?u=-1===i.indexOf("Spatiotemporal")&&(i.indexOf("Hosted Service")>-1||i.indexOf("Tiled")>-1)?"Tile Layer":"Map Image Layer":n&&n.toLowerCase().indexOf("add in")>-1?u=n.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===n?u="Big Data File Share":"Web Mapping Application"===n&&(null==i?void 0:i.includes("configurableApp"))&&(u="Instant App");return u},c=Object(i.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{displayName:u(e,t)})}))},120:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(16),i=function(e,t){var r=[],n=e.typeKeywords?e.typeKeywords:[];return e.contentStatus&&("org_authoritative"===e.contentStatus||"public_authoritative"===e.contentStatus?r.push("authoritative"):"deprecated"===e.contentStatus&&r.push("deprecated")),e.origin&&r.push("collaboration"),e.groupDesignations&&e.groupDesignations.indexOf("livingatlas")>-1&&r.push("livingAtlas"),n.indexOf("Requires Credits")>-1?r.push("premium"):n.indexOf("Requires Subscription")>-1&&r.push("subscriber"),n.indexOf("Public Data Collection")>-1&&((null==t?void 0:t.portalUser)||(null==t?void 0:t.user))&&r.push("publicDataCollection"),"Solution"===e.type&&e.typeKeywords.indexOf("ArcGIS Solution")>-1&&r.push("solution"),r},a=Object(o.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{badges:i(t,e)})}))},121:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={ar:"مستضاف",bs:"hostirano",ca:"allotjat",cs:"hostovaná položka",da:"hostede",de:"gehostet",el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"isännöity",fr:"hébergé",he:"מתארח",hr:"hostirano",hu:"tárolt",id:"di-host",it:"ospitati",ja:"ホスト",ko:"호스팅",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"găzduite",ru:"размещенный",sl:"gostujoči",sk:"hostil",sr:"hostovani",sv:"driftade",th:"หลัก",tr:"barındırılan",uk:"розміщений на хості",vi:"được lưu trữ","zh-cn":"托管","zh-hk":"託管","zh-tw":"託管"}},124:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r(0),o=r(16),i=function(e,t){var r;return t.thumbnail&&(r=e.restUrl+"/community/groups/"+t.id+"/info/"+t.thumbnail+(e.credential?"?token="+e.credential.token:"")),r},a=Object(o.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{thumbURI:i(e,t)})}))},131:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return s}));var n,o=r(0),i=r(26);!function(e){e.LOADING="loading",e.LOADED="loaded",e.FAILED="failed"}(n||(n={}));var a=function(e){var t=e.selectedGroups,r=e.selectorItems;return 0===r.length?Object.keys(t).map((function(e){return t[e].group})):Object.keys(t).filter((function(e){return c(t[e],r)})).map((function(e){return t[e].group}))},u=function(e){var t=e.initialSelectedGroups,r=e.selectedGroups,n=Object.keys(r).map((function(e){return r[e].group.id}));return Object.keys(t).map((function(e){return t[e].group.id})).filter((function(e){return n.indexOf(e)<0})).map((function(e){return t[e].group}))},c=function(e,t){return!e.selectedByIds||e.selectedByIds.length===t.length},s={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},status:n.LOADING,total:0,hasGroups:!0};t.b=function(e,t){switch(void 0===e&&(e=s),t.type){case i.a.DESELECT_GROUPS:return Object(o.a)(Object(o.a)({},e),{selectedGroups:t.payload.reduce((function(e,t){var r=e,n=t.id;r[n];return Object(o.f)(r,["symbol"==typeof n?n:n+""])}),e.selectedGroups)});case i.a.REVERT_GROUPS:return t.payload?Object(o.a)(Object(o.a)({},e),{selectedGroups:t.payload.reduce((function(t,r){var n;if(e.initialSelectedGroups[r.id])return Object(o.a)(Object(o.a)({},t),((n={})[r.id]=e.initialSelectedGroups[r.id],n));var i=t,a=r.id;i[a];return Object(o.f)(i,["symbol"==typeof a?a:a+""])}),e.selectedGroups)}):Object(o.a)(Object(o.a)({},e),{selectedGroups:Object(o.a)({},e.initialSelectedGroups)});case i.a.SELECT_GROUPS:var r=e.selectorItems.map((function(e){return e.id}));return Object(o.a)(Object(o.a)({},e),{selectedGroups:t.payload.reduce((function(e,t){var n;return Object(o.a)(Object(o.a)({},e),((n={})[t.group.id]=Object(o.a)({selectedByIds:r},t),n))}),e.selectedGroups)});case i.a.SET_INITIAL_GROUPS:var a=t.payload.reduce((function(e,t){var r;return Object(o.a)(Object(o.a)({},e),((r={})[t.group.id]=t,r))}),{});return Object(o.a)(Object(o.a)({},e),{selectedGroups:a,initialSelectedGroups:Object(o.a)({},a)});case i.a.SET_SELECTOR_ITEMS:return Object(o.a)(Object(o.a)({},e),{selectorItems:t.payload});case i.a.CLEAR_SELECTION:return Object(o.a)(Object(o.a)({},e),{selectedGroups:{}});case i.a.LOADING_GROUPS:return Object(o.a)(Object(o.a)({},e),{status:n.LOADING});case i.a.LOAD_GROUPS_SUCCESS:return Object(o.a)(Object(o.a)({},e),{displayGroups:t.payload.results,total:t.payload.total,status:n.LOADED});case i.a.LOAD_GROUPS_FAIL:return Object(o.a)(Object(o.a)({},e),{displayGroups:[],status:n.FAILED});case i.a.SET_HAS_GROUPS:return Object(o.a)(Object(o.a)({},e),{hasGroups:t.payload});default:return e}}},133:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"k",(function(){return _})),r.d(t,"g",(function(){return y})),r.d(t,"j",(function(){return g})),r.d(t,"d",(function(){return E})),r.d(t,"i",(function(){return S})),r.d(t,"h",(function(){return R})),r.d(t,"c",(function(){return I})),r.d(t,"b",(function(){return w})),r.d(t,"e",(function(){return U})),r.d(t,"f",(function(){return L}));var n,o=r(0),i=r(172),a=r(140),u=r(131),c=r(61),s=r(29),l=r(325),f=r(188),d=r(368),p=r(55),b=r(56),O=r(25);!function(e){e.SET_SELECTED_SHARE_LEVEL="SET_SELECTED_SHARE_LEVEL",e.SET_INITIAL_SHARE_LEVEL="SET_INITIAL_SHARE_LEVEL",e.SET_CURRENT_VIEW="SET_CURRENT_VIEW",e.SET_AND_FOCUS_VIEW="SET_AND_FOCUS_VIEW",e.SET_DEPENDENT_ITEMS="SET_DEPENDENT_ITEMS",e.SET_MINI_DIALOG="SET_MINI_DIALOG",e.SET_SHARE_MODE="SET_SHARE_MODE",e.SET_USER_TYPE="SET_USER_TYPE",e.SET_HELP_MAP="SET_HELP_MAP"}(n||(n={}));var h=function(e){return{type:n.SET_SELECTED_SHARE_LEVEL,payload:e}},v=function(){return{type:n.SET_INITIAL_SHARE_LEVEL}},_=function(e){return{type:n.SET_MINI_DIALOG,payload:e}},y=function(){return function(e,t){var r,o,a=t(),u=a.utilities,s=u.portal,l=u.request,f=a.resources.items,d=m(a),p=s.urlKey||s.isPortal?O.e.ORG:O.e.PUBLIC;e(v()),e((r=d,{type:n.SET_SHARE_MODE,payload:r})),e((o=p,{type:n.SET_USER_TYPE,payload:o})),e(Object(i.a)({selectorItems:f,anySelectorItemsPrivate:t().resources.selectedOptions[O.b.private]>0,shareMode:d,userType:p})).then((function(){return Object(c.a)(s,l)})).then((function(t){var r;e((r=t,{type:n.SET_HELP_MAP,payload:r})),e(g(O.a.SHARE))}))}},g=function(e){return function(t){t(function(e){return{type:n.SET_CURRENT_VIEW,payload:e}}(e))}},m=function(e){var t=e.resources,r=t.items,n=t.portalUser,o=e.utilities.portal,i=r[0];if(Object(b.d)(i,n))return O.d.DEFAULT;var a=!i.orgId||i.orgId===n.orgId;return Object(p.h)({items:r,user:n,portal:o})&&a?O.d.ADMIN:O.d.GROUP};function E(e,t){var r=t(),n=r.utilities.request,o=r.resources,i=o.items,a=o.selectedOptions,u=o.selectedOptionsDirty,c=Object(f.b)(i),s=u&&a.public===a.total;e(g(O.a.LOADING)),c.length>0&&s?Object(f.a)({items:c,request:n}).then((function(t){if(t.length){var r=t.some((function(e){return-1===e.typeKeywords.indexOf("Public Data Collection")}));e(_(r?O.c.PUBLIC_DATA_COLLECTION_DISABLED:O.c.PUBLIC_DATA_COLLECTION_ENABLED))}else e(j)})).catch((function(){e(j)})):e(j)}function j(e,t){var r=t(),o=r.utilities,i=o.portal,a=o.request,s=o.onComplete,l=r.resources,f=l.items,p=l.selectedOptions,b=l.portalUser,h=r.gbState.groups,v=h.selectedGroups,_=h.initialSelectedGroups,y=Object(u.d)({selectedGroups:v,selectorItems:f}),g=Object(u.c)({initialSelectedGroups:_,selectedGroups:v}),m=[];Object(c.h)({items:f,groups:g,portalUser:b,restUrl:i.restUrl,request:a}).then((function(){return Object(c.g)({items:f,groups:y,portalUser:b,request:a,restUrl:i.restUrl,selectedOptions:p})})).catch((function(e){e.results?m=m.concat(Object(d.a)(e.results,f)):e.message&&m.push({error:e})})).then((function(){return e(T)})).then((function(){var r=t().resources,o=r.items,i=r.dependentItems,a=i.needShareLevelUpdate,u=i.needGroupSharingUpdate,l=i.notEditable,f=i.premium,d=i.needPubliclyEditableWarning,p=i.needEditableWarning,b=i.needDataCollectionEnabled,h=i.needGroupDependentApplicationWarning,v=r.selectedOptions,_=r.selectedOptionsDirty,y=_&&v.public===v.total;if(0!==a.length||0!==u.length||0!==l.length||0!==f.length||0!==d.length||0!==p.length||0!==b.length||0!==h.length&&y||0!==Object(c.c)(o,v,_).length)e({type:n.SET_CURRENT_VIEW,payload:O.a.DEPENDENT_ITEM_CONFIRMATION});else{var g=m.length>0?{errors:m,selectedOptions:v}:{selectedOptions:v};s(g)}})).catch(console.error)}function S(e,t){var r=t(),n=r.utilities,i=n.portal,a=n.request,l=n.onComplete,f=r.resources,d=f.dependentItems,p=d.needShareLevelUpdate,b=d.needGroupSharingUpdate,O=d.needEditableWarning,h=f.selectedOptions,v=f.portalUser,_=r.gbState.groups,y=_.selectedGroups,g=_.selectorItems;if(0!==p.length||0!==b.length||0!==O.length){var m=Object(c.g)({items:Object(o.g)(Object(o.g)([],p),O),groups:[],portalUser:v,request:a,restUrl:i.restUrl,selectedOptions:h}),E=Object(c.g)({items:b,groups:Object(u.d)({selectedGroups:y,selectorItems:g}),portalUser:v,request:a,restUrl:i.restUrl,selectedOptions:h,ignoreShareLevel:!0});s.Promise.all([m,E]).then((function(){var e=Object(o.g)(Object(o.g)(Object(o.g)([],p),b),O),t=e.map((function(e){return e.id})),r=e.filter((function(e,r){return t.indexOf(e.id)===r}));l({dependentItems:r,selectedOptions:h})})).catch((function(e){throw e}))}else l({selectedOptions:h})}var T=function(e,t){var r=t(),o=r.resources,i=o.items,a=o.selectedOptions,u=r.utilities,c=u.portal,f=u.request,d=u.iconDir,p=r.gbState.groups,b=p.selectedGroups,O=p.selectorItems,h=i.map((function(e){return Object(l.b)({item:e,portal:c,request:f,iconDir:d})}));return s.Promise.all(h).then((function(e){return A({dependentItems:e,selectedGroups:b,selectorItems:O,selectedOptions:a,request:f,portal:c})})).then((function(t){e({type:n.SET_DEPENDENT_ITEMS,payload:t})}))},A=function(e){var t=e.dependentItems,r=e.selectedGroups,n=e.selectorItems,o=e.selectedOptions,i=e.request,a=e.portal;return new s.Promise((function(e,d){var p=Object(c.b)(t).filter((function(e){return e})),b=p.map((function(e){return e.id})),h=p.filter((function(e,t){return b.indexOf(e.id)===t}));s.Promise.all(h.map((function(e){return Object(l.a)({item:e,selectedOptions:o,selectedGroups:Object(u.d)({selectedGroups:r,selectorItems:n}),request:i,portal:a})}))).then((function(t){var r=[],n=[],i=[],a=[],u=[],s=[],l=[],d=[],p=!Object(c.e)(o)&&Object(c.d)(o)===O.b.public;t.forEach((function(e,t){var o=h[t];if(e.premium)a.push(o);else{if(!e.groupDependentApplication)return p&&e.editable&&Object(f.c)(o)&&o.isUpdateLayer?o.access===O.b.public?void s.push(o):o.typeKeywords.indexOf("Public Data Collection")>-1?void u.push(o):void l.push(o):void((e.needsShareLevelUpdate||e.needsGroupSharingUpdate)&&(e.editable?(e.needsShareLevelUpdate&&n.push(o),e.needsGroupSharingUpdate&&r.push(o)):i.push(o)));d.push(o)}})),e({needGroupSharingUpdate:r,needShareLevelUpdate:n,notEditable:i,premium:a,needPubliclyEditableWarning:s,needEditableWarning:u,needDataCollectionEnabled:l,needGroupDependentApplicationWarning:d})})).catch((function(e){throw e}))}))};function R(e,t){switch(t().resources.currentMiniDlg){case O.c.OPEN_GROUP_BROWSER:e(h(O.b.public)),e(g(O.a.GROUP_BROWSER));break;case O.c.REVERT_SHARE_LEVEL:e(v()),e(Object(a.c)());break;case O.c.REVERT_GROUPS:e(h(O.b.public)),e(Object(a.c)());break;case O.c.EDITABLE_LAYERS:e(j);break;case O.c.SET_SHARE_TO_PRIVATE:e(h(O.b.private)),e(Object(a.a)());break;case O.c.PUBLIC_DATA_COLLECTION_DISABLED:e(g(O.a.SHARE));break;case O.c.PUBLIC_DATA_COLLECTION_ENABLED:e(j);break;case O.c.NONE:}e({type:n.SET_MINI_DIALOG,payload:O.c.NONE})}var I=function(e,t){var r=t(),n=r.gbState.groups.initialSelectedGroups,o=r.resources.selectedOptions;r.config.userType===O.e.PUBLIC&&o.private>0&&Object.keys(n).length>0?e(_(O.c.REVERT_GROUPS)):e(Object(a.c)())},w=function(e,t){var r=t(),n=r.utilities.portal,o=r.resources,i=o.portalUser,a=o.selectedOptions;Object(p.k)(n)||Object(p.a)(i)||!Object(c.e)(a)&&Object(c.d)(a)!==O.b.private?e(g(O.a.GROUP_BROWSER)):e(_(O.c.OPEN_GROUP_BROWSER))},U=function(e,t){var r=t(),n=r.utilities.portal,o=r.resources,i=o.portalUser,a=o.items,u=r.gbState.groups.selectedGroups;Object(p.k)(n)||Object(p.b)(i)||!Object(f.d)({items:a,groupDatas:Object.keys(u).map((function(e){return u[e]}))})?e(v()):e(_(O.c.REVERT_SHARE_LEVEL))},L=function(e){return function(t,r){var n=r(),o=n.utilities.portal,i=n.resources.portalUser,a=n.gbState.groups.selectedGroups;!Object(p.k)(o)&&!Object(p.b)(i)&&e===O.b.private&&Object.keys(a).length>0?t(_(O.c.SET_SHARE_TO_PRIVATE)):t(h(e))}}},140:function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return f})),r.d(t,"f",(function(){return d}));var n=r(0),o=r(177),i=r(159),a=r(67),u=function(e){return e.length>1&&Object(i.a)(),{type:a.a.SELECT_GROUPS,payload:e.map((function(e){return{group:Object(o.c)(e)}}))}},c=function(e){return{type:a.a.SET_INITIAL_GROUPS,payload:e.map((function(e){return Object(n.a)(Object(n.a)({},e),{group:Object(o.c)(e.group)})}))}},s=function(e){return e.length>1&&Object(i.b)(),{type:a.a.DESELECT_GROUPS,payload:e}},l=function(e){return{type:a.a.REVERT_GROUPS,payload:e}},f=function(){return Object(i.c)(),{type:a.a.CLEAR_SELECTION}},d=function(e){return{type:a.a.SET_SELECTOR_ITEMS,payload:e}}},145:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(16),i=function(e,t){if(t.thumbnail)return e.restUrl+"/community/users/"+t.username+"/info/"+t.thumbnail+(e.credential?"?token="+e.credential.token:"")},a=Object(o.a)((function(e,t){return Object(n.a)(Object(n.a)({},t),{thumbURI:i(e,t)})}))},155:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return O}));var n=r(0),o=r(177),i=r(32),a=r(159),u=r(57),c=r(67),s=r(29),l=r(61),f=r(37),d=r(25),p=function(e,t){b(t()).then((function(r){var i=t(),s=Object(u.b)(i)?i:i.gbState,l=s.ui,f=s.utils;l.focus.focusSelectAll&&Object(a.c)(),e({type:c.a.LOAD_GROUPS_SUCCESS,payload:Object(n.a)(Object(n.a)({},r),{results:r.results.map((function(e){return Object(o.b)(f.portal,e)}))})})})).catch((function(r){var n=t();(Object(u.b)(n)?n:n.gbState).ui.focus.focusSelectAll&&Object(a.c)(),e({type:c.a.LOAD_GROUPS_FAIL,payload:r})}))},b=function(e){var t=Object(u.b)(e)?e:e.gbState,r=t.utils,n=r.request,o=r.portal,a=t.config,c=a.groupsPerPage,l=a.withinShare,d=(a.withinAppConfig,t.parameters),p=d.filter,b=d.sort,O=t.ui.page.currentPageNumber,h={q:j(t),num:c,sortField:b.field,sortOrder:b.order,start:(O-1)*c+1};return l&&(h.searchUserAccess="groupMember",h.searchUserName=p.currentUsername),p.designationFilter!==f.b.orgSettings||_(o)?new s.Promise((function(e,t){Object(i.g)(n,o,h).then(e,t)})):new s.Promise((function(e){e({query:h.q,total:0,start:1,num:100,nextStart:-1,results:[]})}))},O=function(e){var t=e.user,r=e.state,o=Object(u.b)(r)?r:r.gbState,a=o.utils,c=a.request,f=a.portal,d=Object(n.a)(Object(n.a)({},o),{parameters:Object(n.a)(Object(n.a)({},o.parameters),{filter:Object(n.a)(Object(n.a)({},o.parameters.filter),{currentUsername:t.username})})}),p={q:j(d),num:100,searchUserAccess:"groupMember",searchUserName:t.username};return new s.Promise((function(e,t){return Object(i.g)(c,f,p).then((function(t){if(-1!==t.nextStart){for(var r=Math.ceil(t.total/100)-1,o=[t.results],a=function(e){o.push(new s.Promise((function(t,r){var o=100*(e+1)+1;Object(i.g)(c,f,Object(n.a)(Object(n.a)({},p),{start:o})).then((function(e){t(e.results)}),r)})))},u=0;u<r;u++)a(u);s.Promise.all(o).then((function(t){e(Object(l.b)(t))}))}else e(t.results)}),t)})).catch((function(e){throw e}))},h=function(e){var t=e.shareMode,r=e.currentUsername,n=e.portalUser;switch(t){case d.d.DEFAULT:return"(owner:"+r+" OR isviewonly:false)";case d.d.GROUP:return"owner:"+r+" -capabilities:updateitemcontrol";case d.d.ADMIN:return n.username===r?"(isviewonly:false OR owner:"+n.username+") -capabilities:updateitemcontrol":"(owner:"+r+" OR isviewonly:false)";default:return""}},v=function(e,t){0!==(null==e?void 0:e.indexOf("id:"))||t.indexOf(e)>-1||t.push(e)},_=function(e){var t,r,n,o,i,a=[],u=[e.featuredItemsGroupQuery,e.basemapGalleryGroupQuery,e.templatesGroupQuery,e["2DStylesGroupQuery"],e.stylesGroupQuery,e.analysisLayersGroupQuery,e.galleryTemplatesGroupQuery];if(e.hasModernHomePageEnabled){var c=(null===(r=null===(t=e.homePageConfig)||void 0===t?void 0:t.content)||void 0===r?void 0:r.filter((function(e){return"gallery"===e.type&&!!e.groupId})))||[];c.length>0&&c.forEach((function(e){var t=e.groupId;v("id:"+t,a)}))}else u.push(e.homePageFeaturedContent);return u.forEach((function(e){v(e,a)})),null===(n=e.featuredGroups)||void 0===n||n.forEach((function(e){var t=e.id;t&&v("id:"+t,a)})),null===(i=null===(o=e.userDefaults)||void 0===o?void 0:o.groups)||void 0===i||i.forEach((function(e){v("id:"+e,a)})),a.length>0?"("+a.join(" OR ")+")":""},y=function(e){var t=e.designationFilter,r=e.portal;switch(t){case f.b.openData:return"isopendata:true";case f.b.updateGroups:return"capabilities:updateitemcontrol";case f.b.distributed:return"capabilities:distributed";case f.b.administrative:return"isleavingdisallowed:true";case f.b.orgSettings:return _(r)||"";default:return""}},g=function(e){return e?"anyOrg"===e?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:"+e:""},m=function(e){var t=e.ownerFilter,r=e.portal,n=e.username,o=e.currentUsername,i=e.shareMode,a=e.userType,u=e.withinAppConfig,c=i===d.d.ADMIN&&o||n,s=r.isPortal&&u?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":"";switch(t){case f.d.itemOwner:return"owner:"+c+" "+s;case f.d.inOrg:return"-owner:"+c+" orgid:"+r.id+" "+s;case f.d.outsideOrg:if(a===d.e.PUBLIC)return"-owner:"+c+" "+s;return"(orgid: [0 TO \\{]) -orgid:"+r.id+" "+s;default:return s}},E=function(e){return e?"created"+": ["+(t=e).start+" TO "+t.end+"]":"";var t},j=function(e){var t=e.utils,r=t.portal,n=t.portalUser,o=e.config,i=o.baseQ,a=o.shareMode,u=o.userType,c=o.withinAppConfig,s=o.hasIndoorsSpaces,l=e.parameters.filter,f=l.searchString,d=l.designationFilter,p=l.membershipFilter,b=l.dateCreatedFilter,O=l.currentUsername,v=l.ownerFilter;return[i+" "+f,h({shareMode:a,currentUsername:O,portalUser:n}),s?"-capabilities:distributed":y({designationFilter:d,portal:r}),s?"memberorgids:NULL":g(p),E(b),m({ownerFilter:v,portal:r,username:n.username,currentUsername:O,shareMode:a,userType:u,withinAppConfig:c})].filter((function(e){return e})).join(" ").trim()}},159:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));function n(){a("gb__select-all-input")}function o(){a("gb__clear-selection-btn")}function i(){setTimeout((function(){var e=document.querySelector(".gcard-gcc__container");if(e){var t=e.querySelector(".btn-2018check__input");t&&t.focus()}}),50)}function a(e){setTimeout((function(){var t=document.querySelector("#"+e);t&&t.focus()}),50)}},16:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0);function o(e){return function t(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return o.length>=e.length?e.call.apply(e,Object(n.g)([this],o)):function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.call.apply(t,Object(n.g)(Object(n.g)([r],o),e))}}}},164:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},17:function(t,r){t.exports=e},170:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"}(n||(n={}))},172:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r(0),o=r(57),i=r(140),a=r(155),u=r(303),c=r(184),s=r(32),l=r(29),f=r(26),d=r(61),p=r(67),b=r(56),O=function(e){return function(t,r){var n=r(),s=(Object(o.b)(n)?n:n.gbState).utils,p=s.portal,O=s.portalUser;if(!(e&&e.selectorItems&&e.selectorItems.length>0))return t(a.b),l.Promise.resolve();var v=e.selectorItems,_=e.shareMode,y=e.userType;t({type:f.a.SET_SHARE_MODE,payload:_}),t({type:f.a.SET_USER_TYPE,payload:y}),t(Object(i.f)(v));var g=Object(b.b)({user:O,items:v,portal:p}),m=O.username===g.username?[O]:[O,g];return m.length>1&&!e.anySelectorItemsPrivate&&t({type:f.a.ENABLE_USER_TOGGLE}),t(Object(c.c)(m)),t(Object(c.h)(g.username)),t(a.b),void 0===n.config.hasTrustedOrgs&&t(u.a),l.Promise.all(m.map((function(e){return Object(a.a)({user:e,state:r()})}))).then((function(e){var r=Object(d.b)(e),n=r.map((function(e){return e.id})),o=r.filter((function(e,t){return n.indexOf(e.id)===t}));return t(h(o))}))}},h=function(e){return function(t,r){return new l.Promise((function(a,u){var c=r(),f=Object(o.b)(c)?c:c.gbState,d=f.utils,b=d.portal,O=d.request,h=f.groups.selectorItems,v=Object(s.b)(h),_=Object(s.a)(e).map((function(e){return Object(s.i)({itemIds:v,groupIds:Object(s.b)(e),portal:b,request:O})}));l.Promise.all(_).then((function(r){var o=r.reduce((function(e,t){return Object(n.a)(Object(n.a)({},e),t)}),{}),u=Object.keys(o),c=e.filter((function(e){return u.indexOf(e.id)>=0})).map((function(e){return{group:e,selectedByIds:o[e.id].items.map((function(e){return e.itemId}))}}));t({type:p.a.SET_HAS_GROUPS,payload:e.length>0}),t(Object(i.e)(c)),a()})).catch(u)}))}}},177:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return s}));var n=r(59),o=r(6),i=r(96),a=r(124),u=function(e,t){return Object(n.a)(Object(a.b)(e))(t)},c=Object(n.a)(Object(o.e)("thumbURI")),s=function(e){var t=e.selectedBy,r=e.initialSelectedByIds;return!Object(i.a)(t.map((function(e){return e.id})),r)}},184:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"g",(function(){return i})),r.d(t,"h",(function(){return a})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return f}));var n=r(82),o=function(e){return{type:n.a.SET_SEARCH_STRING,payload:e}},i=function(e){return{type:n.a.UPDATE_OWNER_FILTER,payload:e}},a=function(e){return{type:n.a.UPDATE_USERNAME_FILTER,payload:e}},u=function(e){return{type:n.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:e}},c=function(e){return{type:n.a.UPDATE_MEMBERSHIP_FILTER,payload:e}},s=function(e){var t=e.section,r=e.created;return{type:n.a.UPDATE_CREATED_ON_FILTER,payload:{section:t,created:r}}},l=function(e){return{type:n.a.SET_USERS,payload:e}},f=function(e){return{type:n.a.CLEAR_FILTERS,payload:e}}},186:function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&p())}function p(){if(!l){var e=u(d);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function O(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new b(e,t)),1!==s.length||l||u(p)},b.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=O,o.addListener=O,o.once=O,o.off=O,o.removeListener=O,o.removeAllListeners=O,o.emit=O,o.prependListener=O,o.prependOnceListener=O,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},188:function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return l}));var n=r(29),o=r(32),i=r(25),a=function(e){var t=e.items,r=e.groupDatas;return t.filter((function(e){var t=e.access?e.access:e.sharing&&e.sharing.access;return t===i.b.private||t===i.b.shared})).reduce((function(e,t){return e||u({item:t,groupDatas:r})}),!1)},u=function(e){var t=e.item;return e.groupDatas.reduce((function(e,r){return e||!!r.selectedByIds&&r.selectedByIds.indexOf(t.id)>=0}),!1)};function c(e){return"Feature Service"===e.type&&e.typeKeywords.indexOf("Hosted Service")>-1}function s(e){return e.filter((function(e){return e.access!==i.b.public&&c(e)}))}function l(e){var t=e.items,r=e.request,i=t.map((function(e){return function(e,t){return new n.Promise((function(r){c(e)?Object(o.v)(t,e.url+"/layers").then((function(t){var n=t.layers;r((null==n?void 0:n.reduce((function(e,t){return e||t&&t.capabilities.indexOf("Editing")>-1}),!1))&&e)}),(function(){return r(!1)})):r(!1)}))}(e,r)}));return n.Promise.all(i).then((function(e){return e.filter((function(e){return e}))}))}},196:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.SET_PAGE="SET_PAGE",e.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN",e.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"}(n||(n={}))},199:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));var n=r(0),o=r(26),i={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};t.a=function(e,t){switch(void 0===e&&(e=i),t.type){case o.a.ENABLE_USER_TOGGLE:return Object(n.a)(Object(n.a)({},e),{enableUserToggle:!0});case o.a.SET_SHARE_MODE:return Object(n.a)(Object(n.a)({},e),{shareMode:t.payload});case o.a.SET_USER_TYPE:return Object(n.a)(Object(n.a)({},e),{userType:t.payload});case o.a.TRUSTED_ORGS_LOADED:return Object(n.a)(Object(n.a)({},e),{hasTrustedOrgs:t.payload.length>0});case o.a.SET_SELECTOR_ITEMS:var r=!!t.payload.find((function(e){var t;return(null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.indexOf("EditExtensionIndoorsSpaces"))>-1}));return Object(n.a)(Object(n.a)({},e),{hasIndoorsSpaces:r});default:return e}}},200:function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var n=r(17),o=r(201),i=r(37),a={sort:o.b,filter:i.f};t.a=Object(n.combineReducers)({sort:o.a,filter:i.e})},201:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));var n=r(0),o=r(26),i={field:"title",order:"asc"},a={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};t.a=function(e,t){switch(void 0===e&&(e=i),t.type){case o.a.CHANGE_SORT_FIELD:return Object(n.a)(Object(n.a)({},e),{field:t.payload,order:a[t.payload]});case o.a.CHANGE_SORT_ORDER:return Object(n.a)(Object(n.a)({},e),{order:t.payload});default:return e}}},202:function(e,t,r){"use strict";r.d(t,"b",(function(){return c}));var n=r(17),o=r(203),i=r(204),a=r(205),u=r(206),c={page:o.b,sort:i.b,focus:a.b,filter:u.b};t.a=Object(n.combineReducers)({page:o.a,sort:i.a,focus:a.a,filter:u.a})},203:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));var n=r(0),o=r(26),i={currentPageNumber:1};t.a=function(e,t){switch(void 0===e&&(e=i),t.type){case o.a.CLEAR_FILTERS:case o.a.UPDATE_USERNAME_FILTER:case o.a.UPDATE_OWNER_FILTER:case o.a.UPDATE_CREATED_ON_FILTER:case o.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(n.a)(Object(n.a)({},e),{currentPageNumber:1});case o.a.SET_PAGE:return Object(n.a)(Object(n.a)({},e),{currentPageNumber:t.payload});case o.a.LOAD_GROUPS_SUCCESS:return Object(n.a)(Object(n.a)({},e),{currentPageNumber:t.payload.num>t.payload.total?1:Math.ceil(t.payload.start/t.payload.num)});case o.a.LOAD_GROUPS_FAIL:return Object(n.a)(Object(n.a)({},e),{currentPageNumber:1});default:return e}}},204:function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var n=r(26),o=!1;t.a=function(e,t){switch(void 0===e&&(e=o),t.type){case n.a.CHANGE_SORT_FIELD:case n.a.CHANGE_SORT_ORDER:case n.a.TOGGLE_SORT_DROPDOWN:return!e;default:return e}}},205:function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));var n=r(0),o=r(26),i={focusSelectAll:!1};t.a=function(e,t){switch(t.type){case o.a.LOAD_GROUPS_FAIL:case o.a.LOAD_GROUPS_SUCCESS:return Object(n.a)(Object(n.a)({},e),{focusSelectAll:!1});case o.a.CHANGE_SORT_FIELD:case o.a.CHANGE_SORT_ORDER:return Object(n.a)(Object(n.a)({},e),{focusSelectAll:!0});default:return e}}},206:function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var n=r(0),o=r(26),i=r(37),a={expanded:!1};t.a=function(e,t){switch(t.type){case o.a.CLEAR_FILTERS:switch(t.payload){case void 0:case i.a.DATE_CREATED:return Object(n.a)(Object(n.a)({},e),{dateCreatedSelectedSection:void 0});default:return e}case o.a.TOGGLE_EXPANDED_FILTERS:return Object(n.a)(Object(n.a)({},e),{expanded:!e.expanded});case o.a.UPDATE_CREATED_ON_FILTER:return Object(n.a)(Object(n.a)({},e),{dateCreatedSelectedSection:t.payload.section});default:return e}}},207:function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var n=r(99),o={portal:{},portalUser:{},request:function(e){return null}};t.a=function(e,t){return void 0===e&&(e=o),t.type,e.portal.portalHostname&&!e.portal.baseUrl&&(e.portal.baseUrl=Object(n.a)(e.portal)),e}},25:function(e,t,r){"use strict";var n,o,i,a,u;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return u})),function(e){e.org="org",e.private="private",e.public="public",e.shared="shared"}(n||(n={})),function(e){e.LOADING="LOADING",e.SHARE="SHARE",e.GROUP_BROWSER="GROUP_BROWSER",e.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"}(o||(o={})),function(e){e.SET_SHARE_TO_PRIVATE="SET_SHARE_TO_PRIVATE",e.REVERT_SHARE_LEVEL="REVERT_SHARE_LEVEL",e.REVERT_GROUPS="REVERT_GROUPS",e.EDITABLE_LAYERS="EDITABLE_LAYERS",e.OPEN_GROUP_BROWSER="OPEN_GROUP_BROWSER",e.NONE="NONE",e.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED",e.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"}(i||(i={})),function(e){e.ORG="ORG",e.PUBLIC="PUBLIC"}(a||(a={})),function(e){e.DEFAULT="DEFAULT",e.ADMIN="ADMIN",e.GROUP="GROUP"}(u||(u={}))},26:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n,o=r(0),i=r(196),a=r(67),u=r(170),c=r(82);!function(e){e.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE",e.SET_SHARE_MODE="SET_SHARE_MODE",e.SET_USER_TYPE="SET_USER_TYPE"}(n||(n={}));var s=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},i.a),a.a),c.a),n),u.a)},29:function(e,t,r){(function(t,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var n;n=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,u=function(e,t){b[o]=e,b[o+1]=t,2===(o+=2)&&(a?a(O):g())},c="undefined"!=typeof window?window:void 0,s=c||{},l=s.MutationObserver||s.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(O,1)}}var b=new Array(1e3);function O(){for(var e=0;e<o;e+=2)(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0;o=0}var h,v,_,y,g=void 0;function m(e,t){var r=this,n=new this.constructor(S);void 0===n[j]&&G(n);var o=r._state;if(o){var i=arguments[o-1];u((function(){return P(o,n,i,r._result)}))}else U(r,n,e,t);return n}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return A(t,e),t}f?g=function(){return t.nextTick(O)}:l?(v=0,_=new l(O),y=document.createTextNode(""),_.observe(y,{characterData:!0}),g=function(){y.data=v=++v%2}):d?((h=new MessageChannel).port1.onmessage=O,g=function(){return h.port2.postMessage(0)}):g=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(O)}:p()}catch(e){return p()}}():p();var j=Math.random().toString(36).substring(2);function S(){}function T(t,r,n){r.constructor===t.constructor&&n===m&&r.constructor.resolve===E?function(e,t){1===t._state?I(e,t._result):2===t._state?w(e,t._result):U(t,void 0,(function(t){return A(e,t)}),(function(t){return w(e,t)}))}(t,r):void 0===n?I(t,r):e(n)?function(e,t,r){u((function(e){var n=!1,o=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,(function(r){n||(n=!0,t!==r?A(e,r):I(e,r))}),(function(t){n||(n=!0,w(e,t))}),e._label);!n&&o&&(n=!0,w(e,o))}),e)}(t,r,n):I(t,r)}function A(e,t){if(e===t)w(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(n=t),null===n||"object"!==o&&"function"!==o)I(e,t);else{var r=void 0;try{r=t.then}catch(t){return void w(e,t)}T(e,t,r)}var n,o}function R(e){e._onerror&&e._onerror(e._result),L(e)}function I(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&u(L,e))}function w(e,t){void 0===e._state&&(e._state=2,e._result=t,u(R,e))}function U(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=r,o[i+2]=n,0===i&&e._state&&u(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?P(r,n,o,i):o(i);e._subscribers.length=0}}function P(t,r,n,o){var i=e(n),a=void 0,u=void 0,c=!0;if(i){try{a=n(o)}catch(e){c=!1,u=e}if(r===a)return void w(r,new TypeError("A promises callback cannot return that same promise."))}else a=o;void 0!==r._state||(i&&c?A(r,a):!1===c?w(r,u):1===t?I(r,a):2===t&&w(r,a))}var D=0;function G(e){e[j]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var C=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[j]||G(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):w(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===E){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===m&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===N){var u=new r(S);a?w(u,i):T(u,e,o),this._willSettleAt(u,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;void 0===n._state&&(this._remaining--,2===e?w(n,r):this._result[t]=r),0===this._remaining&&I(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;U(e,void 0,(function(e){return r._settledAt(1,t,e)}),(function(e){return r._settledAt(2,t,e)}))},e}(),N=function(){function t(e){this[j]=D++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){A(e,t)}),(function(t){w(e,t)}))}catch(t){w(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return N.prototype.then=m,N.all=function(e){return new C(this,e).promise},N.race=function(e){var t=this;return n(e)?new t((function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},N.resolve=E,N.reject=function(e){var t=new this(S);return w(t,e),t},N._setScheduler=function(e){a=e},N._setAsap=function(e){u=e},N._asap=u,N.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=N},N.Promise=N,N},e.exports=n()}).call(this,r(186),r(164))},303:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(32),o=r(57),i=r(170),a=function(e,t){var r=t(),a=(Object(o.b)(r)?r:r.gbState).utils,u=a.request,c=a.portal;Object(n.q)(u,c).then((function(t){var r,n=(null===(r=null==t?void 0:t.trustedOrgs)||void 0===r?void 0:r.filter((function(e){return e.from.established>-1&&e.to.established>-1})))||[];e({type:i.a.TRUSTED_ORGS_LOADED,payload:n})}),(function(){e({type:i.a.TRUSTED_ORGS_LOADED,payload:[]})}))}},32:function(e,t,r){"use strict";r.d(t,"u",(function(){return i})),r.d(t,"n",(function(){return a})),r.d(t,"h",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return s})),r.d(t,"j",(function(){return l})),r.d(t,"o",(function(){return f})),r.d(t,"l",(function(){return d})),r.d(t,"k",(function(){return p})),r.d(t,"m",(function(){return b})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return h})),r.d(t,"r",(function(){return _})),r.d(t,"s",(function(){return y})),r.d(t,"t",(function(){return g})),r.d(t,"g",(function(){return m})),r.d(t,"p",(function(){return E})),r.d(t,"q",(function(){return j})),r.d(t,"v",(function(){return S})),r.d(t,"a",(function(){return T})),r.d(t,"i",(function(){return A})),r.d(t,"b",(function(){return R}));var n=r(0),o=r(29),i=function(e){return function(t,r){return e({url:t,content:r.query},{usePost:"post"===r.method}).then((function(e){return{data:e}}))}},a=function(e,t,r){return S(e,t.restUrl+"/portals/self",{culture:r,default:!0})},u=function(e,t,r){return S(e,t.restUrl+"/content/items/"+r+"/data")},c=function(e,t,r,o){return S(e,t.restUrl+"/community/groups",Object(n.a)({q:r},o))},s=function(e,t,r){return S(e,t.restUrl+"/community/groups/"+r+"/categorySchema")},l=function(e,t,r){return S(e,t.restUrl+"/portals/"+(r||t.id)+"/categorySchema")},f=function(e,t){return S(e,t.restUrl+"/portals/"+t.id+"/servers")},d=function(e,t,r,n){return e(t.restUrl+"/portals/"+(r||t.id)+"/collaborationsSummary",n)},p=function(e,t,r,n){return e(t.restUrl+"/portals/"+(r||t.id)+"/collaboratedItems",n)},b=function(e,t,r){return S(e,location.protocol+"//"+t.portalHostname+"/sharing/rest/portals/"+(r||"self"))},O=function(e,t,r){return e(t.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+t.id+" AND access:public",num:100,start:r||1,sortField:"title",sortOrder:"asc"}}).then((function(r){return r.data.total>r.data.start+r.data.num?O(e,t,r.data.start+r.data.num).then((function(e){return Object(n.a)(Object(n.a)({},e),{data:Object(n.a)(Object(n.a)({},e.data),{results:r.data.results.concat(e.data.results)})})})):r}))},h=function(e,t,r,n){return e(t.restUrl+"/community/users/"+r+"/provisionedListings",{query:{f:"json",num:100,start:n||1}}).then((function(n){var i=o.Promise.all(n.data.provisionedListings.filter((function(e){return e.itemId})).map((function(r){return new o.Promise((function(n,o){e(t.restUrl+"/content/items/"+r.itemId,{method:"get",query:{f:"json"}}).then((function(e){var t=e.data;n(t)}),o)})).catch((function(e){return console.error(e)}))}))),a=n.data.provisionedListings.map((function(r){return S(e,t.restUrl+"/content/items/"+(r.id||r.itemId)+"/relatedItems?relationshipType=Listed2ImplicitlyListed&direction=forward").then((function(e){return e}),(function(e){}))}));return n.data.total>n.data.start+n.data.num?h(e,t,r,n.data.start+n.data.num).then((function(e){return o.Promise.all([i].concat(a)).then((function(t){return t[0].results.concat(v(t.slice(1))).concat(e)}))})):o.Promise.all([i].concat(a)).then((function(e){return e[0].filter((function(e){return void 0!==e})).concat(v(e.slice(1)))}))}))};function v(e){return e.reduce((function(e,t){return t&&t.relatedItems?e.concat(t.relatedItems.map((function(e){return e}))):e}),[])}var _=function(e,t,r){return S(e,t.restUrl+"/community/users/"+(r||t.user.username))},y=function(e,t,r){return S(e,t.restUrl+"/content/users/"+(r||t.user.username),{num:1})},g=function(e,t,r){return S(e,t.restUrl+"/content/groups/"+r)},m=function(e,t,r){return S(e,t.restUrl+"/community/groups",r)},E=function(e,t){return S(e,t.restUrl+"/portals/self/settings")},j=function(e,t){return S(e,t.restUrl+"/portals/self/trustedOrgs",{num:100})};function S(e,t,r){return e(t,{query:Object(n.a)({f:"json"},r)}).then((function(e){return e.data}))}function T(e,t){void 0===t&&(t=100);for(var r=[],n=0;n<Math.ceil(e.length/t);n++){var o=n*t,i=(n+1)*t;r.push(e.slice(o,i))}return r.filter((function(e){return e.length>0}))}function A(e){var t=e.itemIds,r=e.portal,n=e.request,i=e.groupIds,a=r.restUrl+"/content/itemsgroups";return new o.Promise((function(e,r){n(a,{method:"get",query:{f:"json",items:t,groups:i}}).then((function(t){var r=t.data;e(r)}),r)}))}var R=function(e,t){return void 0===t&&(t=","),e.map((function(e){return e.id})).join(t)}},325:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return h}));var n=r(0),o=r(29),i=r(32),a=r(78),u=r(61),c=r(188),s=r(25),l=function(e){if(e.depth&&e.depth>4)return o.Promise.resolve([]);switch(e.depth=e.depth?e.depth+1:1,e.item.type){case"Web Map":case"Web Scene":return p(e);case"Web Mapping Application":return d(e);default:return o.Promise.resolve([])}},f=function(e){var t=e.item,r=e.request,n=e.portal,u=e.iconDir;return t.itemId?new o.Promise((function(e){Object(i.v)(r,n.restUrl+"/content/items/"+t.itemId).then((function(t){Object(c.b)([t]).length>0?Object(c.a)({items:[t],request:r}).then((function(r){t.isUpdateLayer=r.length>0,e(Object(a.a)(n,u,t))}),(function(){return e(Object(a.a)(n,u,t))})):e(Object(a.a)(n,u,t))}),(function(){return e(null)}))})):o.Promise.resolve(null)},d=function(e){var t=e.item,r=e.request,a=e.portal,c=e.iconDir;return new o.Promise((function(e){Object(i.v)(r,a.restUrl+"/content/items/"+t.id+"/data").then((function(i){var s=function(e){var t,r,o,i,a,u,c,s,l,f,d=(null===(t=null==e?void 0:e.map)||void 0===t?void 0:t.itemId)?[e.map.itemId]:[],p=null!==(i=null===(o=null===(r=e.values)||void 0===r?void 0:r.itemCollection)||void 0===o?void 0:o.map((function(e){return e.id})))&&void 0!==i?i:[],b=null!==(c=null===(u=null===(a=e.values)||void 0===a?void 0:a.webmap)||void 0===u?void 0:u.split(","))&&void 0!==c?c:[],O=null!==(f=null===(l=null===(s=e.values)||void 0===s?void 0:s.webscene)||void 0===l?void 0:l.split(","))&&void 0!==f?f:[];return Object(n.g)(Object(n.g)(Object(n.g)(Object(n.g)([],d),p),b),O)}(i).map((function(e){return f({item:{itemId:e},request:r,portal:a,iconDir:c})}));o.Promise.all(s).then((function(s){var f=s.filter((function(e){return e})),d=f.map((function(e){return l({item:e,request:r,portal:a,iconDir:c})}));o.Promise.all(d).then((function(r){var o,a=Object(n.g)(Object(n.g)([],f),Object(u.b)(r));(null===(o=i.values)||void 0===o?void 0:o.group)&&(t.itemData=i,a.push(t)),e(a)}))}))}))}))},p=function(e){var t=e.item,r=e.request,a=e.portal,u=e.iconDir;return new o.Promise((function(e){return function(e){var t=e.portal,r=e.item,a=e.request;return new o.Promise((function(e){if(r.itemData){var o=r.itemData,u=o.operationalLayers,c=o.baseMap,s=o.tables,l=o.ground;return e(Object(n.g)(Object(n.g)(Object(n.g)(Object(n.g)([],(null==c?void 0:c.baseMapLayers)||[]),(null==l?void 0:l.layers)||[]),u||[]),s||[]))}return Object(i.v)(a,t.restUrl+"/content/items/"+r.id+"/data").then((function(t){var r=t.operationalLayers,o=t.baseMap,i=t.tables,a=t.ground;return e(Object(n.g)(Object(n.g)(Object(n.g)(Object(n.g)([],r||[]),(null==o?void 0:o.baseMapLayers)||[]),(null==a?void 0:a.layers)||[]),i||[]))}),(function(){return e([])}))}))}({request:r,item:t,portal:a}).then((function(t){o.Promise.all(b(t).map((function(e){return f({item:e,request:r,portal:a,iconDir:u})}))).then(e)}))}))},b=function(e){return e.reduce((function(e,t){return(null==t?void 0:t.itemId)?e.concat(t):(null==t?void 0:t.layers)&&"GroupLayer"===t.layerType?e.concat(t.layers):e}),[])},O={needsShareLevelUpdate:!1,needsGroupSharingUpdate:!1,editable:!0,premium:!1,groupDependentApplication:!1},h=function(e){var t=e.item,r=e.selectedOptions,i=e.selectedGroups,a=e.request,u=e.portal;return v({item:t,selectedOptions:r})?o.Promise.resolve(Object(n.a)(Object(n.a)({},O),{editable:!1,premium:!0})):_({item:t,selectedGroups:i,request:a,portal:u,selectedOptions:r}).then((function(e){return{needsGroupSharingUpdate:e.needsGroupSharingUpdate,needsShareLevelUpdate:e.needsShareLevelUpdate||y({item:t,selectedOptions:r}),editable:e.editable,premium:!1,groupDependentApplication:e.groupDependentApplication}}))},v=function(e){var t=e.selectedOptions,r=e.item;if(Object(u.e)(t))return!1;if(Object(u.d)(t)===s.b.public){var n=r.typeKeywords;return r.owner.toLowerCase().indexOf("esri")>-1&&((null==n?void 0:n.indexOf("Requires Credits"))>-1||(null==n?void 0:n.indexOf("Requires Subscription"))>-1)}return!1},_=function(e){var t=e.item,r=e.selectedGroups,a=e.selectedOptions,c=e.request,l=e.portal;return new o.Promise((function(e,o){var f,d;if("Web Mapping Application"===t.type&&(null===(d=null===(f=t.itemData)||void 0===f?void 0:f.values)||void 0===d?void 0:d.group))e(Object(n.a)(Object(n.a)({},O),{groupDependentApplication:!0}));else{var p=t.ownerFolder?"/"+t.ownerFolder:"",b=l.restUrl+"/content/users/"+t.owner+p+"/items/"+(t.itemId||t.id);Object(i.v)(c,b).then((function(o){var i,c=o.item.itemControl,l=o.sharing.groups,f=t.access||(null===(i=t.sharing)||void 0===i?void 0:i.access);if(Object(u.f)(t)&&a.total===a.public)e(Object(n.a)(Object(n.a)({},O),{needsShareLevelUpdate:!0,editable:!1}));else if(c&&"admin"!==c&&"update"!==c)e(Object(n.a)(Object(n.a)({},O),{editable:!1}));else if(f!==s.b.public)if(r.length>l.length)e(Object(n.a)(Object(n.a)({},O),{needsGroupSharingUpdate:!0}));else{var d=r.some((function(e){return l.indexOf(e.id)<0}));e(Object(n.a)(Object(n.a)({},O),{needsGroupSharingUpdate:d}))}else e(Object(n.a)({},O))}),(function(r){Object(i.v)(c,l.restUrl+"/content/items/"+(t.itemId||t.id)).then((function(t){var r=t.access;r===s.b.public||r===s.b.org&&a.total===a.org+a.private?e(Object(n.a)(Object(n.a)({},O),{editable:!1})):e(Object(n.a)(Object(n.a)({},O),{needsShareLevelUpdate:!0,editable:!1}))}),(function(t){e(Object(n.a)(Object(n.a)({},O),{needsShareLevelUpdate:!0,editable:!1}))}))}))}}))},y=function(e){var t,r=e.item,n=e.selectedOptions,o=!0;Object(u.e)(n)&&(o=!1);var i=Object(u.d)(n);i!==s.b.private&&i!==s.b.shared||(o=!1);var a=r.access||(null===(t=r.sharing)||void 0===t?void 0:t.access);return a===s.b.public&&(o=!1),a===i&&(o=!1),i===s.b.private&&(a===s.b.shared&&(o=!1),a===s.b.org&&(o=!1)),o}},326:function(e,t,r){(function(e,r){var n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",a="[object Map]",u="[object Set]",c=/\w*$/,s=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,f={};f[n]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[a]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[u]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[o]=f["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,b=d||p||Function("return this")(),O=t&&!t.nodeType&&t,h=O&&"object"==typeof r&&r&&!r.nodeType&&r,v=h&&h.exports===O;function _(e,t){return e.set(t[0],t[1]),e}function y(e,t){return e.add(t),e}function g(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function m(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function E(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function j(e,t){return function(r){return e(t(r))}}function S(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var T,A=Array.prototype,R=Function.prototype,I=Object.prototype,w=b["__core-js_shared__"],U=(T=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"",L=R.toString,P=I.hasOwnProperty,D=I.toString,G=RegExp("^"+L.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=v?b.Buffer:void 0,N=b.Symbol,x=b.Uint8Array,F=j(Object.getPrototypeOf,Object),M=Object.create,k=I.propertyIsEnumerable,B=A.splice,q=Object.getOwnPropertySymbols,H=C?C.isBuffer:void 0,V=j(Object.keys,Object),W=he(b,"DataView"),z=he(b,"Map"),K=he(b,"Promise"),$=he(b,"Set"),Y=he(b,"WeakMap"),Q=he(Object,"create"),X=me(W),J=me(z),Z=me(K),ee=me($),te=me(Y),re=N?N.prototype:void 0,ne=re?re.valueOf:void 0;function oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ue(e){this.__data__=new ie(e)}function ce(e,t){var r=je(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Se(e)}(e)&&P.call(e,"callee")&&(!k.call(e,"callee")||D.call(e)==n)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=r.length,i=!!o;for(var a in e)!t&&!P.call(e,a)||i&&("length"==a||ye(a,o))||r.push(a);return r}function se(e,t,r){var n=e[t];P.call(e,t)&&Ee(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function le(e,t){for(var r=e.length;r--;)if(Ee(e[r][0],t))return r;return-1}function fe(e,t,r,s,l,d,p){var b;if(s&&(b=d?s(e,l,d,p):s(e)),void 0!==b)return b;if(!Re(e))return e;var O=je(e);if(O){if(b=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&P.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,b)}else{var h=_e(e),v=h==o||h==i;if(Te(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if("[object Object]"==h||h==n||v&&!d){if(m(e))return d?e:{};if(b=function(e){return"function"!=typeof e.constructor||ge(e)?{}:(t=F(e),Re(t)?M(t):{});var t}(v?{}:e),!t)return function(e,t){return be(e,ve(e),t)}(e,function(e,t){return e&&be(t,Ie(t),e)}(b,e))}else{if(!f[h])return d?e:{};b=function(e,t,r,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?pe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?pe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case a:return function(e,t,r){return g(t?r(E(e),!0):E(e),_,new e.constructor)}(e,n,r);case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,c.exec(e));return t.lastIndex=e.lastIndex,t}(e);case u:return function(e,t,r){return g(t?r(S(e),!0):S(e),y,new e.constructor)}(e,n,r);case"[object Symbol]":return i=e,ne?Object(ne.call(i)):{}}var i}(e,h,fe,t)}}p||(p=new ue);var j=p.get(e);if(j)return j;if(p.set(e,b),!O)var T=r?function(e){return function(e,t,r){var n=t(e);return je(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Ie,ve)}(e):Ie(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(T||e,(function(n,o){T&&(n=e[o=n]),se(b,o,fe(n,t,r,s,o,e,p))})),b}function de(e){return!(!Re(e)||(t=e,U&&U in t))&&(Ae(e)||m(e)?G:s).test(me(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new x(t).set(new x(e)),t}function be(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],u=n?n(r[a],e[a],a,r,e):void 0;se(r,a,void 0===u?e[a]:u)}return r}function Oe(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function he(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return de(r)?r:void 0}oe.prototype.clear=function(){this.__data__=Q?Q(null):{}},oe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},oe.prototype.get=function(e){var t=this.__data__;if(Q){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return P.call(t,e)?t[e]:void 0},oe.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:P.call(t,e)},oe.prototype.set=function(e,t){return this.__data__[e]=Q&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[]},ie.prototype.delete=function(e){var t=this.__data__,r=le(t,e);return!(r<0)&&(r==t.length-1?t.pop():B.call(t,r,1),!0)},ie.prototype.get=function(e){var t=this.__data__,r=le(t,e);return r<0?void 0:t[r][1]},ie.prototype.has=function(e){return le(this.__data__,e)>-1},ie.prototype.set=function(e,t){var r=this.__data__,n=le(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new oe,map:new(z||ie),string:new oe}},ae.prototype.delete=function(e){return Oe(this,e).delete(e)},ae.prototype.get=function(e){return Oe(this,e).get(e)},ae.prototype.has=function(e){return Oe(this,e).has(e)},ae.prototype.set=function(e,t){return Oe(this,e).set(e,t),this},ue.prototype.clear=function(){this.__data__=new ie},ue.prototype.delete=function(e){return this.__data__.delete(e)},ue.prototype.get=function(e){return this.__data__.get(e)},ue.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ie){var n=r.__data__;if(!z||n.length<199)return n.push([e,t]),this;r=this.__data__=new ae(n)}return r.set(e,t),this};var ve=q?j(q,Object):function(){return[]},_e=function(e){return D.call(e)};function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function ge(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function me(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ee(e,t){return e===t||e!=e&&t!=t}(W&&"[object DataView]"!=_e(new W(new ArrayBuffer(1)))||z&&_e(new z)!=a||K&&"[object Promise]"!=_e(K.resolve())||$&&_e(new $)!=u||Y&&"[object WeakMap]"!=_e(new Y))&&(_e=function(e){var t=D.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?me(r):void 0;if(n)switch(n){case X:return"[object DataView]";case J:return a;case Z:return"[object Promise]";case ee:return u;case te:return"[object WeakMap]"}return t});var je=Array.isArray;function Se(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Ae(e)}var Te=H||function(){return!1};function Ae(e){var t=Re(e)?D.call(e):"";return t==o||t==i}function Re(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ie(e){return Se(e)?ce(e):function(e){if(!ge(e))return V(e);var t=[];for(var r in Object(e))P.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}r.exports=function(e){return fe(e,!0,!0)}}).call(this,r(164),r(356)(e))},344:function(e,t){e.exports=r},356:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},368:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(38),o=r(96);function i(e,t){var r=e.filter((function(e){var t;return!e.success&&500===(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code)})).map((function(e){var r=Object(o.c)(t,(function(t){return t.id===e.itemId}));return(null==r?void 0:r.title)||e.itemId}));return e.map((function(e){return function(e,t){e.error=e.error||{};var r=e.error,o=r.messageCode,i=r.code;return o&&n.errors[o]&&(e.error.message=n.errors[o]),i&&n.errors[i]&&(e.error.message=n.errors[i]),(500===o||500===i&&t)&&(e.error.details=t,e.error.message=n.errors[500]+" "+(null==t?void 0:t.join(", "))),e}(e,r)})).filter((function(e){return!e.success}))}},37:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return u})),r.d(t,"f",(function(){return l}));var n,o,i,a,u,c=r(0),s=r(26);!function(e){e.openData="openData",e.updateGroups="updateGroups",e.distributed="distributed",e.administrative="administrative",e.orgSettings="orgSettings"}(n||(n={})),function(e){e.owner="owner"}(o||(o={})),function(e){e.itemOwner="itemOwner",e.inOrg="inOrg",e.outsideOrg="outsideOrg"}(i||(i={})),function(e){e.myOrg="org",e.partnered="collaboration",e.anyOrg="anyOrg"}(a||(a={})),function(e){e.USER="USER",e.OWNER="OWNER",e.DESIGNATION="DESIGNATION",e.DATE_CREATED="DATE_CREATED",e.MEMBERSHIP="MEMBERSHIP"}(u||(u={}));var l={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};t.e=function(e,t){switch(void 0===e&&(e=l),t.type){case s.a.CLEAR_FILTERS:switch(t.payload){case u.DESIGNATION:return Object(c.a)(Object(c.a)({},e),{designationFilter:void 0});case u.DATE_CREATED:return Object(c.a)(Object(c.a)({},e),{dateCreatedFilter:void 0});case u.OWNER:return Object(c.a)(Object(c.a)({},e),{ownerFilter:void 0});case u.USER:return e;case u.MEMBERSHIP:return Object(c.a)(Object(c.a)({},e),{membershipFilter:void 0});default:return Object(c.a)(Object(c.a)({},e),{designationFilter:void 0,dateCreatedFilter:void 0,membershipFilter:void 0,ownerFilter:void 0})}case s.a.UPDATE_OWNER_FILTER:return Object(c.a)(Object(c.a)({},e),{ownerFilter:t.payload===e.ownerFilter?void 0:t.payload});case s.a.UPDATE_USERNAME_FILTER:return Object(c.a)(Object(c.a)({},e),{currentUsername:t.payload});case s.a.UPDATE_CREATED_ON_FILTER:return Object(c.a)(Object(c.a)({},e),{dateCreatedFilter:t.payload.created});case s.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(c.a)(Object(c.a)({},e),{designationFilter:t.payload===e.designationFilter?void 0:t.payload});case s.a.UPDATE_MEMBERSHIP_FILTER:return Object(c.a)(Object(c.a)({},e),{membershipFilter:t.payload===e.membershipFilter?void 0:t.payload});case s.a.SET_USERS:return Object(c.a)(Object(c.a)({},e),{allUsers:t.payload.reduce((function(e,t){var r;return Object(c.a)(Object(c.a)({},e),((r={})[t.username]=t,r))}),{})});case s.a.SET_SEARCH_STRING:return Object(c.a)(Object(c.a)({},e),{searchString:t.payload});default:return e}}},375:function(e,t,r){(function(e,r){var n=/^\[object .+?Constructor\]$/,o=/^(?:0|[1-9]\d*)$/,i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var a="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,c=a||u||Function("return this")(),s=t&&!t.nodeType&&t,l=s&&"object"==typeof r&&r&&!r.nodeType&&r,f=l&&l.exports===s,d=f&&a.process,p=function(){try{var e=l&&l.require&&l.require("util").types;return e||d&&d.binding&&d.binding("util")}catch(e){}}(),b=p&&p.isTypedArray;function O(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var h,v,_,y=Array.prototype,g=Function.prototype,m=Object.prototype,E=c["__core-js_shared__"],j=g.toString,S=m.hasOwnProperty,T=(h=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",A=m.toString,R=j.call(Object),I=RegExp("^"+j.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=f?c.Buffer:void 0,U=c.Symbol,L=c.Uint8Array,P=w?w.allocUnsafe:void 0,D=(v=Object.getPrototypeOf,_=Object,function(e){return v(_(e))}),G=Object.create,C=m.propertyIsEnumerable,N=y.splice,x=U?U.toStringTag:void 0,F=function(){try{var e=se(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),M=w?w.isBuffer:void 0,k=Math.max,B=Date.now,q=se(c,"Map"),H=se(Object,"create"),V=function(){function e(){}return function(t){if(!me(t))return{};if(G)return G(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function W(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function K(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $(e){var t=this.__data__=new z(e);this.size=t.size}function Y(e,t){var r=he(e),n=!r&&Oe(e),o=!r&&!n&&_e(e),i=!r&&!n&&!o&&je(e),a=r||n||o||i,u=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=u.length;for(var s in e)!t&&!S.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||le(s,c))||u.push(s);return u}function Q(e,t,r){(void 0!==r&&!be(e[t],r)||void 0===r&&!(t in e))&&Z(e,t,r)}function X(e,t,r){var n=e[t];S.call(e,t)&&be(n,r)&&(void 0!==r||t in e)||Z(e,t,r)}function J(e,t){for(var r=e.length;r--;)if(be(e[r][0],t))return r;return-1}function Z(e,t,r){"__proto__"==t&&F?F(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}W.prototype.clear=function(){this.__data__=H?H(null):{},this.size=0},W.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},W.prototype.get=function(e){var t=this.__data__;if(H){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return S.call(t,e)?t[e]:void 0},W.prototype.has=function(e){var t=this.__data__;return H?void 0!==t[e]:S.call(t,e)},W.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=H&&void 0===t?"__lodash_hash_undefined__":t,this},z.prototype.clear=function(){this.__data__=[],this.size=0},z.prototype.delete=function(e){var t=this.__data__,r=J(t,e);return!(r<0)&&(r==t.length-1?t.pop():N.call(t,r,1),--this.size,!0)},z.prototype.get=function(e){var t=this.__data__,r=J(t,e);return r<0?void 0:t[r][1]},z.prototype.has=function(e){return J(this.__data__,e)>-1},z.prototype.set=function(e,t){var r=this.__data__,n=J(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},K.prototype.clear=function(){this.size=0,this.__data__={hash:new W,map:new(q||z),string:new W}},K.prototype.delete=function(e){var t=ce(this,e).delete(e);return this.size-=t?1:0,t},K.prototype.get=function(e){return ce(this,e).get(e)},K.prototype.has=function(e){return ce(this,e).has(e)},K.prototype.set=function(e,t){var r=ce(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},$.prototype.clear=function(){this.__data__=new z,this.size=0},$.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$.prototype.get=function(e){return this.__data__.get(e)},$.prototype.has=function(e){return this.__data__.has(e)},$.prototype.set=function(e,t){var r=this.__data__;if(r instanceof z){var n=r.__data__;if(!q||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new K(n)}return r.set(e,t),this.size=r.size,this};var ee,te=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var u=i[ee?a:++n];if(!1===t(o[u],u,o))break}return e};function re(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":x&&x in Object(e)?function(e){var t=S.call(e,x),r=e[x];try{e[x]=void 0;var n=!0}catch(e){}var o=A.call(e);n&&(t?e[x]=r:delete e[x]);return o}(e):function(e){return A.call(e)}(e)}function ne(e){return Ee(e)&&"[object Arguments]"==re(e)}function oe(e){return!(!me(e)||function(e){return!!T&&T in e}(e))&&(ye(e)?I:n).test(function(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function ie(e){if(!me(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=fe(e),r=[];for(var n in e)("constructor"!=n||!t&&S.call(e,n))&&r.push(n);return r}function ae(e,t,r,n,o){e!==t&&te(t,(function(i,a){if(o||(o=new $),me(i))!function(e,t,r,n,o,i,a){var u=de(e,r),c=de(t,r),s=a.get(c);if(s)return void Q(e,r,s);var l=i?i(u,c,r+"",e,t,a):void 0,f=void 0===l;if(f){var d=he(c),p=!d&&_e(c),b=!d&&!p&&je(c);l=c,d||p||b?he(u)?l=u:Ee(y=u)&&ve(y)?l=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(u):p?(f=!1,l=function(e,t){if(t)return e.slice();var r=e.length,n=P?P(r):new e.constructor(r);return e.copy(n),n}(c,!0)):b?(f=!1,O=c,h=!0?(v=O.buffer,_=new v.constructor(v.byteLength),new L(_).set(new L(v)),_):O.buffer,l=new O.constructor(h,O.byteOffset,O.length)):l=[]:function(e){if(!Ee(e)||"[object Object]"!=re(e))return!1;var t=D(e);if(null===t)return!0;var r=S.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&j.call(r)==R}(c)||Oe(c)?(l=u,Oe(u)?l=function(e){return function(e,t,r,n){var o=!r;r||(r={});var i=-1,a=t.length;for(;++i<a;){var u=t[i],c=n?n(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),o?Z(r,u,c):X(r,u,c)}return r}(e,Se(e))}(u):me(u)&&!ye(u)||(l=function(e){return"function"!=typeof e.constructor||fe(e)?{}:V(D(e))}(c))):f=!1}var O,h,v,_;var y;f&&(a.set(c,l),o(l,c,n,i,a),a.delete(c));Q(e,r,l)}(e,t,a,r,ae,n,o);else{var u=n?n(de(e,a),i,a+"",e,t,o):void 0;void 0===u&&(u=i),Q(e,a,u)}}),Se)}function ue(e,t){return pe(function(e,t,r){return t=k(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=k(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=r(a),O(e,this,u)}}(e,t,Re),e+"")}function ce(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function se(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return oe(r)?r:void 0}function le(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&o.test(e))&&e>-1&&e%1==0&&e<t}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||m)}function de(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pe=function(e){var t=0,r=0;return function(){var n=B(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(F?function(e,t){return F(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Re);function be(e,t){return e===t||e!=e&&t!=t}var Oe=ne(function(){return arguments}())?ne:function(e){return Ee(e)&&S.call(e,"callee")&&!C.call(e,"callee")},he=Array.isArray;function ve(e){return null!=e&&ge(e.length)&&!ye(e)}var _e=M||function(){return!1};function ye(e){if(!me(e))return!1;var t=re(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ge(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function me(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ee(e){return null!=e&&"object"==typeof e}var je=b?function(e){return function(t){return e(t)}}(b):function(e){return Ee(e)&&ge(e.length)&&!!i[re(e)]};function Se(e){return ve(e)?Y(e,!0):ie(e)}var Te,Ae=(Te=function(e,t,r,n){ae(e,t,r,n)},ue((function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=Te.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!me(r))return!1;var n=typeof t;return!!("number"==n?ve(r)&&le(t,r.length):"string"==n&&t in r)&&be(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&Te(e,a,r,o)}return e})));function Re(e){return e}r.exports=Ae}).call(this,r(164),r(356)(e))},38:function(e,r){e.exports=t},55:function(e,t,r){"use strict";r.d(t,"h",(function(){return c})),r.d(t,"l",(function(){return s})),r.d(t,"k",(function(){return l})),r.d(t,"i",(function(){return f})),r.d(t,"j",(function(){return d})),r.d(t,"g",(function(){return p})),r.d(t,"b",(function(){return b})),r.d(t,"a",(function(){return O})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return _})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return g}));var n,o=r(59),i=r(145),a=r(6),u=r(56);!function(e){e.user="org_user",e.accountUser="account_user",e.publisher="org_publisher",e.accountPublisher="account_publisher",e.admin="org_admin",e.accountAdmin="account_admin",e.viewer="iAAAAAAAAAAAAAAA",e.dataEditor="iBBBBBBBBBBBBBBB"}(n||(n={}));var c=function(e){var t=e.items,r=e.user,n=e.portal,o=t[0],i=Object(u.c)(o,r),a=d(r),c=v(r,n),s=!!r.orgId&&t.every((function(e){return e.portal.id===r.orgId})),f=Object(u.a)(o,r)&&function(e){return(e.privileges||[]).indexOf("portal:admin:updateItems")>-1}(r)&&!a&&(function(e,t){return!l(t)||O(e)||b(e)||t.canSharePublic&&h(e)}(r,n)||v(r,n));return i||f||s&&c},s=function(e,t){return Object(o.a)(Object(i.a)(e))(t)};function l(e){return!(!e.urlKey||!e.customBaseUrl)}function f(e){return e.role===n.admin||e.role===n.accountAdmin}function d(e){return Object(a.a)(e.roleId)&&(e.roleId||"").length>0}function p(e){return!d(e)||d(e)&&function(e){return(e.privileges||[]).indexOf("portal:admin:viewItems")>-1}(e)}function b(e){return(e.privileges||[]).indexOf("portal:user:shareToOrg")>-1}function O(e){return(e.privileges||[]).indexOf("portal:user:shareToGroup")>-1}function h(e){return(e.privileges||[]).indexOf("portal:user:shareToPublic")>-1}function v(e,t){return _(e)||y(e)||t.canSharePublic&&g(e)}function _(e){return(e.privileges||[]).indexOf("portal:admin:shareToGroup")>-1}function y(e){return(e.privileges||[]).indexOf("portal:admin:shareToOrg")>-1}function g(e){return(e.privileges||[]).indexOf("portal:admin:shareToPublic")>-1}},56:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var n=r(6),o=r(55);function i(e,t){return(null==e?void 0:e.owner)===t.username}function a(e,t){return i(e,t)||function(e,t){if(Object(n.a)(e.isAdmin))return!!e.isAdmin;var r=e.owner,o="admin"===e.itemControl;return!(e.portal.isPortal&&!i(e,t)&&o&&r.indexOf("esri_")>-1&&["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(r)<0)&&o}(e,t)}function u(e,t){return a(e,t)||"update"===e.itemControl}var c=function(e){var t=e.user,r=e.items,n=e.portal;return Object(o.h)({items:r,user:t,portal:n})&&Object(o.g)(t)&&r[0].itemOwner||t}},57:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return f}));var n=r(17),o=r(207),i=r(200),a=r(131),u=r(202),c=r(199),s=function(e){return!e.gbState},l={config:c.b,parameters:i.b,groups:a.f,ui:u.b,utils:o.b},f=Object(n.combineReducers)({config:c.a,parameters:i.a,groups:a.b,ui:u.a,utils:o.a})},59:function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduceRight((function(e,t){return t(e)}),t)}}r.d(t,"a",(function(){return n}))},6:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return l}));var n=r(0),o=r(16);function i(e){return 0===Object.keys(e).length&&e.constructor===Object}function a(e){return null!=e}var u=Object(o.a)((function(e,t){var r=Object(n.a)({},t);return delete r[e],r}));function c(e,t){return s.apply(null,arguments)}var s=Object(o.a)((function(e,t){return Object.keys(t).reduce((function(r,n){return r[n]=e(t[n],n,t),r}),{})}));function l(e,t){return f.apply(null,arguments)}var f=Object(o.a)((function(e,t){return Object.keys(t).reduce((function(r,n){return e(t[n],n,t)&&(r[n]=t[n]),r}),{})}))},61:function(e,t,r){"use strict";r.d(t,"h",(function(){return s})),r.d(t,"g",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"d",(function(){return b})),r.d(t,"f",(function(){return _})),r.d(t,"c",(function(){return y})),r.d(t,"a",(function(){return g}));var n,o=r(0),i=r(32),a=r(29),u=r(25),c=r(56),s=function(e){var t=e.items,r=e.groups,n=e.restUrl,o=e.request,u=e.portalUser;if(0===t.length)return a.Promise.resolve();var s=Object(i.b)(r);return t.every((function(e){return Object(c.d)(e,u)}))?new a.Promise((function(e,a){if(!r||0===r.length)return e();var c={f:"json",items:Object(i.b)(t),groups:s};o(n+"/content/users/"+u.username+"/unshareItems",{method:"post",query:c}).then(e,a)})):f({items:t,groupIds:s,restUrl:n,request:o,unshare:!0})},l=function(e){var t=e.items,r=e.groups,n=e.restUrl,u=e.request,s=e.portalUser,l=e.selectedOptions,d=e.ignoreShareLevel;if(0===t.length)return a.Promise.resolve();if(!d&&!l)throw"Selected options must be provided unless share level is ignored.";var p=Object(i.b)(r),b=d?{}:O(l);return t.every((function(e){return Object(c.d)(e,s)}))?new a.Promise((function(e,r){u(n+"/content/users/"+s.username+"/shareItems",{method:"post",query:Object(o.a)({f:"json",items:Object(i.b)(t),groups:p,confirmItemControl:!0},b)}).then((function(t){var n=t.data;n.results.every((function(e){return e.success}))?e():r(n)}),r)})):f({items:t,groupIds:p,shareLevelOptions:b,restUrl:n,request:u})};function f(e){var t=e.items,r=e.groupIds,n=e.shareLevelOptions,i=e.restUrl,u=e.request,c=e.unshare;return a.Promise.all(t.map((function(e,t){return new a.Promise((function(t,a){u(i+"/content/items/"+(e.itemId||e.id)+"/"+(c?"unshare":"share"),{method:"post",query:Object(o.a)({f:"json",groups:r,confirmItemControl:!0},n||{})}).then(t,a)}))}))).catch((function(e){throw e}))}var d=function(e){return e.reduce((function(e,t){return Object(o.g)(Object(o.g)([],e),t)}),[])},p=function(e){return Object.keys(e).filter((function(t){return"total"!==t&&e[t]>0})).length>1},b=function(e){return Object.keys(e).filter((function(e){return"total"!==e})).reduce((function(t,r){return e[r]===e.total?r:t}))},O=function(e){return p(e)?{}:h[b(e)]},h=((n={})[u.b.public]={org:!1,everyone:!0},n[u.b.org]={org:!0,everyone:!1},n[u.b.private]={org:!1,everyone:!1},n[u.b.shared]={org:!1,everyone:!1},n),v=["Location Tracking Service","Location Tracking View","IoTFeed","IoTRealTimeAnalytic","IoTBigDataAnalytic","IoTFeatureLayer","IoTMapImageLayer","IoTStreamLayer","Administrative Report","EditExtensionIndoorsSpaces"],_=function(e){var t,r,n=e.typeKeywords,o=e.type,i=v.some((function(e){return n.indexOf(e)>-1}))&&"Real Time Analytic"!==o&&"Big Data Analytic"!==o,a=!(null===(t=null==e?void 0:e.portal)||void 0===t?void 0:t.isPortal)&&"Image Service"===e.type&&(null===(r=e.url)||void 0===r?void 0:r.indexOf("://iservices"))>-1&&e.url.indexOf("arcgis.com")>-1,u="Knowledge Graph"===e.type;return i||a||u},y=function(e,t,r){return function(e,t){return t&&e.public===e.total}(t,r)?e.filter((function(e){return e.typeKeywords.indexOf("DeveloperBasemap")>-1})):[]};function g(e,t){return new a.Promise((function(r,n){var o,i=null===(o=e.helpMap)||void 0===o?void 0:o.m;i?r(i):t(e.restUrl+"/portals/helpmap",{query:{f:"json",format:"json"}}).then((function(e){var t;r(null===(t=e.data.helpMap)||void 0===t?void 0:t.m)}),n)}))}},67:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.LOADING_GROUPS="LOADING_GROUPS",e.LOAD_GROUPS_SUCCESS="LOAD_GROUPS_SUCCESS",e.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL",e.SELECT_GROUPS="SELECT_GROUPS",e.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS",e.DESELECT_GROUPS="DESELECT_GROUPS",e.REVERT_GROUPS="REVERT_GROUPS",e.CLEAR_SELECTION="CLEAR_SELECTION",e.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS",e.SET_HAS_GROUPS="SET_HAS_GROUPS"}(n||(n={}))},78:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return f}));var n=r(59),o=r(6),i=r(120),a=r(119),u=r(113),c=r(118),s=r(117),l=function(e,t,r){return Object(n.a)(Object(s.a)(e),Object(c.a)(e),Object(u.a)(t),Object(a.a)(e),Object(i.a)(e))(r)},f=Object(n.a)(Object(o.e)("patchedDescription"),Object(o.e)("thumbURI"),Object(o.e)("iconURI"),Object(o.e)("displayName"),Object(o.e)("badges"))},82:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.SET_SEARCH_STRING="SET_SEARCH_STRING",e.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER",e.CHANGE_SORT_FIELD="CHANGE_SORT_FIELD",e.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER",e.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER",e.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER",e.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER",e.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER",e.SET_USERS="SET_USERS",e.CLEAR_FILTERS="CLEAR_FILTERS"}(n||(n={}))},96:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return s}));var n=r(16),o=function(e,t,r){return r.indexOf(e)===t},i=Object(n.a)((function(e,t){var r={};return t.filter((function(t){return!r[t[e]]&&(r[t[e]]=!0,!0)}))}));function a(e,t){if(null==e?void 0:e.length)for(var r=void 0,n=0;n<e.length;n++)if(t(r=e[n]))return r}function u(e){return e.filter((function(e){return e.length>0}))}var c=function(e,t){return e.length===t.length&&e.reduce((function(e,r){return e&&t.indexOf(r)>-1}),!0)};function s(e,t,r){var n=[];return t.forEach((function(t){(r?t[r].toLowerCase()===e.toLowerCase():t.toLowerCase()===e.toLowerCase())?n.unshift(t):n.push(t)})),n}},963:function(e,t,r){"use strict";r.r(t),r.d(t,"ShareWrapper",(function(){return b}));var n=r(0),o=r(344),i=r.n(o),a=r(17),u=r(32),c=r(375),s=r.n(c),l=r(326),f=r.n(l),d=r(133),p=r(61);r.d(t,"unshareItems",(function(){return p.h})),r.d(t,"shareItems",(function(){return p.g})),r.d(t,"getShimmedRequest",(function(){return u.u})),r.d(t,"initialState",(function(){return o.initialState}));var b=function(){function e(e,t){this.options=t,this.listener=this.listener.bind(this),this.renderContainer=document.createElement("div"),this.renderContainer.id="share-wrapper",e.appendChild(this.renderContainer);var r=f()(o.initialState),c=f()(t.initialState),l=s()(r,c,(function(e,t){if(Array.isArray(e)&&t)return t})),p=t.initialState&&t.initialState.resources&&t.initialState.resources.items,b=4===t.apiVersion?t.request:Object(u.u)(t.request),O=4===t.apiVersion?t.portal:Object(n.a)(Object(n.a)({},t.portal),{restUrl:t.portal.portalUrl.slice(0,-1),credential:t.portal.user&&t.portal.user.credential?t.portal.user.credential:void 0}),h=4===t.apiVersion?window.require.toUrl("esri/images/portal"):window.require.toUrl("esri/css/images/item_type_icons");this.initialState=Object(n.a)(Object(n.a)({},l),{resources:Object(n.a)(Object(n.a)({},l.resources),{portalUser:t.portalUser,items:p}),utilities:Object(n.a)(Object(n.a)({},l.utilities),{request:b,portal:O,iconDir:h}),gbState:Object(n.a)(Object(n.a)({},l.gbState),{utils:Object(n.a)(Object(n.a)({},l.gbState.utils),{request:b,portal:O,portalUser:t.portalUser}),config:Object(n.a)(Object(n.a)({},l.gbState.config),{groupsPerPage:l.config.groupsPerPage,withinShare:!0,enableFiltering:!0,hasTrustedOrgs:l.config.hasTrustedOrgs})})}),this.store=Object(a.applyMiddleware)(a.thunk,Object(a.addListener)(this.listener))(a.createStore)(o.reducers,this.initialState),this.dispatch(Object(d.g)()),this.projector=Object(a.createProjector)(this.store,(function(e){return e(i.a,{key:"share"})}),this.renderContainer)}return e.prototype.remove=function(){document&&document.documentElement&&document.documentElement.classList.remove("overflow-hidden"),this.renderContainer&&this.renderContainer.parentElement&&this.renderContainer.parentElement.removeChild(this.renderContainer)},e.prototype.dispatch=function(e){this.store&&this.store.dispatch(e)},e.prototype.getState=function(){return this.store?this.store.getState():this.initialState},e.prototype.listener=function(e,t){this.options.listener&&this.options.listener(e,t)},e}()},99:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(0),o=function(e){return e?e.urlKey?location.protocol+"//"+e.urlKey+"."+e.customBaseUrl:location.protocol+"//"+e.portalHostname:""},i=function(e){return Object(n.a)(Object(n.a)({},e),{baseUrl:o(e)})}}})}));
//# sourceMappingURL=Share.js.map