// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.24/esri/copyright.txt for details.//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f){var r;m=new m.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});k=r=function(v){function B(u){u=v.call(this,u)||this;u.dpi=96;u.format=null;u.origin=null;u.minScale=0;u.maxScale=0;u.size=null;u.spatialReference=null;return u}g._inheritsLoose(B,v);B.create=function(u=
{}){const {resolutionFactor:C=1,scales:J,size:S=256,spatialReference:T=d.WebMercator,numLODs:P=24}=u;if(!q.isValid(T)){u=[];if(J)for(var X=0;X<J.length;X++){var Q=J[X];u.push({level:X,scale:Q,resolution:Q})}else for(X=5E-4,Q=P-1;0<=Q;Q--)u.unshift({level:Q,scale:X,resolution:X}),X*=2;return new r({dpi:96,lods:u,origin:new h(0,0,T),size:[S,S],spatialReference:T})}X=q.getInfo(T);u=u.origin?new h({x:u.origin.x,y:u.origin.y,spatialReference:T}):X?new h({x:X.origin[0],y:X.origin[1],spatialReference:T}):
new h({x:0,y:0,spatialReference:T});X=1/(39.37*E.getMetersPerUnitForSR(T)*96);Q=[];if(J)for(var O=0;O<J.length;O++){var Z=J[O];Q.push({level:O,scale:Z,resolution:Z*X})}else{var L=q.isGeographic(T)?512/S*5.916575275917094E8:256/S*5.91657527591555E8;O=Math.ceil(P/C);Q.push({level:0,scale:L,resolution:L*X});for(Z=1;Z<O;Z++)L/=2**C,Q.push({level:Z,scale:L,resolution:L*X})}return new r({dpi:96,lods:Q,origin:u,size:[S,S],spatialReference:T})};var w=B.prototype;w.readOrigin=function(u,C){return h.fromJSON({spatialReference:C.spatialReference,
...u})};w.readSize=function(u,C){return[C.cols,C.rows]};w.writeSize=function(u,C){C.cols=u[0];C.rows=u[1]};w.zoomToScale=function(u){const C=this.scales;if(0>=u)return C[0];if(u>=C.length-1)return C[C.length-1];{const J=Math.floor(u);return C[J]/(C[J]/C[J+1])**(u-J)}};w.scaleToZoom=function(u){const C=this.scales,J=C.length-1;let S=0;for(;S<J;S++){const T=C[S],P=C[S+1];if(T<=u)break;if(P===u)return S+1;if(T>u&&P<u)return S+Math.log(T/u)/Math.log(T/P)}return S};w.snapScale=function(u,C=.95){u=this.scaleToZoom(u);
return u%Math.floor(u)>=C?this.zoomToScale(Math.ceil(u)):this.zoomToScale(Math.floor(u))};w.tileAt=function(u,C,J,S){var T=this.lodAt(u);if(!T)return null;let P;if("number"===typeof C)P=C,C=J;else{if(q.equals(C.spatialReference,this.spatialReference))P=C.x,C=C.y;else{S=A.project(C,this.spatialReference);if(t.isNone(S))return null;P=S.x;C=S.y}S=J}J=T.resolution*this.size[0];T=T.resolution*this.size[1];S||(S={id:null,level:0,row:0,col:0,extent:e.create()});S.level=u;S.row=Math.floor((this.origin.y-
C)/T+.001);S.col=Math.floor((P-this.origin.x)/J+.001);this.updateTileInfo(S);return S};w.updateTileInfo=function(u,C=r.ExtrapolateOptions.NONE){var J=this.lodAt(u.level);J||C!==r.ExtrapolateOptions.POWER_OF_TWO||(C=this.lods[this.lods.length-1],C.level<u.level&&(J=C));if(J){var S=u.level-J.level;C=J.resolution*this.size[0]/2**S;J=J.resolution*this.size[1]/2**S;u.id=`${u.level}/${u.row}/${u.col}`;u.extent||(u.extent=e.create());u.extent[0]=this.origin.x+u.col*C;u.extent[1]=this.origin.y-(u.row+1)*
J;u.extent[2]=u.extent[0]+C;u.extent[3]=u.extent[1]+J}};w.upsampleTile=function(u){const C=this._upsampleLevels[u.level];if(!C||-1===C.parentLevel)return!1;u.level=C.parentLevel;u.row=Math.floor(u.row/C.factor+.001);u.col=Math.floor(u.col/C.factor+.001);this.updateTileInfo(u);return!0};w.getTileBounds=function(u,C){var {resolution:J}=this.lodAt(C.level);const S=J*this.size[0];J*=this.size[1];u[0]=this.origin.x+C.col*S;u[1]=this.origin.y-(C.row+1)*J;u[2]=u[0]+S;u[3]=u[1]+J;return u};w.lodAt=function(u){return this._levelToLOD&&
this._levelToLOD[u]||null};w.clone=function(){return r.fromJSON(this.write({}))};w.getOrCreateCompatible=function(u,C){if(256===this.size[0]&&256===this.size[1])return 256===u?this:null;const J=[],S=this.lods.length;for(let T=0;T<S;T++){const P=this.lods[T];J.push(new f({level:P.level,scale:P.scale,resolution:P.resolution*C}))}return new r({size:[u,u],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:J})};w._initializeUpsampleLevels=
function(){const u=this.lods;this._upsampleLevels=[];let C=null;for(let J=0;J<u.length;J++){const S=u[J];this._upsampleLevels[S.level]={parentLevel:C?C.level:-1,factor:C?C.resolution/S.resolution:0};C=S}};g._createClass(B,[{key:"isWrappable",get:function(){const {spatialReference:u,origin:C}=this;if(u&&C){const J=q.getInfo(u);return u.isWrappable&&Math.abs(J.origin[0]-C.x)<=J.dx}return!1}},{key:"lods",set:function(u){let C=0,J=0;const S=[];this._levelToLOD={};u&&(C=-Infinity,J=Infinity,u.forEach(T=>
{S.push(T.scale);C=T.scale>C?T.scale:C;J=T.scale<J?T.scale:J;this._levelToLOD[T.level]=T}));this._set("scales",S);this._set("minScale",C);this._set("maxScale",J);this._set("lods",u);this._initializeUpsampleLevels()}}]);return B}(k.JSONSupport);n.__decorate([y.property({type:Number,json:{write:!0}})],k.prototype,"compressionQuality",void 0);n.__decorate([y.property({type:Number,json:{write:!0}})],k.prototype,"dpi",void 0);n.__decorate([y.property({type:String,json:{read:m.read,write:m.write,origins:{"web-scene":{read:!1,
write:!1}}}})],k.prototype,"format",void 0);n.__decorate([y.property({readOnly:!0})],k.prototype,"isWrappable",null);n.__decorate([y.property({type:h,json:{write:!0}})],k.prototype,"origin",void 0);n.__decorate([p.reader("origin")],k.prototype,"readOrigin",null);n.__decorate([y.property({type:[f],value:null,json:{write:!0}})],k.prototype,"lods",null);n.__decorate([y.property({readOnly:!0})],k.prototype,"minScale",void 0);n.__decorate([y.property({readOnly:!0})],k.prototype,"maxScale",void 0);n.__decorate([y.property({readOnly:!0})],
k.prototype,"scales",void 0);n.__decorate([y.property({cast:v=>Array.isArray(v)?v:"number"===typeof v?[v,v]:[256,256]})],k.prototype,"size",void 0);n.__decorate([p.reader("size",["rows","cols"])],k.prototype,"readSize",null);n.__decorate([a.writer("size",{cols:{type:D.Integer},rows:{type:D.Integer}})],k.prototype,"writeSize",null);n.__decorate([y.property({type:d,json:{write:!0}})],k.prototype,"spatialReference",void 0);k=r=n.__decorate([c.subclass("esri.layers.support.TileInfo")],k);(function(v){v=
v.ExtrapolateOptions||(v.ExtrapolateOptions={});v[v.NONE=0]="NONE";v[v.POWER_OF_TWO=1]="POWER_OF_TWO"})(k||(k={}));return k})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,n,m,k,t,E,y,H){var G;m=G=function(D){function p(c){c=
D.call(this,c)||this;c.cols=null;c.level=0;c.levelValue=null;c.origin=null;c.resolution=0;c.rows=null;c.scale=0;return c}g._inheritsLoose(p,D);p.prototype.clone=function(){return new G({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return p}(m.JSONSupport);n.__decorate([k.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,"cols",void 0);n.__decorate([k.property({type:y.Integer,
json:{write:!0}})],m.prototype,"level",void 0);n.__decorate([k.property({type:String,json:{write:!0}})],m.prototype,"levelValue",void 0);n.__decorate([k.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,"origin",void 0);n.__decorate([k.property({type:Number,json:{write:!0}})],m.prototype,"resolution",void 0);n.__decorate([k.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,
"rows",void 0);n.__decorate([k.property({type:Number,json:{write:!0}})],m.prototype,"scale",void 0);return m=G=n.__decorate([H.subclass("esri.layers.support.LOD")],m)})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c){function a(e,q){return q?h[e].valueToClassName[q].split(" "):[]}const h={widthBreakpoint:{getValue(e){const q=e.viewSize[0];e=e.breakpoints;const A=this.values;return q<=e.xsmall?A.xsmall:q<=e.small?A.small:q<=e.medium?A.medium:q<=e.large?A.large:A.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const q=e.viewSize[1];e=e.breakpoints;const A=this.values;return q<=e.xsmall?A.xsmall:q<=e.small?A.small:q<=e.medium?A.medium:q<=e.large?A.large:A.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){e=e.viewSize;const q=this.values;return e[1]>=e[0]?q.portrait:q.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},d={xsmall:544,small:768,medium:992,large:1200};g.BreakpointsOwner=
e=>{e=function(q){function A(...r){r=q.call(this,...r)||this;r._breakpointsHandles=new t;r.orientation=null;r.widthBreakpoint=null;r.heightBreakpoint=null;r.breakpoints=d;return r}n._inheritsLoose(A,q);var f=A.prototype;f.initialize=function(){this._breakpointsHandles.add(y.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),y.initial))};f.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=E.destroyMaybe(this._breakpointsHandles))};f._updateClassNames=
function(){if(this.container){var r=k.acquire(),v=k.acquire(),B=!1,w;for(w in h){const u=this[w],C=h[w].getValue({viewSize:this.size,breakpoints:this.breakpoints});u!==C&&(B=!0,this[w]=C,a(w,u).forEach(J=>v.push(J)),a(w,C).forEach(J=>r.push(J)))}B&&(this._applyClassNameChanges(r,v),k.release(r),k.release(v))}};f._applyClassNameChanges=function(r,v){const B=this.container;B&&(v.forEach(w=>B.classList.remove(w)),r.forEach(w=>B.classList.add(w)))};f._removeActiveClassNames=function(){const r=this.container;
if(r)for(var v in h)a(v,this[v]).forEach(B=>r.classList.remove(B))};n._createClass(A,[{key:"breakpoints",set:function(r){var v=this._get("breakpoints");if(r!==v){v=(v=r)&&v.xsmall<v.small&&v.small<v.medium&&v.medium<v.large;if(!v){const B=JSON.stringify(d,null,2);console.warn("provided breakpoints are not valid, using defaults:"+B)}r=v?r:d;this._set("breakpoints",{...r})}}}]);return A}(e);m.__decorate([H.property()],e.prototype,"breakpoints",null);m.__decorate([H.property()],e.prototype,"orientation",
void 0);m.__decorate([H.property()],e.prototype,"widthBreakpoint",void 0);m.__decorate([H.property()],e.prototype,"heightBreakpoint",void 0);return e=m.__decorate([c.subclass("esri.views.BreakpointsOwner")],e)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a){function h(e){e&&(k.empty(e),e.parentNode&&e.parentNode.removeChild(e))}const d=[0,0];g.DOMContainer=e=>{e=function(q){function A(...r){var v=q.call(this,...r)||this;v._freqInfo={freq:16,time:750};v._overlayRenderTaskHandle=null;v.height=0;v.position=null;v.resizing=!1;v.root=null;v.surface=null;v.suspended=!0;v.ui=null;v.userContent=null;v.width=0;v.widthBreakpoint=null;v.handles.add([t.watch(()=>v.cursor,B=>{const {surface:w}=n._assertThisInitialized(v);w&&w.setAttribute("data-cursor",
B)}),t.watch(()=>v.interacting,B=>{const {surface:w}=n._assertThisInitialized(v);w&&w.setAttribute("data-interacting",B.toString())})]);return v}n._inheritsLoose(A,q);var f=A.prototype;f.initialize=function(){this.handles.add(t.watch(()=>this.ui,(r,v)=>this._handleUIChange(r,v)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};f.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),
this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};f.blur=function(){this.surface&&this.surface.blur()};f.focus=function(){this.surface&&this.surface.focus()};f.pageToContainer=function(r,v,B){const w=this.position;r-=w[0];v-=w[1];B?(B[0]=r,B[1]=v):B=[r,v];return B};f.containerToPage=function(r,v,B){const w=this.position;r+=w[0];v+=w[1];B?(B[0]=r,B[1]=v):B=[r,v];return B};f._handleUIChange=function(r,v){v&&(this.handles.remove("ui"),v.destroy());r&&this._wireUI(r);this._set("ui",
r)};f._wireUI=function(r){this.handles.remove("ui");r&&(r.view=this,this.handles.add([t.watch(()=>this.root,v=>{if(v){{const B=document.createElement("div");v.appendChild(B);v=B}}else v=null;r.container=v},t.initial),t.watch(()=>this.popup,(v,B)=>{B&&r.remove(B,"popup");v&&(v.view=r.view,r.add(v,{key:"popup",position:"manual"}))},t.initial)],"ui"))};f._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};f._startMeasuring=function(){const r=this._freqInfo;
r.freq=16;r.time=750;this.handles.add([(()=>{const v=()=>{r.freq=16;r.time=750};window.addEventListener("resize",v);return{remove(){window.removeEventListener("resize",v)}}})(),E.addFrameTask({prepare:v=>{const B=this._measure(),w=this._freqInfo;w.time+=v.deltaTime;B&&(w.freq=16,this._get("resizing")||this._set("resizing",!0));w.time<w.freq||(w.time=0,this._position()||B?w.freq=16:w.freq=Math.min(750,2*w.freq),!B&&512<=w.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();
this._position()};f._measure=function(){var r=this.container;const v=r?r.clientWidth:0;r=r?r.clientHeight:0;if(0===v||0===r)return this.suspended||this._set("suspended",!0),!1;const B=this.width,w=this.height;if(v===B&&r===w)return this.suspended&&this._set("suspended",!1),!1;this._set("width",v);this._set("height",r);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:B,oldHeight:w,width:v,height:r});return!0};f._position=function(){var r=this.container;const v=this.position;{const B=
(r.ownerDocument||window.document).defaultView;r=r.getBoundingClientRect();d[0]=r.left+B.pageXOffset;d[1]=r.top+B.pageYOffset}return v&&d[0]===v[0]&&d[1]===v[1]?!1:(this._set("position",[d[0],d[1]]),!0)};f.forceDOMReadyCycle=function(){};n._createClass(A,[{key:"container",set:function(r){var v=this._get("container");if(v!==r)if(this.handles.remove("dom-size"),this._stopMeasuring(),v&&(v.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=
null),this.overlay.destroy(),this._set("overlay",null),h(this.root),this._set("root",null),k.reparent(this.userContent,v),h(this.userContent),this._set("userContent",null)),r){r.classList.add("esri-view");v=document.createElement("div");v.className="esri-view-user-storage";k.reparent(r,v);r.appendChild(v);this._set("userContent",v);v=document.createElement("div");v.className="esri-view-root";r.insertBefore(v,r.firstChild);this._set("root",v);const B=document.createElement("div");B.className="esri-view-surface";
B.setAttribute("role","application");B.tabIndex=0;v.appendChild(B);this._set("surface",B);const w=new c;v.appendChild(w.surface);this._set("overlay",w);t.watch(()=>w.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=E.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(t.watch(()=>this.size,u=>{const [C,J]=u;C>=document.body.clientWidth||
J>=document.body.clientHeight?B.classList.add("esri-view-surface--inset-outline"):B.classList.remove("esri-view-surface--inset-outline")},t.initial),"dom-size");this._set("container",r);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}},{key:"popup",get:function(){return this._get("popup")||
new a({view:this})},set:function(r){const v=this._get("popup");v&&v!==r&&v.destroy();this._set("popup",r)}},{key:"size",get:function(){return[this.width,this.height]}}]);return A}(e);m.__decorate([y.property({value:null,cast:q=>k.byId(q)})],e.prototype,"container",null);m.__decorate([y.property({readOnly:!0})],e.prototype,"focused",null);m.__decorate([y.property({readOnly:!0})],e.prototype,"height",void 0);m.__decorate([y.property({type:a})],e.prototype,"popup",null);m.__decorate([y.property({type:c})],
e.prototype,"overlay",void 0);m.__decorate([y.property({readOnly:!0})],e.prototype,"position",void 0);m.__decorate([y.property({readOnly:!0})],e.prototype,"resizing",void 0);m.__decorate([y.property({readOnly:!0})],e.prototype,"root",void 0);m.__decorate([y.property({value:null,readOnly:!0})],e.prototype,"size",null);m.__decorate([y.property({readOnly:!0})],e.prototype,"surface",void 0);m.__decorate([y.property({readOnly:!0})],e.prototype,"suspended",void 0);m.__decorate([y.property()],e.prototype,
"ui",void 0);m.__decorate([y.property({readOnly:!0})],e.prototype,"userContent",void 0);m.__decorate([y.property({readOnly:!0})],e.prototype,"width",void 0);m.__decorate([y.property()],e.prototype,"widthBreakpoint",void 0);return e=m.__decorate([p.subclass("esri.views.DOMContainer")],e)};g.isDOMContainer=function(e){return e&&"focus"in e};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c){m=function(a){function h(){var e=a.apply(this,arguments)||this;e.items=new k;e._watchUpdatingTracking=new D.WatchUpdatingTracking;e._callbacks=new Map;e._projector=c.createProjector();e._hiddenProjector=c.createProjector();return e}g._inheritsLoose(h,a);var d=h.prototype;d.initialize=function(){const e=document.createElement("div");e.className="esri-overlay-surface";this._set("surface",e);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");e.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,q=>{for(const A of q.added){const f=()=>A.render();this._callbacks.set(A,f);this._projector.append(this.surface,f)}for(const A of q.removed)q=this._projector.detach(this._callbacks.get(A)),this.surface.removeChild(q.domNode),this._callbacks.delete(A)})};d.addItem=function(e){this.items.add(e)};d.removeItem=function(e){this.items.remove(e)};d.destroy=function(){this.items.removeAll();
this._callbacks.forEach(e=>this._projector.detach(e));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};d.render=function(){this._projector.renderNow()};d.computeBoundingRect=function(e){const q=this._hiddenSurface,A=this._hiddenProjector;let f=null;const r=()=>f=e.render();A.append(q,r);A.renderNow();const v={left:0,top:0,right:0,bottom:0};if(f&&f.domNode){const B=f.domNode.getBoundingClientRect();v.left=B.left;v.top=B.top;v.right=B.right;v.bottom=B.bottom}for(A.detach(r);q.firstChild;)q.removeChild(q.firstChild);
return v};d.overlaps=function(e,q){e=this.computeBoundingRect(e);q=this.computeBoundingRect(q);return Math.max(e.left,q.left)<=Math.min(e.right,q.right)&&Math.max(e.top,q.top)<=Math.min(e.bottom,q.bottom)};d.renderCanvas=function(e){if(this.items.some(A=>A.visible)){var q=e.getContext("2d");q.save();q.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(A=>{q.save();A.renderCanvas(q);q.restore()});q.restore()}};g._createClass(h,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(e=>e.visible)}}]);return h}(m);n.__decorate([t.property({readOnly:!0})],m.prototype,"surface",void 0);n.__decorate([t.property({readOnly:!0})],m.prototype,"items",void 0);n.__decorate([t.property({readOnly:!0})],m.prototype,"needsRender",null);n.__decorate([t.property({readOnly:!0})],m.prototype,"_watchUpdatingTracking",void 0);n.__decorate([t.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],m.prototype,"updating",void 0);
return m=n.__decorate([G.subclass("esri.views.overlay.ViewOverlay")],m)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C,J,S,T){function P(Z,L){return void 0===L?`${"esri-popup"}__${Z}`:`${"esri-popup"}__${Z}-${L}`}const X={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Q=y.getLogger("esri.widgets.Popup"),O={closeButton:!0,featureNavigation:!0};m=function(Z){function L(l,z){var x=Z.call(this,l,z)||this;x._blurClose=!1;x._blurContainer=!1;x._containerNode=null;x._mainContainerNode=null;x._featureMenuNode=null;x._actionsMenuNode=null;x._focusClose=!1;
x._focusContainer=!1;x._focusDockButton=!1;x._focusFeatureMenuButton=!1;x._focusActionsMenuButton=!1;x._focusFirstFeature=!1;x._focusFirstAction=!1;x._handles=new E;x._pointerOffsetInPx=16;x._spinner=null;x._feature=null;x._featureMenuIntersectionObserverCallback=([K])=>{null!=K&&K.isIntersecting&&x.viewModel.featurePage++};x._featureMenuIntersectionObserver=new IntersectionObserver(x._featureMenuIntersectionObserverCallback,{root:window.document});x._displaySpinnerThrottled=D.throttle(()=>x._displaySpinner(),
0);x.actions=null;x.alignment="auto";x.autoCloseEnabled=null;x.autoOpenEnabled=null;x.defaultPopupTemplateEnabled=null;x.content=null;x.collapsed=!1;x.collapseEnabled=!0;x.dockEnabled=!1;x.featureCount=null;x.featureMenuOpen=!1;x.features=null;x.goToOverride=null;x.headingLevel=2;x.highlightEnabled=null;x.location=null;x.label=void 0;x.maxInlineActions=3;x.messages=null;x.messagesCommon=null;x.promises=null;x.selectedFeature=null;x.selectedFeatureIndex=null;x.spinnerEnabled=!0;x.title=null;x.updateLocationEnabled=
null;x.view=null;x.viewModel=new v;x.visible=null;x.visibleElements={...O};x._addSelectedFeatureIndexHandle();x.own([G.watch(()=>{var K;return null==(K=x.viewModel)?void 0:K.screenLocation},()=>x._positionContainer()),G.watch(()=>{var K;return[null==(K=x.viewModel)?void 0:K.active,x.dockEnabled]},()=>x._toggleScreenLocationEnabled()),G.watch(()=>{var K;return null==(K=x.viewModel)?void 0:K.screenLocation},(K,U)=>{!!K!==!!U&&x.reposition()}),G.watch(()=>{var K,U,ba,ea,na,ha;return[null==(K=x.viewModel)?
void 0:null==(U=K.view)?void 0:U.padding,null==(ba=x.viewModel)?void 0:null==(ea=ba.view)?void 0:ea.size,null==(na=x.viewModel)?void 0:na.active,null==(ha=x.viewModel)?void 0:ha.location,x.alignment]},()=>x.reposition()),G.watch(()=>x.spinnerEnabled,K=>x._spinnerEnabledChange(K)),G.watch(()=>{var K,U;return null==(K=x.viewModel)?void 0:null==(U=K.view)?void 0:U.size},(K,U)=>x._updateDockEnabledForViewSize(K,U)),G.watch(()=>{var K;return null==(K=x.viewModel)?void 0:K.view},(K,U)=>x._viewChange(K,
U)),G.watch(()=>{var K,U;return null==(K=x.viewModel)?void 0:null==(U=K.view)?void 0:U.ready},(K,U)=>x._viewReadyChange(K,U)),G.watch(()=>{var K,U;return[null==(K=x.viewModel)?void 0:K.waitingForResult,null==(U=x.viewModel)?void 0:U.location]},()=>{x._hideSpinner();x._displaySpinnerThrottled()}),G.watch(()=>{var K,U,ba,ea;return[null==(K=x.selectedFeatureWidget)?void 0:null==(U=K.viewModel)?void 0:U.title,null==(ba=x.selectedFeatureWidget)?void 0:null==(ea=ba.viewModel)?void 0:ea.state]},()=>x._setTitleFromFeatureWidget()),
G.watch(()=>{var K,U,ba,ea;return[null==(K=x.selectedFeatureWidget)?void 0:null==(U=K.viewModel)?void 0:U.content,null==(ba=x.selectedFeatureWidget)?void 0:null==(ea=ba.viewModel)?void 0:ea.state]},()=>x._setContentFromFeatureWidget()),G.when(()=>!x.collapsed,()=>{var K,U;"xsmall"===(null==(K=x.viewModel)?void 0:null==(U=K.view)?void 0:U.widthBreakpoint)&&x.viewModel.active&&x.collapseEnabled&&x.viewModel.centerAtLocation()}),G.on(()=>{var K;return null==(K=x.viewModel)?void 0:K.allActions},"change",
()=>x._watchActions()),G.watch(()=>{var K;return null==(K=x.viewModel)?void 0:K.allActions},()=>x._watchActions(),G.initial),G.watch(()=>{var K;return null==(K=x.viewModel)?void 0:K.featureViewModels},()=>x._featureMenuViewportScrollTop())]);return x}g._inheritsLoose(L,Z);var I=L.prototype;I.destroy=function(){var l,z;this._destroySelectedFeatureWidget();this._destroySpinner();null==(l=this._handles)?void 0:l.destroy();this._unobserveFeatureMenuObserver();null==(z=this._featureMenuIntersectionObserver)?
void 0:z.disconnect();this._handles=null};I.castVisibleElements=function(l){return{...O,...l}};I.blur=function(){const {active:l}=this.viewModel;l||Q.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};I.clear=function(){this.viewModel.clear()};I.close=function(){this.visible=!1};I.fetchFeatures=function(l,z){return this.viewModel.fetchFeatures(l,z)};I.focus=function(){const {active:l}=this.viewModel;
l||Q.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};I.next=function(){return this.viewModel.next()};I.open=function(l){var z,x;this._handles.remove("selected-index");const K={collapsed:l?!!l.collapsed:!1,actionsMenuOpen:l?!!l.actionsMenuOpen:!1,featureMenuOpen:l?!!l.featureMenuOpen:!1};"xsmall"===(null==(z=this.viewModel)?void 0:null==(x=z.view)?void 0:x.widthBreakpoint)&&(K.collapsed=!0);
this.set(K);this.viewModel.open(l);this._shouldFocus(l);this._addSelectedFeatureIndexHandle()};I.previous=function(){return this.viewModel.previous()};I.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};I.triggerAction=function(l){this.viewModel.triggerAction(l)};I.render=function(){var l,z,x,K;const {actionsMenuOpen:U,dockEnabled:ba,featureMenuVisible:ea,dividedActions:na,currentAlignment:ha,currentDockPosition:la}=this,{active:pa}=this.viewModel;var {menuActions:qa}=
na;qa=pa&&1<qa.length&&U;const M=null==(l=this.selectedFeature)?void 0:null==(z=l.layer)?void 0:z.title;l=null==(x=this.selectedFeature)?void 0:null==(K=x.layer)?void 0:K.id;return J.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===ha,["esri-popup--aligned-bottom-center"]:"bottom-center"===ha,["esri-popup--aligned-top-left"]:"top-left"===ha,["esri-popup--aligned-bottom-left"]:"bottom-left"===ha,["esri-popup--aligned-top-right"]:"top-right"===ha,["esri-popup--aligned-bottom-right"]:"bottom-right"===
ha,["esri-popup--is-docked"]:pa&&ba,["esri-popup--shadow"]:pa&&!ba,["esri-popup--is-docked-top-left"]:"top-left"===la,["esri-popup--is-docked-top-center"]:"top-center"===la,["esri-popup--is-docked-top-right"]:"top-right"===la,["esri-popup--is-docked-bottom-left"]:"bottom-left"===la,["esri-popup--is-docked-bottom-center"]:"bottom-center"===la,["esri-popup--is-docked-bottom-right"]:"bottom-right"===la,["esri-popup--feature-menu-open"]:ea,["esri-popup--actions-menu-open"]:qa}),role:"presentation","data-layer-title":M,
"data-layer-id":l,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},pa?[this.renderMainContainer(),this.renderPointer()]:null)};I.renderLoadingIcon=function(){return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};I.renderNavigationLoading=function(){const {messagesCommon:l}=this;return this.viewModel.pendingPromisesCount?J.tsx("div",{key:P("loading-container"),role:"presentation",class:"esri-popup__loading-container",
"aria-label":l.loading,title:l.loading},this.renderLoadingIcon()):null};I.renderPreviousIcon=function(){const l=S.isRTL(this.container);return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:l,["esri-popup__pagination-previous-icon--rtl"]:l,["esri-icon-left-triangle-arrow"]:!l,["esri-popup__pagination-previous-icon"]:!l})})};I.renderPreviousButton=function(){const {messages:l}=this;return J.tsx("div",{role:"button",tabIndex:0,bind:this,
onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":l.previous,title:l.previous},this.renderPreviousIcon())};I.renderNextIcon=function(){const l=S.isRTL(this.container);return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:l,["esri-popup__pagination-next-icon--rtl"]:l,["esri-icon-right-triangle-arrow"]:!l,["esri-popup__pagination-next-icon"]:!l})})};I.renderNextButton=
function(){const {messages:l}=this;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":l.next,title:l.next},this.renderNextIcon())};I.renderFeatureMenuButton=function(){const {featureMenuOpen:l,featureMenuId:z,messagesCommon:x}=this,{featureCount:K,selectedFeatureIndex:U}=this.viewModel;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,
onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":z,"aria-expanded":l.toString(),"aria-label":x.menu,title:x.menu},this._getPageText(K,U))};I.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:
null};I.renderDockIcon=function(){const {dockEnabled:l}=this,z=this._wouldDockTo();return J.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:l,["esri-popup__icon--dock-icon"]:!l,["esri-icon-dock-right"]:!l&&("top-right"===z||"bottom-right"===z),["esri-icon-dock-left"]:!l&&("top-left"===z||"bottom-left"===z),["esri-icon-maximize"]:!l&&"top-center"===z,["esri-icon-dock-bottom"]:!l&&"bottom-center"===z},"esri-popup__icon")})};I.renderDockButton=function(){var l,z,x;const {dockEnabled:K,
messages:U}=this,ba=null==(l=this.viewModel)?void 0:null==(z=l.view)?void 0:z.widthBreakpoint;l=K?U.undock:U.dock;return"xsmall"!==ba&&null!=(x=this.dockOptions)&&x.buttonEnabled?J.tsx("div",{role:"button","aria-label":l,title:l,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};I.renderTitle=
function(){const {title:l}=this.viewModel,{titleId:z,collapsible:x,contentCollapsed:K,messagesCommon:U}=this;var ba={["esri-popup__header-container--button"]:x};const ea=J.tsx(B.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:l});ba=x?J.tsx("button",{key:`${l}--collapsible`,id:z,title:K?U.expand:U.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ba),"aria-expanded":K?"false":"true",onclick:this._toggleCollapsed,
type:"button"},ea):J.tsx("div",{key:l,id:z,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ba)},ea);return l?ba:null};I.renderCloseIcon=function(){return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};I.renderCloseButton=function(){const {visibleElements:l,messagesCommon:z}=this;return l.closeButton?J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,
class:"esri-popup__button","aria-label":z.close,title:z.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};I.renderHeader=function(){return J.tsx("header",{class:"esri-popup__header"},this.renderTitle(),J.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};I.renderContentContainer=function(){const {contentId:l,hasContent:z,contentCollapsed:x}=this,{content:K}=this.viewModel;return z&&
!x?J.tsx("article",{key:K,enterAnimation:this._createFeatureUpdatedAnimation(),id:l,class:"esri-popup__content"},this.renderContent()):null};I.renderActionsMenuButton=function(){const {actionsMenuId:l,actionsMenuButtonId:z,actionsMenuOpen:x,dividedActions:K,messagesCommon:U}=this,ba=x?U.close:U.open,{menuActions:ea}=K;return ea.length?J.tsx("div",{key:P("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:z,"aria-haspopup":"true","aria-controls":x?
l:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":ba,title:ba},J.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};I.renderMenuActions=function(){const {actionsMenuId:l,actionsMenuButtonId:z,actionsMenuOpen:x,dividedActions:K}=this,{menuActions:U}=K;return U.length&&x?J.tsx("ul",{id:l,role:"menu","aria-labelledby":z,key:P("actions"),
class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},U.toArray().map(ba=>this.renderAction({action:ba,type:"menu-item"}))):null};I.renderInlineActions=function(){const {inlineActions:l}=this.dividedActions;return!!l.length&&l.toArray().map(z=>this.renderAction({action:z,type:"inline"}))};I.renderInlineActionsContainer=function(){const {inlineActions:l,menuActions:z}=this.dividedActions,x=!!l.length,
K=!!z.length;return x||K?J.tsx("div",{key:"inline-actions-container","data-inline-actions":x.toString(),"data-menu-actions":K.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};I.renderNavigation=function(){return this.featureNavigationVisible?J.tsx("section",{key:P("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};I.renderFooter=function(){const {featureNavigationVisible:l,
dividedActions:z}=this,{inlineActions:x,menuActions:K}=z,U=!!x.length,ba={["esri-popup__footer--has-pagination"]:l,["esri-popup__footer--has-actions"]:U,["esri-popup__footer--has-actions-menu"]:!!K.length};return l||U?J.tsx("div",{key:P("feature-buttons"),class:this.classes("esri-popup__footer",ba)},this.renderInlineActionsContainer(),this.renderNavigation()):null};I.renderFeatureMenuContainer=function(){var {messages:l}=this;const {featureViewModels:z,isLoadingFeature:x}=this.viewModel;l=T.substitute(l.selectedFeatures,
{total:z.length});return J.tsx("section",{key:P("menu"),class:"esri-popup__feature-menu"},J.tsx("strong",{class:"esri-popup__feature-menu-header"},l),J.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:S.storeNode},this.renderFeatureMenu(),J.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),x?J.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):
null))};I.renderPointer=function(){return this.dockEnabled?null:J.tsx("div",{key:P("pointer"),class:"esri-popup__pointer",role:"presentation"},J.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};I.renderMainContainer=function(){const {dockEnabled:l,currentAlignment:z,currentDockPosition:x,titleId:K,contentId:U,collapsible:ba,hasContent:ea,contentCollapsed:na,visibleElements:ha}=this,{title:la}=this.viewModel,pa="bottom-left"===z||"bottom-center"===z||"bottom-right"===
z||"top-left"===x||"top-center"===x||"top-right"===x,qa="top-left"===z||"top-center"===z||"top-right"===z||"bottom-left"===x||"bottom-center"===x||"bottom-right"===x;return J.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:l,["esri-popup--is-collapsible"]:ba,["esri-popup--is-collapsed"]:na}),tabIndex:ha.closeButton?null:-1,role:"dialog","aria-labelledby":la?K:"","aria-describedby":ea&&!na?U:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},pa?this.renderFooter():null,pa?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),qa?this.renderFooter():null,qa?this.renderFeatureMenuContainer():null)};I.renderContent=function(){var l;const z=null==(l=this.viewModel)?void 0:l.content;return z?"string"===typeof z?J.tsx("div",{key:z,innerHTML:z}):this.renderNodeContent(z):null};I.renderActionText=function(l){return J.tsx("span",{key:"text",class:"esri-popup__action-text"},
l)};I.renderActionIcon=function(l){const z=this._getActionClass(l),x=this._getActionImage(l),K={["esri-icon-loading-indicator"]:l.active,["esri-rotating"]:l.active,["esri-popup__icon"]:!!z,["esri-popup__action-image"]:!l.active&&!!x};z&&(K[z]=!l.active);return J.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",K),styles:this._getIconStyles(x)})};I.renderAction=function(l){const {action:z,type:x}=l;l=this._getActionTitle(z);const K={["esri-popup__action"]:"toggle"!==
z.type,["esri-popup__action-toggle"]:"toggle"===z.type,["esri-popup__action-toggle--on"]:"toggle"===z.type&&z.value,["esri-popup__button--disabled"]:z.disabled},U=[this.renderActionIcon(z),this.renderActionText(l)];l="menu-item"===x?J.tsx("li",{key:z.uid,role:"menuitem",tabIndex:0,title:l,"aria-label":l,class:this.classes("esri-popup__button",K),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":z.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},U):J.tsx("div",{key:z.uid,
role:"button",tabIndex:0,title:l,"aria-label":l,class:this.classes("esri-popup__button",K),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":z.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},U);return z.visible?l:null};I.renderFeatureMenuItem=function(l,z){const {messages:x,messagesCommon:K}=this,{selectedFeatureIndex:U,selectedFeatureViewModel:ba}=this.viewModel;var ea=l===ba;const na={["esri-popup__feature-menu-item--selected"]:ea};ea=ea?J.tsx("span",{key:P(`feature-menu-selected-feature-${U}`),
title:x.selectedFeature,"aria-label":x.selectedFeature,class:"esri-icon-check-mark"}):null;l=J.tsx("span",{innerHTML:l.title||K.untitled});return J.tsx("li",{role:"menuitem",tabIndex:-1,key:P(`feature-menu-feature-${U}`),class:this.classes(na,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":z,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,
onmouseleave:this._removeActiveFeature},J.tsx("span",{class:"esri-popup__feature-menu-title"},l,ea))};I.renderFeatureMenu=function(){const {featureMenuId:l}=this,{featureViewModels:z}=this.viewModel;return 1<z.length?J.tsx("ol",{class:"esri-popup__feature-menu-list",id:l,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},z.filter(x=>!!x.graphic).map((x,K)=>this.renderFeatureMenuItem(x,K))):null};I._getActionTitle=
function(l){const {messages:z,selectedFeature:x,messagesCommon:K}=this,{id:U}=l,ba=null==x?void 0:x.attributes;return(l="zoom-to-feature"===U?T.substitute(l.title,{messages:z}):"remove-selected-feature"===U?T.substitute(l.title,{messages:K}):"zoom-to-clustered-features"===U?T.substitute(l.title,{messages:z}):"browse-clustered-features"===U?T.substitute(l.title,{messages:z}):l.title)&&ba?T.substitute(l,ba):l};I._getActionClass=function(l){var {selectedFeature:z}=this;z=null==z?void 0:z.attributes;
const {className:x,image:K}=l;return(l=K||x?x:"esri-icon-default-action")&&z?T.substitute(l,z):l};I._getActionImage=function(l){var {selectedFeature:z}=this;z=null==z?void 0:z.attributes;({image:l}=l);return l&&z?T.substitute(l,z):l};I._createFeatureUpdatedAnimation=function(){return S.cssTransition("enter","esri-popup--feature-updated")};I._getInlineActionCount=function(){const {maxInlineActions:l,featureNavigationVisible:z}=this;if("number"!==typeof l)return null;const x=Math.round(l);return Math.max(z?
x-1:x,0)};I._watchActions=function(){const {allActions:l}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");l&&l.forEach(z=>{this._handles.add(G.watch(()=>[z.uid,z.active,z.className,z.disabled,z.id,z.title,z.image,z.visible],()=>this.scheduleRender()),"actions")})};I._divideActions=function(){var {allActions:l}=this.viewModel;l=l.filter(U=>U.visible);const z=this._getInlineActionCount(),x=null===z,K=0===z;return{inlineActions:x?l.slice(0):K?new k:l.slice(0,z),menuActions:x?
new k:K?l.slice(0):l.slice(z)}};I._featureMenuOpenChanged=function(l){l?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};I._actionsMenuOpenChanged=function(l){l?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};I._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:l,messagesCommon:z}=this;if(l){var x,K;this.viewModel.title="error"===(null==(x=l.viewModel)?void 0:x.state)?z.errorMessage:(null==(K=l.viewModel)?void 0:K.title)||""}};I._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:l}=
this;l&&(this.viewModel.content=l)};I._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};I._featureMenuIntersectionObserverCreated=function(l){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(l);this._featureMenuIntersectionObserverNode=l};I._handleFeatureMenuKeyup=function(l){"Escape"===t.eventKey(l)&&(l.stopPropagation(),this._focusFeatureMenuButton=
!0,this.featureMenuOpen=!1,this.scheduleRender())};I._handleActionMenuKeyup=function(l){"Escape"===t.eventKey(l)&&(l.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};I._setActiveFeature=function(l){const {viewModel:z}=this;z.activeFeature=z.features[l.currentTarget["data-feature-index"]]||null};I._removeActiveFeature=function(){this.viewModel.activeFeature=null};I._handleFeatureMenuItemKeyup=function(l){const z=t.eventKey(l);var {_featureMenuNode:x}=
this;const K=l.currentTarget["data-feature-index"];if(x){x=x.querySelectorAll("li");var U=x.length;"ArrowUp"===z?(l.stopPropagation(),x[(K-1+U)%U].focus()):"ArrowDown"===z?(l.stopPropagation(),x[(K+1+U)%U].focus()):"Home"===z?(l.stopPropagation(),x[0].focus()):"End"===z&&(l.stopPropagation(),x[x.length-1].focus())}};I._handleActionMenuItemKeyup=function(l){const z=t.eventKey(l);var {_actionsMenuNode:x}=this;const K=l.currentTarget.dataset.actionUid;var {menuActions:U}=this.dividedActions;U=U.findIndex(ea=>
ea.uid===K);if(x){x=x.querySelectorAll("li");var ba=x.length;"ArrowUp"===z?(l.stopPropagation(),x[(U-1+ba)%ba].focus()):"ArrowDown"===z?(l.stopPropagation(),x[(U+1+ba)%ba].focus()):"Home"===z?(l.stopPropagation(),x[0].focus()):"End"===z&&(l.stopPropagation(),x[x.length-1].focus())}};I._handleMainKeyup=function(l){const z=t.eventKey(l);"ArrowLeft"===z&&(l.stopPropagation(),this.previous());"ArrowRight"===z&&(l.stopPropagation(),this.next())};I._spinnerEnabledChange=function(l){this._destroySpinner();
l&&(l=this.get("viewModel.view"),this._createSpinner(l))};I._hideSpinner=function(){const {_spinner:l}=this;l&&(l.location=null,l.hide())};I._displaySpinner=function(){const {_spinner:l}=this;if(l){var {location:z,waitingForResult:x}=this.viewModel;x?l.show({location:z}):l.hide()}};I._getIconStyles=function(l){return{"background-image":l?`url(${l})`:""}};I._shouldFocus=function(){var l=g._asyncToGenerator(function*(z){z.shouldFocus&&(yield G.whenOnce(()=>{var x;return!0===(null==(x=this.viewModel)?
void 0:x.active)}),this.focus())});return function(z){return l.apply(this,arguments)}}();I._addSelectedFeatureIndexHandle=function(){const l=G.watch(()=>{var z;return null==(z=this.viewModel)?void 0:z.selectedFeatureIndex},(z,x)=>this._selectedFeatureIndexUpdated(z,x));this._handles.add(l,"selected-index")};I._selectedFeatureIndexUpdated=function(l,z){const {featureCount:x}=this;x&&l!==z&&-1!==l&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};I._destroySelectedFeatureWidget=function(){const {_feature:l}=
this;l&&(l.viewModel=null,l&&!l.destroyed&&l.destroy());this._feature=null};I._isScreenLocationWithinView=function(l,z){return-1<l.x&&-1<l.y&&l.x<=z.width&&l.y<=z.height};I._isOutsideView=function(l){const {popupHeight:z,popupWidth:x,screenLocation:K,side:U,view:ba}=l;if(isNaN(x)||isNaN(z)||!ba||!K)return!1;l=ba.padding;return"right"===U&&K.x+x/2>ba.width-l.right||"left"===U&&K.x-x/2<l.left||"top"===U&&K.y-z<l.top||"bottom"===U&&K.y+z>ba.height-l.bottom?!0:!1};I._calculateAutoAlignment=function(l){if("auto"!==
l)return l;const {_pointerOffsetInPx:z,_containerNode:x,_mainContainerNode:K,viewModel:U}=this,{screenLocation:ba,view:ea}=U;if(H.isNone(ba)||!ea||!x)return"top-center";if(!this._isScreenLocationWithinView(ba,ea))return this._get("currentAlignment")||"top-center";var na=(l=K?window.getComputedStyle(K,null):null)?parseInt(l.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,ha=l?parseInt(l.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:la,width:pa}=x.getBoundingClientRect();
l=pa+z;const qa=Math.max(la,na,ha)+z;na=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"right",view:ea});ha=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"left",view:ea});const M=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"top",view:ea});l=this._isOutsideView({popupHeight:qa,popupWidth:l,screenLocation:ba,side:"bottom",view:ea});return ha?M?"bottom-right":"top-right":na?M?"bottom-left":"top-left":M?l?"top-center":"bottom-center":
"top-center"};I._callCurrentAlignment=function(l){return"function"===typeof l?l.call(this):l};I._getCurrentAlignment=function(){const {alignment:l,dockEnabled:z}=this;return z||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(l)))};I._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};I._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};I._calculatePositionResult=
function(l){const z=["left","right"];S.isRTL(this.container)&&z.reverse();return l.replace(/leading/gi,z[0]).replace(/trailing/gi,z[1])};I._callDockPosition=function(l){return"function"===typeof l?l.call(this):l};I._getDockPosition=function(){var l;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(l=this.dockOptions)?void 0:l.position)))};I._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};
I._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};I._calculateAutoDockPosition=function(l){var z;if("auto"!==l)return l;l=null==(z=this.viewModel)?void 0:z.view;z=S.isRTL(this.container)?"top-left":"top-right";if(!l)return z;var x=l.padding||{left:0,right:0,top:0,bottom:0};x=l.width-x.left-x.right;({breakpoints:l}=l);return l&&x<=l.xsmall?"bottom-center":z};I._positionContainer=function(l=this._containerNode){l&&(this._containerNode=l);if(l){var {screenLocation:z}=this.viewModel,
{width:x}=l.getBoundingClientRect();if(z=this._calculatePositionStyle(z,x))l.style.top=z.top,l.style.left=z.left,l.style.bottom=z.bottom,l.style.right=z.right}};I._calculateFullWidth=function(l){const {currentAlignment:z,_pointerOffsetInPx:x}=this;return"top-left"===z||"bottom-left"===z||"top-right"===z||"bottom-right"===z?l+x:l};I._calculateAlignmentPosition=function(l,z,x,K){const {currentAlignment:U,_pointerOffsetInPx:ba}=this;K/=2;const ea=x.height-z;x=x.width-l;const {padding:na}=this.view;if("bottom-center"===
U)return{top:z+ba-na.top,left:l-K-na.left};if("top-left"===U)return{bottom:ea+ba-na.bottom,right:x+ba-na.right};if("bottom-left"===U)return{top:z+ba-na.top,right:x+ba-na.right};if("top-right"===U)return{bottom:ea+ba-na.bottom,left:l+ba-na.left};if("bottom-right"===U)return{top:z+ba-na.top,left:l+ba-na.left};if("top-center"===U)return{bottom:ea+ba-na.bottom,left:l-K-na.left}};I._calculatePositionStyle=function(l,z){const {dockEnabled:x,view:K}=this;if(K){if(x)return{left:"",top:"",right:"",bottom:""};
if(!H.isNone(l)&&z&&(z=this._calculateFullWidth(z),l=this._calculateAlignmentPosition(l.x,l.y,K,z)))return{top:void 0!==l.top?`${l.top}px`:"auto",left:void 0!==l.left?`${l.left}px`:"auto",bottom:void 0!==l.bottom?`${l.bottom}px`:"auto",right:void 0!==l.right?`${l.right}px`:"auto"}}};I._viewChange=function(l,z){l&&z&&(this.close(),this.clear())};I._viewReadyChange=function(l,z){l?(l=this.get("viewModel.view"),this._wireUpView(l)):z&&(this.close(),this.clear())};I._wireUpView=function(l){this._destroySpinner();
if(l){var {spinnerEnabled:z}=this;z&&this._createSpinner(l);this._setDockEnabledForViewSize(this.dockOptions)}};I._dockingThresholdCrossed=function(l,z,x){const [K,U]=l,[ba,ea]=z,{width:na,height:ha}=x;return K<=na&&ba>na||K>na&&ba<=na||U<=ha&&ea>ha||U>ha&&ea<=ha};I._updateDockEnabledForViewSize=function(l,z){if(l&&z){var x=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},K=x.left+x.right,U=x.top+x.bottom;x=[];var ba=[];x[0]=l[0]-K;x[1]=l[1]-U;ba[0]=z[0]-K;ba[1]=z[1]-U;({dockOptions:l}=
this);this._dockingThresholdCrossed(x,ba,l.breakpoint)&&this._setDockEnabledForViewSize(l);this._setCurrentDockPosition()}};I._focusDockButtonNode=function(l){this._focusDockButton&&(this._focusDockButton=!1,l.focus())};I._closeButtonNodeUpdated=function(l){this._focusClose?(this._focusClose=!1,l.focus()):this._blurClose&&(this._blurClose=!1,l.blur())};I._mainContainerNodeUpdated=function(l){this._mainContainerNode=l;this._focusContainer?(this._focusContainer=!1,l.focus()):this._blurContainer&&(this._blurContainer=
!1,l.blur())};I._featureMenuNodeUpdated=function(l){(this._featureMenuNode=l)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,l=l.querySelectorAll("li"),l.length&&l[0].focus())};I._actionsMenuNodeUpdated=function(l){(this._actionsMenuNode=l)&&this._focusFirstAction&&(this._focusFirstAction=!1,l=l.querySelectorAll("li"),l.length&&l[0].focus())};I._focusFeatureMenuButtonNode=function(l){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,l.focus())};I._focusActionsMenuButtonNode=function(l){this._focusActionsMenuButton&&
(this._focusActionsMenuButton=!1,l.focus())};I._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};I._toggleScreenLocationEnabled=function(){const {dockEnabled:l,viewModel:z}=this;z&&(z.screenLocationEnabled=z.active&&!l)};I._shouldDockAtCurrentViewSize=function(l){var z,x;l=l.breakpoint;const K=null==(z=this.viewModel)?void 0:null==(x=z.view)?void 0:x.ui;if(!K)return!1;const {width:U,height:ba}=K;if(isNaN(U)||isNaN(ba))return!1;z=l.hasOwnProperty("width")&&
U<=l.width;x=l.hasOwnProperty("height")&&ba<=l.height;return z||x};I._setDockEnabledForViewSize=function(l){l.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(l))};I._getPageText=function(l,z){return this.featureNavigationVisible?T.substitute(this.messages.pageText,{index:z+1,total:l}):null};I._destroySpinner=function(){const {_spinner:l,view:z}=this;l&&(z&&z.ui&&z.ui.remove(this._spinner,"popup-spinner"),l.destroy(),this._spinner=null)};I._createSpinner=function(l){l&&(this._spinner=
new A({view:l}),l.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};I._toggleCollapsed=function(){this.collapsed=!this.collapsed};I._close=function(){this.close();this.view&&this.view.focus()};I._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};I._toggleFeatureMenu=function(){const l=!this.featureMenuOpen;this._featureMenuOpenChanged(l);this.actionsMenuOpen=!1;this.featureMenuOpen=l};I._toggleActionsMenu=function(){const l=
!this.actionsMenuOpen;this._actionsMenuOpenChanged(l);this.featureMenuOpen=!1;this.actionsMenuOpen=l};I._triggerAction=function(l){const z=l.currentTarget.dataset.actionUid;var {allActions:x}=this.viewModel;l=x.findIndex(K=>K.uid===z);(x=x.getItemAt(l))&&"toggle"===x.type&&(x.value=!x.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(l)};I._selectFeature=function(l){l=l.currentTarget["data-feature-index"];isNaN(l)||(this.viewModel.selectedFeatureIndex=l);this.featureMenuOpen=!1;this._focusFeatureMenuButton=
!0;this.scheduleRender()};I._next=function(){this.next()};I._previous=function(){this.previous()};g._createClass(L,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var l,
z,x,K,U,ba,ea;return!!(this.selectedFeatureWidget?(null==(l=this.selectedFeatureWidget)?0:null==(z=l.viewModel)?0:z.waitingForContent)||"error"===(null==(x=this.selectedFeatureWidget)?void 0:null==(K=x.viewModel)?void 0:K.state)||(null==(U=this.selectedFeatureWidget)?0:null==(ba=U.viewModel)?0:ba.content):null==(ea=this.viewModel)?0:ea.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",
get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(l){this._set("actionsMenuOpen",
!!l)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||X},set:function(l){var z={...X};const x=this.get("viewModel.view.breakpoints");var K={};x&&(K.width=x.xsmall,K.height=x.xsmall);l={...z,...l};z={...z.breakpoint,...K};({breakpoint:K}=l);!0===K?l.breakpoint=z:"object"===typeof K&&(l.breakpoint={...z,...K});this._set("dockOptions",
l);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:l,visibleElements:z,headingLevel:x}=this,{selectedFeatureViewModel:K}=this.viewModel,U={...z,title:!1};if(!K)return null;l?(l.viewModel=K,l.visibleElements=U):this._feature=new q({headingLevel:x+1,viewModel:K,visibleElements:U});return this._feature}}]);return L}(r.FeatureContentMixin(f));n.__decorate([d.property({readOnly:!0})],m.prototype,"actionsMenuId",null);n.__decorate([d.property({readOnly:!0})],
m.prototype,"actionsMenuButtonId",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"featureMenuId",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"titleId",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"contentId",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"hasContent",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"featureNavigationVisible",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"collapsible",null);n.__decorate([d.property({readOnly:!0})],
m.prototype,"featureMenuVisible",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"contentCollapsed",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"dividedActions",null);n.__decorate([p.aliasOf("viewModel.actions")],m.prototype,"actions",void 0);n.__decorate([d.property()],m.prototype,"actionsMenuOpen",null);n.__decorate([d.property()],m.prototype,"alignment",void 0);n.__decorate([p.aliasOf("viewModel.autoCloseEnabled")],m.prototype,"autoCloseEnabled",void 0);n.__decorate([p.aliasOf("viewModel.autoOpenEnabled")],
m.prototype,"autoOpenEnabled",void 0);n.__decorate([p.aliasOf("viewModel.defaultPopupTemplateEnabled")],m.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([p.aliasOf("viewModel.content")],m.prototype,"content",void 0);n.__decorate([d.property()],m.prototype,"collapsed",void 0);n.__decorate([d.property()],m.prototype,"collapseEnabled",void 0);n.__decorate([d.property({readOnly:!0})],m.prototype,"currentAlignment",null);n.__decorate([d.property({readOnly:!0})],m.prototype,"currentDockPosition",
null);n.__decorate([d.property()],m.prototype,"dockOptions",null);n.__decorate([d.property()],m.prototype,"dockEnabled",void 0);n.__decorate([p.aliasOf("viewModel.featureCount")],m.prototype,"featureCount",void 0);n.__decorate([d.property()],m.prototype,"featureMenuOpen",void 0);n.__decorate([p.aliasOf("viewModel.features")],m.prototype,"features",void 0);n.__decorate([p.aliasOf("viewModel.goToOverride")],m.prototype,"goToOverride",void 0);n.__decorate([d.property()],m.prototype,"headingLevel",void 0);
n.__decorate([p.aliasOf("viewModel.highlightEnabled")],m.prototype,"highlightEnabled",void 0);n.__decorate([p.aliasOf("viewModel.location")],m.prototype,"location",void 0);n.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],m.prototype,"label",void 0);n.__decorate([d.property()],m.prototype,"maxInlineActions",void 0);n.__decorate([d.property(),u.messageBundle("esri/widgets/Popup/t9n/Popup")],m.prototype,"messages",void 0);n.__decorate([d.property(),u.messageBundle("esri/t9n/common")],
m.prototype,"messagesCommon",void 0);n.__decorate([p.aliasOf("viewModel.promises")],m.prototype,"promises",void 0);n.__decorate([p.aliasOf("viewModel.selectedFeature")],m.prototype,"selectedFeature",void 0);n.__decorate([p.aliasOf("viewModel.selectedFeatureIndex")],m.prototype,"selectedFeatureIndex",void 0);n.__decorate([d.property({readOnly:!0})],m.prototype,"selectedFeatureWidget",null);n.__decorate([d.property()],m.prototype,"spinnerEnabled",void 0);n.__decorate([p.aliasOf("viewModel.title")],
m.prototype,"title",void 0);n.__decorate([p.aliasOf("viewModel.updateLocationEnabled")],m.prototype,"updateLocationEnabled",void 0);n.__decorate([p.aliasOf("viewModel.view")],m.prototype,"view",void 0);n.__decorate([d.property({type:v}),C.vmEvent(["triggerAction","trigger-action"])],m.prototype,"viewModel",void 0);n.__decorate([p.aliasOf("viewModel.visible")],m.prototype,"visible",void 0);n.__decorate([d.property()],m.prototype,"visibleElements",void 0);n.__decorate([h.cast("visibleElements")],m.prototype,
"castVisibleElements",null);n.__decorate([w.accessibleHandler()],m.prototype,"_close",null);n.__decorate([w.accessibleHandler()],m.prototype,"_toggleDockEnabled",null);n.__decorate([w.accessibleHandler()],m.prototype,"_toggleFeatureMenu",null);n.__decorate([w.accessibleHandler()],m.prototype,"_toggleActionsMenu",null);n.__decorate([w.accessibleHandler()],m.prototype,"_triggerAction",null);n.__decorate([w.accessibleHandler()],m.prototype,"_selectFeature",null);n.__decorate([w.accessibleHandler()],
m.prototype,"_next",null);n.__decorate([w.accessibleHandler()],m.prototype,"_previous",null);return m=n.__decorate([e.subclass("esri.widgets.Popup")],m)})},"esri/core/throttle":function(){define(["exports"],function(g){g.throttle=function(n,m,k,t){let E=null,y=1E3;"number"===typeof m?(y=m,t=k):(E=null!=m?m:null,y=k);let H=0,G;const D=()=>{H=0;n.apply(t,G)};m=(...p)=>{E&&E.apply(t,p);G=p;y?H||(H=setTimeout(D,y)):D()};m.remove=()=>{H&&(clearTimeout(H),H=0)};m.forceUpdate=()=>{H&&(clearTimeout(H),D())};
m.hasPendingUpdates=()=>!!H;return m};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u){const C={title:!0,content:!0,lastEditedInfo:!0};k=function(J){function S(P,X){P=J.call(this,P,X)||this;P._contentWidgets=[];P.graphic=null;P.defaultPopupTemplateEnabled=!1;P.headingLevel=2;P.label=void 0;P.messages=null;P.messagesCommon=null;P.messagesURIUtils=null;P.spatialReference=null;P.title=null;P.visibleElements={...C};P.map=null;P.view=null;P.viewModel=new A;return P}n._inheritsLoose(S,J);var T=S.prototype;T.initialize=function(){this.own(t.watch(()=>
{var P;return null==(P=this.viewModel)?void 0:P.contentViewModels},()=>this._setupContentWidgets(),t.initial))};T.loadDependencies=function(){return new Promise((P,X)=>g(["../chunks/calcite-notice"],P,X))};T.destroy=function(){this._destroyContentWidgets()};T.castVisibleElements=function(P){return{...C,...P}};T.render=function(){var {state:P}=this.viewModel;P=w.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===P?this.renderError():"loading"===P?this.renderLoading():
this.renderContentContainer());return w.tsx("div",{class:this.classes("esri-feature","esri-widget")},P)};T.setActiveMedia=function(P,X){this.viewModel.setActiveMedia(P,X)};T.nextMedia=function(P){this.viewModel.nextMedia(P)};T.previousMedia=function(P){this.viewModel.previousMedia(P)};T.renderError=function(){const {messagesCommon:P,messages:X,visibleElements:Q}=this;return w.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},Q.title?w.tsx("div",{key:"error-title",
slot:"title"},P.errorMessage):null,w.tsx("div",{key:"error-message",slot:"message"},X.loadingError))};T.renderLoading=function(){return w.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},w.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};T.renderContentContainer=function(){const {visibleElements:P}=this;return P.content?w.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):
null};T.renderTitle=function(){const {visibleElements:P,title:X}=this;return P.title?w.tsx(r.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:X}):null};T.renderContent=function(){var P=this.viewModel.content;return P?Array.isArray(P)?P.length?w.tsx("div",{key:"content-content-elements"},P.map(this.renderContentElement,this)):null:"string"===typeof P?(P=this._contentWidgets[0],!P||P.destroyed?null:w.tsx("div",{key:"content-content"},P.render())):this.renderNodeContent(P):null};
T.renderContentElement=function(P,X){const {visibleElements:Q}=this;if("boolean"!==typeof Q.content&&!Q.content[P.type])return null;switch(P.type){case "attachments":return this.renderAttachments(X);case "custom":return this.renderCustom(P,X);case "fields":return this.renderFields(X);case "media":return this.renderMedia(X);case "text":return this.renderText(P,X);case "expression":return this.renderExpression(X);default:return null}};T.renderAttachments=function(P){const X=this._contentWidgets[P];
if(!X||X.destroyed)return null;const {state:Q,attachmentInfos:O}=X.viewModel;return"loading"===Q||0<O.length?w.tsx("div",{key:this._buildKey("attachments-element",P),class:this.classes("esri-feature__content-element")},X.render()):null};T.renderExpression=function(P){const X=this._contentWidgets[P];return!X||X.destroyed?null:w.tsx("div",{key:this._buildKey("expression-element",P),class:"esri-feature__content-element"},X.render())};T.renderCustom=function(P,X){({creator:P}=P);const Q=this._contentWidgets[X];
return!Q||Q.destroyed?null:P?w.tsx("div",{key:this._buildKey("custom-element",X),class:"esri-feature__content-element"},Q.render()):null};T.renderFields=function(P){const X=this._contentWidgets[P];return!X||X.destroyed?null:w.tsx("div",{key:this._buildKey("fields-element",P),class:"esri-feature__content-element"},X.render())};T.renderMedia=function(P){const X=this._contentWidgets[P];return!X||X.destroyed?null:w.tsx("div",{key:this._buildKey("media-element",P),class:"esri-feature__content-element"},
X.render())};T.renderLastEditInfo=function(){const {visibleElements:P,messages:X}=this;var {lastEditInfo:Q}=this.viewModel;if(!Q||!P.lastEditedInfo)return null;const {date:O,user:Z}=Q;Q=u.substitute("edit"===Q.type?Z?X.lastEditedByUser:X.lastEdited:Z?X.lastCreatedByUser:X.lastCreated,{date:O,user:Z});return w.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},Q)};T.renderText=function(P,X){const Q=this._contentWidgets[X];return!Q||
Q.destroyed?null:P.text?w.tsx("div",{key:this._buildKey("text-element",X),class:this.classes("esri-feature__content-element","esri-feature__text")},Q.render()):null};T._buildKey=function(P,...X){const Q=this.get("viewModel.graphic.uid")||"0";X=X.join("-");return`${P}__${Q}-${X}`};T._destroyContentWidget=function(P){P&&(P.viewModel=null,!P.destroyed&&P.destroy())};T._destroyContentWidgets=function(){this._contentWidgets.forEach(P=>this._destroyContentWidget(P));this._contentWidgets=[]};T._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:P,visibleElements:X}=this;var Q=this.get("viewModel.content");const {contentViewModels:O}=this.viewModel;Array.isArray(Q)?Q.forEach((Z,L)=>{"attachments"===Z.type&&(this._contentWidgets[L]=new a({displayType:Z.displayType,headingLevel:X.title?P+1:P,viewModel:O[L]}));"fields"===Z.type&&(this._contentWidgets[L]=new e({viewModel:O[L]}));"media"===Z.type&&(this._contentWidgets[L]=new q({viewModel:O[L]}));"text"===Z.type&&(this._contentWidgets[L]=
new h({viewModel:O[L]}));"custom"===Z.type&&(this._contentWidgets[L]=new h({viewModel:O[L]}));"expression"===Z.type&&(this._contentWidgets[L]=new d({viewModel:O[L]}))},this):(Q=O[0])&&!Q.destroyed&&(this._contentWidgets[0]=new h({viewModel:Q}));this.scheduleRender()};return S}(f.FeatureContentMixin(c));m.__decorate([E.aliasOf("viewModel.graphic")],k.prototype,"graphic",void 0);m.__decorate([E.aliasOf("viewModel.defaultPopupTemplateEnabled")],k.prototype,"defaultPopupTemplateEnabled",void 0);m.__decorate([D.property()],
k.prototype,"headingLevel",void 0);m.__decorate([D.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);m.__decorate([D.property(),B.messageBundle("esri/widgets/Feature/t9n/Feature")],k.prototype,"messages",void 0);m.__decorate([D.property(),B.messageBundle("esri/t9n/common")],k.prototype,"messagesCommon",void 0);m.__decorate([D.property(),B.messageBundle("esri/widgets/support/t9n/uriUtils")],k.prototype,"messagesURIUtils",void 0);m.__decorate([E.aliasOf("viewModel.spatialReference")],
k.prototype,"spatialReference",void 0);m.__decorate([E.aliasOf("viewModel.title")],k.prototype,"title",void 0);m.__decorate([D.property()],k.prototype,"visibleElements",void 0);m.__decorate([G.cast("visibleElements")],k.prototype,"castVisibleElements",null);m.__decorate([E.aliasOf("viewModel.map")],k.prototype,"map",void 0);m.__decorate([E.aliasOf("viewModel.view")],k.prototype,"view",void 0);m.__decorate([D.property({type:A})],k.prototype,"viewModel",void 0);return k=m.__decorate([p.subclass("esri.widgets.Feature")],
k)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){t=function(e){function q(f,r){f=e.call(this,f,r)||this;f._featureElementInfo=null;f.attachmentsWidget=new D;f.description=null;f.displayType=null;f.graphic=null;f.headingLevel=2;f.title=null;f.viewModel=new c;return f}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){this._featureElementInfo=new a;this.own([m.watch(()=>{var f,r;return[null==(f=this.viewModel)?void 0:f.description,null==(r=this.viewModel)?void 0:r.title,this.headingLevel]},()=>
this._setupFeatureElementInfo(),m.initial),m.watch(()=>{var f;return null==(f=this.viewModel)?void 0:f.graphic},f=>this.attachmentsWidget.graphic=f,m.initial)])};A.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};A.render=function(){var f;const {attachmentsWidget:r}=this;return d.tsx("div",{class:"esri-feature-attachments"},null==(f=this._featureElementInfo)?void 0:f.render(),null==r?void 0:r.render())};A._setupFeatureElementInfo=function(){const {description:f,
title:r,headingLevel:v}=this;this._featureElementInfo.set({description:f,title:r,headingLevel:v})};return q}(p);n.__decorate([H.property({readOnly:!0})],t.prototype,"attachmentsWidget",void 0);n.__decorate([k.aliasOf("viewModel.description")],t.prototype,"description",void 0);n.__decorate([k.aliasOf("attachmentsWidget.displayType")],t.prototype,"displayType",void 0);n.__decorate([k.aliasOf("viewModel.graphic")],t.prototype,"graphic",void 0);n.__decorate([H.property()],t.prototype,"headingLevel",void 0);
n.__decorate([k.aliasOf("viewModel.title")],t.prototype,"title",void 0);n.__decorate([H.property({type:c})],t.prototype,"viewModel",void 0);return t=n.__decorate([G.subclass("esri.widgets.Feature.FeatureAttachments")],t)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q){const A={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},f=window.CSS;y=function(r){function v(w,u){w=r.call(this,w,u)||this;w.abilities=null;w.displayType="auto";w.graphic=null;w.label=void 0;w.messages=null;w.messagesUnits=null;w.selectedFile=null;w.submitting=!1;w.viewModel=new a;w.visibleElements={...A};w._supportsImageOrientation=f&&f.supports&&f.supports("image-orientation",
"from-image");w._addAttachmentForm=null;w._updateAttachmentForm=null;return w}g._inheritsLoose(v,r);var B=v.prototype;B.initialize=function(){this.own([k.on(()=>{var w;return null==(w=this.viewModel)?void 0:w.attachmentInfos},"change",()=>this.scheduleRender()),k.watch(()=>{var w;return null==(w=this.viewModel)?void 0:w.mode},()=>this._modeChanged(),k.initial)])};B.castVisibleElements=function(w){return{...A,...w}};B.addAttachment=function(){const {_addAttachmentForm:w,viewModel:u}=this;this._set("submitting",
!0);this._set("error",null);return u.addAttachment(w).then(C=>{this._set("submitting",!1);this._set("error",null);u.mode="view";return C}).catch(C=>{this._set("submitting",!1);this._set("error",new m("attachments:add-attachment",this.messages.addErrorMessage,C));throw C;})};B.deleteAttachment=function(w){const {viewModel:u}=this;this._set("submitting",!0);this._set("error",null);return u.deleteAttachment(w).then(C=>{this._set("submitting",!1);this._set("error",null);u.mode="view";return C}).catch(C=>
{this._set("submitting",!1);this._set("error",new m("attachments:delete-attachment",this.messages.deleteErrorMessage,C));throw C;})};B.updateAttachment=function(){const {viewModel:w}=this,{_updateAttachmentForm:u}=this;this._set("submitting",!0);this._set("error",null);return w.updateAttachment(u).then(C=>{this._set("submitting",!1);this._set("error",null);w.mode="view";return C}).catch(C=>{this._set("submitting",!1);this._set("error",new m("attachments:update-attachment",this.messages.updateErrorMessage,
C));throw C;})};B.render=function(){const {submitting:w,viewModel:u}=this,{state:C}=u;return q.tsx("div",{class:this.classes("esri-attachments","esri-widget")},w?this.renderProgressBar():null,"loading"===C?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};B.renderErrorMessage=function(){const {error:w,visibleElements:u}=this;return w&&u.errorMessage?q.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},w.message):null};B.renderAttachments=function(){const {mode:w,
activeAttachmentInfo:u}=this.viewModel;return"add"===w?this.renderAddForm():"edit"===w?this.renderDetailsForm(u):this.renderAttachmentContainer()};B.renderLoading=function(){return q.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},q.tsx("div",{class:"esri-attachments__loader"}))};B.renderProgressBar=function(){return this.visibleElements.progressBar?q.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};B.renderAddForm=function(){const {submitting:w,selectedFile:u}=
this;var C=w||!u,J=this.visibleElements.cancelAddButton?q.tsx("button",{type:"button",bind:this,disabled:w,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",w&&"esri-button--disabled")},this.messages.cancel):null;C=this.visibleElements.addSubmitButton?q.tsx("button",{type:"submit",disabled:C,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:C})},this.messages.add):
null;const S=u?q.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},u.name):null;J=q.tsx("form",{bind:this,afterCreate:d.storeNode,afterRemoved:d.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},q.tsx("fieldset",{class:"esri-attachments__file-fieldset"},S,q.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},u?this.messages.changeFile:this.messages.selectFile,q.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),C,J);return q.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},J)};B.renderDetailsForm=function(w){const {visibleElements:u,viewModel:C,selectedFile:J,submitting:S}=this,{contentType:T,size:P,url:X}=w;var {abilities:Q}=C,O=S||!J,Z=Q.editing&&Q.operations.delete&&u.deleteButton?q.tsx("button",{key:"delete-button",type:"button",disabled:S,bind:this,onclick:z=>this._submitDeleteAttachment(z,w),class:this.classes("esri-button",
"esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:S})},this.messages.delete):null;O=Q.editing&&Q.operations.update&&u.updateButton?q.tsx("button",{disabled:O,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:O})},this.messages.update):null;const L=this.visibleElements.cancelUpdateButton?q.tsx("button",{disabled:S,key:"cancel-button",type:"button",bind:this,
onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:S})},this.messages.cancel):null;var I=J?q.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},J.name):null;Q=Q.editing&&Q.operations.update?q.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},I,q.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,
q.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null;I=q.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},q.tsx("label",null,t.formatFileSize(this.messagesUnits,P)));const l=q.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},q.tsx("label",null,T));Z=q.tsx("form",{bind:this,afterCreate:d.storeNode,afterRemoved:d.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:this._submitUpdateAttachment},q.tsx("div",{class:"esri-attachments__metadata"},I,l),Q,q.tsx("div",{class:"esri-attachments__actions"},Z,L,O));return q.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},q.tsx("a",{class:"esri-attachments__item-link",href:X,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:w,size:400}),q.tsx("div",{class:"esri-attachments__item-link-overlay"},q.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},q.tsx("svg",
{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},q.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),q.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),Z)};B.renderImageMask=function({attachmentInfo:w,size:u}){var {supportsResizeAttachments:C}=this.viewModel;const {contentType:J,name:S,url:T}=w,P=C&&h.isSupportedImage(J);w=(w=this._getCSSTransform(w,P))?{transform:w,"image-orientation":"none"}:{};const X=T.includes("?")?
"\x26":"?";u=P?`${T}${X}w=${u}`:h.getIconPath(J);C={["esri-attachments__image--resizable"]:C};return q.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!P},"esri-attachments__item-mask")},q.tsx("img",{styles:w,alt:S,src:u,class:this.classes(C,"esri-attachments__image")}))};B.renderAttachmentInfo=function({attachmentInfo:w,displayType:u}){var {viewModel:C}=this;({abilities:C}=C);const {name:J,url:S}=w;u=this.renderImageMask({attachmentInfo:w,size:"list"===u?48:400});var T=C.editing?
q.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",d.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;T=q.tsx("label",{class:"esri-attachments__label"},q.tsx("span",{class:"esri-attachments__filename"},J||this.messages.noTitle),T);u=[u,T];C=C.editing?q.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":w.id,
onclick:()=>this._startEditAttachment(w),type:"button"},u):q.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:S,target:"_blank"},u);return q.tsx("li",{class:"esri-attachments__item",key:w},C)};B.renderAttachmentContainer=function(){const {effectiveDisplayType:w,viewModel:u,visibleElements:C}=this,{attachmentInfos:J,abilities:S}=u;var T=J&&J.length;const P={["esri-attachments__container--list"]:"preview"!==w,["esri-attachments__container--preview"]:"preview"===w},X=S.editing&&
S.operations.add&&C.addButton?q.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},q.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;T=T?q.tsx("ul",{class:"esri-attachments__items"},J.toArray().map(Q=>this.renderAttachmentInfo({attachmentInfo:Q,displayType:w}))):q.tsx("div",{class:"esri-widget__content--empty"},
this.messages.noAttachments);return q.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",P)},T,X)};B._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};B._handleFileInputChange=function(w){w=(w=w.target)&&w.files&&w.files.item(0);this._set("selectedFile",w)};B._submitDeleteAttachment=function(w,u){w.preventDefault();this.deleteAttachment(u)};B._submitAddAttachment=function(w){w.preventDefault();this.addAttachment()};B._submitUpdateAttachment=
function(w){w.preventDefault();this.updateAttachment()};B._startEditAttachment=function(w){const {viewModel:u}=this;u.activeAttachmentInfo=w;u.mode="edit"};B._startAddAttachment=function(){this.viewModel.mode="add"};B._cancelForm=function(w){w.preventDefault();this.viewModel.mode="view"};B._getCSSTransform=function(w,u){({orientationInfo:w}=w);return!this._supportsImageOrientation&&u&&w?[w.rotation?`rotate(${w.rotation}deg)`:"",w.mirrored?"scaleX(-1)":""].join(" "):""};g._createClass(v,[{key:"effectiveDisplayType",
get:function(){const {displayType:w}=this;return w&&"auto"!==w?w:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return v}(c);n.__decorate([E.aliasOf("viewModel.abilities")],y.prototype,"abilities",void 0);n.__decorate([D.property()],y.prototype,"displayType",void 0);n.__decorate([D.property({readOnly:!0})],y.prototype,"effectiveDisplayType",null);n.__decorate([E.aliasOf("viewModel.graphic")],y.prototype,"graphic",void 0);n.__decorate([D.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],y.prototype,"label",void 0);n.__decorate([D.property(),e.messageBundle("esri/widgets/Attachments/t9n/Attachments")],y.prototype,"messages",void 0);n.__decorate([D.property(),e.messageBundle("esri/core/t9n/Units")],y.prototype,"messagesUnits",void 0);n.__decorate([D.property({readOnly:!0})],y.prototype,"selectedFile",void 0);n.__decorate([D.property({readOnly:!0})],y.prototype,"submitting",void 0);n.__decorate([D.property({readOnly:!0})],y.prototype,"error",void 0);n.__decorate([D.property({type:a})],
y.prototype,"viewModel",void 0);n.__decorate([D.property()],y.prototype,"visibleElements",void 0);n.__decorate([G.cast("visibleElements")],y.prototype,"castVisibleElements",null);return y=n.__decorate([p.subclass("esri.widgets.Attachments")],y)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(g,n,m,k,t,E,y,H){function G(h,d,e){return h.units[d][e]}function D(h,d,e,q=2,A="abbr"){return`${H.formatNumber(d,
{minimumFractionDigits:q,maximumFractionDigits:q})} ${G(h,e,A)}`}function p(h,d,e,q=2,A="abbr"){return`${H.formatNumber(d,{minimumFractionDigits:q,maximumFractionDigits:q,signDisplay:"exceptZero"})} ${G(h,e,A)}`}function c(h,d,e){if(d===e)return h;switch(e){case "arithmetic":return-h+90;case "geographic":return-h-90}}const a=["B","kB","MB","GB","TB"];g.formatAngleDegrees=function(h,d,e,q,A){h=m.cyclicalDegrees.normalize(c(y.convertUnit(h,d,"degrees"),e,q),0,!0);A=t.unwrapOr(A,2);return H.formatNumber(h,
{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:A,minimumFractionDigits:A})};g.formatDMS=function(h,d,e=2){h=y.convertUnit(h,d,"degrees");d=h-Math.floor(h);h-=d;d*=60;let q=d-Math.floor(d);d-=q;q*=60;return`${h.toFixed()}\u00b0 ${d.toFixed()}' ${q.toFixed(e)}"`};g.formatDecimal=D;g.formatFileSize=function(h,d){let e=0===d?0:Math.floor(Math.log(d)/Math.log(n.ByteSizeUnit.KILOBYTES));e=k.clamp(e,0,a.length-1);d=H.formatNumber(d/n.ByteSizeUnit.KILOBYTES**e,{maximumFractionDigits:2});
return E.replace(h.units.bytes[a[e]],{fileSize:d})};g.formatImperialArea=function(h,d,e,q=2,A="abbr"){const f=y.preferredImperialAreaUnit(d,e);return D(h,y.convertUnit(d,e,f),f,q,A)};g.formatImperialLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredImperialLengthUnit(d,e);return D(h,y.convertUnit(d,e,f),f,q,A)};g.formatImperialRelativeLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredImperialLengthUnit(d,e);return p(h,y.convertUnit(d,e,f),f,q,A)};g.formatImperialRelativeVerticalLength=function(h,
d,e,q=2,A="abbr"){const f=y.preferredImperialVerticalLengthUnit(d,e);return p(h,y.convertUnit(d,e,f),f,q,A)};g.formatImperialVerticalLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredImperialVerticalLengthUnit(d,e);return D(h,y.convertUnit(d,e,f),f,q,A)};g.formatMetricArea=function(h,d,e,q=2,A="abbr"){const f=y.preferredMetricAreaUnit(d,e);return D(h,y.convertUnit(d,e,f),f,q,A)};g.formatMetricLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredMetricLengthUnit(d,e);return D(h,y.convertUnit(d,
e,f),f,q,A)};g.formatMetricRelativeLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredMetricLengthUnit(d,e);return p(h,y.convertUnit(d,e,f),f,q,A)};g.formatMetricRelativeVerticalLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredMetricVerticalLengthUnit(d,e);return p(h,y.convertUnit(d,e,f),f,q,A)};g.formatMetricVerticalLength=function(h,d,e,q=2,A="abbr"){const f=y.preferredMetricVerticalLengthUnit(d,e);return D(h,y.convertUnit(d,e,f),f,q,A)};g.formatRelativeAngleDegrees=function(h,d,e,q,A){e!==
q&&(h=-h);h=y.convertUnit(h,d,"degrees")%360;A=t.unwrapOr(A,2);return H.formatNumber(h,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:A,minimumFractionDigits:A,signDisplay:"exceptZero"})};g.formatRelativeDecimal=p;g.unitName=G;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(g){function n(m){return 32+m.length}g.ByteSizeUnit=void 0;(function(m){m[m.KILOBYTES=1024]=
"KILOBYTES";m[m.MEGABYTES=1048576]="MEGABYTES";m[m.GIGABYTES=1073741824]="GIGABYTES"})(g.ByteSizeUnit||(g.ByteSizeUnit={}));g.estimateAttributesObjectSize=function(m){if(!m)return 0;let k=32;for(const t in m)if(m.hasOwnProperty(t)){const E=m[t];switch(typeof E){case "string":k+=n(E);break;case "number":k+=16;break;case "boolean":k+=4}}return k};g.estimateFixedArraySize=function(m,k){return 32+m.length*k};g.estimateNumberByteSize=function(){return 16};g.estimateStringByteSize=n;Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e){const q={editing:!1,operations:{add:!0,update:!0,delete:!0}},A=t.ofType(h);k=function(f){function r(B){var w=f.call(this,B)||this;w._getAttachmentsPromise=null;w._attachmentLayer=null;w.abilities={...q};w.activeAttachmentInfo=null;w.attachmentInfos=new A;w.graphic=null;w.mode="view";w.own(H.watch(()=>w.graphic,()=>w._graphicChanged(),H.initial));return w}g._inheritsLoose(r,f);var v=r.prototype;v.destroy=function(){this.graphic=this._attachmentLayer=null};
v.castAbilities=function(B){return{...q,...B}};v.getAttachments=function(){var B=g._asyncToGenerator(function*(){const {_attachmentLayer:w,attachmentInfos:u}=this;if(!w||"function"!==typeof w.queryAttachments)throw new E("invalid-layer","getAttachments(): A valid layer is required.");const C=this._getFeatureId();var J=new d({objectIds:[C],returnMetadata:!0});const S=[];this._getAttachmentsPromise=J=w.queryAttachments(J).then(T=>T[C]||S).catch(()=>S);this.notifyChange("state");J=yield J;u.removeAll();
J.length&&u.addMany(J);this._getAttachmentsPromise=null;this.notifyChange("state");return J});return function(){return B.apply(this,arguments)}}();v.addAttachment=function(){var B=g._asyncToGenerator(function*(w){const {_attachmentLayer:u,attachmentInfos:C,graphic:J,abilities:S}=this;if(!w)throw new E("invalid-attachment","addAttachment(): An attachment is required.",{attachment:w});if(!S.operations.add)throw new E("invalid-abilities","addAttachment(): add abilities are required.");if(!u||"function"!==
typeof u.addAttachment)throw new E("invalid-layer","addAttachment(): A valid layer is required.");w=yield u.addAttachment(J,w).then(T=>this._queryAttachment(T.objectId));C.add(w);return w});return function(w){return B.apply(this,arguments)}}();v.deleteAttachment=function(){var B=g._asyncToGenerator(function*(w){const {_attachmentLayer:u,attachmentInfos:C,graphic:J,abilities:S}=this;if(!w)throw new E("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:w});
if(!S.operations.delete)throw new E("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!u||"function"!==typeof u.deleteAttachments)throw new E("invalid-layer","deleteAttachment(): A valid layer is required.");const T=yield u.deleteAttachments(J,[w.id]).then(()=>w);C.remove(T);return T});return function(w){return B.apply(this,arguments)}}();v.updateAttachment=function(){var B=g._asyncToGenerator(function*(w,u=this.activeAttachmentInfo){const {_attachmentLayer:C,attachmentInfos:J,
graphic:S,abilities:T}=this;if(!w)throw new E("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:w});if(!u)throw new E("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:u});if(!T.operations.update)throw new E("invalid-abilities","updateAttachment(): Update abilities are required.");const P=J.findIndex(X=>X===u);if(!C||"function"!==typeof C.updateAttachment)throw new E("invalid-layer","updateAttachment(): A valid layer is required.");
w=yield C.updateAttachment(S,u.id,w).then(X=>this._queryAttachment(X.objectId));J.splice(P,1,w);return w});return function(w){return B.apply(this,arguments)}}();v._queryAttachment=function(){var B=g._asyncToGenerator(function*(w){if(!w)throw new E("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:u}=this,C=this._getFeatureId();w=new d({objectIds:[C],attachmentsWhere:`AttachmentId=${w}`,returnMetadata:!0});return u.queryAttachments(w).then(J=>J[C][0])});return function(w){return B.apply(this,
arguments)}}();v._getFeatureId=function(){const {_attachmentLayer:B,graphic:w}=this;if(!B||!w)return null;const {objectIdField:u}=B,{attributes:C}=w;return C&&C[u]};v._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};v._setAttachmentLayer=function(){var {graphic:B}=this;this._attachmentLayer=(B=e.getSourceLayer(B))?"scene"===B.type&&y.isSome(B.associatedLayer)?B.associatedLayer:B:null};g._createClass(r,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return r}(k);n.__decorate([G.property()],k.prototype,"abilities",void 0);n.__decorate([c.cast("abilities")],k.prototype,"castAbilities",null);n.__decorate([G.property()],k.prototype,"activeAttachmentInfo",void 0);n.__decorate([G.property({readOnly:!0,type:A})],k.prototype,"attachmentInfos",void 0);n.__decorate([G.property({type:m})],
k.prototype,"graphic",void 0);n.__decorate([G.property()],k.prototype,"mode",void 0);n.__decorate([G.property({readOnly:!0})],k.prototype,"state",null);n.__decorate([G.property({readOnly:!0})],k.prototype,"supportsResizeAttachments",null);return k=n.__decorate([a.subclass("esri.widgets.Attachments.AttachmentsViewModel")],k)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p){function c(){c=n._asyncToGenerator(function*(M,V){return"function"===typeof M?M.call(null,V):M});return c.apply(this,arguments)}function a(M){return M?U.test(M):!1}function h(M,V){if(!a(V)||!M)return null;const ca=V.replace(U,"").toLowerCase();let ia;M.some(ka=>ka.name.toLowerCase()===ca?(ia=ka,!0):!1);return ia}function d(M,V){return(V=e(V,M))?V.name:M}function e(M,V){return M&&"function"===typeof M.getField?M.getField(V):null}function q({formattedAttributes:M,template:V,
fieldInfoMap:ca}){return`${E.replace(E.replace(V,ia=>{{const ka=ca.get(ia.toLowerCase());ia=`{${ka&&ka.fieldName||ia}}`}return ia}),M).replace(z,"")}`.trim()}function A(M,V,ca=!1){const ia=V[M];"string"===typeof ia&&(ca=(ca?encodeURIComponent(ia):ia).replace(K,"%27"),V[M]=ca)}function f(M,V=!1){const ca={...M};Object.keys(ca).forEach(ia=>A(ia,ca,V));return ca}function r(M,V){return M.replace(x,(ca,ia,ka)=>(ca=e(V,ka))?`{${ca.name}}`:ia)}function v(M,V,ca){return(M=r(M,ca))?M.replace(na,(ia,ka,ra)=>
{ka=`${ka||ra}`.trim();return E.replace(ia,f(V,ka&&"{"!==ka[0]))}):M}function B(M,V){var ca=V.fieldName,ia=w(V.fieldInfos,ca),ka=null==ia?void 0:ia.clone();ia=V.preventPlacesFormatting;V=V.layer;var ra=e(V,ca);if(ka&&"date"===(null==ra?void 0:ra.type)){ra=ka.format||new D;ra.dateFormat=ra.dateFormat||"short-date-short-time";var va;if(!(va=!(null!=V&&V.layer)&&"feature"===(null==V?void 0:V.type)&&V.datesInUnknownTimezone)){if(va=!(null==V||!V.layer))va=V.layer,va="map-image"===(null==va?void 0:va.type);
va=va&&V.layer.datesInUnknownTimezone}ra.dateTimeFormatOptions=va?{timeZone:"UTC"}:null;ka.format=ra}ka=ka&&ka.format;if("string"===typeof M&&G.isRasterPixelValueField(ca)&&ka)return ka.formatRasterPixelValue(M);"string"!==typeof M||!ka||null!=ka.dateFormat||null==ka.places&&null==ka.digitSeparator||(ca=Number(M),isNaN(ca)||(M=ca));return"string"===typeof M||null==M||null==ka?J(M):ia?H.formatNumber(M,{...H.convertNumberFormatToIntlOptions(ka),minimumFractionDigits:0,maximumFractionDigits:20}):ka.format(M)}
function w(M,V){if(M&&M.length&&V){var ca=V.toLowerCase(),ia=void 0;M.some(ka=>ka.fieldName&&ka.fieldName.toLowerCase()===ca?(ia=ka,!0):!1);return ia}}function u({fieldName:M,graphic:V,layer:ca}){if(Z(M)||!ca||"function"!==typeof ca.getFeatureType)return null;const {typeIdField:ia}=ca;return ia&&M===ia?(M=ca.getFeatureType(V))?M.name:null:null}function C({fieldName:M,value:V,graphic:ca,layer:ia}){return Z(M)||!ia||"function"!==typeof ia.getFieldDomain?null:(M=ia.getFieldDomain(M,{feature:ca}))&&"coded-value"===
M.type?M.getName(V):null}function J(M){return"string"===typeof M?M.replace(ba,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):M}function S(M){const {value:V,fieldName:ca,fieldInfos:ia,fieldInfoMap:ka,layer:ra,graphic:va}=M;return null==V?"":(M=C({fieldName:ca,value:V,graphic:va,layer:ra}))||(M=u({fieldName:ca,graphic:va,layer:ra}))?M:ka.get(ca.toLowerCase())?B(V,{fieldInfos:ia||Array.from(ka.values()),fieldName:ca,layer:ra}):(M=ra&&ra.fieldsIndex)&&M.isDateField(ca)?y.formatDate(V,la):J(V)}function T(M,
V){return P.apply(this,arguments)}function P(){P=n._asyncToGenerator(function*(M,V){var ca,ia;const {layer:ka,graphic:ra,outFields:va,objectIds:Ba,returnGeometry:Da,spatialReference:Ga}=M;M=Ba[0];if("number"!==typeof M&&"string"!==typeof M)return l.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ka,graphic:ra,objectId:M,requiredFields:va}),null;if(null==(ca=ka.capabilities)||null==(ia=ca.operations)||!ia.supportsQuery)return l.warn("The specified layer cannot be queried. The following fields will not be available.",
{layer:ka,graphic:ra,requiredFields:va,returnGeometry:Da}),null;ca=ka.createQuery();ca.objectIds=Ba;ca.outFields=null!=va&&va.length?va:[ka.objectIdField];ca.returnGeometry=!!Da;ca.returnZ=!!Da;ca.returnM=!!Da;ca.outSpatialReference=Ga;return(yield ka.queryFeatures(ca,V)).features[0]});return P.apply(this,arguments)}function X(M){return Q.apply(this,arguments)}function Q(){Q=n._asyncToGenerator(function*(M){var V;if(null==(V=M.expressionInfos)||!V.length)return!1;V=yield p.loadArcade();({arcadeUtils:{hasGeometryFunctions:V}}=
V);return V(M)});return Q.apply(this,arguments)}function O(){O=n._asyncToGenerator(function*({graphic:M,popupTemplate:V,layer:ca,spatialReference:ia},ka){if(ca&&V&&("function"===typeof ca.load&&(yield ca.load(ka)),M.attributes)){var ra=M.attributes[ca.objectIdField];if(null!=ra){ra=[ra];var va=yield V.getRequiredFields(ca.fieldsIndex),Ba=G.featureHasFields(va,M);va=Ba?[]:va;V=V.returnGeometry||(yield X(V));if(!Ba||V)if(ca=yield T({layer:ca,graphic:M,outFields:va,objectIds:ra,returnGeometry:V,spatialReference:ia},
ka))ca.geometry&&(M.geometry=ca.geometry),ca.attributes&&(M.attributes={...M.attributes,...ca.attributes})}}});return O.apply(this,arguments)}function Z(M=""){return M?M.includes("relationships/"):!1}function L({attributes:M,graphic:V,relatedInfo:ca,fieldInfos:ia,fieldInfoMap:ka,layer:ra}){M&&V&&ca&&Object.keys(V.attributes).forEach(va=>{var Ba=(Ba={layerId:ca.relation.id.toString(),fieldName:va},`${"relationships/"}${Ba.layerId}/${Ba.fieldName}`);M[Ba]=S({fieldName:Ba,fieldInfos:ia,fieldInfoMap:ka,
layer:ra,value:V.attributes[va],graphic:V})})}function I({attributes:M,relatedInfo:V,fieldInfoMap:ca,fieldInfos:ia,layer:ka}){M&&V&&(V.relatedFeatures&&V.relatedFeatures&&V.relatedFeatures.forEach(ra=>L({attributes:M,graphic:ra,relatedInfo:V,fieldInfoMap:ca,fieldInfos:ia,layer:ka})),V.relatedStatsFeatures&&V.relatedStatsFeatures&&V.relatedStatsFeatures.forEach(ra=>L({attributes:M,graphic:ra,relatedInfo:V,fieldInfoMap:ca,fieldInfos:ia,layer:ka})))}const l=k.getLogger("esri.widgets.Feature.support.featureUtils"),
z=/href=(""|'')/gi,x=/(\{([^\{\r\n]+)\})/g,K=/'/g,U=/^\s*expression\//i,ba=/(\n)/gi,ea=/[\u00A0-\u9999<>&]/gim,na=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ha=/^(?:mailto:|tel:)/,la=y.convertDateFormatToIntlOptions("short-date-short-time"),pa=M=>{if(!M)return!1;M=M.toUpperCase();return M.includes("CURRENT_TIMESTAMP")||M.includes("CURRENT_DATE")||M.includes("CURRENT_TIME")},qa=({layer:M,method:V,query:ca,definitionExpression:ia})=>{var ka,ra;null!=(ka=M.capabilities)&&null!=(ra=ka.query)&&ra.supportsCacheHint&&
"attachments"!==V&&(M=t.isSome(ca.where)&&ca.where,V=t.isSome(ca.geometry)&&ca.geometry,pa(ia)||pa(M)||"extent"===(null==V?void 0:V.type)||"tile"===ca.resultType||(ca.cacheHint=!0))};g.applyTextFormattingHTML=J;g.createfieldInfoMap=function(M,V){const ca=new Map;M&&M.forEach(ia=>{const ka=d(ia.fieldName,V);ia.fieldName=ka;ca.set(ka.toLowerCase(),ia)});return ca};g.fixTokens=r;g.formatAttributes=function({fieldInfos:M,attributes:V,layer:ca,graphic:ia,fieldInfoMap:ka,relatedInfos:ra}){const va={};null==
ra?void 0:ra.forEach(Ba=>I({attributes:va,relatedInfo:Ba,fieldInfoMap:ka,fieldInfos:M,layer:ca}));Object.keys(V).forEach(Ba=>{va[Ba]=S({fieldName:Ba,fieldInfos:M,fieldInfoMap:ka,layer:ca,value:V[Ba],graphic:ia})});return va};g.formatEditInfo=function(M,V){const {creatorField:ca,creationDateField:ia,editorField:ka,editDateField:ra}=M;if(V){M=V[ra];if("number"===typeof M)return V=V[ka],{type:"edit",date:y.formatDate(M,la),user:V};M=V[ia];return"number"===typeof M?(V=V[ca],{type:"create",date:y.formatDate(M,
la),user:V}):null}};g.formatValueToFieldInfo=B;g.getAllFieldInfos=function(M){const V=[];if(!M)return V;const {fieldInfos:ca,content:ia}=M;ca&&V.push(...ca);if(!ia||!Array.isArray(ia))return V;ia.forEach(ka=>{"fields"===ka.type&&(ka=ka&&ka.fieldInfos)&&V.push(...ka)});return V};g.getFieldInfo=w;g.getFieldInfoLabel=function(M,V){return(V=h(V,null==M?void 0:M.fieldName))?V.title||null:M?M.label||M.fieldName:null};g.getFixedFieldName=d;g.getFixedFieldNames=function(M,V){return M&&M.map(ca=>d(ca,V))};
g.getSourceLayer=function(M){if(!t.isNone(M))return M.get("sourceLayer")||M.get("layer")};g.graphicCallback=function(M,V){return c.apply(this,arguments)};g.htmlEntities=function(M){return M.replace(ea,V=>`&#${V.charCodeAt(0)};`)};g.isExpressionField=a;g.isRelatedField=Z;g.preLayerQueryCallback=({query:M,layer:V,method:ca})=>{qa({layer:V,method:ca,query:M,definitionExpression:`${V.definitionExpression} ${V.serviceDefinitionExpression}`})};g.preRequestCallback=({queryPayload:M,layer:V,method:ca})=>
{qa({layer:V,method:ca,query:M,definitionExpression:`${V.definitionExpression} ${V.serviceDefinitionExpression}`})};g.queryUpdatedFeature=function(M,V){return O.apply(this,arguments)};g.shouldOpenInNewTab=function(M=""){if(M)return!ha.test(M.trim().toLowerCase())};g.substituteAttributes=q;g.substituteFieldsInLinksAndAttributes=function({attributes:M,globalAttributes:V,layer:ca,text:ia,expressionAttributes:ka,fieldInfoMap:ra}){return ia?q({formattedAttributes:V,template:v(ia,{...V,...ka,...M},ca),
fieldInfoMap:ra}):""};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(g,n){g.getIconPath=function(m){const k=n.getAssetUrl("esri/themes/base/images/files/");return m?"text/plain"===m?`${k}text-32.svg`:"application/pdf"===m?`${k}pdf-32.svg`:"text/csv"===m?`${k}csv-32.svg`:"application/gpx+xml"===m?`${k}gpx-32.svg`:"application/x-dwf"===m?`${k}cad-32.svg`:
"application/postscript"===m||"application/json"===m||"text/xml"===m||"model/vrml"===m?`${k}code-32.svg`:"application/x-zip-compressed"===m||"application/x-7z-compressed"===m||"application/x-gzip"===m||"application/x-tar"===m||"application/x-gtar"===m||"application/x-bzip2"===m||"application/gzip"===m||"application/x-compress"===m||"application/x-apple-diskimage"===m||"application/x-rar-compressed"===m||"application/zip"===m?`${k}zip-32.svg`:m.includes("image/")?`${k}image-32.svg`:m.includes("audio/")?
`${k}sound-32.svg`:m.includes("video/")?`${k}video-32.svg`:m.includes("msexcel")||m.includes("ms-excel")||m.includes("spreadsheetml")?`${k}excel-32.svg`:m.includes("msword")||m.includes("ms-word")||m.includes("wordprocessingml")?`${k}word-32.svg`:m.includes("powerpoint")||m.includes("presentationml")?`${k}report-32.svg`:`${k}generic-32.svg`:`${k}generic-32.svg`};g.isSupportedImage=function(m){m=m.toLowerCase();return"image/bmp"===m||"image/emf"===m||"image/exif"===m||"image/gif"===m||"image/x-icon"===
m||"image/jpeg"===m||"image/png"===m||"image/tiff"===m||"image/x-wmf"===m};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(g,n,m,k,t,E,y,H){k=function(G){function D(p){p=G.call(this,p)||this;p.description=null;p.title=null;return p}g._inheritsLoose(D,G);return D}(H);n.__decorate([m.property()],k.prototype,"description",void 0);n.__decorate([m.property()],k.prototype,"title",void 0);return k=n.__decorate([y.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],k)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p){k=function(c){function a(d,e){d=c.call(this,d,e)||this;d.description=null;d.headingLevel=2;d.title=null;return d}g._inheritsLoose(a,c);var h=a.prototype;h.render=function(){return p.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};h.renderTitle=function(){const {title:d}=this;return d?p.tsx(G.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},d):null};h.renderDescription=function(){const {description:d}=
this;return d?p.tsx("div",{key:"description",class:"esri-feature-element-info__description"},d):null};return a}(H);n.__decorate([m.property()],k.prototype,"description",void 0);n.__decorate([m.property()],k.prototype,"headingLevel",void 0);n.__decorate([m.property()],k.prototype,"title",void 0);return k=n.__decorate([y.subclass("esri.widgets.Feature.support.FeatureElementInfo")],k)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(g,n,m,k){const t={heading:"esri-widget__heading"};g.CSS=t;g.Heading=function(E,y){const H=n.clamp(Math.ceil(E.level),1,6),G=`h${H}`;delete E.level;return k.tsx(G,{...E,class:m.classes(t.heading,E.class),role:"heading","aria-level":String(H)},y)};g.incrementHeadingLevel=function(E,y=1){return n.clamp(Math.ceil(E+y),1,6)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a){k=function(h){function d(q,A){q=h.call(this,q,A)||this;q.creator=null;q.graphic=null;q.viewModel=null;q._addTargetToAnchors=f=>{Array.from(f.querySelectorAll("a")).forEach(r=>{p.shouldOpenInNewTab(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})};return q}g._inheritsLoose(d,h);var e=d.prototype;e.renderLoading=function(){return a.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},a.tsx("div",{class:"esri-feature-content__loader"}))};
e.renderCreated=function(){var q;const A=null==(q=this.viewModel)?void 0:q.created;return A?A instanceof HTMLElement?a.tsx("div",{key:A,bind:A,afterCreate:this._attachToNode}):c.isWidget(A)?a.tsx("div",{key:A},!A.destroyed&&A.render()):a.tsx("div",{key:A,innerHTML:A,afterCreate:this._addTargetToAnchors}):null};e.render=function(){var q;const A=null==(q=this.viewModel)?void 0:q.state;return a.tsx("div",{class:"esri-feature-content"},"loading"===A?this.renderLoading():this.renderCreated())};e._attachToNode=
function(q){q.appendChild(this)};return d}(G);n.__decorate([m.aliasOf("viewModel.creator")],k.prototype,"creator",void 0);n.__decorate([m.aliasOf("viewModel.graphic")],k.prototype,"graphic",void 0);n.__decorate([y.property({type:D})],k.prototype,"viewModel",void 0);return k=n.__decorate([H.subclass("esri.widgets.Feature.FeatureContent")],k)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c){k=function(a){function h(e){var q=a.call(this,e)||this;q._loadingPromise=null;q.created=null;q.creator=null;q.destroyer=null;q.graphic=null;q.handles.add(E.watch(()=>q.creator,A=>{q._destroyContent();q._createContent(A)},E.initial));return q}g._inheritsLoose(h,a);var d=h.prototype;d.destroy=function(){this._destroyContent()};d._destroyContent=function(){const {created:e,graphic:q,destroyer:A}=this;e&&(c.graphicCallback(A,{graphic:q}).catch(()=>null),this._set("created",
null))};d._createContent=function(){var e=g._asyncToGenerator(function*(q){var {graphic:A}=this;this._loadingPromise=q=c.graphicCallback(q,{graphic:A}).catch(()=>null);this.notifyChange("state");A=yield q;q===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",A))});return function(q){return e.apply(this,arguments)}}();g._createClass(h,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return h}(t.HandleOwnerMixin(k));n.__decorate([y.property({readOnly:!0})],
k.prototype,"created",void 0);n.__decorate([y.property()],k.prototype,"creator",void 0);n.__decorate([y.property()],k.prototype,"destroyer",void 0);n.__decorate([y.property({type:m})],k.prototype,"graphic",void 0);n.__decorate([y.property({readOnly:!0})],k.prototype,"state",null);return k=n.__decorate([p.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],k)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){t=function(e){function q(f,r){f=e.call(this,f,r)||this;f.viewModel=new a;return f}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){this.own(m.watch(()=>{var f;return null==(f=this.viewModel)?void 0:f.contentElementViewModel},()=>this._setupExpressionWidget(),m.initial))};A.destroy=function(){this._destroyContentWidget()};A.renderLoading=function(){return d.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},d.tsx("span",
{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};A.render=function(){var f;const {state:r}=this.viewModel;return d.tsx("div",{class:"esri-feature-expression"},"loading"===r?this.renderLoading():"disabled"===r?null:null==(f=this._contentWidget)?void 0:f.render())};A._destroyContentWidget=function(){const {_contentWidget:f}=this;f&&(f.viewModel=null,f.destroy());this._contentWidget=null};A._setupExpressionWidget=function(){const {contentElementViewModel:f,
contentElement:r}=this.viewModel,v=null==r?void 0:r.type;this._destroyContentWidget();this._contentWidget=f?"fields"===v?new p({viewModel:f}):"media"===v?new c({viewModel:f}):"text"===v?new D({viewModel:f}):null:null;this.scheduleRender()};return q}(G);n.__decorate([k.property({type:a})],t.prototype,"viewModel",void 0);return t=n.__decorate([H.subclass("esri.widgets.Feature.FeatureExpression")],t)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e){t=function(q){function A(r,v){r=q.call(this,r,v)||this;r._featureElementInfo=null;r.attributes=null;r.description=null;r.expressionInfos=null;r.fieldInfos=null;r.title=null;r.viewModel=new p;r.messages=null;r.messagesURIUtils=null;return r}g._inheritsLoose(A,q);var f=A.prototype;f.initialize=function(){this._featureElementInfo=new c;this.own(m.watch(()=>{var r,v;return[null==(r=this.viewModel)?void 0:r.description,null==(v=this.viewModel)?void 0:v.title]},
()=>this._setupFeatureElementInfo(),m.initial))};f.destroy=function(){this._featureElementInfo.destroy()};f.renderFieldInfo=function(r,v){var {attributes:B}=this.viewModel;const w=r.fieldName,u=r.label||w;B=B?null==B[w]?"":B[w]:"";r=!(!r.format||!r.format.dateFormat);B="number"!==typeof B||r?a.autoLink(this.messagesURIUtils,B):this._forceLTR(B);r={["esri-feature-fields__field-data--date"]:r};return e.tsx("tr",{key:`fields-element-info-row-${w}-${v}`},e.tsx("th",{key:`fields-element-info-row-header-${w}-${v}`,
class:"esri-feature-fields__field-header",innerHTML:u}),e.tsx("td",{key:`fields-element-info-row-data-${w}-${v}`,class:this.classes("esri-feature-fields__field-data",r),innerHTML:B}))};f.renderFields=function(){const {formattedFieldInfos:r}=this.viewModel;return null!=r&&r.length?e.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},e.tsx("tbody",null,r.map((v,B)=>this.renderFieldInfo(v,B)))):null};f.render=function(){var r;return e.tsx("div",{class:"esri-feature-fields"},
null==(r=this._featureElementInfo)?void 0:r.render(),this.renderFields())};f._setupFeatureElementInfo=function(){const {description:r,title:v}=this;this._featureElementInfo.set({description:r,title:v})};f._forceLTR=function(r){return`&lrm;${r}`};return A}(D);n.__decorate([k.aliasOf("viewModel.attributes")],t.prototype,"attributes",void 0);n.__decorate([k.aliasOf("viewModel.description")],t.prototype,"description",void 0);n.__decorate([k.aliasOf("viewModel.expressionInfos")],t.prototype,"expressionInfos",
void 0);n.__decorate([k.aliasOf("viewModel.fieldInfos")],t.prototype,"fieldInfos",void 0);n.__decorate([k.aliasOf("viewModel.title")],t.prototype,"title",void 0);n.__decorate([H.property({type:p})],t.prototype,"viewModel",void 0);n.__decorate([H.property(),d.messageBundle("esri/widgets/Feature/t9n/Feature")],t.prototype,"messages",void 0);n.__decorate([H.property(),d.messageBundle("esri/widgets/support/t9n/uriUtils")],t.prototype,"messagesURIUtils",void 0);return t=n.__decorate([G.subclass("esri.widgets.Feature.FeatureFields")],
t)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),function(g,n,m,k,t,E,y,H,G,D,p){m=function(c){function a(h){h=
c.call(this,h)||this;h.attributes=null;h.expressionInfos=null;h.description=null;h.fieldInfos=null;h.title=null;return h}g._inheritsLoose(a,c);g._createClass(a,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:h,fieldInfos:d}=this,e=[];null==d?void 0:d.forEach(q=>{if(!q.hasOwnProperty("visible")||q.visible)q=q.clone(),q.label=p.getFieldInfoLabel(q,h),e.push(q)});return e}}]);return a}(m);n.__decorate([k.property()],m.prototype,"attributes",void 0);n.__decorate([k.property({type:[G]})],
m.prototype,"expressionInfos",void 0);n.__decorate([k.property()],m.prototype,"description",void 0);n.__decorate([k.property({type:[D]})],m.prototype,"fieldInfos",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"formattedFieldInfos",null);n.__decorate([k.property()],m.prototype,"title",void 0);return m=n.__decorate([H.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],m)})},"esri/widgets/support/uriUtils":function(){define(["exports","../../core/string"],function(g,
n){function m(t){let E=null;k.some(y=>{y.pattern.test(t)&&(E=y);return!!E});return E}const k=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},
{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},
{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];g.autoLink=function(t,E){if("string"!==typeof E||!E)return E;const y=m(E);if(!y)return E;const H=E.match(y.pattern);t=n.replace(n.replace(y.label,
{messages:t,hierPart:H&&H[2]}),{appName:y.appName});return E.replace(y.pattern,`<a${y.target?` target="${y.target}"`:""} href="$1"${"_blank"===y.target?' rel\x3d"noreferrer"':""}>${t}</a>`)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r){E=function(v){function B(u,C){var J=v.call(this,u,C)||this;J._refreshTimer=null;J._refreshIntervalInfo=null;J._featureElementInfo=null;J.attributes=null;J.activeMediaInfoIndex=null;J.description=null;J.fieldInfoMap=null;J.layer=null;J.mediaInfos=null;J.popupTemplate=null;J.relatedInfos=null;J.title=null;J.viewModel=new a;J.messages=null;J._getChartDependencies=function(){var S=g._asyncToGenerator(function*(T){const P=yield e.loadChartsModule(),{destroyed:X,
viewModel:Q}=g._assertThisInitialized(J);if(!X&&Q&&T){var {activeMediaInfo:O}=Q,Z=yield J._getRendererColors(P);J._renderChart({chartDiv:T,mediaInfo:O,chartsModule:P,colorMap:Z})}});return function(T){return S.apply(this,arguments)}}();return J}g._inheritsLoose(B,v);var w=B.prototype;w.initialize=function(){this._featureElementInfo=new h;this.own([k.watch(()=>{var u,C;return[null==(u=this.viewModel)?void 0:u.activeMediaInfo,null==(C=this.viewModel)?void 0:C.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),
k.initial),k.watch(()=>{var u,C;return[null==(u=this.viewModel)?void 0:u.description,null==(C=this.viewModel)?void 0:C.title]},()=>this._setupFeatureElementInfo(),k.initial)])};w.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};w.render=function(){var u;return f.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(u=this._featureElementInfo)?void 0:u.render(),this.renderMedia())};w.renderMedia=function(){const {formattedMediaInfoCount:u}=
this.viewModel;return u?f.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};w.renderImageMediaInfo=function(u){var {_refreshIntervalInfo:C}=this;const {activeMediaInfoIndex:J,formattedMediaInfoCount:S}=this.viewModel,{value:T,refreshInterval:P,altText:X,title:Q,type:O}=u,{sourceURL:Z,linkURL:L}=T;u=d.shouldOpenInNewTab(L)?"_blank":"_self";const I="_blank"===u?"noreferrer":
"";C=P?C:null;C=f.tsx("img",{alt:X||Q,key:`media-${O}-${J}-${S}-${C?C.timestamp:0}`,src:C?C.sourceURL:Z});return(u=L?f.tsx("a",{title:Q,href:L,rel:I,target:u},C):null)?u:C};w.renderChartMediaInfo=function(u){const {activeMediaInfoIndex:C,formattedMediaInfoCount:J}=this.viewModel;return f.tsx("div",{key:`media-${u.type}-${C}-${J}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};w.renderMediaInfoType=function(){const {activeMediaInfo:u}=this.viewModel;return u?
"image"===u.type?this.renderImageMediaInfo(u):u.type.includes("chart")?this.renderChartMediaInfo(u):null:null};w.renderMediaInfo=function(){var {activeMediaInfo:u}=this.viewModel;if(!u)return null;const C=u.title?f.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:u.title}):null;u=u.caption?f.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:u.caption}):null;return f.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},
f.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),C,u)};w.renderMediaPageButton=function(u){if(2>this.viewModel.formattedMediaInfoCount)return null;const C=(u="previous"===u)?this.messages.previous:this.messages.next,J=u?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),S=u?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),T=u?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return f.tsx("button",{type:"button",key:u?"media-previous":"media-next",title:C,"aria-label":C,tabIndex:0,class:J,bind:this,onclick:u?this._previous:this._next},f.tsx("span",
{"aria-hidden":"true",class:S}),f.tsx("span",{"aria-hidden":"true",class:T}))};w._setupFeatureElementInfo=function(){const {description:u,title:C}=this;this._featureElementInfo.set({description:u,title:C})};w._next=function(){this.viewModel.next()};w._previous=function(){this.viewModel.previous()};w._getRendererColors=function(){var u=g._asyncToGenerator(function*(C){var J;const {am4core:S}=C;C=null==(J=this.viewModel)?void 0:J.layer;const T=new Map;if(!C)return T;const P=yield p.getColorsFromRenderer(C.renderer);
P.delete(null);if(!Array.from(P.values()).every(X=>1===(null==X?void 0:X.length)))return T;T.set("default-line-value",S.color({r:50,g:50,b:50,a:1}));Array.from(P.keys()).forEach(X=>{X&&T.set(X,S.color(P.get(X)[0].toCss(!0)))});return T});return function(C){return u.apply(this,arguments)}}();w._handleMediaKeyup=function(u){const C=m.eventKey(u);"ArrowLeft"===C&&(u.stopPropagation(),this.viewModel.previous());"ArrowRight"===C&&(u.stopPropagation(),this.viewModel.next())};w._renderChart=function(u){const {abilities:C}=
this.viewModel,{chartsModule:J,chartDiv:S,mediaInfo:T,colorMap:P}=u,{value:X,type:Q}=T,{am4core:O}=J,Z=e.getColorSet(O);r.isDarkTheme()&&O.useTheme(J.am4themes_dark);const L=window.matchMedia("(prefers-reduced-motion: reduce)");C.chartAnimation&&!L.matches?O.useTheme(J.am4themes_animated):O.unuseTheme(J.am4themes_animated);O.useTheme(function(I){I instanceof O.ColorSet&&Z&&(I.list=Z)});u="pie-chart"===Q?this._createPieChart(u):this._createXYChart(u);S.setAttribute("aria-label",T.altText||T.title);
u.data=X.series.map(I=>({["tooltip"]:I.tooltip,["value"]:I.value,["color"]:P.get(I.fieldName)})).filter(I=>"pie-chart"===Q?0<I.value:!0)};w._customizeChartTooltip=function(u,C){u.label.wrap=!0;u.label.maxWidth=200;u.autoTextColor=!1;u.getFillFromObject=!1;u.label.fill=C.color("#ffffff");u.background.fill=C.color({r:0,g:0,b:0,a:.7})};w._createPieChart=function(u){const {chartDiv:C,chartsModule:J}=u,{am4core:S,am4charts:T}=J;u=S.create(C,T.PieChart);u.rtl=q.isRTL(this.container);const P=u.series.push(new T.PieSeries);
P.labels.template.disabled=!0;P.ticks.template.disabled=!0;P.dataFields.value="value";P.dataFields.category="tooltip";this._customizeChartTooltip(P.tooltip,S);P.slices.template.tooltipText=u.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";P.slices.template.propertyFields.fill="color";P.slices.template.propertyFields.stroke="color";return u};w._getMinSeriesValue=function(u){let C=0;u.forEach(J=>C=Math.min(J.value,C));return C};w._createColumnChart=
function(u,C){const {chartsModule:J,mediaInfo:S}=C;({value:C}=S);const {am4core:T,am4charts:P}=J,X=u.xAxes.push(new P.CategoryAxis);X.dataFields.category="tooltip";X.renderer.labels.template.disabled=!0;this._customizeChartTooltip(X.tooltip,T);X.tooltip.events.on("sizechanged",()=>{X.tooltip.dy=-X.tooltip.contentHeight});var Q=u.yAxes.push(new P.ValueAxis);const O=Q.renderer.labels.template;Q.renderer.minLabelPosition=.05;Q.renderer.maxLabelPosition=.95;Q.min=this._getMinSeriesValue(C.series);this._customizeChartTooltip(Q.tooltip,
T);O.wrap=!0;Q=u.series.push(new P.ColumnSeries);Q.dataFields.valueY="value";Q.dataFields.categoryX="tooltip";Q.columns.template.propertyFields.fill="color";Q.columns.template.propertyFields.stroke="color";u.cursor=new P.XYCursor;15<C.series.length&&(u.scrollbarX=new T.Scrollbar)};w._createBarChart=function(u,C){const {chartsModule:J,mediaInfo:S}=C;({value:C}=S);const {am4core:T,am4charts:P}=J,X=u.yAxes.push(new P.CategoryAxis);X.dataFields.category="tooltip";X.renderer.inversed=!0;X.renderer.labels.template.disabled=
!0;this._customizeChartTooltip(X.tooltip,T);X.tooltip.events.on("sizechanged",()=>{X.tooltip.dx=X.tooltip.contentWidth});var Q=u.xAxes.push(new P.ValueAxis);const O=Q.renderer.labels.template;Q.renderer.minLabelPosition=.05;Q.renderer.maxLabelPosition=.95;Q.min=this._getMinSeriesValue(C.series);this._customizeChartTooltip(Q.tooltip,T);O.wrap=!0;Q=u.series.push(new P.ColumnSeries);Q.dataFields.valueX="value";Q.dataFields.categoryY="tooltip";Q.columns.template.propertyFields.fill="color";Q.columns.template.propertyFields.stroke=
"color";u.cursor=new P.XYCursor;15<C.series.length&&(u.scrollbarY=new T.Scrollbar)};w._createLineChart=function(u,C){const {chartsModule:J,mediaInfo:S,colorMap:T}=C;({value:C}=S);const {am4core:P,am4charts:X}=J,Q=u.xAxes.push(new X.CategoryAxis);Q.dataFields.category="tooltip";Q.renderer.labels.template.disabled=!0;this._customizeChartTooltip(Q.tooltip,P);Q.tooltip.events.on("sizechanged",()=>{Q.tooltip.dy=-Q.tooltip.contentHeight});var O=u.yAxes.push(new X.ValueAxis),Z=O.renderer.labels.template;
O.renderer.minLabelPosition=.05;O.renderer.maxLabelPosition=.95;O.min=this._getMinSeriesValue(C.series);this._customizeChartTooltip(O.tooltip,P);Z.wrap=!0;O=u.series.push(new X.LineSeries);O.dataFields.categoryX="tooltip";O.dataFields.valueY="value";O.strokeWidth=1;if(Z=T.get("default-line-value"))O.stroke=Z;O=O.bullets.push(new X.CircleBullet);O.propertyFields.fill="color";O.propertyFields.stroke="color";u.cursor=new X.XYCursor;15<C.series.length&&(u.scrollbarX=new P.Scrollbar)};w._createXYChart=
function(u){const {chartDiv:C,chartsModule:J,mediaInfo:S}=u,{type:T}=S,{am4core:P,am4charts:X}=J,Q=P.create(C,X.XYChart);Q.rtl=q.isRTL(this.container);"column-chart"===T&&this._createColumnChart(Q,u);"bar-chart"===T&&this._createBarChart(Q,u);"line-chart"===T&&this._createLineChart(Q,u);return Q};w._clearMediaRefreshTimer=function(){const {_refreshTimer:u}=this;u&&(clearTimeout(u),this._refreshTimer=null)};w._updateMediaInfoTimestamp=function(u){const C=Date.now();this._refreshIntervalInfo={timestamp:C,
sourceURL:this._getImageSource(u,C)};this.scheduleRender()};w._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:u}=this.viewModel;u&&"image"===u.type&&u.refreshInterval&&this._setRefreshTimeout(u)};w._setRefreshTimeout=function(u){const {refreshInterval:C,value:J}=u;C&&(u=6E4*C,this._updateMediaInfoTimestamp(J.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(J.sourceURL)},u))};w._getImageSource=function(u,C){const J=u.includes("?")?
"\x26":"?",[S,T=""]=u.split("#");return`${S}${J}timestamp=${C}${T?"#":""}${T}`};return B}(c);n.__decorate([t.aliasOf("viewModel.attributes")],E.prototype,"attributes",void 0);n.__decorate([t.aliasOf("viewModel.activeMediaInfoIndex")],E.prototype,"activeMediaInfoIndex",void 0);n.__decorate([t.aliasOf("viewModel.description")],E.prototype,"description",void 0);n.__decorate([t.aliasOf("viewModel.fieldInfoMap")],E.prototype,"fieldInfoMap",void 0);n.__decorate([t.aliasOf("viewModel.layer")],E.prototype,
"layer",void 0);n.__decorate([t.aliasOf("viewModel.mediaInfos")],E.prototype,"mediaInfos",void 0);n.__decorate([t.aliasOf("viewModel.popupTemplate")],E.prototype,"popupTemplate",void 0);n.__decorate([t.aliasOf("viewModel.relatedInfos")],E.prototype,"relatedInfos",void 0);n.__decorate([t.aliasOf("viewModel.title")],E.prototype,"title",void 0);n.__decorate([G.property({type:a})],E.prototype,"viewModel",void 0);n.__decorate([G.property(),A.messageBundle("esri/widgets/Feature/t9n/Feature")],E.prototype,
"messages",void 0);return E=n.__decorate([D.subclass("esri.widgets.Feature.FeatureMedia")],E)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(g,n,m,k,t,E,y,H,G,D,p){function c(v,B,w){t.getOrCreateMapValue(v,
B,()=>[]).push(...w)}function a(){a=n._asyncToGenerator(function*(v){const B=new Map;if("visualVariables"in v&&v.visualVariables){var w=v.visualVariables.filter(J=>"color"===J.type);for(const J of w){w=J.field||J.valueExpression;const S=(yield D.getRampStops(J)).map(T=>T.color);c(B,w,S)}}if("heatmap"===v.type){var u=p.getHeatmapRampStops(v).map(J=>J.color);c(B,v.field,u)}else if("pie-chart"===v.type){for(const J of v.attributes)c(B,J.field,[J.color]);c(B,null,[null==v?void 0:null==(u=v.othersCategory)?
void 0:u.color,G.getColorFromSymbol(v.backgroundFillSymbol,null)])}else if("dot-density"===v.type){for(const J of v.attributes)c(B,J.field,[J.color]);c(B,null,[v.backgroundColor])}else if("unique-value"===v.type){var C;if("predominance"===(null==(C=v.authoringInfo)?void 0:C.type))for(const J of v.uniqueValueInfos)c(B,J.value.toString(),[G.getColorFromSymbol(J.symbol,null)]);else{u=v.uniqueValueInfos.map(X=>G.getColorFromSymbol(X.symbol,null));const {field:J,field2:S,field3:T,valueExpression:P}=v;
(J||P)&&c(B,J||P,u);S&&c(B,S,u);T&&c(B,T,u)}}else"class-breaks"===v.type?(u=v.classBreakInfos.map(J=>G.getColorFromSymbol(J.symbol,null)),c(B,v.field||v.valueExpression,u)):"simple"===v.type&&c(B,null,[G.getColorFromSymbol(v.symbol,null)]);"defaultSymbol"in v&&v.defaultSymbol&&c(B,null,[G.getColorFromSymbol(v.defaultSymbol,null)]);B.forEach((J,S)=>{J=m.unique(J.filter(Boolean),(T,P)=>JSON.stringify(T)===JSON.stringify(P));B.set(S,J)});return B});return a.apply(this,arguments)}function h(v,B,w){let u=
"";0===B?u=A.lt+" ":B===w&&(u=A.gt+" ");return u+v}function d(v){let B=v.minValue,w=v.maxValue;const u=v.isFirstBreak?"":A.gt+" ";v="percent-of-total"===v.normalizationType?A.pct:"";B=null==B?"":y.format(B);w=null==w?"":y.format(w);return u+B+v+" "+A.ld+" "+w+v}function e(v,B){return"normalizationField"in v&&v.normalizationField?{type:"normalized-field",field:v.field,normalizationField:v.normalizationField}:"field"in v&&v.field?{type:"field",field:v.field}:"valueExpression"in v&&v.valueExpression?
{type:"expression",expression:v.valueExpression,title:v.valueExpressionTitle,returnType:B}:null}const q=k.getLogger("esri.renderers.support.utils"),A={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},f={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},r={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",
year:"year"};k=E.convertDateFormatToIntlOptions("short-date");g.calculateDateFormatInterval=function(v){v=v.map(J=>new Date(J));const B=v.length;let w=Infinity,u=null;for(let J=0;J<B-1;J++){const S=v[J];let T=Infinity,P=null;for(let X=J+1;X<B;X++){var C=v[X];C=S.getFullYear()!==C.getFullYear()&&"year"||S.getMonth()!==C.getMonth()&&"month"||S.getDate()!==C.getDate()&&"day"||S.getHours()!==C.getHours()&&"hour"||S.getMinutes()!==C.getMinutes()&&"minute"||S.getSeconds()!==C.getSeconds()&&"second"||"millisecond";
const Q=f[C];Q<T&&(T=Q,P=C)}T<w&&(w=T,u=P)}return u};g.createClassBreakLabel=d;g.createColorStops=function(v){const {values:B,colors:w,labelIndexes:u,isDate:C,dateFormatOptions:J}=v;return B.map((S,T)=>{let P=null;if(!u||u.includes(T)){let X;(X=C?E.formatDate(S,J):y.format(S))&&(P=h(X,T,B.length-1))}return new H({value:S,color:w[T],label:P})})};g.createUniqueValueLabel=function(v){const {value:B,domain:w,fieldInfo:u,dateFormatInterval:C}=v;v=String(B);const J=w&&"codedValues"in w&&w.codedValues?w.getName(B):
null;J?v=J:"number"===typeof B&&(v=u&&"date"===u.type?E.formatDate(B,C&&E.convertDateFormatToIntlOptions(r[C])):y.format(B));return v};g.getAttribute=e;g.getAttributes=function(v,B){const w=[];if("class-breaks"===v.type||"heatmap"===v.type)w.push(e(v,"number"));else if("unique-value"===v.type){var u=v.authoringInfo;if(u&&"relationship"===u.type){if(u.field1&&u.field2){var C=u.field2.field;const J=u.field2.normalizationField;w.push(e({field:u.field1.field,normalizationField:u.field1.normalizationField}));
w.push(e({field:C,normalizationField:J}))}}else C=v.uniqueValueInfos[0],u=null,C&&C.value&&(C=typeof v.uniqueValueInfos[0].value,"string"===C||"number"===C)&&(u=C),w.push(e(v,u)),[v.field2,v.field3].forEach(J=>J&&w.push({type:"field",field:J}))}else"attributes"in v&&v.attributes.forEach(J=>w.push(e(J,"number")));(v=B?B(v):"visualVariables"in v?v.visualVariables:null)&&v.forEach(J=>w.push(e(J,"number")));return m.unique(w.filter(Boolean),(J,S)=>"field"===J.type&&"field"===S.type?J.field===S.field:
"normalized-field"===J.type&&"normalized-field"===S.type?J.field===S.field&&J.normalizationField===S.normalizationField:"expression"===J.type&&"expression"===S.type?J.expression===S.expression:!1)};g.getColorsFromRenderer=function(v){return a.apply(this,arguments)};g.setLabelsForClassBreaks=function(v){const B=v.classBreakInfos,w=v.normalizationType;let u=[];if(B&&B.length)if("standard-deviation"===v.classificationMethod)q.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(v.round){u.push(B[0].minValue);for(const C of B)u.push(C.maxValue);u=y.round(u);B.forEach((C,J)=>{C.label=d({minValue:0===J?u[0]:u[J],maxValue:u[J+1],isFirstBreak:0===J,normalizationType:w})})}else B.forEach((C,J)=>{C.label=d({minValue:C.minValue,maxValue:C.maxValue,isFirstBreak:0===J,normalizationType:w})})};g.timelineDateFormatOptions=k;g.updateClassBreak=function(v){if("standard-deviation"===v.classificationMethod)q.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");
else{var B=v.classBreaks,w=v.change,u=w.index;w=w.value;var C=B.length,J=-1,S=-1;0===u?J=u:u===C?S=u-1:(S=u-1,J=u);v=v.normalizationType;u=null;-1<J&&J<C&&(u=B[J],u.minValue=w,u.label=d({minValue:u.minValue,maxValue:u.maxValue,isFirstBreak:0===J,normalizationType:v}));-1<S&&S<C&&(u=B[S],u.maxValue=w,u.label=d({minValue:u.minValue,maxValue:u.maxValue,isFirstBreak:0===S,normalizationType:v}))}};g.updateColorStops=function(v){const {stops:B,changes:w,isDate:u,dateFormatOptions:C}=v,J=B.map(T=>T.value);
v=[];for(const T of w)v.push(T.index),J[T.index]=T.value;const S=y.round(J,{indexes:v});B.forEach((T,P)=>{T.value=J[P];if(null!=T.label){let X,Q=null;(X=u?E.formatDate(S[P],C):y.format(S[P]))&&(Q=h(X,P,B.length-1));T.label=Q}})};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(g,n,m){function k(p,c){return p-c}function t(p,c){let a;a=Number(p.toFixed(c));
a<p?p=a+1/10**c:(p=a,a-=1/10**c);a=Number(a.toFixed(c));p=Number(p.toFixed(c));return[a,p]}function E(p,c,a,h,d){p=H(p,c,a,h);c=null==p.next||p.next<=d;return(null==p.previous||p.previous<=d)&&c||p.previous+p.next<=2*d}function y(p){p=String(p);var c=p.match(G);if(c&&c[1])return{integer:c[1].split("").length,fractional:c[3]?c[3].split("").length:0};if(p.toLowerCase().includes("e")&&(c=p.split("e"),p=c[0],c=c[1],p&&c)){p=Number(p);c=Number(c);const a=0<c;a||(c=Math.abs(c));p=y(p);a?(p.integer+=c,p.fractional=
c>p.fractional?0:p.fractional-c):(p.fractional+=c,p.integer=c>p.integer?1:p.integer-c);return p}return{integer:0,fractional:0}}function H(p,c,a,h){const d={previous:null,next:null};if(null!=a){const e=p-a;d.previous=Math.floor(Math.abs(100*(c-a-e)/e))}null!=h&&(p=h-p,d.next=Math.floor(Math.abs(100*(h-c-p)/p)));return d}const G=/^-?(\d+)(\.(\d+))?$/i,D={maximumFractionDigits:20};g.format=function(p){return m.formatNumber(p,D)};g.numDigits=y;g.percentChange=H;g.round=function(p,c={}){p=p.slice(0);const {tolerance:a=
2,strictBounds:h=!1,indexes:d=p.map((q,A)=>A)}=c;d.sort(k);for(c=0;c<d.length;c++){const q=d[c],A=p[q],f=0===q?null:p[q-1],r=q===p.length-1?null:p[q+1],v=y(A).fractional;if(v){let B=0,w=!1;for(var e=void 0;B<=v&&!w;)e=t(A,B),e=h&&0===c?e[1]:e[0],w=E(A,e,f,r,a),B++;w&&(p[q]=e)}}return p};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a){function h(Q){Q=Q.symbolLayers;if(!Q)return null;let O=null;Q.forEach(Z=>{if("object"!==Z.type||null==Z.resource.href)O="water"===Z.type?H.unwrap(Z.color):H.isSome(Z.material)?H.unwrap(Z.material.color):null});return O?new k(O):null}function d(Q,O){if(null==O)return Q;Q=Q.toRgba();Q[3]*=O;return new k(Q)}function e(Q,O,Z){if(Q=Q.symbolLayers){var L=I=>{I=H.isSome(I)?I:null;O=O||I||null!=Z&&X;return d(O,Z)};Q.forEach(I=>{if("object"!==I.type||null==I.resource.href||
O)if("water"===I.type)I.color=L(I.color);else{var l=H.isSome(I.material)?I.material.color:null;l=L(l);H.isNone(I.material)?I.material=new a.Symbol3DMaterial({color:l}):I.material.color=l;null!=Z&&"outline"in I&&H.isSome(I.outline)&&H.isSome(I.outline.color)&&(I.outline.color=d(I.outline.color,Z))}})}}function q(Q,O){return A.apply(this,arguments)}function A(){A=m._asyncToGenerator(function*(Q,O){(Q=Q.symbolLayers)&&(yield E.forEach(Q,function(){var Z=m._asyncToGenerator(function*(L){return f(L,O)});
return function(L){return Z.apply(this,arguments)}}()))});return A.apply(this,arguments)}function f(Q,O){return r.apply(this,arguments)}function r(){r=m._asyncToGenerator(function*(Q,O){switch(Q.type){case "extrude":Q.size="number"===typeof O[2]?O[2]:0;break;case "icon":case "line":case "text":O=v(O);H.isSome(O)&&(Q.size=O);break;case "path":{const Z=u(O,D.ONES,[Q.width,void 0,Q.height]);Q.width=S(O[0],Q.width,1,Z);Q.height=S(O[2],Q.height,1,Z)}break;case "object":yield B(Q,O)}});return r.apply(this,
arguments)}function v(Q){for(const O of Q)if("number"===typeof O)return O;return null}function B(Q,O){return w.apply(this,arguments)}function w(){w=m._asyncToGenerator(function*(Q,O){const {resourceSize:Z,symbolSize:L}=yield C(Q),I=u(O,Z,L);Q.width=S(O[0],L[0],Z[0],I);Q.depth=S(O[1],L[1],Z[1],I);Q.height=S(O[2],L[2],Z[2],I)});return w.apply(this,arguments)}function u(Q,O,Z){for(let L=0;3>L;L++){const I=Q[L];switch(I){case "symbol-value":return null!=Z[L]?Z[L]/O[L]:1;case "proportional":break;default:if(I&&
O[L])return I/O[L]}}return 1}function C(Q){return J.apply(this,arguments)}function J(){J=m._asyncToGenerator(function*(Q){const O=yield(yield new Promise((x,K)=>g(["./symbolLayerUtils"],x,K))).computeObjectLayerResourceSize(Q,10),{width:Z,height:L,depth:I}=Q;Q=[Z,I,L];let l=1;for(var z=0;3>z;z++)if(null!=Q[z]){l=Q[z]/O[z];break}for(z=0;3>z;z++)null==Q[z]&&(Q[z]=O[z]*l);return{resourceSize:O,symbolSize:Q}});return J.apply(this,arguments)}function S(Q,O,Z,L){switch(Q){case "proportional":return Z*L;
case "symbol-value":return null!=O?O:Z;default:return Q}}function T(){T=m._asyncToGenerator(function*(Q,O){if(Q&&O){if(t.isSymbol3D(Q))return q(Q,O);if(t.isSymbol2D(Q)&&(O=v(O),!H.isNone(O)))switch(Q.type){case "simple-marker":Q.size=O;break;case "picture-marker":{const Z=Q.width/Q.height;1<Z?(Q.width=O,Q.height=O*Z):(Q.width=O*Z,Q.height=O);break}case "simple-line":Q.width=O;break;case "text":Q.font.size=O}}});return T.apply(this,arguments)}const P=/\/resource\/(.*?)\.svg$/,X=new k("white");n.applyColorToSymbol=
function(Q,O,Z){if(Q&&(O||null!=Z))if(O&&(O=new k(O)),t.isSymbol3D(Q))e(Q,O,Z);else if(t.isSymbol2D(Q)){if(O=O||Q.color)Q.color=d(O,Z);null!=Z&&"outline"in Q&&Q.outline&&Q.outline.color&&(Q.outline.color=d(Q.outline.color,Z))}};n.applyOpacityToColor=d;n.applyRotationToSymbol=function(Q,O,Z){Q&&null!=O&&(t.isSymbol3D(Q)?(Q=Q.symbolLayers)&&Q.forEach(L=>{if(L&&"object"===L.type)switch(Z){case "tilt":L.tilt=O;break;case "roll":L.roll=O;break;default:L.heading=O}}):!t.isSymbol2D(Q)||"simple-marker"!==
Q.type&&"picture-marker"!==Q.type&&"text"!==Q.type||(Q.angle=O))};n.applySizesToSymbol=function(Q,O){return T.apply(this,arguments)};n.getCSSFilterFromEffectList=function(Q){if(!Q)return null;Q=Q.effects.filter(O=>"bloom"!==O.type).map(O=>O.toJSON());return p.effectFunctionsFromJSON(Q)};n.getColorFromSymbol=function(Q,O){if(!Q)return null;let Z=null;t.isSymbol3D(Q)?Z=h(Q):t.isSymbol2D(Q)&&(Z=Q.color?new k(Q.color):null);return Z?d(Z,O):null};n.getIconHref=function(Q,O){O=O.resource.href;return!y("esri-canvas-svg-support")&&
Q.styleOrigin&&P.test(O)?O.replace(P,"/resource/png/$1.png"):O};n.getSymbolOutlineSize=function(Q){if(!Q)return 0;if(t.isSymbol3D(Q)){{const O=Q.symbolLayers&&Q.symbolLayers.length;O?(Q=Q.symbolLayers.getItemAt(O-1),Q="outline"in Q?H.get(Q,"outline","size"):void 0):Q=void 0}return H.isSome(Q)?Q:0}return(Q=c.getStroke(Q))&&G.px2pt(Q.width)||0};n.isVolumetricSymbol=function(Q){if(H.isNone(Q)||!("symbolLayers"in Q)||H.isNone(Q.symbolLayers))return!1;switch(Q.type){case "point-3d":return Q.symbolLayers.some(O=>
"object"===O.type);case "line-3d":return Q.symbolLayers.some(O=>"path"===O.type);case "polygon-3d":return Q.symbolLayers.some(O=>"object"===O.type||"extrude"===O.type);default:return!1}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(g,n,m,k,t,E,y){function H(a){if(!a)return null;
let h;switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":h=H(a.outline);break;case "simple-line":{const d=E.pt2px(a.width);"none"!==a.style&&0!==d&&(h={color:a.color,style:c(a.style),width:d,cap:a.cap,join:"miter"===a.join?E.pt2px(a.miterLimit):a.join});break}default:h=null}return h}const G={left:"start",center:"middle",right:"end",justify:"start"},D={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},p=new t(1E3),c=(()=>{const a={};return h=>
{if(a[h])return a[h];const d=h.replace(/-/g,"");return a[h]=d}})();m=new m([128,128,128]);g.defaultThematicColor=m;g.dekebabifyLineStyle=c;g.getFill=function(a){const h=a.style;let d=null;if(a)switch(a.type){case "simple-marker":"cross"!==h&&"x"!==h&&(d=a.color);break;case "simple-fill":"solid"===h?d=a.color:"none"!==h&&(d={type:"pattern",x:0,y:0,src:n.getAssetUrl(`esri/symbols/patterns/${h}.png`),width:5,height:5});break;case "picture-fill":d={type:"pattern",src:a.url,width:E.pt2px(a.width)*a.xscale,
height:E.pt2px(a.height)*a.yscale,x:E.pt2px(a.xoffset),y:E.pt2px(a.yoffset)};break;case "text":d=a.color;break;case "cim":d=y.getCIMSymbolColor(a)}return d};g.getPatternUrlWithColor=function(a,h){const d=a+"-"+h;return void 0!==p.get(d)?Promise.resolve(p.get(d)):k(a,{responseType:"image"}).then(e=>{e=e.data;const q=e.naturalWidth,A=e.naturalHeight,f=document.createElement("canvas");f.width=q;f.height=A;const r=f.getContext("2d");r.fillStyle=h;r.fillRect(0,0,q,A);r.globalCompositeOperation="destination-in";
r.drawImage(e,0,0);e=f.toDataURL();p.put(d,e);return e})};g.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&G[a.toLowerCase()]||"middle"};g.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&D[a.toLowerCase()]||"alphabetic"};g.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};g.getStroke=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(g){return function(){function n(k,
t){this._storage=new g.MemCacheStorage;this._storage.maxSize=k;t&&this._storage.registerRemoveFunc("",t)}var m=n.prototype;m.put=function(k,t){this._storage.put(k,t,1,1)};m.pop=function(k){return this._storage.pop(k)};m.get=function(k){return this._storage.get(k)};m.clear=function(){this._storage.clearAll()};m.destroy=function(){this._storage.destroy()};return n}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(g,n,m){function k(c){c=m.toCIMSymbolJSON(c);
if("CIMTextSymbol"===c.type)return c.height;let a=0;if(c.symbolLayers)for(const h of c.symbolLayers)m.isCIMMarker(h)&&h.size>a?a=h.size:m.isCIMStroke(h)&&h.width>a?a=h.width:m.isCIMFill(h);return a}function t(c,a,h,d){if("CIMTextSymbol"===c.type)c.height*=a;else{if(h&&c.effects)for(const e of c.effects)H(e,a);if(c.symbolLayers)for(const e of c.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":E(e,a,d);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=d&&d.preserveOutlineWidth||
!e.width||(e.width*=a);break;case "CIMPictureFill":e.height&&(e.height*=a);e.offsetX&&(e.offsetX*=a);e.offsetY&&(e.offsetY*=a);break;case "CIMHatchFill":t(e.lineSymbol,a,!0,{...d,preserveOutlineWidth:!1}),e.offsetX&&(e.offsetX*=a),e.offsetY&&(e.offsetY*=a),e.separation&&(e.separation*=a)}}}function E(c,a,h){c.markerPlacement&&y(c.markerPlacement,a);c.offsetX&&(c.offsetX*=a);c.offsetY&&(c.offsetY*=a);c.anchorPoint&&"Absolute"===c.anchorPointUnits&&(c.anchorPoint={x:c.anchorPoint.x*a,y:c.anchorPoint.y*
a});c.size*=a;if("CIMVectorMarker"===c.type&&c.markerGraphics)for(const d of c.markerGraphics)c.scaleSymbolsProportionally||t(d.symbol,a,!0,h)}function y(c,a){m.isCIMMarkerStrokePlacement(c)&&c.offset&&(c.offset*=a);switch(c.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":c.customEndingOffset&&(c.customEndingOffset*=a);c.offsetAlongLine&&(c.offsetAlongLine*=a);if(c.placementTemplate&&c.placementTemplate.length){var h=c.placementTemplate.map(d=>d*a);c.placementTemplate=
h}break;case "CIMMarkerPlacementAlongLineVariableSize":c.maxRandomOffset&&(c.maxRandomOffset*=a);c.placementTemplate&&c.placementTemplate.length&&(h=c.placementTemplate.map(d=>d*a),c.placementTemplate=h);break;case "CIMMarkerPlacementOnLine":c.startPointOffset&&(c.startPointOffset*=a);break;case "CIMMarkerPlacementAtExtremities":c.offsetAlongLine&&(c.offsetAlongLine*=a);break;case "CIMMarkerPlacementAtRatioPositions":c.beginPosition&&(c.beginPosition*=a);c.endPosition&&(c.endPosition*=a);break;case "CIMMarkerPlacementPolygonCenter":c.offsetX&&
(c.offsetX*=a);c.offsetY&&(c.offsetY*=a);break;case "CIMMarkerPlacementInsidePolygon":c.offsetX&&(c.offsetX*=a),c.offsetY&&(c.offsetY*=a),c.stepX&&(c.stepX*=a),c.stepY&&(c.stepY*=a)}}function H(c,a){switch(c.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":c.width&&(c.width*=a);break;case "CIMGeometricEffectBuffer":c.size&&(c.size*=a);break;case "CIMGeometricEffectCut":c.beginCut&&(c.beginCut*=a);c.endCut&&(c.endCut*=a);c.middleCut&&(c.middleCut*=a);break;case "CIMGeometricEffectDashes":c.customEndingOffset&&
(c.customEndingOffset*=a);c.offsetAlongLine&&(c.offsetAlongLine*=a);if(c.dashTemplate&&c.dashTemplate.length){const h=c.dashTemplate.map(d=>d*a);c.dashTemplate=h}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":c.length&&(c.length*=a);break;case "CIMGeometricEffectMove":c.offsetX&&(c.offsetX*=a);c.offsetY&&(c.offsetY*=a);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":c.offset&&(c.offset*=a);break;case "CIMGeometricEffectRegularPolygon":c.radius&&
(c.radius*=a);break;case "CIMGeometricEffectTaperedPolygon":c.fromWidth&&(c.fromWidth*=a);c.length&&(c.length*=a);c.toWidth&&(c.toWidth*=a);break;case "CIMGeometricEffectWave":c.amplitude&&(c.amplitude*=a),c.period&&(c.period*=a)}}function G(c,a){let h;h="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===c.type;if(h.symbolLayers)for(const d of h.symbolLayers)if(!(d.colorLocked||c&&(m.isCIMStroke(d)||m.isCIMMarker(d)&&d.markerPlacement&&m.isCIMMarkerStrokePlacement(d.markerPlacement))))switch(d.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":d.tintColor&&
D(a,d.tintColor);break;case "CIMVectorMarker":d.markerGraphics.forEach(e=>{G(e.symbol,a)});break;case "CIMSolidStroke":case "CIMSolidFill":D(a,d.color);break;case "CIMHatchFill":G(d.lineSymbol,a)}}function D(c,a){for(const h of c)if(h.join(".")===a.join("."))return;c.push(a)}function p(c,a,h){var d="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===d.type?!0:!1;if(d.symbolLayers)for(const e of d.symbolLayers)if(!e.colorLocked){if(c)if(h){if({layersToColor:d}=h,(m.isCIMStroke(e)||m.isCIMMarker(e)&&
e.markerPlacement&&m.isCIMMarkerStrokePlacement(e.markerPlacement))&&"fill"===d||m.isCIMFill(e)&&"outline"===d)continue}else if(m.isCIMStroke(e)||m.isCIMMarker(e)&&e.markerPlacement&&m.isCIMMarkerStrokePlacement(e.markerPlacement))continue;d=a.toArray();switch(e.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":e.tintColor=d;break;case "CIMVectorMarker":e.markerGraphics.forEach(q=>{p(q.symbol,a,h)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=d;break;case "CIMHatchFill":p(e.lineSymbol,
a,h)}}}g.applyCIMSymbolColor=function(c,a,h){a instanceof n||(a=new n(a));(c=m.toCIMSymbolJSON(c))&&p(c,a,h)};g.applyCIMSymbolRotation=function(c,a,h=!1){c=m.toCIMSymbolJSON(c);h&&0!==a&&(a=360-a);if("CIMTextSymbol"===c.type)c.angle=a;else if("CIMPointSymbol"===c.type&&c.symbolLayers){h=a-(c.angle||0);for(const d of c.symbolLayers)if(m.isCIMMarker(d)){let e=d.rotation||0;e=d.rotateClockwise?e-h:e+h;d.rotation=e}c.angle=a}};g.getCIMSymbolColor=function(c){c=m.toCIMSymbolJSON(c);const a=[];G(c,a);return a.length?
new n(m.fromCIMColor(a[0])):null};g.getCIMSymbolRotation=function(c,a=!1){c=m.toCIMSymbolJSON(c);return"CIMTextSymbol"===c.type||"CIMPointSymbol"===c.type?a&&0!==c.angle?360-c.angle:c.angle||0:0};g.getCIMSymbolSize=k;g.scaleCIMMarker=E;g.scaleCIMSymbolTo=function(c,a,h){const d=m.toCIMSymbolJSON(c);c=k(c);if(0===c)if("CIMTextSymbol"===d.type)d.height=a;else{if(d.symbolLayers)for(const e of d.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":e.size=a;break;case "CIMPictureStroke":case "CIMSolidStroke":e.width=
a}}else t(d,a/c,!1,h)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(g,n){function m(k,t){"string"!==typeof k&&(k=String(k));switch(t){case "LowerCase":return k.toLowerCase();case "Allcaps":return k.toUpperCase();default:return k}}n._adjustTextCase=m;n.colorToArray=function(k){return[k.r,k.g,k.b,k.a]};n.createLabelOverrideFunction=function(k,t,E){const y=p=>{let c=p.length;for(;c--;)if(!" /-,\n".includes(p.charAt(c)))return!1;
return!0},H=[];var G=0;let D=-1;do D=t.indexOf("[",G),D>=G&&(D>G&&(G=t.substr(G,D-G),H.push([G,null,y(G)])),G=D+1,D=t.indexOf("]",G),D>=G&&(D>G&&(G=t.substr(G,D-G),(G=k[G])&&H.push([null,G,!1])),G=D+1));while(-1!==D);G<t.length-1&&(k=t.substr(G),H.push([k,null,y(k)]));return p=>{let c="",a=null;for(const h of H){const [d,e,q]=h;if(d)q?a=d:(a&&(c+=a,a=null),c+=d);else{const A=p.attributes[e];A&&(a&&(c+=a,a=null),c+=A)}}return m(c,E)}};n.evaluateValueOrFunction=function(k,t,E,y){return"function"===
typeof k?k(t,E,y):k};n.fromCIMColor=function(k){return k?{r:k[0],g:k[1],b:k[2],a:k[3]/255}:{r:0,g:0,b:0,a:0}};n.getValue=k=>isNaN(k)||!k?0:k;n.importGeometryEngine=function(){return new Promise((k,t)=>g(["../../geometry/geometryEngineJSON"],k,t))};n.isCIMFill=function(k){return"CIMGradientFill"===k.type||"CIMHatchFill"===k.type||"CIMPictureFill"===k.type||"CIMSolidFill"===k.type||"CIMWaterFill"===k.type};n.isCIMMarker=function(k){return"CIMVectorMarker"===k.type||"CIMPictureMarker"===k.type||"CIMBarChartMarker"===
k.type||"CIMCharacterMarker"===k.type||"CIMPieChartMarker"===k.type||"CIMStackedBarChartMarker"===k.type};n.isCIMMarkerStrokePlacement=function(k){return"CIMMarkerPlacementAlongLineRandomSize"===k.type||"CIMMarkerPlacementAlongLineSameSize"===k.type||"CIMMarkerPlacementAlongLineVariableSize"===k.type||"CIMMarkerPlacementAtExtremities"===k.type||"CIMMarkerPlacementAtMeasuredUnits"===k.type||"CIMMarkerPlacementAtRatioPositions"===k.type||"CIMMarkerPlacementOnLine"===k.type||"CIMMarkerPlacementOnVertices"===
k.type};n.isCIMStroke=function(k){return"CIMGradientStroke"===k.type||"CIMPictureStroke"===k.type||"CIMSolidStroke"===k.type};n.isGeometryEngineRequired=k=>{if(!k)return!1;for(const t of k)switch(t.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};n.resampleHermite=function(k,t,E,y,H,G,D=!0){const p=t/H;E/=G;const c=Math.ceil(p/2),a=Math.ceil(E/2);for(let e=0;e<G;e++)for(let q=0;q<H;q++){const A=4*(q+(D?G-e-1:e)*H);var h=0;let f=0,r=0,v=0,B=0,w=0,u=0;const C=
(e+.5)*E;for(let J=Math.floor(e*E);J<(e+1)*E;J++){var d=Math.abs(C-(J+.5))/a;const S=(q+.5)*p;d*=d;for(let T=Math.floor(q*p);T<(q+1)*p;T++){let P=Math.abs(S-(T+.5))/c;h=Math.sqrt(d+P*P);-1<=h&&1>=h&&(h=2*h*h*h-3*h*h+1,0<h&&(P=4*(T+J*t),u+=h*k[P+3],r+=h,255>k[P+3]&&(h=h*k[P+3]/250),v+=h*k[P],B+=h*k[P+1],w+=h*k[P+2],f+=h))}}y[A]=v/f;y[A+1]=B/f;y[A+2]=w/f;y[A+3]=u/r}};n.toCIMSymbolJSON=function(k){var t;return null==(t=k.data)?void 0:t.symbol};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(g,n,m,k,t){function E(a,h){const d=[],e=a.length-1;5===a.length?d.push(0,2,4):d.push(0,e);return a.map((q,A)=>d.includes(A)?t.createStopLabel(q,A,e,h):null)}function y(){y=m._asyncToGenerator(function*(a,h,d){let e=!1,q=[],A=[];if(a.stops){var f=a.stops;q=f.map(v=>v.value);(e=f.some(v=>!!v.label))&&(A=f.map(v=>v.label))}f=q[q.length-1];
if(null==q[0]&&null==f)return null;const r=e?null:E(q,d);return(yield Promise.all(q.map(function(){var v=m._asyncToGenerator(function*(B,w){const u="opacity"===a.type?yield H(B,a,h):(yield new Promise((C,J)=>g(["../../../renderers/visualVariables/support/visualVariableUtils"],C,J))).getColor(a,B);return{value:B,color:u,label:e?A[w]:r[w]}});return function(B,w){return v.apply(this,arguments)}}()))).reverse()});return y.apply(this,arguments)}function H(a,h){return G.apply(this,arguments)}function G(){G=
m._asyncToGenerator(function*(a,h,d=c){d=new k(d);a=(yield new Promise((e,q)=>g(["../../../renderers/visualVariables/support/visualVariableUtils"],e,q))).getOpacity(h,a);null!=a&&(d.a=a);return d});return G.apply(this,arguments)}function D(a,h){const {startIndex:d,endIndex:e,weight:q}=p(a,h);if(d===e)return h[d].color;a=k.blendColors(h[d].color,h[e].color,q);return new k(a)}function p(a,h){let d=0,e=h.length-1;h.some((q,A)=>{if(a<q.value)return e=A,!0;d=A;return!1});return{startIndex:d,endIndex:e,
weight:(a-h[d].value)/(h[e].value-h[d].value)}}const c=new k([64,64,64]);n.getColorFromPointCloudStops=D;n.getRampStops=function(a,h,d){return y.apply(this,arguments)};n.getRampStopsForPointCloud=function(a){let h=!1,d=[],e=[];d=a.map(f=>f.value);(h=a.some(f=>!!f.label))&&(e=a.map(f=>f.label));const q=d[d.length-1];if(null==d[0]&&null==q)return null;const A=h?null:E(d,!1);return d.map((f,r)=>{const v=D(f,a);return{value:f,color:v,label:h?e[r]:A[r]}}).reverse()};n.getStrectchRampStops=function(a,h){let d=
[];if(a&&"multipart"===a.type)a.colorRamps.reverse().forEach((e,q)=>{0===q?d.push({value:h.max,color:new k(e.toColor),label:"high"}):d.push({value:null,color:new k(e.toColor),label:""});q===a.colorRamps.length-1?d.push({value:h.min,color:new k(e.fromColor),label:"low"}):d.push({value:null,color:new k(e.fromColor),label:""})});else{let e,q;a&&"algorithmic"===a.type?(e=a.fromColor,q=a.toColor):(e=[0,0,0,1],q=[255,255,255,1]);d=[{value:h.max,color:new k(q),label:"high"},{value:h.min,color:new k(e),label:"low"}]}return d};
Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(g,n,m,k,t,E,y){function H(c){return G.apply(this,arguments)}function G(){G=m._asyncToGenerator(function*(c){if(!("visualVariables"in c&&c.visualVariables))return null;
c=c.visualVariables.find(d=>"color"===d.type);if(!c)return null;var a=null,h=null;if(c.stops){if(1===c.stops.length)return c.stops[0].color;a=c.stops[0].value;h=c.stops[c.stops.length-1].value}a+=(h-a)/2;({getColor:h}=yield new Promise((d,e)=>g(["../../../renderers/visualVariables/support/visualVariableUtils"],d,e)));return h(c,a)});return G.apply(this,arguments)}function D(){D=m._asyncToGenerator(function*(c,a){const h=c.trailCap,d=c.trailWidth||1;c=a||(yield H(c))||c.color;return new y({cap:h,color:c,
width:d})});return D.apply(this,arguments)}const p=t.convertDateFormatToIntlOptions("short-date");n.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];n.SPECIAL_CHARS_GREATER_THAN="\x3e";n.SPECIAL_CHARS_LESS_THAN="\x3c";n.createStopLabel=function(c,a,h,d){let e="";0===a?e="\x3c ":a===h&&(e="\x3e ");a=null;a=d?t.formatDate(c,p):E.format(c);return e+a};n.getMedianColor=H;n.getSymbolForFlowRenderer=function(c,a){return D.apply(this,arguments)};Object.defineProperties(n,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(g,n){g.getHeatmapRampStops=function(m){if(!m.colorStops)return[];const k=[...m.colorStops].filter(E=>{var y;return 0<(null==(y=E.color)?void 0:y.a)});let t=k.length-1;if(k&&k[0]){const E=k[t];E&&1!==E.ratio&&(k.push(new n({ratio:1,color:E.color})),t++)}return k.map((E,y)=>{let H="";if(0===y){var G;H=(null==
(G=m.legendOptions)?void 0:G.minLabel)||"low"}else if(y===t){var D;H=(null==(D=m.legendOptions)?void 0:D.maxLabel)||"high"}return{color:E.color,label:H,ratio:E.ratio}}).reverse()};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c){const a={chartAnimation:!0};m=function(h){function d(q){q=h.call(this,q)||this;q.abilities={...a};q.activeMediaInfoIndex=0;q.attributes=null;q.description=null;q.fieldInfoMap=null;q.formattedAttributes=null;q.expressionAttributes=null;q.layer=null;q.mediaInfos=null;q.popupTemplate=null;q.relatedInfos=null;q.title=null;return q}g._inheritsLoose(d,h);var e=d.prototype;e.castAbilities=function(q){return{...a,...q}};e.setActiveMedia=function(q){this._setContentElementMedia(q)};
e.next=function(){this._pageContentElementMedia(1)};e.previous=function(){this._pageContentElementMedia(-1)};e._setContentElementMedia=function(q){const {formattedMediaInfoCount:A}=this;this.activeMediaInfoIndex=(q+A)%A};e._pageContentElementMedia=function(q){const {activeMediaInfoIndex:A}=this;this._setContentElementMedia(A+q)};e._formatMediaInfos=function(){const {attributes:q,mediaInfos:A,formattedAttributes:f,expressionAttributes:r,fieldInfoMap:v,layer:B}=this;return null==A?void 0:A.map(w=>{w=
null==w?void 0:w.clone();if(!w)return null;w.title=p.substituteFieldsInLinksAndAttributes({attributes:q,fieldInfoMap:v,globalAttributes:f,expressionAttributes:r,layer:B,text:w.title});w.caption=p.substituteFieldsInLinksAndAttributes({attributes:q,fieldInfoMap:v,globalAttributes:f,expressionAttributes:r,layer:B,text:w.caption});w.altText=p.substituteFieldsInLinksAndAttributes({attributes:q,fieldInfoMap:v,globalAttributes:f,expressionAttributes:r,layer:B,text:w.altText});if("image"===w.type){var {value:u}=
w;this._setImageValue({value:u,formattedAttributes:f,layer:B});return w.value.sourceURL?w:void 0}return"pie-chart"===w.type||"line-chart"===w.type||"column-chart"===w.type||"bar-chart"===w.type?({value:u}=w,this._setChartValue({value:u,chartType:w.type,attributes:q,formattedAttributes:f,layer:B}),w):null}).filter(Boolean)};e._setImageValue=function(q){const {fieldInfoMap:A}=this,{value:f,formattedAttributes:r,layer:v}=q,{linkURL:B,sourceURL:w}=f;w&&(q=p.fixTokens(w,v),f.sourceURL=p.substituteAttributes({formattedAttributes:r,
template:q,fieldInfoMap:A}));B&&(q=p.fixTokens(B,v),f.linkURL=p.substituteAttributes({formattedAttributes:r,template:q,fieldInfoMap:A}))};e._setChartValue=function(q){const {value:A,attributes:f,formattedAttributes:r,chartType:v,layer:B}=q,{popupTemplate:w,relatedInfos:u}=this,{fields:C,normalizeField:J}=A;A.fields=p.getFixedFieldNames(C,B);J&&(A.normalizeField=p.getFixedFieldName(J,B));if(C.some(T=>!!(null!=r[T]||p.isRelatedField(T)&&u.size))){var S=null==w?void 0:w.fieldInfos;C.forEach(T=>{p.isRelatedField(T)?
A.series=[...A.series,...this._getRelatedChartInfos({fieldInfos:S,fieldName:T,formattedAttributes:r,chartType:v,value:A})]:(T=this._getChartOption({value:A,attributes:f,chartType:v,formattedAttributes:r,fieldName:T,fieldInfos:S}),A.series.push(T))})}};e._getRelatedChartInfos=function(q){var A;const {fieldInfos:f,fieldName:r,formattedAttributes:v,chartType:B,value:w}=q,u=[];q=c.getRelatedFieldInfo(r);const {layerId:C,fieldName:J}=q;q=null==(A=this.relatedInfos)?void 0:A.get(C.toString());if(!q)return u;
const {relatedFeatures:S,relation:T}=q;if(!T||!S)return u;({cardinality:A}=T);S.forEach(P=>{const {attributes:X}=P;X&&Object.keys(X).forEach(Q=>{Q===J&&u.push(this._getChartOption({value:w,attributes:X,formattedAttributes:v,fieldName:r,chartType:B,relatedFieldName:Q,fieldInfos:f}))})});return"one-to-many"===A||"many-to-many"===A?u:[u[0]]};e._getTooltip=function({label:q,value:A,chartType:f}){return"pie-chart"===f?`${q}`:`${q}: ${A}`};e._getChartOption=function(q){const {value:A,attributes:f,formattedAttributes:r,
fieldName:v,relatedFieldName:B,fieldInfos:w,chartType:u}=q,{layer:C,fieldInfoMap:J}=this,{normalizeField:S,tooltipField:T}=A;q=S?p.isRelatedField(S)?f[c.getRelatedFieldInfo(S).fieldName]:f[S]:null;var P=B&&void 0!==f[B]?f[B]:void 0!==f[v]?f[v]:r[v];q=new D({fieldName:v,value:void 0===P?null:P&&q?P/q:P});if(p.isRelatedField(v)){var X,Q,O,Z,L;P=J.get(v.toLowerCase());const l=J.get(T.toLowerCase());var I=null!=(X=null==P?void 0:P.fieldName)?X:v;X=null!=(Q=null==l?void 0:l.fieldName)?Q:T;Q=null!=(O=null!=
(Z=null!=(L=r[X])?L:null==P?void 0:P.label)?Z:null==P?void 0:P.fieldName)?O:B;q.tooltip=this._getTooltip({label:Q,value:r[I],chartType:u});return q}Z=p.getFieldInfo(w,v);O=p.getFixedFieldName(v,C);Z=T&&void 0!==r[T]?r[T]:p.getFieldInfoLabel(Z||new G({fieldName:O}),null==(I=this.popupTemplate)?void 0:I.expressionInfos);q.tooltip=this._getTooltip({label:Z,value:r[O],chartType:u});return q};g._createClass(d,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||
null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return d}(m);n.__decorate([k.property()],m.prototype,"abilities",void 0);n.__decorate([y.cast("abilities")],m.prototype,"castAbilities",null);n.__decorate([k.property()],m.prototype,"activeMediaInfoIndex",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"activeMediaInfo",null);n.__decorate([k.property()],m.prototype,
"attributes",void 0);n.__decorate([k.property()],m.prototype,"description",void 0);n.__decorate([k.property()],m.prototype,"fieldInfoMap",void 0);n.__decorate([k.property()],m.prototype,"formattedAttributes",void 0);n.__decorate([k.property()],m.prototype,"expressionAttributes",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"formattedMediaInfos",null);n.__decorate([k.property()],m.prototype,"layer",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"formattedMediaInfoCount",
null);n.__decorate([k.property()],m.prototype,"mediaInfos",void 0);n.__decorate([k.property()],m.prototype,"popupTemplate",void 0);n.__decorate([k.property()],m.prototype,"relatedInfos",void 0);n.__decorate([k.property()],m.prototype,"title",void 0);return m=n.__decorate([H.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],m)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../kernel ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C,J,S,T,P,X,Q,O,Z){function L(ha,la){if(!la.relationships)return null;let pa=null;({relationships:la}=la);la.some(qa=>qa.id===parseInt(ha,10)?(pa=qa,!0):!1);return pa}function I({originRelationship:ha,relationships:la,layerId:pa}){let qa;la&&la.some(M=>{`${M.relatedTableId}`===pa&&M.id===ha.id&&(qa=M);return!!qa});return qa}function l(ha,la){la=la.toLowerCase();for(const pa in ha)if(pa.toLowerCase()===la)return ha[pa];return null}function z(ha,
la,pa,qa){const M=new X;M.outFields=["*"];M.relationshipId="number"===typeof la.id?la.id:parseInt(la.id,10);M.objectIds=[ha.attributes[pa.objectIdField]];return pa.queryRelatedFeatures(M,qa)}function x(ha,la,pa){let qa=0;const M=[];for(;qa<la.length;)M.push(`${ha} IN (${la.slice(qa,pa+qa)})`),qa+=pa;return M.join(" OR ")}function K(ha,la,pa,qa){return U.apply(this,arguments)}function U(){U=n._asyncToGenerator(function*(ha,la,pa,qa){var M=pa.layerId.toString();const {layerInfo:V,relation:ca,relatedFields:ia,
outStatistics:ka,url:ra,sourceSpatialReference:va}=la;M=I({originRelationship:ca,relationships:V.relationships,layerId:M});if(M.relationshipTableId&&M.keyFieldInRelationshipTable){pa=(yield z(ha,M,pa,qa))[ha.attributes[pa.objectIdField]];if(!pa)return null;const Ba=pa.features.map(Da=>Da.attributes[V.objectIdField]);if(0<(null==ka?void 0:ka.length)&&V.supportsStatistics)return la=new C,la.where=x(V.objectIdField,Ba,1E3),la.outFields=ia,la.outStatistics=ka,la.sourceSpatialReference=va,la={features:Promise.resolve(pa),
statsFeatures:D.executeQueryJSON(ra,la)},E.eachAlways(la)}return(M=null==M?void 0:M.keyField)?(pa=y.isNumericField(ba(V.fields,M)),ha=l(ha.attributes,ca.keyField),M=pa?`${M}=${ha}`:`${M}='${ha}'`,ha=D.executeQueryJSON(ra,new C({where:M,outFields:la.relatedFields,sourceSpatialReference:va}),qa),la=la.outStatistics&&0<la.outStatistics.length&&V.supportsStatistics?D.executeQueryJSON(ra,new C({where:M,outFields:la.relatedFields,outStatistics:la.outStatistics,sourceSpatialReference:va}),qa):null,qa={features:ha},
la&&(qa.statsFeatures=la),E.eachAlways(qa)):null});return U.apply(this,arguments)}function ba(ha,la){if(null!=ha){la=la.toLowerCase();for(const pa of ha)if(pa&&pa.name.toLowerCase()===la)return pa}return null}const ea=t.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),na=new Map;g.createRelatedInfo=function(ha,la){if(ha=L(ha,la))return{url:`${la.url}/${ha.relatedTableId}`,sourceSpatialReference:la.spatialReference,relation:ha,relatedFields:[],outStatistics:[]}};g.getDestinationRelation=
I;g.getRelatedFieldInfo=function(ha){if(!Z.isRelatedField(ha))return null;const [la,pa]=ha.split("/").slice(1);return{layerId:la,fieldName:pa}};g.queryLayerInfos=function({relatedInfos:ha,layer:la},pa){const qa={};ha.forEach((M,V)=>{({relation:M}=M);if(!M)throw V=new k("relation-required","A relation is required on a layer to retrieve related records."),ea.error(V),V;({relatedTableId:M}=M);if("number"!==typeof M)throw V=new k("A related table ID is required on a layer to retrieve related records."),
ea.error(V),V;M=`${la.url}/${M}`;const ca=na.get(M),ia=ca?ca:m(M,{query:{f:"json"},signal:pa&&pa.signal});ca||na.set(M,ia);qa[V]=ia});return E.eachAlways(qa)};g.queryRelatedFeatures=function({graphic:ha,relatedInfos:la,layer:pa},qa){const M={};la.forEach((V,ca)=>{V.layerInfo&&(M[ca]=K(ha,V,pa,qa))});return E.eachAlways(M)};g.setRelatedFeatures=function(ha,la){if(la&&ha){var {features:pa,statsFeatures:qa}=ha;ha=pa&&pa.value;la.relatedFeatures=ha?ha.features:[];ha=qa&&qa.value;la.relatedStatsFeatures=
ha?ha.features:[]}};g.updateRelatedInfo=function({relatedInfo:ha,fieldName:la,fieldInfo:pa}){ha.relatedFields.push(la);pa.statisticType&&(la=new O({statisticType:pa.statisticType,onStatisticField:la,outStatisticFieldName:la}),ha.outStatistics.push(la))};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(g,n,m,k,t,E){function y(a){if(!a)return"en-us";if(D.has(a.toLowerCase()))return a.toLowerCase();{a=a.split("-")[0].toLowerCase();let d=null;for(h of D.keys())if(h.startsWith(a)){d=h;break}var h=d}return h||"en-us"}function H(){H=m._asyncToGenerator(function*(a=E.getLocale()){a=y(a);if(p&&a===c)return p;p=(new Promise((h,d)=>g(["../../chunks/index"],h,d))).then(h=>h.index);c=a;try{const [h,d]=yield Promise.all([p,D.get(c)()]);c===a&&(h.am4core.options.defaultLocale=d.default);h.am4core.options.suppressWarnings=
!0;h.am4core.options.autoDispose=!0}catch{return c=p=null}return p});return H.apply(this,arguments)}k="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var G=[{name:"default",colors:[].concat(k.slice(30,39),k.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const D=new Map([["ar",()=>(new Promise((a,h)=>g(["../../chunks/ar"],a,h))).then(a=>a.ar)],["bg-bg",()=>(new Promise((a,
h)=>g(["../../chunks/bg_BG"],a,h))).then(a=>a.bg_BG)],["bs-ba",()=>(new Promise((a,h)=>g(["../../chunks/bs_BA"],a,h))).then(a=>a.bs_BA)],["ca-es",()=>(new Promise((a,h)=>g(["../../chunks/ca_ES"],a,h))).then(a=>a.ca_ES)],["cs-cz",()=>(new Promise((a,h)=>g(["../../chunks/cs_CZ"],a,h))).then(a=>a.cs_CZ)],["da-dk",()=>(new Promise((a,h)=>g(["../../chunks/da_DK"],a,h))).then(a=>a.da_DK)],["de-de",()=>(new Promise((a,h)=>g(["../../chunks/de_DE"],a,h))).then(a=>a.de_DE)],["de-ch",()=>(new Promise((a,h)=>
g(["../../chunks/de_CH"],a,h))).then(a=>a.de_CH)],["el-gr",()=>(new Promise((a,h)=>g(["../../chunks/el_GR"],a,h))).then(a=>a.el_GR)],["en-us",()=>(new Promise((a,h)=>g(["../../chunks/en_US"],a,h))).then(a=>a.en_US)],["en-ca",()=>(new Promise((a,h)=>g(["../../chunks/en_CA"],a,h))).then(a=>a.en_CA)],["es-es",()=>(new Promise((a,h)=>g(["../../chunks/es_ES"],a,h))).then(a=>a.es_ES)],["et-ee",()=>(new Promise((a,h)=>g(["../../chunks/et_EE"],a,h))).then(a=>a.et_EE)],["fi-fi",()=>(new Promise((a,h)=>g(["../../chunks/fi_FI"],
a,h))).then(a=>a.fi_FI)],["fr-fr",()=>(new Promise((a,h)=>g(["../../chunks/fr_FR"],a,h))).then(a=>a.fr_FR)],["he-il",()=>(new Promise((a,h)=>g(["../../chunks/he_IL"],a,h))).then(a=>a.he_IL)],["hr-hr",()=>(new Promise((a,h)=>g(["../../chunks/hr_HR"],a,h))).then(a=>a.hr_HR)],["hu-hu",()=>(new Promise((a,h)=>g(["../../chunks/hu_HU"],a,h))).then(a=>a.hu_HU)],["id-id",()=>(new Promise((a,h)=>g(["../../chunks/id_ID"],a,h))).then(a=>a.id_ID)],["it-it",()=>(new Promise((a,h)=>g(["../../chunks/it_IT"],a,h))).then(a=>
a.it_IT)],["ja-jp",()=>(new Promise((a,h)=>g(["../../chunks/ja_JP"],a,h))).then(a=>a.ja_JP)],["ko-kr",()=>(new Promise((a,h)=>g(["../../chunks/ko_KR"],a,h))).then(a=>a.ko_KR)],["lt-lt",()=>(new Promise((a,h)=>g(["../../chunks/lt_LT"],a,h))).then(a=>a.lt_LT)],["lv-lv",()=>(new Promise((a,h)=>g(["../../chunks/lv_LV"],a,h))).then(a=>a.lv_LV)],["nb-no",()=>(new Promise((a,h)=>g(["../../chunks/nb_NO"],a,h))).then(a=>a.nb_NO)],["nl-nl",()=>(new Promise((a,h)=>g(["../../chunks/nl_NL"],a,h))).then(a=>a.nl_NL)],
["pl-pl",()=>(new Promise((a,h)=>g(["../../chunks/pl_PL"],a,h))).then(a=>a.pl_PL)],["pt-br",()=>(new Promise((a,h)=>g(["../../chunks/pt_BR"],a,h))).then(a=>a.pt_BR)],["pt-pt",()=>(new Promise((a,h)=>g(["../../chunks/pt_PT"],a,h))).then(a=>a.pt_PT)],["ro-ro",()=>(new Promise((a,h)=>g(["../../chunks/ro_RO"],a,h))).then(a=>a.ro_RO)],["ru-ru",()=>(new Promise((a,h)=>g(["../../chunks/ru_RU"],a,h))).then(a=>a.ru_RU)],["sk-sk",()=>(new Promise((a,h)=>g(["../../chunks/sk_SK"],a,h))).then(a=>a.sk_SK)],["sl-sl",
()=>(new Promise((a,h)=>g(["../../chunks/sl_SL"],a,h))).then(a=>a.sl_SL)],["sr-rs",()=>(new Promise((a,h)=>g(["../../chunks/sr_RS"],a,h))).then(a=>a.sr_RS)],["sv-se",()=>(new Promise((a,h)=>g(["../../chunks/sv_SE"],a,h))).then(a=>a.sv_SE)],["th-th",()=>(new Promise((a,h)=>g(["../../chunks/th_TH"],a,h))).then(a=>a.th_TH)],["tr-tr",()=>(new Promise((a,h)=>g(["../../chunks/tr_TR"],a,h))).then(a=>a.tr_TR)],["uk-ua",()=>(new Promise((a,h)=>g(["../../chunks/uk_UA"],a,h))).then(a=>a.uk_UA)],["vi-vn",()=>
(new Promise((a,h)=>g(["../../chunks/vi_VN"],a,h))).then(a=>a.vi_VN)],["zh-cn",()=>(new Promise((a,h)=>g(["../../chunks/zh_Hans"],a,h))).then(a=>a.zh_Hans)],["zh-hk",()=>(new Promise((a,h)=>g(["../../chunks/zh_Hant"],a,h))).then(a=>a.zh_Hant)],["zh-tw",()=>(new Promise((a,h)=>g(["../../chunks/zh_Hant"],a,h))).then(a=>a.zh_Hant)]]);let p,c;n.getChartLocale=y;n.getColorSet=function(a,h="default"){const d=G.find(e=>e.name===h);return d?d.colors.map(e=>a.color(e)):null};n.loadChartsModule=function(){return H.apply(this,
arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C){t=function(J){function S(T){var P=J.call(this,T)||this;P._abortController=null;P.expressionInfo=null;P.graphic=null;P.contentElement=null;P.contentElementViewModel=null;P.interceptor=null;P.view=null;P._cancelQuery=()=>{const {_abortController:X}=g._assertThisInitialized(P);X&&X.abort();P._abortController=null};P._createVM=()=>{var X,Q;const O=null==(X=P.contentElement)?void 0:X.type;null==(Q=P.contentElementViewModel)?void 0:Q.destroy();
X="fields"===O?new w:"media"===O?new u:"text"===O?new B:null;P._set("contentElementViewModel",X)};P._compile=g._asyncToGenerator(function*(){P._cancelQuery();const X=new AbortController;P._abortController=X;yield P._compileExpression();P._abortController===X&&(P._abortController=null)});P._compileThrottled=H.throttle(P._compile,1,g._assertThisInitialized(P));P._compileExpression=g._asyncToGenerator(function*(){const {expressionInfo:X,graphic:Q,interceptor:O,spatialReference:Z,map:L,view:I,_abortController:l}=
g._assertThisInitialized(P);if(X&&Q&&Z&&L){var z=yield C.loadArcadeUtils();if(l===P._abortController)if((z=yield C.createCompiledExpression({arcadeUtils:z,expressionInfo:X,graphic:Q,interceptor:O,map:L,spatialReference:Z,view:I}))&&"esri.arcade.Dictionary"===z.declaredClass){z=yield k.castAsJsonAsync(z,l.signal);var x=null==z?void 0:z.type;z="media"===x?f.fromJSON(z):"text"===x?r.fromJSON(z):"fields"===x?A.fromJSON(z):null;P._set("contentElement",z)}else P._set("contentElement",null)}else P._set("contentElement",
null)});P.handles.add([y.watch(()=>[P.expressionInfo,P.graphic,P.map,P.spatialReference,P.view],()=>P._compileThrottled(),y.initial),y.watch(()=>[P.contentElement],()=>P._createVM(),y.initial)]);return P}g._inheritsLoose(S,J);S.prototype.destroy=function(){var T;this._cancelQuery();null==(T=this.contentElementViewModel)?void 0:T.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};g._createClass(S,[{key:"spatialReference",get:function(){var T;return(null==(T=this.view)?
void 0:T.spatialReference)||null},set:function(T){void 0===T?this._clearOverride("spatialReference"):this._override("spatialReference",T)}},{key:"state",get:function(){const {_abortController:T,contentElement:P,contentElementViewModel:X}=this;return T?"loading":P||X?"ready":"disabled"}},{key:"map",get:function(){var T;return(null==(T=this.view)?void 0:T.map)||null},set:function(T){void 0===T?this._clearOverride("map"):this._override("map",T)}}]);return S}(E.HandleOwnerMixin(t));n.__decorate([G.property()],
t.prototype,"_abortController",void 0);n.__decorate([G.property({type:v})],t.prototype,"expressionInfo",void 0);n.__decorate([G.property({type:m})],t.prototype,"graphic",void 0);n.__decorate([G.property({readOnly:!0})],t.prototype,"contentElement",void 0);n.__decorate([G.property({readOnly:!0})],t.prototype,"contentElementViewModel",void 0);n.__decorate([G.property()],t.prototype,"interceptor",void 0);n.__decorate([G.property()],t.prototype,"spatialReference",null);n.__decorate([G.property({readOnly:!0})],
t.prototype,"state",null);n.__decorate([G.property()],t.prototype,"map",null);n.__decorate([G.property()],t.prototype,"view",void 0);return t=n.__decorate([a.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],t)})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A){function f(N,Y,ma){return""===Y||null===Y||void 0===Y||Y===ma||Y===ma?N:N=N.split(Y).join(ma)}function r(N){return N instanceof cb||N instanceof m||N instanceof ab}function v(N){return w(N)||C(N)||O(N)||u(N)||null===N||N===Ya||"number"===typeof N?!0:!1}function B(N,Y){return void 0===N?Y:N}function w(N){return"string"===typeof N||N instanceof String}function u(N){return"boolean"===typeof N}function C(N){return"number"===typeof N}function J(N){return"number"===
typeof N&&isFinite(N)&&Math.floor(N)===N}function S(N){return N instanceof Array}function T(N){return"esri.arcade.Feature"===(null==N?void 0:N.arcadeDeclaredClass)?!0:!1}function P(N){return!0===(N&&N.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===N.declaredRootClass)}function X(N){return!0===(N&&N.declaredRootClass&&"esri.arcade.featureSetCollection"===N.declaredRootClass)}function Q(N){return N instanceof k}function O(N){return N instanceof Date}function Z(N,Y,ma){if(N.length<
Y||N.length>ma)throw Error("Function called with wrong number of Parameters");}function L(N){return 0>N?-Math.round(-N):Math.round(N)}function I(){let N=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Y){const ma=(N+16*Math.random())%16|0;N=Math.floor(N/16);return("x"===Y?ma:ma&3|8).toString(16)})}function l(N,Y){if(!1===isNaN(N)){if(void 0===Y||null===Y||""===Y)return N.toString();Y=f(Y,"\u2030","");Y=f(Y,"\u00a4","");return d.format(N,{pattern:Y})}return N.toString()}
function z(N,Y){N=a.DateTime.fromJSDate(N);return void 0===Y||null===Y||""===Y?N.toISO({suppressMilliseconds:!0}):N.toFormat(x(Y),{locale:q.getLocale(),numberingSystem:"latn"})}function x(N){N=N.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let Y="";const ma=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const ua of N.match(ma))switch(ua){case "D":Y+=
"d";break;case "DD":Y+="dd";break;case "DDD":Y+="o";break;case "d":Y+="c";break;case "ddd":Y+="ccc";break;case "dddd":Y+="cccc";break;case "M":Y+="L";break;case "MM":Y+="LL";break;case "MMM":Y+="LLL";break;case "MMMM":Y+="LLLL";break;case "YY":Y+="yy";break;case "Y":case "YYYY":Y+="yyyy";break;case "Q":Y+="q";break;case "Z":Y+="ZZ";break;case "ZZ":Y+="ZZZ";break;case "S":Y+="'S'";break;case "SS":Y+="'SS'";break;case "SSS":Y+="u";break;case "A":case "a":Y+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Y+=
ua;break;default:Y=2<=ua.length&&"["===ua.slice(0,1)&&"]"===ua.slice(-1)?Y+`'${ua.slice(1,-1)}'`:Y+`'${ua}'`}return Y}function K(N,Y,ma){switch(ma){case "\x3e":return N>Y;case "\x3c":return N<Y;case "\x3e\x3d":return N>=Y;case "\x3c\x3d":return N<=Y}return!1}function U(N,Y,ma){if(null===N){if(null===Y||Y===Ya)return K(null,null,ma);if(C(Y))return K(0,Y,ma);if(w(Y)||u(Y))return K(0,pa(Y),ma);if(O(Y))return K(0,Y.getTime(),ma)}if(N===Ya){if(null===Y||Y===Ya)return K(null,null,ma);if(C(Y))return K(0,
Y,ma);if(w(Y)||u(Y))return K(0,pa(Y),ma);if(O(Y))return K(0,Y.getTime(),ma)}else if(C(N)){if(C(Y))return K(N,Y,ma);if(u(Y))return K(N,pa(Y),ma);if(null===Y||Y===Ya)return K(N,0,ma);if(w(Y))return K(N,pa(Y),ma);if(O(Y))return K(N,Y.getTime(),ma)}else if(w(N)){if(w(Y))return K(ea(N),ea(Y),ma);if(O(Y))return K(pa(N),Y.getTime(),ma);if(C(Y))return K(pa(N),Y,ma);if(null===Y||Y===Ya)return K(pa(N),0,ma);if(u(Y))return K(pa(N),pa(Y),ma)}else if(O(N)){if(O(Y))return K(N,Y,ma);if(null===Y||Y===Ya)return K(N.getTime(),
0,ma);if(C(Y))return K(N.getTime(),Y,ma);if(u(Y)||w(Y))return K(N.getTime(),pa(Y),ma)}else if(u(N)){if(u(Y))return K(N,Y,ma);if(C(Y))return K(pa(N),pa(Y),ma);if(O(Y))return K(pa(N),Y.getTime(),ma);if(null===Y||Y===Ya)return K(pa(N),0,ma);if(w(Y))return K(pa(N),pa(Y),ma)}return!ba(N,Y)||"\x3c\x3d"!==ma&&"\x3e\x3d"!==ma?!1:!0}function ba(N,Y){if(N===Y||null===N&&Y===Ya||null===Y&&N===Ya)return!0;if(O(N)&&O(Y))return N.getTime()===Y.getTime();if(N instanceof t||N instanceof E)return N.equalityTest(Y);
if(N instanceof D&&Y instanceof D){const ma=N.cache._arcadeCacheId,ua=Y.cache._arcadeCacheId;if(void 0!==ma&&null!==ma)return ma===ua}return void 0!==N&&void 0!==Y&&null!==N&&null!==Y&&"object"===typeof N&&"object"===typeof Y&&(N._arcadeCacheId===Y._arcadeCacheId&&void 0!==N._arcadeCacheId&&null!==N._arcadeCacheId||N._underlyingGraphic===Y._underlyingGraphic&&void 0!==N._underlyingGraphic&&null!==N._underlyingGraphic)?!0:!1}function ea(N,Y){if(w(N))return N;if(null===N)return"";if(C(N))return l(N,
Y);if(u(N))return N.toString();if(O(N))return z(N,Y);if(N instanceof H)return JSON.stringify(N.toJSON());if(S(N)){Y=[];for(var ma=0;ma<N.length;ma++)Y[ma]=la(N[ma]);return"["+Y.join(",")+"]"}if(N instanceof k){Y=[];for(ma=0;ma<N.length();ma++)Y[ma]=la(N.get(ma));return"["+Y.join(",")+"]"}return null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():r(N)?"object, Function":""}function na(N){const Y=[];if(!1===S(N))return null;if(N instanceof k){for(var ma=0;ma<N.length();ma++)Y[ma]=pa(N.get(ma));
return Y}for(ma=0;ma<N.length;ma++)Y[ma]=pa(N[ma]);return Y}function ha(N,Y){if(w(N))return N;if(null===N)return"";if(C(N))return l(N,Y);if(u(N))return N.toString();if(O(N))return z(N,Y);if(N instanceof H)return N instanceof y?'{"xmin":'+N.xmin.toString()+',"ymin":'+N.ymin.toString()+","+(N.hasZ?'"zmin":'+N.zmin.toString()+",":"")+(N.hasM?'"mmin":'+N.mmin.toString()+",":"")+'"xmax":'+N.xmax.toString()+',"ymax":'+N.ymax.toString()+","+(N.hasZ?'"zmax":'+N.zmax.toString()+",":"")+(N.hasM?'"mmax":'+N.mmax.toString()+
",":"")+'"spatialReference":'+Ga(N.spatialReference)+"}":Ga(N.toJSON(),(ua,wa)=>ua.key===wa.key?0:"spatialReference"===ua.key?1:"spatialReference"===wa.key||ua.key<wa.key?-1:ua.key>wa.key?1:0);if(S(N)){Y=[];for(var ma=0;ma<N.length;ma++)Y[ma]=la(N[ma]);return"["+Y.join(",")+"]"}if(N instanceof k){Y=[];for(ma=0;ma<N.length();ma++)Y[ma]=la(N.get(ma));return"["+Y.join(",")+"]"}return null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():r(N)?"object, Function":""}function la(N){return null===
N?"null":u(N)||C(N)||w(N)?JSON.stringify(N):N instanceof H||N instanceof k||N instanceof Array?ha(N):N instanceof Date?JSON.stringify(z(N,"")):null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():"null"}function pa(N,Y){return C(N)?N:null===N||""===N?0:O(N)?NaN:u(N)?N?1:0:S(N)||""===N||void 0===N?NaN:void 0!==Y&&w(N)?(Y=f(Y,"\u2030",""),Y=f(Y,"\u00a4",""),d.parse(N,{pattern:Y})):N===Ya?0:Number(N)}function qa(N){return O(N)?N:w(N)&&(N=V(N))?N.toJSDate():null}function M(N){return O(N)?
a.DateTime.fromJSDate(N):w(N)?V(N):null}function V(N){const Y=/ (\d\d)/;let ma=a.DateTime.fromISO(N);return ma.isValid||Y.test(N)&&(N=N.replace(Y,"T$1"),ma=a.DateTime.fromISO(N),ma.isValid)?ma:null}function ca(N){return u(N)?N:w(N)?(N=N.toLowerCase(),"true"===N?!0:!1):C(N)?0===N||isNaN(N)?!1:!0:!1}function ia(N,Y){if(h.isNone(N))return null;if(null===N.spatialReference||void 0===N.spatialReference)N.spatialReference=Y;return N}function ka(N){if(null===N)return null;if(N instanceof D)return"NaN"===
N.x||null===N.x||isNaN(N.x)?null:N;if(N instanceof p){if(0===N.rings.length)return null;for(const Y of N.rings)if(0<Y.length)return N;return null}if(N instanceof c){if(0===N.paths.length)return null;for(const Y of N.paths)if(0<Y.length)return N;return null}return N instanceof G?0===N.points.length?null:N:N instanceof y?"NaN"===N.xmin||null===N.xmin||isNaN(N.xmin)?null:N:null}function ra(N,Y){if(!N||!N.domain)return Y;let ma=null;if("string"===N.field.type||"esriFieldTypeString"===N.field.type)Y=ea(Y);
else{if(null===Y||void 0===Y)return null;if(""===Y)return Y;Y=pa(Y)}for(let ua=0;ua<N.domain.codedValues.length;ua++){const wa=N.domain.codedValues[ua];wa.code===Y&&(ma=wa)}return null===ma?Y:ma.name}function va(N,Y){if(!N||!N.domain)return Y;let ma=null;Y=ea(Y);for(let ua=0;ua<N.domain.codedValues.length;ua++){const wa=N.domain.codedValues[ua];wa.name===Y&&(ma=wa)}return null===ma?Y:ma.code}function Ba(N,Y,ma=null,ua=null){if(!Y||!Y.fields)return null;let wa=null;for(let bb=0;bb<Y.fields.length;bb++){const $a=
Y.fields[bb];$a.name.toLowerCase()===N.toString().toLowerCase()&&(wa=$a)}if(null===wa)throw Error("Field not found");let Ma,Pa;null===ua&&ma&&Y.typeIdField&&(ua=ma.hasField(Y.typeIdField)?ma.field(Y.typeIdField):null);null!==ua&&void 0!==ua&&Y.types.some(function(bb){return bb.id===ua?((Ma=bb.domains&&bb.domains[wa.name])&&"inherited"===Ma.type&&(Ma=Da(wa.name,Y),Pa=!0),!0):!1});Pa||Ma||(Ma=Da(N,Y));return{field:wa,domain:Ma}}function Da(N,Y){let ma;Y.fields.some(function(ua){ua.name.toLowerCase()===
N.toLowerCase()&&(ma=ua.domain);return!!ma});return ma}function Ga(N,Y){Y||(Y={});"function"===typeof Y&&(Y={cmp:Y});const ma="boolean"===typeof Y.cycles?Y.cycles:!1,ua=Y.cmp&&function(Ma){return function(Pa){return function(bb,$a){return Ma({key:bb,value:Pa[bb]},{key:$a,value:Pa[$a]})}}}(Y.cmp),wa=[];return function bb(Pa){Pa&&Pa.toJSON&&"function"===typeof Pa.toJSON&&(Pa=Pa.toJSON());if(void 0!==Pa){if("number"===typeof Pa)return isFinite(Pa)?""+Pa:"null";if("object"!==typeof Pa)return JSON.stringify(Pa);
var $a;if(Array.isArray(Pa)){var db="[";for($a=0;$a<Pa.length;$a++)$a&&(db+=","),db+=bb(Pa[$a])||"null";return db+"]"}if(null===Pa)return"null";if(wa.includes(Pa)){if(ma)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ob=wa.push(Pa)-1,Cb=Object.keys(Pa).sort(ua&&ua(Pa));db="";for($a=0;$a<Cb.length;$a++){const Db=Cb[$a],Eb=bb(Pa[Db]);Eb&&(db&&(db+=","),db+=JSON.stringify(Db)+":"+Eb)}wa.splice(ob,1);return"{"+db+"}"}}(N)}function Fa(N){if(null===
N)return null;const Y=[];for(const ma of N)ma&&ma.arcadeDeclaredClass&&"esri.arcade.Feature"===ma.arcadeDeclaredClass?Y.push(ma.geometry()):Y.push(ma);return Y}function ya(N,Y){if(Y instanceof D)N.push(Y.hasZ?Y.hasM?[Y.x,Y.y,Y.z,Y.m]:[Y.x,Y.y,Y.z]:[Y.x,Y.y]);else throw Error("Invalid Argument");}function nb(N,Y){if(S(N)||Q(N)){let ma=!1,ua=!1,wa=[];if(S(N)){for(const Ma of N)ya(wa,Ma);0<wa.length&&(Y=N[0].spatialReference,ma=N[0].hasZ,ua=N[0].hasM)}else if(N instanceof E)wa=N._elements,0<wa.length&&
(ma=N._hasZ,ua=N._hasM,Y=N.get(0).spatialReference);else if(Q(N)){for(const Ma of N.toArray())ya(wa,Ma);0<wa.length&&(Y=N.get(0).spatialReference,ma=!0===N.get(0).hasZ,ua=!0===N.get(0).hasM)}else throw Error("Invalid Argument");if(0===wa.length)return null;!1===e.isClockwise(wa,ua,ma)&&(wa=wa.slice(0).reverse());return new p({rings:[wa],spatialReference:Y,hasZ:ma,hasM:ua})}return N}function Xa(N,Y){if(S(N)||Q(N)){let ma=!1,ua=!1,wa=[];if(S(N)){for(const Ma of N)ya(wa,Ma);0<wa.length&&(Y=N[0].spatialReference,
ma=!0===N[0].hasZ,ua=!0===N[0].hasM)}else if(N instanceof E)wa=N._elements,0<wa.length&&(ma=N._hasZ,ua=N._hasM,Y=N.get(0).spatialReference);else if(Q(N)){for(const Ma of N.toArray())ya(wa,Ma);0<wa.length&&(Y=N.get(0).spatialReference,ma=!0===N.get(0).hasZ,ua=!0===N.get(0).hasM)}return 0===wa.length?null:new c({paths:[wa],spatialReference:Y,hasZ:ma,hasM:ua})}return N}function eb(N,Y){if(S(N)||Q(N)){let ma=!1,ua=!1,wa=[];if(S(N)){for(const Ma of N)ya(wa,Ma);0<wa.length&&(Y=N[0].spatialReference,ma=
!0===N[0].hasZ,ua=!0===N[0].hasM)}else if(N instanceof E)wa=N._elements,0<wa.length&&(ma=N._hasZ,ua=N._hasM,Y=N.get(0).spatialReference);else if(Q(N)){for(const Ma of N.toArray())ya(wa,Ma);0<wa.length&&(Y=N.get(0).spatialReference,ma=!0===N.get(0).hasZ,ua=!0===N.get(0).hasM)}return 0===wa.length?null:new G({points:wa,spatialReference:Y,hasZ:ma,hasM:ua})}return N}function pb(N,Y=!1){const ma=[];if(null===N)return ma;if(!0===S(N)){for(var ua=0;ua<N.length;ua++){var wa=ea(N[ua]);""===wa&&!0!==Y||ma.push(wa)}return ma}if(N instanceof
k){for(ua=0;ua<N.length();ua++)wa=ea(N.get(ua)),""===wa&&!0!==Y||ma.push(wa);return ma}return v(N)?(N=ea(N),""===N&&!0!==Y||ma.push(N),ma):[]}function vb(N){qb++;return 0===qb%100?(qb=0,new Promise(Y=>{setTimeout(()=>{Y(N)},0)})):N}function Qa(N,Y,ma){switch(ma){case "\x26":return N&Y;case "|":return N|Y;case "^":return N^Y;case "\x3c\x3c":return N<<Y;case "\x3e\x3e":return N>>Y;case "\x3e\x3e\x3e":return N>>>Y}}function Sa(N,Y=null){if(null!=N){if(u(N)||C(N)||w(N))return N;if(N instanceof H)return!0===
(null==Y?void 0:Y.keepGeometryType)?N:N.toJSON();if(N instanceof k)return N.toArray().map(ma=>Sa(ma,Y));if(N instanceof Array)return N.map(ma=>Sa(ma,Y));if(N instanceof Date)return N;if(null!==N&&"object"===typeof N&&void 0!==N.castAsJson)return N.castAsJson(Y)}return null}function Ea(N,Y,ma,ua,wa){return da.apply(this,arguments)}function da(){da=n._asyncToGenerator(function*(N,Y,ma,ua,wa){N=yield ja(N,Y,ma);wa[ua]=N});return da.apply(this,arguments)}function ja(N){return sa.apply(this,arguments)}
function sa(){sa=n._asyncToGenerator(function*(N,Y=null,ma=null){N instanceof k&&(N=N.toArray());if(null!=N){if(v(N)||N instanceof H||N instanceof Date)return Sa(N,ma);if(N instanceof Array){const ua=[],wa=[];for(const Ma of N)null===Ma||v(Ma)||Ma instanceof H||Ma instanceof Date?wa.push(Sa(Ma,ma)):(wa.push(null),ua.push(Ea(Ma,Y,ma,wa.length-1,wa)));0<ua.length&&(yield Promise.all(ua));return wa}if(null!==N&&"object"===typeof N&&void 0!==N.castAsJsonAsync)return N.castAsJsonAsync(Y,ma)}return null});
return sa.apply(this,arguments)}function xa(N,Y,ma){const ua=N.fullSchema();return null!==ua&&ua.fields?Ba(Y,ua,N,ma):null}function Aa(N){N=N.fullSchema();return null!==N&&N.fields?N.typeIdField?{subtypeField:N.typeIdField,subtypes:N.types?N.types.map(Y=>({name:Y.name,code:Y.id})):[]}:null:null}function Ca(N,Y,ma,ua){const wa=N.fullSchema();if(null===wa||!wa.fields)return null;ua=Ba(Y,wa,N,ua);if(void 0===ma)try{ma=N.field(Y)}catch(Ma){return null}return ra(ua,ma)}function Ka(N,Y,ma,ua){const wa=
N.fullSchema();if(null===wa||!wa.fields)return null;if(void 0===ma){try{ma=N.field(Y)}catch(Ma){return null}return ma}N=Ba(Y,wa,N,ua);return va(N,ma)}function Ua(N){N=N.fullSchema();if(null===N||!N.fields)return null;const Y=[];for(const ma of N.fields)Y.push(A.esriFieldToJson(ma));return{objectIdField:N.objectIdField,globalIdField:N.globalIdField,geometryType:void 0===A.layerGeometryEsriRestConstants[N.geometryType]?"":A.layerGeometryEsriRestConstants[N.geometryType],fields:Y}}let Ta=function(N){this.value=
N},Ia=function(N){this.value=N},cb=function(N){this.fn=N},ab=function(N,Y){this.paramCount=Y;this.fn=N};const lb=cb,fb=ab,Ya={type:"VOID"},gb={type:"BREAK"},sb={type:"CONTINUE"};let qb=0;const rb=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Ta,ImplicitResultE:Ia,NativeFunctionE:cb,SizzleFunctionE:ab,NativeFunction:lb,ImplicitResult:Ia,ReturnResult:Ta,SizzleFunction:fb,voidOperation:Ya,breakResult:gb,continueResult:sb,multiReplace:f,isFunctionParameter:r,isSimpleType:v,defaultUndefined:B,
isString:w,isBoolean:u,isNumber:C,isInteger:J,isArray:S,isFeature:T,isFeatureSet:P,isFeatureSetCollection:X,isImmutableArray:Q,isDate:O,pcCheck:Z,absRound:L,generateUUID:I,formatNumber:l,formatDate:z,standardiseDateFormat:x,greaterThanLessThan:U,equalityTest:ba,toString:ea,toNumberArray:na,toStringExplicit:ha,toNumber:pa,toDate:qa,toDateTime:M,toBoolean:ca,fixSpatialReference:ia,fixNullGeometry:ka,getDomainValue:ra,getDomainCode:va,getDomain:Ba,stableStringify:Ga,autoCastFeatureToGeometry:Fa,autoCastArrayOfPointsToPolygon:nb,
autoCastArrayOfPointsToPolyline:Xa,autoCastArrayOfPointsToMultiPoint:eb,toStringArray:pb,tick:vb,binaryOperator:Qa,castAsJson:Sa,castAsJsonAsync:ja,featureFullDomain:xa,featureSubtypes:Aa,featureDomainValueLookup:Ca,featureDomainCodeLookup:Ka,featureSchema:Ua},Symbol.toStringTag,{value:"Module"}));g.ImplicitResult=Ia;g.ImplicitResultE=Ia;g.NativeFunction=lb;g.NativeFunctionE=cb;g.ReturnResult=Ta;g.ReturnResultE=Ta;g.SizzleFunction=fb;g.SizzleFunctionE=ab;g.absRound=L;g.autoCastArrayOfPointsToMultiPoint=
eb;g.autoCastArrayOfPointsToPolygon=nb;g.autoCastArrayOfPointsToPolyline=Xa;g.autoCastFeatureToGeometry=Fa;g.binaryOperator=Qa;g.breakResult=gb;g.castAsJson=Sa;g.castAsJsonAsync=ja;g.continueResult=sb;g.defaultUndefined=B;g.equalityTest=ba;g.featureDomainCodeLookup=Ka;g.featureDomainValueLookup=Ca;g.featureFullDomain=xa;g.featureSchema=Ua;g.featureSubtypes=Aa;g.fixNullGeometry=ka;g.fixSpatialReference=ia;g.formatDate=z;g.formatNumber=l;g.generateUUID=I;g.getDomain=Ba;g.getDomainCode=va;g.getDomainValue=
ra;g.greaterThanLessThan=U;g.isArray=S;g.isBoolean=u;g.isDate=O;g.isFeature=T;g.isFeatureSet=P;g.isFeatureSetCollection=X;g.isFunctionParameter=r;g.isImmutableArray=Q;g.isInteger=J;g.isNumber=C;g.isSimpleType=v;g.isString=w;g.lc=rb;g.multiReplace=f;g.pcCheck=Z;g.stableStringify=Ga;g.standardiseDateFormat=x;g.tick=vb;g.toBoolean=ca;g.toDate=qa;g.toDateTime=M;g.toNumber=pa;g.toNumberArray=na;g.toString=ea;g.toStringArray=pb;g.toStringExplicit=ha;g.voidOperation=Ya})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(g,
n){this.context=this.definition=null;this.definition=g;this.context=n}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function g(m=[]){this._elements=m}var n=g.prototype;n.length=function(){return this._elements.length};n.get=function(m){return this._elements[m]};n.toArray=function(){const m=[];for(let k=0;k<this.length();k++)m.push(this.get(k));return m};return g}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray",
"./ImmutablePointArray"],function(g,n,m){return function(k){function t(y,H,G,D,p){y=k.call(this,y)||this;y._lazyPath=[];y._hasZ=!1;y._hasM=!1;y._hasZ=G;y._hasM=D;y._spRef=H;y._cacheId=p;return y}g._inheritsLoose(t,k);var E=t.prototype;E.get=function(y){if(void 0===this._lazyPath[y]){const H=this._elements[y];if(void 0===H)return;this._lazyPath[y]=new m(H,this._spRef,this._hasZ,this._hasM,this._cacheId,y)}return this._lazyPath[y]};E.equalityTest=function(y){return y===this?!0:null===y||!1===y instanceof
t?!1:y.getUniqueHash()===this.getUniqueHash()};E.getUniqueHash=function(){return this._cacheId.toString()};return t}(n)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(g,n,m){return function(k){function t(y,H,G,D,p,c){y=k.call(this,y)||this;y._lazyPt=[];y._hasZ=!1;y._hasM=!1;y._spRef=H;y._hasZ=G;y._hasM=D;y._cacheId=p;y._partId=c;return y}g._inheritsLoose(t,k);var E=t.prototype;E.get=function(y){if(void 0===
this._lazyPt[y]){const H=this._elements[y];if(void 0===H)return;const G=this._hasZ,D=this._hasM;let p=null;p=G&&!D?new m(H[0],H[1],H[2],void 0,this._spRef):D&&!G?new m(H[0],H[1],void 0,H[2],this._spRef):G&&D?new m(H[0],H[1],H[2],H[3],this._spRef):new m(H[0],H[1],this._spRef);p.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+y.toString();this._lazyPt[y]=p}return this._lazyPt[y]};E.equalityTest=function(y){return y===this?!0:null===y||!1===y instanceof t?!1:y.getUniqueHash()===
this.getUniqueHash()};E.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return t}(n)})},"esri/chunks/datetime":function(){define(["exports"],function(g){function n(b){return"undefined"===typeof b}function m(b){return"number"===typeof b}function k(b){return"number"===typeof b&&0===b%1}function t(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(b){return!1}}function E(b,F,R){if(0!==b.length)return b.reduce((W,aa)=>{aa=[F(aa),aa];return W?R(W[0],
aa[0])===W[0]?W:aa:aa},null)[1]}function y(b,F){return F.reduce((R,W)=>{R[W]=b[W];return R},{})}function H(b,F){return Object.prototype.hasOwnProperty.call(b,F)}function G(b,F,R){return k(b)&&b>=F&&b<=R}function D(b,F=2){return 0>b?"-"+(""+-b).padStart(F,"0"):(""+b).padStart(F,"0")}function p(b){if(!n(b)&&null!==b&&""!==b)return parseInt(b,10)}function c(b){if(!n(b)&&null!==b&&""!==b)return parseFloat(b)}function a(b){if(!n(b)&&null!==b&&""!==b)return b=1E3*parseFloat("0."+b),Math.floor(b)}function h(b,
F,R=!1){F=10**F;return(R?Math.trunc:Math.round)(b*F)/F}function d(b){return 0===b%4&&(0!==b%100||0===b%400)}function e(b,F){var R=F-1;R=R-12*Math.floor(R/12)+1;return 2===R?d(b+(F-R)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][R-1]}function q(b){let F=Date.UTC(b.year,b.month-1,b.day,b.hour,b.minute,b.second,b.millisecond);100>b.year&&0<=b.year&&(F=new Date(F),F.setUTCFullYear(F.getUTCFullYear()-1900));return+F}function A(b){var F=b-1;F=(F+Math.floor(F/4)-Math.floor(F/100)+Math.floor(F/400))%
7;return 4===(b+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400))%7||3===F?53:52}function f(b){return 99<b?b:60<b?1900+b:2E3+b}function r(b,F,R,W=null){b=new Date(b);const aa={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};W&&(aa.timeZone=W);return(F=(new Intl.DateTimeFormat(R,{timeZoneName:F,...aa})).formatToParts(b).find(fa=>"timezonename"===fa.type.toLowerCase()))?F.value:null}function v(b,F){b=parseInt(b,10);Number.isNaN(b)&&(b=0);F=parseInt(F,
10)||0;F=0>b||Object.is(b,-0)?-F:F;return 60*b+F}function B(b){const F=Number(b);if("boolean"===typeof b||""===b||Number.isNaN(F))throw new kb(`Invalid unit value ${b}`);return F}function w(b,F){const R={};for(const W in b)if(H(b,W)){const aa=b[W];void 0!==aa&&null!==aa&&(R[F(W)]=B(aa))}return R}function u(b,F){const R=Math.trunc(Math.abs(b/60)),W=Math.trunc(Math.abs(b%60));b=0<=b?"+":"-";switch(F){case "short":return`${b}${D(R,2)}:${D(W,2)}`;case "narrow":return`${b}${R}${0<W?`:${W}`:""}`;case "techie":return`${b}${D(R,
2)}${D(W,2)}`;default:throw new RangeError(`Value format ${F} is out of range for property format`);}}function C(b){return y(b,["hour","minute","second","millisecond"])}function J(b){switch(b){case "narrow":return[...Lc];case "short":return[...Wb];case "long":return[...Mc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function S(b){switch(b){case "narrow":return[...Nc];case "short":return[...Xb];
case "long":return[...Yb];case "numeric":return"1234567".split("");default:return null}}function T(b){switch(b){case "narrow":return[...Oc];case "short":return[...Pc];case "long":return[...Qc];default:return null}}function P(b,F,R="always",W=!1){const aa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var fa=-1===["hours","minutes","seconds"].indexOf(b);
if("auto"===R&&fa)switch(R="days"===b,F){case 1:return R?"tomorrow":`next ${aa[b][0]}`;case -1:return R?"yesterday":`last ${aa[b][0]}`;case 0:return R?"today":`this ${aa[b][0]}`}R=Object.is(F,-0)||0>F;F=Math.abs(F);fa=1===F;const oa=aa[b];b=W?fa?oa[1]:oa[2]||oa[1]:fa?aa[b][0]:b;return R?`${F} ${b} ago`:`in ${F} ${b}`}function X(b,F){let R="";for(const W of b)R=W.literal?R+W.val:R+F(W.val);return R}function Q(b,F){if(n(b)||null===b)return F;if(b instanceof zb)return b;if("string"===typeof b){const R=
b.toLowerCase();return"local"===R||"system"===R?F:"utc"===R||"gmt"===R?hb.utcInstance:hb.parseSpecifier(R)||tb.create(b)}return m(b)?hb.instance(b):"object"===typeof b&&b.offset&&"number"===typeof b.offset?b:new Rc(b)}function O(b,F={}){const R=JSON.stringify([b,F]);let W=Zb[R];W||(W=new Intl.ListFormat(b,F),Zb[R]=W);return W}function Z(b,F={}){const R=JSON.stringify([b,F]);let W=Ib[R];W||(W=new Intl.DateTimeFormat(b,F),Ib[R]=W);return W}function L(b,F={}){const R=JSON.stringify([b,F]);let W=Jb[R];
W||(W=new Intl.NumberFormat(b,F),Jb[R]=W);return W}function I(b,F={}){const {base:R,...W}=F,aa=JSON.stringify([b,W]);let fa=Kb[aa];fa||(fa=new Intl.RelativeTimeFormat(b,F),Kb[aa]=fa);return fa}function l(b){const F=[];for(let R=1;12>=R;R++){const W=Ja.utc(2016,R,1);F.push(b(W))}return F}function z(b){const F=[];for(let R=1;7>=R;R++){const W=Ja.utc(2016,11,13+R);F.push(b(W))}return F}function x(b,F,R,W,aa){b=b.listingMode(R);return"error"===b?null:"en"===b?W(F):aa(F)}function K(...b){b=b.reduce((F,
R)=>F+R.source,"");return RegExp(`^${b}$`)}function U(...b){return F=>b.reduce(([R,W,aa],fa)=>{const [oa,ta,za]=fa(F,aa);return[{...R,...oa},ta||W,za]},[{},null,1]).slice(0,2)}function ba(b,...F){if(null==b)return[null,null];for(const [R,W]of F)if(F=R.exec(b))return W(F);return[null,null]}function ea(...b){return(F,R)=>{const W={};let aa;for(aa=0;aa<b.length;aa++)W[b[aa]]=p(F[R+aa]);return[W,null,R+aa]}}function na(b,F,R){b=b[F];return n(b)?R:p(b)}function ha(b,F){return[{hours:na(b,F,0),minutes:na(b,
F+1,0),seconds:na(b,F+2,0),milliseconds:a(b[F+3])},null,F+4]}function la(b,F){const R=!b[F]&&!b[F+1];b=v(b[F+1],b[F+2]);return[{},R?null:hb.instance(b),F+3]}function pa(b,F){return[{},b[F]?tb.create(b[F]):null,F+1]}function qa(b){const [F,R,W,aa,fa,oa,ta,za,Ra]=b,Ha="-"===F[0];b=za&&"-"===za[0];const La=(Oa,ib=!1)=>void 0!==Oa&&(ib||Oa&&Ha)?-Oa:Oa;return[{years:La(c(R)),months:La(c(W)),weeks:La(c(aa)),days:La(c(fa)),hours:La(c(oa)),minutes:La(c(ta)),seconds:La(c(za),"-0"===za),milliseconds:La(a(Ra),
b)}]}function M(b,F,R,W,aa,fa,oa){F={year:2===F.length?f(p(F)):p(F),month:Wb.indexOf(R)+1,day:p(W),hour:p(aa),minute:p(fa)};oa&&(F.second=p(oa));b&&(F.weekday=3<b.length?Yb.indexOf(b)+1:Xb.indexOf(b)+1);return F}function V(b){const [,F,R,W,aa,fa,oa,ta,za,Ra,Ha,La]=b;b=M(F,aa,W,R,fa,oa,ta);let Oa;Oa=za?Sc[za]:Ra?0:v(Ha,La);return[b,new hb(Oa)]}function ca(b){const [,F,R,W,aa,fa,oa,ta]=b;return[M(F,aa,W,R,fa,oa,ta),hb.utcInstance]}function ia(b){const [,F,R,W,aa,fa,oa,ta]=b;return[M(F,ta,R,W,aa,fa,
oa),hb.utcInstance]}function ka(b,F,R=!1){b={values:R?F.values:{...b.values,...F.values||{}},loc:b.loc.clone(F.loc),conversionAccuracy:F.conversionAccuracy||b.conversionAccuracy};return new Na(b)}function ra(b,F,R,W,aa){b=b[aa][R];var fa=F[R]/b;fa=Math.sign(fa)!==Math.sign(W[aa])&&0!==W[aa]&&1>=Math.abs(fa)?0>fa?Math.floor(fa):Math.ceil(fa):Math.trunc(fa);W[aa]+=fa;F[R]-=fa*b}function va(b,F){Tc.reduce((R,W)=>{if(n(F[W]))return R;R&&ra(b,F,R,F,W);return W},null)}function Ba(b,F){b=F.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-
b.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Na.fromMillis(b).as("days"))}function Da(b,F,R){var W=[["years",(ta,za)=>za.year-ta.year],["quarters",(ta,za)=>za.quarter-ta.quarter],["months",(ta,za)=>za.month-ta.month+12*(za.year-ta.year)],["weeks",(ta,za)=>{ta=Ba(ta,za);return(ta-ta%7)/7}],["days",Ba]];const aa={};let fa,oa;for(const [ta,za]of W)0<=R.indexOf(ta)&&(fa=ta,W=za(b,F),oa=b.plus({[ta]:W}),oa>F?(b=b.plus({[ta]:W-1}),--W):b=oa,aa[ta]=W);return[b,aa,oa,fa]}function Ga(b,
F,R,W){let [aa,fa,oa,ta]=Da(b,F,R);b=F-aa;R=R.filter(za=>0<=["hours","minutes","seconds","milliseconds"].indexOf(za));0===R.length&&(oa<F&&(oa=aa.plus({[ta]:1})),oa!==aa&&(fa[ta]=(fa[ta]||0)+b/(oa-aa)));F=Na.fromObject(fa,W);return 0<R.length?Na.fromMillis(b,W).shiftTo(...R).plus(F):F}function Fa({numberingSystem:b},F=""){return new RegExp(`${Lb[b||"latn"]}${F}`)}function ya(b,F=R=>R){return{regex:b,deser:([R])=>{{let W=parseInt(R,10);if(isNaN(W)){W="";for(let aa=0;aa<R.length;aa++){const fa=R.charCodeAt(aa);
if(-1!==R[aa].search(Lb.hanidec))W+=Uc.indexOf(R[aa]);else for(const oa in $b){const [ta,za]=$b[oa];fa>=ta&&fa<=za&&(W+=fa-ta)}}R=parseInt(W,10)}else R=W}return F(R)}}}function nb(b){return b.replace(/\./g,"\\.?").replace(Mb,ac)}function Xa(b,F){return null===b?null:{regex:RegExp(b.map(nb).join("|")),deser:([R])=>b.findIndex(W=>R.replace(/\./g,"").replace(Mb," ").toLowerCase()===W.replace(/\./g,"").replace(Mb," ").toLowerCase())+F}}function eb(b,F){return{regex:b,deser:([,R,W])=>v(R,W),groups:F}}
function pb(b){return{regex:b,deser:([F])=>F}}function vb(b,F){const R=Fa(F),W=Fa(F,"{2}"),aa=Fa(F,"{3}"),fa=Fa(F,"{4}"),oa=Fa(F,"{6}"),ta=Fa(F,"{1,2}"),za=Fa(F,"{1,3}"),Ra=Fa(F,"{1,6}"),Ha=Fa(F,"{1,9}"),La=Fa(F,"{2,4}"),Oa=Fa(F,"{4,6}"),ib=wb=>({regex:RegExp(wb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Nb])=>Nb,literal:!0}),yb=(wb=>{if(b.literal)return ib(wb);switch(wb.val){case "G":return Xa(F.eras("short",!1),0);case "GG":return Xa(F.eras("long",!1),0);case "y":return ya(Ra);
case "yy":return ya(La,f);case "yyyy":return ya(fa);case "yyyyy":return ya(Oa);case "yyyyyy":return ya(oa);case "M":return ya(ta);case "MM":return ya(W);case "MMM":return Xa(F.months("short",!0,!1),1);case "MMMM":return Xa(F.months("long",!0,!1),1);case "L":return ya(ta);case "LL":return ya(W);case "LLL":return Xa(F.months("short",!1,!1),1);case "LLLL":return Xa(F.months("long",!1,!1),1);case "d":return ya(ta);case "dd":return ya(W);case "o":return ya(za);case "ooo":return ya(aa);case "HH":return ya(W);
case "H":return ya(ta);case "hh":return ya(W);case "h":return ya(ta);case "mm":return ya(W);case "m":return ya(ta);case "q":return ya(ta);case "qq":return ya(W);case "s":return ya(ta);case "ss":return ya(W);case "S":return ya(za);case "SSS":return ya(aa);case "u":return pb(Ha);case "uu":return pb(ta);case "uuu":return ya(R);case "a":return Xa(F.meridiems(),0);case "kkkk":return ya(fa);case "kk":return ya(La,f);case "W":return ya(ta);case "WW":return ya(W);case "E":case "c":return ya(R);case "EEE":return Xa(F.weekdays("short",
!1,!1),1);case "EEEE":return Xa(F.weekdays("long",!1,!1),1);case "ccc":return Xa(F.weekdays("short",!0,!1),1);case "cccc":return Xa(F.weekdays("long",!0,!1),1);case "Z":case "ZZ":return eb(new RegExp(`([+-]${ta.source})(?::(${W.source}))?`),2);case "ZZZ":return eb(new RegExp(`([+-]${ta.source})(${W.source})?`),2);case "z":return pb(/[a-z_+-/]{1,256}?/i);default:return ib(wb)}})(b)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};yb.token=b;return yb}function Qa(b){return[`^${b.map(F=>
F.regex).reduce((F,R)=>`${F}(${R.source})`,"")}$`,b]}function Sa(b,F,R){if(b=b.match(F)){F={};let W=1;for(const aa in R)if(H(R,aa)){const fa=R[aa],oa=fa.groups?fa.groups+1:1;!fa.literal&&fa.token&&(F[fa.token.val[0]]=fa.deser(b.slice(W,W+oa)));W+=oa}return[b,F]}return[b,{}]}function Ea(b){const F=aa=>{switch(aa){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";
case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let R=null,W;n(b.z)||(R=tb.create(b.z));n(b.Z)||(R||(R=new hb(b.Z)),W=b.Z);n(b.q)||(b.M=3*(b.q-1)+1);n(b.h)||(12>b.h&&1===b.a?b.h+=12:12===b.h&&0===b.a&&(b.h=0));0===b.G&&b.y&&(b.y=-b.y);n(b.u)||(b.S=a(b.u));return[Object.keys(b).reduce((aa,fa)=>{const oa=F(fa);oa&&(aa[oa]=b[fa]);return aa},{}),R,W]}function da(){Ob||(Ob=Ja.fromMillis(1555555555555));return Ob}function ja(b,
F){if(b.literal)return b;const R=jb.macroTokenToFormatOpts(b.val);if(!R)return b;F=jb.create(F,R).formatDateTimeParts(da()).map(W=>{{const {type:fa,value:oa}=W;if("literal"===fa)W={literal:!0,val:oa};else{W=R[fa];var aa=Vc[fa];"object"===typeof aa&&(aa=aa[W]);W=aa?{literal:!1,val:aa}:void 0}}return W});return F.includes(void 0)?b:F}function sa(b,F){return Array.prototype.concat(...b.map(R=>ja(R,F)))}function xa(b,F,R){R=sa(jb.parseFormat(R),b);var W=R.map(fa=>vb(fa,b));const aa=W.find(fa=>fa.invalidReason);
if(aa)return{input:F,tokens:R,invalidReason:aa.invalidReason};{const [fa,oa]=Qa(W);W=RegExp(fa,"i");const [ta,za]=Sa(F,W,oa),[Ra,Ha,La]=za?Ea(za):[null,null,void 0];if(H(za,"a")&&H(za,"H"))throw new Ab("Can't include meridiem when specifying 24-hour format");return{input:F,tokens:R,regex:W,rawMatches:ta,matches:za,result:Ra,zone:Ha,specificOffset:La}}}function Aa(b,F){return new mb("unit out of range",`you specified ${F} (of type ${typeof F}) as a ${b}, which is invalid`)}function Ca(b,F,R){F=new Date(Date.UTC(b,
F-1,R));100>b&&0<=b&&F.setUTCFullYear(F.getUTCFullYear()-1900);b=F.getUTCDay();return 0===b?7:b}function Ka(b,F){b=d(b)?Pb:Qb;const R=b.findIndex(W=>W<F);return{month:R+1,day:F-b[R]}}function Ua(b){const {year:F,month:R,day:W}=b;var aa=W+(d(F)?Pb:Qb)[R-1];const fa=Ca(F,R,W);aa=Math.floor((aa-fa+10)/7);let oa;1>aa?(oa=F-1,aa=A(oa)):aa>A(F)?(oa=F+1,aa=1):oa=F;return{weekYear:oa,weekNumber:aa,weekday:fa,...C(b)}}function Ta(b){const {weekYear:F,weekNumber:R,weekday:W}=b;var aa=Ca(F,1,4),fa=d(F)?366:
365;aa=7*R+W-aa-3;1>aa?(fa=F-1,aa+=d(fa)?366:365):aa>fa?(fa=F+1,aa-=d(F)?366:365):fa=F;const {month:oa,day:ta}=Ka(fa,aa);return{year:fa,month:oa,day:ta,...C(b)}}function Ia(b){const {year:F,month:R,day:W}=b;var aa=W+(d(F)?Pb:Qb)[R-1];return{year:F,ordinal:aa,...C(b)}}function cb(b){const {year:F,ordinal:R}=b,{month:W,day:aa}=Ka(F,R);return{year:F,month:W,day:aa,...C(b)}}function ab(b){const F=k(b.year),R=G(b.month,1,12),W=G(b.day,1,e(b.year,b.month));return F?R?W?!1:Aa("day",b.day):Aa("month",b.month):
Aa("year",b.year)}function lb(b){const {hour:F,minute:R,second:W,millisecond:aa}=b;b=G(F,0,23)||24===F&&0===R&&0===W&&0===aa;const fa=G(R,0,59),oa=G(W,0,59),ta=G(aa,0,999);return b?fa?oa?ta?!1:Aa("millisecond",aa):Aa("second",W):Aa("minute",R):Aa("hour",F)}function fb(b){return new mb("unsupported zone",`the zone "${b.name}" is not supported`)}function Ya(b){null===b.weekData&&(b.weekData=Ua(b.c));return b.weekData}function gb(b,F){b={ts:b.ts,zone:b.zone,c:b.c,o:b.o,loc:b.loc,invalid:b.invalid};return new Ja({...b,
...F,old:b})}function sb(b,F,R){let W=b-6E4*F;const aa=R.offset(W);if(F===aa)return[W,F];W-=6E4*(aa-F);F=R.offset(W);return aa===F?[W,aa]:[b-6E4*Math.min(aa,F),Math.max(aa,F)]}function qb(b,F){b=new Date(b+6E4*F);return{year:b.getUTCFullYear(),month:b.getUTCMonth()+1,day:b.getUTCDate(),hour:b.getUTCHours(),minute:b.getUTCMinutes(),second:b.getUTCSeconds(),millisecond:b.getUTCMilliseconds()}}function rb(b,F,R){return sb(q(b),F,R)}function N(b,F){const R=b.o;var W=b.c.year+Math.trunc(F.years);const aa=
b.c.month+Math.trunc(F.months)+3*Math.trunc(F.quarters);W={...b.c,year:W,month:aa,day:Math.min(b.c.day,e(W,aa))+Math.trunc(F.days)+7*Math.trunc(F.weeks)};F=Na.fromObject({years:F.years-Math.trunc(F.years),quarters:F.quarters-Math.trunc(F.quarters),months:F.months-Math.trunc(F.months),weeks:F.weeks-Math.trunc(F.weeks),days:F.days-Math.trunc(F.days),hours:F.hours,minutes:F.minutes,seconds:F.seconds,milliseconds:F.milliseconds}).as("milliseconds");W=q(W);let [fa,oa]=sb(W,R,b.zone);0!==F&&(fa+=F,oa=b.zone.offset(fa));
return{ts:fa,o:oa}}function Y(b,F,R,W,aa,fa){const {setZone:oa,zone:ta}=R;return b&&0!==Object.keys(b).length?(b=Ja.fromObject(b,{...R,zone:F||ta,specificOffset:fa}),oa?b:b.setZone(ta)):Ja.invalid(new mb("unparsable",`the input "${aa}" can't be parsed as ${W}`))}function ma(b,F,R=!0){return b.isValid?jb.create(Va.create("en-US"),{allowZ:R,forceSimple:!0}).formatDateTimeFromString(b,F):null}function ua(b,F){const R=9999<b.c.year||0>b.c.year;let W="";R&&0<=b.c.year&&(W+="+");W+=D(b.c.year,R?6:4);F?
(W=W+"-"+D(b.c.month),W=W+"-"+D(b.c.day)):(W+=D(b.c.month),W+=D(b.c.day));return W}function wa(b,F,R,W,aa,fa){let oa=D(b.c.hour);F?(oa=oa+":"+D(b.c.minute),0===b.c.second&&R||(oa+=":")):oa+=D(b.c.minute);0===b.c.second&&R||(oa+=D(b.c.second),0===b.c.millisecond&&W||(oa=oa+"."+D(b.c.millisecond,3)));aa&&(b.isOffsetFixed&&0===b.offset&&!fa?oa+="Z":0>b.o?(oa=oa+"-"+D(Math.trunc(-b.o/60)),oa=oa+":"+D(Math.trunc(-b.o%60))):(oa=oa+"+"+D(Math.trunc(b.o/60)),oa=oa+":"+D(Math.trunc(b.o%60))));fa&&(oa+="["+
b.zone.ianaName+"]");return oa}function Ma(b){const F={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[b.toLowerCase()];if(!F)throw new bc(b);
return F}function Pa(b,F){const R=Q(F.zone,Za.defaultZone);F=Va.fromObject(F);const W=Za.now();var aa;if(n(b.year))b=W;else{for(const fa of cc)n(b[fa])&&(b[fa]=dc[fa]);if(aa=ab(b)||lb(b))return Ja.invalid(aa);aa=R.offset(W);[b,aa]=rb(b,aa,R)}return new Ja({ts:b,zone:R,loc:F,o:aa})}function bb(b,F,R){const W=n(R.round)?!0:R.round,aa=(oa,ta)=>{oa=h(oa,W||R.calendary?0:2,!0);return F.loc.clone(R).relFormatter(R).format(oa,ta)},fa=oa=>R.calendary?F.hasSame(b,oa)?0:F.startOf(oa).diff(b.startOf(oa),oa).get(oa):
F.diff(b,oa).get(oa);if(R.unit)return aa(fa(R.unit),R.unit);for(const oa of R.units){const ta=fa(oa);if(1<=Math.abs(ta))return aa(ta,oa)}return aa(b>F?-0:0,R.units[R.units.length-1])}function $a(b){let F={};0<b.length&&"object"===typeof b[b.length-1]?(F=b[b.length-1],b=Array.from(b).slice(0,b.length-1)):b=Array.from(b);return[F,b]}function db(b){if(Ja.isDateTime(b))return b;if(b&&b.valueOf&&m(b.valueOf()))return Ja.fromJSDate(b);if(b&&"object"===typeof b)return Ja.fromObject(b);throw new kb(`Unknown datetime argument: ${b}, of type ${typeof b}`);
}class ob extends Error{}class Cb extends ob{constructor(b){super(`Invalid DateTime: ${b.toMessage()}`)}}class Db extends ob{constructor(b){super(`Invalid Interval: ${b.toMessage()}`)}}class Eb extends ob{constructor(b){super(`Invalid Duration: ${b.toMessage()}`)}}class Ab extends ob{}class bc extends ob{constructor(b){super(`Invalid unit ${b}`)}}class kb extends ob{}class ub extends ob{constructor(){super("Zone is an abstract class")}}const Rb={year:"numeric",month:"numeric",day:"numeric"},ec={year:"numeric",
month:"short",day:"numeric"},Wc={year:"numeric",month:"short",day:"numeric",weekday:"short"},fc={year:"numeric",month:"long",day:"numeric"},gc={year:"numeric",month:"long",day:"numeric",weekday:"long"},hc={hour:"numeric",minute:"numeric"},ic={hour:"numeric",minute:"numeric",second:"numeric"},jc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},kc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},lc={hour:"numeric",minute:"numeric",hourCycle:"h23"},mc={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},nc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},oc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},pc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},qc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},rc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},sc={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Xc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},tc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},uc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},vc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
wc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},xc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Mc="January February March April May June July August September October November December".split(" "),Wb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Lc="JFMAMJJASOND".split(""),Yb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Xb="Mon Tue Wed Thu Fri Sat Sun".split(" "),
Nc="MTWTFSS".split(""),yc=["AM","PM"],Qc=["Before Christ","Anno Domini"],Pc=["BC","AD"],Oc=["B","A"],Yc={D:Rb,DD:ec,DDD:fc,DDDD:gc,t:hc,tt:ic,ttt:jc,tttt:kc,T:lc,TT:mc,TTT:nc,TTTT:oc,f:pc,ff:rc,fff:tc,ffff:vc,F:qc,FF:sc,FFF:uc,FFFF:wc};class jb{static create(b,F={}){return new jb(b,F)}static parseFormat(b){let F=null,R="",W=!1;const aa=[];for(let fa=0;fa<b.length;fa++){const oa=b.charAt(fa);"'"===oa?(0<R.length&&aa.push({literal:W,val:R}),F=null,R="",W=!W):W?R+=oa:oa===F?R+=oa:(0<R.length&&aa.push({literal:!1,
val:R}),F=R=oa)}0<R.length&&aa.push({literal:W,val:R});return aa}static macroTokenToFormatOpts(b){return Yc[b]}constructor(b,F){this.opts=F;this.loc=b;this.systemLoc=null}formatWithSystemDefault(b,F){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(b,{...this.opts,...F}).format()}formatDateTime(b,F={}){return this.loc.dtFormatter(b,{...this.opts,...F}).format()}formatDateTimeParts(b,F={}){return this.loc.dtFormatter(b,{...this.opts,...F}).formatToParts()}resolvedOptions(b,
F={}){return this.loc.dtFormatter(b,{...this.opts,...F}).resolvedOptions()}num(b,F=0){if(this.opts.forceSimple)return D(b,F);const R={...this.opts};0<F&&(R.padTo=F);return this.loc.numberFormatter(R).format(b)}formatDateTimeFromString(b,F){const R="en"===this.loc.listingMode(),W=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,aa=(Ha,La)=>this.loc.extract(b,Ha,La),fa=Ha=>b.isOffsetFixed&&0===b.offset&&Ha.allowZ?"Z":b.isValid?b.zone.formatOffset(b.ts,Ha.format):"",oa=(Ha,La)=>R?J(Ha)[b.month-
1]:aa(La?{month:Ha}:{month:Ha,day:"numeric"},"month"),ta=(Ha,La)=>R?S(Ha)[b.weekday-1]:aa(La?{weekday:Ha}:{weekday:Ha,month:"long",day:"numeric"},"weekday"),za=Ha=>{const La=jb.macroTokenToFormatOpts(Ha);return La?this.formatWithSystemDefault(b,La):Ha},Ra=Ha=>R?T(Ha)[0>b.year?0:1]:aa({era:Ha},"era");return X(jb.parseFormat(F),Ha=>{switch(Ha){case "S":return this.num(b.millisecond);case "u":case "SSS":return this.num(b.millisecond,3);case "s":return this.num(b.second);case "ss":return this.num(b.second,
2);case "uu":return this.num(Math.floor(b.millisecond/10),2);case "uuu":return this.num(Math.floor(b.millisecond/100));case "m":return this.num(b.minute);case "mm":return this.num(b.minute,2);case "h":return this.num(0===b.hour%12?12:b.hour%12);case "hh":return this.num(0===b.hour%12?12:b.hour%12,2);case "H":return this.num(b.hour);case "HH":return this.num(b.hour,2);case "Z":return fa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return fa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return fa({format:"techie",
allowZ:this.opts.allowZ});case "ZZZZ":return b.zone.offsetName(b.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return b.zone.offsetName(b.ts,{format:"long",locale:this.loc.locale});case "z":return b.zoneName;case "a":return R?yc[12>b.hour?0:1]:aa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return W?aa({day:"numeric"},"day"):this.num(b.day);case "dd":return W?aa({day:"2-digit"},"day"):this.num(b.day,2);case "c":return this.num(b.weekday);case "ccc":return ta("short",!0);case "cccc":return ta("long",
!0);case "ccccc":return ta("narrow",!0);case "E":return this.num(b.weekday);case "EEE":return ta("short",!1);case "EEEE":return ta("long",!1);case "EEEEE":return ta("narrow",!1);case "L":return W?aa({month:"numeric",day:"numeric"},"month"):this.num(b.month);case "LL":return W?aa({month:"2-digit",day:"numeric"},"month"):this.num(b.month,2);case "LLL":return oa("short",!0);case "LLLL":return oa("long",!0);case "LLLLL":return oa("narrow",!0);case "M":return W?aa({month:"numeric"},"month"):this.num(b.month);
case "MM":return W?aa({month:"2-digit"},"month"):this.num(b.month,2);case "MMM":return oa("short",!1);case "MMMM":return oa("long",!1);case "MMMMM":return oa("narrow",!1);case "y":return W?aa({year:"numeric"},"year"):this.num(b.year);case "yy":return W?aa({year:"2-digit"},"year"):this.num(b.year.toString().slice(-2),2);case "yyyy":return W?aa({year:"numeric"},"year"):this.num(b.year,4);case "yyyyyy":return W?aa({year:"numeric"},"year"):this.num(b.year,6);case "G":return Ra("short");case "GG":return Ra("long");
case "GGGGG":return Ra("narrow");case "kk":return this.num(b.weekYear.toString().slice(-2),2);case "kkkk":return this.num(b.weekYear,4);case "W":return this.num(b.weekNumber);case "WW":return this.num(b.weekNumber,2);case "o":return this.num(b.ordinal);case "ooo":return this.num(b.ordinal,3);case "q":return this.num(b.quarter);case "qq":return this.num(b.quarter,2);case "X":return this.num(Math.floor(b.ts/1E3));case "x":return this.num(b.ts);default:return za(Ha)}})}formatDurationFromString(b,F){const R=
aa=>{switch(aa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};F=jb.parseFormat(F);const W=F.reduce((aa,{literal:fa,val:oa})=>fa?aa:aa.concat(oa),[]);b=b.shiftTo(...W.map(R).filter(aa=>aa));return X(F,(aa=>fa=>{const oa=R(fa);return oa?this.num(aa.get(oa),fa.length):fa})(b))}}class mb{constructor(b,F){this.reason=b;this.explanation=F}toMessage(){return this.explanation?
`${this.reason}: ${this.explanation}`:this.reason}}class zb{get type(){throw new ub;}get name(){throw new ub;}get ianaName(){return this.name}get isUniversal(){throw new ub;}offsetName(b,F){throw new ub;}formatOffset(b,F){throw new ub;}offset(b){throw new ub;}equals(b){throw new ub;}get isValid(){throw new ub;}}let Sb=null;class zc extends zb{static get instance(){null===Sb&&(Sb=new zc);return Sb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(b,
{format:F,locale:R}){return r(b,F,R)}formatOffset(b,F){return u(this.offset(b),F)}offset(b){return-(new Date(b)).getTimezoneOffset()}equals(b){return"system"===b.type}get isValid(){return!0}}let Fb={};const Zc={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let Gb={};class tb extends zb{static create(b){Gb[b]||(Gb[b]=new tb(b));return Gb[b]}static resetCache(){Gb={};Fb={}}static isValidSpecifier(b){return this.isValidZone(b)}static isValidZone(b){if(!b)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:b})).format(),!0}catch(F){return!1}}constructor(b){super();this.zoneName=b;this.valid=tb.isValidZone(b)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(b,{format:F,locale:R}){return r(b,F,R,this.name)}formatOffset(b,F){return u(this.offset(b),F)}offset(b){b=new Date(b);if(isNaN(b))return NaN;var F=this.name;Fb[F]||(Fb[F]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:F,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));F=Fb[F];if(F.formatToParts){F=F.formatToParts(b);var R=[];for(let Ha=0;Ha<F.length;Ha++){const {type:La,value:Oa}=F[Ha],ib=Zc[La];"era"===La?R[ib]=Oa:n(ib)||(R[ib]=parseInt(Oa,10))}F=R}else{{F=F.format(b).replace(/\u200E/g,"");F=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(F);const [,Ha,La,Oa,ib,yb,wb,Nb]=F;F=[Oa,Ha,La,ib,yb,wb,Nb]}}let [W,aa,fa,oa,ta,za,Ra]=F;"BC"===oa&&(W=-Math.abs(W)+1);F=q({year:W,month:aa,day:fa,hour:24===ta?0:ta,minute:za,second:Ra,
millisecond:0});b=+b;R=b%1E3;return(F-(b-(0<=R?R:1E3+R)))/6E4}equals(b){return"iana"===b.type&&b.name===this.name}get isValid(){return this.valid}}let Tb=null;class hb extends zb{static get utcInstance(){null===Tb&&(Tb=new hb(0));return Tb}static instance(b){return 0===b?hb.utcInstance:new hb(b)}static parseSpecifier(b){return b&&(b=b.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new hb(v(b[1],b[2])):null}constructor(b){super();this.fixed=b}get type(){return"fixed"}get name(){return 0===this.fixed?
"UTC":`UTC${u(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${u(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(b,F){return u(this.fixed,F)}get isUniversal(){return!0}offset(){return this.fixed}equals(b){return"fixed"===b.type&&b.fixed===this.fixed}get isValid(){return!0}}class Rc extends zb{constructor(b){super();this.zoneName=b}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let Ac=()=>Date.now(),Bc="system",Cc=null,Dc=null,Ec=null,Fc;class Za{static get now(){return Ac}static set now(b){Ac=b}static set defaultZone(b){Bc=b}static get defaultZone(){return Q(Bc,zc.instance)}static get defaultLocale(){return Cc}static set defaultLocale(b){Cc=b}static get defaultNumberingSystem(){return Dc}static set defaultNumberingSystem(b){Dc=b}static get defaultOutputCalendar(){return Ec}static set defaultOutputCalendar(b){Ec=b}static get throwOnInvalid(){return Fc}static set throwOnInvalid(b){Fc=
b}static resetCaches(){Va.resetCache();tb.resetCache()}}let Zb={},Ib={},Jb={},Kb={},Hb=null;class $c{constructor(b,F,R){this.padTo=R.padTo||0;this.floor=R.floor||!1;const {padTo:W,floor:aa,...fa}=R;if(!F||0<Object.keys(fa).length)F={useGrouping:!1,...R},0<R.padTo&&(F.minimumIntegerDigits=R.padTo),this.inf=L(b,F)}format(b){if(this.inf)return this.inf.format(this.floor?Math.floor(b):b);b=this.floor?Math.floor(b):h(b,3);return D(b,this.padTo)}}class ad{constructor(b,F,R){this.opts=R;if(b.zone.isUniversal){var W=
b.offset/60*-1;W=0<=W?`Etc/GMT+${W}`:`Etc/GMT${W}`;0!==b.offset&&tb.create(W).valid?this.dt=b:(W="UTC",this.dt=R.timeZoneName?b:0===b.offset?b:Ja.fromMillis(b.ts+6E4*b.offset))}else"system"===b.zone.type?this.dt=b:(this.dt=b,W=b.zone.name);b={...this.opts};W&&(b.timeZone=W);this.dtf=Z(F,b)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class bd{constructor(b,F,R){this.opts={style:"long",
...R};!F&&t()&&(this.rtf=I(b,R))}format(b,F){return this.rtf?this.rtf.format(b,F):P(F,b,this.opts.numeric,"long"!==this.opts.style)}formatToParts(b,F){return this.rtf?this.rtf.formatToParts(b,F):[]}}class Va{static fromOpts(b){return Va.create(b.locale,b.numberingSystem,b.outputCalendar,b.defaultToEN)}static create(b,F,R,W=!1){b=b||Za.defaultLocale;var aa;(aa=b)||(W?W="en-US":(Hb||(Hb=(new Intl.DateTimeFormat).resolvedOptions().locale),W=Hb),aa=W);return new Va(aa,F||Za.defaultNumberingSystem,R||
Za.defaultOutputCalendar,b)}static resetCache(){Hb=null;Ib={};Jb={};Kb={}}static fromObject({locale:b,numberingSystem:F,outputCalendar:R}={}){return Va.create(b,F,R)}constructor(b,F,R,W){var aa=b.indexOf("-u-");if(-1===aa)b=[b];else{let za;aa=b.substring(0,aa);try{za=Z(b).resolvedOptions()}catch(La){za=Z(aa).resolvedOptions()}const {numberingSystem:Ra,calendar:Ha}=za;b=[aa,Ra,Ha]}const [fa,oa,ta]=b;this.locale=fa;this.numberingSystem=F||oa||null;this.outputCalendar=R||ta||null;F=this.locale;R=this.numberingSystem;
if((b=this.outputCalendar)||R)F+="-u",b&&(F+=`-ca-${b}`),R&&(F+=`-nu-${R}`);this.intl=F;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=W;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var b=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=b}return this.fastNumbersCached}listingMode(){const b=this.isEnglish(),F=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return b&&F?"en":"intl"}clone(b){return b&&0!==Object.getOwnPropertyNames(b).length?Va.create(b.locale||this.specifiedLocale,b.numberingSystem||this.numberingSystem,b.outputCalendar||this.outputCalendar,b.defaultToEN||!1):this}redefaultToEN(b={}){return this.clone({...b,defaultToEN:!0})}redefaultToSystem(b=
{}){return this.clone({...b,defaultToEN:!1})}months(b,F=!1,R=!0){return x(this,b,R,J,()=>{const W=F?{month:b,day:"numeric"}:{month:b},aa=F?"format":"standalone";this.monthsCache[aa][b]||(this.monthsCache[aa][b]=l(fa=>this.extract(fa,W,"month")));return this.monthsCache[aa][b]})}weekdays(b,F=!1,R=!0){return x(this,b,R,S,()=>{const W=F?{weekday:b,year:"numeric",month:"long",day:"numeric"}:{weekday:b},aa=F?"format":"standalone";this.weekdaysCache[aa][b]||(this.weekdaysCache[aa][b]=z(fa=>this.extract(fa,
W,"weekday")));return this.weekdaysCache[aa][b]})}meridiems(b=!0){return x(this,void 0,b,()=>yc,()=>{if(!this.meridiemCache){const F={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ja.utc(2016,11,13,9),Ja.utc(2016,11,13,19)].map(R=>this.extract(R,F,"dayperiod"))}return this.meridiemCache})}eras(b,F=!0){return x(this,b,F,T,()=>{const R={era:b};this.eraCache[b]||(this.eraCache[b]=[Ja.utc(-40,1,1),Ja.utc(2017,1,1)].map(W=>this.extract(W,R,"era")));return this.eraCache[b]})}extract(b,F,R){return(b=
this.dtFormatter(b,F).formatToParts().find(W=>W.type.toLowerCase()===R))?b.value:null}numberFormatter(b={}){return new $c(this.intl,b.forceSimple||this.fastNumbers,b)}dtFormatter(b,F={}){return new ad(b,this.intl,F)}relFormatter(b={}){return new bd(this.intl,this.isEnglish(),b)}listFormatter(b={}){return O(this.intl,b)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(b){return this.locale===
b.locale&&this.numberingSystem===b.numberingSystem&&this.outputCalendar===b.outputCalendar}}const Gc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ub=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Hc=RegExp(`${Ub.source}${`(?:${Gc.source}?(?:\\[(${xc.source})\\])?)?`}`),Vb=RegExp(`(?:T${Hc.source})?`),cd=ea("weekYear","weekNumber","weekDay"),dd=ea("year","ordinal"),Ic=RegExp(`${Ub.source} ?(?:${Gc.source}|(${xc.source}))?`),ed=RegExp(`(?: ${Ic.source})?`),fd=RegExp(`^T?${Ub.source}$`),gd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Sc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},hd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,jd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
kd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,ld=K(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vb),md=K(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vb),nd=K(/(\d{4})-?(\d{3})/,Vb),od=K(Hc),Jc=U(function(b,F){return[{year:na(b,F),month:na(b,F+1,1),day:na(b,F+2,1)},null,F+3]},ha,la,pa),pd=U(cd,ha,la,pa),qd=U(dd,ha,la,pa),rd=U(ha,la,pa),sd=U(ha),td=K(/(\d{4})-(\d\d)-(\d\d)/,ed),ud=K(Ic),vd=U(ha,la,pa),Kc={weeks:{days:7,hours:168,minutes:10080,
seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},
...Kc},xd={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Kc},xb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Tc=xb.slice(0).reverse();class Na{constructor(b){const F=
"longterm"===b.conversionAccuracy||!1;this.values=b.values;this.loc=b.loc||Va.create();this.conversionAccuracy=F?"longterm":"casual";this.invalid=b.invalid||null;this.matrix=F?xd:wd;this.isLuxonDuration=!0}static fromMillis(b,F){return Na.fromObject({milliseconds:b},F)}static fromObject(b,F={}){if(null==b||"object"!==typeof b)throw new kb(`Duration.fromObject: argument expected to be an object, got ${null===b?"null":typeof b}`);return new Na({values:w(b,Na.normalizeUnit),loc:Va.fromObject(F),conversionAccuracy:F.conversionAccuracy})}static fromDurationLike(b){if(m(b))return Na.fromMillis(b);
if(Na.isDuration(b))return b;if("object"===typeof b)return Na.fromObject(b);throw new kb(`Unknown duration argument ${b} of type ${typeof b}`);}static fromISO(b,F){const [R]=ba(b,[gd,qa]);return R?Na.fromObject(R,F):Na.invalid("unparsable",`the input "${b}" can't be parsed as ISO 8601`)}static fromISOTime(b,F){const [R]=ba(b,[fd,sd]);return R?Na.fromObject(R,F):Na.invalid("unparsable",`the input "${b}" can't be parsed as ISO 8601`)}static invalid(b,F=null){if(!b)throw new kb("need to specify a reason the Duration is invalid");
b=b instanceof mb?b:new mb(b,F);if(Za.throwOnInvalid)throw new Eb(b);return new Na({invalid:b})}static normalizeUnit(b){const F={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[b?b.toLowerCase():b];if(!F)throw new bc(b);return F}static isDuration(b){return b&&
b.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(b,F={}){F={...F,floor:!1!==F.round&&!1!==F.floor};return this.isValid?jb.create(this.loc,F).formatDurationFromString(this,b):"Invalid Duration"}toHuman(b={}){const F=xb.map(R=>{const W=this.values[R];return n(W)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...b,unit:R.slice(0,-1)}).format(W)}).filter(R=>R);return this.loc.listFormatter({type:"conjunction",
style:b.listStyle||"narrow",...b}).format(F)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let b="P";0!==this.years&&(b+=this.years+"Y");if(0!==this.months||0!==this.quarters)b+=this.months+3*this.quarters+"M";0!==this.weeks&&(b+=this.weeks+"W");0!==this.days&&(b+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)b+="T";0!==this.hours&&(b+=this.hours+"H");0!==this.minutes&&(b+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)b+=h(this.seconds+this.milliseconds/1E3,3)+"S";"P"===b&&(b+="T0S");return b}toISOTime(b={}){if(!this.isValid)return null;var F=this.toMillis();if(0>F||864E5<=F)return null;b={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...b};F=this.shiftTo("hours","minutes","seconds","milliseconds");let R="basic"===b.format?"hhmm":"hh:mm";b.suppressSeconds&&0===F.seconds&&0===F.milliseconds||(R+="basic"===b.format?"ss":":ss",b.suppressMilliseconds&&0===F.milliseconds||
(R+=".SSS"));F=F.toFormat(R);b.includePrefix&&(F="T"+F);return F}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(b){if(!this.isValid)return this;b=Na.fromDurationLike(b);const F={};for(const R of xb)if(H(b.values,R)||H(this.values,R))F[R]=b.get(R)+this.get(R);return ka(this,{values:F},!0)}minus(b){if(!this.isValid)return this;b=Na.fromDurationLike(b);return this.plus(b.negate())}mapUnits(b){if(!this.isValid)return this;
const F={};for(const R of Object.keys(this.values))F[R]=B(b(this.values[R],R));return ka(this,{values:F},!0)}get(b){return this[Na.normalizeUnit(b)]}set(b){if(!this.isValid)return this;b={...this.values,...w(b,Na.normalizeUnit)};return ka(this,{values:b})}reconfigure({locale:b,numberingSystem:F,conversionAccuracy:R}={}){b={loc:this.loc.clone({locale:b,numberingSystem:F})};R&&(b.conversionAccuracy=R);return ka(this,b)}as(b){return this.isValid?this.shiftTo(b).get(b):NaN}normalize(){if(!this.isValid)return this;
const b=this.toObject();va(this.matrix,b);return ka(this,{values:b},!0)}shiftTo(...b){if(!this.isValid||0===b.length)return this;b=b.map(fa=>Na.normalizeUnit(fa));const F={},R={},W=this.toObject();let aa;for(const fa of xb)if(0<=b.indexOf(fa)){aa=fa;let oa=0;for(const za in R)oa+=this.matrix[za][fa]*R[za],R[za]=0;m(W[fa])&&(oa+=W[fa]);const ta=Math.trunc(oa);F[fa]=ta;R[fa]=(1E3*oa-1E3*ta)/1E3;for(const za in W)xb.indexOf(za)>xb.indexOf(fa)&&ra(this.matrix,W,za,F,fa)}else m(W[fa])&&(R[fa]=W[fa]);for(const fa in R)0!==
R[fa]&&(F[aa]+=fa===aa?R[fa]:R[fa]/this.matrix[aa][fa]);return ka(this,{values:F},!0).normalize()}negate(){if(!this.isValid)return this;const b={};for(const F of Object.keys(this.values))b[F]=0===this.values[F]?0:-this.values[F];return ka(this,{values:b},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(b){if(!this.isValid||!b.isValid||!this.loc.equals(b.loc))return!1;
for(const W of xb){var F=this.values[W];var R=b.values[W];F=void 0===F||0===F?void 0===R||0===R:F===R;if(!F)return!1}return!0}}class Wa{constructor(b){this.s=b.start;this.e=b.end;this.invalid=b.invalid||null;this.isLuxonInterval=!0}static invalid(b,F=null){if(!b)throw new kb("need to specify a reason the Interval is invalid");b=b instanceof mb?b:new mb(b,F);if(Za.throwOnInvalid)throw new Db(b);return new Wa({invalid:b})}static fromDateTimes(b,F){b=db(b);F=db(F);var R=b&&b.isValid?F&&F.isValid?F<b?
Wa.invalid("end before start",`The end of an interval must be after its start, but you had start=${b.toISO()} and end=${F.toISO()}`):null:Wa.invalid("missing or invalid end"):Wa.invalid("missing or invalid start");return null==R?new Wa({start:b,end:F}):R}static after(b,F){F=Na.fromDurationLike(F);b=db(b);return Wa.fromDateTimes(b,b.plus(F))}static before(b,F){F=Na.fromDurationLike(F);b=db(b);return Wa.fromDateTimes(b.minus(F),b)}static fromISO(b,F){const [R,W]=(b||"").split("/",2);if(R&&W){let oa;
try{var aa=Ja.fromISO(R,F);oa=aa.isValid}catch(za){oa=!1}let ta;try{var fa=Ja.fromISO(W,F);ta=fa.isValid}catch(za){ta=!1}if(oa&&ta)return Wa.fromDateTimes(aa,fa);if(oa){if(fa=Na.fromISO(W,F),fa.isValid)return Wa.after(aa,fa)}else if(ta&&(aa=Na.fromISO(R,F),aa.isValid))return Wa.before(fa,aa)}return Wa.invalid("unparsable",`the input "${b}" can't be parsed as ISO 8601`)}static isInterval(b){return b&&b.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:
null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(b="milliseconds"){return this.isValid?this.toDuration(...[b]).get(b):NaN}count(b="milliseconds"){if(!this.isValid)return NaN;const F=this.start.startOf(b),R=this.end.startOf(b);return Math.floor(R.diff(F,b).get(b))+1}hasSame(b){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,b):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(b){return this.isValid?this.s>b:!1}isBefore(b){return this.isValid?this.e<=b:!1}contains(b){return this.isValid?this.s<=b&&this.e>b:!1}set({start:b,end:F}={}){return this.isValid?Wa.fromDateTimes(b||this.s,F||this.e):this}splitAt(...b){if(!this.isValid)return[];b=b.map(db).filter(fa=>this.contains(fa)).sort();const F=[];let {s:R}=this,W=0;for(;R<this.e;){var aa=b[W]||this.e;aa=+aa>+this.e?this.e:aa;F.push(Wa.fromDateTimes(R,aa));R=aa;W+=1}return F}splitBy(b){b=Na.fromDurationLike(b);
if(!this.isValid||!b.isValid||0===b.as("milliseconds"))return[];let {s:F}=this,R=1;const W=[];for(;F<this.e;){var aa=this.start.plus(b.mapUnits(fa=>fa*R));aa=+aa>+this.e?this.e:aa;W.push(Wa.fromDateTimes(F,aa));F=aa;R+=1}return W}divideEqually(b){return this.isValid?this.splitBy(this.length()/b).slice(0,b):[]}overlaps(b){return this.e>b.s&&this.s<b.e}abutsStart(b){return this.isValid?+this.e===+b.s:!1}abutsEnd(b){return this.isValid?+b.e===+this.s:!1}engulfs(b){return this.isValid?this.s<=b.s&&this.e>=
b.e:!1}equals(b){return this.isValid&&b.isValid?this.s.equals(b.s)&&this.e.equals(b.e):!1}intersection(b){if(!this.isValid)return this;const F=this.s>b.s?this.s:b.s;b=this.e<b.e?this.e:b.e;return F>=b?null:Wa.fromDateTimes(F,b)}union(b){return this.isValid?Wa.fromDateTimes(this.s<b.s?this.s:b.s,this.e>b.e?this.e:b.e):this}static merge(b){const [F,R]=b.sort((W,aa)=>W.s-aa.s).reduce(([W,aa],fa)=>aa?aa.overlaps(fa)||aa.abutsStart(fa)?[W,aa.union(fa)]:[W.concat([aa]),fa]:[W,fa],[[],null]);R&&F.push(R);
return F}static xor(b){let F=null,R=0;const W=[];b=b.map(aa=>[{time:aa.s,type:"s"},{time:aa.e,type:"e"}]);b=Array.prototype.concat(...b).sort((aa,fa)=>aa.time-fa.time);for(const aa of b)R+="s"===aa.type?1:-1,1===R?F=aa.time:(F&&+F!==+aa.time&&W.push(Wa.fromDateTimes(F,aa.time)),F=null);return Wa.merge(W)}difference(...b){return Wa.xor([this].concat(b)).map(F=>this.intersection(F)).filter(F=>F&&!F.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(b){return this.isValid?
`${this.s.toISO(b)}/${this.e.toISO(b)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(b){return this.isValid?`${this.s.toISOTime(b)}/${this.e.toISOTime(b)}`:"Invalid Interval"}toFormat(b,{separator:F=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(b)}${F}${this.e.toFormat(b)}`:"Invalid Interval"}toDuration(b,F){return this.isValid?this.e.diff(this.s,b,F):Na.invalid(this.invalidReason)}mapEndpoints(b){return Wa.fromDateTimes(b(this.s),
b(this.e))}}class Bb{static hasDST(b=Za.defaultZone){const F=Ja.now().setZone(b).set({month:12});return!b.isUniversal&&F.offset!==F.set({month:6}).offset}static isValidIANAZone(b){return tb.isValidZone(b)}static normalizeZone(b){return Q(b,Za.defaultZone)}static months(b="long",{locale:F=null,numberingSystem:R=null,locObj:W=null,outputCalendar:aa="gregory"}={}){return(W||Va.create(F,R,aa)).months(b)}static monthsFormat(b="long",{locale:F=null,numberingSystem:R=null,locObj:W=null,outputCalendar:aa=
"gregory"}={}){return(W||Va.create(F,R,aa)).months(b,!0)}static weekdays(b="long",{locale:F=null,numberingSystem:R=null,locObj:W=null}={}){return(W||Va.create(F,R,null)).weekdays(b)}static weekdaysFormat(b="long",{locale:F=null,numberingSystem:R=null,locObj:W=null}={}){return(W||Va.create(F,R,null)).weekdays(b,!0)}static meridiems({locale:b=null}={}){return Va.create(b).meridiems()}static eras(b="short",{locale:F=null}={}){return Va.create(F,null,"gregory").eras(b)}static features(){return{relative:t()}}}
const Lb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},$b={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Uc=Lb.hanidec.replace(/[\[|\]]/g,"").split(""),ac=`[ ${String.fromCharCode(160)}]`,Mb=new RegExp(ac,"g"),Vc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Ob=null;const Qb=[0,31,59,90,120,151,181,212,243,273,304,334],Pb=[0,31,60,91,121,152,182,213,244,274,305,335],dc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,
millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},cc="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class Ja{constructor(b){const F=b.zone||Za.defaultZone;let R=b.invalid||(Number.isNaN(b.ts)?new mb("invalid input"):null)||(F.isValid?null:fb(F));this.ts=n(b.ts)?Za.now():b.ts;let W=null;var aa=null;R||(b.old&&b.old.ts===this.ts&&b.old.zone.equals(F)?
[W,aa]=[b.old.c,b.old.o]:(aa=F.offset(this.ts),W=qb(this.ts,aa),W=(R=Number.isNaN(W.year)?new mb("invalid input"):null)?null:W,aa=R?null:aa));this._zone=F;this.loc=b.loc||Va.create();this.invalid=R;this.weekData=null;this.c=W;this.o=aa;this.isLuxonDateTime=!0}static now(){return new Ja({})}static local(){const [b,F]=$a(arguments),[R,W,aa,fa,oa,ta,za]=F;return Pa({year:R,month:W,day:aa,hour:fa,minute:oa,second:ta,millisecond:za},b)}static utc(){const [b,F]=$a(arguments),[R,W,aa,fa,oa,ta,za]=F;b.zone=
hb.utcInstance;return Pa({year:R,month:W,day:aa,hour:fa,minute:oa,second:ta,millisecond:za},b)}static fromJSDate(b,F={}){b="[object Date]"===Object.prototype.toString.call(b)?b.valueOf():NaN;if(Number.isNaN(b))return Ja.invalid("invalid input");const R=Q(F.zone,Za.defaultZone);return R.isValid?new Ja({ts:b,zone:R,loc:Va.fromObject(F)}):Ja.invalid(fb(R))}static fromMillis(b,F={}){if(m(b))return-864E13>b||864E13<b?Ja.invalid("Timestamp out of range"):new Ja({ts:b,zone:Q(F.zone,Za.defaultZone),loc:Va.fromObject(F)});
throw new kb(`fromMillis requires a numerical input, but received a ${typeof b} with value ${b}`);}static fromSeconds(b,F={}){if(m(b))return new Ja({ts:1E3*b,zone:Q(F.zone,Za.defaultZone),loc:Va.fromObject(F)});throw new kb("fromSeconds requires a numerical input");}static fromObject(b,F={}){b=b||{};var R=Q(F.zone,Za.defaultZone);if(!R.isValid)return Ja.invalid(fb(R));var W=Za.now();const aa=n(F.specificOffset)?R.offset(W):F.specificOffset,fa=w(b,Ma);var oa=!n(fa.ordinal),ta=!n(fa.year),za=!n(fa.month)||
!n(fa.day);ta=ta||za;var Ra=fa.weekYear||fa.weekNumber;F=Va.fromObject(F);if((ta||oa)&&Ra)throw new Ab("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(za&&oa)throw new Ab("Can't mix ordinal dates with month/day");za=Ra||fa.weekday&&!ta;let Ha=qb(W,aa);za?(W=Ad,Ra=yd,Ha=Ua(Ha)):oa?(W=Bd,Ra=zd,Ha=Ia(Ha)):(W=cc,Ra=dc);let La=!1;for(var Oa of W)n(fa[Oa])?fa[Oa]=La?Ra[Oa]:Ha[Oa]:La=!0;za?(Oa=k(fa.weekYear),W=G(fa.weekNumber,1,A(fa.weekYear)),Ra=G(fa.weekday,1,7),Oa=Oa?W?Ra?!1:
Aa("weekday",fa.weekday):Aa("week",fa.week):Aa("weekYear",fa.weekYear)):oa?(Oa=k(fa.year),W=G(fa.ordinal,1,d(fa.year)?366:365),Oa=Oa?W?!1:Aa("ordinal",fa.ordinal):Aa("year",fa.year)):Oa=ab(fa);if(Oa=Oa||lb(fa))return Ja.invalid(Oa);oa=za?Ta(fa):oa?cb(fa):fa;const [ib,yb]=rb(oa,aa,R);R=new Ja({ts:ib,zone:R,o:yb,loc:F});return fa.weekday&&ta&&b.weekday!==R.weekday?Ja.invalid("mismatched weekday",`you can't specify both a weekday of ${fa.weekday} and a date of ${R.toISO()}`):R}static fromISO(b,F={}){const [R,
W]=ba(b,[ld,Jc],[md,pd],[nd,qd],[od,rd]);return Y(R,W,F,"ISO 8601",b)}static fromRFC2822(b,F={}){const [R,W]=ba(b.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[hd,V]);return Y(R,W,F,"RFC 2822",b)}static fromHTTP(b,F={}){const [R,W]=ba(b,[id,ca],[jd,ca],[kd,ia]);return Y(R,W,F,"HTTP",F)}static fromFormat(b,F,R={}){if(n(b)||n(F))throw new kb("fromFormat requires an input string and a format");const {locale:W=null,numberingSystem:aa=null}=R;var fa=Va.fromOpts({locale:W,numberingSystem:aa,
defaultToEN:!0});{const {result:Ha,zone:La,specificOffset:Oa,invalidReason:ib}=xa(fa,b,F);fa=[Ha,La,Oa,ib]}const [oa,ta,za,Ra]=fa;return Ra?Ja.invalid(Ra):Y(oa,ta,R,`format ${F}`,b,za)}static fromString(b,F,R={}){return Ja.fromFormat(b,F,R)}static fromSQL(b,F={}){const [R,W]=ba(b,[td,Jc],[ud,vd]);return Y(R,W,F,"SQL",b)}static invalid(b,F=null){if(!b)throw new kb("need to specify a reason the DateTime is invalid");b=b instanceof mb?b:new mb(b,F);if(Za.throwOnInvalid)throw new Cb(b);return new Ja({invalid:b})}static isDateTime(b){return b&&
b.isLuxonDateTime||!1}get(b){return this[b]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ya(this).weekYear:NaN}get weekNumber(){return this.isValid?Ya(this).weekNumber:NaN}get weekday(){return this.isValid?
Ya(this).weekday:NaN}get ordinal(){return this.isValid?Ia(this.c).ordinal:NaN}get monthShort(){return this.isValid?Bb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return d(this.year)}get daysInMonth(){return e(this.year,this.month)}get daysInYear(){return this.isValid?
d(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?A(this.weekYear):NaN}resolvedLocaleOptions(b={}){const {locale:F,numberingSystem:R,calendar:W}=jb.create(this.loc.clone(b),b).resolvedOptions(this);return{locale:F,numberingSystem:R,outputCalendar:W}}toUTC(b=0,F={}){return this.setZone(hb.instance(b),F)}toLocal(){return this.setZone(Za.defaultZone)}setZone(b,{keepLocalTime:F=!1,keepCalendarTime:R=!1}={}){b=Q(b,Za.defaultZone);if(b.equals(this.zone))return this;if(b.isValid){let W=
this.ts;if(F||R)F=b.offset(this.ts),R=this.toObject(),[W]=rb(R,F,b);return gb(this,{ts:W,zone:b})}return Ja.invalid(fb(b))}reconfigure({locale:b,numberingSystem:F,outputCalendar:R}={}){b=this.loc.clone({locale:b,numberingSystem:F,outputCalendar:R});return gb(this,{loc:b})}setLocale(b){return this.reconfigure({locale:b})}set(b){if(!this.isValid)return this;b=w(b,Ma);var F=!n(b.weekYear)||!n(b.weekNumber)||!n(b.weekday);const R=!n(b.ordinal),W=!n(b.year),aa=!n(b.month)||!n(b.day),fa=b.weekYear||b.weekNumber;
if((W||aa||R)&&fa)throw new Ab("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(aa&&R)throw new Ab("Can't mix ordinal dates with month/day");F?F=Ta({...Ua(this.c),...b}):n(b.ordinal)?(F={...this.toObject(),...b},n(b.day)&&(F.day=Math.min(e(F.year,F.month),F.day))):F=cb({...Ia(this.c),...b});const [oa,ta]=rb(F,this.o,this.zone);return gb(this,{ts:oa,o:ta})}plus(b){if(!this.isValid)return this;b=Na.fromDurationLike(b);return gb(this,N(this,b))}minus(b){if(!this.isValid)return this;
b=Na.fromDurationLike(b).negate();return gb(this,N(this,b))}startOf(b){if(!this.isValid)return this;const F={};b=Na.normalizeUnit(b);switch(b){case "years":F.month=1;case "quarters":case "months":F.day=1;case "weeks":case "days":F.hour=0;case "hours":F.minute=0;case "minutes":F.second=0;case "seconds":F.millisecond=0}"weeks"===b&&(F.weekday=1);"quarters"===b&&(F.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(F)}endOf(b){return this.isValid?this.plus({[b]:1}).startOf(b).minus(1):this}toFormat(b,
F={}){return this.isValid?jb.create(this.loc.redefaultToEN(F)).formatDateTimeFromString(this,b):"Invalid DateTime"}toLocaleString(b=Rb,F={}){return this.isValid?jb.create(this.loc.clone(F),b).formatDateTime(this):"Invalid DateTime"}toLocaleParts(b={}){return this.isValid?jb.create(this.loc.clone(b),b).formatDateTimeParts(this):[]}toISO({format:b="extended",suppressSeconds:F=!1,suppressMilliseconds:R=!1,includeOffset:W=!0,extendedZone:aa=!1}={}){if(!this.isValid)return null;b="extended"===b;let fa=
ua(this,b);return fa=fa+"T"+wa(this,b,F,R,W,aa)}toISODate({format:b="extended"}={}){return this.isValid?ua(this,"extended"===b):null}toISOWeekDate(){return ma(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:b=!1,suppressSeconds:F=!1,includeOffset:R=!0,includePrefix:W=!1,extendedZone:aa=!1,format:fa="extended"}={}){return this.isValid?(W?"T":"")+wa(this,"extended"===fa,F,b,R,aa):null}toRFC2822(){return ma(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ma(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
ua(this,!0):null}toSQLTime({includeOffset:b=!0,includeZone:F=!1,includeOffsetSpace:R=!0}={}){let W="HH:mm:ss.SSS";if(F||b)R&&(W+=" "),F?W+="z":b&&(W+="ZZ");return ma(this,W,!0)}toSQL(b={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(b)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):
NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(b={}){if(!this.isValid)return{};const F={...this.c};b.includeConfig&&(F.outputCalendar=this.outputCalendar,F.numberingSystem=this.loc.numberingSystem,F.locale=this.loc.locale);return F}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(b,F="milliseconds",R={}){if(!this.isValid||!b.isValid)return Na.invalid("created by diffing an invalid DateTime");R={locale:this.locale,numberingSystem:this.numberingSystem,...R};const W=
(Array.isArray(F)?F:[F]).map(Na.normalizeUnit);F=b.valueOf()>this.valueOf();b=Ga(F?this:b,F?b:this,W,R);return F?b.negate():b}diffNow(b="milliseconds",F={}){return this.diff(Ja.now(),b,F)}until(b){return this.isValid?Wa.fromDateTimes(this,b):this}hasSame(b,F){if(!this.isValid)return!1;const R=b.valueOf();b=this.setZone(b.zone,{keepLocalTime:!0});return b.startOf(F)<=R&&R<=b.endOf(F)}equals(b){return this.isValid&&b.isValid&&this.valueOf()===b.valueOf()&&this.zone.equals(b.zone)&&this.loc.equals(b.loc)}toRelative(b=
{}){if(!this.isValid)return null;const F=b.base||Ja.fromObject({},{zone:this.zone}),R=b.padding?this<F?-b.padding:b.padding:0;let W="years months days hours minutes seconds".split(" "),aa=b.unit;Array.isArray(b.unit)&&(W=b.unit,aa=void 0);return bb(F,this.plus(R),{...b,numeric:"always",units:W,unit:aa})}toRelativeCalendar(b={}){return this.isValid?bb(b.base||Ja.fromObject({},{zone:this.zone}),this,{...b,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...b){if(!b.every(Ja.isDateTime))throw new kb("min requires all arguments be DateTimes");
return E(b,F=>F.valueOf(),Math.min)}static max(...b){if(!b.every(Ja.isDateTime))throw new kb("max requires all arguments be DateTimes");return E(b,F=>F.valueOf(),Math.max)}static fromFormatExplain(b,F,R={}){const {locale:W=null,numberingSystem:aa=null}=R;R=Va.fromOpts({locale:W,numberingSystem:aa,defaultToEN:!0});return xa(R,b,F)}static fromStringExplain(b,F,R={}){return Ja.fromFormatExplain(b,F,R)}static get DATE_SHORT(){return Rb}static get DATE_MED(){return ec}static get DATE_MED_WITH_WEEKDAY(){return Wc}static get DATE_FULL(){return fc}static get DATE_HUGE(){return gc}static get TIME_SIMPLE(){return hc}static get TIME_WITH_SECONDS(){return ic}static get TIME_WITH_SHORT_OFFSET(){return jc}static get TIME_WITH_LONG_OFFSET(){return kc}static get TIME_24_SIMPLE(){return lc}static get TIME_24_WITH_SECONDS(){return mc}static get TIME_24_WITH_SHORT_OFFSET(){return nc}static get TIME_24_WITH_LONG_OFFSET(){return oc}static get DATETIME_SHORT(){return pc}static get DATETIME_SHORT_WITH_SECONDS(){return qc}static get DATETIME_MED(){return rc}static get DATETIME_MED_WITH_SECONDS(){return sc}static get DATETIME_MED_WITH_WEEKDAY(){return Xc}static get DATETIME_FULL(){return tc}static get DATETIME_FULL_WITH_SECONDS(){return uc}static get DATETIME_HUGE(){return vc}static get DATETIME_HUGE_WITH_SECONDS(){return wc}}
g.DateTime=Ja;g.Info=Bb;g.Interval=Wa})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(g,n,m){function k(c){c||(c=m.getLocale());let a=c in G;if(!a){const q=c.split("-");1<q.length&&q[0]in G&&(c=q[0],a=!0);a||(c="en")}const [h,d,e="#,##0.###"]=G[c];return{decimal:h,group:d,pattern:e}}function t(c,a,h){h=h||{};!0===h.places&&(h.places=0);Infinity===h.places&&(h.places=6);a=a.split(".");var d="string"===typeof h.places&&h.places.indexOf(","),e=h.places;d?e=h.places.substring(d+
1):0<=e||(e=(a[1]||[]).length);0>h.round||(c=Number(c.toFixed(Number(e))));c=String(Math.abs(c)).split(".");const q=c[1]||"";a[1]||h.places?(d&&(h.places=h.places.substring(0,d)),d=void 0!==h.places?h.places:a[1]&&a[1].lastIndexOf("0")+1,d>q.length&&(c[1]=q.padEnd(Number(d),"0")),e<q.length&&(c[1]=q.substr(0,Number(e)))):c[1]&&c.pop();e=a[0].replace(",","");d=e.indexOf("0");-1!==d&&(d=e.length-d,d>c[0].length&&(c[0]=c[0].padStart(d,"0")),e.includes("#")||(c[0]=c[0].substr(c[0].length-d)));e=a[0].lastIndexOf(",");
let A,f;-1!==e&&(A=a[0].length-e-1,a=a[0].substr(0,e),e=a.lastIndexOf(","),-1!==e&&(f=a.length-e-1));a=[];for(e=c[0];e;)d=e.length-A,a.push(0<d?e.substr(d):e),e=0<d?e.slice(0,d):"",f&&(A=f,f=void 0);c[0]=a.reverse().join(h.group||",");return c.join(h.decimal||".")}function E(c){c=c||{};var a=k(c.locale);const h=c.pattern||a.pattern,d=a.group,e=a.decimal;let q=1;if(h.includes("%"))q/=100;else if(h.includes("\u2030"))q/=1E3;else if(h.includes("\u00a4"))throw Error("currency notation not supported");
a=h.split(";");1===a.length&&a.push("-"+a[0]);return{regexp:p(a,A=>{A="(?:"+n.escapeRegExpString(A,".")+")";return A.replace(D,f=>{const r={signed:!1,separator:c.strict?d:[d,""],fractional:c.fractional,decimal:e,exponent:!1};f=f.split(".");let v=c.places;1===f.length&&1!==q&&(f[1]="###");1===f.length||0===v?r.fractional=!1:(void 0===v&&(v=c.pattern?f[1].lastIndexOf("0")+1:Infinity),v&&null==c.fractional&&(r.fractional=!0),!c.places&&v<f[1].length&&(v+=","+f[1].length),r.places=v);f=f[0].split(",");
1<f.length&&(r.groupSize=f.pop().length,1<f.length&&(r.groupSize2=f.pop().length));return"("+y(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:e,factor:q}}function y(c){c=c||{};"places"in c||(c.places=Infinity);"string"!==typeof c.decimal&&(c.decimal=".");"fractional"in c&&!/^0/.test(String(c.places))||(c.fractional=[!0,!1]);"exponent"in c||(c.exponent=[!0,!1]);"eSigned"in c||(c.eSigned=[!0,!1]);var a=H(c);const h=p(c.fractional,e=>{let q="";e&&0!==c.places&&(q="\\"+c.decimal,q=Infinity===
c.places?"(?:"+q+"\\d+)?":q+("\\d{"+c.places+"}"));return q},!0),d=p(c.exponent,e=>e?"([eE]"+H({signed:c.eSigned})+")":"");a+=h;h&&(a="(?:(?:"+a+")|(?:"+h+"))");return a+d}function H(c){c=c||{};"signed"in c||(c.signed=[!0,!1]);"separator"in c?"groupSize"in c||(c.groupSize=3):c.separator="";const a=p(c.signed,d=>d?"[-+]":"",!0),h=p(c.separator,d=>{if(!d)return"(?:\\d+)";d=n.escapeRegExpString(d);" "===d?d="\\s":"\u00a0"===d&&(d="\\s\\xa0");const e=c.groupSize,q=c.groupSize2;return q?(d="(?:0|[1-9]\\d{0,"+
(q-1)+"}(?:["+d+"]\\d{"+q+"})*["+d+"]\\d{"+e+"})",0<e-q?"(?:"+d+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":d):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+d+"]\\d{"+e+"})*)"},!0);return a+h}const G={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",",
"."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},D=/[#0,]*[#0](?:\.0*#*)?/,p=(c,a,h)=>{if(!(c instanceof Array))return a(c);const d=[];for(let e=0;e<c.length;e++)d.push(a(c[e]));
c=d.join("|");return"("+(h?"?:":"")+c+")"};g._parseInfo=E;g.format=function(c,a){a={...a};var h=k(a.locale);a.customs=h;var d=a.pattern||h.pattern;if(isNaN(c)||Infinity===Math.abs(c))return null;{a=a||{};h=a.customs.group;const q=a.customs.decimal;d=d.split(";");var e=d[0];d=d[0>c?1:0]||"-"+e;if(d.includes("%"))c*=100;else if(d.includes("\u2030"))c*=1E3;else{if(d.includes("\u00a4"))throw Error("currency notation not supported");if(d.includes("E"))throw Error("exponential notation not supported");
}const A=D;e=e.match(A);if(!e)throw Error("unable to find a number expression in pattern: "+d);!1===a.fractional&&(a.places=0);c=d.replace(A,t(c,e[0],{decimal:q,group:h,places:a.places,round:a.round}))}return c};g.getCustoms=k;g.parse=function(c,a){a=E(a);c=(new RegExp("^"+a.regexp+"$")).exec(c);if(!c)return NaN;let h=c[1];if(!c[1]){if(!c[2])return NaN;h=c[2];a.factor*=-1}h=h.replace(new RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return Number(h)*a.factor};g.regexp=function(c){return E(c).regexp};
Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../geometry/Extent","../../../layers/support/Field"],function(g,n,m){function k(t){return t instanceof Date}g.FeatureServiceDatabaseType=void 0;(function(t){t[t.Standardised=0]="Standardised";t[t.StandardisedNoInterval=1]="StandardisedNoInterval";t[t.SqlServer=2]="SqlServer";t[t.Oracle=3]="Oracle";t[t.Postgres=4]="Postgres";t[t.PGDB=
5]="PGDB";t[t.FILEGDB=6]="FILEGDB";t[t.NotEvaluated=7]="NotEvaluated"})(g.FeatureServiceDatabaseType||(g.FeatureServiceDatabaseType={}));g.IdState=void 0;(function(t){t[t.InFeatureSet=0]="InFeatureSet";t[t.NotInFeatureSet=1]="NotInFeatureSet";t[t.Unknown=2]="Unknown"})(g.IdState||(g.IdState={}));g.callback=function(t,E){return function(){try{t.apply(null,arguments)}catch(y){E.reject(y)}}};g.cloneAttributes=function(t){const E={};for(const y in t)E[y]=t[y];return E};g.cloneField=function(t){return m.fromJSON(t.toJSON())};
g.convertLinearUnitsToCode=function(t){if(void 0===t)return null;if("number"===typeof t||"number"===typeof t)return t;switch(t.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};g.convertSquareUnitsToCode=function(t){if(void 0===t)return null;if("number"===typeof t)return t;switch(t.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
g.defaultMaxRecords=1E3;g.equalityTest=function(t,E){return t===E?!0:k(t)&&k(E)?t.getTime()===E.getTime():!1};g.errback=function(t){return function(E){t.reject(E)}};g.esriFieldToJson=function(t){return t.toJSON?t.toJSON():t};g.extractServiceUrl=function(t){if(void 0===t)return"";t=t.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");t=t.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return t=t.split("?")[0]};g.isArray=function(t){return t instanceof Array};g.isBoolean=function(t){return"boolean"===
typeof t};g.isDate=k;g.isNumber=function(t){return"number"===typeof t};g.isString=function(t){return"string"===typeof t||t instanceof String};g.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};g.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};g.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",
polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};g.sameGeomType=function(t,E){return t===E||"point"===t&&"esriGeometryPoint"===E||"polyline"===t&&"esriGeometryPolyline"===E||"polygon"===t&&"esriGeometryPolygon"===
E||"extent"===t&&"esriGeometryEnvelope"===E||"multipoint"===t&&"esriGeometryMultipoint"===E||"point"===E&&"esriGeometryPoint"===t||"polyline"===E&&"esriGeometryPolyline"===t||"polygon"===E&&"esriGeometryPolygon"===t||"extent"===E&&"esriGeometryEnvelope"===t||"multipoint"===E&&"esriGeometryMultipoint"===t?!0:!1};g.shapeExtent=function(t){if(null===t)return null;switch(t.type){case "polygon":case "multipoint":case "polyline":return t.extent;case "point":return new n({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,
spatialReference:t.spatialReference});case "extent":return t}return null};g.stableStringify=function(t,E){E||(E={});"function"===typeof E&&(E={cmp:E});const y="boolean"===typeof E.cycles?E.cycles:!1,H=E.cmp&&function(D){return function(p){return function(c,a){return D({key:c,value:p[c]},{key:a,value:p[a]})}}}(E.cmp),G=[];return function c(p){p&&p.toJSON&&"function"===typeof p.toJSON&&(p=p.toJSON());if(void 0!==p){if("number"===typeof p)return isFinite(p)?""+p:"null";if("object"!==typeof p)return JSON.stringify(p);
var a;if(Array.isArray(p)){var h="[";for(a=0;a<p.length;a++)a&&(h+=","),h+=c(p[a])||"null";return h+"]"}if(null===p)return"null";if(G.includes(p)){if(y)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var d=G.push(p)-1,e=Object.keys(p).sort(H&&H(p));h="";for(a=0;a<e.length;a++){const q=e[a],A=c(p[q]);A&&(h&&(h+=","),h+=JSON.stringify(q)+":"+A)}G.splice(d,1);return"{"+h+"}"}}(t)};g.toEsriGeometryType=function(t){switch(t){case "point":return"esriGeometryPoint";
case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(g,
n,m,k,t,E,y){function H(f){return`<ul class="esri-widget__list">${f.map(r=>`<li>${"string"===typeof r?y.applyTextFormattingHTML(y.htmlEntities(r)):r}</li>`).join("")}</ul>`}function G(f){return`<table class="esri-widget__table">${f.keys().map(r=>{var v=f.field(r);v="string"===typeof v?y.applyTextFormattingHTML(y.htmlEntities(v)):v;return`<tr><th>${r}</th><td>${v}</td></tr>`}).join("")}</table>`}function D({aggregatedFeatures:f,arcadeUtils:r,featureSetVars:v,context:B,viewInfo:w,map:u,graphic:C,interceptor:J}){v.forEach(S=>
{S=S.toLowerCase();var T={map:u,spatialReference:w.sr,interceptor:J};"$map"===S&&(B.vars[S]=r.convertMapToFeatureSetCollection(T));"$layer"===S&&(B.vars[S]=r.convertFeatureLayerToFeatureSet({layer:C.sourceLayer,spatialReference:w.sr,interceptor:J}));"$datastore"===S&&(B.vars[S]=r.convertServiceUrlToWorkspace({url:C.sourceLayer.url,spatialReference:w.sr,interceptor:J}));if("$aggregatedfeatures"===S){T=C.layer;const {fields:P,objectIdField:X,geometryType:Q,spatialReference:O,displayField:Z}=T;T=new E({fields:P,
objectIdField:X,geometryType:Q,spatialReference:O,displayField:Z,..."feature"===T.type?{templates:T.templates,typeIdField:T.typeIdField,types:T.types}:null,source:f});B.vars[S]=r.convertFeatureLayerToFeatureSet({layer:T,spatialReference:w.sr,interceptor:J})}})}function p(){return new Promise((f,r)=>g(["../../../support/arcadeUtils"],f,r))}function c(f){return a.apply(this,arguments)}function a(){a=m._asyncToGenerator(function*({graphic:f,view:r}){const {isAggregate:v,layer:B}=f;if(!v||!B||"2d"!==
(null==r?void 0:r.type))return[];r=yield r.whenLayerView(B);if(!r.createQuery||!r.queryFeatures)return[];const w=r.createQuery();w.aggregateIds=[f.getObjectId()];({features:f}=yield r.queryFeatures(w));return f});return a.apply(this,arguments)}function h(f){return d.apply(this,arguments)}function d(){d=m._asyncToGenerator(function*({expressionInfo:f,arcadeUtils:r,interceptor:v,spatialReference:B,map:w,graphic:u,view:C}){if(!f||!f.expression)return null;const J=r.createSyntaxTree(f.expression),S=q.filter(P=>
r.hasVariable(J,P));[C]=yield Promise.all([c({graphic:u,view:C}),r.loadScriptDependencies(J,!0,S)]);const T=r.getViewInfo({spatialReference:B});B=r.createExecContext(u,T);B.interceptor=v;B.useAsync=!0;D({aggregatedFeatures:C,arcadeUtils:r,featureSetVars:S,context:B,viewInfo:T,map:w,graphic:u,interceptor:v});v=r.createFunction(J,B);return r.executeAsyncFunction(v,B).catch(P=>A.error("arcade-execution-error",{error:P,graphic:u,expressionInfo:f}))});return d.apply(this,arguments)}function e(){e=m._asyncToGenerator(function*({expressionInfos:f,
spatialReference:r,graphic:v,interceptor:B,map:w,view:u}){if(!f||!f.length)return{};const C=yield p(),J={};for(const S of f)J[`expression/${S.name}`]=h({expressionInfo:S,arcadeUtils:C,interceptor:B,spatialReference:r,map:w,graphic:v,view:u});f=yield t.eachAlways(J);r={};for(const S in f)v=f[S].value,v="string"===typeof v?y.applyTextFormattingHTML(y.htmlEntities(v)):Array.isArray(v)?H(v):"esri.arcade.Dictionary"===(null==v?void 0:v.declaredClass)?G(v):v,r[S]=v;return r});return e.apply(this,arguments)}
const q=["$datastore","$map","$layer","$aggregatedfeatures"],A=k.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");n.createCompiledExpression=h;n.createCompiledExpressions=function(f){return e.apply(this,arguments)};n.loadArcadeUtils=p;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C){var J;const S=y.getLogger("esri.widgets.FeatureViewModel"),T={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};t=J=function(P){function X(O){var Z=P.call(this,O)||this;Z._handles=new E;Z._error=null;Z._featureAbortController=null;Z.graphicChangedThrottled=p.throttle(Z._graphicChanged,1,g._assertThisInitialized(Z));Z._expressionAttributes=null;Z._graphicExpressionAttributes=
null;Z.abilities={...T};Z.content=null;Z.contentViewModels=[];Z.defaultPopupTemplateEnabled=!1;Z.formattedAttributes=null;Z.lastEditInfo=null;Z.relatedInfos=new Map;Z.title="";Z.view=null;Z._isAllowedContentType=L=>{const {abilities:I}=g._assertThisInitialized(Z);return"attachments"===L.type&&I.attachmentsContent||"custom"===L.type&&I.customContent||"fields"===L.type&&I.fieldsContent||"media"===L.type&&I.mediaContent||"text"===L.type&&I.textContent||"expression"===L.type&&I.expressionContent};Z._handles.add(D.watch(()=>
[Z.graphic,Z._effectivePopupTemplate,Z.abilities],()=>Z.graphicChangedThrottled(),D.initial));return Z}g._inheritsLoose(X,P);var Q=X.prototype;Q.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};Q.castAbilities=function(O){return{...T,...O}};Q.setActiveMedia=function(O,Z){O=this.contentViewModels[O];O instanceof B&&O.setActiveMedia(Z)};Q.nextMedia=function(O){O=
this.contentViewModels[O];O instanceof B&&O.next()};Q.previousMedia=function(O){O=this.contentViewModels[O];O instanceof B&&O.previous()};Q._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};Q._graphicChanged=function(){var O=g._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:Z}=this;if(Z){var L=new AbortController;this._featureAbortController=L;try{yield this._queryFeature({signal:L.signal})}catch(I){G.isAbortError(I)||
(this._error=I,S.error("error","The popupTemplate could not be displayed for this feature.",{error:I,graphic:Z,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===L&&(this._featureAbortController=null)}});return function(){return O.apply(this,arguments)}}();Q._cancelFeatureQuery=function(){const {_featureAbortController:O}=this;O&&O.abort();this._featureAbortController=null};Q._compileContentElement=function(O,Z){if("attachments"===O.type)return this._compileAttachments(O,
Z);if("custom"===O.type)return this._compileCustom(O,Z);if("fields"===O.type)return this._compileFields(O,Z);if("media"===O.type)return this._compileMedia(O,Z);if("text"===O.type)return this._compileText(O,Z);if("expression"===O.type)return this._compileExpression(O,Z)};Q._compileContent=function(O){this._destroyContentViewModels();if(this.graphic)return Array.isArray(O)?O.filter(this._isAllowedContentType).map((Z,L)=>this._compileContentElement(Z,L)):"string"===typeof O?this._compileText(new q({text:O}),
0).text:O};Q._destroyContentViewModels=function(){var O;null==(O=this._handles)?void 0:O.remove("content-view-models");this.contentViewModels.forEach(Z=>Z&&!Z.destroyed&&Z.destroy());this._set("contentViewModels",[])};Q._setExpressionContentVM=function(O,Z){const {formattedAttributes:L}=this,{contentElement:I,contentElementViewModel:l}=O;O=null==I?void 0:I.type;l&&O&&("fields"===O&&(this._createFieldsFormattedAttributes({contentElement:I,contentElementIndex:Z,formattedAttributes:L}),l.set(this._createFieldsVMParams(I,
Z))),"media"===O&&(this._createMediaFormattedAttributes({contentElement:I,contentElementIndex:Z,formattedAttributes:L}),l.set(this._createMediaVMParams(I,Z))),"text"===O&&l.set(this._createTextVMParams(I)))};Q._compileExpression=function(O,Z){const {expressionInfo:L}=O,{graphic:I,map:l,spatialReference:z,view:x}=this,K=new r({expressionInfo:L,graphic:I,interceptor:J.interceptor,map:l,spatialReference:z,view:x});this.contentViewModels[Z]=K;this._handles.add(D.watch(()=>K.contentElementViewModel,()=>
this._setExpressionContentVM(K,Z),D.initial),"content-view-models");return O};Q._compileAttachments=function(O,Z){const {graphic:L}=this,{description:I,title:l}=O;this.contentViewModels[Z]=new A({graphic:L,...this._compileTitleAndDesc({title:l,description:I})});return O};Q._compileCustom=function(O,Z){const {graphic:L}=this,{creator:I,destroyer:l}=O;this.contentViewModels[Z]=new f({graphic:L,creator:I,destroyer:l});return O};Q._compileTitleAndDesc=function({title:O,description:Z}){const {_fieldInfoMap:L,
_sourceLayer:I,graphic:l,formattedAttributes:z,_expressionAttributes:x}=this,{attributes:K}=l,U=z.global;return{title:u.substituteFieldsInLinksAndAttributes({attributes:K,fieldInfoMap:L,globalAttributes:U,expressionAttributes:x,layer:I,text:O}),description:u.substituteFieldsInLinksAndAttributes({attributes:K,fieldInfoMap:L,globalAttributes:U,expressionAttributes:x,layer:I,text:Z})}};Q._createFieldsVMParams=function(O,Z){const {_effectivePopupTemplate:L,formattedAttributes:I}=this,l={...I.global,...I.content[Z]};
Z=(null==O?void 0:O.fieldInfos)||(null==L?void 0:L.fieldInfos);Z=null==Z?void 0:Z.filter(({fieldName:U})=>u.isExpressionField(U)||u.isRelatedField(U)||l.hasOwnProperty(U));const z=null==L?void 0:L.expressionInfos,{description:x,title:K}=O;return{attributes:l,expressionInfos:z,fieldInfos:Z,...this._compileTitleAndDesc({title:K,description:x})}};Q._compileFields=function(O,Z){const L=O.clone();O=new v(this._createFieldsVMParams(O,Z));this.contentViewModels[Z]=O;L.fieldInfos=O.formattedFieldInfos.slice(0);
return L};Q._createMediaVMParams=function(O,Z){const {abilities:L,graphic:I,_fieldInfoMap:l,formattedAttributes:z,_effectivePopupTemplate:x,relatedInfos:K,_sourceLayer:U,_expressionAttributes:ba}=this,{attributes:ea}=I,{description:na,mediaInfos:ha,title:la}=O;return{abilities:{chartAnimation:L.chartAnimation},activeMediaInfoIndex:O.activeMediaInfoIndex||0,attributes:ea,layer:U,fieldInfoMap:l,formattedAttributes:{...z.global,...z.content[Z]},expressionAttributes:ba,mediaInfos:ha,popupTemplate:x,relatedInfos:K,
...this._compileTitleAndDesc({title:la,description:na})}};Q._compileMedia=function(O,Z){const L=O.clone();O=new B(this._createMediaVMParams(O,Z));L.mediaInfos=O.formattedMediaInfos.slice(0);this.contentViewModels[Z]=O;return L};Q._createTextVMParams=function(O){const {graphic:Z,_fieldInfoMap:L,_sourceLayer:I,_expressionAttributes:l}=this;if(O&&O.text){const {attributes:z}=Z;O.text=u.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:L,globalAttributes:this.formattedAttributes.global,
expressionAttributes:l,layer:I,text:O.text})}return{graphic:Z,creator:O.text}};Q._compileText=function(O,Z){O=O.clone();this.contentViewModels[Z]=new f(this._createTextVMParams(O));return O};Q._compileLastEditInfo=function(){const {_effectivePopupTemplate:O,_sourceLayer:Z,graphic:L}=this;if(O){var {lastEditInfoEnabled:I}=O,l=null==Z?void 0:Z.editFieldsInfo;if(I&&l)return u.formatEditInfo(l,L.attributes)}};Q._compileTitle=function(O){const {_fieldInfoMap:Z,_sourceLayer:L,graphic:I,_expressionAttributes:l}=
this,{attributes:z}=I;return u.substituteFieldsInLinksAndAttributes({attributes:z,fieldInfoMap:Z,globalAttributes:this.formattedAttributes.global,expressionAttributes:l,layer:L,text:O})};Q._getTitle=function(){var O=g._asyncToGenerator(function*(){const {_effectivePopupTemplate:Z,graphic:L}=this;return u.graphicCallback(null==Z?void 0:Z.title,{graphic:L})});return function(){return O.apply(this,arguments)}}();Q._getContent=function(){var O=g._asyncToGenerator(function*(){const {_effectivePopupTemplate:Z,
graphic:L}=this;return u.graphicCallback(null==Z?void 0:Z.content,{graphic:L})});return function(){return O.apply(this,arguments)}}();Q._queryFeature=function(){var O=g._asyncToGenerator(function*(Z){const {_featureAbortController:L,_sourceLayer:I,graphic:l,_effectivePopupTemplate:z,spatialReference:x,map:K,view:U}=this,{content:{value:ba},title:{value:ea}}=yield G.eachAlways({content:this._getContent(),title:this._getTitle()});L===this._featureAbortController&&l&&(yield u.queryUpdatedFeature({graphic:l,
popupTemplate:z,layer:I,spatialReference:x},Z),{expressionAttributes:{value:Z}}=yield G.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(Z),expressionAttributes:w.createCompiledExpressions({expressionInfos:null==z?void 0:z.expressionInfos,spatialReference:x,graphic:l,map:K,interceptor:J.interceptor,view:U})}),L===this._featureAbortController&&l&&(this._expressionAttributes=Z,this._graphicExpressionAttributes={...l.attributes,...Z},this._set("formattedAttributes",this._createFormattedAttributes(ba)),
this._set("title",this._compileTitle(ea)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(ba)||null)))});return function(Z){return O.apply(this,arguments)}}();Q._createMediaFormattedAttributes=function({contentElement:O,contentElementIndex:Z,formattedAttributes:L}){const {_effectivePopupTemplate:I,graphic:l,relatedInfos:z,_sourceLayer:x,_fieldInfoMap:K,_graphicExpressionAttributes:U}=this;L.content[Z]=u.formatAttributes({fieldInfos:null==I?void 0:
I.fieldInfos,graphic:l,attributes:{...U,...O.attributes},layer:x,fieldInfoMap:K,relatedInfos:z})};Q._createFieldsFormattedAttributes=function({contentElement:O,contentElementIndex:Z,formattedAttributes:L}){if(O.fieldInfos){const {graphic:I,relatedInfos:l,_sourceLayer:z,_fieldInfoMap:x,_graphicExpressionAttributes:K}=this;L.content[Z]=u.formatAttributes({fieldInfos:O.fieldInfos,graphic:I,attributes:{...K,...O.attributes},layer:z,fieldInfoMap:x,relatedInfos:l})}};Q._createFormattedAttributes=function(O){const {_effectivePopupTemplate:Z,
graphic:L,relatedInfos:I,_sourceLayer:l,_fieldInfoMap:z,_graphicExpressionAttributes:x}=this,K={global:u.formatAttributes({fieldInfos:null==Z?void 0:Z.fieldInfos,graphic:L,attributes:x,layer:l,fieldInfoMap:z,relatedInfos:I}),content:[]};Array.isArray(O)&&O.forEach((U,ba)=>{"fields"===U.type&&this._createFieldsFormattedAttributes({contentElement:U,contentElementIndex:ba,formattedAttributes:K});"media"===U.type&&this._createMediaFormattedAttributes({contentElement:U,contentElementIndex:ba,formattedAttributes:K})});
return K};Q._checkForRelatedFeatures=function(O){const {graphic:Z,_effectivePopupTemplate:L}=this;return this._queryRelatedInfos(Z,u.getAllFieldInfos(L),O)};Q._queryRelatedInfos=function(){var O=g._asyncToGenerator(function*(Z,L,I){const {relatedInfos:l,_sourceLayer:z}=this;l.clear();const x=H.isSome(z.associatedLayer)?yield z.associatedLayer.load(I):z;if(x){var K=L.filter(ea=>ea&&u.isRelatedField(ea.fieldName));if(K&&K.length){L.forEach(ea=>this._configureRelatedInfo(ea,x));var U=yield C.queryLayerInfos({relatedInfos:l,
layer:x},I);Object.keys(U).forEach(ea=>{var na;const ha=l.get(ea.toString());ea=null==(na=U[ea])?void 0:na.value;ha&&ea&&(ha.layerInfo=ea.data)});var ba=yield C.queryRelatedFeatures({graphic:Z,relatedInfos:l,layer:x},I);Object.keys(ba).forEach(ea=>{var na;C.setRelatedFeatures(null==(na=ba[ea])?void 0:na.value,l.get(ea.toString()))})}}});return function(Z,L,I){return O.apply(this,arguments)}}();Q._configureRelatedInfo=function(O,Z){const {relatedInfos:L}=this,I=C.getRelatedFieldInfo(O.fieldName);if(I){var {layerId:l,
fieldName:z}=I;l&&(Z=L.get(l.toString())||C.createRelatedInfo(l,Z))&&(C.updateRelatedInfo({relatedInfo:Z,fieldName:z,fieldInfo:O}),this.relatedInfos.set(l,Z))}};g._createClass(X,[{key:"_effectivePopupTemplate",get:function(){return H.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return u.createfieldInfoMap(u.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return u.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(O){this._set("graphic",O?O.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(O){void 0===O?this._clearOverride("spatialReference"):this._override("spatialReference",O)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(O){void 0===O?this._clearOverride("map"):
this._override("map",O)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return X}(t);t.interceptor=new k.FeatureSetQueryInterceptor(u.preLayerQueryCallback,u.preRequestCallback);n.__decorate([c.property()],t.prototype,"_error",void 0);n.__decorate([c.property()],t.prototype,"_featureAbortController",void 0);n.__decorate([c.property({readOnly:!0})],t.prototype,"_effectivePopupTemplate",null);n.__decorate([c.property({readOnly:!0})],t.prototype,"_fieldInfoMap",null);
n.__decorate([c.property({readOnly:!0})],t.prototype,"_sourceLayer",null);n.__decorate([c.property()],t.prototype,"abilities",void 0);n.__decorate([d.cast("abilities")],t.prototype,"castAbilities",null);n.__decorate([c.property({readOnly:!0})],t.prototype,"content",void 0);n.__decorate([c.property({readOnly:!0})],t.prototype,"contentViewModels",void 0);n.__decorate([c.property({type:Boolean})],t.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([c.property({readOnly:!0})],t.prototype,"state",
null);n.__decorate([c.property({readOnly:!0})],t.prototype,"formattedAttributes",void 0);n.__decorate([c.property({type:m,value:null})],t.prototype,"graphic",null);n.__decorate([c.property({readOnly:!0})],t.prototype,"lastEditInfo",void 0);n.__decorate([c.property({readOnly:!0})],t.prototype,"relatedInfos",void 0);n.__decorate([c.property()],t.prototype,"spatialReference",null);n.__decorate([c.property({readOnly:!0})],t.prototype,"title",void 0);n.__decorate([c.property()],t.prototype,"map",null);
n.__decorate([c.property({readOnly:!0})],t.prototype,"waitingForContent",null);n.__decorate([c.property()],t.prototype,"view",void 0);return t=J=n.__decorate([e.subclass("esri.widgets.FeatureViewModel")],t)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(g){g.FeatureSetQueryInterceptor=function(n,m){this.preLayerQueryCallback=n;this.preRequestCallback=m;this.preLayerQueryCallback||(this.preLayerQueryCallback=k=>{});this.preRequestCallback||(this.preLayerQueryCallback=
k=>{})};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(g,
n,m,k,t,E,y,H,G,D,p){g.FeatureContentMixin=c=>{c=function(a){function h(){var d=a.apply(this,arguments)||this;d.renderNodeContent=e=>D.isWidget(e)&&!e.destroyed?p.tsx("div",{key:e},e.render()):e instanceof HTMLElement?p.tsx("div",{key:e,bind:e,afterCreate:d._attachToNode}):D.hasDomNode(e)?p.tsx("div",{key:e,bind:e.domNode,afterCreate:d._attachToNode}):null;return d}n._inheritsLoose(h,a);h.prototype._attachToNode=function(d){d.appendChild(this)};return h}(c);return c=m.__decorate([G.subclass("esri.widgets.Feature.ContentMixin")],
c)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){y=function(e){function q(f,r){f=e.call(this,f,r)||this;f._animationDelay=500;f._animationPromise=null;f.location=null;f.view=null;f.viewModel=new a;f.visible=!1;return f}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){this.own([t.watch(()=>this.visible,f=>this._visibleChange(f))])};A.destroy=function(){this._animationPromise=null};A.show=function(f){const {location:r,promise:v}=f;r&&(this.viewModel.location=r);this.visible=!0;f=()=>this.hide();
v&&v.catch(()=>{}).then(f)};A.hide=function(){this.visible=!1};A.render=function(){var {visible:f}=this,{screenLocation:r}=this.viewModel;r=!!r;f={["esri-spinner--start"]:f&&r,["esri-spinner--finish"]:!f&&r};r=this._getPositionStyles();return d.tsx("div",{class:this.classes("esri-spinner",f),styles:r})};A._visibleChange=function(f){if(f)this.viewModel.screenLocationEnabled=!0;else{var r=k.after(this._animationDelay);this._animationPromise=r;r.catch(()=>{}).then(()=>{this._animationPromise===r&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};A._getPositionStyles=function(){const {screenLocation:f,view:r}=this.viewModel;if(m.isNone(r)||m.isNone(f))return{};const {padding:v}=r;return{left:`${f.x-v.left}px`,top:`${f.y-v.top}px`}};return q}(c);n.__decorate([E.aliasOf("viewModel.location")],y.prototype,"location",void 0);n.__decorate([E.aliasOf("viewModel.view")],y.prototype,"view",void 0);n.__decorate([D.property({type:a})],y.prototype,"viewModel",void 0);n.__decorate([E.aliasOf("viewModel.visible")],y.prototype,
"visible",void 0);return y=n.__decorate([p.subclass("esri.widgets.Spinner")],y)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(g,n,m,k,t,E,y,H){k=function(G){function D(p){p=G.call(this,p)||this;p.visible=
!1;return p}g._inheritsLoose(D,G);return D}(H);n.__decorate([m.property()],k.prototype,"visible",void 0);return k=n.__decorate([y.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p){const c=Symbol("anchorHandles");m=function(h){function d(e){var q=h.call(this,e)||this;q[a]=new k;q.location=null;q.screenLocationEnabled=!1;q.view=null;q[c].add([E.when(()=>t.applySome(q.screenLocationEnabled?q.view:null,A=>[A.size,"3d"===A.type?A.camera:A.viewpoint]),()=>q.notifyChange("screenLocation")),E.watch(()=>q.screenLocation,(A,f)=>{t.isSome(A)&&t.isSome(f)&&q.emit("view-change")})]);return q}g._inheritsLoose(d,h);d.prototype.destroy=function(){this.view=
null;this[c]=t.destroyMaybe(this[c])};g._createClass(d,[{key:"screenLocation",get:function(){const {location:e,view:q,screenLocationEnabled:A}=this;return A&&t.isSome(e)&&t.isSome(q)&&q.ready?q.toScreen(e):null}}]);return d}(m.EventedAccessor);var a=c;n.__decorate([y.property()],m.prototype,"location",void 0);n.__decorate([y.property()],m.prototype,"screenLocation",null);n.__decorate([y.property()],m.prototype,"screenLocationEnabled",void 0);n.__decorate([y.property()],m.prototype,"view",void 0);
return m=n.__decorate([p.subclass("esri.widgets.support.AnchorElementViewModel")],m)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C,J,S,T,P,X,Q){const O=E.ofType({key:"type",defaultKeyValue:"button",base:f,typeMap:{button:r,toggle:v}}),Z=G.getLogger("esri.widgets.Popup.PopupViewModel");m=function(L){function I(z){z=L.call(this,z)||this;z._handles=new H;z._pendingPromises=new Set;z._fetchFeaturesController=null;z._selectedClusterFeature=null;z.featurePage=null;z.actions=new O;z.activeFeature=null;z.defaultPopupTemplateEnabled=!1;z.autoCloseEnabled=!1;z.autoOpenEnabled=
!0;z.browseClusterEnabled=!1;z.content=null;z.featuresPerPage=20;z.featureViewModelAbilities=null;z.featureViewModels=[];z.highlightEnabled=!0;z.includeDefaultActions=!0;z.selectedClusterBoundaryFeature=new k({symbol:new Q({outline:{width:1.5,color:"cyan"},style:"none"})});z.title=null;z.updateLocationEnabled=!1;z.view=null;z.visible=!1;z.zoomFactor=4;z.zoomToLocation=null;return z}g._inheritsLoose(I,L);var l=I.prototype;l.initialize=function(){this._handles.add([p.watch(()=>[this.autoOpenEnabled,
this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),p.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),p.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),p.watch(()=>{var z,x;return null==(z=this.view)?void 0:null==(x=z.animation)?void 0:x.state},z=>this._animationStateChange(z)),p.watch(()=>this.location,z=>this._locationChange(z)),
p.watch(()=>this.selectedFeature,z=>this._selectedFeatureChange(z)),p.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),p.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),p.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",z=>S.triggerAction({event:z,view:this.view})),p.when(()=>
!this.waitingForResult,()=>this._waitingForResultChange(),p.sync),p.watch(()=>{var z,x;return[this.features,null==(z=this.view)?void 0:z.map,null==(x=this.view)?void 0:x.spatialReference]},()=>this._updateFeatureVMs()),p.watch(()=>{var z;return null==(z=this.view)?void 0:z.scale},()=>this._viewScaleChange()),p.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),p.watch(()=>this.browseClusterEnabled,z=>z?this.enableClusterBrowsing():this.disableClusterBrowsing())])};l.destroy=function(){this._cancelFetchingFeatures();
this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};l.centerAtLocation=function(){var {view:z}=this;const x=S.getSelectedTarget(this);return x?this.callGoTo({target:{target:x,scale:z.scale}}):(z=new y("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:x,view:z}),Z.error(z),Promise.reject(z))};l.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,
activeFeature:null})};l.fetchFeatures=function(z,x){const {view:K}=this;return K&&z?K.fetchPopupFeatures(z,{event:x&&x.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:x&&x.signal}):(z=new y("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:z,view:K}),Z.error(z),Promise.reject(z))};l.open=function(z){z={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...z,visible:!0};var {fetchFeatures:x}=z;delete z.fetchFeatures;
x&&this._setFetchFeaturesPromises(z.location);x=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const K of x)delete z[K];this.set(z)};l.triggerAction=function(z){(z=this.allActions.getItemAt(z))&&!z.disabled&&this.emit("trigger-action",{action:z})};l.next=function(){this.selectedFeatureIndex+=1;return this};l.previous=function(){--this.selectedFeatureIndex;return this};l.disableClusterBrowsing=function(){S.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};l.enableClusterBrowsing=
function(){var z=g._asyncToGenerator(function*(){const {view:x,selectedFeature:K}=this;"2d"!==(null==x?void 0:x.type)?Z.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",K):S.isClusterFeature(K)?(yield S.displayClusterExtent(this),yield S.browseAggregateFeatures(this)):Z.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",K)});return function(){return z.apply(this,arguments)}}();l._animationStateChange=function(z){this.zoomToLocation||
(J.zoomToFeature.disabled="waiting-for-target"===z)};l._clearBrowsedClusterGraphics=function(){var z;const x=null==(z=this.view)?void 0:z.graphics;x&&(x.remove(this.selectedClusterBoundaryFeature),x.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};l._viewScaleChange=function(){S.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=[this.selectedFeature])};
l._locationChange=function(z){const {selectedFeature:x,updateLocationEnabled:K}=this;K&&z&&(!x||x.geometry)&&this.centerAtLocation()};l._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};l._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};l._setGraphicOnFeatureViewModels=function(){const {features:z,featureCount:x,featurePage:K,featuresPerPage:U,featureViewModels:ba}=this;if(null!==
K){var ea=((K-1)*U+x)%x;ba.slice(ea,ea+U).forEach((na,ha)=>{na&&!na.graphic&&(na.graphic=z[ea+ha])})}};l._selectedFeatureChange=function(){var z=g._asyncToGenerator(function*(x){if(x){var {location:K,updateLocationEnabled:U,view:ba}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(ba.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),S.isClusterFeature(x)||(x.symbol=yield B.getDisplayedSymbol(x),this._selectedClusterFeature=x,ba.graphics.add(this._selectedClusterFeature))):
!U&&K||!x.geometry?U&&!x.geometry&&this.centerAtLocation().then(()=>{this.location=ba.center.clone()}):this.location=D.unwrap(this._getPointFromGeometry(x.geometry))}});return function(x){return z.apply(this,arguments)}}();l._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};l._setFetchFeaturesPromises=function(z){return this._fetchFeaturesWithController(this._getScreenPoint(z||this.location)).then(x=>{const {clientOnlyGraphics:K,promisesPerLayerView:U}=x;x=Promise.resolve(K);
const ba=U.map(ea=>ea.promise);this.promises=[x,...ba]})};l._destroyFeatureVMs=function(){this.featureViewModels.forEach(z=>z&&!z.destroyed&&z.destroy());this._set("featureViewModels",[])};l._updateFeatureVMs=function(){const {selectedFeature:z,features:x,featureViewModels:K}=this;S.isClusterFeature(z)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(x&&x.length){var U=K.slice(0),ba=[];x.forEach((ea,na)=>{if(ea){var ha=null;U.some((qa,M)=>{qa&&qa.graphic===ea&&(ha=qa,U.splice(M,1));return!!ha});
if(ha)ba[na]=ha;else{var la,pa;const qa=new C({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(la=this.view)?void 0:la.spatialReference,graphic:ea===z?ea:null,map:null==(pa=this.view)?void 0:pa.map,view:this.view});ba[na]=qa}}});U.forEach(ea=>ea&&!ea.destroyed&&ea.destroy());this._set("featureViewModels",ba)}};l._getScreenPoint=function(z){const {view:x}=this;return x&&z&&"function"===typeof x.toScreen?x.toScreen(z):null};
l._autoOpenEnabledChange=function(){const {_handles:z,autoOpenEnabled:x}=this;z.remove("auto-fetch-features");if(x&&this.view){const K=this.view.on("click",U=>{"mouse"===U.pointerType&&0!==U.button||this._fetchFeaturesAndOpen(U)},w.ViewEventPriorities.WIDGET);z.add(K,"auto-fetch-features")}};l._cancelFetchingFeatures=function(){const z=this._fetchFeaturesController;z&&z.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};l._fetchFeaturesWithController=function(z,x){this._cancelFetchingFeatures();
const K=new AbortController,{signal:U}=K;this._fetchFeaturesController=K;this.notifyChange("waitingForResult");z=this.fetchFeatures(z,{signal:U,event:x});z.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return z};l._fetchFeaturesAndOpen=function(z){const {screenPoint:x,mapPoint:K}=z,{view:U}=this;this._fetchFeaturesWithController(x,z).then(ba=>{const {clientOnlyGraphics:ea,promisesPerLayerView:na,location:ha}=ba,la=[Promise.resolve(ea),...na.map(pa=>
pa.promise)];U.popup.open({location:ha||K,promises:la});return ba})};l._updatePendingPromises=function(z){z&&this._pendingPromises.has(z)&&(this._pendingPromises.delete(z),this.notifyChange("pendingPromisesCount"))};l._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};l._getPointFromGeometry=function(z){return D.isNone(z)?null:"point"===z.type?z:"extent"===z.type?z.center:"polygon"===z.type?z.centroid:"multipoint"===z.type||"polyline"===z.type?z.extent.center:null};l._getLayerView=function(){var z=
g._asyncToGenerator(function*(x,K){yield x.when();return x.whenLayerView(K)});return function(x,K){return z.apply(this,arguments)}}();l._getHighlightLayer=function(z){const {layer:x,sourceLayer:K}=z;return"map-notes"===(null==K?void 0:K.type)||"subtype-group"===(null==K?void 0:K.type)?K:x};l._getHighlightTarget=function(z,x){x="imagery"===x.type?void 0:"objectIdField"in x&&x.objectIdField;const K=z.attributes;return K&&x&&K[x]||z};l._highlightActiveFeature=function(){var z=g._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");
const {highlightEnabled:x,view:K,activeFeature:U,visible:ba}=this;if(U&&K&&x&&ba){var ea=this._getHighlightLayer(U);if(ea&&ea instanceof A){var na=this._getLayerView(K,ea);this._highlightActiveFeaturePromise=na;var ha=yield na;ha&&u.highlightsSupported(ha)&&this._highlightActiveFeaturePromise===na&&this.activeFeature&&this.highlightEnabled&&(ea=ha.highlight(this._getHighlightTarget(U,ea)),this._handles.add(ea,"highlight-active-feature"))}}});return function(){return z.apply(this,arguments)}}();l._highlightSelectedFeature=
function(){var z=g._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:x,highlightEnabled:K,view:U,visible:ba}=this;if(x&&U&&K&&ba){var ea=this._getHighlightLayer(x);if(ea&&ea instanceof A){var na=this._getLayerView(U,ea);this._highlightSelectedFeaturePromise=na;var ha=yield na;ha&&u.highlightsSupported(ha)&&this._highlightSelectedFeaturePromise===na&&this.selectedFeature&&this.highlightEnabled&&this.visible&&(ea=ha.highlight(this._getHighlightTarget(x,
ea)),this._handles.add(ea,"highlight-selected-feature"))}}});return function(){return z.apply(this,arguments)}}();l._updateFeatures=function(z){const {features:x}=this;z&&z.length&&(x.length?(z=z.filter(K=>!x.includes(K)),this.features=x.concat(z)):this.features=z)};g._createClass(I,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(z=>z.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const z=
this._get("allActions")||new O;z.removeAll();const {actions:x,defaultActions:K,defaultPopupTemplateEnabled:U,includeDefaultActions:ba,selectedFeature:ea}=this;var na=ba?K.concat(x):x;const ha=ea&&("function"===typeof ea.getEffectivePopupTemplate&&ea.getEffectivePopupTemplate(U)||ea.popupTemplate),la=ha&&ha.actions;(na=ha&&ha.overwriteActions?la:la?la.concat(na):na)&&na.filter(Boolean).forEach(pa=>z.add(pa));return z}},{key:"defaultActions",get:function(){const z=this._get("defaultActions")||new O;
z.removeAll();z.addMany(S.isClusterFeature(this.selectedFeature)?[J.zoomToClusteredFeatures.clone(),J.browseClusteredFeatures.clone()]:[J.zoomToFeature.clone()]);return z}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(z){z=z||[];this._set("features",z);const {pendingPromisesCount:x,promiseCount:K,selectedFeatureIndex:U}=this,ba=K&&z.length;ba&&x&&-1===U?this.selectedFeatureIndex=0:ba&&-1!==U||(this.selectedFeatureIndex=
z.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(z){const x=this.get("view.spatialReference.isWebMercator");z&&z.get("spatialReference.isWGS84")&&x&&(z=q.geographicToWebMercator(z));this._set("location",z)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(z){this._pendingPromises.clear();this.features=[];Array.isArray(z)&&z.length?(this._set("promises",z),z=z.slice(0),z.forEach(x=>{this._pendingPromises.add(x);x.then(K=>{this._pendingPromises.has(x)&&this._updateFeatures(K);this._updatePendingPromises(x)},()=>this._updatePendingPromises(x))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:z,selectedFeatureIndex:x}=
this;return-1===x?null:z[x]||null}},{key:"selectedFeatureIndex",get:function(){const z=this._get("selectedFeatureIndex");return"number"===typeof z?z:-1},set:function(z){const {featureCount:x}=this;z=isNaN(z)||-1>z||!x?-1:(z+x)%x;this.activeFeature=null;this._set("selectedFeatureIndex",z)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return I}(P.GoToMixin(T));
n.__decorate([c.property()],m.prototype,"featurePage",void 0);n.__decorate([c.property()],m.prototype,"isLoadingFeature",null);n.__decorate([c.property({type:O})],m.prototype,"actions",void 0);n.__decorate([c.property({readOnly:!0})],m.prototype,"active",null);n.__decorate([c.property()],m.prototype,"activeFeature",void 0);n.__decorate([c.property({readOnly:!0})],m.prototype,"allActions",null);n.__decorate([c.property({type:Boolean})],m.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([c.property()],
m.prototype,"autoCloseEnabled",void 0);n.__decorate([c.property()],m.prototype,"autoOpenEnabled",void 0);n.__decorate([c.property()],m.prototype,"browseClusterEnabled",void 0);n.__decorate([c.property()],m.prototype,"content",void 0);n.__decorate([c.property({type:O,readOnly:!0})],m.prototype,"defaultActions",null);n.__decorate([c.property({readOnly:!0})],m.prototype,"featureCount",null);n.__decorate([c.property()],m.prototype,"features",null);n.__decorate([c.property()],m.prototype,"featuresPerPage",
void 0);n.__decorate([c.property()],m.prototype,"featureViewModelAbilities",void 0);n.__decorate([c.property({readOnly:!0})],m.prototype,"featureViewModels",void 0);n.__decorate([c.property()],m.prototype,"highlightEnabled",void 0);n.__decorate([c.property()],m.prototype,"includeDefaultActions",void 0);n.__decorate([c.property({type:X})],m.prototype,"location",null);n.__decorate([c.property({readOnly:!0})],m.prototype,"pendingPromisesCount",null);n.__decorate([c.property({readOnly:!0})],m.prototype,
"selectedClusterBoundaryFeature",void 0);n.__decorate([c.property({readOnly:!0})],m.prototype,"waitingForResult",null);n.__decorate([c.property({readOnly:!0})],m.prototype,"promiseCount",null);n.__decorate([c.property()],m.prototype,"promises",null);n.__decorate([c.property({value:null,readOnly:!0})],m.prototype,"selectedFeature",null);n.__decorate([c.property({value:-1})],m.prototype,"selectedFeatureIndex",null);n.__decorate([c.property({readOnly:!0})],m.prototype,"selectedFeatureViewModel",null);
n.__decorate([c.property({readOnly:!0})],m.prototype,"state",null);n.__decorate([c.property()],m.prototype,"title",void 0);n.__decorate([c.property()],m.prototype,"updateLocationEnabled",void 0);n.__decorate([c.property()],m.prototype,"view",void 0);n.__decorate([c.property()],m.prototype,"visible",void 0);n.__decorate([c.property()],m.prototype,"zoomFactor",void 0);n.__decorate([c.property()],m.prototype,"zoomToLocation",void 0);n.__decorate([c.property()],m.prototype,"centerAtLocation",null);return m=
n.__decorate([e.subclass("esri.widgets.Popup.PopupViewModel")],m)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(g,n,m,k,t,E,y,H,G,D){function p(f,r){if(r&&(f.style.filter=D.getCSSFilterFromEffectList(r),r=r.effects))for(const v of r)if("drop-shadow"===(null==v?void 0:v.type)){0>v.offsetX?f.style.marginLeft=
`${Math.abs(v.offsetX)}px`:f.style.marginRight=`${v.offsetX}px`;break}}function c(f,r){return a.apply(this,arguments)}function a(){a=m._asyncToGenerator(function*(f,r){switch(f.type){case "web-style":var {previewWebStyleSymbol:v}=yield new Promise((B,w)=>g(["./previewWebStyleSymbol"],B,w));return v(f,c,r);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:v}=yield new Promise((B,w)=>g(["./previewSymbol3D"],B,w)),v(f,r);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:v}=
yield new Promise((B,w)=>g(["./previewSymbol2D"],B,w)),v(f,r);case "cim":return{previewCIMSymbol:v}=yield new Promise((B,w)=>g(["./previewCIMSymbol"],B,w)),v(f,r)}});return a.apply(this,arguments)}function h(f){return f&&"opacity"in f?f.opacity*h(f.parent):1}function d(){d=m._asyncToGenerator(function*(f,r){var v,B;if(f){var w=f.sourceLayer;w=null!=(v=t.isSome(r)&&null!=(B=r.useSourceLayer)&&B?w:f.layer)?v:w;v=h(w);if(t.isSome(f.symbol)&&(!t.isSome(r)||!0!==r.ignoreGraphicSymbol))return f="web-style"===
f.symbol.type?yield f.symbol.fetchSymbol({...r,cache:t.isSome(r)?r.webStyleCache:null}):f.symbol.clone(),D.applyColorToSymbol(f,null,v),f;var u=t.isSome(r)&&r.renderer||w&&"renderer"in w&&w.renderer;if(B=u&&"getSymbolAsync"in u?yield u.getSymbolAsync(f,r):null){B="web-style"===B.type?yield B.fetchSymbol({...r,cache:t.isSome(r)?r.webStyleCache:null}):B.clone();if(!("visualVariables"in u&&u.visualVariables&&u.visualVariables.length))return D.applyColorToSymbol(B,null,v),B;"arcadeRequiredForVisualVariables"in
u&&u.arcadeRequiredForVisualVariables&&(t.isNone(r)||t.isNone(r.arcade))&&(r={...t.unwrap(r)},r.arcade=yield E.loadArcade());w=yield new Promise((X,Q)=>g(["../../renderers/visualVariables/support/visualVariableUtils"],X,Q));var C=[],J=[],S=[],T=[];for(var P of u.visualVariables)switch(P.type){case "color":C.push(P);break;case "opacity":J.push(P);break;case "rotation":T.push(P);break;case "size":P.target||S.push(P)}P=(P=!!C.length&&C[C.length-1])?w.getColor(P,f,r):null;J=(J=!!J.length&&J[J.length-
1])?w.getOpacity(J,f,r):null;null!=v&&(J=null!=J?J*v:v);D.applyColorToSymbol(B,P,J);S.length&&(v=w.getAllSizes(S,f,r),yield D.applySizesToSymbol(B,v));for(const X of T)D.applyRotationToSymbol(B,w.getRotationAngle(X,f,r),X.axis);return B}}});return d.apply(this,arguments)}function e(){e=m._asyncToGenerator(function*(f,r){var v;if(f){var B=h(f.layer||f.sourceLayer);if(t.isSome(f.symbol)&&(!t.isSome(r)||!0!==r.ignoreGraphicSymbol))return f="web-style"===f.symbol.type?yield f.symbol.fetchSymbol(r):f.symbol.clone(),
D.getColorFromSymbol(f,B);var w=t.isSome(r)&&r.renderer||f.get("layer.renderer")||f.get("sourceLayer.renderer"),u=yield w.getSymbolAsync(f,r);if(u){u="web-style"===u.type?yield u.fetchSymbol(r):u.clone();u=D.getColorFromSymbol(u,B);if(!("visualVariables"in w)||"visualVariables"in w&&!w.visualVariables||"visualVariables"in w&&(null==(v=w.visualVariables)||!v.length))return u;w.arcadeRequiredForVisualVariables&&(t.isNone(r)||t.isNone(r.arcade))&&(r={...t.unwrap(r)},r.arcade=yield E.loadArcade());v=
yield new Promise((S,T)=>g(["../../renderers/visualVariables/support/visualVariableUtils"],S,T));var C=[],J=[];for(const S of w.visualVariables)switch(S.type){case "color":C.push(S);break;case "opacity":J.push(S)}w=(w=0<C.length?C[C.length-1]:null)?v.getColor(w,f,r):u;f=(u=0<J.length?J[J.length-1]:null)?v.getOpacity(u,f,r):null;null!=B&&(f=null!=f?f*B:B);return w?D.applyOpacityToColor(w,f):null}}});return e.apply(this,arguments)}let q=null;const A=[255,255,255];n.getDisplayedColor=function(f,r){return e.apply(this,
arguments)};n.getDisplayedSymbol=function(f,r){return d.apply(this,arguments)};n.renderColorRampPreviewHTML=function(f,r={}){var v="horizontal"===r.align;const {width:B=v?75:24,height:w=v?24:75,gradient:u=!0}=r;var C=window.devicePixelRatio,J=B*C,S=w*C;C=document.createElement("canvas");C.width=J;C.height=S;C.style.width=`${B}px`;C.style.height=`${w}px`;const T=C.getContext("2d");var P=v?J:0,X=v?0:S;if(u){const Q=T.createLinearGradient(0,0,P,X);v=f.length;const O=1===v?0:1/(v-1);f.forEach((Z,L)=>
Q.addColorStop(L*O,Z.toString()));T.fillStyle=Q;T.fillRect(0,0,J,S)}else{J=v?J/f.length:J;S=v?S:S/f.length;X=P=0;for(const Q of f)T.fillStyle=Q.toString(),T.fillRect(P,X,J,S),P=v?P+J:0,X=v?0:X+S}f=document.createElement("div");f.style.width=`${B}px`;f.style.height=`${w}px`;p(f,null==r?void 0:r.effectList);f.appendChild(C);return f};n.renderDotDensityPreviewHTML=function(f,r,v){const {backgroundColor:B,outline:w,dotSize:u}=f;v=v&&v.swatchSize||H.SymbolSizeDefaults.size;const C=Math.round(v*v/u**2*
.8),J=window.devicePixelRatio;f=document.createElement("canvas");const S=v*J;f.width=S;f.height=S;f.style.width=`${f.width/J}px`;f.style.height=`${f.height/J}px`;const T=f.getContext("2d");B&&(T.fillStyle=B.toCss(!0),T.fillRect(0,0,S,S),T.fill());T.fillStyle=r.toCss(!0);if(q&&q.length/2===C)for(r=0;r<2*C;r+=2)T.fillRect(q[r],q[r+1],u*J,u*J),T.fill();else for(q=[],r=0;r<2*C;r+=2){const P=Math.floor(Math.random()*(S-0+1)),X=Math.floor(Math.random()*(S-0+1));q.push(P,X);T.fillRect(P,X,u*J,u*J);T.fill()}w&&
(w.color&&(T.strokeStyle=w.color.toCss(!0)),T.lineWidth=w.width,T.strokeRect(0,0,S,S));v=new Image(v,v);v.src=f.toDataURL();return v};n.renderPieChartPreviewHTML=function(f,r={}){const v=r.radius||40;var B=2*Math.PI*v,w=f.length;const u=B/w,C=[],J=y.getStroke(r.outline);J&&(J.width*=2);(J||r.backgroundColor)&&C.push({shape:{type:"circle",cx:v,cy:v,r:v},fill:r.backgroundColor,stroke:J,offset:[0,0]});const S=r.values,T=S&&S.length===w&&100===S.reduce((X,Q)=>X+Q,0),P=[0];for(let X=0;X<w;X++){const Q=
T?S[X]*B/100:null;T&&P.push(Q+P[X]);C.push({shape:{type:"circle",cx:v,cy:v,r:v/2},fill:[0,0,0,0],stroke:{width:v,dashArray:`${Q||u} ${B}`,dashoffset:`-${T?P[X]/2:u/2*X}`,color:f[X]},offset:[0,0]})}w=null;f=2*v+((null==J?void 0:J.width)||0);if(B=r.holePercentage)J&&C.push({shape:{type:"circle",cx:v,cy:v,r:v*B},fill:null,stroke:J,offset:[0,0]}),w=f/2,w=[[{shape:{type:"circle",cx:w,cy:w,r:w},fill:A,stroke:J?{...J,color:A}:null,offset:[0,0]},{shape:{type:"circle",cx:w,cy:w,r:v*B},fill:[0,0,0],stroke:null,
offset:[0,0]}]];return G.renderSymbol([C],[f,f],{effectView:r.effectList,ignoreStrokeWidth:!0,masking:w,rotation:-90})};n.renderPreviewHTML=c;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(g,n){function m(k,t){return Math.round(Math.min(Math.max(k+191.25*t,0),255))}g.SymbolSizeDefaults=void 0;(function(k){k[k.size=22]="size";k[k.lineWidth=50]="lineWidth";k[k.maxSize=
120]="maxSize";k[k.maxOutlineSize=80]="maxOutlineSize";k[k.tallSymbolWidth=20]="tallSymbolWidth"})(g.SymbolSizeDefaults||(g.SymbolSizeDefaults={}));g.adjustColorBrightness=function(k,t){if("type"in k&&("linear"===k.type||"pattern"===k.type))return k;k=new n(k);return new n([m(k.r,t),m(k.g,t),m(k.b,t),k.a])};g.adjustColorComponentBrightness=m;g.getConeShapes=function(k,t){let E=t?g.SymbolSizeDefaults.tallSymbolWidth:k;t=t?4:6;E=E<=g.SymbolSizeDefaults.size?E-.5*t:E-t;t=.15*E;const y=E;k-=t;return[{type:"ellipse",
cx:.5*E,cy:k,rx:.5*E,ry:t},{type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,k]},{command:"L",values:[0,k]},{command:"Z",values:[]}]}]};g.getCubeShapes=function(k,t){let E=t?g.SymbolSizeDefaults.tallSymbolWidth:k;var y=t?4:6;y=E=E<=g.SymbolSizeDefaults.size?E-.5*y:E-y;t=t?.35*E:.5*E;return[{type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,.5*t]},{command:"L",values:[.5*y,t]},{command:"L",values:[0,.5*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[0,.5*t]},{command:"L",values:[.5*y,t]},{command:"L",values:[.5*y,k]},{command:"L",values:[0,k-.5*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*y,t]},{command:"L",values:[.5*y,k]},{command:"L",values:[y,k-.5*t]},{command:"L",values:[y,.5*t]},{command:"Z",values:[]}]}]};g.getCylinderShapes=function(k,t){var E=t?g.SymbolSizeDefaults.tallSymbolWidth:k;t=t?4:6;E=E<=g.SymbolSizeDefaults.size?E-.5*t:E-t;t=.5*E;const y=.15*E;k-=y;return[{type:"ellipse",cx:.5*E,cy:k,rx:t,
ry:y},{type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[0,k]},{command:"L",values:[E,k]},{command:"L",values:[E,y]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*E,cy:y,rx:t,ry:y}]};g.getDiamondShapes=function(k){var t=k;t=t<g.SymbolSizeDefaults.size?t-2:t-4;const E=Math.floor(k/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[t,.5*k-E]},{command:"L",values:[.45*t-E,.5*k+E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*
t,0]},{command:"L",values:[.45*t-E,.5*k+E]},{command:"L",values:[0,.5*k-E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*k-E]},{command:"L",values:[.45*t-E,.5*k+E]},{command:"L",values:[.45*t,k]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,k]},{command:"L",values:[t,.5*k-E]},{command:"L",values:[.45*t-E,.5*k+E]},{command:"Z",values:[]}]}]};g.getExtrudeSymbolShapes=function(k){const t=g.SymbolSizeDefaults.size;k*=.5;return[{type:"path",path:[{command:"M",
values:[0,.35*t]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+k]},{command:"L",values:[0,.7*t+k-.35*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+k]},{command:"L",values:[t,k]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,0]},{command:"L",values:[t,0]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[0,.35*t]},{command:"Z",values:[]}]}]};g.getInvertedConeShapes=
function(k){let t=k;t=t<g.SymbolSizeDefaults.size?t-3:t-6;const E=.15*t,y=t;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,0]},{command:"L",values:[.5*y,k-E]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:E}]};g.getPathSymbolShapes=function(k,t,E){var y=g.SymbolSizeDefaults.size;let H=y,G=y;1>k?H*=.75:1<k&&(G*=1.25);k=y;t&&E&&(H=G=k=y=0);return[{type:"path",path:[{command:"M",values:[k,0]},{command:"L",values:[E?k:.875*k,0]},{command:"L",values:[E?
H-.5*k:0,G-.5*y]},{command:"L",values:[H-.5*k,G-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[k,0]},{command:"L",values:[k,t?0:.125*y]},{command:"L",values:[H-.5*k,t?G-.5*y:y]},{command:"L",values:[H-.5*k,G-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[H-.5*k,G-.5*y]},{command:"L",values:[E?H-.5*k:0,G-.5*y]},{command:"L",values:[E?H-.5*k:0,t?G-.5*y:y]},{command:"L",values:[H-.5*k,t?G-.5*y:y]},{command:"Z",values:[]}]}]};g.getTetrahedronShapes=
function(k){var t=k;t=t<g.SymbolSizeDefaults.size?t-1:t-2;return[{type:"path",path:[{command:"M",values:[.45*k,0]},{command:"L",values:[k,t]},{command:"L",values:[.45*k,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*k,0]},{command:"L",values:[.45*k,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*k,.6*t]},{command:"L",values:[k,t]},{command:"Z",values:[]}]}]};g.getWaterSymbolShapes=function(){return[{type:"path",
path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
g.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(g,n,m,k,t,E,y,H,G,D){function p(a,h,d){return a?m(a,{responseType:"image"}).then(e=>{e=e.data;const q=e.width,A=e.height,f=q/A;let r=h;d&&(r=Math.min(r,Math.max(q,A)));return{image:e,width:1>=f?Math.ceil(r*f):r,height:1>=f?r:Math.ceil(r/f)}}):Promise.reject(new t("renderUtils: imageDataSize","href not provided."))}const c=H.createProjector();g.renderSymbol=function(a,h,d){const e=Math.ceil(h[0]);h=Math.ceil(h[1]);if(!a.some(A=>!!A.length))return null;const q=d&&d.node||document.createElement("div");
null!=d.opacity&&(q.style.opacity=d.opacity.toString());null!=d.effectView&&(q.style.filter=D.getCSSFilterFromEffectList(d.effectView));c.append(q,G.renderSVG.bind(null,a,e,h,d));return q};g.tintImageWithColor=function(a,h,d,e,q){return p(a,h,q).then(A=>{const f=A.width?A.width:h,r=A.height?A.height:h;var v;if(v=A.image)v=d&&"ignore"!==e?"multiply"===e&&255===d.r&&255===d.g&&255===d.b&&1===d.a?!1:!0:!1;if(v){var B=A.image.width,w=A.image.height;E("edge")&&/\.svg$/i.test(a)&&(--B,--w);v=Math.ceil(f);
var u=Math.ceil(r);var C=document.createElement("canvas");C.width=v;C.height=u;C.style.width=v+"px";C.style.height=u+"px";C=C.getContext("2d");C.clearRect(0,0,v,u);v=C;v.drawImage(A.image,0,0,B,w,0,0,f,r);u=v.getImageData(0,0,f,r);C=[d.r/255,d.g/255,d.b/255,d.a];const S=k.toHSV(d);for(let T=0;T<u.data.length;T+=4){A=u.data;B=T;w=C;var J=S;switch(e){case "multiply":A[B+0]*=w[0];A[B+1]*=w[1];A[B+2]*=w[2];A[B+3]*=w[3];break;default:{const P=k.toHSV({r:A[B+0],g:A[B+1],b:A[B+2]});P.h=J.h;P.s=J.s;P.v=P.v/
100*J.v;J=k.toRGB(P);A[B+0]=J.r;A[B+1]=J.g;A[B+2]=J.b;A[B+3]*=w[3]}}}v.putImageData(u,0,0);a=v.canvas.toDataURL("image/png")}else(v=n.id&&n.id.findCredential(a))&&v.token&&(A=a.includes("?")?"\x26":"?",a=`${a}${A}token=${v.token}`);return{url:a,width:f,height:r}}).catch(()=>({url:a,width:h,height:h}))};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(g,n,m,k,t,E,y){function H(l,z){l*=L/180;return Math.abs(z*Math.sin(l))+Math.abs(z*Math.cos(l))}function G(l){return l.map(z=>`${z.command} ${z.values.join(" ")}`).join(" ").trim()}function D(l,z,x,K){if(l){if("circle"===l.type)return y.tsx("circle",{fill:z,"fill-rule":"evenodd",stroke:x.color,"stroke-width":x.width,"stroke-linecap":x.cap,"stroke-linejoin":x.join,"stroke-dasharray":x.dashArray,"stroke-dashoffset":x.dashOffset,"stroke-miterlimit":"4",cx:l.cx,cy:l.cy,r:l.r});if("ellipse"===
l.type)return y.tsx("ellipse",{fill:z,"fill-rule":"evenodd",stroke:x.color,"stroke-width":x.width,"stroke-linecap":x.cap,"stroke-linejoin":x.join,"stroke-dasharray":x.dashArray,"stroke-miterlimit":"4",cx:l.cx,cy:l.cy,rx:l.rx,ry:l.ry});if("rect"===l.type)return y.tsx("rect",{fill:z,"fill-rule":"evenodd",stroke:x.color,"stroke-width":x.width,"stroke-linecap":x.cap,"stroke-linejoin":x.join,"stroke-dasharray":x.dashArray,"stroke-miterlimit":"4",x:l.x,y:l.y,width:l.width,height:l.height});if("image"===
l.type)return y.tsx("image",{href:l.src,x:l.x,y:l.y,width:l.width,height:l.height,preserveAspectRatio:"none"});if("path"===l.type)return l="string"!==typeof l.path?G(l.path):l.path,y.tsx("path",{fill:z,"fill-rule":"evenodd",stroke:x.color,"stroke-width":x.width,"stroke-linecap":x.cap,"stroke-linejoin":x.join,"stroke-dasharray":x.dashArray,"stroke-miterlimit":"4",d:l});if("text"===l.type)return y.tsx("text",{"alignment-baseline":K.alignBaseline,fill:z,"fill-rule":"evenodd",stroke:x.color,"stroke-width":x.width,
"stroke-linecap":x.cap,"stroke-linejoin":x.join,"stroke-dasharray":x.dashArray,"stroke-miterlimit":"4","text-anchor":K.align,"text-decoration":K.decoration,kerning:K.kerning,rotate:K.rotate,"text-rendering":T,"font-style":K.font.style,"font-variant":K.font.variant,"font-weight":K.font.weight,"font-size":K.font.size,"font-family":K.font.family,x:l.x,y:l.y},l.text)}return null}function p(l){const z={fill:"none",pattern:null,linearGradient:null};if(l)if("type"in l&&"pattern"===l.type){var x=`patternId-${++J}`;
z.fill=`url(#${x})`;z.pattern={id:x,x:l.x,y:l.y,width:l.width,height:l.height,image:{x:0,y:0,width:l.width,height:l.height,href:l.src}}}else"type"in l&&"linear"===l.type?(x=`linearGradientId-${++S}`,z.fill=`url(#${x})`,z.linearGradient={id:x,x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,stops:l.colors.map(K=>({offset:K.offset,color:K.color&&(new n(K.color)).toString()}))}):l&&(l=new n(l),z.fill=l.toString());return z}function c(l){const z={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};
if(l&&(null!=l.width&&(z.width=l.width),l.cap&&(z.cap=l.cap),l.join&&(z.join=l.join.toString()),l.color&&(z.color=(new n(l.color)).toString()),l.dashArray&&(z.dashArray=l.dashArray),l.dashArray&&(z.dashOffset=l.dashoffset),l.style)){let K=null;l.style in Z&&(K=Z[l.style]);if(Array.isArray(K)){K=K.slice(0);for(var x=0;x<K.length;++x)K[x]*=l.width;if("butt"!==l.cap){for(x=0;x<K.length;x+=2)K[x]-=l.width,1>K[x]&&(K[x]=1);for(x=1;x<K.length;x+=2)K[x]+=l.width}K=K.join(",")}z.dashArray=K}return z}function a(l,
z){const x={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};l&&(x.align=l.align,x.alignBaseline=l.alignBaseline,x.decoration=l.decoration,x.kerning=l.kerning?"auto":"0",x.rotate=l.rotated?"90":"0",x.font.style=z.style||"normal",x.font.variant=z.variant||"normal",x.font.weight=z.weight||"normal",x.font.size=z.size&&z.size.toString()||"10pt",x.font.family=z.family||"serif");return x}function h(l){const {pattern:z,linearGradient:x}=
l;return z?y.tsx("pattern",{id:z.id,patternUnits:"userSpaceOnUse",x:z.x,y:z.y,width:z.width,height:z.height},y.tsx("image",{x:z.image.x,y:z.image.y,width:z.image.width,height:z.image.height,href:z.image.href})):x?(l=x.stops.map((K,U)=>y.tsx("stop",{key:`${U}-stop`,offset:K.offset,"stop-color":K.color})),y.tsx("linearGradient",{id:x.id,gradientUnits:"userSpaceOnUse",x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2},l)):null}function d(l,z){if(!l)return null;const x=[];for(const K of l){const {shape:U,fill:ba,stroke:ea,
font:na}=K;l=p(ba);const ha=c(ea),la="text"===U.type?a(U,na):null;x.push(D(U,l.fill,ha,la))}return y.tsx("mask",{id:z,maskUnits:"userSpaceOnUse"},y.tsx("g",null,x))}function e(l,z,x){return t.translate(l,t.identity(l),[z,x])}function q(l,z,x,K,U){t.scale(l,t.identity(l),[z,x]);l[4]=l[4]*z-K*z+K;l[5]=l[5]*x-U*x+U;return l}function A(l,z,x,K){var U=z%360*Math.PI/180;t.rotate(l,t.identity(l),U);z=Math.cos(U);U=Math.sin(U);const ba=l[4],ea=l[5];l[4]=ba*z-ea*U+K*U-x*z+x;l[5]=ea*z+ba*U-x*U-K*z+K;return l}
function f(l,z){Q&&"left"in Q?(Q.left>l&&(Q.left=l),Q.right<l&&(Q.right=l),Q.top>z&&(Q.top=z),Q.bottom<z&&(Q.bottom=z)):Q={left:l,bottom:z,right:l,top:z}}function r(l){const z=l.args,x=z.length;switch(l.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(l=0;l<x;l+=2)f(z[l],z[l+1]);O.x=z[x-2];O.y=z[x-1];break;case "H":for(l=0;l<x;++l)f(z[l],O.y);O.x=z[x-1];break;case "V":for(l=0;l<x;++l)f(O.x,z[l]);O.y=z[x-1];break;case "m":l=0;"x"in O||(f(O.x=z[0],O.y=z[1]),l=2);for(;l<x;l+=2)f(O.x+=
z[l],O.y+=z[l+1]);break;case "l":case "t":for(l=0;l<x;l+=2)f(O.x+=z[l],O.y+=z[l+1]);break;case "h":for(l=0;l<x;++l)f(O.x+=z[l],O.y);break;case "v":for(l=0;l<x;++l)f(O.x,O.y+=z[l]);break;case "c":for(l=0;l<x;l+=6)f(O.x+z[l],O.y+z[l+1]),f(O.x+z[l+2],O.y+z[l+3]),f(O.x+=z[l+4],O.y+=z[l+5]);break;case "s":case "q":for(l=0;l<x;l+=4)f(O.x+z[l],O.y+z[l+1]),f(O.x+=z[l+2],O.y+=z[l+3]);break;case "A":for(l=0;l<x;l+=7)f(z[l+5],z[l+6]);O.x=z[x-2];O.y=z[x-1];break;case "a":for(l=0;l<x;l+=7)f(O.x+=z[l+5],O.y+=z[l+
6])}}function v(l,z,x){const K=P[l.toLowerCase()];"number"===typeof K&&(K?z.length>=K&&(l={action:l,args:z.slice(0,z.length-z.length%K)},x.push(l),r(l)):(l={action:l,args:[]},x.push(l),r(l)))}function B(l){const z={x:0,y:0,width:0,height:0};if("circle"===l.type)z.x=l.cx-l.r,z.y=l.cy-l.r,z.width=2*l.r,z.height=2*l.r;else if("ellipse"===l.type)z.x=l.cx-l.rx,z.y=l.cy-l.ry,z.width=2*l.rx,z.height=2*l.ry;else if("image"===l.type||"rect"===l.type)z.x=l.x,z.y=l.y,z.width=l.width,z.height=l.height;else if("path"===
l.type){{const U=("string"!==typeof l.path?G(l.path):l.path).match(X),ba=[];Q={};O={};if(U){l="";var x=[],K=U.length;for(let ea=0;ea<K;++ea){const na=U[ea],ha=parseFloat(na);isNaN(ha)?(l&&v(l,x,ba),x=[],l=na):x.push(ha)}v(l,x,ba);l={x:0,y:0,width:0,height:0};Q&&"left"in Q&&(l.x=Q.left,l.y=Q.top,l.width=Q.right-Q.left,l.height=Q.bottom-Q.top)}else l=null}z.x=l.x;z.y=l.y;z.width=l.width;z.height=l.height}return z}function w(l){const z={x:0,y:0,width:0,height:0};let x=null,K=Number.NEGATIVE_INFINITY,
U=Number.NEGATIVE_INFINITY;for(const ba of l)x?(x.x=Math.min(x.x,ba.x),x.y=Math.min(x.y,ba.y),K=Math.max(K,ba.x+ba.width),U=Math.max(U,ba.y+ba.height)):(x=z,x.x=ba.x,x.y=ba.y,K=ba.x+ba.width,U=ba.y+ba.height);x&&(x.width=K-x.x,x.height=U-x.y);return x}function u(l,z,x,K,U,ba,ea,na,ha){var la=(ea&&ba?H(ba,z):z)/2,pa=(ea&&ba?H(ba,x):x)/2;ha&&(la=ha[0],pa=ha[1],la=(ea&&ba?H(ba,la):la)/2,pa=(ea&&ba?H(ba,pa):pa)/2);const qa=l.width+K,M=l.height+K;ea=k.create();ha=k.create();var V=!1;if(U&&0!==qa&&0!==
M){U=z!==x?z/x:qa/M;V=z>x?z:x;let ca=1,ia=1;isNaN(V)||(1<U?(ca=V/qa,ia=V/U/M):(ia=V/M,ca=V*U/qa));t.multiply(ha,ha,q(ea,ca,ia,la,pa));V=!0}U=l.x+(qa-K)/2;l=l.y+(M-K)/2;t.multiply(ha,ha,e(ea,la-U,pa-l));!V&&(qa>z||M>x)&&(K=qa/z>M/x,z=(K?z:x)/(K?qa:M),t.multiply(ha,ha,q(ea,z,z,U,l)));ba&&t.multiply(ha,ha,A(ea,ba,U,l));na&&t.multiply(ha,ha,e(ea,na[0],na[1]));return`matrix(${ha[0]},${ha[1]},${ha[2]},${ha[3]},${ha[4]},${ha[5]})`}function C(l,z,x){l=null==l?void 0:l.effects.find(na=>"bloom"===na.type);
if(!l)return null;const {strength:K,radius:U}=l;l=0<K?U:0;const ba=(K+l)*z,ea=4*K+1;return y.tsx("filter",{id:`bloom${x}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},y.tsx("feMorphology",{operator:"dilate",radius:(K+.5*l)*5**(z/100)*(.4+z/100),in:"SourceGraphic",result:"dilate"}),y.tsx("feGaussianBlur",{in:"dilate",stdDeviation:ba/25,result:"blur"}),y.tsx("feGaussianBlur",{in:"blur",stdDeviation:ba/50,result:"intensityBlur"}),y.tsx("feComponentTransfer",{in:"SourceGraphic",
result:"intensityBrightness"},y.tsx("feFuncR",{type:"linear",slope:ea}),y.tsx("feFuncG",{type:"linear",slope:ea}),y.tsx("feFuncB",{type:"linear",slope:ea})),y.tsx("feMerge",null,y.tsx("feMergeNode",{in:"intensityBlur"}),y.tsx("feMergeNode",{in:"intensityBrightness"}),y.tsx("feGaussianBlur",{stdDeviation:K/10})))}let J=0,S=0;E=m("android");const T=m("chrome")||E&&4<=E?"auto":"optimizeLegibility",P={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},X=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Q=
{},O={};const Z={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},L=Math.PI;let I=1;g.computeBBox=w;g.generateFillAttributes=p;g.generateStrokeAttributes=c;g.generateTextAttributes=a;g.getBoundingBox=B;g.getTransformMatrix=u;g.renderDef=h;g.renderSVG=function(l,z,x,K={}){const U=[],ba=[],ea=++I,na=C(K.effectView,z,ea);var ha=null;if(na){var la;ha=
null==(la=K.effectView)?void 0:la.effects.find(V=>"bloom"===V.type);ha=(ha.strength?ha.strength+ha.radius/2:0)/3;ha=[Math.max(z+z*ha,10),Math.max(x+x*ha,10)]}for(la=0;la<l.length;la++){var pa=l[la];const V=[];var qa=[],M=0;let ca=0,ia=0;for(const ka of pa){const {shape:ra,fill:va,stroke:Ba,font:Da,offset:Ga}=ka;K.ignoreStrokeWidth||(M+=Ba&&Ba.width||0);pa=p(va);const Fa=c(Ba),ya="text"===ra.type?a(ra,Da):null;U.push(h(pa));V.push(D(ra,pa.fill,Fa,ya));qa.push(B(ra));Ga&&(ca+=Ga[0],ia+=Ga[1])}qa=u(w(qa),
z,x,M,K.scale,K.rotation,K.useRotationSize,[ca,ia],ha);M=null;K.masking&&(M=`mask-${la}`,U.push(d(K.masking[la],M)),M=`url(#${M})`);ba.push(M?y.tsx("g",{mask:M},y.tsx("g",{transform:qa},V)):y.tsx("g",{transform:qa},V))}K.useRotationSize&&K.rotation&&(z=H(K.rotation,z),x=H(K.rotation,x));na&&(z=ha[0],x=ha[1]);return y.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:z,height:x,style:"display: block;"},na,y.tsx("defs",null,U),na?y.tsx("g",{filter:`url(#bloom${ea})`},ba):ba)};g.renderShape=D;Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(g){function n(){const G=new Float32Array(6);G[0]=1;G[3]=1;return G}function m(G){const D=new Float32Array(6);D[0]=G[0];D[1]=G[1];D[2]=G[2];D[3]=G[3];D[4]=G[4];D[5]=G[5];return D}function k(G,D,p,c,a,h){const d=new Float32Array(6);d[0]=G;d[1]=D;d[2]=p;d[3]=c;d[4]=a;d[5]=h;return d}function t(G,D){return new Float32Array(G,D,6)}function E(G,D,p,c){const a=D[c];D=D[c+1];G[c]=
p[0]*a+p[2]*D+p[4];G[c+1]=p[1]*a+p[3]*D+p[5]}function y(G,D,p,c=0,a=0,h=2){for(a=a||D.length/h;c<a;c++)E(G,D,p,c*h)}const H=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:m,fromValues:k,createView:t,transform:E,transformMany:y},Symbol.toStringTag,{value:"Module"}));g.clone=m;g.create=n;g.createView=t;g.fromValues=k;g.mat2df32=H;g.transform=E;g.transformMany=y})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(g,n){function m(u,C){u[0]=C[0];u[1]=C[1];u[2]=
C[2];u[3]=C[3];u[4]=C[4];u[5]=C[5];return u}function k(u){u[0]=1;u[1]=0;u[2]=0;u[3]=1;u[4]=0;u[5]=0;return u}function t(u,C,J,S,T,P,X){u[0]=C;u[1]=J;u[2]=S;u[3]=T;u[4]=P;u[5]=X;return u}function E(u,C){const J=C[0],S=C[1],T=C[2],P=C[3],X=C[4];C=C[5];let Q=J*P-S*T;if(!Q)return null;Q=1/Q;u[0]=P*Q;u[1]=-S*Q;u[2]=-T*Q;u[3]=J*Q;u[4]=(T*C-P*X)*Q;u[5]=(S*X-J*C)*Q;return u}function y(u){return u[0]*u[3]-u[1]*u[2]}function H(u,C,J){const S=C[0],T=C[1],P=C[2],X=C[3],Q=C[4];C=C[5];const O=J[0],Z=J[1],L=J[2],
I=J[3],l=J[4];J=J[5];u[0]=S*O+P*Z;u[1]=T*O+X*Z;u[2]=S*L+P*I;u[3]=T*L+X*I;u[4]=S*l+P*J+Q;u[5]=T*l+X*J+C;return u}function G(u,C,J){const S=C[0],T=C[1],P=C[2],X=C[3],Q=C[4];C=C[5];const O=Math.sin(J);J=Math.cos(J);u[0]=S*J+P*O;u[1]=T*J+X*O;u[2]=S*-O+P*J;u[3]=T*-O+X*J;u[4]=Q;u[5]=C;return u}function D(u,C,J){const S=C[1],T=C[2],P=C[3],X=C[4],Q=C[5],O=J[0];J=J[1];u[0]=C[0]*O;u[1]=S*O;u[2]=T*J;u[3]=P*J;u[4]=X;u[5]=Q;return u}function p(u,C,J){const S=C[0],T=C[1],P=C[2],X=C[3],Q=C[4];C=C[5];const O=J[0];
J=J[1];u[0]=S;u[1]=T;u[2]=P;u[3]=X;u[4]=S*O+P*J+Q;u[5]=T*O+X*J+C;return u}function c(u,C){const J=Math.sin(C);C=Math.cos(C);u[0]=C;u[1]=J;u[2]=-J;u[3]=C;u[4]=0;u[5]=0;return u}function a(u,C){u[0]=C[0];u[1]=0;u[2]=0;u[3]=C[1];u[4]=0;u[5]=0;return u}function h(u,C){u[0]=1;u[1]=0;u[2]=0;u[3]=1;u[4]=C[0];u[5]=C[1];return u}function d(u){return"mat2d("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+")"}function e(u){return Math.sqrt(u[0]**2+u[1]**2+u[2]**2+u[3]**2+u[4]**2+u[5]**2+1)}function q(u,
C,J){u[0]=C[0]+J[0];u[1]=C[1]+J[1];u[2]=C[2]+J[2];u[3]=C[3]+J[3];u[4]=C[4]+J[4];u[5]=C[5]+J[5];return u}function A(u,C,J){u[0]=C[0]-J[0];u[1]=C[1]-J[1];u[2]=C[2]-J[2];u[3]=C[3]-J[3];u[4]=C[4]-J[4];u[5]=C[5]-J[5];return u}function f(u,C,J){u[0]=C[0]*J;u[1]=C[1]*J;u[2]=C[2]*J;u[3]=C[3]*J;u[4]=C[4]*J;u[5]=C[5]*J;return u}function r(u,C,J,S){u[0]=C[0]+J[0]*S;u[1]=C[1]+J[1]*S;u[2]=C[2]+J[2]*S;u[3]=C[3]+J[3]*S;u[4]=C[4]+J[4]*S;u[5]=C[5]+J[5]*S;return u}function v(u,C){return u[0]===C[0]&&u[1]===C[1]&&u[2]===
C[2]&&u[3]===C[3]&&u[4]===C[4]&&u[5]===C[5]}function B(u,C){const J=u[0],S=u[1],T=u[2],P=u[3],X=u[4];u=u[5];const Q=C[0],O=C[1],Z=C[2],L=C[3],I=C[4];C=C[5];return Math.abs(J-Q)<=n.EPSILON*Math.max(1,Math.abs(J),Math.abs(Q))&&Math.abs(S-O)<=n.EPSILON*Math.max(1,Math.abs(S),Math.abs(O))&&Math.abs(T-Z)<=n.EPSILON*Math.max(1,Math.abs(T),Math.abs(Z))&&Math.abs(P-L)<=n.EPSILON*Math.max(1,Math.abs(P),Math.abs(L))&&Math.abs(X-I)<=n.EPSILON*Math.max(1,Math.abs(X),Math.abs(I))&&Math.abs(u-C)<=n.EPSILON*Math.max(1,
Math.abs(u),Math.abs(C))}const w=Object.freeze(Object.defineProperty({__proto__:null,copy:m,identity:k,set:t,invert:E,determinant:y,multiply:H,rotate:G,scale:D,translate:p,fromRotation:c,fromScaling:a,fromTranslation:h,str:d,frob:e,add:q,subtract:A,multiplyScalar:f,multiplyScalarAndAdd:r,exactEquals:v,equals:B,mul:H,sub:A},Symbol.toStringTag,{value:"Module"}));g.add=q;g.copy=m;g.determinant=y;g.equals=B;g.exactEquals=v;g.frob=e;g.fromRotation=c;g.fromScaling=a;g.fromTranslation=h;g.identity=k;g.invert=
E;g.mat2d=w;g.mul=H;g.multiply=H;g.multiplyScalar=f;g.multiplyScalarAndAdd=r;g.rotate=G;g.scale=D;g.set=t;g.str=d;g.sub=A;g.subtract=A;g.translate=p})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(g,n){g.extractSafeScaleBounds=function(m){var k,t;const E=m.effectiveScaleRange;m=null!=(k=null==E?void 0:E.minScale)?k:0;k=null!=(t=null==E?void 0:E.maxScale)?t:0;return{minScale:m,maxScale:k}};g.highlightsSupported=function(m){return m&&"function"===typeof m.highlight};
g.isScaleRangeActive=function(m,k){return 0<m||0<k};g.occludeesSupported=function(m){return m&&"function"===typeof m.maskOccludee};g.scaleBoundsPredicate=function(m,k,t){return n.isNone(m)||m>t&&(0===k||m<k)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(g,n){const m=new n({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),
k=new n({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),t=new n({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});n=new n({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});g.all=[m,k,n,t];g.browseClusteredFeatures=n;g.removeSelectedFeature=k;g.zoomToClusteredFeatures=t;g.zoomToFeature=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(g,n,m,k,t,E){function y(q){const {selectedFeature:A,location:f,view:r}=q;return r?"3d"===r.type?A||f:q.get("selectedFeature.geometry")||f:null}function H(q){var A,f;return(null==q?void 0:q.isAggregate)&&"cluster"===(null==q?void 0:null==(A=q.sourceLayer)?void 0:null==(f=A.featureReduction)?void 0:f.type)}function G(q,
A){if("3d"!==(null==A?void 0:A.type)||!q||"esri.Graphic"!==q.declaredClass)return!0;if((A=A.getViewForGraphic(q))&&"whenGraphicBounds"in A){let f=!1;A.whenGraphicBounds(q,{useViewElevation:!0}).then(r=>{f=!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}).catch(()=>{const r=new m("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:q});e.error(r)});return f}return!0}function D(q){return p.apply(this,
arguments)}function p(){p=n._asyncToGenerator(function*(q){const {location:A,selectedFeature:f,view:r,zoomFactor:v}=q,B=y(q);if(!B)throw q=new m("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:B,view:r}),e.error(q),q;const w=r.scale/v,u=q.get("selectedFeature.geometry")||A,C=u&&"point"===u.type&&G(f,r);E.zoomToFeature.active=!0;E.zoomToFeature.disabled=!0;try{yield q.view.goTo({target:B,scale:C?w:void 0})}finally{E.zoomToFeature.active=!1,E.zoomToFeature.disabled=
!1,q.zoomToLocation=null,C&&(q.location=u)}});return p.apply(this,arguments)}function c(q){return a.apply(this,arguments)}function a(){a=n._asyncToGenerator(function*(q){const {selectedFeature:A,view:f}=q;if("2d"!==(null==f?void 0:f.type))throw q=new m("zoomToCluster:invalid-view","View must be 2d MapView.",{view:f}),e.error(q),q;if(!H(A))throw q=new m("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:A}),e.error(q),q;q=yield f.whenLayerView(A.sourceLayer);
const r=q.createQuery();r.aggregateIds=[A.getObjectId()];E.zoomToClusteredFeatures.active=!0;E.zoomToClusteredFeatures.disabled=!0;({extent:q}=yield q.queryExtent(r));yield f.goTo({target:q});E.zoomToClusteredFeatures.active=!1;E.zoomToClusteredFeatures.disabled=!1});return a.apply(this,arguments)}function h(){h=n._asyncToGenerator(function*(q){const {selectedFeature:A,view:f}=q;var r=yield f.whenLayerView(A.sourceLayer);const v=r.createQuery();v.aggregateIds=[A.getObjectId()];({extent:r}=yield r.queryExtent(v));
q.selectedClusterBoundaryFeature.geometry=r;f.graphics.add(q.selectedClusterBoundaryFeature)});return h.apply(this,arguments)}function d(){d=n._asyncToGenerator(function*(q){const {selectedFeature:A,view:f}=q;q=yield f.whenLayerView(A.sourceLayer);const r=q.createQuery();r.aggregateIds=[A.getObjectId()];E.browseClusteredFeatures.active=!0;E.browseClusteredFeatures.disabled=!0;({features:q}=yield q.queryFeatures(r));E.browseClusteredFeatures.active=!1;E.browseClusteredFeatures.disabled=!1;f.popup.open({features:[A].concat(q),
featureMenuOpen:!0})});return d.apply(this,arguments)}const e=k.getLogger("esri.widgets.Popup.PopupViewModel");g.browseAggregateFeatures=function(q){return d.apply(this,arguments)};g.displayClusterExtent=function(q){return h.apply(this,arguments)};g.getSelectedTarget=y;g.isClusterFeature=H;g.isZoomScreenSize=G;g.removeClusteredFeaturesForBrowsing=function(q){const A=q.features.filter(f=>H(f));A.length&&(q.features=A)};g.triggerAction=q=>{const {event:A,view:f}=q;({action:q}=A);var r=f&&f.popup;if(!q)return Promise.reject(new m("trigger-action:missing-arguments",
"Event has no action"));if(!r)return Promise.reject(new m("trigger-action:missing-arguments","view.popup is missing"));const {disabled:v,id:B}=q;if(!B)return Promise.reject(new m("trigger-action:invalid-action","action.id is missing"));if(v)return Promise.reject(new m("trigger-action:invalid-action","Action is disabled"));if(B===E.zoomToFeature.id)return D(r.viewModel).catch(t.throwIfNotAbortError);if(B===E.zoomToClusteredFeatures.id)return c(r.viewModel);if(B===E.browseClusteredFeatures.id)return r.featureMenuOpen=
!r.featureMenuOpen,r.viewModel.browseClusterEnabled=!r.viewModel.browseClusterEnabled,Promise.resolve();r.viewModel.browseClusterEnabled=!1;if(B===E.removeSelectedFeature.id){r.close();({selectedFeature:q}=r);if(!q)return Promise.reject(new m(`trigger-action:${E.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:q}));({sourceLayer:r}=q);r?r.remove(q):f.graphics.remove(q)}return Promise.resolve()};g.zoomToClusterExtent=c;g.zoomToLocation=D;Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,n,m,k,t,E,y,H){g.GoToMixin=G=>{G=function(D){function p(...c){c=D.call(this,...c)||this;c.goToOverride=null;c.view=null;return c}n._inheritsLoose(p,D);
p.prototype.callGoTo=function(c){const {view:a}=this;return this.goToOverride?this.goToOverride(a,c):a.goTo(c.target,c.options)};return p}(G);m.__decorate([k.property()],G.prototype,"goToOverride",void 0);m.__decorate([k.property()],G.prototype,"view",void 0);return G=m.__decorate([H.subclass("esri.widgets.support.GoTo")],G)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/set ../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p){g.PopupView=c=>{c=function(a){function h(){return a.apply(this,arguments)||this}n._inheritsLoose(h,a);var d=h.prototype;d.fetchPopupFeatures=function(){var e=n._asyncToGenerator(function*(q,A){yield this.when();const {location:f,queryArea:r,layerViewsAndGraphics:v,clientOnlyGraphics:B}=yield this._prepareFetchPopupFeatures(q,A);q=Promise.resolve(B);A=this._queryLayerPopupFeatures(r,v,A);const w=A.map(u=>u.promise);q=t.eachAlwaysValues([q,...w]).then(u=>Array.from(new Set(u.flat())));
return{location:f,clientOnlyGraphics:B,allGraphicsPromise:q,promisesPerLayerView:A}});return function(q,A){return e.apply(this,arguments)}}();d._queryLayerPopupFeatures=function(e,q,A){return q.map(({layerView:f,graphics:r})=>{r={clientGraphics:r,event:k.isSome(A)?A.event:null,signal:k.isSome(A)?A.signal:null,defaultPopupTemplateEnabled:k.isSome(A)?!!A.defaultPopupTemplateEnabled:!1};r=f.fetchPopupFeatures(e,r);return{layerView:f,promise:r}})};d._isValidPopupGraphic=function(e,q){return e&&!!e.getEffectivePopupTemplate(k.isSome(q)&&
q.defaultPopupTemplateEnabled)};d._prepareFetchPopupFeatures=function(){var e=n._asyncToGenerator(function*(q,A){const {clientGraphics:f,queryArea:r,location:v}=yield this._popupHitTestGraphics(q,A);q=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:B,clientOnlyGraphics:w}=this._graphicsPerFetchPopupLayerView(f,q);return{clientOnlyGraphics:w,layerViewsAndGraphics:B,queryArea:r,location:v}});return function(q,A){return e.apply(this,arguments)}}();d._popupHitTestGraphics=function(){var e=
n._asyncToGenerator(function*(q,A){const {results:f,mapPoint:r}=yield this.popupHitTest(q);q=f.filter(B=>"graphic"===B.type&&this._isValidPopupGraphic(B.graphic,A));const v=q.length?q[0].mapPoint:null;return{clientGraphics:q.map(B=>B.graphic),queryArea:r,location:r||v}});return function(q,A){return e.apply(this,arguments)}}();d._getFetchPopupLayerViews=function(){const e=[];this.allLayerViews.forEach(q=>{this._isValidPopupLayerView(q)&&e.push(q)});k.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&
e.push(this.graphicsView);return e.reverse()};d._isValidPopupLayerView=function(e){return k.isSome(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e};d._graphicsPerFetchPopupLayerView=function(e,q){const A=[],f=new Map;q=q.map(r=>{const v=[];"layer"in r?f.set(r.layer,v):f.set(r.graphics,v);return{layerView:r,graphics:v}});for(const r of e)(e=f.get(r.layer)||f.get(r.sourceLayer)||null)?e.push(r):A.push(r);return{layerViewsAndGraphics:q,clientOnlyGraphics:A}};return h}(c);return c=m.__decorate([p.subclass("esri.views.PopupView")],
c)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){let e=function(){function q(A,f,r,v){const B=A.targetGeometry,w=f.targetGeometry;v?"string"===typeof v&&(v=a.parse(v)||a.easingFunctions.ease):v=a.easingFunctions.ease;this.easing=v;this.duration=r;this.sCenterX=B.x;this.sCenterY=B.y;this.sScale=A.scale;this.sRotation=A.rotation;this.tCenterX=w.x;this.tCenterY=w.y;this.tScale=f.scale;this.tRotation=f.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}q.prototype.applyRatio=function(A,f){var r=this.easing(f);let v,B;1<=f?(f=this.tCenterX,v=this.tCenterY,B=this.tRotation,r=this.tScale):(f=this.sCenterX+r*this.dCenterX,v=this.sCenterY+r*this.dCenterY,B=this.sRotation+r*this.dRotation,r=this.sScale+r*this.dScale);A.targetGeometry.x=f;A.targetGeometry.y=v;A.scale=r;A.rotation=B};return q}();m=function(q){function A(r){r=
q.call(this,r)||this;r.duration=200;r.transition=null;r.easing=a.easingFunctions.ease;r.view=null;r.viewpoint=null;r.viewpoint=new k({targetGeometry:new d,scale:0,rotation:0});r._updateTask=E.addFrameTask({postRender:r._postRender.bind(g._assertThisInitialized(r))});r._updateTask.pause();return r}g._inheritsLoose(A,q);var f=A.prototype;f.destroy=function(){this._updateTask.remove();this._updateTask=null};f.animate=function(r,v,B){this.stop();h.copy(this.viewpoint,v);this.transition=new e(this.viewpoint,
r.target,B&&B.duration||this.duration,B&&B.easing||this.easing);v=()=>{this.animation===r&&this._updateTask&&("finished"===r.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};r.when(v,v);this._startTime=performance.now();this._updateTask.resume();return this.animation=r};f.animateContinous=function(r,v){this.stop();this.updateFunction=v;this.viewpoint=r;const B=new c({target:r.clone()});
r=()=>{this.animation===B&&this._updateTask&&(this.updateFunction=this.animation=null)};B.when(r,r);this._startTime=performance.now();this._updateTask.resume();return this.animation=B};f.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};f._postRender=function(r){var v=this.animation;v&&v.state!==c.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,r.deltaTime):(r=(performance.now()-this._startTime)/this.transition.duration,v=1<=r,this.transition.applyRatio(this.viewpoint,
r),v&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return A}(t);n.__decorate([y.property()],m.prototype,"animation",void 0);n.__decorate([y.property()],m.prototype,"duration",void 0);n.__decorate([y.property()],m.prototype,"transition",void 0);n.__decorate([y.property()],m.prototype,"easing",void 0);n.__decorate([y.property()],m.prototype,"view",void 0);n.__decorate([y.property()],m.prototype,"viewpoint",void 0);return m=n.__decorate([p.subclass("esri.views.2d.AnimationManager")],
m)})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,
q){function A(M,V){return V.type?D.set(M,V.x,V.y):D.copy(M,V)}function f(M,V){return Math.max(M.width/Math.max(1,V[0]),M.height/Math.max(1,V[1]))*P(M.spatialReference)}function r(M,V,ca,ia){return v.apply(this,arguments)}function v(){v=n._asyncToGenerator(function*(M,V,ca,ia){if(!M||Array.isArray(M)&&!M.length)return null;k.isCollection(M)&&(M=M.toArray());if(Array.isArray(M)&&M.length&&"object"===typeof M[0]){var ka=M.every(Fa=>"attributes"in Fa);var ra=M.some(Fa=>!Fa.geometry),va=M;if(ka&&ra&&V&&
V.allLayerViews){ka=new Map;for(var Ba of M)M=Ba.layer,ra=ka.get(M)||[],va=Ba.attributes[M.objectIdField],null!=va&&ra.push(va),ka.set(M,ra);const Fa=[];ka.forEach((ya,nb)=>{const Xa=V.allLayerViews.find(eb=>eb.layer.id===nb.id);if("queryFeatures"in Xa){const eb=nb.createQuery();eb.objectIds=ya;eb.returnGeometry=!0;Fa.push(Xa.queryFeatures(eb))}});Ba=yield Promise.all(Fa);M=[];for(var Da of Ba)if(Da&&Da.features&&Da.features.length)for(var Ga of Da.features)t.isSome(Ga.geometry)&&M.push(Ga.geometry);
va=M}for(const Fa of va)ia=yield r(Fa,V,ca,ia);return ia}if(Array.isArray(M)&&2===M.length&&"number"===typeof M[0]&&"number"===typeof M[1])ka=new h(M);else if(M instanceof a)ka=M;else if("geometry"in M)if(M.geometry)ka=M.geometry;else if(M.layer){const Fa=M.layer;Da=V.allLayerViews.find(ya=>ya.layer.id===Fa.id);"queryFeatures"in Da&&(Ga=Fa.createQuery(),Ga.objectIds=[M.attributes[Fa.objectIdField]],Ga.returnGeometry=!0,Da=yield Da.queryFeatures(Ga),ka=t.get(Da,"features",0,"geometry"))}if(t.isNone(ka))return null;
Da="point"===ka.type?new c({xmin:ka.x,ymin:ka.y,xmax:ka.x,ymax:ka.y,spatialReference:ka.spatialReference}):ka.extent;if(!Da)return null;d.isLoaded()||d.canProjectWithoutEngine(Da.spatialReference,ca)||(yield d.load());ca=d.project(Da,ca);return ca?ia=ia?ia.union(ca):ca:null});return v.apply(this,arguments)}function B(M){if(M&&(!Array.isArray(M)||"number"!==typeof M[0])&&("object"===typeof M||Array.isArray(M)&&"object"===typeof M[0])){if("layer"in M&&M.layer&&M.layer.minScale&&M.layer.maxScale){var V=
M.layer;return{min:V.minScale,max:V.maxScale}}if(Array.isArray(M)&&M.length&&M.every(ca=>"layer"in ca)){let ca=V=0;for(const ia of M)(M=ia.layer)&&M.minScale&&M.maxScale&&(V=M.minScale<V?M.minScale:V,ca=M.maxScale>ca?M.maxScale:ca);return V&&ca?{min:V,max:ca}:null}}}function w(M,V){return q.equals(M.wkid?M:M.spatialReference||e.WGS84,V)?M:d.project(M,V)}function u(){u=n._asyncToGenerator(function*(M,V){if(!M||!V)return new m({targetGeometry:new h,scale:0,rotation:0});let ca=V.spatialReference;const {constraints:ia,
padding:ka,viewpoint:ra,size:va}=V,Ba=[ka?va[0]-ka.left-ka.right:va[0],ka?va[1]-ka.top-ka.bottom:va[1]];let Da=null;M instanceof m?Da=M:M.viewpoint?Da=M.viewpoint:M.target&&"esri.Viewpoint"===M.target.declaredClass&&(Da=M.target);let Ga=null;if(Da&&Da.targetGeometry)Ga=Da.targetGeometry;else if(M instanceof c)Ga=M;else if(M||M&&("center"in M||"extent"in M||"target"in M))Ga=(yield r(M.center,V,ca))||(yield r(M.extent,V,ca))||(yield r(M.target,V,ca))||(yield r(M,V,ca));!Ga&&ra&&ra.targetGeometry?Ga=
ra.targetGeometry:!Ga&&V.extent&&(Ga=V.extent);if(!ca){var Fa=V.spatialReference||V.extent||Ga;ca=Fa.wkid?Fa:Fa.spatialReference||e.WGS84}d.isLoaded()||q.equals(Ga.spatialReference,ca)||d.canProjectWithoutEngine(Ga,ca)||(yield d.load());Fa=w(Ga.center?Ga.center:Ga,ca);var ya=null;Da&&t.isSome(Da.targetGeometry)&&"point"===Da.targetGeometry.type?ya=Da.scale:"scale"in M&&M.scale?ya=M.scale:"zoom"in M&&-1!==M.zoom&&ia&&ia.effectiveLODs?ya=ia.zoomToScale(M.zoom):Array.isArray(Ga)||"point"===Ga.type||
"extent"===Ga.type&&0===Ga.width&&0===Ga.height?(ya=w(V.extent,ca),ya=t.isSome(ya)?f(ya,Ba):V.extent?f(V.extent,Ba):ra.scale):ya=f(w(Ga.extent,ca),Ba);if(V=B(M))V.min&&V.min>ya?ya=V.min:V.max&&V.max<ya&&(ya=V.max);V=0;Da?V=Da.rotation:M.hasOwnProperty("rotation")?V=M.rotation:ra&&(V=ra.rotation);M=new m({targetGeometry:Fa,scale:ya,rotation:V});ia&&(M=ia.fit(M),ia.constrainByGeometry(M),ia.rotationEnabled||(M.rotation=V));return M});return u.apply(this,arguments)}function C(M,V){const ca=M.targetGeometry,
ia=V.targetGeometry;ca.x=ia.x;ca.y=ia.y;ca.spatialReference=ia.spatialReference;M.scale=V.scale;M.rotation=V.rotation;return M}function J(M,V,ca){return ca?D.set(M,.5*(V[0]-ca.right+ca.left),.5*(V[1]-ca.bottom+ca.top)):D.scale(M,V,.5)}function S(M,V,ca,ia){l(M,V,ca,ia);return H.invert(M,M)}function T(M){var V=M.scale;M=M.targetGeometry;M=t.isSome(M)&&q.isValid(M.spatialReference)?1/(39.37*E.getMetersPerUnitForSR(M.spatialReference)*96):1;return V*M}function P(M){return q.isValid(M)?39.37*E.getMetersPerUnitForSR(M)*
96:1}function X(M){return(M=q.getInfo(M))?M.valid[1]-M.valid[0]:0}const Q=180/Math.PI,O=function(){const M=p.create();return function(V,ca,ia){const ka=ca.targetGeometry;A(M,ka);ca=.5*T(ca);V.xmin=M[0]-ca*ia[0];V.ymin=M[1]-ca*ia[1];V.xmax=M[0]+ca*ia[0];V.ymax=M[1]+ca*ia[1];V.spatialReference=ka.spatialReference;return V}}(),Z=function(){const M=p.create();return function(V,ca,ia){return D.sub(V,D.scale(V,ca,.5),J(M,ca,ia))}}(),L=function(){const M=G.create(),V=p.create();return function(ca,ia,ka,
ra){const va=T(ia);ia=y.toRadian(ia.rotation)||0;D.set(V,va,va);H.fromScaling(M,V);H.rotate(M,M,ia);H.translate(M,M,Z(V,ka,ra));H.translate(M,M,[0,ra.top-ra.bottom]);return D.set(ca,M[4],M[5])}}(),I=function(){const M=p.create(),V=p.create(),ca=p.create();return function(ia,ka,ra,va,Ba,Da){D.negate(M,ka);D.scale(V,ra,.5*Da);D.set(ca,1/va*Da,-1/va*Da);H.fromTranslation(ia,V);Ba&&H.rotate(ia,ia,Ba);H.scale(ia,ia,ca);H.translate(ia,ia,M);return ia}}(),l=function(){const M=p.create();return function(V,
ca,ia,ka){const ra=T(ca),va=y.toRadian(ca.rotation)||0;A(M,ca.targetGeometry);return I(V,M,ia,ra,va,ka)}}(),z=function(){const M=p.create();return function(V,ca,ia,ka){const ra=T(ca);A(M,ca.targetGeometry);return I(V,M,ia,ra,0,ka)}}(),x=function(){const M=p.create(),V=p.create(),ca=[0,0,0];return function(ia,ka,ra){D.subtract(M,ia,ka);D.normalize(M,M);D.subtract(V,ia,ra);D.normalize(V,V);D.cross(ca,M,V);ia=Math.acos(D.dot(M,V)/(D.length(M)*D.length(V)))*Q;0>ca[2]&&(ia=-ia);isNaN(ia)&&(ia=0);return ia}}(),
K=function(){const M=p.create();return function(V,ca,ia,ka){const ra=V.targetGeometry;C(V,ca);L(M,ca,ia,ka);ra.x+=M[0];ra.y+=M[1];return V}}(),U=function(){return function(M,V,ca){C(M,V);V=M.targetGeometry;V.x=ca.x;V.y=ca.y;V.spatialReference=ca.spatialReference;return M}}(),ba=function(){const M=p.create();return function(V,ca,ia,ka,ra){ra||(ra="center");D.sub(M,ia,ka);D.scale(M,M,.5);ia=M[0];ka=M[1];switch(ra){case "center":D.set(M,0,0);break;case "left":D.set(M,-ia,0);break;case "top":D.set(M,
0,ka);break;case "right":D.set(M,ia,0);break;case "bottom":D.set(M,0,-ka);break;case "top-left":D.set(M,-ia,ka);break;case "bottom-left":D.set(M,-ia,-ka);break;case "top-right":D.set(M,ia,ka);break;case "bottom-right":D.set(M,ia,-ka)}qa(V,ca,M);return V}}(),ea=function(){const M=p.create();return function(V,ca,ia,ka,ra){C(V,ca);isNaN(ia)||0===ia||(la(M,ka,ca,ra),V.scale=ca.scale*ia,pa(M,M,V,ra),qa(V,V,D.set(M,M[0]-ka[0],ka[1]-M[1])));return V}}(),na=function(){const M=p.create();return function(V,
ca,ia,ka,ra,va){C(V,ca);isNaN(ia)||0===ia||(la(M,ra,ca,va),V.scale=ca.scale*ia,V.rotation+=ka,pa(M,M,V,va),qa(V,V,D.set(M,M[0]-ra[0],ra[1]-M[1])));return V}}(),ha=function(){const M=p.create(),V=p.create();return function(ca,ia,ka,ra,va,Ba,Da){Z(V,Ba,Da);D.add(M,va,V);return ra?na(ca,ia,ka,ra,M,Ba):ea(ca,ia,ka,M,Ba)}}(),la=function(){const M=G.create();return function(V,ca,ia,ka){return D.transformMat2d(V,ca,S(M,ia,ka,1))}}(),pa=function(){const M=G.create();return function(V,ca,ia,ka){return D.transformMat2d(V,
ca,l(M,ia,ka,1))}}(),qa=function(){const M=p.create(),V=G.create();return function(ca,ia,ka){C(ca,ia);const ra=T(ia),va=ca.targetGeometry;H.fromRotation(V,y.toRadian(ia.rotation)||0);H.scale(V,V,p.fromValues(ra,ra));D.transformMat2d(M,ka,V);va.x+=M[0];va.y+=M[1];return ca}}();g.addPadding=K;g.angleBetween=x;g.centerAt=U;g.copy=C;g.create=function(M,V){return u.apply(this,arguments)};g.extentToScale=f;g.getAnchor=J;g.getExtent=O;g.getMatrix=I;g.getPaddingMapTranslation=L;g.getPaddingScreenTranslation=
Z;g.getResolution=T;g.getResolutionToScaleFactor=P;g.getTransform=l;g.getTransformNoRotation=z;g.getWorldScreenWidth=function(M,V){return Math.round(X(M)/V)};g.getWorldWidth=X;g.padAndScaleAndRotateBy=ha;g.resize=ba;g.rotateBy=function(M,V,ca){C(M,V);M.rotation+=ca;return M};g.rotateTo=function(M,V,ca){C(M,V);M.rotation=ca;return M};g.scaleAndRotateBy=na;g.scaleTo=function(M,V,ca){C(M,V);M.scale=ca;return M};g.setExtent=function(M,V,ca,ia,ka){U(M,V,ca.center);M.scale=f(ca,ia);ka&&ka.constraints&&
ka.constraints.constrain(M);return M};g.toMap=la;g.toScreen=pa;g.translateBy=qa;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df64":function(){define(["exports"],function(g){function n(){return[1,0,0,1,0,0]}function m(y){return[y[0],y[1],y[2],y[3],y[4],y[5]]}function k(y,H,G,D,p,c){return[y,H,G,D,p,c]}function t(y,H){return new Float64Array(y,H,6)}const E=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:m,fromValues:k,
createView:t},Symbol.toStringTag,{value:"Module"}));g.clone=m;g.create=n;g.createView=t;g.fromValues=k;g.mat2df64=E})},"esri/chunks/vec2":function(){define(["exports","./common"],function(g,n){function m(x,K){x[0]=K[0];x[1]=K[1];return x}function k(x,K,U){x[0]=K;x[1]=U;return x}function t(x,K,U){x[0]=K[0]+U[0];x[1]=K[1]+U[1];return x}function E(x,K,U){x[0]=K[0]-U[0];x[1]=K[1]-U[1];return x}function y(x,K,U){x[0]=K[0]*U[0];x[1]=K[1]*U[1];return x}function H(x,K,U){x[0]=K[0]/U[0];x[1]=K[1]/U[1];return x}
function G(x,K){x[0]=Math.ceil(K[0]);x[1]=Math.ceil(K[1]);return x}function D(x,K){x[0]=Math.floor(K[0]);x[1]=Math.floor(K[1]);return x}function p(x,K,U){x[0]=Math.min(K[0],U[0]);x[1]=Math.min(K[1],U[1]);return x}function c(x,K,U){x[0]=Math.max(K[0],U[0]);x[1]=Math.max(K[1],U[1]);return x}function a(x,K){x[0]=Math.round(K[0]);x[1]=Math.round(K[1]);return x}function h(x,K,U){x[0]=K[0]*U;x[1]=K[1]*U;return x}function d(x,K,U,ba){x[0]=K[0]+U[0]*ba;x[1]=K[1]+U[1]*ba;return x}function e(x,K){const U=K[0]-
x[0];x=K[1]-x[1];return Math.sqrt(U*U+x*x)}function q(x,K){const U=K[0]-x[0];x=K[1]-x[1];return U*U+x*x}function A(x){const K=x[0];x=x[1];return Math.sqrt(K*K+x*x)}function f(x){const K=x[0];x=x[1];return K*K+x*x}function r(x,K){x[0]=-K[0];x[1]=-K[1];return x}function v(x,K){x[0]=1/K[0];x[1]=1/K[1];return x}function B(x,K){var U=K[0];const ba=K[1];U=U*U+ba*ba;0<U&&(U=1/Math.sqrt(U),x[0]=K[0]*U,x[1]=K[1]*U);return x}function w(x,K){return x[0]*K[0]+x[1]*K[1]}function u(x,K,U){K=K[0]*U[1]-K[1]*U[0];
x[0]=x[1]=0;x[2]=K;return x}function C(x,K,U,ba){const ea=K[0];K=K[1];x[0]=ea+ba*(U[0]-ea);x[1]=K+ba*(U[1]-K);return x}function J(x,K){K=K||1;const U=2*n.RANDOM()*Math.PI;x[0]=Math.cos(U)*K;x[1]=Math.sin(U)*K;return x}function S(x,K,U){const ba=K[0];K=K[1];x[0]=U[0]*ba+U[2]*K;x[1]=U[1]*ba+U[3]*K;return x}function T(x,K,U){const ba=K[0];K=K[1];x[0]=U[0]*ba+U[2]*K+U[4];x[1]=U[1]*ba+U[3]*K+U[5];return x}function P(x,K,U){const ba=K[0];K=K[1];x[0]=U[0]*ba+U[3]*K+U[6];x[1]=U[1]*ba+U[4]*K+U[7];return x}
function X(x,K,U){const ba=K[0];K=K[1];x[0]=U[0]*ba+U[4]*K+U[12];x[1]=U[1]*ba+U[5]*K+U[13];return x}function Q(x,K,U,ba){const ea=K[0]-U[0];K=K[1]-U[1];const na=Math.sin(ba);ba=Math.cos(ba);x[0]=ea*ba-K*na+U[0];x[1]=ea*na+K*ba+U[1];return x}function O(x,K){var U=x[0];x=x[1];const ba=K[0];K=K[1];let ea=U*U+x*x;0<ea&&(ea=1/Math.sqrt(ea));let na=ba*ba+K*K;0<na&&(na=1/Math.sqrt(na));U=(U*ba+x*K)*ea*na;return 1<U?0:-1>U?Math.PI:Math.acos(U)}function Z(x){return"vec2("+x[0]+", "+x[1]+")"}function L(x,K){return x[0]===
K[0]&&x[1]===K[1]}function I(x,K){const U=x[0];x=x[1];const ba=K[0];K=K[1];return Math.abs(U-ba)<=n.EPSILON*Math.max(1,Math.abs(U),Math.abs(ba))&&Math.abs(x-K)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(K))}function l(x,K,U,ba,ea){let na=K[0]-U[0];U=K[1]-U[1];ea=(ba[0]*na+ba[1]*U)*(ea-1);na=ba[0]*ea;U=ba[1]*ea;x[0]=K[0]+na;x[1]=K[1]+U;return x}const z=Object.freeze(Object.defineProperty({__proto__:null,copy:m,set:k,add:t,subtract:E,multiply:y,divide:H,ceil:G,floor:D,min:p,max:c,round:a,scale:h,scaleAndAdd:d,
distance:e,squaredDistance:q,length:A,squaredLength:f,negate:r,inverse:v,normalize:B,dot:w,cross:u,lerp:C,random:J,transformMat2:S,transformMat2d:T,transformMat3:P,transformMat4:X,rotate:Q,angle:O,str:Z,exactEquals:L,equals:I,projectAndScale:l,len:A,sub:E,mul:y,div:H,dist:e,sqrDist:q,sqrLen:f},Symbol.toStringTag,{value:"Module"}));g.add=t;g.angle=O;g.ceil=G;g.copy=m;g.cross=u;g.dist=e;g.distance=e;g.div=H;g.divide=H;g.dot=w;g.equals=I;g.exactEquals=L;g.floor=D;g.inverse=v;g.len=A;g.length=A;g.lerp=
C;g.max=c;g.min=p;g.mul=y;g.multiply=y;g.negate=r;g.normalize=B;g.projectAndScale=l;g.random=J;g.rotate=Q;g.round=a;g.scale=h;g.scaleAndAdd=d;g.set=k;g.sqrDist=q;g.sqrLen=f;g.squaredDistance=q;g.squaredLength=f;g.str=Z;g.sub=E;g.subtract=E;g.transformMat2=S;g.transformMat2d=T;g.transformMat3=P;g.transformMat4=X;g.vec2=z})},"esri/chunks/vec2f64":function(){define(["exports"],function(g){function n(){return[0,0]}function m(e){return[e[0],e[1]]}function k(e,q){return[e,q]}function t(e){const q=[0,0],
A=Math.min(2,e.length);for(let f=0;f<A;++f)q[f]=e[f];return q}function E(e,q){return new Float64Array(e,q,2)}function y(){return[0,0]}function H(){return[1,1]}function G(){return[1,0]}function D(){return[0,1]}const p=[0,0],c=[1,1],a=[1,0],h=[0,1],d=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:m,fromValues:k,fromArray:t,createView:E,zeros:y,ones:H,unitX:G,unitY:D,ZEROS:p,ONES:c,UNIT_X:a,UNIT_Y:h},Symbol.toStringTag,{value:"Module"}));g.ONES=c;g.UNIT_X=a;g.UNIT_Y=h;g.ZEROS=p;g.clone=
m;g.create=n;g.createView=E;g.fromArray=t;g.fromValues=k;g.ones=H;g.unitX=G;g.unitY=D;g.vec2f64=d;g.zeros=y})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/reactiveUtils","../../core/scheduling"],function(g,n,m){return function(){function k(E){this.view=E;this._frameTaskHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;
this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;const {basemapView:y,graphicsView:H,labelManager:G,layerViews:D,state:{id:p}}=this.view;y.baseLayerViews.forEach(this._updateLayerView,this);D.forEach(this._updateLayerView,this);y.referenceLayerViews.forEach(this._updateLayerView,this);g.isSome(G)&&(G.lastUpdateId!==p&&(G.viewChange(),G.lastUpdateId=p),G.updateRequested&&G.processUpdate(this._updateParameters));
g.isSome(H)&&(H.lastUpdateId!==p&&(H.viewChange(),H.lastUpdateId=p),H.updateRequested&&H.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}var t=k.prototype;t.destroy=function(){this.stop()};t.start=function(){if(!this._frameTaskHandle){var E=this.view;this.stationary=E.stationary;this._updateParameters={state:E.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,
renderingOptions:E.renderingOptions};this._stationaryHandle=n.watch(()=>E.stationary,y=>{this.stationary=y;this.requestFrame()});this._frameTaskHandle=m.addFrameTask(this);this.requestUpdate()}};t.stop=function(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};t.requestUpdate=function(){this._updateRequested||(this._updateRequested=
!0,this.requestFrame())};t.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};t._updateLayerView=function(E){const y=this.view.state,H=E.lastUpdateId;if(null==H||!this.stationary&&!E.moving)E.moving=!0,E.moveStart();H!==y.id&&E.viewChange();this.stationary&&E.moving&&(E.moving=!1,E.moveEnd());E.lastUpdateId=y.id;E.updateRequested&&E.processUpdate(this._updateParameters);"layerViews"in E&&E.layerViews.forEach(this._updateLayerView,this)};return k}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require",
"exports","../../core/Error","../../core/maybe"],function(g,n,m,k){function t(){return Promise.all([new Promise((D,p)=>g(["./webglDeps"],D,p)),new Promise((D,p)=>g(["./mapViewDeps"],D,p))])}const E=D=>Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"})),y=()=>t().then(()=>new Promise((D,p)=>g(["./layers/TileLayerView2D"],c=>D(E(c)),p))),H=()=>t().then(()=>new Promise((D,p)=>g(["./layers/FeatureLayerView2D"],c=>D(E(c)),p))),G={"base-dynamic":()=>t().then(()=>
new Promise((D,p)=>g(["./layers/BaseDynamicLayerView2D"],c=>D(E(c)),p))),"base-tile":y,"bing-maps":y,csv:H,"geo-rss":()=>t().then(()=>new Promise((D,p)=>g(["./layers/GeoRSSLayerView2D"],c=>D(E(c)),p))),feature:H,geojson:H,graphics:()=>t().then(()=>new Promise((D,p)=>g(["./layers/GraphicsLayerView2D"],c=>D(E(c)),p))),group:()=>t().then(()=>new Promise((D,p)=>g(["./layers/GroupLayerView2D"],c=>D(E(c)),p))),imagery:()=>t().then(()=>new Promise((D,p)=>g(["./layers/ImageryLayerView2D"],c=>D(E(c)),p))),
"imagery-tile":()=>t().then(()=>new Promise((D,p)=>g(["./layers/ImageryTileLayerView2D"],c=>D(E(c)),p))),kml:()=>t().then(()=>new Promise((D,p)=>g(["./layers/KMLLayerView2D"],c=>D(E(c)),p))),"map-image":()=>t().then(()=>new Promise((D,p)=>g(["./layers/MapImageLayerView2D"],c=>D(E(c)),p))),"map-notes":()=>t().then(()=>new Promise((D,p)=>g(["./layers/MapNotesLayerView2D"],c=>D(E(c)),p))),media:()=>t().then(()=>new Promise((D,p)=>g(["./layers/MediaLayerView2D"],c=>D(E(c)),p))),"ogc-feature":()=>t().then(()=>
new Promise((D,p)=>g(["./layers/OGCFeatureLayerView2D"],c=>D(E(c)),p))),"open-street-map":y,route:()=>t().then(()=>new Promise((D,p)=>g(["./layers/RouteLayerView2D"],c=>D(E(c)),p))),stream:()=>t().then(()=>new Promise((D,p)=>g(["./layers/StreamLayerView2D"],c=>D(E(c)),p))),"subtype-group":()=>t().then(()=>new Promise((D,p)=>g(["./layers/SubtypeGroupLayerView2D"],c=>D(E(c)),p))),tile:y,"vector-tile":()=>t().then(()=>new Promise((D,p)=>g(["./layers/VectorTileLayerView2D"],c=>D(E(c)),p))),wcs:()=>t().then(()=>
new Promise((D,p)=>g(["./layers/ImageryTileLayerView2D"],c=>D(E(c)),p))),"web-tile":y,wfs:H,wms:()=>t().then(()=>new Promise((D,p)=>g(["./layers/WMSLayerView2D"],c=>D(E(c)),p))),wmts:()=>t().then(()=>new Promise((D,p)=>g(["./layers/WMTSLayerView2D"],c=>D(E(c)),p))),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};n.layerView2DImporter={hasLayerViewModule:D=>k.isSome(G[D.type]),
importLayerView:D=>{var p=G[D.type];if(k.isNone(p))throw D=D.declaredClass?D.declaredClass.slice(D.declaredClass.lastIndexOf(".")+1):"Unknown",p=D.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),D=new m(`${p}:view-not-supported`,`${D} is not supported in 2D`),D;return p(D)}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){m={base:null,key:"type",typeMap:{extent:h,polygon:d}};k=function(e){function q(f){f=e.call(this,f)||this;f.lods=null;f.minScale=0;f.maxScale=0;f.minZoom=-1;f.maxZoom=-1;f.rotationEnabled=!0;f.snapToZoom=!0;return f}g._inheritsLoose(q,e);var A=q.prototype;A.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null);this._set("_geometry",null)};A.canZoomInTo=function(f){const r=this.effectiveMaxScale;return 0===r||f>=r};A.canZoomOutTo=
function(f){const r=this.effectiveMinScale;return 0===r||f<=r};A.constrain=function(f,r){this._zoom.constrain(f,r);this._rotation.constrain(f,r);this._geometry.constrain(f,r);return f};A.constrainByGeometry=function(f){return this._geometry.constrain(f)};A.fit=function(f){return this._zoom.fit(f)};A.zoomToScale=function(f){return this._zoom.zoomToScale(f)};A.scaleToZoom=function(f){return this._zoom.scaleToZoom(f)};A.snapScale=function(f){return this._zoom.snapToClosestScale(f)};A.snapToNextScale=
function(f){return this._zoom.snapToNextScale(f)};A.snapToPreviousScale=function(f){return this._zoom.snapToPreviousScale(f)};g._createClass(q,[{key:"geometry",set:function(f){f?this._set("geometry",f):this._set("geometry",null)}},{key:"version",get:function(){var f;this.commitProperty("_zoom");this.commitProperty("_rotation");this.commitProperty("_geometry");return(null!=(f=this._get("version"))?f:0)+1}},{key:"_defaultLODs",get:function(){var f,r,v;const B=null==(f=this.view)?void 0:null==(r=f.defaultsFromMap)?
void 0:r.tileInfo;f=null==(v=this.view)?void 0:v.spatialReference;return B&&f&&B.spatialReference.equals(f)?B.lods:null}},{key:"_geometry",get:function(){var f;return new p.GeometryConstraint({geometry:this.geometry,spatialReference:null==(f=this.view)?void 0:f.spatialReference})}},{key:"_rotation",get:function(){return new c({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const f=this._get("_zoom"),r=this.lods||this._defaultLODs,v=this.minZoom,B=this.maxZoom,w=this.minScale,
u=this.maxScale,C=this.snapToZoom;return f&&f.lods===r&&f.minZoom===v&&f.maxZoom===B&&f.minScale===w&&f.maxScale===u&&f.snapToZoom===C?f:new a({lods:r,minZoom:v,maxZoom:B,minScale:w,maxScale:u,snapToZoom:C})}}]);return q}(k);n.__decorate([t.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],k.prototype,"effectiveLODs",void 0);n.__decorate([t.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],k.prototype,"effectiveMinScale",void 0);n.__decorate([t.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],
k.prototype,"effectiveMaxScale",void 0);n.__decorate([t.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],k.prototype,"effectiveMinZoom",void 0);n.__decorate([t.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],k.prototype,"effectiveMaxZoom",void 0);n.__decorate([t.property({types:m,value:null})],k.prototype,"geometry",null);n.__decorate([t.property({type:[D]})],k.prototype,"lods",void 0);n.__decorate([t.property()],k.prototype,"minScale",void 0);n.__decorate([t.property()],k.prototype,
"maxScale",void 0);n.__decorate([t.property()],k.prototype,"minZoom",void 0);n.__decorate([t.property()],k.prototype,"maxZoom",void 0);n.__decorate([t.property()],k.prototype,"rotationEnabled",void 0);n.__decorate([t.property()],k.prototype,"snapToZoom",void 0);n.__decorate([t.property()],k.prototype,"view",void 0);n.__decorate([t.property({readOnly:!0})],k.prototype,"version",null);n.__decorate([t.property()],k.prototype,"_defaultLODs",null);n.__decorate([t.property({type:p.GeometryConstraint})],
k.prototype,"_geometry",null);n.__decorate([t.property({type:c})],k.prototype,"_rotation",null);n.__decorate([t.property({readOnly:!0,type:a})],k.prototype,"_zoom",null);return k=n.__decorate([G.subclass("esri.views.2d.MapViewConstraints")],k)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h){var d;const e=t.getLogger("esri.views.MapView");g.GeometryConstraint=d=function(q){function A(r){r=q.call(this,r)||this;r.geometry=null;r.spatialReference=null;return r}n._inheritsLoose(A,q);var f=A.prototype;f.constrain=function(r,v){if(E.isNone(this.normalizedGeometry))return r;v=r.targetGeometry;if("extent"===this.normalizedGeometry.type?a.extentContainsPoint(this.normalizedGeometry,v):a.polygonContainsPoint(this.normalizedGeometry,v))return r;({coordinate:v}=
h.nearestCoordinate(this.normalizedGeometry,v));if(!v)return r;r.targetGeometry=v;return r};f.clone=function(){var r,v;return new d({geometry:null==(r=this.geometry)?void 0:r.clone(),spatialReference:null==(v=this.spatialReference)?void 0:v.clone()})};n._createClass(A,[{key:"normalizedGeometry",get:function(){if(E.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return c.project(this.geometry,this.spatialReference)}catch(r){return e.error("#constraints.geometry",
"could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:r}),null}return this.geometry}}]);return A}(k);m.__decorate([y.property({constructOnly:!0})],g.GeometryConstraint.prototype,"geometry",void 0);m.__decorate([y.property({readOnly:!0})],g.GeometryConstraint.prototype,"normalizedGeometry",null);m.__decorate([y.property({constructOnly:!0})],g.GeometryConstraint.prototype,"spatialReference",void 0);g.GeometryConstraint=
d=m.__decorate([p.subclass("esri.views.2d.constraints.GeometryConstraint")],g.GeometryConstraint);Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(g,n,m,k,t){g.nearestCoordinate=function(E,y){const {spatialReference:H}=y;y=[y.x,y.y];let G=Number.POSITIVE_INFINITY,D=0,p=0;const c=[0,0];E="extent"===E.type?[[[E.xmin,E.ymin],[E.xmin,
E.ymax],[E.xmax,E.ymax],[E.xmax,E.ymin],[E.xmin,E.ymin]]]:E.rings;for(const a of E)for(E=0;E<a.length-1;E++){k.projectPointOnLine(c,y,a,E);const h=m.distance(y,c);h<G&&(G=h,D=c[0],p=c[1])}return{coordinate:new t({x:D,y:p,spatialReference:H}),distance:G}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H){var G;m=G=function(D){function p(){var a=D.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}g._inheritsLoose(p,D);var c=p.prototype;c.constrain=function(a,h){if(!this.enabled||!h)return a;this.rotationEnabled||(a.rotation=h.rotation);return a};c.clone=function(){return new G({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return p}(m);n.__decorate([k.property()],m.prototype,"enabled",void 0);n.__decorate([k.property()],m.prototype,"rotationEnabled",
void 0);return m=G=n.__decorate([H.subclass("esri.views.2d.constraints.RotationConstraint")],m)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(g,n,m,k,t,E,y,H){var G;m=G=function(D){function p(a){a=
D.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}g._inheritsLoose(p,D);var c=p.prototype;c.initialize=function(){let {lods:a,minScale:h,maxScale:d,minZoom:e,maxZoom:q}=this,A=-1,f=-1,r=!1,v=!1;0!==h&&0!==d&&h<d&&([h,d]=[d,h]);if(a&&a.length){a=a.map(w=>w.clone());a.sort((w,u)=>u.scale-w.scale);a.forEach((w,
u)=>w.level=u);for(const w of a){!r&&0<h&&h>=w.scale&&(A=w.level,r=!0);!v&&0<d&&d>=w.scale&&(f=B?B.level:-1,v=!0);var B=w}-1===e&&(e=0===h?0:A);-1===q&&(q=0===d?a.length-1:f);e=Math.max(e,0);e=Math.min(e,a.length-1);q=Math.max(q,0);q=Math.min(q,a.length-1);e>q&&([e,q]=[q,e]);h=a[e].scale;d=a[q].scale;a.splice(0,e);a.splice(q-e+1,a.length);a.forEach((w,u)=>{this._lodByScale[w.scale]=w;this._scales[u]=w.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",
q)}this._set("effectiveMinScale",h);this._set("effectiveMaxScale",d)};c.constrain=function(a,h){if(h&&a.scale===h.scale)return a;var d=this.effectiveMinScale;const e=this.effectiveMaxScale,q=a.targetGeometry,A=h&&h.targetGeometry,f=0!==d&&a.scale>d;if(0!==e&&a.scale<e||f)d=f?d:e,A&&(h=(d-h.scale)/(a.scale-h.scale),q.x=A.x+(q.x-A.x)*h,q.y=A.y+(q.y-A.y)*h),a.scale=d;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};c.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,
null);const h=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(h-Math.floor(h))?Math.round(h):Math.floor(h));return a};c.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);const h=this._scales;if(0>=a)return h[0];if(a>=h.length)return h[h.length-1];const d=Math.round(a);return h[d]+(d-a)*(h[Math.round(a-.5)]-h[d])};c.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;const h=this._scales;let d,e;if(a>=h[0])return this.effectiveMinZoom;
if(a<=h[h.length-1])return this.effectiveMaxZoom;for(let q=0;q<h.length-1;q++){d=h[q];e=h[q+1];if(e===a)return q+this.effectiveMinZoom+1;if(d>a&&e<a)return q+this.effectiveMinZoom+1-(a-e)/(d-e)}};c.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};c.snapToNextScale=function(a,h=.5){if(!this.effectiveLODs)return a*h;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};c.snapToPreviousScale=function(a,h=2){if(!this.effectiveLODs)return a*
h;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};c.clone=function(){return new G({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};c._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce((h,d)=>Math.abs(d-a)<=Math.abs(h-a)?d:h,this._scales[0]);return this._lodByScale[a].scale};return p}(m);n.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveLODs",void 0);n.__decorate([k.property({readOnly:!0})],
m.prototype,"effectiveMinZoom",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveMaxZoom",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveMinScale",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"effectiveMaxScale",void 0);n.__decorate([k.property()],m.prototype,"lods",void 0);n.__decorate([k.property()],m.prototype,"minZoom",void 0);n.__decorate([k.property()],m.prototype,"maxZoom",void 0);n.__decorate([k.property()],m.prototype,"minScale",
void 0);n.__decorate([k.property()],m.prototype,"maxScale",void 0);n.__decorate([k.property()],m.prototype,"snapToZoom",void 0);return m=G=n.__decorate([H.subclass("esri.views.2d.constraints.ZoomConstraint")],m)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a){var h,d;let e=h=function(q){function A(){var f=q.apply(this,arguments)||this;f.left=0;f.top=0;f.right=0;f.bottom=0;return f}g._inheritsLoose(A,q);A.prototype.clone=function(){return new h({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return A}(m);n.__decorate([t.property()],e.prototype,"left",void 0);n.__decorate([t.property()],e.prototype,"top",void 0);n.__decorate([t.property()],e.prototype,"right",void 0);n.__decorate([t.property()],e.prototype,
"bottom",void 0);e=h=n.__decorate([G.subclass("esri.views.2d.PaddedViewState.Padding")],e);m=d=function(q){function A(...f){var r=q.call(this,...f)||this;r.paddedViewState=new a;r._updateContent=(()=>{const v=p.create();return()=>{var B=r._get("size");const w=r._get("padding");if(B&&w){var u=r.paddedViewState;D.set(v,w.left+w.right,w.top+w.bottom);D.subtract(v,B,v);D.copy(u.size,v);if(B=u.viewpoint)r.viewpoint=B}}})();r.own(k.watch(()=>[r.size,r.padding],()=>r._updateContent(),k.sync));r.padding=
new e;r.size=[0,0];return r}g._inheritsLoose(A,q);A.prototype.clone=function(){return new d({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};g._createClass(A,[{key:"padding",set:function(f){this._set("padding",f||new e)}},{key:"viewpoint",set:function(f){if(f){const r=f.clone();this.paddedViewState.viewpoint=f;c.addPadding(r,f,this._get("size"),this._get("padding"));f=this._viewpoint2D;const v=r.targetGeometry;f.center[0]=
v.x;f.center[1]=v.y;f.rotation=r.rotation;f.scale=r.scale;f.spatialReference=v.spatialReference;this._update()}}}]);return A}(a);n.__decorate([t.property()],m.prototype,"paddedViewState",void 0);n.__decorate([t.property({type:e})],m.prototype,"padding",null);n.__decorate([t.property()],m.prototype,"viewpoint",null);return m=d=n.__decorate([G.subclass("esri.views.2d.PaddedViewState")],m)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w){var u;const C=[0,0];m=u=function(J){function S(P){P=J.call(this,P)||this;P._viewpoint2D={center:f.create(),rotation:0,scale:0,spatialReference:null};P.center=[0,0];P.extent=new B;P.id=0;P.inverseTransform=h.create();P.resolution=0;P.rotation=0;P.scale=0;P.transform=h.create();P.transformNoRotation=h.create();P.displayMat3=e.create();P.displayViewMat3=e.create();P.viewMat3=e.create();P.viewMat2d=a.create();P.worldScreenWidth=0;P.size=[0,0];return P}
g._inheritsLoose(S,J);var T=S.prototype;T.copy=function(P){const X=this.size,Q=this.viewpoint;Q&&X?(this.viewpoint=v.copy(Q,P.viewpoint),this._set("size",q.copy(X,P.size))):(this.viewpoint=P.viewpoint.clone(),this._set("size",[P.size[0],P.size[1]]));this._set("pixelRatio",P.pixelRatio);return this};T.clone=function(){return new u({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};T.toMap=function(P,X,Q){if(r.isVec2(X))return q.transformMat2d(P,X,this.inverseTransform);
C[0]=X;C[1]=Q;return q.transformMat2d(P,C,this.inverseTransform)};T.toScreen=function(P,X,Q){if(r.isVec2(X))return q.transformMat2d(P,X,this.transform);C[0]=X;C[1]=Q;return q.transformMat2d(P,C,this.transform)};T.toScreenNoRotation=function(P,X,Q){if(r.isVec2(X))return q.transformMat2d(P,X,this.transformNoRotation);C[0]=X;C[1]=Q;return q.transformMat2d(P,C,this.transformNoRotation)};T.getScreenTransform=function(P,X){const {center:Q}=this._viewpoint2D,O=this._get("pixelRatio")||1,Z=this._get("size");
v.getMatrix(P,Q,Z,X,0,O);return P};T._update=function(){const {center:P,spatialReference:X,scale:Q,rotation:O}=this._viewpoint2D,Z=this._get("pixelRatio")||1,L=this._get("size"),I=new k({targetGeometry:new w(P[0],P[1],X),scale:Q,rotation:O});this._set("viewpoint",I);if(L&&X&&Q){this.resolution=v.getResolution(I);this.rotation=O;this.scale=Q;this.spatialReference=X;q.copy(this.center,P);d.set(this.displayMat3,0!==L[0]?2/L[0]:0,0,0,0,0!==L[1]?-2/L[1]:0,0,-1,1,1);var l=d.identity(this.viewMat3),z=A.fromValues(L[0]/
2,L[1]/2),x=A.fromValues(-L[0]/2,-L[1]/2),K=p.toRadian(O);d.translate(l,l,z);d.rotate(l,l,K);d.translate(l,l,x);d.multiply(this.displayViewMat3,this.displayMat3,l);l=c.fromTranslation(this.viewMat2d,z);c.rotate(l,l,K);c.translate(l,l,x);v.getExtent(this.extent,I,L);v.getTransform(this.transform,I,L,Z);c.invert(this.inverseTransform,this.transform);v.getTransformNoRotation(this.transformNoRotation,I,L,Z);this.worldScreenWidth=v.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",
this.id+1);return this}};g._createClass(S,[{key:"pixelRatio",set:function(P){this._set("pixelRatio",P);this._update()}},{key:"size",set:function(P){this._set("size",P);this._update()}},{key:"viewpoint",set:function(P){if(P){const X=this._viewpoint2D,Q=P.targetGeometry;X.center[0]=Q.x;X.center[1]=Q.y;X.rotation=P.rotation;X.scale=P.scale;X.spatialReference=Q.spatialReference}this._update()}}]);return S}(t.JSONSupport);n.__decorate([E.property({readOnly:!0})],m.prototype,"id",void 0);n.__decorate([E.property({value:1,
json:{write:!0}})],m.prototype,"pixelRatio",null);n.__decorate([E.property({json:{write:!0}})],m.prototype,"size",null);n.__decorate([E.property()],m.prototype,"spatialReference",void 0);n.__decorate([E.property({type:k,json:{write:!0}})],m.prototype,"viewpoint",null);return m=u=n.__decorate([D.subclass("esri.views.2d.ViewState")],m)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(g,n){function m(L,I){L[0]=I[0];L[1]=I[1];L[2]=I[2];L[3]=I[4];L[4]=I[5];L[5]=I[6];L[6]=I[8];L[7]=
I[9];L[8]=I[10];return L}function k(L,I){L[0]=I[0];L[1]=I[1];L[2]=I[2];L[3]=I[3];L[4]=I[4];L[5]=I[5];L[6]=I[6];L[7]=I[7];L[8]=I[8];return L}function t(L,I,l,z,x,K,U,ba,ea,na){L[0]=I;L[1]=l;L[2]=z;L[3]=x;L[4]=K;L[5]=U;L[6]=ba;L[7]=ea;L[8]=na;return L}function E(L){L[0]=1;L[1]=0;L[2]=0;L[3]=0;L[4]=1;L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function y(L,I){if(L===I){const l=I[1],z=I[2],x=I[5];L[1]=I[3];L[2]=I[6];L[3]=l;L[5]=I[7];L[6]=z;L[7]=x}else L[0]=I[0],L[1]=I[3],L[2]=I[6],L[3]=I[1],L[4]=I[4],L[5]=I[7],
L[6]=I[2],L[7]=I[5],L[8]=I[8];return L}function H(L,I){const l=I[0],z=I[1],x=I[2],K=I[3],U=I[4],ba=I[5],ea=I[6],na=I[7];I=I[8];const ha=I*U-ba*na,la=-I*K+ba*ea,pa=na*K-U*ea;let qa=l*ha+z*la+x*pa;if(!qa)return null;qa=1/qa;L[0]=ha*qa;L[1]=(-I*z+x*na)*qa;L[2]=(ba*z-x*U)*qa;L[3]=la*qa;L[4]=(I*l-x*ea)*qa;L[5]=(-ba*l+x*K)*qa;L[6]=pa*qa;L[7]=(-na*l+z*ea)*qa;L[8]=(U*l-z*K)*qa;return L}function G(L,I){const l=I[0],z=I[1],x=I[2],K=I[3],U=I[4],ba=I[5],ea=I[6],na=I[7];I=I[8];L[0]=U*I-ba*na;L[1]=x*na-z*I;L[2]=
z*ba-x*U;L[3]=ba*ea-K*I;L[4]=l*I-x*ea;L[5]=x*K-l*ba;L[6]=K*na-U*ea;L[7]=z*ea-l*na;L[8]=l*U-z*K;return L}function D(L){const I=L[3],l=L[4],z=L[5],x=L[6],K=L[7],U=L[8];return L[0]*(U*l-z*K)+L[1]*(-U*I+z*x)+L[2]*(K*I-l*x)}function p(L,I,l){const z=I[0],x=I[1],K=I[2],U=I[3],ba=I[4],ea=I[5],na=I[6],ha=I[7];I=I[8];const la=l[0],pa=l[1],qa=l[2],M=l[3],V=l[4],ca=l[5],ia=l[6],ka=l[7];l=l[8];L[0]=la*z+pa*U+qa*na;L[1]=la*x+pa*ba+qa*ha;L[2]=la*K+pa*ea+qa*I;L[3]=M*z+V*U+ca*na;L[4]=M*x+V*ba+ca*ha;L[5]=M*K+V*ea+
ca*I;L[6]=ia*z+ka*U+l*na;L[7]=ia*x+ka*ba+l*ha;L[8]=ia*K+ka*ea+l*I;return L}function c(L,I,l){const z=I[0],x=I[1],K=I[2],U=I[3],ba=I[4],ea=I[5],na=I[6],ha=I[7];I=I[8];const la=l[0];l=l[1];L[0]=z;L[1]=x;L[2]=K;L[3]=U;L[4]=ba;L[5]=ea;L[6]=la*z+l*U+na;L[7]=la*x+l*ba+ha;L[8]=la*K+l*ea+I;return L}function a(L,I,l){const z=I[0],x=I[1],K=I[2],U=I[3],ba=I[4],ea=I[5],na=I[6],ha=I[7];I=I[8];const la=Math.sin(l);l=Math.cos(l);L[0]=l*z+la*U;L[1]=l*x+la*ba;L[2]=l*K+la*ea;L[3]=l*U-la*z;L[4]=l*ba-la*x;L[5]=l*ea-
la*K;L[6]=na;L[7]=ha;L[8]=I;return L}function h(L,I,l){const z=l[0],x=l[1];l=l[2];L[0]=z*I[0];L[1]=z*I[1];L[2]=z*I[2];L[3]=x*I[3];L[4]=x*I[4];L[5]=x*I[5];L[6]=l*I[6];L[7]=l*I[7];L[8]=l*I[8];return L}function d(L,I,l){const z=l[0];l=l[1];L[0]=z*I[0];L[1]=z*I[1];L[2]=z*I[2];L[3]=l*I[3];L[4]=l*I[4];L[5]=l*I[5];return L}function e(L,I){L[0]=1;L[1]=0;L[2]=0;L[3]=0;L[4]=1;L[5]=0;L[6]=I[0];L[7]=I[1];L[8]=1;return L}function q(L,I){const l=Math.sin(I);I=Math.cos(I);L[0]=I;L[1]=l;L[2]=0;L[3]=-l;L[4]=I;L[5]=
0;L[6]=0;L[7]=0;L[8]=1;return L}function A(L,I){L[0]=I[0];L[1]=0;L[2]=0;L[3]=0;L[4]=I[1];L[5]=0;L[6]=0;L[7]=0;L[8]=1;return L}function f(L,I){L[0]=I[0];L[1]=I[1];L[2]=0;L[3]=I[2];L[4]=I[3];L[5]=0;L[6]=I[4];L[7]=I[5];L[8]=1;return L}function r(L,I){var l=I[0],z=I[1],x=I[2];I=I[3];var K=l+l,U=z+z;const ba=x+x;l*=K;const ea=z*K;z*=U;const na=x*K,ha=x*U;x*=ba;K*=I;U*=I;I*=ba;L[0]=1-z-x;L[3]=ea-I;L[6]=na+U;L[1]=ea+I;L[4]=1-l-x;L[7]=ha-K;L[2]=na-U;L[5]=ha+K;L[8]=1-l-z;return L}function v(L,I){const l=I[0],
z=I[1],x=I[2],K=I[4],U=I[5],ba=I[6],ea=I[8],na=I[9];I=I[10];const ha=I*U-ba*na,la=-I*K+ba*ea,pa=na*K-U*ea;var qa=l*ha+z*la+x*pa;if(!qa)return null;qa=1/qa;L[0]=ha*qa;L[1]=(-I*z+x*na)*qa;L[2]=(ba*z-x*U)*qa;L[3]=la*qa;L[4]=(I*l-x*ea)*qa;L[5]=(-ba*l+x*K)*qa;L[6]=pa*qa;L[7]=(-na*l+z*ea)*qa;L[8]=(U*l-z*K)*qa;return L}function B(L,I){const l=I[0],z=I[1],x=I[2],K=I[3],U=I[4],ba=I[5],ea=I[6],na=I[7];var ha=I[8],la=I[9],pa=I[10],qa=I[11];const M=I[12],V=I[13],ca=I[14];I=I[15];const ia=l*ba-z*U,ka=l*ea-x*U,
ra=l*na-K*U,va=z*ea-x*ba,Ba=z*na-K*ba,Da=x*na-K*ea,Ga=ha*V-la*M,Fa=ha*ca-pa*M;ha=ha*I-qa*M;const ya=la*ca-pa*V;la=la*I-qa*V;pa=pa*I-qa*ca;qa=ia*pa-ka*la+ra*ya+va*ha-Ba*Fa+Da*Ga;if(!qa)return null;qa=1/qa;L[0]=(ba*pa-ea*la+na*ya)*qa;L[1]=(ea*ha-U*pa-na*Fa)*qa;L[2]=(U*la-ba*ha+na*Ga)*qa;L[3]=(x*la-z*pa-K*ya)*qa;L[4]=(l*pa-x*ha+K*Fa)*qa;L[5]=(z*ha-l*la-K*Ga)*qa;L[6]=(V*Da-ca*Ba+I*va)*qa;L[7]=(ca*ra-M*Da-I*ka)*qa;L[8]=(M*Ba-V*ra+I*ia)*qa;return L}function w(L,I,l){L[0]=2/I;L[1]=0;L[2]=0;L[3]=0;L[4]=-2/
l;L[5]=0;L[6]=-1;L[7]=1;L[8]=1;return L}function u(L){return"mat3("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+")"}function C(L){return Math.sqrt(L[0]**2+L[1]**2+L[2]**2+L[3]**2+L[4]**2+L[5]**2+L[6]**2+L[7]**2+L[8]**2)}function J(L,I,l){L[0]=I[0]+l[0];L[1]=I[1]+l[1];L[2]=I[2]+l[2];L[3]=I[3]+l[3];L[4]=I[4]+l[4];L[5]=I[5]+l[5];L[6]=I[6]+l[6];L[7]=I[7]+l[7];L[8]=I[8]+l[8];return L}function S(L,I,l){L[0]=I[0]-l[0];L[1]=I[1]-l[1];L[2]=I[2]-l[2];L[3]=I[3]-l[3];
L[4]=I[4]-l[4];L[5]=I[5]-l[5];L[6]=I[6]-l[6];L[7]=I[7]-l[7];L[8]=I[8]-l[8];return L}function T(L,I,l){L[0]=I[0]*l;L[1]=I[1]*l;L[2]=I[2]*l;L[3]=I[3]*l;L[4]=I[4]*l;L[5]=I[5]*l;L[6]=I[6]*l;L[7]=I[7]*l;L[8]=I[8]*l;return L}function P(L,I,l,z){L[0]=I[0]+l[0]*z;L[1]=I[1]+l[1]*z;L[2]=I[2]+l[2]*z;L[3]=I[3]+l[3]*z;L[4]=I[4]+l[4]*z;L[5]=I[5]+l[5]*z;L[6]=I[6]+l[6]*z;L[7]=I[7]+l[7]*z;L[8]=I[8]+l[8]*z;return L}function X(L,I){return L[0]===I[0]&&L[1]===I[1]&&L[2]===I[2]&&L[3]===I[3]&&L[4]===I[4]&&L[5]===I[5]&&
L[6]===I[6]&&L[7]===I[7]&&L[8]===I[8]}function Q(L,I){const l=L[0],z=L[1],x=L[2],K=L[3],U=L[4],ba=L[5],ea=L[6],na=L[7];L=L[8];const ha=I[0],la=I[1],pa=I[2],qa=I[3],M=I[4],V=I[5],ca=I[6],ia=I[7];I=I[8];return Math.abs(l-ha)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(ha))&&Math.abs(z-la)<=n.EPSILON*Math.max(1,Math.abs(z),Math.abs(la))&&Math.abs(x-pa)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(pa))&&Math.abs(K-qa)<=n.EPSILON*Math.max(1,Math.abs(K),Math.abs(qa))&&Math.abs(U-M)<=n.EPSILON*Math.max(1,Math.abs(U),
Math.abs(M))&&Math.abs(ba-V)<=n.EPSILON*Math.max(1,Math.abs(ba),Math.abs(V))&&Math.abs(ea-ca)<=n.EPSILON*Math.max(1,Math.abs(ea),Math.abs(ca))&&Math.abs(na-ia)<=n.EPSILON*Math.max(1,Math.abs(na),Math.abs(ia))&&Math.abs(L-I)<=n.EPSILON*Math.max(1,Math.abs(L),Math.abs(I))}function O(L){const I=n.EPSILON,l=L[0],z=L[1],x=L[2],K=L[3],U=L[4],ba=L[5],ea=L[6],na=L[7];L=L[8];return Math.abs(1-(l*l+K*K+ea*ea))<=I&&Math.abs(1-(z*z+U*U+na*na))<=I&&Math.abs(1-(x*x+ba*ba+L*L))<=I}const Z=Object.freeze(Object.defineProperty({__proto__:null,
fromMat4:m,copy:k,set:t,identity:E,transpose:y,invert:H,adjoint:G,determinant:D,multiply:p,translate:c,rotate:a,scale:h,scaleByVec2:d,fromTranslation:e,fromRotation:q,fromScaling:A,fromMat2d:f,fromQuat:r,normalFromMat4Legacy:v,normalFromMat4:B,projection:w,str:u,frob:C,add:J,subtract:S,multiplyScalar:T,multiplyScalarAndAdd:P,exactEquals:X,equals:Q,isOrthoNormal:O,mul:p,sub:S},Symbol.toStringTag,{value:"Module"}));g.add=J;g.adjoint=G;g.copy=k;g.determinant=D;g.equals=Q;g.exactEquals=X;g.frob=C;g.fromMat2d=
f;g.fromMat4=m;g.fromQuat=r;g.fromRotation=q;g.fromScaling=A;g.fromTranslation=e;g.identity=E;g.invert=H;g.isOrthoNormal=O;g.mat3=Z;g.mul=p;g.multiply=p;g.multiplyScalar=T;g.multiplyScalarAndAdd=P;g.normalFromMat4=B;g.normalFromMat4Legacy=v;g.projection=w;g.rotate=a;g.scale=h;g.scaleByVec2=d;g.set=t;g.str=u;g.sub=S;g.subtract=S;g.translate=c;g.transpose=y})},"esri/chunks/mat3f32":function(){define(["exports"],function(g){function n(){const y=new Float32Array(9);y[0]=1;y[4]=1;y[8]=1;return y}function m(y){const H=
new Float32Array(9);H[0]=y[0];H[1]=y[1];H[2]=y[2];H[3]=y[3];H[4]=y[4];H[5]=y[5];H[6]=y[6];H[7]=y[7];H[8]=y[8];return H}function k(y,H,G,D,p,c,a,h,d){const e=new Float32Array(9);e[0]=y;e[1]=H;e[2]=G;e[3]=D;e[4]=p;e[5]=c;e[6]=a;e[7]=h;e[8]=d;return e}function t(y,H){return new Float32Array(y,H,9)}const E=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:m,fromValues:k,createView:t},Symbol.toStringTag,{value:"Module"}));g.clone=m;g.create=n;g.createView=t;g.fromValues=k;g.mat3f32=E})},
"esri/chunks/vec2f32":function(){define(["exports"],function(g){function n(){return new Float32Array(2)}function m(d){const e=new Float32Array(2);e[0]=d[0];e[1]=d[1];return e}function k(d,e){const q=new Float32Array(2);q[0]=d;q[1]=e;return q}function t(d,e){return new Float32Array(d,e,2)}function E(){return n()}function y(){return k(1,1)}function H(){return k(1,0)}function G(){return k(0,1)}const D=n(),p=y(),c=H(),a=G(),h=Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:m,fromValues:k,
createView:t,zeros:E,ones:y,unitX:H,unitY:G,ZEROS:D,ONES:p,UNIT_X:c,UNIT_Y:a},Symbol.toStringTag,{value:"Module"}));g.ONES=p;g.UNIT_X=c;g.UNIT_Y=a;g.ZEROS=D;g.clone=m;g.create=n;g.createView=t;g.fromValues=k;g.ones=y;g.unitX=H;g.unitY=G;g.vec2f32=h;g.zeros=E})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(g){function n(k){return k instanceof Float32Array&&2<=k.length}function m(k){return Array.isArray(k)&&2<=k.length}g.isVec2=function(k){return n(k)||m(k)};g.isVec2f32=
n;g.isVec2f64=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(g,n,m,k,t,E,y,H,G,D){function p(e,q){e.length=0;q.forEach(A=>e.push(A));return e}const c=new Set,a=[],h=new Map,d=[0,0];m=function(e){function q(f){f=e.call(this,f)||this;f._keyToItem=new Map;f.concurrency=6;f.strategy="scale-first";f.tileInfoView=null;return f}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){const {concurrency:f,process:r}=this;this._queue=new D.QueueProcessor({concurrency:f,process:(v,B)=>{v=this._keyToItem.get(v);return r(v,{signal:B})},peeker:v=>v.values().next().value})};
A.destroy=function(){this.clear();this._queue.destroy();this._queue=null};A.abort=function(f){this._queue.abort("string"===typeof f?f:f.id)};A.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};A.has=function(f){return"string"===typeof f?this._keyToItem.has(f):this._keyToItem.has(f.id)};A.isOngoing=function(f){f="string"===typeof f?f:f.id;return this.has(f)&&this._queue.isOngoing(f)};A.pause=function(){this._queue.pause()};A.push=function(f,r){const v=f.key.id+
"-"+r;if(this.has(v))return this.get(v);r=this._queue.push(v);const B=()=>{this._keyToItem.delete(v);this.notifyChange("updating")};this._keyToItem.set(v,f);r.then(B,B);this.notifyChange("updating");return r};A.reset=function(){this._queue.reset();this.notifyChange("updating")};A.resume=function(){this._queue.resume()};A._peekByScaleFirst=function(f){if(!this.state)return f.values().next().value;const r=this.tileInfoView;let v=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;f.forEach(S=>{S=this._keyToItem.get(S);
const T=this.tileInfoView.getTileScale(S.key);h.has(T)||(h.set(T,[]),v=Math.max(T,v),B=Math.min(T,B));h.get(T).push(S.key);c.add(T)});let w=this.state.scale;h.has(w)||(p(a,c),a.sort((S,T)=>S-T),w=a.reduce((S,T)=>Math.abs(T-w)<Math.abs(S-w)?T:S,a[0]));w=Math.min(w,v);w=Math.max(w,B);f=h.get(w);const u=r.getClosestInfoForScale(w),C=u.getColumnForX(this.state.center[0]),J=u.getRowForY(this.state.center[1]);f.sort((S,T)=>{const P=u.denormalizeCol(S.col,S.world),X=u.denormalizeCol(T.col,T.world);return Math.sqrt((C-
P)*(C-P)+(J-S.row)*(J-S.row))-Math.sqrt((C-X)*(C-X)+(J-T.row)*(J-T.row))});c.clear();h.clear();return f[0].id};A._peekByCenterFirst=function(f){if(!this.state)return f.values().next().value;const r=this.tileInfoView,v=this.state.center;let B=Number.POSITIVE_INFINITY,w=null;f.forEach(u=>{u=this._keyToItem.get(u);r.getTileCoords(d,u.key);const C=G.distance(d,v);C<B&&(B=C,w=u.key)});return w.id};g._createClass(q,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",
get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return q}(m);n.__decorate([k.property({constructOnly:!0})],m.prototype,"concurrency",void 0);n.__decorate([k.property({constructOnly:!0})],m.prototype,"process",void 0);n.__decorate([k.property()],m.prototype,"state",void 0);n.__decorate([k.property({constructOnly:!0})],m.prototype,"strategy",void 0);n.__decorate([k.property({constructOnly:!0})],m.prototype,"tileInfoView",void 0);
n.__decorate([k.property({readOnly:!0})],m.prototype,"updating",null);return m=n.__decorate([H.subclass("esri.views.2d.tiling.PagedTileQueue")],m)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(g,n,m,k,t,E){let y=function(G,D){this.item=G;this.controller=D;this.promise=null},H=function(){function G(p){this._deferreds=new Map;this._controllers=
new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;p.concurrency&&(this.concurrency=p.concurrency);this._queue=new t(p.peeker);this.process=p.process;const c=p.scheduler;p.priority&&m.isSome(c)&&(this._task=c.registerTask(p.priority,this))}var D=G.prototype;D.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};D.abort=function(p){(p=this._controllers.get(p))&&
p.abort()};D.clear=function(){this._queue.clear();const p=[];this._controllers.forEach(c=>p.push(c));this._controllers.clear();p.forEach(c=>c.abort());this._processingItems.clear();this._cancelNext()};D.forEach=function(p){this._deferreds.forEach((c,a)=>p(a))};D.get=function(p){return(p=this._deferreds.get(p))?p.promise:void 0};D.isOngoing=function(p){return this._processingItems.has(p)};D.has=function(p){return this._deferreds.has(p)};D.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};
D.push=function(p,c){const a=this.get(p);if(a)return a;const h=new AbortController;let d=null;c&&(d=k.onAbort(c,()=>h.abort()));const e=()=>{q.remove();m.isSome(d)&&d.remove();this._deferreds.delete(p);this._controllers.delete(p);this._queue.remove(p);this._processingItems.delete(p);this._scheduleNext()},q=k.onAbortOrThrow(h.signal,()=>{const f=this._processingItems.get(p);f&&f.controller.abort();e();A.reject(k.createAbortError())}),A=k.createDeferred();this._deferreds.set(p,A);this._controllers.set(p,
h);A.promise.then(e,e);this._queue.push(p);this._scheduleNext();return A.promise};D.last=function(){return this._queue.last()};D.peek=function(){return this._queue.peek()};D.popLast=function(){return this._queue.popLast()};D.reset=function(){const p=[];this._processingItems.forEach(c=>p.push(c));this._processingItems.clear();for(const c of p)this._queue.push(c.item),c.controller.abort();this._scheduleNext()};D.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};D.takeAll=function(){const p=
[];for(;this._queue.length;)p.push(this._queue.pop());this.clear();return p};D.runTask=function(p){for(;!p.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),p.madeProgress()};D._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=E.schedule(()=>{this._schedule=null;this._next()}))};D._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};D._cancelNext=
function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};D._processResult=function(p,c){this._canProcessFulfillment(p)&&(this._scheduleNext(),this._deferreds.get(p.item).resolve(c))};D._processError=function(p,c){this._canProcessFulfillment(p)&&(this._scheduleNext(),this._deferreds.get(p.item).reject(c))};D._canProcessFulfillment=function(p){return this._deferreds.get(p.item)&&this._processingItems.get(p.item)===p?!0:!1};D._process=function(p){if(!m.isNone(p)){var c=new AbortController,
a=new y(p,c);this._processingItems.set(p,a);try{var h=this.process(p,c.signal)}catch(d){this._processError(a,d)}k.isPromiseLike(h)?(a.promise=h,h.then(d=>this._processResult(a,d),d=>this._processError(a,d))):this._processResult(a,h)}};n._createClass(G,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:p=>
this.runTask(p)}}}]);return G}();g.QueueProcessor=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(g,n,m,k,t,E){const y=new t("0/0/0/0");let H=function(){function D(c,a,h,d,e,q,A,f){this.x=c;this.ymin=a;this.ymax=h;this.invM=d;this.leftAdjust=e;
this.rightAdjust=q;this.leftBound=A;this.rightBound=f}D.create=function(c,a){c[1]>a[1]&&([c,a]=[a,c]);const [h,d]=c,[e,q]=a;c=e-h;a=q-d;a=0!==a?c/a:0;const A=(Math.ceil(d)-d)*a,f=(Math.floor(d)-d)*a;return new D(h,Math.floor(d),Math.ceil(q),a,0>c?A:f,0>c?f:A,0>c?e:h,0>c?h:e)};var p=D.prototype;p.incrRow=function(){this.x+=this.invM};p.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};p.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return D}();
const G=[[0,0],[0,0],[0,0],[0,0]];return function(){function D(c,a=null){this.tileInfo=c;this.fullExtent=a;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const h=c.lods.slice();h.sort((e,q)=>q.scale-e.scale);const d=this._lodInfos=h.map(e=>m.create(c,e,a));h.forEach((e,q)=>{this._infoByLevel[e.level]=d[q];this._infoByScale[e.scale]=d[q];this.scales[q]=e.scale},this);this._wrap=c.isWrappable}var p=D.prototype;p.getLODInfoAt=function(c){return this._infoByLevel["number"===
typeof c?c:c.level]};p.getTileBounds=function(c,a,h=!1){y.set(a);return(a=this._infoByLevel[y.level])?a.getTileBounds(c,y,h):c};p.getTileCoords=function(c,a,h=!1){y.set(a);return(a=this._infoByLevel[y.level])?a.getTileCoords(c,y,h):c};p.getTileCoverage=function(c,a=192,h="closest"){h="closest"===h?this.getClosestInfoForScale(c.scale):this.getSmallestInfoForScale(c.scale);const d=k.pool.acquire(h),e=this._wrap;var q=Infinity;let A=-Infinity;const f=d.spans;G[0][0]=G[0][1]=G[1][1]=G[3][0]=-a;G[1][0]=
G[2][0]=c.size[0]+a;G[2][1]=G[3][1]=c.size[1]+a;for(r of G)c.toMap(r,r),r[0]=h.getColumnForX(r[0]),r[1]=h.getRowForY(r[1]);c=[];var r=3;for(a=0;4>a;a++)G[a][1]===G[r][1]?r=a:(r=H.create(G[a],G[r]),q=Math.min(r.ymin,q),A=Math.max(r.ymax,A),void 0===c[r.ymin]&&(c[r.ymin]=[]),c[r.ymin].push(r),r=a);if(null==q||null==A||100<A-q)return null;for(a=[];q<A;){null!=c[q]&&(a=a.concat(c[q]));r=Infinity;var v=-Infinity;for(var B=a.length-1;0<=B;B--){var w=a[B];r=Math.min(r,w.getLeftCol());v=Math.max(v,w.getRightCol())}r=
Math.floor(r);v=Math.floor(v);if(q>=h.first[1]&&q<=h.last[1])if(e)if(h.size[0]<h.worldSize[0])for(B=Math.floor(v/h.worldSize[0]),w=Math.floor(r/h.worldSize[0]);w<=B;w++)f.push(new E(q,Math.max(h.getFirstColumnForWorld(w),r),Math.min(h.getLastColumnForWorld(w),v)));else f.push(new E(q,r,v));else r>h.last[0]||v<h.first[0]||(r=Math.max(r,h.first[0]),v=Math.min(v,h.last[0]),f.push(new E(q,r,v)));q+=1;for(r=a.length-1;0<=r;r--)v=a[r],v.ymax>=q?v.incrRow():a.splice(r,1)}return d};p.getTileParentId=function(c){y.set(c);
c=this._lodInfos.indexOf(this._infoByLevel[y.level])-1;if(0>c)return null;this._getTileIdAtLOD(y,this._lodInfos[c],y);return y.id};p.getTileResolution=function(c){return(c=this._infoByLevel["object"===typeof c?c.level:c])?c.resolution:-1};p.getTileScale=function(c){return(c=this._infoByLevel[c.level])?c.scale:-1};p.intersects=function(c,a){y.set(a);a=this._infoByLevel[y.level];const h=c.lodInfo;if(h.resolution>a.resolution){this._getTileIdAtLOD(y,h,y);var d=h.denormalizeCol(y.col,y.world);for(var e of c.spans)if(e.row===
y.row&&e.colFrom<=d&&e.colTo>=d)return!0}if(h.resolution<a.resolution){const [A,f,r,v]=c.spans.reduce((B,w)=>{B[0]=Math.min(B[0],w.row);B[1]=Math.max(B[1],w.row);B[2]=Math.min(B[2],w.colFrom);B[3]=Math.max(B[3],w.colTo);return B},[Infinity,-Infinity,Infinity,-Infinity]);d=a.denormalizeCol(y.col,y.world);c=h.getColumnForX(a.getXForColumn(d));e=h.getRowForY(a.getYForRow(y.row));d=h.getColumnForX(a.getXForColumn(d+1))-1;a=h.getRowForY(a.getYForRow(y.row+1))-1;return!(c>v||d<r||e>f||a<A)}const q=h.denormalizeCol(y.col,
y.world);return c.spans.some(A=>A.row===y.row&&A.colFrom<=q&&A.colTo>=q)};p.normalizeBounds=function(c,a,h){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];this._wrap&&(a=n.getInfo(this.tileInfo.spatialReference),h=-h*(a.valid[1]-a.valid[0]),c[0]+=h,c[2]+=h);return c};p.getSmallestInfoForScale=function(c){const a=this.scales;if(this._infoByScale[c])return this._infoByScale[c];if(c>a[0])return this._infoByScale[a[0]];for(let h=1;h<a.length-1;h++)if(c>a[h]+1E-6)return this._infoByScale[a[h-1]];return this._infoByScale[a[a.length-
1]]};p.getClosestInfoForScale=function(c){const a=this.scales;if(this._infoByScale[c])return this._infoByScale[c];c=a.reduce((h,d)=>Math.abs(d-c)<Math.abs(h-c)?d:h,a[0]);return this._infoByScale[c]};p.scaleToLevel=function(c){const a=this.scales;if(this._infoByScale[c])return this._infoByScale[c].level;for(let h=a.length-1;0<=h;h--)if(c<a[h])return h===a.length-1?this._infoByScale[a[a.length-1]].level:this._infoByScale[a[h]].level+(a[h]-c)/(a[h]-a[h+1]);return this._infoByScale[a[0]].level};p.scaleToZoom=
function(c){return this.tileInfo.scaleToZoom(c)};p._getTileIdAtLOD=function(c,a,h){const d=this._infoByLevel[h.level];c.set(h);if(a.resolution<d.resolution)return null;if(a.resolution===d.resolution)return c;c.level=a.level;c.col=Math.floor(h.col*d.resolution/a.resolution+.01);c.row=Math.floor(h.row*d.resolution/a.resolution+.01);return c};g._createClass(D,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return D}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe",
"../../../geometry/support/spatialReferenceUtils","./TileKey"],function(g,n,m){function k(E,y,H){E[0]=y;E[1]=H;return E}const t=new m("0/0/0/0");return function(){function E(H,G,D,p,c,a,h,d,e,q,A,f){this.level=H;this.resolution=G;this.scale=D;this.origin=p;this.first=c;this.last=a;this.size=h;this.norm=d;this.worldStart=e;this.worldEnd=q;this.worldSize=A;this.wrap=f}E.create=function(H,G,D=null){var p=n.getInfo(H.spatialReference);const c=G.origin||[H.origin.x,H.origin.y],a=[H.size[0]*G.resolution,
H.size[1]*G.resolution],h=[-Infinity,-Infinity],d=[Infinity,Infinity],e=[Infinity,Infinity];g.isSome(D)&&(k(h,Math.max(0,Math.floor((D.xmin-c[0])/a[0])),Math.max(0,Math.floor((c[1]-D.ymax)/a[1]))),k(d,Math.max(0,Math.floor((D.xmax-c[0])/a[0])),Math.max(0,Math.floor((c[1]-D.ymin)/a[1]))),k(e,d[0]-h[0]+1,d[1]-h[1]+1));const {cols:q,rows:A}=G;!D&&q&&A&&(k(h,q[0],A[0]),k(d,q[1],A[1]),k(e,q[1]-q[0]+1,A[1]-A[0]+1));let f;H.isWrappable?(H=[Math.ceil(Math.round((p.valid[1]-p.valid[0])/G.resolution)/H.size[0]),
e[1]],p=[Math.floor((p.origin[0]-c[0])/a[0]),h[1]],D=[H[0]+p[0]-1,d[1]],f=!0):(p=h,D=d,H=e,f=!1);return new E(G.level,G.resolution,G.scale,c,h,d,e,a,p,D,H,f)};var y=E.prototype;y.normalizeCol=function(H){if(!this.wrap)return H;const G=this.worldSize[0];return 0>H?G-1-Math.abs((H+1)%G):H%G};y.denormalizeCol=function(H,G){return this.wrap?this.worldSize[0]*G+H:H};y.getWorldForColumn=function(H){return this.wrap?Math.floor(H/this.worldSize[0]):0};y.getFirstColumnForWorld=function(H){return H*this.worldSize[0]+
this.first[0]};y.getLastColumnForWorld=function(H){return H*this.worldSize[0]+this.first[0]+this.size[0]-1};y.getColumnForX=function(H){return(H-this.origin[0])/this.norm[0]};y.getXForColumn=function(H){return this.origin[0]+H*this.norm[0]};y.getRowForY=function(H){return(this.origin[1]-H)/this.norm[1]};y.getYForRow=function(H){return this.origin[1]-H*this.norm[1]};y.getTileBounds=function(H,G,D=!1){t.set(G);var p=D?t.col:this.denormalizeCol(t.col,t.world),c=t.row;G=this.getXForColumn(p);D=this.getYForRow(c+
1);p=this.getXForColumn(p+1);c=this.getYForRow(c);H[0]=G;H[1]=D;H[2]=p;H[3]=c;return H};y.getTileCoords=function(H,G,D=!1){t.set(G);G=D?t.col:this.denormalizeCol(t.col,t.world);Array.isArray(H)?k(H,this.getXForColumn(G),this.getYForRow(t.row)):(H.x=this.getXForColumn(G),H.y=this.getYForRow(t.row));return H};return E}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(g,n){let m=function(){function k(E,y,H,G){this.set(E,
y,H,G)}k.getId=function(E,y,H,G){return"object"===typeof E?`${E.level}/${E.row}/${E.col}/${E.world}`:`${E}/${y}/${H}/${G}`};var t=k.prototype;t.acquire=function(E,y,H,G){this.set(E,y,H,G)};t.contains=function(E){const y=E.level-this.level;return this.row===E.row>>y&&this.col===E.col>>y&&this.world===E.world};t.equals=function(E){return this.level===E.level&&this.row===E.row&&this.col===E.col&&this.world===E.world};t.clone=function(){return new k(this)};t.release=function(){this.world=this.col=this.row=
this.level=0};t.set=function(E,y,H,G){if(null==E)this.world=this.col=this.row=this.level=0;else if("object"===typeof E)this.level=E.level||0,this.row=E.row||0,this.col=E.col||0,this.world=E.world||0;else if("string"===typeof E){const [D,p,c,a]=E.split("/");this.level=parseFloat(D);this.row=parseFloat(p);this.col=parseFloat(c);this.world=parseFloat(a)}else this.level=+E,this.row=+y,this.col=+H,this.world=+G||0;return this};t.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};
t.getParentKey=function(){return 0>=this.level?null:new k(this.level-1,this.row>>1,this.col>>1,this.world)};t.getChildKeys=function(){const E=this.level+1,y=this.row<<1,H=this.col<<1,G=this.world;return[new k(E,y,H,G),new k(E,y,H+1,G),new k(E,y+1,H,G),new k(E,y+1,H+1,G)]};t.compareRowMajor=function(E){return this.row<E.row?-1:this.row>E.row?1:this.col<E.col?-1:this.col>E.col?1:0};g._createClass(k,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(E){this.set(E)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return k}();m.pool=new n(m,null,null,25,50);return m})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(g){let n=function(){function m(){this.spans=[]}var k=m.prototype;k.acquire=function(t){this.lodInfo=t};k.release=function(){this.lodInfo=null;this.spans.length=0};k.forEach=function(t,E){const {spans:y,lodInfo:H}=this,{level:G}=H;if(0!==y.length)for(const {row:D,
colFrom:p,colTo:c}of y)for(let a=p;a<=c;a++)t.call(E,G,D,H.normalizeCol(a),H.getWorldForColumn(a))};return m}();n.pool=new g(n);return n})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(g,n,m){this.row=g;this.colFrom=n;this.colTo=m}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(g,n,m,k,t,E,y,H,G,D){function p(e,q){e.length=0;q.forEach(A=>e.push(A));return e}const c=new Set,a=[],h=new Map,d=[0,0];m=function(e){function q(f){f=e.call(this,f)||this;f._keyToItem=new Map;f.concurrency=6;f.strategy="scale-first";f.tileInfoView=null;return f}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){const {concurrency:f,process:r,strategy:v}=this;this._queue=new D.QueueProcessor({concurrency:f,process:(B,w)=>{B=this._keyToItem.get(B);return r(B,{signal:w})},peeker:"scale-first"===
v?B=>this._peekByScaleFirst(B):B=>this._peekByCenterFirst(B)})};A.destroy=function(){this.clear();this._queue.destroy();this._queue=null};A.abort=function(f){this._queue.abort("string"===typeof f?f:f.id)};A.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};A.has=function(f){return"string"===typeof f?this._keyToItem.has(f):this._keyToItem.has(f.id)};A.isOngoing=function(f){f="string"===typeof f?f:f.id;return this.has(f)&&this._queue.isOngoing(f)};A.pause=function(){this._queue.pause()};
A.push=function(f){const r=f.key.id;if(this._queue.has(r))return this._queue.get(r);const v=this._queue.push(r),B=()=>{this._keyToItem.delete(r);this.notifyChange("updating")};this._keyToItem.set(r,f);v.then(B,B);this.notifyChange("updating");return v};A.reset=function(){this._queue.reset()};A.resume=function(){this._queue.resume()};A._peekByScaleFirst=function(f){if(!this.state)return f.values().next().value;const r=this.tileInfoView;let v=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;f.forEach(S=>
{S=this._keyToItem.get(S);const T=this.tileInfoView.getTileScale(S.key);h.has(T)||(h.set(T,[]),v=Math.max(T,v),B=Math.min(T,B));h.get(T).push(S.key);c.add(T)});let w=this.state.scale;h.has(w)||(p(a,c),a.sort((S,T)=>S-T),w=a.reduce((S,T)=>Math.abs(T-w)<Math.abs(S-w)?T:S,a[0]));w=Math.min(w,v);w=Math.max(w,B);f=h.get(w);const u=r.getClosestInfoForScale(w),C=u.getColumnForX(this.state.center[0]),J=u.getRowForY(this.state.center[1]);f.sort((S,T)=>{const P=u.denormalizeCol(S.col,S.world),X=u.denormalizeCol(T.col,
T.world);return Math.sqrt((C-P)*(C-P)+(J-S.row)*(J-S.row))-Math.sqrt((C-X)*(C-X)+(J-T.row)*(J-T.row))});c.clear();h.clear();return f[0].id};A._peekByCenterFirst=function(f){if(!this.state)return f.values().next().value;const r=this.tileInfoView,v=this.state.center;let B=Number.POSITIVE_INFINITY,w=null;f.forEach(u=>{u=this._keyToItem.get(u);r.getTileCoords(d,u.key);const C=G.distance(d,v);C<B&&(B=C,w=u.key)});return w.id};g._createClass(q,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return q}(m);n.__decorate([k.property({constructOnly:!0})],m.prototype,"concurrency",void 0);n.__decorate([k.property({constructOnly:!0})],m.prototype,"process",void 0);n.__decorate([k.property()],m.prototype,"state",void 0);n.__decorate([k.property({constructOnly:!0})],m.prototype,"strategy",void 0);n.__decorate([k.property({constructOnly:!0})],m.prototype,
"tileInfoView",void 0);n.__decorate([k.property({readOnly:!0})],m.prototype,"updating",null);return m=n.__decorate([H.subclass("esri.views.2d.tiling.TileQueue")],m)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(g,n,m,k){const t=new k(0,0,0,0),E=new Map,y=[],H=[];return function(){function G(p){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=p.acquireTile;this.releaseTile=p.releaseTile;this.tileInfoView=p.tileInfoView;this.resampling=null==p.resampling||!!p.resampling;p.cachePolicy&&(this.cachePolicy=p.cachePolicy);p.coveragePolicy&&(this.coveragePolicy=p.coveragePolicy);null!=p.buffer&&(this.buffer=p.buffer);p.cacheSize&&(this._tileCache=new n(p.cacheSize,this.tileInfoView,c=>{this.releaseTile(c)}))}var D=G.prototype;D.destroy=function(){this.tileIndex.clear()};
D.update=function(p){const {resampling:c,tileIndex:a}=this,h=this.tileInfoView.getTileCoverage(p.state,this.buffer,this.coveragePolicy);H.length=0;y.length=0;E.clear();if(h){var {minScale:d,maxScale:e}=this.tileInfoView.tileInfo,{spans:q,lodInfo:A}=h,{level:f}=A,{scale:r,center:v,resolution:B}=p.state,w=!p.stationary&&r>this._previousScale;this._previousScale=r;this.tiles.length=0;if(!c&&(r>d||r<e))return this.tiles.length=0,E.clear(),a.forEach(T=>{this.releaseTile(T)}),a.clear(),H.length=0,y.length=
0,E.clear(),m.pool.release(h),!0;a.forEach(T=>T.visible=!0);var u=p=0;if(0<q.length)for(const {row:T,colFrom:P,colTo:X}of q)for(let Q=P;Q<=X;Q++){p++;const O=t.set(f,T,A.normalizeCol(Q),A.getWorldForColumn(Q)).id;if(a.has(O)){var C=a.get(O);C.isReady?(E.set(O,C),u++):w||this._addParentTile(O,E)}else{if(this._tileCache&&this._tileCache.has(O)){if(C=this._tileCache.pop(O),this.tileIndex.set(O,C),C.isReady){E.set(O,C);u++;continue}}else C=this.acquireTile(t),this.tileIndex.set(O,C);w||this._addParentTile(O,
E)}}var J=u===p;a.forEach((T,P)=>{t.set(P);if(!E.has(P)){var X=this.tileInfoView.intersects(h,t),Q="purge"===this.cachePolicy?t.level!==f:t.level>f;!X||!w&&J?!Q&&X||y.push(P):T.isReady?Q&&"purge"===this.cachePolicy&&this._hasReadyAncestor(t,f)?y.push(P):H.push(P):Q&&y.push(P)}});for(var S of H)(p=a.get(S))&&p.isReady&&E.set(S,p);for(const T of y)S=a.get(T),this._tileCache?this._tileCache.add(S):this.releaseTile(S),a.delete(T);E.forEach(T=>this.tiles.push(T));a.forEach(T=>{E.has(T.key.id)||(T.visible=
!1)});this._tileCache&&this._tileCache.prune(f,v,B);m.pool.release(h);E.clear();return J}};D.clear=function(p=!0){const {tileIndex:c}=this;p&&c.forEach(a=>{this.releaseTile(a)});c.clear()};D.updateCacheSize=function(p){this._tileCache&&(this._tileCache.maxSize=p)};D._addParentTile=function(p,c){let a=null;for(;;){p=this.tileInfoView.getTileParentId(p);if(!p)break;if(this.tileIndex.has(p)){if((a=this.tileIndex.get(p))&&a.isReady){c.has(a.key.id)||c.set(a.key.id,a);break}}else if(this._tileCache&&this._tileCache.has(p)&&
(a=this._tileCache.pop(p),this.tileIndex.set(p,a),a&&a.isReady)){c.has(a.key.id)||c.set(a.key.id,a);break}}};D._hasReadyAncestor=function(p,c){const a=g.create();this.tileInfoView.getTileBounds(a,p,!0);for(const h of this.tileIndex.values())if(h.isReady&&h.key.level>=c&&h.key.level<p.level){const d=g.create();this.tileInfoView.getTileBounds(d,h.key,!0);if(g.contains(d,a))return!0}return!1};return G}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(g){return function(){function n(k,
t,E){this.maxSize=k;this.tileInfoView=t;this.removedFunc=E;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var m=n.prototype;m.has=function(k){return this._tilePerId.has(k)};m.get=function(k){return this._tilePerId.get(k)};m.pop=function(k){const t=this._tilePerId.get(k);if(!t)return null;const E=this._tileKeysPerLevel[t.key.level];this._tilePerId["delete"](k);for(let y=0;y<E.length;y++)if(E[y].id===k){E.splice(y,1);break}t.visible=!0;return t};m.add=function(k){k.visible=!1;const t=k.key,E=t.id;
this._tilePerId.has(E)||(this._tilePerId.set(E,k),k=t.level,this._tileKeysPerLevel[k]||(this._tileKeysPerLevel[k]=[]),this._tileKeysPerLevel[k].push(t))};m.prune=function(k,t,E){let y=this._tilePerId.size;if(!(y<=this.maxSize)){for(var H=this._tileKeysPerLevel.length-1;y>this.maxSize&&0<=H;)H!==k&&(y=this._pruneAroundCenterTile(y,t,E,H)),H--;y>this.maxSize&&(y=this._pruneAroundCenterTile(y,t,E,k))}};m._pruneAroundCenterTile=function(k,t,E,y){y=this._tileKeysPerLevel[y];if(!y||0===y.length)return k;
const {size:H,origin:G}=this.tileInfoView.tileInfo,D=E*H[0],p=E*H[1],c=[0,0],a=[0,0];for(y.sort((h,d)=>{c[0]=G.x+D*(h.col+.5);c[1]=G.y-p*(h.row+.5);a[0]=G.x+D*(d.col+.5);a[1]=G.y-p*(d.row+.5);return g.squaredDistance(c,t)-g.squaredDistance(a,t)});0<y.length&&(E=y.pop(),this._removeTile(E.id),k--,k!==this.maxSize););return k};m._removeTile=function(k){const t=this._tilePerId.get(k);this.removedFunc&&this.removedFunc(t);this._tilePerId["delete"](k)};return n}()})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C,J,S,T){var P={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},X={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Q={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};m=function(O){function Z(){var I=O.apply(this,arguments)||this;I._handles=new k;return I}g._inheritsLoose(Z,O);var L=Z.prototype;L.initialize=function(){const I=()=>{var l;return null==
(l=this.view)?void 0:l.ready};this._handles.add([t.when(()=>!I(),()=>this._disconnect()),t.when(I,()=>this._connect())])};L.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};L._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};L._connect=function(){const I=new v.BrowserEventSource(this.view.surface,this.view.input);var l=[new J.ImmediateDoubleClick,
new S.PointerClickHoldAndDrag,new T.SingleAndDoubleClick,new C.Drag(this.view.navigation),new u.DoubleTapDrag];l=new B.InputManager({eventSource:I,recognizers:l});l.installHandlers("prevent-context-menu",[new w.PreventContextMenu],B.ViewEventPriorities.INTERNAL);l.installHandlers("navigation",[new r.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new f.MouseWheelZoom(this.view),new p.DoubleClickZoom(this.view),new p.DoubleClickZoom(this.view,["Ctrl"]),new a.DragPan(this.view,"primary"),
new e.KeyPan(this.view,P),new A.KeyZoom(this.view,X),new q.KeyRotate(this.view,Q),new h.DragRotate(this.view,"secondary"),new c.DoubleTapDragZoom(this.view,"touch")],B.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(l);this._source=I;this._inputManager=l;t.watch(()=>{var z,x;return null==(z=this.view)?void 0:null==(x=z.navigation)?void 0:x.browserTouchPanEnabled},z=>{this._source&&(this._source.browserTouchPanningEnabled=!z)},t.initial)};g._createClass(Z,[{key:"latestPointerType",get:function(){var I;
return null==(I=this._inputManager)?void 0:I.latestPointerType}},{key:"latestPointerLocation",get:function(){var I;return null==(I=this._inputManager)?void 0:I.latestPointerLocation}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return Z}(m);n.__decorate([E.property()],m.prototype,"view",void 0);n.__decorate([E.property()],m.prototype,"latestPointerType",null);n.__decorate([E.property()],m.prototype,"latestPointerLocation",null);return m=n.__decorate([D.subclass("esri.views.2d.input.MapViewInputManager")],
m)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(g,n,m,k){m=function(t){function E(y,H){var G=t.call(this,!0)||this;G.view=y;G.registerIncoming("double-click",H,D=>G._handleDoubleClick(D,H));return G}n._inheritsLoose(E,t);E.prototype._handleDoubleClick=function(y,H){k.eventMatchesPointerAction(y.data,"primary")&&(y.stopPropagation(),H?this.view.mapViewNavigation.zoomOut([y.data.x,
y.data.y]):this.view.mapViewNavigation.zoomIn([y.data.x,y.data.y]))};return E}(m.InputHandler);g.DoubleClickZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/support":function(){define(["exports"],function(g){g.eventMatchesMousePointerAction=function(n,m){if("touch"===n.pointerType)return!1;switch(m){case "primary":return 0===n.button;case "secondary":return 2===n.button;case "tertiary":return 1===n.button}};g.eventMatchesPointerAction=
function(n,m){switch(m){case "primary":return"touch"===n.pointerType||0===n.button;case "secondary":return"touch"!==n.pointerType&&2===n.button;case "tertiary":return"touch"!==n.pointerType&&1===n.button}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(g,n,m,k){m=function(t){function E(y,
H,G){var D=t.call(this,!0)||this;D.view=y;D.pointerType=H;D.registerIncoming("double-tap-drag",G,p=>D._handleDoubleTapDrag(p));return D}n._inheritsLoose(E,t);E.prototype._handleDoubleTapDrag=function(y){var {data:H}=y,{pointerType:G}=H;if(G===this.pointerType){y.stopPropagation();var {action:D,delta:p}=H;({view:H}=this);({mapViewNavigation:y}=H);switch(D){case "begin":({scale:H}=H);this._currentScale=this._startScale=H;this._previousDelta=p;y.begin();break;case "update":if(this._previousDelta.y===
p.y)break;this._previousDelta=p;H=this._startScale*1.015**p.y;y.setViewpointImmediate(H/this._currentScale);this._currentScale=H;break;case "end":{({constraints:G}=H);const {effectiveLODs:c,snapToZoom:a}=G;a&&c?(H=G.snapScale(this._currentScale),H=(0<p.y?Math.max(H,G.snapToPreviousScale(this._startScale)):Math.min(H,G.snapToNextScale(this._startScale)))/this._currentScale,y.zoom(H)):y.end()}}}};return E}(k.InputHandler);g.DoubleTapDragZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(g,n,m,k,t){k=function(E){function y(G,D,p){var c=E.call(this,!0)||this;c.view=G;c.pointerAction=D;c.registerIncoming("drag",p,a=>c._handleDrag(a));c.registerIncoming("pointer-down",()=>c.stopMomentumNavigation());return c}n._inheritsLoose(y,E);var H=y.prototype;H.onInstall=function(G){E.prototype.onInstall.call(this,
G);this.dragEventSeparator=new m.DragEventSeparator({start:(D,p)=>{this.view.mapViewNavigation.pan.begin(this.view,p.data);p.stopPropagation()},update:(D,p)=>{this.view.mapViewNavigation.pan.update(this.view,p.data);p.stopPropagation()},end:(D,p)=>{this.view.mapViewNavigation.pan.end(this.view,p.data);p.stopPropagation()},condition:(D,p)=>1===D&&t.eventMatchesPointerAction(p.data,this.pointerAction)})};H._handleDrag=function(G){const D=this.view.mapViewNavigation;D.pinch.zoomMomentum||D.pinch.rotateMomentum?
this.stopMomentumNavigation():this.dragEventSeparator.handle(G)};H.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return y}(k.InputHandler);g.DragPan=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(g){let n=function(){function m(t){this.callbacks=t;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var k=
m.prototype;k.handle=function(t){const E=t.data,y=E.pointers.size;switch(E.action){case "start":this.currentCount=y;this._emitStart(t);break;case "added":this._emitEnd(this.previousEvent);this.currentCount=y;this._emitStart(t);break;case "update":this._emitUpdate(t);break;case "removed":this.startEvent&&this._emitEnd(this.previousEvent);this.currentCount=y;this._emitStart(t);break;case "end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t};k._emitStart=function(t){this.startEvent=t;this.callbacks.condition(this.currentCount,
t)&&this.callbacks.start(this.currentCount,t,this.startEvent)};k._emitUpdate=function(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)};k._emitEnd=function(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent);this.startEvent=null};return m}();g.DragEventSeparator=n;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(g,n,m,k,t){k=function(E){function y(H,G,D){var p=E.call(this,!0)||this;p.view=H;p.pointerAction=G;const c=p.view.mapViewNavigation;p.dragEventSeparator=new m.DragEventSeparator({start:(a,h)=>{c.rotate.begin(p.view,h.data);h.stopPropagation()},update:(a,h)=>{c.rotate.update(p.view,h.data);h.stopPropagation()},end:(a,h)=>{c.rotate.end();h.stopPropagation()},
condition:(a,h)=>1===a&&t.eventMatchesPointerAction(h.data,p.pointerAction)});p.registerIncoming("drag",D,a=>p.dragEventSeparator.handle(a));return p}n._inheritsLoose(y,E);return y}(k.InputHandler);g.DragRotate=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(g,n,m,k,t,E,y,H){y=function(G){function D(c){var a=G.call(this,!0)||this;a.view=c;a.frameTask=null;a.watchHandles=new m;a.currentDevice=null;a.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};a.handle=a.registerIncoming("gamepad",h=>a._handleGamePadEvent(h));a.handle.pause();return a}n._inheritsLoose(D,G);var p=D.prototype;p.onInstall=function(c){G.prototype.onInstall.call(this,c);this.watchHandles.add([k.watch(()=>{var a;return null==(a=this.view.navigation.gamepad)?void 0:a.enabled},
a=>{a?(this.handle.resume(),this.frameTask||(this.frameTask=t.addFrameTask({update:h=>this._frameUpdate(h.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},k.initial)])};p.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);G.prototype.onUninstall.call(this)};p._handleGamePadEvent=function(c){const a=this.view.navigation.gamepad.device;a&&c.data.device!==a||this.currentDevice&&this.currentDevice!==
c.data.device||("end"===c.data.action?(this.currentDevice=null,H.resetTransformation(this.transformation)):(this.currentDevice=c.data.device,H.extractTransformation(c.data,this.view.navigation.gamepad,this.transformation)))};p._frameUpdate=function(c){const a=this.transformation;if(!H.isZeroTransformation(a)){var h=this.view.viewpoint.clone(),d=.7*this.view.navigation.gamepad.velocityFactor*c;E.translateBy(h,h,[a.translation[0]*d,-a.translation[1]*d]);d=this.view.size;E.scaleAndRotateBy(h,h,1+6E-4*
a.translation[2]*c,this.view.constraints.rotationEnabled?.06*-a.heading*c:0,[d[0]/2,d[1]],d);c=this.view.constraints.constrain(h,this.view.viewpoint);this.view.viewpoint=c}};return D}(y.InputHandler);g.GamepadNavigation=y;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(g,n){function m(k){let t=k*k;0>k&&(t*=-1);return t}g.extractTransformation=function(k,
t,E){const y=k.state;k=k.device;t="forward-down"===t.tiltDirection?1:-1;"standard"===k.deviceType?(E.translation[0]=m(y.axes[0]),E.translation[1]=m(y.axes[1]),E.translation[2]=m(y.buttons[7])-m(y.buttons[6]),E.heading=m(y.axes[2]),E.tilt=m(y.axes[3])):"spacemouse"===k.deviceType&&(E.translation[0]=1.2*m(y.axes[0]),E.translation[1]=1.2*m(y.axes[1]),E.translation[2]=2*-m(y.axes[2]),E.heading=1.2*m(y.axes[5]),E.tilt=1.2*m(y.axes[3]));E.tilt*=t;n.scale(E.translation,E.translation,1);return E};g.extractTransformationKeyboard=
function(k,t){t.translation[0]=k[1]-k[0];t.translation[1]=k[3]-k[2];t.translation[2]=k[4]-k[5];t.heading=k[7]-k[6];t.tilt=k[8]-k[9];t.zoom=k[10]-k[11];return t};g.isZeroTransformation=function(k){return 0===k.translation[0]&&0===k.translation[1]&&0===k.translation[2]&&0===k.heading&&0===k.tilt&&0===k.zoom};g.quadraticAccentuation=m;g.resetTransformation=function(k){k.translation[0]=0;k.translation[1]=0;k.translation[2]=0;k.heading=0;k.tilt=0;return k};Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(g,n,m){m=function(k){function t(y,H,G){var D=k.call(this,!0)||this;D.view=y;D.keys=H;D._pressed=!1;D._keyMap={[H.left]:"left",[H.right]:"right",[H.up]:"up",[H.down]:"down"};D.registerIncoming("key-down",G,p=>D._handleKeyDown(p));D.registerIncoming("key-up",G,p=>D._handleKeyUp(p));D.registerIncoming("blur",
G,()=>D._handleBlur());return D}n._inheritsLoose(t,k);var E=t.prototype;E._handleKeyDown=function(y){y.data.repeat||this._handleKey(y,!0)};E._handleKeyUp=function(y){this._handleKey(y,!1)};E._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};E._handleKey=function(y,H){const G=this._keyMap[y.data.key];if(this._pressed=null!=G){if(H)switch(this.view.mapViewNavigation.begin(),G){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();y.stopPropagation()}};return t}(m.InputHandler);g.KeyPan=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(g,n,m){m=function(k){function t(y,
H,G){var D=k.call(this,!0)||this;D.view=y;D.keys=H;D._pressed=!1;D._keyToDirection={[H.clockwiseOption1]:"clockwise",[H.clockwiseOption2]:"clockwise",[H.counterClockwiseOption1]:"counterClockwise",[H.counterClockwiseOption2]:"counterClockwise",[H.resetOption1]:"reset",[H.resetOption2]:"reset"};D.registerIncoming("key-down",G,p=>D._handleKeyDown(p));D.registerIncoming("key-up",G,p=>D._handleKeyUp(p));D.registerIncoming("blur",G,()=>D._handleBlur());return D}n._inheritsLoose(t,k);var E=t.prototype;
E._handleKeyDown=function(y){y.data.repeat||this._handleKey(y,!0)};E._handleKeyUp=function(y){this._handleKey(y,!1)};E._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};E._handleKey=function(y,H){var G=y.modifiers;if(!(0<G.size&&!G.has("Shift")||!this.view.constraints.rotationEnabled)&&(G=this._keyToDirection[y.data.key],this._pressed=null!=G)){if(H)switch(this.view.mapViewNavigation.begin(),G){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();y.stopPropagation()}};return t}(m.InputHandler);g.KeyRotate=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has",
"../../../input/InputHandler"],function(g,n,m,k){var t;(function(E){E[E.IN=0]="IN";E[E.OUT=1]="OUT"})(t||(t={}));m=function(E){function y(G,D,p){var c=E.call(this,!0)||this;c.view=G;c.keys=D;c._keysToZoomAction={};c.registerIncoming("key-down",p,a=>c._handleKeyDown(a));D.zoomIn.forEach(a=>c._keysToZoomAction[a]=t.IN);D.zoomOut.forEach(a=>c._keysToZoomAction[a]=t.OUT);return c}n._inheritsLoose(y,E);var H=y.prototype;H._handleKeyDown=function(G){this._handleKey(G)};H._handleKey=function(G){var D=G.modifiers;
if(!(0<D.size)||D.has("Shift"))if({key:D}=G.data,D in this._keysToZoomAction){D=this._keysToZoomAction[D];var {mapViewNavigation:p}=this.view,c=null;switch(D){case t.IN:c=p.zoomIn();break;case t.OUT:c=p.zoomOut();break;default:return}p.begin();c.then(()=>p.end());G.stopPropagation()}};return y}(k.InputHandler);g.KeyZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/InputHandler"],function(g,n,m){m=function(k){function t(E,y){var H=k.call(this,!0)||this;H.view=E;H._canZoom=!0;H.registerIncoming("mouse-wheel",y,G=>H._handleMouseWheel(G));return H}n._inheritsLoose(t,k);t.prototype._handleMouseWheel=function(E){if(this.view.navigation.mouseWheelZoomEnabled&&(E.preventDefault(),E.stopPropagation(),this._canZoom)){var y=this.view.mapViewNavigation,{x:H,y:G,deltaY:D}=E.data;if(E=y.zoom(1/.6**(1/60*D),[H,G]))this._canZoom=!1,E.catch(()=>{}).then(()=>
{this._canZoom=!0;y.end()})}};return t}(m.InputHandler);g.MouseWheelZoom=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(g,n,m,k){k=function(t){function E(H){var G=t.call(this,!0)||this;G.view=H;G.registerIncoming("drag",p=>G._handleDrag(p));G.registerIncoming("pointer-down",
()=>G._stopMomentumNavigation());const D=G.view.mapViewNavigation;G.dragEventSeparator=new m.DragEventSeparator({start:(p,c)=>{D.pinch.begin(G.view,c.data);c.stopPropagation()},update:(p,c)=>{D.pinch.update(G.view,c.data);c.stopPropagation()},end:(p,c)=>{D.pinch.end(G.view);c.stopPropagation()},condition:p=>2<=p});return G}n._inheritsLoose(E,t);var y=E.prototype;y._handleDrag=function(H){this.dragEventSeparator.handle(H)};y._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};
return E}(k.InputHandler);g.PinchRotateAndZoom=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(g,n,m,k,t,E){const y=m("trident"),H=m("edge"),G=m("chrome"),D=m("ff"),p=m("safari");m=function(){function a(d,e){this.input=e;this._active={};this._activePointerCaptures=
new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=d;d.getAttribute("tabindex")||d.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new t.GamepadSource(d,this.input);this._gamepadSource.onEvent=q=>this._callback("gamepad",q)}var h=a.prototype;h.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(d=>{this._releasePointerCaptureSafe(d)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=
null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};h.setPointerCapture=function(d,e){e?(this._element.setPointerCapture(d.pointerId),this._activePointerCaptures.add(d.pointerId)):(this._releasePointerCaptureSafe(d.pointerId),this._activePointerCaptures.delete(d.pointerId))};h._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?
"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};h._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};h._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};
h._releasePointerCaptureSafe=function(d){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(d)||this._element.releasePointerCapture(d)}catch(e){}};h._updateNormalizedPointerLikeEvent=function(d,e){d=E.createScreenPointFromNativeEvent(this._element,d);a.test.disableSubpixelCoordinates&&(d.x=Math.round(d.x),d.y=Math.round(d.y));e.x=d.x;e.y=d.y;return e};h._handleKey=function(d,e){const q=k.eventKey(e);q&&"key-up"===d&&this._keyDownState.delete(q);e={native:e,key:q,repeat:q&&this._keyDownState.has(q)};
q&&"key-down"===d&&this._keyDownState.add(e.key);this._callback(d,e)};h._handlePointer=function(d,e){e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});this._callback(d,e)};h._handlePointerPreventDefault=function(d,e){const q=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});e.preventDefault();this._callback(d,
q)};h._handleMouseWheel=function(d,e){let q=e.deltaY;switch(e.deltaMode){case 0:if(y||H)q=q/document.documentElement.clientHeight*600;break;case 1:q*=30;break;case 2:q*=900}y||H?q*=.7:G||p?q*=.6:D&&(q*=1.375);const A=Math.abs(q);100<A&&(q=q/A*200/(1+Math.exp(-.02*(A-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:q});this._callback(d,e)};h._handlePointerCaptureLost=function(d,e){this._activePointerCaptures.delete(e.pointerId);this._handleDefault(d,e)};h._handleDefault=
function(d,e){const q={native:e};e.preventDefault();this._callback(d,q)};h._preventAltKeyDefault=function(d){"Alt"===d.key&&d.preventDefault()};h._preventMultiTouchPanning=function(d){1<d.touches.length&&d.preventDefault()};n._createClass(a,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(d){this._browserTouchPanningEnabled=d;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(d){this._callback=d}},
{key:"activeEvents",set:function(d){for(const e in this._active)d&&d.has(e)||(this._element.removeEventListener(c[e],this._active[e]),delete this._active[e]);d&&d.forEach(e=>{if(!this._active[e]&&c[e]){const q=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(c[e],q);this._active[e]=q}});this._gamepadSource.hasEventListeners=d&&d.has("gamepad")}}]);return a}();m.test={disableSubpixelCoordinates:!1};const c={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};g.BrowserEventSource=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(g,n,m,k,t){let E=function(){function y(G,D){this.element=G;this.input=D;this._hasEventListeners=!1;this._onConnectGamepad=p=>{this._connectGamepad(p.gamepad)};this._onDisconnectGamepad=p=>{p=p.gamepad;const c=p.index,a=this.inputDevices[c];a&&(this._emitGamepadEvent(p,t.extractState(a),!1),this.inputDevices.splice(c,1),this.latestUpdate.splice(c,1),this.input.gamepad.devices.remove(a),this.ensurePollingState())};this.frameTask=
null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;G=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&G)this._forEachGamepad(p=>this._connectGamepad(p)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var H=y.prototype;H.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),
window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};H._connectGamepad=function(G){const D=new k(G);"unknown"!==D.deviceType&&(this.inputDevices[G.index]=D,this.input.gamepad.devices.add(D));this.ensurePollingState()};H.ensurePollingState=function(){this.eventsEnabled?this._startPolling():this._stopPolling()};H._startPolling=function(){null==this.frameTask&&(this.frameTask=m.addFrameTask({update:()=>this._readGamepadState()}))};H._stopPolling=function(){null!=this.frameTask&&
(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};H._readGamepadState=function(){const G=document.hasFocus(),D=this.element.contains(document.activeElement),p="document"===this.input.gamepad.enabledFocusMode&&!G||"view"===this.input.gamepad.enabledFocusMode&&!D;this._forEachGamepad(c=>{var a=this.inputDevices[c.index];if(a){var h=this.latestUpdate[c.index];a=t.extractState(a);var d=p||t.stateIdle(a);h&&(h.timestamp===c.timestamp||!h.active&&d||t.stateEqual(h.state,a))||this._emitGamepadEvent(c,
a,!d)}})};H._forEachGamepad=function(G){const D=window.navigator.getGamepads();for(let p=0;p<D.length;p++){const c=D[p];this._validate(c)&&G(c)}};H._emitGamepadEvent=function(G,D,p){var c=this.latestUpdate[G.index];if((c=c&&c.active)||p)this.latestUpdate[G.index]={timestamp:G.timestamp,state:D,active:p},this.callback&&this.callback({device:this.inputDevices[G.index],state:D,action:!c&&p?"start":c&&p?"update":"end"})};H._validate=function(G){if(!G||!G.connected)return!1;for(let D=0;D<G.axes.length;D++)if(isNaN(G.axes[D]))return!1;
return!0};n._createClass(y,[{key:"hasEventListeners",set:function(G){this._hasEventListeners!==G&&(this._hasEventListeners=G,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(G){this.callback=G}}]);return y}();g.GamepadSource=E;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],
function(g){g.extractState=function(n){const m=n.native;return m?{buttons:m.buttons.map(k=>k.pressed?k.value?k.value:1:0),axes:m.axes.map(k=>{{var t=n.axisThreshold;const E=Math.abs(k);k=E<t?0:Math.sign(k)*(E-t)/(1-t)}return k})}:{buttons:[],axes:[]}};g.stateEqual=function(n,m){if(n.axes.length!==m.axes.length||n.buttons.length!==m.buttons.length)return!1;for(var k=0;k<n.axes.length;k++)if(n.axes[k]!==m.axes[k])return!1;for(k=0;k<n.buttons.length;k++)if(n.buttons[k]!==m.buttons[k])return!1;return!0};
g.stateIdle=function(n){for(var m=0;m<n.axes.length;m++)if(0!==n.axes[m])return!1;for(m=0;m<n.buttons.length;m++)if(0!==n.buttons[m])return!1;return!0};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(g,n,m){m=function(k){function t(){var E=k.call(this,!0)||this;E.registerIncoming("context-menu",y=>{y.data.native.preventDefault()});
return E}n._inheritsLoose(t,k);return t}(m.InputHandler);g.PreventContextMenu=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(g,n,m,k,t,E,y,H,G){y=function(D){function p(a=H.DefaultParameters.maximumDoubleClickDelay,
h=H.DefaultParameters.maximumDoubleClickDistance,d=H.DefaultParameters.maximumDoubleTouchDelay,e=H.DefaultParameters.maximumDoubleTouchDistance,q=m.clock){var A=D.call(this,!1)||this;A.maximumDoubleClickDelay=a;A.maximumDoubleClickDistance=h;A.maximumDoubleTouchDelay=d;A.maximumDoubleTouchDistance=e;A._clock=q;A._doubleTapDragReady=!1;A._doubleTapDragActive=!1;A._dragStartCenter=t.createScreenPoint(0,0);A._pointerState=new Map;A._doubleTapDrag=A.registerOutgoing("double-tap-drag");A._dragEventSeparator=
new E.DragEventSeparator({start:(f,r)=>A._dragStart(f,r),update:(f,r)=>A._dragUpdate(r),end:(f,r)=>A._dragEnd(r)});A.registerIncoming("drag",f=>A._dragEventSeparator.handle(f));A.registerIncoming("pointer-down",f=>A._handlePointerDown(f));A.registerIncoming("pointer-up",()=>A._handlePointerUp());return A}n._inheritsLoose(p,D);var c=p.prototype;c.onUninstall=function(){this._pointerState.forEach(a=>{null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};c._clearPointerDown=
function(a){const h=this._pointerState.get(a);h&&(h.doubleTapTimeout.remove(),h.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};c._createDoubleTapDragData=function(a,h,d){const {button:e,buttons:q,pointer:A,pointers:f,pointerType:r,timestamp:v}=d;return{action:a,delta:h,button:e,buttons:q,pointer:A,pointers:f,pointerType:r,timestamp:v}};c._dragStart=function(a,h){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:d,
modifiers:e}=h;({center:a}=d);this._dragStartCenter=a;a=this._createDoubleTapDragData("begin",t.createScreenPoint(0,0),d);this._doubleTapDrag.emit(a,void 0,e);h.stopPropagation()}};c._dragUpdate=function(a){if(this._doubleTapDragActive){var {data:h,modifiers:d}=a,{center:e}=h;e=t.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y);e=this._createDoubleTapDragData("update",e,h);this._doubleTapDrag.emit(e,void 0,d);a.stopPropagation()}};c._dragEnd=function(a){if(this._doubleTapDragActive){var {data:h,
modifiers:d}=a,{center:e}=h;e=t.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y);e=this._createDoubleTapDragData("end",e,h);this._doubleTapDrag.emit(e,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};c._handlePointerDown=function(a){const {data:h}=a,d=this._pointerId(h),e=this._pointerState.get(d);var {pointerType:q}=h.native;e?(q="touch"===q?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),G.manhattanDistance(e.event.data,
h)>q?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)};c._handlePointerUp=function(){this._doubleTapDragReady=!1};c._pointerId=function(a){({native:a}=a);const {pointerId:h,button:d,pointerType:e}=a;return"mouse"===e?`${h}:${d}`:`${e}`};c._storePointerDown=function(a){var {data:h}=a;const {pointerType:d}=h.native,e=this._pointerId(h);h=this._clock.setTimeout(()=>this._clearPointerDown(e),"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(e,
{event:a,doubleTapTimeout:h});this.refreshHasPendingInputs()};n._createClass(p,[{key:"hasPendingInputs",get:function(){return k.someMap(this._pointerState,a=>null!=a.doubleTapTimeout)}}]);return p}(y.InputHandler);g.DoubleTapDrag=y;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(g,n,m,k,t,E,y){const H={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};E=function(G){function D(c=H.maximumDoubleClickDelay,a=H.maximumDoubleClickDistance,h=H.maximumDoubleTouchDelay,d=H.maximumDoubleTouchDistance,e=m.clock){var q=G.call(this,!1)||this;q.maximumDoubleClickDelay=c;q.maximumDoubleClickDistance=a;q.maximumDoubleTouchDelay=h;q.maximumDoubleTouchDistance=d;q._clock=e;q._pointerState=new Map;q._click=q.registerOutgoing("click");
q._doubleClick=q.registerOutgoing("double-click");q.registerIncoming("immediate-click",q._handleImmediateClick.bind(n._assertThisInitialized(q)));q.registerIncoming("pointer-drag",q._handlePointerDrag.bind(n._assertThisInitialized(q)));q.registerIncoming("drag",q._handleDrag.bind(n._assertThisInitialized(q)));return q}n._inheritsLoose(D,G);var p=D.prototype;p.onUninstall=function(){this._pointerState.forEach(c=>c.doubleClickTimeout=t.removeMaybe(c.doubleClickTimeout))};p._pointerId=function(c){c=
c.native;return"mouse"===c.pointerType?`${c.pointerId}:${c.button}`:`${c.pointerType}`};p._handleImmediateClick=function(c){const a=c.data,h=this._pointerId(a),d=this._pointerState.get(h);if(d){const e="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;y.manhattanDistance(d.event.data,a)>e?(this._clearDoubleClickTimeout(h,!0),this._startClick(c)):(this._clearDoubleClickTimeout(h,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(c)};
p._startClick=function(c){const a=this._pointerId(c.data);this._pointerState.set(a,{event:c,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),"touch"===c.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};p._handlePointerDrag=function(c){c=this._pointerId(c.data.currentEvent);this._clearDoubleClickTimeout(c,!0)};p._handleDrag=function(c){c=this._pointerId(c.data.pointer);this._clearDoubleClickTimeout(c,
!0)};p._clearDoubleClickTimeout=function(c,a){const h=this._pointerState.get(c);h&&(h.doubleClickTimeout.remove(),h.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(c),this._pointerState.delete(c),this.refreshHasPendingInputs())};p._doubleClickTimeoutExceeded=function(c){const a=this._pointerState.get(c);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(c);this.refreshHasPendingInputs()};n._createClass(D,[{key:"hasPendingInputs",
get:function(){return k.someMap(this._pointerState,c=>null!=c.doubleClickTimeout)}}]);return D}(E.InputHandler);g.DefaultParameters=H;g.SingleAndDoubleClick=E;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(g,n){g.euclideanDistance=function(m,k){const t=k.x-m.x;m=k.y-m.y;return Math.sqrt(t*t+m*m)};g.fitCircleLSQ=function(m,k){k?(k.radius=0,k.center.x=
0,k.center.y=0):k={radius:0,center:n.createScreenPoint()};if(0===m.length)return k;if(1===m.length)return k.center.x=m[0].x,k.center.y=m[0].y,k;if(2===m.length){const [e,q]=m,[A,f]=[q.x-e.x,q.y-e.y];k.radius=Math.sqrt(A*A+f*f)/2;k.center.x=(e.x+q.x)/2;k.center.y=(e.y+q.y)/2;return k}let t=0,E=0;for(k=0;k<m.length;k++)t+=m[k].x,E+=m[k].y;t/=m.length;E/=m.length;var y=m.map(e=>e.x-t),H=m.map(e=>e.y-E);let G=k=0;var D=0,p=0,c=0,a=0,h=0;for(var d=0;d<y.length;d++){const e=y[d],q=H[d],A=e*e,f=q*q;k+=A;
G+=f;D+=e*q;p+=A*e;c+=f*q;a+=e*f;h+=q*A}y=k;H=D;d=G;p=.5*(p+a);c=.5*(c+h);h=y*d-D*H;a=(p*d-c*H)/h;c=(y*c-D*p)/h;h=n.createScreenPoint(a+t,c+E);return{radius:Math.sqrt(a*a+c*c+(k+G)/m.length),center:h}};g.manhattanDistance=function(m,k){return Math.abs(k.x-m.x)+Math.abs(k.y-m.y)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),
function(g,n,m,k,t,E){function y(p){const c=[];p.forEach(a=>{c.push(m.createScreenPoint(a.event.x,a.event.y))});return E.fitCircleLSQ(c)}function H(p){const c=y(p);let a=0;p.forEach(h=>{var d=D(h,c);for(d-=h.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=h.lastAngle+d;h.lastAngle=d;a+=d-h.initialAngle});a/=p.size||1;return{angle:a,radius:c.radius,center:c.center}}function G(p){const c=new Map;p.forEach((a,h)=>c.set(h,a.event));return c}function D(p,c){p=p.event;return Math.atan2(p.y-
c.center.y,p.x-c.center.x)}t=function(p){function c(h){var d=p.call(this,!1)||this;d.navigationTouch=h;d.startStateModifiers=new Set;d.activePointerMap=new Map;d.isDragging=!1;d.isCurrentDragSuppressed=!1;d.drag=d.registerOutgoing("drag");d.registerIncoming("pointer-drag",d._handlePointerDrag.bind(n._assertThisInitialized(d)));d.registerIncoming("pointer-up",d._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(d)));d.registerIncoming("pointer-capture-lost",d._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(d)));
d.registerIncoming("pointer-cancel",d._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(d)));return d}n._inheritsLoose(c,p);var a=c.prototype;a._createPayload=function(h,d,e,q){return{action:h,pointerType:this.pointerType,button:this.mouseButton,buttons:d.buttons,timestamp:q,pointers:G(this.activePointerMap),pointer:d,angle:e.angle,radius:e.radius,center:e.center}};a._addPointer=function(h){var d=h.native.pointerId;const e=H(this.activePointerMap).angle;h={event:h,initialAngle:0,lastAngle:0};
this.activePointerMap.set(d,h);d=D(h,y(this.activePointerMap));h.initialAngle=d;h.lastAngle=d;this._updatePointerAngles(e)};a._updatePointer=function(h){if(!h||null!=h.x||null!=h.y){var d=this.activePointerMap.get(h.native.pointerId);d?d.event=h:this._addPointer(h)}};a._removePointer=function(h){const d=H(this.activePointerMap).angle;this.activePointerMap.delete(h);this._updatePointerAngles(d)};a._updatePointerAngles=function(h){const d=H(this.activePointerMap);this.activePointerMap.forEach(e=>{e.initialAngle=
D(e,d)-h;e.lastAngle=D(e,d)-h})};a._emitEvent=function(h,d,e){const q=H(this.activePointerMap);this.drag.emit(this._createPayload(h,d,q,e),void 0,this.startStateModifiers)};a._handlePointerUpAndPointerLost=function(h){const d=h.data.native.pointerId,e=k.Milliseconds(h.timestamp);this.activePointerMap.get(d)&&(1===this.activePointerMap.size?(this._updatePointer(h.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",h.data,e),this.isCurrentDragSuppressed=this.isDragging=!1,this._removePointer(d)):
(this._removePointer(d),this._emitEvent("removed",h.data,k.Milliseconds(h.timestamp))))};a._handlePointerDrag=function(h){const d=h.data,e=d.currentEvent,q=k.Milliseconds(h.timestamp);switch(d.action){case "start":case "update":this.isDragging?this.activePointerMap.has(e.native.pointerId)?(this._updatePointer(e),!this.isCurrentDragSuppressed&&this._emitEvent("update",e,q)):(this._addPointer(e),this._emitEvent("added",e,q),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(e),this.pointerType=
h.data.startEvent.pointerType,this.mouseButton=h.data.startEvent.button,this.startStateModifiers=h.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",e,q))}};n._createClass(c,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return c}(t.InputHandler);g.Button=void 0;(function(p){p[p.Left=0]="Left";
p[p.Middle=1]="Middle";p[p.Right=2]="Right";p[p.Back=3]="Back";p[p.Forward=4]="Forward";p[p.Undefined=-1]="Undefined"})(g.Button||(g.Button={}));g.Drag=t;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(g,n,m,k,t,E){k=function(y){function H(D=t.DefaultParameters.maximumDoubleClickDelay,
p=t.DefaultParameters.maximumDoubleClickDistance,c=t.DefaultParameters.maximumDoubleTouchDelay,a=t.DefaultParameters.maximumDoubleTouchDistance,h=m.clock){var d=y.call(this,!1)||this;d.maximumDoubleClickDelay=D;d.maximumDoubleClickDistance=p;d.maximumDoubleTouchDelay=c;d.maximumDoubleTouchDistance=a;d._clock=h;d._pointerState=new Map;d._immediateDoubleClick=d.registerOutgoing("immediate-double-click");d.registerIncoming("pointer-down",d._handlePointerDown.bind(n._assertThisInitialized(d)));d.registerIncoming("pointer-up",
e=>{d._handlePointerLoss(e,"pointer-up")});d.registerIncoming("pointer-capture-lost",e=>{d._handlePointerLoss(e,"pointer-capture-lost")});d.registerIncoming("pointer-cancel",e=>{d._handlePointerLoss(e,"pointer-cancel")});return d}n._inheritsLoose(H,y);var G=H.prototype;G.onUninstall=function(){this._pointerState.forEach(D=>{D.immediateDoubleClick&&D.immediateDoubleClick.timeoutHandle.remove()});y.prototype.onUninstall.call(this)};G._handlePointerDown=function(D){D=D.data;const p=this._pointerId(D);
this._pointerState.has(p)||(this._pointerState.set(p,{downButton:D.native.button,immediateDoubleClick:null}),this.startCapturingPointer(D.native))};G._handlePointerLoss=function(D,p){const c=D.data;var a=this._pointerId(c);if((a=this._pointerState.get(a))&&"pointer-up"===p&&a.downButton===c.native.button)if(p=a.immediateDoubleClick){p.timeoutHandle.remove();const h="touch"===D.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;E.manhattanDistance(p,D.data)>h?this._startImmediateDoubleClick(D,
a):(this._immediateDoubleClick.emit(D.data,void 0,p.modifiers),this._removeState(c))}else this._startImmediateDoubleClick(D,a)};G._startImmediateDoubleClick=function(D,p){p.immediateDoubleClick={x:D.data.x,y:D.data.y,modifiers:D.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(D.data),"touch"===D.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};G._pointerId=function(D){D=D.native;return"mouse"===D.pointerType?`${D.pointerId}:${D.button}`:`${D.pointerType}`};
G._removeState=function(D){const p=this._pointerId(D);this._pointerState.delete(p);this.stopCapturingPointer(D.native);this.refreshHasPendingInputs()};return H}(k.InputHandler);g.ImmediateDoubleClick=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(g,n,m,k,t){const E=
{maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};k=function(y){function H(D=E.maximumClickDelay,p=E.movementUntilMouseDrag,c=E.movementUntilPenDrag,a=E.movementUntilTouchDrag,h=E.holdDelay,d=m.clock){var e=y.call(this,!1)||this;e.maximumClickDelay=D;e.movementUntilMouseDrag=p;e.movementUntilPenDrag=c;e.movementUntilTouchDrag=a;e.holdDelay=h;e._clock=d;e._pointerState=new Map;e._pointerDrag=e.registerOutgoing("pointer-drag");e._immediateClick=
e.registerOutgoing("immediate-click");e._pointerHold=e.registerOutgoing("hold");e.registerIncoming("pointer-down",e._handlePointerDown.bind(n._assertThisInitialized(e)));e.registerIncoming("pointer-up",q=>{e._handlePointerLoss(q,"pointer-up")});e.registerIncoming("pointer-capture-lost",q=>{e._handlePointerLoss(q,"pointer-capture-lost")});e.registerIncoming("pointer-cancel",q=>{e._handlePointerLoss(q,"pointer-cancel")});e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(n._assertThisInitialized(e)));
e._moveHandle.pause();return e}n._inheritsLoose(H,y);var G=H.prototype;G.onUninstall=function(){this._pointerState.forEach(D=>{null!=D.holdTimeout&&(D.holdTimeout.remove(),D.holdTimeout=null)});y.prototype.onUninstall.call(this)};G._handlePointerDown=function(D){const p=D.data,c=p.native.pointerId;var a=null;0===this._pointerState.size&&(a=this._clock.setTimeout(()=>{const h=this._pointerState.get(c);h&&(h.isDragging||(this._pointerHold.emit(h.previousEvent,void 0,D.modifiers),h.holdEmitted=!0),h.holdTimeout=
null)},this.holdDelay));a={startEvent:p,previousEvent:p,startTimestamp:D.timestamp,isDragging:!1,downButton:p.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(c,a);this.startCapturingPointer(p.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(D)};G._createPointerDragData=function(D,p,c){return{action:D,startEvent:p.startEvent,previousEvent:p.previousEvent,currentEvent:c}};G._handlePointerMove=function(D){const p=D.data,c=this._pointerState.get(p.native.pointerId);
if(c){if(c.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",c,p),void 0,c.modifiers);else{const a=t.euclideanDistance(p,c.startEvent),h=this._getDragThreshold(p.native.pointerType);a>h&&this._startDragging(D)}c.previousEvent=p}};G._getDragThreshold=function(D){switch(D){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};G._startDragging=function(D){const p=D.data,c=p.native.pointerId;this._pointerState.forEach(a=>
{null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null);a.isDragging||(a.modifiers=D.modifiers,a.isDragging=!0,c===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,p)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),D.timestamp))})};G._handlePointerLoss=function(D,p){const c=D.data,a=c.native.pointerId,h=this._pointerState.get(a);h&&(null!=h.holdTimeout&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
h,"pointer-up"===p?c:h.previousEvent),void 0,h.modifiers):"pointer-up"===p&&h.downButton===c.native.button&&D.timestamp-h.startTimestamp<=this.maximumClickDelay&&!h.holdEmitted&&this._immediateClick.emit(c),this._pointerState.delete(a),this.stopCapturingPointer(c.native),0===this._pointerState.size&&this._moveHandle.pause())};return H}(k.InputHandler);g.DefaultParameters=E;g.PointerClickHoldAndDrag=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(g,n,m,k,t,E,y){const H={added:[],removed:[]},G=new Set,D=new y(0,0,0,0);return function(p){function c(h){var d=p.call(this)||this;d._tiles=new Map;d._index=k.rbush(9,m("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);d.tiles=[];d.tileScheme=h;return d}g._inheritsLoose(c,p);var a=c.prototype;a.destroy=function(){this.clear()};a.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};a.has=function(h){return this._tiles.has(h)};a.get=function(h){return this._tiles.get(h)};a.boundsIntersections=function(h){return this._index.search({minX:h[0],minY:h[1],maxX:h[2],maxY:h[3]})};a.updateTiles=function(h){const d={added:[],removed:[]};for(const e of h.added)if(!this.has(e)){const q=new t.Tile(this.tileScheme,e);this._tiles.set(e,q);this._index.insert(q);d.added.push(q)}for(const e of h.removed)this.has(e)&&(h=this.get(e),this._tiles.delete(e),this._index.remove(h),
d.removed.push(h));this.tiles.length=0;this._tiles.forEach(e=>this.tiles.push(e));(d.added.length||d.removed.length)&&this.emit("update",d)};a.setViewState=function(h){if(h=this.tileScheme.getTileCoverage(h,0)){var {spans:d,lodInfo:e}=h,{level:q}=e;if(0<d.length)for(const {row:f,colFrom:r,colTo:v}of d)for(var A=r;A<=v;A++){const B=D.set(q,f,e.normalizeCol(A),e.getWorldForColumn(A)).id;G.add(B);if(!this.has(B)){const w=new t.Tile(this.tileScheme,B);this._tiles.set(B,w);this._index.insert(w);this.tiles.push(w);
H.added.push(w)}}for(q=this.tiles.length-1;0<=q;q--)A=this.tiles[q],G.has(A.id)||(this._tiles.delete(A.id),this.tiles.splice(q,1),this._index.remove(A),H.removed.push(A));(H.added.length||H.removed.length)&&this.emit("update",H);E.pool.release(h);G.clear();H.added.length=0;H.removed.length=0}};return c}(n)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(g,n){function m(d,e){if(!(this instanceof m))return new m(d,e);this._maxEntries=Math.max(4,d||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));e&&("function"===typeof e?this.toBBox=e:this._initFormat(e));this.clear()}function k(d,e){t(d,0,d.children.length,e,d)}function t(d,e,q,A,f){f||(f=a(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;f.maxY=-Infinity;for(var r;e<q;e++)r=d.children[e],E(f,d.leaf?A(r):r);return f}function E(d,e){d.minX=Math.min(d.minX,e.minX);d.minY=Math.min(d.minY,e.minY);d.maxX=Math.max(d.maxX,e.maxX);d.maxY=Math.max(d.maxY,e.maxY);return d}function y(d,e){return d.minX-e.minX}
function H(d,e){return d.minY-e.minY}function G(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function D(d){return d.maxX-d.minX+(d.maxY-d.minY)}function p(d,e){return d.minX<=e.minX&&d.minY<=e.minY&&e.maxX<=d.maxX&&e.maxY<=d.maxY}function c(d,e){return e.minX<=d.maxX&&e.minY<=d.maxY&&e.maxX>=d.minX&&e.maxY>=d.minY}function a(d){return{children:d,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function h(d,e,q,A,f){for(var r=[e,q],v;r.length;)q=r.pop(),e=r.pop(),q-e<=A||(v=
e+Math.ceil((q-e)/A/2)*A,n.quickselect(d,v,e,q,f),r.push(e,v,v,q))}m.prototype={all:function(){return this._all(this.data,[])},search:function(d){var e=this.data,q=[],A=this.toBBox;if(!c(d,e))return q;for(var f=[],r,v,B,w;e;){r=0;for(v=e.children.length;r<v;r++)B=e.children[r],w=e.leaf?A(B):B,c(d,w)&&(e.leaf?q.push(B):p(d,w)?this._all(B,q):f.push(B));e=f.pop()}return q},collides:function(d){var e=this.data,q=this.toBBox;if(!c(d,e))return!1;for(var A=[],f,r,v,B;e;){f=0;for(r=e.children.length;f<r;f++)if(v=
e.children[f],B=e.leaf?q(v):v,c(d,B)){if(e.leaf||p(d,B))return!0;A.push(v)}e=A.pop()}return!1},load:function(d){if(!d||!d.length)return this;if(d.length<this._minEntries){for(var e=0,q=d.length;e<q;e++)this.insert(d[e]);return this}d=this._build(d.slice(),0,d.length-1,0);this.data.children.length?this.data.height===d.height?this._splitRoot(this.data,d):(this.data.height<d.height&&(e=this.data,this.data=d,d=e),this._insert(d,this.data.height-d.height-1,!0)):this.data=d;return this},insert:function(d){d&&
this._insert(d,this.data.height-1);return this},clear:function(){this.data=a([]);return this},remove:function(d,e){if(!d)return this;for(var q=this.data,A=this.toBBox(d),f=[],r=[],v,B,w,u;q||f.length;){q||(q=f.pop(),B=f[f.length-1],v=r.pop(),u=!0);if(q.leaf){a:{w=d;var C=q.children,J=e;if(J){for(var S=0;S<C.length;S++)if(J(w,C[S])){w=S;break a}w=-1}else w=C.indexOf(w)}if(-1!==w){q.children.splice(w,1);f.push(q);this._condense(f);break}}u||q.leaf||!p(q,A)?B?(v++,q=B.children[v],u=!1):q=null:(f.push(q),
r.push(v),v=0,B=q,q=q.children[0])}return this},toBBox:function(d){return d},compareMinX:y,compareMinY:H,toJSON:function(){return this.data},fromJSON:function(d){this.data=d;return this},_all:function(d,e){for(var q=[];d;)d.leaf?e.push.apply(e,d.children):q.push.apply(q,d.children),d=q.pop();return e},_build:function(d,e,q,A){var f=q-e+1,r=this._maxEntries;if(f<=r){var v=a(d.slice(e,q+1));k(v,this.toBBox);return v}A||(A=Math.ceil(Math.log(f)/Math.log(r)),r=Math.ceil(f/Math.pow(r,A-1)));v=a([]);v.leaf=
!1;v.height=A;f=Math.ceil(f/r);r=f*Math.ceil(Math.sqrt(r));var B;for(h(d,e,q,r,this.compareMinX);e<=q;e+=r){var w=Math.min(e+r-1,q);h(d,e,w,f,this.compareMinY);for(B=e;B<=w;B+=f){var u=Math.min(B+f-1,w);v.children.push(this._build(d,B,u,A-1))}}k(v,this.toBBox);return v},_chooseSubtree:function(d,e,q,A){for(var f,r,v,B,w,u,C,J;;){A.push(e);if(e.leaf||A.length-1===q)break;C=J=Infinity;f=0;for(r=e.children.length;f<r;f++)v=e.children[f],w=G(v),u=(Math.max(v.maxX,d.maxX)-Math.min(v.minX,d.minX))*(Math.max(v.maxY,
d.maxY)-Math.min(v.minY,d.minY))-w,u<J?(J=u,C=w<C?w:C,B=v):u===J&&w<C&&(C=w,B=v);e=B||e.children[0]}return e},_insert:function(d,e,q){var A=this.toBBox;q=q?d:A(d);A=[];var f=this._chooseSubtree(q,this.data,e,A);f.children.push(d);for(E(f,q);0<=e;)if(A[e].children.length>this._maxEntries)this._split(A,e),e--;else break;this._adjustParentBBoxes(q,A,e)},_split:function(d,e){var q=d[e],A=q.children.length,f=this._minEntries;this._chooseSplitAxis(q,f,A);A=this._chooseSplitIndex(q,f,A);A=a(q.children.splice(A,
q.children.length-A));A.height=q.height;A.leaf=q.leaf;k(q,this.toBBox);k(A,this.toBBox);e?d[e-1].children.push(A):this._splitRoot(q,A)},_splitRoot:function(d,e){this.data=a([d,e]);this.data.height=d.height+1;this.data.leaf=!1;k(this.data,this.toBBox)},_chooseSplitIndex:function(d,e,q){var A,f;var r=f=Infinity;for(A=e;A<=q-e;A++){var v=t(d,0,A,this.toBBox);var B=t(d,A,q,this.toBBox);var w=Math.max(0,Math.min(v.maxX,B.maxX)-Math.max(v.minX,B.minX))*Math.max(0,Math.min(v.maxY,B.maxY)-Math.max(v.minY,
B.minY));v=G(v)+G(B);if(w<r){r=w;var u=A;f=v<f?v:f}else w===r&&v<f&&(f=v,u=A)}return u},_chooseSplitAxis:function(d,e,q){var A=d.leaf?this.compareMinX:y,f=d.leaf?this.compareMinY:H,r=this._allDistMargin(d,e,q,A);e=this._allDistMargin(d,e,q,f);r<e&&d.children.sort(A)},_allDistMargin:function(d,e,q,A){d.children.sort(A);A=this.toBBox;var f=t(d,0,e,A),r=t(d,q-e,q,A),v=D(f)+D(r),B;for(B=e;B<q-e;B++){var w=d.children[B];E(f,d.leaf?A(w):w);v+=D(f)}for(B=q-e-1;B>=e;B--)w=d.children[B],E(r,d.leaf?A(w):w),
v+=D(r);return v},_adjustParentBBoxes:function(d,e,q){for(;0<=q;q--)E(e[q],d)},_condense:function(d){for(var e=d.length-1,q;0<=e;e--)0===d[e].children.length?0<e?(q=d[e-1].children,q.splice(q.indexOf(d[e]),1)):this.clear():k(d[e],this.toBBox)},_initFormat:function(d){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(d[0]));this.compareMinY=new Function("a","b",e.join(d[1]));this.toBBox=new Function("a","return {minX: a"+d[0]+", minY: a"+d[1]+", maxX: a"+d[2]+", maxY: a"+d[3]+
"};")}};g.rbush=m})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var n={exports:{}};(function(m){(function(k){k=k();void 0!==k&&(m.exports=k)})(function(){function k(y,H,G,D,p){for(;D>G;){if(600<D-G){var c=D-G+1,a=H-G+1,h=Math.log(c),d=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*d*(c-d)/c)*(0>a-c/2?-1:1);k(y,H,Math.max(G,Math.floor(H-a*d/c+h)),Math.min(D,Math.floor(H+(c-a)*d/c+h)),p)}c=y[H];a=G;d=D;t(y,G,H);for(0<p(y[D],c)&&t(y,G,D);a<d;){t(y,a,d);a++;for(d--;0>p(y[a],c);)a++;for(;0<
p(y[d],c);)d--}0===p(y[G],c)?t(y,G,d):(d++,t(y,d,D));d<=H&&(G=d+1);H<=d&&(D=d-1)}}function t(y,H,G){var D=y[H];y[H]=y[G];y[G]=D}function E(y,H){return y<H?-1:y>H?1:0}return function(y,H,G,D,p){k(y,H,G||0,D||y.length-1,p||E)}})})(n);g.quickselect=n.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(g,n,m,k,t,E,y){let H=function(){function G(p,c){this.key=new y(0,0,0,0);this.bounds=t.create();this.objectIds=new Set;this.key.set(c);c=p.getLODInfoAt(this.key);this.tileInfoView=p;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=c.resolution;this.scale=c.scale;this.level=c.level}var D=G.prototype;D.createChildTiles=function(){const p=this.key.getChildKeys(),c=m.acquire();for(let a=0;a<p.length;a++)c[a]=new G(this.tileInfoView,p[a]);return c};D.getQuantizationParameters=
function(){return E.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};n._createClass(G,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return k.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return G}();g.Tile=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H,G){let D=0;k=function(p){function c(){var a=p.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}g._inheritsLoose(c,p);g._createClass(c,[{key:"version",get:function(){return D++}}]);return c}(k);n.__decorate([t.property({readOnly:!0})],k.prototype,"version",null);n.__decorate([t.property({type:m})],k.prototype,"color",void 0);n.__decorate([t.property({type:m})],k.prototype,"haloColor",void 0);n.__decorate([t.property()],k.prototype,
"haloOpacity",void 0);n.__decorate([t.property()],k.prototype,"fillOpacity",void 0);return k=n.__decorate([G.subclass("esri.views.2d.support.HighlightOptions")],k)})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(g){let n=function(){function m(){this._names=new Map}var k=m.prototype;k.begin=function(t){this._names.has(t)||(this._names.set(t,!1),t.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))};k.end=function(t){this._names.has(t)&&!this._names.get(t)&&
(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))};k.record=function(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))};return m}();g.Timeline=n;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(g,n,m,k,t,E,y,H){g.ignorePadding&&(k={left:0,right:0,top:0,bottom:0});var G;null!=g.width&&null!=g.height?G=[g.width,g.height]:null==g.width&&
null!=g.height?G=[g.height,g.height]:null!=g.width&&null==g.height?G=[g.width,g.width]:null==g.width&&null==g.height&&(G=null);var D=m[0]-(k.left+k.right);m=m[1]-(k.top+k.bottom);g=g.area||{x:0,y:0,width:D,height:m};if(G){const p=G[0]/G[1];p>D/m?(D=g.width/p,g={x:g.x,y:Math.round(g.y+(g.height-D)/2),width:g.width,height:Math.round(D)}):(D=g.height*p,g={x:Math.round(g.x+(g.width-D)/2),y:g.y,width:Math.round(D),height:g.height})}else G=[g.width,g.height];G[0]>g.width?(n=Math.min(G[0]/g.width,n),G=G[0]/
g.width/n):(n=1,G=G[0]/g.width);return{resolutionScale:n,cropArea:{x:Math.round((g.x+k.left)*n),y:Math.round((g.y+k.top)*n),width:Math.round(g.width*n),height:Math.round(g.height*n)},outputScale:G,format:t,quality:E,children:y,rotation:H}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe"],function(g,n,m,k){function t(f,r){const {format:v,quality:B,rotation:w,disableDecorations:u}=f||{};var C=p(f,r.padding);var J=r.width-
C.left-C.right;r=r.height-C.top-C.bottom;C={x:0,y:0,width:J,height:r};if(f&&f.area){null!=f.area.x&&(C.x=Math.floor(f.area.x));null!=f.area.y&&(C.y=Math.floor(f.area.y));var S=null!=f.area.width?Math.floor(f.area.width):null,T=null!=f.area.height?Math.floor(f.area.height):null;C.width=J-C.x;C.height=r-C.y;null!=S&&null!=T?(C.width=Math.min(C.width,S),C.height=Math.min(C.height,T)):null==S&&null!=T?(S=Math.min(C.width,S),C.height*=S/C.width,C.width=S):null!=S&&null==T&&(S=Math.min(C.height,T),C.width*=
S/C.height,C.height=S)}C=D(C,f);S=Math.floor(Math.max(C.x,0));T=Math.floor(Math.max(C.y,0));J={x:S,y:T,width:Math.floor(Math.min(C.width,J-S)),height:Math.floor(Math.min(C.height,r-T))};r=J.width/J.height;C=C.width/C.height;C!==r&&(C>r?(r=Math.floor(J.width/C),J={x:J.x,y:Math.floor(J.y+(J.height-r)/2),width:J.width,height:r}):(r=Math.floor(J.height*C),J={x:Math.floor(J.x+(J.width-r)/2),y:J.y,width:r,height:J.height}));const {width:P,height:X}=G(f,J);r=c(v);C=q[r];C=m.clamp(null!=B?B:C,0,100);return{format:r,
quality:C,area:J,width:P,height:X,rotation:w,disableDecorations:!!u,ignoreBackground:!(!f||!f.ignoreBackground),ignorePadding:!(!f||!f.ignorePadding)}}function E(f,r){k.isNone(a)&&(a=document.createElement("canvas"));var v=a;if(r.premultipliedAlpha){{var B=f.data;const u=B.length;for(let C=0;C<u;C+=4){var w=B[C+3];255!==w&&0<w&&(w=255/w,B[C+0]*=w,B[C+1]*=w,B[C+2]*=w)}}}v.width=f.width;v.height=f.height;B=v.getContext("2d");B.putImageData(f,0,0);r.flipY&&(B.save(),B.globalCompositeOperation="copy",
B.scale(1,-1),B.translate(0,-B.canvas.height),B.drawImage(B.canvas,0,0),B.restore());return{ctx:B,canvas:v}}function y(f,r){return f.toDataURL(e[r.format],r.quality/100)}function H(f,r,v){v||(h||(h=document.createElement("canvas"),h.width=1,h.height=1),v=h);return v.getContext("2d").createImageData(f,r)}function G(f,r){if(!f)return r;const v=f.width;f=f.height;if(null!=v&&null!=f)return{width:Math.floor(v),height:Math.floor(f)};if(null==v&&null==f)return r;r=r.width/r.height;return null==f?{width:Math.floor(v),
height:Math.floor(v/r)}:{width:Math.floor(f*r),height:Math.floor(f)}}function D(f,r){if(!r||null==r.width||null==r.height)return f;r=r.width/r.height;const v=f.width/f.height;if(v===r)return f;if(v<r)return r=Math.floor(f.height*r),f.x-=(r-f.width)/2,f.width=r,f;r=Math.floor(f.width/r);f.y-=(r-f.height)/2;f.height=r;return f}function p(f,r){return!r||f&&f.ignorePadding?A:r}function c(f){switch(f){case "png":case "jpg":case "jpeg":return f;case null:case void 0:return"png";default:return"png"}}let a=
null,h=null,d=!0;const e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},q={png:100,jpg:98,jpeg:98},A={top:0,right:0,bottom:0,left:0};g.completeUserSettings=t;g.createEmptyImageData=function(f,r,v){if(!f||!r)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(f,r)}catch(B){d=!1}return H(f,r,v)};g.encode=function(f,r,v){const {ctx:B,canvas:w}=E(f,v);f=B.getImageData(0,0,f.width,f.height);r=y(w,r);w.width=0;w.height=0;return{dataUrl:r,data:f}};g.encodeData=
function(f,r){const {ctx:v,canvas:B}=E(f,r);f=v.getImageData(0,0,f.width,f.height);B.width=0;B.height=0;return f};g.getFormatAndQuality=function(f,r){f=c(f);const v=q[f];r=m.clamp(null!=r?r:v,0,100);return{format:f,quality:r}};g.getMaximumResolutionScale=function(f,r){return r/Math.max(f[0],f[1])};g.resampleHermite=function(f,r,v,B=0,w=0,u=f.width-B,C=f.height-w,J=!1){const {data:S}=f,{width:T,height:P,data:X}=r;u/=T;C/=P;const Q=Math.ceil(u/2),O=Math.ceil(C/2);f=f.width;for(let I=0;I<P;I++)for(let l=
0;l<T;l++){const z=4*(l+(J?P-I-1:I)*T);let x=0,K=0,U=0,ba=0,ea=0,na=0;const ha=(I+.5)*C;for(let la=Math.floor(I*C);la<(I+1)*C;la++){var Z=Math.abs(ha-(la+.5))/O;const pa=(l+.5)*u;Z*=Z;for(let qa=Math.floor(l*u);qa<(l+1)*u;qa++){var L=Math.abs(pa-(qa+.5))/Q;L=Math.sqrt(Z+L*L);if(1<=L)continue;L=2*L*L*L-3*L*L+1;const M=4*(B+qa+(w+la)*f);na+=L*S[M+3];K+=L;!v&&255>S[M+3]&&(L=L*S[M+3]/255);U+=L*S[M];ba+=L*S[M+1];ea+=L*S[M+2];x+=L}}X[z]=U/x;X[z+1]=ba/x;X[z+2]=ea/x;X[z+3]=na/K}return r};g.screenshotSuperSampleSettings=
function(f,r,v){if(!r)return f;const {framebufferWidth:B,framebufferHeight:w,pixelRatio:u,region:C}=f;r=p(f,v);v=r.left+r.right;const J=r.top+r.bottom,S=B-v,T=w-J,P=Math.min(8,Math.min((2048-v)/S,(2048-J)/T));return 1.5>P?f:{...f,framebufferWidth:Math.round(S*P)+v,framebufferHeight:Math.round(T*P)+J,pixelRatio:u*P,resample:{region:{x:Math.round((C.x-r.left)*P)+r.left,y:Math.round((C.y-r.top)*P)+r.top,width:Math.round(C.width*P),height:Math.round(C.height*P)},width:B,height:w}}};g.toDataUrl=y;g.toRenderSettings=
function(f,r){const v=t(f,r),B=v.area,w=v.width/B.width,u=p(v,r.padding),C=u.left+u.right,J=u.top+u.bottom;return{framebufferWidth:Math.floor((r.width-C)*w+C),framebufferHeight:Math.floor((r.height-J)*w+J),region:{x:Math.floor(B.x*w)+u.left,y:Math.floor(B.y*w)+u.top,width:v.width,height:v.height},format:v.format,quality:v.quality,rotation:v.rotation,pixelRatio:w,layers:f&&f.layers?f.layers:[],disableDecorations:v.disableDecorations,ignoreBackground:v.ignoreBackground,ignorePadding:v.ignorePadding}};
g.wrapImageData=function(f,r,v,B){if(!r||!v)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(f,r,v)}catch(w){d=!1}r=H(r,v,B);r.data.set(f,0);return r};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/context-util"],function(g,n,m,k){g.check=function(t){const E=m.getWebGLCapabilities(t);if(!E.available)return new n("webgl:required",
"WebGL is required but not supported.");if("3d"===t&&E.majorPerformanceCaveat)return new n("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!E.supportsHighPrecisionFragment)return new n("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!E.supportsVertexShaderSamplers)return new n("webgl:vertex-shader-samplers-required",
"WebGL support for vertex shader samplers is required but not supported.");if(E.type===k.ContextType.WEBGL1){if(!E.supportsElementIndexUint)return new n("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!E.supportsStandardDerivatives)return new n("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!E.supportsInstancedArrays)return new n("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};
Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],function(g,n,m,k){function t(h){switch(h){case k.ContextType.WEBGL1:return E();case k.ContextType.WEBGL2:return y()}}function E(){if(!G){{const h=new c,d=H(k.ContextType.WEBGL1,h);m.isNone(d)||(h.supportsElementIndexUint=null!==d.getExtension("OES_element_index_uint"),h.supportsStandardDerivatives=
null!==d.getExtension("OES_standard_derivatives"),h.supportsInstancedArrays=null!==d.getExtension("ANGLE_instanced_arrays"),h.supportsTextureFloat=null!==d.getExtension("OES_texture_float"),h.supportsTextureHalfFloat=null!==d.getExtension("OES_texture_half_float"),h.supportsColorBufferFloat=null!==d.getExtension("WEBGL_color_buffer_float"),h.supportsColorBufferFloatBlend=null!==d.getExtension("EXT_float_blend"),h.supportsColorBufferHalfFloat=null!==d.getExtension("EXT_color_buffer_half_float"));G=
h}}return G}function y(){if(!D){{const h=new a,d=H(k.ContextType.WEBGL2,h);m.isNone(d)||(h.supportsColorBufferFloat=null!==d.getExtension("EXT_color_buffer_float"),h.supportsColorBufferFloatBlend=null!==d.getExtension("EXT_float_blend"),h.supportsColorBufferHalfFloat=h.supportsColorBufferFloat||null!==d.getExtension("EXT_color_buffer_half_float"));D=h}}return D}function H(h,d){const e=document.createElement("canvas");if(!e)return null;let q=k.createContext(e,h,{failIfMajorPerformanceCaveat:!0});m.isNone(q)&&
(q=k.createContext(e,h),m.isSome(q)&&(d.majorPerformanceCaveat=!0));if(m.isNone(q))return q;if(h===k.ContextType.WEBGL1){if(h=q.getParameter(q.VERSION),h=null==h?void 0:h.match(/^WebGL\s+([\d.]*)/))h=parseFloat(h[1]),d.available=.94<=h}else d.available=!0;d.maxTextureSize=q.getParameter(q.MAX_TEXTURE_SIZE);d.supportsVertexShaderSamplers=0<q.getParameter(q.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(h=q.getShaderPrecisionFormat(q.FRAGMENT_SHADER,q.HIGH_FLOAT))d.supportsHighPrecisionFragment=0<h.precision;return q}
let G,D,p=function(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},c=function(h){function d(){var e=h.apply(this,arguments)||this;e.type=k.ContextType.WEBGL1;return e}
n._inheritsLoose(d,h);return d}(p),a=function(h){function d(){var e=h.apply(this,arguments)||this;e.type=k.ContextType.WEBGL2;e.supportsElementIndexUint=!0;e.supportsStandardDerivatives=!0;e.supportsInstancedArrays=!0;e.supportsTextureFloat=!0;e.supportsTextureHalfFloat=!0;return e}n._inheritsLoose(d,h);return d}(p);g.getWebGL1Capabilities=E;g.getWebGL2Capabilities=y;g.getWebGLCapabilities=function(h){for(h=k.getContextTypes(h);1<h.length;){const d=t(h.shift());if(d.available)return d}return t(h.shift())};
g.getWebGLVersionCapabilities=t;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(g,n,m){function k(H){const G=n("esri-force-webgl");if(G===g.ContextType.WEBGL1||G===g.ContextType.WEBGL2)return[G];switch(H){case "2d":return n("mac")&&n("chrome")?[g.ContextType.WEBGL1,g.ContextType.WEBGL2]:[g.ContextType.WEBGL2,g.ContextType.WEBGL1];case "3d":return[g.ContextType.WEBGL2,
g.ContextType.WEBGL1]}}function t(H,G,D={}){if(!window.WebGLRenderingContext)return y(H,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;G=E(H,G,D);m.isNone(G)&&y(H,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return G}function E(H,G,D={}){G=G===g.ContextType.WEBGL1?["webgl",
"experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let p=null;for(const c of G){try{p=H.getContext(c,D)}catch(a){}if(p)break}return p}function y(H,G){(H=H.parentNode)&&(H.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+G+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}g.ContextType=void 0;(function(H){H[H.WEBGL1=
1]="WEBGL1";H[H.WEBGL2=2]="WEBGL2"})(g.ContextType||(g.ContextType={}));g.createContext=E;g.createContextOrErrorHTML=function(H,G,D={}){for(H=k(H);1<H.length;){const p=E(G,H.shift(),D);if(m.isSome(p))return p}return t(G,H.shift(),D)};g.getContextTypes=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(g,n,m,k,t,E,y,H){k=function(G){function D(p){p=G.call(this,p)||this;p.components=["attribution","zoom"];return p}g._inheritsLoose(D,G);return D}(H);n.__decorate([m.property()],k.prototype,"components",void 0);return k=n.__decorate([y.subclass("esri.views.ui.2d.DefaultUI2D")],k)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){k.getLogger("esri.views.ui.DefaultUI");m=function(e){function q(f){f=e.call(this,f)||this;f._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};f.components=[];return f}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){this._handles.add([t.watch(()=>this.components,this._componentsWatcher.bind(this),t.initial),t.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),t.initial)])};
A._add=function(f,r,v,B){if("string"===typeof f&&this._defaultPositionLookup[f]){if(this._find(f))return;f=this._createComponent(f)}e.prototype._add.call(this,f,r,v,B)};A._removeComponents=function(f){f.forEach(r=>{if(r=this._find(r))this.remove(r),r.destroy()})};A._updateViewAwareWidgets=function(f){this.components.forEach(r=>{(r=(r=this._find(r))&&r.widget)&&void 0!==r.view&&(r.view=f)})};A._componentsWatcher=function(f,r){this._removeComponents(r);this._addComponents(f);this._adjustPadding(f)};
A._adjustPadding=function(f){f.includes("attribution")||this._isOverridden("padding")||({top:f}=this.padding,this.padding=f)};A._addComponents=function(f){this.initialized&&f.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))};A._createComponent=function(f){const r=this._createWidget(f);if(r)return new D({id:f,node:r})};A._createWidget=function(f){if("attribution"===f)return this._createAttribution();if("compass"===f)return this._createCompass();if("navigation-toggle"===
f)return this._createNavigationToggle();if("zoom"===f)return this._createZoom()};A._createAttribution=function(){return new c({view:this.view})};A._createCompass=function(){return new a({view:this.view})};A._createNavigationToggle=function(){return new h({view:this.view})};A._createZoom=function(){return new d({view:this.view})};return q}(p);n.__decorate([E.property()],m.prototype,"components",void 0);return m=n.__decorate([G.subclass("esri.views.ui.DefaultUI")],m)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H,G){m=function(D){function p(){var a=D.apply(this,arguments)||this;a.widget=null;return a}g._inheritsLoose(p,D);var c=p.prototype;c.destroy=function(){this.widget&&this.widget.destroy();this.node=null};c.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),k.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};
g._createClass(p,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(a){const h=this._get("node");a!==h&&(a&&a.classList.add("esri-component"),h&&h.classList.remove("esri-component"),this._set("node",a))}}]);return p}(m);n.__decorate([t.property({dependsOn:[]})],m.prototype,"id",null);n.__decorate([t.property()],m.prototype,"node",null);n.__decorate([H.cast("node")],m.prototype,"castNode",null);n.__decorate([t.property({readOnly:!0})],m.prototype,
"widget",void 0);return m=n.__decorate([G.subclass("esri.views.ui.Component")],m)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h){function d(f){const r="object"===typeof f&&null!==f&&Object.getPrototypeOf(f);return null!==r&&r!==Object.prototype||!("component"in f||"index"in f||"position"in f)?null:f}function e(f,{top:r,bottom:v,left:B,right:w}){f.style.top=r;f.style.bottom=v;f.style.left=B;f.style.right=w}const q={left:0,top:0,bottom:0,right:0},A={bottom:30,top:15,right:15,left:15};k=function(f){function r(B){var w=f.call(this,B)||this;w._cornerNameToContainerLookup={};w._positionNameToContainerLookup=
{};w._components=[];w._componentToKey=new Map;w._handles=new t;w.view=null;w._applyViewPadding=()=>{const u=w.container;u&&e(u,w._toPxPosition(w._getViewPadding()))};w._applyUIPadding=()=>{const u=w._innerContainer;u&&e(u,w._toPxPosition(w.padding))};w._initContainers();return w}g._inheritsLoose(r,f);var v=r.prototype;v.initialize=function(){this._handles.add([E.watch(()=>{var B;return[null==(B=this.view)?void 0:B.padding,this.container]},this._applyViewPadding,E.initial),E.watch(()=>this.padding,
this._applyUIPadding,E.initial)])};v.destroy=function(){this.container=null;for(const B of this._components)B.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};v.castPadding=function(B){return"number"===typeof B?{bottom:B,top:B,right:B,left:B}:{...A,...B}};v.add=function(B,w){let u,C;if(Array.isArray(B))B.forEach(S=>this.add(S,w));else{var J=d(B);J&&({index:u,position:w,component:B,key:C}=J);w&&"object"===typeof w&&({index:u,key:C,position:w}=w);!B||w&&!this._isValidPosition(w)||
this._add(B,w,u,C)}};v.remove=function(B,w){if(B){if(Array.isArray(B))return B.map(J=>this.remove(J,w));var u=this._find(B);if(u){var C=this._componentToKey;if(!C.has(B)||C.get(B)===w)return C=this._components.indexOf(u),u.node.parentNode&&u.node.parentNode.removeChild(u.node),this._componentToKey.delete(B),this._components.splice(C,1)[0]}}};v.empty=function(B){if(Array.isArray(B))return B.map(w=>this.empty(w)).reduce((w,u)=>w.concat(u));B=B||"manual";return"manual"===B?Array.prototype.slice.call(this._manualContainer.children).filter(w=>
!w.classList.contains("esri-ui-corner")).map(w=>this.remove(w)):this._isValidPosition(B)?Array.prototype.slice.call(this._cornerNameToContainerLookup[B].children).map(this.remove,this):null};v.move=function(B,w){Array.isArray(B)&&B.forEach(J=>this.move(J,w));if(B){var u=d(B)||d(w);if(u){var C=u.index;w=u.position;B=u.component||B}(!w||this._isValidPosition(w))&&(B=this.remove(B))&&this.add(B,{position:w,index:C})}};v.find=function(B){return B?(B=this._findById(B))&&(B.widget||B.node):null};v.getPosition=
function(B){for(const w in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[w].contains(B))return w;return null};v._add=function(B,w,u,C){B instanceof a||(B=new a({node:B}));this._place({component:B,position:w,index:u});this._components.push(B);C&&this._componentToKey.set(B,C)};v._find=function(B){return B?B instanceof a?this._findByComponent(B):"string"===typeof B?this._findById(B):this._findByNode(B.domNode||B):null};v._getViewPadding=function(){return this.get("view.padding")||
q};v._attachContainers=function(B){B.appendChild(this._innerContainer);B.appendChild(this._manualContainer)};v._initContainers=function(){var B=document.createElement("div");B.classList.add("esri-ui-inner-container");B.classList.add("esri-ui-corner-container");const w=document.createElement("div");w.classList.add("esri-ui-inner-container");w.classList.add("esri-ui-manual-container");const u=document.createElement("div");u.classList.add("esri-ui-top-left");u.classList.add("esri-ui-corner");B.appendChild(u);
const C=document.createElement("div");C.classList.add("esri-ui-top-right");C.classList.add("esri-ui-corner");B.appendChild(C);const J=document.createElement("div");J.classList.add("esri-ui-bottom-left");J.classList.add("esri-ui-corner");B.appendChild(J);const S=document.createElement("div");S.classList.add("esri-ui-bottom-right");S.classList.add("esri-ui-corner");B.appendChild(S);this._innerContainer=B;this._manualContainer=w;B=h.isRTL();this._cornerNameToContainerLookup={"top-left":u,"top-right":C,
"bottom-left":J,"bottom-right":S,"top-leading":B?C:u,"top-trailing":B?u:C,"bottom-leading":B?S:J,"bottom-trailing":B?J:S};this._positionNameToContainerLookup={manual:w,...this._cornerNameToContainerLookup}};v._isValidPosition=function(B){return!!this._positionNameToContainerLookup[B]};v._place=function(B){const w=B.component,u=B.index;B=this._positionNameToContainerLookup[B.position||"manual"];var C=-1<u,J=w.widget;J&&!J._started&&"function"===typeof J.postMixInProperties&&"function"===typeof J.buildRendering&&
"function"===typeof J.postCreate&&"function"===typeof J.startup&&w.widget.startup();C?(C=Array.prototype.slice.call(B.children),0===u?B.firstChild?m.insertBefore(w.node,B.firstChild):B.appendChild(w.node):u>=C.length?B.appendChild(w.node):m.insertBefore(w.node,C[u])):B.appendChild(w.node)};v._toPxPosition=function(B){return{top:this._toPxUnit(B.top),left:this._toPxUnit(B.left),right:this._toPxUnit(B.right),bottom:this._toPxUnit(B.bottom)}};v._toPxUnit=function(B){return 0===B?"0":B+"px"};v._findByComponent=
function(B){let w=null,u;this._components.some(C=>{(u=C===B)&&(w=C);return u});return w};v._findById=function(B){let w=null,u;this._components.some(C=>{(u=C.id===B)&&(w=C);return u});return w};v._findByNode=function(B){let w=null,u;this._components.some(C=>{(u=C.node===B)&&(w=C);return u});return w};g._createClass(r,[{key:"container",set:function(B){const w=this._get("container");B!==w&&(B&&(B.classList.add("esri-ui"),c.setCalciteThemeClass(B),this._attachContainers(B)),w&&(w.classList.remove("esri-ui"),
e(w,{top:"",bottom:"",left:"",right:""}),m.empty(w)),this._set("container",B))}},{key:"height",get:function(){const B=this.get("view.height")||0;if(0===B)return B;const w=this._getViewPadding();return Math.max(B-(w.top+w.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(B){B?this._override("padding",B):this._clearOverride("padding")}},{key:"width",get:function(){const B=this.get("view.width")||0;if(0===B)return B;const w=this._getViewPadding();return Math.max(B-
(w.left+w.right),0)}}]);return r}(k.EventedAccessor);n.__decorate([y.property()],k.prototype,"container",null);n.__decorate([y.property()],k.prototype,"height",null);n.__decorate([y.property({value:A})],k.prototype,"padding",null);n.__decorate([D.cast("padding")],k.prototype,"castPadding",null);n.__decorate([y.property()],k.prototype,"view",void 0);n.__decorate([y.property()],k.prototype,"width",null);return k=n.__decorate([p.subclass("esri.views.ui.UI")],k)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){t=function(e){function q(f,r){var v=e.call(this,f,r)||this;v._isOpen=!1;v._attributionTextOverflowed=!1;v._prevSourceNodeHeight=0;v._resizeObserver=new ResizeObserver(B=>B.forEach(({target:w})=>v._checkSourceTextOverflow(w)));v.iconClass="esri-icon-description";v.itemDelimiter=" | ";v.label=void 0;v.messages=null;v.view=null;v.viewModel=new p;return v}g._inheritsLoose(q,e);var A=q.prototype;A.initialize=function(){this.own(m.on(()=>{var f;return null==(f=this.viewModel)?
void 0:f.items},"change",()=>this.scheduleRender()))};A.destroy=function(){var f;null==(f=this._resizeObserver)?void 0:f.disconnect()};A.render=function(){return h.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};A.renderPoweredBy=function(){return h.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",h.tsx("a",
{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};A.renderSourcesNode=function(){const f=this._isOpen,r=this._isInteractive,v=r?"0":"",{attributionText:B}=this;return h.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:f,["esri-interactive"]:r}),innerHTML:B,tabindex:v})};A._afterSourcesNodeCreate=function(f){this._prevSourceNodeHeight=f.clientWidth;
this._resizeObserver.observe(f)};A._checkSourceTextOverflow=function(f){let r=!1;const {clientHeight:v,clientWidth:B,scrollWidth:w}=f;f=w>B;const u=this._attributionTextOverflowed!==f;this._attributionTextOverflowed=f;u&&(r=!0);this._isOpen&&(f=v<this._prevSourceNodeHeight,this._prevSourceNodeHeight=v,f&&(this._isOpen=!1,r=!0));r&&this.scheduleRender()};A._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};g._createClass(q,[{key:"_isInteractive",get:function(){return this._isOpen||
this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((f,r)=>{f.includes(r.text)||f.push(r.text);return f},[]).join(this.itemDelimiter)}}]);return q}(D);n.__decorate([H.property()],t.prototype,"_isOpen",void 0);n.__decorate([H.property()],t.prototype,"_isInteractive",null);n.__decorate([H.property()],t.prototype,"_attributionTextOverflowed",void 0);n.__decorate([H.property()],t.prototype,"_prevSourceNodeHeight",void 0);n.__decorate([H.property({readOnly:!0,
dependsOn:["viewModel.items.length","itemDelimiter"]})],t.prototype,"attributionText",null);n.__decorate([H.property()],t.prototype,"iconClass",void 0);n.__decorate([H.property()],t.prototype,"itemDelimiter",void 0);n.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0);n.__decorate([H.property(),a.messageBundle("esri/widgets/Attribution/t9n/Attribution")],t.prototype,"messages",void 0);n.__decorate([k.aliasOf("viewModel.view")],t.prototype,
"view",void 0);n.__decorate([H.property({type:p})],t.prototype,"viewModel",void 0);n.__decorate([c.accessibleHandler()],t.prototype,"_toggleState",null);return t=n.__decorate([G.subclass("esri.widgets.Attribution")],t)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h,d){function e(r,v){return r&&"copyright"in r&&(!v||"function"===typeof r.originOf&&"user"===r.originOf("copyright"))}function q(r,v){return r.length!==v.length||r.some((B,w)=>B.text!==v[w].text)}function A(r,v,B){B&&v&&(r.find(w=>w.layerView===v&&w.text===B)||r.push({text:B,layerView:v}))}const f=[];m=function(r){function v(w){var u=r.call(this,w)||this;u._clear=()=>{u._fetchedAttributionData.clear();u._pendingAttributions.clear();u.handles.remove("suspension");
u.notifyChange("state")};u._pendingAttributions=new Set;u._fetchedAttributionData=new Map;u.items=new t;u.view=null;u._allLayerViewsChange=C=>{u.handles.remove("suspension");const J=u.get("view.allLayerViews");J&&u.handles.add(J.map(S=>y.watch(()=>{var T;return[S.suspended,null==(T=S.layer)?void 0:T.attributionVisible]},()=>u._updateAttributionItems())),"suspension");C&&C.removed&&C.removed.forEach(S=>{u._pendingAttributions.delete(S);u._fetchedAttributionData.delete(S)});u._updateAttributionItems()};
u.handles.add([y.on(()=>{var C;return null==(C=u.view)?void 0:C.allLayerViews},"change",C=>u._allLayerViewsChange(C),{onListenerAdd:()=>u._allLayerViewsChange(),onListenerRemove:u._clear}),y.when(()=>{var C;return!0===(null==(C=u.view)?void 0:C.stationary)},()=>u._updateAttributionItems())]);return u}g._inheritsLoose(v,r);var B=v.prototype;B.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};B._updateAttributionItems=function(){const w=
this.get("view.allLayerViews");f.length=0;w?(w.forEach(u=>{var C;if(!u.suspended&&null!=(C=u.layer)&&C.attributionVisible)if(C=u.layer,e(C,"user"))A(f,u,C.copyright);else if(C.hasAttributionData)if(this._fetchedAttributionData.has(u)){var J=this._fetchedAttributionData.get(u);J?A(f,u,this._getDynamicAttribution(J,this.view,C)):e(C)&&A(f,u,C.copyright)}else this._fetchAttributionData(u);else(J=C.get("portalItem.accessInformation"))?A(f,u,J):A(f,u,C.copyright)}),q(this.items,f)&&(this.items.removeAll(),
this.items.addMany(f)),f.length=0,this.notifyChange("state")):this._clear()};B._fetchAttributionData=function(){var w=g._asyncToGenerator(function*(u){if(!this._pendingAttributions.has(u)){this._pendingAttributions.add(u);var C=yield k.result(u.layer.fetchAttributionData());this._pendingAttributions.has(u)&&(C=C.ok?this._createContributionIndex(C.value,"bing-maps"===u.layer.type):null,this._pendingAttributions.delete(u),this._fetchedAttributionData.set(u,C));this._updateAttributionItems()}});return function(u){return w.apply(this,
arguments)}}();B._createContributionIndex=function(w,u){w=w.contributors;const C={};if(!w)return C;for(let P=0;P<w.length;P++){const X=w[P];var J=X.coverageAreas;if(!J)return;for(const Q of J){var S=Q.bbox,T=Q.zoomMin-(u&&Q.zoomMin?1:0);J=Q.zoomMax-(u&&Q.zoomMax?1:0);for(S={extent:h.geographicToWebMercator({xmin:S[1],ymin:S[0],xmax:S[3],ymax:S[2],spatialReference:d.WGS84}),attribution:X.attribution||"",score:null!=Q.score?Q.score:100,id:P};T<=J;T++)C[T]=C[T]||[],C[T].push(S)}}C.maxKey=Math.max.apply(null,
Object.keys(C));return C};B._getDynamicAttribution=function(w,u,C){const {extent:J,scale:S}=u;C=C.tileInfo.scaleToZoom(S);C=Math.min(w.maxKey,Math.round(C));if(!J||null==C||-1>=C)return"";w=w[C];const T=h.project(J.center.clone().normalize(),u.spatialReference),P={};return w?w.filter(X=>{const Q=!P[X.id]&&T&&a.extentContainsPoint(X.extent,T);Q&&(P[X.id]=!0);return Q}).sort((X,Q)=>Q.score-X.score||X.objectId-Q.objectId).map(X=>X.attribution).join(", "):""};g._createClass(v,[{key:"state",get:function(){return this.get("view.ready")?
0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return v}(E.HandleOwner);n.__decorate([H.property({readOnly:!0,type:t})],m.prototype,"items",void 0);n.__decorate([H.property({readOnly:!0})],m.prototype,"state",null);n.__decorate([H.property()],m.prototype,"view",void 0);return m=n.__decorate([c.subclass("esri.widgets.Attribution.AttributionViewModel")],m)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h){k=function(d){function e(A,f){A=d.call(this,A,f)||this;A.goToOverride=null;A.iconClass="esri-icon-locate-circled";A.label=void 0;A.messages=null;A.view=null;A.viewModel=new D;return A}g._inheritsLoose(e,d);var q=e.prototype;q.reset=function(){return this.viewModel.reset()};q.render=function(){const {orientation:A,state:f}=this.viewModel;var r="disabled"===f,v="compass"===("rotation"===f?"rotation":"compass");const B=r?-1:0;r={["esri-disabled"]:r,["esri-interactive"]:!r};
v={["esri-icon-compass"]:v,["esri-icon-dial"]:!v};const {messages:w}=this;return a.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",r),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:B,"aria-label":w.reset,title:w.reset},a.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",v),styles:this._toRotationTransform(A)}),a.tsx("span",{class:"esri-icon-font-fallback-text"},w.reset))};q._reset=function(){this.viewModel.reset()};q._toRotationTransform=
function(A){return{transform:`rotateZ(${A.z}deg)`}};return e}(G);n.__decorate([m.aliasOf("viewModel.goToOverride")],k.prototype,"goToOverride",void 0);n.__decorate([y.property()],k.prototype,"iconClass",void 0);n.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);n.__decorate([y.property(),c.messageBundle("esri/widgets/Compass/t9n/Compass")],k.prototype,"messages",void 0);n.__decorate([m.aliasOf("viewModel.view")],k.prototype,"view",void 0);
n.__decorate([y.property({type:D})],k.prototype,"viewModel",void 0);n.__decorate([p.accessibleHandler()],k.prototype,"_reset",null);return k=n.__decorate([H.subclass("esri.widgets.Compass")],k)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c){m=function(a){function h(e){e=a.call(this,e)||this;e._handles=new k;e.orientation={x:0,y:0,z:0};e.view=null;e._updateForCamera=e._updateForCamera.bind(g._assertThisInitialized(e));e._updateForRotation=e._updateForRotation.bind(g._assertThisInitialized(e));e._updateRotationWatcher=e._updateRotationWatcher.bind(g._assertThisInitialized(e));return e}g._inheritsLoose(h,a);var d=h.prototype;d.initialize=function(){this._handles.add(E.watch(()=>this.view,this._updateRotationWatcher,
E.initial))};d.destroy=function(){this._handles=t.removeMaybe(this._handles);this.view=null};d.reset=function(){if(this.get("view.ready")){var e={};"2d"===this.view.type?e.rotation=0:e.heading=0;this.callGoTo({target:e})}};d._updateForRotation=function(e){void 0!==e&&null!==e&&(this.orientation={z:e})};d._updateForCamera=function(e){e&&(this.orientation={x:0,y:0,z:-e.heading})};d._updateRotationWatcher=function(e){this._handles.removeAll();e&&this._handles.add("2d"===e.type?E.watch(()=>null==e?void 0:
e.rotation,this._updateForRotation,E.initial):E.watch(()=>null==e?void 0:e.camera,this._updateForCamera,E.initial))};g._createClass(h,[{key:"canShowNorth",get:function(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return h}(c.GoToMixin(m));n.__decorate([y.property({readOnly:!0})],m.prototype,"canShowNorth",null);n.__decorate([y.property()],
m.prototype,"orientation",void 0);n.__decorate([y.property({readOnly:!0})],m.prototype,"state",null);n.__decorate([y.property()],m.prototype,"view",void 0);return m=n.__decorate([p.subclass("esri.widgets.CompassViewModel")],m)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p,c,a,h){k=function(d){function e(A,f){A=d.call(this,A,f)||this;A.iconClass="esri-icon-pan2";A.label=void 0;A.messages=null;A.view=null;A.viewModel=new D;return A}g._inheritsLoose(e,d);var q=e.prototype;q.toggle=function(){return this.viewModel.toggle()};q.render=function(){const A="disabled"===this.get("viewModel.state");var f="pan"===this.get("viewModel.navigationMode");const r={["esri-navigation-toggle__button--active"]:f};f={["esri-navigation-toggle__button--active"]:!f};
const v=A?-1:0,B=this.messages.toggle;return a.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:A,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:v,"aria-label":B,title:B},a.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",r)},a.tsx("span",{class:"esri-icon-pan"})),a.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",f)},a.tsx("span",{class:"esri-icon-rotate"})))};q._toggle=function(){this.toggle()};g._createClass(e,[{key:"layout",set:function(A){"horizontal"!==A&&(A="vertical");this._set("layout",A)}}]);return e}(G);n.__decorate([y.property()],k.prototype,"iconClass",void 0);n.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);n.__decorate([y.property({value:"vertical"})],k.prototype,"layout",null);n.__decorate([y.property(),
c.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],k.prototype,"messages",void 0);n.__decorate([m.aliasOf("viewModel.view")],k.prototype,"view",void 0);n.__decorate([y.property({type:D})],k.prototype,"viewModel",void 0);n.__decorate([p.accessibleHandler()],k.prototype,"_toggle",null);return k=n.__decorate([H.subclass("esri.widgets.NavigationToggle")],k)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H,G,D){m=function(p){function c(h){h=p.call(this,h)||this;h._handles=new k;h.navigationMode="pan";h.view=null;return h}g._inheritsLoose(c,p);var a=c.prototype;a.initialize=function(){this._handles.add(t.when(()=>{var h;return null==(h=this.view)?void 0:h.inputManager},()=>this._setNavigationMode()))};a.destroy=function(){this._handles.destroy();this.view=this._handles=null};a.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",
this._setNavigationMode())};a._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};g._createClass(c,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return c}(m);n.__decorate([E.property({readOnly:!0})],m.prototype,"state",null);n.__decorate([E.property()],m.prototype,"navigationMode",void 0);n.__decorate([E.property()],m.prototype,"view",void 0);return m=n.__decorate([D.subclass("esri.widgets.NavigationToggleViewModel")],
m)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),function(g,n,m,k,t,E,y,H,G,D,p,c,a,h){k=function(d){function e(A,
f){A=d.call(this,A,f)||this;A.iconClass="esri-icon-zoom-in-magnifying-glass";A.label=void 0;A.messages=null;A.view=null;A.viewModel=new h;return A}g._inheritsLoose(e,d);var q=e.prototype;q.initialize=function(){this._zoomInButton=new a({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new a({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};q.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=
null};q.render=function(){const A=this.viewModel,f={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===A.state&&A.canZoomIn;this._zoomOutButton.enabled="ready"===A.state&&A.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return c.tsx("div",{class:this.classes("esri-zoom esri-widget",f)},this._zoomInButton.render(),this._zoomOutButton.render())};q.zoomIn=function(){return this.viewModel.zoomIn()};q.zoomOut=
function(){return this.viewModel.zoomOut()};g._createClass(e,[{key:"layout",set:function(A){"horizontal"!==A&&(A="vertical");this._set("layout",A)}}]);return e}(G);n.__decorate([y.property()],k.prototype,"iconClass",void 0);n.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);n.__decorate([y.property({value:"vertical"})],k.prototype,"layout",null);n.__decorate([y.property(),p.messageBundle("esri/widgets/Zoom/t9n/Zoom")],k.prototype,"messages",
void 0);n.__decorate([m.aliasOf("viewModel.view")],k.prototype,"view",void 0);n.__decorate([y.property({type:h})],k.prototype,"viewModel",void 0);return k=n.__decorate([H.subclass("esri.widgets.Zoom")],k)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(g,n,m,k,t,E,y,H,G,D,p){k=function(c){function a(){var d=c.apply(this,arguments)||this;d.enabled=!0;d.iconClass="";d.title="";return d}g._inheritsLoose(a,c);var h=a.prototype;h.render=function(){const d=this.enabled?0:-1,e={[this.iconClass]:!!this.iconClass};return D.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:d,
title:this.title},D.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",e)}),D.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};h._triggerAction=function(){this.action.call(this)};return a}(H);n.__decorate([m.property()],k.prototype,"action",void 0);n.__decorate([m.property()],k.prototype,"enabled",void 0);n.__decorate([m.property()],k.prototype,"iconClass",void 0);n.__decorate([m.property()],k.prototype,"title",void 0);n.__decorate([G.accessibleHandler()],
k.prototype,"_triggerAction",null);return k=n.__decorate([y.subclass("esri.widgets.IconButton")],k)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(g,n,m,k,t,E,
y,H,G,D,p){m=function(c){function a(d){d=c.call(this,d)||this;d.canZoomIn=!1;d.canZoomOut=!1;return d}g._inheritsLoose(a,c);var h=a.prototype;h.destroy=function(){this.view=null};h.zoomIn=function(){if(this.canZoomIn){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomIn():k.ignoreAbortErrors(d.goTo({zoomFactor:2}))}};h.zoomOut=function(){if(this.canZoomOut){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomOut():k.ignoreAbortErrors(d.goTo({zoomFactor:.5}))}};g._createClass(a,[{key:"state",
get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(d){d?"2d"===d.type?this._zoomConditions=new D({view:d}):"3d"===d.type&&(this._zoomConditions=new p({view:d})):this._zoomConditions=null;this._set("view",d)}}]);return a}(m);n.__decorate([t.property()],m.prototype,"_zoomConditions",void 0);n.__decorate([t.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m.prototype,"canZoomIn",void 0);n.__decorate([t.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],m.prototype,"canZoomOut",void 0);n.__decorate([t.property({readOnly:!0})],m.prototype,"state",null);n.__decorate([t.property()],m.prototype,"view",null);return m=n.__decorate([G.subclass("esri.widgets.Zoom.ZoomViewModel")],m)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H){m=function(G){function D(){return G.apply(this,arguments)||this}g._inheritsLoose(D,G);g._createClass(D,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const p=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMaxScale");return 0===c||p>c}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const p=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMinScale");
return 0===c||p<c}}]);return D}(m);n.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomIn",null);n.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomOut",null);n.__decorate([k.property()],m.prototype,"view",void 0);return m=n.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions2D")],m)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,n,m,k,t,E,y,H){m=function(G){function D(){return G.apply(this,arguments)||this}g._inheritsLoose(D,G);g._createClass(D,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return D}(m);n.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomIn",null);n.__decorate([k.property({readOnly:!0})],m.prototype,"canZoomOut",null);n.__decorate([k.property()],m.prototype,"view",void 0);return m=n.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions3D")],
m)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,n,m,k,t,E,y,H){var G;k=G=function(D){function p(c){c=D.call(this,c)||this;c.color=new m([0,0,0,1]);return c}g._inheritsLoose(p,D);p.prototype.clone=function(){return new G(t.clone({color:this.color}))};
return p}(k.JSONSupport);n.__decorate([E.property({type:m,json:{write:!0}})],k.prototype,"color",void 0);return k=G=n.__decorate([H.subclass("esri.webmap.background.ColorBackground")],k)})}}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(g,
n,m,k,t,E,y,H,G,D,p,c,a,h,d,e,q,A,f,r,v,B,w,u,C,J,S,T,P,X,Q,O,Z,L,I,l,z,x,K,U,ba,ea,na,ha,la,pa,qa,M,V,ca,ia,ka){function ra(){return va.apply(this,arguments)}function va(){va=n._asyncToGenerator(function*(){const [,{GraphicsView2D:Qa,GraphicContainer:Sa,LabelManager:Ea,MapViewNavigation:da,MagnifierView2D:ja,Stage:sa}]=yield Promise.all([new Promise((xa,Aa)=>g(["./2d/webglDeps"],xa,Aa)),new Promise((xa,Aa)=>g(["./2d/mapViewDeps"],xa,Aa))]);nb=Qa;Xa=Sa;eb=Ea;pb=da;vb=ja;ya=sa});return va.apply(this,
arguments)}function Ba(Qa){const Sa=Qa.getObjectId();if(Sa){var Ea,da,ja,sa;return`${null!=(Ea=null!=(da=null==(ja=Qa.layer)?void 0:ja.uid)?da:null==(sa=Qa.sourceLayer)?void 0:sa.uid)?Ea:"MapView"}/${Sa}`}return`"MapView/${Qa.uid}`}function Da(Qa,Sa,Ea,da,ja){return sa=>{if(sa instanceof k){if(sa.layer===Qa)null==ja?void 0:ja();else{var xa=Qa.allLayerViews.find(Aa=>Aa.layer===sa.layer);xa&&(null==da?void 0:da(xa))}Ea(Ba(sa))}else(xa=Qa.allLayerViews.find(Aa=>Aa.layer===sa))&&Sa(xa)}}function Ga(Qa,
Sa){if(Qa)if(D.isIterable(Qa))for(const Ea of Qa)if(D.isIterable(Ea))for(const da of Ea)Sa(da);else Sa(Ea);else Sa(Qa)}const Fa=p.getLogger("esri.views.MapView");let ya,nb,Xa,eb,pb,vb;p=function(Qa){function Sa(da){var ja=Qa.call(this,da)||this;ja._magnifierView=null;ja._stage=null;ja._resolveWhenReady=[];ja.rootLayerViews=new y({getCollections:()=>{var sa,xa;return[null==(sa=ja.basemapView)?void 0:sa.baseLayerViews,ja.layerViews,null==(xa=ja.basemapView)?void 0:xa.referenceLayerViews]},getChildrenFunction:()=>
null});ja.featuresTilingScheme=null;ja.fullOpacity=1;ja.graphicsView=null;ja.labelManager=null;ja.mapViewNavigation=null;ja.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};ja.rendering=!1;ja.supersampleScreenshotsEnabled=!1;ja.supportsGround=!1;ja._stationaryTimer=null;ja.frameTask=new Z(n._assertThisInitialized(ja));ja._pePromise=null;ja.floors=new E;ja.highlightOptions=new la;ja.inputManager=new na({view:n._assertThisInitialized(ja)});
ja.map=null;ja.resizeAlign="center";ja.spatialReferenceLocked=!1;ja.timeline=new pa.Timeline;ja.type="2d";ja.ui=new ia;ja._pixelFormat={flipY:!0,premultipliedAlpha:!0};ja.constraints=new I;ja.padding={top:0,right:0,bottom:0,left:0};ja.handles.add([h.watch(()=>ja.viewpoint,()=>{ja._lastStationaryEventTimestamp=performance.now();ja._flipStationary(160)},h.sync),ja.on("resize",sa=>ja._resizeHandler(sa)),h.watch(()=>{var sa;return null==(sa=ja.animationManager)?void 0:sa.animation},sa=>{ja.animation=
sa})]);q.initialize();return ja}n._inheritsLoose(Sa,Qa);var Ea=Sa.prototype;Ea.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Ea.goTo=function(da,ja){if(da)return this.animation&&(this.animation=null),this._createAnimation(),h.whenOnce(()=>this.ready,ja).then(()=>{const sa={animate:!0,...ja},xa=ea.create(da,this);this.animation.update(xa);this._gotoTask={};return sa.animate?
this._gotoAnimated(xa,sa):this._gotoImmediate(xa,sa)});Fa.error("#goTo()","target cannot be null or undefined")};Ea.hitTest=function(){var da=n._asyncToGenerator(function*(ja,sa){const xa=V.isSupportedScreenPointEvent(ja)?V.createScreenPointFromSupportedEvent(this,ja):ja;if(!this.ready||isNaN(xa.x)||isNaN(xa.y))return{screenPoint:xa,results:[]};let Aa=new Set,Ca=!1,Ka=null,Ua=null;null!=sa&&sa.include?Ga(sa.include,Da(this,Ia=>Aa.add(Ia),Ia=>{Ka||(Ka=new Set);Ka.add(Ia)},Ia=>Aa.add(Ia),()=>Ca=!0)):
(Ca=!0,Aa=new Set(this.allLayerViews));null!=sa&&sa.exclude&&Ga(sa.exclude,Da(this,Ia=>Aa.delete(Ia),Ia=>{Ua||(Ua=new Set);Ua.add(Ia)}));sa=this.allLayerViews.filter(Ia=>!Ia.suspended&&Aa.has(Ia)).reverse();const Ta=this.toMap(xa);ja=Ca?this.graphicsView.hitTest(Ta).map(Ia=>({type:"graphic",graphic:Ia,layer:null,mapPoint:Ta})):[];sa=yield Promise.all(sa.map(Ia=>Ia.hitTest(Ta,xa)).toArray());ja=[...ja,...sa].filter(c.isSome).flat().filter(c.isSome);Ka&&(ja=ja.filter(Ia=>!("graphic"in Ia)||!Ia.graphic||
Ka.has(Ba(Ia.graphic))));Ua&&(ja=ja.filter(Ia=>!("graphic"in Ia)||!Ia.graphic||Ua.has(Ba(Ia.graphic))));return{screenPoint:xa,results:ja}});return function(ja,sa){return da.apply(this,arguments)}}();Ea.takeScreenshot=function(){var da=n._asyncToGenerator(function*(ja){ja=this._createScreenshotPlan(ja);const sa=yield this._stage.takeScreenshot(ja);return M.encode(sa,{format:ja.format,quality:ja.quality,rotation:0,disableDecorations:!1},this._pixelFormat)});return function(ja){return da.apply(this,
arguments)}}();Ea._takeScreenshot=function(){var da=n._asyncToGenerator(function*(ja){ja=this._createScreenshotPlan(ja);ja=yield this._stage.takeScreenshot(ja);return M.encodeData(ja,this._pixelFormat)});return function(ja){return da.apply(this,arguments)}}();Ea._createScreenshotPlan=function(da){da=da||{};const ja=this.supersampleScreenshotsEnabled?Math.min(4,M.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let sa;da.layers?(sa=[],da.layers.forEach(Ca=>
{const Ka=this.allLayerViews.find(Ua=>Ua.layer.id===Ca.id);Ka&&"container"in Ka&&Ka.container&&sa.push(Ka.container)})):sa=this._stage.children;const {format:xa,quality:Aa}=M.getFormatAndQuality(da.format,da.quality);return qa(da,ja,this.size,this.padding,xa,Aa,sa,da.rotation)};Ea.toMap=function(da){if(!this.ready)return null;da=V.isSupportedScreenPointEvent(da)?V.createScreenPointFromSupportedEvent(this,da):da;const [ja,sa]=this.state.toMap([0,0],[da.x,da.y]);return new w({x:ja,y:sa,spatialReference:this.spatialReference})};
Ea.toScreen=function(da){if(!this.ready)return null;da=this._project(da,this.spatialReference);da=[da.x,da.y];this.state.toScreen(da,da);return d.createScreenPoint(da[0],da[1])};Ea.on=function(da,ja,sa,xa){return(sa=this.inputManager&&this.viewEvents.on(da,ja,sa,xa))?sa:Qa.prototype.on.call(this,da,ja)};Ea.hasEventListener=function(da){return Qa.prototype.hasEventListener.call(this,da)||this.viewEvents.hasHandler(da)};Ea.whenLayerView=function(da){return Qa.prototype.whenLayerView.call(this,da)};
Ea.graphicChanged=function(da){this.graphicsView&&this.graphicsView.graphicUpdateHandler(da)};Ea.whenReady=function(){return new Promise(da=>{this.ready?da(this):this._resolveWhenReady.push(da)})};Ea.forceDOMReadyCycle=function(){this.forceReadyCycle()};Ea.getDefaultSpatialReference=function(){var da,ja,sa;return this.map&&"initialViewProperties"in this.map&&(null==(da=this.map)?void 0:null==(ja=da.initialViewProperties)?void 0:ja.spatialReference)||(null==(sa=this.defaultsFromMap)?void 0:sa.spatialReference)||
null};Ea.hasLayerViewModule=function(da){return L.layerView2DImporter.hasLayerViewModule(da)};Ea.importLayerView=function(da){return L.layerView2DImporter.importLayerView(da)};Ea.pixelSizeAt=function(){return this.ready?this.state.resolution:(Fa.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};Ea.popupHitTest=function(da){return this.hitTest(da).then(ja=>({...ja,mapPoint:this.toMap(da)}))};Ea.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};Ea.validate=
function(){let da=ca.check(this.type);G("safari")&&9>G("safari")&&(da=new H("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:G("safari")}));return c.isSome(da)?(Fa.warn("#validate()",da.message),Promise.reject(da)):ra()};Ea._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new Q;return this.animation};Ea._cancellableGoTo=function(da,ja,sa){const xa=()=>da===this._gotoTask,Aa=
sa.then(()=>{xa()&&(this.animation=null)}).catch(Ka=>{xa()&&(this.animation=null,ja.done||(ja.stop(),this.frameTask.animationInProgress=!1));throw Ka;}),Ca=new Promise(Ka=>Ka(Aa));ja.when().catch(()=>{xa()&&Ca.cancel&&Ca.cancel()});return Ca};Ea._gotoImmediate=function(da,ja){const sa=this._gotoTask,xa=this.animation;da=da.then(Aa=>{a.throwIfAborted(ja);if(sa!==this._gotoTask)throw new H("view:goto-interrupted","Goto was interrupted");this.viewpoint=xa.target=Aa;xa.finish()});return this._cancellableGoTo(sa,
xa,da)};Ea._flipStationary=function(da){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const ja=performance.now()-this._lastStationaryEventTimestamp;160>ja&&(this._stationaryTimer=this._flipStationary(ja))},da)};Ea._getDefaultViewpoint=function(){var da,ja,sa,xa;const {constraints:Aa,initialExtent:Ca,map:Ka,padding:Ua,size:Ta}=this;if(!Aa)return null;const Ia=Ka&&"initialViewProperties"in Ka&&Ka.initialViewProperties;var cb=
this._get("zoom"),ab=this._get("scale"),lb=this._get("center"),fb=this._get("extent"),Ya=this._get("rotation"),gb=this._get("viewpoint");Aa.effectiveLODs?-1!==cb&&(ab=Aa.zoomToScale(cb)):cb=-1;let sb=null,qb=null,rb=0;cb=gb&&gb.rotation;const N=gb&&gb.targetGeometry;c.isSome(N)&&("extent"===N.type?sb=N:"point"===N.type&&(qb=N,rb=gb.scale));fb=fb||sb||(null==(da=c.unwrap(null==Ia?void 0:null==(ja=Ia.viewpoint)?void 0:ja.targetGeometry))?void 0:da.extent)||Ca;da=lb||qb||(null==fb?void 0:fb.center);
ab=ab||rb||(null==Ia?void 0:null==(sa=Ia.viewpoint)?void 0:sa.scale)||fb&&ea.extentToScale(fb,[Ta[0]-Ua.left-Ua.right,Ta[1]-Ua.top-Ua.bottom]);sa=Ya||cb||(null==Ia?void 0:null==(xa=Ia.viewpoint)?void 0:xa.rotation)||0;return da&&ab?new t({targetGeometry:da,scale:ab,rotation:sa}):null};Ea._gotoAnimated=function(da,ja){const sa=this._gotoTask,xa=this.animation;da=da.then(Aa=>{a.throwIfAborted(ja);if(sa!==this._gotoTask)throw new H("view:goto-interrupted","Goto was interrupted");xa.update(Aa);this.animationManager.animate(xa,
this.viewpoint,ja);return xa.when().then(()=>{},()=>{})});return this._cancellableGoTo(sa,xa,da)};Ea._project=function(da,ja){var sa;const xa=da&&da.targetGeometry||da;if(!ja)return da;if(!xa)return null;if(ja.imageCoordinateSystem||null!=(sa=xa.spatialReference)&&sa.imageCoordinateSystem||C.equals(ja,xa.spatialReference))return da;sa=u.project(xa,ja);if(!sa)throw new H("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:xa,spatialReference:ja});
return da&&"esri.Viewpoint"===da.declaredClass?(da.targetGeometry=sa,da):sa};Ea._resizeHandler=function(da){if(this.ready){var ja=this.state,sa=this.state.paddedViewState.viewpoint,xa=this.state.paddedViewState.size.concat();ja.size=[da.width,da.height];ea.resize(sa,sa,xa,this.state.paddedViewState.size,this.resizeAlign);sa=this.constraints.constrain(sa,null);this.state.viewpoint=sa}};Ea._startup=function(){var da;this.timeline.begin("MapView Startup");const ja=this._getDefaultViewpoint(),sa=ja.targetGeometry;
try{this._project(ja,this.spatialReference)}catch(Ca){var xa;Fa.warn(new e("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:sa.toJSON(),spatialReference:this.spatialReference,error:Ca}));ja.targetGeometry=(null==(xa=this.defaultsFromMap.extent)?void 0:xa.center)||new w({x:0,y:0,spatialReference:this.spatialReference})}null==(da=this.constraints)?void 0:da.fit(ja);this._set("state",new l({padding:this._get("padding"),
size:this.size,viewpoint:ja}));this.graphics.owner=this;const Aa=new ya(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=Aa;this._magnifierView=new vb;this._magnifierView.magnifier=this.magnifier;da=new eb({view:this});this._set("labelManager",da);da=new O({view:this});
this._set("animationManager",da);da=new pb({view:this,animationManager:da});this._set("mapViewNavigation",da);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),Aa.on("post-render",()=>this._set("rendering",Aa.renderRequested)),Aa.on("will-render",()=>this._set("rendering",Aa.renderRequested)),Aa.on("webgl-error",Ca=>this.fatalError=Ca.error),h.watch(()=>this.stationary,Ca=>Aa.stationary=Ca,h.syncAndInitial),h.watch(()=>
this.background,Ca=>{Aa.background=Ca;this._magnifierView.background=Ca},h.syncAndInitial),h.watch(()=>this.magnifier,Ca=>this._magnifierView.magnifier=Ca,h.syncAndInitial),h.watch(()=>this.renderingOptions,Ca=>Aa.renderingOptions=Ca,h.syncAndInitial),h.watch(()=>this.highlightOptions,Ca=>Aa.highlightOptions=Ca,h.syncAndInitial),h.watch(()=>this.state.id,()=>Aa.state=this.state,h.syncAndInitial)],"map-view");this._updateStageChildren();da=this._resolveWhenReady;this._resolveWhenReady=[];da.forEach(Ca=>
Ca(this));this.timeline.end("MapView Startup");this.frameTask&&this.frameTask.start();this._set("ready",!0)};Ea._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",
null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);this._set("ready",!1);const {center:[da,ja],spatialReference:sa,rotation:xa,scale:Aa}=this.state.paddedViewState,Ca=new w({x:da,y:ja,spatialReference:sa});this._set("viewpoint",null);this._set("extent",null);this._set("center",Ca);this._set("zoom",-1);
this._set("rotation",xa);this._set("scale",Aa);this._set("spatialReference",sa);this._set("state",null);this.animation=null};Ea._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(da=>{this._stage.addChild(da.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};Ea._setupSpatialReferenceDependentProperties=function(){var da=new x(J.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",
da);da=new nb({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Xa(da)});this.frameTask.graphicsView=da;this._set("graphicsView",da)};Ea._destroySpatialReferenceDependentProperties=function(){const da=this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;da.destroy();this._set("featuresTilingScheme",null)};Ea._spatialReferenceChanged=function(da){if(this.ready){this.frameTask.stop();for(var ja of this.allLayerViews)ja.processDetach();
this._destroySpatialReferenceDependentProperties();ja=this.state.paddedViewState.clone();if(c.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=ja.scale;else{var sa=ja.viewpoint.clone();sa.scale=this._scaleBeforeChangingSpatialReference;ja.viewpoint=sa}sa=ja.clone();var [xa,Aa]=ja.center,Ca=null;try{Ca=this._project(new w({x:xa,y:Aa,spatialReference:ja.spatialReference}),da)}catch(Ka){u.isLoaded()||Fa.warn(new e("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",
{center:Ca.toJSON(),spatialReference:da,error:Ka}))}Ca||(Ca=new w({x:0,y:0,spatialReference:da}));Ca=ea.centerAt(new t({targetGeometry:new w,scale:0,rotation:0}),ja.viewpoint,Ca);sa.viewpoint=Ca;try{const Ka=[ja.size[0]/2,ja.size[1]/2],Ua=[Ka[0]+20,Ka[1]],Ta=ja.toMap([0,0],Ua),{x:Ia,y:cb}=this._project(new w({x:Ta[0],y:Ta[1],spatialReference:ja.spatialReference}),da);Ta[0]=Ia;Ta[1]=cb;sa.toScreen(Ta,Ta);const ab=ea.angleBetween(Ka,Ta,Ua),lb=Math.hypot(Ta[0]-Ka[0],Ta[1]-Ka[1])/20;!Number.isFinite(lb)||
4<Math.abs(lb)?(Ca.rotation=0,Ca.targetGeometry=new w({x:0,y:0,spatialReference:da})):(Ca.scale*=lb,Ca.scale>G("mapview-srswitch-adjust-rotation-scale-threshold")?Ca.rotation=0:Ca.rotation+=Number.isFinite(ab)?ab:0)}catch{}this._get("constraints").constrain(Ca,null);this._get("state").viewpoint=Ca;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const Ka of this.allLayerViews)Ka.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};
n._createClass(Sa,[{key:"graphicsTileStore",get:function(){return new ha(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){var da;const {scale:ja,constraints:sa,center:xa,viewpoint:Aa,extent:Ca}=this;let Ka=this.zoom;if(this.map&&"initialViewProperties"in this.map&&null!=(da=this.map.initialViewProperties)&&da.viewpoint||Ca)return!1;null!=sa&&sa.effectiveLODs||(Ka=-1);return xa&&(0!==ja||-1!==Ka)||Aa&&c.isSome(Aa.targetGeometry)&&("extent"===Aa.targetGeometry.type||Aa.scale)?
!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(u.isLoaded())return!0;this._pePromise||(this._pePromise=u.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",
get:function(){var da=this._getDefaultViewpoint();if(!da)return!1;const ja=this.spatialReference;da=c.unwrap(da.targetGeometry);return u.canProjectWithoutEngine(da.spatialReference,ja)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(da){var ja=this._get("animation");da!==ja&&(ja&&ja.stop(),!da||da.isFulfilled()?this._set("animation",null):(this._set("animation",da),this.frameTask.animationInProgress=!0,ja=()=>{da===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());
this.frameTask.animationInProgress=!1},da.when(ja,ja)))}},{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(da){void 0===da?this._clearOverride("background"):this._override("background",da)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:da,spatialReference:ja}=this.state.paddedViewState;return new w({x:da[0],y:da[1],spatialReference:ja})},set:function(da){if(null!=da)if(this.ready){try{var ja=this._project(da,
this.spatialReference)}catch(sa){Fa.error(new H("mapview:invalid-center","could not project the value in the view's spatial reference",{input:da,error:sa}));return}da=this.viewpoint;ea.centerAt(da,da,ja);this.viewpoint=da}else this._set("center",da),this.notifyChange("initialExtentRequired")}},{key:"constraints",set:function(da){const ja=this._get("constraints");ja&&(this.handles.remove("map-view-constraints"),ja.destroy());this._set("constraints",da);da&&(da.view=this,this.ready&&(this.state.viewpoint=
da.fit(this.state.paddedViewState.viewpoint)),this.handles.add(h.watch(()=>da.version,()=>{this.ready&&this.state&&(this.state.viewpoint=da.fit(this.state.paddedViewState.viewpoint))},h.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(da){if(null!=da)if(da.width&&da.height)if(this.ready){try{var ja=this._project(da,this.spatialReference)}catch(sa){Fa.error(new H("mapview:invalid-extent","could not project the value in the view's spatial reference",
{error:sa}));return}da=this.viewpoint;ea.setExtent(da,da,ja,this.size,{constraints:this.constraints});this.viewpoint=da}else this._set("extent",da),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");else Fa.error(new H("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(da){this.ready?(this.state.padding=da,this._set("padding",
this.state.padding)):this._set("padding",da)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(da){if(!isNaN(da))if(this.ready){var ja=this.viewpoint;ea.rotateTo(ja,ja,da);this.viewpoint=ja}else this._set("rotation",da)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(da){if(da&&!isNaN(da))if(this.ready){var ja=this.viewpoint;
ea.scaleTo(ja,ja,da);this.viewpoint=ja}else{this._set("scale",da);this._set("zoom",-1);if(da=this._get("extent"))this._set("extent",null),this._set("center",da.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||
!0===this.graphicsView.updating||this.allLayerViews.some(da=>!da.destroyed&&!("layerViews"in da)&&!0===da.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const da=this.state.paddedViewState;return da&&da.viewpoint.clone()},set:function(da){if(null!=da)if(this.ready){var ja;try{var sa=this._project(da,this.spatialReference);!da.scale||isNaN(da.scale)?ja=new H("mapview:invalid-viewpoint",`invalid scale value of ${da.scale}`):c.isNone(da.targetGeometry)&&(ja=
new H("mapview:invalid-viewpoint","geometry not defined"))}catch(xa){ja=new H("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:xa})}ja?Fa.error(ja):(this._scaleBeforeChangingSpatialReference=null,da=new t({targetGeometry:new w,scale:0,rotation:0}),ea.copy(da,sa),this.constraints.constrain(da,this.state.paddedViewState.viewpoint),this.state.viewpoint=da,this.frameTask.requestFrame(),this._set("viewpoint",da))}else this._set("viewpoint",da),this._set("extent",
null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(da){if(null!=da)if(this.ready)if(this.constraints.effectiveLODs){var ja=this.viewpoint;ea.scaleTo(ja,ja,this.constraints.zoomToScale(da));this.viewpoint=ja;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",da);
this._set("scale",0);if(da=this._get("extent"))this._set("extent",null),this._set("center",da.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:da=>this._takeScreenshot(da)}}}]);return Sa}(S.BreakpointsOwner(T.DOMContainer(P.PopupView(X))));p.type="2d";m.__decorate([A.property({readOnly:!0})],p.prototype,"animationManager",void 0);m.__decorate([A.property({constructOnly:!0})],
p.prototype,"deactivatedWebGLExtensions",void 0);m.__decorate([A.property({constructOnly:!0})],p.prototype,"debugWebGLExtensions",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"featuresTilingScheme",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"fullOpacity",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"graphicsTileStore",null);m.__decorate([A.property()],p.prototype,"graphicsView",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"state",void 0);
m.__decorate([A.property()],p.prototype,"initialExtentRequired",null);m.__decorate([A.property()],p.prototype,"labelManager",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"resourceManager",null);m.__decorate([A.property({readOnly:!0})],p.prototype,"textureManager",null);m.__decorate([A.property({readOnly:!0})],p.prototype,"mapViewNavigation",void 0);m.__decorate([A.property({constructOnly:!0})],p.prototype,"renderCanvas",void 0);m.__decorate([A.property()],p.prototype,"renderingOptions",
void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"rendering",void 0);m.__decorate([A.property({constructOnly:!0})],p.prototype,"supersampleScreenshotsEnabled",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"supportsGround",void 0);m.__decorate([A.property()],p.prototype,"_stationaryTimer",void 0);m.__decorate([A.property()],p.prototype,"_defaultsFromMapSettings",null);m.__decorate([A.property()],p.prototype,"_pePromise",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,
"typeSpecificPreconditionsReady",null);m.__decorate([A.property()],p.prototype,"animation",null);m.__decorate([A.property({type:ka})],p.prototype,"background",null);m.__decorate([A.property({value:null,type:w,dependsOn:["state.id","ready"]})],p.prototype,"center",null);m.__decorate([A.property({type:I})],p.prototype,"constraints",null);m.__decorate([A.property({value:null,type:B,dependsOn:["state.id","ready"]})],p.prototype,"extent",null);m.__decorate([A.property()],p.prototype,"floors",void 0);m.__decorate([A.property({type:la})],
p.prototype,"highlightOptions",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"inputManager",void 0);m.__decorate([A.property()],p.prototype,"map",void 0);m.__decorate([A.property({value:{top:0,right:0,bottom:0,left:0},cast:Qa=>({top:0,right:0,bottom:0,left:0,...Qa})})],p.prototype,"padding",null);m.__decorate([A.property()],p.prototype,"resizeAlign",void 0);m.__decorate([A.property({readOnly:!0,dependsOn:["state.id"]})],p.prototype,"resolution",null);m.__decorate([A.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],p.prototype,"rotation",null);m.__decorate([A.property({value:0,type:Number,dependsOn:["state.id","ready"]})],p.prototype,"scale",null);m.__decorate([A.property({constructOnly:!0})],p.prototype,"spatialReferenceLocked",void 0);m.__decorate([A.property()],p.prototype,"stationary",null);m.__decorate([A.property({type:pa.Timeline,readOnly:!0})],p.prototype,"timeline",void 0);m.__decorate([A.property({readOnly:!0})],p.prototype,"type",void 0);m.__decorate([A.property({readOnly:!0})],
p.prototype,"updating",null);m.__decorate([A.property({value:null,type:t,dependsOn:["state.id","ready"]})],p.prototype,"viewpoint",null);m.__decorate([A.property({value:-1,dependsOn:["state.id","ready"]})],p.prototype,"zoom",null);m.__decorate([A.property({type:Boolean})],p.prototype,"navigating",null);m.__decorate([A.property({type:ia})],p.prototype,"ui",void 0);return p=m.__decorate([v.subclass("esri.views.MapView")],p)});