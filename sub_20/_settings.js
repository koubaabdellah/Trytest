//>>built
/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"arcgisonline/map/utils/supportsOffline":function(){define("dojo/Deferred dojo/promise/all dojo/_base/array esri/request arcgisonline/sharing/util arcgisonline/map/core/sameSpatialReference arcgisonline/map/core/allowsTileExport arcgisonline/map/utils/getServiceInfo".split(" "),function(K,G,w,v,r,f,c,a){function b(l){return v({url:l,content:{f:"json"},handleAs:"json",callbackParamName:"callback"})}function p(l){var h=[];l.forEach(function(e){"GroupLayer"===e.layerType?h=h.concat(p(e.layers)):
h.push(e)});return h}function q(l){var h=new K;b(esriGeowConfig.restBaseUrl+"content/items/"+l).then(function(e){e?e.error&&""!==e.error?h.reject(e.error):h.resolve(e.url):h.reject("Request error, no response")},function(e){h.reject(e)});return h}function t(l){var h,e=new K;b(l).then(function(d){d?d.error&&""!==d.error?e.reject(d.error):d.sources&&d.sources.esri&&d.sources.esri.url?(h=d.sources.esri.url,h.startsWith("http")||(h=l.substring(0,l.lastIndexOf("/")+1)+h),e.resolve(h)):e.reject("Request error, no URL"):
e.reject("Request error, no response")},function(d){e.reject(d)});return e}function m(l){var h=new K,e=[],d=w.map(l,function(g){return q(g)});d.length?G(d).then(function(g){for(var u=0;u<l.length;u++){var x=g[u];x?-1===w.indexOf(e,x)&&e.push(x):h.resolve(!1)}h.resolve(e)},function(g){h.reject(g)}):h.resolve(e);return h}function n(l){var h=new K,e=[],d=w.map(l,function(g){return t(g)});d.length?G(d).then(function(g){for(var u=0;u<l.length;u++){var x=g[u];x?-1===w.indexOf(e,x)&&e.push(x):h.resolve(!1)}h.resolve(e)},
function(g){h.reject(g)}):h.resolve(e);return h}function k(l){var h=new K,e=w.map(l,function(d){return a(d)});e.length?G(e).then(function(d){for(var g=null,u=0;u<l.length;u++){var x=l[u],y=d[u];y?(0===u&&(g=y.spatialReference,!g&&y.tileInfo&&(g=y.tileInfo.spatialReference)),y.capabilities&&-1<y.capabilities.indexOf("Sync")||y.exportTilesAllowed||r.isAgolService(x)&&c(x)?0<u&&y.singleFusedMapCache&&!f(g,y.spatialReference)&&h.resolve(!1):h.resolve(!1)):h.resolve(!1)}h.resolve(!0)},function(d){h.reject(d)}):
h.resolve(!1);return h}return function(l){var h=new K,e=[],d=[],g=[],u,x=l.baseMap.baseMapLayers.concat(l.operationalLayers||[]);l.tables&&(x=x.concat(l.tables));x=p(x);var y=(l=l.baseMap.baseMapLayers[0])&&"VectorTileLayer"===l.layerType,B=y&&l.styleUrl;w.forEach(x,function(C){u="VectorTileLayer"===C.layerType;isFeatureCollection=("Feature Collection"===C.type||!!C.featureCollectionType&&C.featureCollection)&&!C.itemId;if(!u&&!isFeatureCollection&&(!C.url||C.type||C.layers))return h.resolve(!1),
h;u?C.styleUrl?-1===w.indexOf(g,C.styleUrl)&&g.push(C.styleUrl):-1===w.indexOf(d,C.itemId)&&d.push(C.itemId):C.url&&-1===w.indexOf(e,C.url)&&e.push(C.url)});m(d).then(function(C){e=y&&!B?C.concat(e):e.concat(C);n(g).then(function(z){e=y&&B?z.concat(e):e.concat(z);k(e).then(function(D){h.resolve(D)},function(D){h.reject(D)})},function(z){h.reject(z)})},function(C){h.reject(C)});return h}})},"arcgisonline/map/core/sameSpatialReference":function(){define(["esri/lang","arcgisonline/map/utils/contains"],
function(K,G){return function(w,v){var r=[102113,102100,3857];return w&&v&&w.wkt==v.wkt&&(w.wkid==v.wkid||K.isDefined(w.latestWkid)&&w.latestWkid==v.wkid||K.isDefined(v.latestWkid)&&w.wkid==v.latestWkid||K.isDefined(w.latestWkid)&&w.latestWkid==v.latestWkid)||w&&v&&w.wkid&&v.wkid&&G(r,w.wkid)&&G(r,v.wkid)?!0:!1}})},"arcgisonline/map/core/allowsTileExport":function(){define([],function(){return function(K){for(var G=window.esriGeowConfig.agolServicesWithExportTilesAllowed||[],w=0;w<G.length;w++)if(-1<
K.indexOf("/"+G[w]+"/"))return!0;return!1}})},"arcgisonline/map/utils/getServiceInfo":function(){define("dojo/Deferred dojo/_base/array esri/request esri/geometry esri/SpatialReference arcgisonline/sharing/util".split(" "),function(K,G,w,v,r,f){function c(a){return w({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"})}return function(a){function b(n){n?n.error&&""!==n.error?t.reject(n.error):q(n):t.reject("Request error, no response")}function p(n){t.reject(n)}function q(n){var k=
n.fullExtent||n.extent;!k||k.spatialReference&&(k.spatialReference.wkid||k.spatialReference.wkt)||(n.fullExtent=null,k=n.extent=null);(window.esriGeowConfig.allSSL||"https:"==location.protocol)&&n.tileServers&&n.tileServers.length&&G.forEach(n.tileServers,function(l,h){if(f.isHostedService(l)||f.supportsHttps(l))n.tileServers[h]=l.replace("http:","https:")});t.resolve(n)}var t=new K;c(a).then(b,p);var m=setTimeout(function(){clearTimeout(m);m=null;var n=a.toLowerCase();-1===n.indexOf("/arcgis/rest/")&&
-1<n.indexOf("/arcgis/")?(a=a.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),c(a).then(b,p)):m=setTimeout(function(){clearTimeout(m);m=null;t.reject("Request timed out.")},45E3)},1E4);return t}})},"arcgisonline/pages/utils/alerts":function(){define("require exports tslib ../dijit/Alert ./dom dijit/registry".split(" "),function(K,G,w,v,r,f){function c(p,q,t){void 0===t&&(t={cssClasses:"",preventAutoDismiss:!1});a();var m=t.cssClasses,n=t.preventAutoDismiss;t=t.liveRegion;var k=
document.createElement("div");document.body.appendChild(k);return new v["default"]({type:p,text:q,cssClasses:m||"",preventAutoDismiss:!!n,liveRegion:t},k)}function a(){r["default"].forEachNode(document.querySelectorAll(".alert"),function(p){var q,t;null===(t=null===(q=f["default"].byNode(p))||void 0===q?void 0:q.destroy)||void 0===t?void 0:t.call(q)})}function b(p,q){var t=q.reduce(function(n,k){return n+"\x3cli\x3e"+k+"\x3c/li\x3e"},""),m=document.createElement("div");document.body.appendChild(m);
return new v["default"]({type:p,text:"",listHTML:"\x3cul\x3e"+t+"\x3c/ul\x3e"},m)}Object.defineProperty(G,"__esModule",{value:!0});G.showAlertList=G.clearAlerts=G.showAlert=void 0;v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);G.showAlert=c;G.clearAlerts=a;G.showAlertList=b;G["default"]={clearAlerts:a,showAlert:c,showAlertList:b}})},"arcgisonline/pages/dijit/Alert":function(){define("require exports tslib ../utils/a11y ../utils/icons ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/text!./Alert/Alert.html dojo/i18n!../../nls/arcgisonline dojo/_base/lang".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);return function(){function m(n,k){this.templateString=p["default"];this.i18n=q["default"];this.icons=r["default"];this.cssClasses="";this.preventAutoDismiss=!1}m.prototype.postMixInProperties=function(){"success"===this.type?(this.modifier="green",this.icon=r["default"]["check-circle"]["32"],
this.iconAltText=q["default"].GroupWidget.successIcon):"error"===this.type?(this.modifier="red",this.icon=r["default"]["exclamation-mark-circle"]["32"],this.iconAltText=q["default"].GroupWidget.errorIcon):"warning"===this.type?(this.modifier="yellow",this.icon=r["default"]["exclamation-mark-triangle"]["32"],this.iconAltText=q["default"].GroupWidget.warningIcon):"info"===this.type&&(this.modifier="info",this.iconAltText=this.icon="")};m.prototype.postCreate=function(){var n=this;this.inherited(arguments);
this.listHTML&&(this._listContainer.innerHTML=this.listHTML);this._addEventListeners();"success"!==this.type||this.preventAutoDismiss||this._setAlertTimer();setTimeout(function(){n.domNode&&n.domNode.classList.add("is-active")},10)};m.prototype.startup=function(){this.inherited(arguments);v["default"].postToLiveRegion(this.text,this.liveRegion)};m.prototype._addEventListeners=function(){"success"===this.type&&this.own(b["default"](this.domNode).on("mouseover",t["default"].hitch(this,this._clearAlertTimer)),
b["default"](this.domNode).on("mouseout",t["default"].hitch(this,this._setAlertTimer)));this.own(b["default"](".js-alert-close",this.domNode).on("click",t["default"].hitch(this,this._dismiss)))};m.prototype._setAlertTimer=function(){var n=this;this._timeout||(this._timeout=window.setTimeout(function(){n._dismiss()},4E3))};m.prototype._clearAlertTimer=function(){clearTimeout(this._timeout);this._timeout=null};m.prototype._dismiss=function(n){var k=this;n&&n.preventDefault();this.domNode&&this.domNode.classList.remove("is-active");
setTimeout(function(){k.destroy()},300)};m.prototype.dismiss=function(){var n=this;this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){n.destroy()},300)};return m=w.__decorate([f["default"](c["default"],a["default"])],m)}()})},"arcgisonline/pages/item/_Actions":function(){define("require exports tslib dojo/_base/lang dojo/_base/event dojo/on dojo/aspect dojo/dom-attr dojo/topic dojo/promise/all dojo/Deferred dojo/cookie dojo/json dojo/dom-class dojo/dom-construct dojo/string dojo/has esri/config esri/lang ../pageUtil ../portal/PortalItem ../utils/strings ../../esriGeowConfig ../../sharing/util ../../sharing/geow/Content ../../map/utils/getMapCookie ../../sharing/dijit/dialog/ConfirmDialog ../dijit/ChangeOwner ../dijit/MoveItem ../../sharing/dijit/dialog/DeleteWarningDlg ../../sharing/dijit/dialog/ExportDlg ../../sharing/dijit/dialog/ExtentDlg ../../sharing/dijit/dialog/GeneralDlg ../../sharing/dijit/dialog/ShareOwnershipDlg ../../sharing/utilShare ../../sharing/dijit/dialog/RateLimiting ../../sharing/dijit/dialog/LayerTimeSettings ../../sharing/dijit/dialog/UpdateItemDlg ../../sharing/dijit/dialog/PublishTileServiceDlg ../../sharing/dijit/dialog/CreateAppDlg ../organization/widgets/ProfilePopup ./widgets/AdvancedOfflineOptions/AdvancedOfflineOptions ../../sharing/dijit/dialog/AttachCodeDlg ../../sharing/dijit/dialog/OpenMapDlg ../../sharing/dijit/dialog/ManageSceneCache ../../sharing/dijit/dialog/JobStatusDlg ../../sharing/dijit/AppendData ../dijit/ReplaceLayer/ReplaceLayer ../dijit/ReplaceLayer/ReplaceSceneLayer ../../sharing/dijit/dialog/OverwriteFromCloud ../../sharing/dijit/dialog/_CreateItemUtilMixin ./widgets/_metadata ./widgets/typeOptions/mapOptions/httpsUpdate ./widgets/typeOptions/mapOptions/domainUpdate ../utils/setItemUrls ../utils/item ../utils/alerts ../utils/arrays ../utils/dom ../utils/number ../utils/verified ../utils/icons ../serviceUtil ../components/Collaborations/collab-service esri/request arcgis-components/wrappers/Share dojo/i18n!../../nls/arcgisonline ../portal/PortalUser preact ../components/ConfirmDialog ../statusUtil ../components/ImageUploadModal/ImageUploadModal ../components/UpdateViewModal".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea,Y,T,ca,M,U,da,ja,na,oa,ra,ua,wa,Ba,Da,La,Ga,xa,Ca,ta,qa){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);
e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);E=w.__importDefault(E);A=w.__importDefault(A);F=w.__importDefault(F);H=w.__importDefault(H);I=w.__importDefault(I);L=w.__importDefault(L);J=w.__importDefault(J);O=w.__importDefault(O);P=w.__importDefault(P);fa=w.__importDefault(fa);V=w.__importDefault(V);ba=w.__importDefault(ba);
ka=w.__importDefault(ka);la=w.__importDefault(la);ma=w.__importDefault(ma);ha=w.__importDefault(ha);Z=w.__importDefault(Z);W=w.__importDefault(W);Q=w.__importDefault(Q);ia=w.__importDefault(ia);R=w.__importDefault(R);S=w.__importDefault(S);N=w.__importDefault(N);X=w.__importDefault(X);aa=w.__importDefault(aa);ea=w.__importDefault(ea);Y=w.__importDefault(Y);T=w.__importDefault(T);ca=w.__importDefault(ca);M=w.__importDefault(M);U=w.__importDefault(U);da=w.__importDefault(da);ja=w.__importDefault(ja);
na=w.__importDefault(na);oa=w.__importDefault(oa);ra=w.__importDefault(ra);ua=w.__importDefault(ua);wa=w.__importDefault(wa);Da=w.__importDefault(Da);La=w.__importDefault(La);xa=w.__importDefault(xa);Ca=w.__importDefault(Ca);ta=w.__importDefault(ta);qa=w.__importDefault(qa);return function(za){function va(){return null!==za&&za.apply(this,arguments)||this}w.__extends(va,za);va.openDefault=function(pa){var sa,ya=pa.evt,Ha=pa.item,Ea=null===(sa=null===Ha||void 0===Ha?void 0:Ha.openIn)||void 0===sa?
void 0:sa[0],Aa="Operation View"===Ha.type||"Dashboard"===Ha.type;sa="appViewer"===Ea||"StoryMap"===Ha.type;var Fa="mapViewer"===Ea,Ka="notebookViewer"===Ea,Ia=U["default"].includes(Ha.types,"is-desktop")||U["default"].includes(Ha.types,"is-desktopPro"),Oa=U["default"].includes(Ha.types,"is-pro"),Ja=Ha.types.some(function(Na){return-1<["is-download","is-pdf","is-file"].indexOf(Na)}),Ma=U["default"].includes(Ha.types,"is-downloadImage");(Ea=Aa?null:document.querySelector(".js-open-"+(sa?"url":Ea)))?
(ya=a["default"].get(Ea,"href"),sa?window.open(ya):Fa?this.newMapViewer(pa):window.location.href=ya):Ka?window.open(Ha.notebookViewerUrl,"_blank").focus():Ia?this.openDesktop(pa):Oa?this.openPro(pa):Ja?this.download(pa):Ma?this.downloadImage(pa):Aa?(Ea=Array.prototype.slice.call(document.querySelectorAll(".js-open-btn")).filter(function(Na){return 0!==(null===Na||void 0===Na?void 0:Na.offsetHeight)}).shift(),ya=Ea.getAttribute("href"),"Dashboard"===Ha.type?window.open(ya):window.location.href=ya):
r["default"].stop(ya)};va.exportData=function(pa){var sa=pa.evt,ya=pa.item,Ha=new H["default"],Ea=pa.layerId||a["default"].get(sa.currentTarget,"data-layerId");pa=pa.layer||(d["default"].isDefined(Ea)?g["default"].findLayer(Ea,ya.layers):ya.layers);Ha.show(ya,pa,a["default"].get(sa.target,"data-type"));f["default"](Ha,"done",function(Aa){Ha.hide().then(function(){window.location.href="item.html?id\x3d"+Aa.itemId})})};va.exportImagery=function(pa){var sa=pa.item,ya=sa.portal||{},Ha=this._getAvailableCredits(ya),
Ea=ya.isPortal?null:new q["default"];if(!ya.isPortal){ya=ra["default"].fetchExportImageryCredits(sa);var Aa=ya.canceller;ya.dfd.then(function(Ka){var Ia=Ka.outputValue;Ka.success&&Ia.credits?(Ka=l["default"].substitute(Da["default"].exportDlg.costForTilePackage,{credits:ja["default"].format(Ia.credits),availableCredits:ja["default"].format(Ha)}),Ea.resolve({success:Ha>=Ia.credits,code:1,message:Ka})):Ea.reject(Da["default"].errorWidget.defaultError);return null},function(){return Ea.reject(Da["default"].errorWidget.defaultError)})}var Fa=
new H["default"];Fa.show(sa,sa.layers,a["default"].get(pa.evt.target,"data-type"),{waitForCredits:Ea,canceller:Aa});f["default"](Fa,"done",function(Ka){Fa.hide().then(function(){window.location.href="item.html?id\x3d"+Ka.itemId})})};va.appendData=function(pa){var sa=pa.evt,ya=pa.page,Ha=pa.item;pa=d["default"].isDefined(pa.layerId)?pa.layerId:a["default"].get(sa.currentTarget,"data-layerId");pa=d["default"].isDefined(pa)?g["default"].findLayer(pa,Ha.layers):null;var Ea=(new ia["default"]({item:Ha,
layer:pa,layers:pa?[pa]:Ha.layers})).show();f["default"](Ea,"hide",function(Aa){ya._showDataLastUpdated(Ha);Ea.destroyRecursive()})};va.overwriteFromCloud=function(pa){var sa=pa.page.portal,ya=pa.item,Ha=new N["default"];X["default"].getCloudProviderItemResource(ya).then(function(Ea){Ha.startup(sa,Ea,ya);Ha.showModal()},this._showError);f["default"](Ha,"hide",function(Ea){Ha.destroyRecursive()})};va.download=function(pa){pa=pa.item;B["default"]._fetchItemData(pa,this.getItemDataUrl(pa))};va.openDesktop=
function(pa){var sa=pa.evt,ya=pa.item,Ha=ya.portal||{};sa=sa&&a["default"].get(sa.target,"data-type")||"arcmap";var Ea=ya.url||"",Aa="Map Service"===ya.type,Fa="Image Service"===ya.type,Ka=B["default"].onAGOLFederatedServer(Ea)||B["default"].onFederatedServer(Ea),Ia=-1!==Ea.indexOf(".arcgis.com/")&&-1!==Ea.indexOf("//landscape"),Oa=ya.openPkg,Ja=ya.openData;Ea=ya.openLyr;"pro"===sa?this.openPro(pa):(Ha.isPortal||!Aa&&!Fa||ya.isHostedService||ya.isServiceProxy||Ka||Ia||(Ea=!0),pa=Oa?this._getItemPkgPath(ya):
Ja?this.getItemDataUrl(ya):Ea?this._getLyrPath(ya):this._getPItemPath(ya),Ea?B["default"].openPageAndCount(ya.id,pa):B["default"]._fetchItemData(ya,pa))};va.openPro=function(pa){pa=pa.item;var sa=this._getPItemXPath(pa);pa.openLyr?B["default"].openPageAndCount(pa.id,sa):B["default"]._fetchItemData(pa,sa)};va.share=function(pa,sa){var ya,Ha,Ea,Aa,Fa=pa.items||(pa.item?[pa.item]:[]),Ka=pa.item||Fa[0]||{},Ia=document.createElement("div");Ia.classList.add("share-item-wrapper");document.body.appendChild(Ia);
var Oa=pa.telemetryWorkflow,Ja=pa.user.portal||(null===(ya=pa.page)||void 0===ya?void 0:ya.portal),Ma=pa.user||(null===(Ha=pa.page)||void 0===Ha?void 0:Ha.portalUser),Na=Fa.length,Pa=window.location.href,Qa=-1<Pa.indexOf("item.html")?"item":"content",Ra=pa.telemetry||(null===(Ea=pa.page)||void 0===Ea?void 0:Ea.telemetry);!Oa&&Ra&&(Oa=Ra.startWorkflow("share",{details:Ka.access,pageUrl:Pa,pageName:Qa,count:Na}));var Sa=function(){var Xa;document.documentElement.classList.remove("overflow-hidden");
Ia.parentElement.removeChild(Ia);null===(Xa=null===sa||void 0===sa?void 0:sa.target)||void 0===Xa?void 0:Xa.focus()};document.documentElement.classList.add("overflow-hidden");var Ta=new q["default"];Ja.canHavePartnerCollab()?ua["default"].getCollaborations().then(function(Xa){var Ua;Xa=(null===(Ua=null===Xa||void 0===Xa?void 0:Xa.trustedOrgs)||void 0===Ua?void 0:Ua.filter(function(Va){return-1<Va.from.established&&-1<Va.to.established}))||[];Ta.resolve(Xa)}):Ta.resolve([]);Ta.then(function(Xa){new Ba.ShareWrapper(Ia,
{apiVersion:3,portal:Ja,portalUser:Ma,request:wa["default"],initialState:{resources:{items:Fa},utilities:{onCancel:function(){Oa&&Ra&&Ra.cancelWorkflow("share",{pageName:Qa,pageUrl:Pa});Sa()},onComplete:function(Ua){var Va,ab=0<(null===(Va=null===Ua||void 0===Ua?void 0:Ua.errors)||void 0===Va?void 0:Va.length)&&Ua.errors[0];if(Oa){Va={pageName:Qa,pageUrl:Pa,count:Na,details:void 0,error:void 0};if(Ua.selectedOptions){var Ya=Ua.selectedOptions,$a=Object.keys(Ua.selectedOptions).filter(function(bb){return"total"!==
bb}).reduce(function(bb,Wa){if(!bb||Ya[Wa]>Ya[bb])bb=Wa;return bb},null);Va.details=Ya[$a]===Ya.total?$a:"mixed"}ab&&ab.notSharedWith&&(Va.error=ab.notSharedWith);Ra&&Ra.endWorkflow("share",Va)}Sa();ab?M["default"].showAlert("error",ab.error.message):1===Fa.length?M["default"].showAlert("success",l["default"].substitute(Da["default"].sharingDlg.itemUpdated,[Fa[0].title])):M["default"].showAlert("success",l["default"].substitute(Da["default"].sharingDlg.itemsUpdated,[Fa[0].title,Fa.length-1]));var cb=
Fa.reduce(function(bb,Wa){var db;return w.__assign(w.__assign({},bb),(db={},db[Wa.id]=!0,db))},{}),Za=Fa[0].portal;Ua=(Ua&&Ua.dependentItems||[]).filter(function(bb){return!cb[bb.id]}).map(function(bb){return new u["default"](v["default"].mixin(bb,{portal:Za}))});Fa=Fa.concat(Ua);p["default"](Fa.map(v["default"].hitch(g["default"],"getItemSharing"))).then(function(bb){Fa.forEach(function(Wa,db){Aa=bb[db];var fb=(Aa.groups||[]).map(function(eb){return{id:eb.id,thumbnail:eb.thumbnail,title:eb.title}});
v["default"].mixin(Wa,{access:(null===Aa||void 0===Aa?void 0:Aa.access)||Wa.access,sharing:Aa,groupData:fb,sharedGroups:Aa.total||0});Wa.contentStatus=ca["default"].getContentStatus(Wa)});return p["default"](Fa.map(na["default"].getVerifiedInfo))}).then(function(bb){bb.forEach(function(Wa,db){Fa[db].verified=Wa});Fa.forEach(function(Wa){var db="public"===Wa.access,fb=Wa.types||[];fb=U["default"].concatUnique(fb,db?["is-public"]:["is-not-public"]);fb=U["default"].filterOut(fb,db?["is-not-public"]:
["is-public"]);Wa.types=fb.concat();Wa.set("sharing",Wa.sharing)});b["default"].publish("view/updateShare",Fa);b["default"].publish("view/deselectAll",{})})}},config:{groupsPerPage:100,hasTrustedOrgs:0<Xa.length}}})})};va.shareOwnership=function(pa){pa.portal.getPortalUser().getGroups().then(function(sa){var ya=pa.item||{},Ha=pa.items||[ya],Ea=ya.type,Aa=new D["default"]({"class":"sharedOwnershipDlg",title:Da["default"].sharingDlg.sharedOwnershipTitle,buttonOk:Da["default"].common.ok,buttonCancel:Da["default"].common.cancel,
style:{height:"auto"}}),Fa=new J["default"]({value:{items:Ha,groups:sa}}),Ka;Aa.setContent(Fa.domNode);Fa.startup().then(function(){Aa.show()});var Ia=b["default"].subscribe("/dlg/onOk",function(){Fa.validate().then(function(){Fa.shareWithSelectedGroup().then(function(){p["default"](Ha.map(v["default"].hitch(g["default"],"getItemSharing"))).then(function(Ja){Ha.forEach(function(Ma,Na){Ka=Ja[Na];v["default"].mixin(Ma,{access:(null===Ka||void 0===Ka?void 0:Ka.access)||Ma.access,sharing:Ka})});Ha[0].set("sharing",
Ha[0].sharing);b["default"].publish("view/deselectAll",{});pa.item&&("Web Map"===Ea||"Web Scene"===Ea?(e["default"].defaults.io.errorHandler=function(){},O["default"].checkWebMapContent({webMapId:ya.id,webMapItemCard:ya,webMapConfig:ya.itemData,confirmItemControl:!0})):"Web Mapping Application"===Ea&&O["default"].checkWebAppContent({webAppId:ya.id,webAppItemCard:ya,confirmItemControl:!0}))});Aa.hide().then(function(){Oa.remove();Ia.remove()})},function(Ja){Ja&&Ja.messageCode&&"GWM_0021"===Ja.messageCode&&
pa.page._showError(Ja)})})});var Oa=b["default"].subscribe("/dlg/onCancel",function(){Oa.remove();Ia.remove()})})};va.rateLimiting=function(pa){(new P["default"]({item:pa.item,user:pa.user})).showModal()};va.timeSettings=function(pa){var sa=pa.item,ya=pa.evt,Ha=pa.user;pa=pa.layerId||a["default"].get(ya.target,"data-layerId");pa=g["default"].findLayer(pa,sa.layers);(new fa["default"]({item:sa,layer:pa,user:Ha})).showModal()};va.toggleFavorite=function(pa){var sa=pa.item,ya=pa.item.isFavorite;pa=pa.evt;
var Ha=new q["default"];r["default"].stop(pa);C["default"][ya?"removeFromFavorites":"addToFavorites"](sa).then(function(Ea){var Aa,Fa;(null===(Aa=null===Ea||void 0===Ea?void 0:Ea.notSharedWith)||void 0===Aa?0:Aa.length)||(null===(Fa=null===Ea||void 0===Ea?void 0:Ea.notUnsharedFrom)||void 0===Fa?0:Fa.length)?Ha.reject({message:Da["default"].itemProperties.error.cantShareFavorites}):(sa.set("isFavorite",!ya),Ha.resolve(sa.isFavorite))},function(Ea){Ha.reject("item not provisioned"===(null===Ea||void 0===
Ea?void 0:Ea.message)?{message:Da["default"].itemProperties.error.noShareListedItem}:Ea)});return Ha};va.updateData=function(pa){var sa=pa.item,ya=a["default"].get(pa.evt.target,"data-type"),Ha=sa.thumbnail&&-1===sa.thumbnail.indexOf("thumbnail/ago_downloaded.")&&-1===sa.thumbnail.indexOf("thumbnail/thumbnail.");if("append"===ya)return this.appendData(pa);if("overwriteFromCloud"===ya)return this.overwriteFromCloud(pa);var Ea=new V["default"];Ea.show(sa);var Aa=b["default"].subscribe("itemData/update",
function(){Aa.remove();"Vector Tile Service"!==sa.type||Ha?Ea.hide():(sa.set({thumbnail:"",thumbnailUrl:""}),sa.getThumbnail(!0).then(function(Fa){Ea.hide()},function(){Ea.hide()}))});f["default"].once(Ea._updateItemDialog,"hide",function(){Ea._updateItemDialog.destroyRecursive();Ea.destroy()})};va.publishService=function(pa,sa,ya){void 0===sa&&(sa="file");var Ha=pa.item,Ea=pa.user;pa=pa.page;var Aa=k["default"].create("div",null,document.body,"last"),Fa=Ea;Ha.owner!==Ea.username&&(Fa=new La["default"](Ha.itemOwner));
sa=da["default"].createElement("arcgis-new-item",{isActive:!0,portal:Ha.portal,user:Fa,existingItem:Ha,config:y["default"],api:3,telemetry:pa.telemetry,existingItemType:sa,existingItemPublishType:ya},Aa);sa.addEventListener("workflowCancel",function(){b["default"].publish("folders/refresh",{forcedDelay:1E3});k["default"].destroy(Aa)});sa.addEventListener("workflowComplete",function(Ka){var Ia=Ka.detail;Ka=Ia.id;var Oa=Ia.response,Ja=Ia.jobId,Ma=Ia.serviceType,Na=Ia.item;Ia=Ia.newItemMode;if(null===
Oa||void 0===Oa?0:Oa.success)if(k["default"].destroy(Aa),Oa=Ja?"\x26jobid\x3d"+Ja:"",Ja="Map Service"===Ma?Na.tileAutoCreation?"#overview/manageTiles":"#settings/manageTiles":"","tileLayer"===Ia)window.location.href="item.html?id\x3d"+Ka+Oa+Ja;else switch(null===Na||void 0===Na?void 0:Na.type){case "Tile Package":window.location.href="item.html?id\x3d"+Ka+Oa+(Ma?"#settings/buildCache":"");break;case "Service Definition":window.location.href="item.html?id\x3d"+Ka+Oa+("Map Service"===Ma?"#settings/manageTiles":
"");break;default:window.location.href="item.html?id\x3d"+Ka+Oa}})};va.publishTiles=function(pa){var sa=this,ya=pa.item,Ha=pa.user,Ea=pa.layer,Aa=ya&&ya.itemOwner&&ya.itemOwner.folders,Fa=a["default"].get(pa.evt.target,"data-type"),Ka=this._getPublishingTypeMessage(ya,Fa);this._getPublishingCostMessage(ya,Fa).then(function(Ia){Ka=Ia&&Ia.message||Ka;if(!Ia||Ia.availableCredits>=Ia.totalCost)if("features"===Fa){var Oa=document.createElement("div"),Ja=function(Ma){Ga.render(Ga.h(qa["default"],{title:Da["default"].itemProperties.publishViewLayer,
active:Ma,itemId:ya.id,onClose:function(){Ja(!1)}}),Oa)};Ja(!0)}else["vectorTiles","tiles"].includes(Fa)?sa.publishService(pa,"tileLayer",Fa):(new ba["default"]({portal:ya.portal,folders:Aa,portalUser:Ha,message:Ka,item:ya,showFolders:!0,type:Fa||"tiles",serviceLayers:Ea?[Ea]:null,sublayer:Ea})).showModal().then(function(Ma){var Na=null===Ma||void 0===Ma?void 0:Ma.id;Ma=!(null===Ma||void 0===Ma||!Ma.cacheOnDemand);Na&&(window.location.href="item.html?id\x3d"+Na+("tiles"===Fa?Ma?"":"#settings/manageTiles":
"scenes"===Fa?"#settings/buildCache":""))});else sa._showError({title:Da["default"].publishTileServiceDlg.notEnoughCreditsTitle,message:Ka})})};va.publishImagery=function(pa){var sa=this,ya=pa.item,Ha=pa.user,Ea=pa.layer,Aa=ya&&ya.itemOwner&&ya.itemOwner.folders,Fa=a["default"].get(pa.evt.target,"data-type"),Ka=this._getImageServiceTypeMessage(Fa);this._getPublishingCostMessage(ya,Fa).then(function(Ia){Ka=Ia&&Ia.message||Ka;!Ia||Ia.availableCredits>=Ia.totalCost?(new ba["default"]({portal:ya.portal,
folders:Aa,portalUser:Ha,message:Ka,item:ya,showFolders:!0,type:Fa,serviceLayers:Ea?[Ea]:null,sublayer:Ea})).showModal().then(function(Oa){if(Oa=null===Oa||void 0===Oa?void 0:Oa.id)window.location.href="item.html?id\x3d"+Oa}):sa._showError({title:Da["default"].publishTileServiceDlg.notEnoughCreditsTitle,message:Ka})})};va._getImageServiceTypeMessage=function(pa){return"dynamicImagery"===pa?Da["default"].publishImageServiceDlg.dynamicImageryLayerDesc:Da["default"].publishImageServiceDlg.tileImageryLayerDesc};
va._getPublishingTypeMessage=function(pa,sa){switch(sa){case "wfs":var ya="wfsServiceDetailsDesc";break;case "ogcfeatures":ya="ogcFeatureServiceDetailsDesc";break;case "scenes":ya="sceneServiceDetailsDesc";break;case "features":ya="viewServiceDetailsDesc";break;case "vectorTiles":ya="vectorServiceDetailsDesc";break;default:ya="serviceDetailsDesc"}return Da["default"].publishTileServiceDlg[ya]};va._getAvailableCredits=function(pa){var sa,ya;return(null===(sa=pa.user)||void 0===sa?void 0:sa.availableCredits)||
(null===(ya=pa.subscriptionInfo)||void 0===ya?void 0:ya.availableCredits)||0};va._getPublishingCostMessage=function(pa,sa){var ya=new q["default"];if("scenes"!==sa)ya.resolve(null);else{var Ha=Da["default"].publishTileServiceDlg.sceneServiceDetailsDescCost,Ea=this._getAvailableCredits(pa.portal||{});ra["default"].fetchScenePublishingCredits(pa,pa.layers||[]).then(function(Aa){Ha=l["default"].substitute(Da["default"].publishTileServiceDlg.createLayerCost,{credits:ja["default"].format(Aa),availableCredits:ja["default"].format(Ea)});
Ha=Ea>=Aa?l["default"].substitute(Da["default"].publishTileServiceDlg.sceneServiceDetailsDescCost,{createLayerCost:Ha}):Ha;ya.resolve({totalCost:Aa,availableCredits:Ea,message:Ha})})}return ya};va.moveItem=function(pa){var sa,ya=pa.page.portal,Ha=pa.portalUser||(null===(sa=pa.item)||void 0===sa?void 0:sa.itemOwner)||ya.getPortalUser(),Ea=pa.currentFolder&&pa.currentFolder.id||pa.item&&pa.item.folderId||Ha.username,Aa=pa.selectedItems||[pa.item];pa=new A["default"]({items:Aa,owner:Ha,portal:ya,currentFolder:Ea});
pa.open();pa.on("close",function(Fa){b["default"].publish("folders/refresh");if(Fa){var Ka=Fa.newFolder;Fa=Fa.error;if(Ka&&!Fa)if(b["default"].publish("items/itemDetailRefresh",Ka),Ea&&"all"!==Ea){Aa.forEach(function(Ma){v["default"].mixin(Ma,{folder:Ka,folderId:Ka.id,ownerFolder:Ka.id})});b["default"].publish("items/refresh",{removedItems:Aa});var Ia=b["default"].subscribe("items/refreshComplete",function(){b["default"].publish("view/deselectAll");Ia.remove();b["default"].publish("folders/refreshAndSelect");
b["default"].publish("aggregations/refresh")})}else b["default"].publish("view/deselectAll",{}),b["default"].publish("aggregations/refresh");else if(Fa){var Oa=null===Fa||void 0===Fa?void 0:Fa.movedItems;if((null===Oa||void 0===Oa?0:Oa.length)&&Ea&&"all"!==Ea){b["default"].publish("items/refresh",{removedItems:null===Fa||void 0===Fa?void 0:Fa.movedItems});var Ja=b["default"].subscribe("items/refreshComplete",function(){Ja.remove();b["default"].publish("aggregations/refresh")})}}}})};va.openLayerMetadata=
function(pa){var sa,ya,Ha=pa.item,Ea=pa.evt,Aa=null!==(sa=pa.page)&&void 0!==sa?sa:null===(ya=null===pa||void 0===pa?void 0:pa.scope)||void 0===ya?void 0:ya.page,Fa=Ea.target;pa=pa.layerId||a["default"].get(Fa,"data-layerId");var Ka=!1,Ia=!1;da["default"].disableNode(Fa,!0);aa["default"].openLayerEditor(Ha,pa).then(function(Oa){var Ja=[],Ma=function(){da["default"].disableNode(Fa,!1)};Ja.push(Oa.gxeAdaptor.on("metadata-save",function(Na){var Pa;if(null===(Pa=null===Na||void 0===Na?void 0:Na.response)||
void 0===Pa?0:Pa.success)Ka=!0,Ia=!1}));Ja.push(Oa.gxeAdaptor.on("metadata-delete",function(Na){var Pa;if(null===(Pa=null===Na||void 0===Na?void 0:Na.response)||void 0===Pa?0:Pa.success)Ia=!0,Ka=!1}));Ja.push(c["default"].after(Oa.dialog,"show",Ma));Ja.push(c["default"].after(Oa.dialog,"hide",Ma));Ja.push(c["default"].after(Oa,"onDialogClose",function(){Ma();Ja.forEach(function(Na){var Pa;null===(Pa=null===Na||void 0===Na?void 0:Na.remove)||void 0===Pa?void 0:Pa.call(Na)});(Ka||Ia)&&setTimeout(function(){Aa._item.set("serviceChanged",
!0)},500)}))})};va.viewMetadata=function(pa){pa=pa.item.itemUrl+"/info/metadata/metadata.xml";var sa=B["default"].getUser();B["default"].openPage(pa+"?format\x3ddefault\x26output\x3dhtml"+((null===sa||void 0===sa?0:sa.token)?"\x26token\x3d"+sa.token:""),!1)};va.editMetadata=function(pa){var sa=pa.item,ya=pa.evt.target,Ha=!1;da["default"].disableNode(ya,!0);aa["default"].openEditor(sa).then(function(Ea){var Aa=[],Fa=function(){da["default"].disableNode(ya,!1)};Aa.push(Ea.gxeAdaptor.on("metadata-save",
function(Ka){var Ia;if(null===(Ia=null===Ka||void 0===Ka?void 0:Ka.response)||void 0===Ia?0:Ia.success)Ka=U["default"].concatUnique(sa.typeKeywords,["Metadata"]),sa.set("typeKeywords",Ka.join(",")),Ha=!0}));Aa.push(Ea.gxeAdaptor.on("metadata-delete",function(Ka){var Ia;if(null===(Ia=null===Ka||void 0===Ka?void 0:Ka.response)||void 0===Ia?0:Ia.success)Ka=U["default"].filterOut(sa.typeKeywords,["Metadata"]),sa.set("typeKeywords",Ka.join(",")),Ha=!1}));Aa.push(c["default"].after(Ea.dialog,"show",Fa));
Aa.push(c["default"].after(Ea.dialog,"hide",Fa));Aa.push(c["default"].after(Ea,"onDialogClose",function(){Fa();Aa.forEach(function(Ka){var Ia;null===(Ia=null===Ka||void 0===Ka?void 0:Ka.remove)||void 0===Ia?void 0:Ia.call(Ka)});Ha&&setTimeout(function(){B["default"].request({url:sa.portal.portalUrl+"content/items/"+sa.id}).then(function(Ka){sa.set("accessInformation",Ka.accessInformation);sa.set("description",Ka.description);sa.set("licenseInfo",Ka.licenseInfo);sa.set("snippet",Ka.snippet);sa.set("tags",
Ka.tags);sa.set("title",Ka.title);sa.set("serviceChanged",!0)})},500)}))})};va.setExtent=function(pa){};va.setSearchExtent=function(pa){pa=pa.item;var sa=pa.proxyFilter||{};pa=pa.unsavedSearchExtent||sa.searchExtent||null;var ya=new I["default"];pa=pa?x["default"].stringToArray(pa,",",!1):null;ya._publish=function(Ha){b["default"].publish("searchExtent/update",Ha)};pa=4===(null===pa||void 0===pa?void 0:pa.length)?[[Number(pa[0]),Number(pa[1])],[Number(pa[2]),Number(pa[3])]]:null;ya.show(pa);f["default"].once(ya._extentDialog,
"hide",function(){ya._extentDialog.destroyRecursive();ya.destroyRecursive()})};va.reassignItem=function(pa){var sa,ya,Ha,Ea,Aa=pa.item||{},Fa=pa.items||[Aa],Ka=null===(sa=pa.page)||void 0===sa?void 0:sa.telemetry;sa=pa.portal||pa.page&&pa.page.portal||{};var Ia=(null===Aa||void 0===Aa?void 0:Aa.itemOwner)||pa.owner,Oa=(null===(ya=pa.owner)||void 0===ya?void 0:ya.getCurrentFolder())||{};ya=null===(Ha=Aa.resultData)||void 0===Ha?void 0:Ha.length;Ha="Feature Service"===(null===(Ea=null===Aa||void 0===
Aa?void 0:Aa.sourceData)||void 0===Ea?void 0:Ea.type);var Ja=pa.dontRemoveFromList||!1;if(!Aa.isHostedService&&ya||Aa.isHostedService&&Ha&&("WFS"===Aa.type||Aa.isDataView||"Map Service"===Aa.type||"Scene Service"===Aa.type)){var Ma=new D["default"]({buttonOkLabel:Da["default"].common.ok,showCancel:!1,style:{width:"400px",height:"auto"}});Ma.show({title:Da["default"].common.notice,message:Da["default"].common.errors.reassignSourceItemWithRelated}).then(function(){return Ma.hide()})}else Ea=new E["default"]({items:Fa,
owner:Ia,portal:sa,telemetry:Ka,currentFolder:Oa}),Ea.open(),Ea.on("close",function(Na){var Pa;if(Na){var Qa=Na.newOwner,Ra=Na.newFolder,Sa=Na.error;Na=Na.updatedItems;if(Qa&&Ra&&!Sa)if(Ja=Ja||Qa===Ia.username&&(null===(Pa=pa.folder)||void 0===Pa?void 0:Pa.isAll),Fa.forEach(function(Ua){v["default"].mixin(Ua,{owner:Qa})}),pa.noRedirect){b["default"].publish("items/refresh",Ja?{forcedDelay:1E3}:{removedItems:Fa});var Ta=b["default"].subscribe("items/refreshComplete",function(){Ta.remove();b["default"].publish("folders/refreshAndSelect");
Sa||b["default"].publish("view/deselectAll",{});b["default"].publish("aggregations/refresh")})}else window.location.href="item.html?id\x3d"+Aa.id;if(Sa){Na.map(function(Ua){return U["default"].find(Fa,function(Va){return Va.id===Ua.itemId})}).forEach(function(Ua){v["default"].mixin(Ua,{owner:Qa})});b["default"].publish("items/refresh",{forcedDelay:1E3});var Xa=b["default"].subscribe("items/refreshComplete",function(){Xa.remove();b["default"].publish("aggregations/refresh")})}}})};va.deleteItem=function(pa){var sa=
this,ya=pa.item,Ha=ya.portal||{},Ea,Aa,Fa,Ka,Ia,Oa,Ja=function(Ma){if(Ma&&Ma.success)if(pa.noRedirect){b["default"].publish("items/refresh",{removedItems:[ya]});var Na=b["default"].subscribe("items/refreshComplete",function(){b["default"].publish("view/deselectAll");Na.remove();Oa.hide();b["default"].publish("alert/show",{type:"success",text:Da["default"].itemProperties.itemDeleteSuccess});b["default"].publish("aggregations/refresh")})}else window.location.href=(null===Fa||void 0===Fa?0:Fa.id)?"item.html?id\x3d"+
Fa.id:ya.isAdmin&&!ya.isOwner?"content.html?user\x3d"+ya.owner:"content.html";else Oa.hide(),pa.noRedirect?b["default"].publish("alert/show",{type:"error",text:Da["default"].common.errors[(null===Ma||void 0===Ma?void 0:Ma.messageCode)||""]||Ma}):sa._showError(Ma)};p["default"]({canBeDeleted:Ha.isPortal?ya.canBeDeleted():null,sourceData:ya.getSourceData(),resultData:ya.getResultData()}).then(function(Ma){var Na,Pa,Qa;Ea=null===(Na=Ma.canBeDeleted)||void 0===Na?void 0:Na.success;Aa=!Ea&&(null===(Pa=
Ma.canBeDeleted)||void 0===Pa?void 0:Pa.offendingItems)||[];Fa=Ma.sourceData;Ka=Ma.resultData;Ia=!Fa&&(null===Ka||void 0===Ka?void 0:Ka.length)&&!ya.isHostedService;Na=Da["default"].itemProperties.deleteItemBlocked+'\x3cbr/\x3e\x3cul class\x3d"list-plain"\x3e${layerList}\x3c/ul\x3e';Pa=Da["default"].itemProperties.deleteSourceItem+'\x3cbr/\x3e\x3cul class\x3d"list-plain"\x3e${layerList}\x3c/ul\x3e\x3cbr/\x3e'+Da["default"].itemProperties.deleteSourceItemMsg;var Ra=Ia?Pa:Na,Sa="",Ta=Ha.helpBase+Ha.helpMap.m["120001208"];
Na=Ka||Aa||void 0;var Xa=(null===Na||void 0===Na?0:Na.length)?Na.length-5:0,Ua=(null===Na||void 0===Na?0:Na.length)?Na.map(function(Va){return"id:"+(Va.id||Va.itemId)}).join(" OR "):"";Ha.isPortal?Ea?(Oa=new F["default"],Oa.showMsg(Da["default"].deleteWarningDlg.confirmDeleteSingleItem,function(){g["default"].deleteItem(ya).then(Ja,Ja)},!0),f["default"].once(Oa._dialog,"hide",function(){Oa._dialog.destroyRecursive();Oa.destroyRecursive()})):Ea||Aa.length?(Ma=((null===(Qa=Ma.canBeDeleted)||void 0===
Qa?void 0:Qa.offendingItems)||[]).map(function(Va){return B["default"].request({url:Ha.portalUrl+"content/items/"+Va.itemId})}),p["default"](Ma).then(function(Va){Aa=Va;Aa=Aa.map(function(ab){return new u["default"](v["default"].mixin(ab,{portal:Ha}))});Aa.forEach(function(ab,Ya){5>Ya&&(Sa+=l["default"].substitute('\x3cli\x3e\x3ca href\x3d"item.html?id\x3d${relItem.id}" target\x3d"_blank"\x3e${relItem.title}\x3c/a\x3e, ${relItem.displayName}\x3c/li\x3e',{relItem:ab,i18n:Da["default"]}))});Sa+=5<Aa.length?
l["default"].substitute('\x3cli\x3e\x3ca target\x3d"_blank" href\x3d"search.html?t\x3dcontent\x26q\x3d(${query})"\x3e${i18n.FilterDlg.and} ${count} ${i18n.itemProperties.more}\x3c/a\x3e\x3c/li\x3e',{query:encodeURIComponent(Ua),i18n:Da["default"],count:Xa||0}):"";Ra=l["default"].substitute(Ra,{layerList:Sa,helpTitle:Da["default"].itemProperties.learnMoreDeletingSourceItems,helpUrl:Ta});Ia?(Oa=new D["default"]({buttonOkLabel:Da["default"].common.yesLabel,buttonCancelLabel:Da["default"].common.noLabel,
style:{width:"400px",height:"auto"}}),Oa.show({title:Da["default"].common.notice,message:Ra}).then(function(ab){"onOk"===ab&&g["default"].deleteItem(ya).then(Ja,Ja)})):(Oa=new L["default"],Oa.show({title:Da["default"].common.notice,message:Ra}));f["default"].once(Oa._dialog,"hide",function(){Oa._dialog.destroyRecursive();Oa.destroyRecursive()})})):(Qa=Ma.canBeDeleted,b["default"].publish("alert/show",{type:"error",text:Qa&&(Qa.messageCode&&Da["default"].common.errors[Qa.messageCode]||Qa.message||
Da["default"].common.errors.genericError.message)})):(!Ka||!Ka.length||sa.isFeedWithSingleHostedFeatureLayer(ya,Ka)||sa.isHostedFeatureLayerFromFeed(ya,Ka)?(Oa=new F["default"],Oa.showMsg(Da["default"].deleteWarningDlg.confirmDeleteSingleItem,function(){g["default"].deleteItem(ya).then(Ja,Ja)},!0)):(Ka.forEach(function(Va,ab){5>ab&&(Sa+=l["default"].substitute('\x3cli\x3e\x3ca href\x3d"item.html?id\x3d${relItem.id}" target\x3d"_blank"\x3e${relItem.title}\x3c/a\x3e, ${relItem.displayName}\x3c/li\x3e',
{relItem:Va,i18n:Da["default"]}))}),Sa+=5<Ka.length?l["default"].substitute('\x3cli\x3e\x3ca target\x3d"_blank" href\x3d"search.html?t\x3dcontent\x26q\x3d(${query})"\x3e${i18n.FilterDlg.and} ${count} ${i18n.itemProperties.more}\x3c/a\x3e\x3c/li\x3e',{query:encodeURIComponent(Ua),i18n:Da["default"],count:Xa||0}):"",Ra=l["default"].substitute(Ra,{layerList:Sa,helpTitle:Da["default"].itemProperties.learnMoreDeletingSourceItems,helpUrl:Ta}),Ia?(Oa=new D["default"]({buttonOkLabel:Da["default"].common.yesLabel,
buttonCancelLabel:Da["default"].common.noLabel,style:{width:"400px",height:"auto"}}),Oa.show({title:Da["default"].common.notice,message:Ra}).then(function(Va){"onOk"===Va&&g["default"].deleteItem(ya).then(Ja,Ja)})):(Oa=new L["default"],Oa.show({title:Da["default"].common.notice,message:Ra}))),f["default"].once(Oa._dialog,"hide",function(){Oa._dialog.destroyRecursive();Oa.destroyRecursive()}))},function(Ma){b["default"].publish("alert/show",{type:"error",text:Ma&&(Ma.messageCode&&Da["default"].common.errors[Ma.messageCode]||
Ma.message||Da["default"].common.errors.genericError.message)})})};va.toggleAttachments=function(pa){var sa=pa.item,ya=pa.evt,Ha=sa.isDataView,Ea=Da["default"].itemProperties,Aa=Ha?Ea.showAttachments:Ea.enableAttachments,Fa=Ha?Ea.hideAttachments:Ea.disableAttachments,Ka=Ha?Ea.showingAttachments:Ea.enablingAttachments,Ia=Ha?Ea.hidingAttachments:Ea.disablingAttachments,Oa=Ha?Ea.enablingAttachmentsViewMessage:Ea.enablingAttachmentsMessage;Ea=Ha?Ea.disableAttachmentsViewMessage:Ea.disableAttachmentsMessage;
var Ja=pa.layerId||a["default"].get(ya.target,"data-layerId"),Ma=pa.layer||g["default"].findLayer(Ja,sa.layers),Na=Ma.hasAttachments,Pa=new D["default"]({buttonOkLabel:Da["default"].common.yesLabel,buttonCancelLabel:Da["default"].common.noLabel,busyMessage:Na?Ia:Ka,style:{width:"460px",height:"auto"}}),Qa=function(){Pa.set("disabled",!0);g["default"].enableAttachments(sa,Ma,!Na).then(function(){sa.set("maxAgeCheck",!0);a["default"].set(ya.target,"innerHTML",oa["default"].inline.attachment["16"]+(Na?
Aa:Fa));Pa.hide()},function(Ra){Ra=Ra&&(Ra.messageCode&&Da["default"].common.errors[Ra.messageCode]||Ra.message||Da["default"].common.errors.genericError.message);Pa.hide();b["default"].publish("alert/show",{type:"error",text:Ra})})};pa=function(Ra){Pa.show({title:Na?Fa:Aa,message:Ra}).then(function(Sa){"onOk"===Sa&&Qa()})};Ha?Qa():pa(Na?Ea:Oa)};va.createApp=function(pa){var sa,ya=pa.item,Ha=pa.portal;pa=pa.evt;if(null===(sa=null===pa||void 0===pa?void 0:pa.target)||void 0===sa?0:sa.href)return window.open(pa.target.href,
"_blank");var Ea=ya.isHostedTemplate;sa="wab"===a["default"].get(pa.target,"data-type")||U["default"].includes(ya.typeKeywords,"Web AppBuilder for ArcGIS");pa=a["default"].get(pa.target,"data-type")||null;Ea=Ea||sa;var Aa=new ka["default"]({item:ya});sa={isWab:sa};if(pa){"webscene"===pa&&Ha.isPortal&&(sa.typeInfo="webscene_portal");if("storymap"===pa)return window.open(y["default"].storymapsUrl+"/stories/new?"+("Web Scene"===ya.type?"webscene":"webmap")+"\x3d"+ya.id,"_blank");(ya=Ea?Aa.showModal(sa):
Aa.showWizard(sa))&&ya.then(function(Fa){if(null===Fa||void 0===Fa?0:Fa.configureUrl)window.location.href=Fa.configureUrl})}};va.profilePopup=function(pa){var sa=this,ya=pa.item,Ha=pa.evt;(ya=pa.profile||ya.owner||(pa.user?pa.user.username||pa.user:null))&&!this._popup&&(this._popup=new la["default"]({username:ya,opener:Ha.target,portal:pa.page.portal}),this._popup.open(),f["default"].once(this._popup,"close",function(){sa._popup=void 0}))};va.advancedOfflineOptions=function(pa){var sa=document.createElement("div");
document.body.appendChild(sa);(new ma["default"]({item:pa.item,page:pa.page},sa)).open()};va.attachCode=function(pa){var sa=pa.item;pa=sa.codeAttachment;var ya=g["default"].createSpecifiedDialog(ha["default"],{item:sa,sharing:sa.sharing});ya.show(pa);c["default"].after(ya,"onUpload",function(){sa.set("codeAttachmentChanged",!0);ya.hide()})};va.deleteCode=function(pa){var sa=pa.item;pa=pa.item;var ya=pa.portal,Ha=pa.codeAttachment;pa="Web Mapping Application"===sa.type&&U["default"].includes(sa.typeKeywords,
"Web AppBuilder");Ha&&g["default"].createSpecifiedDialog(F["default"]).showMsgTitleButton(""+Da["default"].itemProperties.removeAttachmentMsg+(pa?"":"\x3cbr\x3e\x3cbr\x3e"+Da["default"].itemProperties.removeAttachmentUpdate),Da["default"].itemProperties.removeAttachmentTitle,Da["default"].itemProperties.removeAttachmentButton,function(){B["default"].request({url:ya.portalUrl+"content/items/"+Ha.id}).then(function(Ea){Ea=new u["default"](v["default"].mixin(Ea,{portal:sa.portal}));g["default"].deleteItem(Ea).then(function(){sa.set("codeAttachment",
null)})})})};va.thumbnail=function(pa){var sa=this,ya=document.getElementById("item-thumb-modal-container");ya||(ya=document.createElement("div"),ya.id="item-thumb-modal-container",document.body.appendChild(ya));var Ha=function(){Ga.render(null,ya)},Ea=Da["default"].GroupWidget.thumbnailDlg;Ga.render(Ga.h(ta["default"],{contentClass:"esriThumbnailDlg",onSave:function(Aa){return w.__awaiter(sa,void 0,void 0,function(){var Fa,Ka,Ia,Oa,Ja,Ma,Na,Pa,Qa,Ra,Sa;return w.__generator(this,function(Ta){switch(Ta.label){case 0:Fa=
new FormData,Ka="thumbnail"+(new Date).getTime()+"."+Aa.format,Fa.append("thumbnail",Aa.blob,Ka),Fa.append("f","json"),Ia=pa.item,Oa=pa.page.portalUser,Ma=(Ja=Ia.itemOwner)?Ja.userContentUrl:Oa.userContentUrl,Na=Ia.folderId&&"/"!==Ia.folderId?"/"+Ia.folderId:"",Pa=""+Ma+Na+"/items/"+Ia.id+"/update",Ta.label=1;case 1:return Ta.trys.push([1,4,,5]),[4,B["default"].request({url:Pa,form:Fa,timeout:12E4},{usePost:!0})];case 2:return Ta.sent(),[4,Oa.getItem(Ia.id)];case 3:return Qa=Ta.sent(),Ra=Ia.thumbnailUrl,
Qa.thumbnailUrl&&(Sa=-1<Qa.thumbnailUrl.indexOf("?token\x3d"),Ra=""+Qa.thumbnailUrl+(Sa?"\x26":"?")+"ts\x3d"+(new Date).getTime()),Ia.set("thumbnailUrl",Ra),Ha(),[3,5];case 4:return Ta.sent(),[3,5];case 5:return[2]}})})},onCancel:Ha,allowFromMap:!0,height:293,aspectRatio:1.5,zoomToFull:!0,fillBackground:!0,itemId:pa.item.id,texts:{title:Ea.createThumb,drag:Ea.uploadImage,size:Ea.dragAndDrop}}),ya)};va.newMapViewer=function(pa){var sa=pa.item;pa=pa.evt;var ya=a["default"].get(pa.currentTarget,"data-href")||
sa.mapNewViewerUrl,Ha=-1<ya.indexOf("useExisting\x3d1"),Ea=sa.canOpenInNewMapViewer;"modern"===sa.portal.defaultMapViewer&&Ea?window.location=a["default"].get(pa.currentTarget,"href")||sa.newMapViewerUrl:"Web Map"!==sa.type&&Ha?window.location=ya:z["default"]().then(function(Aa){if(Aa&&!0===Aa.c){var Fa=new Z["default"];Fa.show(ya,Aa);f["default"].once(Fa._dialog,"hide",function(){Fa._dialog.destroyRecursive();Fa.destroy()})}else window.location=ya})};va.whatsNew=function(pa){var sa=new q["default"],
ya=pa.key,Ha=pa.endDate,Ea=pa.redirectUrl,Aa=pa.disableDebugBlock,Fa=new Date((new Date).getTime()+31556926E3),Ka={},Ia=new Date,Oa=B["default"].getCookie("esri_whatsnew")||{},Ja={closeable:!1,showCancel:!!Ea,buttonOkLabel:Ea?Da["default"].common.learnMore:Da["default"].common.gotIt,buttonCancelLabel:Da["default"].common.gotIt,className:"whatsNewDlg"},Ma=-1<window.location.hostname.indexOf("esri.com")?".esri.com":".arcgis.com";if(Ia<Ha&&(Aa||!y["default"].isDebug))if(Oa[ya])sa.resolve(!0);else{var Na=
new D["default"](Ja);Ea?(n["default"].add(Na.okButton.domNode,"hide"),Ha=k["default"].create("a",{className:"btn right learn-more-link icon-ui-link-external",href:Ea,target:"_blank",innerHTML:Da["default"].addItemFrm.learnMore},Na.actionBarNode,"last")):Ha=Na.okButton;f["default"].once(Ha,"click",function(){Na.hide()});f["default"].once(Na,"hide",function(){Ka[ya]=!0;t["default"]("esri_whatsnew",m["default"].stringify(v["default"].mixin(Oa,Ka)),{expires:Fa,path:"/",domain:Ma,sameSite:"Strict"});sa.resolve(!0)});
Na.show({message:pa.message||"",title:pa.title||""})}else Oa[ya]&&(delete Oa[ya],t["default"]("esri_whatsnew",m["default"].stringify(Oa),{expires:Fa,path:"/",domain:Ma,sameSite:"Strict"})),sa.resolve(!0);return sa};va.shareSocial=function(pa){var sa=pa.evt.target;pa=pa.item;pa="public"===(null===pa||void 0===pa?void 0:pa.access);var ya=new D["default"]({buttonOkLabel:Da["default"].common.ok,showCancel:!1,style:{width:"400px",height:"auto"}});pa?window.open(a["default"].get(sa,"href")):ya.show({title:Da["default"].itemLinks.shareItem,
message:d["default"].substitute({appTitle:y["default"].portalName||"ArcGIS.com"},Da["default"].itemLinks.shareItemMsg)}).then(function(){ya.hide().then(function(){window.open(a["default"].get(sa,"href"))})})};va.sceneJobStatus=function(pa){var sa=pa.item,ya=pa.item;pa=ya.portal;var Ha=ya.portal.isPortal,Ea=sa.properties.cacheJobUrl;ya=sa.lastCachingJobStatus;var Aa=sa.serverToken?"?token\x3d"+sa.serverToken:"",Fa=Ha?""+Ea+Aa:sa.adminUrl+"/"+Ea+Aa;sa=Ha?Ea:sa.adminUrl+"/"+Ea+Aa;(new Q["default"]).show(pa,
pa.portalUser,Fa,sa,ya)};va.manageSceneCache=function(pa){var sa=pa.item,ya=pa.page;pa=pa.item.portal.isPortal?ya._hostedFederatedServer:void 0;ya=sa.sourceData||{};(new W["default"]).show(ya,sa,pa)};va.markItemAsAuthoritative=function(pa){var sa,ya=pa.item,Ha=((null===(sa=ya.portal)||void 0===sa?0:sa.isVerified)&&"public"===ya.access?"public":"org")+"_authoritative";ya._setContentStatusTo(Ha).then(function(Ea){Ea.success&&(ya.set("protected",!0),b["default"].publish("item/protect",{protect:!0}),
ya.set("contentStatus",Ha));return na["default"].getVerifiedInfo(ya)}).then(function(Ea){ya.set("verified",Ea)})};va.markItemAsDeprecated=function(pa){var sa=pa.item;sa._setContentStatusTo("deprecated").then(function(ya){ya.success&&(sa.set("contentStatus","deprecated"),sa.set("verified",!1))})};va.removeContentStatus=function(pa){var sa=pa.item;sa._setContentStatusTo("").then(function(ya){ya.success&&(sa.set("contentStatus",""),sa.set("verified",!1))})};va.httpsUpdate=function(pa){var sa=document.createDocumentFragment();
pa=new ea["default"](pa,k["default"].create("div",null,sa));var ya=g["default"].createDialogWrapper({className:"update-to-https-dlg",draggable:!h["default"]("touch"),title:Da["default"].itemProperties.updateLayersToHTTPS},sa);sa=function(){ya.hide()};pa.startup();pa.own(b["default"].subscribe("update-to-https/done",sa),b["default"].subscribe("update-to-https/cancel",sa));ya.show()};va.domainUpdate=function(pa){var sa=document.createDocumentFragment(),ya=new Y["default"](pa,k["default"].create("div",
null,sa)),Ha=g["default"].createDialogWrapper({className:"update-domains-dlg",draggable:!h["default"]("touch"),title:Da["default"].itemProperties.domainsTitle},sa);ya.startup();ya.own(b["default"].subscribe("update-domain/done",function(){Ha.hide()}));Ha.show();setTimeout(function(){ya.domainReplace.value&&ya.domainReplace.focus()},200)};va.replaceLayer=function(pa){(new R["default"]({item:pa.item,page:pa.page},k["default"].place(k["default"].create("div"),document.body.lastChild,"after"))).open()};
va.replaceSceneLayer=function(pa){(new S["default"]({item:pa.item},k["default"].place(k["default"].create("div"),document.body.lastChild,"after"))).open()};va.updateSourceUrlToHttps=function(pa){var sa=pa.page,ya=pa.item;pa=y["default"].restBaseUrl+"/portals/checkurl";var Ha=[200,301,302,304,307,401,403,407,498,499],Ea=null===ya||void 0===ya?void 0:ya.url,Aa=(null===ya||void 0===ya?void 0:ya.sourceUrl)&&x["default"].startsWith(ya.sourceUrl,"http://"),Fa=null===ya||void 0===ya?void 0:ya.sourceUrl;
if(Aa){var Ka=Fa.replace("http://","https://");B["default"].request({url:pa+"?url\x3d"+encodeURIComponent(Ka+"?f\x3djson")},{addToken:!1}).then(function(Ia){Ia&&!Ia.code&&U["default"].includes(Ha,Ia.httpStatusCode)?sa.updateItem({url:Ka}).then(function(){ya.set({url:Ea,sourceUrl:Ka});b["default"].publish("item/proxy-url-update",{sourceUrl:Ka});M["default"].showAlert("success",Da["default"].itemProperties.upgradeToHttpsSuccess)}):M["default"].showAlert("error",Da["default"].itemProperties.upgradeToHttpsFail)},
function(Ia){M["default"].showAlert("error",Da["default"].itemProperties.upgradeToHttpsFail)})}};va.downloadImage=function(pa){g["default"].downloadImage(pa).then(function(sa){sa&&sa.url&&(window.location=sa.url)})};va.refreshSnapshot=function(pa){var sa,ya,Ha,Ea,Aa=pa.item;pa=pa.page;var Fa=(null===(ya=null===(sa=Aa.adminServiceInfo)||void 0===sa?void 0:sa.properties)||void 0===ya?0:ya.serviceInfo)?JSON.parse(Aa.adminServiceInfo.properties.serviceInfo):{};sa=((null===Fa||void 0===Fa?void 0:Fa.layers)||
[]).filter(function(Xa){return-1<Xa.queryPolicy.indexOf("createSnapshot")}).map(function(Xa){return Xa.id}).map(function(Xa){var Ua;return null===(Ua=Aa.serviceInfo.layers.filter(function(Va){return Va.id===Xa}).shift())||void 0===Ua?void 0:Ua.name});var Ka=pa._hostedFederatedServer.url+"/rest/services/System/PublishingTools/GPServer/Refresh%20Service",Ia=Ka+"/submitJob";ya=null===(Ea=null===(Ha=Aa.url.split("/rest/services/"))||void 0===Ha?void 0:Ha[1])||void 0===Ea?void 0:Ea.split("/");var Oa=(Ha=
2===(ya.indexOf("MapServer")||ya.indexOf("FeatureServer")))?ya[1]:ya[0],Ja={f:"json",token:Aa.adminServerToken,serviceType:"MapServer",serviceName:Oa,serviceFolder:Ha?ya[0]:null},Ma=document.getElementById("refresh-snapshot-dialog"),Na=document.getElementById("refresh-snapshot-error-dialog");Ma||(Ma=document.createElement("div"),Ma.id="refresh-shapshot-dialog",document.body.appendChild(Ma));Na||(Na=document.createElement("div"),Na.id="refresh-snapshot-error-dialog",document.body.appendChild(Na));
var Pa=Da["default"].itemProperties.snapshot.refresh;Ha=Da["default"].itemProperties.snapshot.description+'\x3cdiv class\x3d"leader-half margin-left-1 margin-right-1"\x3e'+sa.join("\x3cbr\x3e")+"\x3c/div\x3e";Ea=Da["default"].common;var Qa=Ea.ok,Ra=Ea.cancel,Sa=function(){Ga.render(null,Na);document.body.removeChild(Na)},Ta=function(){Ga.render(Ga.h(xa["default"],{autoCloseOnOk:!0,hideCancel:!0,hideClose:!1,renderHtmlDescription:!1,onOk:Sa,onCancel:Sa,strings:{title:Pa,description:Da["default"].itemProperties.snapshot.inProgress,
ok:Qa,cancel:Ra},width:"s"}),Na)};Ga.render(Ga.h(xa["default"],{autoCloseOnOk:!1,hideCancel:!1,hideClose:!1,renderHtmlDescription:!0,onOk:function(Xa){B["default"].request({url:Ia,content:Ja},{usePost:!0}).then(function(Ua){Ga.render(null,Ma);M["default"].showAlert("success",Da["default"].itemProperties.snapshot.success.replace("${name}",Oa));Ca["default"].checkAsyncJobStatus(Ka+"/jobs/"+Ua.jobId).then(function(){null===Xa||void 0===Xa?void 0:Xa();M["default"].showAlert("success",Da["default"].itemProperties.snapshot.finished.replace("${name}",
Oa))},function(Va){null===Xa||void 0===Xa?void 0:Xa();Ta()})},function(Ua){null===Xa||void 0===Xa?void 0:Xa();Ta()})},onCancel:function(){Ga.render(null,Ma);document.body.removeChild(Ma)},strings:{title:Pa,description:Ha,ok:Qa,cancel:Ra},width:"s"}),Ma)};va._getItemPkgPath=function(pa){var sa=pa.portal.getPortalUser();return pa.itemUrl+"/item.pkinfo"+("public"!==pa.access&&(null===sa||void 0===sa?0:sa.token)?"?token\x3d"+sa.token:"")};va._getPItemPath=function(pa){var sa=pa.portal.getPortalUser();
return pa.itemUrl+"/item.pitem"+("public"!==pa.access&&(null===sa||void 0===sa?0:sa.token)?"?token\x3d"+sa.token:"")};va._getPItemXPath=function(pa){var sa=pa.portal.getPortalUser();return pa.itemUrl+"/item.pitemx"+("public"!==pa.access&&(null===sa||void 0===sa?0:sa.token)?"?token\x3d"+sa.token:"")};va._getLyrPath=function(pa){var sa=pa.portal.getPortalUser();return pa.url+"?f\x3dlyr\x26v\x3d9.3"+("public"!==pa.access&&(null===sa||void 0===sa?0:sa.token)?"\x26token\x3d"+sa.token:"")};va._showError=
function(pa){var sa=new D["default"]({buttonOkLabel:Da["default"].common.ok,showCancel:!1,style:{width:"400px",height:"auto"}});sa.show({title:pa.title||Da["default"].addItemFrm.errors.error.title,message:pa.message||Da["default"].addItemFrm.errors.error.message}).then(function(){sa.hide()})};va.isFeedWithSingleHostedFeatureLayer=function(pa,sa){return"Feed"===pa.type&&pa.isHostedService&&1===(null===sa||void 0===sa?void 0:sa.length)&&"Feature Service"===sa[0].type&&U["default"].includes(sa[0].typeKeywords,
"Hosted Service")};va.isHostedFeatureLayerFromFeed=function(pa,sa){return"Feature Service"===pa.type&&pa.isHostedService&&1===(null===sa||void 0===sa?void 0:sa.length)&&"Feed"===sa[0].type&&U["default"].includes(sa[0].typeKeywords,"Hosted Service")};return va}(T["default"])})},"arcgisonline/map/utils/getMapCookie":function(){define(["dojo/Deferred","dojo/json"],function(K,G){return function(){var w=window.sessionStorage&&window.sessionStorage.getItem("Esri_webmap"),v=new K;w&&w.length?v.resolve(G.parse(w)):
v.resolve(null);return v}})},"arcgisonline/pages/dijit/ChangeOwner":function(){define("require exports tslib dojo/promise/all dojo/string dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ./Overlay ../components/MemberPicker ../components/MemberThumb ./ChangeOwner/FolderPicker ../portal/PortalUser ../../tsutils/declareDecorator ../utils/dom ../utils/alerts ../utils/arrays ../../sharing/util ../utils/organization ../../esriGeowConfig dojo/text!./ChangeOwner/templates/ChangeOwner.html dojo/i18n!../../nls/arcgisonline ../utils/icons ./OverlayConfirm preact".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);B=w.__importDefault(B);return function(){function z(D,
E){this.title=x["default"].changeOwner.title;this.i18n=x["default"];this.icons=y["default"];this.constrain=!0;this.overlayContents=r["default"].substitute(u["default"],{i18n:x["default"],icons:y["default"]});this.maxWidth=600;this.closeOnScrimClick=!1}z.prototype.postMixInProperties=function(){this.inherited(arguments)};z.prototype.postCreate=function(){this.inherited(arguments);this._initialOpen=!0;this.group||(this._folderArea=this.domNode.querySelector(".js-folder-area"),this._folderEdit=this.domNode.querySelector(".js-folder-edit"),
this._folderEditButton=this.domNode.querySelector(".js-folder-button"));this._ownerArea=this.domNode.querySelector(".js-owner-area");this._ownerEdit=this.domNode.querySelector(".js-owner-edit");this._ownerEditButton=this.domNode.querySelector(".js-owner-edit-button");this._loader=this.domNode.querySelector(".js-overlay-loader");var D=this.portal.portalUser.userRole;this.canReassignOrgItems=D.isAdmin()||D.canReassignOrgItems();this.canReassignOwnItems=!this.canReassignOrgItems&&D.canReassignOwnItems();
this._primaryBtn.disabled=!0};z.prototype.open=function(){this.inherited(arguments);this._initUI();this._addListeners()};z.prototype.close=function(D){this.inherited(arguments)};z.prototype._destroy=function(){this.inherited(arguments);C.render(null,this.domNode.querySelector(".js-member-picker"));C.render(null,this.domNode.querySelector(".js-member-thumb"))};z.prototype.handlePrimary=function(){var D=this;this.disableButtons();!this.group&&this.canReassignOwnItems?this.reassignItems():this._folderPicker&&
this._folderPicker.hasUnsavedChanges()?this._folderPicker.saveNewfolder().then(function(E){D._folder=E;D._reassign()},this._reassign.bind(this)):this._reassign()};z.prototype.disableButtons=function(){this._primaryBtn.disabled=!0;this._cancelBtn.disabled=!0};z.prototype.enableButtons=function(){this._primaryBtn.disabled=!1;this._cancelBtn.disabled=!1};z.prototype._addListeners=function(){var D=this;this._ownerEdit.addEventListener("click",this._openOwnerSelect.bind(this));this.group||(this._folderEdit.addEventListener("click",
this._openFolderSelect.bind(this)),this.own(this._folderPicker.on("selectUpdate",this._folderSelectUpdate.bind(this)),this._folderPicker.on("folderCreated",function(E){return D._createdFolder=E}),this._folderPicker.on("cancel",this._folderSelectCancel.bind(this))))};z.prototype.initUIUtil=function(){var D=this.items||[this.group],E=D[0].owner;D=D.every(function(A){return A.owner===E});return{firstOwner:E,sameOwner:D}};z.prototype._initUI=function(){var D=this,E=this.initUIUtil(),A=E.firstOwner;this.sameOwner=
E.sameOwner;this.group&&(this.domNode.querySelector(".js-item-owner-label").innerHTML=x["default"].changeOwner.groupOwner);this.memberPickerProps={portal:this.portal,group:this.group,showCancel:!this.group&&this.sameOwner,selectUpdate:this._memberSelectUpdate.bind(this),selectCancel:this._memberSelectCancel.bind(this),showMemberPicker:!0,adminOnly:this.adminOnly};this.sameOwner&&(this.memberPickerProps.excludedUsernames=[A]);this._memberPicker=C.render(C.h(p.MemberPicker,this.memberPickerProps),this.domNode.querySelector(".js-member-picker"));
this.group||(this._folderPicker=new t["default"]({portal:this.portal,user:this.owner},this.domNode.querySelector(".js-folder-picker")));this.sameOwner?this._fetchUser(A).then(function(F){D._owner=F;D._memberSelectUpdate(D._owner)}):(this._openOwnerSelect(),this._fadeIn())};z.prototype._fetchUser=function(D){var E=this;return e["default"].request({url:g["default"].restBaseUrl+"/community/users/"+D+"/"}).then(function(A){return new m["default"](w.__assign(w.__assign({},A),{portal:E.portal}))})};z.prototype._fadeIn=
function(){var D=this.domNode.querySelector(".js-change-owner-wrapper");this.domNode.querySelector(".js-change-owner-loader").classList.remove("is-active");D.classList.add("animate-fade-in")};z.prototype._compileRequests=function(){var D=this;if(this.group)return[this.group].map(this._reassignGroup.bind(this));var E=[],A=[],F=[],H=this._owner.username===this.owner.username,I=d["default"].getUserRole(this.owner).isCustom();this.items.forEach(function(L){H&&L.owner===D._owner.username&&!I?E.push(L):
A.push(L)});0<E.length&&F.push(this._moveItems(E));0<A.length&&A.forEach(function(L){return F.push(D._reassignItem(L))});return F};z.prototype.reassignUtil=function(D){return h["default"].find(this.items,function(E){return E.id===D.itemId})};z.prototype._reassign=function(){var D=this,E=this._compileRequests();this._loader.classList.add("is-active");v["default"](E).then(function(A){var F=A.filter(function(L){return L.success}).map(function(L){return L.item}),H=A.filter(function(L){return L.error&&
!L.success}),I=A.filter(function(L){return L.moveItems});0<I.length&&(I[0].results||[]).forEach(function(L){var J=D.reassignUtil(L);L.success?F.push({success:!0,item:J}):H.push({error:L.error,item:J})});0===H.length&&0<F.length?D._handleSuccess(F):0<H.length&&0===F.length?D._handleError(H[0]):0<H.length&&0<F.length&&D._handlePartialSuccess(F,H[0]);0===A[0].length&&D._handleSuccess(A[0])},function(A){D._handleError(A)})};z.prototype.getTransferError=function(D){var E=x["default"].changeOwner.transferErrors.general;
(null===D||void 0===D?0:D.messageCode)&&(D=x["default"].changeOwner.transferErrors[D.messageCode])&&(E=D);return E};z.prototype.reassignItems=function(){return w.__awaiter(this,void 0,void 0,function(){var D,E,A,F,H,I;return w.__generator(this,function(L){switch(L.label){case 0:D=this.portal.portalUser.username,L.label=1;case 1:return L.trys.push([1,3,,4]),[4,e["default"].request({url:g["default"].restBaseUrl+"/content/users/"+D+"/reassignItems",content:{targetUsername:this._owner.username,items:this.items.map(function(J){return J.id}).join(",")}},
{usePost:!0})];case 2:E=L.sent();if(F=E.results.some(function(J){if(J.error)return A=J.error,!0}))return H=this.getTransferError(A),this._loader.classList.remove("is-active"),this.showErrorPopup(H),[2];l["default"].showAlert("success",x["default"].changeOwner.transferSuccess);this.close({newOwner:this._owner,newFolder:this.reassignFolderName});return[3,4];case 3:return I=L.sent(),H=this.getTransferError(I),this._loader.classList.remove("is-active"),this.showErrorPopup(H),[3,4];case 4:return[2]}})})};
z.prototype.canReassignItems=function(){return w.__awaiter(this,void 0,void 0,function(){var D,E,A,F,H,I,L,J;return w.__generator(this,function(O){switch(O.label){case 0:D=this.portal.portalUser.username,E=this.domNode.querySelector(".js-member-select-error"),this._ownerEdit.classList.remove("input-error"),E.classList.remove("is-active"),O.label=1;case 1:return O.trys.push([1,3,,4]),[4,e["default"].request({url:g["default"].restBaseUrl+"/content/users/"+D+"/canReassignItems?token\x3d"+e["default"].getToken(),
content:{targetUsername:this._owner.username,items:this.items.map(function(P){return P.id}).join(",")}},{usePost:!0})];case 2:return O.sent(),[3,4];case 3:return A=O.sent(),F=A.messageCode,H="",I=x["default"].changeOwner.warnings,L=I.cantReceiveItems,J=I.cantOwnItems,"CONT_0291"===F?H=L:"CONT_0292"===F&&(H=J),H&&(E.innerHTML=H,E.classList.add("is-active"),this._ownerEdit.classList.add("input-error")),[3,4];case 4:return[2]}})})};z.prototype._reassignItem=function(D){var E=this._owner.username===this._folder.id?
"/":this._folder.title,A=new f["default"];e["default"].request({url:g["default"].restBaseUrl+"/content/users/"+D.owner+"/items/"+D.id+"/reassign",content:{targetUsername:this._owner.username,targetFolderName:E}},{usePost:!0}).then(function(){return A.resolve({success:!0,item:D})},function(F){return A.resolve({error:F,item:D})});return A};z.prototype._moveItems=function(D){var E=this._folder.username===this._folder.id?"/":this._folder.id,A=D.filter(function(H){return(H.ownerFolder||"/")!==E}),F=new f["default"];
0===A.length?F.resolve([]):e["default"].request({url:g["default"].restBaseUrl+"/content/users/"+this._owner.username+"/moveItems",content:{items:A.map(function(H){return H.id}).join(","),folder:E}},{usePost:!0}).then(function(H){return F.resolve({moveItems:!0,results:H.results})},function(H){return F.resolve({error:H,items:D})});return F};z.prototype._reassignGroup=function(){return e["default"].request({url:g["default"].restBaseUrl+"/community/groups/"+this.group.id+"/reassign",content:{targetUsername:this._owner.username}},
{usePost:!0})};z.prototype._handleSuccess=function(D){this._loader.classList.remove("is-active");if(this.telemetry&&!this.group){var E=this._folder.title===this._createdFolder;this.telemetry.logEvent({category:"change owner folder option",label:this._folder.id===this._owner.username?"default":E?"new":"custom"})}D={newOwner:this._owner,updatedItems:D};this.group||(l["default"].showAlert("success",x["default"].changeOwner.success),D.newFolder=this._folder);this.close(D)};z.prototype.showErrorPopup=
function(D){var E=this;D=new B["default"]({title:x["default"].common.errorTitle,description:D,showActions:!1,cssClasses:"full-width text-constrain overlay-confirm-pane--error"});D.domNode.classList.add("position-absolute");D.domNode.classList.add("fullscreen");this._overlay.appendChild(D.domNode);D.show().then(function(){E._ownerEditButton.focus()});this.enableButtons()};z.prototype._handleError=function(D){D=D.messageCode?this._getErrorText(D):this._getErrorText(D.error,D.item);this._loader.classList.remove("is-active");
this.showErrorPopup(D)};z.prototype._handlePartialSuccess=function(D,E){var A=E.error,F=E.item;this._loader.classList.remove("is-active");F=this._getErrorText(A,F);A={newOwner:this._owner,updatedItems:D,error:A};this.group||(l["default"].showAlert("error",F),A.newFolder=this._folder);this.close(A)};z.prototype._getErrorText=function(D,E){var A=this.group?x["default"].GroupWidget.error.cantReassignGroup:x["default"].changeOwner.cantChangeOwner,F=this._owner.username;if(null===D||void 0===D?0:D.messageCode)switch(D.messageCode){case "COM_0046":A=
r["default"].substitute(x["default"].GroupWidget.error.errorReassignGroupName,{name:F,groupName:this.group.title});break;case "CONT_0014":A=r["default"].substitute(x["default"].folderDlg.invalid.itemExists,[E.title,this._folder.folderAttributeName||this._folder.title]);break;case "COM_1065":A=D.message&&D.message.match(/\d+/)[0];A=r["default"].substitute(x["default"].GroupWidget.error.groupMaxOtherUser,{name:F,numGroups:A});break;case "COM_1076":A=r["default"].substitute(x["default"].GroupWidget.error.errorReassignGroupOpenData,
{name:F});break;case "COM_1084":A=r["default"].substitute(x["default"].GroupWidget.error.errorReassignGroupPrivileges,{name:F});break;case "COM_1070":A=x["default"].common.errors.COM_1070;break;default:x["default"].common.errors[D.messageCode]&&(A=x["default"].common.errors[D.messageCode]),403===D.code&&(A=x["default"].errorWidget.accessDeniedResource)}return A};z.prototype._openOwnerSelect=function(D){null===D||void 0===D?void 0:D.preventDefault();C.render(C.h(p.MemberPicker,w.__assign(w.__assign({},
this.memberPickerProps),{showMemberPicker:!0,showCancel:!this._initialOpen})),this.domNode.querySelector(".js-member-picker"));k["default"].setVisibility(this._ownerArea,!1);this.group||(k["default"].setVisibility(this._folderArea,!1),k["default"].hideNode(this._folderPicker.domNode))};z.prototype._openFolderSelect=function(D){D&&D.preventDefault();this.group||(k["default"].showNode(this._folderPicker.domNode),k["default"].setVisibility(this._folderArea,!1),this._folderPicker.focus());k["default"].setVisibility(this._ownerArea,
!1)};z.prototype._folderSelectUpdate=function(D){this._folder=D;k["default"].hideNode(this._folderPicker.domNode);k["default"].setVisibility(this._folderArea,!0);k["default"].setVisibility(this._ownerArea,!0);this._populateCurrentFolder();this._folderEditButton&&this._folderEditButton.focus()};z.prototype._folderSelectCancel=function(){k["default"].hideNode(this._folderPicker.domNode);k["default"].setVisibility(this._folderArea,!0);k["default"].setVisibility(this._ownerArea,!0);this._folderEditButton&&
this._folderEditButton.focus()};z.prototype._memberSelectUpdate=function(D){var E=this;this._owner=D;C.render(C.h(p.MemberPicker,w.__assign(w.__assign({},this.memberPickerProps),{showMemberPicker:!1})),this.domNode.querySelector(".js-member-picker"));k["default"].setVisibility(this._ownerArea,!0);C.render(C.h(q.MemberThumb,{member:D,cssClasses:"member-browser-row-thumbnail margin-right-half"}),this.domNode.querySelector(".js-member-thumb"));this.domNode.querySelector(".js-fullname").innerHTML=D.fullName;
this.domNode.querySelector(".js-username").innerHTML=D.username;this._folder=null;this._ownerEditButton.focus();if(!this._initialOpen||this.group)this._primaryBtn.disabled=!1;this.group?this._fadeIn():this.canReassignOrgItems?(this._ownerEdit.classList.add("btn-disabled"),D.folders?(this._populateCurrentFolder(),this._folderPicker.updateUser(D),this._ownerEdit.classList.remove("btn-disabled"),this._fadeIn()):D.getFolders().then(function(A){D.folders=A;E._owner.folders=A;E._populateCurrentFolder();
E._folderPicker.updateUser(D);E._ownerEdit.classList.remove("btn-disabled");E._fadeIn()})):this.canReassignOwnItems&&(this._initialOpen||this._populateTransferFolder(),this._fadeIn());D.privileges?this._validateSelectedMember():this._fetchUser(D.username).then(function(A){E._owner=A;!A.privileges&&E.canReassignOwnItems?E.canReassignItems():E._validateSelectedMember()});this._initialOpen&&this._openOwnerSelect();this._initialOpen&&!this.group&&this.canReassignOwnItems&&(this._initialOpen=!1)};z.prototype._memberSelectCancel=
function(){C.render(C.h(p.MemberPicker,w.__assign(w.__assign({},this.memberPickerProps),{showMemberPicker:!1})),this.domNode.querySelector(".js-member-picker"));this._ownerEdit.focus();k["default"].setVisibility(this._ownerArea,!0);this._folder&&!this.group&&k["default"].setVisibility(this._folderArea,!0);this._ownerEditButton.focus();this.canReassignOwnItems&&this._populateTransferFolder();!this._owner.privileges&&this.canReassignOwnItems?this.canReassignItems():this._validateSelectedMember()};z.prototype._validateSelectedMember=
function(){var D,E=this.domNode.querySelector(".js-member-select-error");this._ownerEdit.classList.remove("input-error");E.classList.remove("is-active");var A=!1,F=d["default"].getUserRole(this._owner),H=F.isCustom(),I=!!this.group,L=this._owner.username===this.portal.portalUser.username;I||!H||F.canCreateItem()||L||(A=x["default"].changeOwner.warnings.cantOwnItems);(null===(D=this.group)||void 0===D?0:D.isOpenDataEnabled)&&!F.canDesignateOpenDataGroups()&&(A=x["default"].changeOwner.warnings.cantOwnOpenData);
D=F.isAdmin()||H&&F.canCreateUpdateCapableGroup();I&&this.group.isSharedOwnership&&!D&&(A=x["default"].changeOwner.warnings.cantOwnAccessUpdateGroups);I&&H&&!F.canCreateGroup()&&(A=x["default"].changeOwner.warnings.cantOwnGroups);I||L||!this.canReassignOwnItems||!H||F.canReceiveUserItems()||(A=x["default"].changeOwner.warnings.cantReceiveItems);A&&"string"===typeof A&&(E.innerHTML=A,E.classList.add("is-active"),this._ownerEdit.classList.add("input-error"))};z.prototype._populateTransferFolder=function(){k["default"].setVisibility(this._folderArea,
!0);k["default"].setVisibility(this._folderEdit,!0);this._folderEdit.classList.add("change-owner-card--disabled");k["default"].hideNode(this.domNode.querySelector(".js-folder-edit-button"));var D=new Date,E=D.getDate(),A=D.getMonth()+1;E=(10>E?"0":"")+E;A=(10>A?"0":"")+A;D=D.getFullYear().toString();this.reassignFolderName=this.portal.portalUser.username+"_"+D+"_"+A+"_"+E;this.domNode.querySelector(".js-folder-name").innerHTML=this.reassignFolderName};z.prototype._populateCurrentFolder=function(){var D;
k["default"].setVisibility(this._folderArea,!0);k["default"].setVisibility(this._folderEdit,!0);k["default"].hideNode(this._folderPicker.domNode);if(!this._folder){var E=this.items[0].ownerFolder,A=this.items.every(function(H){return H.ownerFolder===E}),F=h["default"].find(this._owner.folders,function(H){return H.id===E});this._folder=A&&F?F:this._owner.folders[0]}this.domNode.querySelector(".js-folder-name").innerHTML=this._folder.title;A=y["default"].inline[this._folder.id===this._owner.username?
"home":"folder"]["16"];this.domNode.querySelector(".js-folder-icon").innerHTML=A;null===(D=this._folderEditButton)||void 0===D?void 0:D.focus();this._initialOpen&&(k["default"].setVisibility(this._folderArea,!1),this._initialOpen=!1)};return z=w.__decorate([n["default"](a["default"],c["default"],b["default"])],z)}()})},"arcgisonline/pages/dijit/Overlay":function(){define("require exports tslib dojo/on dojo/debounce dojo/topic dojo/query dojo/has dojo/dom-class dojo/dom-construct dojox/uuid/generateRandomUuid dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase esri/Evented ../utils/formatters ../utils/icons ../utils/focus dojo/text!./Overlay/templates/Overlay.html dojo/i18n!../../nls/arcgisonline arcgisonline/tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);return function(){function x(){this.i18n=
g["default"];this.icons=h["default"];this.templateString=d["default"];this.hide=l["default"].hide;this._unsavedChanges=this.constrain=!1;this.maxWidth=null;this.showActionBar=!0;this.overlayContents=null;this._screenWidth=window.innerWidth;this._preventScrollClass=a["default"]("ios")?"ios-prevent-scroll":"overflow-hidden";this["class"]=this.title="";this.closeOnScrimClick=this.destroyOnClose=this.shouldScroll=!0;this.background="off-white";this.isDrillIn=!1;this.primaryBtnText=g["default"].common.save;
this.loadingText=g["default"].common.loading;this.uid=null}x.prototype.postMixInProperties=function(){this.inherited(arguments);this.uid=q["default"]();this.srcNodeRef||(this.srcNodeRef=p["default"].place(p["default"].create("div"),document.body,"last"))};x.prototype.postCreate=function(){this.inherited(arguments);p["default"].place(this.overlayContents,this._overlayContentWrapper,"only");this.showActionBar||b["default"].add(this._overlayContentWrapper,"overlay-content--no-actions");this.shouldScroll&&
b["default"].add(this._overlayContentWrapper,"overlay-content--scroll");this.constrain&&b["default"].add(this.domNode,"overlay--constrained");this.maxWidth&&(this._overlay.style.maxWidth=this.maxWidth+"px",this._screenWidth>=this.maxWidth&&b["default"].add(this.domNode,"overlay--max-width"));this._addEventListeners()};x.prototype._addEventListeners=function(){var y=this;this.own(f["default"].subscribe("overlay/open",function(){return y.open()}),v["default"](window,"resize",r["default"](function(B){return y.resizeHandler(B)},
30)),v["default"](this.closeBtn,"click",function(B){return y.handleCancel(B)}),v["default"](this._backArrow,"click",function(){return y.close()}),v["default"](this._primaryBtn,"click",function(B){return y.handlePrimary(B)}),v["default"](this._cancelBtn,"click",function(B){return y.handleCancel(B)}),v["default"](this._backgroundScrim,"click",function(B){return y.handleScrimClick(B)}),v["default"](document,"keyup",function(B){"Escape"===B.key&&y.close()}))};x.prototype.open=function(){var y=this;this.defaultOpener=
document.activeElement;var B=document.documentElement,C=B.scrollTop,z=document.body.scrollTop,D=B.classList.contains(this._preventScrollClass);window.getComputedStyle(this.domNode).opacity;c["default"](this.domNode).addClass("is-active");var E=e["default"].getFocusableElements(this.domNode);0<E.length&&E[0].focus();this._trapHandler=e["default"].trapFocus(this.domNode);this.render&&this.render();this.emit("open");(this.isDrillIn=D)||setTimeout(function(){a["default"]("ios")&&(y._bodyScrollTop=Math.max(window.pageYOffset,
C,z));b["default"].add(B,y._preventScrollClass)},300)};x.prototype.close=function(y){var B=this,C,z;this._unsavedChanges&&this.unsavedChangesText?this.confirmClose(this.unsavedChangesText).then(function(D){!0===D&&B._close()}):this._close();if(this.onClose&&"function"===typeof this.onClose)this.onClose();this.emit("close",y);y=this.opener||this.defaultOpener||document.body;null===(C=null===y||void 0===y?void 0:y.setFocus)||void 0===C?void 0:C.call(y);null===(z=null===y||void 0===y?void 0:y.focus)||
void 0===z?void 0:z.call(y)};x.prototype.confirmClose=function(y){var B=new t["default"];y=confirm(y);B.resolve(y);return B};x.prototype.showLoader=function(y){this._overlayLoaderText.textContent=y||"";this._overlayLoader.classList.add("is-active")};x.prototype.hideLoader=function(){this._overlayLoaderText.textContent="";this._overlayLoader.classList.remove("is-active")};x.prototype.setUnsaved=function(y){this._unsavedChanges=y};x.prototype.handlePrimary=function(y){};x.prototype.handleHelp=function(y){};
x.prototype.handleCancel=function(y){this.close()};x.prototype.handleScrimClick=function(y){this.closeOnScrimClick&&y.target===y.currentTarget&&this.close()};x.prototype.resizeHandler=function(y){y=window.innerWidth;this._screenWidth>=this.maxWidth&&y<this.maxWidth&&this.domNode.classList.remove("overlay--max-width");this._screenWidth<this.maxWidth&&y>=this.maxWidth&&this.domNode.classList.add("overlay--max-width");this._screenWidth=y};x.prototype._close=function(){this.domNode&&this.domNode.classList.remove("is-active");
this.isDrillIn||(b["default"].remove(document.documentElement,this._preventScrollClass),a["default"]("ios")&&(document.documentElement.scrollTop=this._bodyScrollTop,document.body.scrollTop=this._bodyScrollTop));this.destroyOnClose&&this._destroy()};x.prototype._destroy=function(){var y=this;this.domNode&&e["default"].untrapFocus(this.domNode,this._trapHandler);setTimeout(function(){return y.destroy()},300)};return x=w.__decorate([u["default"](n["default"],m["default"],k["default"])],x)}()})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],
function(){dojox.uuid.generateRandomUuid=function(){function K(){for(var f=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>f.length;)f="0"+f;return f}var G=K(),w=K();w=w.substring(0,4)+"-4"+w.substring(5,8);var v=K();v="8"+v.substring(1,4)+"-"+v.substring(4,8);var r=K();return(G+"-"+w+"-"+v+r).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(K){K.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";
dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(G,w){if(!G)throw w||(w="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(w);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=function(G){G=G.toString();var w=K.isString(G)&&36==G.length&&G==G.toLowerCase();if(w){G=
G.split("-");w=5==G.length&&8==G[0].length&&4==G[1].length&&4==G[2].length&&4==G[3].length&&12==G[4].length;for(var v in G){var r=parseInt(G[v],16);w=w&&isFinite(r)}}return w};dojox.uuid.getVariant=function(G){if(!dojox.uuid._ourVariantLookupTable){var w=dojox.uuid.variant,v=[];v[0]=w.NCS;v[1]=w.NCS;v[2]=w.NCS;v[3]=w.NCS;v[4]=w.NCS;v[5]=w.NCS;v[6]=w.NCS;v[7]=w.NCS;v[8]=w.DCE;v[9]=w.DCE;v[10]=w.DCE;v[11]=w.DCE;v[12]=w.MICROSOFT;v[13]=w.MICROSOFT;v[14]=w.UNKNOWN;v[15]=w.UNKNOWN;dojox.uuid._ourVariantLookupTable=
v}G=G.toString();G=G.charAt(19);G=parseInt(G,16);dojox.uuid.assert(0<=G&&16>=G);return dojox.uuid._ourVariantLookupTable[G]};dojox.uuid.getVersion=function(G){dojox.uuid.assert(dojox.uuid.getVariant(G)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");G=G.toString();G=G.charAt(14);return parseInt(G,16)};dojox.uuid.getNode=function(G){dojox.uuid.assert(dojox.uuid.getVersion(G)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");
G=G.toString();return G.split("-")[4]};dojox.uuid.getTimestamp=function(G,w){dojox.uuid.assert(dojox.uuid.getVersion(G)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");G=G.toString();w||(w=null);switch(w){case "string":case String:return dojox.uuid.getTimestamp(G,Date).toUTCString();case "hex":var v=G.split("-"),r=v[0],f=v[1];v=v[2];v=v.slice(1);r=v+f+r;dojox.uuid.assert(15==r.length);return r;case null:case "date":case Date:return v=G.split("-"),r=parseInt(v[0],
16),f=parseInt(v[1],16),v=(parseInt(v[2],16)&4095)<<16,v=4294967296*(v+f),v+=r,new Date(v/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+w)}};return dojox.uuid})},"arcgisonline/pages/components/MemberPicker":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../nls/arcgisonline arcgisonline/sharing/util arcgisonline/esriGeowConfig ../utils/keys ../portal/PortalUser ./MemberPickerRow ./preactHooks arcgisonline/sharing/dijit/_LevelAwareMixin".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m){var n=this;Object.defineProperty(G,"__esModule",{value:!0});G.MemberPicker=void 0;f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);p=w.__importDefault(p);G.MemberPicker=function(k){var l=t.useSetState({showCancel:k.showCancel||!0,selected:null,totalMembers:0,showMoreMembers:!1,showNoResults:!1,members:[],searchInput:"",initialFocus:!1}),h=l[0],e=l[1],d=r.useRef(null);l=r.useRef(null);r.useEffect(function(){u().then(function(J){e({totalMembers:J});
100>=J||k.allowEmptySearch?x().then(function(O){return e({members:O})}):e({showMoreMembers:!0})})},[]);r.useEffect(function(){var J=h.initialFocus;d.current&&J&&(g(),e({initialFocus:!1}))},[d,h.initialFocus]);r.useEffect(function(){k.showMemberPicker&&g()},[k.showMemberPicker]);r.useEffect(function(){e({showCancel:k.showCancel})},[k.showCancel]);var g=function(){var J;null===(J=d.current)||void 0===J?void 0:J.focus()},u=function(){return w.__awaiter(n,void 0,void 0,function(){var J,O,P;return w.__generator(this,
function(fa){switch(fa.label){case 0:return J=B("",1),O=y(),[4,c["default"].request({url:O,content:J})];case 1:return P=fa.sent(),[2,P.total]}})})},x=function(J){return w.__awaiter(n,void 0,void 0,function(){var O,P,fa,V;return w.__generator(this,function(ba){switch(ba.label){case 0:return O=k.portal,P=B(J),fa=y(),[4,c["default"].request({url:fa,content:P})];case 1:return V=ba.sent(),[2,(V.results||V.users).map(function(ka){return new p["default"](w.__assign(w.__assign({},ka),{portal:O}))})]}})})},
y=function(){var J=k.group;return(null===J||void 0===J?0:J.isBackedByEnterpriseGroup)?a["default"].restBaseUrl+"/community/groups/"+J.id+"/userlist":a["default"].restBaseUrl+"/portals/self/users/search"},B=function(J,O){var P,fa,V=k.group,ba=k.portal,ka=k.adminOnly,la=m.LevelAwareInfo.LICENSE_LEVELS,ma=la.ONE;la=la.ONE_PLUS_EDIT;ma=V?"":"-level:"+ma+" -level:"+la+" ";V=(null===V||void 0===V?0:V.leavingDisallowed)||(null===V||void 0===V?0:V.hiddenMembers)||ka?"role:org_admin":"";ka=J?"("+J+")":"";
la=ba.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav":"";if(null===(P=k.excludedUsernames)||void 0===P?0:P.length)la=k.excludedUsernames.reduce(function(ha,Z){return""+ha+(ha?" ":"")+"-username:"+Z},la);P={num:O||100,sortField:"relevance",sortOrder:"asc"};(null===(fa=k.group)||void 0===fa?0:fa.isBackedByEnterpriseGroup)?P.name=J:P.q=ka+" "+ma+" "+V+" orgid:"+ba.id+" "+la;return P};r.useEffect(function(){var J=h.members,O=h.searchInput,
P=h.totalMembers;0<(null===J||void 0===J?void 0:J.length)?e({showMoreMembers:!1,showNoResults:!1,selected:0}):e({showNoResults:0<O.length,showMoreMembers:0===O.length&&100<=P})},[h.members,h.totalMembers]);var C=function(J){var O=h.members,P=h.selected;k.selectUpdate(J||O[P])},z=function(J,O){var P=h.members;e({showCancel:!0});var fa=J,V=P.length-1;J>V?fa=0:0>J&&(fa=V);e({selected:fa});O||C(P[fa])},D=function(){var J;null===(J=d.current)||void 0===J?void 0:J.focus()},E=function(){e(function(J){return{showCancel:!J.showCancel}})};
t.useEventListener("keydown",function(J){var O=h.members,P=h.selected;if(k.showMemberPicker)switch(J.keyCode){case b.ESCAPE:k.selectCancel();break;case b.ENTER:J.preventDefault();(null===O||void 0===O?0:O[P])&&C();break;case b.UP:J.preventDefault();z(P-1,!0);break;case b.DOWN:J.preventDefault(),z(P+1,!0)}});var A=h.members,F=h.showCancel,H=h.selected,I=h.showMoreMembers,L=h.showNoResults;return v.h("div",{ref:l,"class":"member-picker "+(k.showMemberPicker?"":"hide")},v.h("div",{"class":"font-size--1 trailer-half flex"},
v.h("h4",{"class":"trailer-0 font-size--1 flex-1",id:"member-picker-label"},f["default"].changeOwner.newOwner),v.h("button",{"class":"btn-link font-size--1 flex-0 btn-link-off-black right "+(F?"":"hide"),onClick:k.selectCancel},f["default"].common.cancel)),v.h("label",{"for":"member-picker-input","class":"visually-hidden"},f["default"].changeOwner.searchMembers),v.h("input",{id:"member-picker-input","class":"member-picker-search",ref:d,onInput:function(J){var O=h.totalMembers;J=J.target.value;J!==
h.searchInput&&e({searchInput:J});(2<(null===J||void 0===J?void 0:J.length)||0<O&&100>=O||k.allowEmptySearch&&0===(null===J||void 0===J?void 0:J.length))&&x(J).then(function(P){return e({members:P})});0===J.length&&e({showNoResults:!1});0===J.length&&!k.allowEmptySearch&&100<=O&&e({members:[],showMoreMembers:!0})},placeholder:f["default"].changeOwner.searchMembers,"aria-controls":"member-results-list",type:"search",autocomplete:"off"}),0<A.length&&v.h("ul",{"class":"member-picker-results",id:"member-results-list",
role:"menu","aria-labelledby":"member-picker-label"},A.map(function(J,O){return v.h(q.MemberPickerRow,{key:J.id,member:J,isSelected:O===H,index:O,handleCancel:E,handleSelect:z,handleFocus:D})})),L&&v.h("p",{"class":"leader-1 trailer-1 font-size--2 padding-left-2 padding-right-2"},f["default"].changeOwner[k.group?"noUsersFoundGroup":"noUsersFoundItem"]),I&&v.h("p",{"class":"leader-1 trailer-1 font-size--2 padding-left-2 padding-right-2"},f["default"].changeOwner.tooManyUsers))}})},"arcgisonline/pages/utils/keys":function(){define(["require",
"exports"],function(K,G){Object.defineProperty(G,"__esModule",{value:!0});G.DOWN=G.RIGHT=G.UP=G.LEFT=G.TAB=G.SPACEBAR=G.ENTER=G.ESCAPE=void 0;G.ESCAPE=27;G.ENTER=13;G.SPACEBAR=32;G.TAB=9;G.LEFT=37;G.UP=38;G.RIGHT=39;G.DOWN=40;G["default"]={ESCAPE:G.ESCAPE,ENTER:G.ENTER,TAB:G.TAB,UP:G.UP,DOWN:G.DOWN,LEFT:G.LEFT,RIGHT:G.RIGHT,SPACEBAR:G.SPACEBAR}})},"arcgisonline/pages/components/MemberPickerRow":function(){define(["require","exports","preact","./MemberThumb","preact/hooks"],function(K,G,w,v,r){Object.defineProperty(G,
"__esModule",{value:!0});G.MemberPickerRow=void 0;G.MemberPickerRow=function(f){var c=f.member,a=f.isSelected,b=f.handleSelect,p=f.handleFocus,q=f.index,t=w.createRef();f=c.fullName;var m=c.username;r.useEffect(function(){a&&t.current&&t.current.scrollIntoView({behavior:"smooth"})},[a,t]);return w.h("li",{"class":"member-browser-row member-browser-row--select member-browser-row--on-gray member-browser-row--compact flex flex-center "+(a?"is-active":""),ref:t,role:"menuitem","aria-selected":a,"tab-index":"0",
onFocus:p,onClick:function(){b(q)}},w.h(v.MemberThumb,{member:c,cssClasses:"member-browser-row-thumbnail margin-right-half"}),w.h("div",{"class":"flex-1 flex flex-column margin-left-half"},w.h("h4",{"class":"member-browser-row-name avenir-bold font-size--1 trailer-0"},f),w.h("p",{"class":"trailer-0 font-size--2"},m)))}})},"arcgisonline/pages/components/MemberThumb":function(){define("require exports tslib preact preact/hooks arcgisonline/esriGeowConfig ../utils/strings".split(" "),function(K,G,w,
v,r,f,c){Object.defineProperty(G,"__esModule",{value:!0});G.MemberThumb=void 0;c=w.__importDefault(c);G.MemberThumb=function(a){var b=a.member,p=a.cssClasses;a=a.showTooltip;var q=r.useState(null),t=q[0],m=q[1],n=r.useState(null);q=n[0];var k=n[1],l=r.useState(null);n=l[0];var h=l[1];l=r.useState(!1);var e=l[0],d=l[1];r.useEffect(function(){var u,x,y;d(!1);m(b.thumbnailUrl||b.defaultThumbnailUrl);if(b.thumbnailUrl&&b.thumbnailUrl!==b.defaultThumbnailUrl){var B=(null===(x=null===(u=f.userInfo)||void 0===
u?void 0:u.credential)||void 0===x?void 0:x.token)||(null===(y=f.userInfo)||void 0===y?void 0:y.token);B&&-1===b.thumbnailUrl.indexOf("token")&&m(function(C){return""+C+(-1<b.thumbnailUrl.indexOf("?")?"\x26":"?")+"token\x3d"+B});k("");h("#FFFFFF")}else g()},[b]);var g=function(){var u=b.fullName,x=b.username;u.trim()?(u=u.split(" "),k(u[0].substring(0,1)+(u[1]?u[1].substring(0,1):""))):b.username&&k(x.substring(0,2));u=b.id;u=(null===u||void 0===u?void 0:u.substr(u.length-6))||"";c["default"].isValidHex(u)||
(u=c["default"].stringToHex(b.username));u=c["default"].hexToRgb(u);h("rgba("+u.r+","+u.g+","+u.b+",0.2)");d(!0)};return v.h("div",{"aria-label":a?b.fullName:"","class":a?"tooltip":""},v.h("div",{"class":"member-thumb "+(p||""),style:{backgroundColor:n}},v.h("img",{src:t,onError:g,alt:"","class":"margin-left-0 "+(e?"hide":"")}),v.h("div",{"class":"member-thumb__initials "+(e?"":"hide")},q),v.h("div",{"class":"member-thumb__edit-mask"},v.h("calcite-icon",{icon:"plusCircle",scale:"l"}))))}})},"arcgisonline/pages/components/preactHooks":function(){define(["require",
"exports","tslib","preact/hooks"],function(K,G,w,v){Object.defineProperty(G,"__esModule",{value:!0});G.useAsyncReference=G.useDebounce=G.useSetState=G.useEventListener=G.useWindowSize=void 0;G.useWindowSize=function(r){function f(){a({width:window.innerWidth,height:window.innerHeight})}r="object"!==typeof window;r=v.useState({width:r?1200:window.innerWidth,height:r?800:window.innerHeight});var c=r[0],a=r[1];v.useEffect(function(){window.addEventListener("resize",f);return function(){window.removeEventListener("resize",
f)}},[]);return c};G.useEventListener=function(r,f,c){void 0===c&&(c=window);var a=v.useRef();v.useEffect(function(){a.current=f},[f]);v.useEffect(function(){if(c&&c.addEventListener){var b=function(p){return a.current(p)};c.addEventListener(r,b);return function(){c.removeEventListener(r,b)}}},[r,c])};G.useSetState=function(r){void 0===r&&(r={});var f=v.useState(r);r=f[0];var c=f[1];f=v.useCallback(function(a){c(function(b){return w.__assign(w.__assign({},b),a instanceof Function?a(b):a)})},[c]);
return[r,f]};G.useDebounce=function(r,f){var c=v.useState(r),a=c[0],b=c[1];v.useEffect(function(){var p=setTimeout(function(){b(r)},f);return function(){clearTimeout(p)}},[r,f]);return a};G.useAsyncReference=function(r){var f=v.useRef(r),c=v.useState(!1)[1];return[f,function(a){Object.is(f.current,a)||(f.current=a,c(function(b){return!b}))}]}})},"arcgisonline/pages/dijit/ChangeOwner/FolderPicker":function(){define("require exports tslib dojo/text!./templates/FolderPicker.html dojo/i18n!../../../nls/arcgisonline dojo/Evented dojo/Deferred dojo/debounce dojo/string dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase ../../../tsutils/declareDecorator ../../../sharing/util ../../utils/organization ../../../esriGeowConfig ./FolderPickerRow ../../utils/dom ../../utils/keys ../../utils/icons".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);g=w.__importDefault(g);return function(){function u(x,y){this.templateString=v["default"];this.i18n=r["default"];
this.icons=g["default"];this._rows=[];this._selectedIndex=0;this._creatingFolder=!1}u.prototype.postMixInProperties=function(){this.inherited(arguments);this.containerClass=this.isMoveItem?"move-item-container":"member-picker"};u.prototype.postCreate=function(){var x=this,y;this.inherited(arguments);this.itemFolders=null===(y=this.items)||void 0===y?void 0:y.map(function(B){return B.ownerFolder});this._searchInput=this.domNode.querySelector(".js-search-input");this._noFolderRow=this.domNode.querySelector(".js-no-folder");
this._createFolderInlineLink=this._noFolderRow.querySelector(".js-create-folder-inline");this._createFolderInlineLink.addEventListener("click",this._showNewFolder.bind(this,!0));this._searchInput.addEventListener("input",a["default"](this._updateResults.bind(this),300));this.domNode.addEventListener("keydown",this._handleKeys.bind(this));this._newFolderForm=this.domNode.querySelector(".js-create-folder-form");this._newFolderForm.addEventListener("submit",function(B){var C,z;null===(z=null===(C=x.saveNewfolder(B))||
void 0===C?void 0:C.then)||void 0===z?void 0:z.call(C,function(D){x.emit("selectUpdate",D)})});this._newFolderInput=this._newFolderForm.querySelector(".js-create-folder-input");this._newFolderInput.addEventListener("input",a["default"](this._updateFolderResults.bind(this),300));this.isMoveItem?(y=this.domNode.querySelector(".js-folder-picker-cancel"),y.parentElement.removeChild(y),this._resultsDropdown.classList.add("move-item")):this.domNode.querySelector(".js-folder-picker-cancel").addEventListener("click",
function(B){x._cancelNewFolder();x._buildFolderList();x.emit("cancel")});this._createFolderButton=this.domNode.querySelector(".js-create-new-folder");this._createFolderButton.addEventListener("click",this._showNewFolder.bind(this,!1));this._showHideCreate()};u.prototype.shouldHideCreate=function(){var x=k["default"].getUserRole(this.portal.portalUser);return this.portal.portalUser.username!==this.user.username&&x.isCustom()&&x.canReassignOrgItems()};u.prototype._showHideCreate=function(){var x=this.shouldHideCreate();
e["default"].showHide(this._createFolderButton,!x);e["default"].showHide(this._createFolderInlineLink,!x)};u.prototype._buildFolderList=function(){var x=this,y;this._rows.forEach(function(C){return C.destroy()});this._rows=(this.user.folders||[]).map(function(C,z){var D=new h["default"]({folder:C,user:x.user,isMoveItem:x.isMoveItem},p["default"].place(p["default"].create("li"),x._resultsDropdown));D.on("select",function(){return x.emit("selectUpdate",C)});D.on("select",function(){return x._select(z)});
D.on("hover",function(){return x._active(z,!0)});return D});var B=null===(y=this.itemFolders)||void 0===y?void 0:y.filter(function(C,z){return C&&x.itemFolders.indexOf(C)===z});1===(null===B||void 0===B?void 0:B.length)?(y=this._rows.filter(function(C){return C.folder.id===B[0]})[0],y=this._rows.indexOf(y),-1!==y&&(this._active(y),this._select(y))):this._active(0);this._searchInput.value=""};u.prototype._updateResults=function(){var x=this._searchInput.value.toLowerCase(),y=this._rows.filter(function(B){var C=
B.folder.title.toLowerCase();C=!x||-1<C.indexOf(x);e["default"].showHide(B.domNode,C);return C});0===y.length&&(this._createFolderInlineLink.innerHTML=b["default"].substitute(this.i18n.folderDlg.createFolderInline,[x]));e["default"].showHide(this._noFolderRow,0===y.length)};u.prototype._checkMatchingFolder=function(x){var y=x.toLowerCase();return 0<this._rows.filter(function(B){return B.folder.title.toLowerCase()===y}).length};u.prototype._updateFolderResults=function(){this._checkMatchingFolder(this._newFolderInput.value)?
this._displayError("Unable to create folder.",this._newFolderInput.value):this._closeErrorMessage()};u.prototype._handleKeys=function(x){if(!this._creatingFolder)switch(x.keyCode){case d.ESCAPE:this.emit("cancel");break;case d.ENTER:x.preventDefault();this._createFolderInlineLink===document.activeElement?this._showNewFolder(!0):this._createFolderButton===document.activeElement&&this._showNewFolder(!1);if(x=this._rows[this._selectedIndex])this.emit("selectUpdate",x.folder),this._select(this._selectedIndex);
break;case d.UP:x.preventDefault();this._active(this._selectedIndex-1);break;case d.DOWN:x.preventDefault(),this._active(this._selectedIndex+1)}};u.prototype._select=function(x){if(x||0===x){var y=this._rows.length-1;x>y&&(x=0);0>x&&(x=y)}this._rows[x].select();this._rows.forEach(function(B,C){C!==x&&B.deselect()})};u.prototype._active=function(x,y){if(x||0===x){var B=this._rows.length-1;x>B&&(x=0);0>x&&(x=B);this._selectedIndex=x;this._rows[x].active();if(!y){var C=this._rows[x].domNode;B=C.parentElement;
var z=C.offsetTop;C=C.offsetHeight;var D=z+C;z<B.scrollTop?B.scrollTop=z:D>B.scrollTop+B.offsetHeight&&(B.scrollTop=z-B.offsetHeight+C)}}this._rows.filter(function(E,A){return A!==x}).forEach(function(E){return E.deactivate()})};u.prototype._showNewFolder=function(x){var y=this;this._creatingFolder=!0;x?(e["default"].hideNode(this._noFolderRow),this.saveNewfolder(void 0,!0).then(function(B){y.emit("selectUpdate",B)})):(e["default"].hideNode(this._createFolderButton),e["default"].showNode(this._newFolderForm),
this._active(),this._newFolderInput.focus(),this._newFolderForm.querySelector(".js-folder-create-cancel").addEventListener("click",this._cancelNewFolder.bind(this)))};u.prototype._cancelNewFolder=function(x){null===x||void 0===x?void 0:x.preventDefault();this._closeErrorMessage();this._creatingFolder=!1;e["default"].hideNode(this._newFolderForm);this._newFolderInput.value="";this.shouldHideCreate()||e["default"].showNode(this._createFolderButton)};u.prototype.focus=function(){this._searchInput.focus()};
u.prototype.updateUser=function(x){this.user=x;this._buildFolderList();this._showHideCreate()};u.prototype.hasUnsavedChanges=function(){return this._creatingFolder&&0<this._newFolderInput.value.length};u.prototype.saveNewfolder=function(x,y){var B=this;null===x||void 0===x?void 0:x.preventDefault();var C=l["default"].restBaseUrl+"/content/users/"+this.user.username+"/createFolder",z=y?this._searchInput.value:this._newFolderInput.value,D={title:z};if(null!==z&&void 0!==z&&z.trim())if(this._checkMatchingFolder(z))this._newFolderInput.focus();
else return this.emit("folderCreated",z),n["default"].request({url:C,content:D},{usePost:!0}).then(function(E){var A=new c["default"];!0===(null===E||void 0===E?void 0:E.success)&&(B._cancelNewFolder(),B.user.folders.unshift(E.folder),B._buildFolderList(),B._select(0),B._active(0),A.resolve(E.folder));return A},function(E){B._displayError(E.message,z)});else this._displayError(this.i18n.folderDlg.invalid.provideName,z)};u.prototype._displayError=function(x,y){var B;"Unable to create folder."===x&&
(B=""===y?this.i18n.folderDlg.invalid.provideName:b["default"].substitute(this.i18n.folderDlg.invalid.sameFolderName,[y]));var C=this.domNode.querySelector(".js-create-folder-error-message");C.innerHTML=B||x;this._newFolderInput.focus();C.classList.add("is-active");this._newFolderInput.classList.add("error")};u.prototype._closeErrorMessage=function(){this.domNode.querySelector(".js-create-folder-error-message").classList.remove("is-active");this._newFolderInput.classList.remove("error")};return u=
w.__decorate([m["default"](t["default"],q["default"],f["default"])],u)}()})},"arcgisonline/pages/dijit/ChangeOwner/FolderPickerRow":function(){define("require exports tslib dojo/text!./templates/FolderPickerRow.html dojo/i18n!../../../nls/arcgisonline ../../utils/icons dojo/Evented dijit/_TemplatedMixin dijit/_WidgetBase ../../../tsutils/declareDecorator".split(" "),function(K,G,w,v,r,f,c,a,b,p){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);
b=w.__importDefault(b);p=w.__importDefault(p);return function(){function q(t,m){this.templateString=v["default"];this.i18n=r["default"];this.icons=f["default"]}q.prototype.postMixInProperties=function(){this.inherited(arguments);this.folderIcon=f["default"].inline[this.user.username===this.folder.id?"home":"folder"]["16"]};q.prototype.postCreate=function(){var t=this;this.inherited(arguments);this._folderLink.addEventListener("click",function(m){m.preventDefault();t.emit("select")});this.domNode.addEventListener("click",
function(m){return t.emit("select")});this._folderLink.addEventListener("mouseover",function(m){return t.emit("hover")})};q.prototype.active=function(){this._folderLink.classList.add("is-active")};q.prototype.deactivate=function(){this._folderLink.classList.remove("is-active")};q.prototype.select=function(){this._folderLink.setAttribute("aria-selected","true");this._folderLink.classList.add("is-selected")};q.prototype.deselect=function(){this._folderLink.setAttribute("aria-selected","false");this._folderLink.classList.remove("is-selected")};
return q=w.__decorate([p["default"](b["default"],a["default"],c["default"])],q)}()})},"arcgisonline/pages/dijit/OverlayConfirm":function(){define("require exports tslib esri/Evented dojo/text!./Overlay/templates/OverlayConfirm.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ../utils/icons ../utils/focus ../utils/dom arcgisonline/tsutils/declareDecorator".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);
f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.templateString=r["default"];this.i18n=f["default"];this.icons=q["default"];this.cancelText=this.confirmText="";this.isActions=!1;this.showActions=this.showClose=!0;this.cssClasses="";this.noMask=!1;this._confirmDfd=new c["default"]}k.prototype.postCreate=
function(){this.inherited(arguments);this.domNode.removeAttribute("title");var l=".js-confirm-btn",h=".js-cancel-btn";this.isActions&&(l=".js-action-one",h=".js-action-two",m["default"].hideNode(this._buttons),m["default"].showNode(this._actions));this._confirmBtn=this.domNode.querySelector(l);this._cancelBtn=this.domNode.querySelector(h);m["default"].showHide(this._closeBtn,this.showClose);this.showActions||(m["default"].hideNode(this._buttons),m["default"].hideNode(this._actions));this.noMask&&
this.domNode.classList.add("overlay-confirm--no-mask");this.iconKey&&(this.domNode.classList.add("overlay-confirm--has-icon"),this.icon.innerHTML=this.icons[this.iconKey]["16"]);this._render();this._addEventListeners()};k.prototype._render=function(){this._title.textContent=this.title;this._description.innerHTML=this.description;this._confirmBtn.textContent=this.confirmText;this._cancelBtn.textContent=this.cancelText};k.prototype._addEventListeners=function(){this.own(p["default"](this._confirmBtn,
this._confirmResolve.bind(this,"onOk")),p["default"](this._cancelBtn,this._confirmResolve.bind(this,"onCancel")),p["default"](this._closeBtn,this._confirmResolve.bind(this,"onClose")))};k.prototype._confirmResolve=function(l){var h=this;this._hide();setTimeout(function(){h._confirmDfd.resolve(l);h.destroy();h.emit("close")},300)};k.prototype._hide=function(){this.domNode.classList.remove("is-active")};k.prototype.show=function(){var l=this;window.getComputedStyle(this.domNode).opacity;this.domNode.classList.add("is-active");
setTimeout(function(){l.showClose?l._closeBtn.focus():l._cancelBtn.focus();t["default"].trapFocus(l.domNode)},300);return this._confirmDfd};k.prototype.hide=function(){var l=this;this._hide();setTimeout(function(){l.destroy()},300)};return k=w.__decorate([n["default"](b["default"],a["default"],v["default"])],k)}()})},"arcgisonline/pages/dijit/MoveItem":function(){define("require exports tslib dojo/string dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ./Overlay ./OverlayConfirm ./ChangeOwner/FolderPicker ../utils/dom ../utils/alerts ../utils/arrays ../../sharing/util ../utils/icons ../../esriGeowConfig dojo/text!./ChangeOwner/templates/MoveItem.html dojo/i18n!../../nls/arcgisonline ../../tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);return function(){function g(u,x){this.title=e["default"].itemProperties.moveToFolder;
this.i18n=e["default"];this.icons=k["default"];this.constrain=!0;this.overlayContents=v["default"].substitute(h["default"],{i18n:e["default"],icons:k["default"]});this.maxWidth=600;this.loadingText=e["default"].common.updating}g.prototype.postMixInProperties=function(){this.inherited(arguments)};g.prototype.postCreate=function(){this.inherited(arguments);this._loader=this.domNode.querySelector(".js-overlay-loader")};g.prototype.open=function(){this.inherited(arguments);this.initUI();this.addListeners()};
g.prototype.close=function(u){this.inherited(arguments)};g.prototype.handlePrimary=function(){var u=this,x;(null===(x=this._folderPicker)||void 0===x?0:x.hasUnsavedChanges())?this._folderPicker.saveNewfolder().then(function(y){u._folder=y;u.updateItems()},this.updateItems.bind(this)):this.updateItems()};g.prototype.addListeners=function(){this.own(this._folderPicker.on("selectUpdate",this.folderSelectUpdate.bind(this)))};g.prototype.initUI=function(){this._folderPicker=new p["default"]({portal:this.portal,
user:this.owner,isMoveItem:!0,items:this.items},this.domNode.querySelector(".js-folder-picker"));this.memberSelectUpdate(this.owner);this._primaryBtn.disabled=!0};g.prototype.fadeIn=function(){var u=this.domNode.querySelector(".js-change-owner-wrapper");this.domNode.querySelector(".js-change-owner-loader").classList.remove("is-active");u.classList.add("animate-fade-in");q["default"].showNode(this._folderPicker.domNode);this._folderPicker.focus()};g.prototype.updateItems=function(){var u=this;this.moveItems(this.items).then(function(x){x=
x.results||[];var y=x.filter(function(z){return z.success}).map(function(z){return z.item}),B=x.filter(function(z){return z.error&&!z.success}),C=x.filter(function(z){return z.moveItems});0<C.length&&(C[0].results||[]).forEach(function(z){var D=m["default"].find(u.items,function(E){return E.id===z.itemId});z.success?y.push({success:!0,item:D}):B.push({error:z.error,item:D})});0===B.length&&0<y.length?u.handleSuccess(y):0<B.length&&0===y.length?u.handleError(B[0]):0<B.length&&0<y.length&&u.handlePartialSuccess(y,
B[0]);0===x.length&&u.handleSuccess()},this.handleError.bind(this))};g.prototype.moveItems=function(u){this._loader.classList.add("is-active");var x=this._folder.username===this._folder.id?"/":this._folder.id,y=u.filter(function(C){return(C.ownerFolder||"/")!==x}),B=new r["default"];0===y.length?B.resolve({moveItems:!0,results:[]}):n["default"].request({url:l["default"].restBaseUrl+"/content/users/"+this._owner.username+"/moveItems",content:{items:y.map(function(C){return C.id}).join(","),folder:x}},
{usePost:!0}).then(function(C){return B.resolve({moveItems:!0,results:C.results})},function(C){return B.resolve({error:C,items:u})});return B};g.prototype.handleSuccess=function(u){this._loader.classList.remove("is-active");u={newOwner:this._owner,newFolder:this._folder,updatedItems:u};t["default"].showAlert("success",e["default"].itemProperties[1<this.items.length?"itemsMovedSuccess":"itemMovedSuccess"]);this.close(u)};g.prototype.handleError=function(u){var x,y=u.error,B=u.itemId;u=y;"CONT_0014"===
y.messageCode&&(y=null===(x=this.items.filter(function(C){return C.id===B}))||void 0===x?void 0:x[0])&&(u=v["default"].substitute(e["default"].folderDlg.invalid.itemExists,[y.title,this._folder.folderAttributeName||this._folder.title]));this._loader.classList.remove("is-active");x=new b["default"]({title:e["default"].common.errorTitle,description:this._folder?u:e["default"].folderDlg.invalid.selectFolder,showActions:!1,cssClasses:"full-width text-constrain overlay-confirm-pane--error"});x.domNode.classList.add("position-absolute");
x.domNode.classList.add("fullscreen");this._overlay.appendChild(x.domNode);x.show()};g.prototype.handlePartialSuccess=function(u,x){var y,B=x.itemId,C=x.error;this._loader.classList.remove("is-active");var z={newOwner:this._owner,updatedItems:u,error:C},D=null===(y=this.items.filter(function(E){return E.id===B}))||void 0===y?void 0:y[0];t["default"].showAlert("success",e["default"].itemProperties[1<this.items.length?"itemsMovedSuccess":"itemMovedSuccess"]);"CONT_0014"===C.messageCode&&t["default"].showAlert("error",
v["default"].substitute(e["default"].folderDlg.invalid.itemExists,[D.title,this._folder.folderAttributeName||this._folder.title]));z.newFolder=this._folder;this.close(z)};g.prototype.openFolderSelect=function(u){null===u||void 0===u?void 0:u.preventDefault();q["default"].showNode(this._folderPicker.domNode);this._folderPicker.focus()};g.prototype.folderSelectUpdate=function(u){this._folder=u;this.populateCurrentFolder();this._primaryBtn.disabled=!1};g.prototype.memberSelectUpdate=function(u){var x=
this;this._owner=u;this._folder=null;u.folders?(this.populateCurrentFolder(),this._folderPicker.updateUser(u),this.openFolderSelect(),this.fadeIn()):u.getFolders().then(function(y){u.folders=y;x._owner.folders=y;x.populateCurrentFolder();x._folderPicker.updateUser(u);x.fadeIn()})};g.prototype.populateCurrentFolder=function(){if(!this._folder){var u=this.items[0].ownerFolder,x=this.items.every(function(B){return B.ownerFolder===u}),y=m["default"].find(this._owner.folders,function(B){return B.id===
u});this._folder=x&&y?y:this._owner.folders[0]}};return g=w.__decorate([d["default"](c["default"],f["default"],a["default"])],g)}()})},"arcgisonline/sharing/dijit/dialog/DeleteWarningDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.DeleteWarningDlg");K.require("dijit.Dialog");K.require("dijit._Widget");K.require("dijit._Templated");K.declare("arcgisonline.sharing.dijit.dialog.DeleteWarningDlg",
[G._Widget,G._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" id\x3d"delete-warning-dialog" class\x3d"general-dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.deleteWarningDlgTitle}"\x3e\r\n    \x3cdiv id\x3d"delete-warning-dialog-content" class\x3d"leader-quarter break-word"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriFloatTrailing right leader-1 clearfix flex flex-align-center"\x3e\r\n      \x3cspan id\x3d"delete-status" class\x3d"text-right margin-right-half" style\x3d"display: none;"\x3e${!i18n.deletingSpace}\x3c/span\x3e\r\n\t\x3c!-- "primary" / "calcite orange" used since this is a delete confirmation --\x3e\r\n      \x3cbutton id\x3d"button_delete-warning-submit" class\x3d"jevent calcite orange btn-delete" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.deleteLabel}\r\n      \x3c/button\x3e\r\n      \x3cbutton id\x3d"button_delete-warning-close" class\x3d"jevent cancel" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
handler:null,manualHide:!1,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.DeleteWarningDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common;K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").deleteWarningDlg)},postCreate:function(){this.loadConnections()},show:function(v,r,f,c){this.handler=f;this.clear();
if(null==r||""==r)r="item";G.byId("button_delete-warning-submit").set("disabled",!1);G.byId("button_delete-warning-close").set("disabled",!1);this.manualHide=c;f="";f=1==v?K.string.substitute(this.i18n.confirmDeleteItem,[r]):K.string.substitute(this.i18n.confirmDeleteItems,[v,r]);K.byId("delete-warning-dialog-content").innerHTML=f;K.byId("delete-warning-dialog_title").innerHTML=this.i18n.deleteLabel;K.byId("button_delete-warning-submit_label").innerHTML=this.i18n.deleteLabel;K.style(K.byId("delete-status"),
"display","none");G.byId("delete-warning-dialog").show()},showMsg:function(v,r,f){null!=v&&0!=v.length&&(this.handler=r,this.clear(),G.byId("button_delete-warning-submit").set("disabled",!1),G.byId("button_delete-warning-close").set("disabled",!1),this.manualHide=f,K.byId("delete-warning-dialog-content").innerHTML=v,K.byId("delete-warning-dialog_title").innerHTML=this.i18n.deleteLabel,K.byId("button_delete-warning-submit_label").innerHTML=this.i18n.deleteLabel,K.style(K.byId("delete-status"),"display",
"none"),G.byId("delete-warning-dialog").show())},showMsgTitleButton:function(v,r,f,c,a){null!=v&&0!=v.length&&(this.handler=c,this.clear(),G.byId("button_delete-warning-submit").set("disabled",!1),G.byId("button_delete-warning-close").set("disabled",!1),this.manualHide=a,K.byId("delete-warning-dialog-content").innerHTML=v,K.byId("delete-warning-dialog_title").innerHTML=r,K.byId("button_delete-warning-submit_label").innerHTML=f,K.style(K.byId("delete-status"),"display","none"),G.byId("delete-warning-dialog").show())},
renameDeleteButton:function(v){G.byId("button_delete-warning-submit").set("label",v)},renameCancelButton:function(v){G.byId("button_delete-warning-close").set("label",v)},clear:function(){},loadConnections:function(){this.own(K.query("#button_delete-warning-close").connect("onclick",function(v){v.preventDefault();if(this.onHide)this.onHide();G.byId("delete-warning-dialog").hide()}.bind(this)),K.query("#button_delete-warning-submit").connect("onclick",K.hitch(this,"submitRequest")))},submitRequest:function(v){v.preventDefault();
this.handler();this.manualHide?(K.style(K.byId("delete-status"),"display","inline-block"),G.byId("button_delete-warning-submit").set("disabled",!0),G.byId("button_delete-warning-close").set("disabled",!0)):G.byId("delete-warning-dialog").hide()},hide:function(){G.byId("delete-warning-dialog").hide()}})})},"arcgisonline/sharing/dijit/dialog/ExportDlg":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/pageUtil ../../../pages/serviceUtil ../../../pages/utils/categories ../../../pages/utils/dom ../../util ../SaveItem ./GeneralDlg ../../../tsutils/declareDecorator dijit/a11yclick dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Deferred dojo/promise/all dojo/string dojo/on dojo/topic esri/config esri/lang esri/Evented dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ExportDlg.html ../ComboBox".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=
w.__importDefault(y);B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);var D;(function(E){E.ShapeFile="Shapefile";E.CSV="CSV";E.FileGDB="File Geodatabase";E.GeoJson="GeoJson";E.FeatureCollection="Feature Collection";E.KML="KML";E.Excel="Excel";E.TilePackage="Tile Package";E.GeoPackage="GeoPackage"})(D||(D={}));return function(){function E(){this.declaredClass="arcgisonline.sharing.dijit.dialog.ExportDlg";this.widgetsInTemplate=!0;this.templateString=z["default"];this.layerId=-1;
this.init=!1;this.checkStatusInterval=null;this.checkingStatus=!1;this.statusCheckIntervalTime=4E3;this._setMessageAttr={node:"_message",type:"innerHTML"};this.typeLookup={shapefileType:D.ShapeFile,csvType:D.CSV,fileGDB:D.FileGDB,geoJson:D.GeoJson,featureCollection:D.FeatureCollection,kmlType:D.KML,excelType:D.Excel,CSV:"CSV Collection",KML:"KML Collection",Excel:"Microsoft Excel",tilePackage:D.TilePackage};this.requiredBorder="1px dotted orangered";this.normalBorder="1px solid #bbb"}E.prototype.onDone=
function(A){};E.prototype.postMixInProperties=function(){this.inherited(arguments);this.i18n=w.__assign(w.__assign(w.__assign({},C["default"].common),C["default"].exportDlg),{defaultError:C["default"].errorWidget.defaultError,generalize:C["default"].addLayerFromFileDlg.generalize,keepOrig:C["default"].addLayerFromFileDlg.keepOrig,notEnoughCreditsTitle:C["default"].publishTileServiceDlg.notEnoughCreditsTitle,itemProperties:C["default"].itemProperties});this._webMercatorValues={3857:1,102113:1,102100:1,
900913:1}};E.prototype.postCreate=function(){this.inherited(arguments);this.init||(this.init=!0,this.saveItem=new p["default"]({},this.saveItemForm))};E.prototype.startup=function(){this.inherited(arguments);x["default"].defaults.io.proxyUrl=v["default"].proxyServer;v["default"].proxyUrl&&(x["default"].defaults.io.proxyUrl=v["default"].proxyUrl)};E.prototype.destroy=function(){this._onSaveItemValidateHandle&&(this._onSaveItemValidateHandle.remove(),this._onSaveItemValidateHandle=null);this.exportDialog.destroyRecursive();
this._pendingCanceller=this.exportDialog=null;this.inherited(arguments)};E.prototype.show=function(A,F,H,I){var L=this;this.showDlg(A,F,H);I&&setTimeout(function(){L._message.style.maxWidth=L.saveItem.domNode.clientWidth+"px";L.setWait(!0);I.waitForCredits.then(function(J){L._pendingCanceller=null;if(J.success)return L.set("message",J.message),L.unsetWait();L.displayError(J,L.i18n.notEnoughCreditsTitle)},function(J){L._pendingCanceller=null;L.displayError(J)});L._pendingCanceller=I.canceller},0)};
E.prototype.showShapefile=function(A,F){this.showDlg(A,F,D.ShapeFile)};E.prototype.showCSV=function(A,F){this.showDlg(A,F,D.CSV)};E.prototype.showFileGDB=function(A,F){this.showDlg(A,F,D.FileGDB)};E.prototype.showGeoJson=function(A,F){this.showDlg(A,F,D.GeoJson)};E.prototype.showFeatureCollection=function(A,F){this.showDlg(A,F,D.FeatureCollection)};E.prototype.showDlg=function(A,F,H){this.clear();this.item=A;this.setDialogTitle(H);this.setLayerDetails(F);this.checkForStaleData(A,F);this.initTags();
this.initCategories();this.exportDialog.show();A=this.onCancel.bind(this);this.own(m["default"](this.exportDialog.closeButtonNode,A),g["default"](this.cancelBtn,"click",A),g["default"](this.exportBtn,"click",this.onExport.bind(this)));this.exportDialog.closeButtonNode.tabIndex=0};E.prototype.checkForStaleData=function(A,F){var H,I,L,J;(null===(H=A.layers)||void 0===H?0:H.length)&&"Feature Service"===A.type&&-1<A.typeKeywords.indexOf("Hosted Service")&&(F&&!F.length?J=null===(I=F.editingInfo)||void 0===
I?void 0:I.lastEditDate:A.layers.forEach(function(O){var P;(L=null===(P=O.editingInfo)||void 0===P?void 0:P.lastEditDate)&&(!J||J<L)&&(J=L)}))};E.prototype.initTags=function(){var A=this;this.saveItem.loadTags().then(function(){A.saveItem.set("tags",[])})};E.prototype.initCategories=function(){this.saveItem.loadCategories(this.item.categories)};E.prototype.setDialogTitle=function(A){this.exportType=A;A=this.i18n.itemProperties;var F=this.i18n.exportDialogTitle;D.ShapeFile===this.exportType?F=A.exportToShapefile:
D.CSV===this.exportType?F=A.exportToCSVFile:D.FileGDB===this.exportType?F=A.exportToFileGDB:D.GeoJson===this.exportType?F=A.exportToGeoJson:D.FeatureCollection===this.exportType?F=A.exportToFeatureCollection:D.KML===this.exportType?F=A.exportToKML:D.Excel===this.exportType?F=A.exportToExcel:D.TilePackage===this.exportType?F=A.exportToTilePackage:D.GeoPackage===this.exportType&&(F=A.exportToGeoPackage);this.exportDialog.set("title",F)};E.prototype.setLayerDetails=function(A){var F,H,I,L;this._isTableLayer=
this._isWebMercator=!1;A&&y["default"].isDefined(A.id)?(this.layerId=A.id,this._layers=[A],this.saveItem.set("title",A.name),this._isWebMercator=(null===(H=null===(F=A.extent)||void 0===F?void 0:F.spatialReference)||void 0===H?void 0:H.wkid)in this._webMercatorValues,this._extent=A.extent):A&&A.length&&(this._layers=A,this._isWebMercator=(null===(L=null===(I=A[0].extent)||void 0===I?void 0:I.spatialReference)||void 0===L?void 0:L.wkid)in this._webMercatorValues,this._isTableLayer=A.every(function(J){return"Table"===
J.type}),this._extent=A[0].extent,this.saveItem.set("title",1===A.length?A[0].name:this.item.title));this._isWebMercator&&!this._isTableLayer&&this.exportType===D.FeatureCollection&&(this.featureCollectionDiv.classList.remove("hide"),this.generalizeChk.checked=!0)};E.prototype.clear=function(){this.exportDialog.set("title",this.i18n.exportDialogTitle);this.item=null;this.layerId=-1;this.checkStatusInterval=this.exportResponse=this.exportType=null;this.checkingStatus=!1;this.saveItem.set("title","");
this.saveItem.set("tags",[]);this.saveItem.set("summary","");this.saveItem.set("requires",["title"]);this.exportingLabel.style.visibility="hidden";this.exportBtn.disabled=!0;this._onSaveItemValidateHandle=u["default"].subscribe("onSaveItemValidate",this.validate.bind(this));this.saveItem.hideRow("folder");a["default"].forEachNode(this.saveItem.domNode.querySelectorAll(".select2-container.select2-container-multi"),function(A){A.style.minWidth="33px"});this.featureCollectionDiv.classList.add("hide");
this.generalizeChk.checked=!1};E.prototype.hide=function(){return this.exportDialog.hide()};E.prototype.validate=function(A){A=this.saveItem.get("title");this.exportBtn.disabled=!A};E.prototype.validates=function(){return!!this.saveItem.get("title")};E.prototype.setWait=function(A){this.exportDialog.domNode.style.cursor="wait";A?this.set("message",this.i18n.estimatingCredits):this.exportingLabel.style.visibility="visible";this.exportBtn.disabled=!0};E.prototype.unsetWait=function(){this.exportDialog.domNode.style.cursor=
"default";this.exportingLabel.style.visibility="hidden";this.exportBtn.disabled=!1};E.prototype.exportImageryItem=function(){var A=this,F=this.saveItem.get("title");F=f["default"].exportImageryToTilePackage(this.item,F);var H=F.dfd;this._pendingCanceller=F.canceller;H.then(function(I){var L=I.success;I=I.outputValue;A._pendingCanceller=null;L&&I.itemId?(A.exportResponse={exportItemId:I.itemId},A.updateExportedItemDetails({itemId:I.itemId,statusMessage:""})):A.displayError(A.i18n.defaultError)},function(){A._pendingCanceller=
null;A.displayError(A.i18n.defaultError)})};E.prototype.exportItem=function(){var A=this;if(this._moveFailed)this.updateItem(this._moveFailed.itemId,"/").then(function(O){A.unsetWait();A.onDone(O)});else{this.setWait();if("Image Service"===this.item.type&&D.TilePackage===this.exportType)return this.exportImageryItem();var F=this.saveItem.get("title"),H=this.generalizeChk.checked,I={maxAllowableOffset:1,quantizationParameters:{tolerance:1}},L=D.ShapeFile;D.CSV===this.exportType?L=D.CSV:D.FileGDB===
this.exportType?L=D.FileGDB:D.GeoJson===this.exportType?L=D.GeoJson:D.FeatureCollection===this.exportType?L=D.FeatureCollection:D.KML===this.exportType?L="kml":D.Excel===this.exportType?L="excel":D.GeoPackage===this.exportType&&(L="geoPackage");var J=this._layers.map(function(O){return H?w.__assign({id:O.id},I):{id:O.id}});F={itemId:this.item.id,title:F,exportFormat:L,exportParameters:-1<this.layerId?{layers:J}:H?I:null};this.item.isOwner&&this.item.isDataView&&(F.exportParameters=w.__assign(w.__assign({},
F.exportParameters||{}),{enforceFieldVisibility:!0}));D.FileGDB===this.exportType&&(F.exportParameters=w.__assign(w.__assign({},F.exportParameters||{}),{exportContingentValues:!0}));F.exportParameters&&(F.exportParameters=JSON.stringify(F.exportParameters));L=b["default"].getUser();b["default"].request({url:v["default"].restBaseUrl+"content/users/"+L.username+"/export",content:F},{usePost:!0}).then(this.handleExport.bind(this),this.displayError.bind(this))}};E.prototype.handleExport=function(A){!A||
A.code||A.message?this.displayError(A):(this.exportResponse=A,this.checkStatusInterval=setInterval(this.checkStatus.bind(this),this.statusCheckIntervalTime))};E.prototype.checkStatus=function(){var A=this;if(this.exportResponse&&!this.checkingStatus){var F={jobId:this.exportResponse.jobId,jobType:"export"},H=b["default"].getUser();H=v["default"].restBaseUrl+"content/users/"+H.username+"/items/"+this.exportResponse.exportItemId+"/status";this.checkingStatus=!0;b["default"].request({url:H,content:F}).then(function(I){A.handleStatusCheck(I);
A.checkingStatus=!1},function(I){A.displayError(I);A.checkingStatus=!1})}};E.prototype.handleStatusCheck=function(A){"completed"===(null===A||void 0===A?void 0:A.status)?(clearInterval(this.checkStatusInterval),this.updateExportedItemDetails(A)):"failed"===A.status&&(clearInterval(this.checkStatusInterval),this.updateExportedItemDetailsAndFail(A))};E.prototype.updateExportedItemDetailsAndFail=function(A){var F=this;this.getItemDetails(this.exportResponse.exportItemId).then(function(H){var I=[],L=
v["default"].self.hasCategorySchema&&F.saveItem.get("categories")||[];0<L.length&&I.push(c["default"].setItemCategories([H.id],L));I.push(F.updateItem(H.id,H.ownerFolder));e["default"](I).then(function(){F.unsetWait();F.displayFailure(A.statusMessage)})})};E.prototype.updateExportedItemDetails=function(A){var F=this;this.getItemDetails(A.itemId).then(function(H){var I=[],L=v["default"].self.hasCategorySchema&&F.saveItem.get("categories")||[];0<L.length&&I.push(c["default"].setItemCategories([H.id],
L));I.push(F.updateItem(H.id,H.ownerFolder));e["default"](I).then(function(){F.unsetWait();F.onDone(A)})})};E.prototype.moveItem=function(A,F){var H=this,I=new h["default"],L=b["default"].getUser();L=v["default"].restBaseUrl+"content/users/"+L.username+"/items/"+A+"/move";var J={folder:F||"/"};this._moveFailed=null;F&&"/"!==F&&""!==F?b["default"].request({url:L,content:J},{usePost:!0}).then(function(O){I.resolve(O)},function(O){if(O&&"CONT_0011"===O.messageCode){var P=H.saveItem.get("title");P=d["default"].substitute(H.i18n.duplicateFound,
{type:H.exportType,title:P});r["default"].createSpecifiedDialog(q["default"]).show({title:H.i18n.errorTitle,message:P});H._moveFailed=w.__assign(w.__assign({},O),{itemId:A,folderId:F});H.unsetWait()}}):I.resolve({itemId:A});return I};E.prototype.updateItem=function(A,F){var H=this.saveItem.get("title"),I=this.saveItem.get("tags"),L=this.saveItem.get("summary"),J=this.saveItem.get("folderId"),O=v["default"].restBaseUrl+"content/items/"+this.exportResponse.exportItemId+"/data",P=b["default"].getUser();
P=v["default"].restBaseUrl+"content/users/"+P.username;F&&0<F.length&&(P+="/"+F);P+="/items/"+this.exportResponse.exportItemId+"/update";H={title:H,tags:I,snippet:L};this._moveFailed||(H.folderId=J);D.KML===this.exportType&&(H.url=O);return b["default"].request({url:P,content:H},{usePost:!0}).then(this.moveItem.bind(this,A,J))};E.prototype.getItemDetails=function(A){return b["default"].request({url:v["default"].restBaseUrl+"content/items/"+A})};E.prototype.goToItem=function(A){var F=this;this.hide().then(function(){F.unsetWait();
window.location.href=v["default"].baseUrl+"item.html?id\x3d"+A})};E.prototype.checkTitle=function(){var A=this.saveItem.get("title"),F=this.saveItem.get("folderId"),H=this.typeLookup[this.exportType]||this.exportType,I=b["default"].getUser().username;return b["default"].request({url:v["default"].restBaseUrl+"search",content:{q:'title:"'+A+'" AND type:"'+H+'" AND owner:"'+I+'" AND ownerfolder:"'+(F&&"/"!==F?F:"root")+'"'}})};E.prototype.displayFailure=function(A){var F=this;if(A)try{var H=JSON.parse(A)}catch(J){H=
A}var I=r["default"].createSpecifiedDialog(q["default"]);I.onOkClick=function(){I.hide();F.onCancel()};var L=this.i18n.errorTitle;H.message&&(A=H.message);I.show({title:L,message:A})};E.prototype.displayError=function(A,F){var H=this;F=F||this.i18n.errorTitle;if(A){var I=r["default"].createSpecifiedDialog(q["default"]);I.onOkClick=function(){I.hide();H.onCancel()};I.show({title:F,message:(null===A||void 0===A?0:A.code)&&A.message?A.message:A})}};E.prototype.onExport=function(){var A=this;this.validates()&&
this.checkTitle().then(function(F){0<F.total?(F=A.saveItem.get("title"),F=d["default"].substitute(A.i18n.duplicateFound,{type:A.typeLookup[A.exportType]||A.exportType,title:F}),r["default"].createSpecifiedDialog(q["default"]).show({title:A.i18n.errorTitle,message:F})):A.exportItem()})};E.prototype.onCancel=function(A){var F,H;null===(F=null===A||void 0===A?void 0:A.preventDefault)||void 0===F?void 0:F.call(A);null===(H=this._pendingCanceller)||void 0===H?void 0:H.call(this);this.hide();this.destroy()};
return E=w.__decorate([t["default"](n["default"],k["default"],l["default"],B["default"])],E)}()})},"arcgisonline/pages/serviceUtil":function(){define("require exports tslib dojo/Deferred dojo/json dojo/promise/all dojo/sniff esri/lang esri/layers/FeatureLayer esri/request esri/tasks/Geoprocessor ./pageUtil ./utils/arrays arcgisonline/sharing/dijit/Role ../sharing/util ../esriGeowConfig".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);
c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(){}h.getDateFields=function(e){return((null===e||void 0===e?void 0:e.fields)||[]).filter(function(d){return"esriFieldTypeDate"===(null===d||void 0===d?void 0:d.type)})};h.fetchServerToken=function(e,d){var g=e.portal,u=d||e.url;return u?k["default"].request({url:k["default"].getSecureUrl(g.portalUrl+
"generateToken"),content:{serverUrl:u}},{usePost:!0}).then(function(x){return x.token}):null};h.fetchItemAdminUrl=function(e,d){var g;return e.portal.isPortal?(null===d||void 0===d?0:d.adminUrl)&&d.url?this.getAdminUrl(e,d):e.url:(null===(g=e.url)||void 0===g?void 0:g.replace("/rest/","/rest/admin/"))||null};h.getAdminUrl=function(e,d){var g=e.url;g=g.replace(g.split("/rest/")[0],d.adminUrl);return e.isSDS||"Knowledge Graph"===e.type?g.replace("/rest/","/rest/admin/"):g.replace("/rest/","/admin/").replace("/FeatureServer",
".MapServer").replace("/MapServer",".MapServer").replace("/VectorTileServer",".VectorTileServer").replace("/SceneServer",".SceneServer").replace("/ImageServer",".ImageServer")};h.fetchServiceLayers=function(e){return k["default"].request({url:e+"/layers"}).then(function(d){return(null===d||void 0===d?void 0:d.layers)||[]})};h.renameServiceLayers=function(e,d){var g=new v["default"],u=d.adminUrl+"/"+e.layerId,x={name:e.layerRename};"Map Service"===d.type?(u+="/edit",x={layerDefinition:JSON.stringify(x)}):
(u+="/updateDefinition",x={updateDefinition:JSON.stringify(x),async:!1});k["default"].request({url:u,content:x},{usePost:!0}).then(function(){return g.resolve()},function(y){return g.reject(y)});return g};h.updateServiceDefinition=function(e){var d=e.layerId,g=e.item;e=e.definition;var u=new v["default"];k["default"].request({url:g.adminUrl+"/"+d+"/updateDefinition",content:{updateDefinition:JSON.stringify(e),async:!1}},{usePost:!0}).then(function(){return u.resolve()},function(x){return u.reject(x)});
return u};h.queryGeocodeCounts=function(e){var d=[],g=e.url,u={where:"1\x3d1",returnCountOnly:!0},x=e.reviewTable,y=g+"/"+(e.layers||[])[0].id+"/query",B=new v["default"];e.canUpdate&&e.isHostedService&&e.hasGeocodeReviewTable?(d.push(k["default"].request({url:y,content:u})),x&&(e=g+"/"+x.id+"/query",d.push(k["default"].request({url:e,content:u}))),f["default"](d).then(function(C){var z=(null===C||void 0===C?void 0:C.length)&&C[0].count||0;B.resolve({successful:z,total:z+(1<(null===C||void 0===C?
void 0:C.length)&&C[1].count||0)})},function(C){B.resolve(null)})):B.resolve(null);return B};h.adjustHostedServerForProtocol=function(e){return"https:"===location.protocol?e.replace("http:","https:").replace(":6080",":6443"):e.replace("https:","http:").replace(":6443",":6080")};h.checkForResources=function(e){var d=e.itemUrl+"/resources/styles/root.json";"Vector Tile Service"!==e.type||a["default"].isDefined(e.hasResources)?(d=new v["default"],d.resolve(!!e.hasResources)):d=k["default"].request({url:d}).then(function(){return!0},
function(){return!1});return d};h.setFeatureServiceScaleRanges=function(e){var d=this,g=new v["default"],u=e.url,x=e.sourceData||{},y=e.featureLayers||[];!e.numViews&&e.isHostedService&&"Feature Service"===e.type&&"Service Definition"!==x.type?f["default"](y.map(function(B){return d.setScaleRange(u+"/"+B.id,e,B.id)})).then(function(){return g.resolve(!0)}):g.resolve(!0);return g};h.setScaleRange=function(e,d,g){var u=new v["default"],x=new b["default"](e);e=d.adminUrl;g=a["default"].isDefined(g)?
"/"+g:"";var y=""+e+g+"/updateDefinition";x.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){x.statisticsPlugin.getSuggestedScaleRange().then(function(B){B={updateDefinition:r["default"].stringify({maxScale:B.maxScale||0,minScale:B.relaxedMinScale||0})};k["default"].request({url:y,content:B},{usePost:!0}).then(function(){return u.resolve(d)},function(){return u.resolve(d)})},function(B){u.resolve(d)})});return u};h.getSuggestedScaleRange=function(e){var d=new v["default"],g=new b["default"](e);
g.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){g.statisticsPlugin.getSuggestedScaleRange({sampleSize:100,forPublishingTiles:!0}).then(function(u){return d.resolve(u)},function(u){d.resolve(null)})},function(u){d.resolve(null)});return d};h.encodeServiceName=function(e,d){if(c["default"]("ie")||c["default"]("trident")||c["default"]("edge")){var g=e.indexOf("admin/services/Hosted/"),u=k["default"].isPortal()&&!d?-1<e.indexOf(".MapServer")?e.indexOf(".MapServer"):-1<e.indexOf(".VectorTileServer")?
e.indexOf(".VectorTileServer"):e.indexOf("/SceneServer"):e.indexOf("/FeatureServer");0<g&&(e=e.substring(0,g+22)+encodeURIComponent(e.substring(g+22,u))+e.substring(u))}return e};h.getImageryToTilePackageParams=function(e,d){var g,u=e.id,x=e.itemUrl||e.portal.portalUrl+"content/items/"+u,y=e.portal.getPortalUser();y=(null===(g=null===y||void 0===y?void 0:y.credential)||void 0===g?void 0:g.token)||(null===y||void 0===y?void 0:y.token);return{inputImageryLayer:JSON.stringify({itemId:u,url:x+"?token\x3d"+
y}),outputTilePackage:d||"tpk"+u,context:"{}"}};h.exportImageryToTilePackage=function(e,d,g){e=h.getImageryToTilePackageParams(e,d);e=w.__assign(w.__assign({},e),{f:"json"});return h.createImageryTask({taskName:"ExportToTilePackage",inputParameters:e,updateDelay:2E4,statusCallback:g,outputParameterName:"outTilePackage"})};h.fetchExportImageryCredits=function(e){e=h.getImageryToTilePackageParams(e);e={inputAnalysisTask:JSON.stringify({name:"ExportToTilePackage",parameters:e}),f:"json",context:"{}"};
return h.createImageryTask({taskName:"EstimateRasterAnalysisCost",inputParameters:e,updateDelay:2E3,outputParameterName:"outCost"})};h.createImageryTask=function(e){var d=e.taskName,g=e.updateDelay,u=e.inputParameters,x=e.outputParameterName,y=e.statusCallback,B=new v["default"],C=new q["default"](l["default"].self.helperServices.rasterAnalytics.url+"/"+d);g&&C.setUpdateDelay(g);var z,D=!1,E=function(A){return!D&&B.reject(A)};C.on("error",E);C.submitJob(u,function(A){if(!D)if("esriJobSucceeded"===
A.jobStatus){if(!x)return B.resolve({success:!0});C.getResultData(A.jobId,x).then(function(F){B.resolve({success:null!=(null===F||void 0===F?void 0:F.value),outputValue:null===F||void 0===F?void 0:F.value})},E)}else B.resolve({success:!1})},function(A){z=A.jobId;null===y||void 0===y?void 0:y(A)},E);return{canceller:function(){z&&(D=!0,C.cancelJobStatusUpdates(z),C.cancelJob(z,null,null))},dfd:B}};h.fetchBuildingSceneSubLayer=function(e,d,g){return new Promise(function(u){k["default"].request({url:e+
"/layers/"+d+"/sublayers/"+g}).then(function(x){u({layerId:d,subLayer:x})},function(){u({layerId:d,subLayer:{}})})})};h.fetchPartialUpdateBuildingScenePublishingCredits=function(e,d,g){var u=this,x=d.serviceInfo||{},y=x.layers||[],B=e.url+"/extractChanges",C={returnIdsOnly:!0,returnInserts:!0,returnUpdates:!0,returnDeletes:!0,layers:[],layerServerGens:[],async:!1,dataFormat:"json"},z={},D={textured:0,untextured:0},E=(d.portal||{}).portalUrl+"portals/self/usageCost",A={name:x.name,etype:"tilegencnt",
stype:"scene"},F;return new Promise(function(H){var I=[];g.forEach(function(L){var J,O;F=y.find(function(P){return P.id===L.id});(null===(J=F.sublayers)||void 0===J?void 0:J.filter(function(P){return"3DObject"===P.layerType}).map(function(P){return P.id})).forEach(function(P){I.push(u.fetchBuildingSceneSubLayer(d.url,L.id,P))});F.isTextured=!(null===(O=null===F||void 0===F?void 0:F.multiPatchInfo)||void 0===O||!O.hasTexture);z[L.id]=F});Promise.all(I).then(function(L){var J={};L.forEach(function(O){var P=
O.subLayer,fa=P.associatedLayerID;P=P.serviceUpdateTimeStamp.lastUpdate;J[fa]=O.layerId;C.layers.push(fa);C.layerServerGens.push({id:fa,serverGen:P})});k["default"].request({url:B,content:w.__assign(w.__assign({},C),{layers:JSON.stringify(C.layers),layerServerGens:JSON.stringify(C.layerServerGens)})},{usePost:!0}).then(function(O){(null===O||void 0===O?0:O.edits)?(Object.keys(O.edits).forEach(function(P){P=O.edits[P];var fa=P.objectIds;D[z[J[P.id]].isTextured?"textured":"untextured"]+=fa.adds.length+
fa.updates.length+fa.deletes.length}),f["default"]({textured:0<D.textured?k["default"].request({url:E,content:w.__assign({num:D.textured,task:"textured"},A)}):null,untextured:0<D.untextured?k["default"].request({url:E,content:w.__assign({num:D.untextured,task:"nontextured"},A)}):null}).then(function(P){var fa,V;P=((null===(fa=null===P||void 0===P?void 0:P.textured)||void 0===fa?void 0:fa.credits)||0)+((null===(V=null===P||void 0===P?void 0:P.untextured)||void 0===V?void 0:V.credits)||0);H(P)},function(){H(0)})):
H(0)},function(O){H(0)})},function(){H(0)})})};h.fetchPartialUpdateScenePublishingCredits=function(e,d,g){var u=new v["default"],x=(e.adminServiceInfo||{}).layers||[],y=d.serviceInfo||{},B=y.layers||[];e=e.url+"/extractChanges";var C={returnIdsOnly:!0,returnInserts:!0,returnUpdates:!0,returnDeletes:!0,layers:[],layerServerGens:[],async:!1,dataFormat:"json"},z={},D={textured:0,untextured:0},E=(d.portal||{}).portalUrl+"portals/self/usageCost",A={name:y.name,etype:"tilegencnt",stype:"scene"},F;g.forEach(function(H){var I;
C.layers.push(H.id);(F=m["default"].find(x,function(J){return J.id===H.id}))||1!==x.length||(F=x[0]);if(F){var L=H.id;L!==F.id&&(L=F.id);F.isTextured=!(null===(I=null===F||void 0===F?void 0:F.multiPatchInfo)||void 0===I||!I.hasTexture);z[L]=F}});B.forEach(function(H){-1<C.layers.indexOf(H.id)&&H.serviceUpdateTimeStamp&&C.layerServerGens.push({id:H.id,serverGen:H.serviceUpdateTimeStamp.lastUpdate})});k["default"].request({url:e,content:w.__assign(w.__assign({},C),{layers:JSON.stringify(C.layers),layerServerGens:JSON.stringify(C.layerServerGens)})},
{usePost:!0}).then(function(H){(null===H||void 0===H?0:H.edits)?(Object.keys(H.edits).forEach(function(I){I=H.edits[I];var L=I.objectIds;D[z[I.id].isTextured?"textured":"untextured"]+=L.adds.length+L.updates.length+L.deletes.length}),f["default"]({textured:0<D.textured?k["default"].request({url:E,content:w.__assign({num:D.textured,task:"textured"},A)}):null,untextured:0<D.untextured?k["default"].request({url:E,content:w.__assign({num:D.untextured,task:"nontextured"},A)}):null}).then(function(I){var L,
J;I=((null===(L=null===I||void 0===I?void 0:I.textured)||void 0===L?void 0:L.credits)||0)+((null===(J=null===I||void 0===I?void 0:I.untextured)||void 0===J?void 0:J.credits)||0);u.resolve(I)},function(){u.resolve(0)})):u.resolve(0)},function(H){u.resolve(0)});return u};h.fetchScenePublishingCredits=function(e,d,g){var u=new v["default"],x=e.adminServiceInfo||{},y=x.layers||[],B=e.url+"/query",C={},z={},D={textured:0,untextured:0},E=(e.portal||{}).portalUrl+"portals/self/usageCost",A={name:x.name,
etype:"tilegencnt",stype:"scene"},F;d.length&&g?y.forEach(function(H){var I;H.isTextured=!(null===(I=null===H||void 0===H?void 0:H.multiPatchInfo)||void 0===I||!I.hasTexture);z[H.id]=H;C[H.id]="1\x3d1"}):d.forEach(function(H){var I;(F=m["default"].find(y,function(J){return J.id===H.id}))||1!==y.length||(F=y[0]);if(F){var L=H.id;L!==F.id&&(L=F.id);F.isTextured=!(null===(I=null===F||void 0===F?void 0:F.multiPatchInfo)||void 0===I||!I.hasTexture);z[L]=F;C[L]="1\x3d1"}});k["default"].request({url:B,content:w.__assign(w.__assign({},
{}),{layerDefs:JSON.stringify(C),returnCountOnly:!0})}).then(function(H){(null===H||void 0===H?0:H.layers)?(H.layers.forEach(function(I){D[z[I.id].isTextured?"textured":"untextured"]+=I.count}),f["default"]({textured:0<D.textured?k["default"].request({url:E,content:w.__assign({num:D.textured,task:"textured"},A)}):null,untextured:0<D.untextured?k["default"].request({url:E,content:w.__assign({num:D.untextured,task:"nontextured"},A)}):null}).then(function(I){var L,J;I=((null===(L=null===I||void 0===
I?void 0:I.textured)||void 0===L?void 0:L.credits)||0)+((null===(J=null===I||void 0===I?void 0:I.untextured)||void 0===J?void 0:J.credits)||0);u.resolve(I)},function(){u.resolve(0)})):u.resolve(0)},function(){u.resolve(0)});return u};h.getServerLicenseInfo=function(e){e+="/admin/system/licenses";return k["default"].request({url:e},{useProxy:l["default"].isDebug||k["default"].shouldUseProxy(e)})};h.findManagedDataStoreItems=function(e){e+="/admin/data/findItems";return k["default"].request({url:e,
content:{managed:!0}},{useProxy:l["default"].isDebug||k["default"].shouldUseProxy(e)})};h.findRasterStoreItems=function(e){e+="/admin/data/findItems";return k["default"].request({url:e,content:{types:"rasterStore",decrypt:!0}},{useProxy:l["default"].isDebug||k["default"].shouldUseProxy(e)})};h.isBackedBySDS=function(e){var d,g=new v["default"],u=(null===(d=null===l["default"]||void 0===l["default"]?void 0:l["default"].self)||void 0===d?void 0:d.user)||{};d=new n["default"]({portalUser:u});var x=!1,
y;u&&(d.isBasedOnAdmin()||d.isBasedOnPublisher())&&e&&!t["default"].isEmptyObject(e)?this.findManagedDataStoreItems(e.adminUrl).then(function(B){y=((null===B||void 0===B?void 0:B.items)||B||[]).filter(function(C){var z;return"arcgis data store"===(null===(z=null===C||void 0===C?void 0:C.provider)||void 0===z?void 0:z.toLowerCase())});x=!(null===y||void 0===y||!y.length);g.resolve(x)},function(){g.resolve(x)}):g.resolve(x);return g};h.isImageManagementTask=function(e){if(!e||-1===e.indexOf("RasterAnalysisTools")||
-1===e.indexOf("GPServer/"))return!1;e=e.slice(e.indexOf("GPServer/")+9);-1<e.indexOf("/")&&(e=e.slice(0,e.indexOf("/")));var d="buildfootprints buildoverview calculatestatistics definenodata computecolorcorrection computeseamlines".split(" ");return e&&-1<d.indexOf(e.toLowerCase())};h.getBackingDataStoreInfo=function(e){var d,g=new v["default"],u=(null===(d=null===l["default"]||void 0===l["default"]?void 0:l["default"].self)||void 0===d?void 0:d.user)||{};d=new n["default"]({portalUser:u});var x=
!0,y=!1,B=!1,C=!1,z,D,E;u&&(d.isBasedOnAdmin()||d.isBasedOnPublisher())&&e&&!t["default"].isEmptyObject(e)?this.findManagedDataStoreItems(e.adminUrl).then(function(A){A=(null===A||void 0===A?void 0:A.items)||A||[];z=A.filter(function(F){var H;return"arcgis data store"===(null===(H=null===F||void 0===F?void 0:F.provider)||void 0===H?void 0:H.toLowerCase())});D=A.filter(function(F){var H,I,L;return"arcgis data store"===(null===(H=null===F||void 0===F?void 0:F.provider)||void 0===H?void 0:H.toLowerCase())&&
"spatiotemporal"===(null===(L=null===(I=F.info)||void 0===I?void 0:I.dsFeature)||void 0===L?void 0:L.toLowerCase())});E=A.filter(function(F){var H,I,L,J;return"arcgis data store"===(null===(H=null===F||void 0===F?void 0:F.provider)||void 0===H?void 0:H.toLowerCase())&&"nosql"===(null===(I=F.type)||void 0===I?void 0:I.toLowerCase())&&"graphstore"===(null===(J=null===(L=F.info)||void 0===L?void 0:L.dsFeature)||void 0===J?void 0:J.toLowerCase())});x=0===A.length;y=!(null===z||void 0===z||!z.length);
B=!(null===D||void 0===D||!D.length);C=!(null===E||void 0===E||!E.length);g.resolve({isSDS:y,isSTDS:B,isGraph:C,none:x})},function(){g.resolve({isSDS:y,isSTDS:B,isGraph:C,none:x})}):g.resolve({isSDS:y,isSTDS:B,isGraph:C,none:x});return g};h.cacheMaxAgeCheck=function(e,d){var g;if(!e.ignoreCache&&e.layers&&"Feature Service"===e.type&&e.isHostedService&&0<(null===(g=null===d||void 0===d?void 0:d.adminServiceInfo)||void 0===g?void 0:g.cacheMaxAge)&&(e.ignoreCache=function(){var x=this;this.ignoreCacheFlagTimestamp=
(new Date).getTime();var y=function(B){B.content=B.content||{};B.content._ts=x.ignoreCacheFlagTimestamp;return B};this.ignoreCacheFlag||(p["default"].setRequestPreCallback(y),this.ignoreCacheFlag=!0)},e.layers)){var u=0;e.layers.forEach(function(x){var y;(null===(y=x.editingInfo)||void 0===y?0:y.lastEditDate)&&u<x.editingInfo.lastEditDate&&(u=x.editingInfo.lastEditDate)});0<u&&((new Date).getTime()-u)/1E3<d.adminServiceInfo.cacheMaxAge&&e.ignoreCache()}};h.isServiceProxy=function(e){var d=(e||"").toLowerCase();
e=-1<d.indexOf("/servers/")&&-1<d.indexOf("/rest/services/");var g=l["default"].self.isPortal&&-1<d.indexOf(l["default"].self.portalHostname);d=!l["default"].self.isPortal&&-1<d.indexOf(".arcgis.com");return e&&(g||d)};h.ASYNC_POLL_INTERVALS=[2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,2E3,15E3,15E3,3E4,3E4,3E4,3E4,3E4,3E4,3E4,3E4,3E4,3E4,12E4];return h}()})},"arcgisonline/pages/utils/categories":function(){define("require exports tslib ../../esriGeowConfig ../../sharing/util dojo/Deferred".split(" "),
function(K,G,w,v,r,f){function c(n,k){var l=new f["default"],h=[];v["default"].self.hasCategorySchema&&k.length?(n=a([],n),n.forEach(function(e){var d={};d[e]={categories:k};h.push(d)}),r["default"].request({url:v["default"].restBaseUrl+"content/updateItems",content:{items:JSON.stringify(h)}},{usePost:!0}).then(function(){return l.resolve()},function(){return l.resolve()})):l.resolve();return l}function a(n,k){var l=[].concat(n||[]);(null!==k&&void 0!==k?k:[]).forEach(function(h){h&&-1===l.indexOf(h)&&
l.push(h)});return l}function b(n){delete n.isOpen;delete n.depth;delete n.order;n.categories&&(n.categories=n.categories.map(b));return n}function p(n,k,l){void 0===k&&(k="");void 0===l&&(l={});l.__total=l.__total||0;n.forEach(function(h){var e=k+"/"+h.title;e=e.trim();l.__total+=1;l[e]=l.__total;h.categories&&p(h.categories,e,l)});return l}function q(n){var k;(n=null===(k=null===n||void 0===n?void 0:n[0])||void 0===k?void 0:k.title)&&"/"!==n.charAt(0)&&(n="/"+n);return n||"/Categories"}function t(n,
k){return{id:n.id,categories:k?n.groupCategories:n.categories}}function m(n){var k=n.group;n=n.portal;return r["default"].request({url:v["default"].restBaseUrl+(k?"content/groups/"+k.id+"/search":"search"),content:{num:0,q:k?"":"orgid:"+n.id,countFields:k?"groupCategories":"categories",countSize:200}}).then(function(l){return l.aggregations.counts[0].fieldValues})}Object.defineProperty(G,"__esModule",{value:!0});G.getCounts=G.simplifyItemObject=G.getRootNode=G.getSchemaOrder=G.cleanSchema=G.concatUniqueIds=
G.setItemCategories=void 0;v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);G.setItemCategories=c;G.concatUniqueIds=a;G.cleanSchema=b;G.getSchemaOrder=p;G.getRootNode=q;G.simplifyItemObject=t;G.getCounts=m;G["default"]={setItemCategories:c,concatUniqueIds:a,cleanSchema:b,getSchemaOrder:p,getRootNode:q,simplifyItemObject:t,getCounts:m}})},"arcgisonline/sharing/dijit/SaveItem":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/CategoryPicker ../../pages/utils/arrays ../../pages/utils/dom ../../pages/utils/storage ../util ../geow/Folder ../../tsutils/declareDecorator arcgis-components/wrappers/Tags dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/Deferred dojo/on dojo/topic dojo/data/ItemFileWriteStore dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SaveItem.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);return function(){function y(B,C){this.declaredClass=
"arcgisonline.sharing.dijit.SaveItem";this.widgetsInTemplate=!0;this.templateString=x["default"];this.baseClass="esriAGOSaveItemForm";this.init=!1;this.folders={}}y.prototype.postMixInProperties=function(){this.i18n=w.__assign(w.__assign(w.__assign({},u["default"].common),u["default"].saveItem),{addTags:u["default"].itemCompleteness.addTags})};y.prototype.postCreate=function(){this.inherited(arguments);this.init||(this.saveItemTags=new m.TagsWrapper(this.saveItemTagsContainer,{activeTags:[],knownTags:[],
maxWidth:"100%",minWidth:"100%"}),this.getFolders(),this.init=!0)};y.prototype.startup=function(){this.inherited(arguments);this.initHandlers()};y.prototype.hideRow=function(B){a["default"].hideNodes(this.domNode.querySelectorAll(".save-item-"+B+"-row"))};y.prototype.loadTags=function(B){var C=p["default"].getUser();B&&(C=B);return p["default"].loadUserTags(C.username)};y.prototype.loadCategories=function(B){var C=this,z=new h["default"],D=this.domNode.querySelectorAll(".categories-container");v["default"].self.hasCategorySchema?
p["default"].request({url:v["default"].restBaseUrl+"portals/self/categorySchema"}).then(function(E){C.categories=new f["default"]({categories:B||[],schema:E.categorySchema},C.saveItemCategories);C.categories.startup();a["default"].showNodes(D);z.resolve()},function(){a["default"].hideNodes(D);z.resolve()}):(a["default"].hideNodes(D),z.resolve());return z};y.prototype.initHandlers=function(){var B=this.validate.bind(this);this.own(e["default"](this.saveItemFolder,"change",this.onFolderChange.bind(this)),
e["default"](this.saveItemTitle,"change",B),e["default"](this.saveItemSummary,"change",B),r["default"].registerKeystrokeHandler(this.saveItemTitle,B),r["default"].registerKeystrokeHandler(this.saveItemSummary,B))};y.prototype.validate=function(){var B,C;if(!this.beingDestroyed){var z=!0,D=this.saveItemTitle.get("value"),E=(null===(C=null===(B=this.saveItemTags)||void 0===B?void 0:B.getTags())||void 0===C?void 0:C.join(","))||"";B=this.saveItemSummary.get("value");null===this.requires?z=!!(D&&E&&B):
(c["default"].includes(this.requires,"title")&&(z=z&&!!D),c["default"].includes(this.requires,"tags")&&(z=z&&0!==E.length),c["default"].includes(this.requires,"summary")&&(z=z&&!!B));d["default"].publish("onSaveItemValidate",[z])}};y.prototype.getFolders=function(){var B=this,C=p["default"].getUser();if(null!==C){var z=new g["default"]({url:null,data:{identifier:"name",items:[]}});z.newItem({name:C.username,id:""});this.saveItemFolder.set("store",z);this.saveItemFolder.set("value",C.username);q["default"].getFolders(function(D){var E=
null,A=b["default"].getCookie("ESRI_Content");A&&A.folderId&&(E=A.folderId);B.foldersJson=D.folders;D.folders.forEach(function(F,H){z.newItem({name:F.title,id:F.id});B.folders["id"+F.id]=F.title.replace(/"/g,'\\"');E===F.id&&(B.saveItemFolder.set("value",F.title),B.folderId=E,B.folderName=F.title)});z.save({})},function(D){})}};y.prototype.onFolderChange=function(B){var C=this;this.saveItemFolder.get("store").fetch({onComplete:function(z){z.forEach(function(D){D.name[0]===B&&(C.folderId=D.id[0],C.folderName=
D.name[0])})}})};y.prototype._setTitleAttr=function(B){this.saveItemTitle.set("value",B)};y.prototype._getTitleAttr=function(){return this.saveItemTitle.get("value")};y.prototype._setTagsAttr=function(B){this.saveItemTags.setTags(B)};y.prototype._getTagsAttr=function(){return this.saveItemTags.getTags()};y.prototype._setCategoriesAttr=function(B){var C=this;B&&B.forEach(function(z){C.categories.addCategory(z)})};y.prototype._getCategoriesAttr=function(){return this.categories.getCategories(!0)};y.prototype._setSummaryAttr=
function(B){this.saveItemSummary.set("value",B)};y.prototype._getSummaryAttr=function(){return this.saveItemSummary.get("value")};y.prototype._setFolderAttr=function(B){var C=this;this.saveItemFolder.get("store").fetch({onComplete:function(z){z.forEach(function(D){D.name[0]===B&&(C.folderId=D.id[0],C.folderName=D.name[0],C.saveItemFolder.set("value",C.folderName))})}})};y.prototype._getFolderAttr=function(){return this.folderName};y.prototype._setFolderIdAttr=function(B){var C=this;this.saveItemFolder.get("store").fetch({onComplete:function(z){z.forEach(function(D){D.id[0]===
B&&(C.folderId=D.id[0],C.folderName=D.name[0],C.saveItemFolder.set("value",D.name[0]))})}})};y.prototype._getFolderIdAttr=function(){return this.folderId};y.prototype._setRequiresAttr=function(B){this.requires=B?B:null};y.prototype._setTitlePlaceHolderAttr=function(B){this.saveItemTitle.set("placeHolder",B)};y.prototype._setTagsPlaceHolderAttr=function(B){this.saveItemTitle.set("placeHolder",B)};y.prototype._setSummaryPlaceHolderAttr=function(B){this.saveItemSummary.set("placeHolder",B)};return y=
w.__decorate([t["default"](k["default"],n["default"],l["default"])],y)}()})},"arcgisonline/pages/dijit/CategoryPicker":function(){define("require exports tslib dojo/has dojo/topic dojo/query dojo/string dojo/dom-class dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase ../utils/categories ../utils/formatters ../utils/icons dojo/text!./CategoryPicker/templates/CategoryPicker.html dojo/text!./CategoryPicker/templates/Category.html dojo/text!./CategoryPicker/templates/CategoryGroup.html dojo/text!./CategoryPicker/templates/CategoryChip.html dojo/i18n!../../nls/arcgisonline ../../tsutils/declareDecorator ../utils/dom ../../esriGeowConfig esri/Evented".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);
return function(){function B(C,z){var D=this;this.templateString=k["default"];this.i18n=d["default"];this.icons=n["default"];this.defaultText="";this.categoriesLimit=20;this.globalClickListener=function(E){E=E.target;E.classList.contains("js-add-category-dropdown-link")||E.classList.contains("js-add-category-dropdown-button")||E.classList.contains("js-add-category-input")||D.closeCategoryDropdown()}}B.prototype.postMixInProperties=function(){var C=this,z,D,E;this.inherited(arguments);this.rootNode=
t["default"].getRootNode(this.schema);this.schema=(null===(D=null===(z=this.schema)||void 0===z?void 0:z[0])||void 0===D?void 0:D.categories)||[];this.categories=(null===(E=this.categories)||void 0===E?void 0:E.map(function(A){return C.removeRoot(A)}))||[];this.alwaysOpen=this.alwaysOpen||!1;this.categorySortHash=t["default"].getSchemaOrder(this.schema)};B.prototype.startup=function(){var C,z;this.inherited(arguments);if(null===(C=x["default"].portal)||void 0===C?0:C.maxCategoriesPerItem)this.categoriesLimit=
null===(z=x["default"].portal)||void 0===z?void 0:z.maxCategoriesPerItem;this.domNode.querySelector(".js-add-category-error").textContent=c["default"].substitute(d["default"].contentCategories.addCategoryError,{number:this.categoriesLimit});this.setCategories(this.categories);this.addEventListeners()};B.prototype.hideError=function(){f["default"](".js-add-category-error",this.domNode).removeClass("is-active")};B.prototype.setCategories=function(C,z){var D=this;C.map(function(E){return z?D.removeRoot(E):
E}).filter(function(E){return D.categorySortHash[E]});this.categories=C.map(function(E){return z?D.removeRoot(E):E}).filter(function(E){return D.categorySortHash[E]});this.rebuildCategoryChips();this.buildCategoryDropdown();this.alwaysOpen&&this.domNode.classList.add("category-picker--always-open")};B.prototype.getCategories=function(C){var z=C?this.rootNode:"";return this.categories.map(function(D){return""+z+D})};B.prototype.removeCategory=function(C,z){var D=this,E;this.categories.length<=this.categoriesLimit&&
u["default"].forEachNode(this.domNode.querySelectorAll(".js-add-category-error"),function(I){return I.classList.remove("is-active")});var A=this.domNode.querySelector(".js-category-chip[data-category-name\x3d'"+C+"']"),F=this.domNode.querySelector(".js-category-picker-item[data-category-path\x3d'"+C+"']"),H=F&&u["default"].querySelectorAllAsArray(".js-category-picker-item.is-active",F);H=null===H||void 0===H?void 0:H.map(function(I){return I.getAttribute("data-category-path")});if(-1<this.categories.indexOf(C)||
0<(null===H||void 0===H?void 0:H.length))null===(E=null===A||void 0===A?void 0:A.parentNode)||void 0===E?void 0:E.removeChild(A),this.categories=this.categories.filter(function(I){return I!==C}),F.classList.remove("is-active"),H.forEach(function(I){D.removeCategory(I)}),z&&r["default"].publish("categories/update"),this.emit("change",this.categories),this.rebuildCategoryChips();this.buildCategoryDropdown()};B.prototype.addCategory=function(C,z){if(0>this.categories.indexOf(C))if(this.categories=this.categories.filter(function(F){return 0>
C.indexOf(F+"/")}),this.categories.length<this.categoriesLimit){this.categories.push(C);var D=this.domNode.querySelector('.js-category-picker-item[data-category-path\x3d"'+C+'"]'),E=0<f["default"](D.parentElement).closest(".js-category-picker-item").length,A=[D];if(E)for(;D.parentElement.parentElement.classList.contains("js-category-picker-item");)D=D.parentElement.parentElement,A.push(D);A.forEach(function(F){return F.classList.add("is-active")});z&&r["default"].publish("categories/update");this.emit("change",
this.categories);this.rebuildCategoryChips()}else u["default"].querySelectorAllAsArray(".js-add-category-error",this.domNode).forEach(function(F){return F.classList.add("is-active")})};B.prototype.disable=function(){this.domNode.classList.add("category-picker--disabled")};B.prototype.enable=function(){this.domNode.classList.remove("category-picker--disabled")};B.prototype.buildCategoryDropdown=function(){if(this.domNode){var C=this.domNode.querySelector(".js-add-category-dropdown-menu");C&&(C.innerHTML=
this.categoriesToDom(this.schema,"",!0))}};B.prototype.categoriesToDom=function(C,z,D){var E=this;C=C.reduce(function(A,F){var H=z?z+"/"+F.title:"/"+F.title,I=F.categories?E.categoriesToDom(F.categories,H):"",L=H===E.selectedCategory?"is-selected":"",J=-1<E.categories.indexOf(H)||0<E.categories.filter(function(O){return-1<O.indexOf(H+"/")}).length;return A+c["default"].substitute(l["default"],{title:F.title,children:I,path:H,isActive:J?"is-active":"",isSelected:L,icons:n["default"]})},"");return c["default"].substitute(h["default"],
{categories:C,icons:n["default"],role:D?"tree":"group"})};B.prototype.addEventListeners=function(){this.inherited(arguments);this.own(f["default"](".js-add-category-dropdown-menu",this.domNode).on("click",this.treeLinkClick.bind(this)),f["default"](".js-category-chip-wrap",this.domNode).on("click",this.categoryChipClick.bind(this)),f["default"](".js-add-category-dropdown-button",this.domNode).on("click",this.toggleCategoryDropdown.bind(this)),f["default"](".js-add-category-input",this.domNode).on("keydown",
this.addCategoryKeyDown.bind(this)),f["default"](".js-add-category-input",this.domNode).on("keyup",this.addCategoryKeyUp.bind(this)))};B.prototype.treeLinkClick=function(C){var z,D=C.target;a["default"].contains(D,"js-add-category-dropdown-link")&&(C.preventDefault(),C=D.getAttribute("data-category-path"),D.parentNode.classList.contains("is-active")?this.removeCategory(C,!0):this.addCategory(C,!0),null===(z=this.domNode.querySelector(".js-add-category-input"))||void 0===z?void 0:z.focus())};B.prototype.categoryChipClick=
function(C){C.preventDefault();C=C.target;a["default"].contains(C,"js-category-chip-remove")&&(C=C.getAttribute("data-category-name"),this.removeCategory(C,!0))};B.prototype.toggleCategoryDropdown=function(){this.domNode.querySelector(".js-add-category-dropdown").classList.contains("is-active")?this.closeCategoryDropdown():this.openCategoryDropdown()};B.prototype.openCategoryDropdown=function(){var C=this.domNode.querySelector(".js-add-category-input"),z=this.domNode.querySelector(".js-add-category-dropdown");
C.value="";z.classList.add("is-active");C.focus();window.addEventListener("click",this.globalClickListener);if(v["default"]("trident")||v["default"]("edge"))C=this.domNode.closest(".dijitContentPane"),this.originalScrollTop&&this.originalScrollTop!==C.scrollTop?C.scrollTop=this.originalScrollTop:(this.originalScrollTop=C.scrollTop,C.scrollTop+=2)};B.prototype.closeCategoryDropdown=function(){this.alwaysOpen||(u["default"].querySelectorAllAsArray(".js-add-category-dropdown",this.domNode).forEach(function(C){return C.classList.remove("is-active")}),
this.selectedCategory=null);window.removeEventListener("click",this.globalClickListener);this.buildCategoryDropdown()};B.prototype.addCategoryKeyDown=function(C){9===C.keyCode?this.closeCategoryDropdown():13===C.keyCode&&this.domNode.querySelector(".js-add-category-dropdown").classList.contains("is-active")&&C.preventDefault()};B.prototype.addCategoryKeyUp=function(C){var z,D,E=C.keyCode,A=null===(z=C.target)||void 0===z?void 0:z.value;z=u["default"].querySelectorAllAsArray(".js-add-category-dropdown-link",
this.domNode);var F=u["default"].querySelectorAllAsArray(".js-category-picker-item",this.domNode);u["default"].hideNodes(z);u["default"].hideNodes(F);var H=function(I){return-1<I.getAttribute("data-category-path").toLowerCase().indexOf(A.toLowerCase())};F=z.filter(function(I){var L=H(I);I=0<u["default"].querySelectorAllAsArray(".js-add-category-dropdown-link",I.parentNode).filter(H).length;return L||I}).map(function(I){var L;I.classList.remove("hide");null===(L=I.parentNode)||void 0===L?void 0:L.classList.remove("hide");
return I});z=this.domNode.querySelector(".js-add-category-dropdown-link.is-selected");switch(E){case 27:this.closeCategoryDropdown();break;case 13:C.preventDefault();z&&(E=z.getAttribute("data-category-path"),(null===(D=z.parentNode)||void 0===D?0:D.classList.contains("is-active"))?this.removeCategory(E,!0):this.addCategory(E,!0),z.classList.add("is-selected"));break;case 40:case 38:C.preventDefault(),C=F.indexOf(z),D=F[C+1]?F[C+1]:F[0],C=F[C-1]?F[C-1]:F[F.length-1],E=40===E?D:C,z&&z.classList.remove("is-selected"),
a["default"].add(E,"is-selected"),this.selectedCategory=E.getAttribute("data-category-path")}};B.prototype.rebuildCategoryChips=function(){var C=this,z=this.domNode.querySelector(".js-category-chip-wrap");b["default"].empty(z);var D=this.categories.sort(function(E,A){return C.categorySortHash[E]-C.categorySortHash[A]});D.forEach(function(E){var A=c["default"].substitute(d["default"].contentCategories.removeCategoryX,{category:E});E=c["default"].substitute(e["default"],{category:E,removeText:A,icons:n["default"]},
null,m["default"]);b["default"].place(E,z)});this.defaultText&&u["default"].showHide(this.defaultTextContainer,0===D.length)};B.prototype.removeRoot=function(C){return C.replace(new RegExp(this.rootNode+"/"),"/")};return B=w.__decorate([g["default"](q["default"],p["default"],y["default"])],B)}()})},"arcgisonline/sharing/geow/Folder":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/clone ../util dojo/promise/all dojo/topic dojo/when dojo/data/ItemFileReadStore".split(" "),
function(K,G,w,v,r,f,c,a,b,p){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);return function(){function q(){}q.createFolder=function(t,m,n){var k=f["default"].getUser();return(k=k&&(k.username||k.email))?this.createFolderByUser(k,t,m,n):null};q.createFolderByUser=function(t,m,n,k){var l=this;f["default"].getUser()&&f["default"].request({url:v["default"].restBaseUrl+"content/users/"+t+
"/createFolder",content:m},{usePost:!0}).then(function(h){var e;if(null===(e=l._userFolders)||void 0===e?0:e[t])l._userFolders[t]=null;n(h)},function(h){k(h)})};q.deleteFolder=function(t,m,n){var k=f["default"].getUser();return(k=k&&(k.username||k.email))?this.deleteFolderByUser(k,t,m,n):null};q.deleteFolderByUser=function(t,m,n,k){var l=this;m=v["default"].restBaseUrl+"content/users/"+t+"/"+m+"/delete";f["default"].getUser()&&f["default"].request({url:m},{usePost:!0}).then(function(h){var e;if(null===
(e=l._userFolders)||void 0===e?0:e[t])l._userFolders[t]=null;n(h)},function(h){k(h)})};q.getFolders=function(t,m,n){var k=f["default"].getUser();return(k=k&&(k.username||k.email))?this.getFoldersByUser(k,t,m,n):null};q.getFoldersByUser=function(t,m,n,k){var l=this,h;if(f["default"].getUser())if(this._isRequestingFolders)setTimeout(this.getFoldersByUser.bind(this,t,m,n,k),75);else{"function"!==typeof n&&(k=n,n=null);this._userFolders||(this._userFolders={});var e=v["default"].restBaseUrl+"content/users/"+
t;k={num:k?100:1};e=(null===(h=this._userFolders[t])||void 0===h?void 0:h.folders)&&r["default"](this._userFolders[t].folders)||this._fetchAllItems(e,k).then(function(d){l._userFolders[t]={folders:d};l._isRequestingFolders=!1;return r["default"](d)},function(d){throw d;});this._isRequestingFolders=!this._userFolders[t]||!this._userFolders[t].folders;b["default"](e,m,n)}};q._fetchAllItems=function(t,m){var n=this,k={};return this._fetchItems(t,m,k).then(function(l){if(1<m.num&&l.total>m.num){var h=
Math.ceil(l.total/m.num),e=l.nextStart,d=[];1===(null===l||void 0===l?void 0:l.start)?k=l:k.items=k.items.concat(l.items);for(var g=0;g<h-1;g++)d.push(n._fetchItems(t,w.__assign(w.__assign({},m),{start:e}),k)),e+=l.num;return c["default"](d).then(function(u){(u||[]).forEach(function(x){k.items=k.items.concat(x.items)});return k})}return l},function(l){throw l;})};q._fetchItems=function(t,m,n){return f["default"].request({url:t,content:m}).then(function(k){return k},function(k){throw k;})};q.foldersToStore=
function(t){return new p["default"]({data:{label:"title",items:[{name:"Anonymous User",children:t}]}})};q.updateMoveToMenu=function(t,m,n,k,l){a["default"].publish("updateItemToolbar",[{folders:t,folderId:m,folderName:n,onClickHandler:k,customMenuItem:l}])};q.updateMoveToMenuByUser=function(t,m,n,k,l){a["default"].publish("updateItemToolbar",[{username:t,folders:m,folderId:n,folderName:k,onClickHandler:l}])};return q}()})},"arcgis-components/wrappers/Tags":function(){define(["../Component","../Inputs/Tags/index"],
function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==
typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=987)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=
typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}
function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;
y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;
e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&
d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,k){return(t=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=K},713:function(w,v){w.exports=G},987:function(w,v,r){r.r(v);
r.d(v,"TagsWrapper",function(){return p});var f=r(0),c=r(16);w=r(713);r=r.n(w);var a=function(q,t){switch(t.type){case "UPDATE_ACTIVE_TAGS":return Object(f.a)(Object(f.a)({},q),{activeTags:t.payload});case "UPDATE_KNOWN_TAGS":return Object(f.a)(Object(f.a)({},q),{knownTags:t.payload});default:return q}},b=Object(c.connect)(function(q){return{activeTags:q.activeTags,knownTags:q.knownTags}},function(q){return{onChange:function(t){q({type:"UPDATE_ACTIVE_TAGS",payload:t})}}})(r.a),p=function(){function q(t,
m){this.renderContainer=t;this.store=Object(c.createStore)(a,{activeTags:m.activeTags,knownTags:m.knownTags});this.projector=Object(c.createProjector)(this.store,function(n){return n(b,Object(f.a)({key:"wrapped-tags"},m))},this.renderContainer)}return q.prototype.destroy=function(){this.projector.stop();this.renderContainer.remove?this.renderContainer.remove():this.renderContainer.parentNode&&this.renderContainer.parentNode.removeChild(this.renderContainer)},q.prototype.focus=function(){var t=this.renderContainer.querySelector("input");
t&&t.focus()},q.prototype.getTags=function(){return this.store.getState().activeTags},q.prototype.setTags=function(t){this.store.dispatch({type:"UPDATE_ACTIVE_TAGS",payload:t})},q.prototype.getKnownTags=function(){return this.store.getState().knownTags},q.prototype.setKnownTags=function(t){this.store.dispatch({type:"UPDATE_KNOWN_TAGS",payload:t})},q.prototype.watchTags=function(t){var m=this,n=this.store.getState().activeTags;return this.store.subscribe(function(){var k=m.store.getState().activeTags;
k!==n&&t(n=k)})},q}()}})})},"arcgis-components/Inputs/Tags/index":function(){define(["../../Component","dojo/i18n!../../Inputs/Tags/nls/resources"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=859)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<
h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}
function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=
B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?
B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});
r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},18:function(w,v){w.exports=
K},417:function(w,v){w.exports=G},545:function(w,v,r){v.a=function(f,c){var a=f.name;return c("li",{"class":"inp-tags__tag",key:a},c("span",{title:a,"class":"inp-tags__tag-innards",onkeydown:f.onKeyDown,id:"tag-"+a,tabindex:"-1"},a,c("button",{"class":"inp-tags__tag-remove-btn","data-value":a,onclick:f.onRemove,tabindex:"-1",type:"button"},c("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 32 32"},c("path",{d:"M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"})))))}},
546:function(w,v,r){var f=r(417);v.a=function(c,a){var b=c.onSuggestionFocus,p=c.onSuggestionBlur,q=c.onSuggestionClick,t=c.onSuggestionKeyDown;if(!c.visible)return null;var m=c.matchingTags.map(function(k,l){return a("li",{id:"suggestion-"+l,classes:{"inp-tags__suggestion":!0,"inp-tags__suggestion--grey":0==l%2,"inp-tags__suggestion--white":0!=l%2},"data-value":k,"data-index":l,key:k,title:k,onfocus:b,onblur:p,onmousedown:q,onkeydown:t,tabindex:"0"},k)}),n=a("div",{"class":"inp-tags__no-suggestions",
id:"no-matching-div"},a("div",{"class":"inp-tags__no-suggestions-text",id:"no-matching-text"},f.noTagsFound));return a("ul",{id:"tag-suggestions","class":"inp-tags__suggestions",key:"tag-suggestions"},m[0]?m:n)}},859:function(w,v,r){r.r(v);var f=r(0);w=r(18);var c=r(417),a=r(545),b=r(546);r=function(p){function q(t){t=p.call(this,t)||this;return t.state={value:"",isFocused:!1,isTyping:!1,hasBeenFocused:!1},t.handleInputBlur=t.handleInputBlur.bind(t),t.handleInputChange=t.handleInputChange.bind(t),
t.handleInputFocus=t.handleInputFocus.bind(t),t.handleInputKeyDown=t.handleInputKeyDown.bind(t),t.handleSuggestionBlur=t.handleSuggestionBlur.bind(t),t.handleSuggestionClick=t.handleSuggestionClick.bind(t),t.handleSuggestionFocus=t.handleSuggestionFocus.bind(t),t.handleSuggestionKeyDown=t.handleSuggestionKeyDown.bind(t),t.handleWidgetClick=t.handleWidgetClick.bind(t),t.spliceTag=t.spliceTag.bind(t),t.handleTagInputKeyDown=t.handleTagInputKeyDown.bind(t),t}return Object(f.d)(q,p),q.prototype.render=
function(t){var m=this,n={"inp-tags__active-tags":!0,"inp-tags__active-tags--focused":this.state.isFocused},k=this.props.knownTags.filter(function(l){return-1!==l.toLowerCase().indexOf(m.state.value.toLowerCase())&&-1===m.props.activeTags.indexOf(l)});return t("div",{id:"tags-container",classes:{"inp-tags__container":!0},style:"\n                        min-width: "+(this.props.minWidth?this.props.minWidth:"auto")+";\n                        max-width: "+(this.props.maxWidth?this.props.maxWidth:"auto")+
";\n                    "},t("ul",{classes:n,key:"active-tags",id:"active-tags"},this.props.activeTags.filter(function(l){return l}).map(function(l){return t(a.a,{name:l,onRemove:m.spliceTag,onKeyDown:m.handleTagInputKeyDown})}),t("input",{id:"tags-input","class":"inp-tags__input",placeholder:c.addTags,value:this.state.value,onkeydown:this.handleInputKeyDown,onfocus:this.handleInputFocus,onblur:this.handleInputBlur,oninput:this.handleInputChange,afterCreate:this.handler})),t(b.a,{matchingTags:k,onSuggestionBlur:this.handleSuggestionBlur,
onSuggestionClick:this.handleSuggestionClick,onSuggestionFocus:this.handleSuggestionFocus,onSuggestionKeyDown:this.handleSuggestionKeyDown,visible:this.state.isTyping}))},q.prototype.handler=function(t){},q.prototype.addTag=function(t,m){var n=this;void 0===m&&(m=!0);var k=[];t.split(",").forEach(function(h){(h=n.stripHTML(h.trim()))&&-1===n.props.activeTags.indexOf(h)&&-1===k.indexOf(h)&&k.push(h)});this.props.onChange(this.props.activeTags.concat(k));var l=document.getElementById("tags-input");
l&&m&&l.focus()},q.prototype.spliceTag=function(t){t=t.currentTarget||t.target;var m=Object(f.g)([],this.props.activeTags);m.splice(this.props.activeTags.indexOf(t.dataset.value),1);this.props.onChange(m)},q.prototype.handleInputBlur=function(t){var m=this;setTimeout(function(){var n=document.getElementById("tags-container");(null==n?0:n.contains(document.activeElement))||(m.addTag(t.target.value,!1),m.setState({value:"",hasBeenFocused:!0,isFocused:!1,isTyping:!1}))})},q.prototype.handleInputChange=
function(t){this.setState({value:t.target.value})},q.prototype.handleInputFocus=function(){this.setState({isFocused:!0})},q.prototype.handleInputKeyDown=function(t){switch(t.key){case "Enter":t.target.value&&(this.addTag(t.target.value),this.setState({value:"",isTyping:!1}),(m=document.getElementById("tags-input"))&&(m.focus(),m.value=""));break;case "Tab":var m;t.target.value&&(t.preventDefault(),this.addTag(t.target.value),this.setState({value:"",isTyping:!1}),(m=document.getElementById("tags-input"))&&
(m.focus(),m.value=""));break;case "Backspace":t.target.value||(t=Object(f.g)([],this.props.activeTags),t.pop(),this.props.onChange(t),this.setState({value:"",isTyping:!1}));break;case "Down":case "ArrowDown":m=document.getElementById("suggestion-0");this.state.isTyping&&m?(t.preventDefault(),m.focus()):this.setState({isTyping:!0});break;case "Up":case "ArrowUp":case "Left":case "ArrowLeft":this.focusElement(document.getElementById("tag-"+this.props.activeTags[this.props.activeTags.length-1]));break;
default:this.setState({isTyping:!0})}},q.prototype.handleSuggestionBlur=function(t){t.preventDefault();this.setState({isFocused:!1,isTyping:!1})},q.prototype.handleSuggestionClick=function(t){t.preventDefault();this.addTag(t.target.dataset.value);this.setState({value:"",isFocused:!0,isTyping:!1});(t=document.getElementById("tags-input"))&&(t.focus(),t.value="")},q.prototype.handleSuggestionFocus=function(t){t.preventDefault();this.setState({isFocused:!0,isTyping:!0})},q.prototype.handleSuggestionKeyDown=
function(t){switch(t.preventDefault(),t.key){case "Up":case "ArrowUp":0===t.target["data-index"]?this.focusElement(document.getElementById("tags-input")):this.focusElement(document.getElementById("suggestion-"+(t.target["data-index"]-1)));break;case "Down":case "ArrowDown":(t=document.getElementById("suggestion-"+(t.target["data-index"]+1)))?t.focus():this.focusElement(document.getElementById("suggestion-0"));break;case "Tab":case "Enter":this.handleSuggestionClick(t);break;case "Escape":t.preventDefault(),
this.focusElement(document.getElementById("tags-input"))}},q.prototype.handleWidgetClick=function(t){(t=document.getElementById("tags-input"))&&t.focus()},q.prototype.handleTagInputKeyDown=function(t){var m=document.activeElement.getAttribute("title");if(m){var n=this.props.activeTags.indexOf(m);switch(t.key){case "Left":case "ArrowLeft":this.focusElement(document.getElementById(0<n?"tag-"+this.props.activeTags[n-1]:"tag-"+this.props.activeTags[this.props.activeTags.length-1]));break;case "Right":case "ArrowRight":this.focusElement(document.getElementById(n<
this.props.activeTags.length-1?"tag-"+this.props.activeTags[n+1]:"tag-"+this.props.activeTags[0]));break;case "Down":case "ArrowDown":this.focusElement(document.getElementById("tags-input"));break;case "Backspace":case "Delete":t=Object(f.g)([],this.props.activeTags),t.splice(this.props.activeTags.indexOf(m),1),this.props.onChange(t),this.focusElement(document.getElementById("tag-"+this.props.activeTags[n<this.props.activeTags.length-1?n+1:n-1]))}}},q.prototype.focusElement=function(t){t&&t.focus()},
q.prototype.stripHTML=function(t){return t&&t.replace(/<(?:.|\s)*?>/g,"")},q}(w.Component);v["default"]=r}})})},"arcgisonline/sharing/dijit/ComboBox":function(){define("require exports tslib ../../tsutils/declareDecorator dijit/form/ComboBox dojo/text!./templates/ComboBox.html".split(" "),function(K,G,w,v,r,f){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);return function(){function c(a,b){this.autoComplete=!1;this.templateString=f["default"]}return c=w.__decorate([v["default"](r["default"])],
c)}()})},"arcgisonline/sharing/dijit/dialog/ExtentDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/on dojo/topic dijit/Dialog dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../DefineExtent dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ExtentDlg.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m){var n=G("arcgisonline.sharing.dijit.dialog.ExtentDlg",[a,b,p],{declaredClass:"arcgisonline.sharing.dijit.dialog.ExtentDlg",basePath:K.toUrl("arcgisonline/sharing/dijit/dialog"),
templateString:m,widgetsInTemplate:!0,postMixInProperties:function(){this.inherited(arguments);this.i18n=w.mixin({},t.common);this.i18n=w.mixin(this.i18n,t.viewer.geocode);this.i18n=w.mixin(this.i18n,t.generalDlg);this.i18n=w.mixin(this.i18n,t.extentDlg)},postCreate:function(){this.inherited(arguments);this._loadConnections()},_loadConnections:function(){this.own(v(this._cancelBtn,"click",w.hitch(this,"_cancelBtnClick")),v(this._okBtn,"click",w.hitch(this,"_okBtnClick")),r.subscribe("define-extent/update",
w.hitch(this,"_publish")))},_cancelBtnClick:function(k){k.preventDefault();this._extentDialog.hide()},_okBtnClick:function(k){k.preventDefault();this.setExtent()},hide:function(){this._defineExtent._destroyMap();this._extentDialog.hide()},show:function(k){this._defineExtent||(this._defineExtent=new q({id:"defineExtent"},this._extentContainer),this._defineExtent.startup());this._defineExtent.set("extent",k);this._extentDialog.show()},setExtent:function(){var k=this._defineExtent.get("extent");k&&this._publish(k);
this.hide()},_publish:function(k){r.publish("extent/update",k)}});n.prototype.statics={getInstance:function(){this._instance||(this._instance=new n);return this._instance}};return n})},"arcgisonline/sharing/dijit/DefineExtent":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/query dojo/on dojo/number dojo/topic esri/dijit/Search esri/map esri/layers/ImageParameters esri/layers/ArcGISTiledMapServiceLayer esri/geometry/Extent esri/geometry/Point esri/geometry/webMercatorUtils esri/SpatialReference esri/symbols/SimpleLineSymbol esri/toolbars/draw esri/graphic esri/dijit/Popup dijit/Dialog dijit/form/Button dijit/form/TextBox dijit/layout/BorderContainer dijit/layout/ContentPane dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../map/core/projectExtent ../../map/utils/clipOnHorizon ../../map/utils/createExtentSearchOptions ../util ../../pages/pageUtil ../../pages/utils/dom ../../pages/utils/number ../../esriGeowConfig ./dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline dojo/text!./templates/DefineExtent.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z){return G([H,I,L],{declaredClass:"arcgisonline.sharing.dijit.DefineExtent",basePath:K.toUrl("arcgisonline/sharing/dijit"),templateString:Z,widgetsInTemplate:!0,numberPattern:"#.#",_setExtentAttr:function(W){(this.extent=W)&&2===W.length&&2===W[0].length&&2===W[1].length?(this._initMap(W),this._extentTop.set("value",ka.format(Math.round(1E3*this.extent[1][1])/1E3)),this._extentLeft.set("value",ka.format(Math.round(1E3*
this.extent[0][0])/1E3)),this._extentRight.set("value",ka.format(Math.round(1E3*this.extent[1][0])/1E3)),this._extentBottom.set("value",ka.format(Math.round(1E3*this.extent[0][1])/1E3))):(this._initMap(null),this._extentTop.set("value",""),this._extentLeft.set("value",""),this._extentRight.set("value",""),this._extentBottom.set("value",""))},_getExtentAttr:function(){var W=[[],[]],Q=this._extentTop.get("value"),ia=this._extentLeft.get("value"),R=this._extentBottom.get("value"),S=this._extentRight.get("value"),
N=t.parse(Q),X=t.parse(ia),aa=t.parse(R),ea=t.parse(S);if(this._isValidExtentInput(Q,ia,S,R,N,X,ea,aa)){W[1][1]=N;W[0][0]=X;W[1][0]=ea;W[0][1]=aa;if(this._isValidWGS84Extent(W))return W;V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRange+"\x3cbr\x3e"+this.i18n.error.errorValueBigger})}else V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorUseNumeric+"\x3cbr/\x3e"+this.i18n.error.errorRange+"\x3cbr\x3e"+this.i18n.error.errorValueBigger})},
postMixInProperties:function(){this.inherited(arguments);this.i18n=w.mixin({},ha.common);this.i18n=w.mixin(this.i18n,ha.viewer.geocode);this.i18n=w.mixin(this.i18n,ha.generalDlg);this.i18n=w.mixin(this.i18n,ha.extentDlg)},postCreate:function(){this.symbol=new x(x.STYLE_SOLID,new r([255,0,0]),2);this.defaultExtent=new e(-121,21.72,-76,61.28,new u({wkid:4326}));this._loadConnections()},destroy:function(){this.inherited(arguments);this._destroyMap()},_loadConnections:function(){var W=w.hitch(this,"_checkRange");
this.own(q(this._extentTop,"blur",W),q(this._extentLeft,"blur",W),q(this._extentRight,"blur",W),q(this._extentBottom,"blur",W),q(this._buttonSetExtent,"click",w.hitch(this,"_toggleMapNavigation")))},_isValidWGS84Extent:function(W){W=[W[0].join(","),W[1].join(",")].join();W=v.map(W.split(","),function(Q){return parseFloat(Q)});return-90<=W[3]&&90>=W[3]&&-180<=W[2]&&180>=W[2]&&-180<=W[0]&&180>=W[0]&&-90<=W[1]&&90>=W[1]&&W[2]>W[0]&&W[3]>W[1]},_isValidExtentInput:function(W,Q,ia,R,S,N,X,aa){return!(0===
W.length||0===Q.length||0===ia.length||0===R.length||isNaN(S)||isNaN(N)||isNaN(X)||isNaN(aa))},_destroyMap:function(){if(this.map){try{this.map.destroy()}catch(Q){}var W=this.map.infoWindow;W&&W.destroy();this.map=null}if(this.geocoder){try{this.geocoder.destroy()}catch(Q){}this.geocoder=null}f.byId("extent-map-container")&&a.empty(f.byId("extent-map-container"))},_setProjectedExtent:function(W){W=O(W[0]);q.once(this.map,"extent-change",w.hitch(this,"_drawBoundingBox",W));this.map.setExtent(W,!0)},
_drawBoundingBox:function(W){this._drawBox(W)},_checkRange:function(W){if(W){var Q=W.target.value,ia=t.parse(Q);W=W.target.id;var R=!1;if("extent-left"===W){if(0===Q.length||isNaN(ia))V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLonNotNumber}),R=!0;else if(-180>ia||180<ia)V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLong}),R=!0;R&&(this.extent&&2===this.extent.length&&2==this.extent[0].length&&2===
this.extent[1].length?this._extentLeft.set("value",ka.format(Math.round(1E3*this.extent[0][0])/1E3)):this._extentLeft.set("value",""))}else if("extent-right"===W){if(0===Q.length||isNaN(ia))V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLonNotNumber}),R=!0;else if(-180>ia||180<ia)V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLong}),R=!0;R&&(this.extent&&2===this.extent.length&&2===this.extent[0].length&&
2===this.extent[1].length?this._extentRight.set("value",ka.format(Math.round(1E3*this.extent[1][0])/1E3)):this._extentRight.set("value",""))}else if("extent-top"===W){if(0===Q.length||isNaN(ia))V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLatNotNumber}),R=!0;else if(-90>ia||90<ia)V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLat}),R=!0;R&&(this.extent&&2===this.extent.length&&2===this.extent[0].length&&
2===this.extent[1].length?this._extentTop.set("value",ka.format(Math.round(1E3*this.extent[1][1])/1E3)):this._extentTop.set("value",""))}else{if(0===Q.length||isNaN(ia))V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLatNotNumber}),R=!0;else if(-90>ia||90<ia)V.createSpecifiedDialog(ma).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLat}),R=!0;R&&(this.extent&&2==this.extent.length&&2==this.extent[0].length&&2==this.extent[1].length?
this._extentBottom.set("value",ka.format(Math.round(1E3*this.extent[0][1])/1E3)):this._extentBottom.set("value",""))}null!=this.map&&0<this._extentTop.get("value").length&&0<this._extentLeft.get("value").length&&0<this._extentRight.get("value").length&&0<this._extentBottom.get("value").length?(Q=[[],[]],Q[1][1]=t.parse(this._extentTop.get("value")),Q[0][0]=t.parse(this._extentLeft.get("value")),Q[1][0]=t.parse(this._extentRight.get("value")),Q[0][1]=t.parse(this._extentBottom.get("value")),this._isValidWGS84Extent(Q)?
(Q=new e(Q[0][0],Q[0][1],Q[1][0],Q[1][1],new u({wkid:4326})),J(Q,this.map.spatialReference,w.hitch(this,"_setProjectedExtent"),null,this.map)):this._deleteBox()):null!=this.map&&this._deleteBox()}},_initMap:function(W){var Q=this.defaultExtent;null!=W&&(Q=new e(W[0][0],W[0][1],W[1][0],W[1][1],new u({wkid:4326})));if(this.map){if(null!=W)q.once(this.map,"extent-change",w.hitch(this,"_drawBoundingBox",Q));this.map.setExtent(Q,!0)}else{this.map=new k("extent-map-container",{showAttribution:!1,wrapAround180:!1,
center:[-31,10],zoom:1});var ia=new l;ia.format="png24";ia=new h(la.extentService,{imageParameters:ia});this.map.addLayer(ia);null!=W&&this.own(this.map.on("load",w.hitch(this,"_onMapLoad",Q)));this.own(ia.on("update",w.hitch(this,"_onUpdate")));this.toolbar=new y(this.map,{showTooltips:!1});this.own(this.toolbar.on("draw-complete",w.hitch(this,"_onDrawEnd")));this.mapNavigation=!0;c.set(this._buttonSetExtent,"innerHTML",this.i18n.drawExtent);this.geocoder||(W=P(this.map),W.showInfoWindowOnSelect=
!1,this.geocoder=new n(W,a.create("div",{id:"extentSearch"},this._extentSearchContainer,"only")),this.geocoder.startup(),this.own(this.geocoder.on("select-result",w.hitch(this,"_onSearchResult"))))}},_onMapLoad:function(W){p(".action.zoomTo").forEach(ba.hideNode);J(W,this.map.spatialReference,w.hitch(this,"_setProjectedExtent"),null,this.map)},_drawBox:function(W){this.map.graphics.clear();null!==W&&this.map.graphics.add(new B(W,this.symbol))},_deleteBox:function(){this.map.graphics.clear()},_onUpdate:function(){this.map.reposition()},
_toggleMapNavigation:function(){this.mapNavigation?(this.toolbar.activate(y.EXTENT),this.map.showZoomSlider(),this.mapNavigation=!1,c.set(this._buttonSetExtent,"innerHTML",this.i18n.enableMapPanning)):(this.toolbar.deactivate(),this.map.enableMapNavigation(),this.mapNavigation=!0,c.set(this._buttonSetExtent,"innerHTML",this.i18n.drawExtent))},_onSearchResult:function(W){if(W.result){W=W.result;var Q=W.feature.geometry,ia=W.extent;if("polygon"===Q.type){var R=Q.getExtent().expand(1.1);var S=Q.getCentroid()}else"polyline"===
Q.type?(R=Q.getExtent().expand(1.1),S=Q.getPoint(0,0)):"multipoint"===Q.type?(R=Q.getExtent().expand(1.1),S=Q.getPoint(0)):(R=ia||arcgisonline.map.main.map.extent.centerAt(Q).expand(.0625),S=Q);this._deleteBox();this.popup||(this.popup=new C(null,a.create("div",{"class":"blueTheme"},f.byId("extentMapDiv"))),this.popup.resize(150,100),this.popup.map=this.map);this.popup.setContent("\x3cdiv\x3e\x3cspan\x3e"+W.name+"\x3c/span\x3e\x3c/div\x3e");q.once(this.map,"extent-change",w.hitch(this,function(){this._drawBox(R);
this.popup.show(S);setTimeout(w.hitch(this,function(){this.popup.hide()}),3E3)}));this.map.setExtent(R,!0);W=R;4326!==R.spatialReference.wkid&&(W=g.webMercatorToGeographic(R));this._extentTop.set("value",ka.format(Math.round(1E3*W.ymax)/1E3));this._extentLeft.set("value",ka.format(Math.round(1E3*W.xmin)/1E3));this._extentRight.set("value",ka.format(Math.round(1E3*W.xmax)/1E3));this._extentBottom.set("value",ka.format(Math.round(1E3*W.ymin)/1E3));this.extent=[[],[]];this.extent[1][1]=parseFloat(W.ymax);
this.extent[0][0]=parseFloat(W.xmin);this.extent[1][0]=parseFloat(W.xmax);this.extent[0][1]=parseFloat(W.ymin);m.publish("define-extent/change",W)}},_onDrawEnd:function(W){this._deleteBox();if(.01>W.width){var Q=.01;W=new e(W.xmin-Q,W.ymin,W.xmin+Q,W.ymax,new u({wkid:4326}))}.01>W.height&&(Q=.01,W=new e(W.xmin,W.ymin-Q,W.xmax,W.ymin+Q,new u({wkid:4326})));W=O(W.geographicGeometry);q.once(this.map,"extent-change",w.hitch(this,"_drawBoundingBox",W));this.map.setExtent(W,!0);Q=W;4326!==W.spatialReference.wkid&&
(Q=g.webMercatorToGeographic(W));this._extentTop.set("value",ka.format(Math.round(1E3*Q.ymax)/1E3));this._extentLeft.set("value",ka.format(Math.round(1E3*Q.xmin)/1E3));this._extentRight.set("value",ka.format(Math.round(1E3*Q.xmax)/1E3));this._extentBottom.set("value",ka.format(Math.round(1E3*Q.ymin)/1E3));this.extent=[[],[]];this.extent[1][1]=parseFloat(Q.ymax);this.extent[0][0]=parseFloat(Q.xmin);this.extent[1][0]=parseFloat(Q.xmax);this.extent[0][1]=parseFloat(Q.ymin);m.publish("define-extent/change",
Q)}})})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/date/locale dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z){function W(Q,ia){Q&&ia&&(Q._layer=ia,Q._sourceLayer=ia)}G=G([g,u,x,r],{declaredClass:"esri.dijit.Search",templateString:d,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(Q,ia){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",
searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",
showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",
searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new la("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type",
"Match_addr","StAddr","City"],name:e.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:e.widgets.Search.main.placeholder,highlightSymbol:(new H(K.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:350,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,
enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new O).setColor(new ha([181,56,46,.9])).setFont(new P("14px",P.STYLE_NORMAL,P.VARIANT_NORMAL,P.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new z(e.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:3,enableSearchingAll:!0};var R=w.mixin({},this.options,Q);this.set(R);this._updateActiveSource();this._i18n=e;this._defaultSR=new E(4326);this.domNode=ia},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(w.hitch(this,this._init))},postCreate:function(){var Q=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(a(this.submitNode,y,w.hitch(this,this._searchButton)));this.own(a(this.sourcesBtnNode,y,w.hitch(this,this._toggleSourcesMenu)));this.own(a(this.inputNode,y,w.hitch(this,this._inputClick)));this.own(a(this.clearNode,y,w.hitch(this,this._clearButton)));this.own(a(this.formNode,"submit",w.hitch(this,function(ia){ia.preventDefault();this._cancelSuggest();this.search()})));this.own(a(this.inputNode,"keyup",w.hitch(this,
function(ia){this._inputKey(ia)})));this.own(a(this.sourcesBtnNode,"keyup",w.hitch(this,function(ia){this._sourceBtnKey(ia)})));this.own(a(this.suggestionsNode,"li:click, li:keyup",function(ia){Q._suggestionsEvent(ia,this)}));this.own(a(this.sourcesNode,"li:click, li:keyup",function(ia){Q._sourcesEvent(ia,this)}));this.own(a(this.inputNode,"input, paste",w.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(a(this.map.infoWindow.domNode,
"#"+this._moreResultsId+"_show:click",w.hitch(this,function(ia){this._showMoreResultsClick(ia)}))),this.own(a(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",w.hitch(this,function(ia){this._moreResultsClick(ia)}))),this.own(a(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",w.hitch(this,function(ia){this._switchCoordinatesClick(ia)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);
this._setPlaceholder(this.activeSourceIndex);this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();l.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();m.get(this.inputNode,"value")&&m.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);n.remove(this.containerNode,
this.css.hasValue);m.set(this.clearNode,"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){k.set(this.domNode,"display","block")},hide:function(){k.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(n.add(this.containerNode,this.css.searchExpanded),n.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(n.remove(this.containerNode,
this.css.searchExpanded),n.add(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(Q){this.enableButtonMode&&("undefined"===typeof Q&&(Q=!this.expanded),Q?this.expand():this.collapse())},search:function(Q){var ia=new f;this._mapLoaded().then(w.hitch(this,function(){this._searchDeferred(Q).then(w.hitch(this,function(R){var S=R.results;this.set("searchResults",S);0===R.numResults&&(this._noResults(R.value),this._showNoResultsMenu());this._hideLoading();
this.emit("search-results",R);this._selectFirstResult(S,R.activeSourceIndex);ia.resolve(S)}),w.hitch(this,function(R){ia.reject(R)}))}));return ia.promise},suggest:function(Q){var ia=new f;this._mapLoaded().then(w.hitch(this,function(){this._suggestDeferred(Q).then(w.hitch(this,function(R){if(R){var S=R.results;this.set("suggestResults",S);this._insertSuggestions(S,R.value);this.emit("suggest-results",R);ia.resolve(S)}}),w.hitch(this,function(R){ia.reject(R)}))}));return ia.promise},select:function(Q){var ia=
this._getDefaultSymbol(Q),R=this.labelSymbol,S=this.sources,N=this.activeSourceIndex,X=this.enableHighlight,aa=this.enableLabel,ea=this.autoNavigate,Y=this.showInfoWindowOnSelect,T=this.enableInfoWindow,ca=this.infoTemplate,M=Q.feature?new A(Q.feature.toJson()):null,U=M?Q.feature._sourceLayer:null;W(M,U);if(N===this._allIndex){var da=this._getSourceIndexOfResult(Q);if(null!==da){var ja=S[da];N=da}}else ja=S[N];ja&&(ja.hasOwnProperty("highlightSymbol")&&(ia=ja.highlightSymbol),ja.hasOwnProperty("labelSymbol")&&
(R=ja.labelSymbol),ja.hasOwnProperty("enableHighlight")&&(X=ja.enableHighlight),ja.hasOwnProperty("enableLabel")&&(aa=ja.enableLabel),ja.hasOwnProperty("autoNavigate")&&(ea=ja.autoNavigate),ja.hasOwnProperty("showInfoWindowOnSelect")&&(Y=ja.showInfoWindowOnSelect),ja.hasOwnProperty("enableInfoWindow")&&(T=ja.enableInfoWindow),ja.hasOwnProperty("infoTemplate")?ca=ja.infoTemplate:ja.featureLayer&&ja.featureLayer.infoTemplate&&(ca=ja.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();
if(M){S=this.highlightGraphic;var na=this.graphicsLayer;da=this.labelGraphic;var oa=w.mixin({},M.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(Q),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(Q)}),ra=null;T&&(ra=ca);da?(da.setGeometry(M.geometry),da.setAttributes(oa),da.setSymbol(R),R&&"textsymbol"===R.type&&da.symbol.setText(Q.name)):(da=
new A(M.geometry,R,oa),W(da,U),R&&"textsymbol"===R.type&&da.symbol.setText(Q.name),aa&&(na?na.add(da):this.map&&this.map.graphics&&this.map.graphics.add(da)));S?(S.setGeometry(M.geometry),S.setAttributes(oa),S.setInfoTemplate(ra),S.setSymbol(ia)):(S=new A(M.geometry,ia,oa,ra),W(S,U),X&&(na?na.add(S):this.map&&this.map.graphics&&this.map.graphics.add(S)));S&&S.symbol&&"textsymbol"===S.symbol.type&&S.symbol.setText(Q.name);this.map&&this.map.infoWindow&&T&&Y&&(this.map.infoWindow.setFeatures([S]),ia=
this._getPointFromGeometry(S.geometry),this.map.infoWindow.show(ia));this.map&&ea&&Q&&Q.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(Q.extent,!0);this.set("highlightGraphic",S);this.set("labelGraphic",da)}this.set("selectedResult",Q);this.emit("select-result",{result:Q,source:ja,sourceIndex:N})},focus:function(){B.focus(this.inputNode)},blur:function(){this.inputNode.blur();B.curNode&&B.curNode.blur()},clearGraphics:function(){var Q=this.highlightGraphic,ia=
this.graphicsLayer,R=this.labelGraphic;Q&&(ia?ia.remove(Q):this.map&&this.map.graphics&&this.map.graphics.remove(Q));R&&(ia?ia.remove(R):this.map&&this.map.graphics&&this.map.graphics.remove(R));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var Q=new f;if(this.map)if(this.map.loaded)Q.resolve();else a.once(this.map,"load",w.hitch(this,function(){Q.resolve()}));else Q.resolve();return Q.promise},_init:function(){this._getMapLayers().then(w.hitch(this,function(){this.set("loaded",
!0);this.emit("load")}))},_clearButton:function(){this.clear();B.focus(this.inputNode)},_error:function(Q){return Error(this.declaredClass+" "+Q)},_searchDeferred:function(Q){var ia=new f,R=this.value,S=this.activeSourceIndex;Q&&Q.hasOwnProperty("index")&&(S=Q.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var N={magicKey:this.magicKey,text:R};Q?"string"===typeof Q?(N.text=Q,Q=this._searchQueries(N)):Q="object"===typeof Q&&Q.hasOwnProperty("magicKey")?this._searchQueries(Q):
"object"===typeof Q&&Q.hasOwnProperty("geometry")?this._searchQueries({geometry:Q}):"object"===typeof Q&&Q.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(Q):"object"===typeof Q&&"point"===Q.type?this._searchQueries({point:Q}):Q instanceof Array&&2===Q.length?this._searchQueries({latlon:Q}):this._searchQueries(N):Q=this._searchQueries(N);Q.always(w.hitch(this,function(X){X=this._formatResults(X,S,R);ia.resolve(X)}));return ia.promise},_suggestDeferred:function(Q){var ia=new f;this._deferreds.push(ia);
Q||(Q=this.value);var R=this.activeSourceIndex;this._suggestQueries({text:Q}).always(w.hitch(this,function(S){var N;if(S)for(var X=0;X<S.length;X++)S[X]&&(N=!0);N?(S=this._formatResults(S,R,Q),ia.resolve(S)):ia.resolve()}));return ia.promise},_getDefaultSymbol:function(Q){var ia;this.map&&(ia=this.map.getBasemap());ia||(ia="topo");if(Q&&Q.feature&&Q.feature.geometry)var R=Q.feature.geometry.type;"polyline"===R?R="line":"circle"===R||"extent"===R?R="polygon":"multipoint"===R&&(R="point");if(R){if(Q=
Z.getSchemes({theme:"default",basemap:ia,geometryType:R}))var S=Q.primaryScheme;if(S){S.color&&S.hasOwnProperty("opacity")&&(S.color.a=S.opacity);var N=S;Q=S.color;S=S.size;switch(R){case "point":var X=new I;X.setColor(Q);X.setSize(null!==S?S:N.size);R=new L;R.setColor(N.outline.color);R.setWidth(N.outline.width);X.setOutline(R);break;case "line":X=new L;X.setColor(Q);X.setWidth(null!==S?S:N.width);break;case "polygon":X=new J,X.setColor(Q),R=new L,R.setColor(N.outline.color),R.setWidth(N.outline.width),
X.setOutline(R)}N=X}}return N},_selectFirstResult:function(Q,ia){if(this.autoSelect&&Q){var R;ia===this._allIndex?R=this._getFirstResult(Q):Q[ia]&&Q[ia][0]&&(R=Q[ia][0]);R&&this.select(R)}},_getSourceIndexOfResult:function(Q){var ia=this.searchResults;if(ia)for(var R in ia)if(ia[R]&&ia[R].length)for(var S=0;S<ia[R].length;S++)if(ia[R][S]===Q)return parseInt(R,10);return null},_getFirstResult:function(Q){if(Q)for(var ia in Q)if(Q[ia]&&Q[ia][0])return Q[ia][0];return!1},_onFocus:function(){this.map&&
"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var Q=new f;if(this.addLayersFromMap&&this.map){var ia=[],R=this.map.graphicsLayerIds;if(R&&R.length){for(var S=
0;S<R.length;S++){var N=this.map.getLayer(R[S]);N&&ia.push(this._featureLayerLoaded(N))}F(ia).always(w.hitch(this,function(X){for(var aa,ea=this.sources,Y=0;Y<X.length;Y++)X[Y]&&X[Y].loaded&&"Feature Layer"===X[Y].type&&(ea.push({featureLayer:X[Y],enableSuggestions:!0}),aa=!0);aa&&this.set("sources",ea);Q.resolve()}))}else Q.resolve()}else Q.resolve();return Q.promise},_switchCoordinatesClick:function(Q){Q.preventDefault();if(Q=m.get(Q.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",
Q),this.search()},_moreResultsClick:function(Q){Q.preventDefault();var ia=Q.target;Q=parseInt(m.get(ia,"data-source-index"),10);ia=parseInt(m.get(ia,"data-index"),10);var R=this.searchResults;R&&R[Q]&&(Q=R[Q][ia])&&this.select(Q)},_showMoreResultsClick:function(Q){Q.preventDefault();if(Q=t.byId(this._moreResultsId)){n.toggle(Q,this.css.searchShowMoreResults);var ia=t.byId(this._moreResultsId+"_show");ia&&(n.contains(Q,this.css.searchShowMoreResults)?m.set(ia,"textContent",e.widgets.Search.main.hideMoreResults):
m.set(ia,"textContent",e.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(Q){var ia=new f;if(Q.loaded)ia.resolve(Q);else if(Q.loadError)ia.reject(this._error("Layer failed to load."));else{var R=a.once(Q,"load",w.hitch(this,function(){S.remove();ia.resolve(Q)}));var S=a.once(Q,"error",w.hitch(this,function(){R.remove();ia.reject(this._error("Layer could not be loaded."))}))}return ia.promise},_getObjectSize:function(Q){var ia=0,R;for(R in Q)Q.hasOwnProperty(R)&&ia++;return ia},
_sourcesEvent:function(Q,ia){var R=m.get(ia,"data-index"),S=b("li",this.sourcesNode),N=v.indexOf(S,ia);R!==this._allIndex&&(R=parseInt(R,10));"click"===Q.type||Q.keyCode===c.ENTER?(this.set("activeSourceIndex",R),B.focus(this.inputNode),this._hideSourcesMenu()):Q.keyCode===c.UP_ARROW?(Q.stopPropagation(),Q.preventDefault(),R=N-1,0>R?B.focus(this.sourcesBtnNode):B.focus(S[R])):Q.keyCode===c.DOWN_ARROW?(Q.stopPropagation(),Q.preventDefault(),R=N+1,R>=S.length?B.focus(this.sourcesBtnNode):B.focus(S[R])):
Q.keyCode===c.ESCAPE&&(this._hideSourcesMenu(),B.focus(this.inputNode))},_suggestionsEvent:function(Q,ia){var R=m.get(ia,"data-source-index"),S=parseInt(m.get(ia,"data-index"),10),N=b("li",this.suggestionsNode),X=this.sources,aa=v.indexOf(N,ia);R!==this._allIndex&&(R=parseInt(R,10));var ea;this._clearQueryTimeout();"click"===Q.type||Q.keyCode===c.ENTER?((N=this.suggestResults)&&N[R]&&N[R][S]&&(ea=N[R][S]),ea&&(ea.index=R,X[R].featureLayer?(R=X[R].featureLayer.objectIdField,ea[this._objectIdIdentifier]=
ea.feature.attributes[R],this.set("value",this._getSuggestionName(ea)),this.set("selectedFeatureId",ea.feature.attributes[R])):ea.magicKey&&ea.text&&(this.set("value",ea.text),this.set("magicKey",ea.magicKey)),this.search(ea),B.focus(this.inputNode))):Q.keyCode===c.BACKSPACE||Q.keyCode===c.DELETE?B.focus(this.inputNode):Q.keyCode===c.UP_ARROW?(Q.stopPropagation(),Q.preventDefault(),ea=aa-1,0>ea?B.focus(this.inputNode):B.focus(N[ea])):Q.keyCode===c.DOWN_ARROW?(Q.stopPropagation(),Q.preventDefault(),
ea=aa+1,ea>=N.length?B.focus(this.inputNode):B.focus(N[ea])):Q.keyCode===c.ESCAPE&&(this._hideMenus(),B.focus(this.inputNode))},_getResultName:function(Q){var ia;Q.hasOwnProperty("name")&&null!==Q.name&&(ia=Q.name.toString());ia||(ia=e.widgets.Search.main.untitledResult);return ia},_getSuggestionName:function(Q){var ia;Q.hasOwnProperty("name")&&null!==Q.name&&(ia=Q.name.toString());Q=Q.text||ia;Q||(Q=e.widgets.Search.main.untitledResult);return Q},_searchResultHTML:function(Q){var ia="";if(Q.feature&&
Q.feature.attributes&&Q.feature.attributes.Addr_type&&"LatLong"===Q.feature.attributes.Addr_type){var R=Q.name.split(" ");if(2===R.length){var S=R[0];var N=R[1]}N&&S?(Q=parseFloat(S),N=parseFloat(N),R=N+", "+Q,ia+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',ia+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+e.widgets.Search.main.lonlat+"\x3c/div\x3e",ia=ia+(Q+", "+N)+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsItem+'"\x3e'),Q===N||90<Q||-90>Q||180<N||-180>N||(ia+=
'\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+e.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",ia+='\x3ca data-switch-coordinates\x3d"'+R+'" tabindex\x3d"0" href\x3d"#"\x3e'+R+"\x3c/a\x3e\x3c/div\x3e")):ia=Q.name}else ia=Q.name;return ia},_moreResultsHTML:function(Q){var ia="",R="",S=this.searchResults,N=this.sources,X=0;if(S){R+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e';R+='\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+e.widgets.Search.main.showMoreResults+
"\x3c/a\x3e";R=R+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsList+'"\x3e');R+='\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e';for(var aa in S)if(S[aa]){var ea=S[aa].length;if(ea){var Y=1===ea&&S[aa][0]===Q;if(1<this._getObjectSize(S)&&!Y){var T=this._getSourceName(aa);R+='\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+T+"\x3c/div\x3e"}if(ea&&!Y){R+="\x3cul\x3e";T=N[aa].maxResults||this.maxResults;for(Y=0;Y<ea&&Y<T;++Y)if(S[aa][Y]!==Q){var ca=this._getResultName(S[aa][Y]);
R+='\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+Y+'" data-source-index\x3d"'+aa+'" href\x3d"#"\x3e'+ca+"\x3c/a\x3e\x3c/li\x3e";X++}R+="\x3c/ul\x3e"}}}R+="\x3c/div\x3e\x3c/div\x3e"}X&&(ia+=R);return ia},_validField:function(Q,ia){return Q.getField(ia)},_validFields:function(Q,ia){if(Q&&ia&&ia.length){for(var R=0;R<ia.length;R++)if(!this._validField(Q,ia[R]))return!1;return!0}return!1},_getCodedName:function(Q,ia){if(Q&&Q.length)for(var R=0,S=Q.length;R<S;R++){var N=Q[R];if(N.code===ia)return N.name}},
_getCodedValue:function(Q,ia,R){if(Q&&Q.length)for(var S=0,N=Q.length;S<N;S++){var X=Q[S],aa=X.name,ea=ia;R||(aa=aa.toLowerCase(),ea=ea.toLowerCase());if(aa===ea)return X.code}return!1},_whereClause:function(Q,ia,R,S,N){var X=null;if(Q){var aa="",ea=this.reHostedFS.test(ia.url);ea&&this._containsNonLatinCharacter(Q)&&(aa="N");if(R&&R.length)for(var Y=0,T=R.length;Y<T;Y++){var ca="";ca=Q.replace(/'/g,"''");var M=R[Y],U=ia.getField(M),da=ia.getDomain(M);da&&"codedValue"===da.type&&(ca=this._getCodedValue(da.codedValues,
ca,S));!1!==ca&&(U=U.type,"esriFieldTypeString"===U||"esriFieldTypeDate"===U?S&&"search"===N?ca=M+" \x3d "+aa+"'"+ca+"'":(M=ea?M:"UPPER("+M+")",ca=ea?ca:ca.toUpperCase(),ca=M+" LIKE "+aa+"'"+(S?ca+"%":"%"+ca+"%")+"'"):"esriFieldTypeOID"===U||"esriFieldTypeSmallInteger"===U||"esriFieldTypeInteger"===U||"esriFieldTypeSingle"===U||"esriFieldTypeDouble"===U?(ca=parseFloat(ca),ca=isNaN(ca)?!1:M+" \x3d "+ca):ca=M+" \x3d "+ca,ca&&(X=X?X+" or ":"",X+=ca))}}return X},_suggest:function(Q){Q||(Q={index:this.activeSourceIndex,
text:this.value});var ia=new f,R=Q.index,S=this.sources[R],N=this.enableSuggestions;S.hasOwnProperty("enableSuggestions")&&(N=S.enableSuggestions);var X=0;if(Q.hasOwnProperty("text")&&Q.text){var aa=w.trim(Q.text);X=Q.text.length}Q=S.minCharacters||this.minCharacters;if(N&&aa&&X>=Q&&this._supportsPagination(S)){var ea="";S.prefix&&(ea+=S.prefix);ea+=aa;S.suffix&&(ea+=S.suffix);var Y=this._defaultSR;this.map&&(Y=this.map.spatialReference);N={};S.locator?(S.categories&&(N.categories=S.categories),S.locator.outSpatialReference=
Y,this.map&&S.localSearchOptions&&S.localSearchOptions.hasOwnProperty("distance")&&S.localSearchOptions.hasOwnProperty("minScale")&&(X=this._getScale(),!S.localSearchOptions.minScale||X&&X<=parseFloat(S.localSearchOptions.minScale))&&(N.location=this.map.extent.getCenter(),N.distance=S.localSearchOptions.distance),N.text=ea,S.useMapExtent&&this.map&&this.map.extent&&(N.searchExtent=this.map.extent),S.searchExtent&&(N.searchExtent=S.searchExtent),N.maxSuggestions=S.maxSuggestions||this.maxSuggestions,
S.sourceCountry&&(N.countryCode=S.sourceCountry),S.countryCode&&(N.countryCode=S.countryCode),S.locator.suggestLocations(N).then(w.hitch(this,function(T){ia.resolve(T)}),w.hitch(this,function(T){T||(T=this._error("Locator suggestLocations could not be performed."));ia.reject(T)}))):S.featureLayer?this._featureLayerLoaded(S.featureLayer).then(w.hitch(this,function(){var T=this._getDisplayField(S),ca=S.searchFields||[T],M=[];S.suggestionTemplate?S.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(na,
oa){M.push(oa)}):M=[T];-1===v.indexOf(M,S.featureLayer.objectIdField)&&M.push(S.featureLayer.objectIdField);T=this._validField(S.featureLayer,T);var U=this._validFields(S.featureLayer,M),da=this._validFields(S.featureLayer,ca);if(T&&U&&da){T=new ma;S.hasOwnProperty("suggestQueryParams")&&w.mixin(T,S.suggestQueryParams);T.outSpatialReference=Y;T.returnGeometry=!1;T.num=S.maxSuggestions||this.maxSuggestions;T.outFields=M;S.useMapExtent&&this.map&&this.map.extent&&(T.geometry=this.map.extent);S.searchExtent&&
(T.geometry=S.searchExtent);if(ca=this._whereClause(ea,S.featureLayer,ca,S.exactMatch,"suggest")){T.where=ca;var ja=!0}ja?S.featureLayer.queryFeatures(T,w.hitch(this,function(na){var oa;(na=na.features)&&(oa=this._hydrateResults(na,R,!0));ia.resolve(oa)}),w.hitch(this,function(na){na||(na=this._error("FeatureLayer queryFeatures errored with suggestions"));ia.reject(na)})):ia.resolve()}else ia.reject(this._error("Invalid FeatureLayer field"))})):ia.reject(this._error("Invalid source"))}else ia.resolve();
return ia.promise},_supportsPagination:function(Q){var ia;Q.locator?ia=!0:Q.featureLayer&&Q.featureLayer.advancedQueryCapabilities&&Q.featureLayer.advancedQueryCapabilities.supportsPagination&&(ia=!0);return ia},_suggestQueries:function(Q){var ia=this.sources,R=this.activeSourceIndex,S=[];if(R===this._allIndex)for(R=0;R<ia.length;R++){var N=Q;N.index=R;N=this._suggest(N);S.push(N)}else Q.index=R,N=this._suggest(Q),S.push(N);return F(S)},_getPointFromGeometry:function(Q){switch(Q.type){case "extent":var ia=
Q.getCenter();break;case "multipoint":ia=Q.getPoint(0);break;case "point":ia=Q;break;case "polygon":ia=Q.getCentroid();break;case "polyline":ia=Q.getPoint(0,0)}return ia},_searchQueries:function(Q){Q.hasOwnProperty("index")||(Q.index=this.activeSourceIndex);var ia=[];if(Q.index===this._allIndex)for(var R=this.sources,S=0;S<R.length;S++){var N=Q;N.index=S;N=this._search(N);ia.push(N)}else Q=this._search(Q),ia.push(Q);return F(ia)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),
B.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(Q){Q||(Q={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(Q.text=null,Q[this._objectIdIdentifier]=this.selectedFeatureId);var ia,R=new f,S=Q.index,N=this.sources[S],X;Q.hasOwnProperty("text")&&Q.text&&(X=w.trim(Q.text));if(N){var aa="";N.prefix&&!Q.magicKey&&(aa+=N.prefix);aa+=X;N.suffix&&!Q.magicKey&&(aa+=N.suffix);var ea=this._defaultSR;this.map&&
(ea=this.map.spatialReference);if(N.locator)if(Q.hasOwnProperty("text")&&X){var Y={};N.categories&&(Y.categories=N.categories);N.locationType&&(Y.locationType=N.locationType);ea&&(N.locator.outSpatialReference=ea);if(this.map&&N.localSearchOptions&&N.localSearchOptions.hasOwnProperty("distance")&&N.localSearchOptions.hasOwnProperty("minScale")){var T=this._getScale();if(!N.localSearchOptions.minScale||T&&T<=parseFloat(N.localSearchOptions.minScale))Y.location=this.map.extent.getCenter(),Y.distance=
N.localSearchOptions.distance}Y.address={};Y.maxLocations=N.maxResults||this.maxResults;N.useMapExtent&&this.map&&this.map.extent&&(Y.searchExtent=this.map.extent);N.searchExtent&&(Y.searchExtent=N.searchExtent);N.sourceCountry&&(Y.countryCode=N.sourceCountry);N.countryCode&&(Y.countryCode=N.countryCode);Q.magicKey&&(Y.magicKey=Q.magicKey);N.singleLineFieldName?Y.address[N.singleLineFieldName]=aa:Y.address["Single Line Input"]=aa;N.outFields&&(Y.outFields=N.outFields);N.locator.addressToLocations(Y).then(w.hitch(this,
function(ca){ca=this._hydrateResults(ca,S,!1);R.resolve(ca)}),w.hitch(this,function(ca){ca||(ca=this._error("Locator addressToLocations could not be performed"));R.reject(ca)}))}else Q.geometry?(ia=this._getPointFromGeometry(Q.geometry.geometry))?this._reverseGeocodePoint(S,ia).then(function(ca){R.resolve(ca)},function(ca){R.reject(ca)}):R.reject(this._error("Invalid point to reverse geocode")):Q.point?this._reverseGeocodePoint(S,Q.point).then(function(ca){R.resolve(ca)},function(ca){R.reject(ca)}):
Q.latlon?(Y=new fa(Q.latlon,this._defaultSR),this._reverseGeocodePoint(S,Y).then(function(ca){R.resolve(ca)},function(ca){R.reject(ca)})):Q.hasOwnProperty("text")&&!X?R.resolve([]):R.reject(this._error("Invalid query type for Locator"));else N.featureLayer?this._featureLayerLoaded(N.featureLayer).then(w.hitch(this,function(){var ca=this._getDisplayField(N),M=N.searchFields||[ca];ca=this._validField(N.featureLayer,ca);var U=this._validFields(N.featureLayer,M);if(ca&&U){ca=new ma;N.hasOwnProperty("searchQueryParams")&&
w.mixin(ca,N.searchQueryParams);ea&&(ca.outSpatialReference=ea,U=this.map&&this.map.getMaxResolution()||1/ka.getUnitValueForSR(ea))&&(ca.maxAllowableOffset=U);ca.returnGeometry=!0;N.outFields&&(ca.outFields=N.outFields);if(!Q.hasOwnProperty(this._objectIdIdentifier)){this._supportsPagination(N)&&(ca.num=N.maxResults||this.maxResults);N.useMapExtent&&this.map&&this.map.extent&&(ca.geometry=this.map.extent);N.searchExtent&&(ca.geometry=N.searchExtent);var da=N.exactMatch}Q.hasOwnProperty("text")&&X?
(M=this._whereClause(aa,N.featureLayer,M,da,"search"))?(ca.where=M,M=!0):M=!1:Q.hasOwnProperty(this._objectIdIdentifier)?(ca.objectIds=[Q[this._objectIdIdentifier]],M=!0):Q.geometry?(ca.geometry=Q.geometry,M=!0):Q.point?(ca.geometry=Q.point,M=!0):Q.latlon?(ia=new fa(Q.latlon,this._defaultSR),ca.geometry=ia,M=!0):(Q.hasOwnProperty("text")&&!X?R.resolve([]):R.reject(this._error("Invalid query type for FeatureLayer")),M=!1);M?N.featureLayer.queryFeatures(ca,w.hitch(this,function(ja){ja=ja.features;var na;
ja&&(na=this._hydrateResults(ja,S,!1));R.resolve(na)}),w.hitch(this,function(ja){ja||(ja=this._error("FeatureLayer queryFeatures could not be performed"));R.reject(ja)})):R.resolve()}else R.reject(this._error("Invalid FeatureLayer field"))})):R.reject(this._error("Invalid source"))}else R.reject(this._error("Source is undefined"));return R.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(Q,ia,R){R={activeSourceIndex:ia,value:R,numResults:0,
numErrors:0,errors:null,results:null};var S={},N={};if(Q)if(ia===this._allIndex)for(ia=0;ia<Q.length;ia++)Q[ia]&&(Q[ia]instanceof Error?(S[ia]=Q[ia],R.numErrors++):(N[ia]=Q[ia],R.numResults+=Q[ia].length));else Q[0]&&(Q[0]instanceof Error?(S[ia]=Q[0],R.numErrors++):(N[ia]=Q[0],R.numResults+=Q[0].length));R.numErrors&&(R.errors=S);R.numResults&&(R.results=N);return R},_reverseGeocodePoint:function(Q,ia){var R=new f,S=this.sources[Q];if(ia&&S){var N=S.locationToAddressDistance||this.locationToAddressDistance;
S.locator.outSpatialReference=this._defaultSR;this.map&&(S.locator.outSpatialReference=this.map.spatialReference);S.locator.locationToAddress(ia,N,w.hitch(this,function(X){X=this._hydrateResults([X],Q,!1);R.resolve(X)}),w.hitch(this,function(X){X||(X=this._error("Locator locationToAddress could not be performed"));R.reject(X)}))}else R.reject(this._error("No point or source defined for reverse geocoding"));return R.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var Q=
0;Q<this._deferreds.length;Q++)this._deferreds[Q].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(Q){if(Q){var ia=b("li",this.sourcesNode);Q.keyCode===c.UP_ARROW?(Q.stopPropagation(),Q.preventDefault(),this._showSourcesMenu(),(Q=ia.length)&&B.focus(ia[Q-1])):Q.keyCode===c.DOWN_ARROW&&(Q.stopPropagation(),Q.preventDefault(),this._showSourcesMenu(),ia[0]&&B.focus(ia[0]))}},_inputKey:function(Q){if(Q){var ia=b("li",this.suggestionsNode),R=this.suggestResults;
if(Q.keyCode===c.TAB||Q.keyCode===c.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(Q.keyCode===c.UP_ARROW)Q.stopPropagation(),Q.preventDefault(),this._cancelSuggest(),R&&this._showSuggestionsMenu(),(Q=ia.length)&&B.focus(ia[Q-1]);else if(Q.keyCode===c.DOWN_ARROW)Q.stopPropagation(),Q.preventDefault(),this._cancelSuggest(),R&&this._showSuggestionsMenu(),ia[0]&&B.focus(ia[0]);else{if(Q.ctrlKey||Q.metaKey||Q.keyCode===c.copyKey||Q.keyCode===c.LEFT_ARROW||Q.keyCode===c.RIGHT_ARROW||Q.keyCode===
c.ENTER)return Q;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(w.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},
_getSourceName:function(Q){return this._sourceNames[Q]},_loadSources:function(Q){Q=v.filter(Q,function(ia){return!!ia.featureLayer});Q=v.map(Q,function(ia){return this._featureLayerLoaded(ia.featureLayer)},this);return F(Q)},_createSourceNameMap:function(Q){return this._loadSources(Q).then(w.hitch(this,function(){var ia=v.map(Q,function(R){return R.name||R.featureLayer&&R.featureLayer.name||e.widgets.Search.main.untitledSource});this._preventDuplicateSourceNames(Q,ia);return ia}))},_getDuplicateSourceNameIndexes:function(Q){var ia=
{},R=[];v.forEach(Q,function(S,N){ia.hasOwnProperty(S)?(-1===R.indexOf(ia[S])&&R.push(ia[S]),R.push(N)):Q.lastIndexOf(S)!==N&&(ia[S]=N)});return R},_preventDuplicateSourceNames:function(Q,ia){if(ia&&1<ia.length){var R=this._getDuplicateSourceNameIndexes(ia);v.forEach(R,function(S){ia[S]+=this._getFieldsString(Q[S])},this)}},_getFieldsString:function(Q){var ia="",R=Q.featureLayer;if(R){Q=Q.searchFields||[this._getDisplayField(Q)];for(var S=0;S<Q.length;S++){ia=0===S?ia+": ":ia+", ";var N=Q[S],X=R.getFieldLabel(N);
ia+=X||N}}return ia},_splitResult:function(Q,ia){var R=q.escapeString(ia);return Q.replace(new RegExp("(^|)("+R+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(Q,ia){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var R=this.sources;if(Q){var S=l.create("div");for(var N in Q)if(Q[N]&&Q[N].length){var X=this._getSourceName(N);1<R.length&&this.activeSourceIndex===this._allIndex&&l.create("div",{className:this.css.searchMenuHeader,
textContent:X},S);X=l.create("ul",{role:"menu"},S);for(var aa=R[N].maxSuggestions||this.maxSuggestions,ea=0;ea<Q[N].length&&ea<aa;++ea){var Y=l.create("li",{"data-index":ea,"data-source-index":N,role:"menuitem",tabindex:0},X),T=this._getSuggestionName(Q[N][ea]);T=this._splitResult(T,ia);for(var ca=T.length,M=0;M<ca;M++){var U=T[M];U.toLowerCase()===ia.toLowerCase()?l.create("strong",{textContent:U},Y):(U=document.createTextNode(U),l.place(U,Y))}}}}S?(l.place(S,this.suggestionsNode,"only"),this._showSuggestionsMenu()):
(l.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(Q){if(this.enableSourcesMenu&&Q&&1<Q.length){var ia,R=this.activeSourceIndex,S=l.create("ul",{role:"menu"});if(this.enableSearchingAll){var N="";R===this._allIndex&&(N="active");l.create("li",{"data-index":this._allIndex,role:"menuitem",className:N,tabIndex:0,textContent:e.widgets.Search.main.all},S)}for(ia=0;ia<Q.length;ia++){N="";ia===R&&(N=this.css.activeSource);var X=this._getSourceName(ia);l.create("li",{"data-index":ia,
role:"menuitem",className:N,tabIndex:0,textContent:X},S)}n.add(this.containerNode,this.css.hasMultipleSources);l.place(S,this.sourcesNode,"only")}else n.remove(this.containerNode,this.css.hasMultipleSources),l.empty(this.sourcesNode)},_showLoading:function(){n.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){n.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(n.add(this.containerNode,this.css.hasValue),m.set(this.clearNode,"title",e.widgets.Search.main.clearButtonTitle)):
this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(Q){var ia;Q&&(ia=w.trim(Q));var R=l.create("div",{className:this.css.searchNoResultsBody});Q&&ia?(l.create("div",{className:this.css.searchNoResultsHeader,textContent:e.widgets.Search.main.noResults},R),l.create("div",{className:this.css.searchNoResultsText,textContent:C.substitute({value:'"'+Q+'"'},e.widgets.Search.main.noResultsFound)},R)):(Q=l.create("div",
{},R),l.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},Q),l.create("span",{className:this.css.searchNoValueText,textContent:e.widgets.Search.main.emptyValue},Q));l.place(R,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){n.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();n.add(this.containerNode,
this.css.showNoResults)},_hideSourcesMenu:function(){n.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){n.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();n.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();n.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();
this._hideNoResultsMenu();n.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(Q){if(Q&&(Q=Q.fields)&&Q.length)for(var ia=0;ia<Q.length;ia++){var R=Q[ia];if("esriFieldTypeString"===R.type)return R.name}return""},_getDisplayField:function(Q){return Q.displayField||Q.featureLayer.displayField||this._getFirstStringField(Q.featureLayer)},_validLocation:function(Q){return Q&&"number"===typeof Q.x&&"number"===typeof Q.y},_validExtent:function(Q){return Q&&"number"===typeof Q.xmin&&
"number"===typeof Q.ymin&&"number"===typeof Q.xmax&&"number"===typeof Q.ymax},_hydrateResult:function(Q,ia,R){var S={},N=this._defaultSR;ia=this.sources[ia];this.map&&(N=this.map.spatialReference);if(Q.hasOwnProperty("text")&&Q.hasOwnProperty("magicKey"))return Q;if(Q.hasOwnProperty("geometry")){var X=new A(Q.toJson());S.feature=X;(X=S.feature.geometry)&&X.setSpatialReference(N)}else if(Q.hasOwnProperty("location")&&this._validLocation(Q.location)){var aa=new fa(Q.location.x,Q.location.y,N);X={};
Q.hasOwnProperty("attributes")&&(X=Q.attributes);Q.hasOwnProperty("address")&&"object"===typeof Q.address&&w.mixin(X,Q.address);Q.hasOwnProperty("score")&&(X.score=Q.score);S.feature=new A(aa,null,X,null)}!S.feature&&R&&(X={},Q.hasOwnProperty("attributes")&&(X=Q.attributes),Q.hasOwnProperty("score")&&(X.score=Q.score),S.feature=new A(null,null,X,null));if(S.feature){if(Q.hasOwnProperty("extent")&&this._validExtent(Q.extent))S.extent=new V(Q.extent),S.extent.setSpatialReference(N);else if(S.feature&&
S.feature.geometry)switch(S.feature.geometry.type){case "extent":S.extent=S.feature.geometry;break;case "multipoint":S.extent=ba.getDenormalizedExtent(S.feature.geometry);break;case "polygon":S.extent=ba.getDenormalizedExtent(S.feature.geometry);break;case "polyline":S.extent=ba.getDenormalizedExtent(S.feature.geometry);break;case "point":this.map?(N=this.zoomScale,ia&&ia.zoomScale&&(N=ia.zoomScale),this._getScale()>N?S.extent=ka.getExtentForScale(this.map,N).centerAt(S.feature.geometry):S.extent=
this.map.extent.centerAt(S.feature.geometry)):S.extent=new V({xmin:S.feature.geometry.x-.25,ymin:S.feature.geometry.y-.25,xmax:S.feature.geometry.x+.25,ymax:S.feature.geometry.y+.25,spatialReference:this._defaultSR})}else S.extent=null;S.name="";ia.featureLayer?ia.suggestionTemplate&&R?S.name=C.substitute(Q.attributes,ia.suggestionTemplate):ia.searchTemplate?S.name=C.substitute(Q.attributes,ia.searchTemplate):(X=this._getDisplayField(ia),R=ia.featureLayer.getField(X),N=ia.featureLayer.getDomain(X),
X&&Q.hasOwnProperty("attributes")&&Q.attributes.hasOwnProperty(X)&&(Q=Q.attributes[X],N&&"codedValue"===N.type?S.name=this._getCodedName(N.codedValues,Q):R&&"esriFieldTypeDate"===R.type&&!isNaN(Q)?S.name=h.format(new Date(Q)):S.name=Q)):Q.address&&ia.searchTemplate?S.name=C.substitute(Q.address,ia.searchTemplate):Q.hasOwnProperty("name")?S.name=Q.name:Q.hasOwnProperty("attributes")&&"object"===typeof Q.attributes&&Q.attributes.LongLabel?S.name=Q.attributes.LongLabel:Q.hasOwnProperty("attributes")&&
"object"===typeof Q.attributes&&Q.attributes.Match_addr?(S.name=Q.attributes.Match_addr,Q.attributes.Addr_type&&"POI"===Q.attributes.Addr_type&&Q.attributes.StAddr&&Q.attributes.City?S.name+=" - "+Q.attributes.StAddr+", "+Q.attributes.City:Q.attributes.Addr_type&&"POI"===Q.attributes.Addr_type&&Q.attributes.City&&(S.name+=" - "+Q.attributes.City)):Q.hasOwnProperty("address")&&"string"===typeof Q.address?S.name=Q.address:Q.hasOwnProperty("address")&&"object"===typeof Q.address&&Q.address.hasOwnProperty("Address")?
Q.address.hasOwnProperty("Match_addr")?S.name=Q.address.Match_addr:Q.address.hasOwnProperty("Address")&&(S.name=Q.address.Address):S.feature&&S.feature.geometry&&(S.name=S.feature.geometry.x+","+S.feature.geometry.y);ia.featureLayer&&S.feature&&W(S.feature,ia.featureLayer);return S}},_getScale:function(){var Q;this.map&&"function"===typeof this.map.getScale&&(Q=this.map.getScale());return Q},_hydrateResults:function(Q,ia,R,S){S=[];var N=0;if(Q&&Q.length)for(N;N<Q.length;N++){var X=this._hydrateResult(Q[N],
ia,R);X&&S.push(X)}return S},_containsNonLatinCharacter:function(Q){for(var ia=0;ia<Q.length;ia++)if(255<Q.charCodeAt(ia))return!0;return!1},_setPlaceholder:function(Q){var ia="",R=this.sources[Q];Q===this._allIndex?ia=this.allPlaceholder||e.widgets.Search.main.allPlaceholder:R&&R.placeholder&&(ia=R.placeholder);var S=e.widgets.Search.main.all;R&&(S=this._getSourceName(Q));m.set(this.sourceNameNode,"textContent",S);m.set(this.inputNode,"placeholder",ia);m.set(this.inputNode,"title",ia)},_updateActiveSource:function(){var Q=
this.sources,ia=this.activeSourceIndex,R;Q&&Q[ia]&&(R=Q[ia]);R?this.set("activeSource",R):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(Q){Q?(n.toggle(this.containerNode,this.css.searchExpanded,this.expanded),n.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),n.add(this.containerNode,this.css.hasButtonMode)):(n.remove(this.containerNode,this.css.searchExpanded),n.remove(this.containerNode,this.css.searchCollapsed),
n.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(Q){Q&&1===Q.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(Q){this._set("enableSourcesMenu",Q);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(Q){this._set("enableSearchingAll",Q);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},
_setSourcesAttr:function(Q){this._createSourceNameMap(Q).then(w.hitch(this,function(ia){this._sourceNames=ia;this._created&&(this._setDefaultActiveSourceIndex(Q),this._hideMenus(),this._insertSources(Q))}));this._set("sources",Q)},_setAllPlaceholderAttr:function(Q){this._set("allPlaceholder",Q);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(Q){this._set("activeSourceIndex",Q);this._updateActiveSource();this._created&&(this._setPlaceholder(Q),this._hideMenus(),
this._insertSources(this.sources))},_setMaxLengthAttr:function(Q){this._set("maxLength",Q);this._created&&m.set(this.inputNode,"maxLength",Q)},_setValueAttr:function(Q){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",Q);this._created&&(m.set(this.inputNode,"value",Q),this._checkStatus())},_setVisibleAttr:function(Q){this._set("visible",Q);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(Q){this._set("enableButtonMode",Q);this._created&&this._updateButtonMode(Q)},
_setThemeAttr:function(Q){this._created&&(n.remove(this.domNode,this.theme),n.add(this.domNode,Q));this._set("theme",Q)}});w.setObject("dijit.Search",G,D);return G})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(K,G,w,v,r,f,c,a,b,p,q){K=K(p,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],
"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(t){this._geocodeHandler=G.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=G.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=G.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(t){this.outSpatialReference=t},_geocodeHandler:function(t,
m,n,k,l){try{var h=t.candidates;m=[];var e,d=h.length,g=t.spatialReference,u;for(e=0;e<d;e++){var x=h[e];if(u=x.location)u.spatialReference=g;m[e]=new q(x)}this._successHandler([m],"onAddressToLocationsComplete",n,l)}catch(y){this._errorHandler(y,k,l)}},_geocodeAddressesHandler:function(t,m,n,k,l){try{var h=t.locations;m=[];var e,d=h.length,g=t.spatialReference,u;for(e=0;e<d;e++){if(u=h[e].location)u.spatialReference=g;m[e]=new q(h[e])}this._successHandler([m],"onAddressesToLocationsComplete",n,l)}catch(x){this._errorHandler(x,
k,l)}},addressToLocations:function(t,m,n,k,l){var h;if(t.address){k=n;n=m;m=t.outFields;l=t.searchExtent;var e=t.countryCode;var d=t.magicKey;var g=t.distance;var u=t.categories;t.location&&this.normalization&&(h=t.location.normalize());var x=t.locationType;var y=t.maxLocations;var B=t.forStorage;t=t.address}l&&(l=l.shiftCentralMeridian());var C=this.outSpatialReference;t=this._encode(G.mixin({},this._url.query,t,{f:"json",outSR:C&&r.toJson(C.toJson()),outFields:m&&m.join(",")||null,searchExtent:l&&
r.toJson(l.toJson()),category:u&&u.join(",")||null,countryCode:e||null,magicKey:d||null,distance:g||null,location:h||null,locationType:x||null,maxLocations:y||null,forStorage:B||null}));var z=this._geocodeHandler,D=this._errorHandler,E=new v(b._dfdCanceller);E._pendingDfd=a({url:this._url.path+"/findAddressCandidates",content:t,callbackParamName:"callback",load:function(A,F){z(A,F,n,k,E)},error:function(A){D(A,k,E)}});return E},suggestLocations:function(t){var m=new v(b._dfdCanceller);t.hasOwnProperty("location")&&
this.normalization&&(t.location=t.location.normalize());t.searchExtent&&(t.searchExtent=t.searchExtent.shiftCentralMeridian());t=this._encode(G.mixin({},this._url.query,{f:"json",text:t.text,maxSuggestions:t.maxSuggestions,searchExtent:t.searchExtent&&r.toJson(t.searchExtent.toJson()),category:t.categories&&t.categories.join(",")||null,countryCode:t.countryCode||null,location:t.location||null,distance:t.distance||null},{f:"json"}));t=a({url:this._url.path+"/suggest",content:t,callbackParamName:"callback"});
m._pendingDfd=t;t.then(G.hitch(this,function(n){n=n.suggestions||[];this.onSuggestLocationsComplete(n);m.resolve(n)}),G.hitch(this,function(n){this._errorHandler(n);m.reject(n)}));return m},addressesToLocations:function(t,m,n){var k=this.outSpatialReference,l=[],h=t.categories,e=t.locationType,d=t.countryCode;w.forEach(t.addresses,function(y,B){l.push({attributes:y})});t=this._encode(G.mixin({},this._url.query,{category:h&&h.join(",")||null,locationType:e||null,sourceCountry:d||null},{addresses:r.toJson({records:l})},
{f:"json",outSR:k&&r.toJson(k.toJson())}));var g=this._geocodeAddressesHandler,u=this._errorHandler,x=new v(b._dfdCanceller);x._pendingDfd=a({url:this._url.path+"/geocodeAddresses",content:t,callbackParamName:"callback",load:function(y,B){g(y,B,m,n,x)},error:function(y){u(y,n,x)}});return x},_reverseGeocodeHandler:function(t,m,n,k,l){try{var h=new q({address:t.address,location:t.location,score:100});this._successHandler([h],"onLocationToAddressComplete",n,l)}catch(e){this._errorHandler(e,k,l)}},locationToAddress:function(t,
m,n,k){t&&this.normalization&&(t=t.normalize());var l=this.outSpatialReference;t=this._encode(G.mixin({},this._url.query,{outSR:l&&r.toJson(l.toJson()),location:t&&r.toJson(t.toJson()),distance:m,f:"json"}));var h=this._reverseGeocodeHandler,e=this._errorHandler,d=new v(b._dfdCanceller);d._pendingDfd=a({url:this._url.path+"/reverseGeocode",content:t,callbackParamName:"callback",load:function(g,u){h(g,u,n,k,d)},error:function(g){e(g,k,d)}});return d},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});G.setObject("tasks.Locator",K,c);return K})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(K,G,w,v,r){K=K(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(f){G.mixin(this,f);this.location=new r(this.location)}});G.setObject("tasks.AddressCandidate",K,v);return K})},"esri/styles/basic":function(){define(["dojo/_base/array",
"dojo/_base/lang","dojo/has","../kernel","../Color"],function(K,G,w,v,r){function f(p,q){if(p){var t={};t.color=new r(p.color);t.opacity=p.opacity||1;switch(q){case "point":t.outline={color:new r(p.outline.color),width:p.outline.width};t.size=p.size;break;case "line":t.width=p.width;break;case "polygon":t.outline={color:new r(p.outline.color),width:p.outline.width}}}return t}function c(p){if("esriGeometryPoint"===p||"esriGeometryMultipoint"===p)p="point";else if("esriGeometryPolyline"===p)p="line";
else if("esriGeometryPolygon"===p||"esriGeometryMultiPatch"===p)p="polygon";return p}var a={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,
77,1],outline:{color:[255,255,255,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},
secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},{color:[255,255,255,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]},dark:{primary:{color:[227,139,79,
1],outline:{color:[92,92,92,.25],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]}}}},b={};(function(){var p,q,t;for(p in a){var m=a[p];var n=m.basemapGroups;var k=b[p]={basemaps:[].concat(n.light).concat(n.dark),point:{},line:{},polygon:{}};for(q in n){var l=n[q];for(t=0;t<l.length;t++){var h=l[t];m.pointSchemes&&(k.point[h]=m.pointSchemes[q]);m.lineSchemes&&(k.line[h]=
m.lineSchemes[q]);m.polygonSchemes&&(k.polygon[h]=m.polygonSchemes[q])}}}})();w={getAvailableThemes:function(p){var q=[],t;for(t in a){var m=a[t];var n=b[t];p&&-1===K.indexOf(n.basemaps,p)||q.push({name:m.name,label:m.label,description:m.description,basemaps:n.basemaps.slice(0)})}return q},getSchemes:function(p){var q=p.theme,t=p.basemap,m=c(p.geometryType);p=b[q];var n;(p=(p=p&&p[m])&&p[t])&&(n={primaryScheme:f(p.primary,m),secondarySchemes:K.map(p.secondary,function(k){return f(k,m)})});return n},
cloneScheme:function(p){if(p){var q=G.mixin({},p);q.color&&(q.color=new r(q.color));q.outline&&(q.outline={color:q.outline.color&&new r(q.outline.color),width:q.outline.width})}return q}};G.setObject("styles.basic",w,v);return w})},"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z){var D=K(k,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(E,A){this.markerSymbol=new l(l.STYLE_SOLID,10,new h(h.STYLE_SOLID,new r([255,0,0]),2),new r([0,0,0,.25]));this.lineSymbol=new h(h.STYLE_SOLID,new r([255,0,0]),2);this.fillSymbol=new e(e.STYLE_SOLID,new h(h.STYLE_SOLID,new r([255,0,0]),2),new r([0,0,0,.25]));this._points=[];this._mouse=!c("esri-touch")&&!c("esri-pointer");
this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=G.mixin(G.mixin({},this._defaultOptions),A||{});if(a("ios")||a("android"))this._options.showTooltips=!1;this._onKeyDownHandler=G.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=G.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=G.hitch(this,this._onMouseUpHandler);this._onClickHandler=G.hitch(this,this._onClickHandler);this._onMouseMoveHandler=G.hitch(this,this._onMouseMoveHandler);
this._onMouseDragHandler=G.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=G.hitch(this,this._onDblClickHandler);this._updateTooltip=G.hitch(this,this._updateTooltip);this._hideTooltip=G.hitch(this,this._hideTooltip);this._redrawGraphic=G.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(E){this.respectDrawingVertexOrder=E},setMarkerSymbol:function(E){this.markerSymbol=E},setLineSymbol:function(E){this.lineSymbol=E},
setFillSymbol:function(E){this.fillSymbol=E},activate:function(E,A){this._geometryType&&this.deactivate();var F=this.map,H=v.connect,I=D;this._options=G.mixin(G.mixin({},this._options),A||{});F.navigationManager.setImmediateClick(!1);switch(E){case I.ARROW:case I.LEFT_ARROW:case I.RIGHT_ARROW:case I.UP_ARROW:case I.DOWN_ARROW:case I.TRIANGLE:case I.CIRCLE:case I.ELLIPSE:case I.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=H(F,"onClick",this._onClickHandler);this._mouse?
(this._onMouseDownHandler_connect=H(F,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=H(F,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(F,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=H(F,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=H(F,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(F,"onMouseDragEnd",this._onMouseUpHandler));c("esri-touch")&&(this._onMouseDownHandler2_connect=
H(F,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=H(F,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=H(F,"onSwipeEnd",this._onMouseUpHandler));break;case I.POINT:this._onClickHandler_connect=H(F,"onClick",this._onClickHandler);break;case I.LINE:case I.EXTENT:case I.FREEHAND_POLYLINE:case I.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=H(F,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=
H(F,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(F,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=H(F,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=H(F,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(F,"onMouseDragEnd",this._onMouseUpHandler));c("esri-touch")&&(this._onMouseDownHandler2_connect=H(F,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=H(F,"onSwipeMove",
this._onMouseDragHandler),this._onMouseUpHandler2_connect=H(F,"onSwipeEnd",this._onMouseUpHandler));break;case I.POLYLINE:case I.POLYGON:case I.MULTI_POINT:F.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=H(F,"onClick",this._onClickHandler);this._onDblClickHandler_connect=H(F,"onDblClick",this._onDblClickHandler);this._dblClickZoom=F.isDoubleClickZoom;F.disableDoubleClickZoom();break;default:return}this._onKeyDown_connect=H(F,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=
H(F,"onExtentChange",this._redrawGraphic);this._geometryType=E;this._toggleTooltip(!0);F.snappingManager&&"freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType&&(F.snappingManager._startSelectionLayerQuery(),F.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var E=this.map;this._clear();var A=v.disconnect;A(this._onMouseMoveHandler_connect);A(this._onMouseDownHandler_connect);A(this._onMouseDragHandler_connect);A(this._onMouseUpHandler_connect);
A(this._onMouseDownHandler2_connect);A(this._onMouseDragHandler2_connect);A(this._onMouseUpHandler2_connect);A(this._onClickHandler_connect);A(this._onDblClickHandler_connect);A(this._onKeyDown_connect);A(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=
this._onKeyDown_connect=this._redrawConnect=null;E.snappingManager&&(E.snappingManager._stopSelectionLayerQuery(),E.snappingManager._killOffSnapping());switch(this._geometryType){case D.CIRCLE:case D.ELLIPSE:case D.TRIANGLE:case D.ARROW:case D.LEFT_ARROW:case D.RIGHT_ARROW:case D.UP_ARROW:case D.DOWN_ARROW:case D.RECTANGLE:case D.LINE:case D.EXTENT:case D.FREEHAND_POLYLINE:case D.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;case D.POLYLINE:case D.POLYGON:case D.MULTI_POINT:this._dblClickZoom&&
E.enableDoubleClickZoom()}A=this._geometryType;this._geometryType=null;E.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(A)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._graphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},finishDrawing:function(){var E=this._points,A=this.map.spatialReference,F=D;E=E.slice(0,E.length);switch(this._geometryType){case F.POLYLINE:if(!this._graphic||2>
E.length)return;var H=new x(A);H.addPath([].concat(E));break;case F.POLYGON:if(!this._graphic||3>E.length)return;H=new y(A);E=[].concat(E,[E[0].offset(0,0)]);y.prototype.isClockwise(E)||this.respectDrawingVertexOrder||E.reverse();H.addRing(E);break;case F.MULTI_POINT:H=new B(A),w.forEach(E,function(I){H.addPoint(I)})}v.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(H)},_drawEnd:function(E){if(E){var A=this.map.spatialReference,F;this.onDrawEnd(E);
A&&(A.isWebMercator()?F=u.webMercatorToGeographic(E,!0):4326===A.wkid&&(F=g.fromJson(E.toJson())));this.onDrawComplete({geometry:E,geographicGeometry:F})}},_normalizeRect:function(E,A,F){var H=E.x;E=E.y;var I=A.x;A=A.y;return{x:Math.min(H,I),y:Math.max(E,A),width:Math.abs(H-I),height:Math.abs(E-A),spatialReference:F}},_onMouseDownHandler:function(E){this._dragged=!1;if(this.map.snappingManager)var A=this.map.snappingManager._snappingPoint;var F=A||E.mapPoint,H=D;A=this.map;var I=A.spatialReference;
this._points.push(F.offset(0,0));switch(this._geometryType){case H.LINE:this._graphic=A.graphics.add(new d(new x({paths:[[[F.x,F.y],[F.x,F.y]]],spatialReference:I}),this.lineSymbol),!0);A.snappingManager&&A.snappingManager._setGraphic(this._graphic);break;case H.FREEHAND_POLYLINE:this._oldPoint=E.screenPoint;F=new x(I);F.addPath(this._points);this._graphic=A.graphics.add(new d(F,this.lineSymbol),!0);A.snappingManager&&A.snappingManager._setGraphic(this._graphic);break;case H.CIRCLE:case H.ELLIPSE:case H.TRIANGLE:case H.ARROW:case H.LEFT_ARROW:case H.RIGHT_ARROW:case H.UP_ARROW:case H.DOWN_ARROW:case H.RECTANGLE:case H.FREEHAND_POLYGON:this._oldPoint=
E.screenPoint,F=new y(I),F.addRing(this._points),this._graphic=A.graphics.add(new d(F,this.fillSymbol),!0),A.snappingManager&&A.snappingManager._setGraphic(this._graphic)}c("esri-touch")&&E.preventDefault();if(1===this._points.length)this.onDrawStart()},_onMouseMoveHandler:function(E){if(this.map.snappingManager)var A=this.map.snappingManager._snappingPoint;E=A||E.mapPoint;A=this._graphic.geometry;switch(this._geometryType){case D.POLYLINE:case D.POLYGON:var F=this._points.length,H=!!A.getPoint(0,
F);E=E.offset(0,0);H?A.setPoint(0,F,E):A.insertPoint(0,F,E);this._graphic.setGeometry(A)}},_onMouseDragHandler:function(E){if(this._graphic||this._points.length)if(c("esri-touch")&&!this._points.length)E.preventDefault();else{this._dragged=!0;if(this.map.snappingManager)var A=this.map.snappingManager._snappingPoint;var F=this._points[0],H=A||E.mapPoint,I=this.map,L=I.spatialReference;A=this._graphic;var J=D,O=I.toScreen(F),P=I.toScreen(H),fa=[];fa=P.x-O.x;P=P.y-O.y;var V=Math.sqrt(fa*fa+P*P);switch(this._geometryType){case J.CIRCLE:this._hideTooltip();
A.geometry=y.createCircle({center:O,r:V,numberOfPoints:60,map:I});A.setGeometry(A.geometry);break;case J.ELLIPSE:this._hideTooltip();A.geometry=y.createEllipse({center:O,longAxis:fa,shortAxis:P,numberOfPoints:60,map:I});A.setGeometry(A.geometry);break;case J.TRIANGLE:this._hideTooltip();fa=[[0,-V],[.8660254037844386*V,.5*V],[-.8660254037844386*V,.5*V],[0,-V]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);break;case J.ARROW:this._hideTooltip();F=P/V;I=fa/V;H=.25*I*V;L=.25*V/(P/fa);
V*=.25*F;fa=[[fa,P],[fa-H*(1+24/L),P+24*I-V],[fa-H*(1+12/L),P+12*I-V],[-12*F,12*I],[12*F,-12*I],[fa-H*(1-12/L),P-12*I-V],[fa-H*(1-24/L),P-24*I-V],[fa,P]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);break;case J.LEFT_ARROW:this._hideTooltip();fa=0>=fa?[[fa,0],[.75*fa,P],[.75*fa,.5*P],[0,.5*P],[0,-.5*P],[.75*fa,-.5*P],[.75*fa,-P],[fa,0]]:[[0,0],[.25*fa,P],[.25*fa,.5*P],[fa,.5*P],[fa,-.5*P],[.25*fa,-.5*P],[.25*fa,-P],[0,0]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);
break;case J.RIGHT_ARROW:this._hideTooltip();fa=0<=fa?[[fa,0],[.75*fa,P],[.75*fa,.5*P],[0,.5*P],[0,-.5*P],[.75*fa,-.5*P],[.75*fa,-P],[fa,0]]:[[0,0],[.25*fa,P],[.25*fa,.5*P],[fa,.5*P],[fa,-.5*P],[.25*fa,-.5*P],[.25*fa,-P],[0,0]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);break;case J.UP_ARROW:this._hideTooltip();fa=0>=P?[[0,P],[-fa,.75*P],[-.5*fa,.75*P],[-.5*fa,0],[.5*fa,0],[.5*fa,.75*P],[fa,.75*P],[0,P]]:[[0,0],[-fa,.25*P],[-.5*fa,.25*P],[-.5*fa,P],[.5*fa,P],[.5*fa,.25*P],[fa,
.25*P],[0,0]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);break;case J.DOWN_ARROW:this._hideTooltip();fa=0<=P?[[0,P],[-fa,.75*P],[-.5*fa,.75*P],[-.5*fa,0],[.5*fa,0],[.5*fa,.75*P],[fa,.75*P],[0,P]]:[[0,0],[-fa,.25*P],[-.5*fa,.25*P],[-.5*fa,P],[.5*fa,P],[.5*fa,.25*P],[fa,.25*P],[0,0]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);break;case J.RECTANGLE:this._hideTooltip();fa=[[0,0],[fa,0],[fa,P],[0,P],[0,0]];A.geometry=this._toPolygon(fa,O.x,O.y);A.setGeometry(A.geometry);
break;case J.LINE:A.setGeometry(G.mixin(A.geometry,{paths:[[[F.x,F.y],[H.x,H.y]]]}));break;case J.EXTENT:A&&I.graphics.remove(A,!0);A=new C(this._normalizeRect(F,H,L));A._originOnly=!0;this._graphic=I.graphics.add(new d(A,this.fillSymbol),!0);I.snappingManager&&I.snappingManager._setGraphic(this._graphic);break;case J.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(E)){c("esri-touch")&&E.preventDefault();return}this._points.push(E.mapPoint.offset(0,0));A.geometry._insertPoints([H.offset(0,
0)],0);A.setGeometry(A.geometry);break;case J.FREEHAND_POLYGON:this._hideTooltip();if(!1===this._canDrawFreehandPoint(E)){c("esri-touch")&&E.preventDefault();return}this._points.push(E.mapPoint.offset(0,0));A.geometry._insertPoints([H.offset(0,0)],0);A.setGeometry(A.geometry)}c("esri-touch")&&E.preventDefault()}},_canDrawFreehandPoint:function(E){if(!this._oldPoint)return!1;var A=this._oldPoint.x-E.screenPoint.x,F=this._oldPoint.y-E.screenPoint.y,H=this._options.tolerance;if((0>A?-1*A:A)<H&&(0>F?
-1*F:F)<H)return!1;A=new Date;if(A-this._startTime<this._options.drawTime)return!1;this._startTime=A;this._oldPoint=E.screenPoint;return!0},_onMouseUpHandler:function(E){if(this._dragged&&this._graphic){0===this._points.length&&this._points.push(E.mapPoint.offset(0,0));if(this.map.snappingManager)var A=this.map.snappingManager._snappingPoint;var F=this._points[0];A=A||E.mapPoint;var H=this.map.spatialReference,I=D;switch(this._geometryType){case I.CIRCLE:case I.ELLIPSE:case I.TRIANGLE:case I.ARROW:case I.LEFT_ARROW:case I.RIGHT_ARROW:case I.UP_ARROW:case I.DOWN_ARROW:case I.RECTANGLE:var L=
this._graphic.geometry;break;case I.LINE:L=new x({paths:[[[F.x,F.y],[A.x,A.y]]],spatialReference:H});break;case I.EXTENT:L=(new C(this._normalizeRect(F,A,H))).getExtent();break;case I.FREEHAND_POLYLINE:L=new x(H);L.addPath([].concat(this._points,[A.offset(0,0)]));break;case I.FREEHAND_POLYGON:L=new y(H),F=[].concat(this._points,[A.offset(0,0),this._points[0].offset(0,0)]),y.prototype.isClockwise(F)||this.respectDrawingVertexOrder||F.reverse(),L.addRing(F)}c("esri-touch")&&E.preventDefault();this._clear();
this._drawEnd(L)}else this._clear()},_isPointToPointTool:function(E){switch(E){case D.POLYLINE:case D.POLYGON:case D.MULTI_POINT:return!0;default:return!1}},_onClickHandler:function(E){if(this.map.snappingManager)var A=this.map.snappingManager._snappingPoint;A=A||E.mapPoint;E=this.map;var F=E.toScreen(A),H=D;if(this._isPointToPointTool(this._geometryType)){var I=this._points[this._points.length-1];if(A&&I&&A.x===I.x&&A.y===I.y)return;this._points.push(A.offset(0,0))}switch(this._geometryType){case H.POINT:this.onDrawStart();
this._drawEnd(A.offset(0,0));this._setTooltipMessage(0);break;case H.POLYLINE:1===this._points.length?(A=new x(E.spatialReference),A.addPath(this._points),this._graphic=E.graphics.add(new d(A,this.lineSymbol),!0),E.snappingManager&&E.snappingManager._setGraphic(this._graphic,{snapToLastVertex:!1}),this._onMouseMoveHandler_connect=v.connect(E,"onMouseMove",this._onMouseMoveHandler),this.onDrawStart()):(this._graphic.geometry.setPoint(0,this._points.length-1,A.offset(0,0)),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol));
break;case H.POLYGON:1===this._points.length?(A=new y(E.spatialReference),A.addRing(this._points),this._graphic=E.graphics.add(new d(A,this.fillSymbol),!0),E.snappingManager&&E.snappingManager._setGraphic(this._graphic,{snapToLastVertex:!1}),this._onMouseMoveHandler_connect=v.connect(E,"onMouseMove",this._onMouseMoveHandler),this.onDrawStart()):(this._graphic.geometry.setPoint(0,this._points.length-1,A.offset(0,0)),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol));break;
case H.MULTI_POINT:A=this._points;1===A.length?(F=new B(E.spatialReference),F.addPoint(A[A.length-1]),this._graphic=E.graphics.add(new d(F,this.markerSymbol),!0),E.snappingManager&&E.snappingManager._setGraphic(this._graphic),this.onDrawStart()):(this._graphic.geometry.addPoint(A[A.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case H.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],F.x,F.y);break;case H.LEFT_ARROW:this._addShape([[0,
0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],F.x,F.y);break;case H.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],F.x,F.y);break;case H.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],F.x,F.y);break;case H.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],F.x,F.y);break;case H.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,
24],[0,-48]],F.x,F.y);break;case H.RECTANGLE:this._addShape([[0,-96],[96,-96],[96,0],[0,0],[0,-96]],F.x-48,F.y+48);break;case H.CIRCLE:this._clear();this.onDrawStart();this._drawEnd(y.createCircle({center:F,r:48,numberOfPoints:60,map:E}));break;case H.ELLIPSE:this._clear(),this.onDrawStart(),this._drawEnd(y.createEllipse({center:F,longAxis:48,shortAxis:24,numberOfPoints:60,map:E}))}this._setTooltipMessage(this._points.length)},_addShape:function(E,A,F){this._setTooltipMessage(0);this._clear();this.onDrawStart();
this._drawEnd(this._toPolygon(E,A,F))},_toPolygon:function(E,A,F){var H=this.map,I=new y(H.spatialReference);I.addRing(w.map(E,function(L){return H.toMap({x:L[0]+A,y:L[1]+F})}));return I},_onDblClickHandler:function(E){var A=this._points,F=this.map.spatialReference,H=D;c("esri-touch")&&A.push(E.mapPoint);var I=A[A.length-1],L=A[A.length-2];A=I&&L&&I.x===L.x&&I.y===L.y?A.slice(0,A.length-1):A.slice(0,A.length);switch(this._geometryType){case H.POLYLINE:if(!this._graphic||2>A.length){v.disconnect(this._onMouseMoveHandler_connect);
this._clear();this._onClickHandler(E);return}var J=new x(F);J.addPath([].concat(A));break;case H.POLYGON:if(!this._graphic||3>A.length)return;J=new y(F);E=[].concat(A,[A[0].offset(0,0)]);y.prototype.isClockwise(E)||this.respectDrawingVertexOrder||E.reverse();J.addRing(E);break;case H.MULTI_POINT:J=new B(F),w.forEach(A,function(O){J.addPoint(O)})}v.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(J)},_onKeyDownHandler:function(E){E.keyCode===b.ESCAPE&&
(v.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(E){this._options.showTooltips&&(E?this._tooltip||(this._tooltip=p.create("div",{"class":"esriMapTooltip"},this.map.container),t.isBodyLtr()||q.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=v.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=
v.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=v.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(v.disconnect(this._onTooltipMouseEnterHandler_connect),v.disconnect(this._onTooltipMouseLeaveHandler_connect),v.disconnect(this._onTooltipMouseMoveHandler_connect),p.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var E=this._tooltip;E&&(E.style.display="none")},_setTooltipMessage:function(E){var A=this._tooltip;if(A){var F=
"";switch(this._geometryType){case D.POINT:F=z.toolbars.draw.addPoint;break;case D.ARROW:case D.LEFT_ARROW:case D.RIGHT_ARROW:case D.UP_ARROW:case D.DOWN_ARROW:case D.TRIANGLE:case D.RECTANGLE:case D.CIRCLE:case D.ELLIPSE:F=z.toolbars.draw.addShape;break;case D.LINE:case D.EXTENT:case D.FREEHAND_POLYLINE:case D.FREEHAND_POLYGON:F=z.toolbars.draw.freehand;break;case D.POLYLINE:case D.POLYGON:F=z.toolbars.draw.start;1===E?F=z.toolbars.draw.resume:2<=E&&(F=z.toolbars.draw.complete);break;case D.MULTI_POINT:F=
z.toolbars.draw.addMultipoint,1<=E&&(F=z.toolbars.draw.finish)}A.innerHTML=F}},_updateTooltip:function(E){var A=this._tooltip;if(A){if(E.clientX||E.pageY){var F=E.clientX;E=E.clientY}else F=E.clientX+f.body().scrollLeft-f.body().clientLeft,E=E.clientY+f.body().scrollTop-f.body().clientTop;A.style.display="none";q.set(A,{left:F+this._options.tooltipOffset+"px",top:E+"px"});A.style.display=""}},_redrawGraphic:function(E,A,F,H){(F||this.map.wrapAround180)&&(E=this._graphic)&&E.setGeometry(E.geometry)},
onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawStart:function(){},onDrawEnd:function(){}});G.mixin(D,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});G.setObject("toolbars.Draw",
D,m);return D})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(K,G,w,v,r){K=K([r],{declaredClass:"esri.toolbars._Toolbar",constructor:function(f){this.map=f},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(f,c,a,b){var p=this.map;
f&&(this._mapNavState={isDoubleClickZoom:p.isDoubleClickZoom,isClickRecenter:p.isClickRecenter,isPan:p.isPan,isRubberBandZoom:p.isRubberBandZoom,isKeyboardNavigation:p.isKeyboardNavigation,isScrollWheelZoom:p.isScrollWheelZoom},p.disableDoubleClickZoom(),p.disableClickRecenter(),p.disablePan(),p.disableRubberBandZoom(),p.disableKeyboardNavigation());c&&p.hideZoomSlider();a&&p.hidePanArrows();b&&p.graphics.disableMouseEvents()},_activateMapTools:function(f,c,a,b){var p=this.map,q=this._mapNavState;
f&&q&&(q.isDoubleClickZoom&&p.enableDoubleClickZoom(),q.isClickRecenter&&p.enableClickRecenter(),q.isPan&&p.enablePan(),q.isRubberBandZoom&&p.enableRubberBandZoom(),q.isKeyboardNavigation&&p.enableKeyboardNavigation(),q.isScrollWheelZoom&&p.enableScrollWheelZoom());c&&p.showZoomSlider();a&&p.showPanArrows();b&&p.graphics.enableMouseEvents()},_deactivateScrollWheel:function(){var f=this.map;this._scrollWheelState={isScrollWheelZoom:f.isScrollWheelZoom,isScrollWheelPan:f.isScrollWheelPan};f.disableScrollWheelZoom();
f.disableScrollWheelPan()},_activateScrollWheel:function(){var f=this.map,c=this._scrollWheelState;c&&(c.isScrollWheelZoom&&f.enableScrollWheelZoom(),c.isScrollWheelPan&&f.enableScrollWheelPan())}});G.setObject("toolbars._Toolbar",K,v);return K})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){var h=w("dijit.layout._Splitter",[m,n],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);
this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);v.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var d=G(this._cookieName);d&&(this.child.domNode.style[this.horizontal?"height":"width"]=d)}},_computeMaxSize:function(){var d=this.horizontal?"h":"w",g=f.getMarginBox(this.child.domNode)[d],u=K.filter(this.container.getChildren(),function(x){return"center"==x.region})[0];
d=f.getContentBox(u.domNode)[d]-10;return Math.min(this.child.maxSize,g+d)},_startDrag:function(d){this.cover||(this.cover=r.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));v.add(this.cover,"dijitSplitterCoverActive");this.fake&&r.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),v.add(this.domNode,"dijitSplitterShadow"),r.place(this.fake,this.domNode,"after"));v.add(this.domNode,"dijitSplitterActive dijitSplitter"+
(this.horizontal?"H":"V")+"Active");this.fake&&v.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var g=this._factor,u=this.horizontal,x=u?"pageY":"pageX",y=d[x],B=this.domNode.style;u=u?"h":"w";var C=c.getComputedStyle(this.child.domNode),z=f.getMarginBox(this.child.domNode,C)[u],D=this._computeMaxSize(),E=Math.max(this.child.minSize,f.getPadBorderExtents(this.child.domNode,C)[u]+10);u=this.region;var A="top"==u||"bottom"==u?"top":"left",F=parseInt(B[A],10),
H=this._resize,I=b.hitch(this.container,"_layoutChildren",this.child.id);u=this.ownerDocument;this._handlers=this._handlers.concat([p(u,q.move,this._drag=function(L,J){var O=L[x]-y,P=g*O+z,fa=Math.max(Math.min(P,D),E);(H||J)&&I(fa);B[A]=O+F+g*(fa-P)+"px"}),p(u,"dragstart",function(L){L.stopPropagation();L.preventDefault()}),p(this.ownerDocumentBody,"selectstart",function(L){L.stopPropagation();L.preventDefault()}),p(u,q.release,b.hitch(this,"_stopDrag"))]);d.stopPropagation();d.preventDefault()},
_onMouse:function(d){d="mouseover"==d.type||"mouseenter"==d.type;v.toggle(this.domNode,"dijitSplitterHover",d);v.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",d)},_stopDrag:function(d){try{this.cover&&v.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&r.destroy(this.fake),v.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(d),this._drag(d,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&
G(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var d;d=this._handlers.pop();)d.remove()},_onKeyDown:function(d){this._resize=!0;var g=this.horizontal,u=1;switch(d.keyCode){case g?a.UP_ARROW:a.LEFT_ARROW:u*=-1;case g?a.DOWN_ARROW:a.RIGHT_ARROW:break;default:return}g=f.getMarginSize(this.child.domNode)[g?"h":"w"]+this._factor*u;this.container._layoutChildren(this.child.id,Math.max(Math.min(g,this._computeMaxSize()),this.child.minSize));
d.stopPropagation();d.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),e=w("dijit.layout._Gutter",[m,n],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);v.add(this.domNode,"dijitGutter"+(this.horizontal?
"H":"V"))}});w=w("dijit.layout.BorderContainer",k,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:h,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(d){this.inherited(arguments);var g=d.region,u=d.isLeftToRight();"leading"==g&&(g=u?"left":"right");"trailing"==g&&(g=u?"right":"left");g&&"center"!=g&&(d.splitter||this.gutters)&&!d._splitterWidget&&(u=d.splitter?this._splitterClass:e,b.isString(u)&&
(u=b.getObject(u)),u=new u({id:d.id+"_splitter",container:this,child:d,region:g,live:this.liveSplitters}),u.isSplitter=!0,d._splitterWidget=u,g="bottom"==g||g==(this.isLeftToRight()?"right":"left"),r.place(u.domNode,d.domNode,g?"before":"after"),u.startup())},layout:function(){this._layoutChildren()},removeChild:function(d){var g=d._splitterWidget;g&&(g.destroy(),delete d._splitterWidget);this.inherited(arguments)},getChildren:function(){return K.filter(this.inherited(arguments),function(d){return!d.isSplitter})},
getSplitter:function(d){return K.filter(this.getChildren(),function(g){return g.region==d})[0]._splitterWidget},resize:function(d,g){if(!this.cs||!this.pe){var u=this.domNode;this.cs=c.getComputedStyle(u);this.pe=f.getPadExtents(u,this.cs);this.pe.r=c.toPixelValue(u,this.cs.paddingRight);this.pe.b=c.toPixelValue(u,this.cs.paddingBottom);c.set(u,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(d,g){if(this._borderBox&&this._borderBox.h){var u=[];K.forEach(this._getOrderedChildren(),
function(x){u.push(x);x._splitterWidget&&u.push(x._splitterWidget)});l.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},u,d,g)}},destroyRecursive:function(){K.forEach(this.getChildren(),function(d){var g=d._splitterWidget;g&&g.destroy();delete d._splitterWidget});this.inherited(arguments)}});w.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:Infinity};b.mixin(w.ChildWidgetProperties,k.ChildWidgetProperties);b.extend(t,w.ChildWidgetProperties);
w._Splitter=h;w._Gutter=e;return w})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(K,G,w,v,r,f,c,a){G=G("dijit.layout.LayoutContainer",c,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(K.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);
b.region&&w.add(b.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var b=K.map(this.getChildren(),function(p,q){return{pane:p,weight:["center"==p.region?Infinity:0,p.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(p.region)?1:-1),q]}},this);b.sort(function(p,q){for(var t=p.weight,m=q.weight,n=0;n<t.length;n++)if(t[n]!=m[n])return t[n]-m[n];return 0});return K.map(b,function(p){return p.pane})},layout:function(){a.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},
addChild:function(b,p){this.inherited(arguments);this._started&&this.layout()},removeChild:function(b){this.inherited(arguments);this._started&&this.layout();w.remove(b.domNode,this.baseClass+"Pane");v.set(b.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});v.set(b.domNode,/top|bottom/.test(b.region)?"width":"height","auto")}});G.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};r.extend(f,G.ChildWidgetProperties);return G})},"arcgisonline/map/utils/clipOnHorizon":function(){define(["./contains"],
function(K){return function(G){K([102113,102100,3857],G.spatialReference.wkid)&&(G.xmin=Math.max(G.xmin,-20037507),G.xmax=Math.min(G.xmax,20037507),G.ymin=Math.max(G.ymin,-19971868),G.ymax=Math.min(G.ymax,19971868));return G}})},"arcgisonline/map/utils/createExtentSearchOptions":function(){define("dojo/_base/lang dojo/_base/array esri/lang esri/tasks/locator ../../esriGeowConfig ../../sharing/util dojo/i18n!../../nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c){function a(){var b=K.clone(((r&&
r.self||{}).helperServices||{}).geocode||[]),p=!1;w.isDefined(r.geocodeAutoComplete)&&(p=r.geocodeAutoComplete);G.forEach(b,K.hitch(this,function(q){q.enableSuggestions=!0===q.suggest&&p?!0:!1;delete q.suggest;var t=f.isEsriWorldGeocoder(q);if(t||q.enableSuggestions)t&&(q.name=q.name||c.common.esriWorldGeocoder,q.enableSuggestions=p,q.placefinding=q.batch=q.esri=!0,q.outFields=["Match_addr","Addr_type","StAddr","City"]),q.placeholder=q.placeholder||c.viewer.findLocationText,q.singleLineFieldName=
q.singleLineFieldName||"SingleLine",q.highlightSymbol=null,q.localSearchOptions={minScale:3E5,distance:5E4};q.locator=new v(q.url)}));return b=G.filter(b,function(q){return w.isDefined(q.singleLineFieldName)&&w.isDefined(q.placefinding)&&q.placefinding})}return function(b,p){var q=w.isDefined(r.geocodeAutoComplete)?r.geocodeAutoComplete:!1,t=a();q={map:b,enableSuggestions:q,minCharacters:3,maxResults:5,suggestionDelay:100,value:p||null,autoNavigate:!1,activeSourceIndex:"all",sources:[].concat(t)};
1===q.sources.length&&delete q.activeSourceIndex;return q}})},"arcgisonline/sharing/dijit/dialog/ShareOwnershipDlg":function(){define("dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/string dojo/_base/window dojo/promise/all dojo/when dojo/Deferred dojo/_base/array dojo/cookie dojo/dom-class dojo/json dijit/registry dijit/form/Select dojox/form/TriStateCheckBox ./ConfirmDialog dijit/focus dojo/_base/event dojo/keys dgrid/OnDemandGrid dgrid/Selection dgrid/editor dojo/store/Memory dojo/store/Observable ./_CreateItemUtilMixin dojo/topic esri/Evented esri/arcgis/Portal ../../geow/Account ../../geow/Content ../../util dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka){return K("arcgisonline.sharing.dijit.dialog.ShareOwnershipDlg",[a,b,p,O],{baseClass:"esriSharedOwnershipDlg table-layout",templateString:'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\x3cp data-dojo-attach-point\x3d"_message"\x3e${i18n.sharingDlg.sharedOwnershipMsg}\x3c/p\x3e\x3cdiv class\x3d"main"\x3e\x3cdiv id\x3d"${id}-groups" data-dojo-attach-point\x3d"_groups" \x3e\x3c/div\x3e\x3c/div\x3e\x3cp data-dojo-attach-point\x3d"_footerMessage"\x3e${i18n.sharingDlg.settingsMsg}\x3c/p\x3e',
onDone:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=c.mixin({},ka)},postCreate:function(){this.inherited(arguments);fa.getSelf(c.hitch(this,function(la){this._loadConnections();this._portal=new P.Portal({url:esriGeowConfig.restBaseUrl,self:la});this._connect=this._portal.on("load",c.hitch(this,function(){this._connect.remove();this._portalUser=this._portal.getPortalUser();this.set("disabled",!0,this.i18n.sharingDlg.fetchingGroups);return this._loadData().then(c.hitch(this,
function(ma){this._createGrid(ma);this.set("disabled",!1);J.publish("shareOwnership/load")}),c.hitch(this,function(ma){J.publish("shareOwnership/load")}))}))}))},startup:function(){this.inherited(arguments);var la=new l,ma=J.subscribe("shareOwnership/load",function(){ma.remove();la.resolve()});return la},destroy:function(){v(".dijit",this.contentNode).map(dijit.byNode).forEach(function(la){la.destroyRecursive?la.destroyRecursive():la.destroy&&la.destroy();la=null});this._groups.destroy();this._groupsStore=
this._groups=null;this._errorDlg&&(this._errorDlg.destroyRecursive(),this._errorDlg=null);this.inherited(arguments);this._portalUser=this._portal=null},_createGrid:function(la){la=[F({field:"visible",autoSave:!0},y),{field:"title"}];this._groups=new (K([E,A]))({selectionMode:"none",store:this._groupsStore,showHeader:!1,showLoadingMessage:!1,columns:la,sort:[{attribute:"title",descending:!1}]},this._groups);this._groups.startup();this._groups.on(".dgrid-cell.field-visible:click",c.hitch(this,function(ma){ma=
this._groups.cell(ma).element.widget;"mixed"===(ma&&ma.get("checked")||!1)&&ma.set("checked",!0)}))},_loadConnections:function(){this.own(J.subscribe("dlg/onOk",c.hitch(this,function(){this._focusNode&&setTimeout(c.hitch(this,function(){C.focus(this._focusNode)}),250)})),J.subscribe("/esri/disable",c.hitch(this,function(la,ma){this.set("disabled",la,ma,!0)})))},_loadData:function(){var la=new l,ma=h.map(this.items||[],c.hitch(this,function(ha){return this._getGroupsItemSharedWith(ha)}));this._sharedOwnershipGroups=
this._getSharedOwnershipGroups(this.groups);this._groupsStore=new I(new H({idProperty:"id",data:this._sharedOwnershipGroups}));n(ma).then(c.hitch(this,function(ha){la[this._sharedOwnershipGroups&&this._sharedOwnershipGroups.length?"resolve":"reject"](this._sharedOwnershipGroups)}));return la},_setValueAttr:function(la){this.items=la.items.map(function(ma){return c.mixin({},ma)});this.groups=la.groups.map(function(ma){return c.mixin({},ma)})},_getValueAttr:function(){return{selected:this._groupsStore.query({visible:"on"}).map(function(la){return la.id}),
unselected:this._groupsStore.query({visible:!1}).map(function(la){return la.id})}},_setFocusAttr:function(la){la=v(la,this.domNode);C.focus(la&&la.length?la[0]:this._title.domNode)},_setDisabledAttr:function(la,ma,ha){this.set("readOnly",la,ma,ha)},_setReadOnlyAttr:function(la,ma,ha){v(".dijit",this.domNode).map(dijit.byNode).forEach(function(Z){Z.set("disabled",la)});v("a",this.domNode)[la?"addClass":"removeClass"]("disabledLink");v("label, p, span",this.domNode)[la?"addClass":"removeClass"]("disabled");
ha||(la&&ma&&J.publish("/dlg/busyMessage",ma),J.publish("/esri/disable",la,ma))},shareWithSelectedGroup:function(){var la=new l,ma=h.map(this.items||[],"return item.id;").join(","),ha=this.items&&this.items.length?this.items[0].owner:null,Z={owner:ha,items:ma,groups:this.get("value").selected.join(","),confirmItemControl:!0};ma={owner:ha,items:ma,groups:this.get("value").unselected.join(",")};this.set("disabled",!0,this.i18n.sharingDlg.sharingItems);n([this._shareItems(Z),this._unshareItems(ma)]).then(c.hitch(this,
function(){this.set("disabled",!1);la.resolve()}),c.hitch(this,function(W){this.set("disabled",!1);la.reject(W)}));return la},_shareItems:function(la){var ma=new l;la.groups&&la.groups.length?V.shareItems(la,c.hitch(this,function(ha){this.set("disabled",!1);ma.resolve(ha)}),c.hitch(this,function(ha){ma.reject(ha)})):ma.resolve([]);return ma},_unshareItems:function(la){var ma=new l;la.groups&&la.groups.length?V.unshareItems(la,c.hitch(this,function(ha){this.set("disabled",!1);ma.resolve(ha)}),c.hitch(this,
function(ha){ma.reject(ha)})):ma.resolve([]);return ma},_getGroupsItemSharedWith:function(la){la=this._portal.portalUrl+"content/items/"+la.id+"/groups";var ma=this.items&&this.items.length||0,ha,Z=new l;ba.request({url:la}).then(c.hitch(this,function(W){W=this._getSharedOwnershipGroups(W.admin).concat(this._getSharedOwnershipGroups(W.member)).concat(this._getSharedOwnershipGroups(W.other));h.forEach(W||[],c.hitch(this,function(Q){if(ha=this._groupsStore.get(Q.id))ha.shareCount=ha.shareCount?ha.shareCount+
1:1,ha.visible=ha.shareCount===ma?"on":"mixed",this._groupsStore.put(ha)}));Z.resolve(W)}));return Z},_getSharedOwnershipGroups:function(la){var ma,ha=this._portalUser&&this._portalUser.username;return h.filter(la||[],c.hitch(this,function(Z){ma=Z.capabilities&&Z.capabilities.join(",")||"";return(Z.owner===ha||!Z.isViewOnly||Z.userMembership&&"admin"===Z.userMembership.memberType)&&-1<ma.toLowerCase().indexOf("updateitemcontrol")}))},validate:function(){var la=new l;this._focusNode=null;var ma=this._checkRequired();
ma=ma.then(c.hitch(this,function(ha){la.resolve(ha)}),c.hitch(this,function(ha){this._showError(ha);la.reject(ha)}));return la},_checkRequired:function(){var la=new l;la.resolve(!0);return la},_showError:function(la){la=c.mixin(c.mixin({},ka.publishWizard.errors.error),la);this._errorDlg=new B({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(la).then(c.hitch(this,function(){this.set("disabled",!1);this._errorDlg.hide();this._focusNode&&setTimeout(c.hitch(this,function(){C.focus(this._focusNode)}),
250)}));return!1}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){function g(x){return function(y){this._isLoaded?this.inherited(x,
arguments):this.loadDropDown(a.hitch(this,x,y))}}var u=G("dijit.form._SelectMenu",m,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,"selectstart",function(x){x.preventDefault();x.stopPropagation()}))},focus:function(){var x=!1,y=this.parentWidget.value;a.isArray(y)&&(y=y[y.length-1]);y&&K.forEach(this.parentWidget._getChildren(),function(B){B.option&&y===B.option.value&&
(x=!0,this.focusChild(B,!1))},this);x||this.inherited(arguments)}});r=G("dijit.form.Select"+(p("dojo-bidi")?"_NoBidi":""),[q,t,h],{baseClass:"dijitSelect dijitValidationTextBox",templateString:d,_buttonInputDisabled:p("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var x=this.srcNodeRef.selectedIndex||
0;this._set("value",this.options[0<=x?x:0].value)}this.dropDown=new u({id:this.id+"_menu",parentWidget:this});v.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(x){if(x.value||x.label){var y=a.hitch(this,"_setValueAttr",x);x=new n({option:x,label:("text"===this.labelType?(x.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):x.label)||this.emptyLabel,onClick:y,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:x.disabled||
!1});x.focusNode.setAttribute("role","option");return x}return new k({ownerDocument:this.ownerDocument})},_addOptionItem:function(x){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(x))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(x){}},focusChild:function(x){x&&this.set("value",x.option)},_getFirst:function(){var x=this._getChildren();return x.length?x[0]:null},
_getLast:function(){var x=this._getChildren();return x.length?x[x.length-1]:null},childSelector:function(x){return(x=e.byNode(x))&&x.getParent()==this.dropDown},onKeyboardSearch:function(x,y,B,C){x&&this.focusChild(x)},_loadChildren:function(x){if(!0===x)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{K.forEach(this._getChildren(),function(B){B.destroyRecursive()});var y=new n({ownerDocument:this.ownerDocument,label:this.emptyLabel});
this.dropDown.addChild(y)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(x){this.inherited(arguments);w.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(x){this.inherited(arguments);this._refreshState()},
_setRequiredAttr:function(x){this._set("required",x);this.focusNode.setAttribute("aria-required",x);this._refreshState()},_setOptionsAttr:function(x){this._isLoaded=!1;this._set("options",x)},_setDisplay:function(x){x=("text"===this.labelType?(x||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):x)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+x+"\x3c/span\x3e"},
validate:function(x){x=this.disabled||this.isValid(x);this._set("state",x?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",x?"false":"true");var y=x?"":this._missingMsg;y&&this.focused&&this._hasBeenBlurred?l.show(y,this.domNode,this.tooltipPosition,!this.isLeftToRight()):l.hide(this.domNode);this._set("message",y);return x},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);l.hide(this.domNode);
this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=f.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,"selectstart",function(y){y.preventDefault();y.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var x=this._keyNavCodes;delete x[c.LEFT_ARROW];delete x[c.RIGHT_ARROW]},_setStyleAttr:function(x){this.inherited(arguments);v.toggle(this.domNode,
this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(x){this._loadChildren(!0);this._isLoaded=!0;x()},destroy:function(x){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(x),delete this.dropDown);l.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){l.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});p("dojo-bidi")&&(r=
G("dijit.form.Select",r,{_setDisplay:function(x){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));r._Menu=u;r.prototype._onContainerKeydown=g("_onContainerKeydown");r.prototype._onContainerKeypress=g("_onContainerKeypress");return r})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m){return r("dijit.form._FormSelectWidget",m,{multiple:!1,options:null,store:null,_setStoreAttr:function(n){this._created&&this._deprecatedSetStore(n)},query:null,_setQueryAttr:function(n){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:n})},queryOptions:null,_setQueryOptionsAttr:function(n){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:n})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(n){var k=this.options||[];if(null==n)return k;if(b.isArrayLike(n))return K.map(n,"return this.getOptions(item);",this);b.isString(n)&&(n={value:n});b.isObject(n)&&(K.some(k,function(l,h){for(var e in n)if(!(e in l)||l[e]!=n[e])return!1;n=h;return!0})||(n=-1));return 0<=n&&n<k.length?k[n]:null},addOption:function(n){K.forEach(b.isArrayLike(n)?n:[n],function(k){k&&b.isObject(k)&&this.options.push(k)},this);this._loadChildren()},removeOption:function(n){n=this.getOptions(b.isArrayLike(n)?
n:[n]);K.forEach(n,function(k){k&&(this.options=K.filter(this.options,function(l){return l.value!==k.value||l.label!==k.label}),this._removeOptionItem(k))},this);this._loadChildren()},updateOption:function(n){K.forEach(b.isArrayLike(n)?n:[n],function(k){var l=this.getOptions({value:k.value}),h;if(l)for(h in k)l[h]=k[h]},this);this._loadChildren()},setStore:function(n,k,l){a.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(n,k,l)},_deprecatedSetStore:function(n,k,l){var h=this.store;l=l||{};if(h!==n){for(var e;e=this._notifyConnections.pop();)e.remove();n.get||(b.mixin(n,{_oldAPI:!0,get:function(d){var g=new G;this.fetchItemByIdentity({identity:d,onItem:function(u){g.resolve(u)},onError:function(u){g.reject(u)}});return g.promise},query:function(d,g){var u=new G(function(){x.abort&&x.abort()});u.total=new G;var x=this.fetch(b.mixin({query:d,onBegin:function(y){u.total.resolve(y)},
onComplete:function(y){u.resolve(y)},onError:function(y){u.reject(y)}},g));return new t(u)}}),n.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[w.after(n,"onNew",b.hitch(this,"_onNewItem"),!0),w.after(n,"onDelete",b.hitch(this,"_onDeleteItem"),!0),w.after(n,"onSet",b.hitch(this,"_onSetItem"),!0)]));this._set("store",n)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);l.query&&this._set("query",l.query);l.queryOptions&&this._set("queryOptions",l.queryOptions);n&&n.query&&(this._loadingStore=!0,this.onLoadDeferred=new G,this._queryRes=n.query(this.query,this.queryOptions),q(this._queryRes,b.hitch(this,function(d){if(this.sortByLabel&&!l.sort&&d.length)if(n.getValue)d.sort(v.createSortFunction([{attribute:n.getLabelAttributes(d[0])[0]}],n));else{var g=this.labelAttr;d.sort(function(u,x){return u[g]>x[g]?1:x[g]>
u[g]?-1:0})}l.onFetch&&(d=l.onFetch.call(this,d,l));K.forEach(d,function(u){this._addOptionForItem(u)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(b.hitch(this,function(u,x,y){x==y?this._onSetItem(u):(-1!=x&&this._onDeleteItem(u),-1!=y&&this._onNewItem(u))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:k);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(d):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),b.hitch(this,function(d){this.onLoadDeferred.reject(d)})));return h},_setValueAttr:function(n,k){this._onChangeActive||(k=null);if(this._loadingStore)this._pendingValue=n;else if(null!=n){n=b.isArrayLike(n)?K.map(n,function(e){return b.isObject(e)?e:{value:e}}):b.isObject(n)?[n]:[{value:n}];n=K.filter(this.getOptions(n),function(e){return e&&e.value});var l=this.getOptions()||[];this.multiple||n[0]&&n[0].value||!l.length||(n[0]=l[0]);K.forEach(l,function(e){e.selected=K.some(n,
function(d){return d.value===e.value})});l=K.map(n,function(e){return e.value});if("undefined"!=typeof l&&"undefined"!=typeof l[0]){var h=K.map(n,function(e){return e.label});this._setDisplay(this.multiple?h:h[0]);this.inherited(arguments,[this.multiple?l:l[0],k]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var n=K.map([].concat(this.get("selectedOptions")),function(k){return k&&"label"in k?k.label:k?k.value:null},this);return this.multiple?n:n[0]},_setDisplayedValueAttr:function(n){this.set("value",
this.getOptions("string"==typeof n?{label:n}:n))},_loadChildren:function(){this._loadingStore||(K.forEach(this._getChildren(),function(n){n.destroyRecursive()}),K.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var n=[].concat(this.value);if(n&&n[0]){var k=this;K.forEach(this._getChildren(),function(l){var h=K.some(n,function(e){return l.option&&e===l.option.value});h&&!k.multiple&&
(k.focusedChild=l);c.toggle(l.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),h);l.domNode.setAttribute("aria-selected",h?"true":"false")},this)}},_getValueFromOpts:function(){var n=this.getOptions()||[];if(!this.multiple&&n.length){var k=K.filter(n,function(l){return l.selected})[0];if(k&&k.value)return k.value;n[0].selected=!0;return n[0].value}return this.multiple?K.map(K.filter(n,function(l){return l.selected}),function(l){return l.value})||[]:""},_onNewItem:function(n,k){k&&k.parent||
this._addOptionForItem(n)},_onDeleteItem:function(n){this.removeOption({value:this.store.getIdentity(n)})},_onSetItem:function(n){this.updateOption(this._getOptionObjForItem(n))},_getOptionObjForItem:function(n){var k=this.store,l=this.labelAttr&&this.labelAttr in n?n[this.labelAttr]:k.getLabel(n);return{value:l?k.getIdentity(n):null,label:l,item:n}},_addOptionForItem:function(n){var k=this.store;k.isItemLoaded&&!k.isItemLoaded(n)?k.loadItem({item:n,onItem:function(l){this._addOptionForItem(l)},scope:this}):
(n=this._getOptionObjForItem(n),this.addOption(n))},constructor:function(n){this._oValue=(n||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);f.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?p("\x3e *",this.srcNodeRef).map(function(n){return"separator"===n.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:n.getAttribute("data-"+a._scopeName+"-value")||n.getAttribute("value"),
label:String(n.innerHTML),selected:n.getAttribute("selected")||!1,disabled:n.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);w.after(this,"onChange",b.hitch(this,"_updateSelection"));var n=this.store;n&&(n.getIdentity||n.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(n,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var n;n=this._notifyConnections.pop();)n.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(K,G,w,v){return K("dijit.DropDownMenu",v,{templateString:w,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(r){this._moveToPopup(r);r.stopPropagation();r.preventDefault()},
_onLeftArrow:function(r){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else r.stopPropagation(),r.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){return G("dijit._MenuBase",[t,
k,n,m],{selected:null,_setSelectedAttr:function(l){this.selected!=l&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),l&&l._setSelected(!0),this._set("selected",l))},activated:!1,_setActivatedAttr:function(l){r.toggle(this.domNode,"dijitMenuActive",l);r.toggle(this.domNode,"dijitMenuPassive",!l);this._set("activated",l)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(l){var h=q.byNode(l);return l.parentNode==this.containerNode&&
h&&h.focus},postCreate:function(){var l=this,h="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(a(this.containerNode,a.selector(h,c.enter),function(){l.onItemHover(q.byNode(this))}),a(this.containerNode,a.selector(h,c.leave),function(){l.onItemUnhover(q.byNode(this))}),a(this.containerNode,a.selector(h,p),function(e){l.onItemClick(q.byNode(this),e);e.stopPropagation()}),a(this.containerNode,a.selector(h,"focusin"),function(){l._onItemFocus(q.byNode(this))}));
this.inherited(arguments)},onKeyboardSearch:function(l,h,e,d){this.inherited(arguments);if(l&&(-1==d||l.popup&&1==d))this.onItemClick(l,h)},_keyboardSearchCompare:function(l,h){return l.shortcutKey?h==l.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(l){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,l);else(l=this._getTopMenu())&&l._isMenuBar&&l.focusNext()},
_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(l){this.activated?(this.set("selected",l),!l.popup||l.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(l)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(l,{type:"click"})},this.passivePopupDelay));this._hoveredChild=
l;l._set("hovering",!0)},_onChildDeselect:function(l){this._stopPopupTimer();this.currentPopupItem==l&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;l._closePopup()},this.popupDelay))},onItemUnhover:function(l){this._hoveredChild==l&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);l._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&
(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var l=this;l.parentMenu;l=l.parentMenu);return l},onItemClick:function(l,h){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(l);if(l.disabled)return!1;if(l.popup){this.set("selected",l);this.set("activated",!0);var e=/^key/.test(h._origType||h.type)||0==h.clientX&&0==h.clientY;this._openItemPopup(l,
e)}else this.onExecute(),l._onClick?l._onClick(h):l.onClick(h)},_openItemPopup:function(l,h){if(l!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var e=l.popup;e.parentMenu=this;this.own(this._mouseoverHandle=a.once(e.domNode,"mouseover",f.hitch(this,"_onPopupHover")));var d=this;l._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){h&&d.focusChild(l);d._cleanUp()},onExecute:f.hitch(this,
"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},h);this.currentPopupItem=l}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(v.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),
this.currentPopupItem=null)},_onItemFocus:function(l){if(this._hoveredChild&&this._hoveredChild!=l)this.onItemUnhover(this._hoveredChild);this.set("selected",l)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(l){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);l&&this.set("selected",null)}})})},"dojox/form/TriStateCheckBox":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/event dojo/query dojo/dom-attr dojo/text!./resources/TriStateCheckBox.html dijit/form/Button dijit/form/_ToggleButtonMixin dojo/NodeList-dom".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return G("dojox.form.TriStateCheckBox",[b,p],{templateString:a,baseClass:"dojoxTriStateCheckBox",type:"checkbox",states:"",_stateLabels:null,stateValue:null,_currentState:0,_stateType:"False",readOnly:!1,checked:"",_aria_attr:"aria-checked",constructor:function(){this.states=[!1,"mixed",!0];this.checked=!1;this._stateLabels={False:"\x26#9633;",True:"\x26#8730;",Mixed:"\x26#9632;"};this.stateValues={False:!1,True:"on",Mixed:"mixed"}},_fillContent:function(q){},postCreate:function(){c.set(this.stateLabelNode,
"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},startup:function(){this.set("checked",this.params.checked||this.states[this._currentState]);c.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},_setIconClassAttr:null,_setCheckedAttr:function(q,t){var m=w.indexOf(this.states,q);0<=m&&(this._currentState=m,this._stateType=this._getStateType(q),c.set(this.focusNode,"value",this.stateValues[this._stateType]),c.set(this.stateLabelNode,
"innerHTML",this._stateLabels[this._stateType]),this.inherited(arguments))},setChecked:function(q){K.deprecated("setChecked("+q+") is deprecated. Use set('checked',"+q+") instead.","","2.0");this.set("checked",q)},_setStatesAttr:function(q){if(v.isArray(q))this._set("states",q);else if(v.isString(q)){var t={"true":!0,"false":!1,mixed:"mixed"};q=q.split(/\s*,\s*/);for(var m=0;m<q.length;m++)q[m]=void 0!==t[q[m]]?t[q[m]]:!1;this._set("states",q)}},_setReadOnlyAttr:function(q){this._set("readOnly",q);
c.set(this.focusNode,"readOnly",q)},_setValueAttr:function(q,t){"string"==typeof q&&0>w.indexOf(this.states,q)&&(""==q&&(q="on"),this.stateValues.True=q,q=!0);this._created&&(this._currentState=w.indexOf(this.states,q),this.set("checked",q,t),c.set(this.focusNode,"value",this.stateValues[this._stateType]))},_setValuesAttr:function(q){this.stateValues.True=q[0]?q[0]:this.stateValues.True;this.stateValues.Mixed=q[1]?q[1]:this.stateValues.Mixed},_getValueAttr:function(){return this.stateValues[this._stateType]},
reset:function(){this._hasBeenBlurred=!1;this.set("states",this.params.states||[!1,"mixed",!0]);this.stateValues=this.params.stateValues||{False:!1,True:"on",Mixed:"mixed"};this.set("values",this.params.values||[]);this.set("checked",this.params.checked||this.states[0])},_onFocus:function(){this.id&&f("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&f("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.mouseFocus=
!1;this.inherited(arguments)},_onClick:function(q){if(this.readOnly||this.disabled)return r.stop(q),!1;this.click();return this.onClick(q)},click:function(){this._currentState>=this.states.length-1?this._currentState=0:-1==this._currentState?this.fixState():this._currentState++;var q=this._currentState;this.set("checked",this.states[this._currentState]);this._currentState=q;c.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType])},fixState:function(){this._currentState=this.states.length-
1},_getStateType:function(q){return q?"mixed"==q?"Mixed":"True":"False"},_onMouseDown:function(){this.mouseFocus=!0}})})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(K,G,w){return K("dgrid.OnDemandGrid",[G,w],{})})},"dgrid/Grid":function(){define("dojo/_base/kernel dojo/_base/declare dojo/on dojo/has put-selector/put ./List ./util/misc dojo/_base/sniff".split(" "),function(K,G,w,v,r,f,c){function a(q,t){t&&t.nodeType&&q.appendChild(t)}function b(q,
t,m,n){if(this.formatter){n=this.formatter;var k=this.grid.formatterScope;m.innerHTML="string"===typeof n&&k?k[n](t,q):this.formatter(t,q)}else null!=t&&m.appendChild(document.createTextNode(t))}var p=8>v("ie")&&!v("quirks");G=G("dgrid.Grid",f,{columns:null,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(q){return"object"!=typeof q?this.columns[q]:this.cell(q).column},listType:"grid",cell:function(q,t){if(q.column&&q.element)return q;q.target&&q.target.nodeType&&(q=q.target);if(q.nodeType){do{if(this._rowIdToObject[q.id])break;
var m=q.columnId;if(m){t=m;var n=q;break}q=q.parentNode}while(q&&q!=this.domNode)}if(!n&&"undefined"!=typeof t){var k=this.row(q);if(m=k&&k.element){m=m.getElementsByTagName("td");for(var l=0;l<m.length;l++)if(m[l].columnId==t){n=m[l];break}}}if(null!=q)return{row:k||this.row(q),column:t&&this.column(t),element:n}},createRowCells:function(q,t,m,n){var k=r("table.dgrid-row-table[role\x3dpresentation]"),l=9>v("ie")||v("quirks")?r(k,"tbody"):k,h,e,d;m=m||this.subRows;var g=0;for(h=m.length;g<h;g++){var u=
m[g];var x=r(l,"tr");u.className&&r(x,"."+u.className);var y=0;for(e=u.length;y<e;y++){var B=u[y];var C=B.id;var z=B.field?".field-"+c.escapeCssIdentifier(B.field,"-"):"";(d="function"===typeof B.className?B.className(n):B.className)&&(z+="."+d);z=r(q+(".dgrid-cell.dgrid-cell-padding"+(C?".dgrid-column-"+c.escapeCssIdentifier(C,"-"):"")+z.replace(/ +/g,"."))+"[role\x3d"+("th"===q?"columnheader":"gridcell")+"]");z.columnId=C;p?(C=r(z,"!dgrid-cell-padding div.dgrid-cell-padding"),z.contents=C):C=z;
if(d=B.colSpan)z.colSpan=d;if(d=B.rowSpan)z.rowSpan=d;t(C,B);x.appendChild(z)}}return k},left:function(q,t){q.element||(q=this.cell(q));return this.cell(this._move(q,-(t||1),"dgrid-cell"))},right:function(q,t){q.element||(q=this.cell(q));return this.cell(this._move(q,t||1,"dgrid-cell"))},renderRow:function(q,t){var m=this.createRowCells("td",function(n,k){var l=q;k.get?l=k.get(q):"field"in k&&"_item"!=k.field&&(l=l[k.field]);k.renderCell?a(n,k.renderCell(q,l,n,t)):b.call(k,q,l,n,t)},t&&t.subRows,
q);return r("div[role\x3drow]\x3e",m)},renderHeader:function(){var q=this,t=this.headerNode,m=t.childNodes.length;for(t.setAttribute("role","row");m--;)r(t.childNodes[m],"!");m=this.createRowCells("th",function(n,k){var l=k.headerNode=n;p&&(n=n.parentNode);var h=k.field;h&&(n.field=h);k.renderHeaderCell?a(l,k.renderHeaderCell(l)):("label"in k||k.field)&&l.appendChild(document.createTextNode("label"in k?k.label:k.field));!1!==k.sortable&&h&&"_item"!=h&&(n.sortable=!0,n.className+=" dgrid-sortable")},
this.subRows&&this.subRows.headerRows);this._rowIdToObject[m.id=this.id+"-header"]=this.columns;t.appendChild(m);this._sortListener&&this._sortListener.remove();this._sortListener=w(m,"click,keydown",function(n){if("click"==n.type||32==n.keyCode||!v("opera")&&13==n.keyCode){var k=n.target,l,h;do if(k.sortable){var e=[{attribute:l=k.field||k.columnId,descending:(h=q._sort[0])&&h.attribute==l&&!h.descending}];l={bubbles:!0,cancelable:!0,grid:q,parentType:n.type,sort:e};w.emit(n.target,"dgrid-sort",
l)&&(q._sortNode=k,q.set("sort",e));break}while((k=k.parentNode)&&k!=t)}})},resize:function(){var q=this.headerNode.firstChild,t=this.contentNode,m;this.inherited(arguments);if(!v("ie")||7<v("ie")&&!v("quirks"))t.style.width="",t&&q&&(m=q.offsetWidth)!=t.offsetWidth&&(t.style.width=m+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(q,t){this.inherited(arguments);this.updateSortArrow(this._sort)},_findSortArrowParent:function(q){var t=
this.columns,m;for(m in t){var n=t[m];if(n.field==q)return n.headerNode}},updateSortArrow:function(q,t){this._lastSortedArrow&&(r(this._lastSortedArrow,"\x3c!dgrid-sort-up!dgrid-sort-down"),r(this._lastSortedArrow,"!"),delete this._lastSortedArrow);t&&(this._sort=q);if(q[0]){var m=q[0].attribute,n=q[0].descending;m=this._sortNode||this._findSortArrowParent(m);delete this._sortNode;if(m){m=m.contents||m;var k=this._lastSortedArrow=r("div.dgrid-sort-arrow.ui-icon[role\x3dpresentation]");k.innerHTML=
"\x26nbsp;";m.insertBefore(k,m.firstChild);r(m,n?".dgrid-sort-down":".dgrid-sort-up");this.resize()}}},styleColumn:function(q,t){return this.addCssRule("#"+c.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+c.escapeCssIdentifier(q,"-"),t)},_configColumns:function(q,t){var m=[],n=t instanceof Array;c.each(t,function(k,l){"string"==typeof k&&(t[l]=k={label:k});n||k.field||(k.field=l);l=k.id=k.id||(isNaN(l)?l:q+l);this._configColumn&&(this._configColumn(k,l,t,q),l=k.id);n&&(this.columns[l]=k);
k.grid=this;"function"===typeof k.init&&k.init();m.push(k)},this);return n?t:m},_destroyColumns:function(){var q=this.subRows,t=q&&q.length,m,n;this.cleanup();for(m=0;m<t;m++){var k=0;for(n=q[m].length;k<n;k++){var l=q[m][k];"function"===typeof l.destroy&&l.destroy()}}},configStructure:function(){var q=this.subRows,t=this._columns=this.columns;this.columns=!t||t instanceof Array?{}:t;if(q)for(t=0;t<q.length;t++)q[t]=this._configColumns(t+"-",q[t]);else this.subRows=[this._configColumns("",t)]},_getColumns:function(){return this._columns||
this.columns},_setColumns:function(q){this._destroyColumns();this.subRows=null;this.columns=q;this._updateColumns()},_setSubRows:function(q){this._destroyColumns();this.subRows=q;this._updateColumns()},setColumns:function(q){K.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",q)},setSubRows:function(q){K.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",q)},_updateColumns:function(){this.configStructure();this.renderHeader();
this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this._sort&&this._sort.length?this.updateSortArrow(this._sort):this.resize())}});G.appendIfNode=a;G.defaultRenderCell=b;return G})},"put-selector/put":function(){(function(K){var G,w=/[-+,> ]/;K([],G=function(v,r){function f(q){function t(){h&&l&&h!=l&&(l==q&&(m||(m=w.test(u)&&v.createDocumentFragment()))?m:l).insertBefore(h,k||null)}for(var m,n,k,l,h,e=arguments,d=e[0],g=0;g<e.length;g++){var u=e[g];if("object"==
typeof u){n=!1;if(u instanceof Array){h=v.createDocumentFragment();for(var x=0;x<u.length;x++)h.appendChild(f(u[x]));u=h}if(u.nodeType)h=u,t(),l=u,k=0;else for(x in u)h[x]=u[x]}else if(n)n=!1,h.appendChild(v.createTextNode(u));else{1>g&&(q=null);n=!0;if(d=u.replace(c,function(y,B,C,z,D,E){B&&(t(),"-"==B||"+"==B?(l=(k=h||l).parentNode,h=null,"+"==B&&(k=k.nextSibling)):("\x3c"==B?l=h=(h||l).parentNode:(","==B?l=q:h&&(l=h),h=null),k=0),h&&(l=h));if((y=!C&&z)||!h&&(C||D))"$"==y?(y=e[++g],l.appendChild(v.createTextNode(y))):
(y=y||f.defaultTag,(B=p&&e[g+1]&&e[g+1].name)&&(y="\x3c"+y+' name\x3d"'+B+'"\x3e'),h=b&&~(a=y.indexOf("|"))?v.createElementNS(b[y.slice(0,a)],y.slice(a+1)):v.createElement(y));if(C)if("$"==z&&(z=e[++g]),"#"==C)h.id=z;else if(B=(y=h.className)&&(" "+y+" ").replace(" "+z+" "," "),"."==C)h.className=y?(B+z).substring(1):z;else if("!"==u){var A;p?f("div",h,"\x3c").innerHTML="":(A=h.parentNode)&&A.removeChild(h)}else B=B.substring(1,B.length-1),B!=y&&(h.className=B);D&&("$"==E&&(E=e[++g]),"style"==D?h.style.cssText=
E:(C="!"==D.charAt(0)?(D=D.substring(1))&&"removeAttribute":"setAttribute",E=""===E?D:E,b&&~(a=D.indexOf("|"))?h[C+"NS"](b[D.slice(0,a)],D.slice(a+1),E):h[C](D,E)));return""}))throw new SyntaxError("Unexpected char "+d+" in "+u);t();l=d=h||l}}q&&m&&q.appendChild(m);return d}w=r||w;var c=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w\u00A0-\uFFFF%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,a,b=!1;v=v||document;var p="object"==typeof v.createElement;f.addNamespace=function(q,t){v.createElementNS?(b||
(b={}))[q]=t:v.namespaces.add(q,t)};f.defaultTag="div";f.forDocument=G;return f})})(function(K,G,w){w=w||G;"function"===typeof define?define([],function(){return w()}):"undefined"==typeof window?require("./node-html")(module,w):put=w()})},"dgrid/List":function(){define("dojo/_base/kernel dojo/_base/declare dojo/dom dojo/on dojo/query dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(K,G,w,v,r,f,c,a,
b,p){function q(x,y){return r("#"+c.escapeCssIdentifier(x),y)[0]}function t(x,y){p(document.body,x,".dgrid-scrollbar-measure");var B=x["offset"+y]-x["client"+y];x.className="";x.parentNode&&document.body.removeChild(x);return B}function m(x){var y=x?"."+x.replace(g,"."):"";this._class&&(y="!"+this._class.replace(g,"!")+y);p(this.domNode,y);this._class=x}function n(){return this._class}function k(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function l(x){"undefined"!==typeof x.x&&
(this.bodyNode.scrollLeft=x.x);"undefined"!==typeof x.y&&(this.bodyNode.scrollTop=x.y)}b("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var h,e;f.add("dom-scrollbar-width",function(x,y,B){return t(B,"Width")});f.add("dom-scrollbar-height",function(x,y,B){return t(B,"Height")});f.add("dom-rtl-scrollbar-left",function(x,y,B){x=p("div");p(document.body,B,".dgrid-scrollbar-measure[dir\x3drtl]");p(B,x);y=!!f("ie")||!!f("trident")||x.offsetLeft>=f("dom-scrollbar-width");B.className=
"";B.parentNode&&document.body.removeChild(B);p(x,"!");B.removeAttribute("dir");return y});var d=0,g=/ +/g,u=7>f("ie")&&!f("quirks")?function(){if(this._started){var x=document.documentElement;var y=x.clientWidth;x=x.clientHeight;var B=this._prevWinDims||[];if(B[0]!==y||B[1]!==x)this.resize(),this._prevWinDims=[y,x]}}:function(){this._started&&this.resize()};return G("dgrid.List",f("touch")?a:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,useTouchScroll:null,
addUiClasses:!0,shouldObserveStore:!0,cleanEmptyObservers:!0,highlightDuration:250,postscript:function(x,y){var B=this;(this._Row=function(C,z,D){this.id=C;this.data=z;this.element=D}).prototype.remove=function(){B.removeRow(this.element)};y&&(this.srcNodeRef=y=y.nodeType?y:q(y));this.create(x,y)},listType:"list",create:function(x,y){var B=this.domNode=y||p("div");if(x){this.params=x;G.safeMixin(this,x);var C=x["class"]||x.className||B.className;this._sort=x.sort||[];delete this.sort}else this._sort=
[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=B.id=B.id||this.id||"dgrid_"+d++;null===this.useTouchScroll&&(this.useTouchScroll=!f("dom-scrollbar-width"));this.buildRendering();C&&m.call(this,C);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var x=this.domNode,y=this.addUiClasses,B=this;var C=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||
document.body.style.direction).toLowerCase();x.className="";p(x,"[role\x3dgrid].dgrid.dgrid-"+this.listType+(y?".ui-widget":""));var z=this.headerNode=p(x,"div.dgrid-header.dgrid-header-row"+(y?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));(f("quirks")||8>f("ie"))&&p(x,"div.dgrid-spacer");var D=this.bodyNode=p(x,"div.dgrid-scroller");f("ff")&&(D.tabIndex=-1);this.headerScrollNode=p(x,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(y?".ui-widget-header":""));var E=
this.footerNode=p("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));p(x,E);C&&(x.className+=" dgrid-rtl"+(f("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));v(D,"scroll",function(A){B.showHeader&&(z.scrollLeft=A.scrollLeft||D.scrollLeft);A.stopPropagation();v.emit(x,"scroll",{scrollTarget:D})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=p(this.bodyNode,"div.dgrid-content"+(y?".ui-widget-content":""));this._listeners.push(this._resizeHandle=v(window,"resize",
c.throttleDelayed(u,this)))},postCreate:f("touch")?function(){this.useTouchScroll&&this.inherited(arguments)}:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var x=this.bodyNode,y=this.headerNode,B=this.footerNode,C=y.offsetHeight,z=this.showFooter?B.offsetHeight:0,D=f("quirks")||7>f("ie");this.headerScrollNode.style.height=x.style.marginTop=C+"px";x.style.marginBottom=
z+"px";D&&(x.style.height="",x.style.height=Math.max(this.domNode.offsetHeight-C-z,0)+"px",z&&(B.style.bottom="1px",setTimeout(function(){B.style.bottom=""},0)));h||(h=f("dom-scrollbar-width"),e=f("dom-scrollbar-height"),f("ie")&&(h++,e++),c.addCssRule(".dgrid-scrollbar-width","width: "+h+"px"),c.addCssRule(".dgrid-scrollbar-height","height: "+e+"px"),17==h||D||(c.addCssRule(".dgrid-header-row","right: "+h+"px"),c.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+h+"px")));D&&(y.style.width=
x.clientWidth+"px",setTimeout(function(){y.scrollLeft=x.scrollLeft},0))},addCssRule:function(x,y){var B=c.addCssRule(x,y);this.cleanAddedRules&&this._listeners.push(B);return B},on:function(x,y){var B=v(this.domNode,x,y);f("dom-addeventlistener")||this._listeners.push(B);return B},cleanup:function(){var x=this.observers,y;for(y in this._rowIdToObject)if(this._rowIdToObject[y]!=this.columns){var B=q(y,this.domNode);B&&this.removeRow(B,!0)}for(y=0;y<x.length;y++)(B=x[y])&&B.cancel();this.observers=
[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var x=this._listeners.length;x--;)this._listeners[x].remove();delete this._listeners}this._started=!1;this.cleanup();p(this.domNode,"!");this.useTouchScroll&&this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(x,y,B,C,z){if(y){var D=this.insertRow(x,y,B,C,z);p(D,".dgrid-highlight"+(this.addUiClasses?
".ui-state-highlight":""));setTimeout(function(){p(D,"!dgrid-highlight!ui-state-highlight")},this.highlightDuration);return D}},adjustRowIndices:function(x){var y=x.rowIndex;if(-1<y){do-1<x.rowIndex&&(this.maintainOddEven&&-1<(x.className+" ").indexOf("dgrid-row ")&&p(x,"."+(1==y%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==y%2?"dgrid-row-odd":"dgrid-row-even")),x.rowIndex=y++);while((x=x.nextSibling)&&x.rowIndex!=y)}},renderArray:function(x,y,B){function C(){var la=arguments;if(-1<J)for(var ma=0;ma<
la.length;ma++){var ha=la[ma],Z=V[ha?0:V.length-1];if(Z=Z&&z(Z)){var W=Z[ha?"previousSibling":"nextSibling"];W&&(W=A.row(W));W&&W.element!=Z&&(ha=ha?"unshift":"push",x[ha](W.data),V[ha](W.element),B.count++)}}}function z(la){return!w.isDescendant(la,A.domNode)&&q(la.id)?A.row(la.id.slice(A.id.length+5)).element:la}function D(la){P=A.insertRow(la,O,null,F++,B);P.observerIndex=J;return P}function E(la){fa=la.slice(0);(I=y?y.parentNode:A.contentNode)&&I.parentNode&&(I!==A.contentNode||la.length)?(I.insertBefore(O,
y||null),(P=la[la.length-1])&&A.adjustRowIndices(P)):H[J]&&A.cleanEmptyObservers&&A._onEmptyRender(J);V=la;L&&(L.rows=V)}B=B||{};var A=this,F=B.start||0,H=this.observers,I;y||(this._lastCollection=x);if(x.observe&&this.shouldObserveStore){A._numObservers++;var L=x.observe(function(la,ma,ha){var Z;if(-1<ma&&V[ma]){var W=V.splice(ma,1)[0];W.parentNode==I&&((Z=W.nextSibling)&&ma!=ha&&Z.rowIndex--,A.removeRow(W));B.count--;A._processScroll&&A._processScroll()}if(-1<ha){if(V.length)if(0===ha)var Q=(Q=
V[ha])&&z(Q);else{if(Q=V[ha-1])Q=z(Q),Q=(Q.connected||Q).nextSibling}else Q=A._getFirstRowSibling&&A._getFirstRowSibling(I);W&&Q&&W.id===Q.id&&(Q=(Q.connected||Q).nextSibling);Q&&!Q.parentNode&&(Q=q(Q.id));W=y&&y.parentNode||Q&&Q.parentNode||A.contentNode;if(W=A.newRow(la,W,Q,B.start+ha,B))if(W.observerIndex=J,V.splice(ha,0,W),!Z||ha<ma)Z=(Z=W.previousSibling)&&Z.rowIndex+1!=W.rowIndex&&0!=W.rowIndex?Z:W;B.count++}0===ma?C(1,1):ma===x.length-(-1===ha?0:1)&&C(0,0);ma!=ha&&Z&&A.adjustRowIndices(Z);
A._onNotification(V,la,ma,ha)},!0);var J=H.push(L)-1}var O=document.createDocumentFragment(),P,fa;if(x.map){var V=x.map(D,console.error);if(V.then)return x.then(function(la){x=la;return V.then(function(ma){E(ma);C(1,1,0,0);return fa})})}else{V=[];for(var ba=0,ka=x.length;ba<ka;ba++)V[ba]=D(x[ba])}E(V);C(1,1,0,0);return fa},_onEmptyRender:function(x){"undefined"!==typeof x&&(this.observers[x].cancel(),this.observers[x]=0,this._numObservers--)},_onNotification:function(x,y,B,C){},renderHeader:function(){},
_autoId:0,insertRow:function(x,y,B,C,z){var D=z.parentId;D=this.id+"-row-"+(D?D+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(x):this._autoId++);var E=q(D,this.domNode),A=E&&E.previousSibling;E&&(E===B&&(B=(B.connected||B).nextSibling),this.removeRow(E));E=this.renderRow(x,z);E.className=(E.className||"")+" dgrid-row "+(1==C%2?"dgrid-row-odd":"dgrid-row-even")+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[E.id=D]=x;y.insertBefore(E,B||null);A&&this.adjustRowIndices(A);
E.rowIndex=C;return E},renderRow:function(x,y){return p("div",""+x)},removeRow:function(x,y){x=x.element||x;delete this._rowIdToObject[x.id];y||p(x,"!")},row:function(x){var y;if(x instanceof this._Row)return x;x.target&&x.target.nodeType&&(x=x.target);if(x.nodeType){do{var B=x.id;if(y=this._rowIdToObject[B])return new this._Row(B.substring(this.id.length+5),y,x);x=x.parentNode}while(x&&x!=this.domNode)}else return"object"==typeof x?y=this.store.getIdentity(x):(y=x,x=this._rowIdToObject[this.id+"-row-"+
y]),new this._Row(y,x,q(this.id+"-row-"+y,this.domNode))},cell:function(x){return{row:this.row(x)}},_move:function(x,y,B,C){var z;var D=z=x.element;y=y||1;do if(x=z[0>y?"previousSibling":"nextSibling"]){do if((z=x)&&-1<(z.className+" ").indexOf(B+" ")){D=z;y+=0>y?1:-1;break}while(x=(!C||!z.hidden)&&z[0>y?"lastChild":"firstChild"])}else if(z=z.parentNode,!z||z===this.bodyNode||z===this.headerNode)break;while(y);return D},up:function(x,y,B){x.element||(x=this.row(x));return this.row(this._move(x,-(y||
1),"dgrid-row",B))},down:function(x,y,B){x.element||(x=this.row(x));return this.row(this._move(x,y||1,"dgrid-row",B))},scrollTo:f("touch")?function(x){return this.useTouchScroll?this.inherited(arguments):l.call(this,x)}:l,getScrollPosition:f("touch")?function(){return this.useTouchScroll?this.inherited(arguments):k.call(this)}:k,get:function(x){var y="_get"+x.charAt(0).toUpperCase()+x.slice(1);return"function"===typeof this[y]?this[y].apply(this,[].slice.call(arguments,1)):this[x]},set:function(x,
y){if("object"===typeof x)for(var B in x)this.set(B,x[B]);else B="_set"+x.charAt(0).toUpperCase()+x.slice(1),"function"===typeof this[B]?this[B].apply(this,[].slice.call(arguments,1)):this[x]=y;return this},_getClass:n,_setClass:m,_getClassName:n,_setClassName:m,_setSort:function(x,y){this._sort="string"!=typeof x?x:[{attribute:x,descending:y}];this.refresh();this._lastCollection&&(x.length&&("string"!=typeof x&&(y=x[0].descending,x=x[0].attribute),this._lastCollection.sort(function(B,C){var z=B[x],
D=C[x];void 0===z&&(z="");void 0===D&&(D="");return z==D?0:z>D==!y?1:-1})),this.renderArray(this._lastCollection))},sort:function(x,y){K.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",x,y)},_getSort:function(){return this._sort},_setShowHeader:function(x){var y=this.headerNode;this.showHeader=x;p(y,(x?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();x&&(y.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(x){K.deprecated("setShowHeader(...)",
'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",x)},_setShowFooter:function(x){this.showFooter=x;p(this.footerNode,(x?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define(["dojo/has"],function(K){K.add("dom-contains",function(p,q,t){return!!t.contains});var G=[],w,v,r,f=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,c=setTimeout,a=clearTimeout;K.add("requestidlecallback",function(p){return"function"===typeof p.requestIdleCallback});var b={defaultDelay:15,
throttle:function(p,q,t){var m=!1;t=t||b.defaultDelay;return function(){m||(m=!0,p.apply(q,arguments),c(function(){m=!1},t))}},throttleDelayed:function(p,q,t){var m=!1;t=t||b.defaultDelay;return function(){if(!m){m=!0;var n=arguments;c(function(){m=!1;p.apply(q,n)},t)}}},debounce:function(p,q,t){var m;t=t||b.defaultDelay;return function(){m&&(a(m),m=null);var n=arguments;m=c(function(){m=null;p.apply(q,n)},t)}},each:function(p,q,t){var m;if(p)if("number"===typeof p.length){var n=0;for(m=p.length;n<
m;n++)q.call(t,p[n],n,p)}else for(n in p)q.call(t,p[n],n,p)},contains:function(p,q){return K("dom-contains")?p.contains(q):p.compareDocumentPosition(q)&8},addCssRule:function(p,q){w||(w=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(w),w=w.sheet||w.styleSheet,v=w.deleteRule?"deleteRule":"removeRule",r=w.cssRules?"cssRules":"rules");var t=G.length;G[t]=(w.cssRules||w.rules).length;w.addRule?w.addRule(p,q):w.insertRule(p+"{"+q+"}",G[t]);return{get:function(m){return w[r][G[t]].style[m]},
set:function(m,n){"undefined"!==typeof G[t]&&(w[r][G[t]].style[m]=n)},remove:function(){var m=G[t],n;if(void 0!==m){w[v](m);G[t]=void 0;var k=t+1;for(n=G.length;k<n;k++)G[k]>m&&G[k]--}}}},escapeCssIdentifier:function(p,q){return"string"===typeof p?p.replace(f,q||"\\$1"):p}};return b})},"xstyle/has-class":function(){define(["dojo/has"],function(K){var G={};return function(){for(var w,v=arguments,r=0;r<v.length;r++)if(w=v[r],!G[w]){G[w]=!0;var f=w.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),c=K(f[2]),
a=-f[4];(0<a?a<=c&&(-f[5]||a)>=c:!!c)==!f[1]&&(document.documentElement.className+=" has-"+w)}}})},"xstyle/css":function(){define(["require"],function(K){function G(w,v,r){var f=document.documentElement;w=f.insertBefore(document.createElement(w),f.firstChild);w.id=v;v=(w.currentStyle||getComputedStyle(w,null)||{})[r];f.removeChild(w);return v}return{load:function(w,v,r,f){function c(q){var t=G("x-parse",null,"content"),m=q&&(q.sheet||q.styleSheet);t&&"none"!=t&&"normal"!=t?v([eval(t)],function(n){q?
n.process(q,r):(n.processAll(),r(m))}):r(m)}var a=v.toUrl(w);if(a.match(/!$/)){var b={wait:!1};a=a.slice(0,-1)}var p=v.cache&&v.cache["url:"+a];if(null!=p)p.xCss&&(p=p.cssText),"string"==typeof p?K(["./core/load-css"],function(q){c(q.insertCss(p))}):c();else{if("none"==G("div",w.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return c();K(["./core/load-css"],function(q){q(a,c,b)})}}}})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/dom dojo/on ./util/misc put-selector/put".split(" "),
function(K,G,w,v,r,f,c,a,b){return w("dgrid.OnDemandList",[K,G],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:a.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var p=this;c(this.bodyNode,"scroll",a[this.pagingMethod](function(q){p._processScroll(q)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments);this._refreshTimeout&&clearTimeout(this._refreshTimeout)},
renderQuery:function(p,q){function t(u){b(g,"!");if(u)throw m._refreshDeferred&&(m._refreshDeferred.reject(u),delete m._refreshDeferred),u;}var m=this,n=q&&q.container||this.contentNode,k={query:p,count:0,options:q},l,h=this.preload,e,d={node:b(n,"div.dgrid-preload",{rowIndex:0}),count:0,query:p,next:k,options:q};d.node.style.height="0";k.node=l=b(n,"div.dgrid-preload");k.previous=d;l.rowIndex=this.minRowsPerPage;h?((k.next=h.next)&&l.offsetTop>=h.node.offsetTop?k.previous=h:(k.next=h,k.previous=
h.previous),k.previous.next=k,k.next.previous=k):this.preload=k;var g=b(l,"-div.dgrid-loading");b(g,"div.dgrid-below").innerHTML=this.loadingMessage;q=v.mixin(this.get("queryOptions"),q,{start:0,count:this.minRowsPerPage},"level"in p?{queryLevel:p.level}:null);this._trackError(function(){return e=p(q)});if("undefined"===typeof e)t();else return r.when(m.renderArray(e,l,q),function(u){return r.when("undefined"===typeof e.total?e.length:e.total,function(x){var y=u.length,B=l.parentNode,C=m.noDataNode;
b(g,"!");"queryLevel"in q||(m._total=x);0===x&&B&&(C&&(b(C,"!"),delete m.noDataNode),m.noDataNode=C=b("div.dgrid-no-data"),B.insertBefore(C,m._getFirstRowSibling(B)),C.innerHTML=m.noDataMessage);for(var z=C=0;z<y;z++)C+=m._calcRowHeight(u[z]);y&&C&&(m.rowHeight=C/y);C=m.rowHeight*m.bufferRows;C>m.farOffRemoval&&(m.farOffRemoval=C);x-=y;k.count=x;l.rowIndex=y;x?l.style.height=Math.min(x*m.rowHeight,m.maxEmptySpace)+"px":(l.style.display="none",q.count++);m._previousScrollPosition&&B&&B.offsetHeight&&
(m.scrollTo(m._previousScrollPosition),delete m._previousScrollPosition);m._processScroll();m._refreshDeferred&&(m._refreshDeferred.resolve(e),delete m._refreshDeferred);return u},t)},t),e},refresh:function(p){var q=this,t=p&&p.keepScrollPosition;"undefined"===typeof t&&(t=this.keepScrollPosition);t&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store){t=this._refreshDeferred=new r;var m=q.renderQuery(function(n){return q.store.query(q.query,n)});"undefined"===
typeof m&&t.reject();return t.then(function(n){q._refreshTimeout=setTimeout(function(){c.emit(q.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:q,results:n});q._refreshTimeout=null},0);delete q._refreshDeferred;return n},function(n){delete q._refreshDeferred;throw n;})}},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(p){return p.lastChild},_calcRowHeight:function(p){var q=p.nextSibling;return q&&!/\bdgrid-preload\b/.test(q.className)?
q.offsetTop-p.offsetTop:p.offsetHeight},lastScrollTop:0,_processScroll:function(p){function q(O,P,fa,V){var ba=n.farOffRemoval,ka=O.node;if(P>2*ba){for(var la,ma=ka[fa],ha=0,Z=0,W=[];la=ma;){var Q=n._calcRowHeight(la);if(ha+Q+ba>P||0>ma.className.indexOf("dgrid-row")&&0>ma.className.indexOf("dgrid-loading"))break;ma=la[fa];ha+=Q;Z+=la.count||1;n.removeRow(la,!0);W.push(la)}O.count+=Z;V?(ka.rowIndex-=Z,t(O)):ka.style.height=ka.offsetHeight+ha+"px";var ia=b("div",W);setTimeout(function(){b(ia,"!")},
1)}}function t(O,P){O.node.style.height=Math.min(O.count*n.rowHeight,P?Infinity:n.maxEmptySpace)+"px"}function m(O,P){do O=P?O.next:O.previous;while(O&&!O.node.offsetWidth);return O}var n=this,k=n.bodyNode;p=p&&p.scrollTop||this.getScrollPosition().y;k=k.offsetHeight+p;var l=n.preload,h=n.lastScrollTop,e=n.bufferRows*n.rowHeight,d=e-n.rowHeight,g,u,x,y=!0;for(n.lastScrollTop=p;l&&!l.node.offsetWidth;)l=l.previous;for(;l&&l!=B;){var B=n.preload;n.preload=l;var C=l.node;var z=C.offsetTop;if(k+1+d<z)l=
m(l,y=!1);else if(p-1-d>z+C.offsetHeight)l=m(l,y=!0);else{var D=((C.rowIndex?p-e:k)-z)/n.rowHeight;z=(k-p+2*e)/n.rowHeight;z+=Math.min(Math.abs(Math.max(Math.min((p-h)*n.rowHeight,n.maxRowsPerPage/2),n.maxRowsPerPage/-2)),10);0==C.rowIndex&&(D-=z);D=Math.max(D,0);10>D&&0<D&&z+D<n.maxRowsPerPage&&(z+=Math.max(0,D),D=0);z=Math.min(Math.max(z,n.minRowsPerPage),n.maxRowsPerPage,l.count);if(0==z)l=m(l,y);else{z=Math.ceil(z);D=Math.min(Math.floor(D),l.count-z);var E=v.mixin(n.get("queryOptions"),l.options);
l.count-=z;var A=C,F=n.queryRowsOverlap,H=(0<C.rowIndex||C.offsetTop>p)&&l;if(H){var I=l.previous;I&&(q(I,p-(I.node.offsetTop+I.node.offsetHeight),"nextSibling"),0<D&&I.node==C.previousSibling?(D=Math.min(l.count,D),l.previous.count+=D,t(l.previous,!0),C.rowIndex+=D,F=0):z+=D,l.count-=D);E.start=C.rowIndex-F;E.count=Math.min(z+F,n.maxRowsPerPage);C.rowIndex=E.start+E.count}else{if(l.next)if(q(l.next,l.next.node.offsetTop-k,"previousSibling",!0),A=C.nextSibling,A==l.next.node)l.next.count+=l.count-
D,l.next.node.rowIndex=D+z,t(l.next),l.count=D,F=0;else var L=!0;E.start=l.count;E.count=Math.min(z+F,n.maxRowsPerPage)}L&&A&&A.offsetWidth&&(L=A.offsetTop);t(l);"level"in l.query&&(E.queryLevel=l.query.level);if("queryLevel"in E||!(E.start>n._total||0>E.count)){C=b(A,"-div.dgrid-loading[style\x3dheight:"+z*n.rowHeight+"px]");b(C,"div.dgrid-"+(H?"below":"above")).innerHTML=n.loadingMessage;C.count=z;var J=l.query(E);if(void 0===n._trackError(function(){return J})){b(C,"!");return}(function(O,P,fa,
V){x=r.when(n.renderArray(V,O,E),function(ba){u=V;A=O.nextSibling;b(O,"!");if(fa&&A&&A.offsetWidth){var ka=n.getScrollPosition();n.scrollTo({x:ka.x,y:ka.y+A.offsetTop-fa,preserveMomentum:!0})}r.when(V.total||V.length,function(la){"queryLevel"in E||(n._total=la);P&&(P.count=la-P.node.rowIndex,0===P.count&&E.count++,t(P))});n._processScroll();return ba},function(ba){b(O,"!");throw ba;})}).call(this,C,H,L,J);l=l.previous}}}}x&&(g=this._refreshDeferred)&&(delete this._refreshDeferred,r.when(x,function(){g.resolve(u)}))},
removeRow:function(p,q){if(p){var t=p.previousSibling,m=p.nextSibling,n;if(n=t)n=t.observerIndex,n=null!=n?n:t.previousObserverIndex;t=n;if(n=m)n=m.observerIndex,n=null!=n?n:m.nextObserverIndex;m=p.observerIndex;p.observerIndex=void 0;q&&(p.nextObserverIndex=n,p.previousObserverIndex=t);if(this.cleanEmptyObservers&&-1<m&&m!==t&&m!==n&&(t=this.observers,n=t[m])){if(!q)for(var k=n.rows,l=0;l<k.length;l++)if(k[l]!=p&&f.isDescendant(k[l],this.domNode))return this.inherited(arguments);n.cancel();this._numObservers--;
t[m]=0}}this.inherited(arguments)}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(K,G,w,v,r,f,c){function a(p){return p}function b(p){if("object"!==typeof p)p=Error(p);else if("cancel"===p.dojoType)return;p.grid=this;r.emit(this.domNode,"dgrid-error",{grid:this,error:p,cancelable:!0,bubbles:!0})}return G("dgrid._StoreMixin",null,{store:null,query:null,queryOptions:null,getBeforePut:!0,
noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};f.before(this,"configStructure",w.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);this.store&&this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments);this._notifyHandle&&this._notifyHandle.remove()},_configColumn:function(p){p.set&&(this._columnsWithSet[p.field]=p);this.inherited(arguments)},
_updateNotifyHandle:function(p){this._notifyHandle&&(this._notifyHandle.remove(),delete this._notifyHandle);p&&"function"===typeof p.notify&&this.shouldObserveStore&&(this._notifyHandle=f.after(p,"notify",w.hitch(this,"_onNotify"),!0),this.get("sort"))},_setStore:function(p,q,t){this._updateNotifyHandle(p);this.store=p;this.dirty={};this.set("query",q,t)},_setQuery:function(p,q){var t=q&&q.sort;this.query=void 0!==p?p:this.query;this.queryOptions=q||this.queryOptions;this._started&&(t?this.set("sort",
t):this.refresh())},setStore:function(p,q,t){K.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 0.4");this.set("store",p,q,t)},setQuery:function(p,q){K.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",p,q)},_getQueryOptions:function(){var p=w.delegate(this.queryOptions,{});if("function"===typeof this._sort||this._sort.length)p.sort=this._sort;return p},_getQuery:function(){var p=this.query;return"object"==typeof p&&null!=p?w.delegate(p,{}):
p},_setSort:function(p,q){this.store&&(this._lastCollection=null);this.inherited(arguments)},_onNotify:function(p,q){this.inherited(arguments);p&&1>this._numObservers&&this.refresh({keepScrollPosition:!0})},refresh:function(){var p=this.inherited(arguments);this.store||(this.noDataNode=c(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return p},renderArray:function(){var p=this,q=this.inherited(arguments);this.store||v.when(q,function(t){t.length&&p.noDataNode&&
c(p.noDataNode,"!")});return q},_onEmptyRender:function(){},insertRow:function(p,q,t,m,n){var k=this.store,l=this.dirty;k=k&&k.getIdentity(p);var h;k in l&&!(k in this._updating)&&(h=l[k]);h&&(p=w.delegate(p,h));return this.inherited(arguments)},updateDirty:function(p,q,t){var m=this.dirty,n=m[p];n||(n=m[p]={});n[q]=t},setDirty:function(p,q,t){K.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(p,q,t)},save:function(){function p(d,g){return function(u){var x=q._columnsWithSet,
y=q._updating,B;if("function"===typeof u.set)u.set(g);else for(B in g)u[B]=g[B];for(B in x){var C=x[B].set(u);void 0!==C&&(u[B]=C)}y[d]=!0;return v.when(t.put(u),function(){delete m[d];delete y[d]})}}var q=this,t=this.store,m=this.dirty,n=new v,k=n.promise,l=function(d){var g;return q.getBeforePut||!(g=q.row(d).data)?function(){return t.get(d)}:function(){return g}},h;for(h in m){var e=p(h,m[h]);k=k.then(l(h)).then(e)}n.resolve();return k},revert:function(){this.dirty={};this.refresh()},_trackError:function(p){"string"==
typeof p&&(p=w.hitch(this,p));try{var q=p()}catch(t){b.call(this,t)}return v.when(q,a,w.hitch(this,b))},newRow:function(){var p=this.inherited(arguments);this.noDataNode&&(c(this.noDataNode,"!"),delete this.noDataNode);return p},removeRow:function(p,q){var t={element:p};!q&&this.noDataMessage&&this.up(t).element===p&&this.down(t).element===p&&(this.noDataNode=c(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})},"dgrid/Selection":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/Deferred dojo/on dojo/has dojo/mouse dojo/aspect ./List dojo/has!touch?./util/touch put-selector/put dojo/query dojo/_base/sniff".split(" "),
function(K,G,w,v,r,f,c,a,b,p){function q(e,d){for(var g=e.unselectable=d?"on":"",u=e.getElementsByTagName("*"),x=u.length;--x;)"INPUT"!==u[x].tagName&&"TEXTAREA"!==u[x].tagName&&(u[x].unselectable=g)}function t(e,d){var g=e.bodyNode,u=d?"text":21>r("ff")?"-moz-none":"none";n&&"msUserSelect"!==n?g.style[n]=u:r("dom-selectstart")?d||e._selectstartHandle?d&&e._selectstartHandle&&(e._selectstartHandle.remove(),delete e._selectstartHandle):e._selectstartHandle=v(g,"selectstart",function(x){var y=x.target&&
x.target.tagName;"INPUT"!==y&&"TEXTAREA"!==y&&x.preventDefault()}):(q(g,!d),d||e._unselectableHandle)?d&&e._unselectableHandle&&(e._unselectableHandle.remove(),delete e._unselectableHandle):e._unselectableHandle=c.after(e,"renderRow",function(x){q(x,!0);return x})}r.add("dom-comparedocumentposition",function(e,d,g){return!!g.compareDocumentPosition});r.add("pointer",function(e){return"PointerEvent"in e?"pointer":"MSPointerEvent"in e?"MSPointer":!1});r.add("css-user-select",function(e,d,g){e=g.style;
d=["Khtml","O","ms","Moz","Webkit"];g=d.length;var u="userSelect";do if("undefined"!==typeof e[u])return u;while(g--&&(u=d[g]+"UserSelect"));return!1});r.add("dom-selectstart","undefined"!==typeof document.onselectstart);var m=r("mac")?"metaKey":"ctrlKey",n=r("css-user-select"),k=(a=r("pointer"))&&"MS"===a.slice(0,2),l=a?a+(k?"Down":"down"):"mousedown",h=a?a+(k?"Up":"up"):"mouseup";"WebkitUserSelect"===n&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(n=!1);return G("dgrid.Selection",
null,{selectionDelegate:".dgrid-row",selectionEvents:l+","+h+",dgrid-cellfocusin",selectionTouchEvents:r("touch")?b.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var e=this.selectionMode;this.selectionMode="";this._setSelectionMode(e)},destroy:function(){this.inherited(arguments);
this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(e){e!=this.selectionMode&&(this.clearSelection(),this.selectionMode=e,this._selectionHandlerName="_"+e+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},setSelectionMode:function(e){K.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");
this.set("selectionMode",e)},_setAllowTextSelection:function(e){"undefined"!==typeof e?t(this,e):t(this,"none"===this.selectionMode);this.allowTextSelection=e},_handleSelect:function(e,d){if(!f.isRight(e)&&this[this._selectionHandlerName]&&this.allowSelect(this.row(d))&&("dgrid-cellfocusin"!==e.type||"mousedown"!==e.parentType)&&(e.type!==h||d==this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=e;if(!e.keyCode||!e.ctrlKey||32==e.keyCode)if(!e.shiftKey&&e.type===l&&this.isSelected(d))this._waitForMouseUp=
d;else this[this._selectionHandlerName](e,d);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(e,d){var g=e.keyCode?e.ctrlKey:e[m];this._lastSelected===d?this.select(d,null,!g||!this.isSelected(d)):(this.clearSelection(),this.select(d),this._lastSelected=d)},_multipleSelectionHandler:function(e,d){var g=this._lastSelected,u=e.keyCode?e.ctrlKey:e[m];if(!e.shiftKey){var x=u?null:!0;g=null}this.select(d,g,x);g||(this._lastSelected=d)},_extendedSelectionHandler:function(e,d){if(e[m]||
!this.isSelected(d)||1!==this.getSelectedCount())(2===e.button?this.isSelected(d):e.keyCode?e.ctrlKey:e[m])||this.clearSelection(null,!0),this._multipleSelectionHandler(e,d)},_toggleSelectionHandler:function(e,d){this.select(d,null,null)},_initSelectionEvents:function(){var e=this,d=this.contentNode,g=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};r("touch")&&!r("pointer")&&this.selectionTouchEvents?(v(d,b.selector(g,this.selectionTouchEvents),function(u){e._handleSelect(u,
this);e._ignoreMouseSelect=this}),v(d,v.selector(g,this.selectionEvents),function(u){e._ignoreMouseSelect!==this?e._handleSelect(u,this):u.type===h&&(e._ignoreMouseSelect=null)})):v(d,v.selector(g,this.selectionEvents),function(u){e._handleSelect(u,this)});this.addKeyHandler&&this.addKeyHandler(32,function(u){e._handleSelect(u,u.target)});if(this.allowSelectAll)this.on("keydown",function(u){u[m]&&65==u.keyCode&&!/\bdgrid-input\b/.test(u.target.className)&&(u.preventDefault(),e[e.allSelected?"clearSelection":
"selectAll"]())});this._setStore&&c.after(this,"_setStore",function(){e._updateDeselectionAspect()});this._updateDeselectionAspect()},_updateDeselectionAspect:function(){function e(y,B,C){y=B||y&&y[d.idProperty||"id"];if(null!=y&&(B=(y=d.row(y))&&d.selection[y.id]))d[C](y,null,B)}var d=this,g=this.store;this._removeDeselectSignals&&this._removeDeselectSignals();if(g&&g.notify){var u=c.before(g,"notify",function(y,B){y||e(y,B,"deselect")});var x=c.after(g,"notify",function(y,B){e(y,B,"select")},!0);
this._removeDeselectSignals=function(){u.remove();x.remove()}}else u=c.before(this,"removeRow",function(y,B){var C;B||(C=this.row(y))&&C.id in this.selection&&this.deselect(C)}),this._removeDeselectSignals=function(){u.remove()}},allowSelect:function(e){return!0},_fireSelectionEvent:function(e){var d=this._selectionEventQueues[e],g=this._selectionTriggerEvent;var u={bubbles:!0,grid:this};g&&(u.parentType=g.type);u[this._selectionTargetType]=d;this._selectionEventQueues[e]=[];v.emit(this.contentNode,
"dgrid-"+e,u)},_fireSelectionEvents:function(){var e=this._selectionEventQueues,d;for(d in e)e[d].length&&this._fireSelectionEvent(d)},_select:function(e,d,g){"undefined"===typeof g&&(g=!0);e.element||(e=this.row(e));if(!1===g||this.allowSelect(e)){var u=this.selection;var x=!!u[e.id];null===g&&(g=!x);var y=e.element;g||this.allSelected?u[e.id]=g:delete this.selection[e.id];y&&(g?p(y,".dgrid-selected"+(this.addUiClasses?".ui-state-active":"")):p(y,"!dgrid-selected!ui-state-active"));g!==x&&y&&this._selectionEventQueues[(g?
"":"de")+"select"].push(e);if(d)if(d.element||(d=this.row(d)),d){if(d=d.element)for(u=this._determineSelectionDirection(y,d),u||(d=document.getElementById(d.id),u=this._determineSelectionDirection(y,d));e.element!=d&&(e=this[u](e));)this._select(e,null,g)}else this._lastSelected=y}},_determineSelectionDirection:r("dom-comparedocumentposition")?function(e,d){var g=d.compareDocumentPosition(e);return g&1?!1:2===g?"down":"up"}:function(e,d){return 1>d.sourceIndex?!1:d.sourceIndex>e.sourceIndex?"down":
"up"},select:function(e,d,g){this._select(e,d,g);this._fireSelectionEvents()},deselect:function(e,d){this.select(e,d,!1)},clearSelection:function(e,d){this.allSelected=!1;for(var g in this.selection)e!==g&&this._select(g,null,!1);d||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var e in this._rowIdToObject){var d=this.row(this._rowIdToObject[e]);this._select(d.id,null,!0)}this._fireSelectionEvents()},getSelectedCount:function(){var e=
0,d;for(d in this.selection)d&&(e+=1);return e},isSelected:function(e){if("undefined"===typeof e||null===e)return!1;e.element||(e=this.row(e));return e.id in this.selection?!!this.selection[e.id]:this.allSelected&&(!e.data||this.allowSelect(e))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var e=this,d=this.inherited(arguments);w.when(d,function(g){var u=e.selection,x,y;for(x=0;x<g.length;x++){var B=
e.row(g[x]);(y=B.id in u?u[B.id]:e.allSelected)&&e._select(B,null,y)}e._fireSelectionEvents()});return d}})})},"dgrid/editor":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/dom-class dojo/on dojo/aspect dojo/has dojo/query dojo/when ./Grid put-selector/put dojo/_base/sniff".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t){function m(E,A){E.value=A;if("radio"==E.type||"checkbox"==E.type)E.checked=E.defaultChecked=!!A}function n(E,A){if("number"==typeof A)E=
isNaN(E)?E:parseFloat(E);else if("boolean"==typeof A)E="true"==E?!0:"false"==E?!1:E;else if(A instanceof Date){var F=new Date(E);E=isNaN(F.getTime())?E:F}return E}function k(E,A){return"function"==typeof A.get?n(A.get("value")):n(A["checkbox"==A.type||"radio"==A.type?"checked":"value"])}function l(E,A,F,H,I){if((F&&F.valueOf())!=(H&&H.valueOf())){var L=A.element;var J=A.row;var O=A.column;if(O.field&&J)if(A={grid:E,cell:A,rowId:J.id,oldValue:F,value:H,bubbles:!0,cancelable:!0},I&&I.type&&(A.parentType=
I.type),f.emit(L,"dgrid-datachange",A))E.updateDirty?(E.updateDirty(J.id,O.field,H),O.autoSave&&setTimeout(function(){E._trackError("save")},0)):J.data[O.field]=H;else{var P;(P=L.widget)?(P._dgridIgnoreChange=!0,P.set("value",F),setTimeout(function(){P._dgridIgnoreChange=!1},0)):(P=L.input)&&m(P,F);return F}}return H}function h(E,A,F){var H=E.cell(A.domNode||A),I=H.column,L;var J=E._activeCell;if(!A.isValid||A.isValid())if(F=l(E,H,J?E._activeValue:A._dgridLastValue,k(I,A),F),J?E._activeValue=F:A._dgridLastValue=
F,"radio"===A.type&&A.name&&!I.editOn&&I.field)for(L in J=E.row(A),b("input[type\x3dradio][name\x3d"+A.name+"]",E.contentNode).forEach(function(O){var P=E.row(O);O!==A&&O._dgridLastValue&&(O._dgridLastValue=!1,E.updateDirty?E.updateDirty(P.id,I.field,!1):P.data[I.field]=!1)}),E.dirty)J.id!==L&&E.dirty[L][I.field]&&E.updateDirty(L,I.field,!1)}function e(E){var A=E.parentNode||E.domNode&&E.domNode.parentNode;A&&r.contains(A,D)||(A=E.focusNode||E.domNode||E);return A}function d(E){if(E){var A=E.parentNode||
E.domNode&&E.domNode.parentNode;A&&r.contains(A,D)||(A=E.domNode||E);return A}}function g(E,A){isNaN(A)&&(A=isNaN(E.tabIndex)?-1:E.tabIndex);return t("div",{className:D,tabIndex:A},E)}function u(E){var A=E.editor,F=E.editOn,H=E.grid,I="string"!=typeof A;var L=E.editorArgs||{};"function"==typeof L&&(L=L.call(H,E));if(I){var J=new A(L);I=J.focusNode||J.domNode;I.className+=" dgrid-input";a("mac")&&F&&/checkbox|radio/i.test(I.type)?(E=g(J.domNode,E.tabIndex),f(E,"blur",function(){J._dgridIgnoreChange||
h(H,J,{type:"widget"})})):F||J.connect(J,"onChange",function(){J._dgridIgnoreChange||h(H,J,{type:"widget"})})}else{var O=function(P){var fa=P.target;"_dgridLastValue"in fa&&-1<fa.className.indexOf("dgrid-input")&&h(H,fa,P)};E.grid._hasInputListener||(H._hasInputListener=!0,H.on("change",function(P){O(P)}));J=I=t(("textarea"==A?"textarea":"input[type\x3d"+A+"]")+".dgrid-input",G.mixin({name:E.field,tabIndex:isNaN(E.tabIndex)?-1:E.tabIndex},L));a("mac")&&F&&/checkbox|radio/i.test(A)&&(E=g(J),J.tabIndex=
0,J.removeAttribute("tabindex"));if(9>a("ie")||a("ie")&&a("quirks"))"radio"==A||"checkbox"==A?f(J,"click",function(P){O(P)}):f(J,"change",function(P){O(P)})}return J}function x(E,A){function F(){var fa=I._activeCell;O.blur();"function"===typeof I.focus&&setTimeout(function(){I.focus(fa)},L&&9>a("ie")?15:0)}var H=u(E),I=E.grid,L=H.domNode,J=d(H),O=e(H),P=L?function(){H.set("value",H._dgridLastValue)}:function(){m(H,H._dgridLastValue);h(E.grid,H)};f(O,"keydown",function(fa){fa=fa.keyCode||fa.which;
27==fa?(P(),I._activeValue=H._dgridLastValue,F()):13==fa&&!1!==E.dismissOnEnter&&F()});(E._editorBlurHandle=f.pausable(e(H),"blur",function(fa){if(!H.dropDown||!H.dropDown.domNode.contains(fa.relatedTarget||document.activeElement)){if(fa&&fa.target){var V=fa.target;if((V=r.contains(V,D)&&V)&&fa.relatedTarget===(H.focusNode||H)){V.focus();return}}h(I,H,{type:"widget"});fa=J.parentNode;V=fa.children.length-1;var ba={alreadyHooked:!0},ka=I.cell(J);f.emit(ka.element,"dgrid-editor-hide",{grid:I,cell:ka,
column:E,editor:H,bubbles:!0,cancelable:!1});E._editorBlurHandle.pause();fa.removeChild(J);if(ka.row){for(t(ka.element,"!dgrid-cell-editing");V--;)t(fa.firstChild,"!");q.appendIfNode(fa,E.renderCell(E.grid.row(fa).data,I._activeValue,fa,I._activeOptions?G.delegate(ba,I._activeOptions):ba))}I._focusedEditorCell=I._activeCell=I._activeValue=I._activeOptions=null}})).pause();return H}function y(E,A,F,H){var I=E.domNode;I||m(E,H);F.innerHTML="";t(F,".dgrid-cell-editing");t(F,d(E));I&&!A.editOn?A.grid._editorsPendingStartup.push([E,
A,F,H]):B(E,A,F,H)}function B(E,A,F,H){var I=A.grid;E.domNode&&(E._started||E.startup(),E._dgridIgnoreChange=!0,E.set("value",H),setTimeout(function(){E._dgridIgnoreChange=!1},0));E._dgridLastValue=H;I._activeCell&&(I._activeValue=H,f.emit(F,"dgrid-editor-show",{grid:I,cell:I.cell(F),column:A,editor:E,bubbles:!0,cancelable:!1}))}function C(E){for(var A=E._editorsPendingStartup,F=A.length;F--;)B.apply(null,A[F]);E._editorsPendingStartup=[]}function z(E){function A(V){I.grid._activeCell=J;y(I.editorInstance,
I,J,P);I._editTimer=setTimeout(function(){var ba=e(H);ba.focus&&ba.focus();I._editorBlurHandle&&I._editorBlurHandle.resume();I._editTimer=null;V.resolve(H)},0)}var F,H;E.column||(E=this.cell(E));if(!E||!E.element)return null;var I=E.column;var L=I.field;var J=E.element.contents||E.element;if(H=I.editorInstance){if(I.grid._activeCell!=J){var O=E.row;var P=(F=this.dirty&&this.dirty[O.id])&&L in F?F[L]:I.get?I.get(O.data):O.data[L];if(!I.canEdit||I.canEdit(E.row.data,P)){var fa=new v;E=e(H);E.offsetWidth?
(E.blur(),setTimeout(function(){A(fa)},0)):A(fa);return fa.promise}}}else if(I.editor&&(H=J.widget||J.input))return fa=new v,H.focus&&H.focus(),fa.resolve(H),fa.promise;return null}var D="dgrid-editor-focus-wrapper";G.getObject("dgrid.editor",!0);return dgrid.editor=function(E,A,F){function H(O){var P=O.grid,fa;if(!P.edit){P.edit=z;P._editorsPendingStartup=[];L.push(f(P.domNode,".dgrid-input:focusin",function(){P._focusedEditorCell=P.cell(this)}));var V=P._editorFocusoutHandle=f.pausable(P.domNode,
".dgrid-input:focusout",function(ba){P._focusedEditorCell&&P._focusedEditorCell.element.contains(ba.target)||(P._focusedEditorCell=null)});L.push(V);L.push(c.before(P,"removeRow",function(ba){var ka=P._focusedEditorCell;ba=P.row(ba);ka&&ba&&ka.row.id===ba.id&&(fa=ka,V.pause(),setTimeout(function(){V.resume();fa=null},0))}));L.push(c.after(P,"insertRow",function(ba){var ka=P.row(ba);fa&&fa.row.id===ka.id&&P.edit(P.cell(ka,fa.column.id));return ba}));L.push(c.after(P,"renderArray",function(ba){p(ba,
function(ka){ka.length?C(P):P._editorsPendingStartup=[]});return ba}));L.push(c.after(P,"_onNotification",function(){C(P)}))}}var I=E.renderCell||q.defaultRenderCell,L=[];E||(E={});E.editor=A=A||E.editor||"text";E.editOn=F=F||E.editOn;var J="string"!=typeof A;E.widgetArgs&&(K.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4"),E.editorArgs=E.widgetArgs);c.after(E,"init",F?function(){H(E);E.editorInstance=x(E,I)}:function(){var O=E.grid;H(E);J&&L.push(c.before(O,"removeRow",
function(P){if(P=(P=O.cell(P,E.id).element)&&(P.contents||P).widget)O._editorFocusoutHandle.pause(),P.destroyRecursive(),O._editorFocusoutHandle.resume()}))});c.after(E,"destroy",function(){w.forEach(L,function(O){O.remove()});E._editorBlurHandle&&E._editorBlurHandle.remove();E._editTimer&&clearTimeout(E._editTimer);F&&J&&E.editorInstance.destroyRecursive();E.grid.edit=null;E.grid._editorsPendingStartup=null});E.renderCell=F?function(O,P,fa,V){var ba=E.grid;V&&V.alreadyHooked||f("TD"==fa.tagName?
fa:fa.parentNode,F,function(){ba._activeOptions=V;ba.edit(this)});return I.call(E,O,P,fa,V)}:function(O,P,fa,V){if(!E.canEdit||E.canEdit(O,P))O=u(E),y(O,E,fa,P),fa[J?"widget":"input"]=O;else return I.call(E,O,P,fa,V)};return E}})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(K,G,w,v){K=function(r){function f(q,t){var m=r[q];m&&(r[q]=function(n){var k;"put"===q&&(k=r.getIdentity(n));if(p)return m.apply(this,arguments);p=!0;try{var l=
m.apply(this,arguments);w(l,function(h){t("object"==typeof h&&h||n,k)});return l}finally{p=!1}})}var c=[],a=0;r=G.delegate(r);r.notify=function(q,t){a++;for(var m=c.slice(),n=0,k=m.length;n<k;n++)m[n](q,t)};var b=r.query;r.query=function(q,t){t=t||{};var m=b.apply(this,arguments);if(m&&m.forEach){var n=G.mixin({},t);delete n.start;delete n.count;var k=r.queryEngine&&r.queryEngine(q,n),l=a,h=[],e;m.observe=function(d,g){1==h.push(d)&&c.push(e=function(x,y){w(m,function(B){var C=B.length!=t.count,z;
if(++l!=a)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var D=-1,E=-1;if(void 0!==y){var A=[].concat(B);k&&!x&&(A=k(B));var F=0;for(z=B.length;F<z;F++){var H=B[F];if(r.getIdentity(H)==y&&!(0>A.indexOf(H))){var I=H;D=F;!k&&x||B.splice(F,1);break}}}k?x&&(k.matches?k.matches(x):k([x]).length)&&(F=-1<D?D:B.length,B.splice(F,0,x),E=v.indexOf(k(B),x),B.splice(F,1),t.start&&0==E||!C&&E==B.length?E=-1:B.splice(E,0,x)):x&&(void 0!==y?E=D:t.start||(E=r.defaultIndex||
0,B.splice(E,0,x)));if((-1<D||-1<E)&&(g||!k||D!=E))for(C=h.slice(),F=0;B=C[F];F++)B(x||I,D,E)})});var u={};u.remove=u.cancel=function(){var x=v.indexOf(h,d);-1<x&&(h.splice(x,1),h.length||c.splice(v.indexOf(c,e),1))};return u}}return m};var p;f("put",function(q,t){r.notify(q,t)});f("add",function(q){r.notify(q)});f("remove",function(q){r.notify(void 0,q)});return r};G.setObject("dojo.store.Observable",K);return K})},"arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/array dojo/dom-form dojo/io-query dojo/json dojo/Deferred dojo/promise/all esri/lang arcgisonline/esriGeowConfig arcgisonline/pages/utils/categories arcgisonline/sharing/util esri/geometry/webMercatorUtils esri/geometry/Extent arcgisonline/sharing/dijit/Role arcgisonline/pages/statusUtil dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){return{addItem:function(d,g,u,x){var y=u&&u.getPortalUser(),B=g&&"/"!==g?g:"",C=d instanceof FormData,z={url:(u&&u.portalUrl)+"content/users/"+(x||y.username)+(B?"/"+B:"")+"/addItem"};g=d&&("FORM"===d.tagName||"FORM"===d.nodeName||C)?"form":"content";var D,E,A,F=new a;z[g]=d;q.self.hasCategorySchema&&z[g].categories&&(C?z[g].categories.value=c.stringify(z[g].categories):z[g].categories=c.stringify(z[g].categories));m.request(z,{usePost:!0}).then(G.hitch(this,
function(H){if(C)if(d.keys)for(A=d.keys(),D={};!(E=A.next()).done;)"file"!==E.value&&(D[E.value]=d.get(E.value));else D=H;else D=z.form?r.toObject(d):d;D.title=G.isArray(D.title)?D.title[0]:D.title;D=G.mixin(H,D,{folderId:B});F.resolve(D)}),function(H){F.reject(H)});return F},updateItem:function(d,g){var u=g&&g.getPortalUser();u=(g&&g.portalUrl)+"content/users/"+(d.owner||u.username)+(d.folderId&&"/"!==d.folderId?"/"+d.folderId:"")+"/items/"+d.id+"/update";var x=G.mixin({},d),y=new a;delete x.owner;
q.self.hasCategorySchema&&x.categories&&(x.categories=c.stringify(x.categories));m.request({url:u,content:x},{usePost:!0}).then(G.hitch(this,function(B){y.resolve(d)}),function(B){y.reject(B)});return y},setCategories:function(d,g){!d.categories||g&&0!==g.length||(g=d.categories);return t.setItemCategories([d.id],g)},addItemResource:function(d,g,u){var x=g&&g.getPortalUser();return m.request({url:(g&&g.portalUrl)+"content/users/"+(d.owner||x.username)+(d.folderId&&"/"!==d.folderId?"/"+d.folderId:
"")+"/items/"+d.id+"/addResources",content:u},{usePost:!0}).then(G.hitch(this,function(y){return y}))},getCloudProviderItemResource:function(d){return m.request({url:q.restBaseUrl+"content/items/"+d.id+"/resources/cloudProvider.json"}).then(G.hitch(this,function(g){return g}))},getPublishParametersForOverwrite:function(d,g){var u=new a;this._fetchPublishParameters(d,g).then(G.hitch(this,function(x){this._fetchServiceInfo(d).then(G.hitch(this,function(y){var B="";"CSV"==g?(B=G.mixin(G.mixin({},y.layers&&
y.layers[0]),{fields:x.layerInfo.fields}),B=G.mixin(x,{layerInfo:B,name:x.name||d.title.replace(/ /g,"_")})):B="Microsoft Excel"==g?this._generateExcelOverwritePublishParameters(x,y):{name:d.title?d.title.replace(/ /g,"_"):this.item.title.replace(/ /g,"_")};B=y?G.mixin(B,y):B;u.resolve(B)}),G.hitch(this,function(y){u.reject(y)}))}),G.hitch(this,function(x){u.reject(x)}));return u},_fetchPublishParameters:function(d,g){var u=q.restBaseUrl+"content/items/"+d.id+"/info/publishParameters.json";!g||"CSV"!==
g&&"Microsoft Excel"!==g?(u=new a,u.resolve(!1)):u=m.request({url:u}).then(G.hitch(this,function(x){return x}));return u},_fetchServiceInfo:function(d){d=d.url;var g={addToken:(m.isHostedService(d)||m.isAgolService(d))&&!1!==q.isMultiTenant},u=new a,x;b([m.request({url:d},g),m.request({url:d+"/layers"},g)]).then(G.hitch(this,function(y){var B={},C=y&&1<y.length&&y[1],z=C&&C.layers;C=C&&C.tables;z&&z.length&&(v.forEach(z,function(D){delete D.fields}),B.layers=z);C&&C.length&&(B.tables=C);x=G.mixin(y[0],
B);u.resolve(x)}));return u},_generateExcelOverwritePublishParameters:function(d,g){g.name=d.name;g.sourceSR=d.sourceSR;g.targetSR=d.targetSR;for(var u=0;u<g.tables.length;u++)"Review"!=g.tables[u].name&&(g.layers[g.layers.length]=g.tables[u]);for(u=0;u<g.layers.length;u++)g.layers[u].excelSheetId=d.layers[u].excelSheetId,g.layers[u].locationType=d.layers[u].locationType,g.layers[u].latitudeFieldName=d.layers[u].latitudeFieldName,g.layers[u].longitudeFieldName=d.layers[u].longitudeFieldName,g.layers[u].geocodeServiceUrl=
d.layers[u].geocodeServiceUrl,g.layers[u].sourceLocale=d.layers[u].sourceLocale,g.layers[u].sourceCountry=d.layers[u].sourceCountry,g.layers[u].standardizedFieldNames=d.layers[u].standardizedFieldNames,g.layers[u].addressFields=d.layers[u].addressFields;return g},deleteItem:function(d,g){var u=(g&&g.getPortalUser()).userContentUrl+(d.folderId&&"/"!==d.folderId?"/"+d.folderId:"")+"/items/"+d.id+"/delete";return m.request({url:u},{usePost:!0})},publishItem:function(d,g,u){var x=(u&&u.getPortalUser()).username;
u=(u&&u.portalUrl)+"content/users/"+x+(d.folderId&&"/"!==d.folderId?"/"+d.folderId:"")+"/publish";var y=new a;g.publishParameters=c.stringify(g.publishParameters);m.request({url:u,content:g},{usePost:!0}).then(G.hitch(this,function(B){if(q.self.hasCategorySchema&&d.categories){var C=[];(B.services||[]).forEach(function(z){C.push(this.setCategories({id:z.id,categories:d.categories}))},this);b(C).then(G.hitch(this,function(){y.resolve(G.mixin(d,{publishResult:B.services||[]}))}))}else y.resolve(G.mixin(d,
{publishResult:B.services||[]}))}),function(B){y.reject(B)});return y},createService:function(d,g,u,x){var y=new a,B,C=x&&x.getPortalUser();m.request({url:(x&&x.portalUrl)+"content/users/"+(d.owner||C.username)+"/createService",content:g},{usePost:!0}).then(function(z){return B=z}).then(G.hitch(this,this.addToDefinition,u)).then(G.hitch(this,function(z){y.resolve(G.mixin(d,{createResult:z||[]}))}),G.hitch(this,function(z){this.deleteItem(G.mixin(B,{id:B.itemId}),x).then(function(){y.reject(z)})}));
return y},addToDefinition:function(d,g){var u=new a;if(d){var x=g.encodedServiceURL.replace("rest/services","rest/admin/services");m.request({url:x+"/addToDefinition",content:{addToDefinition:d,async:!0}},{usePost:!0}).then(function(y){return h.checkAsyncJobStatus(y.statusURL)}.bind(this),function(y){u.reject(y)}.bind(this)).then(G.hitch(this,function(y){u.resolve(G.mixin(g,{addToDefinitionResult:y}))}),function(y){u.reject(y)})}else u.resolve(g);return u},moveItem:function(d,g,u){var x=new a,y=u&&
u.getPortalUser();y=d.owner||y.username;u=(u&&u.portalUrl)+"content/users/"+y+(d.folderId&&"/"!==d.folderId?"/"+d.folderId:"")+"/items/"+d.id+"/move";y={folder:g&&g!==y?g:"/"};(d.folderId||"/")!==y.folder?m.request({url:u,content:y},{usePost:!0}).then(G.hitch(this,function(B){x.resolve(G.mixin(d,{folderId:g}))})):x.resolve(d);return x},serviceNameAvailable:function(d,g){var u=g&&g.getPortalUser(),x={name:d.title.replace(/ /g,"_"),type:d.type||"Feature Service"};return m.request({url:g.url+"portals/"+
u.orgId+"/isServiceNameAvailable",content:x})},analyzeItem:function(d,g,u){g=G.mixin({enableGlobalGeocoding:!0,sourceLocale:w.locale.split("-")[0]},g||{});d=G.mixin({},{analyzeParameters:g,filetype:d.fileType||d.type&&d.type.toLowerCase()||"",itemid:d.id});u=u.url+"/content/features/analyze";d.analyzeParameters=c.stringify(d.analyzeParameters);return m.request({url:u,content:d},{usePost:!0})},createTemplatedApplication:function(d,g,u,x){var y=d,B=x&&x.sharing?x.sharing:{},C=x&&x.isEveryoneChecked?
x:null,z=G.isArray(g.typeKeywords)?-1<v.indexOf(g.typeKeywords,"selfConfigured"):-1<g.typeKeywords.indexOf("selfConfigured"),D=G.isArray(g.typeKeywords)?-1<v.indexOf(g.typeKeywords,"configurableApp"):-1<g.typeKeywords.indexOf("configurableApp");x=G.isArray(g.typeKeywords)?-1<v.indexOf(g.typeKeywords,"Web AppBuilder for ArcGIS"):-1<g.typeKeywords.indexOf("Web AppBuilder for ArcGIS");var E,A=G.hitch(this,function(H){var I=new a;if(H.shareWithWebMap){var L=q.restBaseUrl+"content/items/"+H.id+"/share",
J="public"===B.access||C&&C.isEveryoneChecked()||!1,O="org"===B.access||C&&C.isAccountChecked()||!1,P=B.groups||C&&C.getSharedGroups()||[];P=v.map(P,"return item.id;");J={f:"json",everyone:J,org:O,groups:P.join(","),items:[H.id]};q.self.hasCategorySchema&&J.categories&&(J.categories=c.stringify(J.categories));m.request({url:L,content:J},{usePost:!0}).then(G.hitch(this,function(){I.resolve(H)}))}else I.resolve(H);return I});if(y&&x)return d=new a,y.folderId&&"/"!==y.folderId&&(y.folder=y.folderId),
x=window.location.protocol+"//"+window.location.host+m.getHomeAppContext()+"/apps/webappbuilder/index.html?",x+=f.objectToQuery({title:y.title,tags:y.tags,summary:y.description,folder:y.folder,categories:y.categories&&y.categories.length?c.stringify(y.categories):void 0}),d.resolve(G.mixin(y,{configureUrl:x})),d;if(y){x=m.parseUrl(g.url);delete d.typeKeywords;var F=window.location.protocol+"//"+x.host+(x.port&&"443"!==x.port&&"80"!==x.port?":"+x.port:"")+x.path;F="https:"===window.location.protocol?
m.getSecureUrl(F):m.getHttpUrl(F);y=G.mixin({type:"Web Mapping Application",typeKeywords:"Web Map, Map, Online Map, Mapping Site, JavaScript, Ready To Use"+(z?" ,selfConfigured":"")+(D?", configurableApp":""),thumbnailURL:m.getStaticImagesUrl()+"/webapp.png",url:F},y);y.text=c.stringify(G.mixin({},{source:g.id,folderId:y.folderId,values:d.webSceneId?{webscene:d.webSceneId}:d.webMapId?{webmap:d.webMapId}:d.groupId?{group:d.groupId}:{}}));return this.addItem(y,y.folderId,u).then(G.hitch(this,function(H){return A(G.mixin(y,
{id:H.id})).then(G.hitch(this,function(I){var L=I.url.indexOf("?"),J=-1!==L?I.url.substr(L,I.url.length):"";J+=J&&J.length?"\x26":"?";J+="appid\x3d"+H.id;F=I.url.substr(0,-1!==L?L:I.url.length)+J;return this.updateItem({id:H.id,url:F,folderId:I.folderId},u).then(G.hitch(this,function(){return z?(E=z?F+"\x26edit\x3dtrue":q.baseUrl+("webmap/configureApp.html?appid\x3d"+H.id),E+=H.folderId&&"/"!==H.folderId?"\x26folderid\x3d"+H.folderId:"",G.mixin(I,H,{configureUrl:E,url:F})):D?(E=window.location.protocol+
"//"+window.location.host+m.getHomeAppContext()+"/apps/configure-template/index.html?appid\x3d"+H.id,G.mixin(I,H,{configureUrl:E,url:F})):m.request({url:q.restBaseUrl+"content/items/"+g.id+"/data"}).then(G.hitch(this,function(O){E=O&&O.configurationSettings?q.baseUrl+"webmap/configureApp.html?appid\x3d"+H.id+(H.folderId&&"/"!==H.folderId?"\x26folderid\x3d"+H.folderId:""):q.baseUrl+"item.html?id\x3d"+H.id;return G.mixin(I,H,{configureUrl:E,url:F})}))}))}))}),G.hitch(this,function(H){H&&409===H.code&&
(H=y,H={title:e.addItemFrm.errors.error.title,message:p.substitute({type:H.type,title:H.title},e.addItemFrm.errors.itemExists.message)});throw H;}))}},checkStatus:function(d,g,u,x){var y=(x&&x.getPortalUser()).userContentUrl;d?m.request({url:y+"/items/"+d.id+"/status",content:{jobId:d.jobId}}).then(G.hitch(this,function(B){B=B||{status:"failed"};if("completed"===B.status)return g.resolve(d);if("failed"===B.status||""===B.status)return B=h.getStatusError(B),g.reject({message:B});u=(u||500)+250;setTimeout(G.hitch(this,
function(){this.checkStatus(d,g,u,x)}),u)}),G.hitch(this,function(B){g.reject(B)})):g.reject()},_getBatchGeocodeServers:function(d){if(!this._batchGeocoderServers){var g=d.getPortalUser(),u=-1<v.indexOf(g.privileges,"portal:user:createItem")&&-1<v.indexOf(g.privileges,"premium:user:geocode"),x=/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig,y=/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig,B,C,z=[];v.forEach(d.helperServices&&d.helperServices.geocode||[],function(D){B=
!!D.url.match(x);C=!!D.url.match(y);(B&&!d.isPortal&&u||C||D.batch)&&z.push({isWorldGeocodeServer:B||C,isWorldGeocodeServerProxy:C,label:D.name,value:D.url,url:D.url,name:D.name})});this._batchGeocoderServers=z}return this._batchGeocoderServers},getPortalDefaultExtentAsGCS:function(d){if(d=d.defaultExtent||null){d=n.webMercatorToGeographic(new k(d));var g=d.spatialReference._getInfo();if(g){if(d.xmin>d.xmax){var u=g.valid[1]-d.xmin,x=d.xmax-g.valid[0];u>x?d.xmax=g.valid[1]+x:d.xmin=g.valid[0]-u}return Math.round(1E4*
d.xmin)/1E4+","+Math.round(1E4*d.ymin)/1E4+","+Math.round(1E4*d.xmax)/1E4+","+Math.round(1E4*d.ymax)/1E4}}return null},itemExists:function(d,g,u){var x=d.title;u=u&&"/"!==u?u:"root";var y="Data Store"===d.type?d.type.toLowerCase():d.type;g={q:'title:"'+x+'" AND type:"'+y+'" AND owner:"'+g+'" AND ownerfolder:"'+u+'"',num:1};var B,C=new dojo.Deferred;m.request({url:q.restBaseUrl+"search",content:g}).then(function(z){z&&z.total?(B=z.results&&z.results.shift(),d&&d.id===B.id||x!==B.title?C.resolve({itemExists:!1}):
(z=d.isFile?p.substitute({type:d.fileExtension,item:d.item,name:d.name||d.title,title:d.title},e.addItemFrm.errors.itemExistsFile.message):p.substitute({type:y,item:d.item,title:x},e.addItemFrm.errors.itemExists.message),C.resolve({itemExists:!0,message:z}))):C.resolve({itemExists:!1})}.bind(this));return C},noSQLCheck:function(d,g){return d.connectionUri===g.noSQLConnectionURI&&d.database===g.noSQLDataBase&&d.username===g.noSQLUsername},getAllNoSQLDatastorePromises:function(d){var g=new a,u=[];m.request({url:q.restBaseUrl+
"search?q\x3dtype%3A'Data+Store'\x26bbox\x3d\x26sortField\x3d\x26sortOrder\x3d"}).then(function(x){if(x&&x.total){var y=[];x.results.forEach(function(B){B.typeKeywords.includes("nosql")&&y.push(B)});0!==y.length&&y.forEach(function(B){u.push(function(){var C=new a;m.request({url:q.restBaseUrl+"content/items/"+B.id+"/data"}).then(function(z){this.noSQLCheck(z.info.connectionProperties,d)?C.resolve({itemExists:!0}):C.resolve({itemExists:!1})}.bind(this));return C}.call(this))}.bind(this))}g.resolve({allPromises:u})}.bind(this));
return g},checkForDuplicateNoSQL:function(d){var g=new a;this.getAllNoSQLDatastorePromises(d).then(function(u){b(u.allPromises).then(function(x){var y;0!==x.length?(x.forEach(function(B){!0===B.itemExists&&(y=!0)}),y?g.resolve({itemExists:!0}):g.resolve({itemExists:!1})):g.resolve({itemExists:!1})})}.bind(this));return g},hasCreateLayer:function(d){var g={managed:!0},u=d&&(d.user||d.getPortalUser&&d.getPortalUser()),x=new l({portalUser:u}),y,B,C,z,D;if(d.isPortal&&u&&(x.isBasedOnAdmin()||x.isBasedOnPublisher()))return d.getFederatedServers().then(G.hitch(this,
function(E){(B=(y=v.filter(E.servers||[],G.hitch(this,function(A){return A.isHosted})))&&y.length?y[0]:null)?(C=B.adminUrl+"/admin/data/findItems",D=m.request({url:C,content:g},{useProxy:!0}).then(G.hitch(this,function(A){return(z=v.filter(A.items||A||[],G.hitch(this,function(F){return F&&F.provider&&"arcgis data store"===F.provider.toLowerCase()})))&&z.length?!0:!1}),G.hitch(this,function(A){return!1}))):(D=new a,D.resolve(!1));return D}));d=new a;d.resolve(!0);return d}}})},"arcgisonline/pages/statusUtil":function(){define("require exports tslib dojo/Deferred dojo/on dojo/json dojo/topic esri/lang esri/urlUtils ./pageUtil ./utils/arrays ./utils/polling esri/tasks/Geoprocessor ../sharing/util dojo/i18n!../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);return function(){function l(){}l.checkStatus=function(h){var e=new v["default"],d=this.getJobUrl(h),g=this.getJobId(h),u=n["default"].isPortal(),x="Scene Service"===h.type,y=u&&x&&!this.isSceneFromFeatures(h);
h.canUpdate&&h.isHostedService&&!h.isUtilityNetwork&&("Feature Service"===h.type||(u||d&&g)&&"Image Service"===h.type||x||"Vector Tile Service"===h.type||u&&"Map Service"===h.type)?(h.set("status","processing"),d&&g?this.checkJobStatus(h,500):x&&!y||!(g||"Feature Service"===h.type&&(this.isFeaturesFromPackage(h)||this.isFeaturesFromExcel(h))||"Map Service"===h.type&&!this.isTileFromFeatures(h)||"Vector Tile Service"===h.type&&h.sourceData&&!this.isVectorTileFromFeatures(h))?u||this.isVectorTileFromFeatures(h)?
h.set("status","completed"):this.checkServiceStatus(h,500,e):"Vector Tile Service"===h.type&&h.sourceData&&this.isVectorTileFromPackage(h)||"Feature Service"===h.type&&this.isFeaturesFromExcel(h)?this.checkItemStatusCallSupport(h,500,e):(h.set("firstStatus",!0),this.checkItemStatus(h,500,e))):h.set("status","completed");e.resolve(h);return e};l.checkItemStatusCallSupport=function(h,e,d){var g=this;this.supportsItemStatusCall(h).then(function(u){u?(h.set("firstStatus",!0),g.checkItemStatus(h,e,d)):
g.checkServiceStatus(h,e,d)})};l.supportsItemStatusCall=function(h){return n["default"].request({url:h.userItemUrl+"/status",content:{jobId:h.jobId}}).then(function(e){var d;return"item status doesn't exist"===(null===(d=null===e||void 0===e?void 0:e.statusMessage)||void 0===d?void 0:d.toLowerCase())?!1:!0},function(){return!1})};l.isFeaturesFromPackage=function(h){var e,d=null===(e=h.sourceData)||void 0===e?void 0:e.type;return"Feature Service"===h.type&&0<(null===d||void 0===d?void 0:d.indexOf("Package"))};
l.isFeaturesFromExcel=function(h){var e,d=null===(e=h.sourceData)||void 0===e?void 0:e.type;return"Feature Service"===h.type&&"Microsoft Excel"===d};l.isTileFromFeatures=function(h){var e;return"Map Service"===h.type&&"Feature Service"===(null===(e=h.sourceData)||void 0===e?void 0:e.type)};l.isSceneFromFeatures=function(h){var e;return"Scene Service"===h.type&&"Feature Service"===(null===(e=h.sourceData)||void 0===e?void 0:e.type)};l.isVectorTileFromFeatures=function(h){var e;return"Vector Tile Service"===
h.type&&"Feature Service"===(null===(e=h.sourceData)||void 0===e?void 0:e.type)};l.isVectorTileFromPackage=function(h){var e,d;return"Vector Tile Service"===h.type&&0<(null===(d=null===(e=h.sourceData)||void 0===e?void 0:e.type)||void 0===d?void 0:d.indexOf("Package"))};l.getJobId=function(h){var e=b["default"].urlToObject(document.URL),d=h.properties||{};h.jobId=h.jobId||d.jobId||e&&e.query&&e.query.jobid||null;return h.jobId};l.getJobUrl=function(h){var e=(h.properties&&h.properties.jobUrl||"").split("/jobs/");
h.jobUrl=e.shift();h.jobId=h.jobUrl?e.shift():null;return h.jobUrl};l.checkItemStatus=function(h,e,d){var g=this,u;void 0===e&&(e=500);var x=h.portal.isPortal,y=h.userItemUrl+"/status",B={jobId:h.jobId};"image service"===(null===(u=h.type)||void 0===u?void 0:u.toLowerCase())&&(B.jobType="publishImageService");n["default"].request({url:y,content:B}).then(function(C){C=C||{status:"failed"};var z=x&&"failed"===C.status&&-1<C.statusMessage.toLowerCase().indexOf("job not found.");"completed"===C.status||
z?h.set({firstStatus:void 0,status:"completed",readyForGeocodeReview:!0,readyToRetrieveServiceLayers:!0}):"failed"===C.status||400<C.code||""===C.status?(h.set("statusError",g.getStatusError(C)),h.set("status","failed")):(h.set("status","processing"),C.jobInfo.jobId&&(h.set("jobId",C.jobInfo.jobId),h.firstStatus?h.set({firstStatus:!1,status:"completed"}):h.set("status","processing")),e+=250,setTimeout(function(){return g.checkItemStatus(h,e,d)},e))},function(C){h.set("statusError",g.getStatusError(C));
h.set("status","failed")})};l.checkServiceStatus=function(h,e,d){var g=this;void 0===e&&(e=500);var u=h.adminUrl+"/status",x={};if("Scene Service"===h.type||"Vector Tile Service"===h.type)u=h.adminUrl;h.adminServerToken&&(x.token=h.adminServerToken);n["default"].request({url:u,content:x},{useProxy:n["default"].shouldUseProxy(u)}).then(function(y){var B,C;y.status=(null===(B=y.realTimeState)||void 0===B?void 0:B.toLowerCase())||(null===(C=y.status)||void 0===C?void 0:C.toLowerCase())||(y.currentVersion&&
y.capabilities?"started":"failed");if("Scene Service"===h.type||"Vector Tile Service"===h.type)y.status="PROCESSING"===y.cacheExecutionStatus||"SUBMITTED"===y.cacheExecutionStatus?"processing":"started";"started"===y.status?h.set({status:"completed",readyForGeocodeReview:!0}):"failed"===y.status||400<y.code||""===y.status?(h.set("statusError",g.getStatusError(y)),h.set("status","failed")):(h.set("status","processing"),e+=250,setTimeout(function(){return g.checkServiceStatus(h,e,d)},e))},function(y){h.set("statusErrorCode",
null===y||void 0===y?void 0:y.code);h.set("statusError",g.getStatusError(y));h.set("status","failed")})};l.checkVectorTileServiceJobStatus=function(h,e,d){var g=this;void 0===e&&(e=500);void 0===d&&(d=0);var u=new v["default"];if("Vector Tile Service"===h.type){var x=h.adminUrl,y={},B=null!==d&&void 0!==d?d:0;h.adminServerToken&&(y.token=h.adminServerToken);n["default"].request({url:x,content:y},{useProxy:n["default"].shouldUseProxy(x)}).then(function(C){C.code?10<B?(h.set("statusErrorCode",null===
C||void 0===C?void 0:C.code),h.set("statusError",g.getStatusError(C)),h.set("status","failed"),u.resolve(C)):(e+=1E3,setTimeout(function(){g.checkVectorTileServiceJobStatus(h,e,B+1)},e)):(C.status="PROCESSING"===C.cacheExecutionStatus||"SUBMITTED"===C.cacheExecutionStatus?"processing":"started","started"===C.status?(h.set("status","completed"),u.resolve(C)):"failed"===C.status||400<C.code||""===C.status?(h.set("statusError",g.getStatusError(C)),h.set("status","failed"),u.resolve(C)):(h.set("status",
"processing"),e+=1E3,setTimeout(function(){return g.checkVectorTileServiceJobStatus(h,e)},e)))},function(C){10<B?(h.set("statusErrorCode",null===C||void 0===C?void 0:C.code),h.set("statusError",g.getStatusError(C)),h.set("status","failed"),u.resolve(C)):(e+=1E3,setTimeout(function(){g.checkVectorTileServiceJobStatus(h,e,B+1)},e))})}else u.resolve();return u};l.checkJobStatus=function(h,e){var d=this,g;void 0===e&&(e=3E3);var u=null===(g=(h.portal.getPortalUser()||{}).credential)||void 0===g?void 0:
g.token,x=h.jobId;g=h.jobUrl;var y=h.properties;if(y&&"processing"===y.jobStatus){h.set("status","processing");var B=new m["default"](g+(u?"?token\x3d"+u:""));r["default"](B,"status-update",function(z){"esriJobExecuting"!==z.jobInfo.jobStatus?(h.set("status","completed"),C&&clearInterval(C)):h.set("status","processing")});r["default"](B,"error",function(z){var D;z=z.error||z;(null===(D=null===z||void 0===z?void 0:z.message)||void 0===D?0:D.indexOf("not found."))?(h.set("status","completed"),y&&(y.jobId&&
delete y.jobId,y.jobUrl&&delete y.jobUrl,y.jobStatus&&delete y.jobStatus,y.jobType&&delete y.jobType,h.set("properties",y))):(h.set("statusError",d.getStatusError(z)),h.set("status","failed"));C&&clearInterval(C)});var C=setInterval(function(){return B.checkJobStatus(x)},e)}else h.set("status","completed")};l.checkSceneCachingJobStatus=function(h,e,d,g){var u=this;void 0===e&&(e=3E3);var x=n["default"].isPortal(),y=!(!h.portalUser||!h.portalUser.isOrgAdmin),B=h.cachingJobUrl||h.properties&&h.properties.cacheJobUrl,
C=x?["esriJobSucceeded","esriJobFailed","esriJobCancelled"]:["Completed","Failed"],z=x?"esriJobFailed":"Failed",D=x?"jobStatus":"status",E=x?B:h.adminUrl+"/"+B;x&&y&&(E=E.replace("/rest/","/admin/").replace("/SceneCachingControllers/GPServer/","/SceneCachingControllers.GPServer/"),D="status");var A=x?{useProxy:n["default"].shouldUseProxy(E)}:{};if(B)var F=setInterval(function(){n["default"].request({url:E},A).then(function(H){g&&c["default"].publish(g,H);q["default"].includes(C,H[D])?(H[D]===z&&(h.set("status",
"failed"),d&&d.reject(H)),clearInterval(F),h.set("cachingJobUrl",void 0),h.set("status","completed"),d&&d.resolve(H)):h.set("status","processing")},function(H){var I;(null===(I=null===H||void 0===H?void 0:H.message)||void 0===I?0:I.indexOf("not found."))?(h.set("cachingJobUrl",void 0),h.set("status","completed"),d&&d.resolve()):(h.set("statusError",u.getStatusError(H)),h.set("status","failed"),d&&d.reject(H))})},e);else h.set("cachingJobUrl",void 0),h.set("status","completed"),d&&d.resolve({})};l.getStatusError=
function(h){var e=(null===h||void 0===h?void 0:h.statusMessage)||k["default"].addItemFrm.errors.publishError.message;return e?p["default"].isJson(e)?f["default"].parse(e):e:h};l.checkAsyncJobStatus=function(h,e){var d=new v["default"],g=0,u,x=function(){n["default"].request({url:h},e).then(function(y){y=y||{status:"Failed"};u=y.status||y.jobStatus;u=a["default"].isDefined(u)?u.toLowerCase():u;q["default"].includes(["esrijobsucceeded","completed"],u)?d.resolve(y):q["default"].includes(["esrijobfailed",
"failed"],u)||400<y.code?d.reject(y):setTimeout(x,t["default"].asyncIntervalTimerFunction(g++))},function(y){d.reject(y)})};setTimeout(x,t["default"].asyncIntervalTimerFunction(g++));return d};l.checkAsyncJobStatusWithVaryingInterval=function(h,e){var d=new v["default"],g=0,u,x=function(){setTimeout(function(){g++;n["default"].request({url:h}).then(function(y){y=y||{status:"Failed"};u=y.status||y.jobStatus;u=a["default"].isDefined(u)?u.toLowerCase():u;q["default"].includes(["esrijobsucceeded","completed"],
u)?d.resolve(y):q["default"].includes(["esrijobfailed","failed"],u)||400<y.code?d.reject(y):x()},function(y){return d.reject(y)})},e(g))};x();return d};l.getEndTime=function(h){var e=n["default"].isPortal();if(((null===h||void 0===h?0:h.startTime)||(null===h||void 0===h?0:h.submittedTime))&&((null===h||void 0===h?0:h.totalTime)||(null===h||void 0===h?0:h.duration))){var d=(e?h.submittedTime:h.startTime)||0;d=e?d:1E3*d;h=e?a["default"].isDefined(h.duration)?h.duration:void 0:a["default"].isDefined(h.totalTime)?
1E3*h.totalTime:void 0;return d+h}if(e&&h.jobStatus&&h.messages&&(h=q["default"].find(h.messages||[],function(u){return"esriJobMessageTypeInformative"===u.type&&0===u.description.indexOf("Succeeded at ")})))try{d=h.description.indexOf(" (Elapsed Time: ");var g=h.description.substring(14,d).trim();return(new Date(g)).getTime()}catch(u){}};return l}()})},"arcgisonline/pages/utils/polling":function(){define(["require","exports"],function(K,G){function w(v){return 1E3*G.ASYNC_POLLING_INTERVALS[-1<v&&
v<G.ASYNC_POLLING_INTERVALS.length-1?v:G.ASYNC_POLLING_INTERVALS.length-1]}Object.defineProperty(G,"__esModule",{value:!0});G.asyncIntervalTimerFunction=G.ASYNC_POLLING_INTERVALS=void 0;G.ASYNC_POLLING_INTERVALS=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];G.asyncIntervalTimerFunction=w;G["default"]={ASYNC_POLLING_INTERVALS:G.ASYNC_POLLING_INTERVALS,asyncIntervalTimerFunction:w}})},"arcgisonline/sharing/utilShare":function(){define("require exports tslib ../esriGeowConfig ./util ./dijit/dialog/ShareCheckDlg ./dijit/dialog/ConfirmDialog ./geow/Community dojo/promise/all dojo/Deferred dojo/string esri/lang esri/request dojo/i18n!../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(){}k.isEmpty=function(l){return l?JSON.stringify(l)===JSON.stringify({}):!1};k.checkWebMapContent=function(l){var h=this,e=function(d){var g={};g.webMapId=d.webMapId;g.mainItemCard=
d.webMapItemCard;delete g.mainItemCard.needsUpdate;g.mainItemSharing=d.webMapItemSharing;g.mainConfig=d.webMapConfig;g.itemCards=d.itemCards||{};for(var u in g.itemCards)delete g.itemCards[u].needsUpdate;g.itemsSharing={};g.newAccess=d.newAccess;g.needUpdateHandler=d.needUpdateHandler;g.dontNeedUpdateHandler=d.dontNeedUpdateHandler;g.confirmItemControl=d.confirmItemControl;h.getMainItemCard(g)};l.useTimer?(this.waitHandler&&clearTimeout(this.waitHandler),this.waitHandler=setTimeout(function(){h.waitHandler=
null;e(l)},2E3)):e(l)};k.checkWebAppContent=function(l){var h={};h.webAppId=l.webAppId;h.mainItemCard=l.webAppItemCard;h.mainItemSharing=l.webAppItemSharing;h.mainConfig=l.webAppConfig;h.itemCards=l.itemCards||{};h.itemsSharing={};this.getMainItemCard(h)};k.getMainItemCard=function(l){var h=this,e=function(d){d.newAccess?(d.mainItemSharing=d.newAccess,h.getMainConfig(d)):"private"!==d.mainItemCard.access&&("shared"===d.mainItemCard.access?h.getMainSharingInfo(d):h.getMainConfig(d))};l.mainItemCard?
e(l):r["default"].request({url:v["default"].restBaseUrl+"content/items/"+(l.webMapId||l.webAppId)}).then(function(d){l.mainItemCard=d;e(l);return!0},function(d){return d})};k.getMainSharingInfo=function(l){var h=this;if(l.mainItemSharing)this.getMainConfig(l);else{var e=r["default"].getUser();e=v["default"].restBaseUrl+"content/users/"+e.username;l.mainItemCard.ownerFolder&&(e+="/"+l.mainItemCard.ownerFolder);e+="/items/"+(l.webMapId||l.webAppId);var d=r["default"].getToken();m["default"]({url:e+
(d?"?f\x3djson\x26token\x3d"+d:"?f\x3djson"),callbackParamName:"callback",load:function(g){l.mainItemSharing=g.sharing;h.getMainConfig(l)},error:function(g){h.getMainConfig(l)}},{disableIdentityLookup:!0})}};k.getMainConfig=function(l){var h=this;if(l.mainConfig)l.webMapId?this.readWebMapConfig(l):this.readWebAppConfig(l);else return r["default"].request({url:v["default"].restBaseUrl+"content/items/"+(l.webMapId||l.webAppId)+"/data"}).then(function(e){l.mainConfig=e;l.webMapId?h.readWebMapConfig(l):
h.readWebAppConfig(l)},function(e){})};k.checkForItemSharing=function(l){var h=this;if(l.newAccess&&"shared"!==l.newAccess.access||!l.newAccess&&"shared"!==l.mainItemCard.access)this.checkAccessOfItems(l);else{var e=[],d;for(d in l.itemCards){var g=l.itemCards[d];"shared"!==g.access&&"org"!==g.access||!g.ownerFolder&&null!==g.ownerFolder||e.push(this.getItemSharingInfo(g))}e.length?b["default"](e).then(function(u){u.forEach(function(x){x=x.length?x[1]:x;l.itemsSharing[x.item.id]=x.sharing});h.checkAccessOfItems(l)}):
this.checkAccessOfItems(l)}};k.checkAccessOfItems=function(l){var h=this,e=r["default"].getUser(),d=l.newAccess?l.newAccess.access:l.mainItemCard.access,g=[],u;for(u in l.itemCards){var x=l.itemCards[u];"shared"===d&&"public"!==x.access&&l.mainItemSharing&&void 0!==x.ownerFolder&&e.username!==x.owner&&g.push(this.getOwnerGroups(x,l))}g.length?b["default"](g).then(function(y){h._checkAccessOfItems(l)}):this._checkAccessOfItems(l)};k._checkAccessOfItems=function(l){var h=this,e=!1,d=l.newAccess?l.newAccess.access:
l.mainItemCard.access,g=[],u;for(u in l.itemCards){var x=l.itemCards[u],y=x.access,B=!1;l.containsPremiumContent=this.isPremiumContent(x);if("public"===d&&"public"!==y)B=!0;else if("org"===d&&"public"!==y&&"org"!==y)B=!0;else if("shared"===d&&"private"===y)B=!0;else if("shared"!==d||"shared"!==y&&"org"!==y)"Web Map"!==x.type&&"Web Scene"!==x.type?delete l.itemCards[u]:l.itemCards[u].needsUpdate=!1;else if(l.mainItemSharing)if(l.itemsSharing[u]&&void 0!==x.ownerFolder){y=l.mainItemSharing.groups;for(var C=
l.itemsSharing[u].groups,z=!1,D=0;D<y.length;D++)if(-1===C.indexOf(y[D])){z=B=!0;break}z||delete l.itemCards[u]}else B=!0;else B=!0;(B&&l.webAppId||"Web Map"===x.type||"Web Scene"===x.type)&&g.push(this.checkWebMapInWebApp(x.id,l));e=e||B}var E=function(A,F){var H=F.newAccess?F.newAccess.access:F.mainItemCard.access;A?F.needUpdateHandler?F.needUpdateHandler(F):f["default"].prototype.statics.getInstance().show(F):"public"===H&&"Web Map"===F.mainItemCard.type&&F.containsPremiumContent?h.showPremiumContentDlg(F):
F.dontNeedUpdateHandler&&F.dontNeedUpdateHandler(F)};g.length?b["default"](g).then(function(A){A.forEach(function(F){1<F.length&&t["default"].isDefined(F.length?F[1]:F)&&(e=e||F.length?F[1]:F)});E(e,l)}):this.isEmpty(l.itemCards)?l.dontNeedUpdateHandler&&l.dontNeedUpdateHandler(l):E(e,l)};k.isPremiumContent=function(l){l=l.typeKeywords||[];return-1<l.indexOf("Requires Subscription")||-1<l.indexOf("Requires Credits")};k.showPremiumContentDlg=function(l){var h=this;-1<document.location.href.indexOf("viewer.html")||
(l=""+v["default"].helpBase+v["default"].helpMap["120001307"],this.premiumContentDlg||(this.premiumContentDlg=new c["default"]({showCancel:!1,buttonOk:n["default"].common.ok,style:{width:"200px"}}),this.premiumContentDlg.show({message:q["default"].substitute('${i18n.shareMapDlg.premiumLayerMsg} \x3ca href\x3d"${helpLinkPremium}" target\x3d"_blank"\x3e${i18n.shareMapDlg.premiumLayerMsgLearnMore}\x3c/a\x3e',{i18n:n["default"],helpLinkPremium:l}),title:n["default"].common.premiumcontent}).then(function(e){h.premiumContentDlg.hide();
h.premiumContentDlg=null})))};k.readWebMapConfig=function(l){var h=this,e,d,g=!1,u=[],x=l.mainConfig.operationalLayers;l.mainConfig.tables&&l.mainConfig.tables.length&&(x=x.concat(l.mainConfig.tables));for(var y=x.length-1;0<=y;y--){var B=x[y];if(B.itemId)g=!0,l.itemCards[B.itemId]||u.push(this.getItemCard(B.itemId)),("ArcGISTiledMapServiceLayer"===B.layerType||"ArcGISTiledElevationServiceLayer"===B.layerType||"ArcGISSceneServiceLayer"===B.layerType)&&(null===(e=B.layers)||void 0===e?0:e.length)&&
B.layers.forEach(function(E){E.layerItemId&&!l.itemCards[E.layerItemId]&&u.push(h.getItemCard(E.layerItemId))});else if("GroupLayer"===B.layerType)for(var C=x[y],z=C.layers.length-1;0<=z;z--){var D=C.layers[z];D.itemId&&(g=!0,l.itemCards[D.itemId]||u.push(this.getItemCard(D.itemId)))}B.layers&&B.layers.forEach(function(E){E.layerItemId&&!l.itemCards[E.layerItemId]&&u.push(h.getItemCard(E.layerItemId))})}for(y=l.mainConfig.baseMap.baseMapLayers.length-1;0<=y;y--)e=l.mainConfig.baseMap.baseMapLayers[y],
e.itemId&&(g=!0,l.itemCards[e.itemId]||u.push(this.getItemCard(e.itemId)));if(l.mainConfig.baseMap.elevationLayers)for(y=l.mainConfig.baseMap.elevationLayers.length-1;0<=y;y--)e=l.mainConfig.baseMap.elevationLayers[y],e.itemId&&(g=!0,l.itemCards[e.itemId]||u.push(this.getItemCard(e.itemId)));u.length?b["default"](u).then(function(E){E.forEach(function(H){H=H.length?H[1]:H;H.id&&(l.itemCards[H.id]=H)});var A=[],F=[];E.forEach(function(H){H=H.length?H[1]:H;H.id&&("Map Service"===H.type||"Scene Service"===
H.type)&&-1<H.typeKeywords.indexOf("Hosted Service")&&!l.itemCards[H.id].data&&(A.push(h.getItemData(H.id)),F.push(H.id))});A.length?b["default"](A).then(function(H){H.forEach(function(I,L){var J=l.itemCards[F[L]];J.data=I.length?I[1]:I;var O=[];J.data.layers&&J.data.layers.forEach(function(P){P.layerItemId&&(l.itemCards[P.layerItemId]||O.push(h.getItemCard(P.layerItemId)))});O.length?b["default"](O).then(function(P){P.forEach(function(fa){fa=fa.length?fa[1]:fa;fa.id&&(l.itemCards[fa.id]=fa)});h.checkForItemSharing(l)},
function(P){h.checkForItemSharing(l)}):h.checkForItemSharing(l)},h)},function(H){h.checkForItemSharing(l)}):h.checkForItemSharing(l)},function(E){h.checkForItemSharing(l)}):g?this.checkForItemSharing(l):null===(d=l.dontNeedUpdateHandler)||void 0===d?void 0:d.call(l,l)};k.readWebAppConfig=function(l){var h=this;if(l.mainConfig.values&&l.mainConfig.values.webmap||l.mainConfig.map&&l.mainConfig.map.itemId||l.mainConfig.values&&l.mainConfig.values.webscene){var e=[];l.mainConfig&&(l.mainConfig.values?
l.mainConfig.values.webscene?e=l.mainConfig.values.webscene.split(","):l.mainConfig.values.webmap&&(e=l.mainConfig.values.webmap.split(",")):e=l.mainConfig.map&&l.mainConfig.map.itemId?[l.mainConfig.map.itemId]:[]);var d=[];e.forEach(function(g){l.itemCards[g]||d.push(h.getItemCard(g))});d.length?b["default"](d).then(function(g){g.forEach(function(u){u=u.length?u[1]:u;l.itemCards[u.id]=u});h.checkForItemSharing(l)}):this.checkForItemSharing(l)}};k.checkWebMapInWebApp=function(l,h){var e=new p["default"],
d={access:h.mainItemCard.access};h.mainItemSharing&&h.mainItemSharing.groups&&(d.groups=h.mainItemSharing.groups);this.checkWebMapContent({webMapId:l,webMapItemCard:h.itemCards[l],newAccess:d,needUpdateHandler:function(g){h.itemCards[l].webMapInfo=g;e.resolve(!0)},dontNeedUpdateHandler:function(g){e.resolve(!1)}});return e};k.getItemCard=function(l,h){var e=this;h=h||new p["default"];if("inProgress"===this.itemCards[l])setTimeout(function(){e.getItemCard(l,h)},1E3);else if(this.itemCards[l])delete this.itemCards[l].needsUpdate,
h.resolve(this.itemCards[l]);else{this.itemCards[l]="inProgress";var d=v["default"].restBaseUrl+"content/items/"+l,g=r["default"].getToken();m["default"]({url:d+(g?"?f\x3djson\x26token\x3d"+g:"?f\x3djson"),callbackParamName:"callback",load:function(u){e.itemCards[l]=u;h.resolve(u)},error:function(u){delete e.itemCards[l];h.reject(u)}},{disableIdentityLookup:!0})}return h};k.getItemData=function(l,h){var e=this,d;h=h||new p["default"];if(this.itemCards[l]&&"inProgress"===this.itemCards[l].data)setTimeout(function(){e.getItemData(l,
h)},1E3);else if(null===(d=this.itemCards[l])||void 0===d?0:d.data)h.resolve(this.itemCards[l].data);else{this.itemCards[l].data="inProgress";d=v["default"].restBaseUrl+"content/items/"+l+"/data";var g=r["default"].getToken();m["default"]({url:d+(g?"?f\x3djson\x26token\x3d"+g:"?f\x3djson"),callbackParamName:"callback",load:function(u){e.itemCards[l].data=u;h.resolve(u)},error:function(u){delete e.itemCards[l].data;h.reject(u)}},{disableIdentityLookup:!0})}return h};k.getItemSharingInfo=function(l){var h=
v["default"].restBaseUrl+"content/users/"+l.owner;l.ownerFolder&&(h+="/"+l.ownerFolder);h+="/items/"+l.id;l=r["default"].getToken();return m["default"]({url:h+(l?"?f\x3djson\x26token\x3d"+l:"?f\x3djson"),callbackParamName:"callback"},{disableIdentityLookup:!0})};k.getOwnerGroups=function(l,h){var e=this,d=new p["default"];this.ownerGroups[l.owner]?d.resolve():a["default"].getProfile(l.owner,function(g){g=(g.groups||[]).map(function(u){return u.id});e.ownerGroups[l.owner]=g;d.resolve()},function(){d.resolve()});
return d};k.itemCards=[];k.ownerGroups=[];return k}()})},"arcgisonline/sharing/dijit/dialog/ShareCheckDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.ShareCheckDlg");K.require("dijit.Dialog");K.require("dijit._Widget");K.require("dijit._Templated");K.require("arcgisonline.sharing.util");K.declare("arcgisonline.sharing.dijit.dialog.ShareCheckDlg",[G._Widget,
G._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"shareCheck-dialog" title\x3d"${i18n.shareChecksDlgTitle}" execute\x3d""\x3e\r\n    \x3cstyle type\x3d"text/css"\x3e\r\n      .esri .dojoxGridHeader .dojoxGridCellFocus, .esri .dojoxGridHeader .dojoxGridCell {\r\n        border-bottom: 1px solid #CCC;\r\n      }\r\n    \x3c/style\x3e\r\n    \x3cspan dojoAttachPoint\x3d"shareCheckTopMsg"\x3e\x3c/span\x3e\r\n    \x3cdiv dojotype\x3d"dijit.layout.BorderContainer" design\x3d"headline" gutters\x3d"false" style\x3d"width:100%; height:120px; margin:20px 0 10px 0;"\x3e\r\n      \x3cdiv dojoType\x3d"dijit.layout.ContentPane" dojoAttachPoint\x3d"shareCheckGrid" region\x3d"top" style\x3d"height:118px;"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cspan dojoAttachPoint\x3d"shareCheckBottomMsg"\x3e\x3c/span\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"editableLayerDiv" style\x3d"clear:both; display:none; background-color:rgba(240, 201, 206, 1); border:2px solid rgb(255, 0, 0); margin-top:10px; padding:8px;"\x3e\r\n      \x3cspan dojoAttachPoint\x3d"editableLayerMsg"\x3e\x3c/span\x3e\r\n      \x3ca dojoAttachPoint\x3d"editableLayerHelpLink" href\x3d"JavaScript:void(0);" dojoAttachEvent\x3d"onClick:onLearnHowClick"\x3e\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both;"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix leader-1" style\x3d"padding-top:5px; padding-bottom:5px;"\x3e\r\n      \x3cbutton dojoAttachEvent\x3d"onClick:onCancelClick" dojoAttachPoint\x3d"exitButton" class\x3d"jevent cancel btn-two right" dojoType\x3d"dijit.form.Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n      \x3cbutton dojoAttachPoint\x3d"shareGridUpdateButton" dojoAttachEvent\x3d"onClick:onUpdateClick" class\x3d"jevent primary right" dojoType\x3d"dijit.form.Button"\x3e\r\n        ${i18n.UpdateSharingBtn}\r\n      \x3c/button\x3e\r\n      \x3cbutton dojoAttachPoint\x3d"shareGridOkButton" dojoAttachEvent\x3d"onClick:onCancelClick" class\x3d"jevent primary right" dojoType\x3d"dijit.form.Button" style\x3d"display:none;"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both;"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
grid:null,gridId:"shareCheckGridNode",oneLayerMissingDataCollection:!1,oneLayerNotMissingDataCollection:!1,oneLayerNotEditable:!1,statics:{_instance:null,getInstance:function(){this._instance&&G.byId("shareCheckGridNode")&&G.byId("shareCheckGridNode").destroy();null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.ShareCheckDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common;
K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").myOrganization.creditsTab);K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").shareCheckDlg)},show:function(v){var r=K.hitch(this,function(m,n,k){var l=!1,h=!1;if(("public"===m||"org"===m)&&void 0!==k.ownerFolder)return{userCanUpdate:!0,hasItemWithKnownGroupDetails:l,unknownGroupDetails:h};if("shared"===m)if(void 0!==k.ownerFolder){l=!0;m=this.info.itemsSharing[a]?this.info.itemsSharing[a].groups:[];k=arcgisonline.sharing.utilShare.ownerGroups[k.owner];
for(var e=0;e<n.length;e++)if(-1===K.indexOf(m,n[e])&&(!esri.isDefined(k)||esri.isDefined(k)&&-1<K.indexOf(k,n[e])))return{userCanUpdate:!0,hasItemWithKnownGroupDetails:l,unknownGroupDetails:h}}else h=!0;return{userCanUpdate:!1,hasItemWithKnownGroupDetails:l,unknownGroupDetails:h}});this.info=v;v=!1;var f=this.info.mainItemCard.access,c="Web Scene"===this.info.mainItemCard.type,a;for(a in this.info.itemCards){var b=this.info.itemCards[a],p=this.info.mainItemSharing?this.info.mainItemSharing.groups:
[];if(!1===b.needsUpdate){if(b.webMapInfo){for(var q in b.webMapInfo.itemCards){var t=r(f,p,b.webMapInfo.itemCards[q]);v=t.userCanUpdate;0-t.unknownGroupDetails;if(v)break}if(v)break}}else if(t=r(f,p,b),v=t.userCanUpdate,0-t.unknownGroupDetails,v)break}v?(this.shareCheckTopMsg.innerHTML=this.info.webMapId?c?this.i18n.textTopWebScene:this.i18n.textTopWebmap:this.i18n.textTopWebapp,this.shareCheckBottomMsg.innerHTML=this.info.webMapId?c?this.i18n.textBottomWebScene:this.i18n.textBottomWebmap:this.i18n.textBottomWebapp,
K.style(this.exitButton.domNode,"display",""),K.style(this.shareGridUpdateButton.domNode,"display",""),K.style(this.shareGridOkButton.domNode,"display","none")):(this.shareCheckTopMsg.innerHTML=this.info.webMapId?c?this.i18n.textTopWebScene:this.i18n.textTopWebmap:this.i18n.textTopWebapp,this.shareCheckBottomMsg.innerHTML="",K.style(this.exitButton.domNode,"display","none"),K.style(this.shareGridUpdateButton.domNode,"display","none"),K.style(this.shareGridOkButton.domNode,"display",""));this.oneLayerMissingDataCollection=
this.oneLayerNotMissingDataCollection=this.oneLayerNotEditable=!1;this.editableLayerMsg.innerHTML="";K.style(this.editableLayerDiv,"display","none");this.checkEditableLayers();G.byId("shareCheck-dialog").show()},displayLayers:function(){var v=K.create("table",{border:"1",style:"width: 100%; height: 100%"},this.shareCheckItemsDiv),r=K.create("tbody",{},v);r=K.create("tr",{},r);K.create("span",{innerHTML:this.i18n.titleItem},K.create("td",{},r));K.create("span",{innerHTML:this.i18n.titleOwner},K.create("td",
{},r));for(var f in this.info.itemCards){var c=this.info.itemCards[f];r=K.create("tr",{},v);K.create("span",{innerHTML:c.title},K.create("td",{},r));K.create("span",{innerHTML:c.owner},K.create("td",{},r))}},checkEditableLayers:function(){var v=function(b,p){for(var q in b){var t=b[q];t&&!1!==t.needsUpdate&&"Feature Service"===t.type&&("admin"===t.itemControl||"update"===t.itemControl)&&-1<K.indexOf(t.typeKeywords,"Hosted Service")&&(p.push(arcgisonline.sharing.util.getJson(t.url+"/layers")),r.push(t))}};
if("public"===this.info.mainItemCard.access){var r=[],f=[];v(this.info.itemCards,f);for(var c in this.info.itemCards){var a=this.info.itemCards[c];a.webMapInfo&&v(a.webMapInfo.itemCards,f)}f.length?(new K.DeferredList(f)).addCallback(K.hitch(this,function(b){K.forEach(b,function(p,q){if(p[1].layers&&p[1].layers.length&&p[1].layers[0]&&-1<p[1].layers[0].capabilities.indexOf("Editing")){var t=r[q];t.isEditable=!0;this.editableLayerMsg.innerHTML="* "+this.i18n.layerIsEditable+" \x3cspan class\x3d'esriItemLinks' style\x3d'outline:none;'\x3e\x3cA href\x3d'"+
(esriGeowConfig.helpBase+esriGeowConfig.helpMap["120001293"])+"' target\x3d'_blank'\x3e"+this.i18n.learnHow+"\x3c/a\x3e\x3c/span\x3e";K.style(this.editableLayerDiv,"display","");-1===K.indexOf(t.typeKeywords,"Public Data Collection")?(this.oneLayerMissingDataCollection=!0,t.missingDataCollection=!0):this.oneLayerNotMissingDataCollection=!0}else this.oneLayerNotEditable=!0},this);this.oneLayerMissingDataCollection&&(this.editableLayerMsg.innerHTML=this.oneLayerNotMissingDataCollection?"* "+this.i18n.usePublicDataCollection+
"\x3c/br\x3e** "+this.i18n.layerIsEditable+"\x3c/br\x3e\x3cspan class\x3d'esriItemLinks' style\x3d'outline:none;'\x3e\x3cA href\x3d'"+(esriGeowConfig.helpBase+esriGeowConfig.helpMap["120001293"])+"' target\x3d'_blank'\x3e"+this.i18n.learnHow+"\x3c/a\x3e\x3c/span\x3e":"* "+this.i18n.usePublicDataCollection+" \x3cspan class\x3d'esriItemLinks' style\x3d'outline:none;'\x3e\x3cA href\x3d'"+(esriGeowConfig.helpBase+esriGeowConfig.helpMap["120001293"])+"' target\x3d'_blank'\x3e"+this.i18n.learnHow+"\x3c/a\x3e\x3c/span\x3e",
K.style(this.editableLayerDiv,"display",""),this.oneLayerNotMissingDataCollection||this.oneLayerNotEditable||(this.shareCheckBottomMsg.innerHTML="",K.style(this.exitButton.domNode,"display","none"),K.style(this.shareGridUpdateButton.domNode,"display","none"),K.style(this.shareGridOkButton.domNode,"display","")));this.createGrid()})):this.createGrid()}else this.createGrid()},createGrid:function(){var v=[[{name:this.i18n.titleLayer,field:"name",width:"320px"},{name:this.i18n.titleOwner,field:"owner",
width:"320px"}]],r=[],f;for(f in this.info.itemCards){var c=this.info.itemCards[f];if(!1!==c.needsUpdate){var a=c.isEditable&&"public"===this.info.mainItemCard.access,b=c.missingDataCollection,p="";if("admin"===c.itemControl||"update"===c.itemControl)if(this.oneLayerMissingDataCollection&&this.oneLayerNotMissingDataCollection)p=b?" *":" **";else if(this.oneLayerMissingDataCollection||this.oneLayerNotMissingDataCollection)if(b||a)p=" *";r.push({id:c.id,name:c.title+p,owner:c.owner})}if(c.webMapInfo)for(var q in c.webMapInfo.itemCards)p=
c.webMapInfo.itemCards[q],a=p.isEditable&&"public"===this.info.mainItemCard.access,b=p.missingDataCollection,r.push({id:p.id,name:p.title+(this.oneLayerMissingDataCollection&&b||!this.oneLayerMissingDataCollection&&a?" *":""),owner:p.owner})}this.memory=new K.store.Memory({data:r,idProperty:"id"});this.store=new K.data.ObjectStore({objectStore:this.memory});this.grid=new w.grid.DataGrid({store:this.store,structure:v,id:this.gridId,style:{border:"1px #CCC solid"},selectionMode:"none"},K.create("div",
null,this.shareCheckGrid.domNode));this.grid.startup();G.byId("shareCheck-dialog").resize();esri.isTouchEnabled&&(this.gridScrollBox=this.grid.views.views[0].scrollboxNode,esri.setScrollable(this.gridScrollBox))},updateSharing:function(){var v=this.info.mainItemCard.access,r=[];if("public"===v||"org"===v)for(var f in this.info.itemCards){if(v=this.info.itemCards[f],void 0===v.ownerFolder||!1===v.needsUpdate||v.missingDataCollection||r.push(this.shareItemByID(v)),v.webMapInfo)for(var c in v.webMapInfo.itemCards){var a=
v.webMapInfo.itemCards[c];void 0===a.ownerFolder||v.missingDataCollection||r.push(this.shareItemByID(a))}}else{var b=this.info.mainItemSharing?this.info.mainItemSharing.groups:[];r=[];for(f in this.info.itemCards){v=this.info.itemCards[f];if(void 0!==v.ownerFolder&&!1!==v.needsUpdate){var p="",q="",t=this.info.itemsSharing[f]?this.info.itemsSharing[f].groups:[],m=arcgisonline.sharing.utilShare.ownerGroups[v.owner];K.forEach(b,function(n){-1===K.indexOf(t,n)&&(!esri.isDefined(m)||esri.isDefined(m)&&
-1<K.indexOf(m,n))&&(p+=q+n,q=",")},this);p.length&&r.push(this.shareItemByID(v,p))}if(v.webMapInfo)for(c in v.webMapInfo.itemCards)a=v.webMapInfo.itemCards[c],void 0!==a.ownerFolder&&(q=p="",t=v.webMapInfo.itemsSharing[c]?v.webMapInfo.itemsSharing[c].groups:[],m=arcgisonline.sharing.utilShare.ownerGroups[a.owner],K.forEach(b,function(n){-1===K.indexOf(t,n)&&(!esri.isDefined(m)||esri.isDefined(m)&&-1<K.indexOf(m,n))&&(p+=q+n,q=",")},this),p.length&&r.push(this.shareItemByID(a,p)))}}r.length?(new K.DeferredList(r)).addCallback(K.hitch(this,
function(n){K.forEach(n,function(k){k=k[1];k.itemId&&delete arcgisonline.sharing.utilShare.itemCards[k.itemId]});setTimeout(function(){K.publish("onShareUpdate",null);K.publish("shareCheckDlg/update")},100);this.hide()})):this.hide()},shareItemByID:function(v,r){var f=this.info.mainItemCard.access;f={everyone:"public"===f,account:"org"===f||"org"===v.access,confirmItemControl:this.info&&this.info.confirmItemControl?!0:!1};r&&(f.groups=r);var c=new K.Deferred;arcgisonline.sharing.geow.Content.shareItemByID(v,
f,K.hitch(this,function(a){c.callback(a)}),K.hitch(this,function(a){c.errback(a)}));return c},onLearnHowClick:function(){},onUpdateClick:function(){this.updateSharing()},onCancelClick:function(){this.hide()},hide:function(){this.store.close();delete this.store;delete this.memory;this.grid.destroy();delete this.grid;this.grid=this.store=this.memory=null;G.byId("shareCheck-dialog").hide()}})})},"arcgisonline/sharing/dijit/dialog/RateLimiting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/dom dojo/dom-construct dojo/query dojo/parser dojo/ready dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dojo/Deferred dijit/Dialog dijit/form/Button dojo/json arcgisonline/sharing/util arcgisonline/sharing/dijit/dialog/ConfirmDialog dojox/validate/regexp esri/Evented dojo/text!arcgisonline/sharing/dijit/dialog/templates/RateLimiting.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F){return K("arcgisonline.sharing.dijit.dialog.RateLimiting",[h],{templateString:A,baseClass:"esriRateLimiting",buildRendering:function(){this.inherited(arguments);var H=v.doc.createDocumentFragment();this._templateDijit=new (K([h,e,d],{templateString:a.substitute(this.templateString,{i18n:F},null,this)}));this._content=t.place(this._templateDijit.domNode,H,"first");this.inherited(arguments);this.domNode.appendChild(this._content)},
postMixInProperties:function(){this.inherited(arguments);this.i18n=G.mixin(G.mixin({},F.common),F.itemProperties);this.serviceProxyParams=this.serviceProxyParams&&(this.serviceProxyParams.hitsPerInterval||this.serviceProxyParams.referrers)?this.serviceProxyParams:this.item&&this.item.serviceProxyParams||null},postCreate:function(){this.inherited(arguments);this._enableLimits=this._templateDijit._enableLimits;this._hitRate=this._templateDijit._hitRate;this._hitCount=this._templateDijit._hitCount;this._interval=
this._templateDijit._interval;this._referrerUrl=this._templateDijit._referrerUrl;this._referrers=this._templateDijit._referrers;this._addBtn=this._templateDijit._addBtn;this._delBtn=this._templateDijit._delBtn;this._loadConnections();this.set("value",this.serviceProxyParams)},destroy:function(){this._templateDijit.destroyRecursive();this._templateDijit=null;this.inherited(arguments)},_loadConnections:function(){this.own(b(this._enableLimits,"change",G.hitch(this,function(H){this._hitRate.set("disabled",
!0!==H);this._hitCount.set("disabled",!0!==H);this._interval.set("disabled",!0!==H);m(".canDisable")[!0!==H?"addClass":"removeClass"]("disabled");r[!0!==H?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")})),b(this._addBtn,"click",G.hitch(this,function(){this._referrerUrl.isValid()&&(this._addReferralUrl(this._referrerUrl.get("value").split(/[ ,]+/)),this._referrerUrl.set("value",""))})),b(this._delBtn,"click",G.hitch(this,function(){this._referrers.getSelected().orphan();this._delBtn.set("disabled",
!this._referrers.getSelected().length)})),b(this._referrers,"blur, click",G.hitch(this,function(){this._delBtn.set("disabled",!this._referrers.getSelected().length)})))},_setDisabledAttr:function(H){var I=l.findWidgets(this.domNode).concat(l.findWidgets(this._content));w.forEach(I,function(L){L.set("disabled",H)});r[H?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_addReferralUrl:function(H){var I;w.forEach(H,G.hitch(this,function(L){L&&((I=m("option",this._referrers.containerNode).some(function(J){return J.value.toLowerCase()===
L.toLowerCase()}))||this._referrers.containerNode.appendChild(t.create("option",{value:L,innerHTML:L})))}))},isValid:function(){return this._enableLimits.get("checked")&&!this._hitRate.isValid()?F.rateLimiting.errors.invalidHitRate:!0},_setValueAttr:function(H){this.serviceProxyParams=H;this._enableLimits.set("value",null);H&&(H.hitsPerInterval&&(this._hitRate.set("value",H.hitsPerInterval),this._interval.set("value",H.intervalSeconds),this._enableLimits.set("value","true"),this._extractUnits(H.intervalSeconds)),
this._addReferralUrl(H.referrers))},_extractUnits:function(H){var I=this._interval.options,L=parseInt(H,10);H=1;(I=w.filter(I,function(J){return 0===L%parseInt(J.value,10)}))&&I.length&&(H=I[I.length-1].value,this._interval.set("value",H),this._hitCount.set("value",Math.floor(L/parseInt(H,10))))},_getValueAttr:function(){var H={},I=[];m("option",this._referrers.containerNode).forEach(function(L){I.push(L.value)});this._enableLimits.get("checked")&&(H.hitsPerInterval=parseInt(this._hitRate.get("value"),
10),H.intervalSeconds=parseInt(this._hitCount.get("value"),10)*parseInt(this._interval.get("value"),10));I&&I.length&&(H.referrers=I);return H},showModal:function(H){var I=new u,L=new x({}),J=this.item.folderId,O=v.doc.createDocumentFragment(),P=t.place(this.domNode,O),fa=t.create("div",{"class":"esriFloatTrailing esriTimeSettingsButtons"},P);P=new y({"class":"calcite cancel right btn-two",label:this.i18n.cancel,type:"button"},t.create("button",{},fa));fa=new y({"class":"calcite primary right",label:this.i18n.ok,
type:"button"},t.create("button",{},fa));this.own(b(fa,"click",G.hitch(this,function(){this.set("disabled",!0);var V=esriGeowConfig.restBaseUrl+"content/users/"+this.item.owner+"/"+(J?J+"/":"")+"items/"+this.item.id,ba=this.isValid();if(!0!==ba)this._showError(ba),this.set("disabled",!1);else{var ka=this.get("value");return C.request({url:V+"/update",content:{serviceProxyParams:B.stringify(ka)}},{usePost:!0}).then(G.hitch(this,function(){this.item.serviceProxyParams=ka;L.hide()}),G.hitch(this,function(la){this._showError(la);
this.set("disabled",!1)}))}})),b(P,"click",G.hitch(this,function(){L.hide()})),b(L,"hide",G.hitch(this,function(){L.destroyRecursive();I.resolve(this.item)})));L.set("title",H&&H.title||this.i18n.rateLimitingTitle);L.setContent(O);L.show();return I},_showError:function(H){H=H.error||H||this.i18n.errors.error;H.code=H.messageCode||H.code;H=this.i18n.errors[H.code]||H||this.i18n.errors.error;H.details=H.details&&G.isArray(H.details)&&H.details.length?w.filter(H.details,"return item !\x3d\x3d null"):
null;if(H.details&&H.details.length){var I="\x3cul\x3e";w.forEach(H.details,function(J){I+="\x3cli\x3e"+J+"\x3c/li\x3e"});I+="\x3c/ul\x3e\x3cbr/\x3e";H.message=H.message?"\x3cdiv\x3e"+H.message+"\x3c/div\x3e\x3cbr/\x3e"+I:I}if(H.message&&-1===H.message.indexOf("Request canceled")){H=G.mixin(G.mixin({hideCancel:!0},this.i18n.errors.error),H);var L=new z({});return L.show(H).then(G.hitch(this,function(){L.hide().then(dojo.hitch(this,function(){this.set("disabled",!1)}))}))}}})})},"dojox/validate/regexp":function(){define(["dojo/_base/lang",
"dojo/regexp","dojox/main"],function(K,G,w){var v=K.getObject("validate.regexp",!0,w);return v=w.validate.regexp={ipAddress:function(r){r="object"==typeof r?r:{};"boolean"!=typeof r.allowDottedDecimal&&(r.allowDottedDecimal=!0);"boolean"!=typeof r.allowDottedHex&&(r.allowDottedHex=!0);"boolean"!=typeof r.allowDottedOctal&&(r.allowDottedOctal=!0);"boolean"!=typeof r.allowDecimal&&(r.allowDecimal=!0);"boolean"!=typeof r.allowHex&&(r.allowHex=!0);"boolean"!=typeof r.allowIPv6&&(r.allowIPv6=!0);"boolean"!=
typeof r.allowHybrid&&(r.allowHybrid=!0);var f=[];r.allowDottedDecimal&&f.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");r.allowDottedHex&&f.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");r.allowDottedOctal&&f.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");r.allowDecimal&&f.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");
r.allowHex&&f.push("0[xX]0*[\\da-fA-F]{1,8}");r.allowIPv6&&f.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");r.allowHybrid&&f.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");r="";0<f.length&&(r="("+f.join("|")+")");return r},host:function(r){r="object"==typeof r?r:{};"boolean"!=typeof r.allowIP&&(r.allowIP=!0);"boolean"!=typeof r.allowLocal&&(r.allowLocal=!1);"boolean"!=typeof r.allowPort&&(r.allowPort=!0);"boolean"!=typeof r.allowNamed&&
(r.allowNamed=!1);var f=r.allowPort?"(\\:\\d+)?":"",c="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.?)";r.allowIP&&(c+="|"+v.ipAddress(r));r.allowLocal&&(c+="|localhost");r.allowNamed&&(c+="|^[^-][a-zA-Z0-9_-]*");return"("+c+")"+f},url:function(r){r="object"==typeof r?r:{};"scheme"in r||(r.scheme=[!0,!1]);return G.buildGroupRE(r.scheme,function(f){return f?"(https?|ftps?)\\://":""})+v.host(r)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},
emailAddress:function(r){r="object"==typeof r?r:{};"boolean"!=typeof r.allowCruft&&(r.allowCruft=!1);r.allowPort=!1;var f="([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@"+v.host(r);r.allowCruft&&(f="\x3c?(mailto\\:)?"+f+"\x3e?");return f},emailAddressList:function(r){r="object"==typeof r?r:{};"string"!=typeof r.listSeparator&&(r.listSeparator="\\s;,");var f=v.emailAddress(r);return"("+f+"\\s*["+r.listSeparator+"]\\s*)*"+f+"\\s*["+r.listSeparator+"]?\\s*"},numberFormat:function(r){r=
"object"==typeof r?r:{};"undefined"==typeof r.format&&(r.format="###-###-####");return G.buildGroupRE(r.format,function(f){return G.escapeString(f,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(r){r="object"==typeof r?r:{};"boolean"!=typeof r.allowTerritories&&(r.allowTerritories=!0);"boolean"!=typeof r.allowMilitary&&(r.allowMilitary=!0);
var f="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";r.allowTerritories&&(f+="|AS|FM|GU|MH|MP|PW|PR|VI");r.allowMilitary&&(f+="|AA|AE|AP");return"("+f+")"}}}})},"arcgisonline/sharing/dijit/dialog/LayerTimeSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dojo/query dojo/on dojo/json dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Dialog dijit/form/CheckBox dijit/form/RadioButton dijit/form/Select dijit/form/Button dojo/Deferred arcgisonline/sharing/util ../../../pages/serviceUtil arcgisonline/sharing/dijit/dialog/ConfirmDialog esri/Evented dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z){return K("arcgisonline.sharing.dijit.dialog.LayerTimeSettings",[t,C],{baseClass:"esriLayerTimeSettings",postMixInProperties:function(){this.inherited(arguments);this.i18n=G.mixin({},z.common);this.i18n=G.mixin(this.i18n,z.layerTimeSettings);this.portal=this.item&&this.item.portal||{};this._isPortal=x.isPortal()},buildRendering:function(){var D=document.createDocumentFragment();r.create("p",{innerHTML:this.i18n.header},D);this._enableTimeChk=
new h({checked:!1,name:"enableTimeCheckbox"});D.appendChild(this._enableTimeChk.domNode);r.create("label",{"for":"enableTimeCheckbox","class":"esriLeadingMargin1 inline-block trailer-half",innerHTML:this.i18n.enableTimeLbl},D);r.create("br",{},D);r.create("p",{innerHTML:this.i18n.fieldsetLbl,"class":"trailer-half"},D);this._fieldSet=r.create("fieldset",{"class":"esriLeadingMargin2 padding-left-1 trailer-half fieldset-checkbox"},D);this._timeEventsRdio=new e({name:"times",checked:!0},r.create("input",
{},this._fieldSet));r.create("label",{"for":"timeEvents","class":"esriLeadingMargin1 inline-block",innerHTML:this.i18n.timeEventsLbl},this._fieldSet);r.create("br",{},this._fieldSet);this._timeEventsDiv=r.create("div",{"class":"esriLeadingMargin23"},this._fieldSet);r.create("label",{"for":"timeEventsSelect","class":"esriFloatLeading timeEvent",innerHTML:this.i18n.timeFieldLbl},this._timeEventsDiv);this._timeEventsSelect=new d({maxHeight:200,name:"timeEventsSelect"},r.create("select",{},this._timeEventsDiv));
r.create("br",{},this._fieldSet);this._timeRangesRdio=new e({name:"times","class":"timeRangeRdio"},r.create("input",{},this._fieldSet));r.create("label",{"for":"timeRanges","class":"esriLeadingMargin1 inline-block",innerHTML:this.i18n.timeRangesLbl},this._fieldSet);r.create("br",{},this._fieldSet);this._timeRangesDiv=r.create("div",{"class":"esriLeadingMargin23"},this._fieldSet);r.create("label",{"for":"startTimeSelect","class":"esriFloatLeading timeRange",innerHTML:this.i18n.startTimeLbl},this._timeRangesDiv);
this._startTimeSelect=new d({maxHeight:200,name:"startTimeSelect","class":"timeRange",disabled:!0},r.create("select",{},this._timeRangesDiv));r.create("br",{},this._timeRangesDiv);r.create("label",{"for":"endTimeSelect","class":"esriFloatLeading timeRange leader-half",innerHTML:this.i18n.endTimeLbl},this._timeRangesDiv);this._endTimeSelect=new d({maxHeight:200,name:"endTimeSelect","class":"timeRange",disabled:!0},r.create("select",{},this._timeRangesDiv));r.create("br",{},this._timeRangesDiv);this.inherited(arguments);
this.domNode.appendChild(D)},postCreate:function(){this.timeInfo=this.get("timeInfo");this.fields=this.get("dateFields");this._loadConnects();this._loadLayerFields();this._loadTimeInfo()},_loadConnects:function(){this.own(p(this._timeRangesRdio,"change",G.hitch(this,function(D){w.forEach(k.findWidgets(this._timeRangesDiv),function(E){E.set("disabled",!D)})})),p(this._timeEventsRdio,"change",G.hitch(this,function(D){this.options&&1<this.options.length&&w.forEach(k.findWidgets(this._timeEventsDiv),
function(E){E.set("disabled",!D)})})),p(this._enableTimeChk,"change",G.hitch(this,function(D){var E=this.options&&1<this.options.length;w.forEach(k.findWidgets(this._fieldSet),function(A){D=!E&&-1<A["class"].indexOf("timeRange")?!1:D;A.set("disabled",!D)});this[this._timeRangesRdio.get("checked")?"_timeEventsRdio":"_timeRangesRdio"].onChange(!1)})))},_getValueAttr:function(){return this._enableTimeChk.get("checked")?this._timeEventsRdio.get("checked")?{timeInfo:{startTimeField:this._timeEventsSelect.get("value")}}:
{timeInfo:{startTimeField:this._startTimeSelect.get("value"),endTimeField:this._endTimeSelect.get("value")}}:{timeInfo:this._isPortal?null:{}}},_setDisabledAttr:function(D){w.forEach(k.findWidgets(this.domNode),function(E){E.set("disabled",D)});dojo.query(".js-timeOptions-btn").map(dijit.byNode).forEach(function(E){E.set("disabled",D)});dojo.query(".js-timeOptions-msg")[D?"removeClass":"addClass"]("hide")},_getTimeInfoAttr:function(){var D=this.layer;return this.timeInfo||D.timeInfo||{}},_getDateFieldsAttr:function(){return y.getDateFields(this.layer)},
_loadLayerFields:function(){this.options=w.map(this.fields,G.hitch(this,function(D){return{label:D.alias||D.name,value:D.name}}));this._timeEventsSelect.set("options",this.options);this._timeEventsSelect.set("value",this.options[0].value);this.options&&1<this.options.length&&(this._startTimeSelect.set("options",G.clone(this.options)),this._startTimeSelect.set("value",this.options[0].value),this._endTimeSelect.set("options",G.clone(this.options)),this._endTimeSelect.set("value",this.options[1].value))},
_loadTimeInfo:function(){var D=this.timeInfo||{};this._enableTimeChk.set("checked",D.startTimeField);this._timeEventsSelect.set("value",D.startTimeField);this._startTimeSelect.set("value",D.startTimeField);this._endTimeSelect.set("value",D.endTimeField||this._endTimeSelect.get("value"));this._timeRangesRdio.set("checked",this.timeInfo.startTimeField&&this.timeInfo.endTimeField);this._timeEventsRdio.set("checked",!this.timeInfo.endTimeField)},showModal:function(D){var E=new u,A=new l({style:{width:"450px"}}),
F=v.doc.createDocumentFragment();r.place(this.domNode,F);var H=r.create("div",{"class":"esriFloatTrailing esriTimeSettingsButtons right"},F);r.create("span",{"class":"hide margin-right-half js-timeOptions-msg",innerHTML:z.timeSettingsDlg.statusMsg},H);var I=new g({"class":"calcite primary js-timeOptions-btn",label:this.i18n.ok,type:"button"},r.create("button",{},H));H=new g({"class":"calcite cancel js-timeOptions-btn",label:this.i18n.cancel,type:"button"},r.create("button",{},H));this.own(p(H,"click",
G.hitch(this,function(){A.hide()})),p(A,"hide",G.hitch(this,function(){A.destroyRecursive();E.resolve(this.item)})),p(I,"click",G.hitch(this,function(){this.set("disabled",!0);var L=this.get("value"),J={updateDefinition:q.stringify(L)},O=(this.item.adminUrl||this.item.url.replace("/rest/","/rest/admin/"))+"/"+this.layer.id+"/updateDefinition";L.timeInfo&&L.timeInfo.startTimeField&&L.timeInfo.startTimeField===L.timeInfo.endTimeField?(this.set("disabled",!1),this._showError(z.itemProperties.error.sameTimeField)):
x.request({url:O,content:J},{usePost:!0}).then(G.hitch(this,function(P){this.item.set("maxAgeCheck",!0);this.layer=G.mixin(this.layer,L);A.hide();E.resolve(L)}),G.hitch(this,function(P){this.set("disabled",!1);return this._showError(P)}))})));A.set("title",D&&D.title||z.timeSettingsDlg.timeSettingsDlgTitle);A.setContent(F);A.show();return E},_showError:function(D){D=D&&D.error||D||this.i18n.errors.genericError;D.code=D.messageCode||D.code;D=this.i18n.errors[D.code]||D||this.i18n.errors.error;D.details=
D.details&&G.isArray(D.details)&&D.details.length?w.filter(D.details,"return item !\x3d\x3d null"):null;if(D.details&&D.details.length){var E="\x3cul\x3e";w.forEach(D.details,function(F){E+="\x3cli\x3e"+F+"\x3c/li\x3e"});E+="\x3c/ul\x3e\x3cbr/\x3e";D.message=D.message?"\x3cdiv\x3e"+D.message+"\x3c/div\x3e\x3cbr/\x3e"+E:E}if(D.message&&-1===D.message.indexOf("Request canceled")){D=G.mixin(G.mixin({hideCancel:!0},this.i18n.errors.error),D);var A=new B({});return A.show(D).then(G.hitch(this,function(){A.hide().then(dojo.hitch(this,
function(){this.set("disabled",!1)}))}))}}})})},"arcgisonline/sharing/dijit/dialog/UpdateItemDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/form/SimpleTextarea,dijit/form/TextBox,dijit/form/CheckBox,dijit/form/Button,dijit/InlineEditBox,dijit/Dialog,dijit/_Widget,dijit/_Templated,arcgisonline/pages/pageUtil,arcgisonline/pages/utils/dom,arcgisonline/pages/dijit/UploadProgressBar,arcgisonline/sharing/util,arcgisonline/sharing/geow/Community,arcgisonline/sharing/geow/Content,arcgisonline/sharing/geow/Item,arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/TagsDlg,dojo/promise/all,dojo/number"],
function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.UpdateItemDlg");K.require("dijit.form.SimpleTextarea");K.require("dijit.form.TextBox");K.require("dijit.form.CheckBox");K.require("dijit.form.Button");K.require("dijit.InlineEditBox");K.require("dijit.Dialog");K.require("dijit._Widget");K.require("dijit._Templated");K.require("arcgisonline.pages.pageUtil");K.require("arcgisonline.pages.utils.dom");K.require("arcgisonline.pages.dijit.UploadProgressBar");K.require("arcgisonline.sharing.util");
K.require("arcgisonline.sharing.geow.Community");K.require("arcgisonline.sharing.geow.Content");K.require("arcgisonline.sharing.geow.Item");K.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");K.require("arcgisonline.sharing.dijit.dialog.TagsDlg");K.require("dojo.promise.all");K.require("dojo.number");K.declare("arcgisonline.sharing.dijit.dialog.UpdateItemDlg",[G._Widget,G._Templated],{util:arcgisonline.sharing.util,community:arcgisonline.sharing.geow.Community,content:arcgisonline.sharing.geow.Content,
itemAPI:arcgisonline.sharing.geow.Item,pageUtil:arcgisonline.pages.pageUtil,domUtil:arcgisonline.pages.utils.dom,widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContainer"\x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" dojoAttachPoint\x3d"_updateItemDialog" title\x3d"${i18n.updateItem}" dojoAttachEvent\x3d"hide:clear" execute\x3d"" class\x3d"update-item-dlg"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"_errorDiv"\x3e\x3c/div\x3e\r\n    \x3cform dojoAttachPoint\x3d"_updateItemForm" enctype\x3d"multipart/form-data"\x3e\r\n      \x3cdiv dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemFolderInput" type\x3d"hidden" value\x3d"0"\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"id" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemIdInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"name" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemNameInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"title" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemTitleInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"tags" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemTagsInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"type" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemTypeInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"typeKeywords" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateItemKeywordsInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"description" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateDescriptionInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"snippet" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateSnippetInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"accessInformation" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateAccessInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"licenseInfo" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateLicenseInfoInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"extent" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateExtentInput" type\x3d"hidden" value\x3d""\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"overwrite" dojotype\x3d"dijit.form.TextBox" dojoAttachPoint\x3d"_updateOverwriteInput" type\x3d"hidden" value\x3d"true"\x3e\x3c/div\x3e\r\n      \x3cdiv name\x3d"async" dojotype\x3d"dijit.form.TextBox" type\x3d"hidden" dojoAttachPoint\x3d"_updateAsyncInput" value\x3d"true"\x3e\x3c/div\x3e\r\n\r\n      \x3cdiv\x3e\x3clabel class\x3d"font-size--1" dojoAttachPoint\x3d"_replaceUpdateVerLabel"\x3e${i18n.replaceUpdatedVersionMsg}\x3c/label\x3e\x3c/div\x3e\r\n\r\n      \x3cdiv style\x3d"padding-top:4px;margin-bottom:1.0em;"\x3e\r\n        \x3clabel class\x3d"esriFloatLeading esriTrailingMargin2" style\x3d"margin-top:6px;" for\x3d"update-item-file"\x3e${i18n.itemLabel}\x3c/label\x3e\r\n        \x3cinput type\x3d"file" dojoAttachPoint\x3d"_updateItemFile" id\x3d"update-item-file" name\x3d"file" size\x3d"40" class\x3d"esriFileInput"\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv id\x3d"overwrite_section" class\x3d"hide" style\x3d"padding-top:4px;margin-bottom:1.0em;"\x3e\r\n        \x3cinput id\x3d"overwriteService" type\x3d"checkbox" name\x3d"overwriteService" dojotype\x3d"dijit.form.CheckBox" checked\x3d"checked" dojoAttachPoint\x3d"_overwriteService"/\x3e\r\n        \x3clabel id\x3d"overwriteServiceLbl" for\x3d"overwriteService"\x3e${i18n.overwriteService} ${i18n.keepFieldsSame}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv id\x3d"update-item-keepdescription" style\x3d"width:100%;display:none;"\x3e\r\n        \x3cdiv style\x3d"padding-bottom:5px; padding-top:2px;"\x3e\r\n          \x3clabel\x3e${i18n.updateItemDescription}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"line-height:23px"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useDescription" dojotype\x3d"dijit.form.RadioButton" checked\x3d"checked" dojoAttachPoint\x3d"_useDescKeepRadio" id\x3d"useDescription:keep"/\x3e\r\n          \x3clabel for\x3d"useDescription:keep"\x3e${i18n.keepExistingProperties}\x3c/label\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useDescription" dojotype\x3d"dijit.form.RadioButton" dojoAttachPoint\x3d"_useDescUpdateRadio" id\x3d"useDescription:update"/\x3e\r\n          \x3clabel for\x3d"useDescription:update"\x3e${i18n.useUploadedProperties}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"leader-half trailer-half flex"\x3e\r\n        \x3cdiv class\x3d"flex flex-1"\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_waitingSpan" class\x3d"hide flex-column-justify-center"\x3e${i18n.uploadingItem}\x3c/span\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_uploadProgressBar"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton dojotype\x3d"dijit.form.Button" dojoAttachEvent\x3d"onClick:_handleCancel" dojoAttachPoint\x3d"_cancelBtn" id\x3d"button_update-item-cancel" class\x3d"jevent cancel margin-right-half" type\x3d"cancel"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_update-item" type\x3d"button" dojotype\x3d"dijit.form.Button" dojoAttachEvent\x3d"onClick:uploadItem" class\x3d"primary" dojoAttachPoint\x3d"_updateItemBtn"\x3e${i18n.updateItem}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
item:null,admin:null,i18n:null,_replaceUpdateVerLabel:null,_updateItemDialog:null,_updateItemForm:null,_updateItemBtn:null,_cancelBtn:null,_waitingSpan:null,_useDescUpdateRadio:null,_useDescKeepRadio:null,_updateItemFile:null,_errorDiv:null,_updateItemFolderInput:null,_updateItemIdInput:null,_updateItemNameInput:null,_updateItemTitleInout:null,_updateItemTagsInput:null,_updateItemTypeInput:null,_updateItemKeywordsInput:null,_updateDescriptonInput:null,_updateSnippetInput:null,_updateAccessInput:null,
_updateLicenseInfoInput:null,_updateExtentInput:null,_updateOverwriteInput:null,_updateAsyncInput:null,statics:{_instance:null,getInstance:function(){null===this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.UpdateItemDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common;K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").updateItemDlg);K.mixin(this.i18n,{updating:K.i18n.getLocalization("arcgisonline",
"arcgisonline").addItemFrm.updating})},postCreate:function(){},show:function(v,r){var f={Shapefile:1,"File Geodatabase":1,GeoJson:1,CSV:1,"Microsoft Excel":1},c=v&&v.publishParameters&&"address"===v.publishParameters.locationType;this.item=v;r&&null!==this.adminUser&&(this.admin=r);"Layer Package"==v.type&&K.style(K.byId("update-item-keepdescription"),"display","block");"Vector Tile Service"===v.type?(K.attr(this._replaceUpdateVerLabel,"innerHTML",this.i18n.overwriteStyle),this._updateItemDialog.set("title",
this.i18n.updateStyle),this._updateItemBtn.set("label",this.i18n.updateStyle)):(this.itemName=this.item.sourceData&&this.item.sourceData.name||this.item.name,K.attr(this._replaceUpdateVerLabel,"innerHTML",K.string.substitute(this.i18n.replaceUpdatedVersionMsg,[this.itemName])));v&&v.type in f&&v.relatedService?this._overwriteService.set("checked",!1):v&&v.sourceData?(this._updateItemDialog.set("title",this.i18n.updateFeatures),this._updateItemBtn.set("label",this.i18n.updateFeatures),f=K.string.substitute(c?
this.i18n.overwriteServiceWithCreditsMsg:this.i18n.overwriteServiceMsg,[v.title,v.sourceData.name]),K.attr(this._replaceUpdateVerLabel,"innerHTML",f)):this._overwriteService.set("checked",!1);v&&v.sourceData&&(esri.hide(this._overwriteService.domNode),K.attr("overwriteServiceLbl","innerHTML",this.i18n.keepFieldsSame),K.removeClass("overwrite_section","hide"));this._updateItemDialog.show();this._uploadProgressBar=new arcgisonline.pages.dijit.UploadProgressBar({},this._uploadProgressBar);this._uploadProgressBar.startup();
this._uploadProgressBar.hide()},clear:function(){this._updateItemFile.value="";this._useDescKeepRadio.set("checked",!0);this._useDescUpdateRadio.set("checked",!1);this._overwriteService.set("checked",!0)},_handleCancel:function(v){v.preventDefault();this._updateItemDialog.hide()},hide:function(){this._disable(!1);this._updateItemDialog.hide()},uploadItem:function(v){v.preventDefault();if(0===this._updateItemFile.value.length)return arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.errorLabel,
message:this.i18n.error.providePath}),!1;v=this._fetchItem(this.item).then(K.hitch(this,"loadFile"));if(this.item.sourceData||this.item.relatedService&&this._overwriteService.get("checked"))K.attr(this._waitingSpan,"innerHTML",this.i18n.updating),v=v.then(K.hitch(this,"_updateServiceData",this.item.sourceData||this.item)).then(K.hitch(this,"_resetServiceTitle",this.item));return v.then(K.hitch(this,function(r){r&&!r.success&&r.error&&arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.updateItemErrorTitle,
message:r.error.message||this.i18n.error.errorWhileUpdate});r&&r.serviceItemId?(this._disable(!1),this._updateItemDialog.hide(),window.location="item.html?id\x3d"+r.serviceItemId+(r.jobId?"\x26jobid\x3d"+r.jobId:"")):K.publish("itemData/update",[""]);return!0}),K.hitch(this,function(r){K.isObject(r)&&arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.updateItemErrorTitle,message:r.message||this.i18n.error.errorWhileUpdate});this._disable(!1)}))},_updateServiceData:function(v){var r=
new K.Deferred;this._checkStatus(v,500,K.hitch(this,function(f){var c=esriGeowConfig.restBaseUrl+"content/users/"+f.owner+"/publish",a,b,p={itemid:f.id,filetype:{"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel"}[f.type.toLowerCase()],overwrite:!0,publishParameters:K.json.stringify({name:this.item.title?this.item.title.replace(/ /g,"_"):f.title.replace(/ /g,"_")})};K.attr(this._waitingSpan,"innerHTML",this.i18n.updating);K.promise.all([this._fetchPublishParameters(this.item),
this._fetchServiceInfo(this.item.relatedService||this.item)]).then(K.hitch(this,function(q){a=q[1];(b=q[0])&&"CSV"===f.type?(q=K.mixin(K.mixin({},a.layers&&a.layers[0]),{fields:b.layerInfo.fields}),p.publishParameters=K.mixin(b,{layerInfo:q,name:b.name||f.title.replace(/ /g,"_")})):b&&"Microsoft Excel"===f.type?(p.publishParameters=this._generateExcelOverwritePublishParameters(b,a),a=null):p.publishParameters={name:f.title?f.title.replace(/ /g,"_"):this.item.title.replace(/ /g,"_")};p.publishParameters=
a?K.json.stringify(K.mixin(p.publishParameters,a)):p.publishParameters;return this.util.request({url:c,content:p},{usePost:!0}).then(K.hitch(this,function(t){r.resolve(t&&t.services&&t.services[0]||{serviceItemId:f.id})}),K.hitch(this,function(t){r.reject(t)}))}))}));return r},_generateExcelOverwritePublishParameters:function(v,r){r.name=v.name;r.sourceSR=v.sourceSR;r.targetSR=v.targetSR;for(var f=0;f<r.tables.length;f++)"Review"!=r.tables[f].name&&(r.layers[r.layers.length]=r.tables[f]);for(f=0;f<
r.layers.length;f++)r.layers[f].excelSheetId=v.layers[f].excelSheetId,r.layers[f].locationType=v.layers[f].locationType,r.layers[f].latitudeFieldName=v.layers[f].latitudeFieldName,r.layers[f].longitudeFieldName=v.layers[f].longitudeFieldName,r.layers[f].geocodeServiceUrl=v.layers[f].geocodeServiceUrl,r.layers[f].sourceLocale=v.layers[f].sourceLocale,r.layers[f].sourceCountry=v.layers[f].sourceCountry,r.layers[f].standardizedFieldNames=v.layers[f].standardizedFieldNames,r.layers[f].addressFields=v.layers[f].addressFields;
return JSON.stringify(r)},_resetServiceTitle:function(v,r){var f=new K.Deferred,c=this.util.getUser(),a=v.title||"",b=v.folderId||v.ownerFolder;c=esriGeowConfig.restBaseUrl+"content/users/"+(v.owner||c.username)+"/"+(b?b+"/":"")+"items/"+v.id+"/update";a=-1!==v.typeKeywords.indexOf("Involved Lookup")?{title:a,typeKeywords:v.typeKeywords.toString()+",showUnmatchedAddresses"}:{title:a};this.util.request({url:c,content:a},{usePost:!0}).then(K.hitch(this,function(){f.resolve(r)}),K.hitch(this,function(){f.resolve(r)}));
return f},_fetchServiceInfo:function(v){v=v.url;var r={addToken:(this.util.isHostedService(v)||this.util.isAgolService(v))&&!1!==esriGeowConfig.isMultiTenant},f=new K.Deferred,c;K.promise.all([this.util.request({url:v},r),this.util.request({url:v+"/layers"},r)]).then(K.hitch(this,function(a){var b={},p=a&&1<a.length&&a[1],q=p&&p.layers;p=p&&p.tables;q&&q.length&&(K.forEach(q,function(t){delete t.fields}),b.layers=q);p&&p.length&&(b.tables=p);c=K.mixin(a[0],b);f.resolve(c)}));return f},_fetchPublishParameters:function(v){var r=
esriGeowConfig.restBaseUrl+"content/items/"+v.id+"/info/publishParameters.json";v.publishParameters?(r=new K.Deferred,r.resolve(v.publishParameters)):!v.sourceData||"CSV"!==v.sourceData.type&&"Microsoft Excel"!==v.sourceData.type?(r=new K.Deferred,r.resolve(!1)):r=this.util.request({url:r}).then(K.hitch(this,function(f){return f}));return r},_fetchItem:function(v){if(v.sourceData)var r=this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+v.sourceData.id}).then(K.hitch(this,function(f){f.folderId=
f.ownerFolder;return f}));else r=new K.Deferred,r.resolve(v);return r},loadFile:function(v){var r=new K.Deferred,f=this._updateItemFile.value,c=f.lastIndexOf("\\"),a=v.type;-1<c&&(f=f.substring(c+1,f.length));f=f.replace(/ /g,"_");if("Vector Tile Service"!==v.type&&this.itemName!=f)return v=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),v.show({title:this.i18n.errorLabel,message:K.string.substitute(this.i18n.error.sameFileName,[this.itemName])}),this._updateItemFile.value=
"",r.reject(!0),r;if("Vector Tile Service"===v.type){c=/(?:\.([^.]+))?$/;var b=f.replace(/^.*(\\|\/|:)/,"");if("json"!==(f?c.exec(b)[1].toLowerCase():""))return v=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),v.show({title:this.i18n.errorLabel,message:this.i18n.error.invalidStyleFileExtension}),this._updateItemFile.value="",r.reject(!0),r}this._disable(!0);f=!0;"Layer Package"==a&&(f=K.byId("useDescription:keep").checked);this._updateItemNameInput.set("value",this.itemName);
this._updateItemTitleInput.set("value",v.title);this._updateItemTagsInput.set("value",v.tags);this._updateItemTypeInput.set("value",a);this._updateItemKeywordsInput.set("value",v.typeKeywords);this._updateAccessInput.set("value",v.accessInformation);this._updateLicenseInfoInput.set("value",v.licenseInfo);this._updateItemFolderInput.set("value",v.folderId);f?(this._updateDescriptionInput.set("value",v.description),this._updateSnippetInput.set("value",v.snippet),this._updateExtentInput.set("value",
v.extent)):(this._updateDescriptionInput.set("value",""),this._updateSnippetInput.set("value",""),this._updateExtentInput.set("value",""));var p=function(q,t){if(!q.success||"completed"!==q.status&&q.status){var m=this.i18n.error.errorWhileUpdate;q&&q.error&&q.error.message&&(m=q.error.message);-1<m.indexOf("The request size is greater than the max allowed of 1024MB")&&(m=this.i18n.error.exceedFileSizeLimit);arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.updateItemErrorTitle,
message:m});r.reject(!0)}else r.resolve(!0)};a=function(q){this._disable(!1);r.reject(q)};v&&"Vector Tile Service"===v.type?this._updateItemResource(v,this._updateItemForm).then(K.hitch(this,p),K.hitch(this,a)):(this._uploadProgressBar.reset(),this._uploadProgressBar.show(),this.itemAPI.update.call(this.itemAPI,v,this._updateItemForm,this._updateItemFile.files[0]).then(function(q){this._uploadProgressBar.hide();p(q)}.bind(this),a.bind(this)));return r},_updateItemResource:function(v,r){var f=this.util.getUser(),
c=v.folderId||v.ownerFolder;f={url:esriGeowConfig.restBaseUrl+"content/users/"+(v.owner||f.username)+"/"+(c?c+"/":"")+"/items/"+v.id+"/updateResources",form:r,content:{resourcesPrefix:"styles",filename:"root.json"}};K.query("input",r).forEach(K.hitch(this,function(a){a&&"file"!==a.name&&K.attr(a,"name","")}));return this.util.request(f,{usePost:!0}).then(K.hitch(this,function(a){return a}),K.hitch(this,function(a){throw{message:this.i18n.error.invalidStyleFile};}))},_checkStatus:function(v,r,f){this.util.request({url:esriGeowConfig.restBaseUrl+
"content/users/"+v.owner+(v.ownerFolder&&"/"!==v.ownerFolder?"/"+v.ownerFolder:"")+"/items/"+v.id+"/status"}).then(K.hitch(this,function(c){c=c||{status:"failed"};"completed"===c.status?f(v):(r=(r||500)+250,setTimeout(K.hitch(this,function(){this._checkStatus(v,r,f)}),r))}))},_disable:function(v){this._updateItemBtn.set("disabled",v);this._cancelBtn.set("disabled",v);this.domUtil.showHide(this._waitingSpan,v);K.style(this._waitingSpan,"display",v?"inline-block":"none")}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/sniff","./TextBox"],function(K,G,w,v){return K("dijit.form.SimpleTextarea",v,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);w("ie")&&this.cols&&
G.add(this.textbox,"dijitTextAreaCols")},filter:function(r){r&&(r=r.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(r){if(this.maxLength){var f=parseInt(this.maxLength),c=this.textbox.value.replace(/\r/g,"");f=c.length-f;if(0<f){var a=this.textbox;if(a.selectionStart){var b=a.selectionStart,p=0;w("opera")&&(p=(this.textbox.value.substring(0,b).match(/\r/g)||[]).length);this.textbox.value=c.substring(0,b-f-p)+c.substring(b-p);a.setSelectionRange(b-f,b-f)}else this.ownerDocument.selection&&
(a.focus(),c=this.ownerDocument.selection.createRange(),c.moveStart("character",-f),c.text="",c.select())}}this.inherited(arguments)}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C){d=v("dijit._InlineEditor",[e,d,g],{templateString:C,contextRequire:K,postMixInProperties:function(){this.inherited(arguments);this.messages=b.getLocalization("dijit","common",this.lang);G.forEach(["buttonSave","buttonCancel"],function(z){this[z]||(this[z]=this.messages[z])},this)},buildRendering:function(){this.inherited(arguments);var z="string"==typeof this.editor?t.getObject(this.editor)||K(this.editor):this.editor,D=this.sourceStyle,
E="line-height:"+D.lineHeight+";",A=a.getComputedStyle(this.domNode);G.forEach(["Weight","Family","Size","Style"],function(H){A["font"+H]!=D["font"+H]&&(E+="font-"+H+":"+D["font"+H]+";")},this);G.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(H){this.domNode.style[H]=D[H]},this);var F=this.inlineEditBox.width;"100%"==F?(E+="width:100%;",this.domNode.style.display="block"):E+="width:"+(F+(Number(F)==F?"px":""))+";";F=t.delegate(this.inlineEditBox.editorParams,
{style:E,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new z(F,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,c.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var z=this.editWidget;this.inlineEditBox.autoSave?this.own(w.after(z,"onChange",t.hitch(this,"_onChange"),!0),m(z,"keydown",t.hitch(this,"_onKeyDown"))):"intermediateChanges"in z&&(z.set("intermediateChanges",
!0),this.own(w.after(z,"onChange",t.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var z=this.editWidget;return String(z.get("displayedValue"in z||"_getDisplayedValueAttr"in z?"displayedValue":
"value"))},_onKeyDown:function(z){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!z.altKey&&!z.ctrlKey&&(z.keyCode==q.ESCAPE?(z.stopPropagation(),z.preventDefault(),this.cancel(!0)):z.keyCode==q.ENTER&&"INPUT"==z.target.tagName&&(z.stopPropagation(),z.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&h.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(h._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){y.selectInputText(this.editWidget.focusNode)}))}});e=v("dijit.InlineEditBox"+(n("dojo-bidi")?"_NoBidi":""),e,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:B,editorWrapper:d,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=n("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(m(this.displayNode,l,t.hitch(this,"_onClick")),m(this.displayNode,"mouseover, focus",t.hitch(this,"_onMouseOver")),m(this.displayNode,"mouseout, blur",t.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=t.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);f.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(z){p.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",z)},_setDisabledAttr:function(z){this.domNode.setAttribute("aria-disabled",z?"true":"false");z?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);f.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",z);this._set("disabled",z)},_onMouseOver:function(){this.disabled||f.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){f.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(z){this.disabled||(z&&(z.stopPropagation(),z.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
r.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var z=c.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?t.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:a.getComputedStyle(this.displayNode),save:t.hitch(this,"save"),cancel:t.hitch(this,"cancel"),
textDir:this.textDir},z);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var D=this.wrapperWidget;f.add(this.displayNode,"dijitOffScreen");f.remove(D.domNode,"dijitOffScreen");a.set(D.domNode,{visibility:"visible"});r.set(this.displayNode,"tabIndex","-1");var E=D.editWidget,A=this;k(E.onLoadDeferred,t.hitch(D,function(){E.set("displayedValue"in E||"_setDisplayedValueAttr"in E?"displayedValue":"value",A.value);this.defer(function(){D.saveButton&&D.saveButton.set("disabled",
"intermediateChanges"in E);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(z){var D=this.wrapperWidget;a.set(D.domNode,{visibility:"hidden"});f.add(D.domNode,"dijitOffScreen");f.remove(this.displayNode,"dijitOffScreen");r.set(this.displayNode,"tabIndex",this._savedTabIndex);z&&
h.focus(this.displayNode)},save:function(z){if(!this.disabled&&this.editing){this._set("editing",!1);var D=this.wrapperWidget.getValue();this.set("value",D);this._showText(z)}},setValue:function(z){p.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",z)},_setValueAttr:function(z){z=t.trim(z);var D=this.renderAsHtml?z:z.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":D||this.noValueIndicator;this._set("value",z);this._started&&this.defer(function(){this.onChange(z)})},getValue:function(){p.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(z){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(z))}});n("dojo-bidi")&&(e=v("dijit.InlineEditBox",
e,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));e._InlineEditor=d;return e})},"arcgisonline/pages/dijit/UploadProgressBar":function(){define("require exports tslib dojo/topic dojo/text!./UploadProgressBar/UploadProgressBar.html dojo/i18n!../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../utils/dom ../utils/culture ../../tsutils/declareDecorator".split(" "),function(K,G,w,v,r,f,c,a,b,p,q){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);
c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);return function(){function t(m,n){this.templateString=r["default"];this.i18n=f["default"]}t.prototype.startup=function(){this.inherited(arguments);this.own(v["default"].subscribe("item/upload-progress-update",this._onProgressUpdate.bind(this)))};t.prototype.hide=function(){b["default"].hideNode(this.domNode)};t.prototype.show=function(){b["default"].showNode(this.domNode)};t.prototype.reset=
function(){this._uploadPercentLabel.textContent=this._uploadProgressFill.style.width="0%";this._uploadPercentLabel.innerHTML=p["default"].getPercentString(0);this._uploadProgressFill.style.width="0%"};t.prototype._onProgressUpdate=function(m){this._uploadProgressFill.classList[100===m?"add":"remove"]("upload-progress-bar__fill--full");this._uploadPercentLabel.innerHTML=p["default"].getPercentString(m/100);this._uploadProgressFill.style.width=m+"%"};return t=w.__decorate([q["default"](a["default"],
c["default"])],t)}()})},"arcgisonline/pages/utils/culture":function(){define(["require","exports","tslib","dojo/string","dojo/_base/kernel"],function(K,G,w,v,r){v=w.__importDefault(v);r=w.__importDefault(r);return function(){function f(){}f.getString=function(c,a,b){var p,q="id ja ko th vi zh-cn zh-hk zh-tw".split(" "),t="en ca da de el es et fi hi hu it nb nl pt-pt sv tr".split(" "),m=null!==(p=f.getRootLocale(r["default"].locale))&&void 0!==p?p:"en";b?b.number=a:b={number:a};return 1===a||-1<q.indexOf(m)?
v["default"].substitute(c.single,b):1!==a&&-1<t.indexOf(m)?v["default"].substitute(c.multiple,b):v["default"].substitute(c.unknown,b)};f.stripCultureFormat=function(c,a){if((null===c||void 0===c?0:c.length)&&(null===a||void 0===a?0:a.length)){var b=c.indexOf("-"+a);if(-1<b)return c.substring(0,b)}return c};f.getRootLocale=function(c){if(null===c||void 0===c?0:c.length){c=c.split("-")[0];if(null===c||void 0===c?0:c.length)c=c.toLowerCase();return c}return c};f.getLocaleFormat=function(c){if(null===
c||void 0===c?0:c.length)if(c=c.split("-"),1<c.length)return c[1].toLowerCase()};f.getTrialLocale=function(c){var a=["pt-br","pt-pt","zh-cn","zh-hk","zh-tw"];return-1<(null===c||void 0===c?void 0:c.indexOf("-"))&&-1===a.indexOf(c)?this.getRootLocale(c):c};f.getActualCulture=function(c,a){var b,p=null!==(b=null===c||void 0===c?void 0:c.toLowerCase())&&void 0!==b?b:"",q=p.split("-");if(1<q.length){if(b=a.filter(function(t){return t.culture===p}).shift())return p;b=a.filter(function(t){return t.culture===
q[0]}).shift();if(null===b||void 0===b?0:b.cultureFormats){if(b.cultureFormats.filter(function(t){return t.format===q[1]}).shift())return b.culture}else if(b)return b.culture}return c};f.getSelectedFormat=function(c,a){return a.filter(function(b){return b.format===c}).shift()};f.getPercentString=function(c){var a=r["default"].locale.toLowerCase();return"ar"===a?"%"+100*c:c.toLocaleString(a,{style:"percent"})};return f}()})},"arcgisonline/sharing/geow/Item":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/dom-form dojo/topic dojo/promise/all esri/request".split(" "),
function(K,G,w,v,r,f,c,a,b,p){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);return function(){function q(){}q.addItem=function(t,m,n){return q._action(t,m,n,"addItem")};q.update=function(t,m,n){return q._action(t,m,n,"update")};q._action=function(t,m,n,k){if(r["default"].getUser())return k=q._getActionItemUrl(t,k),t=5242880<n.size?q._multiPartAction(k,m,n,t):q._postForm(k,m)};q._multiPartAction=
function(t,m,n,k){var l=new f["default"],h=function(u){l.reject(u)},e=function(u){u.isMultipart=!0;l.resolve(u)},d=function(u){q._commitItem(k,m).then(e,h)},g=function(u){q._cancelItem(k);"Request canceled"!==u.message&&h.call(q,u)};q._startMultipartRequest(t,k.fileName?k.fileName:n.name).then(function(u){u.success?(k.id=u.id,q._addItemParts(k,n).then(d,g)):h.call(q,u.error)},h);return l};q._postForm=function(t,m){return r["default"].request({url:t,form:m,timeout:0},{usePost:!0})};q._startMultipartRequest=
function(t,m){return r["default"].request({url:t,content:{multipart:!0,filename:m,async:!0}},{usePost:!0})};q.generatePart=function(t,m){var n,k,l,h,e,d,g,u,x;return w.__generator(this,function(y){switch(y.label){case 0:n=t.name,k=t.size,l=5242880,h=Math.ceil(k/l),e=0,1E4<h&&(l=Math.ceil(k/1E4),h=Math.ceil(k/l)),y.label=1;case 1:if(!(e<h))return[3,3];d=new FormData;g=e*l;u=t.slice(g,g+l);e++;x={partNum:e,size:u.size};d.append("partNum",String(x.partNum));d.append("streamdata","true");d.append("f",
"json");d.append("token",m);d.append("file",u,n);return[4,{partData:x,formData:d}];case 2:return y.sent(),[3,1];case 3:return[2]}})};q._addItemParts=function(t,m){var n=this,k=m.size,l=new f["default"],h={};this.pendingRequests=[];var e=3;a["default"].subscribe("cancel-item-upload",function(){n.pendingRequests.forEach(function(x){x&&!x.isFulfilled()&&x.cancel()})});var d=q.generatePart(m,r["default"].getToken()),g=!0,u=function(){if(g){var x=[];q.uploadError=!1;for(var y=0;y<e;y++){var B=d.next(),
C=B.value;if(B.done){g=!1;break}x.push(C)}b["default"](x.map(function(z){var D=new f["default"];return q._addPartWithRetries(t,z.partData,z.formData,1,k,h,D)})).then(function(){g||l.resolve();e=q.uploadError?Math.ceil(e/2):Math.min(++e,10);u()},function(z){g=!1;l.reject(z)})}};u();return l};q._addPartWithRetries=function(t,m,n,k,l,h,e){var d=q._getActionItemUrl(t,"addPart");d=p["default"]({url:d,form:n,timeout:0},{returnProgress:!0,disableIdentityLookup:!0}).then(function(g){g.success?e.resolve(g):
e.reject(g.error)},function(g){k++;q.uploadError=!0;"Request canceled"!==g.message&&7>=k?q._addPartWithRetries(t,m,n,k,l,h,e):e.reject(g)},function(g){g.loaded&&"upload"===g.transferType&&(h[m.partNum.toString()]=g.loaded,g=Object.keys(h).reduce(function(u,x){return u+h[x]},0),a["default"].publish("item/upload-progress-update",Math.floor(g/l*100)))});q.pendingRequests.push(d);return e};q._commitItem=function(t,m){var n=q._getActionItemUrl(t,"commit");var k=m instanceof FormData?{title:t.fileName,
type:t.fileType}:w.__assign({},c["default"].toObject(m));return r["default"].request({url:n,content:k},{usePost:!0})};q._cancelItem=function(t){t=q._getActionItemUrl(t,"cancel");return r["default"].request({url:t},{usePost:!0})};q._getUserUrl=function(t){var m=r["default"].getUser();m=m.username||m.email;return v["default"].restBaseUrl+"content/users/"+(t.owner||m)};q._getActionItemUrl=function(t,m){var n=this._getUserUrl(t);t.folderId&&(n=n+"/"+t.folderId);return n="addItem"===m?n+"/addItem":n+"/items/"+
t.id+"/"+m};q.uploadError=!1;return q}()})},"arcgisonline/sharing/dijit/dialog/TagsDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/Dialog,dijit/form/MultiSelect,dijit/form/SimpleTextarea,arcgisonline/sharing/geow/Content"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.TagsDlg");K.require("dijit._Widget");K.require("dijit._Templated");K.require("dijit.Dialog");K.require("dijit.form.MultiSelect");K.require("dijit.form.SimpleTextarea");
K.require("arcgisonline.sharing.geow.Content");K.declare("arcgisonline.sharing.dijit.dialog.TagsDlg",[G._Widget,G._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" dojoAttachPoint\x3d"_tagsDialog" dojoAttachPoint\x3d"onHide:clear" title\x3d"${i18n.tagDlgTitle}" class\x3d"tagsForm"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"_tagsErrorDiv"\x3e\x3c/div\x3e\r\n\t\x3cdiv dojoAttachPoint\x3d"_contentTagsDiv" style\x3d"display:block;"\x3e\r\n\t\t\x3clabel \x3e${i18n.selectTag}\x3c/label\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\t\x3cbr /\x3e\r\n\t    \x3cselect dojoAttachPoint\x3d"_tagsSelect" dojoType\x3d"dijit.form.MultiSelect" style\x3d"width:100%;height:150px;"\x3e\x3c/select\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\t\x3cdiv dojoAttachPoint\x3d"_cancelBtn" dojotype\x3d"dijit.form.Button" class\x3d"cancel" dojoAttachEvent\x3d"onClick:_handleCancelClick" style\x3d"float:right;"\x3e${i18n.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv dojoAttachPoint\x3d"_submitBtn" dojotype\x3d"dijit.form.Button" class\x3d"primary" type\x3d"submit" dojoAttachEvent\x3d"onClick:getSelectedTags" style\x3d"float:right;"\x3e${i18n.useSelected}\x3c/div\x3e  \r\n\t\t\x3cbr /\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv dojoAttachPoint\x3d"_contentNoTagsDiv" style\x3d"display:none;"\x3e\r\n\t\t\x3clabel\x3e${i18n.tagsNotAvailable}\x3c/label\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\t\x3cdiv id\x3d"button_tags-ok" dojoAttachPoint\x3d"_okBtn" dojotype\x3d"dijit.form.Button" class\x3d"primary" dojoAttachEvent\x3d"onClick:_handleCancelClick" style\x3d"float:right;"\x3e${i18n.ok}\x3c/div\x3e\r\n\t\t\x3cbr/\x3e\r\n\t\t\x3cbr/\x3e\r\n\t\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
_tagsDialog:null,_contentTagsDiv:null,_contentNoTagsDiv:null,_tagsSelect:null,i18n:null,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.TagsDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common;K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").tagsDlg)},postCreate:function(){},_handleCancelClick:function(v){v.preventDefault();
this._tagsDialog.hide()},clear:function(){this._tagsSelect.reset();K.style(this._contentTagsDiv,"display","none");K.style(this._contentNoTagsDiv,"display","none")},hide:function(){this._tagsDialog.hide()},show:function(v){this.clear();var r=arcgisonline.sharing.util.getUser(),f=esriGeowConfig.restBaseUrl+"community/users/";f=v&&(v.username||v.email)?f+(v.username?v.username:v.email):f+r.username;arcgisonline.sharing.util.getJson(f+"/tags",K.hitch(this,this._handleTagResponse),K.hitch(this,this._handleError));
this._tagsDialog.show()},_handleTagResponse:function(v){0==v.tags.length?K.style(this._contentNoTagsDiv,"display",""):(K.style(this._contentTagsDiv,"display",""),K.empty(this._tagsSelect.domNode),K.forEach(v.tags,function(r){K.create("option",{innerHTML:r.tag,value:r.tag},this._tagsSelect.domNode)},this))},_handleError:function(v){},getSelectedTags:function(v){v.preventDefault();v=[];v=this._tagsSelect.get("value");K.publish("onSelectedTagsUpdate",[v.toString()])}})})},"dijit/form/MultiSelect":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/sniff dojo/query ./_FormValueWidget dojo/NodeList-dom".split(" "),
function(K,G,w,v,r,f){f=G("dijit.form.MultiSelect"+(v("dojo-bidi")?"_NoBidi":""),f,{size:7,baseClass:"dijitMultiSelect",templateString:"\x3cselect multiple\x3d'multiple' ${!nameAttrSetting} data-dojo-attach-point\x3d'containerNode,focusNode' data-dojo-attach-event\x3d'onchange: _onChange'\x3e\x3c/select\x3e",addSelected:function(c){c.getSelected().forEach(function(a){this.containerNode.appendChild(a);this.domNode.scrollTop=this.domNode.offsetHeight;a=c.domNode.scrollTop;c.domNode.scrollTop=0;c.domNode.scrollTop=
a},this);this._set("value",this.get("value"))},getSelected:function(){return r("option",this.containerNode).filter(function(c){return c.selected})},_getValueAttr:function(){return K.map(this.getSelected(),function(c){return c.value})},multiple:!0,_setMultipleAttr:function(c){},_setValueAttr:function(c){v("android")?r("option",this.containerNode).orphan().forEach(function(a){var b=a.ownerDocument.createElement("option");b.value=a.value;b.selected=-1!=K.indexOf(c,a.value);b.text=a.text;b.originalText=
a.originalText;this.containerNode.appendChild(b)},this):r("option",this.containerNode).forEach(function(a){a.selected=-1!=K.indexOf(c,a.value)});this.inherited(arguments)},invertSelection:function(c){var a=[];r("option",this.containerNode).forEach(function(b){b.selected||a.push(b.value)});this._setValueAttr(a,!(!1===c||null==c))},_onChange:function(){this._handleOnChange(this.get("value"),!0)},resize:function(c){c&&w.setMarginBox(this.domNode,c)},postCreate:function(){this._set("value",this.get("value"));
this.inherited(arguments)}});v("dojo-bidi")&&(f=G("dijit.form.MultiSelect",f,{addSelected:function(c){c.getSelected().forEach(function(a){a.text=this.enforceTextDirWithUcc(this.restoreOriginalText(a),a.text)},this);this.inherited(arguments)},_setTextDirAttr:function(c){this.textDir==c&&this._created||!this.enforceTextDirWithUcc||(this._set("textDir",c),r("option",this.containerNode).forEach(function(a){this._created||a.value!==a.text||(a.value=a.text);a.text=this.enforceTextDirWithUcc(a,a.originalText||
a.text)},this))}}));return f})},"arcgisonline/sharing/dijit/dialog/PublishTileServiceDlg":function(){define("dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/string dojo/_base/window dojo/promise/all dojo/when dojo/Deferred dojo/_base/array dojo/cookie dojo/dom-class dojo/json dijit/registry dijit/form/CheckBox dijit/form/TextBox dijit/form/RadioButton dijit/form/Select ./ConfirmDialog dijit/focus dojo/_base/event dojo/keys ./_CreateItemUtilMixin ./ItemPropertiesDlg dojo/topic esri/IdentityManager esri/lang esri/Evented esri/arcgis/Portal ../../geow/Account ./_PublishTileServiceDlgMixin ../../../esriGeowConfig ../../util ../../../pages/pageUtil ../../../pages/utils/dom ../../../pages/serviceUtil ../../../pages/statusUtil ../../../map/core/canUseForPublish esri/map esri/tasks/Geoprocessor esri/dijit/VisibleScaleRangeSlider ../../../pages/isGeographic preact ../../../pages/components/SelectLayerProperties dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/PublishTilesDlg.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea){return K("arcgisonline.sharing.dijit.dialog.PublishTilesDlg2",[a,b,p,V,O],{baseClass:"esriPublishTilesDlg",showFolders:!1,_typeInfo:"mapserver",userFolders:"",templateString:ea,onDone:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=c.mixin({},aa);this._portalUser=(this._portal=ba.portal)&&this._portal.getPortalUser();switch(this.type){case "tiles":this._typeInfo=
"mapserver";break;case "scenes":this._typeInfo="sceneserver";break;case "features":this._typeInfo="featureserver";break;case "vectorTiles":this._typeInfo="vectortileserver";break;case "tiledImagery":case "dynamicImagery":this._typeInfo="imageserver";break;default:this._typeInfo=this.type}},postCreate:function(){this.inherited(arguments);fa.getSelf(c.hitch(this,function(Y){this._loadConnections();this._portal?this._init():(this._portal=new P.Portal({url:ba.restBaseUrl,self:Y}),this._portal.on("load",
c.hitch(this,function(){this._connect&&this._connect.remove();this._portalUser=this._portal.getPortalUser();this._init()})))}))},_init:function(){this._restBaseUrl=ba.allSSL?this._portal.portalUrl.replace("http:/","https:/"):this._portal.portalUrl;this._contentUrl=this._restBaseUrl+"content";this._publishUrl=this._contentUrl+"/users/"+this._portalUser.username;this.set("message",this.get("message"));this._portal&&!this._portal.isPortal&&(this.cacheStorageInfo.storageFormat="esriMapCacheStorageModeExploded");
this._itemPropertiesDlg.on("load",c.hitch(this,function(){this._loadData().then(c.hitch(this,function(Y){this._itemPropertiesDlg.set("focus","title");"sceneserver"===this._typeInfo&&this._itemPropertiesDlg._title.set("disabled",!0);ba.self.hasCategorySchema&&(Y=[],this.fsItem?Y=this.fsItem.categories||Y:this._selectedService&&(Y=this._selectedService.categories||Y),this._itemPropertiesDlg.set("categories",Y))}))}))},destroy:function(){v(".dijit",this.contentNode).map(u.byNode).forEach(function(Y){Y.destroyRecursive?
Y.destroyRecursive():Y.destroy&&Y.destroy();Y=null});this._errorDlg&&(this._errorDlg.destroyRecursive(),this._errorDlg=null);this.inherited(arguments);this._tagsDijit=this._portalUser=this._portal=null},_loadConnections:function(){this.own(I.subscribe("dlg/onOk",c.hitch(this,function(){this._focusNode&&setTimeout(c.hitch(this,function(){D.focus(this._focusNode)}),250)})),I.subscribe("/esri/disable",c.hitch(this,function(Y,T){this.set("disabled",Y,T,!0)})),G(this._agoBasemapRadio,"click",c.hitch(this,
function(){this._isUserDefinedTileInfo=!1;this._customBasemapUrl.set("disabled",!0);this._updateLODs(this.lods)})),G(this._customBasemapRadio,"click",c.hitch(this,function(){v(".visibleScaleRange",this.domNode).addClass("hide");this._isUserDefinedTileInfo=!0;this._customBasemapUrl.set("disabled",!1);this.userDefinedTileInfo&&this._updateLODs(this.userDefinedTileInfo.lods)})),G(this._customBasemapUrl,"keyup",c.hitch(this,function(Y){Y.keyCode===A.ENTER&&(E.stop(Y),this._customBasemapUrl.onChange(this._customBasemapUrl.get("value")))})),
G(this._customBasemapUrl,"change",c.hitch(this,function(Y){Y&&Y.length?(this._customBasemapUrl.set("disabled",!0),this.set("disabled",!0,this.i18n.publishWizard.fetchingServiceInfo),this._fetchTileLayerInfo(Y,this._type).then(c.hitch(this,function(T){this.userDefinedTileInfoUrl=Y;this.userDefinedTileInfo=T;this._updateLODs(T.lods);this._customBasemapUrl.set("disabled",!1);this.set("disabled",this._buildingVisibleRange)}),c.hitch(this,function(T){this.userDefinedTileInfo=null;this._showError(T)}))):
(this.userDefinedTileInfo=null,v(".visibleScaleRange",this.domNode).addClass("hide"))})),G(this._tilesOnDemand,"click",c.hitch(this,"_visibleScaleRangeChange")),G(this._selectAttributesContainer,"click",this._selectAttributesClick.bind(this)))},_selectAttributesClick:function(){var Y=this.fsItem&&this.fsItem.layers||this._selectedServiceLayers,T=this.vtLayerProperties||this.fsItem&&this.fsItem.adminServiceInfo&&this.fsItem.adminServiceInfo.layerProperties||[],ca=q.create("div",null,document.body,
"last");N.render(N.h(X["default"],{layers:Y,layerProperties:T,className:"normalize-modal",onCancel:function(){this._selectAttributesBtn.focus();N.render(null,ca)}.bind(this),onSubmit:function(M){this.vtLayerProperties=M;this.vectorTilePublishParams=c.mixin(this.vectorTilePublishParams||{},{layerProperties:M});this._selectAttributesBtn.focus();N.render(null,ca)}.bind(this)}),ca);ca.firstChild.classList.add("bring-modal-to-front")},_updateLODs:function(Y){(Y=Y||this.lods)&&this.set("calculatedScales",
this._calculateConstraints({layers:[{minScale:Y[0].scale,maxScale:Y[Y.length-1].scale}]}))},_adjustDefaultLODs:function(Y){var T=Y.maxScale||0,ca=Y.minScale||this.lods[0].scale;this.lods=h.filter(this.lods,function(M){return M.scale>=T&&M.scale<=ca});return this._updateLODs(this.lods)},_getLayers:function(Y){return Y&&Y.length?h.map(Y,function(T){T.layerDefinition&&(T=c.mixin(T,T.layerDefinition),delete T.layerDefinition);return T}):null},_getLayerDefs:function(Y){return Y&&Y.length?h.filter(Y,function(T){return T.layerDefinition}).map(function(T){return{id:T.id,
layerDefinition:T.layerDefinition}}):null},_loadData:function(){if("imageserver"===this._typeInfo)return this._loadImageData();var Y=new l;"wfs"!==this._type&&"ogcfeatures"!==this._type&&this.fsItem?(this.set("disabled",!0,this.i18n.publishWizard.fetchingServiceInfo),this._selectedService=c.mixin({},this.fsItem),this._fetchFSInfo(this._selectedService).then(c.hitch(this,function(T){this._featureServiceJson=T.serviceInfo;this._selectedLayers=(this._selectedService.itemData=T.itemData)&&T.itemData.layers;
this._spatialReference=this._featureServiceJson&&this._featureServiceJson.spatialReference||{wkid:4326};"scenes"!==this._type||S(this._spatialReference)||(this._spatialReference.wkid?v(".sceneProperties .sceneDataDisplay",this.domNode).removeClass("hide"):(v(".sceneProperties .sceneDataDisplay",this.domNode).addClass("hide"),this._globalWkidRadio.set("checked",!0)));this._itemPropertiesDlg.set("summary",this._selectedService.snippet||"");this._itemPropertiesDlg.set("tags",this._selectedService.tags);
this._itemPropertiesDlg.set("title",this._getSuggestedTitle(this.item,this._selectedService.title));this._userFolders&&this._itemPropertiesDlg.set("folders",this._userFolders);w.set(this._globalWkidRadioLabel,"innerHTML",t.substitute(this.i18n.publishTileServiceDlg.globalWkid,{wkid:"4326"}));w.set(this._localWkidRadioLabel,"innerHTML",t.substitute(this.i18n.publishTileServiceDlg.localWkid,{wkid:""+this._spatialReference.wkid||4326}));this._selectedServiceLayers=T.layers&&T.layers.layers;this.set("calculatedScales",
this._calculateConstraints(T.layers));"tiles"===this._type&&this._checkTilesOnDemandSupport(T.layers);this.set("disabled",this._buildingVisibleRange);this.fsItem.isMultipatchFeatureService&&(v(".sceneProperties .sceneMultipatch",this.domNode).removeClass("hide"),T=this._featureServiceJson&&-1<this._featureServiceJson.capabilities.indexOf("ChangeTracking"),this._enableSceneUpdates.set("disabled",T));"vectorTiles"===this._type&&this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",
!0);Y.resolve(this._selectedService)}),c.hitch(this,function(T){this._showError(T);Y.reject(T)}))):(this.fsItem&&(this._itemPropertiesDlg.set("summary",this.fsItem.snippet||""),this._itemPropertiesDlg.set("tags",this.fsItem.tags),this._itemPropertiesDlg.set("title",this._getSuggestedTitle(this.item,this.fsItem.title)),this._userFolders&&this._itemPropertiesDlg.set("folders",this._userFolders)),Y.resolve(this.fsItem));return Y},_loadImageData:function(){var Y=new l;this.fsItem?(this._itemPropertiesDlg.set("summary",
this.fsItem.snippet||""),this._itemPropertiesDlg.set("tags",this.fsItem.tags),this._itemPropertiesDlg.set("title",this._getSuggestedTitle(this.item,this.fsItem.title)),this._userFolders&&this._itemPropertiesDlg.set("folders",this._userFolders),Y.resolve(this.fsItem)):Y.reject(Error("Cannot locate image service item"));return Y},_getSuggestedTitle:function(Y,T){if("features"!==this._type)return T;var ca=Y&&Y.resultData||[],M=this._type.toLowerCase(),U="Feature Service";T=this.sublayer&&this.sublayer.name&&
T+"_"+this.sublayer.name||T;switch(M){case "wfs":U="WFS";break;case "ogcfeatures":U="OGCFeatureService";break;case "scenes":U="Scene Service";break;case "features":U="Feature Service";break;default:U="Feature Service"}ca=h.filter(ca,function(da){return da.type&&da.type===U&&-1<da.title.indexOf(T)});return T+(ca.length?"_"+(ca.length+1):"_1")},_setMessageAttr:{node:"_message",type:"innerHTML"},_getMessageAttr:function(){if(this.message)return this.message;var Y=this._type.toLowerCase(),T=aa.publishTileServiceDlg;
switch(Y){case "wfs":return T.wfsServiceDetailsDesc;case "ogcfeatures":return T.ogcFeatureServiceDetailsDesc;case "scenes":return T.sceneServiceDetailsDesc;case "features":return T.viewServiceDetailsDesc;case "vectortiles":return T.vectorServiceDetailsDesc;default:return T.serviceDetailsDesc}},_setTypeAttr:function(Y){this._type=Y;"tiles"===Y?v(".tileProperties",this.domNode).removeClass("hide"):"vectorTiles"===Y?(v(".vectorTileProperties",this.domNode).removeClass("hide"),ma.showNode(this._tilePropertiesContainer),
ma.hideNode(this._tilesOnDemandContainer),this._customBasemapUrl.set("placeholder",this._customBasemapUrl.get("placeholder").replace("/MapServer","/VectorTileServer"))):"scenes"===Y?v(".sceneProperties",this.domNode).removeClass("hide"):"features"===Y&&(Y=(this.fsItem&&this.fsItem.layers||this._selectedServiceLayers||[]).some(function(T,ca){return T&&T.id!==ca}))&&(this._preserveIds.set("checked",Y),v(".viewProperties",this.domNode).removeClass("hide"))},_checkTilesOnDemandSupport:function(Y){var T=
!1;ba.tilesOnDemandEnabled&&Y&&Y.layers&&(T=!h.some(Y.layers,function(ca){return!1===W(ca,!1)}));d[T?"remove":"add"](this._tilesOnDemandContainer,"hide");this._tilesOnDemand.set("checked",T)},_enableChangeTrackingOnSource:function(){var Y=new l,T=this.fsItem,ca=T.isMultipatchFeatureService,M=this._featureServiceJson,U=M&&M.capabilities||"";M=0<U.indexOf("ChangeTracking");T=T.adminUrl+"/updateDefinition";U={capabilities:M?U:U+",ChangeTracking"};ca&&!M&&this._enableSceneUpdates.checked?ka.request({url:T,
content:{async:!0,updateDefinition:JSON.stringify(U)}},{usePost:!0}).then(function(da){da.statusURL?Z.checkAsyncJobStatus(da.statusURL).then(function(){Y.resolve(!0)},function(){Y.resolve(!0)}):Y.resolve(!0)}):Y.resolve(!0);return Y},_getBusyMessageAttr:function(){var Y=this._type.toLowerCase(),T=aa.publishTileServiceDlg;switch(Y){case "wfs":return T.publishingWfsService;case "ogcfeatures":return T.publishingOGCFeatureService;case "scenes":return T.publishingSceneService;case "features":return T.publishingViewService;
case "tiledimagery":return aa.connectDataset.publishing;case "dynamicimagery":return aa.connectDataset.publishing;default:return T.publishingTileService}},_setShowFoldersAttr:function(Y){this._showFolders=Y},_setItemAttr:function(Y){if(!this.fsItem||this.fsItem&&Y.url!==this.fsItem.url)this.fsItem=c.mixin({},Y),this._created&&this._loadData().then(c.hitch(this,function(T){this._isUserDefinedTileInfo=!1;this._customBasemapUrl.set("disabled",!0);this._agoBasemapRadio.set("checked",!0);this._itemPropertiesDlg.set("focus",
"title");ba.self.hasCategorySchema&&this._itemPropertiesDlg.set("categories",this.fsItem.categories)}))},_setFoldersAttr:function(Y){var T=this._portalUser&&this._portalUser.username;this._userFolders=Y.map(function(ca){ca&&ca.id===T&&(ca=c.mixin(ca,{id:"/"}));return ca})},_setFocusAttr:function(Y){Y=v(Y,this.domNode);D.focus(Y&&Y.length?Y[0]:this._title.domNode)},_setDisabledAttr:function(Y,T,ca){this.set("readOnly",Y,T,ca)},_setReadOnlyAttr:function(Y,T,ca){v(".dijit",this.domNode).map(u.byNode).forEach(function(M){M.set("disabled",
Y)});v("a",this.domNode)[Y?"addClass":"removeClass"]("disabledLink");v("label",this.domNode)[Y?"addClass":"removeClass"]("disabled");this._itemPropertiesDlg.set("disabled",Y);ca||(Y&&T&&I.publish("/dlg/busyMessage",T),I.publish("/esri/disable",Y,T))},_setCalculatedScalesAttr:function(Y){this._buildingVisibleRange=!0;var T={constraints:Y,minScale:Y.minScale,maxScale:Y.maxScale||18055.954822},ca=this.fsItem&&this.fsItem.url||this._selectedService&&this._selectedService.url,M=this.fsItem&&this.fsItem.layers||
this._selectedServiceLayers,U=c.clone(this.userDefinedTileInfo&&this.userDefinedTileInfo.lods?this.userDefinedTileInfo.lods:this.tileCacheInfo.lods);"tiles"===this.type?(v(".visibleScaleRange",this.domNode).removeClass("hide"),this._visibleScaleRangeSlider&&(this._visibleScaleRangeSlider.destroyRecursive(),q.empty(this._visibleScaleRangeContainer)),this._visibleScaleRangeChangeHandler&&(this._visibleScaleRangeChangeHandler.remove(),this._visibleScaleRangeChangeHandler=void 0),ca?(ma.showNodes([this._visibleRangeLoader,
this._visibleRangeLoaderMsg]),ma.activateNode(this._visibleRangeLoader),n(h.map(M,c.hitch(this,function(da){return ha.getSuggestedScaleRange(ca+"/"+da.id)}))).then(c.hitch(this,function(da){var ja,na,oa;da.forEach(c.hitch(this,function(ra,ua){ra&&(ja=J.isDefined(ja)?ra&&ra.minScale>ja?ra.minScale:ja:ra?ra.minScale:Y.minScale,oa=J.isDefined(oa)?ra&&ra.maxScale&&ra.maxScale<oa?ra.maxScale:oa:ra&&ra.maxScale?ra.maxScale:18055.954822,na=J.isDefined(na)?ra&&ra.minScale&&ra.minScale<na?ra.minScale:na:(ra&&
ra.minScale?ra.minScale:Y.minScale)||this.SCALE_MIN)}));this._maxSupportedMinScale=Y.minScale||this.SCALE_MIN;this._calculatedMinScale=(this._cacheOnDemandMinScale=na||ja)||Y.minScale;T.minScale=this._calculatedMinScale;T.maxScale=oa||T.maxScale;T.minScale>Y.minScale&&0<Y.minScale&&(T.minScale=Y.minScale);T.maxScale>=T.minScale&&0<T.minScale&&(T.maxScale=this._normalizeMaxScale(T.minScale,T.maxScale,U));this._visibleScaleRangeSlider=new R(T,q.create("div",null,this._visibleScaleRangeContainer));this._visibleScaleRangeSlider.startup();
this._visibleScaleRangeChangeHandler=G(this._visibleScaleRangeSlider,"scale-range-change",c.hitch(this,"_visibleScaleRangeChange"));this.own(this._visibleScaleRangeChangeHandler);ma.deactivateNode(this._visibleRangeLoader);ma.hideNodes([this._visibleRangeLoader,this._visibleRangeLoaderMsg]);this._buildingVisibleRange=!1;this.set("disabled",this._buildingVisibleRange);this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0)}),c.hitch(this,function(){this._calculatedMinScale=
Y.minScale;this._visibleScaleRangeSlider=new R(T,q.create("div",null,this._visibleScaleRangeContainer));this._visibleScaleRangeSlider.startup();this._visibleScaleRangeChangeHandler=G(this._visibleScaleRangeSlider,"scale-range-change",c.hitch(this,"_visibleScaleRangeChange"));this.own(this._visibleScaleRangeChangeHandler);ma.deactivateNode(this._visibleRangeLoader);ma.hideNodes([this._visibleRangeLoader,this._visibleRangeLoaderMsg]);this._buildingVisibleRange=!1;this.set("disabled",this._buildingVisibleRange);
this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0)}))):(this._calculatedMinScale=void 0,this._visibleScaleRangeSlider=new R(T,q.create("div",null,this._visibleScaleRangeContainer)),this._visibleScaleRangeSlider.startup(),this._visibleScaleRangeChangeHandler=G(this._visibleScaleRangeSlider,"scale-range-change",c.hitch(this,"_visibleScaleRangeChange")),this.own(this._visibleScaleRangeChangeHandler),ma.deactivateNode(this._visibleRangeLoader),ma.hideNodes([this._visibleRangeLoader,
this._visibleRangeLoaderMsg]),this._buildingVisibleRange=!1,this.set("disabled",this._buildingVisibleRange),this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0))):(this._buildingVisibleRange=!1,this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0))},_visibleScaleRangeChange:function(){var Y=this._tilesOnDemand.get("checked");if(this._calculatedMinScale&&this._visibleScaleRangeSlider&&this._visibleScaleRangeSlider._started){var T=this._visibleScaleRangeSlider.get("minScale");
(0===T&&0!==this._calculatedMinScale||T>this._calculatedMinScale)&&Y?(ma.showNode(this._increaseScaleWarning),this._increaseScaleWarning.scrollIntoView(!1)):ma.hideNode(this._increaseScaleWarning)}else ma.hideNode(this._increaseScaleWarning)},_getItemAttr:function(){return"wfs"===this._type?this.get("wfsItem"):"ogcfeatures"===this._type?this.get("ogcFeatureItem"):"scenes"===this._type?this.get("sceneItem"):"features"===this._type?this.get("viewItem"):"vectorTiles"===this._type?this.get("vectorTileItem"):
this.get("tileItem")},_getOgcFeatureItemAttr:function(){var Y=this._itemPropertiesDlg.get("item"),T={name:Y.title.replace(/ /g,"_")};return{item:Y,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:T,outputType:"OGCFeatureService"},publishParams:T}},_getWfsItemAttr:function(){var Y=this._itemPropertiesDlg.get("item");var T=c.mixin({},{name:Y.title.replace(/ /g,"_"),wfsProperties:{title:Y.title,"abstract":Y.snippet,keyword:Y.tags}});return{item:Y,publishContent:{itemid:this.fsItem.id,
filetype:"featureService",publishParameters:T,outputType:"WFS"},publishParams:T}},_getSceneItemAttr:function(){var Y=this._itemPropertiesDlg.get("item"),T=this._globalWkidRadio.get("checked"),ca=this._featureServiceJson;var M=c.mixin({},{name:Y.title.replace(/ /g,"_")});T||(M=c.mixin(M,{targetSR:ca.spatialReference}));return{item:Y,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:M,outputType:"sceneService",buildInitialCache:!1},publishParams:M}},_getTileItemAttr:function(){var Y=
this._visibleScaleRangeSlider.get("actualMaxScale"),T=this._visibleScaleRangeSlider.get("minScale")||this._maxSupportedMinScale||this.SCALE_MIN,ca=this._isUserDefinedTileInfo?c.clone(this.userDefinedTileInfo):c.clone(this.tileCacheInfo),M=c.clone(this.cacheStorageInfo),U={minScale:T,maxScale:Y},da=this._tilesOnDemand.get("checked");var ja=this._itemPropertiesDlg.get("item");ca.dpi&&!ca.preciseDpi&&(ca.preciseDpi=ca.dpi);for(var na=0;na<ca.lods.length;na++)delete ca.lods[na].label;if(!ca.lods.some(function(ra){return ra.scale<=
T&&ra.scale>=Y},this)){na=ca.lods.filter(function(ra){return ra.scale>=T},this).reverse().shift();var oa=ca.lods.filter(function(ra){return ra.scale<=Y},this).shift();na&&(T=na.scale,U.minScale=T);oa&&(Y=oa.scale,U.maxScale=Y)}ca=c.mixin(U,{name:ja.title.replace(/ /g,"_"),tilingSchema:{tileCacheInfo:ca,tileImageInfo:this.tileImageInfo,cacheStorageInfo:M}});ba.tilesOnDemandEnabled&&(ca.cacheOnDemand=da)&&(ca.cacheOnDemandMinScale=this._cacheOnDemandMinScale,ca.capabilities="Map,ChangeTracking");return{item:ja,
publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:ca,outputType:"tiles",buildInitialCache:!1},publishParams:ca}},_getVectorTileItemAttr:function(){var Y=this._featureServiceJson;Y=Y.layers&&Y.layers.length?Y.layers[0]:{};var T={minScale:Y.minScale||0,maxScale:Y.maxScale||0};Y=this._itemPropertiesDlg.get("item");var ca=this._isUserDefinedTileInfo?c.clone(this.userDefinedTileInfo):void 0;T=c.mixin(T,{name:Y.title.replace(/ /g,"_")},this.vectorTilePublishParams);ca&&(T.tilingSchema.tileCacheInfo=
ca);return{item:Y,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:T,outputType:"vectorTiles",buildInitialCache:!1},publishParams:T}},_getViewItemAttr:function(){var Y=this._itemPropertiesDlg.get("item"),T=this._featureServiceJson,ca=this._preserveIds.get("checked"),M=this._selectedLayers||[],U;T=c.mixin({},{name:Y.title.replace(/ /g,"_"),isView:!0,sourceSchemaChangesAllowed:!0,isUpdatableView:!0,spatialReference:T.spatialReference,initialExtent:T.initialExtent,capabilities:"Query",
preserveLayerIds:ca});this._portal&&this._portal.isPortal&&(U=this._getDataSourceType(this.fsItem))&&U.dataSourceType&&(T=c.mixin(T,{options:U}));ca||M.forEach(function(da,ja){da.id=ja});return{item:Y,createParams:T}},_validate:function(){var Y=new l;this._focusNode=null;var T=this._itemPropertiesDlg._validate();T=T.then(c.hitch(this,"_checkRequired"));T=T.then(c.hitch(this,function(ca){Y.resolve(ca)}),c.hitch(this,function(ca){this._showError(ca);Y.reject(ca)}));return Y},_checkRequired:function(){var Y=
new l;if("tiles"===this._type){if(!this._featureServiceJson)var T=this.i18n.publishWizard.errors.selectedServiceNotExist;this._isUserDefinedTileInfo&&!this.userDefinedTileInfo&&(this._focusNode=v("input",this._customBasemapUrl.domNode)[0],T=this.i18n.publishWizard.errors.customTileBasemapNotSpecified)}"vectorTiles"===this._type&&(this._featureServiceJson||(T=this.i18n.publishWizard.errors.selectedServiceNotExist),this._isUserDefinedTileInfo&&!this.userDefinedTileInfo&&(this._focusNode=v("input",this._customBasemapUrl.domNode)[0],
T=this.i18n.publishWizard.errors.customTileBasemapNotSpecified));if(T)return Y.reject(T),Y;F.serviceNameAvailable(this._itemPropertiesDlg.get("item"),this._portal).then(c.hitch(this,function(ca){ca&&ca.available?Y.resolve(!0):(this._focusNode=v("input",this._itemPropertiesDlg._title.domNode)[0],Y.reject(aa.addItemFrm.errors.serviceNameExists))}));return Y},publishSceneService:function(){return this._enableChangeTrackingOnSource().then(this.publishService.bind(this))},publishImageService:function(Y){var T=
new l,ca=this.fsItem.url,M=c.hitch(this,function(U){this._showError(U);throw Error(U);});L.getCredential(ca).then(function(U){this._createNewImageServiceItem().then(function(da){this._publishImageServiceGP(ca,da,U.token).then(function(ja){T.resolve(ja)},M)}.bind(this),M)}.bind(this),M);return T},publishService:function(){var Y=this.get("item"),T=Y.publishContent,ca=this._tilesOnDemand.get("checked"),M,U="scenes"===this.type,da=new l,ja=new l;F.publishItem(c.mixin(Y,{owner:this.fsItem.owner}),T,this._portal).then(c.hitch(this,
function(na){var oa=na&&na.publishResult?na.publishResult[0]:null;oa&&oa.error?(oa.serviceItemId&&F.deleteItem({id:oa.serviceItemId,folderId:this.fsItem.ownerFolder},this._portal),this._showError(oa.error||aa.addItemFrm.errors.error),da.reject()):(F.checkStatus({id:oa.serviceItemId,jobId:oa.jobId},ja,500,this._portal),ja.then(c.hitch(this,function(ra){F.moveItem({id:ra.id,folderId:this.fsItem.ownerFolder,owner:this.fsItem.owner},Y.item.folderId,this._portal).then(c.hitch(this,function(ua){(M=c.mixin(Y.item,
ua,!U&&this._selectedService&&this._selectedService.itemData?{text:g.stringify(this._selectedService.itemData)}:{}))&&delete M.typeKeywords;F.updateItem(M,this._portal).then(c.hitch(this,function(){this.set("disable",!1);da.resolve({id:oa.serviceItemId,jobId:oa.jobId,cacheOnDemand:ca})}))}))}),c.hitch(this,function(ra){F.deleteItem({id:oa.serviceItemId,folderId:this.fsItem.ownerFolder},this._portal);this._showError(ra)})))}),c.hitch(this,function(na){this._showError(na)}));return da},createViewService:function(){var Y=
this.get("item"),T={createParameters:g.stringify(Y.createParams),outputType:"featureService",isView:!0},ca=this.fsItem&&this.fsItem.serviceInfo||{},M=this.serviceLayers||this.fsItem.layers,U,da,ja=new l;ca=M.map(function(na){U=c.mixin({},na);delete U.fields;delete U.indexes;delete U.relationships;return U}).map(c.hitch(this,this._addAdminLayerInfo,ca));M=h.filter(ca||[],c.hitch(this,function(na){return na&&"Table"===na.type}));ca=h.filter(ca||[],c.hitch(this,function(na){return na&&"Feature Layer"===
na.type}));F.createService(c.mixin(Y,{owner:this.fsItem.owner}),T,g.stringify({layers:ca,tables:M}),this._portal).then(c.hitch(this,function(na){return F.moveItem({id:na&&na.createResult&&na.createResult.itemId,owner:this.fsItem.owner},Y.item.folderId,this._portal)}),c.hitch(this,function(na){this._showError(na);throw Error(na);})).then(c.hitch(this,function(na){this._selectedService&&this._selectedService.itemData&&this._selectedService.itemData.layers&&this.sublayer&&(this._selectedService.itemData.layers=
this._selectedService.itemData.layers.filter(function(oa){return oa.id===this.sublayer.id}.bind(this)),this._selectedService.itemData.layers[0]&&(this._selectedService.itemData.layers[0].id=0));da=c.mixin(Y.item,na,this._selectedService&&this._selectedService.itemData?{text:g.stringify(this._selectedService.itemData)}:{});da=c.mixin(da,{folderId:null});delete da.typeKeywords;delete da.type;delete da.wabType;return F.updateItem(da,this._portal)})).then(c.hitch(this,function(na){ja.resolve(c.mixin({},
da,na))}));return ja},_addAdminLayerInfo:function(Y,T){var ca=/(\/(MapServer|FeatureServer)).*/ig,M=this.fsItem.url;ca=M&&M.replace(ca,"").replace(/^.*\//,"").replace(/\?.*$/,"");return c.mixin(T,{adminLayerInfo:{viewLayerDefinition:{sourceServiceName:ca||T.name,sourceLayerId:T.id,sourceLayerFields:"*"}}})},_getDataSourceType:function(Y){Y=Y&&Y.adminServiceInfo&&Y.adminServiceInfo.adminServiceInfo||{};Y=Y.database&&Y.database.datasource||{};return{dataSourceType:Y.name&&(-1<Y.name.indexOf("/nosqlDatabases")?
"spatiotemporal":-1<Y.name.indexOf("/enterpriseDatabases")?"relational":null)}},showModal:function(Y){var T=new l,ca,M=this._type,U=this.dialog=new z({title:"features"===M?this.i18n.itemProperties.publishViewLayer:this.i18n.publishTileServiceDlg.publishTileDialogTitle,style:{height:"auto"}});U.setContent(this.domNode);U.show();this.own(G(U.okButton,"click",c.hitch(this,function(){I.publish("/esri/disable",!0,this.get("busyMessage"));this._validate().then(c.hitch(this,function(){ca="tiledImagery"===
M||"dynamicImagery"===M?this.publishImageService():"features"!==M?"scenes"===M?this.publishSceneService():this.publishService():this.createViewService();ca.then(c.hitch(this,function(da){U.hide().then(c.hitch(this,function(){T.resolve(da)}))}))}))})),G(U,"hide",c.hitch(this,function(){U.destroyRecursive()})));return T},_createNewImageServiceItem:function(){var Y=new l,T=this._itemPropertiesDlg.get("item"),ca=T.title.replace(/ /g,"_");ca={title:T.title,outputType:"imageService",tags:T.tags,snippet:T.snippet,
createParameters:g.stringify("tiledImagery"===this.type?{name:ca,capabilities:"Image, TilesOnly"}:{name:ca,capabilities:"Image, Metadata, Mensuration",properties:{description:"",isManaged:"true",isCached:"true",colormapToRGB:"false",esriImageServiceSourceType:"esriImageServiceSourceTypeDataset",allowCopy:"true",allowAnalysis:"true",allowFunction:"true"}})};F.createService(c.mixin(T,{owner:this.fsItem.owner}),ca,null,this._portal).then(c.hitch(this,function(M){var U=M&&M.createResult&&M.createResult.itemId;
if(!U)return Y.reject();M.owner=this.fsItem.owner;M.id=U;M.url=M.createResult.serviceUrl;M.folderId=T.folderId;delete M.createResult;F.moveItem({id:U,owner:M.owner},T.folderId,this._portal).then(function(){Y.resolve(M)})}),c.hitch(this,function(M){Y.reject(M)}));return Y},_publishImageServiceGP:function(Y,T,ca){var M=new l,U=!1,da="tiledImagery"===this.type,ja=c.hitch(this,function(ra){if(!U){U=!0;var ua={id:T.id,owner:T.owner,folderId:T.folderId,title:T.title,tags:T.tags,snippet:T.snippet,properties:g.stringify({jobUrl:na+
"/CopyRaster/jobs/"+ra.jobId+"?f\x3djson",jobStatus:"processing",jobId:ra.jobId,jobType:"GPServer"})},wa=c.hitch(this,function(){this.set("disable",!1);M.resolve({id:T.id,jobId:ra.jobId})});F.updateItem(ua,this._portal).then(wa,wa)}}),na=this._portal.helperServices.rasterAnalytics.url,oa=na+"/CopyRaster";Y+=ca?"?token\x3d"+ca:"";da={inputRaster:g.stringify(da?{url:Y}:{tiled_url:Y}),outputName:g.stringify({itemId:T.id})};oa=new ia(oa);oa.setUpdateDelay(5E3);oa.submitJob(da,null,ja);oa.onError=c.hitch(this,
function(ra){F.deleteItem({id:T.id,folderId:T.folderId},this._portal);M.reject(ra)});return M},_showError:function(Y){Y=c.mixin(c.mixin({},aa.publishWizard.errors.error),Y);var T=c.hitch(this,function(){this.set("disabled",!1);this._errorDlg.hide();this._focusNode&&setTimeout(c.hitch(this,function(){D.focus(this._focusNode)}),250)});this._errorDlg=new z({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.own(G(this._errorDlg.closeButtonNode,"click",T));this._errorDlg.show(Y).then(T);
return!1}})})},"arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg":function(){define("esri/lang dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/string dojo/_base/window dojo/promise/all dojo/when dojo/Deferred dojo/_base/array dojo/cookie dojo/dom-class dojo/json dojox/form/Uploader dijit/registry dijit/form/TextBox dijit/form/RadioButton dijit/ConfirmDialog dijit/focus dgrid/OnDemandGrid dgrid/editor dojo/store/Observable dojo/store/Memory esri/dijit/Tags arcgisonline/sharing/dijit/dialog/_AddItemDlgMixin arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin dijit/form/SimpleTextarea dijit/form/Textarea dijit/form/Select dojo/topic esri/Evented esri/arcgis/Portal arcgisonline/pages/portal/PortalItem arcgisonline/esriGeowConfig arcgisonline/pages/pageUtil arcgisonline/pages/utils/categories arcgisonline/pages/utils/dom arcgisonline/pages/dijit/CategoryPicker arcgisonline/sharing/geow/Account arcgisonline/sharing/util arcgisonline/sharing/geow/Folder esri/geometry/Extent esri/SpatialReference ../../../map/core/sameSpatialReference ../../../map/core/projectExtent dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea,Y){return G("arcgisonline.sharing.dijit.dialog.ItemPropertiesDlg",[b,p,q,L,ba],{baseClass:"esriItemPropertiesDlg",templateString:'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\x3cdiv class\x3d"wabdiv"\x3e\x3clabel class\x3d"wab wablbl hide"\x3e\x3cinput class\x3d"wab hide" data-dojo-attach-point\x3d"wab2DRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d\'checked:true,name:"wabtype"\' value\x3d"2d" /\x3e${i18n.addItemFrm.2d}\x3c/label\x3e\x3clabel class\x3d"wab wablbl hide"\x3e\x3cinput class\x3d"wab hide" data-dojo-attach-point\x3d"wab3DRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d\'name:"wabtype"\' value\x3d"3d" /\x3e${i18n.addItemFrm.3d}\x3c/label\x3e\x3c/div\x3e\x3cp data-dojo-attach-point\x3d"_message" class\x3d"trailer-half"\x3e\x3c/p\x3e\x3cform id\x3d"_createForm" data-dojo-attach-point\x3d"_form" enctype\x3d"multipart/form-data" action\x3d"" method\x3d"POST"\x3e\x3clabel for\x3d"uploader" class\x3d"file"\x3e${i18n.addLayerFromFileDlg.fileLabel}\x3c/label\x3e\x3cdiv data-dojo-attach-point\x3d"_files" class\x3d"file" data-dojo-type\x3d"dojox/form/Uploader" data-dojo-props\x3d\'label:"Browse", name:"file", showInput:"before"\'\x3e\x3c/div\x3e\x3cbr class\x3d"file" /\x3e\x3cdiv data-dojo-attach-point\x3d"_zip" class\x3d"zip esriLeadingMargin80 hide"\x3e\x3clabel for\x3d"archiveSelect"\x3e${i18n.addItemFrm.itemContents}\x3c/label\x3e\x3cselect data-dojo-attach-point\x3d"_zipContents" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:25%;"\x3e\x3coption value\x3d"shapefile" selected\x3e${i18n.addItemFrm.typeShapefile}\x3c/option\x3e\x3coption value\x3d"filegeodatabase"\x3e${i18n.addItemFrm.itemFileGeodatabase}\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3clabel for\x3d"${id}-url" class\x3d"url hide trailer-0"\x3e${i18n.publishWizard.urlItemLbl}\x3c/label\x3e\x3cdiv id\x3d"${id}-url" class\x3d"required url trailer-half hide" data-dojo-attach-point\x3d"_url" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'disabled:true, name:"url", trim:true, placeHolder:"${i18n.addLayerFromUrlDlg.enterUrl}"\'\x3e\x3c/div\x3e\x3cbr class\x3d"url hide" /\x3e\x3clabel for\x3d"${id}-title" class\x3d"trailer-0"\x3e${i18n.publishWizard.titleLbl}\x3c/label\x3e\x3cdiv id\x3d"${id}-title" tabindex\x3d"0" class\x3d"required title trailer-half" data-dojo-attach-point\x3d"_title" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'name:"title", trim:true, placeHolder:"${i18n.publishWizard.titlePlaceHolder}"\'\x3e\x3c/div\x3e\x3cbr /\x3e\x3clabel for\x3d"${id}-tags" data-dojo-attach-point\x3d"_tagsDijitLbl" class\x3d"tagsLbl leader-0 trailer-0"\x3e${i18n.publishWizard.tagsLbl}\x3cspan class\x3d"screen-readers-only" id\x3d"tags-required"\x3e${i18n.publishWizard.tagsRequired}\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"position-relative hide js-tags-mask"\x3e\x3cdiv class\x3d"tags-disabled-mask"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}-tags" class\x3d"trailer-half" data-dojo-attach-point\x3d"_tagsDijit" data-dojo-type\x3d"esri/dijit/Tags" data-dojo-props\x3d"name: \'tags\', width:\'100%\', minWidth:\'100%\', maxWidth:\'100%\'"\x3e\x3c/div\x3e\x3cbr /\x3e\x3clabel for\x3d"${id}-summary" class\x3d"trailer-0 leader-half"\x3e${i18n.publishWizard.summaryLbl}\x3c/label\x3e\x3ctextarea id\x3d"${id}-summary" tabindex\x3d"0" class\x3d"required snippet trailer-0" maxlength\x3d"250" data-dojo-attach-point\x3d"_summaryDijit" class\x3d"summaryTextBox dijitPlaceHolder" data-dojo-type\x3d"dijit/form/Textarea" data-dojo-props\x3d\'name:"snippet", trim:true, placeHolder:"${i18n.publishWizard.summaryPlaceHolder}", value: "${i18n.publishWizard.summaryPlaceHolder}"\'\x3e\x3c/textarea\x3e\x3cbr /\x3e\x3cdiv class\x3d"hide categories-container"\x3e\x3clabel class\x3d"trailer-0 leader-half" data-dojo-attach-point\x3d"_categoriesLbl" for\x3d"itemPropCategoryPicker"\x3e${i18n.addItemFrm.categories}${i18n.addItemFrm.colon}\x3c/label\x3e\n\x3cdiv class\x3d"categoriesPickerSection" data-dojo-attach-point\x3d"_categoriesContainer" id\x3d"itemPropCategoryPicker"\x3e\x3c/div\x3e\x3c/div\x3e\x3clabel for\x3d"${id}-folders" data-dojo-attach-point\x3d"_foldersDijitLbl" class\x3d"folderDropdown trailer-0 leader-half hide" style\x3d"clear:both;"\x3e\x3cspan class\x3d"saveFolderLbl"\x3e${i18n.publishWizard.saveFolderLbl}\x3c/span\x3e\x3cselect id\x3d"${id}-folders" tabindex\x3d"0"  class\x3d"folderDropdownSelect folderDropdown hide" data-dojo-attach-point\x3d"_folders" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:77%;" data-dojo-props\x3d\'maxHeight:"200"\'\x3e\x3c/select\x3e\x3c/label\x3e\x3c/form\x3e\x3c/div\x3e',
onOk:function(){},onCancel:function(){},onLoad:function(){},postMixInProperties:function(){this.inherited(arguments);this._errorDlg=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();this.i18n=a.mixin({},Y);this._maxFileSize=1E9;this._analyzeTypes={csv:1};this._type=this.typeInfo;var T=d("ESRI_Content");this._selectedFolderId=(T?u.parse(T):{}).folderId||null;this._portalUser=(this._portal=ma.portal)&&(this._portal.portalUser||this._portal.user||this._portal.getPortalUser())},
postCreate:function(){this.inherited(arguments);g.add(this._summaryDijit.domNode,"dijitPlaceHolder");var T=this._files.displayInput;g.add(T,"placeHolder");v.set(T,"value","Select File");this._tagsDijit&&this._tagsDijit._inputTextBox&&this._tagsDijit._inputTextBox.set&&this._tagsDijit._inputTextBox.set("aria-describedby","tags-required");this._tagsDijitLbl&&this._tagsDijit._inputTextBox&&v.set(this._tagsDijitLbl,"for",this._tagsDijit._inputTextBox.id);ia.getSelf(a.hitch(this,function(ca){this._loadConnections();
this._portal?this._init():(this._portal=new ka.Portal({url:ma.restBaseUrl,self:ca}),this._connect=this._portal.on("load",a.hitch(this,function(M){this._connect.remove();this._portalUser=this._portal.getPortalUser();this._init()})))}))},_init:function(){return k([R.loadUserTags(this._portalUser.username),this._getFolders()]).then(a.hitch(this,function(T){T&&T[0]&&this._tagsDijit.set("knownTags",T[0]);this.item&&this.item.type&&!this.item.declaredClass&&(this.item=new la(a.mixin(this.item,{portal:this._portal})));
this._tagsDijit.set("value",this.item&&this.item.tags||"");this._summaryDijit.set("value",Y.publishWizard.summaryPlaceHolder);this._loadFolders(T[1]&&T[1].folders||[],this._folders);this._supportedType=!this.item||"Web Scene"!==this.item.type&&"Web Map"!==this.item.type?null:this.item.type;this.set("showWAB","wab"!==this._type||this._supportedType?!1:!0);this._supportedType&&this.wab2DRadio.set("checked","Web Map"===this._supportedType);this.onLoad()}))},destroy:function(){r(".dijit",this.contentNode).map(y.byNode).forEach(function(T){T.destroyRecursive?
T.destroyRecursive():T.destroy?T.destroy():T=null});this.inherited(arguments);this._grid&&(this._grid.destroy(),this._grid=null);this._tagsDijit&&(this._tagsDijit.destroyRecursive(),this._tagsDijit=null);this._analyzedFile?J.deleteItem(this._analyzedFile,this._portal).then(a.hitch(this,function(T){this._tagsDijit=this._portalUser=this._portal=this._analyzedFile=null})):this._tagsDijit=this._portalUser=this._portal=null;this._errorDlg&&(this._errorDlg._dialog&&this._errorDlg._dialog.destroyRecursive(),
this._errorDlg.destroyRecursive(),this._errorDlg=null)},startup:function(){this.inherited(arguments);this._initializeCategoryPicker(this.categories||[])},disableTagsAndCategories:function(){this._tagsDijit&&this.domNode.querySelector(".js-tags-mask").classList.remove("hide");this._categories&&this._categories.disable()},enableTagsAndCategories:function(){this._tagsDijit&&this.domNode.querySelector(".js-tags-mask").classList.add("hide");this._categories&&this._categories.enable()},_initializeCategoryPicker:function(T){if(ma.self.hasCategorySchema){var ca=
function(M){this._categories=new Q({categories:T||[],schema:M},t.create("div",null,this._categoriesContainer));this._categories.startup();W.showNodes(r(".categories-container",this.domNode));this._initializingCategoryPicker=!1}.bind(this);this.item&&this.item.portal&&this.item.portal.getCategories&&this.item.portal.getCategories instanceof Function?(this._initializingCategoryPicker=!0,this.item.portal.getCategories().then(ca)):(this._initializingCategoryPicker=!0,R.request({url:ma.restBaseUrl+"portals/self/categorySchema"}).then(function(M){ca(M.categorySchema)}.bind(this)))}},
_getWebMapAuthoringInfo:function(){return{authoringApp:"WebMapViewer",authoringAppVersion:R.isPortal()?"10.6":"6.1",version:"2.11"}},addItem:function(){var T=new h,ca,M;this._validate().then(a.hitch(this,function(){V.publish("/esri/disable",!0,Y.addItemFrm.addingItem);if(this._analyzedFile)ca=this._updateItem().then(a.hitch(this,function(da){return da}));else if("webmap"===this._type)ca=this._fetchBaseMap().then(a.hitch(this,function(da){return M=da})).then(a.hitch(this,"_projectPortalExtent")).then(a.hitch(this,
function(da){var ja=this.get("item");ja.text=M?u.stringify(M):ja.text;ja.extent=da;return J.addItem(ja,this.get("folder"),this._portal)}));else if("dashboard_map"===this._type){var U=this.get("item");U.text=m.substitute(U.text,{mapId:this.item.id});ca=J.addItem(U,this.get("folder"),this._portal)}else ca=J.addItem(this.showFile?this.get("form"):this.get("item"),this.get("folder"),this._portal);ca.then(a.hitch(this,function(da){V.publish("/esri/disable",!1);T.resolve(da)}),a.hitch(this,function(da){V.publish("/esri/disable",
!1);da&&409===da.code&&(da=this.get("item"),da={title:Y.addItemFrm.errors.error.title,message:K.substitute({type:da.type,title:da.title},Y.addItemFrm.errors.itemExists.message)});T.reject(da)}))}),a.hitch(this,function(U){V.publish("/esri/disable",!1);T.reject(U)}));return T},_fetchBaseMap:function(){var T=this._portal&&this._portal.defaultBasemap||null,ca=this._getWebMapAuthoringInfo(),M,U,da,ja=function(){U=e.map(T.baseMapLayers||[],a.hitch(this,function(oa,ra){M=a.clone(oa);M=a.mixin(M,{opacity:1,
layerType:"ArcGISTiledMapServiceLayer",visibility:!0,id:"defaultBasemap_"+ra});da=0===ra?oa.spatialReference||oa.resourceInfo&&oa.resourceInfo.spatialReference:da;delete M.resourceInfo;return M}));return a.mixin({operationalLayers:[],spatialReference:da||this._portal&&this.portal.defaultExtent&&this.portal.defaultExtent.spatialReference,baseMap:a.mixin(T,{baseMapLayers:U})},ca)};if(T&&T.id)var na=ka.PortalUtil.request(this._portal.portalUrl+"content/items/"+T.id+"/data").then(a.hitch(this,function(oa){return oa}),
a.hitch(this,function(oa){return ja()}));else T?(na=new h,na.resolve(ja())):(na=new h,na.resolve());return na},_projectPortalExtent:function(T){var ca=new h;T=this._portal&&this._portal.defaultExtent||null;var M=new N(T),U=new X({wkid:102100});T&&M.spatialReference.wkid!==U.wkid?ea(M,U,a.hitch(this,function(da){da[0]?ca.resolve(J.getPortalDefaultExtentAsGCS({defaultExtent:da[0]})):ca.resolve(J.getPortalDefaultExtentAsGCS(this._portal))})):ca.resolve(J.getPortalDefaultExtentAsGCS(this._portal));return ca},
_extent2String:function(T,ca){ca=ca||4;var M=+T.xmin.toFixed(ca),U=+T.ymin.toFixed(ca),da=+T.xmax.toFixed(ca),ja=+T.ymax.toFixed(ca);return isNaN(M)||isNaN(U)||isNaN(da)||isNaN(ja)?"":M+","+U+","+da+","+ja},_loadConnections:function(){this.own(V.subscribe("/esri/disable",a.hitch(this,function(T){this.set("readOnly",T)})),r(".dijitTextArea",this.contentNode).on("focus",a.hitch(this,function(T){T=this._summaryDijit;T.get("value")===Y.publishWizard.summaryPlaceHolder&&(g.remove(T.domNode,"dijitPlaceHolder"),
T.set("value",""))})),r(".dijitTextArea",this.contentNode).on("blur",a.hitch(this,function(T){T=this._summaryDijit;""===T.get("value")&&(g.add(T.domNode,"dijitPlaceHolder"),T.set("value",Y.publishWizard.summaryPlaceHolder))})),w(this._errorDlg,"hide",a.hitch(this,function(){this._focusNode&&setTimeout(a.hitch(this,function(){D.focus(this._focusNode)}),250)})),w(this._tagsDijitLbl,"click",a.hitch(this,function(T){this._tagsDijit._inputTextBox.focus();r(".select2-choices",this._tagsDijit.domNode).addClass("focus")})),
w(this._tagsDijit.domNode,"focusout",a.hitch(this,function(T){r(".select2-choices",this._tagsDijit.domNode).removeClass("focus")})),w(this._tagsDijit.domNode,"focusin",a.hitch(this,function(T){this._tagsDijit._inputTextBox.focus();r(".select2-choices",this._tagsDijit.domNode).addClass("focus")})),w(this._foldersDijitLbl,"click",a.hitch(this,function(T){this._folders.focus()})))},_setTitleAttr:function(T){return this._title.set("value",T||"")},_getTitleAttr:function(){return this._title.get("value")},
_setShowFileAttr:function(T){T||(r(".file",this.contentNode).style("display","none"),r(".dijitUploader input",this.contentNode).attr("disabled","disabled"),this._files.set("disabled",!0))},_setShowUrlAttr:function(T){T&&(r(".url",this.contentNode).removeClass("hide"),this._url.set("disabled",!1))},_setShowFoldersAttr:function(T){r(".folderDropdown",this.domNode)[T?"removeClass":"addClass"]("hide")},_setFoldersAttr:function(T){this._userFolders=T;this._folders.set("options",e.map(T,"return {label:item.title, value:item.id};"));
this._folders.set("value",this._selectedFolderId||"/")},_setShowWABAttr:function(T){r(".wab",this.domNode)[T?"removeClass":"addClass"]("hide")},_setMessageAttr:{node:"_message",type:"innerHTML"},_setTypeAttr:function(T){v.set(this._type,"value",T)},_setTypeInfoAttr:function(T){this._type=T},_setTagsAttr:function(T){this._tagsDijit.set("value",T||"")},_setCategoriesAttr:function(T){if(ma.self.hasCategorySchema)if(!this._categories||this._initializingCategoryPicker)var ca=setInterval(function(){this._categories&&
!this._initializingCategoryPicker&&(clearInterval(ca),this._categories.setCategories(T||[],!0))}.bind(this),50);else this._categories.setCategories(T||[],!0)},_setSummaryAttr:function(T){g[T?"remove":"add"](this._summaryDijit.domNode,"dijitPlaceHolder");this._summaryDijit.set("value",T||Y.publishWizard.summaryPlaceHolder);this._summaryDijit.resize()},_setBatchGeocodersAttr:function(T){this._geocoders.set("options",T);this._geocoders.set("value",T[0].value,!1);this._batchGeocoders=T;this._selectedGeocoder=
T[0]},_setFocusAttr:function(T){var ca=y.byId(this.id+"-"+T);if(ca)setTimeout(a.hitch(this,function(){ca.focus()}),250);else{var M=r(T,this.domNode);setTimeout(a.hitch(this,function(){D.focus(M&&M.length?M[0]:this._title.domNode)}),250)}},_setDisabledAttr:function(T){this._disable(T)},_setReadOnlyAttr:function(T){r(".dijit",this.domNode).map(y.byNode).forEach(function(ca){ca.set("readOnly",T)});r(".dijitButtonContents",this._files.domNode).forEach(function(ca){v.set(ca,"readonly",T);g[T?"add":"remove"](ca,
"dijitDisabled dijitTextBoxDisabled")});g[T?"add":"remove"](this._tagsDijit.domNode,"dijitDisabled dijitTextBoxDisabled");r("input",this._tagsDijit.domNode).forEach(function(ca){v.set(ca,"readonly",T)});r("a",this.contentNode)[T?"addClass":"removeClass"]("disabledLink");r(".dijitSelect .dijitButtonText",this.contentNode)[T?"addClass":"removeClass"]("dijitTextBoxDisabled");this._folders.set("disabled",T);this._summaryDijit.set("disabled",T);r(".dijitUploader input",this.contentNode).attr("readonly",
"readonly")},_getFormAttr:function(){var T=this._checkThumbnailURL(a.mixin({},this.itemInfo[this._type])),ca=t.create("div",null,this._form);T=a.mixin(T,{tags:this._tagsDijit.get("tags"),snippet:this._summaryDijit.get("value")!==Y.publishWizard.summaryPlaceHolder?this._summaryDijit.get("value"):""});T=this._adjustItemInfo(T);for(var M in T)t.place(t.create("input",{name:M,type:"text",value:T[M],"class":"hide"}),ca);return f.byId("_createForm")},_getItemAttr:function(){var T=this._checkThumbnailURL(a.mixin({},
this.itemInfo[this._type]));T=a.mixin(T,{title:this._title.get("value"),tags:this._tagsDijit.get("tags"),snippet:this._summaryDijit.get("value")!==Y.publishWizard.summaryPlaceHolder?this._summaryDijit.get("value"):"",folderId:this.get("folder"),wabType:"wab"===this._type?this.get("WABType"):null});T=this._adjustItemInfo(T);ma.self.hasCategorySchema&&this._categories&&(T.categories=this._categories.getCategories(!0));this._supportedType&&(T=a.mixin(T,{webmap:this.item.id}));return T},_adjustItemInfo:function(T){var ca=
this._type,M=T.text,U=this._portal&&this._portal.helperServices||[];U=U.defaultElevationLayers?a.clone(U.defaultElevationLayers):[];if(M&&("webscene"===ca||"webscene_portal"===ca)&&U&&U.length){var da=JSON.parse(M);U=U.map(function(ja){ja=a.mixin(ja,{title:ja.title||ja.name||"Elevation",id:ja.id||ja.name||(new Date).getTime()+""});ja.name&&delete ja.name;return ja});da.baseMap.elevationLayers=U;da.ground.layers=U;T.text=JSON.stringify(da)}if("dashboard"===ca||"dashboard_map"===ca)T.typeKeywords="ArcGIS Dashboards",
da=JSON.parse(M||"{}"),da.version=45,T.text=JSON.stringify(da),delete T.thumbnailURL,T.thumbnailUrl="dashboard"===ca?"https://static.arcgis.com/images/dashboards.png":T.thumbnailUrl;return T},_getWABTypeAttr:function(){return this.wab2DRadio.get("checked")?"HTML":"HTML3D"},_getFolderAttr:function(){var T=this._folders.get("value");T=this._portalUser?"/"===T||T===this._portalUser.username?null:T:"/"===T?null:T;return this.showFolders?T:this._selectedFolderId},_getFolders:function(){var T=new h;this._portalUser.getFolders?
this._portalUser.getFolders().then(a.hitch(this,function(ca){T.resolve({folders:ca})}),a.hitch(this,function(ca){T.reject(ca)})):S.getFolders(a.hitch(this,function(ca){T.resolve(ca)}),a.hitch(this,function(ca){T.reject(ca)}),!1);return T},_getFileInfo:function(T){var ca=new h,M=/(?:\.([^.]+))?$/;T=T&&T.length&&T[0]||{};var U=T.name.replace(/^.*(\\|\/|:)/,"");M=U?M.exec(U)[1].toLowerCase():"";var da=U?U.substring(0,U.lastIndexOf(".")):"";this._isValidFileType(M)||ca.reject(Y.addItemFrm.errors.unknownType);
window&&window.FileReader&&T.size>this._maxFileSize&&ca.reject(Y.addItemFrm.errors.fileToLarge);ca.resolve(a.mixin(T,{title:da,fileType:M,origName:U}));return ca},_deleteAnalyzedFile:function(){if(this._analyzedFile)var T=J.deleteItem(this._analyzedFile,this._portal).then(a.hitch(this,function(){this._analyzeResult=this._analyzedFile=null}));else T=new h,T.resolve(!0);return T},_toOptions:function(T,ca){var M=[];ca&&(T=a.mixin({},Y.addItemFrm.notUsed,T));for(var U in T)M.push({label:T[U],value:U});
return M},_addFile:function(){var T=this.get("form");if(T)return T=J.addItem(T,this.get("folder"),this._portal),T.then(a.hitch(this,function(ca){V.publish("/esri/disable",!1);return ca}),a.hitch(this,function(ca){V.publish("/esri/disable",!1);this._showError(ca)}))},_updateItem:function(){var T=this._analyzedFile,ca=this.get("item"),M=!1,U;for(U in ca)T[U]&&T[U]===ca[U]?delete ca[U]:M=!0;M?ca=J.updateItem(a.mixin(ca,{id:T.id,folderId:T.folderId}),this._portal).then(a.hitch(this,function(da){return a.mixin(T,
da)})):(ca=new h,ca.resolve(T));return ca},_getPublishParameters:function(T){var ca=this._geocoder||"none";T=this._getDefaultPublishParameters(T);var M=this._analyzeResult&&this._analyzeResult.publishParameters,U=M&&M.standardizedFieldNames,da=this._grid&&this._grid.store;if(M)if("addressTypes"===ca){var ja=0,na={},oa=U;da.query(function(ua){"unknown"!==ua.locationType&&ua.locationType in oa&&(na[ua.locationType]=ua.name,ja++)});if(1>ja)return{error:this.i18n.errors.noAddressFields};T.publishParameters.locationType=
"address";T.publishParameters.addressFields=na}else if("locationTypes"===ca){var ra={locationType:"coordinates",latitudeFieldName:null,longitudeFieldName:null};oa=a.mixin({},this.i18n.addItemFrm[ca]);da.query(function(ua){"unknown"!==ua.locationType&&ua.locationType in oa&&(ra[ua.locationType+"FieldName"]=ua.name)});if(!ra.latitudeFieldName||!ra.longitudeFieldName)return{error:this.i18n.errors.noLocationFields};a.mixin(T,ra)}else T.publishParameters.locationType="none";return T},_getDefaultPublishParameters:function(T){var ca=
T.type.toLowerCase(),M={itemId:T.id,filetype:ca},U=this._analyzeResult&&this._analyzeResult.publishParameters;"tile package"===ca&&(M.filetype="tilePackage",M.buildInitialCache=!0);M.publishParameters=a.mixin(U||{},{name:T.title.replace(/ /g,"_"),maxRecordCount:2E3});U&&(M.hasStaticData=!0,M.publishParameters.layerInfo=a.mixin(U.layerInfo||{},{capabilities:"Query"}),M.publishParameters.persistErrorRecordsForReview=!0);return M},_analyze:function(){var T={};V.publish("/esri/disable",!0,"Uploading file...");
return this._addFile().then(a.hitch(this,function(ca){V.publish("/esri/disable",!0,"Analyzing file...");this._analyzedFile=ca;this._portal._isPortal||!this._selectedGeocoder.isWorldGeocodeServer?T.geocodeServiceUrl=encodeURI(this._selectedGeocoder):this._selectedGeocoder.isWorldGeocodeServer&&(T.sourceCountry=this._analyzeResult?this._countries.get("value").toLowerCase():"",T.sourceCountryHint=this._analyzeResult?"":this._sourceCountry);return J.analyzeItem(ca,T,this._portal).then(a.hitch(this,function(M){this._analyzeResult=
this._analyzedFile.analyzeResult=M;this._createGrid(M);g.remove(this.geocoding,"hide");V.publish("/esri/disable",!1);return this._analyzedFile}))}))},_validate:function(){var T=new h;var ca=this._checkRequired(this.get("item"));ca=ca.then(a.hitch(this,"_itemExists",this.get("item")));ca=ca.then(a.hitch(this,function(M){T.resolve(M)}),a.hitch(this,function(M){this._focusNode&&D.focus(this._focusNode);T.reject(M)}));return T},_isValidFileType:function(T){var ca=!0;this.showFile&&this.validTypes?(this.validTypes=
this.validTypes instanceof Array?this.validTypes:[this.validTypes],-1===e.indexOf(this.validTypes,T)&&(ca=!1)):this.itemInfo[type.toLowerCase()]||(ca=!1);return ca},_checkThumbnailURL:function(T){this.item&&this.item.thumbnail&&this.item.thumbnailUrl?T.thumbnailUrl=this.item.thumbnailUrl:(T.thumbnailURL&&(T.thumbnailURL=R.getStaticImagesUrl()+T.thumbnailURL),this._portal.isPortal&&T.thumbnailURL&&0!==T.thumbnailURL.indexOf("http")&&(T.thumbnailURL=window.location.protocol+"//"+window.location.host+
T.thumbnailURL));return T},_isEmpty:function(T){return(this.trim?/^\s*$/:/^$/).test(T)},_disable:function(T){this._folders.set("disabled",T);this._summaryDijit.set("disabled",T);!this.showFiles&&T&&r(".dijitUploader input",this.contentNode).attr("disabled","disabled")},_loadFolders:function(T,ca){var M=d("ESRI_Content");M=M?u.parse(M):{};var U=M.folderId||null;this._selectedFolderId=M.folderId||null;(!T||!T.length||T&&T.length&&T[0].title!==this._portalUser.username)&&T.unshift({title:this._portalUser.username,
id:"/"});ca.options=e.map(T,"return {label:item.title, value:item.id};");ca.set("value",U||this._portalUser.username)},_loadCountries:function(T,ca){var M=this._portal.getPortalUser(),U=[];M=(this._portal.region||M.region||portal.ipCntryCode||"world").toLowerCase();M="wo"===M?"world":M;for(var da in T)U.push({label:T[da],value:da.toLowerCase()});U=U.sort(function(ja,na){return ja.label<na.label?-1:ja.label>na.label?1:0});ca.set("options",U);ca.set("value",M,!1);this._sourceCountry=M},_checkRequired:function(){var T=
new h,ca,M;r(".required",this.contentNode).map(y.byNode).every(a.hitch(this,function(U){return!g.contains(U.domNode,"hide")&&this._isEmpty(U.get("value"))?(M=U.domNode||U,this._focusNode=r("input",M)[0],ca=a.mixin({},Y.publishWizard.errors.error,Y.publishWizard.errors.required[U.get("name")]),!1):!0}));ca?T.reject(ca):T.resolve(!0);return T},_itemExists:function(T){var ca=new h,M=this._type in{mapserver:1,featureserver:1,sceneserver:1,wfs:1,ogcFeatures:1,vectortileserver:1,imageserver:1},U="wfs"===
this._type||"ogcFeatures"===this._type,da=U?/[.@#%&*+=\-\\';,\/|\\":<>()\?]/g.test(T.title):M?/[.@#%&*+=\-\\';,\/|\\":<>\?]/g.test(T.title):/[<>]/g.test(T.title),ja=T.title.match(/^\d/)?!0:!1,na=this.itemInfo[T.type.toLowerCase()]?this.itemInfo[T.type.toLowerCase()].type:T.type;this._itemExistsCheck(T).then(function(oa){da||M&&120<T.title.length?(this._focusNode=r("input",this._title.domNode)[0],ca.reject(M?Y.addItemFrm.errors.invalidServiceTitle:Y.addItemFrm.errors.invalidItemTitle)):U&&ja?ca.reject(Y.addItemFrm.errors.invalidCharactersStartsWithNumber):
oa?(this._focusNode=r("input",this._title.domNode)[0],oa=K.substitute({type:na,title:T.title},Y.addItemFrm.errors.itemExists.message),ca.reject({title:Y.addItemFrm.errors.error.title,message:oa})):ca.resolve(!1)}.bind(this));return ca},_itemExistsCheck:function(T){var ca=T.title,M=this.get("folder"),U=this.itemInfo[T.type.toLowerCase()]?this.itemInfo[T.type.toLowerCase()].type:T.type,da=this._portalUser.username,ja=new dojo.Deferred;R.request({url:ma.restBaseUrl+"search",content:{q:'title:"'+ca+'" AND type:"'+
U+'" AND owner:"'+da+'" AND ownerfolder:"'+(M&&"/"!==M?M:"root")+'"',num:1}}).then(dojo.hitch(this,function(na){na&&na.total?ja.resolve(this._isSameTitle(T,na.results.shift())):ja.resolve(!1)}));return ja},_isSameTitle:function(T,ca){return(T&&T.title)===(ca&&ca.title)},_showError:function(T){T.messageCode&&"GWM_0011"===T.messageCode&&(T=a.mixin(T,{message:Y.common.errors.spamContentItemCreate}));T=a.mixin(a.mixin({},Y.publishWizard.errors.error),T);this._errorDlg.show(T);this._disable(!1);return!1}})})},
"dojox/form/Uploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g){return G("dojox.form.Uploader",[k,n,l,h,
e],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:d.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:g,baseClass:"dijitUploader "+n.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},
buildRendering:function(){this.inherited(arguments);c.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();p.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=q.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(u){for(var x=0,y,B=[];y=u[x++];)y&&y.name&&B.push(y.name);
this.displayInput.value=B.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(u){},onBegin:function(u){},onProgress:function(u){},onComplete:function(u){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(u){},upload:function(u){u=u||{};u.uploadType=this.uploadType;this.inherited(arguments)},
submit:function(u){u=u?u.tagName?u:this.getForm():this.getForm();u=t.toObject(u);u.uploadType=this.uploadType;this.upload(u)},reset:function(){delete this._files;this._disconnectButton();v.forEach(this._inputs,q.destroy);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var u=[];this.supports("multiple")?v.forEach(this._files,function(x,y){u.push({index:y,name:x.name,size:x.size,type:x.type})},this):v.forEach(this._inputs,function(x,y){x.value&&u.push({index:y,name:x.value.substring(x.value.lastIndexOf("\\")+
1),size:0,type:x.value.substring(x.value.lastIndexOf(".")+1)})},this);return u},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(u){},_setDisabledAttr:function(u){this.disabled!=u&&this.inputNode&&(this.inherited(arguments),c.set(this.inputNode,"display",u?"none":""))},_getButtonStyle:function(u){this.btnSize={w:c.get(u,"width"),h:c.get(u,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/
15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(c.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var u=this._getFileFieldName();this.focusNode=this.inputNode=q.create("input",{type:"file",name:u,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&this.multiple&&p.set(this.inputNode,
"multiple",!0);this._inputs.push(this.inputNode);c.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(r.connect(this.inputNode,"change",this,function(u){this._files=this.inputNode.files;this.onChange(this.getFileList(u));!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,this._cons.push(r.connect(this.inputNode,
"focus",this,function(){a.add(this.domNode,this.focusedClass)})),this._cons.push(r.connect(this.inputNode,"blur",this,function(){a.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){v.forEach(this._cons,r.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(K,G,w,v,r,f,c,a,b,p){r.add("FormData",function(){return!!window.FormData});r.add("xhr-sendAsBinary",function(){var q=window.XMLHttpRequest&&new window.XMLHttpRequest;return q&&!!q.sendAsBinary});r.add("file-multiple",function(){return!!{"true":1,"false":1}[v.get(document.createElement("input",{type:"file"}),"multiple")]});return f("dojox.form.uploader._Base",[a,b,p],{getForm:function(){if(!this.form)for(var q=this.domNode;q&&q.tagName&&q!==document.body;){if("form"==q.tagName.toLowerCase()){this.form=
q;break}q=q.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(q){c.stop(q);this.submit(this.form)}))},supports:function(q){switch(q){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return r("file-multiple");case "FormData":return r(q);
case "sendAsBinary":return r("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(q){return q.substring(q.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(q){var t=Math.round(q/1024*1E5)/1E5,m=Math.round(q/1048576*1E5)/1E5,n=Math.round(q/1073741824*1E5)/1E5,k=q;1<t&&(k=t.toFixed(1)+" kb");1<m&&(k=m.toFixed(1)+" mb");1<n&&(k=n.toFixed(1)+" gb");return{kb:t,mb:m,gb:n,bytes:q,value:k}}})})},"dojox/form/uploader/_HTML5":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo dojo/request dojo/has".split(" "),
function(K,G,w,v,r,f){return K("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(c){this.upload(c[0])})},_drop:function(c){v.stopEvent(c);this._files=c.dataTransfer.files;this.onChange(this.getFileList())},upload:function(c){this.onBegin(this.getFileList());
this.uploadWithFormData(c)},addDropTarget:function(c,a){a||(this.connect(c,"dragenter",v.stopEvent),this.connect(c,"dragover",v.stopEvent),this.connect(c,"dragleave",v.stopEvent));this.connect(c,"drop","_drop")},uploadWithFormData:function(c){function a(n){t._xhrProgress(n);"load"===n.type&&(t.onComplete(m.response.data),m.response.xhr.removeEventListener("load",a,!1),m.response.xhr.upload.removeEventListener("progress",a,!1),m=null)}if(this.getUrl()){var b=new FormData,p=this._getFileFieldName();
w.forEach(this._files,function(n,k){b.append(p,n)},this);if(c){c.uploadType=this.uploadType;for(var q in c)b.append(q,c[q])}var t=this,m=r(this.getUrl(),{method:"POST",data:b,handleAs:"json",uploadProgress:!0,headers:{Accept:"application/json"}},!0);m.promise.response.otherwise(function(n){t.onError(n)});f("native-xhr2")?(m.response.xhr.addEventListener("load",a,!1),m.response.xhr.upload.addEventListener("progress",a,!1)):m.promise.then(function(n){t.onComplete(n)})}},_xhrProgress:function(c){if(c.lengthComputable){var a=
{bytesLoaded:c.loaded,bytesTotal:c.total,type:c.type,timeStamp:c.timeStamp};"load"==c.type?(a.percent="100%",a.decimal=1):(a.decimal=c.loaded/c.total,a.percent=Math.ceil(c.loaded/c.total*100)+"%");this.onProgress(a)}}})})},"dojox/form/uploader/_IFrame":function(){define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),function(K,G,w,v,r,f,c){return w("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);
"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(a){var b={};this.getForm();var p=this.getUrl(),q=this;a=a||{};a.uploadType=this.uploadType;var t=G.place('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e\x3c/form\x3e',this.domNode);r.forEach(this._inputs,function(m,n){""!==m.value&&(t.appendChild(m),b[m.name]=m.value)},this);if(a)for(nm in a)void 0===b[nm]&&G.create("input",{name:nm,value:a[nm],type:"hidden"},t);c.post(p,{form:t,
handleAs:"json",content:a}).then(function(m){G.destroy(t);if(m.ERROR||m.error)q.onError(m);else q.onComplete(m)},function(m){G.destroy(t);q.onError(m)})}})})},"dojox/form/uploader/_Flash":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(K,G,w,v,r,f,c,a,b,p){return r("dojox.form.uploader._Flash",[],{swfPath:f.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),
preventCache:!0,skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(q){},onLoad:function(q){},onFileChange:function(q){},onFileProgress:function(q){},getFlashFileList:function(){return this._files},
flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(q){this.onBegin(this.getFileList());q=q||{};q.returnType="F";q.uploadType=this.uploadType;this.flashMovie.doUpload(q)},_change:function(q){this._files=this._files.concat(q);b.forEach(q,function(t){t.bytesLoaded=0;t.bytesTotal=t.size;this._fileMap[t.name+"_"+t.size]=t},this);this.onChange(this._files);this.onFileChange(q)},_complete:function(q){this._getCustomEvent().type="load";this.onComplete(q)},
_progress:function(q){this._fileMap[q.name+"_"+q.bytesTotal].bytesLoaded=q.bytesLoaded;var t=this._getCustomEvent();this.onFileProgress(q);this.onProgress(t)},_error:function(q){this.onError(q)},_onFlashBlur:function(q){},_getCustomEvent:function(){var q={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},t;for(t in this._fileMap)q.bytesTotal+=this._fileMap[t].bytesTotal,q.bytesLoaded+=this._fileMap[t].bytesLoaded;q.decimal=q.bytesLoaded/q.bytesTotal;q.percent=Math.ceil(q.bytesLoaded/
q.bytesTotal*100)+"%";return q},_connectFlash:function(){this._subs=[];this._cons=[];var q=a.hitch(this,function(t,m){this._subs.push(c.subscribe(this.id+t,this,m))});q("/filesSelected","_change");q("/filesUploaded","_complete");q("/filesProgress","_progress");q("/filesError","_error");q("/filesCanceled","onCancel");q("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&v.set(this.domNode,"tabIndex",this.tabIndex)},
_createFlashUploader:function(){var q=this.btnSize.w,t=this.btnSize.h;if(q){var m=this.getUrl();if(m&&0>m.toLowerCase().indexOf("http")&&0!=m.indexOf("/")){var n=window.location.href.split("/");n.pop();n=n.join("/")+"/";m=n+m}this.inputNode=w.create("div",{className:"dojoxFlashNode"},this.domNode,"first");G.set(this.inputNode,{position:"absolute",top:"-2px",width:q+"px",height:t+"px",opacity:0});q={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():
""),width:q,height:t,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:m,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new p(q,this.inputNode);this.flashObject.onError=
a.hitch(function(k){});this.flashObject.onReady=a.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=a.hitch(this,function(k){this.flashMovie=k;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),
function(K,G,w,v,r,f,c,a,b){function p(l){l=K.delegate(t,l);if(!("path"in l))return null;"id"in l||(l.id="dojox-embed-flash-"+q++);return l}var q=0,t={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(r("ie")){var m=function(l){l=p(l);if(!l)return null;var h,e=l.path;if(l.vars){var d=[];for(h in l.vars)d.push(encodeURIComponent(h)+"\x3d"+encodeURIComponent(l.vars[h]));l.params.FlashVars=d.join("\x26");delete l.vars}e=
'\x3cobject id\x3d"'+b.escape(String(l.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+b.escape(String(l.width))+'" height\x3d"'+b.escape(String(l.height))+'"'+(l.style?' style\x3d"'+b.escape(String(l.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+b.escape(String(e))+'" /\x3e';if(l.params)for(h in l.params)e+='\x3cparam name\x3d"'+b.escape(h)+'" value\x3d"'+b.escape(String(l.params[h]))+'" /\x3e';return{id:l.id,markup:e+"\x3c/object\x3e"}};var n=function(){for(var l=
10,h=null;!h&&7<l;)try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+l--)}catch(e){}return h?(l=h.GetVariable("$version").split(" ")[1].split(","),{major:null!=l[0]?parseInt(l[0]):0,minor:null!=l[1]?parseInt(l[1]):0,rev:null!=l[2]?parseInt(l[2]):0}):{major:0,minor:0,rev:0}}();G.addOnWindowUnload(function(){var l=function(){};v("object").reverse().style("display","none").forEach(function(h){for(var e in h)if("FlashVars"!=e&&"function"==typeof h[e])try{h[e]=l}catch(d){}})})}else m=function(l){l=
p(l);if(!l)return null;var h,e=l.path;if(l.vars){var d=[];for(h in l.vars)d.push(encodeURIComponent(h)+"\x3d"+encodeURIComponent(l.vars[h]));l.params.flashVars=d.join("\x26");delete l.vars}e='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+b.escape(String(e))+'" id\x3d"'+b.escape(String(l.id))+'" width\x3d"'+b.escape(String(l.width))+'" height\x3d"'+b.escape(String(l.height))+'"'+(l.style?' style\x3d"'+b.escape(String(l.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';
if(l.params)for(h in l.params)e+=" "+b.escape(h)+'\x3d"'+b.escape(String(l.params[h]))+'"';return{id:l.id,markup:e+" /\x3e"}},n=function(){var l=navigator.plugins["Shockwave Flash"];return l&&l.description?(l=l.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=l[0]?parseInt(l[0]):0,minor:null!=l[1]?parseInt(l[1]):0,rev:null!=l[2]?parseInt(l[2]):0}):{major:0,minor:0,rev:0}}();var k=function(l,h){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=n.major;this.minimumVersion=l.minimumVersion||9;this.domNode=this.movie=this.id=null;h&&(h=f.byId(h));setTimeout(K.hitch(this,function(){if(l.expressInstall||this.available&&this.available>=this.minimumVersion)if(l&&h)this.init(l,h);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};K.extend(k,{onReady:function(l){},onLoad:function(l){},onError:function(l){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(l,h){this.destroy();h=f.byId(h||this.domNode);if(!h)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var e=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;k.initialized&&(this.id=k.place(l,h),this.domNode=h,setTimeout(K.hitch(this,
function(){this.movie=this.byId(this.id,l.doc);this.onReady(this.movie);this._poller=setInterval(K.hitch(this,function(){try{e=this.movie.PercentLoaded()}catch(d){}if(100==e)this._onload();else if(0==e&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(l){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var l=K.delegate({id:!0,movie:!0,domNode:!0,
onReady:!0,onLoad:!0}),h;for(h in this)l[h]||delete this[h];this._poller?c(this,"Load",this,"_destroy"):this._destroy()}},byId:function(l,h){h=h||document;return h.embeds[l]?h.embeds[l]:h[l]?h[l]:window[l]?window[l]:document[l]?document[l]:null}});K.mixin(k,{minSupported:8,available:n.major,supported:n.major>=n.required,minimumRequired:n.required,version:n,initialized:!1,onInitialize:function(){k.initialized=!0},__ie_markup__:function(l){return m(l)},proxy:function(l,h){w.forEach(h instanceof Array?
h:[h],function(e){this[e]=K.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+e+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+w.map(arguments,function(d){return __flash__toXML(d)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},l)}});k.place=function(l,h){var e=m(l);h=f.byId(h);h||(h=a.doc.createElement("div"),h.id=e.id+"-container",a.body().appendChild(h));return e?(h.innerHTML=e.markup,e.id):null};k.onInitialize();
K.setObject("dojox.embed.Flash",k);return k})},"dijit/ConfirmDialog":function(){define(["dojo/_base/declare","./Dialog","./_ConfirmDialogMixin"],function(K,G,w){return K("dijit.ConfirmDialog",[G,w],{})})},"dijit/_ConfirmDialogMixin":function(){define(["dojo/_base/declare","./_WidgetsInTemplateMixin","dojo/i18n!./nls/common","dojo/text!./templates/actionBar.html","./form/Button"],function(K,G,w,v){return K("dijit._ConfirmDialogMixin",G,{actionBarTemplate:v,buttonOk:w.buttonOk,_setButtonOkAttr:{node:"okButton",
attribute:"label"},buttonCancel:w.buttonCancel,_setButtonCancelAttr:{node:"cancelButton",attribute:"label"}})})},"esri/dijit/Tags":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/html dojo/keys dojo/on dojo/query dojo/string dojo/store/Memory dijit/focus dijit/form/TextBox dijit/registry dijit/Tooltip dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetBase dgrid/OnDemandGrid dgrid/Selection dgrid/Keyboard ../kernel ../lang dojo/i18n!../nls/jsapi dojo/NodeList-traverse dojo/NodeList-manipulate dojo/_base/sniff".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E){g=G([x,g,u],{declaredClass:"esri.dijit.Tags",templateString:'\x3cdiv class\x3d"${baseClass}"\x3e\x3c/div\x3e',baseClass:"esriTags",_attachmentNode:"",_autocompleteList:"",_grid:"",_store:"",_matchParam:"",_idProperty:"",_gridId:"",_filterId:"",_placeHolder:"",_noDataMsg:"",_maxWidth:"",_minWidth:"",_inputTextBox:"",_gridHasFocus:!1,_metaKeyPressed:!1,_shiftKeyPressed:!1,_CSS_STYLES:{CLASS_SELECTOR:".",ALL_SELECTOR:"\x3e",MULTI:"select2-container select2-container-multi",
CHOICES:"select2-choices",CHOICE:"select2-search-choice",SEARCH_CHOICE_FOCUS:"select2-search-choice-focus",SEARCH_FIELD:"select2-search-field",CLOSE_ICON:"select2-search-choice-close"},values:[],_selRows:[],_CHOICE_SELECTOR:"",_CHOICE_FOCUS:"",_CHOICE_FOCUS_ALL:"",tooltipPosition:[],constructor:function(A){this._idProperty=A.idProperty||"tag";this._maxWidth=A.maxWidth||"auto";this._minWidth=A.minWidth||"auto";this._matchParam=A.matchParam||"first";this.values=[];this._selRows=[];this._CHOICE_ALL_SELECTOR=
this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE+this._CSS_STYLES.ALL_SELECTOR;this._CHOICE_FOCUS=this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.SEARCH_CHOICE_FOCUS;this._CHOICE_FOCUS_ALL=this._CHOICE_FOCUS+this._CSS_STYLES.ALL_SELECTOR},postMixInProperties:function(){this.inherited(arguments);var A=(new Date).getTime();this._tagsId="userTags-"+A;this._gridId="grid-"+A;this._filterId="filter-"+A;this._isIE8=9>b("ie");this.i18n={};w.mixin(this.i18n,E.widgets.tags)},postCreate:function(){if(this._isIE8)this._textTags=
new h({trim:!0,placeHolder:this.i18n.addTags,style:{minWidth:this.minWidth,maxWidth:this.maxWidth}},c.create("div",{id:this._tagsId},this.domNode)),this._textTags.startup(),f.add(this._textTags.domNode,"ie8Style");else{this._attachmentNode=c.create("div",{id:this._tagsId,className:"grid_1"},this.domNode);this._createContainerNode();this._createTagList();this._createDropDownList();this._createInput();var A=w.hitch(this,function(J,O,P){O=this._inputTextBox?this._inputTextBox.get("value")+"":"";if(1>
O.length)return!0;if(!J.tag)return!1;J=(J.tag+"").toLowerCase().match(new RegExp("^"+O.toLowerCase()));return null!==J&&0<J.length?!0:!1}),F=w.hitch(this,function(J,O,P){O=this._inputTextBox?this._inputTextBox.get("value")+"":"";return 1>O.length?!0:J.tag?(J.tag+"").toLowerCase().indexOf(O.toLowerCase())?!0:!1:!1}),H=[{field:this._idProperty}],I=[{attribute:this._idProperty,ascending:!0}];this._store=new k({idProperty:this._idProperty,data:[]});this._grid=new (G([y,B,C]))({store:this._store,showHeader:!1,
noDataMessage:this.i18n.noTagsFound,selectionMode:"extended",allowSelectAll:!0,cellNavigation:!1,columns:H,sort:I,renderRow:this._renderItem},this._dropDownList);this._grid.startup();f.add(this._grid.domNode,"gridHeightLimiter");this._grid.query="first"===this._matchParam?A:F;var L;this.own(this._inputTextBox.watch("value",w.hitch(this,function(J,O,P){L&&(clearTimeout(L),L=null);this._grid.refresh()})));this.own(this._grid.on(".dgrid-row:click",w.hitch(this,function(J){var O="";this._shiftKeyPressed||
this._metaKeyPressed?J.shiftKey||J.metaKey||J.ctrlKey||(O=this._selRows[0],this._createTags(O),this._store.remove(O),this._grid.refresh(),this._resetInputTextBox()):(O=this._grid.row(J).data.tag,this._createTags(O),this._store.remove(O),this._grid.refresh(),this._resetInputTextBox())})));this.own(this._grid.on("dgrid-deselect",w.hitch(this,function(J){this._selRows=[];for(var O in this._grid.selection)this._grid.selection.hasOwnProperty(O)&&this._selRows.push(O)})));this.own(this._grid.on("dgrid-select",
w.hitch(this,function(J){this._selRows=[];for(var O in this._grid.selection)this._grid.selection.hasOwnProperty(O)&&this._selRows.push(O)})));this.own(this.connect(this.domNode,"keydown","_keydownHandler"));window.onkeydown=w.hitch(this,function(J){if(J.shiftKey||J.ctrlKey||224===J.keyCode)this._metaKeyPressed=!0});this.own(this.connect(document,"onkeydown",w.hitch(this,function(J){this._metaKeyPressed=this._shiftKeyPressed=!0})))}},_keydownHandler:function(A){this._clearMessage();if(void 0!==l.curNode.value)var F=
l.curNode.value.length;var H=m(this._CHOICE_FOCUS,v.byId(this.id)),I=m(this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE,v.byId(this.id)).last();switch(A.keyCode){case q.RIGHT_ARROW:this._navigate(H,F,I,"right");this._hideGrid();break;case q.LEFT_ARROW:this._navigate(H,F,I,"left");this._hideGrid();break;case q.DOWN_ARROW:A.preventDefault();this._unhighlightTag(H);"none"===a.get(this._gridId,"display")&&this._showGrid();this._gridHasFocus||(this._grid.focus(this._setFocusOnFirstRow(this._grid,
0)),this._gridHasFocus=!0);break;case q.UP_ARROW:break;case q.BACKSPACE:if(0===F&&0===m(this._CHOICE_FOCUS_ALL).length&&void 0!==m(this._CHOICE_ALL_SELECTOR)[m(this._CHOICE_ALL_SELECTOR).length-1]){var L=m(this._CHOICE_ALL_SELECTOR)[m(this._CHOICE_ALL_SELECTOR).length-1].title;if(0<m("li",this._attachmentNode).length&&(c.destroy(I[0]),void 0!==L))try{this._store.add({tag:L})}catch(O){}}if(0<m(this._CHOICE_FOCUS_ALL).length&&(L=m(this._CHOICE_FOCUS_ALL).text(),c.destroy(H[0]),void 0!==L))try{this._store.add({tag:L})}catch(O){}this._grid.refresh();
0===F&&this._hideGrid();this._removeTag(L);this._emitRemoved(L);this._emitChanged();this.validate();break;case q.CTRL:this._metaKeyPressed=!0;break;case q.META:this._metaKeyPressed=!0;break;case q.SHIFT:this._shiftKeyPressed=!0;break;case q.ENTER:if(0<F){F=this._stripHTML(l.curNode.value);F=F.split(",");var J=[];K.forEach(F,function(O,P){-1===K.indexOf(J,O)&&J.push(n.trim(O))});K.forEach(J,w.hitch(this,function(O,P){this._isEmpty(O)||this._contains(this.values,O)||this._createTags(O)}))}else{for(F=
0;F<this._selRows.length;F++)this._createTags(this._selRows[F]),this._store.remove(this._selRows[F]);this._metaKeyPressed=this._shiftKeyPressed=!1}this._resetInputTextBox();A.preventDefault();l.focus(v.byId(this._filterId));break;case q.TAB:if(l.curNode.id!==this._filterId||0!==F){if(0<F)F=this._stripHTML(l.curNode.value),F=F.split(","),J=[],K.forEach(F,function(O,P){-1===K.indexOf(J,O)&&J.push(n.trim(O))}),K.forEach(J,w.hitch(this,function(O,P){this._isEmpty(O)||this._contains(this.values,O)||this._createTags(O)}));
else{for(F=0;F<this._selRows.length;F++)this._createTags(this._selRows[F]),this._store.remove(this._selRows[F]);this._metaKeyPressed=this._shiftKeyPressed=!1}this._resetInputTextBox();A.preventDefault();l.focus(v.byId(this._filterId))}break;case q.ESCAPE:this._hideGrid();break;default:-1<F&&("none"===a.get(v.byId(this._gridId),"display")&&this._showGrid(),this._unhighlightTag(H)),this._metaKeyPressed=!1}},_blurHandler:function(A,F,H){if(!this.focused){A=this._stripHTML(this._inputTextBox.value);if(0<
A.length){var I=[];A=A.split(",");K.forEach(A,function(L,J){-1===K.indexOf(I,L)&&I.push(n.trim(L))});K.forEach(I,w.hitch(this,function(L,J){this._isEmpty(L)||this._contains(this.values,L)||this._createTags(L)}));this._resetInputTextBox()}this._hideGrid()}this.validate()},isValid:function(){var A=this.get("value");return this.required?D.isDefined(A)&&0<A.length:!0},validate:function(){this._created&&!this.isValid()?(r.set(this.domNode,"aria-invalid","true"),this._displayMessage(this.i18n.required)):
(r.set(this.domNode,"aria-invalid","false"),this._displayMessage(null))},_clearMessage:function(){this._displayMessage(null)},_displayMessage:function(A){var F=this._isIE8?this._textTags.domNode:v.byId(this._tagsId);A&&this.focused?d.show(A,F):d.hide(F)},_resetInputTextBox:function(){e.byId(this._filterId).set("value","")},_isEmpty:function(A){A=A.replace(/^\s+|\s+$/,"");return 0===A.length?!0:!1},_navigate:function(A,F,H,I){0<A.length&&1>F?("right"===I?this._hightlightTag(A.next()):this._hightlightTag(A.prev()),
this._unhighlightTag(A)):1>F&&this._hightlightTag(H)},_contains:function(A,F){return 0<=K.indexOf(A,F)},_hightlightTag:function(A){A.addClass(this._CSS_STYLES.SEARCH_CHOICE_FOCUS)},_unhighlightTag:function(A){A.removeClass(this._CSS_STYLES.SEARCH_CHOICE_FOCUS)},_removeTag:function(A){A&&-1!==K.indexOf(this.values,A)&&this.values.splice(K.indexOf(this.values,A),1)},_hideGrid:function(){v.byId(this._gridId)&&a.set(v.byId(this._gridId),"display","none");this._gridHasFocus=!1},_showGrid:function(){a.set(v.byId(this._gridId),
"display","block");var A=a.get(v.byId(this._attachmentNode),"width");a.set(v.byId(this._gridId),"width",A+"px")},_setFocusOnFirstRow:function(A,F){return m(".dgrid-content .dgrid-cell",this._grid.domNode)[F]||m(".dgrid-content .dgrid-row",this._grid.domNode)[F]},_createTags:function(A){m(this._CHOICE_FOCUS,v.byId(this.id)).removeClass("select2-search-choice-focus");var F=c.create("li",null,this._autocompleteList);f.add(F,this._CSS_STYLES.CHOICE);F=c.create("div",{title:A},F);p.set(F,this._htmlEncode(A));
F=c.create("a",{href:"#"},F);f.add(F,this._CSS_STYLES.CLOSE_ICON);t(F,"click",w.hitch(this,function(H){var I=n.trim(H.target.parentElement.textContent);try{this._store.add({tag:I})}catch(L){}this._grid.refresh();this._removeTag(I);this._emitRemoved(I);this._emitChanged();c.destroy(H.target.parentNode.parentNode);H.preventDefault()}));F=e.byId(this._filterId);c.place(F.domNode,this._autocompleteList,"last");this._hideGrid();this.values.push(A);this._emitAdded(A);this._emitChanged()},_emitAdded:function(A){this.emit("tags-add",
{tag:A})},_emitRemoved:function(A){this.emit("tags-remove",{tag:A})},_emitChanged:function(){this.emit("tags-change",{tags:this.get("tags")})},_renderItem:function(A){return c.create("div",{innerHTML:A.tag})},_createContainerNode:function(){this._containerNode=c.create("div",null,this._attachmentNode);f.add(this._containerNode,this._CSS_STYLES.MULTI);a.set(this._containerNode,"maxWidth",this._maxWidth);a.set(this._containerNode,"minWidth",this._minWidth)},_createTagList:function(){this._autocompleteList=
c.create("ul",null,this._containerNode);f.add(this._autocompleteList,this._CSS_STYLES.CHOICES)},_createInput:function(){var A=c.create("li",null,this._autocompleteList,"last");f.add(A,this._CSS_STYLES.SEARCH_FIELD);this._inputTextBox=new h({id:this._filterId,placeHolder:this.i18n.addTags,intermediateChanges:!0,trim:!0,style:{border:"none"}},A);f.add(this._inputTextBox,"inputTextBox");a.set(this._inputTextBox,"width",this._minWidth);(8<b("ie")||4<b("trident"))&&f.add(this._inputTextBox.domNode,"ieStyle");
this.own(l.watch("curNode",w.hitch(this,this._blurHandler)))},_createDropDownList:function(){this._dropDownList=c.create("div",{id:this._gridId},this._containerNode);f.add(this._dropDownList,"dropDownList");a.set(this._dropDownList,"width",this._minWidth)},focus:function(){l.focus(this.domNode);this._isIE8?this._textTags.focus():this._inputTextBox.focus()},reset:function(){this.clearTags()},prepopulate:function(A){K.forEach(A,w.hitch(this,function(F,H){this._createTags(F);this._store.remove(F)}))},
clearTags:function(){var A=m(this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE,v.byId(this.id)),F=!1,H;0<A.length&&(F=!0,K.forEach(A,w.hitch(this,function(I,L){try{H=m(this._CHOICE_ALL_SELECTOR,v.byId(this.id))[0].title,this._store.add({tag:H})}catch(J){}c.destroy(I);this._emitRemoved(H)})),this.values=[],F&&this._emitChanged())},addStyledTags:function(A,F){f.add(v.byId(F),this._CSS_STYLES.MULTI);var H=c.create("ul",null,v.byId(F));f.add(H,this._CSS_STYLES.CHOICES);a.set(H,"border","none");
K.forEach(A,function(I,L){var J=c.create("li",null,H);a.set(J,"padding","3px 5px 3px 5px");f.add(J,"select2-search-resultSet");J=c.create("div",{title:I},J);p.set(J,I)})},_getUniqueTags:function(A){var F=[],H;K.forEach(A,w.hitch(this,function(I){H=this._stripHTML(I);D.isDefined(H)&&0<H.length&&F.push(H)}));return K.filter(F,w.hitch(this,function(I,L){return K.indexOf(F,I)===L}))},_setValueAttr:function(A){this._setTagsAttr(A)},_getValueAttr:function(){return this._getTagsAttr()},_setTagsAttr:function(A){!A||
A instanceof Array||(A=A.split(","));this._isIE8?this._textTags&&this._textTags.set("value",this._getUniqueTags(A).join(",")):(this.clearTags(),this.prepopulate(A?this._getUniqueTags(A):[]))},_getTagsAttr:function(){return this._isIE8?this._textTags?this._textTags.get("value"):"":this.values?this.values.join(","):""},_setRequiredAttr:function(A){this.required=A},_getRequiredAttr:function(){return this.required},_setMinWidthAttr:function(A){this.minWidth=A},_setMaxWidthAttr:function(A){this.maxWidth=
A},_setKnownTagsAttr:function(A){if(!this._isIE8){var F=[],H;for(H=0;H<A.length;H++)0>K.indexOf(this.values,A[H])&&F.push(A[H]);this._store=new k({idProperty:this._idProperty,data:F});this._grid.set("store",this._store);this._grid.refresh()}},_stripHTML:function(A){return A&&A.replace(/<(?:.|\s)*?>/g,"")},_htmlEncode:function(A){return A?A.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):A}});w.setObject("dijit.Tags",g,z);return g})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put ./util/misc dojo/_base/Deferred dojo/_base/sniff".split(" "),
function(K,G,w,v,r,f,c,a){function b(C){C.preventDefault()}var p={checkbox:1,radio:1,button:1},q=/\bdgrid-cell\b/,t=/\bdgrid-row\b/,m=K("dgrid.Keyboard",null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=v.mixin({},m.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=v.mixin({},m.defaultHeaderKeyMap))},postCreate:function(){function C(E){var A=E.target;return A.type&&(!p[A.type]||32==E.keyCode)}function z(E){function A(){D._focusedHeaderNode&&
(D._focusedHeaderNode.tabIndex=-1);if(D.showHeader){if(F)for(var J=0,O,P=D.headerNode.getElementsByTagName("th");O=P[J];++J){if(H.test(O.className)){D._focusedHeaderNode=L=O;break}}else D._focusedHeaderNode=L=D.headerNode;L&&(L.tabIndex=D.tabIndex)}}var F=D.cellNavigation,H=F?q:t,I=E===D.headerNode,L=E;I?(A(),G.after(D,"renderHeader",A,!0)):G.after(D,"renderArray",function(J){return a.when(J,function(O){var P=D._focusedNode||L;if(H.test(P.className)&&c.contains(E,P))return O;for(var fa=0,V=E.getElementsByTagName("*"),
ba;ba=V[fa];++fa)if(H.test(ba.className)){P=D._focusedNode=ba;break}P.tabIndex=D.tabIndex;return O})});D._listeners.push(w(E,"mousedown",function(J){C(J)||D._focusOnNode(J.target,I,J)}));D._listeners.push(w(E,"keydown",function(J){if(!J.metaKey&&!J.altKey){var O=D[I?"headerKeyMap":"keyMap"][J.keyCode];O&&!C(J)&&O.call(D,J)}}))}this.inherited(arguments);var D=this;this.tabableHeader&&(z(this.headerNode),this._listeners.push(w(this.headerNode,"dgrid-cellfocusin",function(){D.scrollTo({x:this.scrollLeft})})));
z(this.contentNode);this._debouncedEnsureScroll=c.debounce(this._ensureScroll,this)},removeRow:function(C){if(!this._focusedNode)return this.inherited(arguments);var z=this,D=document.activeElement===this._focusedNode,E=this[this.cellNavigation?"cell":"row"](this._focusedNode),A=E.row||E,F;C=C.element||C;C===A.element&&((F=this.down(A,!0))&&F.element!==C||(F=this.up(A,!0)),this._removedFocus={active:D,rowId:A.id,columnId:E.column&&E.column.id,siblingId:F&&F.element!==C?F.id:void 0},setTimeout(function(){z._removedFocus&&
z._restoreFocus(A.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(C){var z=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(z);return z},_restoreFocus:function(C){var z=this._removedFocus,D;if((C=(C=C&&this.row(C))&&C.element&&C.id===z.rowId?C:"undefined"!==typeof z.siblingId&&this.row(z.siblingId))&&C.element){if(!C.element.parentNode.parentNode){z.wait=!0;return}"undefined"!==typeof z.columnId&&(D=this.cell(C,z.columnId))&&
D.element&&(C=D);z.active&&0!==C.element.offsetHeight?this._focusOnNode(C,!1,null):(f(C.element,".dgrid-focus"),C.element.tabIndex=this.tabIndex,this._focusedNode=C.element)}delete this._removedFocus},addKeyHandler:function(C,z,D){return G.after(this[D?"headerKeyMap":"keyMap"],C,z,!0)},_ensureRowScroll:function(C){var z=this.getScrollPosition().y;z>C.offsetTop?this.scrollTo({y:C.offsetTop}):z+this.contentNode.offsetHeight<C.offsetTop+C.offsetHeight&&this.scrollTo({y:C.offsetTop-this.contentNode.offsetHeight+
C.offsetHeight})},_ensureColumnScroll:function(C){var z=this.getScrollPosition().x,D=C.offsetLeft;if(z>D)this.scrollTo({x:D});else{var E=this.bodyNode.clientWidth;C=C.offsetWidth;var A=D+C;z+E<A&&this.scrollTo({x:E>C?A-E:D})}},_ensureScroll:function(C,z){this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!z&&this._ensureRowScroll(C.row.element);this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(C.element)},_focusOnNode:function(C,z,D){var E="_focused"+(z?
"Header":"")+"Node",A=this[E],F=this.cellNavigation?"cell":"row",H=this[F](C),I;if(C=H&&H.element){if(this.cellNavigation){var L=C.getElementsByTagName("input");var J=0;for(I=L.length;J<I;J++){var O=L[J];if((-1!=O.tabIndex||"_dgridLastValue"in O)&&!O.disabled){8>r("ie")&&(O.style.position="relative");O.focus();8>r("ie")&&(O.style.position="");var P=!0;break}}}null!==D&&(D=v.mixin({grid:this},D),D.type&&(D.parentType=D.type),D.bubbles||(D.bubbles=!0));A&&(f(A,"!dgrid-focus[!tabIndex]"),8>r("ie")&&
(A.style.position=""),D&&(D[F]=this[F](A),w.emit(A,"dgrid-cellfocusout",D)));A=this[E]=C;D&&(D[F]=H);E=this.cellNavigation?q:t;!P&&E.test(C.className)&&(8>r("ie")&&(C.style.position="relative"),C.tabIndex=this.tabIndex,C.focus());f(C,".dgrid-focus");D&&w.emit(A,"dgrid-cellfocusin",D);this._debouncedEnsureScroll(H,z)}},focusHeader:function(C){this._focusOnNode(C||this._focusedHeaderNode,!0)},focus:function(C){(C=C||this._focusedNode)?this._focusOnNode(C,!1):this.contentNode.focus()}}),n=m.moveFocusVertical=
function(C,z){if(this._focusOnNode&&C.target!==this.contentNode){var D=this.cellNavigation,E=this[D?"cell":"row"](C);E=D&&E.column.id;var A=this.down(this._focusedNode,z,!0);D&&(A=this.cell(A,E));this._focusOnNode(A,!1,C);C.preventDefault()}};K=m.moveFocusUp=function(C){n.call(this,C,-1)};var k=m.moveFocusDown=function(C){n.call(this,C,1)},l=m.moveFocusPageUp=function(C){n.call(this,C,-this.pageSkip)},h=m.moveFocusPageDown=function(C){n.call(this,C,this.pageSkip)},e=m.moveFocusHorizontal=function(C,
z){if(this.cellNavigation&&C.target!==this.contentNode){var D=!this.row(C);this._focusOnNode(this.right(this["_focused"+(D?"Header":"")+"Node"],z),D,C);C.preventDefault()}},d=m.moveFocusLeft=function(C){e.call(this,C,-1)},g=m.moveFocusRight=function(C){e.call(this,C,1)},u=m.moveHeaderFocusEnd=function(C,z){if(this.cellNavigation){var D=this.headerNode.getElementsByTagName("th");this._focusOnNode(D[z?0:D.length-1],!0,C)}C.preventDefault()},x=m.moveHeaderFocusHome=function(C){u.call(this,C,!0)},y=m.moveFocusEnd=
function(C,z){var D=this,E=this.cellNavigation,A=this.contentNode,F=A.scrollTop+(z?0:A.scrollHeight);A=A[z?"firstChild":"lastChild"];var H=-1<A.className.indexOf("dgrid-preload"),I=H?A[(z?"next":"previous")+"Sibling"]:A,L=I.offsetTop+(z?0:I.offsetHeight);if(H){for(;I&&0>I.className.indexOf("dgrid-row");)I=I[(z?"next":"previous")+"Sibling"];if(!I)return}if(!H||1>A.offsetHeight)E&&(I=this.cell(I,this.cell(C).column.id)),this._focusOnNode(I,!1,C);else{r("dom-addeventlistener")||(C=v.mixin({},C));var J=
G.after(this,"renderArray",function(O){J.remove();return a.when(O,function(P){P=P[z?0:P.length-1];E&&(P=D.cell(P,D.cell(C).column.id));D._focusOnNode(P,!1,C)})})}F===L&&C.preventDefault()},B=m.moveFocusHome=function(C){y.call(this,C,!0)};m.defaultKeyMap={32:b,33:l,34:h,35:y,36:B,37:d,38:K,39:g,40:k};m.defaultHeaderKeyMap={32:b,35:u,36:x,37:d,39:g};return m})},"dojo/NodeList-traverse":function(){define(["./query","./_base/lang","./_base/array"],function(K,G,w){var v=K.NodeList;G.extend(v,{_buildArrayFromCallback:function(r){for(var f=
[],c=0;c<this.length;c++){var a=r.call(this[c],this[c],f);a&&(f=f.concat(a))}return f},_getUniqueAsNodeList:function(r){for(var f=[],c=0,a;a=r[c];c++)1==a.nodeType&&-1==w.indexOf(f,a)&&f.push(a);return this._wrap(f,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(r,f){var c=this._getUniqueAsNodeList(r);c=f?K._filterResult(c,f):c;return c._stash(this)},_getRelatedUniqueNodes:function(r,f){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(f),r)},children:function(r){return this._getRelatedUniqueNodes(r,
function(f,c){return G._toArray(f.childNodes)})},closest:function(r,f){return this._getRelatedUniqueNodes(null,function(c,a){do if(K._filterResult([c],r,f).length)return c;while(c!=f&&(c=c.parentNode)&&1==c.nodeType);return null})},parent:function(r){return this._getRelatedUniqueNodes(r,function(f,c){return f.parentNode})},parents:function(r){return this._getRelatedUniqueNodes(r,function(f,c){for(var a=[];f.parentNode;)f=f.parentNode,a.push(f);return a})},siblings:function(r){return this._getRelatedUniqueNodes(r,
function(f,c){for(var a=[],b=f.parentNode&&f.parentNode.childNodes,p=0;p<b.length;p++)b[p]!=f&&a.push(b[p]);return a})},next:function(r){return this._getRelatedUniqueNodes(r,function(f,c){for(var a=f.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;return a})},nextAll:function(r){return this._getRelatedUniqueNodes(r,function(f,c){for(var a=[],b=f;b=b.nextSibling;)1==b.nodeType&&a.push(b);return a})},prev:function(r){return this._getRelatedUniqueNodes(r,function(f,c){for(var a=f.previousSibling;a&&1!=
a.nodeType;)a=a.previousSibling;return a})},prevAll:function(r){return this._getRelatedUniqueNodes(r,function(f,c){for(var a=[],b=f;b=b.previousSibling;)1==b.nodeType&&a.push(b);return a})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(r,f){return 0!=f%2})},odd:function(){return this.filter(function(r,f){return 0==
f%2})}});return v})},"arcgisonline/sharing/dijit/dialog/_AddItemDlgMixin":function(){define(["dojo","dijit","dojox","dojo/require!dojox/grid/DataGrid"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog._AddItemDlgMixin");K.require("dojox.grid.DataGrid");K.declare("arcgisonline.sharing.dijit.dialog._AddItemDlgMixin",null,{itemInfo:{nmf:{typeKeywords:"Map,Explorer Map,Explorer Document,2D,3D,ArcGIS Explorer,nmf",type:"Explorer Map"},mxd:{typeKeywords:"Map Document, Map, 2D, ArcMap, ArcGIS Server, mxd",
type:"Map Document"},msd:{typeKeywords:"Map Document, Map, 2D, ArcMap, ArcGIS Server, msd",type:"Map Document"},"3dd":{typeKeywords:"Map, Globe Document, 3D, ArcGlobe, ArcGIS Server, 3dd",type:"Globe Document"},"3ws":{typeKeywords:"3D, Map, Scene, Web",type:"CityEngine Web Scene",thumbnailURL:"/cw_webscene.png"},sxd:{typeKeywords:"Map, Scene Document, 3D, ArcScene, sxd",type:"Scene Document"},lpk:{typeKeywords:"",type:"Layer Package"},lpkx:{typeKeywords:"",type:"Layer Package"},mpk:{typeKeywords:"",
type:"Map Package"},mpkx:{typeKeywords:"",type:"Map Package"},wmpk:{typeKeywords:"",type:"Windows Mobile Package"},rpk:{typeKeywords:"",type:"Rule Package"},bpk:{typeKeywords:"",type:"Mobile Basemap Package"},mspk:{typeKeywords:"",type:"Mobile Scene Package",thumbnailURL:"/mobilescenepackage.png"},scenepackage:{typeKeywords:"",type:"Scene Package",thumbnailURL:"/desktopapp.png"},gpkg:{typeKeywords:"",type:"GeoPackage",thumbnailURL:"/geopackage.png"},imagecollection:{typeKeywords:"Data, Image, Raster",
type:"Image Collection"},photocollection:{typeKeywords:"Photo locations",type:"Image Collection"},deeplearningpackage:{typeKeywords:"Deep Learning, Raster",type:"Deep Learning Package",thumbnailURL:"/deeplearningpackage.png"},gml:{type:"GML"},mapx:{typeKeywords:"ArcGIS Pro, Map, Map File, mapx",type:"Pro Map"},lyrx:{typeKeywords:"ArcGIS Pro, Layer, Layer File, lyrx",type:"Layer"},pagx:{typeKeywords:"ArcGIS Pro, Layout, Layout File, pagx",type:"Layout"},lyr:{typeKeywords:"Data, Layer, ArcMap,ArcGlobe,ArcGIS Explorer,lyr",
type:"Layer"},servicedefinition:{typeKeywords:"Data, Service, Service Definition",type:"Service Definition"},nmc:{typeKeywords:"Data,Layer,Explorer Layer,ArcGIS Explorer,nmc",type:"Explorer Layer"},ncfg:{typeKeywords:"Map,Explorer Map,Explorer Mapping Application,2D,3D,ArcGIS Explorer,ncfg",type:"Explorer Map"},eaz:{typeKeywords:"Tool,Add In,Explorer Add In,ArcGIS Explorer,eaz",type:"Explorer Add In"},pmf:{typeKeywords:"Map,Published Map,2D,ArcReader,ArcMap,ArcGIS Server,pmf",type:"Published Map"},
gpk:{typeKeywords:"",type:"Geoprocessing Package"},gpkx:{typeKeywords:"Tool, ArcGIS Pro, Toolbox, Model, Script, Result, gpkx",type:"Geoprocessing Package"},gcpk:{typeKeywords:"",type:"Locator Package"},tilepackage:{type:"Tile Package",typeKeywords:""},vectortilepackage:{type:"Vector Tile Package",typeKeywords:""},vectortileserver:{type:"Vector Tile Service",typeKeywords:""},urbanmodel:{type:"Urban Model",typeKeywords:""},wpk:{type:"Workflow Manager Package",typeKeywords:"",thumbnailURL:"/desktopapp.png"},
esriaddin:{type:"Desktop Add In",typeKeywords:"Tool,Add In,Desktop Add In,ArcGIS Desktop,ArcMap,ArcGlobe,ArcScene,esriaddin"},esriaddinx:{type:"ArcGIS Pro Add In",typeKeywords:"Tool, Add In, Pro Add In, esriaddinx"},dtemp:{type:"Desktop Application Template",typeKeywords:"application, template, ArcGIS desktop"},mtemp:{type:"Map Template",typeKeywords:"map, ArcMap, template, ArcGIS desktop"},codesample:{type:"Code Sample",typeKeywords:"Code, Sample",thumbnailURL:"/desktopapp.png"},shapefile:{type:"Shapefile",
typeKeywords:"Data, Layer, shapefile"},vieweraddin:{type:"Windows Viewer Add In",typeKeywords:"Application, ArcGIS Windows Viewer, Add In"},opdashboardaddin:{type:"Operations Dashboard Add In",typeKeywords:"Application, ArcGIS Operations Dashboard, Add In"},desktopapplication:{type:"Desktop Application",typeKeywords:"Desktop Application"},proconfigx:{type:"ArcGIS Pro Configuration",typeKeywords:""},csv:{type:"CSV",typeKeywords:"CSV",thumbnailURL:"/desktopapp.png"},gpsample:{type:"Geoprocessing Sample",
typeKeywords:"tool, geoprocessing, sample",thumbnailURL:"/desktopapp.png"},kml:{type:"KML",typeKeywords:"Data, Map, kml",thumbnailURL:"/desktopapp.png"},kmz:{type:"KML",typeKeywords:"Data, Map, kmz",thumbnailURL:"/desktopapp.png"},apimobile:{type:"Mobile Application",typeKeywords:"ArcGIS Mobile Map, Mobile Application",thumbnailURL:"/mobileapp.png"},apimap:{type:"Web Mapping Application",typeKeywords:"Web Map, Map, Online Map, Mapping Site",thumbnailURL:"/webapp.png"},apiapp:{type:"Application",typeKeywords:"Application"},
wab:{type:"Web Mapping Application",typeKeywords:"Web Map, Map, Online Map, Mapping Site, Web AppBuilder for ArcGIS",thumbnailURL:"/webapp.png"},configapp:{type:"Web Mapping Application",typeKeywords:"JavaScript, Map, Mapping Site, Online Map, Ready To Use, Web Map",thumbnailURL:"/webapp.png"},dashboard:{type:"Dashboard",typeKeywords:"",thumbnailURL:"/opsdashboard.png"},dashboard_map:{type:"Dashboard",typeKeywords:"",thumbnailURL:"/opsdashboard.png",text:'{ "version": 45, "layout": { "rootElement": { "type": "itemLayoutElement", "id": "1200f3f1-8f72-4ea6-af16-14f19e9a4517" } }, "widgets": [ { "type": "mapWidget", "itemId": "${mapId}", "id": "1200f3f1-8f72-4ea6-af16-14f19e9a4517", "name": "Map (1)"} ] }'},
featureserver:{type:"Feature Service",typeKeywords:"Data, Service, Feature Service, ArcGIS Server, Feature Access"},mapserver:{type:"Map Service",typeKeywords:"Data, Service, Map Service, ArcGIS Server"},geocodeserver:{type:"Geocoding Service",typeKeywords:"Tool, Service, Geocoding Service, Locator Service, ArcGIS Server",thumbnailURL:"/desktopapp.png"},geoenrichmentserver:{type:"Geoenrichment Service"},naserver:{type:"Network Analysis Service",typeKeywords:"Tool, Service, Network Analysis Service, ArcGIS Server"},
globeserver:{type:"Globe Service",typeKeywords:"Data, Service, Globe Service, ArcGIS Server",thumbnailURL:"/desktopapp.png"},gpserver:{type:"Geoprocessing Service",typeKeywords:"Tool, Service, Geoprocessing Service, ArcGIS Server"},geodataserver:{type:"Geodata Service",typeKeywords:"Data, Service, Geodata Service, ArcGIS Server"},imageserver:{type:"Image Service",typeKeywords:"Data, Service, Image Service, ArcGIS Server"},geometryserver:{type:"Geometry Service",typeKeywords:"Tool, Service, Geometry Service, ArcGIS Server",
thumbnailURL:"/desktopapp.png"},wmserver:{type:"Workflow Manager Service",typeKeywords:"Workflow Manager, ArcGIS Server, WMServer, Workflow, JTX, Job Tracking",thumbnailURL:"/desktopapp.png"},sceneserver:{type:"Scene Service",thumbnailURL:"/scene.png",typeKeywords:"Scene Service"},streamserver:{type:"Stream Service",thumbnailURL:"/desktopapp.png",typeKeywords:"Data, Service, Stream Service, ArcGIS Server"},elevationserver:{type:"Image Service",thumbnailURL:"/desktopapp.png",typeKeywords:"Elevation 3D Layer"},
tiledimageserver:{type:"Image Service",thumbnailURL:"/tiledimagerylayer.png",typeKeywords:"Tiled Imagery"},workspaceserver:{type:"Insights Workbook",thumbnailURL:"/desktopapp.png",typeKeywords:"Application,ArcGIS,Insights Workbook"},ogc:{type:"WMS",typeKeywords:"Data, Service, Web Map Service, OGC"},wfs:{type:"WFS",typeKeywords:"Data, Service, Web Feature Service, OGC"},wmts:{type:"WMTS",typeKeywords:"Data, Service, OGC"},ogcfeatures:{type:"OGCFeatureService",typeKeywords:"Data, Feature Service, Features, OGC, Service, WFS"},
arcpadpackage:{type:"ArcPad Package",typeKeywords:"Map, Layer, Data",thumbnailURL:"/desktopapp.png"},kmlcollection:{type:"KML Collection",thumbnailURL:"/desktopapp.png"},csvcollection:{type:"CSV Collection",thumbnailURL:"/desktopapp.png"},filegeodatabase:{type:"File Geodatabase",thumbnailURL:"/desktopapp.png"},caddrawing:{type:"CAD Drawing",thumbnailURL:"/desktopapp.png"},featurecollection:{type:"Feature Collection"},esritasks:{type:"Task File",typeKeywords:"ArcGIS Professional, Task Assistant, esriTasks"},
stylx:{type:"Desktop Style",typeKeywords:"ArcGIS Pro, Symbology, Style, Symbols"},ppkx:{type:"Project Package",typeKeywords:""},aptx:{type:"Project Template",typeKeywords:"ArcGIS Project Template, Project Template, ArcGIS Pro"},mmpk:{type:"Mobile Map Package",typeKeywords:""},mbpk:{type:"Mobile Basemap Package",typeKeywords:""},geojson:{type:"GeoJson",typeKeywords:"Coordinates Type, CRS, Feature, FeatureCollection, GeoJSON, Geometry, GeometryCollection"},json:{type:"GeoJson",typeKeywords:"Coordinates Type, CRS, Feature, FeatureCollection, GeoJSON, Geometry, GeometryCollection"},
rft:{type:"Raster function template",typeKeywords:"Raster, Functions, Processing, rft, srf, function template, templates, ArcGIS Pro",thumbnailURL:"/desktopapp.png"},"3vr":{type:"360 VR Experience",typeKeywords:""},ipynb:esriGeowConfig.userRole&&esriGeowConfig.userRole.canCreateNotebooks()?{type:"Notebook",typeKeywords:"Notebook, Python"}:!1,notebook:esriGeowConfig.userRole&&(esriGeowConfig.userRole.canCreateNotebooks()||esriGeowConfig.userRole.canPublishNotebooks())?{type:"Notebook",typeKeywords:"Notebook, Python"}:
!1},orgOnly:{ppt:{type:"Microsoft Powerpoint",typeKeywords:"Data, Document, Microsoft Powerpoint"},pptx:{type:"Microsoft Powerpoint",typeKeywords:"Data, Document, Microsoft Powerpoint"},document:{type:"Document Link",typeKeywords:"Data, Document"},doc:{type:"Microsoft Word",typeKeywords:"Data, Document, Microsoft Word"},docx:{type:"Microsoft Word",typeKeywords:"Data, Document, Microsoft Word"},xls:{type:"Microsoft Excel",typeKeywords:"Data, Document, Microsoft Excel"},xlsx:{type:"Microsoft Excel",
typeKeywords:"Data, Document, Microsoft Excel"},pdf:{type:"PDF",typeKeywords:"Data, Document, PDF"},jpg:{type:"Image",typeKeywords:"Data, Image, jpg"},jpeg:{type:"Image",typeKeywords:"Data, Image, jpeg"},tif:{type:"Image",typeKeywords:"Data, Image, tif"},tiff:{type:"Image",typeKeywords:"Data, Image, tiff"},png:{type:"Image",typeKeywords:"Data, Image, png"},vsd:{type:"Visio Document",typeKeywords:"Data, Document, Visio Document"},pages:{type:"iWork Pages",typeKeywords:"Data, Document, Mac"},numbers:{type:"iWork Numbers",
typeKeywords:"Data, Document, Mac"},keynote:{type:"iWork Keynote",typeKeywords:"Data, Document, Mac"},key:{type:"iWork Keynote",typeKeywords:"Data, Document, Mac"},opext:{type:"Operations Dashboard Extension",typeKeywords:"Extension, Application, ArcGIS Operations Dashboard"},appbldrext:{type:"AppBuilder Extension",typeKeywords:"Widget, App Builder"},appbldrpackage:{type:"AppBuilder Widget Package"},rptx:{type:"Pro Report",typeKeywords:""},xml:{type:"Earth Configuration",typeKeywords:"ArcGIS Earth, Earth, Earth Configuration"}},
gridInfo:{csv:[{width:"170px",field:"name",name:"fieldName"},{width:"160px",field:"type",name:"fieldType",select:"fieldTypes",editable:!0,type:w.grid.cells.Select},{width:"160px",field:"locationType",name:"addressFields",select:"addressTypes",editable:"true",type:w.grid.cells.Select},{width:"160px",field:"locationType",name:"locationFields",select:"locationTypes",editable:"true",hidden:!0,type:w.grid.cells.Select}],xlsx:[{width:"170px",field:"name",name:"fieldName"},{width:"160px",field:"locationType",
name:"addressFields",select:"addressTypes",editable:"true",type:w.grid.cells.Select},{width:"160px",field:"locationType",name:"locationFields",select:"locationTypes",editable:"true",hidden:!0,type:w.grid.cells.Select}],ogc:[{field:"visible",name:'\x3cinput id\x3d"_ogcCB", type\x3d"checkbox" checked/\x3e',width:"16px",editable:!0,type:w.grid.cells.Bool},{field:"title",name:"ogcLayers",editable:!0,width:"420px"}]}})})},"dojox/grid/DataGrid":function(){define("../main dojo/_base/array dojo/_base/lang dojo/_base/json dojo/_base/sniff dojo/_base/declare ./_Grid ./DataSelection dojo/_base/html dojo/has dojo/has!dojo-bidi?./bidi/_BidiMixin".split(" "),
function(K,G,w,v,r,f,c,a,b){var p=f("dojox.grid.DataGrid",c,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},
destroy:function(){this.selection.destroy();this.inherited(arguments)},createSelection:function(){this.selection=new a(this)},get:function(q,t){if(t&&"_item"==this.field&&!this.fields)return t;if(t&&this.fields){var m=[],n=this.grid.store;G.forEach(this.fields,function(k){m=m.concat(n.getValues(t,k))});return m}return t||"string"!==typeof q?t?this.field?"_item"==this.field?t:this.grid.store.getValue(t,this.field):this.value:this.defaultValue:this.inherited(arguments)},_checkUpdateStatus:function(){if(0<
this.updateDelay){var q=!1;this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,q=!0);this.updating||(this.beginUpdate(),q=!0);if(q){var t=this;this._endUpdateDelay=setTimeout(function(){delete t._endUpdateDelay;t.endUpdate()},this.updateDelay)}}},_onSet:function(q,t,m,n){this._checkUpdateStatus();q=this.getItemIndex(q);-1<q&&this.updateRow(q)},_createItem:function(q,t){var m=this._hasIdentity?this.store.getIdentity(q):v.toJson(this.query)+":idx:"+t+":sort:"+v.toJson(this.getSortProps());
return this._by_idty[m]={idty:m,item:q}},_addItem:function(q,t,m){this._by_idx[t]=this._createItem(q,t);m||this.updateRow(t)},_onNew:function(q,t){this._checkUpdateStatus();var m=this.get("rowCount");this._addingItem=!0;this.updateRowCount(m+1);this._addingItem=!1;this._addItem(q,m);this.showMessage()},_onDelete:function(q){this._checkUpdateStatus();q=this._getItemIndex(q,!0);if(0<=q){this._pages=[];this._eop=this._bop=-1;var t=this._by_idx[q];this._by_idx.splice(q,1);delete this._by_idty[t.idty];
this.updateRowCount(this.get("rowCount")-1);0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(q)&&(this.selection.deselect(q),this.selection.selected.splice(q,1))},_onRevert:function(){this._refresh()},setStore:function(q,t,m){this._requestsPending(0)||(this._setQuery(t,m),this._setStore(q),this._refresh(!0))},setQuery:function(q,t){this._requestsPending(0)||(this._setQuery(q,t),this._refresh(!0))},setItems:function(q){this.items=q;this._setStore(this.store);
this._refresh(!0)},_setQuery:function(q,t){this.query=q;this.queryOptions=t||this.queryOptions},_setStore:function(q){this.store&&this._store_connects&&G.forEach(this._store_connects,this.disconnect,this);if(this.store=q){q=this.store.getFeatures();var t=[];this._canEdit=!!q["dojo.data.api.Write"]&&!!q["dojo.data.api.Identity"];this._hasIdentity=!!q["dojo.data.api.Identity"];q["dojo.data.api.Notification"]&&!this.items&&(t.push(this.connect(this.store,"onSet","_onSet")),t.push(this.connect(this.store,
"onNew","_onNew")),t.push(this.connect(this.store,"onDelete","_onDelete")));this._canEdit&&t.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=t}},_onFetchBegin:function(q,t){this.scroller&&(this.rowCount!=q&&(t.isRender?(this.scroller.init(q,this.keepRows,this.rowsPerPage),this.rowCount=q,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(q)),q?this.showMessage():(this.views.render(),this._resize(),
this.showMessage(this.noDataMessage),this.focus.initFocusView()))},_onFetchComplete:function(q,t){this.scroller&&(q&&0<q.length&&(G.forEach(q,function(m,n){this._addItem(m,t.start+n,!0)},this),this.updateRows(t.start,q.length),t.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),r("ie")&&b.setSelectable(this.domNode,this.selectable)),delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0),this._pending_requests[t.start]=
!1)},_onFetchError:function(q,t){delete this._lastScrollTop;this._isLoaded||(this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage));this._pending_requests[t.start]=!1;this.onFetchError(q,t)},onFetchError:function(q,t){},_fetch:function(q,t){q=q||0;if(this.store&&!this._pending_requests[q]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage));this._pending_requests[q]=!0;try{if(this.items){var m=this.items,n=this.store;this.rowsPerPage=m.length;
var k={start:q,count:this.rowsPerPage,isRender:t};this._onFetchBegin(m.length,k);var l=0;G.forEach(m,function(e){n.isItemLoaded(e)||l++});if(0===l)this._onFetchComplete(m,k);else{var h=function(e){l--;0===l&&this._onFetchComplete(m,k)};G.forEach(m,function(e){n.isItemLoaded(e)||n.loadItem({item:e,onItem:h,scope:this})},this)}}else this.store.fetch({start:q,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:t,onBegin:w.hitch(this,"_onFetchBegin"),
onComplete:w.hitch(this,"_onFetchComplete"),onError:w.hitch(this,"_onFetchError")})}catch(e){this._onFetchError(e,{start:q,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=!1},getItem:function(q){var t=this._by_idx[q];return!t||t&&!t.item?(this._preparePage(q),null):t.item},getItemIndex:function(q){return this._getItemIndex(q,!1)},_getItemIndex:function(q,t){if(!t&&!this.store.isItem(q))return-1;
for(var m=this._hasIdentity?this.store.getIdentity(q):null,n=0,k=this._by_idx.length;n<k;n++){var l=this._by_idx[n];if(l&&(m&&l.idty==m||l.item===q))return n}return-1},filter:function(q,t){this.query=q;t&&this._clearData();this._fetch()},_getItemAttr:function(q,t){var m=this.getItem(q);return m?this.store.getValue(m,t):this.fetchText},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(q){return this._pending_requests[q]},
_rowToPage:function(q){return this.rowsPerPage?Math.floor(q/this.rowsPerPage):q},_pageToRow:function(q){return this.rowsPerPage?this.rowsPerPage*q:q},_preparePage:function(q){(q<this._bop||q>=this._eop)&&!this._addingItem&&(q=this._rowToPage(q),this._needPage(q),this._bop=q*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount")))},_needPage:function(q){this._pages[q]||(this._pages[q]=!0,this._requestPage(q))},_requestPage:function(q){q=this._pageToRow(q);0<Math.min(this.rowsPerPage,
this.get("rowCount")-q)&&(this._requests++,this._requestsPending(q)||setTimeout(w.hitch(this,"_fetch",q,!1),1))},getCellName:function(q){return q.field},_refresh:function(q){this._clearData();this._fetch(0,q)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var q=this.getCell(this.getSortIndex());if(q){var t=q.sortDesc,m=!(0<this.sortInfo);return[{attribute:q.field,descending:"undefined"==typeof t?
m:m?!t:t}]}return this.sortFields?this.sortFields:null},styleRowState:function(q){if(this.store&&this.store.getState){for(var t=this.store.getState(q.index),m="",n=0,k=["inflight","error","inserting"],l;l=k[n];n++)if(t[l]){m=" dojoxGridRow-"+l;break}q.customClasses+=m}},onStyleRow:function(q){this.styleRowState(q);this.inherited(arguments)},canEdit:function(q,t){return this._canEdit},_copyAttr:function(q,t){var m=this.getItem(q);return this.store.getValue(m,t)},doStartEdit:function(q,t){this._cache[t]||
(this._cache[t]=this._copyAttr(t,q.field));this.onStartEdit(q,t)},doApplyCellEdit:function(q,t,m){this.store.fetchItemByIdentity({identity:this._by_idx[t].idty,onItem:w.hitch(this,function(n){var k=this.store.getValue(n,m);"number"==typeof k?q=isNaN(q)?q:parseFloat(q):"boolean"==typeof k?q="true"==q?!0:"false"==q?!1:q:k instanceof Date&&(k=new Date(q),q=isNaN(k.getTime())?q:k);this.store.setValue(n,m,q);this.onApplyCellEdit(q,t,m)})})},doCancelEdit:function(q){this._cache[q]&&(this.updateRow(q),delete this._cache[q]);
this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(q,t){this.onApplyEdit(q)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var q=w.hitch(this,function(t){t.length&&(G.forEach(t,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:q}):q(this.selection.getSelected())}}});p.cell_markupFactory=function(q,t,m){var n=w.trim(b.attr(t,"field")||"");n&&(m.field=n);m.field=
m.field||m.name;if(n=w.trim(b.attr(t,"fields")||""))m.fields=n.split(",");q&&q(t,m)};p.markupFactory=function(q,t,m,n){return c.markupFactory(q,t,m,w.partial(p.cell_markupFactory,n))};return p})},"dojox/grid/DataSelection":function(){define(["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(K,G,w){return K("dojox.grid.DataSelection",w,{constructor:function(v){v.keepSelection&&(this.preserver=new G(this))},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var v=
w.prototype.getFirstSelected.call(this);return-1==v?null:this.grid.getItem(v)},getNextSelected:function(v){v=this.grid.getItemIndex(v);v=w.prototype.getNextSelected.call(this,v);return-1==v?null:this.grid.getItem(v)},getSelected:function(){for(var v=[],r=0,f=this.selected.length;r<f;r++)this.selected[r]&&v.push(this.grid.getItem(r));return v},addToSelection:function(v){if("none"!=this.mode){var r=null;r="number"==typeof v||"string"==typeof v?v:this.grid.getItemIndex(v);w.prototype.addToSelection.call(this,
r)}},deselect:function(v){if("none"!=this.mode){var r=null;r="number"==typeof v||"string"==typeof v?v:this.grid.getItemIndex(v);w.prototype.deselect.call(this,r)}},deselectAll:function(v){var r=null;v||"number"==typeof v?(r="number"==typeof v||"string"==typeof v?v:this.grid.getItemIndex(v),w.prototype.deselectAll.call(this,r)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(K,
G,w,v){return K("dojox.grid._SelectionPreserver",null,{constructor:function(r){this.selection=r;var f=this.grid=r.grid;this.reset();this._connects=[G.connect(f,"_setStore",this,"reset"),G.connect(f,"_addItem",this,"_reSelectById"),G.connect(r,"onSelected",w.hitch(this,"_selectById",!0)),G.connect(r,"onDeselected",w.hitch(this,"_selectById",!1)),G.connect(r,"deselectAll",this,"reset")]},destroy:function(){this.reset();v.forEach(this._connects,G.disconnect);delete this._connects},reset:function(){this._selectedById=
{}},_reSelectById:function(r,f){r&&this.grid._hasIdentity&&(this.selection.selected[f]=this._selectedById[this.grid.store.getIdentity(r)])},_selectById:function(r,f){if("none"!=this.selection.mode&&this.grid._hasIdentity){var c=f,a=this.grid;if("number"==typeof f||"string"==typeof f)c=(c=a._by_idx[f])&&c.item;c&&(this._selectedById[a.store.getIdentity(c)]=!!r);return c}}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],
function(K,G,w,v){return K("dijit.form.Textarea",[v,w],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);G.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),
function(K,G,w,v,r,f,c){w.add("textarea-needs-help-shrinking",function(){var a=f.body(),b=G.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},a,"last"),p=b.scrollHeight>=b.clientHeight;a.removeChild(b);return p});return K("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var a=this.textbox;a.style.overflowY="hidden";this.own(r(a,"focus, resize",v.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(c.on("resize",v.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(a){this.inherited(arguments);this.resize()},_estimateHeight:function(){var a=this.textbox;a.rows=(a.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function a(){var l=!1;""===b.value&&(b.value=" ",l=!0);var h=b.scrollHeight;l&&(b.value="");return h}var b=this.textbox;"hidden"==b.style.overflowY&&(b.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(a()||b.offsetHeight){var p=a()+Math.max(b.offsetHeight-b.clientHeight,0),q=p+"px";q!=b.style.height&&(b.style.height=q,b.rows=1);if(w("textarea-needs-help-shrinking")){var t=a(),m=b.style.minHeight,n=4,k=b.scrollTop;b.style.minHeight=q;for(b.style.height="auto";0<p;){b.style.minHeight=
Math.max(p-n,4)+"px";q=a();t-=q;p-=t;if(t<n)break;t=q;n<<=1}b.style.height=p+"px";b.style.minHeight=m;b.scrollTop=k}b.style.overflowY=a()>b.clientHeight?"auto":"hidden";"hidden"==b.style.overflowY&&(b.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"arcgisonline/sharing/dijit/dialog/_PublishTileServiceDlgMixin":function(){define(["dojo","dijit","dojox","dojo/require!dojo/promise/all,dojo/Deferred,esri/geometry/Extent,arcgisonline/sharing/util"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog._PublishTileServiceDlgMixin");
K.require("dojo.promise.all");K.require("dojo.Deferred");K.require("esri.geometry.Extent");K.require("arcgisonline.sharing.util");K.declare("arcgisonline.sharing.dijit.dialog._PublishTileServiceDlgMixin",null,{_util:arcgisonline.sharing.util,SCALE_MIN:5.91657527591555E8,SCALE_MAX:0,tileCacheInfo:{spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-2.0037508342787E7,y:2.0037508342787E7},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,
resolution:78271.5169639999,scale:2.95828763795777E8},{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,
scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,
scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},tileImageInfo:{format:"PNG32",compressionQuality:0,antialiasing:!0},cacheStorageInfo:{storageFormat:"esriMapCacheStorageModeCompactV2",packetSize:128},vectorTilePublishParams:{tilingSchema:{tileCacheInfo:{spatialReference:{wkid:102100,latestWkid:3857},
origin:{x:-2.0037508342787E7,y:2.0037508342787E7},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:2.95828763795777E8},{level:1,resolution:39135.75848200009,scale:1.47914381897889E8},{level:2,resolution:19567.87924099992,scale:7.3957190948944E7},{level:3,resolution:9783.93962049996,scale:3.6978595474472E7},{level:4,resolution:4891.96981024998,scale:1.8489297737236E7},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,
scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,
resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},
tileImageInfo:{format:"indexedVector",compressionQuality:0,antialiasing:!1},cacheStorageInfo:{storageFormat:"esriMapCacheStorageModeCompactV2",packetSize:128}}},lods:[{level:0,label:"1:591,657,528",scale:5.91657527591555E8},{level:1,label:"1:295,828,764",scale:2.95828763795777E8},{level:2,label:"1:147,914,382",scale:1.47914381897889E8},{level:3,label:"1:73,957,191",scale:7.3957190948944E7},{level:4,label:"1:36,978,595",scale:3.6978595474472E7},{level:5,label:"1:18,489,298",scale:1.8489297737236E7},
{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,
label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],statusCheckIntervalTime:2500,_fetchFSInfo:function(v){var r=new K.Deferred,f=v&&v.url,c=v?esriGeowConfig.restBaseUrl+"content/items/"+v.id+"/data":null;f&&c?K.promise.all({serviceInfo:this._fetchServiceInfo(f),
layers:this._fetchServiceLayers(f),itemData:this._fetchItemData(c,v)}).then(K.hitch(this,function(a){r.resolve(K.mixin({},a))})):r.reject(this.i18n.publishWizard.errors.noItemUrl||{message:"Item does not specify a url."});return r},_fetchServiceInfo:function(v){return this._util.request({url:v})},_fetchServiceLayers:function(v){return this._util.request({url:v+"/layers"}).then(K.hitch(this,function(r){return{layers:r.layers}}))},_fetchItemData:function(v,r){return this._util.request({url:v}).then(K.hitch(this,
function(f){var c=[],a="features"===this._type,b;K.forEach(f&&f.layers||[],K.hitch(this,function(p,q){p&&(b=K.mixin({},a?{id:p.id}:{id:q,layerUrl:r.url+"/"+p.id,layerItemId:r.id,layerDefinition:p.layerDefinition}),p.popupInfo&&(b=K.mixin(b,{popupInfo:p.popupInfo})),!a&&esri.isDefined(p.showLegend)&&(b=K.mixin(b,{showLegend:p.showLegend})));c.push(b)}));return c&&c.length?K.mixin(f,{layers:c}):null}))},_computeScale:function(v,r){var f={width:esri.config.defaults.map.width,extent:new esri.geometry.Extent(v),
spatialReference:v.spatialReference||r};return esri.geometry.getScale(f)},_fetchTileLayerInfo:function(v,r){var f=new K.Deferred,c=r&&"vectorTiles"===r,a=function(b){return-1<window.location.href.indexOf("https:")&&b&&-1<b.indexOf("http:")};-1<(c?v.indexOf("/VectorTileServer"):v.indexOf("/MapServer"))?this._util.request({url:v,timeout:1E4},{useProxy:a(v),addToken:!1}).then(K.hitch(this,function(b){b&&b.singleFusedMapCache&&b.tileInfo?f.resolve(this._addScaleLabels(b.tileInfo)):b&&c&&b.tileInfo?f.resolve(b.tileInfo):
f.reject({title:this.i18n.common.notice,message:this.i18n.publishTileServiceDlg.noTilingSchemeFound})}),K.hitch(this,function(b){f.reject({title:this.i18n.common.notice,message:this.i18n.publishTileServiceDlg.mapServiceError})})):f.reject({title:this.i18n.common.notice,message:this.i18n.publishTileServiceDlg.badMapServiceUrl});return f},_addScaleLabels:function(v){if(v&&v.lods)return K.forEach(v&&v.lods||[],K.hitch(this,function(r){r.label="1:"+K.number.format(Math.round(r.scale),{pattern:"#,###,###,##0"})})),
v},_calculateConstraints:function(v){var r={minScale:null,maxScale:null},f=function(c){if(!esri.isDefined(r.minScale))r.minScale=c.minScale;else if(c.minScale>r.minScale||0===c.minScale)r.minScale=c.minScale;esri.isDefined(r.maxScale)?c.maxScale<r.maxScale&&(r.maxScale=c.maxScale):r.maxScale=c.maxScale};v?v.layers&&K.forEach(v.layers,f):(r.minScale=this.SCALE_MIN,r.maxScale=this.SCALE_MAX);return r},_normalizeMaxScale:function(v,r,f){if(v<=r&&f){for(r=f.length-1;0<=r;r--)if(v<f[r].scale){var c=r+
2;break}c=c>f.length-1?f.length-1:c;return f[c].scale}return r}})})},"esri/dijit/VisibleScaleRangeSlider":function(){define("../kernel ./_EventedWidget ./_Tooltip ./VisibleScaleRangeSlider/_RecommendedScaleRangeBounds ./VisibleScaleRangeSlider/_SlideEvent ./VisibleScaleRangeSlider/ScaleMenu ./VisibleScaleRangeSlider/ScalePreview ./VisibleScaleRangeSlider/ScaleRanges dijit/form/DropDownButton dijit/popup dojo/_base/array dojo/_base/lang dojo/aspect dojo/debounce dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/string dojox/form/HorizontalRangeSlider dojo/i18n!../nls/jsapi".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B){G=G.createSubclass([w],{declaredClass:"esri.dijit.VisibleScaleRangeSlider",baseClass:"esriVisibleScaleRangeSlider",css:{currentScaleIndicator:"esriCurrentScaleIndicator",currentScaleIndicatorContainer:"esriCurrentScaleIndicatorContainer",scaleIndicator:"esriScaleIndicator",scaleIndicatorContainer:"esriScaleIndicatorContainer"},disabled:!1,map:null,layer:null,region:"en-US",minScale:0,maxScale:0,intermediateChanges:!1,labels:B.widgets.visibleScaleRangeSlider,
_slider:null,_currentScaleIndicator:null,_scalePreview:null,_maxScaleButton:null,_minScaleButton:null,_mapUpdateHandler:null,_scaleRanges:null,_scheduleScaleRangeChangeEmit:null,_getSliderIndexRange:function(C){C=Math.floor(C);return{min:C,max:C+.99999}},_setDisabledAttr:function(C){this._slider.set("disabled",C);this._maxScaleButton.set("disabled",C);this._minScaleButton.set("disabled",C);this._set("disabled",C)},_setMapAttr:function(C){this._set("map",C);this._mapUpdateHandler&&this._mapUpdateHandler.remove();
this._slider.set("disabled",!0);this._ensureMap().then(this._updateFromMap)},_setConstraintsAttr:function(C){this._set("constraints",C);this._setUpSlider({minScale:C.minScale,maxScale:C.maxScale})},_updateFromMap:function(C){var z=C.getMinScale(),D=C.getMaxScale();this._setUpSlider({minScale:z,maxScale:D});this._updateCurrentScaleIndicator();C=C.on("zoom-end",t.hitch(this,this._updateCurrentScaleIndicator));this.own(C);this._mapUpdateHandler=C},_setUpSlider:function(C){var z=C.maxScale;C=C.minScale;
this._slider.set("disabled",this.get("disabled"));this._scaleRanges.set("scaleRangeBounds",{minScale:C,maxScale:z});var D=this._getSliderIndexRange(this._scaleRanges.length-1);this._slider.set("maximum",D.max);this._silentSliderUpdate({maxScale:z,minScale:C})},_ensureMap:function(){return this._untilLoaded(this.map)},_untilLoaded:function(C){var z=new k;if(C)if(C.loaded)z.resolve(C);else C.on("load",function(){z.resolve(C)});else z.reject(Error("could not load resource"));return z.promise},_updateCurrentScaleIndicator:function(){var C=
this._scaleRanges.clampScale(this.map.getScale());C=this._mapScaleToSlider(C)/this._slider.maximum;this.isLeftToRight()||(C=1-C);d.set(this._currentScaleIndicator,{left:100*C+"%"})},_setLayerAttr:function(C){this._set("layer",C);this._ensureScaleRangeProvider().then(this._ensureLayer).then(this._updateMinMaxScaleFromLayer)},_ensureLayer:function(){return this._untilLoaded(this.layer)},_updateMinMaxScaleFromLayer:function(C){this.set({minScale:C.minScale,maxScale:C.maxScale})},_mapSliderToScale:function(C){var z=
this._getSliderIndexRange(C),D=this._scaleRanges.findScaleRangeByIndex(C);return this._mapToRange(C,z.min,z.max,D.minScale,D.maxScale)},_mapToRange:function(C,z,D,E,A){return E+(C-z)*(A-E)/(D-z)},_setRegionAttr:function(C){this._set("region",C);this._scalePreview.set("source",a.getScalePreviewSource(C))},_getMinimumAttr:function(){return this._mapSliderToScale(this._slider.minimum)},_getMaximumAttr:function(){return this._mapSliderToScale(this._slider.maximum)},_getActualMaxScaleAttr:function(){return this._scaleRanges.clampMaxScale(this.maxScale)},
_setMaxScaleAttr:function(C){this._set("maxScale",C);this._ensureScaleRangeProvider().then(t.hitch(this,function(){C=this._scaleRanges.clampMaxScale(C);this._set("maxScale",this._layerConstrainedMaxScale(C));this._silentSliderUpdate({maxScale:C});this._scheduleScaleRangeChangeEmit()}))},_silentSliderUpdate:function(C){var z=C.minScale,D=C.maxScale,E=this._scaleRanges;C=this._slider;void 0!==z&&(z=this._mapScaleToSlider(E.clampMinScale(z)),C.set("value",z,!1,!1));void 0!==D&&(z=this._mapScaleToSlider(E.clampMaxScale(D)),
C.set("value",z,!1,!0))},_mapScaleToSlider:function(C){var z=this._scaleRanges.scaleToRangeIndex(C),D=this._getSliderIndexRange(z);z=this._scaleRanges.findScaleRangeByIndex(z);return this._mapToRange(C,z.minScale,z.maxScale,D.min,D.max)},_getActualMinScaleAttr:function(){return this._scaleRanges.clampMinScale(this.minScale)},_setMinScaleAttr:function(C){this._set("minScale",C);this._ensureScaleRangeProvider().then(t.hitch(this,function(){C=this._scaleRanges.clampMinScale(C);this._set("minScale",this._layerConstrainedMinScale(C));
this._silentSliderUpdate({minScale:C});this._scheduleScaleRangeChangeEmit()}))},_ensureScaleRangeProvider:function(){if(this.map)return this._ensureMap();var C=new k;this.constraints&&C.resolve();return C.promise},_emitScaleRangeChange:function(){this.emit("scale-range-change",{minScale:this.minScale,maxScale:this.maxScale})},_layerConstrainedMinScale:function(C){var z=t.getObject("tileInfo.lods",!1,this.layer)||[];var D=this.layer&&("esri.layers.RasterXLayer"===this.layer.declaredClass||"esri.layers.ArcGISImageServiceLayer"===
this.layer.declaredClass);return 0<z.length&&!D?(z=z[0].scale,D=this._scaleRanges.get("firstRange"),(D=.85<this._mapToRange(C,D.maxScale,D.minScale,0,1))?z:C>z?z:C):this._scaleRanges.beyondMinScale(C)?0:C},_layerConstrainedMaxScale:function(C){var z=t.getObject("tileInfo.lods",!1,this.layer)||[],D=this.layer&&("esri.layers.RasterXLayer"===this.layer.declaredClass||"esri.layers.ArcGISImageServiceLayer"===this.layer.declaredClass);return 0<z.length&&!D?(z=z[z.length-1].scale,C<z?z:C):this._scaleRanges.beyondMaxScale(C)?
0:C},constructor:function(){this._scaleRanges=new (a.createSubclass([v]));this._scheduleScaleRangeChangeEmit=n(t.hitch(this,this._emitScaleRangeChange),0);this._ensureMap=t.hitch(this,this._ensureMap);this._ensureScaleRangeProvider=t.hitch(this,this._ensureScaleRangeProvider);this._ensureLayer=t.hitch(this,this._ensureLayer);this._updateMinMaxScaleFromLayer=t.hitch(this,this._updateMinMaxScaleFromLayer);this._updateFromMap=t.hitch(this,this._updateFromMap)},buildRendering:function(){this.inherited(arguments);
this._initSlider();this._initScalePreview();this._initCurrentScaleIndicator();this._initScaleMenus()},_initSlider:function(){var C=new (y.createSubclass([r]))({baseClass:"esriHorizontalSlider",showButtons:!1,intermediateChanges:this.intermediateChanges,disabled:!0});this._slider=C;C.placeAt(this.domNode);C.startup();this.own(C.on("slide-onmousemove, slidemax-onmousemove",t.hitch(this,function(z){this._updateScalePreview(z.movable.handle)})),C.on("slide-onmovestop, slidemax-onmovestop",t.hitch(this,
function(z){l.contains(z.movable.handle,"dijitSliderThumbHover")||this._closeScalePreview()})),C.on("change",t.hitch(this,function(){var z=Math.round(this._mapSliderToScale(this._getSliderMin())),D=Math.round(this._mapSliderToScale(this._getSliderMax()));this.set({minScale:z,maxScale:D})})),m.after(C,"_setValueAttr",t.hitch(this,this._updateLabelMenus)))},_getSliderMin:function(){return this._slider.get("value")[0]},_getSliderMax:function(){return this._slider.get("value")[1]},_updateLabelMenus:function(){var C=
this._maxScaleButton;this._minScaleButton.set("label",this._scaleRanges.getScaleRangeLabel(this._getSliderMin()));C.set("label",this._scaleRanges.getScaleRangeLabel(this._getSliderMax()))},_initScalePreview:function(){var C=new c;C.startup();p.moveOffScreen(C);q.forEach([this._slider._movable.handle,this._slider._movableMax.handle],function(z){z.onmouseenter=t.hitch(this,this._updateScalePreview,z);z.onmouseleave=t.hitch(this,this._closeScalePreview)},this);this.own(C);this._scalePreview=C},_closeScalePreview:function(){p.close(this._scalePreview)},
_updateScalePreview:function(C){if(!this.disabled){var z=this._scalePreview;p.moveOffScreen(z);var D=this._slider,E=C===D.sliderHandle?this._getSliderMin():this._getSliderMax(),A=e.position(C),F=e.position(z.domNode);D=e.position(D.sliderBarContainer);var H=this.isLeftToRight();E=this._scaleRanges.getScalePreviewSpriteBackgroundPosition(E);z.set("backgroundPosition",E);A=A.x-D.x;F=.5*F.w;p.open({parent:this,popup:z,around:C,orient:A<F?H?["above","below"]:["above-alt","below-alt"]:A<D.w-F?["above-centered",
"below-centered"]:H?["above-alt","below-alt"]:["above","below"]})}},_initCurrentScaleIndicator:function(){if(this.map){var C=h.create("div",{className:this.css.scaleIndicatorContainer+" "+this.css.currentScaleIndicatorContainer},this._slider.sliderBarContainer),z=h.create("div",{className:this.css.scaleIndicator+" "+this.css.currentScaleIndicator},C);this._currentScaleIndicator=z;this.createTooltip(z);C=u(z,"mouseover",t.hitch(this,function(){var D=x.substitute(this.labels.currentScaleTooltip,{scaleLabel:this._scaleRanges.getScaleRangeLabel(this._mapScaleToSlider(this.map.getScale()))});
this.findTooltip(z).set("label",D)}));this.own(C)}},_initScaleMenus:function(){var C=new f,z=new f;this.own(C.on("scale-selected",t.hitch(this,function(A){D.closeDropDown();this.set("minScale",A.scale)})));this.own(z.on("scale-selected",t.hitch(this,function(A){E.closeDropDown();this.set("maxScale",A.scale)})));var D=new b({baseClass:"esriScaleMenuButton esriMinScaleMenuButton",dropDown:C,dropDownPosition:["below","above"]});D.toggleDropDown();D.toggleDropDown();var E=new b({baseClass:"esriScaleMenuButton esriMaxScaleMenuButton",
dropDown:z,dropDownPosition:["below","above"]});E.toggleDropDown();E.toggleDropDown();this.own(m.before(D,"openDropDown",t.hitch(this,function(){var A=this._scaleRanges.findScaleRange(this.get("actualMaxScale")).minScale;C.set("options",{label:D.label,scale:{current:this.get("actualMinScale"),map:this._getMapScale(),min:this.get("minimum"),max:A}})})));this.own(m.before(E,"openDropDown",t.hitch(this,function(){var A=this._scaleRanges.findScaleRange(this.get("actualMinScale")).maxScale;z.set("options",
{label:E.label,scale:{current:this.get("actualMaxScale"),map:this._getMapScale(),min:A,max:this.get("maximum")}})})));D.placeAt(this.domNode);E.placeAt(this.domNode);C.startup();z.startup();D.startup();E.startup();this._minScaleButton=D;this._maxScaleButton=E},_getMapScale:function(){return this.map?this.map.getScale():-1},startup:function(){this.inherited(arguments);this.watch("intermediateChanges",function(C,z,D){this._slider.set(C,D)})}});t.setObject("dijit.VisibleScaleRangeSlider",G,K);return G})},
"esri/dijit/_Tooltip":function(){define(["dijit/Tooltip","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom"],function(K,G,w,v,r){return w(null,{declaredClass:"esri.dijit._Tooltip",_tooltips:null,constructor:function(){this._tooltips=[]},startup:function(){this.inherited(arguments);this._started||G.forEach(this._tooltips,function(f){f.startup()})},destroy:function(){this.inherited(arguments);G.forEach(this._tooltips,function(f){f.destroy()});this._tooltips=null},createTooltips:function(f){G.forEach(f,
function(c){this.createTooltip(c.node,c.label)},this)},createTooltip:function(f,c){var a=this._getConnectId(f);a&&(a="object"===typeof c?v.mixin({},c,{connectId:a}):{connectId:a,label:c},a=new K(a),this._started&&a.startup(),this._tooltips.push(a))},_getConnectId:function(f){var c;if(f){if(v.isArray(f)){var a=[];G.forEach(f,function(b){(c=this._getNode(b))&&a.push(c)});if(0===a.length)return}else if(a=this._getNode(f),!a)return;return a}},_getNode:function(f){return r.byId(f.domNode||f)},findTooltip:function(f){var c=
this._getNode(f),a;if(f){f=this._tooltips;var b=f.length;for(var p=0;p<b;p++){var q=f[p];if(a=v.isArray(q.connectId)?-1<G.indexOf(q.connectId,c):q.connectId===c)return q}}}})})},"esri/dijit/VisibleScaleRangeSlider/_RecommendedScaleRangeBounds":function(){define(["./recommendedScales","dojo/_base/declare"],function(K,G){return G(null,{declaredClass:"esri.dijit.VisibleScaleRangeSlider._RecommendedScaleRangeBounds",beyondMinScale:function(w){var v=this.get("firstRange"),r=v.minScale;v=K.getRecommendedScale(v.id)||
v.maxScale;return w<=r&&w>v},beyondMaxScale:function(w){var v=this.get("lastRange"),r=v.maxScale;v=K.getRecommendedScale(v.id)||v.minScale;return w<v&&w>=r}})})},"esri/dijit/VisibleScaleRangeSlider/recommendedScales":function(){define(["dojo/_base/lang"],function(K){var G={_recommendedScales:{world:1E8,continent:5E7,countriesBig:25E6,countriesSmall:12E6,statesProvinces:6E6,stateProvince:3E6,counties:15E5,county:75E4,metropolitanArea:32E4,cities:16E4,city:8E4,town:4E4,neighborhood:2E4,streets:1E4,
street:5E3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100},getRecommendedScale:function(w){return G._recommendedScales[w]},all:function(){return K.clone(G._recommendedScales)}};return G})},"esri/dijit/VisibleScaleRangeSlider/_SlideEvent":function(){define(["dojo/_base/array","dojo/_base/declare"],function(K,G){return G(null,{declaredClass:"esri.dijit.VisibleScaleRangeSlider._SlideEvent",_events:["onMouseMove","onFirstMove",{name:"onMoveStop",hookTo:"destroy"}],postCreate:function(){this.inherited(arguments);
this._extendMover(this._movable);this._extendMover(this._movableBar,"rangebar");this._extendMover(this._movableMax,"max")},_extendMover:function(w,v){if(w){var r=w.mover,f={};K.forEach(this._events,function(c){if("object"===typeof c){var a=c.name;var b=c.hookTo}else a=c;var p=r.prototype[a]||function(){};var q="slide"+(v||"")+"-"+a.toLowerCase();var t=function(){p.apply(this,arguments);this.widget.emit(q,{movable:w})};if(b){var m=r.prototype[b];f[b]=function(){m.apply(this,arguments);t.apply(this,
arguments)}}f[a]=t});r.extend(f)}}})})},"esri/dijit/VisibleScaleRangeSlider/ScaleMenu":function(){define("../../kernel ../_EventedWidget ../_Tooltip ./recommendedScales ./ScaleRanges dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-prop dojo/dom-style dojo/has dojo/keys dojo/number dojo/on dojo/query dojo/string dojox/html/entities dojox/lang/functional/object dojo/i18n!../../nls/jsapi dojo/text!./templates/ScaleMenu.html dijit/form/TextBox".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B){G=a([G,f,c,w],{declaredClass:"esri.dijit.VisibleScaleRangeSlider.ScaleMenu",templateString:B,baseClass:"esriScaleMenu",labels:y.widgets.visibleScaleRangeSlider,css:{header:"esriHeader",section:"esriSection",content:"esriContent",current:"esriCurrent",input:"esriInput",list:"esriList",item:"esriItem",inline:"esriInline",selectable:"esriSelectable",hidden:"esriHidden"},_elementValueMap:null,_elements:null,_scaleRangeCategories:null,_scaleRanges:null,
_rangeToScaleAndNodeLookup:null,constructor:function(){this._scaleRanges=new r},buildRendering:function(){this.inherited(arguments);this._rangeToScaleAndNodeLookup={map:{scale:null,node:this.dap_mapScaleItem}};var C=this.labels,z=C.featuredScaleLabels,D=v.all(),E=this.css.item+" "+this.css.selectable,A;b.forEach(x.keys(D),function(I){A=z[I];var L=D[I],J=g.substitute(A,{scaleLabel:this._formatScale(L)});J=t.create("li",{innerHTML:J,className:E},this.dap_recommendedScales);this._rangeToScaleAndNodeLookup[I]=
{scale:L,node:J}},this);var F=t.create("span",{innerHTML:C.setTo,className:this.css.inline}),H=t.create("span",{innerHTML:C.selectOne,className:this.css.inline});m.set(this.dap_scaleListHeader,"innerHTML",g.substitute(C.setToSelectOne,{setTo:F.outerHTML,selectOne:H.outerHTML}))},_formatScale:function(C){return"1:"+h.format(C)},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,e.selector("."+this.css.item+"."+this.css.selectable,"click"),p.hitch(this,function(C){C=C.target===
this.dap_mapScaleItem?this.options.scale.map:this._parseScale(C.target.innerHTML);this._emitScaleSelected(C)})));this.dap_scaleInput.on("keyDown",p.hitch(this,function(C){C.keyCode===l.ENTER&&this._handleCustomScaleInput()}));this.createTooltip(this.dap_scaleInput,this.labels.customScaleInputTooltip)},_emitScaleSelected:function(C){this.emit("scale-selected",{scale:C})},_handleCustomScaleInput:function(){var C=this._parseScale(this.dap_scaleInput.get("value"));isNaN(C)||this._emitScaleSelected(this._scaleRanges.clampScale(C))},
_parseScale:function(C){C=u.decode(C).replace(/.*\(/,"").replace(/\).*$/,"").replace(/.*1:/,"").replace(/[^0-9.\s]/g,"");return h.parse(C)},_setOptionsAttr:function(C){var z=C.scale,D=this._formatScale(z.current);m.set(this.dap_currentScaleLabel,"innerHTML",C.label);this.dap_scaleInput.set("value",D,!1);D=g.substitute(this.labels.featuredScaleLabels.current,{scaleLabel:this._formatScale(z.map)});this._rangeToScaleAndNodeLookup.map.scale=z.map;m.set(this.dap_mapScaleItem,"innerHTML",D);q.toggle(this.dap_mapScaleItem,
this.css.hidden,-1===z.map);this._scaleRanges.set("scaleRangeBounds",{minScale:z.min,maxScale:z.max});this._hideOutOfScaleRanges();this._set("options",C)},_hideOutOfScaleRanges:function(){var C=d("."+this.css.item+"."+this.css.selectable,this.dap_recommendedScales),z=this._scaleRanges;b.forEach(x.keys(this._rangeToScaleAndNodeLookup),function(D){D=this._rangeToScaleAndNodeLookup[D];q.toggle(D.node,this.css.hidden,!z.contains(D.scale))},this);C=C.every(function(D){return"none"===n.get(D,"display")});
q.toggle(this.dap_recommendedScaleSection,this.css.hidden,C)}});p.setObject("dijit.ScaleMenu",G,K);return G})},"esri/dijit/VisibleScaleRangeSlider/ScaleRanges":function(){define(["./scalePreviewUtil","dojo/_base/array","dojo/_base/declare","dojo/Stateful","dojo/i18n!../../nls/jsapi"],function(K,G,w,v,r){w=w(v,{_scaleRangeStops:[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},
{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"state",minScale:3999999},{id:"states",minScale:6999999},{id:"country",minScale:14999999},{id:"countries",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:147914382}],_allRanges:null,_ranges:null,length:0,constructor:function(){this._allRanges=
this.getScaleRanges()},_scaleRangeBoundsSetter:function(f){this._ranges=f=this.getScaleRanges(f.maxScale,f.minScale);this.length=f.length},getScaleRanges:function(f,c){var a=this._scaleRangeStops,b=a.length;f=0<=f?f:0;c=0<c?c:a[b-1].minScale;var p=f;var q=[];for(var t=0;t<b;t++){var m=Math.min(a[t].minScale,c);var n=Math.min(m,c);f<=m&&p<c&&q.push({id:a[t].id,maxScale:Math.max(p,f),minScale:n});p=n+1}q.reverse();return this._ensureValidBoundaryRanges(q)},_ensureValidBoundaryRanges:function(f){var c=
f[0];c.minScale===c.maxScale&&(f.shift(),f[0].minScale+=1);c=f[f.length-1];c.minScale===c.maxScale&&(f.pop(),--f[f.length-1].maxScale);return f},getScalePreviewSpriteBackgroundPosition:function(f){f=this._toFullRangeIndex(f);return K.getScalePreviewSpriteBackgroundPosition(f)},_toFullRangeIndex:function(f){f=this.findScaleRangeByIndex(Math.floor(f));for(var c=this._allRanges,a=c.length,b=0,p=0;p<a;p++)if(c[p].id===f.id){b=p;break}return b},getScaleRangeLabel:function(f){f=this._ranges[this._clampScaleRangeIndex(f)];
return r.widgets.visibleScaleRangeSlider.scaleRangeLabels[f.id]},findScaleRange:function(f){var c=this._ranges;if(f>=c[0].maxScale)return c[0];if(f<=c[c.length-1].minScale)return c[c.length-1];for(var a=0;a<c.length;a++){var b=c[a];if(f>=b.maxScale&&f<=b.minScale){var p=b;break}}return p},findScaleRangeByIndex:function(f){f=this._clampScaleRangeIndex(f);return this._ranges[f]},clampScale:function(f){return Math.min(this.get("minScale"),Math.max(this.get("maxScale"),f))},_minScaleGetter:function(){return this.get("firstRange").minScale},
_maxScaleGetter:function(){return this.get("lastRange").maxScale},_firstRangeGetter:function(){return this._ranges[0]},_lastRangeGetter:function(){var f=this._ranges;return f[f.length-1]},clampMinScale:function(f){return 0===f?this.get("minScale"):this.clampScale(f)},clampMaxScale:function(f){return this.clampScale(f)},_clampScaleRangeIndex:function(f){if(0>=f)return 0;var c=this._ranges.length-1;return f>c?c:Math.floor(f)},scaleToRangeIndex:function(f){return G.indexOf(this._ranges,this.findScaleRange(f))},
contains:function(f){for(var c=this._ranges,a=!1,b,p=0;p<c.length;p++)if(b=c[p],f>=b.maxScale&&f<=b.minScale){a=!0;break}return a}});w.getScalePreviewSource=function(f){return K.getScalePreviewSource(f)};return w})},"esri/dijit/VisibleScaleRangeSlider/scalePreviewUtil":function(){define(["dojo/_base/array","require"],function(K,G){var w={_supportedRegions:"ar-iq ar-kw bg-bg cs-cz da-dk da-gl da-gl de-at de-ch de-de de-li el-gr en-ae en-au en-ca en-ca en-eg en-gb en-hk en-id en-ie en-ie en-il en-in en-iq en-ke en-lu en-mo en-my en-nz en-rw en-sg en-us en-us en-vi en-vi en-wo en-za es-ar es-ar es-bo es-bo es-cl es-cl es-co es-co es-cr es-cr es-es es-gt es-gt es-mx es-mx es-ni es-ni es-pe es-pe es-pr es-pr es-sv es-sv es-ve et-ee fi-fi fi-fi fr-ci fr-fr fr-ma fr-mg fr-ml fr-tn is-is is-is it-it ja-jp ja-jp ko-kr lt-lt lv-lv nl-be nl-nl nl-sr nl-sr nn-no nn-no pl-pl pt-br pt-br pt-pt ro-ro ru-ru sk-sk sv-se sv-se th-th zh-cn zh-tw".split(" "),
_defaultRegion:"en-us",_getSupportedRegion:function(v){v=v?v.toLowerCase():"";return-1<K.indexOf(w._supportedRegions,v)?v:w._defaultRegion},getScalePreviewSource:function(v){v="./images/scalePreview/"+w._getSupportedRegion(v)+".jpg";return"url("+G.toUrl(v)+")"},getScalePreviewSpriteBackgroundPosition:function(v){return"-"+v%5*128+"px -"+128*Math.floor(v/5)+"px"}};return w})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(K,G,w){var v={};
G.mixin(w,{keys:function(r){var f=[],c;for(c in r)c in v||f.push(c);return f},values:function(r){var f=[],c;for(c in r)c in v||f.push(r[c]);return f},filterIn:function(r,f,c){c=c||K.global;f=w.lambda(f);var a={},b;for(b in r)if(!(b in v)){var p=r[b];f.call(c,p,b,r)&&(a[b]=p)}return a},forIn:function(r,f,c){c=c||K.global;f=w.lambda(f);for(var a in r)a in v||f.call(c,r[a],a,r);return c},mapIn:function(r,f,c){c=c||K.global;f=w.lambda(f);var a={},b;for(b in r)b in v||(a[b]=f.call(c,r[b],b,r));return a}});
return w})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(K,G,w){var v=G.getObject("lang.functional",!0,K),r={},f=1<"ab".split(/a*/).length?String.prototype.split:function(b){var p=this.split.call(this,b);(b=b.exec(this))&&0==b.index&&p.unshift("");return p},c=function(b){var p=[],q=f.call(b,/\s*->\s*/m);if(1<q.length)for(;q.length;)b=q.pop(),p=q.pop().split(/\s*,\s*|\s+/m),q.length&&q.push("(function("+p.join(", ")+"){ return ("+b+"); })");
else if(b.match(/\b_\b/))p=["_"];else{q=b.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m);var t=b.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(q||t)q&&(p.push("$1"),b="$1"+b),t&&(p.push("$2"),b+="$2");else{q=b.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[];var m={};w.forEach(q,function(n){m.hasOwnProperty(n)||(p.push(n),m[n]=1)})}}return{args:p,body:b}},a=function(b){return b.length?function(){var p=b.length-1,q=v.lambda(b[p]).apply(this,arguments);for(--p;0<=p;--p)q=v.lambda(b[p]).call(this,q);return q}:function(p){return p}};G.mixin(v,{rawLambda:function(b){return c(b)},buildLambda:function(b){b=c(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(b){if("function"==typeof b)return b;
if(b instanceof Array)return a(b);if(r.hasOwnProperty(b))return r[b];var p=c(b);return r[b]=new Function(p.args,"return ("+p.body+");")},clearLambdaCache:function(){r={}}});return v})},"esri/dijit/VisibleScaleRangeSlider/ScalePreview":function(){define("../../kernel dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has dojo/i18n!../../nls/jsapi dojo/text!./templates/ScalePreview.html".split(" "),function(K,G,w,v,r,f,c,a,b){G=v([w,G],{declaredClass:"esri.dijit.VisibleScaleRangeSlider.ScalePreview",
baseClass:"esriScalePreview",templateString:b,labels:a.widgets.visibleScaleRangeSlider,css:{header:"esriHeader",thumbnail:"esriThumbnail"},source:null,_setSourceAttr:function(p){this.source!==p&&(this._set("source",p),f.set(this.dap_scalePreviewThumbnail,"backgroundImage",p))},backgroundPosition:null,_setBackgroundPositionAttr:function(p){this.backgroundPosition!==p&&(this._set("backgroundPosition",p),f.set(this.dap_scalePreviewThumbnail,"backgroundPosition",p))}});r.setObject("dijit.ScalePreview",
G,K);return G})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(K,G,w,v){return K("dojox.form.HorizontalRangeSlider",[v,G],{templateString:w})})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){var l=function(d,g){return d-g};p=K("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=w.map(this.value,function(d){return parseInt(d,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(l);var d=this,g=K(h,{constructor:function(){this.widget=d}});this._movableMax=new t(this.sliderHandleMax,{mover:g});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);g=K(e,{constructor:function(){this.widget=d}});this._movableBar=new t(this.progressBar,{mover:g});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(d){if(!(this.disabled||this.readOnly||d.altKey||d.ctrlKey)){var g=d.target===this.sliderHandleMax,u=d.target===this.progressBar,x=G.delegate(b,this.isLeftToRight()?{PREV_ARROW:b.LEFT_ARROW,NEXT_ARROW:b.RIGHT_ARROW}:{PREV_ARROW:b.RIGHT_ARROW,NEXT_ARROW:b.LEFT_ARROW}),y=0,B=!1;switch(d.keyCode){case x.HOME:this._setValueAttr(this.minimum,!0,g);r.stop(d);return;case x.END:this._setValueAttr(this.maximum,!0,g);r.stop(d);return;case x.PREV_ARROW:case x.DOWN_ARROW:B=
!0;case x.NEXT_ARROW:case x.UP_ARROW:y=1;break;case x.PAGE_DOWN:B=!0;case x.PAGE_UP:y=this.pageIncrement;break;default:this.inherited(arguments);return}B&&(y=-y);y&&(u?this._bumpValue([{change:y,useMaxValue:!1},{change:y,useMaxValue:!0}]):this._bumpValue(y,g),r.stop(d))}},_onHandleClickMax:function(d){this.disabled||this.readOnly||(f("ie")||n.focus(this.sliderHandleMax),r.stop(d))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(d,
g){var u=G.isArray(d)?[this._getBumpValue(d[0].change,d[0].useMaxValue),this._getBumpValue(d[1].change,d[1].useMaxValue)]:this._getBumpValue(d,g);this._setValueAttr(u,!0,g)},_getBumpValue:function(d,g){var u=g?1:0,x=c.getComputedStyle(this.sliderBarContainer),y=a.getContentBox(this.sliderBarContainer,x);x=this.discreteValues;u=this.value[u];if(1>=x||Infinity==x)x=y[this._pixelCount];x--;u=this.maximum>this.minimum?(u-this.minimum)*x/(this.maximum-this.minimum)+d:0;0>u&&(u=0);u>x&&(u=x);return u*(this.maximum-
this.minimum)/x+this.minimum},_onBarClick:function(d){this.disabled||this.readOnly||(f("ie")||n.focus(this.progressBar),r.stop(d))},_onRemainingBarClick:function(d){if(!this.disabled&&!this.readOnly){f("ie")||n.focus(this.progressBar);var g=a.position(this.sliderBarContainer,!0),u=a.position(this.progressBar,!0),x=d[this._mousePixelCoord],y=u[this._startingPixelCoord];u=y+u[this._pixelCount];y=this._isReversed()?x<=y:x>=u;x=this._isReversed()?g[this._pixelCount]-x+g[this._startingPixelCoord]:x-g[this._startingPixelCoord];
this._setPixelValue(x,g[this._pixelCount],!0,y);r.stop(d)}},_setPixelValue:function(d,g,u,x){this.disabled||this.readOnly||(d=this._getValueByPixelValue(d,g),this._setValueAttr(d,u,x))},_getValueByPixelValue:function(d,g){var u=this.discreteValues;if(1>=u||Infinity==u)u=g;u--;return(this.maximum-this.minimum)*Math.round((0>d?0:g<d?g:d)/(g/u))/u+this.minimum},_setValueAttr:function(d,g,u){var x=G.clone(this.value);G.isArray(d)?x=d:x[u?1:0]=d;this._lastValueReported="";this.valueNode.value=d=x;x.sort(l);
this.sliderHandle.setAttribute("aria-valuenow",x[0]);this.sliderHandleMax.setAttribute("aria-valuenow",x[1]);m.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(g,u)},_printSliderBar:function(d,g){var u=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0,x=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,y=u;u>x&&(u=x,x=y);var B=this._isReversed()?100*(1-u):100*u,C=this._isReversed()?100*(1-x):100*x,z=this._isReversed()?
100*(1-x):100*u;if(d&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),y=this.slideDuration/10,0!==y){0>y&&(y=0-y);var D={},E={},A={};D[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:B,units:"%"};E[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:C,units:"%"};A[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],
end:z,units:"%"};A[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(x-u),units:"%"};u=v.animateProperty({node:this.sliderHandle.parentNode,duration:y,properties:D});x=v.animateProperty({node:this.sliderHandleMax.parentNode,duration:y,properties:E});y=v.animateProperty({node:this.progressBar,duration:y,properties:A});k.combine([u,x,y]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=B+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=
C+"%",this.progressBar.style[this._handleOffsetCoord]=z+"%",this.progressBar.style[this._progressPixelSize]=100*(x-u)+"%"}});var h=K("dijit.form._SliderMoverMax",q,{onMouseMove:function(d){var g=this.widget,u=g._abspos;u||(u=g._abspos=a.position(g.sliderBarContainer,!0),g._setPixelValue_=G.hitch(g,"_setPixelValue"),g._isReversed_=g._isReversed());d=d[g._mousePixelCoord]-u[g._startingPixelCoord];g._setPixelValue_(g._isReversed_?u[g._pixelCount]-d:d,u[g._pixelCount],!1,!0)},destroy:function(d){q.prototype.destroy.apply(this,
arguments);var g=this.widget;g._abspos=null;g._setValueAttr(g.value,!0)}}),e=K("dijit.form._SliderBarMover",q,{onMouseMove:function(d){var g=this.widget;if(!g.disabled&&!g.readOnly){var u=g._abspos,x=g._bar,y=g._mouseOffset;u||(u=g._abspos=a.position(g.sliderBarContainer,!0),g._setPixelValue_=G.hitch(g,"_setPixelValue"),g._getValueByPixelValue_=G.hitch(g,"_getValueByPixelValue"),g._isReversed_=g._isReversed());x||(x=g._bar=a.position(g.progressBar,!0));y||(y=g._mouseOffset=d[g._mousePixelCoord]-x[g._startingPixelCoord]);
d=d[g._mousePixelCoord]-u[g._startingPixelCoord]-y;pixelValues=[d,d+x[g._pixelCount]];pixelValues.sort(l);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=x[g._pixelCount]);pixelValues[1]>=u[g._pixelCount]&&(pixelValues[1]=u[g._pixelCount],pixelValues[0]=u[g._pixelCount]-x[g._pixelCount]);u=[g._getValueByPixelValue(g._isReversed_?u[g._pixelCount]-pixelValues[0]:pixelValues[0],u[g._pixelCount]),g._getValueByPixelValue(g._isReversed_?u[g._pixelCount]-pixelValues[1]:pixelValues[1],u[g._pixelCount])];
g._setValueAttr(u,!1,!1)}},destroy:function(){q.prototype.destroy.apply(this,arguments);var d=this.widget;d._abspos=null;d._bar=null;d._mouseOffset=null;d._setValueAttr(d.value,!0)}});return p})},"dojox/fx":function(){define(["./fx/_base"],function(K){return K})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),function(K,G,w,v,r,f,c,a,b){K=G.getObject("dojox.fx",!0);
G.mixin(K,{anim:w.anim,animateProperty:w.animateProperty,fadeTo:w._fade,fadeIn:w.fadeIn,fadeOut:w.fadeOut,combine:v.combine,chain:v.chain,slideTo:v.slideTo,wipeIn:v.wipeIn,wipeOut:v.wipeOut});K.sizeTo=function(p){var q=p.node=r.byId(p.node),t=p.method||"chain";p.duration||(p.duration=500);"chain"==t&&(p.duration=Math.floor(p.duration/2));var m,n,k,l,h,e=null,d=function(g){return function(){var u=f.getComputedStyle(g),x=u.position,y=u.width,B=u.height;m="absolute"==x?g.offsetTop:parseInt(u.top)||0;
k="absolute"==x?g.offsetLeft:parseInt(u.left)||0;h="auto"==y?0:parseInt(y);e="auto"==B?0:parseInt(B);l=k-Math.floor((p.width-h)/2);n=m-Math.floor((p.height-e)/2);"absolute"!=x&&"relative"!=x&&(u=f.coords(g,!0),m=u.y,k=u.x,g.style.position="absolute",g.style.top=m+"px",g.style.left=k+"px")}}(q);q=w.animateProperty(G.mixin({properties:{height:function(){d();return{end:p.height||0,start:e}},top:function(){return{start:m,end:n}}}},p));t=w.animateProperty(G.mixin({properties:{width:function(){return{start:h,
end:p.width||0}},left:function(){return{start:k,end:l}}}},p));return v["combine"==p.method?"combine":"chain"]([q,t])};K.slideBy=function(p){var q,t,m=function(n){return function(){var k=f.getComputedStyle(n),l=k.position;q="absolute"==l?n.offsetTop:parseInt(k.top)||0;t="absolute"==l?n.offsetLeft:parseInt(k.left)||0;"absolute"!=l&&"relative"!=l&&(k=c.coords(n,!0),q=k.y,t=k.x,n.style.position="absolute",n.style.top=q+"px",n.style.left=t+"px")}}(p.node=r.byId(p.node));m();p=w.animateProperty(G.mixin({properties:{top:q+
(p.top||0),left:t+(p.left||0)}},p));a.connect(p,"beforeBegin",p,m);return p};K.crossFade=function(p){var q=p.nodes[0]=r.byId(p.nodes[0]),t=b.style(q,"opacity"),m=p.nodes[1]=r.byId(p.nodes[1]);b.style(m,"opacity");return v.combine([w[0==t?"fadeIn":"fadeOut"](G.mixin({node:q},p)),w[0==t?"fadeOut":"fadeIn"](G.mixin({node:m},p))])};K.highlight=function(p){var q=p.node=r.byId(p.node);p.duration=p.duration||400;var t=p.color||"#ffff99",m=b.style(q,"backgroundColor");"rgba(0, 0, 0, 0)"==m&&(m="transparent");
p=w.animateProperty(G.mixin({properties:{backgroundColor:{start:t,end:m}}},p));"transparent"==m&&a.connect(p,"onEnd",p,function(){q.style.backgroundColor=m});return p};K.wipeTo=function(p){p.node=r.byId(p.node);var q=p.node,t=q.style,m=p.width?"width":"height",n={};n[m]={start:function(){t.overflow="hidden";if("hidden"==t.visibility||"none"==t.display)return t[m]="1px",t.display="",t.visibility="",1;var k=b.style(q,m);return Math.max(k,1)},end:p[m]};return w.animateProperty(G.mixin({properties:n},
p))};return K})},"arcgisonline/pages/isGeographic":function(){define(["require","exports","tslib","esri/WKIDUnitConversion"],function(K,G,w,v){v=w.__importDefault(v);return function(r){r=r||{};return r.wkid?!v["default"].hasOwnProperty(r.wkid):r.wkt?/^\s*GEOGCS/i.test(r.wkt):!1}})},"arcgisonline/pages/components/SelectLayerProperties":function(){define("require exports tslib preact dojo/i18n!../../nls/arcgisonline ../utils/arrays".split(" "),function(K,G,w,v,r,f){Object.defineProperty(G,"__esModule",
{value:!0});r=w.__importDefault(r);f=w.__importDefault(f);K=function(c){function a(){var b=null!==c&&c.apply(this,arguments)||this;b.state={active:!0,layerProperties:b.props.layerProperties};b.excludedFieldTypes=["esriFieldTypeOID","esriFieldTypeGlobalID"];b.toggleLayerPropertyField=function(p,q){var t=w.__spreadArray([],b.state.layerProperties),m=f["default"].findIndex(t,function(k){return k.id===p});if(-1<m){var n=t[m];f["default"].includes(n.additionalFields,q)?(n.additionalFields=f["default"].filterOut(n.additionalFields,
[q]),0===n.additionalFields.length&&t.splice(m,1)):n.additionalFields.push(q)}else t.push({id:p,additionalFields:[q]});b.setState({layerProperties:t})};b.save=function(){b.setState({active:!1});b.props.onSubmit(b.state.layerProperties)};b.cancel=function(){b.setState({active:!1,layerProperties:b.props.layerProperties});setTimeout(function(){b.props.onCancel()},400)};return b}w.__extends(a,c);a.prototype.componentWillUnmount=function(){document.documentElement.classList.remove("overflow-hidden")};
a.prototype.render=function(){var b=this,p,q=this.props,t=q.layers,m=q.onSubmit,n=this.state;q=n.active;var k=n.layerProperties;n=this.props.rebuildMode?r["default"].itemProperties.configureAttributes.rebuild:r["default"].itemProperties.configureAttributes.description;var l=this.props.rebuildMode?r["default"].itemProperties.configureAttributes.rebuildCache:r["default"].itemProperties.configureAttributes.select;t=null!==(p=null===t||void 0===t?void 0:t.map(function(h,e){var d,g=h.id,u=h.name,x=h.fields;
x=null!==(d=null===x||void 0===x?void 0:x.map(function(y,B){var C=y.type,z=y.name,D=y.alias,E=(k||[]).some(function(A){return(null===A||void 0===A?void 0:A.id)===g&&-1<A.additionalFields.indexOf(z)});return f["default"].includes(b.excludedFieldTypes,C)?null:v.h("label",{"class":"font-size--2 trailer-0",key:B},v.h("input",{type:"checkbox",checked:E,onChange:function(){return b.toggleLayerPropertyField(g,z)}})," ",D||z)}))&&void 0!==d?d:x;return v.h(v.Fragment,{key:e},v.h("div",{"class":"avenir-demi"},
u),v.h("div",{"class":"margin-left-1"},x))}))&&void 0!==p?p:t;return v.h("calcite-modal",{active:q,"intl-close":r["default"].common.close,role:"dialog","aria-modal":"true",oncalciteModalClose:this.cancel,"disable-outside-close":!0},v.h("h3",{slot:"header","class":"font-size-2 trailer-0"},r["default"].itemProperties.configureAttributes.selectAttributes),v.h("div",{slot:"content","class":"position-relative"},v.h("div",{"class":"trailer-half"},n),t),v.h("calcite-button",{slot:"secondary",width:"full",
appearance:"outline",color:"blue",onClick:function(){return b.cancel()}},r["default"].common.cancel),v.h("calcite-button",{slot:"primary",width:"full",color:"blue",appearance:"solid",onClick:function(){m(k)}},l))};return a}(v.Component);G["default"]=K})},"arcgisonline/sharing/dijit/dialog/CreateAppDlg":function(){define("require esri/declare esri/Evented esri/kernel esri/lang esri/request dojo/_base/lang dojo/_base/window dojo/_base/array dojo/topic dojo/string dojo/query dojo/on dojo/json dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/promise/all dojo/Deferred dojo/when dojo/io-query dojox/widget/Wizard dojox/widget/WizardPane dijit/Dialog dijit/registry ./ConfirmDialog ./ItemPropertiesDlg ./BrowseItemsDlg ./ConfirmDialog ./_CreateItemUtilMixin ../../../esriGeowConfig ../../../pages/utils/arrays ../../../map/utils/previewInTemplate ../../../map/utils/openMap dijit/_WidgetBase arcgisonline/sharing/util dojo/i18n!../../../nls/arcgisonline arcgisonline/sharing/dijit/dialog/PluginConfigurableAppsViewer arcgisonline/sharing/dijit/dialog/Plugin3DConfigurableAppsViewer".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba){return G([fa,w],{showModal:function(ka){var la=new u,ma=this.item?c.mixin({},this.item,{tags:this.item.isHostedTemplate?[]:this.item.tags||[]}):{},ha=ka.isWab,Z="Web Scene"===ma.type,W=V.getHomeAppContext(),Q=ka.message,ia,R=new E({title:ka.title||ba.itemProperties.createNewApp,buttonOk:ba.common.ok,buttonCancel:ba.common.cancel,busyMessage:ba.addItemFrm.addingItem,style:{width:"550px",height:"auto"}}),S=new A({typeInfo:ha?
"wab":"configapp",message:Q||(ha?ba.items.createWABMessage:ba.itemProperties.createAppTitle),showFolders:!0,showFile:!1,item:ma});this.item&&(S.set("summary",this.item.isHostedTemplate?"":this.item.snippet),S.set("title",this.item.isHostedTemplate?"":this.item.title),S.set("tags",this.item.isHostedTemplate?[]:this.item.tags),L.self.hasCategorySchema&&S.set("categories",this.item.categories||[]));R.setContent(S.domNode);R.show();S.set("focus","title");this.own(m(R,"ok",c.hitch(this,function(){p.publish("/esri/disable",
!0,ba.addItemFrm.addingItem);S._validate().then(c.hitch(this,function(){ha?(ma=c.mixin({},S.get("item")),R.hide().then(c.hitch(this,function(){this.redirectToAppBuilder(ma)}))):(ia=S.get("item"),this.item.isHostedTemplate||(ia=c.mixin(ia,{shareWithWebMap:!0},Z?{webSceneId:this.item.id}:{webMapId:this.item.id})),V.isPortal()&&ma.url&&0===ma.url.indexOf("/")&&ma.url&&-1===ma.url.indexOf(W)&&(ma.url=W+ma.url),I.createTemplatedApplication(ia,ma,this.item.portal,this.item).then(function(N){ia=N;R.hide()}))}),
c.hitch(this,function(N){p.publish("/esri/disable",!1);this._showError(N)}))})),m(R,"hide",function(){la.resolve(ia)}));return la},showWizard:function(ka){var la=new u,ma=this.item?c.mixin({},this.item,{tags:this.item.isHostedTemplate?[]:this.item.tags||[]}):{},ha=new z({title:ba.items.newWebMappingAppTitle,"class":"esriCreateAppDlg"}),Z=this.item&&this.item.portal||ka.portal||{};ka=this.item?J.includes(ma.types,"is-map"):!0;var W="Web Scene"===ma.type,Q;ka=ka?this.item?"arcgisonline/sharing/dijit/dialog/PluginConfigurableAppsViewer":
"arcgisonline/sharing/dijit/dialog/PluginConfigurableApps":"arcgisonline/sharing/dijit/dialog/Plugin3DConfigurableAppsViewer";var ia=[new F({messageLeft:ba.browseItemsDlg.instructionsLeft,messageRight:ba.browseItemsDlg.instructionsRight,item:this.item,"class":"esriBrowseItemsDlg"}),new A({message:ba.itemProperties.createAppTitle,typeInfo:"configapp",showFolders:!0,showFile:!1,showUrl:!1,item:this.item})],R=c.hitch(this,function(ca){p.publish("/esri/disable",ca,ba.addItemFrm.addingItem);t(".dojoxWizardButtons .dijitButton").map(D.byNode).forEach(function(M){M.set("disabled",
ca)})}),S=c.hitch(this,function(ca){return ca._validate()}),N=p.subscribe("/esri/browseitems/close",c.hitch(this,function(ca,M){if("create-app"===ca)ea.nextButton.onClick();else"on-view-item"===ca?window.open("item.html?id\x3d"+M.id):"download-app"===ca?V.downloadWebMappingApp(M):"preview-app"===ca&&O(ma,M)})),X=c.hitch(this,function(ca){ca._validate().then(c.hitch(this,function(M){R(!0);M=ia[0].get("selection");var U=V.getHomeAppContext(),da=ia[1].get("item");V.isPortal()&&M.url&&0===M.url.indexOf("/")&&
M.url&&-1===M.url.indexOf(U)&&(M.url=U+M.url);Q=da;this.item&&!this.item.isHostedTemplate&&(Q=c.mixin(Q,{shareWithWebMap:!0},W?{webSceneId:this.item.id}:{webMapId:this.item.id}));I.createTemplatedApplication(da,M,Z,this.item).then(c.hitch(this,function(ja){this.telemetry&&this.telemetry.logEvent({label:"create apps",category:"new item",pageName:"my content",details:this.label});ha.hide().then(c.hitch(this,function(){setTimeout(function(){window.location=ja.configureUrl},400)}))}),c.hitch(this,function(ja){R(!1);
this._showError(ja)}))}),c.hitch(this,function(M){R(!1);this._showError(M)}))}),aa=c.hitch(this,function(ca){ha.hide().then(c.hitch(this,function(){la.resolve(!1)}))}),ea=new B({nextButtonLabel:ba.publishWizard.nextButtonLabel,previousButtonLabel:ba.publishWizard.previousButtonLabel,doneButtonLabel:ba.publishWizard.doneButtonLabel,cancelButtonLabel:ba.publishWizard.cancelButtonLabel,"class":"esriCreateApp",hideDisabled:!0,doneFunction:X,cancelFunction:aa}),Y=ia[1];ia[0].addPlugin(ka);var T=m(ha,"hide",
c.hitch(this,function(ca){T.remove();b.forEach(ia,function(M){M.destroyRecursive();M=null});N.remove();ea.destroyRecursive();ha.destroyRecursive();(ca=document.getElementById("create-dropdown"))&&ca.focus()}));b.forEach(ia,function(ca,M){(new C({content:ca.domNode,passFunction:c.partial(S,ca),doneFunction:M===ia.length-1?c.partial(X,ca):null})).placeAt(ea)});k.after(ea,"_checkButtons",function(){ea.selectedChildWidget.isFirstChild?ea.nextButton.domNode.style.display="none":ea.selectedChildWidget.isLastChild&&
Y.set("focus","title")});t(".dojoxWizardButtons",ea.domNode).addClass("esriFloatTrailing");e.add(ea.nextButton.domNode,["calcite","primary"]);e.add(ea.cancelButton.domNode,["calcite","cancel"]);e.add(ea.previousButton.domNode,["calcite","default btn-back icon-ui-left"]);e.add(ea.doneButton.domNode,["calcite","primary"]);this.item&&(Y.set("summary",this.item.isHostedTemplate?"":this.item.snippet),Y.set("title",this.item.isHostedTemplate?"":this.item.title),Y.set("tags",this.item.isHostedTemplate?"":
this.item.tags),L.self.hasCategorySchema&&Y.set("categories",this.item.categories||[]));ea.startup();d.create("span",{"class":"spinner hide",innerHTML:ba.common.pleaseWait},t(".dojoxWizardButtons",ea.domNode)[0],"first");ha.setContent(ea.domNode);ha.show().then(function(){ha.closeButtonNode&&(ha.closeButtonNode.tabIndex=0)}.bind(this));document.documentElement.scrollTop=document.body.scrollTop=(document.documentElement.scrollTop||document.body.scrollTop)+1;return la},showCreateDefaultItem:function(ka){var la=
new E({title:ka.title||ba.common.create,buttonOk:ba.common.ok,buttonCancel:ba.common.cancel,style:{width:"550px",height:"auto"}}),ma=ka.typeInfo,ha=new A({typeInfo:ma,item:ka.item,message:ka.message,showFolders:!0,showFile:!1,showUrl:ka.showUrl}),Z=null;"dashboard_map"===ma&&ka&&ka.item&&(ha.set("title",ka.item.title),L.self.hasCategorySchema&&ha.set("categories",ka.item.categories||[]));la.setContent(ha.domNode);la.show();m(la,"hide",function(){var ia=document.getElementById("create-dropdown");ia&&
ia.focus()});var W=m(la.okButton,"click",c.hitch(this,function(){ka.isWAB?ha._validate().then(c.hitch(this,function(ia){Z=ha.get("item");this.telemetry&&this.label&&this.telemetry.logEvent({label:"create apps",category:"new item",pageName:"my content",details:this.label,attribute:ha.wab2DRadio.checked?"2d":"3d"});la.hide().then(c.hitch(this,function(){setTimeout(function(){this.redirectToAppBuilder(Z)}.bind(this),400)}))}),c.hitch(this,function(ia){this._showError(ia)})):ha.addItem().then(c.hitch(this,
function(ia){la.hide().then(c.hitch(this,function(){Q.remove();W.remove();"webmap"===ma?P(ia.id):"webscene"===ma||"webscene_portal"===ma?window.location="./webscene/viewer.html?webscene\x3d"+ia.id:"urbanmodel"===ma?window.location=(L.urbanUrl||"https://urban.arcgis.com")+"?id\x3d"+ia.id:"dashboard"===ma||"dashboard_map"===ma?(this.telemetry&&this.telemetry.logEvent({label:"create apps",category:"new item",pageName:"my content",details:"dashboard"}),setTimeout(function(){this.redirectToAppBuilder(ia)}.bind(this),
400)):window.location="ipynb"===ma||"notebook"===ma?"notebook/notebook.html?id\x3d"+ia.id:"item.html?id\x3d"+(ia.serviceItemId||ia.id)+(ia.jobId?"\x26jobid\x3d"+ia.jobId:"")}))}),c.hitch(this,function(ia){this._showError(ia)}))}));var Q=m.once(la.cancelButton,"click",c.hitch(this,function(){Q.remove();W.remove()}))},redirectToAppBuilder:function(ka){ka.folderId&&"/"!==ka.folderId&&(ka.folder=ka.folderId);var la={title:ka.title,tags:ka.tags,summary:ka.snippet,folder:ka.folder,appType:ka.wabType},ma=
"Dashboard"===ka.type?"../apps/dashboards/"+ka.id+"#mode\x3dedit":"../apps/webappbuilder/index.html?";L.self.hasCategorySchema&&ka.categories&&ka.categories.length&&c.mixin(la,{categories:n.stringify(ka.categories)});ka.wabType&&(la=c.mixin(la,{appType:ka.wabType,webmap:ka.webmap}),ma+=y.objectToQuery(la));window.location=ma},_showError:function(ka){ka=c.mixin(c.mixin({},ba.publishWizard.errors.error),ka);this._errorDlg=new E({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(ka).then(c.hitch(this,
function(){this._errorDlg.hide()}));return!1}})})},"dojox/widget/Wizard":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dijit/layout/StackContainer dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/i18n dojo/text!./Wizard/Wizard.html dojo/i18n!dijit/nls/common dojo/i18n!./nls/Wizard dijit/form/Button".split(" "),function(K,G,w,v,r,f,c,a){return G("dojox.widget.Wizard",[v,r,f],{templateString:a,nextButtonLabel:"",previousButtonLabel:"",cancelButtonLabel:"",doneButtonLabel:"",
cancelFunction:null,hideDisabled:!1,postMixInProperties:function(){this.inherited(arguments);var b=K.mixin({cancel:c.getLocalization("dijit","common",this.lang).buttonCancel},c.getLocalization("dojox.widget","Wizard",this.lang)),p;for(p in b)this[p+"ButtonLabel"]||(this[p+"ButtonLabel"]=b[p])},startup:function(){this._started||(this.inherited(arguments),this.connect(this.nextButton,"onClick","_forward"),this.connect(this.previousButton,"onClick","back"),this.cancelFunction?(K.isString(this.cancelFunction)&&
(this.cancelFunction=K.getObject(this.cancelFunction)),this.connect(this.cancelButton,"onClick",this.cancelFunction)):this.cancelButton.domNode.style.display="none",this.connect(this.doneButton,"onClick","done"),this._subscription=w.subscribe(this.id+"-selectChild",K.hitch(this,"_checkButtons")),this._started=!0)},resize:function(){this.inherited(arguments);this._checkButtons()},_checkButtons:function(){var b=this.selectedChildWidget,p=b.isLastChild||this.nextButton.get("disabled");this.nextButton.set("disabled",
p);this._setButtonClass(this.nextButton);b.doneFunction?(this.doneButton.domNode.style.display="",p&&(this.nextButton.domNode.style.display="none")):this.doneButton.domNode.style.display="none";this.previousButton.set("disabled",!this.selectedChildWidget.canGoBack);this._setButtonClass(this.previousButton)},_setButtonClass:function(b){b.domNode.style.display=this.hideDisabled&&b.disabled?"none":""},_forward:function(){this.selectedChildWidget._checkPass()&&this.forward()},done:function(){this.selectedChildWidget.done()},
destroy:function(){w.unsubscribe(this._subscription);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){f("dijit-legacy-requires")&&b(0,function(){require(["dijit/layout/StackController"])});w=w("dijit.layout.StackContainer",n,{doLayout:!0,
persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);v.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(a(this.domNode,"keydown",c.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var k=this.getChildren();K.forEach(k,this._setupChild,this);this.persist?this.selectedChildWidget=t.byId(G(this.id+"_selectedChild")):K.some(k,function(h){h.selected&&(this.selectedChildWidget=h);return h.selected},
this);var l=this.selectedChildWidget;!l&&k[0]&&(l=this.selectedChildWidget=k[0],l.selected=!0);p.publish(this.id+"-startup",{children:k,selected:l,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var k=this.selectedChildWidget;k&&this._showChild(k)}this.inherited(arguments)},_setupChild:function(k){var l=k.domNode,h=r.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",k.domNode,"replace"),e=
k["aria-label"]||k.title||k.label;e&&h.setAttribute("aria-label",e);r.place(l,h);k._wrapper=h;this.inherited(arguments);"none"==l.style.display&&(l.style.display="block");k.domNode.removeAttribute("title")},addChild:function(k,l){this.inherited(arguments);this._started&&(p.publish(this.id+"-addChild",k,l),this.layout(),this.selectedChildWidget||this.selectChild(k))},removeChild:function(k){var l=K.indexOf(this.getChildren(),k);this.inherited(arguments);r.destroy(k._wrapper);delete k._wrapper;this._started&&
p.publish(this.id+"-removeChild",k);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===k&&(this.selectedChildWidget=void 0,this._started)){var h=this.getChildren();h.length&&this.selectChild(h[Math.max(l-1,0)])}this._started&&this.layout()}},selectChild:function(k,l){k=t.byId(k);if(this.selectedChildWidget!=k){var h=this._transition(k,this.selectedChildWidget,l);this._set("selectedChildWidget",k);p.publish(this.id+"-selectChild",k,this._focused);this.persist&&G(this.id+"_selectedChild",
this.selectedChildWidget.id)}return q(h||!0)},_transition:function(k,l){l&&this._hideChild(l);var h=this._showChild(k);k.resize&&(this.doLayout?k.resize(this._containerContentBox||this._contentBox):k.resize());return h},_adjacent:function(k){var l=this.getChildren(),h=K.indexOf(l,this.selectedChildWidget);h+=k?1:l.length-1;return l[h%l.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(k){p.publish(this.id+
"-containerKeyDown",{e:k,page:this})},layout:function(){var k=this.selectedChildWidget;k&&k.resize&&(this.doLayout?k.resize(this._containerContentBox||this._contentBox):k.resize())},_showChild:function(k){var l=this.getChildren();k.isFirstChild=k==l[0];k.isLastChild=k==l[l.length-1];k._set("selected",!0);k._wrapper&&v.replace(k._wrapper,"dijitVisible","dijitHidden");return k._onShow&&k._onShow()||!0},_hideChild:function(k){k._set("selected",!1);k._wrapper&&v.replace(k._wrapper,"dijitHidden","dijitVisible");
k.onHide&&k.onHide()},closeChild:function(k){if(!k.onClose||k.onClose(this,k))this.removeChild(k),k.destroyRecursive()},destroyDescendants:function(k){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;K.forEach(this.getChildren(),function(l){k||this.removeChild(l);l.destroyRecursive(k)},this);this._descendantsBeingDestroyed=!1}});w.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};c.extend(m,w.ChildWidgetProperties);return w})},"dojox/widget/WizardPane":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dijit/layout/ContentPane"],function(K,G,w){return G("dojox.widget.WizardPane",w,{canGoBack:!0,passFunction:null,doneFunction:null,startup:function(){this.inherited(arguments);this.isFirstChild&&(this.canGoBack=!1);K.isString(this.passFunction)&&(this.passFunction=K.getObject(this.passFunction));K.isString(this.doneFunction)&&this.doneFunction&&(this.doneFunction=K.getObject(this.doneFunction))},_onShow:function(){this.isFirstChild&&(this.canGoBack=!1);this.inherited(arguments)},
_checkPass:function(){var v=!0;if(this.passFunction&&K.isFunction(this.passFunction)){var r=this.passFunction();switch(typeof r){case "boolean":v=r;break;case "string":alert(r),v=!1}}return v},done:function(){this.doneFunction&&K.isFunction(this.doneFunction)&&this.doneFunction()}})})},"arcgisonline/sharing/dijit/dialog/BrowseItemsDlg":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/_base/event dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/dom dojo/dom-construct dojo/mouse dojo/topic dojo/query dojo/parser dijit/registry dijit/TooltipDialog dijit/popup dojo/promise/all dojo/Deferred dgrid/Grid dgrid/extensions/Pagination dgrid/OnDemandGrid dgrid/Selection dgrid/selector dgrid/Keyboard dgrid/util/mouse dgrid/util/touch put-selector/put dojo/store/Observable dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/arcgis/Portal esri/Evented esri/PluginTarget arcgisonline/sharing/util arcgisonline/sharing/geow/Account arcgisonline/esriGeowConfig ./_AppTemplateFiltersMixin dojo/i18n!arcgisonline/nls/arcgisonline ../_RefreshMixin ../_Empty dojo/NodeList-dom".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W){var Q=K(null,{idProperty:"id",constructor:function(ia){K.safeMixin(this,ia)},get:function(ia,R){return P.PortalUtil.request(this.portalUrl+"content/items/"+ia,R).then(function(S){return new P.PortalItem(G.mixin(S,{portal:this.portal}))})},getIdentity:function(ia){return ia[this.idProperty]},query:function(ia,R){var S=G.isObject(ia)?ia:{q:ia};if(R&&(S=G.mixin(S,{num:R.count,start:(R.start||0)+
1}),R.sort&&R.sort.length)){var N=R.sort[0];S=G.mixin(S,{sortField:encodeURIComponent("created"===N.attribute?"uploaded":N.attribute),sortOrder:N.descending?"desc":"asc"})}S=this.portal.queryItems(S,!0).then(function(X){X.results.total=X.total;return X.results});return P.PortalResult(S)}});return K("arcgisonline.sharing.dijit.dialog.BrowseItemsDlg",[L,J,O,V],{templateString:'\x3cdiv\x3e\x3cdiv class\x3d"top-bar clearfix"\x3e\x3cdiv  class\x3d"left instructions"\x3e\x3cspan class\x3d"font-size-0 messageLeft hide" data-dojo-attach-point\x3d"messageNodeLeft"\x3e\x3c/span\x3e\x3ch2 class\x3d"font-size-0 trailer-0 inline-block messageRight"\x3e\x3cspan class\x3d"hide" data-dojo-attach-point\x3d"messageNodeRight"\x3e\x3c/span\x3e\x3ca data-dojo-attach-point\x3d"helpLink" class\x3d"icon-ui-question icon-ui-flush margin-left-half hide" title\x3d"${i18n.common.learnMoreConfigurableApps}" href\x3d"#" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/h2\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}_search"class\x3d"searchBar right"\x3e\x3cinput tabIndex\x3d"0" placeholder\x3d"${i18n.search.searchTitle}" aria-label \x3d"${i18n.search.searchTitle}" class\x3d"esriSearchBox dijitTextBox" type\x3d"search"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"gallery"\x3e\x3cdiv class\x3d"gallery-left  quiet-scroll"\x3e\x3cul class\x3d"filters"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"templates gallery-right"\x3e\x3cp id\x3d"${id}_filterTitle" class\x3d"filter-title hide" data-dojo-attach-point\x3d"filterDescription"\x3e\x3c/p\x3e\x3cdiv id\x3d"${id}_grid"class\x3d"dgrid-autoheight quiet-scroll"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"loader-wrap"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  data-dojo-attach-point\x3d"infoPanel" id\x3d"template-info-panel"\x3e\x3c/div\x3e\x3c/div\x3e',
galleryTemplate:'\x3cdiv style\x3d\'opacity:1;\' class\x3d\'grid-item gallery-view\' tabIndex\x3d"0" aria-label\x3d"${item.title}"\x3e\x3cdiv class\x3d\'grid-item-thumbnail-wrap\'\x3e${item:_formatThumbnail}\x3cp class\x3d"template-overlay" style\x3d"display:none;"\x3e${i18n.browseItemsDlg.selectDetails}\x3c/p\x3e\x3c/div\x3e${item:_formatItemTitle}\x3c/div\x3e',infoPanelTemplate:'\x3cdiv class\x3d"template-info-wrapper"\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"on-next"\x3e${i18n.browseItemsDlg.configure}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
baseClass:"esriBrowseItems",i18n:ha,postCreate:function(){this.inherited(arguments);this._portalUser=(this._portal=la.portal)&&(this._portal.user||this._portal.getPortalUser());ka.getSelf(G.hitch(this,function(ia){this._canSearchPublic=ia.canSearchPublic;this._currentFilter=G.mixin(this._currentFilter||{},{get:function(R){return G.isArray(this[R])&&1<this[R].length?"("+this[R].join(" OR ")+") ":this[R]?this[R]+" ":""},toString:function(){return{q:this.get("groups")+this.get("tags")+this.get("persistentTypekeywords")+
this.get("typekeywords")+this.get("types")+(this.query||"")+(this.search||"")+' -type:"Attachment"'}}});ia.canSearchPublic=!0;this._portal?this.itemQuery&&this._fetchData():(this._portal=new P.Portal({url:la.restBaseUrl,self:ia}),this._portal.on("load",G.hitch(this,function(){this.addPlugin(this.plugin).then(G.hitch(this,function(){}))})));l(".templates",this.domNode).addClass("fade");l(".dgrid-footer",this.domNode).addClass("hide")}))},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();
this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove());this._queryTimer&&clearTimeout(this._queryTimer);this._grid=this._portal=null},addPlugin:function(ia){var R=new x;ia?this.inherited(arguments).then(G.hitch(this,function(S){this.galleryTemplate=this.plugIn&&this.plugIn.galleryTemplate||this.galleryTemplate;(this.helpLinkUrl=this.plugIn&&this.plugIn.helpLinkUrl||"")?(a.set(this.helpLink,"href",this.helpLinkUrl),f.remove(this.helpLink,"hide")):f.add(this.helpLink,"hide");
this._fetchData().then(function(){R.resolve(S)})})):R.resolve(!0);return R},_setItemQueryAttr:function(ia){this.itemQuery=ia},_setPluginAttr:function(ia){this.plugin=ia},_setMessageAttr:function(ia){this.set("messageRight",ia)},_setMessageRightAttr:function(ia){a.set(this.messageNodeRight,"innerHTML",ia);f.remove(this.messageNodeRight,"hide")},_setMessageLeftAttr:function(ia){a.set(this.messageNodeLeft,"innerHTML",ia);f.remove(this.messageNodeLeft,"hide")},_setDisabledAttr:function(ia){var R=e.findWidgets(this.domNode).concat(e.findWidgets(this._content));
w.forEach(R,function(S){S.set("disabled",ia)});f[ia?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_setSortAttr:function(ia){this.sortAttribute=ia},_setSortDescendingAttr:function(ia){this.sortDescending=ia},_getSelectionAttr:function(){var ia=this._grid.selection,R;for(R in ia)break;return R&&this._grid.row(R).data},_getInfoPanelTemplateAttr:function(){return this.plugIn&&this.plugIn.infoPanelTemplate||this.infoPanelTemplate},_getGalleryTemplateAttr:function(){return this.plugIn&&
this.plugIn.galleryTemplate||this.galleryTemplate},_validate:function(){return!!this.get("selection")},_clearQueryTimeout:function(){clearTimeout(this._queryTimer);this._queryTimer=null},_clearClosePanelTimeout:function(){clearTimeout(this._panelClosing);this._panelClosing=null;w.forEach(this._panelClickHandles,"item.remove();");m.empty("template-info-panel")},_createGrid:function(){var ia=K([y,B,z,E,Z]),R=new I(new Q({portal:this._portal})),S=this._currentFilter,N=G.hitch(this,function(X){X.snippet=
X.snippet||"";X.title=X.title||"";var aa=H("div");X=b.substitute(this.get("galleryTemplate"),{item:X,i18n:ha},null,this);m.place(X,aa);return aa});this._grid=new ia({store:R,query:S.toString(),selectionMode:"single",pagingLinks:2,rowsPerPage:this.plugIn&&this.plugIn.rowsPerPage||8,noDataMessage:b.substitute(W,{message:ha.emptyStates.noContentAvailable,width:256}),showLoadingMessage:!1,renderRow:N,sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},this.id+"_grid");this._grid.startup();
this.own(p(this.domNode,"click",G.hitch(this,function(X){t.byId("close-panel")&&t.byId("close-panel").click()})),this._grid.addKeyHandler(13,G.hitch(this,function(X){X=X.target;this._grid.select(X);X.click()})),this._grid.addKeyHandler(32,G.hitch(this,function(X){X=X.target;this._grid.select(X);X.click()})),this._grid.on(A.enterRow,G.hitch(this,function(X){!1===f.contains(this.domNode,"showing")&&this._showOverlay(!0,X)})),this._grid.on(A.leaveRow,G.hitch(this,function(X){this._showOverlay(!1,X)})),
this._grid.on(".dgrid-row:click",G.hitch(this,function(X){if(!1===f.contains(this.domNode,"showing")){X.preventDefault();r.stop(X);this._clearClosePanelTimeout();var aa=this.get("selection");this._showOverlay(!1,X);m.place(b.substitute(this.get("infoPanelTemplate"),{item:aa,i18n:ha,previewButtonWidth:this._previewButtonWidth(aa),hideDownload:this._hideDownload(aa)},function(ea){return esri.isDefined(ea)?ea:""},this),this.infoPanel);f.add(this.domNode,"showing");k.publish("/esri/browseitems/showInfoTemplate",
!0);setTimeout(G.hitch(this,function(){l("#template-info-panel *",this.domNode).forEach(function(Y){Y.tabIndex=0});var ea=this.domNode.querySelector("#create-app");ea&&ea.focus()}),500);this._panelClickHandles=[l(".template-info-showing .thumbnail img",this.domNode).on("error",G.hitch(this,function(ea){a.set(ea.target,"src",aa.thumbnailUrl)})),l(".panel-actions .btn").on("click",G.hitch(this,function(ea){ea.preventDefault();r.stop(ea);"close-panel"===ea.target.id?(f.remove(this.domNode,"showing"),
l("#template-info-panel *",this.domNode).forEach(function(Y){Y.tabIndex=-1}),k.publish("/esri/browseitems/showInfoTemplate",!1),this._panelClosing=setTimeout(G.hitch(this,function(){w.forEach(void 0,"item.remove();")},250))):k.publish("/esri/browseitems/close",ea.target.id,this.get("selection"))})),l("#template-info-panel").on("click",G.hitch(this,function(ea){ea.preventDefault();r.stop(ea)}))]}})),this._grid.on("dgrid-refresh-complete",G.hitch(this,function(X){l(".templates",this.domNode).removeClass("fade");
l("#loader-wrap",this.domNode).addClass("hide");l(".dgrid-footer",this.domNode)[this._grid._total<=this._grid.rowsPerPage?"addClass":"removeClass"]("hide")})),this._grid.on("refresh",G.hitch(this,function(){this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove(),this._img_connect_error=this._img_connect=null);this._img_connect=l(".grid-item-thumb",this._grid.domNode).on("load",G.hitch(this,function(X){(X=this._grid.row(X))&&X.element&&l(".grid-item",X.element).addClass("fadeIn").style("opacity",
"1")}));this._img_connect_error=l(".grid-item-thumb",this._grid.domNode).on("error",G.hitch(this,function(X){a.set(X.target,"src",ba.getStaticImagesUrl()+"/desktopapp.png")}))})),p(t.byId(this.id+"_search"),"keyup, input",G.hitch(this,function(X){X.preventDefault();this._clearQueryTimeout();this._queryTimer=setTimeout(G.hitch(this,function(){this._currentFilter.search=a.get(X.target,"value");this._fetchItems(this._currentFilter).then(G.hitch(this,function(){this._clearQueryTimeout()}))}),this.searchKeypressDelay||
450)})),p(t.byId(this.id+"_search"),"search",G.hitch(this,function(X){this._queryTimer||(X.preventDefault(),this._currentFilter.search=a.get(X.target,"value"),this._fetchItems(this._currentFilter))})))},_createFilters:function(){if(this.plugIn&&this.plugIn.filters){var ia=this.plugIn.filters,R=this.plugIn.filterStrings,S=l(".filters",this.domNode)[0];for(N in ia)m.create("li",{"class":"instant"===N?"active":"",innerHTML:"\x3ca id\x3d'"+N+"'  href\x3d'#'\x3e"+R[N].title+"\x3c/a\x3e"},S);var N=G.mixin({},
ia.instant||{});this._currentFilter.tags=w.map(N.tags||[],function(X){return'tags:"'+X+'"'});this._currentFilter.typekeywords=[].concat(w.map(N.typekeywords||[],function(X){return'typekeywords:"'+X+'"'}));this.plugIn.filters.instant&&(a.set(this.filterDescription,"innerHTML",ha.appTemplateFilters.instant.description),this.filterDescription.classList.remove("hide"));this.own(p(S,"li a:click",G.hitch(this,function(X){X.preventDefault();var aa=X.target;l(".active",S).removeClass("active");f.add(aa.parentNode,
"active");l(".templates",this.domNode).addClass("fade");setTimeout(G.hitch(this,function(){f["all"===aa.id?"add":"remove"](this.filterDescription,"hide");var ea=this._portal.isPortal&&R[aa.id].descriptionPortal||R[aa.id].description||"";"narrate"===aa.id&&this._portal.isPortal&&(ea=la.baseUrl.replace("/home/","/apps/storymaps/"),ea=b.substitute(R[aa.id].descriptionPortal,{linkStart:'\x3ca href\x3d"'+ea+'" target\x3d"_blank"\x3e',linkEnd:"\x3c/a\x3e"}));a.set(this.filterDescription,"innerHTML",ea)}),
225);X=G.mixin({},ia[aa.id]||{});this._currentFilter.tags=w.map(X.tags||[],function(ea){return'tags:"'+ea+'"'});this._currentFilter.typekeywords=[].concat(w.map(X.typekeywords||[],function(ea){return'typekeywords:"'+ea+'"'}));this._fetchItems(this._currentFilter)})));f.add(this.domNode,"filters")}else f.add(this.domNode,"nofilters"+(this.plugIn&&this.plugIn.extraClasses?" "+this.plugIn.extraClasses.join(" "):""))},_showOverlay:function(ia,R){var S=this._grid.row(R);S&&l(".template-overlay",S.element).style("display",
ia?"":"none")},_fetchData:function(){if(this._portal)return this._user=this._portalUser||this._portal&&this._portal.getPortalUser(),this.plugIn&&this.plugIn.fetchData?this.plugIn.fetchData():this._fetchItems(this.itemQuery);var ia=new x;ia.resolve(!1);return ia},_fetchItems:function(ia,R){var S={sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},N=new x;l(".templates",this.domNode).addClass("fade");l(".dgrid-footer",this.domNode).addClass("hide");l("#loader-wrap",this.domNode).removeClass("hide");
setTimeout(G.hitch(this,function(){this._currentFilter=G.mixin(this._currentFilter,ia);this._grid?this._grid.set("query",this._currentFilter.toString(),S):(this._createFilters(),this._createGrid());N.resolve(this._grid)}),60);return N},_formatThumbnail:function(ia){var R=ia.thumbnailUrl||ba.getStaticImagesUrl()+"/desktopapp.png";ia.thumbnailUrl=R;return"\x3cimg class\x3d'grid-item-thumb' width\x3d'187px' height\x3d'125px' alt\x3d'' src\x3d'"+R+"'\x3e"},_formatInfoPanelImage:function(ia){var R=ia.screenshots&&
ia.screenshots.length?ia.screenshots[0]:null;return R?ia.itemUrl+"/info/"+R:ia.thumbnailUrl},_formatItemTitle:function(ia){return"\x3ch3 class\x3d'font-size-0 trailer-0'\x3e"+(ia.title||ia.name||"\x3cNo Title\x3e")+"\x3c/h3\x3e"},_hideDownload:function(ia){var R=ia.typeKeywords&&-1<ia.typeKeywords.indexOf("indoors"),S=ia.typeKeywords&&-1<ia.typeKeywords.indexOf("instantApp"),N=ia.typeKeywords&&-1<ia.typeKeywords.indexOf("story"),X=ia.typeKeywords&&-1<ia.typeKeywords.indexOf("Configurable")&&-1<ia.typeKeywords.indexOf("createAppWithoutMap");
ia="/apps/instant/filtergallery/index.html"===ia.url&&-1<window.location.pathname.indexOf("group.html");var aa=la.self.isPortal;return R||S||ia||aa&&X&&!S&&!R&&!N?"hide":""},_previewButtonWidth:function(ia){return"hide"===this._hideDownload(ia)?"btn-wide":""}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/on dojo/query dojo/string dojo/has put-selector/put ../util/misc dojo/i18n!./nls/pagination dojo/_base/sniff xstyle/css!../css/extensions/Pagination.css".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){function m(k){k.noDataNode?(p(k.noDataNode,"!"),delete k.noDataNode):k.cleanup();k.contentNode.innerHTML=""}function n(k){if(k.loadingNode)p(k.loadingNode,"!"),delete k.loadingNode;else if(k._oldPageNodes){for(var l in k._oldPageNodes)k.removeRow(k._oldPageNodes[l]);delete k._oldPageNodes;k._oldPageObserver&&(k._oldPageObserver.cancel(),k._numObservers--,delete k._oldPageObserver)}delete k._isLoading}return G("dgrid.extensions.Pagination",K,{rowsPerPage:10,pagingTextBox:!1,
previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:t,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var k=this,l=this.paginationNode=p(this.footerNode,"div.dgrid-pagination"),h=this.paginationStatusNode=p(l,"div.dgrid-status"),e=this.i18nPagination;h.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();h.innerHTML=a.substitute(e.status,{start:1,end:1,total:0});l=this.paginationNavigationNode=
p(l,"div.dgrid-navigation");this.firstLastArrows&&(h=this.paginationFirstNode=p(l,"span.dgrid-first.dgrid-page-link","\u00ab"),h.setAttribute("aria-label",e.gotoFirst),h.tabIndex=0);this.previousNextArrows&&(h=this.paginationPreviousNode=p(l,"span.dgrid-previous.dgrid-page-link","\u2039"),h.setAttribute("aria-label",e.gotoPrev),h.tabIndex=0);this.paginationLinksNode=p(l,"span.dgrid-pagination-links");this.previousNextArrows&&(h=this.paginationNextNode=p(l,"span.dgrid-next.dgrid-page-link","\u203a"),
h.setAttribute("aria-label",e.gotoNext),h.tabIndex=0);this.firstLastArrows&&(h=this.paginationLastNode=p(l,"span.dgrid-last.dgrid-page-link","\u00bb"),h.setAttribute("aria-label",e.gotoLast),h.tabIndex=0);this._listeners.push(f(l,".dgrid-page-link:click,.dgrid-page-link:keydown",function(d){if("keydown"!==d.type||13===d.keyCode)if(d=this.className,!(k._isLoading||-1<d.indexOf("dgrid-page-disabled"))){var g=k._currentPage;var u=Math.ceil(k._total/k.rowsPerPage);this===k.paginationPreviousNode?k.gotoPage(g-
1):this===k.paginationNextNode?k.gotoPage(g+1):this===k.paginationFirstNode?k.gotoPage(1):this===k.paginationLastNode?k.gotoPage(u):"dgrid-page-link"===d&&k.gotoPage(+this.innerHTML)}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var k=this.pageSizeOptions,l=this.paginationSizeSelect;if(k&&k.length){if(!l){l=this.paginationSizeSelect=p(this.paginationNode,"select.dgrid-page-size[aria-label\x3d"+
this.i18nPagination.rowsPerPage+"]");var h=this._paginationSizeChangeHandle=f(l,"change",v.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)}));this._listeners.push(h)}for(h=l.options.length=0;h<k.length;h++)p(l,"option",k[h],{value:k[h],selected:this.rowsPerPage===k[h]});this._updateRowsPerPageOption()}else k&&k.length||!l||(p(l,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(k){this.pageSizeOptions=k&&k.sort(function(l,
h){return l-h});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var k=this.rowsPerPage,l=this.pageSizeOptions,h=this.paginationSizeSelect;h&&(0>w.indexOf(l,k)?this._setPageSizeOptions(l.concat([k])):h.value=""+k)},_setRowsPerPage:function(k){this.rowsPerPage=k;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(){function k(E,A){if(h.pagingTextBox&&E==g&&1<y){var F=p(d,"input.dgrid-page-input[type\x3dtext][value\x3d$]",g);F.setAttribute("aria-label",
e.jumpPage);h._pagingTextBoxHandle=f(F,"change",function(){var I=+this.value;!isNaN(I)&&0<I&&I<=y&&h.gotoPage(+this.value)});C&&"INPUT"===C.tagName&&F.focus()}else{var H=E===g;F=p(d,"span"+(H?".dgrid-page-disabled":"")+".dgrid-page-link",E+(A?" ":""));F.setAttribute("aria-label",e.gotoPage);F.tabIndex=H?-1:0;z===E&&(H?E<y?z++:D.focus():F.focus());H||(D=F)}}function l(E,A){p(E,(A?".":"!")+"dgrid-page-disabled");E.tabIndex=A?-1:0}var h=this,e=this.i18nPagination,d=this.paginationLinksNode,g=this._currentPage,
u=this.pagingLinks,x=this.paginationNavigationNode,y=Math.ceil(this._total/this.rowsPerPage),B=this._pagingTextBoxHandle,C=document.activeElement,z,D;C&&q.contains(this.paginationNavigationNode,C)?"dgrid-page-link"===C.className&&(z=+C.innerHTML):C=null;B&&B.remove();d.innerHTML="";c(".dgrid-first, .dgrid-previous",x).forEach(function(E){l(E,1===g)});c(".dgrid-last, .dgrid-next",x).forEach(function(E){l(E,g>=y)});if(u&&0<y){k(1,!0);x=g-u;for(2<x?p(d,"span.dgrid-page-skip","..."):x=2;x<Math.min(g+
u+1,y);x++)k(x,!0);g+u+1<y&&p(d,"span.dgrid-page-skip","...");1<y&&k(y)}else h.pagingTextBox&&k(g);C&&-1===C.tabIndex&&(u=c("[tabindex\x3d'0']",this.paginationNavigationNode),C===this.paginationPreviousNode||C===this.paginationFirstNode?C=u[0]:u.length&&(C=u[u.length-1]),C&&C.focus())},refresh:function(){var k=this;this.inherited(arguments);if(this.store)return this.gotoPage(1).then(function(l){setTimeout(function(){f.emit(k.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:k,results:l})},
0);return l})},_onNotification:function(k){k.length!==this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(k,l){var h=this,e=this.inherited(arguments);this._lastCollection=null;l||(this._topLevelRequest&&this._topLevelRequest!==k&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof k.cancel&&(this._topLevelRequest=k),r.when(k,function(){h._topLevelRequest&&delete h._topLevelRequest}));return e},insertRow:function(){var k=this._oldPageNodes,l=this.inherited(arguments);
k&&l===k[l.id]&&delete k[l.id];return l},gotoPage:function(k){var l=this,h=new r;this._trackError(function(){var e=l.rowsPerPage,d=(k-1)*e,g=v.mixin(l.get("queryOptions"),{start:d,count:e}),u=l.contentNode,x;if(l.showLoadingMessage){m(l);var y=l.loadingNode=p(u,"div.dgrid-loading");y.innerHTML=l.loadingMessage}else{l._oldPageNodes=y={};u=u.children;var B=0;for(x=u.length;B<x;B++)y[u[B].id]=u[B];l._oldPageObserver=l.observers.pop()}l._isLoading=!0;var C=l.store.query(l.query,g);r.when(l.renderArray(C,
null,g),function(z){n(l);l.scrollTo({y:0});r.when(C.total,function(D){D||(l.noDataNode&&(p(l.noDataNode,"!"),delete l.noDataNode),l.noDataNode=p(l.contentNode,"div.dgrid-no-data"),l.noDataNode.innerHTML=l.noDataMessage);l.paginationStatusNode.innerHTML=a.substitute(l.i18nPagination.status,{start:Math.min(d+1,D),end:Math.min(D,d+e),total:D});l._total=D;l._currentPage=k;l._rowsOnPage=z.length;l._updateNavigation()});(7>b("ie")||b("ie")&&b("quirks"))&&l.resize();h.resolve(C)},function(z){n(l);h.reject(z)});
return h.promise})||h.reject();return h.promise}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(K,G,w,v,r,f,c){w.getObject("dgrid.selector",!0);return dgrid.selector=function(a,b){function p(e){return!k.allowSelect(k.row(e))}function q(e){return function(d){var g=d.rows,u=g.length;d="false";var x;for(x=0;x<u;x++){var y=k.cell(g[x],a.id).element;y&&(y=(y.contents||y).input)&&!y.disabled&&
(y.checked=e,y.setAttribute("aria-checked",e))}if("checkbox"==l.type){g=k.selection;u=!1;for(x in g)if(g[x]!=k.allSelected){u=!0;break}l.indeterminate=u;l.checked=k.allSelected;u?d="mixed":k.allSelected&&(d="true");l.setAttribute("aria-checked",d)}}}function t(e){if("click"==e.type||32==e.keyCode||!f("opera")&&13==e.keyCode||0===e.keyCode){var d=k.row(e);k._selectionTriggerEvent=e;if(d){if(k.allowSelect(d)){var g=k._lastSelected&&k.row(k._lastSelected);"radio"==b?g&&g.id==d.id||(k.clearSelection(),
k.select(d,null,!0),k._lastSelected=d.element):d&&(e.shiftKey?q(!0)({rows:[d]}):g=null,g=e.shiftKey?g:null,k.select(g||d,d,g?void 0:null),k._lastSelected=d.element)}}else c(this,(k.allSelected?"!":".")+"dgrid-select-all"),k[k.allSelected?"clearSelection":"selectAll"]();k._selectionTriggerEvent=null}}function m(){k._hasSelectorInputListener=!0;n.push(k.on(".dgrid-selector:click,.dgrid-selector:keydown",t));var e=k._handleSelect;k._handleSelect=function(u){this.cell(u).column!=a&&e.apply(this,arguments)};
if("function"==typeof a.disabled){var d=k.allowSelect,g=a.disabled;k.allowSelect=function(u){var x=d.call(this,u);return g===p?x:x&&!g.call(a,u.data)}}a.disabled=p;n.push(k.on("dgrid-select",q(!0)));n.push(k.on("dgrid-deselect",q(!1)))}var n=[],k,l;a||(a={});a.type&&(a.selectorType=a.type,K.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));a.selectorType=b=b||a.selectorType||"checkbox";a.sortable=!1;var h="function"==typeof b?b:function(e,d,g){var u=d.parentNode;k._hasSelectorInputListener||
m();var x=a.disabled;c(u&&u.contents?u:d,".dgrid-selector");d=d.input||(d.input=c(d,"input[type\x3d"+b+"]",{tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex,disabled:x&&("function"==typeof x?x.call(a,g):x),checked:e}));d.setAttribute("aria-checked",!!e);return d};r.after(a,"init",function(){k=a.grid});r.after(a,"destroy",function(){G.forEach(n,function(e){e.remove()});k._hasSelectorInputListener=!1});a.renderCell=function(e,d,g,u,x){d=(d=e&&k.row(e))&&k.selection[d.id];h(d,g,e)};a.renderHeaderCell=function(e){var d=
"label"in a?a.label:a.field||"";"radio"!=b&&k.allowSelectAll?h(!1,e,{}):(e.appendChild(document.createTextNode(d)),k._hasSelectorInputListener||m());l=e.lastChild};return a}})},"dgrid/util/mouse":function(){define(["dojo/_base/lang","dojo/on","dojo/dom","dojo/query"],function(K,G,w){function v(f,c){return function(a,b){return G(a,f+":"+c,function(p){if(!w.isDescendant(p.relatedTarget,this))return b.call(this,p)})}}var r={enterRow:v(".dgrid-content .dgrid-row","mouseover"),enterCell:v(".dgrid-content .dgrid-cell",
"mouseover"),enterHeaderCell:v(".dgrid-header .dgrid-cell","mouseover"),leaveRow:v(".dgrid-content .dgrid-row","mouseout"),leaveCell:v(".dgrid-content .dgrid-cell","mouseout"),leaveHeaderCell:v(".dgrid-header .dgrid-cell","mouseout"),createDelegatingHandler:v};K.getObject("dgrid.util.mouse",!0);K.mixin(dgrid.util.mouse,r);return r})},"dgrid/util/touch":function(){define(["dojo/on","dojo/query"],function(K,G){function w(r,f,c,a){if(!(1<c.targetTouches.length)){var b=c.changedTouches[0],p=b.screenX,
q=b.screenY;a&&c.preventDefault();var t=K(r,"touchend",function(m){var n=m.changedTouches[0];m.targetTouches.length||(Math.abs(n.screenX-p)<v.tapRadius&&Math.abs(n.screenY-q)<v.tapRadius&&(a&&m.preventDefault(),f.call(this,m)),t.remove())})}}var v={tapRadius:10,dbltapTime:250,selector:function(r,f,c){return function(a,b){var p=f.bubble;p?f=p:!1!==c&&(c=!0);return K(a,f,function(q){var t=q.target;3==t.nodeType&&(t=t.parentNode);for(;!G.matches(t,r,a);)if(t==a||!c||!(t=t.parentNode))return;return b.call(t,
q)})}},countCurrentTouches:function(r,f){if(!("touches"in r))return-1;var c,a,b;for(a=c=0;b=r.touches[c];++c)f.contains(b.target)&&++a;return a},tap:function(r,f){return K(r,"touchstart",function(c){w(r,f,c)})},dbltap:function(r,f){var c,a;return K(r,"touchstart",function(b){c?w(r,function(p){if(c){var q=p.changedTouches[0];Math.abs(q.screenX-c.screenX)<v.tapRadius&&Math.abs(q.screenY-c.screenY)<v.tapRadius&&(a&&clearTimeout(a),c=a=null,f.call(this,p))}},b,!0):w(r,function(p){c=p.changedTouches[0];
a=setTimeout(function(){c=a=null},v.dbltapTime)},b)})}};return v})},"arcgisonline/sharing/dijit/dialog/_AppTemplateFiltersMixin":function(){define(["dojo/_base/declare"],function(){return{rootNodes:{app:{instant:{typekeywords:["instantApp"]},all:{},collect:{typekeywords:["collect"]},compare:{typekeywords:["compare"]},"3dscene":{typekeywords:["3Dscene","twoDthreeD"]},analyze:{typekeywords:["summarize"]},imagery:{typekeywords:["interpret"]},present:{typekeywords:["gallery"]},local:{typekeywords:["local"]},
route:{typekeywords:["route"]},showcase:{typekeywords:["showcase"]}}}}})},"arcgisonline/sharing/dijit/_RefreshMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on"],function(K,G,w,v){function r(f){"object"!==typeof f&&(f=Error(f));f.grid=this;v.emit(this.domNode,"dgrid-error",{grid:this,error:f,cancelable:!0,bubbles:!0})}return K(null,{_trackError:function(f){"string"===typeof f&&(f=G.hitch(this,f));try{var c=f()}catch(a){r.call(this,a)}return w.when(c,G.hitch(this,
function(){v.emit(this.domNode,"refresh",{cancelable:!0,bubbles:!0})}),G.hitch(this,r))}})})},"arcgisonline/map/utils/previewInTemplate":function(){define(["dojo/io-query","esri/lang","esri/request","arcgisonline/sharing/util"],function(K,G,w,v){return function(r,f){w({url:r.itemDataUrl,callbackParamName:"callback"}).promise.always(function(){var c=v.isPortal(),a=f.url,b=a.indexOf("?"),p=-1<b?a.substring(0,b):a;a=-1<b?K.queryToObject(a.substring(b+1)):{};b="Web Scene"===r.type?"webscene":"webmap";
if(c){c=f.url;p=v.parseUrl(c);var q="https:"===window.location.protocol;!1===/^(?:[a-z]+:)?\/\//i.test(c)&&(c=window.location.protocol+"//"+window.location.host+v.getHomeAppContext()+p.path);c=q?v.getSecureUrl(c):v.getHttpUrl(c)}else c=p;a[b]=r.id;window.open(c.replace("/hosted/","/apps/")+"?"+K.objectToQuery(a))})}})},"arcgisonline/map/utils/openMap":function(){define(["dojo/Deferred","dojo/io-query","dojo/_base/lang","./getMapCookie","arcgisonline/sharing/dijit/dialog/OpenMapDlg"],function(K,G,
w,v,r){return function(f,c,a){var b="./webmap/viewer.html?webmap\x3d"+f,p="signin.html?returnUrl\x3d"+encodeURIComponent(b);c="boolean"===typeof c?c:!1;v().then(w.hitch(this,function(q){q&&!0===q.c?r.prototype.statics.getInstance().show(c?p:b,q):document.location=c?p:b}))}})},"arcgisonline/sharing/dijit/dialog/OpenMapDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,arcgisonline/sharing/dijit/dialog/GeneralDlg,dijit/_Widget,dijit/_Templated"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.OpenMapDlg");
K.require("dijit.Dialog");K.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");K.require("dijit._Widget");K.require("dijit._Templated");K.declare("arcgisonline.sharing.dijit.dialog.OpenMapDlg",[G._Widget,G._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" dojoAttachPoint\x3d"_dialog" id\x3d"open-map-dialog" title\x3d"${i18n.title}"\x3e\r\n    \x3cdiv id\x3d"open-map-dialog-content"\x3e\r\n    \x3cdiv style\x3d"margin-bottom: 10px;"\x3e${i18n.unsavedChangesMsg}\x3c/div\x3e\r\n      \x3ctable class\x3d"table-layout" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n        \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd valign\x3d"top"\x3e\x3cdiv\x3e${i18n.titleLabel}\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\r\n            \x3ctd\x3e\x3cdiv id\x3d"open-map-dialog-title"\x3e\x3c/div\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr id\x3d"open-map-dialog-layersRow"\x3e\r\n            \x3ctd valign\x3d"top"\x3e\x3cdiv id\x3d"open-map-dialog-layersLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\r\n            \x3ctd\x3e\x3cdiv id\x3d"open-map-dialog-layers"\x3e\x3c/div\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr id\x3d"open-map-dialog-tablesRow"\x3e\r\n            \x3ctd valign\x3d"top"\x3e\x3cdiv id\x3d"open-map-dialog-tablesLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\r\n            \x3ctd\x3e\x3cdiv id\x3d"open-map-dialog-tables"\x3e\x3c/div\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n      \x3cdiv style\x3d"margin-top: 10px;"\x3e${i18n.openAnotherMapQtn}\x3c/div\x3e\r\n      \x3cbr /\x3e\r\n      \x3cdiv style\x3d"float: right;" class\x3d"clearfix"\x3e\r\n         \x3cbutton id\x3d"button_open-map-no" class\x3d"action-bar-btn jevent cancel right btn-two" dojoType\x3d"dijit.form.Button"\x3e${i18n.notOpen}\x3c/button\x3e\r\n         \x3cbutton id\x3d"button_open-map-yes" class\x3d"padding-right-half jevent primary right" dojoType\x3d"dijit.form.Button"\x3e${i18n.yesOpen}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
handler:null,newMapUrl:"",i18n:null,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.OpenMapDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common;K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").openMapDlg)},postCreate:function(){this.loadConnections()},show:function(v,r,f,c,a){this.newMapUrl=v;v=document.getElementById("webmap-title-text")&&
document.getElementById("webmap-title-text").innerHTML;K.byId("open-map-dialog-title").innerHTML=v||a||r&&r.t||this.i18n.untitled;var b=[];r?K.forEach(r.operationalLayers,function(m){b.push(m.title)}):f&&K.forEach(f,function(m){"user"!==m.type&&"mapNotes"!==m.type||b.push(m.title)});if(0===b.length)K.style(K.byId("open-map-dialog-layersRow"),"display","none");else{if(1===b.length)K.byId("open-map-dialog-layersLabel").innerHTML=this.i18n.layerLabel,K.byId("open-map-dialog-layers").innerHTML=b[0];else{K.byId("open-map-dialog-layersLabel").innerHTML=
this.i18n.layersLabel;var p="",q="";K.forEach(b,function(m){p+=q+m;q=", "});K.byId("open-map-dialog-layers").innerHTML=p}K.style(K.byId("open-map-dialog-layersRow"),"display","")}var t=[];r?K.forEach(r.tables,function(m){t.push(m.title)}):c&&K.forEach(c,function(m){t.push(m.title)});0===t.length?K.style(K.byId("open-map-dialog-tablesRow"),"display","none"):(1===t.length?(K.byId("open-map-dialog-tablesLabel").innerHTML=this.i18n.tableLabel,K.byId("open-map-dialog-tables").innerHTML=t[0]):(K.byId("open-map-dialog-tablesLabel").innerHTML=
this.i18n.tablesLabel,q=p="",K.forEach(t,function(m){p+=q+m;q=", "}),K.byId("open-map-dialog-tables").innerHTML=p),K.style(K.byId("open-map-dialog-tablesRow"),"display",""));G.byId("open-map-dialog").show()},loadConnections:function(){K.query(".jevent").connect("onclick",function(v){v.preventDefault()});K.query("#button_open-map-no").connect("onclick",function(){G.byId("open-map-dialog").hide()});K.query("#button_open-map-yes").connect("onclick",K.hitch(this,"submitRequest"))},submitRequest:function(v){document.location=
this.newMapUrl},hide:function(){G.byId("open-map-dialog").hide()}})})},"arcgisonline/sharing/dijit/dialog/PluginConfigurableAppsViewer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/dom-class dojo/query dojo/Deferred ./_AppTemplateFiltersMixin arcgisonline/sharing/util dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c,a,b,p){var q=K("arcgisonline.sharing.dijit.dialog.PluginConfigurableAppsViewer",null,{infoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"create-app"\x3e${i18n.items.createApp}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary ${previewButtonWidth}" id\x3d"preview-app"\x3e${i18n.templatesGridWidget.preview}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary ${hideDownload}" id\x3d"download-app"\x3e${i18n.templatesGridWidget.download}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
customGroupInfoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"create-app"\x3e${i18n.items.createApp}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary btn-wide" id\x3d"preview-app"\x3e${i18n.templatesGridWidget.preview}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
filters:G.mixin({},a.rootNodes.app),filterStrings:p.appTemplateFilters,rowsPerPage:100,constructor:function(t){G.mixin(this,t);this.helpLinkUrl=esriGeowConfig.self&&esriGeowConfig.self.isPortal?esriGeowConfig.self?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120001018"]:"":esriGeowConfig.self?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120001055"]:"";delete this.filters.present;delete this.filters["3dscene"]},fetchData:function(){var t=[];this.parent._currentFilter.types=
['type:"Web Mapping Application"'];this._portal=this.parent._portal;this._user=this._portal.getPortalUser();return this.checkIndoorsCapabilities(this._portal).then(function(m){this.capabilities=m;return this._fetchGroups().then(function(n){w.forEach(n||[],function(k){k&&k.id&&t.push('group:"'+k.id+'"')});return this._fetchGroupItems(t)}.bind(this))}.bind(this))},_fetchGroups:function(){var t=this._portal.templatesGroupQuery||null;return t&&t.split("id:")[1]?this._fetchOrgConfigurableApps():this._fetchEsriConfigurableApps()},
_fetchGroup:function(t,m){this._groups=this._groups||[];return this._groups[t]||this._portal.queryGroups(m,!0).then(G.hitch(this,function(n){n=n.total&&n.results&&n.results[0]||null;return(this._groups[t]=n)||{}}))},_fetchGroupItems:function(t){return this.parent._fetchItems({groups:t})},_updateIndoorsFilters:function(){var t=this.capabilities.indoors,m=this.capabilities.indoorsmaps,n=this.capabilities.indoorsspaces,k=t||n||m;!b.isArcGISEnterpriseOnKubernetes()&&k||this.parent._currentFilter.persistentTypekeywords.push('-typekeywords:"indoors"');
m||t||this.parent._currentFilter.persistentTypekeywords.push('-title:"Indoor Viewer"');n||t||this.parent._currentFilter.persistentTypekeywords.push('-title:"Indoor Space Planner"')},_fetchEsriConfigurableApps:function(){var t=(this._user&&this._user.culture||this._portal&&this._portal.culture||dojoConfig.locale||"en").split("-")[0].toLowerCase(),m={q:'title:"Web Application Templates" AND owner:"esri_'+({id:"ind",uk:"ukr"}[t]||t)+'"'};this.parent._currentFilter.persistentTypekeywords=['-typekeywords:"3Dscene"'];
this._updateIndoorsFilters();return v([this._fetchGroup("esriGallery_"+t,m)]).then(G.hitch(this,function(n){return n||[]}))},_fetchOrgConfigurableApps:function(){var t={q:this._portal.templatesGroupQuery||null};this.filters=null;this.rowsPerPage=8;this.extraClasses=["wide"];this.infoPanelTemplate=this.customGroupInfoPanelTemplate;this.parent._currentFilter.persistentTypekeywords=['-typekeywords:"Web AppBuilder"'];this._updateIndoorsFilters();return v([this._fetchGroup("customGallery",t)]).then(G.hitch(this,
function(m){this.parent.sortDescending=m[0].sortOrder&&"desc"===m[0].sortOrder||!1;this.parent.sortAttribute=m[0].sortField||"asc";return m&&m.length?[m[0]]:[]}))},hasIndoors:function(t){return this.fetchCapabilities(t).then(function(m){return m.some(function(n){return"indoors"===n.id})})},checkIndoorsCapabilities:function(t){return this.fetchCapabilities(t).then(function(m){return m.reduce(function(n,k){n[k.id]=!0;return n},{})})},fetchCapabilities:function(t){var m=new c;b.request({url:esriGeowConfig.restBaseUrl+
"portals/self/subscriptionInfo"}).then(function(n){m.resolve(n&&n.orgCapabilities||[])});return m}});G.mixin(q,{add:function(t,m){if(!t.plugIn){var n=m||{};n.parent=t;t.plugIn=new q(n)}},remove:function(t){t.plugIn&&(t.plugIn.destroy(),delete t.plugIn)}});return q})},"arcgisonline/sharing/dijit/dialog/Plugin3DConfigurableAppsViewer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/dom-class dojo/query ./_AppTemplateFiltersMixin ./PluginConfigurableAppsViewer dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b){var p=K("arcgisonline.sharing.dijit.dialog.Plugin3DConfigurableAppsViewer",[a],{constructor:function(q){this.inherited(arguments);this.filters=null},_fetchEsriConfigurableApps:function(){var q=(this._user&&this._user.culture||this._portal&&this._portal.culture||dojoConfig.locale||"en").split("-")[0].toLowerCase(),t={q:'title:"Web Application Templates" AND owner:"esri_'+({id:"ind",uk:"ukr"}[q]||q)+'"'};this.parent._currentFilter.persistentTypekeywords=['typekeywords:"3Dscene"',
'typekeywords: "twoDthreeD"'];return v([this._fetchGroup("esriGallery_"+q,t)]).then(G.hitch(this,function(m){return m||[]}))},_fetchOrgConfigurableApps:function(){var q={q:this._portal.templatesGroupQuery||null};this.filters=null;this.rowsPerPage=8;this.extraClasses=["wide"];this.infoPanelTemplate=this.customGroupInfoPanelTemplate;this.parent._currentFilter.persistentTypekeywords=['typekeywords:"3Dscene"','-typekeywords:"Web AppBuilder"','typekeywords:"WAB3D"','typekeywords: "twoDthreeD"'];return v([this._fetchGroup("customGallery",
q)]).then(G.hitch(this,function(t){this.parent.sortDescending=t[0].sortOrder&&"desc"===t[0].sortOrder||!1;this.parent.sortAttribute=t[0].sortField||"asc";return t&&t.length?[t[0]]:[]}))}});G.mixin(p,{add:function(q,t){if(!q.plugIn){var m=t||{};m.parent=q;q.plugIn=new p(m)}},remove:function(q){q.plugIn&&(q.plugIn.destroy(),delete q.plugIn)}});return p})},"arcgisonline/pages/item/widgets/AdvancedOfflineOptions/AdvancedOfflineOptions":function(){define("require exports tslib calcite-web/js/calcite-web dojo/topic dojo/_base/lang dojo/string dojo/text!./templates/AdvancedOfflineOptions.html dojo/text!./templates/AdvancedOfflineOptionSearchItem.html dojo/i18n!../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../../../../sharing/util ../../../../esriGeowConfig ../../../utils/dom ../../../dijit/Overlay ../../../dijit/InfoTooltip ../../../../tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);return function(){function d(g,u){this.title=p["default"].itemProperties.advancedOptions.overlayTitle;this.i18n=
p["default"];this.overlayContents=c["default"].substitute(a["default"],{i18n:this.i18n});this._fileNameEdited=!1}d.prototype.open=function(){this.inherited(arguments);this.domNode.classList.add("overlay--top");this._editableFeaturesAndAttachmentsOption=this.domNode.querySelector(".js-edit-features-and-attachments");this._editableFeaturesOnlyOption=this.domNode.querySelector(".js-edit-features-only");this._editableFeaturesNoneOption=this.domNode.querySelector(".js-edit-none");this._readonlyFeaturesAndAttachmentsOption=
this.domNode.querySelector(".js-readonly-features-and-attachments");this._readonlyFeaturesOnlyOption=this.domNode.querySelector(".js-readonly-features-only");this._tileWebmapOption=this.domNode.querySelector(".js-tile-webmap");this._tileMobileOption=this.domNode.querySelector(".js-tile-mobile");this._tileMobileFileNameContainer=this.domNode.querySelector(".js-file-name-container");this._tileMobileFilename=this.domNode.querySelector(".js-tile-mobile-file-name");this._fileNameError=this.domNode.querySelector(".js-tile-mobile-file-name-error");
this._tileOrgOption=this.domNode.querySelector(".js-tile-org");this._tileOrgSearchContainer=this.domNode.querySelector(".js-tile-search-container");this._tileOrgSearch=this.domNode.querySelector(".js-tile-search");this._searchResults=this.domNode.querySelector(".js-search-results");this._updateLoader=this.domNode.querySelector(".js-update-loader");this._learnMoreLink=this.domNode.querySelector(".js-learn-more");this._overlay.insertBefore(this.domNode.querySelector(".js-update-loader-container"),this.domNode.querySelector(".overlay-title-bar"));
var g=this.page.portal.helpMap.m["120000899"];this._learnMoreLink.href=this.page.portal.helpBase+(g?g:"");this._overlayActionBar.insertBefore(this._learnMoreLink,this._overlayActionBar.querySelector("nav"));this._attachmentsInfo=new h["default"]({content:this.i18n.itemProperties.advancedOptions.attachmentTooltip},this.domNode.querySelector(".js-attachments-info"));this._packageInfo=new h["default"]({content:this.i18n.itemProperties.advancedOptions.tilePackageTooltip},this.domNode.querySelector(".js-package-info"));
g=(this._itemData=f["default"].clone(this.item.itemData))&&this._itemData.applicationProperties&&this._itemData.applicationProperties.offline||{};this._editableLayers=g.editableLayers;this._readonlyLayers=g.readonlyLayers;this._offlineBasemap=g.offlinebasemap;v["default"].accordion();this._selectOptions();this._addListeners()};d.prototype.close=function(){this.inherited(arguments)};d.prototype._addListeners=function(){var g=this;[].slice.call(this.domNode.querySelectorAll(".js-tile-option")).forEach(function(u){u.addEventListener("change",
function(){k["default"].showHide(g._tileMobileFileNameContainer,g._tileMobileOption.checked);k["default"].showHide(g._tileOrgSearchContainer,g._tileOrgOption.checked)})});this._tileMobileFilename.addEventListener("change",function(){g._fileNameEdited=!0;g._onFilenameKeyup()});this._tileMobileFilename.addEventListener("keyup",this._onFilenameKeyup.bind(this));this._tileOrgSearch.addEventListener("keyup",this._onSearchKeyup.bind(this));this._tileOrgSearch.addEventListener("search",this._onSearchKeyup.bind(this))};
d.prototype._onFilenameKeyup=function(){if(this._fileNameEdited){var g=this._tileMobileFilename.value;this._fileNameError.textContent="";0===g.length?this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.emptyFileNameError:this._isValidFileExtension(g)?(this._fileNameError.classList.remove("is-active"),this._tileMobileFilename.classList.remove("input-error")):this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.invalidFileExtension;0<this._fileNameError.textContent.length&&
(this._fileNameError.classList.add("is-active"),this._tileMobileFilename.classList.add("input-error"))}};d.prototype._onSearchKeyup=function(){var g=this;m["default"].request({url:n["default"].restBaseUrl+"search",content:{num:16,start:1,sortField:"title",sortOrder:"asc",q:'title:"'+this._tileOrgSearch.value+'" orgid:'+this.page.portal.id+' (type:"Vector Tile Package" OR type:"Raster Tile Package")'}}).then(function(u){g._searchResults.innerHTML="";0<g._tileOrgSearch.value.length&&u.results.forEach(function(x){g._searchResults.insertAdjacentHTML("beforeend",
c["default"].substitute(b["default"],{title:x.title}))})})};d.prototype.handlePrimary=function(){var g=this;if(this._isValid()){var u=this.domNode.querySelector(".js-editable-features:checked");u={applicationProperties:{offline:{editableLayers:{download:u.value,sync:u.dataset.sync},readonlyLayers:{downloadAttachments:this._readonlyFeaturesAndAttachmentsOption.checked}}}};this._tileMobileOption.checked&&(u.applicationProperties.offline.offlinebasemap={referenceBasemapName:this._tileMobileFilename.value});
this._itemData=w.__assign(w.__assign({},this._itemData),u);u={text:JSON.stringify(this._itemData)};this._updateLoader.classList.add("is-active");this._primaryBtn.disabled=!0;this._cancelBtn.disabled=!0;this.closeBtn.disabled=!0;this.page.updateItem(u).then(function(x){g.close();x&&x.code&&x.message?r["default"].publish("settings/error",x):r["default"].publish("settings/update")},function(x){g.close();r["default"].publish("settings/error",x)})}};d.prototype._isValidFileExtension=function(g){return/\.(vtpk|tpk|tpkx)$/i.test(g)};
d.prototype._isValid=function(){var g=this._tileMobileFilename.value;this._fileNameEdited=!0;if(this._tileMobileOption.checked&&(this._fileNameError.textContent="",0===g.length?this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.emptyFileNameError:this._isValidFileExtension(g)||(this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.invalidFileExtension),0<this._fileNameError.textContent.length))return this._fileNameError.classList.add("is-active"),this._tileMobileFilename.classList.add("input-error"),
!1;this._fileNameError.classList.remove("is-active");this._tileMobileFilename.classList.remove("input-error");return!0};d.prototype._selectOptions=function(){this._editableLayers&&"featuresAndAttachments"!==this._editableLayers.download?"features"===this._editableLayers.download?this._editableFeaturesOnlyOption.checked=!0:this._editableFeaturesNoneOption.checked=!0:this._editableFeaturesAndAttachmentsOption.checked=!0;!this._readonlyLayers||this._readonlyLayers.downloadAttachments?this._readonlyFeaturesAndAttachmentsOption.checked=
!0:this._readonlyFeaturesOnlyOption.checked=!0;this._offlineBasemap&&0!==this._offlineBasemap.referenceBasemapName.length?0<this._offlineBasemap.referenceBasemapName.length?(this._tileMobileOption.checked=!0,this._tileMobileFilename.value=this._offlineBasemap.referenceBasemapName,k["default"].showNode(this._tileMobileFileNameContainer)):this._tileOrgOption.checked=!0:this._tileWebmapOption.checked=!0};return d=w.__decorate([e["default"](t["default"],q["default"],l["default"])],d)}()})},"arcgisonline/pages/dijit/InfoTooltip":function(){define("require exports tslib dojo/text!./InfoTooltip/templates/InfoTooltip.html dojo/i18n!../../nls/arcgisonline dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dijit/TooltipDialog dijit/popup dijit/a11yclick ../utils/dom ../utils/icons ../../tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.templateString=v["default"];this.i18n=r["default"];this.buttonClasses=this.content=this.title="";this.dialogClasses=[];this.orient=["above-centered","below-centered"];this.tooltipId=
"";this.icons=m["default"];this.preventInfoButtonEventDefault=!1;this.popoverClass=this.calciteIcon=this.icon=this.infoText="";this.isBlue=this.hideIcon=this.disabled=this.hideCloseBtn=!1}k.prototype.postMixInProperties=function(){this.inherited(arguments);this.buttonAriaLabel||(this.buttonAriaLabel=this.title)};k.prototype.postCreate=function(){this.inherited(arguments);this.disabled&&this._infoButton.classList.add("no-pointer");this.title||this._popoverContent.classList.remove("leader-half");this._popoverContent.innerHTML=
this.content;this.hideCloseBtn&&t["default"].hideNode(this._closeIcon);this._dialog=new b["default"]({id:this.tooltipId,"class":"popover "+this.popoverClass,title:this.title,content:this._popover});0<this.dialogClasses.length&&t["default"].addClasses(this._dialog.domNode,this.dialogClasses);void 0!==this.infoText&&(this._infoButton.className+=" flex flex-align-center",t["default"].showNode(this.infoTextEl));this.icon?this.iconWrapper.innerHTML=this.icon:this.calciteIcon&&(this.iconWrapper.innerHTML=
'\x3ccalcite-icon icon\x3d"'+this.calciteIcon+'" scale\x3d"s"\x3e\x3c/calcite-icon\x3e');this.hideIcon&&t["default"].hideNode(this.iconWrapper);this.isBlue&&this._infoButton.classList.remove("btn-link-darker-gray");this._addEventListeners()};k.prototype.closePopup=function(){p["default"].close(this._dialog)};k.prototype.destroy=function(){this.inherited(arguments);this._dialog&&this._dialog.destroy()};k.prototype.addContentClass=function(l){this._popoverContent.classList.add(l)};k.prototype.show=
function(){t["default"].showNode(this.domNode)};k.prototype.hide=function(){t["default"].hideNode(this.domNode)};k.prototype.getPopover=function(){return this._popover};k.prototype.update=function(l,h){this.infoTextEl.innerHTML=l;this._popoverContent.innerHTML=h};k.prototype._addEventListeners=function(){var l=this;this.own(q["default"](this._closeIcon,function(){p["default"].close(l._dialog);l._infoButton.focus()}),q["default"](this._infoButton,function(h){h.stopPropagation();l.preventInfoButtonEventDefault&&
h.preventDefault();l.disabled||(p["default"].open({popup:l._dialog,orient:l.orient,around:l._infoButton}),t["default"].showNode(l._popover),l._closeIcon.focus())}),f["default"](this._popover,"click",function(h){h.stopPropagation()}),f["default"](document.body,"click",function(h){p["default"].close(l._dialog)}))};return k=w.__decorate([n["default"](a["default"],c["default"])],k)}()})},"arcgisonline/sharing/dijit/dialog/AttachCodeDlg":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util,arcgisonline/sharing/dijit/dialog/GeneralDlg,dijit/form/Button,dijit/_Widget,dijit/_Templated"],
function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.AttachCodeDlg");K.require("arcgisonline.sharing.util");K.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");K.require("dijit.form.Button");K.require("dijit._Widget");K.require("dijit._Templated");K.declare("arcgisonline.sharing.dijit.dialog.AttachCodeDlg",[G._Widget,G._Templated],{util:arcgisonline.sharing.util,community:arcgisonline.sharing.geow.Community,content:arcgisonline.sharing.geow.Content,widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContainer"  dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" dojoAttachPoint\x3d"dialog" title\x3d"${titleLabel}" execute\x3d""\x3e\r\n    \x3ctable class\x3d"table-layout"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n\t\t\t      \x3cdiv id\x3d"code_upload_message" style\x3d"margin-bottom:10px;"\x3e\r\n\t\t\t        ${messageLabel}\r\n\t\t\t      \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n\t\t\t      \x3cform dojoAttachPoint\x3d"form" action\x3d"" enctype\x3d"multipart/form-data" method\x3d"post" onSubmit\x3d"return false;"\x3e\r\n\t\t\t        \x3cinput type\x3d"file" name\x3d"file" dojoAttachPoint\x3d"fileInput" size\x3d"50" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"title" value\x3d"" /\x3e\r\n\t\t\t        \x3cinput type\x3d"hidden" name\x3d"type" value\x3d"" /\x3e\r\n\t\t\t        \x3cinput type\x3d"hidden" name\x3d"typekeywords" value\x3d"" /\x3e\r\n\t\t\t        \x3cinput type\x3d"hidden" name\x3d"overwrite" value\x3d"false" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"relationshipType" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"originItemId" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"async" value\x3d"true" /\x3e\r\n\r\n\t\t\t        \x3c!-- this is complicated... need some way of automating this --\x3e\r\n\t\t\t        \x3c!--\x3cdiv id\x3d"add-item-callback" name\x3d"callback.html" dojotype\x3d"dijit.form.TextBox" type\x3d"hidden" value\x3d"textarea"\x3e\x3c/div\x3e --\x3e\r\n\t\t\t      \x3c/form\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"padding-top:2em;"\x3e\r\n  \t\t      \x3cbutton dojoAttachPoint\x3d"cancelButton" dojoType\x3d"dijit.form.Button" class\x3d"esriFloatTrailing cancel right" type\x3d"button" dojoAttachEvent\x3d"onClick:_cancelButtonClick"\x3e\r\n  \t\t        ${i18n.cancel}\r\n  \t        \x3c/button\x3e\r\n    \t\t    \x3cbutton dojoAttachPoint\x3d"uploadButton" dojoType\x3d"dijit.form.Button" class\x3d"esriFloatTrailing primary right"  type\x3d"button" dojoAttachEvent\x3d"onClick:_uploadButtonClick"\x3e\r\n    \t\t      ${i18n.uploadLabel}\r\n    \t\t    \x3c/button\x3e\r\n            \x3cspan id\x3d"code_upload-waiting" class\x3d"esriFloatTrailing" style\x3d"display:none;padding-top:8px;"\x3e\x3c/span\x3e\r\n\t\t        \x3cspan class\x3d"esriFloatLeading error" dojoAttachPoint\x3d"errorLabelNode" style\x3d"padding-top:8px;"\x3e\x3c/span\x3e\r\n\t        \x3c/td\x3e\r\n\t      \x3c/tr\x3e\r\n\t    \x3c/tbody\x3e\r\n\t  \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
dialog:null,fileInput:null,cancelButton:null,uploadButton:null,cancelButton:null,clearFormOnHide:!0,codeAttachment:null,titleLabel:"",messageLabelUpdate:"",messageLabel:"",messageErrorUpdate:"",errorLabelNode:null,type:"Code Attachment",typeKeywords:"Code",item:null,sharing:null,fileName:null,_lastUploaded:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common;K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline",
"arcgisonline").attachCodeDlg);this.titleLabel=this.i18n.attachCode;this.messageLabelUpdate=this.i18n.messageLabelUpdateString;this.messageLabel=this.i18n.messageLabelString;this.messageErrorUpdate=this.i18n.messageErrorUpdateString},postCreate:function(){this.fileInput&&K.connect(this.fileInput,"onchange",this,function(){this.errorLabelNode.innerHTML=""})},statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.AttachCodeDlg);return this._instance}},
clear:function(){this.fileInput&&(this.fileInput.value="")},hide:function(){this.dialog&&(this.dialog.hide(),this.clearFormOnHide&&this.clear())},show:function(v){(this.codeAttachment=v)&&this.codeAttachment.name?(this.messageLabelUpdate=K.string.substitute(this.messageLabelUpdate,{fileName:this.codeAttachment.name}),K.byId("code_upload_message").innerHTML=this.messageLabelUpdate,this.dialog.set("title",this.i18n.updateCode)):(K.byId("code_upload_message").innerHTML=this.messageLabel,this.dialog.set("title",
this.i18n.attachCode));this.dialog&&this.dialog.show()},_cancelButtonClick:function(v){this.hide()},_uploadButtonClick:function(v){(v=this.fileInput.value)&&0<v.length&&this.util.endsWith(v,".zip")?(this.uploadButton.set("disabled",!0),this.cancelButton.set("disabled",!0),K.style(K.byId("code_upload-waiting"),"display","inline-block"),this.doUpload()):this.errorLabelNode.innerHTML=this.i18n.fileZipFormat},doUpload:function(){if(null==this.item||null===this.item.id)this.uploadButton.set("disabled",
!1),this.cancelButton.set("disabled",!1),K.style(K.byId("code_upload-waiting"),"display","none");else{var v=this.fileInput.value,r=v.lastIndexOf("\\");-1<r&&(v=v.substring(r+1,v.length));if(this.codeAttachment){var f=this.codeAttachment.name.lastIndexOf(".");r=v.lastIndexOf(".");f=[this.codeAttachment.name.substring(0,f),this.codeAttachment.name.substring(f).toLowerCase()];v=[v.substring(0,r),v.substring(r).toLowerCase()];f[0]!==v[0]||f[1]!==v[1]?(arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:this.i18n.updateCodeError,
message:K.string.substitute(this.messageErrorUpdate,{fileName:this.codeAttachment.name})}),this.uploadButton.set("disabled",!1),this.cancelButton.set("disabled",!1),K.style(K.byId("code_upload-waiting"),"display","none")):this._updateCodeItem()}else this._createCodeItem()}},_createCodeItem:function(){if(this.form){this.form.type.value=this.type;this.form.typekeywords.value=this.typeKeywords;this.form.relationshipType.value="WMA2Code";"Mobile Application"===this.item.type&&(this.form.relationshipType.value=
"MobileApp2Code");this.form.originItemId.value=this.item.id;var v=this.fileInput.value,r=v.lastIndexOf("\\");-1<r&&(v=v.substring(r+1,v.length));this.fileName=v;this.form.title.value=v;v=this.form.title.value.lastIndexOf("\\");-1<v&&(this.form.title.value=this.form.title.value.substring(v+1,this.form.title.value.length));v=this.form.title.value.lastIndexOf("/");-1<v&&(this.form.title.value=this.form.title.value.substring(v+1,this.form.title.value.length));this.content.addItem(null,this.form,K.hitch(this,
this._handle_addItem),K.hitch(this,this._handle_addItem))}},_updateCodeItem:function(){if(this.form){this.form.type.value=this.type;this.form.typekeywords.value=this.typeKeywords;this.form.overwrite.value="true";var v=this.fileInput.value,r=v.lastIndexOf("\\");-1<r&&(v=v.substring(r+1,v.length));this.fileName=v;this.form.title.value=v;this.content.updateItem(this.codeAttachment,this.form,K.hitch(this,this._handle_addItem),K.hitch(this,this._handle_addItem))}},_handle_addItem:function(v,r){var f=!1;
-1<r.url.indexOf("/status")&&(f=!0);if(!f&&v.success||f&&"completed"===v.status)this._lastUploaded=K.clone(v),this._lastUploaded.title=this._lastUploaded.name=this.form.title.value,this.onUpload(this._lastUploaded);else{f=this.i18n.attachementFailedUpload;v&&v.error&&v.error.message?f=v.error.message:v&&v.statusMessage&&(f=v.statusMessage);var c=this.i18n.cannotAddAttachment;-1<f.indexOf("already exists")?(f=this.i18n.sameZipFileName,c=this.i18n.duplicateFileName):-1<f.indexOf("The request size is greater than the max allowed of 1024MB")&&
(f=this.i18n.fileSizeExceeds);this.hide();arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:c,message:f})}this.uploadButton.set("disabled",!1);this.cancelButton.set("disabled",!1);K.style(K.byId("code_upload-waiting"),"display","none")},_handle_updateItem:function(v,r){if(v.success)this.uploadButton.set("disabled",!1),this.cancelButton.set("disabled",!1),K.style(K.byId("code_upload-waiting"),"display","none"),this.hide();else{var f=this.i18n.attachementFailedUpload;
v&&v.error&&v.error.message&&(f=v.error.message);var c=this.i18n.cannotAddAttachment;-1<f.indexOf("already exists")?(f=this.i18n.sameZipFileName,c=this.i18n.duplicateFileName):-1<f.indexOf("The request size is greater than the max allowed of 1024MB")&&(f=this.i18n.fileSizeExceeds);this.hide();arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance().show({title:c,message:f});this.uploadButton.set("disabled",!1);this.cancelButton.set("disabled",!1);K.style(K.byId("code_upload-waiting"),
"display","none")}},onUpload:function(v){}})})},"arcgisonline/sharing/dijit/dialog/ManageSceneCache":function(){define("require esri/declare esri/Evented esri/lang esri/request dojo/_base/lang dojo/on dojo/query dojo/topic dijit/a11yclick dojo/string dojo/promise/all dojo/json dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dijit/Dialog ../../../sharing/dijit/dialog/ConfirmDialog ../../../sharing/dijit/dialog/GeneralDlg ../../../pages/pageUtil ../../../pages/utils/dom ../../../pages/utils/number ../../../pages/serviceUtil ../../../pages/statusUtil ../../../sharing/util ../../../esriGeowConfig dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ManageSceneCache.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E){return G([k,l],{declaredClass:"arcgisonline.sharing.dijit.dialog.ManageSceneCache",basePath:K.toUrl("arcgisonline/sharing/dijit/dialog"),baseClass:"esriManageSceneCache",templateString:E,widgetsInTemplate:!0,_serviceStartWait:5E3,postMixInProperties:function(){this.inherited(arguments);this.i18n=f.mixin({},D.common);f.mixin(this.i18n,D.manageSceneCache);f.mixin(this.i18n,{webScene:D.items.webScene,buildingCache:D.itemProperties.buildingCache})},
postCreate:function(){this.inherited(arguments);this._initHandlers()},startup:function(){this.inherited(arguments);var A=C.isPortal();A&&u.hideNode(this._sceneLayerSelectContainer);!A&&this._hasSource()?this._isBuildingSceneLayer()?this._rebuildLayersRadioClick():this._rebuildFullRadioClick():(A&&(u.hideNode(this._optionsContainer),u.showNode(this._portalOptionsContainer),u.checkNode(this._rebuildPortalFullRadio,!0),this._rebuildLayersRadioClick()),u.disableNode(this._rebuildFullRadio),this._rebuildLayersRadioClick())},
_initHandlers:function(){this.own(p(this._rebuildFullRadio,this._rebuildFullRadioClick.bind(this)),p(this._rebuildLayersRadio,this._rebuildLayersRadioClick.bind(this)),p(this._rebuildPartialRadio,this._rebuildLayersRadioClick.bind(this)),p(this._rebuildPortalFullRadio,this._rebuildLayersRadioClick.bind(this)),p(this._rebuildPortalPartialRadio,this._rebuildLayersRadioClick.bind(this)),p(this._rebuildPortalAttributesRadio,this._rebuildLayersRadioClick.bind(this)),p(this._rebuildAttributesRadio,this._rebuildLayersRadioClick.bind(this)),
p(this._rebuildBtn,this._rebuildClick.bind(this)),p(this._cancelBtn,this._cancelClick.bind(this)))},_hasSource:function(){return v.isDefined(this._item.sourceData)},_dialogHidden:function(){this._dialog&&this._dialog.destroyRecursive();this.destroyRecursive()},_fetchSourceItemAdminServiceInfo:function(){return C.request({url:this._featureServiceAdminUrl})},_rebuildFullRadioClick:function(){u.hideNode(this._sceneLayerSelectContainer);u.disableNode(this._rebuildBtn,!1)},_rebuildLayersRadioClick:function(){if(!C.isPortal()&&
this._canShowPartialRebuild){var A=u.isChecked(this._rebuildLayersRadio),F=u.isChecked(this._rebuildPartialRadio);if(A||F)a(".layer-checkbox",this.domNode).map(function(H){var I="true"===H.getAttribute("data-rebuild-required");u.checkNode(H,A&&I);u.disableNode(H,I)}),a(".layer-label",this.domNode).map(function(H){var I="true"===H.getAttribute("data-rebuild-required");H.classList[F&&I?"add":"remove"]("label-disabled")})}C.isPortal()||u.showNode(this._sceneLayerSelectContainer);this._checkBoxClick()},
_displayCreditCost:function(A,F,H){var I=C.isPortal(),L=z.self&&z.self.subscriptionInfo||{},J=(z.self&&z.self.user||{}).availableCredits||L.availableCredits||0;t({adminServiceInfo:this._fetchSourceItemAdminServiceInfo()}).then(function(O){I?F():(this._sourceItem.set("adminServiceInfo",O.adminServiceInfo),y.fetchScenePublishingCredits(this._sourceItem,A).then(function(P){var fa=this._fullRebuildInProgress?this.i18n.confirmFullProceed:this.i18n.confirmProceed;confirmMsg="\x3cp\x3e"+[this._fullRebuildInProgress?
this.i18n.confirmFullDesc:this.i18n.confirmDesc,q.substitute(this._fullRebuildInProgress?this.i18n.confirmFullCredits:this.i18n.confirmCredits,{credits:x.format(P),availableCredits:x.format(J)}),fa].join("\x3c/p\x3e\x3cp\x3e")+"\x3c/p\x3e";confirmDlg=new e({buttonOkLabel:this.i18n.ok,buttonCancelLabel:this.i18n.cancel,"class":"confirmDlg-default"});J<P&&confirmDlg.okButton.set("disabled",!0);confirmDlg.show({title:this.i18n.confirmTitle,message:confirmMsg}).then(function(V){"onOk"===V?F():H();confirmDlg.hide()}.bind(this))}.bind(this)))}.bind(this))},
_rebuildClick:function(){u.isChecked(this._rebuildFullRadio)&&this._hasSource()?this._rebuildFullCache():this._rebuildLayers()},_rebuildFullCache:function(){var A=this._item.owner,F=this._item.folderId,H=z.restBaseUrl+"content/users/"+A+"/"+(F&&F!==A?F+"/":"")+"publish";publishRequest={buildInitialCache:!1,itemid:this._item.sourceData.id,filetype:"featureService",publishParameters:m.stringify({name:this._item.name?this._item.name:this._item.title.replace(/ /g,"_"),targetSR:this._item.serviceInfo.layers[0].spatialReference}),
outputType:"sceneService",overwrite:!0};selectedLayers=[];rebuildFullFailure=function(I){g.createSpecifiedDialog(d).show({title:this.i18n.errorTitle,message:this.i18n.rebuildFullError});u.deactivateNode(this._caching);u.disableNode(this._rebuildBtn,!1);u.showNodes([this._optionsContainer,this._buttonBar])}.bind(this);this._fullRebuildInProgress=!0;u.disableNode(this._rebuildBtn,!0);a(".layer-checkbox",this.domNode).map(function(I){u.checkNode(I,!0);selectedLayers.push({id:parseInt(I.getAttribute("data-layer-id"),
10)})});this._displayCreditCost(selectedLayers,function(){u.hideNodes([this._optionsContainer,this._buttonBar]);u.activateNode(this._caching);C.request({url:H,content:publishRequest},{usePost:!0}).then(function(I){I&&I.services&&0<I.services.length?(I=I.services.shift(),B.checkAsyncJobStatus(z.restBaseUrl+"content/users/"+A+"/items/"+I.serviceItemId+"/status?jobId\x3d"+I.jobId).then(function(L){setTimeout(function(){this._rebuildLayers();b.publish("manage-scene-cache/republish",L)}.bind(this),this._serviceStartWait)}.bind(this),
rebuildFullFailure)):rebuildFullFailure(I)}.bind(this),rebuildFullFailure)}.bind(this),function(){this._fullRebuildInProgress=!1;u.disableNode(this._rebuildBtn,!1)}.bind(this))},_rebuildLayers:function(){var A=z.self&&z.self.subscriptionInfo||{},F=(z.self&&z.self.user||{}).availableCredits||A.availableCredits||0,H=[],I=C.isPortal(),L,J,O;a(".layer-checkbox",this.domNode).map(function(P){u.isChecked(P)&&H.push({id:parseInt(P.getAttribute("data-layer-id"),10)})});0<H.length&&this._adminUrl&&(u.disableNode(this._rebuildBtn,
!0),t({adminServiceInfo:this._fetchSourceItemAdminServiceInfo()}).then(function(P){if(I)this._submitPortalSceneCacheJob(H).then(function(ba){var ka=y.adjustHostedServerForProtocol(this._hostedServer.url)+"/rest/services/System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/jobs/"+ba.jobId;ba.jobUrl=ka;b.publish("manage-scene-cache/rebuild",ba);u.disableNode(this._rebuildBtn,!1);this.hide()}.bind(this),function(ba){u.disableNode(this._rebuildBtn,!1);g.createSpecifiedDialog(d).show({title:this.i18n.errorTitle,
message:this.i18n.rebuildError})}.bind(this),function(ba){u.disableNode(this._rebuildBtn,!1);g.createSpecifiedDialog(d).show({title:this.i18n.errorTitle,message:this.i18n.rebuildError})}.bind(this));else{this._sourceItem.set("adminServiceInfo",P.adminServiceInfo);P=u.isChecked(this._rebuildPartialRadio);var fa=this._rebuildAttributesRadio.checked,V=this._adminUrl+(fa?"/updateAttribute":P?"/updateCache":"/rebuildCache");this._fullRebuildInProgress?C.request({url:V,content:{layers:H.map(function(ba){return ba.id},
this).join(",")}},{usePost:!0}).then(function(ba){b.publish("manage-scene-cache/rebuild",ba);u.disableNode(this._rebuildBtn,!1);this.hide()}.bind(this),function(ba){u.disableNode(this._rebuildBtn,!1);u.deactivateNode(this._caching);u.showNodes([this._optionsContainer,this._buttonBar]);g.createSpecifiedDialog(d).show({title:this.i18n.errorTitle,message:this.i18n.rebuildError})}.bind(this)):(P||fa?this._isBuildingSceneLayer()?y.fetchPartialUpdateBuildingScenePublishingCredits(this._sourceItem,this._item,
H):y.fetchPartialUpdateScenePublishingCredits(this._sourceItem,this._item,H):y.fetchScenePublishingCredits(this._sourceItem,H,this._isBuildingSceneLayer())).then(function(ba){O=[this.i18n.confirmDesc,q.substitute(this.i18n.confirmCredits,{credits:x.format(ba),availableCredits:x.format(F)}),this.i18n.confirmProceed];J="\x3cp\x3e"+O.join("\x3c/p\x3e\x3cp\x3e")+"\x3c/p\x3e";L=new e({buttonOkLabel:this.i18n.ok,buttonCancelLabel:this.i18n.cancel,"class":"confirmDlg-default"});F<ba&&L.okButton.set("disabled",
!0);L.show({title:this.i18n.confirmTitle,message:J}).then(function(ka){"onOk"===ka?C.request({url:V,content:{layers:H.map(function(la){return la.id},this).join(",")}},{usePost:!0}).then(function(la){b.publish("manage-scene-cache/rebuild",la);u.disableNode(this._rebuildBtn,!1);this.hide()}.bind(this),function(la){u.disableNode(this._rebuildBtn,!1);g.createSpecifiedDialog(d).show({title:this.i18n.errorTitle,message:this.i18n.rebuildError})}.bind(this)):u.disableNode(this._rebuildBtn,!1);L.hide()}.bind(this))}.bind(this))}}.bind(this)))},
_cancelClick:function(){this._dialog.hide()},_checkBoxClick:function(){var A=a(".layer-checkbox",this.domNode).some(function(F){return u.isChecked(F)});u.disableNode(this._rebuildBtn,!A)},_createLayerListDisplay:function(A,F){var H=n.create("div",{display:"table"},F);A&&0<A.length&&A.forEach(this._createLayerDisplay.bind(this,H))},_createLayerDisplay:function(A,F){var H=F.requiresRebuild&&!0===F.requiresRebuild?"true":"false",I=n.create("div",{display:"table-row"},A),L=n.create("div",{display:"table-cell"},
n.create("div",{display:"table-column"},I));I=n.create("div",{display:"table-cell"},n.create("div",{display:"table-column"},I));var J={id:q.substitute("layer-${id}-checkbox",{id:F.id}),"class":"layer-checkbox",type:"checkbox","data-layer-id":F.id,"data-rebuild-required":H};C.isPortal()&&(J.checked=!0);L=n.create("input",J,L);n.create("label",{"for":q.substitute("layer-${id}-checkbox",{id:F.id}),"class":"layer-label trailer-0",innerHTML:F.name,"data-rebuild-required":H},n.create("span",null,I));this.own(p(L,
this._checkBoxClick.bind(this)))},_getPortalUpdateMode:function(){return u.isChecked(this._rebuildPortalAttributesRadio)?"PARTIAL_UPDATE_ATTRIBUTES":u.isChecked(this._rebuildPortalPartialRadio)?"PARTIAL_UPDATE_NODES":"RECREATE_ALL_NODES"},_submitPortalSceneCacheJob:function(A){var F=1<A.length?A.map(function(I){return{id:I.id}}):{},H=this._getPortalUpdateMode();A=y.adjustHostedServerForProtocol(this._hostedServer.url)+"/rest/services/System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/submitJob";
F={service_url:this._item.url,num_of_caching_service_instances:2,layer:m.stringify(F),update_mode:H,update_extent:"DEFAULT",area_of_interest:m.stringify({displayFieldName:"",geometryType:"esriGeometryPolygon",spatialReference:{wkid:54051,latestWkid:54051},fields:[{name:"OID",type:"esriFieldTypeOID",alias:"OID"},{name:"updateGeom_Length",type:"esriFieldTypeDouble",alias:"updateGeom_Length"},{name:"updateGeom_Area",type:"esriFieldTypeDouble",alias:"updateGeom_Area"}],features:[],exceededTransferLimit:!1}),
f:"json",token:this._item.serverToken};return r({url:A,content:F},{usePost:!0})},_isBuildingSceneLayer:function(){return-1<this._item.typeKeywords.indexOf("Building")},_isPointSceneLayer:function(){return-1<this._item.typeKeywords.indexOf("Point")},_is3DObjectsWithoutUpdateEnabled:function(){return-1<this._item.typeKeywords.indexOf("3DObject")&&!this._hasUpdateEnabled()},_hasUpdateEnabled:function(){return(this._item.serviceInfo.layers||[]).some(function(A){return A&&v.isDefined(A.updateEnabled)&&
!0===A.updateEnabled},this)},show:function(A,F,H){var I=C.isPortal();this._sourceItem=A;this._item=F;this._featureServiceUrl=A.url;this._featureServiceAdminUrl=I?F.url:A.url.replace("/rest/","/rest/admin/");this._adminUrl=F.adminUrl;this._adminServiceInfo=F.serviceInfo||{};this._hostedServer=H;this._canShowPartialRebuild=!I&&!this._isPointSceneLayer()&&!this._is3DObjectsWithoutUpdateEnabled()&&!this._isBuildingSceneLayer();this._dialog=new h({title:this.i18n.title,"class":this.baseClass});I||this._canShowPartialRebuild||
(u.hideNode(this._rebuildPartialContainer),u.hideNode(this._rebuildPartialAttrContainer));this._createLayerListDisplay(this._adminServiceInfo.layers,this._sceneLayerContainer);this._dialog.setContent(this.domNode);this.own(c(this._dialog,"hide",function(){this._dialogHidden()}.bind(this)));!I&&this._isBuildingSceneLayer()&&(u.hideNode(this._rebuildFullContainer),this._rebuildLayersRadio.checked=!0,this._rebuildLayersRadioClick());this._dialog.show()},hide:function(){this._dialog.hide()}})})},"arcgisonline/sharing/dijit/dialog/JobStatusDlg":function(){define("require exports tslib ../../../pages/pageUtil ../../../pages/utils/arrays ../../../pages/utils/date ../../../pages/utils/dom ../../../pages/utils/number ../../util ./SimpleDlg ../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/topic esri/lang moment/moment dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/JobStatusDlg.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);return function(){function u(x){this.templateString=g["default"];
this.i18n=w.__assign(w.__assign({},d["default"].common),d["default"].jobStatusDlg);this.linkToJobStatus=!0;this.STATUS_STARTED="Started";this.STATUS_IN_PROGRESS="InProgress";this.STATUS_FAILED="Failed";this.STATUS_COMPLETED="Completed";this.PORTAL_STATUS_STARTED="esriJobSubmitted";this.PORTAL_STATUS_IN_PROGRESS="esriJobExecuting";this.PORTAL_STATUS_FAILED="esriJobFailed";this.PORTAL_STATUS_COMPLETED="esriJobSucceeded";this.PORTAL_STATUS_CANCELLED="esriJobCancelled";this.PORTAL_STATUS_CANCELLING="esriJobCancelling";
this.PORTAL_STATUS_TIMED_OUT="esriJobTimedOut";this.PORTAL_STATUS_WAITING="esriJobWaiting"}u.prototype.postCreate=function(){this.inherited(arguments);this._initHandlers()};u.prototype.show=function(x,y,B,C,z){this._portal=x;this._portalUser=y;this._jobUrl=B;this._jobInfoUrl=C;this._initUI();this._populateStatus(z);this._dialog.show()};u.prototype.hide=function(){this._dialog.hide()};u.prototype._initUI=function(){var x=this._portal.isPortal;x||c["default"].hideNode(this._cancelJobBtn);this.linkToJobStatus||
(c["default"].hideNode(this._jobIdLinkContainer),c["default"].showNode(this._jobIdText));c["default"].showHide(this._jobAdminDetailsContainer,x&&this._portalUser.isOrgAdmin)};u.prototype._initHandlers=function(){this.own(k["default"](this._closeBtn,this._closeClick.bind(this)),k["default"](this._cancelJobBtn,this._cancelJobClick.bind(this)),l["default"].subscribe("job-status/refresh",this._populateStatus.bind(this)))};u.prototype._cancelJobClick=function(){var x=this,y=this._jobUrl.indexOf("?token\x3d");
y=-1<y?this._jobUrl.substr(0,y)+"/cancel"+this._jobUrl.substr(y):this._jobUrl+"/cancel";c["default"].disableNode(this._cancelJobBtn,!0);b["default"].request({url:y,content:{cancel:!0}},{usePost:!0}).then(function(B){if(!B||(null===B||void 0===B?0:B.code))v["default"].createSpecifiedDialog(p["default"],{title:x.i18n.errorTitle,content:x.i18n.cancelError}).show(),c["default"].disableNode(x._cancelJobBtn,!1)},function(B){v["default"].createSpecifiedDialog(p["default"],{title:x.i18n.errorTitle,content:x.i18n.cancelError}).show();
c["default"].disableNode(x._cancelJobBtn,!1)})};u.prototype._closeClick=function(){this.hide()};u.prototype._getStatusString=function(x){switch(x){case this.STATUS_STARTED:return this.i18n.started;case this.STATUS_IN_PROGRESS:return this.i18n.inProgress;case this.STATUS_COMPLETED:return this.i18n.completed;case this.STATUS_FAILED:return this.i18n.failed;case this.PORTAL_STATUS_STARTED:return this.i18n.started;case this.PORTAL_STATUS_IN_PROGRESS:return this.i18n.inProgress;case this.PORTAL_STATUS_FAILED:return this.i18n.failed;
case this.PORTAL_STATUS_COMPLETED:return this.i18n.completed;case this.PORTAL_STATUS_CANCELLED:return this.i18n.cancelled;case this.PORTAL_STATUS_CANCELLING:return this.i18n.cancelling;case this.PORTAL_STATUS_TIMED_OUT:return this.i18n.timedOut;case this.PORTAL_STATUS_WAITING:return this.i18n.waiting;default:return""}};u.prototype._getDurationString=function(x,y){if(x){var B=h["default"].isDefined(y)?x+y:Date.now(),C=e["default"](B).diff(e["default"](x),"seconds"),z=e["default"](B).diff(e["default"](x),
"minutes");B=e["default"](B).diff(e["default"](x),"hours");var D=void 0,E=void 0;if(60>C)return this.i18n.seconds.replace("${num}",a["default"].format(C));if(60>z)return D=this.i18n.minutes.replace("${num}",a["default"].format(z)),E=this.i18n.seconds.replace("${num}",a["default"].format(C-60*z)),D+" "+E;var A=this.i18n.hours.replace("${num}",a["default"].format(B));D=this.i18n.minutes.replace("${num}",a["default"].format(z-60*B));E=this.i18n.seconds.replace("${num}",a["default"].format(C-60*z));return A+
" "+D+" "+E}return""};u.prototype._getStartDateFromString=function(x){if(x=r["default"].find(null!==x&&void 0!==x?x:[],function(B){return"esriJobMessageTypeInformative"===B.type&&0===B.description.indexOf("Start Time: ")}))try{var y=x.description.substring(13).trim();return(new Date(y)).getTime()}catch(B){}return 0};u.prototype._getEndTimeFromString=function(x){if(x=r["default"].find(null!==x&&void 0!==x?x:[],function(C){return"esriJobMessageTypeInformative"===C.type&&0===C.description.indexOf("Succeeded at ")}))try{var y=
x.description.indexOf(" (Elapsed Time: "),B=x.description.substring(14,y).trim();return(new Date(B)).getTime()}catch(C){}};u.prototype._populateStatus=function(x){var y=this._portal.isPortal,B=this._portalUser.isOrgAdmin;if(x){this._statusInfo.classList.remove("hide");this._statusLoader.classList.remove("is-active");var C=(y?B?x.submittedTime:this._getStartDateFromString(x.messages):x.startTime)||0,z=y?C:1E3*C;C=x.messages?this._getEndTimeFromString(x.messages):void 0;var D=y?B?h["default"].isDefined(x.duration)&&
x.duration||void 0:C?C-z:void 0:h["default"].isDefined(x.totalTime)?1E3*x.totalTime:void 0;C=y&&!B?this._getStatusString(x.jobStatus):this._getStatusString(x.status);var E=f["default"].format(new Date(z),"day-short-month-year-long-time"),A=h["default"].isDefined(D)?f["default"].format(new Date(z+D),"day-short-month-year-long-time"):"";z=this._getDurationString(z,D);D=y&&B?x.machinename:"";B=y&&B?x.username:"";x=y?x.jobId:x.id;this._jobStatus.innerHTML=C;this._jobStartTime.innerHTML=E;this._jobDuration.innerHTML=
z;this._jobEndTime.innerHTML=A;this._jobMachine.innerHTML=D;this._jobUser.innerHTML=B;this._jobIdLink.href=this._jobInfoUrl;this._jobIdLink.innerHTML=x;this._jobIdText.textContent=x;x=r["default"].includes([this.i18n.completed,this.i18n.failed,this.i18n.cancelled,this.i18n.cancelling,this.i18n.timedOut],C);c["default"].disableNode(this._cancelJobBtn,x)}else this._statusInfo.classList.add("hide"),this._statusLoader.classList.add("is-active"),c["default"].disableNode(this._cancelJobBtn,!0)};return u=
w.__decorate([q["default"](m["default"],t["default"],n["default"])],u)}()})},"arcgisonline/sharing/dijit/dialog/SimpleDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/form/Button,dijit/_Widget,dijit/_Templated"],function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.SimpleDlg");K.require("dijit.Dialog");K.require("dijit.form.Button");K.require("dijit._Widget");K.require("dijit._Templated");K.declare("arcgisonline.sharing.dijit.dialog.SimpleDlg",[G._Widget,G._Templated],
{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_content"\x3e${!content}\x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-1 esriFloatTrailing right"\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick: hide" class\x3d"primary" type\x3d"button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
postMixInProperties:function(){this.inherited(arguments);this.i18n=K.i18n.getLocalization("arcgisonline","arcgisonline").common},show:function(){this.dialog.show()},hide:function(){this.dialog.hide()}})})},"arcgisonline/sharing/dijit/AppendData":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/UploadProgressBar ../../pages/utils/arrays ../../pages/utils/clone ../../pages/utils/dom ../../pages/utils/strings ../../sharing/util ./AppendData/FieldTableRow ./AppendData/_canMatchFields ./dialog/ConfirmDialog ./dialog/_CreateItemUtilMixin ../../sharing/geow/Item dijit/_TemplatedMixin dijit/_WidgetBase dojo/on dojo/topic dojo/Deferred dojo/promise/all esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!../../pages/dijit/View/templates/loader.html dojo/text!./AppendData/templates/_appendData.html dojo/text!./AppendData/templates/_table-row.html ../../tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);
y=w.__importDefault(y);B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);E=w.__importDefault(E);return function(){function A(F,H){this.templateString=z["default"];this.i18n=B["default"];this.baseClass="appendData";this.dijits=[];this.supportedItemTypes=[{value:"Shapefile",innerHTML:B["default"].addItemFrm.typeShapefile,regex:"(.zip$)",fileType:"shapefile",extension:"zip",appendUploadFormat:"shapefile"},{value:"File Geodatabase",innerHTML:B["default"].addItemFrm.itemFileGeodatabase,
regex:"(.zip$)",fileType:"fileGeodatabase",extension:"zip",appendUploadFormat:"filegdb"},{value:"CSV",regex:"(.csv$)",fileType:"csv",appendUploadFormat:"csv",extension:"csv"},{value:"Microsoft Excel",regex:"(.xls$|.xlsx$)",fileType:"excel",appendUploadFormat:"excel",extension:"xls"},{value:"Microsoft Excel",regex:"(.xls$|.xlsx$)",fileType:"excel",appendUploadFormat:"excel",extension:"xlsx"},{value:"GeoJson",regex:"(.geojson$)",fileType:"geojson",appendUploadFormat:"geojson",extension:"geojson"}];
this.supportedFilesRegEx="(.zip$|.csv$|.xls$|.xlsx$|.geojson$)";this.noneField={value:"__none",displayName:B["default"].appendDataDlg.none,name:B["default"].appendDataDlg.none,type:"none"};this.longitudeField={value:"longitude",displayName:B["default"].addItemFrm.locationTypes.longitude,name:"longitude",type:"esriFieldTypeDouble",sqlType:"sqlTypeDouble",nullable:!0,editable:!0,locationType:"longitude"};this.latitudeField={value:"latitude",displayName:B["default"].addItemFrm.locationTypes.latitude,
name:"latitude",type:"esriFieldTypeDouble",sqlType:"sqlTypeDouble",nullable:!0,editable:!0,locationType:"latitude"};this.sortHandlers=[]}A.prototype.postMixInProperties=function(){var F;this.inherited(arguments);this.serviceUrl=this.item&&this.item.url;this.portal=this.portal||(null===(F=this.item)||void 0===F?void 0:F.portal)||(null===v["default"]||void 0===v["default"]?void 0:v["default"].self)||{};this.user=this.user||this.portalUser||(this.portal.getPortalUser?this.portal.getPortalUser():this.portal.portalUser)||
{};this.serviceLayers=this.layer?a["default"]([this.layer||this.layerInfo]):a["default"](this.layers||[this.layer||this.layerInfo]);this._layerInfo=this.layer||this.layerInfo||this.serviceLayers&&this.serviceLayers.length?this.serviceLayers[0]:null;this.serviceInfo=this.item&&this.item.serviceInfo||{};this.adminServiceInfo=this.item&&this.item.adminServiceInfo||{};this.capabilities=this.portal.isPortal&&!this.item.isSDS?p["default"].stringToArray(this.serviceInfo.capabilities,",",!0):p["default"].stringToArray(this.adminServiceInfo.capabilities||
"",",",!0);this.changeTrackingEnabled=c["default"].includes(this.capabilities,"ChangeTracking");this.syncEnabled=this.serviceInfo.syncEnabled||!1};A.prototype.postCreate=function(){this.inherited(arguments);var F=this.domNode.querySelector(".js-analyze-loader-wrap");F.innerHTML=C["default"].replace("${location}","");this.uploadProgressBar=new f["default"]({});this.uploadProgressBar.startup();this.uploadProgressBar.hide();F.appendChild(this.uploadProgressBar.domNode);this.portal.isPortal&&(this.supportedItemTypes.splice(1,
1),this.step1Bullet4.innerText=B["default"].appendDataDlg.messageStep1Bullet4Portal);this.sortHeader=this.sortHeader.bind(this)};A.prototype.startup=function(){this.inherited(arguments);this.render().then(this.addEventListeners.bind(this)).then(function(){})};A.prototype.destroy=function(){var F=this;this.inherited(arguments);g["default"].publish("cancel-item-upload");this.deleteItem().then(function(){F.dijits.forEach(function(H){H.destroy()});F.sortHandlers.forEach(function(H){H.remove()});F.sortHandlers=
[];F.dijits=[]})};A.prototype.show=function(){var F,H,I,L=(null===(F=this.portal.helpMap)||void 0===F?void 0:F.m["120001300"])||"share-maps/manage-hosted-feature-layers.htm#ESRI_SECTION1_E2F5EF6240F246EBA5D238968B63BF97";this.dlg=new n["default"]({title:B["default"].appendDataDlg.title,buttonOkLabel:B["default"].appendDataDlg.uploadBtn,buttonCancelLabel:B["default"].common.cancel,helpLinkInfo:{title:B["default"].appendDataDlg.helpLinkTitle,url:""+this.portal.helpBase+L}});this.dlg.setContent(this.domNode);
this.dlg.show();this.okBtn=null===(H=this.dlg)||void 0===H?void 0:H.okButton;null===(I=this.okBtn)||void 0===I?void 0:I.set("disabled",!0);this.own(d["default"](this.dlg,"ok",this.processStep.bind(this)));return this.dlg};A.prototype.hide=function(){var F;null===(F=this.dlg)||void 0===F?void 0:F.hide();d["default"].emit(this,"hide",{bubbles:!0,cancelable:!0})};A.prototype.processStep=function(){var F=this,H=new u["default"];this.isStep1?this.uploadData().then(this.analyze.bind(this)).then(this.addLayerInfo.bind(this)).then(this.validateLayers.bind(this),
function(I){F.showError(I)}).then(this.showStep2.bind(this),function(I){F.showError(I)}).then(function(I){H.resolve(I)},function(I){F.showStep1()}):this.appendDataLayer().then(function(I){F.done();H.resolve(I)},function(I){F.showStep2();F.showError(I)});return H};A.prototype._setItemAttr=function(F){this.item=F};A.prototype._setReadOnlyAttr=function(F,H){var I=F?"add":"remove";g["default"].publish("/esri/disable",F," ");b["default"].querySelectorAllAsArray(".append-data",this.domNode).forEach(function(L){L.classList[I]("disabled")});
F?this.showLoader(H||this.i18n.common.pleaseWait):this.hideLoader()};A.prototype.setSelectedSourceType=function(){this.selectedSourceType=this.findSupportedType(this.supportedTypes.options[this.supportedTypes.selectedIndex].dataset.fileType)};A.prototype.getFieldMappings=function(){var F=this,H=this.fromField.value,I=this.toField.value,L=this.dijits.map(function(J){return J.field}).filter(function(J){return J.matchField&&"__none"!==J.matchField.value}).map(function(J){return{source:J.matchField&&
J.matchField.name,name:J.name}});this.updateExistingFeatures.checked&&"__none"!==I&&(L=L.filter(function(J){return J.name!==F.fromField.value&&J.name!==F.toField.value}),L.push({source:I,name:H}));return(null===L||void 0===L?0:L.length)?L:null};A.prototype.getAppendFields=function(F){return(((null===F||void 0===F?0:F.length)?F:this.getFieldMappings())||[]).filter(function(H){return null===H||void 0===H?void 0:H.name}).map(function(H){return H.name})};A.prototype.getAppendParams=function(){var F=this.selectedSourceType.appendUploadFormat,
H=this.updateExistingFeatures.checked,I=this.fromField.options[this.fromField.selectedIndex];I=this.findField({name:I.dataset.value,type:I.dataset.type},this.layerFields);var L=this.getSelectedDataLayer(),J=this.getFieldMappings();F={sourceTableName:L.name,fieldMappings:(null===J||void 0===J?0:J.length)?JSON.stringify(J):null,upsert:H,skipUpdates:!1,useGlobalIds:H&&"esriFieldTypeGlobalID"===(null===I||void 0===I?void 0:I.type),skipInserts:H?this.skipInserts.checked:!1,updateGeometry:H?this.updateGeometry.checked:
!0,appendFields:JSON.stringify(this.getAppendFields()),appendItemId:this.uploadedItem.id,appendUploadFormat:F,rollbackOnFailure:!0};!this.selectedSourceType||"csv"!==this.selectedSourceType.fileType&&"excel"!==this.selectedSourceType.fileType||(F=w.__assign(w.__assign({},F),{appendSourceInfo:JSON.stringify(this.getAnalyzeParameters())}));if(null===I||void 0===I?0:I.isUniqueIndex)F.upsertMatchingField=I.name;return F};A.prototype.getSelectedDataLayer=function(){var F=parseInt(this.dataLayersSelect.value,
10);var H=(this.dataLayers||[]).filter(function(I){return I.excelSheetId===F||I.id===F});return(null===H||void 0===H?0:H.length)?H.shift():{}};A.prototype.getSelectedServiceLayer=function(){var F=parseInt(this.serviceLayersSelect.value,10);return this.findLayer(""+F,this.serviceLayers||[])};A.prototype.getFormData=function(){var F=this.fileInput.files[0],H=(null===F||void 0===F?void 0:F.name)||"",I=this.selectedSourceType.value,L=H.substr(0,H.indexOf("."))+"_agotmp"+H.substr(H.indexOf(".")),J=new FormData;
J.append("type",I);J.append("title",L);J.append("file",F,L);this.origFilename=H;this.sourceTitle=L;return J};A.prototype.getAnalyzeParameters=function(){var F=a["default"](this.analyzeResults),H=this.findLocationField("longitude"),I=this.findLocationField("latitude"),L=F.publishParameters.locationType;H=H&&"__none"!==H.value?H.name:F.publishParameters.longitudeFieldName;I=I&&"__none"!==I.value?I.name:F.publishParameters.latitudeFieldName;H&&I?(F.publishParameters.locationType="coordinates",F.publishParameters.latitudeFieldName=
I,F.publishParameters.longitudeFieldName=H):"coordinates"!==L&&(F.publishParameters.locationType="none");return F.publishParameters};A.prototype.addEventListeners=function(){var F=new u["default"];this.own(d["default"](this.showFieldMatchingLink,"click",this.showFieldMatching.bind(this)),d["default"](this.updateExistingFeatures,"change",this.updateExistingFeaturesChange.bind(this)),d["default"](this.fileInput,"change",this.onFileChange.bind(this)),d["default"](this.fromField,"change",this.onFromFieldChange.bind(this)),
d["default"](this.toField,"change",this.onToFieldChange.bind(this)),d["default"](this.serviceLayersSelect,"change",this.onServiceLayerChange.bind(this)),d["default"](this.dataLayersSelect,"change",this.onDataLayerChange.bind(this)),d["default"](this.supportedTypes,"change",this.setSelectedSourceType.bind(this)));F.resolve();return F};A.prototype.sortHeader=function(F){var H=F.target;F=H.dataset.sort;var I=H.classList.contains("is-ascending")||H.classList.contains("is-descending");H=H.dataset.sortOrder;
I&&(H="asc"===H?"desc":"asc");this.sortUpdate({property:F,ascending:"asc"===H})};A.prototype.sortUpdate=function(F){var H=this,I=this.domNode.querySelector(".js-table-rows"),L=this.noneField,J=this.getUIDField(),O=this.updateExistingFeatures.checked,P=this.getSelectedDataLayer(),fa=(P.fields||[this.noneField]).sort(function(ma,ha){return ma.name.localeCompare(ha.name)}),V=this.layerFields,ba={esriFieldTypeOID:1,esriFieldTypeGlobalID:1},ka={portal:this.portal,template:D["default"],dataLayerFields:fa,
addressFields:P.addressFields};this.currentSort=F=F||this.currentSort;(null===fa||void 0===fa?0:fa.length)&&"__none"!==fa[0].value&&fa.unshift(L);var la=F.ascending?"is-ascending":"is-descending";b["default"].querySelectorAllAsArray(".js-table-sort-header",this.domNode).forEach(function(ma){ma.classList.remove("is-descending");ma.classList.remove("is-ascending");ma.setAttribute("aria-sort","none")});b["default"].querySelectorAllAsArray(".js-table-sort-header[data-sort\x3d'"+F.property+"']",this.domNode).forEach(function(ma){ma.classList.add(la);
ma.setAttribute("aria-sort",F.ascending?"ascending":"descending");ma.dataset.sortOrder=F.ascending?"asc":"desc"});this.sortTitle("matchField"===F.property?this.matchFields||[]:this.layerFields||[],F);this.sortHandlers.forEach(function(ma){ma.remove()});this.sortHandlers=[];b["default"].querySelectorAllAsArray(".js-table-sort-header",this.domNode).forEach(function(ma){H.sortHandlers.push(d["default"](ma,"click",H.sortHeader.bind(H)))});this.dijits.forEach(function(ma){ma.destroy()});this.dijits=[];
V.forEach(function(ma){ma.type in ba||!ma.editable||O&&ma.name===J.name||(ma=new t["default"](w.__assign(w.__assign({},ka),{field:ma})),ma.startup(),ma.placeAt(I),H.dijits.push(ma))})};A.prototype.sortTitle=function(F,H){return null===F||void 0===F?void 0:F.sort(function(I,L){return H.ascending?I.name.localeCompare(L.name):L.name.localeCompare(I.name)})};A.prototype.showStep1=function(){var F=this,H=new u["default"],I=this.okBtn;this.fillSupportedTypes().then(function(){b["default"].hideNode(F.step2);
b["default"].showNode(F.step1);F.isStep1=!0;null===I||void 0===I?void 0:I.set("label",B["default"].appendDataDlg.uploadBtn);F.set("readOnly",!1);H.resolve(!0)});return H};A.prototype.showStep2=function(){var F=this,H=new u["default"];x["default"]({serviceLayers:this.fillServiceLayers(this.serviceLayers),dataLayers:this.fillDataLayers(this.dataLayers)}).then(function(){var I=F.getSelectedDataLayer(),L=F.getSelectedServiceLayer();F.updateFields(L,I).then(function(){H.resolve(!0)})});return H};A.prototype.updateFields=
function(F,H){var I=this,L=new u["default"],J=this.okBtn,O="fileGeodatabase"===(this.analyzeResults&&this.analyzeResults.publishParameters||{}).type,P=this.selectedFile||this.uploadedItem&&this.uploadedItem.title||this.sourceTitle||"",fa=this.syncEnabled||this.changeTrackingEnabled,V=H&&H.geometryType,ba=F&&F.geometryType,ka=ba?!0:!1,la,ma,ha;x["default"]({serviceLayerFields:this.fillServiceLayerFields(F,H),dataLayerFields:this.fillDataLayerFields(F,H),fieldMatching:this.fillFieldMatching(F,H)}).then(function(){b["default"].hideNode(I.step1);
b["default"].showNode(I.step2);if(fa){if(ba!==V&&ba&&("esriGeometryPoint"!==ba||O||V)){I.showError({message:B["default"].appendDataDlg.noMatchingSelectedLayerType});return}la=!0}else ba===V?la=ma=ha=!0:ba&&("esriGeometryPoint"!==ba||O||V)?ha=!0:la=ma=ha=!0;I.domNode.querySelector(".js-updateFeatures-container").classList.add("hide");b["default"].showHideAll(b["default"].querySelectorAllAsArray(".js-updateGeometry",I.domNode),ka);I.updateExistingFeatures.checked=ma||ha||!1;!ma&&la?b["default"].querySelectorAllAsArray(".js-updateFeatures, .js_attributesOnly",
I.domNode).forEach(function(Z){Z.classList.add("disabled")}):(b["default"].querySelectorAllAsArray(".js-updateFeatures",I.domNode).forEach(function(Z){Z.classList.remove("disabled")}),b["default"].querySelectorAllAsArray(".js-attributesOnly",I.domNode).forEach(function(Z){Z.classList[!ma&&ha?"add":"remove"]("disabled")}));I.updateExistingFeaturesChange();I.updateGeometry.checked=!1;I.skipInserts.checked=!la&&(ma||ha)||!1;I.toField.value="__none";I.isStep1=!1;I.appendDataLabel.innerHTML=B["default"].appendDataDlg.chooseLayer.replace("${fileName}",
P);null===J||void 0===J?void 0:J.set("label",B["default"].appendDataDlg.applyUpdatesBtn);I.set("readOnly",!1);L.resolve(!0)});return L};A.prototype.updateLayerDataUpdatedDate=function(){var F=this.item,H=this._layerInfo,I=(new Date).getTime();H&&(H.editingInfo=H.editingInfo||{},H.editingInfo.lastEditDate=I,F.layers&&(F=F.layers[H.id],F.editingInfo=F.editingInfo||{},F.editingInfo.lastEditDate=I))};A.prototype.done=function(){var F=this;this.deleteItem().then(function(){F.updateLayerDataUpdatedDate();
g["default"].publish("append/done",{type:"success"});F.set("readOnly",!1);g["default"].publish("alert/show",{type:"success",text:B["default"].appendDataDlg.updateSuccess});F.hide()})};A.prototype.showFieldMatching=function(F){F="true"===this.showFieldMatchingLink.dataset.value;this.showFieldMatchingLink.dataset.value=F?"false":"true";this.showFieldMatchingLink.innerHTML=F?B["default"].appendDataDlg.showFieldMatching:B["default"].appendDataDlg.hideFieldMatching;b["default"].showHide(this.fieldMatching,
!F)};A.prototype.updateExistingFeaturesChange=function(F){var H=this.updateExistingFeatures.checked?"remove":"add";b["default"].querySelectorAllAsArray(".js-updateFeatures-container",this.domNode).forEach(function(I){I.classList[H]("hide")});this.sortUpdate()};A.prototype.onFileChange=function(F){F=this.fileInput.files[0];F=(null===F||void 0===F?void 0:F.name)||"";var H=F.split(".").pop(),I=(new RegExp(this.supportedFilesRegEx,"i")).test(F),L="zip"===(null===H||void 0===H?void 0:H.toLowerCase());
this.selectedSourceType=this.findSupportedType(L?"shapefile":H);this.selectedFile=F;b["default"].showHide(this.zipSelect,I&&L&&!this.portal.isPortal);this.okBtn.set("disabled",!I)};A.prototype.onFromFieldChange=function(F){F=(null===F||void 0===F?void 0:F.target)||{};var H=F.options[F.selectedIndex],I=this.getSelectedDataLayer(),L=this.getSelectedServiceLayer();H={name:H.dataset.value,type:H.dataset.type};var J=this.findField(H,this.layerFields),O=this.findField({name:F.dataset.prevValue,type:F.dataset.prevType},
this.layerFields);this.uidField=H;J.type!==O.type&&this.fillDataLayerFields(L,I);"__none"===J.value&&(this.toField.value="__none");F.dataset.prevValue=F.value;F.dataset.prevType=F.type;this.sortUpdate()};A.prototype.onToFieldChange=function(F){F=(null===F||void 0===F?void 0:F.target)||{};F=F.options[F.selectedIndex];F=this.findField({name:F.dataset.value,type:F.dataset.type},this.layerFields);g["default"].publish("appendData/fieldChanged",F)};A.prototype.onServiceLayerChange=function(){this.showStep2()};
A.prototype.onDataLayerChange=function(){var F=this.getSelectedDataLayer(),H=this.getSelectedServiceLayer();this.updateFields(H,F)};A.prototype.render=function(){var F=new u["default"];x["default"]([this.showStep1()]).then(function(){F.resolve(!0)});return F};A.prototype.showLoader=function(F){var H=this.domNode.querySelector(".analyze-loader-wrap .loader");b["default"].showNode(this.domNode.querySelector(".analyze-loader-wrap"));b["default"].activateNode(H);if(H=H.querySelector(".loader-text"))H.innerHTML=
F};A.prototype.hideLoader=function(){b["default"].hideNode(this.domNode.querySelector(".analyze-loader-wrap"));b["default"].deactivateNode(this.domNode.querySelector(".analyze-loader-wrap .loader"))};A.prototype.clearSelect=function(F){if(null===F||void 0===F?0:F.options)for(var H=F.options.length-1;0<=H;H--)F.remove(H)};A.prototype.fillSupportedTypes=function(){var F=this,H=new u["default"],I;this.supportedItemTypes.forEach(function(L){L.innerHTML&&(I=document.createElement("option"),I.dataset.value=
L.value,I.dataset.validate=L.regex||"",I.dataset.fileType=L.fileType,I.dataset.appendUploadFormat=L.appendUploadFormat,I.value=L.value,I.innerHTML=L.innerHTML,F.supportedTypes.add(I))});H.resolve(!0);return H};A.prototype.fillServiceLayers=function(F){var H=this,I,L,J;F=new u["default"];if(null===(L=null===(I=this.serviceLayersSelect)||void 0===I?void 0:I.options)||void 0===L?0:L.length)F.resolve(this.serviceLayers);else{I=this.serviceLayers||[];var O;this.clearSelect(this.serviceLayersSelect);(null===
I||void 0===I?0:I.length)&&I.forEach(function(P){O=document.createElement("option");O.dataset.value=P.id;O.value=P.id;O.innerHTML=P.name;H.serviceLayersSelect.add(O)});b["default"].showHide(this.serviceLayersContainer,1<(null===(J=this.layers)||void 0===J?void 0:J.length));F.resolve(I)}return F};A.prototype.fillDataLayers=function(F){var H=this,I,L=new u["default"];F=F||this.dataLayers||[];this.clearSelect(this.dataLayersSelect);F.forEach(function(O){var P=""+(y["default"].isDefined(O.excelSheetId)?
parseInt(O.excelSheetId,10):parseInt(O.id,10)),fa=document.createElement("option");fa.dataset.value=P;fa.value=P;fa.innerHTML=O.name;H.dataLayersSelect.add(fa)});if(this.dataLayersSelect.options&&!this.dataLayersSelect.options.length){var J=document.createElement("option");J.dataset.value=this.noneField.value;J.value=this.noneField.value;J.innerHTML=this.noneField.name;this.dataLayersSelect.add(J)}b["default"].showHide(this.dataLayersContainer,1<(null===(I=this.analyzeResultLayers)||void 0===I?void 0:
I.length));this.dataLayers=F;L.resolve(F);return L};A.prototype.fillServiceLayerFields=function(F,H){var I=this,L=new u["default"],J=this.noneField,O=a["default"](F.indexes||[]),P=this.getUIDField(F),fa={esriFieldTypeOID:1,esriFieldTypeGlobalID:1},V=a["default"](F.fields||[]),ba;this.clearSelect(this.fromField);O.filter(function(ka){return null===ka||void 0===ka?void 0:ka.isUnique}).forEach(function(ka){var la;ba=(null===(la=ka.fields)||void 0===la?void 0:la.split(","))||[];ba.forEach(function(ma){V.some(function(ha){return ha.name.toLowerCase()===
ma.toLowerCase()?ha.isUniqueIndex=!0:!1})})});"Table"===F.type||!this.selectedSourceType||"excel"!==this.selectedSourceType.fileType&&"csv"!==this.selectedSourceType.fileType||((O=this.findField(this.longitudeField,V))&&"__none"!==O.value||V.push(a["default"](this.longitudeField)),(O=this.findField(this.latitudeField,V))&&"__none"!==O.value||V.push(a["default"](this.latitudeField)));this.layerFields=a["default"](V||[]);V=V.filter(function(ka){return ka.type&&ka.type in fa||ka.isUniqueIndex}).sort(function(ka,
la){return ka.name.localeCompare(la.name)});V.unshift(J);V.forEach(function(ka){var la=document.createElement("option");la.dataset.value=ka.value||ka.name||null;la.dataset.type=ka.type||null;la.value=ka.value||ka.name||null;la.innerHTML=ka.displayName||ka.name;I.fromField.add(la)});this.fromField.value=(null===P||void 0===P?void 0:P.value)||"__none";this.fromField.dataset.type=(null===P||void 0===P?void 0:P.value)||"__none";this.fromField.dataset.prevValue=this.fromField.value;this.fromField.dataset.prevType=
this.fromField.type;L.resolve(V);return L};A.prototype.fillDataLayerFields=function(F,H){var I=this,L,J=new u["default"],O=this.noneField,P=H&&H.fields?a["default"](H.fields):[],fa=this.getUIDField(F);P=this.filterAllowedFields(P,fa).sort(function(V,ba){return V.name.localeCompare(ba.name)});fa=this.findField(fa,P);this.clearSelect(this.toField);(null===P||void 0===P?0:P.length)&&"__none"!==P[0].value?P.unshift(O):P=[O];P.forEach(function(V){var ba=document.createElement("option");ba.dataset.value=
V.value||V.name||null;ba.dataset.type=V.type||null;ba.value=V.value||V.name||null;ba.innerHTML=V.displayName||V.name;I.toField.add(ba)});this.toField.value="__none"!==(null===fa||void 0===fa?void 0:fa.value)?fa.name||"__none":"__none";this.toField.disabled="__none"===this.fromField.value||2>(null===(L=this.toField.options)||void 0===L?void 0:L.length);J.resolve(P);return J};A.prototype.filterAllowedFields=function(F,H){var I=F.filter(function(L){return m["default"](H,L)});return(null===I||void 0===
I?0:I.length)?I:[]};A.prototype.fillFieldMatching=function(F,H){var I=new u["default"];this.sortUpdate({property:"title",ascending:!0});I.resolve(!0);return I};A.prototype.addLayerInfo=function(F){var H=new u["default"],I=(null===F||void 0===F?0:F.publishParameters)?a["default"](F.publishParameters):{};F=(I.layers||[I.layerInfo]).map(function(L){var J=L.locationType||I.locationType||null;L.geometryType=L.geometryType||("coordinates"===J?"esriGeometryPoint":null)||null;L.addressFields=L.addressFields||
I.addressFields||("coordinates"===J?{longitudeFieldName:L.longitudeFieldName||I.longitudeFieldName,latitudeFieldName:L.latitudeFieldName||I.latitudeFieldName}:{});return L});H.resolve(F);return H};A.prototype.validateLayers=function(F){var H=new u["default"],I="fileGeodatabase"===(this.analyzeResults&&this.analyzeResults.publishParameters||{}).type,L=this.syncEnabled||this.changeTrackingEnabled?this.layers.filter(function(J){return F.some(function(O){return O.geometryType===J.geometryType||!J.geometryType||
"esriGeometryPoint"===J.geometryType&&!I&&!O.geometryType})}):this.layers;L&&L.length?(this.analyzeResultLayers=a["default"](F),this.dataLayers=a["default"](F),this.serviceLayers=a["default"](L),H.resolve(this.analyzeResults)):H.reject({message:B["default"].appendDataDlg.noMatchingLayerType});return H};A.prototype.getUIDField=function(F){var H=this.uidField||null;if(!H){var I=F.globalIdField;F=(F.fields||[]).filter(function(L){return L.name===I});H=this.uidField=(null===F||void 0===F?0:F.length)?
F.shift():this.noneField}return H};A.prototype.findField=function(F,H){var I=(H||[]).filter(function(L){return L.type===F.type&&L.name.toLowerCase()===F.name.toLowerCase()});return(null===I||void 0===I?0:I.length)?I.shift():this.noneField};A.prototype.findLocationField=function(F){var H=this.dijits.map(function(I){return I.field}).filter(function(I){return I.name.toLowerCase()===F.toLowerCase()&&I.matchField});return(null===H||void 0===H?0:H.length)?H.shift().matchField:null};A.prototype.findLayer=
function(F,H){return r["default"].findLayer(F,H||[])};A.prototype.findSupportedType=function(F){var H=(this.supportedItemTypes||[]).filter(function(I){return I.fileType===F||I.extension.toLowerCase()===F.toLowerCase()});return(null===H||void 0===H?0:H.length)?H.shift():null};A.prototype.uploadData=function(F){var H=this,I;F=F||new u["default"];var L=null===(I=this.item)||void 0===I?void 0:I.owner;I=this.getFormData();var J={owner:L,folderId:void 0,fileName:this.sourceTitle,fileType:this.selectedSourceType.value};
this._setReadOnlyAttr(!0,B["default"].appendDataDlg.uploadProgress);this.uploadProgressBar.reset();this.uploadProgressBar.show();l["default"].addItem(J,I,this.fileInput.files[0]).then(function(O){H.uploadProgressBar.hide();if(O&&O.success){var P={title:J.fileName,type:J.fileType,folderId:""};H.uploadedItem=w.__assign(w.__assign(w.__assign({},O),P),{title:H.sourceTitle});O.isMultipart?(O.statusUrl=l["default"]._getActionItemUrl(J,"status"),H._setReadOnlyAttr(!0,B["default"].addItemFrm.checkingStatus),
H.checkStatus(O).then(function(){H.set("readOnly",!1);F.resolve(O)})):F.resolve(O)}else F.reject(O)},function(O){H.uploadProgressBar.hide();O&&409!==O.code?H.showError(O):H.deleteExistingTempItem(H.sourceTitle).then(function(){H.uploadData(F)},function(P){H.showError(O)})});return F};A.prototype.analyze=function(F){var H=this,I=new u["default"];F=w.__assign({fileType:this.selectedSourceType.fileType},F);this._setReadOnlyAttr(!0,B["default"].appendDataDlg.analyzeProgress);k["default"].analyzeItem(F,
{enableGlobalGeocoding:!1},this.portal).then(function(L){H.analyzeResults=L;I.resolve(L)},function(L){I.reject(L)});return I};A.prototype.appendDataLayer=function(){var F,H=new u["default"],I=this.getSelectedServiceLayer(),L=this.analyzeResults||{},J=(null===(F=L.publishParameters)||void 0===F?void 0:F.locationType)||"none";F=this.serviceUrl+"/"+I.id+"/append";var O=this.getAppendParams(),P=this.findLocationField("longitude")||{},fa=this.findLocationField("latitude")||{},V=this.updateExistingFeatures.checked;
if(V&&("__none"===this.fromField.value||"__none"===this.toField.value))return H.reject({message:B["default"].appendDataDlg.noUIDFieldMapping}),H;if(!(!L.publishParameters||"csv"!==L.publishParameters.type&&"excel"!==L.publishParameters.type||"esriGeometryPoint"!==I.geometryType||"none"!==J&&"address"!==J||V&&!O.updateGeometry||"__none"!==P.value&&"__none"!==fa.value))return H.reject({message:B["default"].appendDataDlg.noLocationFields}),H;O.fieldMappings?(this._setReadOnlyAttr(!0,B["default"].appendDataDlg.applyProgress),
q["default"].request({url:F,content:O},{usePost:!0}).then(this.checkStatus.bind(this),function(ba){H.reject(ba)}).then(function(ba){H.resolve(ba)})):H.reject({message:B["default"].appendDataDlg.noMatchingFields});return H};A.prototype.checkStatus=function(F,H,I){var L=this,J=null===F||void 0===F?void 0:F.statusUrl,O=I||new u["default"],P=H||500;q["default"].request({url:J}).then(function(fa){var V,ba;fa=fa||{status:"completed"};"completed"===(null===(V=fa.status)||void 0===V?void 0:V.toLowerCase())?
O.resolve(!0):"failed"===(null===(ba=fa.status)||void 0===ba?void 0:ba.toLowerCase())||400<fa.code||""===fa.status?L.showError(fa):(P=(P||500)+250,setTimeout(function(){L.checkStatus(F,P,O)},H))},function(fa){L.showError(fa)});return O};A.prototype.deleteItem=function(){var F=this,H,I=new u["default"],L=null===(H=this.item)||void 0===H?void 0:H.itemOwner;this.uploadedItem?L.deleteItems([this.uploadedItem]).then(function(){F.uploadedItem=null;I.resolve(!0)},function(){F.uploadedItem=null;I.resolve(!0)}):
I.resolve(!0);return I};A.prototype.deleteExistingTempItem=function(F){var H,I=new u["default"],L=null===(H=this.item)||void 0===H?void 0:H.itemOwner;this.portal.queryItems("title:"+F).then(function(J){var O;(null===(O=null===J||void 0===J?void 0:J.items)||void 0===O?0:O.length)?L.deleteItems([J.items.shift()]).then(function(){I.resolve(!0)},function(){I.resolve(!0)}):I.resolve(!1)});return I};A.prototype.showError=function(F){var H=this,I=w.__assign(w.__assign({},B["default"].publishWizard.errors.error),
F);F=F&&(F.statusMessage||F.message||"");-1<F.indexOf("Invalid Shapefile")?I.message=y["default"].substitute({name:this.origFilename},this.i18n.addItemFrm.errors.invalidShapefile.message):-1<F.indexOf("Invalid File Geodatabase")?I.message=y["default"].substitute({name:this.origFilename},this.i18n.addItemFrm.errors.invalidFileGeodatabase.message):-1<F.indexOf("Object reference not set to")?I.message=y["default"].substitute({name:this.origFilename},this.i18n.appendDataDlg.error):-1<F.indexOf("Duplicate field names are not allowed")?
I.message=this.i18n.common.errors.duplicateFields:-1<F.indexOf("Must specify data to be analyzed")&&(I.message=this.i18n.appendDataDlg.specifyData);this.errorDlg=new n["default"]({showCancel:!1,style:{width:"400px",height:"auto"}});this.errorDlg.show(I).then(function(){H.set("readOnly",!1);H.errorDlg.hide()});return!1};return A=w.__decorate([E["default"](e["default"],h["default"])],A)}()})},"arcgisonline/sharing/dijit/AppendData/FieldTableRow":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/utils/formatters ./_canMatchFields ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/topic dojo/Deferred dojo/promise/all dojo/text!./templates/_table-row.html dojo/i18n!../../../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);return function(){function l(h,e){this.i18n=k["default"];this.noneField={value:"__none",name:k["default"].appendDataDlg.none}}l.prototype.postMixInProperties=function(){var h=this;this.inherited(arguments);
Object.keys(r["default"]).forEach(function(e){h[e]=r["default"][e]});this.portal=this.portal||(null===v["default"]||void 0===v["default"]?void 0:v["default"].self)||{};this.portalUser=this.portalUser||this.user||this.portal.portalUser||{};this.templateString=this.template||n["default"];this.displayName=this.field.displayName||this.field.name};l.prototype.postCreate=function(){var h=this,e;this.inherited(arguments);null===(e=this.cssClasses)||void 0===e?void 0:e.forEach(function(d){h.domNode.classList.add(d)})};
l.prototype.startup=function(){this.inherited(arguments);this.render().then(this.addEventListeners.bind(this)).then(function(){})};l.prototype.setValue=function(h){h=(null===h||void 0===h?void 0:h.matchField)||h||{name:k["default"].appendDataDlg.none,value:"__none"};this.matchFields.value=h.value;this.field.matchField=h;this.matchFieldValue.innerHTML=h.displayName||h.name;this.matchFieldValue.dataset.value=h.value||h.name;this.matchFieldValue.dataset.type=h.type};l.prototype.render=function(){var h=
this,e=new t["default"];m["default"]([this.createMatchFieldOptions()]).then(function(){var d,g=(null===(d=h.field)||void 0===d?void 0:d.matchField)||h.field;d=g?h.findField(g,h.dataLayerFields):null;h.setValue(d);e.resolve(!0)});return e};l.prototype.addEventListeners=function(){var h=this,e=new t["default"];this.own(p["default"](this.matchFields,"blur",function(d){h.field.value=h.editEnd({evt:d})}),p["default"](this.matchFieldsContainer,"click",function(d){h.editStart({evt:d})}),q["default"].subscribe("appendData/fieldChanged",
function(d){var g,u;"__none"!==d.value&&(null===(u=null===(g=h.field)||void 0===g?void 0:g.matchField)||void 0===u?void 0:u.name)===d.name&&h.setValue()}));e.resolve();return e};l.prototype.editStart=function(h){h=h.evt.target;var e=h.parentElement.querySelector("select"),d=h.dataset.value;d&&"SPAN"===(null===h||void 0===h?void 0:h.tagName)&&(h.classList.add("hide"),e.classList.remove("hide"),e.value=d,e.focus())};l.prototype.editEnd=function(h){h=h.evt.target;var e=h.parentElement.querySelector("span"),
d=h.options[h.selectedIndex].dataset.value,g=this.findField({type:h.options[h.selectedIndex].dataset.type,name:d},this.dataLayerFields);q["default"].publish("appendData/fieldChanged",g);this.setValue(g);h.classList.add("hide");e.classList.remove("hide");return d};l.prototype.findField=function(h,e){var d=this,g=(e||[]).filter(function(u){return h.name.toLowerCase()===u.name.toLowerCase()&&(u.type===h.type||d.findAddressField(u.displayName||u.name))});return(null===g||void 0===g?0:g.length)?g.shift():
this.noneField};l.prototype.findAddressField=function(h){var e=this.addressFields||{},d=Object.keys(e).filter(function(g){return e[g]===h});return(null===d||void 0===d?0:d.length)?d.shift():null};l.prototype.createMatchFieldOptions=function(){var h=this,e=new t["default"];(this.dataLayerFields||[]).forEach(function(d){if("__none"===d.value||f["default"](h.field,d)){var g=document.createElement("option");g.dataset.value=d.value||d.name;g.dataset.type=d.type||null;g.value=d.value||d.name;g.innerHTML=
d.displayName||d.name;h.matchFields.add(g)}});e.resolve(!0);return e};return l=w.__decorate([c["default"](a["default"],b["default"])],l)}()})},"arcgisonline/sharing/dijit/AppendData/_canMatchFields":function(){define(["require","exports"],function(K,G){Object.defineProperty(G,"__esModule",{value:!0});G["default"]=function(w,v){var r,f=(null===w||void 0===w?void 0:w.type)||null,c=(null===v||void 0===v?void 0:v.type)||null,a={esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger"],esriFieldTypeInteger:["esriFieldTypeInteger",
"esriFieldTypeSmallInteger"],esriFieldTypeSingle:["esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:"esriFieldTypeString esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeDate esriFieldTypeGUID".split(" "),esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeOID:["esriFieldTypeOID",
"esriFieldTypeSmallInteger","esriFieldTypeInteger"],esriFieldTypeGlobalID:["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"]};return c&&(c===f||-1<(null===(r=a[f])||void 0===r?void 0:r.indexOf(c)))}})},"arcgisonline/pages/dijit/ReplaceLayer/ReplaceLayer":function(){define("require exports tslib dojo/text!../ReplaceLayer/templates/ReplaceLayer.html dojo/text!../../../img/Archive_no-text.svg dojo/text!../../../img/Replace_no-text.svg dojo/i18n!../../../nls/arcgisonline dojo/string dojo/dom-attr dojo/dom-construct dojo/query arcgisonline/pages/dijit/Overlay ../../utils/dom ../../utils/icons ../../serviceUtil arcgis-components/wrappers/ItemBrowser ../../portal/Portal esri/request arcgisonline/tsutils/declareDecorator arcgisonline/esriGeowConfig arcgisonline/map/core/sameSpatialReference arcgisonline/map/core/sameTilingScheme arcgisonline/map/layer/getServiceInfo ../../portal/PortalItem ../../../sharing/util ../../utils/alerts dojo/Deferred".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);
B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);return function(){function E(A,F){this.title=c["default"].replaceLayer.replaceLayer;this.i18n=c["default"];this.icons=n["default"];this.overlayContents=a["default"].substitute(v["default"],{i18n:this.i18n,icons:this.icons});this._showPreviewStylesTab=!0;this._replaceItemInformation=!1;this.isVectorTile=!0;this._currentStep=1;this.cacheTypeKeywords=""}E.prototype.postCreate=function(){var A=this,F;this.inherited(arguments);
this.type=this.item.type;this.isTile=this.item.types.includes("is-tile");this.isVectorTile=this.item.types.includes("is-vectorTile");(this.isCacheContent=this.item.typeKeywords.includes("ExtractedCache"))&&(this.isTile||this.isVectorTile)&&(this.cacheTypeKeywords=' AND typekeywords:("ExtractedCache" AND "Tiled" AND "'+(this.isTile?"Map Service":"Vector Tile Service")+'")');this._itemBrowserConfig={settings:{config:{layoutMode:"adjustable",dialogTitle:c["default"].replaceLayer.selectReplacementLayer,
mainActionTitle:c["default"].replaceLayer.select,usePrimaryButtonStyle:!1,enableMapAreaFilter:!1,onSelect:this.handleSelectItem.bind(this),baseSections:["myContent","myFavorites","myGroups","myOrganization"],allowedItemTypes:[this.type],singleItemSelect:!0,onBack:this.closeItemBrowser.bind(this),addQueryParameters:function(){return(A.isCacheContent?"-":"")+'typekeywords:"Hosted Service"'+A.cacheTypeKeywords+" NOT id:"+A.item.id},showSubResources:{}}},parameters:{section:"myContent",sort:{field:"modified",
order:"desc"}}};this.telemetry=null===(F=this.page)||void 0===F?void 0:F.telemetry;this._stepperNextButton=this.domNode.querySelector(".js-stepper-next-btn");this._overlayHelpButton=this.domNode.querySelector(".overlay-help");this._stepperLinks=this.domNode.querySelectorAll(".js-step-link");this._selectLayerButton=this.domNode.querySelector(".js-replace-layer-select");this._changeLayerButton=this.domNode.querySelector(".js-replace-lyr-change-lyr");this._archiveInputContainer=this.domNode.querySelector(".js-replace-lyr-edit-container");
this._currentArchiveName=this.domNode.querySelector(".js-replace-lyr-current-arch-name");this._archiveInputName=this.domNode.querySelector(".js-replace-lyr-edit-name");this._archiveInputSave=this.domNode.querySelector(".js-replace-lyr-edit-save");this._archiveInputEdit=this.domNode.querySelector(".js-replace-lyr-current-arch-btn");this._nameInputError=this.domNode.querySelector(".js-replace-name-input-error");this._nameAvailableError=this.domNode.querySelector(".js-replace-name-available-error");
this._itemInformationSwitch=this.domNode.querySelector(".js-replace-lyr-replace-item-switch");this._changeLayerSummaryButton=this.domNode.querySelector(".js-replace-lyr-change-lyr-summary");this._changeLayerOptionButton=this.domNode.querySelector(".js-replace-lyr-change-option");this._availabilityNotice=this.domNode.querySelector(".js-replace-lyr-availabilty-notice");this._closeAvailabilityNotice=this.domNode.querySelector(".js-replace-lyr-availabilty-notice-close");this._radioOptions=q["default"]("input[name\x3djs-replace-lyr-archive-option-radio]",
this.domNode);this._archiveSvg=this.domNode.querySelector(".js-archive_svg");this._replaceSvg=this.domNode.querySelector(".js-replace_svg");this._shownPreviewStylesContent=this.domNode.querySelectorAll(".js-replace-lyr-show-preview-step");this._selectedLayerTitle=this.domNode.querySelectorAll(".js-replace-lyr-selected-lyr-name");this._selectedLayerOwner=this.domNode.querySelectorAll(".js-replace-lyr-selected-owner");this._selectedLayerIcon=this.domNode.querySelectorAll(".js-replace-lyr-selected-icon");
this._selectedLayerType=this.domNode.querySelectorAll(".js-replace-lyr-selected-type");this._currentLayerTitle=this.domNode.querySelector(".js-replace-lyr-current-lyr-name");this._currentLayerOwner=this.domNode.querySelector(".js-replace-lyr-current-owner");this._currentLayerIcon=this.domNode.querySelector(".js-replace-lyr-current-icon");this._currentLayerType=this.domNode.querySelector(".js-replace-lyr-current-type");this._preSelectContainer=this.domNode.querySelector(".pre-select");this._postSelectContainer=
this.domNode.querySelector(".post-select");this._checkStyles=this.domNode.querySelector(".js-replace-lyr-check-styles");this._checkStylesSuccess=this.domNode.querySelector(".js-replace-lyr-check-styles-success");this._checkStylesWarnings=this.domNode.querySelectorAll(".js-replace-lyr-check-styles-warning");this._selectedLayerContainer=this.domNode.querySelector(".js-replace-lyr-selected-layer");this._replaceLayerErrorMessage=this.domNode.querySelector(".js-replace-lyr-error");this._replaceLayerPreviewContainer=
this.domNode.querySelector(".js-replace-lyr-preview-container");this._styleDropdown=this.domNode.querySelector(".js-replace-lyr-style-layer-dropdown");this._replaceSingleStyle=this.domNode.querySelector(".js-replace-lyr-single-style");this._replaceMultipleStyles=this.domNode.querySelector(".js-replace-lyr-multiple-styles");this._replaceSingleStyleLabel=this.domNode.querySelector(".js-replace-lyr-style-layer");this._archiveOptionLayerName=this.domNode.querySelector(".js-replace-lyr-new-layer-name");
this._replaceItemInformationLabel=this.domNode.querySelector(".js-replace-lyr-replace-item-information");this._replaceOptionArchiveLabel=this.domNode.querySelector(".js-replace-lyr-archive-option");this._replaceOptionReplacementLabel=this.domNode.querySelector(".js-replace-lyr-replace-option")};E.prototype.addListeners=function(){var A=this;this._stepperNextButton.addEventListener("click",this.handlePrimary.bind(this),!1);this._overlayHelpButton.addEventListener("click",this.handleHelp.bind(this),
!1);for(var F=0;F<this._stepperLinks.length;F++)this._stepperLinks[F].addEventListener("click",this.onStepClick.bind(this));this._radioOptions.on("change",this.onOptionSelect.bind(this));this._selectLayerButton.addEventListener("click",this.openItemBrowser.bind(this));this._changeLayerButton.addEventListener("click",this.openItemBrowser.bind(this));this._archiveInputName.addEventListener("input",this.handleArchiveInput.bind(this));this._archiveInputSave.addEventListener("click",this.handleArchiveSave.bind(this));
this._archiveInputEdit.addEventListener("click",this.handleArchiveEdit.bind(this));this._itemInformationSwitch.addEventListener("click",this.handleReplaceItemInformationSwitch.bind(this));this._changeLayerSummaryButton.addEventListener("click",this.handleChangeLayerSummaryClick.bind(this));this._changeLayerOptionButton.addEventListener("click",this.handleChangeOptionSummaryClick.bind(this));this._closeAvailabilityNotice.addEventListener("click",this.handleCloseNotice.bind(this));this._styleDropdown.addEventListener("change",
this.handleLayerDropdownChange.bind(this));this._overlay.addEventListener("transitionend",function(H){"transform"===H.propertyName&&A._selectLayerButton.focus()})};E.prototype.open=function(){this.domNode.classList.add("overlay-stepper");p["default"].place(this.domNode.querySelector(".js-stepper-headers"),this._overlayContentWrapper,"before");p["default"].place(this.domNode.querySelector(".js-step-bars"),this.domNode.querySelector(".js-stepper-headers"),"after");document.body.classList.add("stepper--open");
this.initUI();this.inherited(arguments)};E.prototype.close=function(){this.inherited(arguments);this._itemBrowserContainer&&this._itemBrowserContainer.parentNode.removeChild(this._itemBrowserContainer);document.body.classList.remove("stepper--open")};E.prototype.initUI=function(){for(var A=this,F,H,I=1;4>=I;I++)this["_step"+I]=this.domNode.querySelector(".js-step-"+I),this["_stepHeader"+I]=this.domNode.querySelector(".js-step-header-"+I),this["_stepBar"+I]=this.domNode.querySelector(".js-step-"+I+
"-bar");this._selectedOption=this.getSelectedOption();this._archiveName=this.generateArchiveName();this._currentArchiveName.textContent=this._archiveName;this._archiveInputName.value=this._archiveName;this.setPrimaryBtnText(c["default"].organizationInvite.step1Create.nextBtn);this._archiveSvg&&(this._archiveSvg.innerHTML=a["default"].substitute(r["default"],{i18n:c["default"]}));this._replaceSvg&&(this._replaceSvg.innerHTML=a["default"].substitute(f["default"],{i18n:c["default"]}));m["default"].showNode(this._overlayHelpButton);
g["default"].self.isPortal||m["default"].showNode(this._availabilityNotice);this._relatedStyles=this.item.relatedItems.Service2Style_forward;if(!(0<(null===(F=this._relatedStyles)||void 0===F?void 0:F.length)))this._showPreviewStylesTab=!1,m["default"].hideNodes(this._shownPreviewStylesContent);else if(null===(H=this._relatedStyles)||void 0===H?0:H[0])this._selectedBaseStyle=this._relatedStyles[0],k["default"].checkForResources(this._selectedBaseStyle).then(function(L){A._selectedBaseStyle.hasResources=
L});this.item.serviceInfo||y["default"](this.item.url,null,function(L){A.item.serviceInfo=L});this.createItemBrowser();this.addListeners();this.goToStep(1)};E.prototype.generateArchiveName=function(){function A(O){return 2>String(O).length?"0"+O:O}var F=new Date,H=F.getFullYear(),I=A(F.getMonth()+1),L=A(F.getDate()),J=A(F.getHours());F=A(F.getMinutes());return this.item.title+"_"+(H+"_"+I+"_"+L+"_"+J+"_"+F)};E.prototype.replaceSpacesWithUnderscore=function(A){return A.replace(/\s/g,"_")};E.prototype.createItemBrowser=
function(){var A=this;this._itemBrowserContainer||(this._itemBrowserContainer=document.createElement("div"),m["default"].hideNode(this._itemBrowserContainer),document.body.appendChild(this._itemBrowserContainer),this.portal=new h["default"](g["default"].restBaseUrl),this.portal.signIn().then(function(){A._itemBrowser=new l.ItemBrowserWrapper(A._itemBrowserContainer,{apiVersion:3,portal:A.portal,request:e["default"],initialState:A._itemBrowserConfig})}))};E.prototype.openItemBrowser=function(){var A=
this;this._itemBrowserContainer.querySelector(".mod__overlay-container").addEventListener("animationend",function(){A._itemBrowserContainer.querySelector(".mod__overlay__close").focus({preventScroll:!0})});m["default"].isHidden(this._itemBrowserContainer)?m["default"].showNode(this._itemBrowserContainer):this._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.remove("hide")};E.prototype.handleSelectItem=function(A){this._selectedReplacementItem=new B["default"](w.__assign(w.__assign({},
A[0]),{portal:this.portal}));this.initiateCompatibilityCheck();this.closeItemBrowser();for(A=0;A<this._selectedLayerTitle.length;A++)this._selectedLayerTitle[A].innerHTML=this._selectedReplacementItem.title,this._selectedLayerOwner[A].innerHTML=this._selectedReplacementItem.owner,this._selectedLayerOwner[A].href=g["default"].baseUrl+"user.html?user\x3d"+this._selectedReplacementItem.owner,this._selectedLayerIcon[A].src=this._selectedReplacementItem.iconUrl,this._selectedLayerType[A].innerHTML=this.getItemDisplayName(this._selectedReplacementItem)};
E.prototype.initiateCompatibilityCheck=function(){var A=this;this._primaryBtn.disabled=!0;this._preSelectContainer.classList.add("hide");this._postSelectContainer.classList.remove("hide");this._selectedLayerContainer.classList.remove("stepper__content-pane-error");this._replaceLayerErrorMessage.classList.remove("is-active");m["default"].hideNode(this._checkStylesSuccess);m["default"].hideNodes(this._checkStylesWarnings);m["default"].showNode(this._checkStyles);this.item.canUpdate?this.checkLayerCompatibility().then(function(){A.checkForCompatibleStyles(A._selectedReplacementItem)},
function(F){A.handleLayerSelectionError(F)}):(this._selectedLayerContainer.classList.add("stepper__content-pane-error"),this._replaceLayerErrorMessage.innerHTML=c["default"].replaceLayer.error,m["default"].activateNode(this._replaceLayerErrorMessage),m["default"].hideNode(this._checkStylesSuccess),m["default"].hideNode(this._checkStyles))};E.prototype.checkLayerCompatibility=function(){var A=this,F=new D["default"];y["default"](this._selectedReplacementItem.url,null,function(H){-1<A._selectedReplacementItem.url.indexOf("://vectortileservices")?
A._selectedReplacementItem.getRelatedItems(A.isCacheContent?"DataStore2ByRefService":"Service2Service","reverse").then(function(I){var L=c["default"].replaceLayer.error,J=!0,O=u["default"](A.item.serviceInfo.tileInfo.spatialReference,H.tileInfo.spatialReference),P=A.item.serviceInfo.tileInfo.layerType===H.tileInfo.layerType;0<I.map(function(fa){return fa.type}).filter(function(fa){return"Feature Service"===fa}).length?L=c["default"].replaceLayer.tileLayerPackageError:O||P?O?P?J=!1:L=c["default"].replaceLayer.replaceSceneLayer.layerTypeError:
L=c["default"].replaceLayer.differentCoordinateSystem:L=c["default"].replaceLayer.replaceSceneLayer.spatialLayerCombinedError;J?F.reject(Error(L)):F.resolve()}):A._selectedReplacementItem.getRelatedItems("Service2Service","reverse").then(function(I){var L;A.isTile&&"Feature Service"===(null===(L=I[0])||void 0===L?void 0:L.type)&&F.reject(Error(c["default"].replaceLayer.hostedFeatureLayerError));k["default"].checkForResources(A.item).then(function(J){A.item.hasResources=J});k["default"].checkForResources(A._selectedReplacementItem).then(function(J){A._selectedReplacementItem.hasResources=
J});I=x["default"](A.item.serviceInfo.tileInfo,H.tileInfo);u["default"](A.item.serviceInfo.tileInfo.spatialReference,H.tileInfo.spatialReference)&&I?F.resolve():F.reject(Error(c["default"].replaceLayer.differentSchemeCombined))})},function(H){A.handleLayerSelectionError(H)});return F};E.prototype.checkForCompatibleStyles=function(A){var F=this,H=""+A.url+(this.isVectorTile&&!A.url.includes("://vectortileservices")?"/resources/styles/root.json":"");A=""+this.item.url+(this.isVectorTile&&!this.item.url.includes("://vectortileservices")?
"/resources/styles/root.json":"");C["default"].request({url:A,content:{f:"json"}}).then(function(I){F._baseItemJson=I;C["default"].request({url:H,content:{f:"json"}}).then(function(L){F._replacementItemJson=L}).then(function(){var L=F._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.contains("hide");!F.isVectorTile||F.compareLayers(F._baseItemJson.layers,F._replacementItemJson.layers)?(m["default"].showNode(F._checkStylesSuccess),m["default"].hideNodes(F._checkStylesWarnings),
m["default"].hideNode(F._checkStyles)):(m["default"].hideNode(F._checkStylesSuccess),m["default"].showNodes(F._checkStylesWarnings),m["default"].hideNode(F._checkStyles),L&&F._changeLayerButton.focus());F._primaryBtn.disabled=!1;L&&F._primaryBtn.focus()})["catch"](function(L){F.handleLayerSelectionError(L)})})};E.prototype.isWebMercator=function(A){return 0<=[102113,102100,3857,3785].indexOf(A)};E.prototype.handleLayerSelectionError=function(A){var F;this._selectedLayerContainer.classList.add("stepper__content-pane-error");
this._replaceLayerErrorMessage.innerHTML=0<(null===(F=A.message)||void 0===F?void 0:F.length)?A.message:"Error";m["default"].activateNode(this._replaceLayerErrorMessage);m["default"].hideNode(this._checkStylesSuccess);m["default"].hideNode(this._checkStyles);this._changeLayerButton.focus()};E.prototype.compareLayers=function(A,F){var H=this,I=A.map(function(J){return H.isVectorTile?J.id:J.name}).sort(),L=F.map(function(J){return H.isVectorTile?J.id:J.name}).sort();return I.every(function(J){return 0<=
L.indexOf(J)})||L.every(function(J){return 0<=I.indexOf(J)})};E.prototype.closeItemBrowser=function(){this._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.add("hide");m["default"].isHidden(this._postSelectContainer)?this._selectLayerButton.focus():this._changeLayerButton.focus()};E.prototype.goToStep=function(A){var F=this;m["default"].hideNode(this["_step"+this._currentStep]);this["_stepBar"+this._currentStep]&&m["default"].hideNode(this["_stepBar"+this._currentStep]);
this._currentStep=A;for(var H=A-1;1<=H;H--)this["_stepHeader"+H].classList.remove("stepper__step-item--active"),this["_stepHeader"+H].classList.add("stepper__step-item--past"),this["_step"+H].parentNode.classList.add("stepper__content--past-step");for(H=A+1;4>=H;H++)this["_stepHeader"+H].classList.remove("stepper__step-item--past"),this["_stepHeader"+H].classList.remove("stepper__step-item--active"),this["_step"+H].parentNode.classList.remove("stepper__content--past-step");m["default"].showNode(this["_step"+
this._currentStep]);(A=this.domNode.querySelector(".stepper__content--active-step"))&&A.classList.remove("stepper__content--active-step");this["_step"+this._currentStep].parentNode.classList.remove("stepper__content--past-step");this["_step"+this._currentStep].parentNode.classList.add("stepper__content--active-step");this["_stepHeader"+this._currentStep].classList.remove("stepper__step-item--past");this["_stepHeader"+this._currentStep].classList.add("stepper__step-item--active");this["_stepBar"+this._currentStep]?
(m["default"].showNode(this["_stepBar"+this._currentStep]),this.domNode.classList.add("has-step-bar")):this.domNode.classList.remove("has-step-bar");m["default"].hideNode(this.domNode.querySelector(".js-compile-error-icon"));this.setPrimaryBtnText(c["default"].organizationInvite.step1Create.nextBtn);switch(this._currentStep){case 1:this._primaryBtn.disabled=!this._selectedReplacementItem;break;case 2:this.checkServiceNameAvailable(this._archiveName).then(function(I){I.available||(F.handleArchiveNameValidationError("unavailable"),
F.handleArchiveEdit())});this.alignSvgLabels();break;case 3:this.populateRelatedStyles();this._replaceLayerPreviewContainer.src=this.composePreviewPath();break;case 4:this.populateSummary(),this.setPrimaryBtnText(c["default"].replaceLayer.replace)}};E.prototype.populateRelatedStyles=function(){var A=this;if(0!==this._relatedStyles.length)if(1<this._relatedStyles.length){for(;0<this._styleDropdown.options.length;)this._styleDropdown.remove(0);this._relatedStyles.forEach(function(F){F.option=new Option(F.title);
A._styleDropdown.add(F.option);k["default"].checkForResources(F).then(function(H){return F.hasResources=H})});m["default"].hideNode(this._replaceSingleStyle);m["default"].showNode(this._replaceMultipleStyles)}else this._replaceSingleStyleLabel.textContent=this._relatedStyles[0].title,m["default"].showNode(this._replaceSingleStyle),m["default"].hideNode(this._replaceMultipleStyles)};E.prototype.alignSvgLabels=function(){var A,F,H;null===(A=this.domNode.querySelector(".archive-lyr-current-layer-svg"))||
void 0===A?void 0:A.setAttribute("text-anchor","rtl"===document.dir?"end":"start");null===(F=this.domNode.querySelector(".archive-lyr-archive-svg"))||void 0===F?void 0:F.setAttribute("text-anchor","rtl"===document.dir?"end":"start");null===(H=this.domNode.querySelector(".replace-lyr-current-layer-svg"))||void 0===H?void 0:H.setAttribute("text-anchor","rtl"===document.dir?"end":"start")};E.prototype.onStepClick=function(A){A=+b["default"].get(A.target,"data-step-num");A<this._currentStep&&this.goToStep(A)};
E.prototype.onOptionSelect=function(){var A=this.getSelectedOptionContainer();this._selectedOption=this.getSelectedOption();for(var F=this.domNode.querySelectorAll(".stepper__radio-item"),H=0;H<F.length;H++)F[H].classList.remove("stepper__radio-item--selected");A.classList.add("stepper__radio-item--selected")};E.prototype.getSelectedOption=function(){var A;this._radioOptions.some(function(F){F.checked&&(A=F.value);return F.checked});return A};E.prototype.getSelectedOptionContainer=function(){var A=
this._radioOptions.filter(function(F){return F.checked})[0];return A?A.parentNode.parentNode:null};E.prototype.handleArchiveEdit=function(){this._primaryBtn.disabled=!0;m["default"].showNode(this._archiveInputContainer);m["default"].hideNode(this._archiveInputEdit);this._archiveInputName.focus()};E.prototype.handleArchiveInput=function(A){m["default"].deactivateNode(this._nameInputError);m["default"].deactivateNode(this._nameAvailableError);var F=/[.@#%&*+=\-\\';,\/|\\":<>\?]/g.test(A.target.value);
0===A.target.value.length||F?this.handleArchiveNameValidationError(F?"invalid":void 0):this._archiveInputSave.disabled=!1};E.prototype.handleArchiveSave=function(){var A=this,F=this._archiveInputName.value;this.checkServiceNameAvailable(this.replaceSpacesWithUnderscore(F)).then(function(H){H.available?A.saveArchiveName(F):A.handleArchiveNameValidationError("unavailable")})};E.prototype.saveArchiveName=function(A){this._archiveName=A;this._currentArchiveName.textContent=A;m["default"].hideNode(this._archiveInputContainer);
m["default"].showNode(this._archiveInputEdit);this._primaryBtn.disabled=!1};E.prototype.checkServiceNameAvailable=function(A){return C["default"].request({url:g["default"].portal.portalUrl+"portals/"+(g["default"].self&&g["default"].self.user&&(g["default"].self.user.accountId||g["default"].self.user.orgId))+"/isServiceNameAvailable",content:{name:A,type:"Vector Tile Service",f:"json"}})};E.prototype.composePreviewPath=function(){var A=(this._selectedBaseStyle.hasResources?this._selectedBaseStyle.itemUrl:
this._selectedBaseStyle.url)+"/resources/styles/root.json";return g["default"].vectorTileStylePreview+"?vtStyle\x3d"+(this._selectedBaseStyle.viewStyleUrl?this._selectedBaseStyle.viewStyleUrl:A)+"\x26vtLayer\x3d"+(this._selectedReplacementItem.viewUrl?this._selectedReplacementItem.viewUrl:this._selectedReplacementItem.url)+(this.isWebMercator(Number(this.item.serviceInfo.tileInfo.spatialReference.wkid))?"\x26basemap\x3dstreets-vector":"")};E.prototype.handleArchiveNameValidationError=function(A){this._archiveInputSave.disabled=
!0;switch(A){case "invalid":m["default"].activateNode(this._nameInputError);break;case "unavailable":m["default"].activateNode(this._nameAvailableError)}};E.prototype.handleReplaceItemInformationSwitch=function(){this._replaceItemInformation=this._itemInformationSwitch.checked};E.prototype.handleChangeLayerSummaryClick=function(){this.goToStep(1)};E.prototype.handleChangeOptionSummaryClick=function(){this.goToStep(2)};E.prototype.handleLayerDropdownChange=function(){this._selectedBaseStyle=this._relatedStyles.filter(function(A){return A.option.selected})[0];
this._replaceLayerPreviewContainer.src=this.composePreviewPath()};E.prototype.handlePrimary=function(A){var F=this;A.stopPropagation();A.preventDefault();2!==this._currentStep||this._showPreviewStylesTab?4<=this._currentStep?(this.close(),this.replaceLayer().then(function(){var H;null===(H=F.telemetry)||void 0===H?void 0:H.logEvent({category:"archive option",label:"archive"===F._selectedOption?"new layer":"swap"});z["default"].showAlert("success",a["default"].substitute(c["default"].replaceLayer.layerReplaceSuccess,
{srcTitle:"\x3cb\x3e"+F.item.title+"\x3c/b\x3e"}));setTimeout(function(){window.location.reload()},4E3)})["catch"](function(H){z["default"].showAlert("error",H)})):this.goToStep(this._currentStep+1):this.goToStep(4)};E.prototype.handleHelp=function(){var A;window.open(""+g["default"].self.helpBase+((null===(A=g["default"].self.helpMap)||void 0===A?void 0:A.m["120001792"])||""))};E.prototype.handleCloseNotice=function(A){m["default"].hideNode(A.target.parentNode)};E.prototype.setPrimaryBtnText=function(A){this._primaryBtn.innerHTML=
A};E.prototype.getItemDisplayName=function(A){return"Vector Tile Service"===A.type?c["default"].items.tileLayer:A.displayName};E.prototype.populateSummary=function(){this._currentLayerTitle.innerHTML=this.item.title;this._currentLayerOwner.innerHTML=this.item.owner;this._currentLayerOwner.href=g["default"].baseUrl+"user.html?user\x3d"+this.item.owner;this._currentLayerIcon.src=this.item.iconUrl;this._currentLayerType.innerHTML=this.getItemDisplayName(this.item);"archive"===this._selectedOption?(this._archiveOptionLayerName.innerHTML=
this.replaceSpacesWithUnderscore(this._archiveName),m["default"].showNode(this._replaceOptionArchiveLabel),m["default"].hideNode(this._replaceOptionReplacementLabel)):(m["default"].showNode(this._replaceOptionReplacementLabel),m["default"].hideNode(this._replaceOptionArchiveLabel));this._replaceItemInformation?m["default"].showNode(this._replaceItemInformationLabel):m["default"].hideNode(this._replaceItemInformationLabel)};E.prototype.replaceLayer=function(){var A="archive"===this._selectedOption?
{toReplaceItemId:this.item.id,replacementItemId:this._selectedReplacementItem.id,replacedServiceName:this.replaceSpacesWithUnderscore(this._archiveName),replaceMetadata:this._replaceItemInformation,createNewItem:!0,f:"json"}:{toReplaceItemId:this.item.id,replacementItemId:this._selectedReplacementItem.id,replacedServiceName:this.replaceSpacesWithUnderscore(this._selectedReplacementItem.title),replaceMetadata:this._replaceItemInformation,f:"json"};return C["default"].request({url:this.portal.portalUrl+
"content/users/"+this.portal.user.username+"/replaceService",content:A},{usePost:!0})};return E=w.__decorate([d["default"](t["default"])],E)}()})},"arcgis-components/wrappers/ItemBrowser":function(){define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/Deferred dojo/promise/all dojo/_base/kernel ../ItemBrowser/index".split(" "),function(K,G,w,v,r,f){return function(c){function a(p){if(b[p])return b[p].exports;var q=b[p]={i:p,l:!1,exports:{}};return c[p].call(q.exports,q,q.exports,a),q.l=
!0,q.exports}var b={};return a.m=c,a.c=b,a.d=function(p,q,t){a.o(p,q)||Object.defineProperty(p,q,{enumerable:!0,get:t})},a.r=function(p){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"});Object.defineProperty(p,"__esModule",{value:!0})},a.t=function(p,q){if((1&q&&(p=a(p)),8&q)||4&q&&"object"==typeof p&&p&&p.__esModule)return p;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:p}),2&q&&"string"!=typeof p)for(var m in p)a.d(t,
m,function(n){return p[n]}.bind(null,m));return t},a.n=function(p){var q=p&&p.__esModule?function(){return p["default"]}:function(){return p};return a.d(q,"a",q),q},a.o=function(p,q){return Object.prototype.hasOwnProperty.call(p,q)},a.p="",a(a.s=983)}({0:function(c,a,b){function p(e,d){function g(){this.constructor=e}if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(e,d);e.prototype=null===d?Object.create(d):(g.prototype=d.prototype,
new g)}function q(e,d){var g={},u;for(u in e)Object.prototype.hasOwnProperty.call(e,u)&&0>d.indexOf(u)&&(g[u]=e[u]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(u=Object.getOwnPropertySymbols(e);x<u.length;x++)0>d.indexOf(u[x])&&Object.prototype.propertyIsEnumerable.call(e,u[x])&&(g[u[x]]=e[u[x]])}return g}function t(e,d,g,u){var x,y=arguments.length,B=3>y?d:null===u?u=Object.getOwnPropertyDescriptor(d,g):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=
Reflect.decorate(e,d,g,u);else for(var C=e.length-1;0<=C;C--)(x=e[C])&&(B=(3>y?x(B):3<y?x(d,g,B):x(d,g))||B);return 3<y&&B&&Object.defineProperty(d,g,B),B}function m(e,d,g,u){return new (g||(g=Promise))(function(x,y){function B(D){try{z(u.next(D))}catch(E){y(E)}}function C(D){try{z(u["throw"](D))}catch(E){y(E)}}function z(D){var E;D.done?x(D.value):(E=D.value,E instanceof g?E:new g(function(A){A(E)})).then(B,C)}z((u=u.apply(e,d||[])).next())})}function n(e,d){function g(z){return function(D){return function(E){if(u)throw new TypeError("Generator is already executing.");
for(;C;)try{if(u=1,x&&(y=2&E[0]?x["return"]:E[0]?x["throw"]||((y=x["return"])&&y.call(x),0):x.next)&&!(y=y.call(x,E[1])).done)return y;switch(x=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return C.label++,{value:E[1],done:!1};case 5:C.label++;x=E[1];E=[0];continue;case 7:E=C.ops.pop();C.trys.pop();continue;default:if(!(y=C.trys,(y=0<y.length&&y[y.length-1])||6!==E[0]&&2!==E[0])){C=0;continue}if(3===E[0]&&(!y||E[1]>y[0]&&E[1]<y[3]))C.label=E[1];else if(6===E[0]&&C.label<y[1])C.label=
y[1],y=E;else if(y&&C.label<y[2])C.label=y[2],C.ops.push(E);else{y[2]&&C.ops.pop();C.trys.pop();continue}}E=d.call(e,C)}catch(A){E=[6,A],x=0}finally{u=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([z,D])}}var u,x,y,B,C={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return B={next:g(0),"throw":g(1),"return":g(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B}function k(e,d){for(var g=0,u=d.length,x=e.length;g<u;g++,x++)e[x]=
d[g];return e}b.d(a,"d",function(){return p});b.d(a,"a",function(){return h});b.d(a,"f",function(){return q});b.d(a,"c",function(){return t});b.d(a,"b",function(){return m});b.d(a,"e",function(){return n});b.d(a,"g",function(){return k});var l=function(e,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,u){g.__proto__=u}||function(g,u){for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&(g[x]=u[x])})(e,d)},h=function(){return(h=Object.assign||function(e){for(var d,
g=1,u=arguments.length;g<u;g++)for(var x in d=arguments[g])Object.prototype.hasOwnProperty.call(d,x)&&(e[x]=d[x]);return e}).apply(this,arguments)};Object.create;Object.create},100:function(c,a,b){b.d(a,"g",function(){return t});b.d(a,"k",function(){return m});b.d(a,"j",function(){return n});b.d(a,"h",function(){return k});b.d(a,"i",function(){return l});b.d(a,"c",function(){return h});b.d(a,"b",function(){return e});b.d(a,"f",function(){return d});b.d(a,"e",function(){return g});b.d(a,"d",function(){return u});
b.d(a,"a",function(){return x});b.d(a,"r",function(){return y});b.d(a,"n",function(){return B});b.d(a,"s",function(){return C});b.d(a,"o",function(){return z});b.d(a,"q",function(){return D});b.d(a,"p",function(){return E});b.d(a,"l",function(){return A});b.d(a,"m",function(){return F});var p=b(78),q=b(48),t="SELECT_ITEM",m="TOGGLE_ITEM",n="SELECT_ITEM_SINGLE",k="SELECT_ITEM_ASYNC",l="SELECT_ITEM_ASYNC_FAILED",h="DESELECT_ITEM",e="DESELECT_ALL",d="SELECT_ALL",g="SELECT_ALL_FROM_QUERY_SUCCESS",u="END_BULK_WORKFLOW",
x="CANCEL_BULK_WORKFLOW",y=function(H){return function(I,L){var J=L();if(J.settings.config.asynchronousItemSelect){I({type:k,payload:H});var O=J.settings.config.onSelect([Object(p.b)(H)]);(null==O?0:O.then)&&O.then(function(){J.settings.config.singleItemSelect?I({type:n,payload:H}):I({type:t,payload:H})},function(){I({type:l,payload:H})})}else J.settings.config.singleItemSelect?(I({type:n,payload:H}),J.settings.config.onSelect([Object(p.b)(H)])):(I({type:t,payload:H}),J.settings.config.onSelect([Object(p.b)(H)]))}},
B=function(H,I){var L=I();if(L.settings.config.disableInitiallySelectedItems){L=L.results;var J=L.selectedItems,O=L.initiallySelectedItems;Object.keys(J).map(function(P){return J[P]}).filter(function(P){return!O[P.id]}).forEach(function(P){H({type:h,payload:P})})}else H({type:e})},C=function(H){return{type:m,payload:H}},z=function(H){return function(I,L){var J=L();I({type:h,payload:H});J.settings.config.onDeselect([Object(p.b)(H)])}},D=function(){return function(H,I){var L=I();H({type:d,payload:L.ui.pagination.displayItems})}},
E=function(H){return{type:g,payload:H}},A=function(H,I){var L=null==I?void 0:I();H({type:x});null==L||L.settings.config.onBack()},F=function(H,I){var L=null==I?void 0:I();if(null==L?0:L.settings.config.onBulkAction){var J=L.settings.config.onBulkAction;L=L.results;var O=L.selectedItems,P=L.initiallySelectedItems;L=Object.keys(P).map(function(ka){return P[ka]});var fa=Object.keys(O).map(function(ka){return O[ka]}),V=L.filter(function(ka){return!O[ka.id]}),ba=fa.filter(function(ka){return!P[ka.id]});
H({type:q.a});H({type:u,payload:ba});J({initiallySelectedItems:L,allSelectedItems:fa,newlySelectedItems:ba,deselectedItems:V})}}},101:function(c,a,b){b.d(a,"a",function(){return q});b.d(a,"b",function(){return t});var p=b(0),q=function(m){return m?m.urlKey?location.protocol+"//"+m.urlKey+"."+m.customBaseUrl:location.protocol+"//"+m.portalHostname:""},t=function(m){return Object(p.a)(Object(p.a)({},m),{baseUrl:q(m)})}},117:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,
m){var n=Object(p.a),k=Object(p.a)({},m),l=m.type,h=m.typeKeywords?m.typeKeywords:[],e=null==l?void 0:l.toLowerCase(),d=!1,g=!1,u=l=!1;if("ogcfeatureserver"===e)h="featureshosted";else if(0<(null==e?void 0:e.indexOf("service"))||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e){var x=-1<h.indexOf("Hosted Service");"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(u=-1<h.indexOf("Table"),d=-1<h.indexOf("Route Layer"),g=-1<h.indexOf("Markup"),h=(l=-1!==h.indexOf("Spatiotemporal"))&&
u?"spatiotemporaltable":u?"table":d?"routelayer":g?"markup":l?"spatiotemporal":x?"featureshosted":"features"):"map service"===e||"wms"===e||"wmts"===e?h=x||-1<h.indexOf("Tiled")||"wmts"===e?"maptiles":"mapimages":"scene service"===e?h=-1<h.indexOf("Line")?"sceneweblayerline":-1<h.indexOf("3DObject")?"sceneweblayermultipatch":-1<h.indexOf("Point")?"sceneweblayerpoint":-1<h.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<h.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<h.indexOf("Polygon")?"sceneweblayerpolygon":
-1<h.indexOf("Building")?"sceneweblayerbuilding":-1<h.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===e?(l=-1<h.indexOf("Elevation 3D Layer"),h=-1<h.indexOf("Tiled Imagery"),h=l?"elevationlayer":h?"tiledimagerylayer":"imagery"):h="stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&-1<h.indexOf("Web Tool")?"tool":"layers"}else h="web map"===
e||"cityengine web scene"===e?"maps":"web scene"===e?-1<h.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===e&&-1<(null==h?void 0:h.indexOf("configurableApp"))?"instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||
"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&-1<h.indexOf("ArcGIS Pro")||"explorer map"===e&&-1<h.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"administrative report"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===
e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"vector tile package"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&-1<h.indexOf("Explorer Mapping Application")||-1<h.indexOf("Document")?
"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e||"raster function template"===e||"deep learning package"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"tile package"===e?"tilepackage":"storymap"===e?"storymap":"storymap theme"===e?"storymaptheme":
"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"hub initiative"===e?"hubinitiative":"hub page"===e?"hubpage":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===
e||"data store"===e?"datastorecollection":"image collection"===e?"imagecollection":"desktop style"===e?"desktopstyle":"style"===e?"style":"dashboard"===e?"dashboard":"feed"===e?"feed":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"notebook"===e?"notebook":"notebook code snippets"===e?"notebookcodesnippets":"maps";return n(k,{iconURI:t+"/"+h+"16.png"})})},120:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){var n=
Object(p.a),k=Object(p.a)({},m),l,h,e="notebook"!==(null===(l=m.type)||void 0===l?void 0:l.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"===(null===(h=m.type)||void 0===h?void 0:h.toLowerCase())&&(e="notebook-code-snippet-thumb.png");h=t.baseUrl+"/home/js/arcgisonline/css/images/"+e;l=(m.thumbnail&&(h=t.restUrl+"/content/items/"+m.id+"/info/"+m.thumbnail+(t.credential?"?token\x3d"+t.credential.token:"")),h);return n(k,{thumbURI:l})})},121:function(c,a,b){b.d(a,"a",
function(){return t});var p=b(0);c=b(15);var q=function(m,n){return n.description?n.description.replace(/src=('|")js\/jsapi\/esri\//g,function(k){return"src\x3d"+('"'===k[4]?'"':"'")+m.baseUrl+"/home/js/jsapi/esri/"}):void 0},t=Object(c.a)(function(m,n){return Object(p.a)(Object(p.a)({},n),{patchedDescription:q(m,n)})})},122:function(c,a,b){b.d(a,"a",function(){return m});var p=b(0),q=b(124);c=b(15);var t=b(58),m=Object(c.a)(function(n,k){var l=Object(p.a),h=Object(p.a)({},k),e,d=k.type,g=k.typeKeywords||
[],u=d,x=(null==n?void 0:n.portalUser)||(null==n?void 0:n.user);if("Feature Service"===d||"Feature Collection"===d){if(u=-1<g.indexOf("Table")?"Table":-1<g.indexOf("Route Layer")?"Route Layer":-1<g.indexOf("Markup")?"Markup":"Feature Layer",x&&Object(t.d)(k,x)&&-1<(null==g?void 0:g.indexOf("Hosted Service")))g=(null===(e=null===document||void 0===document?void 0:document.documentElement)||void 0===e?void 0:e.lang)||"en",u=u+" ("+(q.a[g]||q.a[g.split("-")[0]]||q.a.en)+")"}else"Image Service"===d?(e=
-1<g.indexOf("Elevation 3D Layer"),g=-1<g.indexOf("Tiled Imagery"),u=e?"Elevation Layer":g?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===d?u="Scene Layer":"Scene Package"===d?u="Scene Layer Package":"Stream Service"===d?u="Feature Layer":"Geocoding Service"===d?u="Locator":"Microsoft Powerpoint"===d?u="Microsoft PowerPoint":"OGCFeatureServer"===d?u="OGC Feature Layer":"GeoJson"===d?u="GeoJSON":"Globe Service"===d?u="Globe Layer":"Vector Tile Service"===d?u="Tile Layer":"netCDF"===d?u="NetCDF":
"Map Service"===d?u=-1===g.indexOf("Spatiotemporal")&&(-1<g.indexOf("Hosted Service")||-1<g.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":d&&-1<d.toLowerCase().indexOf("add in")?u=d.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===d?u="Big Data File Share":"Web Mapping Application"===d&&(null==g?0:g.includes("configurableApp"))?u="Instant App":"Data Store"===d&&(g.includes("cloudStore_amazon")||g.includes("cloudStore_azure")?u+=" (Cloud)":(g.includes("fileShare")||g.includes("hdfs")||
g.includes("hive")||g.includes("bigDataFileShare")&&g.includes("dataStore"))&&(u+=" (Big Data File Share)"));return l(h,{displayName:u})})},123:function(c,a,b){b.d(a,"a",function(){return t});var p=b(0);c=b(15);var q=function(m,n){var k=[],l=m.typeKeywords?m.typeKeywords:[];return m.contentStatus&&("org_authoritative"===m.contentStatus||"public_authoritative"===m.contentStatus?k.push("authoritative"):"deprecated"===m.contentStatus&&k.push("deprecated")),m.origin&&k.push("collaboration"),m.groupDesignations&&
-1<m.groupDesignations.indexOf("livingatlas")&&k.push("livingAtlas"),-1<l.indexOf("Requires Credits")?k.push("premium"):-1<l.indexOf("Requires Subscription")&&k.push("subscriber"),-1<l.indexOf("Public Data Collection")&&((null==n?void 0:n.portalUser)||(null==n?void 0:n.user))&&k.push("publicDataCollection"),"Solution"===m.type&&-1<m.typeKeywords.indexOf("ArcGIS Solution")&&k.push("solution"),n.isPortal&&"Web Mapping Application"===m.type&&(-1<m.typeKeywords.indexOf("Story Map")&&k.push("retiredStoryMap"),
function(h){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(e){var d,
g=-1<e.indexOf(".html");return-1<(null===(d=h.url)||void 0===d?void 0:d.indexOf("/apps/"+e+(g?"":"/")))})}(m)&&k.push("retiredApp")),k},t=Object(c.a)(function(m,n){return Object(p.a)(Object(p.a)({},n),{badges:q(n,m)})})},124:function(c,a,b){b.d(a,"a",function(){return p});var p={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",
he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",
vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},126:function(c,a,b){function p(m){var n=Object(q.b)(m.settings.config.customSections,m.parameters.section);return(null==n?0:n.portal)?Object(t.b)(n.portal):m.settings.utils.portal}b.d(a,"a",function(){return p});var q=b(86),t=b(101)},141:function(c,a,b){b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});var p={maps:'(type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package"))',
webMaps:'(type:("Web Map" OR "CityEngine Web Scene") -type:("Web Mapping Application"))',mapFiles:'(type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template"))',layers:'(type:("OGCFeatureServer" OR "Scene Service" OR "Feature Collection" OR "Route Layer" OR "Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "Feature Service" OR "Stream Service" OR "Map Service" OR "Vector Tile Service" OR "Image Service" OR "WMS" OR "WFS" OR "Feed" OR "WMTS" OR "KML" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR "Globe Service" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Relational Database Connection") -type:("Web Mapping Application" OR "Geodata Service"))',
featureLayers:'(type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS" OR "Feed" OR "OGCFeatureServer") -typekeywords:"Table")',tileLayers:'(type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled"))',mapImageLayers:'(type:("Map Service" OR "WMS") -typekeywords:("Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile"))',imageryLayers:'(type:"Image Service")',sceneLayers:'(type:"Scene Service")',tiledImageLayers:'(type: "Image Service" typekeywords: "Tiled Imagery")',
elevationLayers:'(type: "Image Service" typekeywords: "Elevation 3D Layer")',tables:"(typekeywords:Table)",layerFiles:'(type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel") -type:("Explorer Maps" OR "Map Documents"))',scenes:'(-type:"CityEngine Web Scene" type:"Web Scene")',apps:'(type:("Code Sample" OR "Web Mapping Application" OR "StoryMap" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application" OR "Web Experience" OR "Web Experience Template" OR "Form"))',
webApps:'(type:("Web Mapping Application" OR "Dashboard"))',sites:'(type:("Hub Site Application" OR "Site Application"))',pages:'(type:("Hub Page" OR "Site Page"))',storyMaps:'(type:"StoryMap")',experienceApps:'(type:("Web Experience" OR "Web Experience Template"))',instantApps:'typekeywords:"configurableApp"',mobileApps:'(type:"Mobile Application")',desktopApps:'(type:"Desktop Application" -type:"Desktop Application Template")',tools:'((typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration" OR (type:("Big Data Analytic" OR "Real Time Analytic")) OR (type:"Geoprocessing Service" AND typekeywords: "Web Tool")) -type:"KML")',
analytics:'(type:("Big Data Analytic" OR "Real Time Analytic"))',locators:'(type:("Geocoding Service" OR "Locator Package"))',geodatabaseAccess:'(type:"Geodata Service")',geometricOperations:'(type:"Geometry Service")',geoprocessingTasks:'(type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample"))',networkAnalysis:'(type:"Network Analysis Service")',files:'((typekeywords:"Document" OR type:"CSV" OR type: "Administrative Report" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF") -type:("Map Document" OR "Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document" OR "Microsoft Excel"))',
documents:'(typekeywords:"Document" -type:"PDF")',images:'(type:("Image" OR "360 VR Experience") -type:"Image Service")',pdfs:'(type:"PDF")',csvs:'(type:"CSV")',reports:'(type: "Administrative Report")',webTools:'(type:"Geoprocessing Service" AND typekeywords: "Web Tool")',notebooks:'(type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook"))',bigDataFileShares:'type:("Big Data File Share")',rasterFunctionTemplates:'type:("Raster function template")',deepLearningPackages:'type:("Deep Learning Package")',
solution:'type:("Solution")',knowledgeGraphs:'(type:"Knowledge Graph")'},q="Web Map;CityEngine Web Scene;Web Scene;360 VR Experience;Pro Map;Feature Service;Map Service;Image Service;KML;KML Collection;WFS;WMTS;Feature Collection;Feature Collection Template;Vector Tile Service;Scene Service;Relational Database Connection;Web Mapping Application;Mobile Application;Code Attachment;Operations Dashboard Add In;Native Application;Native Application Template;Native Application Installer;Workforce Project;Form;Insights Workbook;Insights Data Engineering Workbook;Insights Model;Insights Data Engineering Model;Insights Page;Dashboard;Hub Initiative;Hub Site Application;Hub Page;Site Application;Site Page;AppBuilder Widget Package;Symbol Set;Color Set;Shapefile;File Geodatabase;CSV;Administrative Report;CAD Drawing;Service Definition;Microsoft Word;Microsoft Powerpoint;Microsoft Excel;PDF;Image;Visio Document;iWork Keynote;iWork Pages;iWork Numbers;Report Template;Statistical Data Collection;Map Document;Map Package;Mobile Basemap Package;Mobile Map Package;Tile Package;Vector Tile Package;Project Package;Task File;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package;Pro Map;Layout;Project Template;Layer;Layer Package;Explorer Layer;Scene Package;Image Collection;Desktop Style;Geoprocessing Package;Geoprocessing Package (Pro version);Geoprocessing Sample;Locator Package;Rule Package;Raster function template;Deep Learning Package;ArcGIS Pro Configuration;Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In;ArcGIS Pro Add In;Geometry Service;Geocoding Service;Network Analysis Service;Geoprocessing Service;Workflow Manager Service;Big Data File Share;Web Tool;Notebook;Web Experience;Web Experience Template;Feed;Real Time Analytic;Big Data Analytic;OGCFeatureServer;Solution;Knowledge Graph".split(";")},
148:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){var n=Object(p.a),k=Object(p.a)({},m);var l=m.thumbnail?t.restUrl+"/community/users/"+m.username+"/info/"+m.thumbnail+(t.credential?"?token\x3d"+t.credential.token:""):void 0;return n(k,{thumbURI:l})})},15:function(c,a,b){function p(t){return function n(){for(var k=this,l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return l.length>=t.length?t.call.apply(t,Object(q.g)([this],l)):function(){for(var e=
[],d=0;d<arguments.length;d++)e[d]=arguments[d];return n.call.apply(n,Object(q.g)(Object(q.g)([k],l),e))}}}b.d(a,"a",function(){return p});var q=b(0)},150:function(c,a){c.exports=r},16:function(c,a){c.exports=K},162:function(c,a,b){function p(C,z){var D=["",{method:"get",query:z.settings.config.addRequestParameters?Object(m.a)({f:"json",q:Object(k.b)(z),num:C.num?C.num:z.settings.config.resultsPerQuery,sortOrder:z.parameters.sort.order,start:C.start?C.start:1},z.settings.config.addRequestParameters()):
{f:"json",q:Object(k.b)(z),num:C.num?C.num:z.settings.config.resultsPerQuery,sortOrder:z.parameters.sort.order,start:C.start?C.start:1}}];return Object(n.a)(g(z),u(z),x(z),y(z))(D)}function q(C,z){var D=["",{method:"get",query:{f:"json",q:Object(k.a)(C),num:0,countFields:z.join(", "),countSize:200}}];return d(C)(D)}function t(C,z){var D=["",{method:"get",query:{f:"json",q:Object(k.c)(C,z),num:0,countFields:"tags",countSize:200}}];return d(C)(D)}b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});
b.d(a,"c",function(){return t});var m=b(0),n=b(63);c=b(15);var k=b(179),l=b(356),h=b(126),e=b(86),d=function(C){return Object(n.a)(y(C),B(C),x(C))},g=Object(c.a)(function(C,z){var D=z[0],E=z[1],A=C.parameters.sort.field;return"relevance"!==A?[D,Object(m.a)(Object(m.a)({},E),{query:Object(m.a)(Object(m.a)({},E.query),{sortField:A})})]:[D,E]}),u=Object(c.a)(function(C,z){var D=z[0],E=z[1];if(C.parameters.filter.searchMapArea){var A=C.parameters.extent.area;A=A.minx+","+A.miny+","+A.maxx+","+A.maxy;
return[D,Object(m.a)(Object(m.a)({},E),{query:Object(m.a)(Object(m.a)({},E.query),{bbox:A})})]}return[D,E]}),x=Object(c.a)(function(C,z){var D=z[0],E=z[1],A=Object(l.a)(C);return A?[D,Object(m.a)(Object(m.a)({},E),{query:Object(m.a)(Object(m.a)({},E.query),{enriched:A})})]:[D,E]}),y=Object(c.a)(function(C,z){z[0];var D=z[1],E=C.parameters,A=E.section;E=E.filter;var F=Object(h.a)(C),H=F.restUrl+"/search";if("myGroups"===A&&E.group)H=F.restUrl+"/content/groups/"+E.group.id+"/search",E.groupCategories&&
(H=H+"?categories\x3d"+encodeURIComponent(JSON.stringify([E.groupCategories.value])));else if("livingAtlas"!==A&&"Living Atlas"!==A||!C.results.livingAtlas.groupId)if(!E.orgCategories||"myOrganization"!==A&&"myContent"!==A){if(A=Object(e.b)(C.settings.config.customSections,A))Object(e.d)(A)&&E.orgCategories&&(H=H+"?categories\x3d"+encodeURIComponent(JSON.stringify([E.orgCategories.value]))),(A=Object(e.c)(A))&&(H=F.restUrl+"/content/groups/"+A.id+"/search",E.groupCategories&&(H=H+"?categories\x3d"+
encodeURIComponent(JSON.stringify([E.groupCategories.value]))))}else H=H+"?categories\x3d"+encodeURIComponent(JSON.stringify([E.orgCategories.value]));else H=F.restUrl+"/content/groups/"+C.results.livingAtlas.groupId+"/search",E.livingAtlasCategories?(H=H+"?categories\x3d"+encodeURIComponent(JSON.stringify([E.livingAtlasCategories.value])),E.livingAtlasRegion&&(H=H+"\x26categories\x3d"+encodeURIComponent(JSON.stringify([E.livingAtlasRegion.value])))):E.livingAtlasRegion&&(H=H+"?categories\x3d"+encodeURIComponent(JSON.stringify([E.livingAtlasRegion.value])));
return[H,D]}),B=Object(c.a)(function(C,z){var D=z[0],E=z[1],A=C.parameters.section,F=Object(e.b)(C.settings.config.customSections,A);return"myGroups"===A&&C.parameters.filter.group||("livingAtlas"===A||"Living Atlas"===A)&&C.results.livingAtlas.groupId||F&&Object(e.c)(F)?[D,Object(m.a)(Object(m.a)({},E),{query:Object(m.a)(Object(m.a)({},E.query),{countFields:E.query.countFields?E.query.countFields.replace("categories","groupcategories"):void 0})})]:[D,E]})},170:function(c,a){var b=function(){return this}();
try{b=b||(new Function("return this"))()}catch(p){"object"==typeof window&&(b=window)}c.exports=b},173:function(c,a,b){b.d(a,"a",function(){return n});b.d(a,"c",function(){return k});b.d(a,"b",function(){return l});b.d(a,"d",function(){return h});b.d(a,"h",function(){return e});b.d(a,"i",function(){return d});b.d(a,"j",function(){return g});b.d(a,"e",function(){return u});b.d(a,"g",function(){return x});b.d(a,"f",function(){return y});b.d(a,"l",function(){return B});b.d(a,"k",function(){return z});
b.d(a,"m",function(){return D});c=b(65);var p=b.n(c);c=b(56);var q=b.n(c),t=b(30),m=b(48),n="ADD_TO_FAVORITES",k="ADD_TO_FAVORITES_SUCCESS",l="ADD_TO_FAVORITES_FAIL",h="LOADING_USER_INFO",e="UPDATE_GROUP_CATEGORIES",d="UPDATE_USER_INFO",g="UPDATE_USER_INFO_FAILED",u="REMOVE_FROM_FAVORITES",x="REMOVE_FROM_FAVORITES_SUCCESS",y="REMOVE_FROM_FAVORITES_FAIL",B=function(){return function(E,A){var F=A(),H=F.parameters.filter.group,I=F.results.user.groupCategories;if("loaded"===F.results.user.status)return H&&
!I[H.id]?E(C(H.id)):(new q.a).resolve();if("failed"===F.results.user.status)return(new q.a).reject();E({type:h});I=F.settings.utils;F=I.request;I=I.portal;return p()([Object(t.r)(F,I).then(function(L){return L.groups.map(function(J){return{id:J.id,title:J.title}})}),Object(t.s)(F,I).then(function(L){return L.folders.map(function(J){return{id:J.id,title:J.title}})}),Object(t.t)(F,I,I.user.favGroupId).then(function(L){return L.items.reduce(function(J,O){return J[O.id]=!0,J},{})})].concat(H?[E(C(H.id))]:
[])).then(function(L){E({type:d,payload:{groups:L[0],folders:L[1],favorites:L[2]}})},function(L){E({type:g})})}},C=function(E){return function(A,F){var H=F().settings.utils;return Object(t.f)(H.request,H.portal,E).then(function(I){A({type:e,payload:{id:E,categorySchema:I.categorySchema}})})}},z=function(E){return function(A,F){var H=F(),I=H.settings.utils.portal,L=I.restUrl+"/content/items/"+E.id+"/share";I={f:"json",everyone:E.access&&"public"===E.access||E.sharing&&E.sharing.access&&"public"===
E.sharing.access,org:E.access&&"org"===E.access||E.sharing&&E.sharing.access&&"org"===E.sharing.access||!1,groups:[I.user.favGroupId],items:[E.id]};A({type:n,payload:E});H.settings.utils.request(L,{method:"post",query:I}).then(function(J){A({type:k,payload:E})},function(J){A({type:l,payload:E})})}},D=function(E){return function(A,F){var H=F(),I=H.settings.utils.portal,L=I.user.favGroupId,J=I.restUrl+"/content/items/"+E.id+"/unshare",O={f:"json",everyone:!1,org:!1,groups:[L],items:[E.id]};A({type:u,
payload:E});H.settings.utils.request(J,{method:"post",query:O}).then(function(P){function fa(){A({type:x,payload:E})}"myFavorites"===(H=F()).parameters.section?function ba(){H.settings.utils.request(I.restUrl+"/search",{query:{f:"json",q:"(id:"+E.id+") (group:"+L+")"},method:"get"}).then(function(ka){0<ka.data.total?setTimeout(function(){ba()},250):(fa(),A(Object(m.i)()))},function(ka){fa()})}():fa()},function(P){A({type:y,payload:E})})}}},179:function(c,a,b){function p(H){return Object(n.a)(k.b,
A(H),F(H),Object(l.a)(H.parameters.filter.orgGroup),Object(h.a)(H.parameters.filter.status,H.settings.utils.portal.user),E(H),Object(e.a)(H.parameters.filter.shared),Object(d.a)(H.parameters.filter.dateCreated),Object(d.b)(H.parameters.filter.dateModified),Object(g.a)(C.b,{allowedItemTypes:H.settings.config.allowedItemTypes,itemTypeFilter:H.parameters.filter.itemType,specialItemQ:H.settings.config.specialItemQ}),Object(u.b)(H.parameters.filter.tags),Object(x.a)(H.parameters.filter.origins))([H.parameters.searchString.current]).join(" ")}
function q(H){return Object(n.a)(k.b,A(H),E(H),Object(g.a)(C.b,{allowedItemTypes:H.settings.config.allowedItemTypes,specialItemQ:H.settings.config.specialItemQ}))([H.parameters.searchString.current]).join(" ")}function t(H,I){return Object(n.a)(k.b,A(H),E(H),Object(g.a)(C.b,{allowedItemTypes:H.settings.config.allowedItemTypes,specialItemQ:H.settings.config.specialItemQ}),Object(u.a)(I))([H.parameters.searchString.current]).join(" ")}b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});
b.d(a,"c",function(){return t});var m=b(0),n=b(63),k=b(99),l=b(398),h=b(399),e=b(400),d=b(323),g=b(265),u=b(324),x=b(401);c=b(15);var y=b(5),B=b(180),C=b(141),z=b(126),D=b(86),E=Object(c.a)(function(H,I){var L=H.parameters.filter,J=H.settings.config,O=Object(z.a)(H);switch(H.parameters.section){case "myContent":return O.user?O.user&&L.folder?Object(m.g)(Object(m.g)([],I),['(owner:"'+O.user.username+'") (ownerfolder:'+L.folder.id+")"]):Object(m.g)(Object(m.g)([],I),['(owner:"'+O.user.username+'")']):
I;case "myFavorites":return O.user?Object(m.g)(Object(m.g)([],I),["(group:"+O.user.favGroupId+")"]):I;case "myGroups":if(H.results.user.groups){if(H.parameters.filter.group)return Object(m.g)(Object(m.g)([],I),["(group:"+H.parameters.filter.group.id+")"]);L=H.results.user.groups.map(function(P){return P.id});return Object(m.g)(Object(m.g)([],I),["(group:"+L.join(" OR group:")+")"])}return I;case "myOrganization":return Object(m.g)(Object(m.g)([],I),["(orgid:"+O.id+")"]);case "subscription":return Object(m.g)(Object(m.g)([],
I),["("+H.results.provisionedContent.content.map(function(P){return"id:"+P}).join(" OR ")+")"]);case "all":return I;default:return(L=J.customSections.filter(function(P){return H.parameters.section===P.name})[0])?Object(m.g)(Object(m.g)([],I),[L.baseQuery]):I}}),A=Object(c.a)(function(H,I){var L=H.settings.config.addQueryParameters;try{if(L&&"function"==typeof L)return Object(m.g)(Object(m.g)([],I),[L(H)])}catch(J){}return I}),F=Object(c.a)(function(H,I){var L=Object(D.b)(H.settings.config.customSections,
H.parameters.section);if(L&&!Object(y.b)(H.parameters.filter.customFilter)){var J=Object.keys(H.parameters.filter.customFilter).filter(function(O){return H.parameters.filter.customFilter[O]}).reduce(function(O,P){var fa,V=parseInt(P,10),ba=H.parameters.filter.customFilter[V].value;if(null===(fa=null==L?void 0:L.filters)||void 0===fa?0:fa[V])if(fa=Object(B.a)("children","value",L.filters[V],ba))return Object(m.g)(Object(m.g)([],O),["("+fa.q+")"]);return O},[]).join(" AND ");return Object(m.g)(Object(m.g)([],
I),[""+J])}return I})},180:function(c,a,b){function p(u,x){return l("children","value",u,x)}function q(u,x){return h("children","value",u,x)}function t(u,x){return function E(B,C,z,D){var A,F=z[B];return F&&0!==F.length?Object(g.a)(Object(g.a)({},z),((A={})[B]=F.reduce(function(H,I){return-1!==D.indexOf(I[C])&&H.push(E(B,C,I,D)),H},[]),A)):Object(g.a)({},z)}("children","value",u,x)}function m(u){return function(x,y){var B,C=y[x];return C?Object(g.a)(Object(g.a)({},y),((B={})[x]=function E(D){return 0===
D.length?[]:1!==D.length||D[0][x]?1<D.length?D.reduce(function(A,F){var H;return F[x]?(A.push(Object(g.a)(Object(g.a)({},F),((H={})[x]=E(F[x]),H))),A):(A.push(F),A)},[]):E(D[0][x]):D}(C),B)):y}("children",u)}function n(u,x){return e("children",u,x)}function k(u,x){return function D(B,C,z){var E=C[B];E&&E.forEach(function(A){return D(B,A,z)});z(C)}("children",u,x)}function l(u,x,y,B){var C=y[u];return y[x]===B?y:C?C.reduce(function(z,D){return z||l(u,x,D,B)},void 0):void 0}function h(u,x,y,B){if(y=
y[u])return y.reduce(function(C,z){return z[x]===B[0]?1===B.length?z:h(u,x,z,B.slice(1)):C},void 0)}function e(u,x,y){var B;return y(Object(g.a)(Object(g.a)({},x),((B={})[u]=x[u]?x[u].map(function(C){return e(u,C,y)}):void 0,B)))}function d(u,x,y){return e(u,y,function(B){var C=B[x];if(delete B[x],B[u]){var z=B[u];return delete B[u],Object(g.a)(Object(g.a)({},B),{value:C,children:z})}return Object(g.a)(Object(g.a)({},B),{value:C})})}b.d(a,"f",function(){return p});b.d(a,"d",function(){return q});
b.d(a,"i",function(){return t});b.d(a,"e",function(){return m});b.d(a,"h",function(){return n});b.d(a,"g",function(){return k});b.d(a,"a",function(){return l});b.d(a,"b",function(){return h});b.d(a,"c",function(){return d});var g=b(0)},189:function(c,a){function b(){throw Error("setTimeout has not been defined");}function p(){throw Error("clearTimeout has not been defined");}function q(y){if(h===setTimeout)return setTimeout(y,0);if((h===b||!h)&&setTimeout)return h=setTimeout,setTimeout(y,0);try{return h(y,
0)}catch(B){try{return h.call(null,y,0)}catch(C){return h.call(this,y,0)}}}function t(){u&&d&&(u=!1,d.length?g=d.concat(g):x=-1,g.length&&m())}function m(){if(!u){var y=q(t);u=!0;for(var B=g.length;B;){d=g;for(g=[];++x<B;)d&&d[x].run();x=-1;B=g.length}d=null;u=!1;(function(C){if(e===clearTimeout)return clearTimeout(C);if((e===p||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(C);try{e(C)}catch(z){try{return e.call(null,C)}catch(D){return e.call(this,C)}}})(y)}}function n(y,B){this.fun=y;this.array=
B}function k(){}var l=c.exports={};try{var h="function"==typeof setTimeout?setTimeout:b}catch(y){h=b}try{var e="function"==typeof clearTimeout?clearTimeout:p}catch(y){e=p}!0;var d,g=[],u=!1,x=-1;l.nextTick=function(y){var B=Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)B[C-1]=arguments[C];g.push(new n(y,B));1!==g.length||u||q(m)};n.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions=
{};l.on=k;l.addListener=k;l.once=k;l.off=k;l.removeListener=k;l.removeAllListeners=k;l.emit=k;l.prependListener=k;l.prependOnceListener=k;l.listeners=function(y){return[]};l.binding=function(y){throw Error("process.binding is not supported");};l.cwd=function(){return"/"};l.chdir=function(y){throw Error("process.chdir is not supported");};l.umask=function(){return 0}},193:function(c,a,b){function p(m){var n,k;return null!==(n=m.orgId)&&void 0!==n?n:null===(k=m.portal)||void 0===k?void 0:k.id}function q(m){var n;
if(!m)return!1;var k=p(m),l=null===(n=m.portal)||void 0===n?void 0:n.isPortal;return!!k&&!l&&"public_authoritative"===m.contentStatus}function t(m,n,k){return new Promise(function(l){var h=m.map(function(e){return function(d,g,u){var x="https://"+g.portalHostname+"/sharing/rest/portals/"+d;return new Promise(function(y){u(x,{method:"get",query:{f:"json"}}).then(function(B){B=B.data;var C=B.thumbnail,z=(B.allSSL?"https://":"http://")+(B.urlKey||"")+"."+B.customBaseUrl+"/";y({name:B.name,url:z+"home/",
thumbnail:C?z+"sharing/rest/portals/self/resources/"+C:"./images/group-no-image.png",id:d})})})}(e,n,k)});Promise.all(h).then(function(e){l(e.filter(function(d){return d}))})})}b.d(a,"b",function(){return p});b.d(a,"c",function(){return q});b.d(a,"a",function(){return t})},199:function(c,a,b){function p(d,g,u){return d.filter(function(x,y,B){return B.indexOf(x)===y&&!g.hasOwnProperty(x)&&-1===u.indexOf(x)})}b.d(a,"c",function(){return n});b.d(a,"d",function(){return k});b.d(a,"a",function(){return l});
b.d(a,"b",function(){return h});b.d(a,"e",function(){return e});var q=b(0),t=b(193),m=b(309),n="USER_THUMBNAILS_LOAD_START",k="USER_THUMBNAILS_LOAD_SUCCESS",l="ORG_THUMBNAILS_LOAD_START",h="ORG_THUMBNAILS_LOAD_SUCCESS",e=function(d,g){var u=g(),x=u.settings.utils,y=x.request;x=x.portal;var B=u.ui.pagination;u=B.displayItems;var C=B.userThumbnailCache,z=B.pendingUserThumbRequests,D=B.orgThumbnailCache;B=B.pendingOrgThumbRequests;D=p(u.filter(t.c).map(t.b),D,B);u=p(u.map(function(E){return E.owner}),
C,z);if(0!==u.length||0!==D.length)d({type:n,payload:u}),d({type:l,payload:D}),u=Object(m.a)(u,x,y),y=Object(t.a)(D,x,y),Promise.all([u,y]).then(function(E){var A=E[0];E=E[1];A=(null==A?void 0:A.reduce(function(F,H){var I;return Object(q.a)(Object(q.a)({},F),((I={})[H.username]={thumbnail:H.thumbURI||H.thumbnail,username:H.username,fullName:H.fullName,id:H.id},I))},{}))||{};E=(null==E?void 0:E.reduce(function(F,H){var I;return Object(q.a)(Object(q.a)({},F),((I={})[H.id]=H,I))},{}))||{};d({type:k,
payload:A});d({type:h,payload:E})})}},217:function(c,a,b){b.d(a,"a",function(){return h});var p=b(0);c=b(56);var q=b.n(c);c=b(65);var t=b.n(c);c=b(15);var m=b(99),n=b(30),k=b(325),l=b(126),h=Object(c.a)(function(e,d){var g=e.settings.utils.request,u=Object(l.a)(e),x=new q.a,y=d.data.results.filter(function(B){return B.orgId&&!e.results.allOrganizations[B.orgId]}).map(function(B){return B.orgId}).filter(m.e).map(function(B){return Object(n.m)(g,u,B)});return t()(y).then(function(B){x.resolve(Object(p.a)(Object(p.a)({},
d),{data:Object(p.a)(Object(p.a)({},d.data),{organizations:B.reduce(function(C,z){var D;return Object(p.a)(Object(p.a)({},C),((D={})[z.id]=Object(k.a)(z),D))},{})})}))},function(B){x.reject(B)}),x})},227:function(c,a,b){b.d(a,"a",function(){return t});var p=b(0),q=b(101),t=function(m){var n=Object(p.a),k=Object(p.a)({},m),l=Object(q.a)(m);return n(k,{thumbURI:m.thumbnail?l+"/sharing/rest/portals/"+m.id+"/resources/"+m.thumbnail:l+"/home/images/group-no-image.png"})}},228:function(c,a,b){b.d(a,"a",
function(){return t});var p=b(0),q=b(101),t=function(m){return Object(p.a)(Object(p.a)({},m),{orgUrl:Object(q.a)(m)+"/home/index.html"})}},231:function(c,a){c.exports=f},256:function(c,a,b){b.d(a,"a",function(){return m});b.d(a,"b",function(){return n});b.d(a,"c",function(){return k});b.d(a,"d",function(){return l});c=b(56);var p=b.n(c),q=b(30),t=b(78),m="UPDATE_PROVISIONED_CONTENT",n="UPDATE_PROVISIONED_CONTENT_FAILED",k="UPDATE_PROVISIONED_CONTENT_SUCCESS",l=function(){return function(h,e){var d=
e();if("loaded"===d.results.provisionedContent.status)return(new p.a).resolve();if("failed"===d.results.provisionedContent.status)return(new p.a).reject();h({type:m});var g=d.settings.utils,u=g.portal;return Object(q.d)(g.request,u,u.user.username).then(function(x){h({type:k,payload:x.filter(function(y){return-1<d.settings.config.allowedItemTypes.indexOf(y.type)}).map(function(y){return Object(t.a)(u,d.settings.utils.iconDir,y)})})},function(x){h({type:n})})}}},264:function(c,a,b){b.d(a,"a",function(){return l});
b.d(a,"c",function(){return h});b.d(a,"d",function(){return e});b.d(a,"b",function(){return d});b.d(a,"e",function(){return g});var p=b(0);c=b(65);var q=b.n(c);c=b(56);var t=b.n(c),m=b(99),n=b(30);c=b(15);var k=b(86),l="LOADING_CUSTOM_SECTION_INFO",h="UPDATE_CUSTOM_SECTION_SCHEMAS",e="UPDATE_CUSTOM_SECTION_INFO_FAILED",d="UPDATE_CUSTOM_SECTION_GROUPS",g=function(){return function(y,B){function C(E){y({type:e})}var z=B();if("loaded"===z.results.customSections.status)return(new t.a).resolve();if("failed"===
z.results.customSections.status)return(new t.a).reject();y({type:l});var D=Object(m.f)("id",z.settings.config.customSections.filter(k.f).map(k.a).reduce(function(E,A){return Object(p.g)(Object(p.g)([],E),A)},[]));return u(y,B,D).then(function(){return z=B(),q()(D.map(function(E){return x(z,E).then(function(A){return{id:E.id,type:E.type,response:A}})}))},C).then(function(E){return y({type:h,payload:E})},C)}},u=function(y,B,C){var z=B(),D=new t.a;if(0<C.length){z=z.settings.utils;var E=z.request,A=
z.portal;C=C.filter(function(F){return"group"===F.type}).map(function(F){var H=F.id;return Object(n.e)(E,A,F.fetchGroupIdByQuery||"id:"+H).then(function(I){return I.results[0]||{}})});q()(C).then(function(F){var H=B();y({type:d,payload:{currentSection:H.parameters.section,customSections:H.settings.config.customSections,groups:F}});D.resolve()})}else D.resolve();return D},x=Object(c.a)(function(y,B){var C=y.settings.utils,z=C.request;C=C.portal;return B.staticSchema?(z=new t.a,z.resolve({categorySchema:B.staticSchema}),
z.then(function(D){return D})):"group"===B.type?Object(n.f)(z,C,B.id):Object(n.j)(z,C,B.id)})},265:function(c,a,b){function p(n){if(0<n.length){var k=t.a.filter(function(l){return-1===n.indexOf(l)}).filter(function(l){return n.reduce(function(h,e){return-1<l.indexOf(e)||h},!1)});return'((type:"'+n.join('" OR type:"')+'")'+(0<k.length?' AND (-type:"'+k.join('" AND -type:"')+'")':"")+")"}return""}b.d(a,"a",function(){return m});var q=b(0),t=b(141);c=b(15);var m=Object(c.a)(function(n,k,l){var h=k.itemTypeFilter,
e=k.allowedItemTypes;k=k.specialItemQ;return h?0<e.length&&k?Object(q.g)(Object(q.g)([],l),[n[h.value]+" AND ("+k+" OR ("+p(e)+"))"]):0<e.length||k?Object(q.g)(Object(q.g)([],l),[n[h.value]+" AND ("+(k?""+k:""+p(e))+")"]):Object(q.g)(Object(q.g)([],l),[""+n[h.value]]):k?Object(q.g)(Object(q.g)([],l),["("+k+") "+(0<e.length?"OR ("+p(e)+")":"")]):Object(q.g)(Object(q.g)([],l),[p(e)])})},266:function(c,a,b){b.d(a,"a",function(){return m});b.d(a,"b",function(){return n});b.d(a,"c",function(){return k});
b.d(a,"d",function(){return l});c=b(65);var p=b.n(c);c=b(56);var q=b.n(c),t=b(30),m="LOADING_ORG_INFO",n="UPDATE_ORG_INFO",k="UPDATE_ORG_INFO_FAILED",l=function(){return function(h,e){var d=e();if("loaded"===d.results.organization.status)return(new q.a).resolve();if("failed"===d.results.organization.status)return(new q.a).reject();h({type:m});var g=d.settings.utils;d=g.request;g=g.portal;var u=[Object(t.j)(d,g).then(function(x){return x.categorySchema}),Object(t.c)(d,g).then(function(x){return x.data.results})];
return g.isPortal&&u.push(Object(t.o)(d,g).then(function(x){return x.servers})),p()(u).then(function(x){h({type:n,payload:{schema:x[0],groups:x[1],servers:x[2]}})},function(x){h({type:k})})}}},28:function(c,a,b){(function(p,q){c.exports=function(){function t(){var W=setTimeout;return function(){return W(m,1)}}function m(){for(var W=0;W<D;W+=2)(0,O[W])(O[W+1]),O[W]=void 0,O[W+1]=void 0;D=0}function n(W,Q){var ia=this,R=new this.constructor(l);void 0===R[la]&&C(R);var S=ia._state;if(S){var N=arguments[S-
1];F(function(){return B(S,R,N,ia._result)})}else x(ia,R,W,Q);return R}function k(W){if(W&&"object"==typeof W&&W.constructor===this)return W;var Q=new this(l);return e(Q,W),Q}function l(){}function h(W,Q,ia){Q.constructor===W.constructor&&ia===n&&Q.constructor.resolve===k?function(R,S){1===S._state?g(R,S._result):2===S._state?u(R,S._result):x(S,void 0,function(N){return e(R,N)},function(N){return u(R,N)})}(W,Q):void 0===ia?g(W,Q):"function"==typeof ia?function(R,S,N){F(function(X){var aa=!1,ea=function(Y,
T,ca,M){try{Y.call(T,ca,M)}catch(U){return U}}(N,S,function(Y){aa||(aa=!0,S!==Y?e(X,Y):g(X,Y))},function(Y){aa||(aa=!0,u(X,Y))},X._label);!aa&&ea&&(aa=!0,u(X,ea))},R)}(W,Q,ia):g(W,Q)}function e(W,Q){if(W===Q)u(W,new TypeError("You cannot resolve a promise with itself"));else if(R=typeof(ia=Q),null===ia||"object"!==R&&"function"!==R)g(W,Q);else{ia=void 0;try{ia=Q.then}catch(S){return void u(W,S)}h(W,Q,ia)}var ia,R}function d(W){W._onerror&&W._onerror(W._result);y(W)}function g(W,Q){void 0===W._state&&
(W._result=Q,W._state=1,0!==W._subscribers.length&&F(y,W))}function u(W,Q){void 0===W._state&&(W._state=2,W._result=Q,F(d,W))}function x(W,Q,ia,R){var S=W._subscribers,N=S.length;W._onerror=null;S[N]=Q;S[N+1]=ia;S[N+2]=R;0===N&&W._state&&F(y,W)}function y(W){var Q=W._subscribers,ia=W._state;if(0!==Q.length){for(var R=void 0,S=void 0,N=W._result,X=0;X<Q.length;X+=3)R=Q[X],S=Q[X+ia],R?B(ia,R,S,N):S(N);W._subscribers.length=0}}function B(W,Q,ia,R){var S="function"==typeof ia,N=void 0,X=void 0,aa=!0;
if(S){try{N=ia(R)}catch(ea){aa=!1,X=ea}if(Q===N)return void u(Q,new TypeError("A promises callback cannot return that same promise."))}else N=R;void 0!==Q._state||(S&&aa?e(Q,N):!1===aa?u(Q,X):1===W?g(Q,N):2===W&&u(Q,N))}function C(W){W[la]=ma++;W._state=void 0;W._result=void 0;W._subscribers=[]}var z=Array.isArray?Array.isArray:function(W){return"[object Array]"===Object.prototype.toString.call(W)},D=0,E=void 0,A=void 0,F=function(W,Q){O[D]=W;O[D+1]=Q;2===(D+=2)&&(A?A(m):ka())},H="undefined"!=typeof window?
window:void 0,I=H||{};I=I.MutationObserver||I.WebKitMutationObserver;var L="undefined"==typeof self&&void 0!==p&&"[object process]"==={}.toString.call(p),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=Array(1E3),P,fa,V,ba,ka=void 0;L?ka=function(){return p.nextTick(m)}:I?(fa=0,V=new I(m),ba=document.createTextNode(""),V.observe(ba,{characterData:!0}),ka=function(){ba.data=fa=++fa%2}):J?((P=new MessageChannel).port1.onmessage=m,ka=function(){return P.port2.postMessage(0)}):
ka=void 0===H?function(){try{var W=Function("return this")().require("vertx");return void 0!==(E=W.runOnLoop||W.runOnContext)?function(){E(m)}:t()}catch(Q){return t()}}():t();var la=Math.random().toString(36).substring(2),ma=0,ha=function(){function W(Q,ia){this._instanceConstructor=Q;this.promise=new Q(l);this.promise[la]||C(this.promise);z(ia)?(this.length=ia.length,this._remaining=ia.length,this._result=Array(this.length),0===this.length?g(this.promise,this._result):(this.length=this.length||0,
this._enumerate(ia),0===this._remaining&&g(this.promise,this._result))):u(this.promise,Error("Array Methods must be provided an Array"))}return W.prototype._enumerate=function(Q){for(var ia=0;void 0===this._state&&ia<Q.length;ia++)this._eachEntry(Q[ia],ia)},W.prototype._eachEntry=function(Q,ia){var R=this._instanceConstructor,S=R.resolve;if(S===k){var N=S=void 0,X=!1;try{S=Q.then}catch(aa){X=!0,N=aa}S===n&&void 0!==Q._state?this._settledAt(Q._state,ia,Q._result):"function"!=typeof S?(this._remaining--,
this._result[ia]=Q):R===Z?(R=new R(l),X?u(R,N):h(R,Q,S),this._willSettleAt(R,ia)):this._willSettleAt(new R(function(aa){return aa(Q)}),ia)}else this._willSettleAt(S(Q),ia)},W.prototype._settledAt=function(Q,ia,R){var S=this.promise;void 0===S._state&&(this._remaining--,2===Q?u(S,R):this._result[ia]=R);0===this._remaining&&g(S,this._result)},W.prototype._willSettleAt=function(Q,ia){var R=this;x(Q,void 0,function(S){return R._settledAt(1,ia,S)},function(S){return R._settledAt(2,ia,S)})},W}(),Z=function(){function W(Q){this[la]=
ma++;this._result=this._state=void 0;this._subscribers=[];if(l!==Q){if("function"!=typeof Q)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof W)(function(ia,R){try{R(function(S){e(ia,S)},function(S){u(ia,S)})}catch(S){u(ia,S)}})(this,Q);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return W.prototype["catch"]=function(Q){return this.then(null,
Q)},W.prototype["finally"]=function(Q){var ia=this.constructor;return"function"==typeof Q?this.then(function(R){return ia.resolve(Q()).then(function(){return R})},function(R){return ia.resolve(Q()).then(function(){throw R;})}):this.then(Q,Q)},W}();return Z.prototype.then=n,Z.all=function(W){return(new ha(this,W)).promise},Z.race=function(W){var Q=this;return z(W)?new Q(function(ia,R){for(var S=W.length,N=0;N<S;N++)Q.resolve(W[N]).then(ia,R)}):new Q(function(ia,R){return R(new TypeError("You must pass an array to race."))})},
Z.resolve=k,Z.reject=function(W){var Q=new this(l);return u(Q,W),Q},Z._setScheduler=function(W){A=W},Z._setAsap=function(W){F=W},Z._asap=F,Z.polyfill=function(){var W=void 0;if(void 0!==q)W=q;else if("undefined"!=typeof self)W=self;else try{W=Function("return this")()}catch(R){throw Error("polyfill failed because global object is unavailable in this environment");}var Q=W.Promise;if(Q){var ia=null;try{ia=Object.prototype.toString.call(Q.resolve())}catch(R){}if("[object Promise]"===ia&&!Q.cast)return}W.Promise=
Z},Z.Promise=Z,Z}()}).call(this,b(189),b(170))},286:function(c,a,b){b.d(a,"b",function(){return h});b.d(a,"a",function(){return e});b.d(a,"c",function(){return d});var p=b(0);c=b(65);var q=b.n(c);c=b(56);var t=b.n(c),m=b(30),n=b(51),k=b(78),l=b(126),h="UPDATE_FULL_ITEM_DETAILS",e="FETCH_FULL_ITEM_DETAILS_FAILED",d=function(g){return function(u,x){var y=x(),B=Object(l.a)(y),C=y.settings.utils.request,z=[];z.push(Object(m.r)(C,B,g.owner).then(function(E){return Object(n.m)(B,E)},function(E){throw E;
}));var D=B.restUrl+"/content/items/"+g.id;B.user&&g.owner===B.user.username&&(D=B.restUrl+"/content/users/"+B.user.username+"/items/"+g.id);z.push(Object(m.v)(C,D).then(function(E){if(E.item&&E.sharing){var A=new t.a;return Object(m.v)(C,B.restUrl+"/community/groups",{q:"id: "+E.sharing.groups.map(function(F){return'"'+F+'"'}).join(" OR ")}).then(function(F){return A.resolve(Object(p.a)(Object(p.a)({},Object(k.a)(B,y.settings.utils.iconDir,E.item)),{sharing:E.sharing,sharedToGroups:F.results}))},
function(F){return A.reject(F)}),A}return Object(k.a)(B,y.settings.utils.iconDir,E)},function(E){throw g.id;}));q()(z).then(function(E){u({type:h,payload:{item:E[1],owner:E[0]}})},function(E){u({type:e,payload:E})})}}},288:function(c,a,b){b.d(a,"a",function(){return p});b.d(a,"b",function(){return q});var p="CHANGE_SEARCH_SECTION",q=function(t){return function(m,n){var k=n();m({type:p,payload:{newSection:t,customSections:k.settings.config.customSections,customSectionGroupSort:k.results.customSections.groupSort}})}}},
290:function(c,a,b){b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});b.d(a,"d",function(){return t});b.d(a,"c",function(){return m});var p="CHANGE_SORT_ORDER",q="CHANGE_SORT_FIELD",t=function(n){return{type:p,payload:n}},m=function(n){return{type:q,payload:n}}},295:function(c,a,b){b.d(a,"b",function(){return n});b.d(a,"a",function(){return k});b.d(a,"c",function(){return l});b.d(a,"d",function(){return h});var p=b(162),q=b(78),t=b(217),m=b(199),n="CHANGE_PAGE_SUCCESS",k="CHANGE_PAGE_FAIL",
l="CHANGING_PAGE",h=function(e){return function(d,g){var u=g();d({type:l,payload:e});var x=u.settings.utils,y=x.portal,B=x.iconDir;x=u.settings.utils.request;var C=u.settings.config.resultsPerQuery;C=Object(p.b)({num:C,start:(e-1)*C+1},u);x(C[0],C[1]).then(Object(t.a)(u),function(z){return d({type:k,payload:{err:z}})}).then(function(z){d({type:n,payload:{organizations:z.data.organizations,displayItems:z.data.results.map(function(D){return Object(q.a)(y,B,D)}),page:e}});d(m.e)},function(z){return d({type:k,
payload:{err:z}})})}}},30:function(c,a,b){function p(O){return O.reduce(function(P,fa){return fa&&fa.relatedItems?P.concat(fa.relatedItems.map(function(V){return V})):P},[])}function q(O,P,fa){return O(P,{query:Object(n.a)({f:"json"},fa)}).then(function(V){return V.data})}function t(O,P){void 0===P&&(P=100);for(var fa=[],V=0;V<Math.ceil(O.length/P);V++)fa.push(O.slice(V*P,(V+1)*P));return fa.filter(function(ba){return 0<ba.length})}function m(O){var P=O.itemIds,fa=O.request,V=O.groupIds,ba=O.portal.restUrl+
"/content/itemsgroups";return new k.Promise(function(ka,la){fa(ba,{method:"get",query:{f:"json",items:P,groups:V}}).then(function(ma){ka(ma.data)},la)})}b.d(a,"u",function(){return l});b.d(a,"n",function(){return h});b.d(a,"h",function(){return e});b.d(a,"e",function(){return d});b.d(a,"f",function(){return g});b.d(a,"j",function(){return u});b.d(a,"o",function(){return x});b.d(a,"l",function(){return y});b.d(a,"k",function(){return B});b.d(a,"m",function(){return C});b.d(a,"c",function(){return z});
b.d(a,"d",function(){return D});b.d(a,"r",function(){return E});b.d(a,"s",function(){return A});b.d(a,"t",function(){return F});b.d(a,"g",function(){return H});b.d(a,"p",function(){return I});b.d(a,"q",function(){return L});b.d(a,"v",function(){return q});b.d(a,"a",function(){return t});b.d(a,"i",function(){return m});b.d(a,"b",function(){return J});var n=b(0),k=b(28),l=function(O){return function(P,fa){return O({url:P,content:fa.query},{usePost:"post"===fa.method}).then(function(V){return{data:V}})}},
h=function(O,P,fa){return q(O,P.restUrl+"/portals/self",{culture:fa,"default":!0})},e=function(O,P,fa){return q(O,P.restUrl+"/content/items/"+fa+"/data")},d=function(O,P,fa,V){return q(O,P.restUrl+"/community/groups",Object(n.a)({q:fa},V))},g=function(O,P,fa){return q(O,P.restUrl+"/community/groups/"+fa+"/categorySchema")},u=function(O,P,fa){return q(O,P.restUrl+"/portals/"+(fa||P.id)+"/categorySchema")},x=function(O,P){return q(O,P.restUrl+"/portals/"+P.id+"/servers")},y=function(O,P,fa,V){return O(P.restUrl+
"/portals/"+(fa||P.id)+"/collaborationsSummary",V)},B=function(O,P,fa,V){return O(P.restUrl+"/portals/"+(fa||P.id)+"/collaboratedItems",V)},C=function(O,P,fa){return q(O,location.protocol+"//"+P.portalHostname+"/sharing/rest/portals/"+(fa||"self"))},z=function(O,P,fa){return O(P.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+P.id+" AND access:public",num:100,start:fa||1,sortField:"title",sortOrder:"asc"}}).then(function(V){return V.data.total>V.data.start+V.data.num?z(O,P,V.data.start+V.data.num).then(function(ba){return Object(n.a)(Object(n.a)({},
ba),{data:Object(n.a)(Object(n.a)({},ba.data),{results:V.data.results.concat(ba.data.results)})})}):V})},D=function(O,P,fa,V){return O(P.restUrl+"/community/users/"+fa+"/provisionedListings",{query:{f:"json",num:100,start:V||1}}).then(function(ba){var ka=k.Promise.all(ba.data.provisionedListings.filter(function(ma){return ma.itemId}).map(function(ma){return(new k.Promise(function(ha,Z){O(P.restUrl+"/content/items/"+ma.itemId,{method:"get",query:{f:"json"}}).then(function(W){ha(W.data)},Z)}))["catch"](function(ha){return 0})})),
la=ba.data.provisionedListings.map(function(ma){return q(O,P.restUrl+"/content/items/"+(ma.id||ma.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(ha){return ha},function(ha){})});return ba.data.total>ba.data.start+ba.data.num?D(O,P,fa,ba.data.start+ba.data.num).then(function(ma){return k.Promise.all([ka].concat(la)).then(function(ha){return ha[0].results.concat(p(ha.slice(1))).concat(ma)})}):k.Promise.all([ka].concat(la)).then(function(ma){return ma[0].filter(function(ha){return void 0!==
ha}).concat(p(ma.slice(1)))})})},E=function(O,P,fa){return q(O,P.restUrl+"/community/users/"+(fa||P.user.username))},A=function(O,P,fa){return q(O,P.restUrl+"/content/users/"+(fa||P.user.username),{num:1})},F=function(O,P,fa){return q(O,P.restUrl+"/content/groups/"+fa)},H=function(O,P,fa){return q(O,P.restUrl+"/community/groups",fa)},I=function(O,P){return q(O,P.restUrl+"/portals/self/settings")},L=function(O,P){return q(O,P.restUrl+"/portals/self/trustedOrgs",{num:100})},J=function(O,P){return void 0===
P&&(P=","),O.map(function(fa){return fa.id}).join(P)}},309:function(c,a,b){function p(q,t,m){return Promise.all(q.map(function(n){return function(k,l,h){return new Promise(function(e,d){h(l.restUrl+"/community/users/"+k,{method:"get",query:{f:"json"}}).then(function(g){return e(null==g?void 0:g.data)},d)})}(n,t,m)}))}b.d(a,"a",function(){return p})},323:function(c,a,b){b.d(a,"b",function(){return q});b.d(a,"a",function(){return t});var p=b(0);c=b(15);c=Object(c.a)(function(m,n,k){return n?Object(p.g)(Object(p.g)([],
k),["("+m+":["+(n.start+" TO "+n.end+"])")]):k});var q=c("modified"),t=c("uploaded")},324:function(c,a,b){b.d(a,"b",function(){return q});b.d(a,"a",function(){return t});var p=b(0);c=b(15);var q=Object(c.a)(function(m,n){if(m){var k=Object.keys(m);if(0<k.length)return Object(p.g)(Object(p.g)([],n),["tags:("+k.join(" AND ")+")"])}return n}),t=Object(c.a)(function(m,n){return 2<m.length?Object(p.g)(Object(p.g)([],n),["tags:("+m+"* OR "+m+")"]):n})},325:function(c,a,b){b.d(a,"a",function(){return q});
c=b(63);a=b(101);var p=b(227);b=b(228);var q=Object(c.a)(p.a,b.a,a.b)},326:function(c,a,b){b.d(a,"a",function(){return n});b.d(a,"b",function(){return k});c=b(56);var p=b.n(c),q=b(30),t=b(325),m=b(150),n="UPDATE_PORTAL_SELF",k=function(){return function(l,h){var e=h(),d=e.settings.utils,g=d.portal;d=d.request;var u=g.user&&g.user.culture?g.user.culture:m.locale;return e.settings.utils.self?(new p.a).resolve(e.settings.utils.self):Object(q.n)(d,g,u).then(function(x){x=Object(t.a)(x);return l({type:n,
payload:{self:x,config:e.settings.config}}),x})}}},327:function(c,a,b){b.d(a,"a",function(){return k});b.d(a,"b",function(){return l});b.d(a,"c",function(){return h});b.d(a,"d",function(){return e});var p=b(0),q=b(36);c=b(56);var t=b.n(c),m=b(150),n=b(402),k="LOADING_LIVING_ATLAS_INFO",l="UPDATE_LIVING_ATLAS_INFO",h="FETCH_LIVING_ATLAS_INFO_FAILED",e=function(d){return function(g,u){var x=u();if("loaded"===x.results.livingAtlas.status)return(new t.a).resolve();if("failed"===x.results.livingAtlas.status)return(new t.a).reject();
g({type:k});x=x.settings.utils;var y=x.portal;return Object(n.a)(x.request,y,d,y.user&&y.user.culture?y.user.culture:m.locale).then(function(B){g({type:l,payload:Object(p.a)(Object(p.a)({},B),{schema:B.schema.map(function(C){return"region"===C.title?Object(p.a)(Object(p.a)({},C),{displayName:q.regions}):C})})})},function(B){g({type:h})})}}},328:function(c,a,b){b.d(a,"a",function(){return n});var p=b(30),q=b(49);c=b(65);var t=b.n(c),m=function(k,l,h){k({type:"LOADING_COLLABORATIONS"});var e=[];Object.keys(h).forEach(function(g){e[g]=
[];0<h[g].participants.length&&h[g].participants.forEach(function(u){e[u.value]=[]})});var d=Object.keys(e).map(function(g){g=g.split("__");var u=g[0],x=g[1]?g[1]:"";return Object(p.k)(l.settings.utils.request,l.settings.utils.portal,l.settings.utils.portal.id,{query:""!==x?{collaborationId:u,participantId:x,f:"json"}:{collaborationId:u,f:"json"}}).then(function(y){(y.data.collaboratedItems||y.collaboratedItems).forEach(function(B){if(x){var C=u+"__"+x;h[u].participants.filter(function(z){return z.value===
C})[0].items.push(Object.keys(B)[0])}else h[u].items.push(Object.keys(B)[0])})},function(){return k({type:"LOADING_COLLABORATIONS_FAILED"})})});return t()(d).then(function(){k(Object(q.s)(h));k({type:"LOADING_COLLABORATIONS_SUCCESS",payload:h})})},n=function(k,l){if(k({type:"LOADING_COLLABORATIONS"}),l&&l.parameters&&l.parameters.filter&&l.parameters.filter.origins&&0<Object.keys(l.parameters.filter.origins).length){var h=l.parameters.filter.origins;return k(Object(q.s)(h)),{type:"LOADING_COLLABORATIONS_SUCCESS",
payload:h}}return Object(p.l)(l.settings.utils.request,l.settings.utils.portal,l.settings.utils.portal.id,{query:{includeParticipantInfo:"true",f:"json"}}).then(function(e){var d=[];e.data&&e.data.collaborations&&e.data.collaborations.forEach(function(g){var u=g.collaborationId,x=g.collaborationName.trim();d[u]={value:u,label:x,addClass:"",childOf:"",selected:!1,participants:[],items:[]};g.participants&&(d[u].participants=g.participants.map(function(y){return 1===(y=Object.keys(y).map(function(B){var C=
y[B].trim();return{value:u+"__"+B,label:C,childOf:u,addClass:"filter-tree-item-child",selected:!1,items:[]}})).length?y[0]:y}))});m(k,l,d).then(function(){return k(Object(q.s)(d))},function(){return k({type:"LOADING_COLLABORATIONS_FAILED"})})},function(e){return k({type:"LOADING_COLLABORATIONS_FAILED",payload:e})})}},329:function(c,a,b){function p(q){return"string"==typeof q?-1<["myContent","myFavorites","myGroups","myOrganization","livingAtlas"].indexOf(q):!!q.filters&&-1<q.filters.indexOf("tags")}
b.d(a,"a",function(){return p})},336:function(c,a,b){(function(p,q){function t(qa,za){return qa.set(za[0],za[1]),qa}function m(qa,za){return qa.add(za),qa}function n(qa,za,va,pa){var sa=-1,ya=qa?qa.length:0;for(pa&&ya&&(va=qa[++sa]);++sa<ya;)va=za(va,qa[sa],sa,qa);return va}function k(qa){var za=!1;if(null!=qa&&"function"!=typeof qa.toString)try{za=!!(qa+"")}catch(va){}return za}function l(qa){var za=-1,va=Array(qa.size);return qa.forEach(function(pa,sa){va[++za]=[sa,pa]}),va}function h(qa,za){return function(va){return qa(za(va))}}
function e(qa){var za=-1,va=Array(qa.size);return qa.forEach(function(pa){va[++za]=pa}),va}function d(qa){var za=-1,va=qa?qa.length:0;for(this.clear();++za<va;){var pa=qa[za];this.set(pa[0],pa[1])}}function g(qa){var za=-1,va=qa?qa.length:0;for(this.clear();++za<va;){var pa=qa[za];this.set(pa[0],pa[1])}}function u(qa){var za=-1,va=qa?qa.length:0;for(this.clear();++za<va;){var pa=qa[za];this.set(pa[0],pa[1])}}function x(qa){this.__data__=new g(qa)}function y(qa,za){var va=Ca(qa)||function(Ha){return!!Ha&&
"object"==typeof Ha&&J(Ha)&&X.call(Ha,"callee")&&(!M.call(Ha,"callee")||"[object Arguments]"==aa.call(Ha))}(qa)?function(Ha,Ea){for(var Aa=-1,Fa=Array(Ha);++Aa<Ha;)Fa[Aa]=Ea(Aa);return Fa}(qa.length,String):[],pa=va.length,sa=!!pa,ya;for(ya in qa)!za&&!X.call(qa,ya)||sa&&("length"==ya||H(ya,pa))||va.push(ya);return va}function B(qa,za,va){var pa=qa[za];X.call(qa,za)&&(pa===va||pa!=pa&&va!=va)&&(void 0!==va||za in qa)||(qa[za]=va)}function C(qa,za){for(var va=qa.length;va--;){var pa=qa[va][0];if(pa===
za||pa!=pa&&za!=za)return va}return-1}function z(qa,za,va,pa,sa,ya,Ha){var Ea;if(pa&&(Ea=ya?pa(qa,sa,ya,Ha):pa(qa)),void 0!==Ea)return Ea;if(!P(qa))return qa;if(sa=Ca(qa)){if(Ea=function(Ia){var Oa=Ia.length,Ja=Ia.constructor(Oa);Oa&&"string"==typeof Ia[0]&&X.call(Ia,"index")&&(Ja.index=Ia.index,Ja.input=Ia.input);return Ja}(qa),!za)return function(Ia,Oa){var Ja=-1,Ma=Ia.length;for(Oa||(Oa=Array(Ma));++Ja<Ma;)Oa[Ja]=Ia[Ja];return Oa}(qa,Ea)}else{var Aa=xa(qa),Fa="[object Function]"==Aa||"[object GeneratorFunction]"==
Aa;if(ta(qa))return function(Ia,Oa){if(Oa)return Ia.slice();var Ja=new Ia.constructor(Ia.length);return Ia.copy(Ja),Ja}(qa,za);if("[object Object]"==Aa||"[object Arguments]"==Aa||Fa&&!ya){if(k(qa))return ya?qa:{};if(Ea=function(Ia){return"function"!=typeof Ia.constructor||I(Ia)?{}:(Oa=T(Ia),P(Oa)?ca(Oa):{});var Oa}(Fa?{}:qa),!za)return function(Ia,Oa){return E(Ia,Ga(Ia),Oa)}(qa,function(Ia,Oa){return Ia&&E(Oa,fa(Oa),Ia)}(Ea,qa))}else{if(!la[Aa])return ya?qa:{};Ea=function(Ia,Oa,Ja,Ma){var Na=Ia.constructor;
switch(Oa){case "[object ArrayBuffer]":return D(Ia);case "[object Boolean]":case "[object Date]":return new Na(+Ia);case "[object DataView]":return function(Qa,Ra){var Sa=Ra?D(Qa.buffer):Qa.buffer;return new Qa.constructor(Sa,Qa.byteOffset,Qa.byteLength)}(Ia,Ma);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return function(Qa,
Ra){var Sa=Ra?D(Qa.buffer):Qa.buffer;return new Qa.constructor(Sa,Qa.byteOffset,Qa.length)}(Ia,Ma);case "[object Map]":return function(Qa,Ra,Sa){return n(Ra?Sa(l(Qa),!0):l(Qa),t,new Qa.constructor)}(Ia,Ma,Ja);case "[object Number]":case "[object String]":return new Na(Ia);case "[object RegExp]":return function(Qa){var Ra=new Qa.constructor(Qa.source,V.exec(Qa));return Ra.lastIndex=Qa.lastIndex,Ra}(Ia);case "[object Set]":return function(Qa,Ra,Sa){return n(Ra?Sa(e(Qa),!0):e(Qa),m,new Qa.constructor)}(Ia,
Ma,Ja);case "[object Symbol]":return Pa=Ia,La?Object(La.call(Pa)):{}}var Pa}(qa,Aa,z,za)}}Ha||(Ha=new x);if(ya=Ha.get(qa))return ya;if(Ha.set(qa,Ea),!sa)var Ka=va?function(Ia){var Oa=Ga,Ja=fa(Ia);if(!Ca(Ia)){Ia=Oa(Ia);Oa=-1;for(var Ma=Ia.length,Na=Ja.length;++Oa<Ma;)Ja[Na+Oa]=Ia[Oa]}return Ja}(qa):fa(qa);return function(Ia,Oa){for(var Ja=-1,Ma=Ia?Ia.length:0;++Ja<Ma&&!1!==Oa(Ia[Ja],Ja,Ia););}(Ka||qa,function(Ia,Oa){Ka&&(Ia=qa[Oa=Ia]);B(Ea,Oa,z(Ia,za,va,pa,Oa,qa,Ha))}),Ea}function D(qa){var za=new qa.constructor(qa.byteLength);
return(new Y(za)).set(new Y(qa)),za}function E(qa,za,va,pa){va||(va={});for(var sa=-1,ya=za.length;++sa<ya;){var Ha=za[sa],Ea=pa?pa(va[Ha],qa[Ha],Ha,va,qa):void 0;B(va,Ha,void 0===Ea?qa[Ha]:Ea)}return va}function A(qa,za){var va,pa=qa.__data__;return("string"==(va=typeof za)||"number"==va||"symbol"==va||"boolean"==va?"__proto__"!==za:null===za)?pa["string"==typeof za?"string":"hash"]:pa.map}function F(qa,za){var va=null==qa?void 0:qa[za];a:{var pa=!(!P(va)||(sa=va,S&&S in sa))&&(O(va)||k(va)?ea:ba).test(L(va));
break a;var sa}return pa?va:void 0}function H(qa,za){return!!(za=null==za?9007199254740991:za)&&("number"==typeof qa||ka.test(qa))&&-1<qa&&0==qa%1&&qa<za}function I(qa){var za=qa&&qa.constructor;return qa===("function"==typeof za&&za.prototype||ia)}function L(qa){if(null!=qa){try{return N.call(qa)}catch(za){}return qa+""}return""}function J(qa){var za;if(za=null!=qa)za=qa.length,za="number"==typeof za&&-1<za&&0==za%1&&9007199254740991>=za;return za&&!O(qa)}function O(qa){qa=P(qa)?aa.call(qa):"";return"[object Function]"==
qa||"[object GeneratorFunction]"==qa}function P(qa){var za=typeof qa;return!!qa&&("object"==za||"function"==za)}function fa(qa){if(J(qa))qa=y(qa);else if(I(qa)){var za=[],va;for(va in Object(qa))X.call(qa,va)&&"constructor"!=va&&za.push(va);qa=za}else qa=da(qa);return qa}var V=/\w*$/,ba=/^\[object .+?Constructor\]$/,ka=/^(?:0|[1-9]\d*)$/,la={};la["[object Arguments]"]=la["[object Array]"]=la["[object ArrayBuffer]"]=la["[object DataView]"]=la["[object Boolean]"]=la["[object Date]"]=la["[object Float32Array]"]=
la["[object Float64Array]"]=la["[object Int8Array]"]=la["[object Int16Array]"]=la["[object Int32Array]"]=la["[object Map]"]=la["[object Number]"]=la["[object Object]"]=la["[object RegExp]"]=la["[object Set]"]=la["[object String]"]=la["[object Symbol]"]=la["[object Uint8Array]"]=la["[object Uint8ClampedArray]"]=la["[object Uint16Array]"]=la["[object Uint32Array]"]=!0;la["[object Error]"]=la["[object Function]"]=la["[object WeakMap]"]=!1;var ma="object"==typeof self&&self&&self.Object===Object&&self;
ma="object"==typeof p&&p&&p.Object===Object&&p||ma||Function("return this")();var ha=a&&!a.nodeType&&a,Z=ha&&"object"==typeof q&&q&&!q.nodeType&&q;Z=Z&&Z.exports===ha;var W;ha=Array.prototype;var Q=Function.prototype,ia=Object.prototype,R=ma["__core-js_shared__"],S=(W=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",N=Q.toString,X=ia.hasOwnProperty,aa=ia.toString,ea=RegExp("^"+N.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
"$1.*?")+"$");Z=Z?ma.Buffer:void 0;W=ma.Symbol;var Y=ma.Uint8Array,T=h(Object.getPrototypeOf,Object),ca=Object.create,M=ia.propertyIsEnumerable,U=ha.splice;ha=Object.getOwnPropertySymbols;Z=Z?Z.isBuffer:void 0;var da=h(Object.keys,Object);Q=F(ma,"DataView");var ja=F(ma,"Map");R=F(ma,"Promise");var na=F(ma,"Set");ma=F(ma,"WeakMap");var oa=F(Object,"create"),ra=L(Q),ua=L(ja),wa=L(R),Ba=L(na),Da=L(ma),La=(W=W?W.prototype:void 0)?W.valueOf:void 0;d.prototype.clear=function(){this.__data__=oa?oa(null):
{}};d.prototype["delete"]=function(qa){return this.has(qa)&&delete this.__data__[qa]};d.prototype.get=function(qa){var za=this.__data__;return oa?(qa=za[qa],"__lodash_hash_undefined__"===qa?void 0:qa):X.call(za,qa)?za[qa]:void 0};d.prototype.has=function(qa){var za=this.__data__;return oa?void 0!==za[qa]:X.call(za,qa)};d.prototype.set=function(qa,za){return this.__data__[qa]=oa&&void 0===za?"__lodash_hash_undefined__":za,this};g.prototype.clear=function(){this.__data__=[]};g.prototype["delete"]=function(qa){var za=
this.__data__;qa=C(za,qa);return!(0>qa)&&(qa==za.length-1?za.pop():U.call(za,qa,1),!0)};g.prototype.get=function(qa){var za=this.__data__;qa=C(za,qa);return 0>qa?void 0:za[qa][1]};g.prototype.has=function(qa){return-1<C(this.__data__,qa)};g.prototype.set=function(qa,za){var va=this.__data__,pa=C(va,qa);return 0>pa?va.push([qa,za]):va[pa][1]=za,this};u.prototype.clear=function(){this.__data__={hash:new d,map:new (ja||g),string:new d}};u.prototype["delete"]=function(qa){return A(this,qa)["delete"](qa)};
u.prototype.get=function(qa){return A(this,qa).get(qa)};u.prototype.has=function(qa){return A(this,qa).has(qa)};u.prototype.set=function(qa,za){return A(this,qa).set(qa,za),this};x.prototype.clear=function(){this.__data__=new g};x.prototype["delete"]=function(qa){return this.__data__["delete"](qa)};x.prototype.get=function(qa){return this.__data__.get(qa)};x.prototype.has=function(qa){return this.__data__.has(qa)};x.prototype.set=function(qa,za){var va=this.__data__;if(va instanceof g){va=va.__data__;
if(!ja||199>va.length)return va.push([qa,za]),this;va=this.__data__=new u(va)}return va.set(qa,za),this};var Ga=ha?h(ha,Object):function(){return[]},xa=function(qa){return aa.call(qa)};(Q&&"[object DataView]"!=xa(new Q(new ArrayBuffer(1)))||ja&&"[object Map]"!=xa(new ja)||R&&"[object Promise]"!=xa(R.resolve())||na&&"[object Set]"!=xa(new na)||ma&&"[object WeakMap]"!=xa(new ma))&&(xa=function(qa){var za=aa.call(qa);if(qa=(qa="[object Object]"==za?qa.constructor:void 0)?L(qa):void 0)switch(qa){case ra:return"[object DataView]";
case ua:return"[object Map]";case wa:return"[object Promise]";case Ba:return"[object Set]";case Da:return"[object WeakMap]"}return za});var Ca=Array.isArray,ta=Z||function(){return!1};q.exports=function(qa){return z(qa,!0,!0)}}).call(this,b(170),b(366)(c))},356:function(c,a,b){function p(t){var m;t=Object(q.a)(t);return!0===(null===(m=t.portalProperties)||void 0===m?void 0:m.semanticSearchEnabled)||t.portalUser&&!t.portalUser.orgId}b.d(a,"a",function(){return p});var q=b(126)},357:function(c,a,b){b.d(a,
"a",function(){return q});b.d(a,"b",function(){return t});var p=b(286),q="VIEW_ITEM_DETAILS",t=function(m){return function(n){n({type:q,payload:m});n(Object(p.c)(m))}}},36:function(c,a){c.exports=G},366:function(c,a){c.exports=function(b){return b.webpackPolyfill||(b.deprecate=function(){},b.paths=[],b.children||(b.children=[]),Object.defineProperty(b,"loaded",{enumerable:!0,get:function(){return b.l}}),Object.defineProperty(b,"id",{enumerable:!0,get:function(){return b.i}}),b.webpackPolyfill=1),
b}},386:function(c,a,b){(function(p,q){function t(va,pa,sa){switch(sa.length){case 0:return va.call(pa);case 1:return va.call(pa,sa[0]);case 2:return va.call(pa,sa[0],sa[1]);case 3:return va.call(pa,sa[0],sa[1],sa[2])}return va.apply(pa,sa)}function m(va){var pa=-1,sa=null==va?0:va.length;for(this.clear();++pa<sa;){var ya=va[pa];this.set(ya[0],ya[1])}}function n(va){var pa=-1,sa=null==va?0:va.length;for(this.clear();++pa<sa;){var ya=va[pa];this.set(ya[0],ya[1])}}function k(va){var pa=-1,sa=null==
va?0:va.length;for(this.clear();++pa<sa;){var ya=va[pa];this.set(ya[0],ya[1])}}function l(va){this.size=(this.__data__=new n(va)).size}function h(va,pa,sa){(void 0===sa||A(va[pa],sa))&&(void 0!==sa||pa in va)||d(va,pa,sa)}function e(va,pa){for(var sa=va.length;sa--;)if(A(va[sa][0],pa))return sa;return-1}function d(va,pa,sa){"__proto__"==pa&&oa?oa(va,pa,{configurable:!0,enumerable:!0,value:sa,writable:!0}):va[pa]=sa}function g(va){if(null==va)va=void 0===va?"[object Undefined]":"[object Null]";else if(na&&
na in Object(va)){var pa=N.call(va,na),sa=va[na];try{va[na]=void 0;var ya=!0}catch(Ea){}var Ha=aa.call(va);ya&&(pa?va[na]=sa:delete va[na]);va=Ha}else va=aa.call(va);return va}function u(va){return J(va)&&"[object Arguments]"==g(va)}function x(va){return!(!L(va)||X&&X in va)&&(H(va)?Y:fa).test(function(pa){if(null!=pa){try{return S.call(pa)}catch(sa){}return pa+""}return""}(va))}function y(va,pa,sa,ya,Ha){va!==pa&&La(pa,function(Ea,Aa){if(Ha||(Ha=new l),L(Ea))!function(Ka,Ia,Oa,Ja,Ma,Na,Pa){var Qa=
E(Ka,Oa),Ra=E(Ia,Oa),Sa=Pa.get(Ra);if(Sa)return void h(Ka,Oa,Sa);Ia=Na?Na(Qa,Ra,Oa+"",Ka,Ia,Pa):void 0;if(Sa=void 0===Ia){var Ta=Ca(Ra),Xa=!Ta&&ta(Ra),Ua=!Ta&&!Xa&&qa(Ra);Ia=Ra;Ta||Xa||Ua?Ca(Qa)?Ia=Qa:J(cb=Qa)&&F(cb)?Ia=function(Za,bb){var Wa=-1,db=Za.length;for(bb||(bb=Array(db));++Wa<db;)bb[Wa]=Za[Wa];return bb}(Qa):Xa?(Sa=!1,Ia=function(Za,bb){if(bb)return Za.slice();var Wa=Za.length;Wa=ca?ca(Wa):new Za.constructor(Wa);return Za.copy(Wa),Wa}(Ra,!0)):Ua?(Sa=!1,Va=Ra,ab=(Ya=Va.buffer,$a=new Ya.constructor(Ya.byteLength),
(new T($a)).set(new T(Ya)),$a),Ia=new Va.constructor(ab,Va.byteOffset,Va.length)):Ia=[]:function(Za){if(!J(Za)||"[object Object]"!=g(Za))return!1;Za=M(Za);if(null===Za)return!0;Za=N.call(Za,"constructor")&&Za.constructor;return"function"==typeof Za&&Za instanceof Za&&S.call(Za)==ea}(Ra)||xa(Ra)?(Ia=Qa,xa(Qa)?Ia=function(Za){var bb=O(Za),Wa=void 0,db=!Wa;Wa||(Wa={});for(var fb=-1,eb=bb.length;++fb<eb;){var gb=bb[fb],ib=void 0;void 0===ib&&(ib=Za[gb]);if(db)d(Wa,gb,ib);else{var hb=Wa,kb=hb[gb];N.call(hb,
gb)&&A(kb,ib)&&(void 0!==ib||gb in hb)||d(hb,gb,ib)}}return Wa}(Qa):L(Qa)&&!H(Qa)||(Ia=function(Za){return"function"!=typeof Za.constructor||D(Za)?{}:Da(M(Za))}(Ra))):Sa=!1}var Va,ab,Ya,$a,cb;Sa&&(Pa.set(Ra,Ia),Ma(Ia,Ra,Ja,Na,Pa),Pa["delete"](Ra));h(Ka,Oa,Ia)}(va,pa,Aa,sa,y,ya,Ha);else{var Fa=ya?ya(E(va,Aa),Ea,Aa+"",va,pa,Ha):void 0;void 0===Fa&&(Fa=Ea);h(va,Aa,Fa)}},O)}function B(va,pa){var sa,ya=va.__data__;return("string"==(sa=typeof pa)||"number"==sa||"symbol"==sa||"boolean"==sa?"__proto__"!==
pa:null===pa)?ya["string"==typeof pa?"string":"hash"]:ya.map}function C(va,pa){var sa=null==va?void 0:va[pa];return x(sa)?sa:void 0}function z(va,pa){var sa=typeof va;return!!(pa=null==pa?9007199254740991:pa)&&("number"==sa||"symbol"!=sa&&V.test(va))&&-1<va&&0==va%1&&va<pa}function D(va){var pa=va&&va.constructor;return va===("function"==typeof pa&&pa.prototype||R)}function E(va,pa){if(("constructor"!==pa||"function"!=typeof va[pa])&&"__proto__"!=pa)return va[pa]}function A(va,pa){return va===pa||
va!=va&&pa!=pa}function F(va){return null!=va&&I(va.length)&&!H(va)}function H(va){if(!L(va))return!1;va=g(va);return"[object Function]"==va||"[object GeneratorFunction]"==va||"[object AsyncFunction]"==va||"[object Proxy]"==va}function I(va){return"number"==typeof va&&-1<va&&0==va%1&&9007199254740991>=va}function L(va){var pa=typeof va;return null!=va&&("object"==pa||"function"==pa)}function J(va){return null!=va&&"object"==typeof va}function O(va){if(F(va)){var pa=Ca(va),sa=!pa&&xa(va),ya=!pa&&!sa&&
ta(va),Ha=!pa&&!sa&&!ya&&qa(va);if(pa=pa||sa||ya||Ha){sa=va.length;for(var Ea=String,Aa=-1,Fa=Array(sa);++Aa<sa;)Fa[Aa]=Ea(Aa);sa=Fa}else sa=[];Ea=sa.length;for(var Ka in va)pa&&("length"==Ka||ya&&("offset"==Ka||"parent"==Ka)||Ha&&("buffer"==Ka||"byteLength"==Ka||"byteOffset"==Ka)||z(Ka,Ea))||sa.push(Ka);va=sa}else if(L(va)){Ka=D(va);Ha=[];for(ya in va)("constructor"!=ya||!Ka&&N.call(va,ya))&&Ha.push(ya);va=Ha}else{Ka=[];if(null!=va)for(Ha in Object(va))Ka.push(Ha);va=Ka}return va}function P(va){return va}
var fa=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,ba={};ba["[object Float32Array]"]=ba["[object Float64Array]"]=ba["[object Int8Array]"]=ba["[object Int16Array]"]=ba["[object Int32Array]"]=ba["[object Uint8Array]"]=ba["[object Uint8ClampedArray]"]=ba["[object Uint16Array]"]=ba["[object Uint32Array]"]=!0;ba["[object Arguments]"]=ba["[object Array]"]=ba["[object ArrayBuffer]"]=ba["[object Boolean]"]=ba["[object DataView]"]=ba["[object Date]"]=ba["[object Error]"]=ba["[object Function]"]=ba["[object Map]"]=
ba["[object Number]"]=ba["[object Object]"]=ba["[object RegExp]"]=ba["[object Set]"]=ba["[object String]"]=ba["[object WeakMap]"]=!1;var ka="object"==typeof p&&p&&p.Object===Object&&p,la="object"==typeof self&&self&&self.Object===Object&&self;la=ka||la||Function("return this")();var ma=a&&!a.nodeType&&a,ha=ma&&"object"==typeof q&&q&&!q.nodeType&&q;ka=(ma=ha&&ha.exports===ma)&&ka.process;a:{try{var Z=ha&&ha.require&&ha.require("util").types||ka&&ka.binding&&ka.binding("util");break a}catch(va){}Z=
void 0}Z=Z&&Z.isTypedArray;var W,Q,ia;ka=Array.prototype;var R=Object.prototype;ha=la["__core-js_shared__"];var S=Function.prototype.toString,N=R.hasOwnProperty,X=(W=/[^.]+$/.exec(ha&&ha.keys&&ha.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",aa=R.toString,ea=S.call(Object),Y=RegExp("^"+S.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");W=ma?la.Buffer:void 0;ma=la.Symbol;var T=la.Uint8Array,ca=W?W.allocUnsafe:void 0,M=(Q=Object.getPrototypeOf,
ia=Object,function(va){return Q(ia(va))}),U=Object.create,da=R.propertyIsEnumerable,ja=ka.splice,na=ma?ma.toStringTag:void 0,oa=function(){try{var va=C(Object,"defineProperty");return va({},"",{}),va}catch(pa){}}();W=W?W.isBuffer:void 0;var ra=Math.max,ua=Date.now,wa=C(la,"Map"),Ba=C(Object,"create"),Da=function(){function va(){}return function(pa){if(!L(pa))return{};if(U)return U(pa);va.prototype=pa;pa=new va;return va.prototype=void 0,pa}}();m.prototype.clear=function(){this.__data__=Ba?Ba(null):
{};this.size=0};m.prototype["delete"]=function(va){va=this.has(va)&&delete this.__data__[va];return this.size-=va?1:0,va};m.prototype.get=function(va){var pa=this.__data__;return Ba?(va=pa[va],"__lodash_hash_undefined__"===va?void 0:va):N.call(pa,va)?pa[va]:void 0};m.prototype.has=function(va){var pa=this.__data__;return Ba?void 0!==pa[va]:N.call(pa,va)};m.prototype.set=function(va,pa){var sa=this.__data__;return this.size+=this.has(va)?0:1,sa[va]=Ba&&void 0===pa?"__lodash_hash_undefined__":pa,this};
n.prototype.clear=function(){this.__data__=[];this.size=0};n.prototype["delete"]=function(va){var pa=this.__data__;va=e(pa,va);return!(0>va)&&(va==pa.length-1?pa.pop():ja.call(pa,va,1),--this.size,!0)};n.prototype.get=function(va){var pa=this.__data__;va=e(pa,va);return 0>va?void 0:pa[va][1]};n.prototype.has=function(va){return-1<e(this.__data__,va)};n.prototype.set=function(va,pa){var sa=this.__data__,ya=e(sa,va);return 0>ya?(++this.size,sa.push([va,pa])):sa[ya][1]=pa,this};k.prototype.clear=function(){this.size=
0;this.__data__={hash:new m,map:new (wa||n),string:new m}};k.prototype["delete"]=function(va){va=B(this,va)["delete"](va);return this.size-=va?1:0,va};k.prototype.get=function(va){return B(this,va).get(va)};k.prototype.has=function(va){return B(this,va).has(va)};k.prototype.set=function(va,pa){var sa=B(this,va),ya=sa.size;return sa.set(va,pa),this.size+=sa.size==ya?0:1,this};l.prototype.clear=function(){this.__data__=new n;this.size=0};l.prototype["delete"]=function(va){var pa=this.__data__;va=pa["delete"](va);
return this.size=pa.size,va};l.prototype.get=function(va){return this.__data__.get(va)};l.prototype.has=function(va){return this.__data__.has(va)};l.prototype.set=function(va,pa){var sa=this.__data__;if(sa instanceof n){var ya=sa.__data__;if(!wa||199>ya.length)return ya.push([va,pa]),this.size=++sa.size,this;sa=this.__data__=new k(ya)}return sa.set(va,pa),this.size=sa.size,this};var La=function(va,pa,sa){var ya=-1,Ha=Object(va);sa=sa(va);for(var Ea=sa.length;Ea--;){var Aa=sa[++ya];if(!1===pa(Ha[Aa],
Aa,Ha))break}return va},Ga=function(va){var pa=0,sa=0;return function(){var ya=ua(),Ha=16-(ya-sa);if(sa=ya,0<Ha){if(800<=++pa)return arguments[0]}else pa=0;return va.apply(void 0,arguments)}}(oa?function(va,pa){return oa(va,"toString",{configurable:!0,enumerable:!1,value:(sa=pa,function(){return sa}),writable:!0});var sa}:P),xa=u(function(){return arguments}())?u:function(va){return J(va)&&N.call(va,"callee")&&!da.call(va,"callee")},Ca=Array.isArray,ta=W||function(){return!1},qa=Z?function(va){return function(pa){return va(pa)}}(Z):
function(va){return J(va)&&I(va.length)&&!!ba[g(va)]},za;la=(za=function(va,pa,sa,ya){y(va,pa,sa,ya)},function(va,pa){return Ga(function(sa,ya,Ha){return ya=ra(void 0===ya?sa.length-1:ya,0),function(){for(var Ea=arguments,Aa=-1,Fa=ra(Ea.length-ya,0),Ka=Array(Fa);++Aa<Fa;)Ka[Aa]=Ea[ya+Aa];Aa=-1;for(Fa=Array(ya+1);++Aa<ya;)Fa[Aa]=Ea[Aa];return Fa[ya]=Ha(Ka),t(sa,this,Fa)}}(va,pa,P),va+"")}(function(va,pa){var sa=-1,ya=pa.length,Ha=1<ya?pa[ya-1]:void 0,Ea=2<ya?pa[2]:void 0;Ha=3<za.length&&"function"==
typeof Ha?(ya--,Ha):void 0;var Aa;if(Aa=Ea){Aa=pa[0];var Fa=pa[1];if(L(Ea)){var Ka=typeof Fa;Aa=!!("number"==Ka?F(Ea)&&z(Fa,Ea.length):"string"==Ka&&Fa in Ea)&&A(Ea[Fa],Aa)}else Aa=!1}Aa&&(Ha=3>ya?void 0:Ha,ya=1);for(va=Object(va);++sa<ya;)(Ea=pa[sa])&&za(va,Ea,sa,Ha);return va}));q.exports=la}).call(this,b(170),b(366)(c))},398:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){return t?Object(p.g)(Object(p.g)([],m),["(group:"+t.id+")"]):m})},399:function(c,
a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m,n){if(t)switch(t.value){case "authoritative":return m&&m.orgId&&!m.portal.isPortal?Object(p.g)(Object(p.g)([],n),["((contentstatus:org_authoritative orgid:"+m.orgId+") OR contentstatus:public_authoritative)"]):m&&m.orgId&&m.portal.isPortal?Object(p.g)(Object(p.g)([],n),["((contentstatus:org_authoritative) OR contentstatus:public_authoritative)"]):Object(p.g)(Object(p.g)([],n),["(contentstatus:public_authoritative)"]);
case "deprecated":return Object(p.g)(Object(p.g)([],n),["(contentstatus:deprecated)"])}return n})},400:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){return t?Object(p.g)(Object(p.g)([],m),["(access:"+t.value+")"]):m})},401:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){if(t){var n=function(k){for(var l,h=0,e=Object.keys(k);h<e.length;h++){var d=k[e[h]];if(d.selected){l=d.items;break}d=d.participants.filter(function(g){return g.selected});
if(0<d.length){l=d[0].items;break}}return l}(t);if(n)return n=n.join(" OR "),Object(p.g)(Object(p.g)([],m),["id:("+n+")"])}return m})},402:function(c,a,b){b.d(a,"a",function(){return t});c=b(56);var p=b.n(c),q=b(30),t=function(m,n,k,l){function h(A){C=A.categorySchema[0].source.split(".")[1];Object(q.e)(m,n,k.contentCategorySetsGroupQuery).then(e,y);Object(q.v)(m,n.restUrl+"/portals/regions",{culture:l}).then(u,y)}function e(A){A.results[0]?Object(q.v)(m,n.restUrl+"/content/groups/"+A.results[0].id+
"/search",{q:"typekeywords: "+C}).then(d,y):y("The content category sets group could not be found.")}function d(A){1===A.results.length&&A.results[0]?Object(q.h)(m,n,A.results[0].id).then(g,y):y("The item containing the living atlas categories could not be determined.")}function g(A){z=A.categorySchema[0];k.isPortal&&D?x([z]):D&&x([z,D])}function u(A){D={categories:A.map(function(F){return{displayName:F.localizedName,title:F.region}}).sort(function(F,H){return"wo"===F.title.toLowerCase()?-1:F.displayName.localeCompare(H.displayName)}),
description:"2.0",displayName:"Regions",title:"region"};k.isPortal&&z?x([z]):z&&x([z,D])}function x(A){E.resolve({schema:A,id:B})}function y(A){E.reject(A)}void 0===l&&(l="en");var B,C,z,D,E=new p.a;return Object(q.e)(m,n,k.livingAtlasGroupQuery,(null==n?0:n.isPortal)?{sortField:"title",sortOrder:"asc"}:{}).then(function(A){A.results[0]&&A.results[0].id?(B=A.results[0].id,Object(q.f)(m,n,B).then(h,y)):y("The living atlas group could not be found.")},y),E}},409:function(c,a,b){b.d(a,"a",function(){return p});
b.d(a,"b",function(){return q});var p="CHANGE_SEARCH_STRING",q=function(t){return{type:p,payload:t}}},410:function(c,a,b){b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});var p="SHOW_EMPTY_RESULTS",q="CHANGE_RESULT_DISPLAY"},48:function(c,a,b){function p(ba,ka,la){var ma=ka.settings.utils.request,ha=Object(m.b)({},ka);ha=ma(ha[0],ha[1]).then(Object(n.a)(ka),function(ia){return ba({type:F,payload:ia})});if(la){var Z=Object(m.a)(ka,["access","contentstatus","categories"]);Z=ma(Z[0],Z[1]);
la=ka.settings.config.customSections;var W=ka.parameters.section;if(Object(B.a)(W)||Object(y.e)(la,W)&&Object(B.a)(Object(y.b)(la,W))){var Q=Object(m.c)(ka,ka.ui.tagsFilter.filterString);Q=ma(Q[0],Q[1])}}ma=[ha,Z,Q].filter(function(ia){return ia});k()(ma).then(function(ia){ba(function(R,S){var N,X,aa=S[0],ea=S[1],Y=S[2],T=Object(C.a)(R),ca=R.settings.utils.iconDir;return{type:A,payload:{search:Object(q.a)(Object(q.a)({},aa.data),{results:aa.data.results.map(function(M){return Object(l.a)(T,ca,M)})}),
aggregations:(null===(N=null==ea?void 0:ea.data)||void 0===N?0:N.aggregations)?{counts:Object(q.g)([],ea.data.aggregations.counts).concat((null===(X=null==Y?void 0:Y.data)||void 0===X?0:X.aggregations)?Object(q.g)([],Y.data.aggregations.counts):[]),countInfo:{section:R.parameters.section,group:R.parameters.filter.group,custom:R.settings.config.customSections.filter(function(M){return M.name===R.parameters.section})[0]}}:void 0}}}(ka,ia));ba(D.e)},function(ia){return ba({type:F,payload:ia})})}b.d(a,
"a",function(){return E});b.d(a,"c",function(){return A});b.d(a,"b",function(){return F});b.d(a,"d",function(){return H});b.d(a,"f",function(){return I});b.d(a,"e",function(){return L});b.d(a,"g",function(){return J});b.d(a,"h",function(){return O});b.d(a,"i",function(){return P});var q=b(0),t=b(100),m=b(162),n=b(217);c=b(65);var k=b.n(c),l=b(78),h=b(326),e=b(327),d=b(173),g=b(266),u=b(328),x=b(264),y=b(86),B=b(329),C=b(126),z=b(256),D=b(199),E="LOADING_CONTENT",A="LOADING_CONTENT_SUCCESS",F="LOADING_CONTENT_FAILED",
H="LOADING_NEXT",I="LOADING_NEXT_SUCCESS",L="LOADING_NEXT_FAILED",J="SUBSCRIPTION_CONTENT_SUCCESS",O=function(ba){return function(ka,la){var ma=la(),ha=ma.settings.utils.request,Z=ma.parameters.nextQuery.nextStart;ka({type:H});Z=Object(m.b)({num:ba,start:Z},ma);ha(Z[0],Z[1]).then(Object(n.a)(ma),function(W){return ka({type:L,payload:W})}).then(function(W){return ka(V(ma,W))},function(W){return ka({type:L,payload:W})})}},P=function(ba){return function(ka,la){var ma=la();ka({type:E});ma.settings.config.clearSelectionBetweenSearches&&
ka({type:t.b});ka(fa(ba))}},fa=function(ba){return function(ka,la){var ma=la(),ha=ma.parameters.section,Z=ma.settings.utils.portal.user,W=!!Z,Q=ma.settings.utils.portal,ia=Q.isPortal,R=Z&&"org_admin"===Z.role,S=Z&&Z.privileges&&-1<Z.privileges.indexOf("portal:admin:manageCollaborations"),N=Z&&!ia&&Z.orgId&&Q.subscriptionInfo&&-1<["Trial","Trial Press","Trial Developer","Evaluation"].indexOf(Q.subscriptionInfo.type);ka(Object(h.b)()).then(function(X){"livingAtlas"===ha||"Living Atlas"===ha?ka(Object(e.d)(X)).then(function(){return p(ka,
la(),ba)},function(){return ka({type:F,payload:"Couldn't load the living atlas info."})}):"myContent"!==ha&&"myGroups"!==ha&&"myFavorites"!==ha&&"subscription"!==ha||!W?"myOrganization"===ha&&W?k()([ka(Object(g.d)())].concat(R&&S&&!N?[ka(Object(u.a)(ka,la()))]:[])).then(function(){return p(ka,la(),ba)},function(){return ka({type:F,payload:"Couldn't load the organization info."})}):Object(y.e)(ma.settings.config.customSections,ha)?ka(Object(x.e)()).then(function(){return p(ka,la(),ba)},function(){return ka({type:F,
payload:"Couldn't load the custom section info."})}):p(ka,ma,ba):k()([ka(Object(d.l)())].concat(W&&Z.orgId?[ka(Object(g.d)())]:[]).concat(R&&S&&!N?[ka(Object(u.a)(ka,la()))]:[])).then(function(){return"subscription"===ha?ka(Object(z.d)()).then(function(){return ka({type:J,payload:la().results.provisionedContent.content})},function(){return ka({type:F,payload:"Couldn't load provisioned content info."})}):p(ka,la(),ba)},function(){return ka({type:F,payload:"Couldn't load the user info."})})})}},V=function(ba,
ka){var la=ba.settings.utils.iconDir,ma=Object(C.a)(ba);return{type:I,payload:Object(q.a)(Object(q.a)({},ka.data),{results:ka.data.results.map(function(ha){return Object(l.a)(ma,la,ha)})})}}},49:function(c,a,b){b.d(a,"d",function(){return p});b.d(a,"n",function(){return q});b.d(a,"i",function(){return t});b.d(a,"j",function(){return m});b.d(a,"m",function(){return n});b.d(a,"f",function(){return k});b.d(a,"h",function(){return l});b.d(a,"l",function(){return h});b.d(a,"c",function(){return e});b.d(a,
"p",function(){return d});b.d(a,"g",function(){return g});b.d(a,"e",function(){return u});b.d(a,"q",function(){return x});b.d(a,"k",function(){return y});b.d(a,"o",function(){return B});b.d(a,"r",function(){return C});b.d(a,"b",function(){return z});b.d(a,"a",function(){return D});b.d(a,"u",function(){return E});b.d(a,"E",function(){return A});b.d(a,"y",function(){return F});b.d(a,"D",function(){return H});b.d(a,"z",function(){return I});b.d(a,"A",function(){return L});b.d(a,"w",function(){return J});
b.d(a,"C",function(){return O});b.d(a,"t",function(){return P});b.d(a,"G",function(){return fa});b.d(a,"v",function(){return V});b.d(a,"x",function(){return ba});b.d(a,"H",function(){return ka});b.d(a,"B",function(){return la});b.d(a,"F",function(){return ma});b.d(a,"I",function(){return ha});b.d(a,"s",function(){return Z});var p="UPDATE_CUSTOM_FILTER",q="UPDATE_ORG_GROUP_FILTER",t="UPDATE_LIVING_ATLAS_CATEGORIES_FILTER",m="UPDATE_LIVING_ATLAS_REGION_FILTER",n="UPDATE_ORG_CATEGORIES_FILTER",k="UPDATE_GROUP_CATEGORIES_FILTER",
l="UPDATE_ITEM_TYPE_FILTER",h="UPDATE_MODIFIED_FILTER",e="UPDATE_CREATED_FILTER",d="UPDATE_SHARED_FILTER",g="UPDATE_GROUP_FILTER",u="UPDATE_FOLDER_FILTER",x="UPDATE_STATUS_FILTER",y="UPDATE_MAP_AREA_FILTER",B="UPDATE_SEARCH_ORG_FILTER",C="UPDATE_TAGS_FILTER",z="UPDATE_COLLABORATIONS_FILTER",D="CLEAR_ALL_FILTERS",E=function(W,Q){return{type:p,payload:{index:W,filter:Q}}},A=function(W){return{type:q,payload:W}},F=function(W){return{type:l,payload:W}},H=function(W){return{type:n,payload:W}},I=function(W){return{type:t,
payload:W}},L=function(W){return{type:m,payload:W}},J=function(W){return{type:k,payload:W}},O=function(W,Q){return{type:h,payload:{section:W,modified:Q}}},P=function(W,Q){return{type:e,payload:{section:W,created:Q}}},fa=function(W){return{type:d,payload:W}},V=function(W){return{type:u,payload:W}},ba=function(W){return{type:g,payload:W}},ka=function(W){return{type:x,payload:W}},la=function(W){return{type:y,payload:W}},ma=function(W){return{type:B,payload:W}},ha=function(W){return{type:C,payload:W}},
Z=function(W){return{type:z,payload:W}}},5:function(c,a,b){function p(e){return 0===Object.keys(e).length&&e.constructor===Object}function q(e){return null!=e}function t(e,d){return l.apply(null,arguments)}function m(e,d){return h.apply(null,arguments)}b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});b.d(a,"e",function(){return k});b.d(a,"c",function(){return t});b.d(a,"d",function(){return m});var n=b(0);c=b(15);var k=Object(c.a)(function(e,d){var g=Object(n.a)({},d);return delete g[e],
g}),l=Object(c.a)(function(e,d){return Object.keys(d).reduce(function(g,u){return g[u]=e(d[u],u,d),g},{})}),h=Object(c.a)(function(e,d){return Object.keys(d).reduce(function(g,u){return e(d[u],u,d)&&(g[u]=d[u]),g},{})})},51:function(c,a,b){function p(A){return!(!A.urlKey||!A.customBaseUrl)}function q(A){return A.role===u.admin||A.role===u.accountAdmin}function t(A){return Object(B.a)(A.roleId)&&0<(A.roleId||"").length}function m(A){return!t(A)||t(A)&&-1<(A.privileges||[]).indexOf("portal:admin:viewItems")}
function n(A){return-1<(A.privileges||[]).indexOf("portal:user:shareToOrg")}function k(A){return-1<(A.privileges||[]).indexOf("portal:user:shareToGroup")}function l(A){return-1<(A.privileges||[]).indexOf("portal:user:shareToPublic")}function h(A,F){return e(A)||d(A)||F.canSharePublic&&g(A)}function e(A){return-1<(A.privileges||[]).indexOf("portal:admin:shareToGroup")}function d(A){return-1<(A.privileges||[]).indexOf("portal:admin:shareToOrg")}function g(A){return-1<(A.privileges||[]).indexOf("portal:admin:shareToPublic")}
b.d(a,"l",function(){return z});b.d(a,"h",function(){return D});b.d(a,"m",function(){return E});b.d(a,"k",function(){return p});b.d(a,"i",function(){return q});b.d(a,"j",function(){return t});b.d(a,"g",function(){return m});b.d(a,"b",function(){return n});b.d(a,"a",function(){return k});b.d(a,"c",function(){return l});b.d(a,"d",function(){return e});b.d(a,"e",function(){return d});b.d(a,"f",function(){return g});var u,x=b(63),y=b(148),B=b(5),C=b(58);!function(A){A.user="org_user";A.accountUser="account_user";
A.publisher="org_publisher";A.accountPublisher="account_publisher";A.admin="org_admin";A.accountAdmin="account_admin";A.viewer="iAAAAAAAAAAAAAAA";A.dataEditor="iBBBBBBBBBBBBBBB"}(u||(u={}));var z=function(A){var F=A.items;return!!A.user.orgId&&F.every(function(H){return H.isOrgItem})},D=function(A){var F=A.items,H=A.user,I=A.portal;A=F[0];var L=Object(C.c)(A,H),J=t(H),O=h(H,I);if(J=Object(C.a)(A,H)&&-1<(H.privileges||[]).indexOf("portal:admin:updateItems")&&!J)J=!p(I)||k(H)||n(H)||I.canSharePublic&&
l(H)||h(H,I);I=J;return!(A.portal.isPortal&&A.owner!==H.username&&-1<A.owner.indexOf("esri_"))&&(L||I||z({items:F,user:H})&&O)},E=function(A,F){return Object(x.a)(Object(y.a)(A))(F)}},56:function(c,a){c.exports=w},58:function(c,a,b){function p(l,h){return(null==l?void 0:l.owner)===h.username}function q(l,h){var e;if(!(e=p(l,h)))if(Object(m.a)(l.isAdmin))e=!!l.isAdmin;else{e=l.owner;var d="admin"===l.itemControl;e=!(l.portal.isPortal&&!p(l,h)&&d&&-1<e.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics",
"esri_boundaries"].indexOf(e))&&d}return e}function t(l,h){return q(l,h)||"update"===l.itemControl}b.d(a,"d",function(){return p});b.d(a,"c",function(){return q});b.d(a,"a",function(){return t});b.d(a,"b",function(){return k});var m=b(5),n=b(51),k=function(l){var h=l.user,e=l.items;l=l.portal;return Object(n.l)({items:e,user:h})&&Object(n.h)({items:e,user:h,portal:l})&&Object(n.g)(h)&&e[0].itemOwner||h}},63:function(c,a,b){function p(){for(var q=[],t=0;t<arguments.length;t++)q[t]=arguments[t];return function(m){return q.reduceRight(function(n,
k){return k(n)},m)}}b.d(a,"a",function(){return p})},65:function(c,a){c.exports=v},710:function(c,a,b){function p(B,C){var z,D,E=C.settings.utils.telemetry,A={pageName:C.settings.utils.appName||window.location.href,facetValue:{myContent:"my content",myFavorites:"my fav",myGroups:"my groups",myOrganization:"my org",livingAtlas:"living atlas",all:"arcgis online"}[C.parameters.section]||"other"};if(B.type===m.a)return(null==E?void 0:E.getWorkflow("item browser"))&&E.cancelWorkflow("item browser"),void(null==
E||E.startWorkflow("item browser",A));var F=null==E?void 0:E.getWorkflow("item browser");if(E&&F)switch(B.type){case n.a:case k.a:E.stepWorkflow("item browser","search",Object(q.a)(Object(q.a)({},A),{details:(null===(z=C.parameters.searchString)||void 0===z?void 0:z.current)||"",attribute:Object(x.a)(C)?"enriched":void 0,searchQuery:Object(y.b)(C)}));break;case l.a:E.stepWorkflow("item browser","sort",Object(q.a)(Object(q.a)({},A),{details:B.payload}));break;case h.a:E.stepWorkflow("item browser",
"list"===C.ui.resultPanel.display?"list view":"compact view",Object(q.a)({},A));break;case e.c:E.stepWorkflow("item browser","pagination",Object(q.a)(Object(q.a)({},A),{details:B.payload}));break;case d.e:case d.h:case d.l:case d.c:case d.r:case d.p:E.stepWorkflow("item browser","filter",Object(q.a)(Object(q.a)({},A),{details:B.type.split("_").join(" ").toLowerCase()}));break;case g.f:E.stepWorkflow("item browser","select all on page",Object(q.a)({},A));break;case u.a:E.stepWorkflow("item browser",
"card action",Object(q.a)(Object(q.a)({},A),{details:"view item details"}));break;case t.SELECT_ITEM:E.stepWorkflow("item browser","card action",Object(q.a)(Object(q.a)({},A),{details:"add"}));break;case t.DESELECT_ITEM:E.stepWorkflow("item browser","card action",Object(q.a)(Object(q.a)({},A),{details:"remove"}));break;case g.k:z=C.results.selectedItems[B.payload.id]?"select":"deselect";E.stepWorkflow("item browser","card action",Object(q.a)(Object(q.a)({},A),{details:z}));break;case g.d:E.endWorkflow("item browser",
Object(q.a)(Object(q.a)({},A),{count:null===(D=B.payload)||void 0===D?void 0:D.length}));break;case g.a:E.cancelWorkflow("item browser",Object(q.a)({},A))}}b.d(a,"a",function(){return p});var q=b(0),t=b(231),m=b(326),n=b(288),k=b(409),l=b(290),h=b(410),e=b(295),d=b(49),g=b(100),u=b(357),x=b(356),y=b(179)},78:function(c,a,b){b.d(a,"a",function(){return l});b.d(a,"b",function(){return h});var p=b(63);c=b(5);var q=b(123),t=b(122),m=b(117),n=b(121),k=b(120),l=function(e,d,g){return Object(p.a)(Object(k.a)(e),
Object(n.a)(e),Object(m.a)(d),Object(t.a)(e),Object(q.a)(e))(g)},h=Object(p.a)(Object(c.e)("patchedDescription"),Object(c.e)("thumbURI"),Object(c.e)("iconURI"),Object(c.e)("displayName"),Object(c.e)("badges"))},86:function(c,a,b){function p(l){return!(!n(l)&&!k(l))}function q(l,h){return l.filter(function(e){return e.name===h})[0]}function t(l,h){return!!q(l,h)}b.d(a,"a",function(){return m});b.d(a,"c",function(){return n});b.d(a,"d",function(){return k});b.d(a,"f",function(){return p});b.d(a,"b",
function(){return q});b.d(a,"e",function(){return t});c=b(15);var m=function(l){return l.filters?l.filters.filter(function(h){return"object"==typeof h&&("group"===h.type||"org"===h.type)}):[]};c=Object(c.a)(function(l,h){if(h.filters)return h.filters.reduce(function(e,d){return"object"==typeof d&&d.type===l?d:e},void 0)});var n=c("group"),k=c("org")},983:function(c,a,b){b.r(a);b.d(a,"ItemBrowserWrapper",function(){return g});var p=b(0),q=b(231),t=b.n(q),m=b(16);c=b(386);var n=b.n(c);c=b(336);var k=
b.n(c),l=b(30),h=b(117),e=b(100),d=b(710);b.d(a,"changeSearchSection",function(){return q.changeSearchSection});b.d(a,"initialState",function(){return q.initialState});b.d(a,"search",function(){return q.search});b.d(a,"updateExtent",function(){return q.updateExtent});b.d(a,"viewItemDetails",function(){return q.viewItemDetails});var g=function(){function u(x,y){var B,C;this.options=y;this.listener=this.listener.bind(this);this.renderContainer=document.createElement("div");this.renderContainer.style.width=
"100%";this.renderContainer.style.height="100%";this.renderContainer.id="item-browser-wrapper";x.appendChild(this.renderContainer);var z=k()(q.initialState),D=k()(y.initialState);z=n()(z,D,function(E,A){if(Array.isArray(E)&&A)return A});this.initialState=Object(p.a)(Object(p.a)({},z),{settings:Object(p.a)(Object(p.a)({},z.settings),{utils:{telemetry:y.telemetry,appName:y.appName,request:4===y.apiVersion?y.request:Object(l.u)(y.request),portal:4===y.apiVersion?y.portal:Object(p.a)(Object(p.a)({},y.portal),
{restUrl:y.portal.portalUrl.slice(0,-1),credential:null===(B=y.portal.user)||void 0===B?void 0:B.credential}),iconDir:4===y.apiVersion?window.require.toUrl("esri/images/portal"):window.require.toUrl("esri/css/images/item_type_icons")}})});B=y.middlewares||[];(null===(C=y.telemetry)||void 0===C?0:C.getWorkflow("item browser"))&&y.telemetry.cancelWorkflow("item browser");this.store=m.applyMiddleware.apply(void 0,Object(p.g)([m.thunk,Object(m.addListener)(d.a),Object(m.addListener)(this.listener)],B))(m.createStore)(q.reducers,
this.initialState);this.projector=Object(m.createProjector)(this.store,function(E){return E(t.a,{key:"ib"})},this.renderContainer);this.store.dispatch(Object(q.search)(!0));this.handleInitiallySelectedItemsDfd()}return u.prototype.handleInitiallySelectedItemsDfd=function(){var x=this,y=this.getState().settings,B=y.config.initiallySelectedItemsDfd,C=y.utils.iconDir;B?B.then(function(z){var D=Object.keys(z).map(function(E){return Object(h.a)(C,Object(p.a)({},z[E]))}).reduce(function(E,A){var F;return Object(p.a)(Object(p.a)({},
E),((F={})[A.id]=A,F))},{});x.store.dispatch(Object(e.p)(D))}):this.store.dispatch(Object(e.p)({}))},u.prototype.shimmedRequest=function(x,y){var B,C=Object(p.a)({},y.query);return(null===(B=this.options.portal.user)||void 0===B?void 0:B.credential)&&-1<x.indexOf(this.options.portal.restUrl)&&(C.token=this.options.portal.user.credential.token),this.options.request({url:x,content:y.query},{usePost:"post"===y.method}).then(function(z){return{data:z}})},u.prototype.dispatch=function(x){var y;null===
(y=this.store)||void 0===y||y.dispatch(x)},u.prototype.getState=function(){var x;return(null===(x=this.store)||void 0===x?void 0:x.getState())||this.initialState},u.prototype.listener=function(x,y){var B,C;null===(C=null===(B=this.options)||void 0===B?void 0:B.listener)||void 0===C||C.call(B,x,y)},u}()},99:function(c,a,b){function p(l,h){if(null==l?0:l.length)for(var e=void 0,d=0;d<l.length;d++)if(h(e=l[d]))return e}function q(l){return l.filter(function(h){return 0<h.length})}function t(l,h,e){var d=
[];return h.forEach(function(g){(e?g[e].toLowerCase()===l.toLowerCase():g.toLowerCase()===l.toLowerCase())?d.unshift(g):d.push(g)}),d}b.d(a,"e",function(){return m});b.d(a,"f",function(){return n});b.d(a,"c",function(){return p});b.d(a,"b",function(){return q});b.d(a,"a",function(){return k});b.d(a,"d",function(){return t});c=b(15);var m=function(l,h,e){return e.indexOf(l)===h},n=Object(c.a)(function(l,h){var e={};return h.filter(function(d){return!e[d[l]]&&(e[d[l]]=!0,!0)})}),k=function(l,h){return l.length===
h.length&&l.reduce(function(e,d){return e&&-1<h.indexOf(d)},!0)}}})})},"arcgis-components/ItemBrowser/index":function(){define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/Deferred dojo/promise/all dojo/i18n!../GroupBrowser/nls/resources dojo/_base/kernel dojo/date/locale dojo/number ../Loaders/LoaderBars ../Buttons/SvgButton ../Buttons/Toggle dojo/debounce ../Dropdowns/AccordionDropdown/index ../Buttons/IconButton ../Modals/Overlay ../Dropdowns/TextOptionDropdown ../Navigation/TabNav ../Filters/CategoriesFilter/index ../Navigation/Pager/index ../Modals/MobileWrap ../Dropdowns/SortDropdown/index ../Filters/CreatedFilter/index ../Badges/Retired ../Filters/MapAreaFilter ../Filters/ItemTypeFilter/index ../Filters/ModifiedFilter/index ../Filters/SharedFilter/index ../Filters/StatusFilter/index ../Filters/FolderFilter/index ../Filters/GroupFilter/index ../Filters/TagsFilter/index ../Filters/CollaborationFilter/index ../Dropdowns/FilterController/index ../Management/LazyLoader ../ItemCards/AnalysisCard/index ../Badges/Authoritative ../Badges/Collaboration ../Badges/Deprecated ../Badges/LivingAtlas ../Badges/Marketplace ../Badges/OpenData ../Badges/Premium ../Badges/Subscriber ../Badges/Solution ../Badges/PublicDataCollection ../ItemCards/MiniCard/index ../ItemCards/MiniCardRow/index".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia){return function(R){function S(X){if(N[X])return N[X].exports;var aa=N[X]={i:X,l:!1,exports:{}};return R[X].call(aa.exports,aa,aa.exports,S),aa.l=!0,aa.exports}var N={};return S.m=R,S.c=N,S.d=function(X,aa,ea){S.o(X,aa)||Object.defineProperty(X,aa,{enumerable:!0,get:ea})},S.r=function(X){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(X,"__esModule",{value:!0})},S.t=function(X,aa){if((1&aa&&(X=S(X)),8&aa)||4&aa&&"object"==typeof X&&X&&X.__esModule)return X;var ea=Object.create(null);if(S.r(ea),Object.defineProperty(ea,"default",{enumerable:!0,value:X}),2&aa&&"string"!=typeof X)for(var Y in X)S.d(ea,Y,function(T){return X[T]}.bind(null,Y));return ea},S.n=function(X){var aa=X&&X.__esModule?function(){return X["default"]}:function(){return X};return S.d(aa,"a",aa),aa},S.o=function(X,aa){return Object.prototype.hasOwnProperty.call(X,
aa)},S.p="",S(S.s=860)}([function(R,S,N){function X(da,ja){function na(){this.constructor=da}if("function"!=typeof ja&&null!==ja)throw new TypeError("Class extends value "+String(ja)+" is not a constructor or null");M(da,ja);da.prototype=null===ja?Object.create(ja):(na.prototype=ja.prototype,new na)}function aa(da,ja){var na={},oa;for(oa in da)Object.prototype.hasOwnProperty.call(da,oa)&&0>ja.indexOf(oa)&&(na[oa]=da[oa]);if(null!=da&&"function"==typeof Object.getOwnPropertySymbols){var ra=0;for(oa=
Object.getOwnPropertySymbols(da);ra<oa.length;ra++)0>ja.indexOf(oa[ra])&&Object.prototype.propertyIsEnumerable.call(da,oa[ra])&&(na[oa[ra]]=da[oa[ra]])}return na}function ea(da,ja,na,oa){var ra,ua=arguments.length,wa=3>ua?ja:null===oa?oa=Object.getOwnPropertyDescriptor(ja,na):oa;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)wa=Reflect.decorate(da,ja,na,oa);else for(var Ba=da.length-1;0<=Ba;Ba--)(ra=da[Ba])&&(wa=(3>ua?ra(wa):3<ua?ra(ja,na,wa):ra(ja,na))||wa);return 3<ua&&wa&&Object.defineProperty(ja,
na,wa),wa}function Y(da,ja,na,oa){return new (na||(na=Promise))(function(ra,ua){function wa(La){try{Da(oa.next(La))}catch(Ga){ua(Ga)}}function Ba(La){try{Da(oa["throw"](La))}catch(Ga){ua(Ga)}}function Da(La){var Ga;La.done?ra(La.value):(Ga=La.value,Ga instanceof na?Ga:new na(function(xa){xa(Ga)})).then(wa,Ba)}Da((oa=oa.apply(da,ja||[])).next())})}function T(da,ja){function na(Da){return function(La){return function(Ga){if(oa)throw new TypeError("Generator is already executing.");for(;Ba;)try{if(oa=
1,ra&&(ua=2&Ga[0]?ra["return"]:Ga[0]?ra["throw"]||((ua=ra["return"])&&ua.call(ra),0):ra.next)&&!(ua=ua.call(ra,Ga[1])).done)return ua;switch(ra=0,ua&&(Ga=[2&Ga[0],ua.value]),Ga[0]){case 0:case 1:ua=Ga;break;case 4:return Ba.label++,{value:Ga[1],done:!1};case 5:Ba.label++;ra=Ga[1];Ga=[0];continue;case 7:Ga=Ba.ops.pop();Ba.trys.pop();continue;default:if(!(ua=Ba.trys,(ua=0<ua.length&&ua[ua.length-1])||6!==Ga[0]&&2!==Ga[0])){Ba=0;continue}if(3===Ga[0]&&(!ua||Ga[1]>ua[0]&&Ga[1]<ua[3]))Ba.label=Ga[1];else if(6===
Ga[0]&&Ba.label<ua[1])Ba.label=ua[1],ua=Ga;else if(ua&&Ba.label<ua[2])Ba.label=ua[2],Ba.ops.push(Ga);else{ua[2]&&Ba.ops.pop();Ba.trys.pop();continue}}Ga=ja.call(da,Ba)}catch(xa){Ga=[6,xa],ra=0}finally{oa=ua=0}if(5&Ga[0])throw Ga[1];return{value:Ga[0]?Ga[1]:void 0,done:!0}}([Da,La])}}var oa,ra,ua,wa,Ba={label:0,sent:function(){if(1&ua[0])throw ua[1];return ua[1]},trys:[],ops:[]};return wa={next:na(0),"throw":na(1),"return":na(2)},"function"==typeof Symbol&&(wa[Symbol.iterator]=function(){return this}),
wa}function ca(da,ja){for(var na=0,oa=ja.length,ra=da.length;na<oa;na++,ra++)da[ra]=ja[na];return da}N.d(S,"d",function(){return X});N.d(S,"a",function(){return U});N.d(S,"f",function(){return aa});N.d(S,"c",function(){return ea});N.d(S,"b",function(){return Y});N.d(S,"e",function(){return T});N.d(S,"g",function(){return ca});var M=function(da,ja){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(na,oa){na.__proto__=oa}||function(na,oa){for(var ra in oa)Object.prototype.hasOwnProperty.call(oa,
ra)&&(na[ra]=oa[ra])})(da,ja)},U=function(){return(U=Object.assign||function(da){for(var ja,na=1,oa=arguments.length;na<oa;na++)for(var ra in ja=arguments[na])Object.prototype.hasOwnProperty.call(ja,ra)&&(da[ra]=ja[ra]);return da}).apply(this,arguments)};Object.create;Object.create},,,,,function(R,S,N){function X(da){return 0===Object.keys(da).length&&da.constructor===Object}function aa(da){return null!=da}function ea(da,ja){return M.apply(null,arguments)}function Y(da,ja){return U.apply(null,arguments)}
N.d(S,"b",function(){return X});N.d(S,"a",function(){return aa});N.d(S,"e",function(){return ca});N.d(S,"c",function(){return ea});N.d(S,"d",function(){return Y});var T=N(0);R=N(15);var ca=Object(R.a)(function(da,ja){var na=Object(T.a)({},ja);return delete na[da],na}),M=Object(R.a)(function(da,ja){return Object.keys(ja).reduce(function(na,oa){return na[oa]=da(ja[oa],oa,ja),na},{})}),U=Object(R.a)(function(da,ja){return Object.keys(ja).reduce(function(na,oa){return da(ja[oa],oa,ja)&&(na[oa]=ja[oa]),
na},{})})},,,,,,,,,,function(R,S,N){function X(ea){return function T(){for(var ca=this,M=[],U=0;U<arguments.length;U++)M[U]=arguments[U];return M.length>=ea.length?ea.call.apply(ea,Object(aa.g)([this],M)):function(){for(var da=[],ja=0;ja<arguments.length;ja++)da[ja]=arguments[ja];return T.call.apply(T,Object(aa.g)(Object(aa.g)([ca],M),da))}}}N.d(S,"a",function(){return X});var aa=N(0)},function(R,S){R.exports=K},,,,,,,,,,,,function(R,S,N){(function(X,aa){R.exports=function(){function ea(){var Ja=
setTimeout;return function(){return Ja(Y,1)}}function Y(){for(var Ja=0;Ja<La;Ja+=2)(0,pa[Ja])(pa[Ja+1]),pa[Ja]=void 0,pa[Ja+1]=void 0;La=0}function T(Ja,Ma){var Na=this,Pa=new this.constructor(M);void 0===Pa[Fa]&&Ba(Pa);var Qa=Na._state;if(Qa){var Ra=arguments[Qa-1];Ca(function(){return wa(Qa,Pa,Ra,Na._result)})}else ra(Na,Pa,Ja,Ma);return Pa}function ca(Ja){if(Ja&&"object"==typeof Ja&&Ja.constructor===this)return Ja;var Ma=new this(M);return da(Ma,Ja),Ma}function M(){}function U(Ja,Ma,Na){Ma.constructor===
Ja.constructor&&Na===T&&Ma.constructor.resolve===ca?function(Pa,Qa){1===Qa._state?na(Pa,Qa._result):2===Qa._state?oa(Pa,Qa._result):ra(Qa,void 0,function(Ra){return da(Pa,Ra)},function(Ra){return oa(Pa,Ra)})}(Ja,Ma):void 0===Na?na(Ja,Ma):"function"==typeof Na?function(Pa,Qa,Ra){Ca(function(Sa){var Ta=!1,Xa=function(Ua,Va,ab,Ya){try{Ua.call(Va,ab,Ya)}catch($a){return $a}}(Ra,Qa,function(Ua){Ta||(Ta=!0,Qa!==Ua?da(Sa,Ua):na(Sa,Ua))},function(Ua){Ta||(Ta=!0,oa(Sa,Ua))},Sa._label);!Ta&&Xa&&(Ta=!0,oa(Sa,
Xa))},Pa)}(Ja,Ma,Na):na(Ja,Ma)}function da(Ja,Ma){if(Ja===Ma)oa(Ja,new TypeError("You cannot resolve a promise with itself"));else if(Pa=typeof(Na=Ma),null===Na||"object"!==Pa&&"function"!==Pa)na(Ja,Ma);else{Na=void 0;try{Na=Ma.then}catch(Qa){return void oa(Ja,Qa)}U(Ja,Ma,Na)}var Na,Pa}function ja(Ja){Ja._onerror&&Ja._onerror(Ja._result);ua(Ja)}function na(Ja,Ma){void 0===Ja._state&&(Ja._result=Ma,Ja._state=1,0!==Ja._subscribers.length&&Ca(ua,Ja))}function oa(Ja,Ma){void 0===Ja._state&&(Ja._state=
2,Ja._result=Ma,Ca(ja,Ja))}function ra(Ja,Ma,Na,Pa){var Qa=Ja._subscribers,Ra=Qa.length;Ja._onerror=null;Qa[Ra]=Ma;Qa[Ra+1]=Na;Qa[Ra+2]=Pa;0===Ra&&Ja._state&&Ca(ua,Ja)}function ua(Ja){var Ma=Ja._subscribers,Na=Ja._state;if(0!==Ma.length){for(var Pa=void 0,Qa=void 0,Ra=Ja._result,Sa=0;Sa<Ma.length;Sa+=3)Pa=Ma[Sa],Qa=Ma[Sa+Na],Pa?wa(Na,Pa,Qa,Ra):Qa(Ra);Ja._subscribers.length=0}}function wa(Ja,Ma,Na,Pa){var Qa="function"==typeof Na,Ra=void 0,Sa=void 0,Ta=!0;if(Qa){try{Ra=Na(Pa)}catch(Xa){Ta=!1,Sa=Xa}if(Ma===
Ra)return void oa(Ma,new TypeError("A promises callback cannot return that same promise."))}else Ra=Pa;void 0!==Ma._state||(Qa&&Ta?da(Ma,Ra):!1===Ta?oa(Ma,Sa):1===Ja?na(Ma,Ra):2===Ja&&oa(Ma,Ra))}function Ba(Ja){Ja[Fa]=Ka++;Ja._state=void 0;Ja._result=void 0;Ja._subscribers=[]}var Da=Array.isArray?Array.isArray:function(Ja){return"[object Array]"===Object.prototype.toString.call(Ja)},La=0,Ga=void 0,xa=void 0,Ca=function(Ja,Ma){pa[La]=Ja;pa[La+1]=Ma;2===(La+=2)&&(xa?xa(Y):Aa())},ta="undefined"!=typeof window?
window:void 0,qa=ta||{};qa=qa.MutationObserver||qa.WebKitMutationObserver;var za="undefined"==typeof self&&void 0!==X&&"[object process]"==={}.toString.call(X),va="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,pa=Array(1E3),sa,ya,Ha,Ea,Aa=void 0;za?Aa=function(){return X.nextTick(Y)}:qa?(ya=0,Ha=new qa(Y),Ea=document.createTextNode(""),Ha.observe(Ea,{characterData:!0}),Aa=function(){Ea.data=ya=++ya%2}):va?((sa=new MessageChannel).port1.onmessage=
Y,Aa=function(){return sa.port2.postMessage(0)}):Aa=void 0===ta?function(){try{var Ja=Function("return this")().require("vertx");return void 0!==(Ga=Ja.runOnLoop||Ja.runOnContext)?function(){Ga(Y)}:ea()}catch(Ma){return ea()}}():ea();var Fa=Math.random().toString(36).substring(2),Ka=0,Ia=function(){function Ja(Ma,Na){this._instanceConstructor=Ma;this.promise=new Ma(M);this.promise[Fa]||Ba(this.promise);Da(Na)?(this.length=Na.length,this._remaining=Na.length,this._result=Array(this.length),0===this.length?
na(this.promise,this._result):(this.length=this.length||0,this._enumerate(Na),0===this._remaining&&na(this.promise,this._result))):oa(this.promise,Error("Array Methods must be provided an Array"))}return Ja.prototype._enumerate=function(Ma){for(var Na=0;void 0===this._state&&Na<Ma.length;Na++)this._eachEntry(Ma[Na],Na)},Ja.prototype._eachEntry=function(Ma,Na){var Pa=this._instanceConstructor,Qa=Pa.resolve;if(Qa===ca){var Ra=Qa=void 0,Sa=!1;try{Qa=Ma.then}catch(Ta){Sa=!0,Ra=Ta}Qa===T&&void 0!==Ma._state?
this._settledAt(Ma._state,Na,Ma._result):"function"!=typeof Qa?(this._remaining--,this._result[Na]=Ma):Pa===Oa?(Pa=new Pa(M),Sa?oa(Pa,Ra):U(Pa,Ma,Qa),this._willSettleAt(Pa,Na)):this._willSettleAt(new Pa(function(Ta){return Ta(Ma)}),Na)}else this._willSettleAt(Qa(Ma),Na)},Ja.prototype._settledAt=function(Ma,Na,Pa){var Qa=this.promise;void 0===Qa._state&&(this._remaining--,2===Ma?oa(Qa,Pa):this._result[Na]=Pa);0===this._remaining&&na(Qa,this._result)},Ja.prototype._willSettleAt=function(Ma,Na){var Pa=
this;ra(Ma,void 0,function(Qa){return Pa._settledAt(1,Na,Qa)},function(Qa){return Pa._settledAt(2,Na,Qa)})},Ja}(),Oa=function(){function Ja(Ma){this[Fa]=Ka++;this._result=this._state=void 0;this._subscribers=[];if(M!==Ma){if("function"!=typeof Ma)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof Ja)(function(Na,Pa){try{Pa(function(Qa){da(Na,Qa)},function(Qa){oa(Na,Qa)})}catch(Qa){oa(Na,Qa)}})(this,Ma);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}return Ja.prototype["catch"]=function(Ma){return this.then(null,Ma)},Ja.prototype["finally"]=function(Ma){var Na=this.constructor;return"function"==typeof Ma?this.then(function(Pa){return Na.resolve(Ma()).then(function(){return Pa})},function(Pa){return Na.resolve(Ma()).then(function(){throw Pa;})}):this.then(Ma,Ma)},Ja}();return Oa.prototype.then=T,Oa.all=function(Ja){return(new Ia(this,Ja)).promise},Oa.race=function(Ja){var Ma=this;return Da(Ja)?new Ma(function(Na,Pa){for(var Qa=Ja.length,Ra=
0;Ra<Qa;Ra++)Ma.resolve(Ja[Ra]).then(Na,Pa)}):new Ma(function(Na,Pa){return Pa(new TypeError("You must pass an array to race."))})},Oa.resolve=ca,Oa.reject=function(Ja){var Ma=new this(M);return oa(Ma,Ja),Ma},Oa._setScheduler=function(Ja){xa=Ja},Oa._setAsap=function(Ja){Ca=Ja},Oa._asap=Ca,Oa.polyfill=function(){var Ja=void 0;if(void 0!==aa)Ja=aa;else if("undefined"!=typeof self)Ja=self;else try{Ja=Function("return this")()}catch(Pa){throw Error("polyfill failed because global object is unavailable in this environment");
}var Ma=Ja.Promise;if(Ma){var Na=null;try{Na=Object.prototype.toString.call(Ma.resolve())}catch(Pa){}if("[object Promise]"===Na&&!Ma.cast)return}Ja.Promise=Oa},Oa.Promise=Oa,Oa}()}).call(this,N(189),N(170))},,function(R,S,N){function X(pa){return pa.reduce(function(sa,ya){return ya&&ya.relatedItems?sa.concat(ya.relatedItems.map(function(Ha){return Ha})):sa},[])}function aa(pa,sa,ya){return pa(sa,{query:Object(T.a)({f:"json"},ya)}).then(function(Ha){return Ha.data})}function ea(pa,sa){void 0===sa&&
(sa=100);for(var ya=[],Ha=0;Ha<Math.ceil(pa.length/sa);Ha++)ya.push(pa.slice(Ha*sa,(Ha+1)*sa));return ya.filter(function(Ea){return 0<Ea.length})}function Y(pa){var sa=pa.itemIds,ya=pa.request,Ha=pa.groupIds,Ea=pa.portal.restUrl+"/content/itemsgroups";return new ca.Promise(function(Aa,Fa){ya(Ea,{method:"get",query:{f:"json",items:sa,groups:Ha}}).then(function(Ka){Aa(Ka.data)},Fa)})}N.d(S,"u",function(){return M});N.d(S,"n",function(){return U});N.d(S,"h",function(){return da});N.d(S,"e",function(){return ja});
N.d(S,"f",function(){return na});N.d(S,"j",function(){return oa});N.d(S,"o",function(){return ra});N.d(S,"l",function(){return ua});N.d(S,"k",function(){return wa});N.d(S,"m",function(){return Ba});N.d(S,"c",function(){return Da});N.d(S,"d",function(){return La});N.d(S,"r",function(){return Ga});N.d(S,"s",function(){return xa});N.d(S,"t",function(){return Ca});N.d(S,"g",function(){return ta});N.d(S,"p",function(){return qa});N.d(S,"q",function(){return za});N.d(S,"v",function(){return aa});N.d(S,
"a",function(){return ea});N.d(S,"i",function(){return Y});N.d(S,"b",function(){return va});var T=N(0),ca=N(28),M=function(pa){return function(sa,ya){return pa({url:sa,content:ya.query},{usePost:"post"===ya.method}).then(function(Ha){return{data:Ha}})}},U=function(pa,sa,ya){return aa(pa,sa.restUrl+"/portals/self",{culture:ya,"default":!0})},da=function(pa,sa,ya){return aa(pa,sa.restUrl+"/content/items/"+ya+"/data")},ja=function(pa,sa,ya,Ha){return aa(pa,sa.restUrl+"/community/groups",Object(T.a)({q:ya},
Ha))},na=function(pa,sa,ya){return aa(pa,sa.restUrl+"/community/groups/"+ya+"/categorySchema")},oa=function(pa,sa,ya){return aa(pa,sa.restUrl+"/portals/"+(ya||sa.id)+"/categorySchema")},ra=function(pa,sa){return aa(pa,sa.restUrl+"/portals/"+sa.id+"/servers")},ua=function(pa,sa,ya,Ha){return pa(sa.restUrl+"/portals/"+(ya||sa.id)+"/collaborationsSummary",Ha)},wa=function(pa,sa,ya,Ha){return pa(sa.restUrl+"/portals/"+(ya||sa.id)+"/collaboratedItems",Ha)},Ba=function(pa,sa,ya){return aa(pa,location.protocol+
"//"+sa.portalHostname+"/sharing/rest/portals/"+(ya||"self"))},Da=function(pa,sa,ya){return pa(sa.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+sa.id+" AND access:public",num:100,start:ya||1,sortField:"title",sortOrder:"asc"}}).then(function(Ha){return Ha.data.total>Ha.data.start+Ha.data.num?Da(pa,sa,Ha.data.start+Ha.data.num).then(function(Ea){return Object(T.a)(Object(T.a)({},Ea),{data:Object(T.a)(Object(T.a)({},Ea.data),{results:Ha.data.results.concat(Ea.data.results)})})}):Ha})},La=
function(pa,sa,ya,Ha){return pa(sa.restUrl+"/community/users/"+ya+"/provisionedListings",{query:{f:"json",num:100,start:Ha||1}}).then(function(Ea){var Aa=ca.Promise.all(Ea.data.provisionedListings.filter(function(Ka){return Ka.itemId}).map(function(Ka){return(new ca.Promise(function(Ia,Oa){pa(sa.restUrl+"/content/items/"+Ka.itemId,{method:"get",query:{f:"json"}}).then(function(Ja){Ia(Ja.data)},Oa)}))["catch"](function(Ia){return 0})})),Fa=Ea.data.provisionedListings.map(function(Ka){return aa(pa,
sa.restUrl+"/content/items/"+(Ka.id||Ka.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(Ia){return Ia},function(Ia){})});return Ea.data.total>Ea.data.start+Ea.data.num?La(pa,sa,ya,Ea.data.start+Ea.data.num).then(function(Ka){return ca.Promise.all([Aa].concat(Fa)).then(function(Ia){return Ia[0].results.concat(X(Ia.slice(1))).concat(Ka)})}):ca.Promise.all([Aa].concat(Fa)).then(function(Ka){return Ka[0].filter(function(Ia){return void 0!==Ia}).concat(X(Ka.slice(1)))})})},
Ga=function(pa,sa,ya){return aa(pa,sa.restUrl+"/community/users/"+(ya||sa.user.username))},xa=function(pa,sa,ya){return aa(pa,sa.restUrl+"/content/users/"+(ya||sa.user.username),{num:1})},Ca=function(pa,sa,ya){return aa(pa,sa.restUrl+"/content/groups/"+ya)},ta=function(pa,sa,ya){return aa(pa,sa.restUrl+"/community/groups",ya)},qa=function(pa,sa){return aa(pa,sa.restUrl+"/portals/self/settings")},za=function(pa,sa){return aa(pa,sa.restUrl+"/portals/self/trustedOrgs",{num:100})},va=function(pa,sa){return void 0===
sa&&(sa=","),pa.map(function(ya){return ya.id}).join(sa)}},,,,,,function(R,S){R.exports=G},,,,,,,,,,,,function(R,S,N){function X(Ea,Aa,Fa){var Ka=Aa.settings.utils.request,Ia=Object(Y.b)({},Aa);Ia=Ka(Ia[0],Ia[1]).then(Object(T.a)(Aa),function(Na){return Ea({type:Ca,payload:Na})});if(Fa){var Oa=Object(Y.a)(Aa,["access","contentstatus","categories"]);Oa=Ka(Oa[0],Oa[1]);Fa=Aa.settings.config.customSections;var Ja=Aa.parameters.section;if(Object(wa.a)(Ja)||Object(ua.e)(Fa,Ja)&&Object(wa.a)(Object(ua.b)(Fa,
Ja))){var Ma=Object(Y.c)(Aa,Aa.ui.tagsFilter.filterString);Ma=Ka(Ma[0],Ma[1])}}Ka=[Ia,Oa,Ma].filter(function(Na){return Na});ca()(Ka).then(function(Na){Ea(function(Pa,Qa){var Ra,Sa,Ta=Qa[0],Xa=Qa[1],Ua=Qa[2],Va=Object(Ba.a)(Pa),ab=Pa.settings.utils.iconDir;return{type:xa,payload:{search:Object(aa.a)(Object(aa.a)({},Ta.data),{results:Ta.data.results.map(function(Ya){return Object(M.a)(Va,ab,Ya)})}),aggregations:(null===(Ra=null==Xa?void 0:Xa.data)||void 0===Ra?0:Ra.aggregations)?{counts:Object(aa.g)([],
Xa.data.aggregations.counts).concat((null===(Sa=null==Ua?void 0:Ua.data)||void 0===Sa?0:Sa.aggregations)?Object(aa.g)([],Ua.data.aggregations.counts):[]),countInfo:{section:Pa.parameters.section,group:Pa.parameters.filter.group,custom:Pa.settings.config.customSections.filter(function(Ya){return Ya.name===Pa.parameters.section})[0]}}:void 0}}}(Aa,Na));Ea(La.e)},function(Na){return Ea({type:Ca,payload:Na})})}N.d(S,"a",function(){return Ga});N.d(S,"c",function(){return xa});N.d(S,"b",function(){return Ca});
N.d(S,"d",function(){return ta});N.d(S,"f",function(){return qa});N.d(S,"e",function(){return za});N.d(S,"g",function(){return va});N.d(S,"h",function(){return pa});N.d(S,"i",function(){return sa});var aa=N(0),ea=N(100),Y=N(162),T=N(217);R=N(65);var ca=N.n(R),M=N(78),U=N(326),da=N(327),ja=N(173),na=N(266),oa=N(328),ra=N(264),ua=N(86),wa=N(329),Ba=N(126),Da=N(256),La=N(199),Ga="LOADING_CONTENT",xa="LOADING_CONTENT_SUCCESS",Ca="LOADING_CONTENT_FAILED",ta="LOADING_NEXT",qa="LOADING_NEXT_SUCCESS",za=
"LOADING_NEXT_FAILED",va="SUBSCRIPTION_CONTENT_SUCCESS",pa=function(Ea){return function(Aa,Fa){var Ka=Fa(),Ia=Ka.settings.utils.request,Oa=Ka.parameters.nextQuery.nextStart;Aa({type:ta});Oa=Object(Y.b)({num:Ea,start:Oa},Ka);Ia(Oa[0],Oa[1]).then(Object(T.a)(Ka),function(Ja){return Aa({type:za,payload:Ja})}).then(function(Ja){return Aa(Ha(Ka,Ja))},function(Ja){return Aa({type:za,payload:Ja})})}},sa=function(Ea){return function(Aa,Fa){var Ka=Fa();Aa({type:Ga});Ka.settings.config.clearSelectionBetweenSearches&&
Aa({type:ea.b});Aa(ya(Ea))}},ya=function(Ea){return function(Aa,Fa){var Ka=Fa(),Ia=Ka.parameters.section,Oa=Ka.settings.utils.portal.user,Ja=!!Oa,Ma=Ka.settings.utils.portal,Na=Ma.isPortal,Pa=Oa&&"org_admin"===Oa.role,Qa=Oa&&Oa.privileges&&-1<Oa.privileges.indexOf("portal:admin:manageCollaborations"),Ra=Oa&&!Na&&Oa.orgId&&Ma.subscriptionInfo&&-1<["Trial","Trial Press","Trial Developer","Evaluation"].indexOf(Ma.subscriptionInfo.type);Aa(Object(U.b)()).then(function(Sa){"livingAtlas"===Ia||"Living Atlas"===
Ia?Aa(Object(da.d)(Sa)).then(function(){return X(Aa,Fa(),Ea)},function(){return Aa({type:Ca,payload:"Couldn't load the living atlas info."})}):"myContent"!==Ia&&"myGroups"!==Ia&&"myFavorites"!==Ia&&"subscription"!==Ia||!Ja?"myOrganization"===Ia&&Ja?ca()([Aa(Object(na.d)())].concat(Pa&&Qa&&!Ra?[Aa(Object(oa.a)(Aa,Fa()))]:[])).then(function(){return X(Aa,Fa(),Ea)},function(){return Aa({type:Ca,payload:"Couldn't load the organization info."})}):Object(ua.e)(Ka.settings.config.customSections,Ia)?Aa(Object(ra.e)()).then(function(){return X(Aa,
Fa(),Ea)},function(){return Aa({type:Ca,payload:"Couldn't load the custom section info."})}):X(Aa,Ka,Ea):ca()([Aa(Object(ja.l)())].concat(Ja&&Oa.orgId?[Aa(Object(na.d)())]:[]).concat(Pa&&Qa&&!Ra?[Aa(Object(oa.a)(Aa,Fa()))]:[])).then(function(){return"subscription"===Ia?Aa(Object(Da.d)()).then(function(){return Aa({type:va,payload:Fa().results.provisionedContent.content})},function(){return Aa({type:Ca,payload:"Couldn't load provisioned content info."})}):X(Aa,Fa(),Ea)},function(){return Aa({type:Ca,
payload:"Couldn't load the user info."})})})}},Ha=function(Ea,Aa){var Fa=Ea.settings.utils.iconDir,Ka=Object(Ba.a)(Ea);return{type:qa,payload:Object(aa.a)(Object(aa.a)({},Aa.data),{results:Aa.data.results.map(function(Ia){return Object(M.a)(Ka,Fa,Ia)})})}}},function(R,S,N){N.d(S,"d",function(){return X});N.d(S,"n",function(){return aa});N.d(S,"i",function(){return ea});N.d(S,"j",function(){return Y});N.d(S,"m",function(){return T});N.d(S,"f",function(){return ca});N.d(S,"h",function(){return M});
N.d(S,"l",function(){return U});N.d(S,"c",function(){return da});N.d(S,"p",function(){return ja});N.d(S,"g",function(){return na});N.d(S,"e",function(){return oa});N.d(S,"q",function(){return ra});N.d(S,"k",function(){return ua});N.d(S,"o",function(){return wa});N.d(S,"r",function(){return Ba});N.d(S,"b",function(){return Da});N.d(S,"a",function(){return La});N.d(S,"u",function(){return Ga});N.d(S,"E",function(){return xa});N.d(S,"y",function(){return Ca});N.d(S,"D",function(){return ta});N.d(S,"z",
function(){return qa});N.d(S,"A",function(){return za});N.d(S,"w",function(){return va});N.d(S,"C",function(){return pa});N.d(S,"t",function(){return sa});N.d(S,"G",function(){return ya});N.d(S,"v",function(){return Ha});N.d(S,"x",function(){return Ea});N.d(S,"H",function(){return Aa});N.d(S,"B",function(){return Fa});N.d(S,"F",function(){return Ka});N.d(S,"I",function(){return Ia});N.d(S,"s",function(){return Oa});var X="UPDATE_CUSTOM_FILTER",aa="UPDATE_ORG_GROUP_FILTER",ea="UPDATE_LIVING_ATLAS_CATEGORIES_FILTER",
Y="UPDATE_LIVING_ATLAS_REGION_FILTER",T="UPDATE_ORG_CATEGORIES_FILTER",ca="UPDATE_GROUP_CATEGORIES_FILTER",M="UPDATE_ITEM_TYPE_FILTER",U="UPDATE_MODIFIED_FILTER",da="UPDATE_CREATED_FILTER",ja="UPDATE_SHARED_FILTER",na="UPDATE_GROUP_FILTER",oa="UPDATE_FOLDER_FILTER",ra="UPDATE_STATUS_FILTER",ua="UPDATE_MAP_AREA_FILTER",wa="UPDATE_SEARCH_ORG_FILTER",Ba="UPDATE_TAGS_FILTER",Da="UPDATE_COLLABORATIONS_FILTER",La="CLEAR_ALL_FILTERS",Ga=function(Ja,Ma){return{type:X,payload:{index:Ja,filter:Ma}}},xa=function(Ja){return{type:aa,
payload:Ja}},Ca=function(Ja){return{type:M,payload:Ja}},ta=function(Ja){return{type:T,payload:Ja}},qa=function(Ja){return{type:ea,payload:Ja}},za=function(Ja){return{type:Y,payload:Ja}},va=function(Ja){return{type:ca,payload:Ja}},pa=function(Ja,Ma){return{type:U,payload:{section:Ja,modified:Ma}}},sa=function(Ja,Ma){return{type:da,payload:{section:Ja,created:Ma}}},ya=function(Ja){return{type:ja,payload:Ja}},Ha=function(Ja){return{type:oa,payload:Ja}},Ea=function(Ja){return{type:na,payload:Ja}},Aa=
function(Ja){return{type:ra,payload:Ja}},Fa=function(Ja){return{type:ua,payload:Ja}},Ka=function(Ja){return{type:wa,payload:Ja}},Ia=function(Ja){return{type:Ba,payload:Ja}},Oa=function(Ja){return{type:Da,payload:Ja}}},,function(R,S,N){function X(xa){return!(!xa.urlKey||!xa.customBaseUrl)}function aa(xa){return xa.role===oa.admin||xa.role===oa.accountAdmin}function ea(xa){return Object(wa.a)(xa.roleId)&&0<(xa.roleId||"").length}function Y(xa){return!ea(xa)||ea(xa)&&-1<(xa.privileges||[]).indexOf("portal:admin:viewItems")}
function T(xa){return-1<(xa.privileges||[]).indexOf("portal:user:shareToOrg")}function ca(xa){return-1<(xa.privileges||[]).indexOf("portal:user:shareToGroup")}function M(xa){return-1<(xa.privileges||[]).indexOf("portal:user:shareToPublic")}function U(xa,Ca){return da(xa)||ja(xa)||Ca.canSharePublic&&na(xa)}function da(xa){return-1<(xa.privileges||[]).indexOf("portal:admin:shareToGroup")}function ja(xa){return-1<(xa.privileges||[]).indexOf("portal:admin:shareToOrg")}function na(xa){return-1<(xa.privileges||
[]).indexOf("portal:admin:shareToPublic")}N.d(S,"l",function(){return Da});N.d(S,"h",function(){return La});N.d(S,"m",function(){return Ga});N.d(S,"k",function(){return X});N.d(S,"i",function(){return aa});N.d(S,"j",function(){return ea});N.d(S,"g",function(){return Y});N.d(S,"b",function(){return T});N.d(S,"a",function(){return ca});N.d(S,"c",function(){return M});N.d(S,"d",function(){return da});N.d(S,"e",function(){return ja});N.d(S,"f",function(){return na});var oa,ra=N(63),ua=N(148),wa=N(5),
Ba=N(58);!function(xa){xa.user="org_user";xa.accountUser="account_user";xa.publisher="org_publisher";xa.accountPublisher="account_publisher";xa.admin="org_admin";xa.accountAdmin="account_admin";xa.viewer="iAAAAAAAAAAAAAAA";xa.dataEditor="iBBBBBBBBBBBBBBB"}(oa||(oa={}));var Da=function(xa){var Ca=xa.items;return!!xa.user.orgId&&Ca.every(function(ta){return ta.isOrgItem})},La=function(xa){var Ca=xa.items,ta=xa.user,qa=xa.portal;xa=Ca[0];var za=Object(Ba.c)(xa,ta),va=ea(ta),pa=U(ta,qa);if(va=Object(Ba.a)(xa,
ta)&&-1<(ta.privileges||[]).indexOf("portal:admin:updateItems")&&!va)va=!X(qa)||ca(ta)||T(ta)||qa.canSharePublic&&M(ta)||U(ta,qa);qa=va;return!(xa.portal.isPortal&&xa.owner!==ta.username&&-1<xa.owner.indexOf("esri_"))&&(za||qa||Da({items:Ca,user:ta})&&pa)},Ga=function(xa,Ca){return Object(ra.a)(Object(ua.a)(xa))(Ca)}},,,,,function(R,S){R.exports=w},,function(R,S,N){function X(M,U){return(null==M?void 0:M.owner)===U.username}function aa(M,U){var da;if(!(da=X(M,U)))if(Object(Y.a)(M.isAdmin))da=!!M.isAdmin;
else{da=M.owner;var ja="admin"===M.itemControl;da=!(M.portal.isPortal&&!X(M,U)&&ja&&-1<da.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(da))&&ja}return da}function ea(M,U){return aa(M,U)||"update"===M.itemControl}N.d(S,"d",function(){return X});N.d(S,"c",function(){return aa});N.d(S,"a",function(){return ea});N.d(S,"b",function(){return ca});var Y=N(5),T=N(51),ca=function(M){var U=M.user,da=M.items;M=M.portal;return Object(T.l)({items:da,user:U})&&Object(T.h)({items:da,
user:U,portal:M})&&Object(T.g)(U)&&da[0].itemOwner||U}},,,,,function(R,S,N){function X(){for(var aa=[],ea=0;ea<arguments.length;ea++)aa[ea]=arguments[ea];return function(Y){return aa.reduceRight(function(T,ca){return ca(T)},Y)}}N.d(S,"a",function(){return X})},,function(R,S){R.exports=v},,,,function(R,S){R.exports=r},,function(R,S,N){N.d(S,"a",function(){return X});var X="CLEAR_SELECTION_STATE"},,,,,,,function(R,S,N){N.d(S,"a",function(){return M});N.d(S,"b",function(){return U});var X=N(63);R=N(5);
var aa=N(123),ea=N(122),Y=N(117),T=N(121),ca=N(120),M=function(da,ja,na){return Object(X.a)(Object(ca.a)(da),Object(T.a)(da),Object(Y.a)(ja),Object(ea.a)(da),Object(aa.a)(da))(na)},U=Object(X.a)(Object(R.e)("patchedDescription"),Object(R.e)("thumbURI"),Object(R.e)("iconURI"),Object(R.e)("displayName"),Object(R.e)("badges"))},,,,,,,,function(R,S,N){function X(M){return!(!T(M)&&!ca(M))}function aa(M,U){return M.filter(function(da){return da.name===U})[0]}function ea(M,U){return!!aa(M,U)}N.d(S,"a",function(){return Y});
N.d(S,"c",function(){return T});N.d(S,"d",function(){return ca});N.d(S,"f",function(){return X});N.d(S,"b",function(){return aa});N.d(S,"e",function(){return ea});R=N(15);var Y=function(M){return M.filters?M.filters.filter(function(U){return"object"==typeof U&&("group"===U.type||"org"===U.type)}):[]};R=Object(R.a)(function(M,U){if(U.filters)return U.filters.reduce(function(da,ja){return"object"==typeof ja&&ja.type===M?ja:da},void 0)});var T=R("group"),ca=R("org")},,,,function(R,S,N){N.d(S,"a",function(){return X});
N.d(S,"b",function(){return aa});N.d(S,"c",function(){return ea});N.d(S,"d",function(){return Y});N.d(S,"e",function(){return T});N.d(S,"h",function(){return ca});N.d(S,"i",function(){return M});N.d(S,"j",function(){return U});N.d(S,"k",function(){return da});N.d(S,"g",function(){return ja});N.d(S,"f",function(){return na});var X="M15.5 5l-7 7-7-7zM3.914 6L8.5 10.586 13.086 6z",aa="M15.707 20h-1.414l-7.5-7.5 7.5-7.5h1.414l-7.5 7.5z",ea="M13.802 4.306a.683.683 0 0 1 .708.76.528.528 0 0 1 .357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 0 1-.046-1.135zM11.5 23A11.5 11.5 0 0 1 0 11.5v-.021a11.738 11.738 0 0 1 2.057-6.534 12.15 12.15 0 0 1 4.12-3.637h.005A11.595 11.595 0 0 1 13.618.202l.002.002a11.525 11.525 0 0 1 9.325 10.188v.004A11.497 11.497 0 0 1 11.5 23zm9.795-7.748a7.604 7.604 0 0 1-.666-1.746 4.55 4.55 0 0 1-.651-1.655 1.383 1.383 0 0 1-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 0 0-.992.133l-.113.177-.794.021a2.538 2.538 0 0 1-.483-.213 7.396 7.396 0 0 0-.628.541 1.463 1.463 0 0 1-.941.97 1.544 1.544 0 0 0-.961 1.24 2.264 2.264 0 0 1-.449 1.34 2.446 2.446 0 0 1 .811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 0 1 .028.937 1.452 1.452 0 0 1-.025.098 2.11 2.11 0 0 1 .327 1.883 10.447 10.447 0 0 0 4.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 0 1 1.517 2.251 3.648 3.648 0 0 1 .435.592 10.477 10.477 0 0 0-3.824-8.016h-.103a1.768 1.768 0 0 1-1.938 2.838 4.716 4.716 0 0 1-.723.7 1.525 1.525 0 0 1 .97.078l.183-.654a6.478 6.478 0 0 1 2.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 0 0-.843-1.825 18.554 18.554 0 0 0 .793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 0 1-.102.147zm-8.209 16.74a1.557 1.557 0 0 1 .244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 0 0-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 0 0-2.22-.08 1.602 1.602 0 0 1-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 0 1 1.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 0 1 .384.135s.282.166.372.2l.074-.002a3.411 3.411 0 0 1 2.208-.269.557.557 0 0 1 .432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 0 0 .066-.184.48.48 0 0 1 .562-.362c.2.01.514.231.703.231a4.382 4.382 0 0 0 .786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 0 0-.161-.218c.007.01-.022.034-.042.068a.52.52 0 0 1-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 0 0-.72-.63.545.545 0 0 1-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 0 1-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 0 0 .887-1.249.868.868 0 0 1-.316-.254.095.095 0 0 0-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 0 1-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 0 1 .34-.69 1.71 1.71 0 0 1 .588-.442 10.406 10.406 0 0 0-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 0 0-1.884.475 7.258 7.258 0 0 1-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 0 0-.588-.039A10.467 10.467 0 0 0 1 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 0 1 2.006 1.477.495.495 0 0 1 .111.525c-.07.264-.346.34-.568.502a.431.431 0 0 0-.21.376 10.425 10.425 0 0 0 11.017 2.669z",
Y="M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",T="M15 16h4v-4h-4zm1-3h2v2h-2zM5 11h4V7H5zm1-3h2v2H6zm16 14V4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1zm-8 0v-5h-4v5H3V5h3V3h5v2h10v17zm-9-6h4v-4H5zm1-3h2v2H6zm4-2h4V7h-4zm1-3h2v2h-2zm-1 8h4v-4h-4zm1-3h2v2h-2zm4-2h4V7h-4zm1-3h2v2h-2z",ca="M16 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4.75 1h-9.5A2.25 2.25 0 0 0 5 10.25v9.25A1.5 1.5 0 0 0 6.5 21H8v2.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 .75-.75V21h1.5a1.5 1.5 0 0 0 1.5-1.5v-9.25A2.25 2.25 0 0 0 16.75 8zM18 19.5a.501.501 0 0 1-.5.5H16v-8h-1v11H9V12H8v8H6.5a.501.501 0 0 1-.5-.5v-9.25A1.251 1.251 0 0 1 7.25 9h9.5A1.251 1.251 0 0 1 18 10.25z",
M="M11 4a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8.001 6A2 2 0 1 1 10 4a2 2 0 0 1-1.999 2zM10 10h1v.921a3.23 3.23 0 0 0-1 2.329zm0 8.5a2.487 2.487 0 0 0 .055.5H5.75a.75.75 0 0 1-.75-.75V16h-.5A1.5 1.5 0 0 1 3 14.5V9.25A2.25 2.25 0 0 1 5.25 7h5.5a2.232 2.232 0 0 1 1.308.426A3.95 3.95 0 0 0 12 8a3.96 3.96 0 0 0 .593 2.067 3.21 3.21 0 0 0-.593.189V9.25A1.251 1.251 0 0 0 10.75 8h-5.5A1.251 1.251 0 0 0 4 9.25v5.25a.5.5 0 0 0 .5.5H5v-5h1v8h4zM19 8a3 3 0 1 0-3 3 3 3 0 0 0 3-3zm-2.999 2A2 2 0 1 1 18 8a2 2 0 0 1-1.999 2zm2.749 1h-5.5A2.25 2.25 0 0 0 11 13.25v5.25a1.5 1.5 0 0 0 1.5 1.5h.5v2.25a.75.75 0 0 0 .75.75h4.5a.75.75 0 0 0 .75-.75V20h.5a1.5 1.5 0 0 0 1.5-1.5v-5.25A2.25 2.25 0 0 0 18.75 11zM20 18.5a.5.5 0 0 1-.5.5H19v-5h-1v8h-4v-8h-1v5h-.5a.5.5 0 0 1-.5-.5v-5.25A1.251 1.251 0 0 1 13.25 12h5.5A1.251 1.251 0 0 1 20 13.25z",
U="M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",da="M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z",ja="M21 10v7a3.003 3.003 0 0 1-3 3H4v-1h14a2.003 2.003 0 0 0 2-2v-7a2.003 2.003 0 0 0-2-2H6.691l2.649 2.648-.707.707-3.89-3.89 3.832-3.833.707.707L6.622 7H18a3.003 3.003 0 0 1 3 3z",na="M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"},
,,,,,,,,function(R,S,N){function X(M,U){if(null==M?0:M.length)for(var da=void 0,ja=0;ja<M.length;ja++)if(U(da=M[ja]))return da}function aa(M){return M.filter(function(U){return 0<U.length})}function ea(M,U,da){var ja=[];return U.forEach(function(na){(da?na[da].toLowerCase()===M.toLowerCase():na.toLowerCase()===M.toLowerCase())?ja.unshift(na):ja.push(na)}),ja}N.d(S,"e",function(){return Y});N.d(S,"f",function(){return T});N.d(S,"c",function(){return X});N.d(S,"b",function(){return aa});N.d(S,"a",function(){return ca});
N.d(S,"d",function(){return ea});R=N(15);var Y=function(M,U,da){return da.indexOf(M)===U},T=Object(R.a)(function(M,U){var da={};return U.filter(function(ja){return!da[ja[M]]&&(da[ja[M]]=!0,!0)})}),ca=function(M,U){return M.length===U.length&&M.reduce(function(da,ja){return da&&-1<U.indexOf(ja)},!0)}},function(R,S,N){N.d(S,"g",function(){return ea});N.d(S,"k",function(){return Y});N.d(S,"j",function(){return T});N.d(S,"h",function(){return ca});N.d(S,"i",function(){return M});N.d(S,"c",function(){return U});
N.d(S,"b",function(){return da});N.d(S,"f",function(){return ja});N.d(S,"e",function(){return na});N.d(S,"d",function(){return oa});N.d(S,"a",function(){return ra});N.d(S,"r",function(){return ua});N.d(S,"n",function(){return wa});N.d(S,"s",function(){return Ba});N.d(S,"o",function(){return Da});N.d(S,"q",function(){return La});N.d(S,"p",function(){return Ga});N.d(S,"l",function(){return xa});N.d(S,"m",function(){return Ca});var X=N(78),aa=N(48),ea="SELECT_ITEM",Y="TOGGLE_ITEM",T="SELECT_ITEM_SINGLE",
ca="SELECT_ITEM_ASYNC",M="SELECT_ITEM_ASYNC_FAILED",U="DESELECT_ITEM",da="DESELECT_ALL",ja="SELECT_ALL",na="SELECT_ALL_FROM_QUERY_SUCCESS",oa="END_BULK_WORKFLOW",ra="CANCEL_BULK_WORKFLOW",ua=function(ta){return function(qa,za){var va=za();if(va.settings.config.asynchronousItemSelect){qa({type:ca,payload:ta});var pa=va.settings.config.onSelect([Object(X.b)(ta)]);(null==pa?0:pa.then)&&pa.then(function(){va.settings.config.singleItemSelect?qa({type:T,payload:ta}):qa({type:ea,payload:ta})},function(){qa({type:M,
payload:ta})})}else va.settings.config.singleItemSelect?(qa({type:T,payload:ta}),va.settings.config.onSelect([Object(X.b)(ta)])):(qa({type:ea,payload:ta}),va.settings.config.onSelect([Object(X.b)(ta)]))}},wa=function(ta,qa){var za=qa();if(za.settings.config.disableInitiallySelectedItems){za=za.results;var va=za.selectedItems,pa=za.initiallySelectedItems;Object.keys(va).map(function(sa){return va[sa]}).filter(function(sa){return!pa[sa.id]}).forEach(function(sa){ta({type:U,payload:sa})})}else ta({type:da})},
Ba=function(ta){return{type:Y,payload:ta}},Da=function(ta){return function(qa,za){var va=za();qa({type:U,payload:ta});va.settings.config.onDeselect([Object(X.b)(ta)])}},La=function(){return function(ta,qa){var za=qa();ta({type:ja,payload:za.ui.pagination.displayItems})}},Ga=function(ta){return{type:na,payload:ta}},xa=function(ta,qa){var za=null==qa?void 0:qa();ta({type:ra});null==za||za.settings.config.onBack()},Ca=function(ta,qa){var za=null==qa?void 0:qa();if(null==za?0:za.settings.config.onBulkAction){var va=
za.settings.config.onBulkAction;za=za.results;var pa=za.selectedItems,sa=za.initiallySelectedItems;za=Object.keys(sa).map(function(Aa){return sa[Aa]});var ya=Object.keys(pa).map(function(Aa){return pa[Aa]}),Ha=za.filter(function(Aa){return!pa[Aa.id]}),Ea=ya.filter(function(Aa){return!sa[Aa.id]});ta({type:aa.a});ta({type:oa,payload:Ea});va({initiallySelectedItems:za,allSelectedItems:ya,newlySelectedItems:Ea,deselectedItems:Ha})}}},function(R,S,N){N.d(S,"a",function(){return aa});N.d(S,"b",function(){return ea});
var X=N(0),aa=function(Y){return Y?Y.urlKey?location.protocol+"//"+Y.urlKey+"."+Y.customBaseUrl:location.protocol+"//"+Y.portalHostname:""},ea=function(Y){return Object(X.a)(Object(X.a)({},Y),{baseUrl:aa(Y)})}},,,,,,,,,,,,,,,,function(R,S,N){N.d(S,"a",function(){return aa});var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,Y){var T=Object(X.a),ca=Object(X.a)({},Y),M=Y.type,U=Y.typeKeywords?Y.typeKeywords:[],da=null==M?void 0:M.toLowerCase(),ja=!1,na=!1,oa=M=!1;if("ogcfeatureserver"===da)U="featureshosted";
else if(0<(null==da?void 0:da.indexOf("service"))||"feature collection"===da||"kml"===da||"wms"===da||"wmts"===da||"wfs"===da){var ra=-1<U.indexOf("Hosted Service");"feature service"===da||"feature collection"===da||"kml"===da||"wfs"===da?(oa=-1<U.indexOf("Table"),ja=-1<U.indexOf("Route Layer"),na=-1<U.indexOf("Markup"),U=(M=-1!==U.indexOf("Spatiotemporal"))&&oa?"spatiotemporaltable":oa?"table":ja?"routelayer":na?"markup":M?"spatiotemporal":ra?"featureshosted":"features"):"map service"===da||"wms"===
da||"wmts"===da?U=ra||-1<U.indexOf("Tiled")||"wmts"===da?"maptiles":"mapimages":"scene service"===da?U=-1<U.indexOf("Line")?"sceneweblayerline":-1<U.indexOf("3DObject")?"sceneweblayermultipatch":-1<U.indexOf("Point")?"sceneweblayerpoint":-1<U.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<U.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<U.indexOf("Polygon")?"sceneweblayerpolygon":-1<U.indexOf("Building")?"sceneweblayerbuilding":-1<U.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===
da?(M=-1<U.indexOf("Elevation 3D Layer"),U=-1<U.indexOf("Tiled Imagery"),U=M?"elevationlayer":U?"tiledimagerylayer":"imagery"):U="stream service"===da?"streamlayer":"vector tile service"===da?"vectortile":"datastore catalog service"===da?"datastorecollection":"geocoding service"===da?"geocodeservice":"geoprocessing service"===da&&-1<U.indexOf("Web Tool")?"tool":"layers"}else U="web map"===da||"cityengine web scene"===da?"maps":"web scene"===da?-1<U.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":
"web mapping application"===da&&-1<(null==U?void 0:U.indexOf("configurableApp"))?"instantapps":"web mapping application"===da||"mobile application"===da||"application"===da||"operation view"===da||"desktop application"===da?"apps":"map document"===da||"map package"===da||"published map"===da||"scene document"===da||"globe document"===da||"basemap package"===da||"mobile basemap package"===da||"mobile map package"===da||"project package"===da||"project template"===da||"pro map"===da||"layout"===da||
"layer"===da&&-1<U.indexOf("ArcGIS Pro")||"explorer map"===da&&-1<U.indexOf("Explorer Document")?"mapsgray":"service definition"===da||"csv"===da||"administrative report"===da||"shapefile"===da||"cad drawing"===da||"geojson"===da||"360 vr experience"===da||"netcdf"===da?"datafiles":"explorer add in"===da||"desktop add in"===da||"windows viewer add in"===da||"windows viewer configuration"===da?"appsgray":"arcgis pro add in"===da||"arcgis pro configuration"===da?"addindesktop":"rule package"===da||
"file geodatabase"===da||"csv collection"===da||"kml collection"===da||"windows mobile package"===da||"map template"===da||"desktop application template"===da||"arcpad package"===da||"code sample"===da||"form"===da||"document link"===da||"vector tile package"===da||"operations dashboard add in"===da||"rules package"===da||"image"===da||"workflow manager package"===da||"explorer map"===da&&-1<U.indexOf("Explorer Mapping Application")||-1<U.indexOf("Document")?"datafilesgray":"network analysis service"===
da||"geoprocessing service"===da||"geodata service"===da||"geometry service"===da||"geoprocessing package"===da||"locator package"===da||"geoprocessing sample"===da||"workflow manager service"===da||"raster function template"===da||"deep learning package"===da?"toolsgray":"layer"===da||"layer package"===da||"explorer layer"===da?"layersgray":"scene package"===da?"scenepackage":"tile package"===da?"tilepackage":"storymap"===da?"storymap":"storymap theme"===da?"storymaptheme":"web experience"===da?
"experiencebuilder":"web experience template"===da?"webexperiencetemplate":"task file"===da?"taskfile":"report template"===da?"report-template":"statistical data collection"===da?"statisticaldatacollection":"insights workbook"===da?"workbook":"insights model"===da?"insightsmodel":"insights page"===da?"insightspage":"hub initiative"===da?"hubinitiative":"hub page"===da?"hubpage":"hub site application"===da?"hubsite":"relational database connection"===da?"relationaldatabaseconnection":"big data file share"===
da||"data store"===da?"datastorecollection":"image collection"===da?"imagecollection":"desktop style"===da?"desktopstyle":"style"===da?"style":"dashboard"===da?"dashboard":"feed"===da?"feed":"real time analytic"===da?"realtimeanalytics":"big data analytic"===da?"bigdataanalytics":"notebook"===da?"notebook":"notebook code snippets"===da?"notebookcodesnippets":"maps";return T(ca,{iconURI:ea+"/"+U+"16.png"})})},,,function(R,S,N){N.d(S,"a",function(){return aa});var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,
Y){var T=Object(X.a),ca=Object(X.a)({},Y),M,U,da="notebook"!==(null===(M=Y.type)||void 0===M?void 0:M.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"===(null===(U=Y.type)||void 0===U?void 0:U.toLowerCase())&&(da="notebook-code-snippet-thumb.png");U=ea.baseUrl+"/home/js/arcgisonline/css/images/"+da;M=(Y.thumbnail&&(U=ea.restUrl+"/content/items/"+Y.id+"/info/"+Y.thumbnail+(ea.credential?"?token\x3d"+ea.credential.token:"")),U);return T(ca,{thumbURI:M})})},function(R,
S,N){N.d(S,"a",function(){return ea});var X=N(0);R=N(15);var aa=function(Y,T){return T.description?T.description.replace(/src=('|")js\/jsapi\/esri\//g,function(ca){return"src\x3d"+('"'===ca[4]?'"':"'")+Y.baseUrl+"/home/js/jsapi/esri/"}):void 0},ea=Object(R.a)(function(Y,T){return Object(X.a)(Object(X.a)({},T),{patchedDescription:aa(Y,T)})})},function(R,S,N){N.d(S,"a",function(){return Y});var X=N(0),aa=N(124);R=N(15);var ea=N(58),Y=Object(R.a)(function(T,ca){var M=Object(X.a),U=Object(X.a)({},ca),
da,ja=ca.type,na=ca.typeKeywords||[],oa=ja,ra=(null==T?void 0:T.portalUser)||(null==T?void 0:T.user);if("Feature Service"===ja||"Feature Collection"===ja){if(oa=-1<na.indexOf("Table")?"Table":-1<na.indexOf("Route Layer")?"Route Layer":-1<na.indexOf("Markup")?"Markup":"Feature Layer",ra&&Object(ea.d)(ca,ra)&&-1<(null==na?void 0:na.indexOf("Hosted Service")))na=(null===(da=null===document||void 0===document?void 0:document.documentElement)||void 0===da?void 0:da.lang)||"en",oa=oa+" ("+(aa.a[na]||aa.a[na.split("-")[0]]||
aa.a.en)+")"}else"Image Service"===ja?(da=-1<na.indexOf("Elevation 3D Layer"),na=-1<na.indexOf("Tiled Imagery"),oa=da?"Elevation Layer":na?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===ja?oa="Scene Layer":"Scene Package"===ja?oa="Scene Layer Package":"Stream Service"===ja?oa="Feature Layer":"Geocoding Service"===ja?oa="Locator":"Microsoft Powerpoint"===ja?oa="Microsoft PowerPoint":"OGCFeatureServer"===ja?oa="OGC Feature Layer":"GeoJson"===ja?oa="GeoJSON":"Globe Service"===ja?oa="Globe Layer":
"Vector Tile Service"===ja?oa="Tile Layer":"netCDF"===ja?oa="NetCDF":"Map Service"===ja?oa=-1===na.indexOf("Spatiotemporal")&&(-1<na.indexOf("Hosted Service")||-1<na.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":ja&&-1<ja.toLowerCase().indexOf("add in")?oa=ja.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===ja?oa="Big Data File Share":"Web Mapping Application"===ja&&(null==na?0:na.includes("configurableApp"))?oa="Instant App":"Data Store"===ja&&(na.includes("cloudStore_amazon")||na.includes("cloudStore_azure")?
oa+=" (Cloud)":(na.includes("fileShare")||na.includes("hdfs")||na.includes("hive")||na.includes("bigDataFileShare")&&na.includes("dataStore"))&&(oa+=" (Big Data File Share)"));return M(U,{displayName:oa})})},function(R,S,N){N.d(S,"a",function(){return ea});var X=N(0);R=N(15);var aa=function(Y,T){var ca=[],M=Y.typeKeywords?Y.typeKeywords:[];return Y.contentStatus&&("org_authoritative"===Y.contentStatus||"public_authoritative"===Y.contentStatus?ca.push("authoritative"):"deprecated"===Y.contentStatus&&
ca.push("deprecated")),Y.origin&&ca.push("collaboration"),Y.groupDesignations&&-1<Y.groupDesignations.indexOf("livingatlas")&&ca.push("livingAtlas"),-1<M.indexOf("Requires Credits")?ca.push("premium"):-1<M.indexOf("Requires Subscription")&&ca.push("subscriber"),-1<M.indexOf("Public Data Collection")&&((null==T?void 0:T.portalUser)||(null==T?void 0:T.user))&&ca.push("publicDataCollection"),"Solution"===Y.type&&-1<Y.typeKeywords.indexOf("ArcGIS Solution")&&ca.push("solution"),T.isPortal&&"Web Mapping Application"===
Y.type&&(-1<Y.typeKeywords.indexOf("Story Map")&&ca.push("retiredStoryMap"),function(U){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(da){var ja,
na=-1<da.indexOf(".html");return-1<(null===(ja=U.url)||void 0===ja?void 0:ja.indexOf("/apps/"+da+(na?"":"/")))})}(Y)&&ca.push("retiredApp")),ca},ea=Object(R.a)(function(Y,T){return Object(X.a)(Object(X.a)({},T),{badges:aa(T,Y)})})},function(R,S,N){N.d(S,"a",function(){return X});var X={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",
he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",
vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},function(R,S,N){N.d(S,"a",function(){return T});N.d(S,"d",function(){return ca});N.d(S,"c",function(){return M});N.d(S,"b",function(){return U});N.d(S,"f",function(){return da});N.d(S,"h",function(){return ja});N.d(S,"g",function(){return na});N.d(S,"i",function(){return oa});N.d(S,"e",function(){return ra});N.d(S,"m",function(){return ua});N.d(S,"l",function(){return wa});N.d(S,"k",function(){return Ba});
N.d(S,"o",function(){return Da});N.d(S,"j",function(){return La});N.d(S,"p",function(){return Ga});N.d(S,"n",function(){return xa});var X=N(0);R=N(65);var aa=N.n(R),ea=N(30),Y=N(51),T="CHANGE_PAGE",ca="CHANGE_SORT_ORDER",M="CHANGE_SORT_FIELD",U="CHANGE_SEARCH_STRING",da="FETCH_RESOURCES",ja="FETCH_RESOURCES_SUCCESS",na="FETCH_RESOURCES_FAILED",oa="UPDATE_ACTIVE_FILTERS",ra="CLEAR_ALL_FILTERS",ua=function(Ca){return{type:ca,payload:Ca}},wa=function(Ca){return{type:M,payload:Ca}},Ba=function(Ca){return{type:U,
payload:Ca}},Da=function(){return function(Ca,ta){var qa=ta();if(!1===qa.ui.resourceSectionVisible)Ca({type:na});else{Ca({type:da});var za=Object(ea.v)(qa.request,qa.item.url),va=Object(ea.r)(qa.request,qa.portal,qa.item.owner);aa()([za,va]).then(function(pa){if("Geoprocessing Service"===qa.item.type&&pa[0].tasks&&0<pa[0].tasks.length){var sa=pa[0].tasks.map(function(ya){return Object(ea.v)(qa.request,qa.item.url+"/"+ya)});aa()(sa).then(function(ya){Ca({type:ja,payload:{resources:ya.map(function(Ha){return Object(X.a)({type:"task"},
Ha)}).filter(qa.config.allowed),resourcesPerPage:qa.config.resourcesPerPage,owner:Object(Y.m)(qa.portal,pa[1]),service:Object(X.a)({},pa[0])}})},function(){Ca({type:na})})}else"Big Data File Share"===qa.item.type&&pa[0].children&&0<pa[0].children.length?(sa=pa[0].children.map(function(ya){return Object(ea.v)(qa.request,qa.item.url+"/"+ya.name)}),aa()(sa).then(function(ya){Ca({type:ja,payload:{resources:ya.map(function(Ha,Ea){return Object(X.a)(Object(X.a)({},pa[0].children[Ea]),Ha)}).filter(qa.config.allowed),
resourcesPerPage:qa.config.resourcesPerPage,owner:Object(Y.m)(qa.portal,pa[1]),service:Object(X.a)({},pa[0])}})},function(){Ca({type:na})})):pa[0].layers&&0<pa[0].layers.length||pa[0].tables&&0<pa[0].tables.length?(pa[0].layers=pa[0].layers.concat(pa[0].tables),sa=pa[0].layers.map(function(ya){return Object(ea.v)(qa.request,qa.item.url+"/"+ya.id)}),aa()(sa).then(function(ya){Ca({type:ja,payload:{resources:ya.map(function(Ha,Ea){return Object(X.a)(Object(X.a)({},pa[0].layers[Ea]),Ha)}).filter(qa.config.allowed),
resourcesPerPage:qa.config.resourcesPerPage,owner:Object(Y.m)(qa.portal,pa[1]),service:Object(X.a)({},pa[0])}})},function(){Ca({type:na})})):Object(ea.v)(qa.request,qa.item.url).then(function(ya){Ca({type:ja,payload:{resources:[ya].map(function(Ha){return Object(X.a)(Object(X.a)({},qa.item),Ha)}).filter(qa.config.allowed),resourcesPerPage:qa.config.resourcesPerPage,owner:Object(Y.m)(qa.portal,pa[1]),service:Object(X.a)({},pa[0])}})},function(){Ca({type:na})})},function(pa){Ca({type:na})})}}},La=function(Ca){return{type:T,
payload:Ca}},Ga=function(Ca,ta){return{type:oa,payload:{index:Ca,filter:ta}}},xa=function(){return{type:ra}}},function(R,S,N){function X(Y){var T=Object(aa.b)(Y.settings.config.customSections,Y.parameters.section);return(null==T?0:T.portal)?Object(ea.b)(T.portal):Y.settings.utils.portal}N.d(S,"a",function(){return X});var aa=N(86),ea=N(101)},,,,,,,,,,,,,,,function(R,S,N){N.d(S,"b",function(){return X});N.d(S,"a",function(){return aa});var X={maps:'(type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package"))',
webMaps:'(type:("Web Map" OR "CityEngine Web Scene") -type:("Web Mapping Application"))',mapFiles:'(type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template"))',layers:'(type:("OGCFeatureServer" OR "Scene Service" OR "Feature Collection" OR "Route Layer" OR "Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "Feature Service" OR "Stream Service" OR "Map Service" OR "Vector Tile Service" OR "Image Service" OR "WMS" OR "WFS" OR "Feed" OR "WMTS" OR "KML" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR "Globe Service" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Relational Database Connection") -type:("Web Mapping Application" OR "Geodata Service"))',
featureLayers:'(type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS" OR "Feed" OR "OGCFeatureServer") -typekeywords:"Table")',tileLayers:'(type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled"))',mapImageLayers:'(type:("Map Service" OR "WMS") -typekeywords:("Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile"))',imageryLayers:'(type:"Image Service")',sceneLayers:'(type:"Scene Service")',tiledImageLayers:'(type: "Image Service" typekeywords: "Tiled Imagery")',
elevationLayers:'(type: "Image Service" typekeywords: "Elevation 3D Layer")',tables:"(typekeywords:Table)",layerFiles:'(type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel") -type:("Explorer Maps" OR "Map Documents"))',scenes:'(-type:"CityEngine Web Scene" type:"Web Scene")',apps:'(type:("Code Sample" OR "Web Mapping Application" OR "StoryMap" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application" OR "Web Experience" OR "Web Experience Template" OR "Form"))',
webApps:'(type:("Web Mapping Application" OR "Dashboard"))',sites:'(type:("Hub Site Application" OR "Site Application"))',pages:'(type:("Hub Page" OR "Site Page"))',storyMaps:'(type:"StoryMap")',experienceApps:'(type:("Web Experience" OR "Web Experience Template"))',instantApps:'typekeywords:"configurableApp"',mobileApps:'(type:"Mobile Application")',desktopApps:'(type:"Desktop Application" -type:"Desktop Application Template")',tools:'((typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration" OR (type:("Big Data Analytic" OR "Real Time Analytic")) OR (type:"Geoprocessing Service" AND typekeywords: "Web Tool")) -type:"KML")',
analytics:'(type:("Big Data Analytic" OR "Real Time Analytic"))',locators:'(type:("Geocoding Service" OR "Locator Package"))',geodatabaseAccess:'(type:"Geodata Service")',geometricOperations:'(type:"Geometry Service")',geoprocessingTasks:'(type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample"))',networkAnalysis:'(type:"Network Analysis Service")',files:'((typekeywords:"Document" OR type:"CSV" OR type: "Administrative Report" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF") -type:("Map Document" OR "Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document" OR "Microsoft Excel"))',
documents:'(typekeywords:"Document" -type:"PDF")',images:'(type:("Image" OR "360 VR Experience") -type:"Image Service")',pdfs:'(type:"PDF")',csvs:'(type:"CSV")',reports:'(type: "Administrative Report")',webTools:'(type:"Geoprocessing Service" AND typekeywords: "Web Tool")',notebooks:'(type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook"))',bigDataFileShares:'type:("Big Data File Share")',rasterFunctionTemplates:'type:("Raster function template")',deepLearningPackages:'type:("Deep Learning Package")',
solution:'type:("Solution")',knowledgeGraphs:'(type:"Knowledge Graph")'},aa="Web Map;CityEngine Web Scene;Web Scene;360 VR Experience;Pro Map;Feature Service;Map Service;Image Service;KML;KML Collection;WFS;WMTS;Feature Collection;Feature Collection Template;Vector Tile Service;Scene Service;Relational Database Connection;Web Mapping Application;Mobile Application;Code Attachment;Operations Dashboard Add In;Native Application;Native Application Template;Native Application Installer;Workforce Project;Form;Insights Workbook;Insights Data Engineering Workbook;Insights Model;Insights Data Engineering Model;Insights Page;Dashboard;Hub Initiative;Hub Site Application;Hub Page;Site Application;Site Page;AppBuilder Widget Package;Symbol Set;Color Set;Shapefile;File Geodatabase;CSV;Administrative Report;CAD Drawing;Service Definition;Microsoft Word;Microsoft Powerpoint;Microsoft Excel;PDF;Image;Visio Document;iWork Keynote;iWork Pages;iWork Numbers;Report Template;Statistical Data Collection;Map Document;Map Package;Mobile Basemap Package;Mobile Map Package;Tile Package;Vector Tile Package;Project Package;Task File;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package;Pro Map;Layout;Project Template;Layer;Layer Package;Explorer Layer;Scene Package;Image Collection;Desktop Style;Geoprocessing Package;Geoprocessing Package (Pro version);Geoprocessing Sample;Locator Package;Rule Package;Raster function template;Deep Learning Package;ArcGIS Pro Configuration;Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In;ArcGIS Pro Add In;Geometry Service;Geocoding Service;Network Analysis Service;Geoprocessing Service;Workflow Manager Service;Big Data File Share;Web Tool;Notebook;Web Experience;Web Experience Template;Feed;Real Time Analytic;Big Data Analytic;OGCFeatureServer;Solution;Knowledge Graph".split(";")},
,,,,,,function(R,S,N){N.d(S,"a",function(){return aa});var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,Y){var T=Object(X.a),ca=Object(X.a)({},Y);var M=Y.thumbnail?ea.restUrl+"/community/users/"+Y.username+"/info/"+Y.thumbnail+(ea.credential?"?token\x3d"+ea.credential.token:""):void 0;return T(ca,{thumbURI:M})})},,function(R,S){R.exports=f},function(R,S){R.exports=c},,,,,,,,,,,function(R,S,N){function X(Ba,Da){var La=["",{method:"get",query:Da.settings.config.addRequestParameters?Object(Y.a)({f:"json",
q:Object(ca.b)(Da),num:Ba.num?Ba.num:Da.settings.config.resultsPerQuery,sortOrder:Da.parameters.sort.order,start:Ba.start?Ba.start:1},Da.settings.config.addRequestParameters()):{f:"json",q:Object(ca.b)(Da),num:Ba.num?Ba.num:Da.settings.config.resultsPerQuery,sortOrder:Da.parameters.sort.order,start:Ba.start?Ba.start:1}}];return Object(T.a)(na(Da),oa(Da),ra(Da),ua(Da))(La)}function aa(Ba,Da){var La=["",{method:"get",query:{f:"json",q:Object(ca.a)(Ba),num:0,countFields:Da.join(", "),countSize:200}}];
return ja(Ba)(La)}function ea(Ba,Da){var La=["",{method:"get",query:{f:"json",q:Object(ca.c)(Ba,Da),num:0,countFields:"tags",countSize:200}}];return ja(Ba)(La)}N.d(S,"b",function(){return X});N.d(S,"a",function(){return aa});N.d(S,"c",function(){return ea});var Y=N(0),T=N(63);R=N(15);var ca=N(179),M=N(356),U=N(126),da=N(86),ja=function(Ba){return Object(T.a)(ua(Ba),wa(Ba),ra(Ba))},na=Object(R.a)(function(Ba,Da){var La=Da[0],Ga=Da[1],xa=Ba.parameters.sort.field;return"relevance"!==xa?[La,Object(Y.a)(Object(Y.a)({},
Ga),{query:Object(Y.a)(Object(Y.a)({},Ga.query),{sortField:xa})})]:[La,Ga]}),oa=Object(R.a)(function(Ba,Da){var La=Da[0],Ga=Da[1];if(Ba.parameters.filter.searchMapArea){var xa=Ba.parameters.extent.area;xa=xa.minx+","+xa.miny+","+xa.maxx+","+xa.maxy;return[La,Object(Y.a)(Object(Y.a)({},Ga),{query:Object(Y.a)(Object(Y.a)({},Ga.query),{bbox:xa})})]}return[La,Ga]}),ra=Object(R.a)(function(Ba,Da){var La=Da[0],Ga=Da[1],xa=Object(M.a)(Ba);return xa?[La,Object(Y.a)(Object(Y.a)({},Ga),{query:Object(Y.a)(Object(Y.a)({},
Ga.query),{enriched:xa})})]:[La,Ga]}),ua=Object(R.a)(function(Ba,Da){Da[0];var La=Da[1],Ga=Ba.parameters,xa=Ga.section;Ga=Ga.filter;var Ca=Object(U.a)(Ba),ta=Ca.restUrl+"/search";if("myGroups"===xa&&Ga.group)ta=Ca.restUrl+"/content/groups/"+Ga.group.id+"/search",Ga.groupCategories&&(ta=ta+"?categories\x3d"+encodeURIComponent(JSON.stringify([Ga.groupCategories.value])));else if("livingAtlas"!==xa&&"Living Atlas"!==xa||!Ba.results.livingAtlas.groupId)if(!Ga.orgCategories||"myOrganization"!==xa&&"myContent"!==
xa){if(xa=Object(da.b)(Ba.settings.config.customSections,xa))Object(da.d)(xa)&&Ga.orgCategories&&(ta=ta+"?categories\x3d"+encodeURIComponent(JSON.stringify([Ga.orgCategories.value]))),(xa=Object(da.c)(xa))&&(ta=Ca.restUrl+"/content/groups/"+xa.id+"/search",Ga.groupCategories&&(ta=ta+"?categories\x3d"+encodeURIComponent(JSON.stringify([Ga.groupCategories.value]))))}else ta=ta+"?categories\x3d"+encodeURIComponent(JSON.stringify([Ga.orgCategories.value]));else ta=Ca.restUrl+"/content/groups/"+Ba.results.livingAtlas.groupId+
"/search",Ga.livingAtlasCategories?(ta=ta+"?categories\x3d"+encodeURIComponent(JSON.stringify([Ga.livingAtlasCategories.value])),Ga.livingAtlasRegion&&(ta=ta+"\x26categories\x3d"+encodeURIComponent(JSON.stringify([Ga.livingAtlasRegion.value])))):Ga.livingAtlasRegion&&(ta=ta+"?categories\x3d"+encodeURIComponent(JSON.stringify([Ga.livingAtlasRegion.value])));return[ta,La]}),wa=Object(R.a)(function(Ba,Da){var La=Da[0],Ga=Da[1],xa=Ba.parameters.section,Ca=Object(da.b)(Ba.settings.config.customSections,
xa);return"myGroups"===xa&&Ba.parameters.filter.group||("livingAtlas"===xa||"Living Atlas"===xa)&&Ba.results.livingAtlas.groupId||Ca&&Object(da.c)(Ca)?[La,Object(Y.a)(Object(Y.a)({},Ga),{query:Object(Y.a)(Object(Y.a)({},Ga.query),{countFields:Ga.query.countFields?Ga.query.countFields.replace("categories","groupcategories"):void 0})})]:[La,Ga]})},,,,,,,,function(R,S){var N=function(){return this}();try{N=N||(new Function("return this"))()}catch(X){"object"==typeof window&&(N=window)}R.exports=N},,
,function(R,S,N){N.d(S,"a",function(){return T});N.d(S,"c",function(){return ca});N.d(S,"b",function(){return M});N.d(S,"d",function(){return U});N.d(S,"h",function(){return da});N.d(S,"i",function(){return ja});N.d(S,"j",function(){return na});N.d(S,"e",function(){return oa});N.d(S,"g",function(){return ra});N.d(S,"f",function(){return ua});N.d(S,"l",function(){return wa});N.d(S,"k",function(){return Da});N.d(S,"m",function(){return La});R=N(65);var X=N.n(R);R=N(56);var aa=N.n(R),ea=N(30),Y=N(48),
T="ADD_TO_FAVORITES",ca="ADD_TO_FAVORITES_SUCCESS",M="ADD_TO_FAVORITES_FAIL",U="LOADING_USER_INFO",da="UPDATE_GROUP_CATEGORIES",ja="UPDATE_USER_INFO",na="UPDATE_USER_INFO_FAILED",oa="REMOVE_FROM_FAVORITES",ra="REMOVE_FROM_FAVORITES_SUCCESS",ua="REMOVE_FROM_FAVORITES_FAIL",wa=function(){return function(Ga,xa){var Ca=xa(),ta=Ca.parameters.filter.group,qa=Ca.results.user.groupCategories;if("loaded"===Ca.results.user.status)return ta&&!qa[ta.id]?Ga(Ba(ta.id)):(new aa.a).resolve();if("failed"===Ca.results.user.status)return(new aa.a).reject();
Ga({type:U});qa=Ca.settings.utils;Ca=qa.request;qa=qa.portal;return X()([Object(ea.r)(Ca,qa).then(function(za){return za.groups.map(function(va){return{id:va.id,title:va.title}})}),Object(ea.s)(Ca,qa).then(function(za){return za.folders.map(function(va){return{id:va.id,title:va.title}})}),Object(ea.t)(Ca,qa,qa.user.favGroupId).then(function(za){return za.items.reduce(function(va,pa){return va[pa.id]=!0,va},{})})].concat(ta?[Ga(Ba(ta.id))]:[])).then(function(za){Ga({type:ja,payload:{groups:za[0],folders:za[1],
favorites:za[2]}})},function(za){Ga({type:na})})}},Ba=function(Ga){return function(xa,Ca){var ta=Ca().settings.utils;return Object(ea.f)(ta.request,ta.portal,Ga).then(function(qa){xa({type:da,payload:{id:Ga,categorySchema:qa.categorySchema}})})}},Da=function(Ga){return function(xa,Ca){var ta=Ca(),qa=ta.settings.utils.portal,za=qa.restUrl+"/content/items/"+Ga.id+"/share";qa={f:"json",everyone:Ga.access&&"public"===Ga.access||Ga.sharing&&Ga.sharing.access&&"public"===Ga.sharing.access,org:Ga.access&&
"org"===Ga.access||Ga.sharing&&Ga.sharing.access&&"org"===Ga.sharing.access||!1,groups:[qa.user.favGroupId],items:[Ga.id]};xa({type:T,payload:Ga});ta.settings.utils.request(za,{method:"post",query:qa}).then(function(va){xa({type:ca,payload:Ga})},function(va){xa({type:M,payload:Ga})})}},La=function(Ga){return function(xa,Ca){var ta=Ca(),qa=ta.settings.utils.portal,za=qa.user.favGroupId,va=qa.restUrl+"/content/items/"+Ga.id+"/unshare",pa={f:"json",everyone:!1,org:!1,groups:[za],items:[Ga.id]};xa({type:oa,
payload:Ga});ta.settings.utils.request(va,{method:"post",query:pa}).then(function(sa){function ya(){xa({type:ra,payload:Ga})}"myFavorites"===(ta=Ca()).parameters.section?function Ea(){ta.settings.utils.request(qa.restUrl+"/search",{query:{f:"json",q:"(id:"+Ga.id+") (group:"+za+")"},method:"get"}).then(function(Aa){0<Aa.data.total?setTimeout(function(){Ea()},250):(ya(),xa(Object(Y.i)()))},function(Aa){ya()})}():ya()},function(sa){xa({type:ua,payload:Ga})})}}},,,,,function(R,S){R.exports=a},function(R,
S,N){function X(ta){return Object(T.a)(ca.b,xa(ta),Ca(ta),Object(M.a)(ta.parameters.filter.orgGroup),Object(U.a)(ta.parameters.filter.status,ta.settings.utils.portal.user),Ga(ta),Object(da.a)(ta.parameters.filter.shared),Object(ja.a)(ta.parameters.filter.dateCreated),Object(ja.b)(ta.parameters.filter.dateModified),Object(na.a)(Ba.b,{allowedItemTypes:ta.settings.config.allowedItemTypes,itemTypeFilter:ta.parameters.filter.itemType,specialItemQ:ta.settings.config.specialItemQ}),Object(oa.b)(ta.parameters.filter.tags),
Object(ra.a)(ta.parameters.filter.origins))([ta.parameters.searchString.current]).join(" ")}function aa(ta){return Object(T.a)(ca.b,xa(ta),Ga(ta),Object(na.a)(Ba.b,{allowedItemTypes:ta.settings.config.allowedItemTypes,specialItemQ:ta.settings.config.specialItemQ}))([ta.parameters.searchString.current]).join(" ")}function ea(ta,qa){return Object(T.a)(ca.b,xa(ta),Ga(ta),Object(na.a)(Ba.b,{allowedItemTypes:ta.settings.config.allowedItemTypes,specialItemQ:ta.settings.config.specialItemQ}),Object(oa.a)(qa))([ta.parameters.searchString.current]).join(" ")}
N.d(S,"b",function(){return X});N.d(S,"a",function(){return aa});N.d(S,"c",function(){return ea});var Y=N(0),T=N(63),ca=N(99),M=N(398),U=N(399),da=N(400),ja=N(323),na=N(265),oa=N(324),ra=N(401);R=N(15);var ua=N(5),wa=N(180),Ba=N(141),Da=N(126),La=N(86),Ga=Object(R.a)(function(ta,qa){var za=ta.parameters.filter,va=ta.settings.config,pa=Object(Da.a)(ta);switch(ta.parameters.section){case "myContent":return pa.user?pa.user&&za.folder?Object(Y.g)(Object(Y.g)([],qa),['(owner:"'+pa.user.username+'") (ownerfolder:'+
za.folder.id+")"]):Object(Y.g)(Object(Y.g)([],qa),['(owner:"'+pa.user.username+'")']):qa;case "myFavorites":return pa.user?Object(Y.g)(Object(Y.g)([],qa),["(group:"+pa.user.favGroupId+")"]):qa;case "myGroups":if(ta.results.user.groups){if(ta.parameters.filter.group)return Object(Y.g)(Object(Y.g)([],qa),["(group:"+ta.parameters.filter.group.id+")"]);za=ta.results.user.groups.map(function(sa){return sa.id});return Object(Y.g)(Object(Y.g)([],qa),["(group:"+za.join(" OR group:")+")"])}return qa;case "myOrganization":return Object(Y.g)(Object(Y.g)([],
qa),["(orgid:"+pa.id+")"]);case "subscription":return Object(Y.g)(Object(Y.g)([],qa),["("+ta.results.provisionedContent.content.map(function(sa){return"id:"+sa}).join(" OR ")+")"]);case "all":return qa;default:return(za=va.customSections.filter(function(sa){return ta.parameters.section===sa.name})[0])?Object(Y.g)(Object(Y.g)([],qa),[za.baseQuery]):qa}}),xa=Object(R.a)(function(ta,qa){var za=ta.settings.config.addQueryParameters;try{if(za&&"function"==typeof za)return Object(Y.g)(Object(Y.g)([],qa),
[za(ta)])}catch(va){}return qa}),Ca=Object(R.a)(function(ta,qa){var za=Object(La.b)(ta.settings.config.customSections,ta.parameters.section);if(za&&!Object(ua.b)(ta.parameters.filter.customFilter)){var va=Object.keys(ta.parameters.filter.customFilter).filter(function(pa){return ta.parameters.filter.customFilter[pa]}).reduce(function(pa,sa){var ya,Ha=parseInt(sa,10),Ea=ta.parameters.filter.customFilter[Ha].value;if(null===(ya=null==za?void 0:za.filters)||void 0===ya?0:ya[Ha])if(ya=Object(wa.a)("children",
"value",za.filters[Ha],Ea))return Object(Y.g)(Object(Y.g)([],pa),["("+ya.q+")"]);return pa},[]).join(" AND ");return Object(Y.g)(Object(Y.g)([],qa),[""+va])}return qa})},function(R,S,N){function X(oa,ra){return M("children","value",oa,ra)}function aa(oa,ra){return U("children","value",oa,ra)}function ea(oa,ra){return function Ga(wa,Ba,Da,La){var xa,Ca=Da[wa];return Ca&&0!==Ca.length?Object(na.a)(Object(na.a)({},Da),((xa={})[wa]=Ca.reduce(function(ta,qa){return-1!==La.indexOf(qa[Ba])&&ta.push(Ga(wa,
Ba,qa,La)),ta},[]),xa)):Object(na.a)({},Da)}("children","value",oa,ra)}function Y(oa){return function(ra,ua){var wa,Ba=ua[ra];return Ba?Object(na.a)(Object(na.a)({},ua),((wa={})[ra]=function Ga(La){return 0===La.length?[]:1!==La.length||La[0][ra]?1<La.length?La.reduce(function(xa,Ca){var ta;return Ca[ra]?(xa.push(Object(na.a)(Object(na.a)({},Ca),((ta={})[ra]=Ga(Ca[ra]),ta))),xa):(xa.push(Ca),xa)},[]):Ga(La[0][ra]):La}(Ba),wa)):ua}("children",oa)}function T(oa,ra){return da("children",oa,ra)}function ca(oa,
ra){return function La(wa,Ba,Da){var Ga=Ba[wa];Ga&&Ga.forEach(function(xa){return La(wa,xa,Da)});Da(Ba)}("children",oa,ra)}function M(oa,ra,ua,wa){var Ba=ua[oa];return ua[ra]===wa?ua:Ba?Ba.reduce(function(Da,La){return Da||M(oa,ra,La,wa)},void 0):void 0}function U(oa,ra,ua,wa){if(ua=ua[oa])return ua.reduce(function(Ba,Da){return Da[ra]===wa[0]?1===wa.length?Da:U(oa,ra,Da,wa.slice(1)):Ba},void 0)}function da(oa,ra,ua){var wa;return ua(Object(na.a)(Object(na.a)({},ra),((wa={})[oa]=ra[oa]?ra[oa].map(function(Ba){return da(oa,
Ba,ua)}):void 0,wa)))}function ja(oa,ra,ua){return da(oa,ua,function(wa){var Ba=wa[ra];if(delete wa[ra],wa[oa]){var Da=wa[oa];return delete wa[oa],Object(na.a)(Object(na.a)({},wa),{value:Ba,children:Da})}return Object(na.a)(Object(na.a)({},wa),{value:Ba})})}N.d(S,"f",function(){return X});N.d(S,"d",function(){return aa});N.d(S,"i",function(){return ea});N.d(S,"e",function(){return Y});N.d(S,"h",function(){return T});N.d(S,"g",function(){return ca});N.d(S,"a",function(){return M});N.d(S,"b",function(){return U});
N.d(S,"c",function(){return ja});var na=N(0)},,function(R,S,N){function X(ca){return Object(T.h)(ca,function(M){return M.count&&delete M.count,M})}function aa(ca,M,U){if(M)return ca.counts.filter(function(da){return da.fieldName===U})[0].fieldValues.forEach(function(da){var ja=da.count;da=da.value.split("/").slice(1);(da=Object(T.d)(M,da))&&(da.count=ja)}),M}function ea(ca){ca=Object(T.c)("categories","title",{title:"root",categories:ca});return Object(T.h)(ca,function(M){return Object(Y.a)(Object(Y.a)({},
M),{value:M.value.toLowerCase(),displayName:M.displayName?M.displayName:M.value,tooltip:M.description?M.description:void 0})}).children}N.d(S,"a",function(){return X});N.d(S,"c",function(){return aa});N.d(S,"b",function(){return ea});var Y=N(0),T=N(180)},,,,,,,function(R,S){function N(){throw Error("setTimeout has not been defined");}function X(){throw Error("clearTimeout has not been defined");}function aa(ua){if(U===setTimeout)return setTimeout(ua,0);if((U===N||!U)&&setTimeout)return U=setTimeout,
setTimeout(ua,0);try{return U(ua,0)}catch(wa){try{return U.call(null,ua,0)}catch(Ba){return U.call(this,ua,0)}}}function ea(){oa&&ja&&(oa=!1,ja.length?na=ja.concat(na):ra=-1,na.length&&Y())}function Y(){if(!oa){var ua=aa(ea);oa=!0;for(var wa=na.length;wa;){ja=na;for(na=[];++ra<wa;)ja&&ja[ra].run();ra=-1;wa=na.length}ja=null;oa=!1;(function(Ba){if(da===clearTimeout)return clearTimeout(Ba);if((da===X||!da)&&clearTimeout)return da=clearTimeout,clearTimeout(Ba);try{da(Ba)}catch(Da){try{return da.call(null,
Ba)}catch(La){return da.call(this,Ba)}}})(ua)}}function T(ua,wa){this.fun=ua;this.array=wa}function ca(){}var M=R.exports={};try{var U="function"==typeof setTimeout?setTimeout:N}catch(ua){U=N}try{var da="function"==typeof clearTimeout?clearTimeout:X}catch(ua){da=X}!0;var ja,na=[],oa=!1,ra=-1;M.nextTick=function(ua){var wa=Array(arguments.length-1);if(1<arguments.length)for(var Ba=1;Ba<arguments.length;Ba++)wa[Ba-1]=arguments[Ba];na.push(new T(ua,wa));1!==na.length||oa||aa(Y)};T.prototype.run=function(){this.fun.apply(null,
this.array)};M.title="browser";M.browser=!0;M.env={};M.argv=[];M.version="";M.versions={};M.on=ca;M.addListener=ca;M.once=ca;M.off=ca;M.removeListener=ca;M.removeAllListeners=ca;M.emit=ca;M.prependListener=ca;M.prependOnceListener=ca;M.listeners=function(ua){return[]};M.binding=function(ua){throw Error("process.binding is not supported");};M.cwd=function(){return"/"};M.chdir=function(ua){throw Error("process.chdir is not supported");};M.umask=function(){return 0}},,,,function(R,S,N){function X(Y){var T,
ca;return null!==(T=Y.orgId)&&void 0!==T?T:null===(ca=Y.portal)||void 0===ca?void 0:ca.id}function aa(Y){var T;if(!Y)return!1;var ca=X(Y),M=null===(T=Y.portal)||void 0===T?void 0:T.isPortal;return!!ca&&!M&&"public_authoritative"===Y.contentStatus}function ea(Y,T,ca){return new Promise(function(M){var U=Y.map(function(da){return function(ja,na,oa){var ra="https://"+na.portalHostname+"/sharing/rest/portals/"+ja;return new Promise(function(ua){oa(ra,{method:"get",query:{f:"json"}}).then(function(wa){wa=
wa.data;var Ba=wa.thumbnail,Da=(wa.allSSL?"https://":"http://")+(wa.urlKey||"")+"."+wa.customBaseUrl+"/";ua({name:wa.name,url:Da+"home/",thumbnail:Ba?Da+"sharing/rest/portals/self/resources/"+Ba:"./images/group-no-image.png",id:ja})})})}(da,T,ca)});Promise.all(U).then(function(da){M(da.filter(function(ja){return ja}))})})}N.d(S,"b",function(){return X});N.d(S,"c",function(){return aa});N.d(S,"a",function(){return ea})},,,,,,function(R,S,N){function X(ja,na,oa){return ja.filter(function(ra,ua,wa){return wa.indexOf(ra)===
ua&&!na.hasOwnProperty(ra)&&-1===oa.indexOf(ra)})}N.d(S,"c",function(){return T});N.d(S,"d",function(){return ca});N.d(S,"a",function(){return M});N.d(S,"b",function(){return U});N.d(S,"e",function(){return da});var aa=N(0),ea=N(193),Y=N(309),T="USER_THUMBNAILS_LOAD_START",ca="USER_THUMBNAILS_LOAD_SUCCESS",M="ORG_THUMBNAILS_LOAD_START",U="ORG_THUMBNAILS_LOAD_SUCCESS",da=function(ja,na){var oa=na(),ra=oa.settings.utils,ua=ra.request;ra=ra.portal;var wa=oa.ui.pagination;oa=wa.displayItems;var Ba=wa.userThumbnailCache,
Da=wa.pendingUserThumbRequests,La=wa.orgThumbnailCache;wa=wa.pendingOrgThumbRequests;La=X(oa.filter(ea.c).map(ea.b),La,wa);oa=X(oa.map(function(Ga){return Ga.owner}),Ba,Da);if(0!==oa.length||0!==La.length)ja({type:T,payload:oa}),ja({type:M,payload:La}),oa=Object(Y.a)(oa,ra,ua),ua=Object(ea.a)(La,ra,ua),Promise.all([oa,ua]).then(function(Ga){var xa=Ga[0];Ga=Ga[1];xa=(null==xa?void 0:xa.reduce(function(Ca,ta){var qa;return Object(aa.a)(Object(aa.a)({},Ca),((qa={})[ta.username]={thumbnail:ta.thumbURI||
ta.thumbnail,username:ta.username,fullName:ta.fullName,id:ta.id},qa))},{}))||{};Ga=(null==Ga?void 0:Ga.reduce(function(Ca,ta){var qa;return Object(aa.a)(Object(aa.a)({},Ca),((qa={})[ta.id]=ta,qa))},{}))||{};ja({type:ca,payload:xa});ja({type:U,payload:Ga})})}},,,,,,function(R,S){R.exports=b},function(R,S){R.exports=p},,,,,,,,,,function(R,S){R.exports=q},function(R,S,N){N.d(S,"a",function(){return U});var X=N(0);R=N(56);var aa=N.n(R);R=N(65);var ea=N.n(R);R=N(15);var Y=N(99),T=N(30),ca=N(325),M=N(126),
U=Object(R.a)(function(da,ja){var na=da.settings.utils.request,oa=Object(M.a)(da),ra=new aa.a,ua=ja.data.results.filter(function(wa){return wa.orgId&&!da.results.allOrganizations[wa.orgId]}).map(function(wa){return wa.orgId}).filter(Y.e).map(function(wa){return Object(T.m)(na,oa,wa)});return ea()(ua).then(function(wa){ra.resolve(Object(X.a)(Object(X.a)({},ja),{data:Object(X.a)(Object(X.a)({},ja.data),{organizations:wa.reduce(function(Ba,Da){var La;return Object(X.a)(Object(X.a)({},Ba),((La={})[Da.id]=
Object(ca.a)(Da),La))},{})})}))},function(wa){ra.reject(wa)}),ra})},,,,,,,,,function(R,S,N){N.d(S,"c",function(){return X});N.d(S,"d",function(){return aa});N.d(S,"e",function(){return ea});N.d(S,"b",function(){return Y});N.d(S,"f",function(){return T});N.d(S,"g",function(){return ca});N.d(S,"a",function(){return M});N.d(S,"h",function(){return U});N.d(S,"i",function(){return da});N.d(S,"j",function(){return ja});var X="MAXIMIZE_DLG",aa="MINIMIZE_DLG",ea="TOGGLE_EXPANDED_FILTERS",Y="CLOSE_FULLSCREEN_BROWSER",
T="TOGGLE_EXPANDED_SORT",ca="UPDATE_SUBLAYER_CARD_STATE",M="CLOSE_EXPANDED_SORT",U=function(){return{type:M}},da=function(){return{type:ea}},ja=function(){return{type:T}}},function(R,S,N){N.d(S,"a",function(){return ea});var X=N(0),aa=N(101),ea=function(Y){var T=Object(X.a),ca=Object(X.a)({},Y),M=Object(aa.a)(Y);return T(ca,{thumbURI:Y.thumbnail?M+"/sharing/rest/portals/"+Y.id+"/resources/"+Y.thumbnail:M+"/home/images/group-no-image.png"})}},function(R,S,N){N.d(S,"a",function(){return ea});var X=
N(0),aa=N(101),ea=function(Y){return Object(X.a)(Object(X.a)({},Y),{orgUrl:Object(aa.a)(Y)+"/home/index.html"})}},,,,,,,,,,,,,,,,,,,,,,,,,,function(R,S){R.exports=t},function(R,S){R.exports=m},function(R,S,N){N.d(S,"a",function(){return Y});N.d(S,"b",function(){return T});N.d(S,"c",function(){return ca});N.d(S,"d",function(){return M});R=N(56);var X=N.n(R),aa=N(30),ea=N(78),Y="UPDATE_PROVISIONED_CONTENT",T="UPDATE_PROVISIONED_CONTENT_FAILED",ca="UPDATE_PROVISIONED_CONTENT_SUCCESS",M=function(){return function(U,
da){var ja=da();if("loaded"===ja.results.provisionedContent.status)return(new X.a).resolve();if("failed"===ja.results.provisionedContent.status)return(new X.a).reject();U({type:Y});var na=ja.settings.utils,oa=na.portal;return Object(aa.d)(na.request,oa,oa.user.username).then(function(ra){U({type:ca,payload:ra.filter(function(ua){return-1<ja.settings.config.allowedItemTypes.indexOf(ua.type)}).map(function(ua){return Object(ea.a)(oa,ja.settings.utils.iconDir,ua)})})},function(ra){U({type:T})})}}},,
,,,,,,function(R,S,N){N.d(S,"a",function(){return M});N.d(S,"c",function(){return U});N.d(S,"d",function(){return da});N.d(S,"b",function(){return ja});N.d(S,"e",function(){return na});var X=N(0);R=N(65);var aa=N.n(R);R=N(56);var ea=N.n(R),Y=N(99),T=N(30);R=N(15);var ca=N(86),M="LOADING_CUSTOM_SECTION_INFO",U="UPDATE_CUSTOM_SECTION_SCHEMAS",da="UPDATE_CUSTOM_SECTION_INFO_FAILED",ja="UPDATE_CUSTOM_SECTION_GROUPS",na=function(){return function(ua,wa){function Ba(Ga){ua({type:da})}var Da=wa();if("loaded"===
Da.results.customSections.status)return(new ea.a).resolve();if("failed"===Da.results.customSections.status)return(new ea.a).reject();ua({type:M});var La=Object(Y.f)("id",Da.settings.config.customSections.filter(ca.f).map(ca.a).reduce(function(Ga,xa){return Object(X.g)(Object(X.g)([],Ga),xa)},[]));return oa(ua,wa,La).then(function(){return Da=wa(),aa()(La.map(function(Ga){return ra(Da,Ga).then(function(xa){return{id:Ga.id,type:Ga.type,response:xa}})}))},Ba).then(function(Ga){return ua({type:U,payload:Ga})},
Ba)}},oa=function(ua,wa,Ba){var Da=wa(),La=new ea.a;if(0<Ba.length){Da=Da.settings.utils;var Ga=Da.request,xa=Da.portal;Ba=Ba.filter(function(Ca){return"group"===Ca.type}).map(function(Ca){var ta=Ca.id;return Object(T.e)(Ga,xa,Ca.fetchGroupIdByQuery||"id:"+ta).then(function(qa){return qa.results[0]||{}})});aa()(Ba).then(function(Ca){var ta=wa();ua({type:ja,payload:{currentSection:ta.parameters.section,customSections:ta.settings.config.customSections,groups:Ca}});La.resolve()})}else La.resolve();return La},
ra=Object(R.a)(function(ua,wa){var Ba=ua.settings.utils,Da=Ba.request;Ba=Ba.portal;return wa.staticSchema?(Da=new ea.a,Da.resolve({categorySchema:wa.staticSchema}),Da.then(function(La){return La})):"group"===wa.type?Object(T.f)(Da,Ba,wa.id):Object(T.j)(Da,Ba,wa.id)})},function(R,S,N){function X(T){if(0<T.length){var ca=ea.a.filter(function(M){return-1===T.indexOf(M)}).filter(function(M){return T.reduce(function(U,da){return-1<M.indexOf(da)||U},!1)});return'((type:"'+T.join('" OR type:"')+'")'+(0<
ca.length?' AND (-type:"'+ca.join('" AND -type:"')+'")':"")+")"}return""}N.d(S,"a",function(){return Y});var aa=N(0),ea=N(141);R=N(15);var Y=Object(R.a)(function(T,ca,M){var U=ca.itemTypeFilter,da=ca.allowedItemTypes;ca=ca.specialItemQ;return U?0<da.length&&ca?Object(aa.g)(Object(aa.g)([],M),[T[U.value]+" AND ("+ca+" OR ("+X(da)+"))"]):0<da.length||ca?Object(aa.g)(Object(aa.g)([],M),[T[U.value]+" AND ("+(ca?""+ca:""+X(da))+")"]):Object(aa.g)(Object(aa.g)([],M),[""+T[U.value]]):ca?Object(aa.g)(Object(aa.g)([],
M),["("+ca+") "+(0<da.length?"OR ("+X(da)+")":"")]):Object(aa.g)(Object(aa.g)([],M),[X(da)])})},function(R,S,N){N.d(S,"a",function(){return Y});N.d(S,"b",function(){return T});N.d(S,"c",function(){return ca});N.d(S,"d",function(){return M});R=N(65);var X=N.n(R);R=N(56);var aa=N.n(R),ea=N(30),Y="LOADING_ORG_INFO",T="UPDATE_ORG_INFO",ca="UPDATE_ORG_INFO_FAILED",M=function(){return function(U,da){var ja=da();if("loaded"===ja.results.organization.status)return(new aa.a).resolve();if("failed"===ja.results.organization.status)return(new aa.a).reject();
U({type:Y});var na=ja.settings.utils;ja=na.request;na=na.portal;var oa=[Object(ea.j)(ja,na).then(function(ra){return ra.categorySchema}),Object(ea.c)(ja,na).then(function(ra){return ra.data.results})];return na.isPortal&&oa.push(Object(ea.o)(ja,na).then(function(ra){return ra.servers})),X()(oa).then(function(ra){U({type:T,payload:{schema:ra[0],groups:ra[1],servers:ra[2]}})},function(ra){U({type:ca})})}}},,,,,,,,,,,,,,,,,,,function(R,S){R.exports=n},function(R,S,N){N.d(S,"b",function(){return U});
N.d(S,"a",function(){return da});N.d(S,"c",function(){return ja});var X=N(0);R=N(65);var aa=N.n(R);R=N(56);var ea=N.n(R),Y=N(30),T=N(51),ca=N(78),M=N(126),U="UPDATE_FULL_ITEM_DETAILS",da="FETCH_FULL_ITEM_DETAILS_FAILED",ja=function(na){return function(oa,ra){var ua=ra(),wa=Object(M.a)(ua),Ba=ua.settings.utils.request,Da=[];Da.push(Object(Y.r)(Ba,wa,na.owner).then(function(Ga){return Object(T.m)(wa,Ga)},function(Ga){throw Ga;}));var La=wa.restUrl+"/content/items/"+na.id;wa.user&&na.owner===wa.user.username&&
(La=wa.restUrl+"/content/users/"+wa.user.username+"/items/"+na.id);Da.push(Object(Y.v)(Ba,La).then(function(Ga){if(Ga.item&&Ga.sharing){var xa=new ea.a;return Object(Y.v)(Ba,wa.restUrl+"/community/groups",{q:"id: "+Ga.sharing.groups.map(function(Ca){return'"'+Ca+'"'}).join(" OR ")}).then(function(Ca){return xa.resolve(Object(X.a)(Object(X.a)({},Object(ca.a)(wa,ua.settings.utils.iconDir,Ga.item)),{sharing:Ga.sharing,sharedToGroups:Ca.results}))},function(Ca){return xa.reject(Ca)}),xa}return Object(ca.a)(wa,
ua.settings.utils.iconDir,Ga)},function(Ga){throw na.id;}));aa()(Da).then(function(Ga){oa({type:U,payload:{item:Ga[1],owner:Ga[0]}})},function(Ga){oa({type:da,payload:Ga})})}}},,function(R,S,N){N.d(S,"a",function(){return X});N.d(S,"b",function(){return aa});var X="CHANGE_SEARCH_SECTION",aa=function(ea){return function(Y,T){var ca=T();Y({type:X,payload:{newSection:ea,customSections:ca.settings.config.customSections,customSectionGroupSort:ca.results.customSections.groupSort}})}}},,function(R,S,N){N.d(S,
"b",function(){return X});N.d(S,"a",function(){return aa});N.d(S,"d",function(){return ea});N.d(S,"c",function(){return Y});var X="CHANGE_SORT_ORDER",aa="CHANGE_SORT_FIELD",ea=function(T){return{type:X,payload:T}},Y=function(T){return{type:aa,payload:T}}},,,,function(R,S){R.exports=k},function(R,S,N){N.d(S,"b",function(){return T});N.d(S,"a",function(){return ca});N.d(S,"c",function(){return M});N.d(S,"d",function(){return U});var X=N(162),aa=N(78),ea=N(217),Y=N(199),T="CHANGE_PAGE_SUCCESS",ca="CHANGE_PAGE_FAIL",
M="CHANGING_PAGE",U=function(da){return function(ja,na){var oa=na();ja({type:M,payload:da});var ra=oa.settings.utils,ua=ra.portal,wa=ra.iconDir;ra=oa.settings.utils.request;var Ba=oa.settings.config.resultsPerQuery;Ba=Object(X.b)({num:Ba,start:(da-1)*Ba+1},oa);ra(Ba[0],Ba[1]).then(Object(ea.a)(oa),function(Da){return ja({type:ca,payload:{err:Da}})}).then(function(Da){ja({type:T,payload:{organizations:Da.data.organizations,displayItems:Da.data.results.map(function(La){return Object(aa.a)(ua,wa,La)}),
page:da}});ja(Y.e)},function(Da){return ja({type:ca,payload:{err:Da}})})}}},,,,,,,,,,,,function(R,S,N){var X=N(0);R=N(16);var aa=N(90);N=function(ea){function Y(){return null!==ea&&ea.apply(this,arguments)||this}return Object(X.d)(Y,ea),Y.prototype.render=function(T){return T("div",{"class":"ib-ex-results__item-list"},T("div",{"class":"ib-ex-results__no-items-container"},T("div",{"class":"ib-ex-results__no-items-centered"},T("svg",{role:"img",viewBox:"0 0 256 256",width:"256"},T("path",{fill:"#ccc",
d:aa.f})),T("p",{"class":"ib-ex-results__no-items-text"},this.props.text))))},Y}(R.Component);S.a=N},,function(R,S,N){function X(aa,ea,Y){return Promise.all(aa.map(function(T){return function(ca,M,U){return new Promise(function(da,ja){U(M.restUrl+"/community/users/"+ca,{method:"get",query:{f:"json"}}).then(function(na){return da(null==na?void 0:na.data)},ja)})}(T,ea,Y)}))}N.d(S,"a",function(){return X})},function(R,S){R.exports=l},,,,,,,,,,,,,function(R,S,N){N.d(S,"b",function(){return aa});N.d(S,
"a",function(){return ea});var X=N(0);R=N(15);R=Object(R.a)(function(Y,T,ca){return T?Object(X.g)(Object(X.g)([],ca),["("+Y+":["+(T.start+" TO "+T.end+"])")]):ca});var aa=R("modified"),ea=R("uploaded")},function(R,S,N){N.d(S,"b",function(){return aa});N.d(S,"a",function(){return ea});var X=N(0);R=N(15);var aa=Object(R.a)(function(Y,T){if(Y){var ca=Object.keys(Y);if(0<ca.length)return Object(X.g)(Object(X.g)([],T),["tags:("+ca.join(" AND ")+")"])}return T}),ea=Object(R.a)(function(Y,T){return 2<Y.length?
Object(X.g)(Object(X.g)([],T),["tags:("+Y+"* OR "+Y+")"]):T})},function(R,S,N){N.d(S,"a",function(){return aa});R=N(63);S=N(101);var X=N(227);N=N(228);var aa=Object(R.a)(X.a,N.a,S.b)},function(R,S,N){N.d(S,"a",function(){return T});N.d(S,"b",function(){return ca});R=N(56);var X=N.n(R),aa=N(30),ea=N(325),Y=N(150),T="UPDATE_PORTAL_SELF",ca=function(){return function(M,U){var da=U(),ja=da.settings.utils,na=ja.portal;ja=ja.request;var oa=na.user&&na.user.culture?na.user.culture:Y.locale;return da.settings.utils.self?
(new X.a).resolve(da.settings.utils.self):Object(aa.n)(ja,na,oa).then(function(ra){ra=Object(ea.a)(ra);return M({type:T,payload:{self:ra,config:da.settings.config}}),ra})}}},function(R,S,N){N.d(S,"a",function(){return ca});N.d(S,"b",function(){return M});N.d(S,"c",function(){return U});N.d(S,"d",function(){return da});var X=N(0),aa=N(36);R=N(56);var ea=N.n(R),Y=N(150),T=N(402),ca="LOADING_LIVING_ATLAS_INFO",M="UPDATE_LIVING_ATLAS_INFO",U="FETCH_LIVING_ATLAS_INFO_FAILED",da=function(ja){return function(na,
oa){var ra=oa();if("loaded"===ra.results.livingAtlas.status)return(new ea.a).resolve();if("failed"===ra.results.livingAtlas.status)return(new ea.a).reject();na({type:ca});ra=ra.settings.utils;var ua=ra.portal;return Object(T.a)(ra.request,ua,ja,ua.user&&ua.user.culture?ua.user.culture:Y.locale).then(function(wa){na({type:M,payload:Object(X.a)(Object(X.a)({},wa),{schema:wa.schema.map(function(Ba){return"region"===Ba.title?Object(X.a)(Object(X.a)({},Ba),{displayName:aa.regions}):Ba})})})},function(wa){na({type:U})})}}},
function(R,S,N){N.d(S,"a",function(){return T});var X=N(30),aa=N(49);R=N(65);var ea=N.n(R),Y=function(ca,M,U){ca({type:"LOADING_COLLABORATIONS"});var da=[];Object.keys(U).forEach(function(na){da[na]=[];0<U[na].participants.length&&U[na].participants.forEach(function(oa){da[oa.value]=[]})});var ja=Object.keys(da).map(function(na){na=na.split("__");var oa=na[0],ra=na[1]?na[1]:"";return Object(X.k)(M.settings.utils.request,M.settings.utils.portal,M.settings.utils.portal.id,{query:""!==ra?{collaborationId:oa,
participantId:ra,f:"json"}:{collaborationId:oa,f:"json"}}).then(function(ua){(ua.data.collaboratedItems||ua.collaboratedItems).forEach(function(wa){if(ra){var Ba=oa+"__"+ra;U[oa].participants.filter(function(Da){return Da.value===Ba})[0].items.push(Object.keys(wa)[0])}else U[oa].items.push(Object.keys(wa)[0])})},function(){return ca({type:"LOADING_COLLABORATIONS_FAILED"})})});return ea()(ja).then(function(){ca(Object(aa.s)(U));ca({type:"LOADING_COLLABORATIONS_SUCCESS",payload:U})})},T=function(ca,
M){if(ca({type:"LOADING_COLLABORATIONS"}),M&&M.parameters&&M.parameters.filter&&M.parameters.filter.origins&&0<Object.keys(M.parameters.filter.origins).length){var U=M.parameters.filter.origins;return ca(Object(aa.s)(U)),{type:"LOADING_COLLABORATIONS_SUCCESS",payload:U}}return Object(X.l)(M.settings.utils.request,M.settings.utils.portal,M.settings.utils.portal.id,{query:{includeParticipantInfo:"true",f:"json"}}).then(function(da){var ja=[];da.data&&da.data.collaborations&&da.data.collaborations.forEach(function(na){var oa=
na.collaborationId,ra=na.collaborationName.trim();ja[oa]={value:oa,label:ra,addClass:"",childOf:"",selected:!1,participants:[],items:[]};na.participants&&(ja[oa].participants=na.participants.map(function(ua){return 1===(ua=Object.keys(ua).map(function(wa){var Ba=ua[wa].trim();return{value:oa+"__"+wa,label:Ba,childOf:oa,addClass:"filter-tree-item-child",selected:!1,items:[]}})).length?ua[0]:ua}))});Y(ca,M,ja).then(function(){return ca(Object(aa.s)(ja))},function(){return ca({type:"LOADING_COLLABORATIONS_FAILED"})})},
function(da){return ca({type:"LOADING_COLLABORATIONS_FAILED",payload:da})})}},function(R,S,N){function X(aa){return"string"==typeof aa?-1<["myContent","myFavorites","myGroups","myOrganization","livingAtlas"].indexOf(aa):!!aa.filters&&-1<aa.filters.indexOf("tags")}N.d(S,"a",function(){return X})},,,,function(R,S){R.exports=h},,,,,,,,,function(R,S){R.exports=e},,,,,,,,function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(180),Y=N(561),T=N(49),ca=N(48),M=N(413),U=N(552),da=N.n(U);U=N(376);var ja=N.n(U);
U=N(553);var na=N.n(U);U=N(554);var oa=N.n(U);U=N(555);var ra=N.n(U);U=N(556);var ua=N.n(U);U=N(557);var wa=N.n(U);U=N(558);var Ba=N.n(U);U=N(559);var Da=N.n(U);U=N(560);var La=N.n(U);U=N(342);var Ga=N.n(U),xa=N(562);N=function(Ca){function ta(qa){qa=Ca.call(this,qa)||this;return qa.handleCustomFilterToggle=qa.handleCustomFilterToggle.bind(qa),qa.handleMapAreaToggle=qa.handleMapAreaToggle.bind(qa),qa.handleMapAreaKeyUp=qa.handleMapAreaKeyUp.bind(qa),qa.handleSearchOrgToggle=qa.handleSearchOrgToggle.bind(qa),
qa.handleCreatedFilterChange=qa.handleCreatedFilterChange.bind(qa),qa.handleItemTypeFilterChange=qa.handleItemTypeFilterChange.bind(qa),qa.handleModifiedFilterChange=qa.handleModifiedFilterChange.bind(qa),qa.handleSharedFilterChange=qa.handleSharedFilterChange.bind(qa),qa.handleStatusFilterChange=qa.handleStatusFilterChange.bind(qa),qa.handleFolderFilterChange=qa.handleFolderFilterChange.bind(qa),qa.handleGroupFilterChange=qa.handleGroupFilterChange.bind(qa),qa.handleOrgGroupFilterChange=qa.handleOrgGroupFilterChange.bind(qa),
qa.handleTagsFilterChange=qa.handleTagsFilterChange.bind(qa),qa.handleCollaborationFilterChange=qa.handleCollaborationFilterChange.bind(qa),qa.handleOrgCategorySelect=qa.handleOrgCategorySelect.bind(qa),qa.handleClearOrgCategories=qa.handleClearOrgCategories.bind(qa),qa.handleGroupCategorySelect=qa.handleGroupCategorySelect.bind(qa),qa.handleClearGroupCategories=qa.handleClearGroupCategories.bind(qa),qa.handleLACategorySelect=qa.handleLACategorySelect.bind(qa),qa.handleClearLACategories=qa.handleClearLACategories.bind(qa),
qa.handleLARegionSelect=qa.handleLARegionSelect.bind(qa),qa.handleClearLARegion=qa.handleClearLARegion.bind(qa),qa.handleTagsFilterStringChange=qa.handleTagsFilterStringChange.bind(qa),qa}return Object(X.d)(ta,Ca),ta.prototype.render=function(qa){var za=this,va=this.props.stateTree.settings.config,pa=this.props.stateTree.parameters.filter,sa=this.props.stateTree.settings.utils.portal.user,ya=this.props.stateTree.settings.utils.portal,Ha=this.props.stateTree.parameters.section,Ea=Object(Y.a)(this.props.stateTree),
Aa=va.availableItemTypeFilters.filter(function(Fa){var Ka=za.props.stateTree.results.organization.servers||[];Ka="livingAtlas"!==Ha&&ya.isPortal&&Ka.some(function(Ia){return"KnowledgeServer"===Ia.serverFunction});return"knowledgeGraphs"!==Fa||Ka});va=va.enableMapAreaFilter?qa(da.a,{key:"map-area-filter",handleMapAreaToggle:this.handleMapAreaToggle,handleMapAreaKeyUp:this.handleMapAreaKeyUp,searchMapArea:this.props.stateTree.parameters.filter.searchMapArea,text:this.props.stateTree.settings.config.mapAreaFilterText?
this.props.stateTree.settings.config.mapAreaFilterText:aa.filterPane.mapArea}):null;Ea=Ea.map(function(Fa,Ka){switch(Fa){case "group":return qa(Ba.a,{key:"group-filter",onGroupSelect:za.handleGroupFilterChange,availableGroups:za.props.stateTree.results.user.groups,groupFilter:za.props.stateTree.parameters.filter.group});case "folder":var Ia=za.props.stateTree.results.user.folders,Oa={title:za.props.stateTree.settings.utils.portal.user.username,id:"root"};return qa(wa.a,{key:"folder-filter",onFolderSelect:za.handleFolderFilterChange,
availableFolders:Ia?Object(X.g)([Oa],Ia):[Oa],folderFilter:za.props.stateTree.parameters.filter.folder});case "itemType":return qa(na.a,{key:"item-type-filter",onItemTypeSelect:za.handleItemTypeFilterChange,availableItemTypes:Aa,itemTypeFilter:za.props.stateTree.parameters.filter.itemType});case "orgCategories":if((Ia=za.props.stateTree.results.organization.categorySchema)&&Ia.children&&Ia.children[0]&&Ia.children[0].children)return qa(Ga.a,{key:"org-categories-filter",onCategorySelect:za.handleOrgCategorySelect,
onClearCategories:za.handleClearOrgCategories,availableCategories:Ia.children[0].children,categoriesFilter:za.props.stateTree.parameters.filter.orgCategories,title:aa.filterPane.categories,prependValue:"/"+Ia.children[0].value+"/"});break;case "livingAtlasCategories":if((Ia=za.props.stateTree.results.livingAtlas.categorySchema)&&Ia.children&&Ia.children[0]&&Ia.children[0].children)return qa(Ga.a,{key:"la-categories-filter",onCategorySelect:za.handleLACategorySelect,onClearCategories:za.handleClearLACategories,
availableCategories:Ia.children[0].children,categoriesFilter:za.props.stateTree.parameters.filter.livingAtlasCategories,title:Ia.children[0].displayName,prependValue:"/categories/",showTooltips:!0,startActive:!0});break;case "livingAtlasRegion":if((Ia=za.props.stateTree.results.livingAtlas.categorySchema)&&Ia.children&&Ia.children[1]&&Ia.children[1].children)return qa(Ga.a,{key:"la-region-filter",onCategorySelect:za.handleLARegionSelect,onClearCategories:za.handleClearLARegion,availableCategories:Ia.children[1].children,
categoriesFilter:za.props.stateTree.parameters.filter.livingAtlasRegion,title:Ia.children[1].displayName,prependValue:"/region/",startActive:!0});break;case "groupCategories":if(pa.group&&(Ia=za.props.stateTree.results.user.groupCategories[pa.group.id])&&Ia.children&&Ia.children[0]&&Ia.children[0].children)return qa(Ga.a,{key:"group-categories-filter",onCategorySelect:za.handleGroupCategorySelect,onClearCategories:za.handleClearGroupCategories,availableCategories:Ia.children[0].children,categoriesFilter:za.props.stateTree.parameters.filter.groupCategories,
title:aa.filterPane.groupCategories,prependValue:"/"+Ia.children[0].value+"/"});break;case "orgGroups":break;case "modified":return qa(oa.a,{key:"modified-filters",onDateModifiedSelect:za.handleModifiedFilterChange,dateModifiedFilter:za.props.stateTree.parameters.filter.dateModified,dateModifiedSection:za.props.stateTree.ui.filters.modifiedSection});case "created":return qa(ja.a,{key:"created-filters",onDateCreatedSelect:za.handleCreatedFilterChange,dateCreatedFilter:za.props.stateTree.parameters.filter.dateCreated,
dateCreatedSection:za.props.stateTree.ui.filters.createdSection});case "shared":return qa(ra.a,{counts:za.props.stateTree.results.counts.access,key:"shared-filters",onSharedSelect:za.handleSharedFilterChange,sharedFilter:za.props.stateTree.parameters.filter.shared,hideOrgGroupFilters:sa&&!sa.orgId});case "status":Ia=za.props.stateTree.results.counts.contentStatus;Oa=Ia.orgAuthoritative;var Ja=Ia.publicAuthoritative;return qa(ua.a,{counts:{authoritative:sa&&sa.orgId?Oa+Ja:Ja,deprecated:Ia.deprecated},
key:"status-filters",onStatusSelect:za.handleStatusFilterChange,statusFilter:za.props.stateTree.parameters.filter.status});case "tags":return qa(Da.a,{availableTags:za.props.stateTree.ui.tagsFilter.visibleTags,filterString:za.props.stateTree.ui.tagsFilter.filterString,key:"ib-tags-filter",onFilterStringChange:za.handleTagsFilterStringChange,onTagSelect:za.handleTagsFilterChange,tagsFilter:za.props.stateTree.parameters.filter.tags});case "collaboration":Ja=za.props.stateTree.settings.utils.portal;
Ja=sa&&!Ja.isPortal&&sa.orgId&&Ja.subscriptionInfo&&-1<["Trial","Trial Press","Trial Developer","Evaluation"].indexOf(Ja.subscriptionInfo.type);var Ma=sa&&"org_admin"===sa.role,Na=sa&&sa.privileges&&-1<sa.privileges.indexOf("portal:admin:manageCollaborations");if(Ma&&Na&&!Ja)return qa(La.a,{key:"ib-collaborations-filter",onCollaborationSelect:za.handleCollaborationFilterChange,collaborationsFilter:za.props.stateTree.parameters.filter.origins?za.props.stateTree.parameters.filter.origins:[]});default:if("object"==
typeof Fa)if("group"===Fa.type){if((Ia=za.props.stateTree.results.customSections.groupSchemas[Fa.id])&&Ia.children&&Ia.children[0]&&Ia.children[0].children&&(Ja=void 0,Fa.path))return Ja=(Oa=Object(ea.b)("children","value",Ia,Fa.path))?Oa.children:void 0,Oa=Fa.path,qa(Ga.a,{key:"custom-group-categories-filter",onCategorySelect:za.handleGroupCategorySelect,onClearCategories:za.handleClearGroupCategories,availableCategories:Fa.path&&Ja?Ja:Ia.children,categoriesFilter:za.props.stateTree.parameters.filter.groupCategories,
title:Fa.name,prependValue:"/"+(Oa?Oa.join("/")+"/":"")})}else if("org"===Fa.type){if((Ia=za.props.stateTree.results.customSections.orgSchemas[Fa.id])&&Ia.children&&Ia.children[0]&&Ia.children[0].children&&(Ja=void 0,Fa.path))return Ja=(Oa=Object(ea.b)("children","value",Ia,Fa.path))?Oa.children:void 0,Oa=Fa.path,qa(Ga.a,{key:"custom-org-categories-filter",onCategorySelect:za.handleOrgCategorySelect,onClearCategories:za.handleClearOrgCategories,availableCategories:Fa.path&&Ja?Ja:Ia.children,categoriesFilter:za.props.stateTree.parameters.filter.orgCategories,
title:Fa.name,prependValue:"/"+(Oa?Oa.join("/")+"/":"")})}else if(Fa.children)return Ia=za.props.stateTree.parameters.filter.customFilter[Ka],qa(xa.a,{key:Fa.displayName+"-filter-accordion",filter:Fa,index:Ka,onClear:za.handleCustomFilterToggle,onClick:za.handleCustomFilterToggle,selectedOption:Ia?Ia.value:void 0})}return null});return va?[va,qa("div",{key:"filter-accordion","class":"ib-filter-pane__accordion"},Ea)]:qa("div",{key:"filter-accordion","class":"ib-filter-pane__accordion"},Ea)},ta.prototype.handleCustomFilterToggle=
function(qa,za,va){this.props.dispatch(Object(T.u)(qa,za?{value:za,text:va}:void 0));this.props.dispatch(Object(ca.i)())},ta.prototype.handleMapAreaToggle=function(){this.props.dispatch(Object(T.B)(!this.props.stateTree.parameters.filter.searchMapArea));this.props.dispatch(Object(ca.i)())},ta.prototype.handleMapAreaKeyUp=function(qa){switch(qa.key){case "Enter":this.handleMapAreaToggle()}},ta.prototype.handleSearchOrgToggle=function(){this.props.dispatch(Object(T.F)(!this.props.stateTree.parameters.filter.searchOrg));
this.props.dispatch(Object(ca.i)())},ta.prototype.handleItemTypeFilterChange=function(qa){this.props.dispatch(Object(T.y)(qa));this.props.dispatch(Object(ca.i)())},ta.prototype.handleModifiedFilterChange=function(qa,za){this.props.dispatch(Object(T.C)(qa,za));this.props.dispatch(Object(ca.i)())},ta.prototype.handleCreatedFilterChange=function(qa,za){this.props.dispatch(Object(T.t)(qa,za));this.props.dispatch(Object(ca.i)())},ta.prototype.handleSharedFilterChange=function(qa){this.props.dispatch(Object(T.G)(qa));
this.props.dispatch(Object(ca.i)())},ta.prototype.handleStatusFilterChange=function(qa){this.props.dispatch(Object(T.H)(qa));this.props.dispatch(Object(ca.i)())},ta.prototype.handleFolderFilterChange=function(qa){this.props.dispatch(Object(T.v)(qa));this.props.dispatch(Object(ca.i)(!0))},ta.prototype.handleGroupFilterChange=function(qa){this.props.dispatch(Object(T.x)(qa));this.props.dispatch(Object(ca.i)(!0))},ta.prototype.handleOrgGroupFilterChange=function(qa){this.props.dispatch(Object(T.E)(qa));
this.props.dispatch(Object(ca.i)())},ta.prototype.handleTagsFilterChange=function(qa){this.props.dispatch(Object(T.I)(qa));this.props.dispatch(Object(ca.i)())},ta.prototype.handleCollaborationFilterChange=function(qa){this.props.dispatch(Object(T.s)(qa));this.props.dispatch(Object(ca.i)())},ta.prototype.handleOrgCategorySelect=function(qa){var za=this.props.stateTree.parameters.filter.orgCategories;za&&za.value===qa.value?this.props.dispatch(Object(T.D)()):this.props.dispatch(Object(T.D)(qa));this.props.dispatch(Object(ca.i)())},
ta.prototype.handleClearOrgCategories=function(){this.props.dispatch(Object(T.D)());this.props.dispatch(Object(ca.i)())},ta.prototype.handleLACategorySelect=function(qa){var za=this.props.stateTree.parameters.filter.livingAtlasCategories;za&&za.value===qa.value?this.props.dispatch(Object(T.z)()):this.props.dispatch(Object(T.z)(qa));this.props.dispatch(Object(ca.i)())},ta.prototype.handleClearLACategories=function(){this.props.dispatch(Object(T.z)());this.props.dispatch(Object(ca.i)())},ta.prototype.handleLARegionSelect=
function(qa){var za=this.props.stateTree.parameters.filter.livingAtlasRegion;za&&za.value===qa.value?this.props.dispatch(Object(T.A)()):this.props.dispatch(Object(T.A)(qa));this.props.dispatch(Object(ca.i)())},ta.prototype.handleClearLARegion=function(){this.props.dispatch(Object(T.A)());this.props.dispatch(Object(ca.i)())},ta.prototype.handleGroupCategorySelect=function(qa){var za=this.props.stateTree.parameters.filter.groupCategories;za&&za.value===qa.value?this.props.dispatch(Object(T.w)()):this.props.dispatch(Object(T.w)(qa));
this.props.dispatch(Object(ca.i)())},ta.prototype.handleClearGroupCategories=function(){this.props.dispatch(Object(T.w)());this.props.dispatch(Object(ca.i)())},ta.prototype.handleTagsFilterStringChange=function(qa){this.props.dispatch(Object(M.e)(qa))},ta}(R.Component);S.a=Object(R.connect)(function(Ca){return{stateTree:Ca}},function(Ca){return{dispatch:Ca}})(N)},,,,,,function(R,S,N){function X(ea){var Y;ea=Object(aa.a)(ea);return!0===(null===(Y=ea.portalProperties)||void 0===Y?void 0:Y.semanticSearchEnabled)||
ea.portalUser&&!ea.portalUser.orgId}N.d(S,"a",function(){return X});var aa=N(126)},function(R,S,N){N.d(S,"a",function(){return aa});N.d(S,"b",function(){return ea});var X=N(286),aa="VIEW_ITEM_DETAILS",ea=function(Y){return function(T){T({type:aa,payload:Y});T(Object(X.c)(Y))}}},,,,,,function(R,S,N){N.d(S,"b",function(){return X});N.d(S,"a",function(){return aa});N.d(S,"c",function(){return ea});var X="CLOSING_DETAILS_PANE",aa="CLOSE_DETAILS_PANE",ea=function(){return{type:X}}},,,,,,,,,function(R,
S){R.exports=d},function(R,S){R.exports=g},function(R,S){R.exports=u},function(R,S,N){N.d(S,"a",function(){return T});var X=N(0),aa=N(69);R=N(254);var ea=N.n(R);R=N(16);var Y=N(90),T=function(ca){function M(U){var da=ca.call(this,U)||this;return da.state.searchTerm=da.props.currentSearchString||"",da.debouncedInput=ea()(function(){da.props.changeSearchString.apply(da,[da.state.searchTerm])},400),da.handleInputChange=da.handleInputChange.bind(da),da.handleClear=da.handleClear.bind(da),da}return Object(X.d)(M,
ca),M.prototype.componentWillReceiveProps=function(U){U.currentSearchString!==this.props.currentSearchString&&this.setState({searchTerm:U.currentSearchString})},M.prototype.render=function(U){var da=this.props,ja=da.title,na=da.placeholder;da=da.controls;var oa=this.state.searchTerm||"";return U("div",{"class":"ac-search-area"},U("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 20 20",key:"search-input-icon"},U("path",{d:"M19.205 18.295l-7.036-7.035A6.874 6.874 0 0 0 6.875 0 6.874 6.874 0 0 0 0 6.875a6.874 6.874 0 0 0 11.286 5.27l7.035 7.034.884-.884zM1.25 6.875A5.632 5.632 0 0 1 6.875 1.25 5.632 5.632 0 0 1 12.5 6.875 5.632 5.632 0 0 1 6.875 12.5 5.632 5.632 0 0 1 1.25 6.875z",
fill:"currentColor"})),U("input",{"class":"ac-search-area__input",key:"search-input",title:ja,"aria-label":ja,type:"search",oninput:this.handleInputChange,value:oa,placeholder:na,"aria-controls":da}),oa&&U("button",{"class":"ac-search-area__clear",onclick:this.handleClear,key:"search-input-button","aria-label":aa.clearSearch},U("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 24 24"},U("path",{d:Y.k,fill:"currentColor"}))))},M.prototype.handleInputChange=function(U){this.setState({searchTerm:U.target.value});
this.debouncedInput()},M.prototype.handleClear=function(){this.setState({searchTerm:""});this.props.changeSearchString("")},M}(R.Component)},function(R,S){R.exports=x},,,,,,,,,,,,,,,,,,,,,,function(R,S,N){N.d(S,"a",function(){return aa});var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,Y){return ea?Object(X.g)(Object(X.g)([],Y),["(group:"+ea.id+")"]):Y})},function(R,S,N){N.d(S,"a",function(){return aa});var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,Y,T){if(ea)switch(ea.value){case "authoritative":return Y&&
Y.orgId&&!Y.portal.isPortal?Object(X.g)(Object(X.g)([],T),["((contentstatus:org_authoritative orgid:"+Y.orgId+") OR contentstatus:public_authoritative)"]):Y&&Y.orgId&&Y.portal.isPortal?Object(X.g)(Object(X.g)([],T),["((contentstatus:org_authoritative) OR contentstatus:public_authoritative)"]):Object(X.g)(Object(X.g)([],T),["(contentstatus:public_authoritative)"]);case "deprecated":return Object(X.g)(Object(X.g)([],T),["(contentstatus:deprecated)"])}return T})},function(R,S,N){N.d(S,"a",function(){return aa});
var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,Y){return ea?Object(X.g)(Object(X.g)([],Y),["(access:"+ea.value+")"]):Y})},function(R,S,N){N.d(S,"a",function(){return aa});var X=N(0);R=N(15);var aa=Object(R.a)(function(ea,Y){if(ea){var T=function(ca){for(var M,U=0,da=Object.keys(ca);U<da.length;U++){var ja=ca[da[U]];if(ja.selected){M=ja.items;break}ja=ja.participants.filter(function(na){return na.selected});if(0<ja.length){M=ja[0].items;break}}return M}(ea);if(T)return T=T.join(" OR "),Object(X.g)(Object(X.g)([],
Y),["id:("+T+")"])}return Y})},function(R,S,N){N.d(S,"a",function(){return ea});R=N(56);var X=N.n(R),aa=N(30),ea=function(Y,T,ca,M){function U(xa){Ba=xa.categorySchema[0].source.split(".")[1];Object(aa.e)(Y,T,ca.contentCategorySetsGroupQuery).then(da,ua);Object(aa.v)(Y,T.restUrl+"/portals/regions",{culture:M}).then(oa,ua)}function da(xa){xa.results[0]?Object(aa.v)(Y,T.restUrl+"/content/groups/"+xa.results[0].id+"/search",{q:"typekeywords: "+Ba}).then(ja,ua):ua("The content category sets group could not be found.")}
function ja(xa){1===xa.results.length&&xa.results[0]?Object(aa.h)(Y,T,xa.results[0].id).then(na,ua):ua("The item containing the living atlas categories could not be determined.")}function na(xa){Da=xa.categorySchema[0];ca.isPortal&&La?ra([Da]):La&&ra([Da,La])}function oa(xa){La={categories:xa.map(function(Ca){return{displayName:Ca.localizedName,title:Ca.region}}).sort(function(Ca,ta){return"wo"===Ca.title.toLowerCase()?-1:Ca.displayName.localeCompare(ta.displayName)}),description:"2.0",displayName:"Regions",
title:"region"};ca.isPortal&&Da?ra([Da]):Da&&ra([Da,La])}function ra(xa){Ga.resolve({schema:xa,id:wa})}function ua(xa){Ga.reject(xa)}void 0===M&&(M="en");var wa,Ba,Da,La,Ga=new X.a;return Object(aa.e)(Y,T,ca.livingAtlasGroupQuery,(null==T?0:T.isPortal)?{sortField:"title",sortOrder:"asc"}:{}).then(function(xa){xa.results[0]&&xa.results[0].id?(wa=xa.results[0].id,Object(aa.f)(Y,T,wa).then(U,ua)):ua("The living atlas group could not be found.")},ua),Ga}},,,,,,,function(R,S,N){N.d(S,"a",function(){return X});
N.d(S,"b",function(){return aa});var X="CHANGE_SEARCH_STRING",aa=function(ea){return{type:X,payload:ea}}},function(R,S,N){N.d(S,"b",function(){return X});N.d(S,"a",function(){return aa});var X="SHOW_EMPTY_RESULTS",aa="CHANGE_RESULT_DISPLAY"},,,function(R,S,N){N.d(S,"a",function(){return aa});N.d(S,"c",function(){return ea});N.d(S,"b",function(){return Y});N.d(S,"d",function(){return T});N.d(S,"e",function(){return ca});R=N(254);R=N.n(R);var X=N(162),aa="LOADING_TAGS",ea="LOADING_TAGS_SUCCESS",Y="LOADING_TAGS_FAILED",
T="UPDATE_TAGS_FILTER_STRING",ca=function(U){return function(da,ja){da({type:T,payload:U});2<U.length&&M(da,ja(),U)}},M=R()(function(U,da,ja){U({type:aa});var na=da.settings.utils.request;da=Object(X.c)(da,ja);na(da[0],da[1]).then(function(oa){U({type:ea,payload:oa.data})},function(oa){return U({type:Y,payload:oa})})},400)},,function(R,S,N){N.d(S,"a",function(){return ea});N.d(S,"b",function(){return Y});N.d(S,"c",function(){return T});R=N(16);S=N(428);var X=N(453),aa=N(461);N=N(478);var ea=S.b.config,
Y={parameters:X.b,settings:S.b,results:aa.b,ui:N.b},T=Object(R.combineReducers)({settings:S.a,parameters:X.a,results:aa.a,ui:N.a})},,,function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(49),Y=N(48),T=N(566),ca=N.n(T),M=N(86),U=N(5),da={itemType:Object(ea.y)(),modified:Object(ea.C)(),created:Object(ea.t)(),shared:Object(ea.G)(),folder:Object(ea.v)(),group:Object(ea.x)(),status:Object(ea.H)(),orgGroup:Object(ea.E)()};N=function(ja){function na(oa){oa=ja.call(this,oa)||this;return oa.handleRemoveMapAreaFilter=
oa.handleRemoveMapAreaFilter.bind(oa),oa.handleRemoveSearchOrgFilter=oa.handleRemoveSearchOrgFilter.bind(oa),oa.handleRemoveGeneralFilter=oa.handleRemoveGeneralFilter.bind(oa),oa.handleRemoveOrgCategoriesFilter=oa.handleRemoveOrgCategoriesFilter.bind(oa),oa.handleRemoveLACategoriesFilter=oa.handleRemoveLACategoriesFilter.bind(oa),oa.handleRemoveLARegionFilter=oa.handleRemoveLARegionFilter.bind(oa),oa.handleRemoveGroupCategoriesFilter=oa.handleRemoveGroupCategoriesFilter.bind(oa),oa.handleClearAll=
oa.handleClearAll.bind(oa),oa.handleRemoveTagsFilter=oa.handleRemoveTagsFilter.bind(oa),oa.handleRemoveCollaborationFilter=oa.handleRemoveCollaborationFilter.bind(oa),oa.handleRemoveCustomFilter=oa.handleRemoveCustomFilter.bind(oa),oa}return Object(X.d)(na,ja),na.prototype.render=function(oa){var ra,ua,wa=this,Ba=this.props.stateTree.parameters.filter,Da=[];if(null===(ra=this.props.staticFilters)||void 0===ra||ra.forEach(function(xa){Da.push({filterId:xa,text:xa,"static":!0})}),Ba.searchOrg&&"all"===
this.props.stateTree.parameters.section&&(null===(ua=this.props.stateTree.settings.utils.portal.user)||void 0===ua?void 0:ua.credential)&&this.props.stateTree.settings.utils.portal.name&&Da.push({filterId:"searchOrg",onRemove:this.handleRemoveSearchOrgFilter,text:"Organization: "+this.props.stateTree.settings.utils.portal.name}),Ba.searchMapArea&&Da.push({filterId:"searchMapArea",onRemove:this.handleRemoveMapAreaFilter,text:this.props.stateTree.settings.config.mapAreaFilterChipText?this.props.stateTree.settings.config.mapAreaFilterChipText:
aa.filterChips.mapArea}),Ba.itemType&&Da.push({filterId:"itemType",onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.type+": "+Ba.itemType.text}),Ba.dateModified&&Da.push({filterId:"modified",onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.dateModified+": "+Ba.dateModified.label}),Ba.dateCreated&&Da.push({filterId:"created",onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.dateCreated+": "+Ba.dateCreated.label}),Ba.shared&&Da.push({filterId:"shared",onRemove:this.handleRemoveGeneralFilter,
text:aa.filterChips.access+": "+Ba.shared.text}),Ba.group&&"myGroups"===this.props.stateTree.parameters.section?Da.push({filterId:"group",onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.group+": "+Ba.group.title}):Ba.orgGroup&&"myOrganization"===this.props.stateTree.parameters.section&&Da.push({filterId:"orgGroup",onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.group+": "+Ba.orgGroup.title}),Ba.folder&&"myContent"===this.props.stateTree.parameters.section&&Da.push({filterId:"folder",
onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.folder+": "+Ba.folder.title}),Ba.status&&Da.push({filterId:"status",onRemove:this.handleRemoveGeneralFilter,text:aa.filterChips.status+": "+Ba.status.text}),Ba.orgCategories)ra=Ba.orgCategories,Da.push({filterId:ra.value,onRemove:this.handleRemoveOrgCategoriesFilter,text:aa.filterChips.category+": "+ra.text});Ba.livingAtlasCategories&&(ra=Ba.livingAtlasCategories,Da.push({filterId:ra.value,onRemove:this.handleRemoveLACategoriesFilter,text:aa.filterChips.category+
": "+ra.text}));Ba.groupCategories&&(ra=Ba.groupCategories,Da.push({filterId:ra.value,onRemove:this.handleRemoveGroupCategoriesFilter,text:aa.filterChips.category+": "+ra.text}));Ba.livingAtlasRegion&&(ra=Ba.livingAtlasRegion,Da.push({filterId:ra.value,onRemove:this.handleRemoveLARegionFilter,text:aa.filterChips.region+": "+ra.text}));Ba.tags&&Object.keys(Ba.tags).forEach(function(xa){Da.push({filterId:xa,onRemove:wa.handleRemoveTagsFilter,text:aa.filterChips.tagged+": "+xa})});if(Ba.origins){var La=
Ba.origins;Object.keys(Ba.origins).forEach(function(xa){var Ca;La[xa].selected?Da.push({filterId:La[xa].value,onRemove:wa.handleRemoveCollaborationFilter,text:aa.filterChips.collaboration+": "+La[xa].label}):null===(Ca=La[xa].participants)||void 0===Ca||Ca.forEach(function(ta){ta.selected&&Da.push({filterId:ta.value,onRemove:wa.handleRemoveCollaborationFilter,text:aa.filterChips.collaboration+": "+ta.label})})})}var Ga=Object(M.b)(this.props.stateTree.settings.config.customSections,this.props.stateTree.parameters.section);
if(Ga&&!Object(U.b)(Ba.customFilter)&&Object.keys(Ba.customFilter).filter(function(xa){return Ba.customFilter[xa]}).forEach(function(xa){var Ca,ta=parseInt(xa,10);(null===(Ca=null==Ga?void 0:Ga.filters)||void 0===Ca?0:Ca[ta])&&Da.push({filterId:""+ta,onRemove:wa.handleRemoveCustomFilter,text:Ga.filters[ta].displayName+": "+Ba.customFilter[xa].text})}),0<Da.length)return oa("div",{key:"active-filter-area","class":"ib__active-filters filter-chip-wrap"},oa(ca.a,{key:"item-browser-filter-controller",
filters:Da,onClear:this.handleClearAll,mode:"fullscreen"===this.props.stateTree.settings.config.layoutMode?"expanding":"full-width",startOpen:"fullscreen"===this.props.stateTree.settings.config.layoutMode,theme:this.props.theme,showLabel:this.props.showLabel}))},na.prototype.handleRemoveCustomFilter=function(oa){this.props.dispatch(Object(ea.u)(parseInt(oa.target.value,10)));this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveGeneralFilter=function(oa){this.props.dispatch(da[oa.target.value]);
this.props.dispatch(Object(Y.i)("folder"===oa.target.value))},na.prototype.handleRemoveMapAreaFilter=function(oa){this.props.dispatch(Object(ea.B)(!1));this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveSearchOrgFilter=function(oa){this.props.dispatch(Object(ea.F)(!1));this.props.dispatch(Object(Y.i)())},na.prototype.handleClearAll=function(){var oa=!!this.props.stateTree.parameters.filter.folder;this.props.dispatch({type:ea.a});this.props.dispatch(Object(Y.i)(oa))},na.prototype.handleRemoveOrgCategoriesFilter=
function(oa){this.props.dispatch(Object(ea.D)());this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveLACategoriesFilter=function(oa){this.props.dispatch(Object(ea.z)());this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveGroupCategoriesFilter=function(oa){this.props.dispatch(Object(ea.w)());this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveLARegionFilter=function(oa){this.props.dispatch(Object(ea.A)());this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveTagsFilter=
function(oa){var ra=this.props.stateTree.parameters.filter.tags;if(null==ra?0:ra[oa.target.value])ra=Object(X.a)({},ra),delete ra[oa.target.value],0<Object.keys(ra).length?this.props.dispatch(Object(ea.I)(ra)):this.props.dispatch(Object(ea.I)()),this.props.dispatch(Object(Y.i)())},na.prototype.handleRemoveCollaborationFilter=function(oa){this.props.dispatch(Object(ea.s)());this.props.dispatch(Object(Y.i)())},na}(R.Component);S.a=Object(R.connect)(function(ja){return{stateTree:ja}},function(ja){return{dispatch:ja}})(N)},
,,,,,,,,,function(R,S,N){N.d(S,"b",function(){return aa});R=N(16);var X=N(451);N=N(452);var aa={config:X.b,utils:N.b};S.a=Object(R.combineReducers)({config:X.a,utils:N.a})},,,,,,function(R,S,N){N.d(S,"b",function(){return aa});N.d(S,"a",function(){return ea});N.d(S,"c",function(){return Y});var X=N(78),aa="START_CUSTOM_ACTION",ea="END_CUSTOM_ACTION",Y=function(T,ca){return function(M,U){var da=U().settings.config.customActions.filter(function(ja){return ja.name===T})[0];da&&(da.asynchronous?(M({type:aa,
payload:ca}),da.onAction(Object(X.b)(ca)).then(function(){M({type:ea,payload:ca})},function(){M({type:ea,payload:ca})})):da.onAction(Object(X.b)(ca)))}}},,,,,,,,,,,,,,,,,function(R,S,N){N.d(S,"b",function(){return M});var X=N(0);R=N(36);var aa=N(100),ea=N(264),Y=N(141),T=N(99),ca=N(86),M={asynchronousItemSelect:!1,usePrimaryButtonStyle:!0,dialogTitle:"Item Browser",disableMainAction:!1,mainActionTitle:R.itemDetails.addToMap,mainInverseActionTitle:R.itemDetails.removeFromMap,onSelect:function(){},
onDeselect:function(){},onBulkAction:function(){},preSelect:function(){},disableOnSelect:!1,baseSections:"myContent myFavorites myGroups myOrganization livingAtlas all".split(" "),layoutMode:"adjustable",detailsPaneType:"flyout",singleItemSelect:!1,enableMapAreaFilter:!0,mapAreaThrottleTime:2500,enableSelectAllItemsFromQuery:!1,showSubmitButton:!0,submitButtonText:"Submit Selection",cancelButtonText:"Cancel",clearSelectionBetweenSearches:!1,resultsPerQuery:16,allowedItemTypes:Y.a,availableItemTypeFilters:"maps webMaps mapFiles layers featureLayers tileLayers mapImageLayers imageryLayers sceneLayers tables layerFiles scenes apps webApps experienceApps instantApps sites pages storyMaps mobileApps desktopApps tools analytics locators geodatabaseAccess geometricOperations geoprocessingTasks networkAnalysis files documents images pdfs csvs reports webTools notebooks tiledImageLayers elevationLayers rasterFunctionTemplates knowledgeGraphs".split(" "),
disableItemTypeFilters:!1,customActions:[],customSections:[],showCloseBtn:!1,showBackBtn:!0,onBack:function(){},hideEllipses:!1,replaceSectionDropdownWithTitle:!1,disabledSubResources:{},noItemsFoundText:R.results.noItemsFound,itemSelectionEnabled:!1,disableInitiallySelectedItems:!1};S.a=function(U,da){switch(void 0===U&&(U=M),da.type){case ea.b:return Object(T.f)("id",U.customSections.filter(ca.f).map(ca.a).reduce(function(ja,na){return Object(X.g)(Object(X.g)([],ja),na)},[]).filter(function(ja){return"object"==
typeof ja&&"group"===ja.type})).forEach(function(ja,na){ja.id=da.payload.groups[na].id;delete ja.fetchGroupIdByQuery}),U;case aa.e:return Object(X.a)(Object(X.a)({},U),{itemSelectionEnabled:!0});default:return U}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(326),ea=N(101),Y={iconDir:"",portal:{},request:function(T){return null}};S.a=function(T,ca){switch(void 0===T&&(T=Y),ca.type){case aa.a:return Object(X.a)(Object(X.a)({},T),{self:ca.payload.self});default:return T.portal.portalHostname&&
!T.portal.baseUrl&&(T.portal.baseUrl=Object(ea.a)(T.portal)),T}}},function(R,S,N){N.d(S,"b",function(){return ca});R=N(16);var X=N(454),aa=N(456),ea=N(457),Y=N(460),T=N(458);N=N(459);var ca={extent:X.b,filter:aa.b,nextQuery:ea.b,searchString:T.b,section:N.b,sort:Y.b};S.a=Object(R.combineReducers)({extent:X.a,filter:aa.a,nextQuery:ea.a,searchString:T.a,section:N.a,sort:Y.a})},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(455),ea={area:{minx:-180,miny:-90,maxx:180,maxy:90},throttling:!1};
S.a=function(Y,T){switch(void 0===Y&&(Y=ea),T.type){case aa.a:return Object(X.a)(Object(X.a)({},Y),{throttling:!1});case aa.b:return{area:T.payload,throttling:!0};default:return Y}}},function(R,S,N){N.d(S,"b",function(){return aa});N.d(S,"a",function(){return ea});N.d(S,"c",function(){return Y});var X=N(48),aa="UPDATE_EXTENT",ea="UNTHROTTLE_EXTENT",Y=function(T){return function(ca,M){var U=M();U.parameters.extent.throttling||(ca({type:aa,payload:T}),U.parameters.filter.searchMapArea&&ca(Object(X.i)()),
setTimeout(function(){ca({type:ea})},U.settings.config.mapAreaThrottleTime))}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(49),ea=N(288),Y={customFilter:{},searchMapArea:!1};S.a=function(T,ca){var M;switch(void 0===T&&(T=Y),ca.type){case aa.a:return{customFilter:{},searchMapArea:!1};case aa.n:return Object(X.a)(Object(X.a)({},T),{orgGroup:ca.payload});case aa.j:return Object(X.a)(Object(X.a)({},T),{livingAtlasRegion:ca.payload});case aa.i:return Object(X.a)(Object(X.a)({},T),
{livingAtlasCategories:ca.payload});case aa.m:return Object(X.a)(Object(X.a)({},T),{orgCategories:ca.payload});case aa.f:return Object(X.a)(Object(X.a)({},T),{groupCategories:ca.payload});case aa.h:return Object(X.a)(Object(X.a)({},T),{itemType:ca.payload});case aa.l:return Object(X.a)(Object(X.a)({},T),{dateModified:ca.payload.modified});case aa.c:return Object(X.a)(Object(X.a)({},T),{dateCreated:ca.payload.created});case aa.p:return Object(X.a)(Object(X.a)({},T),{shared:ca.payload});case aa.e:return Object(X.a)(Object(X.a)({},
T),{folder:ca.payload});case aa.g:return Object(X.a)(Object(X.a)({},T),{groupCategories:void 0,group:ca.payload});case aa.q:return Object(X.a)(Object(X.a)({},T),{status:ca.payload});case aa.k:return Object(X.a)(Object(X.a)({},T),{searchMapArea:ca.payload});case aa.o:return Object(X.a)(Object(X.a)({},T),{searchOrg:ca.payload,orgCategories:void 0});case aa.r:return Object(X.a)(Object(X.a)({},T),{tags:ca.payload});case aa.b:return Object(X.a)(Object(X.a)({},T),{origins:ca.payload});case aa.d:return Object(X.a)(Object(X.a)({},
T),{customFilter:Object(X.a)(Object(X.a)({},T.customFilter),(M={},M[ca.payload.index]=ca.payload.filter,M))});case ea.a:return{customFilter:{},searchMapArea:!1};default:return T}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(48),ea={nextStart:-1,total:0};S.a=function(Y,T){switch(void 0===Y&&(Y=ea),T.type){case aa.a:return Object(X.a)(Object(X.a)({},Y),{total:0});case aa.c:return{nextStart:T.payload.search.nextStart,total:T.payload.search.total};case aa.f:return{nextStart:T.payload.nextStart,
total:T.payload.total};case aa.g:return{nextStart:-1,total:T.payload.length};default:return Y}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(48),ea=N(409),Y={current:"",previous:""};S.a=function(T,ca){switch(void 0===T&&(T=Y),ca.type){case aa.a:return Object(X.a)(Object(X.a)({},T),{previous:T.current});case ea.a:return Object(X.a)(Object(X.a)({},T),{current:ca.payload});default:return T}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(288),aa=N(326),ea="all";S.a=function(Y,
T){switch(void 0===Y&&(Y=ea),T.type){case X.a:return T.payload.newSection;case aa.a:var ca=T.payload.config.baseSections,M=T.payload.config.customSections.map(function(U){return U.name});return-1<ca.indexOf(Y)||-1<M.indexOf(Y)?Y:0<ca.length?ca[0]:0<M.length?M[0]:"all";default:return Y}}},function(R,S,N){N.d(S,"b",function(){return M});var X=N(0),aa=N(290),ea=N(288),Y=N(264),T=N(86),ca=N(99),M={field:"relevance",order:"desc"},U={myContent:"modified",myFavorites:"modified",myGroups:"modified",myOrganization:"modified",
livingAtlas:"relevance",all:"relevance"},da={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};S.a=function(ja,na){switch(void 0===ja&&(ja=M),na.type){case aa.b:return Object(X.a)(Object(X.a)({},ja),{order:na.payload});case aa.a:var oa=na.payload;return{field:oa,order:da[oa]||ja.order};case ea.a:oa=Object(T.b)(na.payload.customSections,na.payload.newSection);if(null==oa?0:oa.filters){var ra=oa.filters.filter(function(ua){return"object"==typeof ua&&
"group"===ua.type})[0];if(null==ra?0:ra.id)if(ra=na.payload.customSectionGroupSort[ra.id])return ra}oa=U[na.payload.newSection]||(null==oa?void 0:oa.sortField);return{field:oa||"relevance",order:da[oa]||"desc"};case Y.b:ra=na.payload;oa=ra.customSections;ra=Object(T.b)(oa,ra.currentSection);if(null==ra?0:ra.filters)if(oa=Object(ca.f)("id",oa.filter(T.f).map(T.a).reduce(function(ua,wa){return Object(X.g)(Object(X.g)([],ua),wa)},[]).filter(function(ua){return"object"==typeof ua&&"group"===ua.type})),
ra=ra.filters.filter(function(ua){return"object"==typeof ua&&"group"===ua.type})[0],oa=na.payload.groups[oa.indexOf(ra)])return{field:oa.sortField||"relevance",order:oa.sortOrder||"desc"};return ja;default:return ja}}},function(R,S,N){N.d(S,"b",function(){return ua});R=N(16);var X=N(462),aa=N(465),ea=N(466),Y=N(467),T=N(468),ca=N(469),M=N(471),U=N(470),da=N(472),ja=N(473),na=N(474),oa=N(475),ra=N(476);N=N(477);var ua={counts:X.b,displayItems:aa.b,livingAtlas:ea.b,loadingItems:Y.b,selectedItems:T.b,
initiallySelectedItems:ca.b,failedItemDetails:U.b,fullItemDetails:M.b,organization:da.b,user:ja.b,customSections:na.b,allOrganizations:oa.b,users:ra.b,provisionedContent:N.b};S.a=Object(R.combineReducers)({counts:X.a,displayItems:aa.a,loadingItems:Y.a,selectedItems:T.a,failedItemDetails:U.a,fullItemDetails:M.a,initiallySelectedItems:ca.a,livingAtlas:ea.a,organization:da.a,user:ja.a,customSections:na.a,allOrganizations:oa.a,users:ra.a,provisionedContent:N.a})},function(R,S,N){N.d(S,"b",function(){return aa});
R=N(16);var X=N(463);N=N(464);var aa={access:X.b,contentStatus:N.b};S.a=Object(R.combineReducers)({access:X.a,contentStatus:N.a})},function(R,S,N){N.d(S,"b",function(){return aa});var X=N(48),aa={org:void 0,"private":void 0,"public":void 0,shared:void 0};S.a=function(ea,Y){switch(void 0===ea&&(ea=aa),Y.type){case X.c:if(Y.payload.aggregations&&Y.payload.aggregations.counts){var T=Y.payload.aggregations.counts.filter(function(da){return"access"===da.fieldName})[0];if(T){var ca=T.fieldValues.filter(function(da){return"org"===
da.value})[0],M=T.fieldValues.filter(function(da){return"private"===da.value})[0],U=T.fieldValues.filter(function(da){return"public"===da.value})[0];T=T.fieldValues.filter(function(da){return"shared"===da.value})[0];return{org:ca?ca.count:void 0,"private":M?M.count:void 0,"public":U?U.count:void 0,shared:T?T.count:void 0}}}return ea;default:return ea}}},function(R,S,N){N.d(S,"b",function(){return aa});var X=N(48),aa={publicAuthoritative:0,orgAuthoritative:0,deprecated:0};S.a=function(ea,Y){switch(void 0===
ea&&(ea=aa),Y.type){case X.c:if(Y.payload.aggregations&&Y.payload.aggregations.counts){var T=Y.payload.aggregations.counts.filter(function(U){return"contentstatus"===U.fieldName})[0];if(T){var ca=T.fieldValues.filter(function(U){return"org_authoritative"===U.value})[0],M=T.fieldValues.filter(function(U){return"public_authoritative"===U.value})[0];T=T.fieldValues.filter(function(U){return"deprecated"===U.value})[0];return{publicAuthoritative:M?M.count:0,orgAuthoritative:ca?ca.count:0,deprecated:T?
T.count:0}}}return ea;default:return ea}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(48),ea=[];S.a=function(Y,T){switch(void 0===Y&&(Y=[]),T.type){case aa.c:return T.payload.search.results;case aa.g:return T.payload;case aa.f:return Object(X.g)(Object(X.g)([],Y),T.payload.results);default:return Y}}},function(R,S,N){N.d(S,"b",function(){return T});var X=N(0),aa=N(327),ea=N(48),Y=N(182),T={categorySchema:void 0,groupId:void 0,status:"initial"};S.a=function(ca,M){switch(void 0===
ca&&(ca=T),M.type){case aa.a:return Object(X.a)(Object(X.a)({},ca),{status:"loading"});case aa.b:return Object(X.a)(Object(X.a)({},ca),{categorySchema:{displayName:M.payload.id,value:M.payload.id,children:Object(Y.b)(M.payload.schema)},groupId:M.payload.id,status:"loaded"});case ea.c:return ca.categorySchema&&M.payload.aggregations&&M.payload.aggregations.countInfo&&"livingAtlas"===M.payload.aggregations.countInfo.section?Object(X.a)(Object(X.a)({},ca),{categorySchema:Object(Y.c)(M.payload.aggregations,
Object(Y.a)(ca.categorySchema),"groupCategories")}):ca;case aa.c:return Object(X.a)(Object(X.a)({},ca),{status:"failed"});default:return ca}}},function(R,S,N){N.d(S,"b",function(){return ca});var X=N(0),aa=N(100),ea=N(434),Y=N(71),T=N(173),ca={};S.a=function(M,U){var da,ja,na,oa,ra,ua,wa,Ba,Da,La,Ga,xa;switch(void 0===M&&(M={}),U.type){case aa.h:return Object(X.a)(Object(X.a)({},M),((da={})[U.payload.id]=U.payload,da));case aa.g:return Object(X.a)(Object(X.a)({},M),((ja={})[U.payload.id]=void 0,ja));
case aa.j:return Object(X.a)(Object(X.a)({},M),((na={})[U.payload.id]=void 0,na));case aa.i:return Object(X.a)(Object(X.a)({},M),((oa={})[U.payload.id]=void 0,oa));case ea.b:return Object(X.a)(Object(X.a)({},M),((ra={})[U.payload.id]=U.payload,ra));case ea.a:return Object(X.a)(Object(X.a)({},M),((ua={})[U.payload.id]=void 0,ua));case Y.a:return{};case T.a:return Object(X.a)(Object(X.a)({},M),((wa={})[U.payload.id]=U.payload,wa));case T.c:return Object(X.a)(Object(X.a)({},M),((Ba={})[U.payload.id]=
void 0,Ba));case T.b:return Object(X.a)(Object(X.a)({},M),((Da={})[U.payload.id]=void 0,Da));case T.e:return Object(X.a)(Object(X.a)({},M),((La={})[U.payload.id]=U.payload,La));case T.g:return Object(X.a)(Object(X.a)({},M),((Ga={})[U.payload.id]=void 0,Ga));case T.f:return Object(X.a)(Object(X.a)({},M),((xa={})[U.payload.id]=void 0,xa));default:return M}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(100),ea=N(71),Y={};S.a=function(T,ca){var M;switch(void 0===T&&(T={}),ca.type){case aa.b:return{};
case aa.f:return Object(X.a)(Object(X.a)({},T),ca.payload.reduce(function(ja,na){var oa;return Object(X.a)(Object(X.a)({},ja),((oa={})[na.id]=na,oa))},{}));case aa.c:var U=T;var da=ca.payload.id;U[da];return Object(X.f)(U,["symbol"==typeof da?da:da+""]);case aa.g:return Object(X.a)(Object(X.a)({},T),((U={})[ca.payload.id]=ca.payload,U));case aa.k:return T[ca.payload.id]?(U=T,da=ca.payload.id,U[da],Object(X.f)(U,["symbol"==typeof da?da:da+""])):Object(X.a)(Object(X.a)({},T),((da={})[ca.payload.id]=
ca.payload,da));case aa.j:return(M={})[ca.payload.id]=ca.payload,M;case aa.e:return Object(X.a)(Object(X.a)({},T),ca.payload);case ea.a:return{};default:return T}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(100),ea={};S.a=function(Y,T){switch(void 0===Y&&(Y={}),T.type){case aa.e:return Object(X.a)(Object(X.a)({},Y),T.payload);default:return Y}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(286),ea=N(357),Y={};S.a=function(T,ca){var M;switch(void 0===T&&(T=
Y),ca.type){case aa.b:return T[ca.payload.item.id]?(delete (U=Object(X.a)({},T))[ca.payload.item.id],U):T;case ea.a:var U;return T[ca.payload.id]?(delete (U=Object(X.a)({},T))[ca.payload.id],U):T;case aa.a:return Object(X.a)(Object(X.a)({},T),((M={})[ca.payload]=!0,M));default:return T}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(286),ea={};S.a=function(Y,T){var ca;switch(void 0===Y&&(Y=ea),T.type){case aa.b:return Object(X.a)(Object(X.a)({},Y),((ca={})[T.payload.item.id]=T.payload.item,
ca));case aa.a:return Y[T.payload]?(ca=Object(X.a)({},Y),delete ca[T.payload],ca):Y;default:return Y}}},function(R,S,N){N.d(S,"b",function(){return T});var X=N(0),aa=N(266),ea=N(48),Y=N(182),T={categorySchema:void 0,groups:void 0,status:"initial",servers:[]};S.a=function(ca,M){switch(void 0===ca&&(ca=T),M.type){case aa.a:return Object(X.a)(Object(X.a)({},ca),{status:"loading"});case aa.b:return Object(X.a)(Object(X.a)({},ca),{groups:M.payload.groups,categorySchema:{displayName:"##orgCatRoot--1337!",
value:"##orgCatRoot--1337!",children:Object(Y.b)(M.payload.schema)},status:"loaded",servers:M.payload.servers||[]});case ea.c:return ca.categorySchema&&M.payload.aggregations&&M.payload.aggregations.countInfo&&("myOrganization"===M.payload.aggregations.countInfo.section||"myContent"===M.payload.aggregations.countInfo.section||"all"===M.payload.aggregations.countInfo.section)?Object(X.a)(Object(X.a)({},ca),{categorySchema:Object(Y.c)(M.payload.aggregations,Object(Y.a)(ca.categorySchema),"categories")}):
ca;case aa.c:return Object(X.a)(Object(X.a)({},ca),{status:"failed"});default:return ca}}},function(R,S,N){N.d(S,"b",function(){return T});var X=N(0),aa=N(173),ea=N(48),Y=N(182),T={favorites:void 0,folders:void 0,groups:void 0,groupCategories:{},status:"initial"};S.a=function(ca,M){var U,da,ja,na,oa;switch(void 0===ca&&(ca=T),M.type){case aa.d:return Object(X.a)(Object(X.a)({},ca),{status:"loading"});case aa.i:return Object(X.a)(Object(X.a)({},ca),{favorites:M.payload.favorites,folders:M.payload.folders,
groups:M.payload.groups,status:"loaded"});case aa.h:return Object(X.a)(Object(X.a)({},ca),{groupCategories:Object(X.a)(Object(X.a)({},ca.groupCategories),(U={},U[M.payload.id]={value:M.payload.id,children:Object(Y.b)(M.payload.categorySchema)},U))});case ea.c:return M.payload.aggregations&&M.payload.aggregations.countInfo&&"myGroups"===M.payload.aggregations.countInfo.section&&M.payload.aggregations.countInfo.group&&(U=M.payload.aggregations.countInfo.group.id,ca.groupCategories[U])?Object(X.a)(Object(X.a)({},
ca),{groupCategories:Object(X.a)(Object(X.a)({},ca.groupCategories),(da={},da[U]=Object(Y.c)(M.payload.aggregations,Object(Y.a)(ca.groupCategories[U]),"groupCategories"),da))}):ca;case aa.j:return Object(X.a)(Object(X.a)({},ca),{status:"failed"});case aa.c:return Object(X.a)(Object(X.a)({},ca),{favorites:ca.favorites?Object(X.a)(Object(X.a)({},ca.favorites),(ja={},ja[M.payload.id]=!0,ja)):(na={},na[M.payload.id]=!0,na)});case aa.g:return Object(X.a)(Object(X.a)({},ca),{favorites:ca.favorites?Object(X.a)(Object(X.a)({},
ca.favorites),(oa={},oa[M.payload.id]=!1,oa)):{}});default:return ca}}},function(R,S,N){function X(M,U,da){return U.filter(function(ja){return ja.type===M}).reduce(function(ja,na){return ja[na.id]||(ja[na.id]={value:na.id,children:Object(T.b)(na.response.categorySchema)}),ja},Object(aa.a)({},da))}N.d(S,"b",function(){return ca});var aa=N(0),ea=N(264),Y=N(48),T=N(182),ca={groupSchemas:{},groupSort:{},orgSchemas:{},status:"initial"};S.a=function(M,U){switch(void 0===M&&(M=ca),U.type){case ea.a:return Object(aa.a)(Object(aa.a)({},
M),{status:"loading"});case ea.b:return Object(aa.a)(Object(aa.a)({},M),{groupSort:U.payload.groups.reduce(function(ja,na){return ja[na.id]={field:na.sortField,order:na.sortOrder},ja},M.groupSort)});case ea.c:return Object(aa.a)(Object(aa.a)({},M),{orgSchemas:X("org",U.payload,M.orgSchemas),groupSchemas:X("group",U.payload,M.groupSchemas),status:"loaded"});case ea.d:return Object(aa.a)(Object(aa.a)({},M),{status:"failed"});case Y.c:if(U.payload.aggregations){var da=U.payload.aggregations.countInfo;
if(da.custom&&da.custom.filters)return da.custom.filters.filter(function(ja){return"object"==typeof ja}).reduce(function(ja,na){var oa,ra;return"group"===na.type?Object(aa.a)(Object(aa.a)({},M),{groupSchemas:Object(aa.a)(Object(aa.a)({},M.groupSchemas),(oa={},oa[na.id]=Object(T.c)(U.payload.aggregations,Object(T.a)(M.groupSchemas[na.id]),"groupCategories"),oa))}):"org"===na.type?Object(aa.a)(Object(aa.a)({},M),{orgSchemas:Object(aa.a)(Object(aa.a)({},M.orgSchemas),(ra={},ra[na.id]=Object(T.c)(U.payload.aggregations,
Object(T.a)(M.orgSchemas[na.id]),"categories"),ra))}):ja},M)}return M;default:return M}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(48),ea=N(295),Y={};S.a=function(T,ca){switch(void 0===T&&(T=Y),ca.type){case aa.c:return Object(X.a)(Object(X.a)({},T),ca.payload.search.organizations);case aa.f:case ea.b:return Object(X.a)(Object(X.a)({},T),ca.payload.organizations);default:return T}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(286),ea={};S.a=function(Y,T){var ca;
switch(void 0===Y&&(Y=ea),T.type){case aa.b:return Object(X.a)(Object(X.a)({},Y),((ca={})[T.payload.owner.username]=T.payload.owner,ca));default:return Y}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(256),ea={content:[],status:"initial"};S.a=function(Y,T){switch(void 0===Y&&(Y=ea),T.type){case aa.a:return Object(X.a)(Object(X.a)({},Y),{status:"loading"});case aa.b:return Object(X.a)(Object(X.a)({},Y),{status:"failed"});case aa.c:return Object(X.a)(Object(X.a)({},Y),{status:"loaded",
content:T.payload});default:return Y}}},function(R,S,N){N.d(S,"b",function(){return ca});R=N(16);var X=N(479),aa=N(480),ea=N(484),Y=N(485),T=N(486);N=N(487);var ca={sidePanel:X.b,expanded:aa.b,resultPanel:ea.b,filters:Y.b,tagsFilter:T.b,pagination:N.b};S.a=Object(R.combineReducers)({sidePanel:X.a,expanded:aa.a,resultPanel:ea.a,filters:Y.a,tagsFilter:T.a,pagination:N.a})},function(R,S,N){N.d(S,"b",function(){return M});var X=N(0),aa=N(363),ea=N(357),Y=N(804),T=N(805),ca=N(48),M={closing:!1,type:"hidden"};
S.a=function(U,da){switch(void 0===U&&(U=M),da.type){case aa.b:return Object(X.a)(Object(X.a)({},U),{closing:!0});case aa.a:return Object(X.a)(Object(X.a)({},U),{closing:!1,type:"hidden",item:void 0});case ea.a:return Object(X.a)(Object(X.a)({},U),{type:"item",item:da.payload});case Y.a:return Object(X.a)(Object(X.a)({},U),{type:"filter",item:void 0});case T.a:return Object(X.a)(Object(X.a)({},U),{type:"sort",item:void 0});case ca.c:return"item"===U.type&&U.item&&!da.payload.search.results.filter(function(ja){return U.item&&
ja.id===U.item.id})[0]?Object(X.a)(Object(X.a)({},U),{closing:!0}):U;case ca.g:return"item"===U.type&&U.item&&!da.payload.filter(function(ja){return U.item&&ja.id===U.item.id})[0]?Object(X.a)(Object(X.a)({},U),{closing:!0}):U;default:return U}}},function(R,S,N){N.d(S,"b",function(){return T});R=N(481);var X=N(482),aa=N(483),ea=N(16),Y=N(226),T={filters:R.b,sort:X.b,sublayerCards:aa.b,maximized:!1,closing:!1};S.a=Object(ea.combineReducers)({filters:R.a,sort:X.a,sublayerCards:aa.a,maximized:function(ca,
M){switch(M.type){case Y.c:return!0;case Y.d:return!1;default:return ca}},closing:function(ca,M){switch(M.type){case Y.b:return!0;default:return ca}}})},function(R,S,N){N.d(S,"b",function(){return aa});var X=N(226),aa=!1;S.a=function(ea,Y){switch(Y.type){case X.e:return!ea;default:return ea}}},function(R,S,N){N.d(S,"b",function(){return ea});var X=N(226),aa=N(290),ea=!1;S.a=function(Y,T){switch(T.type){case X.f:return!Y;case X.a:return!1;case aa.a:case aa.b:return!Y;default:return Y}}},function(R,
S,N){N.d(S,"b",function(){return ea});var X=N(0),aa=N(226),ea={cardStates:{},overlayOpen:!1};S.a=function(Y,T){var ca;switch(T.type){case aa.g:return Object(X.a)(Object(X.a)({},Y),{cardStates:Object(X.a)(Object(X.a)({},Y.cardStates),(ca={},ca[T.payload.item.id]=T.payload,ca)),overlayOpen:T.payload.overlay.visible&&!T.payload.overlay.closing});default:return Y}}},function(R,S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(48),ea=N(410),Y={display:"list",status:"empty"};S.a=function(T,ca){switch(void 0===
T&&(T=Y),ca.type){case aa.g:case aa.c:case aa.f:return Object(X.a)(Object(X.a)({},T),{status:"success"});case aa.b:case aa.e:return Object(X.a)(Object(X.a)({},T),{status:"failed"});case aa.a:return Object(X.a)(Object(X.a)({},T),{status:"loading"});case aa.d:return Object(X.a)(Object(X.a)({},T),{status:"loadingNext"});case ea.a:return Object(X.a)(Object(X.a)({},T),{display:"table"===T.display?"list":"table"});case ea.b:return Object(X.a)(Object(X.a)({},T),{status:"empty"});default:return T}}},function(R,
S,N){N.d(S,"b",function(){return Y});var X=N(0),aa=N(49),ea=N(288),Y={};S.a=function(T,ca){switch(void 0===T&&(T=Y),ca.type){case aa.a:return{};case aa.l:return Object(X.a)(Object(X.a)({},T),{modifiedSection:ca.payload.section});case aa.c:return Object(X.a)(Object(X.a)({},T),{createdSection:ca.payload.section});case ea.a:return{};default:return T}}},function(R,S,N){N.d(S,"b",function(){return ca});var X=N(0);R=N(63);var aa=N(99),ea=N(288),Y=N(413),T=N(48),ca={allTags:[],filterString:"",visibleTags:[]};
S.a=function(U,da){switch(void 0===U&&(U=ca),da.type){case ea.a:return Object(X.a)(Object(X.a)({},U),{filterString:""});case Y.d:return Object(X.a)(Object(X.a)({},U),{filterString:da.payload,visibleTags:U.allTags.filter(function(ra){return 0===da.payload.length||-1<ra.value.indexOf(da.payload)})});case Y.a:return U;case Y.c:return da.payload.aggregations&&(ja=da.payload.aggregations.counts.filter(function(ra){return"tags"===ra.fieldName})[0])?(ja=(na=U.allTags,oa=ja.fieldValues,M(na.concat(oa))),
Object(X.a)(Object(X.a)({},U),{allTags:ja,visibleTags:ja.filter(function(ra){return 0===U.filterString.length||-1<ra.value.indexOf(U.filterString)})})):U;case Y.b:return U;case T.c:var ja;return da.payload.aggregations&&(ja=da.payload.aggregations.counts.filter(function(ra){return"tags"===ra.fieldName})[0])?(ja=M(ja.fieldValues),Object(X.a)(Object(X.a)({},U),{allTags:ja,visibleTags:ja.filter(function(ra){return 0===U.filterString.length||-1<ra.value.indexOf(U.filterString)})})):U;default:return U}var na,
oa};S=Object(aa.f)("value");var M=Object(R.a)(S,function(U){return U.map(function(da){var ja=da.count;return{value:da.value.trim(),count:ja}})},function(U){return U.sort(function(da,ja){return ja.count-da.count})})},function(R,S,N){N.d(S,"b",function(){return T});var X=N(0),aa=N(295),ea=N(48),Y=N(199),T={page:1,displayItems:[],userThumbnailCache:{},pendingUserThumbRequests:[],orgThumbnailCache:{},pendingOrgThumbRequests:[],status:"loading"};S.a=function(ca,M){switch(void 0===ca&&(ca=T),M.type){case aa.c:return Object(X.a)(Object(X.a)({},
ca),{status:"loading"});case aa.b:return Object(X.a)(Object(X.a)({},ca),{displayItems:M.payload.displayItems,page:M.payload.page,status:"success"});case aa.a:return Object(X.a)(Object(X.a)({},ca),{status:"failed"});case ea.c:return Object(X.a)(Object(X.a)({},ca),{displayItems:M.payload.search.results,status:"success",page:1});case ea.g:return Object(X.a)(Object(X.a)({},ca),{displayItems:M.payload,status:"success",page:1});case Y.c:return Object(X.a)(Object(X.a)({},ca),{pendingUserThumbRequests:Object(X.g)(Object(X.g)([],
ca.pendingUserThumbRequests),M.payload).filter(function(U,da,ja){return ja.indexOf(U)===da})});case Y.d:return Object(X.a)(Object(X.a)({},ca),{userThumbnailCache:Object(X.a)(Object(X.a)({},ca.userThumbnailCache),M.payload),pendingUserThumbRequests:ca.pendingUserThumbRequests.filter(function(U){return!M.payload[U]})});case Y.a:return Object(X.a)(Object(X.a)({},ca),{pendingOrgThumbRequests:Object(X.g)(Object(X.g)([],ca.pendingOrgThumbRequests),M.payload).filter(function(U,da,ja){return ja.indexOf(U)===
da})});case Y.b:return Object(X.a)(Object(X.a)({},ca),{orgThumbnailCache:Object(X.a)(Object(X.a)({},ca.orgThumbnailCache),M.payload),pendingOrgThumbRequests:ca.pendingOrgThumbRequests.filter(function(U){return!M.payload[U]})});default:return ca}}},function(R,S,N){var X=N(0);R=N(16);var aa=N(547),ea=N(548),Y=N(571),T=N(294),ca=N.n(T),M=N(100);N=function(U){function da(){return null!==U&&U.apply(this,arguments)||this}return Object(X.d)(da,U),da.prototype.render=function(ja){var na=!this.props.filtersVisible&&
!this.props.sortVisible&&!this.props.sublayerOverlayOpen||!window.matchMedia("(max-width: 860px)").matches&&!this.props.sublayerOverlayOpen;return ja("div",{id:"item-browser-container",classes:this.props.containerClasses,key:"ib-expanded"},ja(ca.a,{closing:this.props.closing,key:"ib-big-overlay",scrollable:na,adjustable:this.props.adjustable,flex:!0},ja(aa.a,{key:"big-browser-header"}),ja(ea.a,{key:"big-browser-body"}),this.props.renderFooter&&ja(Y.a,{handleSecondaryClick:this.props.handleCancelClick,
handlePrimaryClick:this.props.handleSubmitClick,key:"big-browser-footer",primaryText:this.props.submitButtonText,secondaryText:this.props.cancelButtonText})))},da}(R.Component);S.a=Object(R.connect)(function(U){return{closing:U.ui.expanded.closing,filtersVisible:U.ui.expanded.filters,sortVisible:U.ui.expanded.sort,sublayerOverlayOpen:U.ui.expanded.sublayerCards.overlayOpen,adjustable:"adjustable"===U.settings.config.layoutMode,renderFooter:!!U.settings.config.multiSelect,submitButtonText:U.settings.config.submitButtonText,
cancelButtonText:U.settings.config.cancelButtonText}},function(U){return{handleSubmitClick:function(){U(M.m)},handleCancelClick:function(){U(M.l)}}})(N)},function(R,S){R.exports=y},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(90);N=function(Y){function T(ca){ca=Y.call(this,ca)||this;return ca.handleContract=ca.handleContract.bind(ca),ca.handleClose=ca.handleClose.bind(ca),ca.handleTitleCreate=ca.handleTitleCreate.bind(ca),ca}return Object(X.d)(T,
Y),T.prototype.componentWillReceiveProps=function(ca){ca.page!==this.props.page&&this.titleNode&&this.titleNode.scrollIntoView()},T.prototype.render=function(ca){return ca("header",{"class":"ib__big-header"},ca("div",{"class":"ib__big-header-title-section"},ca("h3",{"class":"ib__big-header-title",id:"ib__big-header-title",afterCreate:this.handleTitleCreate},this.props.dialogTitle),ca("button",{key:"main-close-btn","class":"mod__overlay__close","aria-label":aa.close,onclick:this.handleClose},ca("svg",
{role:"img",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor"},ca("path",{d:ea.k})))))},T.prototype.handleContract=function(){this.props.onBack()},T.prototype.handleClose=function(){this.props.onBack()},T.prototype.handleTitleCreate=function(ca){this.titleNode=ca},T}(R.Component);S.a=Object(R.connect)(function(Y){return{dialogTitle:Y.settings.config.dialogTitle,onBack:function(){var T,ca;null===(ca=null===(T=Y.settings.config)||void 0===T?void 0:T.onBack)||
void 0===ca||ca.call(T)},page:Y.ui.pagination.page}},function(){return{}})(N)},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(551),Y=N(563),T=N(567),ca=N(550),M=N(372),U=N.n(M),da=N(295);M=N(205);var ja=N.n(M);M=N(373);var na=N.n(M),oa=N(350),ra=N(226),ua=N(333),wa=N(549);N=function(Ba){function Da(La){La=Ba.call(this,La)||this;return La.handlePageChange=La.handlePageChange.bind(La),La.handleCloseMobileFilters=La.handleCloseMobileFilters.bind(La),La}return Object(X.d)(Da,Ba),Da.prototype.render=
function(La){var Ga=this,xa=this.props.expandedFiltersActive,Ca={"ib__big-section":!0,"ib__big-filters":!0,"ib__big-filters--hidden":!xa,"ib__big-filters--visible":xa},ta="loading"===this.props.resultStatus||"loading"===this.props.paginationStatus,qa={"ib__big-wrapper":!0,"ib__big-wrapper--faded":ta,"ib__big-wrapper--transparent":ta&&0===this.props.pageDisplayItems.length},za=Math.ceil(1E4<this.props.itemTotal?1E4/this.props.resultsPerQuery:this.props.itemTotal/this.props.resultsPerQuery);return La("div",
{"class":"ib__big-body","aria-labelledby":Object(ua.slugifySectionName)(this.props.section),role:"tabpanel"},La("div",{"class":"ib-nav-container"},La(wa.a,{key:"big-browser-section-tabs"}),"subscription"!==this.props.section&&La(ca.a,{key:"ib__big-search-area"})),La("div",{"class":"ib__big-row",afterCreate:function(va){va&&!Ga.scrollContainer&&(Ga.scrollContainer=va)}},La("section",{classes:Ca,key:"fullscreen-filters"},La("div",{"class":xa?"":"hide"},La("div",{"class":"ib-ex-input__container"},La("span",
{"class":"ib__big-filter-label"},aa.filterPane.filter)),La(ea.a,null))),La("div",{"class":"ib__big-overlay-filters"},La(na.a,{key:"mobile-filter-wrap",maxHeight:!0,open:xa,onClose:this.handleCloseMobileFilters,title:aa.filterPane.filter,footer:La("button",{"class":"ib__big-filter-results-btn",onclick:this.handleCloseMobileFilters},aa.viewResults)},La(oa.a,{key:"mobile-filters"}))),La("section",{"class":"ib__big-section ib__big-results",key:"results-section"},La("div",{classes:qa},La("div",{"class":"ib-ex-alert-container hide",
key:"ib-ex-alert-container"},La("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",style:"\n                                    fill: currentColor;\n                                    pointer-events: none;\n                                    width: 16px;\n                                    height: 16px;\n                                    vertical-align: middle;\n                                    padding: 0rem .2rem .1rem;\n                                    "},
La("path",{d:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z"})),La("span",{"class":"ib-ex-alert-text"},aa.groupAddDisclaimer)),La(Y.a,{key:"big-browser-input-area"}),La(T.a,{key:"big-browser-result-panel"}),1<za&&"subscription"!==this.props.section&&La(U.a,{key:"big-browser-pager",onPageChange:this.handlePageChange,numPages:za,currentPage:this.props.currentPage,
paginationLimitReached:1E4<this.props.itemTotal})),ta&&La("div",{"class":"ib-ex__load-container",key:"ib-ex__load-container"},La(ja.a,{key:"item-ex-loading"})))))},Da.prototype.handlePageChange=function(La){this.scrollContainer&&(this.scrollContainer.scrollTop=0);this.props.changePage(La)},Da.prototype.handleCloseMobileFilters=function(){this.props.toggleExpandedFilters()},Da}(R.Component);S.a=Object(R.connect)(function(Ba){return{expandedFiltersActive:Ba.ui.expanded.filters,resultStatus:Ba.ui.resultPanel.status,
paginationStatus:Ba.ui.pagination.status,pageDisplayItems:Ba.ui.pagination.displayItems,currentPage:Ba.ui.pagination.page,itemTotal:Ba.parameters.nextQuery.total,resultsPerQuery:Ba.settings.config.resultsPerQuery,section:Ba.parameters.section}},function(Ba){return{changePage:function(Da){Ba(Object(da.d)(Da))},toggleExpandedFilters:function(){Ba(Object(ra.i)())}}})(N)},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(288),Y=N(48),T=N(333),ca=N.n(T),M=N(125);N=function(U){function da(ja){ja=U.call(this,
ja)||this;return ja.state={options:(ja.props.user?ja.props.baseSections:ja.props.baseSections.filter(function(na){return"livingAtlas"===na||"all"===na})).map(function(na){return{value:na,text:aa.header.sectionTitles[na]}}).concat(ja.props.customSections.map(function(na){return{value:na.name,text:na.name}}))},ja.handleTabSelect=ja.handleTabSelect.bind(ja),ja}return Object(X.d)(da,U),da.prototype.render=function(ja){return ja(ca.a,{key:"ib-expanded-nav",options:this.state.options,onSelect:this.handleTabSelect,
selectedOptionValue:this.props.currentSection,dropdownOnly:!0})},da.prototype.handleTabSelect=function(ja){this.props.changeSearchSection(ja);this.props.search(!0)},da}(R.Component);S.a=Object(R.connect)(function(U){return{user:U.settings.utils.portal.user,baseSections:U.settings.config.baseSections,customSections:U.settings.config.customSections,currentSection:U.parameters.section}},function(U){return{changeSearchSection:function(da){U(Object(M.k)(""));U(Object(ea.b)(da))},search:function(da){U(Object(Y.i)(da))}}})(N)},
function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(285),Y=N.n(ea),T=N(226),ca=N(290),M=N(409),U=N(48);ea=N(374);var da=N.n(ea),ja=N(375),na="relevance title owner created modified numviews".split(" "),oa={myContent:["relevance","modified","title"],myFavorites:["relevance","modified","title","numviews","owner"],myGroups:["relevance","modified","title","numviews","owner"],myOrganization:["relevance","modified","title","numviews","owner"],livingAtlas:["relevance","modified","title","numviews","owner"],
all:["relevance","title","owner","modified","numviews"]};N=function(ra){function ua(wa){wa=ra.call(this,wa)||this;return wa.handleToggleFilters=wa.handleToggleFilters.bind(wa),wa.handleSearchChange=wa.handleSearchChange.bind(wa),wa.handleSortFieldChange=wa.handleSortFieldChange.bind(wa),wa.handleSortOrderChange=wa.handleSortOrderChange.bind(wa),wa.handleSortClick=wa.handleSortClick.bind(wa),wa.handleSortBlur=wa.handleSortBlur.bind(wa),wa}return Object(X.d)(ua,ra),ua.prototype.render=function(wa){var Ba=
aa.header.sectionTitles[this.props.section];Ba=this.props.searchPlaceholderText?this.props.searchPlaceholderText:aa.search+" "+(Ba||this.props.section);var Da=this.props.section;Da=oa[Da]?Object(X.g)([],oa[Da]):Object(X.g)([],na);return-1===Da.indexOf(this.props.sortField)&&(this.props.sortField=Da[0]),wa("div",{"class":"ib-ex-search-area__container",key:"search-area"},wa(ja.a,{key:"ib-ex-search-area-input",title:aa.header.search,placeholder:Ba,currentSearchString:this.props.searchString,changeSearchString:this.handleSearchChange}),
wa("div",{"class":"ib-ex-search-area__btn-section"},wa(da.a,{active:this.props.sortActive,key:"ib-ex-sort-dropdown",field:this.props.sortField,order:this.props.sortOrder,availableFields:Da,onFieldChange:this.handleSortFieldChange,onOrderChange:this.handleSortOrderChange,onClick:this.handleSortClick,handleMenuBlur:this.handleSortBlur}),wa(Y.a,{key:"ib-ex-filter-btn",active:this.props.expandedFiltersActive,handleClick:this.handleToggleFilters},wa("div",{"class":"drp-sort__btn-body"},wa("svg",{role:"img",
viewBox:"0 0 16 16",width:"16px",height:"16px"},wa("path",{d:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"})),wa("span",{"class":"drp-sort__btn-label"},aa.filterPane.filter)))))},ua.prototype.handleToggleFilters=function(){this.props.toggleExpandedFilters()},ua.prototype.handleSearchChange=function(wa){this.props.changeSearchString(wa);this.props.search(!0)},ua.prototype.handleSortFieldChange=function(wa){this.props.changeSortField(wa);this.props.search()},
ua.prototype.handleSortOrderChange=function(wa){this.props.changeSortOrder(wa);this.props.search()},ua.prototype.handleSortClick=function(){this.props.toggleExpandedSort()},ua.prototype.handleSortBlur=function(){this.props.closeExpandedSort()},ua}(R.Component);S.a=Object(R.connect)(function(ra){return{searchPlaceholderText:ra.settings.config.searchPlaceholderText,section:ra.parameters.section,searchString:ra.parameters.searchString.current,previousSearchString:ra.parameters.searchString.previous,
sortActive:ra.ui.expanded.sort,sortField:ra.parameters.sort.field,sortOrder:ra.parameters.sort.order,expandedFiltersActive:ra.ui.expanded.filters}},function(ra){return{toggleExpandedFilters:function(){ra(Object(T.i)())},toggleExpandedSort:function(){ra(Object(T.j)())},changeSortField:function(ua){ra(Object(ca.c)(ua))},changeSortOrder:function(ua){ra(Object(ca.d)(ua))},changeSearchString:function(ua){ra(Object(M.b)(ua))},search:function(ua){ra(Object(U.i)(ua))},closeExpandedSort:function(){ra(Object(T.h)())}}})(N)},
function(R,S,N){var X=N(350);S.a=function(aa,ea){return ea(X.a,{key:"big-browser-filters"})}},function(R,S){R.exports=B},function(R,S){R.exports=C},function(R,S){R.exports=z},function(R,S){R.exports=D},function(R,S){R.exports=E},function(R,S){R.exports=A},function(R,S){R.exports=F},function(R,S){R.exports=H},function(R,S){R.exports=I},function(R,S,N){function X(ea){var Y,T=ea.settings.utils.portal.user,ca=!T;T=!ca&&!T.orgId;if(ca||T)if(T)ca=function(M){switch(M.parameters.section){case "myContent":return"folder itemType modified created tags shared".split(" ");
case "myFavorites":return["itemType","modified","created","tags","status"];case "myGroups":return"groupCategories group itemType modified created tags".split(" ");case "livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case "all":return["itemType","modified","status"];default:return aa(M)}}(ea);else a:switch(ea.parameters.section){case "livingAtlas":ca=["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];break a;case "all":ca=["itemType",
"modified","status"];break a;default:ca=aa(ea)}else ca=function(M){switch(M.parameters.section){case "myContent":return"folder orgCategories itemType modified created tags shared status collaboration".split(" ");case "myFavorites":return"itemType modified created tags shared status collaboration".split(" ");case "myGroups":return"group groupCategories itemType modified created tags shared status collaboration".split(" ");case "myOrganization":return"orgCategories itemType modified created tags shared status collaboration".split(" ");
case "livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case "all":return["itemType","modified","shared","status"];default:return aa(M)}}(ea);return Y=ca,function(M,U){var da=U.indexOf("itemType");M&&-1<da&&U.splice(da,1);return U}(ea.settings.config.disableItemTypeFilters,Y)}function aa(ea){return ea.settings.config.customSections.reduce(function(Y,T){return T.name===ea.parameters.section&&T.filters?T.filters:Y},["itemType","modified","shared"])}N.d(S,"a",
function(){return X})},function(R,S,N){var X=N(0);R=N(16);var aa=N(216),ea=N.n(aa);aa=N(255);var Y=N.n(aa);N=function(T){function ca(M){M=T.call(this,M)||this;return M.handleClear=M.handleClear.bind(M),M.handleClick=M.handleClick.bind(M),M}return Object(X.d)(ca,T),ca.prototype.render=function(M){var U=this,da=this.props.filter;return M(Y.a,{key:da.displayName+"-filter-accordion",clearable:!1,onClear:this.handleClear,title:da.displayName},M("ul",{"aria-label":da.displayName,id:da.displayName+"-filter-accordion-tree",
"class":"ftr-custom__tree",role:"tree"},da.children?da.children.map(function(ja){return M(ea.a,{key:ja.value,value:ja.value,name:ja.displayName,onToggleClick:U.handleClick,selectedToggle:U.props.selectedOption,childOptions:ja.children})}):null))},ca.prototype.handleClear=function(){this.props.onClear(this.props.index)},ca.prototype.handleClick=function(M,U){M===this.props.selectedOption?this.props.onClick(this.props.index,void 0):this.props.onClick(this.props.index,M,U)},ca}(R.Component);S.a=N},function(R,
S,N){var X=N(0),aa=N(36),ea=N(178);R=N(16);var Y=N(418),T=N(564),ca=N(100);N=function(M){function U(){return null!==M&&M.apply(this,arguments)||this}return Object(X.d)(U,M),U.prototype.render=function(da){var ja=this,na=this.props,oa=na.itemTotal,ra=na.itemName,ua=na.dropdownItems,wa=na.staticFilters,Ba=na.handleItemClick,Da=na.handleClearAllClick,La=na.handleSelectPageClick,Ga=na.multiselect,xa=na.maxSelected,Ca=na.showSelectAllOnPage,ta=na.itemsPerPage,qa=na.pageNumber;na=na.showDeselectTooltip;
var za=1E4<=oa?aa.itemLimitReached.replace("${limit}",ea.format(1E4)):ea.format(oa),va=Math.min((qa-1)*ta+1,oa);oa=Math.min(qa*ta,oa);ra=ra?za+" "+ra:aa.itemTotalInfo.replace("${from}",va).replace("${to}",oa).replace("${total}",za).replace("-"," - ");Ba=Ga&&0<ua.length&&da(T.a,{key:"ib-item-dropdown",items:ua,maxSelected:xa,handleItemClick:Ba,showDeselectTooltip:na});ua=Ga&&0<ua.length&&da("button",{key:"clear-selection-button","class":"ib-ex-input__bulk-btn ib-ex-input__bulk-btn--clear-all",onclick:function(pa){ja.handleFocus();
Da()}},aa.filterPane.clearSelection);Ca=Ca&&da("button",{key:"select-all-button","class":"ib-ex-input__bulk-btn ib-ex-input__bulk-btn--select-page",onclick:function(pa){ja.handleFocus();La()}},aa.filterPane.selectAll);return da("div",{"class":"ib-ex-input__container",key:"ib-result-count-container"},da("div",{"class":"ib-ex-input__container__controls"},da("span",{key:"input-area-results","class":"ib-ex-input-area__result-count"},ra),Ba,ua,Ca),da(Y.a,{staticFilters:wa,key:"ib-ex__active-filters",theme:"dark",
showLabel:aa.filterPane.filters+":"}))},U.prototype.handleFocus=function(){window.setTimeout(function(){var da;null===(da=document.querySelector(".ib-ex-input__container button"))||void 0===da||da.focus()},20)},U}(R.Component);S.a=Object(R.connect)(function(M){return{itemName:M.settings.config.itemName,itemTotal:M.parameters.nextQuery.total,pageNumber:M.ui.pagination.page,staticFilters:M.settings.config.staticFilters,itemsPerPage:M.settings.config.resultsPerQuery,dropdownItems:Object.keys(M.results.selectedItems).map(function(U){return M.results.selectedItems[U]}).filter(function(U){return!M.settings.config.disableInitiallySelectedItems||
!M.results.initiallySelectedItems[U.id]}),multiselect:!!M.settings.config.multiSelect,maxSelected:M.settings.config.maxSelected,showDeselectTooltip:M.settings.config.showDeselectTooltip,showSelectAllOnPage:!!M.settings.config.multiSelect&&0<M.parameters.nextQuery.total&&!M.ui.pagination.displayItems.every(function(U){return M.results.selectedItems[U.id]})&&(!M.settings.config.maxSelected||M.ui.pagination.displayItems.filter(function(U){return!M.results.selectedItems[U.id]}).length+Object.keys(M.results.selectedItems).length<=
M.settings.config.maxSelected)}},function(M){return{handleItemClick:function(U){M({type:ca.c,payload:U})},handleClearAllClick:function(){M(ca.n)},handleSelectPageClick:function(){M(Object(ca.q)())}}})(N)},function(R,S,N){var X=N(0),aa=N(36),ea=N(150);R=N(16);var Y=N(90),T=N(565),ca={open:!1};N=function(M){function U(){var da=null!==M&&M.apply(this,arguments)||this;return da.state=ca,da.handleBlur=function(ja){var na;(ja=ja.relatedTarget)&&(null===(na=da.dropdown)||void 0===na?0:na.contains(ja))||
da.setState({open:!1})},da.handleClick=function(ja){var na,oa;ja=ja.target;null!==(na=da.dropdown)&&void 0!==na&&na.contains(ja)||((na=null===(oa=da.toggleButton)||void 0===oa?void 0:oa.contains(ja))?da.setState({open:!da.state.open}):da.state.open&&!na&&da.setState({open:!1}))},da}return Object(X.d)(U,M),U.prototype.render=function(da){var ja=this,na=this.props,oa=na.items,ra=na.maxSelected,ua=na.showDeselectTooltip;na=ra?aa.itemsSelectedMax:aa.itemsSelected;var wa=1<oa.length?na.enPlural:na.en;
"en"!==ea.locale.slice(0,2)&&(wa=na.other);ra=ra?wa.replace("${num}",oa.length).replace("${max}",ra):wa.replace("${num}",oa.length);return da("div",{key:"selected-dropdown","class":"selected-dropdown",afterCreate:function(){document.addEventListener("click",ja.handleClick)},afterRemoved:function(){document.removeEventListener("click",ja.handleClick);ja.setState(ca)}},da("button",{"class":"selected-dropdown__toggle-button",key:"selected-dropdown__toggle-button","aria-haspopup":"true",afterCreate:function(Ba){ja.toggleButton=
Ba},afterRemoved:function(){ja.toggleButton=void 0}},da("span",{"class":"selected-dropdown__toggle-button__text"},ra),da("svg",{role:"img",style:"\n              padding: 0 9px;\n              width: 16px;\n              height: 16px;\n              fill: white;"},da("path",{d:Y.a}))),this.state.open&&da("div",{"class":"selected-dropdown__list__container",key:"selected-dropdown__list__container",afterCreate:function(Ba){ja.dropdown=Ba},afterRemoved:function(){ja.dropdown=void 0}},da("ul",{id:"selected-dropdown__list",
"class":"selected-dropdown__list",key:"selected-dropdown__list",role:"menu"},oa.map(function(Ba){return da(T.a,{item:Ba,handleCloseClick:ja.props.handleItemClick,handleBlur:ja.handleBlur,showDeselectTooltip:ua,key:Ba.id})}))))},U}(R.Component);S.a=N},function(R,S,N){var X=N(0);R=N(16);var aa=N(36),ea=N(90);N=function(Y){function T(){return null!==Y&&Y.apply(this,arguments)||this}return Object(X.d)(T,Y),T.prototype.render=function(ca){var M=this.props,U=M.item,da=M.handleCloseClick,ja=M.handleBlur;
M=M.showDeselectTooltip;var na="selected-"+U.id,oa="deselect-item-"+U.id,ra=function(){return ca("button",{id:oa,"class":"selected-dropdown__list-item__button",onclick:function(){da(U)},"aria-labelledby":na,"aria-label":aa.deselect,onblur:ja},ca("svg",null,ca("path",{d:ea.j})))};return ca("li",{"class":"selected-dropdown__list-item",role:"menuitem",key:U.id},ca("img",{src:U.iconURI,alt:U.type,"class":"selected-dropdown__list-item__icon"}),ca("span",{"class":"selected-dropdown__list-item__description",
id:na},U.title),M?ca("calcite-tooltip-manager",null,ra(),ca("calcite-tooltip",{"reference-element":oa},aa.deselect)):ra())},T}(R.Component);S.a=N},function(R,S){R.exports=L},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(569),Y=N(568),T=N.n(Y).a;N=function(ca){function M(){return null!==ca&&ca.apply(this,arguments)||this}return Object(X.d)(M,ca),M.prototype.render=function(U){return"success"!==this.props.resultStatus&&"loading"!==this.props.resultStatus||"success"!==this.props.pageStatus&&"loading"!==
this.props.pageStatus?this.props.tooManyGroups?U("div",{key:"request-error","class":"ib__results"},U("div",{"class":"ib-results__message-container"},U("span",{"class":"ib-results__message"},aa.results.tooManyGroups))):U("div",{key:"request-error","class":"ib__results"},U("div",{"class":"ib-results__message-container"},U("span",{"class":"ib-results__message"},aa.results.requestError))):this.props.showSubResources?U(T,{key:"lazy-sublayers",path:"ItemBrowser/SubResourceItemList",componentProps:{key:"subresource-item-list"}},
"loading..."):U(ea.a,{key:"ib-ex-item-list"})},M}(R.Component);S.a=Object(R.connect)(function(ca){return{resultStatus:ca.ui.resultPanel.status,pageStatus:ca.ui.pagination.status,showSubResources:ca.settings.config.showSubResources,tooManyGroups:!(!("myGroups"===ca.parameters.section&&ca.results.user.groups&&175<ca.results.user.groups.length)||ca.parameters.filter.group)}},function(){return{}})(N)},function(R,S){R.exports=J},function(R,S,N){var X=N(0);R=N(16);var aa=N(570),ea=N.n(aa),Y=N(126),T=N(307);
N=function(ca){function M(){return null!==ca&&ca.apply(this,arguments)||this}return Object(X.d)(M,ca),M.prototype.render=function(U){var da=this,ja=Object(Y.a)(this.props.stateTree),na=this.props.stateTree.ui.pagination.displayItems.map(function(oa){return U(ea.a,{key:oa.id,item:oa,organization:"public_authoritative"===oa.contentStatus&&da.props.stateTree.results.allOrganizations[oa.orgId]?da.props.stateTree.results.allOrganizations[oa.orgId]:void 0,portal:ja,mainAction:da.props.stateTree.settings.config.onSelect,
mainInverseAction:da.props.stateTree.settings.config.onDeselect,mainActionTitle:da.props.stateTree.settings.config.mainActionTitle,mainInverseActionTitle:da.props.stateTree.settings.config.mainInverseActionTitle,loadOnMainAction:da.props.stateTree.settings.config.asynchronousItemSelect,usePrimaryButtonStyle:da.props.stateTree.settings.config.usePrimaryButtonStyle,isSelected:da.props.stateTree.settings.config.preSelect,customActions:da.props.stateTree.settings.config.customActions,sortField:da.props.stateTree.parameters.sort.field})});
return 0<na.length?U("div",{key:this.props.key,"class":"ib-ex-results__item-list"},na):U(T.a,{key:this.props.key,text:this.props.stateTree.settings.config.noItemsFoundText||""})},M}(R.Component);S.a=Object(R.connect)(function(ca){return{stateTree:ca}},function(){return{}})(N)},function(R,S){R.exports=O},function(R,S,N){var X=N(0);R=function(aa){function ea(){return null!==aa&&aa.apply(this,arguments)||this}return Object(X.d)(ea,aa),ea.prototype.render=function(Y){var T=this;return Y("footer",{"class":"ib__big-footer"},
Y("button",{"class":"ib__big-footer-btn ib__big-footer-btn--secondary",onclick:function(){return T.props.handleSecondaryClick()}},this.props.secondaryText),Y("button",{"class":"ib__big-footer-btn ib__big-footer-btn--primary",onclick:function(){var ca,M;return null===(M=(ca=T.props).handlePrimaryClick)||void 0===M?void 0:M.call(ca)}},this.props.primaryText))},ea}(N(16).Component);S.a=R},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(363),Y=N(574),T=N(575),ca=N(573),M=N(589);N=function(U){function da(ja){ja=
U.call(this,ja)||this;return ja.handleCloseDetailsPane=ja.handleCloseDetailsPane.bind(ja),ja}return Object(X.d)(da,U),da.prototype.render=function(ja){var na=this.props.detailsPaneType,oa=this.props.sidePanelType,ra=this.props.closing,ua={"ib-side__container--fade-in":!ra,"ib-side__container--fade-out":ra,"ib-side__container--flyout":"flyout"===na,"ib-side__container--flyover":"flyover"===na};na={"ib-side__content--flyout":"flyout"===na,"ib-side__content--in-right":!ra&&"flyout"===na,"ib-side__content--out-left":ra&&
"flyout"===na,"ib-side__content--flyover":"flyover"===na,"ib-side__content--in-left":!ra&&"flyover"===na,"ib-side__content--out-right":ra&&"flyover"===na};if("sort"===oa){var wa=ja(ca.a,{key:"sort-pane"});var Ba=aa.sortOptions.sort}else if("filter"===oa)wa=ja(Y.a,{key:"filter-pane"}),Ba=aa.filterPane.filter;else if("item"===oa&&this.props.sidePanelItem)wa=ja(T.a,{key:this.props.sidePanelItem.id,item:this.props.sidePanelItem});else if("hidden"===oa)return;return ja(M.a,{key:"item"===oa&&this.props.sidePanelItem?
""+this.props.sidePanelItem.id:oa,containerClasses:ua,contentClasses:na,handleClose:this.handleCloseDetailsPane,i18n:aa,type:oa,title:Ba},wa)},da.prototype.componentWillReceiveProps=function(ja){var na=this;!this.props.closing&&ja.closing&&("item"===this.props.sidePanelType&&this.props.sidePanelItem?(ja=document.getElementById("item-"+this.props.sidePanelItem.id+"-card-title"))&&ja.focus():"filter"===this.props.sidePanelType?(ja=document.getElementById("filter-button"))&&ja.focus():"sort"===this.props.sidePanelType&&
(ja=document.getElementById("sort-button"))&&ja.focus(),setTimeout(function(){na.props.closeDetailsPaneImmediately()},300))},da.prototype.handleCloseDetailsPane=function(){this.props.closeDetailsPane()},da}(R.Component);S.a=Object(R.connect)(function(U){return{detailsPaneType:U.settings.config.detailsPaneType,sidePanelType:U.ui.sidePanel.type,sidePanelItem:U.ui.sidePanel.item}},function(U){return{closeDetailsPane:function(){U(Object(ea.c)())},closeDetailsPaneImmediately:function(){U({type:ea.a})}}})(N)},
function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(290),Y=N(48),T=N(216),ca=N.n(T),M="relevance title owner created modified numviews".split(" "),U={myContent:["modified","title"],myFavorites:["relevance","modified","title","numviews","owner"],myGroups:["relevance","modified","title","numviews","owner"],myOrganization:["relevance","modified","title","numviews","owner"],livingAtlas:["relevance","modified","title","numviews","owner"],all:["relevance","title","owner","modified","numviews"]};N=function(da){function ja(na){na=
da.call(this,na)||this;return na.handleChangeSortField=na.handleChangeSortField.bind(na),na.handleChangeSortAsc=na.handleChangeSortAsc.bind(na),na.handleChangeSortDesc=na.handleChangeSortDesc.bind(na),na}return Object(X.d)(ja,da),ja.prototype.render=function(na){var oa=this,ra=this.props.section;ra=(U[ra]?Object(X.g)([],U[ra]):Object(X.g)([],M)).map(function(Ba){return na(ca.a,{key:Ba,name:aa.sortOptions[Ba],value:Ba,selectedToggle:oa.props.sortField,onToggleClick:oa.handleChangeSortField})});var ua=
this.props.sortField,wa=this.props.sortOrder;return na("div",{id:"sort-pane-container",key:"sort-pane-container","class":"ib-sort-pane__container"},na("div",{"class":"ib-sort-pane__body"},na("h3",{id:"sort-options-title","class":"drp-sort__menu-title"},aa.sortOptions.sortBy),na("ul",{key:"sort-option-section","class":"ib-sort-pane__option-section",role:"radiogroup","aria-labelledby":"sort-options-title","aria-activedescendent":this.props.sortField+"-option"},ra),"relevance"!==ua?na("div",null,na("h3",
{"class":"drp-sort__menu-title drp-sort__menu-direction"},aa.sortOptions.sortDir),na("ul",{key:"sort-direction-section","class":"ib-sort-pane__dir-section",role:"radiogroup","aria-labelledby":"sort-dir-title","aria-activedescendent":wa+"-option"},na(ca.a,{key:"sort-asc-toggle",name:aa.sortOptions.ascending[ua],value:"asc",onToggleClick:this.handleChangeSortAsc,selectedToggle:wa}),na(ca.a,{key:"sort-desc-toggle",name:aa.sortOptions.descending[ua],value:"desc",onToggleClick:this.handleChangeSortDesc,
selectedToggle:wa}))):null))},ja.prototype.handleChangeSortField=function(na){this.props.changeSortField(na);this.props.search()},ja.prototype.handleChangeSortAsc=function(na){"desc"===this.props.sortOrder&&(this.props.changeSortOrder("asc"),this.props.search())},ja.prototype.handleChangeSortDesc=function(na){"asc"===this.props.sortOrder&&(this.props.changeSortOrder("desc"),this.props.search())},ja}(R.Component);S.a=Object(R.connect)(function(da){return{section:da.parameters.section,sortField:da.parameters.sort.field,
sortOrder:da.parameters.sort.order}},function(da){return{changeSortField:function(ja){da(Object(ea.c)(ja))},changeSortOrder:function(ja){da(Object(ea.d)(ja))},search:function(ja){da(Object(Y.i)(ja))}}})(N)},function(R,S,N){var X=N(0);R=N(16);var aa=N(350);N=function(ea){function Y(){return null!==ea&&ea.apply(this,arguments)||this}return Object(X.d)(Y,ea),Y.prototype.render=function(T){return T("div",{id:"filter-pane-container",key:"filter-pane-container","class":"ib-filter-pane__container"},T(aa.a,
{key:"filter-options"}))},Y}(R.Component);S.a=N},function(R,S,N){var X=N(0),aa=N(36),ea=N(178);R=N(16);var Y=N(173),T=N(126),ca=N(205),M=N.n(ca),U=N(587);ca=N(576);var da=N.n(ca);ca=N(577);var ja=N.n(ca);ca=N(578);var na=N.n(ca);ca=N(579);var oa=N.n(ca);ca=N(580);var ra=N.n(ca);ca=N(581);var ua=N.n(ca);ca=N(582);var wa=N.n(ca);ca=N(583);var Ba=N.n(ca);ca=N(584);var Da=N.n(ca);ca=N(489);var La=N.n(ca);ca=N(585);var Ga=N.n(ca);ca=N(206);var xa=N.n(ca),Ca=N(586),ta=N(588),qa=N(151);N=function(za){function va(pa){pa=
za.call(this,pa)||this;return pa.handleItemDetails=pa.handleItemDetails.bind(pa),pa.handleFavorites=pa.handleFavorites.bind(pa),pa}return Object(X.d)(va,za),va.prototype.render=function(pa){if(!(this.props.stateTree.results.fullItemDetails[this.props.item.id]&&this.props.stateTree.results.users[this.props.item.owner]||this.props.stateTree.results.failedItemDetails[this.props.item.id]))return pa(M.a,{key:"loading-item-details"});if(this.props.stateTree.results.failedItemDetails[this.props.item.id])return pa("div",
{"class":"ib-item-pane__message-container"},pa("span",{"class":"ib-results__message"},aa.results.requestError));var sa=this.props.stateTree.results.fullItemDetails[this.props.item.id],ya=this.props.stateTree.results.users[sa.owner],Ha=Object(T.a)(this.props.stateTree),Ea=sa&&this.props.stateTree.results.loadingItems[sa.id],Aa={"ib-item-pane__fader":!0,"ib-item-pane__fader--loading":Ea},Fa=new Date(sa.modified),Ka=new Date(sa.created),Ia=this.props.stateTree.results.allOrganizations[sa.orgId],Oa="public_authoritative"===
sa.contentStatus&&sa.orgId&&Ia,Ja=!("Raster function template"===sa.type&&sa.owner.includes("esri_"));return[pa("div",{"class":"ib-item-pane__thumb-container",key:"ib-item-pane__thumb-container"},pa("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","class":"ib-item-pane__thumbnail",style:"\n                            display: block;\n                            padding: none;\n                            margin: none;\n                            background-image: url("+
sa.thumbURI+");\n                            width: 15rem;\n                            height: 10rem;\n                        ",alt:""}),pa(Ca.a,{favorites:this.props.stateTree.results.user.favorites,item:sa,onToggleFavorite:this.handleFavorites})),pa("div",{id:"item-pane-container","class":"ib-item-pane__container",key:sa.id+"-container"},pa("div",{classes:Aa},pa("div",{key:"item-details"},pa("h4",{"class":"ib-item-pane__title"},sa.title,"\u00a0",Ja&&pa(xa.a,{key:"view-full-item-details",title:aa.viewFullDetails,
handleClick:this.handleItemDetails,focusable:!0},pa("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -2px);"},pa("path",{d:"M13 15h-12v-12h10v-1h-11v14h14v-6h-1z"}),pa("path",{d:"M13 7.536l3-3-3-3v1.061l1.404 1.404h-1.404c-3.85 0-7 3.15-7 7v1h1v-1c0-3.309 2.691-6 6-6h1.475l-1.475 1.475v1.061z"})))),pa("span",{key:"item-owner","class":"ib-item-pane__owner-text"},pa("img",{src:sa.iconURI,"class":"ib-item-pane__type-icon",title:sa.displayName}),sa.displayName,
" ",aa.itemDetails.by,"\u00a0",pa("a",{"class":"ib-item-pane__owner-link",title:Oa?aa.itemDetails.viewOrg:aa.itemDetails.viewUser,target:"_blank",href:Oa?Ia.orgUrl:Ha.baseUrl+"/home/user.html?user\x3d"+sa.owner},Oa?Ia.name:sa.owner)),pa("span",{key:"modified-date","class":"ib-item-pane__modified"},aa.itemDetails.lastModified,": "+qa.format(Fa,{selector:"date",formatLength:"long"})),pa("div",{"class":"ib-item-pane__badges"},this.renderBadges(sa,pa)),pa("div",{"class":"ib-item-pane__line",style:"width: 100%; border-bottom: 1px solid #ccc"}),
pa("span",{key:"snippet","class":"ib-item-pane__snippet"},sa.snippet?sa.snippet:aa.itemDetails.noSnippet),pa("h5",{"class":"ib-item-pane__details"},aa.itemDetails.details),sa.patchedDescription?pa("span",{key:"item-description",innerHTML:sa.patchedDescription,"class":"ib-item-pane__description"}):pa("span",{key:"item-no-description","class":"ib-item-pane__description"},aa.itemDetails.noDescription),pa("h5",{"class":"ib-item-pane__terms-of-use"},aa.itemDetails.termsOfUse),sa.licenseInfo?pa("span",
{key:"item-terms-of-use",innerHTML:sa.licenseInfo,"class":"ib-item-pane__license-info"}):pa("span",{key:"item-no-terms-of-use","class":"ib-item-pane__license-info"},aa.itemDetails.noTermsOfUse),pa("h5",{"class":"ib-item-pane__credits"},aa.itemDetails.attribution),sa.accessInformation?pa("span",{key:"item-access-information",innerHTML:sa.accessInformation,"class":"ib-item-pane__attribution"}):pa("span",{key:"item-no-access-information","class":"ib-item-pane__attribution"},aa.itemDetails.noAttribution),
Oa?pa("p",null,pa("h5",{"class":"ib-item-pane__pa-owner"},aa.sortOptions.owner),pa("div",{"class":"ib-item-pane__pa-org"},pa("img",{src:Ia.thumbURI,alt:Ia.name,"class":"ib-item-pane__pa-org-thumb user-image-small-inline padding-right-half display-block js-owner-thumbnail"}),Ia.name),pa("div",{"class":"ib-item-pane__pa-managed"},pa("span",{"class":"ib-item-pane__pa-managed-label"},aa.itemDetails.managedBy),pa("div",{"class":"ib-item-pane__pa-manager"},ya.thumbURI?pa("img",{src:ya.thumbURI,"class":"ib-item-pane__pa-managed-thumb"}):
pa(U.a,{"class":"ib-item-pane__pa-managed-thumb"}),sa.owner))):null,pa("span",{key:"num-views","class":"ib-item-pane__num-views"},pa("strong",null,aa.itemDetails.views),": "+ea.format(sa.numViews)),pa("span",{key:"created-date","class":"ib-item-pane__num-views"},pa("strong",null,aa.itemDetails.created),": "+qa.format(Ka,{selector:"date",formatLength:"long"})),pa(ta.a,{baseUrl:Ha.baseUrl,item:sa}))),Ea?pa(M.a,{key:"item-pane-loading"}):null)]},va.prototype.renderBadges=function(pa,sa){var ya=this,
Ha=this.props.stateTree.settings.utils.portal.user;return pa.badges.map(function(Ea){switch(Ea){case "authoritative":return sa(da.a,{altOrg:"public_authoritative"===pa.contentStatus&&ya.props.stateTree.results.allOrganizations[pa.orgId]?ya.props.stateTree.results.allOrganizations[pa.orgId].name:void 0});case "deprecated":return sa(na.a,null);case "collaboration":return sa(ja.a,null);case "livingAtlas":return sa(oa.a,null);case "marketplace":return sa(ra.a,null);case "openData":return sa(ua.a,null);
case "premium":return sa(wa.a,{user:Ha});case "subscriber":return sa(Ba.a,{user:Ha});case "solution":return sa(Da.a,null);case "publicDataCollection":return sa(Ga.a,null);case "retiredStoryMap":return sa(La.a,{isRetiredStoryMap:!0});case "retiredApp":return sa(La.a,null)}return null})},va.prototype.handleItemDetails=function(){var pa=Object(T.a)(this.props.stateTree),sa=this.props.stateTree.ui.sidePanel.item;sa&&window.open(pa.baseUrl+"/home/item.html?id\x3d"+sa.id,"_blank")},va.prototype.handleFavorites=
function(){var pa=this.props.stateTree.ui.sidePanel.item,sa=this.props.stateTree.results.user.favorites;pa&&sa&&sa[pa.id]?this.props.removeFromFavorites(pa):pa&&sa&&!sa[pa.id]&&this.props.addToFavorites(pa)},va}(R.Component);S.a=Object(R.connect)(function(za){return{stateTree:za}},function(za){return{addToFavorites:function(va){za(Object(Y.k)(va))},removeFromFavorites:function(va){za(Object(Y.m)(va))}}})(N)},function(R,S){R.exports=P},function(R,S){R.exports=fa},function(R,S){R.exports=V},function(R,
S){R.exports=ba},function(R,S){R.exports=ka},function(R,S){R.exports=la},function(R,S){R.exports=ma},function(R,S){R.exports=ha},function(R,S){R.exports=Z},function(R,S){R.exports=W},function(R,S,N){var X=N(36);S.a=function(aa,ea){var Y=aa.favorites;if(!Y)return null;Y=Y[aa.item.id];return ea("button",{onclick:aa.onToggleFavorite,classes:{"ib-item-pane__favorites-btn":!0,"ib-item-pane__favorites-btn--active":Y}},ea("span",{"class":"screen-readers-only"},Y?X.itemDetails.isFavorite:X.itemDetails.notFavorite),
ea("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"32",height:"32",viewBox:"0 0 32 32"},ea("path",{d:"M16.043.367L19.813 12H32l-9.859 7.172 3.789 11.625-9.887-7.193-9.889 7.193 3.787-11.625L0 12h12.271z"})),Y?X.itemDetails.removeFromFavorites:X.itemDetails.addToFavorites)}},function(R,S,N){S.a=function(X,aa){return aa("div",{"class":X["class"]},aa("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 150",height:"100%",width:"100%"},aa("path",{id:"path3727",d:"m 52,148.35766 c -2.475,-0.18484 -10.8,-0.45343 -18.5,-0.59687 L 19.5,147.5 19.194994,142.1708 C 18.780069,134.92106 24.675201,110.99518 28,106.43495 c 2.119734,-2.90738 3.184268,-3.40501 11.820245,-5.52557 14.015326,-3.441464 12.799724,-4.197584 21.447495,13.34062 4.135724,8.3875 8.291761,16.93353 9.235637,18.99118 0.943876,2.05765 2.065683,3.52516 2.492905,3.26112 0.427221,-0.26404 4.718162,-8.47257 9.535425,-18.24118 4.817262,-9.76862 9.137298,-18.24997 9.600081,-18.847444 1.07417,-1.386813 10.747512,-0.129937 19.839562,2.577794 7.37115,2.19522 11.16896,5.44708 12.85677,11.00853 6.69283,22.05341 7.84944,32.33763 3.67188,32.64913 -1.1,0.082 -6.95,0.62022 -13,1.19598 -11.23048,1.06878 -55.365488,2.12006 -63.5,1.51255 z m 20,-17.37753 c 0,-0.56093 -1.107043,-2.77354 -2.460095,-4.91692 -1.353052,-2.14337 -2.772339,-5.17193 -3.153972,-6.73012 C 66.0043,117.77489 65.377929,116.275 64.993998,116 c -0.383932,-0.275 -2.303235,-3.7147 -4.265118,-7.64379 -2.997369,-6.00286 -3.476188,-7.83951 -2.998076,-11.499996 0.312942,-2.395918 0.973535,-4.62137 1.467986,-4.94545 0.494451,-0.32408 2.959173,0.453755 5.47716,1.728522 2.517988,1.274768 6.181951,2.618632 8.142141,2.986366 3.484798,0.653752 4.619546,0.375908 12.565461,-3.076659 3.34951,-1.455391 3.803432,-1.47865 3.300927,-0.169142 -0.398242,1.037802 -0.124039,1.342318 0.866449,0.962233 C 92.04719,93.384178 91.914975,93.739792 82.242203,114 79.747646,119.225 76.801902,125.4125 75.696105,127.75 73.817142,131.72187 72,133.30992 72,130.98013 Z M 70.29923,93.893977 C 68.538807,93.384871 66.824749,92.525456 66.490213,91.984165 66.155677,91.442874 65.211939,91 64.393017,91 c -1.502433,0 -6.302871,-4.784056 -6.361416,-6.339707 -0.01738,-0.461839 -0.887451,-1.586839 -1.933489,-2.5 C 50.802328,77.537229 48.879628,58.999483 52.441931,46.909154 54.720369,39.176219 55.37403,38.7615 68,37.038257 72.675,36.400195 79.341587,35.480846 82.814638,34.995261 86.28769,34.509675 89.663822,34.317502 90.317154,34.568209 91.693801,35.096478 97,43.197939 97,44.771524 c 0,0.583995 0.454771,1.2134 1.010602,1.398677 1.503878,0.501292 2.439668,18.675087 1.175539,22.829799 -2.185196,7.181885 -3.87855,11.047986 -5.800118,13.242269 -1.087422,1.241752 -2.586953,3.479873 -3.332291,4.973602 -0.745338,1.493728 -1.684447,2.51236 -2.086909,2.263625 -0.402462,-0.248735 -1.79714,0.347041 -3.099286,1.323947 -5.368623,4.027692 -8.806128,4.756927 -14.568307,3.090534 z M 47.015313,60.25 C 47.006891,59.5625 46.333573,59 45.519052,59 43.283015,59 42.644845,54.707151 43.38075,44.616059 44.166271,33.844619 44.896556,30 46.15707,30 c 1.316225,0 7.090208,-4.174219 8.645304,-6.25 0.721069,-0.9625 1.890773,-1.75 2.599342,-1.75 0.70857,0 2.102798,-0.9 3.098284,-2 1.625205,-1.795832 3.079967,-2 14.250617,-2 14.795202,0 15.235286,0.195009 24.330624,10.781341 1.078019,1.254737 2.667599,4.179737 3.532399,6.5 0.86481,2.320262 1.94546,5.118659 2.40144,6.218659 1.51768,3.661163 2.10273,13.653118 0.88532,15.120015 -2.35184,2.833785 -3.74627,1.464615 -4.45065,-4.370015 -0.68461,-5.670783 -5.785078,-16.623556 -8.973492,-19.269704 -1.58533,-1.315707 -2.444358,-1.239512 -24.630153,2.184678 -15.102822,2.330992 -14.275738,1.799234 -17.29574,11.119973 -0.852701,2.631721 -1.557256,6.456721 -1.565678,8.5 C 48.976265,56.828226 48.533156,59.175 48,60 c -0.64625,1 -0.974479,1.083333 -0.984687,0.25 z",
fill:"#fff"})))}},function(R,S,N){var X=N(36);S.a=function(aa,ea){var Y=aa.item,T=aa.baseUrl,ca=X.itemDetails.shared[Y.access?Y.access:Y.sharing&&Y.sharing.access];if(Y.sharedToGroups&&0<Y.sharedToGroups.length){var M=Y.sharedToGroups.map(function(U){return ea("a",{"class":"ib-item-pane__group-link",href:T+"/home/group.html?owner\x3d"+U.owner+"\x26title\x3d"+U.title,key:U.id,target:"_blank"},U.title)}).reduce(function(U,da,ja){return U[ja-1]&&U.push(", "),U.push(da),U},[]);ca="public"===Y.access||
"org"===Y.access?[ca+", ",M]:M}else if("shared"===Y.access&&(!Y.sharedToGroups||0===Y.sharedToGroups.length))return null;return ea("span",{key:"shared-with","class":"ib-item-pane__shared"},ea("strong",null,X.itemDetails.sharedWith),": ",ca)}},function(R,S,N){function X(Y){Y.focus()}R=N(206);var aa=N.n(R),ea=N(590);S.a=function(Y,T){var ca=Y.key,M=Y.containerClasses,U=Y.contentClasses,da=Y.handleClose,ja=Y.i18n,na=Y.title,oa=Y.children,ra=null;return"item"===Y.type&&(ra=T(ea.a,{key:"item-details-footer"})),
T("div",{key:"details-pane",classes:M,"aria-expanded":"true"},T("div",{key:"content-container",classes:U},T("header",{"class":"ib-side-body__header"},T("span",{"class":"ib-side-body__title"},na),T("div",{"class":"ib-side-body__btn-container"},T(aa.a,{afterCreate:X,focusable:!0,handleClick:da,key:"side-panel-close-btn",title:ja.close},T("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -1px);"},T("path",{d:"M13.314 1.99l0.707 0.707-11.314 11.313-0.707-0.707 11.314-11.313z"}),
T("path",{d:"M2 2.697l0.707-0.707 11.313 11.314-0.707 0.707-11.313-11.314z"}))))),T("section",{key:ca,"class":"ib-side-body__content"},oa),ra))}},function(R,S,N){var X=N(0);R=N(16);var aa=N(100),ea=N(434);N=function(Y){function T(ca){ca=Y.call(this,ca)||this;return ca.handleAddBtnClick=ca.handleAddBtnClick.bind(ca),ca.handleCustomActionClick=ca.handleCustomActionClick.bind(ca),ca}return Object(X.d)(T,Y),T.prototype.render=function(ca){var M=this,U=this.props.stateTree.ui.sidePanel.item,da=U&&!!this.props.stateTree.results.selectedItems[U.id],
ja={"ib-item-pane__btn--disabled":U&&!!this.props.stateTree.results.loadingItems[U.id]},na=Object(X.a)(Object(X.a)({},ja),{"ib-item-pane__btn--active":da}),oa=this.props.stateTree.settings.config.customActions.filter(function(ra){return ra.allowed(U||{})});return ca("footer",{"class":"ib-item-pane__footer"},this.props.stateTree.settings.config.disableMainAction?null:ca("button",{key:"select-btn","class":"ib-item-pane__select-btn",classes:na,onclick:this.handleAddBtnClick},da?this.props.stateTree.settings.config.mainInverseActionTitle:
this.props.stateTree.settings.config.mainActionTitle),oa.map(function(ra){return ca("button",{key:"usage","class":"ib-item-pane__btn",classes:ja,value:ra.name,onclick:M.handleCustomActionClick},ra.name)}))},T.prototype.handleAddBtnClick=function(){var ca=this.props.stateTree.ui.sidePanel.item;ca&&(this.props.stateTree.results.selectedItems[ca.id]?this.props.deselectItem(ca):this.props.selectItem(ca))},T.prototype.handleCustomActionClick=function(ca){var M=this.props.stateTree.ui.sidePanel.item;M&&
this.props.customAction(ca.target.value,M)},T}(R.Component);S.a=Object(R.connect)(function(Y){return{stateTree:Y}},function(Y){return{deselectItem:function(T){Y(Object(aa.o)(T))},selectItem:function(T){Y(Object(aa.r)(T))},customAction:function(T,ca){Y(Object(ea.c)(T,ca))}}})(N)},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(592),Y=N(206),T=N.n(Y);N=function(ca){function M(){return null!==ca&&ca.apply(this,arguments)||this}return Object(X.d)(M,ca),M.prototype.render=function(U){var da=U("div",
{"class":"ib-header__spacer"});this.props.showBackBtn&&(da=U(T.a,{handleClick:this.props.onBack,key:"main-back-btn",title:aa.back,focusable:!0},U("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -1px);"},U("path",{d:"M8 1.288l-7.212 7.212 7.212 7.212v-1.414l-5.288-5.297h13.288v-0.99h-13.307l5.307-5.307z"}))));var ja=U("div",{"class":"ib-header__spacer"});return this.props.showCloseBtn&&(ja=U(T.a,{key:"main-close-btn",title:aa.close,focusable:!0,handleClick:this.props.onBack},
U("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 32 32"},U("path",{d:"M31.047 28h-5l-12-12 12-12h5l-12 12 12 12zm-26-12l12-12h-5l-12 12 12 12h5l-12-12z"})))),U("div",{classes:{ib__header:!0},key:"header"},U("div",{key:"section-title-container","class":"ib-header__search-section"},da,U(ea.a,{key:"section-dropdown"}),ja))},M}(R.Component);S.a=Object(R.connect)(function(ca){return{showBackBtn:ca.settings.config.showBackBtn,showCloseBtn:ca.settings.config.showCloseBtn,onBack:function(){ca.settings.config.onBack()}}},
function(){return{}})(N)},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(288),Y=N(48),T=N(310),ca=N.n(T);T=N(206);var M=N.n(T);N=function(U){function da(ja){ja=U.call(this,ja)||this;var na=(ja.props.portal.user?ja.props.baseSections:ja.props.baseSections.filter(function(oa){return"livingAtlas"===oa||"all"===oa})).map(function(oa){return{value:oa,text:aa.header.sectionTitles[oa]}});return ja.props.customSections.forEach(function(oa){var ra={value:oa.name,text:oa.name};oa.addToFront?na.splice(0,
0,ra):na.push(ra)}),ja.state={options:na},ja.handleOptionSelect=ja.handleOptionSelect.bind(ja),ja}return Object(X.d)(da,U),da.prototype.render=function(ja){var na=this.props.section,oa=aa.header.sectionTitles[na];return 2>this.state.options.length||this.props.replaceSectionDropdownWithTitle?ja("h3",{id:"ib-dialog-title","class":"ib-header__dialog-title"},this.props.dialogTitle):ja(ca.a,{key:"section-dropdown-base",options:this.state.options,onSelect:this.handleOptionSelect,selectedOptionValue:this.props.section},
ja("h3",{key:"search-"+na+"-dropdown",id:"section-dropdown-toggle","class":"ib-section-dropdown__toggle"},oa||na,"\u00a0",ja("span",{"class":"btn-svg__button-noevent flex"},ja(M.a,{key:"section-dropdown-button"},ja("svg",{role:"img",width:"12",height:"12",viewBox:"0 0 16 16"},ja("path",{d:"M1.5,4 L8,11 L14.5,4 C11.893,4 4.101,4 1.5,4 Z"}))))))},da.prototype.handleOptionSelect=function(ja){this.props.changeSearchSection(ja);this.props.search(!0)},da}(R.Component);S.a=Object(R.connect)(function(U){return{baseSections:U.settings.config.baseSections,
customSections:U.settings.config.customSections,portal:U.settings.utils.portal,replaceSectionDropdownWithTitle:!!U.settings.config.replaceSectionDropdownWithTitle,dialogTitle:U.settings.config.dialogTitle,section:U.parameters.section}},function(U){return{changeSearchSection:function(da){U(Object(ea.b)(da))},search:function(da){U(Object(Y.i)(da))}}})(N)},function(R,S,N){var X=N(0),aa=N(36),ea=N(178);R=N(16);var Y=N(285),T=N.n(Y),ca=N(418),M=N(48),U=N(410),da=N(409),ja=N(363),na=N(804),oa=N(805);N=
function(ra){function ua(wa){wa=ra.call(this,wa)||this;return wa.handleSearchChange=wa.handleSearchChange.bind(wa),wa.handleSearchKeyDown=wa.handleSearchKeyDown.bind(wa),wa.handleListClick=wa.handleListClick.bind(wa),wa.handleTableClick=wa.handleTableClick.bind(wa),wa.handleSortClick=wa.handleSortClick.bind(wa),wa.handleFilterClick=wa.handleFilterClick.bind(wa),wa}return Object(X.d)(ua,ra),ua.prototype.render=function(wa){var Ba=1E4<=this.props.nextTotal?aa.itemLimitReached.replace("${limit}",ea.format(1E4)):
ea.format(this.props.nextTotal);Ba="function"==typeof this.props.replacementItemName?this.props.replacementItemName(Ba):this.props.replacementItemName?Ba+" "+this.props.replacementItemName:aa.resultCount+": "+Ba;var Da=aa.header.sectionTitles[this.props.section];Da=this.props.placeholderText?this.props.placeholderText:aa.search+" "+(Da||this.props.section);var La={"ib-input-area__result-bar-container":!0,"ib-input-area__result-bar-container--solo":"subscription"===this.props.section};return wa("div",
null,wa("div",{key:"search-input-area","class":"ib__input-area"},"subscription"!==this.props.section?wa("div",{key:"search-bar-container","class":"ib-input-area__search-bar"},wa("input",{id:"item-browser-search-input","class":"ib-input-area__search-input",type:"search",oninput:this.handleSearchChange,onkeydown:this.handleSearchKeyDown,placeholder:Da,"aria-label":Da,value:this.props.searchString})):null,wa("div",{classes:La},wa("span",{"class":"ib-input-area__result-count"},Ba),wa("div",{"class":"ib-input-area__icon-button-container"},
wa(T.a,{active:"table"===this.props.resultPanelType,key:"table-button",handleClick:this.handleTableClick,title:aa.compactView},wa("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},wa("g",{stroke:"none","stroke-width":"1"},wa("g",null,wa("path",{d:"M4 14h11v1H4v-1zm0-4h11v1H4v-1zm0-3h11V6H4v1zm0-4h11V2H4v1zM3 14H1v1h2v-1zm0-4H1v1h2v-1zm0-4H1v1h2V6zm0-4H1v1h2V2z"}))))),wa(T.a,{active:"list"===this.props.resultPanelType,handleClick:this.handleListClick,key:"list-button",title:aa.listView},
wa("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},wa("g",{stroke:"none","stroke-width":"1"},wa("g",null,wa("path",{d:"M7 13h8v1H7zm-2-1H2v3h3zm2-8h8V3H7zm0 5h8V8H7zM5 2H2v3h3zm0 5H2v3h3z"}))))),"subscription"!==this.props.section?[wa("div",{key:"spacer","class":"ib-input-area__spacer"}),wa(T.a,{active:"filter"===this.props.sidePanelType,handleClick:this.handleFilterClick,key:"filter-button",title:"filter"===this.props.sidePanelType?aa.close:aa.filterPane.filter},wa("svg",{role:"img",
viewBox:"0 0 16 16",width:"16px",height:"16px"},wa("path",{d:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"}))),wa(T.a,{active:"sort"===this.props.sidePanelType,handleClick:this.handleSortClick,key:"sort-button",title:"sort"===this.props.sidePanelType?aa.close:aa.sortOptions.sort},wa("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},wa("g",{stroke:"none","stroke-width":"1"},wa("g",null,wa("path",{d:"M1,1 L15,1 L15,2 L1,2 L1,1 Z M4,5 L15,5 L15,6 L4,6 L4,5 Z M7,9 L15,9 L15,10 L7,10 L7,9 Z M11,13 L15,13 L15,14 L11,14 L11,13 Z"})))))]:
null))),wa(ca.a,{key:"active-filters",theme:"dark"}))},ua.prototype.handleSearchChange=function(wa){this.props.changeSearchString(wa.target.value);""===wa.target.value&&""!==this.props.previousSearchString&&this.props.search(!0)},ua.prototype.handleSearchKeyDown=function(wa){"Enter"===wa.key&&this.props.search(!0)},ua.prototype.handleTableClick=function(wa){wa.preventDefault();"list"===this.props.resultPanelType&&this.props.changeResultDisplay()},ua.prototype.handleListClick=function(wa){wa.preventDefault();
"table"===this.props.resultPanelType&&this.props.changeResultDisplay()},ua.prototype.handleFilterClick=function(wa){wa.preventDefault();"filter"===this.props.sidePanelType?this.props.closeDetailsPane():this.props.viewFilters()},ua.prototype.handleSortClick=function(wa){wa.preventDefault();"sort"===this.props.sidePanelType?this.props.closeDetailsPane():this.props.viewSort()},ua}(R.Component);S.a=Object(R.connect)(function(ra){return{nextTotal:ra.parameters.nextQuery.total,placeholderText:ra.settings.config.searchPlaceholderText,
previousSearchString:ra.parameters.searchString.previous,replacementItemName:ra.settings.config.itemName,resultPanelType:ra.ui.resultPanel.display,searchString:ra.parameters.searchString.current,sidePanelType:ra.ui.sidePanel.type,section:ra.parameters.section}},function(ra){return{search:function(ua){ra(Object(M.i)(ua))},changeResultDisplay:function(){ra({type:U.a})},changeSearchString:function(ua){ra(Object(da.b)(ua))},closeDetailsPane:function(){ra(Object(ja.c)())},viewFilters:function(){ra(Object(na.b)())},
viewSort:function(){ra(Object(oa.b)())}}})(N)},function(R,S,N){var X=N(0),aa=N(36);R=N(16);var ea=N(48),Y=N(595),T=N(596),ca=N(205),M=N.n(ca);N=function(U){function da(){var ja=null!==U&&U.apply(this,arguments)||this;return ja.handleScroll=function(na){.99<=(na.target.scrollTop+na.target.offsetHeight)/na.target.scrollHeight&&"loadingNext"!==ja.props.resultPanelStatus&&-1!==ja.props.nextStart&&ja.props.loadMoreContent()},ja.handleCreate=function(na){setTimeout(function(){na.scrollHeight<=na.clientHeight&&
"loadingNext"!==ja.props.resultPanelStatus&&-1!==ja.props.nextStart&&ja.props.loadMoreContent(50)},10)},ja}return Object(X.d)(da,U),da.prototype.render=function(ja){var na=this.props,oa=na.resultPanelStatus,ra=na.displayItems,ua=na.showSubmitButton,wa=na.resultPanelDisplayType;na=na.tooManyGroups;switch(oa){case "success":case "loadingNext":return ja(Y.a,{key:"item-list-"+wa,i18n:aa,showSubmitButton:ua,results:ra,loadingNext:"loadingNext"===oa,handleScroll:this.handleScroll,handleCreate:this.handleCreate},
ja(T.a,{key:"result-items"}));case "loading":return ja("div",{key:"loading-items","class":"ib__results"},ja(M.a,{key:"item-loader",text:aa.results.loadingItems}));case "empty":return ja("div",{key:"empty-state","class":"ib__results"},ja("div",{"class":"ib-results__message-container"},ja("span",{"class":"ib-results__message"},aa.results.empty)))}return na?ja("div",{key:"too-many-groups","class":"ib__results"},ja("div",{"class":"ib-results__message-container"},ja("span",{"class":"ib-results__message"},
aa.results.tooManyGroups))):ja("div",{key:"request-error","class":"ib__results"},ja("div",{"class":"ib-results__message-container"},ja("span",{"class":"ib-results__message"},aa.results.requestError)))},da}(R.Component);S.a=Object(R.connect)(function(U){return{displayItems:U.results.displayItems,nextStart:U.parameters.nextQuery.nextStart,showSubmitButton:U.settings.config.showSubmitButton,resultPanelDisplayType:U.ui.resultPanel.display,resultPanelStatus:U.ui.resultPanel.status,tooManyGroups:!(!("myGroups"===
U.parameters.section&&U.results.user.groups&&175<U.results.user.groups.length)||U.parameters.filter.group)}},function(U){return{loadMoreContent:function(da){U(Object(ea.h)(da))}}})(N)},function(R,S,N){R=N(205);var X=N.n(R);S.a=function(aa,ea){var Y=aa.key,T=aa.i18n,ca=aa.loadingNext,M=aa.handleScroll,U=aa.handleCreate,da=aa.children;return 0<aa.results.length?ea("div",{key:Y,"class":"ib-results__item-list",onscroll:M,afterCreate:U},da,ca?ea("div",{"class":"ib-results__load-container"},ea(X.a,{key:"more-items-loader"})):
null):ea("div",{key:"no-items-found","class":"ib-results__item-list ib-results__item-list--none"},ea("span",{style:"font-size: 0.9375rem;"},T.results.noItemsFound))}},function(R,S,N){var X=N(0);R=N(16);var aa=N(126),ea=N(363),Y=N(357),T=N(100),ca=N(434),M=N(597),U=N.n(M);M=N(598);var da=N.n(M);N=function(ja){function na(oa){oa=ja.call(this,oa)||this;return oa.handleShowItemDetails=oa.handleShowItemDetails.bind(oa),oa.handleSelectionClick=oa.handleSelectionClick.bind(oa),oa.handleCustomActionClick=
oa.handleCustomActionClick.bind(oa),oa.startResizePoll=oa.startResizePoll.bind(oa),oa.resizePoll=oa.resizePoll.bind(oa),oa}return Object(X.d)(na,ja),na.prototype.render=function(oa){var ra=this.props.stateTree.results;if(0<ra.displayItems.length)return oa("div",{key:"item-wrapper",id:"resize-detector",afterCreate:this.startResizePoll},this.mapItemsToChildren(ra.displayItems,oa))},na.prototype.mapItemsToChildren=function(oa,ra){var ua=this;return oa.map(function(wa){var Ba=Object(aa.a)(ua.props.stateTree);
return"list"===ua.props.stateTree.ui.resultPanel.display?ra(U.a,{constrained:ua.state.constrained,key:wa.id+"-card",item:wa,loadingItems:ua.props.stateTree.results.loadingItems,selectedItems:ua.props.stateTree.results.selectedItems,activeItem:ua.props.stateTree.ui.sidePanel.item,portal:Ba,onShowItemDetails:ua.handleShowItemDetails,onSelectionClick:ua.handleSelectionClick,customActions:ua.props.stateTree.settings.config.customActions,onCustomActionClick:ua.handleCustomActionClick,disableMainAction:ua.props.stateTree.settings.config.disableMainAction,
sortField:ua.props.stateTree.parameters.sort.field,hideEllipses:ua.props.stateTree.settings.config.hideEllipses,organization:"public_authoritative"===wa.contentStatus&&ua.props.stateTree.results.allOrganizations[wa.orgId]?ua.props.stateTree.results.allOrganizations[wa.orgId]:void 0}):ra(da.a,{key:wa.id+"-cardrow",item:wa,loadingItems:ua.props.stateTree.results.loadingItems,selectedItems:ua.props.stateTree.results.selectedItems,activeItem:ua.props.stateTree.ui.sidePanel.item,portal:Ba,onShowItemDetails:ua.handleShowItemDetails,
onSelectionClick:ua.handleSelectionClick,customActions:ua.props.stateTree.settings.config.customActions,onCustomActionClick:ua.handleCustomActionClick,disableMainAction:ua.props.stateTree.settings.config.disableMainAction,sortField:ua.props.stateTree.parameters.sort.field,hideEllipses:ua.props.stateTree.settings.config.hideEllipses})})},na.prototype.handleShowItemDetails=function(oa){var ra=this.props.stateTree.ui.sidePanel;ra.item&&ra.item.id===oa.id?this.props.closeDetailsPane():this.props.viewItemDetails(oa)},
na.prototype.handleSelectionClick=function(oa){this.props.stateTree.results.selectedItems[oa.id]?this.props.deselectItem(oa):this.props.selectItem(oa)},na.prototype.handleCustomActionClick=function(oa,ra){this.props.customAction(oa,ra)},na.prototype.startResizePoll=function(oa){this.resizePoll(oa)},na.prototype.resizePoll=function(oa){var ra=this;oa&&0<oa.clientWidth&&(300>oa.clientWidth&&!this.state.constrained?this.setState({constrained:!0}):300<oa.clientWidth&&this.state.constrained&&this.setState({constrained:!1}),
setTimeout(function(){ra.resizePoll(oa)},250))},na}(R.Component);S.a=Object(R.connect)(function(ja){return{stateTree:ja}},function(ja){return{closeDetailsPane:function(){ja(Object(ea.c)())},viewItemDetails:function(na){ja(Object(Y.b)(na))},deselectItem:function(na){ja(Object(T.o)(na))},selectItem:function(na){ja(Object(T.r)(na))},customAction:function(na,oa){ja(Object(ca.c)(na,oa))}}})(N)},function(R,S){R.exports=Q},function(R,S){R.exports=ia},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(R,S,N){N.d(S,"a",function(){return X});N.d(S,"b",function(){return aa});var X="VIEW_FILTERS",aa=function(){return{type:X}}},function(R,S,N){N.d(S,"a",function(){return X});N.d(S,"b",function(){return aa});var X="VIEW_SORT",aa=function(){return{type:X}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(R,S,N){N.r(S);var X=N(0);
R=N(16);var aa=N(415);N.d(S,"defaultConfig",function(){return aa.a});N.d(S,"reducers",function(){return aa.c});N.d(S,"initialState",function(){return aa.b});var ea=N(100);N.d(S,"SELECT_ITEM_SINGLE",function(){return ea.j});N.d(S,"SELECT_ITEM",function(){return ea.g});N.d(S,"DESELECT_ITEM",function(){return ea.c});N.d(S,"SELECT_ITEM_ASYNC",function(){return ea.h});N.d(S,"SELECT_ITEM_ASYNC_FAILED",function(){return ea.i});var Y=N(48);N.d(S,"search",function(){return Y.i});var T=N(455);N.d(S,"updateExtent",
function(){return T.c});var ca=N(357);N.d(S,"viewItemDetails",function(){return ca.b});var M=N(288);N.d(S,"changeSearchSection",function(){return M.b});var U=N(591),da=N(593),ja=N(594),na=N(572),oa=N(488);N=function(ra){function ua(){return null!==ra&&ra.apply(this,arguments)||this}return Object(X.d)(ua,ra),ua.prototype.render=function(wa){var Ba=this.props.layoutMode,Da={ib__container:!0,"ib__container--expanded":"fullscreen"===Ba,"ib__container--adjustable":"adjustable"===Ba};switch(Ba){case "fullscreen":return wa(oa.a,
{key:"big-browser",containerClasses:Da});case "adjustable":return wa("div",null,wa(oa.a,{key:"big-browser",containerClasses:Da}),wa("div",{"class":"ib__container--underlay"}));default:return wa("div",{id:"item-browser-container",classes:Da},wa(na.a,{key:"side-panel",closing:this.props.sidePanelClosing}),wa(U.a,{key:"header"}),wa(da.a,{key:"input-area"}),wa(ja.a,{key:"result-panel"}))}},ua}(R.Component);S["default"]=Object(R.connect)(function(ra){return{layoutMode:ra.settings.config.layoutMode,expanded:ra.ui.expanded.maximized,
sidePanelClosing:ra.ui.sidePanel.closing}},function(){return{}})(N)}])})},"arcgis-components/Loaders/LoaderBars":function(){define(function(){return function(K){function G(v){if(w[v])return w[v].exports;var r=w[v]={i:v,l:!1,exports:{}};return K[v].call(r.exports,r,r.exports,G),r.l=!0,r.exports}var w={};return G.m=K,G.c=w,G.d=function(v,r,f){G.o(v,r)||Object.defineProperty(v,r,{enumerable:!0,get:f})},G.r=function(v){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(v,"__esModule",{value:!0})},G.t=function(v,r){if((1&r&&(v=G(v)),8&r)||4&r&&"object"==typeof v&&v&&v.__esModule)return v;var f=Object.create(null);if(G.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:v}),2&r&&"string"!=typeof v)for(var c in v)G.d(f,c,function(a){return v[a]}.bind(null,c));return f},G.n=function(v){var r=v&&v.__esModule?function(){return v["default"]}:function(){return v};return G.d(r,"a",r),r},G.o=function(v,r){return Object.prototype.hasOwnProperty.call(v,
r)},G.p="",G(G.s=868)}({868:function(K,G,w){w.r(G);G["default"]=function(v,r){var f=v.text;return r("div",{"class":"load-bars__container",key:v.key},r("div",{"class":"load-bars__bars"}),f?r("span",{"class":"load-bars__text"},f):null)}}})})},"arcgis-components/Buttons/SvgButton":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,
w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,
a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=830)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k=
{},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);
else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");
for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=
e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=
n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,
k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=K},830:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(a){a=f.call(this,a)||this;return a.handleClick=a.handleClick.bind(a),a}return Object(r.d)(c,f),c.prototype.render=function(a){var b=this.props,p=b.label,q=b.labelDirection,t=b.key,m=b.title;return a("button",Object(r.a)({afterCreate:b.afterCreate,
key:t,id:t,classes:{"btn-svg__button":!0,"btn-svg__button--tooltip":p,"btn-svg__button--tooltip-left":"left"===q,"btn-svg__button--tooltip-right":"right"===q,"btn-svg__button--tooltip-top":"top"===q},onmousedown:this.preventFocus,onclick:this.handleClick},p?{"aria-label":p}:{title:m},{tabindex:!b.focusable&&"-1",value:b.value}),a("div",{"class":"btn-svg__button-content"},this.props.children))},c.prototype.preventFocus=function(a){a.preventDefault()},c.prototype.handleClick=function(a){this.props.handleClick&&
a.target&&(a.target.value=this.props.value,this.props.handleClick(a))},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/Buttons/Toggle":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&
Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",
f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=831)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=
0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||
(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;
switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=
[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});
v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};
Object.create;Object.create},16:function(G,w){G.exports=K},831:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(a){a=f.call(this,a)||this;return a.handleToggleClick=a.handleToggleClick.bind(a),a}return Object(r.d)(c,f),c.prototype.render=function(a){var b=this.props,p=b.name,q=b.childOptions,t=b.prependValue,m=b.infoTooltip;t=t?""+t+this.props.value:this.props.value;b=!!(b.selectedToggle===t||q&&this.childSelectedRecursive(q,t));var n={"btn-toggle__item":!0,"btn-toggle__item--active":b,
"btn-toggle__item--flex":!!m},k={"btn-toggle__button":!0,"btn-toggle__button--active":b},l=null;return q&&(l=a("ul",{"class":"btn-toggle__sub-list",role:"group"},this.mapChildrenToToggles(a))),a("li",{key:t,classes:n,role:"treeitem","aria-selected":b?"true":void 0,"aria-expanded":q?b?"true":"false":void 0},a("button",{key:t,classes:k,value:t,onmousedown:this.preventDefault,onclick:this.handleToggleClick,title:this.props.tooltip,role:"checkbox","aria-checked":b?"true":void 0,"aria-label":p,onblur:this.props.handleBlur,
tabindex:"0"},a("span",{"class":"btn-toggle__text",key:"text"},p),this.props.count?a("span",{"class":"btn-toggle__count",key:"count"},"\u00a0","("+this.props.count+")"):null),!!m&&a("calcite-tooltip-manager",{"class":"btn-toggle__item-tooltip"},a("calcite-button",{id:"share-org-settings-filter-tooltip",appearance:"transparent",color:"neutral",scale:"s",round:!0},a("calcite-icon",{scale:"s",icon:"information"})),a("calcite-tooltip",{"reference-element":"share-org-settings-filter-tooltip","overlay-positioning":"fixed"},
m)),b?l:null)},c.prototype.preventDefault=function(a){a.preventDefault()},c.prototype.mapChildrenToToggles=function(a){var b=this,p=this.props,q=p.childOptions,t=p.selectedToggle,m=p.onToggleClick,n=p.useFullPathAsValue,k=(p=p.prependValue)?""+p+this.props.value:this.props.value;return q?q.map(function(l){return a(c,{count:l.count,key:l.value,name:l.displayName,value:n?k+"/"+l.value:l.value,showTooltip:b.props.showTooltip,tooltip:l.tooltip,selectedToggle:t,childOptions:l.children,onToggleClick:m,
useFullPathAsValue:n})}):null},c.prototype.childSelectedRecursive=function(a,b){var p=this,q=this.props,t=q.selectedToggle;return q.useFullPathAsValue?a.reduce(function(m,n){return!!(t===b+"/"+n.value||n.children&&p.childSelectedRecursive(n.children,b+"/"+n.value))||m},!1):a.reduce(function(m,n){return!!(t===n.value||n.children&&p.childSelectedRecursive(n.children,p.props.value))||m},!1)},c.prototype.handleToggleClick=function(a){a.preventDefault();this.props.onToggleClick(this.props.prependValue?
""+this.props.prependValue+this.props.value:this.props.value,this.props.name)},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/Dropdowns/AccordionDropdown/index":function(){define(["../../Component","dojo/i18n!../../Dropdowns/AccordionDropdown/nls/resources"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,
c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=
f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=835)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,
h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?
e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=
1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&
u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,
"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<
h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},18:function(w,v){w.exports=K},339:function(w,v,r){r.d(v,"a",function(){return f});var f=function(c){return function(a){13===a.keyCode&&c(a)}}},525:function(w,v){w.exports=G},835:function(w,v,r){r.r(v);var f=r(0),c=r(525);w=r(18);var a=r(339);r=function(b){function p(q){var t=b.call(this,q)||this;return t.handleDropdownKeyDown=Object(a.a)(t.handleDropdownClick.bind(t)),
t.state={active:!!q.startActive},t.handleDropdownClick=t.handleDropdownClick.bind(t),t.handleClear=t.handleClear.bind(t),t}return Object(f.d)(p,b),p.prototype.render=function(q){var t={"drp-accordion__content":!0,"drp-accordion__content--no-padding":!1===this.props.padding},m={"drp-accordion__icon":!0,"drp-accordion__icon--active":this.state.active},n=null;return this.props.clearable&&(n=q("button",{"class":"drp-accordion__clear-btn",onclick:this.handleClear},c.clear)),q("div",{key:this.props.key,
classes:{"drp-accordion__section":!0},role:"tablist"},q("h4",{classes:{"drp-accordion__title":!0,clearfix:!0,"drp-accordion__title--flex":this.props.flex,"drp-accordion__title--active":this.state.active},value:"itemType",onclick:this.handleDropdownClick,onkeydown:this.handleDropdownKeyDown,role:"tab",tabindex:"0","aria-expanded":""+this.state.active},q("div",{"class":"drp-accordion__wrapper"},q("span",{classes:m},q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 32 32",
role:"img"},q("path",{d:"M28 9v5L16 26 4 14V9l12 12L28 9z"}))),q("span",null,this.props.title)),n),this.state.active?q("div",{classes:t},this.props.children):null)},p.prototype.handleDropdownClick=function(){this.setState({active:!this.state.active})},p.prototype.handleClear=function(q){if(!this.props.onClear)throw"no onClear callback has been provided to AccordionDropdown";q.stopPropagation();this.props.onClear()},p}(w.Component);v["default"]=r}})})},"arcgis-components/Buttons/IconButton":function(){define(["../Component"],
function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==
typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=829)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=
typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}
function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;
x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;
h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&
e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});v.d(w,"g",function(){return p});var q=function(m,n){return(q=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=K},829:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(){return null!==
f&&f.apply(this,arguments)||this}return Object(r.d)(c,f),c.prototype.render=function(a){var b=this.props,p=b.active,q=b.label,t=b.labelDirection,m=b.key,n=b.ariaControls;return a("button",Object(r.a)({id:m,key:m+"-container",classes:{"btn-icon__button":!0,"btn-icon__button--center":b.center,"btn-icon__button--tooltip":q,"btn-icon__button--tooltip-left":"left"===t,"btn-icon__button--tooltip-right":"right"===t,"btn-icon__button--tooltip-top":"top"===t,"btn-icon__button--active":p},"aria-label":q,onmousedown:this.preventFocus,
onclick:this.props.handleClick,tabindex:this.props.tabindex?""+this.props.tabindex:"0"},n?{"aria-controls":n,"aria-expanded":p?"true":"false"}:{"aria-checked":p},{title:b.title}),this.props.children)},c.prototype.preventFocus=function(a){a.preventDefault()},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/Modals/Overlay":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,
f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),
2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=874)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=
null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==
typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}
function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-
1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==
typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,
h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=K},312:function(G,w,v){function r(a){return c[a.vnodeSelector]&&(!a.properties||!a.properties.disabled&&-1!==a.properties.tabindex)||a.properties&&a.properties.tabindex&&-1<parseInt(a.properties.tabindex,10)}var f=
v(0),c={a:!0,area:!0,input:!0,select:!0,textarea:!0,button:!0,iframe:!0};G=function(a){function b(p){p=a.call(this,p)||this;return p.registerFirstFocusable=p.registerFirstFocusable.bind(p),p.registerLastFocusable=p.registerLastFocusable.bind(p),p.handleFocusChange=p.handleFocusChange.bind(p),p}return Object(f.d)(b,a),b.prototype.render=function(){var p=this.findFirstFocusable(this.props.children),q=this.findLastFocusable(this.props.children);return p&&q&&(p.properties?p.properties.afterCreate=this.registerFirstFocusable:
p.properties={afterCreate:this.registerFirstFocusable},q.properties?q.properties.afterCreate=this.registerLastFocusable:q.properties={afterCreate:this.registerLastFocusable}),this.props.children},b.prototype.findFirstFocusable=function(p){if(p)for(var q=0;q<p.length;q++){var t=p[q];if(r(t)||t.children&&(t=this.findFirstFocusable(t.children)))return t}},b.prototype.findLastFocusable=function(p){if(p)for(var q=p.length-1;0<=q;q--){var t=p[q];if(r(t)||t.children&&(t=this.findLastFocusable(t.children)))return t}},
b.prototype.registerFirstFocusable=function(p){this.firstFocusableElement&&this.firstFocusableElement!==p&&this.firstFocusableElement.removeEventListener("keydown",this.handleFocusChange);p.addEventListener("keydown",this.handleFocusChange);this.firstFocusableElement=p;setTimeout(function(){p&&p.focus()},10)},b.prototype.registerLastFocusable=function(p){this.lastFocusableElement&&this.lastFocusableElement!==p&&this.lastFocusableElement.removeEventListener("keydown",this.handleFocusChange);this.lastFocusableElement=
p;this.lastFocusableElement.addEventListener("keydown",this.handleFocusChange)},b.prototype.handleFocusChange=function(p){"Tab"!==p.key&&9!==p.keyCode||(p.shiftKey?document.activeElement===this.firstFocusableElement&&this.lastFocusableElement&&(this.lastFocusableElement.focus(),p.preventDefault()):document.activeElement===this.lastFocusableElement&&this.firstFocusableElement&&(this.firstFocusableElement.focus(),p.preventDefault()))},b}(v(16).Component);w.a=G},874:function(G,w,v){v.r(w);var r=v(0);
G=v(16);var f=v(312);v=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}return Object(r.d)(a,c),a.prototype.componentWillReceiveProps=function(b){!1!==this.props.scrollable&&!1===b.scrollable&&(b=document.getElementsByClassName("mod__overlay-container"),b[0]&&(b[0].scrollTop=0))},a.prototype.render=function(b){return b(f.a,{key:"overlay-focus-trap"},b("div",{classes:{"mod__overlay-container":!0,"mod__overlay-container--adjustable":this.props.adjustable,"mod__overlay-container--closing":this.props.closing,
"mod__overlay-container--no-scroll":!1===this.props.scrollable,"mod__overlay-container--slide-left":"left"===this.props.slide,"mod__overlay-container--slide-right":"right"===this.props.slide,"mod__overlay-container--size-small":"small"===this.props.size||"large"===this.props.size,"mod__overlay-container--size-large":"large"===this.props.size,"mod__overlay-container--flex":this.props.flex},key:this.props.key},this.props.children))},a}(G.Component);w["default"]=v}})})},"arcgis-components/Dropdowns/TextOptionDropdown":function(){define(["../Component",
"../Dropdowns/BasicDropdown"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&
c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=840)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=
n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&
(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}
function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};
case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,
sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,
k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=K},367:function(w,v){w.exports=G},840:function(w,
v,r){r.r(v);var f=r(0);w=r(16);var c=r(367),a=r.n(c);r=function(b){function p(q){q=b.call(this,q)||this;return q.state={optionElements:[],numOptions:-1,active:!1},q.navId=q.props.key+"-option-dropdown",q.handleOptionBlur=q.handleOptionBlur.bind(q),q.handleOptionClick=q.handleOptionClick.bind(q),q.mapOptionsToButtons=q.mapOptionsToButtons.bind(q),q.registerOptionElement=q.registerOptionElement.bind(q),q.handleOptionKeyDown=q.handleOptionKeyDown.bind(q),q.handleButtonKeyDown=q.handleButtonKeyDown.bind(q),
q}return Object(f.d)(p,b),p.prototype.render=function(q){var t=this,m={"drp-text-option__menu--left":!this.props.justify||"left"===this.props.justify,"drp-text-option__menu--right":"right"===this.props.justify};if(this.props.children&&this.props.children[0])return q(a.a,{key:this.props.key+"-dropdown-base",handleButtonKeyDown:this.handleButtonKeyDown,active:this.state.active,onToggle:function(){t.setState({active:!t.state.active})}},this.props.children[0],q("nav",{id:this.navId,"class":"drp-text-option__menu",
classes:m,style:"\n                        background-color: white;\n                        z-index: 9999999;\n                        margin: 0px;\n                        display: block;\n                        pointer-events: all;\n                        box-shadow: 0 0 16px 0 rgba(0,0,0,0.2);\n                        border: 0;\n                    ",role:"listbox","aria-activedescendant":this.props.selectedOptionValue+"-option"},this.mapOptionsToButtons(q)))},p.prototype.mapOptionsToButtons=
function(q){var t=this;return this.props.options.map(function(m,n){return q("button",{id:m.value+"-option",classes:{"drp-text-option__link":!0,"drp-text-option__link--active":m.value===t.props.selectedOptionValue},key:m.value,onclick:t.handleOptionClick,onkeydown:t.handleOptionKeyDown,value:m.value,dataIndex:n,afterCreate:t.registerOptionElement,role:"option","aria-selected":""+(m.value===t.props.selectedOptionValue),onblur:t.handleOptionBlur},m.text)})},p.prototype.handleOptionBlur=function(q){var t;
(null===(t=document.querySelector("#"+this.navId))||void 0===t?0:t.contains(q.relatedTarget))||this.setState({active:!1})},p.prototype.handleOptionClick=function(q){this.setState({active:!1});this.props.onSelect(q.target.value)},p.prototype.registerOptionElement=function(q){var t;this.setState({optionElements:Object(f.a)(Object(f.a)({},this.state.optionElements),(t={},t[q.dataIndex]=q,t)),numOptions:this.state.numOptions+1})},p.prototype.handleButtonKeyDown=function(q){q.keyCode&&40===q.keyCode&&
this.state.optionElements[0]&&this.state.optionElements[0].focus()},p.prototype.handleOptionKeyDown=function(q){var t=q.target.dataIndex;switch(q.keyCode){case 40:this.state.optionElements[t+1]?this.state.optionElements[t+1].focus():this.state.optionElements[0]&&this.state.optionElements[0].focus();break;case 38:this.state.optionElements[t-1]?this.state.optionElements[t-1].focus():this.state.optionElements[this.state.numOptions]&&this.state.optionElements[this.state.numOptions].focus()}},p}(w.Component);
v["default"]=r}})})},"arcgis-components/Dropdowns/BasicDropdown":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,
"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=
837)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>
n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}
function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=
y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?
y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});
v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=
K},837:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(a){a=f.call(this,a)||this;return a.state={active:!1},a.handleBtnClick=a.handleBtnClick.bind(a),a.handleDropdownClick=a.handleDropdownClick.bind(a),a.handleButtonKeyDown=a.handleButtonKeyDown.bind(a),a.registerCloseHandler=a.registerCloseHandler.bind(a),a.close=a.close.bind(a),a}return Object(r.d)(c,f),c.prototype.render=function(a){var b=void 0===this.props.active?this.state.active:this.props.active;if(this.props.children&&this.props.children[0]&&
this.props.children[1]){var p=this.props.children[0],q=b?this.props.children[1]:null;b=b?a("div",{key:"open-dropdown-hook",id:this.props.key+"-hook",afterCreate:this.registerCloseHandler,style:"display: none;"}):null;return a("div",{"class":"drp-basic__container",onclick:this.handleDropdownClick},b,a("span",{id:this.props.key,"class":"drp-basic__button",onclick:this.handleBtnClick,onkeydown:this.handleButtonKeyDown,role:"button",tabindex:this.props.tabindex?this.props.tabindex:"0"},p),q)}},c.prototype.componentWillReceiveProps=
function(a){!0===this.props.active&&!1===a.active&&document.body.removeEventListener("click",this.close)},c.prototype.close=function(){void 0===this.props.active?this.setState({active:!1}):this.props.onToggle&&this.props.onToggle();document.body.removeEventListener("click",this.close)},c.prototype.handleBtnClick=function(a){a.stopPropagation();void 0===this.props.active?this.setState({active:!this.state.active}):this.props.onToggle?this.props.onToggle():this.setState({active:!this.state.active})},
c.prototype.handleDropdownClick=function(a){a.stopPropagation();this.setState({active:!this.state.active})},c.prototype.handleButtonKeyDown=function(a){13===a.keyCode||32===a.keyCode?(a.preventDefault(),this.handleBtnClick(a)):this.props.handleButtonKeyDown&&this.props.handleButtonKeyDown(a)},c.prototype.registerCloseHandler=function(){document.body.addEventListener("click",this.close)},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/Navigation/TabNav":function(){define(["../Component",
"../Buttons/SvgButton","../Dropdowns/TextOptionDropdown"],function(K,G,w){return function(v){function r(c){if(f[c])return f[c].exports;var a=f[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var f={};return r.m=v,r.c=f,r.d=function(c,a,b){r.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:b})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},
r.t=function(c,a){if((1&a&&(c=r(c)),8&a)||4&a&&"object"==typeof c&&c&&c.__esModule)return c;var b=Object.create(null);if(r.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var p in c)r.d(b,p,function(q){return c[q]}.bind(null,p));return b},r.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};return r.d(a,"a",a),a},r.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},r.p="",r(r.s=876)}({0:function(v,r,f){function c(k,
l){function h(){this.constructor=k}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(k,l);k.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)}function a(k,l){var h={},e;for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&0>l.indexOf(e)&&(h[e]=k[e]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(e=Object.getOwnPropertySymbols(k);d<e.length;d++)0>l.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(k,
e[d])&&(h[e[d]]=k[e[d]])}return h}function b(k,l,h,e){var d,g=arguments.length,u=3>g?l:null===e?e=Object.getOwnPropertyDescriptor(l,h):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(k,l,h,e);else for(var x=k.length-1;0<=x;x--)(d=k[x])&&(u=(3>g?d(u):3<g?d(l,h,u):d(l,h))||u);return 3<g&&u&&Object.defineProperty(l,h,u),u}function p(k,l,h,e){return new (h||(h=Promise))(function(d,g){function u(B){try{y(e.next(B))}catch(C){g(C)}}function x(B){try{y(e["throw"](B))}catch(C){g(C)}}
function y(B){var C;B.done?d(B.value):(C=B.value,C instanceof h?C:new h(function(z){z(C)})).then(u,x)}y((e=e.apply(k,l||[])).next())})}function q(k,l){function h(y){return function(B){return function(C){if(e)throw new TypeError("Generator is already executing.");for(;x;)try{if(e=1,d&&(g=2&C[0]?d["return"]:C[0]?d["throw"]||((g=d["return"])&&g.call(d),0):d.next)&&!(g=g.call(d,C[1])).done)return g;switch(d=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return x.label++,{value:C[1],done:!1};
case 5:x.label++;d=C[1];C=[0];continue;case 7:C=x.ops.pop();x.trys.pop();continue;default:if(!(g=x.trys,(g=0<g.length&&g[g.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!g||C[1]>g[0]&&C[1]<g[3]))x.label=C[1];else if(6===C[0]&&x.label<g[1])x.label=g[1],g=C;else if(g&&x.label<g[2])x.label=g[2],x.ops.push(C);else{g[2]&&x.ops.pop();x.trys.pop();continue}}C=l.call(k,x)}catch(z){C=[6,z],d=0}finally{e=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,B])}}var e,d,g,u,x={label:0,
sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return u={next:h(0),"throw":h(1),"return":h(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function t(k,l){for(var h=0,e=l.length,d=k.length;h<e;h++,d++)k[d]=l[h];return k}f.d(r,"d",function(){return c});f.d(r,"a",function(){return n});f.d(r,"f",function(){return a});f.d(r,"c",function(){return b});f.d(r,"b",function(){return p});f.d(r,"e",function(){return q});f.d(r,"g",function(){return t});var m=function(k,
l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(h[d]=e[d])})(k,l)},n=function(){return(n=Object.assign||function(k){for(var l,h=1,e=arguments.length;h<e;h++)for(var d in l=arguments[h])Object.prototype.hasOwnProperty.call(l,d)&&(k[d]=l[d]);return k}).apply(this,arguments)};Object.create;Object.create},16:function(v,r){v.exports=K},206:function(v,r){v.exports=G},310:function(v,
r){v.exports=w},876:function(v,r,f){f.r(r);f.d(r,"slugifySectionName",function(){return q});var c=f(0);v=f(16);var a=f(310),b=f.n(a);a=f(206);var p=f.n(a),q=function(t){return"nav-tabnav-"+t.replace(" ","-").toLowerCase()};f=function(t){function m(n){n=t.call(this,n)||this;return n.optionElements=[],n.handleBtnClick=n.handleBtnClick.bind(n),n.handleMobileClick=n.handleMobileClick.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n}return Object(c.d)(m,t),m.prototype.render=function(n){var k=this;if(!(1>=
this.props.options.length)){var l=this.props.options.map(function(e,d){var g=e.value,u=e.text,x=k.props.selectedOptionValue===g;return n("button",{key:g,classes:{"nav-tabnav__btn":!0,"nav-tabnav__btn--active":x},value:g,onclick:k.handleBtnClick,id:q(g),"aria-selected":x.toString(),role:"tab",afterCreate:function(y){y&&(k.optionElements[d]=y)}},u)}),h=this.props.options.filter(function(e){return e.value===k.props.selectedOptionValue})[0].text;return n("nav",{"class":"nav-tabnav__nav",role:"tablist",
"aria-labelledby":"ib__big-header-title",onkeydown:this.handleKeyDown},this.props.dropdownOnly?"":l,n("div",{classes:{"nav-tabnav__mobile-menu":!0,"nav-tabnav__mobile-menu--always-available":this.props.dropdownOnly}},n(b.a,{key:"ib-ex__section-dropdown",options:this.props.options,onSelect:this.handleMobileClick,selectedOptionValue:this.props.selectedOptionValue},n("h3",{key:"search-"+h+"-dropdown",id:"section-dropdown-toggle","class":"nav-tabnav__section-dropdown-title"},n("span",{"class":"nav-tabnav__section-dropdown-text"},
h),n("span",{"class":"btn-svg__button-noevent"},n(p.a,{key:"section-dropdown-button"},n("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 16 16",fill:"#323232"},n("path",{d:"M8 11.207l-4-4V5.793l4 4 4-4v1.414z"}))))))))}},m.prototype.handleBtnClick=function(n){n.target.value!==this.props.selectedOptionValue&&this.props.onSelect(n.target.value)},m.prototype.handleKeyDown=function(n){n=n.keyCode;var k=this.optionElements,l=k.indexOf(document.activeElement);if((39===n||37===n)&&0<=l){var h=k[l+1]||
k[0];k=k[l-1]||k[k.length-1];(n=39===n?h:k)&&n.focus()}},m.prototype.handleMobileClick=function(n){n!==this.props.selectedOptionValue&&this.props.onSelect(n)},m}(v.Component);r["default"]=f}})})},"arcgis-components/Filters/CategoriesFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle"],function(K,G,w){return function(v){function r(c){if(f[c])return f[c].exports;var a=f[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,r),
a.l=!0,a.exports}var f={};return r.m=v,r.c=f,r.d=function(c,a,b){r.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:b})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,a){if((1&a&&(c=r(c)),8&a)||4&a&&"object"==typeof c&&c&&c.__esModule)return c;var b=Object.create(null);if(r.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:c}),2&a&&"string"!=
typeof c)for(var p in c)r.d(b,p,function(q){return c[q]}.bind(null,p));return b},r.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};return r.d(a,"a",a),a},r.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},r.p="",r(r.s=841)}({0:function(v,r,f){function c(k,l){function h(){this.constructor=k}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(k,l);k.prototype=null===l?Object.create(l):
(h.prototype=l.prototype,new h)}function a(k,l){var h={},e;for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&0>l.indexOf(e)&&(h[e]=k[e]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(e=Object.getOwnPropertySymbols(k);d<e.length;d++)0>l.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(k,e[d])&&(h[e[d]]=k[e[d]])}return h}function b(k,l,h,e){var d,g=arguments.length,u=3>g?l:null===e?e=Object.getOwnPropertyDescriptor(l,h):e;if("object"==typeof Reflect&&"function"==
typeof Reflect.decorate)u=Reflect.decorate(k,l,h,e);else for(var x=k.length-1;0<=x;x--)(d=k[x])&&(u=(3>g?d(u):3<g?d(l,h,u):d(l,h))||u);return 3<g&&u&&Object.defineProperty(l,h,u),u}function p(k,l,h,e){return new (h||(h=Promise))(function(d,g){function u(B){try{y(e.next(B))}catch(C){g(C)}}function x(B){try{y(e["throw"](B))}catch(C){g(C)}}function y(B){var C;B.done?d(B.value):(C=B.value,C instanceof h?C:new h(function(z){z(C)})).then(u,x)}y((e=e.apply(k,l||[])).next())})}function q(k,l){function h(y){return function(B){return function(C){if(e)throw new TypeError("Generator is already executing.");
for(;x;)try{if(e=1,d&&(g=2&C[0]?d["return"]:C[0]?d["throw"]||((g=d["return"])&&g.call(d),0):d.next)&&!(g=g.call(d,C[1])).done)return g;switch(d=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++;d=C[1];C=[0];continue;case 7:C=x.ops.pop();x.trys.pop();continue;default:if(!(g=x.trys,(g=0<g.length&&g[g.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!g||C[1]>g[0]&&C[1]<g[3]))x.label=C[1];else if(6===C[0]&&x.label<g[1])x.label=
g[1],g=C;else if(g&&x.label<g[2])x.label=g[2],x.ops.push(C);else{g[2]&&x.ops.pop();x.trys.pop();continue}}C=l.call(k,x)}catch(z){C=[6,z],d=0}finally{e=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,B])}}var e,d,g,u,x={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return u={next:h(0),"throw":h(1),"return":h(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function t(k,l){for(var h=0,e=l.length,d=k.length;h<e;h++,d++)k[d]=
l[h];return k}f.d(r,"d",function(){return c});f.d(r,"a",function(){return n});f.d(r,"f",function(){return a});f.d(r,"c",function(){return b});f.d(r,"b",function(){return p});f.d(r,"e",function(){return q});f.d(r,"g",function(){return t});var m=function(k,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(h[d]=e[d])})(k,l)},n=function(){return(n=Object.assign||function(k){for(var l,
h=1,e=arguments.length;h<e;h++)for(var d in l=arguments[h])Object.prototype.hasOwnProperty.call(l,d)&&(k[d]=l[d]);return k}).apply(this,arguments)};Object.create;Object.create},131:function(v,r){v.exports=G},165:function(v,r){v.exports=w},18:function(v,r){v.exports=K},841:function(v,r,f){f.r(r);var c=f(0);v=f(18);var a=f(131),b=f.n(a);a=f(165);var p=f.n(a);f=function(q){function t(m){m=q.call(this,m)||this;return m.mapCategoriesToToggles=m.mapCategoriesToToggles.bind(m),m.handleToggleClick=m.handleToggleClick.bind(m),
m.handleClearFilter=m.handleClearFilter.bind(m),m}return Object(c.d)(t,q),t.prototype.render=function(m){return m(b.a,{key:this.props.key,title:this.props.title,clearable:!!this.props.categoriesFilter,onClear:this.handleClearFilter,startActive:this.props.startActive},m("ul",{"aria-label":this.props.title,"class":"ftr-categories__tree",role:"tree"},this.mapCategoriesToToggles(m)))},t.prototype.mapCategoriesToToggles=function(m){var n=this;return this.props.availableCategories.map(function(k){return m(p.a,
{count:k.count,key:k.value,name:k.displayName,value:k.value,selectedToggle:n.props.categoriesFilter?n.props.categoriesFilter.value:void 0,childOptions:k.children,onToggleClick:n.handleToggleClick,useFullPathAsValue:!0,prependValue:n.props.prependValue,showTooltip:n.props.showTooltips,tooltip:k.tooltip})})},t.prototype.handleToggleClick=function(m,n){this.props.onCategorySelect({value:m,text:n})},t.prototype.handleClearFilter=function(){this.props.onClearCategories()},t}(v.Component);r["default"]=
f}})})},"arcgis-components/Navigation/Pager/index":function(){define(["../../Component","dojo/i18n!../../Navigation/Pager/nls/resources"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=875)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<
h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}
function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=
B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?
B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});
r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},18:function(w,v){w.exports=
K},343:function(w,v){w.exports=G},875:function(w,v,r){r.r(v);var f=r(0),c=r(343);w=function(a){function b(p){p=a.call(this,p)||this;return p.handleNext=p.handleNext.bind(p),p.handlePrevious=p.handlePrevious.bind(p),p.handlePageBtn=p.handlePageBtn.bind(p),p}return Object(f.d)(b,a),b.prototype.render=function(p){var q=this,t=this.props,m=t.numPages,n=t.currentPage;t=t.paginationLimitReached;var k=Array.apply(null,{length:m}).map(function(e,d){var g=n===d+1;return p("button",{classes:{"nav-pager__btn":!0,
"nav-pager__page-btn--active":g,"nav-pager__page-btn--inactive":!g},id:"page-"+(d+1)+"-button",title:c.page+" "+(d+1),onclick:function(){q.handlePageBtn(d+1)},role:"link",tabindex:"0",key:"page-"+(d+1)+"-button"},""+(d+1))}).reduce(function(e,d,g,u){return 0===g||g===m-1||g===n-1||g===n-2||g===n||1===g&&4===n||g===m-2&&n===m-3||4>=g&&5>n?e.push(d):(g===n-3||g===n+1||5===g&&5>n)&&e.push(p("span",{"class":"nav-pager__dots",key:"dots-"+g},"...")),e},[]),l={"nav-pager__btn":!0,"nav-pager__btn--disabled":1>=
n},h={"nav-pager__btn":!0,"nav-pager__btn--disabled":n>=m};return 1<m?p("nav",{"class":"nav-pager__container",key:"pager"},n===m&&t&&p("div",{"class":"nav-pager__limit-container",key:"pagination-limit-container"},p("div",{"class":"nav-pager__limit-inner"},p("p",{"class":"nav-pager__limit-text"},c.paginationLimit))),p("button",{classes:l,id:"previous",title:c.previous,role:"link",key:"previous-btn",onclick:this.handlePrevious,tabindex:1>=n?"-1":"0"},c.previous),p("div",{"class":"nav-pager__page-btn-container"},
k),p("button",{classes:h,id:"next",title:c.next,role:"link",key:"next-btn",onclick:this.handleNext,tabindex:n>=m?"-1":"0"},c.next)):p("span",null)},b.prototype.handleNext=function(){this.props.onPageChange(this.props.currentPage+1)},b.prototype.handlePrevious=function(){this.props.onPageChange(this.props.currentPage-1)},b.prototype.handlePageBtn=function(p){this.props.onPageChange(p)},b}(r(18).Component);v["default"]=w}})})},"arcgis-components/Modals/MobileWrap":function(){define(["../Component",
"../Buttons/SvgButton"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&
(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=873)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=
n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&
(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}
function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};
case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,
sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,
k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=K},206:function(w,v){w.exports=G},312:function(w,
v,r){function f(b){return a[b.vnodeSelector]&&(!b.properties||!b.properties.disabled&&-1!==b.properties.tabindex)||b.properties&&b.properties.tabindex&&-1<parseInt(b.properties.tabindex,10)}var c=r(0),a={a:!0,area:!0,input:!0,select:!0,textarea:!0,button:!0,iframe:!0};w=function(b){function p(q){q=b.call(this,q)||this;return q.registerFirstFocusable=q.registerFirstFocusable.bind(q),q.registerLastFocusable=q.registerLastFocusable.bind(q),q.handleFocusChange=q.handleFocusChange.bind(q),q}return Object(c.d)(p,
b),p.prototype.render=function(){var q=this.findFirstFocusable(this.props.children),t=this.findLastFocusable(this.props.children);return q&&t&&(q.properties?q.properties.afterCreate=this.registerFirstFocusable:q.properties={afterCreate:this.registerFirstFocusable},t.properties?t.properties.afterCreate=this.registerLastFocusable:t.properties={afterCreate:this.registerLastFocusable}),this.props.children},p.prototype.findFirstFocusable=function(q){if(q)for(var t=0;t<q.length;t++){var m=q[t];if(f(m)||
m.children&&(m=this.findFirstFocusable(m.children)))return m}},p.prototype.findLastFocusable=function(q){if(q)for(var t=q.length-1;0<=t;t--){var m=q[t];if(f(m)||m.children&&(m=this.findLastFocusable(m.children)))return m}},p.prototype.registerFirstFocusable=function(q){this.firstFocusableElement&&this.firstFocusableElement!==q&&this.firstFocusableElement.removeEventListener("keydown",this.handleFocusChange);q.addEventListener("keydown",this.handleFocusChange);this.firstFocusableElement=q;setTimeout(function(){q&&
q.focus()},10)},p.prototype.registerLastFocusable=function(q){this.lastFocusableElement&&this.lastFocusableElement!==q&&this.lastFocusableElement.removeEventListener("keydown",this.handleFocusChange);this.lastFocusableElement=q;this.lastFocusableElement.addEventListener("keydown",this.handleFocusChange)},p.prototype.handleFocusChange=function(q){"Tab"!==q.key&&9!==q.keyCode||(q.shiftKey?document.activeElement===this.firstFocusableElement&&this.lastFocusableElement&&(this.lastFocusableElement.focus(),
q.preventDefault()):document.activeElement===this.lastFocusableElement&&this.firstFocusableElement&&(this.firstFocusableElement.focus(),q.preventDefault()))},p}(r(16).Component);v.a=w},873:function(w,v,r){r.r(v);var f=r(0);w=r(16);var c=r(206),a=r.n(c),b=r(312);r=function(p){function q(t){t=p.call(this,t)||this;return t.state={closing:!1,open:t.props.open},t.handleClose=t.handleClose.bind(t),t}return Object(f.d)(q,p),q.prototype.componentWillReceiveProps=function(t){var m=this;this.props.open===t.open||
this.state.closing||(t.open?(this.setState({open:t.open}),setTimeout(function(){var n=document.getElementById(m.props.key+"close");n&&n.focus()},100)):(this.setState({closing:!0}),setTimeout(function(){m.setState({open:!1,closing:!1})},200)))},q.prototype.render=function(t){return t(b.a,{key:"mobile-wrap-focus-trap"},t("div",{classes:{"mod__mob-wrap-container":!0,"mod__mob-wrap-container--closed":!this.state.open,"mod__mob-wrap-container--closing":this.state.closing},key:this.props.key},t("div",{classes:{"mod__mob-wrap-body":!0,
"mod__mob-wrap-body--max-height":this.props.maxHeight,"mod__mob-wrap-body--closing":this.state.closing}},t("div",{"class":"mod__mob-wrap-header"},t("span",{"class":"mod__mob-wrap-title"},this.props.title),t(a.a,{key:this.props.key+"close",focusable:!0,handleClick:this.handleClose},t("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",viewBox:"0 0 24 24",width:"24",height:"24"},t("path",{fill:"currentColor",d:"M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z"})))),
t("div",{"class":"mod__mob-wrap-content"},this.props.children),this.props.footer?t("div",{"class":"mod__mob-wrap-footer"},this.props.footer):null)))},q.prototype.handleClose=function(){this.props.onClose&&this.props.onClose()},q}(w.Component);v["default"]=r}})})},"arcgis-components/Dropdowns/SortDropdown/index":function(){define("../../Component ../../Buttons/Toggle ../../Dropdowns/Ago2018Dropdown dojo/i18n!../../Dropdowns/SortDropdown/nls/resources ../../Buttons/IconButton ../../Modals/MobileWrap".split(" "),
function(K,G,w,v,r,f){return function(c){function a(p){if(b[p])return b[p].exports;var q=b[p]={i:p,l:!1,exports:{}};return c[p].call(q.exports,q,q.exports,a),q.l=!0,q.exports}var b={};return a.m=c,a.c=b,a.d=function(p,q,t){a.o(p,q)||Object.defineProperty(p,q,{enumerable:!0,get:t})},a.r=function(p){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"});Object.defineProperty(p,"__esModule",{value:!0})},a.t=function(p,q){if((1&q&&(p=a(p)),8&q)||4&
q&&"object"==typeof p&&p&&p.__esModule)return p;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:p}),2&q&&"string"!=typeof p)for(var m in p)a.d(t,m,function(n){return p[n]}.bind(null,m));return t},a.n=function(p){var q=p&&p.__esModule?function(){return p["default"]}:function(){return p};return a.d(q,"a",q),q},a.o=function(p,q){return Object.prototype.hasOwnProperty.call(p,q)},a.p="",a(a.s=839)}({0:function(c,a,b){function p(e,d){function g(){this.constructor=
e}if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(e,d);e.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}function q(e,d){var g={},u;for(u in e)Object.prototype.hasOwnProperty.call(e,u)&&0>d.indexOf(u)&&(g[u]=e[u]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(u=Object.getOwnPropertySymbols(e);x<u.length;x++)0>d.indexOf(u[x])&&Object.prototype.propertyIsEnumerable.call(e,u[x])&&
(g[u[x]]=e[u[x]])}return g}function t(e,d,g,u){var x,y=arguments.length,B=3>y?d:null===u?u=Object.getOwnPropertyDescriptor(d,g):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(e,d,g,u);else for(var C=e.length-1;0<=C;C--)(x=e[C])&&(B=(3>y?x(B):3<y?x(d,g,B):x(d,g))||B);return 3<y&&B&&Object.defineProperty(d,g,B),B}function m(e,d,g,u){return new (g||(g=Promise))(function(x,y){function B(D){try{z(u.next(D))}catch(E){y(E)}}function C(D){try{z(u["throw"](D))}catch(E){y(E)}}
function z(D){var E;D.done?x(D.value):(E=D.value,E instanceof g?E:new g(function(A){A(E)})).then(B,C)}z((u=u.apply(e,d||[])).next())})}function n(e,d){function g(z){return function(D){return function(E){if(u)throw new TypeError("Generator is already executing.");for(;C;)try{if(u=1,x&&(y=2&E[0]?x["return"]:E[0]?x["throw"]||((y=x["return"])&&y.call(x),0):x.next)&&!(y=y.call(x,E[1])).done)return y;switch(x=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return C.label++,{value:E[1],done:!1};
case 5:C.label++;x=E[1];E=[0];continue;case 7:E=C.ops.pop();C.trys.pop();continue;default:if(!(y=C.trys,(y=0<y.length&&y[y.length-1])||6!==E[0]&&2!==E[0])){C=0;continue}if(3===E[0]&&(!y||E[1]>y[0]&&E[1]<y[3]))C.label=E[1];else if(6===E[0]&&C.label<y[1])C.label=y[1],y=E;else if(y&&C.label<y[2])C.label=y[2],C.ops.push(E);else{y[2]&&C.ops.pop();C.trys.pop();continue}}E=d.call(e,C)}catch(A){E=[6,A],x=0}finally{u=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([z,D])}}var u,x,y,B,C={label:0,
sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return B={next:g(0),"throw":g(1),"return":g(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B}function k(e,d){for(var g=0,u=d.length,x=e.length;g<u;g++,x++)e[x]=d[g];return e}b.d(a,"d",function(){return p});b.d(a,"a",function(){return h});b.d(a,"f",function(){return q});b.d(a,"c",function(){return t});b.d(a,"b",function(){return m});b.d(a,"e",function(){return n});b.d(a,"g",function(){return k});var l=function(e,
d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,u){g.__proto__=u}||function(g,u){for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&(g[x]=u[x])})(e,d)},h=function(){return(h=Object.assign||function(e){for(var d,g=1,u=arguments.length;g<u;g++)for(var x in d=arguments[g])Object.prototype.hasOwnProperty.call(d,x)&&(e[x]=d[x]);return e}).apply(this,arguments)};Object.create;Object.create},165:function(c,a){c.exports=G},18:function(c,a){c.exports=K},273:function(c,
a){c.exports=w},299:function(c,a){c.exports=v},348:function(c,a){c.exports=r},368:function(c,a){c.exports=f},839:function(c,a,b){b.r(a);var p=b(0),q=b(299);c=b(18);var t=b(348),m=b.n(t);t=b(165);var n=b.n(t);t=b(273);var k=b.n(t);t=b(368);var l=b.n(t);b=function(h){function e(d){var g=h.call(this,d)||this;return g.handleToggleBlur=function(u){var x,y,B;(null===(x=document.querySelector("#dropdown-sort-menu-container"))||void 0===x?0:x.contains(u.relatedTarget))||null===(B=(y=g.props).handleMenuBlur)||
void 0===B||B.call(y)},g.handleSortClick=g.handleSortClick.bind(g),g.handleFieldChange=g.handleFieldChange.bind(g),g.handleOrderChange=g.handleOrderChange.bind(g),g.handleMobileWrapClose=g.handleMobileWrapClose.bind(g),g}return Object(p.d)(e,h),e.prototype.render=function(d){var g=this,u=[d("div",{"class":"drp-sort__menu-section",role:"tree"},d("h3",{"class":"drp-sort__menu-title"},q.sortBy),this.props.availableFields.map(function(x){return d(n.a,{key:x,name:q[x],value:x,onToggleClick:g.handleFieldChange,
selectedToggle:g.props.field,handleBlur:g.handleToggleBlur})})),"relevance"!==this.props.field?d("div",{key:this.props.field,"class":"drp-sort__menu-section",role:"tree"},d("h3",{"class":"drp-sort__menu-title drp-sort__menu-direction"},q.sortDir),d(n.a,{key:"ascending-toggle",name:q.ascending[this.props.field],value:"asc",onToggleClick:this.handleOrderChange,selectedToggle:this.props.order,handleBlur:this.handleToggleBlur}),d(n.a,{key:"descending-toggle",name:q.descending[this.props.field],value:"desc",
onToggleClick:this.handleOrderChange,selectedToggle:this.props.order,handleBlur:this.handleToggleBlur})):null];return window.matchMedia("(max-width: 860px)").matches?[d(m.a,{key:"gb-sort-btn-mobile",active:this.props.active,handleClick:this.handleSortClick},d("div",{"class":"drp-sort__btn-body"},d("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},d("g",{stroke:"none","stroke-width":"1"},d("g",null,d("path",{d:"M1,1 L15,1 L15,2 L1,2 L1,1 Z M4,5 L15,5 L15,6 L4,6 L4,5 Z M7,9 L15,9 L15,10 L7,10 L7,9 Z M11,13 L15,13 L15,14 L11,14 L11,13 Z"})))),
d("span",{"class":"drp-sort__btn-label"},q[this.props.field]))),d(l.a,{key:"sort-mobile-wrap",title:q.sort,open:this.props.active,onClose:this.handleMobileWrapClose},u)]:d(k.a,{key:"sort-dropdown",active:this.props.active,onToggle:this.handleSortClick},d(m.a,{key:"gb-sort-btn",active:this.props.active,handleClick:this.stub,tabindex:-1},d("div",{"class":"drp-sort__btn-body"},d("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},d("g",{stroke:"none","stroke-width":"1"},d("g",null,d("path",
{d:"M1,1 L15,1 L15,2 L1,2 L1,1 Z M4,5 L15,5 L15,6 L4,6 L4,5 Z M7,9 L15,9 L15,10 L7,10 L7,9 Z M11,13 L15,13 L15,14 L11,14 L11,13 Z"})))),d("span",{"class":"drp-sort__btn-label"},q[this.props.field]))),d("div",{"class":"drp-sort__menu-container",id:"dropdown-sort-menu-container"},u))},e.prototype.stub=function(){},e.prototype.handleSortClick=function(){var d,g;null===(g=null===(d=this.props)||void 0===d?void 0:d.onClick)||void 0===g||g.call(d)},e.prototype.handleFieldChange=function(d){var g,u;d===
this.props.field||null!==(u=null===(g=this.props)||void 0===g?void 0:g.onFieldChange)&&void 0!==u&&u.call(g,d)},e.prototype.handleOrderChange=function(d){var g,u;d===this.props.order||null!==(u=null===(g=this.props)||void 0===g?void 0:g.onOrderChange)&&void 0!==u&&u.call(g,d)},e.prototype.handleMobileWrapClose=function(){var d,g;null===(g=null===(d=this.props)||void 0===d?void 0:d.onClick)||void 0===g||g.call(d)},e}(c.Component);a["default"]=b}})})},"arcgis-components/Dropdowns/Ago2018Dropdown":function(){define(["../Component",
"../Dropdowns/BasicDropdown"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&
c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=836)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=
n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&
(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}
function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};
case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,
sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,
k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=K},367:function(w,v){w.exports=G},836:function(w,
v,r){r.r(v);var f=r(0);w=r(16);var c=r(367),a=r.n(c);r=function(b){function p(q){q=b.call(this,q)||this;return q.state={active:!!q.props.active&&q.props.active,closing:!1},q.handleDrpClick=q.handleDrpClick.bind(q),q}return Object(f.d)(p,b),p.prototype.render=function(q){var t={"drp-ago2018__menu":!0,"drp-ago2018__menu--active":this.state.active&&!this.state.closing};if(this.props.children&&this.props.children[0]&&this.props.children[1])return q(a.a,{key:this.props.key,active:this.state.active,onToggle:this.handleDrpClick,
tabindex:this.props.tabindex},this.props.children[0],q("div",{classes:t},this.props.children[1]))},p.prototype.componentWillReceiveProps=function(q){!1===q.active&&!0===this.props.active&&this.close()},p.prototype.close=function(q){var t=this;this.setState({closing:!0});setTimeout(function(){t.setState({active:!1,closing:!1});t.props.onToggle&&q&&t.props.onToggle()},200)},p.prototype.handleDrpClick=function(){this.state.active?this.close(!0):this.state.closing||(this.setState({active:!0}),this.props.onToggle&&
this.props.onToggle())},p}(w.Component);v["default"]=r}})})},"arcgis-components/Filters/CreatedFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../DateSelection/DateRangeSelector/index","dojo/i18n!../../Filters/CreatedFilter/nls/resources"],function(K,G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,b,b.exports,f),b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=function(a,
b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,
q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=843)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=l}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");n(l,h);l.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}function b(l,h){var e=
{},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&(e[d[g]]=l[d[g]])}return e}function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);
else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}function B(C){var z;C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,y)}B((d=d.apply(l,h||[])).next())})}function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");
for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};case 5:y.label++;g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=y.trys,(u=0<u.length&&u[u.length-1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=
u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=
h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,
e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},18:function(r,f){r.exports=K},370:function(r,f){r.exports=w},446:function(r,f){r.exports=v},843:function(r,f,c){c.r(f);var a=c(0),b=c(446);r=c(18);var p=c(131),q=c.n(p);p=c(370);var t=c.n(p);c=function(m){function n(k){k=m.call(this,k)||this;return k.handleDateRangeSelect=k.handleDateRangeSelect.bind(k),
k.handleClearFilter=k.handleClearFilter.bind(k),k}return Object(a.d)(n,m),n.prototype.render=function(k){return k(q.a,{key:"created-filter-accordion",title:b.dateCreated,clearable:!!this.props.dateCreatedFilter,onClear:this.handleClearFilter},k("ul",{"aria-label":b.dateCreated,"class":"ftr-created__tree",role:"tree"},k(t.a,{key:"date-range-selector",selectedOption:this.props.dateCreatedSection,range:this.props.dateCreatedFilter,onDateRangeSelect:this.handleDateRangeSelect,preventFutureDate:!0})))},
n.prototype.handleDateRangeSelect=function(k,l){this.props.onDateCreatedSelect(k,l)},n.prototype.handleClearFilter=function(){this.props.onDateCreatedSelect()},n}(r.Component);f["default"]=c}})})},"arcgis-components/DateSelection/DateRangeSelector/index":function(){define(["../../Component","dojo/date/locale","../../Buttons/Toggle","dojo/i18n!../../DateSelection/DateRangeSelector/nls/resources","../../DateSelection/DatePicker"],function(K,G,w,v,r){return function(f){function c(b){if(a[b])return a[b].exports;
var p=a[b]={i:b,l:!1,exports:{}};return f[b].call(p.exports,p,p.exports,c),p.l=!0,p.exports}var a={};return c.m=f,c.c=a,c.d=function(b,p,q){c.o(b,p)||Object.defineProperty(b,p,{enumerable:!0,get:q})},c.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},c.t=function(b,p){if((1&p&&(b=c(b)),8&p)||4&p&&"object"==typeof b&&b&&b.__esModule)return b;var q=Object.create(null);if(c.r(q),
Object.defineProperty(q,"default",{enumerable:!0,value:b}),2&p&&"string"!=typeof b)for(var t in b)c.d(q,t,function(m){return b[m]}.bind(null,t));return q},c.n=function(b){var p=b&&b.__esModule?function(){return b["default"]}:function(){return b};return c.d(p,"a",p),p},c.o=function(b,p){return Object.prototype.hasOwnProperty.call(b,p)},c.p="",c(c.s=833)}({0:function(f,c,a){function b(h,e){function d(){this.constructor=h}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+
" is not a constructor or null");k(h,e);h.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}function p(h,e){var d={},g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&0>e.indexOf(g)&&(d[g]=h[g]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(g=Object.getOwnPropertySymbols(h);u<g.length;u++)0>e.indexOf(g[u])&&Object.prototype.propertyIsEnumerable.call(h,g[u])&&(d[g[u]]=h[g[u]])}return d}function q(h,e,d,g){var u,x=arguments.length,y=3>x?e:null===g?
g=Object.getOwnPropertyDescriptor(e,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(h,e,d,g);else for(var B=h.length-1;0<=B;B--)(u=h[B])&&(y=(3>x?u(y):3<x?u(e,d,y):u(e,d))||y);return 3<x&&y&&Object.defineProperty(e,d,y),y}function t(h,e,d,g){return new (d||(d=Promise))(function(u,x){function y(z){try{C(g.next(z))}catch(D){x(D)}}function B(z){try{C(g["throw"](z))}catch(D){x(D)}}function C(z){var D;z.done?u(z.value):(D=z.value,D instanceof d?D:new d(function(E){E(D)})).then(y,
B)}C((g=g.apply(h,e||[])).next())})}function m(h,e){function d(C){return function(z){return function(D){if(g)throw new TypeError("Generator is already executing.");for(;B;)try{if(g=1,u&&(x=2&D[0]?u["return"]:D[0]?u["throw"]||((x=u["return"])&&x.call(u),0):u.next)&&!(x=x.call(u,D[1])).done)return x;switch(u=0,x&&(D=[2&D[0],x.value]),D[0]){case 0:case 1:x=D;break;case 4:return B.label++,{value:D[1],done:!1};case 5:B.label++;u=D[1];D=[0];continue;case 7:D=B.ops.pop();B.trys.pop();continue;default:if(!(x=
B.trys,(x=0<x.length&&x[x.length-1])||6!==D[0]&&2!==D[0])){B=0;continue}if(3===D[0]&&(!x||D[1]>x[0]&&D[1]<x[3]))B.label=D[1];else if(6===D[0]&&B.label<x[1])B.label=x[1],x=D;else if(x&&B.label<x[2])B.label=x[2],B.ops.push(D);else{x[2]&&B.ops.pop();B.trys.pop();continue}}D=e.call(h,B)}catch(E){D=[6,E],u=0}finally{g=x=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([C,z])}}var g,u,x,y,B={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return y={next:d(0),"throw":d(1),
"return":d(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function n(h,e){for(var d=0,g=e.length,u=h.length;d<g;d++,u++)h[u]=e[d];return h}a.d(c,"d",function(){return b});a.d(c,"a",function(){return l});a.d(c,"f",function(){return p});a.d(c,"c",function(){return q});a.d(c,"b",function(){return t});a.d(c,"e",function(){return m});a.d(c,"g",function(){return n});var k=function(h,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=
g}||function(d,g){for(var u in g)Object.prototype.hasOwnProperty.call(g,u)&&(d[u]=g[u])})(h,e)},l=function(){return(l=Object.assign||function(h){for(var e,d=1,g=arguments.length;d<g;d++)for(var u in e=arguments[d])Object.prototype.hasOwnProperty.call(e,u)&&(h[u]=e[u]);return h}).apply(this,arguments)};Object.create;Object.create},151:function(f,c){f.exports=G},165:function(f,c){f.exports=w},18:function(f,c){f.exports=K},225:function(f,c){f.exports=v},425:function(f,c,a){var b=a(0),p=a(225),q=a(151);
c.a=function(t,m){var n=new Date,k=n.getTime();n.setHours(0,0,0,0);n=n.getTime();switch(t){case "today":return{start:n,end:k,label:p.today};case "yesterday":return{start:n-864E5,end:n,label:p.yesterday};case "last7Days":return{start:k-6048E5,end:k,label:p.last7Days};case "last30Days":return{start:k-2592E6,end:k,label:p.last30Days};case "custom":if(m)return k=q.format(new Date(m.start),{selector:"date",formatLength:"short"}),n=q.format(new Date(m.end),{selector:"date",formatLength:"short"}),Object(b.a)(Object(b.a)({},
m),{label:k+"\u2014"+n})}}},442:function(f,c){f.exports=r},523:function(f,c,a){var b=a(0);f=a(18);var p=a(165),q=a.n(p);a=function(t){function m(n){return t.call(this,n)||this}return Object(b.d)(m,t),m.prototype.render=function(n){var k=this;return this.props.options.map(function(l){return n(q.a,{key:l.value,name:l.displayName,value:l.value,selectedToggle:k.props.selectedOption,childOptions:l.childOptions,onToggleClick:k.props.handleOptionClick})})},m}(f.Component);c.a=a},833:function(f,c,a){a.r(c);
var b=a(0),p=a(225);f=a(18);var q=a(442),t=a.n(q),m=a(523),n=a(425);a=function(k){function l(h){var e=k.call(this,h)||this;return e.state={uid:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),customStart:"custom"===h.selectedOption&&h.range?new Date(h.range.start):void 0,customEnd:"custom"===h.selectedOption&&h.range?new Date(h.range.end):void 0,customRange:"custom"===h.selectedOption&&h.range?h.range:void 0,options:[{value:"today",displayName:p.today},{value:"yesterday",displayName:p.yesterday},
{value:"last7Days",displayName:p.last7Days},{value:"last30Days",displayName:p.last30Days},{value:"custom",displayName:p.custom}]},e.handleFromDateChange=e.handleFromDateChange.bind(e),e.handleToDateChange=e.handleToDateChange.bind(e),e.handleOptionClick=e.handleOptionClick.bind(e),e}return Object(b.d)(l,k),l.prototype.render=function(h){var e,d={hide:"custom"!==this.props.selectedOption,"margin-left-1":!0,"margin-right-0":!0,date__selector:!0,"date__selector--hide":"custom"!==this.props.selectedOption},
g=new Date;if(this.props.preventFutureDate){var u=this.state.customEnd;(!u||u>g)&&(u=g);u={max:u}}else this.state.customEnd&&(u={max:this.state.customEnd});return(this.state.customStart||this.props.preventFutureDate)&&(e=Object(b.a)(Object(b.a)({},this.state.customStart&&{min:this.state.customStart}),this.props.preventFutureDate&&{max:g})),h("div",null,h(m.a,{key:"date-range-static-toggles",options:this.state.options,selectedOption:this.props.selectedOption,customRange:this.state.customRange,handleOptionClick:this.handleOptionClick}),
h("div",{classes:d},h("label",{"aria-label":p.from},p.from,h("div",{"class":"date-selector__pick-wrapper"},h(t.a,{key:"from-picker-"+this.state.uid,onDateChange:this.handleFromDateChange,value:this.state.customStart,constraints:u}))),h("label",{"aria-label":p.to},p.to,h("div",{"class":"date-selector__pick-wrapper"},h(t.a,{key:"to-picker-"+this.state.uid,onDateChange:this.handleToDateChange,value:this.state.customEnd,constraints:e})))))},l.prototype.handleFromDateChange=function(h){this.state.customEnd?
(this.setState({customStart:h,customRange:{start:h.getTime(),end:this.state.customEnd.getTime()+86399999}}),this.props.onDateRangeSelect("custom",Object(n.a)("custom",this.state.customRange))):this.setState({customStart:h})},l.prototype.handleToDateChange=function(h){this.state.customStart?(this.setState({customEnd:h,customRange:{start:this.state.customStart.getTime(),end:h.getTime()+86399999}}),this.props.onDateRangeSelect("custom",Object(n.a)("custom",this.state.customRange))):this.setState({customEnd:h})},
l.prototype.handleOptionClick=function(h){this.props.selectedOption===h?this.props.onDateRangeSelect():this.props.onDateRangeSelect(h,Object(n.a)(h,this.state.customRange))},l}(f.Component);c["default"]=a}})})},"arcgis-components/DateSelection/DatePicker":function(){define(["../Component","dijit/form/DateTextBox"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=
w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,
b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=834)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l=
{},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);
else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");
for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=
d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=
k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,
l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=K},524:function(w,v){w.exports=G},834:function(w,v,r){r.r(v);var f=r(0);w=r(16);var c=r(524),a=r.n(c);r=function(b){function p(q){q=b.call(this,q)||this;return q.processDijit=q.processDijit.bind(q),q.createDijit=q.createDijit.bind(q),q.handleDateChange=q.handleDateChange.bind(q),q}return Object(f.d)(p,
b),p.prototype.render=function(q){return q("div",{key:this.props.key,id:this.props.key,"class":"margin-right-1",afterCreate:this.processDijit})},p.prototype.componentWillReceiveProps=function(q){q.constraints!==this.props.constraints&&this.state.dijit&&this.state.dijit.textbox&&this.state.dijit.set("constraints",Object(f.a)({},q.constraints))},p.prototype.processDijit=function(q){this.state.dijit&&this.state.dijit.destroy();q=this.createDijit(q);q.on("change",this.handleDateChange);this.setState({dijit:q})},
p.prototype.createDijit=function(q){return new a.a({value:this.props.value,constraints:Object(f.a)({},this.props.constraints)},q)},p.prototype.handleDateChange=function(q){this.props.onDateChange(q)},p}(w.Component);v["default"]=r}})})},"arcgis-components/Badges/Retired":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,
c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,
b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=824)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},824:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){var p=a.isRetiredStoryMap?f.tooltips.retiredStoryMap:f.tooltips.retiredApp;return b(c.a,{backgroundColor:"#efe397",
textColor:"#786d1c",key:"retired-badge",size:a.size,text:f.retired,title:p,tooltip:a.tooltip?p:void 0,tooltipDirection:a.tooltipDirection},b("path",{fill:"#786d1c",d:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"}))}}})})},
"arcgis-components/Badges/Badge":function(){define(function(){return function(K){function G(v){if(w[v])return w[v].exports;var r=w[v]={i:v,l:!1,exports:{}};return K[v].call(r.exports,r,r.exports,G),r.l=!0,r.exports}var w={};return G.m=K,G.c=w,G.d=function(v,r,f){G.o(v,r)||Object.defineProperty(v,r,{enumerable:!0,get:f})},G.r=function(v){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"});Object.defineProperty(v,"__esModule",{value:!0})},G.t=
function(v,r){if((1&r&&(v=G(v)),8&r)||4&r&&"object"==typeof v&&v&&v.__esModule)return v;var f=Object.create(null);if(G.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:v}),2&r&&"string"!=typeof v)for(var c in v)G.d(f,c,function(a){return v[a]}.bind(null,c));return f},G.n=function(v){var r=v&&v.__esModule?function(){return v["default"]}:function(){return v};return G.d(r,"a",r),r},G.o=function(v,r){return Object.prototype.hasOwnProperty.call(v,r)},G.p="",G(G.s=813)}({813:function(K,G,w){w.r(G);
G["default"]=function(v,r){var f=v.key,c=v.size,a=v.text,b=v.title,p=v.tooltip,q=v.tooltipDirection,t=v.backgroundColor,m=v.textColor,n=v.children;q={"qual-badge__container":!0,"qual-badge__container--small":"small"===c,"qual-badge__container--tooltip":p,"qual-badge__container--tooltip-left":"left"===q,"qual-badge__container--tooltip-top":"top"===q,"qual-badge__container--tooltip-right":"right"===q,"tooltip-bottom":!q||"bottom"===q,"tooltip-left":"left"===q,"tooltip-top":"top"===q,"tooltip-right":"right"===
q};return"small"===c?r("span",{key:f+"-small",classes:q,"class":"qual-badge__container--small","aria-label":p,style:"background-color: "+t+"; color: "+m+";",title:p?void 0:b},n):r("span",{key:f+"-regular",classes:q,"class":"qual-badge__container--regular","aria-label":p,style:"background-color: "+t+"; color: "+m+";",title:b},r("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 16 16"},n),r("span",{"class":"qual-badge__text"},a))}}})})},"arcgis-components/Filters/MapAreaFilter":function(){define(["../Buttons/ToggleSwitch"],
function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==
typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=852)}({528:function(G,w){G.exports=K},852:function(G,w,v){v.r(w);G=v(528);var r=
v.n(G);w["default"]=function(f,c){return c(r.a,{key:"map-area-filter",label:f.text,handleToggleClick:f.handleMapAreaToggle,handleKeyUp:f.handleMapAreaKeyUp,value:f.searchMapArea})}}})})},"arcgis-components/Buttons/ToggleSwitch":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,
f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=
r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=832)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,
l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?
h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=
1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&
g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,
"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<
l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=K},832:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}return Object(r.d)(c,f),c.prototype.render=function(a){var b=this.props,p=b.handleToggleClick,q=b.handleKeyUp,t=b.value,m=b.id;return a("label",{"class":"btn-toggle-switch__toggle",key:m||"toggle-switch"},a("span",
{"class":"btn-toggle-switch__label"},b.label),a("input",{id:m+"-input",type:"checkbox","class":"btn-toggle-switch__input",onchange:p,onkeyup:q,checked:t}),a("span",{id:m+"-switch","class":"btn-toggle-switch__switch"}))},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/Filters/ItemTypeFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle","dojo/i18n!../../Filters/ItemTypeFilter/nls/resources"],function(K,G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;
var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,b,b.exports,f),b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=function(a,b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),
Object.defineProperty(p,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=846)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=l}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+
" is not a constructor or null");n(l,h);l.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}function b(l,h){var e={},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&(e[d[g]]=l[d[g]])}return e}function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?
d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}function B(C){var z;C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,
y)}B((d=d.apply(l,h||[])).next())})}function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};case 5:y.label++;g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=
y.trys,(u=0<u.length&&u[u.length-1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),
"return":e(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=
d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},165:function(r,f){r.exports=w},18:function(r,f){r.exports=K},180:function(r,f,c){function a(d,g){return n("children","value",d,g)}function b(d,
g){return k("children","value",d,g)}function p(d,g){return function z(x,y,B,C){var D,E=B[x];return E&&0!==E.length?Object(e.a)(Object(e.a)({},B),((D={})[x]=E.reduce(function(A,F){return-1!==C.indexOf(F[y])&&A.push(z(x,y,F,C)),A},[]),D)):Object(e.a)({},B)}("children","value",d,g)}function q(d){return function(g,u){var x,y=u[g];return y?Object(e.a)(Object(e.a)({},u),((x={})[g]=function z(C){return 0===C.length?[]:1!==C.length||C[0][g]?1<C.length?C.reduce(function(D,E){var A;return E[g]?(D.push(Object(e.a)(Object(e.a)({},
E),((A={})[g]=z(E[g]),A))),D):(D.push(E),D)},[]):z(C[0][g]):C}(y),x)):u}("children",d)}function t(d,g){return l("children",d,g)}function m(d,g){return function C(x,y,B){var z=y[x];z&&z.forEach(function(D){return C(x,D,B)});B(y)}("children",d,g)}function n(d,g,u,x){var y=u[d];return u[g]===x?u:y?y.reduce(function(B,C){return B||n(d,g,C,x)},void 0):void 0}function k(d,g,u,x){if(u=u[d])return u.reduce(function(y,B){return B[g]===x[0]?1===x.length?B:k(d,g,B,x.slice(1)):y},void 0)}function l(d,g,u){var x;
return u(Object(e.a)(Object(e.a)({},g),((x={})[d]=g[d]?g[d].map(function(y){return l(d,y,u)}):void 0,x)))}function h(d,g,u){return l(d,u,function(x){var y=x[g];if(delete x[g],x[d]){var B=x[d];return delete x[d],Object(e.a)(Object(e.a)({},x),{value:y,children:B})}return Object(e.a)(Object(e.a)({},x),{value:y})})}c.d(f,"f",function(){return a});c.d(f,"d",function(){return b});c.d(f,"i",function(){return p});c.d(f,"e",function(){return q});c.d(f,"h",function(){return t});c.d(f,"g",function(){return m});
c.d(f,"a",function(){return n});c.d(f,"b",function(){return k});c.d(f,"c",function(){return h});var e=c(0)},397:function(r,f){r.exports=v},447:function(r,f,c){r=c(397);f.a=[{value:"maps",displayName:"Maps",children:[{value:"webMaps",displayName:"Web maps"},{value:"mapFiles",displayName:"Map files"}]},{value:"layers",displayName:"Layers",children:[{value:"featureLayers",displayName:"Feature layers"},{value:"tileLayers",displayName:"Tile layers"},{value:"mapImageLayers",displayName:"Map image layers"},
{value:"imageryLayers",displayName:"Imagery layers"},{value:"tiledImageLayers",displayName:"Tiled imagery layers"},{value:"elevationLayers",displayName:"Elevation layers"},{value:"sceneLayers",displayName:"Scene layers"},{value:"tables",displayName:"Tables"},{value:"layerFiles",displayName:"Layer files"},{value:"bigDataFileShares",displayName:"Big data file shares"}]},{value:"scenes",displayName:"Scenes"},{value:"apps",displayName:"Apps",children:[{value:"webApps",displayName:"Web apps"},{value:"experienceApps",
displayName:"Experience Builder"},{value:"instantApps",displayName:"Instant Apps"},{value:"sites",displayName:"Sites"},{value:"pages",displayName:"Pages"},{value:"storyMaps",displayName:"StoryMaps"},{value:"mobileApps",displayName:"Mobile apps"},{value:"desktopApps",displayName:"Desktop apps"}]},{value:"tools",displayName:"Tools",children:[{value:"locators",displayName:"Locators"},{value:"geodatabaseAccess",displayName:"Geodatabase access"},{value:"geometricOperations",displayName:"Geometric operations"},
{value:"geoprocessingTasks",displayName:"Geoprocessing tasks"},{value:"networkAnalysis",displayName:"Network analysis"},{value:"webTools",displayName:r.filters.webTools},{value:"rasterFunctionTemplates",displayName:"Raster function templates"},{value:"deepLearningPackages",displayName:"Deep learning packages"},{value:"analytics",displayName:"Analytics"}]},{value:"files",displayName:"Files",children:[{value:"documents",displayName:"Documents"},{value:"images",displayName:"Images"},{value:"pdfs",displayName:"PDFs"},
{value:"csvs",displayName:"CSVs"},{value:"reports",displayName:"Administrative reports"},{value:"rasterFunctionTemplates",displayName:"Raster function templates"}]},{value:"notebooks",displayName:"Notebooks"},{value:"knowledgeGraphs",displayName:"Knowledge graphs"}]},846:function(r,f,c){c.r(f);var a=c(0),b=c(397);r=c(18);var p=c(131),q=c.n(p);p=c(165);var t=c.n(p),m=c(447),n=c(180);c=function(k){function l(h){var e=k.call(this,h)||this;return e.state={availableFilters:Object(n.e)(Object(n.i)({value:"##itemTypeOptionsRoot",
children:m.a},h.availableItemTypes)).children},e.mapItemTypesToToggles=e.mapItemTypesToToggles.bind(e),e.handleToggleClick=e.handleToggleClick.bind(e),e.handleClearFilter=e.handleClearFilter.bind(e),e}return Object(a.d)(l,k),l.prototype.render=function(h){return h(q.a,{key:"item-type-accordion",title:b.itemType,clearable:!!this.props.itemTypeFilter,onClear:this.handleClearFilter},h("ul",{"aria-label":b.itemType,"class":"ftr-item-type__tree",role:"tree"},this.mapItemTypesToToggles(h)))},l.prototype.mapItemTypesToToggles=
function(h){var e=this;return Object(n.e)(Object(n.i)({value:"##itemTypeOptionsRoot",children:m.a},this.props.availableItemTypes)).children.map(function(d){return h(t.a,{key:d.value,name:d.displayName,value:d.value,selectedToggle:e.props.itemTypeFilter?e.props.itemTypeFilter.value:void 0,childOptions:d.children,onToggleClick:e.handleToggleClick})})},l.prototype.handleToggleClick=function(h,e){var d=this.props.itemTypeFilter;d&&d.value===h?this.props.onItemTypeSelect():this.props.onItemTypeSelect({value:h,
text:e})},l.prototype.handleClearFilter=function(){this.props.onItemTypeSelect()},l}(r.Component);f["default"]=c}})})},"arcgis-components/Filters/ModifiedFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../DateSelection/DateRangeSelector/index","dojo/i18n!../../Filters/ModifiedFilter/nls/resources"],function(K,G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,b,b.exports,f),
b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=function(a,b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),2&b&&"string"!=
typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=847)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=l}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");n(l,h);l.prototype=null===h?Object.create(h):
(e.prototype=h.prototype,new e)}function b(l,h){var e={},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&(e[d[g]]=l[d[g]])}return e}function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==typeof Reflect&&"function"==
typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}function B(C){var z;C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,y)}B((d=d.apply(l,h||[])).next())})}function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");
for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};case 5:y.label++;g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=y.trys,(u=0<u.length&&u[u.length-1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=
u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=
h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,
e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},18:function(r,f){r.exports=K},370:function(r,f){r.exports=w},448:function(r,f){r.exports=v},847:function(r,f,c){c.r(f);var a=c(0),b=c(448);r=c(18);var p=c(131),q=c.n(p);p=c(370);var t=c.n(p);c=function(m){function n(k){k=m.call(this,k)||this;return k.handleDateRangeSelect=k.handleDateRangeSelect.bind(k),
k.handleClearFilter=k.handleClearFilter.bind(k),k}return Object(a.d)(n,m),n.prototype.render=function(k){return k(q.a,{key:"modified-filter-accordion",title:b.dateModified,clearable:!!this.props.dateModifiedFilter,onClear:this.handleClearFilter},k("ul",{"aria-label":b.dateModified,"class":"ftr-modified__tree",role:"tree"},k(t.a,{key:"date-range-selector",selectedOption:this.props.dateModifiedSection,range:this.props.dateModifiedFilter,onDateRangeSelect:this.handleDateRangeSelect})))},n.prototype.handleDateRangeSelect=
function(k,l){this.props.onDateModifiedSelect(k,l)},n.prototype.handleClearFilter=function(){this.props.onDateModifiedSelect()},n}(r.Component);f["default"]=c}})})},"arcgis-components/Filters/SharedFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle","dojo/i18n!../../Filters/SharedFilter/nls/resources"],function(K,G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,
b,b.exports,f),b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=function(a,b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),
2&b&&"string"!=typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=848)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=l}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");n(l,h);l.prototype=
null===h?Object.create(h):(e.prototype=h.prototype,new e)}function b(l,h){var e={},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&(e[d[g]]=l[d[g]])}return e}function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==
typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}function B(C){var z;C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,y)}B((d=d.apply(l,h||[])).next())})}
function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};case 5:y.label++;g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=y.trys,(u=0<u.length&&u[u.length-
1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),"return":e(2)},"function"==
typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,
g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},165:function(r,f){r.exports=w},18:function(r,f){r.exports=K},340:function(r,f){r.exports=v},848:function(r,f,c){c.r(f);var a=c(0),b=c(340);r=c(18);var p=c(131),q=c.n(p);p=c(165);var t=c.n(p);c=function(m){function n(k){k=
m.call(this,k)||this;return k.state={options:[{value:"public",displayName:b.options["public"]},{value:"org",displayName:b.options.org},{value:"shared",displayName:b.options.shared},{value:"private",displayName:b.options["private"]}]},k.mapOptionsToToggles=k.mapOptionsToToggles.bind(k),k.handleToggleClick=k.handleToggleClick.bind(k),k.handleClearFilter=k.handleClearFilter.bind(k),k}return Object(a.d)(n,m),n.prototype.render=function(k){return k(q.a,{key:"shared-accordion",title:b.shared,clearable:!!this.props.sharedFilter,
onClear:this.handleClearFilter},k("ul",{"class":"ftr-shared__tree",role:"tree","aria-label":b.shared},this.mapOptionsToToggles(k)))},n.prototype.mapOptionsToToggles=function(k){var l=this,h=this.state.options;return this.props.hideOrgGroupFilters&&(h=[this.state.options[0],this.state.options[3]]),h.map(function(e){return k(t.a,{count:l.props.counts[e.value],key:e.value,name:e.displayName,value:e.value,selectedToggle:l.props.sharedFilter?l.props.sharedFilter.value:void 0,childOptions:e.childOptions,
onToggleClick:l.handleToggleClick})})},n.prototype.handleToggleClick=function(k,l){var h=this.props.sharedFilter;h&&h.value===k?this.props.onSharedSelect():this.props.onSharedSelect({value:k,text:l})},n.prototype.handleClearFilter=function(){this.props.onSharedSelect()},n}(r.Component);f["default"]=c}})})},"arcgis-components/Filters/StatusFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle","dojo/i18n!../../Filters/StatusFilter/nls/resources"],
function(K,G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,b,b.exports,f),b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=function(a,b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&
"object"==typeof a&&a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=849)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=
l}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");n(l,h);l.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}function b(l,h){var e={},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&
(e[d[g]]=l[d[g]])}return e}function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}
function B(C){var z;C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,y)}B((d=d.apply(l,h||[])).next())})}function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};
case 5:y.label++;g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=y.trys,(u=0<u.length&&u[u.length-1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,
sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,
h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},165:function(r,f){r.exports=w},18:function(r,
f){r.exports=K},407:function(r,f){r.exports=v},849:function(r,f,c){c.r(f);var a=c(0),b=c(407);r=c(18);var p=c(131),q=c.n(p);p=c(165);var t=c.n(p);c=function(m){function n(k){k=m.call(this,k)||this;return k.state={options:[{value:"authoritative",displayName:b.options.authoritative},{value:"deprecated",displayName:b.options.deprecated}]},k.mapOptionsToToggles=k.mapOptionsToToggles.bind(k),k.handleToggleClick=k.handleToggleClick.bind(k),k.handleClearFilter=k.handleClearFilter.bind(k),k}return Object(a.d)(n,
m),n.prototype.render=function(k){return k(q.a,{key:"status-accordion",title:b.status,clearable:!!this.props.statusFilter,onClear:this.handleClearFilter},k("ul",{"aria-label":b.status,"class":"ftr-status__tree",role:"tree"},this.mapOptionsToToggles(k)))},n.prototype.mapOptionsToToggles=function(k){var l=this;return this.state.options.map(function(h){return k(t.a,{key:h.value,name:h.displayName,value:h.value,selectedToggle:l.props.statusFilter?l.props.statusFilter.value:void 0,childOptions:h.childOptions,
onToggleClick:l.handleToggleClick})})},n.prototype.handleToggleClick=function(k,l){var h=this.props.statusFilter;h&&h.value===k?this.props.onStatusSelect():this.props.onStatusSelect({value:k,text:l})},n.prototype.handleClearFilter=function(){this.props.onStatusSelect()},n}(r.Component);f["default"]=c}})})},"arcgis-components/Filters/FolderFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","dojo/i18n!../../Filters/FolderFilter/nls/resources"],function(K,G,
w){return function(v){function r(c){if(f[c])return f[c].exports;var a=f[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var f={};return r.m=v,r.c=f,r.d=function(c,a,b){r.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:b})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,a){if((1&a&&(c=r(c)),8&a)||4&a&&"object"==typeof c&&
c&&c.__esModule)return c;var b=Object.create(null);if(r.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var p in c)r.d(b,p,function(q){return c[q]}.bind(null,p));return b},r.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};return r.d(a,"a",a),a},r.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},r.p="",r(r.s=844)}({0:function(v,r,f){function c(k,l){function h(){this.constructor=k}if("function"!=typeof l&&
null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(k,l);k.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)}function a(k,l){var h={},e;for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&0>l.indexOf(e)&&(h[e]=k[e]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(e=Object.getOwnPropertySymbols(k);d<e.length;d++)0>l.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(k,e[d])&&(h[e[d]]=k[e[d]])}return h}
function b(k,l,h,e){var d,g=arguments.length,u=3>g?l:null===e?e=Object.getOwnPropertyDescriptor(l,h):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(k,l,h,e);else for(var x=k.length-1;0<=x;x--)(d=k[x])&&(u=(3>g?d(u):3<g?d(l,h,u):d(l,h))||u);return 3<g&&u&&Object.defineProperty(l,h,u),u}function p(k,l,h,e){return new (h||(h=Promise))(function(d,g){function u(B){try{y(e.next(B))}catch(C){g(C)}}function x(B){try{y(e["throw"](B))}catch(C){g(C)}}function y(B){var C;
B.done?d(B.value):(C=B.value,C instanceof h?C:new h(function(z){z(C)})).then(u,x)}y((e=e.apply(k,l||[])).next())})}function q(k,l){function h(y){return function(B){return function(C){if(e)throw new TypeError("Generator is already executing.");for(;x;)try{if(e=1,d&&(g=2&C[0]?d["return"]:C[0]?d["throw"]||((g=d["return"])&&g.call(d),0):d.next)&&!(g=g.call(d,C[1])).done)return g;switch(d=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++;
d=C[1];C=[0];continue;case 7:C=x.ops.pop();x.trys.pop();continue;default:if(!(g=x.trys,(g=0<g.length&&g[g.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!g||C[1]>g[0]&&C[1]<g[3]))x.label=C[1];else if(6===C[0]&&x.label<g[1])x.label=g[1],g=C;else if(g&&x.label<g[2])x.label=g[2],x.ops.push(C);else{g[2]&&x.ops.pop();x.trys.pop();continue}}C=l.call(k,x)}catch(z){C=[6,z],d=0}finally{e=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,B])}}var e,d,g,u,x={label:0,sent:function(){if(1&
g[0])throw g[1];return g[1]},trys:[],ops:[]};return u={next:h(0),"throw":h(1),"return":h(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function t(k,l){for(var h=0,e=l.length,d=k.length;h<e;h++,d++)k[d]=l[h];return k}f.d(r,"d",function(){return c});f.d(r,"a",function(){return n});f.d(r,"f",function(){return a});f.d(r,"c",function(){return b});f.d(r,"b",function(){return p});f.d(r,"e",function(){return q});f.d(r,"g",function(){return t});var m=function(k,l){return(m=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(h[d]=e[d])})(k,l)},n=function(){return(n=Object.assign||function(k){for(var l,h=1,e=arguments.length;h<e;h++)for(var d in l=arguments[h])Object.prototype.hasOwnProperty.call(l,d)&&(k[d]=l[d]);return k}).apply(this,arguments)};Object.create;Object.create},131:function(v,r){v.exports=G},18:function(v,r){v.exports=K},339:function(v,r,f){f.d(r,"a",
function(){return c});var c=function(a){return function(b){13===b.keyCode&&a(b)}}},358:function(v,r){v.exports=w},844:function(v,r,f){f.r(r);var c=f(0),a=f(358);v=f(18);var b=f(131),p=f.n(b),q=f(339);f=function(t){function m(n){n=t.call(this,n)||this;return n.handleToggleKeyDown=Object(q.a)(n.handleToggleFilter.bind(n)),n.handleClearKeyDown=Object(q.a)(n.handleClearFilter.bind(n)),n.state={filterString:""},n.handleFilterStringChange=n.handleFilterStringChange.bind(n),n.handleToggleFilter=n.handleToggleFilter.bind(n),
n.handleClearFilter=n.handleClearFilter.bind(n),n.mapFoldersToLinks=n.mapFoldersToLinks.bind(n),n}return Object(c.d)(m,t),m.prototype.render=function(n){return n(p.a,{key:"folder-accordion",title:a.folders,clearable:!!this.props.folderFilter,onClear:this.handleClearFilter,padding:!1},n("div",{"class":"ftr-folder__input-area"},n("input",{"class":"ftr-folder__input",type:"search",placeholder:a.filterFolders,"aria-label":a.filterFolders,oninput:this.handleFilterStringChange,value:this.state.filterString})),
n("ul",{"class":"ftr-folder__list"},this.mapFoldersToLinks(n)))},m.prototype.handleFilterStringChange=function(n){this.setState({filterString:n.target.value})},m.prototype.handleToggleFilter=function(n){var k=n.target.dataset;n=k.id;k=k.title;this.props.folderFilter&&this.props.folderFilter.id===n||this.props.onFolderSelect({id:n,title:k})},m.prototype.handleClearFilter=function(){this.props.folderFilter&&this.props.onFolderSelect()},m.prototype.preventCloseDropdown=function(n){n.stopPropagation()},
m.prototype.mapFoldersToLinks=function(n){var k=this,l={"ftr-folder__link":!0,"ftr-folder__link--active":!this.props.folderFilter};return this.props.availableFolders?[n("li",{"class":"ftr-folder__item",key:"all-user-content"},n("a",{classes:l,"data-id":"all-folder-content","data-title":a.allFolders,onclick:this.handleClearFilter,onkeydown:this.handleClearKeyDown,tabindex:"0"},this.props.folderFilter?n("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"})):
n("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"})),a.allFolders))].concat(this.props.availableFolders.filter(function(h){return-1!==h.title.toLowerCase().indexOf(k.state.filterString.toLowerCase())}).map(function(h){var e,d=Object(c.a)(Object(c.a)({},l),{"ftr-folder__link--active":k.props.folderFilter&&
k.props.folderFilter.id===h.id,"ftr-folder__link--home":"root"===h.id});return e="root"===h.id?n("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"})):k.props.folderFilter&&k.props.folderFilter.id===h.id?n("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"})):
n("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"})),n("li",{"class":"ftr-folder__item",key:h.id},n("a",{classes:d,"data-id":h.id,"data-title":h.title,onclick:k.handleToggleFilter,onkeydown:k.handleToggleKeyDown,tabindex:"0"},e,n("span",{"class":"ftr-folder__title"},h.title)))})):null},m}(v.Component);r["default"]=f}})})},"arcgis-components/Filters/GroupFilter/index":function(){define(["../../Component",
"../../Dropdowns/AccordionDropdown/index","dojo/i18n!../../Filters/GroupFilter/nls/resources"],function(K,G,w){return function(v){function r(c){if(f[c])return f[c].exports;var a=f[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var f={};return r.m=v,r.c=f,r.d=function(c,a,b){r.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:b})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,
"__esModule",{value:!0})},r.t=function(c,a){if((1&a&&(c=r(c)),8&a)||4&a&&"object"==typeof c&&c&&c.__esModule)return c;var b=Object.create(null);if(r.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var p in c)r.d(b,p,function(q){return c[q]}.bind(null,p));return b},r.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};return r.d(a,"a",a),a},r.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},r.p="",r(r.s=
845)}({0:function(v,r,f){function c(k,l){function h(){this.constructor=k}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(k,l);k.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)}function a(k,l){var h={},e;for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&0>l.indexOf(e)&&(h[e]=k[e]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(e=Object.getOwnPropertySymbols(k);d<e.length;d++)0>
l.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(k,e[d])&&(h[e[d]]=k[e[d]])}return h}function b(k,l,h,e){var d,g=arguments.length,u=3>g?l:null===e?e=Object.getOwnPropertyDescriptor(l,h):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(k,l,h,e);else for(var x=k.length-1;0<=x;x--)(d=k[x])&&(u=(3>g?d(u):3<g?d(l,h,u):d(l,h))||u);return 3<g&&u&&Object.defineProperty(l,h,u),u}function p(k,l,h,e){return new (h||(h=Promise))(function(d,g){function u(B){try{y(e.next(B))}catch(C){g(C)}}
function x(B){try{y(e["throw"](B))}catch(C){g(C)}}function y(B){var C;B.done?d(B.value):(C=B.value,C instanceof h?C:new h(function(z){z(C)})).then(u,x)}y((e=e.apply(k,l||[])).next())})}function q(k,l){function h(y){return function(B){return function(C){if(e)throw new TypeError("Generator is already executing.");for(;x;)try{if(e=1,d&&(g=2&C[0]?d["return"]:C[0]?d["throw"]||((g=d["return"])&&g.call(d),0):d.next)&&!(g=g.call(d,C[1])).done)return g;switch(d=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=
C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++;d=C[1];C=[0];continue;case 7:C=x.ops.pop();x.trys.pop();continue;default:if(!(g=x.trys,(g=0<g.length&&g[g.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!g||C[1]>g[0]&&C[1]<g[3]))x.label=C[1];else if(6===C[0]&&x.label<g[1])x.label=g[1],g=C;else if(g&&x.label<g[2])x.label=g[2],x.ops.push(C);else{g[2]&&x.ops.pop();x.trys.pop();continue}}C=l.call(k,x)}catch(z){C=[6,z],d=0}finally{e=g=0}if(5&C[0])throw C[1];return{value:C[0]?
C[1]:void 0,done:!0}}([y,B])}}var e,d,g,u,x={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return u={next:h(0),"throw":h(1),"return":h(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function t(k,l){for(var h=0,e=l.length,d=k.length;h<e;h++,d++)k[d]=l[h];return k}f.d(r,"d",function(){return c});f.d(r,"a",function(){return n});f.d(r,"f",function(){return a});f.d(r,"c",function(){return b});f.d(r,"b",function(){return p});f.d(r,"e",function(){return q});
f.d(r,"g",function(){return t});var m=function(k,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(h[d]=e[d])})(k,l)},n=function(){return(n=Object.assign||function(k){for(var l,h=1,e=arguments.length;h<e;h++)for(var d in l=arguments[h])Object.prototype.hasOwnProperty.call(l,d)&&(k[d]=l[d]);return k}).apply(this,arguments)};Object.create;Object.create},131:function(v,r){v.exports=
G},18:function(v,r){v.exports=K},339:function(v,r,f){f.d(r,"a",function(){return c});var c=function(a){return function(b){13===b.keyCode&&a(b)}}},359:function(v,r){v.exports=w},845:function(v,r,f){f.r(r);var c=f(0),a=f(359);v=f(18);var b=f(131),p=f.n(b),q=f(339);f=function(t){function m(n){n=t.call(this,n)||this;return n.handleToggleKeyDown=Object(q.a)(n.handleToggleFilter.bind(n)),n.handleClearKeyDown=Object(q.a)(n.handleClearFilter.bind(n)),n.state={filterString:""},n.handleToggleFilter=n.handleToggleFilter.bind(n),
n.handleClearFilter=n.handleClearFilter.bind(n),n.mapGroupsToLinks=n.mapGroupsToLinks.bind(n),n}return Object(c.d)(m,t),m.prototype.render=function(n){var k=this;return n(p.a,{key:"group-accordion",title:this.props.title||a.groups,clearable:!!this.props.groupFilter,onClear:this.handleClearFilter,padding:!1},n("div",{"class":"ftr-group__input-area"},n("input",{"class":"ftr-group__input",type:"search",placeholder:a.filterGroups,"aria-label":a.filterGroups,oninput:function(l){k.setState({filterString:l.target.value})},
value:this.state.filterString})),n("ul",{"class":"ftr-group__list"},this.mapGroupsToLinks(n)))},m.prototype.handleToggleFilter=function(n){var k=n.id;n=n.title;this.props.groupFilter&&this.props.groupFilter.id===k||this.props.onGroupSelect({id:k,title:n})},m.prototype.handleClearFilter=function(){this.props.groupFilter&&this.props.onGroupSelect()},m.prototype.preventCloseDropdown=function(n){n.stopPropagation()},m.prototype.mapGroupsToLinks=function(n){var k=this;if(!this.props.availableGroups)return null;
var l={"ftr-group__link":!0,"ftr-group__link--active":!this.props.groupFilter};return[n("li",{"class":"ftr-group__item",key:"all-user-groups"},n("a",{classes:l,"data-id":"all-group-content","data-title":a.allGroups,onclick:this.handleClearFilter,onkeydown:this.handleClearKeyDown,tabindex:"0"},n("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M8 1.998a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm-2 4h1v5a1 1 0 0 1-1-1H3a1 1 0 0 1-1-1v-4a2 2 0 0 1 2-2h3.78a3.05 3.05 0 0 0-.596 1H4a1 1 0 0 0-1 1v4h1zm8-1a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm2 1H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z"})),
n("span",{"class":"ftr-group__link__text"},a.allGroups)))].concat(this.props.availableGroups.filter(function(h){return-1!==h.title.toLowerCase().indexOf(k.state.filterString.toLowerCase())}).map(function(h){var e,d=Object(c.a)(Object(c.a)({},l),{"ftr-group__link--active":(null===(e=k.props.groupFilter)||void 0===e?void 0:e.id)===h.id});return n("li",{"class":"ftr-group__item",key:h.id},n("a",{classes:d,onclick:function(){k.handleToggleFilter(h)},onkeydown:k.handleToggleKeyDown,tabindex:"0"},n("svg",
{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},n("path",{fill:"currentColor",d:"M8 1.998a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm-2 4h1v5a1 1 0 0 1-1-1H3a1 1 0 0 1-1-1v-4a2 2 0 0 1 2-2h3.78a3.05 3.05 0 0 0-.596 1H4a1 1 0 0 0-1 1v4h1zm8-1a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm2 1H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z"})),
n("span",{"class":"ftr-group__link__text"},h.title)))}))},m}(v.Component);r["default"]=f}})})},"arcgis-components/Filters/TagsFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","dojo/i18n!../../Filters/TagsFilter/nls/resources","../../Buttons/CheckToggle"],function(K,G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,b,b.exports,f),b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=
function(a,b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&"object"==typeof a&&a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,
q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=850)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=l}if("function"!=typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");n(l,h);l.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}function b(l,h){var e=
{},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&(e[d[g]]=l[d[g]])}return e}function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);
else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}function B(C){var z;C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,y)}B((d=d.apply(l,h||[])).next())})}function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");
for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};case 5:y.label++;g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=y.trys,(u=0<u.length&&u[u.length-1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=
u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=
h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,
e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},18:function(r,f){r.exports=K},360:function(r,f){r.exports=w},371:function(r,f){r.exports=v},850:function(r,f,c){c.r(f);var a=c(0),b=c(360);r=c(18);var p=c(131),q=c.n(p);p=c(371);var t=c.n(p);c=function(m){function n(k){k=m.call(this,k)||this;return k.handleFilterStringChange=k.handleFilterStringChange.bind(k),
k.handleToggleClick=k.handleToggleClick.bind(k),k.handleClearFilter=k.handleClearFilter.bind(k),k}return Object(a.d)(n,m),n.prototype.render=function(k){return k(q.a,{key:this.props.key+"-accordion",title:this.props.title?this.props.title:b.tags,clearable:!!this.props.tagsFilter,onClear:this.handleClearFilter,padding:!1},k("div",{"class":"ftr-tags__input-area"},k("input",{"class":"ftr-tags__input",type:"search",placeholder:b.filterTags,"aria-label":b.filterTags,oninput:this.handleFilterStringChange,
value:this.props.filterString})),k("ul",{"class":"ftr-tags__tree",role:"tree","aria-label":b.tags},0<this.props.availableTags.length?this.mapTagsToToggles(k):k("p",{"class":"ftr-tags__none"},b.noTags)))},n.prototype.mapTagsToToggles=function(k){var l=this;return this.props.availableTags.map(function(h){return k(t.a,{key:h.value,name:h.value,value:h.value,selectedToggles:l.props.tagsFilter?l.props.tagsFilter:void 0,onToggleClick:l.handleToggleClick})})},n.prototype.handleToggleClick=function(k,l){var h,
e=this.props.tagsFilter;if(e&&e[k]){var d=Object(a.a)({},e);delete d[k];0<Object.keys(d).length?this.props.onTagSelect(d):this.props.onTagSelect()}else e?this.props.onTagSelect(Object(a.a)(Object(a.a)({},e),((d={})[k]=!0,d))):this.props.onTagSelect(((h={})[k]=!0,h))},n.prototype.handleFilterStringChange=function(k){k.preventDefault();this.props.onFilterStringChange(k.target.value)},n.prototype.handleClearFilter=function(){this.props.tagsFilter&&this.props.onTagSelect()},n}(r.Component);f["default"]=
c}})})},"arcgis-components/Buttons/CheckToggle":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,
"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=
827)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>
n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}
function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=
y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?
y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});
v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=
K},827:function(G,w,v){function r(a,b,p,q,t){return p?p.map(function(m){return a(c,{key:m.value,name:m.displayName,value:b+"/"+m.value,selectedToggles:t,childOptions:m.children,onToggleClick:q})}):null}v.r(w);var f=v(0),c=function(a){function b(p){p=a.call(this,p)||this;return p.handleToggleClick=p.handleToggleClick.bind(p),p}return Object(f.d)(b,a),b.prototype.render=function(p){var q=this.props,t=q.name,m=q.value,n=q.selectedToggles,k=q.childOptions,l=q.onToggleClick;q=q.showChildren;var h=!(!n||
!n[m]),e={"btn-check-toggle__item":!0,"btn-check-toggle__item--active":h},d={"btn-check-toggle__button":!0,"btn-check-toggle__button--active":h},g=null;return k&&(g=p("ul",{"class":"btn-check-toggle__sub-list"},r(p,m,k,l,n))),p("li",{key:m,classes:e},p("button",{id:"toggle-"+m,key:m,classes:d,value:m,onmousedown:this.preventDefault,onclick:this.handleToggleClick,tabindex:"0"},p("span",{"class":"btn-check-toggle__text",key:"text"},t),this.props.count?p("span",{"class":"btn-check-toggle__count",key:"count"},
"\u00a0","("+this.props.count+")"):null),q||h?g:null)},b.prototype.preventDefault=function(p){p.preventDefault()},b.prototype.handleToggleClick=function(p){p.preventDefault();this.props.onToggleClick(this.props.value,this.props.name)},b}(v(16).Component);w["default"]=c}})})},"arcgis-components/Filters/CollaborationFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/CheckToggle","dojo/i18n!../../Filters/CollaborationFilter/nls/resources"],function(K,
G,w,v){return function(r){function f(a){if(c[a])return c[a].exports;var b=c[a]={i:a,l:!1,exports:{}};return r[a].call(b.exports,b,b.exports,f),b.l=!0,b.exports}var c={};return f.m=r,f.c=c,f.d=function(a,b,p){f.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:p})},f.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},f.t=function(a,b){if((1&b&&(a=f(a)),8&b)||4&b&&"object"==typeof a&&
a&&a.__esModule)return a;var p=Object.create(null);if(f.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var q in a)f.d(p,q,function(t){return a[t]}.bind(null,q));return p},f.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return f.d(b,"a",b),b},f.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f.p="",f(f.s=851)}({0:function(r,f,c){function a(l,h){function e(){this.constructor=l}if("function"!=typeof h&&
null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");n(l,h);l.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}function b(l,h){var e={},d;for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&0>h.indexOf(d)&&(e[d]=l[d]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var g=0;for(d=Object.getOwnPropertySymbols(l);g<d.length;g++)0>h.indexOf(d[g])&&Object.prototype.propertyIsEnumerable.call(l,d[g])&&(e[d[g]]=l[d[g]])}return e}
function p(l,h,e,d){var g,u=arguments.length,x=3>u?h:null===d?d=Object.getOwnPropertyDescriptor(h,e):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(l,h,e,d);else for(var y=l.length-1;0<=y;y--)(g=l[y])&&(x=(3>u?g(x):3<u?g(h,e,x):g(h,e))||x);return 3<u&&x&&Object.defineProperty(h,e,x),x}function q(l,h,e,d){return new (e||(e=Promise))(function(g,u){function x(C){try{B(d.next(C))}catch(z){u(z)}}function y(C){try{B(d["throw"](C))}catch(z){u(z)}}function B(C){var z;
C.done?g(C.value):(z=C.value,z instanceof e?z:new e(function(D){D(z)})).then(x,y)}B((d=d.apply(l,h||[])).next())})}function t(l,h){function e(B){return function(C){return function(z){if(d)throw new TypeError("Generator is already executing.");for(;y;)try{if(d=1,g&&(u=2&z[0]?g["return"]:z[0]?g["throw"]||((u=g["return"])&&u.call(g),0):g.next)&&!(u=u.call(g,z[1])).done)return u;switch(g=0,u&&(z=[2&z[0],u.value]),z[0]){case 0:case 1:u=z;break;case 4:return y.label++,{value:z[1],done:!1};case 5:y.label++;
g=z[1];z=[0];continue;case 7:z=y.ops.pop();y.trys.pop();continue;default:if(!(u=y.trys,(u=0<u.length&&u[u.length-1])||6!==z[0]&&2!==z[0])){y=0;continue}if(3===z[0]&&(!u||z[1]>u[0]&&z[1]<u[3]))y.label=z[1];else if(6===z[0]&&y.label<u[1])y.label=u[1],u=z;else if(u&&y.label<u[2])y.label=u[2],y.ops.push(z);else{u[2]&&y.ops.pop();y.trys.pop();continue}}z=h.call(l,y)}catch(D){z=[6,D],g=0}finally{d=u=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([B,C])}}var d,g,u,x,y={label:0,sent:function(){if(1&
u[0])throw u[1];return u[1]},trys:[],ops:[]};return x={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function m(l,h){for(var e=0,d=h.length,g=l.length;e<d;e++,g++)l[g]=h[e];return l}c.d(f,"d",function(){return a});c.d(f,"a",function(){return k});c.d(f,"f",function(){return b});c.d(f,"c",function(){return p});c.d(f,"b",function(){return q});c.d(f,"e",function(){return t});c.d(f,"g",function(){return m});var n=function(l,h){return(n=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,d){e.__proto__=d}||function(e,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(e[g]=d[g])})(l,h)},k=function(){return(k=Object.assign||function(l){for(var h,e=1,d=arguments.length;e<d;e++)for(var g in h=arguments[e])Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g]);return l}).apply(this,arguments)};Object.create;Object.create},131:function(r,f){r.exports=G},18:function(r,f){r.exports=K},371:function(r,f){r.exports=
w},427:function(r,f){r.exports=v},851:function(r,f,c){c.r(f);var a=c(0),b=c(427);r=c(18);var p=c(131),q=c.n(p);p=c(371);var t=c.n(p);c=function(m){function n(k){k=m.call(this,k)||this;return k.handleToggleClick=k.handleToggleClick.bind(k),k.handleClearFilter=k.handleClearFilter.bind(k),k}return Object(a.d)(n,m),n.prototype.render=function(k){return k(q.a,{key:this.props.key+"-accordion",title:this.props.title?this.props.title:b.collaboration,clearable:this.getSelected(),onClear:this.handleClearFilter},
k("ul",{"class":"ftr-collaborations__tree",role:"tree","aria-label":b.collaborations},0<Object.keys(this.props.collaborationsFilter).length?this.mapCollaborationsToToggles(k):k("p",{"class":"ftr-collaborations__none"},b.noCollaborations)))},n.prototype.getSelected=function(){var k=this.props.collaborationsFilter;return Object.keys(this.props.collaborationsFilter).some(function(l){var h;return!!k[l].selected||(null===(h=k[l].participants)||void 0===h?void 0:h.some(function(e){return!!e.selected}))})},
n.prototype.mapCollaborationsToToggles=function(k){var l=this;this.props.collaborationsFilter.sort(function(d,g){return d.label<g.label?-1:d.label>g.label?1:0});var h=this.props.collaborationsFilter,e=Object.keys(this.props.collaborationsFilter).map(function(d){var g,u=((g={})[d]=h[d].selected,g);g=h[d].participants?h[d].participants.map(function(x){var y;return u=Object(a.a)(Object(a.a)({},u),((y={})[d+"/"+x.value]=x.selected,y)),{value:x.value,displayName:x.label,onToggleClick:l.handleToggleClick,
selectedToggles:u}}):[];return k(t.a,{key:h[d].value,name:h[d].label,value:h[d].value,childOptions:g,selectedToggles:u,onToggleClick:l.handleToggleClick,showChildren:!0})});return e.sort(function(d,g){if(d.children[0].children[0].text&&g.children[0].children[0].text){var u=d.children[0].children[0].text.toLowerCase(),x=g.children[0].children[0].text.toLowerCase();if(u<x)return-1;if(u>x)return 1}return 0}),e},n.prototype.handleToggleClick=function(k,l){var h=this.props.collaborationsFilter;if(h){if(h[k])h[k].selected||
Object.keys(h).forEach(function(d){return h[d].selected=!1}),Object.keys(h).forEach(function(d){h[d].participants.forEach(function(g){g.selected=!1})}),h[k].selected=!h[k].selected;else{var e=k.split("/")[1];Object.keys(h).forEach(function(d){h[d].selected=!1;h[d].participants.forEach(function(g){g.value===e?g.selected=!g.selected:g.selected=!1})})}this.props.onCollaborationSelect(h)}},n.prototype.handleFilterStringChange=function(k){},n.prototype.handleClearFilter=function(){if(this.props.collaborationsFilter){var k=
this.props.collaborationsFilter;Object.keys(k).forEach(function(l){k[l].selected=!1;k[l].participants.forEach(function(h){return h.selected=!1})});this.props.onCollaborationSelect(k)}},n}(r.Component);f["default"]=c}})})},"arcgis-components/Dropdowns/FilterController/index":function(){define(["../../Component","../../Buttons/FilterChip/index","dojo/i18n!../../Dropdowns/FilterController/nls/resources"],function(K,G,w){return function(v){function r(c){if(f[c])return f[c].exports;var a=f[c]={i:c,l:!1,
exports:{}};return v[c].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var f={};return r.m=v,r.c=f,r.d=function(c,a,b){r.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:b})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,a){if((1&a&&(c=r(c)),8&a)||4&a&&"object"==typeof c&&c&&c.__esModule)return c;var b=Object.create(null);if(r.r(b),Object.defineProperty(b,
"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var p in c)r.d(b,p,function(q){return c[q]}.bind(null,p));return b},r.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};return r.d(a,"a",a),a},r.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},r.p="",r(r.s=838)}({0:function(v,r,f){function c(k,l){function h(){this.constructor=k}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");
m(k,l);k.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)}function a(k,l){var h={},e;for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&0>l.indexOf(e)&&(h[e]=k[e]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(e=Object.getOwnPropertySymbols(k);d<e.length;d++)0>l.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(k,e[d])&&(h[e[d]]=k[e[d]])}return h}function b(k,l,h,e){var d,g=arguments.length,u=3>g?l:null===e?e=Object.getOwnPropertyDescriptor(l,
h):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(k,l,h,e);else for(var x=k.length-1;0<=x;x--)(d=k[x])&&(u=(3>g?d(u):3<g?d(l,h,u):d(l,h))||u);return 3<g&&u&&Object.defineProperty(l,h,u),u}function p(k,l,h,e){return new (h||(h=Promise))(function(d,g){function u(B){try{y(e.next(B))}catch(C){g(C)}}function x(B){try{y(e["throw"](B))}catch(C){g(C)}}function y(B){var C;B.done?d(B.value):(C=B.value,C instanceof h?C:new h(function(z){z(C)})).then(u,x)}y((e=e.apply(k,
l||[])).next())})}function q(k,l){function h(y){return function(B){return function(C){if(e)throw new TypeError("Generator is already executing.");for(;x;)try{if(e=1,d&&(g=2&C[0]?d["return"]:C[0]?d["throw"]||((g=d["return"])&&g.call(d),0):d.next)&&!(g=g.call(d,C[1])).done)return g;switch(d=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++;d=C[1];C=[0];continue;case 7:C=x.ops.pop();x.trys.pop();continue;default:if(!(g=x.trys,(g=0<g.length&&
g[g.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!g||C[1]>g[0]&&C[1]<g[3]))x.label=C[1];else if(6===C[0]&&x.label<g[1])x.label=g[1],g=C;else if(g&&x.label<g[2])x.label=g[2],x.ops.push(C);else{g[2]&&x.ops.pop();x.trys.pop();continue}}C=l.call(k,x)}catch(z){C=[6,z],d=0}finally{e=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,B])}}var e,d,g,u,x={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return u={next:h(0),"throw":h(1),"return":h(2)},
"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function t(k,l){for(var h=0,e=l.length,d=k.length;h<e;h++,d++)k[d]=l[h];return k}f.d(r,"d",function(){return c});f.d(r,"a",function(){return n});f.d(r,"f",function(){return a});f.d(r,"c",function(){return b});f.d(r,"b",function(){return p});f.d(r,"e",function(){return q});f.d(r,"g",function(){return t});var m=function(k,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,
e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(h[d]=e[d])})(k,l)},n=function(){return(n=Object.assign||function(k){for(var l,h=1,e=arguments.length;h<e;h++)for(var d in l=arguments[h])Object.prototype.hasOwnProperty.call(l,d)&&(k[d]=l[d]);return k}).apply(this,arguments)};Object.create;Object.create},18:function(v,r){v.exports=K},426:function(v,r){v.exports=G},443:function(v,r){v.exports=w},838:function(v,r,f){function c(t){t.preventDefault()}f.r(r);var a=f(0),b=f(443);v=f(18);var p=
f(426),q=f.n(p);f=function(t){function m(n){n=t.call(this,n)||this;return n.toggleFilterDisplay=n.toggleFilterDisplay.bind(n),n.state={open:!!n.props.startOpen},n}return Object(a.d)(m,t),m.prototype.render=function(n){var k,l=Object(a.g)([],this.props.filters),h={"filter-controller__expand-btn":!0,"filter-controller__expand-btn--active":this.state.open,"filter-controller__expand-btn--dark":"light"===this.props.theme},e={"filter-controller__container":!0,"filter-controller__container--light":"light"===
this.props.theme},d={"filter-controller__chip-container":!0,"margin-right-half":!0,"filter-controller__chip-container--full-width":"full-width"===this.props.mode},g="light"===this.props.theme?"dark":"light";1<this.props.filters.length&&(k=n("button",{key:"filter-controller-toggle-btn",classes:h,onclick:this.toggleFilterDisplay,onmousedown:c},(this.state.open?"-":"+")+" "+(this.props.filters.length-1)));if(h=l.shift())return this.state.open?n("div",{classes:e},n("span",{"class":"filter-controller__label margin-right-half"},
this.props.showLabel),n("div",{classes:d},n(q.a,{filterId:h.filterId,handleRemoveFilter:h.onRemove,key:h.filterId,text:h.text,theme:g,"static":h["static"]}),l.map(function(u){return n(q.a,{filterId:u.filterId,handleRemoveFilter:u.onRemove,key:u.filterId,text:u.text,theme:g,"static":u["static"]})}),k,this.clearableFilters(Object(a.g)([h],l))?n("button",{"class":"filter-controller__clear-btn",onclick:this.props.onClear},b.clearAll):null)):n("div",{classes:e},n("span",{"class":"filter-controller__label"},
this.props.showLabel),n("div",{classes:d},n(q.a,{filterId:h.filterId,handleRemoveFilter:h.onRemove,key:h.filterId,text:h.text,theme:g,"static":h["static"]}),k,this.clearableFilters(Object(a.g)([h],l))?n("button",{"class":"filter-controller__clear-btn",onclick:this.props.onClear},b.clearAll):null))},m.prototype.toggleFilterDisplay=function(){this.setState({open:!this.state.open})},m.prototype.clearableFilters=function(n){return n.some(function(k){return!k["static"]})},m}(v.Component);r["default"]=
f}})})},"arcgis-components/Buttons/FilterChip/index":function(){define(["../../Component","dojo/i18n!../../Buttons/FilterChip/nls/resources"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=828)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<
h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}
function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=
B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?
B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});
r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},18:function(w,v){w.exports=
K},522:function(w,v){w.exports=G},828:function(w,v,r){r.r(v);var f=r(0),c=r(522);w=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Object(f.d)(b,a),b.prototype.render=function(p){var q=this.props,t=q.filterId,m=q.handleRemoveFilter;q=q.text;return p("span",{id:"filter-chip-"+q,classes:{"btn-ftr-chip__label":!0,"btn-ftr-chip__label--dark":"dark"===this.props.theme},key:q},q,this.props["static"]?null:p("button",{"aria-label":c.clear+": "+q,value:t,id:"filter-chip-x-"+
q,"class":"btn-ftr-chip__remove",onclick:m},p("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",style:"\n                                    fill: currentColor;\n                                    pointer-events: none;\n                                    display: block;\n                                    width: 16px;\n                                    height: 16px;\n                                    vertical-align: middle;\n                                    padding-right: .15em;\n                                    transform: rotate(360deg);\n                                "},
p("path",{d:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z"}))))},b}(r(18).Component);v["default"]=w}})})},"arcgis-components/Management/LazyLoader":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,
f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=
r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,f)},w.p="",w(w.s=871)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,
l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?
h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=
1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&
g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,
"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<
l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=K},871:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(){return null!==f&&f.apply(this,arguments)||this}return Object(r.d)(c,f),c.prototype.componentDidConnect=function(){var a=this;try{var b=window.require.on("error",function(p){throw Error("Could not lazy-load the '"+a.props.path+"' component. The 'arcgis-components' submodule MUST be registered as 'arcgis-components' in dojoConfig packages in order for lazy component loading to function properly.");
});window.require(["arcgis-components/"+this.props.path],function(p){b.remove();a.setState({Cmp:p["default"]})})}catch(p){this.props.onFail&&this.props.onFail(p)}},c.prototype.render=function(a){return this.state.Cmp?a(this.state.Cmp,Object(r.a)({},this.props.componentProps)):this.props.children&&this.props.children[0]?this.props.children[0]:a("div")},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/ItemCards/AnalysisCard/index":function(){define("../../Component dojo/i18n!../../ItemCards/nls/resources dojo/date/locale dojo/number ../../Badges/Retired ../../Loaders/LoaderIcon ../../Dropdowns/Ago2018Dropdown ../../Badges/Authoritative ../../Badges/Collaboration ../../Badges/Deprecated ../../Badges/LivingAtlas ../../Badges/Marketplace ../../Badges/OpenData ../../Badges/Premium ../../Badges/Subscriber ../../Badges/PublicDataCollection ../../Badges/Solution".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){return function(e){function d(u){if(g[u])return g[u].exports;var x=g[u]={i:u,l:!1,exports:{}};return e[u].call(x.exports,x,x.exports,d),x.l=!0,x.exports}var g={};return d.m=e,d.c=g,d.d=function(u,x,y){d.o(u,x)||Object.defineProperty(u,x,{enumerable:!0,get:y})},d.r=function(u){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"});Object.defineProperty(u,"__esModule",{value:!0})},d.t=function(u,x){if((1&
x&&(u=d(u)),8&x)||4&x&&"object"==typeof u&&u&&u.__esModule)return u;var y=Object.create(null);if(d.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:u}),2&x&&"string"!=typeof u)for(var B in u)d.d(y,B,function(C){return u[C]}.bind(null,B));return y},d.n=function(u){var x=u&&u.__esModule?function(){return u["default"]}:function(){return u};return d.d(x,"a",x),x},d.o=function(u,x){return Object.prototype.hasOwnProperty.call(u,x)},d.p="",d(d.s=862)}({0:function(e,d,g){function u(A,F){function H(){this.constructor=
A}if("function"!=typeof F&&null!==F)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");D(A,F);A.prototype=null===F?Object.create(F):(H.prototype=F.prototype,new H)}function x(A,F){var H={},I;for(I in A)Object.prototype.hasOwnProperty.call(A,I)&&0>F.indexOf(I)&&(H[I]=A[I]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var L=0;for(I=Object.getOwnPropertySymbols(A);L<I.length;L++)0>F.indexOf(I[L])&&Object.prototype.propertyIsEnumerable.call(A,I[L])&&
(H[I[L]]=A[I[L]])}return H}function y(A,F,H,I){var L,J=arguments.length,O=3>J?F:null===I?I=Object.getOwnPropertyDescriptor(F,H):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(A,F,H,I);else for(var P=A.length-1;0<=P;P--)(L=A[P])&&(O=(3>J?L(O):3<J?L(F,H,O):L(F,H))||O);return 3<J&&O&&Object.defineProperty(F,H,O),O}function B(A,F,H,I){return new (H||(H=Promise))(function(L,J){function O(V){try{fa(I.next(V))}catch(ba){J(ba)}}function P(V){try{fa(I["throw"](V))}catch(ba){J(ba)}}
function fa(V){var ba;V.done?L(V.value):(ba=V.value,ba instanceof H?ba:new H(function(ka){ka(ba)})).then(O,P)}fa((I=I.apply(A,F||[])).next())})}function C(A,F){function H(fa){return function(V){return function(ba){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,L&&(J=2&ba[0]?L["return"]:ba[0]?L["throw"]||((J=L["return"])&&J.call(L),0):L.next)&&!(J=J.call(L,ba[1])).done)return J;switch(L=0,J&&(ba=[2&ba[0],J.value]),ba[0]){case 0:case 1:J=ba;break;case 4:return P.label++,
{value:ba[1],done:!1};case 5:P.label++;L=ba[1];ba=[0];continue;case 7:ba=P.ops.pop();P.trys.pop();continue;default:if(!(J=P.trys,(J=0<J.length&&J[J.length-1])||6!==ba[0]&&2!==ba[0])){P=0;continue}if(3===ba[0]&&(!J||ba[1]>J[0]&&ba[1]<J[3]))P.label=ba[1];else if(6===ba[0]&&P.label<J[1])P.label=J[1],J=ba;else if(J&&P.label<J[2])P.label=J[2],P.ops.push(ba);else{J[2]&&P.ops.pop();P.trys.pop();continue}}ba=F.call(A,P)}catch(ka){ba=[6,ka],L=0}finally{I=J=0}if(5&ba[0])throw ba[1];return{value:ba[0]?ba[1]:
void 0,done:!0}}([fa,V])}}var I,L,J,O,P={label:0,sent:function(){if(1&J[0])throw J[1];return J[1]},trys:[],ops:[]};return O={next:H(0),"throw":H(1),"return":H(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O}function z(A,F){for(var H=0,I=F.length,L=A.length;H<I;H++,L++)A[L]=F[H];return A}g.d(d,"d",function(){return u});g.d(d,"a",function(){return E});g.d(d,"f",function(){return x});g.d(d,"c",function(){return y});g.d(d,"b",function(){return B});g.d(d,"e",function(){return C});
g.d(d,"g",function(){return z});var D=function(A,F){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,I){H.__proto__=I}||function(H,I){for(var L in I)Object.prototype.hasOwnProperty.call(I,L)&&(H[L]=I[L])})(A,F)},E=function(){return(E=Object.assign||function(A){for(var F,H=1,I=arguments.length;H<I;H++)for(var L in F=arguments[H])Object.prototype.hasOwnProperty.call(F,L)&&(A[L]=F[L]);return A}).apply(this,arguments)};Object.create;Object.create},112:function(e,d){e.exports=
G},117:function(e,d,g){g.d(d,"a",function(){return x});var u=g(0);e=g(15);var x=Object(e.a)(function(y,B){var C=Object(u.a),z=Object(u.a)({},B),D=B.type,E=B.typeKeywords?B.typeKeywords:[],A=null==D?void 0:D.toLowerCase(),F=!1,H=!1,I=D=!1;if("ogcfeatureserver"===A)E="featureshosted";else if(0<(null==A?void 0:A.indexOf("service"))||"feature collection"===A||"kml"===A||"wms"===A||"wmts"===A||"wfs"===A){var L=-1<E.indexOf("Hosted Service");"feature service"===A||"feature collection"===A||"kml"===A||"wfs"===
A?(I=-1<E.indexOf("Table"),F=-1<E.indexOf("Route Layer"),H=-1<E.indexOf("Markup"),E=(D=-1!==E.indexOf("Spatiotemporal"))&&I?"spatiotemporaltable":I?"table":F?"routelayer":H?"markup":D?"spatiotemporal":L?"featureshosted":"features"):"map service"===A||"wms"===A||"wmts"===A?E=L||-1<E.indexOf("Tiled")||"wmts"===A?"maptiles":"mapimages":"scene service"===A?E=-1<E.indexOf("Line")?"sceneweblayerline":-1<E.indexOf("3DObject")?"sceneweblayermultipatch":-1<E.indexOf("Point")?"sceneweblayerpoint":-1<E.indexOf("IntegratedMesh")?
"sceneweblayermesh":-1<E.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<E.indexOf("Polygon")?"sceneweblayerpolygon":-1<E.indexOf("Building")?"sceneweblayerbuilding":-1<E.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===A?(D=-1<E.indexOf("Elevation 3D Layer"),E=-1<E.indexOf("Tiled Imagery"),E=D?"elevationlayer":E?"tiledimagerylayer":"imagery"):E="stream service"===A?"streamlayer":"vector tile service"===A?"vectortile":"datastore catalog service"===A?"datastorecollection":
"geocoding service"===A?"geocodeservice":"geoprocessing service"===A&&-1<E.indexOf("Web Tool")?"tool":"layers"}else E="web map"===A||"cityengine web scene"===A?"maps":"web scene"===A?-1<E.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===A&&-1<(null==E?void 0:E.indexOf("configurableApp"))?"instantapps":"web mapping application"===A||"mobile application"===A||"application"===A||"operation view"===A||"desktop application"===A?"apps":"map document"===A||"map package"===
A||"published map"===A||"scene document"===A||"globe document"===A||"basemap package"===A||"mobile basemap package"===A||"mobile map package"===A||"project package"===A||"project template"===A||"pro map"===A||"layout"===A||"layer"===A&&-1<E.indexOf("ArcGIS Pro")||"explorer map"===A&&-1<E.indexOf("Explorer Document")?"mapsgray":"service definition"===A||"csv"===A||"administrative report"===A||"shapefile"===A||"cad drawing"===A||"geojson"===A||"360 vr experience"===A||"netcdf"===A?"datafiles":"explorer add in"===
A||"desktop add in"===A||"windows viewer add in"===A||"windows viewer configuration"===A?"appsgray":"arcgis pro add in"===A||"arcgis pro configuration"===A?"addindesktop":"rule package"===A||"file geodatabase"===A||"csv collection"===A||"kml collection"===A||"windows mobile package"===A||"map template"===A||"desktop application template"===A||"arcpad package"===A||"code sample"===A||"form"===A||"document link"===A||"vector tile package"===A||"operations dashboard add in"===A||"rules package"===A||
"image"===A||"workflow manager package"===A||"explorer map"===A&&-1<E.indexOf("Explorer Mapping Application")||-1<E.indexOf("Document")?"datafilesgray":"network analysis service"===A||"geoprocessing service"===A||"geodata service"===A||"geometry service"===A||"geoprocessing package"===A||"locator package"===A||"geoprocessing sample"===A||"workflow manager service"===A||"raster function template"===A||"deep learning package"===A?"toolsgray":"layer"===A||"layer package"===A||"explorer layer"===A?"layersgray":
"scene package"===A?"scenepackage":"tile package"===A?"tilepackage":"storymap"===A?"storymap":"storymap theme"===A?"storymaptheme":"web experience"===A?"experiencebuilder":"web experience template"===A?"webexperiencetemplate":"task file"===A?"taskfile":"report template"===A?"report-template":"statistical data collection"===A?"statisticaldatacollection":"insights workbook"===A?"workbook":"insights model"===A?"insightsmodel":"insights page"===A?"insightspage":"hub initiative"===A?"hubinitiative":"hub page"===
A?"hubpage":"hub site application"===A?"hubsite":"relational database connection"===A?"relationaldatabaseconnection":"big data file share"===A||"data store"===A?"datastorecollection":"image collection"===A?"imagecollection":"desktop style"===A?"desktopstyle":"style"===A?"style":"dashboard"===A?"dashboard":"feed"===A?"feed":"real time analytic"===A?"realtimeanalytics":"big data analytic"===A?"bigdataanalytics":"notebook"===A?"notebook":"notebook code snippets"===A?"notebookcodesnippets":"maps";return C(z,
{iconURI:y+"/"+E+"16.png"})})},120:function(e,d,g){g.d(d,"a",function(){return x});var u=g(0);e=g(15);var x=Object(e.a)(function(y,B){var C=Object(u.a),z=Object(u.a)({},B),D,E,A="notebook"!==(null===(D=B.type)||void 0===D?void 0:D.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"===(null===(E=B.type)||void 0===E?void 0:E.toLowerCase())&&(A="notebook-code-snippet-thumb.png");E=y.baseUrl+"/home/js/arcgisonline/css/images/"+A;D=(B.thumbnail&&(E=y.restUrl+"/content/items/"+
B.id+"/info/"+B.thumbnail+(y.credential?"?token\x3d"+y.credential.token:"")),E);return C(z,{thumbURI:D})})},121:function(e,d,g){g.d(d,"a",function(){return y});var u=g(0);e=g(15);var x=function(B,C){return C.description?C.description.replace(/src=('|")js\/jsapi\/esri\//g,function(z){return"src\x3d"+('"'===z[4]?'"':"'")+B.baseUrl+"/home/js/jsapi/esri/"}):void 0},y=Object(e.a)(function(B,C){return Object(u.a)(Object(u.a)({},C),{patchedDescription:x(B,C)})})},122:function(e,d,g){g.d(d,"a",function(){return B});
var u=g(0),x=g(124);e=g(15);var y=g(58),B=Object(e.a)(function(C,z){var D=Object(u.a),E=Object(u.a)({},z),A,F=z.type,H=z.typeKeywords||[],I=F,L=(null==C?void 0:C.portalUser)||(null==C?void 0:C.user);if("Feature Service"===F||"Feature Collection"===F){if(I=-1<H.indexOf("Table")?"Table":-1<H.indexOf("Route Layer")?"Route Layer":-1<H.indexOf("Markup")?"Markup":"Feature Layer",L&&Object(y.d)(z,L)&&-1<(null==H?void 0:H.indexOf("Hosted Service")))H=(null===(A=null===document||void 0===document?void 0:document.documentElement)||
void 0===A?void 0:A.lang)||"en",I=I+" ("+(x.a[H]||x.a[H.split("-")[0]]||x.a.en)+")"}else"Image Service"===F?(A=-1<H.indexOf("Elevation 3D Layer"),H=-1<H.indexOf("Tiled Imagery"),I=A?"Elevation Layer":H?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===F?I="Scene Layer":"Scene Package"===F?I="Scene Layer Package":"Stream Service"===F?I="Feature Layer":"Geocoding Service"===F?I="Locator":"Microsoft Powerpoint"===F?I="Microsoft PowerPoint":"OGCFeatureServer"===F?I="OGC Feature Layer":"GeoJson"===
F?I="GeoJSON":"Globe Service"===F?I="Globe Layer":"Vector Tile Service"===F?I="Tile Layer":"netCDF"===F?I="NetCDF":"Map Service"===F?I=-1===H.indexOf("Spatiotemporal")&&(-1<H.indexOf("Hosted Service")||-1<H.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":F&&-1<F.toLowerCase().indexOf("add in")?I=F.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===F?I="Big Data File Share":"Web Mapping Application"===F&&(null==H?0:H.includes("configurableApp"))?I="Instant App":"Data Store"===F&&(H.includes("cloudStore_amazon")||
H.includes("cloudStore_azure")?I+=" (Cloud)":(H.includes("fileShare")||H.includes("hdfs")||H.includes("hive")||H.includes("bigDataFileShare")&&H.includes("dataStore"))&&(I+=" (Big Data File Share)"));return D(E,{displayName:I})})},123:function(e,d,g){g.d(d,"a",function(){return y});var u=g(0);e=g(15);var x=function(B,C){var z=[],D=B.typeKeywords?B.typeKeywords:[];return B.contentStatus&&("org_authoritative"===B.contentStatus||"public_authoritative"===B.contentStatus?z.push("authoritative"):"deprecated"===
B.contentStatus&&z.push("deprecated")),B.origin&&z.push("collaboration"),B.groupDesignations&&-1<B.groupDesignations.indexOf("livingatlas")&&z.push("livingAtlas"),-1<D.indexOf("Requires Credits")?z.push("premium"):-1<D.indexOf("Requires Subscription")&&z.push("subscriber"),-1<D.indexOf("Public Data Collection")&&((null==C?void 0:C.portalUser)||(null==C?void 0:C.user))&&z.push("publicDataCollection"),"Solution"===B.type&&-1<B.typeKeywords.indexOf("ArcGIS Solution")&&z.push("solution"),C.isPortal&&
"Web Mapping Application"===B.type&&(-1<B.typeKeywords.indexOf("Story Map")&&z.push("retiredStoryMap"),function(E){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(A){var F,
H=-1<A.indexOf(".html");return-1<(null===(F=E.url)||void 0===F?void 0:F.indexOf("/apps/"+A+(H?"":"/")))})}(B)&&z.push("retiredApp")),z},y=Object(e.a)(function(B,C){return Object(u.a)(Object(u.a)({},C),{badges:x(C,B)})})},124:function(e,d,g){g.d(d,"a",function(){return u});var u={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",
he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",
vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},148:function(e,d,g){g.d(d,"a",function(){return x});var u=g(0);e=g(15);var x=Object(e.a)(function(y,B){var C=Object(u.a),z=Object(u.a)({},B);var D=B.thumbnail?y.restUrl+"/community/users/"+B.username+"/info/"+B.thumbnail+(y.credential?"?token\x3d"+y.credential.token:""):void 0;return C(z,{thumbURI:D})})},15:function(e,d,g){function u(y){return function C(){for(var z=this,D=[],E=0;E<arguments.length;E++)D[E]=
arguments[E];return D.length>=y.length?y.call.apply(y,Object(x.g)([this],D)):function(){for(var A=[],F=0;F<arguments.length;F++)A[F]=arguments[F];return C.call.apply(C,Object(x.g)(Object(x.g)([z],D),A))}}}g.d(d,"a",function(){return u});var x=g(0)},151:function(e,d){e.exports=w},178:function(e,d){e.exports=v},18:function(e,d){e.exports=K},233:function(e,d){e.exports=r},250:function(e,d){e.exports=f},273:function(e,d){e.exports=c},274:function(e,d){e.exports=a},275:function(e,d){e.exports=b},276:function(e,
d){e.exports=p},277:function(e,d){e.exports=q},278:function(e,d){e.exports=t},279:function(e,d){e.exports=m},280:function(e,d){e.exports=n},281:function(e,d){e.exports=k},282:function(e,d){e.exports=l},311:function(e,d){e.exports=h},5:function(e,d,g){function u(A){return 0===Object.keys(A).length&&A.constructor===Object}function x(A){return null!=A}function y(A,F){return D.apply(null,arguments)}function B(A,F){return E.apply(null,arguments)}g.d(d,"b",function(){return u});g.d(d,"a",function(){return x});
g.d(d,"e",function(){return z});g.d(d,"c",function(){return y});g.d(d,"d",function(){return B});var C=g(0);e=g(15);var z=Object(e.a)(function(A,F){var H=Object(C.a)({},F);return delete H[A],H}),D=Object(e.a)(function(A,F){return Object.keys(F).reduce(function(H,I){return H[I]=A(F[I],I,F),H},{})}),E=Object(e.a)(function(A,F){return Object.keys(F).reduce(function(H,I){return A(F[I],I,F)&&(H[I]=F[I]),H},{})})},51:function(e,d,g){function u(ka){return!(!ka.urlKey||!ka.customBaseUrl)}function x(ka){return ka.role===
I.admin||ka.role===I.accountAdmin}function y(ka){return Object(O.a)(ka.roleId)&&0<(ka.roleId||"").length}function B(ka){return!y(ka)||y(ka)&&-1<(ka.privileges||[]).indexOf("portal:admin:viewItems")}function C(ka){return-1<(ka.privileges||[]).indexOf("portal:user:shareToOrg")}function z(ka){return-1<(ka.privileges||[]).indexOf("portal:user:shareToGroup")}function D(ka){return-1<(ka.privileges||[]).indexOf("portal:user:shareToPublic")}function E(ka,la){return A(ka)||F(ka)||la.canSharePublic&&H(ka)}
function A(ka){return-1<(ka.privileges||[]).indexOf("portal:admin:shareToGroup")}function F(ka){return-1<(ka.privileges||[]).indexOf("portal:admin:shareToOrg")}function H(ka){return-1<(ka.privileges||[]).indexOf("portal:admin:shareToPublic")}g.d(d,"l",function(){return fa});g.d(d,"h",function(){return V});g.d(d,"m",function(){return ba});g.d(d,"k",function(){return u});g.d(d,"i",function(){return x});g.d(d,"j",function(){return y});g.d(d,"g",function(){return B});g.d(d,"b",function(){return C});g.d(d,
"a",function(){return z});g.d(d,"c",function(){return D});g.d(d,"d",function(){return A});g.d(d,"e",function(){return F});g.d(d,"f",function(){return H});var I,L=g(63),J=g(148),O=g(5),P=g(58);!function(ka){ka.user="org_user";ka.accountUser="account_user";ka.publisher="org_publisher";ka.accountPublisher="account_publisher";ka.admin="org_admin";ka.accountAdmin="account_admin";ka.viewer="iAAAAAAAAAAAAAAA";ka.dataEditor="iBBBBBBBBBBBBBBB"}(I||(I={}));var fa=function(ka){var la=ka.items;return!!ka.user.orgId&&
la.every(function(ma){return ma.isOrgItem})},V=function(ka){var la=ka.items,ma=ka.user,ha=ka.portal;ka=la[0];var Z=Object(P.c)(ka,ma),W=y(ma),Q=E(ma,ha);if(W=Object(P.a)(ka,ma)&&-1<(ma.privileges||[]).indexOf("portal:admin:updateItems")&&!W)W=!u(ha)||z(ma)||C(ma)||ha.canSharePublic&&D(ma)||E(ma,ha);ha=W;return!(ka.portal.isPortal&&ka.owner!==ma.username&&-1<ka.owner.indexOf("esri_"))&&(Z||ha||fa({items:la,user:ma})&&Q)},ba=function(ka,la){return Object(L.a)(Object(J.a)(ka))(la)}},58:function(e,d,
g){function u(D,E){return(null==D?void 0:D.owner)===E.username}function x(D,E){var A;if(!(A=u(D,E)))if(Object(B.a)(D.isAdmin))A=!!D.isAdmin;else{A=D.owner;var F="admin"===D.itemControl;A=!(D.portal.isPortal&&!u(D,E)&&F&&-1<A.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(A))&&F}return A}function y(D,E){return x(D,E)||"update"===D.itemControl}g.d(d,"d",function(){return u});g.d(d,"c",function(){return x});g.d(d,"a",function(){return y});g.d(d,"b",function(){return z});
var B=g(5),C=g(51),z=function(D){var E=D.user,A=D.items;D=D.portal;return Object(C.l)({items:A,user:E})&&Object(C.h)({items:A,user:E,portal:D})&&Object(C.g)(E)&&A[0].itemOwner||E}},63:function(e,d,g){function u(){for(var x=[],y=0;y<arguments.length;y++)x[y]=arguments[y];return function(B){return x.reduceRight(function(C,z){return z(C)},B)}}g.d(d,"a",function(){return u})},78:function(e,d,g){g.d(d,"a",function(){return D});g.d(d,"b",function(){return E});var u=g(63);e=g(5);var x=g(123),y=g(122),B=
g(117),C=g(121),z=g(120),D=function(A,F,H){return Object(u.a)(Object(z.a)(A),Object(C.a)(A),Object(B.a)(F),Object(y.a)(A),Object(x.a)(A))(H)},E=Object(u.a)(Object(e.e)("patchedDescription"),Object(e.e)("thumbURI"),Object(e.e)("iconURI"),Object(e.e)("displayName"),Object(e.e)("badges"))},862:function(e,d,g){g.r(d);var u=g(0),x=g(112);e=g(18);var y=g(151),B=g(178),C=g(250),z=g.n(C);C=g(274);var D=g.n(C);C=g(275);var E=g.n(C);C=g(276);var A=g.n(C);C=g(277);var F=g.n(C);C=g(278);var H=g.n(C);C=g(279);
var I=g.n(C);C=g(280);var L=g.n(C);C=g(281);var J=g.n(C);C=g(311);var O=g.n(C);C=g(282);var P=g.n(C);C=g(233);var fa=g.n(C);C=g(273);var V=g.n(C),ba=g(78);g=function(ka){function la(ma){var ha=ka.call(this,ma)||this;return ha.state={customActionsOpen:!1,inversedAction:ma.isSelected&&ma.isSelected(Object(ba.b)(ha.props.item)),isLoading:!1},ha.handleActionDropdownToggle=ha.handleActionDropdownToggle.bind(ha),ha.handleCustomActionClick=ha.handleCustomActionClick.bind(ha),ha.handleMainActionClick=ha["handleMainActionClick"+
(ha.props.loadOnMainAction?"Async":"")].bind(ha),ha}return Object(u.d)(la,ka),la.prototype.render=function(ma){var ha,Z=this,W=this.props,Q=W.item;W=W.sortField;var ia=this.props.customActions?this.props.customActions.filter(function(X){return X.allowed(Z.props.item)}):[],R={"card-ac__container":!0,"card-ac__container-inverse-action":this.state.inversedAction,"card-mc__fader":this.props.loadOnMainAction,"card-mc__fader--loading":this.state.isLoading},S={"card-ac__custom-actions":!0,"card-ac__btn":this.props.usePrimaryButtonStyle,
"card-ac__secondary-btn":!this.props.usePrimaryButtonStyle},N={"card-ac__custom-action-btn":!0,"card-ac__btn":this.props.usePrimaryButtonStyle,"card-ac__secondary-btn":!this.props.usePrimaryButtonStyle};return ha="numviews"===W?x.viewCount+": "+B.format(Q.numViews):"avgrating"===W?x.rating+": "+Q.avgRating.toFixed(2):"created"===W?x.created+": "+y.format(new Date(Q.created),{selector:"date",formatLength:"short"}):x.updated+": "+y.format(new Date(Q.modified),{selector:"date",formatLength:"short"}),
ma("div",{classes:R,key:this.props.key},ma("div",{"class":"card-ac__details-container"},ma("div",{"class":"card-ac__thumb-container"},ma("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"","class":"card-ac__thumbnail",style:"\n                                background-image: url("+Q.thumbURI+");\n                            "})),ma("div",{"class":"card-ac__details"},ma("h4",{"class":"card-ac__title"},Q.title),ma("div",{"class":"card-ac__info-row"},ma("div",
{"class":"card-ac__icon-title-container"},ma("img",{src:Q.iconURI,"class":"content-search-item-icon",alt:""}),ma("span",{"class":"card-ac__author-text"},Q.displayName+" "+x.by,ma("a",{"class":"content-search-selectable card-mc__author-link",title:this.props.organization?x.viewOrg:x.viewProfile,href:this.props.organization?this.props.organization.orgUrl:this.props.portal.baseUrl+"/home/user.html?user\x3d"+Q.owner,target:"_blank"}," "+(this.props.organization?this.props.organization.name:Q.owner)))),
ma("span",{"class":"card-ac__info-bullet","aria-hidden":"true"},"\u2022"),ma("span",{"class":"card-ac__info-string"},ha)),ma("p",{"class":"card-ac__snippet"},ma("span",{"class":"card-ac__snippet-text"},Q.snippet," "),ma("a",{"class":"card-ac__side-action card-ac__no-wrap",href:this.props.portal.baseUrl+"/home/item.html?id\x3d"+Q.id,target:"_blank"},x.viewItem,ma("svg",{role:"img",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},ma("path",{d:"M10 1v1h3.293l-6.646 6.646 0.707 0.707 6.646-6.646v3.293h1v-5z"}),
ma("path",{d:"M14 8v6h-12v-12h6v-1h-7v14h14v-7z"})))))),ma("div",{"class":"card-ac__sub-container"},ma("div",{"class":"card-ac__badge-container card-ac__badge-container--regular card-ac__sub-group"},this.renderBadges(ma)),ma("div",{"class":"card-ac__badge-container card-ac__badge-container--small card-ac__sub-group"},this.renderBadges(ma,!0)),ma("div",{"class":"card-ac__action-container card-ac__sub-group"},ma("div",{"class":"card-ac__no-wrap"},this.renderMainActionButton(ma),0<ia.length?ma(V.a,{key:Q.id+
"-action-dropdown",active:this.state.customActionsOpen,onToggle:this.handleActionDropdownToggle},ma("span",{classes:S,title:x.actions},ma("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 32 32"},ma("path",{d:"M28 9v5L16 26 4 14V9l12 12L28 9z"}))),ma("div",null,ia.map(function(X,aa){return ma("button",{key:X.name,"class":N,value:aa,onclick:Z.handleCustomActionClick},X.name)}))):null))))},la.prototype.renderLoaderIcon=function(ma){return this.props.loadOnMainAction&&this.state.isLoading?
ma(z.a,{color:"#ffffff"}):null},la.prototype.renderMainActionButton=function(ma){return ma("button",{"class":"card-ac__btn "+(this.props.usePrimaryButtonStyle?"card-ac__primary-btn":"card-ac__secondary-btn"),onclick:this.handleMainActionClick.bind(this,this.state.inversedAction?"Inverse":"")},this.renderLoaderIcon(ma),this.props[this.state.inversedAction?"mainInverseActionTitle":"mainActionTitle"])},la.prototype.renderBadges=function(ma,ha){var Z=this,W=ha?"small":"regular";return this.props.item.badges.map(function(Q){switch(Q){case "authoritative":return ma(D.a,
{size:W,altOrg:Z.props.organization?Z.props.organization.name:void 0});case "deprecated":return ma(A.a,{size:W});case "collaboration":return ma(E.a,{size:W});case "livingAtlas":return ma(F.a,{size:W});case "marketplace":return ma(H.a,{size:W});case "openData":return ma(I.a,{size:W});case "premium":return ma(L.a,{size:W,user:Z.props.portal.user});case "subscriber":return ma(J.a,{size:W,user:Z.props.portal.user});case "solution":return ma(O.a,{size:W});case "publicDataCollection":return ma(P.a,{size:W});
case "retiredStoryMap":return ma(fa.a,{size:W,isRetiredStoryMap:!0});case "retiredApp":return ma(fa.a,{size:W})}return null})},la.prototype.handleActionDropdownToggle=function(){this.setState({customActionsOpen:!this.state.customActionsOpen})},la.prototype.handleMainActionClick=function(ma){this.props.mainAction([Object(ba.b)(this.props.item)])},la.prototype.handleCustomActionClick=function(ma){this.setState({customActionsOpen:!this.state.customActionsOpen});this.props.customActions&&this.props.customActions[ma.target.value]&&
this.props.customActions[ma.target.value].onAction(Object(ba.b)(this.props.item))},la}(e.Component);d["default"]=g}})})},"arcgis-components/Loaders/LoaderIcon":function(){define(function(){return function(K){function G(v){if(w[v])return w[v].exports;var r=w[v]={i:v,l:!1,exports:{}};return K[v].call(r.exports,r,r.exports,G),r.l=!0,r.exports}var w={};return G.m=K,G.c=w,G.d=function(v,r,f){G.o(v,r)||Object.defineProperty(v,r,{enumerable:!0,get:f})},G.r=function(v){"undefined"!=typeof Symbol&&Symbol.toStringTag&&
Object.defineProperty(v,Symbol.toStringTag,{value:"Module"});Object.defineProperty(v,"__esModule",{value:!0})},G.t=function(v,r){if((1&r&&(v=G(v)),8&r)||4&r&&"object"==typeof v&&v&&v.__esModule)return v;var f=Object.create(null);if(G.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:v}),2&r&&"string"!=typeof v)for(var c in v)G.d(f,c,function(a){return v[a]}.bind(null,c));return f},G.n=function(v){var r=v&&v.__esModule?function(){return v["default"]}:function(){return v};return G.d(r,"a",
r),r},G.o=function(v,r){return Object.prototype.hasOwnProperty.call(v,r)},G.p="",G(G.s=869)}({869:function(K,G,w){w.r(G);G["default"]=function(v,r){return r("div",{key:v.key||"loader-icon","class":"load-icon__icon"},r("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",style:"\n                fill: currentColor;\n                pointer-events: none;\n                display: inline-block;\n                width: 1em;\n                height: 1em;\n                vertical-align: -0.15em;\n                color: "+
(v.color||"#0079c1")+";\n                transition-property: transform;\n                transition-duration: 0.5s;\n                animation-name: rotate;\n                animation-duration: 1s;\n                animation-iteration-count: infinite;\n                animation-timing-function: linear;\n                transform-origin: 50% 50%;\n            "},r("path",{d:"M16 8A8 8 0 1 1 7 .07v.909a7.1 7.1 0 1 0 2 0v-.91A7.996 7.996 0 0 1 16 8z"})))}}})})},"arcgis-components/Badges/Authoritative":function(){define(["dojo/i18n!../Badges/nls/resources",
"../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),
8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=812)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=
K},812:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){var p=a.altOrg;return b(c.a,{backgroundColor:"#DDEEDB",textColor:"#2B622B",key:"authoritative-badge",size:a.size,text:f.authoritative,title:p?f.tooltips.altAuthoritative+" "+p:f.tooltips.authoritative,tooltip:a.tooltip?f.tooltips.authoritative:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("path",{fill:"none",d:"M0 0h16v16H0z"}),
b("g",{fill:"#2B622B"},b("path",{d:"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"}),b("path",{d:"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"}))))}}})})},"arcgis-components/Badges/Collaboration":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,
c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),
2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=815)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},815:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",
key:"collaboration-badge",size:a.size,text:f.collaboration,title:f.tooltips.collaboration,tooltip:a.tooltip?f.tooltips.collaboration:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("g",{fill:"#196FA6"},b("path",{d:"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z"}),b("path",{d:"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z"}),b("path",{d:"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z"}),
b("path",{d:"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z"}),b("path",{d:"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z"}),b("path",{d:"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z"}),b("path",{d:"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z"}),
b("path",{d:"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z"}),b("path",{d:"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z"}))))}}})})},"arcgis-components/Badges/Deprecated":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,
c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=
f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=816)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},816:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#F3DED7",textColor:"#8C2907",key:"deprecated-badge",size:a.size,text:f.deprecated,title:f.tooltips.deprecated,tooltip:a.tooltip?f.tooltips.deprecated:
void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("path",{fill:"none",d:"M0 0h16v16H0z"}),b("path",{fill:"#8C2907",d:"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"})))}}})})},"arcgis-components/Badges/LivingAtlas":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],
function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==
typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=817)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},817:function(w,
v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",key:"living-atlas-badge",size:a.size,text:f.livingAtlas,title:f.tooltips.livingAtlas,tooltip:a.tooltip?f.tooltips.livingAtlas:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("rect",{width:"16",height:"16",fill:"none"}),b("rect",{width:"16",height:"16",fill:"none"}),b("g",
null,b("path",{d:"M14.75342,4.57031a.50021.50021,0,0,0-.84277-.53906,5.85956,5.85956,0,0,1-1.04541,1.12939A27.86114,27.86114,0,0,1,8.5,8.19922a27.48671,27.48671,0,0,1-4.81445,2.26172,5.9062,5.9062,0,0,1-1.50049.34033.5.5,0,0,0,.022.99951L2.23,11.80029a6.51338,6.51338,0,0,0,1.46027-.30341A5.97993,5.97993,0,0,0,7.5,13.30646V15H5a.5.5,0,0,0,0,1h6a.5.5,0,0,0,0-1H8.5V13.301a5.95318,5.95318,0,0,0,5.25336-7.601A6.38549,6.38549,0,0,0,14.75342,4.57031ZM10.5,11.66357A4.99888,4.99888,0,0,1,4.75793,11.129,30.77175,30.77175,0,0,0,9,9.06543a30.80143,30.80143,0,0,0,3.9082-2.642A5.00026,5.00026,0,0,1,10.5,11.66357Z",
fill:"#196fa6"}),b("path",{d:"M7.06836,2.41943a5.00709,5.00709,0,0,1,4.71045,1.63867.50023.50023,0,1,0,.75684-.6543A6.01019,6.01019,0,0,0,6.88184,1.437a.5.5,0,0,0,.18652.98242Z",fill:"#196fa6"}),b("path",{d:"M2.80176,9.63281a.50023.50023,0,0,0,.47217-.66406A4.98907,4.98907,0,0,1,5.08917,3.29163l.22772.39441a.50008.50008,0,0,0,.86621-.5l-1-1.73193a.50008.50008,0,0,0-.86621.5l.27222.47144A5.988,5.988,0,0,0,2.32959,9.29688.49991.49991,0,0,0,2.80176,9.63281Z",fill:"#196fa6"}))))}}})})},"arcgis-components/Badges/Marketplace":function(){define(["dojo/i18n!../Badges/nls/resources",
"../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),
8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=818)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=
K},818:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#DDEEDB",textColor:"#2B622B",key:"marketplace-badge",size:a.size,text:f.marketplace,title:f.tooltips.marketplace,tooltip:a.tooltip?f.tooltips.marketplace:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("path",{fill:"#196FA6",d:"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"})))}}})})},
"arcgis-components/Badges/OpenData":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=819)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},819:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#DDEEDB",textColor:"#2B622B",key:"open-data-badge",size:a.size,text:f.openData,title:f.tooltips.openData,tooltip:a.tooltip?f.tooltips.openData:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("path",{fill:"none",
d:"M0 0h16v16H0z"}),b("g",{fill:"#196fa6"},b("path",{d:"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"}))))}}})})},
"arcgis-components/Badges/Premium":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=820)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},820:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){var p=a.user;p=p?p.orgId?"Org":"Public":"Anon";return b(c.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",key:"premium-badge",size:a.size,text:f.premium,title:f.tooltips["premium"+p],tooltip:a.tooltip?f.tooltips["premium"+p]:void 0,tooltipDirection:a.tooltipDirection},b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",
viewBox:"0 0 16 16"},b("path",{fill:"none",d:"M0 0h16v16H0z"}),b("path",{fill:"none",d:"M0 0h16v16H0z"}),b("path",{d:"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z",
fill:"#196fa6"}),b("path",{d:"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z",fill:"#196fa6"})))}}})})},"arcgis-components/Badges/Subscriber":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,
c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=
f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=821)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},821:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){var p=a.user;p=p?p.orgId?"Org":"Public":"Anon";return b(c.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",key:"subscriber-badge",size:a.size,text:f.subscriber,title:f.tooltips["subscriber"+
p],tooltip:a.tooltip?f.tooltips["subscriber"+p]:void 0,tooltipDirection:a.tooltipDirection},b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},b("path",{d:"M8.05371,15.5H8.0498a.49939.49939,0,0,1-.25-.06689C.59961,11.27539,1.542,2.0376,1.55225,1.94434A.49966.49966,0,0,1,1.811,1.56152a.50721.50721,0,0,1,.46338-.0083A5.15007,5.15007,0,0,0,7.73291.61328a.51762.51762,0,0,1,.6377,0,5.14642,5.14642,0,0,0,5.4585.93994.50711.50711,0,0,1,.46338.0083.49966.49966,0,0,1,.25879.38281c.01025.09326.95264,9.33105-6.24756,13.48877A.49939.49939,0,0,1,8.05371,15.5Zm0-.5h0ZM2.50977,2.70557c-.05615,2.05469.22266,8.45508,5.542,11.71387,5.31934-3.25879,5.59814-9.65967,5.542-11.71387a6.17691,6.17691,0,0,1-5.542-1.07324A6.18289,6.18289,0,0,1,2.50977,2.70557Z",
fill:"#196fa6"})))}}})})},"arcgis-components/Badges/PublicDataCollection":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=823)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=K},823:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#efe397",textColor:"#786d1c",key:"public-data-collection-badge",size:a.size,text:f.publicDataCollection,title:f.tooltips.publicDataCollection,tooltip:a.tooltip?f.tooltips.publicDataCollection:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",
height:"16",viewBox:"0 0 16 16"},b("path",{fill:"none",d:"M0 0h16v16H0z"}),b("path",{fill:"#786d1c",d:"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"})))}}})})},"arcgis-components/Badges/Solution":function(){define(["dojo/i18n!../Badges/nls/resources",
"../Badges/Badge"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),
8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=822)}({130:function(w,v){w.exports=G},73:function(w,v){w.exports=
K},822:function(w,v,r){r.r(v);var f=r(73);w=r(130);var c=r.n(w);v["default"]=function(a,b){return b(c.a,{backgroundColor:"#e2deee",textColor:"#312b43",key:"solution-badge",size:a.size,text:f.solution,title:f.tooltips.solution,tooltip:a.tooltip?f.tooltips.solution:void 0,tooltipDirection:a.tooltipDirection},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 32 32"},b("path",{fill:"#312b43",d:"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"}),
b("path",{"class":"cls-1",d:"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"})))}}})})},"arcgis-components/ItemCards/MiniCard/index":function(){define("../../Component dojo/i18n!../../ItemCards/nls/resources dojo/_base/kernel dojo/date/locale dojo/number ../../Badges/Retired ../../Buttons/SvgButton ../../Loaders/LoaderIcon ../../Badges/Authoritative ../../Badges/Collaboration ../../Badges/Deprecated ../../Badges/LivingAtlas ../../Badges/Marketplace ../../Badges/OpenData ../../Badges/Premium ../../Badges/Subscriber ../../Badges/PublicDataCollection ../../Badges/Solution ../../Dropdowns/TextOptionDropdown".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){return function(g){function u(y){if(x[y])return x[y].exports;var B=x[y]={i:y,l:!1,exports:{}};return g[y].call(B.exports,B,B.exports,u),B.l=!0,B.exports}var x={};return u.m=g,u.c=x,u.d=function(y,B,C){u.o(y,B)||Object.defineProperty(y,B,{enumerable:!0,get:C})},u.r=function(y){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"});Object.defineProperty(y,"__esModule",{value:!0})},u.t=function(y,B){if((1&
B&&(y=u(y)),8&B)||4&B&&"object"==typeof y&&y&&y.__esModule)return y;var C=Object.create(null);if(u.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:y}),2&B&&"string"!=typeof y)for(var z in y)u.d(C,z,function(D){return y[D]}.bind(null,z));return C},u.n=function(y){var B=y&&y.__esModule?function(){return y["default"]}:function(){return y};return u.d(B,"a",B),B},u.o=function(y,B){return Object.prototype.hasOwnProperty.call(y,B)},u.p="",u(u.s=863)}({0:function(g,u,x){function y(H,I){function L(){this.constructor=
H}if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");A(H,I);H.prototype=null===I?Object.create(I):(L.prototype=I.prototype,new L)}function B(H,I){var L={},J;for(J in H)Object.prototype.hasOwnProperty.call(H,J)&&0>I.indexOf(J)&&(L[J]=H[J]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var O=0;for(J=Object.getOwnPropertySymbols(H);O<J.length;O++)0>I.indexOf(J[O])&&Object.prototype.propertyIsEnumerable.call(H,J[O])&&
(L[J[O]]=H[J[O]])}return L}function C(H,I,L,J){var O,P=arguments.length,fa=3>P?I:null===J?J=Object.getOwnPropertyDescriptor(I,L):J;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)fa=Reflect.decorate(H,I,L,J);else for(var V=H.length-1;0<=V;V--)(O=H[V])&&(fa=(3>P?O(fa):3<P?O(I,L,fa):O(I,L))||fa);return 3<P&&fa&&Object.defineProperty(I,L,fa),fa}function z(H,I,L,J){return new (L||(L=Promise))(function(O,P){function fa(ka){try{ba(J.next(ka))}catch(la){P(la)}}function V(ka){try{ba(J["throw"](ka))}catch(la){P(la)}}
function ba(ka){var la;ka.done?O(ka.value):(la=ka.value,la instanceof L?la:new L(function(ma){ma(la)})).then(fa,V)}ba((J=J.apply(H,I||[])).next())})}function D(H,I){function L(ba){return function(ka){return function(la){if(J)throw new TypeError("Generator is already executing.");for(;V;)try{if(J=1,O&&(P=2&la[0]?O["return"]:la[0]?O["throw"]||((P=O["return"])&&P.call(O),0):O.next)&&!(P=P.call(O,la[1])).done)return P;switch(O=0,P&&(la=[2&la[0],P.value]),la[0]){case 0:case 1:P=la;break;case 4:return V.label++,
{value:la[1],done:!1};case 5:V.label++;O=la[1];la=[0];continue;case 7:la=V.ops.pop();V.trys.pop();continue;default:if(!(P=V.trys,(P=0<P.length&&P[P.length-1])||6!==la[0]&&2!==la[0])){V=0;continue}if(3===la[0]&&(!P||la[1]>P[0]&&la[1]<P[3]))V.label=la[1];else if(6===la[0]&&V.label<P[1])V.label=P[1],P=la;else if(P&&V.label<P[2])V.label=P[2],V.ops.push(la);else{P[2]&&V.ops.pop();V.trys.pop();continue}}la=I.call(H,V)}catch(ma){la=[6,ma],O=0}finally{J=P=0}if(5&la[0])throw la[1];return{value:la[0]?la[1]:
void 0,done:!0}}([ba,ka])}}var J,O,P,fa,V={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return fa={next:L(0),"throw":L(1),"return":L(2)},"function"==typeof Symbol&&(fa[Symbol.iterator]=function(){return this}),fa}function E(H,I){for(var L=0,J=I.length,O=H.length;L<J;L++,O++)H[O]=I[L];return H}x.d(u,"d",function(){return y});x.d(u,"a",function(){return F});x.d(u,"f",function(){return B});x.d(u,"c",function(){return C});x.d(u,"b",function(){return z});x.d(u,"e",function(){return D});
x.d(u,"g",function(){return E});var A=function(H,I){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,J){L.__proto__=J}||function(L,J){for(var O in J)Object.prototype.hasOwnProperty.call(J,O)&&(L[O]=J[O])})(H,I)},F=function(){return(F=Object.assign||function(H){for(var I,L=1,J=arguments.length;L<J;L++)for(var O in I=arguments[L])Object.prototype.hasOwnProperty.call(I,O)&&(H[O]=I[O]);return H}).apply(this,arguments)};Object.create;Object.create},112:function(g,u){g.exports=
G},150:function(g,u){g.exports=w},151:function(g,u){g.exports=v},178:function(g,u){g.exports=r},18:function(g,u){g.exports=K},233:function(g,u){g.exports=f},239:function(g,u){g.exports=c},250:function(g,u){g.exports=a},274:function(g,u){g.exports=b},275:function(g,u){g.exports=p},276:function(g,u){g.exports=q},277:function(g,u){g.exports=t},278:function(g,u){g.exports=m},279:function(g,u){g.exports=n},280:function(g,u){g.exports=k},281:function(g,u){g.exports=l},282:function(g,u){g.exports=h},311:function(g,
u){g.exports=e},378:function(g,u){g.exports=d},600:function(g,u,x){function y(E){E.stopPropagation()}var B=x(0);g=x(18);var C=x(151),z=x(150),D=x(178);x=function(E){function A(){return null!==E&&E.apply(this,arguments)||this}return Object(B.d)(A,E),A.prototype.formatDate=function(F){return""+C.format(new Date(F),{selector:"date",formatLength:"short",locale:z.locale})},A.prototype.render=function(F){var H,I=this.props,L=I.active,J=I.classes,O=(I.handleShowItemDetails,I.item),P=I.iconUrl,fa=I.userUrl,
V=(I.portal,I.sortField);I=I.i18n;return H="numviews"===V?I.viewCount+": "+D.format(O.numViews):"avgrating"===V?I.rating+": "+O.avgRating.toFixed(2):"created"===V?I.created+": "+this.formatDate(O.created):I.updated+": "+this.formatDate(O.modified),F("header",{classes:J},F("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"","class":"card-mc__thumbnail",style:"\n                        background-image: url("+this.props.thumbURI+");\n                    "}),
F("div",{"class":"card-mc__title-container"},F("button",{id:"item-"+O.id+"-card-title","class":"card-mc__title",title:L?I.hideItem:I.viewItem,tabindex:"0"},O.title),F("div",{"class":"card-mc__author-row"},F("img",{src:P,"class":"content-search-item-icon",title:O.displayName}),F("span",{"class":"card-mc__author-text"},I.by,F("a",{"class":"content-search-selectable card-mc__author-link",title:this.props.organization?I.viewOrg:I.viewProfile,href:this.props.organization?this.props.organization.orgUrl:
fa,target:"_blank",onclick:y}," "+(this.props.organization?this.props.organization.name:O.owner)))),F("p",{"class":"card-mc__info"},H)))},A}(g.Component);u.a=x},601:function(g,u,x){g=x(378);var y=x.n(g);g=x(239);var B=x.n(g);g=x(250);var C=x.n(g);u.a=function(z,D){var E=z.selected,A=z.handleSelectionClick,F=z.handleIconActionClick,H=z.handleCustomActionClick,I=z.availableMiscActions,L=z.availableIconActions,J=z.loading,O=z.children,P=z.id,fa=z.hideEllipses,V=z.i18n,ba=null;z.disableMainAction||(ba=
J?D(C.a,null):D(B.a,{focusable:!0,handleClick:A,key:P+"-selection-btn",title:E?V.remove:V.add},D("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},D("g",{id:"16px",stroke:"none","stroke-width":"1"},D("g",null,D("g",null,D("polygon",E?{points:"3 7 12 7 12 8 3 8"}:{points:"12 7 7.999 7 8 3 7.001 3 7 7 2.999 7 2.999 8 7 8 6.999 12 7.998 12 7.999 8 12 8"}),D("path",{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"})))))));
E=L.map(function(ka){return D(B.a,{focusable:!0,handleClick:F,key:P+"-"+ka.text,title:ka.text,value:ka.value},D("div",{"class":"card-mc__custom-icon-container",innerHTML:ka.icon}))});return D("div",{id:"item-"+P+"-action-row","class":"content-search-item-action-row card-mc__action-row"},O,D("div",{key:"action-container","class":"card-mc__action-container"},D(B.a,{key:P+"-spacer"},D("svg",{height:"16px",width:"0px"})),ba,E,0<I.length&&!fa?D(y.a,{key:P+"-actions",options:I,onSelect:H,selectedOptionValue:void 0,
justify:"right"},D(B.a,{focusable:!1,key:P+"-action-btn",title:V.actions},D("svg",{role:"img",width:"16px",height:"16px",style:"transform: translate(0, -2px);"},D("g",{stroke:"none","stroke-width":"1"},D("g",null,D("path",{d:"M1,7 L3,7 L3,9 L1,9 L1,7 Z M7,7 L9,7 L9,9 L7,9 L7,7 Z M13,7 L15,7 L15,9 L13,9 L13,7 Z"})))))):null))}},863:function(g,u,x){x.r(u);var y=x(0),B=x(112);g=x(18);var C=x(600),z=x(601),D=x(274),E=x.n(D);D=x(275);var A=x.n(D);D=x(276);var F=x.n(D);D=x(277);var H=x.n(D);D=x(278);var I=
x.n(D);D=x(279);var L=x.n(D);D=x(280);var J=x.n(D);D=x(281);var O=x.n(D);D=x(311);var P=x.n(D);D=x(282);var fa=x.n(D);D=x(233);var V=x.n(D);x=function(ba){function ka(la){la=ba.call(this,la)||this;return la.handleShowItemDetails=la.handleShowItemDetails.bind(la),la.handleSelectionClick=la.handleSelectionClick.bind(la),la.handleCustomActionClick=la.handleCustomActionClick.bind(la),la.handleIconActionClick=la.handleIconActionClick.bind(la),la}return Object(y.d)(ka,ba),ka.prototype.render=function(la){var ma=
this,ha=!!this.props.selectedItems[this.props.item.id],Z=!!this.props.loadingItems[this.props.item.id],W=!(!this.props.activeItem||this.props.activeItem.id!==this.props.item.id),Q=this.props.customActions.filter(function(R){return R.allowed(ma.props.item)}).map(function(R){return{value:R.name,text:R.name,icon:R.icon}}),ia=Q.filter(function(R){return R.icon});Q=Q.filter(function(R){return!R.icon});return la("section",{key:this.props.item.id,classes:{"card-mc__container":!0,"card-mc__container--selected":ha,
"card-mc__container--active":W}},la("div",{classes:{"card-mc__fader":!0,"card-mc__fader--loading":Z},onclick:this.handleShowItemDetails},la(C.a,{active:W,classes:{"card-mc__header":!0,"card-mc__header--constrained":!!this.props.constrained},handleShowItemDetails:this.handleShowItemDetails,i18n:B,iconUrl:this.props.item.iconURI,item:this.props.item,key:"mini-card-header",portal:this.props.portal,sortField:this.props.sortField,thumbURI:this.props.item.thumbURI,userUrl:this.props.portal.baseUrl+"/home/user.html?user\x3d"+
this.props.item.owner,organization:this.props.organization}),la(z.a,{selected:ha,handleSelectionClick:this.handleSelectionClick,loading:Z,id:this.props.item.id,i18n:B,availableMiscActions:Q,availableIconActions:ia,handleIconActionClick:this.handleIconActionClick,handleCustomActionClick:this.handleCustomActionClick,disableMainAction:this.props.disableMainAction,hideEllipses:this.props.hideEllipses},la("div",{key:"badges"},this.renderBadges(la)))))},ka.prototype.renderBadges=function(la){var ma=this;
return this.props.item.badges.map(function(ha){switch(ha){case "authoritative":return la(E.a,{size:"small",altOrg:ma.props.organization?ma.props.organization.name:void 0});case "deprecated":return la(F.a,{size:"small"});case "collaboration":return la(A.a,{size:"small"});case "livingAtlas":return la(H.a,{size:"small"});case "marketplace":return la(I.a,{size:"small"});case "openData":return la(L.a,{size:"small"});case "premium":return la(J.a,{size:"small",user:ma.props.portal.user});case "subscriber":return la(O.a,
{size:"small",user:ma.props.portal.user});case "publicDataCollection":return la(fa.a,{size:"small"});case "solution":return la(P.a,{size:"small"});case "retiredStoryMap":return la(V.a,{size:"small",isRetiredStoryMap:!0});case "retiredApp":return la(V.a,{size:"small"})}return null})},ka.prototype.handleShowItemDetails=function(la){this.props.onShowItemDetails(this.props.item)},ka.prototype.handleSelectionClick=function(la){la.stopPropagation();this.props.onSelectionClick(this.props.item)},ka.prototype.handleIconActionClick=
function(la){la.stopPropagation();la.target.value&&this.props.onCustomActionClick(la.target.value,this.props.item)},ka.prototype.handleCustomActionClick=function(la){this.props.onCustomActionClick(la,this.props.item)},ka}(g.Component);u["default"]=x}})})},"arcgis-components/ItemCards/MiniCardRow/index":function(){define(["../../Component","dojo/i18n!../../ItemCards/nls/resources","../../Buttons/SvgButton","../../Loaders/LoaderIcon","../../Dropdowns/TextOptionDropdown"],function(K,G,w,v,r){return function(f){function c(b){if(a[b])return a[b].exports;
var p=a[b]={i:b,l:!1,exports:{}};return f[b].call(p.exports,p,p.exports,c),p.l=!0,p.exports}var a={};return c.m=f,c.c=a,c.d=function(b,p,q){c.o(b,p)||Object.defineProperty(b,p,{enumerable:!0,get:q})},c.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},c.t=function(b,p){if((1&p&&(b=c(b)),8&p)||4&p&&"object"==typeof b&&b&&b.__esModule)return b;var q=Object.create(null);if(c.r(q),
Object.defineProperty(q,"default",{enumerable:!0,value:b}),2&p&&"string"!=typeof b)for(var t in b)c.d(q,t,function(m){return b[m]}.bind(null,t));return q},c.n=function(b){var p=b&&b.__esModule?function(){return b["default"]}:function(){return b};return c.d(p,"a",p),p},c.o=function(b,p){return Object.prototype.hasOwnProperty.call(b,p)},c.p="",c(c.s=864)}({0:function(f,c,a){function b(h,e){function d(){this.constructor=h}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+
" is not a constructor or null");k(h,e);h.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}function p(h,e){var d={},g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&0>e.indexOf(g)&&(d[g]=h[g]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(g=Object.getOwnPropertySymbols(h);u<g.length;u++)0>e.indexOf(g[u])&&Object.prototype.propertyIsEnumerable.call(h,g[u])&&(d[g[u]]=h[g[u]])}return d}function q(h,e,d,g){var u,x=arguments.length,y=3>x?e:null===g?
g=Object.getOwnPropertyDescriptor(e,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(h,e,d,g);else for(var B=h.length-1;0<=B;B--)(u=h[B])&&(y=(3>x?u(y):3<x?u(e,d,y):u(e,d))||y);return 3<x&&y&&Object.defineProperty(e,d,y),y}function t(h,e,d,g){return new (d||(d=Promise))(function(u,x){function y(z){try{C(g.next(z))}catch(D){x(D)}}function B(z){try{C(g["throw"](z))}catch(D){x(D)}}function C(z){var D;z.done?u(z.value):(D=z.value,D instanceof d?D:new d(function(E){E(D)})).then(y,
B)}C((g=g.apply(h,e||[])).next())})}function m(h,e){function d(C){return function(z){return function(D){if(g)throw new TypeError("Generator is already executing.");for(;B;)try{if(g=1,u&&(x=2&D[0]?u["return"]:D[0]?u["throw"]||((x=u["return"])&&x.call(u),0):u.next)&&!(x=x.call(u,D[1])).done)return x;switch(u=0,x&&(D=[2&D[0],x.value]),D[0]){case 0:case 1:x=D;break;case 4:return B.label++,{value:D[1],done:!1};case 5:B.label++;u=D[1];D=[0];continue;case 7:D=B.ops.pop();B.trys.pop();continue;default:if(!(x=
B.trys,(x=0<x.length&&x[x.length-1])||6!==D[0]&&2!==D[0])){B=0;continue}if(3===D[0]&&(!x||D[1]>x[0]&&D[1]<x[3]))B.label=D[1];else if(6===D[0]&&B.label<x[1])B.label=x[1],x=D;else if(x&&B.label<x[2])B.label=x[2],B.ops.push(D);else{x[2]&&B.ops.pop();B.trys.pop();continue}}D=e.call(h,B)}catch(E){D=[6,E],u=0}finally{g=x=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([C,z])}}var g,u,x,y,B={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return y={next:d(0),"throw":d(1),
"return":d(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function n(h,e){for(var d=0,g=e.length,u=h.length;d<g;d++,u++)h[u]=e[d];return h}a.d(c,"d",function(){return b});a.d(c,"a",function(){return l});a.d(c,"f",function(){return p});a.d(c,"c",function(){return q});a.d(c,"b",function(){return t});a.d(c,"e",function(){return m});a.d(c,"g",function(){return n});var k=function(h,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=
g}||function(d,g){for(var u in g)Object.prototype.hasOwnProperty.call(g,u)&&(d[u]=g[u])})(h,e)},l=function(){return(l=Object.assign||function(h){for(var e,d=1,g=arguments.length;d<g;d++)for(var u in e=arguments[d])Object.prototype.hasOwnProperty.call(e,u)&&(h[u]=e[u]);return h}).apply(this,arguments)};Object.create;Object.create},112:function(f,c){f.exports=G},18:function(f,c){f.exports=K},239:function(f,c){f.exports=w},250:function(f,c){f.exports=v},378:function(f,c){f.exports=r},864:function(f,
c,a){a.r(c);var b=a(0),p=a(112);f=a(18);var q=a(378),t=a.n(q);q=a(239);var m=a.n(q);q=a(250);var n=a.n(q);a=function(k){function l(h){h=k.call(this,h)||this;return h.handleShowItemDetails=h.handleShowItemDetails.bind(h),h.handleSelectionClick=h.handleSelectionClick.bind(h),h.handleIconActionClick=h.handleIconActionClick.bind(h),h.handleCustomActionClick=h.handleCustomActionClick.bind(h),h}return Object(b.d)(l,k),l.prototype.render=function(h){var e,d=this,g=!!this.props.selectedItems[this.props.item.id],
u=!!this.props.loadingItems[this.props.item.id],x=this.props.activeItem&&this.props.activeItem.id===this.props.item.id,y=this.props.customActions.filter(function(C){return C.allowed(d.props.item)}).map(function(C){return{value:C.name,text:C.name,icon:C.icon}}),B=y.filter(function(C){return!!C.icon});y=y.filter(function(C){return!C.icon});this.props.disableMainAction||(e=u?h(n.a,null):h(m.a,{focusable:!0,handleClick:this.handleSelectionClick,key:this.props.item.id+"-selection-btn",title:g?p.remove:
p.add},h("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},h("g",{stroke:"none","stroke-width":"1"},g?h("g",{id:"minus-circled-1px-16"},h("g",null,h("polygon",{points:"3 7 12 7 12 8 3 8"}),h("path",{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"}))):h("g",{id:"plus-circled-1px-16"},h("g",null,
h("polygon",{points:"12 7 7.999 7 8 3 7.001 3 7 7 2.999 7 2.999 8 7 8 6.999 12 7.998 12 7.999 8 12 8"}),h("path",{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"})))))));u=B.map(function(C){return h(m.a,{focusable:!0,handleClick:d.handleIconActionClick,key:d.props.item.id+"-"+C.text,title:C.text,value:C.value},
h("div",{"class":"card-mcr__custom-icon-container",innerHTML:C.icon}))});return h("div",{key:this.props.item.id,classes:{"card-mcr__container":!0,"card-mcr__container--selected":g,"card-mcr__container--active":x},onclick:this.handleShowItemDetails},h("img",{src:this.props.item.iconURI,"class":"card-mcr__item-icon",title:this.props.item.displayName,alt:""}),h("button",{id:"item-"+this.props.item.id+"-card-title","class":"card-mcr__item-title",title:x?p.hideItem:p.viewItem,tabindex:"0"},this.props.item.title),
h("div",{"class":"card-mcr__spacer"}),h("div",{"class":"card-mcr__action-container"},e,u,0<y.length&&!this.props.hideEllipses?h(t.a,{key:this.props.item.id+"-actions",options:y,onSelect:this.handleCustomActionClick,selectedOptionValue:void 0,justify:"right"},h(m.a,{key:this.props.item.id+"-action-btn",focusable:!1,title:p.actions},h("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16",style:"transform: translate(0, -2px);"},h("g",{stroke:"none","stroke-width":"1"},h("g",{id:"ellipses-1px-16"},
h("path",{d:"M1,7 L3,7 L3,9 L1,9 L1,7 Z M7,7 L9,7 L9,9 L7,9 L7,7 Z M13,7 L15,7 L15,9 L13,9 L13,7 Z"})))))):null))},l.prototype.handleShowItemDetails=function(h){this.props.onShowItemDetails(this.props.item)},l.prototype.handleSelectionClick=function(h){h.stopPropagation();this.props.onSelectionClick(this.props.item)},l.prototype.handleIconActionClick=function(h){h.stopPropagation();h.target.value&&this.props.onCustomActionClick(h.target.value,this.props.item)},l.prototype.handleCustomActionClick=
function(h){this.props.onCustomActionClick(h,this.props.item)},l}(f.Component);c["default"]=a}})})},"arcgisonline/map/core/sameTilingScheme":function(){define([],function(){return function(K,G){for(var w=!1,v=!1,r=0;r<K.lods.length;r++){var f=K.lods[r].scale;K.dpi!==G.dpi&&(f=K.lods[r].scale/K.dpi);for(var c=0;c<G.lods.length;c++){var a=G.lods[c].scale;K.dpi!==G.dpi&&(a=G.lods[c].scale/G.dpi);if(.01>Math.abs(a-f)/a)if(w){v=!0;break}else w=!0;if(a<f)break}if(v)break}return v||w&&(1===K.lods.length||
1===G.lods.length)?!0:!1}})},"arcgisonline/pages/dijit/ReplaceLayer/ReplaceSceneLayer":function(){define("require exports tslib dojo/text!../ReplaceLayer/templates/ReplaceSceneLayer.html dojo/i18n!../../../nls/arcgisonline dojo/string ../../utils/dom ../../../sharing/util arcgisonline/tsutils/declareDecorator arcgisonline/map/core/sameSpatialReference arcgisonline/map/layer/getServiceInfo ./ReplaceLayer dojo/Deferred arcgisonline/esriGeowConfig".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=
w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.overlayContents=f["default"].substitute(v["default"],{i18n:this.i18n,icons:this.icons})}k.prototype.initUI=function(){var l,h;this.inherited(arguments);this.layerType=null!==(h=null===(l=this.item.serviceInfo.layers)||
void 0===l?void 0:l[0].layerType)&&void 0!==h?h:this.item.serviceInfo.layerType;this._showPreviewStylesTab=!1;c["default"].hideNodes(this._shownPreviewStylesContent)};k.prototype.createItemBrowser=function(){var l=this;this._itemBrowserConfig={settings:{config:{layoutMode:"adjustable",dialogTitle:r["default"].replaceLayer.selectReplacementLayer,mainActionTitle:r["default"].replaceLayer.select,usePrimaryButtonStyle:!1,enableMapAreaFilter:!1,onSelect:this.handleSelectItem.bind(this),baseSections:["myContent",
"myFavorites","myGroups","myOrganization"],allowedItemTypes:[this.type],singleItemSelect:!0,onBack:this.closeItemBrowser.bind(this),addQueryParameters:function(){return(l.isCacheContent?'typekeywords:"ExtractedCache" -':"")+'typekeywords:"Hosted Service" NOT id:'+l.item.id},showSubResources:{}}},parameters:{section:"myContent",sort:{field:"modified",order:"desc"}}};this.inherited(arguments)};k.prototype.checkLayerCompatibility=function(){var l=this,h=new m["default"];if(this.isTile)this.inherited(arguments).then(function(){h.resolve()},
function(u){l.handleLayerSelectionError(u)});else{var e=this.isCacheContent,d=r["default"].replaceLayer.error,g=!0;q["default"](this._selectedReplacementItem.url,null,function(u){l._selectedReplacementItem.getRelatedItems(e?"DataStore2ByRefService":"Service2Service","reverse").then(function(x){var y;if(null===(y=l.item.serviceInfo.layers)||void 0===y?0:y[0]){y=p["default"](l.item.serviceInfo.layers[0].spatialReference,u.layers[0].spatialReference);var B=l.layerType===u.layers[0].layerType;x=0>=x.length;
e||x?y||B?y?e||B?g=!1:d=r["default"].replaceLayer.replaceSceneLayer.layerTypeError:d=r["default"].replaceLayer.differentCoordinateSystem:d=r["default"].replaceLayer.replaceSceneLayer.spatialLayerCombinedError:d=r["default"].replaceLayer.replaceSceneLayer.sceneLayerPackageError;g?h.reject(Error(d)):h.resolve()}else h.resolve()})},function(u){l.handleLayerSelectionError(u)})}return h};k.prototype.checkForCompatibleStyles=function(l){l=this._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.contains("hide");
c["default"].showNode(this._checkStylesSuccess);c["default"].hideNodes(this._checkStylesWarnings);c["default"].hideNode(this._checkStyles);this._primaryBtn.disabled=!1;l&&this._primaryBtn.focus()};k.prototype.handleHelp=function(){var l;window.open(""+n["default"].self.helpBase+((null===(l=n["default"].self.helpMap)||void 0===l?void 0:l.m["120001916"])||""))};k.prototype.replaceLayer=function(){var l={toReplaceItemId:this.item.id,replacementItemId:this._selectedReplacementItem.id,replacedServiceName:this.replaceSpacesWithUnderscore(this._archiveName),
replaceMetadata:this._replaceItemInformation,createNewItem:!0,f:"json"};return a["default"].request({url:this.portal.portalUrl+"content/users/"+this.portal.user.username+"/replaceService",content:l},{usePost:!0})};return k=w.__decorate([b["default"](t["default"])],k)}()})},"arcgisonline/sharing/dijit/dialog/OverwriteFromCloud":function(){define("require exports tslib esri/Evented dojo/query dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/Deferred ../../../tsutils/declareDecorator dojo/i18n!../../../nls/arcgisonline dijit/_WidgetsInTemplateMixin dojo/_base/lang esri/lang arcgisonline/pages/portal/cloudProvider/BoxConnect arcgisonline/pages/portal/cloudProvider/DropBoxConnect arcgisonline/pages/portal/cloudProvider/GoogleConnect arcgisonline/pages/portal/cloudProvider/OneDriveConnect ../../../sharing/dijit/dialog/ConfirmDialog ./_CreateItemUtilMixin dojo/text!arcgisonline/sharing/dijit/dialog/templates/OverwriteFromCloud.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);return function(){function x(){this.templateString=
u["default"]}x.prototype.postMixInProperties=function(){this.inherited(arguments);m["default"].mixin(this,{isBatch:this.items&&1<this.items.length});this.i18n=m["default"].mixin({},q["default"])};x.prototype.startup=function(y,B,C){var z;this.inherited(arguments);this.portal=y;this.cloudProviderInfo=B;this.originalItemToOverwrite=C;this.addItem=null;this.currentCloudProvider="";this.cloudConnect={googleConnect:null,dropBoxConnect:null,oneDriveConnect:null,boxConnect:null,none:null};this.cloudDriveText=
"";this.publishInfo=null;switch(null===(z=this.cloudProviderInfo)||void 0===z?void 0:z.cloudProvider){case "boxConnect":this.currentCloudProvider="boxConnect";this.cloudConnect[this.currentCloudProvider]=new k["default"];this.cloudDriveText="Box";break;case "dropBoxConnect":this.currentCloudProvider="dropBoxConnect";this.cloudConnect[this.currentCloudProvider]=new l["default"];this.cloudDriveText="Dropbox";break;case "oneDriveConnect":this.currentCloudProvider="oneDriveConnect";this.cloudConnect[this.currentCloudProvider]=
new e["default"];this.cloudDriveText="OneDrive";break;case "googleConnect":this.currentCloudProvider="googleConnect";this.cloudConnect[this.currentCloudProvider]=new h["default"];this.cloudDriveText="Google Drive";break;default:this.currentCloudProvider="none",this.cloudDriveText=q["default"].overwriteFromGeoJSON.sourceGeoJSON}return this.initUI()};x.prototype.showModal=function(){var y=this,B=new b["default"],C=q["default"].overwriteFromCloudDlg.overwriteCloudButton+this.cloudDriveText;"none"===
this.currentCloudProvider&&(C=q["default"].updateItemDlg.updateFeatures);this.dlg=new d["default"]({title:q["default"].overwriteFromCloudDlg.originalDialogTitle+this.cloudDriveText,style:{width:"500px",height:"auto"},buttonOkLabel:C});C="";var z=this.cloudProviderInfo.mimeType;switch(z){case "google-apps":case "googlesheets":C=q["default"].overwriteFromCloudDlg.cloudFileTypeGoogleSheets;this.cloudProviderInfo.mimeType="googlesheets";break;case "csv":C=q["default"].overwriteFromCloudDlg.cloudFileTypeCsv;
break;case "excel":case "spreadsheetml":C=q["default"].overwriteFromCloudDlg.cloudFileTypeExcel;break;case "shapeFile":C=q["default"].overwriteFromCloudDlg.cloudFileTypeShapefile;break;case "fgdb":C=q["default"].overwriteFromCloudDlg.cloudFileTypeFgdb;break;case "geojson":C=q["default"].overwriteFromCloudDlg.cloudFileTypeGeoJson;break;default:C=q["default"].overwriteFromCloudDlg.cloudFileTypeExcel}"none"===this.currentCloudProvider&&z.includes("geojson")?(C=n["default"].substitute({title:this.originalItemToOverwrite.title},
q["default"].overwriteFromGeoJSON.description),r["default"](".overwriteInfoNote",this.domNode).addClass("hide")):C=n["default"].substitute({title:this.originalItemToOverwrite.title,fileType:C,cloudDrive:this.cloudDriveText},q["default"].overwriteFromCloudDlg.overwriteInfoText);r["default"](".overwriteInfoText",this.domNode).attr("innerHTML",C);this.dlg.setContent(this.domNode);this.dlg.show();this.own(f["default"](this.dlg,"ok",function(){y.set("readOnly",!0);var D="";y.loaderHelper(!0,q["default"].overwriteFromCloudDlg.defaultLoading);
"none"!==y.currentCloudProvider?(y.cloudConnect[y.currentCloudProvider].GetTokenViaOauth("https://"+y.portal.portalHostname).then(function(E){D="googleConnect"===y.cloudProviderInfo.cloudProvider?["google-apps","googlesheets"].includes(z)?"https://www.googleapis.com/drive/v3/files/"+y.cloudProviderInfo.id+'/export?mimeType\x3dapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+E+'"}':"https://www.googleapis.com/drive/v3/files/"+y.cloudProviderInfo.id+
'?alt\x3dmedia\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+E+'"}':"dropBoxConnect"===y.cloudProviderInfo.cloudProvider?'https://content.dropboxapi.com/2/files/download?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+E+'","Dropbox-API-Arg":"{\\"path\\":\\"'+y.cloudProviderInfo.id+'\\"}"}':"oneDriveConnect"===y.cloudProviderInfo.cloudProvider?"https://graph.microsoft.com/v1.0/me/drive/items/"+y.cloudProviderInfo.id+'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+E+'"}':"https://api.box.com/2.0/files/"+
y.cloudProviderInfo.id+'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+E+'"}';y.overwriteItem(D)}),function(E){"popupBlocked"===E?y.showError(q["default"].overwriteFromCloudDlg.errors.popupIssue):"InvalidToken"===E||"windowClosed"===E?y.loaderHelper(!1,null):y.showError(E)}):y.overwriteItem(y.cloudProviderInfo.url)}));f["default"](this.dlg,"cancel",function(){y.set("readOnly",!0);y.onCancel()});return B};x.prototype.onCancel=function(){this.dlg&&this.dlg.destroyRecursive()};x.prototype.overwriteItem=
function(y){var B=this;this.loaderHelper(!0,q["default"].overwriteFromCloudDlg.addingItem);this.addExternalItem(y,this.originalItemToOverwrite.title,this.cloudProviderInfo.mimeType).then(function(){B.publishInfo={itemId:B.addItem.id,filetype:B.getNameForMimeType(B.cloudProviderInfo.mimeType,"publish")};B.getPublishParametersForOverwrite().then(function(C){B.publishInfo.item=B.addItem;B.publishInfo.publishParameters=C;B.publishInfo.overwrite=!0;B.publishInfo.deleteSourceItemUponCompletion=!0;B.loaderHelper(!0,
q["default"].overwriteFromCloudDlg.overwriting);B.publishExternalItem().then(function(z){B.updateTypeKeyword(z).then(function(){window.location.href="item.html?id\x3d"+z[0].serviceItemId+"\x26jobid\x3d"+z[0].jobId})})})});(function(C){B.showError(q["default"].overwriteFromCloudDlg.errors.addItemCheckStatusIssue,!0)})};x.prototype.initUI=function(){return new b["default"]};x.prototype.addExternalItem=function(y,B,C){var z=this,D=new b["default"];y={dataUrl:y,async:!0,type:this.getNameForMimeType(C,
"addItemType"),typeKeywords:this.getNameForMimeType(C,"addItemKeywords"),Title:B,filename:B};var E=this.portal;g["default"].addItem(y,this.originalItemToOverwrite.folderId,E).then(function(A){z.addItem=A;g["default"].checkStatus(z.addItem,D,null,E,function(F){D.resolve(F)})});(function(A){z.showError(A);D.reject(A)});return D};x.prototype.getPublishParametersForOverwrite=function(){var y=this,B=new b["default"];g["default"].getPublishParametersForOverwrite(this.originalItemToOverwrite,this.getNameForMimeType(this.cloudProviderInfo.mimeType,
"addItem")).then(function(C){B.resolve(C)});(function(C){y.showError(C);B.reject(C)});return B};x.prototype.publishExternalItem=function(){var y=this,B=new b["default"];g["default"].publishItem(this.publishInfo.item,this.publishInfo,this.portal).then(function(C){B.resolve(C.publishResult)});(function(C){y.showError(C);B.reject(C)});return B};x.prototype.getNameForMimeType=function(y,B){var C="";return C=-1!==B.indexOf("addItem")?-1!==y.indexOf("csv")?"CSV":-1!==y.indexOf("excel")?"Microsoft Excel":
-1!==y.indexOf("shapeFile")?"Shapefile":-1!==y.indexOf("fgdb")?"File Geodatabase":-1!==y.indexOf("geojson")?"GeoJson":-1!==y.indexOf("sheets")?"Microsoft Excel":"CSV":-1!==y.indexOf("csv")?"csv":-1!==y.indexOf("excel")?"excel":-1!==y.indexOf("shapeFile")?"shapefile":-1!==y.indexOf("fgdb")?"fileGeodatabase":-1!==y.indexOf("geojson")?"geojson":-1!==y.indexOf("sheets")?"excel":"csv"};x.prototype.updateTypeKeyword=function(y){var B=this,C=new b["default"],z=this.portal,D=this.originalItemToOverwrite.folderId,
E="Cloud Drive",A=JSON.parse(this.publishInfo.publishParameters);if("address"===A.locationType||A.layers[0]&&"address"===A.layers[0].locationType)E+=",showUnmatchedAddresses,Involved Lookup";else if("none"===A.locationType||A.layers[0]&&"none"===A.layers[0].locationType)E+=",Table";g["default"].updateItem({folderId:D,id:y[0].serviceItemId,typeKeywords:E},z).then(function(){C.resolve()});(function(F){B.showError(F);C.reject(F)});return C};x.prototype.showError=function(y,B){var C=this,z=m["default"].mixin(m["default"].mixin({},
q["default"].overwriteFromCloudDlg.errors.error),y);this._errorDlg=new d["default"]({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(z).then(function(){C.set("readOnly",!1);C._errorDlg.hide()});B||null!=this.addItem&&g["default"].deleteItem(this.addItem,this.portal);this.loaderHelper(!1,null);return!1};x.prototype.loaderHelper=function(y,B){var C=B?B:"Loading...";!0===y?(this.showHideDiv(".loader",!0),r["default"](".loader-text",this.domNode).attr("innerHTML",C),r["default"](".overwriteDialog",
this.domNode).style("opacity","0.5"),r["default"](".overwriteDialog",this.domNode).style("pointer-events","none"),this.dlg.okButton.set("disabled",!0),this.dlg.cancelButton.set("disabled",!0)):(r["default"](".loader-text",this.domNode).attr("innerHTML",C),this.showHideDiv(".loader",!1),r["default"](".overwriteDialog",this.domNode).style("opacity","1"),r["default"](".overwriteDialog",this.domNode).style("pointer-events","auto"),this.dlg.okButton.set("disabled",!1),this.dlg.cancelButton.set("disabled",
!1))};x.prototype.showHideDiv=function(y,B){!0===B?r["default"](y).removeClass("hide"):r["default"](y).addClass("hide")};return x=w.__decorate([p["default"](a["default"],c["default"],t["default"],v["default"])],x)}()})},"arcgisonline/pages/portal/cloudProvider/BoxConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),function(K,G,w,v,r,f,c,a){v=w.__importDefault(v);r=w.__importDefault(r);
f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);return function(){function b(p){this.boxToken="";this.allPages=[]}b.prototype.postscript=function(){};b.prototype.GetTokenViaOauth=function(p){var q=this,t=new c["default"],m=p+"/home/cloudDriveOauth-callback2.html";this._oauthSignIn("https://account.box.com/api/oauth2/authorize?redirect_uri\x3d"+m+"\x26response_type\x3dcode\x26client_id\x3d"+v["default"].boxClientId+"\x26locale\x3d"+a["default"].locale,p).then(function(n){q._getTokenValue(n,
"code").then(function(k){q._makeExternalRequests("POST","https://api.box.com/oauth2/token","grant_type\x3dauthorization_code\x26code\x3d"+k+"\x26client_id\x3d"+v["default"].boxClientId+"\x26client_secret\x3d"+v["default"].boxClientSecret+"\x26redirect_uri\x3d"+m).then(function(l){q.boxToken=l.access_token;t.resolve(l.access_token)},function(l){t.reject(l)})})},function(n){t.reject(n)});return t};b.prototype.GetAllFiles=function(p){var q=this,t=new c["default"],m=null===p||void 0===p?void 0:p.searchText,
n=null===p||void 0===p?void 0:p.dropdownFilter;p=null===p||void 0===p?void 0:p.previousOrNext;var k="Bearer "+this.boxToken;p||(this.allPages=[]);var l="https://api.box.com/2.0/search?fields\x3did,name\x26type\x3dfile\x26limit\x3d10";l=m?l+("\x26query\x3d"+m):l+"\x26query\x3dcsv xls";l="all"!==n&&n?"csv"===n?l+"\x26file_extensions\x3dcsv":"excel"===n?l+"\x26file_extensions\x3dxls,xlsx":l+"\x26file_extensions\x3dcsv,xls,xlsx":l+"\x26file_extensions\x3dcsv,xls,xlsx";p&&"next"===p&&(l+="\x26offset\x3d"+
this.allPages[this.allPages.length-1].NextToken);p&&"previous"===p&&2<=this.allPages.length&&(this.allPages.pop(),1<this.allPages.length&&(l+="\x26offset\x3d"+this.allPages[this.allPages.length-2].NextToken),this.allPages.pop());this._makeExternalRequests("GET",l,null,k,"application/json").then(function(h){var e={files:[],next:h.total_count>h.limit+h.offset?!0:!1,previous:1<=q.allPages.length?!0:!1};q.allPages.push({Next:e.next,Previous:e.previous,NextToken:h.total_count>h.limit+h.offset?h.limit+
h.offset:!1});for(var d=0;d<h.entries.length;d++){var g=h.entries[d];e.files.push({id:g.id,name:g.name,mimeType:-1!==g.name.indexOf("csv")?"csv":"excel",downloadUrl:"https://api.box.com/2.0/files/"+g.id+'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+q.boxToken+'"}'})}t.resolve(e)},function(h){t.reject(h)});return t};return b=w.__decorate([f["default"](r["default"])],b)}()})},"arcgisonline/pages/portal/cloudProvider/CommonCloudProvider":function(){define("require exports tslib ../../../tsutils/declareDecorator dojo/Deferred dojo/Stateful".split(" "),
function(K,G,w,v,r,f){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);return function(){function c(a){}c.prototype.postscript=function(){};c.prototype._oauthSignIn=function(a,b){var p=new r["default"],q=b+"/home/cloudDriveOauth-callback.html?cloudUrl\x3d"+(a+"\x26currentSourceUrl\x3d"+(window.location.protocol+"//"+window.location.hostname)+"\x26portalHostName\x3d"+b),t=document.createElement("iframe");t.src=q;t.className="hide";document.body.appendChild(t);q=window.addEventListener?
"addEventListener":"attachEvent";(0,window[q])("attachEvent"===q?"onmessage":"message",function(m){m.origin===b&&("popupBlocked"!==m.data&&"windowClosed"!==m.data||p.reject(m.data),p.resolve(m.data))},!1);return p};c.prototype._getTokenValue=function(a,b){var p=new r["default"];b=b.replace(/[[]/,"[").replace(/[]]/,"]");var q=(new RegExp("[?\x26#]"+b+"\x3d([^\x26#]*)")).exec(a);null==q?p.reject("InvalidToken"):p.resolve(q[1]);return p};c.prototype._makeExternalRequests=function(a,b,p,q,t){var m=new r["default"],
n=new XMLHttpRequest;n.open(a,b,!1);q&&n.setRequestHeader("Authorization",q);t&&n.setRequestHeader("Content-type",t);p?n.send(p):n.send();a=JSON.parse(n.responseText);400<=n.status&&m.reject(JSON.parse(n.responseText));m.resolve(a);return m};return c=w.__decorate([v["default"](f["default"])],c)}()})},"arcgisonline/pages/portal/cloudProvider/DropBoxConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),
function(K,G,w,v,r,f,c,a){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);return function(){function b(p){this.dropBoxToken="";this.allPages=[]}b.prototype.postscript=function(){};b.prototype.GetTokenViaOauth=function(p){var q=this,t=new c["default"],m="dropbox"+Math.floor(Date.now()/1E3);this._oauthSignIn("https://www.dropbox.com/oauth2/authorize?redirect_uri\x3d"+(p+"/home/cloudDriveOauth-callback2.html\x26response_type\x3dtoken\x26client_id\x3d")+
v["default"].dropboxClientId+"\x26locale\x3d"+a["default"].locale+"\x26state\x3d"+m,p).then(function(n){q._getTokenValue(n,"state").then(function(k){m!==k&&t.reject("invalidState");q._getTokenValue(n,"access_token").then(function(l){q.dropBoxToken=l;t.resolve(l)},function(l){t.reject(l)})})},function(n){t.reject(n)});return t};b.prototype.GetAllFiles=function(p){var q=this,t=new c["default"],m=null===p||void 0===p?void 0:p.searchText,n=null===p||void 0===p?void 0:p.dropdownFilter,k=null===p||void 0===
p?void 0:p.previousOrNext;p="Bearer "+this.dropBoxToken;k||(this.allPages=[]);var l="";m=m?" "+m:"";var h=0;k&&"next"===k&&(h=this.allPages[this.allPages.length-1].NextToken);k&&"previous"===k&&2<=this.allPages.length&&(this.allPages.pop(),1<this.allPages.length&&(h=this.allPages[this.allPages.length-2].NextToken),this.allPages.pop());k="";"csv"===n?(k='{"path":"","query":"'+m+' csv","mode": "filename_and_content","max_results":10,"start":'+h+"}",l="csv"):"excel"===n?(k='{"path":"","query":"'+m+' xls","mode": "filename_and_content","max_results":10,"start":'+
h+"}",l="excel"):"shapeFile"===n?(k='{"path":"","query":"'+m+' .zip","mode": "filename_and_content","max_results":10,"start":'+h+"}",l="shapeFile"):"fgdb"===n?(k='{"path":"","query":"'+m+' .zip","mode": "filename_and_content","max_results":10,"start":'+h+"}",l="fgdb"):"geoJson"===n?(k='{"path":"","query":"'+m+' .geojson","mode": "filename_and_content","max_results":10,"start":'+h+"}",l="geojson"):(k='{"path":"","query":"'+m+' csv","mode": "filename_and_content","max_results":10,"start":'+h+"}",l=
"csv");this._makeExternalRequests("POST","https://api.dropboxapi.com/2/files/search",k,p,"application/json").then(function(e){var d={files:[],next:e.more?!0:!1,previous:1<=q.allPages.length?!0:!1};q.allPages.push({Next:d.next,Previous:d.previous,NextToken:e.more?e.start:null});for(var g=0;g<e.matches.length;g++){var u=e.matches[g];"file"===u.metadata[".tag"]&&d.files.push({id:u.metadata.id,name:u.metadata.name,mimeType:l,downloadUrl:'https://content.dropboxapi.com/2/files/download?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+
q.dropBoxToken+'","Dropbox-API-Arg":"{\\"path\\":\\"'+u.metadata.id+'\\"}"}'})}t.resolve(d)},function(e){t.reject(e)});return t};return b=w.__decorate([f["default"](r["default"])],b)}()})},"arcgisonline/pages/portal/cloudProvider/GoogleConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),function(K,G,w,v,r,f,c,a){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);
c=w.__importDefault(c);a=w.__importDefault(a);return function(){function b(p){this.googleToken="";this.allPages=[]}b.prototype.postscript=function(){};b.prototype.GetTokenViaOauth=function(p){var q=this,t=new c["default"],m="google"+Math.floor(Date.now()/1E3);this._oauthSignIn("https://accounts.google.com/o/oauth2/v2/auth?scope\x3dhttps://www.googleapis.com/auth/drive.readonly\x26redirect_uri\x3d"+(p+"/home/cloudDriveOauth-callback2.html\x26response_type\x3dtoken\x26client_id\x3d")+v["default"].googleClientId+
"\x26hl\x3d"+a["default"].locale+"\x26state\x3d"+m,p).then(function(n){q._getTokenValue(n,"state").then(function(k){m!==k&&t.reject("invalidState");q._getTokenValue(n,"access_token").then(function(l){q.googleToken=l;t.resolve(l)},function(l){t.reject(l)})})},function(n){t.reject(n)});return t};b.prototype.GetAllFiles=function(p){var q=this,t=new c["default"],m=null===p||void 0===p?void 0:p.searchText,n=null===p||void 0===p?void 0:p.dropdownFilter;p=null===p||void 0===p?void 0:p.previousOrNext;p||
(this.allPages=[]);var k="",l="https://www.googleapis.com/drive/v3/files?access_token\x3d"+this.googleToken+"\x26pageSize\x3d10\x26q\x3d";m&&(l+="name contains '"+m+"'and");"csv"===n?(l+='(mimeType\x3d"text/csv")',k="csv"):"excel"===n?(l+='(mimeType\x3d"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"ormimeType\x3d"application/vnd.ms-excel")',k="excel"):"shapeFile"===n?(l+='(mimeType\x3d"application/x-zip-compressed"ormimeType\x3d"application/zip")',k="shapeFile"):"fgdb"===n?(l+=
'(mimeType\x3d"application/x-zip-compressed"ormimeType\x3d"application/zip")',k="fgdb"):"geoJson"===n?(l+='(name contains "json" or name contains "geojson")and(mimeType\x3d"application/octet-stream"ormimeType\x3d"application/json")',k="geojson"):"sheets"===n?(l+='(mimeType\x3d"application/vnd.google-apps.spreadsheet")',k="googlesheets"):(l+='(mimeType\x3d"text/csv")',k="csv");p&&"next"===p&&(l+="\x26pageToken\x3d"+this.allPages[this.allPages.length-1].NextToken);p&&"previous"===p&&2<=this.allPages.length&&
(this.allPages.pop(),1<this.allPages.length&&(l+="\x26pageToken\x3d"+this.allPages[this.allPages.length-2].NextToken),this.allPages.pop());this._makeExternalRequests("GET",l,null,null,"application/json").then(function(h){var e={files:[],next:h.nextPageToken?!0:!1,previous:1<=q.allPages.length?!0:!1};q.allPages.push({Next:e.next,Previous:e.previous,NextToken:h.nextPageToken?h.nextPageToken:null});for(var d=0;d<h.files.length;d++){var g=h.files[d];e.files.push({id:g.id,name:g.name,mimeType:k,downloadUrl:-1!==
g.mimeType.indexOf("google-apps")?"https://www.googleapis.com/drive/v3/files/"+g.id+'/export?mimeType\x3dapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+q.googleToken+'"}':"https://www.googleapis.com/drive/v3/files/"+g.id+'?alt\x3dmedia\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+q.googleToken+'"}'})}t.resolve(e)},function(h){t.reject(h)});return t};return b=w.__decorate([f["default"](r["default"])],b)}()})},"arcgisonline/pages/portal/cloudProvider/OneDriveConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),
function(K,G,w,v,r,f,c,a){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);return function(){function b(p){this.oneDriveToken="";this.allPages=[]}b.prototype.postscript=function(){};b.prototype.GetTokenViaOauth=function(p){var q=this,t=new c["default"],m="onedrive"+Math.floor(Date.now()/1E3);this._oauthSignIn("https://login.microsoftonline.com/common/oauth2/v2.0/authorize?scope\x3dfiles.read\x26redirect_uri\x3d"+(p+"/home/cloudDriveOauth-callback2.html\x26response_type\x3dtoken\x26client_id\x3d")+
v["default"].oneDriveClientId+"\x26locale\x3d"+a["default"].locale+"\x26state\x3d"+m,p).then(function(n){q._getTokenValue(n,"state").then(function(k){m!==k&&t.reject("invalidState");q._getTokenValue(n,"access_token").then(function(l){q.oneDriveToken=l;t.resolve(l)},function(l){t.reject(l)})})},function(n){t.reject(n)});return t};b.prototype.GetAllFiles=function(p){var q=this,t=new c["default"],m=null===p||void 0===p?void 0:p.searchText,n=null===p||void 0===p?void 0:p.dropdownFilter;p=null===p||void 0===
p?void 0:p.previousOrNext;var k="Bearer "+this.oneDriveToken;p||(this.allPages=[]);var l="",h="https://graph.microsoft.com/v1.0/me/drive/root/search(q\x3d'";m&&(h+=m+" ");"csv"===n?(h+=".csv",l="csv"):"excel"===n?(h+=".xls",l="excel"):"shapeFile"===n?(h+=".zip",l="shapeFile"):"fgdb"===n?(h+=".zip",l="fgdb"):"geoJson"===n?(h+=".geojson .json",l="geojson"):(h+=".csv",l="csv");h+="')?select\x3dname,id,file\x26top\x3d10";p&&"next"===p&&(h+="\x26$skiptoken\x3d"+this.allPages[this.allPages.length-1].NextToken);
p&&"previous"===p&&2<=this.allPages.length&&(this.allPages.pop(),1<this.allPages.length&&(h+="\x26$skiptoken\x3d"+this.allPages[this.allPages.length-2].NextToken),this.allPages.pop());this._makeExternalRequests("GET",h,null,k,"application/json").then(function(e){var d={files:[],next:e["@odata.nextLink"]?!0:!1,previous:1<=q.allPages.length?!0:!1},g={Next:d.next,Previous:d.previous,NextToken:e["@odata.nextLink"]?q._getNextTokenFromUrl(e["@odata.nextLink"],"skiptoken"):null};q.allPages.push(g);for(g=
0;g<e.value.length;g++){var u=e.value[g];u.file&&("fgdb"!==l&&"shapeFile"!==l||"application/zip"===u.file.mimeType)&&d.files.push({id:u.id,name:u.name,mimeType:l,downloadUrl:"https://graph.microsoft.com/v1.0/me/drive/items/"+u.id+'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'+q.oneDriveToken+'"}'})}t.resolve(d)},function(e){t.reject(e)});return t};b.prototype._getNextTokenFromUrl=function(p,q){q=q.replace(/[[]/,"[").replace(/[]]/,"]");var t=(new RegExp("[?\x26#$]"+q+"\x3d([^\x26#]*)")).exec(p);
return null===t?"":t[1]};return b=w.__decorate([f["default"](r["default"])],b)}()})},"arcgisonline/pages/item/widgets/_metadata":function(){define("require exports tslib dojo/_base/lang dojo/Deferred esri/lang dojo/topic ../../../esriGeowConfig ../../../sharing/util ../../utils/arrays ../../statusUtil dojo/i18n!../../../nls/arcgisonline arcgisonline/pages/utils/metadata".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);
a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);return{_isLoading:!1,_gxeContext:null,_editor:null,_gxeAdaptor:null,_portalItemContext:null,_portalItemAdaptor:null,_formats:{formatDefault:"default",formatArcGIS:"arcgis",formatFGDC:"fgdc",formatINSPIRE:"inspire",formatISO19139:"iso19139",formatISO1913932:"iso19139-3.2",formatISO19115:"iso19115"},configureGeocoders:function(n,k){for(var l=n?v["default"].clone(n):[],h=0;h<l.length;h++){var e=
l[h];if(b["default"].isEsriWorldGeocoder(e)){e.suggest=!0;e.name=t["default"].common.esriWorldGeocoder;e.singleLineFieldName="SingleLine";f["default"].isDefined(e.placefinding)||(e.placefinding=!0);f["default"].isDefined(e.batch)||(e.batch=!0);break}}l=l.filter(function(d){return(null===d||void 0===d?void 0:d.placefinding)&&(null===d||void 0===d?void 0:d.singleLineFieldName)});0<l.length&&(k.arcgisGeocoder=!1,k.geocoders=l)},openLayerEditor:function(n,k){var l=this,h,e,d=new r["default"],g=b["default"].getToken(),
u=a["default"].self,x=0<(null===(h=u.metadataFormats)||void 0===h?void 0:h.length)?v["default"].clone(u.metadataFormats):null,y=(null===(e=u.helperServices)||void 0===e?0:e.geocode)?v["default"].clone(u.helperServices.geocode):[],B=p["default"].find(n.layers||[],function(C){return C.id.toString()===k.toString()});if(null===B||void 0===B?0:B.layerMetadataUrl)B.rawMetadataUrl=B.layerMetadataUrl.split("?")[0];else if(null===B||void 0===B?0:B.url)B.rawMetadataUrl=B.url.split("?")[0]+"/metadata";this._isLoading?
d.reject():(this._isLoading=!0,window.require(["arcgisonline/metadata"],function(){window.require(["esri/dijit/metadata/context/GxeContext","esri/dijit/metadata/context/GxeAdaptor","esri/dijit/metadata/editor/EditorDialog","esri/dijit/metadata/editor/Editor","dojo/domReady!"],function(C,z,D){var E=t["default"].itemProperties.metadataISO1913932,A={allowSaveAndClose:!1,allowViewHtml:!0,allowedTypeKeys:["arcgis"],arcgisMode:!0,defaultArcGISStyle:null,basemapUrl:null,basemap:null,getOriginalXml:void 0},
F={getAllowDeleteMetadata:function(){return!0},getAllowEditMetadata:function(){return!0},getOriginalXml:void 0,deleteMetadata:function(){var I=new r["default"];b["default"].request({url:B.rawMetadataUrl+"/update/",content:{metadata:"",metadataUploadFormat:"xml"}},{usePost:!0}).then(function(L){(null===L||void 0===L?0:L.statusUrl)?q["default"].checkAsyncJobStatus(L.statusUrl).then(function(){c["default"].publish("metadata/layerEditor/updated",{deleted:!0});I.resolve()},function(){c["default"].publish("metadata/layerEditor/updated",
{deleted:!0});I.resolve()}):(I.resolve(),c["default"].publish("metadata/layerEditor/updated",{deleted:!0}))},function(L){return I.resolve()});return I},saveXml:function(I,L){var J=new r["default"];b["default"].request({url:B.rawMetadataUrl+"/update/",content:{metadata:L,metadataUploadFormat:"xml"}},{usePost:!0}).then(function(O){(null===O||void 0===O?0:O.statusUrl)?q["default"].checkAsyncJobStatus(O.statusUrl).then(function(){c["default"].publish("metadata/layerEditor/updated",{changed:!0});J.resolve()},
function(){setTimeout(function(){c["default"].publish("metadata/layerEditor/updated",{changed:!0});J.resolve()},3E3)}):(c["default"].publish("metadata/layerEditor/updated",{changed:!0}),J.resolve())},function(O){return J.resolve()});return J},viewHtml:function(){var I=g?"\x26token\x3d"+g:"",L=new r["default"];I="?format\x3ddefault\x26f\x3dhtml"+I;(null===B||void 0===B?0:B.rawMetadataUrl)?b["default"].openPage(B.rawMetadataUrl+I,!1):b["default"].openPage(B.url.split("?")[0]+"/metadata"+I,!1);L.resolve();
return L}},H=function(){l._editor=new D({title:B.name,gxeAdaptor:l._gxeAdaptor,gxeContext:l._gxeContext});l._editor.show();l._isLoading=!1;d.resolve(l._editor)};if(0<(null===x||void 0===x?void 0:x.length))switch(x[0]){case l._formats.formatFGDC:E=t["default"].itemProperties.metadataFGDC;break;case l._formats.formatINSPIRE:E=t["default"].itemProperties.metadataINSPIRE;break;case l._formats.formatISO19139:E=t["default"].itemProperties.metadataISO19139;break;case l._formats.formatISO19115:E=t["default"].itemProperties.metadataISO19115}A.defaultArcGISStyle=
E;a["default"].extentService?A.basemapUrl=a["default"].extentService:A.basemap="hybrid";l.configureGeocoders(y,A);l._gxeContext=new C(A);(null===B||void 0===B?0:B.hasMetadata)?m.retrieveArcGISXml(B.rawMetadataUrl).then(function(I){F.getOriginalXml=function(){return I};l._gxeAdaptor=new z(F);H()},function(I){F.getOriginalXml=function(){return null};l._gxeAdaptor=new z(F);H()}):(F.getOriginalXml=function(){return null},l._gxeAdaptor=new z(F),H())});(function(C){d.reject()})}),function(C){d.reject()});
return d},openEditor:function(n){var k=this,l,h,e=new r["default"],d=a["default"].self,g=0<(null===(l=d.metadataFormats)||void 0===l?void 0:l.length)?v["default"].clone(d.metadataFormats):null,u=(null===(h=d.helperServices)||void 0===h?0:h.geocode)?v["default"].clone(d.helperServices.geocode):[];this._isLoading?e.reject():(this._isLoading=!0,window.require(["arcgisonline/metadata"],function(){window.require("esri/dijit/metadata/context/GxeContext esri/dijit/metadata/arcgis/portal/PortalItemContext esri/dijit/metadata/arcgis/portal/PortalItemAdaptor esri/dijit/metadata/editor/EditorDialog esri/dijit/metadata/editor/Editor dojo/domReady!".split(" "),
function(x,y,B,C){var z=t["default"].itemProperties.metadataISO1913932,D={allowSaveAndClose:!1,allowViewHtml:!0,allowedTypeKeys:["arcgis"],defaultArcGISStyle:"",basemapUrl:"",basemap:""};if(0<(null===g||void 0===g?void 0:g.length)){var E=g[0];switch(E){case k._formats.formatFGDC:z=t["default"].itemProperties.metadataFGDC;break;case k._formats.formatINSPIRE:z=t["default"].itemProperties.metadataINSPIRE;break;case k._formats.formatISO19139:z=t["default"].itemProperties.metadataISO19139;break;case k._formats.formatISO19115:z=
t["default"].itemProperties.metadataISO19115}}D.defaultArcGISStyle=z;a["default"].extentService?D.basemapUrl=a["default"].extentService:D.basemap="hybrid";k.configureGeocoders(u,D);k._gxeContext=new x(D);k._portalItemContext=new y({isForPortalItemPage:!0,allowEditMetadata:!0,allowPushToItem:!0,autoPullItem:!0,portalItem:n,portal:d,restBaseUrl:a["default"].restBaseUrl,token:b["default"].getToken(),originalXml:null});k._portalItemAdaptor=new B({portalItemContext:k._portalItemContext,viewHtml:function(){var A=
new r["default"],F=n.itemUrl+"/info/metadata/metadata.xml",H=b["default"].getUser();b["default"].openPage(F+"?format\x3ddefault\x26output\x3dhtml"+((null===H||void 0===H?0:H.token)?"\x26token\x3d"+H.token:""),!1);A.resolve();return A}});p["default"].includes(n.typeKeywords,"Metadata")?k._portalItemAdaptor.readXml("text").then(function(A){k._portalItemContext.originalXml=m.cleanXml(A);k._editor=new C({title:n.title,gxeAdaptor:k._portalItemAdaptor,gxeContext:k._gxeContext});k._editor.show();k._isLoading=
!1;e.resolve(k._editor)}):(k._editor=new C({title:n.title,gxeAdaptor:k._portalItemAdaptor,gxeContext:k._gxeContext}),k._editor.show(),k._isLoading=!1,e.resolve(k._editor))});(function(x){e.reject()})}),function(x){e.reject()});return e}}})},"arcgisonline/pages/utils/metadata":function(){define("require exports tslib dojo/_base/Deferred ../../sharing/util esri/request dojo/i18n!../../nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c){function a(d){var g;return d?"1.0"===(null===(g=d.querySelector("metadata \x3e Esri \x3e ArcGISFormat"))||
void 0===g?void 0:g.textContent):!1}function b(d){return"string"!==typeof d?null:null!==d?0===d.length?null:d.trim():d}function p(d){var g=document.createElement("textarea");g.innerHTML=d;return g.value}function q(d){var g=document.createElement("textarea");g.textContent=d;return g.innerHTML}function t(d,g){var u=d.querySelector(g);return p((null===u||void 0===u?void 0:u.innerHTML)||"")}function m(d,g,u){if(!a(d))return d;var x=d.querySelector("metadata");x=x.querySelector("dataIdInfo")||x.appendChild(d.createElement("dataIdInfo"));
var y=x.querySelector("idCitation")||x.appendChild(d.createElement("idCitation"));x=g===h.title?y:x;(x.querySelector(g)||x.appendChild(d.createElement(g))).textContent=p(u);return d}function n(d,g,u,x,y){var B=new v;y=(new XMLSerializer).serializeToString(g);x&&(y='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e'+y);r["default"].request({url:d,content:{metadataUploadFormat:"xml",metadata:y}},{usePost:!0}).then(function(C){return k(C.statusUrl,u)},function(C){return B.reject(C)}).then(function(C){return B.resolve(g)},
function(C){return B.reject(C)});return B}function k(d,g){var u=new v,x,y=0,B=setInterval(function(){y++;f["default"]({url:d,content:{token:g,f:"json"}}).then(function(C){x=((null===C||void 0===C?void 0:C.status)||"failed").toLowerCase();C=C||{status:"Failed"};if("completed"===x)clearInterval(B),u.resolve(C);else if("failed"===x||400<C.code)clearInterval(B),u.reject(C)},function(C){if("Invalid JSON primitive: ."!==(null===C||void 0===C?void 0:C.message)||10<y)clearInterval(B),u.reject(C)})},1E3);
return u}function l(d){return("0"+(d||0)).slice(-2)}Object.defineProperty(G,"__esModule",{value:!0});G.createLayerXML=G.updateLayerXML=G.updateLayerXMLProperty=G.parseEsriXML=G.setXMLTagValue=G.getXMLTagValue=G.encodeHTMLEntities=G.decodeHTMLEntities=G.cleanXml=G.isValidArcGISMetadata=G.retrieveArcGISXml=void 0;r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);G.retrieveArcGISXml=function(d,g){var u=new v,x=r["default"].getUser(),y=null===x||void 0===x?void 0:x.token,B={f:"xml"};
!g&&x&&(B.token=y);g&&g.token&&(B.token=g.token);f["default"]({url:d,content:B,handleAs:"text",preventCache:!0},{usePost:!0}).then(function(C){return u.resolve(b(C))},function(C){u.resolve(null)});return u};G.isValidArcGISMetadata=a;G.cleanXml=b;G.decodeHTMLEntities=p;G.encodeHTMLEntities=q;G.getXMLTagValue=t;G.setXMLTagValue=m;G.parseEsriXML=function(d){var g={};if(!d)return g;g=[].slice.call(d.querySelectorAll(h.keywords)).map(function(u){return u.textContent}).reduce(function(u,x){return u.concat(x.split(/\n/))},
[]);return{title:t(d,h.title),"abstract":t(d,h["abstract"]),summary:t(d,h.summary),credits:t(d,h.credits),use:t(d,h.use),keywords:g}};G.updateLayerXMLProperty=function(d){var g=d.url,u=d.token;d=m(d.xml,h[d.prop],q(d.value));return n(g,d,u)};G.updateLayerXML=n;G.createLayerXML=function(d){var g=d.url,u=d.portal,x=d.prop,y=d.layer,B=d.value;d=d.token;var C=new Date,z=C.getFullYear(),D=l(C.getMonth()+1),E=l(C.getDate()),A=l(C.getHours()),F=l(C.getMinutes());C=l(C.getSeconds());var H=(u=null===(H=null===
u||void 0===u?void 0:u.metadataFormats)||void 0===H?void 0:H[0])&&e[u]?"\x3cArcGISstyle\x3e"+e[u]+"\x3c/ArcGISstyle\x3e":"";y='\n    \x3cmetadata xml:lang\x3d"en"\x3e\n      \x3cEsri\x3e\n        \x3cCreaDate\x3e'+z+D+E+"\x3c/CreaDate\x3e\n        \x3cCreaTime\x3e"+A+F+C+"00\x3c/CreaTime\x3e\n        \x3cArcGISFormat\x3e1.0\x3c/ArcGISFormat\x3e\n        \x3cModDate\x3e"+z+D+E+"\x3c/ModDate\x3e\n        \x3cModTime\x3e"+A+F+C+"00\x3c/ModTime\x3e\n        "+H+"\n      \x3c/Esri\x3e\n      \x3cdataIdInfo\x3e\n        \x3cidCitation\x3e\n          \x3cresTitle\x3e"+
y.name+'\x3c/resTitle\x3e\n        \x3c/idCitation\x3e\n      \x3c/dataIdInfo\x3e\n      \x3cmdDateSt Sync\x3d"TRUE"\x3e'+z+D+E+"\x3c/mdDateSt\x3e\n    \x3c/metadata\x3e\n  ";y=(new DOMParser).parseFromString(y,"text/xml");y.querySelector("dataIdInfo").appendChild(y.createElement(h[x]));x=m(y,h[x],q(B));return n(g,x,d,!0)};var h;(function(d){d.title="resTitle";d["abstract"]="idAbs";d.summary="idPurp";d.credits="idCredit";d.use="resConst Consts useLimit";d.keywords="searchKeys keyword"})(h||(h={}));
var e={arcgis:c["default"].myOrganization.itemDetailsTab.formats.arcgis,fgdc:c["default"].myOrganization.itemDetailsTab.formats.fgdc,inspire:c["default"].myOrganization.itemDetailsTab.formats.inspire,iso19139:c["default"].myOrganization.itemDetailsTab.formats.iso19139,"iso19139-3.2":c["default"].myOrganization.itemDetailsTab.formats.iso1913932,iso19115:c["default"].myOrganization.itemDetailsTab.formats.iso19115}})},"arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsUpdate":function(){define("require exports tslib ../../../../../map/core/urlUtils ../../../../utils/dom dojo/dom-construct dojo/topic dojo/string dijit/a11yclick dijit/_WidgetBase dijit/_TemplatedMixin esri/lang dojo/i18n!../../../../../nls/arcgisonline dojo/text!./httpsResultIssue.html dojo/text!./httpsResultUpdated.html dojo/text!./httpsResultUnchanged.html dojo/text!./httpsUpdate.html ../../../../../tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);return function(){function d(g,u){this.templateString=h["default"];this.WEB_SCENE="Web Scene"}d.prototype.postMixInProperties=
function(){this.inherited(arguments);this.i18n=m["default"]};d.prototype.startup=function(){this.inherited(arguments);this.initUI()};d.prototype.initUI=function(){this.isWebScene=this.item.type===this.WEB_SCENE;this.updateHttpsDesc.innerHTML=this.i18n.itemProperties[this.isWebScene?"updateSceneLayersToHTTPSDesc":"updateLayersToHTTPSDesc"];this.own(b["default"](this.okBtn,this.okClick.bind(this)),b["default"](this.doneBtn,this.doneClick.bind(this)),b["default"](this.cancelBtn,this.cancelClick.bind(this)),
b["default"](this.toggleIssues,this.issuesToggled.bind(this)),b["default"](this.toggleUpdated,this.updatedToggled.bind(this)),b["default"](this.toggleUnchanged,this.unchangedToggled.bind(this)))};d.prototype.filterForIssues=function(g){return g.filter(function(u){return"failure"===u.layerUrlChange||u.layerRenderingFailures||u.layerQueryUrlFailures||u.itemAccess&&("failure"===u.itemUrlChange||u.itemRenderingFailures||u.itemQueryUrlFailures)})};d.prototype.filterForUpdated=function(g){return g.filter(function(u){return("success"===
u.layerUrlChange||u.layerRenderingChanged||u.layerQueryUrlChanged)&&!u.layerRenderingFailures&&!u.layerQueryUrlFailures||u.itemAccess&&("success"===u.itemUrlChange||u.itemRenderingChanged||u.itemQueryUrlChanged)&&!u.itemRenderingFailures&&!u.itemQueryUrlFailures})};d.prototype.filterForUnchanged=function(g){return g.filter(function(u){return"none"===u.layerUrlChange&&!u.layerRenderingChanged&&!u.layerRenderingFailures&&!u.layerQueryUrlChanged&&!u.layerQueryUrlFailures&&(!u.itemAccess||u.itemAccess&&
"none"===u.itemUrlChange&&!u.itemRenderingChanged&&!u.itemRenderingFailures&&!u.itemQueryUrlChanged&&!u.itemQueryUrlFailures)})};d.prototype.writeOutIssues=function(g){var u=this;g.length?(this.issuesTitle.innerHTML=a["default"].substitute(this.i18n.itemProperties.layersWithIssues,{n:g.length}),f["default"].empty(this.issues),g.forEach(function(x){x.message="";if("failure"===x.layerUrlChange||x.layerQueryUrlFailures||x.itemQueryUrlFailures)x.message=u.i18n.itemProperties.layerMessages.httpsNotSupported;
else if(x.layerRenderingFailures||x.itemAccess&&x.itemRenderingFailures)x.message=u.i18n.itemProperties.layerMessages[u.isWebScene?"sceneSymbolHttpsNotSupported":"symbolHttpsNotSupported"];f["default"].place(a["default"].substitute(n["default"],x),u.issues,"last")}),r["default"].showNode(this.layersWithIssues)):r["default"].hideNode(this.layersWithIssues)};d.prototype.writeOutUpdated=function(g){var u=this;g.length?(this.updatedTitle.innerHTML=a["default"].substitute(this.i18n.itemProperties.layersUpdated,
{n:g.length}),f["default"].empty(this.updated),g.forEach(function(x){x.message="";"success"===x.layerUrlChange||x.layerRenderingChanged||x.layerQueryUrlChanged?(x.message=u.i18n.itemProperties.layerMessages[u.isWebScene?"updatedInScene":"updatedInMap"],x.itemAccess&&("success"===x.itemUrlChange||x.itemRenderingChanged||x.itemQueryUrlChanged)&&(x.message=u.i18n.itemProperties.layerMessages[u.isWebScene?"updatedInSceneAndItem":"updatedInMapAndItem"])):x.itemAccess&&("success"===x.itemUrlChange||x.itemRenderingChanged||
x.itemQueryUrlChanged)?x.message=u.i18n.itemProperties.layerMessages[u.isWebScene?"updatedInSceneAndItem":"updatedInMapAndItem"]:x.layerRenderingChanged&&(x.message=u.i18n.itemProperties.layerMessages[u.isWebScene?"updatedInScene":"updatedInMap"]);f["default"].place(a["default"].substitute(k["default"],x),u.updated,"last")}),r["default"].showNode(this.layersUpdated)):r["default"].hideNode(this.layersUpdated)};d.prototype.writeOutUnchanged=function(g){var u=this;g.length?(this.unchangedTitle.innerHTML=
a["default"].substitute(this.i18n.itemProperties.layersUnchanged,{n:g.length}),f["default"].empty(this.unchanged),g.forEach(function(x){x.message="";f["default"].place(a["default"].substitute(l["default"],x),u.unchanged,"last")}),r["default"].showNode(this.layersUnchanged)):r["default"].hideNode(this.layersUnchanged)};d.prototype.okClick=function(){var g=this;r["default"].hideNode(this.updateHttpsDesc);r["default"].showNode(this.updateHttpsLoading);r["default"].disableNode(this.okBtn,!0);v["default"].switchToHTTPS(this.item.itemData,
this.item).then(function(u){var x=g.filterForIssues(u.layers),y=g.filterForUpdated(u.layers),B=g.filterForUnchanged(u.layers);r["default"].hideNode(g.updateHttpsLoading);t["default"].isDefined(u.configChange)&&"failure"===u.configChange?r["default"].showNode(g.unexpectedError):(g.writeOutIssues(x),g.writeOutUpdated(y),g.writeOutUnchanged(B),x.length?g.issuesToggled():y.length?g.updatedToggled():B.length&&g.unchangedToggled(),x.length||y.length||!B.length?r["default"].showNode(g.updateHttpsResults):
r["default"].showNode(g.noChangesMade));r["default"].hideNode(g.okBtn);r["default"].hideNode(g.cancelBtn);r["default"].showNode(g.doneBtn);c["default"].publish("item-data/change")},function(u){r["default"].hideNode(g.updateHttpsLoading);r["default"].showNode(g.unexpectedError);r["default"].hideNode(g.okBtn);r["default"].hideNode(g.cancelBtn);r["default"].showNode(g.doneBtn)})};d.prototype.cancelClick=function(){c["default"].publish("update-to-https/cancel")};d.prototype.doneClick=function(){c["default"].publish("update-to-https/done")};
d.prototype.toggleSection=function(g,u){r["default"].showHide(u,g.classList.contains("icon-ui-right"));g.classList.toggle("icon-ui-right");g.classList.toggle("icon-ui-down")};d.prototype.issuesToggled=function(){this.toggleSection(this.toggleIssues,this.issues)};d.prototype.updatedToggled=function(){this.toggleSection(this.toggleUpdated,this.updated)};d.prototype.unchangedToggled=function(){this.toggleSection(this.toggleUnchanged,this.unchanged)};return d=w.__decorate([e["default"](p["default"],q["default"])],
d)}()})},"arcgisonline/map/core/urlUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/connect dojo/dom dojo/dom-construct dojo/json dojo/Deferred dojo/DeferredList esri/request esri/lang esri/layers/VectorTileLayer esri/layers/CSVLayer esri/layers/KMLLayer esri/layers/GeoRSSLayer esri/layers/WebTiledLayer esri/layers/WMSLayer esri/layers/WFSLayer esri/layers/WMTSLayer".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){function d(aa,ea){var Y=new c;aa._ssl&&delete aa._ssl;
var T=esriGeowConfig.restBaseUrl+"content/users/"+ea.owner;T+=ea.ownerFolder?"/"+ea.ownerFolder:"";T+="/items/"+ea.id+"/update";var ca={text:f.stringify(aa),f:"json"},M={usePost:!0};"http:"===window.location.protocol&&-1<T.indexOf("https://")&&(M.useProxy=!0);b({url:T,content:ca,load:function(U){Y.resolve()},error:function(U){Y.reject(U)}},M);return Y}function g(aa){var ea=aa.configLayer,Y=aa.from,T=aa.to,ca=aa.type,M=aa.checkRenderer,U=new c;switch(ea.layerType||ea.type){case "ArcGISFeatureLayer":case void 0:if(ea.url)return u(aa);
if(M)return x(aa);U.resolve({type:"notTested",msg:"No URL"});break;case "ArcGISImageServiceLayer":case "ArcGISImageServiceVectorLayer":case "ArcGISMapServiceLayer":case "ArcGISStreamLayer":case "ArcGISTiledImageServiceLayer":case "ArcGISTiledMapServiceLayer":case "ArcGISTiledElevationServiceLayer":case "ArcGISSceneServiceLayer":case "PointCloudLayer":case "IntegratedMeshLayer":return u(aa);case "VectorTileLayer":return y(aa);case "CSV":return B(aa);case "GeoRSS":return C(aa);case "KML":return z(aa);
case "WebTiledLayer":return ea.wmtsInfo?D(aa):E(aa);case "WFS":return A(aa);case "WMS":return F(aa);case "BingMapsAerial":case "BingMapsRoad":case "BingMapsHybrid":M={url:"",origUrl:"",msg:"Layer has no URL.",code:"layer_003",layerId:ea.id,type:"layer"},ea.portalUrl&&(Y=ea.portalUrl.replace(Y,T),Y!==ea.portalUrl?(ea.portalUrl=Y,G.mixin(M,{msg:"Portal URL switched to "+T+".",code:"layer_001"})):G.mixin(M,{msg:"Portal URL is already "+T+".",code:"layer_002"})),U.resolve(M);case "OpenStreetMap":M={url:"",
origUrl:"",msg:"Layer has no URL.",code:"layer_003",layerId:ea.id,type:"layer"},U.resolve(M);default:if("table"===ca)return u(aa);U.resolve({type:"notTested",msg:"Unknown type"})}return U}function u(aa){var ea=aa.configLayer,Y=aa.from,T=aa.to,ca=aa.checkRenderer,M=new c,U=ea.url,da=ea.url.replace(Y,T),ja={url:U,origUrl:U,layerId:ea.id,type:"layer"};if(U===da)return G.mixin(ja,{url:da,msg:"Layer URL is already "+T+".",code:"layer_002"}),ca?H(ea,aa,ja).then(function(ra){L(ea,ra).then(function(ua){V(aa,
ua).then(function(wa){M.resolve(wa)})})}):H(ea,aa,ja).then(function(ra){V(aa,ra).then(function(ua){M.resolve(ua)})}),M;if("http://"===Y&&"https://"===T&&-1===U.indexOf("sampleserver")&&(-1<U.indexOf(".arcgis.com")||-1<U.indexOf(".arcgisonline.com")))return ea.url=da,G.mixin(ja,{url:da,msg:"Layer URL switched to "+T+".",code:"layer_001"}),ca?H(ea,aa,ja).then(function(ra){L(ea,ra).then(function(ua){V(aa,ua).then(function(wa){M.resolve(wa)})})}):H(ea,aa,ja).then(function(ra){V(aa,ra).then(function(ua){M.resolve(ua)})}),
M;var na=1,oa=setInterval(function(){esri.id.isBusy()&&3>na?na++:(esri.id.isBusy()&&esri.id.dialog.destroy(),G.mixin(ja,{msg:"Timeout",code:"layer_021"}),H(ea,aa,ja).then(function(ra){V(aa,ra).then(function(ua){M.reject(ua)})}),clearInterval(oa),delete oa)},2E4);Y=da+(-1<da.indexOf("?")?"\x26f\x3djson":"?f\x3djson");b({url:Y,callbackParamName:"callback",load:function(ra,ua){oa&&(clearTimeout(oa),ea.url=da,G.mixin(ja,{url:da,msg:"Layer URL switched to "+T+".",code:"layer_001"}),ca?H(ea,aa,ja).then(function(wa){L(ea,
wa).then(function(Ba){V(aa,Ba).then(function(Da){M.resolve(Da)})})}):H(ea,aa,ja).then(function(wa){V(aa,wa).then(function(Ba){M.resolve(Ba)})}))},error:function(ra){oa&&(clearTimeout(oa),esri.id.isBusy()?ra&&ra.message&&-1<ra.message.toLowerCase().indexOf("aborted")?(G.mixin(ja,{msg:"Aborted the Sign-In process.",code:"layer_012"}),H(ea,aa,ja).then(function(ua){V(aa,ua).then(function(wa){M.reject(wa)})})):(G.mixin(ja,{msg:ra.message,code:"layer_010"}),H(ea,aa,ja).then(function(ua){V(aa,ua).then(function(wa){M.reject(wa)})})):
(G.mixin(ja,{msg:ra.message,code:"layer_010"}),H(ea,aa,ja).then(function(ua){V(aa,ua).then(function(wa){M.reject(wa)})})))}});return M}function x(aa){var ea=aa.configLayer,Y=new c,T={url:"",origUrl:"",layerId:ea.id,msg:"Layer has no URL.",code:"layer_003",type:"layer",renderers:[],symbols:[]};if(ea.featureCollection)if(ea.featureCollection.layers){var ca=[];K.forEach(ea.featureCollection.layers,function(M,U){if(M.layerDefinition&&M.layerDefinition.drawingInfo&&M.layerDefinition.drawingInfo.renderer){var da=
new c;O(ea,M.layerDefinition.drawingInfo.renderer).then(G.hitch(this,function(ja,na){ea.featureCollection.layers[ja].layerDefinition.drawingInfo.renderer=na.renderer;da.resolve(na)},U));ca.push(da)}M.featureSet&&M.featureSet.features&&M.featureSet.features.length&&M.featureSet.features[0].symbol&&K.forEach(M.featureSet.features,function(ja){var na=new c;P(ea,ja.symbol).then(G.hitch(this,function(oa,ra){T.symbols=[ra];na.resolve(T)},U));ca.push(na)})});ca.length?(new a(ca)).addCallback(function(M){var U=
[],da=[];K.forEach(M,function(ja){"renderer"===ja[1].type?U.push(ja[1]):"symbol"===ja[1].type&&da.push(ja[1])});G.mixin(T,{renderers:U.length?U:[],symbols:da.length?da:[]});V(aa,T).then(function(ja){Y.resolve(ja)})}):V(aa,T).then(function(M){Y.resolve(M)})}else V(aa,T).then(function(M){Y.resolve(M)});else V(aa,T).then(function(M){Y.resolve(M)});return Y}function y(aa){var ea=aa.configLayer,Y=aa.from,T=aa.to,ca=new c,M=ea.styleUrl;if(!ea.styleUrl&&ea.itemId){var U=esriGeowConfig.restBaseUrl+"content/items/"+
ea.itemId+"/resources";if(!esriGeowConfig.self.isPortal){var da=U.indexOf("://"),ja=U.indexOf("/",da+3);U=U.substring(0,da+3)+esriGeowConfig.self.portalHostname+U.substring(ja)}ea.styleUrl=U+"/styles/root.json"}var na=ea.styleUrl.replace(Y,T);Y=new q(na);w.connect(Y,"onLoad",G.hitch(this,function(){var oa={url:na,origUrl:M,layerId:ea.id,type:"layer"};ea.styleUrl===na?G.mixin(oa,{msg:"Layer URL is already "+T+".",code:"layer_002"}):(ea.styleUrl=na,G.mixin(oa,{msg:"Layer URL switched to "+T+".",code:"layer_001"}));
V(aa,oa).then(function(ra){ca.resolve(ra)})}));w.connect(Y,"onError",G.hitch(this,function(oa){V(aa,{url:ea.styleUrl,origUrl:ea.styleUrl,layerId:ea.id,msg:oa.message,code:"layer_010",type:"layer"}).then(function(ra){ca.reject(ra)})}));return ca}function B(aa){var ea=aa.configLayer,Y=aa.from,T=aa.to,ca=aa.checkRenderer,M=new c,U=ea.url.replace(Y,T),da=ea.url;if(da===U)return aa={url:U,origUrl:da,layerId:ea.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"},ca?L(ea,aa).then(function(ja){M.resolve(ja)}):
M.resolve(aa),M;aa=new t(U,{columnDelimiter:ea.columnDelimiter,latitudeFieldName:ea.locationInfo.latitudeFieldName,longitudeFieldName:ea.locationInfo.longitudeFieldName});w.connect(aa,"onLoad",G.hitch(this,function(){ea.url=U;var ja={url:U,origUrl:da,layerId:ea.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"};ca?L(ea,ja).then(function(na){M.resolve(na)}):M.resolve(ja)}));w.connect(aa,"onError",G.hitch(this,function(ja){M.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:ja.message,
code:"layer_010",type:"layer"})}));return M}function C(aa){var ea=aa.configLayer,Y=aa.from,T=aa.to,ca=aa.checkRenderer,M=new c,U=ea.url.replace(Y,T),da=ea.url;if(da===U){var ja={url:U,origUrl:da,layerId:ea.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"};ca&&ea.pointSymbol?P(ea,ea.pointSymbol).then(function(na){ja.symbols=[na];M.resolve(ja)}):M.resolve(ja);return M}aa=new n(U);w.connect(aa,"onLoad",G.hitch(this,function(){ea.url=U;var na={url:U,origUrl:da,layerId:ea.id,msg:"Layer URL switched to https.",
code:"layer_001",type:"layer"};ca&&ea.pointSymbol?P(ea,ea.pointSymbol).then(function(oa){na.symbols=[oa];M.resolve(na)}):M.resolve(na)}));w.connect(aa,"onError",G.hitch(this,function(na){M.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:na.message,code:"layer_010",type:"layer"})}));return M}function z(aa){var ea=aa.configLayer,Y=aa.from,T=aa.to,ca=new c,M=ea.url.replace(Y,T),U=ea.url;if(U===M)return ca.resolve({url:M,origUrl:U,layerId:ea.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),
ca;Y=M;T=arcgisonline.sharing.util.getUser();var da=esriGeowConfig.self.urlKey?esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname,ja=Y.indexOf(da);T&&ea.itemId&&-1<ja&&(Y="https://"+esriGeowConfig.self.portalHostname+Y.substring(ja+da.length));T&&(-1<Y.indexOf(esriGeowConfig.self.portalHostname)||-1<Y.indexOf(da))&&(T=arcgisonline.sharing.util.getToken())&&(Y+="?token\x3d"+T);Y=new m(Y);w.connect(Y,"onLoad",G.hitch(this,function(){ea.url=M;var na={url:M,origUrl:U,layerId:ea.id,msg:"Layer URL switched to https.",
code:"layer_001",type:"layer"};ea.itemId?(aa.checkRenderer=!1,V(aa,na).then(function(oa){ca.resolve(oa)})):ca.resolve(na)}));w.connect(Y,"onError",G.hitch(this,function(na){ca.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:na.message,code:"layer_010",type:"layer"})}));return ca}function D(aa){var ea=aa.configLayer,Y=aa.from;aa=aa.to;var T=new c,ca={};ea.wmtsInfo.customParameters&&(ca.customParameters=ea.wmtsInfo.customParameters);ea.wmtsInfo.customLayerParameters&&(ca.customLayerParameters=ea.wmtsInfo.customLayerParameters);
var M=ea.wmtsInfo.url.replace(Y,aa),U=ea.wmtsInfo.url;if(U===M)return T.resolve({url:M,origUrl:U,layerId:ea.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),T;var da=function(){var oa=!1;K.forEach(layerObj.layers,function(ra){ra.identifier===ea.wmtsInfo.layerIdentifier&&K.forEach(ra.tileMatrixSetInfos,function(ua){if(ua.tileMatrixSet===ea.wmtsInfo.tileMatrixSet){oa=!0;layerObj.copyright&&"none"!==layerObj.copyright.toLowerCase()&&(ea.copyright=layerObj.copyright,180<layerObj.copyright.length&&
(ea.copyright=layerObj.copyright.substring(0,180)+"..."));var wa=-1<K.indexOf(ra.formats,"image/png")?"image/png":ra.formats[0];ea.templateUrl=layerObj.getTileUrlTemplate({identifier:ra.identifier,tileMatrixSet:ua.tileMatrixSet,format:wa});-1<ea.templateUrl.indexOf("http://")&&R(M,ea.templateUrl)&&(ea.templateUrl=ea.templateUrl.replace("http://","https://"));-1<ea.templateUrl.indexOf("http://")?T.reject({url:ea.wmtsInfo.url,origUrl:ea.wmtsInfo.url,layerId:ea.id,msg:"WTMS does not return https URLs.",
code:"layer_013",type:"layer"}):(ea.wmtsInfo.url=M,T.resolve({url:M,origUrl:U,layerId:ea.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"}))}})});oa||T.reject({url:ea.wmtsInfo.url,origUrl:ea.wmtsInfo.url,layerId:ea.id,msg:"WMTS is missing layer or tileMatrixSet.",code:"wmts_011",type:"layer"})};layerObj=new e(M,ca);var ja=w.connect(layerObj,"onError",function(oa){w.disconnect(ja);w.disconnect(na);ca.serviceMode="KVP";layerObj=new e(M,ca);w.connect(layerObj,"onError",function(ra){T.reject({url:ea.wmtsInfo.url,
origUrl:ea.wmtsInfo.url,layerId:ea.id,msg:ra.message,code:"layer_010",type:"layer"})});w.connect(layerObj,"onLoad",G.hitch(this,function(){da()}))}),na=w.connect(layerObj,"onLoad",G.hitch(this,function(){w.disconnect(ja);w.disconnect(na);da()}));return T}function E(aa){var ea=aa.configLayer,Y=aa.from;aa=aa.to;var T=new c,ca=ea.templateUrl.replace(Y,aa),M=ea.templateUrl;if(M===ca)return T.resolve({url:ca,origUrl:M,layerId:ea.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),T;var U=
setTimeout(G.hitch(this,function(){clearTimeout(U);U=null;T.reject({url:ea.templateUrl,origUrl:ea.templateUrl,layerId:ea.id,msg:"WebTiledLayer timeout error.",code:"WTL_012",type:"layer"})}),1E4);Y=ca;ea.subDomains&&ea.subDomains.length&&(Y=Y.replace("{subDomain}",ea.subDomains[0]));Y=Y.replace("{level}",0).replace("{row}",0).replace("{col}",0);b({url:Y,load:function(da,ja){U&&(clearTimeout(U),ea.templateUrl=ca,T.resolve({url:ca,origUrl:M,layerId:ea.id,msg:"Layer URL switched to https.",code:"layer_001",
type:"layer"}))},error:function(da){U&&(clearTimeout(U),T.reject({url:ea.templateUrl,origUrl:ea.templateUrl,layerId:ea.id,msg:"WebTiledLayer access error.",code:"WTL_011",type:"layer"}))}});return T}function A(aa){var ea=aa.config.spatialReference,Y=aa.configLayer,T=aa.from,ca=aa.to,M=aa.checkRenderer,U=new c,da=Y.url.replace(T,ca),ja=Y.url;if(ja===da)return aa={url:da,origUrl:ja,layerId:Y.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"},M?L(Y,aa).then(function(ra){U.resolve(ra)}):
U.resolve(aa),U;var na=new h;w.connect(na,"onError",G.hitch(this,function(ra){U.reject({url:Y.url,origUrl:Y.url,layerId:Y.id,msg:ra.message,code:"layer_010",type:"layer"})}));var oa={url:da,version:Y.wfsInfo.version,customParameters:Y.wfsInfo.customParameters};na.initialize(oa,function(ra){for(var ua,wa=0;wa<ra.length;wa++)if(ra[wa].name===Y.wfsInfo.name){ua=ra[wa];break}ua?(oa={layerName:Y.wfsInfo.name,visible:Y.defaultVisibility,maxFeatures:Y.wfsInfo.maxFeatures?Y.wfsInfo.maxFeatures:3E3,swapXY:Y.wfsInfo.swapXY,
geometryType:Y.layerDefinition?Y.layerDefinition.geometryType:null,wkid:Y.layerDefinition?Y.layerDefinition.spatialReference.wkid:Y.wfsInfo.supportedSpatialReferences?Y.wfsInfo.supportedSpatialReferences[0]:4326,mode:"snapshot"},na.selectLayer(oa,function(Ba){Y.wfsInfo.wfsNamespace=na.layerNamespace;Y.wfsInfo.featureUrl=na.getFeatureUrl;-1<Y.wfsInfo.wfsNamespace.indexOf("http://")||-1<Y.wfsInfo.featureUrl.indexOf("http://")?U.reject({url:Y.url,origUrl:Y.url,layerId:Y.id,msg:"WFS does not return https URLs.",
code:"WFS_012",type:"layer"}):(Y.wfsInfo.supportedSpatialReferences=ua.spatialReferences,-1===K.indexOf([3857,102100],ea.wkid)&&4326!==ea.wkid&&-1===K.indexOf(na.spatialReferences,ea.wkid)?U.reject({url:Y.url,origUrl:Y.url,layerId:Y.id,msg:"WFS does not contain map spatial reference.",code:"WFS_013",type:"layer"}):(Y.url=da,Ba={url:da,origUrl:ja,layerId:Y.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"},M?L(Y,Ba).then(function(Da){U.resolve(Da)}):U.resolve(Ba)))})):U.reject({url:Y.url,
origUrl:Y.url,layerId:Y.id,msg:"WFS does not contain layer.",code:"WFS_011",type:"layer"})});return U}function F(aa){var ea=aa.configLayer,Y=aa.from;aa=aa.to;var T=new c,ca=ea.url.replace(Y,aa),M=ea.url;if(M===ca)return T.resolve({url:ca,origUrl:M,layerId:ea.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),T;var U=new l(ca,{visibleLayers:ea.visibleLayers,customLayerParameters:ea.customLayerParameters,customParameters:ea.customParameters});w.connect(U,"onLoad",G.hitch(this,function(){-1<
U.getMapURL.indexOf("http://")&&R(ca,U.getMapURL)&&(U.getMapURL=U.getMapURL.replace("http://","https://"));-1<U.getFeatureInfoURL.indexOf("http://")&&R(ca,U.getFeatureInfoURL)&&(U.getFeatureInfoURL=U.getFeatureInfoURL.replace("http://","https://"));-1<U.copyright.indexOf("http://")&&R(ca,U.copyright)&&(U.copyright=U.copyright.replace("http://","https://"));if(-1<U.getMapURL.indexOf("http://")||-1<U.getFeatureInfoURL.indexOf("http://"))T.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:"WMS does not return https URLs.",
code:"WMS_011",type:"layer"});else if(-1<U.getMapURL.indexOf("https://localhost/")||-1<U.getFeatureInfoURL.indexOf("https://localhost/"))T.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:"WMS does not return valid https URLs.",code:"WMS_012",type:"layer"});else{for(var da=[],ja=0;ja<ea.layers.length;ja++){var na=G.clone(ea.layers[ja]),oa=function(Ba,Da){K.forEach(Ba,function(La){La.subLayers&&0<La.subLayers.length?oa(La.subLayers,Da):Da.push(La)},this)};if(U.layerInfos){var ra=[];oa(U.layerInfos,
ra);U.layerInfos=ra}ra=!1;for(var ua=0;ua<U.layerInfos.length;ua++){var wa=U.layerInfos[ua];if(na.name===wa.name)if(ra=!0,na.legendURL&&wa.legendURL){if(na.legendURL=wa.legendURL,-1<na.legendURL.indexOf("http://")&&R(ca,na.legendURL)&&(na.legendURL=na.legendURL.replace("http://","https://")),-1<na.legendURL.indexOf("http://")){T.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:"WMS does not return https URLs.",code:"WMS_011",type:"layer"});return}}else na.legendURL=wa.legendURL}if(!ra){T.reject({url:ea.url,
origUrl:ea.url,layerId:ea.id,msg:"WMS layer is missing.",code:"WMS_013",type:"layer"});return}da.push(na)}ea.url=ca;ea.mapUrl=U.getMapURL;ea.featureInfoUrl=U.getFeatureInfoURL;ea.copyright=U.copyright;ea.layers=da;T.resolve({url:ca,origUrl:M,layerId:ea.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"})}}));w.connect(U,"onError",G.hitch(this,function(da){T.reject({url:ea.url,origUrl:ea.url,layerId:ea.id,msg:da.message,code:"layer_010",type:"layer"})}));return T}function H(aa,ea,
Y){var T=new c,ca=[];aa.layers&&K.forEach(aa.layers,function(U,da){if(U.layerUrl){var ja=new c;u({configLayer:{url:U.layerUrl,id:aa.id+"_"+da},from:ea.from,to:ea.to,checkRenderer:!1}).then(G.hitch(this,function(na,oa){na.layerUrl=oa.url;ja.resolve(oa)},U),function(na){ja.resolve(na)});ca.push(ja)}});if(ca.length){var M=[];(new a(ca)).addCallback(function(U){K.forEach(U,function(da){M.push(da[1])});Y.queryLayers=M;T.resolve(Y)})}else T.resolve(Y);return T}function I(aa,ea,Y,T){var ca=new c,M=[];Y.layers&&
K.forEach(Y.layers,function(da,ja){if(da.layerUrl){var na=new c;u({configLayer:{url:da.layerUrl,id:aa.id+"_item_"+ja},from:ea.from,to:ea.to,checkRenderer:!1}).then(G.hitch(this,function(oa){da.layerUrl=oa.url;na.resolve(oa)}),function(oa){na.resolve(oa)});M.push(na)}});if(M.length){var U=[];(new a(M)).addCallback(function(da){K.forEach(da,function(ja){U.push(ja[1])});T.item.queryLayers=U;ca.resolve(T)})}else ca.resolve(T);return ca}function L(aa,ea){var Y=new c,T=[];if(aa.layerDefinition&&aa.layerDefinition.drawingInfo&&
aa.layerDefinition.drawingInfo.renderer){var ca=new c;O(aa,aa.layerDefinition.drawingInfo.renderer).then(G.hitch(this,function(U,da){U.layerDefinition.drawingInfo.renderer=da.renderer;ca.resolve(da)},aa),function(U){ca.resolve(U)});T.push(ca)}aa.layers&&K.forEach(aa.layers,function(U){if(U.layerDefinition&&U.layerDefinition.drawingInfo&&U.layerDefinition.drawingInfo.renderer){var da=new c;O(aa,U.layerDefinition.drawingInfo.renderer).then(G.hitch(this,function(ja,na){ja.layerDefinition.drawingInfo.renderer=
na.renderer;da.resolve(na)},U),function(ja){da.resolve(ja)});T.push(da)}});if(T.length){var M=[];(new a(T)).addCallback(function(U){K.forEach(U,function(da){M.push(da[1])});ea.renderers=M;Y.resolve(ea)})}else Y.resolve(ea);return Y}function J(aa,ea,Y){var T=new c,ca=[];ea.layers&&K.forEach(ea.layers,function(U){if(U.layerDefinition&&U.layerDefinition.drawingInfo&&U.layerDefinition.drawingInfo.renderer){var da=new c;O(aa,U.layerDefinition.drawingInfo.renderer).then(G.hitch(this,function(ja){U.layerDefinition.drawingInfo.renderer=
ja.renderer;da.resolve(ja)}),function(ja){da.resolve(ja)});ca.push(da)}});if(ca.length){var M=[];(new a(ca)).addCallback(function(U){K.forEach(U,function(da){M.push(da[1])});Y.item.renderers=M;T.resolve(Y)})}else T.resolve(Y);return T}function O(aa,ea){for(var Y=new c,T=[],ca=f.stringify(ea),M=ca.indexOf("http://");-1<M;){var U=ca.indexOf('"',M+1);U=ca.substring(M,U);T.push(fa(aa,U));M=ca.indexOf("http://",M+1)}T.length?(new a(T)).addCallback(function(da){var ja=[];K.forEach(da,function(na){var oa=
na[1];ja.push(oa);!0===na[0]&&(ca=ca.replace(oa.origUrl,oa.url))});Y.resolve({renderer:f.parse(ca),origRenderer:ea,layerId:aa.id,type:"renderer",symbols:ja})}):Y.resolve({renderer:ea,origRenderer:ea,layerId:aa.id,type:"renderer",symbols:[]});return Y}function P(aa,ea){var Y=new c;ea?ea.url?fa(aa,ea.url).then(function(T){ea.url=T.url;Y.resolve(T)},function(T){Y.resolve(T)}):Y.resolve({url:"",origUrl:"",layerId:aa.id,msg:"Symbol has no URL.",code:"sym_003",type:"symbol"}):Y.resolve({url:"",origUrl:"",
layerId:aa.id,msg:"No symbol.",code:"sym_005",type:"symbol"});return Y}function fa(aa,ea){var Y=new c,T=ea;if(ea.startsWith("https://"))return Y.resolve({url:ea,origUrl:T,layerId:aa.id,msg:"symbol URL already https",code:"sym_002",type:"symbol"}),Y;if(ea.startsWith("http://")){if(ea=ea.replace("http://","https://"),-1<ea.indexOf(esriGeowConfig.self.portalHostname))return Y.resolve({url:ea,origUrl:T,layerId:aa.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"}),Y}else return Y.resolve({url:ea,
origUrl:T,layerId:aa.id,msg:"symbol URL is relative path",code:"sym_004",type:"symbol"}),Y;this.cachedImages=this.cachedImages||[];for(var ca,M=0;M<this.cachedImages.length;M++)if(this.cachedImages[M].url===ea){ca=this.cachedImages[M];if("success"===ca.status)Y.resolve({url:ea,origUrl:T,layerId:aa.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"});else if("error"===ca.status)Y.reject({url:T,origUrl:T,layerId:aa.id,msg:"symbol URL can't be switched to https",code:"sym_010",type:"symbol"});
else if("inProgress"===ca.status)var U=setInterval(G.hitch(this,function(oa){"success"===oa.status?(clearInterval(U),Y.resolve({url:ea,origUrl:T,layerId:aa.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"})):"error"===oa.status&&(clearInterval(U),Y.reject({url:T,origUrl:T,layerId:aa.id,msg:"symbol URL can't be switched to https",code:"sym_010",type:"symbol"}))},ca),1E3);return Y}ca||(ca={url:ea,status:"inProgress"},this.cachedImages.push(ca));v.byId("imageTesterDiv")||r.create("div",
{id:"imageTesterDiv",style:"position:absolute;top:-1000px;left:-1000px"},document.body);var da=Math.random()+"_testImage";r.create("img",{id:da+"_testImage"},v.byId("imageTesterDiv"));var ja=w.connect(v.byId(da+"_testImage"),"onload",G.hitch(this,function(){w.disconnect(ja);clearTimeout(na);r.destroy(da+"_testImage");ca.status="success";Y.resolve({url:ea,origUrl:T,layerId:aa.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"})})),na=setTimeout(G.hitch(this,function(){w.disconnect(ja);
r.destroy(da+"_testImage");clearTimeout(na);ca.status="error";Y.reject({url:T,origUrl:T,layerId:aa.id,msg:"symbol URL can't be switched to https",code:"sym_010",type:"symbol"})}),5E3);v.byId(da+"_testImage").src=ea;return Y}function V(aa,ea){var Y=aa.configLayer,T=aa.from,ca=aa.to,M=aa.checkedItemsList,U=new c;if(Y.itemId&&!ea.item)if(M[Y.itemId])if("inProgress"===M[Y.itemId].status)var da=setInterval(G.hitch(this,function(ja,na){"inProgress"!==M[ja.itemId].status&&(clearInterval(da),na.itemAccess=
M[ja.itemId].refObj.itemAccess,na.item=M[ja.itemId].refObj.item,U.resolve(na))},Y,ea),1E3);else ea.itemAccess=M[Y.itemId].refObj.itemAccess,ea.item=M[Y.itemId].refObj.item,U.resolve(ea);else M[Y.itemId]={status:"inProgress",refObj:ea},ka(Y.itemId).then(function(ja){ea.itemAccess=!0;var na={};if(ja&&ja.url){ea.item={url:ja.url,origUrl:ja.url,type:"layer"};if(S(ea.origUrl,ja.url)&&!S(ea.origUrl,ea.url))G.mixin(ea.item,{url:ea.url,msg:ea.msg,code:ea.code}),na.url=ja.url.replace(T,ca);else if(S(ea.origUrl,
ja.url)&&S(ea.origUrl,ea.url))G.mixin(ea.item,{msg:ea.msg,code:ea.code});else if(S(ea.url,ja.url))G.mixin(ea.item,{msg:"Layer URL is already "+ca+".",code:"layer_002"});else if(!S(ea.origUrl,ja.url)&&!S(ea.url,ja.url))if(-1<K.indexOf("CSV GeoRSS KML WebTiledLayer WFS WMS".split(" "),Y.layerType||Y.type))M[Y.itemId].status="done",U.resolve(ea);else{var oa=G.clone(Y);delete oa.itemId;Y.url?oa.url=ja.url:Y.styleUrl&&(oa.styleUrl=ja.url);var ra=G.clone(aa);ra.configLayer=oa;g(ra).then(function(ua){na.url=
ua.url;ea.item=ua;ba(aa,ja,ea,na).then(function(wa){M[Y.itemId].status="done";U.resolve(wa)})},function(ua){ea.item=ua;ba(aa,ja,ea,na).then(function(wa){M[Y.itemId].status="done";U.resolve(wa)})});return}ba(aa,ja,ea,na).then(function(ua){M[Y.itemId].status="done";U.resolve(ua)})}else ja?(ea.item={url:"",origUrl:"",type:"layer"},ba(aa,ja,ea,na).then(function(ua){M[Y.itemId].status="done";U.resolve(ua)})):(ea.itemAccess=!1,M[Y.itemId].status="done",U.resolve(ea))},function(ja){ea.itemAccess=!1;M[Y.itemId].status=
"done";U.resolve(ea)});else U.resolve(ea);return U}function ba(aa,ea,Y,T){var ca=aa.configLayer,M=aa.checkRenderer,U=new c;la(ea.id).then(function(da){if(da&&"Feature Collection"===ea.type)if(M&&da.layers){var ja=G.clone(ca);delete ja.itemId;ja.featureCollection={layers:da.layers};x({configLayer:ja,from:"http://",to:"https://",checkRenderer:M,type:null}).then(function(oa){G.mixin(Y.item,oa);T.text=f.stringify(da);ma(ea,T).then(function(ra){U.resolve(Y)},function(){G.mixin(Y.item,{msg:"Item update failure.",
code:"layer_020"});U.resolve(Y)})},function(oa){U.resolve(Y)})}else U.resolve(Y);else if(da&&da.layers){var na=!1;I(ca,aa,da,Y).then(function(oa){oa.item.queryLayers&&K.forEach(oa.item.queryLayers,function(ra){ra.url!==ra.origUrl&&(na=!0)});M?J(ca,da,oa).then(function(ra){ra.item.renderers&&!na?K.forEach(ra.item.renderers,function(ua){ua.renderer!==ua.origRenderer&&(na=!0)}):ra.item.symbols&&!na&&K.forEach(ra.item.symbols,function(ua){ua.url!==ua.origUrl&&(na=!0)});na&&(T.text=f.stringify(da));ma(ea,
T).then(function(ua){U.resolve(ra)},function(){G.mixin(ra.item,{msg:"Item update failure.",code:"layer_020"});U.resolve(ra)})}):(na&&(T.text=f.stringify(da)),ma(ea,T).then(function(ra){U.resolve(oa)},function(){G.mixin(oa.item,{msg:"Item update failure.",code:"layer_020"});U.resolve(oa)}))})}else ma(ea,T).then(function(oa){U.resolve(Y)},function(){G.mixin(Y.item,{msg:"Item update failure.",code:"layer_020"});U.resolve(Y)})},function(){ma(ea,T).then(function(da){U.resolve(Y)},function(){G.mixin(Y.item,
{msg:"Item update failure.",code:"layer_020"});U.resolve(Y)})});return U}function ka(aa){var ea=new c;b({url:esriGeowConfig.restBaseUrl+"content/items/"+aa,content:{f:"json"},callbackParamName:"callback",load:function(Y,T){"update"===Y.itemControl||"admin"===Y.itemControl?ea.resolve(Y):ea.reject(Error("No write access"))},error:function(Y){ea.reject(Y)}});return ea}function la(aa){var ea=new c;b({url:esriGeowConfig.restBaseUrl+"content/items/"+aa+"/data",content:{f:"json"},callbackParamName:"callback",
load:function(Y,T){Y&&delete Y._ssl;X();ea.resolve(Y)},error:function(Y){ea.reject()}});return ea}function ma(aa,ea){var Y=new c;if(arcgisonline.isEmpty(ea))Y.resolve({});else{X();var T=esriGeowConfig.restBaseUrl+"content/users/"+aa.owner;T+=aa.ownerFolder?"/"+aa.ownerFolder:"";T+="/items/"+aa.id+"/update";if("noSave"===X())Y.resolve({});else{var ca={usePost:!0};"http:"===window.location.protocol&&-1<T.indexOf("https://")&&(ca.useProxy=!0);b({url:T,content:dojo.mixin(ea,{f:"json"}),callbackParamName:"callback",
load:function(M,U){Y.resolve(M)},error:function(M){Y.reject(M)}},ca)}}return Y}function ha(){var aa=new c,ea=[];esriGeowConfig.self.isPortal?b({url:esriGeowConfig.restBaseUrl+"portals/self/servers",content:{f:"json"},callbackParamName:"callback",load:function(Y,T){Y.servers&&(arcgisonline.sharing.util.setFederatedServers(Y.servers||[]),dojo.forEach(Y.servers,function(ca){ca.url&&ea.push(ca.url.substring(ca.url.indexOf("//")))}));aa.resolve(ea)},error:function(Y){aa.resolve(ea)}}):aa.resolve(ea);return aa}
function Z(aa,ea){var Y,T;for(Y=0;Y<aa.operationalLayers.length;Y++){if(aa.operationalLayers[Y].id===ea)return aa.operationalLayers[Y];if("GroupLayer"===aa.operationalLayers[Y].layerType){var ca=aa.operationalLayers[Y].layers;for(T=0;T<ca.length;T++)if(ca[T].id===ea)return ca[T]}}if(aa.baseMap.baseMapLayers)for(Y=0;Y<aa.baseMap.baseMapLayers.length;Y++){if(aa.baseMap.baseMapLayers[Y].id===ea)return aa.baseMap.baseMapLayers[Y];if("GroupLayer"===aa.baseMap.baseMapLayers[Y].layerType)for(ca=aa.baseMap.baseMapLayers[Y].layers,
T=0;T<ca.length;T++)if(ca[T].id===ea)return ca[T]}if(aa.baseMap.elevationLayers)for(Y=0;Y<aa.baseMap.elevationLayers.length;Y++)if(aa.baseMap.elevationLayers[Y].id===ea)return aa.baseMap.elevationLayers[Y];if(aa.ground&&aa.ground.layers)for(Y=0;Y<aa.ground.layers.length;Y++)if(aa.ground.layers[Y].id===ea)return aa.ground.layers[Y];if(aa.tables)for(Y=0;Y<aa.tables.length;Y++)if(aa.tables[Y].id===ea)return aa.tables[Y];if(aa.presentation&&aa.presentation.slides)for(T=0;T<aa.presentation.slides.length;T++){var M=
aa.presentation.slides[T];if(M.baseMap&&M.baseMap.baseMapLayers)for(Y=0;Y<M.baseMap.baseMapLayers.length;Y++){if(M.baseMap.baseMapLayers[Y].id===ea)return M.baseMap.baseMapLayers[Y];if("GroupLayer"===M.baseMap.baseMapLayers[Y].layerType)for(ca=M.baseMap.baseMapLayers[Y].layers,T=0;T<ca.length;T++)if(ca[T].id===ea)return ca[T]}}}function W(aa,ea){switch(aa.layerType||aa.type){case "ArcGISFeatureLayer":case "ArcGISImageServiceLayer":case "ArcGISImageServiceVectorLayer":case "ArcGISMapServiceLayer":case "ArcGISStreamLayer":case "ArcGISTiledImageServiceLayer":case "ArcGISTiledMapServiceLayer":case "ArcGISTiledElevationServiceLayer":case "ArcGISSceneServiceLayer":case "PointCloudLayer":case "IntegratedMeshLayer":case void 0:return!aa.url||
-1<aa.url.indexOf("://services")&&(-1<aa.url.indexOf(".arcgis.com")||-1<aa.url.indexOf(".arcgisonline.com"))||(-1<aa.url.indexOf("://tiles")||-1<aa.url.indexOf("://utility"))&&-1<aa.url.indexOf(".arcgis.com")?null:ia(aa.url);case "VectorTileLayer":return!aa.styleUrl||-1<aa.styleUrl.indexOf(esriGeowConfig.self.portalHostname)||-1<aa.styleUrl.indexOf(esriGeowConfig.self.customBaseUrl)||-1<aa.styleUrl.indexOf("/items/")||-1<aa.styleUrl.indexOf("://tiles")&&-1<aa.url.indexOf(".arcgis.com")?null:ia(aa.styleUrl);
case "CSV":case "GeoRSS":case "KML":case "WebTiledLayer":case "WFS":case "WMS":case "BingMapsAerial":case "BingMapsRoad":case "BingMapsHybrid":case "OpenStreetMap":return null;default:return"table"===ea?-1<aa.url.indexOf(".arcgis.com")||-1<aa.url.indexOf(".arcgisonline.com")?null:ia(aa.url):null}}function Q(aa){var ea=[];K.forEach(aa.operationalLayers,function(Y){"GroupLayer"===Y.layerType?K.forEach(Y.layers,function(T){ea.push({layer:T,type:"operationalLayers.groupLayer"})}):ea.push({layer:Y,type:"operationalLayers"})});
aa.baseMap&&(K.forEach(aa.baseMap.baseMapLayers,function(Y){"GroupLayer"===Y.layerType?K.forEach(Y.layers,function(T){ea.push({layer:T,type:"baseMapLayers.groupLayer"})}):(Y.title=Y.title||aa.baseMap.title,ea.push({layer:Y,type:"baseMapLayers"}))}),K.forEach(aa.baseMap.elevationLayers,function(Y){Y.title=Y.title||aa.baseMap.title;ea.push({layer:Y,type:"elevationLayers"})}));aa.ground&&K.forEach(aa.ground.layers,function(Y){Y.title=Y.title||aa.baseMap.title;ea.push({layer:Y,type:"ground"})});K.forEach(aa.tables,
function(Y){ea.push({layer:Y,type:"tables"})});aa.presentation&&aa.presentation.slides&&K.forEach(aa.presentation.slides,function(Y){Y.baseMap&&Y.baseMap.baseMapLayers&&K.forEach(Y.baseMap.baseMapLayers,function(T){"GroupLayer"===T.layerType?K.forEach(T.layers,function(ca){ea.push({layer:ca,type:"slides.baseMapLayers.groupLayer"})}):(T.title=T.title||Y.baseMap.title,ea.push({layer:T,type:"slides.baseMapLayers"}))})});return ea}function ia(aa){aa=N(aa);var ea=aa.protocol+"://"+aa.domain;aa.port&&(ea+=
":"+aa.port);return ea+="/"+aa.instance}function R(aa,ea){var Y=N(aa),T=N(ea);return Y.domain===T.domain?!0:!1}function S(aa,ea){if(aa&&ea){var Y=aa.toLowerCase().indexOf("/featureserver/");-1<Y&&(aa=aa.substring(0,Y+14));Y=ea.toLowerCase().indexOf("/featureserver/");-1<Y&&(ea=ea.substring(0,Y+14));Y=aa.toLowerCase().indexOf("/mapserver/");-1<Y&&(aa=aa.substring(0,Y+10));Y=ea.toLowerCase().indexOf("/mapserver/");-1<Y&&(ea=ea.substring(0,Y+10));Y=aa.toLowerCase().indexOf("/sceneserver/");-1<Y&&(aa=
aa.substring(0,Y+12));Y=ea.toLowerCase().indexOf("/sceneserver/");-1<Y&&(ea=ea.substring(0,Y+12));if(aa===ea)return!0}return!1}function N(aa){var ea={};if(!aa||!aa.length)return ea;var Y=aa.indexOf("://");ea.protocol=aa.substr(0,Y);aa=aa.substr(Y+3,aa.length);Y=aa.indexOf("/");Y=-1===Y?aa.length-1:Y;ea.domain=aa.substr(0,Y);-1<ea.domain.indexOf(":")&&(ea.port=ea.domain.substr(ea.domain.indexOf(":")+1),ea.domain=ea.domain.substr(0,ea.domain.indexOf(":")));ea.path=-1===Y||Y+1===aa.length?null:aa.substr(Y+
1,aa.length);ea.instance=ea.path.split("/")[0];aa=ea.domain.split(".");switch(aa.length){case 2:ea.subdomain=null;ea.host=aa[0];ea.tld=aa[1];break;case 3:ea.subdomain=aa[0];ea.host=aa[1];ea.tld=aa[2];break;case 4:ea.subdomain=aa[0],ea.host=aa[1],ea.tld=aa[2]+"."+aa[3]}ea.host&&ea.tld&&(ea.parentDomain=ea.host+"."+ea.tld);return ea}function X(){var aa=arcgisonline.sharing.util.urlToObject(document.URL);aa.query=aa.query||{};return aa.query.debug}return{getUniqueDomains:function(aa){var ea,Y,T=[],ca=
[],M=new c,U=function(na,oa,ra,ua,wa){if(!(na.url&&-1<na.url.indexOf(esriGeowConfig.self.portalHostname)||na.styleUrl&&-1<na.styleUrl.indexOf(esriGeowConfig.self.portalHostname))){var Ba=!1;K.forEach(ua,function(Da){if(na.url&&-1<na.url.indexOf(Da)||na.styleUrl&&-1<na.styleUrl.indexOf(Da))Ba=!0});!Ba&&(ea=W(na,wa))&&(-1<oa.indexOf(ea)?(Y=oa.indexOf(ea),ra[Y].layers.push({id:na.id,title:na.title})):(oa.push(ea),ra.push({domain:ea,layers:[{id:na.id,title:na.title}]})))}},da=function(na,oa){return na.title.toLowerCase()<
oa.title.toLowerCase()?-1:1},ja=function(na,oa){na.layers=na.layers.sort(da);oa.layers=oa.layers.sort(da);return na.domain.toLowerCase()<oa.domain.toLowerCase()?-1:1};ha().then(function(na){var oa=Q(aa);K.forEach(oa,function(ra){U(ra.layer,T,ca,na,"tables"===ra.type?"table":null)});ca=ca.sort(ja);M.resolve(ca)});return M},switchToHTTPS:function(aa,ea){X();var Y=new c,T=G.clone(aa),ca={from:"http://",to:"https://",checkRenderer:!0,type:null,checkedItemsList:{}},M=[],U=[],da=Q(aa);K.forEach(da,function(ja){var na=
{config:aa,configLayer:ja.layer};"tables"===ja.type&&(na.type="table");G.mixin(na,ca);U.push(ja.layer.id);M.push(g(na))});M.length?(new a(M)).addCallback(function(ja){var na=[];K.forEach(ja,function(oa){X();oa=oa[1];if("notTested"!==oa.type){var ra=Z(aa,oa.layerId),ua={id:oa.layerId,title:ra.title};-1<K.indexOf(["layer_001"],oa.code)?ua.layerUrlChange="success":-1<K.indexOf(["layer_002","layer_003"],oa.code)?ua.layerUrlChange="none":ua.layerUrlChange="failure";oa.queryLayers&&(ua.layerQueryUrlChanged=
!1,ua.layerQueryUrlFailures=!1,K.forEach(oa.queryLayers,function(wa){-1<K.indexOf(["layer_001"],wa.code)?ua.layerQueryUrlChanged=!0:-1<K.indexOf(["layer_002","layer_003"],wa.code)||(ua.layerQueryUrlFailures=!0)}));if(oa.renderers||oa.symbols)ua.layerRenderingChanged=!1,ua.layerRenderingFailures=!1,K.forEach(oa.renderers,function(wa){K.forEach(wa.symbols,function(Ba){-1<K.indexOf(["sym_010"],Ba.code)&&(ua.layerRenderingFailures=!0);-1<K.indexOf(["sym_001"],Ba.code)&&(ua.layerRenderingChanged=!0)})}),
K.forEach(oa.symbols,function(wa){-1<K.indexOf(["sym_010"],wa.code)&&(ua.layerRenderingFailures=!0);-1<K.indexOf(["sym_001"],wa.code)&&(ua.layerRenderingChanged=!0)});ra.itemId&&(ua.itemAccess=oa.itemAccess)&&(-1<K.indexOf(["layer_001"],oa.item.code)?ua.itemUrlChange="success":-1<K.indexOf(["layer_020"],oa.item.code)?(ua.itemUrlChange="success",ua.itemAccess=!1):-1<K.indexOf(["layer_002","layer_003"],oa.item.code)?ua.itemUrlChange="none":ua.itemUrlChange="failure",oa.item.queryLayers&&(ua.itemQueryUrlChanged=
!1,ua.itemQueryUrlFailures=!1,K.forEach(oa.item.queryLayers,function(wa){-1<K.indexOf(["layer_001"],wa.code)?ua.itemQueryUrlChanged=!0:-1<K.indexOf(["layer_002","layer_003"],wa.code)||(ua.itemQueryUrlFailures=!0)})),oa.item.renderers||oa.item.symbols)&&(ua.itemRenderingChanged=!1,ua.itemRenderingFailures=!1,K.forEach(oa.item.renderers,function(wa){K.forEach(wa.symbols,function(Ba){-1<K.indexOf(["sym_010"],Ba.code)&&(ua.itemRenderingFailures=!0);-1<K.indexOf(["sym_001"],Ba.code)&&(ua.itemRenderingChanged=
!0)})}),K.forEach(oa.item.symbols,function(wa){-1<K.indexOf(["sym_010"],wa.code)&&(ua.itemRenderingFailures=!0);-1<K.indexOf(["sym_001"],wa.code)&&(ua.itemRenderingChanged=!0)}));na.push(ua)}});aa.presentation&&aa.presentation.slides&&K.forEach(aa.presentation.slides,function(oa){oa.baseMap&&oa.baseMap.baseMapLayers&&K.forEach(oa.baseMap.baseMapLayers,function(ra,ua){if(-1<K.indexOf(U,ra.id)){var wa=Z(aa,ra.id);oa.baseMap.baseMapLayers[ua]=wa}})});X();ja=f.stringify(T)===f.stringify(aa);X();ja||"noSave"===
X()?Y.resolve({layers:na,configChange:"none"}):d(aa,ea).then(function(){Y.resolve({layers:na,configChange:"success"})},function(oa){Y.resolve({layers:na,configChange:"failure"})})}):Y.resolve({layers:[]});return Y},switchDomain:function(aa,ea,Y,T){var ca=new c,M=[];if(!(aa&&ea&&Y&&T))return ca.resolve({layers:[]}),ca;var U=G.clone(aa),da={from:Y,to:T,type:null,checkedItemsList:{}};Y=Q(aa);K.forEach(Y,function(ja){var na={configLayer:ja.layer};"tables"===ja.type&&(na.type="table");G.mixin(na,da);W(na.configLayer,
na.type)===na.from&&M.push(g(na))});M.length?(new a(M)).addCallback(function(ja){var na=[];K.forEach(ja,function(oa){X();oa=oa[1];var ra=Z(aa,oa.layerId),ua={id:oa.layerId,title:ra.title};-1<K.indexOf(["layer_001"],oa.code)?ua.layerUrlChange="success":-1<K.indexOf(["layer_002","layer_003"],oa.code)?ua.layerUrlChange="none":ua.layerUrlChange="failure";ra.itemId&&(ua.itemAccess=oa.itemAccess)&&(-1<K.indexOf(["layer_001"],oa.item.code)?ua.itemUrlChange="success":-1<K.indexOf(["layer_020"],oa.item.code)?
(ua.itemUrlChange="success",ua.itemAccess=!1):-1<K.indexOf(["layer_002","layer_003"],oa.item.code)?ua.itemUrlChange="none":ua.itemUrlChange="failure");na.push(ua)});X();ja=f.stringify(U)===f.stringify(aa);X();ja||"noSave"===X()?ca.resolve({layers:na,configChange:"none"}):d(aa,ea).then(function(){ca.resolve({layers:na,configChange:"success"})},function(oa){ca.resolve({layers:na,configChange:"failure"})})}):ca.resolve({layers:[]});return ca}}})},"esri/layers/VectorTileLayer":function(){(function(){var K=
function(){try{var w=window.WebGLRenderingContext}catch(b){w=!1}try{for(var v=document.createElement("canvas"),r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],f=null,c=0;c<r.length;++c){try{f=v.getContext(r[c])}catch(b){}if(f)break}var a=f}catch(b){a=!1}return w&&a?!0:!1}(),G=["dojo/_base/lang","dojo/has","dojo/Deferred","../sniff","./layer"];K&&G.push("./VectorTileLayerImpl");define(G,function(w,v,r,f,c,a){v=a?a:c.createSubclass({declaredClass:"esri.layers.VectorTileLayer",constructor:function(){var b=
new r;b.reject(Error("esri.layers.VectorTileLayer is not supported"));b.promise.otherwise(w.hitch(this,function(p){this._errorHandler(p)}))}});v.ACCESS_TOKEN=null;v.supported=function(){return K};w.setObject("layers.VectorTileLayer",v,f);return v})})()},"esri/layers/CSVLayer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../arcgis/csv ./FeatureLayer ../geometry/Extent ../tasks/FeatureSet".split(" "),function(K,G,w,v,r,f,c,a,b){G=G(c,{declaredClass:"esri.layers.CSVLayer",
_preventInit:!0,_fieldTypeMap:{Date:"esriFieldTypeDate",Number:"esriFieldTypeDouble",String:"esriFieldTypeString"},constructor:function(p,q){this.url=p;q=w.mixin({},q);this.columnDelimiter=q.columnDelimiter;this.latitudeFieldName=q.latitudeFieldName;this.longitudeFieldName=q.longitudeFieldName;var t=q.layerDefinition;t||(t={fields:q.fields||[],geometryType:"esriGeometryPoint",copyrightText:q.copyright},q.fields&&K.forEach(q.fields,function(m){m.type=this._fieldTypeMap[m.type||"String"];m.alias||(m.alias=
m.name)},this));this._buildCsvFcParam={url:this.url,columnDelimiter:this.columnDelimiter,layerDefinition:t,outFields:q.outFields};this.latitudeFieldName&&this.longitudeFieldName&&(this._buildCsvFcParam.locationInfo={locationType:"coordinates",latitudeFieldName:this.latitudeFieldName,longitudeFieldName:this.longitudeFieldName});this._projectFeatures=w.hitch(this,this._projectFeatures);this._addFeatures=w.hitch(this,this._addFeatures);this._initCSVLayer(q)},refresh:function(){this._fireUpdateStart();
this.applyEdits(null,null,this.graphics);this._loadFeatures()},_isWebGLCompatible:function(){return!1},_setMap:function(p){var q=this.inherited(arguments);this._fireUpdateStart();this._projectFeatures(this._csvFC).then(this._addFeatures).otherwise(this._errorHandler);this._csvFC=null;return q},_initCSVLayer:function(p){var q=this;f.buildCSVFeatureCollection(this._buildCsvFcParam).then(function(t){!q._buildCsvFcParam.locationInfo||q.latitudeFieldName&&q.longitudeFieldName||(q.latitudeFieldName=q._buildCsvFcParam.locationInfo.latitudeFieldName,
q.longitudeFieldName=q._buildCsvFcParam.locationInfo.longitudeFieldName);q._csvFC=t;var m=t.layerDefinition;m.extent=q._getFCExtent(t);p.outFields||(p.outFields=["*"]);p.timeInfo&&(m.timeInfo=p.timeInfo);q._initFeatureLayer({layerDefinition:m},p)}).otherwise(this._errorHandler)},_loadFeatures:function(){f.buildCSVFeatureCollection(this._buildCsvFcParam).then(this._projectFeatures).then(this._addFeatures).otherwise(this._errorHandler)},_projectFeatures:function(p){return f.projectFeatureCollection(p,
this._map.spatialReference)},_addFeatures:function(p){p=new b(p.featureSet);this.applyEdits(p.features,null,null);this._fireUpdateEnd()},_getFCExtent:function(p){if(p&&p.featureSet&&p.featureSet.features){p=p.featureSet.features;var q=p.length;if(1<q){var t=p[0].geometry;var m=new a(t.x,t.y,t.x,t.y);for(--q;0<q;q--)t=p[q].geometry,m.xmin=Math.min(m.xmin,t.x),m.ymin=Math.min(m.ymin,t.y),m.xmax=Math.max(m.xmax,t.x),m.ymax=Math.max(m.ymax,t.y);0>=m.getWidth()&&0>=m.getHeight()&&(m=null)}}return m}});
w.setObject("layers.CSVLayer",G,r);return G})},"esri/arcgis/csv":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/number dojox/data/CsvStore ../kernel ../config ../request ../SpatialReference ../geometry/jsonUtils ../geometry/webMercatorUtils".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t){function m(x){var y=0,B="";G.forEach([","," ",";","|","\t"],function(C){var z=x.split(C).length;z>y&&(y=z,B=C)});return B}function n(x,y){if(!x||"[object Date]"!==Object.prototype.toString.call(x)||
isNaN(x.getTime()))return!1;var B=!0;if(v("chrome")&&/\d+\W*$/.test(y)){if(y.match(/[^0-9a-zA-Z\s]/))return!1;var C=y.match(/[a-zA-Z]{2,}/);if(C){B=!1;for(var z=0,D=C.length,E=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;!B&&z<=D&&!(B=!E.test(C[z]));)z++;B=!B}}return B}function k(x,y,B){var C=x.indexOf("\n");C=K.trim(x.substr(0,C));var z=y.columnDelimiter;z||(z=m(C));var D=
new f({data:x,separator:z});D.fetch({onComplete:function(E,A){var F=0,H={layerDefinition:y.layerDefinition,featureSet:{features:[],geometryType:"esriGeometryPoint"}},I=H.layerDefinition.objectIdField,L=H.layerDefinition.fields;I||G.some(L,function(W){return"esriFieldTypeOID"===W.type?(I=W.name,!0):!1})||(L.push({name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1}),I="__OBJECTID");var J=D._attributes,O=[],P=[];G.forEach(L,function(W){"esriFieldTypeDate"===W.type?O.push(W.name):
("esriFieldTypeDouble"===W.type||"esriFieldTypeInteger"===W.type)&&P.push(W.name)});if(y.locationInfo&&"coordinates"===y.locationInfo.locationType){var fa=y.locationInfo.latitudeFieldName;var V=y.locationInfo.longitudeFieldName}else G.forEach(J,function(W){var Q=G.indexOf(d,W.toLowerCase());-1!==Q&&(fa=W);Q=G.indexOf(g,W.toLowerCase());-1!==Q&&(V=W)}),fa&&V&&(y.locationInfo={locationType:"coordinates",latitudeFieldName:fa,longitudeFieldName:V});if(fa&&V){-1===G.indexOf(P,fa)&&P.push(fa);-1===G.indexOf(P,
V)&&P.push(V);if(K.isArray(y.outFields)&&-1===G.indexOf(y.outFields,"*"))var ba=y.outFields;G.forEach(J,function(W){G.some(L,function(Q){return W===Q.name})||L.push({name:W,alias:W,type:W===fa||W===V?"esriFieldTypeDouble":"esriFieldTypeString"})});J=0;var ka=E.length;for(J;J<ka;J++){var la=E[J],ma=D.getAttributes(la),ha={};G.forEach(ma,function(W){if(W&&(W===fa||W===V||!ba||-1<G.indexOf(ba,W))){var Q=W;0===W.length&&G.forEach(L,function(R,S){R.name==="attribute_"+(S-1)&&(W="attribute_"+(S-1))});if(-1<
G.indexOf(O,W)){Q=D.getValue(la,Q);var ia=new Date(Q);ha[W]=n(ia,Q)?ia.getTime():null}else-1<G.indexOf(P,W)?(ia=r.parse(D.getValue(la,Q)),W!==fa&&W!==V||!(isNaN(ia)||181<Math.abs(ia))||(ia=parseFloat(D.getValue(la,Q))),isNaN(ia)?ha[W]=null:ha[W]=ia):ha[W]=D.getValue(la,Q)}});ha[I]=F;F++;ma=ha[fa];var Z=ha[V];null==Z||null==ma||isNaN(ma)||isNaN(Z)||(ba&&-1===G.indexOf(ba,fa)&&delete ha[fa],ba&&-1===G.indexOf(ba,V)&&delete ha[V],H.featureSet.features.push({geometry:{x:Z,y:ma,spatialReference:{wkid:4326}},
attributes:ha}))}H.layerDefinition.name="csv";B&&B(H)}else setTimeout(function(){},1),B&&B(null,Error("File does not seem to contain fields with point coordinates."))},onError:function(E){B&&B(null,E)}});return!0}function l(x,y,B,C,z,D){0===x.length&&z(null);var E=q.getGeometryType(y),A=[];G.forEach(x,function(F){F=new E(F);F.spatialReference=B;A.push(F)},this);y=[102113,102100,3857];B.wkid&&4326===B.wkid&&C.wkid&&-1<G.indexOf(y,C.wkid)?(G.forEach(A,function(F){F.xmin?(F.xmin=Math.max(F.xmin,-180),
F.xmax=Math.min(F.xmax,180),F.ymin=Math.max(F.ymin,-89.99),F.ymax=Math.min(F.ymax,89.99)):F.rings?G.forEach(F.rings,function(H){G.forEach(H,function(I){I[0]=Math.min(Math.max(I[0],-180),180);I[1]=Math.min(Math.max(I[1],-89.99),89.99)},this)},this):F.paths?G.forEach(F.paths,function(H){G.forEach(H,function(I){I[0]=Math.min(Math.max(I[0],-180),180);I[1]=Math.min(Math.max(I[1],-89.99),89.99)},this)},this):F.x&&(F.x=Math.min(Math.max(F.x,-180),180),F.y=Math.min(Math.max(F.y,-89.99),89.99))},this),x=[],
G.forEach(A,function(F){F=t.geographicToWebMercator(F);102100!==C.wkid&&(F.spatialReference=C);x.push(F.toJson())},this),z(x)):null!==B.wkid&&-1<G.indexOf(y,B.wkid)&&null!==C.wkid&&4326===C.wkid?(x=[],G.forEach(A,function(F){x.push(t.webMercatorToGeographic(F).toJson())},this),z(x)):(y=function(F,H){F&&F.length===x.length?(x=[],G.forEach(F,function(I){I&&(I.rings&&0<I.rings.length&&0<I.rings[0].length&&0<I.rings[0][0].length&&!isNaN(I.rings[0][0][0])&&!isNaN(I.rings[0][0][1])||I.paths&&0<I.paths.length&&
0<I.paths[0].length&&0<I.paths[0][0].length&&!isNaN(I.paths[0][0][0])&&!isNaN(I.paths[0][0][1])||I.xmin&&!isNaN(I.xmin)&&I.ymin&&!isNaN(I.ymin)||I.x&&!isNaN(I.x)&&I.y&&!isNaN(I.y))?x.push(I.toJson()):x.push(null)},this),z(x)):D(F,H)},a.defaults.geometryService?a.defaults.geometryService.project(A,C,K.hitch(this,y),D):z(null))}function h(x,y){var B=[102113,102100,3857];return x&&y&&x.wkid===y.wkid&&x.wkt===y.wkt||x&&y&&x.wkid&&y.wkid&&-1<G.indexOf(B,x.wkid)&&-1<G.indexOf(B,y.wkid)?!0:!1}function e(x,
y,B,C){if(x.featureSet&&0!==x.featureSet.features.length)if(h(B,y))C(x);else{var z=function(F){var H=[];G.forEach(x.featureSet.features,function(I,L){F[L]&&(I.geometry=F[L],H.push(I))},this);C(x)},D=function(F,H){C(x)},E=function(F,H){l(A,x.featureSet.geometryType,y,B,K.hitch(this,z),K.hitch(this,D))};if(x.featureSet.features&&0<x.featureSet.features.length){var A=[];G.forEach(x.featureSet.features,function(F){if(F.geometry.toJson)A.push(F.geometry);else{var H=q.getGeometryType(x.featureSet.geometryType);
A.push(new H(F.geometry))}});y.toJson||(y=new p(y));B.toJson||(B=new p(B));l(A,x.featureSet.geometryType,y,B,K.hitch(this,z),K.hitch(this,E))}else C(x)}}var d="lat latitude y ycenter latitude83 latdecdeg point-y lat_dd".split(" "),g="lon lng long longitude x xcenter longitude83 longdecdeg point-x long_dd".split(" "),u={latFieldStrings:d,longFieldStrings:g,buildCSVFeatureCollection:function(x){var y=new w,B=function(z,D){D?y.errback(D):y.callback(z)},C={url:x.url,handleAs:"text",load:function(z){k(z,
x,K.hitch(this,B))},error:function(z){y.errback(z)}};-1<x.url.indexOf("arcgis.com")&&-1<x.url.indexOf("/content/items")&&-1<x.url.indexOf("/data")&&(C.headers={"Content-Type":""});b(C,{usePost:!1});return y},projectFeatureCollection:function(x,y,B){var C=new w;B||(B=new p({wkid:4326}));e(x,B,y,K.hitch(this,function(z){C.callback(z)}));return C},generateDefaultPopupInfo:function(x){var y={esriFieldTypeDouble:1,esriFieldTypeSingle:1},B={esriFieldTypeInteger:1,esriFieldTypeSmallInteger:1},C={esriFieldTypeDate:1},
z=null;x=G.map(x.layerDefinition.fields,K.hitch(this,function(D){"NAME"===D.name.toUpperCase()&&(z=D.name);var E="esriFieldTypeOID"!==D.type&&"esriFieldTypeGlobalID"!==D.type&&"esriFieldTypeGeometry"!==D.type,A=null;if(E){var F=D.name.toLowerCase();if(-1<",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,".indexOf(","+F+",")||-1<F.indexOf("area")||-1<F.indexOf("length")||-1<F.indexOf("shape")||-1<F.indexOf("perimeter")||-1<F.indexOf("objectid")||F.indexOf("_")===
F.length-1||F.indexOf("_i")===F.length-2&&1<F.length)E=!1;D.type in B?A={places:0,digitSeparator:!0}:D.type in y?A={places:2,digitSeparator:!0}:D.type in C&&(A={dateFormat:"shortDateShortTime"})}return K.mixin({},{fieldName:D.name,label:D.alias,isEditable:!0,tooltip:"",visible:E,format:A,stringFieldOption:"textbox"})}));return{title:z?"{"+z+"}":"",fieldInfos:x,description:null,showAttachments:!1,mediaInfos:[]}},_getSeparator:m,_isValidDate:n,_processCsvData:k,_projectGeometries:l,_sameSpatialReference:h,
_projectFeatureSet:e};K.setObject("arcgis.csv",u,c);return u})},"dojox/data/CsvStore":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/xhr dojo/_base/kernel dojo/data/util/filter dojo/data/util/simpleFetch".split(" "),function(K,G,w,v,r,f){G=G("dojox.data.CsvStore",null,{constructor:function(c){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=!1;c.url&&(this.url=c.url);this._csvData=c.data;c.label?this.label=c.label:""===
this.label&&(this.label=void 0);this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=c.identifier;""===this.identifier?delete this.identifier:this._idMap={};"separator"in c&&(this.separator=c.separator);"urlPreventCache"in c&&(this.urlPreventCache=c.urlPreventCache?!0:!1)},url:"",label:"",identifier:"",separator:",",urlPreventCache:!1,_assertIsItem:function(c){if(!this.isItem(c))throw Error(this.declaredClass+
": a function was passed an item argument that was not an item");},_getIndex:function(c){c=this.getIdentity(c);this.identifier&&(c=this._idMap[c]);return c},getValue:function(c,a,b){this._assertIsItem(c);var p=b;if("string"===typeof a)a=this._attributeIndexes[a],null!=a&&(p=this._dataArray[this._getIndex(c)][a]||b);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");return p},getValues:function(c,a){var b=this.getValue(c,a);return b?[b]:[]},getAttributes:function(c){this._assertIsItem(c);
var a=[];c=this._dataArray[this._getIndex(c)];for(var b=0;b<c.length;b++)""!==c[b]&&a.push(this._attributes[b]);return a},hasAttribute:function(c,a){this._assertIsItem(c);if("string"===typeof a){var b=this._attributeIndexes[a],p=this._dataArray[this._getIndex(c)];return"undefined"!==typeof b&&b<p.length&&""!==p[b]}throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");},containsValue:function(c,a,b){var p=void 0;"string"===typeof b&&(p=r.patternToRegExp(b,
!1));return this._containsValue(c,a,b,p)},_containsValue:function(c,a,b,p){c=this.getValues(c,a);for(a=0;a<c.length;++a){var q=c[a];if("string"===typeof q&&p)return null!==q.match(p);if(b===q)return!0}return!1},isItem:function(c){if(c&&c[this._storeProp]===this)if(c=c[this._idProp],this.identifier){if(this._dataArray[this._idMap[c]])return!0}else if(0<=c&&c<this._dataArray.length)return!0;return!1},isItemLoaded:function(c){return this.isItem(c)},loadItem:function(c){},getFeatures:function(){return this._features},
getLabel:function(c){if(this.label&&this.isItem(c))return this.getValue(c,this.label)},getLabelAttributes:function(c){return this.label?[this.label]:null},_fetchItems:function(c,a,b){var p=this,q=function(k,l){var h=null;if(k.query){var e;h=[];var d=k.queryOptions?k.queryOptions.ignoreCase:!1,g={};for(e in k.query){var u=k.query[e];"string"===typeof u&&(g[e]=r.patternToRegExp(u,d))}for(d=0;d<l.length;++d){var x=!0,y=l[d];for(e in k.query)u=k.query[e],p._containsValue(y,e,u,g[e])||(x=!1);x&&h.push(y)}}else h=
l.slice(0,l.length);a(h,k)};if(this._loadFinished)q(c,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:c,filter:q});else{this._loadInProgress=!0;var t=w.get({url:p.url,handleAs:"text",preventCache:p.urlPreventCache});t.addCallback(function(k){try{p._processData(k),q(c,p._arrayOfAllItems),p._handleQueuedFetches()}catch(l){b(l,c)}});t.addErrback(function(k){p._loadInProgress=!1;if(b)b(k,c);else throw k;});var m=null;c.abort&&(m=c.abort);c.abort=function(){var k=
t;k&&-1===k.fired&&(k.cancel(),k=null);m&&m.call(c)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,q(c,this._arrayOfAllItems)}catch(k){b(k,c)}else{var n=Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(b)b(n,c);else throw n;}},close:function(c){},_getArrayOfArraysFromCsvFileContents:function(c){if(K.isString(c)){var a=RegExp("^\\s+","g"),b=RegExp("\\s+$","g"),p=RegExp('""',"g"),q=[],t=this._splitLines(c);for(c=0;c<
t.length;++c){var m=t[c];if(0<m.length){m=m.split(this.separator);for(var n=0;n<m.length;){var k=m[n].replace(a,""),l=k.replace(b,""),h=l.charAt(0),e=l.charAt(l.length-1),d=l.charAt(l.length-2),g=l.charAt(l.length-3);if(2===l.length&&'""'==l)m[n]="";else if('"'==h&&('"'!=e||'"'==e&&'"'==d&&'"'!=g)){if(n+1===m.length)return;m[n]=k+this.separator+m[n+1];m.splice(n+1,1)}else'"'==h&&'"'==e&&(l=l.slice(1,l.length-1),l=l.replace(p,'"')),m[n]=l,n+=1}q.push(m)}}this._attributes=q.shift();for(c=0;c<this._attributes.length;c++)this._attributeIndexes[this._attributes[c]]=
c;this._dataArray=q}},_splitLines:function(c){var a=[],b,p="",q=!1;for(b=0;b<c.length;b++){var t=c.charAt(b);switch(t){case '"':q=!q;p+=t;break;case "\r":q?p+=t:(a.push(p),p="",b<c.length-1&&"\n"==c.charAt(b+1)&&b++);break;case "\n":q?p+=t:(a.push(p),p="");break;default:p+=t}}""!==p&&a.push(p);return a},_processData:function(c){this._getArrayOfArraysFromCsvFileContents(c);this._arrayOfAllItems=[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");
for(c=0;c<this._dataArray.length;c++){var a=c;this.identifier&&(a=this._dataArray[c][this._attributeIndexes[this.identifier]],this._idMap[a]=c);this._arrayOfAllItems.push(this._createItemFromIdentity(a))}this._loadFinished=!0;this._loadInProgress=!1},_createItemFromIdentity:function(c){var a={};a[this._storeProp]=this;a[this._idProp]=c;return a},getIdentity:function(c){return this.isItem(c)?c[this._idProp]:null},fetchItemByIdentity:function(c){var a=c.scope?c.scope:v.global;if(this._loadFinished){var b=
this._createItemFromIdentity(c.identity);this.isItem(b)||(b=null);c.onItem&&c.onItem.call(a,b)}else{var p=this;if(""!==this.url)this._loadInProgress?this._queuedFetches.push({args:c}):(this._loadInProgress=!0,b=w.get({url:p.url,handleAs:"text"}),b.addCallback(function(q){try{p._processData(q);var t=p._createItemFromIdentity(c.identity);p.isItem(t)||(t=null);c.onItem&&c.onItem.call(a,t);p._handleQueuedFetches()}catch(m){c.onError&&c.onError.call(a,m)}}),b.addErrback(function(q){this._loadInProgress=
!1;c.onError&&c.onError.call(a,q)}));else if(this._csvData)try{p._processData(p._csvData),p._csvData=null,b=p._createItemFromIdentity(c.identity),p.isItem(b)||(b=null),c.onItem&&c.onItem.call(a,b)}catch(q){c.onError&&c.onError.call(a,q)}}},getIdentityAttributes:function(c){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var c=0;c<this._queuedFetches.length;c++){var a=this._queuedFetches[c],b=a.filter,p=a.args;b?b(p,this._arrayOfAllItems):
this.fetchItemByIdentity(a.args)}this._queuedFetches=[]}}});K.extend(G,f);return G})},"esri/layers/KMLLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/sniff dojo/io-query dojo/dom-construct dojo/dom-style ../kernel ../config ../lang ../request ../urlUtils ../SpatialReference ../geometry/webMercatorUtils ../dijit/PopupTemplate ./layer ./KMLFolder ./KMLGroundOverlay ./MapImageLayer ./FeatureLayer".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y){var B=G([d],{declaredClass:"esri.layers.KMLLayer",serviceUrl:k.getProtocolForWebResource()+"//utility.arcgis.com/sharing/kml",constructor:function(C,z){this._url=k.urlToObject(this.url=C);this._outSR=z&&z.outSR||new l({wkid:4326});this._options=v.mixin({},z);t.defaults.kmlService&&(this.serviceUrl=t.defaults.kmlService);var D=this.linkInfo=z&&z.linkInfo;D&&(this.visible=!!D.visibility,this._waitingForMap=!!D.viewFormat);(!D||D&&D.visibility&&
!this._waitingForMap)&&this._parseKml();this.refresh=v.hitch(this,this.refresh);this.registerConnectEvents("esri.layers.KMLLayer",!0)},getFeature:function(C){if(C){var z=C.type,D=C.id,E;switch(z){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":(C=this["_"+z])&&(E=v.getObject("_mode._featureMap."+D,!1,C));break;case "GroundOverlay":if(C=this._groundLyr){var A=C.getImages();z=A.length;for(C=0;C<z;C++)if(A[C].id===D){E=A[C];break}}break;case "NetworkLink":r.some(this._links,
function(F){return F.linkInfo&&F.linkInfo.id===D?(E=F,!0):!1});break;case "Folder":for(z=(A=this.folders)?A.length:0,C=0;C<z;C++)if(A[C].id===D){E=A[C];break}}return E}},getLayers:function(){var C=[];this._groundLyr&&C.push(this._groundLyr);this._fLayers&&(C=C.concat(this._fLayers));this._links&&r.forEach(this._links,function(z){z.declaredClass&&C.push(z)});return C},setFolderVisibility:function(C,z){C&&(this._fireUpdateStart(),(C.visible=z)&&(z=this._areLocalAncestorsVisible(C)),this._setState(C,
z),this._fireUpdateEnd())},_eventMap:{"network-link-error":["error"]},onRefresh:function(){},onOpacityChange:function(){},onNetworkLinkError:function(){},_parseKml:function(C){var z=this;this._fireUpdateStart();this._io=n({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(C),model:"simple",folders:"",refresh:this.loaded?!0:void 0,outSR:f.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(D){z._io=null;z._initLayer(D)},error:function(D){z._io=null;D=v.mixin(Error(),
D);D.message="Unable to load KML: "+(D.message||"");z._fireUpdateEnd(D);z._errorHandler(D)}})},_initLayer:function(C){if(this.loaded){var z=[];r.forEach(this.folders,function(L){L.visible&&z.push(L.id)});this._options.minScale=this.minScale;this._options.maxScale=this.maxScale;this._options.opacity=this.opacity;this._removeInternalLayers()}this.name=C.name;this.description=C.description;this.snippet=C.snippet;this.visibility=C.visibility;this.featureInfos=C.featureInfos;var D,E=this.folders=C.folders,
A=[];if(E){var F=E.length;for(D=0;D<F;D++){var H=E[D]=new g(E[D]);-1===H.parentFolderId&&A.push(H)}}E=this._links=C.networkLinks;F=E?E.length:0;for(D=0;D<F;D++)if(!E[D].viewRefreshMode||-1===E[D].viewRefreshMode.toLowerCase().indexOf("onregion")){var I=v.mixin({},this._options);I.linkInfo=E[D];I.id&&(I.id=I.id+"_"+D);H=E[D]=new B(E[D].href,I);H._parentLayer=this;H._parentFolderId=this._getLinkParentId(H.linkInfo.id);H._linkErrorHandle=H.on("error,network-link-error",v.hitch(H,function(L){this._parentLayer.onNetworkLinkError(L.error)}))}if((E=
C.groundOverlays)&&0<E.length)for(I=v.mixin({},this._options),I.id&&(I.id+="_mapImage"),H=this._groundLyr=new x(I),F=E.length,D=0;D<F;D++)H.addImage(new u(E[D]));(C=v.getObject("featureCollection.layers",!1,C))&&0<C.length&&(this._fLayers=[],r.forEach(C,function(L,J){var O=v.getObject("featureSet.features",!1,L);O&&0<O.length&&(I=v.mixin({outFields:["*"],infoTemplate:L.popupInfo?new e(L.popupInfo):null,editable:!1},this._options),I.id&&(I.id=I.id+"_"+J),I.webgl=!1,L.layerDefinition.capabilities="Query,Data",
O=new y(L,I),O.geometryType&&(this["_"+O.geometryType]=O),this._fLayers.push(O))},this),0===this._fLayers.length&&delete this._fLayers);if(!this.loaded)for(F=A.length,D=0;D<F;D++)H=A[D],this._setState(H,H.visible);this._fireUpdateEnd();this.loaded?(this._addInternalLayers(),r.forEach(this.folders,function(L){-1<r.indexOf(z,L.id)?this.setFolderVisibility(L,!0):this.setFolderVisibility(L,!1)},this),this.onRefresh()):(this.loaded=!0,this.onLoad(this))},_addInternalLayers:function(){var C=this._map;this._fireUpdateStart();
this._links&&r.forEach(this._links,function(A){A.declaredClass&&(C.addLayer(A),A._waitingForMap&&(A._waitingForMap=null,A.visible?A._parseKml(C):A._wMap=C))});var z=C.spatialReference,D=this._outSR;if(!z.equals(D))if(z.isWebMercator()&&4326===D.wkid)var E=h.geographicToWebMercator;else if(D.isWebMercator()&&4326===z.wkid)E=h.webMercatorToGeographic;else return;this._groundLyr&&(E&&r.forEach(this._groundLyr.getImages(),function(A){A.extent=E(A.extent)}),C.addLayer(this._groundLyr));(z=this._fLayers)&&
0<z.length&&r.forEach(z,function(A){if(E){var F=A.graphics,H,I,L=F?F.length:0;for(H=0;H<L;H++)(I=F[H].geometry)&&F[H].setGeometry(E(I))}C.addLayer(A)});this.onVisibilityChange(this.visible)},_removeInternalLayers:function(){var C=this._map;this._links&&r.forEach(this._links,function(z){z.declaredClass&&z._io&&z._io.cancel();z._linkErrorHandle&&(z._linkErrorHandle.remove(),z._linkErrorHandle=null)});C&&r.forEach(this.getLayers(),C.removeLayer,C)},_setState:function(C,z){var D=C.featureInfos,E,A,F=
D?D.length:0,H=z?"show":"hide",I=z?"_resume":"_suspend";for(A=0;A<F;A++){var L=D[A];if(E=this.getFeature(L))if("Folder"===L.type)this._setState(E,z&&E.visible);else if("NetworkLink"===L.type)this._setInternalVisibility(E,z);else if(E[I])E[I]();else E[H]()}},_areLocalAncestorsVisible:function(C){var z=C.parentFolderId;for(C=C.visible;C&&-1!==z;)z=this.getFeature({type:"Folder",id:z}),C=C&&z.visible,z=z.parentFolderId;return C},_setInternalVisibility:function(C,z){var D=C._parentLayer,E=C._parentFolderId;
for(z=z&&C.visible;z&&D;)z=z&&D.visible,-1<E&&(z=z&&D._areLocalAncestorsVisible(D.getFeature({type:"Folder",id:E}))),E=D._parentFolderId,D=D._parentLayer;this._setIntState(C,z)},_setIntState:function(C,z){C&&r.forEach(C.getLayers(),function(D){D.linkInfo?C._setIntState(D,z&&D.visible&&C._areLocalAncestorsVisible(C.getFeature({type:"Folder",id:D._parentFolderId}))):D.setVisibility(z)})},_getLinkParentId:function(C){var z=-1;this.folders&&r.some(this.folders,function(D){return D.networkLinkIds&&-1!==
r.indexOf(D.networkLinkIds,C)?(z=D.id,!0):!1});return z},_checkAutoRefresh:function(){var C=this.linkInfo;if(C)if(this.visible){if(this.loaded&&this._map){var z=C.refreshMode,D=C.refreshInterval,E=C.viewRefreshMode;C=C.viewRefreshTime;z&&-1!==z.toLowerCase().indexOf("oninterval")&&0<D&&(this._stopAutoRefresh(),this._timeoutHandle=setTimeout(this.refresh,1E3*D));E&&-1!==E.toLowerCase().indexOf("onstop")&&0<C&&!this._extChgHandle&&(this._extChgHandle=w.connect(this._map,"onExtentChange",this,this._extentChanged))}}else this._stopAutoRefresh(),
w.disconnect(this._extChgHandle),delete this._extChgHandle},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null},_getQueryParameters:function(C){C=C||this._map;var z={},D=this.linkInfo,E=C&&C.extent;if(this._url.query){v.mixin(z,this._url.query);var A=!!this._url.query.token}q.id&&!A&&(A=q.id.findCredential(this._url.path))&&(z.token=A.token);if(D){A=D.viewFormat;var F=D.httpQuery;D=D.viewBoundScale;if(E&&A){var H=E,I=E,L=E.spatialReference;L&&(L.isWebMercator()?
H=h.webMercatorToGeographic(E):4326===L.wkid&&(I=h.geographicToWebMercator(E)));E=H.getCenter();I=Math.max(I.getWidth(),I.getHeight());D&&(H=H.expand(D));A=A.replace(/\[bboxWest\]/ig,H.xmin).replace(/\[bboxEast\]/ig,H.xmax).replace(/\[bboxSouth\]/ig,H.ymin).replace(/\[bboxNorth\]/ig,H.ymax).replace(/\[lookatLon\]/ig,E.x).replace(/\[lookatLat\]/ig,E.y).replace(/\[lookatRange\]/ig,I).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,E.x).replace(/\[lookatTerrainLat\]/ig,
E.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,E.x).replace(/\[cameraLat\]/ig,E.y).replace(/\[cameraAlt\]/ig,I).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,C.width).replace(/\[vertPixels\]/ig,C.height).replace(/\[terrainEnabled\]/ig,0);v.mixin(z,a.queryToObject(A))}F&&(F=F.replace(/\[clientVersion\]/ig,q.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,K.locale),v.mixin(z,
a.queryToObject(F)))}C=[];for(var J in z)m.isDefined(z[J])&&C.push(J+"\x3d"+z[J]);return(C=C.join("\x26"))?"?"+C:""},setScaleRange:function(C,z){this.inherited(arguments);r.forEach(this.getLayers(),function(D){D.setScaleRange(C,z)})},setOpacity:function(C){this.opacity!=C&&(r.forEach(this.getLayers(),function(z){z.setOpacity(C)}),this.opacity=C,this.onOpacityChange(C))},_setMap:function(C,z){this.inherited(arguments);this._map=C;var D=this._div=b.create("div",null,z);p.set(D,"position","absolute");
this._addInternalLayers();this.evaluateSuspension();return D},_unsetMap:function(C,z){this._io&&this._io.cancel();this._stopAutoRefresh();w.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var D=this._div;D&&(z.removeChild(D),b.destroy(D));this._wMap=this._div=null;this.inherited(arguments)},onVisibilityChange:function(C){this.loaded?(this._fireUpdateStart(),this._setInternalVisibility(this,C),this._checkAutoRefresh(),this._fireUpdateEnd()):this.linkInfo&&C&&(this._waitingForMap||
this._parseKml(this._wMap))},refresh:function(){this.loaded&&this._map&&!this._io&&this.visible&&this._parseKml()},getFeatureCollection:function(C){var z,D=[];(C=this.getFeature({type:"Folder",id:C}))&&(z=r.map(C.featureInfos,function(E){if("esriGeometryPoint"===E.type||"esriGeometryPolyline"===E.type||"esriGeometryPolygon"===E.type)return E.id},this))&&0<z.length&&r.forEach(this._fLayers,function(E){var A;var F=E.toJson();F.featureSet.features&&0<F.featureSet.features.length&&(A=r.filter(F.featureSet.features,
function(H){if(-1!==r.indexOf(z,H.attributes[E.objectIdField]))return H},this));A&&0<A.length&&(F.featureSet.features=A,D.push(F))},this);return D},getFeatureCount:function(C){C=this.getFeature({type:"Folder",id:C});var z={points:0,polylines:0,polygons:0};C&&r.forEach(C.featureInfos,function(D){"esriGeometryPoint"===D.type&&(z.points+=1);"esriGeometryPolyline"===D.type&&(z.polylines+=1);"esriGeometryPolygon"===D.type&&(z.polygons+=1)});return z},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=
setTimeout(this.refresh,1E3*this.linkInfo.viewRefreshTime)}});v.setObject("layers.KMLLayer",B,q);return B})},"esri/layers/KMLFolder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(K,G,w,v,r){K=K(null,{declaredClass:"esri.layers.KMLFolder",constructor:function(f){G.mixin(this,f);r.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});G.setObject("layers.KMLFolder",K,v);return K})},"esri/layers/KMLGroundOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./MapImage".split(" "),
function(K,G,w,v,r,f){K=K([f],{declaredClass:"esri.layers.KMLGroundOverlay",constructor:function(c){r.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});G.setObject("layers.KMLGroundOverlay",K,v);return K})},"esri/layers/GeoRSSLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ../urlUtils ./ServiceGeneratedFeatureCollection".split(" "),function(K,G,w,v,r,f,c,a,b){K=K([b],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:a.getProtocolForWebResource()+
"//utility.arcgis.com/sharing/rss",constructor:function(p,q){this._url=a.urlToObject(this.url=p);f.defaults.geoRSSService&&(this.serviceUrl=f.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=c({url:this.serviceUrl,content:{url:this.url,refresh:this.loaded?!0:void 0,outSR:this._outSR?w.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(p){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}});G.setObject("layers.GeoRSSLayer",
K,r);return K})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){K=K([m],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(l,h){this.pointSymbol=
h&&h.pointSymbol;this.polylineSymbol=h&&h.polylineSymbol;this.polygonSymbol=h&&h.polygonSymbol;this._outSR=h&&(h.outSpatialReference||h.outSR)||new b({wkid:4326});this._options=w.mixin({},h)},parse:function(){},getFeatureLayers:function(){var l=[];this._fLayers&&(l=l.concat(this._fLayers));return l},onRefresh:function(){},onOpacityChange:function(){},refresh:function(){this.loaded&&this._map&&!this._io&&this.visible&&this._createLayer()},_createLayer:function(l){var h=this;this._fireUpdateStart();
l=this.parse(l);l.addCallback(function(e){h._io=null;h._initLayer(e)});l.addErrback(function(e){h._io=null;e=w.mixin(Error(),e);e.message="Unable to load resource: "+h.url+" "+(e.message||"");h._fireUpdateEnd(e);h.onError(e)})},_initLayer:function(l){this.loaded&&this._removeInternalLayers();this.name=l.name;this.description=l.description;this.snippet=l.snippet;this.featureInfos=l.featureInfos;this.fullExtent=this.initialExtent=new p(l.lookAtExtent);this.copyright=l.author||l.copyright;var h;(l=w.getObject("featureCollection.layers",
!1,l))&&0<l.length&&(this._fLayers=[],v.forEach(l,function(e,d){var g=w.getObject("featureSet.features",!1,e);g&&0<g.length&&(h=w.mixin({outFields:["*"],infoTemplate:e.popupInfo?new k(e.popupInfo):null,editable:!1},this._options),h.id&&(h.id=h.id+"_"+d),h.webgl=!1,e.layerDefinition.capabilities="Query,Data",g=new n(e,h),g.geometryType&&(this["_"+g.geometryType]=g),this._fLayers.push(g))},this),0===this._fLayers.length&&delete this._fLayers);this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),
this.pointSymbol&&(l=new t(this.pointSymbol),this._esriGeometryPoint.setRenderer(l)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),this.polylineSymbol&&(l=new t(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(l)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(l=new t(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(l)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),
this.onRefresh())},_addInternalLayers:function(){var l=this._map;this._fireUpdateStart();var h=l.spatialReference,e=this._outSR;if(h.wkid)var d=h._isWebMercator()&&e._isWebMercator()||h.wkid===e.wkid;else if(h.wkt)d=h.wkt===e.wkt;else return;if(!d)if(h._isWebMercator()&&4326===e.wkid)this._converter=q.geographicToWebMercator;else if(e._isWebMercator()&&4326===h.wkid)this._converter=q.webMercatorToGeographic;else return;(h=this._fLayers)&&0<h.length&&v.forEach(h,function(g){if(this._converter){var u=
g.graphics,x,y,B=u?u.length:0;for(x=0;x<B;x++)(y=u[x].geometry)&&u[x].setGeometry(this._converter(y))}l.addLayer(g)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var l=this._map;l&&v.forEach(this.getFeatureLayers(),l.removeLayer,l)},setScaleRange:function(l,h){this.inherited(arguments);v.forEach(this.getFeatureLayers(),function(e){e.setScaleRange(l,h)});this._options.minScale=this.minScale;this._options.maxScale=this.maxScale},setOpacity:function(l){this.opacity!=
l&&(v.forEach(this.getFeatureLayers(),function(h){h.setOpacity(l)}),this.opacity=this._options.opacity=l,this.onOpacityChange(l))},onVisibilityChange:function(l){this._fireUpdateStart();v.forEach(this.getFeatureLayers(),function(h){h.setVisibility(l)});this._fireUpdateEnd()},_setMap:function(l,h){this.inherited(arguments);this._map=l;var e=this._div=r.create("div",null,h);f.set(e,"position","absolute");this._addInternalLayers();this.evaluateSuspension();return e},_unsetMap:function(l,h){this._io&&
this._io.cancel();G.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var e=this._div;e&&(h.removeChild(e),r.destroy(e));this._div=null;this.inherited(arguments)}});w.setObject("layers._ServiceGeneratedFeatureCollection",K,a);return K})},"esri/layers/WebTiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/url dojo/sniff dojo/string ../config ../kernel ../request ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){function k(l,h){var e=[];if(l&&h&&(h.customLayerParameters||h.customParameters)){var d=G.clone(h.customParameters||{});G.mixin(d,h.customLayerParameters||{});var g=p.urlToObject(l);for(var u in g.query)d.hasOwnProperty(u)||e.push(u+"\x3d"+g.query[u]);l=g.path+(e.length?"?"+e.join("\x26"):"")}return l}K=K(m,{declaredClass:"esri.layers.WebTiledLayer",constructor:function(l,h){h||(h={});this.urlTemplate=l=k(l,h.wmtsInfo);var e=new t(-2.0037508342787E7,-2.003750834278E7,
2.003750834278E7,2.0037508342787E7,new q({wkid:102100})),d=new t(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new q({wkid:102100}));this.initialExtent=h.initialExtent||e;this.fullExtent=h.fullExtent||d;this.tileInfo=h.tileInfo?h.tileInfo:new n({dpi:96,rows:256,cols:256,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},
{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,
scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,
scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147},{level:23,resolution:.01866138385297604,scale:70.5310735}]});this.spatialReference=new q(this.tileInfo.spatialReference.toJson());this.copyright=h.copyright||"";var g=new v(l);e=g.scheme+"://"+g.authority+"/";this.urlPath=l.substring(e.length);this.tileServers=h.tileServers||[];-1===g.authority.indexOf("{subDomain}")&&
this.tileServers.push(e);if(h.subDomains&&0<h.subDomains.length&&1<g.authority.split(".").length){this.subDomains=h.subDomains;var u;w.forEach(h.subDomains,function(C){-1<g.authority.indexOf("${subDomain}")?u=g.scheme+"://"+f.substitute(g.authority,{subDomain:C})+"/":-1<g.authority.indexOf("{subDomain}")&&(u=g.scheme+"://"+g.authority.replace(/\{subDomain\}/gi,C)+"/");this.tileServers.push(u)},this)}this.tileServers=w.map(this.tileServers,function(C){"/"!==C.charAt(C.length-1)&&(C+="/");return C});
this._levelToLevelValue=[];var x=0;w.forEach(this.tileInfo.lods,function(C,z){this._levelToLevelValue[C.level]=C.levelValue||C.level;0===z&&(x=this._levelToLevelValue[C.level])},this);this._wmtsInfo=h.wmtsInfo;var y=G.hitch(this,function(){this.loaded=!0;this.onLoad(this)});if(r("chrome")){e=this.getTileUrl(x,0,0);d=c.defaults.io;var B="with-credentials"===d.useCors?p.canUseXhr(e,!0):-1;(d=-1<B?d.corsEnabledServers[B]:null)&&d.withCredentials?b({url:e,handleAs:"arraybuffer"}).addBoth(function(){y()}):
y()}else y()},getTileUrl:function(l,h,e){l=this._levelToLevelValue[l];var d=this.tileServers[h%this.tileServers.length]+f.substitute(this.urlPath,{level:l,z:l,col:e,x:e,row:h,y:h});d=d.replace(/\{level\}/gi,l).replace(/\{row\}/gi,h).replace(/\{col\}/gi,e).replace(/\{z\}/gi,l).replace(/\{x\}/gi,e).replace(/\{y\}/gi,h);d=this._appendCustomLayerParameters(d);d=this.addTimestampToURL(d);return p.addProxy(d)},_appendCustomLayerParameters:function(l){var h;if(this._wmtsInfo&&(this._wmtsInfo.customLayerParameters||
this._wmtsInfo.customParameters)){var e=G.clone(this._wmtsInfo.customParameters||{});G.mixin(e,this._wmtsInfo.customLayerParameters||{});for(h in e)l+=(-1===l.indexOf("?")?"?":"\x26")+h+"\x3d"+encodeURIComponent(e[h])}return l}});G.setObject("layers.WebTiledLayer",K,a);return K})},"esri/layers/WMSLayer":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){w=w([l],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],
[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(e,d){var g=q.urlToObject(e);g.query&&(g.query.version||g.query.Version||g.query.VERSION)&&
(this.version=g.query.version||g.query.Version||g.query.VERSION);this.url=e=this._stripParameters(e,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));this._url=q.urlToObject(e);this._getCapabilitiesURL=e;this._initLayer=v.hitch(this,this._initLayer);this._parseCapabilities=v.hitch(this,this._parseCapabilities);this._getCapabilitiesError=v.hitch(this,this._getCapabilitiesError);d?(this.customParameters=d.customParameters,
this.customLayerParameters=d.customLayerParameters,this.imageFormat=this._getImageFormat(d.format),this.imageTransparency=!1!==d.transparent,this.visibleLayers=d.visibleLayers?d.visibleLayers:[],this.version=d.version||this.version,d.resourceInfo?this._readResourceInfo(d.resourceInfo):this._getCapabilities()):(this.imageFormat="image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=K.toUrl("../images/pixel.png");this.extentProcessor=this._createExtentProcessor(0);
this._createChildLayer()},setVisibleLayers:function(e){this.visibleLayers=(e=this._checkVisibleLayersList(e))?e:[];this.refresh(!0)},setImageFormat:function(e){this.imageFormat=this._getImageFormat(e);this.refresh(!0)},setImageTransparency:function(e){this.imageTransparency=e;this.refresh(!0)},setCustomParameters:function(e,d){this.customParameters=e;this.customLayerParameters=d;this.refresh(!0)},refresh:function(){this._refreshTS=Date.now();this.inherited(arguments);this._childLayer&&this._childLayer.refresh.apply(this._childLayer,
arguments)},getImageUrl:function(e,d,g,u){if(this.visibleLayers&&0!==this.visibleLayers.length){e=this._getImageParams(e,d,g);e=this._mixinCustomLayerParameters(e);d=this.getMapURL;var x;d+=-1===d.indexOf("?")?"?":"";for(x in e)e.hasOwnProperty(x)&&(d+="?"===d.substring(d.length-1,d.length)?"":"\x26",d+=x+"\x3d"+e[x]);d=this.addTimestampToURL(d);u(q.addProxy(d))}else u(this._blankImageURL)},_setMap:function(e,d,g){var u=this.inherited(arguments);e.wrapAround180?this._childLayer&&(this.suspended&&
this._childLayer.suspend(),this._childLayer._setMap(e,u)):this._childLayer=this.extentProcessor=null;return u},_unsetMap:function(e,d){this._childLayer&&this._childLayer._unsetMap(e,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new l(null,{extentProcessor:this._createExtentProcessor(1)});
this._childLayer._isChildLayer=!0;this._childLayer.getImageUrl=v.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(e){return v.hitch(this,this._extentProcessor,e)},_extentProcessor:function(e,d){var g=d.extent,u=d.width,x=0;if(g){var y=g.getWidth()/u,B=g.bisect();g=B.extents;var C=g[e];C&&(u=B.marginLeft/y,x=0===e?u:u+g[0].getWidth()/y,u=Math.ceil(C.getWidth()/y),x=Math.ceil(x));g=C}return{extent:g,width:u,marginLeft:x}},_getImageParams:function(e,d,g){var u=
e.spatialReference.wkid;-1===r.indexOf(this.spatialReferences,u)&&e.spatialReference.latestWkid&&(u=e.spatialReference.latestWkid);if(r.some(this._WEB_MERCATOR,function(z){return z==u})){var x=r.filter(this.spatialReferences,function(z){return r.some(this._WEB_MERCATOR,function(D){return D==z})},this);0===x.length&&(x=r.filter(this.spatialReferences,function(z){return r.some(this._WORLD_MERCATOR,function(D){return D==z})},this));u=0<x.length?x[0]:this._WEB_MERCATOR[1]}this.spatialReferences=r.filter(this.spatialReferences,
function(z){return z!==u});this.spatialReferences.unshift(u);x=e.xmin;var y=e.xmax,B=e.ymin;e=e.ymax;var C={SERVICE:"WMS",REQUEST:"GetMap"};C.FORMAT=this.imageFormat;C.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";C.STYLES="";C.VERSION=this.version;C.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;C.WIDTH=d;C.HEIGHT=g;this.maxWidth<d&&(C.WIDTH=this.maxWidth);this.maxHeight<g&&(C.HEIGHT=this.maxHeight);d=u?u:NaN;isNaN(d)||("1.3.0"==this.version?C.CRS="EPSG:"+d:C.SRS="EPSG:"+d);"1.3.0"==
this.version&&this._useLatLong(d)?C.BBOX=B+","+x+","+e+","+y:C.BBOX=x+","+B+","+y+","+e;return C},_initLayer:function(e,d){this.spatialReference=new m(this.extent.spatialReference);this.initialExtent=new n(this.extent);this.fullExtent=new n(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var g=v.hitch(this,function(){this.loaded=!0;this.onLoad(this);var y=this._loadCallback;y&&(delete this._loadCallback,y(this))});if(f("chrome")){var u=c.defaults.io,x="with-credentials"===
u.useCors?q.canUseXhr(this.getMapURL,!0):-1;(u=-1<x?u.corsEnabledServers[x]:null)&&u.withCredentials?p({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){g()}):g()}else g()},_readResourceInfo:function(e){e.extent?e.layerInfos?(this.extent=e.extent,this.allExtents[0]=e.extent,this.layerInfos=e.layerInfos,this.description=e.description?e.description:"",this.copyright=e.copyright?e.copyright:"",this.title=e.title?e.title:"",this.getMapURL=e.getMapURL?e.getMapURL:
this._getCapabilitiesURL,this.getFeatureInfoURL=e.getFeatureInfoURL,this.featureInfoFormat=e.featureInfoFormat,this.version=e.version?e.version:"1.3.0",this.maxWidth=e.maxWidth?e.maxWidth:5E3,this.maxHeight=e.maxHeight?e.maxHeight:5E3,this.spatialReferences=e.spatialReferences?e.spatialReferences:[],this.imageFormat=this._getImageFormat(e.format),this.setScaleRange(e.minScale,e.maxScale),this.customLayerParameters=e.customLayerParameters||this.customLayerParameters,this.customParameters=e.customParameters||
this.customParameters,this._initLayer()):this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},_getCapabilities:function(e){var d=this._url.query?this._url.query:{};d.SERVICE="WMS";d.REQUEST="GetCapabilities";this.version&&(d.VERSION=this.version);d=this._mixinCustomParameters(d);var g=this._url.path+"?",u;for(u in d)d.hasOwnProperty(u)&&(g+=
"?"==g.substring(g.length-1,g.length)?"":"\x26",g+=u+"\x3d"+d[u]);p({url:g,handleAs:e||"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:!1})},_parseCapabilities:function(e,d){if(e){if("text"===d.handleAs){try{var g=(new DOMParser).parseFromString(e,"application/xml")}catch(A){}g&&!g.getElementsByTagName("parsererror").length||this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (XML Parse error.)"))}else g=
e;var u=this;this.version=this._getAttributeValue("WMS_Capabilities","version",g,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",g,"1.3.0"));var x=this._getTag("Service",g);this.title=this._getTagValue("Title",x,"");this.title||(this.title=this._getTagValue("Name",x,""));this.copyright=this._getTagValue("AccessConstraints",x,"");this.description=this._getTagValue("Abstract",x,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",x,5E3),10);this.maxHeight=
parseInt(this._getTagValue("MaxHeight",x,5E3),10);if(x=this._getTag("Layer",g)){var y=this._getLayerInfo(x),B=0,C=null;x=this._getTag("Capability",g);r.forEach(x.childNodes,function(A){"Layer"==A.nodeName&&(0===B?C=A:(1===B&&y.name&&(y.name="",y.subLayers=[],y.subLayers.push(this._getLayerInfo(C))),y.subLayers.push(this._getLayerInfo(A))),B++)},this);if(y&&(this.layerInfos=y.subLayers,this.layerInfos&&0!==this.layerInfos.length||(this.layerInfos=[y]),this.extent=y.extent,this.extent||(y.extent=new n(this.layerInfos[0].extent.toJson()),
this.extent=y.extent),this.allExtents=y.allExtents,this.allExtents&&this.allExtents.length||(y.allExtents=[],r.forEach(this.layerInfos[0].allExtents,function(A,F){A&&(y.allExtents[F]=new n(A.toJson()))}),this.allExtents=y.allExtents),this.spatialReferences=y.spatialReferences,!this.spatialReferences.length&&0<this.layerInfos.length)){var z=function(A){var F;for(F=0;F<A.subLayers.length;F++){var H=A.subLayers[F],I=H.spatialReferences;!I.length&&H.subLayers&&0<H.subLayers.length&&(I=z(H));if(I.length)return I}return[]};
for(x=0;x<this.layerInfos.length;x++){var D=this.layerInfos[x];this.spatialReferences=this.layerInfos[0].spatialReferences;!this.spatialReferences.length&&D.subLayers&&0<D.subLayers.length&&(this.spatialReferences=z(D));if(this.spatialReferences.length)break}}x=function(A){return(A=G.query("DCPType",u._getTag(A,g)))&&0<A.length&&(A=G.query("HTTP",A[0]))&&0<A.length&&(A=G.query("Get",A[0]))&&0<A.length&&(A=u._getAttributeValue("OnlineResource","xlink:href",A[0],null))?(A.indexOf("\x26")===A.length-
1&&(A=A.substring(0,A.length-1)),u._stripParameters(A,["service","request"])):null};D=function(A){var F=[];0===G.query("Operation",g).length?r.forEach(G.query("Format",u._getTag(A,g)),function(H){F.push(H.text?H.text:H.textContent)}):(r.forEach(G.query("Operation",g),function(H){H.getAttribute("name")===A&&r.forEach(G.query("Format",H),function(I){F.push(I.text?I.text:I.textContent)})}),F.length||r.forEach(G.query("Format",u._getTag(A,g)),function(H){F.push(H.text?H.text:H.textContent)}));return F};
this.getMapURL=x("GetMap")||this._getCapabilitiesURL;this.getMapFormats=D("GetMap");this.getMapFormats.length&&!r.some(this.getMapFormats,function(A){return-1<A.indexOf(this.imageFormat)},this)&&(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=x("GetFeatureInfo"))this.getFeatureInfoFormats=D("GetFeatureInfo"),-1<r.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<r.indexOf(this.getFeatureInfoFormats,"text/plain")&&(this.featureInfoFormat="text/plain");
if(!this.featureInfoFormat){var E=function(A){if(A&&(A.queryable=!1,A.subLayers))for(var F=0;F<A.subLayers.length;F++)E(A.subLayers[F])};E(y)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else"xml"===d.handleAs?this._getCapabilities("text"):this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(e){e&&e.message&&(e.message="GetCapabilities request for "+
this._getCapabilitiesURL+" failed. ("+e.message+")");this._errorHandler(e)},_getLayerInfo:function(e){if(!e)return null;var d=new h;d.name="";d.title="";d.description="";d.allExtents=[];d.spatialReferences=[];d.queryable="1"===e.getAttribute("queryable");d.subLayers=[];var g=this._getTag("LatLonBoundingBox",e);g&&(d.allExtents[0]=this._getExtent(g,4326));var u=this._getTag("EX_GeographicBoundingBox",e);if(u){var x=new n(0,0,0,0,new m({wkid:4326}));x.xmin=parseFloat(this._getTagValue("westBoundLongitude",
u,0));x.ymin=parseFloat(this._getTagValue("southBoundLatitude",u,0));x.xmax=parseFloat(this._getTagValue("eastBoundLongitude",u,0));x.ymax=parseFloat(this._getTagValue("northBoundLatitude",u,0));d.allExtents[0]=x}g||u||(x=new n(-180,-90,180,90,new m({wkid:4326})),d.allExtents[0]=x);d.extent=d.allExtents[0];var y=-1<r.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";r.forEach(e.childNodes,function(B){if("Name"==B.nodeName)d.name=(B.text?B.text:B.textContent)||"";else if("Title"==B.nodeName)d.title=
(B.text?B.text:B.textContent)||"";else if("Abstract"==B.nodeName)d.description=(B.text?B.text:B.textContent)||"";else if("BoundingBox"==B.nodeName){var C=B.getAttribute(y);C&&0===C.indexOf("EPSG:")?(C=parseInt(C.substring(5),10),0===C||isNaN(C)||(B="1.3.0"==this.version?this._getExtent(B,C,this._useLatLong(C)):this._getExtent(B,C),d.allExtents[C]=B,d.extent||(d.extent=B))):C&&0===C.indexOf("CRS:")?(C=parseInt(C.substring(4),10),0===C||isNaN(C)||(this._CRS_TO_EPSG[C]&&(C=this._CRS_TO_EPSG[C]),d.allExtents[C]=
this._getExtent(B,C))):(C=parseInt(C,10),0===C||isNaN(C)||(d.allExtents[C]=this._getExtent(B,C)))}else if(B.nodeName==y)B=(B.text?B.text:B.textContent).split(" "),r.forEach(B,function(z){z=-1<z.indexOf(":")?parseInt(z.split(":")[1],10):parseInt(z,10);0===z||isNaN(z)||(this._CRS_TO_EPSG[z]&&(z=this._CRS_TO_EPSG[z]),-1==r.indexOf(d.spatialReferences,z)&&d.spatialReferences.push(z))},this);else if("Style"!=B.nodeName||d.legendURL)"Layer"===B.nodeName&&d.subLayers.push(this._getLayerInfo(B));else if(B=
this._getTag("LegendURL",B))if(B=this._getTag("OnlineResource",B))d.legendURL=B.getAttribute("xlink:href")},this);d.title=d.title||d.name;return d},_getImageFormat:function(e){switch(e?e.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";case "image/gif":return"gif";
case "image/svg+xml":return"svg";default:return"png"}},_getExtent:function(e,d,g){if(e){var u=new n;var x=parseFloat(e.getAttribute("minx")),y=parseFloat(e.getAttribute("miny")),B=parseFloat(e.getAttribute("maxx"));e=parseFloat(e.getAttribute("maxy"));g?(u.xmin=isNaN(y)?-1*Number.MAX_VALUE:y,u.ymin=isNaN(x)?-1*Number.MAX_VALUE:x,u.xmax=isNaN(e)?Number.MAX_VALUE:e,u.ymax=isNaN(B)?Number.MAX_VALUE:B):(u.xmin=isNaN(x)?-1*Number.MAX_VALUE:x,u.ymin=isNaN(y)?-1*Number.MAX_VALUE:y,u.xmax=isNaN(B)?Number.MAX_VALUE:
B,u.ymax=isNaN(e)?Number.MAX_VALUE:e);u.spatialReference=new m({wkid:d})}return u},_useLatLong:function(e){var d;for(d=0;d<this._REVERSED_LAT_LONG_RANGES.length;d++){var g=this._REVERSED_LAT_LONG_RANGES[d];if(e>=g[0]&&e<=g[1]){var u=!0;break}}return u},_getTag:function(e,d){var g=G.query(e,d);return g&&0<g.length?g[0]:null},_getTagValue:function(e,d,g){return(e=G.query(e,d))&&0<e.length?e[0].text?e[0].text:e[0].textContent:g},_getAttributeValue:function(e,d,g,u){return(e=G.query(e,g))&&0<e.length?
e[0].getAttribute(d):u},_checkVisibleLayersList:function(e){if(e&&0<e.length&&this.layerInfos&&0<this.layerInfos.length&&"number"==typeof e[0]){var d=[];r.forEach(e,function(g){g<this.layerInfos.length&&d.push(this.layerInfos[g].name)},this);e=d}return e},_stripParameters:function(e,d){var g=q.urlToObject(e),u,x=[];for(u in g.query)g.query.hasOwnProperty(u)&&-1===r.indexOf(d,u.toLowerCase())&&x.push(u+"\x3d"+g.query[u]);return g.path+(x.length?"?"+x.join("\x26"):"")},_getPopupGraphic:function(e,d){var g=
this.visibleLayers;if(!g||0===g.length)return null;var u=this._popupGraphic;u||(u=new t({title:this.title||""}),u.setContent(function(D){var E=document.createElement("div");if(D=D&&D.attributes&&D.attributes.QUERY_URL)E.style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;",E.innerHTML='\x3ciframe sandbox src\x3d"'+D+'" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+
K.toUrl("../dijit/images/loading-throb.gif")+"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e";return E}),u=this._popupGraphic=new a(null,null,{},u),u._layer=this);var x=function(D){var E=[];if(D&&(D.queryable&&D.showPopup&&D.name&&E.push(D.name),D.subLayers))for(var A=0;A<D.subLayers.length;A++){var F=x(D.subLayers[A]);F.length&&(E=E.concat(F))}return E},y=x({subLayers:this.layerInfos});y=r.filter(y,function(D){return-1<
r.indexOf(g,D)});if(y.length){var B=this.getFeatureInfoURL,C=this._getImageParams(e.extent,e.width,e.height);C=this._mixinCustomLayerParameters(C);C.REQUEST="GetFeatureInfo";C.INFO_FORMAT=this.featureInfoFormat;C.QUERY_LAYERS=y.join();C.FEATURE_COUNT=25;"1.3.0"===this.version?(C.I=Math.round(d.x),C.J=Math.round(d.y)):(C.X=Math.round(d.x),C.Y=Math.round(d.y));B+=-1===B.indexOf("?")?"?":"";for(var z in C)C.hasOwnProperty(z)&&(B+="?"===B.substring(B.length-1,B.length)?"":"\x26",B+=z+"\x3d"+C[z]);u.attributes.QUERY_URL=
B;return u}return null},_mixinCustomParameters:function(e){if(this.customParameters)for(var d in this.customParameters)e[d]=encodeURIComponent(this.customParameters[d]);return e},_mixinCustomLayerParameters:function(e){if(this.customLayerParameters||this.customParameters){var d=v.clone(this.customParameters||{});v.mixin(d,this.customLayerParameters||{});for(var g in d)"styles"===g.toLowerCase()&&delete e.STYLES,e[g]=encodeURIComponent(d[g])}return e}});v.setObject("layers.WMSLayer",w,b);return w})},
"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(K,G,w,v,r){K=K(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(f){f&&(this.name=f.name,this.title=f.title,this.description=f.description,this.extent=f.extent,this.legendURL=f.legendURL,this.subLayers=f.subLayers?
f.subLayers:[],this.allExtents=f.allExtents?f.allExtents:[],this.spatialReferences=f.spatialReferences?f.spatialReferences:[],this.queryable=!!f.queryable,this.showPopup=!!f.showPopup)},clone:function(){var f={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL};this.extent&&(f.extent=this.extent.getExtent());f.subLayers=[];w.forEach(this.subLayers,function(a){f.subLayers.push(a.clone())});f.allExtents=[];for(c in this.allExtents){var c=parseInt(c,10);isNaN(c)||(f.allExtents[c]=
this.allExtents[c].getExtent())}f.spatialReferences=[];w.forEach(this.spatialReferences,function(a){f.spatialReferences.push(a)});f.queryable=this.queryable;f.showPopup=this.showPopup;return f}});G.setObject("layers.WMSLayerInfo",K,r);return K})},"esri/layers/WFSLayer":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has dojo/on ../request ../kernel ../graphic ../renderers/jsonUtils ../symbols/jsonUtils ../Color ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent ../geometry/Point ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ./LabelClass ./GraphicsLayer".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C){K=K([C],{declaredClass:"esri.layers.WFSLayer",constructor:function(z){this.geometryType=this.describeFeatureTypeUrl=this.getFeatureUrl=this.layerNamespace="";this.fields=[];this.spatialReferences=[];this.fullExtent=null;this.visible=!0;this.renderer=null;this.id="WFSLayer";this._url="";this._version="1.1.0";this._layerName="";this._nsLayerNames={};this._layerDefinedGeometryType="esriGeometryComplex";this._wkid=3857;this._mode="snapshot";
this._maxFeatures=100;this._inverseResponse=this._inverseFilter=!1;this._nsGeometryFieldName=this._getFeatureRequest=this._nsFields="";this._graphicArray=[];this._gmlNS="http://www.opengis.net/gml";this._layerEventHandlers=[];this.customParameters=this._describeFeatureTypeCallback=this._getCapabilitiesCallback=null;this.showLabels=!0;this.labelingInfo=null;z&&(z.id&&(this.id=z.id),this.showLabels=null!==z.showLabels?z.showLabels:!0);this.onError=w.hitch(this,this.onError);this._errorSupport=w.hitch(this,
this._errorSupport);this._parseGml=w.hitch(this,this._parseGml);this._getCapabilities=w.hitch(this,this._getCapabilities);this._getCapabilitiesResponse=w.hitch(this,this._getCapabilitiesResponse);this._describeFeatureTypeResponse=w.hitch(this,this._describeFeatureTypeResponse);this._pointSymbol=new n(n.STYLE_CIRCLE,6,new k(k.STYLE_SOLID,new m([0,255,0]),1),new m([255,0,0]));this._lineSymbol=new k(k.STYLE_SOLID,new m([0,255,0]),3);this._polygonSymbol=new l(l.STYLE_SOLID,new k(k.STYLE_SOLID,new m([255,
0,0]),2),new m([255,255,0,.25]));this.loaded=!1;this._isProjectedOk=!0},initialize:function(z,D){z.id&&(this.id=z.id);z.url&&(this._url=z.url);z.version&&(this._version=z.version);this.customParameters=z.customParameters;this._getCapabilities(D)},selectLayer:function(z,D){this._layerName=z.layerName;this._wkid=z.wkid;this._mode=z.mode;this._maxFeatures=z.maxFeatures;this._inverseResponse=z.swapXY;this._inverseFilter=z.swapXYFilter;this.geometryType=z.geometryType;this._describeFeatureType(D);this.loaded=
!0},toJson:function(){var z={};z.id=this.id;z.url=this._url;z.version=this._version;z.mode="snapshot"===this._mode?0:1;z.name=this._layerName;z.geometryType=this.geometryType;z.wkid=this._wkid;z.maxFeatures=this._maxFeatures;z.swapXY=this._inverseResponse;z.swapXYFilter=this._inverseFilter;z.pointSymbol=this._pointSymbol.toJson();z.lineSymbol=this._lineSymbol.toJson();z.polygonSymbol=this._polygonSymbol.toJson();z.showLabels=this.showLabels;this.labelingInfo&&(z.labelingInfo=v.map(this.labelingInfo,
function(D){return D.toJson()}));this.customParameters&&(z.customParameters=this.customParameters);return z},fromJson:function(z,D){z.id&&(this.id=z.id);z.url&&(this._url=z.url);z.version&&(this._version=z.version);z.mode&&(this._mode=0===z.mode?"snapshot":"onDemand");z.name&&(this._layerName=z.name);z.geometryType&&(this.geometryType=z.geometryType);z.wkid&&(this._wkid=z.wkid);z.maxFeatures&&(this._maxFeatures=z.maxFeatures);z.swapXY&&(this._inverseResponse=z.swapXY);z.swapXYFilter&&(this._inverseFilter=
z.swapXYFilter);z.pointSymbol&&(this._pointSymbol=t.fromJson(z.pointSymbol));z.lineSymbol&&(this._lineSymbol=t.fromJson(z.lineSymbol));z.polygonSymbol&&(this._polygonSymbol=t.fromJson(z.polygonSymbol));this.showLabels=null!=z.showLabels?z.showLabels:!0;z.labelingInfo&&(this.labelingInfo=v.map(z.labelingInfo,function(E){return new B(E)}));this.customParameters=z.customParameters;this._getCapabilities(D);this.loaded=!0},setPointSymbol:function(z){this._pointSymbol=z},setLineSymbol:function(z){this._lineSymbol=
z},setPolygonSymbol:function(z){this._polygonSymbol=z},_setMap:function(z){this._map=z;var D=this.inherited(arguments);this._map&&(this._layerEventHandlers.push(this._map.on("extent-change",w.hitch(this,"refresh"))),this._layerEventHandlers.push(this.on("visibility-change",w.hitch(this,"_visibilityChange"))));this._getFeature();this.refresh();return D},_unsetMap:function(){for(var z=0;z<this._layerEventHandlers.length;z++)r.disconnect(this._layerEventHandlers[z]);this.refresh();this.inherited(arguments)},
refresh:function(){this.clear();this.redraw();"ondemand"===this._mode.toLowerCase()&&this._fireUpdateStart()},redraw:function(){if(this.visible)for(var z=0;z<this._graphicArray.length;z++){var D=this._graphicArray[z],E=D.geometry,A=null;"point"===E.type?A=this.renderer?this.renderer.getSymbol(D):this._pointSymbol:"multipoint"===E.type?A=this.renderer?this.renderer.getSymbol(D):this._pointSymbol:"polyline"===E.type?A=this.renderer?this.renderer.getSymbol(D):this._lineSymbol:"polygon"===E.type&&(A=
this.renderer?this.renderer.getSymbol(D):this._polygonSymbol);D.setSymbol(A);this.add(D)}},_visibilityChange:function(z){this.visible=z.visible;this.redraw()},onUpdateStart:function(){this._getFeature()},onUpdateEnd:function(){this.clear();this.redraw()},setLabelingInfo:function(z){z?(this.labelingInfo=z,this._fixLabelExpr()):delete this.labelingInfo;this.onLabelingInfoChange()},onLabelingInfoChange:function(){},_fixLabelExpr:function(){var z=/\[([^\[\]]+)\]/ig,D,E=this,A=function(F,H){var I=E._getField(H,
!0);return"["+(I&&I.name||H)+"]"};v.forEach(this.labelingInfo,function(F){if(D=F.labelExpression)F.labelExpression=D.replace(z,A)})},_getField:function(z,D){var E=this.fields;if(!E||0===E.length)return null;var A;D&&(z=z.toLowerCase());v.some(E,function(F){var H=!1;(H=D?F&&F.name.toLowerCase()===z?!0:!1:F&&F.name===z?!0:!1)&&(A=F);return H});return A},setCustomParameters:function(z){this.customParameters=z;this._getFeature();this.refresh()},_getCapabilities:function(z){this._getCapabilitiesCallback=
z;z=w.trim(this._url);if(""===z)this.onError("WFSLayer: url is invalid");else if("1.0.0"!==this._version&&"1.1.0"!==this._version&&"2.0.0"!==this._version)this.onError("WFSLayer: version is invalid");else if(""!==z){var D=z.indexOf("?");D=this._checkForUrlInUrl(z,D);D="?"===z.charAt(z.length-1)?"":-1===D?"?":"\x26";z=z+D+"service\x3dWFS\x26request\x3dGetCapabilities\x26version\x3d"+this._version;z=this._appendCustomParameters(z);a({url:z,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._getCapabilitiesResponse,
this._errorSupport)}},_errorSupport:function(z){this.onError(z)},_getCapabilitiesResponse:function(z){var D,E,A,F=new DOMParser;try{var H=F.parseFromString(z,"text/xml"),I=this._readExceptionReport(H,z);if(I)this.onError("WFSLayer: getCapabilities - returns exception: "+I);else{var L=H.documentElement.attributes.getNamedItem("version");if(L){this._version=L.value;var J="2.0.0"===this._version?"http://www.opengis.net/wfs/2.0":"http://www.opengis.net/wfs";if("2.0.0"===this._version){var O=H.getElementsByTagNameNS("http://www.opengis.net/ows/1.1",
"Operation");for(D=0;D<O.length;D++){if((A=O[D].attributes.getNamedItem("name"))&&"DescribeFeatureType"===A.value){var P=O[D].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Get");this.describeFeatureTypeUrl=P[0].attributes.getNamedItem("xlink:href").value}if(A&&"GetFeature"===A.value){var fa=O[D].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Post");this.getFeatureUrl=fa[0].attributes.getNamedItem("xlink:href").value}}}else if("1.1.0"===this._version)for(O=H.getElementsByTagNameNS("http://www.opengis.net/ows",
"Operation"),D=0;D<O.length;D++)(A=O[D].attributes.getNamedItem("name"))&&"DescribeFeatureType"===A.value&&(P=O[D].getElementsByTagNameNS("http://www.opengis.net/ows","Get"),this.describeFeatureTypeUrl=P[0].attributes.getNamedItem("xlink:href").value),A&&"GetFeature"===A.value&&(fa=O[D].getElementsByTagNameNS("http://www.opengis.net/ows","Post"))&&fa.length&&(this.getFeatureUrl=fa[0].attributes.getNamedItem("xlink:href").value);else if("1.0.0"===this._version){var V=H.getElementsByTagNameNS(J,"DescribeFeatureType");
if(!V||!V.length){this.onError("WFSLayer: getCapabilities - no describeFeatureType info");return}P=V[0].getElementsByTagNameNS(J,"Get");this.describeFeatureTypeUrl=P[0].attributes.getNamedItem("onlineResource").value;var ba=H.getElementsByTagNameNS(J,"GetFeature");if(!ba||!ba.length){this.onError("WFSLayer: getCapabilities - no GetFeature info");return}(fa=ba[0].getElementsByTagNameNS(J,"Post"))&&fa.length&&(this.getFeatureUrl=fa[0].attributes.getNamedItem("onlineResource").value)}this._nsLayerNames=
{};z=[];var ka=H.getElementsByTagNameNS(J,"FeatureTypeList");for(D=0;D<ka.length;D++){var la=ka[D].getElementsByTagNameNS(J,"FeatureType");for(E=0;E<la.length;E++){var ma=la[E],ha=ma.getElementsByTagNameNS(J,"Name")[0],Z=ha.textContent,W=Z.indexOf(":"),Q=Z.substring(0,W),ia=Z.substring(W+1),R=ha.lookupNamespaceURI(Q);null===R&&(R=ha.lookupNamespaceURI(null));this._nsLayerNames[ia]={prefix:Q,namespace:R};var S=ma.getElementsByTagNameNS(J,"Title"),N=0<S.length?S[0].textContent:"";""===N&&(N=ia);this.spatialReferences=
this._readFactoryCodes(this._version,ma);var X=this._readDefaultBBOX(this._version,ma);z.push({name:ia,title:N,spatialReferences:this.spatialReferences,extent:X})}}this._describeFeatureType();var aa=this._getCapabilitiesCallback;aa&&aa(z)}else this.onError("WFSLayer: getCapabilities - document not recognized.")}}catch(ea){this.onError("WFSLayer: getCapabilities - parsing error")}},_readFactoryCodes:function(z,D){var E,A=[];if("2.0.0"===z||"1.1.0"===z){var F=D.getElementsByTagNameNS("*","DefaultSRS");
this._addCodeList(A,F[0]);F=D.getElementsByTagNameNS("*","DefaultCRS");this._addCodeList(A,F[0]);F=D.getElementsByTagNameNS("*","OtherSRS");for(E=0;E<F.length;E++)this._addCodeList(A,F[E]);F=D.getElementsByTagNameNS("*","OtherCRS");for(E=0;E<F.length;E++)this._addCodeList(A,F[E])}else"1.0.0"===z&&(F=D.getElementsByTagNameNS("*","SRS"),this._addCodeList(A,F[0]));for(F=!1;0<A.length;){4326===A[0]&&(F=!0);break}F||A.push(4326);return A},_addCodeList:function(z,D){if(D){var E=D.textContent.match(/\d+/g);
0<E.length&&(E=parseInt(E[E.length-1],10),84===E&&(E=4326),z.push(E))}},_readDefaultBBOX:function(z,D){if("2.0.0"===z||"1.1.0"===z){var E=D.getElementsByTagNameNS("*","WGS84BoundingBox");if(!E[0]||!E[0].attributes)return[];var A=E[0].getElementsByTagNameNS("*","LowerCorner");var F=E[0].getElementsByTagNameNS("*","UpperCorner");if(0>=A.length||0>=F.length)return[];var H=A[0].textContent;E=H.indexOf(" ");A=H.substring(0,E);H=H.substring(E+1);E=F[0].textContent;var I=E.indexOf(" ");F=E.substring(0,I);
E=E.substring(I+1)}else if("1.0.0"===z){E=D.getElementsByTagNameNS("*","LatLongBoundingBox");if(!E[0]||!E[0].attributes)return[];A=E[0].attributes.getNamedItem("minx").value;H=E[0].attributes.getNamedItem("miny").value;F=E[0].attributes.getNamedItem("maxx").value;E=E[0].attributes.getNamedItem("maxy").value}A=parseFloat(A,10);H=parseFloat(H,10);F=parseFloat(F,10);E=parseFloat(E,10);return[A,H,F,E]},_describeFeatureType:function(z){if(""!==this._layerName)if(""===this.describeFeatureTypeUrl)this.onError("WFSLayer: invalid describeFeatureType url");
else if(""===this._wkid)this.onError("WFSLayer: invalid wkid");else if("snapshot"!==this._mode&&"onDemand"!==this._mode)this.onError("WFSLayer: invalid mode");else if(""===this._maxFeatures||0>this._maxFeatures||1E6<this._maxFeatures)this.onError("WFSLayer: invalid maxFeatures");else if(this._describeFeatureTypeCallback=z,z=w.trim(this.describeFeatureTypeUrl),""!==z){var D=z.indexOf("?");D=this._checkForUrlInUrl(z,D);var E="?"===z.charAt(z.length-1)?"":-1===D?"?":"\x26",A=this._nsLayerNames[this._layerName];
if(void 0===A)this.onError("WFSLayer: invalid layerName");else D=A.prefix,A=A.namespace,z=z+E+"service\x3dWFS\x26request\x3dDescribeFeatureType\x26version\x3d"+this._version,z+="\x26typeName\x3d",""!==D&&(z+=D+":"),z+=encodeURIComponent(this._layerName),""!==D&&(z+="\x26namespace\x3dxmlns("+D+"\x3d"+encodeURIComponent(A)+")"),z=this._appendCustomParameters(z),a({url:z,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._describeFeatureTypeResponse,this._errorSupport)}},_describeFeatureTypeResponse:function(z){var D=
(new DOMParser).parseFromString(z,"text/xml");if(z=this._readExceptionReport(D,z))this.onError("WFSLayer: DescribeFeatureType - returns exception: "+z);else{this.fields=[];z=D.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(D=0;D<z.length;D++){var E=this._readAllFields(z[D]);null!==E&&(this._layerDefinedGeometryType=E[0],this.fields=E[1])}this.geometryType&&""!==this.geometryType||(this.geometryType=this._layerDefinedGeometryType);for(D=0;D<this.fields.length;D++)z=this.fields[D],
"esriFieldTypeGeometry"===z.type&&(this._nsGeometryFieldName=z.name);this.layerNamespace=this._nsLayerNames[this._layerName].namespace;if(0===this.fields.length)this.onError("WFSLayer: DescribeFeatureType - can't get fields");else this._getFeature(),(D=this._describeFeatureTypeCallback)&&D(this.fields)}},_readAllFields:function(z){for(var D=z.childNodes,E=0;E<D.length;E++){var A=D[E];if("element"===A.localName){var F=A.attributes;if(F.name.value===this._layerName)return(D=F.type)?(A=D.value,D=A.indexOf(":"),
A=A.substring(D+1),this._readFieldsFromGlobalComplextType(z,A)):this._readFieldsFromLocalComplextType(A)}}return null},_readFieldsFromGlobalComplextType:function(z,D){for(var E=z.childNodes,A=0;A<E.length;A++){var F=E[A];if("complexType"===F.localName&&F.attributes.name.value===D)return this._readFieldsFromLocalComplextType(F)}return null},_readFieldsFromLocalComplextType:function(z){for(var D=[],E="esriGeometryComplex",A=z.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element"),F=0;F<
A.length;F++){var H=A[F],I="",L=H.attributes.getNamedItem("name");L&&(I=L.value);if(""!==I){var J=z="",O=H.attributes.getNamedItem("type");L="unknown";if(null!==O){J=O.value;var P=J.indexOf(":");z=J.substring(0,P);J=J.substring(P+1);L=O.lookupNamespaceURI(z);null===L&&(L=O.lookupNamespaceURI(null))}if(""===J){H=H.childNodes;for(var fa=0;fa<H.length;fa++)if(z=H[fa],"simpleType"===z.localName){z=z.childNodes;for(fa=0;fa<z.length;fa++)if(node2=z[fa],"restriction"===node2.localName){O=node2.attributes.getNamedItem("base");
J=O.value;P=J.indexOf(":");z=J.substring(0,P);J=J.substring(P+1);break}if(""!==J)break}}H="Unknown";switch(J){case "integer":case "nonPositiveInteger":case "negativeInteger":case "long":case "int":case "short":case "byte":case "nonNegativeInteger":case "unsignedLong":case "unsignedInt":case "unsignedShort":case "unsignedByte":case "positiveInteger":H="esriFieldTypeInteger";D.push({name:I,alias:I,type:H,wfsNamespace:L});break;case "float":case "double":case "decimal":H="esriFieldTypeDouble";D.push({name:I,
alias:I,type:H,wfsNamespace:L});break;case "boolean":case "string":case "gYearMonth":case "gYear":case "gMonthDay":case "gDay":case "gMonth":case "anyURI":case "QName":case "NOTATION":case "normalizedString":case "token":case "language":case "IDREFS":case "ENTITIES":case "NMTOKEN":case "NMTOKENS":case "Name":case "NCName":case "ID":case "IDREF":case "ENTITY":H="esriFieldTypeString";D.push({name:I,alias:I,type:H,wfsNamespace:L});break;case "duration":case "dateTime":case "time":case "date":H="esriFieldTypeDate";
D.push({name:I,alias:I,type:H,wfsNamespace:L});break;case "PointPropertyType":case "MultiPointPropertyType":H="esriFieldTypeGeometry";E="esriGeometryPoint";D.push({name:I,alias:I,type:H,wfsNamespace:L});break;case "MultiCurvePropertyType":case "MultiLineStringPropertyType":H="esriFieldTypeGeometry";E="esriGeometryPolyline";D.push({name:I,alias:I,type:H,wfsNamespace:L});break;case "MultiSurfacePropertyType":case "MultiPolygonPropertyType":H="esriFieldTypeGeometry";E="esriGeometryPolygon";D.push({name:I,
alias:I,type:H,wfsNamespace:L});break;case "GeometryPropertyType":case "MultiGeometryPropertyType":H="esriFieldTypeGeometry",E="esriGeometryComplex",D.push({name:I,alias:I,type:H,wfsNamespace:L})}}}return[E,D]},_getFeature:function(){var z="\x3c?xml version\x3d'1.0' encoding\x3d'utf-8'?\x3e\n\x3cGetFeature \n xmlns:xsi\x3d'http://www.w3.org/2001/XMLSchema-instance'\n xmlns:gml\x3d'http://www.opengis.net/gml'\n xmlns:ogc\x3d'http://www.opengis.net/ogc'\n xmlns:wfs\x3d'http://www.opengis.net/wfs'\n";
z="2.0.0"===this._version?z+" xmlns\x3d'http://www.opengis.net/wfs/2.0'\n":z+" xmlns\x3d'http://www.opengis.net/wfs'\n";var D=this._nsLayerNames[this._layerName];if(void 0===D)this.onError("WFSLayer: invalid layerName");else{var E=D.prefix;D=D.namespace;if("ondemand"===this._mode.toLowerCase()&&""===this._nsGeometryFieldName)this.onError("WFSLayer: GetFeature - can't use 'onDemand' mode as geometryFieldName is unknown.");else if(z+=" xmlns:"+E+"\x3d'"+D+"'\n",z="2.0.0"===this._version?z+(" version\x3d'"+
this._version+"' service\x3d'WFS' count\x3d'"+this._maxFeatures+"'\x3e\n"):z+(" version\x3d'"+this._version+"' service\x3d'WFS' maxFeatures\x3d'"+this._maxFeatures+"'\x3e\n"),z="2.0.0"===this._version?z+(" \x3cQuery typeNames\x3d'"+E+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"):z+(" \x3cwfs:Query typeName\x3d'"+E+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"),"ondemand"===this._mode.toLowerCase()&&(z=z+"  \x3cogc:Filter xmlns:ogc\x3d'http://www.opengis.net/ogc'\x3e\n   \x3cogc:BBOX\x3e\n    \x3cogc:PropertyName\x3e"+
(E+":"+this._nsGeometryFieldName+"\x3c/ogc:PropertyName\x3e\n"),z+="    \x3cgml:Box srsName\x3d'EPSG:"+this._wkid+"'\x3e\n",z=this._inverseFilter?z+"      \x3cgml:coordinates\x3e{ymin},{xmin} {ymax},{xmax}\x3c/gml:coordinates\x3e\n":z+"      \x3cgml:coordinates\x3e{xmin},{ymin} {xmax},{ymax}\x3c/gml:coordinates\x3e\n",z+="    \x3c/gml:Box\x3e\n   \x3c/ogc:BBOX\x3e\n  \x3c/ogc:Filter\x3e\n"),z="2.0.0"===this._version?z+" \x3c/Query\x3e\n":z+" \x3c/wfs:Query\x3e\n",this._getFeatureRequest=z+"\x3c/GetFeature\x3e\n",
""===this.getFeatureUrl)this.onError("WFSLayer: getFeature - server doesn't support POST method.");else if(""!==this._getFeatureRequest&&this._map&&null!==this._map.spatialReference.wkid){z=this._getFeatureRequest;if("ondemand"===this._mode.toLowerCase()){z=this._map.extent.xmin;E=this._map.extent.ymin;D=this._map.extent.xmax;var A=this._map.extent.ymax,F={},H=this._map.spatialReference,I=new h(this._wkid);this._projectFromSRToSR(H,I,z,E,F)&&(z=F.x,E=F.y);this._projectFromSRToSR(H,I,D,A,F)&&(D=F.x,
A=F.y);z=this._getFeatureRequest.replace(/{xmin}/,z).replace(/{ymin}/,E).replace(/{xmax}/,D).replace(/{ymax}/,A)}E=this._appendCustomParameters(this.getFeatureUrl);a({url:E,handleAs:"text",headers:{"Content-Type":"text/xml"},postData:z},{usePost:!0}).then(this._parseGml,this._errorSupport)}}},_parseGml:function(z){if(this._map&&this._map.spatialReference&&this._map.spatialReference.wkid){var D=(new DOMParser).parseFromString(z,"text/xml");if(z=this._readExceptionReport(D,z))this.onError("WFSLayer: GetFeature - returns exception: "+
z);else this._gmlNS="2.0.0"===this._version?"http://www.opengis.net/gml/3.2":"http://www.opengis.net/gml",""===this._wkid&&(this._wkid=this._map.spatialReference.wkid),this._graphicArray=this._readFeatureMembers(D,this._wkid,2,this._nsLayerNames[this._layerName].namespace,this._layerName),this.fullExtent=this._createFullExtent(this._graphicArray),this.onLabelingInfoChange(),"ondemand"===this._mode.toLowerCase()?this._fireUpdateEnd():this.refresh()}},_limit4326:function(z){for(var D=0;D<z.length;D++){var E=
z[D].geometry;4326===E.spatialReference.wkid&&(E.x=this._limit4326X(E.x),E.y=this._limit4326Y(E.y))}},_limit4326X:function(z){180<=z&&(z=179.99);-180>=z&&(z=-179.99);return z},_limit4326Y:function(z){90<=z&&(z=89.99);-90>=z&&(z=-89.99);return z},_createFullExtent:function(z){for(var D=null,E=0;E<z.length;E++){var A=z[E].geometry,F=null;(F="point"===A.geometryType?new d(A.x,A.y,A.x,A.y,A.spatialReference):A.getExtent())&&(D=null===D?F:D.union(F))}return D},_readExceptionReport:function(z,D){return 0<
z.getElementsByTagNameNS("*","ExceptionReport").length||0<z.getElementsByTagNameNS("*","ServiceExceptionReport").length?D:""},_readFeatureMembers:function(z,D,E,A,F){var H=this._readWkidFromNode(z);-1!=H&&(D=H);H=this._readSrsDimension(z);0!==H&&(E=H);var I=[];var L=z.getElementsByTagNameNS("*","featureMembers");for(H=0;H<L.length;H++){var J=L[H];var O=J.getElementsByTagNameNS(A,F);0===O.length&&(O=J.getElementsByTagNameNS(null,F));0===O.length&&(O=J.getElementsByTagNameNS("*",F));for(J=0;J<O.length;J++)this._readLayer(I,
O[J],D,E)}L=z.getElementsByTagNameNS("*","featureMember");for(H=0;H<L.length;H++)for(J=L[H],O=J.getElementsByTagNameNS(A,F),0===O.length&&(O=J.getElementsByTagNameNS(null,F)),0===O.length&&(O=J.getElementsByTagNameNS("*",F)),J=0;J<O.length;J++)this._readLayer(I,O[J],D,E);L=z.getElementsByTagNameNS("*","member");for(H=0;H<L.length;H++)for(J=L[H],O=J.getElementsByTagNameNS(A,F),0===O.length&&(O=J.getElementsByTagNameNS(null,F)),0===O.length&&(O=J.getElementsByTagNameNS("*",F)),J=0;J<O.length;J++)this._readLayer(I,
O[J],D,E);return I},_readLayer:function(z,D,E,A){var F=this._readSrsDimension(D);0!==F&&(A=F);var H=D.childNodes,I="",L=null;for(D=0;D<H.length;D++){var J=H[D];if(1==J.nodeType&&(F=J.localName,"boundedBy"!==F)){J=this._readGeometry(J,E,A);if(!this._isProjectedOk){this._isProjectedOk=!0;break}if(null!==J&&(L=J,I=F,"point"!==L.geometryType||"esriGeometryPolygon"!==this.geometryType&&"esriGeometryPolyline"!==this.geometryType))break}}if(L){E={};for(D=0;D<H.length;D++)if(J=H[D],F=J.localName,A=J.textContent,
F!==I)for(J=0;J<this.fields.length;J++){var O=this.fields[J];O.name==F&&(E[F]="esriFieldTypeDouble"===O.type?parseFloat(A,10):"esriFieldTypeInteger"===O.type?parseInt(A,10):A.trim())}this._convertWFSGeometryToGraphicObjects(z,L,E)}},_convertWFSGeometryToGraphicObjects:function(z,D,E){if("point"===D.geometryType&&("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType)){var A=new p;D=new g(D);A.setGeometry(D);A.setAttributes(E);z.push(A)}else if("multipoint"===D.geometryType&&
("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType))A=new p,D=new u(D),A.setGeometry(D),A.setAttributes(E),z.push(A);else if("polyline"===D.geometryType&&("esriGeometryPolyline"===this.geometryType||"esriGeometryComplex"===this.geometryType))A=new p,D=new x(D),A.setGeometry(D),A.setAttributes(E),z.push(A);else if("polygon"===D.geometryType&&("esriGeometryPolygon"===this.geometryType||"esriGeometryComplex"===this.geometryType))A=new p,D=new y(D),A.setGeometry(D),A.setAttributes(E),
z.push(A);else if("multigeometry"===D.geometryType)for(A=0;A<D.length;A++)this._convertWFSGeometryToGraphicObjects(z,D[A],E)},_readGeometry:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);var F=z.getElementsByTagNameNS(this._gmlNS,"MultiSurface");if(1<=F.length)for(A=0;A<F.length;)return this._readMultiSurface(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"MultiCurve");if(1<=F.length){var H=[];for(A=0;A<F.length;A++){var I=this._readMultiCurve(F[A],
D,E);for(z=0;z<I.length;z++)H.push(I[z])}return{geometryType:"polyline",paths:H,spatialReference:{wkid:this._map.spatialReference.wkid}}}F=z.getElementsByTagNameNS(this._gmlNS,"MultiGeometry");for(A=0;A<F.length;)return this._readMultiGeometry(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"Geometry");for(A=0;A<F.length;)return this._readGeometry(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"GeometryCollection");for(A=0;A<F.length;)return this._readGeometryCollection(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,
"Surface");for(A=0;A<F.length;)return this._readSurface(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"Curve");for(A=0;A<F.length;)return this._readCurve(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"MultiPolygon");for(A=0;A<F.length;)return this._readMultiPolygon(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"Polygon");for(A=0;A<F.length;)return this._readPolygon(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"MultiLineString");for(A=0;A<F.length;)return this._readMultiLineString(F[A],
D,E);F=z.getElementsByTagNameNS(this._gmlNS,"LineString");for(A=0;A<F.length;){D=this._readLineString(F[A],D,E);E={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};A=[];for(z=0;z<D.length;z++)A.push(D[z]);E.paths.push(A);return E}F=z.getElementsByTagNameNS(this._gmlNS,"LinearRing");for(A=0;A<F.length;)return this._readLinearRing(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"Box");if(1<=F.length)for(A=0;A<F.length;)return this._readBox(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,
"Envelope");for(A=0;A<F.length;)return this._readEnvelope(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"MultiPoint");if(1<=F.length)for(A=0;A<F.length;)return this._readMultiPoint(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"Point");for(A=0;A<F.length;)return this._readPoint(F[A],D,E);return null},_readGeometryCollection:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};
var F=z.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(z=0;z<F.length;z++){var H=this._readGeometryMember(F[z],D,E);A.push(H)}return A},_readMultiGeometry:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(z=0;z<F.length;z++){var H=this._readGeometryMember(F[z],D,E);A.push(H)}return A},
_readSurface:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);var F=[];F.geometryType="multigeometry";F.spatialReference={wkid:this._map.spatialReference.wkid};var H=z.getElementsByTagNameNS(this._gmlNS,"Point");for(A=0;A<H.length;A++)F.push(this._readPoint(H[A],D,E));H=z.getElementsByTagNameNS(this._gmlNS,"patches");for(A=0;A<H.length;A++){z=this._readPatches(H[A],D,E);for(var I=0;I<z.length;I++)F.push(z[I])}return F},_readMultiSurface:function(z,
D,E){var A;var F=this._readWkidFromNode(z);-1!=F&&(D=F);F=this._readSrsDimension(z);0!==F&&(E=F);var H=[];H.geometryType="multigeometry";H.spatialReference={wkid:this._map.spatialReference.wkid};var I=z.getElementsByTagNameNS(this._gmlNS,"surfaceMember");for(F=0;F<I.length;F++){var L=this._readSurfaceMember(I[F],D,E);for(A=0;A<L.length;A++)H.push(L[A])}I=z.getElementsByTagNameNS(this._gmlNS,"surfaceMembers");for(F=0;F<I.length;F++)for(z=this._readSurfaceMembers(I[F],D,E),A=0;A<z.length;A++)H.push(z[A]);
return H},_readCurve:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var F=z.getElementsByTagNameNS(this._gmlNS,"segments");for(z=0;z<F.length;z++)for(var H=this._readSegments(F[z],D,E),I=0;I<H.length;I++)A.paths.push(H[I]);return A},_readSegments:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];
A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"LineStringSegment");for(z=0;z<F.length;z++){var H=this._readLineStringSegment(F[z],D,E);A.push(H)}return A},_readLineStringSegment:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"posList");0<z.length;)return this._readPosList(z[0],D,E)},_readMultiCurve:function(z,D,E){var A;
var F=this._readWkidFromNode(z);-1!=F&&(D=F);F=this._readSrsDimension(z);0!==F&&(E=F);var H=[];H.spatialReference={wkid:this._map.spatialReference.wkid};var I=z.getElementsByTagNameNS(this._gmlNS,"curveMember");for(F=0;F<I.length;F++){var L=this._readCurveMember(I[F],D,E);for(A=0;A<L.length;A++)H.push(L[A])}I=z.getElementsByTagNameNS(this._gmlNS,"curveMembers");for(F=0;F<I.length;F++)for(L=this._readCurveMembers(I[F],D,E),A=0;A<L.length;A++)H.push(L[A]);return H},_readGeometryMember:function(z,D,
E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);var F=z.getElementsByTagNameNS(this._gmlNS,"Point");for(A=0;A<F.length;)return this._readPoint(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"LineString");for(A=0;A<F.length;){D=this._readLineString(F[A],D,E);E={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};A=[];for(z=0;z<D.length;z++)A.push(D[z]);E.paths.push(A);return E}F=z.getElementsByTagNameNS(this._gmlNS,"Polygon");
for(A=0;A<F.length;)return this._readPolygon(F[A],D,E);return null},_readSurfaceMember:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"Polygon");for(z=0;z<F.length;z++){var H=this._readPolygon(F[z],D,E);A.push(H)}return A},_readSurfaceMembers:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);
0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"Polygon");for(z=0;z<F.length;z++){var H=this._readPolygon(F[z],D,E);A.push(H)}return A},_readCurveMember:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"LineString");
for(z=0;z<F.length;z++){var H=this._readLineString(F[z],D,E);A.push(H)}return A},_readCurveMembers:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"LineString");for(z=0;z<F.length;z++){var H=this._readLineString(F[z],D,E);A.push(H)}return A},_readBox:function(z,D,E){var A,F,H,I,L=this._readWkidFromNode(z);-1!=
L&&(D=L);L=this._readSrsDimension(z);0!==L&&(E=L);L={geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var J=z.getElementsByTagNameNS(this._gmlNS,"coordinates");for(A=0;A<J.length;A++)if(F=this._readCoordinates(J[A],D,E)){if(1<=F.length){var O=H=F[0][0];var P=I=F[0][1]}1<=F.length&&(H=F[1][0],I=F[1][1]);L.rings.push([[O,P],[O,I],[H,I],[H,P],[O,P]]);return L}J=z.getElementsByTagNameNS(this._gmlNS,"coord");return 2<=J.length?((z=this._readCoord(J[0],D,E))&&1<=
z.length&&(O=H=z[0][0],P=I=z[0][1]),(D=this._readCoord(J[1],D,E))&&1<=D.length&&(H=D[0][0],I=D[0][1]),L.rings.push([[O,P],[O,I],[H,I],[H,P],[O,P]]),L):null},_readEnvelope:function(z,D,E){var A,F;var H=this._readWkidFromNode(z);-1!=H&&(D=H);H=this._readSrsDimension(z);0!==H&&(E=H);var I=z.getElementsByTagNameNS(this._gmlNS,"lowerCorner");for(H=0;H<I.length;H++){var L=this._readCoordinates(I[H],D,E);L&&(A=L[0])}I=z.getElementsByTagNameNS(this._gmlNS,"upperCorner");for(H=0;H<I.length;H++)(z=this._readCoordinates(I[H],
D,E))&&(F=z[0]);return A&&F?{geometryType:"polygon",rings:[[[A[0],A[1]],[A[0],F[1]],[F[0],F[1]],[F[0],A[1]],[A[0],A[1]]]],spatialReference:{wkid:this._map.spatialReference.wkid}}:null},_readPolygon:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);var F={geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var H=z.getElementsByTagNameNS(this._gmlNS,"outerBoundaryIs");for(A=0;A<H.length;A++){var I=this._readOuterBoundaryIs(H[A],
D,E);F.rings.push(I)}H=z.getElementsByTagNameNS(this._gmlNS,"innerBoundaryIs");for(A=0;A<H.length;A++)I=this._readInnerBoundaryIs(H[A],D,E),F.rings.push(I);H=z.getElementsByTagNameNS(this._gmlNS,"exterior");for(A=0;A<H.length;A++)I=this._readExterior(H[A],D,E),F.rings.push(I);H=z.getElementsByTagNameNS(this._gmlNS,"interior");for(A=0;A<H.length;A++)I=this._readInterior(H[A],D,E),F.rings.push(I);return F},_readPolygonMember:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);
0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"Polygon");0<z.length;)return this._readPolygon(z[0],D,E);return null},_readMultiPolygon:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A=[];A.geometryType="multigeometry";A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"polygonMember");for(z=0;z<F.length;z++){var H=this._readPolygonMember(F[z],D,E);A.push(H)}return A},_readOuterBoundaryIs:function(z,
D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<z.length;)return this._readLinearRing(z[0],D,E);return null},_readInnerBoundaryIs:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<z.length;)return this._readLinearRing(z[0],D,E);return null},_readExterior:function(z,D,E){var A=this._readWkidFromNode(z);
-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<z.length;)return this._readLinearRing(z[0],D,E);return null},_readInterior:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<z.length;)return this._readLinearRing(z[0],D,E);return null},_readPatches:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);
0!==A&&(E=A);A=[];A.spatialReference={wkid:this._map.spatialReference.wkid};var F=z.getElementsByTagNameNS(this._gmlNS,"PolygonPatch");for(z=0;z<F.length;z++)A.push(this._readPolygon(F[z],D,E));return A},_readLineString:function(z,D,E){var A,F;var H=this._readWkidFromNode(z);-1!=H&&(D=H);H=this._readSrsDimension(z);0!==H&&(E=H);var I=[];I.spatialReference={wkid:this._map.spatialReference.wkid};var L=z.getElementsByTagNameNS(this._gmlNS,"coordinates");for(H=0;H<L.length;H++)if(F=this._readCoordinates(L[H],
D,E))for(A=0;A<F.length;A++){var J=F[A];I.push(J)}L=z.getElementsByTagNameNS(this._gmlNS,"coord");for(H=0;H<L.length;H++)if(F=this._readCoord(L[H],D,E))for(A=0;A<F.length;A++)J=F[A],I.push(J);L=z.getElementsByTagNameNS(this._gmlNS,"posList");for(H=0;H<L.length;H++)if(F=this._readPosList(L[H],D,E))for(A=0;A<F.length;A++)J=F[A],I.push(J);return I},_readLineStringMember:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,
"LineString");0<z.length;)return this._readLineString(z[0],D,E);return null},_readMultiLineString:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var F=z.getElementsByTagNameNS(this._gmlNS,"lineStringMember");for(z=0;z<F.length;z++){var H=this._readLineStringMember(F[z],D,E);H&&A.paths.push(H)}return 1<=A.paths.length?A:null},_readPoint:function(z,D,E){var A;
var F=this._readWkidFromNode(z);-1!=F&&(D=F);F=this._readSrsDimension(z);0!==F&&(E=F);var H=z.getElementsByTagNameNS(this._gmlNS,"coordinates");for(F=0;F<H.length;F++)if(A=this._readCoordinates(H[F],D,E))return{geometryType:"point",x:A[0][0],y:A[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};H=z.getElementsByTagNameNS(this._gmlNS,"pos");for(F=0;F<H.length;F++)if((A=this._readPos(H[F],D,E))&&0<A.length)return{geometryType:"point",x:A[0][0],y:A[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};
H=z.getElementsByTagNameNS(this._gmlNS,"coord");for(F=0;F<H.length;F++)if(z=this._readCoord(H[F],D,E))return{geometryType:"point",x:z[0][0],y:z[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};return null},_readPointMember:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);for(z=z.getElementsByTagNameNS(this._gmlNS,"Point");0<z.length;)return this._readPoint(z[0],D,E);return null},_readMultiPoint:function(z,D,E){var A=this._readWkidFromNode(z);
-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);A={geometryType:"multipoint",points:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var F=z.getElementsByTagNameNS(this._gmlNS,"pointMember");for(z=0;z<F.length;z++){var H=this._readPointMember(F[z],D,E);H&&A.points.push([H.x,H.y])}return 1<=A.points.length?A:null},_readLinearRing:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);var F=z.getElementsByTagNameNS(this._gmlNS,"coordinates");
for(A=0;A<F.length;)return this._readCoordinates(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"posList");for(A=0;A<F.length;)return this._readCoordinates(F[A],D,E);F=z.getElementsByTagNameNS(this._gmlNS,"pos");for(A=0;A<F.length;)return this._readPos(F[A],D,E)},_readCoordinatesBody:function(z,D,E){var A=new h(z);D=D.trim();var F=[];F.spatialReference={wkid:this._map.spatialReference.wkid};z=this._isReverse(z,this.version);if(D)if(2===E){if((D=D.match(/[0123456789.\-\+eE]+/g))&&2<=D.length)for(E=
0;E<D.length;E+=2){var H=parseFloat(D[E]);var I=parseFloat(D[E+1]);if(z){var L=I;I=H;H=L}L={};this._projectFromSRToSR(A,this._map.spatialReference,H,I,L)&&(H=L.x,I=L.y);F.push([H,I])}}else if(3===E&&(D=D.match(/[0123456789.\-\+eE]+/g))&&3<=D.length)for(E=0;E<D.length;E+=3)H=parseFloat(D[E]),I=parseFloat(D[E+1]),z&&(L=I,I=H,H=L),L={},this._projectFromSRToSR(A,this._map.spatialReference,H,I,L)&&(H=L.x,I=L.y),F.push([H,I]);return F},_readCoord:function(z,D,E){var A,F=this._readWkidFromNode(z);-1!=F&&
(D=F);F=new h(D);var H=this._readSrsDimension(z);0!==H&&(E=H);var I=this._isReverse(D,this.version),L=[];L.spatialReference={wkid:this._map.spatialReference.wkid};H=0;var J=z.getElementsByTagNameNS(this._gmlNS,"X");for(A=0;A<J.length;){H=this._readFloat(J[A],D,E);break}var O=0;J=z.getElementsByTagNameNS(this._gmlNS,"Y");for(A=0;A<J.length;){O=this._readFloat(J[A],D,E);break}I&&(z=O,O=H,H=z);z={};this._projectFromSRToSR(F,this._map.spatialReference,H,O,z)&&(H=z.x,O=z.y);L.push(I?[O,H]:[H,O]);return L},
_readCoordinates:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);return this._readCoordinatesBody(D,z.textContent,E)},_readPos:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);return this._readCoordinatesBody(D,z.textContent,E)},_readPosList:function(z,D,E){var A=this._readWkidFromNode(z);-1!=A&&(D=A);A=this._readSrsDimension(z);0!==A&&(E=A);return this._readCoordinatesBody(D,z.textContent,E)},
_projectFromSRToSR:function(z,D,E,A,F){if(e.canProject(z,D))return z=new g(E,A,z),D=e.project(z,D),F.x=D.x,F.y=D.y,!0;F.x=E;F.y=A;return this._isProjectedOk=!1},_readFloat:function(z){return(z=z.textContent)?parseFloat(z):0},_readSrsDimension:function(z){return z.attributes&&(z=z.attributes.getNamedItem("srsDimension"))?parseInt(z.value,10):0},_readWkidFromNode:function(z){return z.attributes&&(z=z.attributes.getNamedItem("srsName"))&&(z=z.value.match(/\d+/g))&&0<z.length?(z=parseInt(z[z.length-1],
10),84===z&&(z=4326),parseInt(z,10)):-1},_isReverse:function(z,D){return this._inverseResponse},_appendCustomParameters:function(z){if(this.customParameters)for(var D in this.customParameters)z+=(-1===z.indexOf("?")?"?":"\x26")+D+"\x3d"+encodeURIComponent(this.customParameters[D]);return z},_checkForUrlInUrl:function(z,D){var E=z.toLowerCase().lastIndexOf("http");-1<D&&E>D&&(-1<z.indexOf("?",E)||-1!==z.indexOf("\x26",E)||(D=-1));return D}});w.setObject("layers.WFSLayer",K,b);return K})},"esri/layers/WMTSLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff dojox/xml/parser ../kernel ../lang ../request ../urlUtils ../WKIDUnitConversion ../SpatialReference ../geometry/Point ../geometry/Extent ../geometry/webMercatorUtils ./TiledMapServiceLayer ./TileInfo ./WMTSLayerInfo dojo/query".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){G=G([l],{declaredClass:"esri.layers.WMTSLayer",copyright:null,extent:null,tileUrl:null,spatialReference:null,tileInfo:null,constructor:function(d,g){this.version="1.0.0";this.tileUrl=this._url=d;this.serviceMode="RESTful";this._parseCapabilities=w.hitch(this,this._parseCapabilities);this._getCapabilitiesError=w.hitch(this,this._getCapabilitiesError);this._formatDictionary={"image/png":".png","image/png8":".png","image/png24":".png","image/png32":".png",
"image/jpg":".jpg","image/jpeg":".jpeg","image/gif":".gif","image/bmp":".bmp","image/tiff":".tif","image/jpgpng":"","image/jpegpng":"","image/unknown":""};g||(g={});if(g.serviceMode)if("KVP"===g.serviceMode||"RESTful"===g.serviceMode)this.serviceMode=g.serviceMode;else return;this.customParameters=g.customParameters;this.customLayerParameters=g.customLayerParameters;this.layerInfo=new e;g.layerInfo&&(this.layerInfo=g.layerInfo,this._identifier=g.layerInfo.identifier,this._tileMatrixSetId=g.layerInfo.tileMatrixSet,
g.layerInfo.format&&(this.format="image/"+g.layerInfo.format),this._style=g.layerInfo.style,this.title=g.layerInfo.title,this._dimension=g.layerInfo.dimension,this._dimension2=g.layerInfo.dimension2);g.resourceInfo?(this.version=g.resourceInfo.version,g.resourceInfo.getTileUrl&&(this._url=this.tileUrl=g.resourceInfo.getTileUrl),this.copyright=g.resourceInfo.copyright,this.layerInfos=g.resourceInfo.layerInfos,this.customParameters=g.resourceInfo.customParameters||this.customParameters,this.customLayerParameters=
g.resourceInfo.customLayerParameters||this.customLayerParameters,this._parseResourceInfo(),this.loaded=!0,this.onLoad(this)):this._getCapabilities()},setActiveLayer:function(d){this.setVisibleLayer(d)},setVisibleLayer:function(d){this._setActiveLayer(d);this.refresh(!0)},setCustomParameters:function(d,g){this.customParameters=d;this.customLayerParameters=g;this.refresh(!0)},getTileUrl:function(d,g,u){d=this._levelToLevelValue[d];d=this.resourceUrls&&0<this.resourceUrls.length?this.resourceUrls[g%
this.resourceUrls.length].template.replace(/\{Style\}/gi,this._style).replace(/\{TileMatrixSet\}/gi,this._tileMatrixSetId).replace(/\{TileMatrix\}/gi,d).replace(/\{TileRow\}/gi,g).replace(/\{TileCol\}/gi,u).replace(/\{dimensionValue\}/gi,this._dimension).replace(/\{dimensionValue2\}/gi,this._dimension2):this.UrlTemplate.replace(/\{level\}/gi,d).replace(/\{row\}/gi,g).replace(/\{col\}/gi,u);d=this._appendCustomLayerParameters(d);d=this.addTimestampToURL(d);return p.addProxy(d)},getTileUrlTemplate:function(d){var g=
d.identifier,u=d.tileMatrixSet,x=d.format,y=d.style,B=d.dimension,C=d.dimension2;g?d=v.filter(this.layers,function(D){return D.identifier===g})[0]:(d=this.layers[0],g=this.layers[0].identifier);if(d){if(!x)x=d.formats[0];else if(!(-1===x.indexOf("image/")&&-1<v.indexOf(d.formats,x))&&(-1===x.indexOf("image/")&&(x="image/"+x),-1===v.indexOf(d.formats,x))){this.onError(Error("The layer doesn't support the format of "+x));return}if(!y)y=d.styles[0];else if(-1===v.indexOf(d.styles,y)){this.onError(Error("The layer doesn't support the style of "+
y));return}if(!B&&d.dimensions)B=d.dimensions[0];else if(-1===v.indexOf(d.dimensions,B)){this.onError(Error("The layer doesn't support the dimension of "+B));return}if(!C&&d.dimensions2)C=d.dimensions2[0];else if(-1===v.indexOf(d.dimensions2,C)){this.onError(Error("The layer doesn't support the dimension of "+C));return}if(u){var z=v.filter(d.tileMatrixSetInfos,function(D){return D.tileMatrixSet===u})[0];if(!z){this.onError(Error("The tileMatrixSetId "+u+" is not supported by the layer of "+g));return}}else(z=
v.filter(d.tileMatrixSetInfos,function(D){return"GoogleMapsCompatible"===D.tileMatrixSet})[0])||(z=d.tileMatrixSetInfos[0]),u=z.tileMatrixSet;return this._getTileUrlTemplate(g,u,x,y,B,C)}this.onError(Error("couldn't find the layer "+g))},_getTileUrlTemplate:function(d,g,u,x,y,B){d||(d=this._identifier);g||(g=this._tileMatrixSetId);u||(u=this.format);x||""===x||(x=this._style);if(this.resourceUrls&&0<this.resourceUrls.length){var C=this.resourceUrls[0].template;C.indexOf(".xxx")===C.length-4&&(C=C.slice(0,
C.length-4));C=C.replace(/\{Style\}/gi,x);C=C.replace(/\{TileMatrixSet\}/gi,g);C=C.replace(/\{TileMatrix\}/gi,"{level}");C=C.replace(/\{TileRow\}/gi,"{row}");C=C.replace(/\{TileCol\}/gi,"{col}");C=C.replace(/\{dimensionValue\}/gi,y);return C=C.replace(/\{dimensionValue2\}/gi,B)}"KVP"===this.serviceMode?C=this._url+"SERVICE\x3dWMTS\x26VERSION\x3d"+this.version+"\x26REQUEST\x3dGetTile\x26LAYER\x3d"+d+"\x26STYLE\x3d"+x+"\x26FORMAT\x3d"+u+"\x26TILEMATRIXSET\x3d"+g+"\x26TILEMATRIX\x3d{level}\x26TILEROW\x3d{row}\x26TILECOL\x3d{col}":
"RESTful"===this.serviceMode&&(y="",this._formatDictionary[u.toLowerCase()]&&(y=this._formatDictionary[u.toLowerCase()]),C=this._url+d+"/"+x+"/"+g+"/{level}/{row}/{col}"+y);return C},_parseResourceInfo:function(){var d=this.layerInfos,g;"KVP"===this.serviceMode&&(this._url+=-1<this._url.indexOf("?")?"":"?");for(g=0;g<d.length;g++)if(!(this._identifier&&d[g].identifier!==this._identifier||this.title&&d[g].title!==this.title||this._tileMatrixSetId&&d[g].tileMatrixSet!==this._tileMatrixSetId||this.format&&
"image/"+d[g].format!==this.format||this._style&&d[g].style!==this._style)){w.mixin(this,{description:d[g].description,tileInfo:d[g].tileInfo,spatialReference:d[g].tileInfo.spatialReference,fullExtent:d[g].fullExtent,initialExtent:d[g].initialExtent,_identifier:d[g].identifier,_tileMatrixSetId:d[g].tileMatrixSet,format:"image/"+d[g].format,_style:d[g].style});break}for(g=0;g<d.length;g++){var u=d[g].tileInfo;96!==u.dpi&&(v.forEach(u.lods,function(x){x.scale=96*x.scale/u.dpi}),u.dpi=96);v.forEach(u.lods,
function(x){x.resolution=this._getResolution(u.spatialReference.wkid,90.71428571428571*x.scale/96,d[g].tileMatrixSet)},this)}this._setActiveLayer();this.UrlTemplate=this._getTileUrlTemplate();this._levelToLevelValue=[];v.forEach(this.tileInfo.lods,function(x){this._levelToLevelValue[x.level]=x.levelValue?x.levelValue:x.level},this)},_getCapabilities:function(){var d;"KVP"===this.serviceMode?d=-1<this._url.indexOf("?")?this._url+"\x26request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version:
this._url+"?request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version:"RESTful"===this.serviceMode&&(d=this._url+"/"+this.version+"/WMTSCapabilities.xml");d=this._appendCustomParameters(d);b({url:d,handleAs:"text",load:this._parseCapabilities,error:this._getCapabilitiesError})},_parseCapabilities:function(d){d=d.replace(/ows:/gi,"");d=f.parse(d);var g=K.query("Contents",d)[0];if(g){var u=K.query("OperationsMetadata",d)[0],x=K.query("[name\x3d'GetTile']",u)[0];u=this._url;x=K.query("Get",
x);var y,B=!1;for(y=0;y<x.length;y++){var C=K.query("Constraint",x[y])[0];if(!C||this._getTagWithChildTagValue("AllowedValues","Value",this.serviceMode,C)){u=x[y].attributes[0].nodeValue;B=!0;break}else if(!C||this._getTagWithChildTagValue("AllowedValues","Value","RESTful",C))var z=x[y].attributes[0].nodeValue;else if(!C||this._getTagWithChildTagValue("AllowedValues","Value","KVP",C))var D=x[y].attributes[0].nodeValue}B||("KVP"===this.serviceMode&&z?(u=z,this.serviceMode="RESTful"):"RESTful"===this.serviceMode&&
D&&(u=D,this.serviceMode="KVP"));-1===u.indexOf("/1.0.0/")&&"RESTful"===this.serviceMode&&(u+="/");"KVP"===this.serviceMode&&(u+=-1<u.indexOf("?")?"":"?");this._url=u;this.copyright=this._getTagValues("Capabilities\x3eServiceIdentification\x3eAccessConstraints",d)[0];z=K.query("Layer",g);var E,A=[];this.layers=[];v.forEach(z,function(F){E=this._getTagValues("Identifier",F)[0];A.push(E);this.layers.push(this._getWMTSLayerInfo(E,F,g))},this);this._setActiveLayer();this.loaded=!0;this.onLoad(this)}else this.onError(Error("The WMTS capabilities XML is not valid"))},
_setActiveLayer:function(d){d||(d={});d.identifier&&(this._identifier=d.identifier);d.tileMatrixSet&&(this._tileMatrixSetId=d.tileMatrixSet);d.format&&(this.format=d.format);d.style&&(this._style=d.style);d.dimension&&(this._dimension=d.dimension);d.dimension2&&(this._dimension2=d.dimension2);if(this.layers)if(this._identifier?d=v.filter(this.layers,function(u){return u.identifier===this._identifier},this)[0]:(d=this.layers[0],this._identifier=this.layers[0].identifier),d){if(this.format){if(-1===
this.format.indexOf("image/")&&(this.format="image/"+this.format),-1===v.indexOf(d.formats,this.format)){this.onError(Error("The layer doesn't support the format of "+this.format));return}}else this.format=d.formats[0],-1===this.format.indexOf("image/")&&(this.format="image/"+this.format);if(!this._style)this._style=d.styles[0];else if(-1===v.indexOf(d.styles,this._style)){this.onError(Error("The layer doesn't support the style of "+this._style));return}if(!this._dimension&&d.dimensions)this._dimension=
d.dimensions[0];else if(-1===v.indexOf(d.dimensions,this._dimension)){this.onError(Error("The layer doesn't support the dimension of "+this._dimension));return}if(!this._dimension2&&d.dimensions2)this._dimension2=d.dimensions2[0];else if(-1===v.indexOf(d.dimensions2,this._dimension2)){this.onError(Error("The layer doesn't support the dimension of "+this._dimension2));return}if(this._tileMatrixSetId){var g=v.filter(d.tileMatrixSetInfos,function(u){return u.tileMatrixSet===this._tileMatrixSetId},this)[0];
if(!g){this.onError(Error("The tileMatrixSetId "+this._tileMatrixSetId+" is not supported by the layer of "+this._identifier));return}}else(g=v.filter(d.tileMatrixSetInfos,function(u){return"GoogleMapsCompatible"===u.tileMatrixSet})[0])||(g=d.tileMatrixSetInfos[0]),this._tileMatrixSetId=g.tileMatrixSet;this.description=d.description;this.title=d.title;this.spatialReference=g.tileInfo.spatialReference;this.tileInfo=g.tileInfo;this._levelToLevelValue=[];v.forEach(this.tileInfo.lods,function(u){this._levelToLevelValue[u.level]=
u.levelValue?u.levelValue:u.level},this);102100===this.spatialReference.wkid||102113===this.spatialReference.wkid?this.fullExtent=this.initialExtent=k.geographicToWebMercator(d.gcsExtent):4326===this.spatialReference.wkid?this.fullExtent=this.initialExtent=d.gcsExtent:(this.fullExtent=g.fullExtent,this.initialExtent=g.initialExtent);this.resourceUrls=d.resourceUrls;this.UrlTemplate=this._getTileUrlTemplate();this.layerInfo={identifier:this._identifier,tileMatrixSet:this._tileMatrixSetId,format:this.format,
style:this._style,fullExtent:this.fullExtent,initialExtent:this.initialExtent,tileInfo:this.tileInfo,title:this.title,description:this.description}}else this.onError(Error("couldn't find the layer "+this._identifier))},_getWMTSLayerInfo:function(d,g,u){var x=this._getTagValues("Abstract",g)[0],y=this._getTagValues("Title",g)[0],B=K.query("WGS84BoundingBox",g)[0],C=B?this._getTagValues("LowerCorner",B)[0].split(" "):["-180","-90"],z=B?this._getTagValues("UpperCorner",B)[0].split(" "):["180","90"];
B=parseFloat(C[0]);C=parseFloat(C[1]);var D=parseFloat(z[0]);z=parseFloat(z[1]);B=new n(B,C,D,z,new t({wkid:4326}));z=this._getTagValues("Identifier",K.query("Style",g)[0]);var E=this._getTagValues("Identifier",K.query("Dimension",g)[0]),A=this._getTagValues("Default",K.query("Dimension",g)[0])||this._getTagValues("Value",K.query("Dimension",g)[0]),F=1<K.query("Dimension",g).length?this._getTagValues("Identifier",K.query("Dimension",g)[1]):[],H=1<K.query("Dimension",g).length?this._getTagValues("Default",
K.query("Dimension",g)[1])||this._getTagValues("Value",K.query("Dimension",g)[1]):[];C=this._getTagValues("Format",g);u=this._getLayerMatrixInfos(g,u);d={identifier:d,tileMatrixSetInfos:u,formats:C,styles:z,title:y,description:x,gcsExtent:B,dimensions:A,dimensions2:H};g=K.query("ResourceURL",g);var I=[],L;v.forEach(g,function(J){L=J.getAttribute("template");if(E&&A&&E[0]&&A[0])if(-1<L.indexOf("{"+E+"}"))L=L.replace("{"+E+"}","{dimensionValue}");else{var O=L.toLowerCase().indexOf("{"+E[0].toLowerCase()+
"}");-1<O&&(L=L.substring(0,O)+"{dimensionValue}"+L.substring(O+E[0].length+2))}F&&H&&F[0]&&H[0]&&(-1<L.indexOf("{"+F+"}")?L=L.replace("{"+F+"}","{dimensionValue2}"):(O=L.toLowerCase().indexOf("{"+F[0].toLowerCase()+"}"),-1<O&&(L=L.substring(0,O)+"{dimensionValue2}"+L.substring(O+F[0].length+2))));I.push({template:L,format:J.getAttribute("format"),resourceType:J.getAttribute("resourceType")})});I&&0<I.length&&(d.resourceUrls=I);return d},_getLayerMatrixInfos:function(d,g){var u=[],x=this._getTagValues("TileMatrixSet",
d);if(x&&0!==x.length)return v.forEach(x,function(y){y=this._getLayerMatrixInfo(y,d,g);u.push(y)},this),u},_getLayerMatrixInfo:function(d,g,u){var x=[];g=this._getTagWithChildTagValue("TileMatrixSetLink","TileMatrixSet",d,g);var y=this._getTagValues("TileMatrix",g),B=this._getTagWithChildTagValue("TileMatrixSet","Identifier",d,u),C=this._getTagValues("SupportedCRS",B)[0];var z=parseInt(C.split(":").pop(),10);if(900913==z||3857==z)z=102100;if(-1<C.toLowerCase().indexOf("crs84")||-1<C.toLowerCase().indexOf("crs:84")){z=
4326;var D=!0}else if(-1<C.toLowerCase().indexOf("crs83")||-1<C.toLowerCase().indexOf("crs:83"))z=4269,D=!0;else if(-1<C.toLowerCase().indexOf("crs27")||-1<C.toLowerCase().indexOf("crs:27"))z=4267,D=!0;var E=new t({wkid:z}),A=K.query("TileMatrix",B)[0];u=parseInt(this._getTagValues("TileWidth",A)[0],10);g=parseInt(this._getTagValues("TileHeight",A)[0],10);var F=this._getTagValues("TopLeftCorner",A)[0].split(" ");var H=F[0],I=F[1];1<H.split("E").length&&(F=H.split("E"),H=F[0]*Math.pow(10,F[1]));1<
I.split("E").length&&(F=I.split("E"),I=F[0]*Math.pow(10,F[1]));H=parseFloat(H);I=parseFloat(I);var L=D&&4326===z&&90===H&&-180===I;for(F=0;F<this._flippingAxisForWkids.length;F++)if(C.split(":").pop()>=this._flippingAxisForWkids[F][0]&&C.split(":").pop()<=this._flippingAxisForWkids[F][1]||4326===z&&(!D||L)){4326===z&&90<H&&(H="90");var J=new m(I,H,E);break}F===this._flippingAxisForWkids.length&&(J=new m(H,I,E));if(0===y.length)for(y=K.query("TileMatrix",B),F=0;F<y.length;F++)D=this._getLodFromTileMatrix(y[F],
z,F,d),x.push(D);else for(F=0;F<y.length;F++)D=this._getTagWithChildTagValue("TileMatrix","Identifier",y[F],B),D=this._getLodFromTileMatrix(D,z,F,d),x.push(D);z=K.query("BoundingBox",B)[0];if(z){var O=this._getTagValues("LowerCorner",z)[0].split(" ");var P=this._getTagValues("UpperCorner",z)[0].split(" ")}O&&1<O.length&&P&&1<P.length?(A=parseFloat(O[0]),z=parseFloat(O[1]),O=parseFloat(P[0]),P=parseFloat(P[1])):(O=this._getTagValues("MatrixWidth",A)[0],z=this._getTagValues("MatrixHeight",A)[0],A=J.x,
P=J.y,O=A+O*g*x[0].resolution,z=P-z*u*x[0].resolution);P=O=new n(A,z,O,P,E);J=new h({dpi:96,spatialReference:E,format:this.format,rows:u,cols:g,origin:J,lods:x});return{tileMatrixSet:d,fullExtent:P,initialExtent:O,tileInfo:J}},_getCapabilitiesError:function(d){this.onError(d)},_getLodFromTileMatrix:function(d,g,u,x){var y=this._getTagValues("Identifier",d)[0];d=this._getTagValues("ScaleDenominator",d)[0];1<d.split("E").length?(d=d.split("E"),d=d[0]*Math.pow(10,d[1])):d=parseFloat(d);g=this._getResolution(g,
d,x);return{level:u,levelValue:y,scale:1.058267716535433*d,resolution:g}},_getResolution:function(d,g,u){d=a.isDefined(q[d])?q.values[q[d]]:"default028mm"===u?6370997*Math.PI/180:6378137*Math.PI/180;return 7*g/25E3/d},_getTag:function(d,g){var u=K.query(d,g);return u&&0<u.length?u[0]:null},_getTagValues:function(d,g){var u=[],x=d.split("\x3e"),y;var B=K.query(x[0],g)[0];if(1<x.length){for(y=1;y<x.length-1;y++)B=K.query(x[y],B)[0];x=K.query(x[x.length-1],B)}else x=K.query(x[0],g);x&&0<x.length&&v.forEach(x,
function(C){9>r("ie")?u.push(C.childNodes.length?C.childNodes[0].nodeValue:""):u.push(C.textContent)});return u},_getAttributeValues:function(d,g,u){d=K.query(d,u);var x=[];d&&0<d.length&&v.forEach(d,function(y){x.push(y.getAttribute(g))});return x},_getTagWithChildTagValue:function(d,g,u,x){x=x.childNodes;var y;for(y=0;y<x.length;y++)if(-1<x[y].nodeName.indexOf(d)){if(9>r("ie")){if(a.isDefined(K.query(g,x[y])[0]))var B=K.query(g,x[y])[0].childNodes[0].nodeValue}else a.isDefined(K.query(g,x[y])[0])&&
(B=K.query(g,x[y])[0].textContent);if(B===u||u.split(":")&&B===u.split(":")[1])return x[y]}},_appendCustomParameters:function(d){var g;if(this.customParameters)for(g in this.customParameters)d+=(-1===d.indexOf("?")?"?":"\x26")+g+"\x3d"+encodeURIComponent(this.customParameters[g]);return d},_appendCustomLayerParameters:function(d){var g;if(this.customLayerParameters||this.customParameters){var u=w.clone(this.customParameters||{});w.mixin(u,this.customLayerParameters||{});for(g in u)d+=(-1===d.indexOf("?")?
"?":"\x26")+g+"\x3d"+encodeURIComponent(u[g])}return d},_flippingAxisForWkids:[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,
5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,
3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],
[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]]});w.setObject("layers.WMTSLayer",G,c);return G})},"esri/layers/WMTSLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(K,G,w,v){K=K(null,{declaredClass:"esri.layers.WMTSLayerInfo",identifier:null,tileMatrixSet:null,format:null,style:null,tileInfo:null,title:null,fullExtent:null,initialExtent:null,description:null,dimension:null,constructor:function(r){r&&(this.title=r.title,this.tileMatrixSet=
r.tileMatrixSet,this.format=r.format,this.style=r.style,this.tileInfo=r.tileInfo,this.fullExtent=r.fullExtent,this.initialExtent=r.initialExtent,this.identifier=r.identifier,this.description=r.description,this.dimension=r.dimension)}});G.setObject("layers.WMTSLayerInfo",K,v);return K})},"arcgisonline/pages/item/widgets/typeOptions/mapOptions/domainUpdate":function(){define("require exports tslib ../../../../../map/core/urlUtils ../../../../pageUtil ../../../../utils/dom ../../../../utils/strings ../../../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/dom-construct dojo/on dojo/string dojo/topic esri/lang dojo/i18n!../../../../../nls/arcgisonline dojo/text!./domainUpdate.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);return function(){function d(g,u){this.templateString=e["default"];this.i18n=h["default"]}d.prototype.startup=
function(){this.inherited(arguments);this.initUI()};d.prototype.initUI=function(){this.initHandlers();this.initDomains()};d.prototype.initHandlers=function(){this.own(q["default"](this.doneBtn,this.doneClick.bind(this)),m["default"](this.domainSelect,"change",this.selectedDomainChange.bind(this)),q["default"](this.replaceDomainBtn,this.replaceDomainClick.bind(this)),r["default"].registerKeystrokeHandler(this.domainReplace,this.replaceDomainChange.bind(this)),k["default"].subscribe("item-data/change-complete",
this.itemDataChange.bind(this)))};d.prototype.initDomains=function(){var g=this,u=this.domainSelect.value,x=!1;v["default"].getUniqueDomains(this.item.itemData).then(function(y){t["default"].empty(g.domainSelect);y.forEach(function(B){var C={value:B.domain,innerHTML:B.domain};!g.autoSelectReplacementValue||B.domain!==g.autoSelectReplacementValue&&B.domain!==u||(x=C.selected=!0,g.autoSelectReplacementValue=void 0);t["default"].create("option",C,g.domainSelect)});g.domainSelect.options&&g.domainSelect.options.length?
(x||(f["default"].selectOption(g.domainSelect.options,g.domainSelect.options[0].value),g.lastSelectedDomain=g.domainSelect.options[0].value),g.selectedDomainChange()):(f["default"].hideNodes([g.updateDomainDesc,g.updateDomainContainer,g.replaceDomainLoading,g.replaceDomainFailure,g.layerDetailsContainer]),t["default"].empty(g.replaceDomainSuccess),g.replaceDomainSuccess.innerHTML=g.i18n.itemProperties.noLayersToUpdateDomain,f["default"].showNode(g.replaceDomainSuccess))})};d.prototype.filterForIssues=
function(g){return g.filter(function(u){return"failure"===u.layerUrlChange||u.layerRenderingFailures||u.layerQueryUrlFailures||u.itemAccess&&("failure"===u.itemUrlChange||u.itemRenderingFailures||u.itemQueryUrlFailures)})};d.prototype.filterForUpdated=function(g){return g.filter(function(u){return("success"===u.layerUrlChange||u.layerRenderingChanged||u.layerQueryUrlChanged)&&!u.layerRenderingFailures&&!u.layerQueryUrlFailures||u.itemAccess&&("success"===u.itemUrlChange||u.itemRenderingChanged||u.itemQueryUrlChanged)&&
!u.itemRenderingFailures&&!u.itemQueryUrlFailures})};d.prototype.containsInvalidProtocol=function(g){return-1===(null===g||void 0===g?void 0:g.indexOf("://"))&&!(c["default"].startsWith(g,"http://")||c["default"].startsWith(g,"https://"))};d.prototype.ensureProtocol=function(g){return this.containsInvalidProtocol(g)?"http://"+g:g};d.prototype.validateDomain=function(g){var u=this.domainSelect.value,x=!!u,y=RegExp("/","g"),B=!0;g?(this.containsInvalidProtocol(g)&&(B=!1),x&&(u.match(y)||[]).length!==
(g.match(y)||[]).length&&(B=!1)):B=!1;return B};d.prototype.doneClick=function(){k["default"].publish("update-domain/done")};d.prototype.setInputError=function(g){this.domainReplace.classList.add("input-error");this.domainReplaceError.classList.add("is-active");this.domainReplaceError.classList.remove("hide")};d.prototype.clearInputError=function(){this.domainReplace.classList.remove("input-error");this.domainReplaceError.classList.remove("is-active");this.domainReplaceError.classList.add("hide")};
d.prototype.selectedDomainChange=function(){var g=this,u=this.domainSelect.value,x=!!u,y="",B;v["default"].getUniqueDomains(this.item.itemData).then(function(C){g.refreshingDomains?g.refreshingDomains=void 0:u!==g.lastSelectedDomain&&(f["default"].hideNode(g.replaceDomainFailure),f["default"].hideNode(g.replaceDomainSuccess));if(x){if(B=C.filter(function(z){return z.domain===u}))B=B.shift(),g.domainReplace.value=B.domain,g.lastSelectedDomain=B.domain,B.layers.forEach(function(z){y+=z.title+"\x3cbr\x3e"}),
g.layerDetails.innerHTML=y;g.clearInputError();f["default"].showHide(g.layerDetailsContainer,B);g.domainReplace.focus()}else f["default"].hideNode(g.layerDetailsContainer);g.replaceDomainChange()})};d.prototype.replaceDomainClick=function(){var g=this,u=this.domainSelect.value,x=this.ensureProtocol(this.domainReplace.value.trim());this.clearInputError();this.validateDomain(x)?(f["default"].hideNodes([this.layerDetailsContainer,this.replaceDomainFailure,this.replaceDomainSuccess]),f["default"].showNode(this.replaceDomainLoading),
v["default"].switchDomain(this.item.itemData,this.item,u,x).then(function(y){f["default"].hideNode(g.replaceDomainLoading);var B=g.filterForIssues(y.layers),C=g.filterForUpdated(y.layers);l["default"].isDefined(y.configChange)&&"failure"===y.configChange?(g.replaceDomainFailureMessage.innerHTML=g.i18n.itemProperties.errorUpdateHTTPS,f["default"].showNode(g.replaceDomainFailure)):B.length?(g.replaceDomainFailureMessage.innerHTML=n["default"].substitute(g.i18n.itemProperties.someLayerDomainsFailed,
{domainName:x,n:B.length}),f["default"].showNode(g.replaceDomainFailure),C.length&&(g.replaceDomainSuccessMessage.innerHTML=n["default"].substitute(g.i18n.itemProperties.someLayerDomainsUpdated,{domainName:x,n:C.length}),f["default"].showNode(g.replaceDomainSuccess))):(g.replaceDomainSuccessMessage.innerHTML=n["default"].substitute(g.i18n.itemProperties.domainUpdateSuccess,{domainName:x}),f["default"].showNode(g.replaceDomainSuccess));g.autoSelectReplacementValue=x;g.domainReplace.value="";g.refreshingDomains=
!0;g.replaceDomainChange();k["default"].publish("item-data/change")},function(y){g.setInputError(y)})):this.setInputError()};d.prototype.replaceDomainChange=function(){var g=this.domainReplace.value.trim(),u=this.domainSelect.value;u=u&&g&&0<g.length&&g!==u;f["default"].disableNode(this.replaceDomainBtn,!u||u&&!this.validateDomain(g));this.clearInputError()};d.prototype.itemDataChange=function(g){"type-options/map"===g.source&&(this.item.itemData=g.itemData,this.initDomains())};return d=w.__decorate([a["default"](b["default"],
p["default"])],d)}()})},"arcgisonline/pages/components/Collaborations/collab-service":function(){define("require exports tslib dojo/Deferred arcgisonline/sharing/util arcgisonline/pages/pageUtil arcgisonline/pages/utils/organizationResources arcgisonline/esriGeowConfig".split(" "),function(K,G,w,v,r,f,c,a){var b=this;Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);var p=a["default"].restBaseUrl+
"portals/self",q=p+"/trustedOrgs",t=function(n,k){return r["default"].request({url:q+"/"+n+"/update",content:w.__assign({orgId:n},k)},{usePost:!0})},m=a["default"].restBaseUrl+"portals/self/contacts";G["default"]={add:function(n){return r["default"].request({url:p+"/addTrustedOrg",content:n},{usePost:!0})},update:t,suspend:function(n){return t(n,{state:"suspended"})},resume:function(n){return t(n,{state:"active"})},remove:function(n,k){return r["default"].request({url:q+"/"+n+"/delete",content:{message:k,
async:!0}},{usePost:!0})},getCollaborations:function(n){void 0===n&&(n=!1);var k=new v["default"];n=w.__assign({num:100},n&&{hub:!1});r["default"].request({url:q,content:n}).then(function(l){k.resolve(l)},function(){k.resolve({trustedOrgs:[]})});return k},getCoordinators:function(n){var k=new v["default"];r["default"].request({url:m,content:{type:"collaboration",num:100,collaborators:!n}}).then(function(l){k.resolve(l)},function(){k.resolve()});return k},getAllCoordinators:function(){var n=new v["default"];
f["default"].fetchAllResources(m,{type:"collaboration",collaborators:!0},"users").then(function(k){n.resolve(k)},function(){n.resolve([])});return n},getCoordinatorsByOrg:function(n){return r["default"].request({url:m,content:{type:"collaboration",orgId:n}})},getGroupUserCount:function(n,k){return r["default"].request({url:a["default"].restBaseUrl+"community/users",content:{q:""+(k||""),searchUserAccess:"groupMember",groups:n,countFields:"accountid",num:0}})},getCollabGroups:function(n,k){return r["default"].request({url:a["default"].restBaseUrl+
"community/groups",content:{q:"orgid:"+n.id+" memberorgids:"+k}})},getEndedCollabs:function(){var n=new v["default"];c["default"].fetch("ended_collaborations.json").then(function(k){n.resolve(k||[])},function(){n.resolve([])});return n},getCollaborationLimit:function(){var n=new v["default"];r["default"].request({url:p+"/limits",content:{limitsType:"Collaboration",limitName:"MaxTrustedOrgs"}}).then(function(k){var l;n.resolve(null!==(l=null===k||void 0===k?void 0:k.limitValue)&&void 0!==l?l:10)},
function(){n.resolve(10)});return n},getCollaborationByOrgId:function(n){return w.__awaiter(b,void 0,void 0,function(){var k;return w.__generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,r["default"].request({url:q+"/"+n})];case 1:return k=l.sent(),[2,k];case 2:return l.sent(),[2,void 0];case 3:return[2]}})})},updateEndedCollabs:function(n){return c["default"].add({key:"ended_collaborations.json",text:JSON.stringify(n)})}}})},"arcgisonline/pages/utils/organizationResources":function(){define("require exports tslib ../../esriGeowConfig ./resources ../../sharing/util".split(" "),
function(K,G,w,v,r,f){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);return function(){function c(){}c.fetchAll=function(){return r["default"].fetchAllResources(v["default"].restBaseUrl+"portals/self/resources",{},"resources")};c.fetchPage=function(a,b){void 0===a&&(a=1);void 0===b&&(b=100);return f["default"].request({url:v["default"].restBaseUrl+"portals/self/resources",content:{start:a,num:100<b?100:b}})};c.fetch=function(a){return f["default"].request({url:v["default"].restBaseUrl+
"portals/self/resources/"+a})};c.add=function(a){var b=!a.key;a=w.__assign(w.__assign({url:v["default"].restBaseUrl+"portals/self/addResource"},b&&{form:a}),!b&&{content:a});return f["default"].request(a,{usePost:!0})};c.remove=function(a){return f["default"].request({url:v["default"].restBaseUrl+"portals/self/removeResource",content:{key:a}},{usePost:!0})};return c}()})},"arcgis-components/wrappers/Share":function(){define(["../Component","dojo/i18n!../Share/nls/resources","../Share/index"],function(K,
G,w){return function(v){function r(c){if(f[c])return f[c].exports;var a=f[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var f={};return r.m=v,r.c=f,r.d=function(c,a,b){r.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:b})},r.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},r.t=function(c,a){if((1&a&&(c=r(c)),8&a)||4&a&&"object"==typeof c&&
c&&c.__esModule)return c;var b=Object.create(null);if(r.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var p in c)r.d(b,p,function(q){return c[q]}.bind(null,p));return b},r.n=function(c){var a=c&&c.__esModule?function(){return c["default"]}:function(){return c};return r.d(a,"a",a),a},r.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},r.p="",r(r.s=985)}({0:function(v,r,f){function c(k,l){function h(){this.constructor=k}if("function"!=typeof l&&
null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(k,l);k.prototype=null===l?Object.create(l):(h.prototype=l.prototype,new h)}function a(k,l){var h={},e;for(e in k)Object.prototype.hasOwnProperty.call(k,e)&&0>l.indexOf(e)&&(h[e]=k[e]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(e=Object.getOwnPropertySymbols(k);d<e.length;d++)0>l.indexOf(e[d])&&Object.prototype.propertyIsEnumerable.call(k,e[d])&&(h[e[d]]=k[e[d]])}return h}
function b(k,l,h,e){var d,g=arguments.length,u=3>g?l:null===e?e=Object.getOwnPropertyDescriptor(l,h):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(k,l,h,e);else for(var x=k.length-1;0<=x;x--)(d=k[x])&&(u=(3>g?d(u):3<g?d(l,h,u):d(l,h))||u);return 3<g&&u&&Object.defineProperty(l,h,u),u}function p(k,l,h,e){return new (h||(h=Promise))(function(d,g){function u(B){try{y(e.next(B))}catch(C){g(C)}}function x(B){try{y(e["throw"](B))}catch(C){g(C)}}function y(B){var C;
B.done?d(B.value):(C=B.value,C instanceof h?C:new h(function(z){z(C)})).then(u,x)}y((e=e.apply(k,l||[])).next())})}function q(k,l){function h(y){return function(B){return function(C){if(e)throw new TypeError("Generator is already executing.");for(;x;)try{if(e=1,d&&(g=2&C[0]?d["return"]:C[0]?d["throw"]||((g=d["return"])&&g.call(d),0):d.next)&&!(g=g.call(d,C[1])).done)return g;switch(d=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++;
d=C[1];C=[0];continue;case 7:C=x.ops.pop();x.trys.pop();continue;default:if(!(g=x.trys,(g=0<g.length&&g[g.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!g||C[1]>g[0]&&C[1]<g[3]))x.label=C[1];else if(6===C[0]&&x.label<g[1])x.label=g[1],g=C;else if(g&&x.label<g[2])x.label=g[2],x.ops.push(C);else{g[2]&&x.ops.pop();x.trys.pop();continue}}C=l.call(k,x)}catch(z){C=[6,z],d=0}finally{e=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,B])}}var e,d,g,u,x={label:0,sent:function(){if(1&
g[0])throw g[1];return g[1]},trys:[],ops:[]};return u={next:h(0),"throw":h(1),"return":h(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function t(k,l){for(var h=0,e=l.length,d=k.length;h<e;h++,d++)k[d]=l[h];return k}f.d(r,"d",function(){return c});f.d(r,"a",function(){return n});f.d(r,"f",function(){return a});f.d(r,"c",function(){return b});f.d(r,"b",function(){return p});f.d(r,"e",function(){return q});f.d(r,"g",function(){return t});var m=function(k,l){return(m=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,e){h.__proto__=e}||function(h,e){for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(h[d]=e[d])})(k,l)},n=function(){return(n=Object.assign||function(k){for(var l,h=1,e=arguments.length;h<e;h++)for(var d in l=arguments[h])Object.prototype.hasOwnProperty.call(l,d)&&(k[d]=l[d]);return k}).apply(this,arguments)};Object.create;Object.create},101:function(v,r,f){f.d(r,"a",function(){return a});f.d(r,"b",function(){return b});var c=
f(0),a=function(p){return p?p.urlKey?location.protocol+"//"+p.urlKey+"."+p.customBaseUrl:location.protocol+"//"+p.portalHostname:""},b=function(p){return Object(c.a)(Object(c.a)({},p),{baseUrl:a(p)})}},117:function(v,r,f){f.d(r,"a",function(){return a});var c=f(0);v=f(15);var a=Object(v.a)(function(b,p){var q=Object(c.a),t=Object(c.a)({},p),m=p.type,n=p.typeKeywords?p.typeKeywords:[],k=null==m?void 0:m.toLowerCase(),l=!1,h=!1,e=m=!1;if("ogcfeatureserver"===k)n="featureshosted";else if(0<(null==k?
void 0:k.indexOf("service"))||"feature collection"===k||"kml"===k||"wms"===k||"wmts"===k||"wfs"===k){var d=-1<n.indexOf("Hosted Service");"feature service"===k||"feature collection"===k||"kml"===k||"wfs"===k?(e=-1<n.indexOf("Table"),l=-1<n.indexOf("Route Layer"),h=-1<n.indexOf("Markup"),n=(m=-1!==n.indexOf("Spatiotemporal"))&&e?"spatiotemporaltable":e?"table":l?"routelayer":h?"markup":m?"spatiotemporal":d?"featureshosted":"features"):"map service"===k||"wms"===k||"wmts"===k?n=d||-1<n.indexOf("Tiled")||
"wmts"===k?"maptiles":"mapimages":"scene service"===k?n=-1<n.indexOf("Line")?"sceneweblayerline":-1<n.indexOf("3DObject")?"sceneweblayermultipatch":-1<n.indexOf("Point")?"sceneweblayerpoint":-1<n.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<n.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<n.indexOf("Polygon")?"sceneweblayerpolygon":-1<n.indexOf("Building")?"sceneweblayerbuilding":-1<n.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===k?(m=-1<n.indexOf("Elevation 3D Layer"),
n=-1<n.indexOf("Tiled Imagery"),n=m?"elevationlayer":n?"tiledimagerylayer":"imagery"):n="stream service"===k?"streamlayer":"vector tile service"===k?"vectortile":"datastore catalog service"===k?"datastorecollection":"geocoding service"===k?"geocodeservice":"geoprocessing service"===k&&-1<n.indexOf("Web Tool")?"tool":"layers"}else n="web map"===k||"cityengine web scene"===k?"maps":"web scene"===k?-1<n.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===k&&-1<(null==
n?void 0:n.indexOf("configurableApp"))?"instantapps":"web mapping application"===k||"mobile application"===k||"application"===k||"operation view"===k||"desktop application"===k?"apps":"map document"===k||"map package"===k||"published map"===k||"scene document"===k||"globe document"===k||"basemap package"===k||"mobile basemap package"===k||"mobile map package"===k||"project package"===k||"project template"===k||"pro map"===k||"layout"===k||"layer"===k&&-1<n.indexOf("ArcGIS Pro")||"explorer map"===
k&&-1<n.indexOf("Explorer Document")?"mapsgray":"service definition"===k||"csv"===k||"administrative report"===k||"shapefile"===k||"cad drawing"===k||"geojson"===k||"360 vr experience"===k||"netcdf"===k?"datafiles":"explorer add in"===k||"desktop add in"===k||"windows viewer add in"===k||"windows viewer configuration"===k?"appsgray":"arcgis pro add in"===k||"arcgis pro configuration"===k?"addindesktop":"rule package"===k||"file geodatabase"===k||"csv collection"===k||"kml collection"===k||"windows mobile package"===
k||"map template"===k||"desktop application template"===k||"arcpad package"===k||"code sample"===k||"form"===k||"document link"===k||"vector tile package"===k||"operations dashboard add in"===k||"rules package"===k||"image"===k||"workflow manager package"===k||"explorer map"===k&&-1<n.indexOf("Explorer Mapping Application")||-1<n.indexOf("Document")?"datafilesgray":"network analysis service"===k||"geoprocessing service"===k||"geodata service"===k||"geometry service"===k||"geoprocessing package"===
k||"locator package"===k||"geoprocessing sample"===k||"workflow manager service"===k||"raster function template"===k||"deep learning package"===k?"toolsgray":"layer"===k||"layer package"===k||"explorer layer"===k?"layersgray":"scene package"===k?"scenepackage":"tile package"===k?"tilepackage":"storymap"===k?"storymap":"storymap theme"===k?"storymaptheme":"web experience"===k?"experiencebuilder":"web experience template"===k?"webexperiencetemplate":"task file"===k?"taskfile":"report template"===k?
"report-template":"statistical data collection"===k?"statisticaldatacollection":"insights workbook"===k?"workbook":"insights model"===k?"insightsmodel":"insights page"===k?"insightspage":"hub initiative"===k?"hubinitiative":"hub page"===k?"hubpage":"hub site application"===k?"hubsite":"relational database connection"===k?"relationaldatabaseconnection":"big data file share"===k||"data store"===k?"datastorecollection":"image collection"===k?"imagecollection":"desktop style"===k?"desktopstyle":"style"===
k?"style":"dashboard"===k?"dashboard":"feed"===k?"feed":"real time analytic"===k?"realtimeanalytics":"big data analytic"===k?"bigdataanalytics":"notebook"===k?"notebook":"notebook code snippets"===k?"notebookcodesnippets":"maps";return q(t,{iconURI:b+"/"+n+"16.png"})})},120:function(v,r,f){f.d(r,"a",function(){return a});var c=f(0);v=f(15);var a=Object(v.a)(function(b,p){var q=Object(c.a),t=Object(c.a)({},p),m,n,k="notebook"!==(null===(m=p.type)||void 0===m?void 0:m.toLowerCase())?"default_thumb.png":
"notebook-thumb.png";"notebook code snippets"===(null===(n=p.type)||void 0===n?void 0:n.toLowerCase())&&(k="notebook-code-snippet-thumb.png");n=b.baseUrl+"/home/js/arcgisonline/css/images/"+k;m=(p.thumbnail&&(n=b.restUrl+"/content/items/"+p.id+"/info/"+p.thumbnail+(b.credential?"?token\x3d"+b.credential.token:"")),n);return q(t,{thumbURI:m})})},121:function(v,r,f){f.d(r,"a",function(){return b});var c=f(0);v=f(15);var a=function(p,q){return q.description?q.description.replace(/src=('|")js\/jsapi\/esri\//g,
function(t){return"src\x3d"+('"'===t[4]?'"':"'")+p.baseUrl+"/home/js/jsapi/esri/"}):void 0},b=Object(v.a)(function(p,q){return Object(c.a)(Object(c.a)({},q),{patchedDescription:a(p,q)})})},122:function(v,r,f){f.d(r,"a",function(){return p});var c=f(0),a=f(124);v=f(15);var b=f(58),p=Object(v.a)(function(q,t){var m=Object(c.a),n=Object(c.a)({},t),k,l=t.type,h=t.typeKeywords||[],e=l,d=(null==q?void 0:q.portalUser)||(null==q?void 0:q.user);if("Feature Service"===l||"Feature Collection"===l){if(e=-1<h.indexOf("Table")?
"Table":-1<h.indexOf("Route Layer")?"Route Layer":-1<h.indexOf("Markup")?"Markup":"Feature Layer",d&&Object(b.d)(t,d)&&-1<(null==h?void 0:h.indexOf("Hosted Service")))h=(null===(k=null===document||void 0===document?void 0:document.documentElement)||void 0===k?void 0:k.lang)||"en",e=e+" ("+(a.a[h]||a.a[h.split("-")[0]]||a.a.en)+")"}else"Image Service"===l?(k=-1<h.indexOf("Elevation 3D Layer"),h=-1<h.indexOf("Tiled Imagery"),e=k?"Elevation Layer":h?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===
l?e="Scene Layer":"Scene Package"===l?e="Scene Layer Package":"Stream Service"===l?e="Feature Layer":"Geocoding Service"===l?e="Locator":"Microsoft Powerpoint"===l?e="Microsoft PowerPoint":"OGCFeatureServer"===l?e="OGC Feature Layer":"GeoJson"===l?e="GeoJSON":"Globe Service"===l?e="Globe Layer":"Vector Tile Service"===l?e="Tile Layer":"netCDF"===l?e="NetCDF":"Map Service"===l?e=-1===h.indexOf("Spatiotemporal")&&(-1<h.indexOf("Hosted Service")||-1<h.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":
l&&-1<l.toLowerCase().indexOf("add in")?e=l.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===l?e="Big Data File Share":"Web Mapping Application"===l&&(null==h?0:h.includes("configurableApp"))?e="Instant App":"Data Store"===l&&(h.includes("cloudStore_amazon")||h.includes("cloudStore_azure")?e+=" (Cloud)":(h.includes("fileShare")||h.includes("hdfs")||h.includes("hive")||h.includes("bigDataFileShare")&&h.includes("dataStore"))&&(e+=" (Big Data File Share)"));return m(n,{displayName:e})})},
123:function(v,r,f){f.d(r,"a",function(){return b});var c=f(0);v=f(15);var a=function(p,q){var t=[],m=p.typeKeywords?p.typeKeywords:[];return p.contentStatus&&("org_authoritative"===p.contentStatus||"public_authoritative"===p.contentStatus?t.push("authoritative"):"deprecated"===p.contentStatus&&t.push("deprecated")),p.origin&&t.push("collaboration"),p.groupDesignations&&-1<p.groupDesignations.indexOf("livingatlas")&&t.push("livingAtlas"),-1<m.indexOf("Requires Credits")?t.push("premium"):-1<m.indexOf("Requires Subscription")&&
t.push("subscriber"),-1<m.indexOf("Public Data Collection")&&((null==q?void 0:q.portalUser)||(null==q?void 0:q.user))&&t.push("publicDataCollection"),"Solution"===p.type&&-1<p.typeKeywords.indexOf("ArcGIS Solution")&&t.push("solution"),q.isPortal&&"Web Mapping Application"===p.type&&(-1<p.typeKeywords.indexOf("Story Map")&&t.push("retiredStoryMap"),function(n){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(k){var l,
h=-1<k.indexOf(".html");return-1<(null===(l=n.url)||void 0===l?void 0:l.indexOf("/apps/"+k+(h?"":"/")))})}(p)&&t.push("retiredApp")),t},b=Object(v.a)(function(p,q){return Object(c.a)(Object(c.a)({},q),{badges:a(q,p)})})},124:function(v,r,f){f.d(r,"a",function(){return c});var c={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",
he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",
vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},128:function(v,r,f){f.d(r,"a",function(){return a});f.d(r,"b",function(){return b});var c=f(0);v=f(15);var a=function(p,q){var t;return q.thumbnail&&(t=p.restUrl+"/community/groups/"+q.id+"/info/"+q.thumbnail+(p.credential?"?token\x3d"+p.credential.token:"")),t},b=Object(v.a)(function(p,q){return Object(c.a)(Object(c.a)({},q),{thumbURI:a(p,q)})})},137:function(v,r,f){f.d(r,"a",function(){return c});
f.d(r,"d",function(){return p});f.d(r,"c",function(){return q});f.d(r,"e",function(){return t});f.d(r,"f",function(){return m});var c,a=f(0),b=f(25);!function(n){n.LOADING="loading";n.LOADED="loaded";n.FAILED="failed"}(c||(c={}));var p=function(n){var k=n.selectedGroups,l=n.selectorItems;return 0===l.length?Object.keys(k).map(function(h){return k[h].group}):Object.keys(k).filter(function(h){return t(k[h],l)}).map(function(h){return k[h].group})},q=function(n){var k=n.initialSelectedGroups,l=n.selectedGroups,
h=Object.keys(l).map(function(e){return l[e].group.id});return Object.keys(k).map(function(e){return k[e].group.id}).filter(function(e){return 0>h.indexOf(e)}).map(function(e){return k[e].group})},t=function(n,k){return!n.selectedByIds||n.selectedByIds.length===k.length},m={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},status:c.LOADING,total:0,hasGroups:!0};r.b=function(n,k){switch(void 0===n&&(n=m),k.type){case b.a.DESELECT_GROUPS:return Object(a.a)(Object(a.a)({},
n),{selectedGroups:k.payload.reduce(function(e,d){var g=d.id;e[g];return Object(a.f)(e,["symbol"==typeof g?g:g+""])},n.selectedGroups)});case b.a.REVERT_GROUPS:return k.payload?Object(a.a)(Object(a.a)({},n),{selectedGroups:k.payload.reduce(function(e,d){var g;if(n.initialSelectedGroups[d.id])return Object(a.a)(Object(a.a)({},e),((g={})[d.id]=n.initialSelectedGroups[d.id],g));g=d.id;e[g];return Object(a.f)(e,["symbol"==typeof g?g:g+""])},n.selectedGroups)}):Object(a.a)(Object(a.a)({},n),{selectedGroups:Object(a.a)({},
n.initialSelectedGroups)});case b.a.SELECT_GROUPS:var l=n.selectorItems.map(function(e){return e.id});return Object(a.a)(Object(a.a)({},n),{selectedGroups:k.payload.reduce(function(e,d){var g;return Object(a.a)(Object(a.a)({},e),((g={})[d.group.id]=Object(a.a)({selectedByIds:l},d),g))},n.selectedGroups)});case b.a.SET_INITIAL_GROUPS:var h=k.payload.reduce(function(e,d){var g;return Object(a.a)(Object(a.a)({},e),((g={})[d.group.id]=d,g))},{});return Object(a.a)(Object(a.a)({},n),{selectedGroups:h,
initialSelectedGroups:Object(a.a)({},h)});case b.a.SET_SELECTOR_ITEMS:return Object(a.a)(Object(a.a)({},n),{selectorItems:k.payload});case b.a.CLEAR_SELECTION:return Object(a.a)(Object(a.a)({},n),{selectedGroups:{}});case b.a.LOADING_GROUPS:return Object(a.a)(Object(a.a)({},n),{status:c.LOADING});case b.a.LOAD_GROUPS_SUCCESS:return Object(a.a)(Object(a.a)({},n),{displayGroups:k.payload.results,total:k.payload.total,status:c.LOADED});case b.a.LOAD_GROUPS_FAIL:return Object(a.a)(Object(a.a)({},n),{displayGroups:[],
status:c.FAILED});case b.a.SET_HAS_GROUPS:return Object(a.a)(Object(a.a)({},n),{hasGroups:k.payload});default:return n}}},139:function(v,r,f){function c(P,fa){var V=fa(),ba=V.utilities.request,ka=V.resources;V=ka.selectedOptions;var la=ka.selectedOptionsDirty;ka=Object(g.b)(ka.items);V=la&&V["public"]===V.total;P(E(B.a.LOADING));0<ka.length&&V?Object(g.a)({items:ka,request:ba}).then(function(ma){ma.length?(ma=ma.some(function(ha){return-1===ha.typeKeywords.indexOf("Public Data Collection")}),P(z(ma?
B.c.PUBLIC_DATA_COLLECTION_DISABLED:B.c.PUBLIC_DATA_COLLECTION_ENABLED))):P(a)})["catch"](function(){P(a)}):P(a)}function a(P,fa){var V=fa(),ba=V.utilities,ka=ba.portal,la=ba.request,ma=ba.onComplete;ba=V.resources;var ha=ba.items,Z=ba.selectedOptions,W=ba.portalUser;ba=V.gbState.groups;V=ba.selectedGroups;ba=ba.initialSelectedGroups;var Q=Object(l.d)({selectedGroups:V,selectorItems:ha});V=Object(l.c)({initialSelectedGroups:ba,selectedGroups:V});var ia=[];Object(h.h)({items:ha,groups:V,portalUser:W,
restUrl:ka.restUrl,request:la}).then(function(){return Object(h.g)({items:ha,groups:Q,portalUser:W,request:la,restUrl:ka.restUrl,selectedOptions:Z})})["catch"](function(R){R.results?ia=ia.concat(Object(u.a)(R.results,ha)):R.message&&ia.push({error:R})}).then(function(){return P(F)}).then(function(){var R=fa().resources,S=R.items,N=R.dependentItems,X=N.needGroupSharingUpdate,aa=N.notEditable,ea=N.premium,Y=N.needPubliclyEditableWarning,T=N.needEditableWarning,ca=N.needDataCollectionEnabled,M=N.needGroupDependentApplicationWarning,
U=N.needBDFSDatastoreUpdate,da=R.selectedOptions,ja=(R=R.selectedOptionsDirty)&&da["public"]===da.total;0!==N.needShareLevelUpdate.length||0!==X.length||0!==aa.length||0!==ea.length||0!==Y.length||0!==T.length||0!==ca.length||0!==M.length&&ja||0!==U.length||0!==Object(h.c)(S,da,R).length?P({type:t.SET_CURRENT_VIEW,payload:B.a.DEPENDENT_ITEM_CONFIRMATION}):ma(0<ia.length?{errors:ia,selectedOptions:da}:{selectedOptions:da})})["catch"](console.error)}function b(P){return P.filter(function(fa){return-1===
fa.typeKeywords.indexOf("bigDataFileShare")})}function p(P,fa){var V=fa(),ba=V.utilities,ka=ba.portal,la=ba.request,ma=ba.onComplete;ba=V.resources;var ha=ba.dependentItems,Z=ha.needBDFSDatastoreUpdate,W=ha.needShareLevelUpdate,Q=ha.needGroupSharingUpdate,ia=ha.needEditableWarning,R=ba.selectedOptions;ba=ba.portalUser;ha=V.gbState.groups;V=ha.selectedGroups;var S=ha.selectorItems;if(0!==Z.length||0!==W.length||0!==Q.length||0!==ia.length){ha=Object(h.g)({items:b(Z),groups:[],portalUser:ba,request:la,
restUrl:ka.restUrl,selectedOptions:R});var N=Object(h.g)({items:Object(m.g)(Object(m.g)([],b(W)),ia),groups:[],portalUser:ba,request:la,restUrl:ka.restUrl,selectedOptions:R});ka=Object(h.g)({items:Q,groups:Object(l.d)({selectedGroups:V,selectorItems:S}),portalUser:ba,request:la,restUrl:ka.restUrl,selectedOptions:R,ignoreShareLevel:!0});e.Promise.all([ha,N,ka]).then(function(){var X=Object(m.g)(Object(m.g)(Object(m.g)(Object(m.g)([],Z),W),Q),ia),aa=X.map(function(ea){return ea.id});X=X.filter(function(ea,
Y){return aa.indexOf(ea.id)===Y});ma({dependentItems:X,selectedOptions:R})})["catch"](function(X){throw X;})}else ma({selectedOptions:R})}function q(P,fa){switch(fa().resources.currentMiniDlg){case B.c.OPEN_GROUP_BROWSER:P(C(B.b["public"]));P(E(B.a.GROUP_BROWSER));break;case B.c.REVERT_SHARE_LEVEL:P({type:t.SET_INITIAL_SHARE_LEVEL});P(Object(k.c)());break;case B.c.REVERT_GROUPS:P(C(B.b["public"]));P(Object(k.c)());break;case B.c.EDITABLE_LAYERS:P(a);break;case B.c.SET_SHARE_TO_PRIVATE:P(C(B.b["private"]));
P(Object(k.a)());break;case B.c.PUBLIC_DATA_COLLECTION_DISABLED:P(E(B.a.SHARE));break;case B.c.PUBLIC_DATA_COLLECTION_ENABLED:P(a)}P({type:t.SET_MINI_DIALOG,payload:B.c.NONE})}f.d(r,"a",function(){return t});f.d(r,"k",function(){return z});f.d(r,"g",function(){return D});f.d(r,"j",function(){return E});f.d(r,"d",function(){return c});f.d(r,"i",function(){return p});f.d(r,"h",function(){return q});f.d(r,"c",function(){return I});f.d(r,"b",function(){return L});f.d(r,"e",function(){return J});f.d(r,
"f",function(){return O});var t,m=f(0),n=f(177),k=f(144),l=f(137),h=f(61),e=f(28),d=f(335),g=f(194),u=f(379),x=f(51),y=f(58),B=f(26);!function(P){P.SET_SELECTED_SHARE_LEVEL="SET_SELECTED_SHARE_LEVEL";P.SET_INITIAL_SHARE_LEVEL="SET_INITIAL_SHARE_LEVEL";P.SET_CURRENT_VIEW="SET_CURRENT_VIEW";P.SET_AND_FOCUS_VIEW="SET_AND_FOCUS_VIEW";P.SET_DEPENDENT_ITEMS="SET_DEPENDENT_ITEMS";P.SET_MINI_DIALOG="SET_MINI_DIALOG";P.SET_SHARE_MODE="SET_SHARE_MODE";P.SET_USER_TYPE="SET_USER_TYPE";P.SET_HELP_MAP="SET_HELP_MAP"}(t||
(t={}));var C=function(P){return{type:t.SET_SELECTED_SHARE_LEVEL,payload:P}},z=function(P){return{type:t.SET_MINI_DIALOG,payload:P}},D=function(){return function(P,fa){var V=fa(),ba=V.utilities,ka=ba.portal,la=ba.request;ba=V.resources.items;V=A(V);var ma=ka.urlKey||ka.isPortal?B.e.ORG:B.e.PUBLIC;P({type:t.SET_INITIAL_SHARE_LEVEL});P({type:t.SET_SHARE_MODE,payload:V});P({type:t.SET_USER_TYPE,payload:ma});P(Object(n.a)({selectorItems:ba,anySelectorItemsPrivate:0<fa().resources.selectedOptions[B.b["private"]],
shareMode:V,userType:ma})).then(function(){return Object(h.a)(ka,la)}).then(function(ha){P({type:t.SET_HELP_MAP,payload:ha});P(E(B.a.SHARE))})}},E=function(P){return function(fa){fa({type:t.SET_CURRENT_VIEW,payload:P})}},A=function(P){var fa=P.resources,V=fa.items;fa=fa.portalUser;P=P.utilities.portal;var ba=V[0];if(Object(y.d)(ba,fa))return B.d.DEFAULT;ba=!ba.orgId||ba.orgId===fa.orgId;return Object(x.h)({items:V,user:fa,portal:P})&&ba?B.d.ADMIN:B.d.GROUP},F=function(P,fa){var V=fa(),ba=V.resources,
ka=ba.selectedOptions,la=V.utilities,ma=la.portal,ha=la.request,Z=la.iconDir;V=V.gbState.groups;var W=V.selectedGroups,Q=V.selectorItems;ba=ba.items.map(function(ia){return Object(d.b)({item:ia,portal:ma,request:ha,iconDir:Z})});return e.Promise.all(ba).then(function(ia){return H({dependentItems:ia,selectedGroups:W,selectorItems:Q,selectedOptions:ka,request:ha,portal:ma})}).then(function(ia){P({type:t.SET_DEPENDENT_ITEMS,payload:ia})})},H=function(P){var fa=P.dependentItems,V=P.selectedGroups,ba=
P.selectorItems,ka=P.selectedOptions,la=P.request,ma=P.portal;return new e.Promise(function(ha,Z){var W=Object(h.b)(fa).filter(function(R){return R}),Q=W.map(function(R){return R.id}),ia=W.filter(function(R,S){return Q.indexOf(R.id)===S});e.Promise.all(ia.map(function(R){return Object(d.a)({item:R,selectedOptions:ka,selectedGroups:Object(l.d)({selectedGroups:V,selectorItems:ba}),request:la,portal:ma})})).then(function(R){var S=[],N=[],X=[],aa=[],ea=[],Y=[],T=[],ca=[],M=[],U=!Object(h.e)(ka)&&Object(h.d)(ka)===
B.b["public"];R.forEach(function(da,ja){var na=ia[ja];if(da.premium)aa.push(na);else if(da.groupDependentApplication)ca.push(na);else{if(!da.bdfsDatastore)return U&&da.editable&&Object(g.c)(na)&&na.isUpdateLayer?na.access===B.b["public"]?void Y.push(na):-1<na.typeKeywords.indexOf("Public Data Collection")?void ea.push(na):void T.push(na):void((da.needsShareLevelUpdate||da.needsGroupSharingUpdate)&&(da.editable?(da.needsShareLevelUpdate&&N.push(na),da.needsGroupSharingUpdate&&S.push(na)):X.push(na)));
M.push(na)}});ha({needGroupSharingUpdate:S,needShareLevelUpdate:N,notEditable:X,premium:aa,needPubliclyEditableWarning:Y,needEditableWarning:ea,needDataCollectionEnabled:T,needGroupDependentApplicationWarning:ca,needBDFSDatastoreUpdate:M})})["catch"](function(R){throw R;})})},I=function(P,fa){var V=fa(),ba=V.gbState.groups.initialSelectedGroups,ka=V.resources.selectedOptions;V.config.userType===B.e.PUBLIC&&0<ka["private"]&&0<Object.keys(ba).length?P(z(B.c.REVERT_GROUPS)):P(Object(k.c)())},L=function(P,
fa){var V=fa(),ba=V.resources,ka=ba.portalUser;ba=ba.selectedOptions;Object(x.k)(V.utilities.portal)||Object(x.a)(ka)||!Object(h.e)(ba)&&Object(h.d)(ba)!==B.b["private"]?P(E(B.a.GROUP_BROWSER)):P(z(B.c.OPEN_GROUP_BROWSER))},J=function(P,fa){var V=fa(),ba=V.resources,ka=ba.portalUser;ba=ba.items;var la=V.gbState.groups.selectedGroups;Object(x.k)(V.utilities.portal)||Object(x.b)(ka)||!Object(g.d)({items:ba,groupDatas:Object.keys(la).map(function(ma){return la[ma]})})?P({type:t.SET_INITIAL_SHARE_LEVEL}):
P(z(B.c.REVERT_SHARE_LEVEL))},O=function(P){return function(fa,V){var ba=V(),ka=ba.resources.portalUser,la=ba.gbState.groups.selectedGroups;!Object(x.k)(ba.utilities.portal)&&!Object(x.b)(ka)&&P===B.b["private"]&&0<Object.keys(la).length?fa(z(B.c.SET_SHARE_TO_PRIVATE)):fa(C(P))}}},144:function(v,r,f){f.d(r,"d",function(){return q});f.d(r,"e",function(){return t});f.d(r,"b",function(){return m});f.d(r,"c",function(){return n});f.d(r,"a",function(){return k});f.d(r,"f",function(){return l});var c=f(0),
a=f(181),b=f(163),p=f(68),q=function(h){return 1<h.length&&Object(b.a)(),{type:p.a.SELECT_GROUPS,payload:h.map(function(e){return{group:Object(a.c)(e)}})}},t=function(h){return{type:p.a.SET_INITIAL_GROUPS,payload:h.map(function(e){return Object(c.a)(Object(c.a)({},e),{group:Object(a.c)(e.group)})})}},m=function(h){return 1<h.length&&Object(b.b)(),{type:p.a.DESELECT_GROUPS,payload:h}},n=function(h){return{type:p.a.REVERT_GROUPS,payload:h}},k=function(){return Object(b.c)(),{type:p.a.CLEAR_SELECTION}},
l=function(h){return{type:p.a.SET_SELECTOR_ITEMS,payload:h}}},148:function(v,r,f){f.d(r,"a",function(){return a});var c=f(0);v=f(15);var a=Object(v.a)(function(b,p){var q=Object(c.a),t=Object(c.a)({},p);var m=p.thumbnail?b.restUrl+"/community/users/"+p.username+"/info/"+p.thumbnail+(b.credential?"?token\x3d"+b.credential.token:""):void 0;return q(t,{thumbURI:m})})},15:function(v,r,f){function c(b){return function q(){for(var t=this,m=[],n=0;n<arguments.length;n++)m[n]=arguments[n];return m.length>=
b.length?b.call.apply(b,Object(a.g)([this],m)):function(){for(var k=[],l=0;l<arguments.length;l++)k[l]=arguments[l];return q.call.apply(q,Object(a.g)(Object(a.g)([t],m),k))}}}f.d(r,"a",function(){return c});var a=f(0)},159:function(v,r,f){f.d(r,"b",function(){return h});f.d(r,"a",function(){return d});var c=f(0),a=f(181),b=f(30),p=f(163),q=f(54),t=f(68),m=f(28),n=f(61),k=f(38),l=f(26),h=function(D,E){e(E()).then(function(A){var F=E();F=Object(q.b)(F)?F:F.gbState;var H=F.utils;F.ui.focus.focusSelectAll&&
Object(p.c)();D({type:t.a.LOAD_GROUPS_SUCCESS,payload:Object(c.a)(Object(c.a)({},A),{results:A.results.map(function(I){return Object(a.b)(H.portal,I)})})})})["catch"](function(A){var F=E();(Object(q.b)(F)?F:F.gbState).ui.focus.focusSelectAll&&Object(p.c)();D({type:t.a.LOAD_GROUPS_FAIL,payload:A})})},e=function(D){D=Object(q.b)(D)?D:D.gbState;var E=D.utils,A=E.request,F=E.portal,H=D.config;E=H.groupsPerPage;var I=H.withinShare,L=(H.withinAppConfig,D.parameters);H=L.filter;L=L.sort;var J=D.ui.page.currentPageNumber,
O={q:z(D),num:E,sortField:L.field,sortOrder:L.order,start:(J-1)*E+1};return I&&(O.searchUserAccess="groupMember",O.searchUserName=H.currentUsername),H.designationFilter!==k.b.orgSettings||x(F)?new m.Promise(function(P,fa){Object(b.g)(A,F,O).then(P,fa)}):new m.Promise(function(P){P({query:O.q,total:0,start:1,num:100,nextStart:-1,results:[]})})},d=function(D){var E=D.user;D=D.state;D=Object(q.b)(D)?D:D.gbState;var A=D.utils,F=A.request,H=A.portal;D=Object(c.a)(Object(c.a)({},D),{parameters:Object(c.a)(Object(c.a)({},
D.parameters),{filter:Object(c.a)(Object(c.a)({},D.parameters.filter),{currentUsername:E.username})})});var I={q:z(D),num:100,searchUserAccess:"groupMember",searchUserName:E.username};return(new m.Promise(function(L,J){return Object(b.g)(F,H,I).then(function(O){if(-1!==O.nextStart){var P=Math.ceil(O.total/100)-1,fa=[O.results];O=function(ba){fa.push(new m.Promise(function(ka,la){var ma=100*(ba+1)+1;Object(b.g)(F,H,Object(c.a)(Object(c.a)({},I),{start:ma})).then(function(ha){ka(ha.results)},la)}))};
for(var V=0;V<P;V++)O(V);m.Promise.all(fa).then(function(ba){L(Object(n.b)(ba))})}else L(O.results)},J)}))["catch"](function(L){throw L;})},g=function(D){var E,A=D.shareMode,F=D.currentUsername,H=D.portalUser;D=D.userGroups;var I=[];switch(D&&D.forEach(function(L){var J,O=null===(J=L.userMembership)||void 0===J?void 0:J.memberType;!L.isViewOnly||"owner"!==O&&"admin"!==O||I.push(L.id)}),I.length&&(E="(isviewonly:false OR "+I.join(" OR ")+")"),A){case l.d.DEFAULT:return E||"(owner:"+F+" OR isviewonly:false)";
case l.d.GROUP:return"owner:"+F+" -capabilities:updateitemcontrol";case l.d.ADMIN:return H.username===F?"(isviewonly:false OR owner:"+H.username+") -capabilities:updateitemcontrol":"(owner:"+F+" OR isviewonly:false)";default:return""}},u=function(D,E){0!==(null==D?void 0:D.indexOf("id:"))||-1<E.indexOf(D)||E.push(D)},x=function(D){var E,A,F,H,I,L=[],J=[D.featuredItemsGroupQuery,D.basemapGalleryGroupQuery,D.templatesGroupQuery,D["2DStylesGroupQuery"],D.stylesGroupQuery,D.analysisLayersGroupQuery,D.galleryTemplatesGroupQuery];
if(D.hasModernHomePageEnabled){var O=(null===(A=null===(E=D.homePageConfig)||void 0===E?void 0:E.content)||void 0===A?void 0:A.filter(function(P){return"gallery"===P.type&&!!P.groupId}))||[];0<O.length&&O.forEach(function(P){u("id:"+P.groupId,L)})}else J.push(D.homePageFeaturedContent);return J.forEach(function(P){u(P,L)}),null===(F=D.featuredGroups)||void 0===F||F.forEach(function(P){(P=P.id)&&u("id:"+P,L)}),null===(I=null===(H=D.userDefaults)||void 0===H?void 0:H.groups)||void 0===I||I.forEach(function(P){u("id:"+
P,L)}),0<L.length?"("+L.join(" OR ")+")":""},y=function(D){var E=D.portal;switch(D.designationFilter){case k.b.openData:return"isopendata:true";case k.b.updateGroups:return"capabilities:updateitemcontrol";case k.b.distributed:return"capabilities:distributed";case k.b.administrative:return"isleavingdisallowed:true";case k.b.orgSettings:return x(E)||"";default:return""}},B=function(D){var E=D.portal,A=D.username,F=D.currentUsername,H=D.userType,I=D.withinAppConfig;A=D.shareMode===l.d.ADMIN&&F||A;I=
E.isPortal&&I?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":"";switch(D.ownerFilter){case k.d.itemOwner:return"owner:"+A+" "+I;case k.d.inOrg:return"-owner:"+A+" orgid:"+E.id+" "+I;case k.d.outsideOrg:return H===l.e.PUBLIC?"-owner:"+A+" "+I:"(orgid: [0 TO \\{]) -orgid:"+E.id+" "+I;default:return I}},C=function(D){return D?"created: ["+(E=D).start+" TO "+E.end+"]":"";var E},z=function(D){var E=D.utils,A=E.portal;E=E.portalUser;var F=D.config,H=F.shareMode,I=F.userType,L=
F.withinAppConfig,J=F.hasIndoorsSpaces;D=D.parameters.filter;var O=D.designationFilter,P=D.membershipFilter,fa=D.dateCreatedFilter,V=D.currentUsername,ba=D.ownerFilter;return[F.baseQ+" "+D.searchString,g({shareMode:H,currentUsername:V,portalUser:E,userGroups:F.userGroups}),J?"-capabilities:distributed":y({designationFilter:O,portal:A}),J?"membershipaccess:org":P?"anyOrg"===P?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:"+P:"",C(fa),B({ownerFilter:ba,portal:A,username:E.username,
currentUsername:V,shareMode:H,userType:I,withinAppConfig:L})].filter(function(ka){return ka}).join(" ").trim()}},16:function(v,r){v.exports=K},163:function(v,r,f){function c(){p("gb__select-all-input")}function a(){p("gb__clear-selection-btn")}function b(){setTimeout(function(){var q=document.querySelector(".gcard-gcc__container");q&&(q=q.querySelector(".btn-2018check__input"))&&q.focus()},50)}function p(q){setTimeout(function(){var t=document.querySelector("#"+q);t&&t.focus()},50)}f.d(r,"c",function(){return c});
f.d(r,"a",function(){return a});f.d(r,"b",function(){return b})},170:function(v,r){var f=function(){return this}();try{f=f||(new Function("return this"))()}catch(c){"object"==typeof window&&(f=window)}v.exports=f},175:function(v,r,f){var c;f.d(r,"a",function(){return c});(c||(c={})).TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"},177:function(v,r,f){f.d(r,"a",function(){return u});var c=f(0),a=f(54),b=f(144),p=f(159),q=f(313),t=f(314),m=f(186),n=f(30),k=f(28),l=f(25),h=f(61),e=f(68),d=f(192),g=f(58),u=
function(y){return function(B,C){var z=C(),D=(Object(a.b)(z)?z:z.gbState).utils,E=D.portal;D=D.portalUser;if(!(y&&y.selectorItems&&0<y.selectorItems.length))return B(p.b),k.Promise.resolve();var A=y.selectorItems,F=y.userType;B({type:l.a.SET_SHARE_MODE,payload:y.shareMode});B({type:l.a.SET_USER_TYPE,payload:F});B(Object(b.f)(A));E=Object(g.b)({user:D,items:A,portal:E});var H=D.username===E.username?[D]:[D,E];return 1<H.length&&!y.anySelectorItemsPrivate&&B({type:l.a.ENABLE_USER_TOGGLE}),B(Object(m.c)(H)),
B(Object(m.h)(E.username)),void 0===z.config.hasTrustedOrgs&&B(q.a),Object(t.a)(C()).then(function(I){return I&&B({type:d.a.USER_DETAILS_LOADED,payload:I.groups}),B(p.b),k.Promise.all(H.map(function(L){return Object(p.a)({user:L,state:C()})})).then(function(L){L=Object(h.b)(L);var J=L.map(function(O){return O.id});L=L.filter(function(O,P){return J.indexOf(O.id)===P});return B(x(L))})})}},x=function(y){return function(B,C){return new k.Promise(function(z,D){var E=C();E=Object(a.b)(E)?E:E.gbState;var A=
E.utils,F=A.portal,H=A.request,I=Object(n.b)(E.groups.selectorItems);E=Object(n.a)(y).map(function(L){return Object(n.i)({itemIds:I,groupIds:Object(n.b)(L),portal:F,request:H})});k.Promise.all(E).then(function(L){var J=L.reduce(function(P,fa){return Object(c.a)(Object(c.a)({},P),fa)},{}),O=Object.keys(J);L=y.filter(function(P){return 0<=O.indexOf(P.id)}).map(function(P){return{group:P,selectedByIds:J[P.id].items.map(function(fa){return fa.itemId})}});B({type:e.a.SET_HAS_GROUPS,payload:0<y.length});
B(Object(b.e)(L));z()})["catch"](D)})}}},181:function(v,r,f){f.d(r,"b",function(){return p});f.d(r,"c",function(){return q});f.d(r,"a",function(){return t});var c=f(63);v=f(5);var a=f(99),b=f(128),p=function(m,n){return Object(c.a)(Object(b.b)(m))(n)},q=Object(c.a)(Object(v.e)("thumbURI")),t=function(m){var n=m.initialSelectedByIds;return!Object(a.a)(m.selectedBy.map(function(k){return k.id}),n)}},186:function(v,r,f){f.d(r,"b",function(){return a});f.d(r,"g",function(){return b});f.d(r,"h",function(){return p});
f.d(r,"e",function(){return q});f.d(r,"f",function(){return t});f.d(r,"d",function(){return m});f.d(r,"c",function(){return n});f.d(r,"a",function(){return k});var c=f(83),a=function(l){return{type:c.a.SET_SEARCH_STRING,payload:l}},b=function(l){return{type:c.a.UPDATE_OWNER_FILTER,payload:l}},p=function(l){return{type:c.a.UPDATE_USERNAME_FILTER,payload:l}},q=function(l){return{type:c.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:l}},t=function(l){return{type:c.a.UPDATE_MEMBERSHIP_FILTER,payload:l}},m=
function(l){return{type:c.a.UPDATE_CREATED_ON_FILTER,payload:{section:l.section,created:l.created}}},n=function(l){return{type:c.a.SET_USERS,payload:l}},k=function(l){return{type:c.a.CLEAR_FILTERS,payload:l}}},189:function(v,r){function f(){throw Error("setTimeout has not been defined");}function c(){throw Error("clearTimeout has not been defined");}function a(g){if(n===setTimeout)return setTimeout(g,0);if((n===f||!n)&&setTimeout)return n=setTimeout,setTimeout(g,0);try{return n(g,0)}catch(u){try{return n.call(null,
g,0)}catch(x){return n.call(this,g,0)}}}function b(){e&&l&&(e=!1,l.length?h=l.concat(h):d=-1,h.length&&p())}function p(){if(!e){var g=a(b);e=!0;for(var u=h.length;u;){l=h;for(h=[];++d<u;)l&&l[d].run();d=-1;u=h.length}l=null;e=!1;(function(x){if(k===clearTimeout)return clearTimeout(x);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(x);try{k(x)}catch(y){try{return k.call(null,x)}catch(B){return k.call(this,x)}}})(g)}}function q(g,u){this.fun=g;this.array=u}function t(){}var m=v.exports=
{};try{var n="function"==typeof setTimeout?setTimeout:f}catch(g){n=f}try{var k="function"==typeof clearTimeout?clearTimeout:c}catch(g){k=c}!0;var l,h=[],e=!1,d=-1;m.nextTick=function(g){var u=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)u[x-1]=arguments[x];h.push(new q(g,u));1!==h.length||e||a(p)};q.prototype.run=function(){this.fun.apply(null,this.array)};m.title="browser";m.browser=!0;m.env={};m.argv=[];m.version="";m.versions={};m.on=t;m.addListener=t;m.once=
t;m.off=t;m.removeListener=t;m.removeAllListeners=t;m.emit=t;m.prependListener=t;m.prependOnceListener=t;m.listeners=function(g){return[]};m.binding=function(g){throw Error("process.binding is not supported");};m.cwd=function(){return"/"};m.chdir=function(g){throw Error("process.chdir is not supported");};m.umask=function(){return 0}},192:function(v,r,f){var c;f.d(r,"a",function(){return c});(c||(c={})).USER_DETAILS_LOADED="USER_LOADED"},194:function(v,r,f){function c(k){return"Feature Service"===
k.type&&-1<k.typeKeywords.indexOf("Hosted Service")}function a(k){return k.filter(function(l){return l.access!==t.b["public"]&&c(l)})}function b(k){var l=k.request;k=k.items.map(function(h){return function(e,d){return new p.Promise(function(g){c(e)?Object(q.v)(d,e.url+"/layers").then(function(u){u=u.layers;g((null==u?void 0:u.reduce(function(x,y){return x||y&&-1<y.capabilities.indexOf("Editing")},!1))&&e)},function(){return g(!1)}):g(!1)})}(h,l)});return p.Promise.all(k).then(function(h){return h.filter(function(e){return e})})}
f.d(r,"d",function(){return m});f.d(r,"c",function(){return c});f.d(r,"b",function(){return a});f.d(r,"a",function(){return b});var p=f(28),q=f(30),t=f(26),m=function(k){var l=k.groupDatas;return k.items.filter(function(h){h=h.access?h.access:h.sharing&&h.sharing.access;return h===t.b["private"]||h===t.b.shared}).reduce(function(h,e){return h||n({item:e,groupDatas:l})},!1)},n=function(k){var l=k.item;return k.groupDatas.reduce(function(h,e){return h||!!e.selectedByIds&&0<=e.selectedByIds.indexOf(l.id)},
!1)}},204:function(v,r,f){var c;f.d(r,"a",function(){return c});(function(a){a.SET_PAGE="SET_PAGE";a.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN";a.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"})(c||(c={}))},207:function(v,r,f){f.d(r,"b",function(){return b});var c=f(0),a=f(25),b={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};r.a=function(p,q){switch(void 0===p&&(p=b),q.type){case a.a.ENABLE_USER_TOGGLE:return Object(c.a)(Object(c.a)({},
p),{enableUserToggle:!0});case a.a.SET_SHARE_MODE:return Object(c.a)(Object(c.a)({},p),{shareMode:q.payload});case a.a.SET_USER_TYPE:return Object(c.a)(Object(c.a)({},p),{userType:q.payload});case a.a.TRUSTED_ORGS_LOADED:return Object(c.a)(Object(c.a)({},p),{hasTrustedOrgs:0<q.payload.length});case a.a.USER_DETAILS_LOADED:return Object(c.a)(Object(c.a)({},p),{userGroups:q.payload});case a.a.SET_SELECTOR_ITEMS:var t=!!q.payload.find(function(m){var n;return-1<(null===(n=null==m?void 0:m.typeKeywords)||
void 0===n?void 0:n.indexOf("EditExtensionIndoorsSpaces"))});return Object(c.a)(Object(c.a)({},p),{hasIndoorsSpaces:t});default:return p}}},208:function(v,r,f){f.d(r,"b",function(){return a});v=f(16);var c=f(209);f=f(38);var a={sort:c.b,filter:f.f};r.a=Object(v.combineReducers)({sort:c.a,filter:f.e})},209:function(v,r,f){f.d(r,"b",function(){return b});var c=f(0),a=f(25),b={field:"title",order:"asc"},p={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};
r.a=function(q,t){switch(void 0===q&&(q=b),t.type){case a.a.CHANGE_SORT_FIELD:return Object(c.a)(Object(c.a)({},q),{field:t.payload,order:p[t.payload]});case a.a.CHANGE_SORT_ORDER:return Object(c.a)(Object(c.a)({},q),{order:t.payload});default:return q}}},210:function(v,r,f){f.d(r,"b",function(){return p});v=f(16);var c=f(211),a=f(212),b=f(213);f=f(214);var p={page:c.b,sort:a.b,focus:b.b,filter:f.b};r.a=Object(v.combineReducers)({page:c.a,sort:a.a,focus:b.a,filter:f.a})},211:function(v,r,f){f.d(r,
"b",function(){return b});var c=f(0),a=f(25),b={currentPageNumber:1};r.a=function(p,q){switch(void 0===p&&(p=b),q.type){case a.a.CLEAR_FILTERS:case a.a.UPDATE_USERNAME_FILTER:case a.a.UPDATE_OWNER_FILTER:case a.a.UPDATE_CREATED_ON_FILTER:case a.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(c.a)(Object(c.a)({},p),{currentPageNumber:1});case a.a.SET_PAGE:return Object(c.a)(Object(c.a)({},p),{currentPageNumber:q.payload});case a.a.LOAD_GROUPS_SUCCESS:return Object(c.a)(Object(c.a)({},p),{currentPageNumber:q.payload.num>
q.payload.total?1:Math.ceil(q.payload.start/q.payload.num)});case a.a.LOAD_GROUPS_FAIL:return Object(c.a)(Object(c.a)({},p),{currentPageNumber:1});default:return p}}},212:function(v,r,f){f.d(r,"b",function(){return a});var c=f(25),a=!1;r.a=function(b,p){switch(void 0===b&&(b=a),p.type){case c.a.CHANGE_SORT_FIELD:case c.a.CHANGE_SORT_ORDER:case c.a.TOGGLE_SORT_DROPDOWN:return!b;default:return b}}},213:function(v,r,f){f.d(r,"b",function(){return b});var c=f(0),a=f(25),b={focusSelectAll:!1};r.a=function(p,
q){switch(q.type){case a.a.LOAD_GROUPS_FAIL:case a.a.LOAD_GROUPS_SUCCESS:return Object(c.a)(Object(c.a)({},p),{focusSelectAll:!1});case a.a.CHANGE_SORT_FIELD:case a.a.CHANGE_SORT_ORDER:return Object(c.a)(Object(c.a)({},p),{focusSelectAll:!0});default:return p}}},214:function(v,r,f){f.d(r,"b",function(){return p});var c=f(0),a=f(25),b=f(38),p={expanded:!1};r.a=function(q,t){switch(t.type){case a.a.CLEAR_FILTERS:switch(t.payload){case void 0:case b.a.DATE_CREATED:return Object(c.a)(Object(c.a)({},q),
{dateCreatedSelectedSection:void 0});default:return q}case a.a.TOGGLE_EXPANDED_FILTERS:return Object(c.a)(Object(c.a)({},q),{expanded:!q.expanded});case a.a.UPDATE_CREATED_ON_FILTER:return Object(c.a)(Object(c.a)({},q),{dateCreatedSelectedSection:t.payload.section});default:return q}}},215:function(v,r,f){f.d(r,"b",function(){return a});var c=f(101),a={portal:{},portalUser:{},request:function(b){return null}};r.a=function(b,p){return void 0===b&&(b=a),p.type,b.portal.portalHostname&&!b.portal.baseUrl&&
(b.portal.baseUrl=Object(c.a)(b.portal)),b}},25:function(v,r,f){f.d(r,"a",function(){return q});var c;v=f(0);r=f(204);var a=f(68),b=f(175),p=f(83);f=f(192);!function(t){t.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE";t.SET_SHARE_MODE="SET_SHARE_MODE";t.SET_USER_TYPE="SET_USER_TYPE"}(c||(c={}));var q=Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},r.a),a.a),p.a),c),b.a),f.a)},26:function(v,r,f){var c,a,b,p,q;f.d(r,"b",function(){return c});f.d(r,"a",function(){return a});f.d(r,
"c",function(){return b});f.d(r,"e",function(){return p});f.d(r,"d",function(){return q});(function(t){t.org="org";t["private"]="private";t["public"]="public";t.shared="shared"})(c||(c={}));(function(t){t.LOADING="LOADING";t.SHARE="SHARE";t.GROUP_BROWSER="GROUP_BROWSER";t.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"})(a||(a={}));(function(t){t.SET_SHARE_TO_PRIVATE="SET_SHARE_TO_PRIVATE";t.REVERT_SHARE_LEVEL="REVERT_SHARE_LEVEL";t.REVERT_GROUPS="REVERT_GROUPS";t.EDITABLE_LAYERS="EDITABLE_LAYERS";
t.OPEN_GROUP_BROWSER="OPEN_GROUP_BROWSER";t.NONE="NONE";t.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED";t.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"})(b||(b={}));(function(t){t.ORG="ORG";t.PUBLIC="PUBLIC"})(p||(p={}));(function(t){t.DEFAULT="DEFAULT";t.ADMIN="ADMIN";t.GROUP="GROUP"})(q||(q={}))},28:function(v,r,f){(function(c,a){v.exports=function(){function b(){var ma=setTimeout;return function(){return ma(p,1)}}function p(){for(var ma=0;ma<B;ma+=2)(0,I[ma])(I[ma+
1]),I[ma]=void 0,I[ma+1]=void 0;B=0}function q(ma,ha){var Z=this,W=new this.constructor(m);void 0===W[V]&&x(W);var Q=Z._state;if(Q){var ia=arguments[Q-1];D(function(){return u(Q,W,ia,Z._result)})}else d(Z,W,ma,ha);return W}function t(ma){if(ma&&"object"==typeof ma&&ma.constructor===this)return ma;var ha=new this(m);return k(ha,ma),ha}function m(){}function n(ma,ha,Z){ha.constructor===ma.constructor&&Z===q&&ha.constructor.resolve===t?function(W,Q){1===Q._state?h(W,Q._result):2===Q._state?e(W,Q._result):
d(Q,void 0,function(ia){return k(W,ia)},function(ia){return e(W,ia)})}(ma,ha):void 0===Z?h(ma,ha):"function"==typeof Z?function(W,Q,ia){D(function(R){var S=!1,N=function(X,aa,ea,Y){try{X.call(aa,ea,Y)}catch(T){return T}}(ia,Q,function(X){S||(S=!0,Q!==X?k(R,X):h(R,X))},function(X){S||(S=!0,e(R,X))},R._label);!S&&N&&(S=!0,e(R,N))},W)}(ma,ha,Z):h(ma,ha)}function k(ma,ha){if(ma===ha)e(ma,new TypeError("You cannot resolve a promise with itself"));else if(W=typeof(Z=ha),null===Z||"object"!==W&&"function"!==
W)h(ma,ha);else{Z=void 0;try{Z=ha.then}catch(Q){return void e(ma,Q)}n(ma,ha,Z)}var Z,W}function l(ma){ma._onerror&&ma._onerror(ma._result);g(ma)}function h(ma,ha){void 0===ma._state&&(ma._result=ha,ma._state=1,0!==ma._subscribers.length&&D(g,ma))}function e(ma,ha){void 0===ma._state&&(ma._state=2,ma._result=ha,D(l,ma))}function d(ma,ha,Z,W){var Q=ma._subscribers,ia=Q.length;ma._onerror=null;Q[ia]=ha;Q[ia+1]=Z;Q[ia+2]=W;0===ia&&ma._state&&D(g,ma)}function g(ma){var ha=ma._subscribers,Z=ma._state;if(0!==
ha.length){for(var W=void 0,Q=void 0,ia=ma._result,R=0;R<ha.length;R+=3)W=ha[R],Q=ha[R+Z],W?u(Z,W,Q,ia):Q(ia);ma._subscribers.length=0}}function u(ma,ha,Z,W){var Q="function"==typeof Z,ia=void 0,R=void 0,S=!0;if(Q){try{ia=Z(W)}catch(N){S=!1,R=N}if(ha===ia)return void e(ha,new TypeError("A promises callback cannot return that same promise."))}else ia=W;void 0!==ha._state||(Q&&S?k(ha,ia):!1===S?e(ha,R):1===ma?h(ha,ia):2===ma&&e(ha,ia))}function x(ma){ma[V]=ba++;ma._state=void 0;ma._result=void 0;ma._subscribers=
[]}var y=Array.isArray?Array.isArray:function(ma){return"[object Array]"===Object.prototype.toString.call(ma)},B=0,C=void 0,z=void 0,D=function(ma,ha){I[B]=ma;I[B+1]=ha;2===(B+=2)&&(z?z(p):fa())},E="undefined"!=typeof window?window:void 0,A=E||{};A=A.MutationObserver||A.WebKitMutationObserver;var F="undefined"==typeof self&&void 0!==c&&"[object process]"==={}.toString.call(c),H="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=Array(1E3),
L,J,O,P,fa=void 0;F?fa=function(){return c.nextTick(p)}:A?(J=0,O=new A(p),P=document.createTextNode(""),O.observe(P,{characterData:!0}),fa=function(){P.data=J=++J%2}):H?((L=new MessageChannel).port1.onmessage=p,fa=function(){return L.port2.postMessage(0)}):fa=void 0===E?function(){try{var ma=Function("return this")().require("vertx");return void 0!==(C=ma.runOnLoop||ma.runOnContext)?function(){C(p)}:b()}catch(ha){return b()}}():b();var V=Math.random().toString(36).substring(2),ba=0,ka=function(){function ma(ha,
Z){this._instanceConstructor=ha;this.promise=new ha(m);this.promise[V]||x(this.promise);y(Z)?(this.length=Z.length,this._remaining=Z.length,this._result=Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(Z),0===this._remaining&&h(this.promise,this._result))):e(this.promise,Error("Array Methods must be provided an Array"))}return ma.prototype._enumerate=function(ha){for(var Z=0;void 0===this._state&&Z<ha.length;Z++)this._eachEntry(ha[Z],Z)},
ma.prototype._eachEntry=function(ha,Z){var W=this._instanceConstructor,Q=W.resolve;if(Q===t){var ia=Q=void 0,R=!1;try{Q=ha.then}catch(S){R=!0,ia=S}Q===q&&void 0!==ha._state?this._settledAt(ha._state,Z,ha._result):"function"!=typeof Q?(this._remaining--,this._result[Z]=ha):W===la?(W=new W(m),R?e(W,ia):n(W,ha,Q),this._willSettleAt(W,Z)):this._willSettleAt(new W(function(S){return S(ha)}),Z)}else this._willSettleAt(Q(ha),Z)},ma.prototype._settledAt=function(ha,Z,W){var Q=this.promise;void 0===Q._state&&
(this._remaining--,2===ha?e(Q,W):this._result[Z]=W);0===this._remaining&&h(Q,this._result)},ma.prototype._willSettleAt=function(ha,Z){var W=this;d(ha,void 0,function(Q){return W._settledAt(1,Z,Q)},function(Q){return W._settledAt(2,Z,Q)})},ma}(),la=function(){function ma(ha){this[V]=ba++;this._result=this._state=void 0;this._subscribers=[];if(m!==ha){if("function"!=typeof ha)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof
ma)(function(Z,W){try{W(function(Q){k(Z,Q)},function(Q){e(Z,Q)})}catch(Q){e(Z,Q)}})(this,ha);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return ma.prototype["catch"]=function(ha){return this.then(null,ha)},ma.prototype["finally"]=function(ha){var Z=this.constructor;return"function"==typeof ha?this.then(function(W){return Z.resolve(ha()).then(function(){return W})},function(W){return Z.resolve(ha()).then(function(){throw W;
})}):this.then(ha,ha)},ma}();return la.prototype.then=q,la.all=function(ma){return(new ka(this,ma)).promise},la.race=function(ma){var ha=this;return y(ma)?new ha(function(Z,W){for(var Q=ma.length,ia=0;ia<Q;ia++)ha.resolve(ma[ia]).then(Z,W)}):new ha(function(Z,W){return W(new TypeError("You must pass an array to race."))})},la.resolve=t,la.reject=function(ma){var ha=new this(m);return e(ha,ma),ha},la._setScheduler=function(ma){z=ma},la._setAsap=function(ma){D=ma},la._asap=D,la.polyfill=function(){var ma=
void 0;if(void 0!==a)ma=a;else if("undefined"!=typeof self)ma=self;else try{ma=Function("return this")()}catch(W){throw Error("polyfill failed because global object is unavailable in this environment");}var ha=ma.Promise;if(ha){var Z=null;try{Z=Object.prototype.toString.call(ha.resolve())}catch(W){}if("[object Promise]"===Z&&!ha.cast)return}ma.Promise=la},la.Promise=la,la}()}).call(this,f(189),f(170))},30:function(v,r,f){function c(I){return I.reduce(function(L,J){return J&&J.relatedItems?L.concat(J.relatedItems.map(function(O){return O})):
L},[])}function a(I,L,J){return I(L,{query:Object(q.a)({f:"json"},J)}).then(function(O){return O.data})}function b(I,L){void 0===L&&(L=100);for(var J=[],O=0;O<Math.ceil(I.length/L);O++)J.push(I.slice(O*L,(O+1)*L));return J.filter(function(P){return 0<P.length})}function p(I){var L=I.itemIds,J=I.request,O=I.groupIds,P=I.portal.restUrl+"/content/itemsgroups";return new t.Promise(function(fa,V){J(P,{method:"get",query:{f:"json",items:L,groups:O}}).then(function(ba){fa(ba.data)},V)})}f.d(r,"u",function(){return m});
f.d(r,"n",function(){return n});f.d(r,"h",function(){return k});f.d(r,"e",function(){return l});f.d(r,"f",function(){return h});f.d(r,"j",function(){return e});f.d(r,"o",function(){return d});f.d(r,"l",function(){return g});f.d(r,"k",function(){return u});f.d(r,"m",function(){return x});f.d(r,"c",function(){return y});f.d(r,"d",function(){return B});f.d(r,"r",function(){return C});f.d(r,"s",function(){return z});f.d(r,"t",function(){return D});f.d(r,"g",function(){return E});f.d(r,"p",function(){return A});
f.d(r,"q",function(){return F});f.d(r,"v",function(){return a});f.d(r,"a",function(){return b});f.d(r,"i",function(){return p});f.d(r,"b",function(){return H});var q=f(0),t=f(28),m=function(I){return function(L,J){return I({url:L,content:J.query},{usePost:"post"===J.method}).then(function(O){return{data:O}})}},n=function(I,L,J){return a(I,L.restUrl+"/portals/self",{culture:J,"default":!0})},k=function(I,L,J){return a(I,L.restUrl+"/content/items/"+J+"/data")},l=function(I,L,J,O){return a(I,L.restUrl+
"/community/groups",Object(q.a)({q:J},O))},h=function(I,L,J){return a(I,L.restUrl+"/community/groups/"+J+"/categorySchema")},e=function(I,L,J){return a(I,L.restUrl+"/portals/"+(J||L.id)+"/categorySchema")},d=function(I,L){return a(I,L.restUrl+"/portals/"+L.id+"/servers")},g=function(I,L,J,O){return I(L.restUrl+"/portals/"+(J||L.id)+"/collaborationsSummary",O)},u=function(I,L,J,O){return I(L.restUrl+"/portals/"+(J||L.id)+"/collaboratedItems",O)},x=function(I,L,J){return a(I,location.protocol+"//"+
L.portalHostname+"/sharing/rest/portals/"+(J||"self"))},y=function(I,L,J){return I(L.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+L.id+" AND access:public",num:100,start:J||1,sortField:"title",sortOrder:"asc"}}).then(function(O){return O.data.total>O.data.start+O.data.num?y(I,L,O.data.start+O.data.num).then(function(P){return Object(q.a)(Object(q.a)({},P),{data:Object(q.a)(Object(q.a)({},P.data),{results:O.data.results.concat(P.data.results)})})}):O})},B=function(I,L,J,O){return I(L.restUrl+
"/community/users/"+J+"/provisionedListings",{query:{f:"json",num:100,start:O||1}}).then(function(P){var fa=t.Promise.all(P.data.provisionedListings.filter(function(ba){return ba.itemId}).map(function(ba){return(new t.Promise(function(ka,la){I(L.restUrl+"/content/items/"+ba.itemId,{method:"get",query:{f:"json"}}).then(function(ma){ka(ma.data)},la)}))["catch"](function(ka){return 0})})),V=P.data.provisionedListings.map(function(ba){return a(I,L.restUrl+"/content/items/"+(ba.id||ba.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(ka){return ka},
function(ka){})});return P.data.total>P.data.start+P.data.num?B(I,L,J,P.data.start+P.data.num).then(function(ba){return t.Promise.all([fa].concat(V)).then(function(ka){return ka[0].results.concat(c(ka.slice(1))).concat(ba)})}):t.Promise.all([fa].concat(V)).then(function(ba){return ba[0].filter(function(ka){return void 0!==ka}).concat(c(ba.slice(1)))})})},C=function(I,L,J){return a(I,L.restUrl+"/community/users/"+(J||L.user.username))},z=function(I,L,J){return a(I,L.restUrl+"/content/users/"+(J||L.user.username),
{num:1})},D=function(I,L,J){return a(I,L.restUrl+"/content/groups/"+J)},E=function(I,L,J){return a(I,L.restUrl+"/community/groups",J)},A=function(I,L){return a(I,L.restUrl+"/portals/self/settings")},F=function(I,L){return a(I,L.restUrl+"/portals/self/trustedOrgs",{num:100})},H=function(I,L){return void 0===L&&(L=","),I.map(function(J){return J.id}).join(L)}},313:function(v,r,f){f.d(r,"a",function(){return p});var c=f(30),a=f(54),b=f(175),p=function(q,t){var m=t();m=(Object(a.b)(m)?m:m.gbState).utils;
Object(c.q)(m.request,m.portal).then(function(n){var k;n=(null===(k=null==n?void 0:n.trustedOrgs)||void 0===k?void 0:k.filter(function(l){return-1<l.from.established&&-1<l.to.established}))||[];q({type:b.a.TRUSTED_ORGS_LOADED,payload:n})},function(){q({type:b.a.TRUSTED_ORGS_LOADED,payload:[]})})}},314:function(v,r,f){f.d(r,"a",function(){return p});var c=f(30),a=f(54),b=f(28),p=function(q){q=(Object(a.b)(q)?q:q.gbState).utils;var t=q.request,m=q.portal,n=q.portalUser;return new b.Promise(function(k,
l){Object(c.r)(t,m,n.username).then(function(h){k(h)},function(){k()})})}},335:function(v,r,f){f.d(r,"b",function(){return n});f.d(r,"a",function(){return B});var c=f(0),a=f(28),b=f(30),p=f(78),q=f(61),t=f(194),m=f(26),n=function(D){if(D.depth&&4<D.depth)return a.Promise.resolve([]);switch(D.depth=D.depth?D.depth+1:1,D.item.type){case "Web Map":case "Web Scene":return u(D);case "Web Mapping Application":return l(D);case "Big Data File Share":return h(D);case "Data Store":return e(D);default:return a.Promise.resolve([])}},
k=function(D){var E=D.item,A=D.request,F=D.portal,H=D.iconDir;return E.itemId?new a.Promise(function(I){Object(b.v)(A,F.restUrl+"/content/items/"+E.itemId).then(function(L){0<Object(t.b)([L]).length?Object(t.a)({items:[L],request:A}).then(function(J){L.isUpdateLayer=0<J.length;I(Object(p.a)(F,H,L))},function(){return I(Object(p.a)(F,H,L))}):I(Object(p.a)(F,H,L))},function(){return I(null)})}):a.Promise.resolve(null)},l=function(D){var E=D.item,A=D.request,F=D.portal,H=D.iconDir;return new a.Promise(function(I){Object(b.v)(A,
F.restUrl+"/content/items/"+E.id+"/data").then(function(L){L||I([]);var J=function(O){var P,fa,V,ba,ka,la,ma,ha,Z,W,Q=(null===(P=null==O?void 0:O.map)||void 0===P?0:P.itemId)?[O.map.itemId]:[];P=null!==(ba=null===(V=null===(fa=O.values)||void 0===fa?void 0:fa.itemCollection)||void 0===V?void 0:V.map(function(ia){return ia.id}))&&void 0!==ba?ba:[];fa=null!==(ma=null===(la=null===(ka=O.values)||void 0===ka?void 0:ka.webmap)||void 0===la?void 0:la.split(","))&&void 0!==ma?ma:[];O=null!==(W=null===(Z=
null===(ha=O.values)||void 0===ha?void 0:ha.webscene)||void 0===Z?void 0:Z.split(","))&&void 0!==W?W:[];return Object(c.g)(Object(c.g)(Object(c.g)(Object(c.g)([],Q),P),fa),O)}(L).map(function(O){return k({item:{itemId:O},request:A,portal:F,iconDir:H})});a.Promise.all(J).then(function(O){var P=O.filter(function(fa){return fa});O=P.map(function(fa){return n({item:fa,request:A,portal:F,iconDir:H})});a.Promise.all(O).then(function(fa){var V;fa=Object(c.g)(Object(c.g)([],P),Object(q.b)(fa));(null===(V=
L.values)||void 0===V?0:V.group)&&(E.itemData=L,fa.push(E));I(fa)})})})})},h=function(D){var E=D.item,A=D.request,F=D.portal,H=D.iconDir;return new a.Promise(function(I){Object(b.v)(A,F.restUrl+"/content/items/"+E.id+"/relatedItems",{relationshipType:"BDFSDataStore2BDFSCatalogService",direction:"reverse"}).then(function(L){if(-1<L.relatedItems[0].typeKeywords.indexOf("bigDataFileShare")&&-1<L.relatedItems[0].typeKeywords.indexOf("dataStore"))Object(b.v)(A,F.restUrl+"/content/items/"+L.relatedItems[0].id+
"/relatedItems",{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(O){O.relatedItems.push(L.relatedItems[0]);O=d(O.relatedItems,A,F,H);a.Promise.all(O).then(function(P){I(P)})});else{var J=d(L.relatedItems,A,F,H);a.Promise.all(J).then(function(O){I(O)})}})})},e=function(D){var E=D.item,A=D.request,F=D.portal,H=D.iconDir;return new a.Promise(function(I){Object(b.v)(A,F.restUrl+"/content/items/"+E.id+"/relatedItems",{relationshipType:"CloudDataStore2BDFSDataStore",
direction:"reverse"}).then(function(L){L=d(L.relatedItems,A,F,H);a.Promise.all(L).then(function(J){I(J)})})})},d=function(D,E,A,F){return D.map(function(H){return g(H,E,A,F)})},g=function(D,E,A,F){return new a.Promise(function(H){Object(b.v)(E,A.restUrl+"/content/items/"+D.id).then(function(I){H(Object(p.a)(A,F,I))})})},u=function(D){var E=D.item,A=D.request,F=D.portal,H=D.iconDir;return new a.Promise(function(I){return function(L){var J=L.portal,O=L.item,P=L.request;return new a.Promise(function(fa){if(O.itemData){var V=
O.itemData,ba=V.operationalLayers,ka=V.baseMap,la=V.tables;V=V.ground;return fa(Object(c.g)(Object(c.g)(Object(c.g)(Object(c.g)([],(null==ka?void 0:ka.baseMapLayers)||[]),(null==V?void 0:V.layers)||[]),ba||[]),la||[]))}return Object(b.v)(P,J.restUrl+"/content/items/"+O.id+"/data").then(function(ma){var ha=ma.baseMap,Z=ma.tables,W=ma.ground;return fa(Object(c.g)(Object(c.g)(Object(c.g)(Object(c.g)([],ma.operationalLayers||[]),(null==ha?void 0:ha.baseMapLayers)||[]),(null==W?void 0:W.layers)||[]),Z||
[]))},function(){return fa([])})})}({request:A,item:E,portal:F}).then(function(L){a.Promise.all(x(L).map(function(J){return k({item:J,request:A,portal:F,iconDir:H})})).then(I)})})},x=function(D){return D.reduce(function(E,A){return(null==A?0:A.itemId)?E.concat(A):(null==A?0:A.layers)&&"GroupLayer"===A.layerType?E.concat(A.layers):E},[])},y={needsShareLevelUpdate:!1,needsGroupSharingUpdate:!1,editable:!0,premium:!1,groupDependentApplication:!1,bdfsDatastore:!1},B=function(D){var E=D.item,A=D.selectedOptions,
F=D.selectedGroups,H=D.request;D=D.portal;return C({item:E,selectedOptions:A})?a.Promise.resolve(Object(c.a)(Object(c.a)({},y),{editable:!1,premium:!0})):z({item:E,selectedGroups:F,request:H,portal:D,selectedOptions:A}).then(function(I){var L=I.needsGroupSharingUpdate,J;if(!(J=I.needsShareLevelUpdate)){var O,P=!0;Object(q.e)(A)&&(P=!1);J=Object(q.d)(A);J!==m.b["private"]&&J!==m.b.shared||(P=!1);var fa=E.access||(null===(O=E.sharing)||void 0===O?void 0:O.access);J=(fa===m.b["public"]&&(P=!1),fa===
J&&(P=!1),J===m.b["private"]&&(fa===m.b.shared&&(P=!1),fa===m.b.org&&(P=!1)),P)}return{needsGroupSharingUpdate:L,needsShareLevelUpdate:J,editable:I.editable,premium:!1,groupDependentApplication:I.groupDependentApplication,bdfsDatastore:I.bdfsDatastore}})},C=function(D){var E=D.selectedOptions;D=D.item;return Object(q.e)(E)?!1:Object(q.d)(E)===m.b["public"]?(E=D.typeKeywords,-1<D.owner.toLowerCase().indexOf("esri")&&(-1<(null==E?void 0:E.indexOf("Requires Credits"))||-1<(null==E?void 0:E.indexOf("Requires Subscription")))):
!1},z=function(D){var E=D.item,A=D.selectedGroups,F=D.selectedOptions,H=D.request,I=D.portal;return new a.Promise(function(L,J){var O,P;"Web Mapping Application"===E.type&&(null===(P=null===(O=E.itemData)||void 0===O?void 0:O.values)||void 0===P?0:P.group)?L(Object(c.a)(Object(c.a)({},y),{groupDependentApplication:!0})):"Data Store"!==E.type?Object(b.v)(H,I.restUrl+"/content/users/"+E.owner+(E.ownerFolder?"/"+E.ownerFolder:"")+"/items/"+(E.itemId||E.id)).then(function(fa){var V,ba=fa.item.itemControl,
ka=fa.sharing.groups;fa=E.access||(null===(V=E.sharing)||void 0===V?void 0:V.access);Object(q.f)(E)&&F.total===F["public"]?L(Object(c.a)(Object(c.a)({},y),{needsShareLevelUpdate:!0,editable:!1})):ba&&"admin"!==ba&&"update"!==ba?L(Object(c.a)(Object(c.a)({},y),{editable:!1})):fa!==m.b["public"]?A.length>ka.length?L(Object(c.a)(Object(c.a)({},y),{needsGroupSharingUpdate:!0})):(V=A.some(function(la){return 0>ka.indexOf(la.id)}),L(Object(c.a)(Object(c.a)({},y),{needsGroupSharingUpdate:V}))):L(Object(c.a)({},
y))},function(fa){Object(b.v)(H,I.restUrl+"/content/items/"+(E.itemId||E.id)).then(function(V){V=V.access;V===m.b["public"]||V===m.b.org&&F.total===F.org+F["private"]?L(Object(c.a)(Object(c.a)({},y),{editable:!1})):L(Object(c.a)(Object(c.a)({},y),{needsShareLevelUpdate:!0,editable:!1}))},function(V){L(Object(c.a)(Object(c.a)({},y),{needsShareLevelUpdate:!0,editable:!1}))})}):L(Object(c.a)(Object(c.a)({},y),{bdfsDatastore:!0}))})}},336:function(v,r,f){(function(c,a){function b(xa,Ca){return xa.set(Ca[0],
Ca[1]),xa}function p(xa,Ca){return xa.add(Ca),xa}function q(xa,Ca,ta,qa){var za=-1,va=xa?xa.length:0;for(qa&&va&&(ta=xa[++za]);++za<va;)ta=Ca(ta,xa[za],za,xa);return ta}function t(xa){var Ca=!1;if(null!=xa&&"function"!=typeof xa.toString)try{Ca=!!(xa+"")}catch(ta){}return Ca}function m(xa){var Ca=-1,ta=Array(xa.size);return xa.forEach(function(qa,za){ta[++Ca]=[za,qa]}),ta}function n(xa,Ca){return function(ta){return xa(Ca(ta))}}function k(xa){var Ca=-1,ta=Array(xa.size);return xa.forEach(function(qa){ta[++Ca]=
qa}),ta}function l(xa){var Ca=-1,ta=xa?xa.length:0;for(this.clear();++Ca<ta;){var qa=xa[Ca];this.set(qa[0],qa[1])}}function h(xa){var Ca=-1,ta=xa?xa.length:0;for(this.clear();++Ca<ta;){var qa=xa[Ca];this.set(qa[0],qa[1])}}function e(xa){var Ca=-1,ta=xa?xa.length:0;for(this.clear();++Ca<ta;){var qa=xa[Ca];this.set(qa[0],qa[1])}}function d(xa){this.__data__=new h(xa)}function g(xa,Ca){var ta=La(xa)||function(pa){return!!pa&&"object"==typeof pa&&H(pa)&&R.call(pa,"callee")&&(!Y.call(pa,"callee")||"[object Arguments]"==
S.call(pa))}(xa)?function(pa,sa){for(var ya=-1,Ha=Array(pa);++ya<pa;)Ha[ya]=sa(ya);return Ha}(xa.length,String):[],qa=ta.length,za=!!qa,va;for(va in xa)!Ca&&!R.call(xa,va)||za&&("length"==va||E(va,qa))||ta.push(va);return ta}function u(xa,Ca,ta){var qa=xa[Ca];R.call(xa,Ca)&&(qa===ta||qa!=qa&&ta!=ta)&&(void 0!==ta||Ca in xa)||(xa[Ca]=ta)}function x(xa,Ca){for(var ta=xa.length;ta--;){var qa=xa[ta][0];if(qa===Ca||qa!=qa&&Ca!=Ca)return ta}return-1}function y(xa,Ca,ta,qa,za,va,pa){var sa;if(qa&&(sa=va?
qa(xa,za,va,pa):qa(xa)),void 0!==sa)return sa;if(!L(xa))return xa;if(za=La(xa)){if(sa=function(Aa){var Fa=Aa.length,Ka=Aa.constructor(Fa);Fa&&"string"==typeof Aa[0]&&R.call(Aa,"index")&&(Ka.index=Aa.index,Ka.input=Aa.input);return Ka}(xa),!Ca)return function(Aa,Fa){var Ka=-1,Ia=Aa.length;for(Fa||(Fa=Array(Ia));++Ka<Ia;)Fa[Ka]=Aa[Ka];return Fa}(xa,sa)}else{var ya=Da(xa),Ha="[object Function]"==ya||"[object GeneratorFunction]"==ya;if(Ga(xa))return function(Aa,Fa){if(Fa)return Aa.slice();var Ka=new Aa.constructor(Aa.length);
return Aa.copy(Ka),Ka}(xa,Ca);if("[object Object]"==ya||"[object Arguments]"==ya||Ha&&!va){if(t(xa))return va?xa:{};if(sa=function(Aa){return"function"!=typeof Aa.constructor||A(Aa)?{}:(Fa=aa(Aa),L(Fa)?ea(Fa):{});var Fa}(Ha?{}:xa),!Ca)return function(Aa,Fa){return C(Aa,Ba(Aa),Fa)}(xa,function(Aa,Fa){return Aa&&C(Fa,J(Fa),Aa)}(sa,xa))}else{if(!V[ya])return va?xa:{};sa=function(Aa,Fa,Ka,Ia){var Oa=Aa.constructor;switch(Fa){case "[object ArrayBuffer]":return B(Aa);case "[object Boolean]":case "[object Date]":return new Oa(+Aa);
case "[object DataView]":return function(Ma,Na){var Pa=Na?B(Ma.buffer):Ma.buffer;return new Ma.constructor(Pa,Ma.byteOffset,Ma.byteLength)}(Aa,Ia);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return function(Ma,Na){var Pa=Na?B(Ma.buffer):Ma.buffer;return new Ma.constructor(Pa,Ma.byteOffset,
Ma.length)}(Aa,Ia);case "[object Map]":return function(Ma,Na,Pa){return q(Na?Pa(m(Ma),!0):m(Ma),b,new Ma.constructor)}(Aa,Ia,Ka);case "[object Number]":case "[object String]":return new Oa(Aa);case "[object RegExp]":return function(Ma){var Na=new Ma.constructor(Ma.source,O.exec(Ma));return Na.lastIndex=Ma.lastIndex,Na}(Aa);case "[object Set]":return function(Ma,Na,Pa){return q(Na?Pa(k(Ma),!0):k(Ma),p,new Ma.constructor)}(Aa,Ia,Ka);case "[object Symbol]":return Ja=Aa,wa?Object(wa.call(Ja)):{}}var Ja}(xa,
ya,y,Ca)}}pa||(pa=new d);if(va=pa.get(xa))return va;if(pa.set(xa,sa),!za)var Ea=ta?function(Aa){var Fa=Ba,Ka=J(Aa);if(!La(Aa)){Aa=Fa(Aa);Fa=-1;for(var Ia=Aa.length,Oa=Ka.length;++Fa<Ia;)Ka[Oa+Fa]=Aa[Fa]}return Ka}(xa):J(xa);return function(Aa,Fa){for(var Ka=-1,Ia=Aa?Aa.length:0;++Ka<Ia&&!1!==Fa(Aa[Ka],Ka,Aa););}(Ea||xa,function(Aa,Fa){Ea&&(Aa=xa[Fa=Aa]);u(sa,Fa,y(Aa,Ca,ta,qa,Fa,xa,pa))}),sa}function B(xa){var Ca=new xa.constructor(xa.byteLength);return(new X(Ca)).set(new X(xa)),Ca}function C(xa,Ca,
ta,qa){ta||(ta={});for(var za=-1,va=Ca.length;++za<va;){var pa=Ca[za],sa=qa?qa(ta[pa],xa[pa],pa,ta,xa):void 0;u(ta,pa,void 0===sa?xa[pa]:sa)}return ta}function z(xa,Ca){var ta,qa=xa.__data__;return("string"==(ta=typeof Ca)||"number"==ta||"symbol"==ta||"boolean"==ta?"__proto__"!==Ca:null===Ca)?qa["string"==typeof Ca?"string":"hash"]:qa.map}function D(xa,Ca){var ta=null==xa?void 0:xa[Ca];a:{var qa=!(!L(ta)||(za=ta,Q&&Q in za))&&(I(ta)||t(ta)?N:P).test(F(ta));break a;var za}return qa?ta:void 0}function E(xa,
Ca){return!!(Ca=null==Ca?9007199254740991:Ca)&&("number"==typeof xa||fa.test(xa))&&-1<xa&&0==xa%1&&xa<Ca}function A(xa){var Ca=xa&&xa.constructor;return xa===("function"==typeof Ca&&Ca.prototype||Z)}function F(xa){if(null!=xa){try{return ia.call(xa)}catch(Ca){}return xa+""}return""}function H(xa){var Ca;if(Ca=null!=xa)Ca=xa.length,Ca="number"==typeof Ca&&-1<Ca&&0==Ca%1&&9007199254740991>=Ca;return Ca&&!I(xa)}function I(xa){xa=L(xa)?S.call(xa):"";return"[object Function]"==xa||"[object GeneratorFunction]"==
xa}function L(xa){var Ca=typeof xa;return!!xa&&("object"==Ca||"function"==Ca)}function J(xa){if(H(xa))xa=g(xa);else if(A(xa)){var Ca=[],ta;for(ta in Object(xa))R.call(xa,ta)&&"constructor"!=ta&&Ca.push(ta);xa=Ca}else xa=ca(xa);return xa}var O=/\w*$/,P=/^\[object .+?Constructor\]$/,fa=/^(?:0|[1-9]\d*)$/,V={};V["[object Arguments]"]=V["[object Array]"]=V["[object ArrayBuffer]"]=V["[object DataView]"]=V["[object Boolean]"]=V["[object Date]"]=V["[object Float32Array]"]=V["[object Float64Array]"]=V["[object Int8Array]"]=
V["[object Int16Array]"]=V["[object Int32Array]"]=V["[object Map]"]=V["[object Number]"]=V["[object Object]"]=V["[object RegExp]"]=V["[object Set]"]=V["[object String]"]=V["[object Symbol]"]=V["[object Uint8Array]"]=V["[object Uint8ClampedArray]"]=V["[object Uint16Array]"]=V["[object Uint32Array]"]=!0;V["[object Error]"]=V["[object Function]"]=V["[object WeakMap]"]=!1;var ba="object"==typeof self&&self&&self.Object===Object&&self;ba="object"==typeof c&&c&&c.Object===Object&&c||ba||Function("return this")();
var ka=r&&!r.nodeType&&r,la=ka&&"object"==typeof a&&a&&!a.nodeType&&a;la=la&&la.exports===ka;var ma;ka=Array.prototype;var ha=Function.prototype,Z=Object.prototype,W=ba["__core-js_shared__"],Q=(ma=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+ma:"",ia=ha.toString,R=Z.hasOwnProperty,S=Z.toString,N=RegExp("^"+ia.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");la=la?ba.Buffer:void 0;ma=ba.Symbol;var X=ba.Uint8Array,
aa=n(Object.getPrototypeOf,Object),ea=Object.create,Y=Z.propertyIsEnumerable,T=ka.splice;ka=Object.getOwnPropertySymbols;la=la?la.isBuffer:void 0;var ca=n(Object.keys,Object);ha=D(ba,"DataView");var M=D(ba,"Map");W=D(ba,"Promise");var U=D(ba,"Set");ba=D(ba,"WeakMap");var da=D(Object,"create"),ja=F(ha),na=F(M),oa=F(W),ra=F(U),ua=F(ba),wa=(ma=ma?ma.prototype:void 0)?ma.valueOf:void 0;l.prototype.clear=function(){this.__data__=da?da(null):{}};l.prototype["delete"]=function(xa){return this.has(xa)&&delete this.__data__[xa]};
l.prototype.get=function(xa){var Ca=this.__data__;return da?(xa=Ca[xa],"__lodash_hash_undefined__"===xa?void 0:xa):R.call(Ca,xa)?Ca[xa]:void 0};l.prototype.has=function(xa){var Ca=this.__data__;return da?void 0!==Ca[xa]:R.call(Ca,xa)};l.prototype.set=function(xa,Ca){return this.__data__[xa]=da&&void 0===Ca?"__lodash_hash_undefined__":Ca,this};h.prototype.clear=function(){this.__data__=[]};h.prototype["delete"]=function(xa){var Ca=this.__data__;xa=x(Ca,xa);return!(0>xa)&&(xa==Ca.length-1?Ca.pop():
T.call(Ca,xa,1),!0)};h.prototype.get=function(xa){var Ca=this.__data__;xa=x(Ca,xa);return 0>xa?void 0:Ca[xa][1]};h.prototype.has=function(xa){return-1<x(this.__data__,xa)};h.prototype.set=function(xa,Ca){var ta=this.__data__,qa=x(ta,xa);return 0>qa?ta.push([xa,Ca]):ta[qa][1]=Ca,this};e.prototype.clear=function(){this.__data__={hash:new l,map:new (M||h),string:new l}};e.prototype["delete"]=function(xa){return z(this,xa)["delete"](xa)};e.prototype.get=function(xa){return z(this,xa).get(xa)};e.prototype.has=
function(xa){return z(this,xa).has(xa)};e.prototype.set=function(xa,Ca){return z(this,xa).set(xa,Ca),this};d.prototype.clear=function(){this.__data__=new h};d.prototype["delete"]=function(xa){return this.__data__["delete"](xa)};d.prototype.get=function(xa){return this.__data__.get(xa)};d.prototype.has=function(xa){return this.__data__.has(xa)};d.prototype.set=function(xa,Ca){var ta=this.__data__;if(ta instanceof h){ta=ta.__data__;if(!M||199>ta.length)return ta.push([xa,Ca]),this;ta=this.__data__=
new e(ta)}return ta.set(xa,Ca),this};var Ba=ka?n(ka,Object):function(){return[]},Da=function(xa){return S.call(xa)};(ha&&"[object DataView]"!=Da(new ha(new ArrayBuffer(1)))||M&&"[object Map]"!=Da(new M)||W&&"[object Promise]"!=Da(W.resolve())||U&&"[object Set]"!=Da(new U)||ba&&"[object WeakMap]"!=Da(new ba))&&(Da=function(xa){var Ca=S.call(xa);if(xa=(xa="[object Object]"==Ca?xa.constructor:void 0)?F(xa):void 0)switch(xa){case ja:return"[object DataView]";case na:return"[object Map]";case oa:return"[object Promise]";
case ra:return"[object Set]";case ua:return"[object WeakMap]"}return Ca});var La=Array.isArray,Ga=la||function(){return!1};a.exports=function(xa){return y(xa,!0,!0)}}).call(this,f(170),f(366)(v))},354:function(v,r){v.exports=w},366:function(v,r){v.exports=function(f){return f.webpackPolyfill||(f.deprecate=function(){},f.paths=[],f.children||(f.children=[]),Object.defineProperty(f,"loaded",{enumerable:!0,get:function(){return f.l}}),Object.defineProperty(f,"id",{enumerable:!0,get:function(){return f.i}}),
f.webpackPolyfill=1),f}},379:function(v,r,f){function c(p,q){var t=p.filter(function(m){var n;return!m.success&&500===(null===(n=null==m?void 0:m.error)||void 0===n?void 0:n.code)}).map(function(m){var n=Object(b.c)(q,function(k){return k.id===m.itemId});return(null==n?void 0:n.title)||m.itemId});return p.map(function(m){m.error=m.error||{};var n=m.error,k=n.messageCode;n=n.code;return k&&a.errors[k]&&(m.error.message=a.errors[k]),n&&a.errors[n]&&(m.error.message=a.errors[n]),(500===k||500===n&&t)&&
(m.error.details=t,m.error.message=a.errors[500]+" "+(null==t?void 0:t.join(", "))),m}).filter(function(m){return!m.success})}f.d(r,"a",function(){return c});var a=f(39),b=f(99)},38:function(v,r,f){f.d(r,"b",function(){return c});f.d(r,"d",function(){return b});f.d(r,"c",function(){return p});f.d(r,"a",function(){return q});f.d(r,"f",function(){return n});var c,a,b,p,q,t=f(0),m=f(25);!function(k){k.openData="openData";k.updateGroups="updateGroups";k.distributed="distributed";k.administrative="administrative";
k.orgSettings="orgSettings"}(c||(c={}));(a||(a={})).owner="owner";(function(k){k.itemOwner="itemOwner";k.inOrg="inOrg";k.outsideOrg="outsideOrg"})(b||(b={}));(function(k){k.myOrg="org";k.partnered="collaboration";k.anyOrg="anyOrg"})(p||(p={}));(function(k){k.USER="USER";k.OWNER="OWNER";k.DESIGNATION="DESIGNATION";k.DATE_CREATED="DATE_CREATED";k.MEMBERSHIP="MEMBERSHIP"})(q||(q={}));var n={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};r.e=function(k,l){switch(void 0===k&&(k=n),
l.type){case m.a.CLEAR_FILTERS:switch(l.payload){case q.DESIGNATION:return Object(t.a)(Object(t.a)({},k),{designationFilter:void 0});case q.DATE_CREATED:return Object(t.a)(Object(t.a)({},k),{dateCreatedFilter:void 0});case q.OWNER:return Object(t.a)(Object(t.a)({},k),{ownerFilter:void 0});case q.USER:return k;case q.MEMBERSHIP:return Object(t.a)(Object(t.a)({},k),{membershipFilter:void 0});default:return Object(t.a)(Object(t.a)({},k),{designationFilter:void 0,dateCreatedFilter:void 0,membershipFilter:void 0,
ownerFilter:void 0})}case m.a.UPDATE_OWNER_FILTER:return Object(t.a)(Object(t.a)({},k),{ownerFilter:l.payload===k.ownerFilter?void 0:l.payload});case m.a.UPDATE_USERNAME_FILTER:return Object(t.a)(Object(t.a)({},k),{currentUsername:l.payload});case m.a.UPDATE_CREATED_ON_FILTER:return Object(t.a)(Object(t.a)({},k),{dateCreatedFilter:l.payload.created});case m.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(t.a)(Object(t.a)({},k),{designationFilter:l.payload===k.designationFilter?void 0:l.payload});
case m.a.UPDATE_MEMBERSHIP_FILTER:return Object(t.a)(Object(t.a)({},k),{membershipFilter:l.payload===k.membershipFilter?void 0:l.payload});case m.a.SET_USERS:return Object(t.a)(Object(t.a)({},k),{allUsers:l.payload.reduce(function(h,e){var d;return Object(t.a)(Object(t.a)({},h),((d={})[e.username]=e,d))},{})});case m.a.SET_SEARCH_STRING:return Object(t.a)(Object(t.a)({},k),{searchString:l.payload});default:return k}}},386:function(v,r,f){(function(c,a){function b(ta,qa,za){switch(za.length){case 0:return ta.call(qa);
case 1:return ta.call(qa,za[0]);case 2:return ta.call(qa,za[0],za[1]);case 3:return ta.call(qa,za[0],za[1],za[2])}return ta.apply(qa,za)}function p(ta){var qa=-1,za=null==ta?0:ta.length;for(this.clear();++qa<za;){var va=ta[qa];this.set(va[0],va[1])}}function q(ta){var qa=-1,za=null==ta?0:ta.length;for(this.clear();++qa<za;){var va=ta[qa];this.set(va[0],va[1])}}function t(ta){var qa=-1,za=null==ta?0:ta.length;for(this.clear();++qa<za;){var va=ta[qa];this.set(va[0],va[1])}}function m(ta){this.size=
(this.__data__=new q(ta)).size}function n(ta,qa,za){(void 0===za||z(ta[qa],za))&&(void 0!==za||qa in ta)||l(ta,qa,za)}function k(ta,qa){for(var za=ta.length;za--;)if(z(ta[za][0],qa))return za;return-1}function l(ta,qa,za){"__proto__"==qa&&da?da(ta,qa,{configurable:!0,enumerable:!0,value:za,writable:!0}):ta[qa]=za}function h(ta){if(null==ta)ta=void 0===ta?"[object Undefined]":"[object Null]";else if(U&&U in Object(ta)){var qa=ia.call(ta,U),za=ta[U];try{ta[U]=void 0;var va=!0}catch(sa){}var pa=S.call(ta);
va&&(qa?ta[U]=za:delete ta[U]);ta=pa}else ta=S.call(ta);return ta}function e(ta){return H(ta)&&"[object Arguments]"==h(ta)}function d(ta){return!(!F(ta)||R&&R in ta)&&(E(ta)?X:J).test(function(qa){if(null!=qa){try{return Q.call(qa)}catch(za){}return qa+""}return""}(ta))}function g(ta,qa,za,va,pa){ta!==qa&&wa(qa,function(sa,ya){if(pa||(pa=new m),F(sa))!function(Ea,Aa,Fa,Ka,Ia,Oa,Ja){var Ma=C(Ea,Fa),Na=C(Aa,Fa),Pa=Ja.get(Na);if(Pa)return void n(Ea,Fa,Pa);Aa=Oa?Oa(Ma,Na,Fa+"",Ea,Aa,Ja):void 0;if(Pa=
void 0===Aa){var Qa=La(Na),Ra=!Qa&&Ga(Na),Sa=!Qa&&!Ra&&xa(Na);Aa=Na;Qa||Ra||Sa?La(Ma)?Aa=Ma:H(ab=Ma)&&D(ab)?Aa=function(Ya,$a){var cb=-1,Za=Ya.length;for($a||($a=Array(Za));++cb<Za;)$a[cb]=Ya[cb];return $a}(Ma):Ra?(Pa=!1,Aa=function(Ya,$a){if($a)return Ya.slice();var cb=Ya.length;cb=ea?ea(cb):new Ya.constructor(cb);return Ya.copy(cb),cb}(Na,!0)):Sa?(Pa=!1,Ta=Na,Xa=(Ua=Ta.buffer,Va=new Ua.constructor(Ua.byteLength),(new aa(Va)).set(new aa(Ua)),Va),Aa=new Ta.constructor(Xa,Ta.byteOffset,Ta.length)):
Aa=[]:function(Ya){if(!H(Ya)||"[object Object]"!=h(Ya))return!1;Ya=Y(Ya);if(null===Ya)return!0;Ya=ia.call(Ya,"constructor")&&Ya.constructor;return"function"==typeof Ya&&Ya instanceof Ya&&Q.call(Ya)==N}(Na)||Da(Na)?(Aa=Ma,Da(Ma)?Aa=function(Ya){var $a=I(Ya),cb=void 0,Za=!cb;cb||(cb={});for(var bb=-1,Wa=$a.length;++bb<Wa;){var db=$a[bb],fb=void 0;void 0===fb&&(fb=Ya[db]);if(Za)l(cb,db,fb);else{var eb=cb,gb=eb[db];ia.call(eb,db)&&z(gb,fb)&&(void 0!==fb||db in eb)||l(eb,db,fb)}}return cb}(Ma):F(Ma)&&
!E(Ma)||(Aa=function(Ya){return"function"!=typeof Ya.constructor||B(Ya)?{}:ua(Y(Ya))}(Na))):Pa=!1}var Ta,Xa,Ua,Va,ab;Pa&&(Ja.set(Na,Aa),Ia(Aa,Na,Ka,Oa,Ja),Ja["delete"](Na));n(Ea,Fa,Aa)}(ta,qa,ya,za,g,va,pa);else{var Ha=va?va(C(ta,ya),sa,ya+"",ta,qa,pa):void 0;void 0===Ha&&(Ha=sa);n(ta,ya,Ha)}},I)}function u(ta,qa){var za,va=ta.__data__;return("string"==(za=typeof qa)||"number"==za||"symbol"==za||"boolean"==za?"__proto__"!==qa:null===qa)?va["string"==typeof qa?"string":"hash"]:va.map}function x(ta,
qa){var za=null==ta?void 0:ta[qa];return d(za)?za:void 0}function y(ta,qa){var za=typeof ta;return!!(qa=null==qa?9007199254740991:qa)&&("number"==za||"symbol"!=za&&O.test(ta))&&-1<ta&&0==ta%1&&ta<qa}function B(ta){var qa=ta&&ta.constructor;return ta===("function"==typeof qa&&qa.prototype||W)}function C(ta,qa){if(("constructor"!==qa||"function"!=typeof ta[qa])&&"__proto__"!=qa)return ta[qa]}function z(ta,qa){return ta===qa||ta!=ta&&qa!=qa}function D(ta){return null!=ta&&A(ta.length)&&!E(ta)}function E(ta){if(!F(ta))return!1;
ta=h(ta);return"[object Function]"==ta||"[object GeneratorFunction]"==ta||"[object AsyncFunction]"==ta||"[object Proxy]"==ta}function A(ta){return"number"==typeof ta&&-1<ta&&0==ta%1&&9007199254740991>=ta}function F(ta){var qa=typeof ta;return null!=ta&&("object"==qa||"function"==qa)}function H(ta){return null!=ta&&"object"==typeof ta}function I(ta){if(D(ta)){var qa=La(ta),za=!qa&&Da(ta),va=!qa&&!za&&Ga(ta),pa=!qa&&!za&&!va&&xa(ta);if(qa=qa||za||va||pa){za=ta.length;for(var sa=String,ya=-1,Ha=Array(za);++ya<
za;)Ha[ya]=sa(ya);za=Ha}else za=[];sa=za.length;for(var Ea in ta)qa&&("length"==Ea||va&&("offset"==Ea||"parent"==Ea)||pa&&("buffer"==Ea||"byteLength"==Ea||"byteOffset"==Ea)||y(Ea,sa))||za.push(Ea);ta=za}else if(F(ta)){Ea=B(ta);pa=[];for(va in ta)("constructor"!=va||!Ea&&ia.call(ta,va))&&pa.push(va);ta=pa}else{Ea=[];if(null!=ta)for(pa in Object(ta))Ea.push(pa);ta=Ea}return ta}function L(ta){return ta}var J=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=
P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0;P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=
!1;var fa="object"==typeof c&&c&&c.Object===Object&&c,V="object"==typeof self&&self&&self.Object===Object&&self;V=fa||V||Function("return this")();var ba=r&&!r.nodeType&&r,ka=ba&&"object"==typeof a&&a&&!a.nodeType&&a;fa=(ba=ka&&ka.exports===ba)&&fa.process;a:{try{var la=ka&&ka.require&&ka.require("util").types||fa&&fa.binding&&fa.binding("util");break a}catch(ta){}la=void 0}la=la&&la.isTypedArray;var ma,ha,Z;fa=Array.prototype;var W=Object.prototype;ka=V["__core-js_shared__"];var Q=Function.prototype.toString,
ia=W.hasOwnProperty,R=(ma=/[^.]+$/.exec(ka&&ka.keys&&ka.keys.IE_PROTO||""))?"Symbol(src)_1."+ma:"",S=W.toString,N=Q.call(Object),X=RegExp("^"+Q.call(ia).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");ma=ba?V.Buffer:void 0;ba=V.Symbol;var aa=V.Uint8Array,ea=ma?ma.allocUnsafe:void 0,Y=(ha=Object.getPrototypeOf,Z=Object,function(ta){return ha(Z(ta))}),T=Object.create,ca=W.propertyIsEnumerable,M=fa.splice,U=ba?ba.toStringTag:void 0,
da=function(){try{var ta=x(Object,"defineProperty");return ta({},"",{}),ta}catch(qa){}}();ma=ma?ma.isBuffer:void 0;var ja=Math.max,na=Date.now,oa=x(V,"Map"),ra=x(Object,"create"),ua=function(){function ta(){}return function(qa){if(!F(qa))return{};if(T)return T(qa);ta.prototype=qa;qa=new ta;return ta.prototype=void 0,qa}}();p.prototype.clear=function(){this.__data__=ra?ra(null):{};this.size=0};p.prototype["delete"]=function(ta){ta=this.has(ta)&&delete this.__data__[ta];return this.size-=ta?1:0,ta};
p.prototype.get=function(ta){var qa=this.__data__;return ra?(ta=qa[ta],"__lodash_hash_undefined__"===ta?void 0:ta):ia.call(qa,ta)?qa[ta]:void 0};p.prototype.has=function(ta){var qa=this.__data__;return ra?void 0!==qa[ta]:ia.call(qa,ta)};p.prototype.set=function(ta,qa){var za=this.__data__;return this.size+=this.has(ta)?0:1,za[ta]=ra&&void 0===qa?"__lodash_hash_undefined__":qa,this};q.prototype.clear=function(){this.__data__=[];this.size=0};q.prototype["delete"]=function(ta){var qa=this.__data__;ta=
k(qa,ta);return!(0>ta)&&(ta==qa.length-1?qa.pop():M.call(qa,ta,1),--this.size,!0)};q.prototype.get=function(ta){var qa=this.__data__;ta=k(qa,ta);return 0>ta?void 0:qa[ta][1]};q.prototype.has=function(ta){return-1<k(this.__data__,ta)};q.prototype.set=function(ta,qa){var za=this.__data__,va=k(za,ta);return 0>va?(++this.size,za.push([ta,qa])):za[va][1]=qa,this};t.prototype.clear=function(){this.size=0;this.__data__={hash:new p,map:new (oa||q),string:new p}};t.prototype["delete"]=function(ta){ta=u(this,
ta)["delete"](ta);return this.size-=ta?1:0,ta};t.prototype.get=function(ta){return u(this,ta).get(ta)};t.prototype.has=function(ta){return u(this,ta).has(ta)};t.prototype.set=function(ta,qa){var za=u(this,ta),va=za.size;return za.set(ta,qa),this.size+=za.size==va?0:1,this};m.prototype.clear=function(){this.__data__=new q;this.size=0};m.prototype["delete"]=function(ta){var qa=this.__data__;ta=qa["delete"](ta);return this.size=qa.size,ta};m.prototype.get=function(ta){return this.__data__.get(ta)};m.prototype.has=
function(ta){return this.__data__.has(ta)};m.prototype.set=function(ta,qa){var za=this.__data__;if(za instanceof q){var va=za.__data__;if(!oa||199>va.length)return va.push([ta,qa]),this.size=++za.size,this;za=this.__data__=new t(va)}return za.set(ta,qa),this.size=za.size,this};var wa=function(ta,qa,za){var va=-1,pa=Object(ta);za=za(ta);for(var sa=za.length;sa--;){var ya=za[++va];if(!1===qa(pa[ya],ya,pa))break}return ta},Ba=function(ta){var qa=0,za=0;return function(){var va=na(),pa=16-(va-za);if(za=
va,0<pa){if(800<=++qa)return arguments[0]}else qa=0;return ta.apply(void 0,arguments)}}(da?function(ta,qa){return da(ta,"toString",{configurable:!0,enumerable:!1,value:(za=qa,function(){return za}),writable:!0});var za}:L),Da=e(function(){return arguments}())?e:function(ta){return H(ta)&&ia.call(ta,"callee")&&!ca.call(ta,"callee")},La=Array.isArray,Ga=ma||function(){return!1},xa=la?function(ta){return function(qa){return ta(qa)}}(la):function(ta){return H(ta)&&A(ta.length)&&!!P[h(ta)]},Ca;V=(Ca=function(ta,
qa,za,va){g(ta,qa,za,va)},function(ta,qa){return Ba(function(za,va,pa){return va=ja(void 0===va?za.length-1:va,0),function(){for(var sa=arguments,ya=-1,Ha=ja(sa.length-va,0),Ea=Array(Ha);++ya<Ha;)Ea[ya]=sa[va+ya];ya=-1;for(Ha=Array(va+1);++ya<va;)Ha[ya]=sa[ya];return Ha[va]=pa(Ea),b(za,this,Ha)}}(ta,qa,L),ta+"")}(function(ta,qa){var za=-1,va=qa.length,pa=1<va?qa[va-1]:void 0,sa=2<va?qa[2]:void 0;pa=3<Ca.length&&"function"==typeof pa?(va--,pa):void 0;var ya;if(ya=sa){ya=qa[0];var Ha=qa[1];if(F(sa)){var Ea=
typeof Ha;ya=!!("number"==Ea?D(sa)&&y(Ha,sa.length):"string"==Ea&&Ha in sa)&&z(sa[Ha],ya)}else ya=!1}ya&&(pa=3>va?void 0:pa,va=1);for(ta=Object(ta);++za<va;)(sa=qa[za])&&Ca(ta,sa,za,pa);return ta}));a.exports=V}).call(this,f(170),f(366)(v))},39:function(v,r){v.exports=G},5:function(v,r,f){function c(k){return 0===Object.keys(k).length&&k.constructor===Object}function a(k){return null!=k}function b(k,l){return m.apply(null,arguments)}function p(k,l){return n.apply(null,arguments)}f.d(r,"b",function(){return c});
f.d(r,"a",function(){return a});f.d(r,"e",function(){return t});f.d(r,"c",function(){return b});f.d(r,"d",function(){return p});var q=f(0);v=f(15);var t=Object(v.a)(function(k,l){var h=Object(q.a)({},l);return delete h[k],h}),m=Object(v.a)(function(k,l){return Object.keys(l).reduce(function(h,e){return h[e]=k(l[e],e,l),h},{})}),n=Object(v.a)(function(k,l){return Object.keys(l).reduce(function(h,e){return k(l[e],e,l)&&(h[e]=l[e]),h},{})})},51:function(v,r,f){function c(z){return!(!z.urlKey||!z.customBaseUrl)}
function a(z){return z.role===e.admin||z.role===e.accountAdmin}function b(z){return Object(u.a)(z.roleId)&&0<(z.roleId||"").length}function p(z){return!b(z)||b(z)&&-1<(z.privileges||[]).indexOf("portal:admin:viewItems")}function q(z){return-1<(z.privileges||[]).indexOf("portal:user:shareToOrg")}function t(z){return-1<(z.privileges||[]).indexOf("portal:user:shareToGroup")}function m(z){return-1<(z.privileges||[]).indexOf("portal:user:shareToPublic")}function n(z,D){return k(z)||l(z)||D.canSharePublic&&
h(z)}function k(z){return-1<(z.privileges||[]).indexOf("portal:admin:shareToGroup")}function l(z){return-1<(z.privileges||[]).indexOf("portal:admin:shareToOrg")}function h(z){return-1<(z.privileges||[]).indexOf("portal:admin:shareToPublic")}f.d(r,"l",function(){return y});f.d(r,"h",function(){return B});f.d(r,"m",function(){return C});f.d(r,"k",function(){return c});f.d(r,"i",function(){return a});f.d(r,"j",function(){return b});f.d(r,"g",function(){return p});f.d(r,"b",function(){return q});f.d(r,
"a",function(){return t});f.d(r,"c",function(){return m});f.d(r,"d",function(){return k});f.d(r,"e",function(){return l});f.d(r,"f",function(){return h});var e,d=f(63),g=f(148),u=f(5),x=f(58);!function(z){z.user="org_user";z.accountUser="account_user";z.publisher="org_publisher";z.accountPublisher="account_publisher";z.admin="org_admin";z.accountAdmin="account_admin";z.viewer="iAAAAAAAAAAAAAAA";z.dataEditor="iBBBBBBBBBBBBBBB"}(e||(e={}));var y=function(z){var D=z.items;return!!z.user.orgId&&D.every(function(E){return E.isOrgItem})},
B=function(z){var D=z.items,E=z.user,A=z.portal;z=D[0];var F=Object(x.c)(z,E),H=b(E),I=n(E,A);if(H=Object(x.a)(z,E)&&-1<(E.privileges||[]).indexOf("portal:admin:updateItems")&&!H)H=!c(A)||t(E)||q(E)||A.canSharePublic&&m(E)||n(E,A);A=H;return!(z.portal.isPortal&&z.owner!==E.username&&-1<z.owner.indexOf("esri_"))&&(F||A||y({items:D,user:E})&&I)},C=function(z,D){return Object(d.a)(Object(g.a)(z))(D)}},54:function(v,r,f){f.d(r,"b",function(){return p});f.d(r,"a",function(){return q});f.d(r,"c",function(){return t});
v=f(16);r=f(215);var c=f(208),a=f(137),b=f(210);f=f(207);var p=function(m){return!m.gbState},q={config:f.b,parameters:c.b,groups:a.f,ui:b.b,utils:r.b},t=Object(v.combineReducers)({config:f.a,parameters:c.a,groups:a.b,ui:b.a,utils:r.a})},58:function(v,r,f){function c(m,n){return(null==m?void 0:m.owner)===n.username}function a(m,n){var k;if(!(k=c(m,n)))if(Object(p.a)(m.isAdmin))k=!!m.isAdmin;else{k=m.owner;var l="admin"===m.itemControl;k=!(m.portal.isPortal&&!c(m,n)&&l&&-1<k.indexOf("esri_")&&0>["esri_livingatlas",
"esri_demographics","esri_boundaries"].indexOf(k))&&l}return k}function b(m,n){return a(m,n)||"update"===m.itemControl}f.d(r,"d",function(){return c});f.d(r,"c",function(){return a});f.d(r,"a",function(){return b});f.d(r,"b",function(){return t});var p=f(5),q=f(51),t=function(m){var n=m.user,k=m.items;m=m.portal;return Object(q.l)({items:k,user:n})&&Object(q.h)({items:k,user:n,portal:m})&&Object(q.g)(n)&&k[0].itemOwner||n}},61:function(v,r,f){function c(B){var C=B.groupIds,z=B.shareLevelOptions,D=
B.restUrl,E=B.request,A=B.unshare;return t.Promise.all(B.items.map(function(F,H){return new t.Promise(function(I,L){E(D+"/content/items/"+(F.itemId||F.id)+"/"+(A?"unshare":"share"),{method:"post",query:Object(p.a)({f:"json",groups:C,confirmItemControl:!0},z||{})}).then(I,L)})}))["catch"](function(F){throw F;})}function a(B,C){return new t.Promise(function(z,D){var E,A=null===(E=B.helpMap)||void 0===E?void 0:E.m;A?z(A):C(B.restUrl+"/portals/helpmap",{query:{f:"json",format:"json"}}).then(function(F){var H;
z(null===(H=F.data.helpMap)||void 0===H?void 0:H.m)},D)})}f.d(r,"h",function(){return n});f.d(r,"g",function(){return k});f.d(r,"b",function(){return l});f.d(r,"e",function(){return h});f.d(r,"d",function(){return e});f.d(r,"f",function(){return x});f.d(r,"c",function(){return y});f.d(r,"a",function(){return a});var b,p=f(0),q=f(30),t=f(28);v=f(26);var m=f(58),n=function(B){var C=B.items,z=B.groups,D=B.restUrl,E=B.request,A=B.portalUser;if(0===C.length)return t.Promise.resolve();var F=Object(q.b)(z);
return C.every(function(H){return Object(m.d)(H,A)})?new t.Promise(function(H,I){if(!z||0===z.length)return H();var L={f:"json",items:Object(q.b)(C),groups:F};E(D+"/content/users/"+A.username+"/unshareItems",{method:"post",query:L}).then(H,I)}):c({items:C,groupIds:F,restUrl:D,request:E,unshare:!0})},k=function(B){var C=B.items,z=B.groups,D=B.restUrl,E=B.request,A=B.portalUser,F=B.selectedOptions;B=B.ignoreShareLevel;if(0===C.length)return t.Promise.resolve();if(!B&&!F)throw"Selected options must be provided unless share level is ignored.";
var H=Object(q.b)(z),I=B?{}:d(F);return C.every(function(L){return Object(m.d)(L,A)})?new t.Promise(function(L,J){E(D+"/content/users/"+A.username+"/shareItems",{method:"post",query:Object(p.a)({f:"json",items:Object(q.b)(C),groups:H,confirmItemControl:!0},I)}).then(function(O){O=O.data;O.results.every(function(P){return P.success})?L():J(O)},J)}):c({items:C,groupIds:H,shareLevelOptions:I,restUrl:D,request:E})},l=function(B){return B.reduce(function(C,z){return Object(p.g)(Object(p.g)([],C),z)},[])},
h=function(B){return 1<Object.keys(B).filter(function(C){return"total"!==C&&0<B[C]}).length},e=function(B){return Object.keys(B).filter(function(C){return"total"!==C}).reduce(function(C,z){return B[z]===B.total?z:C})},d=function(B){return h(B)?{}:g[e(B)]},g=((b={})[v.b["public"]]={org:!1,everyone:!0},b[v.b.org]={org:!0,everyone:!1},b[v.b["private"]]={org:!1,everyone:!1},b[v.b.shared]={org:!1,everyone:!1},b),u="Location Tracking Service;Location Tracking View;IoTFeed;IoTRealTimeAnalytic;IoTBigDataAnalytic;IoTFeatureLayer;IoTMapImageLayer;IoTStreamLayer;Administrative Report;EditExtensionIndoorsSpaces".split(";"),
x=function(B){var C,z,D=B.typeKeywords,E=B.type;E=u.some(function(F){return-1<D.indexOf(F)})&&"Real Time Analytic"!==E&&"Big Data Analytic"!==E;var A=!(null===(C=null==B?void 0:B.portal)||void 0===C?0:C.isPortal)&&"Image Service"===B.type&&-1<(null===(z=B.url)||void 0===z?void 0:z.indexOf("://iservices"))&&-1<B.url.indexOf("arcgis.com");B="Knowledge Graph"===B.type;return E||A||B},y=function(B,C,z){return z&&C["public"]===C.total?B.filter(function(D){return-1<D.typeKeywords.indexOf("DeveloperBasemap")}):
[]}},63:function(v,r,f){function c(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return function(p){return a.reduceRight(function(q,t){return t(q)},p)}}f.d(r,"a",function(){return c})},68:function(v,r,f){var c;f.d(r,"a",function(){return c});(function(a){a.LOADING_GROUPS="LOADING_GROUPS";a.LOAD_GROUPS_SUCCESS="LOAD_GROUPS_SUCCESS";a.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL";a.SELECT_GROUPS="SELECT_GROUPS";a.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS";a.DESELECT_GROUPS="DESELECT_GROUPS";a.REVERT_GROUPS=
"REVERT_GROUPS";a.CLEAR_SELECTION="CLEAR_SELECTION";a.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS";a.SET_HAS_GROUPS="SET_HAS_GROUPS"})(c||(c={}))},78:function(v,r,f){f.d(r,"a",function(){return m});f.d(r,"b",function(){return n});var c=f(63);v=f(5);var a=f(123),b=f(122),p=f(117),q=f(121),t=f(120),m=function(k,l,h){return Object(c.a)(Object(t.a)(k),Object(q.a)(k),Object(p.a)(l),Object(b.a)(k),Object(a.a)(k))(h)},n=Object(c.a)(Object(v.e)("patchedDescription"),Object(v.e)("thumbURI"),Object(v.e)("iconURI"),
Object(v.e)("displayName"),Object(v.e)("badges"))},83:function(v,r,f){var c;f.d(r,"a",function(){return c});(function(a){a.SET_SEARCH_STRING="SET_SEARCH_STRING";a.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER";a.CHANGE_SORT_FIELD="CHANGE_SORT_FIELD";a.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER";a.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER";a.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER";a.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER";a.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER";
a.SET_USERS="SET_USERS";a.CLEAR_FILTERS="CLEAR_FILTERS"})(c||(c={}))},985:function(v,r,f){f.r(r);f.d(r,"ShareWrapper",function(){return l});var c=f(0),a=f(354),b=f.n(a),p=f(16),q=f(30);v=f(386);var t=f.n(v);v=f(336);var m=f.n(v),n=f(139),k=f(61);f.d(r,"unshareItems",function(){return k.h});f.d(r,"shareItems",function(){return k.g});f.d(r,"getShimmedRequest",function(){return q.u});f.d(r,"initialState",function(){return a.initialState});var l=function(){function h(e,d){this.options=d;this.listener=
this.listener.bind(this);this.renderContainer=document.createElement("div");this.renderContainer.id="share-wrapper";e.appendChild(this.renderContainer);var g=m()(a.initialState),u=m()(d.initialState);g=t()(g,u,function(C,z){if(Array.isArray(C)&&z)return z});u=d.initialState&&d.initialState.resources&&d.initialState.resources.items;var x=4===d.apiVersion?d.request:Object(q.u)(d.request),y=4===d.apiVersion?d.portal:Object(c.a)(Object(c.a)({},d.portal),{restUrl:d.portal.portalUrl.slice(0,-1),credential:d.portal.user&&
d.portal.user.credential?d.portal.user.credential:void 0}),B=4===d.apiVersion?window.require.toUrl("esri/images/portal"):window.require.toUrl("esri/css/images/item_type_icons");this.initialState=Object(c.a)(Object(c.a)({},g),{resources:Object(c.a)(Object(c.a)({},g.resources),{portalUser:d.portalUser,items:u}),utilities:Object(c.a)(Object(c.a)({},g.utilities),{request:x,portal:y,iconDir:B}),gbState:Object(c.a)(Object(c.a)({},g.gbState),{utils:Object(c.a)(Object(c.a)({},g.gbState.utils),{request:x,
portal:y,portalUser:d.portalUser}),config:Object(c.a)(Object(c.a)({},g.gbState.config),{groupsPerPage:g.config.groupsPerPage,withinShare:!0,enableFiltering:!0,hasTrustedOrgs:g.config.hasTrustedOrgs})})});this.store=Object(p.applyMiddleware)(p.thunk,Object(p.addListener)(this.listener))(p.createStore)(a.reducers,this.initialState);this.dispatch(Object(n.g)());this.projector=Object(p.createProjector)(this.store,function(C){return C(b.a,{key:"share"})},this.renderContainer)}return h.prototype.remove=
function(){document&&document.documentElement&&document.documentElement.classList.remove("overflow-hidden");this.renderContainer&&this.renderContainer.parentElement&&this.renderContainer.parentElement.removeChild(this.renderContainer)},h.prototype.dispatch=function(e){this.store&&this.store.dispatch(e)},h.prototype.getState=function(){return this.store?this.store.getState():this.initialState},h.prototype.listener=function(e,d){this.options.listener&&this.options.listener(e,d)},h}()},99:function(v,
r,f){function c(m,n){if(null==m?0:m.length)for(var k=void 0,l=0;l<m.length;l++)if(n(k=m[l]))return k}function a(m){return m.filter(function(n){return 0<n.length})}function b(m,n,k){var l=[];return n.forEach(function(h){(k?h[k].toLowerCase()===m.toLowerCase():h.toLowerCase()===m.toLowerCase())?l.unshift(h):l.push(h)}),l}f.d(r,"e",function(){return p});f.d(r,"f",function(){return q});f.d(r,"c",function(){return c});f.d(r,"b",function(){return a});f.d(r,"a",function(){return t});f.d(r,"d",function(){return b});
v=f(15);var p=function(m,n,k){return k.indexOf(m)===n},q=Object(v.a)(function(m,n){var k={};return n.filter(function(l){return!k[l[m]]&&(k[l[m]]=!0,!0)})}),t=function(m,n){return m.length===n.length&&m.reduce(function(k,l){return k&&-1<n.indexOf(l)},!0)}}})})},"arcgis-components/Share/index":function(){define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/i18n!../Share/nls/resources ../Loaders/LoaderBars ../GroupBrowser/index ../Modals/Overlay".split(" "),function(K,G,w,v,r,f){return function(c){function a(p){if(b[p])return b[p].exports;
var q=b[p]={i:p,l:!1,exports:{}};return c[p].call(q.exports,q,q.exports,a),q.l=!0,q.exports}var b={};return a.m=c,a.c=b,a.d=function(p,q,t){a.o(p,q)||Object.defineProperty(p,q,{enumerable:!0,get:t})},a.r=function(p){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"});Object.defineProperty(p,"__esModule",{value:!0})},a.t=function(p,q){if((1&q&&(p=a(p)),8&q)||4&q&&"object"==typeof p&&p&&p.__esModule)return p;var t=Object.create(null);if(a.r(t),
Object.defineProperty(t,"default",{enumerable:!0,value:p}),2&q&&"string"!=typeof p)for(var m in p)a.d(t,m,function(n){return p[n]}.bind(null,m));return t},a.n=function(p){var q=p&&p.__esModule?function(){return p["default"]}:function(){return p};return a.d(q,"a",q),q},a.o=function(p,q){return Object.prototype.hasOwnProperty.call(p,q)},a.p="",a(a.s=877)}({0:function(c,a,b){function p(e,d){function g(){this.constructor=e}if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+
" is not a constructor or null");l(e,d);e.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}function q(e,d){var g={},u;for(u in e)Object.prototype.hasOwnProperty.call(e,u)&&0>d.indexOf(u)&&(g[u]=e[u]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(u=Object.getOwnPropertySymbols(e);x<u.length;x++)0>d.indexOf(u[x])&&Object.prototype.propertyIsEnumerable.call(e,u[x])&&(g[u[x]]=e[u[x]])}return g}function t(e,d,g,u){var x,y=arguments.length,B=3>y?d:null===u?
u=Object.getOwnPropertyDescriptor(d,g):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(e,d,g,u);else for(var C=e.length-1;0<=C;C--)(x=e[C])&&(B=(3>y?x(B):3<y?x(d,g,B):x(d,g))||B);return 3<y&&B&&Object.defineProperty(d,g,B),B}function m(e,d,g,u){return new (g||(g=Promise))(function(x,y){function B(D){try{z(u.next(D))}catch(E){y(E)}}function C(D){try{z(u["throw"](D))}catch(E){y(E)}}function z(D){var E;D.done?x(D.value):(E=D.value,E instanceof g?E:new g(function(A){A(E)})).then(B,
C)}z((u=u.apply(e,d||[])).next())})}function n(e,d){function g(z){return function(D){return function(E){if(u)throw new TypeError("Generator is already executing.");for(;C;)try{if(u=1,x&&(y=2&E[0]?x["return"]:E[0]?x["throw"]||((y=x["return"])&&y.call(x),0):x.next)&&!(y=y.call(x,E[1])).done)return y;switch(x=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return C.label++,{value:E[1],done:!1};case 5:C.label++;x=E[1];E=[0];continue;case 7:E=C.ops.pop();C.trys.pop();continue;default:if(!(y=
C.trys,(y=0<y.length&&y[y.length-1])||6!==E[0]&&2!==E[0])){C=0;continue}if(3===E[0]&&(!y||E[1]>y[0]&&E[1]<y[3]))C.label=E[1];else if(6===E[0]&&C.label<y[1])C.label=y[1],y=E;else if(y&&C.label<y[2])C.label=y[2],C.ops.push(E);else{y[2]&&C.ops.pop();C.trys.pop();continue}}E=d.call(e,C)}catch(A){E=[6,A],x=0}finally{u=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([z,D])}}var u,x,y,B,C={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return B={next:g(0),"throw":g(1),
"return":g(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B}function k(e,d){for(var g=0,u=d.length,x=e.length;g<u;g++,x++)e[x]=d[g];return e}b.d(a,"d",function(){return p});b.d(a,"a",function(){return h});b.d(a,"f",function(){return q});b.d(a,"c",function(){return t});b.d(a,"b",function(){return m});b.d(a,"e",function(){return n});b.d(a,"g",function(){return k});var l=function(e,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,u){g.__proto__=
u}||function(g,u){for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&(g[x]=u[x])})(e,d)},h=function(){return(h=Object.assign||function(e){for(var d,g=1,u=arguments.length;g<u;g++)for(var x in d=arguments[g])Object.prototype.hasOwnProperty.call(d,x)&&(e[x]=d[x]);return e}).apply(this,arguments)};Object.create;Object.create},101:function(c,a,b){b.d(a,"a",function(){return q});b.d(a,"b",function(){return t});var p=b(0),q=function(m){return m?m.urlKey?location.protocol+"//"+m.urlKey+"."+m.customBaseUrl:
location.protocol+"//"+m.portalHostname:""},t=function(m){return Object(p.a)(Object(p.a)({},m),{baseUrl:q(m)})}},117:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){var n=Object(p.a),k=Object(p.a)({},m),l=m.type,h=m.typeKeywords?m.typeKeywords:[],e=null==l?void 0:l.toLowerCase(),d=!1,g=!1,u=l=!1;if("ogcfeatureserver"===e)h="featureshosted";else if(0<(null==e?void 0:e.indexOf("service"))||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||
"wfs"===e){var x=-1<h.indexOf("Hosted Service");"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(u=-1<h.indexOf("Table"),d=-1<h.indexOf("Route Layer"),g=-1<h.indexOf("Markup"),h=(l=-1!==h.indexOf("Spatiotemporal"))&&u?"spatiotemporaltable":u?"table":d?"routelayer":g?"markup":l?"spatiotemporal":x?"featureshosted":"features"):"map service"===e||"wms"===e||"wmts"===e?h=x||-1<h.indexOf("Tiled")||"wmts"===e?"maptiles":"mapimages":"scene service"===e?h=-1<h.indexOf("Line")?"sceneweblayerline":
-1<h.indexOf("3DObject")?"sceneweblayermultipatch":-1<h.indexOf("Point")?"sceneweblayerpoint":-1<h.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<h.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<h.indexOf("Polygon")?"sceneweblayerpolygon":-1<h.indexOf("Building")?"sceneweblayerbuilding":-1<h.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===e?(l=-1<h.indexOf("Elevation 3D Layer"),h=-1<h.indexOf("Tiled Imagery"),h=l?"elevationlayer":h?"tiledimagerylayer":"imagery"):h="stream service"===
e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&-1<h.indexOf("Web Tool")?"tool":"layers"}else h="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?-1<h.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===e&&-1<(null==h?void 0:h.indexOf("configurableApp"))?"instantapps":"web mapping application"===e||"mobile application"===
e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&-1<h.indexOf("ArcGIS Pro")||"explorer map"===e&&-1<h.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"administrative report"===
e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"arcpad package"===e||"code sample"===
e||"form"===e||"document link"===e||"vector tile package"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&-1<h.indexOf("Explorer Mapping Application")||-1<h.indexOf("Document")?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e||"raster function template"===
e||"deep learning package"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"tile package"===e?"tilepackage":"storymap"===e?"storymap":"storymap theme"===e?"storymaptheme":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":
"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"hub initiative"===e?"hubinitiative":"hub page"===e?"hubpage":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e||"data store"===e?"datastorecollection":"image collection"===e?"imagecollection":"desktop style"===e?"desktopstyle":"style"===e?"style":"dashboard"===e?"dashboard":"feed"===e?"feed":"real time analytic"===e?"realtimeanalytics":"big data analytic"===
e?"bigdataanalytics":"notebook"===e?"notebook":"notebook code snippets"===e?"notebookcodesnippets":"maps";return n(k,{iconURI:t+"/"+h+"16.png"})})},120:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){var n=Object(p.a),k=Object(p.a)({},m),l,h,e="notebook"!==(null===(l=m.type)||void 0===l?void 0:l.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"===(null===(h=m.type)||void 0===h?void 0:h.toLowerCase())&&(e="notebook-code-snippet-thumb.png");
h=t.baseUrl+"/home/js/arcgisonline/css/images/"+e;l=(m.thumbnail&&(h=t.restUrl+"/content/items/"+m.id+"/info/"+m.thumbnail+(t.credential?"?token\x3d"+t.credential.token:"")),h);return n(k,{thumbURI:l})})},121:function(c,a,b){b.d(a,"a",function(){return t});var p=b(0);c=b(15);var q=function(m,n){return n.description?n.description.replace(/src=('|")js\/jsapi\/esri\//g,function(k){return"src\x3d"+('"'===k[4]?'"':"'")+m.baseUrl+"/home/js/jsapi/esri/"}):void 0},t=Object(c.a)(function(m,n){return Object(p.a)(Object(p.a)({},
n),{patchedDescription:q(m,n)})})},122:function(c,a,b){b.d(a,"a",function(){return m});var p=b(0),q=b(124);c=b(15);var t=b(58),m=Object(c.a)(function(n,k){var l=Object(p.a),h=Object(p.a)({},k),e,d=k.type,g=k.typeKeywords||[],u=d,x=(null==n?void 0:n.portalUser)||(null==n?void 0:n.user);if("Feature Service"===d||"Feature Collection"===d){if(u=-1<g.indexOf("Table")?"Table":-1<g.indexOf("Route Layer")?"Route Layer":-1<g.indexOf("Markup")?"Markup":"Feature Layer",x&&Object(t.d)(k,x)&&-1<(null==g?void 0:
g.indexOf("Hosted Service")))g=(null===(e=null===document||void 0===document?void 0:document.documentElement)||void 0===e?void 0:e.lang)||"en",u=u+" ("+(q.a[g]||q.a[g.split("-")[0]]||q.a.en)+")"}else"Image Service"===d?(e=-1<g.indexOf("Elevation 3D Layer"),g=-1<g.indexOf("Tiled Imagery"),u=e?"Elevation Layer":g?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===d?u="Scene Layer":"Scene Package"===d?u="Scene Layer Package":"Stream Service"===d?u="Feature Layer":"Geocoding Service"===d?u="Locator":
"Microsoft Powerpoint"===d?u="Microsoft PowerPoint":"OGCFeatureServer"===d?u="OGC Feature Layer":"GeoJson"===d?u="GeoJSON":"Globe Service"===d?u="Globe Layer":"Vector Tile Service"===d?u="Tile Layer":"netCDF"===d?u="NetCDF":"Map Service"===d?u=-1===g.indexOf("Spatiotemporal")&&(-1<g.indexOf("Hosted Service")||-1<g.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":d&&-1<d.toLowerCase().indexOf("add in")?u=d.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===d?u="Big Data File Share":"Web Mapping Application"===
d&&(null==g?0:g.includes("configurableApp"))?u="Instant App":"Data Store"===d&&(g.includes("cloudStore_amazon")||g.includes("cloudStore_azure")?u+=" (Cloud)":(g.includes("fileShare")||g.includes("hdfs")||g.includes("hive")||g.includes("bigDataFileShare")&&g.includes("dataStore"))&&(u+=" (Big Data File Share)"));return l(h,{displayName:u})})},123:function(c,a,b){b.d(a,"a",function(){return t});var p=b(0);c=b(15);var q=function(m,n){var k=[],l=m.typeKeywords?m.typeKeywords:[];return m.contentStatus&&
("org_authoritative"===m.contentStatus||"public_authoritative"===m.contentStatus?k.push("authoritative"):"deprecated"===m.contentStatus&&k.push("deprecated")),m.origin&&k.push("collaboration"),m.groupDesignations&&-1<m.groupDesignations.indexOf("livingatlas")&&k.push("livingAtlas"),-1<l.indexOf("Requires Credits")?k.push("premium"):-1<l.indexOf("Requires Subscription")&&k.push("subscriber"),-1<l.indexOf("Public Data Collection")&&((null==n?void 0:n.portalUser)||(null==n?void 0:n.user))&&k.push("publicDataCollection"),
"Solution"===m.type&&-1<m.typeKeywords.indexOf("ArcGIS Solution")&&k.push("solution"),n.isPortal&&"Web Mapping Application"===m.type&&(-1<m.typeKeywords.indexOf("Story Map")&&k.push("retiredStoryMap"),function(h){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(e){var d,
g=-1<e.indexOf(".html");return-1<(null===(d=h.url)||void 0===d?void 0:d.indexOf("/apps/"+e+(g?"":"/")))})}(m)&&k.push("retiredApp")),k},t=Object(c.a)(function(m,n){return Object(p.a)(Object(p.a)({},n),{badges:q(n,m)})})},124:function(c,a,b){b.d(a,"a",function(){return p});var p={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",
he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",
vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},128:function(c,a,b){b.d(a,"a",function(){return q});b.d(a,"b",function(){return t});var p=b(0);c=b(15);var q=function(m,n){var k;return n.thumbnail&&(k=m.restUrl+"/community/groups/"+n.id+"/info/"+n.thumbnail+(m.credential?"?token\x3d"+m.credential.token:"")),k},t=Object(c.a)(function(m,n){return Object(p.a)(Object(p.a)({},n),{thumbURI:q(m,n)})})},137:function(c,a,b){b.d(a,"a",function(){return p});
b.d(a,"d",function(){return m});b.d(a,"c",function(){return n});b.d(a,"e",function(){return k});b.d(a,"f",function(){return l});var p,q=b(0),t=b(25);!function(h){h.LOADING="loading";h.LOADED="loaded";h.FAILED="failed"}(p||(p={}));var m=function(h){var e=h.selectedGroups,d=h.selectorItems;return 0===d.length?Object.keys(e).map(function(g){return e[g].group}):Object.keys(e).filter(function(g){return k(e[g],d)}).map(function(g){return e[g].group})},n=function(h){var e=h.initialSelectedGroups,d=h.selectedGroups,
g=Object.keys(d).map(function(u){return d[u].group.id});return Object.keys(e).map(function(u){return e[u].group.id}).filter(function(u){return 0>g.indexOf(u)}).map(function(u){return e[u].group})},k=function(h,e){return!h.selectedByIds||h.selectedByIds.length===e.length},l={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},status:p.LOADING,total:0,hasGroups:!0};a.b=function(h,e){switch(void 0===h&&(h=l),e.type){case t.a.DESELECT_GROUPS:return Object(q.a)(Object(q.a)({},
h),{selectedGroups:e.payload.reduce(function(u,x){var y=x.id;u[y];return Object(q.f)(u,["symbol"==typeof y?y:y+""])},h.selectedGroups)});case t.a.REVERT_GROUPS:return e.payload?Object(q.a)(Object(q.a)({},h),{selectedGroups:e.payload.reduce(function(u,x){var y;if(h.initialSelectedGroups[x.id])return Object(q.a)(Object(q.a)({},u),((y={})[x.id]=h.initialSelectedGroups[x.id],y));y=x.id;u[y];return Object(q.f)(u,["symbol"==typeof y?y:y+""])},h.selectedGroups)}):Object(q.a)(Object(q.a)({},h),{selectedGroups:Object(q.a)({},
h.initialSelectedGroups)});case t.a.SELECT_GROUPS:var d=h.selectorItems.map(function(u){return u.id});return Object(q.a)(Object(q.a)({},h),{selectedGroups:e.payload.reduce(function(u,x){var y;return Object(q.a)(Object(q.a)({},u),((y={})[x.group.id]=Object(q.a)({selectedByIds:d},x),y))},h.selectedGroups)});case t.a.SET_INITIAL_GROUPS:var g=e.payload.reduce(function(u,x){var y;return Object(q.a)(Object(q.a)({},u),((y={})[x.group.id]=x,y))},{});return Object(q.a)(Object(q.a)({},h),{selectedGroups:g,
initialSelectedGroups:Object(q.a)({},g)});case t.a.SET_SELECTOR_ITEMS:return Object(q.a)(Object(q.a)({},h),{selectorItems:e.payload});case t.a.CLEAR_SELECTION:return Object(q.a)(Object(q.a)({},h),{selectedGroups:{}});case t.a.LOADING_GROUPS:return Object(q.a)(Object(q.a)({},h),{status:p.LOADING});case t.a.LOAD_GROUPS_SUCCESS:return Object(q.a)(Object(q.a)({},h),{displayGroups:e.payload.results,total:e.payload.total,status:p.LOADED});case t.a.LOAD_GROUPS_FAIL:return Object(q.a)(Object(q.a)({},h),{displayGroups:[],
status:p.FAILED});case t.a.SET_HAS_GROUPS:return Object(q.a)(Object(q.a)({},h),{hasGroups:e.payload});default:return h}}},139:function(c,a,b){function p(ba,ka){var la=ka(),ma=la.utilities.request,ha=la.resources;la=ha.selectedOptions;var Z=ha.selectedOptionsDirty;ha=Object(y.b)(ha.items);la=Z&&la["public"]===la.total;ba(H(D.a.LOADING));0<ha.length&&la?Object(y.a)({items:ha,request:ma}).then(function(W){W.length?(W=W.some(function(Q){return-1===Q.typeKeywords.indexOf("Public Data Collection")}),ba(A(W?
D.c.PUBLIC_DATA_COLLECTION_DISABLED:D.c.PUBLIC_DATA_COLLECTION_ENABLED))):ba(q)})["catch"](function(){ba(q)}):ba(q)}function q(ba,ka){var la=ka(),ma=la.utilities,ha=ma.portal,Z=ma.request,W=ma.onComplete;ma=la.resources;var Q=ma.items,ia=ma.selectedOptions,R=ma.portalUser;ma=la.gbState.groups;la=ma.selectedGroups;ma=ma.initialSelectedGroups;var S=Object(d.d)({selectedGroups:la,selectorItems:Q});la=Object(d.c)({initialSelectedGroups:ma,selectedGroups:la});var N=[];Object(g.h)({items:Q,groups:la,portalUser:R,
restUrl:ha.restUrl,request:Z}).then(function(){return Object(g.g)({items:Q,groups:S,portalUser:R,request:Z,restUrl:ha.restUrl,selectedOptions:ia})})["catch"](function(X){X.results?N=N.concat(Object(B.a)(X.results,Q)):X.message&&N.push({error:X})}).then(function(){return ba(L)}).then(function(){var X=ka().resources,aa=X.items,ea=X.dependentItems,Y=ea.needGroupSharingUpdate,T=ea.notEditable,ca=ea.premium,M=ea.needPubliclyEditableWarning,U=ea.needEditableWarning,da=ea.needDataCollectionEnabled,ja=ea.needGroupDependentApplicationWarning,
na=ea.needBDFSDatastoreUpdate,oa=X.selectedOptions,ra=(X=X.selectedOptionsDirty)&&oa["public"]===oa.total;0!==ea.needShareLevelUpdate.length||0!==Y.length||0!==T.length||0!==ca.length||0!==M.length||0!==U.length||0!==da.length||0!==ja.length&&ra||0!==na.length||0!==Object(g.c)(aa,oa,X).length?ba({type:k.SET_CURRENT_VIEW,payload:D.a.DEPENDENT_ITEM_CONFIRMATION}):W(0<N.length?{errors:N,selectedOptions:oa}:{selectedOptions:oa})})["catch"](console.error)}function t(ba){return ba.filter(function(ka){return-1===
ka.typeKeywords.indexOf("bigDataFileShare")})}function m(ba,ka){var la=ka(),ma=la.utilities,ha=ma.portal,Z=ma.request,W=ma.onComplete;ma=la.resources;var Q=ma.dependentItems,ia=Q.needBDFSDatastoreUpdate,R=Q.needShareLevelUpdate,S=Q.needGroupSharingUpdate,N=Q.needEditableWarning,X=ma.selectedOptions;ma=ma.portalUser;Q=la.gbState.groups;la=Q.selectedGroups;var aa=Q.selectorItems;if(0!==ia.length||0!==R.length||0!==S.length||0!==N.length){Q=Object(g.g)({items:t(ia),groups:[],portalUser:ma,request:Z,
restUrl:ha.restUrl,selectedOptions:X});var ea=Object(g.g)({items:Object(l.g)(Object(l.g)([],t(R)),N),groups:[],portalUser:ma,request:Z,restUrl:ha.restUrl,selectedOptions:X});ha=Object(g.g)({items:S,groups:Object(d.d)({selectedGroups:la,selectorItems:aa}),portalUser:ma,request:Z,restUrl:ha.restUrl,selectedOptions:X,ignoreShareLevel:!0});u.Promise.all([Q,ea,ha]).then(function(){var Y=Object(l.g)(Object(l.g)(Object(l.g)(Object(l.g)([],ia),R),S),N),T=Y.map(function(ca){return ca.id});Y=Y.filter(function(ca,
M){return T.indexOf(ca.id)===M});W({dependentItems:Y,selectedOptions:X})})["catch"](function(Y){throw Y;})}else W({selectedOptions:X})}function n(ba,ka){switch(ka().resources.currentMiniDlg){case D.c.OPEN_GROUP_BROWSER:ba(E(D.b["public"]));ba(H(D.a.GROUP_BROWSER));break;case D.c.REVERT_SHARE_LEVEL:ba({type:k.SET_INITIAL_SHARE_LEVEL});ba(Object(e.c)());break;case D.c.REVERT_GROUPS:ba(E(D.b["public"]));ba(Object(e.c)());break;case D.c.EDITABLE_LAYERS:ba(q);break;case D.c.SET_SHARE_TO_PRIVATE:ba(E(D.b["private"]));
ba(Object(e.a)());break;case D.c.PUBLIC_DATA_COLLECTION_DISABLED:ba(H(D.a.SHARE));break;case D.c.PUBLIC_DATA_COLLECTION_ENABLED:ba(q)}ba({type:k.SET_MINI_DIALOG,payload:D.c.NONE})}b.d(a,"a",function(){return k});b.d(a,"k",function(){return A});b.d(a,"g",function(){return F});b.d(a,"j",function(){return H});b.d(a,"d",function(){return p});b.d(a,"i",function(){return m});b.d(a,"h",function(){return n});b.d(a,"c",function(){return O});b.d(a,"b",function(){return P});b.d(a,"e",function(){return fa});
b.d(a,"f",function(){return V});var k,l=b(0),h=b(177),e=b(144),d=b(137),g=b(61),u=b(28),x=b(335),y=b(194),B=b(379),C=b(51),z=b(58),D=b(26);!function(ba){ba.SET_SELECTED_SHARE_LEVEL="SET_SELECTED_SHARE_LEVEL";ba.SET_INITIAL_SHARE_LEVEL="SET_INITIAL_SHARE_LEVEL";ba.SET_CURRENT_VIEW="SET_CURRENT_VIEW";ba.SET_AND_FOCUS_VIEW="SET_AND_FOCUS_VIEW";ba.SET_DEPENDENT_ITEMS="SET_DEPENDENT_ITEMS";ba.SET_MINI_DIALOG="SET_MINI_DIALOG";ba.SET_SHARE_MODE="SET_SHARE_MODE";ba.SET_USER_TYPE="SET_USER_TYPE";ba.SET_HELP_MAP=
"SET_HELP_MAP"}(k||(k={}));var E=function(ba){return{type:k.SET_SELECTED_SHARE_LEVEL,payload:ba}},A=function(ba){return{type:k.SET_MINI_DIALOG,payload:ba}},F=function(){return function(ba,ka){var la=ka(),ma=la.utilities,ha=ma.portal,Z=ma.request;ma=la.resources.items;la=I(la);var W=ha.urlKey||ha.isPortal?D.e.ORG:D.e.PUBLIC;ba({type:k.SET_INITIAL_SHARE_LEVEL});ba({type:k.SET_SHARE_MODE,payload:la});ba({type:k.SET_USER_TYPE,payload:W});ba(Object(h.a)({selectorItems:ma,anySelectorItemsPrivate:0<ka().resources.selectedOptions[D.b["private"]],
shareMode:la,userType:W})).then(function(){return Object(g.a)(ha,Z)}).then(function(Q){ba({type:k.SET_HELP_MAP,payload:Q});ba(H(D.a.SHARE))})}},H=function(ba){return function(ka){ka({type:k.SET_CURRENT_VIEW,payload:ba})}},I=function(ba){var ka=ba.resources,la=ka.items;ka=ka.portalUser;ba=ba.utilities.portal;var ma=la[0];if(Object(z.d)(ma,ka))return D.d.DEFAULT;ma=!ma.orgId||ma.orgId===ka.orgId;return Object(C.h)({items:la,user:ka,portal:ba})&&ma?D.d.ADMIN:D.d.GROUP},L=function(ba,ka){var la=ka(),
ma=la.resources,ha=ma.selectedOptions,Z=la.utilities,W=Z.portal,Q=Z.request,ia=Z.iconDir;la=la.gbState.groups;var R=la.selectedGroups,S=la.selectorItems;ma=ma.items.map(function(N){return Object(x.b)({item:N,portal:W,request:Q,iconDir:ia})});return u.Promise.all(ma).then(function(N){return J({dependentItems:N,selectedGroups:R,selectorItems:S,selectedOptions:ha,request:Q,portal:W})}).then(function(N){ba({type:k.SET_DEPENDENT_ITEMS,payload:N})})},J=function(ba){var ka=ba.dependentItems,la=ba.selectedGroups,
ma=ba.selectorItems,ha=ba.selectedOptions,Z=ba.request,W=ba.portal;return new u.Promise(function(Q,ia){var R=Object(g.b)(ka).filter(function(X){return X}),S=R.map(function(X){return X.id}),N=R.filter(function(X,aa){return S.indexOf(X.id)===aa});u.Promise.all(N.map(function(X){return Object(x.a)({item:X,selectedOptions:ha,selectedGroups:Object(d.d)({selectedGroups:la,selectorItems:ma}),request:Z,portal:W})})).then(function(X){var aa=[],ea=[],Y=[],T=[],ca=[],M=[],U=[],da=[],ja=[],na=!Object(g.e)(ha)&&
Object(g.d)(ha)===D.b["public"];X.forEach(function(oa,ra){var ua=N[ra];if(oa.premium)T.push(ua);else if(oa.groupDependentApplication)da.push(ua);else{if(!oa.bdfsDatastore)return na&&oa.editable&&Object(y.c)(ua)&&ua.isUpdateLayer?ua.access===D.b["public"]?void M.push(ua):-1<ua.typeKeywords.indexOf("Public Data Collection")?void ca.push(ua):void U.push(ua):void((oa.needsShareLevelUpdate||oa.needsGroupSharingUpdate)&&(oa.editable?(oa.needsShareLevelUpdate&&ea.push(ua),oa.needsGroupSharingUpdate&&aa.push(ua)):
Y.push(ua)));ja.push(ua)}});Q({needGroupSharingUpdate:aa,needShareLevelUpdate:ea,notEditable:Y,premium:T,needPubliclyEditableWarning:M,needEditableWarning:ca,needDataCollectionEnabled:U,needGroupDependentApplicationWarning:da,needBDFSDatastoreUpdate:ja})})["catch"](function(X){throw X;})})},O=function(ba,ka){var la=ka(),ma=la.gbState.groups.initialSelectedGroups,ha=la.resources.selectedOptions;la.config.userType===D.e.PUBLIC&&0<ha["private"]&&0<Object.keys(ma).length?ba(A(D.c.REVERT_GROUPS)):ba(Object(e.c)())},
P=function(ba,ka){var la=ka(),ma=la.resources,ha=ma.portalUser;ma=ma.selectedOptions;Object(C.k)(la.utilities.portal)||Object(C.a)(ha)||!Object(g.e)(ma)&&Object(g.d)(ma)!==D.b["private"]?ba(H(D.a.GROUP_BROWSER)):ba(A(D.c.OPEN_GROUP_BROWSER))},fa=function(ba,ka){var la=ka(),ma=la.resources,ha=ma.portalUser;ma=ma.items;var Z=la.gbState.groups.selectedGroups;Object(C.k)(la.utilities.portal)||Object(C.b)(ha)||!Object(y.d)({items:ma,groupDatas:Object.keys(Z).map(function(W){return Z[W]})})?ba({type:k.SET_INITIAL_SHARE_LEVEL}):
ba(A(D.c.REVERT_SHARE_LEVEL))},V=function(ba){return function(ka,la){var ma=la(),ha=ma.resources.portalUser,Z=ma.gbState.groups.selectedGroups;!Object(C.k)(ma.utilities.portal)&&!Object(C.b)(ha)&&ba===D.b["private"]&&0<Object.keys(Z).length?ka(A(D.c.SET_SHARE_TO_PRIVATE)):ka(E(ba))}}},144:function(c,a,b){b.d(a,"d",function(){return n});b.d(a,"e",function(){return k});b.d(a,"b",function(){return l});b.d(a,"c",function(){return h});b.d(a,"a",function(){return e});b.d(a,"f",function(){return d});var p=
b(0),q=b(181),t=b(163),m=b(68),n=function(g){return 1<g.length&&Object(t.a)(),{type:m.a.SELECT_GROUPS,payload:g.map(function(u){return{group:Object(q.c)(u)}})}},k=function(g){return{type:m.a.SET_INITIAL_GROUPS,payload:g.map(function(u){return Object(p.a)(Object(p.a)({},u),{group:Object(q.c)(u.group)})})}},l=function(g){return 1<g.length&&Object(t.b)(),{type:m.a.DESELECT_GROUPS,payload:g}},h=function(g){return{type:m.a.REVERT_GROUPS,payload:g}},e=function(){return Object(t.c)(),{type:m.a.CLEAR_SELECTION}},
d=function(g){return{type:m.a.SET_SELECTOR_ITEMS,payload:g}}},148:function(c,a,b){b.d(a,"a",function(){return q});var p=b(0);c=b(15);var q=Object(c.a)(function(t,m){var n=Object(p.a),k=Object(p.a)({},m);var l=m.thumbnail?t.restUrl+"/community/users/"+m.username+"/info/"+m.thumbnail+(t.credential?"?token\x3d"+t.credential.token:""):void 0;return n(k,{thumbURI:l})})},15:function(c,a,b){function p(t){return function n(){for(var k=this,l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return l.length>=
t.length?t.call.apply(t,Object(q.g)([this],l)):function(){for(var e=[],d=0;d<arguments.length;d++)e[d]=arguments[d];return n.call.apply(n,Object(q.g)(Object(q.g)([k],l),e))}}}b.d(a,"a",function(){return p});var q=b(0)},159:function(c,a,b){b.d(a,"b",function(){return g});b.d(a,"a",function(){return x});var p=b(0),q=b(181),t=b(30),m=b(163),n=b(54),k=b(68),l=b(28),h=b(61),e=b(38),d=b(26),g=function(F,H){u(H()).then(function(I){var L=H();L=Object(n.b)(L)?L:L.gbState;var J=L.utils;L.ui.focus.focusSelectAll&&
Object(m.c)();F({type:k.a.LOAD_GROUPS_SUCCESS,payload:Object(p.a)(Object(p.a)({},I),{results:I.results.map(function(O){return Object(q.b)(J.portal,O)})})})})["catch"](function(I){var L=H();(Object(n.b)(L)?L:L.gbState).ui.focus.focusSelectAll&&Object(m.c)();F({type:k.a.LOAD_GROUPS_FAIL,payload:I})})},u=function(F){F=Object(n.b)(F)?F:F.gbState;var H=F.utils,I=H.request,L=H.portal,J=F.config;H=J.groupsPerPage;var O=J.withinShare,P=(J.withinAppConfig,F.parameters);J=P.filter;P=P.sort;var fa=F.ui.page.currentPageNumber,
V={q:A(F),num:H,sortField:P.field,sortOrder:P.order,start:(fa-1)*H+1};return O&&(V.searchUserAccess="groupMember",V.searchUserName=J.currentUsername),J.designationFilter!==e.b.orgSettings||C(L)?new l.Promise(function(ba,ka){Object(t.g)(I,L,V).then(ba,ka)}):new l.Promise(function(ba){ba({query:V.q,total:0,start:1,num:100,nextStart:-1,results:[]})})},x=function(F){var H=F.user;F=F.state;F=Object(n.b)(F)?F:F.gbState;var I=F.utils,L=I.request,J=I.portal;F=Object(p.a)(Object(p.a)({},F),{parameters:Object(p.a)(Object(p.a)({},
F.parameters),{filter:Object(p.a)(Object(p.a)({},F.parameters.filter),{currentUsername:H.username})})});var O={q:A(F),num:100,searchUserAccess:"groupMember",searchUserName:H.username};return(new l.Promise(function(P,fa){return Object(t.g)(L,J,O).then(function(V){if(-1!==V.nextStart){var ba=Math.ceil(V.total/100)-1,ka=[V.results];V=function(ma){ka.push(new l.Promise(function(ha,Z){var W=100*(ma+1)+1;Object(t.g)(L,J,Object(p.a)(Object(p.a)({},O),{start:W})).then(function(Q){ha(Q.results)},Z)}))};for(var la=
0;la<ba;la++)V(la);l.Promise.all(ka).then(function(ma){P(Object(h.b)(ma))})}else P(V.results)},fa)}))["catch"](function(P){throw P;})},y=function(F){var H,I=F.shareMode,L=F.currentUsername,J=F.portalUser;F=F.userGroups;var O=[];switch(F&&F.forEach(function(P){var fa,V=null===(fa=P.userMembership)||void 0===fa?void 0:fa.memberType;!P.isViewOnly||"owner"!==V&&"admin"!==V||O.push(P.id)}),O.length&&(H="(isviewonly:false OR "+O.join(" OR ")+")"),I){case d.d.DEFAULT:return H||"(owner:"+L+" OR isviewonly:false)";
case d.d.GROUP:return"owner:"+L+" -capabilities:updateitemcontrol";case d.d.ADMIN:return J.username===L?"(isviewonly:false OR owner:"+J.username+") -capabilities:updateitemcontrol":"(owner:"+L+" OR isviewonly:false)";default:return""}},B=function(F,H){0!==(null==F?void 0:F.indexOf("id:"))||-1<H.indexOf(F)||H.push(F)},C=function(F){var H,I,L,J,O,P=[],fa=[F.featuredItemsGroupQuery,F.basemapGalleryGroupQuery,F.templatesGroupQuery,F["2DStylesGroupQuery"],F.stylesGroupQuery,F.analysisLayersGroupQuery,
F.galleryTemplatesGroupQuery];if(F.hasModernHomePageEnabled){var V=(null===(I=null===(H=F.homePageConfig)||void 0===H?void 0:H.content)||void 0===I?void 0:I.filter(function(ba){return"gallery"===ba.type&&!!ba.groupId}))||[];0<V.length&&V.forEach(function(ba){B("id:"+ba.groupId,P)})}else fa.push(F.homePageFeaturedContent);return fa.forEach(function(ba){B(ba,P)}),null===(L=F.featuredGroups)||void 0===L||L.forEach(function(ba){(ba=ba.id)&&B("id:"+ba,P)}),null===(O=null===(J=F.userDefaults)||void 0===
J?void 0:J.groups)||void 0===O||O.forEach(function(ba){B("id:"+ba,P)}),0<P.length?"("+P.join(" OR ")+")":""},z=function(F){var H=F.portal;switch(F.designationFilter){case e.b.openData:return"isopendata:true";case e.b.updateGroups:return"capabilities:updateitemcontrol";case e.b.distributed:return"capabilities:distributed";case e.b.administrative:return"isleavingdisallowed:true";case e.b.orgSettings:return C(H)||"";default:return""}},D=function(F){var H=F.portal,I=F.username,L=F.currentUsername,J=F.userType,
O=F.withinAppConfig;I=F.shareMode===d.d.ADMIN&&L||I;O=H.isPortal&&O?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":"";switch(F.ownerFilter){case e.d.itemOwner:return"owner:"+I+" "+O;case e.d.inOrg:return"-owner:"+I+" orgid:"+H.id+" "+O;case e.d.outsideOrg:return J===d.e.PUBLIC?"-owner:"+I+" "+O:"(orgid: [0 TO \\{]) -orgid:"+H.id+" "+O;default:return O}},E=function(F){return F?"created: ["+(H=F).start+" TO "+H.end+"]":"";var H},A=function(F){var H=F.utils,I=H.portal;H=H.portalUser;
var L=F.config,J=L.shareMode,O=L.userType,P=L.withinAppConfig,fa=L.hasIndoorsSpaces;F=F.parameters.filter;var V=F.designationFilter,ba=F.membershipFilter,ka=F.dateCreatedFilter,la=F.currentUsername,ma=F.ownerFilter;return[L.baseQ+" "+F.searchString,y({shareMode:J,currentUsername:la,portalUser:H,userGroups:L.userGroups}),fa?"-capabilities:distributed":z({designationFilter:V,portal:I}),fa?"membershipaccess:org":ba?"anyOrg"===ba?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:"+
ba:"",E(ka),D({ownerFilter:ma,portal:I,username:H.username,currentUsername:la,shareMode:J,userType:O,withinAppConfig:P})].filter(function(ha){return ha}).join(" ").trim()}},16:function(c,a){c.exports=K},163:function(c,a,b){function p(){m("gb__select-all-input")}function q(){m("gb__clear-selection-btn")}function t(){setTimeout(function(){var n=document.querySelector(".gcard-gcc__container");n&&(n=n.querySelector(".btn-2018check__input"))&&n.focus()},50)}function m(n){setTimeout(function(){var k=document.querySelector("#"+
n);k&&k.focus()},50)}b.d(a,"c",function(){return p});b.d(a,"a",function(){return q});b.d(a,"b",function(){return t})},170:function(c,a){var b=function(){return this}();try{b=b||(new Function("return this"))()}catch(p){"object"==typeof window&&(b=window)}c.exports=b},175:function(c,a,b){var p;b.d(a,"a",function(){return p});(p||(p={})).TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"},177:function(c,a,b){b.d(a,"a",function(){return B});var p=b(0),q=b(54),t=b(144),m=b(159),n=b(313),k=b(314),l=b(186),h=b(30),
e=b(28),d=b(25),g=b(61),u=b(68),x=b(192),y=b(58),B=function(z){return function(D,E){var A=E(),F=(Object(q.b)(A)?A:A.gbState).utils,H=F.portal;F=F.portalUser;if(!(z&&z.selectorItems&&0<z.selectorItems.length))return D(m.b),e.Promise.resolve();var I=z.selectorItems,L=z.userType;D({type:d.a.SET_SHARE_MODE,payload:z.shareMode});D({type:d.a.SET_USER_TYPE,payload:L});D(Object(t.f)(I));H=Object(y.b)({user:F,items:I,portal:H});var J=F.username===H.username?[F]:[F,H];return 1<J.length&&!z.anySelectorItemsPrivate&&
D({type:d.a.ENABLE_USER_TOGGLE}),D(Object(l.c)(J)),D(Object(l.h)(H.username)),void 0===A.config.hasTrustedOrgs&&D(n.a),Object(k.a)(E()).then(function(O){return O&&D({type:x.a.USER_DETAILS_LOADED,payload:O.groups}),D(m.b),e.Promise.all(J.map(function(P){return Object(m.a)({user:P,state:E()})})).then(function(P){P=Object(g.b)(P);var fa=P.map(function(V){return V.id});P=P.filter(function(V,ba){return fa.indexOf(V.id)===ba});return D(C(P))})})}},C=function(z){return function(D,E){return new e.Promise(function(A,
F){var H=E();H=Object(q.b)(H)?H:H.gbState;var I=H.utils,L=I.portal,J=I.request,O=Object(h.b)(H.groups.selectorItems);H=Object(h.a)(z).map(function(P){return Object(h.i)({itemIds:O,groupIds:Object(h.b)(P),portal:L,request:J})});e.Promise.all(H).then(function(P){var fa=P.reduce(function(ba,ka){return Object(p.a)(Object(p.a)({},ba),ka)},{}),V=Object.keys(fa);P=z.filter(function(ba){return 0<=V.indexOf(ba.id)}).map(function(ba){return{group:ba,selectedByIds:fa[ba.id].items.map(function(ka){return ka.itemId})}});
D({type:u.a.SET_HAS_GROUPS,payload:0<z.length});D(Object(t.e)(P));A()})["catch"](F)})}}},181:function(c,a,b){b.d(a,"b",function(){return m});b.d(a,"c",function(){return n});b.d(a,"a",function(){return k});var p=b(63);c=b(5);var q=b(99),t=b(128),m=function(l,h){return Object(p.a)(Object(t.b)(l))(h)},n=Object(p.a)(Object(c.e)("thumbURI")),k=function(l){var h=l.initialSelectedByIds;return!Object(q.a)(l.selectedBy.map(function(e){return e.id}),h)}},186:function(c,a,b){b.d(a,"b",function(){return q});
b.d(a,"g",function(){return t});b.d(a,"h",function(){return m});b.d(a,"e",function(){return n});b.d(a,"f",function(){return k});b.d(a,"d",function(){return l});b.d(a,"c",function(){return h});b.d(a,"a",function(){return e});var p=b(83),q=function(d){return{type:p.a.SET_SEARCH_STRING,payload:d}},t=function(d){return{type:p.a.UPDATE_OWNER_FILTER,payload:d}},m=function(d){return{type:p.a.UPDATE_USERNAME_FILTER,payload:d}},n=function(d){return{type:p.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:d}},k=function(d){return{type:p.a.UPDATE_MEMBERSHIP_FILTER,
payload:d}},l=function(d){return{type:p.a.UPDATE_CREATED_ON_FILTER,payload:{section:d.section,created:d.created}}},h=function(d){return{type:p.a.SET_USERS,payload:d}},e=function(d){return{type:p.a.CLEAR_FILTERS,payload:d}}},189:function(c,a){function b(){throw Error("setTimeout has not been defined");}function p(){throw Error("clearTimeout has not been defined");}function q(y){if(h===setTimeout)return setTimeout(y,0);if((h===b||!h)&&setTimeout)return h=setTimeout,setTimeout(y,0);try{return h(y,0)}catch(B){try{return h.call(null,
y,0)}catch(C){return h.call(this,y,0)}}}function t(){u&&d&&(u=!1,d.length?g=d.concat(g):x=-1,g.length&&m())}function m(){if(!u){var y=q(t);u=!0;for(var B=g.length;B;){d=g;for(g=[];++x<B;)d&&d[x].run();x=-1;B=g.length}d=null;u=!1;(function(C){if(e===clearTimeout)return clearTimeout(C);if((e===p||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(C);try{e(C)}catch(z){try{return e.call(null,C)}catch(D){return e.call(this,C)}}})(y)}}function n(y,B){this.fun=y;this.array=B}function k(){}var l=c.exports=
{};try{var h="function"==typeof setTimeout?setTimeout:b}catch(y){h=b}try{var e="function"==typeof clearTimeout?clearTimeout:p}catch(y){e=p}!0;var d,g=[],u=!1,x=-1;l.nextTick=function(y){var B=Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)B[C-1]=arguments[C];g.push(new n(y,B));1!==g.length||u||q(m)};n.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions={};l.on=k;l.addListener=k;l.once=
k;l.off=k;l.removeListener=k;l.removeAllListeners=k;l.emit=k;l.prependListener=k;l.prependOnceListener=k;l.listeners=function(y){return[]};l.binding=function(y){throw Error("process.binding is not supported");};l.cwd=function(){return"/"};l.chdir=function(y){throw Error("process.chdir is not supported");};l.umask=function(){return 0}},192:function(c,a,b){var p;b.d(a,"a",function(){return p});(p||(p={})).USER_DETAILS_LOADED="USER_LOADED"},194:function(c,a,b){function p(e){return"Feature Service"===
e.type&&-1<e.typeKeywords.indexOf("Hosted Service")}function q(e){return e.filter(function(d){return d.access!==k.b["public"]&&p(d)})}function t(e){var d=e.request;e=e.items.map(function(g){return function(u,x){return new m.Promise(function(y){p(u)?Object(n.v)(x,u.url+"/layers").then(function(B){B=B.layers;y((null==B?void 0:B.reduce(function(C,z){return C||z&&-1<z.capabilities.indexOf("Editing")},!1))&&u)},function(){return y(!1)}):y(!1)})}(g,d)});return m.Promise.all(e).then(function(g){return g.filter(function(u){return u})})}
b.d(a,"d",function(){return l});b.d(a,"c",function(){return p});b.d(a,"b",function(){return q});b.d(a,"a",function(){return t});var m=b(28),n=b(30),k=b(26),l=function(e){var d=e.groupDatas;return e.items.filter(function(g){g=g.access?g.access:g.sharing&&g.sharing.access;return g===k.b["private"]||g===k.b.shared}).reduce(function(g,u){return g||h({item:u,groupDatas:d})},!1)},h=function(e){var d=e.item;return e.groupDatas.reduce(function(g,u){return g||!!u.selectedByIds&&0<=u.selectedByIds.indexOf(d.id)},
!1)}},204:function(c,a,b){var p;b.d(a,"a",function(){return p});(function(q){q.SET_PAGE="SET_PAGE";q.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN";q.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"})(p||(p={}))},205:function(c,a){c.exports=v},207:function(c,a,b){b.d(a,"b",function(){return t});var p=b(0),q=b(25),t={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};a.a=function(m,n){switch(void 0===m&&(m=
t),n.type){case q.a.ENABLE_USER_TOGGLE:return Object(p.a)(Object(p.a)({},m),{enableUserToggle:!0});case q.a.SET_SHARE_MODE:return Object(p.a)(Object(p.a)({},m),{shareMode:n.payload});case q.a.SET_USER_TYPE:return Object(p.a)(Object(p.a)({},m),{userType:n.payload});case q.a.TRUSTED_ORGS_LOADED:return Object(p.a)(Object(p.a)({},m),{hasTrustedOrgs:0<n.payload.length});case q.a.USER_DETAILS_LOADED:return Object(p.a)(Object(p.a)({},m),{userGroups:n.payload});case q.a.SET_SELECTOR_ITEMS:var k=!!n.payload.find(function(l){var h;
return-1<(null===(h=null==l?void 0:l.typeKeywords)||void 0===h?void 0:h.indexOf("EditExtensionIndoorsSpaces"))});return Object(p.a)(Object(p.a)({},m),{hasIndoorsSpaces:k});default:return m}}},208:function(c,a,b){b.d(a,"b",function(){return q});c=b(16);var p=b(209);b=b(38);var q={sort:p.b,filter:b.f};a.a=Object(c.combineReducers)({sort:p.a,filter:b.e})},209:function(c,a,b){b.d(a,"b",function(){return t});var p=b(0),q=b(25),t={field:"title",order:"asc"},m={relevance:"desc",title:"asc",created:"desc",
owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};a.a=function(n,k){switch(void 0===n&&(n=t),k.type){case q.a.CHANGE_SORT_FIELD:return Object(p.a)(Object(p.a)({},n),{field:k.payload,order:m[k.payload]});case q.a.CHANGE_SORT_ORDER:return Object(p.a)(Object(p.a)({},n),{order:k.payload});default:return n}}},210:function(c,a,b){b.d(a,"b",function(){return m});c=b(16);var p=b(211),q=b(212),t=b(213);b=b(214);var m={page:p.b,sort:q.b,focus:t.b,filter:b.b};a.a=Object(c.combineReducers)({page:p.a,
sort:q.a,focus:t.a,filter:b.a})},211:function(c,a,b){b.d(a,"b",function(){return t});var p=b(0),q=b(25),t={currentPageNumber:1};a.a=function(m,n){switch(void 0===m&&(m=t),n.type){case q.a.CLEAR_FILTERS:case q.a.UPDATE_USERNAME_FILTER:case q.a.UPDATE_OWNER_FILTER:case q.a.UPDATE_CREATED_ON_FILTER:case q.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(p.a)(Object(p.a)({},m),{currentPageNumber:1});case q.a.SET_PAGE:return Object(p.a)(Object(p.a)({},m),{currentPageNumber:n.payload});case q.a.LOAD_GROUPS_SUCCESS:return Object(p.a)(Object(p.a)({},
m),{currentPageNumber:n.payload.num>n.payload.total?1:Math.ceil(n.payload.start/n.payload.num)});case q.a.LOAD_GROUPS_FAIL:return Object(p.a)(Object(p.a)({},m),{currentPageNumber:1});default:return m}}},212:function(c,a,b){b.d(a,"b",function(){return q});var p=b(25),q=!1;a.a=function(t,m){switch(void 0===t&&(t=q),m.type){case p.a.CHANGE_SORT_FIELD:case p.a.CHANGE_SORT_ORDER:case p.a.TOGGLE_SORT_DROPDOWN:return!t;default:return t}}},213:function(c,a,b){b.d(a,"b",function(){return t});var p=b(0),q=
b(25),t={focusSelectAll:!1};a.a=function(m,n){switch(n.type){case q.a.LOAD_GROUPS_FAIL:case q.a.LOAD_GROUPS_SUCCESS:return Object(p.a)(Object(p.a)({},m),{focusSelectAll:!1});case q.a.CHANGE_SORT_FIELD:case q.a.CHANGE_SORT_ORDER:return Object(p.a)(Object(p.a)({},m),{focusSelectAll:!0});default:return m}}},214:function(c,a,b){b.d(a,"b",function(){return m});var p=b(0),q=b(25),t=b(38),m={expanded:!1};a.a=function(n,k){switch(k.type){case q.a.CLEAR_FILTERS:switch(k.payload){case void 0:case t.a.DATE_CREATED:return Object(p.a)(Object(p.a)({},
n),{dateCreatedSelectedSection:void 0});default:return n}case q.a.TOGGLE_EXPANDED_FILTERS:return Object(p.a)(Object(p.a)({},n),{expanded:!n.expanded});case q.a.UPDATE_CREATED_ON_FILTER:return Object(p.a)(Object(p.a)({},n),{dateCreatedSelectedSection:k.payload.section});default:return n}}},215:function(c,a,b){b.d(a,"b",function(){return q});var p=b(101),q={portal:{},portalUser:{},request:function(t){return null}};a.a=function(t,m){return void 0===t&&(t=q),m.type,t.portal.portalHostname&&!t.portal.baseUrl&&
(t.portal.baseUrl=Object(p.a)(t.portal)),t}},249:function(c,a,b){var p=b(128);a.a=function(q,t){var m=q.group,n=q.stacked,k=q.portal;n={"gcard-thumbnail__container":!0,"gcard-thumbnail__svg-container":!m.thumbURI,"gcard-thumbnail--stacked":void 0!==n&&n,"gcard-thumbnail--transparent":q.transparent};if(m.thumbnail&&!m.thumbURI&&k&&(m.thumbURI=Object(p.a)(k,m)),m.thumbURI)return t("img",{src:m.thumbURI,classes:n,alt:m.title});k=!(!m.title.charAt(0)||!m.title.charAt(0).match(/^\w+$/));return t("div",
{key:"group-thumbnail-"+m.id,classes:n},t("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"65",height:"65",viewBox:"0 0 65 65"},t("path",{fill:"#"+m.id.substr(m.id.length-6),d:"M0 0h65v65H0z"}),t("path",{fill:"#ccc",d:"M0 0h65v65H0z","fill-opacity":"0.8"}),k?t("text",{x:"50%",y:/(MSIE |Trident\/|Edge\/)/.test(navigator.userAgent)?"70%":"50%",fill:"white","dominant-baseline":"central","text-anchor":"middle"},m.title.slice(0,1).toUpperCase()):t("path",{fill:"#FFF",d:"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"})))}},
25:function(c,a,b){b.d(a,"a",function(){return n});var p;c=b(0);a=b(204);var q=b(68),t=b(175),m=b(83);b=b(192);!function(k){k.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE";k.SET_SHARE_MODE="SET_SHARE_MODE";k.SET_USER_TYPE="SET_USER_TYPE"}(p||(p={}));var n=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},a.a),q.a),m.a),p),t.a),b.a)},258:function(c,a){c.exports=r},26:function(c,a,b){var p,q,t,m,n;b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});b.d(a,"c",function(){return t});
b.d(a,"e",function(){return m});b.d(a,"d",function(){return n});(function(k){k.org="org";k["private"]="private";k["public"]="public";k.shared="shared"})(p||(p={}));(function(k){k.LOADING="LOADING";k.SHARE="SHARE";k.GROUP_BROWSER="GROUP_BROWSER";k.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"})(q||(q={}));(function(k){k.SET_SHARE_TO_PRIVATE="SET_SHARE_TO_PRIVATE";k.REVERT_SHARE_LEVEL="REVERT_SHARE_LEVEL";k.REVERT_GROUPS="REVERT_GROUPS";k.EDITABLE_LAYERS="EDITABLE_LAYERS";k.OPEN_GROUP_BROWSER=
"OPEN_GROUP_BROWSER";k.NONE="NONE";k.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED";k.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"})(t||(t={}));(function(k){k.ORG="ORG";k.PUBLIC="PUBLIC"})(m||(m={}));(function(k){k.DEFAULT="DEFAULT";k.ADMIN="ADMIN";k.GROUP="GROUP"})(n||(n={}))},28:function(c,a,b){(function(p,q){c.exports=function(){function t(){var W=setTimeout;return function(){return W(m,1)}}function m(){for(var W=0;W<D;W+=2)(0,O[W])(O[W+1]),O[W]=void 0,O[W+
1]=void 0;D=0}function n(W,Q){var ia=this,R=new this.constructor(l);void 0===R[la]&&C(R);var S=ia._state;if(S){var N=arguments[S-1];F(function(){return B(S,R,N,ia._result)})}else x(ia,R,W,Q);return R}function k(W){if(W&&"object"==typeof W&&W.constructor===this)return W;var Q=new this(l);return e(Q,W),Q}function l(){}function h(W,Q,ia){Q.constructor===W.constructor&&ia===n&&Q.constructor.resolve===k?function(R,S){1===S._state?g(R,S._result):2===S._state?u(R,S._result):x(S,void 0,function(N){return e(R,
N)},function(N){return u(R,N)})}(W,Q):void 0===ia?g(W,Q):"function"==typeof ia?function(R,S,N){F(function(X){var aa=!1,ea=function(Y,T,ca,M){try{Y.call(T,ca,M)}catch(U){return U}}(N,S,function(Y){aa||(aa=!0,S!==Y?e(X,Y):g(X,Y))},function(Y){aa||(aa=!0,u(X,Y))},X._label);!aa&&ea&&(aa=!0,u(X,ea))},R)}(W,Q,ia):g(W,Q)}function e(W,Q){if(W===Q)u(W,new TypeError("You cannot resolve a promise with itself"));else if(R=typeof(ia=Q),null===ia||"object"!==R&&"function"!==R)g(W,Q);else{ia=void 0;try{ia=Q.then}catch(S){return void u(W,
S)}h(W,Q,ia)}var ia,R}function d(W){W._onerror&&W._onerror(W._result);y(W)}function g(W,Q){void 0===W._state&&(W._result=Q,W._state=1,0!==W._subscribers.length&&F(y,W))}function u(W,Q){void 0===W._state&&(W._state=2,W._result=Q,F(d,W))}function x(W,Q,ia,R){var S=W._subscribers,N=S.length;W._onerror=null;S[N]=Q;S[N+1]=ia;S[N+2]=R;0===N&&W._state&&F(y,W)}function y(W){var Q=W._subscribers,ia=W._state;if(0!==Q.length){for(var R=void 0,S=void 0,N=W._result,X=0;X<Q.length;X+=3)R=Q[X],S=Q[X+ia],R?B(ia,
R,S,N):S(N);W._subscribers.length=0}}function B(W,Q,ia,R){var S="function"==typeof ia,N=void 0,X=void 0,aa=!0;if(S){try{N=ia(R)}catch(ea){aa=!1,X=ea}if(Q===N)return void u(Q,new TypeError("A promises callback cannot return that same promise."))}else N=R;void 0!==Q._state||(S&&aa?e(Q,N):!1===aa?u(Q,X):1===W?g(Q,N):2===W&&u(Q,N))}function C(W){W[la]=ma++;W._state=void 0;W._result=void 0;W._subscribers=[]}var z=Array.isArray?Array.isArray:function(W){return"[object Array]"===Object.prototype.toString.call(W)},
D=0,E=void 0,A=void 0,F=function(W,Q){O[D]=W;O[D+1]=Q;2===(D+=2)&&(A?A(m):ka())},H="undefined"!=typeof window?window:void 0,I=H||{};I=I.MutationObserver||I.WebKitMutationObserver;var L="undefined"==typeof self&&void 0!==p&&"[object process]"==={}.toString.call(p),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=Array(1E3),P,fa,V,ba,ka=void 0;L?ka=function(){return p.nextTick(m)}:I?(fa=0,V=new I(m),ba=document.createTextNode(""),V.observe(ba,
{characterData:!0}),ka=function(){ba.data=fa=++fa%2}):J?((P=new MessageChannel).port1.onmessage=m,ka=function(){return P.port2.postMessage(0)}):ka=void 0===H?function(){try{var W=Function("return this")().require("vertx");return void 0!==(E=W.runOnLoop||W.runOnContext)?function(){E(m)}:t()}catch(Q){return t()}}():t();var la=Math.random().toString(36).substring(2),ma=0,ha=function(){function W(Q,ia){this._instanceConstructor=Q;this.promise=new Q(l);this.promise[la]||C(this.promise);z(ia)?(this.length=
ia.length,this._remaining=ia.length,this._result=Array(this.length),0===this.length?g(this.promise,this._result):(this.length=this.length||0,this._enumerate(ia),0===this._remaining&&g(this.promise,this._result))):u(this.promise,Error("Array Methods must be provided an Array"))}return W.prototype._enumerate=function(Q){for(var ia=0;void 0===this._state&&ia<Q.length;ia++)this._eachEntry(Q[ia],ia)},W.prototype._eachEntry=function(Q,ia){var R=this._instanceConstructor,S=R.resolve;if(S===k){var N=S=void 0,
X=!1;try{S=Q.then}catch(aa){X=!0,N=aa}S===n&&void 0!==Q._state?this._settledAt(Q._state,ia,Q._result):"function"!=typeof S?(this._remaining--,this._result[ia]=Q):R===Z?(R=new R(l),X?u(R,N):h(R,Q,S),this._willSettleAt(R,ia)):this._willSettleAt(new R(function(aa){return aa(Q)}),ia)}else this._willSettleAt(S(Q),ia)},W.prototype._settledAt=function(Q,ia,R){var S=this.promise;void 0===S._state&&(this._remaining--,2===Q?u(S,R):this._result[ia]=R);0===this._remaining&&g(S,this._result)},W.prototype._willSettleAt=
function(Q,ia){var R=this;x(Q,void 0,function(S){return R._settledAt(1,ia,S)},function(S){return R._settledAt(2,ia,S)})},W}(),Z=function(){function W(Q){this[la]=ma++;this._result=this._state=void 0;this._subscribers=[];if(l!==Q){if("function"!=typeof Q)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof W)(function(ia,R){try{R(function(S){e(ia,S)},function(S){u(ia,S)})}catch(S){u(ia,S)}})(this,Q);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}return W.prototype["catch"]=function(Q){return this.then(null,Q)},W.prototype["finally"]=function(Q){var ia=this.constructor;return"function"==typeof Q?this.then(function(R){return ia.resolve(Q()).then(function(){return R})},function(R){return ia.resolve(Q()).then(function(){throw R;})}):this.then(Q,Q)},W}();return Z.prototype.then=n,Z.all=function(W){return(new ha(this,W)).promise},Z.race=function(W){var Q=this;return z(W)?new Q(function(ia,R){for(var S=W.length,N=0;N<S;N++)Q.resolve(W[N]).then(ia,
R)}):new Q(function(ia,R){return R(new TypeError("You must pass an array to race."))})},Z.resolve=k,Z.reject=function(W){var Q=new this(l);return u(Q,W),Q},Z._setScheduler=function(W){A=W},Z._setAsap=function(W){F=W},Z._asap=F,Z.polyfill=function(){var W=void 0;if(void 0!==q)W=q;else if("undefined"!=typeof self)W=self;else try{W=Function("return this")()}catch(R){throw Error("polyfill failed because global object is unavailable in this environment");}var Q=W.Promise;if(Q){var ia=null;try{ia=Object.prototype.toString.call(Q.resolve())}catch(R){}if("[object Promise]"===
ia&&!Q.cast)return}W.Promise=Z},Z.Promise=Z,Z}()}).call(this,b(189),b(170))},291:function(c,a,b){var p=b(0);c=b(16);var q=b(634);b=function(t){function m(){return null!==t&&t.apply(this,arguments)||this}return Object(p.d)(m,t),m.prototype.render=function(n){var k=this.props,l=k.items,h=k.text,e=k.title,d=k.portal;k=k.error;return 0<l.length&&n("div",{key:"need-update-list",classes:{"dependent-items":!0,"dependent-items--error":k}},n("h4",{"class":"dependent-items__title"},e.replace("${num}",l.length.toString())),
h&&n("p",{"class":"dependent-items__count"},h),n("ul",{"class":"dependent-items__list"},l.map(function(g){return n(q.a,{key:g.id,item:g,portal:d})})))},m}(c.Component);a.a=b},294:function(c,a){c.exports=f},30:function(c,a,b){function p(O){return O.reduce(function(P,fa){return fa&&fa.relatedItems?P.concat(fa.relatedItems.map(function(V){return V})):P},[])}function q(O,P,fa){return O(P,{query:Object(n.a)({f:"json"},fa)}).then(function(V){return V.data})}function t(O,P){void 0===P&&(P=100);for(var fa=
[],V=0;V<Math.ceil(O.length/P);V++)fa.push(O.slice(V*P,(V+1)*P));return fa.filter(function(ba){return 0<ba.length})}function m(O){var P=O.itemIds,fa=O.request,V=O.groupIds,ba=O.portal.restUrl+"/content/itemsgroups";return new k.Promise(function(ka,la){fa(ba,{method:"get",query:{f:"json",items:P,groups:V}}).then(function(ma){ka(ma.data)},la)})}b.d(a,"u",function(){return l});b.d(a,"n",function(){return h});b.d(a,"h",function(){return e});b.d(a,"e",function(){return d});b.d(a,"f",function(){return g});
b.d(a,"j",function(){return u});b.d(a,"o",function(){return x});b.d(a,"l",function(){return y});b.d(a,"k",function(){return B});b.d(a,"m",function(){return C});b.d(a,"c",function(){return z});b.d(a,"d",function(){return D});b.d(a,"r",function(){return E});b.d(a,"s",function(){return A});b.d(a,"t",function(){return F});b.d(a,"g",function(){return H});b.d(a,"p",function(){return I});b.d(a,"q",function(){return L});b.d(a,"v",function(){return q});b.d(a,"a",function(){return t});b.d(a,"i",function(){return m});
b.d(a,"b",function(){return J});var n=b(0),k=b(28),l=function(O){return function(P,fa){return O({url:P,content:fa.query},{usePost:"post"===fa.method}).then(function(V){return{data:V}})}},h=function(O,P,fa){return q(O,P.restUrl+"/portals/self",{culture:fa,"default":!0})},e=function(O,P,fa){return q(O,P.restUrl+"/content/items/"+fa+"/data")},d=function(O,P,fa,V){return q(O,P.restUrl+"/community/groups",Object(n.a)({q:fa},V))},g=function(O,P,fa){return q(O,P.restUrl+"/community/groups/"+fa+"/categorySchema")},
u=function(O,P,fa){return q(O,P.restUrl+"/portals/"+(fa||P.id)+"/categorySchema")},x=function(O,P){return q(O,P.restUrl+"/portals/"+P.id+"/servers")},y=function(O,P,fa,V){return O(P.restUrl+"/portals/"+(fa||P.id)+"/collaborationsSummary",V)},B=function(O,P,fa,V){return O(P.restUrl+"/portals/"+(fa||P.id)+"/collaboratedItems",V)},C=function(O,P,fa){return q(O,location.protocol+"//"+P.portalHostname+"/sharing/rest/portals/"+(fa||"self"))},z=function(O,P,fa){return O(P.restUrl+"/community/groups",{query:{f:"json",
q:"orgid:"+P.id+" AND access:public",num:100,start:fa||1,sortField:"title",sortOrder:"asc"}}).then(function(V){return V.data.total>V.data.start+V.data.num?z(O,P,V.data.start+V.data.num).then(function(ba){return Object(n.a)(Object(n.a)({},ba),{data:Object(n.a)(Object(n.a)({},ba.data),{results:V.data.results.concat(ba.data.results)})})}):V})},D=function(O,P,fa,V){return O(P.restUrl+"/community/users/"+fa+"/provisionedListings",{query:{f:"json",num:100,start:V||1}}).then(function(ba){var ka=k.Promise.all(ba.data.provisionedListings.filter(function(ma){return ma.itemId}).map(function(ma){return(new k.Promise(function(ha,
Z){O(P.restUrl+"/content/items/"+ma.itemId,{method:"get",query:{f:"json"}}).then(function(W){ha(W.data)},Z)}))["catch"](function(ha){return 0})})),la=ba.data.provisionedListings.map(function(ma){return q(O,P.restUrl+"/content/items/"+(ma.id||ma.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(ha){return ha},function(ha){})});return ba.data.total>ba.data.start+ba.data.num?D(O,P,fa,ba.data.start+ba.data.num).then(function(ma){return k.Promise.all([ka].concat(la)).then(function(ha){return ha[0].results.concat(p(ha.slice(1))).concat(ma)})}):
k.Promise.all([ka].concat(la)).then(function(ma){return ma[0].filter(function(ha){return void 0!==ha}).concat(p(ma.slice(1)))})})},E=function(O,P,fa){return q(O,P.restUrl+"/community/users/"+(fa||P.user.username))},A=function(O,P,fa){return q(O,P.restUrl+"/content/users/"+(fa||P.user.username),{num:1})},F=function(O,P,fa){return q(O,P.restUrl+"/content/groups/"+fa)},H=function(O,P,fa){return q(O,P.restUrl+"/community/groups",fa)},I=function(O,P){return q(O,P.restUrl+"/portals/self/settings")},L=function(O,
P){return q(O,P.restUrl+"/portals/self/trustedOrgs",{num:100})},J=function(O,P){return void 0===P&&(P=","),O.map(function(fa){return fa.id}).join(P)}},312:function(c,a,b){function p(m){return t[m.vnodeSelector]&&(!m.properties||!m.properties.disabled&&-1!==m.properties.tabindex)||m.properties&&m.properties.tabindex&&-1<parseInt(m.properties.tabindex,10)}var q=b(0),t={a:!0,area:!0,input:!0,select:!0,textarea:!0,button:!0,iframe:!0};c=function(m){function n(k){k=m.call(this,k)||this;return k.registerFirstFocusable=
k.registerFirstFocusable.bind(k),k.registerLastFocusable=k.registerLastFocusable.bind(k),k.handleFocusChange=k.handleFocusChange.bind(k),k}return Object(q.d)(n,m),n.prototype.render=function(){var k=this.findFirstFocusable(this.props.children),l=this.findLastFocusable(this.props.children);return k&&l&&(k.properties?k.properties.afterCreate=this.registerFirstFocusable:k.properties={afterCreate:this.registerFirstFocusable},l.properties?l.properties.afterCreate=this.registerLastFocusable:l.properties=
{afterCreate:this.registerLastFocusable}),this.props.children},n.prototype.findFirstFocusable=function(k){if(k)for(var l=0;l<k.length;l++){var h=k[l];if(p(h)||h.children&&(h=this.findFirstFocusable(h.children)))return h}},n.prototype.findLastFocusable=function(k){if(k)for(var l=k.length-1;0<=l;l--){var h=k[l];if(p(h)||h.children&&(h=this.findLastFocusable(h.children)))return h}},n.prototype.registerFirstFocusable=function(k){this.firstFocusableElement&&this.firstFocusableElement!==k&&this.firstFocusableElement.removeEventListener("keydown",
this.handleFocusChange);k.addEventListener("keydown",this.handleFocusChange);this.firstFocusableElement=k;setTimeout(function(){k&&k.focus()},10)},n.prototype.registerLastFocusable=function(k){this.lastFocusableElement&&this.lastFocusableElement!==k&&this.lastFocusableElement.removeEventListener("keydown",this.handleFocusChange);this.lastFocusableElement=k;this.lastFocusableElement.addEventListener("keydown",this.handleFocusChange)},n.prototype.handleFocusChange=function(k){"Tab"!==k.key&&9!==k.keyCode||
(k.shiftKey?document.activeElement===this.firstFocusableElement&&this.lastFocusableElement&&(this.lastFocusableElement.focus(),k.preventDefault()):document.activeElement===this.lastFocusableElement&&this.firstFocusableElement&&(this.firstFocusableElement.focus(),k.preventDefault()))},n}(b(16).Component);a.a=c},313:function(c,a,b){b.d(a,"a",function(){return m});var p=b(30),q=b(54),t=b(175),m=function(n,k){var l=k();l=(Object(q.b)(l)?l:l.gbState).utils;Object(p.q)(l.request,l.portal).then(function(h){var e;
h=(null===(e=null==h?void 0:h.trustedOrgs)||void 0===e?void 0:e.filter(function(d){return-1<d.from.established&&-1<d.to.established}))||[];n({type:t.a.TRUSTED_ORGS_LOADED,payload:h})},function(){n({type:t.a.TRUSTED_ORGS_LOADED,payload:[]})})}},314:function(c,a,b){b.d(a,"a",function(){return m});var p=b(30),q=b(54),t=b(28),m=function(n){n=(Object(q.b)(n)?n:n.gbState).utils;var k=n.request,l=n.portal,h=n.portalUser;return new t.Promise(function(e,d){Object(p.r)(k,l,h.username).then(function(g){e(g)},
function(){e()})})}},320:function(c,a,b){var p=b(0),q=b(36),t=b(39);c=b(16);var m=b(90);b=function(n){function k(){return null!==n&&n.apply(this,arguments)||this}return Object(p.d)(k,n),k.prototype.render=function(l){var h=this.props,e=h.onCancel,d=h.title,g=h.onBack;return l("div",{"class":"share-dlg__container-header",key:"share-view-header"},l("h2",{key:"share-view-header-title",id:"modal-title","class":"share-dlg__title"},h.back?l("button",{key:"share-dlg-header-back","class":"share-dlg__back",
onclick:g,"aria-label":t.backToShare},l("svg",{viewbox:"0 0 24 24",role:"img"},l("path",{d:m.b})),d):d),l("button",{"class":"mod__overlay__close","aria-label":q.close,onclick:e},l("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor"},l("path",{d:m.k}))))},k}(c.Component);a.a=b},335:function(c,a,b){b.d(a,"b",function(){return h});b.d(a,"a",function(){return D});var p=b(0),q=b(28),t=b(30),m=b(78),n=b(61),k=b(194),l=b(26),h=function(F){if(F.depth&&
4<F.depth)return q.Promise.resolve([]);switch(F.depth=F.depth?F.depth+1:1,F.item.type){case "Web Map":case "Web Scene":return B(F);case "Web Mapping Application":return d(F);case "Big Data File Share":return g(F);case "Data Store":return u(F);default:return q.Promise.resolve([])}},e=function(F){var H=F.item,I=F.request,L=F.portal,J=F.iconDir;return H.itemId?new q.Promise(function(O){Object(t.v)(I,L.restUrl+"/content/items/"+H.itemId).then(function(P){0<Object(k.b)([P]).length?Object(k.a)({items:[P],
request:I}).then(function(fa){P.isUpdateLayer=0<fa.length;O(Object(m.a)(L,J,P))},function(){return O(Object(m.a)(L,J,P))}):O(Object(m.a)(L,J,P))},function(){return O(null)})}):q.Promise.resolve(null)},d=function(F){var H=F.item,I=F.request,L=F.portal,J=F.iconDir;return new q.Promise(function(O){Object(t.v)(I,L.restUrl+"/content/items/"+H.id+"/data").then(function(P){P||O([]);var fa=function(V){var ba,ka,la,ma,ha,Z,W,Q,ia,R,S=(null===(ba=null==V?void 0:V.map)||void 0===ba?0:ba.itemId)?[V.map.itemId]:
[];ba=null!==(ma=null===(la=null===(ka=V.values)||void 0===ka?void 0:ka.itemCollection)||void 0===la?void 0:la.map(function(N){return N.id}))&&void 0!==ma?ma:[];ka=null!==(W=null===(Z=null===(ha=V.values)||void 0===ha?void 0:ha.webmap)||void 0===Z?void 0:Z.split(","))&&void 0!==W?W:[];V=null!==(R=null===(ia=null===(Q=V.values)||void 0===Q?void 0:Q.webscene)||void 0===ia?void 0:ia.split(","))&&void 0!==R?R:[];return Object(p.g)(Object(p.g)(Object(p.g)(Object(p.g)([],S),ba),ka),V)}(P).map(function(V){return e({item:{itemId:V},
request:I,portal:L,iconDir:J})});q.Promise.all(fa).then(function(V){var ba=V.filter(function(ka){return ka});V=ba.map(function(ka){return h({item:ka,request:I,portal:L,iconDir:J})});q.Promise.all(V).then(function(ka){var la;ka=Object(p.g)(Object(p.g)([],ba),Object(n.b)(ka));(null===(la=P.values)||void 0===la?0:la.group)&&(H.itemData=P,ka.push(H));O(ka)})})})})},g=function(F){var H=F.item,I=F.request,L=F.portal,J=F.iconDir;return new q.Promise(function(O){Object(t.v)(I,L.restUrl+"/content/items/"+
H.id+"/relatedItems",{relationshipType:"BDFSDataStore2BDFSCatalogService",direction:"reverse"}).then(function(P){if(-1<P.relatedItems[0].typeKeywords.indexOf("bigDataFileShare")&&-1<P.relatedItems[0].typeKeywords.indexOf("dataStore"))Object(t.v)(I,L.restUrl+"/content/items/"+P.relatedItems[0].id+"/relatedItems",{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(V){V.relatedItems.push(P.relatedItems[0]);V=x(V.relatedItems,I,L,J);q.Promise.all(V).then(function(ba){O(ba)})});
else{var fa=x(P.relatedItems,I,L,J);q.Promise.all(fa).then(function(V){O(V)})}})})},u=function(F){var H=F.item,I=F.request,L=F.portal,J=F.iconDir;return new q.Promise(function(O){Object(t.v)(I,L.restUrl+"/content/items/"+H.id+"/relatedItems",{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(P){P=x(P.relatedItems,I,L,J);q.Promise.all(P).then(function(fa){O(fa)})})})},x=function(F,H,I,L){return F.map(function(J){return y(J,H,I,L)})},y=function(F,H,I,L){return new q.Promise(function(J){Object(t.v)(H,
I.restUrl+"/content/items/"+F.id).then(function(O){J(Object(m.a)(I,L,O))})})},B=function(F){var H=F.item,I=F.request,L=F.portal,J=F.iconDir;return new q.Promise(function(O){return function(P){var fa=P.portal,V=P.item,ba=P.request;return new q.Promise(function(ka){if(V.itemData){var la=V.itemData,ma=la.operationalLayers,ha=la.baseMap,Z=la.tables;la=la.ground;return ka(Object(p.g)(Object(p.g)(Object(p.g)(Object(p.g)([],(null==ha?void 0:ha.baseMapLayers)||[]),(null==la?void 0:la.layers)||[]),ma||[]),
Z||[]))}return Object(t.v)(ba,fa.restUrl+"/content/items/"+V.id+"/data").then(function(W){var Q=W.baseMap,ia=W.tables,R=W.ground;return ka(Object(p.g)(Object(p.g)(Object(p.g)(Object(p.g)([],W.operationalLayers||[]),(null==Q?void 0:Q.baseMapLayers)||[]),(null==R?void 0:R.layers)||[]),ia||[]))},function(){return ka([])})})}({request:I,item:H,portal:L}).then(function(P){q.Promise.all(C(P).map(function(fa){return e({item:fa,request:I,portal:L,iconDir:J})})).then(O)})})},C=function(F){return F.reduce(function(H,
I){return(null==I?0:I.itemId)?H.concat(I):(null==I?0:I.layers)&&"GroupLayer"===I.layerType?H.concat(I.layers):H},[])},z={needsShareLevelUpdate:!1,needsGroupSharingUpdate:!1,editable:!0,premium:!1,groupDependentApplication:!1,bdfsDatastore:!1},D=function(F){var H=F.item,I=F.selectedOptions,L=F.selectedGroups,J=F.request;F=F.portal;return E({item:H,selectedOptions:I})?q.Promise.resolve(Object(p.a)(Object(p.a)({},z),{editable:!1,premium:!0})):A({item:H,selectedGroups:L,request:J,portal:F,selectedOptions:I}).then(function(O){var P=
O.needsGroupSharingUpdate,fa;if(!(fa=O.needsShareLevelUpdate)){var V,ba=!0;Object(n.e)(I)&&(ba=!1);fa=Object(n.d)(I);fa!==l.b["private"]&&fa!==l.b.shared||(ba=!1);var ka=H.access||(null===(V=H.sharing)||void 0===V?void 0:V.access);fa=(ka===l.b["public"]&&(ba=!1),ka===fa&&(ba=!1),fa===l.b["private"]&&(ka===l.b.shared&&(ba=!1),ka===l.b.org&&(ba=!1)),ba)}return{needsGroupSharingUpdate:P,needsShareLevelUpdate:fa,editable:O.editable,premium:!1,groupDependentApplication:O.groupDependentApplication,bdfsDatastore:O.bdfsDatastore}})},
E=function(F){var H=F.selectedOptions;F=F.item;return Object(n.e)(H)?!1:Object(n.d)(H)===l.b["public"]?(H=F.typeKeywords,-1<F.owner.toLowerCase().indexOf("esri")&&(-1<(null==H?void 0:H.indexOf("Requires Credits"))||-1<(null==H?void 0:H.indexOf("Requires Subscription")))):!1},A=function(F){var H=F.item,I=F.selectedGroups,L=F.selectedOptions,J=F.request,O=F.portal;return new q.Promise(function(P,fa){var V,ba;"Web Mapping Application"===H.type&&(null===(ba=null===(V=H.itemData)||void 0===V?void 0:V.values)||
void 0===ba?0:ba.group)?P(Object(p.a)(Object(p.a)({},z),{groupDependentApplication:!0})):"Data Store"!==H.type?Object(t.v)(J,O.restUrl+"/content/users/"+H.owner+(H.ownerFolder?"/"+H.ownerFolder:"")+"/items/"+(H.itemId||H.id)).then(function(ka){var la,ma=ka.item.itemControl,ha=ka.sharing.groups;ka=H.access||(null===(la=H.sharing)||void 0===la?void 0:la.access);Object(n.f)(H)&&L.total===L["public"]?P(Object(p.a)(Object(p.a)({},z),{needsShareLevelUpdate:!0,editable:!1})):ma&&"admin"!==ma&&"update"!==
ma?P(Object(p.a)(Object(p.a)({},z),{editable:!1})):ka!==l.b["public"]?I.length>ha.length?P(Object(p.a)(Object(p.a)({},z),{needsGroupSharingUpdate:!0})):(la=I.some(function(Z){return 0>ha.indexOf(Z.id)}),P(Object(p.a)(Object(p.a)({},z),{needsGroupSharingUpdate:la}))):P(Object(p.a)({},z))},function(ka){Object(t.v)(J,O.restUrl+"/content/items/"+(H.itemId||H.id)).then(function(la){la=la.access;la===l.b["public"]||la===l.b.org&&L.total===L.org+L["private"]?P(Object(p.a)(Object(p.a)({},z),{editable:!1})):
P(Object(p.a)(Object(p.a)({},z),{needsShareLevelUpdate:!0,editable:!1}))},function(la){P(Object(p.a)(Object(p.a)({},z),{needsShareLevelUpdate:!0,editable:!1}))})}):P(Object(p.a)(Object(p.a)({},z),{bdfsDatastore:!0}))})}},36:function(c,a){c.exports=G},379:function(c,a,b){function p(m,n){var k=m.filter(function(l){var h;return!l.success&&500===(null===(h=null==l?void 0:l.error)||void 0===h?void 0:h.code)}).map(function(l){var h=Object(t.c)(n,function(e){return e.id===l.itemId});return(null==h?void 0:
h.title)||l.itemId});return m.map(function(l){l.error=l.error||{};var h=l.error,e=h.messageCode;h=h.code;return e&&q.errors[e]&&(l.error.message=q.errors[e]),h&&q.errors[h]&&(l.error.message=q.errors[h]),(500===e||500===h&&k)&&(l.error.details=k,l.error.message=q.errors[500]+" "+(null==k?void 0:k.join(", "))),l}).filter(function(l){return!l.success})}b.d(a,"a",function(){return p});var q=b(39),t=b(99)},38:function(c,a,b){b.d(a,"b",function(){return p});b.d(a,"d",function(){return t});b.d(a,"c",function(){return m});
b.d(a,"a",function(){return n});b.d(a,"f",function(){return h});var p,q,t,m,n,k=b(0),l=b(25);!function(e){e.openData="openData";e.updateGroups="updateGroups";e.distributed="distributed";e.administrative="administrative";e.orgSettings="orgSettings"}(p||(p={}));(q||(q={})).owner="owner";(function(e){e.itemOwner="itemOwner";e.inOrg="inOrg";e.outsideOrg="outsideOrg"})(t||(t={}));(function(e){e.myOrg="org";e.partnered="collaboration";e.anyOrg="anyOrg"})(m||(m={}));(function(e){e.USER="USER";e.OWNER="OWNER";
e.DESIGNATION="DESIGNATION";e.DATE_CREATED="DATE_CREATED";e.MEMBERSHIP="MEMBERSHIP"})(n||(n={}));var h={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};a.e=function(e,d){switch(void 0===e&&(e=h),d.type){case l.a.CLEAR_FILTERS:switch(d.payload){case n.DESIGNATION:return Object(k.a)(Object(k.a)({},e),{designationFilter:void 0});case n.DATE_CREATED:return Object(k.a)(Object(k.a)({},e),{dateCreatedFilter:void 0});case n.OWNER:return Object(k.a)(Object(k.a)({},e),{ownerFilter:void 0});
case n.USER:return e;case n.MEMBERSHIP:return Object(k.a)(Object(k.a)({},e),{membershipFilter:void 0});default:return Object(k.a)(Object(k.a)({},e),{designationFilter:void 0,dateCreatedFilter:void 0,membershipFilter:void 0,ownerFilter:void 0})}case l.a.UPDATE_OWNER_FILTER:return Object(k.a)(Object(k.a)({},e),{ownerFilter:d.payload===e.ownerFilter?void 0:d.payload});case l.a.UPDATE_USERNAME_FILTER:return Object(k.a)(Object(k.a)({},e),{currentUsername:d.payload});case l.a.UPDATE_CREATED_ON_FILTER:return Object(k.a)(Object(k.a)({},
e),{dateCreatedFilter:d.payload.created});case l.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(k.a)(Object(k.a)({},e),{designationFilter:d.payload===e.designationFilter?void 0:d.payload});case l.a.UPDATE_MEMBERSHIP_FILTER:return Object(k.a)(Object(k.a)({},e),{membershipFilter:d.payload===e.membershipFilter?void 0:d.payload});case l.a.SET_USERS:return Object(k.a)(Object(k.a)({},e),{allUsers:d.payload.reduce(function(g,u){var x;return Object(k.a)(Object(k.a)({},g),((x={})[u.username]=u,x))},{})});
case l.a.SET_SEARCH_STRING:return Object(k.a)(Object(k.a)({},e),{searchString:d.payload});default:return e}}},39:function(c,a){c.exports=w},422:function(c,a,b){var p,q=b(0);c=b(39);var t=b(16),m=b(629),n=b(139),k=b(26);b=function(h){function e(){var d=null!==h&&h.apply(this,arguments)||this;return d.handleKeyUp=function(g){"Escape"===g.key&&d.props.handleSecondaryClick()},d}return Object(q.d)(e,h),e.prototype.render=function(d){var g=this,u=this.props,x=u.handleSecondaryClick,y=u.handlePrimaryClick,
B=u.text;if(u.dialogExists&&B)return d("div",{key:"share-mini-dlg__wrapper",afterCreate:function(){window.addEventListener("keyup",g.handleKeyUp)},afterRemoved:function(){window.removeEventListener("keyup",g.handleKeyUp)}},d(m.a,{key:"share-mini-dlg__component",isError:null==B?void 0:B.isError,render:function(){return d("div",{key:"share-mini-dlg","class":"share-mini-dlg"},d("h2",{"class":"share-mini-dlg__title"},B.title),d("p",{"class":"share-mini-dlg__body"},B.body),d("div",{"class":"share-mini-dlg__buttons"},
B.secondaryButton&&d("button",{appearance:"outline",onclick:x,id:"share-mini-dlg-secondary","class":"share-dlg__button--secondary share-mini-dlg__cancel-button"},B.secondaryButton),d("button",{onclick:y,id:"share-mini-dlg-primary","class":"share-dlg__button--primary share-mini-dlg__remove-button"},B.primaryButton)))}}))},e}(t.Component);a.a=Object(t.connect)(function(h){h=h.resources.currentMiniDlg;return{text:l[h],dialogExists:h!==k.c.NONE}},function(h){return{handleSecondaryClick:function(){h(Object(n.k)(k.c.NONE));
h(Object(n.j)(k.a.SHARE))},handlePrimaryClick:function(){h(n.h)}}})(b);var l=((p={})[k.c.OPEN_GROUP_BROWSER]={title:c.MiniDlg.changeShareLevelTitle,body:c.MiniDlg.changeShareLevelBody,primaryButton:c.update,secondaryButton:c.cancel},p[k.c.SET_SHARE_TO_PRIVATE]={title:c.MiniDlg.setShareToPrivateTitle,body:c.MiniDlg.setShareToPrivateBody,primaryButton:c.update,secondaryButton:c.cancel},p[k.c.REVERT_SHARE_LEVEL]={title:c.MiniDlg.revertShareLevelTitle,body:c.MiniDlg.revertShareLevelBody,primaryButton:c.update,
secondaryButton:c.cancel},p[k.c.REVERT_GROUPS]={title:c.MiniDlg.revertGroupsTitle,body:c.MiniDlg.revertGroupsBody,primaryButton:c.update,secondaryButton:c.cancel},p[k.c.EDITABLE_LAYERS]={title:c.MiniDlg.editableLayersTitle,body:c.MiniDlg.editableLayersBody,primaryButton:c.update,secondaryButton:c.cancel,isError:!0},p[k.c.PUBLIC_DATA_COLLECTION_ENABLED]={title:c.MiniDlg.publicDataCollectionEnabledTitle,body:c.MiniDlg.publicDataCollectionEnabledBody,primaryButton:c.update,secondaryButton:c.cancel,isError:!0},
p[k.c.PUBLIC_DATA_COLLECTION_DISABLED]={title:c.MiniDlg.publicDataCollectionDisabledTitle,body:c.MiniDlg.publicDataCollectionDisabledBody,primaryButton:c.ok,isError:!0},p)},440:function(c,a,b){b.d(a,"a",function(){return t});b.d(a,"b",function(){return m});c=b(495);a=b(496);var p=b(54),q=b(497);b=b(16);p.a.ui.filter.expanded=860<window.innerWidth;var t={resources:c.b,utilities:a.b,gbState:p.a,config:q.b},m=Object(b.combineReducers)({resources:c.a,utilities:a.a,gbState:p.c,config:q.a})},495:function(c,
a,b){function p(h){var e=Object(t.a)(Object(t.a)({},k),{total:h.length});return h.forEach(function(d){switch(d.access?d.access:d.sharing&&d.sharing.access){case n.b["public"]:e[n.b["public"]]++;break;case n.b.org:e[n.b.org]++;break;case n.b.shared:case n.b["private"]:e[n.b["private"]]++}}),e}b.d(a,"b",function(){return l});var q,t=b(0),m=b(139),n=b(26),k=((q={total:0})[n.b["private"]]=0,q[n.b.org]=0,q[n.b["public"]]=0,q),l={items:[],portalUser:{},selectedOptions:Object(t.a)({},k),selectedOptionsDirty:!1,
dependentItems:{needShareLevelUpdate:[],needGroupSharingUpdate:[],notEditable:[],premium:[],needEditableWarning:[],needPubliclyEditableWarning:[],needDataCollectionEnabled:[],needGroupDependentApplicationWarning:[],needBDFSDatastoreUpdate:[]},currentMiniDlg:n.c.NONE,isLoading:!1};a.a=function(h,e){var d;switch(void 0===h&&(h=l),e.type){case m.a.SET_HELP_MAP:return Object(t.a)(Object(t.a)({},h),{helpMap:e.payload});case m.a.SET_SELECTED_SHARE_LEVEL:var g=h.selectedOptions.total,u=Object(t.a)(Object(t.a)(Object(t.a)({},
k),((d={})[e.payload]=g,d)),{total:g}),x=p(h.items);d=!Object.keys(u).reduce(function(y,B){return y&&u[B]===x[B]},!0);return Object(t.a)(Object(t.a)({},h),{selectedOptions:u,selectedOptionsDirty:d});case m.a.SET_INITIAL_SHARE_LEVEL:return Object(t.a)(Object(t.a)({},h),{selectedOptions:p(h.items),selectedOptionsDirty:!1});case m.a.SET_DEPENDENT_ITEMS:return Object(t.a)(Object(t.a)({},h),{dependentItems:e.payload});case m.a.SET_MINI_DIALOG:return Object(t.a)(Object(t.a)({},h),{currentMiniDlg:e.payload});
default:return h}}},496:function(c,a,b){b.d(a,"b",function(){return p});var p={onCancel:function(){return null},onComplete:function(){return null},request:function(q){return null},portal:{},iconDir:""};a.a=function(q,t){return void 0===q&&(q=p),t.type,q}},497:function(c,a,b){b.d(a,"b",function(){return t});var p=b(0),q=b(139);c=b(26);var t={groupsPerPage:10,currentView:c.a.LOADING,shareMode:c.d.DEFAULT,userType:c.e.ORG};a.a=function(m,n){switch(void 0===m&&(m=t),n.type){case q.a.SET_CURRENT_VIEW:return Object(p.a)(Object(p.a)({},
m),{currentView:n.payload});case q.a.SET_SHARE_MODE:return Object(p.a)(Object(p.a)({},m),{shareMode:n.payload});case q.a.SET_USER_TYPE:return Object(p.a)(Object(p.a)({},m),{userType:n.payload});default:return m}}},5:function(c,a,b){function p(e){return 0===Object.keys(e).length&&e.constructor===Object}function q(e){return null!=e}function t(e,d){return l.apply(null,arguments)}function m(e,d){return h.apply(null,arguments)}b.d(a,"b",function(){return p});b.d(a,"a",function(){return q});b.d(a,"e",function(){return k});
b.d(a,"c",function(){return t});b.d(a,"d",function(){return m});var n=b(0);c=b(15);var k=Object(c.a)(function(e,d){var g=Object(n.a)({},d);return delete g[e],g}),l=Object(c.a)(function(e,d){return Object.keys(d).reduce(function(g,u){return g[u]=e(d[u],u,d),g},{})}),h=Object(c.a)(function(e,d){return Object.keys(d).reduce(function(g,u){return e(d[u],u,d)&&(g[u]=d[u]),g},{})})},51:function(c,a,b){function p(A){return!(!A.urlKey||!A.customBaseUrl)}function q(A){return A.role===u.admin||A.role===u.accountAdmin}
function t(A){return Object(B.a)(A.roleId)&&0<(A.roleId||"").length}function m(A){return!t(A)||t(A)&&-1<(A.privileges||[]).indexOf("portal:admin:viewItems")}function n(A){return-1<(A.privileges||[]).indexOf("portal:user:shareToOrg")}function k(A){return-1<(A.privileges||[]).indexOf("portal:user:shareToGroup")}function l(A){return-1<(A.privileges||[]).indexOf("portal:user:shareToPublic")}function h(A,F){return e(A)||d(A)||F.canSharePublic&&g(A)}function e(A){return-1<(A.privileges||[]).indexOf("portal:admin:shareToGroup")}
function d(A){return-1<(A.privileges||[]).indexOf("portal:admin:shareToOrg")}function g(A){return-1<(A.privileges||[]).indexOf("portal:admin:shareToPublic")}b.d(a,"l",function(){return z});b.d(a,"h",function(){return D});b.d(a,"m",function(){return E});b.d(a,"k",function(){return p});b.d(a,"i",function(){return q});b.d(a,"j",function(){return t});b.d(a,"g",function(){return m});b.d(a,"b",function(){return n});b.d(a,"a",function(){return k});b.d(a,"c",function(){return l});b.d(a,"d",function(){return e});
b.d(a,"e",function(){return d});b.d(a,"f",function(){return g});var u,x=b(63),y=b(148),B=b(5),C=b(58);!function(A){A.user="org_user";A.accountUser="account_user";A.publisher="org_publisher";A.accountPublisher="account_publisher";A.admin="org_admin";A.accountAdmin="account_admin";A.viewer="iAAAAAAAAAAAAAAA";A.dataEditor="iBBBBBBBBBBBBBBB"}(u||(u={}));var z=function(A){var F=A.items;return!!A.user.orgId&&F.every(function(H){return H.isOrgItem})},D=function(A){var F=A.items,H=A.user,I=A.portal;A=F[0];
var L=Object(C.c)(A,H),J=t(H),O=h(H,I);if(J=Object(C.a)(A,H)&&-1<(H.privileges||[]).indexOf("portal:admin:updateItems")&&!J)J=!p(I)||k(H)||n(H)||I.canSharePublic&&l(H)||h(H,I);I=J;return!(A.portal.isPortal&&A.owner!==H.username&&-1<A.owner.indexOf("esri_"))&&(L||I||z({items:F,user:H})&&O)},E=function(A,F){return Object(x.a)(Object(y.a)(A))(F)}},54:function(c,a,b){b.d(a,"b",function(){return m});b.d(a,"a",function(){return n});b.d(a,"c",function(){return k});c=b(16);a=b(215);var p=b(208),q=b(137),
t=b(210);b=b(207);var m=function(l){return!l.gbState},n={config:b.b,parameters:p.b,groups:q.f,ui:t.b,utils:a.b},k=Object(c.combineReducers)({config:b.a,parameters:p.a,groups:q.b,ui:t.a,utils:a.a})},58:function(c,a,b){function p(l,h){return(null==l?void 0:l.owner)===h.username}function q(l,h){var e;if(!(e=p(l,h)))if(Object(m.a)(l.isAdmin))e=!!l.isAdmin;else{e=l.owner;var d="admin"===l.itemControl;e=!(l.portal.isPortal&&!p(l,h)&&d&&-1<e.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(e))&&
d}return e}function t(l,h){return q(l,h)||"update"===l.itemControl}b.d(a,"d",function(){return p});b.d(a,"c",function(){return q});b.d(a,"a",function(){return t});b.d(a,"b",function(){return k});var m=b(5),n=b(51),k=function(l){var h=l.user,e=l.items;l=l.portal;return Object(n.l)({items:e,user:h})&&Object(n.h)({items:e,user:h,portal:l})&&Object(n.g)(h)&&e[0].itemOwner||h}},61:function(c,a,b){function p(D){var E=D.groupIds,A=D.shareLevelOptions,F=D.restUrl,H=D.request,I=D.unshare;return k.Promise.all(D.items.map(function(L,
J){return new k.Promise(function(O,P){H(F+"/content/items/"+(L.itemId||L.id)+"/"+(I?"unshare":"share"),{method:"post",query:Object(m.a)({f:"json",groups:E,confirmItemControl:!0},A||{})}).then(O,P)})}))["catch"](function(L){throw L;})}function q(D,E){return new k.Promise(function(A,F){var H,I=null===(H=D.helpMap)||void 0===H?void 0:H.m;I?A(I):E(D.restUrl+"/portals/helpmap",{query:{f:"json",format:"json"}}).then(function(L){var J;A(null===(J=L.data.helpMap)||void 0===J?void 0:J.m)},F)})}b.d(a,"h",function(){return h});
b.d(a,"g",function(){return e});b.d(a,"b",function(){return d});b.d(a,"e",function(){return g});b.d(a,"d",function(){return u});b.d(a,"f",function(){return C});b.d(a,"c",function(){return z});b.d(a,"a",function(){return q});var t,m=b(0),n=b(30),k=b(28);c=b(26);var l=b(58),h=function(D){var E=D.items,A=D.groups,F=D.restUrl,H=D.request,I=D.portalUser;if(0===E.length)return k.Promise.resolve();var L=Object(n.b)(A);return E.every(function(J){return Object(l.d)(J,I)})?new k.Promise(function(J,O){if(!A||
0===A.length)return J();var P={f:"json",items:Object(n.b)(E),groups:L};H(F+"/content/users/"+I.username+"/unshareItems",{method:"post",query:P}).then(J,O)}):p({items:E,groupIds:L,restUrl:F,request:H,unshare:!0})},e=function(D){var E=D.items,A=D.groups,F=D.restUrl,H=D.request,I=D.portalUser,L=D.selectedOptions;D=D.ignoreShareLevel;if(0===E.length)return k.Promise.resolve();if(!D&&!L)throw"Selected options must be provided unless share level is ignored.";var J=Object(n.b)(A),O=D?{}:x(L);return E.every(function(P){return Object(l.d)(P,
I)})?new k.Promise(function(P,fa){H(F+"/content/users/"+I.username+"/shareItems",{method:"post",query:Object(m.a)({f:"json",items:Object(n.b)(E),groups:J,confirmItemControl:!0},O)}).then(function(V){V=V.data;V.results.every(function(ba){return ba.success})?P():fa(V)},fa)}):p({items:E,groupIds:J,shareLevelOptions:O,restUrl:F,request:H})},d=function(D){return D.reduce(function(E,A){return Object(m.g)(Object(m.g)([],E),A)},[])},g=function(D){return 1<Object.keys(D).filter(function(E){return"total"!==
E&&0<D[E]}).length},u=function(D){return Object.keys(D).filter(function(E){return"total"!==E}).reduce(function(E,A){return D[A]===D.total?A:E})},x=function(D){return g(D)?{}:y[u(D)]},y=((t={})[c.b["public"]]={org:!1,everyone:!0},t[c.b.org]={org:!0,everyone:!1},t[c.b["private"]]={org:!1,everyone:!1},t[c.b.shared]={org:!1,everyone:!1},t),B="Location Tracking Service;Location Tracking View;IoTFeed;IoTRealTimeAnalytic;IoTBigDataAnalytic;IoTFeatureLayer;IoTMapImageLayer;IoTStreamLayer;Administrative Report;EditExtensionIndoorsSpaces".split(";"),
C=function(D){var E,A,F=D.typeKeywords,H=D.type;H=B.some(function(L){return-1<F.indexOf(L)})&&"Real Time Analytic"!==H&&"Big Data Analytic"!==H;var I=!(null===(E=null==D?void 0:D.portal)||void 0===E?0:E.isPortal)&&"Image Service"===D.type&&-1<(null===(A=D.url)||void 0===A?void 0:A.indexOf("://iservices"))&&-1<D.url.indexOf("arcgis.com");D="Knowledge Graph"===D.type;return H||I||D},z=function(D,E,A){return A&&E["public"]===E.total?D.filter(function(F){return-1<F.typeKeywords.indexOf("DeveloperBasemap")}):
[]}},623:function(c,a,b){b.d(a,"a",function(){return m});var p;c=b(624);a=b(631);var q=b(632),t=b(630);b=b(26);var m=((p={})[b.a.SHARE]=c.a,p[b.a.LOADING]=t.a,p[b.a.GROUP_BROWSER]=a.a,p[b.a.DEPENDENT_ITEM_CONFIRMATION]=q.a,p)},624:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(320),m=b(625),n=b(139),k=b(422),l=b(26);b=function(h){function e(){return null!==h&&h.apply(this,arguments)||this}return Object(p.d)(e,h),e.prototype.render=function(d){var g=this.props,u=g.miniDialogOpen,x=g.onCancel,y=
g.attemptToSaveShareState;return[d(t.a,{key:"share-dlg-header",onCancel:x,title:q.share}),d("div",{key:"share-view-content","class":"share-dlg__contents"},d(m.a,{key:"share-dialog"}),d(k.a,{key:"share-mini-dlg"})),d("div",{"class":"share-dlg__container-footer",key:"share-view-footer"},d("button",{"class":"share-dlg__button--primary",key:"share-view-save",id:"share-modal-primary",disabled:u,onclick:function(){y()}},q.save),d("button",{"class":"share-dlg__button--secondary",key:"share-view-close",id:"share-modal-secondary",
disabled:u,onclick:x},q.cancel))]},e}(c.Component);a.a=Object(c.connect)(function(h){return{miniDialogOpen:h.resources.currentMiniDlg!==l.c.NONE,onCancel:h.utilities.onCancel}},function(h){return{attemptToSaveShareState:function(){h(n.d)}}})(b)},625:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(90),m=b(626),n=b(628),k=b(139);b=function(l){function h(){return null!==l&&l.apply(this,arguments)||this}return Object(p.d)(h,l),h.prototype.render=function(e){var d=this.props,g=d.portal,u=d.resetShareLevel;
d=d.selectedOptionsDirty;return e("div",{"class":"share-level__wrap",key:"share-level__wrap"},e("div",{"class":"share-dlg__header",key:"share-dlg__header"},e("h3",{id:"share-options-title","class":"share-options__title"},q.ShareDialog.setSharingLevel),d&&e("button",{onclick:u,"class":"btn-svg share-options__reset share-dlg__btn-svg"},e("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},e("path",{d:t.g})),q.ShareOptions.revert)),e(m.a,{key:"share-options"}),
e("hr",{"class":"share-dlg__divider"}),e(n.a,{key:"share-groups-section",portal:g}))},h}(c.Component);a.a=Object(c.connect)(function(l){return{portal:l.utilities.portal,selectedOptionsDirty:l.resources.selectedOptionsDirty}},function(l){return{resetShareLevel:function(){l(k.e)}}})(b)},626:function(c,a,b){var p,q=b(0),t=b(39);c=b(16);var m=b(26),n=b(627),k=b(139),l=b(51),h=b(61);b=function(x){function y(){return null!==x&&x.apply(this,arguments)||this}return Object(q.d)(y,x),y.prototype.render=function(B){var C=
this.props,z=C.handleOptionClick,D=C.selectedOptions,E=C.availableShareLevels,A=C.showOptions,F=C.userType,H=C.possibleShareLevels,I=C.items;return B("fieldset",{"class":"share-options"},A&&H.map(function(L){var J=m.b[L];L=Object(h.f)(I[0])?t.ShareDialog.sharingLimitedItemDisclaimer:t.ShareDialog.cannotShareToLevelDisclaimer;return B(n.a,{key:J,level:J,handleLevelClick:function(){z(J)},disabledText:L,total:D.total,count:D[J],userType:F,disabled:-1===E.indexOf(J)})}),A&&E.length<H.length&&!Object(h.f)(I[0])&&
B("p",{key:"share-options__disclaimer--limited","class":"share-options__disclaimer"},t.ShareDialog.sharingLimitedDisclaimer),!A&&B("p",{key:"share-options__disclaimer--none","class":"share-options__disclaimer"},t.ShareDialog.noShareDisclaimer))},y}(c.Component);a.a=Object(c.connect)(function(x){var y=x.resources,B=y.portalUser,C=y.items;y=y.selectedOptions;var z=x.config,D=z.userType,E={user:B,items:C,userType:D};z=z.shareMode!==m.d.GROUP;x=g({portal:x.utilities.portal,portalUser:B,selectedOptions:y,
userType:D});return{selectedOptions:y,showOptions:z,userType:D,availableShareLevels:x.filter(function(A){return u[A](E)}),possibleShareLevels:x,items:C}},function(x){return{handleOptionClick:function(y){x(Object(k.f)(y))}}})(b);var e=function(x,y){return y.every(function(B){return B.owner===x.username})},d=function(x,y){return y.every(function(B){return B.owner===x.username||B.portal.id===(null==x?void 0:x.orgId)})},g=function(x){var y=x.portal,B=x.portalUser,C=x.selectedOptions;return x.userType===
m.e.PUBLIC?[m.b["private"],m.b["public"]]:y.canSharePublic||0!==C["public"]||Object(l.i)(B)?[m.b["private"],m.b.org,m.b["public"]]:[m.b["private"],m.b.org]},u=((p={})[m.b["private"]]=function(x){return!0},p[m.b.org]=function(x){var y=x.user,B=x.items;if(x.userType===m.e.PUBLIC)return!1;x=e(y,B);var C=d(y,B);B=Object(l.i)(y)&&!Object(l.j)(y)&&d(y,B);return Object(l.b)(y)&&(x||B)||Object(l.e)(y)&&C},p[m.b["public"]]=function(x){var y=x.user,B=x.items;x=x.userType;if(1===B.length&&Object(h.f)(B[0]))return!1;
var C=e(y,B);B=d(y,B);var z=Object(l.i)(y)&&!Object(l.j)(y)&&B;return x===m.e.PUBLIC||Object(l.c)(y)&&(C||z)||Object(l.f)(y)&&B},p)},627:function(c,a,b){var p,q,t=b(0),m=b(39);c=b(16);var n=b(90),k=b(26);b=function(d){function g(){return null!==d&&d.apply(this,arguments)||this}return Object(t.d)(g,d),g.prototype.render=function(u){var x=this.props,y=x.level,B=x.count,C=x.total,z=x.handleLevelClick,D=x.disabled,E=x.disabledText,A=e[y],F=A.description;A=A.title;x.userType===k.e.PUBLIC&&y===k.b["public"]&&
(F=m.ShareDialog.everyoneDescriptionPublic);x=B===C;var H=0<B&&!x,I=l(m.ShareOptions[y],B,C);B=l(m.ShareOptions.numItems,B,C);return u("label",{key:A,id:"share-level-"+y,classes:{"share-options__label":!0,"share-options__label--selected":x,"share-options__label--indeterminate":H,"share-options__label--disabled":D},"aria-label":D&&E?E:void 0},u("input",{type:"radio",name:"sharing-type",key:A,"class":"share-options__input",checked:x,disabled:D,indeterminate:H,onclick:function(L){L.preventDefault();
D||z()}}),u("svg",{style:"\n              width: 24px;\n              height: 24px;\n              fill: currentColor;\n            ",role:"img"},u("path",{d:h[y]})),u("span",{"class":"share-options__content"},u("h4",{"class":"share-options__header"},A,H&&u("span",{"class":"share-options__indeterminate-text","aria-label":D?void 0:I},u("svg",{style:"\n                      width: 1rem;\n                      height: 1rem;\n                      margin: 0 0.25rem;\n                      display: inline-block;\n                      vertical-align: -0.25rem;\n                      fill: #959595;\n                    "},
u("path",{d:n.d})),u("span",null,B))),u("p",{"class":"share-options__description"},F)))},g}(c.Component);a.a=b;var l=function(d,g,u){return void 0===d&&(d=""),d.replace("${num}",""+g).replace("${total}",""+u)},h=((p={})[k.b["public"]]=n.c,p[k.b.org]=n.e,p[k.b["private"]]=n.h,p[k.b.shared]=n.h,p),e=((q={})[k.b["private"]]={title:m.ShareDialog.owner,description:m.ShareDialog.ownerDescription},q[k.b.shared]={title:m.ShareDialog.owner,description:m.ShareDialog.ownerDescription},q[k.b.org]={title:m.ShareDialog.organization,
description:m.ShareDialog.organizationDescription},q[k.b["public"]]={title:m.ShareDialog.everyone,description:m.ShareDialog.everyoneDescription},q)},628:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(249),m=b(90),n=b(139),k=b(51),l=b(181),h=b(68);b=function(e){function d(){return null!==e&&e.apply(this,arguments)||this}return Object(p.d)(d,e),d.prototype.render=function(g){var u=this.props,x=u.selectedGroupsDatas,y=u.portal,B=u.handleRemoveGroupsClick,C=u.handleRevertGroupsClick,z=u.handleEditGroupSharingClick,
D=u.groupSharingMixed,E=u.hasGroups,A=u.groupsDirty,F=u.canShareItemToGroup;u=u.selectorItemsLength;return g("div",{"class":"share-groups"},g("h3",{"class":"share-groups__header"},q.groups.setGroupSharing,F&&0<x.length&&!A&&g("button",{"class":"share-dlg__button--transparent btn-svg share-dlg__btn-svg",id:"share-groups__remove",onclick:B,"aria-haspopup":"true"},g("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},g("path",{d:m.k})),q.groups.remove),A&&
g("button",{onclick:C,"class":"btn-svg share-options__reset share-dlg__btn-svg"},g("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},g("path",{d:m.g})),q.ShareOptions.revert)),g("div",{"class":"share-groups__body"},0<x.length?this.getGroupIcons({needsWarning:D,groupDatas:x,portal:y,selectorItemsLength:u,tsx:g}):g("p",{"class":"share-groups__empty"},E?q.groups.noneYet:q.groups.noGroupsToShare),E&&F&&g("button",{onclick:z,id:"edit-group-sharing-button",
"class":"share-dlg__button--secondary btn-svg share-groups__edit share-dlg__btn-svg"},g("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},g("path",{d:m.i})),q.groups.editGroupSharing)))},d.prototype.getGroupIcons=function(g){var u=g.groupDatas,x=g.portal,y=g.tsx,B=g.needsWarning,C=g.selectorItemsLength;g=Math.max(u.length-3,0);return y("div",null,y("div",{key:"group-thumbnails","class":"share-groups__thumbnails"},u.slice(0,3).map(function(z){return y(t.a,
{transparent:z.selectedByIds&&z.selectedByIds.length!==C,group:z.group,stacked:!0,portal:x})}),0<g&&y("span",{"class":"share-groups__plus"},"+"+g)),B&&y("p",{"class":"share-groups__empty"},q.groups.mixedGroupSharing))},d}(c.Component);a.a=Object(c.connect)(function(e){var d,g,u=e.utilities.portal,x=e.resources.portalUser,y=e.gbState.groups,B=y.selectedGroups,C=y.initialSelectedGroups;e=y.selectorItems;y=y.hasGroups;var z=Object.keys(B).map(function(A){return B[A]}).sort(function(A,F){return A.selectedByIds&&
F.selectedByIds?F.selectedByIds.length-A.selectedByIds.length:0}),D=z[z.length-1];D=(D&&D.selectedByIds&&D.selectedByIds.length||0)<(e&&e.length||0);u=!Object(k.k)(u)||Object(k.a)(x)||Object(k.d)(x)&&(d=x.username,g=x.orgId,Object.keys(B).every(function(A){A=B[A].group;var F=g&&g===(null==A?void 0:A.orgId);return d===(null==A?void 0:A.owner)||F}));x=Object.keys(B).length;var E=Object.keys(C);x=E.length!==x||E.reduce(function(A,F){return A||!B[F]||Object(l.a)({selectedBy:(B[F].selectedByIds||[]).map(function(H){return{id:H}}),
initialSelectedByIds:C[F].selectedByIds||[]})},!1);return{selectedGroupsDatas:z,groupSharingMixed:D,hasGroups:y,canShareItemToGroup:u,selectorItemsLength:e.length,groupsDirty:x}},function(e){return{handleRemoveGroupsClick:function(){e({type:h.a.CLEAR_SELECTION})},handleRevertGroupsClick:function(){e(n.c)},handleEditGroupSharingClick:function(){e(n.b)}}})(b)},629:function(c,a,b){var p=b(312);a.a=function(q,t){var m=q.render;return t("div",{"class":"mini-dlg__wrapper",key:"mini-dlg__wrapper"},t("div",
{classes:{"mini-dlg":!0,"min-dlg--error":!!q.isError}},t(p.a,{key:"mini-dlg-trap"},m())),t("div",{"class":"mini-dlg__scrim"}))}},63:function(c,a,b){function p(){for(var q=[],t=0;t<arguments.length;t++)q[t]=arguments[t];return function(m){return q.reduceRight(function(n,k){return k(n)},m)}}b.d(a,"a",function(){return p})},630:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(320),m=b(205),n=b.n(m),k=b(422);b=function(l){function h(){return null!==l&&l.apply(this,arguments)||this}return Object(p.d)(h,
l),h.prototype.render=function(e){return[e(t.a,{key:"share-dlg-header-loading",onCancel:this.props.handleCancelClick,title:q.share}),e("div",{key:"loading-view-content","class":"share-dlg__contents share-loader__container"},e(n.a,{key:"share-loader",text:q.loading}),e(k.a,{key:"share-mini-dlg"})),e("div",{"class":"share-dlg__container-footer",key:"share-view-footer"},e("button",{"class":"share-dlg__button--primary",key:"loading-view-save",id:"share-modal-primary",disabled:""},q.update),e("button",
{"class":"share-dlg__button--secondary",key:"loading-view-close",id:"share-modal-secondary",onclick:this.props.handleCancelClick},q.cancel))]},h}(c.Component);a.a=Object(c.connect)(function(l){return{handleCancelClick:l.utilities.onCancel}},function(l){return{}})(b)},631:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(139),m=b(258),n=b.n(m),k=b(320),l=b(26);b=function(h){function e(){return null!==h&&h.apply(this,arguments)||this}return Object(p.d)(e,h),e.prototype.render=function(d){return[d(k.a,
{key:"share-dlg-header-loading",onCancel:this.props.onCancel,onBack:this.props.closeGroupBrowser,back:!0,title:q.groupSharing}),d("div",{key:"group-browser-view-content-gb","class":"share-dlg__contents share-dlg__contents--wide"},d(n.a,{key:"share-group-browser"})),d("div",{"class":"share-dlg__container-footer",key:"share-view-footer"},d("button",{"class":"share-dlg__button--primary",key:"group-browser-view-save",id:"share-modal-primary",onclick:this.props.closeGroupBrowser},q.ok))]},e}(c.Component);
a.a=Object(c.connect)(function(h){return{onCancel:h.utilities.onCancel}},function(h){return{closeGroupBrowser:function(){h(Object(t.j)(l.a.SHARE))}}})(b)},632:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(320),m=b(633),n=b(139);b=function(k){function l(h){h=k.call(this,h)||this;return h.state={loading:!1},h}return Object(p.d)(l,k),l.prototype.render=function(h){var e=this,d=this.props,g=d.handlePrimaryClick,u=d.handleCancelClick;d=d.updatable;var x=this.state.loading;return[h(t.a,{key:"share-dlg-header-loading",
onCancel:u,title:q.DependentItems.updateSharing}),h("div",{key:"dependent-item-view-content","class":"share-dlg__contents"},h(m.a,{key:"dependent-items"})),h("div",{"class":"share-dlg__container-footer",key:"share-view-footer"},h("button",{"class":"share-dlg__button--primary",key:"dependent-item-view-save",id:"share-modal-primary",loading:x,onclick:function(){e.setState({loading:!0});g()}},d?q.update:q.ok),d&&h("button",{"class":"share-dlg__button--secondary",key:"dependent-item-view-close",id:"share-modal-secondary",
onclick:u},q.cancel))]},l}(c.Component);a.a=Object(c.connect)(function(k){var l=k.utilities;k=k.resources;var h=k.dependentItems,e=h.needShareLevelUpdate,d=h.needGroupSharingUpdate,g=h.needEditableWarning,u=k.selectedOptions;return{updatable:0<Object(p.g)(Object(p.g)(Object(p.g)(Object(p.g)([],h.needBDFSDatastoreUpdate),e),d),g).length,handleCancelClick:function(){l.onComplete({selectedOptions:u})}}},function(k){return{handlePrimaryClick:function(){k(n.i)}}})(b)},633:function(c,a,b){var p=b(0),q=
b(39);c=b(16);var t=b(291),m=b(61);b=function(n){function k(){return null!==n&&n.apply(this,arguments)||this}return Object(p.d)(k,n),k.prototype.render=function(l){var h=this.props,e=h.dependentItems,d=e.needGroupSharingUpdate,g=e.notEditable,u=e.premium,x=e.needEditableWarning,y=e.needPubliclyEditableWarning,B=e.needDataCollectionEnabled,C=e.needGroupDependentApplicationWarning,z=e.needBDFSDatastoreUpdate,D=h.portal,E=h.items,A=h.helpMap;h=h.authenticatedItems;e=Object(p.g)(Object(p.g)([],e.needShareLevelUpdate),
d);var F=e.map(function(H){return H.id});e=e.filter(function(H,I){return F.indexOf(H.id)===I});d=1===E.length&&"Web Map"===E[0].type;E=q.DependentItems[d?"premiumItemsWebMap":"premiumItems"];A=A&&l("a",{href:""+D.helpBase+A[120001307]},q.DependentItems[d?"premiumTextMap":"premiumText"]);return l("div",{"class":"dependent-items-confirmation",key:"dependent-items-confirmation"},l(t.a,{key:"need-editable-warning-list",items:x,title:q.DependentItems.needEditableTitle,text:q.DependentItems.needEditableText,
portal:D,error:!0}),l(t.a,{key:"need-editable-warning-public-list",items:y,title:q.DependentItems.needPubliclyEditableTitle,text:q.DependentItems.needPubliclyEditableText,portal:D,error:!0}),l(t.a,{key:"authenticated-items-warning",items:h,title:q.DependentItems.authenticatedItemsTitle,text:q.DependentItems.authenticatedItemsText,portal:D,error:!0}),l(t.a,{key:"need-data-collection-endabled-list",items:B,title:q.DependentItems.needDataCollectionEnabledTitle,text:q.DependentItems.needDataCollectionEnabledText,
portal:D,error:!0}),l(t.a,{key:"group-dependent",items:C,title:q.DependentItems.groupDependentApplicationTitle,text:q.DependentItems.groupDependentApplicationText,portal:D,error:!0}),l(t.a,{key:"needs-update-list",items:e,title:q.DependentItems.updateItemsCount,text:q.DependentItems.confirmationDescription,portal:D}),l(t.a,{key:"premium-items-list",items:u,title:E,text:A,portal:D}),l(t.a,{key:"not-editable-list",items:g,title:q.DependentItems.uneditableItemsCount,portal:D}),l(t.a,{key:"bdfs-datastore-dependent",
items:z,title:q.DependentItems.updateItemsCount,text:q.DependentItems.needBDFSDatastoreUpdateText,portal:D,error:!0}))},k}(c.Component);a.a=Object(c.connect)(function(n){var k=n.resources,l=k.items,h=k.helpMap;n=n.utilities.portal;return{dependentItems:k.dependentItems,authenticatedItems:Object(m.c)(l,k.selectedOptions,k.selectedOptionsDirty),portal:n,helpMap:h,items:l}},function(){return{}})(b)},634:function(c,a,b){var p=b(0),q=b(39);c=b(16);var t=b(101);b=function(m){function n(){return null!==
m&&m.apply(this,arguments)||this}return Object(p.d)(n,m),n.prototype.render=function(k){var l=this.props,h=l.item;l=l.portal;var e=h.name||h.title,d=Object(t.a)(l)+"/home/item.html?id\x3d"+h.id;return k("li",{key:h.id,"class":"dependent-item"},k("h3",{"class":"dependent-item__title"},l?k("a",{href:d,target:"_blank",rel:"noreferrer"},e):k("span",null,e)),k("span",{"class":"dependent-item__details"},h.iconURI&&k("img",{"class":"dependent-item__icon",src:h.iconURI}),k("p",{"class":"dependent-item__description"},
q.DependentItems.itemDescription.replace("${type}",h.displayName||h.type).replace("${owner}",h.owner?h.owner:""))))},n}(c.Component);a.a=b},68:function(c,a,b){var p;b.d(a,"a",function(){return p});(function(q){q.LOADING_GROUPS="LOADING_GROUPS";q.LOAD_GROUPS_SUCCESS="LOAD_GROUPS_SUCCESS";q.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL";q.SELECT_GROUPS="SELECT_GROUPS";q.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS";q.DESELECT_GROUPS="DESELECT_GROUPS";q.REVERT_GROUPS="REVERT_GROUPS";q.CLEAR_SELECTION="CLEAR_SELECTION";
q.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS";q.SET_HAS_GROUPS="SET_HAS_GROUPS"})(p||(p={}))},78:function(c,a,b){b.d(a,"a",function(){return l});b.d(a,"b",function(){return h});var p=b(63);c=b(5);var q=b(123),t=b(122),m=b(117),n=b(121),k=b(120),l=function(e,d,g){return Object(p.a)(Object(k.a)(e),Object(n.a)(e),Object(m.a)(d),Object(t.a)(e),Object(q.a)(e))(g)},h=Object(p.a)(Object(c.e)("patchedDescription"),Object(c.e)("thumbURI"),Object(c.e)("iconURI"),Object(c.e)("displayName"),Object(c.e)("badges"))},
83:function(c,a,b){var p;b.d(a,"a",function(){return p});(function(q){q.SET_SEARCH_STRING="SET_SEARCH_STRING";q.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER";q.CHANGE_SORT_FIELD="CHANGE_SORT_FIELD";q.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER";q.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER";q.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER";q.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER";q.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER";q.SET_USERS="SET_USERS";q.CLEAR_FILTERS=
"CLEAR_FILTERS"})(p||(p={}))},877:function(c,a,b){b.r(a);var p=b(0);c=b(16);var q=b(440);b.d(a,"reducers",function(){return q.b});b.d(a,"initialState",function(){return q.a});var t=b(623),m=b(294),n=b.n(m),k=b(26);b=function(l){function h(){return null!==l&&l.apply(this,arguments)||this}return Object(p.d)(h,l),h.prototype.render=function(e){var d=this.props.currentView;return e("div",{key:"share-container","class":"share-dlg__container"},e(n.a,{key:"sharing-overlay",scrollable:!0,size:d===k.a.GROUP_BROWSER?
"large":"small"},e(t.a[d],{key:d})))},h}(c.Component);a["default"]=Object(c.connect)(function(l){return{currentView:l.config.currentView}},function(l){return{}})(b)},90:function(c,a,b){b.d(a,"a",function(){return p});b.d(a,"b",function(){return q});b.d(a,"c",function(){return t});b.d(a,"d",function(){return m});b.d(a,"e",function(){return n});b.d(a,"h",function(){return k});b.d(a,"i",function(){return l});b.d(a,"j",function(){return h});b.d(a,"k",function(){return e});b.d(a,"g",function(){return d});
b.d(a,"f",function(){return g});var p="M15.5 5l-7 7-7-7zM3.914 6L8.5 10.586 13.086 6z",q="M15.707 20h-1.414l-7.5-7.5 7.5-7.5h1.414l-7.5 7.5z",t="M13.802 4.306a.683.683 0 0 1 .708.76.528.528 0 0 1 .357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 0 1-.046-1.135zM11.5 23A11.5 11.5 0 0 1 0 11.5v-.021a11.738 11.738 0 0 1 2.057-6.534 12.15 12.15 0 0 1 4.12-3.637h.005A11.595 11.595 0 0 1 13.618.202l.002.002a11.525 11.525 0 0 1 9.325 10.188v.004A11.497 11.497 0 0 1 11.5 23zm9.795-7.748a7.604 7.604 0 0 1-.666-1.746 4.55 4.55 0 0 1-.651-1.655 1.383 1.383 0 0 1-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 0 0-.992.133l-.113.177-.794.021a2.538 2.538 0 0 1-.483-.213 7.396 7.396 0 0 0-.628.541 1.463 1.463 0 0 1-.941.97 1.544 1.544 0 0 0-.961 1.24 2.264 2.264 0 0 1-.449 1.34 2.446 2.446 0 0 1 .811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 0 1 .028.937 1.452 1.452 0 0 1-.025.098 2.11 2.11 0 0 1 .327 1.883 10.447 10.447 0 0 0 4.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 0 1 1.517 2.251 3.648 3.648 0 0 1 .435.592 10.477 10.477 0 0 0-3.824-8.016h-.103a1.768 1.768 0 0 1-1.938 2.838 4.716 4.716 0 0 1-.723.7 1.525 1.525 0 0 1 .97.078l.183-.654a6.478 6.478 0 0 1 2.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 0 0-.843-1.825 18.554 18.554 0 0 0 .793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 0 1-.102.147zm-8.209 16.74a1.557 1.557 0 0 1 .244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 0 0-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 0 0-2.22-.08 1.602 1.602 0 0 1-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 0 1 1.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 0 1 .384.135s.282.166.372.2l.074-.002a3.411 3.411 0 0 1 2.208-.269.557.557 0 0 1 .432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 0 0 .066-.184.48.48 0 0 1 .562-.362c.2.01.514.231.703.231a4.382 4.382 0 0 0 .786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 0 0-.161-.218c.007.01-.022.034-.042.068a.52.52 0 0 1-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 0 0-.72-.63.545.545 0 0 1-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 0 1-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 0 0 .887-1.249.868.868 0 0 1-.316-.254.095.095 0 0 0-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 0 1-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 0 1 .34-.69 1.71 1.71 0 0 1 .588-.442 10.406 10.406 0 0 0-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 0 0-1.884.475 7.258 7.258 0 0 1-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 0 0-.588-.039A10.467 10.467 0 0 0 1 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 0 1 2.006 1.477.495.495 0 0 1 .111.525c-.07.264-.346.34-.568.502a.431.431 0 0 0-.21.376 10.425 10.425 0 0 0 11.017 2.669z",
m="M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",n="M15 16h4v-4h-4zm1-3h2v2h-2zM5 11h4V7H5zm1-3h2v2H6zm16 14V4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1zm-8 0v-5h-4v5H3V5h3V3h5v2h10v17zm-9-6h4v-4H5zm1-3h2v2H6zm4-2h4V7h-4zm1-3h2v2h-2zm-1 8h4v-4h-4zm1-3h2v2h-2zm4-2h4V7h-4zm1-3h2v2h-2z",k="M16 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4.75 1h-9.5A2.25 2.25 0 0 0 5 10.25v9.25A1.5 1.5 0 0 0 6.5 21H8v2.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 .75-.75V21h1.5a1.5 1.5 0 0 0 1.5-1.5v-9.25A2.25 2.25 0 0 0 16.75 8zM18 19.5a.501.501 0 0 1-.5.5H16v-8h-1v11H9V12H8v8H6.5a.501.501 0 0 1-.5-.5v-9.25A1.251 1.251 0 0 1 7.25 9h9.5A1.251 1.251 0 0 1 18 10.25z",
l="M11 4a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8.001 6A2 2 0 1 1 10 4a2 2 0 0 1-1.999 2zM10 10h1v.921a3.23 3.23 0 0 0-1 2.329zm0 8.5a2.487 2.487 0 0 0 .055.5H5.75a.75.75 0 0 1-.75-.75V16h-.5A1.5 1.5 0 0 1 3 14.5V9.25A2.25 2.25 0 0 1 5.25 7h5.5a2.232 2.232 0 0 1 1.308.426A3.95 3.95 0 0 0 12 8a3.96 3.96 0 0 0 .593 2.067 3.21 3.21 0 0 0-.593.189V9.25A1.251 1.251 0 0 0 10.75 8h-5.5A1.251 1.251 0 0 0 4 9.25v5.25a.5.5 0 0 0 .5.5H5v-5h1v8h4zM19 8a3 3 0 1 0-3 3 3 3 0 0 0 3-3zm-2.999 2A2 2 0 1 1 18 8a2 2 0 0 1-1.999 2zm2.749 1h-5.5A2.25 2.25 0 0 0 11 13.25v5.25a1.5 1.5 0 0 0 1.5 1.5h.5v2.25a.75.75 0 0 0 .75.75h4.5a.75.75 0 0 0 .75-.75V20h.5a1.5 1.5 0 0 0 1.5-1.5v-5.25A2.25 2.25 0 0 0 18.75 11zM20 18.5a.5.5 0 0 1-.5.5H19v-5h-1v8h-4v-8h-1v5h-.5a.5.5 0 0 1-.5-.5v-5.25A1.251 1.251 0 0 1 13.25 12h5.5A1.251 1.251 0 0 1 20 13.25z",
h="M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",e="M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z",d="M21 10v7a3.003 3.003 0 0 1-3 3H4v-1h14a2.003 2.003 0 0 0 2-2v-7a2.003 2.003 0 0 0-2-2H6.691l2.649 2.648-.707.707-3.89-3.89 3.832-3.833.707.707L6.622 7H18a3.003 3.003 0 0 1 3 3z",g="M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"},
99:function(c,a,b){function p(l,h){if(null==l?0:l.length)for(var e=void 0,d=0;d<l.length;d++)if(h(e=l[d]))return e}function q(l){return l.filter(function(h){return 0<h.length})}function t(l,h,e){var d=[];return h.forEach(function(g){(e?g[e].toLowerCase()===l.toLowerCase():g.toLowerCase()===l.toLowerCase())?d.unshift(g):d.push(g)}),d}b.d(a,"e",function(){return m});b.d(a,"f",function(){return n});b.d(a,"c",function(){return p});b.d(a,"b",function(){return q});b.d(a,"a",function(){return k});b.d(a,
"d",function(){return t});c=b(15);var m=function(l,h,e){return e.indexOf(l)===h},n=Object(c.a)(function(l,h){var e={};return h.filter(function(d){return!e[d[l]]&&(e[d[l]]=!0,!0)})}),k=function(l,h){return l.length===h.length&&l.reduce(function(e,d){return e&&-1<h.indexOf(d)},!0)}}})})},"arcgis-components/GroupBrowser/index":function(){define("../Component dojo/i18n!../GroupBrowser/nls/resources dojo/_base/kernel ../Loaders/LoaderBars ../Buttons/Toggle dojo/debounce ../Dropdowns/AccordionDropdown/index dojo/string ../Buttons/IconButton ../Navigation/Pager/index ../Modals/MobileWrap ../Dropdowns/SortDropdown/index ../Filters/CreatedFilter/index ../Buttons/FilterChip/index ../GroupCards/GroupCheckCard/index ../GroupCards/MultiselectableGroupCard/index".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){return function(h){function e(g){if(d[g])return d[g].exports;var u=d[g]={i:g,l:!1,exports:{}};return h[g].call(u.exports,u,u.exports,e),u.l=!0,u.exports}var d={};return e.m=h,e.c=d,e.d=function(g,u,x){e.o(g,u)||Object.defineProperty(g,u,{enumerable:!0,get:x})},e.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"});Object.defineProperty(g,"__esModule",{value:!0})},e.t=function(g,u){if((1&
u&&(g=e(g)),8&u)||4&u&&"object"==typeof g&&g&&g.__esModule)return g;var x=Object.create(null);if(e.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:g}),2&u&&"string"!=typeof g)for(var y in g)e.d(x,y,function(B){return g[B]}.bind(null,y));return x},e.n=function(g){var u=g&&g.__esModule?function(){return g["default"]}:function(){return g};return e.d(u,"a",u),u},e.o=function(g,u){return Object.prototype.hasOwnProperty.call(g,u)},e.p="",e(e.s=855)}({0:function(h,e,d){function g(E,A){function F(){this.constructor=
E}if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");z(E,A);E.prototype=null===A?Object.create(A):(F.prototype=A.prototype,new F)}function u(E,A){var F={},H;for(H in E)Object.prototype.hasOwnProperty.call(E,H)&&0>A.indexOf(H)&&(F[H]=E[H]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(H=Object.getOwnPropertySymbols(E);I<H.length;I++)0>A.indexOf(H[I])&&Object.prototype.propertyIsEnumerable.call(E,H[I])&&
(F[H[I]]=E[H[I]])}return F}function x(E,A,F,H){var I,L=arguments.length,J=3>L?A:null===H?H=Object.getOwnPropertyDescriptor(A,F):H;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(E,A,F,H);else for(var O=E.length-1;0<=O;O--)(I=E[O])&&(J=(3>L?I(J):3<L?I(A,F,J):I(A,F))||J);return 3<L&&J&&Object.defineProperty(A,F,J),J}function y(E,A,F,H){return new (F||(F=Promise))(function(I,L){function J(fa){try{P(H.next(fa))}catch(V){L(V)}}function O(fa){try{P(H["throw"](fa))}catch(V){L(V)}}
function P(fa){var V;fa.done?I(fa.value):(V=fa.value,V instanceof F?V:new F(function(ba){ba(V)})).then(J,O)}P((H=H.apply(E,A||[])).next())})}function B(E,A){function F(P){return function(fa){return function(V){if(H)throw new TypeError("Generator is already executing.");for(;O;)try{if(H=1,I&&(L=2&V[0]?I["return"]:V[0]?I["throw"]||((L=I["return"])&&L.call(I),0):I.next)&&!(L=L.call(I,V[1])).done)return L;switch(I=0,L&&(V=[2&V[0],L.value]),V[0]){case 0:case 1:L=V;break;case 4:return O.label++,{value:V[1],
done:!1};case 5:O.label++;I=V[1];V=[0];continue;case 7:V=O.ops.pop();O.trys.pop();continue;default:if(!(L=O.trys,(L=0<L.length&&L[L.length-1])||6!==V[0]&&2!==V[0])){O=0;continue}if(3===V[0]&&(!L||V[1]>L[0]&&V[1]<L[3]))O.label=V[1];else if(6===V[0]&&O.label<L[1])O.label=L[1],L=V;else if(L&&O.label<L[2])O.label=L[2],O.ops.push(V);else{L[2]&&O.ops.pop();O.trys.pop();continue}}V=A.call(E,O)}catch(ba){V=[6,ba],I=0}finally{H=L=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([P,fa])}}var H,
I,L,J,O={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return J={next:F(0),"throw":F(1),"return":F(2)},"function"==typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J}function C(E,A){for(var F=0,H=A.length,I=E.length;F<H;F++,I++)E[I]=A[F];return E}d.d(e,"d",function(){return g});d.d(e,"a",function(){return D});d.d(e,"f",function(){return u});d.d(e,"c",function(){return x});d.d(e,"b",function(){return y});d.d(e,"e",function(){return B});d.d(e,"g",function(){return C});
var z=function(E,A){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,H){F.__proto__=H}||function(F,H){for(var I in H)Object.prototype.hasOwnProperty.call(H,I)&&(F[I]=H[I])})(E,A)},D=function(){return(D=Object.assign||function(E){for(var A,F=1,H=arguments.length;F<H;F++)for(var I in A=arguments[F])Object.prototype.hasOwnProperty.call(A,I)&&(E[I]=A[I]);return E}).apply(this,arguments)};Object.create;Object.create},101:function(h,e,d){d.d(e,"a",function(){return u});d.d(e,"b",
function(){return x});var g=d(0),u=function(y){return y?y.urlKey?location.protocol+"//"+y.urlKey+"."+y.customBaseUrl:location.protocol+"//"+y.portalHostname:""},x=function(y){return Object(g.a)(Object(g.a)({},y),{baseUrl:u(y)})}},1019:function(h,e,d){d.d(e,"a",function(){return u});var g=d(204),u=function(){return{type:g.a.TOGGLE_SORT_DROPDOWN}}},128:function(h,e,d){d.d(e,"a",function(){return u});d.d(e,"b",function(){return x});var g=d(0);h=d(15);var u=function(y,B){var C;return B.thumbnail&&(C=
y.restUrl+"/community/groups/"+B.id+"/info/"+B.thumbnail+(y.credential?"?token\x3d"+y.credential.token:"")),C},x=Object(h.a)(function(y,B){return Object(g.a)(Object(g.a)({},B),{thumbURI:u(y,B)})})},137:function(h,e,d){d.d(e,"a",function(){return g});d.d(e,"d",function(){return y});d.d(e,"c",function(){return B});d.d(e,"e",function(){return C});d.d(e,"f",function(){return z});var g,u=d(0),x=d(25);!function(D){D.LOADING="loading";D.LOADED="loaded";D.FAILED="failed"}(g||(g={}));var y=function(D){var E=
D.selectedGroups,A=D.selectorItems;return 0===A.length?Object.keys(E).map(function(F){return E[F].group}):Object.keys(E).filter(function(F){return C(E[F],A)}).map(function(F){return E[F].group})},B=function(D){var E=D.initialSelectedGroups,A=D.selectedGroups,F=Object.keys(A).map(function(H){return A[H].group.id});return Object.keys(E).map(function(H){return E[H].group.id}).filter(function(H){return 0>F.indexOf(H)}).map(function(H){return E[H].group})},C=function(D,E){return!D.selectedByIds||D.selectedByIds.length===
E.length},z={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},status:g.LOADING,total:0,hasGroups:!0};e.b=function(D,E){switch(void 0===D&&(D=z),E.type){case x.a.DESELECT_GROUPS:return Object(u.a)(Object(u.a)({},D),{selectedGroups:E.payload.reduce(function(H,I){var L=I.id;H[L];return Object(u.f)(H,["symbol"==typeof L?L:L+""])},D.selectedGroups)});case x.a.REVERT_GROUPS:return E.payload?Object(u.a)(Object(u.a)({},D),{selectedGroups:E.payload.reduce(function(H,I){var L;if(D.initialSelectedGroups[I.id])return Object(u.a)(Object(u.a)({},
H),((L={})[I.id]=D.initialSelectedGroups[I.id],L));L=I.id;H[L];return Object(u.f)(H,["symbol"==typeof L?L:L+""])},D.selectedGroups)}):Object(u.a)(Object(u.a)({},D),{selectedGroups:Object(u.a)({},D.initialSelectedGroups)});case x.a.SELECT_GROUPS:var A=D.selectorItems.map(function(H){return H.id});return Object(u.a)(Object(u.a)({},D),{selectedGroups:E.payload.reduce(function(H,I){var L;return Object(u.a)(Object(u.a)({},H),((L={})[I.group.id]=Object(u.a)({selectedByIds:A},I),L))},D.selectedGroups)});
case x.a.SET_INITIAL_GROUPS:var F=E.payload.reduce(function(H,I){var L;return Object(u.a)(Object(u.a)({},H),((L={})[I.group.id]=I,L))},{});return Object(u.a)(Object(u.a)({},D),{selectedGroups:F,initialSelectedGroups:Object(u.a)({},F)});case x.a.SET_SELECTOR_ITEMS:return Object(u.a)(Object(u.a)({},D),{selectorItems:E.payload});case x.a.CLEAR_SELECTION:return Object(u.a)(Object(u.a)({},D),{selectedGroups:{}});case x.a.LOADING_GROUPS:return Object(u.a)(Object(u.a)({},D),{status:g.LOADING});case x.a.LOAD_GROUPS_SUCCESS:return Object(u.a)(Object(u.a)({},
D),{displayGroups:E.payload.results,total:E.payload.total,status:g.LOADED});case x.a.LOAD_GROUPS_FAIL:return Object(u.a)(Object(u.a)({},D),{displayGroups:[],status:g.FAILED});case x.a.SET_HAS_GROUPS:return Object(u.a)(Object(u.a)({},D),{hasGroups:E.payload});default:return D}}},144:function(h,e,d){d.d(e,"d",function(){return B});d.d(e,"e",function(){return C});d.d(e,"b",function(){return z});d.d(e,"c",function(){return D});d.d(e,"a",function(){return E});d.d(e,"f",function(){return A});var g=d(0),
u=d(181),x=d(163),y=d(68),B=function(F){return 1<F.length&&Object(x.a)(),{type:y.a.SELECT_GROUPS,payload:F.map(function(H){return{group:Object(u.c)(H)}})}},C=function(F){return{type:y.a.SET_INITIAL_GROUPS,payload:F.map(function(H){return Object(g.a)(Object(g.a)({},H),{group:Object(u.c)(H.group)})})}},z=function(F){return 1<F.length&&Object(x.b)(),{type:y.a.DESELECT_GROUPS,payload:F}},D=function(F){return{type:y.a.REVERT_GROUPS,payload:F}},E=function(){return Object(x.c)(),{type:y.a.CLEAR_SELECTION}},
A=function(F){return{type:y.a.SET_SELECTOR_ITEMS,payload:F}}},148:function(h,e,d){d.d(e,"a",function(){return u});var g=d(0);h=d(15);var u=Object(h.a)(function(x,y){var B=Object(g.a),C=Object(g.a)({},y);var z=y.thumbnail?x.restUrl+"/community/users/"+y.username+"/info/"+y.thumbnail+(x.credential?"?token\x3d"+x.credential.token:""):void 0;return B(C,{thumbURI:z})})},15:function(h,e,d){function g(x){return function B(){for(var C=this,z=[],D=0;D<arguments.length;D++)z[D]=arguments[D];return z.length>=
x.length?x.call.apply(x,Object(u.g)([this],z)):function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];return B.call.apply(B,Object(u.g)(Object(u.g)([C],z),E))}}}d.d(e,"a",function(){return g});var u=d(0)},150:function(h,e){h.exports=w},159:function(h,e,d){d.d(e,"b",function(){return F});d.d(e,"a",function(){return I});var g=d(0),u=d(181),x=d(30),y=d(163),B=d(54),C=d(68),z=d(28),D=d(61),E=d(38),A=d(26),F=function(ka,la){H(la()).then(function(ma){var ha=la();ha=Object(B.b)(ha)?ha:ha.gbState;
var Z=ha.utils;ha.ui.focus.focusSelectAll&&Object(y.c)();ka({type:C.a.LOAD_GROUPS_SUCCESS,payload:Object(g.a)(Object(g.a)({},ma),{results:ma.results.map(function(W){return Object(u.b)(Z.portal,W)})})})})["catch"](function(ma){var ha=la();(Object(B.b)(ha)?ha:ha.gbState).ui.focus.focusSelectAll&&Object(y.c)();ka({type:C.a.LOAD_GROUPS_FAIL,payload:ma})})},H=function(ka){ka=Object(B.b)(ka)?ka:ka.gbState;var la=ka.utils,ma=la.request,ha=la.portal,Z=ka.config;la=Z.groupsPerPage;var W=Z.withinShare,Q=(Z.withinAppConfig,
ka.parameters);Z=Q.filter;Q=Q.sort;var ia=ka.ui.page.currentPageNumber,R={q:ba(ka),num:la,sortField:Q.field,sortOrder:Q.order,start:(ia-1)*la+1};return W&&(R.searchUserAccess="groupMember",R.searchUserName=Z.currentUsername),Z.designationFilter!==E.b.orgSettings||O(ha)?new z.Promise(function(S,N){Object(x.g)(ma,ha,R).then(S,N)}):new z.Promise(function(S){S({query:R.q,total:0,start:1,num:100,nextStart:-1,results:[]})})},I=function(ka){var la=ka.user;ka=ka.state;ka=Object(B.b)(ka)?ka:ka.gbState;var ma=
ka.utils,ha=ma.request,Z=ma.portal;ka=Object(g.a)(Object(g.a)({},ka),{parameters:Object(g.a)(Object(g.a)({},ka.parameters),{filter:Object(g.a)(Object(g.a)({},ka.parameters.filter),{currentUsername:la.username})})});var W={q:ba(ka),num:100,searchUserAccess:"groupMember",searchUserName:la.username};return(new z.Promise(function(Q,ia){return Object(x.g)(ha,Z,W).then(function(R){if(-1!==R.nextStart){var S=Math.ceil(R.total/100)-1,N=[R.results];R=function(aa){N.push(new z.Promise(function(ea,Y){var T=
100*(aa+1)+1;Object(x.g)(ha,Z,Object(g.a)(Object(g.a)({},W),{start:T})).then(function(ca){ea(ca.results)},Y)}))};for(var X=0;X<S;X++)R(X);z.Promise.all(N).then(function(aa){Q(Object(D.b)(aa))})}else Q(R.results)},ia)}))["catch"](function(Q){throw Q;})},L=function(ka){var la,ma=ka.shareMode,ha=ka.currentUsername,Z=ka.portalUser;ka=ka.userGroups;var W=[];switch(ka&&ka.forEach(function(Q){var ia,R=null===(ia=Q.userMembership)||void 0===ia?void 0:ia.memberType;!Q.isViewOnly||"owner"!==R&&"admin"!==R||
W.push(Q.id)}),W.length&&(la="(isviewonly:false OR "+W.join(" OR ")+")"),ma){case A.d.DEFAULT:return la||"(owner:"+ha+" OR isviewonly:false)";case A.d.GROUP:return"owner:"+ha+" -capabilities:updateitemcontrol";case A.d.ADMIN:return Z.username===ha?"(isviewonly:false OR owner:"+Z.username+") -capabilities:updateitemcontrol":"(owner:"+ha+" OR isviewonly:false)";default:return""}},J=function(ka,la){0!==(null==ka?void 0:ka.indexOf("id:"))||-1<la.indexOf(ka)||la.push(ka)},O=function(ka){var la,ma,ha,Z,
W,Q=[],ia=[ka.featuredItemsGroupQuery,ka.basemapGalleryGroupQuery,ka.templatesGroupQuery,ka["2DStylesGroupQuery"],ka.stylesGroupQuery,ka.analysisLayersGroupQuery,ka.galleryTemplatesGroupQuery];if(ka.hasModernHomePageEnabled){var R=(null===(ma=null===(la=ka.homePageConfig)||void 0===la?void 0:la.content)||void 0===ma?void 0:ma.filter(function(S){return"gallery"===S.type&&!!S.groupId}))||[];0<R.length&&R.forEach(function(S){J("id:"+S.groupId,Q)})}else ia.push(ka.homePageFeaturedContent);return ia.forEach(function(S){J(S,
Q)}),null===(ha=ka.featuredGroups)||void 0===ha||ha.forEach(function(S){(S=S.id)&&J("id:"+S,Q)}),null===(W=null===(Z=ka.userDefaults)||void 0===Z?void 0:Z.groups)||void 0===W||W.forEach(function(S){J("id:"+S,Q)}),0<Q.length?"("+Q.join(" OR ")+")":""},P=function(ka){var la=ka.portal;switch(ka.designationFilter){case E.b.openData:return"isopendata:true";case E.b.updateGroups:return"capabilities:updateitemcontrol";case E.b.distributed:return"capabilities:distributed";case E.b.administrative:return"isleavingdisallowed:true";
case E.b.orgSettings:return O(la)||"";default:return""}},fa=function(ka){var la=ka.portal,ma=ka.username,ha=ka.currentUsername,Z=ka.userType,W=ka.withinAppConfig;ma=ka.shareMode===A.d.ADMIN&&ha||ma;W=la.isPortal&&W?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":"";switch(ka.ownerFilter){case E.d.itemOwner:return"owner:"+ma+" "+W;case E.d.inOrg:return"-owner:"+ma+" orgid:"+la.id+" "+W;case E.d.outsideOrg:return Z===A.e.PUBLIC?"-owner:"+ma+" "+W:"(orgid: [0 TO \\{]) -orgid:"+
la.id+" "+W;default:return W}},V=function(ka){return ka?"created: ["+(la=ka).start+" TO "+la.end+"]":"";var la},ba=function(ka){var la=ka.utils,ma=la.portal;la=la.portalUser;var ha=ka.config,Z=ha.shareMode,W=ha.userType,Q=ha.withinAppConfig,ia=ha.hasIndoorsSpaces;ka=ka.parameters.filter;var R=ka.designationFilter,S=ka.membershipFilter,N=ka.dateCreatedFilter,X=ka.currentUsername,aa=ka.ownerFilter;return[ha.baseQ+" "+ka.searchString,L({shareMode:Z,currentUsername:X,portalUser:la,userGroups:ha.userGroups}),
ia?"-capabilities:distributed":P({designationFilter:R,portal:ma}),ia?"membershipaccess:org":S?"anyOrg"===S?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:"+S:"",V(N),fa({ownerFilter:aa,portal:ma,username:la.username,currentUsername:X,shareMode:Z,userType:W,withinAppConfig:Q})].filter(function(ea){return ea}).join(" ").trim()}},16:function(h,e){h.exports=K},163:function(h,e,d){function g(){y("gb__select-all-input")}function u(){y("gb__clear-selection-btn")}function x(){setTimeout(function(){var B=
document.querySelector(".gcard-gcc__container");B&&(B=B.querySelector(".btn-2018check__input"))&&B.focus()},50)}function y(B){setTimeout(function(){var C=document.querySelector("#"+B);C&&C.focus()},50)}d.d(e,"c",function(){return g});d.d(e,"a",function(){return u});d.d(e,"b",function(){return x})},170:function(h,e){var d=function(){return this}();try{d=d||(new Function("return this"))()}catch(g){"object"==typeof window&&(d=window)}h.exports=d},175:function(h,e,d){var g;d.d(e,"a",function(){return g});
(g||(g={})).TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"},181:function(h,e,d){d.d(e,"b",function(){return y});d.d(e,"c",function(){return B});d.d(e,"a",function(){return C});var g=d(63);h=d(5);var u=d(99),x=d(128),y=function(z,D){return Object(g.a)(Object(x.b)(z))(D)},B=Object(g.a)(Object(h.e)("thumbURI")),C=function(z){var D=z.initialSelectedByIds;return!Object(u.a)(z.selectedBy.map(function(E){return E.id}),D)}},186:function(h,e,d){d.d(e,"b",function(){return u});d.d(e,"g",function(){return x});d.d(e,
"h",function(){return y});d.d(e,"e",function(){return B});d.d(e,"f",function(){return C});d.d(e,"d",function(){return z});d.d(e,"c",function(){return D});d.d(e,"a",function(){return E});var g=d(83),u=function(A){return{type:g.a.SET_SEARCH_STRING,payload:A}},x=function(A){return{type:g.a.UPDATE_OWNER_FILTER,payload:A}},y=function(A){return{type:g.a.UPDATE_USERNAME_FILTER,payload:A}},B=function(A){return{type:g.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:A}},C=function(A){return{type:g.a.UPDATE_MEMBERSHIP_FILTER,
payload:A}},z=function(A){return{type:g.a.UPDATE_CREATED_ON_FILTER,payload:{section:A.section,created:A.created}}},D=function(A){return{type:g.a.SET_USERS,payload:A}},E=function(A){return{type:g.a.CLEAR_FILTERS,payload:A}}},189:function(h,e){function d(){throw Error("setTimeout has not been defined");}function g(){throw Error("clearTimeout has not been defined");}function u(L){if(D===setTimeout)return setTimeout(L,0);if((D===d||!D)&&setTimeout)return D=setTimeout,setTimeout(L,0);try{return D(L,0)}catch(J){try{return D.call(null,
L,0)}catch(O){return D.call(this,L,0)}}}function x(){H&&A&&(H=!1,A.length?F=A.concat(F):I=-1,F.length&&y())}function y(){if(!H){var L=u(x);H=!0;for(var J=F.length;J;){A=F;for(F=[];++I<J;)A&&A[I].run();I=-1;J=F.length}A=null;H=!1;(function(O){if(E===clearTimeout)return clearTimeout(O);if((E===g||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(O);try{E(O)}catch(P){try{return E.call(null,O)}catch(fa){return E.call(this,O)}}})(L)}}function B(L,J){this.fun=L;this.array=J}function C(){}var z=h.exports=
{};try{var D="function"==typeof setTimeout?setTimeout:d}catch(L){D=d}try{var E="function"==typeof clearTimeout?clearTimeout:g}catch(L){E=g}!0;var A,F=[],H=!1,I=-1;z.nextTick=function(L){var J=Array(arguments.length-1);if(1<arguments.length)for(var O=1;O<arguments.length;O++)J[O-1]=arguments[O];F.push(new B(L,J));1!==F.length||H||u(y)};B.prototype.run=function(){this.fun.apply(null,this.array)};z.title="browser";z.browser=!0;z.env={};z.argv=[];z.version="";z.versions={};z.on=C;z.addListener=C;z.once=
C;z.off=C;z.removeListener=C;z.removeAllListeners=C;z.emit=C;z.prependListener=C;z.prependOnceListener=C;z.listeners=function(L){return[]};z.binding=function(L){throw Error("process.binding is not supported");};z.cwd=function(){return"/"};z.chdir=function(L){throw Error("process.chdir is not supported");};z.umask=function(){return 0}},192:function(h,e,d){var g;d.d(e,"a",function(){return g});(g||(g={})).USER_DETAILS_LOADED="USER_LOADED"},204:function(h,e,d){var g;d.d(e,"a",function(){return g});(function(u){u.SET_PAGE=
"SET_PAGE";u.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN";u.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"})(g||(g={}))},205:function(h,e){h.exports=v},207:function(h,e,d){d.d(e,"b",function(){return x});var g=d(0),u=d(25),x={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};e.a=function(y,B){switch(void 0===y&&(y=x),B.type){case u.a.ENABLE_USER_TOGGLE:return Object(g.a)(Object(g.a)({},y),{enableUserToggle:!0});
case u.a.SET_SHARE_MODE:return Object(g.a)(Object(g.a)({},y),{shareMode:B.payload});case u.a.SET_USER_TYPE:return Object(g.a)(Object(g.a)({},y),{userType:B.payload});case u.a.TRUSTED_ORGS_LOADED:return Object(g.a)(Object(g.a)({},y),{hasTrustedOrgs:0<B.payload.length});case u.a.USER_DETAILS_LOADED:return Object(g.a)(Object(g.a)({},y),{userGroups:B.payload});case u.a.SET_SELECTOR_ITEMS:var C=!!B.payload.find(function(z){var D;return-1<(null===(D=null==z?void 0:z.typeKeywords)||void 0===D?void 0:D.indexOf("EditExtensionIndoorsSpaces"))});
return Object(g.a)(Object(g.a)({},y),{hasIndoorsSpaces:C});default:return y}}},208:function(h,e,d){d.d(e,"b",function(){return u});h=d(16);var g=d(209);d=d(38);var u={sort:g.b,filter:d.f};e.a=Object(h.combineReducers)({sort:g.a,filter:d.e})},209:function(h,e,d){d.d(e,"b",function(){return x});var g=d(0),u=d(25),x={field:"title",order:"asc"},y={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};e.a=function(B,C){switch(void 0===B&&(B=x),C.type){case u.a.CHANGE_SORT_FIELD:return Object(g.a)(Object(g.a)({},
B),{field:C.payload,order:y[C.payload]});case u.a.CHANGE_SORT_ORDER:return Object(g.a)(Object(g.a)({},B),{order:C.payload});default:return B}}},210:function(h,e,d){d.d(e,"b",function(){return y});h=d(16);var g=d(211),u=d(212),x=d(213);d=d(214);var y={page:g.b,sort:u.b,focus:x.b,filter:d.b};e.a=Object(h.combineReducers)({page:g.a,sort:u.a,focus:x.a,filter:d.a})},211:function(h,e,d){d.d(e,"b",function(){return x});var g=d(0),u=d(25),x={currentPageNumber:1};e.a=function(y,B){switch(void 0===y&&(y=x),
B.type){case u.a.CLEAR_FILTERS:case u.a.UPDATE_USERNAME_FILTER:case u.a.UPDATE_OWNER_FILTER:case u.a.UPDATE_CREATED_ON_FILTER:case u.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(g.a)(Object(g.a)({},y),{currentPageNumber:1});case u.a.SET_PAGE:return Object(g.a)(Object(g.a)({},y),{currentPageNumber:B.payload});case u.a.LOAD_GROUPS_SUCCESS:return Object(g.a)(Object(g.a)({},y),{currentPageNumber:B.payload.num>B.payload.total?1:Math.ceil(B.payload.start/B.payload.num)});case u.a.LOAD_GROUPS_FAIL:return Object(g.a)(Object(g.a)({},
y),{currentPageNumber:1});default:return y}}},212:function(h,e,d){d.d(e,"b",function(){return u});var g=d(25),u=!1;e.a=function(x,y){switch(void 0===x&&(x=u),y.type){case g.a.CHANGE_SORT_FIELD:case g.a.CHANGE_SORT_ORDER:case g.a.TOGGLE_SORT_DROPDOWN:return!x;default:return x}}},213:function(h,e,d){d.d(e,"b",function(){return x});var g=d(0),u=d(25),x={focusSelectAll:!1};e.a=function(y,B){switch(B.type){case u.a.LOAD_GROUPS_FAIL:case u.a.LOAD_GROUPS_SUCCESS:return Object(g.a)(Object(g.a)({},y),{focusSelectAll:!1});
case u.a.CHANGE_SORT_FIELD:case u.a.CHANGE_SORT_ORDER:return Object(g.a)(Object(g.a)({},y),{focusSelectAll:!0});default:return y}}},214:function(h,e,d){d.d(e,"b",function(){return y});var g=d(0),u=d(25),x=d(38),y={expanded:!1};e.a=function(B,C){switch(C.type){case u.a.CLEAR_FILTERS:switch(C.payload){case void 0:case x.a.DATE_CREATED:return Object(g.a)(Object(g.a)({},B),{dateCreatedSelectedSection:void 0});default:return B}case u.a.TOGGLE_EXPANDED_FILTERS:return Object(g.a)(Object(g.a)({},B),{expanded:!B.expanded});
case u.a.UPDATE_CREATED_ON_FILTER:return Object(g.a)(Object(g.a)({},B),{dateCreatedSelectedSection:C.payload.section});default:return B}}},215:function(h,e,d){d.d(e,"b",function(){return u});var g=d(101),u={portal:{},portalUser:{},request:function(x){return null}};e.a=function(x,y){return void 0===x&&(x=u),y.type,x.portal.portalHostname&&!x.portal.baseUrl&&(x.portal.baseUrl=Object(g.a)(x.portal)),x}},216:function(h,e){h.exports=r},226:function(h,e,d){d.d(e,"c",function(){return g});d.d(e,"d",function(){return u});
d.d(e,"e",function(){return x});d.d(e,"b",function(){return y});d.d(e,"f",function(){return B});d.d(e,"g",function(){return C});d.d(e,"a",function(){return z});d.d(e,"h",function(){return D});d.d(e,"i",function(){return E});d.d(e,"j",function(){return A});var g="MAXIMIZE_DLG",u="MINIMIZE_DLG",x="TOGGLE_EXPANDED_FILTERS",y="CLOSE_FULLSCREEN_BROWSER",B="TOGGLE_EXPANDED_SORT",C="UPDATE_SUBLAYER_CARD_STATE",z="CLOSE_EXPANDED_SORT",D=function(){return{type:z}},E=function(){return{type:x}},A=function(){return{type:B}}},
249:function(h,e,d){var g=d(128);e.a=function(u,x){var y=u.group,B=u.stacked,C=u.portal;B={"gcard-thumbnail__container":!0,"gcard-thumbnail__svg-container":!y.thumbURI,"gcard-thumbnail--stacked":void 0!==B&&B,"gcard-thumbnail--transparent":u.transparent};if(y.thumbnail&&!y.thumbURI&&C&&(y.thumbURI=Object(g.a)(C,y)),y.thumbURI)return x("img",{src:y.thumbURI,classes:B,alt:y.title});C=!(!y.title.charAt(0)||!y.title.charAt(0).match(/^\w+$/));return x("div",{key:"group-thumbnail-"+y.id,classes:B},x("svg",
{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"65",height:"65",viewBox:"0 0 65 65"},x("path",{fill:"#"+y.id.substr(y.id.length-6),d:"M0 0h65v65H0z"}),x("path",{fill:"#ccc",d:"M0 0h65v65H0z","fill-opacity":"0.8"}),C?x("text",{x:"50%",y:/(MSIE |Trident\/|Edge\/)/.test(navigator.userAgent)?"70%":"50%",fill:"white","dominant-baseline":"central","text-anchor":"middle"},y.title.slice(0,1).toUpperCase()):x("path",{fill:"#FFF",d:"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"})))}},
25:function(h,e,d){d.d(e,"a",function(){return B});var g;h=d(0);e=d(204);var u=d(68),x=d(175),y=d(83);d=d(192);!function(C){C.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE";C.SET_SHARE_MODE="SET_SHARE_MODE";C.SET_USER_TYPE="SET_USER_TYPE"}(g||(g={}));var B=Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},e.a),u.a),y.a),g),x.a),d.a)},254:function(h,e){h.exports=f},255:function(h,e){h.exports=c},26:function(h,e,d){var g,u,x,y,B;d.d(e,"b",function(){return g});d.d(e,"a",function(){return u});
d.d(e,"c",function(){return x});d.d(e,"e",function(){return y});d.d(e,"d",function(){return B});(function(C){C.org="org";C["private"]="private";C["public"]="public";C.shared="shared"})(g||(g={}));(function(C){C.LOADING="LOADING";C.SHARE="SHARE";C.GROUP_BROWSER="GROUP_BROWSER";C.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"})(u||(u={}));(function(C){C.SET_SHARE_TO_PRIVATE="SET_SHARE_TO_PRIVATE";C.REVERT_SHARE_LEVEL="REVERT_SHARE_LEVEL";C.REVERT_GROUPS="REVERT_GROUPS";C.EDITABLE_LAYERS=
"EDITABLE_LAYERS";C.OPEN_GROUP_BROWSER="OPEN_GROUP_BROWSER";C.NONE="NONE";C.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED";C.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"})(x||(x={}));(function(C){C.ORG="ORG";C.PUBLIC="PUBLIC"})(y||(y={}));(function(C){C.DEFAULT="DEFAULT";C.ADMIN="ADMIN";C.GROUP="GROUP"})(B||(B={}))},28:function(h,e,d){(function(g,u){h.exports=function(){function x(){var T=setTimeout;return function(){return T(y,1)}}function y(){for(var T=0;T<
fa;T+=2)(0,W[T])(W[T+1]),W[T]=void 0,W[T+1]=void 0;fa=0}function B(T,ca){var M=this,U=new this.constructor(z);void 0===U[X]&&O(U);var da=M._state;if(da){var ja=arguments[da-1];ka(function(){return J(da,U,ja,M._result)})}else I(M,U,T,ca);return U}function C(T){if(T&&"object"==typeof T&&T.constructor===this)return T;var ca=new this(z);return E(ca,T),ca}function z(){}function D(T,ca,M){ca.constructor===T.constructor&&M===B&&ca.constructor.resolve===C?function(U,da){1===da._state?F(U,da._result):2===
da._state?H(U,da._result):I(da,void 0,function(ja){return E(U,ja)},function(ja){return H(U,ja)})}(T,ca):void 0===M?F(T,ca):"function"==typeof M?function(U,da,ja){ka(function(na){var oa=!1,ra=function(ua,wa,Ba,Da){try{ua.call(wa,Ba,Da)}catch(La){return La}}(ja,da,function(ua){oa||(oa=!0,da!==ua?E(na,ua):F(na,ua))},function(ua){oa||(oa=!0,H(na,ua))},na._label);!oa&&ra&&(oa=!0,H(na,ra))},U)}(T,ca,M):F(T,ca)}function E(T,ca){if(T===ca)H(T,new TypeError("You cannot resolve a promise with itself"));else if(U=
typeof(M=ca),null===M||"object"!==U&&"function"!==U)F(T,ca);else{M=void 0;try{M=ca.then}catch(da){return void H(T,da)}D(T,ca,M)}var M,U}function A(T){T._onerror&&T._onerror(T._result);L(T)}function F(T,ca){void 0===T._state&&(T._result=ca,T._state=1,0!==T._subscribers.length&&ka(L,T))}function H(T,ca){void 0===T._state&&(T._state=2,T._result=ca,ka(A,T))}function I(T,ca,M,U){var da=T._subscribers,ja=da.length;T._onerror=null;da[ja]=ca;da[ja+1]=M;da[ja+2]=U;0===ja&&T._state&&ka(L,T)}function L(T){var ca=
T._subscribers,M=T._state;if(0!==ca.length){for(var U=void 0,da=void 0,ja=T._result,na=0;na<ca.length;na+=3)U=ca[na],da=ca[na+M],U?J(M,U,da,ja):da(ja);T._subscribers.length=0}}function J(T,ca,M,U){var da="function"==typeof M,ja=void 0,na=void 0,oa=!0;if(da){try{ja=M(U)}catch(ra){oa=!1,na=ra}if(ca===ja)return void H(ca,new TypeError("A promises callback cannot return that same promise."))}else ja=U;void 0!==ca._state||(da&&oa?E(ca,ja):!1===oa?H(ca,na):1===T?F(ca,ja):2===T&&H(ca,ja))}function O(T){T[X]=
aa++;T._state=void 0;T._result=void 0;T._subscribers=[]}var P=Array.isArray?Array.isArray:function(T){return"[object Array]"===Object.prototype.toString.call(T)},fa=0,V=void 0,ba=void 0,ka=function(T,ca){W[fa]=T;W[fa+1]=ca;2===(fa+=2)&&(ba?ba(y):N())},la="undefined"!=typeof window?window:void 0,ma=la||{};ma=ma.MutationObserver||ma.WebKitMutationObserver;var ha="undefined"==typeof self&&void 0!==g&&"[object process]"==={}.toString.call(g),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&
"undefined"!=typeof MessageChannel,W=Array(1E3),Q,ia,R,S,N=void 0;ha?N=function(){return g.nextTick(y)}:ma?(ia=0,R=new ma(y),S=document.createTextNode(""),R.observe(S,{characterData:!0}),N=function(){S.data=ia=++ia%2}):Z?((Q=new MessageChannel).port1.onmessage=y,N=function(){return Q.port2.postMessage(0)}):N=void 0===la?function(){try{var T=Function("return this")().require("vertx");return void 0!==(V=T.runOnLoop||T.runOnContext)?function(){V(y)}:x()}catch(ca){return x()}}():x();var X=Math.random().toString(36).substring(2),
aa=0,ea=function(){function T(ca,M){this._instanceConstructor=ca;this.promise=new ca(z);this.promise[X]||O(this.promise);P(M)?(this.length=M.length,this._remaining=M.length,this._result=Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(M),0===this._remaining&&F(this.promise,this._result))):H(this.promise,Error("Array Methods must be provided an Array"))}return T.prototype._enumerate=function(ca){for(var M=0;void 0===this._state&&M<ca.length;M++)this._eachEntry(ca[M],
M)},T.prototype._eachEntry=function(ca,M){var U=this._instanceConstructor,da=U.resolve;if(da===C){var ja=da=void 0,na=!1;try{da=ca.then}catch(oa){na=!0,ja=oa}da===B&&void 0!==ca._state?this._settledAt(ca._state,M,ca._result):"function"!=typeof da?(this._remaining--,this._result[M]=ca):U===Y?(U=new U(z),na?H(U,ja):D(U,ca,da),this._willSettleAt(U,M)):this._willSettleAt(new U(function(oa){return oa(ca)}),M)}else this._willSettleAt(da(ca),M)},T.prototype._settledAt=function(ca,M,U){var da=this.promise;
void 0===da._state&&(this._remaining--,2===ca?H(da,U):this._result[M]=U);0===this._remaining&&F(da,this._result)},T.prototype._willSettleAt=function(ca,M){var U=this;I(ca,void 0,function(da){return U._settledAt(1,M,da)},function(da){return U._settledAt(2,M,da)})},T}(),Y=function(){function T(ca){this[X]=aa++;this._result=this._state=void 0;this._subscribers=[];if(z!==ca){if("function"!=typeof ca)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof T)(function(M,U){try{U(function(da){E(M,da)},function(da){H(M,da)})}catch(da){H(M,da)}})(this,ca);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return T.prototype["catch"]=function(ca){return this.then(null,ca)},T.prototype["finally"]=function(ca){var M=this.constructor;return"function"==typeof ca?this.then(function(U){return M.resolve(ca()).then(function(){return U})},function(U){return M.resolve(ca()).then(function(){throw U;
})}):this.then(ca,ca)},T}();return Y.prototype.then=B,Y.all=function(T){return(new ea(this,T)).promise},Y.race=function(T){var ca=this;return P(T)?new ca(function(M,U){for(var da=T.length,ja=0;ja<da;ja++)ca.resolve(T[ja]).then(M,U)}):new ca(function(M,U){return U(new TypeError("You must pass an array to race."))})},Y.resolve=C,Y.reject=function(T){var ca=new this(z);return H(ca,T),ca},Y._setScheduler=function(T){ba=T},Y._setAsap=function(T){ka=T},Y._asap=ka,Y.polyfill=function(){var T=void 0;if(void 0!==
u)T=u;else if("undefined"!=typeof self)T=self;else try{T=Function("return this")()}catch(U){throw Error("polyfill failed because global object is unavailable in this environment");}var ca=T.Promise;if(ca){var M=null;try{M=Object.prototype.toString.call(ca.resolve())}catch(U){}if("[object Promise]"===M&&!ca.cast)return}T.Promise=Y},Y.Promise=Y,Y}()}).call(this,d(189),d(170))},284:function(h,e){h.exports=a},285:function(h,e){h.exports=b},30:function(h,e,d){function g(W){return W.reduce(function(Q,ia){return ia&&
ia.relatedItems?Q.concat(ia.relatedItems.map(function(R){return R})):Q},[])}function u(W,Q,ia){return W(Q,{query:Object(B.a)({f:"json"},ia)}).then(function(R){return R.data})}function x(W,Q){void 0===Q&&(Q=100);for(var ia=[],R=0;R<Math.ceil(W.length/Q);R++)ia.push(W.slice(R*Q,(R+1)*Q));return ia.filter(function(S){return 0<S.length})}function y(W){var Q=W.itemIds,ia=W.request,R=W.groupIds,S=W.portal.restUrl+"/content/itemsgroups";return new C.Promise(function(N,X){ia(S,{method:"get",query:{f:"json",
items:Q,groups:R}}).then(function(aa){N(aa.data)},X)})}d.d(e,"u",function(){return z});d.d(e,"n",function(){return D});d.d(e,"h",function(){return E});d.d(e,"e",function(){return A});d.d(e,"f",function(){return F});d.d(e,"j",function(){return H});d.d(e,"o",function(){return I});d.d(e,"l",function(){return L});d.d(e,"k",function(){return J});d.d(e,"m",function(){return O});d.d(e,"c",function(){return P});d.d(e,"d",function(){return fa});d.d(e,"r",function(){return V});d.d(e,"s",function(){return ba});
d.d(e,"t",function(){return ka});d.d(e,"g",function(){return la});d.d(e,"p",function(){return ma});d.d(e,"q",function(){return ha});d.d(e,"v",function(){return u});d.d(e,"a",function(){return x});d.d(e,"i",function(){return y});d.d(e,"b",function(){return Z});var B=d(0),C=d(28),z=function(W){return function(Q,ia){return W({url:Q,content:ia.query},{usePost:"post"===ia.method}).then(function(R){return{data:R}})}},D=function(W,Q,ia){return u(W,Q.restUrl+"/portals/self",{culture:ia,"default":!0})},E=
function(W,Q,ia){return u(W,Q.restUrl+"/content/items/"+ia+"/data")},A=function(W,Q,ia,R){return u(W,Q.restUrl+"/community/groups",Object(B.a)({q:ia},R))},F=function(W,Q,ia){return u(W,Q.restUrl+"/community/groups/"+ia+"/categorySchema")},H=function(W,Q,ia){return u(W,Q.restUrl+"/portals/"+(ia||Q.id)+"/categorySchema")},I=function(W,Q){return u(W,Q.restUrl+"/portals/"+Q.id+"/servers")},L=function(W,Q,ia,R){return W(Q.restUrl+"/portals/"+(ia||Q.id)+"/collaborationsSummary",R)},J=function(W,Q,ia,R){return W(Q.restUrl+
"/portals/"+(ia||Q.id)+"/collaboratedItems",R)},O=function(W,Q,ia){return u(W,location.protocol+"//"+Q.portalHostname+"/sharing/rest/portals/"+(ia||"self"))},P=function(W,Q,ia){return W(Q.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+Q.id+" AND access:public",num:100,start:ia||1,sortField:"title",sortOrder:"asc"}}).then(function(R){return R.data.total>R.data.start+R.data.num?P(W,Q,R.data.start+R.data.num).then(function(S){return Object(B.a)(Object(B.a)({},S),{data:Object(B.a)(Object(B.a)({},
S.data),{results:R.data.results.concat(S.data.results)})})}):R})},fa=function(W,Q,ia,R){return W(Q.restUrl+"/community/users/"+ia+"/provisionedListings",{query:{f:"json",num:100,start:R||1}}).then(function(S){var N=C.Promise.all(S.data.provisionedListings.filter(function(aa){return aa.itemId}).map(function(aa){return(new C.Promise(function(ea,Y){W(Q.restUrl+"/content/items/"+aa.itemId,{method:"get",query:{f:"json"}}).then(function(T){ea(T.data)},Y)}))["catch"](function(ea){return 0})})),X=S.data.provisionedListings.map(function(aa){return u(W,
Q.restUrl+"/content/items/"+(aa.id||aa.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(ea){return ea},function(ea){})});return S.data.total>S.data.start+S.data.num?fa(W,Q,ia,S.data.start+S.data.num).then(function(aa){return C.Promise.all([N].concat(X)).then(function(ea){return ea[0].results.concat(g(ea.slice(1))).concat(aa)})}):C.Promise.all([N].concat(X)).then(function(aa){return aa[0].filter(function(ea){return void 0!==ea}).concat(g(aa.slice(1)))})})},
V=function(W,Q,ia){return u(W,Q.restUrl+"/community/users/"+(ia||Q.user.username))},ba=function(W,Q,ia){return u(W,Q.restUrl+"/content/users/"+(ia||Q.user.username),{num:1})},ka=function(W,Q,ia){return u(W,Q.restUrl+"/content/groups/"+ia)},la=function(W,Q,ia){return u(W,Q.restUrl+"/community/groups",ia)},ma=function(W,Q){return u(W,Q.restUrl+"/portals/self/settings")},ha=function(W,Q){return u(W,Q.restUrl+"/portals/self/trustedOrgs",{num:100})},Z=function(W,Q){return void 0===Q&&(Q=","),W.map(function(ia){return ia.id}).join(Q)}},
307:function(h,e,d){var g=d(0);h=d(16);var u=d(90);d=function(x){function y(){return null!==x&&x.apply(this,arguments)||this}return Object(g.d)(y,x),y.prototype.render=function(B){return B("div",{"class":"ib-ex-results__item-list"},B("div",{"class":"ib-ex-results__no-items-container"},B("div",{"class":"ib-ex-results__no-items-centered"},B("svg",{role:"img",viewBox:"0 0 256 256",width:"256"},B("path",{fill:"#ccc",d:u.f})),B("p",{"class":"ib-ex-results__no-items-text"},this.props.text))))},y}(h.Component);
e.a=d},372:function(h,e){h.exports=p},373:function(h,e){h.exports=q},374:function(h,e){h.exports=t},375:function(h,e,d){d.d(e,"a",function(){return B});var g=d(0),u=d(69);h=d(254);var x=d.n(h);h=d(16);var y=d(90),B=function(C){function z(D){var E=C.call(this,D)||this;return E.state.searchTerm=E.props.currentSearchString||"",E.debouncedInput=x()(function(){E.props.changeSearchString.apply(E,[E.state.searchTerm])},400),E.handleInputChange=E.handleInputChange.bind(E),E.handleClear=E.handleClear.bind(E),
E}return Object(g.d)(z,C),z.prototype.componentWillReceiveProps=function(D){D.currentSearchString!==this.props.currentSearchString&&this.setState({searchTerm:D.currentSearchString})},z.prototype.render=function(D){var E=this.props,A=E.title,F=E.placeholder;E=E.controls;var H=this.state.searchTerm||"";return D("div",{"class":"ac-search-area"},D("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 20 20",key:"search-input-icon"},D("path",{d:"M19.205 18.295l-7.036-7.035A6.874 6.874 0 0 0 6.875 0 6.874 6.874 0 0 0 0 6.875a6.874 6.874 0 0 0 11.286 5.27l7.035 7.034.884-.884zM1.25 6.875A5.632 5.632 0 0 1 6.875 1.25 5.632 5.632 0 0 1 12.5 6.875 5.632 5.632 0 0 1 6.875 12.5 5.632 5.632 0 0 1 1.25 6.875z",
fill:"currentColor"})),D("input",{"class":"ac-search-area__input",key:"search-input",title:A,"aria-label":A,type:"search",oninput:this.handleInputChange,value:H,placeholder:F,"aria-controls":E}),H&&D("button",{"class":"ac-search-area__clear",onclick:this.handleClear,key:"search-input-button","aria-label":u.clearSearch},D("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 24 24"},D("path",{d:y.k,fill:"currentColor"}))))},z.prototype.handleInputChange=function(D){this.setState({searchTerm:D.target.value});
this.debouncedInput()},z.prototype.handleClear=function(){this.setState({searchTerm:""});this.props.changeSearchString("")},z}(h.Component)},376:function(h,e){h.exports=m},38:function(h,e,d){d.d(e,"b",function(){return g});d.d(e,"d",function(){return x});d.d(e,"c",function(){return y});d.d(e,"a",function(){return B});d.d(e,"f",function(){return D});var g,u,x,y,B,C=d(0),z=d(25);!function(E){E.openData="openData";E.updateGroups="updateGroups";E.distributed="distributed";E.administrative="administrative";
E.orgSettings="orgSettings"}(g||(g={}));(u||(u={})).owner="owner";(function(E){E.itemOwner="itemOwner";E.inOrg="inOrg";E.outsideOrg="outsideOrg"})(x||(x={}));(function(E){E.myOrg="org";E.partnered="collaboration";E.anyOrg="anyOrg"})(y||(y={}));(function(E){E.USER="USER";E.OWNER="OWNER";E.DESIGNATION="DESIGNATION";E.DATE_CREATED="DATE_CREATED";E.MEMBERSHIP="MEMBERSHIP"})(B||(B={}));var D={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};e.e=function(E,A){switch(void 0===E&&(E=D),
A.type){case z.a.CLEAR_FILTERS:switch(A.payload){case B.DESIGNATION:return Object(C.a)(Object(C.a)({},E),{designationFilter:void 0});case B.DATE_CREATED:return Object(C.a)(Object(C.a)({},E),{dateCreatedFilter:void 0});case B.OWNER:return Object(C.a)(Object(C.a)({},E),{ownerFilter:void 0});case B.USER:return E;case B.MEMBERSHIP:return Object(C.a)(Object(C.a)({},E),{membershipFilter:void 0});default:return Object(C.a)(Object(C.a)({},E),{designationFilter:void 0,dateCreatedFilter:void 0,membershipFilter:void 0,
ownerFilter:void 0})}case z.a.UPDATE_OWNER_FILTER:return Object(C.a)(Object(C.a)({},E),{ownerFilter:A.payload===E.ownerFilter?void 0:A.payload});case z.a.UPDATE_USERNAME_FILTER:return Object(C.a)(Object(C.a)({},E),{currentUsername:A.payload});case z.a.UPDATE_CREATED_ON_FILTER:return Object(C.a)(Object(C.a)({},E),{dateCreatedFilter:A.payload.created});case z.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(C.a)(Object(C.a)({},E),{designationFilter:A.payload===E.designationFilter?void 0:A.payload});
case z.a.UPDATE_MEMBERSHIP_FILTER:return Object(C.a)(Object(C.a)({},E),{membershipFilter:A.payload===E.membershipFilter?void 0:A.payload});case z.a.SET_USERS:return Object(C.a)(Object(C.a)({},E),{allUsers:A.payload.reduce(function(F,H){var I;return Object(C.a)(Object(C.a)({},F),((I={})[H.username]=H,I))},{})});case z.a.SET_SEARCH_STRING:return Object(C.a)(Object(C.a)({},E),{searchString:A.payload});default:return E}}},416:function(h,e,d){var g,u=d(0);h=d(16);var x=d(54),y=d(535),B=d(38),C=d(532),
z=d(534),D=d(533),E=d(536),A=d(26);d=function(H){function I(){return null!==H&&H.apply(this,arguments)||this}return Object(u.d)(I,H),I.prototype.render=function(L){return this.props.availableFilters.map(function(J){return L(F[J],{key:"gb-filter-"+J})})},I}(h.Component);var F=((g={})[B.a.DATE_CREATED]=C.a,g[B.a.OWNER]=D.a,g[B.a.DESIGNATION]=z.a,g[B.a.USER]=y.a,g[B.a.MEMBERSHIP]=E.a,g);e.a=Object(h.connect)(function(H){var I=Object(x.b)(H)?H:H.gbState,L=I.utils;H=L.portalUser.username;var J=L.portal,
O=I.config,P=O.shareMode;L=O.enableUserToggle;I=I.parameters.filter.currentUsername;if(O.withinAppConfig)return{availableFilters:[B.a.OWNER]};if(O.userType===A.e.PUBLIC)switch(P){case A.d.DEFAULT:return{availableFilters:[B.a.OWNER,B.a.DATE_CREATED]};case A.d.GROUP:return{availableFilters:[B.a.DATE_CREATED]}}switch(P){case A.d.DEFAULT:return{availableFilters:Object(u.g)(Object(u.g)([B.a.OWNER],J.isPortal?[]:[B.a.MEMBERSHIP]),[B.a.DESIGNATION,B.a.DATE_CREATED])};case A.d.GROUP:return{availableFilters:[B.a.DESIGNATION,
B.a.DATE_CREATED]};case A.d.ADMIN:return H=L&&H===I?[]:[B.a.OWNER],{availableFilters:Object(u.g)(Object(u.g)(Object(u.g)([],L?[B.a.USER]:[]),H),[B.a.DESIGNATION,B.a.DATE_CREATED])};default:return{availableFilters:[]}}},function(H){return{}})(d)},449:function(h,e){h.exports=n},5:function(h,e,d){function g(E){return 0===Object.keys(E).length&&E.constructor===Object}function u(E){return null!=E}function x(E,A){return z.apply(null,arguments)}function y(E,A){return D.apply(null,arguments)}d.d(e,"b",function(){return g});
d.d(e,"a",function(){return u});d.d(e,"e",function(){return C});d.d(e,"c",function(){return x});d.d(e,"d",function(){return y});var B=d(0);h=d(15);var C=Object(h.a)(function(E,A){var F=Object(B.a)({},A);return delete F[E],F}),z=Object(h.a)(function(E,A){return Object.keys(A).reduce(function(F,H){return F[H]=E(A[H],H,A),F},{})}),D=Object(h.a)(function(E,A){return Object.keys(A).reduce(function(F,H){return E(A[H],H,A)&&(F[H]=A[H]),F},{})})},51:function(h,e,d){function g(ba){return!(!ba.urlKey||!ba.customBaseUrl)}
function u(ba){return ba.role===H.admin||ba.role===H.accountAdmin}function x(ba){return Object(J.a)(ba.roleId)&&0<(ba.roleId||"").length}function y(ba){return!x(ba)||x(ba)&&-1<(ba.privileges||[]).indexOf("portal:admin:viewItems")}function B(ba){return-1<(ba.privileges||[]).indexOf("portal:user:shareToOrg")}function C(ba){return-1<(ba.privileges||[]).indexOf("portal:user:shareToGroup")}function z(ba){return-1<(ba.privileges||[]).indexOf("portal:user:shareToPublic")}function D(ba,ka){return E(ba)||
A(ba)||ka.canSharePublic&&F(ba)}function E(ba){return-1<(ba.privileges||[]).indexOf("portal:admin:shareToGroup")}function A(ba){return-1<(ba.privileges||[]).indexOf("portal:admin:shareToOrg")}function F(ba){return-1<(ba.privileges||[]).indexOf("portal:admin:shareToPublic")}d.d(e,"l",function(){return P});d.d(e,"h",function(){return fa});d.d(e,"m",function(){return V});d.d(e,"k",function(){return g});d.d(e,"i",function(){return u});d.d(e,"j",function(){return x});d.d(e,"g",function(){return y});d.d(e,
"b",function(){return B});d.d(e,"a",function(){return C});d.d(e,"c",function(){return z});d.d(e,"d",function(){return E});d.d(e,"e",function(){return A});d.d(e,"f",function(){return F});var H,I=d(63),L=d(148),J=d(5),O=d(58);!function(ba){ba.user="org_user";ba.accountUser="account_user";ba.publisher="org_publisher";ba.accountPublisher="account_publisher";ba.admin="org_admin";ba.accountAdmin="account_admin";ba.viewer="iAAAAAAAAAAAAAAA";ba.dataEditor="iBBBBBBBBBBBBBBB"}(H||(H={}));var P=function(ba){var ka=
ba.items;return!!ba.user.orgId&&ka.every(function(la){return la.isOrgItem})},fa=function(ba){var ka=ba.items,la=ba.user,ma=ba.portal;ba=ka[0];var ha=Object(O.c)(ba,la),Z=x(la),W=D(la,ma);if(Z=Object(O.a)(ba,la)&&-1<(la.privileges||[]).indexOf("portal:admin:updateItems")&&!Z)Z=!g(ma)||C(la)||B(la)||ma.canSharePublic&&z(la)||D(la,ma);ma=Z;return!(ba.portal.isPortal&&ba.owner!==la.username&&-1<ba.owner.indexOf("esri_"))&&(ha||ma||P({items:ka,user:la})&&W)},V=function(ba,ka){return Object(I.a)(Object(L.a)(ba))(ka)}},
530:function(h,e,d){var g=d(0),u=d(69),x=d(284);h=d(16);var y=d(186),B=d(802),C=d(803),z=d(1019),D=d(54),E=d(374),A=d.n(E),F=d(25);E=d(285);var H=d.n(E),I=d(375);d=function(L){function J(O){O=L.call(this,O)||this;return O.handleInputChange=O.handleInputChange.bind(O),O.handleSortFieldChange=O.handleSortFieldChange.bind(O),O.handleSortOrderChange=O.handleSortOrderChange.bind(O),O.handleSortClick=O.handleSortClick.bind(O),O}return Object(g.d)(J,L),J.prototype.render=function(O){var P=x.substitute(this.props.userFileringEnabled?
u.searchGroupsForUser:u.searchGroups,{user:this.props.currentUser});return O("div",{classes:{"gb-search-area__container":!0,"gb-search-area__container--offset-top":this.props.isWithinShare}},O(I.a,{key:"groupbrowser-search-area-input",title:P,placeholder:P,currentSearchString:this.props.currentSearchString,changeSearchString:this.handleInputChange,controls:"group-browser-results-region"}),!this.props.isWithinShare&&O("div",{"class":"gb-search-area__btn-section"},O(A.a,{active:this.props.sortActive,
key:"gb-sort-dropdown",field:this.props.sortField,order:this.props.sortOrder,availableFields:["title","owner","created","modified"],onFieldChange:this.handleSortFieldChange,onOrderChange:this.handleSortOrderChange,onClick:this.handleSortClick})),this.props.filteringEnabled&&O(H.a,{key:"ib-ex-filter-btn",active:this.props.filtersOpen,center:!0,handleClick:this.props.toggleFilterSidebar,ariaControls:"filter-pane-container"},O("div",{"class":"drp-sort__btn-body"},O("svg",{role:"img",viewBox:"0 0 16 16",
width:"16px",height:"16px"},O("path",{d:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"})),O("span",{"class":"drp-sort__btn-label"},u.filter))))},J.prototype.handleInputChange=function(O){this.props.changeSearchString(O);this.props.updateDisplayGroups()},J.prototype.handleSortFieldChange=function(O){this.props.changeSortField(O);this.props.updateDisplayGroups()},J.prototype.handleSortOrderChange=function(O){this.props.changeSortOrder(O);this.props.updateDisplayGroups()},
J.prototype.handleSortClick=function(){this.props.toggleSortDropdown()},J}(h.Component);e.a=Object(h.connect)(function(L){var J=Object(D.b)(L)?L:L.gbState,O=J.ui,P=J.parameters;J=J.config;return{currentSearchString:P.filter.searchString,sortActive:O.sort,sortField:P.sort.field,sortOrder:P.sort.order,filteringEnabled:J.enableFiltering,filtersOpen:O.filter.expanded,isWithinShare:!Object(D.b)(L),userFileringEnabled:J.enableUserToggle,currentUser:P.filter.currentUsername}},function(L){return{changeSearchString:function(J){return L(Object(y.b)(J))},
changeSortField:function(J){return L(Object(B.a)(J))},changeSortOrder:function(J){return L(Object(B.b)(J))},updateDisplayGroups:function(){L(Object(C.a)(1))},toggleSortDropdown:function(){return L(Object(z.a)())},toggleFilterSidebar:function(){L({type:F.a.TOGGLE_EXPANDED_FILTERS})}}})(d)},531:function(h,e,d){var g=d(0),u=d(69);h=d(16);var x=d(54),y=d(416);d=function(B){function C(){return null!==B&&B.apply(this,arguments)||this}return Object(g.d)(C,B),C.prototype.render=function(z){var D=this.props.filterOpen;
return z("div",{classes:{"ib__big-section":!0,"ib__big-filters":!0,"ib__big-filters--narrow":!0,"ib__big-filters--visible":D,"ib__big-filters--hidden":!D}},z("div",{id:"filter-pane-container",key:"filter-pane-container",classes:{"ib-filter-pane__container":!0,hide:!D}},z("h3",{"class":"ib__big-filter-label"},u.filters),z(y.a,{key:"group-browser-filters"})))},C}(h.Component);e.a=Object(h.connect)(function(B){return{filterOpen:(Object(x.b)(B)?B:B.gbState).ui.filter.expanded}},function(B){return{}})(d)},
532:function(h,e,d){h=d(16);var g=d(376);g=d.n(g);var u=d(54),x=d(186),y=d(159);e.a=Object(h.connect)(function(B){B=Object(u.b)(B)?B:B.gbState;return{dateCreatedFilter:B.parameters.filter.dateCreatedFilter,dateCreatedSection:B.ui.filter.dateCreatedSelectedSection}},function(B){return{onDateCreatedSelect:function(C,z){B(Object(x.d)({section:C,created:z}));B(y.b)}}})(g.a)},533:function(h,e,d){var g=d(0),u=d(69);h=d(16);var x=d(54),y=d(186),B=d(159),C=d(38),z=d(255),D=d.n(z);z=d(216);var E=d.n(z),A=
d(26);d=function(F){function H(){return null!==F&&F.apply(this,arguments)||this}return Object(g.d)(H,F),H.prototype.render=function(I){var L=this.props,J=L.currentFilter,O=L.handleOwnerClick,P=L.username,fa=L.userType,V=L.portal,ba=L.hasIndoorsSpaces;return I(D.a,{key:"group-owner-filter-accordion",title:u.owner,clearable:!!J,onClear:function(){O(J)},startActive:!0},I("ul",{"class":"ib-filter-pane__list"},Object.keys(C.d).map(function(ka){if(!(ka===C.d.inOrg&&fa===A.e.PUBLIC||ka===C.d.outsideOrg&&
(V.isPortal||ba))){var la=u.ownerTitles[ka];ka===C.d.itemOwner?la=P:ka===C.d.outsideOrg&&fa===A.e.PUBLIC&&(la=u.ownerTitles.someOneElse);var ma=C.d[ka];return I(E.a,{key:ma,name:la,value:ma,selectedToggle:J,onToggleClick:function(){O(ma)}})}})))},H}(h.Component);e.a=Object(h.connect)(function(F){var H=Object(x.b)(F)?F:F.gbState;F=H.utils;var I=F.portalUser.username,L=H.parameters.filter,J=L.currentUsername;H=H.config;return{currentFilter:L.ownerFilter,portal:F.portal,username:H.shareMode===A.d.ADMIN?
J:I,userType:H.userType,hasIndoorsSpaces:H.hasIndoorsSpaces}},function(F){return{handleOwnerClick:function(H){F(Object(y.g)(H));F(B.b)}}})(d)},534:function(h,e,d){var g=d(0),u=d(69);h=d(16);var x=d(54),y=d(186),B=d(159),C=d(38),z=d(255),D=d.n(z);z=d(216);var E=d.n(z),A=d(26);d=function(F){function H(){return null!==F&&F.apply(this,arguments)||this}return Object(g.d)(H,F),H.prototype.render=function(I){var L=this.props,J=L.currentFilter,O=L.handleDesignationClick,P=L.showSharedUpdate,fa=L.portal,V=
L.hasIndoorsSpaces;return I(D.a,{key:"group-designation-filter-accordion",title:u.designation,clearable:!!J,onClear:function(){O(J)}},I("ul",{"class":"ib-filter-pane__list"},Object.keys(C.b).filter(function(ba){return!(ba===C.b.updateGroups&&!P)&&(ba!==C.b.openData||!fa.isPortal)&&(ba!==C.b.distributed||!V)}).map(function(ba){var ka=C.b[ba];return I(E.a,{key:ka,name:u.designationFilterTitles[ba],value:ka,selectedToggle:J,onToggleClick:function(){O(ka)},infoTooltip:"orgSettings"===ka?u.orgSettingsTooltip:
void 0})})))},H}(h.Component);e.a=Object(h.connect)(function(F){var H=Object(x.b)(F)?F:F.gbState;F=H.utils;var I=F.portalUser.username,L=H.config,J=L.shareMode;H=H.parameters.filter;var O=H.currentUsername;return{currentFilter:H.designationFilter,portal:F.portal,hasIndoorsSpaces:L.hasIndoorsSpaces,showSharedUpdate:(!L.enableUserToggle||I!==O)&&J!==A.d.GROUP}},function(F){return{handleDesignationClick:function(H){F(Object(y.e)(H));F(B.b)}}})(d)},535:function(h,e,d){var g=d(0),u=d(69);h=d(16);var x=
d(54),y=d(186),B=d(159),C=d(255),z=d.n(C);C=d(216);var D=d.n(C);d=function(E){function A(){return null!==E&&E.apply(this,arguments)||this}return Object(g.d)(A,E),A.prototype.render=function(F){var H=this.props,I=H.currentUsername,L=H.portalUsername,J=H.handleUserClick;return F(z.a,{key:"user-toggle-filter-accordion",title:u.viewGroupsFor,clearable:!1,startActive:!0},F("ul",{"class":"ib-filter-pane__list"},H.allUsernames.map(function(O){var P=O===I;return F(D.a,{key:O,name:L===O?O+" "+u.me:O,value:O,
selectedToggle:I,onToggleClick:function(){P||J(O)}})})))},A}(h.Component);e.a=Object(h.connect)(function(E){E=Object(x.b)(E)?E:E.gbState;var A=E.parameters.filter,F=E.utils.portal.portalUser.username;return{currentUsername:A.currentUsername,portalUsername:F,allUsernames:Object.keys(A.allUsers).sort(function(H){return H===F?1:-1})}},function(E){return{handleUserClick:function(A){E(Object(y.a)());E(Object(y.h)(A));E(B.b)}}})(d)},536:function(h,e,d){var g=d(0),u=d(69);h=d(16);var x=d(54),y=d(186),B=
d(159),C=d(255),z=d.n(C);C=d(216);var D=d.n(C),E=d(38);d=function(A){function F(){return null!==A&&A.apply(this,arguments)||this}return Object(g.d)(F,A),F.prototype.render=function(H){var I=this.props,L=I.currentFilter,J=I.hasTrustedOrgs,O=I.handleMembershipClick;if(!I.hasIndoorsSpaces)return H(z.a,{key:"group-membership-filter-accordion",title:u.membership,clearable:!!L,onClear:function(){O(L)},flex:!0},H("ul",{"class":"ib-filter-pane__list"},Object.keys(E.c).filter(function(P){return J||"partnered"!==
P}).map(function(P){var fa=E.c[P];return H(D.a,{key:fa,name:u.membershipFilterTitles[P],value:fa,selectedToggle:L,onToggleClick:function(){O(fa)}})})))},F}(h.Component);e.a=Object(h.connect)(function(A){A=Object(x.b)(A)?A:A.gbState;var F=A.config;return{currentFilter:A.parameters.filter.membershipFilter,hasTrustedOrgs:F.hasTrustedOrgs,hasIndoorsSpaces:F.hasIndoorsSpaces}},function(A){return{handleMembershipClick:function(F){A(Object(y.f)(F));A(B.b)}}})(d)},537:function(h,e,d){var g=d(0);h=d(16);var u=
d(205),x=d.n(u),y=d(542),B=d(538),C=d(144),z=d(54),D=d(137);d=function(E){function A(){var F=null!==E&&E.apply(this,arguments)||this;return F.handleGroupCheck=function(H){if(F.props.enableSingleSelection){var I=Object.keys(F.props.selectedGroups).map(function(L){return F.props.selectedGroups[L].group});F.props.deselectGroups(I)}F.props.selectGroups([H])},F.handleGroupUncheck=function(H){F.props.deselectGroups([H])},F.handleGroupRevert=function(H){F.props.revertGroups([H])},F}return Object(g.d)(A,
E),A.prototype.render=function(F){var H=this.props,I=H.selectorItems,L=H.displayGroups,J=H.selectedGroups,O=H.sortField,P=H.initialSelectedGroups,fa=H.portal,V=H.shouldDisable,ba=H.disabledText,ka=H.noFilters;H=H.status===D.a.LOADING;var la={"gb-results-panel__section-container":!0,"gb-results-panel__section-container--loading":H};return F("div",{classes:{"gb-results-panel__container":!0,"ib__big-section":!0,"ib__big-results":!0}},H?F(x.a,{key:"group-browser-loader-bars"}):null,F("section",{classes:la,
key:"group-browser-section-totals"},F(B.a,{key:"group-browser-totals"})),F("section",{classes:la,key:"group-browser-section-groups"},F(y.a,{key:"groups-area",selectorItems:I,displayGroups:L,selectedGroups:J,sortField:O,handleGroupCheck:this.handleGroupCheck,handleGroupUncheck:this.handleGroupUncheck,handleGroupRevert:this.handleGroupRevert,initialSelectedGroups:P,portal:fa,noFilters:ka,shouldDisable:V,disabledText:ba})))},A}(h.Component);e.a=Object(h.connect)(function(E){E=Object(z.b)(E)?E:E.gbState;
var A=E.groups,F=E.config,H=E.parameters,I=H.filter,L=I.ownerFilter,J=I.designationFilter,O=I.dateCreatedFilter;return{status:A.status,displayGroups:A.displayGroups,selectedGroups:A.selectedGroups,sortField:H.sort.field,noFilters:!(I.searchString||J||O||L),portal:E.utils.portal,selectorItems:A.selectorItems,initialSelectedGroups:A.initialSelectedGroups,shouldDisable:F.shouldDisable,disabledText:F.disabledText,enableSingleSelection:F.enableSingleSelection}},function(E){return{selectGroups:function(A){return E(Object(C.d)(A))},
deselectGroups:function(A){return E(Object(C.b)(A))},revertGroups:function(A){return E(Object(C.c)(A))}}})(d)},538:function(h,e,d){var g=d(0),u=d(69),x=d(150);h=d(16);var y=d(144),B=d(539),C=d(54),z=d(137),D=d(541);d=function(E){function A(){var F=null!==E&&E.apply(this,arguments)||this;return F.handleSelectAll=function(){F.props.selectGroups(F.props.displayGroups)},F.handleDeselectAll=function(){F.props.deselectGroups(F.props.displayGroups)},F.handleClearSelection=function(){F.props.clearAll()},
F}return Object(g.d)(A,E),A.prototype.render=function(F){var H=this,I=this.props,L=I.displayGroups,J=I.selectedGroups,O=I.selectorItems,P=I.portal,fa=I.isWithinShare,V=I.enableSingleSelection;I=function(la){var ma=la.fullySelectedGroups,ha=la.displayGroups.map(function(Z){return Z.id});return ma.filter(function(Z){return 0<=ha.indexOf(Z.id)})}({fullySelectedGroups:I.fullySelectedGroups,displayGroups:L});L=L.length===I.length;I=Object.keys(J).map(function(la){return J[la]});var ba="en"===x.locale.slice(0,
2),ka=(ba?u.pageRange.en:u.pageRange.other).replace("${start}",this.props.startNum).replace("${end}",this.props.endNum).replace("${total}",this.props.totalItems);ba=(ba?u.total.en:u.total.other).replace("${total}",this.props.totalItems);return F("div",{"class":"gb-total-area__wrap",key:"gb-total-area__wrap"},F("div",{"class":"gb-total-area__container",key:"gb-total-area-checked"},0<I.length&&F(B.a,{key:"selected-groups-dropdown",groups:I,items:O,handleGroupClick:function(la){H.props.deselectGroups([la])},
portal:P}),0<I.length&&F("button",{key:"gb-clear-selection-btn",id:"gb__clear-selection-btn","class":"gb-total-area__btn-link",onclick:this.handleClearSelection},u.clearSelection),0===I.length&&F("span",{"class":"gb-total-area__description"},ka,F("span",{"class":"gb-total-area__screen-reader-total","aria-live":"polite",id:"group-browser-results-region"},ba)),fa||V?null:L?F("button",{key:"gb-select-all-btn",id:"gb__select-all-input","class":"gb-total-area__clear-btn",onclick:this.handleDeselectAll},
u.deselectAllOnPage):F("button",{key:"gb-select-all-btn",id:"gb__select-all-input","class":"gb-total-area__clear-btn",onclick:this.handleSelectAll},u.selectAllOnPage)),F(D.a,{key:"gb-filter-chips"}))},A}(h.Component);e.a=Object(h.connect)(function(E){var A=Object(C.b)(E)?E:E.gbState,F=A.groups,H=F.total,I=F.selectedGroups,L=F.selectorItems,J=A.config,O=J.groupsPerPage;J=J.enableSingleSelection;var P=A.utils.portal,fa=A.ui.page.currentPageNumber,V=0===H?0:O*(fa-1)+1;O=H<O*fa?H:O*fa;return{displayGroups:F.displayGroups,
fullySelectedGroups:Object(z.d)(A.groups),selectedGroups:I,selectorItems:L,startNum:V,endNum:O,totalItems:H,portal:P,isWithinShare:!Object(C.b)(E),enableSingleSelection:J}},function(E){return{selectGroups:function(A){return E(Object(y.d)(A))},deselectGroups:function(A){return E(Object(y.b)(A))},clearAll:function(){return E(Object(y.a)())}}})(d)},539:function(h,e,d){var g=d(0),u=d(69),x=d(150);h=d(16);var y=d(90),B=d(540),C={open:!1};d=function(z){function D(){var E=null!==z&&z.apply(this,arguments)||
this;return E.state=C,E.handleClick=function(A){A=A.target;E.dropdown&&E.dropdown.contains(A)||((A=E.toggleButton&&E.toggleButton.contains(A))?E.setState({open:!E.state.open}):E.state.open&&!A&&E.setState({open:!1}))},E}return Object(g.d)(D,z),D.prototype.render=function(E){var A=this,F=this.props,H=F.groups,I=F.handleGroupClick,L=F.items,J=F.portal;F=1<H.length?u.groupsSelected.enPlural:u.groupsSelected.en;"en"!==x.locale.slice(0,2)&&(F=u.groupsSelected.other);F=F.replace("${num}",H.length);var O=
L.some(function(P){return!!P.username});return E("div",{key:"selected-dropdown","class":"selected-dropdown",afterCreate:function(){document.addEventListener("click",A.handleClick)},afterRemoved:function(){document.removeEventListener("click",A.handleClick);A.setState(C)}},E("button",{"class":"selected-dropdown__toggle-button",key:"selected-dropdown__toggle-button","aria-haspopup":"true",afterCreate:function(P){A.toggleButton=P},afterRemoved:function(){A.toggleButton=void 0}},E("span",{"class":"selected-dropdown__toggle-button__text"},
F),E("svg",{role:"img",style:"\n              padding: 0 9px;\n              width: 16px;\n              height: 16px;\n              fill: white;"},E("path",{d:y.a}))),this.state.open&&E("div",{"class":"selected-dropdown__list__container",key:"selected-dropdown__list__container",afterCreate:function(P){A.dropdown=P},afterRemoved:function(){A.dropdown=void 0}},E("h3",{"class":"selected-dropdown__list__title"},u.selectedGroups),E("ul",{id:"selected-dropdown__list","class":"selected-dropdown__list",
key:"selected-dropdown__list",role:"menu"},H.map(function(P){return E(B.a,{selectedGroupData:P,itemTotal:L.length,handleCloseClick:I,key:P.group.id,portal:J,isMemberSelector:O})}))))},D}(h.Component);e.a=d},54:function(h,e,d){d.d(e,"b",function(){return y});d.d(e,"a",function(){return B});d.d(e,"c",function(){return C});h=d(16);e=d(215);var g=d(208),u=d(137),x=d(210);d=d(207);var y=function(z){return!z.gbState},B={config:d.b,parameters:g.b,groups:u.f,ui:x.b,utils:e.b},C=Object(h.combineReducers)({config:d.a,
parameters:g.a,groups:u.b,ui:x.a,utils:e.a})},540:function(h,e,d){var g=d(0),u=d(69),x=d(150);h=d(16);var y=d(249),B=d(90);d=function(C){function z(){return null!==C&&C.apply(this,arguments)||this}return Object(g.d)(z,C),z.prototype.render=function(D){var E=this.props,A=E.selectedGroupData,F=E.handleCloseClick,H=E.itemTotal,I=E.portal,L=A.group;A=A.selectedByIds&&A.selectedByIds.length;E=E.isMemberSelector?u.membersSelected:u.itemsSelected;E="en"===x.locale.slice(0,2)?E.en.replace("${num}",A).replace("${total}",
H):E.other.replace("${num}",A).replace("${total}",H);var J=u.deselectGroup.replace("${name}",L.title);return D("li",{"class":"selected-dropdown__list-item",role:"menuitem",key:L.id},D(y.a,{group:L,stacked:!0,portal:I}),D("span",{"class":"selected-dropdown__list-item__description"},L.title,A!==H&&D("span",{"class":"selected-dropdown__list-item__count"},E)),D("button",{"class":"selected-dropdown__list-item__button",onclick:function(){F(L)},"aria-label":J},D("svg",null,D("path",{d:B.j}))))},z}(h.Component);
e.a=d},541:function(h,e,d){var g=d(0),u=d(69),x=d(284);h=d(16);var y=d(54),B=d(38),C=d(449),z=d.n(C),D=d(186),E=d(159),A=d(26);d=function(H){function I(){var L=null!==H&&H.apply(this,arguments)||this;return L.state={filterOpen:!1},L}return Object(g.d)(I,H),I.prototype.render=function(L){var J=this,O=this.props,P=O.activeFilters,fa=O.handleClearAllFilters,V=O.handleClearFilter,ba=this.state.filterOpen;if(0!==P.length)return L("div",{"class":"ib__active-filters gb-filter-chip-wrap",key:"filter-chip-wrap"},
L("div",{"class":"filter-controller__container",key:"filter-controller__container"},L("span",{"class":"filter-controller__label"},u.filters,":"),L("div",{"class":"filter-controller__chip-container margin-right-half filter-controller__chip-container--full-width"},ba?P.map(function(ka){return L(z.a,{filterId:ka.type,handleRemoveFilter:function(la){V(ka.type)},key:ka.type,text:ka.text})}):L(z.a,{filterId:P[0].type,handleRemoveFilter:function(ka){V(P[0].type)},key:P[0].type,text:P[0].text}),1<P.length&&
L("button",{onclick:function(){return J.setState({filterOpen:!ba})},key:"filter-controller-more-button",classes:{"filter-controller__expand-btn":!0,"filter-controller__expand-btn--dark":ba}},(ba?"- ":"+ ")+(P.length-1)),L("button",{"class":"filter-controller__clear-btn",onclick:fa},u.clearAll))))},I}(h.Component);e.a=Object(h.connect)(function(H){H=Object(y.b)(H)?H:H.gbState;return{activeFilters:F({filterState:H.parameters.filter,username:H.utils.portalUser.username,isPublic:H.config.userType===A.e.PUBLIC})}},
function(H){return{handleClearAllFilters:function(){H(Object(D.a)());H(E.b)},handleClearFilter:function(I){H(Object(D.a)(I));H(E.b)}}})(d);var F=function(H){var I=H.filterState,L=I.designationFilter,J=I.ownerFilter,O=I.dateCreatedFilter,P=I.membershipFilter;I=H.username;H=H.isPublic;var fa=[];L&&fa.push({text:x.substitute(u.filterChips.designation,{designation:u.designationFilterTitles[L]}),type:B.a.DESIGNATION});J&&(L=J===B.d.itemOwner&&I||u.ownerTitles[J],J===B.d.outsideOrg&&H&&(L=u.ownerTitles.someOneElse),
fa.push({text:x.substitute(u.filterChips.owner,{owner:L}),type:B.a.OWNER}));if(O&&fa.push({text:x.substitute(u.filterChips.created,{created:O.label}),type:B.a.DATE_CREATED}),P){var V="";Object.keys(B.c).some(function(ba){return B.c[ba]===P&&(V=ba),V});fa.push({text:x.substitute(u.filterChips.membership,{membership:u.membershipFilterTitles[V]}),type:B.a.MEMBERSHIP})}return fa}},542:function(h,e,d){var g=d(69);h=d(543);var u=d.n(h);h=d(544);var x=d.n(h),y=d(307),B=d(137);e.a=function(C,z){var D=C.displayGroups,
E=C.handleGroupCheck,A=C.handleGroupUncheck,F=C.selectedGroups,H=C.sortField,I=C.portal,L=C.selectorItems,J=C.initialSelectedGroups,O=C.handleGroupRevert,P=C.shouldDisable,fa=C.noFilters,V=C.disabledText;return 0===D.length?z(y.a,{key:"no-group-results",text:fa?g.noGroupsAvailable:g.noGroupsFound}):D.map(function(ba){var ka=F[ba.id],la=ka&&Object(B.e)(ka,L);if(0===L.length)return z(u.a,{checked:la,group:ba,key:ba.id,sortField:H,onCheckGroup:E,onUncheckGroup:A,portal:I,shouldDisable:P,disabledText:V});
var ma=J[ba.id],ha=!!(ka&&!la&&ka.selectedByIds&&0<ka.selectedByIds.length);ma=ma&&ma.selectedByIds||[];var Z=ka&&ka.selectedByIds||[];ka=L.filter(function(W){return-1<Z.indexOf(W.id)});return z(x.a,{group:ba,checked:la,indeterminate:ha,initialSelectedByIds:ma,selectedBy:ka,allSelectorItemIds:L.map(function(W){return W.id}),key:ba.id,sortField:H,onCheckGroup:E,onUncheckGroup:A,onRevertGroup:O,portal:I,shouldDisable:P,disabledText:"",selectors:L})})}},543:function(h,e){h.exports=k},544:function(h,
e){h.exports=l},58:function(h,e,d){function g(z,D){return(null==z?void 0:z.owner)===D.username}function u(z,D){var E;if(!(E=g(z,D)))if(Object(y.a)(z.isAdmin))E=!!z.isAdmin;else{E=z.owner;var A="admin"===z.itemControl;E=!(z.portal.isPortal&&!g(z,D)&&A&&-1<E.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(E))&&A}return E}function x(z,D){return u(z,D)||"update"===z.itemControl}d.d(e,"d",function(){return g});d.d(e,"c",function(){return u});d.d(e,"a",function(){return x});
d.d(e,"b",function(){return C});var y=d(5),B=d(51),C=function(z){var D=z.user,E=z.items;z=z.portal;return Object(B.l)({items:E,user:D})&&Object(B.h)({items:E,user:D,portal:z})&&Object(B.g)(D)&&E[0].itemOwner||D}},61:function(h,e,d){function g(fa){var V=fa.groupIds,ba=fa.shareLevelOptions,ka=fa.restUrl,la=fa.request,ma=fa.unshare;return C.Promise.all(fa.items.map(function(ha,Z){return new C.Promise(function(W,Q){la(ka+"/content/items/"+(ha.itemId||ha.id)+"/"+(ma?"unshare":"share"),{method:"post",query:Object(y.a)({f:"json",
groups:V,confirmItemControl:!0},ba||{})}).then(W,Q)})}))["catch"](function(ha){throw ha;})}function u(fa,V){return new C.Promise(function(ba,ka){var la,ma=null===(la=fa.helpMap)||void 0===la?void 0:la.m;ma?ba(ma):V(fa.restUrl+"/portals/helpmap",{query:{f:"json",format:"json"}}).then(function(ha){var Z;ba(null===(Z=ha.data.helpMap)||void 0===Z?void 0:Z.m)},ka)})}d.d(e,"h",function(){return D});d.d(e,"g",function(){return E});d.d(e,"b",function(){return A});d.d(e,"e",function(){return F});d.d(e,"d",
function(){return H});d.d(e,"f",function(){return O});d.d(e,"c",function(){return P});d.d(e,"a",function(){return u});var x,y=d(0),B=d(30),C=d(28);h=d(26);var z=d(58),D=function(fa){var V=fa.items,ba=fa.groups,ka=fa.restUrl,la=fa.request,ma=fa.portalUser;if(0===V.length)return C.Promise.resolve();var ha=Object(B.b)(ba);return V.every(function(Z){return Object(z.d)(Z,ma)})?new C.Promise(function(Z,W){if(!ba||0===ba.length)return Z();var Q={f:"json",items:Object(B.b)(V),groups:ha};la(ka+"/content/users/"+
ma.username+"/unshareItems",{method:"post",query:Q}).then(Z,W)}):g({items:V,groupIds:ha,restUrl:ka,request:la,unshare:!0})},E=function(fa){var V=fa.items,ba=fa.groups,ka=fa.restUrl,la=fa.request,ma=fa.portalUser,ha=fa.selectedOptions;fa=fa.ignoreShareLevel;if(0===V.length)return C.Promise.resolve();if(!fa&&!ha)throw"Selected options must be provided unless share level is ignored.";var Z=Object(B.b)(ba),W=fa?{}:I(ha);return V.every(function(Q){return Object(z.d)(Q,ma)})?new C.Promise(function(Q,ia){la(ka+
"/content/users/"+ma.username+"/shareItems",{method:"post",query:Object(y.a)({f:"json",items:Object(B.b)(V),groups:Z,confirmItemControl:!0},W)}).then(function(R){R=R.data;R.results.every(function(S){return S.success})?Q():ia(R)},ia)}):g({items:V,groupIds:Z,shareLevelOptions:W,restUrl:ka,request:la})},A=function(fa){return fa.reduce(function(V,ba){return Object(y.g)(Object(y.g)([],V),ba)},[])},F=function(fa){return 1<Object.keys(fa).filter(function(V){return"total"!==V&&0<fa[V]}).length},H=function(fa){return Object.keys(fa).filter(function(V){return"total"!==
V}).reduce(function(V,ba){return fa[ba]===fa.total?ba:V})},I=function(fa){return F(fa)?{}:L[H(fa)]},L=((x={})[h.b["public"]]={org:!1,everyone:!0},x[h.b.org]={org:!0,everyone:!1},x[h.b["private"]]={org:!1,everyone:!1},x[h.b.shared]={org:!1,everyone:!1},x),J="Location Tracking Service;Location Tracking View;IoTFeed;IoTRealTimeAnalytic;IoTBigDataAnalytic;IoTFeatureLayer;IoTMapImageLayer;IoTStreamLayer;Administrative Report;EditExtensionIndoorsSpaces".split(";"),O=function(fa){var V,ba,ka=fa.typeKeywords,
la=fa.type;la=J.some(function(ha){return-1<ka.indexOf(ha)})&&"Real Time Analytic"!==la&&"Big Data Analytic"!==la;var ma=!(null===(V=null==fa?void 0:fa.portal)||void 0===V?0:V.isPortal)&&"Image Service"===fa.type&&-1<(null===(ba=fa.url)||void 0===ba?void 0:ba.indexOf("://iservices"))&&-1<fa.url.indexOf("arcgis.com");fa="Knowledge Graph"===fa.type;return la||ma||fa},P=function(fa,V,ba){return ba&&V["public"]===V.total?fa.filter(function(ka){return-1<ka.typeKeywords.indexOf("DeveloperBasemap")}):[]}},
63:function(h,e,d){function g(){for(var u=[],x=0;x<arguments.length;x++)u[x]=arguments[x];return function(y){return u.reduceRight(function(B,C){return C(B)},y)}}d.d(e,"a",function(){return g})},68:function(h,e,d){var g;d.d(e,"a",function(){return g});(function(u){u.LOADING_GROUPS="LOADING_GROUPS";u.LOAD_GROUPS_SUCCESS="LOAD_GROUPS_SUCCESS";u.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL";u.SELECT_GROUPS="SELECT_GROUPS";u.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS";u.DESELECT_GROUPS="DESELECT_GROUPS";u.REVERT_GROUPS=
"REVERT_GROUPS";u.CLEAR_SELECTION="CLEAR_SELECTION";u.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS";u.SET_HAS_GROUPS="SET_HAS_GROUPS"})(g||(g={}))},69:function(h,e){h.exports=G},802:function(h,e,d){d.d(e,"a",function(){return u});d.d(e,"b",function(){return x});var g=d(83),u=function(y){return{type:g.a.CHANGE_SORT_FIELD,payload:y}},x=function(y){return{type:g.a.CHANGE_SORT_ORDER,payload:y}}},803:function(h,e,d){d.d(e,"a",function(){return x});var g=d(159),u=d(204),x=function(y){return function(B,C){B({type:u.a.SET_PAGE,
payload:y});B(g.b)}}},83:function(h,e,d){var g;d.d(e,"a",function(){return g});(function(u){u.SET_SEARCH_STRING="SET_SEARCH_STRING";u.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER";u.CHANGE_SORT_FIELD="CHANGE_SORT_FIELD";u.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER";u.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER";u.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER";u.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER";u.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER";u.SET_USERS="SET_USERS";
u.CLEAR_FILTERS="CLEAR_FILTERS"})(g||(g={}))},855:function(h,e,d){d.r(e);var g=d(0),u=d(69);h=d(16);var x=d(54);d.d(e,"reducers",function(){return x.c});d.d(e,"initialState",function(){return x.a});var y=d(144);d.d(e,"deselectGroups",function(){return y.b});d.d(e,"selectGroups",function(){return y.d});var B=d(159);d.d(e,"search",function(){return B.b});var C=d(803),z=d(372),D=d.n(z),E=d(530),A=d(531),F=d(537);z=d(373);var H=d.n(z),I=d(416),L=d(226);d=function(J){function O(){var P=null!==J&&J.apply(this,
arguments)||this;return P.handlePageChange=function(fa){var V;P.props.setPageAndUpdateGroups(fa);(null===(V=P.el)||void 0===V?0:V.parentElement)&&(P.el.parentElement.scrollTop=0)},P}return Object(g.d)(O,J),O.prototype.render=function(P){var fa=this,V=this.props,ba=V.currentTotal,ka=V.groupsPerPage,la=V.currentPage,ma=V.filtersOpen;V=V.toggleFilters;return P("div",{"class":"group-browser__container",afterCreate:function(ha){ha&&!fa.el&&(fa.el=ha)}},P(E.a,{key:"group-browser-search-area"}),P("div",
{"class":"ib__big-row"},P(A.a,{key:"group-browser-filter-sidebar"}),P(F.a,{key:"group-browser-results-panel"})),P(D.a,{key:"group-browse-pager",numPages:ka>ba?1:Math.ceil(ba/ka),currentPage:la,onPageChange:this.handlePageChange}),P("div",{"class":"ib__big-overlay-filters"},P(H.a,{key:"mobile-filter-wrap",maxHeight:!0,open:ma,onClose:V,title:u.filters},P(I.a,{key:"mobile-filters"}))))},O}(h.Component);e["default"]=Object(h.connect)(function(J){J=Object(x.b)(J)?J:J.gbState;var O=J.ui;return{currentPage:O.page.currentPageNumber,
groupsPerPage:J.config.groupsPerPage,currentTotal:J.groups.total,filtersOpen:O.filter.expanded}},function(J){return{setPageAndUpdateGroups:function(O){J(Object(C.a)(O))},toggleFilters:function(){J(Object(L.i)())}}})(d)},90:function(h,e,d){d.d(e,"a",function(){return g});d.d(e,"b",function(){return u});d.d(e,"c",function(){return x});d.d(e,"d",function(){return y});d.d(e,"e",function(){return B});d.d(e,"h",function(){return C});d.d(e,"i",function(){return z});d.d(e,"j",function(){return D});d.d(e,
"k",function(){return E});d.d(e,"g",function(){return A});d.d(e,"f",function(){return F});var g="M15.5 5l-7 7-7-7zM3.914 6L8.5 10.586 13.086 6z",u="M15.707 20h-1.414l-7.5-7.5 7.5-7.5h1.414l-7.5 7.5z",x="M13.802 4.306a.683.683 0 0 1 .708.76.528.528 0 0 1 .357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 0 1-.046-1.135zM11.5 23A11.5 11.5 0 0 1 0 11.5v-.021a11.738 11.738 0 0 1 2.057-6.534 12.15 12.15 0 0 1 4.12-3.637h.005A11.595 11.595 0 0 1 13.618.202l.002.002a11.525 11.525 0 0 1 9.325 10.188v.004A11.497 11.497 0 0 1 11.5 23zm9.795-7.748a7.604 7.604 0 0 1-.666-1.746 4.55 4.55 0 0 1-.651-1.655 1.383 1.383 0 0 1-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 0 0-.992.133l-.113.177-.794.021a2.538 2.538 0 0 1-.483-.213 7.396 7.396 0 0 0-.628.541 1.463 1.463 0 0 1-.941.97 1.544 1.544 0 0 0-.961 1.24 2.264 2.264 0 0 1-.449 1.34 2.446 2.446 0 0 1 .811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 0 1 .028.937 1.452 1.452 0 0 1-.025.098 2.11 2.11 0 0 1 .327 1.883 10.447 10.447 0 0 0 4.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 0 1 1.517 2.251 3.648 3.648 0 0 1 .435.592 10.477 10.477 0 0 0-3.824-8.016h-.103a1.768 1.768 0 0 1-1.938 2.838 4.716 4.716 0 0 1-.723.7 1.525 1.525 0 0 1 .97.078l.183-.654a6.478 6.478 0 0 1 2.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 0 0-.843-1.825 18.554 18.554 0 0 0 .793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 0 1-.102.147zm-8.209 16.74a1.557 1.557 0 0 1 .244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 0 0-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 0 0-2.22-.08 1.602 1.602 0 0 1-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 0 1 1.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 0 1 .384.135s.282.166.372.2l.074-.002a3.411 3.411 0 0 1 2.208-.269.557.557 0 0 1 .432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 0 0 .066-.184.48.48 0 0 1 .562-.362c.2.01.514.231.703.231a4.382 4.382 0 0 0 .786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 0 0-.161-.218c.007.01-.022.034-.042.068a.52.52 0 0 1-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 0 0-.72-.63.545.545 0 0 1-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 0 1-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 0 0 .887-1.249.868.868 0 0 1-.316-.254.095.095 0 0 0-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 0 1-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 0 1 .34-.69 1.71 1.71 0 0 1 .588-.442 10.406 10.406 0 0 0-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 0 0-1.884.475 7.258 7.258 0 0 1-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 0 0-.588-.039A10.467 10.467 0 0 0 1 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 0 1 2.006 1.477.495.495 0 0 1 .111.525c-.07.264-.346.34-.568.502a.431.431 0 0 0-.21.376 10.425 10.425 0 0 0 11.017 2.669z",
y="M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",B="M15 16h4v-4h-4zm1-3h2v2h-2zM5 11h4V7H5zm1-3h2v2H6zm16 14V4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1zm-8 0v-5h-4v5H3V5h3V3h5v2h10v17zm-9-6h4v-4H5zm1-3h2v2H6zm4-2h4V7h-4zm1-3h2v2h-2zm-1 8h4v-4h-4zm1-3h2v2h-2zm4-2h4V7h-4zm1-3h2v2h-2z",C="M16 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4.75 1h-9.5A2.25 2.25 0 0 0 5 10.25v9.25A1.5 1.5 0 0 0 6.5 21H8v2.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 .75-.75V21h1.5a1.5 1.5 0 0 0 1.5-1.5v-9.25A2.25 2.25 0 0 0 16.75 8zM18 19.5a.501.501 0 0 1-.5.5H16v-8h-1v11H9V12H8v8H6.5a.501.501 0 0 1-.5-.5v-9.25A1.251 1.251 0 0 1 7.25 9h9.5A1.251 1.251 0 0 1 18 10.25z",
z="M11 4a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8.001 6A2 2 0 1 1 10 4a2 2 0 0 1-1.999 2zM10 10h1v.921a3.23 3.23 0 0 0-1 2.329zm0 8.5a2.487 2.487 0 0 0 .055.5H5.75a.75.75 0 0 1-.75-.75V16h-.5A1.5 1.5 0 0 1 3 14.5V9.25A2.25 2.25 0 0 1 5.25 7h5.5a2.232 2.232 0 0 1 1.308.426A3.95 3.95 0 0 0 12 8a3.96 3.96 0 0 0 .593 2.067 3.21 3.21 0 0 0-.593.189V9.25A1.251 1.251 0 0 0 10.75 8h-5.5A1.251 1.251 0 0 0 4 9.25v5.25a.5.5 0 0 0 .5.5H5v-5h1v8h4zM19 8a3 3 0 1 0-3 3 3 3 0 0 0 3-3zm-2.999 2A2 2 0 1 1 18 8a2 2 0 0 1-1.999 2zm2.749 1h-5.5A2.25 2.25 0 0 0 11 13.25v5.25a1.5 1.5 0 0 0 1.5 1.5h.5v2.25a.75.75 0 0 0 .75.75h4.5a.75.75 0 0 0 .75-.75V20h.5a1.5 1.5 0 0 0 1.5-1.5v-5.25A2.25 2.25 0 0 0 18.75 11zM20 18.5a.5.5 0 0 1-.5.5H19v-5h-1v8h-4v-8h-1v5h-.5a.5.5 0 0 1-.5-.5v-5.25A1.251 1.251 0 0 1 13.25 12h5.5A1.251 1.251 0 0 1 20 13.25z",
D="M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",E="M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z",A="M21 10v7a3.003 3.003 0 0 1-3 3H4v-1h14a2.003 2.003 0 0 0 2-2v-7a2.003 2.003 0 0 0-2-2H6.691l2.649 2.648-.707.707-3.89-3.89 3.832-3.833.707.707L6.622 7H18a3.003 3.003 0 0 1 3 3z",F="M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"},
99:function(h,e,d){function g(z,D){if(null==z?0:z.length)for(var E=void 0,A=0;A<z.length;A++)if(D(E=z[A]))return E}function u(z){return z.filter(function(D){return 0<D.length})}function x(z,D,E){var A=[];return D.forEach(function(F){(E?F[E].toLowerCase()===z.toLowerCase():F.toLowerCase()===z.toLowerCase())?A.unshift(F):A.push(F)}),A}d.d(e,"e",function(){return y});d.d(e,"f",function(){return B});d.d(e,"c",function(){return g});d.d(e,"b",function(){return u});d.d(e,"a",function(){return C});d.d(e,
"d",function(){return x});h=d(15);var y=function(z,D,E){return E.indexOf(z)===D},B=Object(h.a)(function(z,D){var E={};return D.filter(function(A){return!E[A[z]]&&(E[A[z]]=!0,!0)})}),C=function(z,D){return z.length===D.length&&z.reduce(function(E,A){return E&&-1<D.indexOf(A)},!0)}}})})},"arcgis-components/GroupCards/GroupCheckCard/index":function(){define(["../../Component","dojo/date/locale","../../Buttons/Ago2018Checkbox","../../Buttons/ToggleSwitch","dojo/i18n!../../GroupCards/GroupCheckCard/nls/resources"],
function(K,G,w,v,r){return function(f){function c(b){if(a[b])return a[b].exports;var p=a[b]={i:b,l:!1,exports:{}};return f[b].call(p.exports,p,p.exports,c),p.l=!0,p.exports}var a={};return c.m=f,c.c=a,c.d=function(b,p,q){c.o(b,p)||Object.defineProperty(b,p,{enumerable:!0,get:q})},c.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},c.t=function(b,p){if((1&p&&(b=c(b)),8&p)||4&p&&
"object"==typeof b&&b&&b.__esModule)return b;var q=Object.create(null);if(c.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:b}),2&p&&"string"!=typeof b)for(var t in b)c.d(q,t,function(m){return b[m]}.bind(null,t));return q},c.n=function(b){var p=b&&b.__esModule?function(){return b["default"]}:function(){return b};return c.d(p,"a",p),p},c.o=function(b,p){return Object.prototype.hasOwnProperty.call(b,p)},c.p="",c(c.s=856)}({0:function(f,c,a){function b(h,e){function d(){this.constructor=
h}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");k(h,e);h.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}function p(h,e){var d={},g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&0>e.indexOf(g)&&(d[g]=h[g]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(g=Object.getOwnPropertySymbols(h);u<g.length;u++)0>e.indexOf(g[u])&&Object.prototype.propertyIsEnumerable.call(h,g[u])&&
(d[g[u]]=h[g[u]])}return d}function q(h,e,d,g){var u,x=arguments.length,y=3>x?e:null===g?g=Object.getOwnPropertyDescriptor(e,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(h,e,d,g);else for(var B=h.length-1;0<=B;B--)(u=h[B])&&(y=(3>x?u(y):3<x?u(e,d,y):u(e,d))||y);return 3<x&&y&&Object.defineProperty(e,d,y),y}function t(h,e,d,g){return new (d||(d=Promise))(function(u,x){function y(z){try{C(g.next(z))}catch(D){x(D)}}function B(z){try{C(g["throw"](z))}catch(D){x(D)}}
function C(z){var D;z.done?u(z.value):(D=z.value,D instanceof d?D:new d(function(E){E(D)})).then(y,B)}C((g=g.apply(h,e||[])).next())})}function m(h,e){function d(C){return function(z){return function(D){if(g)throw new TypeError("Generator is already executing.");for(;B;)try{if(g=1,u&&(x=2&D[0]?u["return"]:D[0]?u["throw"]||((x=u["return"])&&x.call(u),0):u.next)&&!(x=x.call(u,D[1])).done)return x;switch(u=0,x&&(D=[2&D[0],x.value]),D[0]){case 0:case 1:x=D;break;case 4:return B.label++,{value:D[1],done:!1};
case 5:B.label++;u=D[1];D=[0];continue;case 7:D=B.ops.pop();B.trys.pop();continue;default:if(!(x=B.trys,(x=0<x.length&&x[x.length-1])||6!==D[0]&&2!==D[0])){B=0;continue}if(3===D[0]&&(!x||D[1]>x[0]&&D[1]<x[3]))B.label=D[1];else if(6===D[0]&&B.label<x[1])B.label=x[1],x=D;else if(x&&B.label<x[2])B.label=x[2],B.ops.push(D);else{x[2]&&B.ops.pop();B.trys.pop();continue}}D=e.call(h,B)}catch(E){D=[6,E],u=0}finally{g=x=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([C,z])}}var g,u,x,y,B={label:0,
sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return y={next:d(0),"throw":d(1),"return":d(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function n(h,e){for(var d=0,g=e.length,u=h.length;d<g;d++,u++)h[u]=e[d];return h}a.d(c,"d",function(){return b});a.d(c,"a",function(){return l});a.d(c,"f",function(){return p});a.d(c,"c",function(){return q});a.d(c,"b",function(){return t});a.d(c,"e",function(){return m});a.d(c,"g",function(){return n});var k=function(h,
e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var u in g)Object.prototype.hasOwnProperty.call(g,u)&&(d[u]=g[u])})(h,e)},l=function(){return(l=Object.assign||function(h){for(var e,d=1,g=arguments.length;d<g;d++)for(var u in e=arguments[d])Object.prototype.hasOwnProperty.call(e,u)&&(h[u]=e[u]);return h}).apply(this,arguments)};Object.create;Object.create},128:function(f,c,a){a.d(c,"a",function(){return p});a.d(c,"b",function(){return q});
var b=a(0);f=a(15);var p=function(t,m){var n;return m.thumbnail&&(n=t.restUrl+"/community/groups/"+m.id+"/info/"+m.thumbnail+(t.credential?"?token\x3d"+t.credential.token:"")),n},q=Object(f.a)(function(t,m){return Object(b.a)(Object(b.a)({},m),{thumbURI:p(t,m)})})},15:function(f,c,a){function b(q){return function m(){for(var n=this,k=[],l=0;l<arguments.length;l++)k[l]=arguments[l];return k.length>=q.length?q.call.apply(q,Object(p.g)([this],k)):function(){for(var h=[],e=0;e<arguments.length;e++)h[e]=
arguments[e];return m.call.apply(m,Object(p.g)(Object(p.g)([n],k),h))}}}a.d(c,"a",function(){return b});var p=a(0)},151:function(f,c){f.exports=G},18:function(f,c){f.exports=K},249:function(f,c,a){var b=a(128);c.a=function(p,q){var t=p.group,m=p.stacked,n=p.portal;m={"gcard-thumbnail__container":!0,"gcard-thumbnail__svg-container":!t.thumbURI,"gcard-thumbnail--stacked":void 0!==m&&m,"gcard-thumbnail--transparent":p.transparent};if(t.thumbnail&&!t.thumbURI&&n&&(t.thumbURI=Object(b.a)(n,t)),t.thumbURI)return q("img",
{src:t.thumbURI,classes:m,alt:t.title});n=!(!t.title.charAt(0)||!t.title.charAt(0).match(/^\w+$/));return q("div",{key:"group-thumbnail-"+t.id,classes:m},q("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"65",height:"65",viewBox:"0 0 65 65"},q("path",{fill:"#"+t.id.substr(t.id.length-6),d:"M0 0h65v65H0z"}),q("path",{fill:"#ccc",d:"M0 0h65v65H0z","fill-opacity":"0.8"}),n?q("text",{x:"50%",y:/(MSIE |Trident\/|Edge\/)/.test(navigator.userAgent)?"70%":"50%",fill:"white","dominant-baseline":"central",
"text-anchor":"middle"},t.title.slice(0,1).toUpperCase()):q("path",{fill:"#FFF",d:"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"})))}},
308:function(f,c){f.exports=w},377:function(f,c){f.exports=v},450:function(f,c){f.exports=r},856:function(f,c,a){a.r(c);var b=a(0),p=a(450),q=a(151);f=a(18);var t=a(249),m=a(308),n=a.n(m);m=a(377);var k=a.n(m);a=function(l){function h(){var e=null!==l&&l.apply(this,arguments)||this;return e.handleCheckClick=function(){var d,g;null!==(g=(d=e.props).shouldDisable)&&void 0!==g&&g.call(d,e.props.group)||(d=e.props.checked?e.props.onUncheckGroup:e.props.onCheckGroup)&&d(e.props.group)},e}return Object(b.d)(h,
l),h.prototype.render=function(e){var d=this.props,g=d.checked,u=d.group,x=d.portal,y=d.key,B=d.shouldDisable;d=u.owner;var C=u.title,z=this.props,D=z.group;var E=D.created;D=D.modified;E=(z=z.sortField)&&"created"===z?p.created+": "+q.format(new Date(E),{selector:"date",formatLength:"medium"}):p.modified+": "+q.format(new Date(0<D?D:E),{selector:"date",formatLength:"medium"});z=(B=!(null==B||!B(this.props.group)))&&this.props.disabledText;return e("div",{classes:{"gcard-gcc__container":!0,"gcard-gcc__container--active":this.props.checked,
"gcard-gcc__container--disabled":B},key:y,onclick:this.handleCheckClick},e(n.a,{key:"gcard-gcc__checkbox-"+u.id,checked:g,onChange:this.handleCheckClick,title:C}),e(t.a,{group:this.props.group,portal:this.props.portal}),e("div",{"class":"gcard-gcc__flex"},e("div",{"class":"gcard-gcc__title-owner"},e("span",{"class":"gcard-gcc__title"},C),e("a",{href:x.baseUrl+"/home/user.html?user\x3d"+d,"class":"gcard-gcc__owner",target:"_blank"},d),e("span",{"class":"gcard-gcc__small-info"},E),z?e("div",{"class":"gcard-gcc__disabled-text"},
e("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},e("path",{d:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z"})),e("span",{"class":"margin-left-quarter font-size--2"},this.props.disabledText)):null),e("div",{"class":"gcard-gcc__info"},e("span",null,E))),e(k.a,{key:"gcard-gcc__toggle-"+u.id,id:"gcard-toggle-"+u.id,value:g,handleToggleClick:this.handleCheckClick,
label:""}))},h}(f.Component);c["default"]=a}})})},"arcgis-components/Buttons/Ago2018Checkbox":function(){define(["../Component"],function(K){return function(G){function w(r){if(v[r])return v[r].exports;var f=v[r]={i:r,l:!1,exports:{}};return G[r].call(f.exports,f,f.exports,w),f.l=!0,f.exports}var v={};return w.m=G,w.c=v,w.d=function(r,f,c){w.o(r,f)||Object.defineProperty(r,f,{enumerable:!0,get:c})},w.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(r,"__esModule",{value:!0})},w.t=function(r,f){if((1&f&&(r=w(r)),8&f)||4&f&&"object"==typeof r&&r&&r.__esModule)return r;var c=Object.create(null);if(w.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),2&f&&"string"!=typeof r)for(var a in r)w.d(c,a,function(b){return r[b]}.bind(null,a));return c},w.n=function(r){var f=r&&r.__esModule?function(){return r["default"]}:function(){return r};return w.d(f,"a",f),f},w.o=function(r,f){return Object.prototype.hasOwnProperty.call(r,
f)},w.p="",w(w.s=825)}({0:function(G,w,v){function r(m,n){function k(){this.constructor=m}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");q(m,n);m.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function f(m,n){var k={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>n.indexOf(l)&&(k[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(l=Object.getOwnPropertySymbols(m);h<
l.length;h++)0>n.indexOf(l[h])&&Object.prototype.propertyIsEnumerable.call(m,l[h])&&(k[l[h]]=m[l[h]])}return k}function c(m,n,k,l){var h,e=arguments.length,d=3>e?n:null===l?l=Object.getOwnPropertyDescriptor(n,k):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(m,n,k,l);else for(var g=m.length-1;0<=g;g--)(h=m[g])&&(d=(3>e?h(d):3<e?h(n,k,d):h(n,k))||d);return 3<e&&d&&Object.defineProperty(n,k,d),d}function a(m,n,k,l){return new (k||(k=Promise))(function(h,e){function d(x){try{u(l.next(x))}catch(y){e(y)}}
function g(x){try{u(l["throw"](x))}catch(y){e(y)}}function u(x){var y;x.done?h(x.value):(y=x.value,y instanceof k?y:new k(function(B){B(y)})).then(d,g)}u((l=l.apply(m,n||[])).next())})}function b(m,n){function k(u){return function(x){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,h&&(e=2&y[0]?h["return"]:y[0]?h["throw"]||((e=h["return"])&&e.call(h),0):h.next)&&!(e=e.call(h,y[1])).done)return e;switch(h=0,e&&(y=[2&y[0],e.value]),y[0]){case 0:case 1:e=
y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++;h=y[1];y=[0];continue;case 7:y=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,(e=0<e.length&&e[e.length-1])||6!==y[0]&&2!==y[0])){g=0;continue}if(3===y[0]&&(!e||y[1]>e[0]&&y[1]<e[3]))g.label=y[1];else if(6===y[0]&&g.label<e[1])g.label=e[1],e=y;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(y);else{e[2]&&g.ops.pop();g.trys.pop();continue}}y=n.call(m,g)}catch(B){y=[6,B],h=0}finally{l=e=0}if(5&y[0])throw y[1];return{value:y[0]?
y[1]:void 0,done:!0}}([u,x])}}var l,h,e,d,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return d={next:k(0),"throw":k(1),"return":k(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function p(m,n){for(var k=0,l=n.length,h=m.length;k<l;k++,h++)m[h]=n[k];return m}v.d(w,"d",function(){return r});v.d(w,"a",function(){return t});v.d(w,"f",function(){return f});v.d(w,"c",function(){return c});v.d(w,"b",function(){return a});v.d(w,"e",function(){return b});
v.d(w,"g",function(){return p});var q=function(m,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,l){k.__proto__=l}||function(k,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(k[h]=l[h])})(m,n)},t=function(){return(t=Object.assign||function(m){for(var n,k=1,l=arguments.length;k<l;k++)for(var h in n=arguments[k])Object.prototype.hasOwnProperty.call(n,h)&&(m[h]=n[h]);return m}).apply(this,arguments)};Object.create;Object.create},16:function(G,w){G.exports=
K},825:function(G,w,v){v.r(w);var r=v(0);G=function(f){function c(a){a=f.call(this,a)||this;return a.handleCheckChange=a.handleCheckChange.bind(a),a}return Object(r.d)(c,f),c.prototype.render=function(a){var b=Object(r.a)({"btn-2018check__wrap":!0},this.props.wrapperClasses),p={"btn-2018check__custom":!0,"btn-2018check__custom--large":this.props.large,"btn-2018check__custom--active":this.props.checked||this.props.indeterminate,"btn-2018check__custom--disabled":this.props.disabled},q=this.props.large?
"20":"16";return a("span",{classes:b,key:this.props.key},a("input",{type:"checkbox",checked:this.props.checked,classes:{"btn-2018check__input":!0,"btn-2018check__input--disabled":this.props.disabled},indeterminate:this.props.indeterminate,onclick:this.handleCheckChange,title:this.props.title,id:this.props.id,"aria-label":this.props.title,disabled:this.props.disabled,"aria-describedby":this.props.describedBy}),a("span",{classes:p},this.props.checked?a("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",
width:q,height:q,viewBox:"0 0 16 16"},a("path",{d:"M12.753 3l-7.319 7.497L3.252 8.31 2 9.373l3.434 3.434L14 4.24z"})):this.props.indeterminate?a("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:q,height:q,viewBox:"0 0 16 16"},a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 7h8v2H4z"})):null))},c.prototype.handleCheckChange=function(a){var b,p;a.stopPropagation();a.preventDefault();this.props.disabled||null!==(p=null===(b=this.props)||void 0===b?void 0:b.onChange)&&void 0!==p&&
p.call(b,!this.props.checked)},c}(v(16).Component);w["default"]=G}})})},"arcgis-components/GroupCards/MultiselectableGroupCard/index":function(){define(["../../Component","../../Buttons/Ago2018Checkbox","../../GroupBadges/index","../../Buttons/ToggleSwitch","dojo/i18n!../../GroupCards/MultiselectableGroupCard/nls/resources"],function(K,G,w,v,r){return function(f){function c(b){if(a[b])return a[b].exports;var p=a[b]={i:b,l:!1,exports:{}};return f[b].call(p.exports,p,p.exports,c),p.l=!0,p.exports}var a=
{};return c.m=f,c.c=a,c.d=function(b,p,q){c.o(b,p)||Object.defineProperty(b,p,{enumerable:!0,get:q})},c.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},c.t=function(b,p){if((1&p&&(b=c(b)),8&p)||4&p&&"object"==typeof b&&b&&b.__esModule)return b;var q=Object.create(null);if(c.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:b}),2&p&&"string"!=typeof b)for(var t in b)c.d(q,
t,function(m){return b[m]}.bind(null,t));return q},c.n=function(b){var p=b&&b.__esModule?function(){return b["default"]}:function(){return b};return c.d(p,"a",p),p},c.o=function(b,p){return Object.prototype.hasOwnProperty.call(b,p)},c.p="",c(c.s=857)}({0:function(f,c,a){function b(h,e){function d(){this.constructor=h}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");k(h,e);h.prototype=null===e?Object.create(e):(d.prototype=e.prototype,
new d)}function p(h,e){var d={},g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&0>e.indexOf(g)&&(d[g]=h[g]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(g=Object.getOwnPropertySymbols(h);u<g.length;u++)0>e.indexOf(g[u])&&Object.prototype.propertyIsEnumerable.call(h,g[u])&&(d[g[u]]=h[g[u]])}return d}function q(h,e,d,g){var u,x=arguments.length,y=3>x?e:null===g?g=Object.getOwnPropertyDescriptor(e,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=
Reflect.decorate(h,e,d,g);else for(var B=h.length-1;0<=B;B--)(u=h[B])&&(y=(3>x?u(y):3<x?u(e,d,y):u(e,d))||y);return 3<x&&y&&Object.defineProperty(e,d,y),y}function t(h,e,d,g){return new (d||(d=Promise))(function(u,x){function y(z){try{C(g.next(z))}catch(D){x(D)}}function B(z){try{C(g["throw"](z))}catch(D){x(D)}}function C(z){var D;z.done?u(z.value):(D=z.value,D instanceof d?D:new d(function(E){E(D)})).then(y,B)}C((g=g.apply(h,e||[])).next())})}function m(h,e){function d(C){return function(z){return function(D){if(g)throw new TypeError("Generator is already executing.");
for(;B;)try{if(g=1,u&&(x=2&D[0]?u["return"]:D[0]?u["throw"]||((x=u["return"])&&x.call(u),0):u.next)&&!(x=x.call(u,D[1])).done)return x;switch(u=0,x&&(D=[2&D[0],x.value]),D[0]){case 0:case 1:x=D;break;case 4:return B.label++,{value:D[1],done:!1};case 5:B.label++;u=D[1];D=[0];continue;case 7:D=B.ops.pop();B.trys.pop();continue;default:if(!(x=B.trys,(x=0<x.length&&x[x.length-1])||6!==D[0]&&2!==D[0])){B=0;continue}if(3===D[0]&&(!x||D[1]>x[0]&&D[1]<x[3]))B.label=D[1];else if(6===D[0]&&B.label<x[1])B.label=
x[1],x=D;else if(x&&B.label<x[2])B.label=x[2],B.ops.push(D);else{x[2]&&B.ops.pop();B.trys.pop();continue}}D=e.call(h,B)}catch(E){D=[6,E],u=0}finally{g=x=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([C,z])}}var g,u,x,y,B={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return y={next:d(0),"throw":d(1),"return":d(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function n(h,e){for(var d=0,g=e.length,u=h.length;d<g;d++,u++)h[u]=
e[d];return h}a.d(c,"d",function(){return b});a.d(c,"a",function(){return l});a.d(c,"f",function(){return p});a.d(c,"c",function(){return q});a.d(c,"b",function(){return t});a.d(c,"e",function(){return m});a.d(c,"g",function(){return n});var k=function(h,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var u in g)Object.prototype.hasOwnProperty.call(g,u)&&(d[u]=g[u])})(h,e)},l=function(){return(l=Object.assign||function(h){for(var e,
d=1,g=arguments.length;d<g;d++)for(var u in e=arguments[d])Object.prototype.hasOwnProperty.call(e,u)&&(h[u]=e[u]);return h}).apply(this,arguments)};Object.create;Object.create},128:function(f,c,a){a.d(c,"a",function(){return p});a.d(c,"b",function(){return q});var b=a(0);f=a(15);var p=function(t,m){var n;return m.thumbnail&&(n=t.restUrl+"/community/groups/"+m.id+"/info/"+m.thumbnail+(t.credential?"?token\x3d"+t.credential.token:"")),n},q=Object(f.a)(function(t,m){return Object(b.a)(Object(b.a)({},
m),{thumbURI:p(t,m)})})},15:function(f,c,a){function b(q){return function m(){for(var n=this,k=[],l=0;l<arguments.length;l++)k[l]=arguments[l];return k.length>=q.length?q.call.apply(q,Object(p.g)([this],k)):function(){for(var h=[],e=0;e<arguments.length;e++)h[e]=arguments[e];return m.call.apply(m,Object(p.g)(Object(p.g)([n],k),h))}}}a.d(c,"a",function(){return b});var p=a(0)},18:function(f,c){f.exports=K},181:function(f,c,a){a.d(c,"b",function(){return t});a.d(c,"c",function(){return m});a.d(c,"a",
function(){return n});var b=a(63);f=a(5);var p=a(99),q=a(128),t=function(k,l){return Object(b.a)(Object(q.b)(k))(l)},m=Object(b.a)(Object(f.e)("thumbURI")),n=function(k){var l=k.initialSelectedByIds;return!Object(p.a)(k.selectedBy.map(function(h){return h.id}),l)}},249:function(f,c,a){var b=a(128);c.a=function(p,q){var t=p.group,m=p.stacked,n=p.portal;m={"gcard-thumbnail__container":!0,"gcard-thumbnail__svg-container":!t.thumbURI,"gcard-thumbnail--stacked":void 0!==m&&m,"gcard-thumbnail--transparent":p.transparent};
if(t.thumbnail&&!t.thumbURI&&n&&(t.thumbURI=Object(b.a)(n,t)),t.thumbURI)return q("img",{src:t.thumbURI,classes:m,alt:t.title});n=!(!t.title.charAt(0)||!t.title.charAt(0).match(/^\w+$/));return q("div",{key:"group-thumbnail-"+t.id,classes:m},q("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"65",height:"65",viewBox:"0 0 65 65"},q("path",{fill:"#"+t.id.substr(t.id.length-6),d:"M0 0h65v65H0z"}),q("path",{fill:"#ccc",d:"M0 0h65v65H0z","fill-opacity":"0.8"}),n?q("text",{x:"50%",y:/(MSIE |Trident\/|Edge\/)/.test(navigator.userAgent)?
"70%":"50%",fill:"white","dominant-baseline":"central","text-anchor":"middle"},t.title.slice(0,1).toUpperCase()):q("path",{fill:"#FFF",d:"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"})))}},
308:function(f,c){f.exports=G},349:function(f,c){f.exports=w},377:function(f,c){f.exports=v},408:function(f,c){f.exports=r},5:function(f,c,a){function b(h){return 0===Object.keys(h).length&&h.constructor===Object}function p(h){return null!=h}function q(h,e){return k.apply(null,arguments)}function t(h,e){return l.apply(null,arguments)}a.d(c,"b",function(){return b});a.d(c,"a",function(){return p});a.d(c,"e",function(){return n});a.d(c,"c",function(){return q});a.d(c,"d",function(){return t});var m=
a(0);f=a(15);var n=Object(f.a)(function(h,e){var d=Object(m.a)({},e);return delete d[h],d}),k=Object(f.a)(function(h,e){return Object.keys(e).reduce(function(d,g){return d[g]=h(e[g],g,e),d},{})}),l=Object(f.a)(function(h,e){return Object.keys(e).reduce(function(d,g){return h(e[g],g,e)&&(d[g]=e[g]),d},{})})},63:function(f,c,a){function b(){for(var p=[],q=0;q<arguments.length;q++)p[q]=arguments[q];return function(t){return p.reduceRight(function(m,n){return n(m)},t)}}a.d(c,"a",function(){return b})},
857:function(f,c,a){a.r(c);var b=a(0),p=a(408);f=a(18);var q=a(249),t=a(308),m=a.n(t);t=a(377);var n=a.n(t),k=a(349),l=a.n(k),h=a(181);a=function(d){function g(){var u=null!==d&&d.apply(this,arguments)||this;return u.handleAssignedLinkClick=function(x){x.stopPropagation()},u.handleCheckClick=function(){var x,y;null!==(y=(x=u.props).shouldDisable)&&void 0!==y&&y.call(x,u.props.group)||(x=u.props.checked?u.props.onUncheckGroup:u.props.onCheckGroup,null==x||x(u.props.group))},u}return Object(b.d)(g,
d),g.prototype.render=function(u){var x=this,y=this.props,B=y.checked,C=y.group,z=y.indeterminate,D=y.key,E=y.selectedBy,A=y.initialSelectedByIds,F=y.portal,H=y.shouldDisable,I=y.disabledText;y=y.selectors;var L=C.title,J=C.id+"-badge",O=e(this.props,u);H=!(null==H||!H(C));var P=Object(k.getBadgeTypes)(C,F).map(function(V){return J+"-"+V}).join(" "),fa=null==y?void 0:y.some(function(V){return!!V.username});return u("div",{classes:{"gcard-gcc__container":!0,"gcard-gcc__container--active":B,"gcard-gcc__container--disabled":H,
"gcard-gcc__container--compact":!0},key:D,onclick:this.handleCheckClick},u(m.a,{key:"gcard-gcc__checkbox-"+C.id,checked:B,indeterminate:z,onChange:this.handleCheckClick,title:L,describedBy:P}),u(q.a,{group:C,portal:F}),u("span",{key:"gcard-gcc__title","class":"gcard-gcc__title"},u("div",null,L),!!y&&fa&&z&&u("div",{id:"partial-assigned-container-"+C.id},u("calcite-popover-manager",null,u("calcite-link",{id:"partial-assigned-"+C.id,onclick:this.handleAssignedLinkClick},p.membersAssigned.replace("${num}",
E.length).replace("${total}",y.length))),u("calcite-popover",{"reference-element":"partial-assigned-"+C.id},u("ul",{"class":"padding-right-1"},E.map(function(V){return u("li",{key:V.username},V.username)}))))),u(l.a,{group:C,portal:F,key:"group-badges",id:J}),u("div",{key:"gcard-gcc__details","class":"gcard-gcc__details"},O,Object(h.a)({selectedBy:E,initialSelectedByIds:A})?u("button",{key:"gcard-gcc__revert-button","class":"gcard-gcc__revert-button",onclick:function(V){var ba,ka;V.stopPropagation();
null===(ka=(ba=x.props).onRevertGroup)||void 0===ka||ka.call(ba,C)}},p.revert):null),H&&u("div",{"class":"gcard-gcc__disabled-text",key:"disabled-text"},u("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},u("path",{d:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z"})),u("span",{"class":"margin-left-quarter font-size--2"},I)),u(n.a,{key:"gcard-gcc__toggle-"+
C.id,id:"gcard-toggle-"+C.id,value:B,handleToggleClick:this.handleCheckClick,label:""}))},g}(f.Component);c["default"]=a;var e=function(d,g){var u=d.selectedBy,x=d.allSelectorItemIds,y=d.initialSelectedByIds;return 0===x.length||1===x.length||0===y.length&&0===u.length?null:g("span",{key:"gcard-gcc__share-text","class":"gcard-gcc__share-text",innerHTML:(Object(h.a)({selectedBy:u,initialSelectedByIds:y})?p.willBeShared:p.alreadyShared).replace("${num}",u.length).replace("${total}",x.length)})}},99:function(f,
c,a){function b(k,l){if(null==k?0:k.length)for(var h=void 0,e=0;e<k.length;e++)if(l(h=k[e]))return h}function p(k){return k.filter(function(l){return 0<l.length})}function q(k,l,h){var e=[];return l.forEach(function(d){(h?d[h].toLowerCase()===k.toLowerCase():d.toLowerCase()===k.toLowerCase())?e.unshift(d):e.push(d)}),e}a.d(c,"e",function(){return t});a.d(c,"f",function(){return m});a.d(c,"c",function(){return b});a.d(c,"b",function(){return p});a.d(c,"a",function(){return n});a.d(c,"d",function(){return q});
f=a(15);var t=function(k,l,h){return h.indexOf(k)===l},m=Object(f.a)(function(k,l){var h={};return l.filter(function(e){return!h[e[k]]&&(h[e[k]]=!0,!0)})}),n=function(k,l){return k.length===l.length&&k.reduce(function(h,e){return h&&-1<l.indexOf(e)},!0)}}})})},"arcgis-components/GroupBadges/index":function(){define(["../Component","../GroupBadge/index"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,
v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=
typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},v.p="",v(v.s=853)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):
(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==
typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");
for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=
d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=
k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,
l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=K},200:function(w,v,r){var f,c;r.d(v,"b",function(){return c});r.d(v,"a",function(){return a});(function(b){b.collaboration="collaboration";b.featuredContent="featuredContent";b.gallery="gallery";b.openData="openData";b.sharedUpdate="sharedUpdate";b.partnered="partnered";b.anyOrg="anyOrg"})(c||(c=
{}));var a=((f={})[c.collaboration]="M13.886 9.149a5.973 5.973 0 0 0-2.906-6.35 2.997 2.997 0 0 0-5.982.015A5.97 5.97 0 0 0 2.113 9.15a2.991 2.991 0 1 0 3.475 4.34 5.955 5.955 0 0 0 4.824 0 2.99 2.99 0 1 0 3.474-4.34zM8 1a2 2 0 1 1-2 2 2.002 2.002 0 0 1 2-2zM3 14a2 2 0 1 1 2-2 2.002 2.002 0 0 1-2 2zm7-2a2.994 2.994 0 0 0 .067.623 5.027 5.027 0 0 1-2.067.45 5.083 5.083 0 0 1-2.074-.454A2.837 2.837 0 0 0 6 12a3.001 3.001 0 0 0-2.972-2.997A5.052 5.052 0 0 1 5.13 3.824a2.981 2.981 0 0 0 5.74 0 5.052 5.052 0 0 1 2.101 5.179A3.001 3.001 0 0 0 10 12zm3 2a2 2 0 1 1 2-2 2.002 2.002 0 0 1-2 2z",
f[c.featuredContent]="M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z",f[c.gallery]="M11 5.56L9.473 4.088a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L5.498 3.07a.27.27 0 0 0-.382.018L3.1 5.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32V7h9zM10 6H3.752a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78zM7.75 2.5a.75.75 0 1 1 .75.75.75.75 0 0 1-.75-.75zM11 9H2V8h9zm5-6v11H3v-2h1v1h11V4h-1V3zm-3-3H0v11h13zm-1 10H1V1h11z",
f[c.openData]="M13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.936 11.936 0 0 0 5 .984.5.5 0 0 0 0-1A10.147 10.147 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5zM8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.63 8.63 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2c2.861 0 5 1.056 5 2s-2.139 2-5 2z",f[c.sharedUpdate]="M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z",
f[c.partnered]="M13.89,6.11a5.47,5.47,0,0,0-2.56-1.45A5.39,5.39,0,0,0,9.89,2.11,5.5,5.5,0,0,0,2.11,9.89a5.47,5.47,0,0,0,2.56,1.45,5.39,5.39,0,0,0,1.44,2.55,5.5,5.5,0,0,0,7.78-7.78Zm-.71,7.07A4.5,4.5,0,1,1,6.82,6.82l-.71-.71A5.46,5.46,0,0,0,4.5,10a2.09,2.09,0,0,0,0,.25A4.51,4.51,0,1,1,9.18,9.18l.71.71A5.46,5.46,0,0,0,11.5,6a2.09,2.09,0,0,0,0-.25,4.5,4.5,0,0,1,1.69,7.43Z",f[c.anyOrg]="M15.293 16L12 12.707V15h-1v-4h4v1h-2.293L16 15.293zm0-16L12 3.293V1h-1v4h4V4h-2.293L16 .707zM8 6a2 2 0 1 1-2 2 2 2 0 0 1 2-2zm0 1a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-7 5h2.293L0 15.293.707 16 4 12.707V15h1v-4H1zm3-8.707L.707 0 0 .707 3.293 4H1v1h4V1H4z",
f)},529:function(w,v){w.exports=G},853:function(w,v,r){function f(q,t){var m=[];return q.capabilities&&-1<q.capabilities.indexOf("updateitemcontrol")&&m.push(p.b.sharedUpdate),q.isOpenData&&m.push(p.b.openData),(q.collaborationInfo&&q.collaborationInfo.collaborationId||q.capabilities&&-1<q.capabilities.indexOf("distributed"))&&m.push(p.b.collaboration),t.homePageFeaturedContent&&t.homePageFeaturedContent==="id:"+q.id&&m.push(p.b.featuredContent),t.featuredItemsGroupQuery&&t.featuredItemsGroupQuery===
"id:"+q.id&&m.push(p.b.gallery),q.membershipAccess||m.push(p.b.anyOrg),"collaboration"===q.membershipAccess&&m.push(p.b.partnered),m}r.r(v);r.d(v,"getBadgeTypes",function(){return f});var c=r(0);w=r(16);var a=r(529),b=r.n(a),p=r(200);r=function(q){function t(){return null!==q&&q.apply(this,arguments)||this}return Object(c.d)(t,q),t.prototype.render=function(m){var n=this.props,k=n.id;n=f(n.group,n.portal);return m("div",{"class":"group-badges"},n.map(function(l){return m(b.a,{badgeType:l,key:l,id:k})}))},
t}(w.Component);v["default"]=r}})})},"arcgis-components/GroupBadge/index":function(){define(["../Component","dojo/i18n!../GroupBadge/nls/resources"],function(K,G){return function(w){function v(f){if(r[f])return r[f].exports;var c=r[f]={i:f,l:!1,exports:{}};return w[f].call(c.exports,c,c.exports,v),c.l=!0,c.exports}var r={};return v.m=w,v.c=r,v.d=function(f,c,a){v.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:a})},v.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(f,"__esModule",{value:!0})},v.t=function(f,c){if((1&c&&(f=v(f)),8&c)||4&c&&"object"==typeof f&&f&&f.__esModule)return f;var a=Object.create(null);if(v.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:f}),2&c&&"string"!=typeof f)for(var b in f)v.d(a,b,function(p){return f[p]}.bind(null,b));return a},v.n=function(f){var c=f&&f.__esModule?function(){return f["default"]}:function(){return f};return v.d(c,"a",c),c},v.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,
c)},v.p="",v(v.s=854)}({0:function(w,v,r){function f(n,k){function l(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");t(n,k);n.prototype=null===k?Object.create(k):(l.prototype=k.prototype,new l)}function c(n,k){var l={},h;for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&0>k.indexOf(h)&&(l[h]=n[h]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(h=Object.getOwnPropertySymbols(n);e<
h.length;e++)0>k.indexOf(h[e])&&Object.prototype.propertyIsEnumerable.call(n,h[e])&&(l[h[e]]=n[h[e]])}return l}function a(n,k,l,h){var e,d=arguments.length,g=3>d?k:null===h?h=Object.getOwnPropertyDescriptor(k,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(n,k,l,h);else for(var u=n.length-1;0<=u;u--)(e=n[u])&&(g=(3>d?e(g):3<d?e(k,l,g):e(k,l))||g);return 3<d&&g&&Object.defineProperty(k,l,g),g}function b(n,k,l,h){return new (l||(l=Promise))(function(e,d){function g(y){try{x(h.next(y))}catch(B){d(B)}}
function u(y){try{x(h["throw"](y))}catch(B){d(B)}}function x(y){var B;y.done?e(y.value):(B=y.value,B instanceof l?B:new l(function(C){C(B)})).then(g,u)}x((h=h.apply(n,k||[])).next())})}function p(n,k){function l(x){return function(y){return function(B){if(h)throw new TypeError("Generator is already executing.");for(;u;)try{if(h=1,e&&(d=2&B[0]?e["return"]:B[0]?e["throw"]||((d=e["return"])&&d.call(e),0):e.next)&&!(d=d.call(e,B[1])).done)return d;switch(e=0,d&&(B=[2&B[0],d.value]),B[0]){case 0:case 1:d=
B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++;e=B[1];B=[0];continue;case 7:B=u.ops.pop();u.trys.pop();continue;default:if(!(d=u.trys,(d=0<d.length&&d[d.length-1])||6!==B[0]&&2!==B[0])){u=0;continue}if(3===B[0]&&(!d||B[1]>d[0]&&B[1]<d[3]))u.label=B[1];else if(6===B[0]&&u.label<d[1])u.label=d[1],d=B;else if(d&&u.label<d[2])u.label=d[2],u.ops.push(B);else{d[2]&&u.ops.pop();u.trys.pop();continue}}B=k.call(n,u)}catch(C){B=[6,C],e=0}finally{h=d=0}if(5&B[0])throw B[1];return{value:B[0]?
B[1]:void 0,done:!0}}([x,y])}}var h,e,d,g,u={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return g={next:l(0),"throw":l(1),"return":l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g}function q(n,k){for(var l=0,h=k.length,e=n.length;l<h;l++,e++)n[e]=k[l];return n}r.d(v,"d",function(){return f});r.d(v,"a",function(){return m});r.d(v,"f",function(){return c});r.d(v,"c",function(){return a});r.d(v,"b",function(){return b});r.d(v,"e",function(){return p});
r.d(v,"g",function(){return q});var t=function(n,k){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(l[e]=h[e])})(n,k)},m=function(){return(m=Object.assign||function(n){for(var k,l=1,h=arguments.length;l<h;l++)for(var e in k=arguments[l])Object.prototype.hasOwnProperty.call(k,e)&&(n[e]=k[e]);return n}).apply(this,arguments)};Object.create;Object.create},16:function(w,v){w.exports=
K},200:function(w,v,r){var f,c;r.d(v,"b",function(){return c});r.d(v,"a",function(){return a});(function(b){b.collaboration="collaboration";b.featuredContent="featuredContent";b.gallery="gallery";b.openData="openData";b.sharedUpdate="sharedUpdate";b.partnered="partnered";b.anyOrg="anyOrg"})(c||(c={}));var a=((f={})[c.collaboration]="M13.886 9.149a5.973 5.973 0 0 0-2.906-6.35 2.997 2.997 0 0 0-5.982.015A5.97 5.97 0 0 0 2.113 9.15a2.991 2.991 0 1 0 3.475 4.34 5.955 5.955 0 0 0 4.824 0 2.99 2.99 0 1 0 3.474-4.34zM8 1a2 2 0 1 1-2 2 2.002 2.002 0 0 1 2-2zM3 14a2 2 0 1 1 2-2 2.002 2.002 0 0 1-2 2zm7-2a2.994 2.994 0 0 0 .067.623 5.027 5.027 0 0 1-2.067.45 5.083 5.083 0 0 1-2.074-.454A2.837 2.837 0 0 0 6 12a3.001 3.001 0 0 0-2.972-2.997A5.052 5.052 0 0 1 5.13 3.824a2.981 2.981 0 0 0 5.74 0 5.052 5.052 0 0 1 2.101 5.179A3.001 3.001 0 0 0 10 12zm3 2a2 2 0 1 1 2-2 2.002 2.002 0 0 1-2 2z",
f[c.featuredContent]="M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z",f[c.gallery]="M11 5.56L9.473 4.088a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L5.498 3.07a.27.27 0 0 0-.382.018L3.1 5.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32V7h9zM10 6H3.752a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78zM7.75 2.5a.75.75 0 1 1 .75.75.75.75 0 0 1-.75-.75zM11 9H2V8h9zm5-6v11H3v-2h1v1h11V4h-1V3zm-3-3H0v11h13zm-1 10H1V1h11z",
f[c.openData]="M13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.936 11.936 0 0 0 5 .984.5.5 0 0 0 0-1A10.147 10.147 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5zM8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.63 8.63 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2c2.861 0 5 1.056 5 2s-2.139 2-5 2z",f[c.sharedUpdate]="M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z",
f[c.partnered]="M13.89,6.11a5.47,5.47,0,0,0-2.56-1.45A5.39,5.39,0,0,0,9.89,2.11,5.5,5.5,0,0,0,2.11,9.89a5.47,5.47,0,0,0,2.56,1.45,5.39,5.39,0,0,0,1.44,2.55,5.5,5.5,0,0,0,7.78-7.78Zm-.71,7.07A4.5,4.5,0,1,1,6.82,6.82l-.71-.71A5.46,5.46,0,0,0,4.5,10a2.09,2.09,0,0,0,0,.25A4.51,4.51,0,1,1,9.18,9.18l.71.71A5.46,5.46,0,0,0,11.5,6a2.09,2.09,0,0,0,0-.25,4.5,4.5,0,0,1,1.69,7.43Z",f[c.anyOrg]="M15.293 16L12 12.707V15h-1v-4h4v1h-2.293L16 15.293zm0-16L12 3.293V1h-1v4h4V4h-2.293L16 .707zM8 6a2 2 0 1 1-2 2 2 2 0 0 1 2-2zm0 1a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-7 5h2.293L0 15.293.707 16 4 12.707V15h1v-4H1zm3-8.707L.707 0 0 .707 3.293 4H1v1h4V1H4z",
f)},341:function(w,v){w.exports=G},854:function(w,v,r){r.r(v);var f=r(0);w=r(16);var c=r(200),a=r(341);r=function(b){function p(){return null!==b&&b.apply(this,arguments)||this}return Object(f.d)(p,b),p.prototype.render=function(q){var t,m=this.props,n=m.badgeType;m=m.id;var k=n===c.b.sharedUpdate?"#ab3c16":"#005e95";return m&&(t=m+"-"+n),q("button",{"class":"group-badge","aria-label":a[n]+": "+a.tooltips[n]},q("svg",{role:"img",style:"\n            width: 16px;\n            height: 16px;\n            vertical-align: -3px;\n          ",
fill:k,key:"group-badge-icon"},n!==c.b.anyOrg&&n!==c.b.collaboration&&q("path",{d:c.a[n]}),n===c.b.anyOrg&&q("g",null,q("path",{d:"M8,6.5A2.5,2.5,0,1,0,10.5,9,2.5,2.5,0,0,0,8,6.5Zm0,4A1.5,1.5,0,1,1,9.5,9,1.5,1.5,0,0,1,8,10.5Z"}),q("polygon",{points:"10.85 2.85 8 5.71 5.15 2.85 5.85 2.15 7.5 3.79 7.5 0.5 8.5 0.5 8.5 3.79 10.15 2.15 10.85 2.85"}),q("polygon",{points:"5.01 10.9 3.97 14.79 3 14.54 3.61 12.28 0.75 13.93 0.25 13.07 3.11 11.42 0.85 10.82 1.11 9.85 5.01 10.9"}),q("polygon",{points:"15.25 13.93 12.39 12.28 13 14.54 12.03 14.79 10.99 10.9 14.89 9.85 15.15 10.82 12.89 11.42 15.75 13.07 15.25 13.93"})),
n===c.b.collaboration&&q("g",null,q("path",{d:"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z"}),q("path",{d:"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z"}),q("path",{d:"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z"}),q("path",{d:"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z"}),q("path",{d:"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z"}),q("path",{d:"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z"}),
q("path",{d:"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z"}),
q("path",{d:"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z"}),q("path",{d:"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z"}))),q("span",{"class":"group-badge__title",key:"group-badge-title"},a[n]),q("span",{"class":"group-badge__description",key:"group-badge-description"},a.tooltips[n]),q("span",{"class":"group-badge__description group-badge__description--small",key:"group-badge-description-small",id:t},a[n],": ",a.tooltips[n]))},p}(w.Component);v["default"]=r}})})},"arcgisonline/pages/components/ImageUploadModal/ImageUploadModal":function(){define("require exports tslib preact preact/hooks ./store-context ./reducer ./UploadStep ./EditStep ./FromMapStep ./shared arcgisonline/pages/utils/alerts dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/org-settings".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){Object.defineProperty(G,"__esModule",{value:!0});a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);K=n["default"].uploadLogo;var k=m["default"].GroupWidget.thumbnailDlg,l={title:K.name,drag:K.dragDrop,size:K.bestSize,browse:K.browse,save:n["default"].common.save,cancel:n["default"].common.cancel,fileError:K.validImageRequired,saveError:K.imageEditError,zoom:K.zoom,chooseDiff:K.chooseDiff,
or:k.or,fromMap:k.createFromMap,fromMapDescription:k.createFromMapSub};n=function(h){function e(){O&&document.documentElement.classList.add("overflow-hidden")}var d=h.texts,g=h.height,u=h.zoomToFull,x=h.onSave,y=h.onCancel,B=h.onDelete,C=h.hideSize,z=h.existingImage,D=h.isRound,E=h.fillBackground,A=h.maxSize,F=h.hasDelete,H=h.allowFromMap,I=h.aspectRatio,L=h.contentClass,J=h.itemId,O=h.fromOverlay,P=h.noEdit;h=w.__assign(w.__assign({},l),d);g=r.useReducer(c.reducer,{previewSrc:"",imageScale:1,imageWidth:0,
imageHeight:0,imageTop:0,imageLeft:0,manuallySettingZoom:!1,isModified:!1,zoomValue:"50",currentStep:"upload",imageFormat:"png",fileName:"",editingExisting:!1,transformOrigin:{x:50,y:50},loadingImage:!1,previewImage:void 0,texts:h,hideSize:C,saving:!1,deleting:!1,saveData:void 0,aspectRatio:I||1,height:g,isRound:D,fillBackground:E,maxSize:A,zoomToFull:u,allowFromMap:H,itemId:J,noEdit:P});var fa=g[0],V=g[1];g=r.useMemo(function(){return{state:fa,dispatch:V}},[fa]);u=r.useRef(null);C=r.useRef(null);
D=h.title;E=h.save;A=h.cancel;var ba=h.fileError;h=h.chooseDiff;r.useEffect(function(){var ha=function(Z){"new_thumb"!==Z.data.dataType||fa.previewSrc===Z.data.dataUrl||fa.saving||(V(c.setImageFromMap(Z.data.dataUrl)),window.parent.removeEventListener("message",ha))};window.parent.addEventListener("message",ha)},[]);r.useEffect(function(){fa.fromMapLoaded&&V(c.initSave())},[fa.fromMapLoaded]);r.useEffect(function(){fa.saveData&&(x(fa.saveData),e())},[fa.saveData]);r.useEffect(function(){fa.saving&&
P&&V(c.updateSaveData({blob:q.dataURIToBlob(fa.previewSrc),base64:fa.previewSrc,format:fa.imageFormat}))},[fa.saving,P]);r.useEffect(function(){z&&V(c.editExistingImage(z))},[z]);H=function(){return"edit"===fa.currentStep};var ka=function(){return"fromMap"===fa.currentStep};I="rtl"===document.documentElement.getAttribute("dir");J=function(){V(c.changeImage())};var la=function(){V(c.initDelete());B()},ma=function(){y();e()};C.current&&(C.current.loading=fa.saving);u.current&&(u.current.loading=fa.deleting);
return v.h(f.StoreContext.Provider,{value:g},v.h("calcite-modal",{width:650,active:!0,role:"dialog","aria-modal":"true","aria-labelledby":"image-upload-modal-title",disableOutsideClose:!0,oncalciteModalClose:ma,intlClose:m["default"].common.close},v.h("h3",{slot:"header",id:"image-upload-modal-title","aria-label":D,"class":"font-size-2 trailer-0"},D),v.h("div",{slot:"content","class":""+(L||"")},v.h("div",{"class":"panel content-node padding-trailer-1 "+(ka()?"":"org-settings__upload-logo-dlg-content")},
"upload"===fa.currentStep&&v.h(a["default"],null),H()&&v.h(b["default"],null),ka()&&v.h(p["default"],null))),(H()||ka())&&!F&&v.h("calcite-button",{slot:"back",appearance:"transparent",color:"blue","icon-start":"chevron-left",width:"full",disabled:fa.saving,onClick:J,"icon-flip-rtl":I?"start":""},h),H()&&fa.editingExisting&&void 0!==B&&v.h("calcite-button",{ref:u,slot:"back",appearance:"outline",width:"full",color:"blue",disabled:fa.saving,onClick:la},d["delete"]),!F&&v.h("calcite-button",{slot:"secondary",
disabled:fa.saving,color:"blue",appearance:"outline",width:"full",onClick:ma},A),F&&H()&&v.h("calcite-button",{slot:"secondary",disabled:fa.saving||fa.deleting,color:"blue",appearance:"outline",width:"full",onClick:J},d.changePhoto),v.h("calcite-button",{ref:C,slot:"primary",color:"blue",appearance:"solid",width:"full",onClick:function(){ka()?window.postMessage("thumbnail_create","*"):!P&&"edit"!==fa.currentStep||!fa.previewSrc?t["default"].showAlert("error",ba):V(c.initSave())},disabled:fa.deleting},
E)))};n.defaultProps={height:412>window.innerWidth?200:300,texts:l,aspectRatio:1};G["default"]=n})},"arcgisonline/pages/components/ImageUploadModal/store-context":function(){define(["require","exports","preact","preact/hooks"],function(K,G,w,v){Object.defineProperty(G,"__esModule",{value:!0});G.useStoreContext=G.StoreContext=void 0;G.StoreContext=w.createContext({});G.useStoreContext=function(){return v.useContext(G.StoreContext)}})},"arcgisonline/pages/components/ImageUploadModal/reducer":function(){define(["require",
"exports","tslib"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G.reducer=G.setImageFromMap=G.showFromMapStep=G.editExistingImage=G.updatePreviewImage=G.imageLoaded=G.updateZoomScale=G.updateManuallySettingZoom=G.updateImagePosition=G.updateSrcAndFileName=G.updatePreviewSrc=G.updateSaveData=G.initDelete=G.initSave=G.changeImage=G.SET_IMAGE_FROM_MAP=G.SHOW_FROM_MAP_STEP=G.IMAGE_LOADED=G.EDIT_EXISTING_IMAGE=G.UPDATE_PREVIEW_IMAGE=G.UPDATE_SRC_AND_FILE_NAME=G.UPDATE_ZOOM_SCALE=G.UPDATE_MANUALLY_SETTING_ZOOM=
G.UPDATE_IMAGE_POSITION=G.UPDATE_PREVIEW_SRC=G.UPDATE_SAVE_DATA=G.INIT_DELETE=G.INIT_SAVE=G.CHANGE_IMAGE=void 0;G.CHANGE_IMAGE="CHANGE_IMAGE";G.INIT_SAVE="INIT_SAVE";G.INIT_DELETE="INIT_DELETE";G.UPDATE_SAVE_DATA="UPDATE_SAVE_DATA";G.UPDATE_PREVIEW_SRC="UPDATE_PREVIEW_SRC";G.UPDATE_IMAGE_POSITION="UPDATE_IMAGE_POSITION";G.UPDATE_MANUALLY_SETTING_ZOOM="UPDATE_MANUALLY_SETTING_ZOOM";G.UPDATE_ZOOM_SCALE="UPDATE_ZOOM_SCALE";G.UPDATE_SRC_AND_FILE_NAME="UPDATE_SRC_AND_FILE_NAME";G.UPDATE_PREVIEW_IMAGE=
"UPDATE_PREVIEW_IMAGE";G.EDIT_EXISTING_IMAGE="EDIT_EXISTING_IMAGE";G.IMAGE_LOADED="IMAGE_LOADED";G.SHOW_FROM_MAP_STEP="SHOW_FROM_MAP_STEP";G.SET_IMAGE_FROM_MAP="SET_IMAGE_FROM_MAP";G.changeImage=function(){return{type:G.CHANGE_IMAGE}};G.initSave=function(){return{type:G.INIT_SAVE}};G.initDelete=function(){return{type:G.INIT_DELETE}};G.updateSaveData=function(v){return{type:G.UPDATE_SAVE_DATA,payload:v}};G.updatePreviewSrc=function(v){return{type:G.UPDATE_PREVIEW_SRC,payload:v}};G.updateSrcAndFileName=
function(v){return{type:G.UPDATE_SRC_AND_FILE_NAME,payload:v}};G.updateImagePosition=function(v){return{type:G.UPDATE_IMAGE_POSITION,payload:v}};G.updateManuallySettingZoom=function(v){return{type:G.UPDATE_MANUALLY_SETTING_ZOOM,payload:v}};G.updateZoomScale=function(v){return{type:G.UPDATE_ZOOM_SCALE,payload:v}};G.imageLoaded=function(v){return{type:G.IMAGE_LOADED,payload:v}};G.updatePreviewImage=function(v){return{type:G.UPDATE_PREVIEW_IMAGE,payload:v}};G.editExistingImage=function(v){return{type:G.EDIT_EXISTING_IMAGE,
payload:v}};G.showFromMapStep=function(){return{type:G.SHOW_FROM_MAP_STEP}};G.setImageFromMap=function(v){return{type:G.SET_IMAGE_FROM_MAP,payload:v}};G.reducer=function(v,r){var f=r.payload;switch(r.type){case G.CHANGE_IMAGE:return w.__assign(w.__assign({},v),{currentStep:"upload",editingExisting:!1,previewSrc:""});case G.INIT_SAVE:return w.__assign(w.__assign({},v),{saving:!0});case G.INIT_DELETE:return w.__assign(w.__assign({},v),{deleting:!0});case G.UPDATE_SAVE_DATA:return w.__assign(w.__assign({},
v),{saveData:w.__assign(w.__assign({},f),{fileName:v.fileName,isModified:v.isModified})});case G.UPDATE_PREVIEW_SRC:return w.__assign(w.__assign({},v),{previewSrc:f,imageScale:1,currentStep:"edit"});case G.UPDATE_SRC_AND_FILE_NAME:return w.__assign(w.__assign({},v),{previewSrc:f.previewSrc,fileName:f.fileName,imageScale:1,currentStep:v.noEdit?"upload":"edit"});case G.UPDATE_PREVIEW_IMAGE:return w.__assign(w.__assign({},v),{previewImage:f});case G.UPDATE_IMAGE_POSITION:var c=w.__assign({},v);void 0!==
f.imageTop&&(c.imageTop=f.imageTop);void 0!==f.imageLeft&&(c.imageLeft=f.imageLeft);return w.__assign(w.__assign({},c),{isModified:!0});case G.UPDATE_MANUALLY_SETTING_ZOOM:return w.__assign(w.__assign({},v),{manuallySettingZoom:f});case G.EDIT_EXISTING_IMAGE:return w.__assign(w.__assign({},v),{editingExisting:!0,previewSrc:f,currentStep:"edit",loadingImage:!0});case G.UPDATE_ZOOM_SCALE:return w.__assign(w.__assign({},v),{imageScale:f.imageScale,zoomValue:f.zoomValue,isModified:!0});case G.IMAGE_LOADED:c=
v.height;var a=v.zoomToFull,b=v.aspectRatio,p={};if(v.editingExisting)a=f.width,p={imageWidth:a,imageHeight:a,imageScale:c/a,imageTop:0,imageLeft:0,transformOrigin:{x:0,y:0},loadingImage:!1,previewImage:f};else{var q=1===b?c:c*b,t=f.clientWidth,m=f.clientHeight;p="fromMap"===v.currentStep;p={imageWidth:t,imageHeight:m,imageTop:c/2-m/2,imageLeft:c*b/2-t/2,currentStep:p?"fromMap":"edit",transformOrigin:{x:50,y:50},previewImage:f,fromMapLoaded:p};a&&(f=q/(t>m?t:m),p=w.__assign(w.__assign({},p),{imageScale:f,
manuallySettingZoom:!0,zoomValue:""+(50+Math.log(f)/Math.log(1.1)),isModified:!0}))}f=w.__assign(w.__assign({},v),p);return f;case G.SHOW_FROM_MAP_STEP:return w.__assign(w.__assign({},v),{currentStep:"fromMap"});case G.SET_IMAGE_FROM_MAP:return w.__assign(w.__assign({},v),{previewSrc:f,imageScale:1});default:return w.__assign({},v)}}})},"arcgisonline/pages/components/ImageUploadModal/UploadStep":function(){define("require exports tslib preact preact/hooks ./store-context ./reducer arcgisonline/pages/utils/alerts".split(" "),
function(K,G,w,v,r,f,c,a){var b=this;Object.defineProperty(G,"__esModule",{value:!0});a=w.__importDefault(a);G["default"]=function(){var p=f.useStoreContext(),q=p.state,t=p.dispatch,m=q.texts;p=q.hideSize;var n=q.allowFromMap,k=r.useRef(null),l=r.useRef(null);r.useEffect(function(){k.current&&k.current.focus()},[k.current]);var h=function(g){g.preventDefault()},e=function(g){var u=l.current;if(u.value||g){var x=g||u.files[0];x&&((null===x||void 0===x?0:x.name)&&/\.(gif|jpg|jpeg|png)$/i.test(x.name)?
(g=new FileReader,g.onload=function(y){return w.__awaiter(b,void 0,void 0,function(){return w.__generator(this,function(B){t(c.updateSrcAndFileName({previewSrc:y.target.result,fileName:x.name||(null===u||void 0===u?void 0:u.value)||""}));return[2]})})},g.readAsDataURL(x)):a["default"].showAlert("error",m.fileError))}},d=function(){t(c.showFromMapStep())};return v.h("div",{"class":"text-center",onDragOver:h,onDragEnter:h,onDrop:function(g){g.preventDefault();e(g.dataTransfer.files[0])},"aria-label":m.drag},
v.h("div",{"class":"icon-large trailer-half leader-quarter text-dark-gray"},v.h("calcite-icon",{icon:"upload"})),v.h("div",{"class":"trailer-0"},v.h("div",{"class":"font-size-1","aria-label":m.drag},m.drag),!p&&v.h("div",{"aria-label":m.size},m.size)),v.h("button",{ref:k,"class":"btn-link btn-link-dark-blue leader-1",onClick:function(){l.current.click()},onKeyDown:function(g){13===g.keyCode&&(g.preventDefault(),l.current.click())},"aria-label":m.browse},v.h("div",{"class":"flex flex-align-center"},
(!q.noEdit||!q.fileName)&&v.h(v.Fragment,null,v.h("calcite-icon",{icon:"image","class":"margin-right-half"})," ",m.browse),q.noEdit&&q.fileName&&v.h(v.Fragment,null,q.fileName," ",v.h("calcite-icon",{icon:"check","class":"margin-left-half image-upload-modal__check-icon"})))),v.h("input",{ref:l,"class":"hide",type:"file",accept:".jpg,.gif,.png,image/jpg,image/gif,image/png",onChange:function(){e()}}),n&&v.h("div",{tabIndex:0,onClick:d},v.h("p",{"class":"text-center leader-1 trailer-half"},v.h("b",
{"class":"horizontal-lines"},v.h("span",null,m.or))),v.h("div",{"class":"text-center panel thumbnail-from-map-container","data-dojo-attach-point":"_createFromMap",id:"createFromMap"},v.h("p",{"class":"trailer-0"},v.h("span",{"class":"flex-center font-size-1"},v.h("div",{"class":"flex flex-align-center"},v.h("calcite-icon",{scale:"m",icon:"map","class":"margin-right-half"})," ",m.fromMap)),v.h("span",{"class":"display-block font-size--2"},m.fromMapDescription)))))}})},"arcgisonline/pages/components/ImageUploadModal/EditStep":function(){define("require exports tslib preact preact/hooks ./TranslucentContainer ./ImageCanvas ./store-context ./reducer arcgisonline/pages/utils/alerts".split(" "),
function(K,G,w,v,r,f,c,a,b,p){Object.defineProperty(G,"__esModule",{value:!0});f=w.__importDefault(f);c=w.__importDefault(c);p=w.__importDefault(p);G["default"]=function(){var q=a.useStoreContext(),t=q.state,m=q.dispatch,n=t.texts,k=r.useRef(null),l=r.useRef(null),h=t.height*t.aspectRatio;q=t.height+60+"px";var e={width:h+60+"px",height:q};h={width:h+"px",height:t.height+"px"};var d={transform:"scale("+t.imageScale+")",top:t.imageTop+"px",left:t.imageLeft+"px",transformOrigin:t.transformOrigin.x+
"% "+t.transformOrigin.y+"%"};r.useEffect(function(){k.current&&k.current.focus()},[k.current]);r.useEffect(function(){l.current&&m(b.updatePreviewImage(l.current))},[l.current]);var g=function(){m(b.imageLoaded(l.current))},u=function(){p["default"].showAlert("error",n.fileError);m(b.changeImage())},x=function(y){t.manuallySettingZoom?m(b.updateManuallySettingZoom(!1)):m(b.updateZoomScale({imageScale:Math.pow(1.1,y.target.value-50),zoomValue:y.target.value}))};return v.h("div",{"class":"edit-thumb-display",
onWheel:function(y){y.preventDefault();y=0<y.deltaY?1*t.imageScale/1.1:1.1*t.imageScale;m(b.updateZoomScale({imageScale:y,zoomValue:""+(50+Math.log(y)/Math.log(1.1))}))}},v.h(c["default"],{imageContainer:k.current}),v.h("div",{"class":"crop-thumb-container overflow-hidden",style:{height:q}},v.h(f["default"],{onDrag:function(y){m(b.updateImagePosition({imageTop:t.imageTop+y.top,imageLeft:t.imageLeft+y.left}))},style:e},v.h("div",{ref:k,"class":"crop-thumb-clear",tabIndex:0,style:h,onKeyDown:function(y){var B=
!1;switch(y.key){case "ArrowUp":m(b.updateImagePosition({imageTop:t.imageTop-1}));B=!0;break;case "ArrowDown":m(b.updateImagePosition({imageTop:t.imageTop+1}));B=!0;break;case "ArrowLeft":m(b.updateImagePosition({imageLeft:t.imageLeft-1}));B=!0;break;case "ArrowRight":m(b.updateImagePosition({imageLeft:t.imageLeft+1})),B=!0}B&&y.preventDefault()}},t.previewSrc&&v.h("img",{ref:l,src:t.previewSrc,alt:"","class":"preview-image "+(t.loadingImage?"visibility-hidden":""),style:d,onLoad:g,onError:u})))),
"edit"===t.currentStep&&v.h("label",{htmlFor:"","class":"trailer-half leader-half"},n.zoom,v.h("input",{type:"range",value:t.zoomValue,onInput:x,onChange:x,"aria-label":n.zoom}),v.h("span",{"class":"clearfix"},v.h("span",{"class":"left inline-block leader-half"},v.h("calcite-icon",{icon:"image",scale:"s"})),v.h("span",{"class":"right"},v.h("calcite-icon",{icon:"image",scale:"l"})))))}})},"arcgisonline/pages/components/ImageUploadModal/TranslucentContainer":function(){define(["require","exports","preact",
"preact/hooks"],function(K,G,w,v){Object.defineProperty(G,"__esModule",{value:!0});G["default"]=function(r){var f=r.style,c=r.onDrag;r=r.children;var a=v.useState(!1),b=a[0],p=a[1];a=v.useState(void 0);var q=a[0],t=a[1];a=function(){p(!0)};var m=function(k){var l=k.touches,h=k.clientX,e=k.clientY;if(void 0===h||void 0===e){if(null===l||void 0===l||!l.length)return;h=l[0].clientX;e=l[0].clientY}b&&(q?(l=q.top,k=q.left,e-=l,h-=k,c({top:e,left:h}),t({top:l+e,left:k+h})):t({top:e,left:h}))},n=function(){p(!1);
t(void 0)};return w.h("div",{"class":"crop-thumb-translucent overflow-hidden",style:f,onMouseDown:a,onTouchStart:a,onMouseMove:m,onTouchMove:m,onMouseUp:n,onTouchEnd:n,onMouseOut:n},r)}})},"arcgisonline/pages/components/ImageUploadModal/ImageCanvas":function(){define("require exports tslib preact preact/hooks ./store-context ./reducer ./shared arcgisonline/pages/utils/alerts".split(" "),function(K,G,w,v,r,f,c,a,b){var p=this;Object.defineProperty(G,"__esModule",{value:!0});b=w.__importDefault(b);
G["default"]=function(q){var t=q.imageContainer;q=f.useStoreContext();var m=q.state,n=q.dispatch,k=m.texts,l=r.useRef(null),h=function(g){var u=g.image,x=g.context,y=g.selectionX,B=g.selectionY,C=g.selectionWidth,z=g.selectionHeight,D=g.canvasWidth,E=g.canvasHeight,A=g.minWidth,F=g.minHeight,H=g.drawDimensions,I=g.scaleFactor;g=l.current;g.width=D<A?A:D*I;g.height=E<F?F:E*I;m.maxSize&&(g.width>m.maxSize&&(g.width=m.maxSize),g.height>m.maxSize&&(g.height=m.maxSize));D=H.left*g.width;E=H.top*g.height;
A=H.width*g.width;H=H.height*g.height;!m.isRound&&m.fillBackground&&(x.fillStyle="#efefef",x.fillRect(0,0,g.width,g.height));x.drawImage(u,y,B,C,z,D,E,A,H);m.isRound&&(x.globalCompositeOperation="destination-in",x.beginPath(),x.arc(g.width/2,g.height/2,g.height/2,0,2*Math.PI),x.closePath(),x.fill());u=g.toDataURL("image/png");x=a.dataURIToBlob(u);return{base64:u,blob:x}},e=function(){return new Promise(function(g,u){var x=new Image;-1<m.previewSrc.indexOf("arcgis.com")&&(x.crossOrigin="Anonymous");
x.onload=function(){if(.01>Math.abs(m.aspectRatio-x.width/x.height)&&!m.isModified)g({blob:a.dataURIToBlob(m.previewSrc),base64:m.previewSrc,format:m.imageFormat});else{var y=m.height*m.aspectRatio,B=m.height;var C=m.previewImage.getBoundingClientRect();var z=t.getBoundingClientRect();var D=(z.left-C.left)/C.width;var E=(z.right-C.left)/C.width;var A=(z.top-C.top)/C.height;C=(z.bottom-C.top)/C.height;z=0>D?0:D;var F=0>A?0:A,H=1<E?1:E,I=1<C?1:C,L=m.previewImage.getBoundingClientRect();var J=t.getBoundingClientRect();
J={left:(0<L.left-J.left?L.left-J.left:0)/J.width,top:(0<L.top-J.top?L.top-J.top:0)/J.height,width:((L.right>J.right?J.right:L.right)-(L.left<J.left?J.left:L.left))/J.width,height:((L.bottom>J.bottom?J.bottom:L.bottom)-(L.top<J.top?J.top:L.top))/J.height};L=l.current.getContext("2d");D={image:x,context:L,selectionX:z*m.imageWidth,selectionY:F*m.imageHeight,selectionWidth:H*m.imageWidth-z*m.imageWidth,selectionHeight:I*m.imageHeight-F*m.imageHeight,canvasWidth:E*m.imageWidth-D*m.imageWidth,canvasHeight:C*
m.imageHeight-A*m.imageHeight,minWidth:y,minHeight:B,drawDimensions:J,scaleFactor:1};try{var O=h(w.__assign({},D));if(1E7<O.blob.size||0===O.blob.size)L.clearRect(0,0,l.current.width,l.current.height),O=h(w.__assign(w.__assign({},D),{scaleFactor:1600/x.width}))}catch(P){"NS_ERROR_FAILURE"!==P.name?b["default"].showAlert("error",k.saveError):(L.clearRect(0,0,l.current.width,l.current.height),O=h(w.__assign(w.__assign({},D),{scaleFactor:1600/x.width})))}g({blob:null===O||void 0===O?void 0:O.blob,base64:null===
O||void 0===O?void 0:O.base64,format:m.imageFormat})}};x.onerror=function(){b["default"].showAlert("error",k.fileError)};x.src=m.previewSrc})},d=function(){return w.__awaiter(p,void 0,void 0,function(){var g;return w.__generator(this,function(u){switch(u.label){case 0:return[4,e()];case 1:return g=u.sent(),n(c.updateSaveData(w.__assign({},g))),[2]}})})};r.useEffect(function(){m.saving&&d()},[m.saving]);return v.h("canvas",{ref:l,"class":"upload-image-canvas"})}})},"arcgisonline/pages/components/ImageUploadModal/shared":function(){define(["require",
"exports"],function(K,G){Object.defineProperty(G,"__esModule",{value:!0});G.dataURIToBlob=void 0;G.dataURIToBlob=function(w){var v=atob(w.split(",")[1]);w=w.split(",")[0].split(":")[1].split(";")[0];for(var r=new ArrayBuffer(v.length),f=new Uint8Array(r),c=0;c<v.length;c++)f[c]=v.charCodeAt(c);return new Blob([r],{type:w})}})},"arcgisonline/pages/components/ImageUploadModal/FromMapStep":function(){define("require exports tslib preact ./store-context ./EditStep arcgisonline/esriGeowConfig arcgisonline/sharing/util".split(" "),
function(K,G,w,v,r,f,c,a){Object.defineProperty(G,"__esModule",{value:!0});f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);G["default"]=function(){var b=r.useStoreContext().state;b=(c["default"].isDebug?"webviewer/dist/":"/apps/mapviewer/")+"thumbnailer.html?webmap\x3d"+b.itemId;if(a["default"].isPortal()){var p=c["default"].self.portalHostname.replace(/^[^\/]*/,"");b=b.replace("/apps/",p+"/apps/");b+="\x26extentService\x3d"+encodeURI(c["default"].extentService)}return v.h("div",
{"class":"text-center position: relative;",style:"max-height: 60vh"},v.h("iframe",{"data-dojo-attach-point":"_mapIframe",style:"border:none; overflow:hidden",src:b,width:"600",height:"399"}),v.h("div",{style:"visibility: hidden; position: absolute; top: 0;"},v.h(f["default"],null)))}})},"arcgisonline/pages/components/UpdateViewModal":function(){define("require exports tslib dojo/i18n!../../nls/arcgisonline preact preact/hooks preact/compat arcgisonline/esriGeowConfig".split(" "),function(K,G,w,v,
r,f,c,a){Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);a=w.__importDefault(a);G["default"]=function(b){var p=b.title,q=b.active,t=b.itemId,m=b.hasDerivative,n=b.onClose,k=function(l){if(null!==l&&void 0!==l&&l.data){var h=JSON.parse(l.data);l=h.type;h=h.value;"create"===l&&(null===h||void 0===h?0:h.id)?(window.location.href="item.html?id\x3d"+(null===h||void 0===h?void 0:h.id),n()):"update"!==l&&"close"!==l||!h||n()}};f.useEffect(function(){window.addEventListener("message",
k);return function(){window.removeEventListener("message",k)}},[]);b=""+a["default"].createViewUrl+t+(m?"\x26hasDerivative\x3dtrue":"");return r.h(r.Fragment,null,c.createPortal(r.h("calcite-modal",{role:"dialog","aria-modal":"true","aria-lablledby":"update-view-modal-title",active:q,oncalciteModalClose:n,intlClose:v["default"].common.close,fullscreen:!0,noPadding:!0},r.h("h3",{slot:"header","class":"font-size-2 trailer-0",id:"update-view-modal-title"},p),r.h("div",{slot:"content","class":"flex manage-areas"},
q&&r.h("iframe",{"class":"flex-1 manage-areas__iframe",src:b}))),document.body))}})},"arcgisonline/pages/dijit/_CheckReadonlyMixin":function(){define("require exports tslib dojo/i18n!../../nls/arcgisonline ../pageUtil arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(K,G,w,v,r,f){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);return function(){function c(){}c.prototype.checkReadonly=function(a){a||(a=this.portal);return(null===a||void 0===a?0:a.isPortal)&&a.isReadOnly?
(r["default"].createSpecifiedDialog(f["default"]).show({title:v["default"].common.errorTitle,message:v["default"].common.errors.portalInReadOnlyModeMsg}),!0):!1};c.prototype.memberActionGuard=function(a,b){return-1<["manageItems","viewGroups","viewProfile"].indexOf(a)?!1:this.checkReadonly(b)};return c}()})},"arcgisonline/pages/item/widgets/typeOptions/base":function(){define("require exports tslib ../../../pageUtil ../../../dijit/_CheckReadonlyMixin ./_mixin ../../../utils/dom ../../../utils/strings ../../_Actions ../../../../sharing/dijit/ExtentPicker ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/_base/lang dojo/on dojo/string dojo/topic dojo/Deferred dojo/query dojo/i18n!../../../../nls/arcgisonline dojo/text!./base.html dojo/text!../../../dijit/Card/badges/authoritative.html dojo/text!../../../dijit/Card/badges/deprecated.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);return function(){function y(B,
C){this.templateString=g["default"];this.authoritative=k["default"].substitute(u["default"],{i18n:d["default"],hideText:"",tooltipClass:"",tooltipLabel:d["default"].badges.authoritativeTooltip});this.deprecated=k["default"].substitute(x["default"],{i18n:d["default"],hideText:"",tooltipClass:"",tooltipLabel:d["default"].badges.deprecatedTooltip});this.numberPattern="#.#";this._typeKeywords=this.item.typeKeywords;this._serviceInfo=this.item.serviceInfo}y.prototype._initHandlers=function(){var B=this,
C={linkStart:'\x3cbutton class\x3d"btn-link btn-link--inherit" data-type\x3d"features"\x3e',linkEnd:"\x3c/button\x3e"};-1<this.item.typeKeywords.indexOf("View Service")&&this.item.sourceData&&(C.linkStart="",C.linkEnd="");this._publicDataCollectionExplanation.innerHTML=k["default"].substitute(d["default"].itemProperties.publicDataCollection.settingExplanation,C);!this.item.isHostedService||"Feature Service"!==this.item.type||this.item.isVelocity()||this.item.isLocationTrackingService||this.item.isLocationTrackingView||
c["default"].showNode(this._publicDataSection);this.own(n["default"](this._deleteProtection,"change",m["default"].hitch(this,"_deleteProtectionChange")),n["default"](this._publicDataCollection,"change",this._publicDataCollectionChange.bind(this)),l["default"].subscribe("extent/update",this._extentUpdated.bind(this)),e["default"]("button",this._publicDataCollectionExplanation).on("click",function(z){b["default"].publishTiles({item:B.item,page:B.page,user:B.portalUser,evt:z})}),l["default"].subscribe("settings/update/serviceInfo",
function(z){B._serviceInfo=z;B.reset()}),n["default"](this._setExtentBtn,"click",function(){B.checkReadonly(B.item.portal)||(B._extentPicker=new p["default"]({callback:B._readExtentPicker.bind(B),initExtent:B.item.extent,closeOnSave:!0,closeOnCancel:!0,telemetry:B.page.telemetry}))}));this._initDeleteProtectionHandler()};y.prototype.retrievePropertyValues=function(){return{"protected":c["default"].isChecked(this._deleteProtection),extent:this._getExtent(),typeKeywords:this._typeKeywords}};y.prototype.hasChanges=
function(){var B=this.retrievePropertyValues();this._protectionChanged=this.item["protected"]!==B["protected"]&&!this._deleteProtectionDisabled;this._publicDataCollectionChanged=this.item.typeKeywords.length!==this._typeKeywords.length;return this._protectionChanged||this._publicDataCollectionChanged};y.prototype.save=function(){var B=this,C=new h["default"],z=this.retrievePropertyValues(),D={},E={},A=null;this._protectionChanged&&(!0===z["protected"]?A=v["default"].protectItem(this.item):!1===z["protected"]&&
(A=v["default"].unprotectItem(this.item)));A?A.then(function(F){F.code&&F.messageCode?C.reject(F):(B._protectionChanged&&(D["protected"]=z["protected"],B._publishProtectionChange(z["protected"])),B._extentChanged&&(E.extent=z.extent),B._publicDataCollectionChanged&&(E.typeKeywords=z.typeKeywords),C.resolve({changed:D,toChange:E}))}):(this._extentChanged&&(E.extent=z.extent),this._publicDataCollectionChanged&&(E.typeKeywords=z.typeKeywords),C.resolve({changed:D,toChange:E}));return C};y.prototype.reset=
function(){var B,C,z=new h["default"];c["default"].showHide(this._contentStatusContainer,this.canShowContentStatus(this.item.type));c["default"].showHide(this.extentContainer,this.canShowExtent(this.item.type));c["default"].checkNode(this._deleteProtection,!!this.item["protected"]);this._applyDeleteButtonPrivileges();this._typeKeywords=this.item.typeKeywords;var D=this._isPublicDataCollectionEnabled(this.item.typeKeywords);c["default"].checkNode(this._publicDataCollection,D);D="public"===this.item.access&&
-1<(null===(C=null===(B=this._serviceInfo)||void 0===B?void 0:B.capabilities)||void 0===C?void 0:C.indexOf("Editing"))&&D;c["default"].disableNode(this._publicDataCollection,D);c["default"].addRemoveClass(this._publicDataCollectionLabel,"text-light",D);this.item.extent&&0<this.item.extent.length?(this._setExtent(this.item.extent),this._setExtentView(!0)):(this._setExtent(null),this._setExtentView(!1));delete this.item.unsavedExtent;z.resolve();return z};y.prototype.canShowContentStatus=function(B){return"API Key"!==
B};y.prototype.canShowExtent=function(B){return"API Key"!==B&&!(-1<this.item.typeKeywords.indexOf("Big Data Catalog Service")||-1<this.item.typeKeywords.indexOf("bigDataFileShare"))};y.prototype._isPublicDataCollectionEnabled=function(B){void 0===B&&(B=[]);return-1<this.item.typeKeywords.indexOf("Public Data Collection")};y.prototype._readExtentPicker=function(B){var C;null===(C=this._extentPicker)||void 0===C?void 0:C.destroy();this._extentUpdated([[B[0],B[2]],[B[1],B[3]]])};y.prototype._initDeleteProtectionHandler=
function(){var B=this.item.isLocationTrackingService&&!this.item.isLocationTrackingView;if(this.item.canUpdate&&!this.item.isAdmin&&!this.item.isOwner&&!this.item.isOwnedByMyOrg||B)this._deleteProtectionDisabled=!0,c["default"].disableNode(this._deleteProtection,!0),this._deleteProtectionLabel.classList.add("optimizing");this.own(l["default"].subscribe("item/protect",m["default"].hitch(this,"_itemProtected")),l["default"].subscribe("item/unprotect",m["default"].hitch(this,"_itemUnprotected")))};y.prototype._itemProtected=
function(){c["default"].disableNode(this._deleteBtn,!0);c["default"].checkNode(this._deleteProtection,!0)};y.prototype._itemUnprotected=function(){this.item.canDelete&&(c["default"].disableNode(this._deleteBtn,!1),c["default"].checkNode(this._deleteProtection,!1))};y.prototype._applyDeleteButtonPrivileges=function(){var B=this.item["protected"],C=this.item.isLocationTrackingService&&!this.item.isLocationTrackingView;c["default"].disableNode(this._deleteBtn,!this.item.canDelete||B||C)};y.prototype._handlePropertyChange=
function(){var B=this.retrievePropertyValues(),C=this.hasChanges();this._setExtentView(B.extent&&0<B.extent.length);this.emitChanged(B,C)};y.prototype._setExtent=function(B){B&&0<B.length?(B=a["default"].stringToArray(B,",",!1),this._minx=B[0],this._miny=B[1],this._maxx=B[2],this._maxy=B[3]):this._maxy=this._maxx=this._miny=this._minx=null};y.prototype._isValidExtent=function(B){B=B.split(",").map(function(C){return parseFloat(C)});return-90<=B[3]&&90>=B[3]&&-180<=B[2]&&180>=B[2]&&-180<=B[0]&&180>=
B[0]&&-90<=B[1]&&90>=B[1]&&B[2]>B[0]&&B[3]>B[1]};y.prototype._getExtent=function(){return this._buildExtentString(this._minx,this._miny,this._maxx,this._maxy)};y.prototype._buildExtentString=function(B,C,z,D){if(a["default"].isSet(B)&&a["default"].isSet(C)&&a["default"].isSet(z)&&a["default"].isSet(D))try{return[[parseFloat(B),parseFloat(C)].join(),[parseFloat(z),parseFloat(D)].join()].join()}catch(E){return""}else return""};y.prototype._extentUpdated=function(B){B=[B[0].join(","),B[1].join(",")].join();
this._isValidExtent(B)?(this._setExtent(B),l["default"].publish("settings/updateExtent",B),delete this.item.unsavedExtent,this._handlePropertyChange()):(delete this.item.unsavedExtent,this.alertError(this.i18n.extentDlg.error.errorRange))};y.prototype._setExtentView=function(B){B?document.getElementById("setExtent").innerHTML=this.i18n.itemProperties.editExtent:document.getElementById("setExtent").innerHTML=this.i18n.itemProperties.setExtent};y.prototype._publishProtectionChange=function(B){l["default"].publish(B?
"item/protect":"item/unprotect",{"protected":B})};y.prototype._deleteProtectionChange=function(){var B=!1===this.item["protected"],C=c["default"].isChecked(this._deleteProtection);B&&(C?this._itemProtected():this._itemUnprotected());this._handlePropertyChange()};y.prototype._publicDataCollectionChange=function(){var B=c["default"].isChecked(this._publicDataCollection);this._typeKeywords=this._typeKeywords.filter(function(C){return"Public Data Collection"!==C});B&&this._typeKeywords.push("Public Data Collection");
this._handlePropertyChange()};return y=w.__decorate([q["default"](f["default"],t["default"],r["default"])],y)}()})},"arcgisonline/pages/item/widgets/typeOptions/_mixin":function(){define("require exports tslib ../../../../tsutils/declareDecorator dijit/_WidgetBase dojo/Deferred esri/Evented".split(" "),function(K,G,w,v,r,f,c){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);return function(){function a(b,p){this.page=b.page||null;this.item=b.item||null;this.i18n=
b.i18n||null;this.portalUser=b.portalUser||null;this.alertError=b.alertError||null;this.ignoreChanges=this.isHidden=!1}a.prototype.startup=function(){this.inherited(arguments);return this._initUI()};a.prototype._initUI=function(){this._initHandlers();return this.reset()};a.prototype._initHandlers=function(){};a.prototype._handlePropertyChange=function(){var b=this.retrievePropertyValues(),p=this.hasChanges();this.emitChanged(b,p)};a.prototype.emitChanged=function(b,p){this.emit("type-options-change",
{properties:b,hasChanges:p})};a.prototype.emitHideEmptyOptions=function(){this.emit("section/hide-empty-options")};a.prototype._emitHideLastHR=function(){this.emit("section/hide-last-hr")};a.prototype._emitSectionForceSave=function(){this.emit("section/force-save")};a.prototype._emitSectionForceCancel=function(){this.emit("section/force-cancel")};a.prototype.retrievePropertyValues=function(){return{}};a.prototype.hasChanges=function(){return!1};a.prototype.validate=function(){var b=new f["default"];
b.resolve({validates:!0});return b};a.prototype.save=function(){var b=new f["default"];b.resolve({changed:{},toChange:{}});return b};a.prototype.reset=function(){var b=new f["default"];b.resolve();return b};a.prototype.performActions=function(){var b=new f["default"];b.resolve();return b};return a=w.__decorate([v["default"](r["default"],c["default"])],a)}()})},"arcgisonline/sharing/dijit/ExtentPicker":function(){define("require exports tslib arcgisonline/esriGeowConfig arcgisonline/sharing/util ../dijit/ExtentPickerOverlay dijit/_AttachMixin dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/text!./templates/ExtentPicker.html ../../tsutils/declareDecorator ../../pages/utils/queryHandler".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importStar(n);return function(){function k(l){this.telemetryEvents={coordinates:0,draw:0,search:0,orgreg:0,orgext:0,currfeat:0,currsaved:0,resize:0};this.title="";this.templateString=t["default"];this.declaredClass="arcgisonline.pages.dijit.ExtentPicker";
this.widgetsInTemplate=!0;this.i18n=q["default"];this.args=l;"callback"in this.args&&(this.callback=this.args.callback);var h=n.queryToObject(window.location.search.slice(1));this.qs="";h.id&&(this.qs+="webmap\x3d"+h.id+"\x26");"initExtent"in this.args&&(this.initExtent=this.args.initExtent,this.qs+="extent\x3d"+JSON.stringify(this.initExtent).replace(/[" \[\]]+/g,""));this.title=this.args.title||"Set Extent";this.ifurl=(v["default"].isDebug?"/webviewer/dist/extentpicker.html?":"/apps/mapviewer/extentpicker.html?")+
this.qs;r["default"].isPortal()&&(h=v["default"].self.portalHostname.replace(/^[^\/]*/,""),this.ifurl=this.ifurl.replace("/apps/",h+"/apps/"),this.ifurl+="\x26extentService\x3d"+encodeURI(v["default"].extentService));h=this._onOverlayClose.bind(this);this.xpOverlay=new f["default"]({ifurl:this.ifurl,onClose:h,opener:l.opener},p["default"].place(p["default"].create("div"),document.body,"last"));this.xpOverlay.startup();this.xpOverlay.open();this._handleExtent=this._handleExtent.bind(this)}k.prototype.postCreate=
function(){var l;this.inherited(arguments);this._doAttachEvents();null===(l=this.telemetry)||void 0===l?void 0:l.logEvent({category:"set extent",action:"click"})};k.prototype.destroy=function(){this.inherited(arguments);window.removeEventListener("message",this._handleExtent)};k.prototype._doAttachEvents=function(){window.addEventListener("message",this._handleExtent)};k.prototype._onOverlayClose=function(){};k.prototype._handleExtent=function(l){var h=this,e,d,g={};try{g=JSON.parse(l.data)}catch(x){}if(!g.action||
"resize"===g.action)return!1;if("telemetry"===(null===g||void 0===g?void 0:g.action))return this.telemetryEvents[g.params.type]+=1,!1;"cancel"===g.action&&this.args.closeOnCancel&&(null===(e=this.telemetry)||void 0===e?void 0:e.logEvent({category:"set extent",action:"cancel"}),this.xpOverlay.close());this.xpOverlay&&this.args.closeOnSave&&this.xpOverlay.close();if("save"===g.action){var u={coordinates:"coordinates",draw:"draw",search:"search",orgreg:"region",orgext:"extent",currfeat:"features",currsaved:"saved",
resize:"resize"};Object.keys(this.telemetryEvents).filter(function(x){return 0<h.telemetryEvents[x]}).forEach(function(x){var y;null===(y=h.telemetry)||void 0===y?void 0:y.logEvent({category:"extent action",action:u[x]||x})});null===(d=this.telemetry)||void 0===d?void 0:d.logEvent({category:"set extent",action:"save"});this.callback(g.extent)}};return k=w.__decorate([m["default"](b["default"],a["default"],c["default"])],k)}()})},"arcgisonline/sharing/dijit/ExtentPickerOverlay":function(){define("require exports tslib ../../pages/dijit/Overlay ../../tsutils/declareDecorator dojo/i18n!../../nls/arcgisonline dojo/text!./templates/ExtentPicker.html".split(" "),
function(K,G,w,v,r,f,c){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);return function(){function a(b,p){this.overlayContents=c["default"];this.showActionBar=!1;this.title=f["default"].itemProperties.setExtent}a.prototype.startup=function(){this.inherited(arguments);this.domNode.classList.add("overlay--top");var b=this.domNode.querySelector(".js-iframe");b&&(b.src=this.ifurl)};return a=w.__decorate([r["default"](v["default"])],a)}()})},"arcgisonline/pages/item/widgets/typeOptions/message":function(){define("require exports tslib ./_mixin ../../../utils/arrays ../../../utils/dom ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/string dojo/Deferred dojo/topic dojo/text!./message.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);var m;(function(n){n.FEATURE_SERVICE="Feature Service";n.VIEW_SERVICE="View Service"})(m||(m={}));return function(){function n(k,l){this.templateString=t["default"]}n.prototype.postCreate=function(){var k=this;this.inherited(arguments);this.own(q["default"].subscribe("item-layers/refreshed",
function(){k.reset()}))};n.prototype.reset=function(){var k=new p["default"];this.item.isHostedService&&this.item.type===m.FEATURE_SERVICE&&r["default"].includes(this.item.typeKeywords,m.VIEW_SERVICE)&&this._setViewServiceMessage();k.resolve();return k};n.prototype._setMessage=function(k){this._messageContainer.innerHTML=k;f["default"].showNode(this.domNode)};n.prototype._setViewServiceMessage=function(){if(this.item.sourceData){var k=this.item.sourceData;k=b["default"].substitute(this.i18n.itemProperties.viewLayerNote,
{layerLink:'\x3ca href\x3d"item.html?id\x3d'+k.id+'" target\x3d"_blank"\x3e'+k.title+"\x3c/a\x3e"});this._setMessage('\x3cspan class\x3d"green-asterisk green-asterisk-prefix"\x3e*\x3c/span\x3e\x26nbsp;'+k)}};return n=w.__decorate([c["default"](v["default"],a["default"])],n)}()})},"arcgisonline/pages/item/widgets/typeOptions/url":function(){define("require exports tslib ../../../../map/utils/getServiceInfo ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../utils/strings ../../../utils/validation ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/keys dojo/string dojo/Deferred dojo/when esri/libs/sanitizer/Sanitizer dojo/text!./url.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);var g;(function(u){u.WFS="WFS";u.WMS="WMS";u.WMTS="WMTS"})(g||(g={}));return function(){function u(x,
y){this.templateString=d["default"];this.sanitizer=new e["default"]}u.prototype._initHandlers=function(){var x=this._handlePropertyChange.bind(this),y=this._serviceUrlChange.bind(this),B=this._urlChange.bind(this);x=this._watchForInput.bind(this,x);var C=this._watchForEnter.bind(this,y),z="layer"===this.item.classification,D=c["default"].includesAll(this.item.typeKeywords,this.ARCGIS_SERVICE);this.own(r["default"].registerKeystrokeHandler(this._url,x));D&&z?this.own(r["default"].registerKeystrokeHandler(this._url,
C),m["default"](this._url,"change",y)):this.own(m["default"](this._url,"change",B))};u.prototype.retrievePropertyValues=function(){var x=b["default"].stripHTML(this._url.value);return{url:this.sanitizer.sanitizeUrl(x)}};u.prototype.hasChanges=function(){var x=this.retrievePropertyValues();return this._urlChanged=!b["default"].areEqual(this.item.url,x.url)};u.prototype.validate=function(){var x=this,y=new l["default"],B=this.retrievePropertyValues().url,C="layer"===this.item.classification,z=c["default"].includesAll(this.item.typeKeywords,
this.ARCGIS_SERVICE);this.containsHTTP(B)?y.resolve({validates:!1,message:this.i18n.common.httpNotSupported}):this.containsProtocol(B)?this._urlChanged&&z&&C?this._validateServiceUrl(B).then(function(D){D.validates||(x.alertError(D.message),D.validates=!0);y.resolve(D)}):y.resolve({validates:!0}):y.resolve({validates:!1,message:this.i18n.itemProperties.error.urlRequired});return y};u.prototype.save=function(){var x=this,y=new l["default"];this._serviceUrlChange().then(function(){y.resolve({changed:{},
toChange:x.retrievePropertyValues()})},function(B){return y.reject(B)});return y};u.prototype.reset=function(){var x=this,y=new l["default"],B;if(g.WMTS===this.item.type){var C=this.item.itemData||this.page.fetchItemData().then(function(z){return z});h["default"](C,function(z){B=z&&z.wmtsInfo&&z.wmtsInfo.url||x.item.url;x._url.value=B;x.containsHTTP(x.item.url)})}else this._url.value=this.item.url,this.containsHTTP(this.item.url);a["default"].disableNode(this._url,this._mustDisableURLForType(this.item.type));
y.resolve();return y};u.prototype._mustDisableURLForType=function(x){return c["default"].includes([g.WFS,g.WMS,g.WMTS],x)};u.prototype._urlChange=function(){var x=this.retrievePropertyValues();this.containsHTTP(x.url);this._handlePropertyChange()};u.prototype._serviceUrlChange=function(){var x=this,y=new l["default"],B=this.retrievePropertyValues(),C="layer"===this.item.classification,z=c["default"].includesAll(this.item.typeKeywords,this.ARCGIS_SERVICE),D=!b["default"].areEqual(this.item.url,B.url);
B.url&&D&&z&&C?(B.url=this._cleanUrl(B.url),this._url.value=B.url,(D=!b["default"].areEqual(this.item.url,B.url))?this._validateServiceUrl(B.url).then(function(E){E.validates?y.resolve():(x.alertError(E.message),y.reject(E.message));x.containsHTTP(B.url)}):(this.containsHTTP(B.url),y.resolve())):(this.containsHTTP(B.url),y.resolve());this._handlePropertyChange();return y};u.prototype._cleanUrl=function(x){return(x=decodeURIComponent(x))&&-1<x.indexOf("/dynamicLayer?")?x.substring(0,x.indexOf("/dynamicLayer")):
x.split("?")[0]||x};u.prototype._validateServiceUrl=function(x){var y=k["default"].substitute(this.i18n.itemProperties.error.serviceNotExist,{url:x});return v["default"](x).then(function(){return{validates:!0}},function(){return{validates:!1,message:y}})};u.prototype._watchForEnter=function(x,y){var B;if(y.keyCode===n["default"].ENTER||y.keyCode===n["default"].TAB)null===(B=null===x||void 0===x?void 0:x.call)||void 0===B?void 0:B.call(x)};u.prototype._watchForInput=function(x,y){var B;y.keyCode!==
n["default"].ENTER&&(null===(B=null===x||void 0===x?void 0:x.call)||void 0===B?void 0:B.call(x))};u.prototype.containsHTTP=function(x){if(!this.page.portal.isPortal&&-1<(null===x||void 0===x?void 0:x.indexOf("http:")))return p["default"].setInvalidState(this._url,this._urlError,this.i18n.common.httpNotSupported),!0;p["default"].clearState([this._url,this._urlError]);return!1};u.prototype.containsProtocol=function(x){(x=-1<(null===x||void 0===x?void 0:x.indexOf("https://")))?p["default"].clearState([this._url,
this._urlError]):p["default"].setInvalidState(this._url,this._urlError,this.i18n.itemProperties.error.urlRequired);return x};return u=w.__decorate([q["default"](f["default"],t["default"])],u)}()})},"arcgisonline/pages/item/widgets/typeOptions/useOnly":function(){define("require exports tslib ./_mixin ../../../utils/arrays ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/_base/lang dojo/on dojo/Deferred dojo/text!./useOnly.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q){v=w.__importDefault(v);
r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);return function(){function t(m,n){this.templateString=q["default"];this.useOnlyKeyword="useOnly"}t.prototype._initHandlers=function(){this.own(b["default"](this._saveAs,"change",a["default"].hitch(this,"_handlePropertyChange")))};t.prototype.retrievePropertyValues=function(){return{viewOnly:!this._saveAs.checked}};t.prototype.hasChanges=function(){var m=
this.retrievePropertyValues();return this._saveAsChanged=this.item.isViewOnly!==m.viewOnly};t.prototype.save=function(){var m=new p["default"],n=this.retrievePropertyValues(),k=a["default"].clone(this.item.typeKeywords),l={addTypeKeywords:[],removeTypeKeywords:[]},h=r["default"].includes(k,this.useOnlyKeyword);this._saveAsChanged&&(n.viewOnly&&!h?(k.push(this.useOnlyKeyword),l.addTypeKeywords.push(this.useOnlyKeyword)):!n.viewOnly&&h&&(n=k.indexOf(this.useOnlyKeyword),k.splice(n,1),l.removeTypeKeywords.push(this.useOnlyKeyword)));
m.resolve({changed:{},toChange:l});return m};t.prototype.reset=function(){var m=new p["default"];this._saveAs.checked=!this.item.isViewOnly;m.resolve();return m};return t=w.__decorate([f["default"](v["default"],c["default"])],t)}()})},"arcgisonline/pages/item/widgets/typeOptions/map":function(){define("require exports tslib ../../../../esriGeowConfig ./_mixin ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/a11yclick dijit/popup dijit/TooltipDialog dojo/dom-construct dojo/topic dojo/text!./map.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.templateString=n["default"]}k.prototype.destroy=function(){this._removePopovers();this.inherited(arguments)};k.prototype._initHandlers=function(){"Web Map"===this.item.type&&
(this.own(m["default"].subscribe("item-data/change",this._refreshItemData.bind(this))),this._createUpdateToHTTPSPopover(),this._createUpdateDomainsPopover())};k.prototype._createUpdateToHTTPSPopover=function(){var l=this,h=f["default"].isPortal();h=""+v["default"].self.helpBase+(v["default"].self.helpMap.m[h?"120001465":"120001298"]||"");var e=t["default"].create("div",{"class":"popover text-left"}),d=t["default"].create("span",{"class":"popover-close icon-ui-close","tab-index":0,"aria-label":this.i18n.common.close},
e);t["default"].create("div",{"class":"popover-title",innerHTML:this.i18n.itemProperties.updateToHTTPS},e);t["default"].create("div",{"class":"popover-text leader-half",innerHTML:this.i18n.itemProperties.updateToHTTPSDesc},e);t["default"].create("div",{"class":"popover-text leader-half",innerHTML:'\x3ca href\x3d"'+h+'" target\x3d"_blank"\x3e'+this.i18n.itemProperties.learnMore+"\x3c/a\x3e"},e);this._httpsPopover=new q["default"]({"class":"popover",title:this.i18n.itemProperties.updateToHTTPS,content:e});
this.own(b["default"](d,function(){p["default"].close(l._httpsPopover)}),b["default"](this._httpsHelpLink,function(){p["default"].open({popup:l._httpsPopover,orient:["above-centered"],around:l._httpsHelpLink})}))};k.prototype._createUpdateDomainsPopover=function(){var l=this,h=f["default"].isPortal();h=""+v["default"].self.helpBase+(v["default"].self.helpMap.m[h?"120001465":"120001299"]||"");var e=t["default"].create("div",{"class":"popover text-left"}),d=t["default"].create("span",{"class":"popover-close icon-ui-close",
"tab-index":0,"aria-label":this.i18n.common.close},e);t["default"].create("div",{"class":"popover-title",innerHTML:this.i18n.itemProperties.updateSiteRefs},e);t["default"].create("div",{"class":"popover-text leader-half",innerHTML:this.i18n.itemProperties.updateSiteRefsDesc},e);t["default"].create("div",{"class":"popover-text leader-half",innerHTML:'\x3ca href\x3d"'+h+'" target\x3d"_blank"\x3e'+this.i18n.itemProperties.learnMore+"\x3c/a\x3e"},e);this._domainPopover=new q["default"]({"class":"popover",
title:this.i18n.itemProperties.updateSiteRefs,content:e});this.own(b["default"](d,function(){p["default"].close(l._domainPopover)}),b["default"](this._domainHelpLink,function(){p["default"].open({popup:l._domainPopover,orient:["above-centered"],around:l._domainHelpLink})}))};k.prototype._removePopovers=function(){this._httpsPopover&&this._httpsPopover.destroyRecursive();this._domainPopover&&this._domainPopover.destroyRecursive()};k.prototype._refreshItemData=function(){var l=this;this.page.fetchMapLayers(this.page._item).then(function(h){l.page._item.set({itemData:l.page._item.itemData,
layers:h});l.item.itemData=l.page._item.itemData;l.item.layers=h;m["default"].publish("item-data/change-complete",{source:"type-options/map",itemData:l.page._item.itemData})},function(){m["default"].publish("item-data/change-complete",{source:"type-options/map",itemData:l.page._item.itemData})})};return k=w.__decorate([c["default"](r["default"],a["default"])],k)}()})},"arcgisonline/pages/item/widgets/typeOptions/proxy":function(){define("require exports tslib ../../../pageUtil ./_mixin ../../../utils/dom ../../../utils/strings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/topic dojo/Deferred dojo/text!./proxy.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);return function(){function m(n,k){this.templateString=t["default"]}m.prototype._initHandlers=function(){var n=this._handlePropertyChange.bind(this);this.own(v["default"].registerKeystrokeHandler(this._username,n),v["default"].registerKeystrokeHandler(this._password,
n),p["default"].subscribe("item/proxy-url-update",this._proxyUrlUpdate.bind(this)))};m.prototype.retrievePropertyValues=function(){return{url:this.item.sourceUrl,serviceUsername:this._username.value,servicePassword:this._password.value}};m.prototype.hasChanges=function(){var n=this.retrievePropertyValues();return this._credentialsChanged=c["default"].isSet(n.serviceUsername)&&c["default"].isSet(n.servicePassword)};m.prototype.save=function(){var n=new q["default"],k=this.retrievePropertyValues();
this.reset().then(function(){n.resolve({changed:{},toChange:k})});return n};m.prototype.reset=function(){var n=new q["default"];this._username.value="";this._password.value="";f["default"].showHide(this._updateSourceUrlToHttpsContainer,c["default"].startsWith(this.item.sourceUrl,"http://"));n.resolve();return n};m.prototype._proxyUrlUpdate=function(n){n.sourceUrl&&(this._proxySourceUrlLabel.innerHTML=n.sourceUrl,f["default"].showHide(this._updateSourceUrlToHttpsContainer,c["default"].startsWith(n.sourceUrl,
"http://")))};return m=w.__decorate([a["default"](r["default"],b["default"])],m)}()})},"arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/index":function(){define("require exports tslib ../../../../../esriGeowConfig ../../../../../map/core/projectExtent ../../../../pageUtil ../_mixin ./categoryPicker/index ./countryPicker ./extentPicker ../../../../utils/arrays ../../../../utils/dom ../../../../../sharing/util ../../../../../sharing/dijit/dialog/SimpleDlg ../../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/dom-class dojo/Deferred esri/geometry/Extent esri/SpatialReference dojo/text!./index.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);return function(){function y(B){this.templateString=
x["default"];this.widgetsInTemplate=!0;this.gcsWorldExtent={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}}}y.prototype._initHandlers=function(){this.helpLink.href=""+v["default"].helpBase+v["default"].helpMap["120001275"];this.helpLink.target="_blank";this.own(h["default"](this.locationTypeSelect,"change",this.handleLocationTypeChange.bind(this)),h["default"](this.areaTypeSelect,"change",this.handleAreaTypeChange.bind(this)),h["default"](this.displayLocationSelect,"change",this.handleDisplayLocationChange.bind(this)),
h["default"](this.cityNameSelect,"change",this.handlePreferredLabelValueChange.bind(this)),h["default"](this.streetNameSelect,"change",this.handlePreferredLabelValueChange.bind(this)));this.fillEmptyPropertyValues=this.fillEmptyPropertyValues.bind(this);this.fillEmptyProxyValues=this.fillEmptyProxyValues.bind(this)};y.prototype._handlePropertyChange=function(){this.emitChanged(this.properties,this.hasChanges())};y.prototype.hasChanges=function(){var B=JSON.stringify(this.fillEmptyPropertyValues(this.item.properties))!==
JSON.stringify(this.properties),C=JSON.stringify(this.fillEmptyProxyValues(this.item.proxyFilter))!==JSON.stringify(this.proxyFilter),z=!0;"all"!==this.properties.locatorViewLocationType&&(z=""!==this.proxyFilter.category);return(B||C)&&z};y.prototype.save=function(){var B=this,C=new d["default"],z=Object.keys(this.proxyFilter).reduce(function(D,E,A){"searchExtent"===E?JSON.stringify(B.proxyFilter.searchExtent)!==JSON.stringify(B.getEmptySearchExtent())&&(D[E]=B.proxyFilter[E]):0<B.proxyFilter[E].length&&
(D[E]=B.proxyFilter[E]);return D},{});z.sourceCountry||"country"!==this.properties.locatorViewAreaType||(this.properties.locatorViewAreaType="any");z.locationType&&"rooftop"===this.proxyFilter.locationType&&delete z.locationType;C.resolve({changed:{properties:JSON.stringify(this.properties),proxyFilter:JSON.stringify(z)},toChange:{properties:JSON.stringify(this.properties),serviceProxyFilter:JSON.stringify(z),url:this.item.sourceUrl}});return C};y.prototype.reset=function(){var B=this,C=new d["default"];
this.loadServiceInfo().then(function(z){B.resetProperties();B.resetProxyFilter();B.updateUI();B._handlePropertyChange()},function(){t["default"].hideNode(B.loaderContainer);t["default"].showNode(B.failedContainer)});return C};y.prototype.loadServiceInfo=function(){var B=this,C=new d["default"];this.service?C.resolve(this.service):m["default"].request({url:this.item.url}).then(function(z){var D=new g["default"](B.item.portal.defaultExtent),E=new u["default"]({wkid:4326});r["default"](D,E,function(A){B.projectedExtent=
A[0]?{spatialReference:A[0].spatialReference,xmax:A[0].xmax,xmin:A[0].xmin,ymax:A[0].ymax,ymin:A[0].ymin}:null;B.service=z;C.resolve(z)},function(){B.projectedExtent=null;B.service=z;C.resolve(z)})},function(z){C.reject(z)});return C};y.prototype.getEmptySearchExtent=function(){return this.projectedExtent?this.projectedExtent:this.gcsWorldExtent};y.prototype.resetProperties=function(){"string"===typeof this.item.properties&&(this.item.properties=JSON.parse(this.item.properties));this.properties=this.fillEmptyPropertyValues(this.item.properties)};
y.prototype.resetProxyFilter=function(){"string"===typeof this.item.proxyFilter&&(this.item.proxyFilter=JSON.parse(this.item.proxyFilter));this.proxyFilter=this.fillEmptyProxyValues(this.item.proxyFilter)};y.prototype.fillEmptyPropertyValues=function(B){var C={locatorViewLocationType:"all",locatorViewAreaType:"any"};B&&"object"===typeof B&&(C=w.__assign(w.__assign({},C),B));return C};y.prototype.fillEmptyProxyValues=function(B){var C={category:"",sourceCountry:"",searchExtent:this.getEmptySearchExtent(),
locationType:"rooftop",preferredLabelValues:""};B&&"object"===typeof B&&(C=w.__assign(w.__assign({},C),B));return C};y.prototype.clearLocationType=function(){this.proxyFilter.category=""};y.prototype.clearAreaType=function(){this.proxyFilter.sourceCountry="";this.proxyFilter.searchExtent=this.getEmptySearchExtent()};y.prototype.toggleDisplayLocation=function(){"coord"===this.properties.locatorViewLocationType?(t["default"].hideNode(this.displayLocationSelect),t["default"].hideNode(this.cityNameSelect),
t["default"].hideNode(this.streetNameSelect)):(t["default"].showNode(this.displayLocationSelect),t["default"].showNode(this.cityNameSelect),t["default"].showNode(this.streetNameSelect))};y.prototype.setPreferredLabelValues=function(){var B=this.proxyFilter.preferredLabelValues&&this.proxyFilter.preferredLabelValues.split(",")||[];this.selectDisplayCityName(B);this.selectDisplayStreetName(B)};y.prototype.selectDisplayCityName=function(B){q["default"].includes(B,"postalCity")?this.postalCityRadio.checked=
!0:q["default"].includes(B,"localCity")?this.localCityRadio.checked=!0:q["default"].includes(B,"matchedCity")?this.matchedCityRadio.checked=!0:this.defaultCityRadio.checked=!0};y.prototype.selectDisplayStreetName=function(B){q["default"].includes(B,"matchedStreet")?this.matchedStreetRadio.checked=!0:q["default"].includes(B,"primaryStreet")?this.primaryStreetRadio.checked=!0:this.defaultStreetRadio.checked=!0};y.prototype.handleLocationTypeChange=function(B){var C=this;this.loadServiceInfo().then(function(z){C.properties.locatorViewLocationType=
B.target.value;C.clearLocationType();C.buildCategoryPicker(z,B.target.value);C.toggleDisplayLocation();C._handlePropertyChange()})};y.prototype.handleAreaTypeChange=function(B){var C=this;this.loadServiceInfo().then(function(z){C.properties.locatorViewAreaType=B.target.value;C.clearAreaType();C.buildAreaPicker(z,B.target.value);C._handlePropertyChange()})};y.prototype.handleCategoryChange=function(B){this.proxyFilter.category=B;this.emitChanged(this.proxyFilter,this.hasChanges())};y.prototype.handleSourceCountryChange=
function(B){this.proxyFilter.sourceCountry=B;this.emitChanged(this.proxyFilter,this.hasChanges())};y.prototype.handleSearchExtentChange=function(B){this.proxyFilter.searchExtent=B;this.emitChanged(this.proxyFilter,this.hasChanges())};y.prototype.handleDisplayLocationChange=function(B){this.proxyFilter.locationType=B.target.value;this.emitChanged(this.proxyFilter,this.hasChanges())};y.prototype.handlePreferredLabelValueChange=function(B){B=[];this.postalCityRadio.checked?B.push(this.postalCityRadio.value):
this.localCityRadio.checked?B.push(this.localCityRadio.value):this.matchedCityRadio.checked&&B.push(this.matchedCityRadio.value);this.matchedStreetRadio.checked?B.push(this.matchedStreetRadio.value):this.primaryStreetRadio.checked&&B.push(this.primaryStreetRadio.value);this.proxyFilter.preferredLabelValues=B.length?B.join(","):"";this.emitChanged(this.proxyFilter,this.hasChanges())};y.prototype.updateUI=function(){var B=this;if(f["default"].getQueryParams().newLocator){var C=new n["default"]({title:this.i18n.itemProperties.geocodingFilters.newLocatorDlgTitle,
content:this.i18n.itemProperties.geocodingFilters.newLocatorView});e["default"].add(C.dialog.titleNode,"new-locator-dlg-title word-wrap");e["default"].add(C._content,"new-locator-dlg-content");C.show();f["default"].removeQueryParams(["newLocator"])}this.loadServiceInfo().then(function(z){t["default"].hideNode(B.loaderContainer);t["default"].showNode(B.mainContainer);B.locationTypeSelect.value=B.properties.locatorViewLocationType;B[B.properties.locatorViewAreaType+"Radio"].checked=!0;B[B.proxyFilter.locationType+
"Radio"].checked=!0;B.setPreferredLabelValues();B.buildCategoryPicker(z,B.properties.locatorViewLocationType);B.buildAreaPicker(z,B.properties.locatorViewAreaType);B.toggleDisplayLocation()})};y.prototype.buildCategoryPicker=function(B,C){var z,D;this.clearCategoryNode();if("all"!==C){var E=null!==(D=null===(z=this.item.proxyFilter)||void 0===z?void 0:z.category)&&void 0!==D?D:this.proxyFilter.category;this.categoryPicker=new a["default"]({i18n:this.i18n,type:C,categories:B.categories,selectedCategory:E,
handleCategoryChange:this.handleCategoryChange.bind(this)},this.categoryPickerContainer.appendChild(document.createElement("div")))}};y.prototype.buildAreaPicker=function(B,C){var z,D,E;this.clearAreaNode();if("country"===C){var A=null!==(D=null===(z=this.item.proxyFilter)||void 0===z?void 0:z.sourceCountry)&&void 0!==D?D:this.proxyFilter.sourceCountry;this.areaPicker=new b["default"]({i18n:this.i18n,countries:B.detailedCountries,selectedSourceCountry:A,handleSourceCountryChange:this.handleSourceCountryChange.bind(this)},
this.areaPickerContainer.appendChild(document.createElement("div")))}else"area"===C&&(z=null!==(E=null===(A=this.item.proxyFilter)||void 0===A?void 0:A.searchExtent)&&void 0!==E?E:this.proxyFilter.searchExtent,this.areaPicker=new p["default"]({i18n:this.i18n,selectedSearchExtent:z,handleSearchExtentChange:this.handleSearchExtentChange.bind(this)},this.areaPickerContainer.appendChild(document.createElement("div"))))};y.prototype.clearCategoryNode=function(){var B,C;null===(C=null===(B=this.categoryPicker)||
void 0===B?void 0:B.destroyRecursive)||void 0===C?void 0:C.call(B)};y.prototype.clearAreaNode=function(){var B,C;null===(C=null===(B=this.areaPicker)||void 0===B?void 0:B.destroyRecursive)||void 0===C?void 0:C.call(B)};return y=w.__decorate([k["default"](c["default"],l["default"])],y)}()})},"arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/categoryPicker/index":function(){define("require exports tslib dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/kernel dojo/on ./category ./subcategory ../../../../../../tsutils/declareDecorator dojo/text!./index.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);return function(){function t(m,n){this.templateString=q["default"];this.widgetsInTemplate=!0;this.forcedLeafKey={Postal:!0,Education:!0,Food:!0,"Shops and Service":!0};this.excludedCategories={LatLong:!0};this.renamedCategories={XY:!0,YX:!0};this.i18n=m.i18n;this.type=m.type;this.handleCategoryChange=
m.handleCategoryChange;this.categories=m.categories;this.selectedCategories=m.selectedCategory.split(",").reduce(function(k,l){k[l]=!0;return k},{})}t.prototype.postCreate=function(){this.categoryTree=this.treeIfy(this.categories);this.subtree=this.getSubtree(this.type);this.own(c["default"](this.geocodingCategories,"change",this.handleLocatorCategoryChange.bind(this)));this.buildCategoryOptions(this.subtree);this.selectionInSubtree(this.subtree)&&this.checkSelectedCategories(this.subtree);this.handleLocatorCategoryChange()};
t.prototype.handleLocatorCategoryChange=function(){this.handleCategoryChange(this.getAllSelectedCategories(this.categoryTree).join(","))};t.prototype.treeIfy=function(m){var n=this,k=m[0].localizedNames[f["default"].locale]?f["default"].locale:"en";return m.reduce(function(l,h,e){var d,g;!h.categories||n.forcedLeafKey[h.name]||n.excludedCategories[h.name]?n.excludedCategories[h.name]||(e=null!==(g=n.getCategoryText(h,k))&&void 0!==g?g:n.getCategoryText(h,"en"),l[h.name]={selected:!1,text:e,value:h.name,
widget:null,container:null}):(e=null!==(d=n.getCategoryText(h,k))&&void 0!==d?d:n.getCategoryText(h,"en"),l[h.name]={children:n.treeIfy(h.categories),selected:!1,indeterminate:!1,text:e,value:h.name,widget:null,container:null});return l},{})};t.prototype.getCategoryText=function(m,n){return this.renamedCategories[m.name]?this.i18n.itemProperties.geocodingFilters.renamedCategories[m.name]:m.localizedNames[n]};t.prototype.getAllSelectedCategories=function(m){var n=this;return Object.keys(m).reduce(function(k,
l,h){l=m[l];return l.selected?k.concat([l.value]):l.children?k.concat(n.getAllSelectedCategories(l.children)):k},[])};t.prototype.selectionInSubtree=function(m){var n=this;return Object.keys(m).reduce(function(k,l){return n.selectedCategories[l]?!0:m[l].children?n.selectionInSubtree(m[l].children)?!0:k:k},!1)};t.prototype.checkSelectedCategories=function(m){for(var n in m)this.selectedCategories[n]&&m[n].widget?(m[n].widget.checkRecursive(),m[n].widget.parent&&m[n].widget.parent.checkIndeterminate()):
m[n].children?(m[n].widget.uncheckRecursive(),this.checkSelectedCategories(m[n].children)):m[n].widget.uncheckRecursive()};t.prototype.getSubtree=function(m){return"address"===m?{Address:this.categoryTree.Address,Postal:this.categoryTree.Postal,"Populated Place":this.categoryTree["Populated Place"]}:"coord"===m?{XY:this.categoryTree["Coordinate System"].children.XY,YX:this.categoryTree["Coordinate System"].children.YX,MGRS:this.categoryTree["Coordinate System"].children.MGRS,USNG:this.categoryTree["Coordinate System"].children.USNG}:
"poi"===m?{Education:this.categoryTree.POI.children.Education,Food:this.categoryTree.POI.children.Food,"Shops and Service":this.categoryTree.POI.children["Shops and Service"],Airport:this.categoryTree.POI.children["Travel and Transport"].children.Airport}:this.categoryTree};t.prototype.buildCategoryOptions=function(m){for(var n in m)m[n].children?this.buildCategory(m[n],this.categoriesContainer):this.buildSubcategory(m[n],this.categoriesContainer)};t.prototype.buildCategory=function(m,n){m.container=
document.createElement("div");n.appendChild(m.container);m.widget=new a["default"]({props:m},m.container)};t.prototype.buildSubcategory=function(m,n){m.container=document.createElement("div");n.appendChild(m.container);m.widget=new b["default"]({props:m},m.container)};return t=w.__decorate([p["default"](v["default"],r["default"])],t)}()})},"arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/categoryPicker/category":function(){define("require exports tslib ../../../../../utils/dom ./category ./subcategory ../../../../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/on dojo/text!./category.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);return function(){function m(n,k){this.templateString=t["default"];this.widgetsInTemplate=!0;this.expanded=!1;this.props=n.props;this.parent=n.parent;this.props.selected=!0}m.prototype.postCreate=function(){this.own(p["default"](this.plusIcon,this.handleOptionExpand.bind(this)),
p["default"](this.minusIcon,this.handleOptionContract.bind(this)),q["default"](this.checkbox,"change",this.handleCheckboxToggle.bind(this)));this.buildChildOptions(this.props.children)};m.prototype.handleOptionExpand=function(){v["default"].hideNode(this.plusIcon);v["default"].showNode(this.minusIcon);v["default"].showNode(this.categoriesContainer);this.expanded=!0};m.prototype.handleOptionContract=function(){v["default"].hideNode(this.minusIcon);v["default"].showNode(this.plusIcon);v["default"].hideNode(this.categoriesContainer);
this.expanded=!1};m.prototype.handleCheckboxToggle=function(n){!0===n.target.checked?this.checkRecursive():this.uncheckRecursive();this.parent&&this.parent.checkIndeterminate()};m.prototype.checkRecursive=function(){this.props.selected=!0;this.props.indeterminate=!1;this.checkbox.checked=!0;this.checkbox.indeterminate=!1;for(var n in this.props.children)this.props.children[n].widget.checkRecursive()};m.prototype.uncheckRecursive=function(){this.props.selected=!1;this.props.indeterminate=!1;this.checkbox.checked=
!1;this.checkbox.indeterminate=!1;for(var n in this.props.children)this.props.children[n].widget.uncheckRecursive()};m.prototype.checkIndeterminate=function(){var n=this.allChildrenChecked(),k=this.anyChildrenChecked();n?(this.props.selected=!0,this.props.indeterminate=!1,this.checkbox.checked=!0,this.checkbox.indeterminate=!1):k?(this.props.selected=!1,this.props.indeterminate=!0,this.checkbox.checked=!1,this.checkbox.indeterminate=!0):(this.props.selected=!1,this.props.indeterminate=!1,this.checkbox.checked=
!1,this.checkbox.indeterminate=!1);this.parent&&(n||k)&&this.parent.checkIndeterminate()};m.prototype.allChildrenChecked=function(){var n=!0,k;for(k in this.props.children)this.props.children[k].selected||(n=!1);return n};m.prototype.anyChildrenChecked=function(){for(var n in this.props.children)if(this.props.children[n].selected||this.props.children[n].indeterminate)return!0;return!1};m.prototype.buildChildOptions=function(n){for(var k in n)n[k].children?this.buildCategory(n[k],this.categoriesContainer):
this.buildSubcategory(n[k],this.categoriesContainer)};m.prototype.buildCategory=function(n,k){n.container=document.createElement("div");k.appendChild(n.container);n.widget=new r["default"]({props:n,parent:this},n.container)};m.prototype.buildSubcategory=function(n,k){n.container=document.createElement("div");k.appendChild(n.container);n.widget=new f["default"]({props:n,parent:this},n.container)};return m=w.__decorate([c["default"](a["default"],b["default"])],m)}()})},"arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/categoryPicker/subcategory":function(){define("require exports tslib ../../../../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/text!./subcategory.html".split(" "),
function(K,G,w,v,r,f,c,a){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);return function(){function b(p,q){this.templateString=a["default"];this.widgetsInTemplate=!0;this.props=p.props;this.parent=p.parent;this.props.selected=!0}b.prototype.postCreate=function(){this.own(c["default"](this.checkbox,"change",this.handleCheckboxToggle.bind(this)))};b.prototype.handleCheckboxToggle=function(p){!0===p.target.checked?this.checkRecursive():
this.uncheckRecursive();this.parent&&this.parent.checkIndeterminate()};b.prototype.checkRecursive=function(){this.props.selected=!0;this.checkbox.checked=!0};b.prototype.uncheckRecursive=function(){this.props.selected=!1;this.checkbox.checked=!1};return b=w.__decorate([v["default"](r["default"],f["default"])],b)}()})},"arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/countryPicker":function(){define("require exports tslib ../../../../utils/dom ../../../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/_base/kernel dojo/on dojo/text!./countryPicker.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);return function(){function t(m,n){var k=this;this.localeMap={ja:"jp","ja-jp":"jp",nb:"no"};this.templateString=q["default"];this.widgetsInTemplate=!0;this.i18n=m.i18n;this.filter="";this.selectedCountries=m.selectedSourceCountry?m.selectedSourceCountry.split(",").reduce(function(h,e){h[e]=
!0;return h},{}):{};var l=m.countries.map(function(h){var e=h.localizedNames[b["default"].locale]?h.localizedNames[b["default"].locale]:k.localeMap[b["default"].locale]&&h.localizedNames[k.localeMap[b["default"].locale]]?h.localizedNames[k.localeMap[b["default"].locale]]:h.localizedNames.en;return w.__assign(w.__assign({},h),{localizedName:e})}).sort(function(h,e){return h.localizedName.localeCompare(e.localizedName)});this.countryNodes=l.map(function(h){var e=document.createElement("a");e.textContent=
h.localizedName;e.className="country-picker-link hide";k.own(a["default"](e,function(){k.handleCountrySelect(h.name)}));return{code:h.name,name:h.localizedName,englishName:h.localizedNames.en,node:e}});this.selectedCountryNodes=l.map(function(h){var e=document.createElement("a");e.textContent=h.localizedName;e.className="country-picker-link hide";k.own(a["default"](e,function(){k.handleCountryDeselect(h.name)}));return{code:h.name,name:h.localizedName,node:e}});this.handleSourceCountryChange=m.handleSourceCountryChange}
t.prototype.postCreate=function(){this.own(p["default"](this._searchBox,"input",this.handleFilterChange.bind(this)),a["default"](this._clearCountryLink,this.handleClearCountryClick.bind(this)));this.attachCountryNodes();this.showAvailableCountries();this.showSelectedCountries();this.handleSelectedCountryChange()};t.prototype.handleCountrySelect=function(m){var n=this.countryNodes.filter(function(l){return l.code===m}).shift(),k=this.selectedCountryNodes.filter(function(l){return l.code===m}).shift();
this.selectedCountries[m]=!0;n&&v["default"].hideNode(n.node);k&&v["default"].showNode(k.node);this.handleSelectedCountryChange()};t.prototype.handleCountryDeselect=function(m){var n=this.countryNodes.filter(function(l){return l.code===m}).shift(),k=this.selectedCountryNodes.filter(function(l){return l.code===m}).shift();this.selectedCountries[m]&&delete this.selectedCountries[m];n&&(this.matchesFilter(n)||this.matchesFilterEnglish(n))&&v["default"].showNode(n.node);k&&v["default"].hideNode(k.node);
this.handleSelectedCountryChange()};t.prototype.handleFilterChange=function(m){this.filter=m.target.value;this.showAvailableCountries()};t.prototype.handleSelectedCountryChange=function(){this.handleSourceCountryChange(this.getSelectedCountryString())};t.prototype.handleClearCountryClick=function(){this.selectedCountries={};this.showSelectedCountries();this.showAvailableCountries();this.handleSelectedCountryChange()};t.prototype.matchesFilter=function(m){return 2>=this.filter.length?-1!==m.name.toLowerCase().indexOf(this.filter.toLowerCase())||
-1!==m.code.toLowerCase().indexOf(this.filter.toLowerCase()):m.name!==m.englishName&&-1!==m.name.toLowerCase().indexOf(this.filter.toLowerCase())};t.prototype.matchesFilterEnglish=function(m){return-1!==m.englishName.toLowerCase().indexOf(this.filter.toLowerCase())};t.prototype.getSelectedCountryString=function(){return Object.keys(this.selectedCountries).sort(function(m,n){return m<n?-1:m>n?1:0}).join(",")};t.prototype.attachCountryNodes=function(){var m=this;this.countryNodes.forEach(function(n){m._availableCountriesContainer.appendChild(n.node)});
this.selectedCountryNodes.forEach(function(n){m._selectedCountriesContainer.appendChild(n.node)})};t.prototype.showAvailableCountries=function(){var m=this,n=this.countryNodes.reduce(function(k,l){m.selectedCountries[l.code]||!m.matchesFilter(l)?k.toHide.push(l):k.toShow.push(l);return k},{toShow:[],toHide:[]});0===n.toShow.length&&(n.toHide=n.toHide.filter(function(k){return!m.selectedCountries[k.code]&&m.matchesFilterEnglish(k)?(n.toShow.push(k),!1):!0}));n.toShow.forEach(function(k){v["default"].showNode(k.node)});
n.toHide.forEach(function(k){v["default"].hideNode(k.node)})};t.prototype.showSelectedCountries=function(){var m=this;this.selectedCountryNodes.forEach(function(n){m.selectedCountries[n.code]?v["default"].showNode(n.node):v["default"].hideNode(n.node)})};return t=w.__decorate([r["default"](f["default"],c["default"])],t)}()})},"arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/extentPicker":function(){define("require exports tslib ../../../../utils/dom ../../../../utils/number ../../../../../sharing/dijit/dialog/ExtentDlg ../../../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/topic dojo/on esri/Evented dojo/text!./extentPicker.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.templateString=n["default"];this.widgetsInTemplate=!0;this.i18n=l.i18n;this.selectedSearchExtent=l.selectedSearchExtent;this.handleSearchExtentChange=l.handleSearchExtentChange}
k.prototype.postCreate=function(){this.own(p["default"](this._setExtentButton,this.handleExtentButtonClick.bind(this)));this.setSearchExtentView();this.own(q["default"].subscribe("searchExtent/update",this.handleUpdateSearchExtent.bind(this)));this.handleSearchExtentChange(this.selectedSearchExtent)};k.prototype.handleExtentButtonClick=function(l){var h=new f["default"];h._publish=function(d){q["default"].publish("searchExtent/update",d)};h.show(null!==this.selectedSearchExtent.xmin?[[this.selectedSearchExtent.xmin,
this.selectedSearchExtent.ymin],[this.selectedSearchExtent.xmax,this.selectedSearchExtent.ymax]]:null);l=document.querySelector("#dijit_Dialog_0_title, .dijitDialogTitle");var e=document.querySelector("#extent-dlg-draw-button");l.textContent=this.i18n.extentDlg.areaDlgTitle;e.textContent=this.i18n.extentDlg.drawArea;t["default"].once(h._extentDialog,"hide",function(){h._extentDialog.destroyRecursive();h.destroyRecursive()})};k.prototype.handleUpdateSearchExtent=function(l){this.selectedSearchExtent=
{xmin:l[0][0],ymin:l[0][1],xmax:l[1][0],ymax:l[1][1],spatialReference:{wkid:4326}};this.setSearchExtentView();this.handleSearchExtentChange(this.selectedSearchExtent)};k.prototype.setSearchExtentView=function(){this.selectedSearchExtent&&null!==this.selectedSearchExtent.xmin?(v["default"].hideNode(this._noSearchExtentContainer),v["default"].showNode(this._searchExtentContainer),this.setExtentValues()):(v["default"].hideNode(this._searchExtentContainer),v["default"].showNode(this._noSearchExtentContainer))};
k.prototype.setExtentValues=function(){document.getElementById("search-extent-text-left").textContent=this.formatExtent(this.selectedSearchExtent.xmin);document.getElementById("search-extent-text-bottom").textContent=this.formatExtent(this.selectedSearchExtent.ymin);document.getElementById("search-extent-text-right").textContent=this.formatExtent(this.selectedSearchExtent.xmax);document.getElementById("search-extent-text-top").textContent=this.formatExtent(this.selectedSearchExtent.ymax)};k.prototype.formatExtent=
function(l){return r["default"].format(l,2)};return k=w.__decorate([c["default"](a["default"],b["default"],m["default"])],k)}()})},"arcgisonline/pages/item/widgets/typeOptions/ratelimit":function(){define("require exports tslib ../../../../tsutils/declareDecorator dijit/_TemplatedMixin ./_mixin dojo/text!./ratelimit.html".split(" "),function(K,G,w,v,r,f,c){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);return function(){function a(b,p){this.templateString=
c["default"]}return a=w.__decorate([v["default"](f["default"],r["default"])],a)}()})},"arcgisonline/pages/item/widgets/typeOptions/app":function(){define("require exports tslib ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/dialog/ChoiceDlg ../../../../sharing/dijit/dialog/GeneralDlg ../../../../sharing/dijit/dialog/RegisterApp ../../../../sharing/dijit/dialog/UsageApp dijit/_TemplatedMixin dijit/a11yclick dojo/_base/lang dojo/on dojo/has dojo/query dojo/json dojo/string dojo/dom-construct dojo/Deferred dojo/when dojo/topic dijit/Dialog ../../../../tsutils/declareDecorator dojo/text!./app.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);
y=w.__importDefault(y);B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);return function(){function E(A,F){this.templateString=D["default"];this._isPlatform=this._isMobile=this._isWeb=!1;this._purposes={notSpecified:"Not specified",readyToUse:"Ready To Use",readyToUseAlt:"Ready to Use",configurable:"Configurable",selfConfigured:"selfConfigured",codeSample:"Code Sample"};this._apis={notSpecified:"Not specified",js:"JavaScript",flex:"Flex",silverlight:"Silverlight",
webADF:"Web ADF",other:"Other",iOS:"ArcGIS for iPhone",windowsMobile:"Windows Mobile",windowsPhone:"ArcGIS for Windows Phone",windowsStore:"ArcGIS for Windows Store",windowsUniversal:"ArcGIS for Windows Universal",android:"ArcGIS for Android",java:"Java",windowsDesktop:".NET-Windows Desktop",osx:"OS X",qt:"Qt",wpf:"WPF"};this.defaultWebAPI="Other";this.defaultMobileAPI="ArcGIS for iPhone";this.defaultPlatformAPI="Java";this.WEB_MAPPING_APP="Web Mapping Application"}E.prototype._initHandlers=function(){this._initCodeAttachment();
this._initPlatform();this._initConfiguration();this._initRegistrationInfo()};E.prototype.retrievePropertyValues=function(){var A=this._convertPlatformToTypeKeywords(this._getPlatform()),F=f["default"].includes(this.item.typeKeywords,this._purposes.configurable),H=this._configurationSettings.value;this.item.type===this.WEB_MAPPING_APP&&F&&(A.configurationSettings=H);return A};E.prototype.hasChanges=function(){var A=this._getPlatform(),F=this._configurationSettings.value;if(A.purpose===this._purposes.configurable){var H=
f["default"].includesAll(this.item.typeKeywords,[this._purposes.selfConfigured,this._purposes.configurable]),I=f["default"].includesSome(this.item.typeKeywords,[this._purposes.readyToUse,this._purposes.readyToUseAlt])&&f["default"].includes(this.item.typeKeywords,this._purposes.configurable);var L=f["default"].includes(this.item.typeKeywords,this._purposes.configurable);this._purposeChanged=H||I||!L}else this._purposeChanged=A.purpose===this._purposes.readyToUse?!f["default"].includesSome(this.item.typeKeywords,
[this._purposes.readyToUse,this._purposes.readyToUseAlt]):!f["default"].includes(this.item.typeKeywords,A.purpose);this._apiChanged=!f["default"].includes(this.item.typeKeywords,A.api);this._configurationChanged=this.item.type===this.WEB_MAPPING_APP&&L&&(F&&!this.item.itemData||this.item.itemData&&F!==d["default"].stringify(this.item.itemData));return this._purposeChanged||this._apiChanged||this._configurationChanged};E.prototype.validate=function(){var A=new x["default"],F=this.retrievePropertyValues(),
H={validates:!0};if(this._configurationChanged&&F.configurationSettings)try{d["default"].parse(F.configurationSettings)}catch(I){H.validates=!1,H.message=this.i18n.itemProperties.error.invalidJSONConfig}A.resolve(H);return A};E.prototype.save=function(){var A=new x["default"],F=this.retrievePropertyValues();A.resolve({changed:{},toChange:F});return A};E.prototype.reset=function(){var A=this,F,H=new x["default"],I=this.page.portal.isPortal,L=a["default"].getHomeAppContext(),J=window.location.host;
L=this.item.url&&-1<this.item.url.toLowerCase().indexOf((J+L).toLowerCase());var O=this.item.type?this.item.type.toLowerCase():"",P=this.portalUser.userRole&&this.portalUser.userRole.isAdmin(),fa="Application"===this.item.type,V="ArcGIS Pro Add In"===this.item.type,ba=(J="Web Mapping Application"===this.item.type)&&f["default"].includes(this.item.typeKeywords,"Web AppBuilder"),ka=f["default"].toArray(this._apis),la=this._purposes.notSpecified,ma=this._apis.notSpecified;fa||ba&&!P||ba&&P&&!this.item.codeAttachment||
V?c["default"].hideNode(e["default"](".js-codeAttachment-container").shift()):ba&&P&&this.item.codeAttachment&&c["default"].hideNode(this._updateCodeBtn);f["default"].includesSome(this.item.typeKeywords,[this._purposes.readyToUse,this._purposes.readyToUseAlt])?la=this._purposes.readyToUse:f["default"].includes(this.item.typeKeywords,this._purposes.selfConfigured)?la=this._purposes.selfConfigured:f["default"].includes(this.item.typeKeywords,this._purposes.configurable)?la=this._purposes.configurable:
f["default"].includes(this.item.typeKeywords,this._purposes.codeSample)&&(la=this._purposes.codeSample);c["default"].selectOption(this._purpose.options,la);if(this._isWeb)var ha=this._webAppAPI.options;else this._isMobile?ha=this._mobileAppAPI.options:this._isPlatform&&(ha=this._platformAppAPI.options);(P=f["default"].find(ka,function(Z){return f["default"].includes(A.item.typeKeywords,Z)}))&&(ma=P);c["default"].selectOption(ha,ma);"Web Mapping Application"===this.item.type&&f["default"].includes(this.item.typeKeywords,
"Configurable")&&!f["default"].includes([this._purposes.readyToUse,this._purposes.readyToUseAlt,this._purposes.selfConfigured],la)?c["default"].showNode(this._configurationContainer):c["default"].hideNode(this._configurationContainer);!f["default"].includes(this.item.typeKeywords,this._purposes.selfConfigured)&&this.item.itemData&&k["default"].isObject(this.item.itemData)&&this.item.itemData.configurationSettings&&(this._configurationSettings.value=JSON.stringify(this.item.itemData));this._notRegisteredLabel.innerHTML=
this.i18n.itemProperties[I?"notRegisteredPortal":"notRegistered"];I=(null===(F=this.portalUser)||void 0===F?void 0:F.accountId)&&-1!==O.indexOf("application",O.length-11)||V;J&&L&&(I=this.item.appProxies&&this.item.appProxies.length&&I);c["default"].showHide(this._registrationContainer,I);c["default"].showHide(this._notRegisteredContainer,!this.item.isRegisteredApp);c["default"].showHide(this._registeredContainer,this.item.isRegisteredApp);H.resolve();return H};E.prototype.performActions=function(){var A=
new x["default"];"true"===this.page._queryStringParams.showAppUsage&&this._showAppUsageClick();A.resolve();return A};E.prototype._formatCodeAttachment=function(A){return A?A.title||A.name:""};E.prototype._initCodeAttachment=function(){this._toggleCodeAttachment();this.own(this.item.watch("codeAttachment",this._toggleCodeAttachment.bind(this)))};E.prototype._toggleCodeAttachment=function(){var A,F,H=(null===(A=this.portalUser)||void 0===A?void 0:A.userRole)&&(null===(F=this.portalUser.userRole)||void 0===
F?void 0:F.isAdmin());A="Web Mapping Application"===this.item.type&&f["default"].includes(this.item.typeKeywords,"Web AppBuilder");this.item.codeAttachment?(c["default"].hideNode(this._attachCodeContainer),c["default"].showNode(this._attachedFile),c["default"].showNode(this._updateCodeContainer),A&&H&&c["default"].hideNode(this._updateCodeBtn)):A&&H||!this.item.isOwner?c["default"].hideNode(e["default"](".js-codeAttachment-container").shift()):(c["default"].hideNode(this._attachedFile),c["default"].hideNode(this._updateCodeContainer),
c["default"].showNode(this._attachCodeContainer));this._attachedFile.innerHTML=this._formatCodeAttachment(this.item.codeAttachment)};E.prototype._initPlatform=function(){var A=this._handlePropertyChange.bind(this);this.own(l["default"](this._purpose,"change",A),l["default"](this._webAppAPI,"change",A),l["default"](this._mobileAppAPI,"change",A),l["default"](this._platformAppAPI,"change",A));f["default"].includes(this.item.types,"is-web")?this._isWeb=!0:f["default"].includes(this.item.types,"is-mobile")?
(this._isMobile=!0,this._apiLabel.innerHTML=this.i18n.itemProperties.sdk):f["default"].includes(this.item.types,"is-platform")&&(this._isPlatform=!0,this._apiLabel.innerHTML=this.i18n.addItemFrm.itemPlatform)};E.prototype._initConfiguration=function(){this.own(l["default"](this._configurationSettings,"change",this._handlePropertyChange.bind(this)))};E.prototype._initRegistrationInfo=function(){this.own(n["default"](this._registerAppBtn,this._registerAppClick.bind(this)),n["default"](this._registeredInfoBtn,
this._registeredInfoClick.bind(this)),n["default"](this._registerEditBtn,this._registerEditClick.bind(this)),n["default"](this._unregisterAppBtn,this._unregisterAppClick.bind(this)),n["default"](this._appUsageBtn,this._showAppUsageClick.bind(this)))};E.prototype._getPlatform=function(){var A={purpose:this._purpose.value};this._isWeb?A.api=this._webAppAPI.value||this.defaultWebAPI:this._isMobile?A.api=this._mobileAppAPI.value||this.defaultMobileAPI:this._isPlatform&&(A.api=this._platformAppAPI.value||
this.defaultPlatformAPI);return A};E.prototype._convertPlatformToTypeKeywords=function(A){var F=[this._purposes.readyToUse,this._purposes.readyToUseAlt,this._purposes.selfConfigured,this._purposes.configurable,this._purposes.codeSample,this._apis.windowsMobile,this._apis.iOS,this._apis.windowsPhone,this._apis.windowsStore,this._apis.windowsUniversal,this._apis.android,this._apis.js,this._apis.flex,this._apis.silverlight,this._apis.webADF,this._apis.other,this._apis.java,this._apis.osx,this._apis.windowsDesktop,
this._apis.qt,this._apis.wpf],H=[];A.api!==this._apis.notSpecified&&H.push(A.api);A.purpose!==this._purposes.notSpecified&&H.push(A.purpose);A.purpose===this._purposes.selfConfigured?H.push(this._purposes.configurable):A.purpose===this._purposes.readyToUse&&(f["default"].includes(this.item.typeKeywords,this._purposes.selfConfigured)&&H.push(this._purposes.selfConfigured),f["default"].includes(this.item.typeKeywords,this._purposes.configurable)&&H.push(this._purposes.configurable));return{addTypeKeywords:H,
removeTypeKeywords:F}};E.prototype._showAppUsageClick=function(){var A=this;v["default"].fetchRegisteredAppInfo(this.item).then(function(F){var H=new C["default"]({className:"usage-app-dlg esriItem"}),I=H.on("hide",function(){I.remove();H.destroyRecursive()});A._registeredAppInfo=F;H.set("title",g["default"].substitute(A.i18n.itemProperties.appTitleUsage,A.item));H.setContent((new t["default"]({appId:F&&F.client_id,itemId:A.item.id,listed:A.item.listed})).domNode);H.show()})};E.prototype._registerAppClick=
function(A,F){var H=this,I,L=(new C["default"]({className:"register-app-dlg esriItem",style:{width:"620px"},draggable:!h["default"]("touch")})).placeAt(document.body),J=document.createDocumentFragment(),O=null===(I=this.page.portal.helpMap)||void 0===I?void 0:I.m["120000969"],P=[],fa=this._registeredAppInfo||{itemId:this.item.id,appType:"browser",redirect_uris:[]};I=u["default"].create("a",{"class":"icon-ui-question margin-left-half font-size--1 help-icon",title:this.i18n.common.help,href:""+this.page.portal.helpBase+
(O?O:""),target:"_blank"});var V=new q["default"]({id:this.item.id},u["default"].create("div",{"class":"esriRegisterApp"},J));O=u["default"].create("div",{"class":"right padding-trailer-half esriRegisterButtons"},J);var ba=u["default"].create("button",{innerHTML:this.i18n.itemProperties.register,"class":"btn btn-blue"},O);u["default"].create("span",{innerHTML:"\x26nbsp;"},O);var ka=u["default"].create("button",{innerHTML:this.i18n.itemProperties.registerRefresh,"class":"btn btn-clear hide"},O);u["default"].create("span",
{innerHTML:"\x26nbsp;"},O);var la=u["default"].create("button",{innerHTML:this.i18n.common.cancel,"class":"btn btn-clear"},O);P.push(n["default"](la,function(){L.hide()}));P.push(n["default"](ba,function(){!H._registeredAppInfo||F?(ma(!0),(fa=k["default"].mixin(fa,V.get("value")))&&fa.appType&&fa.redirect_uris&&fa.redirect_uris.length?(fa.redirect_uris=d["default"].stringify(fa.redirect_uris),v["default"].registerApp(fa,F).then(function(ha){H._registeredAppInfo=ha;H.item.isRegisteredApp||H.page._item.set("typeKeywords",
H.page._item.typeKeywords.concat(["Registered App"]));c["default"].hideNode(H._notRegisteredContainer);c["default"].hideNode(H._registeredInfoBtn);c["default"].showNode(H._registration);c["default"].showNode(H._registeredContainer);L.hide();H._registeredInfoClick();H._publishRegistered()},function(ha){ma(!1);H.alertError(ha)})):(H._createGeneralDlg().show({title:H.i18n.errorTitle,message:H.i18n.itemProperties.error.registerAppNoUris.message}),ma(!1))):L.hide()}));P.push(l["default"](L,"hide",function(){P.forEach(function(ha){ha.remove()});
L.destroyRecursive();V.destroy()}));P.push(n["default"](ka,function(){H._refreshAppSecretClick(V)}));var ma=function(ha){V.set("disabled",ha);c["default"].disableNode(ka,ha);c["default"].disableNode(ba,ha);c["default"].disableNode(la,ha)};O=e["default"](".dijitDialogTitleBar",L.domNode);u["default"].place(I,O[0],"first");L.setContent(J);H._registeredAppInfo&&V.set("registeredAppInfo",H._registeredAppInfo);F&&(V.set("editMode",!0),c["default"].showNode(ka));ba.innerHTML=H._registeredAppInfo?H.i18n.itemProperties.update:
H.i18n.itemProperties.register;L.set("title",H._registeredAppInfo?H.i18n.itemProperties.registerAppInfo:H.i18n.itemProperties.registerApp);ma(!1);L.show()};E.prototype._registeredInfoClick=function(){var A=this,F;v["default"].fetchRegisteredAppInfo(this.item).then(function(H){A._registeredAppInfo=H;F=A._registerFrm||(A._registerFrm=new q["default"]({},u["default"].create("div",{"class":"esriRegisterApp"},A._registration)));F.set("registeredAppInfo",A._registeredAppInfo);c["default"].hideNode(A._registeredInfoBtn);
c["default"].showNode(A._registration)})};E.prototype._registerEditClick=function(A){var F=this,H=this._registeredAppInfo||v["default"].fetchRegisteredAppInfo(this.item);y["default"](H,function(I){I&&(F._registeredAppInfo=I);F._registerAppClick(A,!0)})};E.prototype._unregisterAppClick=function(){var A=this,F=v["default"].createSpecifiedDialog(b["default"]);F.show({title:this.i18n.itemProperties.unRegisterApp,message:"\x3cp\x3e"+this.i18n.itemProperties.unRegisterAppMessage+"\x3c/p\x3e",choiceOneTitle:this.i18n.common.yesLabel,
choiceTwoTitle:this.i18n.common.noLabel,choiceOneHandler:function(){var H=A._registeredAppInfo?v["default"].unregisterApp(A._registeredAppInfo.client_id):v["default"].fetchRegisteredAppInfo(A.item).then(function(I){A._registeredAppInfo=I;return v["default"].unregisterApp(A._registeredAppInfo.client_id)});c["default"].disableNode(A._unregisterAppBtn,!0);H.then(function(){c["default"].disableNode(A._unregisterAppBtn,!1);A._registeredAppInfo=null;A.item.isRegisteredApp&&A.page._item.set("typeKeywords",
f["default"].filterOut(A.item.typeKeywords,["Registered App"]));c["default"].hideNode(A._registeredContainer);c["default"].showNode(A._notRegisteredContainer);A._publishUnregistered()})},choiceTwoHandler:function(){F.hide()}})};E.prototype._refreshAppSecretClick=function(A){var F=this,H=this._createChoiceDlg();H.show({title:this.i18n.itemProperties.registerRefresh,message:"\x3cp\x3e"+this.i18n.itemProperties.resetSecretMessage+"\x3c/p\x3e",choiceOneTitle:this.i18n.common.yesLabel,choiceTwoTitle:this.i18n.common.noLabel,
choiceOneHandler:function(){v["default"].refreshAppSecret(F._registeredAppInfo.client_id).then(function(I){F._registeredAppInfo=I;A.set("registeredAppInfo",F._registeredAppInfo);F._registerFrm.set("registeredAppInfo",F._registeredAppInfo);F._publishRegistered()})},choiceTwoHandler:function(){H.hide()}})};E.prototype._publishRegistered=function(){B["default"].publish("item/register",{registered:!0,appInfo:k["default"].clone(this._registeredAppInfo)})};E.prototype._publishUnregistered=function(){B["default"].publish("item/unregister",
{unregistered:!0})};E.prototype._createChoiceDlg=function(){return v["default"].createSpecifiedDialog(b["default"])};E.prototype._createGeneralDlg=function(){return v["default"].createSpecifiedDialog(p["default"])};return E=w.__decorate([z["default"](r["default"],m["default"])],E)}()})},"arcgisonline/sharing/dijit/dialog/ChoiceDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/on dojo/query dojo/aspect dijit/Dialog dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/lang ../../../esriGeowConfig dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ChoiceDlg.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){var d=G("arcgisonline.sharing.dijit.dialog.ChoiceDlg",[t,m,n],{declaredClass:"arcgisonline.sharing.dijit.dialog.ChoiceDlg",widgetsInTemplate:!0,templateString:e,title:"",message:"",choiceOneButton:null,choiceOneTitle:"",choiceOneHandler:null,choiceTwoButton:null,choiceTwoTitle:"",choiceTwoHandler:null,choiceOneConn:null,choiceTwoConn:null,postCreate:function(){this.choiceOneHandler=c(this.choiceOneButton,"click",w.hitch(this,"onChoiceOneClick"));this.choiceTwoHandler=
c(this.choiceTwoButton,"click",w.hitch(this,"onChoiceTwoClick"))},postMixInProperties:function(){this.inherited(arguments);this.i18n=w.mixin({},h.common);w.mixin(this.i18n,h.choiceDlg);this.choiceOneTitle=this.i18n.ok;this.choiceTwoTitle=this.i18n.cancel},destroy:function(){this.inherited(arguments);k.isDefined(this.choiceOneConn)&&this.choiceOneConn.remove();k.isDefined(this.choiceTwoConn)&&this.choiceTwoConn.remove()},show:function(g){g.title&&""!==g.title&&(this.title=g.title);g.message&&""!==
g.message&&(this.message=g.message);g.choiceOneTitle&&""!==g.choiceOneTitle&&(this.choiceOneTitle=g.choiceOneTitle);g.choiceTwoTitle&&""!==g.choiceTwoTitle&&(this.choiceTwoTitle=g.choiceTwoTitle);g.choiceOneHandler&&(this.choiceOneHandler=g.choiceOneHandler,this.setChoiceOneHandler());g.choiceTwoHandler&&(this.choiceTwoHandler=g.choiceTwoHandler,this.setChoiceTwoHandler());g.closeHandler&&b.after(this._dialog,"onCancel",g.closeHandler);this._dialog.set("title",this.title);r.set(this.choiceContent,
"innerHTML",this.message);this.choiceOneButton.set("label",this.choiceOneTitle);this.choiceTwoButton.set("label",this.choiceTwoTitle);this._dialog.show()},setChoiceOneHandler:function(){k.isDefined(this.choiceOneConn)&&(this.choiceOneConn.remove(),this.choiceOneConn=void 0);this.choiceOneConn=c(this.choiceOneButton,"click",w.hitch(this,function(){this.hide();this.choiceOneHandler()}))},setChoiceTwoHandler:function(){k.isDefined(this.choiceTwoConn)&&(this.choiceTwoConn.remove(),this.choiceTwoConn=
void 0);this.choiceTwoConn=c(this.choiceTwoButton,"click",w.hitch(this,function(){this.hide();this.choiceTwoHandler()}))},onChoiceOneClick:function(){this.hide()},onChoiceTwoClick:function(){this.hide()},hide:function(){this._dialog.hide()}});d.prototype.statics={getInstance:function(){this._instance||(this._instance=new d);return this._instance}};return d})},"arcgisonline/sharing/dijit/dialog/RegisterApp":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/registry dijit/a11yclick dijit/form/Button dijit/form/Select dijit/form/TextBox dijit/_WidgetBase dgrid/OnDemandList dgrid/Selection dojo/store/Memory dojo/store/Observable esri/domUtils ../../../sharing/util ../../../pages/pageUtil ./GeneralDlg dojo/i18n!../../../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B){return G("arcgisonline.sharing.dijit.dialog.RegisterApp",[k],{declaredClass:"arcgisonline.sharing.dijit.dialog.RegisterApp",baseClass:"esriRegisterApp",onRegister:function(){},onCancel:function(){},postMixInProperties:function(){this.i18n=w.mixin({},B.common);this.i18n=w.mixin(this.i18n,B.registerApp);this._typeOptions=[{value:"browser",label:this.i18n.browser},{value:"native",label:this.i18n.nativeLabel},{value:"server",label:this.i18n.server},
{value:"multiple",label:this.i18n.multiple}]},buildRendering:function(){var C=document.createDocumentFragment({}),z=this._typeOptions;this.fieldSet=f.create("fieldset",{"class":"esriItemLinks fieldset-checkbox"},C);this.roFieldSet=f.create("fieldset",{"class":"readOnly esriItemLinks fieldset-checkbox",style:{display:"none"}},C);f.create("label",{"class":"leader-half font-size-0","for":"appType",innerHTML:this.i18n.appType},this.fieldSet);this._appType=new m({name:"appType",options:z,style:{width:"405px"}},
f.create("input",{},this.fieldSet));f.create("br",{},this.fieldSet);z=f.create("div",{"class":"redirects"},this.fieldSet);f.create("label",{"class":"leader-half font-size-0","for":"redirectUri",innerHTML:this.i18n.redirectUri},z);this._redirectUriTextBox=new n({name:"redirectUri",trim:"true",placeHolder:this.i18n.urlPlaceHolder,"class":"redirect-input margin-right-half"},f.create("input",{},z));this._addBtn=f.create("button",{innerHTML:this.i18n.add,"class":"btn btn-clear leader-quarter",disabled:!0},
z);f.create("span",{innerHTML:"\x26nbsp;"},z);this._delBtn=f.create("button",{innerHTML:this.i18n.del,"class":"btn btn-clear leader-quarter",disabled:!0},z);this._redirectUrisStore=new d(new e);this._redirectUrisSelect=new (G([l,h]))({selectionMode:"toggle",store:this._redirectUrisStore,sort:"id",showHeader:!1,renderRow:function(D,E){return f.create("div",{innerHTML:D.value})}},f.create("div",{"class":"esriLeadingMargin105"},z));this._redirectUrisNew=z;f.create("label",{"class":"leader-half font-size-0",
innerHTML:this.i18n.app_id},this.roFieldSet);this._appId=f.create("span",{"class":"font-size--2"},this.roFieldSet);f.create("br",{},this.roFieldSet);f.create("label",{"class":"leader-half font-size-0",innerHTML:this.i18n.app_secret},this.roFieldSet);this._showSecretLink=f.create("a",{innerHTML:this.i18n.showSecret,href:"#","class":"font-size--2",style:{display:"inline-block"}},this.roFieldSet);this._appSecret=f.create("span",{style:{display:"none"},"class":"font-size--2"},this.roFieldSet);f.create("br",
{},this.roFieldSet);f.create("label",{"class":"leader-half font-size-0",innerHTML:this.i18n.appType},this.roFieldSet);this._appTypeValue=f.create("span",{"class":"font-size--2"},this.roFieldSet);f.create("br",{},this.roFieldSet);f.create("label",{"class":"readMode leader-half font-size-0",innerHTML:this.i18n.redirectUris},this.roFieldSet);this._redirectUris=f.create("span",{"class":"readMode font-size--2"},this.roFieldSet);f.create("br",{"class":"readMode"},this.roFieldSet);this._redirectUrisEdit=
f.create("div",{"class":"editMode",style:{display:"none"}},this.roFieldSet);this.inherited(arguments);this.domNode.appendChild(C)},postCreate:function(){this.own(q(this._showSecretLink,w.hitch(this,function(C){C.preventDefault();c.set(this._appSecret,"display","inline-block");g.hide(this._showSecretLink)})));this.own(q(this._addBtn,w.hitch(this,function(){var C=this._redirectUriTextBox.get("value").split(/[ ,]+/);this._addRedirectUrl(C);this._redirectUriTextBox.set("value","");r.set(this._addBtn,
"disabled",!0)})));this.own(q(this._delBtn,w.hitch(this,function(){var C=this._redirectUrisSelect.get("selection"),z;for(z in C)C.hasOwnProperty(z)&&this._redirectUrisStore.remove(z);r.set(this._delBtn,"disabled",!0)})));this.own(a(this._redirectUrisSelect,"dgrid-select, dgrid-deselect",w.hitch(this,function(){var C=this._redirectUrisSelect.get("selection"),z=0,D;for(D in C)C.hasOwnProperty(D)&&++z;r.set(this._delBtn,"disabled",!z)})));this.own(x.registerKeystrokeHandler(this._redirectUriTextBox,
w.hitch(this,function(C){C=this._redirectUriTextBox.get("value");r.set(this._addBtn,"disabled",!(C&&""!==C))})))},_addRedirectUrl:function(C){v.forEach(C,w.hitch(this,function(z){z&&this._redirectUrisStore.add({id:z,value:z})}))},_getTypeLabel:function(C){for(var z=0;z<this._typeOptions.length;z++)if(this._typeOptions[z].value===C)return this._typeOptions[z].label;return C},_setRegisteredAppInfoAttr:function(C){c.set(this._appSecret,"display","none");c.set(this._showSecretLink,"display","inline-block");
if(this.registeredAppInfo=C)r.set(this._appId,"innerHTML",C.client_id),r.set(this._appSecret,"innerHTML",C.client_secret),this._redirectUrisStore.setData([]),this._addRedirectUrl(C.redirect_uris),r.set(this._redirectUris,"innerHTML",C.redirect_uris.join(", ")),r.set(this._appTypeValue,"innerHTML",this._getTypeLabel(C.appType)),g.hide(this.fieldSet),g.show(this.roFieldSet)},_setEditModeAttr:function(){f.place(this._redirectUrisNew,this._redirectUrisEdit);b(".readMode",this.domNode).forEach(g.hide);
b(".editMode",this.domNode).forEach(g.show)},_setDisabledAttr:function(C){v.forEach(p.findWidgets(this.domNode),function(z){z.set("disabled",C)})},_getValueAttr:function(){var C={appType:this._appType.get("value"),redirect_uris:[]};this._redirectUrisStore.query({}).forEach(function(z){C.redirect_uris.push(z.value)});return C}})})},"arcgisonline/sharing/dijit/dialog/UsageApp":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_WidgetBase,dijit/registry,dgrid/OnDemandGrid,dgrid/Keyboard,dgrid/extensions/ColumnResizer,dojo/store/Observable,dojo/store/Memory,arcgisonline/sharing/util,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/dialog/_UsageDlgMixin"],
function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog.UsageApp");K.require("dijit._WidgetBase");K.require("dijit.registry");K.require("dgrid.OnDemandGrid");K.require("dgrid.Keyboard");K.require("dgrid.extensions.ColumnResizer");K.require("dojo.store.Observable");K.require("dojo.store.Memory");K.require("arcgisonline.sharing.util");K.require("arcgisonline.sharing.geow.Account");K.require("arcgisonline.sharing.dijit.dialog._UsageDlgMixin");K.declare("arcgisonline.sharing.dijit.dialog.UsageApp",
[G._WidgetBase,arcgisonline.sharing.dijit.dialog._UsageDlgMixin],{baseClass:"esriUsageApp",_util:arcgisonline.sharing.util,_acct:arcgisonline.sharing.geow.Account,postMixInProperties:function(){this.inherited(arguments);this._util=arcgisonline.sharing.util;this.i18n=K.mixin({},K.i18n.getLocalization("arcgisonline","arcgisonline").common);this.i18n=K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline","arcgisonline").organizationStatus);this.i18n=K.mixin(this.i18n,K.i18n.getLocalization("arcgisonline",
"arcgisonline").usageDlg);this._svcUrl=esriGeowConfig.restBaseUrl+(esriGeowConfig.restBaseUrl.lastIndexOf("/")===esriGeowConfig.restBaseUrl.length-1?"":"/");this._accountsUri=this._svcUrl+"portals/";this._errorDlg=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();this._type="credits";this.isAdmin=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();this._creditStore=new K.store.Observable(new K.store.Memory({data:{identifier:"id",items:[{id:"stg_tiles",unit:"gbyte",
label:this.i18n.stg_tiles},{id:"stg_features",unit:"gbyte",label:this.i18n.stg_features},{id:"stg_portal",unit:"mbyte",label:this.i18n.stg_portal},{id:"svcusg_portal",unit:"mbyte",label:this.i18n.svcusg_portal},{id:"svcusg_tiles",unit:"gbyte",label:this.i18n.svcusg_tiles},{id:"svcusg_features",unit:"gbyte",label:this.i18n.svcusg_features},{id:"tilegencnt_tiles",unit:"tiles",label:this.i18n.tilegencnt_tiles},{id:"loading_tiles",unit:"tiles",label:this.i18n.loading_tiles},{id:"svcusg_navrproute",unit:"routes",
label:this.i18n.rtmultivehicle},{id:"svcusg_natsproute",unit:"routes",label:this.i18n.rtoptimized},{id:"svcusg_nasimpleroute",unit:"routes",label:this.i18n.rtsimple},{id:"svcusg_nacfroute",unit:"routes",label:this.i18n.rtclosestfacility},{id:"svcusg_naservicearea",unit:"routes",label:this.i18n.rtsvcareas},{id:"geocodecnt_geocode",unit:"locations",label:this.i18n.geocodecnt_geocode},{id:"svcusg_demogmaps",unit:"locations",label:this.i18n.svcusg_demogmaps},{id:"svcusg_geotrigger",unit:"locations",label:this.i18n.svcusg_geotrigger}]}}))},
destroy:function(){this._orgsArr=this._orgs=null;this._customerSelect.destroy();this._selectType.destroy();this._selectDate.destroy();this._customStart.destroy();this._customEnd.destroy();this._showBtn.destroy();this._grid.destroy();this._selectDate=this._customStart=this._customEnd=this._showBtn=this._grid=void 0;this.inherited(arguments)},buildRendering:function(){var v=document.createDocumentFragment();K.create("div",{"class":"title font-size--1 trailer-half",innerHTML:this.i18n.usageAppTitle},
v);var r=K.create("div",{"class":"selects"},v);K.create("label",{innerHTML:this.i18n.showLbl,"class":"inline-block padding-right-half"},r);this._selectType=new G.form.Select({style:"width:100px;","class":"dijitSelectNoMargin",options:[]},K.create("span",{},r));K.create("label",{"class":"customer",style:"display:none;",innerHTML:this.i18n.customerLbl},r);this._customerSelect=new G.form.Select({"class":"customer","class":"dijitSelectNoMargin",style:"width:120px;display:none;",options:[]},K.create("span",
{},r));K.create("label",{style:"text-transform:lowercase;","class":"inline-block padding-left-half padding-right-half","for":"selectDateRange",innerHTML:this.i18n.forLbl},r);this._selectDate=new G.form.Select({style:"width:120px;","class":"dijitSelectNoMargin",options:[]},K.create("span",{},r));this._spinnerNode=K.create("span",{"class":"pleaseWaitImg"},r);r=K.create("div",{"class":"customDate",style:{display:"none"}},v);K.create("label",{"for":"customStart","class":"inline-block padding-right-half",
innerHTML:this.i18n.customStart},r);this._customStart=new G.form.DateTextBox({style:{width:"130px"},"class":"date"},K.create("span",{},r));K.create("label",{"for":"customEnd","class":"inline-block padding-left-1 padding-right-half",innerHTML:this.i18n.customEnd},r);this._customEnd=new G.form.DateTextBox({style:{width:"130px"},"class":"date"},K.create("span",{},r));this._showBtn=new G.form.Button({"class":"margin-left-1",type:"button",label:this.i18n.showReport},K.create("span",{},r));K.create("div",
{id:"grid","class":"grid"},v);r=K.create("div",{"class":"total esriFloatTrailing leader-half"},v);this._totalCredits=K.create("label",{innerHTML:esri.substitute({total:0},this.i18n.total)},r);this.inherited(arguments);this.domNode.appendChild(v)},postCreate:function(){this.inherited(arguments);this.connect(this._selectDate,"onChange",K.hitch(this,"onDateRangeChange"));this.connect(this._selectType,"onChange",K.hitch(this,"onTypeChange"));this.connect(this._showBtn,"onClick",K.hitch(this,"onCustomDateClick"));
this.connect(this._customerSelect,"onChange",K.hitch(this,"onCustomerChange"));this._roleCanManageMarketplace=(this._isCustomRole=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canManageMarketplace();this._loadData()},onDateRangeChange:function(v){"custom"!==v?(this._dateQuery=this._getDateQuery(v),this["users"===this._type?"_queryUsers":"_queryDetails"](this._dateQuery)):(this._customStart.set("value",new Date(this._dateQuery.startTime)),this._customEnd.set("value",
new Date(this._dateQuery.endTime)));K.query(".customDate").style("display","custom"===v?"inline-block":"none")},onTypeChange:function(v){K.query(".customer",this.domNode).style("display","users"===v&&this.isAdmin&&this.listed?"":"none");this._type=v;this["users"===v?"_queryUsers":"_queryDetails"](this._dateQuery)},onCustomerChange:function(v){this["users"===this._type?"_queryUsers":"_queryDetails"](this._dateQuery)},onCustomDateClick:function(){var v=new Date(this._customStart.get("value")),r=new Date(this._customEnd.get("value")),
f=Math.round(Number((r-v)/864E5+1));this._dateQuery={startTime:v.getTime(),endTime:(new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,0,0,0,-1)).getTime(),period:f+(1>=f?"h":"d")};if(this._dateQuery.startTime>this._dateQuery.endTime)this._showError({message:this.i18n.invalidDateRange});else if(this._dateQuery.endTime<this._dateQuery.startTime)this._showError({message:this.i18n.invalidDateRange});else this["users"===this._type?"_queryUsers":"_queryDetails"](this._dateQuery)},_createGrid:function(v){this._grid&&
(this._grid.destroy(),this._grid=void 0);var r=K.declare([dgrid.OnDemandGrid,dgrid.extensions.ColumnResizer]),f={label:{label:this.i18n.creditName},num_total:{label:this.i18n.units,renderCell:K.hitch(this,"_formatUnits")},credits_total:{label:this.i18n.credits,formatter:K.hitch(this,"_formatCredits","esriFloatTrailing",2)}},c={customer:{label:this.i18n.organization},num_logins:{label:this.i18n.users,formatter:K.hitch(this,"_formatCredits","esriFloatLeading",0)}};this._grid=new r({columns:"users"===
this._type?c:f,sort:"users"===this._type?"num_logins":"credits_total",store:v,query:function(a){return-1<a.credits_total||-1<a.num_logins}},K.create("div",{},"grid"))},_setDisabledAttr:function(v){K.forEach(G.registry.findWidgets(this.domNode),function(r){r.set("disabled",v)});K.query(".dijitSelect",this.domNode).forEach(function(r){K[v?"addClass":"removeClass"](r,"dijitTextBoxDisabled")});K.style(this._spinnerNode,"display",!0===v?"inline-block":"none")},_formatCredits:function(v,r,f){return'\x3cspan class\x3d"'+
v+'"\x3e'+Number(f).toFixed(esri._isDefined(r)?r:2)+"\x3c/\x3e"},_formatUnits:function(v,r,f){var c=v.unit;c&&(r=v[(-1!==c.indexOf("byte")?"stg":"num")+"_total"],-1!==c.indexOf("byte")&&(r=this._formatBytes(c,r)),K.attr(f,"innerHTML",esri.substitute({units:r},this.i18n[c])))},_loadData:function(){this._fetchSelf().then(K.hitch(this,function(){this._queryTypeOptions=[{label:this.i18n.credits,value:"credits"}];this._queryTypeOptions.push({label:this.i18n.users,value:"users"});this._usageUrl=this._accountsUri+
this._organization.id+"/usage";this._prepareStores();this._prepareDateQueries(this._organization.created);this._loadCustomerSelect();this._customEnd.constraints.max=new Date;this._customEnd.constraints.min=this._startQueryDate;this._customStart.constraints.max=new Date;this._customStart.constraints.min=this._startQueryDate;this._selectDate.set("options",this._dateQueriesStore.data);this._selectType.set("options",this._queryTypeOptions);this._selectType.set("value","credits");this._creditFilters=K.map(this._creditFilterOptions,
"return item.value");this._prepareDateQueries(this._organization.created);this._dateQuery=this._getDateQuery("last24hours");K.query(".title",this.domNode).attr("innerHTML",this.i18n.usageAppUserTitle);this.isAdmin&&this.listed&&(K.query(".customer",this.domNode).style("display",""),this._selectType.set("value","users"));this._selectDate.set("value","last24Hours")}))},_loadCustomerSelect:function(){if(this.listed&&this.isAdmin)return K.when(this._orgs||this._fetchCustomers()).then(K.hitch(this,function(v){v&&
v.length&&(this._customerSelect.set("options",this._orgsArr),this._customerSelect.set("value",this._orgsArr[0].value,!1))}))},_queryDetails:function(v){var r=v.period;this._customerSelect.get("value");r={appId:this.appId,vars:"credits,num,bw",period:r,groupBy:"etype,stype"};this.set("disabled",!0);this._resetStore();return this._fetchCredits(v,r).then(K.hitch(this,function(f){K.attr(this._totalCredits,"innerHTML",esri.substitute({total:K.number.format(Number(f.creditSum||0),{places:2})},this.i18n.total));
this._createGrid(this._creditStore);this._grid.sort("credits_total","desc");return f}))},_queryUsers:function(v){var r=v.period,f=this._customerSelect.get("value");r={appId:this.appId,vars:"num",period:r,stype:"apploginprovider",etype:"svcusg"};-1!==f&&(r.userorgid=f);this.set("disabled",!0);return this._fetchAppLogins(v,r).then(K.hitch(this,function(c){K.attr(this._totalCredits,"innerHTML","");this._createGrid(new K.store.Memory({data:c}))}))},_resetStore:function(){this._creditStore.query({}).forEach(K.hitch(this,
function(v){K.mixin(v,{credits_total:-1});this._creditStore.put(v)}))},_sumCredits:function(v,r){K.forEach(r,K.hitch(this,function(c){v[c]&&(v[c]=K.map(v[c],"return dojo.number.round(Number(item[1] || 0), 2);"),v[c+"_total"]=K.number.round(w.lang.functional.reduce(v[c],"+")||0,2))}));var f=this._creditStore.get(v.id);this._creditStore.put(K.mixin(f,v));return v},_fetchCredits:function(v,r){var f=K.mixin(K.mixin({},v),r),c;return this._request(this._usageUrl,f).then(K.hitch(this,function(a){a.data=
K.filter(a.data,function(b){return"apploginprovider"!==b.stype&&"applogin"!==b.stype});a.creditSum=0;K.forEach(a.data,K.hitch(this,function(b){b.id=b.etype+"_"+b.stype;if(c=this._sumCredits(b,["stg","num","credits"]))a.creditSum+=c.credits_total}));return a}))},_fetchAppLogins:function(v,r){var f=K.mixin(K.mixin({},v),r),c;return this._request(this._usageUrl,f).then(K.hitch(this,function(a){c=a&&a.data&&a.data[0]||{userOrgId:r.userorgid};return[{orgId:c.userOrgId,num_logins:a.data.length,customer:r.userorgid?
this._orgs[c.userOrgId]&&this._orgs[c.userOrgId].label||c.userOrgId:this.i18n.allCustomers}]}))},_fetchSelf:function(){var v=new K.Deferred;this._acct.getSelf(K.hitch(this,function(r){this._organization=r;v.resolve(r)}),K.hitch(this,function(r){v.reject(r)}));return v},_fetchCustomers:function(){var v=new K.Deferred;this._orgsArr=[];this._orgs={};this._fetchCustomersPaged(0,[],v);return v.then(function(r){K.forEach(r,K.hitch(this,function(f){this._orgs[f.customer.id]||f.provision.provisionedItemId!==
this.itemId||(this._orgs[f.customer.id]={value:f.customer.id,label:f.customer.name},this._orgsArr.push(this._orgs[f.customer.id]))}.bind(this)));this._orgsArr.push(this._orgs[esriGeowConfig.userInfo.orgId]={value:esriGeowConfig.userInfo.orgId,label:esriGeowConfig.self.name});this._orgsArr.sort(function(f,c){return f.label<c.label?-1:f.label>c.label?1:0});this._orgsArr.unshift({value:-1,label:this.i18n.allCustomers});return this._orgsArr}.bind(this))},_fetchCustomersPaged:function(v,r,f){-1===v?f.resolve(r):
this._request(esriGeowConfig.restBaseUrl+"portals/self/customersList",{status:"active",num:100,start:v||0}).then(K.hitch(this,function(c){r=r.concat(c.provisions||[]);this._fetchCustomersPaged(c.nextStart,r,f)}))},_request:function(v,r){var f=K.mixin(r||{},this._requestParams);return this._util.request({url:v,content:f}).then(K.hitch(this,function(c){this.set("disabled",!1);return c.error?this._showError(c.error):c}),K.hitch(this,function(c){this._showError(c);this.set("disabled",!1);throw Error();
}))},_showError:function(v){v=v.error||v||{};v=K.mixin({},{message:v.message,code:v.code||0});v=K.mixin(K.mixin({},this.i18n.errors.error),v);this._errorDlg.show(v)},_toLink:function(v){return"\x3ca onclick\x3d'return false;' href\x3d'#'\x3e"+v+"\x3c/a\x3e"}})})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),
function(K,G,w,v,r,f,c,a,b){function p(k){for(var l=k.length,h=l,e=k[0].length,d=Array(l);l--;)d[l]=Array(e);var g={};for(l=0;l<h;l++)for(var u=d[l],x=k[l],y=0,B=0;y<e;y++){var C=x[B];if("undefined"==typeof u[y]){u[y]=C.id;if(C.rowSpan&&1<C.rowSpan){var z=d;for(var D=C.rowSpan,E=l,A=y,F=C.id,H=1;H<D;H++)z[E+H][A]=F}if(0<l&&C.colSpan&&1<C.colSpan)for(z=1;z<C.colSpan;z++)if(u[++y]=C.id,C.rowSpan&&1<C.rowSpan){D=d;E=C.rowSpan;A=l;F=y;H=C.id;for(var I=1;I<E;I++)D[A+I][F]=H}g[C.id]=k[0][y].id;B++}}return g}
function q(k,l,h,e,d){if(!(0>=h)){var g=k.columns[l];if(g){var u={grid:k,columnId:l,width:h,bubbles:!0,cancelable:!0};e&&(u.parentType=e);if(!k._resizedColumns||G.emit(k.headerNode,"dgrid-columnresize",u))return"auto"===h?delete g.width:(g.width=h,h+="px"),(e=k._columnSizes[l])?e.set("width",h):e=a.addCssRule("#"+a.escapeCssIdentifier(k.domNode.id)+" .dgrid-column-"+a.escapeCssIdentifier(l,"-"),"width: "+h+";"),k._columnSizes[l]=e,!1!==d&&k.resize(),!0}}}var t,m=0,n={create:function(){t=b("div.dgrid-column-resizer")},
destroy:function(){b(t,"!");t=null},show:function(k){k=f.position(k.domNode,!0);t.style.top=k.y+"px";t.style.height=k.h+"px";b(document.body,t)},move:function(k){t.style.left=k+"px"},hide:function(){t.parentNode.removeChild(t)}};return K("dgrid.extensions.ColumnResizer",null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);m++||n.create()},destroy:function(){this.inherited(arguments);for(var k in this._columnSizes)this._columnSizes[k].remove();
--m||n.destroy()},resizeColumnWidth:function(k,l){return q(this,k,l)},configStructure:function(){var k=this._oldColumnSizes=v.mixin({},this._columnSizes),l;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(l in k)l in this._columnSizes||k[l].remove();delete this._oldColumnSizes},_configColumn:function(k){this.inherited(arguments);var l=k.id,h;"width"in k&&((h=this._oldColumnSizes[l])?h.set("width",k.width+"px"):h=a.addCssRule("#"+a.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+
a.escapeCssIdentifier(l,"-"),"width: "+k.width+"px;"),this._columnSizes[l]=h)},renderHeader:function(){this.inherited(arguments);var k=this;if(this.columnSets&&this.columnSets.length)for(var l=this.columnSets.length;l--;)var h=v.mixin(h||{},p(this.columnSets[l]));else this.subRows&&1<this.subRows.length&&(h=p(this.subRows));l=w(".dgrid-cell",k.headerNode);for(var e=l.length;e--;){var d=l[e],g=d.columnId,u=k.columns[g],x=d.childNodes;if(u&&!1!==u.resizable){u=b("div.dgrid-resize-header-container");
for(d.contents=u;0<x.length;)b(u,x[0]);b(d,u,"div.dgrid-resize-handle.resizeNode-"+a.escapeCssIdentifier(g,"-")).columnId=h&&h[g]||g}}k.mouseMoveListen||(G(k.headerNode,".dgrid-resize-handle:mousedown"+(c("touch")?",.dgrid-resize-handle:touchstart":""),function(y){k._resizeMouseDown(y,this);k.mouseMoveListen.resume();k.mouseUpListen.resume()}),k._listeners.push(k.mouseMoveListen=G.pausable(document,"mousemove"+(c("touch")?",touchmove":""),a.throttleDelayed(function(y){k._updateResizerPosition(y)}))),
k._listeners.push(k.mouseUpListen=G.pausable(document,"mouseup"+(c("touch")?",touchend":""),function(y){k._resizeMouseUp(y);k.mouseMoveListen.pause();k.mouseUpListen.pause()})),k.mouseMoveListen.pause(),k.mouseUpListen.pause())},_resizeMouseDown:function(k,l){k.preventDefault();r.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(k);this._targetCell=w(".dgrid-column-"+a.escapeCssIdentifier(l.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(k);n.show(this)},_resizeMouseUp:function(k){var l=
this._columnSizes,h;this.adjustLastColumn&&(h=this.headerNode.clientWidth-1);if(!this._resizedColumns){var e=w(".dgrid-cell",this.headerNode);this.columnSets&&this.columnSets.length?e=e.filter(function(C){return"0"==C.columnId.split("-")[0]&&!(C.columnId in l)}):this.subRows&&1<this.subRows.length&&(e=e.filter(function(C){return"0"==C.columnId.charAt(0)&&!(C.columnId in l)}));var d=e.map(function(C){return C.offsetWidth});e.forEach(function(C,z){q(this,C.columnId,d[z],null,!1)},this);this._resizedColumns=
!0}r.setSelectable(this.domNode,!0);e=this._targetCell;var g=this._getResizeMouseLocation(k)-this._startX,u=e.offsetWidth+g,x=this._getResizedColumnWidths(),y=x.totalWidth;x=x.lastColId;var B=w(".dgrid-column-"+a.escapeCssIdentifier(x,"-"),this.headerNode)[0].offsetWidth;u<this.minWidth&&(u=this.minWidth);q(this,e.columnId,u,k.type)&&e.columnId!=x&&this.adjustLastColumn&&(y+g<h?q(this,x,"auto",k.type):B-g<=this.minWidth&&q(this,x,this.minWidth,k.type));n.hide();delete this._startX;delete this._targetCell},
_updateResizerPosition:function(k){if(this._targetCell){k=this._getResizeMouseLocation(k);var l=this._targetCell.offsetWidth,h=k;l+(k-this._startX)<this.minWidth&&(h=this._startX-(l-this.minWidth));n.move(h)}},_getResizeMouseLocation:function(k){var l=0;k.pageX?l=k.pageX:k.clientX&&(l=k.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return l},_getResizedColumnWidths:function(){var k=0,l=w((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),
h=l.length;if(!h)return{};for(var e=l[h-1].columnId;h--;)k+=l[h].offsetWidth;return{totalWidth:k,lastColId:e}}})})},"arcgisonline/sharing/dijit/dialog/_UsageDlgMixin":function(){define(["dojo","dijit","dojox","dojo/require!dojox/lang/functional,dojo/store/Observable,dojo/store/Memory,dojox/charting/StoreSeries,dojox/charting/widget/Chart2D,dojox/charting/themes/ThreeD,dojox/charting/action2d/MouseZoomAndPan,dojox/charting/action2d/TouchZoomAndPan,dojox/charting/action2d/MouseIndicator,dojo/on,dojo/mouse"],
function(K,G,w){K.provide("arcgisonline.sharing.dijit.dialog._UsageDlgMixin");K.require("dojox.lang.functional");K.require("dojo.store.Observable");K.require("dojo.store.Memory");K.require("dojox.charting.StoreSeries");K.require("dojox.charting.widget.Chart2D");K.require("dojox.charting.themes.ThreeD");K.require("dojox.charting.action2d.MouseZoomAndPan");K.require("dojox.charting.action2d.TouchZoomAndPan");K.require("dojox.charting.action2d.MouseIndicator");K.require("dojo.on");K.require("dojo.mouse");
K.declare("arcgisonline.sharing.dijit.dialog._UsageDlgMixin",null,{_prepareStores:function(){this._dateQueries=[{id:"last24hours",selected:!0,label:this.i18n.last24Hours,value:"last24hours"},{id:"last7days",label:this.i18n.last7Days,value:"last7days"},{id:"last30days",label:this.i18n.last30Days,value:"last30days"},{id:"curmo",label:this.i18n.currentMonth,value:"curmo",param:{startTime:this._getFirstDay(),endTime:this._getToday(),period:(new Date).getDate()-1+"d"}}];this._creditFilterOptions="views"===
this.stype?[{label:this.i18n.views,value:"num"}]:[{label:this.i18n.num,value:"num"},{label:this.i18n.stg,value:"stg"}];this._startQueryDate=new Date((new Date).setDate((new Date(this._getToday())).getDate()-60));this._dataCollectionStartDate=new Date(this._startQueryDate);this._dateQueriesStore=new K.store.Memory({data:{identifier:"id",items:this._dateQueries}});this._creditDetailsStore=new K.store.Observable(new K.store.Memory({data:{label:"alias",identifier:"id",items:[]}}));this._seriesOrder=[];
this._isAdmin=(this._currentUser=this._util.getUser())&&this._currentUser.accountId&&"account_admin"===this._currentUser.role},_prepareDateQueries:function(v){v=new Date(this._getFirstDay(new Date(v)));v=v>=this._dataCollectionStartDate?v:this._dataCollectionStartDate;var r=new Date;var f={};for(r.setMonth(r.getMonth()-1);v<r;)"ja"===K.locale?(f=K.date.locale.format(r,{selector:"date",formatLength:"long"}),f=f.substr(0,8<r.getMonth()?8:7)):f=K.date.locale.format(r,{selector:"date",formatLength:"short",
datePattern:"MMMM_yyy"}),f={id:f,label:f.replace("_"," "),value:f,param:{startTime:this._getFirstDay(r),endTime:this._getLastDay(r),period:"1d"}},this._dateQueriesStore.put(f),r.setMonth(r.getMonth()-1);this._dateQueriesStore.put({id:"custom",label:this.i18n.customDates,value:"custom"})},_getDateQuery:function(v){var r=null;switch(v){case "last24hours":r=K.mixin(this._getTime(24,"h"),{period:"1h"});break;case "last7days":r=K.mixin(this._getTime(7,"d"),{period:"1d"});break;case "last30days":r=K.mixin(this._getTime(30,
"d"),{period:"1d"});break;case "curmo":r={startTime:this._getFirstDay(),endTime:this._getGMTEndToday(),period:"1d"};break;default:r=this._dateQueriesStore.get(v).param}return r},_getGMTEndToday:function(){var v=new Date((new Date).getTime()+6E4*(new Date).getTimezoneOffset());v=new Date(Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()));v.setTime(v.getTime()+864E5);return v.getTime()},_getTime:function(v,r,f){var c=f||new Date;f=new Date(c);c=new Date(c);"d"===r?(c=this._getGMTEndToday(),f=new Date(c-
864E5*v)):"h"===r&&f.setHours(c.getHours()-v+1);return{startTime:(new Date(f)).getTime(),endTime:(new Date(c)).getTime()}},_getFirstDay:function(v){v=v||new Date;return Date.UTC(v.getFullYear(),v.getMonth(),1)},_getLastDay:function(v){v=v||new Date;return Date.UTC(v.getFullYear(),v.getMonth()+1,1)},_getToday:function(v){v=v||new Date;return(new Date(v.getFullYear(),v.getMonth(),v.getDate()+1,0,0,0,-1)).getTime()},_getXAxisLabel:function(v,r){var f=new Date(v+6E4*(new Date).getTimezoneOffset()),c=
f;-1<r.indexOf("m")?c=K.date.locale.format(f,{selector:"date",formatLength:"short",datePattern:"MMMM"}):-1<r.indexOf("d")?c=this._formatDayLabel(f):-1<r.indexOf("h")&&(c=K.date.locale.format(f,{selector:"date",formatLength:"short",datePattern:"k"}));return c},_getXAxis:function(v){var r=new Date(v.startTime+6E4*(new Date).getTimezoneOffset()),f=new Date(v.endTime+6E4*(new Date).getTimezoneOffset());v=v.period;var c=1,a=[];if(!(-1<v.indexOf("y")))if(-1<v.indexOf("m"))for(;r<=f;)a.push({value:K.date.locale.format(r,
{selector:"date",formatLength:"short",datePattern:"MMMM"})}),r.setMonth(r.getMonth()+1);else if(-1<v.indexOf("d"))for(f=f.setDate(f.getDate()+1);r<=f;)a.push({value:c++,text:this._formatDayLabel(r)}),r.setDate(r.getDate()+1);else if(-1<v.indexOf("h"))for(f=f.setHours(f.getHours()+1);r<=f;)a.push({value:c++,text:K.date.locale.format(r,{selector:"date",formatLength:"short",datePattern:"k"})}),r.setHours(r.getHours()+1);return{data:a,max:a.length,min:1}},_formatDayLabel:function(v){var r=K.date.locale.format(v,
{selector:"date",formatLength:"short",datePattern:"d"});v=K.date.locale.format(v,{selector:"date",formatLength:"short",datePattern:"EEE"});return r+(K.isIE||7<=K.has("trident")&&void 0===K.isIE?" - ":"\x3cbr/\x3e")+v},_getYAxis:function(v,r){var f=this._creditDetailsStore.get(v);f=f&&f[r]||[];"bw"===r&&(f=K.map(f,function(b){return b?K.number.round(b/1048576,3):0}));var c=1.1*w.lang.functional.reduce(f,"Math.max(a,b)")||1;var a=w.lang.functional.reduce(f,"Math.min(a,b)")||0;return{data:f,max:1>c?
1:c,min:1>a?0:a}},_postProcessItem:function(v,r){v.id=v.name||this.i18n.all;K.forEach(r,K.hitch(this,function(c){v[c]=K.map(v[c],"return dojo.number.round(Number(item[1] || 0), 2);");v[c+"_total"]=K.number.round(w.lang.functional.reduce(v[c],"+")||0,2)}));var f=this._creditDetailsStore.get(v.id);v=K.mixin(f,v);v.visible=v.visible||this._selectedServices&&-1!==K.indexOf(this._selectedServices,v.id)||!1;this._creditDetailsStore.put(v);return v},_clearUsageChart:function(){this._uChart&&(this._onMouseIndicatorChange.remove(),
this._mouseIndicatorTooltip.close(),this._mouseIndicatorTooltip.destroy(),this._mouseIndicator.destroy(),this._uChart.destroy(),this._uChart=null)},_createUsageChart:function(v,r,f,c){this._uChart&&(this._onMouseOut.remove(),this._onMouseIndicatorChange.remove(),this._mouseIndicatorTooltip.close(),this._mouseIndicatorTooltip.destroy(),this._mouseIndicator.destroy(),this._uChart.destroy(),this._uChart=null);var a=[],b=[],p=0;K.forEach(v[0][r],K.hitch(this,function(n){a.push(this._getXAxisLabel(Number(n[0]),
f.period));b.push(Number(n[1]));Number(n[1])>p&&(p=Number(n[1]))}));var q=this._uChart=new w.charting.Chart2D(c);q.addPlot("default",{type:w.charting.plot2d.Lines,markers:!0});q.addAxis("x",{includeZero:!1,labels:a,minorTicks:!1,fontColor:"#A6A6A6",font:"normal normal normal 1.0em 'Lucida Grande', 'Segoe UI', 'Arial', sans-serif",majorTickStep:1,stroke:{color:"#D5D5D5",width:1},max:a.length+.5,labelFunc:K.hitch(this,function(n,k){return a[k-1]||" "})});q.addAxis("y",{vertical:!0,leftBottom:!0,includeZero:!0,
majorLabels:!0,minorTicks:!1,minorLabels:!1,natural:!0,font:"normal normal normal 1.0em 'Lucida Grande', 'Segoe UI', 'Arial', sans-serif",fontColor:"#A6A6A6",max:Number(p+2)});q.addSeries("Series A",b,{stroke:{color:"#D4D4D4",width:2},fill:"#56A5DB"});this._mouseIndicator=new w.charting.action2d.MouseIndicator(q,"default",{series:"Series A",lines:!1,labels:!1,markers:!1,start:!1,stroke:{type:"stroke",color:"#56A5DB",width:2},fill:"#56A5DB",fontColor:"#FFFFFF",markerFill:"#A6A6A6",markerOutline:{type:"stroke",
color:"#56A5DB",width:2},mouseOver:!0});this._mouseIndicatorTooltip=new G.Tooltip;this._onMouseIndicatorChange=K.on(this._mouseIndicator,"Change",K.hitch(this,function(n){if(n.label){var k=q.getPlot("default").toPage({x:n.start.x,y:t});k.w=1;k.h=1;this._mouseIndicatorTooltip.label=this._formatValue(n.start.y,v[0][r][n.start.x-1][0]);this._mouseIndicatorTooltip.position=["above-centered"];m?(G.Tooltip._masterTT.containerNode.innerHTML=this._mouseIndicatorTooltip.label,G.place.around(G.Tooltip._masterTT.domNode,
k,["above-centered"])):(m=!0,this._mouseIndicatorTooltip.open(k))}else this._mouseIndicatorTooltip.close(),m=!1}));q.render();var t=q.getAxis("y").getScaler().bounds.to,m=!1;this._onMouseOut=K.on(c,K.mouse.leave,K.hitch(this,function(n){this._mouseIndicatorTooltip.close();m=!1}))},_createLineChart:function(v){this._lineChart=(new w.charting.Chart2D(v)).setTheme(w.charting.themes.ThreeD).addAxis("y",{min:0,max:1,vertical:!0}).addPlot("default",{type:"Lines",markers:!0,tension:"S"});new w.charting.action2d.Tooltip(this._lineChart,
"default",{text:K.hitch(this,function(r){var f=r.run&&r.run.data&&r.run.data[r.index],c=this._selectCredit?this._selectCredit.get("value"):"",a=this._creditDetails;if(a[c]&&a[c][r.index]&&a[c][r.index].length){var b=new Date(parseInt(a[c][r.index][0],10)+6E4*(new Date).getTimezoneOffset());b.setDate(b.getDate())}a.stype=a.stype||this.stype;r=-1!==a.stype.indexOf("routing")?"routes":-1!==a.stype.indexOf("geocode")?"locations":-1!==a.stype.indexOf("tiles")?"tiles":-1!==a.stype.indexOf("features")?"features":
-1!==a.stype.indexOf("demogmaps")?"maps":-1!==a.stype.indexOf("geoenrich")?"queries":-1!==a.stype.indexOf("views")?"viewstooltip":"";return this._formatCreditTooltip(c,K.number.format(f,{pattern:"#,###,###,###.##"}),b,r)})});new w.charting.action2d.Magnify(this._lineChart,"default");esri.isTouchEnabled?new w.charting.action2d.TouchZoomAndPan(this._lineChart,"default"):new w.charting.action2d.MouseZoomAndPan(this._lineChart,"default");this._lineChart.render();this._lineLegend=new w.charting.widget.Legend({"class":"legend details esriFloatLeading",
chart:this._lineChart,horizontal:2,outline:!1},this._lineLegend);return this._lineChart},_formatValue:function(v,r){var f=this._selectCredit?this._selectCredit.get("value"):"",c=this._creditDetails;r&&(r=new Date(Number(r)+6E4*(new Date).getTimezoneOffset()),r.setDate(r.getDate()));c.stype=c.stype||this.stype;c=-1!==c.stype.indexOf("routing")?"routes":-1!==c.stype.indexOf("geocode")?"locations":-1!==c.stype.indexOf("tiles")?"tiles":-1!==c.stype.indexOf("features")?"features":-1!==c.stype.indexOf("demogmaps")?
"maps":-1!==c.stype.indexOf("geoenrich")?"queries":-1!==c.stype.indexOf("views")?"viewstooltip":"";return this._formatCreditTooltip(f,K.number.format(v,{pattern:"#,###,###,###.##"}),r,c)},_formatCreditTooltip:function(v,r,f,c){var a;f&&(a=K.date.locale.format(f,{datePattern:"yyyy-MM-dd",selector:"date"})+" GMT");"bw"===v?r=esri.substitute({units:r},this.i18n.mbyte):"num"===v?r=esri.substitute({units:r},this.i18n[c]||this.i18n.requeststooltip):"credits"===v?r=esri.substitute({units:r},this.i18n.creditstooltip):
"views"===v&&(r=esri.substitute({units:r},this.i18n.viewstooltip));return'\x3cdiv style\x3d"text-align: center"\x3e'+r+(a?"\x3cbr /\x3e"+a:"")+"\x3c/div\x3e"},_formatNumber:function(v){return K.number.format(parseInt(v,10),{pattern:"#,###,###,##0"})},_formatBytes:function(v,r){return K.number.format(r/("mbyte"===v?1048576:1073741824),{pattern:"#,###,###,###.##"})},_toFormat:function(v,r){if(r)return"num"===v?this._formatNumber(r):this._formatBytes(v,r)},_resetLineChart:function(){for(var v in this._lineChart.runs)this._lineChart.removeSeries(v)}})})},
"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(K){return K})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(K,G,w,v){var r={};G.mixin(v,{filter:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||K.global;c=v.lambda(c);var b=[],p;if(G.isArray(f)){var q=0;for(p=f.length;q<p;++q){var t=f[q];c.call(a,t,q,f)&&b.push(t)}}else if("function"==typeof f.hasNext&&
"function"==typeof f.next)for(q=0;f.hasNext();)t=f.next(),c.call(a,t,q++,f)&&b.push(t);else for(q in f)q in r||(t=f[q],c.call(a,t,q,f)&&b.push(t));return b},forEach:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||K.global;c=v.lambda(c);var b;if(G.isArray(f)){var p=0;for(b=f.length;p<b;c.call(a,f[p],p,f),++p);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(p=0;f.hasNext();c.call(a,f.next(),p++,f));else for(p in f)p in r||c.call(a,f[p],p,f);return a},map:function(f,c,a){"string"==
typeof f&&(f=f.split(""));a=a||K.global;c=v.lambda(c);var b,p;if(G.isArray(f)){var q=Array(b=f.length);for(p=0;p<b;q[p]=c.call(a,f[p],p,f),++p);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(q=[],p=0;f.hasNext();q.push(c.call(a,f.next(),p++,f)));else for(p in q=[],f)p in r||q.push(c.call(a,f[p],p,f));return q},every:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||K.global;c=v.lambda(c);var b;if(G.isArray(f)){var p=0;for(b=f.length;p<b;++p)if(!c.call(a,f[p],p,f))return!1}else if("function"==
typeof f.hasNext&&"function"==typeof f.next)for(p=0;f.hasNext();){if(!c.call(a,f.next(),p++,f))return!1}else for(p in f)if(!(p in r||c.call(a,f[p],p,f)))return!1;return!0},some:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||K.global;c=v.lambda(c);var b;if(G.isArray(f)){var p=0;for(b=f.length;p<b;++p)if(c.call(a,f[p],p,f))return!0}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(p=0;f.hasNext();){if(c.call(a,f.next(),p++,f))return!0}else for(p in f)if(!(p in r)&&c.call(a,
f[p],p,f))return!0;return!1}});return v})},"dojox/charting/StoreSeries":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred"],function(K,G,w){return G("dojox.charting.StoreSeries",null,{constructor:function(v,r,f){this.store=v;this.kwArgs=r;this.value=f?"function"==typeof f?f:"object"==typeof f?function(c){var a={},b;for(b in f)a[b]=c[f[b]];return a}:function(c){return c[f]}:function(c){return c.value};this.data=[];this._initialRendering=!0;this.fetch()},destroy:function(){this.observeHandle&&
this.observeHandle.remove()},setSeriesObject:function(v){this.series=v},fetch:function(v,r){function f(){c.data=K.map(c.objects,function(b){return c.value(b,c.store)});c._pushDataChanges()}var c=this;this.observeHandle&&this.observeHandle.remove();var a=this.store.query(v||this.kwArgs.query,r||this.kwArgs);w.when(a,function(b){c.objects=b;f()});a.observe&&(this.observeHandle=a.observe(f,!0))},_pushDataChanges:function(){this.series&&(this.series.chart.updateSeries(this.series.name,this,this._initialRendering),
this._initialRendering=!1,this.series.chart.delayedRender())}})})},"dojox/charting/widget/Chart2D":function(){define("dojo/_base/kernel dojo/_base/lang ./Chart ../Chart2D ../action2d/Highlight ../action2d/Magnify ../action2d/MoveSlice ../action2d/Shake ../action2d/Tooltip".split(" "),function(K,G,w){K.deprecated("dojox.charting.widget.Chart2D","Use dojo.charting.widget.Chart instead and require all other components explicitly","2.0");return G.setObject("dojox.charting.widget.Chart2D",w)})},"dojox/charting/widget/Chart":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/_base/declare dojo/query dijit/_WidgetBase ../Chart dojo/has dojo/has!dojo-bidi?../bidi/widget/Chart dojox/lang/utils dojox/lang/functional dojox/lang/functional/lambda".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m){var n=function(u){return u},k=G.getObject("dojox.charting");var l=function(u,x,y){var B=eval("("+x+".prototype.defaultParams)"),C;for(C in B)if(!(C in y)){var z=u.getAttribute(C);y[C]=q.coerceType(B[C],null==z||"undefined"==typeof z?B[C]:z)}x=eval("("+x+".prototype.optionalParams)");for(C in x)C in y||(z=u.getAttribute(C),null!=z&&(y[C]=q.coerceType(x[C],z)))};var h=function(u){var x=u.getAttribute("name"),y=u.getAttribute("type");if(!x)return null;x={name:x,kwArgs:{}};
var B=x.kwArgs;if(y){k.axis2d[y]&&(y=K._scopeName+"x.charting.axis2d."+y);var C=eval("("+y+")");C&&(B.type=C)}else y=K._scopeName+"x.charting.axis2d.Default";l(u,y,B);if(B.font||B.fontColor)B.tick||(B.tick={}),B.font&&(B.tick.font=B.font),B.fontColor&&(B.tick.fontColor=B.fontColor);return x};var e=function(u){var x=u.getAttribute("name"),y=u.getAttribute("type");if(!x)return null;x={name:x,kwArgs:{}};var B=x.kwArgs;if(y){k.plot2d&&k.plot2d[y]&&(y=K._scopeName+"x.charting.plot2d."+y);var C=eval("("+
y+")");C&&(B.type=C)}else y=K._scopeName+"x.charting.plot2d.Default";l(u,y,B);y=eval("("+y+".prototype.baseParams)");for(var z in y)z in B||(C=u.getAttribute(z),B[z]=q.coerceType(y[z],null==C||"undefined"==typeof C?y[z]:C));return x};var d=function(u){var x=u.getAttribute("plot"),y=u.getAttribute("type");x||(x="default");x={plot:x,kwArgs:{}};var B=x.kwArgs;if(y){k.action2d[y]&&(y=K._scopeName+"x.charting.action2d."+y);var C=eval("("+y+")");if(!C)return null;x.action=C}else return null;l(u,y,B);return x};
var g=function(u){u=G.partial(v.get,u);var x=u("name");if(!x)return null;x={name:x,kwArgs:{}};var y=x.kwArgs;var B=u("plot");null!=B&&(y.plot=B);B=u("marker");null!=B&&(y.marker=B);B=u("stroke");null!=B&&(y.stroke=eval("("+B+")"));B=u("outline");null!=B&&(y.outline=eval("("+B+")"));B=u("shadow");null!=B&&(y.shadow=eval("("+B+")"));B=u("fill");null!=B&&(y.fill=eval("("+B+")"));B=u("font");null!=B&&(y.font=B);B=u("fontColor");null!=B&&(y.fontColor=eval("("+B+")"));B=u("legend");null!=B&&(y.legend=B);
B=u("data");if(null!=B)return x.type="data",x.data=B?w.map(String(B).split(","),Number):[],x;B=u("array");if(null!=B)return x.type="data",x.data=eval("("+B+")"),x;B=u("store");if(null!=B){x.type="store";x.data=eval("("+B+")");B=u("field");x.field=null!=B?B:"value";if(B=u("query"))y.query=B;if(B=u("queryOptions"))y.queryOptions=eval("("+B+")");if(B=u("start"))y.start=Number(B);if(B=u("count"))y.count=Number(B);if(B=u("sort"))y.sort=eval("("+B+")");if(B=u("valueFn"))y.valueFn=m.lambda(B);return x}return null};
c=r(b("dojo-bidi")?"dojox.charting.widget.NonBidiChart":"dojox.charting.widget.Chart",c,{theme:null,margins:null,stroke:void 0,fill:void 0,buildRendering:function(){this.inherited(arguments);var u=this.domNode,x=f("\x3e .axis",u).map(h).filter(n),y=f("\x3e .plot",u).map(e).filter(n),B=f("\x3e .action",u).map(d).filter(n),C=f("\x3e .series",u).map(g).filter(n);u.innerHTML="";var z=this.chart=new a(u,{margins:this.margins,stroke:this.stroke,fill:this.fill,textDir:this.textDir});this.theme&&z.setTheme(this.theme);
x.forEach(function(D){z.addAxis(D.name,D.kwArgs)});y.forEach(function(D){z.addPlot(D.name,D.kwArgs)});this.actions=B.map(function(D){return new D.action(z,D.plot,D.kwArgs)});t.foldl(C,function(D,E){if("data"==E.type)z.addSeries(E.name,E.data,E.kwArgs),D=!0;else{z.addSeries(E.name,[0],E.kwArgs);var A={};q.updateWithPattern(A,E.kwArgs,{query:"",queryOptions:null,start:0,count:1},!0);E.kwArgs.sort&&(A.sort=G.clone(E.kwArgs.sort));G.mixin(A,{onComplete:function(F){if("valueFn"in E.kwArgs){var H=E.kwArgs.valueFn;
F=w.map(F,function(I){return H(E.data.getValue(I,E.field,0))})}else F=w.map(F,function(I){return E.data.getValue(I,E.field,0)});z.addSeries(E.name,F,E.kwArgs).render()}});E.data.fetch(A)}return D},!1)&&z.render()},destroy:function(){this.chart.destroy();this.inherited(arguments)},resize:function(u){this.chart.resize.apply(this.chart,arguments)}});return b("dojo-bidi")?r("dojox.charting.widget.Chart",[c,p]):c})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common ./plot2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){function g(A){return A.clear()}function u(A){return A.destroy()}function x(A){return A.dirty=!1}function y(A){return A.dirty=!0}function B(A){return A.name}function C(A,F){A&&F&&(A.min=Math.min(A.min,F.min),A.max=Math.max(A.max,F.max));return A||F}function z(A,F){var H={},I={};w.forEach(A,function(L){var J=H[L.name]=L.getSeriesStats();L.hAxis&&(I[L.hAxis]=C(I[L.hAxis],{min:J.hmin,max:J.hmax}));L.vAxis&&(I[L.vAxis]=C(I[L.vAxis],{min:J.vmin,max:J.vmax}))});
w.forEach(A,function(L){var J=H[L.name];if(L.hAxis){var O=I[L.hAxis];J.hmin=O.min;J.hmax=O.max}L.vAxis&&(O=I[L.vAxis],J.vmin=O.min,J.vmax=O.max);L.initializeScalers(F,J)})}var D=G.getObject("charting",!0,K),E={l:10,t:10,r:10,b:10};K=v(p("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(A,F){F||(F={});this.margins=F.margins||E;this._customMargins=!!F.margins;this.stroke=F.stroke;this.fill=F.fill;this.delayInMs=F.delayInMs||200;this.title=F.title;this.titleGap=
F.titleGap;this.titlePos=F.titlePos;this.titleFont=F.titleFont;this.titleFontColor=F.titleFontColor;this.titleAlign=F.titleAlign;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in F&&(this.htmlLabels=F.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=f.byId(A);var H=c.getMarginBox(A);this.surface=h.createSurface(this.node,H.w||400,H.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){w.forEach(this.series,
u);w.forEach(this.stack,u);d.forIn(this.axes,u);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&a.destroy(this.chartTitle)},getCoords:function(){var A=this.node,F=r.getComputedStyle(A);F=c.getMarginBox(A,F);A=c.position(A,!0);F.x=A.x;F.y=A.y;return F},setTheme:function(A){this.theme=A.clone();this._customMargins||(this.margins=this.theme.chart.margins||E);this.dirty=!0;return this},addAxis:function(A,F){var H=F&&F.type||"Default";if("string"==typeof H){if(!D.axis2d||!D.axis2d[H])throw Error("Can't find axis: "+
H+" - Check require() dependencies.");H=new D.axis2d[H](this,F)}else H=new H(this,F);H.name=A;H.dirty=!0;A in this.axes&&this.axes[A].destroy();this.axes[A]=H;this.dirty=!0;return this},getAxis:function(A){return this.axes[A]},removeAxis:function(A){A in this.axes&&(this.axes[A].destroy(),delete this.axes[A],this.dirty=!0);return this},addPlot:function(A,F){var H=F&&F.type||"Default";if("string"==typeof H){if(!D.plot2d||!D.plot2d[H])throw Error("Can't find plot: "+H+" - didn't you forget to dojo.require() it?");
H=new D.plot2d[H](this,F)}else H=new H(this,F);H.name=A;H.dirty=!0;A in this.plots?(this.stack[this.plots[A]].destroy(),this.stack[this.plots[A]]=H):(this.plots[A]=this.stack.length,this.stack.push(H));this.dirty=!0;return this},getPlot:function(A){return this.stack[this.plots[A]]},removePlot:function(A){if(A in this.plots){var F=this.plots[A];delete this.plots[A];this.stack[F].destroy();this.stack.splice(F,1);d.forIn(this.plots,function(I,L,J){I>F&&(J[L]=I-1)});var H=w.filter(this.series,function(I){return I.plot!=
A});H.length<this.series.length&&(w.forEach(this.series,function(I){I.plot==A&&I.destroy()}),this.runs={},w.forEach(H,function(I,L){this.runs[I.plot]=L},this),this.series=H);this.dirty=!0}return this},getPlotOrder:function(){return d.map(this.stack,B)},setPlotOrder:function(A){var F={},H=d.filter(A,function(I){if(!(I in this.plots)||I in F)return!1;F[I]=1;return!0},this);H.length<this.stack.length&&d.forEach(this.stack,function(I){I=I.name;I in F||H.push(I)});A=d.map(H,function(I){return this.stack[this.plots[I]]},
this);d.forEach(A,function(I,L){this.plots[I.name]=L},this);this.stack=A;this.dirty=!0;return this},movePlotToFront:function(A){if(A in this.plots){var F=this.plots[A];if(F){var H=this.getPlotOrder();H.splice(F,1);H.unshift(A);return this.setPlotOrder(H)}}return this},movePlotToBack:function(A){if(A in this.plots){var F=this.plots[A];if(F<this.stack.length-1){var H=this.getPlotOrder();H.splice(F,1);H.push(A);return this.setPlotOrder(H)}}return this},addSeries:function(A,F,H){F=new m(this,F,H);F.name=
A;A in this.runs?(this.series[this.runs[A]].destroy(),this.series[this.runs[A]]=F):(this.runs[A]=this.series.length,this.series.push(F));this.dirty=!0;!("ymin"in F)&&"min"in F&&(F.ymin=F.min);!("ymax"in F)&&"max"in F&&(F.ymax=F.max);return this},getSeries:function(A){return this.series[this.runs[A]]},removeSeries:function(A){if(A in this.runs){var F=this.runs[A];delete this.runs[A];this.series[F].destroy();this.series.splice(F,1);d.forIn(this.runs,function(H,I,L){H>F&&(L[I]=H-1)});this.dirty=!0}return this},
updateSeries:function(A,F,H){A in this.runs&&(A=this.series[this.runs[A]],A.update(F),H?this.dirty=!0:(this._invalidateDependentPlots(A.plot,!1),this._invalidateDependentPlots(A.plot,!0)));return this},getSeriesOrder:function(A){return d.map(d.filter(this.series,function(F){return F.plot==A}),B)},setSeriesOrder:function(A){var F,H={},I=d.filter(A,function(L){if(!(L in this.runs)||L in H)return!1;var J=this.series[this.runs[L]];if(F){if(J.plot!=F)return!1}else F=J.plot;H[L]=1;return!0},this);d.forEach(this.series,
function(L){var J=L.name;J in H||L.plot!=F||I.push(J)});this.series=d.map(I,function(L){return this.series[this.runs[L]]},this).concat(d.filter(this.series,function(L){return L.plot!=F}));d.forEach(this.series,function(L,J){this.runs[L.name]=J},this);this.dirty=!0;return this},moveSeriesToFront:function(A){if(A in this.runs){var F=this.runs[A],H=this.getSeriesOrder(this.series[F].plot);if(A!=H[0])return H.splice(F,1),H.unshift(A),this.setSeriesOrder(H)}return this},moveSeriesToBack:function(A){if(A in
this.runs){var F=this.runs[A],H=this.getSeriesOrder(this.series[F].plot);if(A!=H[H.length-1])return H.splice(F,1),H.push(A),this.setSeriesOrder(H)}return this},resize:function(A,F){switch(arguments.length){case 1:c.setMarginBox(this.node,A);break;case 2:c.setMarginBox(this.node,{w:A,h:F})}var H=c.getMarginBox(this.node),I=this.surface.getDimensions();return I.width!=H.w||I.height!=H.h?(this.surface.setDimensions(H.w,H.h),this.dirty=!0,this.render()):this},getGeometry:function(){var A={};d.forIn(this.axes,
function(F){F.initialized()&&(A[F.name]={name:F.name,vertical:F.vertical,scaler:F.scaler,ticks:F.ticks})});return A},setAxisWindow:function(A,F,H,I){var L=this.axes[A];L&&(L.setWindow(F,H),w.forEach(this.stack,function(J){if(J.hAxis==A||J.vAxis==A)J.zoom=I}));return this},setWindow:function(A,F,H,I,L){"plotArea"in this||this.calculateGeometry();d.forIn(this.axes,function(J){var O=J.getScaler().bounds;var P=O.span/(O.upper-O.lower);J.vertical?(O=F,P=I/P/O):(O=A,P=H/P/O);J.setWindow(O,P)});w.forEach(this.stack,
function(J){J.zoom=L});return this},zoomIn:function(A,F,H){var I=this.axes[A];if(I){I=I.getScaler().bounds;var L=Math.min(F[0],F[1]),J=Math.max(F[0],F[1]);L=F[0]<I.lower?I.lower:L;J=F[1]>I.upper?I.upper:J;this.setAxisWindow(A,(I.upper-I.lower)/(J-L),L-I.lower);H?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var A=w.filter(this.stack,function(F){return F.dirty||F.hAxis&&this.axes[F.hAxis].dirty||F.vAxis&&this.axes[F.vAxis].dirty},this);z(A,
this.plotArea);return this},fullGeometry:function(){this._makeDirty();w.forEach(this.stack,g);this.theme||this.setTheme(new t);w.forEach(this.series,function(L){if(!(L.plot in this.plots)){if(!D.plot2d||!D.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var J=new D.plot2d.Default(this,{});J.name=L.plot;this.plots[L.plot]=this.stack.length;this.stack.push(J)}this.stack[this.plots[L.plot]].addSeries(L)},this);w.forEach(this.stack,function(L){L.assignAxes&&
L.assignAxes(this.axes)},this);var A=this.dim=this.surface.getDimensions();A.width=h.normalizedLength(A.width);A.height=h.normalizedLength(A.height);d.forIn(this.axes,g);z(this.stack,A);var F=this.offsets={l:0,r:0,t:0,b:0},H=this;d.forIn(this.axes,function(L){p("dojo-bidi")&&H._resetLeftBottom(L);d.forIn(L.getOffsets(),function(J,O){F[O]=Math.max(J,F[O])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||
"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";this.titleAlign=this.titleAlign||this.theme&&this.theme.chart&&this.theme.chart.titleAlign||"middle";var I=h.normalizedLength(h.splitFontString(this.titleFont).size);F["top"==this.titlePos?"t":"b"]+=I+this.titleGap}d.forIn(this.margins,function(L,J){F[J]+=L});this.plotArea={width:A.width-F.l-F.r,height:A.height-F.t-F.b};d.forIn(this.axes,g);z(this.stack,
this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();d.forEachRev(this.stack,function(A){A.render(this.dim,this.offsets)},this);d.forIn(this.axes,function(A){A.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var A=this.offsets,F=this.dim,H=Math.max(0,
F.width-A.l-A.r),I=Math.max(0,F.height-A.t-A.b);w.forEach(this.series,k.purgeGroup);d.forIn(this.axes,k.purgeGroup);w.forEach(this.stack,k.purgeGroup);var L=this.surface.children;if(l.dispose)for(var J=0;J<L.length;++J)l.dispose(L[J]);this.chartTitle&&this.chartTitle.tagName&&a.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(F,A);this._renderPlotBackground(F,A,H,I);d.foldr(this.stack,function(O,P){return P.render(F,A),0},0);this._nativeClip||this._renderChartBackground(F,
A);this.title&&this._renderTitle(F,A);d.forIn(this.axes,function(O){O.render(F,A)});this._makeClean();return this},_renderTitle:function(A,F){var H="canvas"==h.renderer&&this.htmlLabels||!p("ie")&&!p("opera")&&this.htmlLabels?"html":"gfx",I=h.normalizedLength(h.splitFontString(this.titleFont).size),L=h._base._getTextBox(this.title,{font:this.titleFont}),J=this.titleAlign,O=p("dojo-bidi")&&this.isRightToLeft(),P=A.width/2;"edge"===J?(J="left",P=O?A.width-(F.r+L.w):F.l):"middle"!=J&&(O&&(J="left"===
J?"right":"left"),"left"===J?P=this.margins.l:"right"===J&&(J="left",P=A.width-(this.margins.l+L.w)));this.chartTitle=n.createText[H](this,this.surface,P,"top"==this.titlePos?I+this.margins.t:A.height-this.margins.b,J,this.title,this.titleFont,this.titleFontColor)},_renderChartBackground:function(A,F){var H=this.theme,I=void 0!==this.fill?this.fill:H.chart&&H.chart.fill;H=void 0!==this.stroke?this.stroke:H.chart&&H.chart.stroke;if("inherit"==I){var L=this.node;for(I=new b(r.get(L,"backgroundColor"));0==
I.a&&L!=document.documentElement;)I=new b(r.get(L,"backgroundColor")),L=L.parentNode}I&&(this._nativeClip?(I=q.prototype._shapeFill(q.prototype._plotFill(I,A),{x:0,y:0,width:A.width+1,height:A.height+1}),this.surface.createRect({width:A.width+1,height:A.height+1}).setFill(I)):(I=q.prototype._plotFill(I,A,F),F.l&&(L={x:0,y:0,width:F.l,height:A.height+1},this.surface.createRect(L).setFill(q.prototype._shapeFill(I,L))),F.r&&(L={x:A.width-F.r,y:0,width:F.r+1,height:A.height+2},this.surface.createRect(L).setFill(q.prototype._shapeFill(I,
L))),F.t&&(L={x:0,y:0,width:A.width+1,height:F.t},this.surface.createRect(L).setFill(q.prototype._shapeFill(I,L))),F.b&&(L={x:0,y:A.height-F.b,width:A.width+1,height:F.b+2},this.surface.createRect(L).setFill(q.prototype._shapeFill(I,L)))));H&&this.surface.createRect({width:A.width-1,height:A.height-1}).setStroke(H)},_renderPlotBackground:function(A,F,H,I){var L=this.theme,J=L.plotarea&&L.plotarea.fill;L=L.plotarea&&L.plotarea.stroke;var O={x:F.l-1,y:F.t-1,width:H+2,height:I+2};J&&(J=q.prototype._shapeFill(q.prototype._plotFill(J,
A,F),O),this.surface.createRect(O).setFill(J));L&&this.surface.createRect({x:F.l,y:F.t,width:H+1,height:I+1}).setStroke(L)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(G.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(A,F,H){return A in this.plots?this.stack[this.plots[A]].connect(F,H):null},fireEvent:function(A,F,H){if(A in this.runs){var I=this.series[this.runs[A]].plot;I in this.plots&&(I=this.stack[this.plots[I]])&&
I.fireEvent(A,F,H)}return this},_makeClean:function(){w.forEach(this.axes,x);w.forEach(this.stack,x);w.forEach(this.series,x);this.dirty=!1},_makeDirty:function(){w.forEach(this.axes,y);w.forEach(this.stack,y);w.forEach(this.series,y);this.dirty=!0},_invalidateDependentPlots:function(A,F){if(A in this.plots){var H=this.stack[this.plots[A]],I,L=F?"vAxis":"hAxis";H[L]?(I=this.axes[H[L]])&&I.dependOnData()&&(I.dirty=!0,w.forEach(this.stack,function(J){J[L]&&J[L]==H[L]&&(J.dirty=!0)})):H.dirty=!0}},setDir:function(A){return this},
_resetLeftBottom:function(A){},formatTruncatedLabel:function(A,F,H){}});return p("dojo-bidi")?v("dojox.charting.Chart",[K,e]):K})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(K,G,w,v,r){return w("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(f,c){this.chart=f;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol=
"...";this._events=[];c&&c.renderingOptions&&(this.renderingOptions=c.renderingOptions)},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var f=this.getGroup().children;if(r.dispose)for(var c=0;c<f.length;++c)r.dispose(f[c],!0);this.getGroup().rawNode&&G.empty(this.getGroup().rawNode);this.getGroup().clear();r.dispose&&r.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&G.empty(this.group.rawNode),this.group.clear(),r.dispose&&
r.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(K.forEach(this._events,function(a){a.shape.disconnect(a.handle)}),this._events=[]);return this},cleanGroup:function(f){this.destroyHtmlElements();f||(f=this.chart.surface);if(this.group){f=this.getGroup().children;if(r.dispose)for(var c=0;c<f.length;++c)r.dispose(f[c],!0);if(this.getGroup().rawNode){var a=this.getGroup().bgNode;G.empty(this.getGroup().rawNode)}this.getGroup().clear();a&&this.getGroup().rawNode.appendChild(a)}else if(this.group=
f.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(c in this.renderingOptions)this.group.rawNode.setAttribute(c,this.renderingOptions[c]);this.dirty=!0;return this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(K.forEach(this.htmlElements,G.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},overrideShape:function(f,c){},getTextWidth:function(f,c){return v._base._getTextBox(f,
{font:c}).w||0},getTextWithLimitLength:function(f,c,a,b){if(!f||0>=f.length)return{text:"",truncated:b||!1};if(!a||0>=a)return{text:f,truncated:b||!1};var p=f.substring(0,1)+this.trailingSymbol,q=this.getTextWidth(p,c);if(a<=q)return{text:p,truncated:!0};if(this.getTextWidth(f,c)<=a)return{text:f,truncated:b||!1};b=0;for(p=f.length;b<p;){if(2>=p-b){for(;this.getTextWidth(f.substring(0,b)+this.trailingSymbol,c)>a;)--b;return{text:f.substring(0,b)+this.trailingSymbol,truncated:!0}}q=b+Math.round(.618*
(p-b));this.getTextWidth(f.substring(0,q),c)<a?b=q:p=q}},getTextWithLimitCharCount:function(f,c,a,b){return!f||0>=f.length?{text:"",truncated:b||!1}:!a||0>=a||f.length<=a?{text:f,truncated:b||!1}:{text:f.substring(0,a)+this.trailingSymbol,truncated:!0}},_plotFill:function(f,c,a){if(!f||!f.type||!f.space)return f;var b=f.space;switch(f.type){case "linear":if("plot"===b||"shapeX"===b||"shapeY"===b){f=v.makeParameters(v.defaultLinearGradient,f);f.space=b;if("plot"===b||"shapeX"===b){var p=c.height-a.t-
a.b;f.y1=a.t+p*f.y1/100;f.y2=a.t+p*f.y2/100}if("plot"===b||"shapeY"===b)p=c.width-a.l-a.r,f.x1=a.l+p*f.x1/100,f.x2=a.l+p*f.x2/100}break;case "radial":"plot"===b&&(f=v.makeParameters(v.defaultRadialGradient,f),f.space=b,b=c.width-a.l-a.r,c=c.height-a.t-a.b,f.cx=a.l+b*f.cx/100,f.cy=a.t+c*f.cy/100,f.r=f.r*Math.sqrt(b*b+c*c)/200);break;case "pattern":if("plot"===b||"shapeX"===b||"shapeY"===b){f=v.makeParameters(v.defaultPattern,f);f.space=b;if("plot"===b||"shapeX"===b)p=c.height-a.t-a.b,f.y=a.t+p*f.y/
100,f.height=p*f.height/100;if("plot"===b||"shapeY"===b)p=c.width-a.l-a.r,f.x=a.l+p*f.x/100,f.width=p*f.width/100}}return f},_shapeFill:function(f,c){if(!f||!f.space)return f;var a=f.space;switch(f.type){case "linear":if("shape"===a||"shapeX"===a||"shapeY"===a){f=v.makeParameters(v.defaultLinearGradient,f);f.space=a;if("shape"===a||"shapeX"===a){var b=c.width;f.x1=c.x+b*f.x1/100;f.x2=c.x+b*f.x2/100}if("shape"===a||"shapeY"===a)b=c.height,f.y1=c.y+b*f.y1/100,f.y2=c.y+b*f.y2/100}break;case "radial":"shape"===
a&&(f=v.makeParameters(v.defaultRadialGradient,f),f.space=a,f.cx=c.x+c.width/2,f.cy=c.y+c.height/2,f.r=f.r*c.width/200);break;case "pattern":if("shape"===a||"shapeX"===a||"shapeY"===a){f=v.makeParameters(v.defaultPattern,f);f.space=a;if("shape"===a||"shapeX"===a)b=c.width,f.x=c.x+b*f.x/100,f.width=b*f.width/100;if("shape"===a||"shapeY"===a)b=c.height,f.y=c.y+b*f.y/100,f.height=b*f.height/100}}return f},_pseudoRadialFill:function(f,c,a,b,p){if(!f||"radial"!==f.type||"shape"!==f.space)return f;var q=
f.space;f=v.makeParameters(v.defaultRadialGradient,f);f.space=q;if(4>arguments.length)return f.cx=c.x,f.cy=c.y,f.r=f.r*a/100,f;q=5>arguments.length?b:(p+b)/2;return{type:"linear",x1:c.x,y1:c.y,x2:c.x+f.r*a*Math.cos(q)/100,y2:c.y+f.r*a*Math.sin(q)/100,colors:f.colors}}})})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(K,G,w,v,r,f){var c=w("dojox.charting.SimpleTheme",null,
{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(a){a=a||{};var b=c.defaultTheme;G.forEach("chart plotarea axis grid series marker indicator".split(" "),function(p){this[p]=K.delegate(b[p],a[p])},this);a.seriesThemes&&a.seriesThemes.length?(this.colors=null,this.seriesThemes=a.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(a.colors||c.defaultColors).slice(0));this.markerThemes=null;a.markerThemes&&a.markerThemes.length&&(this.markerThemes=a.markerThemes.slice(0));this.markers=
a.markers?K.clone(a.markers):K.delegate(c.defaultMarkers);this.noGradConv=a.noGradConv;this.noRadialConv=a.noRadialConv;a.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var a=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,
noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});G.forEach("clone clear next skip addMixin post getTick".split(" "),function(b){this.hasOwnProperty(b)&&(a[b]=this[b])},this);return a},clear:function(){this._current=0},next:function(a,b,p){var q=r.merge;if(this.colors){var t=K.delegate(this.series);q=K.delegate(this.marker);var m=new v(this.colors[this._current%this.colors.length]);if(t.stroke&&t.stroke.color){t.stroke=K.delegate(t.stroke);var n=new v(t.stroke.color);t.stroke.color=
new v(m);t.stroke.color.a=n.a}else t.stroke={color:m};q.stroke&&q.stroke.color?(q.stroke=K.delegate(q.stroke),n=new v(q.stroke.color),q.stroke.color=new v(m),q.stroke.color.a=n.a):q.stroke={color:m};!t.fill||t.fill.type?t.fill=m:(n=new v(t.fill),t.fill=new v(m),t.fill.a=n.a);!q.fill||q.fill.type?q.fill=m:(n=new v(q.fill),q.fill=new v(m),q.fill.a=n.a)}else t=this.seriesThemes?q(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,q=this.markerThemes?q(this.marker,this.markerThemes[this._current%
this.markerThemes.length]):t;t={series:t,marker:q,symbol:q&&q.symbol||this._markers[this._current%this._markers.length]};++this._current;b&&(t=this.addMixin(t,a,b));p&&(t=this.post(t,a));return t},skip:function(){++this._current},addMixin:function(a,b,p,q){if(K.isArray(p))G.forEach(p,function(m){a=this.addMixin(a,b,m)},this);else{var t={};"color"in p&&("line"==b||"area"==b?(K.setObject("series.stroke.color",p.color,t),K.setObject("marker.stroke.color",p.color,t)):K.setObject("series.fill",p.color,
t));G.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(m){var n="marker"+m.charAt(0).toUpperCase()+m.substr(1),k=n in p;m in p&&(K.setObject("series."+m,p[m],t),k||K.setObject("marker."+m,p[m],t));k&&K.setObject("marker."+m,p[n],t)});"marker"in p&&(t.symbol=p.marker,t.symbol=p.marker);a=r.merge(a,t)}q&&(a=this.post(a,b));return a},post:function(a,b){var p=a.series.fill,q;return!this.noGradConv&&this.shapeSpaces[p.space]&&"linear"==p.type&&("bar"==b?q={x1:p.y1,
y1:p.x1,x2:p.y2,y2:p.x2}:this.noRadialConv||"shape"!=p.space||"slice"!=b&&"circle"!=b||(q={type:"radial",cx:0,cy:0,r:100}),q)?r.merge(a,{series:{fill:q}}):a},getTick:function(a,b){var p=this.axis.tick,q=a+"Tick",t=r.merge;p?this.axis[q]&&(p=t(p,this.axis[q])):p=this.axis[q];b&&(p?b[q]&&(p=t(p,b[q])):p=b[q]);return p},inspectObjects:function(a){G.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){a(this[b])},this);this.seriesThemes&&G.forEach(this.seriesThemes,a);this.markerThemes&&
G.forEach(this.markerThemes,a)},reverseFills:function(){this.inspectObjects(function(a){a&&a.fill&&(a.fill=f.reverse(a.fill))})},addMarker:function(a,b){this.markers[a]=b;this._buildMarkerArray()},setMarkers:function(a){this.markers=a;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var a in this.markers)this._markers.push(this.markers[a])}});K.mixin(c,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",
CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",
fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",
fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});return c})},"dojox/lang/utils":function(){define(["..",
"dojo/_base/lang"],function(K,G){var w=G.getObject("lang.utils",!0,K),v={},r=Object.prototype.toString,f=function(c){if(c)switch(r.call(c)){case "[object Array]":return c.slice(0);case "[object Object]":return G.delegate(c)}return c};G.mixin(w,{coerceType:function(c,a){switch(typeof c){case "number":return Number(eval("("+a+")"));case "string":return String(a);case "boolean":return!!eval("("+a+")")}return eval("("+a+")")},updateWithObject:function(c,a,b){if(!a)return c;for(var p in c)if(p in a&&!(p in
v)){var q=c[p];q&&"object"==typeof q?w.updateWithObject(q,a[p],b):c[p]=b?w.coerceType(q,a[p]):f(a[p])}return c},updateWithPattern:function(c,a,b,p){if(!a||!b)return c;for(var q in b)q in a&&!(q in v)&&(c[q]=p?w.coerceType(b[q],a[q]):f(a[q]));return c},merge:function(c,a){if(a){var b=r.call(c),p=r.call(a);switch(p){case "[object Array]":if(p==b){b=Array(Math.max(c.length,a.length));var q=0;for(p=b.length;q<p;++q)b[q]=w.merge(c[q],a[q]);return b}return a.slice(0);case "[object Object]":if(p==b&&c){b=
G.delegate(c);for(q in a)if(q in c){p=c[q];var t=a[q];t!==p&&(b[q]=w.merge(p,t))}else b[q]=G.clone(a[q]);return b}return G.clone(a)}}return a}});return w})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(K,G,w,v){function r(f,c){if(0>=f)return c[0].color;var a=c.length;if(1<=f)return c[a-1].color;for(var b=0;b<a;++b){var p=c[b];if(p.offset>=f)return b?(a=c[b-1],v.blendColors(new v(a.color),new v(p.color),(f-a.offset)/(p.offset-a.offset))):
p.color}return c[a-1].color}K=K.gradutils={};K.getColor=function(f,c){if(f){switch(f.type){case "linear":var a=w.rotate(-Math.atan2(f.y2-f.y1,f.x2-f.x1));var b=w.project(f.x2-f.x1,f.y2-f.y1),p=w.multiplyPoint(b,c),q=w.multiplyPoint(b,f.x1,f.y1);b=w.multiplyPoint(b,f.x2,f.y2);b=w.multiplyPoint(a,b.x-q.x,b.y-q.y).x;a=w.multiplyPoint(a,p.x-q.x,p.y-q.y).x/b;break;case "radial":a=c.x-f.cx,p=c.y-f.cy,a=Math.sqrt(a*a+p*p)/f.r}return r(a,f.colors)}return new v(f||[0,0,0,0])};K.reverse=function(f){if(f)switch(f.type){case "linear":case "radial":if(f=
G.delegate(f),f.colors){for(var c=f.colors,a=c.length,b=0,p,q=f.colors=Array(c.length);b<a;++b)p=c[b],q[b]={offset:1-p.offset,color:p.color};q.sort(function(t,m){return t.offset-m.offset})}}return f};return K})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(K,G,w){return G("dojox.charting.Series",w,{constructor:function(v,r,f){K.mixin(this,f);"string"!=typeof this.plot&&(this.plot="default");this.update(r)},clear:function(){this.dyn={}},update:function(v){K.isArray(v)?
this.data=v:(this.source=v,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(K,G,w,v,r){var f=K.getObject("dojox.charting.axis2d.common",!0),c=function(a){a.marginLeft="0px";a.marginTop="0px";a.marginRight="0px";a.marginBottom="0px";a.paddingLeft="0px";a.paddingTop="0px";a.paddingRight=
"0px";a.paddingBottom="0px";a.borderLeftWidth="0px";a.borderTopWidth="0px";a.borderRightWidth="0px";a.borderBottomWidth="0px"};return K.mixin(f,{createText:{gfx:function(a,b,p,q,t,m,n,k){return b.createText({x:p,y:q,text:m,align:t}).setFont(n).setFill(k)},html:function(a,b,p,q,t,m,n,k,l){b=G.doc.createElement("div");var h=b.style;a.getTextDir&&(b.dir=a.getTextDir(m));c(h);h.font=n;b.innerHTML=String(m).replace(/\s/g,"\x26nbsp;");h.color=k;h.position="absolute";h.left="-10000px";G.body().appendChild(b);
var e=v.normalizedLength(v.splitFontString(n).size);if(!l)if(b.getBoundingClientRect){var d=b.getBoundingClientRect();d=d.width||d.right-d.left}else d=w.getMarginBox(b).w;"rtl"==b.dir&&(p+=l?l:d);G.body().removeChild(b);h.position="relative";if(l)switch(h.width=l+"px",t){case "middle":h.textAlign="center";h.left=p-l/2+"px";break;case "end":h.textAlign="right";h.left=p-l+"px";break;default:h.left=p+"px",h.textAlign="left"}else switch(t){case "middle":h.left=Math.floor(p-d/2)+"px";break;case "end":h.left=
Math.floor(p-d)+"px";break;default:h.left=Math.floor(p)+"px"}h.top=Math.floor(q-e)+"px";h.whiteSpace="nowrap";l=G.doc.createElement("div");h=l.style;c(h);h.width="0px";h.height="0px";l.appendChild(b);a.node.insertBefore(l,a.node.firstChild);r("dojo-bidi")&&a.htmlElementsRegistry.push([l,p,q,t,m,n,k]);return l}}})})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(K,G,w,v,r,f){var c=
K.getObject("dojox.charting.plot2d.common",!0);return K.mixin(c,{doIfLoaded:f.doIfLoaded,makeStroke:function(a){if(!a)return a;if("string"==typeof a||a instanceof w)a={color:a};return v.makeParameters(v.defaultStroke,a)},augmentColor:function(a,b){var p=new w(a),q=new w(b);q.a=p.a;return q},augmentStroke:function(a,b){var p=c.makeStroke(a);p&&(p.color=c.augmentColor(p.color,b));return p},augmentFill:function(a,b){new w(b);return"string"==typeof a||a instanceof w?c.augmentColor(a,b):a},defaultStats:{vmin:Number.POSITIVE_INFINITY,
vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(a,b){for(var p=K.delegate(c.defaultStats),q=0;q<a.length;++q)for(var t=a[q],m=0;m<t.data.length;m++)if(!b(t.data[m])){if("number"==typeof t.data[m]){m=p.vmin;var n=p.vmax;G.forEach(t.data,function(h,e){if(!b(h)){var d=e+1,g=h;isNaN(g)&&(g=0);p.hmin=Math.min(p.hmin,d);p.hmax=Math.max(p.hmax,d);p.vmin=Math.min(p.vmin,g);p.vmax=Math.max(p.vmax,g)}})}else{var k=p.hmin,l=p.hmax;m=p.vmin;
n=p.vmax;"xmin"in t&&"xmax"in t&&"ymin"in t&&"ymax"in t||G.forEach(t.data,function(h,e){if(!b(h)){var d="x"in h?h.x:e+1,g=h.y;isNaN(d)&&(d=0);isNaN(g)&&(g=0);p.hmin=Math.min(p.hmin,d);p.hmax=Math.max(p.hmax,d);p.vmin=Math.min(p.vmin,g);p.vmax=Math.max(p.vmax,g)}});"xmin"in t&&(p.hmin=Math.min(k,t.xmin));"xmax"in t&&(p.hmax=Math.max(l,t.xmax))}"ymin"in t&&(p.vmin=Math.min(m,t.ymin));"ymax"in t&&(p.vmax=Math.max(n,t.ymax));break}return p},calculateBarSize:function(a,b,p){p||(p=1);var q=(a-2*b.gap)/
p;"minBarSize"in b&&(q=Math.max(q,b.minBarSize));"maxBarSize"in b&&(q=Math.min(q,b.maxBarSize));q=Math.max(q,1);return{size:q,gap:(a-q*p)/2}},collectStackedStats:function(a){var b=K.clone(c.defaultStats);if(a.length){b.hmin=Math.min(b.hmin,1);b.hmax=r.foldl(a,"seed, run -\x3e Math.max(seed, run.data.length)",b.hmax);for(var p=0;p<b.hmax;++p){var q=a[0].data[p];q=q&&("number"==typeof q?q:q.y);isNaN(q)&&(q=0);b.vmin=Math.min(b.vmin,q);for(var t=1;t<a.length;++t){var m=a[t].data[p];m=m&&("number"==typeof m?
m:m.y);isNaN(m)&&(m=0);q+=m}b.vmax=Math.max(b.vmax,q)}}return b},curve:function(a,b){var p=a.slice(0);"x"==b&&(p[p.length]=p[0]);return G.map(p,function(q,t){if(0==t)return"M"+q.x+","+q.y;if(!isNaN(b)){var m=q.x-p[t-1].x;return"C"+(q.x-m/b*(b-1))+","+p[t-1].y+" "+(q.x-m/b)+","+q.y+" "+q.x+","+q.y}if("X"==b||"x"==b||"S"==b){var n=p[t-1];m=p[t];var k=1/6;if(1==t){var l="x"==b?p[p.length-2]:n;k=1/3}else l=p[t-2];if(t==p.length-1){var h="x"==b?p[1]:m;k=1/3}else h=p[t+1];var e=Math.sqrt((m.x-n.x)*(m.x-
n.x)+(m.y-n.y)*(m.y-n.y));var d=Math.sqrt((m.x-l.x)*(m.x-l.x)+(m.y-l.y)*(m.y-l.y));var g=Math.sqrt((h.x-n.x)*(h.x-n.x)+(h.y-n.y)*(h.y-n.y)),u=d*k;k*=g;u>e/2&&k>e/2?(u=e/2,k=e/2):u>e/2?(u=e/2,k=e/2*g/d):k>e/2&&(k=e/2,u=e/2*d/g);"S"==b&&(l==n&&(u=0),m==h&&(k=0));e=n.x+u*(m.x-l.x)/d;l=n.y+u*(m.y-l.y)/d;d=m.x-k*(h.x-n.x)/g;n=m.y-k*(h.y-n.y)/g}return"C"+(e+","+l+" "+d+","+n+" "+m.x+","+m.y)}).join(" ")},getLabel:function(a,b,p){return f.doIfLoaded("dojo/number",function(q){return(b?q.format(a,{places:p}):
q.format(a))||""},function(){return b?a.toFixed(p):a.toString()})},purgeGroup:function(a){return a.purgeGroup()}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(K){var G=function(r,f){return Math.abs(r-f)<=1E-6*(Math.abs(r)+Math.abs(f))},w=K.getObject("dojox.charting.scaler.common",!0),v={};return K.mixin(w,{doIfLoaded:function(r,f,c){if(void 0===v[r])try{v[r]=require(r)}catch(a){v[r]=null}return v[r]?f(v[r]):c()},getNumericLabel:function(r,f,c){var a="";w.doIfLoaded("dojo/number",
function(m){a=(c.fixed?m.format(r,{places:0>f?-f:0}):m.format(r))||""},function(){a=c.fixed?r.toFixed(0>f?-f:0):r.toString()});if(c.labelFunc){var b=c.labelFunc(a,r,f);if(b)return b}if(c.labels){b=c.labels;for(var p=0,q=b.length;p<q;){var t=Math.floor((p+q)/2);b[t].value<r?p=t+1:q=t}if(p<b.length&&G(b[p].value,r))return b[p].text;--p;if(0<=p&&p<b.length&&G(b[p].value,r))return b[p].text;p+=2;if(p<b.length&&G(b[p].value,r))return b[p].text}return a}})})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/kernel","./lambda"],function(K,G,w,v){var r={};K.mixin(v,{foldl:function(f,c,a,b){"string"==typeof f&&(f=f.split(""));b=b||w.global;c=v.lambda(c);var p;if(K.isArray(f)){var q=0;for(p=f.length;q<p;a=c.call(b,a,f[q],q,f),++q);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(q=0;f.hasNext();a=c.call(b,a,f.next(),q++,f));else for(q in f)q in r||(a=c.call(b,a,f[q],q,f));return a},foldl1:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||w.global;
c=v.lambda(c);var b;if(K.isArray(f)){var p=f[0];var q=1;for(b=f.length;q<b;p=c.call(a,p,f[q],q,f),++q);}else if("function"==typeof f.hasNext&&"function"==typeof f.next){if(f.hasNext())for(p=f.next(),q=1;f.hasNext();p=c.call(a,p,f.next(),q++,f));}else for(q in b=!0,f)q in r||(b?(p=f[q],b=!1):p=c.call(a,p,f[q],q,f));return p},foldr:function(f,c,a,b){"string"==typeof f&&(f=f.split(""));b=b||w.global;c=v.lambda(c);for(var p=f.length;0<p;--p,a=c.call(b,a,f[p],p,f));return a},foldr1:function(f,c,a){"string"==
typeof f&&(f=f.split(""));a=a||w.global;c=v.lambda(c);var b=f.length,p=f[b-1];for(--b;0<b;--b,p=c.call(a,p,f[b],b,f));return p},reduce:function(f,c,a){return 3>arguments.length?v.foldl1(f,c):v.foldl(f,c,a)},reduceRight:function(f,c,a){return 3>arguments.length?v.foldr1(f,c):v.foldr(f,c,a)},unfold:function(f,c,a,b,p){p=p||w.global;c=v.lambda(c);a=v.lambda(a);f=v.lambda(f);for(var q=[];!f.call(p,b);q.push(c.call(p,b)),b=a.call(p,b));return q}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang",
"dojo/_base/kernel","./lambda"],function(K,G,w){K.mixin(w,{filterRev:function(v,r,f){"string"==typeof v&&(v=v.split(""));f=f||G.global;r=w.lambda(r);for(var c=[],a,b=v.length-1;0<=b;--b)a=v[b],r.call(f,a,b,v)&&c.push(a);return c},forEachRev:function(v,r,f){"string"==typeof v&&(v=v.split(""));f=f||G.global;r=w.lambda(r);for(var c=v.length-1;0<=c;r.call(f,v[c],c,v),--c);},mapRev:function(v,r,f){"string"==typeof v&&(v=v.split(""));f=f||G.global;r=w.lambda(r);var c=v.length,a=Array(c);--c;for(var b=0;0<=
c;a[b++]=r.call(f,v[c],c,v),--c);return a},everyRev:function(v,r,f){"string"==typeof v&&(v=v.split(""));f=f||G.global;r=w.lambda(r);for(var c=v.length-1;0<=c;--c)if(!r.call(f,v[c],c,v))return!1;return!0},someRev:function(v,r,f){"string"==typeof v&&(v=v.split(""));f=f||G.global;r=w.lambda(r);for(var c=v.length-1;0<=c;--c)if(r.call(f,v[c],c,v))return!0;return!1}});return w})},"dojox/charting/Chart2D":function(){define("dojo/_base/kernel dojo/_base/lang .. ./Chart ./axis2d/Default ./axis2d/Invisible ./plot2d/Default ./plot2d/Lines ./plot2d/Areas ./plot2d/Markers ./plot2d/MarkersOnly ./plot2d/Scatter ./plot2d/Stacked ./plot2d/StackedLines ./plot2d/StackedAreas ./plot2d/Columns ./plot2d/StackedColumns ./plot2d/ClusteredColumns ./plot2d/Bars ./plot2d/StackedBars ./plot2d/ClusteredBars ./plot2d/Grid ./plot2d/Pie ./plot2d/Bubble ./plot2d/Candlesticks ./plot2d/OHLC ./plot2d/Spider".split(" "),
function(K,G,w,v){K.deprecated("dojox.charting.Chart2D","Use dojox.charting.Chart instead and require all other components explicitly","2.0");return G.setObject("dojox.charting.Chart2D",v)})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(K,G,w,v,
r,f,c,a,b,p,q,t,m){c=v(w("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",c,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,
maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(n,k){this.opt=K.clone(this.defaultParams);q.updateWithObject(this.opt,k);q.updateWithPattern(this.opt,k,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0;k&&"position"in k||(this.opt.position=
this.opt.leftBottom?"leftOrBottom":"rightOrTop");this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(n,k){n!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(n,k,l){if(!n.length)return 0;50<n.length&&(n.length=50);K.isObject(n[0])&&(n=t.map(n,function(h){return h.text}));l&&(n=t.map(n,function(h){return 0==K.trim(h).length?"":h.substring(0,l)+this.trailingSymbol},this));n=n.join("\x3cbr\x3e");return p._base._getTextBox(n,
{font:k}).w||0},_getMaxLabelSize:function(n,k,l,h,e,d){if(null==this._maxLabelSize&&6==arguments.length){var g=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var u=K.clone(g);delete u.to;delete u.from;var x=a.buildScaler(n,k,l,u,g.to-g.from);x.minMinorStep=0;this._majorStart=x.major.start;g=a.buildTicks(x,g);if(d&&g){var y=x=0,B=function(z){z.label&&this.push(z.label)},C=[];this.opt.majorLabels&&(G.forEach(g.major,B,C),x=this._groupLabelWidth(C,e,u.maxLabelCharCount),u.maxLabelSize&&(x=
Math.min(u.maxLabelSize,x)));C=[];this.opt.dropLabels&&this.opt.minorLabels&&(G.forEach(g.minor,B,C),y=this._groupLabelWidth(C,e,u.maxLabelCharCount),u.maxLabelSize&&(y=Math.min(u.maxLabelSize,y)));this._maxLabelSize={majLabelW:x,minLabelW:y,majLabelH:d,minLabelH:d}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(n,k,l){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||l!=this._oldSpan)&&Infinity!=n&&-Infinity!=k){this._invalidMaxLabelSize=
!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=l;var h=this.opt,e=this.chart.theme.axis,d=h.rotation%360,g=this.chart.theme.axis.tick.labelGap,u=h.font||e.majorTick&&e.majorTick.font||e.tick&&e.tick.font;e=u?p.normalizedLength(p.splitFontString(u).size):0;u=this._getMaxLabelSize(n,k,l,d,u,e);"number"!=typeof g&&(g=4);if(u&&h.dropLabels){h=Math.abs(Math.cos(d*Math.PI/180));var x=Math.abs(Math.sin(d*Math.PI/180));0>d&&(d+=360);switch(d){case 0:case 180:this.vertical?d=e:(d=u.majLabelW,
e=u.minLabelW);break;case 90:case 270:this.vertical?(d=u.majLabelW,e=u.minLabelW):d=e;break;default:d=this.vertical?Math.min(u.majLabelW,e/h):Math.min(u.majLabelW,e/x),e=Math.min(Math.sqrt(u.minLabelW*u.minLabelW+e*e),this.vertical?e*h+u.minLabelW*x:u.minLabelW*h+e*x)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(d,e)+g;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((d+g)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=
0}this.ticks=a.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var n={l:0,r:0,t:0,b:0};if(!this.scaler)return n;var k=this.opt,l=this.chart.theme.axis,h=this.chart.theme.axis.tick.labelGap,e=k.titleFont||l.title&&l.title.font;l=0==k.titleGap?0:k.titleGap||l.title&&l.title.gap;var d=this.chart.theme.getTick("major",k),g=this.chart.theme.getTick("minor",k);e=e?p.normalizedLength(p.splitFontString(e).size):0;var u=k.rotation%360,x=k.position,y="rightOrTop"!==x,B=Math.abs(Math.cos(u*
Math.PI/180)),C=Math.abs(Math.sin(u*Math.PI/180));this.trailingSymbol=void 0===k.trailingSymbol||null===k.trailingSymbol?this.trailingSymbol:k.trailingSymbol;"number"!=typeof h&&(h=4);0>u&&(u+=360);var z=this._getMaxLabelSize();if(z){var D=Math.ceil(Math.max(z.majLabelW,z.minLabelW))+1,E=Math.ceil(Math.max(z.majLabelH,z.minLabelH))+1;if(this.vertical)switch(z=y?"l":"r",u){case 0:case 180:n[z]="center"===x?0:D;n.t=n.b=E/2;break;case 90:case 270:n[z]=E;n.t=n.b=D/2;break;default:45>=u||180<u&&225>=u?
(n[z]=E*C/2+D*B,n[y?"t":"b"]=E*B/2+D*C,n[y?"b":"t"]=E*B/2):315<u||180>u&&135<u?(n[z]=E*C/2+D*B,n[y?"b":"t"]=E*B/2+D*C,n[y?"t":"b"]=E*B/2):90>u||180<u&&270>u?(n[z]=E*C+D*B,n[y?"t":"b"]=E*B+D*C):(n[z]=E*C+D*B,n[y?"b":"t"]=E*B+D*C)}else switch(z=y?"b":"t",u){case 0:case 180:n[z]="center"===x?0:E;n.l=n.r=D/2;break;case 90:case 270:n[z]=D;n.l=n.r=E/2;break;default:45<=u&&90>=u||225<=u&&270>=u?(n[z]=E*B/2+D*C,n[y?"r":"l"]=E*C/2+D*B,n[y?"l":"r"]=E*C/2):90<=u&&135>=u||270<=u&&315>=u?(n[z]=E*B/2+D*C,n[y?"l":
"r"]=E*C/2+D*B,n[y?"r":"l"]=E*C/2):45>u||180<u&&225>u?(n[z]=E*B+D*C,n[y?"r":"l"]=E*C+D*B):(n[z]=E*B+D*C,n[y?"l":"r"]=E*C+D*B)}n[z]="center"===x?0:n[z]+(h+Math.max(0<d.length?d.length:0,0<g.length?g.length:0)+(k.title?e+l:0))}return n},cleanGroup:function(n){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(n,
k,l,h,e,d,g,u,x){if(!this.opt.enableCache||"html"==n)return b.createText[n](this.chart,k,l,h,e,d,g,u,x);0<this._textFreePool.length?(n=this._textFreePool.pop(),n.setShape({x:l,y:h,text:d,align:e}),k.add(n)):n=b.createText[n](this.chart,k,l,h,e,d,g,u);this._textUsePool.push(n);return n},createLine:function(n,k){if(this.opt.enableCache&&0<this._lineFreePool.length){var l=this._lineFreePool.pop();l.setShape(k);n.add(l)}else l=n.createLine(k);this.opt.enableCache&&this._lineUsePool.push(l);return l},
render:function(n,k){var l,h=this._isRtl();if(!this.dirty||!this.scaler)return this;var e=this.opt;var d=this.chart.theme.axis;var g=e.position,u="rightOrTop"!==g,x=e.rotation%360,y=0;y=this.chart.theme.axis.tick.labelGap;var B=e.font||d.majorTick&&d.majorTick.font||d.tick&&d.tick.font,C=e.titleFont||d.title&&d.title.font,z=e.fontColor||d.majorTick&&d.majorTick.fontColor||d.tick&&d.tick.fontColor||"black",D=e.titleFontColor||d.title&&d.title.fontColor||"black";var E=0==e.titleGap?0:e.titleGap||d.title&&
d.title.gap||15;var A=e.titleOrientation||d.title&&d.title.orientation||"axis",F=this.chart.theme.getTick("major",e),H=this.chart.theme.getTick("minor",e),I=this.chart.theme.getTick("micro",e),L="stroke"in e?e.stroke:d.stroke,J=B?p.normalizedLength(p.splitFontString(B).size):0;var O=Math.abs(Math.cos(x*Math.PI/180));var P=Math.abs(Math.sin(x*Math.PI/180));var fa=C?p.normalizedLength(p.splitFontString(C).size):0;"number"!=typeof y&&(y=4);0>x&&(x+=360);var V=this._getMaxLabelSize();V=V&&V.majLabelW;
if(this.vertical){var ba=n.height-k.b;var ka=void 0;var la=k.t;var ma=void 0;d=(n.height-k.b+k.t)/2;var ha=void 0;P=J*P+(V||0)*O+y+Math.max(0<F.length?F.length:0,0<H.length?H.length:0)+fa+E;var Z=0;var W=-1;var Q=l=0;E=1;O=0;var ia=y;var R=0;switch(x){case 0:var S="end";Q=.4*J;break;case 90:S="middle";l=-J;break;case 180:S="start";Q=.4*-J;break;case 270:S="middle";break;default:45>x?(S="end",Q=.4*J):90>x?(S="end",Q=.4*J):135>x?S="start":225>x?(S="start",Q=.4*-J):270>x?(S="start",l=u?0:.4*J):315>x?
(S="end",l=u?0:.4*J):(S="end",Q=.4*J)}if(u)ka=ma="center"===g?n.width/2:k.l,y=A&&"away"==A?90:270,ha=k.l-P+(270==y?fa:0),E=-1,ia=-ia;else switch(ka=ma=n.width-k.r,y=A&&"axis"==A?90:270,ha=n.width-k.r+P-(270==y?0:fa),S){case "start":S="end";break;case "end":S="start";break;case "middle":l+=J}}else{ka=k.l;ba=void 0;ma=n.width-k.r;la=void 0;ha=(n.width-k.r+k.l)/2;d=void 0;P=J*O+(V||0)*P+y+Math.max(0<F.length?F.length:0,0<H.length?H.length:0)+fa+E;Z=h?-1:1;E=Q=l=W=0;O=1;ia=0;R=y;switch(x){case 0:S="middle";
Q=J;break;case 90:S="start";l=.4*-J;break;case 180:S="middle";break;case 270:S="end";l=.4*J;break;default:45>x?(S="start",Q=u?J:0):135>x?(S="start",l=.4*-J):180>x?(S="start",Q=u?0:-J):225>x?(S="end",Q=u?0:-J):315>x?(S="end",Q=u?.4*J:0):(S="end",Q=u?J:0)}if(u)ba=la="center"===g?n.height/2:n.height-k.b,y=A&&"axis"==A?180:0,d=n.height-k.b+P-(y?fa:0);else switch(ba=la=k.t,y=A&&"away"==A?180:0,d=k.t-P+(y?0:fa),O=-1,R=-R,S){case "start":S="end";break;case "end":S="start";break;case "middle":Q-=J}}this.cleanGroup();
var N=this.group;g=this.scaler;u=this.ticks;var X=a.getTransformerFromModel(this.scaler),aa=e.title&&y||x||!this.opt.htmlLabels||w("ie")||w("opera")?"gfx":"html",ea=E*F.length,Y=O*F.length,T=this._skipInterval;N.createLine({x1:ka,y1:ba,x2:ma,y2:la}).setStroke(L);e.title&&(C=b.createText[aa](this.chart,N,ha,d,"middle",e.title,C,D),"html"==aa?this.htmlElements.push(C):C.setTransform(p.matrix.rotategAt(y,ha,d)));if(null==u)return this.dirty=!1,this;var ca=0<u.major.length?(u.major[0].value-this._majorStart)/
g.major.tick:0,M=this.opt.majorLabels;G.forEach(u.major,function(U,da){var ja=X(U.value),na=(h?ma:ka)+Z*ja,oa=ba+W*ja;da+=ca;this.createLine(N,{x1:na,y1:oa,x2:na+ea,y2:oa+Y}).setStroke(F);if(U.label&&(!T||0==(da-(1+T))%(1+T))){var ra=e.maxLabelCharCount?this.getTextWithLimitCharCount(U.label,B,e.maxLabelCharCount):{text:U.label,truncated:!1};ra=e.maxLabelSize?this.getTextWithLimitLength(ra.text,B,e.maxLabelSize,ra.truncated):ra;ja=this.createText(aa,N,na+(0<F.length?ea:0)+ia+(x?0:l),oa+(0<F.length?
Y:0)+R+(x?0:Q),S,ra.text,B,z);ra.truncated&&this.chart.formatTruncatedLabel(ja,U.label,aa);ra.truncated&&this.labelTooltip(ja,this.chart,U.label,ra.text,B,aa);"html"==aa?this.htmlElements.push(ja):x&&ja.setTransform([{dx:l,dy:Q},p.matrix.rotategAt(x,na+(0<F.length?ea:0)+ia,oa+(0<F.length?Y:0)+R)])}},this);ea=E*H.length;Y=O*H.length;M=this.opt.minorLabels&&g.minMinorStep<=g.minor.tick*g.bounds.scale;G.forEach(u.minor,function(U){var da=X(U.value),ja=(h?ma:ka)+Z*da,na=ba+W*da;this.createLine(N,{x1:ja,
y1:na,x2:ja+ea,y2:na+Y}).setStroke(H);if(M&&U.label){var oa=e.maxLabelCharCount?this.getTextWithLimitCharCount(U.label,B,e.maxLabelCharCount):{text:U.label,truncated:!1};oa=e.maxLabelSize?this.getTextWithLimitLength(oa.text,B,e.maxLabelSize,oa.truncated):oa;da=this.createText(aa,N,ja+(0<H.length?ea:0)+ia+(x?0:l),na+(0<H.length?Y:0)+R+(x?0:Q),S,oa.text,B,z);oa.truncated&&this.chart.formatTruncatedLabel(da,U.label,aa);oa.truncated&&this.labelTooltip(da,this.chart,U.label,oa.text,B,aa);"html"==aa?this.htmlElements.push(da):
x&&da.setTransform([{dx:l,dy:Q},p.matrix.rotategAt(x,ja+(0<H.length?ea:0)+ia,na+(0<H.length?Y:0)+R)])}},this);ea=E*I.length;Y=O*I.length;G.forEach(u.micro,function(U){var da=X(U.value);U=ka+Z*da;da=ba+W*da;this.createLine(N,{x1:U,y1:da,x2:U+ea,y2:da+Y}).setStroke(I)},this);this.dirty=!1;return this},labelTooltip:function(n,k,l,h,e,d){var g=["dijit/Tooltip"],u={type:"rect"},x=["above","below"];h=p._base._getTextBox(h,{font:e}).w||0;e=e?p.normalizedLength(p.splitFontString(e).size):0;"html"==d?(K.mixin(u,
f.position(n.firstChild,!0)),u.width=Math.ceil(h),u.height=Math.ceil(e),this._events.push({shape:dojo,handle:r.connect(n.firstChild,"onmouseover",this,function(y){require(g,function(B){B.show(l,u,x)})})}),this._events.push({shape:dojo,handle:r.connect(n.firstChild,"onmouseout",this,function(y){require(g,function(B){B.hide(u)})})})):(d=n.getShape(),k=k.getCoords(),u=K.mixin(u,{x:d.x-h/2,y:d.y}),u.x+=k.x,u.y+=k.y,u.x=Math.round(u.x),u.y=Math.round(u.y),u.width=Math.ceil(h),u.height=Math.ceil(e),this._events.push({shape:n,
handle:n.connect("onmouseenter",this,function(y){require(g,function(B){B.show(l,u,x)})})}),this._events.push({shape:n,handle:n.connect("onmouseleave",this,function(y){require(g,function(B){B.hide(u)})})}))},_isRtl:function(){return!1}});return w("dojo-bidi")?v("dojox.charting.axis2d.Default",[c,m]):c})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(K,G,w,v,r){return G("dojox.charting.axis2d.Invisible",
w,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(f,c){this.opt=K.clone(this.defaultParams);r.updateWithObject(this.opt,c);r.updateWithPattern(this.opt,c,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},
initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(f,c){this.scale=f;this.offset=c;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(f,c,a,b){if(this.initialized())return this;var p=this.opt;this.labels=p.labels;this.scaler=(b||v).buildScaler(f,c,a,p);var q=this.scaler.bounds;"scale"in this&&(p.from=q.lower+this.offset,p.to=(q.upper-q.lower)/
this.scale+p.from,!isFinite(p.from)||isNaN(p.from)||!isFinite(p.to)||isNaN(p.to)||p.to-p.from>=q.upper-q.lower?(delete p.from,delete p.to,delete this.scale,delete this.offset):(p.from<q.lower?(p.to+=q.lower-p.from,p.from=q.lower):p.to>q.upper&&(p.from+=q.upper-p.to,p.to=q.upper),this.offset=p.from-q.lower),this.scaler=(b||v).buildScaler(f,c,a,p),q=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},
"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(K,G){return K("dojox.charting.axis2d.Base",G,{constructor:function(w,v){this.vertical=v&&v.vertical;this.opt={};this.opt.min=v&&v.min;this.opt.max=v&&v.max},clear:function(){return this},initialized:function(){return!1},calculate:function(w,v,r){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(w,v){this.dirty=!1;return this},
isNullValue:function(w){return!1},naturalBaseline:0})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(K,G){function w(c,a){c=c.toLowerCase();for(var b=a.length-1;0<=b;--b)if(c===a[b])return!0;return!1}var v=K.getObject("dojox.charting.scaler.linear",!0),r=G.getNumericLabel,f=function(c,a,b,p,q,t,m){b=K.delegate(b);p||("major"==b.fixUpper&&(b.fixUpper="minor"),"major"==b.fixLower&&(b.fixLower="minor"));q||("minor"==b.fixUpper&&(b.fixUpper="micro"),"minor"==
b.fixLower&&(b.fixLower="micro"));t||("micro"==b.fixUpper&&(b.fixUpper="none"),"micro"==b.fixLower&&(b.fixLower="none"));var n=w(b.fixLower,["major"])?Math.floor(b.min/p)*p:w(b.fixLower,["minor"])?Math.floor(b.min/q)*q:w(b.fixLower,["micro"])?Math.floor(b.min/t)*t:b.min,k=w(b.fixUpper,["major"])?Math.ceil(b.max/p)*p:w(b.fixUpper,["minor"])?Math.ceil(b.max/q)*q:w(b.fixUpper,["micro"])?Math.ceil(b.max/t)*t:b.max;b.useMin&&(c=n);b.useMax&&(a=k);var l=!p||b.useMin&&w(b.fixLower,["major"])?c:Math.ceil(c/
p)*p,h=!q||b.useMin&&w(b.fixLower,["major","minor"])?c:Math.ceil(c/q)*q,e=!t||b.useMin&&w(b.fixLower,["major","minor","micro"])?c:Math.ceil(c/t)*t,d=p?(b.useMax&&w(b.fixUpper,["major"])?Math.round((a-l)/p):Math.floor((a-l)/p))+1:0,g=q?(b.useMax&&w(b.fixUpper,["major","minor"])?Math.round((a-h)/q):Math.floor((a-h)/q))+1:0;b=t?(b.useMax&&w(b.fixUpper,["major","minor","micro"])?Math.round((a-e)/t):Math.floor((a-e)/t))+1:0;var u=q?Math.round(p/q):0,x=t?Math.round(q/t):0,y=p?Math.floor(Math.log(p)/Math.LN10):
0,B=q?Math.floor(Math.log(q)/Math.LN10):0,C=m/(a-c);isFinite(C)||(C=1);return{bounds:{lower:n,upper:k,from:c,to:a,scale:C,span:m},major:{tick:p,start:l,count:d,prec:y},minor:{tick:q,start:h,count:g,prec:B},micro:{tick:t,start:e,count:b,prec:0},minorPerMajor:u,microPerMinor:x,scaler:v}};return K.mixin(v,{buildScaler:function(c,a,b,p,q,t){var m={fixUpper:"none",fixLower:"none",natural:!1};p&&("fixUpper"in p&&(m.fixUpper=String(p.fixUpper)),"fixLower"in p&&(m.fixLower=String(p.fixLower)),"natural"in
p&&(m.natural=!!p.natural));t=!t||3>t?3:t;"min"in p&&(c=p.min);"max"in p&&(a=p.max);p.includeZero&&(0<c&&(c=0),0>a&&(a=0));m.min=c;m.useMin=!0;m.max=a;m.useMax=!0;"from"in p&&(c=p.from,m.useMin=!1);"to"in p&&(a=p.to,m.useMax=!1);if(a<=c)return f(c,a,m,0,0,0,b);q||(q=a-c);q=Math.floor(Math.log(q)/Math.LN10);q=p&&"majorTickStep"in p?p.majorTickStep:Math.pow(10,q);var n=0,k=0;if(p&&"minorTickStep"in p)n=p.minorTickStep;else{do{n=q/10;if(!m.natural||.9<n){var l=f(c,a,m,q,n,0,b);if(l.bounds.scale*l.minor.tick>
t)break}n=q/5;if(!m.natural||.9<n)if(l=f(c,a,m,q,n,0,b),l.bounds.scale*l.minor.tick>t)break;n=q/2;if(!m.natural||.9<n)if(l=f(c,a,m,q,n,0,b),l.bounds.scale*l.minor.tick>t)break;return f(c,a,m,q,0,0,b)}while(0)}if(p&&"microTickStep"in p)k=p.microTickStep,l=f(c,a,m,q,n,k,b);else{do{k=n/10;if(!m.natural||.9<k)if(l=f(c,a,m,q,n,k,b),3<l.bounds.scale*l.micro.tick)break;k=n/5;if(!m.natural||.9<k)if(l=f(c,a,m,q,n,k,b),3<l.bounds.scale*l.micro.tick)break;k=n/2;if(!m.natural||.9<k)if(l=f(c,a,m,q,n,k,b),3<l.bounds.scale*
l.micro.tick)break;k=0}while(0)}return k?l:f(c,a,m,q,n,0,b)},buildTicks:function(c,a){var b=c.major.start,p=c.minor.start,q=c.micro.start;if(a.microTicks&&c.micro.tick){var t=c.micro.tick;var m=q}else if(a.minorTicks&&c.minor.tick)t=c.minor.tick,m=p;else if(c.major.tick)t=c.major.tick,m=b;else return null;var n=1/c.bounds.scale;if(c.bounds.to<=c.bounds.from||isNaN(n)||!isFinite(n)||0>=t||isNaN(t)||!isFinite(t))return null;for(var k=[],l=[],h=[];m<=c.bounds.to+n;){if(Math.abs(b-m)<t/2){var e={value:b};
a.majorLabels&&(e.label=r(b,c.major.prec,a));k.push(e);b+=c.major.tick;p+=c.minor.tick}else Math.abs(p-m)<t/2?(a.minorTicks&&(e={value:p},a.minorLabels&&c.minMinorStep<=c.minor.tick*c.bounds.scale&&(e.label=r(p,c.minor.prec,a)),l.push(e)),p+=c.minor.tick):a.microTicks&&h.push({value:q});q+=c.micro.tick;m+=t}return{major:k,minor:l,micro:h}},getTransformerFromModel:function(c){var a=c.bounds.from,b=c.bounds.scale;return function(p){return(p-a)*b}},getTransformerFromPlot:function(c){var a=c.bounds.from,
b=c.bounds.scale;return function(p){return p/b+a}}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),function(K,G,w,v,r,f,c,a,b,p){return G("dojox.charting.plot2d.Default",[r,f],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},
filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(q,t){this.opt=K.clone(K.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,t);b.updateWithPattern(this.opt,t,this.optionalParams);this.animate=this.opt.animate},createPath:function(q,t,m){if(this.opt.enableCache&&0<q._pathFreePool.length){var n=q._pathFreePool.pop();n.setShape(m);t.add(n)}else n=t.createPath(m);
this.opt.enableCache&&q._pathUsePool.push(n);return n},buildSegments:function(q,t){for(var m=this.series[q],n=t?Math.min(m.data.length,Math.ceil(this._hScaler.bounds.to)):m.data.length,k=null,l=[],h=t?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;h<n;h++)if(!this.isNullValue(m.data[h]))k||(k=[],l.push({index:h,rseg:k})),k.push(t&&m.data[h].hasOwnProperty("y")?m.data[h].y:m.data[h]);else if(!this.opt.interpolate||t)k=null;return l},render:function(q,t){if(this.zoom&&!this.isDataDirty())return this.performZoom(q,
t);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){w.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();this.getGroup().setTransform(null);var m=this.getGroup();a.forEachRev(this.series,function(la){la.cleanGroup(m)})}for(var n=this.chart.theme,k,l,h=this.events(),e=0;e<this.series.length;e++){var d=this.series[e];if(this.dirty||d.dirty)if(d.cleanGroup(),this.opt.enableCache&&(d._pathFreePool=(d._pathFreePool?d._pathFreePool:[]).concat(d._pathUsePool?d._pathUsePool:
[]),d._pathUsePool=[]),d.data.length){var g=n.next(this.opt.areas?"area":"line",[this.opt,d],!0),u=this._hScaler.scaler.getTransformerFromModel(this._hScaler),x=this._vScaler.scaler.getTransformerFromModel(this._vScaler),y=this._eventSeries[d.name]=Array(d.data.length);m=d.group;if(d.hidden){this.opt.lines&&(d.dyn.stroke=g.series.stroke);if(d.markers||void 0===d.markers&&this.opt.markers)d.dyn.markerFill=g.marker.fill,d.dyn.markerStroke=g.marker.stroke,d.dyn.marker=g.symbol;this.opt.areas&&(d.dyn.fill=
g.series.fill)}else{for(var B=w.some(d.data,function(la){return"number"==typeof la||la&&!la.hasOwnProperty("x")}),C=this.buildSegments(e,B),z=0;z<C.length;z++){var D=C[z];var E=B?w.map(D.rseg,function(la,ma){return{x:u(ma+D.index+1)+t.l,y:q.height-t.b-x(la),data:la}},this):w.map(D.rseg,function(la){return{x:u(la.x)+t.l,y:q.height-t.b-x(la.y),data:la}},this);if(B&&this.opt.interpolate)for(;z<C.length;)z++,(D=C[z])&&(E=E.concat(w.map(D.rseg,function(la,ma){return{x:u(ma+D.index+1)+t.l,y:q.height-t.b-
x(la),data:la}},this)));var A=this.opt.tension?c.curve(E,this.opt.tension):"";if(this.opt.areas&&1<E.length){var F=this._plotFill(g.series.fill,q,t),H=K.clone(E),I=q.height-t.b;isNaN(this.opt.zeroLine)||(I=Math.max(t.t,Math.min(q.height-t.b-x(this.opt.zeroLine),I)));this.opt.tension?d.dyn.fill=m.createPath(A+" L"+(H[H.length-1].x+","+I+" L"+H[0].x+","+I+" L"+H[0].x+","+H[0].y)).setFill(F).getFill():(H.push({x:E[E.length-1].x,y:I}),H.push({x:E[0].x,y:I}),H.push(E[0]),d.dyn.fill=m.createPolyline(H).setFill(F).getFill())}if(this.opt.lines||
this.opt.markers)k=g.series.stroke,g.series.outline&&(l=d.dyn.outline=c.makeStroke(g.series.outline),l.width=2*l.width+(k&&k.width||0));this.opt.markers&&(d.dyn.marker=g.symbol);var L=null,J=null,O=null;if(k&&g.series.shadow&&1<E.length){var P=g.series.shadow;F=w.map(E,function(la){return{x:la.x+P.dx,y:la.y+P.dy}});this.opt.lines&&(d.dyn.shadow=this.opt.tension?m.createPath(c.curve(F,this.opt.tension)).setStroke(P).getStroke():m.createPolyline(F).setStroke(P).getStroke());this.opt.markers&&g.marker.shadow&&
(P=g.marker.shadow,O=w.map(F,function(la){return this.createPath(d,m,"M"+la.x+" "+la.y+" "+g.symbol).setStroke(P).setFill(P.color)},this))}if(this.opt.lines&&1<E.length){var fa;l&&(d.dyn.outline=this.opt.tension?m.createPath(A).setStroke(l).getStroke():m.createPolyline(E).setStroke(l).getStroke());d.dyn.stroke=this.opt.tension?(fa=m.createPath(A)).setStroke(k).getStroke():(fa=m.createPolyline(E)).setStroke(k).getStroke();fa.setFilter&&g.series.filter&&fa.setFilter(g.series.filter)}A=null;if(this.opt.markers){var V=
g;L=Array(E.length);J=Array(E.length);l=null;V.marker.outline&&(l=c.makeStroke(V.marker.outline),l.width=2*l.width+(V.marker.stroke?V.marker.stroke.width:0));w.forEach(E,function(la,ma){if(this.opt.styleFunc||"number"!=typeof la.data){var ha="number"!=typeof la.data?[la.data]:[];this.opt.styleFunc&&ha.push(this.opt.styleFunc(la.data));V=n.addMixin(g,"marker",ha,!0)}else V=n.post(g,"marker");ha="M"+la.x+" "+la.y+" "+V.symbol;l&&(J[ma]=this.createPath(d,m,ha).setStroke(l));L[ma]=this.createPath(d,m,
ha).setStroke(V.marker.stroke).setFill(V.marker.fill)},this);d.dyn.markerFill=V.marker.fill;d.dyn.markerStroke=V.marker.stroke;!A&&this.opt.labels&&(A=L[0].getBoundingBox());h?w.forEach(L,function(la,ma){var ha={element:"marker",index:ma+D.index,run:d,shape:la,outline:J[ma]||null,shadow:O&&O[ma]||null,cx:E[ma].x,cy:E[ma].y};B?(ha.x=ma+D.index+1,ha.y=d.data[ma+D.index]):(ha.x=D.rseg[ma].x,ha.y=d.data[ma+D.index].y);this._connectEvents(ha);y[ma+D.index]=ha},this):delete this._eventSeries[d.name]}if(this.opt.labels){var ba=
A?A.width:2,ka=A?A.height:2;w.forEach(E,function(la,ma){if(this.opt.styleFunc||"number"!=typeof la.data){var ha="number"!=typeof la.data?[la.data]:[];this.opt.styleFunc&&ha.push(this.opt.styleFunc(la.data));V=n.addMixin(g,"marker",ha,!0)}else V=n.post(g,"marker");this.createLabel(m,D.rseg[ma],{x:la.x-ba/2,y:la.y-ka/2,width:ba,height:ka},V)},this)}}d.dirty=!1}}else d.dirty=!1,n.skip();else n.skip(),this._reconnectEvents(d.name)}v("dojo-bidi")&&this._checkOrientation(this.group,q,t);this.animate&&(k=
this.getGroup(),p.animateTransform(K.delegate({shape:k,duration:1200,transform:[{name:"translate",start:[0,q.height-t.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(K,G,w,v,r,f,c,a,b){var p=function(){return!1};return G("dojox.charting.plot2d.CartesianBase",
r,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(q,t){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=t&&t.hAxis||"x";this.vAxis=t&&t.vAxis||"y";this.series=[];this.opt=K.clone(this.baseParams);b.updateWithObject(this.opt,t)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},
cleanGroup:function(q,t){this.inherited(arguments);if(!t&&this.chart._nativeClip){var m=this.chart.offsets,n=this.chart.dim;this.group.setClip({x:m.l,y:m.t,width:Math.max(0,n.width-m.l-m.r),height:Math.max(0,n.height-m.t-m.b)});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(q){q&&(this[q.vertical?"_vAxis":"_hAxis"]=q);return this},
toPage:function(q){var t=this._hAxis,m=this._vAxis,n=t.getScaler(),k=m.getScaler(),l=n.scaler.getTransformerFromModel(n),h=k.scaler.getTransformerFromModel(k),e=this.chart.getCoords(),d=this.chart.offsets,g=this.chart.dim;n=function(u){var x={};x.x=l(u[t.name])+e.x+d.l;x.y=e.y+g.height-d.b-h(u[m.name]);return x};return q?n(q):n},toData:function(q){var t=this._hAxis,m=this._vAxis,n=t.getScaler(),k=m.getScaler(),l=n.scaler.getTransformerFromPlot(n),h=k.scaler.getTransformerFromPlot(k),e=this.chart.getCoords(),
d=this.chart.offsets,g=this.chart.dim;n=function(u){var x={};x[t.name]=l(u.x-e.x-d.l);x[m.name]=h(e.y+g.height-u.y-d.b);return x};return q?n(q):n},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(q,t,m,n){if(this.opt.labels){var k=this.opt.labelFunc?this.opt.labelFunc.apply(this,[t,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(t.y)?t:t.y);if("inside"==this.opt.labelStyle){var l=c._base._getTextBox(k,{font:n.series.font});
t=m.x+m.width/2;var h=m.y+m.height/2+l.h/4;if(l.w>m.width||l.h>m.height)return}else t=m.x+m.width/2,h=m.y-this.opt.labelOffset;this.renderLabel(q,t,h,k,n,"inside"==this.opt.labelStyle)}},performZoom:function(q,t){var m=this._vAxis.scale||1,n=this._hAxis.scale||1,k=q.height-t.b,l=this._hScaler.bounds;l=(l.from-l.lower)*l.scale;var h=this._vScaler.bounds;h=(h.from-h.lower)*h.scale;var e=m/this.lastWindow.vscale,d=n/this.lastWindow.hscale,g=(this.lastWindow.xoffset-l)/(1==this.lastWindow.hscale?n:this.lastWindow.hscale),
u=(h-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?m:this.lastWindow.vscale),x=this.getGroup();k=a.animateTransform(K.delegate({shape:x,duration:1200,transform:[{name:"translate",start:[0,0],end:[t.l*(1-d),k*(1-e)]},{name:"scale",start:[1,1],end:[d,e]},{name:"original"},{name:"translate",start:[0,0],end:[g,u]}]},this.zoom));K.mixin(this.lastWindow,{vscale:m,hscale:n,xoffset:l,yoffset:h});this.zoomQueue.push(k);w.connect(k,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&
this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(q,t){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(t.hmin,t.hmax,q.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=f.buildScaler(t.hmin,t.hmax,q.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(t.vmin,t.vmax,q.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=f.buildScaler(t.vmin,t.vmax,q.height);return this},isNullValue:function(q){if(null===
q||"undefined"==typeof q)return!0;var t=this._hAxis?this._hAxis.isNullValue:p,m=this._vAxis?this._vAxis.isNullValue:p;return"number"==typeof q?t(1)||m(q):t(isNaN(q.x)?1:q.x)||null===q.y||m(q.y)}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(K,G,w,v,r,f,c,a){K=K("dojox.charting.plot2d.Base",r,{constructor:function(b,p){p&&p.tooltipFunc&&(this.tooltipFunc=p.tooltipFunc)},
clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(b){return this},assignAxes:function(b){G.forEach(this.axes,function(p){this[p]&&this.setAxis(b[this[p]])},this)},addSeries:function(b){this.series.push(b);return this},getSeriesStats:function(){return f.collectSimpleStats(this.series,w.hitch(this,"isNullValue"))},calculateAxes:function(b){this.initializeScalers(b,this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return G.some(this.series,
function(b){return b.dirty})},render:function(b,p){return this},renderLabel:function(b,p,q,t,m,n,k){b=c.createText[this.opt.htmlLabels&&"vml"!=v.renderer?"html":"gfx"](this.chart,b,p,q,k?k:"middle",t,m.series.font,m.series.fontColor);n&&(this.opt.htmlLabels&&"vml"!=v.renderer?b.style.pointerEvents="none":b.rawNode&&(b.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&"vml"!=v.renderer&&this.htmlElements.push(b);return b},getRequiredColors:function(){return this.series.length},_getLabel:function(b){return f.getLabel(b,
this.opt.fixed,this.opt.precision)}});a("dojo-bidi")&&K.extend({_checkOrientation:function(b,p,q){this.chart.applyMirroring(this.group,p,q)}});return K})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(K){var G=K.getObject("dojox.charting.scaler.primitive",!0);return K.mixin(G,{buildScaler:function(w,v,r,f){w==v&&(w-=.5,v+=.5);return{bounds:{lower:w,upper:v,from:w,to:v,scale:r/(v-w),span:r},scaler:G}},buildTicks:function(w,v){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(w){var v=
w.bounds.from,r=w.bounds.scale;return function(f){return(f-v)*r}},getTransformerFromPlot:function(w){var v=w.bounds.from,r=w.bounds.scale;return function(f){return f/r+v}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),function(K,G,w,v,r,f,c,a){function b(e,d){this.start=e;this.end=d}function p(e,d,g){this.start=e;this.end=d;this.units=g}function q(e,d){this.start=e;this.end=d;this.temp=
new v}function t(e){this.values=e;this.length=e.length}function m(e,d){this.values=e;this.def=d?d:{}}function n(e,d){this.stack=e;this.original=d}function k(e,d,g,u){if(e.values)return new t(e.values);var x;var y=e.start?G.normalizeColor(e.start):x=d?g?d[g]:d:u;e.end?e=G.normalizeColor(e.end):(x||(x=d?g?d[g]:d:u),e=x);return new q(y,e)}var l=G.fx={};b.prototype.getValue=function(e){return(this.end-this.start)*e+this.start};p.prototype.getValue=function(e){return(this.end-this.start)*e+this.start+
this.units};q.prototype.getValue=function(e){return v.blendColors(this.start,this.end,e,this.temp)};t.prototype.getValue=function(e){return this.values[Math.min(Math.floor(e*this.length),this.length-1)]};m.prototype.getValue=function(e){var d=K.clone(this.def),g;for(g in this.values)d[g]=this.values[g].getValue(e);return d};n.prototype.getValue=function(e){var d=[];r.forEach(this.stack,function(g){if(g instanceof w.Matrix2D)d.push(g);else if("original"==g.name&&this.original)d.push(this.original);
else if("matrix"==g.name){if(g.start instanceof w.Matrix2D&&g.end instanceof w.Matrix2D){var u=new w.Matrix2D;for(x in g.start)u[x]=(g.end[x]-g.start[x])*e+g.start[x];d.push(u)}}else if(g.name in w)if(u=w[g.name],"function"!=typeof u)d.push(u);else{var x=r.map(g.start,function(y,B){return(g.end[B]-y)*e+y});u=u.apply(w,x);u instanceof w.Matrix2D&&d.push(u)}},this);return d};var h=new v(0,0,0,0);l.animateStroke=function(e){e.easing||(e.easing=f._defaultEasing);var d=new f.Animation(e),g=e.shape,u;c.connect(d,
"beforeBegin",d,function(){u=g.getStroke();var x=e.color,y={};x&&(y.color=k(x,u,"color",h));(x=e.style)&&x.values&&(y.style=new t(x.values));if(x=e.width){var B=x,C=u;if(B.values)var z=new t(B.values);else x=B.start?B.start:z=C?C.width:1,B.end?z=B.end:"number"!=typeof z&&(z=C?C.width:1),z=new b(x,z);y.width=z}(x=e.cap)&&x.values&&(y.cap=new t(x.values));if(x=e.join)x.values?y.join=new t(x.values):(z=x.start?x.start:u&&u.join||0,x=x.end?x.end:u&&u.join||0,"number"==typeof z&&"number"==typeof x&&(y.join=
new b(z,x)));this.curve=new m(y,u)});c.connect(d,"onAnimate",g,"setStroke");return d};l.animateFill=function(e){e.easing||(e.easing=f._defaultEasing);var d=new f.Animation(e),g=e.shape,u;c.connect(d,"beforeBegin",d,function(){u=g.getFill();var x=e.color;x&&(this.curve=k(x,u,"",h))});c.connect(d,"onAnimate",g,"setFill");return d};l.animateFont=function(e){e.easing||(e.easing=f._defaultEasing);var d=new f.Animation(e),g=e.shape,u;c.connect(d,"beforeBegin",d,function(){u=g.getFont();var x=e.style,y=
{};x&&x.values&&(y.style=new t(x.values));(x=e.variant)&&x.values&&(y.variant=new t(x.values));(x=e.weight)&&x.values&&(y.weight=new t(x.values));(x=e.family)&&x.values&&(y.family=new t(x.values));if((x=e.size)&&x.units){var B=parseFloat(x.start?x.start:g.font&&g.font.size||"0");var C=parseFloat(x.end?x.end:g.font&&g.font.size||"0");y.size=new p(B,C,x.units)}this.curve=new m(y,u)});c.connect(d,"onAnimate",g,"setFont");return d};l.animateTransform=function(e){e.easing||(e.easing=f._defaultEasing);
var d=new f.Animation(e),g=e.shape,u;c.connect(d,"beforeBegin",d,function(){u=g.getTransform();this.curve=new n(e.transform,u)});c.connect(d,"onAnimate",g,"setTransform");if("svg"===G.renderer&&(9<=a("ie")||a("ff")))var x=[c.connect(d,"onBegin",d,function(){for(var y=g.getParent();y&&y.getParent;)y=y.getParent();y&&(g.__svgContainer=y.rawNode.parentNode,g.__svgRoot=y.rawNode,g.__svgRoot&&g.__svgRoot.getAttribute&&(g.__svgWidth=parseInt(g.__svgRoot.getAttribute("width"),10),isNaN(g.__svgWidth)&&delete g.__svgWidth))}),
c.connect(d,"onAnimate",d,function(){try{if(g.__svgContainer){var y=g.__svgContainer.style.visibility;g.__svgContainer.style.visibility="visible";g.__svgContainer.style.visibility=y;var B=g.__svgWidth;if(!isNaN(B))try{g.__svgRoot.setAttribute("width",B-5E-6),g.__svgRoot.setAttribute("width",B)}catch(C){}}}catch(C){}}),c.connect(d,"onEnd",d,function(){r.forEach(x,c.disconnect);if(g.__svgContainer){var y=g.__svgContainer;if(null==y.getAttribute("__gotVis")){y.setAttribute("__gotVis",!0);var B=g.__svgContainer.style.visibility,
C=g.__svgRoot,z=g.__svgWidth;y.style.visibility="visible";setTimeout(function(){try{y.style.visibility=B;y.removeAttribute("__gotVis");y=null;try{isNaN(z)||(C.setAttribute("width",z-5E-6),C.setAttribute("width",z))}catch(D){}}catch(D){}},100)}}delete g.__svgContainer;delete g.__svgRoot;delete g.__svgWidth})];return d};return l})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(K,G,w,v){return w("dojox.charting.plot2d._PlotEvents",
null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(r){},raiseEvent:function(r){this.plotEvent(r);var f=K.delegate(r);f.originalEvent=r.type;f.originalPlot=r.plot;f.type="onindirect";G.forEach(this.chart.stack,function(c){c!==this&&c.plotEvent&&(f.plot=c,c.plotEvent(f))},this)},connect:function(r,f){this.dirty=!0;return v.connect(this,"plotEvent",r,f)},events:function(){return!!this.plotEvent.after},
resetEvents:function(){this._shapeEvents.length&&(G.forEach(this._shapeEvents,function(r){r.shape.disconnect(r.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(r,f){this._shapeEvents.push({shape:r.eventMask,handle:r.eventMask.connect(f,this,function(c){r.type=f;r.event=c;this.raiseEvent(r);r.event=null})})},_connectEvents:function(r){r&&(r.chart=this.chart,r.plot=this,r.hAxis=this.hAxis||null,r.vAxis=this.vAxis||null,r.eventMask=r.eventMask||
r.shape,this._connectSingleEvent(r,"onmouseover"),this._connectSingleEvent(r,"onmouseout"),this._connectSingleEvent(r,"onclick"))},_reconnectEvents:function(r){(r=this._eventSeries[r])&&G.forEach(r,this._connectEvents,this)},fireEvent:function(r,f,c,a){(r=this._eventSeries[r])&&r.length&&c<r.length&&(c=r[c],c.type=f,c.event=a||null,this.raiseEvent(c),c.event=null)}})})},"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare","./Default"],function(K,G){return K("dojox.charting.plot2d.Lines",
G,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/Areas":function(){define(["dojo/_base/declare","./Default"],function(K,G){return K("dojox.charting.plot2d.Areas",G,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Markers":function(){define(["dojo/_base/declare","./Default"],function(K,G){return K("dojox.charting.plot2d.Markers",G,{constructor:function(){this.opt.markers=!0}})})},"dojox/charting/plot2d/MarkersOnly":function(){define(["dojo/_base/declare",
"./Default"],function(K,G){return K("dojox.charting.plot2d.MarkersOnly",G,{constructor:function(){this.opt.lines=!1;this.opt.markers=!0}})})},"dojox/charting/plot2d/Scatter":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx dojox/gfx/gradutils".split(" "),function(K,G,w,v,r,f,c,a,b,p,q){return w("dojox.charting.plot2d.Scatter",[r,f],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},
markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(t,m){this.opt=K.clone(K.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,m);b.updateWithPattern(this.opt,m,this.optionalParams);this.animate=this.opt.animate},render:function(t,m){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,m);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){G.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();
var n=this.getGroup();a.forEachRev(this.series,function(D){D.cleanGroup(n)})}for(var k=this.chart.theme,l=this.events(),h=0;h<this.series.length;h++){var e=this.series[h];if(this.dirty||e.dirty)if(e.cleanGroup(),e.data.length){var d=k.next("marker",[this.opt,e]),g=this._hScaler.scaler.getTransformerFromModel(this._hScaler),u=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(e.hidden)e.dyn.marker=d.symbol,e.dyn.markerFill=d.marker.fill,e.dyn.markerStroke=d.marker.stroke;else{n=e.group;
var x="number"==typeof e.data[0]?G.map(e.data,function(D,E){return{x:g(E+1)+m.l,y:t.height-m.b-u(D)}},this):G.map(e.data,function(D,E){return{x:g(D.x)+m.l,y:t.height-m.b-u(D.y)}},this);var y=Array(x.length),B=Array(x.length),C=Array(x.length);G.forEach(x,function(D,E){var A=e.data[E];if(this.opt.styleFunc||"number"!=typeof A){var F="number"!=typeof A?[A]:[];this.opt.styleFunc&&F.push(this.opt.styleFunc(A));F=k.addMixin(d,"marker",F,!0)}else F=k.post(d,"marker");var H="M"+D.x+" "+D.y+" "+F.symbol;
F.marker.shadow&&(y[E]=n.createPath("M"+(D.x+F.marker.shadow.dx)+" "+(D.y+F.marker.shadow.dy)+" "+F.symbol).setStroke(F.marker.shadow).setFill(F.marker.shadow.color),this.animate&&this._animateScatter(y[E],t.height-m.b));if(F.marker.outline){var I=c.makeStroke(F.marker.outline);I.width=2*I.width+(F.marker.stroke&&F.marker.stroke.width||0);C[E]=n.createPath(H).setStroke(I);this.animate&&this._animateScatter(C[E],t.height-m.b)}I=c.makeStroke(F.marker.stroke);var L=this._plotFill(F.marker.fill,t,m);
!L||"linear"!==L.type&&"radial"!=L.type?B[E]=n.createPath(H).setStroke(I).setFill(L):(L=q.getColor(L,{x:D.x,y:D.y}),I&&(I.color=L),B[E]=n.createPath(H).setStroke(I).setFill(L));this.opt.labels&&(H=B[E].getBoundingBox(),this.createLabel(n,A,H,F));this.animate&&this._animateScatter(B[E],t.height-m.b)},this);B.length&&(e.dyn.marker=d.symbol,e.dyn.markerStroke=B[B.length-1].getStroke(),e.dyn.markerFill=B[B.length-1].getFill());if(l){var z=Array(B.length);G.forEach(B,function(D,E){var A={element:"marker",
index:E,run:e,shape:D,outline:C&&C[E]||null,shadow:y&&y[E]||null,cx:x[E].x,cy:x[E].y};"number"==typeof e.data[0]?(A.x=E+1,A.y=e.data[E]):(A.x=e.data[E].x,A.y=e.data[E].y);this._connectEvents(A);z[E]=A},this);this._eventSeries[e.name]=z}else delete this._eventSeries[e.name];e.dirty=!1}}else e.dirty=!1,k.skip();else k.skip(),this._reconnectEvents(e.name)}this.dirty=!1;v("dojo-bidi")&&this._checkOrientation(this.group,t,m);return this},_animateScatter:function(t,m){p.animateTransform(K.delegate({shape:t,
duration:1200,transform:[{name:"translate",start:[0,m],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Stacked":function(){define(["dojo/_base/declare","dojo/_base/lang","./Default","./commonStacked"],function(K,G,w,v){return K("dojox.charting.plot2d.Stacked",w,{getSeriesStats:function(){return v.collectStats(this.series,G.hitch(this,"isNullValue"))},buildSegments:function(r,f){for(var c=this.series[r],a=f?Math.max(0,Math.floor(this._hScaler.bounds.from-
1)):0,b=f?Math.min(c.data.length-1,Math.ceil(this._hScaler.bounds.to)):c.data.length-1,p=null,q=[],t=G.hitch(this,"isNullValue");a<=b;a++){var m=f?v.getIndexValue(this.series,r,a,t):v.getValue(this.series,r,c.data[a]?c.data[a].x:null,t);if(!t(m[0])&&(f||null!=m[0].y))p||(p=[],q.push({index:a,rseg:p})),p.push(m[0]);else if(!this.opt.interpolate||f)p=null}return q}})})},"dojox/charting/plot2d/commonStacked":function(){define(["dojo/_base/lang","dojox/lang/functional","./common"],function(K,G,w){var v=
K.getObject("dojox.charting.plot2d.commonStacked",!0);return K.mixin(v,{collectStats:function(r,f){for(var c=K.delegate(w.defaultStats),a=0;a<r.length;++a)for(var b=r[a],p=0;p<b.data.length;p++)if(null!==b.data[p]){if("number"!=typeof b.data[p]&&b.data[p].hasOwnProperty("x")){var q=b.data[p].x;if(null!==q){var t=v.getValue(r,a,q,f)[0];t=null!=t&&t.y?t.y:null}}else t=v.getIndexValue(r,a,p,f)[0],q=p+1;c.hmin=Math.min(c.hmin,q);c.hmax=Math.max(c.hmax,q);c.vmin=Math.min(c.vmin,t);c.vmax=Math.max(c.vmax,
t)}return c},rearrangeValues:function(r,f,c){var a=G.filter(r,"x"),b=a.length;if(!b)return r;for(var p={},q=0;q<b;++q){for(var t=a[q],m=t.min,n=t.max;m<n;++m)t[m]=(t[m]||0)+(p[m]||0);p=t}for(q=0;q<b;++q)for(t=a[q],m=t.min,n=t.max;m<n;++m)t[m]=this.isNullValue(t[m])?0:f(t[m])-c;if(this.opt.minWidth){f=this.opt.minWidth;for(q=b-1;q;--q)for(t=a[q],p=a[q-1],m=t.min,n=t.max;m<n;++m)t[m]-=p[m];p=t.max;for(m=t.min;m<p;++m){for(q=c=t=0;q<b;++q)n=a[q][m],0<n&&(t+=n,++c);if(t<=c*f)for(q=0;q<b;++q)n=a[q][m],
0<n&&(a[q][m]=f);else{for(q=c=0;q<b;++q)t=a[q],n=t[m],0<n&&(n<f?(c+=f-n,t[m]=f):0<c&&(n=t[m]-f,n>=c?(t[m]-=c,c=0):0<n&&(t[m]=f,c-=n)));if(0<c)for(q=b-1;0<=q;--q)if(t=a[q],n=t[m],0<n)if(n=t[m]-f,n>=c){t[m]-=c;break}else 0<n&&(t[m]=f,c-=n)}}for(q=1;q<b;++q)for(t=a[q],p=a[q-1],m=t.min,n=t.max;m<n;++m)t[m]+=p[m]}return r},getIndexValue:function(r,f,c,a){var b=0,p;for(p=0;p<=f;++p)if(!r[p].hidden){var q=b;var t=r[p].data[c];a(t)||(isNaN(t)&&(t=t.y||0),b+=t)}return[b,q]},getValue:function(r,f,c,a){var b=
null,p,q;for(p=0;p<=f;++p)if(!r[p].hidden)for(q=0;q<r[p].data.length;q++){var t=b;var m=r[p].data[q];if(!a(m))if(m.x==c){b||(b={x:c});null!=m.y&&(null==b.y&&(b.y=0),b.y+=m.y);break}else if(m.x>c)break}return[b,t]}})})},"dojox/charting/plot2d/StackedLines":function(){define(["dojo/_base/declare","./Stacked"],function(K,G){return K("dojox.charting.plot2d.StackedLines",G,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/StackedAreas":function(){define(["dojo/_base/declare","./Stacked"],
function(K,G){return K("dojox.charting.plot2d.StackedAreas",G,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Columns":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),function(K,G,w,v,r,f,c,a,b,p){var q=function(){return!1};return w("dojox.charting.plot2d.Columns",[r,f],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,
maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(t,m){this.opt=K.clone(K.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,m);b.updateWithPattern(this.opt,m,this.optionalParams);this.animate=this.opt.animate;this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var t=c.collectSimpleStats(this.series,K.hitch(this,"isNullValue"));t.hmin-=.5;t.hmax+=.5;return t},createRect:function(t,m,n){if(this.opt.enableCache&&
0<t._rectFreePool.length){var k=t._rectFreePool.pop();k.setShape(n);m.add(k)}else k=m.createRect(n);this.opt.enableCache&&t._rectUsePool.push(k);return k},render:function(t,m){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,m);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){G.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();var n=this.getGroup();a.forEachRev(this.series,function(ba){ba.cleanGroup(n)})}var k=this.chart.theme,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),
h=this._vScaler.scaler.getTransformerFromModel(this._vScaler),e=Math.max(this._vScaler.bounds.lower,this._vAxis?this._vAxis.naturalBaseline:0),d=h(e),g=this.events(),u=this.getBarProperties(),x=0,y=this.extractValues(this._hScaler);y=this.rearrangeValues(y,h,d);for(var B=0;B<this.series.length;B++){var C=this.series[B];if(this.dirty||C.dirty){C.cleanGroup();this.opt.enableCache&&(C._rectFreePool=(C._rectFreePool?C._rectFreePool:[]).concat(C._rectUsePool?C._rectUsePool:[]),C._rectUsePool=[]);var z=
k.next("column",[this.opt,C]),D=Array(C.data.length);if(C.hidden)C.dyn.fill=z.series.fill;else{n=C.group;for(var E=G.some(C.data,function(ba){return"number"==typeof ba||ba&&!ba.hasOwnProperty("x")}),A=E?Math.min(C.data.length,Math.ceil(this._hScaler.bounds.to)):C.data.length,F=E?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;F<A;++F){var H=C.data[F];if(!this.isNullValue(H)){var I=this.getValue(H,F,B,E);h(I.y);var L=y[B][F];if(this.opt.styleFunc||"number"!=typeof H){var J="number"!=typeof H?
[H]:[];this.opt.styleFunc&&J.push(this.opt.styleFunc(H));J=k.addMixin(z,"column",J,!0)}else J=k.post(z,"column");if(1<=u.width){var O={x:m.l+l(I.x+.5)+u.gap+u.thickness*x,y:t.height-m.b-d-Math.max(L,0),width:u.width,height:Math.abs(L)};if(J.series.shadow){var P=K.clone(O);P.x+=J.series.shadow.dx;P.y+=J.series.shadow.dy;P=this.createRect(C,n,P).setFill(J.series.shadow.color).setStroke(J.series.shadow);this.animate&&this._animateColumn(P,t.height-m.b+d,L)}var fa=this._plotFill(J.series.fill,t,m);fa=
this._shapeFill(fa,O);fa=this.createRect(C,n,O).setFill(fa).setStroke(J.series.stroke);this.overrideShape(fa,{index:F,value:I});fa.setFilter&&J.series.filter&&fa.setFilter(J.series.filter);C.dyn.fill=fa.getFill();C.dyn.stroke=fa.getStroke();if(g){var V={element:"column",index:F,run:C,shape:fa,shadow:P,cx:I.x+.5,cy:I.y,x:E?F:C.data[F].x,y:E?C.data[F]:C.data[F].y};this._connectEvents(V);D[F]=V}!isNaN(I.py)&&I.py>e&&(O.height=L-h(I.py));this.createLabel(n,H,O,J);this.animate&&this._animateColumn(fa,
t.height-m.b-d,L)}}}this._eventSeries[C.name]=D;C.dirty=!1;x++}}else k.skip(),this._reconnectEvents(C.name)}this.dirty=!1;v("dojo-bidi")&&this._checkOrientation(this.group,t,m);return this},getValue:function(t,m,n,k){k?(n="number"==typeof t?t:t.y,t=m):(n=t.y,t=t.x-1);return{x:t,y:n}},extractValues:function(t){for(var m=[],n=this.series.length-1;0<=n;--n){var k=this.series[n];if(this.dirty||k.dirty){var l=G.some(k.data,function(g){return"number"==typeof g||g&&!g.hasOwnProperty("x")}),h=l?Math.max(0,
Math.floor(t.bounds.from-1)):0;l=l?Math.min(k.data.length,Math.ceil(t.bounds.to)):k.data.length;var e=m[n]=[];e.min=h;for(e.max=l;h<l;++h){var d=k.data[h];e[h]=this.isNullValue(d)?0:"number"==typeof d?d:d.y}}}return m},rearrangeValues:function(t,m,n){for(var k=0,l=t.length;k<l;++k){var h=t[k];if(h)for(var e=h.min,d=h.max;e<d;++e){var g=h[e];h[e]=this.isNullValue(g)?0:m(g)-n}}return t},isNullValue:function(t){if(null===t||"undefined"==typeof t)return!0;var m=this._hAxis?this._hAxis.isNullValue:q,n=
this._vAxis?this._vAxis.isNullValue:q;return"number"==typeof t?n(.5)||m(t):n(isNaN(t.x)?.5:t.x+.5)||null===t.y||m(t.y)},getBarProperties:function(){var t=c.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:t.gap,width:t.size,thickness:0}},_animateColumn:function(t,m,n){0===n&&(n=1);p.animateTransform(K.delegate({shape:t,duration:1200,transform:[{name:"translate",start:[0,m-m/n],end:[0,0]},{name:"scale",start:[1,1/n],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedColumns":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./Columns","./commonStacked"],function(K,G,w,v){return K("dojox.charting.plot2d.StackedColumns",w,{getSeriesStats:function(){var r=v.collectStats(this.series,G.hitch(this,"isNullValue"));r.hmin-=.5;r.hmax+=.5;return r},rearrangeValues:function(r,f,c){return v.rearrangeValues.call(this,r,f,c)}})})},"dojox/charting/plot2d/ClusteredColumns":function(){define(["dojo/_base/declare","dojo/_base/array","./Columns","./common"],function(K,G,w,v){return K("dojox.charting.plot2d.ClusteredColumns",
w,{getBarProperties:function(){var r=this.series.length;G.forEach(this.series,function(c){c.hidden&&r--});var f=v.calculateBarSize(this._hScaler.bounds.scale,this.opt,r);return{gap:f.gap,width:f.size,thickness:f.size,clusterSize:r}}})})},"dojox/charting/plot2d/Bars":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/gfx/fx dojox/lang/utils dojox/lang/functional".split(" "),function(K,G,w,v,r,f,c,a,b,p){var q=function(){return!1};
return w("dojox.charting.plot2d.Bars",[r,f],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(t,m){this.opt=K.clone(K.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,m);b.updateWithPattern(this.opt,m,this.optionalParams);this.animate=this.opt.animate;this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var t=
c.collectSimpleStats(this.series,K.hitch(this,"isNullValue"));t.hmin-=.5;t.hmax+=.5;var m=t.hmin;t.hmin=t.vmin;t.vmin=m;m=t.hmax;t.hmax=t.vmax;t.vmax=m;return t},createRect:function(t,m,n){if(this.opt.enableCache&&0<t._rectFreePool.length){var k=t._rectFreePool.pop();k.setShape(n);m.add(k)}else k=m.createRect(n);this.opt.enableCache&&t._rectUsePool.push(k);return k},createLabel:function(t,m,n,k){this.opt.labels&&"outside"==this.opt.labelStyle?this.renderLabel(t,n.x+n.width+this.opt.labelOffset,n.y+
n.height/2,this._getLabel(isNaN(m.y)?m:m.y),k,"start"):this.inherited(arguments)},render:function(t,m){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,m);this.dirty=this.isDirty();this.resetEvents();if(this.dirty){G.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();var n=this.getGroup();p.forEachRev(this.series,function(ka){ka.cleanGroup(n)})}var k=this.chart.theme,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),h=this._vScaler.scaler.getTransformerFromModel(this._vScaler),
e=Math.max(this._hScaler.bounds.lower,this._hAxis?this._hAxis.naturalBaseline:0),d=l(e),g=this.events(),u=this.getBarProperties(),x=this.series.length;G.forEach(this.series,function(ka){ka.hidden&&x--});var y=x,B=this.extractValues(this._vScaler);B=this.rearrangeValues(B,l,d);for(var C=0;C<this.series.length;C++){var z=this.series[C];if(this.dirty||z.dirty){z.cleanGroup();this.opt.enableCache&&(z._rectFreePool=(z._rectFreePool?z._rectFreePool:[]).concat(z._rectUsePool?z._rectUsePool:[]),z._rectUsePool=
[]);var D=k.next("bar",[this.opt,z]);if(z.hidden)z.dyn.fill=D.series.fill,z.dyn.stroke=D.series.stroke;else{y--;var E=Array(z.data.length);n=z.group;for(var A=G.some(z.data,function(ka){return"number"==typeof ka||ka&&!ka.hasOwnProperty("x")}),F=A?Math.min(z.data.length,Math.ceil(this._vScaler.bounds.to)):z.data.length,H=A?Math.max(0,Math.floor(this._vScaler.bounds.from-1)):0;H<F;++H){var I=z.data[H];if(!this.isNullValue(I)){var L=this.getValue(I,H,C,A),J=B[C][H];if(this.opt.styleFunc||"number"!=typeof I){var O=
"number"!=typeof I?[I]:[];this.opt.styleFunc&&O.push(this.opt.styleFunc(I));O=k.addMixin(D,"bar",O,!0)}else O=k.post(D,"bar");if(J&&1<=u.height){var P={x:m.l+d+Math.min(J,0),y:t.height-m.b-h(L.x+1.5)+u.gap+u.thickness*(x-y-1),width:Math.abs(J),height:u.height};if(O.series.shadow){var fa=K.clone(P);fa.x+=O.series.shadow.dx;fa.y+=O.series.shadow.dy;fa=this.createRect(z,n,fa).setFill(O.series.shadow.color).setStroke(O.series.shadow);this.animate&&this._animateBar(fa,m.l+d,-J)}var V=this._plotFill(O.series.fill,
t,m);V=this._shapeFill(V,P);V=this.createRect(z,n,P).setFill(V).setStroke(O.series.stroke);V.setFilter&&O.series.filter&&V.setFilter(O.series.filter);z.dyn.fill=V.getFill();z.dyn.stroke=V.getStroke();if(g){var ba={element:"bar",index:H,run:z,shape:V,shadow:fa,cx:L.y,cy:L.x+1.5,x:A?H:z.data[H].x,y:A?z.data[H]:z.data[H].y};this._connectEvents(ba);E[H]=ba}!isNaN(L.py)&&L.py>e&&(P.x+=l(L.py),P.width-=l(L.py));this.createLabel(n,I,P,O);this.animate&&this._animateBar(V,m.l+d,-Math.abs(J))}}}this._eventSeries[z.name]=
E;z.dirty=!1}}else k.skip(),this._reconnectEvents(z.name)}this.dirty=!1;v("dojo-bidi")&&this._checkOrientation(this.group,t,m);return this},getValue:function(t,m,n,k){k?(n="number"==typeof t?t:t.y,t=m):(n=t.y,t=t.x-1);return{y:n,x:t}},extractValues:function(t){for(var m=[],n=this.series.length-1;0<=n;--n){var k=this.series[n];if(this.dirty||k.dirty){var l=G.some(k.data,function(g){return"number"==typeof g||g&&!g.hasOwnProperty("x")}),h=l?Math.max(0,Math.floor(t.bounds.from-1)):0;l=l?Math.min(k.data.length,
Math.ceil(t.bounds.to)):k.data.length;var e=m[n]=[];e.min=h;for(e.max=l;h<l;++h){var d=k.data[h];e[h]=this.isNullValue(d)?0:"number"==typeof d?d:d.y}}}return m},rearrangeValues:function(t,m,n){for(var k=0,l=t.length;k<l;++k){var h=t[k];if(h)for(var e=h.min,d=h.max;e<d;++e){var g=h[e];h[e]=this.isNullValue(g)?0:m(g)-n}}return t},isNullValue:function(t){if(null===t||"undefined"==typeof t)return!0;var m=this._hAxis?this._hAxis.isNullValue:q,n=this._vAxis?this._vAxis.isNullValue:q;return"number"==typeof t?
n(.5)||m(t):n(isNaN(t.x)?.5:t.x+.5)||null===t.y||m(t.y)},getBarProperties:function(){var t=c.calculateBarSize(this._vScaler.bounds.scale,this.opt);return{gap:t.gap,height:t.size,thickness:0}},_animateBar:function(t,m,n){0==n&&(n=1);a.animateTransform(K.delegate({shape:t,duration:1200,transform:[{name:"translate",start:[m-m/n,0],end:[0,0]},{name:"scale",start:[1/n,1],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedBars":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./Bars","./commonStacked"],function(K,G,w,v){return K("dojox.charting.plot2d.StackedBars",w,{getSeriesStats:function(){var r=v.collectStats(this.series,G.hitch(this,"isNullValue"));r.hmin-=.5;r.hmax+=.5;var f=r.hmin;r.hmin=r.vmin;r.vmin=f;f=r.hmax;r.hmax=r.vmax;r.vmax=f;return r},rearrangeValues:function(r,f,c){return v.rearrangeValues.call(this,r,f,c)}})})},"dojox/charting/plot2d/ClusteredBars":function(){define(["dojo/_base/declare","dojo/_base/array","./Bars","./common"],function(K,
G,w,v){return K("dojox.charting.plot2d.ClusteredBars",w,{getBarProperties:function(){var r=this.series.length;G.forEach(this.series,function(c){c.hidden&&r--});var f=v.calculateBarSize(this._vScaler.bounds.scale,this.opt,r);return{gap:f.gap,height:f.size,thickness:f.size}}})})},"dojox/charting/plot2d/Grid":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/sniff ./CartesianBase ./common dojox/lang/utils dojox/gfx/fx".split(" "),function(K,G,w,v,r,f,c,a){var b=function(p,q){return p.value-
q.value};return G("dojox.charting.plot2d.Grid",r,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{},hFill:{},vFill:{},hAlternateFill:{},vAlternateFill:{}},constructor:function(p,q){this.opt=K.clone(this.defaultParams);c.updateWithObject(this.opt,q);c.updateWithPattern(this.opt,q,this.optionalParams);this.animate=this.opt.animate;this.opt.enableCache&&
(this._lineFreePool=[],this._lineUsePool=[],this._rectFreePool=[],this._rectUsePool=[])},addSeries:function(p){return this},getSeriesStats:function(){return K.delegate(f.defaultStats)},cleanGroup:function(){this.inherited(arguments);this.opt.enableCache&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._rectFreePool=this._rectFreePool.concat(this._rectUsePool),this._rectUsePool=[])},createLine:function(p,q){if(this.opt.enableCache&&0<this._lineFreePool.length){var t=
this._lineFreePool.pop();t.setShape(q);p.add(t)}else t=p.createLine(q);this.opt.enableCache&&this._lineUsePool.push(t);return t},createRect:function(p,q){if(this.opt.enableCache&&0<this._rectFreePool.length){var t=this._rectFreePool.pop();t.setShape(q);p.add(t)}else t=p.createRect(q);this.opt.enableCache&&this._rectUsePool.push(t);return t},render:function(p,q){if(this.zoom)return this.performZoom(p,q);this.dirty=this.isDirty();if(!this.dirty)return this;this.cleanGroup();var t=this.getGroup(),m=
this.chart.theme;(v("ios")&&6>v("ios")||v("android")||v("safari")&&!v("ios"))&&t.createRect({x:q.l,y:q.t,width:Math.max(0,p.width-q.l-q.r),height:Math.max(0,p.height-q.t-q.b)});if(this._vAxis){var n=this._vAxis.getTicks();var k=this._vAxis.getScaler();if(null!=n&&null!=k){var l=k.scaler.getTransformerFromModel(k);this.opt.hStripes&&this._renderHRect(n,m.grid,p,q,k,l);this.opt.hMinorLines&&(t=this.opt.minorHLine||m.grid&&m.grid.minorLine||m.axis.minorTick,this._renderHLines(n.minor,t,p,q,k,l));this.opt.hMajorLines&&
(t=this.opt.majorHLine||m.grid&&m.grid.majorLine||m.axis.majorTick,this._renderHLines(n.major,t,p,q,k,l))}}this._hAxis&&(n=this._hAxis.getTicks(),k=this._hAxis.getScaler(),null!=n&&null!=k&&(l=k.scaler.getTransformerFromModel(k),this.opt.vStripes&&this._renderVRect(n,m.grid,p,q,k,l),n&&this.opt.vMinorLines&&(t=this.opt.minorVLine||m.grid&&m.grid.minorLine||m.axis.minorTick,this._renderVLines(n.minor,t,p,q,k,l)),n&&this.opt.vMajorLines&&(t=this.opt.majorVLine||m.grid&&m.grid.majorLine||m.axis.majorTick,
this._renderVLines(n.major,t,p,q,k,l))));this.dirty=!1;return this},_renderHLines:function(p,q,t,m,n,k){var l=this.getGroup();w.forEach(p,function(h){if(this.opt.renderOnAxis||h.value!=(this._vAxis.opt.leftBottom?n.bounds.from:n.bounds.to))h=t.height-m.b-k(h.value),h=this.createLine(l,{x1:m.l,y1:h,x2:t.width-m.r,y2:h}).setStroke(q),this.animate&&this._animateGrid(h,"h",m.l,m.r+m.l-t.width)},this)},_renderVLines:function(p,q,t,m,n,k){var l=this.getGroup();w.forEach(p,function(h){if(this.opt.renderOnAxis||
h.value!=(this._hAxis.opt.leftBottom?n.bounds.from:n.bounds.to))h=m.l+k(h.value),h=this.createLine(l,{x1:h,y1:m.t,x2:h,y2:t.height-m.b}).setStroke(q),this.animate&&this._animateGrid(h,"v",t.height-m.b,t.height-m.b-m.t)},this)},_renderHRect:function(p,q,t,m,n,k){p=p.major.concat(p.minor);p.sort(b);p[0].value>n.bounds.from&&p.splice(0,0,{value:n.bounds.from});p[p.length-1].value<n.bounds.to&&p.push({value:n.bounds.to});n=this.getGroup();for(var l=0;l<p.length-1;l++){var h=p[l];var e=t.height-m.b-k(h.value);
var d=t.height-m.b-k(p[l+1].value);if(h=0==l%2?this.opt.hAlternateFill||q&&q.alternateFill:this.opt.hFill||q&&q.fill)h=this.createRect(n,{x:m.l,y:e,width:t.width-m.r,height:e-d}).setFill(h),this.animate&&this._animateGrid(h,"h",m.l,m.r+m.l-t.width)}},_renderVRect:function(p,q,t,m,n,k){p=p.major.concat(p.minor);p.sort(b);p[0].value>n.bounds.from&&p.splice(0,0,{value:n.bounds.from});p[p.length-1].value<n.bounds.to&&p.push({value:n.bounds.to});n=this.getGroup();for(var l=0;l<p.length-1;l++){var h=p[l];
var e=m.l+k(h.value);var d=m.l+k(p[l+1].value);if(h=0==l%2?this.opt.vAlternateFill||q&&q.alternateFill:this.opt.vFill||q&&q.fill)h=this.createRect(n,{x:e,y:m.t,width:d-e,height:t.width-m.r}).setFill(h),this.animate&&this._animateGrid(h,"v",t.height-m.b,t.height-m.b-m.t)}},_animateGrid:function(p,q,t,m){a.animateTransform(K.delegate({shape:p,duration:1200,transform:[{name:"translate",start:"h"==q?[t,0]:[0,t],end:[0,0]},{name:"scale",start:"h"==q?[1/m,1]:[1,1/m],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},
"dojox/charting/plot2d/Pie":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/_base/Color ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m){return w("dojox.charting.plot2d.Pie",[f,c],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0,innerRadius:0,minWidth:0,
zeroDataMessage:""},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(n,k){this.opt=K.clone(this.defaultParams);t.updateWithObject(this.opt,k);t.updateWithPattern(this.opt,k,this.optionalParams);this.axes=[];this.run=null;this.dyn=[];this.runFilter=[];k&&k.hasOwnProperty("innerRadius")&&(this._plotSetInnerRadius=!0)},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},
setAxis:function(n){return this},addSeries:function(n){this.run=n;return this},getSeriesStats:function(){return K.delegate(a.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(n,k){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var l=this.group,h=this.chart.theme;!this._plotSetInnerRadius&&h&&h.pieInnerRadius&&(this.opt.innerRadius=h.pieInnerRadius);var e=(n.width-k.l-k.r)/2,d=(n.height-k.t-k.b)/2,
g=Math.min(e,d),u="font"in this.opt?this.opt.font:h.axis.tick.titleFont||"",x=u?b.normalizedLength(b.splitFontString(u).size):0,y=this.opt.hasOwnProperty("fontColor")?this.opt.fontColor:h.axis.tick.fontColor,B=p._degToRad(this.opt.startAngle),C=B,z,D=this.run.data,E=this.events(),A=K.hitch(this,function(){var X=h.clone(),aa=q.map(D,function(ca){var M=[this.opt,this.run];null!==ca&&"number"!=typeof ca&&M.push(ca);this.opt.styleFunc&&M.push(this.opt.styleFunc(ca));return X.next("slice",M,!0)},this);
"radius"in this.opt&&(g=this.opt.radius<g?this.opt.radius:g);var ea={cx:k.l+e,cy:k.t+d,r:g},Y=new r(y);this.opt.innerRadius&&(Y.a=.1);var T=this._createRing(l,ea).setStroke(Y);this.opt.innerRadius&&T.setFill(Y);this.opt.zeroDataMessage&&this.renderLabel(l,ea.cx,ea.cy+x/3,this.opt.zeroDataMessage,{series:{font:u,fontColor:y}},null,"middle");this.dyn=[];G.forEach(D,function(ca,M){this.dyn.push({fill:this._plotFill(aa[M].series.fill,n,k),stroke:aa[M].series.stroke})},this)});if(!this.run&&!this.run.data.ength)return A(),
this;if("number"==typeof D[0]){var F=q.map(D,"x ? Math.max(x, 0) : 0");if(q.every(F,"\x3c\x3d 0"))return A(),this;var H=q.map(F,"/this",q.foldl(F,"+",0));this.opt.labels&&(z=G.map(H,function(X){return 0<X?this._getLabel(100*X)+"%":""},this))}else{F=q.map(D,"x ? Math.max(x.y, 0) : 0");if(!F.length||q.every(F,"\x3c\x3d 0"))return A(),this;H=q.map(F,"/this",q.foldl(F,"+",0));this.opt.labels&&(z=G.map(H,function(X,aa){if(0>X)return"";var ea=D[aa];return ea.hasOwnProperty("text")?ea.text:this._getLabel(100*
X)+"%"},this))}var I=q.map(D,function(X){var aa=[this.opt,this.run];null!==X&&"number"!=typeof X&&aa.push(X);this.opt.styleFunc&&aa.push(this.opt.styleFunc(X));return h.next("slice",aa,!0)},this);this.opt.labels&&(F=q.foldl1(q.map(z,function(X,aa){return b._base._getTextBox(X,{font:I[aa].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(g=Math.min(e-2*F,d-x)+this.opt.labelOffset));this.opt.hasOwnProperty("radius")&&(g=this.opt.radius<.9*g?this.opt.radius:.9*g);!this.opt.radius&&
this.opt.labels&&"columns"==this.opt.labelStyle?(g/=2,e>d&&e>2*g&&(g*=e/(2*g)),g>=.8*d&&(g=.8*d)):g>=.9*d&&(g=.9*d);var L=g-this.opt.labelOffset;var J={cx:k.l+e,cy:k.t+d,r:g};this.dyn=[];var O=Array(H.length),P=[],fa=C,V=this.opt.minWidth;G.forEach(H,function(X,aa){if(0===X)P[aa]={step:0,end:fa,start:fa,weak:!1};else{var ea=fa+2*X*Math.PI;aa===H.length-1&&(ea=B+2*Math.PI);var Y=ea-fa;P[aa]={step:Y,start:fa,end:ea,weak:Y*g<V};fa=ea}});if(0<V){F=0;var ba=V/g;A=0;var ka;for(ka=P.length-1;0<=ka;ka--)P[ka].weak&&
(++F,A+=P[ka].step,P[ka].step=ba);ba*=F;if(ba>Math.PI){ba=Math.PI/F;for(ka=0;ka<P.length;++ka)P[ka].weak&&(P[ka].step=ba);ba=Math.PI}if(0<F)for(ba=1-(ba-A)/2/Math.PI,ka=0;ka<P.length;++ka)P[ka].weak||(P[ka].step*=ba);for(ka=0;ka<P.length;++ka)P[ka].start=ka?P[ka].end:fa,P[ka].end=P[ka].start+P[ka].step;for(ka=P.length-1;0<=ka;--ka)if(0!==P[ka].step){P[ka].end=fa+2*Math.PI;break}}fa=C;var la,ma;G.some(H,function(X,aa){var ea=D[aa],Y=I[aa];if(1<=X){ma=this._plotFill(Y.series.fill,n,k);ma=this._shapeFill(ma,
{x:J.cx-J.r,y:J.cy-J.r,width:2*J.r,height:2*J.r});ma=this._pseudoRadialFill(ma,{x:J.cx,y:J.cy},J.r);var T=this._createRing(l,J).setFill(ma).setStroke(Y.series.stroke);this.dyn.push({fill:ma,stroke:Y.series.stroke});E&&(la={element:"slice",index:aa,run:this.run,shape:T,x:aa,y:"number"==typeof ea?ea:ea.y,cx:J.cx,cy:J.cy,cr:g},this._connectEvents(la),O[aa]=la);for(ea=aa+1;ea<H.length;ea++)Y=I[ea],this.dyn.push({fill:Y.series.fill,stroke:Y.series.stroke});return!0}if(0===P[aa].step)return this.dyn.push({fill:Y.series.fill,
stroke:Y.series.stroke}),!1;var ca=P[aa].step;T=J.cx+g*Math.cos(fa);var M=J.cy+g*Math.sin(fa),U=J.cx+g*Math.cos(fa+ca),da=J.cy+g*Math.sin(fa+ca),ja=p._degToRad(this.opt.fanSize);if(Y.series.fill&&"radial"===Y.series.fill.type&&"fan"===this.opt.radGrad&&ca>ja){var na=l.createGroup();ja=Math.ceil(ca/ja);var oa=ca/ja;ma=this._shapeFill(Y.series.fill,{x:J.cx-J.r,y:J.cy-J.r,width:2*J.r,height:2*J.r});var ra;for(ra=0;ra<ja;++ra){var ua=fa+(ra-.2)*oa;var wa=fa+(ra+1+.2)*oa;var Ba=0==ra?T:J.cx+g*Math.cos(ua);
var Da=0==ra?M:J.cy+g*Math.sin(ua);var La=ra==ja-1?U:J.cx+g*Math.cos(wa);wa=ra==ja-1?da:J.cy+g*Math.sin(wa);this._createSlice(na,J,g,Ba,Da,La,wa,ua,oa).setFill(this._pseudoRadialFill(ma,{x:J.cx,y:J.cy},g,fa+(ra+.5)*oa,fa+(ra+.5)*oa))}ja=Y.series.stroke;this._createSlice(na,J,g,T,M,U,da,fa,ca).setStroke(ja);T=na}else{ja=Y.series.stroke;T=this._createSlice(l,J,g,T,M,U,da,fa,ca).setStroke(ja);if((ma=Y.series.fill)&&"radial"===ma.type)ma=this._shapeFill(ma,{x:J.cx-J.r,y:J.cy-J.r,width:2*J.r,height:2*
J.r}),"linear"===this.opt.radGrad&&(ma=this._pseudoRadialFill(ma,{x:J.cx,y:J.cy},g,fa,fa+ca));else if(ma&&"linear"===ma.type){M=K.clone(T.getBoundingBox());if("svg"===b.renderer){U={w:0,h:0};try{U=v.position(T.rawNode)}catch(Ga){}U.h>M.height&&(M.height=U.h);U.w>M.width&&(M.width=U.w)}ma=this._plotFill(ma,n,k);ma=this._shapeFill(ma,M)}T.setFill(ma)}this.dyn.push({fill:ma,stroke:Y.series.stroke});E&&(la={element:"slice",index:aa,run:this.run,shape:T,x:aa,y:"number"==typeof ea?ea:ea.y,cx:J.cx,cy:J.cy,
cr:g},this._connectEvents(la),O[aa]=la);fa+=ca;return!1},this);if(this.opt.labels){var ha=m("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)fa=C=B,G.some(H,function(X,aa){if(0>=X&&!this.opt.minWidth)return!1;var ea=I[aa];if(1<=X)return this.renderLabel(l,J.cx,J.cy+x/2,z[aa],ea,0<this.opt.labelOffset),!0;var Y=C+2*X*Math.PI;aa+1==H.length&&(Y=B+2*Math.PI);if(this.opt.omitLabels&&.001>Y-C)return!1;var T=fa+P[aa].step/2,ca=J.cx+L*Math.cos(T);this.renderLabel(l,ha?n.width-ca:
ca,J.cy+L*Math.sin(T)+x/2,z[aa],ea,0<this.opt.labelOffset);fa+=P[aa].step;C=Y;return!1},this);else if("columns"==this.opt.labelStyle){var Z=this.opt.omitLabels;fa=C=B;var W=[],Q=0;for(F=H.length-1;0<=F;--F)H[F]&&++Q;G.forEach(H,function(X,aa){var ea=C+2*X*Math.PI;aa+1==H.length&&(ea=B+2*Math.PI);if(0!==this.minWidth||.001<=ea-C){var Y=fa+P[aa].step/2;1!==Q||this.opt.minWidth||(Y=(C+ea)/2);W.push({angle:Y,left:0>Math.cos(Y),theme:I[aa],index:aa,omit:Z?.001>ea-C:!1})}C=ea;fa+=P[aa].step},this);var ia=
b._base._getTextBox("a",{font:u,whiteSpace:"nowrap"}).h;this._getProperLabelRadius(W,ia,1.1*J.r);var R=J.cx-2*J.r,S=J.cx+2*J.r;G.forEach(W,function(X){if(!X.omit){var aa=I[X.index],ea=0;aa&&aa.axis&&aa.axis.tick&&aa.axis.tick.labelGap&&(ea=aa.axis.tick.labelGap);var Y=b._base._getTextBox(z[X.index],{font:aa.series.font,whiteSpace:"nowrap",paddingLeft:ea+"px"}).w,T=J.cx+X.labelR*Math.cos(X.angle),ca=J.cy+X.labelR*Math.sin(X.angle),M=X.left?R+Y:S-Y;ea=X.left?R:M+ea;var U=J.r;U=l.createPath().moveTo(J.cx+
U*Math.cos(X.angle),J.cy+U*Math.sin(X.angle));Math.abs(X.labelR*Math.cos(X.angle))<2*J.r-Y&&U.lineTo(T,ca);U.lineTo(M,ca).setStroke(X.theme.series.labelWiring);U.moveToBack();T=this.renderLabel(l,ea,ia/3+ca||0,z[X.index],aa,!1,"left");E&&!this.opt.htmlLabels&&(aa=b._base._getTextBox(z[X.index],{font:X.theme.series.font}).w||0,Y=b.normalizedLength(b.splitFontString(X.theme.series.font).size),la={element:"labels",index:X.index,run:this.run,shape:T,x:ea,y:ca,label:z[X.index]},ea=T.getShape(),ca=v.position(this.chart.node,
!0),ea=K.mixin({type:"rect"},{x:ea.x,y:ea.y-2*Y}),ea.x+=ca.x,ea.y+=ca.y,ea.x=Math.round(ea.x),ea.y=Math.round(ea.y),ea.width=Math.ceil(aa),ea.height=Math.ceil(Y),la.aroundRect=ea,this._connectEvents(la),O[H.length+X.index]=la)}},this)}}var N=0;this._eventSeries[this.run.name]=q.map(D,function(X){return 0>=X?null:O[N++]});m("dojo-bidi")&&this._checkOrientation(this.group,n,k);return this},_getProperLabelRadius:function(n,k,l){if(1==n.length)n[0].labelR=l;else{var h={},e={},d=2,g=2,u;for(u=0;u<n.length;++u){var x=
Math.abs(Math.sin(n[u].angle));n[u].left?d>x&&(d=x,h=n[u]):g>x&&(g=x,e=n[u])}h.labelR=e.labelR=l;this._caculateLabelR(h,n,k);this._caculateLabelR(e,n,k)}},_caculateLabelR:function(n,k,l){var h,e=k.length,d=n.labelR,g=k[n.index].left?-l:l;var u=0;l=n.index;for(h=(l+1)%e;u<e&&k[l].left===k[h].left;++u)d=(Math.sin(k[l].angle)*d+g)/Math.sin(k[h].angle),d=Math.max(n.labelR,d),k[h].labelR=d,l=(l+1)%e,h=(h+1)%e;u>=e&&(k[0].labelR=n.labelR);u=0;l=n.index;for(h=(l||e)-1;u<e&&k[l].left===k[h].left;++u)d=(Math.sin(k[l].angle)*
d-g)/Math.sin(k[h].angle),d=Math.max(n.labelR,d),k[h].labelR=d,l=(l||e)-1,h=(h||e)-1},_createRing:function(n,k){var l=this.opt.innerRadius;0<l?l=l/100*k.r:0>l&&(l=-l);return l?n.createPath({}).setAbsoluteMode(!0).moveTo(k.cx,k.cy-k.r).arcTo(k.r,k.r,0,!1,!0,k.cx+k.r,k.cy).arcTo(k.r,k.r,0,!0,!0,k.cx,k.cy-k.r).closePath().moveTo(k.cx,k.cy-l).arcTo(l,l,0,!1,!0,k.cx+l,k.cy).arcTo(l,l,0,!0,!0,k.cx,k.cy-l).closePath():n.createCircle(k)},_createSlice:function(n,k,l,h,e,d,g,u,x){var y=this.opt.innerRadius;
0<y?y=y/100*k.r:0>y&&(y=-y);if(y){var B=k.cx+y*Math.cos(u),C=k.cy+y*Math.sin(u),z=k.cx+y*Math.cos(u+x);k=k.cy+y*Math.sin(u+x);return n.createPath({}).setAbsoluteMode(!0).moveTo(B,C).lineTo(h,e).arcTo(l,l,0,x>Math.PI,!0,d,g).lineTo(z,k).arcTo(y,y,0,x>Math.PI,!1,B,C).closePath()}return n.createPath({}).setAbsoluteMode(!0).moveTo(k.cx,k.cy).lineTo(h,e).arcTo(l,l,0,x>Math.PI,!0,d,g).lineTo(k.cx,k.cy).closePath()}})})},"dojox/charting/plot2d/Bubble":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return G("dojox.charting.plot2d.Bubble",[r,f],{defaultParams:{animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelFunc:null},constructor:function(q,t){this.opt=K.clone(K.mixin(this.opt,this.defaultParams));b.updateWithObject(this.opt,t);b.updateWithPattern(this.opt,t,this.optionalParams);this.opt.labelFunc||(this.opt.labelFunc=function(m,n,k){return this._getLabel(m.size,n,k)});this.animate=this.opt.animate},
render:function(q,t){if(this.zoom&&!this.isDataDirty())return this.performZoom(q,t);this.resetEvents();if(this.dirty=this.isDirty()){w.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();var m=this.getGroup();a.forEachRev(this.series,function(E){E.cleanGroup(m)})}for(var n=this.chart.theme,k=this._hScaler.scaler.getTransformerFromModel(this._hScaler),l=this._vScaler.scaler.getTransformerFromModel(this._vScaler),h=this.events(),e=0;e<this.series.length;e++){var d=this.series[e];
if(this.dirty||d.dirty)if(d.cleanGroup(),!d.data.length)d.dirty=!1,n.skip();else{if("number"!=typeof d.data[0]){var g=n.next("circle",[this.opt,d]),u=w.map(d.data,function(E){return E?{x:k(E.x)+t.l,y:q.height-t.b-l(E.y),radius:E.size/2*this._vScaler.bounds.scale}:null},this);if(d.hidden)d.dyn.fill=g.series.fill,d.dyn.stroke=g.series.stroke;else{m=d.group;var x=null,y=null,B=null,C=this.opt.styleFunc,z=function(E){return C?n.addMixin(g,"circle",[E,C(E)],!0):n.addMixin(g,"circle",E,!0)};g.series.shadow&&
(B=w.map(u,function(E,A){if(!this.isNullValue(E)){var F=z(d.data[A]).series.shadow;F=m.createCircle({cx:E.x+F.dx,cy:E.y+F.dy,r:E.radius}).setStroke(F).setFill(F.color);this.animate&&this._animateBubble(F,q.height-t.b,E.radius);return F}return null},this),B.length&&(d.dyn.shadow=B[B.length-1].getStroke()));g.series.outline&&(y=w.map(u,function(E,A){if(!this.isNullValue(E)){var F=z(d.data[A]);F=c.makeStroke(F.series.outline);F.width=2*F.width+(g.series.stroke&&g.series.stroke.width||0);F=m.createCircle({cx:E.x,
cy:E.y,r:E.radius}).setStroke(F);this.animate&&this._animateBubble(F,q.height-t.b,E.radius);return F}return null},this),y.length&&(d.dyn.outline=y[y.length-1].getStroke()));x=w.map(u,function(E,A){if(!this.isNullValue(E)){var F=z(d.data[A]),H={x:E.x-E.radius,y:E.y-E.radius,width:2*E.radius,height:2*E.radius},I=this._plotFill(F.series.fill,q,t);I=this._shapeFill(I,H);I=m.createCircle({cx:E.x,cy:E.y,r:E.radius}).setFill(I).setStroke(F.series.stroke);I.setFilter&&F.series.filter&&I.setFilter(F.series.filter);
this.animate&&this._animateBubble(I,q.height-t.b,E.radius);this.createLabel(m,d.data[A],H,F);return I}return null},this);x.length&&(d.dyn.fill=x[x.length-1].getFill(),d.dyn.stroke=x[x.length-1].getStroke());if(h){var D=Array(x.length);w.forEach(x,function(E,A){if(null!==E){var F={element:"circle",index:A,run:d,shape:E,outline:y&&y[A]||null,shadow:B&&B[A]||null,x:d.data[A].x,y:d.data[A].y,r:d.data[A].size/2,cx:u[A].x,cy:u[A].y,cr:u[A].radius};this._connectEvents(F);D[A]=F}},this);this._eventSeries[d.name]=
D}else delete this._eventSeries[d.name];d.dirty=!1}}}else n.skip(),this._reconnectEvents(d.name)}this.dirty=!1;v("dojo-bidi")&&this._checkOrientation(this.group,q,t);return this},_animateBubble:function(q,t,m){p.animateTransform(K.delegate({shape:q,duration:1200,transform:[{name:"translate",start:[0,t],end:[0,0]},{name:"scale",start:[0,1/m],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Candlesticks":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return G("dojox.charting.plot2d.Candlesticks",[r,f],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(q,t){this.opt=K.clone(this.defaultParams);b.updateWithObject(this.opt,t);b.updateWithPattern(this.opt,t,this.optionalParams);this.animate=this.opt.animate},collectStats:function(q){for(var t=K.delegate(c.defaultStats),m=0;m<q.length;m++){var n=q[m];if(n.data.length){var k=
t.vmin,l=t.vmax;"ymin"in n&&"ymax"in n||w.forEach(n.data,function(h,e){if(!this.isNullValue(h)){var d=h.x||e+1;t.hmin=Math.min(t.hmin,d);t.hmax=Math.max(t.hmax,d);t.vmin=Math.min(t.vmin,h.open,h.close,h.high,h.low);t.vmax=Math.max(t.vmax,h.open,h.close,h.high,h.low)}},this);"ymin"in n&&(t.vmin=Math.min(k,n.ymin));"ymax"in n&&(t.vmax=Math.max(l,n.ymax))}}return t},getSeriesStats:function(){var q=this.collectStats(this.series);q.hmin-=.5;q.hmax+=.5;return q},render:function(q,t){if(this.zoom&&!this.isDataDirty())return this.performZoom(q,
t);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){w.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();var m=this.getGroup();a.forEachRev(this.series,function(ba){ba.cleanGroup(m)})}var n=this.chart.theme,k=this._hScaler.scaler.getTransformerFromModel(this._hScaler),l=this._vScaler.scaler.getTransformerFromModel(this._vScaler),h=this.events();var e=c.calculateBarSize(this._hScaler.bounds.scale,this.opt);var d=e.gap;e=e.size;for(var g=this.series.length-1;0<=g;--g){var u=
this.series[g];if(this.dirty||u.dirty){u.cleanGroup();var x=n.next("candlestick",[this.opt,u]),y=Array(u.data.length);if(u.hidden)u.dyn.fill=x.series.fill,u.dyn.stroke=x.series.stroke;else{m=u.group;for(var B=0;B<u.data.length;++B){var C=u.data[B];if(!this.isNullValue(C)){var z=n.addMixin(x,"candlestick",C,!0),D=k(C.x||B+.5)+t.l+d,E=q.height-t.b,A=l(C.open),F=l(C.close),H=l(C.high),I=l(C.low);if("mid"in C)var L=l(C.mid);if(I>H){var J=H;H=I;I=J}if(1<=e){J=A>F;var O={x1:e/2,x2:e/2,y1:E-H,y2:E-I},P=
{x:0,y:E-Math.max(A,F),width:e,height:Math.max(J?A-F:F-A,1)},fa=m.createGroup();fa.setTransform({dx:D,dy:0});var V=fa.createGroup();V.createLine(O).setStroke(z.series.stroke);V.createRect(P).setStroke(z.series.stroke).setFill(J?z.series.fill:"white");"mid"in C&&V.createLine({x1:z.series.stroke?z.series.stroke.width||1:1,x2:e-(z.series.stroke?z.series.stroke.width||1:1),y1:E-L,y2:E-L}).setStroke(J?"white":z.series.stroke);u.dyn.fill=z.series.fill;u.dyn.stroke=z.series.stroke;h&&(C={element:"candlestick",
index:B,run:u,shape:V,x:D,y:E-Math.max(A,F),cx:e/2,cy:E-Math.max(A,F)+Math.max(J?A-F:F-A,1)/2,width:e,height:Math.max(J?A-F:F-A,1),data:C},this._connectEvents(C),y[B]=C)}this.animate&&this._animateCandlesticks(fa,E-I,H-I)}}this._eventSeries[u.name]=y;u.dirty=!1}}else n.skip(),this._reconnectEvents(u.name)}this.dirty=!1;v("dojo-bidi")&&this._checkOrientation(this.group,q,t);return this},tooltipFunc:function(q){return'\x3ctable cellpadding\x3d"1" cellspacing\x3d"0" border\x3d"0" style\x3d"font-size:0.9em;"\x3e\x3ctr\x3e\x3ctd\x3eOpen:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
q.data.open+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eHigh:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+q.data.high+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eLow:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+q.data.low+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eClose:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+q.data.close+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e"+(void 0!==q.data.mid?'\x3ctr\x3e\x3ctd\x3eMid:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
q.data.mid+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e":"")+"\x3c/table\x3e"},_animateCandlesticks:function(q,t,m){p.animateTransform(K.delegate({shape:q,duration:1200,transform:[{name:"translate",start:[0,t-t/m],end:[0,0]},{name:"scale",start:[1,1/m],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/OHLC":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return w("dojox.charting.plot2d.OHLC",[r,f],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(q,t){this.opt=K.clone(this.defaultParams);b.updateWithObject(this.opt,t);b.updateWithPattern(this.opt,t,this.optionalParams);this.animate=this.opt.animate},collectStats:function(q){for(var t=K.delegate(c.defaultStats),m=0;m<q.length;m++){var n=q[m];if(n.data.length){var k=
t.vmin,l=t.vmax;"ymin"in n&&"ymax"in n||G.forEach(n.data,function(h,e){if(!this.isNullValue(h)){var d=h.x||e+1;t.hmin=Math.min(t.hmin,d);t.hmax=Math.max(t.hmax,d);t.vmin=Math.min(t.vmin,h.open,h.close,h.high,h.low);t.vmax=Math.max(t.vmax,h.open,h.close,h.high,h.low)}},this);"ymin"in n&&(t.vmin=Math.min(k,n.ymin));"ymax"in n&&(t.vmax=Math.max(l,n.ymax))}}return t},getSeriesStats:function(){var q=this.collectStats(this.series);q.hmin-=.5;q.hmax+=.5;return q},render:function(q,t){if(this.zoom&&!this.isDataDirty())return this.performZoom(q,
t);this.resetEvents();if(this.dirty=this.isDirty()){G.forEach(this.series,c.purgeGroup);this._eventSeries={};this.cleanGroup();var m=this.getGroup();a.forEachRev(this.series,function(V){V.cleanGroup(m)})}var n=this.chart.theme,k=this._hScaler.scaler.getTransformerFromModel(this._hScaler),l=this._vScaler.scaler.getTransformerFromModel(this._vScaler),h=this.events();var e=c.calculateBarSize(this._hScaler.bounds.scale,this.opt);var d=e.gap;e=e.size;for(var g=0;g<this.series.length;g++){var u=this.series[g];
if(this.dirty||u.dirty){u.cleanGroup();var x=n.next("candlestick",[this.opt,u]);m=u.group;for(var y=Array(u.data.length),B=0;B<u.data.length;++B){var C=u.data[B];if(!this.isNullValue(C)){var z=n.addMixin(x,"candlestick",C,!0),D=k(C.x||B+.5)+t.l+d,E=q.height-t.b,A=l(C.open),F=l(C.close),H=l(C.high),I=l(C.low);if(I>H){var L=H;H=I;I=L}if(1<=e){L={x1:e/2,x2:e/2,y1:E-H,y2:E-I};var J={x1:0,x2:e/2+(z.series.stroke?z.series.stroke.width||1:1)/2,y1:E-A,y2:E-A},O={x1:e/2-(z.series.stroke?z.series.stroke.width||
1:1)/2,x2:e,y1:E-F,y2:E-F},P=m.createGroup();P.setTransform({dx:D,dy:0});var fa=P.createGroup();fa.createLine(L).setStroke(z.series.stroke);fa.createLine(J).setStroke(z.series.stroke);fa.createLine(O).setStroke(z.series.stroke);u.dyn.stroke=z.series.stroke;h&&(C={element:"candlestick",index:B,run:u,shape:fa,x:D,y:E-Math.max(A,F),cx:e/2,cy:E-Math.max(A,F)+Math.max(A>F?A-F:F-A,1)/2,width:e,height:Math.max(A>F?A-F:F-A,1),data:C},this._connectEvents(C),y[B]=C)}this.animate&&this._animateOHLC(P,E-I,H-
I)}}this._eventSeries[u.name]=y;u.dirty=!1}else n.skip(),this._reconnectEvents(u.name)}this.dirty=!1;v("dojo-bidi")&&this._checkOrientation(this.group,q,t);return this},_animateOHLC:function(q,t,m){p.animateTransform(K.delegate({shape:q,duration:1200,transform:[{name:"translate",start:[0,t-t/m],end:[0,0]},{name:"scale",start:[1,1/m],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Spider":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/dom-geometry dojo/_base/fx dojo/fx dojo/sniff ./Base ./_PlotEvents ./common ../axis2d/common dojox/gfx dojox/gfx/matrix dojox/gfx/fx dojox/lang/functional dojox/lang/utils dojo/fx/easing".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){return G("dojox.charting.plot2d.Spider",[b,p],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:!0,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:.2,spiderOrigin:.16,markerSize:3,spiderType:"polygon",animationType:e.backOut,animate:null,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",
fontColor:""},constructor:function(d,g){this.opt=K.clone(this.defaultParams);h.updateWithObject(this.opt,g);h.updateWithPattern(this.opt,g,this.optionalParams);this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animate=null===this.opt.animate?{}:this.opt.animate;this.animations={}},clear:function(){this.inherited(arguments);this.dyn=[];this.axes=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this},setAxis:function(d){d&&(void 0!=d.opt.min&&(this.datas[d.name].min=
d.opt.min),void 0!=d.opt.max&&(this.datas[d.name].max=d.opt.max));return this},addSeries:function(d){this.series.push(d);for(var g in d.data){var u=d.data[g],x=this.datas[g];x?(x.vlist.push(u),x.min=Math.min(x.min,u),x.max=Math.max(x.max,u)):(x="__"+g,this.axes.push(x),this[x]=g,this.datas[g]={min:u,max:u,vlist:[u]})}if(0>=this.labelKey.length)for(g in d.data)this.labelKey.push(g);return this},getSeriesStats:function(){return q.collectSimpleStats(this.series,function(d){return null===d})},render:function(d,
g){if(!this.dirty)return this;this.dirty=!1;this.cleanGroup();var u=this.group,x=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length)return this;var y=this.opt,B=x.axis,C=(d.width-g.l-g.r)/2,z=(d.height-g.t-g.b)/2,D=Math.min(C,z),E=y.font||B.majorTick&&B.majorTick.font||B.tick&&B.tick.font||"normal normal normal 7pt Tahoma",A=y.axisFont||B.tick&&B.tick.titleFont||"normal normal normal 11pt Tahoma",F=y.axisTickFontColor||B.majorTick&&B.majorTick.fontColor||B.tick&&B.tick.fontColor||
"silver",H=y.axisFontColor||B.tick&&B.tick.titleFontColor||"black",I=y.axisColor||B.tick&&B.tick.axisColor||"silver",L=y.spiderColor||B.tick&&B.tick.spiderColor||"silver",J=y.axisWidth||B.stroke&&B.stroke.width||2,O=y.spiderWidth||B.stroke&&B.stroke.width||2;B=y.seriesWidth||B.stroke&&B.stroke.width||2;var P=m.normalizedLength(m.splitFontString(A).size),fa=n._degToRad(y.startAngle),V=y.spiderOrigin,ba=3<=y.divisions?y.divisions:3,ka=y.markerSize,la=y.spiderType,ma=y.animationType,ha=-10>y.labelOffset?
y.labelOffset:-10;if(y.labels){D=v.map(this.series,function(ca){return ca.name},this);D=l.foldl1(l.map(D,function(ca){return m._base._getTextBox(ca,{font:x.series.font}).w},this),"Math.max(a, b)")/2;D=Math.min(C-2*D,z-P)+ha;var Z=D-ha}"radius"in y&&(D=y.radius,Z=D-ha);D/=1.2;C={cx:g.l+C,cy:g.t+z,r:D};for(z=0;z<this.series.length;z++){var W=this.series[z];if(this.dirty||W.dirty){if(W.cleanGroup(),ha=W.data,null!==ha&&(P=this._getObjectLength(ha),!Q||0>=Q.length)){var Q=[];var ia=[];var R=[];this._buildPoints(Q,
P,C,D,fa,!0,d);this._buildPoints(ia,P,C,D*V,fa,!0,d);this._buildPoints(R,P,C,Z,fa,!1,d);if(2<ba){var S=[];var N=[];for(ha=0;ha<ba-2;ha++)S[ha]=[],this._buildPoints(S[ha],P,C,D*(V+(1-V)*(ha+1)/(ba-1)),fa,!0,d),N[ha]=D*(V+(1-V)*(ha+1)/(ba-1))}}}else x.skip()}P=u.createGroup();I={color:I,width:J};z={color:L,width:O};for(ha=Q.length-1;0<=ha;--ha)L=Q[ha],O={x:L.x+.2*(L.x-C.cx),y:L.y+.2*(L.y-C.cy)},L={x:L.x+.2*(L.x-C.cx)/2,y:L.y+.2*(L.y-C.cy)/2},P.createLine({x1:C.cx,y1:C.cy,x2:O.x,y2:O.y}).setStroke(I),
this._drawArrow(P,O,L,I);P=u.createGroup();for(ha=R.length-1;0<=ha;--ha)L=R[ha],O=m._base._getTextBox(this.labelKey[ha],{font:A}).w||0,I=this.opt.htmlLabels&&"vml"!=m.renderer?"html":"gfx",L=t.createText[I](this.chart,P,r.isBodyLtr()||"html"!=I?L.x:L.x+O-d.width,L.y,"middle",this.labelKey[ha],A,H),this.opt.htmlLabels&&this.htmlElements.push(L);A=u.createGroup();if("polygon"==la){if(A.createPolyline(Q).setStroke(z),A.createPolyline(ia).setStroke(z),0<S.length)for(ha=S.length-1;0<=ha;--ha)A.createPolyline(S[ha]).setStroke(z)}else if(A.createCircle({cx:C.cx,
cy:C.cy,r:D}).setStroke(z),A.createCircle({cx:C.cx,cy:C.cy,r:D*V}).setStroke(z),0<N.length)for(ha=N.length-1;0<=ha;--ha)A.createCircle({cx:C.cx,cy:C.cy,r:N[ha]}).setStroke(z);P=this._getObjectLength(this.datas);H=u.createGroup();S=0;for(var X in this.datas){N=this.datas[X];Q=N.min;N=N.max;N-=Q;A=fa+2*Math.PI*S/P;for(z=0;z<ba;z++)R=Q+N*z/(ba-1),L=this._getCoordinate(C,D*(V+(1-V)*z/(ba-1)),A,d),R=this._getLabel(R),O=m._base._getTextBox(R,{font:E}).w||0,I=this.opt.htmlLabels&&"vml"!=m.renderer?"html":
"gfx",this.opt.htmlLabels&&this.htmlElements.push(t.createText[I](this.chart,H,r.isBodyLtr()||"html"!=I?L.x:L.x+O-d.width,L.y,"start",R,E,F));S++}this.chart.seriesShapes={};for(z=this.series.length-1;0<=z;z--)if(W=this.series[z],ha=W.data,null!==ha){E=x.next("spider",[y,W]);var aa=m.normalizeColor(E.series.fill);E={color:E.series.fill,width:B};aa.a=y.seriesFillAlpha;W.dyn={fill:aa,stroke:E};if(!W.hidden){var ea=[],Y=[];S=0;for(X in ha)N=this.datas[X],Q=N.min,N=N.max,N-=Q,F=ha[X],A=fa+2*Math.PI*S/
P,L=this._getCoordinate(C,D*(V+(1-V)*(F-Q)/N),A,d),ea.push(L),Y.push({sname:W.name,key:X,data:F}),S++;ea[ea.length]=ea[0];Y[Y.length]=Y[0];F=this._getBoundary(ea);var T=W.group;E=this._createSeriesEntry(T,this.oldSeriePoints[W.name]||ia,ea,aa,E,D,V,ka,ma);this.chart.seriesShapes[W.name]=E;this.oldSeriePoints[W.name]=ea;this._connectEvents({element:"spider_poly",index:z,id:"spider_poly_"+W.name,run:W,plot:this,shape:E.poly,parent:T,brect:F,cx:C.cx,cy:C.cy,cr:D,f:aa,s:u});this._connectEvents({element:"spider_plot",
index:z,id:"spider_plot_"+W.name,run:W,plot:this,shape:W.group});v.forEach(E.circles,function(ca,M){this._connectEvents({element:"spider_circle",index:M,id:"spider_circle_"+W.name+M,run:W,plot:this,shape:ca,parent:T,tdata:Y[M],cx:ea[M].x,cy:ea[M].y,f:aa,s:u})},this)}}return this},_createSeriesEntry:function(d,g,u,x,y,B,C,z,D){B=this.animate?g:u;var E=d.createPolyline(B).setFill(x).setStroke(y),A=[];for(C=0;C<B.length;C++){var F=B[C];F=d.createCircle({cx:F.x,cy:F.y,r:z}).setFill(x).setStroke(y);A.push(F)}this.animate&&
(x=v.map(u,function(H,I){var L=new f.Animation(K.delegate({duration:1E3,easing:D,curve:[g[I].y,H.y]},this.animate)),J=A[I];w.connect(L,"onAnimate",function(O){var P=E.getShape();P.points[I].y=O;E.setShape(P);P=J.getShape();P.cy=O;J.setShape(P)});return L},this),u=v.map(u,function(H,I){var L=new f.Animation(K.delegate({duration:1E3,easing:D,curve:[g[I].x,H.x]},this.animate)),J=A[I];w.connect(L,"onAnimate",function(O){var P=E.getShape();P.points[I].x=O;E.setShape(P);P=J.getShape();P.cx=O;J.setShape(P)});
return L},this),c.combine(x.concat(u)).play());return{group:d,poly:E,circles:A}},plotEvent:function(d){"spider_plot"==d.element&&("onmouseover"!=d.type||a("ie")||d.shape.moveToFront())},tooltipFunc:function(d){return"spider_circle"==d.element?d.tdata.sname+"\x3cbr/\x3e"+d.tdata.key+"\x3cbr/\x3e"+d.tdata.data:null},_getBoundary:function(d){for(var g=d[0].x,u=d[0].x,x=d[0].y,y=d[0].y,B=0;B<d.length;B++){var C=d[B];g=Math.max(C.x,g);x=Math.max(C.y,x);u=Math.min(C.x,u);y=Math.min(C.y,y)}return{x:u,y:y,
width:g-u,height:x-y}},_drawArrow:function(d,g,u,x){var y=Math.sqrt(Math.pow(u.x-g.x,2)+Math.pow(u.y-g.y,2)),B=(u.y-g.y)/y,C=(u.x-g.x)/y;d.createPolyline([g,{x:u.x+y/3*-B,y:u.y+y/3*C},{x:u.x+y/3*B,y:u.y+y/3*-C}]).setFill(x.color).setStroke(x)},_buildPoints:function(d,g,u,x,y,B,C){for(var z=0;z<g;z++)d.push(this._getCoordinate(u,x,y+2*Math.PI*z/g,C));B&&d.push(this._getCoordinate(u,x,y+2*Math.PI,C))},_getCoordinate:function(d,g,u,x){var y=d.cx+g*Math.cos(u);a("dojo-bidi")&&this.chart.isRightToLeft()&&
x&&(y=x.width-y);return{x:y,y:d.cy+g*Math.sin(u)}},_getObjectLength:function(d){var g=0;if(K.isObject(d))for(var u in d)g++;return g},_getLabel:function(d){return q.getLabel(d,this.opt.fixed,this.opt.precision)}})})},"dojox/charting/action2d/Highlight":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color dojo/_base/connect dojox/color/_base ./PlotAction dojo/fx/easing dojox/gfx/fx".split(" "),function(K,G,w,v,r,f,c,a){var b=function(t){return function(){return t}},p=function(t){t=
new r.Color(t);var m=t.toHsl();0==m.s?m.l=50>m.l?100:0:(m.s=100,m.l=50>m.l?75:75<m.l?50:m.l-50>75-m.l?50:75);m=r.fromHsl(m);m.a=t.a;return m},q=function(t){t=p(t);t.a=.7;return t};return G("dojox.charting.action2d.Highlight",f,{defaultParams:{duration:400,easing:c.backOut},optionalParams:{highlight:"red"},constructor:function(t,m,n){this.colorFunc=(t=n&&n.highlight)?K.isFunction(t)?t:b(t):p;this.connect()},process:function(t){if(t.shape&&t.type in this.overOutEvents&&"spider_circle"!=t.element&&"spider_plot"!=
t.element){"spider_poly"==t.element&&this.colorFunc==p&&(this.colorFunc=q);var m=t.run.name,n=t.index,k;m in this.anim?k=this.anim[m][n]:this.anim[m]={};if(k)k.action.stop(!0);else{k=t.shape.getFill();if(!(k&&k instanceof w))return;this.anim[m][n]=k={start:k,end:this.colorFunc(k)}}var l=k.start,h=k.end;if("onmouseout"==t.type){var e=l;l=h;h=e}k.action=a.animateFill({shape:t.shape,duration:this.duration,easing:this.easing,color:{start:l,end:h}});"onmouseout"==t.type&&v.connect(k.action,"onEnd",this,
function(){this.anim[m]&&delete this.anim[m][n]});k.action.play()}}})})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(K,G,w,v){K=G.getObject("color",!0,K);K.Color=w;K.blend=w.blendColors;K.fromRgb=w.fromRgb;K.fromHex=w.fromHex;K.fromArray=w.fromArray;K.fromString=w.fromString;K.greyscale=v.makeGrey;G.mixin(K,{fromCmy:function(r,f,c){G.isArray(r)?(f=r[1],c=r[2],r=r[0]):G.isObject(r)&&(f=r.m,c=r.y,r=r.c);return new w({r:Math.round(255*
(1-r/100)),g:Math.round(255*(1-f/100)),b:Math.round(255*(1-c/100))})},fromCmyk:function(r,f,c,a){G.isArray(r)?(f=r[1],c=r[2],a=r[3],r=r[0]):G.isObject(r)&&(f=r.m,c=r.y,a=r.b,r=r.c);a/=100;return new w({r:Math.round(255*(1-Math.min(1,r/100*(1-a)+a))),g:Math.round(255*(1-Math.min(1,f/100*(1-a)+a))),b:Math.round(255*(1-Math.min(1,c/100*(1-a)+a)))})},fromHsl:function(r,f,c){G.isArray(r)?(f=r[1],c=r[2],r=r[0]):G.isObject(r)&&(f=r.s,c=r.l,r=r.h);f/=100;for(c/=100;0>r;)r+=360;for(;360<=r;)r-=360;if(120>
r){var a=(120-r)/60;var b=r/60;r=0}else 240>r?(a=0,b=(240-r)/60,r=(r-120)/60):(a=(r-240)/60,b=0,r=(360-r)/60);a=2*f*Math.min(a,1)+(1-f);b=2*f*Math.min(b,1)+(1-f);r=2*f*Math.min(r,1)+(1-f);.5>c?(a*=c,b*=c,r*=c):(a=(1-c)*a+2*c-1,b=(1-c)*b+2*c-1,r=(1-c)*r+2*c-1);return new w({r:Math.round(255*a),g:Math.round(255*b),b:Math.round(255*r)})}});K.fromHsv=function(r,f,c){G.isArray(r)?(f=r[1],c=r[2],r=r[0]):G.isObject(r)&&(f=r.s,c=r.v,r=r.h);360==r&&(r=0);f/=100;c/=100;var a,b;if(0==f)var p=b=a=c;else{var q=
r/60;r=Math.floor(q);var t=q-r;q=c*(1-f);var m=c*(1-f*t);f=c*(1-f*(1-t));switch(r){case 0:a=c;p=f;b=q;break;case 1:a=m;p=c;b=q;break;case 2:a=q;p=c;b=f;break;case 3:a=q;p=m;b=c;break;case 4:a=f;p=q;b=c;break;case 5:a=c,p=q,b=m}}return new w({r:Math.round(255*a),g:Math.round(255*p),b:Math.round(255*b)})};G.extend(w,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var r=this.r/255,f=this.g/255,c=this.b/255;
var a=Math.min(1-r,1-f,1-c);return{c:Math.round((1-r-a)/(1-a)*100),m:Math.round((1-f-a)/(1-a)*100),y:Math.round((1-c-a)/(1-a)*100),b:Math.round(100*a)}},toHsl:function(){var r=this.r/255,f=this.g/255,c=this.b/255,a=Math.min(r,c,f),b=Math.max(r,f,c),p=b-a,q=0,t=0;a=(a+b)/2;0<a&&1>a&&(t=p/(.5>a?2*a:2-2*a));0<p&&(b==r&&b!=f&&(q+=(f-c)/p),b==f&&b!=c&&(q+=2+(c-r)/p),b==c&&b!=r&&(q+=4+(r-f)/p),q*=60);return{h:q,s:Math.round(100*t),l:Math.round(100*a)}},toHsv:function(){var r=this.r/255,f=this.g/255,c=this.b/
255,a=Math.max(r,f,c),b=a-Math.min(r,c,f),p=null,q=0==a?0:b/a;0==q?p=0:(p=r==a?60*(f-c)/b:f==a?120+60*(c-r)/b:240+60*(r-f)/b,0>p&&(p+=360));return{h:p,s:Math.round(100*q),v:Math.round(100*a)}}});return K})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(K,G,w,v){var r={};G.setObject("dojo.colors",r);var f=function(a,b,p){0>p&&++p;1<p&&--p;var q=6*p;return 1>q?a+(b-a)*q:1>2*p?b:2>3*p?a+(b-a)*(2/3-p)*6:a};K.colorFromRgb=w.fromRgb=function(a,
b){var p=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(p){var q=p[2].split(/\s*,\s*/),t=q.length;p=p[1];if("rgb"==p&&3==t||"rgba"==p&&4==t)return p=q[0],"%"==p.charAt(p.length-1)?(p=v.map(q,function(k){return 2.56*parseFloat(k)}),4==t&&(p[3]=q[3]),w.fromArray(p,b)):w.fromArray(q,b);if("hsl"==p&&3==t||"hsla"==p&&4==t){p=(parseFloat(q[0])%360+360)%360/360;var m=parseFloat(q[1])/100,n=parseFloat(q[2])/100;m=.5>=n?n*(m+1):n+m-n*m;n=2*n-m;p=[256*f(n,m,p+1/3),256*f(n,m,p),256*f(n,m,p-1/
3),1];4==t&&(p[3]=q[3]);return w.fromArray(p,b)}}return null};var c=function(a,b,p){a=Number(a);return isNaN(a)?p:a<b?b:a>p?p:a};w.prototype.sanitize=function(){this.r=Math.round(c(this.r,0,255));this.g=Math.round(c(this.g,0,255));this.b=Math.round(c(this.b,0,255));this.a=c(this.a,0,1);return this};r.makeGrey=w.makeGrey=function(a,b){return w.fromArray([a,a,a,b])};G.mixin(w.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,
228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,
140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],
greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,
178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,
255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,
128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return w})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect",
"dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional"],function(K,G,w,v,r){var f=v.backOut;return G("dojox.charting.action2d.PlotAction",w,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(c,a,b){this.anim={};b||(b={});this.duration=b.duration?b.duration:400;this.easing=b.easing?b.easing:f},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(K.disconnect(this.handle),this.handle=null)},reset:function(){},
destroy:function(){this.inherited(arguments);r.forIn(this.anim,function(c){r.forIn(c,function(a){a.action.stop(!0)})});this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(K,G,w){return G("dojox.charting.action2d.Base",w,{constructor:function(v,r){this.chart=v;this.plot=r?K.isString(r)?this.chart.getPlot(r):r:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},
"dojox/charting/action2d/Magnify":function(){define("dojo/_base/connect dojo/_base/declare ./PlotAction dojox/gfx/matrix dojox/gfx/fx dojo/fx dojo/fx/easing".split(" "),function(K,G,w,v,r,f,c){return G("dojox.charting.action2d.Magnify",w,{defaultParams:{duration:400,easing:c.backOut,scale:2},optionalParams:{},constructor:function(a,b,p){this.scale=p&&"number"==typeof p.scale?p.scale:2;this.connect()},process:function(a){if(a.shape&&a.type in this.overOutEvents&&"cx"in a&&"cy"in a&&"spider_plot"!=
a.element&&"spider_poly"!=a.element){var b=a.run.name,p=a.index,q=[],t;b in this.anim?t=this.anim[b][p]:this.anim[b]={};t?t.action.stop(!0):this.anim[b][p]=t={};if("onmouseover"==a.type){var m=v.identity;var n=this.scale}else m=v.scaleAt(this.scale,a.cx,a.cy),n=1/this.scale;m={shape:a.shape,duration:this.duration,easing:this.easing,transform:[{name:"scaleAt",start:[1,a.cx,a.cy],end:[n,a.cx,a.cy]},m]};a.shape&&q.push(r.animateTransform(m));a.outline&&(m.shape=a.outline,q.push(r.animateTransform(m)));
a.shadow&&(m.shape=a.shadow,q.push(r.animateTransform(m)));q.length?(t.action=f.combine(q),"onmouseout"==a.type&&K.connect(t.action,"onEnd",this,function(){this.anim[b]&&delete this.anim[b][p]}),t.action.play()):delete this.anim[b][p]}}})})},"dojox/charting/action2d/MoveSlice":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/array ./PlotAction dojo/fx/easing dojox/gfx/matrix dojox/gfx/fx dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),function(K,
G,w,v,r,f,c,a){return G("dojox.charting.action2d.MoveSlice",v,{defaultParams:{duration:400,easing:r.backOut,scale:1.05,shift:7},optionalParams:{},constructor:function(b,p,q){q||(q={});this.scale="number"==typeof q.scale?q.scale:1.05;this.shift="number"==typeof q.shift?q.shift:7;this.connect()},process:function(b){if(b.shape&&"slice"==b.element&&b.type in this.overOutEvents){if(!this.angles){var p=f._degToRad(b.plot.opt.startAngle);this.angles="number"==typeof b.run.data[0]?a.map(a.scanl(b.run.data,
"+",0),"* 2 * Math.PI / this",a.foldl(b.run.data,"+",0)):a.map(a.scanl(b.run.data,"a + b.y",0),"* 2 * Math.PI / this",a.foldl(b.run.data,"a + b.y",0));this.angles=w.map(this.angles,function(d){return d+p})}var q=b.index;var t=(this.angles[q]+this.angles[q+1])/2;var m=f.rotateAt(-t,b.cx,b.cy),n=f.rotateAt(t,b.cx,b.cy);(t=this.anim[q])?t.action.stop(!0):this.anim[q]=t={};if("onmouseover"==b.type){var k=0;var l=this.shift;var h=1;var e=this.scale}else k=this.shift,l=0,h=this.scale,e=1;t.action=c.animateTransform({shape:b.shape,
duration:this.duration,easing:this.easing,transform:[n,{name:"translate",start:[k,0],end:[l,0]},{name:"scaleAt",start:[h,b.cx,b.cy],end:[e,b.cx,b.cy]},m]});"onmouseout"==b.type&&K.connect(t.action,"onEnd",this,function(){delete this.anim[q]});t.action.play()}},reset:function(){delete this.angles}})})},"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(K,G,w){var v={};G.mixin(w,{scanl:function(r,f,c,a){"string"==typeof r&&(r=r.split(""));a=a||
K.global;f=w.lambda(f);var b,p;if(G.isArray(r)){var q=Array((b=r.length)+1);q[0]=c;for(p=0;p<b;c=f.call(a,c,r[p],p,r),q[++p]=c);}else if("function"==typeof r.hasNext&&"function"==typeof r.next)for(q=[c],p=0;r.hasNext();q.push(c=f.call(a,c,r.next(),p++,r)));else for(p in q=[c],r)p in v||q.push(c=f.call(a,c,r[p],p,r));return q},scanl1:function(r,f,c){"string"==typeof r&&(r=r.split(""));c=c||K.global;f=w.lambda(f);var a;var b=!0;if(G.isArray(r)){var p=Array(b=r.length);p[0]=a=r[0];for(var q=1;q<b;p[q]=
a=f.call(c,a,r[q],q,r),++q);}else if("function"==typeof r.hasNext&&"function"==typeof r.next){if(r.hasNext())for(p=[a=r.next()],q=1;r.hasNext();p.push(a=f.call(c,a,r.next(),q++,r)));}else for(q in r)q in v||(b?(p=[a=r[q]],b=!1):p.push(a=f.call(c,a,r[q],q,r)));return p},scanr:function(r,f,c,a){"string"==typeof r&&(r=r.split(""));a=a||K.global;f=w.lambda(f);var b=r.length,p=Array(b+1),q=b;for(p[b]=c;0<q;--q,c=f.call(a,c,r[q],q,r),p[q]=c);return p},scanr1:function(r,f,c){"string"==typeof r&&(r=r.split(""));
c=c||K.global;f=w.lambda(f);var a=r.length,b=Array(a),p=r[a-1];--a;for(b[a]=p;0<a;--a,p=f.call(c,p,r[a],a,r),b[a]=p);return b}})})},"dojox/charting/action2d/Shake":function(){define("dojo/_base/connect dojo/_base/declare ./PlotAction dojo/fx dojo/fx/easing dojox/gfx/matrix dojox/gfx/fx".split(" "),function(K,G,w,v,r,f,c){return G("dojox.charting.action2d.Shake",w,{defaultParams:{duration:400,easing:r.backOut,shiftX:3,shiftY:3},optionalParams:{},constructor:function(a,b,p){p||(p={});this.shiftX="number"==
typeof p.shiftX?p.shiftX:3;this.shiftY="number"==typeof p.shiftY?p.shiftY:3;this.connect()},process:function(a){if(a.shape&&a.type in this.overOutEvents){var b=a.run.name,p=a.index,q=[],t;b in this.anim?t=this.anim[b][p]:this.anim[b]={};t?t.action.stop(!0):this.anim[b][p]=t={};var m={shape:a.shape,duration:this.duration,easing:this.easing,transform:[{name:"translate",start:[this.shiftX,this.shiftY],end:[0,0]},f.identity]};a.shape&&q.push(c.animateTransform(m));a.oultine&&(m.shape=a.outline,q.push(c.animateTransform(m)));
a.shadow&&(m.shape=a.shadow,q.push(c.animateTransform(m)));q.length?(t.action=v.combine(q),"onmouseout"==a.type&&K.connect(t.action,"onEnd",this,function(){this.anim[b]&&delete this.anim[b][p]}),t.action.play()):delete this.anim[b][p]}}})})},"dojox/charting/action2d/Tooltip":function(){define("dijit/Tooltip dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/connect dojo/dom-style ./PlotAction dojox/gfx/matrix dojo/has dojo/has!dojo-bidi?../bidi/action2d/Tooltip dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){var t=function(k,l){var h=k.run&&k.run.data&&k.run.data[k.index];return h&&"number"!=typeof h&&(h.tooltip||h.text)?h.tooltip||h.text:l.tooltipFunc?l.tooltipFunc(k):k.y},m=Math.PI/4,n=Math.PI/2;f=w(b("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",c,{defaultParams:{text:t,mouseOver:!0,defaultPosition:["after-centered","before-centered"]},optionalParams:{},constructor:function(k,l,h){this.text=h&&h.text?h.text:t;this.mouseOver=
h&&void 0!=h.mouseOver?h.mouseOver:!0;this.defaultPosition=h&&void 0!=h.defaultPosition?h.defaultPosition:["after-centered","before-centered"];this.connect()},process:function(k){if("onplotreset"===k.type||"onmouseout"===k.type)K.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===k.type&&delete this.angles;else if(!(!k.shape||this.mouseOver&&"onmouseover"!==k.type||!this.mouseOver&&"onclick"!==k.type)){var l={type:"rect"},h=this.defaultPosition;switch(k.element){case "marker":l.x=k.cx;l.y=
k.cy;l.w=l.h=1;break;case "circle":l.x=k.cx-k.cr;l.y=k.cy-k.cr;l.w=l.h=2*k.cr;break;case "spider_circle":l.x=k.cx;l.y=k.cy;l.w=l.h=1;break;case "spider_plot":return;case "column":h=["above-centered","below-centered"];case "bar":l=G.clone(k.shape.getShape());l.w=l.width;l.h=l.height;break;case "candlestick":l.x=k.x;l.y=k.y;l.w=k.width;l.h=k.height;break;default:if(!this.angles){var e="number"==typeof k.run.data[0]?q.map(k.run.data,"x ? Math.max(x, 0) : 0"):q.map(k.run.data,"x ? Math.max(x.y, 0) : 0");
this.angles=q.map(q.scanl(e,"+",0),"* 2 * Math.PI / this",q.foldl(e,"+",0))}e=a._degToRad(k.plot.opt.startAngle);var d=(this.angles[k.index]+this.angles[k.index+1])/2+e;l.x=k.cx+k.cr*Math.cos(d);l.y=k.cy+k.cr*Math.sin(d);l.w=l.h=1;e&&(0>d||d>2*Math.PI)&&(d=Math.abs(2*Math.PI-Math.abs(d)));d<m||(d<n+m?h=["below-centered","above-centered"]:d<Math.PI+m?h=["before-centered","after-centered"]:d<2*Math.PI-m&&(h=["above-centered","below-centered"]))}b("dojo-bidi")&&this._recheckPosition(k,l,h);e=this.chart.getCoords();
l.x+=e.x;l.y+=e.y;l.x=Math.round(l.x);l.y=Math.round(l.y);l.w=Math.ceil(l.w);l.h=Math.ceil(l.h);this.aroundRect=l;(k=this.text(k,this.plot))&&K.show(this._format(k),this.aroundRect,h);this.mouseOver||(this._handle=r.connect(v.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(k,l,h){},_format:function(k){return k}});return b("dojo-bidi")?w("dojox.charting.action2d.Tooltip",[f,p]):f})},"dojox/charting/themes/ThreeD":function(){define("dojo/_base/lang dojo/_base/array ../Theme ./gradientGenerator ./PrimaryColors dojo/colors ./common".split(" "),
function(K,G,w,v,r,f){var c={type:"linear",space:"shape",x1:0,y1:0,x2:100,y2:0},a=[{o:0,i:174},{o:.08,i:231},{o:.18,i:237},{o:.3,i:231},{o:.39,i:221},{o:.49,i:206},{o:.58,i:187},{o:.68,i:165},{o:.8,i:128},{o:.9,i:102},{o:1,i:174}],b=G.map("#f00 #0f0 #00f #ff0 #0ff #f0f ./common".split(" "),function(p){var q=K.delegate(c);p=(q.colors=v.generateGradientByIntensity(p,a))[2].color;p.r+=100;p.g+=100;p.b+=100;p.sanitize();return q});f.ThreeD=r.clone();f.ThreeD.series.shadow={dx:1,dy:1,width:3,color:[0,
0,0,.15]};f.ThreeD.next=function(p,q,t){if("bar"==p||"column"==p){var m=this._current%this.seriesThemes.length,n=this.seriesThemes[m],k=n.fill;n.fill=b[m];m=w.prototype.next.apply(this,arguments);n.fill=k;return m}return w.prototype.next.apply(this,arguments)};return f.ThreeD})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(K,G,w,v,r,f){var c=G("dojox.charting.Theme",
v,{});K.mixin(c,{defineColors:function(a){a=a||{};var b=[],p=a.num||5;if(a.colors){var q=a.colors.length;for(var t=0;t<p;t++)b.push(a.colors[t%q]);return b}return a.hue?f.generate(r.fromHsv(a.hue,a.saturation||100,((a.high||90)+(a.low||30))/2),"monochromatic").colors:a.generator?r.Palette.generate(a.base,a.generator).colors:b},generateGradient:function(a,b,p){a=K.delegate(a);a.colors=[{offset:0,color:b},{offset:1,color:p}];return a},generateHslColor:function(a,b){a=new w(a);var p=a.toHsl();p=r.fromHsl(p.h,
p.s,b);p.a=a.a;return p},generateHslGradient:function(a,b,p,q){a=new w(a);var t=a.toHsl();p=r.fromHsl(t.h,t.s,p);q=r.fromHsl(t.h,t.s,q);p.a=q.a=a.a;return c.generateGradient(b,p,q)}});c.defaultMarkers=v.defaultMarkers;c.defaultColors=v.defaultColors;c.defaultTheme=v.defaultTheme;return c})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(K,G,w){function v(b,p,q){var t=new w.Palette;t.colors=[];G.forEach(b.colors,function(m){t.colors.push(new w.Color({r:Math.min(255,
Math.max(0,"dr"==p?m.r+q:m.r)),g:Math.min(255,Math.max(0,"dg"==p?m.g+q:m.g)),b:Math.min(255,Math.max(0,"db"==p?m.b+q:m.b)),a:Math.min(1,Math.max(0,"da"==p?m.a+q:m.a))}))});return t}function r(b,p,q){var t=new w.Palette;t.colors=[];G.forEach(b.colors,function(m){m=m.toCmy();t.colors.push(w.fromCmy(Math.min(100,Math.max(0,"dc"==p?m.c+q:m.c)),Math.min(100,Math.max(0,"dm"==p?m.m+q:m.m)),Math.min(100,Math.max(0,"dy"==p?m.y+q:m.y))))});return t}function f(b,p,q){var t=new w.Palette;t.colors=[];G.forEach(b.colors,
function(m){m=m.toCmyk();t.colors.push(w.fromCmyk(Math.min(100,Math.max(0,"dc"==p?m.c+q:m.c)),Math.min(100,Math.max(0,"dm"==p?m.m+q:m.m)),Math.min(100,Math.max(0,"dy"==p?m.y+q:m.y)),Math.min(100,Math.max(0,"dk"==p?m.b+q:m.b))))});return t}function c(b,p,q){var t=new w.Palette;t.colors=[];G.forEach(b.colors,function(m){m=m.toHsl();t.colors.push(w.fromHsl(("dh"==p?m.h+q:m.h)%360,Math.min(100,Math.max(0,"ds"==p?m.s+q:m.s)),Math.min(100,Math.max(0,"dl"==p?m.l+q:m.l))))});return t}function a(b,p,q){var t=
new w.Palette;t.colors=[];G.forEach(b.colors,function(m){m=m.toHsv();t.colors.push(w.fromHsv(("dh"==p?m.h+q:m.h)%360,Math.min(100,Math.max(0,"ds"==p?m.s+q:m.s)),Math.min(100,Math.max(0,"dv"==p?m.v+q:m.v))))});return t}w.Palette=function(b){this.colors=[];b instanceof w.Palette?this.colors=b.colors.slice(0):b instanceof w.Color?this.colors=[null,null,b,null,null]:K.isArray(b)?this.colors=G.map(b.slice(0),function(p){return K.isString(p)?new w.Color(p):p}):K.isString(b)&&(this.colors=[null,null,new w.Color(b),
null,null])};K.extend(w.Palette,{transform:function(b){var p=v;if(b.use){var q=b.use.toLowerCase();0==q.indexOf("hs")?p="l"==q.charAt(2)?c:a:0==q.indexOf("cmy")&&(p="k"==q.charAt(3)?f:r)}else if("dc"in b||"dm"in b||"dy"in b)p="dk"in b?f:r;else if("dh"in b||"ds"in b)p="dv"in b?a:c;q=this;for(var t in b)"use"!=t&&(q=p(q,t,b[t]));return q},clone:function(){return new w.Palette(this)}});K.mixin(w.Palette,{generators:{analogous:function(b){var p=b.high||60,q=b.low||18;b=(K.isString(b.base)?new w.Color(b.base):
b.base).toHsv();var t=Math.max(10,95>=b.s?b.s+5:100-(b.s-95)),m=92<=b.v?b.v-9:Math.max(b.v+9,20),n=90>=b.v?Math.max(b.v+5,20):95+Math.ceil((b.v-90)/2),k=[t,1<b.s?b.s-1:21-b.s,b.s,t,t],l=[m,n,b.v,m,n];return new w.Palette(G.map([(b.h+q+360)%360,(b.h+Math.round(q/2)+360)%360,b.h,(b.h-Math.round(p/2)+360)%360,(b.h-p+360)%360],function(h,e){return w.fromHsv(h,k[e],l[e])}))},monochromatic:function(b){b=K.isString(b.base)?new w.Color(b.base):b.base;var p=b.toHsv(),q=9<p.s-30?p.s-30:p.s+30,t=p.s,m=20<p.v-
20?p.v-20:p.v+60,n=20<p.v-50?p.v-50:p.v+30;return new w.Palette([w.fromHsv(p.h,q,100-.8*(100-p.v)),w.fromHsv(p.h,t,n),b,w.fromHsv(p.h,q,n),w.fromHsv(p.h,t,m)])},triadic:function(b){b=K.isString(b.base)?new w.Color(b.base):b.base;var p=b.toHsv(),q=(p.h-157+360)%360,t=90<p.s?p.s-10:p.s+10,m=95<p.s?p.s-5:p.s+5,n=20<p.v-20?p.v-20:p.v+20,k=20<p.v-30?p.v-30:p.v+30,l=70<p.v-30?p.v-30:p.v+30;return new w.Palette([w.fromHsv((p.h+57+360)%360,20<p.s?p.s-10:p.s+10,p.v),w.fromHsv(p.h,t,k),b,w.fromHsv(q,t,n),w.fromHsv(q,
m,l)])},complementary:function(b){b=K.isString(b.base)?new w.Color(b.base):b.base;var p=b.toHsv(),q=360>2*p.h+137?2*p.h+137:Math.floor(p.h/2)-137,t=100-.9*(100-p.s),m=Math.min(100,p.s+20),n=20<p.v?p.v-30:p.v+30;return new w.Palette([w.fromHsv(p.h,Math.max(p.s-10,0),Math.min(100,p.v+30)),w.fromHsv(p.h,t,n),b,w.fromHsv(q,m,n),w.fromHsv(q,p.s,p.v)])},splitComplementary:function(b){var p=K.isString(b.base)?new w.Color(b.base):b.base,q=b.da||30;b=p.toHsv();var t=360>2*b.h+137?2*b.h+137:Math.floor(b.h/
2)-137,m=(t-q+360)%360;q=(t+q)%360;t=100-.9*(100-b.s);var n=Math.min(100,b.s+20),k=20<b.v?b.v-30:b.v+30;return new w.Palette([w.fromHsv(m,Math.max(b.s-10,0),Math.min(100,b.v+30)),w.fromHsv(m,t,k),p,w.fromHsv(q,n,k),w.fromHsv(q,b.s,b.v)])},compound:function(b){b=K.isString(b.base)?new w.Color(b.base):b.base;var p=b.toHsv(),q=360>2*p.h+18?2*p.h+18:Math.floor(p.h/2)-18,t=360>2*p.h+120?2*p.h+120:Math.floor(p.h/2)-120,m=360>2*p.h+99?2*p.h+99:Math.floor(p.h/2)-99,n=80<p.s-10?p.s-10:p.s+10,k=10<p.s-25?p.s-
25:p.s+25,l=80<p.v-20?p.v-20:p.v+20,h=Math.max(p.v,20);return new w.Palette([w.fromHsv(q,10<p.s-40?p.s-40:p.s+40,10<p.v-40?p.v-40:p.v+40),w.fromHsv(q,n,l),b,w.fromHsv(t,k,h),w.fromHsv(m,n,l)])},shades:function(b){b=K.isString(b.base)?new w.Color(b.base):b.base;var p=b.toHsv(),q=100==p.s&&0==p.v?0:p.s,t=20<=p.v-25?p.v-25:p.v+55,m=20<=p.v-75?p.v-75:p.v+5,n=Math.max(p.v-10,20);return new w.Palette([new w.fromHsv(p.h,q,20<p.v-50?p.v-50:p.v+30),new w.fromHsv(p.h,q,t),b,new w.fromHsv(p.h,q,m),new w.fromHsv(p.h,
q,n)])}},generate:function(b,p){if(K.isFunction(p))return p({base:b});if(w.Palette.generators[p])return w.Palette.generators[p]({base:b});throw Error("dojox.color.Palette.generate: the specified generator ('"+p+"') does not exist.");}});return w.Palette})},"dojox/charting/themes/gradientGenerator":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color ../Theme dojox/color/_base ./common".split(" "),function(K,G,w,v,r,f){K=K.getObject("gradientGenerator",!0,f);K.generateFills=function(c,
a,b,p){return G.map(c,function(q){return v.generateHslGradient(q,a,b,p)})};K.updateFills=function(c,a,b,p){G.forEach(c,function(q){q.fill&&!q.fill.type&&(q.fill=v.generateHslGradient(q.fill,a,b,p))})};K.generateMiniTheme=function(c,a,b,p,q){return G.map(c,function(t){t=new r.Color(t);return{fill:v.generateHslGradient(t,a,b,p),stroke:{color:v.generateHslColor(t,q)}}})};K.generateGradientByIntensity=function(c,a){c=new w(c);return G.map(a,function(b){var p=b.i/255;return{offset:b.o,color:new w([c.r*
p,c.g*p,c.b*p,c.a])}})};return K})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],function(K){return K.getObject("dojox.charting.themes",!0)})},"dojox/charting/themes/PrimaryColors":function(){define(["../Theme","./gradientGenerator","./common"],function(K,G,w){w.PrimaryColors=new K({seriesThemes:G.generateMiniTheme("#f00 #0f0 #00f #ff0 #0ff #f0f ./common".split(" "),{type:"linear",space:"plot",x1:0,y1:0,x2:0,y2:100},90,40,25)});return w.PrimaryColors})},"dojox/charting/action2d/MouseZoomAndPan":function(){define("dojo/_base/declare dojo/_base/window dojo/_base/array dojo/_base/event dojo/_base/connect dojo/mouse ./ChartAction dojo/sniff dojo/dom-prop dojo/keys dojo/has!dojo-bidi?../bidi/action2d/ZoomAndPan".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){var t=a("mozilla")?3:120,m={none:function(n){return!n.ctrlKey&&!n.altKey&&!n.shiftKey},ctrl:function(n){return n.ctrlKey&&!n.altKey&&!n.shiftKey},alt:function(n){return!n.ctrlKey&&n.altKey&&!n.shiftKey},shift:function(n){return!n.ctrlKey&&!n.altKey&&n.shiftKey}};c=K(a("dojo-bidi")?"dojox.charting.action2d.NonBidiMouseZoomAndPan":"dojox.charting.action2d.MouseZoomAndPan",c,{defaultParams:{axis:"x",scaleFactor:1.2,maxScale:100,enableScroll:!0,enableDoubleClickZoom:!0,
enableKeyZoom:!0,keyZoomModifier:"ctrl"},optionalParams:{},constructor:function(n,k,l){this._listeners=[{eventName:f.wheel,methodName:"onMouseWheel"}];l||(l={});this.axis=l.axis?l.axis:"x";this.scaleFactor=l.scaleFactor?l.scaleFactor:1.2;this.maxScale=l.maxScale?l.maxScale:100;this.enableScroll=void 0!=l.enableScroll?l.enableScroll:!0;this.enableDoubleClickZoom=void 0!=l.enableDoubleClickZoom?l.enableDoubleClickZoom:!0;this.enableKeyZoom=void 0!=l.enableKeyZoom?l.enableKeyZoom:!0;this.keyZoomModifier=
l.keyZoomModifier?l.keyZoomModifier:"ctrl";this.enableScroll&&this._listeners.push({eventName:"onmousedown",methodName:"onMouseDown"});this.enableDoubleClickZoom&&this._listeners.push({eventName:"ondblclick",methodName:"onDoubleClick"});this.enableKeyZoom&&this._listeners.push({eventName:"keypress",methodName:"onKeyPress"});this._handles=[];this.connect()},_disconnectHandles:function(){a("ie")&&this.chart.node.releaseCapture();w.forEach(this._handles,r.disconnect);this._handles=[]},connect:function(){this.inherited(arguments);
this.enableKeyZoom&&b.set(this.chart.node,"tabindex","0")},disconnect:function(){this.inherited(arguments);this.enableKeyZoom&&b.set(this.chart.node,"tabindex","-1");this._disconnectHandles()},onMouseDown:function(n){var k=this.chart,l=k.getAxis(this.axis);this._startCoord=l.vertical?n.pageY:n.pageX;this._startOffset=l.getWindowOffset();this._isPanning=!0;a("ie")?(this._handles.push(r.connect(this.chart.node,"onmousemove",this,"onMouseMove")),this._handles.push(r.connect(this.chart.node,"onmouseup",
this,"onMouseUp")),this.chart.node.setCapture()):(this._handles.push(r.connect(G.doc,"onmousemove",this,"onMouseMove")),this._handles.push(r.connect(G.doc,"onmouseup",this,"onMouseUp")));k.node.focus();v.stop(n)},onMouseMove:function(n){if(this._isPanning){var k=this.chart,l=k.getAxis(this.axis);n=this._getDelta(n);var h=l.getScaler().bounds;h=h.span/(h.upper-h.lower);l=l.getWindowScale();k.setAxisWindow(this.axis,l,this._startOffset-n/h/l);k.render()}},onMouseUp:function(n){this._isPanning=!1;this._disconnectHandles()},
onMouseWheel:function(n){var k=n.wheelDelta/t;-1<k&&0>k?k=-1:0<k&&1>k&&(k=1);this._onZoom(k,n)},onKeyPress:function(n){m[this.keyZoomModifier](n)&&("+"==n.keyChar||n.keyCode==p.NUMPAD_PLUS?this._onZoom(1,n):("-"==n.keyChar||n.keyCode==p.NUMPAD_MINUS)&&this._onZoom(-1,n))},onDoubleClick:function(n){var k=this.chart,l=k.getAxis(this.axis),h=1/this.scaleFactor;if(1==l.getWindowScale()){var e=l.getScaler();l=e.bounds.from;e=e.bounds.to;var d=(l+e)/2,g=this.plot.toData({x:n.pageX,y:n.pageY})[this.axis];
k.zoomIn(this.axis,[h*(l-d)+g,h*(e-d)+g])}else k.setAxisWindow(this.axis,1,0),k.render();v.stop(n)},_onZoom:function(n,k){var l=0>n?Math.abs(n)*this.scaleFactor:1/(Math.abs(n)*this.scaleFactor),h=this.chart,e=h.getAxis(this.axis);if(!(e.getWindowScale()/l>this.maxScale)){var d=e.getScaler();e=d.bounds.from;d=d.bounds.to;var g="keypress"==k.type?(e+d)/2:this.plot.toData({x:k.pageX,y:k.pageY})[this.axis];h.zoomIn(this.axis,[l*(e-g)+g,l*(d-g)+g]);v.stop(k)}},_getDelta:function(n){return this.chart.getAxis(this.axis).vertical?
this._startCoord-n.pageY:n.pageX-this._startCoord}});return a("dojo-bidi")?K("dojox.charting.action2d.MouseZoomAndPan",[c,q]):c})},"dojox/charting/action2d/ChartAction":function(){define(["dojo/_base/connect","dojo/_base/declare","./Base"],function(K,G,w){return G("dojox.charting.action2d.ChartAction",w,{constructor:function(v,r){},connect:function(){for(var v=0;v<this._listeners.length;++v)this._listeners[v].handle=K.connect(this.chart.node,this._listeners[v].eventName,this,this._listeners[v].methodName)},
disconnect:function(){for(var v=0;v<this._listeners.length;++v)K.disconnect(this._listeners[v].handle),delete this._listeners[v].handle}})})},"dojox/charting/action2d/TouchZoomAndPan":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/event dojo/sniff ./ChartAction ../Element dojo/touch ../plot2d/common dojo/has!dojo-bidi?../bidi/action2d/ZoomAndPan".split(" "),function(K,G,w,v,r,f,c,a,b){var p=G(f,{constructor:function(q){},render:function(){this.isDirty()&&(this.cleanGroup(),this.group.createRect({width:this.chart.dim.width,
height:this.chart.dim.height}).setFill("rgba(0,0,0,0)"))},clear:function(){this.dirty=!0;this.chart.stack[0]!=this&&this.chart.movePlotToFront(this.name);return this},getSeriesStats:function(){return K.delegate(a.defaultStats)},initializeScalers:function(){return this},isDirty:function(){return this.dirty}});r=G(v("dojo-bidi")?"dojox.charting.action2d.NonBidiTouchZoomAndPan":"dojox.charting.action2d.TouchZoomAndPan",r,{defaultParams:{axis:"x",scaleFactor:1.2,maxScale:100,enableScroll:!0,enableZoom:!0},
optionalParams:{},constructor:function(q,t,m){this._listeners=[{eventName:c.press,methodName:"onTouchStart"},{eventName:c.move,methodName:"onTouchMove"},{eventName:c.release,methodName:"onTouchEnd"}];m||(m={});this.axis=m.axis?m.axis:"x";this.scaleFactor=m.scaleFactor?m.scaleFactor:1.2;this.maxScale=m.maxScale?m.maxScale:100;this.enableScroll=void 0!=m.enableScroll?m.enableScroll:!0;this.enableZoom=void 0!=m.enableScroll?m.enableZoom:!0;this._uName="touchZoomPan"+this.axis;this.connect()},connect:function(){this.inherited(arguments);
-1!=this.chart.surface.declaredClass.indexOf("svg")&&this.chart.addPlot(this._uName,{type:p})},disconnect:function(){-1!=this.chart.surface.declaredClass.indexOf("svg")&&this.chart.removePlot(this._uName);this.inherited(arguments)},onTouchStart:function(q){var t=this.chart,m=t.getAxis(this.axis),n=q.touches?q.touches.length:1,k=q.touches?q.touches[0]:q,l=this._startPageCoord;this._startPageCoord={x:k.pageX,y:k.pageY};(this.enableZoom||this.enableScroll)&&t._delayedRenderHandle&&t.render();this.enableZoom&&
2<=n?(this._startTime=0,this._endPageCoord={x:q.touches[1].pageX,y:q.touches[1].pageY},q={x:(this._startPageCoord.x+this._endPageCoord.x)/2,y:(this._startPageCoord.y+this._endPageCoord.y)/2},t=m.getScaler(),this._initScale=m.getWindowScale(),this._middleCoord=(this._initData=this.plot.toData())(q)[this.axis],this._startCoord=t.bounds.from,this._endCoord=t.bounds.to):(q.touches&&1!=q.touches.length?this._startTime=0:this._startTime?250>(new Date).getTime()-this._startTime&&30>Math.abs(this._startPageCoord.x-
l.x)&&30>Math.abs(this._startPageCoord.y-l.y)?(this._startTime=0,this.onDoubleTap(q)):this._startTime=0:this._startTime=(new Date).getTime(),this.enableScroll&&(this._startScroll(m),w.stop(q)))},onTouchMove:function(q){var t=this.chart,m=t.getAxis(this.axis),n=q.touches?q.touches.length:1,k=m.vertical?"pageY":"pageX";m=m.vertical?"y":"x";this._startTime=0;this.enableZoom&&2<=n?(n=(this._endPageCoord[m]-this._startPageCoord[m])/(q.touches[1][k]-q.touches[0][k]),this._initScale/n>this.maxScale||(k=
this._initData({x:(q.touches[1].pageX+q.touches[0].pageX)/2,y:(q.touches[1].pageY+q.touches[0].pageY)/2})[this.axis],t.zoomIn(this.axis,[n*(this._startCoord-k)+this._middleCoord,n*(this._endCoord-k)+this._middleCoord]),w.stop(q))):this.enableScroll&&(n=this._getDelta(q),t.setAxisWindow(this.axis,this._lastScale,this._initOffset-n/this._lastFactor/this._lastScale),t.delayedRender(),w.stop(q))},onTouchEnd:function(q){var t=this.chart.getAxis(this.axis);q.touches&&1!=q.touches.length||!this.enableScroll||
(q=q.touches?q.touches[0]:q,this._startPageCoord={x:q.pageX,y:q.pageY},this._startScroll(t))},_startScroll:function(q){var t=q.getScaler().bounds;this._initOffset=q.getWindowOffset();this._lastScale=q.getWindowScale();this._lastFactor=t.span/(t.upper-t.lower)},onDoubleTap:function(q){var t=this.chart,m=t.getAxis(this.axis),n=1/this.scaleFactor;if(1==m.getWindowScale()){var k=m.getScaler();m=k.bounds.from;k=k.bounds.to;var l=(m+k)/2,h=this.plot.toData(this._startPageCoord)[this.axis];t.zoomIn(this.axis,
[n*(m-l)+h,n*(k-l)+h])}else t.setAxisWindow(this.axis,1,0),t.render();w.stop(q)},_getDelta:function(q){var t=this.chart.getAxis(this.axis),m=t.vertical?"pageY":"pageX",n=t.vertical?"y":"x";q=q.touches?q.touches[0]:q;return t.vertical?this._startPageCoord[n]-q[m]:q[m]-this._startPageCoord[n]}});return v("dojo-bidi")?G("dojox.charting.action2d.TouchZoomAndPan",[r,b]):r})},"dojox/charting/action2d/MouseIndicator":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/window dojo/sniff ./ChartAction ./_IndicatorElement dojox/lang/utils dojo/_base/event dojo/_base/array".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return G("dojox.charting.action2d.MouseIndicator",f,{defaultParams:{series:"",vertical:!0,autoScroll:!0,fixed:!0,precision:0,lines:!0,labels:!0,markers:!0},optionalParams:{lineStroke:{},outlineStroke:{},shadowStroke:{},lineFill:{},stroke:{},outline:{},shadow:{},fill:{},fillFunc:null,labelFunc:null,font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerSymbol:"",offset:{},start:!1,mouseOver:!1},constructor:function(q,t,m){this.opt=K.clone(this.defaultParams);
a.updateWithObject(this.opt,m);a.updateWithPattern(this.opt,m,this.optionalParams);this._listeners=this.opt.mouseOver?[{eventName:"onmousemove",methodName:"onMouseMove"}]:[{eventName:"onmousedown",methodName:"onMouseDown"}];this._uName="mouseIndicator"+this.opt.series;this._handles=[];this.connect()},_disconnectHandles:function(){r("ie")&&this.chart.node.releaseCapture();p.forEach(this._handles,w.disconnect);this._handles=[]},connect:function(){this.inherited(arguments);this.chart.addPlot(this._uName,
{type:c,inter:this})},disconnect:function(){if(this._isMouseDown)this.onMouseUp();this.chart.removePlot(this._uName);this.inherited(arguments);this._disconnectHandles()},onChange:function(q){},onMouseDown:function(q){this._isMouseDown=!0;r("ie")?(this._handles.push(w.connect(this.chart.node,"onmousemove",this,"onMouseMove")),this._handles.push(w.connect(this.chart.node,"onmouseup",this,"onMouseUp")),this.chart.node.setCapture()):(this._handles.push(w.connect(v.doc,"onmousemove",this,"onMouseMove")),
this._handles.push(w.connect(v.doc,"onmouseup",this,"onMouseUp")));this._onMouseSingle(q)},onMouseMove:function(q){(this._isMouseDown||this.opt.mouseOver)&&this._onMouseSingle(q)},_onMouseSingle:function(q){var t=this.chart.getPlot(this._uName);t.pageCoord={x:q.pageX,y:q.pageY};t.dirty=!0;this.chart.render();b.stop(q)},onMouseUp:function(q){q=this.chart.getPlot(this._uName);q.stopTrack();this._isMouseDown=!1;this._disconnectHandles();q.pageCoord=null;q.dirty=!0;this.chart.render()}})})},"dojox/charting/action2d/_IndicatorElement":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ../plot2d/Indicator dojo/has ../plot2d/common ../axis2d/common dojox/gfx".split(" "),
function(K,G,w,v,r){var f=function(c,a,b){var p,q=c?{x:a[0],y:b[0][0]}:{x:b[0][0],y:a[0]};1<a.length&&(p=c?{x:a[1],y:b[1][0]}:{x:b[1][0],y:a[1]});return[q,p]};w=w("dojox.charting.action2d._IndicatorElement",v,{constructor:function(c,a){a||(a={});this.inter=a.inter},_updateVisibility:function(c,a,b){var p="x"==b?this._hAxis:this._vAxis,q=p.getWindowScale();this.chart.setAxisWindow(p.name,q,p.getWindowOffset()+(c[b]-a[b])/q);this._noDirty=!0;this.chart.render();this._noDirty=!1;this._initTrack()},_trackMove:function(){this._updateIndicator(this.pageCoord);
this._tracker=setTimeout(K.hitch(this,this._trackMove),100)},_initTrack:function(){this._tracker||(this._tracker=setTimeout(K.hitch(this,this._trackMove),500))},stopTrack:function(){this._tracker&&(clearTimeout(this._tracker),this._tracker=null)},render:function(){if(this.isDirty()){var c=this.inter,a=c.plot,b=c.opt.vertical;this.opt.offset=c.opt.offset||(b?{x:0,y:5}:{x:5,y:0});c.opt.labelFunc&&(this.opt.labelFunc=function(p,q,t,m,n){p=f(b,q,t);return c.opt.labelFunc(p[0],p[1],m,n)});c.opt.fillFunc&&
(this.opt.fillFunc=function(p,q,t){p=f(b,q,t);return c.opt.fillFunc(p[0],p[1])});this.opt=K.delegate(c.opt,this.opt);this.pageCoord?(this.opt.values=[],this.opt.labels=this.secondCoord?"trend":"markers"):(this.opt.values=null,this.inter.onChange({}));this.hAxis=a.hAxis;this.vAxis=a.vAxis;this.inherited(arguments)}},_updateIndicator:function(){var c=this._updateCoordinates(this.pageCoord,this.secondCoord);if(1<c.length){var a=this.opt.vertical;this._data=[];this.opt.values=[];G.forEach(c,function(b){b&&
(this.opt.values.push(a?b.x:b.y),this._data.push([a?b.y:b.x]))},this);this.inherited(arguments)}else this.inter.onChange({})},_renderText:function(c,a,b,p,q,t,m,n){this.inter.opt.labels&&this.inherited(arguments);var k=f(this.opt.vertical,m,n);this.inter.onChange({start:k[0],end:k[1],label:a})},_updateCoordinates:function(c,a){r("dojo-bidi")&&this._checkXCoords(c,a);var b=this.inter,p=b.plot,q=b.opt.vertical,t=this.chart.getAxis(p.hAxis),m=this.chart.getAxis(p.vAxis),n=t.name,k=m.name,l=t.getScaler().bounds,
h=m.getScaler().bounds;m=q?"x":"y";t=q?n:k;var e=q?l:h;if(a)if(q){if(c.x>a.x){var d=a;a=c;c=d}}else c.y>a.y&&(d=a,a=c,c=d);var g=p.toData(c),u;a&&(u=p.toData(a));var x={};x[n]=l.from;x[k]=h.from;d=p.toPage(x);x[n]=l.to;x[k]=h.to;n=p.toPage(x);if(g[t]<e.from){if(u||!b.opt.autoScroll||b.opt.mouseOver){if(b.opt.mouseOver)return[];c[m]=d[m]}else return this._updateVisibility(c,d,m),[];g=p.toData(c)}else if(g[t]>e.to){if(u||!b.opt.autoScroll||b.opt.mouseOver){if(b.opt.mouseOver)return[];c[m]=n[m]}else return this._updateVisibility(c,
n,m),[];g=p.toData(c)}b=this._snapData(g,m,q);if(null==b.y)return[];if(a){u[t]<e.from?(a[m]=d[m],u=p.toData(a)):u[t]>e.to&&(a[m]=n[m],u=p.toData(a));var y=this._snapData(u,m,q);null==y.y&&(y=null)}return[b,y]},_snapData:function(c,a,b){var p=this.chart.getSeries(this.inter.opt.series).data,q,t=p.length;for(q=0;q<t;++q){var m=p[q];if(null!=m)if("number"==typeof m){if(q+1>c[a])break}else if(m[a]>c[a])break}if("number"==typeof m){if(t=q+1,0<q){var n=q;var k=p[q-1]}}else t=m.x,m=m.y,0<q&&(n=p[q-1].x,
k=p[q-1].y);0<q&&c[a]<=(b?(t+n)/2:(m+k)/2)&&(t=n,m=k);return{x:t,y:m}},cleanGroup:function(c){this.inherited(arguments);this.group.moveToFront();return this},isDirty:function(){return!this._noDirty&&(this.dirty||this.inter.plot.isDirty())}});r("dojo-bidi")&&w.extend({_checkXCoords:function(c,a){if(this.chart.isRightToLeft()&&this.isDirty()){var b=this.chart.node.offsetLeft,p=function(q,t){return q.chart.dim.width+(q.chart.offsets.l-q.chart.offsets.r)-(t.x-b)+b};c&&(c.x=p(this,c));a&&(a.x=p(this,a))}}});
return w})},"dojox/charting/plot2d/Indicator":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./CartesianBase ./_PlotEvents ./common ../axis2d/common dojox/gfx dojox/lang/utils dojox/gfx/fx dojo/has".split(" "),function(K,G,w,v,r,f,c,a,b,p,q){var t=function(n,k){var l=n.declaredClass;if(-1!=l.indexOf("svg"))try{return K.mixin({},n.rawNode.getBBox())}catch(g){}else{if(-1!=l.indexOf("vml")){var h=n.rawNode,e=h.style.display;h.style.display="inline";l=a.pt2px(parseFloat(h.currentStyle.width));
var d=a.pt2px(parseFloat(h.currentStyle.height));l={x:0,y:0,width:l,height:d};m(n,l);h.style.display=e;return l}if(-1!=l.indexOf("silverlight"))return m(n,{width:n.rawNode.actualWidth,height:n.rawNode.actualHeight},.75);if(n.getTextWidth)return l=n.getTextWidth(),h=n.getFont(),d=a.normalizedLength(h?h.size:a.defaultFont.size),l={width:l,height:d},m(n,l,.75),l}return null},m=function(n,k,l){var h=k.width,e=k.height;n=n.getShape();switch(n.align){case "end":k.x=n.x-h;break;case "middle":k.x=n.x-h/2;
break;default:k.x=n.x}k.y=n.y-e*(l||1);return k};w=w("dojox.charting.plot2d.Indicator",[v,r],{defaultParams:{vertical:!0,fixed:!0,precision:0,lines:!0,labels:"line",markers:!0},optionalParams:{lineStroke:{},outlineStroke:{},shadowStroke:{},lineFill:{},stroke:{},outline:{},shadow:{},fill:{},fillFunc:null,labelFunc:null,font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerSymbol:"",values:[],offset:{},start:!1,animate:!1},constructor:function(n,k){this.opt=K.clone(this.defaultParams);
b.updateWithObject(this.opt,k);"number"==typeof k.values&&(k.values=[k.values]);b.updateWithPattern(this.opt,k,this.optionalParams);this.animate=this.opt.animate},render:function(n,k){if(this.zoom)return this.performZoom(n,k);if(!this.isDirty())return this;this.cleanGroup(null,!0);if(!this.opt.values)return this;this._updateIndicator();return this},_updateIndicator:function(){var n=this.chart.theme,k=this._hAxis.name,l=this._vAxis.name,h=this._hAxis.getScaler().bounds,e=this._vAxis.getScaler().bounds,
d={};d[k]=h.from;d[l]=e.from;var g=this.toPage(d);d[k]=h.to;d[l]=e.to;var u=this.toPage(d),x=this.events();h=G.map(this.opt.values,function(C,z){return this._renderIndicator(C,z,k,l,g,u,x,this.animate)},this);e=h.length;if("trend"==this.opt.labels){d=this.opt.vertical;var y=this._data[0][0],B=this._data[e-1][0]-y;y=this.opt.labelFunc?this.opt.labelFunc(-1,this.values,this._data,this.opt.fixed,this.opt.precision):f.getLabel(B,this.opt.fixed,this.opt.precision)+" ("+f.getLabel(100*B/y,!0,2)+"%)";this._renderText(this.getGroup(),
y,this.chart.theme,d?(h[0].x+h[e-1].x)/2:h[1].x,d?h[0].y:(h[1].y+h[e-1].y)/2,-1,this.opt.values,this._data)}(n=void 0!=this.opt.lineFill?this.opt.lineFill:n.indicator.lineFill)&&1<e&&(d=Math.min(h[0].x1,h[e-1].x1),y=Math.min(h[0].y1,h[e-1].y1),this.getGroup().createRect({x:d,y:y,width:Math.max(h[0].x2,h[e-1].x2)-d,height:Math.max(h[0].y2,h[e-1].y2)-y}).setFill(n).moveToBack())},_renderIndicator:function(n,k,l,h,e,d,g,u){var x=this.chart.theme,y=this.chart.getCoords(),B=this.opt.vertical,C=this.getGroup().createGroup(),
z={};z[l]=B?n:0;z[h]=B?0:n;q("dojo-bidi")&&(z.x=this._getMarkX(z.x));z=this.toPage(z);var D=B?z.x>=e.x&&z.x<=d.x:z.y>=d.y&&z.y<=e.y,E=z.x-y.x,A=z.y-y.y,F=B?E:e.x-y.x,H=B?e.y-y.y:A,I=B?F:d.x-y.x,L=B?d.y-y.y:H;if(this.opt.lines&&D){var J=this.opt.hasOwnProperty("lineShadow")?this.opt.lineShadow:x.indicator.lineShadow,O=this.opt.hasOwnProperty("lineStroke")?this.opt.lineStroke:x.indicator.lineStroke,P=this.opt.hasOwnProperty("lineOutline")?this.opt.lineOutline:x.indicator.lineOutline;J&&C.createLine({x1:F+
J.dx,y1:H+J.dy,x2:I+J.dx,y2:L+J.dy}).setStroke(J);P&&(P=f.makeStroke(P),P.width=2*P.width+(O?O.width:0),C.createLine({x1:F,y1:H,x2:I,y2:L}).setStroke(P));C.createLine({x1:F,y1:H,x2:I,y2:L}).setStroke(O)}var fa;if(this.opt.markers&&D){var V=this._data[k],ba=this;V&&(fa=G.map(V,function(ka,la){z[l]=B?n:ka;z[h]=B?ka:n;q("dojo-bidi")&&(z.x=ba._getMarkX(z.x));z=this.toPage(z);if(B?z.y<=e.y&&z.y>=d.y:z.x>=e.x&&z.x<=d.x){E=z.x-y.x;A=z.y-y.y;var ma=this.opt.markerSymbol?this.opt.markerSymbol:x.indicator.markerSymbol,
ha="M"+E+" "+A+" "+ma;J=void 0!=this.opt.markerShadow?this.opt.markerShadow:x.indicator.markerShadow;O=void 0!=this.opt.markerStroke?this.opt.markerStroke:x.indicator.markerStroke;P=void 0!=this.opt.markerOutline?this.opt.markerOutline:x.indicator.markerOutline;J&&C.createPath("M"+(E+J.dx)+" "+(A+J.dy)+" "+ma).setFill(J.color).setStroke(J);P&&(P=f.makeStroke(P),P.width=2*P.width+(O?O.width:0),C.createPath(ha).setStroke(P));ma=C.createPath(ha);ha=this._shapeFill(void 0!=this.opt.markerFill?this.opt.markerFill:
x.indicator.markerFill,ma.getBoundingBox());ma.setFill(ha).setStroke(O)}return ka},this))}V=this.opt.start?{x:F,y:B?H:L}:{x:B?F:I,y:B?L:H};this.opt.labels&&"trend"!=this.opt.labels&&D&&(this.opt.labelFunc?D=this.opt.labelFunc(k,this.opt.values,this._data,this.opt.fixed,this.opt.precision,this.opt.labels):"markers"==this.opt.labels?(D=G.map(fa,function(ka){return f.getLabel(ka,this.opt.fixed,this.opt.precision)},this),D=1!=D.length?"[ "+D.join(", ")+" ]":D[0]):D=f.getLabel(n,this.opt.fixed,this.opt.precision),
this._renderText(C,D,x,V.x,V.y,k,this.opt.values,this._data));g&&this._connectEvents({element:"indicator",run:this.run?this.run[k]:void 0,shape:C,value:n});u&&this._animateIndicator(C,B,B?H:F,B?H+L:F+I,u);return K.mixin(V,{x1:F,y1:H,x2:I,y2:L})},_animateIndicator:function(n,k,l,h,e){p.animateTransform(K.delegate({shape:n,duration:1200,transform:[{name:"translate",start:k?[0,l]:[l,0],end:[0,0]},{name:"scale",start:k?[1,1/h]:[1/h,1],end:[1,1]},{name:"original"}]},e)).play()},clear:function(){this.inherited(arguments);
this._data=[]},addSeries:function(n){this.inherited(arguments);this._data.push(n.data)},_renderText:function(n,k,l,h,e,d,g,u){this.opt.offset&&(h+=this.opt.offset.x,e+=this.opt.offset.y);k=c.createText.gfx(this.chart,n,h,e,this.opt.vertical?"middle":this.opt.start?"start":"end",k,this.opt.font?this.opt.font:l.indicator.font,this.opt.fontColor?this.opt.fontColor:l.indicator.fontColor);h=t(k,k.getShape().text);this.opt.vertical&&!this.opt.start&&(h.y+=h.height/2,k.setShape({y:e+h.height/2}));h.x-=2;
--h.y;h.width+=4;h.height+=2;h.r=this.opt.radius?this.opt.radius:l.indicator.radius;var x=void 0!=this.opt.shadow?this.opt.shadow:l.indicator.shadow;e=void 0!=this.opt.stroke?this.opt.stroke:l.indicator.stroke;var y=void 0!=this.opt.outline?this.opt.outline:l.indicator.outline;x&&n.createRect(h).setFill(x.color).setStroke(x);y&&(y=f.makeStroke(y),y.width=2*y.width+(e?e.width:0),n.createRect(h).setStroke(y));l=this.opt.fillFunc?this.opt.fillFunc(d,g,u):void 0!=this.opt.fill?this.opt.fill:l.indicator.fill;
n.createRect(h).setFill(this._shapeFill(l,h)).setStroke(e);k.moveToFront()},getSeriesStats:function(){return K.delegate(f.defaultStats)}});q("dojo-bidi")&&w.extend({_getMarkX:function(n){return this.chart.isRightToLeft()?this.chart.axes.x.scaler.bounds.to+this.chart.axes.x.scaler.bounds.from-n:n}});return w})},"arcgisonline/pages/item/widgets/typeOptions/feature":function(){define("require exports tslib ../../../../esriGeowConfig ../../../pageUtil ../../../serviceUtil ../../../statusUtil ../../_Actions ../../../components/OptimizeLayerDrawing ../../components/ManageChangeLog ./_mixin ./featureSupport ../../../utils/alerts ../../../utils/arrays ../../../utils/dom ../../../utils/polling ../../../utils/strings ../../../../sharing/util ../../../../sharing/dijit/dialog/ConfirmDialog ../../../../sharing/dijit/dialog/ManageGeometryUpdatesDlg ../../../../sharing/dijit/dialog/RebuildSpatialIndexDlg ../../../../sharing/dijit/dialog/SimpleDlg ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/a11yclick esri/lang dojo/_base/lang dojo/on dojo/query dojo/string dojo/dom-construct dojo/Deferred dojo/promise/all dojo/topic preact dojo/text!./feature.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);
B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);E=w.__importDefault(E);A=w.__importDefault(A);F=w.__importDefault(F);H=w.__importDefault(H);I=w.__importDefault(I);L=w.__importDefault(L);J=w.__importDefault(J);P=w.__importDefault(P);return function(){function fa(V,ba){this.templateString=P["default"];this.activeAsyncJobs={}}fa.prototype.destroy=function(){this.inherited(arguments);this._pageExists&&(this._pageExists=void 0);this._currentlyOptimizing&&(this._currentlyOptimizing=
void 0);var V=document.body.querySelector("#optimize-layers-container");V&&O.render(null,V);(V=document.body.querySelector("#manage-change-log-container"))&&O.render(null,V)};fa.prototype._initHandlers=function(){var V=this;this._pageExists=!0;var ba=this._handlePropertyChange.bind(this),ka=this._handleFeaturesCanSeeChange.bind(this),la=this._toggleEditingAllowed.bind(this,ba);this.own(E["default"](this._enableEditing,"change",this._toggleEditing.bind(this,ba,!0)),E["default"](this._editEnableAddFeatures,
"change",la),E["default"](this._editEnableDeleteFeatures,"change",la),E["default"](this._editEnableUpdateFeatures,"change",la),E["default"](this._editAttributesAndGeometry,"change",la),E["default"](this._editAttributesOnly,"change",la),E["default"](this._enableTrackEdits,"change",this._toggleTracking.bind(this,ba)),E["default"](this._viewAllFeatures,"change",ka),E["default"](this._viewOwnFeaturesOnly,"change",ka),E["default"](this._viewNoFeatures,"change",ka),E["default"](this._editAllFeatures,"change",
ba),E["default"](this._editOwnFeaturesOnly,"change",ba),E["default"](this._anonSame,"change",ba),E["default"](this._anonAddOnly,"change",ba),E["default"](this.page,"service-info-change",this.reset.bind(this)),E["default"](this._enableSync,"change",ba),E["default"](this._enableChangeTracking,"change",ba),E["default"](this._cacheControlSelect,"change",ba),this.item.watch("sharing",this._showEditWarnings.bind(this)),this.item.watch("typeKeywords",this._showEditWarnings.bind(this)),A["default"](".rebuildSpatialIndex",
this.domNode).on("click",function(){var ma=new u["default"];ma.startup(V.item);ma.showModal("true");E["default"].once(ma,"hide",function(){ma.destroyRecursive()})}),E["default"](this._manageChangeLogBtn,"click",this.manageChangeLogClicked.bind(this)),E["default"](this._manageGeometryUpdatesBtn,"click",this._manageGeometryUpdatesClicked.bind(this)),J["default"].subscribe("manage-geometry-updates/update",this._handleLayerGeometryUpdates.bind(this)),C["default"](this.optimizeBtn,this.optimizeLayersClick.bind(this)),
C["default"](this.cancelOptimizeBtn,this.cancelOptimizeClick.bind(this)));this.item.isSDS&&this.own(E["default"](this._enableExport,"change",ba));ka={startLink:'\x3ca href\x3d"'+(""+v["default"].self.helpBase+(v["default"].self.helpMap.m["120002599"]||""))+'" target\x3d"both"\x3e',endLink:"\x3c/a\x3e",startSettingLink:'\x3cbutton class\x3d"btn-link btn-link--inherit js-focus-public-data-collection"\x3e',endSettingLink:"\x3c/button\x3e",startViewLink:'\x3cbutton class\x3d"btn-link btn-link--inherit js-create-view" data-type\x3d"features"\x3e',
endViewLink:"\x3c/button\x3e",startUnshareLink:'\x3cbutton class\x3d"btn-link btn-link--inherit js-unshare-item"\x3e',endUnshareLink:"\x3c/button\x3e"};this._publiclyEditableWarning.innerHTML=F["default"].substitute(this.i18n.itemProperties.publiclyEditableWarning,ka);this._publicLayerWarning.innerHTML=F["default"].substitute(this.i18n.itemProperties.publicLayerWarning,ka);e["default"].isPortal()&&!this.item.isSDS&&t.checkMapServiceCapabilitiesForSync(this.page,this.item).then(function(ma){k["default"].showHide(V._syncContainer,
ma)});this.own(C["default"](this._enableSync,this._toggleSync.bind(this,ba)),A["default"](".js-focus-public-data-collection",this.domNode).on("click",function(){var ma=document.querySelector(".js-public-data-collection-container");window.scrollTo({top:ma.offsetTop-40,behavior:"smooth"});ma.classList.add("fieldset-checkbox--hightlight")}),A["default"](".js-create-view",this.domNode).on("click",function(ma){a["default"].publishTiles({item:V.item,page:V.page,user:V.portalUser,evt:ma})}),A["default"](".js-unshare-item",
this.domNode).on("click",function(ma){a["default"].share({evt:ma,item:V.item,user:V.portalUser,page:V.page,portal:V.page.portal})}))};fa.prototype.retrievePropertyValues=function(){var V={editingEnabled:k["default"].isChecked(this._enableEditing),trackingEnabled:k["default"].isChecked(this._enableTrackEdits),exportEnabled:k["default"].isChecked(this._enableExport),syncEnabled:k["default"].isChecked(this._enableSync),changeTrackingEnabled:k["default"].isChecked(this._enableChangeTracking)},ba=e["default"].isPortal();
V.allowAddFeatures=V.editingEnabled&&k["default"].isChecked(this._editEnableAddFeatures);V.allowDeleteFeatures=V.editingEnabled&&k["default"].isChecked(this._editEnableDeleteFeatures);V.allowUpdateFeatures=V.editingEnabled&&k["default"].isChecked(this._editEnableUpdateFeatures);V.allowUpdateAttributesOnly=V.editingEnabled&&V.allowUpdateFeatures&&k["default"].isChecked(this._editAttributesOnly);V.viewNoFeatures=V.allowAddFeatures&&!V.allowDeleteFeatures&&!V.allowUpdateFeatures&&k["default"].isChecked(this._viewNoFeatures);
V.restrictEdits=V.trackingEnabled&&k["default"].isChecked(this._editOwnFeaturesOnly);V.restrictView=V.trackingEnabled&&k["default"].isChecked(this._viewOwnFeaturesOnly);V.restrictAnonymous=V.trackingEnabled&&k["default"].isChecked(this._anonAddOnly);V.ownershipAccessControlEnabled=V.restrictEdits||V.restrictView||V.restrictAnonymous;V.optimizedLayerIds=this.toggleOptimizeLayerIds||[];ba||(V.cacheMaxAge=parseInt(k["default"].getSelectedOption(this._cacheControlSelect.options).value,10));return V};
fa.prototype.hasChanges=function(){var V=this.retrievePropertyValues(),ba=e["default"].isPortal();this.item.isSDS?(this._exportChanged=this._exportEnabled!==V.exportEnabled,this._syncChanged=this._syncEnabled!==V.syncEnabled,this._changeTrackingChanged=!ba&&this._changeTrackingEnabled!==V.changeTrackingEnabled):this._changeTrackingChanged=this._syncChanged=this._exportChanged=!1;this._editingChanged=this._editingInfo.editingEnabled!==V.editingEnabled||this._editingInfo.allowAddFeatures!==V.allowAddFeatures||
this._editingInfo.allowDeleteFeatures!==V.allowDeleteFeatures||this._editingInfo.allowUpdateFeatures!==V.allowUpdateFeatures||this._editingInfo.allowUpdateAttributesOnly!==V.allowUpdateAttributesOnly||this._editingInfo.viewNoFeatures!==V.viewNoFeatures;this._trackingChanged=this._editingInfo.trackingEnabled!==V.trackingEnabled||this._editingInfo.restrictEdits!==V.restrictEdits||this._editingInfo.restrictView!==V.restrictView||this._editingInfo.restrictAnonymous!==V.restrictAnonymous;this._optimizationChanged=
!ba&&this._layerOptimizationInfo.canOptimize&&(this._layerOptimizationInfo.optimizedLayerIds.length!==V.optimizedLayerIds.length||!n["default"].includesAll(this._layerOptimizationInfo.optimizedLayerIds,V.optimizedLayerIds));this._cacheControlChanged=!ba&&this._cacheMaxAge!==V.cacheMaxAge;this._layerGeometryUpdatesChanged=0<this._layerGeometryUpdates.length;return this._exportChanged||this._syncChanged||this._changeTrackingChanged||this._editingChanged||this._trackingChanged||this._optimizationChanged||
this._cacheControlChanged||this._layerGeometryUpdatesChanged};fa.prototype.hasNonOptimizationChanges=function(){this.hasChanges();return this._exportChanged||this._syncChanged||this._changeTrackingChanged||this._editingChanged||this._trackingChanged||this._cacheControlChanged||this._layerGeometryUpdatesChanged};fa.prototype.save=function(){var V=this,ba=new I["default"],ka=e["default"].isPortal(),la=this.retrievePropertyValues(),ma={},ha={},Z={},W=[];la.mustUpdateAllowGeometryUpdates=this._editingInfo.allowUpdateAttributesOnly!==
la.allowUpdateAttributesOnly;this._trackingChanged?la.trackingEnabled?(la.mustAddEditFieldsInfo=!0,la.mustDropEditFieldsInfo=!1):(la.mustAddEditFieldsInfo=!1,la.mustDropEditFieldsInfo=!0):(la.mustDropEditFieldsInfo=!1,la.mustAddEditFieldsInfo=!1);if(la.editingEnabled){var Q=la.allowAddFeatures&&!la.allowDeleteFeatures;ma.hasStaticData=!1;ma.capabilities=(Q&&la.viewNoFeatures?"":"Query,")+"Editing";la.allowAddFeatures&&(ma.capabilities+=",Create");la.allowUpdateFeatures&&(ma.capabilities+=",Update");
la.allowDeleteFeatures&&(ma.capabilities+=",Delete");ka||(ma.layerOverridesEnabled=!0);if(la.mustUpdateAllowGeometryUpdates&&(ma.allowGeometryUpdates=!la.allowUpdateAttributesOnly,!ka&&!ma.allowGeometryUpdates)){Q=this.item.adminServiceInfo.layers.some(function(R){return n["default"].includes(R.layerOverrides||[],"allowGeometryUpdates")});var ia=this.item.adminServiceInfo.layers.every(function(R){var S,N;return!R.layerOverrides||0===(null===(S=R.layerOverrides)||void 0===S?void 0:S.length)||1===(null===
(N=R.layerOverrides)||void 0===N?void 0:N.length)&&"allowGeometryUpdates"===R.layerOverrides[0]});Q&&ia&&(ma.layerOverridesEnabled=!1)}}else ma.capabilities="Query",ma.hasStaticData=!0;Q={};Q.enableEditorTracking=la.trackingEnabled;(Q.enableOwnershipAccessControl=la.ownershipAccessControlEnabled)?(Q.allowOthersToUpdate=Q.enableEditorTracking&&!la.restrictEdits,Q.allowOthersToDelete=Q.enableEditorTracking&&!la.restrictEdits,Q.allowOthersToQuery=Q.enableEditorTracking&&!la.restrictView,Q.allowAnonymousToQuery=
Q.enableEditorTracking&&!la.restrictView,Q.allowAnonymousToUpdate=Q.enableEditorTracking&&!la.restrictAnonymous,Q.allowAnonymousToDelete=Q.enableEditorTracking&&!la.restrictAnonymous):(Q.allowOthersToUpdate=!0,Q.allowOthersToDelete=!0,Q.allowOthersToQuery=!0,Q.allowAnonymousToQuery=!0,Q.allowAnonymousToUpdate=!0,Q.allowAnonymousToDelete=!0);ma.editorTrackingInfo=Q;this.item.isSDS&&(ma.capabilities+=la.syncEnabled?",Sync":"",ma.capabilities+=la.exportEnabled?",Extract":"",ma.capabilities+=la.changeTrackingEnabled?
",ChangeTracking":"");!ka&&this._cacheControlChanged&&(ma.cacheMaxAge=la.cacheMaxAge);!ka||ka&&!this.item.isBDS?(this._removeReplicas&&W.push(t.unregisterReplicas(this.item)),this.item.isViewService&&!la.trackingEnabled&&delete ma.editorTrackingInfo,L["default"](W).then(function(){V._editService(ma,la).then(function(){ha.serviceChanged=!0;ma.capabilities&&J["default"].publish("settings/update/serviceInfo",ma);ba.resolve({changed:ha,toChange:Z})},function(R){ba.reject(R)})},function(R){V._editService(ma,
la).then(function(){ha.serviceChanged=!0;ba.resolve({changed:ha,toChange:Z})},function(S){ba.reject(S)})})):ba.resolve({changed:ha,toChange:Z});return ba};fa.prototype.reset=function(){var V=this,ba=new I["default"];n["default"].includes(this.item.typeKeywords,t.VIEW_SERVICE)&&this.item.sourceData?(this.item.isViewService=!0,t.fetchSourceAdminServiceInfo(this.item).then(function(){V._inspectServiceInfo();V._updateUI();ba.resolve()})):(this._inspectServiceInfo(),this._updateUI(),ba.resolve());return ba};
fa.prototype._handlePropertyChange=function(){var V=this.retrievePropertyValues(),ba=this.hasChanges();this.emitChanged(V,ba)};fa.prototype._handleFeaturesCanSeeChange=function(){var V=k["default"].isChecked(this._viewOwnFeaturesOnly),ba=k["default"].isChecked(this._editAttributesOnly),ka=k["default"].isChecked(this._editEnableAddFeatures)&&!k["default"].isChecked(this._editEnableDeleteFeatures)&&!k["default"].isChecked(this._editEnableUpdateFeatures);V||ba?(k["default"].checkNode(this._editOwnFeaturesOnly,
!0),k["default"].disableNode(this._editAllFeatures,!0),this._editAllFeaturesLabel.classList.add("no-edit-features")):ka?(k["default"].disableNode(this._editAllFeatures,!0),this._editAllFeaturesLabel.classList.add("no-edit-features")):(k["default"].disableNode(this._editAllFeatures,!1),this._editAllFeaturesLabel.classList.remove("no-edit-features"));this._handlePropertyChange()};fa.prototype._toggleEditing=function(V,ba){var ka=this,la=k["default"].isChecked(this._enableEditing),ma=k["default"].isChecked(this._viewOwnFeaturesOnly);
A["default"](".requires-editing",this.domNode).forEach(function(ha){k["default"].disableNode(ha,ha===ka._editAllFeatures&&(ma||!la)||!la);ha.classList[la?"remove":"add"]("no-editing")});A["default"](".editing-properties",this.domNode).forEach(function(ha){k["default"].showHide(ha,la)});this.item.isViewService&&(this._enableTrackEditsLabel.classList.add("no-editing"),k["default"].disableNode(this._enableTrackEdits,!0));la&&!this._editingInfo.editingEnabled&&ba&&(k["default"].checkNode(this._editEnableAddFeatures,
!0),k["default"].checkNode(this._editEnableUpdateFeatures,!0),k["default"].checkNode(this._editEnableDeleteFeatures,!0),k["default"].checkNode(this._editAttributesAndGeometry,!0),k["default"].showNode(this._editEnableUpdateFeaturesOptions));this._showEditWarnings();this._checkSpatioTemporalStatus();this._toggleTracking();V&&V.call()};fa.prototype._showEditWarnings=function(){var V,ba=k["default"].isChecked(this._enableEditing),ka=this.item.sharing&&"public"===this.item.sharing.access,la=-1<(null===
(V=this.item.typeKeywords)||void 0===V?void 0:V.indexOf("Public Data Collection"));ba&&ka&&!la?(k["default"].showNode(this._publiclyEditableWarning),k["default"].disableNode(this._enableEditing,!1),this._enableEditingLabel.classList.remove("text-light")):ba||la||!ka?(this.item.isMultiServicesView||k["default"].disableNode(this._enableEditing,!1),this._enableEditingLabel.classList.remove("text-light"),k["default"].hideNodes([this._publicLayerWarning,this._publiclyEditableWarning])):(k["default"].disableNode(this._enableEditing,
!0),this._enableEditingLabel.classList.add("text-light"),k["default"].showNode(this._publicLayerWarning))};fa.prototype._toggleEditingAllowed=function(V){var ba=this,ka,la=k["default"].isChecked(this._editEnableUpdateFeatures),ma=k["default"].isChecked(this._editAttributesAndGeometry),ha=k["default"].isChecked(this._editEnableAddFeatures)&&!k["default"].isChecked(this._editEnableDeleteFeatures)&&!la;k["default"].showHide(this._editEnableUpdateFeaturesOptions,la);k["default"].showHide(this._manageGeometryUpdatesContainer,
!this.item.portal.isPortal&&ma);A["default"](".requires-add-only",this.domNode).forEach(function(Z){k["default"].disableNode(Z,!ha);Z.classList[ha?"remove":"add"]("no-add-only")});A["default"](".requires-edit-features",this.domNode).forEach(function(Z){k["default"].disableNode(Z,ha);Z.classList[ha?"add":"remove"]("no-edit-features");ha||ba._toggleEditing()});la=[this._editEnableAddFeatures,this._editEnableDeleteFeatures,this._editEnableUpdateFeatures];1===la.filter(function(Z){return Z.checked}).length?
la.forEach(function(Z){Z.checked&&(Z.disabled=!0,Z.parentElement.classList.add("optimizing"))}):la.forEach(function(Z){Z.disabled=!1;Z.parentElement.classList.remove("optimizing")});null===(ka=null===V||void 0===V?void 0:V.call)||void 0===ka?void 0:ka.call(V)};fa.prototype._toggleTracking=function(V){var ba,ka=k["default"].isChecked(this._enableTrackEdits);A["default"](".requires-tracking",this.domNode).forEach(function(la){k["default"].disableNode(la,!ka);la.classList[ka?"remove":"add"]("no-tracking")});
ka||(this._editingInfo.viewNoFeatures?k["default"].checkNode(this._viewNoFeatures,!ka):k["default"].checkNode(this._viewAllFeatures,!ka),k["default"].checkNode(this._editAllFeatures,!ka),k["default"].checkNode(this._anonSame,!ka));null===(ba=null===V||void 0===V?void 0:V.call)||void 0===ba?void 0:ba.call(V)};fa.prototype._toggleSync=function(V){var ba=this,ka=function(){var la;return null===(la=null===V||void 0===V?void 0:V.call)||void 0===la?void 0:la.call(V)};!k["default"].isChecked(this._enableSync)&&
this._syncEnabled?(k["default"].checkNode(this._enableSync,this._syncEnabled),k["default"].disableNode(this._enableSync,!0),t.fetchReplicas(this.item).then(function(la){k["default"].disableNode(ba._enableSync,!1);if(la&&0<la.length){var ma=new d["default"]({buttonOkLabel:ba.i18n.common.yesLabel,buttonCancelLabel:ba.i18n.common.noLabel,"class":"confirmDlg-default"});la="\x3cp\x3e"+F["default"].substitute(ba.i18n.itemProperties.toDisableSync,{numReplicas:la.length})+"\x3c/p\x3e";ma.show({title:ba.i18n.itemProperties.unregisterReplicas,
message:la}).then(function(ha){"onOk"===ha?(ma.hide(),ba._removeReplicas=!0,k["default"].checkNode(ba._enableSync,!ba._syncEnabled)):(ma.hide(),ba._removeReplicas=!1,k["default"].checkNode(ba._enableSync,ba._syncEnabled));ka()})}else k["default"].checkNode(ba._enableSync,!ba._syncEnabled),k["default"].disableNode(ba._enableSync,!1),ka()},function(la){ka()})):ka()};fa.prototype._toggleOptimizeLayers=function(V){var ba;this._layerOptimizationInfo.canOptimize&&!this.item.isViewService?A["default"](".js-optimize-layers",
this.domNode).forEach(k["default"].showNode):A["default"](".js-optimize-layers",this.domNode).forEach(k["default"].hideNode);null===(ba=null===V||void 0===V?void 0:V.call)||void 0===ba?void 0:ba.call(V)};fa.prototype._toggleRebuildSpatialIndex=function(V){var ba;this.canRebuildSpatialIndex?A["default"](".js-rebuild-spatial-index",this.domNode).forEach(k["default"].showNode):A["default"](".js-rebuild-spatial-index",this.domNode).forEach(k["default"].hideNode);null===(ba=null===V||void 0===V?void 0:
V.call)||void 0===ba?void 0:ba.call(V)};fa.prototype._toggleCacheControl=function(V){var ba,ka=this.item.portal.isPortal,la=k["default"].isChecked(this._enableEditing);this._cacheControlLabel.classList[la?"add":"remove"]("optimizing");k["default"].disableNode(this._cacheControlSelect,la);var ma=[];A["default"](".js-cache-control",this.domNode).forEach(function(ha){return ma.push(ha)});k["default"].showHideAll(ma,!ka);this.item.isViewService&&(this._cacheControlDefaultOption.innerHTML=F["default"].substitute(this.i18n.itemProperties.cacheControlOptions.inherit,
{maxAge:this._getCacheMaxAgeString(this.item.sourceAdminServiceInfo.adminServiceInfo.cacheMaxAge)}));null===(ba=null===V||void 0===V?void 0:V.call)||void 0===ba?void 0:ba.call(V)};fa.prototype._checkFor3DObjectSceneLayer=function(){var V=this,ba=this.item.relatedItems,ka=function(la){k["default"].disableNode(V._enableChangeTracking,la);V._changeTrackingLabel.classList[la?"add":"remove"]("optimizing")};this._changeTrackingEnabled&&ba&&ba.Service2Service_forward&&ba.Service2Service_forward.length?(ka(!0),
(ba=n["default"].find(ba.Service2Service_forward,function(la){return"Scene Service"===la.type&&n["default"].includesAll(la.typeKeywords,["3DObject","Scene Service","Hosted Service"])}))?e["default"].request({url:ba.url}).then(function(la){la&&la.code?ka(!0):la.layers?(la=la.layers.some(function(ma){return ma&&z["default"].isDefined(ma.updateEnabled)}),ka(la)):ka(!1)},function(){ka(!0)}):ka(!1)):ka(!1)};fa.prototype._inspectServiceInfo=function(){var V=this,ba,ka,la,ma,ha=e["default"].isPortal(),Z=
this.item.serviceInfo||{},W=this.item.adminServiceInfo||{},Q=this.item.sourceAdminServiceInfo,ia=ha&&!this.item.isSDS?h["default"].stringToArray(Z.capabilities,",",!0):h["default"].stringToArray(W.capabilities||"",",",!0),R=Q&&Q.capabilities?h["default"].stringToArray(Q.capabilities||"",",",!0):[],S=ha&&!this.item.isSDS?n["default"].find(W.extensions||[],function(X){return"Feature Server"===X.typeName}):void 0,N=ha?Z.allowGeometryUpdates:W.allowGeometryUpdates;this._layerGeometryUpdates=[];this._removeReplicas=
!1;this._exportEnabled=n["default"].includes(ia,"Extract");this.item.isMultiServicesView=!!Z.isMultiServicesView;this._syncEnabled=ha?n["default"].includes(ia,"Sync"):W.syncEnabled||n["default"].includes(ia,"Sync");this._hasSyncEnabledViews=!!W.hasSyncEnabledViews;this._sourceSyncEnabled=this.item.isViewService&&Q&&(Q.syncEnabled||n["default"].includes(R,"Sync"));this._changeTrackingEnabled=n["default"].includes(ia,"ChangeTracking");this._hasChangeTrackingEnabledViews=!!W.hasChangeTrackingEnabledViews;
this._sourceChangeTrackingEnabled=this.item.isViewService&&Q&&n["default"].includes(R,"ChangeTracking");this._editingInfo={editingEnabled:!1,allowGeometryUpdates:N,layerHasGeometryUpdatesDisabled:!1,allowAddFeatures:!1,allowDeleteFeatures:!1,allowUpdateFeatures:!1,allowUpdateAttributesOnly:!1};if(!ha)for(Z=0;Z<(W.layers||[]).length;Z++)!1===W.layers[Z].allowGeometryUpdates&&(this._editingInfo.layerHasGeometryUpdatesDisabled=!0);n["default"].includes(ia,"Editing")?(this._editingInfo.editingEnabled=
!0,this._editingInfo.allowAddFeatures=n["default"].includes(ia,"Create"),this._editingInfo.allowDeleteFeatures=n["default"].includes(ia,"Delete"),this._editingInfo.allowUpdateFeatures=n["default"].includes(ia,"Update"),this._editingInfo.allowUpdateAttributesOnly=this._editingInfo.allowUpdateFeatures&&!N&&(ha||!ha&&this._editingInfo.layerHasGeometryUpdatesDisabled)):this._editingInfo.editingEnabled=!1;!this._editingInfo.allowAddFeatures||this._editingInfo.allowDeleteFeatures||this._editingInfo.allowUpdateFeatures||
n["default"].includes(ia,"Query")?this._editingInfo.viewNoFeatures=!1:this._editingInfo.viewNoFeatures=!0;this._trackingInfo=null;!ha||ha&&this.item.isSDS?W.editorTrackingInfo&&(this._trackingInfo=W.editorTrackingInfo):S&&S.editorTrackingInfo&&(this._trackingInfo=S.editorTrackingInfo);this._trackingInfo?(this._editingInfo.restrictEdits=this._trackingInfo.enableOwnershipAccessControl&&!this._trackingInfo.allowOthersToUpdate&&!this._trackingInfo.allowOthersToDelete,this._editingInfo.restrictView=this._trackingInfo.enableOwnershipAccessControl&&
!this._trackingInfo.allowOthersToQuery,this._editingInfo.restrictAnonymous=this._trackingInfo.enableOwnershipAccessControl&&!this._trackingInfo.allowAnonymousToUpdate&&!this._trackingInfo.allowAnonymousToDelete,this._editingInfo.ownershipAccessControlEnabled=this._editingInfo.restrictEdits||this._editingInfo.restrictView||this._editingInfo.restrictAnonymous,this._editingInfo.trackingEnabled=!!this._trackingInfo.enableEditorTracking):this._editingInfo.trackingEnabled=!1;this._layerOptimizationInfo=
{optimizedLayerIds:[]};this.toggleOptimizeLayerIds=[];W.layers&&(this._layerOptimizationInfo.canOptimize=W.layers.some(function(X){return X.supportsMultiScaleGeometry&&"esriGeometryPoint"!==X.geometryType}),this._layerOptimizationInfo.layers=W.layers.filter(function(X){return X.supportsMultiScaleGeometry&&"esriGeometryPoint"!==X.geometryType}),this._layerOptimizationInfo.layers=this._layerOptimizationInfo.layers.map(function(X){X=D["default"].clone(X);X.optimizationEnabled=!!(X.multiScaleGeometryInfo||
X.multiScaleGeometryStatus&&"InProgress"===X.multiScaleGeometryStatus);X.optimizing=!(!X.multiScaleGeometryStatus||"InProgress"!==X.multiScaleGeometryStatus);return X}),(this._layerOptimizationInfo.layers||[]).forEach(function(X){X.optimizationEnabled&&(V._layerOptimizationInfo.optimizedLayerIds.push(X.id),V.toggleOptimizeLayerIds.push(X.id))}),this._layerOptimizationInfo.currentlyOptimizing=(this._layerOptimizationInfo.layers||[]).some(function(X){return X.optimizing}));this.canRebuildSpatialIndex=
!1;if(!ha&&!this.item.isViewService&&0<(null===(ka=null===(ba=this.item.adminServiceInfo)||void 0===ba?void 0:ba.layers)||void 0===ka?void 0:ka.length))for(ba=0;ba<this.item.adminServiceInfo.layers.length;ba++)if("Feature Layer"===this.item.adminServiceInfo.layers[ba].type){this.canRebuildSpatialIndex=!0;break}ha&&this.item.isMultipatchFeatureService&&A["default"](".if-no-multipatch",this.domNode).forEach(function(X){X.classList.remove("if-no-multipatch")});!ha&&z["default"].isDefined(null===(ma=
null===(la=this.item.adminServiceInfo)||void 0===la?void 0:la.adminServiceInfo)||void 0===ma?void 0:ma.cacheMaxAge)&&(this._cacheMaxAge=this.item.adminServiceInfo.adminServiceInfo.cacheMaxAge);this._checkFor3DObjectSceneLayer()};fa.prototype._updateUI=function(){var V=this,ba=e["default"].isPortal(),ka=!1;this.item.isViewService&&(A["default"](".is-view-service").forEach(k["default"].showNode),k["default"].disableNodes([this._enableTrackEdits,this._enableSync,this._enableChangeTracking],!0),this._syncLabel.classList.add("optimizing"),
this._changeTrackingLabel.classList.add("optimizing"));this.item.isSpatiotemporal&&k["default"].disableNodes([this._enableExport,this._enableSync,this._enableChangeTracking],!0);k["default"].checkNode(this._enableExport,this._exportEnabled);k["default"].checkNode(this._enableSync,this._syncEnabled);r["default"].isOverwriteableService(this.item).then(function(Q){Q?V.item.set("types",n["default"].concatUnique(V.item.types,["is-overwrite"])):V.item.set("types",n["default"].filterOut(V.item.types,["is-overwrite"]))});
r["default"].canAppendData(this.item).then(function(Q){(V.item.canAppendData=Q)?V.item.set("types",n["default"].concatUnique(V.item.types,["can-appendData"])):V.item.set("types",n["default"].filterOut(V.item.types,["can-appendData"]))});this._hasSyncEnabledViews&&(this._syncLabel.classList.add("optimizing"),k["default"].disableNode(this._enableSync,!0));this.item.isViewService&&this._sourceSyncEnabled&&(k["default"].disableNode(this._enableSync,!this._sourceSyncEnabled),k["default"].hideNode(this._syncAsterisk),
this._syncLabel.classList.remove("optimizing"));k["default"].checkNode(this._enableChangeTracking,this._changeTrackingEnabled);k["default"].showHide(this._manageChangeLogContainer,!ba&&(this._changeTrackingEnabled||this._syncEnabled)&&!this.item.isViewService);this._hasChangeTrackingEnabledViews&&(this._changeTrackingLabel.classList.add("optimizing"),k["default"].disableNode(this._enableChangeTracking,!0));this.item.isViewService&&this._sourceChangeTrackingEnabled&&(k["default"].disableNode(this._enableChangeTracking,
!this._sourceChangeTrackingEnabled),k["default"].hideNode(this._changeTrackingAsterisk),this._changeTrackingLabel.classList.remove("optimizing"));k["default"].showHide(this._changeTrackingContainer,!ba);this.item.isMultiServicesView&&(k["default"].disableNodes([this._enableEditing,this._enableTrackEdits,this._enableSync,this._enableChangeTracking],!0),this._enableEditingLabel.classList.add("optimizing"),this._enableTrackEditsLabel.classList.add("optimizing"),this._syncLabel.classList.add("optimizing"),
this._changeTrackingLabel.classList.add("optimizing"));ka=this.page._formatSharing(this.item.sharing);this._howToShare.innerHTML=ka&&ka!==this.i18n.itemProperties.itemNotShared?this.i18n.itemProperties.currentLayerSharing+" "+ka:this.i18n.itemProperties.currentLayerNotShared;this._updateSharedUpdateUI();ka=!this._editingInfo.allowGeometryUpdates&&(ba||!ba&&this._editingInfo.layerHasGeometryUpdatesDisabled);this._editingInfo.editingEnabled?(k["default"].checkNode(this._editEnableAddFeatures,this._editingInfo.allowAddFeatures),
k["default"].checkNode(this._editEnableDeleteFeatures,this._editingInfo.allowDeleteFeatures),k["default"].checkNode(this._editEnableUpdateFeatures,this._editingInfo.allowUpdateFeatures),ka?(k["default"].checkNode(this._editAttributesOnly,!0),k["default"].hideNode(this._manageGeometryUpdatesContainer)):(k["default"].checkNode(this._editAttributesAndGeometry,!0),k["default"].showNode(this._manageGeometryUpdatesContainer)),k["default"].showHide(this._editEnableUpdateFeaturesOptions,this._editingInfo.allowUpdateFeatures),
k["default"].checkNode(this._enableEditing,!0)):(k["default"].checkNode(this._editEnableAddFeatures,!1),k["default"].checkNode(this._editEnableDeleteFeatures,!1),k["default"].checkNode(this._editEnableUpdateFeatures,!1),k["default"].showHide(this._editEnableUpdateFeaturesOptions,this._editingInfo.allowUpdateFeatures),ka?(k["default"].checkNode(this._editAttributesOnly,!0),k["default"].hideNode(this._manageGeometryUpdatesContainer)):(k["default"].checkNode(this._editAttributesAndGeometry,!0),k["default"].showNode(this._manageGeometryUpdatesContainer)),
k["default"].checkNode(this._enableEditing,!1));this._showEditWarnings();k["default"].checkNode(this._enableTrackEdits,this._editingInfo.trackingEnabled);this._editingInfo.trackingEnabled&&(k["default"].checkNode(this._editingInfo.restrictView?this._viewOwnFeaturesOnly:this._viewAllFeatures,!0),k["default"].checkNode(this._editingInfo.restrictEdits?this._editOwnFeaturesOnly:this._editAllFeatures,!0),k["default"].checkNode(this._editingInfo.restrictAnonymous?this._anonAddOnly:this._anonSame,!0));k["default"].showHide(this._anonymousAccessContainer,
!ba);k["default"].isChecked(this._viewAllFeatures)&&this._editingInfo.viewNoFeatures&&k["default"].checkNode(this._viewNoFeatures,!0);ka=this._layerOptimizationInfo.layers||[];var la=this.domNode.querySelector(".js-optimizing"),ma=this.domNode.querySelector(".js-optimized"),ha=ka.filter(function(Q){return Q.optimizing}),Z=ka.filter(function(Q){return Q.optimizationEnabled&&!Q.optimizing});ka=0<ha.length;var W=0<Z.length;k["default"].showHide(this.optimizeBtn,!ka);k["default"].showHide(this.cancelOptimizeBtn,
ka);k["default"].showHide(this.optimizeNote,ka);H["default"].empty(la);ka&&ha.forEach(function(Q){H["default"].create("div",{"class":"optimizing",innerHTML:Q.name+"\x26nbsp;"+V.i18n.itemProperties.optimizingLayer},la)});k["default"].showHide(la,ka);H["default"].empty(ma);W&&(ma.innerHTML=Z.reduce(function(Q,ia){return Q+"\x3cdiv\x3e"+ia.name+"\x3c/div\x3e"},'\x3cdiv class\x3d"trailer-half"\x3e'+this.i18n.itemProperties.optimizedLayers+"\x3c/div\x3e"));k["default"].showHide(ma,W);ba||(this._cacheControlHelpLink.href=
""+v["default"].self.helpBase+(v["default"].self.helpMap.m["120001509"]||""),ba=this._cacheMaxAge,n["default"].includes(t.CACHE_OPTIONS,ba)||(ba=this._cacheMaxAge=r["default"].findClosestValue(t.CACHE_OPTIONS,this._cacheMaxAge)),k["default"].selectOption(this._cacheControlSelect.options,""+ba));this._toggleEditing(null);this._toggleTracking(null);this._toggleEditingAllowed(null);this._toggleOptimizeLayers(null);this._toggleRebuildSpatialIndex(null);this._toggleCacheControl(null);this._checkOptimizationStatus(ka);
this._checkSpatioTemporalStatus();this._checkViewOwnFeaturesOnlyStatus()};fa.prototype._checkViewOwnFeaturesOnlyStatus=function(){var V=k["default"].isChecked(this._viewOwnFeaturesOnly);k["default"].disableNode(this._editAllFeatures,V);this._editAllFeaturesLabel.classList[V?"add":"remove"]("optimizing")};fa.prototype._checkSpatioTemporalStatus=function(){e["default"].isPortal()&&this._editingInfo.trackingEnabled&&this.item.isSpatiotemporal&&(k["default"].disableNodes([this._enableTrackEdits,this._viewOwnFeaturesOnly,
this._editOwnFeaturesOnly],!0),this._enableTrackEditsLabel.classList.add("optimizing"),this._viewOwnFeaturesOnlyLabel.classList.add("optimizing"),this._editOwnFeaturesOnlyLabel.classList.add("optimizing"),this._enableTrackEditsContainer.classList.remove("if-no-spatiotemporal"))};fa.prototype._updateSharedUpdateUI=function(){k["default"].hideNode(this._updateCapabilitiesGroupsContainer);if(this.item.sharing.groups&&0<this.item.sharing.groups.length){var V=t.fetchSharedUpdateGroups(this.item.sharing);
0<(null===V||void 0===V?void 0:V.length)&&(this._updateCapabilitiesGroups.innerHTML=t.formatSharedUpdateGroups(V,this.i18n.itemProperties.groupDetails),k["default"].showNode(this._updateCapabilitiesGroupsContainer))}};fa.prototype._checkOptimizationStatus=function(V){var ba=this;if(V&&!this._currentlyOptimizing){this._currentlyOptimizing=!0;var ka=0,la=function(){setTimeout(function(){ka++;var ma=r["default"].includeTimestampInRequest({token:ba.item.adminServerToken||ba.portalUser&&ba.portalUser.credential.token||
null});e["default"].request({url:ba.item.adminUrl,content:ma},{useProxy:e["default"].shouldUseProxy(ba.item.adminUrl)}).then(function(ha){ba.item.adminServiceInfo.layers=D["default"].clone(ha.layers);ba._layerOptimizationInfo.optimizedLayerIds=[];var Z=ba._layerOptimizationInfo.layers||[],W;Z.forEach(function(aa){for(var ea=0;ea<ha.layers.length;ea++)if(W=ha.layers[ea],aa.id===W.id){aa.optimizing=!(!W.multiScaleGeometryStatus||"InProgress"!==W.multiScaleGeometryStatus);aa.optimizationEnabled=!(!W.multiScaleGeometryInfo&&
!aa.optimizing);break}});Z.forEach(function(aa){aa.optimizationEnabled&&(ba._layerOptimizationInfo.optimizedLayerIds.push(aa.id),ba.toggleOptimizeLayerIds.push(aa.id))});ba._layerOptimizationInfo.currentlyOptimizing=Z.some(function(aa){return aa.optimizing});var Q=ba.domNode.querySelector(".js-optimizing"),ia=ba.domNode.querySelector(".js-optimized"),R=Z.filter(function(aa){return aa.optimizing}),S=Z.filter(function(aa){return aa.optimizationEnabled&&!aa.optimizing}),N=0<R.length,X=0<S.length;k["default"].showHide(ba.optimizeBtn,
!N);k["default"].showHide(ba.cancelOptimizeBtn,N);k["default"].showHide(ba.optimizeNote,N);H["default"].empty(Q);N&&R.forEach(function(aa){H["default"].create("div",{"class":"optimizing",innerHTML:aa.name+"\x26nbsp;"+ba.i18n.itemProperties.optimizingLayer},Q)});k["default"].showHide(Q,N);H["default"].empty(ia);X&&(ia.innerHTML=S.reduce(function(aa,ea){return aa+"\x3cdiv\x3e"+ea.name+"\x3c/div\x3e"},'\x3cdiv class\x3d"trailer-half"\x3e'+ba.i18n.itemProperties.optimizedLayers+"\x3c/div\x3e"));k["default"].showHide(ia,
X);Z.forEach(function(aa){var ea=ba.domNode.querySelector("#optimize-layer-"+aa.id);ea&&(k["default"].checkNode(ea,aa.optimizationEnabled),k["default"].disableNode(ea,ba.item.isViewService||ba._layerOptimizationInfo.currentlyOptimizing));if(ea=ba.domNode.querySelector("#optimize-layer-"+aa.id+"-label"))ea.classList[aa.optimizing||ba._layerOptimizationInfo.currentlyOptimizing?"add":"remove"]("optimizing");(ea=ba.domNode.querySelector("#optimizing-layer-"+aa.id+"-label"))&&k["default"].showHide(ea,
aa.optimizing)});ba._layerOptimizationInfo.currentlyOptimizing?ba._pageExists&&ba._layerOptimizationInfo.currentlyOptimizing&&la():(ba._currentlyOptimizing=void 0,ba.cancelOptimizeBtn.disabled=!1)})},l["default"].asyncIntervalTimerFunction(ka))};la()}else!V&&this._currentlyOptimizing&&(this._currentlyOptimizing=void 0)};fa.prototype._editService=function(V,ba){var ka=this,la=new I["default"],ma=this._exportChanged||this._syncChanged||this._editingChanged||this._trackingChanged||this._changeTrackingChanged||
this._cacheControlChanged,ha=e["default"].isPortal(),Z=this.item.adminServiceInfo,W=[],Q={},ia=Z&&Z.extensions||[],R={},S={usePost:!0},N=!1,X;if(ha)if(S.timeout=6E4,this.item.isSDS){var aa=this.item.adminUrl+"/updateDefinition";R.updateDefinition=JSON.stringify(V);R.async=!0}else{aa=this.item.adminUrl+"/edit";for(X=0;X<ia.length;X++)if(ia[X].typeName&&"FeatureServer"===ia[X].typeName){Q=ia[X];break}Q.capabilities=V.capabilities;Q.properties.allowGeometryUpdates=V.allowGeometryUpdates||(ba.allowAddFeatures||
ba.allowUpdateFeatures||ba.allowDeleteFeatures)&&!ba.allowUpdateAttributesOnly;R.token=this.item.adminServerToken;R.service=JSON.stringify(Z)}else aa=this.item.url.replace("/rest/","/rest/admin/")+"/updateDefinition",R.updateDefinition=JSON.stringify(V),R.async=!0;var ea=function(Y){Y=[];ka._layerGeometryUpdatesChanged&&ka.aggregateLayerGeometryUpdates(aa,Y);!ha&&ka._optimizationChanged&&(N=ka.aggregateOptimizationChanges(aa,ba,Y));Y.forEach(function(T){T.content&&(T.content.updateDefinition=JSON.stringify(T.content.updateDefinition),
W.push(e["default"].request({url:T.url,content:T.content},{usePost:!0})))},ka);0<W.length?L["default"](W).then(function(){N?setTimeout(function(){la.resolve()},t.DELAY_RESOLUTION_TIME):la.resolve()},function(T){la.resolve()}):la.resolve()};ma?e["default"].request({url:f["default"].encodeServiceName(aa,this.item.isSDS),content:R},S).then(function(Y){R.async&&Y.statusURL?(ka.activeAsyncJobs[Y.statusURL]=!0,setTimeout(function(){ka.activeAsyncJobs[Y.statusURL]&&(r["default"].createSpecifiedDialog(x["default"],
{title:ka.i18n.common.notice,content:ka.i18n.itemProperties.longRunningOperation}).show(),ka.activeAsyncJobs[Y.statusURL]=void 0)},6E5),c["default"].checkAsyncJobStatusWithVaryingInterval(Y.statusURL,l["default"].asyncIntervalTimerFunction.bind(ka)).then(function(T){ka.activeAsyncJobs[Y.statusURL]=void 0;ea(D["default"].mixin(Y,T))},function(T){ka.activeAsyncJobs[Y.statusURL]=void 0;la.reject(T)})):ea(Y)},function(Y){la.reject(Y)}):ha||!this._optimizationChanged&&!this._layerGeometryUpdatesChanged||
ea();return la};fa.prototype.aggregateLayerGeometryUpdates=function(V,ba){var ka=this;this._layerGeometryUpdates.forEach(function(la){ba.push({id:la.id,url:f["default"].encodeServiceName(V,ka.item.isSDS).replace("/updateDefinition","/"+la.id+"/updateDefinition"),content:{updateDefinition:{allowGeometryUpdates:la.allowGeometryUpdates}}})})};fa.prototype.aggregateOptimizationChanges=function(V,ba,ka){var la=this,ma=!1,ha;(this._layerOptimizationInfo.layers||[]).forEach(function(Z){ha=Z.id;var W=n["default"].findIndex(ka,
function(Q){return Q.id===ha});Z=-1<W?ka[W]:{id:ha,url:f["default"].encodeServiceName(V,la.item.isSDS).replace("/updateDefinition","/"+Z.id+"/updateDefinition")};!n["default"].includes(la._layerOptimizationInfo.optimizedLayerIds,ha)&&n["default"].includes(ba.optimizedLayerIds,ha)&&(ma=!0,Z.content?(Z.content.async=!0,Z.updateDefinition.multiScaleGeometryInfo={levels:[]}):Z.content={async:!0,updateDefinition:{multiScaleGeometryInfo:{levels:[]}}});n["default"].includes(la._layerOptimizationInfo.optimizedLayerIds,
ha)&&!n["default"].includes(ba.optimizedLayerIds,ha)&&(ma=!0,Z.content?(Z.content.async=!0,Z.updateDefinition.multiScaleGeometryInfo=null):Z.content={async:!0,updateDefinition:{multiScaleGeometryInfo:null}});Z&&ka.push(Z)});return ma};fa.prototype._getCacheMaxAgeString=function(V){n["default"].includes(t.CACHE_OPTIONS,V)||(V=r["default"].findClosestValue(t.CACHE_OPTIONS,this._cacheMaxAge));switch(V){case 0:return this.i18n.itemProperties.cacheControlOptions.never;case 30:return this.i18n.itemProperties.cacheControlOptions.thirtySec;
case 60:return this.i18n.itemProperties.cacheControlOptions.oneMin;case 120:return this.i18n.itemProperties.cacheControlOptions.twoMin;case 300:return this.i18n.itemProperties.cacheControlOptions.fiveMin;case 900:return this.i18n.itemProperties.cacheControlOptions.fifteenMin;case 1800:return this.i18n.itemProperties.cacheControlOptions.thirtyMin;case 3600:return this.i18n.itemProperties.cacheControlOptions.oneHr;default:return""}};fa.prototype.manageChangeLogClicked=function(){var V=this,ba=document.createElement("div");
ba.id="manage-change-log-container";document.body.insertAdjacentElement("beforeend",ba);var ka=function(la){m["default"].showAlert("error",V.i18n.itemProperties.manageChangeLog.error)};O.render(O.h(p["default"],{item:this.item,strings:w.__assign(w.__assign({},this.i18n.itemProperties.manageChangeLog),{cancel:this.i18n.common.cancel}),onSuccess:function(la){(null===la||void 0===la?0:la.code)?ka(la):(m["default"].showAlert("success",V.i18n.itemProperties.manageChangeLog.success),O.render(null,ba))},
onError:ka,onCancel:function(){O.render(null,ba)}}),ba)};fa.prototype._manageGeometryUpdatesClicked=function(){var V=D["default"].clone(this.item.adminServiceInfo.layers);this._layerGeometryUpdates.forEach(function(ba){V.forEach(function(ka){""+ka.id===ba.id&&(ka.allowGeometryUpdates=ba.allowGeometryUpdates)})});(new g["default"]).show(V)};fa.prototype._handleLayerGeometryUpdates=function(V){var ba=this;this._layerGeometryUpdates=[];V.forEach(function(ka){ba.item.adminServiceInfo.layers.forEach(function(la){ka.id===
""+la.id&&ka.allowGeometryUpdates!==la.allowGeometryUpdates&&ba._layerGeometryUpdates.push(ka)},ba)},this);this._handlePropertyChange()};fa.prototype.optimizeLayersClick=function(){var V=this,ba=H["default"].create("div",{id:"optimize-layers-container"},document.body,"last"),ka=this.hasNonOptimizationChanges();O.render(O.h(b["default"],{layers:D["default"].clone(this._layerOptimizationInfo.layers),onCancel:function(){O.render(null,ba)},onSubmit:function(la){V.toggleOptimizeLayerIds=la;O.render(null,
ba);V._handlePropertyChange();if(V._optimizationChanged)if(ka){var ma=r["default"].createSpecifiedDialog(d["default"],{buttonOkLabel:V.i18n.common.yesLabel,buttonCancelLabel:V.i18n.common.cancel,"class":"confirmDlg-default"});ma.show({title:V.i18n.itemProperties.unsavedChanges,message:V.i18n.itemProperties.unsavedChangesConfirm}).then(function(ha){"onOk"===ha?(ma.hide(),V._emitSectionForceSave()):(ma.hide(),V._emitSectionForceCancel())})}else V._emitSectionForceSave()},i18n:this.i18n,singleToggleMode:!0}),
ba)};fa.prototype.cancelOptimizeClick=function(){var V=this,ba,ka=this.hasNonOptimizationChanges(),la=null===(ba=this._layerOptimizationInfo.layers)||void 0===ba?void 0:ba.filter(function(ha){return ha.optimizing}).map(function(ha){return ha.id});this.toggleOptimizeLayerIds=n["default"].filterOut(this._layerOptimizationInfo.optimizedLayerIds,la);this._handlePropertyChange();if(this._optimizationChanged)if(this.cancelOptimizeBtn.disabled=!0,ka){var ma=r["default"].createSpecifiedDialog(d["default"],
{buttonOkLabel:this.i18n.common.yesLabel,buttonCancelLabel:this.i18n.common.cancel,"class":"confirmDlg-default"});ma.show({title:this.i18n.itemProperties.unsavedChanges,message:this.i18n.itemProperties.unsavedChangesConfirm}).then(function(ha){"onOk"===ha?(ma.hide(),V._emitSectionForceSave()):(ma.hide(),V._emitSectionForceCancel(),V.cancelOptimizeBtn.disabled=!1)})}else this._emitSectionForceSave()};return fa=w.__decorate([y["default"](q["default"],B["default"])],fa)}()})},"arcgisonline/pages/components/OptimizeLayerDrawing":function(){define("require exports tslib ../utils/focus preact preact/hooks".split(" "),
function(K,G,w,v,r,f){Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);G["default"]=function(c){var a=c.layers,b=c.onCancel,p=c.onSubmit,q=c.i18n,t=c.singleToggleMode,m=f.useState(!0);c=m[0];var n=m[1];m=f.useState(void 0);var k=m[0],l=m[1];m=f.useState([]);var h=m[0],e=m[1],d=f.useRef();f.useEffect(function(){var x=v["default"].trapFocus(d.current);return function(){v["default"].untrapFocus(d.current,x);document.documentElement.classList.remove("overflow-hidden")}});var g=
function(){n(!1);b()},u=function(){n(!1);var x=[];a.forEach(function(y){t?k===y.id&&(y.optimizationEnabled=!y.optimizationEnabled):-1<h.indexOf(y.id)&&(y.optimizationEnabled=!y.optimizationEnabled);y.optimizationEnabled&&x.push(y.id)});p(x)};m=a.map(function(x){var y=x.id,B=x.name,C=t?k?y!==k:!1:!1;x=t?null!==k&&void 0!==k&&y===k?!x.optimizationEnabled:x.optimizationEnabled:-1<h.indexOf(y)?!x.optimizationEnabled:x.optimizationEnabled;return r.h("label",{"class":"font-size--2 trailer-0",key:y},r.h("input",
{type:"checkbox",checked:x,disabled:C,onChange:function(){if(t)k===y?l(void 0):l(y);else{var z=w.__spreadArray([],h),D=z.indexOf(y);-1<D?z.splice(D,1):z.push(y);e(z)}}})," ",B)});return r.h("calcite-modal",{active:c,"intl-close":q.common.close,role:"dialog","aria-modal":"true",oncalciteModalClose:g,ref:d,"disable-outside-close":!0},r.h("h3",{slot:"header","class":"font-size-2 trailer-0"},q.itemProperties.optimizeLayersTitle),r.h("div",{slot:"content","class":"position-relative"},r.h("div",{"class":"trailer-half"},
q.itemProperties.optimizeLayersSelect),m),r.h("calcite-button",{slot:"primary",width:"full",color:"blue",appearance:"solid",onClick:function(){return u()}},q.common.update),r.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",color:"blue",onClick:function(){return g()}},q.common.cancel))}})},"arcgisonline/pages/item/components/ManageChangeLog":function(){define("require exports tslib ../../utils/polling ../../../sharing/util preact preact/hooks".split(" "),function(K,G,w,v,r,f,
c){var a=this;Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);r=w.__importDefault(r);var b=[30,90,180];G["default"]=function(p){var q=p.item,t=p.strings,m=p.onSuccess,n=p.onError,k=p.onCancel,l=c.useState(!0);p=l[0];var h=l[1],e=c.useState(!1);l=e[0];var d=e[1];e=c.useState(Math.max.apply(Math,b));var g=e[0],u=e[1];e=function(y){var B;(y=null===(B=y.target)||void 0===B?void 0:B.value)&&u(y)};var x=b.map(function(y){return f.h("option",{value:y,"aria-label":t["retention"+y],
key:y,selected:g===y},y)});return f.h("calcite-modal",{active:p,role:"dialog","aria-modal":"true","aria-label":t.title,"disable-close-button":!0,"disable-outside-close":!0,width:"m"},f.h("h3",{slot:"header","class":"font-size-2 trailer-0","data-test":"title"},t.title),f.h("div",{slot:"content"},f.h("calcite-loader",{active:l,scale:"l",type:"indeterminate",label:t.trimming,text:t.trimming,"data-test":"loader"}),l?null:f.h(f.Fragment,null,f.h("p",null,t.logging),f.h("p",null,t.dependencies," ",f.h("strong",
null,t.warning)),f.h("div",null,t.select," ",f.h("span",{"class":"inline-block margin-left-half"},f.h("select",{"aria-label":t.selectLabel,onChange:e},x))))),f.h("calcite-button",{slot:"primary",width:"full",color:"blue",appearance:"solid",onClick:function(){return w.__awaiter(a,void 0,void 0,function(){var y,B,C,z,D,E,A,F,H=this;return w.__generator(this,function(I){switch(I.label){case 0:d(!0),y=q.layers.map(function(L){return L.id}),B=q.adminUrl+"/cleanupChangeTracking",C={layers:y.join(","),retentionPeriod:g,
retentionPeriodUnits:"days",async:!0,token:q.adminServerToken},I.label=1;case 1:return I.trys.push([1,3,,4]),[4,r["default"].request({url:B,content:C},{usePost:!0})];case 2:return z=I.sent(),z.code?n(z):(d(!0),D=0,E=!1,A=setInterval(function(){return w.__awaiter(H,void 0,void 0,function(){var L,J;return w.__generator(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,,3]),[4,r["default"].request({url:z.statusURL})];case 1:return L=O.sent(),D++,L.code||"Failed"===L.status?(E=!0,clearInterval(A),
n(L),d(!1)):"Completed"===L.status&&(E=!0,clearInterval(A),h(!1),m(L)),[3,3];case 2:return J=O.sent(),E=!0,clearInterval(A),n(J),d(!1),[3,3];case 3:return[2]}})})},E?0:v["default"].asyncIntervalTimerFunction(D))),[3,4];case 3:return F=I.sent(),n(F),d(!1),[3,4];case 4:return[2]}})})},"data-test":"ok",disabled:l},t.trim),f.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",color:"blue",onClick:function(){h(!1);k()},"data-test":"cancel",disabled:l},t.cancel))}})},"arcgisonline/pages/item/widgets/typeOptions/featureSupport":function(){define("require exports tslib ../../../serviceUtil ../../../utils/arrays ../../../../sharing/util dojo/Deferred".split(" "),
function(K,G,w,v,r,f,c){Object.defineProperty(G,"__esModule",{value:!0});G.checkMapServiceCapabilitiesForSync=G.formatSharedUpdateGroups=G.unregisterReplicas=G.fetchSharedUpdateGroups=G.fetchSourceAdminServiceInfo=G.fetchReplicas=G.CACHE_OPTIONS=G.VIEW_SERVICE=G.SYNC_CAPABILITY=G.FEATURE_SERVER=G.DELAY_RESOLUTION_TIME=void 0;v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);G.DELAY_RESOLUTION_TIME=2E4;G.FEATURE_SERVER="FeatureServer";G.SYNC_CAPABILITY="Sync";
G.VIEW_SERVICE="View Service";G.CACHE_OPTIONS=[0,30,60,120,300,900,1800,3600];G.fetchReplicas=function(a){return f["default"].request({url:a.url+"/replicas"})};G.fetchSourceAdminServiceInfo=function(a){var b=new c["default"];a.sourceData.adminUrl=v["default"].fetchItemAdminUrl(a.sourceData,null);f["default"].request({url:a.sourceData.adminUrl}).then(function(p){a.sourceAdminServiceInfo=p;b.resolve()},function(p){b.resolve()});return b};G.fetchSharedUpdateGroups=function(a){return a.groups.filter(function(b){return r["default"].includes(b.capabilities,
"updateitemcontrol")})};G.unregisterReplicas=function(a){a=a.url+"/unRegisterReplica";var b=f["default"].isPortal()?{replicaID:"*"}:{ReplicaID:"*"};return f["default"].request({url:a,content:b},{usePost:!0})};G.formatSharedUpdateGroups=function(a,b){var p,q,t;a=(a||[]).map(function(m){p=f["default"].htmlEncode(m.title);q="group.html?owner\x3d"+m.owner+"\x26title\x3d"+encodeURIComponent(m.title);return'\x3ca href\x3d"'+q+'" alt\x3d"'+b+'" title\x3d"'+b+'"\x3e'+p+"\x3c/a\x3e"});return t=(t?t+", ":"")+
a.join(", ")};G.checkMapServiceCapabilitiesForSync=function(a,b){var p=new c["default"],q=!1;f["default"].request({url:a._hostedFederatedServer.adminUrl+"/admin/services/types/MapServer",content:{f:"json",token:b.adminServerToken}}).then(function(t){if(null===t||void 0===t?0:t.ExtensionTypes)q=t.ExtensionTypes.some(function(m){var n,k;return(null===m||void 0===m?void 0:m.Name)===G.FEATURE_SERVER&&-1<(null===(k=null===(n=m.Info)||void 0===n?void 0:n.AllWebCapabilities)||void 0===k?void 0:k.indexOf(G.SYNC_CAPABILITY))});
p.resolve(q)},function(){p.resolve(!1)});return p}})},"arcgisonline/sharing/dijit/dialog/ManageGeometryUpdatesDlg":function(){define("require exports tslib ../../../pages/utils/dom ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dijit/Dialog dojo/on dojo/topic dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ManageGeometryUpdatesDlg.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);
c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);return function(){function n(k,l){this.templateString=m["default"];this.baseClass="esriManageSceneCache";this.i18n=w.__assign(w.__assign({},t["default"].common),t["default"].itemProperties.manageGeometryUpdates)}n.prototype.postCreate=function(){this.inherited(arguments);this.addEventListeners()};n.prototype.show=function(k){var l=this;this.layers=
k;this.createLayerListDisplay(this.layers);this.dialog=new b["default"]({title:this.i18n.title,baseClass:this.baseClass});this.dialog.setContent(this.domNode);this.own(p["default"](this.dialog,"hide",function(){return l.dialogHidden()}));this.dialog.show()};n.prototype.hide=function(){this.dialog.hide()};n.prototype.addEventListeners=function(){var k=this;this.own(a["default"](this.okBtn,function(){q["default"].publish("manage-geometry-updates/update",k.getLayers());k.hide()}),a["default"](this.cancelBtn,
function(){return k.hide()}))};n.prototype.dialogHidden=function(){this.dialog&&this.dialog.destroyRecursive();this.destroyRecursive()};n.prototype.getLayers=function(){var k=[];v["default"].forEachNode(this.layerContainer.querySelectorAll(".layer-checkbox"),function(l){k.push({id:l.dataset.layerId,allowGeometryUpdates:l.checked})});return k};n.prototype.createLayerListDisplay=function(k){var l=this;null===k||void 0===k?void 0:k.forEach(function(h){return l.createLayerDisplay(l.layerContainer,h)})};
n.prototype.createLayerDisplay=function(k,l){k.insertAdjacentHTML("beforeend",'\n      \x3cdiv class\x3d"flex"\x3e\n        \x3cinput type\x3d"checkbox" class\x3d"layer-checkbox"\n          id\x3d"layer-'+l.id+'-checkbox"\n          data-layer-id\x3d"'+l.id+'"\n          '+(l.allowGeometryUpdates?"checked":"")+'\x3e\n        \x3cdiv\x3e\n          \x3cspan\x3e\x3clabel class\x3d"layer-label trailer-0" for\x3d"layer-'+l.id+'-checkbox"\x3e'+l.name+"\x3c/label\x3e\x3c/span\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n    ")};
return n=w.__decorate([r["default"](f["default"],c["default"])],n)}()})},"arcgisonline/sharing/dijit/dialog/RebuildSpatialIndexDlg":function(){define("require esri/declare esri/Evented esri/kernel esri/lang esri/request esri/arcgis/Portal dojo/_base/lang dojo/_base/window dojo/_base/array dojo/topic dojo/string dojo/query dojo/on dojo/json dojo/_base/event dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/promise/all dojo/Deferred dojo/when ./ConfirmDialog ./_CreateItemUtilMixin dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Dialog arcgisonline/sharing/util dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/RebuildSpatialIndexDlg.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I){return G([z,D,E,w],{baseClass:"rebuildSpatialIndexDlg",templateString:I,intervals:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120],postMixInProperties:function(){this.inherited(arguments);a.mixin(this,{isBatch:this.items&&1<this.items.length});this.i18n=a.mixin({},H)},startup:function(L){this.inherited(arguments);this.item=L;return this._initUI()},showModal:function(L){L=new x;this.dlg=new B({title:H.rebuildSpatialIndexDlg.rebuildSpatialIndexTitle,
style:{width:"500px",height:"auto"},buttonOkLabel:H.rebuildSpatialIndexDlg.rebuildSpatialIndexDlgButton});var J=m(".rebuildSpatialIndexCheckbox",this.domNode).shift();this.item.adminServiceInfo.layers.reduce(a.hitch(this,function(O,P){if("Feature Layer"===P.type){var fa=document.createElement("input");fa.type="checkbox";fa.name=P.name;fa.value=P.name;fa.id=P.id;var V=document.createElement("label");V.htmlFor=P.id;V.appendChild(document.createTextNode(P.name));J.appendChild(fa);J.appendChild(V)}}),
"");this.dlg.setContent(this.domNode);this.dlg.show();this.okBtn=this.dlg&&this.dlg.okButton||{};this.okBtn.set("disabled",!0);this.own(n(this.dlg,"ok",a.hitch(this,function(){this.set("readOnly",!0);this._loaderHelper(!0,H.rebuildSpatialIndexDlg.defaultLoading);for(var O=m(".rebuildSpatialIndexCheckbox",this.domNode).shift(),P=[],fa=0;fa<O.elements.length;fa++)O.elements[fa].checked&&(P[P.length]=fa);this._updateDefonFeatureServiceAllLayers(P).then(a.hitch(this,function(){this._checkStatus().then(a.hitch(this,
function(){this.dlg.destroyRecursive();q.publish("alert/show",{type:"success",text:H.rebuildSpatialIndexDlg.updateSuccess})}),a.hitch(this,function(V){this._showError(H.rebuildSpatialIndexDlg.errors.error,!0)}))}))})),n(this.dlg,"cancel",a.hitch(this,function(){this.set("readOnly",!0);this.onCancel()})));return L},onCancel:function(){this.dlg&&this.dlg.destroyRecursive()},_initUI:function(){var L=new x;this._initHandlers();return L},_initHandlers:function(){this.own(m(".rebuildSpatialIndexCheckbox",
this.domNode).on("change",a.hitch(this,function(L){l.stop(L);L=m(".rebuildSpatialIndexCheckbox",this.domNode).shift();for(var J=0;J<L.elements.length;J++)if(L.elements[J].checked){this.okBtn.set("disabled",!1);return}this.okBtn.set("disabled",!0)})))},_showError:function(L){this.dlg.destroyRecursive();q.publish("alert/show",{type:"success",text:H.rebuildSpatialIndexDlg.errors.error})},_loaderHelper:function(L,J){var O=J?J:"Loading...";!0===L?(this._showHideDiv(".loader",!0),m(".loader-text",this.domNode).attr("innerHTML",
O),m(".rebuildSpatialIndexDialog",this.domNode).style("opacity",.5),m(".rebuildSpatialIndexDialog",this.domNode).style("pointer-events","none"),this.dlg.okButton.set("disabled",!0),this.dlg.cancelButton.set("disabled",!0)):(m(".loader-text",this.domNode).attr("innerHTML",O),this._showHideDiv(".loader",!1),m(".rebuildSpatialIndexDialog",this.domNode).style("opacity",1),m(".rebuildSpatialIndexDialog",this.domNode).style("pointer-events","auto"),this.dlg.okButton.set("disabled",!1),this.dlg.cancelButton.set("disabled",
!1))},_updateDefonFeatureServiceAllLayers:function(L){for(var J=new x,O=this.item.adminServiceInfo,P=[],fa=0;fa<L.length;fa++)for(var V=0;V<O.layers[L[fa]].indexes.length;V++)if("Shape"===O.layers[L[fa]].indexes[V].fields||"SHAPE"===O.layers[L[fa]].indexes[V].fields){var ba={indexes:[]};ba.indexes[0]={name:O.layers[L[fa]].indexes[V].name,fields:O.layers[L[fa]].indexes[V].fields};V=this.item.adminUrl+"/"+O.layers[L[fa]].id+"/updateDefinition";ba={updateDefinition:JSON.stringify(ba),async:!0};P.push(F.request({url:V,
content:ba},{usePost:!0}));break}setTimeout(a.hitch(this,function(){u(P).then(a.hitch(this,function(ka){J.resolve()}),a.hitch(this,function(ka){J.reject(ka)}))}),2E3);return J},_checkStatus:function(L,J){var O=this.item.adminUrl,P=J||new x,fa=500,V=L||0;F.request({url:O},{usePost:!0}).then(a.hitch(this,function(ba){for(var ka=!1,la=0;la<ba.layers.length;la++)if("InProgress"===ba.layers[la].updateLayerDefinitionStatus){ka=!0;break}ka?(fa=this._getNextTimerInterval(V),setTimeout(a.hitch(this,function(){V++;
this._checkStatus(V,P)}),fa)):P.resolve(!0)}),a.hitch(this,function(ba){this._showError(ba)}));return P},_getNextTimerInterval:function(L){return 1E3*this.intervals[-1<L&&L<this.intervals.length-1?L:this.intervals.length-1]},_showHideDiv:function(L,J){!0===J?m(L).removeClass("hide"):m(L).addClass("hide")}})})},"arcgisonline/pages/item/widgets/typeOptions/marketplace":function(){define("require exports tslib ../../../../esriGeowConfig ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/a11yclick dojo/_base/lang dojo/topic dojo/Deferred dojo/text!./marketplace.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=l["default"];this.WEB_MAPPING_APP="Web Mapping Application";this.PARENT_LISTING="Parent Listing";this.CHILD_LISTING=
"Child Listing";this.REGISTERED_APP="Registered App";this.APPLICATION="application"}h.prototype._initHandlers=function(){var e=this._toggleMarketplace.bind(this);this.own(t["default"](this._createListingBtn,this._createListingClick.bind(this)),t["default"](this._viewListingBtn,this._viewListingClick.bind(this)),t["default"](this._unlistItemBtn,this._unlistClick.bind(this)),n["default"].subscribe("item/register",e),n["default"].subscribe("item/unregister",e))};h.prototype.reset=function(){var e=new k["default"];
this._toggleMarketplace().then(function(){return e.resolve()});return e};h.prototype._toggleMarketplace=function(){var e=this,d=new k["default"],g=b["default"].isPortal(),u=this.item.type?this.item.type.toLowerCase():"",x=!(!this.portalUser||!this.portalUser.accountId),y=this.portalUser.userRole,B=y&&y.isCustom()&&y.canManageMarketplace();y=y&&y.isAdmin();B=(this.item.isAdmin||B||y)&&this.item.isOwner;var C="esri_apps"===this.item.owner||"esri"===this.item.owner,z=!(!this.item.url||!(-1<this.item.url.toLowerCase().indexOf(v["default"].portalHostname.toLowerCase())||
-1<this.item.url.toLowerCase().indexOf(window.location.hostname.toLowerCase()))),D=this.item.implicitlyListed,E=v["default"].self.canListApps,A=!1,F=!1;a["default"].hideNode(this._createListingBtn);a["default"].hideNode(this._viewListingBtn);a["default"].hideNode(this._unlistItemBtn);a["default"].hideNode(this._mustRegisterContainer);if(!x||g||this.item.type&&this.item.type===this.WEB_MAPPING_APP&&z&&!C||D)return this._hideMarketplaceContainer(!0),d.resolve(),d;this.item.listed?((!c["default"].includes(this.item.typeKeywords,
this.CHILD_LISTING)||c["default"].includes(this.item.typeKeywords,this.CHILD_LISTING)&&y)&&a["default"].showNode(this._viewListingBtn),B&&a["default"].showNode(this._unlistItemBtn),a["default"].showNode(this._listingContainer),F=!0):B&&E&&-1!==u.indexOf(this.APPLICATION,u.length-this.APPLICATION.length)&&!c["default"].includes(this.item.typeKeywords,this.REGISTERED_APP)?(a["default"].hideNode(this._listingContainer),a["default"].showNode(this._mustRegisterContainer),F=!0):(A=!0,r["default"].isItemListable(this.item).then(function(H){H?
(a["default"].hideNode(e._mustRegisterContainer),a["default"].showNode(e._listingContainer),a["default"].showNode(e._createListingBtn),e._hideMarketplaceContainer(!1)):e._hideMarketplaceContainer(!0);d.resolve()},function(){e._hideMarketplaceContainer(!0)}));F?this._hideMarketplaceContainer(!1):A||this._hideMarketplaceContainer(!0);A||d.resolve();return d};h.prototype._hideMarketplaceContainer=function(e){a["default"].showHide(this._marketplaceContainer,!e);this.isHidden=e};h.prototype._createListingClick=
function(){"private"===this.item.access?window.location.href=v["default"].marketplaceUrl+"/edit.html?itemId\x3d"+this.item.id:this.alertError(this.i18n.itemProperties.error.createListingShared)};h.prototype._viewListingClick=function(){this.item.isAdmin||this.item.isOwner||!c["default"].includes(this.item.typeKeywords,this.CHILD_LISTING)?window.location.href=v["default"].marketplaceUrl+"/edit.html?id\x3d"+this.item.id:window.location.href=v["default"].marketplaceUrl+"/listing.html?id\x3d"+this.item.id};
h.prototype._unlistClick=function(){var e=this,d=[this.CHILD_LISTING,this.PARENT_LISTING],g,u,x=v["default"].restBaseUrl+"content/users/"+(this.item.isAdmin?this.item.owner:this.portalUser.username);x=x+"/"+(this.item.folderId||"")+"/items/"+this.item.id;var y=b["default"].request({url:x+"/unlist",content:{f:"json"}},{usePost:!0}).then(function(){return e.item});var B=m["default"].clone(this.item.typeKeywords);d.forEach(function(z){if(g=B.indexOf(z))u=!0,B.splice(g,1)});if(u){var C={typeKeywords:B.join(",")};
y.then(function(z){return b["default"].request({url:x+"/update",content:m["default"].mixin({f:"json"},C)},{usePost:!0})})}y.then(function(){e.page._item.set("listed",!1);e.page._item.set("typeKeywords",B);e._toggleMarketplace()});return y};return h=w.__decorate([p["default"](f["default"],q["default"])],h)}()})},"arcgisonline/pages/item/widgets/typeOptions/tile":function(){define("require exports tslib ../../../../esriGeowConfig ../../../../map/core/canUseForPublish ../../../pageUtil ../../../serviceUtil ../../../portal/PortalItem ./_mixin ../../../utils/alerts ../../../utils/arrays ../../../utils/dom ../../../utils/number ../../../../sharing/util ../../../../sharing/dijit/dialog/ManageTilesDlg ../../../../sharing/dijit/dialog/ConfirmDialog ../../../../sharing/dijit/dialog/SimpleDlg ../../../../sharing/dijit/dialog/GeneralDlg ../../../../tsutils/declareDecorator preact ../../../components/SelectLayerProperties ./components/SettingTileConfig/SettingTileConfig dijit/_TemplatedMixin dojo/on dojo/sniff dojo/topic dojo/string dojo/dom-construct dojo/Deferred dojo/promise/all dojo/when esri/lang esri/request esri/dijit/VisibleScaleRangeSlider dojo/text!./tile.html ../../../../sharing/util arcgisonline/pages/utils/clone".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);u=w.__importDefault(u);y=w.__importDefault(y);B=
w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);E=w.__importDefault(E);A=w.__importDefault(A);F=w.__importDefault(F);H=w.__importDefault(H);I=w.__importDefault(I);L=w.__importDefault(L);J=w.__importDefault(J);O=w.__importDefault(O);P=w.__importDefault(P);fa=w.__importDefault(fa);var V;(function(ha){ha.Pending="Pending";ha.InProgress="InProgress";ha.Failed="Failed"})(V||(V={}));var ba;(function(ha){ha.Completed="Completed";ha.Failed="Failed";ha.None="NONE"})(ba||
(ba={}));var ka;(function(ha){ha.Succeeded="esriJobSucceeded";ha.Failed="esriJobFailed";ha.Cancelled="esriJobCancelled";ha.Done="DONE"})(ka||(ka={}));var la;(function(ha){ha.FeatureService="Feature Service";ha.ServiceDefinition="Service Definition";ha.TilePackage="Tile Package";ha.VectorTilePackage="Vector Tile Package";ha.VectorTileService="Vector Tile Service"})(la||(la={}));var ma;(function(ha){ha.BuildCache="buildCache";ha.ManageTiles="manageTiles"})(ma||(ma={}));return function(){function ha(Z,
W){this.templateString=O["default"];this.cacheOnDemandInterval=5E3;this.cacheRebuildInterval=3E3;this.CHANGE_TRACKING_CAPABILITY="ChangeTracking";this.MAX_EXPORT_TILES=1E5;this.TEN_SECONDS=1E4;this.SCALE_MIN=5.91657527591555E8;this.SCALE_MAX=0;this.preactTileSetting=g.createRef()}ha.prototype.destroy=function(){this.inherited(arguments)};ha.prototype._initHandlers=function(){var Z=this,W;this.own(z["default"].subscribe("manage-tiles/update",this._updateTileInfo.bind(this)),B["default"](this.page,
"service-info-change",function(){Z.reset()}));var Q=this.SCALE_MIN,ia=this.SCALE_MAX,R=null!==(W=this._getSource())&&void 0!==W?W:null;I["default"].isDefined(R)&&R.type===la.FeatureService&&(ia=this._getScaleRange(this.item.serviceInfo.layers),Q=ia.minScale,ia=ia.maxScale);this.item.adminServiceInfo||(this.item.adminServiceInfo={});W=document.querySelector("[data-dojo-attach-point\x3dsetting-tile-config]");g.render(g.h(x.SettingTileConfig,{page:this.page,portal:this.page.portal,i18n:this.i18n,item:this.item,
minScaleConstraint:Q,maxScaleConstraint:ia,componentRef:this.preactTileSetting,onBuildTileClick:this._manageTilesClick.bind(this),onTileStatusChange:function(S){Z._currentTileStatus=S},onPropertyChange:this.emitChanged.bind(this),isArcGISEnterpriseOnKubernetes:n["default"].isArcGISEnterpriseOnKubernetes(),forceRefreshItem:function(){return Z.page._item.set("serviceChanged",!0)}}),W)};ha.prototype.retrievePropertyValues=function(){return{exportTilesAllowed:t["default"].isChecked(this._offlineTile),
minScale:this._currentMinScale,maxScale:this._currentMaxScale,cacheOnDemand:v["default"].tilesOnDemandEnabled&&t["default"].isChecked(this._buildTilesAutomatically)}};ha.prototype.hasChanges=function(){return!1};ha.prototype.save=function(){var Z=new A["default"];this.preactTileSetting.current.save().then(function(W){Z.resolve({changed:W.changedProps,toChange:W.toChangeProps})});return Z};ha.prototype.reset=function(){var Z;null===(Z=this.preactTileSetting.current)||void 0===Z?void 0:Z.reset();this._inspectServiceInfo();
return new A["default"]};ha.prototype.performActions=function(){return new A["default"]};ha.prototype._generateSimpleDlg=function(Z){return f["default"].createSpecifiedDialog(h["default"],Z)};ha.prototype._generateGeneralDlg=function(){return f["default"].createSpecifiedDialog(e["default"])};ha.prototype._canBuildCache=function(){var Z,W;return!this.item.portal.isPortal&&!this._cacheBuilt&&this._currentTileStatus.cacheExecutionStatus===ba.None&&0<(null===(W=null===(Z=this.item.serviceInfo.tileInfo)||
void 0===Z?void 0:Z.lods)||void 0===W?void 0:W.length)};ha.prototype._tilePackageMinMaxScaleFix=function(){var Z=new A["default"],W=this.item.portal.isPortal,Q=this.item.url.replace("/rest/","/rest/admin/")+"/edit",ia=this.item.serviceInfo,R=this.item.adminServiceInfo,S={usePost:!0};W=W&&0===R.minScale;var N={minScale:0<R.minScale?R.minScale:this.SCALE_MIN,maxScale:0<R.maxScale?R.maxScale:this.SCALE_MAX};this._hasSource()&&(N.sourceItemId=this._getSource().id);W?(0===R.minScale&&(N.minScale=ia.tileInfo.lods[0].scale),
0===R.maxScale&&(N.maxScale=ia.tileInfo.lods[ia.tileInfo.lods.length-1].scale),this._currentTileStatus.minScale=N.minScale,this._currentTileStatus.maxScale=N.maxScale,n["default"].request({url:Q,content:N},S).then(function(){Z.resolve()},function(){Z.resolve()})):Z.resolve();return Z};ha.prototype._buildCache=function(){var Z=this,W=new A["default"],Q=this.item.serviceInfo,ia=this.item.adminServiceInfo,R=this.page.portal.isPortal,S=!R&&I["default"].isDefined(Q.minLOD)&&I["default"].isDefined(Q.maxLOD)||
R&&I["default"].isDefined(ia.properties.minLOD)&&I["default"].isDefined(ia.properties.maxLOD),N=[],X=this.item.url.replace("/rest/","/rest/admin/")+"/updateTiles",aa,ea,Y,T,ca;this._tilePackageMinMaxScaleFix().then(function(){for(ca=0;ca<Q.tileInfo.lods.length;ca++)if(ea=Q.tileInfo.lods[ca],S){var M=R?ia.properties.maxLOD:Z._currentTileStatus.maxLOD;M=parseInt(M,10);ea.level>=Z._currentTileStatus.minLOD&&ea.level<=M&&N.push(ea.level)}else ea.scale<=Z._currentTileStatus.minScale&&ea.scale>=Z._currentTileStatus.maxScale&&
N.push(ea.level);9>=C["default"]("ie")&&(Y=X.indexOf("admin/services/"),T=X.indexOf("/MapServer"),X=X.substring(0,Y+15)+encodeURIComponent(X.substring(Y+15,T))+X.substring(T));aa={levels:N.join(","),extent:[Z._currentTileStatus.fullExtent.xmin,Z._currentTileStatus.fullExtent.ymin,Z._currentTileStatus.fullExtent.xmax,Z._currentTileStatus.fullExtent.ymax].join()};n["default"].request({url:X,content:aa},{usePost:!0}).then(function(){setTimeout(function(){W.resolve();Z._cacheBuilt=!0;Z.page._item.set("serviceChanged",
!0)},Z.TEN_SECONDS)},function(U){W.resolve()})},function(M){W.resolve()});return W};ha.prototype._showManageTiles=function(){this.item.adminServiceInfo&&this.item.adminServiceInfo.cacheOnDemand||this._openManageTiles()};ha.prototype._scaleChanged=function(Z,W,Q){var ia=this.item.serviceInfo;W!==Q&&("minScale"===Z&&(Q=this._visibleScaleRangeSlider.get("minScale"),this._currentMinScale=this._visibleScaleRangeSlider.get("actualMinScale"),0===Q&&this._currentMinScaleConstraint?this._currentMinScale=this._currentMinScaleConstraint:
0===Q&&ia.tileInfo&&ia.tileInfo.lods&&ia.tileInfo.lods.length&&(this._currentMinScale=ia.tileInfo.lods[0].scale)),"maxScale"===Z&&(this._currentMaxScale=this._visibleScaleRangeSlider.get("actualMaxScale")),this._handlePropertyChange())};ha.prototype._hydrateTileDimensions=function(Z){Z.tileInfo&&(Z.tileInfo.width=Z.tileInfo.width||256,Z.tileInfo.height=Z.tileInfo.height||256)};ha.prototype._hydrateMinMaxScale=function(Z,W){var Q,ia,R,S,N=this.item.portal.isPortal,X=this._getSource(),aa=I["default"].isDefined(W.minLOD)&&
I["default"].isDefined(W.maxLOD)||I["default"].isDefined(null===(Q=W.properties)||void 0===Q?void 0:Q.minLOD)&&I["default"].isDefined(null===(ia=W.properties)||void 0===ia?void 0:ia.maxLOD);Q=this.item.type===la.VectorTileService;ia=this._hasSource()&&this._isTilePackage(X.type)&&!Q;X=this._hasSource()&&this._isServiceDefinition(X.type);0<(null===(S=null===(R=Z.tileInfo)||void 0===R?void 0:R.lods)||void 0===S?void 0:S.length)&&(N?Q?(W.minScale=Z.minScale,W.maxScale=Z.maxScale):(W.minScale=I["default"].isDefined(W.properties.minScale)?
W.properties.minScale:Z.tileInfo.lods[0].scale,W.maxScale=I["default"].isDefined(W.properties.maxScale)?W.properties.maxScale:Z.tileInfo.lods[Z.tileInfo.lods.length-1].scale):(W.minScale=I["default"].isDefined(W.minScale)?W.minScale:Z.tileInfo.lods[0].scale,W.maxScale=I["default"].isDefined(W.maxScale)?W.maxScale:Z.tileInfo.lods[Z.tileInfo.lods.length-1].scale),ia&&aa&&(W.minScale=Z.tileInfo.lods[N?W.properties.minLOD:W.minLOD].scale),ia&&aa&&(W.maxScale=Z.tileInfo.lods[N?W.properties.maxLOD:W.maxLOD].scale),
!N&&X&&0===W.minScale&&(W.minScale=Z.tileInfo.lods[0].scale))};ha.prototype._updateUI=function(){var Z=this,W=new A["default"],Q=this.item.type===la.VectorTileService,ia=this._hasSource()?this._getSource():null,R=I["default"].isDefined(ia)&&this._isTilePackage(ia.type)&&!Q,S=I["default"].isDefined(ia)&&this._isServiceDefinition(ia.type),N=I["default"].isDefined(ia)&&this._isFeatureLayer(ia.type),X=v["default"].tilesOnDemandEnabled&&N,aa=R?this.i18n.itemProperties.publishTiles:this.i18n.itemProperties.buildTiles,
ea=X&&this._cacheOnDemand,Y=n["default"].isPortal(),T=f["default"].isAmazonBasedTileService(this.item.url),ca=this.item.created<(new Date("June 27 2017")).getTime();if(Q||Y&&R){this._tileDetailsOpen=!1;S=[this._tilesContainer,this._tilesFromFeaturesContainer,this._showDetailsBtn,this._hideDetailsBtn,this._tileDetailsContainer];if(n["default"].isArcGISEnterpriseOnKubernetes()){var M=!0;S.push(this._offlineTileContainer)}t["default"].hideNodes(S)}else{this._manageTilesBtn.innerHTML=aa;this._offlineTileDesc.innerHTML=
R?this.i18n.itemProperties.offlineModeTileFromPackageDesc:this.i18n.itemProperties.offlineModeTileDesc;t["default"].showNode(this._tilesContainer);aa=this.item.sourceData;if(N||R||S){if(N){var U=D["default"].substitute(this.i18n.itemProperties.sourceFeatureLayerLink,{layerLink:'\x3ca href\x3d"item.html?id\x3d'+aa.id+'" target\x3d"_blank"\x3e'+aa.title+"\x3c/a\x3e"});X&&(this._cacheOnDemand?t["default"].checkNode(this._buildTilesAutomatically,!0):(t["default"].checkNode(this._buildTilesManually,!0),
n["default"].request({url:this.item.sourceData.url+"/layers"}).then(function(da){var ja,na;da=!(null===(na=null===(ja=null===da||void 0===da?void 0:da.layers)||void 0===ja?void 0:ja.some)||void 0===na?0:na.call(ja,function(oa){return!1===r["default"](oa,!1)}));Z._buildTilesAutomaticallyLabel.classList[da?"remove":"add"]("optimizing");t["default"].disableNode(Z._buildTilesAutomatically,!da)})))}else R?U=D["default"].substitute(this.i18n.itemProperties.sourcePackageLink,{layerLink:'\x3ca href\x3d"item.html?id\x3d'+
aa.id+'" target\x3d"_blank"\x3e'+aa.title+"\x3c/a\x3e"}):S&&(U=D["default"].substitute(this.i18n.itemProperties.sourceSDLink,{layerLink:'\x3ca href\x3d"item.html?id\x3d'+aa.id+'" target\x3d"_blank"\x3e'+aa.title+"\x3c/a\x3e"}));this._tileSourceContainer.innerHTML=U;t["default"].showNode(this._tileSourceContainer)}else E["default"].empty(this._tileSourceContainer),t["default"].hideNode(this._tileSourceContainer);t["default"].showHide(this._tilesFromFeaturesContainer,X&&!T&&!ca);t["default"].showHide(this._manualBuildMsgContainer,
X&&!ea&&100>this._pctComplete);t["default"].showHide(this._automaticBuildMsgContainer,X&&ea);this._tileDetailsOpen?(t["default"].hideNode(this._showDetailsBtn),t["default"].showNodes([this._hideDetailsBtn,this._tileDetailsContainer])):(t["default"].hideNodes([this._hideDetailsBtn,this._tileDetailsContainer]),t["default"].showNode(this._showDetailsBtn))}t["default"].checkNode(this._offlineTile,this._exportTilesAllowed);this._hasSource()&&!M?(t["default"].showNode(this._offlineTileContainer),t["default"].showHide(this._offlineTileDesc,
!Q)):t["default"].hideNode(this._offlineTileContainer);this._cacheOnDemandCurrentlyCaching&&(this._displayCacheOnDemandError=!0,this._checkCacheOnDemandStatus(this._cacheOnDemandCurrentlyCaching));Q&&N?this._cachingInProgress?t["default"].showNodes([this.vtlCacheContainer,this.vtlCacheHR,this.vtlAttrContainer]):t["default"].showNodes([this.vtlCacheContainer,this.vtlCacheHR,this.vtlCacheInfo,this.vtlManageInfoContainer,this.vtlAttrContainer,this.vtlAttrInfo,this.vtlSelectAttrContainer]):t["default"].hideNodes([this.vtlCacheContainer,
this.vtlCacheHR,this.vtlAttrContainer]);R?(t["default"].hideNode(this._visibleRange),t["default"].showNodes([this._visibleRangeContainer,this._visibleRangeText])):(t["default"].showNode(this._visibleRangeContainer),this._cachingInProgress||(Q?(t["default"].hideNode(this._visibleRange),t["default"].showNode(this._visibleRangeText)):(t["default"].hideNode(this._visibleRangeText),t["default"].showNode(this._visibleRange))));I["default"].isDefined(ia)&&ia.type===la.FeatureService?(Q=this._getScaleRange(this.item.serviceInfo.layers),
this._constructScaleRanges(Q.minScale,Q.maxScale)):this._constructScaleRanges();W.resolve();this._emitHideLastHR();return W};ha.prototype._checkCacheOnDemandStatus=function(Z){var W=this,Q;Z&&!this._cacheOnDemandInterval?(null===(Q=this.page.tabDijit.typeSection)||void 0===Q?void 0:Q.showLoader(!0),this._cacheOnDemandInterval=window.setInterval(function(){var ia=W.item.adminUrl,R=f["default"].includeTimestampInRequest({token:W.item.adminServerToken||W.portalUser&&W.portalUser.credential.token||null});
n["default"].request({url:ia,content:R},{useProxy:n["default"].shouldUseProxy(ia)}).then(function(S){var N;W._cacheOnDemandCurrentlyCaching=S.cacheOnDemandStatus&&q["default"].includes([V.Pending,V.InProgress],S.cacheOnDemandStatus);W._cacheOnDemandCurrentlyCaching||(clearInterval(W._cacheOnDemandInterval),W._cacheOnDemandInterval=void 0,null===(N=W.page.tabDijit.typeSection)||void 0===N?void 0:N.showLoader(!1),W._displayCacheOnDemandError&&S.cacheOnDemandStatus&&S.cacheOnDemandStatus===V.Failed&&
S.cacheOnDemandStatusMessage&&W.alertError(W.i18n.itemProperties.tilesOnDemandFailed))})},this.cacheOnDemandInterval)):!Z&&this._cacheOnDemandInterval&&(clearInterval(this._cacheOnDemandInterval),this._cacheOnDemandInterval=void 0,this.page.tabDijit.typeSection.showLoader(!1))};ha.prototype._getScaleRange=function(Z){var W={minScale:null,maxScale:null};null===Z||void 0===Z?void 0:Z.forEach(function(Q){if(!I["default"].isDefined(W.minScale))W.minScale=Q.minScale;else if(Q.minScale>W.minScale||0===
Q.minScale)W.minScale=Q.minScale;I["default"].isDefined(W.maxScale)?Q.maxScale<W.maxScale&&(W.maxScale=Q.maxScale):W.maxScale=Q.maxScale});I["default"].isDefined(W.minScale)||(W.minScale=this.SCALE_MIN);I["default"].isDefined(W.maxScale)||(W.maxScale=this.SCALE_MAX);return W};ha.prototype._inspectServiceInfo=function(){var Z,W,Q,ia,R,S=this.item.portal.isPortal,N=this.item.type===la.VectorTileService,X=w.__assign({},this.item.serviceInfo),aa=w.__assign(w.__assign({},this.item.adminServiceInfo),{properties:w.__assign({},
null===(Z=this.item.adminServiceInfo)||void 0===Z?void 0:Z.properties)});this._hydrateTileDimensions(X);this._hydrateMinMaxScale(X,aa);this._currentMinScale=aa.minScale;this._currentMaxScale=aa.maxScale;v["default"].tilesOnDemandEnabled&&!N&&(this._cacheOnDemand=!!aa.cacheOnDemand,this._cacheOnDemandCurrentlyCaching=aa.cacheOnDemandStatus&&q["default"].includes([V.Pending,V.InProgress],aa.cacheOnDemandStatus),this._changeTrackingEnabled=q["default"].includes(aa.capabilities,this.CHANGE_TRACKING_CAPABILITY),
this._scheduleInfo=aa.scheduleInfo?aa.scheduleInfo:null);this._exportTilesAllowed=aa.exportTilesAllowed||S&&"true"===(null===(W=aa.properties)||void 0===W?void 0:W.exportTilesAllowed);N?(this._currentTileScales=this._calculateTileData(X,X),!S&&this._isCacheBuilding(aa)?z["default"].subscribe("job-status/refresh",null===(Q=this.preactTileSetting.current)||void 0===Q?void 0:Q.jobStatusRefreshHandler):S&&(null===(ia=this.item.properties)||void 0===ia?0:ia.cacheJobId)&&(z["default"].subscribe("job-status/refresh",
null===(R=this.preactTileSetting.current)||void 0===R?void 0:R.jobStatusRefreshHandler),this.cacheJobId=this.item.properties.cacheJobId)):S||(this._currentTileStatus=aa,this._cacheBuilt=this._isCacheBuilding(aa),this._calculatePctComplete(X,aa))};ha.prototype._normalizePortalTileStatus=function(Z,W){var Q=this.page.portal.isPortal,ia=I["default"].isDefined(Z.minLOD)&&I["default"].isDefined(Z.maxLOD)||I["default"].isDefined(Z.properties.minLOD)&&I["default"].isDefined(Z.properties.maxLOD),R=W.results[0];
R.serviceName=Z.serviceName;R.type=Z.type;R.lodInfos=R.value.lodInfos;R.cacheExecutionStatus=R.value.cacheExecutionStatus;R.minScale=parseFloat(Z.minScale);R.maxScale=parseFloat(Z.maxScale);ia&&(ia=Q?Z.properties.maxLOD:Z.maxLOD,R.minLOD=parseInt(Q?Z.properties.minLOD:Z.minLOD,10),R.maxLOD=parseInt(ia,10));return R};ha.prototype._monitorCacheStatus=function(Z,W){var Q=this,ia=this.item.portal.isPortal,R=this.item.type===la.VectorTileService,S=this._hasSource()?this._getSource():null,N=this.i18n.itemProperties.buildingTiles;
this._isCacheBuilding(Z)&&(ia||R?N=this.i18n.itemProperties.buildingCache:I["default"].isDefined(S)&&this._isTilePackage(S.type)&&!R&&(N=this.i18n.itemProperties.publishingTiles),this._showCaching(!0,N),this._cacheStatusHandle=window.setInterval(function(){Q._checkCacheStatus(Z,W)},this.TEN_SECONDS))};ha.prototype._checkCacheStatus=function(Z,W){var Q=this,ia=this.item.serviceInfo,R=this.item.adminServiceInfo,S=this.item.type===la.VectorTileService;this.item.portal.isPortal?this._queryReportCacheStatus(R,
W).then(function(N){Q._currentTileStatus=Q._normalizePortalTileStatus(R,N);Q._hydrateMinMaxScale(ia,Q._currentTileStatus);Q._calculatePctComplete(ia,Q._currentTileStatus);Q._isCacheBuilding(N)||Q._cleanupCacheMonitor()},function(N){Q._cleanupCacheMonitor()}):this.page.fetchAdminServiceInfo(this.item).then(function(N){Q._currentTileStatus=N;Q._hydrateMinMaxScale(ia,Q._currentTileStatus);Q._calculatePctComplete(ia,Q._currentTileStatus);Q._isCacheBuilding(N)||(S&&N.jobStatus===ka.Done&&p["default"].showAlert("success",
Q.i18n.itemProperties.rebuildVtlCacheSuccess),Q._cleanupCacheMonitor())},function(N){Q._cleanupCacheMonitor()})};ha.prototype._cleanupCacheMonitor=function(){this._showCaching(!1);this._cacheStatusHandle&&(clearInterval(this._cacheStatusHandle),this._cacheStatusHandle=void 0,this.page._item.set("serviceChanged",!0))};ha.prototype._showCaching=function(Z,W){var Q;this._cachingInProgress=Z;this.item.type===la.VectorTileService?Z?(t["default"].disableNodes([this.rebuildVtlBtn,this._offlineTile],!0),
t["default"].hideNodes([this.vtlCacheInfo,this.vtlManageInfoContainer,this.vtlSelectAttrContainer]),t["default"].activateNode(this.vtlCachingContainer)):(t["default"].deactivateNode(this.vtlCachingContainer),t["default"].showNodes([this.vtlCacheInfo,this.vtlManageInfoContainer,this.vtlSelectAttrContainer]),t["default"].disableNodes([this.rebuildVtlBtn,this._offlineTile],!1)):(null===(Q=this._visibleScaleRangeSlider)||void 0===Q?void 0:Q.set("disabled",Z),Z?(t["default"].hideNode(this._tileInfo),t["default"].activateNode(this._caching),
t["default"].disableNodes([this._offlineTile],!0),this._cachingMsg.innerHTML=W||this.i18n.itemProperties.buildingTiles):(t["default"].deactivateNode(this._caching),t["default"].showNode(this._tileInfo),t["default"].disableNodes([this._offlineTile],!1)))};ha.prototype._showLoadingInfo=function(Z){Z&&(this._cachingMsg.innerHTML=this.i18n.common.loading);t["default"].showHide(this._tileInfo,!Z);t["default"][Z?"activateNode":"deactivateNode"](this._caching)};ha.prototype._isCacheBuilding=function(Z){return"PROCESSING"===
Z.cacheExecutionStatus||"SUBMITTED"===Z.cacheExecutionStatus};ha.prototype._hasSource=function(){return this._hasSourceData()||this._hasSourceService()};ha.prototype._hasSourceData=function(){return I["default"].isDefined(this.item.sourceData)};ha.prototype._hasSourceService=function(){return I["default"].isDefined(this.item.sourceData)};ha.prototype._getSource=function(){return this._getSourceData()||this._getSourceService()};ha.prototype._getSourceData=function(){return this._hasSourceData()?this.item.sourceData:
null};ha.prototype._getSourceService=function(){return this._hasSourceService()?this.item.sourceData:null};ha.prototype._isTilePackage=function(Z){return I["default"].isDefined(Z)&&(Z===la.TilePackage||Z===la.VectorTilePackage)};ha.prototype._isServiceDefinition=function(Z){return I["default"].isDefined(Z)&&Z===la.ServiceDefinition};ha.prototype._isFeatureLayer=function(Z){return I["default"].isDefined(Z)&&Z===la.FeatureService};ha.prototype._getHostedServer=function(){var Z=this,W=new A["default"];
H["default"](this.page._hostedFederatedServer||this.page.portal.getHostedFederatedServers(),function(Q){Z.page._hostedFederatedServer||(Z.page._hostedFederatedServer=Q);W.resolve(Q)});return W};ha.prototype._queryReportCacheStatus=function(Z,W){var Q=this.item.url,ia=Q.indexOf("/services/")+10,R=Q.indexOf("/"+Z.serviceName+"/")+1;Q=Q.substring(ia,R);ia=c["default"].adjustHostedServerForProtocol(W.url);return L["default"]({url:ia+"/rest/services/System/ReportingTools/GPServer/ReportCacheStatus/execute",
content:{service_url:""+Q+Z.serviceName+":"+Z.type,report_mode:"esriCacheStatus",f:"json",token:this.item.serverToken}})};ha.prototype._calculatePctComplete=function(Z,W){var Q=0,ia=0;this._currentTileScales=this._calculateTileData(Z,W);this._currentTileScales.forEach(function(S){Q+=S.created;ia+=S.expected});var R=+(Q/ia*100).toFixed(2)||0;this._pctComplete=100<R?100:R;this._populateTileDetails(this._currentTileScales)};ha.prototype._populateTileDetails=function(Z){E["default"].empty(this._tileDetailsTableContainer);
var W=n["default"].isPortal(),Q=this.item.adminServiceInfo,ia=E["default"].create("table",{"class":"table"},this._tileDetailsTableContainer),R=E["default"].create("tr",null,ia),S=0,N=0,X=0,aa,ea;E["default"].create("th",{role:"columnheader",innerHTML:this.i18n.itemProperties.scaleLevel},R);E["default"].create("th",{role:"columnheader",innerHTML:this.i18n.itemProperties.tilesPublished},R);E["default"].create("th",{role:"columnheader",innerHTML:this.i18n.itemProperties.totalTiles},R);E["default"].create("th",
{role:"columnheader",innerHTML:this.i18n.itemProperties.percentComplete},R);E["default"].create("th",{role:"columnheader",innerHTML:this.i18n.itemProperties.storageSize},R);Z.forEach(function(Y){W?aa=Y.pct:(aa=Math.round(Y.created/Y.expected*100),100<aa&&(aa=100));ea=E["default"].create("tr",null,ia);E["default"].create("td",{role:"gridcell",innerHTML:"1:"+m["default"].format(Math.round(Y.scale))},ea);E["default"].create("td",{role:"gridcell",innerHTML:m["default"].format(Y.created)},ea);E["default"].create("td",
{role:"gridcell",innerHTML:m["default"].format(Y.expected)},ea);E["default"].create("td",{role:"gridcell",innerHTML:m["default"].format(aa)},ea);E["default"].create("td",{role:"gridcell",innerHTML:f["default"].sizeInMB(Y.storageSize)},ea);S+=parseInt(Y.created,10);N+=parseInt(Y.expected,10);X+=parseInt(Y.storageSize,10)});X=Q.size?Q.size:X;Z=E["default"].create("tr",null,ia);E["default"].create("td",{innerHTML:this.i18n.itemProperties.totals},Z);E["default"].create("td",{innerHTML:m["default"].format(S)},
Z);E["default"].create("td",{innerHTML:m["default"].format(N)},Z);E["default"].create("td",{innerHTML:m["default"].format(this._pctComplete)},Z);E["default"].create("td",{innerHTML:f["default"].sizeInMB(X)},Z)};ha.prototype._calculateTileData=function(Z,W){var Q=n["default"].isPortal(),ia=[],R,S;if(Z.tileInfo)for(S=0;S<Z.tileInfo.lods.length;S++){var N=Z.tileInfo.lods[S];N.scale<=W.minScale&&N.scale>=W.maxScale&&((R=f["default"].calculateExpectedTiles(Z.tileInfo,Z.fullExtent,N))||(R=1),ia.push({id:N.level,
created:0,expected:R,scale:N.scale,storageSize:0}))}if(W.lodInfos)for(S=0;S<W.lodInfos.length;S++)for(R=W.lodInfos[S],N=0;N<ia.length;N++)if(ia[N]&&ia[N].id===R.levelID){ia[N].created=R.tileCount;ia[N].expected=R.expectedTileCount;ia[N].storageSize=R.tilesSize?R.tilesSize:0;Q&&(ia[N].pct=R.pct||R.percent);break}return ia};ha.prototype._constructScaleRanges=function(Z,W){var Q=this.page.portal.isPortal,ia=this.item.serviceInfo||{},R=this.item.adminServiceInfo||{},S=this._hasSource()?this._getSource():
null;S=I["default"].isDefined(S)&&this._isTilePackage(S.type);var N=this.item.type===la.VectorTileService,X=I["default"].isDefined(Z)?Z:this.SCALE_MIN,aa=I["default"].isDefined(W)?W:this.SCALE_MAX,ea=Q?I["default"].isDefined(R.properties.minLOD)&&I["default"].isDefined(R.properties.maxLOD):I["default"].isDefined(ia.minLOD)&&I["default"].isDefined(ia.maxLOD),Y={id:"visible-scale-range-slider",constraints:{minScale:X,maxScale:aa},minScale:this._currentMinScale,maxScale:this._currentMaxScale};this._currentMinScaleConstraint=
X;this._currentMaxScaleConstraint=aa;S||N?(N=R.minScale,X=R.maxScale,S&&(Q&&(N=parseFloat(R.properties.minScale),X=parseFloat(R.properties.maxScale)),ea&&(S=Q?parseInt(R.properties.minLOD,10):ia.minLOD,Q=Q?parseInt(R.properties.maxLOD,10):ia.maxLOD,N=ia.tileInfo.lods[S].scale,X=ia.tileInfo.lods[Q].scale)),this._constructScaleRangeText(this._visibleRangeText,N,X)):(this._visibleScaleRangeSlider?(this._visibleScaleRangeSlider.set("minScale",this._currentMinScale),this._visibleScaleRangeSlider.set("maxScale",
this._currentMaxScale)):(this._visibleScaleRangeSlider=new J["default"](Y,E["default"].create("div",null,this._visibleScaleRangeContainer)),this._visibleScaleRangeSlider.startup(),this.own(this._visibleScaleRangeSlider.watch(this._scaleChanged.bind(this))),this._visibleScaleRangeSlider.set("disabled",this._cachingInProgress)),this._cachingInProgress||this._visibleScaleRangeSlider.set("disabled",N))};ha.prototype._constructScaleRangeText=function(Z,W,Q){Z.innerHTML="1:"+m["default"].format(Math.round(W))+
" "+this.i18n.itemProperties.to+" 1:"+m["default"].format(Math.round(Q))};ha.prototype._manageTilesClick=function(){var Z=this;if(this._visibleRangeChanged){var W=f["default"].createSpecifiedDialog(l["default"],{buttonOkLabel:this.i18n.itemProperties.saveChanges,buttonCancelLabel:this.i18n.common.noLabel,"class":"confirmDlg-default"}),Q=B["default"](this.page,"service-info-change",function(){Q&&Q.remove();W.hide();Z._openManageTiles()});W.show({title:this.i18n.itemProperties.unsavedChanges,message:"\n            \x3cp\x3e"+
this.i18n.itemProperties.visibleRangeUnsaved+"\x3c/p\x3e\n            \x3cp\x3e"+this.i18n.itemProperties.applyUnsavedChanges+"\x3c/p\x3e\n          "}).then(function(ia){"onOk"===ia?(W.okButton.set("disabled",!0),Z.page.tabDijit.typeSection.saveClick()):(Q&&Q.remove(),W.hide(),Z._openManageTiles())})}else this._openManageTiles()};ha.prototype._openManageTiles=function(){var Z=this,W=this._createManageTilesDlg(),Q=this.item.portal.isPortal,ia=this._hasSource(),R=!(!ia||!this._isTilePackage(this._getSource().type)),
S=!(!ia||!this._isServiceDefinition(this._getSource().type)),N=!(!ia||!this._isFeatureLayer(this._getSource().type)),X={tilePackage:R,serviceDefinition:S};Q?W.setServerTokens(this.page._hostedFederatedServer,this.item.serverToken,this.item.adminServerToken):W.displayTabs(N);var aa=window.setInterval(function(){Z._currentTileStatus?(clearInterval(aa),Z._manageTilesDlgOpen||(Z._manageTilesDlgOpen=!0,ia?W.show(Z.item,fa["default"](Z._currentTileStatus),X):W.showNoSource(Z.item,fa["default"](Z._currentTileStatus)))):
Z._manageTilesDlgOpen=!1},100)};ha.prototype._createManageTilesDlg=function(){var Z=this,W=new k["default"];B["default"].once(W.dialog,"hide",function(){W.dialog.destroyRecursive();W.destroyRecursive();Z._manageTilesDlgOpen&&(Z._manageTilesDlgOpen=!1)});return W};ha.prototype._updateTileInfo=function(Z){var W;!0===(null===Z||void 0===Z?void 0:Z.tileInfoChanged)&&Z.cacheJobId&&(null===(W=this.preactTileSetting.current)||void 0===W?void 0:W.monitorCacheStatus(Z.cacheJobId))};ha.prototype._checkCredits=
function(Z){var W=new A["default"];n["default"].request({url:v["default"].restBaseUrl+"portals/self/cost",content:{generatedTileCount:Z}}).then(function(Q){W.resolve(Q)},function(){W.resolve()});return W};ha.prototype._getAvgTileSize=function(Z){return 1E3*(Z.rows?Z.rows/10:25.6)};ha.prototype._buildTilesAutomaticallyClick=function(){var Z=this,W=t["default"].isChecked(this._buildTilesAutomatically),Q={title:this.i18n.common.notice,message:"\n          \x3cp\x3e\n            "+this.i18n.itemProperties.buildTilesOnDemand.switchToAutomatic+
"\n            \x3cul\x3e\n              \x3cli\x3e"+this.i18n.itemProperties.buildTilesOnDemand.deleteTilesOption+"\x3c/li\x3e\n              \x3cli\x3e"+this.i18n.itemProperties.buildTilesOnDemand.keepTilesOption+"\x3c/li\x3e\n            \x3c/ul\x3e\n          \x3c/p\x3e\n          \x3cp\x3e"+this.i18n.itemProperties.buildTilesOnDemand.whichTilesOption+"\x3c/p\x3e\n        "},ia=function(N){Z._deleteTilesOnSave="onOk"===N;R.hide()};if(v["default"].tilesOnDemandEnabled&&!this._cacheOnDemand&&W){var R=
new l["default"]({buttonOkLabel:this.i18n.itemProperties.buildTilesOnDemand.deleteTilesLabel,buttonCancelLabel:this.i18n.itemProperties.buildTilesOnDemand.keepTilesLabel,"class":"confirmDlg-wide"});R.okButton.domNode.classList.add("trailer-quarter");R.cancelButton.domNode.classList.add("trailer-quarter");this._showLoadingInfo(!0);var S=this._getSource();n["default"].request({url:S.url+"/layers"}).then(function(N){F["default"](N.layers.map(function(X){return c["default"].getSuggestedScaleRange(S.url+
"/"+X.id)})).then(function(X){var aa;X.forEach(function(ea){ea&&(aa=I["default"].isDefined(aa)?ea&&ea.minScale&&ea.minScale<aa?ea.minScale:aa:ea.minScale||Z.SCALE_MIN)});Z._cacheOnDemandMinScale=aa;R.show(Q).then(ia);Z._showLoadingInfo(!1)},function(){Z._cacheOnDemandMinScale=void 0;R.show(Q).then(ia);Z._showLoadingInfo(!1)})})}this._cacheOnDemand&&this._deleteTilesOnSave&&(this._deleteTilesOnSave=!1);this._handlePropertyChange()};ha.prototype._buildTilesManuallyClick=function(){var Z=t["default"].isChecked(this._buildTilesManually),
W=100>this._pctComplete;this._cacheOnDemandMinScale&&(this._cacheOnDemandMinScale=void 0);v["default"].tilesOnDemandEnabled&&this._cacheOnDemand&&Z&&W&&this._generateGeneralDlg().show({title:this.i18n.common.notice,message:"\n          \x3cp\x3e"+this.i18n.itemProperties.buildTilesOnDemand.switchToManual+"\x3c/p\x3e\n          \x3cp\x3e"+this.i18n.itemProperties.buildTilesOnDemand.clickCreate+"\x3c/p\x3e\n        "});this._handlePropertyChange()};ha.prototype._showTileDetailsClick=function(){this._tileDetailsOpen=
!0;t["default"].showNodes([this._hideDetailsBtn,this._tileDetailsContainer]);t["default"].hideNode(this._showDetailsBtn)};ha.prototype._hideTileDetailsClick=function(){this._tileDetailsOpen=!1;t["default"].hideNodes([this._hideDetailsBtn,this._tileDetailsContainer]);t["default"].showNode(this._showDetailsBtn)};ha.prototype.getHostedServer=function(){var Z=this,W=new A["default"];H["default"](this.page._hostedFederatedServer||this.page.portal.getHostedFederatedServers(),function(Q){Z.page._hostedFederatedServer||
(Z.page._hostedFederatedServer=Q);W.resolve(Q)});return W};ha.prototype.checkJobStatus=function(Z,W){var Q=c["default"].adjustHostedServerForProtocol(Z.url);return L["default"]({url:Q+"/rest/services/System/CachingControllers/GPServer/Manage%20Vector%20Tile%20Cache/jobs/"+W,content:{f:"json",token:this.item.serverToken}})};ha.prototype.vtlCacheRebuild=function(Z,W){var Q=this,ia=this.item.portal.isPortal;Z&&!Z.code&&this.page._item.set({status:"processing"});if(ia)var R=setInterval(function(){Q.checkJobStatus(W,
Q.cacheJobId).then(function(S){var N,X;if(q["default"].includes([ka.Succeeded,ka.Failed],S.jobStatus)){if(S.jobStatus===ka.Failed){var aa=null!==(X=null===(N=S.messages)||void 0===N?void 0:N.map(function(ea){return ea.description}))&&void 0!==X?X:[];N=""+Q.i18n.itemProperties.rebuildVtlCacheError+(aa.length?"\x3cbr\x3e\x3cbr\x3e"+Q.i18n.itemProperties.rebuildVtlStatus+" "+S.jobStatus+"\x3cbr\x3e"+Q.i18n.itemProperties.rebuildVtlMsgs+"\x3cbr\x3e"+aa.join("\x3cbr\x3e"):"");p["default"].showAlert("error",
N)}S.jobStatus===ka.Succeeded&&p["default"].showAlert("success",Q.i18n.itemProperties.rebuildVtlCacheSuccess);clearInterval(R);Q.page.dropCacheJobInfo();Q._showCaching(!1);Q.cacheJobId=null;Q._cacheBuilt=!0;Q.page._item.set("serviceChanged",!0)}})},this.cacheRebuildInterval);else this.page._item.set("serviceChanged",!0)};ha.prototype.rebuildVtlCache=function(){var Z=this,W=new A["default"],Q=this.item.portal.isPortal;t["default"].disableNode(this.rebuildVtlBtn,!0);if(Q)this.getHostedServer().then(function(R){var S=
Z.item.adminServiceInfo.serviceName,N=c["default"].adjustHostedServerForProtocol(R.url)+"/rest/services/System/CachingControllers/GPServer/Manage%20Vector%20Tile%20Cache/submitJob";S={serviceName:S,serviceFolder:"Hosted",tilingFormat:"INDEXED",minScale:null,maxScale:null,f:"json",token:Z.item.serverToken};Z._showCaching(!0,Z.i18n.itemProperties.buildingCache);L["default"]({url:N,content:S}).then(function(X){X&&!X.code?(Z.cacheJobId=X.jobId,Z.page.storeCacheJobInfo(X),Z.vtlCacheRebuild(X,R),t["default"].disableNode(Z.rebuildVtlBtn,
!1)):(p["default"].showAlert("error",Z.i18n.itemProperties.rebuildVtlCacheError),t["default"].disableNode(Z.rebuildVtlBtn,!1),Z._showCaching(!1));W.resolve()},function(X){p["default"].showAlert("error",Z.i18n.itemProperties.rebuildVtlCacheError);t["default"].disableNode(Z.rebuildVtlBtn,!1);Z._showCaching(!1);W.resolve()})});else{var ia=this.item.adminServiceInfo.layers.map(function(R){return R.layerId});Q=this.item.adminUrl+"/rebuildCache";ia={layers:ia.join(",")};n["default"].request({url:Q,content:ia},
{usePost:!0}).then(function(R){Z.vtlCacheRebuild(R);t["default"].disableNode(Z.rebuildVtlBtn,!1);W.resolve()},function(R){p["default"].showAlert("error",Z.i18n.itemProperties.rebuildVtlCacheError);t["default"].disableNode(Z.rebuildVtlBtn,!1);W.resolve()})}return W};ha.prototype.configureAttributes=function(Z){var W=this,Q=this.item.adminUrl;Z={serviceDefinition:JSON.stringify({layerProperties:Z})};this.selectAttsBtn.disabled=!0;n["default"].request({url:Q+"/edit",content:Z},{usePost:!0}).then(function(){p["default"].showAlert("success",
W.i18n.itemProperties.configureAttributes.success);W.rebuildVtlCache().then(function(){W.selectAttsBtn.disabled=!1})},function(ia){p["default"].showAlert("error",W.i18n.itemProperties.configureAttributes.error);W.selectAttsBtn.disabled=!1})};ha.prototype.selectAttributes=function(){var Z=this,W=this._getSource(),Q=this.item.adminServiceInfo.layerProperties||[];P["default"].request({url:W.url}).then(function(ia){var R=new a["default"](w.__assign(w.__assign({},W),{portal:Z.item.portal,serviceInfo:ia}));
R.serviceInfo=ia;Z.page.fetchServiceLayers(R).then(function(S){var N=E["default"].create("div",null,document.body,"last");g.render(g.h(u["default"],{layers:S,layerProperties:Q,rebuildMode:!0,onCancel:function(){return g.render(null,N)},onSubmit:function(X){Z.configureAttributes(X);g.render(null,N)}}),N)})})};return ha=w.__decorate([d["default"](b["default"],y["default"])],ha)}()})},"arcgisonline/sharing/dijit/dialog/ManageTilesDlg":function(){define("require esri/declare esri/Evented esri/config esri/lang esri/request dojo/_base/lang dojo/on dojo/query dojo/sniff dojo/topic dojo/json dijit/a11yclick dojo/string dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Dialog dojo/store/Memory dojo/store/Observable dgrid/OnDemandGrid dgrid/selector dgrid/Selection dgrid/extensions/DijitRegistry esri/geometry/Extent esri/geometry/webMercatorUtils ../../../map/core/projectExtent ../../../map/utils/clipOnHorizon ../DefineExtent ./GeneralDlg ./ChoiceDlg ../../../pages/pageUtil ../../../pages/utils/arrays ../../../pages/utils/dom ../../../pages/utils/number ../../../pages/serviceUtil ../../util calcite-web/js/calcite-web dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ManageTilesDlg.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W){var Q=G(null,{showFooter:!0,buildRendering:function(){this.inherited(arguments);var R=this.summaryAreaNode=e.create("div",{className:"summary-row",role:"row",style:{overflow:"hidden"}},this.footerNode);this.on("scroll",function(){R.scrollLeft=this.getScrollPosition().x}.bind(this));this.summary&&this._setSummary(this.summary)},_updateColumns:function(){this.inherited(arguments);this.summary&&
this._setSummary(this.summary)},_renderSummaryCell:function(R,S,N){S.appendChild(document.createTextNode(R[N.field]||""))},_setSummary:function(R){var S=this.summaryTableNode;this.summary=R;S&&e.destroy(S);S=this.summaryTableNode=this.createRowCells("td",this._renderSummaryCell.bind(this,R));this.summaryAreaNode.appendChild(S);this._started&&this.resize()}}),ia=G("arcgisonline.sharing.dijit.dialog.ManageTilesDlg",[g,u,x],{declaredClass:"arcgisonline.sharing.dijit.dialog.ManageTilesDlg",templateString:W,
widgetsInTemplate:!0,basePath:K.toUrl("arcgisonline/sharing/dijit/dialog"),baseClass:"esriManageTiles",PROCESSING:"PROCESSING",SUBMITTED:"SUBMITTED",DEFAULT_TILE_WIDTH:256,DEFAULT_TILE_HEIGHT:256,TIME_TO_NEXT_UPDATE:1E4,TABS:{LEVELS:"levels",EXTENT:"extent"},_noSourceData:!1,_isSourceTilePackage:!1,_isVisible:!1,_isProcessing:!1,_wasProcessing:!1,_allTilesComplete:!1,_createClicked:!1,_tab:"levels",postMixInProperties:function(){this.inherited(arguments);this.i18n=c.mixin({},Z.common);this.i18n=c.mixin(this.i18n,
Z.manageTilesDlg)},postCreate:function(){this.inherited(arguments);v.defaults.io.proxyUrl=esriGeowConfig.proxyServer;esriGeowConfig.proxyUrl&&(v.defaults.io.proxyUrl=esriGeowConfig.proxyUrl);var R=this.hide.bind(this);this.own(m(this._buildButton,this._createClick.bind(this)),m(this._cancelButton,this._cancelClick.bind(this)),m(this._closeButton,R),m(this.dialog.closeButtonNode,R),m(this._levelsTab,this._levelsTabClick.bind(this)),m(this._extentTab,this._extentTabClick.bind(this)))},destroy:function(){this.inherited(arguments);
this._defineExtent&&this._defineExtent.destroy()},setServerTokens:function(R,S,N){this._hostedServer=R;this._serverToken=S;this._adminServerToken=N},displayTabs:function(R){this._mustDisplayTabs=R},show:function(R,S,N,X){S=this._handleServiceInfo.bind(this,S);ha.tabs();this._setFlags();this.item=R;this._isSourceTilePackage=!(!N||!N.tilePackage);this._isSourceServiceDefinition=!(!N||!N.serviceDefinition);this._isSourceTilePackage?(l.set(this._buildButton,"innerHTML",this.i18n.publishButton),l.set(this.dialog,
"title",this.i18n.publishButton),this._canShowTabs=!1):this._isPortal?this._canShowTabs=!1:(l.set(this.dialog,"title",this.i18n.buildTitle),this._canShowTabs=!(!esriGeowConfig.tilesOnDemandEnabled||!this._mustDisplayTabs));this._showTabs(this._canShowTabs);X?S(X):(R=this._isPortal?f({url:this.item.url,content:{f:"json",token:this._serverToken}}):ma.request({url:this.item.url}),R.then(S,S))},showNoSource:function(R,S){this._noSourceData=!0;this.show(R,S,!1)},hide:function(R){this._noSourceData=!1;
this.dialog.hide();(this._createClicked||this._wasProcessing)&&q.publish("manage-tiles/update",{tileInfoChanged:!0,cacheJobId:R});this._isVisible=this._wasProcessing=this._createClicked=!1},_showTabs:function(R){ba.showHide(this._tabNav,R);b(".tab-contents").forEach(function(S){h[R?"remove":"add"](S,"no-border")})},_setFlags:function(){this._isPortal=ma.isPortal();this._roleCanPublishTiles=(this._roleCanCreateItem=esriGeowConfig.userRole.canCreateItem())&&esriGeowConfig.userRole.canPublishTiles();
this._createClicked=this._allTilesComplete=this._wasProcessing=this._isProcessing=this._isVisible=this._isSourceTilePackage=this._noSourceData=!1;this._refreshTilesEnabled=!this._isPortal&&esriGeowConfig.tilesOnDemandEnabled},_handleServiceInfo:function(R,S){!S||S.code||S.message||(this._serviceFullExtent=S.fullExtent,this._serviceTileInfo=S.tileInfo,this._serviceTileInfo.width=this._serviceTileInfo.width||this.DEFAULT_TILE_WIDTH,this._serviceTileInfo.height=this._serviceTileInfo.height||this.DEFAULT_TILE_HEIGHT,
this.serviceMinScale=S.minScale?S.minScale:this._serviceTileInfo.lods[0].scale,this.serviceMaxScale=S.maxScale?S.maxScale:this._serviceTileInfo.lods[this._serviceTileInfo.lods.length-1].scale,this.serviceMinLOD=r.isDefined(S.minLOD)?S.minLOD:void 0,this.serviceMaxLOD=r.isDefined(S.maxLOD)?S.maxLOD:void 0,this.dialog.show(),this._isVisible=!0,this._updateStatus(R))},_handleReportCacheStatus:function(R){R&&R.results&&!R.message?(R=R.results[0],R.serviceName=this._lastTileStatus.serviceName,R.type=this._lastTileStatus.type,
R.lodInfos=R.value.lodInfos,R.cacheExecutionStatus=R.value.cacheExecutionStatus,R.minScale=this._lastTileStatus.minScale,R.maxScale=this._lastTileStatus.maxScale,this._updateStatus(R)):this._updateStatus(R)},_getStatus:function(){var R=this;if(this._isVisible)if(R._isPortal){var S=R._handleReportCacheStatus.bind(R),N=R.item.url.indexOf("/services/")+10,X=R.item.url.indexOf("/"+R._lastTileStatus.serviceName+"/")+1;N=R.item.url.substring(N,X)+R._lastTileStatus.serviceName+":"+R._lastTileStatus.type;
var aa=la.adjustHostedServerForProtocol(R._hostedServer.url)+"/rest/services/System/ReportingTools/GPServer/ReportCacheStatus/execute",ea={service_url:N,report_mode:"esriCacheStatus",f:"json",token:R._serverToken,job_id:R._jobId,ts:(new Date).getTime()};R._jobId?f({url:aa,content:ea}).then(S,S):(N={service_url:N,report_mode:"esriJobSummary",f:"json",token:R._serverToken,ts:(new Date).getTime()},f({url:aa,content:N}).then(function(Y){Y&&Y.results&&Y.results[0]&&Y.results[0].value.esriJobStatus&&Y.results[0].value.esriJobStatus[0]&&
(R._jobId=Y.results[0].value.esriJobStatus[0].cancelJobID,ea.job_id=R._jobId);f({url:aa,content:ea}).then(S,S)}))}else N=R.item.url.replace("/rest/","/rest/admin/"),X=R._updateStatus.bind(R),ma.request({url:N,content:{ts:(new Date).getTime()}}).then(X,X)},_updateStatus:function(R){if(this._isVisible&&(!R||"Error"!==R.name||"Unknown runtime error"!==R.message)){this._lastTileStatus=R;this._lastTileStatus.minScale=this._lastTileStatus.minScale||this.serviceMinScale;this._lastTileStatus.maxScale=this._lastTileStatus.maxScale||
this.serviceMaxScale;this._lastTileStatus.minLOD=this._lastTileStatus.minLOD||this.serviceMinLOD||void 0;this._lastTileStatus.maxLOD=this._lastTileStatus.maxLOD||this.serviceMaxLOD||void 0;if(this._isProcessing=R.cacheExecutionStatus===this.PROCESSING||R.cacheExecutionStatus===this.SUBMITTED)this._wasProcessing=!0,setTimeout(this._getStatus.bind(this),this.TIME_TO_NEXT_UPDATE);this._refreshUI()}},_refreshUI:function(){this._updateData();this._grid?this._updateGrid():this._createGrid();this._updateTotals();
this._updateExtent();this._updateDescription();this._updateButtons();this._updateMessage();this._updateTabs()},_updateExtent:function(){if(this._defineExtent&&this._defineExtent._started&&!this._updatedExtent){var R=[[],[]],S;4326!==this._serviceFullExtent.spatialReference.wkid&&(S=H.webMercatorToGeographic(new F(this._serviceFullExtent)));R[1][1]=parseFloat(S.ymax);R[0][0]=parseFloat(S.xmin);R[1][0]=parseFloat(S.xmax);R[0][1]=parseFloat(S.ymin);this._defineExtent.set("extent",R)}},_updateTabs:function(){this._isProcessing?
(this._canShowTabs&&(h.remove(this._extentTab,"is-active"),h.remove(this._extentSection,"is-active"),h.add(this._levelsTab,"is-active"),h.add(this._levelsSection,"is-active")),this._showTabs(!1)):this._showTabs(this._canShowTabs)},_updateButtons:function(){this._roleCanPublishTiles?this._isProcessing||this._allTilesComplete&&!this._refreshTilesEnabled?(this._hideButtons(),this._isProcessing&&this._isPortal&&this._jobId?this._showCancel():this._hideCancel()):(this._showButtons(),this._hideCancel()):
this._hideButtons()},_updateMessage:function(){this._isProcessing||this._allTilesComplete&&!this._refreshTilesEnabled||(this._noSourceData?l.set(this._messageDiv,"innerHTML",this.i18n._noSourceData):l.set(this._messageDiv,"innerHTML",this._isSourceTilePackage?this.i18n.selectTilesPublish:this.i18n.selectTiles+"\x3cbr\x3e"+this.i18n.adjustVisibleRange))},_updateData:function(){var R=this.i18n.totals,S=this._lastTileStatus;this._gridStore=new C(new B({data:this._getTileStatusData(),identifier:"id"}));
this._gridStore.getTotals||(this._gridStore.getTotals=function(){var X={},aa=0,ea=0,Y=0;this.data.forEach(function(ca){aa+=parseInt(ca.created,10);ea+=parseInt(ca.expected,10);Y+=ca.storageSize?parseInt(ca.storageSize,10):0});var T=(aa/ea*100).toFixed(2)||0;T=100<T?100:T;X.selected="";X.scaleLevel=R;X.created=ka.format(aa);X.expected=ka.format(ea);X.pctComplete=String(T);X.storageSize=fa.sizeInMB(S&&S.size||Y);return X});if(this._noSourceData)ba.hideNode(this._scalesSelectedSpan);else{var N=n.substitute(this.i18n.scalesSelected,
{scales:0});l.set(this._scalesSelectedSpan,"innerHTML",N)}},_getTileStatusData:function(){var R=this,S=[],N=0,X=0,aa,ea,Y,T;R._serviceTileInfo.lods.forEach(function(ca){Math.floor(ca.scale)<=R._lastTileStatus.minScale&&Math.ceil(ca.scale)>=R._lastTileStatus.maxScale&&(aa=fa.calculateExpectedTiles(R._serviceTileInfo,R._serviceFullExtent,ca),S.push({id:ca.level,selected:!1,scaleLevel:"1:"+ka.format(Math.round(ca.scale)),scale:ca.scale,created:0,expected:aa,pctComplete:0,storageSize:0}))});R._lastTileStatus&&
R._lastTileStatus.lodInfos&&0<R._lastTileStatus.lodInfos.length&&R._lastTileStatus.lodInfos.forEach(function(ca){for(T=0;T<S.length;T++)if(S[T]&&S[T].id===ca.levelID){ea=Math.round(ca.tileCount/ca.expectedTileCount*100);100<ea&&(ea=100);R._isPortal&&ca.pct&&(ea=ca.pct);Y=S[T];Y.created=ca.tileCount;Y.expected=ca.expectedTileCount;Y.pctComplete=ea;Y.storageSize=ca.tilesSize?ca.tilesSize:0;break}});S.forEach(function(ca){N+=ca.created;X+=ca.expected});R._allTilesComplete=N===X;R._disableButtons();return S},
_updateTotals:function(){var R=this,S=R._grid.on("dgrid-refresh-complete",function(){R._scrollNode&&R._currentScrollPos&&(R._scrollNode.scrollTop=R._currentScrollPos);S.remove()});R._scrollPos&&(R._currentScrollPos=R._scrollPos);R._grid.set("summary",R._gridStore.getTotals());R._grid.resize();R._grid.refresh()},_updateDescription:function(){l.set(this._dialogDescription,"innerHTML","\x3cstrong\x3e"+(this._isProcessing?this._isSourceTilePackage?this.i18n.jobStatusPublishing:this.i18n.jobStatus:this.i18n.noJobStatus)+
"\x3c/strong\x3e\x3cbr/\x3e")},_hideButtons:function(){ba.hideNodes(b("div.messageContainer"));ba.hideNodes(b("div.selected-scales-container"));ba.hideNode(this._buildButton)},_showButtons:function(){ba.showNode(this._buildButton);ba.showNodes(b("div.selected-scales-container"));ba.showNodes(b("div.messageContainer"))},_hideCancel:function(){ba.hideNode(this._cancelButton)},_showCancel:function(){ba.showNode(this._cancelButton)},_updateGrid:function(){this._grid.set("columns",this._getGridLayout());
this._grid.set("store",this._gridStore)},_createGrid:function(){this._grid=new (G([z,A,E,Q]))({id:"scaleGrid",columns:this._getGridLayout(),showLoadingMessage:!1,showFooter:!0,noDataMessage:"",selectionMode:"none",gridScope:this,allowSelectAll:!0,store:this._gridStore,sort:[{attribute:"id",descending:!1}]},this._gridContainer);this._grid.startup();this.own(this._grid.on(".dgrid-header-row .field-selected:click",function(R){this._toggleAll("INPUT"===R.target.tagName?R.target:R.target.childNodes[0])}.bind(this)));
this.own(this._grid.on(".dgrid-row .field-selected:click",function(R){R="INPUT"===R.target.tagName?R.target:R.target.childNodes[0];var S=R.parentNode.parentNode.parentNode.parentNode.id;S=S.substring(S.indexOf("scaleGrid-row-")+14);this._toggleScale(R,S)}.bind(this)));this.own(this._grid.on("scroll",function(R){this._scrollPos=(this._scrollNode=R&&R.scrollTarget||null)&&this._scrollNode.scrollTop||0}.bind(this)))},_getGridLayout:function(){var R=[];this._isProcessing||this._allTilesComplete&&!this._refreshTilesEnabled||
this._noSourceData||!this._roleCanPublishTiles||R.push(D({field:"selected",sortable:!1,selectorType:"checkbox"}));R.push({field:"scaleLevel",label:this.i18n.grid.scaleLevel,sortable:!1,formatter:this._contentFormatter});R.push({field:"created",label:this._isSourceTilePackage?this.i18n.grid.tilesPublished:this.i18n.grid.tilesCreated,sortable:!1,formatter:this._tilesFormatter});R.push({field:"expected",label:this.i18n.grid.totalTiles,sortable:!1,formatter:this._tilesFormatter});R.push({field:"pctComplete",
label:this.i18n.grid.percentComplete,sortable:!1,formatter:this._contentFormatter});R.push({field:"storageSize",label:this.i18n.grid.storageSize,sortable:!1,formatter:this._sizeFormatter});return R},_levelsTabClick:function(){this._tab=this.TABS.LEVELS;this._updateMessage();this._checkToggled()},_extentTabClick:function(){var R=[[],[]],S;this._tab=this.TABS.EXTENT;this._defineExtent||(this._defineExtent=new J({id:"defineExtent"},this._extentContainer),this._defineExtent.startup(),4326!==this._serviceFullExtent.spatialReference.wkid&&
(S=H.webMercatorToGeographic(new F(this._serviceFullExtent))),R[1][1]=parseFloat(S.ymax),R[0][0]=parseFloat(S.xmin),R[1][0]=parseFloat(S.xmax),R[0][1]=parseFloat(S.ymin),this._defineExtent.set("extent",R),this.own(q.subscribe("define-extent/change",this._onExtentChange.bind(this))));l.set(this._messageDiv,"innerHTML",this.i18n.defineExtent);this._checkToggled()},_onExtentChange:function(R){this._serviceFullExtent.spatialReference.wkid===R.spatialReference.wkid?this._updatedExtent=R:I(R,this._serviceFullExtent.spatialReference,
function(S){S&&S.length&&(S=S.shift());this._updatedExtent=L(S)}.bind(this),null,this._defineExtent.map);this._checkToggled()},_calculateIntersection:function(R,S){var N=new F(R),X=new F(S);return(N=N.intersects(X))?N.toJson():null},_cancelClick:function(){var R=this;ba.disableNode(R._cancelButton,!0);var S=function(N){r.isDefined(N.error)&&(fa.createSpecifiedDialog(O).show({title:R.i18n.errorTitle,message:R.i18n.cantCancelJob}),R._cancelButton.set("disabled",!1))};f({url:R._hostedServer.adminUrl+
"/rest/services/System/CachingControllers/GPServer/Manage%20Map%20Cache%20Tiles/jobs/"+R._jobId+"/cancel",content:{f:"json",token:R._adminServerToken}},{usePost:!0}).then(S,S)},_checkCredits:function(R){var S=new d,N=esriGeowConfig.restBaseUrl+"portals/self/cost";R={generatedTileCount:R};this._isPortal||this._isSourceTilePackage?S.resolve():ma.request({url:N,content:R}).then(function(X){S.resolve(X)},function(){S.resolve()});return S},_createClick:function(){var R=this._getAvgTileSize(this._serviceTileInfo),
S=0,N=0,X=0,aa=[],ea=[],Y,T,ca,M,U=0,da=0,ja;this._grid.store.query().forEach(function(ua){T=parseInt(ua.created,10);ca=parseInt(ua.expected,10);M=parseInt(ua.storageSize,10);!0===ua.selected&&(Y=parseInt(ua.expected,10)-parseInt(ua.created,10),0<Y&&(this._isPortal?aa.push(""+ua.scale):aa.push(ua.id)),esriGeowConfig.tilesOnDemandEnabled&&!this._isPortal&&this._updatedExtent?U=(ja=this._calculateIntersection(this._updatedExtent,this._serviceFullExtent))?U+fa.calculateExpectedTiles(this._serviceTileInfo,
ja,this._serviceTileInfo.lods[ua.id]):U+0:U+=T<=ca?T:ca,da+=ca);N+=T;X+=M}.bind(this));ea=this._grid.store.query().filter(function(ua){return!0===ua.selected}.bind(this));var na=esriGeowConfig.tilesOnDemandEnabled&&!this._isPortal&&this._updatedExtent?t.stringify(this._updatedExtent):this._serviceFullExtent.xmin+","+this._serviceFullExtent.ymin+","+this._serviceFullExtent.xmax+","+this._serviceFullExtent.ymax;if(0<aa.length){S=esriGeowConfig.tilesOnDemandEnabled&&!this._isPortal&&this._updatedExtent?
U:da-U;var oa=this._formatSizeWithUnits((0<X&&0<N?X/N:R)*S),ra=this._isPortal?aa.join(";"):aa.join(",");this._checkCredits(S).then(function(ua){var wa="\x3cp\x3e"+n.substitute(this._isSourceTilePackage?this.i18n.aboutToPublish:this.i18n.aboutToCreate,{tiles:S,storage:oa})+"\x3c/p\x3e",Ba=!1;!this._isPortal&&!this._isSourceTilePackage&&r.isDefined(ua.transactionCreditCost)&&r.isDefined(ua.availableCredits)&&(ua.transactionCreditCost>ua.availableCredits?Ba=!0:wa+="\x3cp\x3e"+n.substitute(this.i18n.aboutToCreateCost,
{credits:ka.format(ua.transactionCreditCost),creditsLeft:ka.format(ua.availableCredits)})+"\x3c/p\x3e");wa+="\x3cp\x3e"+(this._isSourceTilePackage?this.i18n.reallyPublishTiles:this.i18n.reallyCreateTiles)+"\x3c/p\x3e";!this._isPortal&&Ba?fa.createSpecifiedDialog(O).show({title:this.i18n.notice,message:this.i18n.notEnoughCredits}):(ua={title:this._isSourceTilePackage?this.i18n.publishTiles:this.i18n.createTiles,message:wa,choiceOneTitle:this._isSourceTilePackage?this.i18n.yesPublishTiles:this.i18n.yesCreateTiles,
choiceTwoTitle:this._isSourceTilePackage?this.i18n.noPublishTiles:this.i18n.noCreateTiles},ua.choiceOneHandler=function(){this._createClicked=!0;var Da=ea.length&&ea[0]||V.find(this._serviceTileInfo.lods,function(Ea){return this.serviceMinScale===Ea.scale}),La=ea.length&&ea[ea.length-1]||V.find(this._serviceTileInfo.lods,function(Ea){return this.serviceMaxScale===Ea.scale}),Ga=r.isDefined(this.serviceMinLOD)||r.isDefined(this.serviceMaxLOD),xa=Ga&&Da&&Da.id<this.serviceMinLOD;Ga=Ga&&La&&La.id>this.serviceMaxLOD;
var Ca=this._isSourceServiceDefinition&&(xa||Ga);if(this._isPortal){ba.disableNode(this._cancelButton,!1);var ta=this.item.url.indexOf("/services/")+10,qa=this.item.url.indexOf(this._lastTileStatus.serviceName);ta=this.item.url.substring(ta,qa);var za=this._hostedServer.adminUrl+"/rest/services/System/CachingControllers/GPServer/Manage%20Map%20Cache%20Tiles/submitJob",va={f:"json",token:this._adminServerToken,service_url:ta+this._lastTileStatus.serviceName+":"+this._lastTileStatus.type,constraining_extent:na,
levels:ra,update_mode:"RECREATE_ALL_TILES",thread_count:-1},pa=function(Ea){Ea.code&&Ea.message?fa.createSpecifiedDialog(O).show({title:this.i18n.errorTitle,message:Ea.message}):(this._jobId=Ea.jobId,this._isProcessing=!0,this._isVisible&&(this._updatedExtent=void 0,this._refreshUI(Ea.jobId),this.hide(this._jobId)))}.bind(this);Ca?(Ca={},xa&&(Ca.minLOD=Da.id),Ga&&(Ca.maxLOD=La.id),ma.request({url:this.item.url+"/edit",content:{serviceDefinition:JSON.stringify(Ca)}},{usePost:!0}).then(function(Ea){f({url:za,
content:va},{usePost:!0}).then(pa,pa)},function(Ea){})):f({url:za,content:va},{usePost:!0}).then(pa,pa)}else{var sa=this.item.url.replace("/rest/","/rest/admin/")+"/updateTiles";9>=p("ie")&&(ta=sa.indexOf("admin/services/"),qa=sa.indexOf("/MapServer"),sa=sa.substring(0,ta+15)+encodeURIComponent(sa.substring(ta+15,qa))+sa.substring(qa));var ya={levels:ra,extent:na},Ha=function(Ea){if(Ea.code&&Ea.message){var Aa=Ea.message;Ea.message&&-1<Ea.message.toLowerCase().indexOf("credit")?Aa=this.i18n.notEnoughCredits:
Ea.message&&-1<Ea.message.toLowerCase().indexOf("invalid extent")&&(Aa=this.i18n.invalidExtent);fa.createSpecifiedDialog(O).show({title:this.i18n.errorTitle,message:Aa})}else this._isProcessing=!0,this._isVisible&&(this._updatedExtent=void 0,this._refreshUI(),this.hide(Ea.jobId))}.bind(this);Ca?(Ca={},xa&&(Ca.minLOD=Da.id),Ga&&(Ca.maxLOD=La.id),ma.request({url:sa.replace("/updateTiles","/edit"),content:{serviceDefinition:JSON.stringify(Ca)}},{usePost:!0}).then(function(Ea){ma.request({url:sa,content:ya},
{usePost:!0}).then(Ha,Ha)},function(Ea){})):ma.request({url:sa,content:ya},{usePost:!0}).then(Ha,Ha)}}.bind(this),ua.choiceTwoHandler=function(){}.bind(this),this._createChoiceDlg().show(ua))}.bind(this))}},_createChoiceDlg:function(){if(k.byId("choice-dialog"))var R=P.prototype.statics.getInstance();else R=new P,a.once(R._dialog,"hide",function(){R._dialog.destroyRecursive();R.destroyRecursive()});return R},_contentFormatter:function(R){return'\x3cspan class\x3d"esriContentTypeName"\x3e'+R+"\x3c/span\x3e"},
_tilesFormatter:function(R){var S="esriContentTypeName";R&&1E10<=R&&(S="esriContentTypeNameSmall");return'\x3cspan class\x3d"'+S+'"\x3e'+ka.format(R)+"\x3c/span\x3e"},_sizeFormatter:function(R){return'\x3cspan class\x3d"esriContentTypeName"\x3e'+fa.sizeInMB(R)+"\x3c/span\x3e"},_getAvgTileSize:function(R){return 1E3*(R.rows?R.rows/10:25.6)},_formatSizeWithUnits:function(R){var S=R,N=" "+this.i18n.megabytes;1048567E3<R?(S=R/1048567E3,N=" "+this.i18n.gigabytes):0<R&&(S=R/1048567);S=Math.round(100*S)/
100;return ka.format(S)+N},_enableButtons:function(R,S,N){var X=this._tab===this.TABS.LEVELS?this.i18n.tilesToCreate:this.i18n.tilesToCreateInExtent,aa=this.i18n.tilesToPublish,ea=this.i18n.noTilesToCreate,Y=this.i18n.noTilesToPublish,T="";R!==S?(R=S-R,N=this._formatSizeWithUnits(N*R),T=n.substitute(this._isSourceTilePackage?aa:X,{tiles:R,storage:N}),ba.disableNode(this._buildButton,!1)):(T=n.substitute(this._isSourceTilePackage?Y:ea,{tiles:0}),ba.disableNode(this._buildButton,!0));l.set(this._messageDiv,
"innerHTML",T)},_disableButtons:function(){l.set(this._messageDiv,"innerHTML",this._isSourceTilePackage?this.i18n.selectTilesPublish:this.i18n.selectTiles+"\x3cbr\x3e"+this.i18n.adjustVisibleRange);ba.disableNode(this._buildButton,!0)},_setScalesSelected:function(R){R=n.substitute(this.i18n.scalesSelected,{scales:R});this._scalesSelectedSpan&&l.set(this._scalesSelectedSpan,"innerHTML",R)},_toggleAll:function(R){if(R){var S=l.get(R,"checked");this._grid&&this._grid.store&&(this._grid.store.query().forEach(function(N){N.selected=
S}),this._checkToggled())}},_toggleScale:function(R,S){if(this._grid.store){var N=this._grid.store.query({id:S}).shift();N&&(N.selected=l.get(R,"checked"));this._checkToggled()}},_checkToggled:function(){var R=this,S=0,N=0,X=0,aa=0,ea=0,Y;if(R._grid.store)if(R._grid.store.query().forEach(function(ca){var M=parseInt(ca.created,10),U=parseInt(ca.expected,10),da=parseInt(ca.storageSize,10);ca.selected&&(S++,esriGeowConfig.tilesOnDemandEnabled&&!R._isPortal&&R._updatedExtent?N=(Y=R._calculateIntersection(R._updatedExtent,
R._serviceFullExtent))?N+fa.calculateExpectedTiles(R._serviceTileInfo,Y,R._serviceTileInfo.lods[ca.id]):N+0:N+=M<=U?M:U,X+=U);aa+=M;ea+=da}),S){var T=0<ea?ea/aa:R._getAvgTileSize(R._serviceTileInfo);esriGeowConfig.tilesOnDemandEnabled&&!R._isPortal&&R._updatedExtent?R._enableButtons(X-N,X,T):R._enableButtons(N,X,T)}else R._disableButtons();else R._disableButtons();R._setScalesSelected(S)}});ia.prototype.statics={getInstance:function(){this._instance||(this._instance=new ia);return this._instance}};
return ia})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(K,G,w){return K("dgrid.extensions.DijitRegistry",null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){w.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var v=w.getEnclosingWidget(this.domNode.parentNode);v&&v.isLayoutContainer&&this._resizeHandle.remove()}},
destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);w.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(v){v&&G.setMarginBox(this.domNode,v);this.inherited(arguments)},_set:function(v,r){this[v]=r},watch:function(){},getParent:function(){return w.getEnclosingWidget(this.domNode.parentNode)}})})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileConfig":function(){define("require exports tslib arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/LoadingSpinner arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/useManageTileCache preact preact/compat preact/hooks ../../../../../../esriGeowConfig ../../../../../pageUtil ./services ./SettingTileOfflineMode ./SettingTileRasterDetail ./SettingTileRasterScaleRange ./SettingTileVectorDetail ./types ./utils".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){var e=this;Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileConfig=void 0;b=w.__importDefault(b);p=w.__importDefault(p);G.SettingTileConfig=c.forwardRef(function(d,g){var u=d.page,x=d.item,y=d.portal,B=d.i18n,C=d.maxScaleConstraint,z=d.minScaleConstraint,D=d.componentRef,E=d.onBuildTileClick,A=d.onTileStatusChange,F=d.isArcGISEnterpriseOnKubernetes,H=d.onPropertyChange,I=d.forceRefreshItem,L=a.useMemo(function(){return y.isPortal},[y]),J=a.useMemo(function(){var Na=
x.type===l.ItemTypes.VectorTileService,Pa=h.itemHasSourceData(x)?h.getItemSource(x):null,Qa=h.isTilePackage(x);Pa=null!=Pa&&h.isFeatureLayer(Pa.type);var Ra=p["default"].isAmazonBasedTileService(x.url),Sa=b["default"].tilesOnDemandEnabled&&Pa,Ta=x.typeKeywords.includes("ExtractedCache");return{isVectorTileService:Na,isFromTilePackage:Qa,isFromFeatureService:Pa,isAmazonBasedService:Ra,isTilesFromFeatureLayer:Sa,isFromDataStore:Ta}},[x]),O=J.isFromTilePackage,P=J.isVectorTileService,fa=J.isFromFeatureService,
V=J.isAmazonBasedService,ba=J.isTilesFromFeatureLayer;J=J.isFromDataStore;var ka=a.useState("not-checked"),la=ka[0],ma=ka[1];ka=a.useState("not-checked");var ha=ka[0],Z=ka[1];ka=a.useState(!1);var W=ka[0],Q=ka[1];ka=a.useState(null);var ia=ka[0],R=ka[1];ka=a.useState(null);var S=ka[0];ka=ka[1];var N=a.useState(null),X=N[0],aa=N[1];N=a.useState(!1);var ea=N[0];N=N[1];var Y=a.useState(!1),T=Y[0],ca=Y[1];Y=a.useState({maxScale:l.TILE_LAYER_SCALE_MAX,minScale:l.TILE_LAYER_SCALE_MIN});var M=Y[0],U=Y[1];
Y=a.useState({maxScale:C,minScale:z});var da=Y[0],ja=Y[1],na=a.useMemo(function(){return{exportTilesAllowed:T,minScale:M.minScale,maxScale:M.maxScale,cacheOnDemand:b["default"].tilesOnDemandEnabled&&ia}},[T,ia,M]),oa=a.useMemo(function(){return b["default"].tilesOnDemandEnabled&&!L&&fa&&W!==na.cacheOnDemand},[fa,W,na]),ra=a.useMemo(function(){var Na,Pa=x.adminServiceInfo;Pa=Pa.exportTilesAllowed||L&&"true"===(null===(Na=Pa.properties)||void 0===Na?void 0:Na.exportTilesAllowed);return h.itemHasSourceData(x)&&
T!==Pa},[x,T,x.adminServiceInfo.exportTilesAllowed]),ua=a.useState(!1);Y=ua[0];var wa=ua[1];a.useEffect(function(){q.checkCanSwitchToCacheOnDemand(x,fa,W).then(wa)},[x,fa,W]);var Ba=r.useManageTileCache({item:x,portal:y,page:u,i18n:B,isVectorTileService:P,isFromTilePackage:O,isPortal:L,onTileStatusChange:A}),Da=Ba.buildCache;A=Ba.buildVtlCache;var La=Ba.handleNewJobStatus,Ga=Ba.monitorCacheStatus,xa=Ba.currentTileStatus,Ca=Ba.cacheBuiltPercent,ta=Ba.canBuildCache;ua=Ba.cachingInProgress;Ba=Ba.cachingMessage;
var qa=a.useState(!1),za=qa[0],va=qa[1],pa=a.useRef(null);a.useLayoutEffect(function(){setTimeout(function(){var Na;null===(Na=pa.current)||void 0===Na?void 0:Na.scrollIntoView({behavior:"smooth",block:"end"})},1E3)},[la]);var sa=a.useRef(null),ya=a.useRef(!1),Ha=a.useState(null);qa=Ha[0];var Ea=Ha[1];Ha=P&&fa;F=!F&&h.itemHasSourceData(x);var Aa=a.useState(""),Fa=Aa[0],Ka=Aa[1],Ia=function(Na){var Pa=Na.maxScale;Na=Na.minScale;Na=Math.round("string"===typeof Na?parseFloat(Na):Na);Pa=Math.round("string"===
typeof Pa?parseFloat(Pa):Pa);Ka("1:"+Na+" "+B.itemProperties.to+" 1:"+Pa)},Oa=a.useCallback(function(Na){var Pa;if(Na||"finished"===la){var Qa=h.constructScaleRanges(y,x,z,C);Na=Qa.scaleConstraint;Qa=Qa.visibleTextScale;var Ra=h.inspectServiceInfo(y,x),Sa=Ra.newScale,Ta=Ra.cacheOnDemand,Xa=Ra.exportTilesAllowed,Ua=Ra.serviceInfo;Ra=Ra.adminServiceInfo;x.adminServiceInfo=Ra;x.serviceInfo=Ua;Ra=h.calculateTileData(Ua,Ra,L);U({maxScale:h.clampScale(Sa.maxScale),minScale:h.clampScale(Sa.minScale)});ja(Na);
Q(Ta);R(Ta);ca(Xa);aa(Ra);Ia(Qa);Z("executing");Ga().then(function(Va){var ab=Va.result;Va=Va.error;ab&&(ab=h.calculateTileData(Ua,ab.adminServiceInfo,L),aa(ab));Va&&"unknown-backend-error"===Va.code&&va(!0)})["finally"](function(){Z("finished")});null===(Pa=sa.current)||void 0===Pa?void 0:Pa.reset()}},[y,x,z,C,la]),Ja=a.useMemo(function(){return{save:function(){return q.saveTileLayerSetting({portal:y,item:x,properties:na,curScale:M,curScaleConstraint:da},{cacheOnDemandMinScale:S,cacheOnDemandChanged:oa,
deleteTilesOnSave:ea,exportTilesAllowedChanged:ra})},reset:Oa,jobStatusRefreshHandler:function(Na){return La(Na.status)},monitorCacheStatus:function(Na){return w.__awaiter(e,void 0,void 0,function(){var Pa;return w.__generator(this,function(Qa){switch(Qa.label){case 0:return Ea(null),[4,Ga(Na)];case 1:return(Pa=Qa.sent().error)||I(),[2]}})})}}},[y,x,na,M,da,oa,Oa]);a.useImperativeHandle(g,function(){return Ja},[Ja]);a.useEffect(function(){D.current=Ja},[D,Ja]);a.useEffect(function(){(function(){if(!0!==
ya.current&&"finished"===la&&"finished"===ha){var Na;(function(Sa){Sa.BuildCache="buildCache";Sa.ManageTiles="manageTiles"})(Na||(Na={}));var Pa=p["default"].getHashParts(),Qa=x.type===l.ItemTypes.VectorTileService,Ra=Pa.includes(Na.BuildCache);Na=Pa.includes(Na.ManageTiles);Pa=null==Ca||0===Ca;!Qa&&Ra&&ta?(Da(),ya.current=!0):Qa||L&&!xa||!Pa||(O||(Ra=Qa=void 0,ia?Na&&(Qa=B.itemProperties.buildingTileAutoHeader,Ra=B.itemProperties.buildingTileAutoDescription):(Qa=B.itemProperties.buildingTileHeader,
Ra=B.itemProperties.buildingTileManualDescription),Ra&&Ea({header:Qa,text:Ra,type:"blue"})),Na&&setTimeout(function(){E()},500),ya.current=!0)}})()},[ta,x,xa,u,la,ha,Ca,O,P]);var Ma=a.useCallback(function(){var Na,Pa=null!==(Na=x.adminServiceInfo)&&void 0!==Na?Na:{};Na=Pa.minScale;Pa=Pa.maxScale;var Qa=na.minScale,Ra=na.maxScale;return ra||oa||Na!==Qa||Pa!==Ra},[x.adminServiceInfo,ra,oa,O,na]);a.useEffect(function(){H(na,Ma())},[Ma,na]);a.useEffect(function(){"processing"!==x.status&&ma("finished");
return x.watch("status",function(){ma("processing"===x.status?"executing":"finished")}).unwatch},[x]);a.useEffect(function(){"finished"===la&&setTimeout(function(){Oa(!0)},500)},[la]);return"executing"===la||"executing"===ha&&!ua?f.h(v.LoadingSpinner,{text:"executing"===ha?B.arcGISServerServices.loadingShort:B.itemProperties.publishingLayer}):f.h("div",{"class":"setting-tile-config",ref:pa},f.h("calcite-alert",{placement:"top",icon:"",color:null===qa||void 0===qa?void 0:qa.type,active:!!qa,label:""},
f.h("div",{slot:"title"},null===qa||void 0===qa?void 0:qa.header),f.h("div",{slot:"message"},null===qa||void 0===qa?void 0:qa.text)),f.h("div",{"class":"trailer-0 fieldset-checkbox"},f.h("h3",{"class":"font-size-0 mb-2"},B.itemProperties.visibleRangeLabel),P?f.h("p",{"class":"clearfix padding-leader-half font-size--2 font-medium"},Fa):f.h(n.SettingTileRasterScaleRange,{item:x,i18n:B,curScale:M,setCurScale:U,curScaleConstraint:da,isFromFeatureService:fa}),f.h("hr",{"class":"leader-1 trailer-1 text-rule-light"})),
!P&&f.h(m.SettingTileRasterDetail,{i18n:B,isPortal:L,item:x,cacheBuiltPercent:Ca,onBuildTileClick:E,tileScaleInfos:X||[],tileConstraint:da,disableCacheOnDemand:!Y,canDisplayCacheOnDemand:ba&&!V,onCacheOnDemandMinScaleChange:ka,onDeleteTilesOnSaveChange:N,deleteTilesOnSave:ea,serviceHasCacheOnDemand:W,cacheOnDemandMinScale:S,isFromTilePackage:O,isFromDataStore:J,onCacheOnDemandChange:R,useCacheOnDemand:null===ia&&W||ia,cachingInProgress:ua,cachingMessage:Ba.current,hideStatusTable:za,ref:sa}),F&&f.h(t.SettingTileOfflineMode,
{i18n:B,curOfflineMode:T,setOfflineMode:ca,isFromTilePackage:O,isVectorTileService:P}),F&&Ha&&f.h("hr",{"class":"leader-1 trailer-1 text-rule-light"}),Ha&&f.h(k.SettingTileVectorDetail,{i18n:B,item:x,page:u,cachingInProgress:ua,cachingMessage:Ba.current,buildVtlCache:A}))})})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/LoadingSpinner":function(){define(["require","exports","preact"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G.LoadingSpinner=void 0;
G.LoadingSpinner=function(v){var r=v.text;return w.h("div",{"class":"js-caching-loader "+(v.isFullscreen?"fullscreen overlay-fog flex-center flex-column":"overlay-white position-relative")},w.h("calcite-loader",{noPadding:!0,"no-padding":!0,active:!0,label:"",scale:"m"}),w.h("div",{"class":"padding-leader-1 loader-text","data-dojo-attach-point":"_cachingMsg"},r))}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/useManageTileCache":function(){define("require exports tslib preact/hooks ./services ./types".split(" "),
function(K,G,w,v,r,f){var c=this;Object.defineProperty(G,"__esModule",{value:!0});G.useManageTileCache=void 0;G.useManageTileCache=function(a){var b=a.item,p=a.page,q=a.portal,t=a.i18n,m=a.isVectorTileService,n=a.isFromTilePackage,k=a.isPortal,l=a.onTileStatusChange;a=v.useState(null);var h=a[0],e=a[1];v.useEffect(function(){l(h)},[h]);a=v.useState(null);var d=a[0],g=a[1];a=v.useState(!1);var u=a[0],x=a[1],y=v.useState(!1);a=y[0];var B=y[1];t=v.useRef(k||m?t.itemProperties.buildingCache:n&&!m?t.itemProperties.publishingTiles:
null);n=v.useMemo(function(){var E,A;return!k&&!u&&(null===h||void 0===h?void 0:h.cacheExecutionStatus)===f.JobStatus.None&&0<(null===(A=null===(E=b.serviceInfo.tileInfo)||void 0===E?void 0:E.lods)||void 0===A?void 0:A.length)&&(0===d||null==d)},[u,h,k,b]);y=v.useCallback(function(){return w.__awaiter(c,void 0,void 0,function(){var E;return w.__generator(this,function(A){switch(A.label){case 0:return[4,r.buildCache(p,b,h)];case 1:return E=A.sent(),x(!0),e(E),[2]}})})},[p,b,h]);var C=v.useCallback(function(){return w.__awaiter(c,
void 0,void 0,function(){var E;return w.__generator(this,function(A){switch(A.label){case 0:return k&&B(!0),[4,r.rebuildVtlCache(p,b)];case 1:return E=A.sent(),k&&(B(!1),x(!0)),[2,E]}})})},[p,b]),z=v.useCallback(function(E){(k?[f.EsriJob.Succeeded,f.EsriJob.Failed,f.EsriJob.Cancelled]:[f.JobStatus.Completed,f.JobStatus.Failed]).includes(E)||B(!0)},[]),D=v.useCallback(function(E){return w.__awaiter(c,void 0,void 0,function(){var A,F,H,I,L,J,O,P,fa,V;return w.__generator(this,function(ba){switch(ba.label){case 0:if(!E||
!k)return[3,5];ba.label=1;case 1:return ba.trys.push([1,4,,5]),B(!0),[4,r.getHostedServer(q)];case 2:return A=ba.sent(),[4,r.pollJobStatus(b,A,E,!0)];case 3:return ba.sent(),[3,5];case 4:return F=ba.sent(),B(!1),[2,{error:{code:"unknown-backend-error",message:JSON.stringify(F)}}];case 5:return[4,r.handleMonitorCacheStatus({item:b,portal:q,page:p,serviceInfo:b.serviceInfo,adminServiceInfo:b.adminServiceInfo},{isVectorTileService:m,isPortal:k,cacheJobId:E,setCachingInProgress:B})];case 6:return H=ba.sent(),
I=H.result,L=H.error,B(!1),L?[2,{error:L}]:I?(J=I.tileScaleInfos,O=I.curPercent,P=I.cacheBuiltOrBuilding,fa=I.currentTileStatus,V=I.adminServiceInfo,O&&g(O),x(P),e(fa),[2,{result:{tileScaleInfos:J,currentTileStatus:fa,adminServiceInfo:V}}]):[2,null]}})})},[k,b,q,p]);return{buildCache:y,buildVtlCache:C,monitorCacheStatus:D,handleNewJobStatus:z,currentTileStatus:h,canBuildCache:n,cacheBuiltPercent:d,cachingInProgress:a,cachingMessage:t}}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/services":function(){define("require exports tslib ../../../../../../esriGeowConfig ../../../../../portal/PortalItem ../../../../../serviceUtil ../../../../../utils/timeout ./types ./utils ./utils/services".split(" "),
function(K,G,w,v,r,f,c,a,b,p){function q(C,z,D,E,A){return w.__asyncGenerator(this,arguments,function(){var F,H,I,L,J,O;return w.__generator(this,function(P){switch(P.label){case 0:return G.isCacheBuilding(E)?[3,2]:[4,w.__await(null)];case 1:return[2,P.sent()];case 2:F=!0,P.label=3;case 3:return F?[4,w.__await(u(C,z,D,A))]:[3,8];case 4:return H=P.sent(),I=H.finishBuildingCache,L=H.percent,J=H.tileScales,O=H.adminServiceInfo,F=!I,[4,w.__await({percent:L,tileScales:J,adminServiceInfo:O})];case 5:return[4,
P.sent()];case 6:return P.sent(),[4,w.__await(c.timeout(1E4))];case 7:return P.sent(),[3,3];case 8:return[4,w.__await(null)];case 9:return[2,P.sent()]}})})}function t(C,z,D,E){return w.__asyncGenerator(this,arguments,function(){var A,F,H;return w.__generator(this,function(I){switch(I.label){case 0:return[4,w.__await(G.getHostedServer(z))];case 1:A=I.sent(),F=!0,I.label=2;case 2:return F?[4,w.__await(G.checkJobStatus(D,A,E))]:[3,7];case 3:return H=I.sent(),[a.EsriJob.Succeeded,a.EsriJob.Failed].includes(H.jobStatus)&&
(C.dropCacheJobInfo(),F=!1,C._item.set("serviceChanged",!0)),[4,w.__await(F)];case 4:return[4,I.sent()];case 5:return I.sent(),[4,w.__await(c.timeout(x))];case 6:return I.sent(),[3,2];case 7:return[4,w.__await(!1)];case 8:return[4,I.sent()];case 9:return I.sent(),[4,w.__await(null)];case 10:return[2,I.sent()]}})})}function m(C,z,D){return"Feature Layer"===C.type&&C.drawingInfo?"scenes"===D?k(C,z):n(C,z):!1}function n(C,z){var D;if("esriGeometryMultiPatch"===C.geometryType)return!1;var E=C.drawingInfo.renderer,
A=C.drawingInfo.labelingInfo,F=C.featureReduction,H=C.fields;if("heatmap"===E.type||"esriGeometryPolygon"===C.geometryType&&E.uniqueValueInfos&&E.visualVariables&&E.visualVariables.some(function(L){if("sizeInfo"===L.type&&!L.target)return!0}))return!1;var I=H.filter(function(L){return"esriFieldTypeDate"===L.type}).map(function(L){return L.name});return I.length&&(-1<I.indexOf(E.field)||-1<I.indexOf(E.field1)||(null===(D=E.visualVariables)||void 0===D?0:D.some(function(L){return-1<I.indexOf(L.field)})))||
F||!z&&(null===A||void 0===A?0:A.length)?!1:!0}function k(C,z){var D,E,A,F=C.drawingInfo.renderer,H=C.drawingInfo.labelingInfo,I=C.featureReduction,L=C.fields;if(-1===["esriGeometryPoint","esriGeometryMultiPatch"].indexOf(C.geometryType)||F.observationRenderer||F.latestObservationRenderer||"heatmap"===F.type||(null===(D=F.valueExpression)||void 0===D?0:D.length)||(null===(E=F.visualVariables)||void 0===E?0:E.some(function(O){return O.valueExpression.length})))return!1;var J=L.filter(function(O){return"esriFieldTypeDate"===
O.type}).map(function(O){return O.name});return J.length&&(-1<J.indexOf(F.field)||-1<J.indexOf(F.field1)||(null===(A=F.visualVariables)||void 0===A?0:A.some(function(O){return O.field&&-1<J.indexOf(O.field)})))||I||!z&&(null===H||void 0===H?0:H.length)?!1:!0}var l=this;Object.defineProperty(G,"__esModule",{value:!0});G.canUseForPublish=G.checkCanSwitchToCacheOnDemand=G.saveTileLayerSetting=G.checkVectorTileCacheJobStatus=G.pollJobStatus=G.checkJobStatus=G.configureAttributes=G.getServiceLayers=G.rebuildVtlCache=
G.getHostedServer=G.isCacheBuilding=G.queryReportCacheStatus=G.handleMonitorCacheStatus=G.normalizePortalTileStatus=G.buildCache=G.getCacheOnDemandMinScale=void 0;v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);var h=function(C,z){return w.__awaiter(l,void 0,void 0,function(){return w.__generator(this,function(D){switch(D.label){case 0:return[4,z.fetchAdminServiceInfo(C)];case 1:return[2,D.sent()]}})})},e=function(C){return w.__awaiter(l,void 0,void 0,function(){return w.__generator(this,
function(z){return[2,new Promise(function(D,E){return f["default"].getSuggestedScaleRange(C).then(D,E)})]})})};G.getCacheOnDemandMinScale=function(C){return w.__awaiter(l,void 0,void 0,function(){var z,D,E,A,F;return w.__generator(this,function(H){switch(H.label){case 0:return H.trys.push([0,3,,4]),z=b.getItemSource(C),D=z.url,[4,p.request({url:D+"/layers"})];case 1:return E=H.sent(),[4,Promise.all(E.layers.map(function(I){return e(D+"/"+I.id)}))];case 2:return A=H.sent(),F=A.reduce(function(I,L){return(null===
L||void 0===L?0:L.minScale)&&L.minScale<I?L.minScale:I},a.TILE_LAYER_SCALE_MIN),[2,F];case 3:return H.sent(),[2,null];case 4:return[2]}})})};var d=function(C){return w.__awaiter(l,void 0,void 0,function(){var z,D,E,A,F,H,I,L,J;return w.__generator(this,function(O){switch(O.label){case 0:z=C.portal.isPortal;D=C.url.replace("/rest/","/rest/admin/")+"/edit";E=C.serviceInfo;A=C.adminServiceInfo;F={usePost:!0};H=z&&0===A.minScale;I={minScale:0<A.minScale?A.minScale:a.TILE_LAYER_SCALE_MIN,maxScale:0<A.maxScale?
A.maxScale:a.TILE_LAYER_SCALE_MAX,sourceItemId:""};b.itemHasSourceData(C)&&(I.sourceItemId=b.getItemSource(C).id);if(!H)return[3,2];0===A.minScale&&(I.minScale=E.tileInfo.lods[0].scale);0===A.maxScale&&(I.maxScale=E.tileInfo.lods[E.tileInfo.lods.length-1].scale);L=I.minScale;J=I.maxScale;return[4,p.request({url:D,content:I},F)];case 1:return O.sent(),[2,{minScale:L,maxScale:J}];case 2:return[2,{minScale:A.minScale,maxScale:A.maxScale}]}})})};G.buildCache=function(C,z,D){return w.__awaiter(l,void 0,
void 0,function(){var E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma;return w.__generator(this,function(ha){switch(ha.label){case 0:E=z.serviceInfo,A=z.adminServiceInfo,F=C.portal.isPortal,H=!F&&null!=E.minLOD&&null!=E.maxLOD||F&&null!=A.properties.minLOD&&null!=A.properties.maxLOD,I=[],L=z.url.replace("/rest/","/rest/admin/")+"/updateTiles",ha.label=1;case 1:return ha.trys.push([1,8,,9]),[4,d(z)];case 2:J=ha.sent();O=J.maxScale;P=J.minScale;fa=w.__assign(w.__assign({},D),{maxScale:O,minScale:P});V=0;for(ba=
E.tileInfo.lods;V<ba.length;V++)ka=ba[V],H?(la=F?A.properties.maxLOD:fa.maxLOD,la=parseInt(la.toString(),10),ka.level>=fa.minLOD&&ka.level<=la&&I.push(ka.level)):ka.scale<=fa.minScale&&ka.scale>=fa.maxScale&&I.push(ka.level);ma={levels:I.join(","),extent:[fa.fullExtent.xmin,fa.fullExtent.ymin,fa.fullExtent.xmax,fa.fullExtent.ymax].join()};ha.label=3;case 3:return ha.trys.push([3,6,,7]),[4,p.request({url:L,content:ma},{usePost:!0})];case 4:return ha.sent(),[4,c.timeout(2E3)];case 5:return ha.sent(),
C._item.set("serviceChanged",!0),[2,fa];case 6:return ha.sent(),[2,null];case 7:return[3,9];case 8:return ha.sent(),[2,null];case 9:return[2]}})})};var g=function(C,z,D){var E,A=0,F=0;C=b.calculateTileData(C,z,D);C.forEach(function(H){A+=H.created;F+=H.expected});return{percent:Math.min(null!==(E=A/F*100)&&void 0!==E?E:0,100),tileScales:C}};G.normalizePortalTileStatus=function(C,z,D){var E,A,F,H,I,L;C=C.isPortal;var J=null!=z.minLOD&&null!=z.maxLOD||null!=z.properties.minLOD&&null!=z.properties.maxLOD;
D=w.__assign({},D.results[0]);D.serviceName=z.serviceName;D.type=z.type;D.lodInfos=D.value.lodInfos;D.cacheExecutionStatus=D.value.cacheExecutionStatus;D.minScale=parseFloat(null!==(A=null===(E=null===z||void 0===z?void 0:z.minScale)||void 0===E?void 0:E.toString())&&void 0!==A?A:""+a.TILE_LAYER_SCALE_MIN);D.maxScale=parseFloat(null!==(H=null===(F=null===z||void 0===z?void 0:z.maxScale)||void 0===F?void 0:F.toString())&&void 0!==H?H:""+a.TILE_LAYER_SCALE_MAX);J&&(E=null!==(I=C?z.properties.minLOD:
z.minLOD)&&void 0!==I?I:z.minLOD,z=null!==(L=C?z.properties.maxLOD:z.maxLOD)&&void 0!==L?L:z.maxLOD,D.minLOD=parseInt(E.toString(),10),D.maxLOD=parseInt(z.toString(),10));return D};G.handleMonitorCacheStatus=function(C,z){return w.__awaiter(l,void 0,void 0,function(){var D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea,Y,T,ca,M,U=this,da,ja,na,oa;return w.__generator(this,function(ra){switch(ra.label){case 0:return ra.trys.push([0,25,,26]),D=C.serviceInfo,E=C.adminServiceInfo,A=C.item,
F=C.page,H=C.portal,I=z.isPortal,L=z.setCachingInProgress,J=z.isVectorTileService,O=z.cacheJobId,fa=P=null,V=!1,ka=ba=E,la=function(ua,wa){return w.__awaiter(U,void 0,void 0,function(){var Ba,Da,La,Ga,xa,Ca,ta,qa,za,va,pa,sa,ya,Ha,Ea,Aa;return w.__generator(this,function(Fa){switch(Fa.label){case 0:Ba=q(F,H,A,null!==wa&&void 0!==wa?wa:E.cacheExecutionStatus,ua),L(!0),Da=g(D,E,I),La=Da.percent,Ga=Da.tileScales,xa=null!==La&&void 0!==La?La:null,Ca=null!==Ga&&void 0!==Ga?Ga:null,ta=E,Fa.label=1;case 1:Fa.trys.push([1,
6,7,12]),qa=w.__asyncValues(Ba),Fa.label=2;case 2:return[4,qa.next()];case 3:if(za=Fa.sent(),za.done)return[3,5];va=za.value;pa=va.percent;sa=va.tileScales;ya=va.adminServiceInfo;xa=pa;Ca=sa;ta=ya;Fa.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return Ha=Fa.sent(),Ea={error:Ha},[3,12];case 7:return Fa.trys.push([7,,10,11]),za&&!za.done&&(Aa=qa["return"])?[4,Aa.call(qa)]:[3,9];case 8:Fa.sent(),Fa.label=9;case 9:return[3,11];case 10:if(Ea)throw Ea.error;return[7];case 11:return[7];case 12:return L(!1),
[2,{tileScaleInfos:Ca,curPercent:xa,adminServiceInfo:ta}]}})})},J?I||!G.isCacheBuilding(E.cacheExecutionStatus)?[3,2]:[4,la(void 0)]:[3,16];case 1:return ma=ra.sent(),P=ma.tileScaleInfos,fa=ma.curPercent,[3,15];case 2:if(!I||!O)return[3,15];ha=t(F,H,A,O);L(!0);ra.label=3;case 3:ra.trys.push([3,8,9,14]),Z=w.__asyncValues(ha),ra.label=4;case 4:return[4,Z.next()];case 5:if(W=ra.sent(),W.done)return[3,7];Q=W.value;V=!Q;ra.label=6;case 6:return[3,4];case 7:return[3,14];case 8:return ia=ra.sent(),da={error:ia},
[3,14];case 9:return ra.trys.push([9,,12,13]),W&&!W.done&&(ja=Z["return"])?[4,ja.call(Z)]:[3,11];case 10:ra.sent(),ra.label=11;case 11:return[3,13];case 12:if(da)throw da.error;return[7];case 13:return[7];case 14:L(!1),ra.label=15;case 15:return[3,24];case 16:return I?[4,G.getHostedServer(H)]:[3,21];case 17:return R=ra.sent(),[4,la(R)];case 18:return ra.sent(),[4,G.queryReportCacheStatus(A,R)];case 19:return S=ra.sent(),N=G.normalizePortalTileStatus(H,E,S),X=g(D,N,I),aa=X.percent,P=ea=X.tileScales,
V=G.isCacheBuilding(N.cacheExecutionStatus),[4,la(R,N.cacheExecutionStatus)];case 20:return Y=ra.sent(),P=Y.tileScaleInfos,fa=null!==(na=Y.curPercent)&&void 0!==na?na:aa,ba=N,[3,24];case 21:return[4,h(A,F)];case 22:return T=ra.sent(),[4,la(void 0,T.cacheExecutionStatus)];case 23:ca=ra.sent(),V=G.isCacheBuilding(E.cacheExecutionStatus),P=ca.tileScaleInfos,fa=ca.curPercent,ka=ca.adminServiceInfo,ba=E,ra.label=24;case 24:return[2,{result:{tileScaleInfos:P,curPercent:fa,cacheBuiltOrBuilding:V,currentTileStatus:ba,
adminServiceInfo:ka}}];case 25:return M=ra.sent(),a.isBackendError(M)&&(null===(oa=null===M||void 0===M?void 0:M.details[0])||void 0===oa?0:oa.includes("Error executing tool. ReportCacheStatus : ERROR 999999"))?[2,{error:{message:JSON.stringify(M.message),code:"unknown-backend-error"}}]:[2,{error:{message:JSON.stringify(M.message),code:"unhandled-error"}}];case 26:return[2]}})})};G.queryReportCacheStatus=function(C,z){var D=C.adminServiceInfo,E=C.url,A=E.indexOf("/services/")+10,F;if(!(F=D.serviceName))if(E)if(F=
E.indexOf("/MapServer"),0<F){var H=E.substring(0,F).lastIndexOf("/");F=E.substring(H+1,F)}else F=E;else F=E;D=D.type||"MapServer";H=E.indexOf("/"+F+"/")+1;E=E.substring(A,H);A=f["default"].adjustHostedServerForProtocol(z.url);return p.request({url:A+"/rest/services/System/ReportingTools/GPServer/ReportCacheStatus/execute",content:{service_url:""+E+F+":"+D,report_mode:"esriCacheStatus",f:"json",token:C.serverToken}})};G.isCacheBuilding=function(C){return"PROCESSING"===C||"SUBMITTED"===C};var u=function(C,
z,D,E){return w.__awaiter(l,void 0,void 0,function(){var A,F,H,I,L,J,O,P;return w.__generator(this,function(fa){switch(fa.label){case 0:A=!1,H=F=null,I=z.isPortal,L=D.serviceInfo,J=D.adminServiceInfo,fa.label=1;case 1:return fa.trys.push([1,7,,8]),I?[4,G.queryReportCacheStatus(D,E)]:[3,3];case 2:return O=fa.sent(),J=G.normalizePortalTileStatus(z,J,O),[3,6];case 3:return[4,h(D,C)];case 4:return J=fa.sent(),"SUBMITTED"!==J.cacheExecutionStatus?[3,6]:[4,p.pollUntil(function(){return h(D,C)},function(V){return"SUBMITTED"!==
V.cacheExecutionStatus&&"PROCESSING"!==V.cacheExecutionStatus})];case 5:J=fa.sent(),fa.label=6;case 6:return J=b.hydrateMinMaxScale(L,J,D),P=g(L,J,I),G.isCacheBuilding(J.cacheExecutionStatus)||(A=!0),F=P.percent,H=P.tileScales,[3,8];case 7:return fa.sent(),[3,8];case 8:return[2,{finishBuildingCache:A,percent:F,tileScales:H,adminServiceInfo:J}]}})})};G.getHostedServer=function(C){return new Promise(function(z){C.getHostedFederatedServers().then(z)})};var x=3E3,y=function(C,z,D,E){return w.__awaiter(l,
void 0,void 0,function(){var A,F,H,I,L,J;return w.__generator(this,function(O){switch(O.label){case 0:A=D.cacheResult;F=D.cacheJobId;H=z.portal.isPortal;A&&!A.code&&C._item.set({status:"processing"});if(!H)return[3,7];I=!0;L=!1;O.label=1;case 1:return I?[4,G.checkJobStatus(z,E,F)]:[3,6];case 2:J=O.sent();if(![a.EsriJob.Succeeded,a.EsriJob.Failed].includes(J.jobStatus))return[3,3];J.jobStatus===a.EsriJob.Succeeded&&(L=!0);C.dropCacheJobInfo();C._item.set({status:"completed"});C._item.set("serviceChanged",
!0);I=!1;return[3,5];case 3:return[4,c.timeout(x)];case 4:O.sent(),O.label=5;case 5:return[3,1];case 6:return[2,L];case 7:return[4,u(C,z.portal,z,E)];case 8:return O.sent(),C._item.set("status","completed"),C._item.set("serviceChanged",!0),[2,!0]}})})};G.rebuildVtlCache=function(C,z){return w.__awaiter(l,void 0,void 0,function(){var D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma;return w.__generator(this,function(ha){switch(ha.label){case 0:return D=z.portal,E=D.isPortal,A=z.adminServiceInfo,E?[4,G.getHostedServer(D)]:
[3,6];case 1:F=ha.sent(),H=A.serviceName,I=f["default"].adjustHostedServerForProtocol(F.url),L=I+"/rest/services/System/CachingControllers/GPServer/Manage%20Vector%20Tile%20Cache/submitJob",J={serviceName:H,serviceFolder:"Hosted",tilingFormat:"INDEXED",minScale:null,maxScale:null,f:"json",token:z.serverToken},ha.label=2;case 2:return ha.trys.push([2,4,,5]),[4,p.request({url:L,content:J})];case 3:return(O=ha.sent())&&!O.code?(C.storeCacheJobInfo(O),[2,y(C,z,{cacheResult:O,cacheJobId:O.jobId},F)]):
[2,!1];case 4:return ha.sent(),[2,!1];case 5:return[3,11];case 6:P=A.layers.map(function(Z){return Z.layerId}),fa=z.adminUrl,V=fa+"/rebuildCache",ba={layers:P.join(",")},ha.label=7;case 7:return ha.trys.push([7,10,,11]),ka=y,la=[C,z],ma={},[4,p.request({url:V,content:ba},{usePost:!0})];case 8:return[4,ka.apply(void 0,la.concat([(ma.cacheResult=ha.sent(),ma)]))];case 9:return[2,ha.sent()];case 10:return ha.sent(),[2,!1];case 11:return[2]}})})};G.getServiceLayers=function(C,z){return w.__awaiter(l,
void 0,void 0,function(){var D,E,A;return w.__generator(this,function(F){switch(F.label){case 0:return D=b.getItemSource(z),[4,p.request({url:D.url})];case 1:return E=F.sent(),A=new r["default"](w.__assign(w.__assign({},D),{portal:z.portal,serviceInfo:E})),A.serviceInfo=E,[2,new Promise(function(H,I){C.fetchServiceLayers(A).then(H,I)})]}})})};G.configureAttributes=function(C,z,D){return w.__awaiter(l,void 0,void 0,function(){var E,A;return w.__generator(this,function(F){switch(F.label){case 0:E=z.adminUrl,
A={serviceDefinition:JSON.stringify({layerProperties:D})},F.label=1;case 1:return F.trys.push([1,4,,5]),[4,p.request({url:E+"/edit",content:A},{usePost:!0})];case 2:return F.sent(),[4,G.rebuildVtlCache(C,z)];case 3:return F.sent(),[2,!0];case 4:return F.sent(),[2,!1];case 5:return[2]}})})};var B=function(C,z){return f["default"].adjustHostedServerForProtocol(C.url)+"/rest/services/System/CachingControllers/GPServer/Manage%20Vector%20Tile%20Cache/jobs/"+z};G.checkJobStatus=function(C,z,D){z=f["default"].adjustHostedServerForProtocol(z.url);
return p.request({url:z+"/rest/services/System/CachingControllers/GPServer/Manage%20Vector%20Tile%20Cache/jobs/"+D,content:{f:"json",token:C.serverToken}})};G.pollJobStatus=function(C,z,D,E){z=B(z,D);return p.pollForStatus(z,function(A){return A.jobStatus},{content:{f:"json",token:C.serverToken},pendingStatuses:E?["esriJobSubmitted"]:["esriJobSubmitted","esriJobExecuting"],successStatuses:E?["esriJobExecuting"]:["esriJobSucceeded"]})};G.checkVectorTileCacheJobStatus=t;G.saveTileLayerSetting=function(C,
z){return w.__awaiter(l,void 0,void 0,function(){var D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea,Y,T,ca,M,U,da,ja;return w.__generator(this,function(na){switch(na.label){case 0:D=z.cacheOnDemandChanged;E=z.cacheOnDemandMinScale;A=z.deleteTilesOnSave;F=z.exportTilesAllowedChanged;H=C.item;I=C.portal;L=C.properties;J=C.curScale;O=C.curScaleConstraint;P=I.isPortal;fa=b.itemHasSourceData(H)?b.getItemSource(H):null;V=H.type===a.ItemTypes.VectorTileService;ba=null!==fa&&b.isFeatureLayer(fa.type);
ka=H.serviceInfo;la=w.__assign({},H.adminServiceInfo);ma=H.adminUrl;ha=(null===(M=la.capabilities)||void 0===M?void 0:M.split(","))||[];Z=D&&A;W={serviceChanged:!1};Q=0<J.minScale?J.minScale:O.minScale||a.TILE_LAYER_SCALE_MIN;ia=0<J.maxScale?J.maxScale:O.maxScale||a.TILE_LAYER_SCALE_MAX;R=""+Q;S=""+ia;V||(N=w.__assign({},null===ka||void 0===ka?void 0:ka.tileInfo),X=null===(U=N.lods)||void 0===U?void 0:U.some(function(oa){return oa.scale<=Q&&oa.scale>=ia}),X||(aa=null===(da=N.lods)||void 0===da?void 0:
da.filter(function(oa){return oa.scale>=Q}).reverse().shift(),ea=null===(ja=N.lods)||void 0===ja?void 0:ja.filter(function(oa){return oa.scale<=ia}).shift(),aa&&(Q=aa.scale,R=""+Q),ea&&(ia=ea.scale,S=""+ia)));Y=function(oa){return{url:ma+"/edit",content:{f:"json",token:H.adminServerToken,service:JSON.stringify(oa)}}};if(V)return[3,15];if(!P)return[3,5];ca=w.__assign(w.__assign({},la),{minScale:parseFloat(R),maxScale:parseFloat(S),properties:w.__assign(w.__assign({},la.properties),{minScale:R,maxScale:S,
exportTilesAllowed:L.exportTilesAllowed})});L.exportTilesAllowed&&(ca.properties.maxExportTilesCount=1E5);na.label=1;case 1:return na.trys.push([1,3,,4]),[4,p.request(Y(ca),{usePost:!0})];case 2:return na.sent(),W.serviceChanged=!0,[3,4];case 3:return na.sent(),[3,4];case 4:return[3,14];case 5:T={minScale:Q,maxScale:ia};b.itemHasSourceData(H)&&(T.sourceItemId=b.getItemSource(H).id);if(T.exportTilesAllowed=L.exportTilesAllowed)T.maxExportTilesCount=1E5;v["default"].tilesOnDemandEnabled&&ba&&D&&(T.cacheOnDemand=
L.cacheOnDemand,T.cacheOnDemand&&!ha.includes("ChangeTracking")?T.capabilities=la.capabilities+=",ChangeTracking":!T.cacheOnDemand&&ha.includes("ChangeTracking")&&(T.capabilities=ha.filter(function(oa){return"ChangeTracking"!==oa}).join(",")));v["default"].tilesOnDemandEnabled&&D&&E&&(T.cacheOnDemandMinScale=E);T.serviceDefinition||(T.serviceDefinition=JSON.stringify(w.__assign(w.__assign({},la.properties),{minScale:R,maxScale:S,exportTilesAllowed:L.exportTilesAllowed})));na.label=6;case 6:return na.trys.push([6,
13,,14]),[4,p.request({url:ma+"/edit",content:T},{usePost:!0})];case 7:return na.sent(),D?Z?[4,p.request({url:ma+"/deleteAllTiles"},{usePost:!0})]:[3,9]:[3,11];case 8:na.sent(),na.label=9;case 9:return[4,c.timeout(5E3)];case 10:return na.sent(),[3,12];case 11:W.serviceChanged=!0,na.label=12;case 12:return[3,14];case 13:return na.sent(),[3,14];case 14:return[3,24];case 15:if(!F)return[3,24];if(!P)return[3,20];ca=w.__assign(w.__assign({},la),{properties:w.__assign(w.__assign({},la.properties),{exportTilesAllowed:L.exportTilesAllowed})});
L.exportTilesAllowed&&(ca.properties.maxExportTilesCount=1E5);na.label=16;case 16:return na.trys.push([16,18,,19]),[4,p.request(Y(ca),{usePost:!0})];case 17:return na.sent(),W.serviceChanged=!0,[3,19];case 18:return na.sent(),[3,19];case 19:return[3,24];case 20:T={};b.itemHasSourceData(H)&&(T.sourceItemId=b.getItemSource(H).id);if(T.exportTilesAllowed=L.exportTilesAllowed)T.maxExportTilesCount=1E5;na.label=21;case 21:return na.trys.push([21,23,,24]),[4,p.request({url:ma+"/edit",content:T},{usePost:!0})];
case 22:return na.sent(),W.serviceChanged=!0,[3,24];case 23:return na.sent(),[3,24];case 24:return[2,{changedProps:W,toChangeProps:{}}]}})})};G.checkCanSwitchToCacheOnDemand=function(C,z,D){return w.__awaiter(l,void 0,void 0,function(){var E,A,F,H,I;return w.__generator(this,function(L){switch(L.label){case 0:return E=!0,A=v["default"].tilesOnDemandEnabled&&z,z&&A&&!D?[4,p.request({url:C.sourceData.url+"/layers"})]:[3,2];case 1:F=L.sent(),E=!(null===(I=null===(H=null===F||void 0===F?void 0:F.layers)||
void 0===H?void 0:H.some)||void 0===I?0:I.call(H,function(J){return!1===m(J,!1,"tiles")})),L.label=2;case 2:return[2,E]}})})};G.canUseForPublish=m})},"arcgisonline/pages/utils/timeout":function(){define(["require","exports"],function(K,G){Object.defineProperty(G,"__esModule",{value:!0});G.timeout=void 0;G.timeout=function(w){return new Promise(function(v){return setTimeout(v,w)})}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/types":function(){define(["require","exports"],
function(K,G){Object.defineProperty(G,"__esModule",{value:!0});G.JobStatus=G.EsriJob=G.ItemTypes=G.CacheOnDemand=G.TILE_LAYER_LOD_MAX=G.TILE_LAYER_LOD_MIN=G.TILE_LAYER_SCALE_MAX=G.TILE_LAYER_SCALE_MIN=G.isBackendError=void 0;G.isBackendError=function(w){return w&&w.message&&null!=w.code&&w.details&&null!=w.extendedCode};G.TILE_LAYER_SCALE_MIN=147914382;G.TILE_LAYER_SCALE_MAX=0;G.TILE_LAYER_LOD_MIN=0;G.TILE_LAYER_LOD_MAX=19;(function(w){w.Pending="Pending";w.InProgress="InProgress";w.Failed="Failed"})(G.CacheOnDemand||
(G.CacheOnDemand={}));(function(w){w.FeatureService="Feature Service";w.ServiceDefinition="Service Definition";w.TilePackage="Tile Package";w.VectorTilePackage="Vector Tile Package";w.VectorTileService="Vector Tile Service"})(G.ItemTypes||(G.ItemTypes={}));(function(w){w.Succeeded="esriJobSucceeded";w.Failed="esriJobFailed";w.Cancelled="esriJobCancelled";w.Done="DONE"})(G.EsriJob||(G.EsriJob={}));(function(w){w.Completed="Completed";w.Failed="Failed";w.None="NONE"})(G.JobStatus||(G.JobStatus={}))})},
"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/utils":function(){define("require exports tslib ../../../../../../esriGeowConfig ../../../../../pageUtil ./types".split(" "),function(K,G,w,v,r,f){function c(a,b){var p=b.findIndex(function(q){return a>=q.scale});return-1===p?a>b[0].scale?b[b.length-1].level:f.TILE_LAYER_LOD_MIN:b[p].level}Object.defineProperty(G,"__esModule",{value:!0});G.hydrateScalesFromStatus=G.clampScale=G.LODFromScaleRange=G.scaleRangeFromLOD=G.inspectServiceInfo=
G.hydrateMinMaxScale=G.calculateTileData=G.constructScaleRanges=G.isServiceDefinition=G.isFeatureLayer=G.isTilePackage=G.getItemSource=G.itemHasSourceData=void 0;v=w.__importDefault(v);r=w.__importDefault(r);G.itemHasSourceData=function(a){return Object.prototype.hasOwnProperty.call(a,"sourceData")||Object.prototype.hasOwnProperty.call(a,"sourceData")};G.getItemSource=function(a){var b;(b=Object.prototype.hasOwnProperty.call(a,"sourceData")?a.sourceData:null)||(b=Object.prototype.hasOwnProperty.call(a,
"sourceData")?a.sourceData:null);return b};G.isTilePackage=function(a){var b=G.getItemSource(a);a=a.adminServiceInfo;b=null===b||void 0===b?void 0:b.type;a=null===a||void 0===a?void 0:a.sourceType;return null!=b&&(b===f.ItemTypes.TilePackage||b===f.ItemTypes.VectorTilePackage)||null!=a&&"TILEPACKAGE"===a};G.isFeatureLayer=function(a){return null!=a&&a===f.ItemTypes.FeatureService};G.isServiceDefinition=function(a){return a===f.ItemTypes.ServiceDefinition};G.constructScaleRanges=function(a,b,p,q){var t,
m,n,k,l,h,e=b.serviceInfo,d=b.adminServiceInfo,g=(null===d||void 0===d?void 0:d.properties)||{};a=a.isPortal;b=G.isTilePackage(b);p=null!==p&&void 0!==p?p:f.TILE_LAYER_SCALE_MIN;q=null!==q&&void 0!==q?q:f.TILE_LAYER_SCALE_MAX;var u=a?null!=g.minLOD&&null!=g.maxLOD:null!=e.minLOD&&null!=e.maxLOD,x=null!==(t=null===d||void 0===d?void 0:d.minScale)&&void 0!==t?t:null===e||void 0===e?void 0:e.minScale;t=null!==(m=null===d||void 0===d?void 0:d.maxScale)&&void 0!==m?m:null===e||void 0===e?void 0:e.maxScale;
b&&(a&&(null!==x&&void 0!==x?x:x=parseFloat((null!==(k=null!==(n=null===g||void 0===g?void 0:g.minScale)&&void 0!==n?n:x)&&void 0!==k?k:e.minScale).toString()),null!==t&&void 0!==t?t:t=parseFloat((null!==(h=null!==(l=null===g||void 0===g?void 0:g.maxScale)&&void 0!==l?l:t)&&void 0!==h?h:e.maxScale).toString())),u&&(m=a?parseInt(g.minLOD.toString(),10):e.minLOD,g=a?parseInt(g.maxLOD.toString(),10):e.maxLOD,null!==x&&void 0!==x?x:x=e.tileInfo.lods[m].scale,null!==t&&void 0!==t?t:t=e.tileInfo.lods[g].scale));
return{visibleTextScale:{minScale:x,maxScale:t},scaleConstraint:{minScale:p,maxScale:q}}};G.calculateTileData=function(a,b,p){var q,t,m=[],n=null!==(q=b.minScale)&&void 0!==q?q:a.minScale;q=null!==(t=b.maxScale)&&void 0!==t?t:a.maxScale;if(a.tileInfo)for(var k=0;k<a.tileInfo.lods.length;k++){var l=a.tileInfo.lods[k];l.scale<=n&&l.scale>=q&&(t=r["default"].calculateExpectedTiles(a.tileInfo,a.fullExtent,l),null!==t&&void 0!==t?t:t=1,m.push({id:l.level,created:0,expected:t,scale:l.scale,storageSize:0}))}b.lodInfos&&
(m=G.hydrateScalesFromStatus(m,b,p));return m};G.hydrateMinMaxScale=function(a,b,p){var q,t,m,n,k,l;b=w.__assign(w.__assign({},b),{properties:w.__assign({},null===b||void 0===b?void 0:b.properties)});var h=p.portal.isPortal,e=G.getItemSource(p),d=p.type===f.ItemTypes.VectorTileService;p=G.itemHasSourceData(p)&&G.isServiceDefinition(null===e||void 0===e?void 0:e.type);0<(null===(t=null===(q=a.tileInfo)||void 0===q?void 0:q.lods)||void 0===t?void 0:t.length)&&(h?d?(b.minScale=a.minScale,b.maxScale=
a.maxScale):(b.minScale=null!=b.properties.minScale?parseFloat(b.properties.minScale.toString()):a.tileInfo.lods[null!==(m=null===a||void 0===a?void 0:a.minLOD)&&void 0!==m?m:0].scale,b.maxScale=null!=b.properties.maxScale?parseFloat(b.properties.maxScale.toString()):a.tileInfo.lods[null!==(n=null===a||void 0===a?void 0:a.maxLOD)&&void 0!==n?n:a.tileInfo.lods.length-1].scale):(b.minScale=null!=b.minScale?b.minScale:a.tileInfo.lods[0].scale,b.maxScale=null!=b.maxScale?b.maxScale:a.tileInfo.lods[a.tileInfo.lods.length-
1].scale),0===b.minScale&&(b.minScale=f.TILE_LAYER_SCALE_MIN),!h&&p&&0===b.minScale&&(b.minScale=a.tileInfo.lods[0].scale));null!==(k=b.minLOD)&&void 0!==k?k:b.minLOD=a.minLOD;null!==(l=b.maxLOD)&&void 0!==l?l:b.maxLOD=a.maxLOD;return b};G.inspectServiceInfo=function(a,b){var p,q,t,m=a.isPortal,n=b.type===f.ItemTypes.VectorTileService;var k=b.serviceInfo;var l,h;k=k.tileInfo?w.__assign(w.__assign({},k),{tileInfo:w.__assign(w.__assign({},k.tileInfo),{width:null!==(l=k.tileInfo.width)&&void 0!==l?l:
256,height:null!==(h=k.tileInfo.height)&&void 0!==h?h:256})}):k;l=G.hydrateMinMaxScale(k,w.__assign({},b.adminServiceInfo),b);var e=h=!1,d=!1,g=null,u=!1,x=[],y={minScale:l.minScale,maxScale:l.maxScale};v["default"].tilesOnDemandEnabled&&!n&&(h=!!l.cacheOnDemand,e=l.cacheOnDemandStatus&&[f.CacheOnDemand.Pending,f.CacheOnDemand.InProgress].includes(l.cacheOnDemandStatus),d=null===(p=l.capabilities)||void 0===p?void 0:p.includes("ChangeTracking"),g=null!==(q=null===l||void 0===l?void 0:l.scheduleInfo)&&
void 0!==q?q:null);u=l.exportTilesAllowed||m&&"true"===(null===(t=l.properties)||void 0===t?void 0:t.exportTilesAllowed);n&&(x=G.calculateTileData(k,l,m));return{newScale:y,cacheOnDemand:h,cacheOnDemandCurrentlyCaching:e,changeTrackingEnabled:d,scheduleInfo:g,exportTilesAllowed:u,currentTileScales:x,serviceInfo:k,adminServiceInfo:l}};G.scaleRangeFromLOD=function(a,b){var p=Math.max(f.TILE_LAYER_LOD_MIN,Math.min(a.minLOD,b[b.length-1].level)),q=Math.max(f.TILE_LAYER_LOD_MIN,Math.min(a.maxLOD,b[b.length-
1].level)),t=b.find(function(n){return n.level===p}).scale,m=b.find(function(n){return n.level===q}).scale;return{minScale:t,maxScale:m}};G.LODFromScaleRange=function(a,b){var p=a.maxScale;return{minLOD:c(a.minScale,b),maxLOD:c(p,b)}};G.clampScale=function(a){return Math.max(0,Math.min(a,f.TILE_LAYER_SCALE_MIN))};G.hydrateScalesFromStatus=function(a,b,p){var q;a=a.map(function(k){return w.__assign({},k)});for(var t=0;t<(null===(q=b.lodInfos)||void 0===q?void 0:q.length);t++)for(var m=b.lodInfos[t],
n=0;n<a.length;n++)if(a[n]&&a[n].id===m.levelID){a[n].created=m.tileCount;a[n].expected=m.expectedTileCount;a[n].storageSize=m.tilesSize?m.tilesSize:0;p&&(a[n].pct=m.pct||m.percent);break}return a}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/utils/services":function(){define(["require","exports","tslib","arcgisonline/pages/utils/polling","arcgisonline/sharing/util"],function(K,G,w,v,r){function f(b,p){return r["default"].request(b,p)}function c(b){return new Promise(function(p){return setTimeout(p,
b)})}var a=this;Object.defineProperty(G,"__esModule",{value:!0});G.pollForStatus=G.pollUntil=G.timeout=G.request=void 0;r=w.__importDefault(r);G.request=f;G.timeout=c;G.pollUntil=function(b,p){return w.__awaiter(a,void 0,void 0,function(){var q,t,m=this;return w.__generator(this,function(n){q=0;t=function(){return w.__awaiter(m,void 0,void 0,function(){var k;return w.__generator(this,function(l){switch(l.label){case 0:return[4,b()];case 1:return k=l.sent(),p(k)?[2,k]:[3,2];case 2:return[4,c(v.asyncIntervalTimerFunction(q++))];
case 3:return l.sent(),[2,t()]}})})};try{return[2,t()]}catch(k){throw k;}})})};G.pollForStatus=function(b,p,q){return w.__awaiter(a,void 0,void 0,function(){var t,m,n,k,l=this,h,e;return w.__generator(this,function(d){t=null!==(h=null===q||void 0===q?void 0:q.pendingStatuses)&&void 0!==h?h:["processing","partial","Pending","InProgress"];m=null!==(e=null===q||void 0===q?void 0:q.successStatuses)&&void 0!==e?e:["completed","Completed"];n=0;k=function(){return w.__awaiter(l,void 0,void 0,function(){var g,
u;return w.__generator(this,function(x){switch(x.label){case 0:return[4,f({url:b,content:null===q||void 0===q?void 0:q.content})];case 1:return g=x.sent(),u=p(g),t.includes(u)?[4,c(v.asyncIntervalTimerFunction(n++))]:[3,3];case 2:return x.sent(),[2,k()];case 3:if(m.includes(u))return[2,g];throw g;case 4:return[2]}})})};try{return[2,k()]}catch(g){throw g;}})})}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileOfflineMode":function(){define(["require","exports",
"preact","./SettingTileSwitch"],function(K,G,w,v){Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileOfflineMode=void 0;G.SettingTileOfflineMode=function(r){var f=r.i18n,c=r.curOfflineMode,a=r.isFromTilePackage,b=r.isVectorTileService;r=r.setOfflineMode;return w.h("div",{"class":"offline-mode"},w.h("p",{"class":"font-size-0 margin-bottom-1"},f.itemProperties.offlineModeLabel),w.h(v.SettingTileSwitch,{label:f.itemProperties.offlineModeTileEnable,description:b?void 0:f.itemProperties[a?"offlineModeTileFromPackageDesc":
"offlineModeTileDesc"],checked:c,onChange:r}))}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileSwitch":function(){define(["require","exports","preact"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileSwitch=void 0;G.SettingTileSwitch=function(v){var r=v.description,f=v.checked,c=v.onChange,a=v.disabled;return w.h("calcite-label",{layout:"inline-space-between"},w.h("div",{"class":"setting-tile-switch flex flex-space-between flex-align-center full-width border-1 padding-3 bg-white"},
w.h("div",null,w.h("h5",{"class":"text-sm trailer-0 font-medium"},v.label),r&&w.h("p",{"class":"text-xs trailer-0"},r)),w.h("calcite-switch",{disabled:a,checked:f,scale:"m",oncalciteSwitchChange:function(b){c(b.detail.switched)}})))}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileRasterDetail":function(){define("require exports tslib preact preact/compat preact/hooks ../../../../../../esriGeowConfig ../../../../../components/ConfirmDialog ./LoadingSpinner ./services ./SettingTileScaleTable ./SettingTileSwitch ./types ./utils ./VisibleScaleRangeSlider".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){var l=this;Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileRasterDetail=void 0;c=w.__importDefault(c);a=w.__importDefault(a);var h=function(e){var d,g,u,x,y,B,C,z=null!==(d=e.adminServiceInfo)&&void 0!==d?d:{};e=null!==(g=e.serviceInfo)&&void 0!==g?g:{};return null!==(u=null===e||void 0===e?void 0:e.tileInfo)&&void 0!==u&&u.lods&&null!=z.minLOD&&null!=z.maxLOD?n.scaleRangeFromLOD({minLOD:null!==(B=z.minLOD)&&void 0!==B?B:m.TILE_LAYER_LOD_MIN,maxLOD:null!==
(C=z.maxLOD)&&void 0!==C?C:m.TILE_LAYER_LOD_MAX},null===e||void 0===e?void 0:e.tileInfo.lods):{maxScale:null!==(x=null===e||void 0===e?void 0:e.maxScale)&&void 0!==x?x:m.TILE_LAYER_LOD_MAX,minScale:null!==(y=null===e||void 0===e?void 0:e.minScale)&&void 0!==y?y:m.TILE_LAYER_LOD_MIN}};G.SettingTileRasterDetail=r.forwardRef(function(e,d){var g=e.isPortal,u=e.i18n,x=e.disableCacheOnDemand;x=void 0===x?!0:x;var y=e.tileConstraint,B=e.tileScaleInfos,C=e.cacheBuiltPercent,z=e.useCacheOnDemand,D=e.onDeleteTilesOnSaveChange,
E=e.onCacheOnDemandMinScaleChange,A=e.deleteTilesOnSave,F=e.cacheOnDemandMinScale,H=e.serviceHasCacheOnDemand,I=e.isFromTilePackage,L=e.isFromDataStore,J=e.onCacheOnDemandChange,O=e.onBuildTileClick,P=e.item,fa=e.canDisplayCacheOnDemand,V=e.cachingInProgress,ba=e.cachingMessage,ka=e.hideStatusTable,la=f.useRef(null);f.useEffect(function(){var X;null===(X=la.current)||void 0===X?void 0:X.scrollIntoView({behavior:"smooth"})},[V]);var ma=f.useState(null),ha=ma[0],Z=ma[1],W=f.useState(!1);ma=W[0];var Q=
W[1],ia=function(X){return w.__awaiter(l,void 0,void 0,function(){var aa,ea;return w.__generator(this,function(Y){switch(Y.label){case 0:J(X);if(!X)return[3,3];if(!c["default"].tilesOnDemandEnabled||H)return[3,2];Q(!0);return[4,p.getCacheOnDemandMinScale(P)];case 1:aa=Y.sent(),E(aa),Q(!1),Z("auto"),Y.label=2;case 2:return H&&A&&D(!1),Z(X?"auto":"manual"),[3,4];case 3:ea=null===C||100>C,null!=F&&E(null),c["default"].tilesOnDemandEnabled&&H&&ea&&Z("manual"),Y.label=4;case 4:return[2]}})})},R=f.useRef(null);
W=f.useState(h(P));var S=W[0],N=W[1];f.useImperativeHandle(d,function(){return{reset:function(){return N(h(P))}}},[P]);return v.h(v.Fragment,null,v.h("div",{"class":"setting-tile-detail margin-bottom-2"},v.h("div",{"class":"flex flex-space-between flex-align-center margin-bottom-1"},v.h("p",{"class":"font-size-0 trailer-0"},u.itemProperties.tilesLabel),!I&&!L&&v.h("calcite-button",{appearance:"solid",color:"blue",iconEnd:"tileLayer",onClick:O},u.itemProperties.buildTiles)),v.h("div",{"class":"background-ui-foreground-2"},
v.h("div",{"class":"panel-compact"},v.h("calcite-accordion",{"class":"setting-tile-detail__accordion",appearance:"transparent","icon-position":"start","icon-type":"chevron"},v.h("calcite-accordion-item",{"item-title":u.itemProperties.tileDetails,active:!0,ref:la},v.h("div",{"class":"leader-1 trailer-1"},v.h("p",{"class":"font-size--2 margin-bottom-1"},u.itemProperties.tileRange),v.h("p",{"class":"trailer-half"},I?u.itemProperties.tileRangeDisabledDesc:u.itemProperties.tileRangeDesc),v.h("div",{"class":"bg-white padding-left-half padding-leader-half padding-right-half padding-trailer-half"},
v.h(k.VisibleScaleRangeSlider,{ref:R,disabled:!0,uid:"tile-lod-range-slider",minScale:parseFloat(S.minScale.toString()),maxScale:parseFloat(S.maxScale.toString()),onScaleChange:function(X,aa,ea){var Y,T;if(("minScale"===X||"maxScale"===X)&&aa!==ea){aa=R.current;var ca=ea;"maxScale"===X&&(ca=null!==(Y=null===aa||void 0===aa?void 0:aa.getAttribute("actualMaxScale"))&&void 0!==Y?Y:ea);"minScale"===X&&(ca=null!==(T=null===aa||void 0===aa?void 0:aa.getAttribute("actualMinScale"))&&void 0!==T?T:ea);N(function(M){var U;
return w.__assign(w.__assign({},M),(U={},U[X]=ca,U))})}},constraints:y}))),v.h("div",{"class":"leader-half position-relative"},V&&v.h(b.LoadingSpinner,{text:ba,isFullscreen:!0}),(!g||!I)&&!ka&&v.h(v.Fragment,null,v.h("p",{"class":"font-size--2 margin-bottom-1"},u.itemProperties.tileStatus),v.h(q.SettingTileScaleTable,{i18n:u,isPortal:g,tileScaleInfos:B,cacheBuiltPercent:C})),fa&&v.h("div",{"class":"cache-on-demand leader-1"},v.h("p",{"class":"font-size--2 margin-bottom-1"},u.itemProperties.tileCreation),
v.h(t.SettingTileSwitch,{label:u.itemProperties.buildTilesOnDemand.enableTilesOnDemand,description:u.itemProperties.buildTilesOnDemand.enableTilesOnDemandDesc,checked:z,onChange:function(X){return ia(X)},disabled:x||ma})))))))),v.h("hr",{"class":"trailer-1 margin-bottom-1 text-rule-light"}),null!==ha&&v.h(a["default"],{onCancel:function(){return Z(null)},onOk:function(){D(!0);Z(null)},renderHtmlDescription:!0,hideCancel:"manual"===ha,strings:{title:u.common.notice,description:"auto"===ha?"\n            \x3cp\x3e\n              "+
u.itemProperties.buildTilesOnDemand.switchToAutomatic+"\n              \x3cul\x3e\n                \x3cli\x3e"+u.itemProperties.buildTilesOnDemand.deleteTilesOption+"\x3c/li\x3e\n                \x3cli\x3e"+u.itemProperties.buildTilesOnDemand.keepTilesOption+"\x3c/li\x3e\n              \x3c/ul\x3e\n            \x3c/p\x3e\n            \x3cp\x3e"+u.itemProperties.buildTilesOnDemand.whichTilesOption+"\x3c/p\x3e\n          ":"\n          \x3cp\x3e"+u.itemProperties.buildTilesOnDemand.switchToManual+"\x3c/p\x3e\n          \x3cp\x3e"+
u.itemProperties.buildTilesOnDemand.clickCreate+"\x3c/p\x3e\n        ",ok:"auto"===ha?u.itemProperties.buildTilesOnDemand.deleteTilesLabel:u.common.ok,cancel:"auto"===ha?u.itemProperties.buildTilesOnDemand.keepTilesLabel:void 0}}))})})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileScaleTable":function(){define(["require","exports","tslib","preact","../../../../../pageUtil"],function(K,G,w,v,r){Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileScaleTable=
void 0;r=w.__importDefault(r);var f=["scaleLevel","tilesPublished","totalTiles","percentComplete","storageSize"];G.SettingTileScaleTable=function(c){var a=c.i18n,b=c.isPortal,p=c.tileScaleInfos,q=c.cacheBuiltPercent;return v.h("table",{"class":"setting-tile-scale-table table trailer-0"},v.h("tr",null,f.map(function(t){return v.h("th",{key:t,role:"columnheader"},a.itemProperties[t])})),function(){var t=0,m=0,n=0,k=0,l=[];p.forEach(function(e){b&&e.pct?k=e.pct:(k=Math.round(e.created/e.expected*100),
100<k&&(k=100));t+=e.created;m+=e.expected;n+=e.storageSize;l.push(v.h("tr",null,v.h("td",{role:"gridcell"},"1:"+Math.round(e.scale).toLocaleString("en-EN",{maximumFractionDigits:0})),v.h("td",{role:"gridcell"},e.created.toLocaleString()),v.h("td",{role:"gridcell"},e.expected.toLocaleString()),v.h("td",{role:"gridcell"},k.toLocaleString()),v.h("td",{role:"gridcell"},r["default"].sizeInMB(e.storageSize))))});var h=Math.pow(10,2);h=Math.round((null!==q&&void 0!==q?q:0)*h)/h;l.push(v.h("tr",null,v.h("td",
{role:"gridcell"},a.itemProperties.totals),v.h("td",{role:"gridcell"},t.toLocaleString()),v.h("td",{role:"gridcell"},m.toLocaleString()),v.h("td",{role:"gridcell"},h),v.h("td",{role:"gridcell"},r["default"].sizeInMB(n))));return l}())}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/VisibleScaleRangeSlider":function(){define("require exports tslib esri/dijit/VisibleScaleRangeSlider preact preact/compat preact/hooks ./types".split(" "),function(K,G,w,v,r,f,c,a){Object.defineProperty(G,
"__esModule",{value:!0});G.VisibleScaleRangeSlider=void 0;v=w.__importDefault(v);G.VisibleScaleRangeSlider=f.forwardRef(function(b,p){var q=b.maxScale,t=b.minScale,m=b.constraints,n=b.uid,k=b.onScaleChange,l=b.disabled,h=c.useRef(null),e=c.useRef(),d=function(u){var x;return null===(x=e.current)||void 0===x?void 0:x.get(u)},g=function(u,x){var y;return null===(y=e.current)||void 0===y?void 0:y.set(u,x)};c.useImperativeHandle(p,function(){return{getAttribute:d}});c.useEffect(function(){var u=function(B,
C){return null==B||isNaN(B)?"min"===C?a.TILE_LAYER_SCALE_MIN:a.TILE_LAYER_SCALE_MAX:B},x={id:n,constraints:{minScale:u(null===m||void 0===m?void 0:m.minScale,"min"),maxScale:u(null===m||void 0===m?void 0:m.maxScale,"max")},minScale:a.TILE_LAYER_SCALE_MIN,maxScale:a.TILE_LAYER_SCALE_MAX};e.current&&e.current.destroyRecursive();var y=new v["default"](x,h.current);y.watch(k);y.startup();e.current=y;g("minScale",u(t,"min"));g("maxScale",u(q,"max"));return function(){y.destroy()}},[]);c.useEffect(function(){d("minScale")===
t||isNaN(t)||g("minScale",t)},[t]);c.useEffect(function(){d("maxScale")===q||isNaN(q)||g("maxScale",q)},[q]);c.useEffect(function(){var u=d("constraints");((null===u||void 0===u?void 0:u.maxScale)!==(null===m||void 0===m?void 0:m.maxScale)||(null===u||void 0===u?void 0:u.minScale)!==(null===m||void 0===m?void 0:m.minScale))&&m&&g("constraints",m)},[m]);return r.h("div",{tabIndex:l?-1:void 0,style:{pointerEvents:l?"none":"auto",opacity:l?.5:1},ref:h,"class":"visible-scale-range-slider"})})})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileRasterScaleRange":function(){define("require exports tslib arcgisonline/esriGeowConfig preact preact/hooks ./utils ./VisibleScaleRangeSlider".split(" "),
function(K,G,w,v,r,f,c,a){Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileRasterScaleRange=void 0;v=w.__importDefault(v);G.SettingTileRasterScaleRange=function(b){var p=b.i18n,q=b.item,t=b.curScale,m=b.curScaleConstraint,n=b.setCurScale;b=b.isFromFeatureService;var k=f.useRef(null);return r.h("div",{"class":"setting-tile-raster-scale-range clearfix"},r.h("span",{"class":"text-sm"},p.itemProperties[b?"visibleRangeAutoDesc":"visibleRangeDesc"]," ",!b&&r.h("calcite-link",{href:""+v["default"].helpBase+
v["default"].helpMap["120003696"],target:"_blank"},p.itemProperties.visibleRangeLink)),r.h("div",{"class":"mt-2"},r.h(a.VisibleScaleRangeSlider,{uid:"tile-visible-scale-range-slider",ref:k,minScale:parseFloat(t.minScale.toString()),maxScale:parseFloat(t.maxScale.toString()),constraints:m,onScaleChange:function(l,h,e){var d,g,u,x;if(("minScale"===l||"maxScale"===l)&&h!==e){h=k.current;var y=q.serviceInfo,B=e;"maxScale"===l&&(B=null!==(d=null===h||void 0===h?void 0:h.getAttribute("actualMaxScale"))&&
void 0!==d?d:e);if("minScale"===l&&(B=null!==(g=null===h||void 0===h?void 0:h.getAttribute("actualMinScale"))&&void 0!==g?g:e,0===e))if(m.minScale)B=parseFloat(m.minScale.toString());else if(null===(x=null===(u=null===y||void 0===y?void 0:y.tileInfo)||void 0===u?void 0:u.lods)||void 0===x?0:x.length)B=y.tileInfo.lods[0].scale;n(function(C){var z;return w.__assign(w.__assign({},C),(z={},z[l]=c.clampScale(B),z))})}}})))}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileVectorDetail":function(){define("require exports tslib preact preact/hooks ../../../../../components/SelectLayerProperties ../../../../../utils/alerts ./LoadingSpinner ./services ./SettingTileDescription".split(" "),
function(K,G,w,v,r,f,c,a,b,p){var q=this;Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileVectorDetail=void 0;f=w.__importDefault(f);c=w.__importDefault(c);G.SettingTileVectorDetail=function(t){var m=t.i18n,n=t.item,k=t.page,l=t.cachingInProgress,h=t.cachingMessage,e=t.buildVtlCache,d=r.useState(!1);t=d[0];var g=d[1],u=r.useState(!1);d=u[0];var x=u[1];u=r.useState(null);var y=u[0],B=u[1];return l?v.h(a.LoadingSpinner,{text:h}):v.h(v.Fragment,null,v.h(p.SettingTileDescription,{header:m.itemProperties.manageVTLCache,
description:m.itemProperties.manageVTLCacheDesc,buttonText:m.itemProperties.rebuildCache,buttonOnClick:function(){return w.__awaiter(q,void 0,void 0,function(){var C,z;return w.__generator(this,function(D){switch(D.label){case 0:return C=n.portal.isPortal,g(!0),[4,e()];case 1:return z=D.sent(),g(!1),C&&(z?c["default"].showAlert("success",m.itemProperties.rebuildVtlCacheSuccess):c["default"].showAlert("error",m.itemProperties.rebuildVtlCacheError)),[2]}})})},buttonDisabled:d||t}),v.h("hr",{"class":"trailer-1 margin-bottom-1 text-rule-light"}),
v.h(p.SettingTileDescription,{header:m.itemProperties.configureAttributes.configure,description:m.itemProperties.configureAttributes.description,buttonText:m.itemProperties.configureAttributes.selectAttributes,buttonOnClick:function(){return w.__awaiter(q,void 0,void 0,function(){var C;return w.__generator(this,function(z){switch(z.label){case 0:return g(!0),[4,b.getServiceLayers(k,n)];case 1:return C=z.sent(),B(C),x(!0),g(!1),[2]}})})},buttonDisabled:d||t}),y&&d&&v.h(f["default"],{layers:y,layerProperties:n.adminServiceInfo.layerProperties,
rebuildMode:!0,onCancel:function(){return x(!1)},onSubmit:function(C){return w.__awaiter(q,void 0,void 0,function(){var z;return w.__generator(this,function(D){switch(D.label){case 0:return[4,b.configureAttributes(k,n,C)];case 1:return(z=D.sent())?c["default"].showAlert("success",m.itemProperties.configureAttributes.success):c["default"].showAlert("error",m.itemProperties.configureAttributes.error),x(!1),[2]}})})}}))}})},"arcgisonline/pages/item/widgets/typeOptions/components/SettingTileConfig/SettingTileDescription":function(){define(["require",
"exports","preact"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G.SettingTileDescription=void 0;G.SettingTileDescription=function(v){var r=v.buttonOnClick,f=v.buttonText,c=v.description,a=v.buttonDisabled;return w.h("div",{"class":"flex flex-space-between setting-tile-description"},w.h("div",{"class":""},w.h("h5",{"class":"font-size-0 mb-2"},v.header),w.h("p",{"class":"font-size--2 trailer-0"},c)),w.h("div",null,w.h("calcite-button",{appearance:"outline",onClick:r,disabled:a},
f)))}})},"arcgisonline/pages/item/widgets/typeOptions/scene":function(){define("require exports tslib ../../../pageUtil ../../../serviceUtil ../../../statusUtil ../../components/tasks/SceneTasksRow ./_mixin ../../../utils/arrays ../../../utils/dom ../../../utils/task ../../../../sharing/util ../../../../tsutils/declareDecorator esri/request esri/lang dijit/_TemplatedMixin dojo/topic dojo/Deferred dojo/when dojo/on preact dojo/text!./scene.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,
h,e,d,g,u,x){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);x=w.__importDefault(x);return function(){function y(B,C){var z=this;this.templateString=x["default"];this.BUILD_CACHE_ACTION=
"buildCache";this.JOB_SUCCEEDED="esriJobSucceeded";this.JOB_FAILED="esriJobFailed";this.JOB_CANCELLED="esriJobCancelled";this.FEATURE_SERVICE="Feature Service";this.SCENE_SERVICE="Scene Service";this.STATUS_PROCESSING="PROCESSING";this.STATUS_SUBMITTED="SUBMITTED";this.STATUS_COMPLETED="Completed";this.STATUS_FAILED="Failed";this.CACHE_CHECK_INTERVAL=3E3;this.JOB_STATUS_REFRESH_TOPIC="job-status/refresh";this.minimalUI=!1;this.toggleSceneTasks=function(D){var E=D.some(function(A){return"RECREATE_ALL_NODES"===
A.parameters.update_mode});D=D.some(function(A){return"PARTIAL_UPDATE_NODES"===A.parameters.update_mode});z.rebuildDropdown.disabled=E&&D;p["default"].showHide(z.createFullRebuildBtn,!E);p["default"].showHide(z.createPartialRebuildBtn,!D)}}y.prototype.destroy=function(){this.inherited(arguments);this._cacheStatusHandle&&(clearInterval(this._cacheStatusHandle),this._cacheStatusHandle=void 0);this._resetCachingStatusHandler&&this._resetCachingStatusHandler.remove()};y.prototype.performActions=function(){var B=
new e["default"],C=v["default"].getHashParts(),z=this.item.portal.isPortal;b["default"].includes(C,this.BUILD_CACHE_ACTION)&&!this._cacheBuilt?this._buildSceneCache().then(function(){return B.resolve()}):(this.isHidden=this.minimalUI&&z&&!this._cachingInProgress,B.resolve());return B};y.prototype.reset=function(){var B=this,C=new e["default"];this.inspectServiceInfo().then(function(){B.updateUI();C.resolve()});return C};y.prototype._initHandlers=function(){this.ignoreChanges=!0;this.own(h["default"].subscribe("manage-scene-cache/republish",
this._cacheServiceRepublished.bind(this)),h["default"].subscribe("manage-scene-cache/rebuild",this._cacheRebuild.bind(this)),h["default"].subscribe(this.JOB_STATUS_REFRESH_TOPIC,this._cachingJobStatusUpdate.bind(this)),g["default"](this.createFullRebuildBtn,"click",this.createFullRebuildSceneTask.bind(this)),g["default"](this.createPartialRebuildBtn,"click",this.createPartialRebuildSceneTask.bind(this)))};y.prototype.inspectServiceInfo=function(){var B=this,C=new e["default"],z=this.item.portal.isPortal,
D=this.item.adminServiceInfo;if(this.item.type===this.SCENE_SERVICE&&(this.item.cachingJobUrl||this.item.properties&&this.item.properties.cacheJobUrl)){this.page._item.set("status","processing");this._resetCachingStatusHandler=h["default"].subscribe("job-status/refresh",function(A){b["default"].includes(z?[B.JOB_SUCCEEDED,B.JOB_FAILED,B.JOB_CANCELLED]:[B.STATUS_COMPLETED,B.STATUS_FAILED],A.status)||B._showCaching(!0)});D=new e["default"];var E=this._sceneCacheStatusHandler.bind(this);f["default"].checkSceneCachingJobStatus(this.page._item,
this.CACHE_CHECK_INTERVAL,D,this.JOB_STATUS_REFRESH_TOPIC);D.then(E,E)}else z||this._monitorCacheStatus(D);C.resolve();return C};y.prototype.updateUI=function(){this._isSceneFromFeatures()&&(this._cachingTitle.innerHTML=this.i18n.itemProperties.manageSceneCache,this.item.portal.isPortal&&this.item.isOwner&&(p["default"].showNodes([this._sceneContainer,this._sceneInfo,this._manageInfo]),p["default"].showNode(this.sceneScheduleContainer),u.render(u.h(c["default"],{item:this.item,username:this.portalUser.username,
tasksCallback:this.toggleSceneTasks}),this.sceneTasksContainer)))};y.prototype.isBuildingSceneLayer=function(){return-1<this.item.typeKeywords.indexOf("Building")};y.prototype.isPointSceneLayer=function(){return-1<this.item.typeKeywords.indexOf("Point")};y.prototype.is3DObjectsWithoutUpdateEnabled=function(){return-1<this.item.typeKeywords.indexOf("3DObject")&&!this.hasUpdateEnabled()};y.prototype.hasUpdateEnabled=function(){return(this.item.serviceInfo.layers||[]).some(function(B){return!0===(null===
B||void 0===B?void 0:B.updateEnabled)})};y.prototype.createFullRebuildSceneTask=function(){q.TaskUtility.startSceneTaskCreate(this.item,this.portalUser.username,"full",this.i18n.itemProperties.sceneTask.fullRebuild)};y.prototype.createPartialRebuildSceneTask=function(){q.TaskUtility.startSceneTaskCreate(this.item,this.portalUser.username,"partial",this.i18n.itemProperties.sceneTask.partialRebuild)};y.prototype._hasSource=function(){return!!this.item.sourceData};y.prototype._isSceneFromFeatures=function(){return this.item.type===
this.SCENE_SERVICE&&this._hasSource()&&this.item.sourceData.type===this.FEATURE_SERVICE};y.prototype._cacheServiceRepublished=function(){this.page.refreshServiceInfo()};y.prototype._cachingJobStatusUpdate=function(B){this._lastCachingJobStatus=B};y.prototype._getAdminSceneCachingToolsURL=function(B){return B.replace(B.split("/rest/").shift(),this.page._hostedFederatedServer.adminUrl).replace("/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/","/SceneCachingControllers/GPServer/")};y.prototype._sceneCacheStatusHandler=
function(B,C){var z=B&&(B.status||B.jobStatus),D=(z=!(!z||!b["default"].includes([this.STATUS_COMPLETED,this.JOB_SUCCEEDED,this.STATUS_FAILED,this.JOB_FAILED,this.JOB_CANCELLED],z)))?f["default"].getEndTime(B):void 0;D=D?Date.now()-D:void 0;this._resetCachingStatusHandler&&this._resetCachingStatusHandler.remove();this._showCaching(!1);this._emitHideLastHR();this.page._item.set("lastCachingJobStatus",B);z&&D&&1728E5>D?(p["default"].showNode(this._sceneJobStatusFailedBtn),C&&this.page._item.set("serviceChanged",
!0)):(p["default"].hideNode(this._sceneJobStatusFailedBtn),this.page._item.set("cachingJobUrl",void 0),this.page._item.set("serviceChanged",!0),this.page.dropCacheJobInfo())};y.prototype._cacheRebuild=function(B){var C=this,z=this.item.portal.isPortal;p["default"].disableNode(this._manageSceneBtn,!0);this._showCaching(!0);B&&!B.code&&(z&&(B.jobUrl=this._getAdminSceneCachingToolsURL(B.jobUrl)),this._jobId=B.jobId,this._jobUrl=B.jobUrl,this.page._item.set({lastCachingJobStatus:B,cachingJobUrl:B.jobUrl,
status:"processing"}),this.page.storeCacheJobInfo(B));B=new e["default"];z=function(D){p["default"].disableNode(C._manageSceneBtn,!1);C._sceneCacheStatusHandler(D,!0)};f["default"].checkSceneCachingJobStatus(this.page._item,this.CACHE_CHECK_INTERVAL,B,this.JOB_STATUS_REFRESH_TOPIC);B.then(z,z)};y.prototype._getHostedServer=function(){var B=this,C=new e["default"];d["default"](this.page._hostedFederatedServer||this.page.portal.getHostedFederatedServers(),function(z){B.page._hostedFederatedServer||
(B.page._hostedFederatedServer=z);C.resolve(z)});return C};y.prototype._buildSceneCache=function(){var B=this,C=new e["default"],z=this.item.portal.isPortal,D=this.item.adminServiceInfo,E;z?this._getHostedServer().then(function(A){B._showCaching(!0);B._submitSceneCacheJob(A).then(function(F){F&&!F.code&&(B._jobId=F.jobId);E=window.setInterval(function(){B._checkJobStatus(A,B._jobId).then(function(H){b["default"].includes([B.JOB_SUCCEEDED,B.JOB_FAILED],H.jobStatus)&&(clearInterval(E),B._showCaching(!1),
B._jobId=null,B._cacheBuilt=!0,B.page._item.set("serviceChanged",!0))})},B.CACHE_CHECK_INTERVAL);C.resolve()},function(F){B._showCaching(!1);C.resolve()})}):this.item.type===this.SCENE_SERVICE?(this._showCaching(!0),this._rebuildCache().then(function(A){A&&!A.code&&(z&&(A.jobUrl=B._getAdminSceneCachingToolsURL(A.jobUrl)),B._jobId=A.jobId,B._jobUrl=A.jobUrl,B.page._item.set({lastCachingJobStatus:A,cachingJobUrl:A.jobUrl,status:"processing"}),B.page.storeCacheJobInfo(A));A=new e["default"];var F=function(H){p["default"].disableNode(B._manageSceneBtn,
!1);B._sceneCacheStatusHandler(H,!0)};f["default"].checkSceneCachingJobStatus(B.page._item,B.CACHE_CHECK_INTERVAL,A,B.JOB_STATUS_REFRESH_TOPIC);A.then(F,F);C.resolve()},function(A){B._showCaching(!1);C.resolve()})):(this._monitorCacheStatus(D),C.resolve());return C};y.prototype._checkJobStatus=function(B,C){var z=r["default"].adjustHostedServerForProtocol(B.url);return n["default"]({url:z+"/rest/services/System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/jobs/"+C,content:{f:"json",token:this.item.serverToken}})};
y.prototype._rebuildCache=function(){var B=[];this.item.adminServiceInfo.layers.forEach(function(C){B.push(C.id)});return t["default"].request({url:this.item.adminUrl+"/rebuildCache",content:{f:"json",layers:B.join(","),token:t["default"].getUser().token}},{usePost:!0})};y.prototype._submitSceneCacheJob=function(B){B=r["default"].adjustHostedServerForProtocol(B.url)+"/rest/services/System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/submitJob";var C={service_url:this.item.url,num_of_caching_service_instances:2,
layer:JSON.stringify({}),update_mode:"RECREATE_ALL_NODES",update_extent:"DEFAULT",area_of_interest:JSON.stringify({displayFieldName:"",geometryType:"esriGeometryPolygon",spatialReference:{wkid:54051,latestWkid:54051},fields:[{name:"OID",type:"esriFieldTypeOID",alias:"OID"},{name:"updateGeom_Length",type:"esriFieldTypeDouble",alias:"updateGeom_Length"},{name:"updateGeom_Area",type:"esriFieldTypeDouble",alias:"updateGeom_Area"}],features:[],exceededTransferLimit:!1}),f:"json",token:this.serverToken};
return n["default"]({url:B,content:C})};y.prototype._showCaching=function(B){var C=this.item.type===this.SCENE_SERVICE&&this.item.sourceData&&this.item.sourceData.type===this.FEATURE_SERVICE;(this._cachingInProgress=B)?(C?p["default"].hideNodes([this._sceneInfo,this._manageInfo]):p["default"].showNodes([this._sceneContainer,this.sceneScheduleContainer]),p["default"].activateNode(this._caching)):(C?p["default"].showNodes([this._sceneInfo,this._manageInfo]):p["default"].hideNodes([this._sceneContainer,
this.sceneScheduleContainer]),p["default"].deactivateNode(this._caching));this.isHidden=this.minimalUI&&!B};y.prototype._isCacheBuilding=function(B){return B&&(B.cacheExecutionStatus===this.STATUS_PROCESSING||B.cacheExecutionStatus===this.STATUS_SUBMITTED)};y.prototype._monitorCacheStatus=function(B,C){var z=this;this._isCacheBuilding(B)?(this._showCaching(!0),this._cacheStatusHandle=setInterval(function(){z._checkCacheStatus(B,C)},this.CACHE_CHECK_INTERVAL)):this._showCaching(!1)};y.prototype._checkCacheStatus=
function(B,C){var z=this;this.item.portal.isPortal||this.page.fetchAdminServiceInfo(this.item).then(function(D){z._isCacheBuilding(D)||z._cleanupCacheMonitor()},function(D){z._cleanupCacheMonitor()})};y.prototype._cleanupCacheMonitor=function(){this._showCaching(!1);this._cacheStatusHandle&&(clearInterval(this._cacheStatusHandle),this._cacheStatusHandle=void 0,this.page._item.set("serviceChanged",!0))};y.prototype._getEndTime=function(B){if(B&&(B.startTime||B.submittedTime)&&(B.totalTime||B.duration)){var C=
this.item.portal.isPortal,z=(C?B.submittedTime:B.startTime)||0;z=C?z:1E3*z;B=C?k["default"].isDefined(B.duration)?B.duration:void 0:k["default"].isDefined(B.totalTime)?1E3*B.totalTime:void 0;return z+B}};return y=w.__decorate([m["default"](a["default"],l["default"])],y)}()})},"arcgisonline/pages/item/components/tasks/SceneTasksRow":function(){define("require exports tslib dojo/topic preact preact/hooks ./SceneTasksTable ../../../utils/alerts ../../../utils/task dojo/i18n!../../../../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p){Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);c=w.__importDefault(c);a=w.__importDefault(a);p=w.__importDefault(p);G["default"]=function(q){var t=q.item,m=q.username,n=q.tasksCallback,k=f.useState([]);q=k[0];var l=k[1];k=f.useState(!1);var h=k[0],e=k[1],d=[],g=b.TaskUtility.getTasks.bind(null,t.id,m),u=function(){e(!0);g().then(function(D){D=D.tasks;D=void 0===D?[]:D;l(D);n(D)}).always(function(){e(!1)})},x=function(){u()},y=function(){a["default"].showAlert("success",
p["default"].itemProperties.createTaskSuccess);u()},B=function(D){D=b.TaskUtility.formatErrorMessage(D);a["default"].showAlert("error",D||p["default"].itemProperties.createTaskError);u()},C=function(){a["default"].showAlert("success",p["default"].itemProperties.saveTaskSuccess);u()},z=function(D){D=b.TaskUtility.formatErrorMessage(D);a["default"].showAlert("error",D||p["default"].itemProperties.saveTaskError);u()};f.useEffect(function(){u();d.concat([v["default"].subscribe("tasks__task-created",y)],
[v["default"].subscribe("tasks__task-created-error",B)],[v["default"].subscribe("tasks__task-saved",C)],[v["default"].subscribe("tasks__task-saved-error",z)],[v["default"].subscribe("tasks__task-changed",x)]);return function(){d.forEach(function(D){return D.remove()})}},[]);return r.h("section",null,r.h("div",{"class":"leader-1"},r.h("div",{"class":"tasks-container"},r.h("div",{"class":"loader padding-leader-3 padding-trailer-3 "+(h?"is-active":"")},r.h("div",{"class":"loader-bars"}),r.h("div",{"class":"loader-text"},
p["default"].itemProperties.tasksLoader)),r.h("div",{"class":h?"hide":""},r.h(c["default"],{tasks:q,mini:!0,item:t})))))}})},"arcgisonline/pages/item/components/tasks/SceneTasksTable":function(){define("require exports tslib preact ./SceneTasksTableActions ../../../utils/task ../../../../sharing/util dojo/i18n!../../../../nls/arcgisonline arcgisonline/pages/components/CreateSceneTaskModal/helpers".split(" "),function(K,G,w,v,r,f,c,a,b){function p(d,g){return d?v.h("td",null,g):""}function q(d){var g=
a["default"].itemProperties.sceneTask.schedule,u=g.oneMonth,x=g.twoMonths,y=g.threeMonths,B=g.fourMonths,C=g.fiveMonths;g=g.sixMonths;if(d=b.getCronIntervalValue(d))switch(d){case "1":return u;case "2":return x;case "3":return y;case "4":return B;case "5":return C;case "6":return g}return""}function t(d){var g=a["default"].CreateTaskDlg.dayOfWeek,u=g.monday,x=g.tuesday,y=g.wednesday,B=g.thursday,C=g.friday,z=g.saturday,D=g.sunday;d=(null===d||void 0===d?void 0:d.split(","))||[];return""+d.slice(0,
3).map(function(E){switch(E){case "1":return u;case "2":return x;case "3":return y;case "4":return B;case "5":return C;case "6":return z;case "7":return D;default:return""}}).join(", ")+(3<d.length?"...":"")}function m(d){var g=a["default"].itemProperties.sceneTask.schedule,u=g.oneDay,x=g.twoDays,y=g.threeDays,B=g.fourDays,C=g.fiveDays,z=g.sixDays,D=g.sevenDays;g=g.fourteenDays;if(d=b.getCronIntervalValue(d))switch(d){case "1":return u;case "2":return x;case "3":return y;case "4":return B;case "5":return C;
case "6":return z;case "7":return D;case "14":return g}return""}function n(d){var g=a["default"].itemProperties.sceneTask.schedule,u=g.oneHour,x=g.twoHours,y=g.threeHours,B=g.fourHours,C=g.sixHours;g=g.twelveHours;if(d=b.getCronIntervalValue(d))switch(d){case "1":return u;case "2":return x;case "3":return y;case "4":return B;case "6":return C;case "12":return g}return""}function k(d){var g=a["default"].itemProperties.sceneTask.schedule,u=g.oneMinute,x=g.twoMinutes,y=g.threeMinutes,B=g.fourMinutes,
C=g.fiveMinutes,z=g.tenMinutes,D=g.fifteenMinutes;g=g.thirtyMinutes;if(d=b.getCronIntervalValue(d))switch(d){case "1":return u;case "2":return x;case "3":return y;case "4":return B;case "5":return C;case "10":return z;case "15":return D;case "30":return g}return""}function l(d,g){var u,x,y=(null===(u=d.parameters.layer)||void 0===u?void 0:u.split(","))||[],B={};null===(x=g.serviceInfo)||void 0===x?void 0:x.layers.forEach(function(C){var z=""+C.id;-1<y.indexOf(z)&&(B[z]=C.name)});u=y.slice(0,3)||[];
return 1<u.length?" ("+u.map(function(C){return B[C]}).join(", ")+(3<y.length?"...":"")+")":""}function h(d,g){switch(f.TaskUtility.parseCronIntervalType(d.cronSchedule)){case "month":return""+q(d.cronSchedule.month)+l(d,g);case "week":return""+t(d.cronSchedule.dayOfWeek)+l(d,g);case "day":return""+m(d.cronSchedule.dayOfMonth)+l(d,g);case "hour":return""+n(d.cronSchedule.hour)+l(d,g);case "minute":return""+k(d.cronSchedule.minute)+l(d,g);default:return""}}Object.defineProperty(G,"__esModule",{value:!0});
r=w.__importDefault(r);c=w.__importDefault(c);a=w.__importDefault(a);var e=v.h("tr",null,v.h("td",{colSpan:4},v.h("div",{"class":"text-center leader-half trailer-half"},v.h("calcite-icon",{scale:"l",icon:"calendar"}),v.h("br",null),a["default"].itemProperties.sceneTask.noTasks)));G["default"]=function(d){var g=d.tasks,u=d.isAdmin,x=d.mini,y=d.item;d=(null===g||void 0===g?void 0:g.length)&&g.map(function(B){return v.h("tr",{key:B.id},v.h("td",null,v.h("a",{href:"#",onClick:function(C){f.TaskUtility.startTaskInfo(B.id,
B.title,B.itemId,B.userId,C)}},B.title)),p(u,B.userId),p(!x,c["default"].toDateTimeString(B.created)),p(!x,c["default"].toDateTimeString(B.updated)),v.h("td",null,v.h("a",{href:"#",onClick:function(C){f.TaskUtility.startSceneTaskEdit(B.id,B.userId,y,C)}},h(B,y))),v.h("td",null,f.TaskUtility.formatStatusText(B.taskState)),v.h("td",null,v.h(r["default"],{task:B,item:y})))})||e;return v.h("div",null,v.h("div",{"class":"loader padding-leader-3 padding-trailer-3"},v.h("div",{"class":"loader-bars"}),v.h("div",
{"class":"loader-text"},a["default"].itemProperties.tasksLoader)),v.h("table",{"class":"table table-striped"},v.h("thead",null,v.h("tr",null,v.h("th",null,a["default"].itemProperties.tasksTable.name),u?v.h("th",null,a["default"].itemProperties.tasksTable.user):"",x?"":v.h("th",null,a["default"].itemProperties.tasksTable.created),x?"":v.h("th",null,a["default"].itemProperties.tasksTable.updated),v.h(v.Fragment,null,v.h("th",null,a["default"].itemProperties.tasksTable.schedule),v.h("th",null,a["default"].itemProperties.tasksTable.status),
v.h("th",null,a["default"].itemProperties.tasksTable.actions)))),v.h("tbody",null,d)))}})},"arcgisonline/pages/item/components/tasks/SceneTasksTableActions":function(){define("require exports tslib preact preact/hooks ../../../utils/task dojo/i18n!../../../../nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c){Object.defineProperty(G,"__esModule",{value:!0});c=w.__importDefault(c);G["default"]=function(a){function b(l){l.target!==n&&m(!t)}var p=a.task,q=a.item;a=r.useState(!1);var t=a[0],m=a[1];
a=r.useState(null);var n=a[0],k=a[1];a=f.TaskUtility.getTaskStateAction(p.taskState);r.useEffect(function(){t&&document.addEventListener("click",b,!0);return function(){document.removeEventListener("click",b,!0)}},[t]);return v.h("div",{"class":"actions-cell"},v.h("div",{"class":"dropdown "+(t?"is-active":"")},v.h("button",{"class":"btn btn-link",onClick:function(l){m(!t);t||k(l.target)},title:c["default"].itemProperties.tasksTable.actions,"aria-expanded":t},v.h("i",{"class":"icon-ui-handle-horizontal"})),
v.h("nav",{"class":"dropdown-menu dropdown-right",role:"menu"},v.h("a",{href:"#","class":"dropdown-link",role:"menuitem",title:c["default"].itemProperties.tasksTable.viewTaskDetails,onClick:function(l){f.TaskUtility.startTaskInfo.bind(null,p.id,p.title,p.itemId,p.userId,l)()}},v.h("i",{"class":"icon-ui-table"})," ",c["default"].itemProperties.tasksTable.details),v.h("a",{href:"#","class":"dropdown-link",role:"menuitem",title:c["default"].itemProperties.tasksTable.editTask,onClick:function(l){f.TaskUtility.startSceneTaskEdit.bind(null,
p.id,p.userId,q,l)()}},v.h("i",{"class":"icon-ui-edit"})," ",c["default"].itemProperties.tasksTable.edit),v.h("a",{href:"#","class":"dropdown-link",role:"menuitem",title:c["default"].itemProperties.tasksTable[a+"Task"],onClick:function(l){f.TaskUtility.startTaskPauseResume.bind(null,p,p.userId,l)()}},v.h("i",{"class":"icon-ui-"+(p.active?"pause":"play")})," ",c["default"].itemProperties.tasksTable[""+a]),v.h("a",{href:"#","class":"dropdown-link",role:"menuitem",title:c["default"].itemProperties.tasksTable.deleteTask,
onClick:function(l){f.TaskUtility.startTaskDelete.bind(null,p.id,p.title,p.userId,l)()}},v.h("i",{"class":"icon-ui-trash"})," ",c["default"].itemProperties.tasksTable["delete"]))))}})},"arcgisonline/pages/utils/task":function(){define("require exports tslib ../../esriGeowConfig ../utils/alerts ../components/CreateSceneTaskModal/CreateSceneTaskModal ../../sharing/util ../../sharing/dijit/dialog/ConfirmDialog ../../sharing/dijit/dialog/CreateTaskDlg ../../sharing/dijit/dialog/TaskDetailsDlg dojo/Deferred dojo/topic dojo/string dojo/dom-construct dojo/on preact dojo/i18n!../../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){Object.defineProperty(G,"__esModule",{value:!0});G.TaskUtility=void 0;v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);h=w.__importDefault(h);K=function(){function e(){}e.getTask=function(d,g){return c["default"].request({url:v["default"].restBaseUrl+
"community/users/"+g+"/tasks/"+d})};e.getTasks=function(d,g,u){void 0===u&&(u=1);var x=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"community/users/"+g+"/tasks",content:{num:20,start:u}}).then(function(y){var B=(y.tasks||[]).filter(function(C){return C.itemId===d}).map(function(C){return w.__assign(w.__assign({},C),{title:decodeURIComponent(C.title)})});x.resolve({tasks:B,nextStart:y.nextStart,total:y.total})},function(y){x.reject(y)});return x};e.getAllTasksAdmin=function(d,
g){void 0===d&&(d=1);void 0===g&&(g=20);var u=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"portals/"+v["default"].portal.id+"/allScheduledTasks",content:{num:g,start:d}}).then(function(x){u.resolve({tasks:x.tasks||[],nextStart:x.nextStart,total:x.total})},function(x){u.reject(x)});return u};e.deleteTask=function(d,g){var u=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"community/users/"+g+"/tasks/"+d+"/delete"},{usePost:!0}).then(function(x){u.resolve(x)},
function(x){u.reject(x)});return u};e.enableTask=function(d,g){var u=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"community/users/"+g+"/tasks/"+d+"/enable"},{usePost:!0}).then(function(x){u.resolve(x)},function(x){u.reject(x)});return u};e.disableTask=function(d,g){var u=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"community/users/"+g+"/tasks/"+d+"/disable"},{usePost:!0}).then(function(x){u.resolve(x)},function(x){u.reject(x)});return u};e.startTaskCreate=
function(d,g){var u=new b["default"]({editMode:!1,itemId:d,username:g,saveFunction:e.createTask,onHide:function(){u.destroyRecursive()}});u.showModal()};e.startSceneTaskCreate=function(d,g,u,x){var y,B=((null===(y=null===d||void 0===d?void 0:d.serviceInfo)||void 0===y?void 0:y.layers)||[]).map(function(z){return{id:""+z.id,name:z.name,requiresRebuild:z.requiresRebuild}}),C=document.body.querySelector("#create-scene-task-modal");C||(C=document.createElement("div"),C.id="create-scene-task-modal",document.body.insertAdjacentElement("beforeend",
C));l.render(l.h(f["default"],{item:d,username:g,layers:B,presetTitle:x,presetType:u,editMode:!1,strings:w.__assign(w.__assign(w.__assign({},h["default"].CreateTaskDlg),h["default"].CreateSceneTaskDlg),{manageSceneCache:h["default"].manageSceneCache}),onSave:e.createTask,onCancel:function(){l.render(null,C);document.body.removeChild(C)},showAlert:r["default"].showAlert}),C)};e.createTask=function(d,g){var u=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"community/users/"+g+"/createTask",
content:d},{usePost:!0}).then(function(x){x.success?(t["default"].publish("tasks__task-created",x),u.resolve(x)):(t["default"].publish("tasks__task-created-error",x),u.reject(x))},function(x){t["default"].publish("tasks__task-created-error",x);u.reject(x)});return u};e.startTaskInfo=function(d,g,u,x,y){y.preventDefault();(new p["default"]({itemId:u,taskId:d,taskTitle:g,username:x})).showModal()};e.startTaskEdit=function(d,g,u,x){x.preventDefault();var y=new b["default"]({editMode:!0,itemId:u,username:g,
taskId:d,saveFunction:e.editTask,onHide:function(){y.destroyRecursive()}});y.showModal()};e.startSceneTaskEdit=function(d,g,u,x){var y;x.preventDefault();x=((null===(y=null===u||void 0===u?void 0:u.serviceInfo)||void 0===y?void 0:y.layers)||[]).map(function(C){return{id:""+C.id,name:C.name,requiresRebuild:C.requiresRebuild}});var B=document.body.querySelector("#create-scene-task-modal");B||(B=document.createElement("div"),B.id="create-scene-task-modal",document.body.insertAdjacentElement("beforeend",
B));l.render(l.h(f["default"],{item:u,username:g,layers:x,editMode:!0,taskId:d,strings:w.__assign(w.__assign(w.__assign({},h["default"].CreateTaskDlg),h["default"].CreateSceneTaskDlg),{manageSceneCache:h["default"].manageSceneCache}),onSave:e.editTask,onCancel:function(){l.render(null,B);document.body.removeChild(B)},showAlert:r["default"].showAlert}),B)};e.editTask=function(d,g){var u=new q["default"];c["default"].request({url:v["default"].restBaseUrl+"community/users/"+g+"/tasks/"+d.id+"/update",
content:d},{usePost:!0}).then(function(x){x.success?(t["default"].publish("tasks__task-saved",x),u.resolve(x)):(t["default"].publish("tasks__task-saved-error",x),u.reject(x))},function(x){t["default"].publish("tasks__task-saved-error",x);u.reject(x)});return u};e.formatErrorMessage=function(d){(d=h["default"].CreateTaskDlg.messages[d.messageCode])&&(d=h["default"].CreateTaskDlg.genericError+" "+d);return d};e.formatStatusText=function(d){return h["default"].itemProperties.tasksTable[d]};e.createActionsDropdown=
function(d,g,u,x){var y=n["default"].create("div",{"class":"dropdown js-dropdown"});n["default"].create("button",{"class":"btn btn-link js-dropdown-toggle",innerHTML:'\x3ci class\x3d"icon-ui-handle-horizontal"\x3e\x3c/i\x3e',"data-task-action":"delete",title:h["default"].itemProperties.tasksTable.actions},y);var B=n["default"].create("nav",{"class":"dropdown-menu dropdown-right",role:"menu"},y),C=n["default"].create("a",{href:"#","class":"dropdown-link",role:"menuitem",innerHTML:'\x3ci class\x3d"icon-ui-table"\x3e\x3c/i\x3e '+
h["default"].itemProperties.tasksTable.details,title:h["default"].itemProperties.tasksTable.viewTaskDetails},B),z=n["default"].create("a",{href:"#","class":"dropdown-link",role:"menuitem",innerHTML:'\x3ci class\x3d"icon-ui-edit"\x3e\x3c/i\x3e '+h["default"].itemProperties.tasksTable.edit,title:h["default"].itemProperties.tasksTable.editTask},B),D=e.getTaskStateAction(d.taskState);D=n["default"].create("a",{href:"#","class":"dropdown-link",role:"menuitem",innerHTML:'\x3ci class\x3d"icon-ui-'+(d.active?
"pause":"play")+'"\x3e\x3c/i\x3e '+h["default"].itemProperties.tasksTable[""+D],title:h["default"].itemProperties.tasksTable[D+"Task"]},B);B=n["default"].create("a",{href:"#","class":"dropdown-link",role:"menuitem",innerHTML:'\x3ci class\x3d"icon-ui-trash"\x3e\x3c/i\x3e '+h["default"].itemProperties.tasksTable["delete"],title:h["default"].itemProperties.tasksTable.deleteTask},B);n["default"].place(y,x);k["default"](C,"click",e.startTaskInfo.bind(this,d.id,d.title,g,u));k["default"](z,"click",e.startTaskEdit.bind(this,
d.id,u,g));k["default"](D,"click",e.startTaskPauseResume.bind(this,d,u));k["default"](B,"click",e.startTaskDelete.bind(this,d.id,d.title,u))};e.startTaskPauseResume=function(d,g,u){u.preventDefault();var x=e.getTaskStateAction(d.taskState);u=m["default"].substitute(h["default"].itemProperties[x+"TaskMessage"],{taskTitle:d.title});var y=new a["default"]({buttonOkLabel:h["default"].itemProperties.tasksTable[x],buttonCancelLabel:h["default"].common.cancel,"class":"tasks-tab tasks-dlg",style:{width:"400px",
height:"auto","word-break":"break-word"}});y.show({title:h["default"].itemProperties.tasksTable[x+"Task"],message:u}).then(function(B){"onOk"===B?(d.active?e.disableTask:e.enableTask)(d.id,g).then(function(C){y.hide();!0===C.success?(r["default"].showAlert("success",h["default"].itemProperties[x+"TaskSuccess"]),t["default"].publish("tasks__task-changed",C)):(r["default"].showAlert("error",C.error.message||h["default"].itemProperties[x+"TaskError"]),t["default"].publish("tasks__task-changed-error",
C))},function(C){y.hide();r["default"].showAlert("error",C.message);t["default"].publish("tasks__task-changed-error",C)}):y.hide()})};e.startTaskDelete=function(d,g,u,x){x.preventDefault();g=m["default"].substitute(h["default"].itemProperties.deleteTaskMessage,{taskTitle:g});var y=new a["default"]({buttonOkLabel:h["default"].common.deleteLabel,buttonCancelLabel:h["default"].common.cancel,"class":"btn-delete tasks-tab tasks-dlg",style:{width:"400px",height:"auto","word-break":"break-word"}});y.show({title:h["default"].itemProperties.deleteTask,
message:g}).then(function(B){"onOk"===B?e.deleteTask(d,u).then(function(C){y.hide();!0===C.success?(r["default"].showAlert("success",h["default"].itemProperties.deleteTaskSuccess),t["default"].publish("tasks__task-changed",C)):(r["default"].showAlert("error",C.error.message||h["default"].itemProperties.deleteTaskError),t["default"].publish("tasks__task-changed-error",C))},function(C){y.hide();r["default"].showAlert("error",C.message);t["default"].publish("tasks__task-changed-error",C)}):y.hide()})};
e.parseCronIntervalType=function(d){if("*"===d.hour)return"minute";if("*"===d.dayOfMonth&&"*"===d.month)return"hour";if("*"!==d.dayOfMonth&&"?"!==d.dayOfMonth&&"*"===d.month)return"day";if("?"===d.dayOfMonth&&"*"!==d.dayOfWeek&&"?"!==d.dayOfWeek)return"week";if("*"!==d.month)return"month"};e.parseCronValue=function(d){return d&&"*"!==d&&(d=d.split("/"),1<d.length&&(d=parseInt(d[1],10),!isNaN(d)))?d.toString():""};e.getTaskStateAction=function(d){switch(d){case "paused":case "failed":case "disabled":return"resume";
case "active":return"pause";case "completed":return"restart"}};return e}();G.TaskUtility=K})},"arcgisonline/pages/components/CreateSceneTaskModal/CreateSceneTaskModal":function(){define("require exports tslib preact preact/hooks preact/compat ../../../esriGeowConfig ./helpers ./SceneRebuildOptions ../../utils/dom ../../utils/validation ../../utils/task moment/moment".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m){Object.defineProperty(G,"__esModule",{value:!0});c=w.__importDefault(c);b=w.__importDefault(b);
p=w.__importDefault(p);q=w.__importDefault(q);m=w.__importDefault(m);var n=c["default"].self.isPortal,k=function(l){return l.startsWith("{")&&l.endsWith("}")?l.substring(1,l.length-1):l};G["default"]=function(l){var h=l.item,e=l.username,d=l.layers,g=l.presetTitle,u=l.presetType,x=l.editMode,y=void 0===x?!1:x,B=l.taskId,C=l.strings,z=l.onCancel,D=l.onSave,E=l.showAlert;x=r.useState(!0);l=x[0];var A=x[1];x=r.useState(1===(null===d||void 0===d?void 0:d.length)?2:1);var F=x[0],H=x[1];x=r.useState(null);
var I=x[0],L=x[1];g=r.useState(g||"");var J=g[0],O=g[1];g=r.useState("day");var P=g[0],fa=g[1];g=r.useState("never");var V=g[0],ba=g[1];u=r.useState("partial"===u?"rebuildPartial":"rebuildFull");var ka=u[0],la=u[1];u=r.useState(1===(null===d||void 0===d?void 0:d.length)?[d[0].id]:[]);var ma=u[0],ha=u[1];u=r.useState("00:00");var Z=u[0],W=u[1];u=r.useState("00:00");var Q=u[0],ia=u[1];u=r.useState("00:00");var R=u[0],S=u[1],N=r.useRef(null),X=r.useRef(null),aa=r.useRef(null),ea=r.useRef(null),Y=r.useRef(null),
T=r.useRef(null),ca=r.useRef(null),M=r.useRef(null),U=r.useRef(null),da=r.useRef(null),ja=r.useRef(null),na=r.useRef(null),oa=r.useRef(null),ra=r.useRef(null),ua=r.useRef(null),wa=function(Aa,Fa){switch(Fa){case "minute":a.parseCronInterval(Aa.cronSchedule.minute||"",aa.current);break;case "hour":Y.current.value=Aa.cronSchedule.minute;a.parseCronInterval(Aa.cronSchedule.hour||"",ea.current);break;case "day":a.parseCronInterval(Aa.cronSchedule.dayOfMonth||"",T.current);Da(Aa,"day");break;case "week":Ba(Aa);
break;case "month":var Ka=Da(Aa,"month");a.parseCronInterval(Aa.cronSchedule.month||"",ca.current);M.current.value=a.adjustCronDayOfMonth(Aa.cronSchedule.dayOfMonth,Ka)}},Ba=function(Aa){var Fa=Da(Aa,"week"),Ka=(Aa.cronSchedule.dayOfWeek||"").split(",");Aa=document.querySelectorAll("[name\x3d'scheduleDayOfWeek']");p["default"].forEachNode(Aa,function(Ia){Ia.checked=Ka.some(function(Oa){return a.adjustCronDayOfWeek(Ia.value,Fa)===Oa})})},Da=function(Aa,Fa){var Ka=m["default"].utc(Aa.cronSchedule.hour+
":"+Aa.cronSchedule.minute,"H:mm");if(Ka.isValid()){var Ia=Ka.local().hours()+":"+Ka.local().minutes();"day"===Fa&&W(Ia);"week"===Fa&&ia(Ia);"month"===Fa&&S(Ia)}return Ka.local().day()-Ka.day()},La=function(Aa){switch(Aa){case 1:q["default"].clearState([N.current,X.current]);break;case 2:q["default"].clearState([M.current,U.current])}var Fa=!0;switch(Aa){case 1:Aa=new RegExp(/^\s*$/);var Ka=!0;!J||Aa.test(J)?(Ka=!1,q["default"].setInvalidState(N.current,X.current,C.validation.invalidTitle),Aa=!1):
(100<(null===J||void 0===J?void 0:J.length)&&(Ka=!1,q["default"].setInvalidState(N.current,X.current,C.validation.invalidTitleLength)),Aa=Ka);Aa||(Fa=!1);break;case 2:Aa=!0;switch(P){case "week":da.current.querySelectorAll("[name\x3d'scheduleDayOfWeek']:checked").length||(Aa=!1,q["default"].setInvalidState(null,ja.current,C.validation.invalidDayOfWeek));break;case "month":if(M.current.value||(Aa=!1,q["default"].setInvalidState(M.current,U.current,C.validation.invalidDayOfMonth)),M.current.value&&
(Ka=parseInt(M.current.value,10),isNaN(Ka)||!isNaN(Ka)&&(0>=Ka||31<Ka)))Aa=!1,q["default"].setInvalidState(M.current,U.current,C.validation.invalidDayOfMonthValue)}Aa||(Fa=!1)}return Fa},Ga=function(Aa){var Fa=a.getCronTime(Q),Ka=da.current.querySelectorAll("[name\x3d'scheduleDayOfWeek']"),Ia=[];p["default"].forEachNode(Ka,function(Oa){Oa.checked&&Ia.push(a.adjustCronDayOfWeek(Oa.value,Fa.dayOffset))});Aa.minute=Fa.minute;Aa.hour=Fa.hour;Aa.dayOfWeek=Ia.join(",");Aa.dayOfMonth="?"},xa=function(Aa,
Fa){void 0===Fa&&(Fa=!1);var Ka=m["default"](Aa).startOf("day");if(Fa){var Ia=m["default"](),Oa=Ia.clone().startOf("day");Ia=Ia.diff(Oa,"seconds");Ka.add(Ia,"seconds")}return Ka.isValid()?Ka.valueOf():""},Ca=function(){var Aa="rebuildFull"===ka&&n?1===d.length?"{}":"{"+d.map(function(Ka){return Ka.id}).join(",")+"}":1===ma.length?"{}":"{"+ma.join(",");switch(ka){case "rebuildFull":case "rebuildLayers":var Fa="RECREATE_ALL_NODES";break;case "rebuildPartial":Fa="PARTIAL_UPDATE_NODES";break;case "rebuildAttributes":Fa=
"PARTIAL_UPDATE_ATTRIBUTES"}return JSON.stringify({service_url:h.url,num_of_caching_service_instances:2,layer:Aa,update_mode:Fa})},ta=function(){var Aa={minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"?"};switch(P){case "minute":Aa.minute="*/"+aa.current.value;break;case "hour":Aa.minute=Y.current.value;Aa.hour="*/"+ea.current.value;break;case "day":var Fa=a.getCronTime(Z);Aa.minute=Fa.minute;Aa.hour=Fa.hour;Aa.dayOfMonth="*/"+T.current.value;break;case "week":Ga(Aa);break;case "month":Fa=
a.getCronTime(R),Aa.minute=Fa.minute,Aa.hour=Fa.hour,Aa.dayOfMonth=a.adjustCronDayOfMonth(M.current.value,Fa.dayOffset),Aa.month="*/"+ca.current.value}Fa=Array.isArray(ra.current.value)?ra.current.value.slice(0,1).shift():ra.current.value;var Ka=Array.isArray(ua.current.value)?ua.current.value.slice(0,1).shift():ua.current.value;return{id:(null===I||void 0===I?void 0:I.id)||null,title:encodeURIComponent(J),itemId:h.id,startDate:xa(Fa,!0),type:"ExecuteSceneCook",parameters:Ca(),minute:Aa.minute,hour:Aa.hour,
dayOfMonth:Aa.dayOfMonth,month:Aa.month,dayOfWeek:Aa.dayOfWeek,maxOccurrences:"count"===V?parseInt(oa.current.value,10):null,endDate:"date"===V?xa(Ka):null}};u=function(){A(!1);z()};g=function(){H(1)};x=function(){La(F)&&H(2)};var qa=function(){if(La(F)){var Aa=ta();D(Aa,e).then(function(){A(!1)},function(Fa){})}},za=function(){q["default"].clearState([da.current,ja.current])},va=function(Aa){Aa=n||!n&&["15","30"].includes(Aa)?Aa:"15";for(var Fa=0;Fa<aa.current.options.length;Fa++){var Ka=aa.current.options[Fa];
if(Ka.value===Aa){Ka.selected=!0;break}}};r.useEffect(function(){y&&B&&t.TaskUtility.getTask(B,e).then(function(Aa){L(Aa);O(decodeURIComponent(Aa.title));if(null===Aa||void 0===Aa?0:Aa.cronSchedule){var Fa=t.TaskUtility.parseCronIntervalType(Aa.cronSchedule);fa(Fa);wa(Aa,Fa)}Aa.startDate&&(ra.current.valueAsDate=new Date(Aa.startDate));Aa.endDate&&(na.current.value="date",ua.current.valueAsDate=new Date(Aa.endDate),ra.current.max=void 0,ba("date"));0<Aa.maxOccurrences&&(na.current.value="count",oa.current.value=
Aa.maxOccurrences.toString(),ra.current.max=void 0,ba("count"));Fa=Aa.parameters;Aa=Fa.update_mode;Fa=Fa.layer;Fa=""!==Fa&&"{}"!==Fa?k(Fa).split(","):d.map(function(Ia){return Ia.id});if("RECREATE_ALL_NODES"===Aa&&n)la("rebuildFull"),ha([]);else{var Ka=void 0;"RECREATE_ALL_NODES"===Aa?Ka="rebuildLayers":"PARTIAL_UPDATE_NODES"===Aa?Ka="rebuildPartial":"PARTIAL_UPDATE_ATTRIBUTES"===Aa&&(Ka="rebuildAttributes");la(Ka);ha(Fa)}},function(){E("error",C.loadTaskError)})},[]);r.useEffect(function(){ra.current&&
!y&&(ra.current.valueAsDate=new Date)},[ra]);r.useEffect(function(){ua.current&&!y&&(ua.current.minAsDate=new Date)},[ua]);r.useEffect(function(){n||y||(aa.current.value="15",va("15"))},[aa]);var pa=1===F,sa=2===F,ya=n?"":"hide",Ha=!n&&!a.isPointSceneLayer(h)&&!a.is3DObjectsWithoutUpdateEnabled(h),Ea=y&&!I;return v.h(v.Fragment,null,f.createPortal(v.h("calcite-modal",{active:l,role:"dialog","aria-modal":"true","class":"create-scene-task-dlg","aria-label":C.title,oncalciteModalClose:u,"disable-outside-close":!0,
width:800},v.h("h3",{slot:"header","class":"font-size-2 trailer-0","data-test":"title"},y?C.editTitle:C.title),v.h("div",{slot:"content","class":"main-flex-container force-height"},v.h("div",{"class":"content-container"},v.h("div",{"class":"step-container step-1"+(pa?"":" hide")},v.h("div",null,v.h("label",{id:"task-title","for":"taskTitle"},C.taskTitle,v.h("input",{id:"taskTitle",type:"text",ref:N,autocomplete:"off",name:"taskTitle","class":"scene-schedule-task__input",placeholder:C.taskTitlePlaceholder,
value:J,onChange:function(Aa){O(Aa.target.value)}}),v.h("div",{"class":"input-error-message",ref:X}))),v.h(b["default"],{rebuildType:ka,sceneLayers:d,selectedLayers:ma,strings:C.manageSceneCache,isPortal:n,canShowPartialRebuild:Ha,onRebuildTypeChange:la,onSelectedLayerChange:function(Aa,Fa){Fa&&-1===ma.indexOf(Aa)?ha(w.__spreadArray([],ma).concat([Aa])):Fa||ha(ma.filter(function(Ka){return Ka!==Aa}))}})),v.h("calcite-loader",{active:y&&!I,label:""}),v.h("div",{"class":"step-container step-2"+(sa&&
!Ea?"":" hide")},v.h("div",{"class":"flex"},v.h("label",{id:"schedule-date-start","for":"scheduleDateStart","class":"schedule-date full-width"},C.scheduleStart,v.h("calcite-input-date-picker",{ref:ra,id:"scheduleDateStart",name:"scheduleDateStart","class":"leader-quarter",placeholder:C.scheduleDateStart,intlNextMonth:C.nextMonth,intlPrevMonth:C.prevMonth,scale:"l"})),v.h("label",{id:"schedule-interval-type","class":"full-width margin-left-quarter"},C.repeatType,v.h("select",{name:"scheduleIntervalType",
value:P,"class":"select-full scene-schedule-task__select",onChange:function(Aa){fa(Aa.target.value);"minute"===P&&va(Aa.target.value)}},n?v.h(v.Fragment,null,v.h("option",{value:"minute"},C.scheduleIntervalType.minute),v.h("option",{value:"hour"},C.scheduleIntervalType.hour)):null,v.h("option",{value:"day"},C.scheduleIntervalType.day),v.h("option",{value:"week"},C.scheduleIntervalType.week),v.h("option",{value:"month"},C.scheduleIntervalType.month)))),v.h("div",null,v.h("div",{id:"minuteForm","class":"schedule-interval-options"+
(n&&"minute"===P?"":" hide")},v.h("label",null,C.repeatInterval,v.h("select",{"class":"select-full scene-schedule-task__select",ref:aa},v.h("option",{value:"1","class":ya},C.minuteInterval.oneMinute),v.h("option",{value:"2","class":ya},C.minuteInterval.twoMinutes),v.h("option",{value:"3","class":ya},C.minuteInterval.threeMinutes),v.h("option",{value:"4","class":ya},C.minuteInterval.fourMinutes),v.h("option",{value:"5","class":ya},C.minuteInterval.fiveMinutes),v.h("option",{value:"10","class":ya},
C.minuteInterval.tenMinutes),v.h("option",{value:"15"},C.minuteInterval.fifteenMinutes),v.h("option",{value:"30"},C.minuteInterval.thirtyMinutes)))),v.h("div",{id:"hourForm","class":"schedule-interval-options"+(n&&"hour"===P?"":" hide")},v.h("div",{"class":"flex"},v.h("label",{"class":"full-width"},C.repeatInterval,v.h("select",{"class":"select-full scene-schedule-task__select",ref:ea},v.h("option",{value:"1"},C.hourInterval.oneHour),v.h("option",{value:"2"},C.hourInterval.twoHours),v.h("option",
{value:"3"},C.hourInterval.threeHours),v.h("option",{value:"4"},C.hourInterval.fourHours),v.h("option",{value:"6"},C.hourInterval.sixHours),v.h("option",{value:"12"},C.hourInterval.twelveHours))),v.h("label",{"class":"full-width margin-left-quarter"},C.hourOnMinute,v.h("select",{"class":"select-full scene-schedule-task__select",ref:Y},v.h("option",{value:"0"},C.hourOnMinuteInterval.minuteZero),v.h("option",{value:"5"},C.hourOnMinuteInterval.minuteFive),v.h("option",{value:"10"},C.hourOnMinuteInterval.minuteTen),
v.h("option",{value:"15"},C.hourOnMinuteInterval.minuteFifteen),v.h("option",{value:"30"},C.hourOnMinuteInterval.minuteThirty),v.h("option",{value:"45"},C.hourOnMinuteInterval.minuteFourtyFive))))),v.h("div",{id:"dayForm","class":"schedule-interval-options"+("day"===P?"":" hide")},v.h("div",{"class":"flex"},v.h("label",{"class":"full-width"},C.repeatInterval,v.h("select",{"class":"select-full scene-schedule-task__select",ref:T},v.h("option",{value:"1"},C.dayInterval.oneDay),v.h("option",{value:"2"},
C.dayInterval.twoDays),v.h("option",{value:"3"},C.dayInterval.threeDays),v.h("option",{value:"4"},C.dayInterval.fourDays),v.h("option",{value:"5"},C.dayInterval.fiveDays),v.h("option",{value:"6"},C.dayInterval.sixDays),v.h("option",{value:"7"},C.dayInterval.sevenDays),v.h("option",{value:"14"},C.dayInterval.fourteenDays))),v.h("label",{id:"schedule-time-start","for":"scheduleTimeStartDay","class":"margin-left-quarter full-width"},C.scheduleTimeStart,v.h("calcite-input-time-picker",{id:"scheduleTimeStartDay",
name:"scheduleTimeStart","class":"display-block leader-quarter",placeholder:C.scheduleTimeStartPlaceholder,scale:"l",value:Z,oncalciteInputTimePickerChange:function(Aa){W(Aa.target.value)}})))),v.h("div",{id:"weekForm","class":"flex schedule-interval-options"+("week"===P?"":" hide")},v.h("fieldset",{"class":"fieldset-checkbox half-width",ref:da},v.h("label",null,C.dayOfWeek.title),v.h("div",{"class":"checkbox-options"},v.h("div",{"class":"checkbox-options-column"},v.h("label",null," ",v.h("input",
{name:"scheduleDayOfWeek",type:"checkbox",value:"2",onChange:za}),C.dayOfWeek.monday),v.h("label",null," ",v.h("input",{name:"scheduleDayOfWeek",type:"checkbox",value:"3",onChange:za}),C.dayOfWeek.tuesday)),v.h("div",{"class":"checkbox-options-column"},v.h("label",null," ",v.h("input",{name:"scheduleDayOfWeek",type:"checkbox",value:"4",onChange:za}),C.dayOfWeek.wednesday),v.h("label",null," ",v.h("input",{name:"scheduleDayOfWeek",type:"checkbox",value:"5",onChange:za}),C.dayOfWeek.thursday)),v.h("div",
{"class":"checkbox-options-column"},v.h("label",null," ",v.h("input",{name:"scheduleDayOfWeek",type:"checkbox",value:"6",onChange:za}),C.dayOfWeek.friday),v.h("label",null," ",v.h("input",{name:"scheduleDayOfWeek",type:"checkbox",value:"7",onChange:za}),C.dayOfWeek.saturday)),v.h("div",{"class":"checkbox-options-column"},v.h("label",null," ",v.h("input",{name:"scheduleDayOfWeek",type:"checkbox",value:"1",onChange:za}),C.dayOfWeek.sunday))),v.h("div",{"class":"input-error-message",ref:ja})),v.h("label",
{id:"schedule-time-start","for":"scheduleTimeStartWeek","class":"half-width"},C.scheduleTimeStart,v.h("calcite-input-time-picker",{id:"scheduleTimeStartWeek",name:"scheduleTimeStartWeek","class":"display-block leader-quarter",placeholder:C.scheduleTimeStartPlaceholder,scale:"l",value:Q,oncalciteInputTimePickerChange:function(Aa){ia(Aa.target.value)}}))),v.h("div",{id:"monthForm","class":"schedule-interval-options"+("month"===P?"":" hide")},v.h("div",{"class":"flex"},v.h("label",{"class":"full-width",
"for":"dayOfMonth"},C.dayOfMonth,v.h("input",{type:"text",id:"dayOfMonth","class":"scene-schedule-task__input",placeholder:C.dayOfMonthPlaceholder,ref:M,onChange:function(){q["default"].clearState([M.current,U.current])}}),v.h("div",{"class":"input-error-message",ref:U})),v.h("label",{"class":"full-width margin-left-quarter"},C.repeatInterval,v.h("select",{"class":"select-full scene-schedule-task__select",ref:ca},v.h("option",{value:"1"},C.monthInterval.oneMonth),v.h("option",{value:"2"},C.monthInterval.twoMonths),
v.h("option",{value:"3"},C.monthInterval.threeMonths),v.h("option",{value:"4"},C.monthInterval.fourMonths),v.h("option",{value:"5"},C.monthInterval.fiveMonths),v.h("option",{value:"6"},C.monthInterval.sixMonths)))),v.h("div",null,v.h("label",{id:"schedule-time-start","for":"scheduleTimeStartMonth","class":"half-width"},C.scheduleTimeStart,v.h("calcite-input-time-picker",{id:"scheduleTimeStartMonth",name:"scheduleTimeStart","class":"display-block leader-quarter",placeholder:C.scheduleTimeStartPlaceholder,
scale:"l",value:R,oncalciteInputTimePickerChange:function(Aa){S(Aa.target.value)}}))))),v.h("div",{"class":"flex"},v.h("label",{"class":"full-width"},C.scheduleEnd,v.h("select",{"class":"select-full scene-schedule-task__select",ref:na,onChange:function(Aa){ba(Aa.target.value)}},v.h("option",{value:"never"},C.endsNever),v.h("option",{value:"date"},C.endsDate),v.h("option",{value:"count"},C.endsCount))),v.h("div",{"class":"full-width margin-left-quarter"},v.h("label",{id:"schedule-date-end","class":"schedule-date"+
("date"===V?"":" hide"),"for":"scheduleDateEnd"},C.scheduleDateEnd,v.h("calcite-input-date-picker",{ref:ua,placeholder:C.scheduleDateEnd,id:"scheduleDateEnd",name:"scheduleDateEnd","class":"leader-quarter",intlNextMonth:C.nextMonth,intlPrevMonth:C.prevMonth,scale:"l"})),v.h("label",{"class":"count"===V?"":"hide"},C.endsCount,v.h("input",{type:"number",ref:oa,name:"scheduleCountEnd","class":"scene-schedule-task__input",placeholder:C.endsCountPlaceholder,min:"1"}))))))),1<F&&!n&&1<d.length?v.h("calcite-button",
{slot:"back",appearance:"transparent",onClick:g},C.backButton):null,2>F?v.h("calcite-button",{slot:"primary",appearance:"solid",onClick:x},C.nextButton):v.h("calcite-button",{slot:"primary",appearance:"solid",onClick:qa},y?C.saveTask:C.createTaskButton),v.h("calcite-button",{slot:"secondary",appearance:"outline",onClick:u},C.cancelButton)),document.body))}})},"arcgisonline/pages/components/CreateSceneTaskModal/helpers":function(){define(["require","exports","tslib","moment/moment"],function(K,G,w,
v){Object.defineProperty(G,"__esModule",{value:!0});G.is3DObjectsWithoutUpdateEnabled=G.isPointSceneLayer=G.adjustCronDayOfMonth=G.adjustCronDayOfWeek=G.getCronTime=G.getCronIntervalValue=G.parseCronInterval=void 0;v=w.__importDefault(v);G.parseCronInterval=function(r,f){var c=(r||"").split("/");if(c=1<c.length?c[1]:null)f.value=c};G.getCronIntervalValue=function(r){r=(r||"").split("/");return 1<r.length?r[1]:null};G.getCronTime=function(r){r=v["default"](r||"12:00 AM","h:mm A");var f={minute:"0",
hour:"0",dayOffset:0};r.isValid()&&(f.hour=r.utc().format("H"),f.minute=r.utc().format("mm"),f.dayOffset=r.utc().day()-r.day());return f};G.adjustCronDayOfWeek=function(r,f){var c=parseInt(r,10);!isNaN(c)&&f&&(c+=f);7<c?c=1:1>c&&(c=7);return c.toString()};G.adjustCronDayOfMonth=function(r,f){var c=parseInt(r,10);!isNaN(c)&&f&&(c+=f);31<c?c=1:1>c&&(c=31);return c.toString()};G.isPointSceneLayer=function(r){return-1<r.typeKeywords.indexOf("Point")};G.is3DObjectsWithoutUpdateEnabled=function(r){var f=
(r.serviceInfo.layers||[]).some(function(c){return!0===(null===c||void 0===c?void 0:c.updateEnabled)});return-1<r.typeKeywords.indexOf("3DObject")&&!f}})},"arcgisonline/pages/components/CreateSceneTaskModal/SceneRebuildOptions":function(){define(["require","exports","tslib","preact","./LayerCheckbox"],function(K,G,w,v,r){Object.defineProperty(G,"__esModule",{value:!0});r=w.__importDefault(r);G["default"]=function(f){var c=f.canShowPartialRebuild,a=f.isPortal,b=f.rebuildType,p=f.selectedLayers,q=f.strings,
t=f.onRebuildTypeChange,m=f.onSelectedLayerChange,n=function(l){t(l.target.value)},k=function(l,h){m(l,h)};f=f.sceneLayers.map(function(l){var h=l.id,e=l.name,d=-1<p.indexOf(h);return v.h(r["default"],{key:h,id:h,name:e,checked:d,onChange:k,disabled:l.requiresRebuild})});return v.h(v.Fragment,null,v.h("div",{"class":"hide","data-dojo-attach-point":"_optionsContainer"},q.description,v.h("fieldset",{"class":"trailer-0 fieldset-checkbox leader-half padding-trailer-1"},v.h("label",null,v.h("input",{type:"radio",
name:"rebuildOption",value:"rebuildFull",onClick:n,checked:"rebuildFull"===b})," ",q.rebuildFull),a?null:v.h("label",null,v.h("input",{type:"radio",name:"rebuildOption",value:"rebuildLayers",onClick:n})," ",q.rebuildLayers),a||c?v.h("label",null,v.h("input",{type:"radio",name:"rebuildOption",value:"rebuildPartial",onClick:n,checked:"rebuildPartial"===b})," ",q.rebuildPartialCache):null,a||c?v.h("label",null,v.h("input",{type:"radio",name:"rebuildOption",value:"rebuildAttributes",onClick:n,checked:"rebuildAttributes"===
b})," ",q.rebuildAttributesCache):null)),v.h("div",null,v.h("label",{"class":"trailer-0"},q.selectLayers),v.h("div",{"class":"scene-layer-list trailer-1"},f)))}})},"arcgisonline/pages/components/CreateSceneTaskModal/LayerCheckbox":function(){define(["require","exports","preact"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G["default"]=function(v){var r=v.id,f=v.name,c=v.checked,a=v.disabled,b=v.onChange;return w.h("label",{"class":(a?"label-disabled":"")+" trailer-0"},w.h("input",
{type:"checkbox",checked:c,disabled:a,value:r,onClick:function(){b(r,!c)}})," ",f)}})},"arcgisonline/sharing/dijit/dialog/CreateTaskDlg":function(){define("require exports tslib dojo/dom-class dojo/string dojo/dom-construct dojo/on dojo/query dojo/number dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/Dialog arcgisonline/pages/pageUtil arcgisonline/pages/utils/alerts arcgisonline/pages/utils/dom arcgisonline/sharing/dijit/dialog/GeneralDlg arcgisonline/esriGeowConfig ../../../tsutils/declareDecorator moment/moment dojo/text!./templates/CreateTaskDlg.html dojo/i18n!../../../nls/arcgisonline arcgisonline/pages/utils/task arcgisonline/pages/utils/notebook".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B){Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);
x=w.__importDefault(x);B=w.__importDefault(B);K=function(){function C(z){this.templateString=r["default"].substitute(u["default"],{i18n:x["default"].CreateTaskDlg});this.currentStep=1;this.parameters={}}C.prototype.postCreate=function(){var z=this,D,E;null!==(D=e["default"].portal)&&void 0!==D&&D.isPortal||(this.minuteInterval.value="15",a["default"]("[data-hide-agol]",this.domNode).addClass("hide"));this.editMode?(this.submitButton.innerText=x["default"].CreateTaskDlg.saveTask,y.TaskUtility.getTask(this.taskId,
this.username).then(function(A){z.task=A;z.populateForm(z.task)},function(A){k["default"].showAlert("error",x["default"].CreateTaskDlg.loadTaskError)})):(this.changeDefaultTimeout(15),this.setUiDateTime(g["default"]().valueOf(),this.scheduleDateStart),this.setDateConstraints("min",this.scheduleDateEnd,new Date),(null===(E=e["default"].portal)||void 0===E?0:E.isPortal)&&this.loadFromParametersJson())};C.prototype.loadFromParametersJson=function(){var z=this;B["default"].getParametersJson(e["default"].restBaseUrl+
"/content/items/"+this.itemId+"/resources/notebook_parameters.json").then(function(D){D.initialized&&(D.parameters.forEach(function(E){"input"===E.direction&&(z.parameters[E.name]=E.defaultValue)}),z.renderParameters(z.parameters))})};C.prototype.showModal=function(){var z=this;this.dialog=new m["default"]({title:this.editMode?x["default"].CreateTaskDlg.editTask:x["default"].CreateTaskDlg.createTask,content:this.domNode,"class":"create-task-dlg",onHide:function(){var D;z.dialog.destroyRecursive();
null===(D=z.onHide)||void 0===D?void 0:D.call(z)},closable:!0});this.dialog.show().then(function(){z.addEventListeners()})};C.prototype.addEventListeners=function(){this.own(c["default"](this.cancelButton,"click",this.hideDialog.bind(this)),c["default"](this.nextButton,"click",this.goNext.bind(this)),c["default"](this.backButton,"click",this.goBack.bind(this)),c["default"](this.saveInjectedParameters,"change",this.toggleDependencies.bind(this)),c["default"](this.updatePortalItem,"change",this.toggleDependencies.bind(this)),
c["default"](this.scheduleIntervalType,"change",this.changeScheduleIntervalType.bind(this)),c["default"](this.scheduleEnds,"change",this.changeScheduleRepeatEnd.bind(this)),c["default"](this.submitButton,"click",this.saveTask.bind(this)),c["default"](this.addParameterButton,"click",this.addParameter.bind(this)),c["default"](this.scheduleDateStart,"change",this.setDateConstraints.bind(this,"min",this.scheduleDateEnd)),c["default"](this.scheduleDateEnd,"change",this.setDateConstraints.bind(this,"max",
this.scheduleDateStart)),c["default"](this.executionTimeoutInMinutes,"input",this.onExecutionTimeChange.bind(this)),c["default"](this.minuteInterval,"change",this.onMinuteIntervalChange.bind(this)),c["default"](this.hourInterval,"change",this.onHourIntervalChange.bind(this)))};C.prototype.onMinuteIntervalChange=function(z){this.changeDefaultTimeout(15<=z.target.value?z.target.value:15)};C.prototype.onHourIntervalChange=function(z){this.changeDefaultTimeout(60*z.target.value)};C.prototype.setDateConstraints=
function(z,D,E){D.constraints[z]=E};C.prototype.removeDateConstraints=function(z,D){delete D.constraints[z]};C.prototype.toggleDependencies=function(z){"updatePortalItem"===z.target.name?this.updatePortalItem.checked||(this.saveInjectedParameters.checked=!1):"saveInjectedParameters"===z.target.name&&this.saveInjectedParameters.checked&&(this.updatePortalItem.checked=!0)};C.prototype.addParameter=function(z){z=this.parameterKey.value;var D=this.parameterValue.value;z&&D?(this.parameters[z]=D,this.renderParameters(this.parameters),
this.parameterKey.value=null,this.parameterValue.value=null,this.parameterKey.focus()):k["default"].showAlert("info",x["default"].CreateTaskDlg.addParameterError)};C.prototype.updateParameterValue=function(z,D){this.parameters[z]=D.target.value};C.prototype.renderParameters=function(z){var D=this;this.parametersTableContainer.classList.add("hide");this.parametersTableBody.innerHTML=null;z=Object.keys(z);if(z.length){z.forEach(function(A){var F=f["default"].create("tr");f["default"].create("td",{innerHTML:A},
F);var H=f["default"].create("td",{},F);H=f["default"].create("input",{type:"text",value:D.parameters[A]},H);var I=f["default"].create("td",{"class":"delete-cell"},F);I=f["default"].create("button",{type:"button","class":"btn btn-red btn-small btn-delete"},I);f["default"].create("i",{"class":"icon-ui-trash no-padding"},I);D.own(c["default"](I,"click",D.removeParameter.bind(D,A)));D.own(c["default"](H,"input",D.updateParameterValue.bind(D,A)));f["default"].place(F,D.parametersTableBody)});this.parametersTableContainer.classList.remove("hide");
z=document.querySelector(".delete-cell");var E=document.querySelector(".btn-delete");z.setAttribute("style","width: "+E.offsetWidth+"px;")}};C.prototype.removeParameter=function(z){delete this.parameters[z];this.renderParameters(this.parameters)};C.prototype.goNext=function(z){z.preventDefault();this.validateStep(this.currentStep)&&this.goToStep(this.currentStep+1)};C.prototype.goBack=function(z){z.preventDefault();this.goToStep(this.currentStep-1)};C.prototype.validateStep=function(z){var D,E={valid:!0},
A=new RegExp(/^\s*$/);switch(z){case 1:if(!this.taskTitle.value||A.test(this.taskTitle.value))E=this.generateInvalidResult(x["default"].CreateTaskDlg.validation.invalidTitle);100<(null===(D=this.taskTitle.value)||void 0===D?void 0:D.length)&&(E=this.generateInvalidResult(x["default"].CreateTaskDlg.validation.invalidTitleLength));break;case 2:switch(this.scheduleIntervalType.value){case "week":document.querySelectorAll("[name\x3d'scheduleDayOfWeek']:checked").length||(E=this.generateInvalidResult(x["default"].CreateTaskDlg.validation.invalidDayOfWeek));
break;case "month":if(this.dayOfMonth.value||(E=this.generateInvalidResult(x["default"].CreateTaskDlg.validation.invalidDayOfMonth)),this.dayOfMonth.value&&(z=parseInt(this.dayOfMonth.value,10),isNaN(z)||!isNaN(z)&&(0>=z||31<z)))E=this.generateInvalidResult(x["default"].CreateTaskDlg.validation.invalidDayOfMonthValue)}!this.executionTimeoutInMinutes.value&&E.valid?E=this.generateInvalidResult(x["default"].CreateTaskDlg.duration.required):1440<parseInt(this.executionTimeoutInMinutes.value,10)&&E.valid?
E=this.generateInvalidResult(x["default"].CreateTaskDlg.duration.maxAllowed):15>parseInt(this.executionTimeoutInMinutes.value,10)&&E.valid&&(E=this.generateInvalidResult(x["default"].CreateTaskDlg.duration.minAllowed))}E.valid||n["default"].createSpecifiedDialog(h["default"]).show(E);return E.valid};C.prototype.generateInvalidResult=function(z){return{title:x["default"].generalDlg.errorDlgTitle,valid:!1,message:z}};C.prototype.goToStep=function(z){this.currentStep=z;this.changeStepIndicator(z);this.changeStepContent(z);
this.changeStepButtons(z);1===this.currentStep&&this.taskTitle.focus();2===this.currentStep&&this.scheduleDateStart.focus()};C.prototype.changeStepIndicator=function(z){a["default"](".create-step",this.domNode).removeClass("active");a["default"]("#step"+z,this.domNode).addClass("active")};C.prototype.changeStepContent=function(z){a["default"](".step-container",this.domNode).addClass("hide");a["default"](".step-"+z,this.domNode).removeClass("hide")};C.prototype.changeStepButtons=function(z){switch(z){case 1:v["default"].remove(this.nextButton,
"hide");v["default"].add(this.submitButton,"hide");v["default"].add(this.backButton,"hide");break;case 2:v["default"].add(this.nextButton,"hide"),v["default"].remove(this.submitButton,"hide"),v["default"].remove(this.backButton,"hide")}};C.prototype.changeScheduleIntervalType=function(z,D){var E;a["default"](".schedule-interval-options").addClass("hide");var A=(null===(E=null===z||void 0===z?void 0:z.target)||void 0===E?void 0:E.value)||D;"minute"===A?(v["default"].remove(this.minuteForm,"hide"),
this.changeDefaultTimeout(15)):"hour"===A?(v["default"].remove(this.hourForm,"hide"),this.changeDefaultTimeout(60)):"day"===A?(v["default"].remove(this.dayForm,"hide"),this.changeDefaultTimeout(1440)):"week"===A?(v["default"].remove(this.weekForm,"hide"),this.changeDefaultTimeout(1440)):"month"===A&&(v["default"].remove(this.monthForm,"hide"),this.changeDefaultTimeout(1440))};C.prototype.humanize=function(z,D){return z.days?1!==z.days||z.hours||z.minute?x["default"].CreateTaskDlg.duration.maxAllowed:
x["default"].CreateTaskDlg.duration.hour.replace("${hour}",b["default"].format(24)):z.hours&&z.minute?x["default"].CreateTaskDlg.duration.hourMinute.replace("${hour}",b["default"].format(z.hours)).replace("${minute}",b["default"].format(z.minute)):z.hours&&!z.minute?x["default"].CreateTaskDlg.duration.hour.replace("${hour}",b["default"].format(z.hours)):z.minute?15>z.minute?x["default"].CreateTaskDlg.duration.minAllowed:x["default"].CreateTaskDlg.duration.minutes.replace("${minute}",b["default"].format(z.minute)):
""};C.prototype.changeDefaultTimeout=function(z){this.executionTimeoutInMinutes.value=z;this.setTimeoutText(z)};C.prototype.setTimeoutText=function(z){z=g["default"].duration(z,"minutes");var D={minute:z.minutes(),hours:z.hours(),days:z.days()};this.timeoutInText.innerText=this.humanize(D,z)};C.prototype.onExecutionTimeChange=function(z){this.setTimeoutText(z.target.value)};C.prototype.changeScheduleRepeatEnd=function(z,D){z&&(D=z.target.value);switch(D){case "date":v["default"].remove(this.scheduleDateEndContainer,
"hide");v["default"].add(this.scheduleCountEndContainer,"hide");this.scheduleDateEnd.setValue(null);break;case "count":v["default"].remove(this.scheduleCountEndContainer,"hide");v["default"].add(this.scheduleDateEndContainer,"hide");break;default:v["default"].add(this.scheduleCountEndContainer,"hide"),v["default"].add(this.scheduleDateEndContainer,"hide")}this.removeDateConstraints("max",this.scheduleDateStart)};C.prototype.saveTask=function(z){var D=this;this.submitButton.setAttribute("disabled",
"disabled");z.preventDefault();this.validateStep(this.currentStep)?(z=this.createDataObject(),this.saveFunction(z,this.username).then(function(E){D.dialog.hide()},function(E){}).always(function(){D.submitButton.removeAttribute("disabled")})):this.submitButton.removeAttribute("disabled")};C.prototype.createDataObject=function(){var z,D=this.getCron();return{id:(null===(z=this.task)||void 0===z?void 0:z.id)||null,title:encodeURIComponent(this.taskTitle.value),itemId:this.itemId,startDate:this.getUiDateTime(this.scheduleDateStart.get("value"),
!0),type:"ExecuteNotebook",parameters:this.setTaskParameters(),minute:D.minute,hour:D.hour,dayOfMonth:D.dayOfMonth,month:D.month,dayOfWeek:D.dayOfWeek,maxOccurrences:"count"===this.scheduleEnds.value?parseInt(this.scheduleCountEnd.value,10):null,endDate:"date"===this.scheduleEnds.value?this.getUiDateTime(this.scheduleDateEnd.get("value")):null}};C.prototype.setCron=function(z,D){switch(D){case "minute":this.setCronForMinute(z);break;case "hour":this.setCronForHour(z);break;case "day":this.setCronForDay(z);
break;case "week":this.setCronForWeek(z);break;case "month":this.setCronForMonth(z)}};C.prototype.setCronForMinute=function(z){this.parseCronInterval(z.cronSchedule.minute||"",this.minuteInterval)};C.prototype.setCronForHour=function(z){this.hourOnMinuteInterval.value=z.cronSchedule.minute;this.parseCronInterval(z.cronSchedule.hour||"",this.hourInterval)};C.prototype.setCronForDay=function(z){this.parseCronInterval(z.cronSchedule.dayOfMonth||"",this.dayInterval);this.parseCronTime(z,this.scheduleTimeStartDay)};
C.prototype.setCronForWeek=function(z){var D=this,E=this.parseCronTime(z,this.scheduleTimeStartWeek),A=(z.cronSchedule.dayOfWeek||"").split(",");z=document.querySelectorAll("[name\x3d'scheduleDayOfWeek']");l["default"].forEachNode(z,function(F){F.checked=A.some(function(H){return D.adjustCronDayOfWeek(H,E)===F.value})})};C.prototype.setCronForMonth=function(z){var D=this.parseCronTime(z,this.scheduleTimeStartMonth);this.parseCronInterval(z.cronSchedule.month||"",this.monthInterval);this.dayOfMonth.value=
this.adjustCronDayOfMonth(z.cronSchedule.dayOfMonth,D)};C.prototype.parseCronInterval=function(z,D){var E=(z||"").split("/");if(E=1<E.length?E[1]:null)D.value=E};C.prototype.parseCronTime=function(z,D){var E=g["default"].utc(z.cronSchedule.hour+":"+z.cronSchedule.minute,"H:mm");E.isValid()&&D.set("value",E.toDate());return E.local().day()-E.utc().day()};C.prototype.getCron=function(){var z={minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"?"};switch(this.scheduleIntervalType.value){case "minute":this.getCronForMinute(z);
break;case "hour":this.getCronForHour(z);break;case "day":this.getCronForDay(z);break;case "week":this.getCronForWeek(z);break;case "month":this.getCronForMonth(z)}return z};C.prototype.getCronForMinute=function(z){z.minute="*/"+this.minuteInterval.value};C.prototype.getCronForHour=function(z){z.minute=this.hourOnMinuteInterval.value;z.hour="*/"+this.hourInterval.value};C.prototype.getCronForDay=function(z){var D=this.getCronTime(this.scheduleTimeStartDay.get("value"));z.minute=D.minute;z.hour=D.hour;
z.dayOfMonth="*/"+this.dayInterval.value};C.prototype.getCronForWeek=function(z){var D=this,E=this.getCronTime(this.scheduleTimeStartWeek.get("value")),A=document.querySelectorAll("[name\x3d'scheduleDayOfWeek']"),F=[];l["default"].forEachNode(A,function(H){H.checked&&F.push(D.adjustCronDayOfWeek(H.value,E.dayOffset))});z.minute=E.minute;z.hour=E.hour;z.dayOfWeek=F.join(",");z.dayOfMonth="?"};C.prototype.getCronForMonth=function(z){var D=this.getCronTime(this.scheduleTimeStartMonth.get("value"));z.minute=
D.minute;z.hour=D.hour;z.dayOfMonth=this.adjustCronDayOfMonth(this.dayOfMonth.value,D.dayOffset);z.month="*/"+this.monthInterval.value};C.prototype.setTaskParameters=function(){var z={updatePortalItem:this.updatePortalItem.checked,saveInjectedParameters:this.saveInjectedParameters.checked,notebookParameters:JSON.stringify(this.parameters),executionTimeoutInMinutes:this.executionTimeoutInMinutes.value};return JSON.stringify(z)};C.prototype.adjustCronDayOfWeek=function(z,D){var E=parseInt(z,10);!isNaN(E)&&
D&&(E+=D);7<E?E=1:1>E&&(E=7);return E.toString()};C.prototype.adjustCronDayOfMonth=function(z,D){var E=parseInt(z,10);!isNaN(E)&&D&&(E+=D);31<E?E=1:1>E&&(E=31);return E.toString()};C.prototype.getCronTime=function(z){z=g["default"](z||"12:00 AM","h:mm A");var D=g["default"](new Date);D.isDST()&&!z.isDST()&&(D=z.utcOffset()-D.utcOffset(),z.add(D,"m"));D={minute:"0",hour:"0",dayOffset:0};z.isValid()&&(D.hour=z.utc().format("H"),D.minute=z.utc().format("mm"),D.dayOffset=z.utc().day()-z.day());return D};
C.prototype.getUiDateTime=function(z,D){void 0===D&&(D=!1);var E=g["default"](z).startOf("day");if(D){var A=g["default"](),F=A.clone().startOf("day");A=A.diff(F,"seconds");E.add(A,"seconds")}return E.isValid()?E.valueOf():""};C.prototype.setUiDateTime=function(z,D){z&&D.set("value",new Date(z))};C.prototype.populateForm=function(z){var D,E,A;this.taskTitle.value=decodeURIComponent(z.title);this.updatePortalItem.checked=null===(D=z.parameters)||void 0===D?void 0:D.updatePortalItem;this.saveInjectedParameters.checked=
null===(E=z.parameters)||void 0===E?void 0:E.saveInjectedParameters;if(null===(A=z.parameters)||void 0===A?0:A.notebookParameters)this.parameters=JSON.parse(z.parameters.notebookParameters),this.renderParameters(this.parameters);z.cronSchedule&&(D=y.TaskUtility.parseCronIntervalType(z.cronSchedule),this.scheduleIntervalType.value=D,this.changeScheduleIntervalType(null,D),this.setCron(z,D));z.startDate&&this.setUiDateTime(z.startDate,this.scheduleDateStart);z.endDate&&(this.scheduleEnds.value="date",
this.changeScheduleRepeatEnd(null,"date"),this.setUiDateTime(z.endDate,this.scheduleDateEnd));0<z.maxOccurrences&&(this.scheduleEnds.value="count",this.changeScheduleRepeatEnd(null,"count"),this.scheduleCountEnd.value=z.maxOccurrences.toString());this.changeDefaultTimeout(z.parameters.executionTimeoutInMinutes)};C.prototype.hideDialog=function(z){z.preventDefault();this.dialog.hide()};return C=w.__decorate([d["default"](q["default"],p["default"],t["default"])],C)}();G["default"]=K})},"arcgisonline/sharing/dijit/dialog/TaskDetailsDlg":function(){define("require exports tslib dojo/dom-class dojo/dom-construct dojo/string dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/Dialog arcgisonline/tsutils/declareDecorator arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/pages/item/widgets/Notebook/PreviewOverlay dojo/text!./templates/TaskDetailsDlg.html dojo/i18n!../../../nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);return function(){function e(d){this.templateString=f["default"].substitute(l["default"],{i18n:h["default"].TaskDetailsDlg})}e.prototype.startup=
function(){var d=this;m["default"].request({url:n["default"].restBaseUrl+"community/users/"+this.username+"/tasks/"+this.taskId+"/runs"}).then(function(g){var u;d.runs=g.runs;(null===(u=g.runs)||void 0===u?0:u.length)?d.renderTaskRuns(g.runs):g.hasOwnProperty("error")?d.showError(g.error):d.showEmpty();d.addEventListeners()},function(g){d.showError(g);d.addEventListeners()})};e.prototype.showError=function(d){if(d=h["default"].TaskDetailsDlg.messages[null===d||void 0===d?void 0:d.messageCode])this.errorMessage.innerHTML=
h["default"].TaskDetailsDlg.genericError+" "+d;v["default"].remove(this.loader,"is-active");v["default"].remove(this.errorContainer,"hide")};e.prototype.showEmpty=function(){v["default"].remove(this.loader,"is-active");v["default"].remove(this.emptyContainer,"hide")};e.prototype.renderTaskRuns=function(d){var g=this;this.taskRunsTableBody.innerHTML=null;try{d.forEach(function(u){g.createRunRow(u)})}catch(u){}v["default"].remove(this.loader,"is-active");v["default"].remove(this.contentContainer,"hide");
this.dialog.resize()};e.prototype.createRunRow=function(d){var g,u,x,y=r["default"].create("tr");r["default"].create("td",{innerHTML:d.runId},y);r["default"].create("td",{innerHTML:h["default"].TaskDetailsDlg.taskRunStatus[null===(g=d.status)||void 0===g?void 0:g.toLowerCase()]||d.status},y);r["default"].create("td",{innerHTML:m["default"].toDateTimeString(d.created)},y);r["default"].create("td",{innerHTML:m["default"].toDateTimeString(d.modified)},y);g=r["default"].create("td");var B=r["default"].create("div",
{"class":"actions-cell"},g);B=r["default"].create("button",{id:"run_"+d.runId,disabled:"scheduled"===(null===(u=d.status)||void 0===u?void 0:u.toLowerCase())||"executing"===(null===(x=d.status)||void 0===x?void 0:x.toLowerCase()),type:"button","class":"btn btn-link",innerHTML:'\x3ci class\x3d"icon-ui-review"\x3e\x3c/i\x3e'},B);this.own(c["default"](B,"click",this.handlePreviewClick.bind(this,d.runId)));r["default"].place(g,y);r["default"].place(y,this.taskRunsTableBody)};e.prototype.showModal=function(){var d=
this;this.dialog=new q["default"]({title:this.taskTitle+": "+h["default"].TaskDetailsDlg.title,content:this.domNode,"class":"create-task-dlg task-details-dlg",onHide:function(){var g;d.dialog.destroyRecursive();null===(g=d.onHide)||void 0===g?void 0:g.call(d)},closable:!0});this.dialog.show()};e.prototype.handlePreviewClick=function(d,g){var u,x=null===(u=this.runs)||void 0===u?void 0:u.filter(function(y){return y.runId===d})[0];this.overlay=new k["default"]({title:this.taskTitle+": "+h["default"].TaskDetailsDlg.runResults+
" ("+d+")",constrain:!1,showActionBar:!1,isTaskRun:!0,resourceName:this.taskId+"_"+d+".json",itemId:this.itemId,result:null===x||void 0===x?void 0:x.result,onClose:function(){var y,B=g.target;B&&("I"===B.tagName&&"BUTTON"===(null===(y=B.parentElement)||void 0===y?void 0:y.tagName)&&(B=B.parentElement),B.focus())}});this.overlay.open()};e.prototype.addEventListeners=function(){this.own(c["default"](this.closeButton,"click",this.hideDialog.bind(this)))};e.prototype.hideDialog=function(d){d.preventDefault();
this.dialog.hide()};e.prototype.destroy=function(){this.inherited(arguments)};return e=w.__decorate([t["default"](b["default"],a["default"],p["default"])],e)}()})},"arcgisonline/pages/item/widgets/Notebook/PreviewOverlay":function(){define("require exports tslib dojo/i18n!../../../../nls/arcgisonline dojo/on dojo/dom-class dojo/string dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/dijit/Overlay arcgisonline/pages/utils/notebook dojo/text!./templates/PreviewOverlay.html arcgisonline/tsutils/declareDecorator".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);return function(){function n(k){this.i18n=v["default"];this.overlayContents=c["default"].substitute(t["default"],{i18n:v["default"]});this.closeOnScrimClick=!1}n.prototype.postCreate=function(){this.inherited(arguments);this._previewIframe=
this.domNode.querySelector("#notebook-preview-iframe");this._loader=this.domNode.querySelector("#notebook-preview-loader");this._errorMessage=this.domNode.querySelector("#notebook-preview-error");this._notebookResultsJson=this.domNode.querySelector("#notebook-results-json");this._notebookResults=this.domNode.querySelector("#notebook-results");this.setupEventListeners()};n.prototype.open=function(){this.inherited(arguments);this.domNode.classList.add("notebook-preview-overlay");this.initUI()};n.prototype.initUI=
function(){var k=this;q["default"].showNotebookPreview(this._previewIframe,this.itemId,this.resourceName).then(function(l){l.success?(f["default"].remove(k._errorMessage,"is-active"),f["default"].remove(k._previewIframe,"hide")):!l.success&&k.result?k.showResult(k.result):k.showError(l.error)},function(l){k.showError(l)})};n.prototype.showResult=function(k){var l=void 0;try{l=JSON.parse(k)}catch(h){l=k}this._notebookResultsJson.innerHTML=JSON.stringify({result:l},null,2);f["default"].remove(this._loader,
"is-active");f["default"].remove(this._notebookResults,"hide")};n.prototype.showError=function(k){if(this.isTaskRun){if(k=this.i18n.TaskDetailsDlg.messages[null===k||void 0===k?void 0:k.messageCode])this._errorMessage.innerHTML=this.i18n.TaskDetailsDlg.genericError+" "+k}else{var l=this.i18n.itemProperties,h=l.previewError404;l=l.previewError;k=404===(null===k||void 0===k?void 0:k.code)?h:l;this._errorMessage.innerHTML=k}f["default"].remove(this._loader,"is-active");f["default"].add(this._errorMessage,
"is-active")};n.prototype.setupEventListeners=function(){var k=this;this.own(r["default"](this._previewIframe,"load",function(){f["default"].remove(k._loader,"is-active");k._previewIframe.style.display="inherit";k._previewIframe.height=k._previewIframe.contentWindow.document.body.scrollHeight+50+"px"}))};n.prototype.close=function(){this.inherited(arguments);null===this||void 0===this?void 0:this.onClose()};return n=w.__decorate([m["default"](b["default"],a["default"],p["default"])],n)}()})},"arcgisonline/pages/item/widgets/typeOptions/image":function(){define("require exports tslib ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/_base/lang dojo/on dojo/sniff dojo/Deferred dojo/text!./image.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);return function(){function l(h,e){this.templateString=k["default"];this.BUILD_CACHE_ACTION="buildCache";this.STATUS_SUBMITTED="SUBMITTED";this.STATUS_PROCESSING="PROCESSING";this.TEN_SECONDS=
1E4}l.prototype.destroy=function(){this.inherited(arguments);this._cacheStatusHandle&&(clearInterval(this._cacheStatusHandle),this._cacheStatusHandle=void 0)};l.prototype._initHandlers=function(){this.own(t["default"](this.page,"service-info-change",q["default"].hitch(this,"reset")))};l.prototype.performActions=function(){var h=new n["default"],e=v["default"].getHashParts();e=f["default"].includes(e,this.BUILD_CACHE_ACTION);this.item.isHostedService&&e&&!this._cacheBuilt&&this.item.portal.isPortal?
this._buildImageCache().then(function(){return h.resolve()}):h.resolve();return h};l.prototype.reset=function(){var h=this,e=new n["default"];this._cacheBuilt?e.resolve():this.page.fetchAdminServiceInfo(this.item).then(function(d){h._monitorCacheStatus(d);e.resolve()},function(d){e.resolve()});return e};l.prototype._buildImageCache=function(){var h=this,e=new n["default"],d=this.item.portal.isPortal,g=this.item.serviceInfo,u=this.item.adminServiceInfo,x=!(null===u||void 0===u||!u.minLOD)&&!(null===
u||void 0===u||!u.maxLOD),y=(d?g:u).fullExtent,B=[],C=this.item.url.replace("/rest/","/rest/admin/")+"/updateTiles",z;for(z=0;z<g.tileInfo.lods.length;z++){var D=g.tileInfo.lods[z];x?D.level>=u.minLOD&&D.level<=u.maxLOD&&B.push(D.level):D.scale<=u.minScale&&D.scale>=u.maxScale&&B.push(D.level)}9>=m["default"]("ie")&&(g=C.indexOf("admin/services/"),u=C.indexOf("/MapServer"),C=""+C.substring(0,g+15)+encodeURIComponent(C.substring(g+15,u))+C.substring(u));d&&(C=C.replace("/ImageServer",".ImageServer"));
y={levels:B.join(","),extent:[y.xmin,y.ymin,y.xmax,y.ymax].join()};d?e.resolve():a["default"].request({url:C,content:y},{usePost:!0}).then(function(){setTimeout(function(){e.resolve();h.page._item.set("serviceChanged",!0)},h.TEN_SECONDS)},function(E){e.resolve()});return e};l.prototype._showCaching=function(h){(this._cachingInProgress=h)?(c["default"].activateNode(this._caching),c["default"].showNode(this._imageContainer)):(c["default"].hideNode(this._imageContainer),c["default"].deactivateNode(this._caching));
this.isHidden=!this._cachingInProgress};l.prototype._isCacheBuilding=function(h){return h&&(h.cacheExecutionStatus===this.STATUS_PROCESSING||h.cacheExecutionStatus===this.STATUS_SUBMITTED)};l.prototype._monitorCacheStatus=function(h){var e=this;this._isCacheBuilding(h)?(this._showCaching(!0),this._cacheStatusHandle=setInterval(function(){return e._checkCacheStatus()},this.TEN_SECONDS)):(this._cacheBuilt=!0,this._showCaching(!1))};l.prototype._checkCacheStatus=function(){var h=this;this.page.fetchAdminServiceInfo(this.item).then(function(e){h._isCacheBuilding(e)||
h._cleanupCacheMonitor()},function(e){h._cleanupCacheMonitor()})};l.prototype._cleanupCacheMonitor=function(){this._showCaching(!1);this._cacheStatusHandle&&(clearInterval(this._cacheStatusHandle),this._cacheStatusHandle=void 0,this.page._item.set("serviceChanged",!0))};return l=w.__decorate([b["default"](r["default"],p["default"])],l)}()})},"arcgisonline/pages/item/widgets/typeOptions/appsettings":function(){define("require exports tslib ../../../../esriGeowConfig ../../../portal/PortalItem ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../utils/icons ../../../utils/clone ../../../../sharing/util dojo/text!./appsettings.html dijit/_TemplatedMixin dojo/on dojo/query dojo/topic dojo/Stateful dojo/Deferred dojo/promise/all esri/lang ../../../../tsutils/declareDecorator ../../../components/LayerSearch preact".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);
return function(){function C(z,D){this.templateString=m["default"];this.icons=p["default"];this.COLLECTOR="Collector";this.COLLECTOR_DISABLED="CollectorDisabled";this.FIELD_MAPS_DISABLED="FieldMapsDisabled";this.SUPPORTED_TYPES=["Web Map","Web Scene"];this.WEB_SCENE="Web Scene";this.DEFAULT_SEARCH_PROPS={enabled:!0,disablePlaceFinder:!1,layers:[],hintText:""}}C.prototype.destroy=function(){this._removeGridHandlers();this.inherited(arguments)};C.prototype._initHandlers=function(){this.DEFAULT_SEARCH_PROPS.hintText=
this.i18n.itemProperties.findPlace;a["default"].includes(this.SUPPORTED_TYPES,this.item.type)&&this.own(h["default"].subscribe("item-data/change",this._refreshItemData.bind(this)));this.item.isAppCollector&&(this._appCollectorPropsInitialized=!1);this.showHideFeatureSearch=this.showHideFeatureSearch.bind(this)};C.prototype.retrievePropertyValues=function(){var z={};this.item.isAppCollector&&(z.applicationProperties=this._getApplicationProperties());return z};C.prototype.hasChanges=function(){return this._appPropertiesChanged||
this._collectorChanged||this.fieldmapsChanged};C.prototype.save=function(){var z,D,E,A,F=new d["default"],H={};if(this.item.isAppCollector&&this._appPropertiesChanged){var I=this._getApplicationProperties(),L="Web Map"===this.item.type;(null===(D=null===(z=I.viewing.search)||void 0===z?void 0:z.layers)||void 0===D?0:D.length)&&L&&this.updateLayersIndexes(I.viewing.search.layers);(null===(A=null===(E=I.viewing.search)||void 0===E?void 0:E.tables)||void 0===A?0:A.length)&&L&&this.updateLayersIndexes(I.viewing.search.tables);
H.applicationProperties=I}this.item.useInCollector?this._opCollector.checked||(H.addTypeKeywords=[this.COLLECTOR_DISABLED],H.removeTypeKeywords=[this.COLLECTOR]):this.item.disableInCollector&&this._opCollector.checked&&(H.addTypeKeywords=[this.COLLECTOR],H.removeTypeKeywords=[this.COLLECTOR_DISABLED]);this.opFieldMaps.checked?H.removeTypeKeywords=w.__spreadArray(w.__spreadArray([],H.removeTypeKeywords||[]),[this.FIELD_MAPS_DISABLED]):H.addTypeKeywords=w.__spreadArray(w.__spreadArray([],H.addTypeKeywords||
[]),[this.FIELD_MAPS_DISABLED]);F.resolve({changed:{},toChange:H});return F};C.prototype.reset=function(){var z=new d["default"];this.item.isAppCollector&&(this._applicationProperties=this._readApplicationProperties(),this._resettingAppProperties=!0,this._resetApplicationProperties(this._applicationProperties),this._initAppCollectorProperties());z.resolve();return z};C.prototype.updateLayersIndexes=function(z){return w.__awaiter(this,void 0,void 0,function(){var D,E,A,F,H,I=this;return w.__generator(this,
function(L){switch(L.label){case 0:return D={},z.forEach(function(J){var O,P;D[J.id]||(D[J.id]=[]);((null===(O=I.layersInfo[J.id])||void 0===O?void 0:O.indexes)||(null===(P=I.tablesInfo[J.id])||void 0===P?void 0:P.indexes)||[]).some(function(fa){return fa.fields===J.field.name})||D[J.id].push(J.field)}),E=[],Object.keys(D).forEach(function(J){var O=D[J],P=I.layers.filter(function(fa){return fa.value===J})[0];P||(P=I.tables.filter(function(fa){return fa.value===J})[0]);O.length&&P.layer.itemId&&E.push({id:J,
itemId:P.layer.itemId,url:P.layer.url,fields:O})}),[4,Promise.all(E.map(function(J){return t["default"].request({url:v["default"].restBaseUrl+"content/items/"+J.itemId})}))];case 1:return A=L.sent(),E.forEach(function(J){var O=A.filter(function(P){return P.id===J.itemId})[0];if(!O)return!1;O=new r["default"](w.__assign(w.__assign({},O),{portal:I.page.portal}));J.portalItem=O;-1<O.typeKeywords.indexOf("View Service")&&(J.isView=!0)}),F=E.filter(function(J){return J.isView}),[4,Promise.all(F.map(function(J){return J.portalItem.getRelatedItems("Service2Service",
"reverse")}))];case 2:return H=L.sent(),H.forEach(function(J,O){var P=null===J||void 0===J?void 0:J.filter(function(fa){return-1<fa.typeKeywords.indexOf("Hosted Service")})[0];P&&(F[O].parentServiceUrl=P.url+"/"+I.layersInfo[F[O].id].id)}),E=E.filter(function(J){return J.portalItem.canUpdate&&(!J.isView||J.parentServiceUrl)}),[4,Promise.all(E.map(function(J){return I.updateLayerIndexes(J)}))];case 3:return L.sent(),[2]}})})};C.prototype.updateLayerIndexes=function(z){return w.__awaiter(this,void 0,
void 0,function(){var D,E;return w.__generator(this,function(A){switch(A.label){case 0:D={indexes:[]},z.fields.forEach(function(F){D.indexes.push({name:F.name+"_Index",fields:F.name,isUnique:!1,isAscending:!0,description:F.name+"_Index"})}),A.label=1;case 1:return A.trys.push([1,3,,4]),E=z.isView?z.parentServiceUrl:z.url,[4,t["default"].request({url:E.replace("/rest/services","/rest/admin/services")+"/addToDefinition",content:{async:!0,addToDefinition:JSON.stringify(D)}},{usePost:!0})];case 2:return A.sent(),
this.layersInfo[z.id]&&(this.layersInfo[z.id].indexes=w.__spreadArray(w.__spreadArray([],this.layersInfo[z.id].indexes||[]),D.indexes)),this.tablesInfo[z.id]&&(this.tablesInfo[z.id].indexes=w.__spreadArray(w.__spreadArray([],this.tablesInfo[z.id].indexes||[]),D.indexes)),[3,4];case 3:return A.sent(),[3,4];case 4:return[2]}})})};C.prototype._readApplicationProperties=function(){var z,D=null===(z=this.item.itemData)||void 0===z?void 0:z.applicationProperties;return D?q["default"](D):{}};C.prototype._getApplicationProperties=
function(){var z,D,E=this._readApplicationProperties(),A=E.editing,F=E.viewing;E=w.__assign(w.__assign({},E),{viewing:F});this.item.type===this.WEB_SCENE&&F&&(delete F.routing,delete F.measure,delete F.basemapGallery);A&&(A.locationTracking=w.__assign(w.__assign({},A.locationTracking||{}),{enabled:b["default"].isChecked(this._opTracking)}),A.locationTracking&&(A.locationTracking.info=w.__assign(w.__assign({},A.locationTracking.info||{}),{updateInterval:this._opTrackingSelect.value})),E=w.__assign(w.__assign({},
E),{editing:A}));if(0<this._searchLayers.length||0<this._searchTables.length)E.viewing=E.viewing||{},E.viewing.search=this._getFindLocationJson(),A=(null===(z=E.viewing.search.layers)||void 0===z?void 0:z.length)||0,z=(null===(D=E.viewing.search.tables)||void 0===D?void 0:D.length)||0,this.item.type===this.WEB_SCENE&&0===A&&0===z&&(E.viewing.search.hintText===this.i18n.itemProperties.findPlace?E={}:(delete E.viewing.search.layers,delete E.viewing.search.tables));return E};C.prototype._resetApplicationProperties=
function(z){var D=this,E,A,F,H,I;a["default"].includes(this.item.typeKeywords,this.COLLECTOR)||a["default"].includes(this.item.typeKeywords,this.COLLECTOR_DISABLED)?this._opCollector.checked=this.item.useInCollector:b["default"].hideNode(this._opCollectorContainer);this.opFieldMaps.checked=-1===this.item.typeKeywords.indexOf(this.FIELD_MAPS_DISABLED);var L=z.viewing;z=z.editing;L=(null===L||void 0===L?void 0:L.search)||w.__assign({},this.DEFAULT_SEARCH_PROPS);var J=[],O;z?(b["default"].checkNode(this._opTracking,
z.locationTracking&&z.locationTracking.enabled),b["default"].disableNode(this._opTrackingSelect,!b["default"].isChecked(this._opTracking)),z.locationTracking.info&&b["default"].selectOption(this._opTrackingSelect.options,z.locationTracking.info.updateInterval||300)):l["default"](".opTracking").forEach(b["default"].hideNode);this._searchProps=L;this._opFindLocations.checked=this.item.type===this.WEB_SCENE?!(!this._searchProps.enabled||!(0<(null===(E=this._searchProps.layers)||void 0===E?void 0:E.length)||
0<(null===(A=this._searchProps.tables)||void 0===A?void 0:A.length))):!!this._searchProps.enabled;b["default"].checkNode(this._opByLayer,!(null===(F=this._searchProps.layers)||void 0===F||!F.length));b["default"].showHideAll(b["default"].nodeListToArray(this.domNode.querySelectorAll(".byLayerDiv")),this._opByLayer.checked);b["default"].checkNode(this._opByTable,!(null===(H=this._searchProps.tables)||void 0===H||!H.length));b["default"].showHideAll(b["default"].nodeListToArray(this.domNode.querySelectorAll(".byTableDiv")),
this._opByTable.checked);b["default"].checkNode(this._opByAddress,!1===this._searchProps.disablePlaceFinder);b["default"].showHideAll(b["default"].querySelectorAllAsArray(".opFindLocationsDiv",this.domNode),this._searchProps.enabled);this._opFindLocationsLink.innerHTML=this._searchProps.enabled?this.i18n.customRoles.contract:this.i18n.customRoles.expand;this._opFindLocationsLink.setAttribute("aria-expanded",this._searchProps.enabled?"true":"false");this._opFindLocationsContainer.setAttribute("aria-hidden",
this._searchProps.enabled?"false":"true");this._opFindLocationsHintText.value=(null===(I=this._searchProps)||void 0===I?void 0:I.hintText)||"";this._searchTables=(this._searchProps.tables||[]).map(function(P,fa){O=""+P.id;return{searchTableId:""+O+fa,id:O,table:O,exactMatch:P.field.exactMatch?"true":"false",field:w.__assign(w.__assign({},P.field),{value:P.field.name,label:P.field.name})}});this._searchLayers=(this._searchProps.layers||[]).map(function(P,fa){var V=P.subLayer;u["default"].isDefined(V)&&
(V=isNaN(parseInt(V,10))?null:parseInt(V,10));O=""+P.id+(u["default"].isDefined(V)?"#"+V:"");return{searchLayerId:""+P.id+fa,id:O,layer:O,exactMatch:P.field.exactMatch?"true":"false",field:w.__assign(w.__assign({},P.field),{value:P.field.name,label:P.field.alias||P.field.name})}});this._tableFieldsGridStore&&this._tableFieldsGridStore.query().forEach(function(P){D._tableFieldsGridStore.remove(P.searchTableId)});this._fieldsGridStore&&this._fieldsGridStore.query().forEach(function(P){D._fieldsGridStore.remove(P.searchLayerId)});
l["default"](".opSetting").forEach(function(P){!0===b["default"].isChecked(P)&&"opFindLocations"!==P.name&&J.push(P.dataset.label)})};C.prototype._getFindLocationJson=function(){var z={enabled:this._opFindLocations.checked,disablePlaceFinder:!b["default"].isChecked(this._opByAddress),hintText:this._opFindLocationsHintText.value||null,layers:[],tables:[]},D=function(L,J){return z.layers.filter(function(O){return O.id===L}).some(function(O){return O.field.name===J})},E=function(L,J){return z.tables.filter(function(O){return O.id===
L}).some(function(O){return O.field.name===J})},A,F,H,I;this.item.type===this.WEB_SCENE&&delete z.disablePlaceFinder;this._searchLayers&&b["default"].isChecked(this._opByLayer)&&this._searchLayers.forEach(function(L){D(L.layer,L.field.name)||(A=L.field,I=L.layer.split("#"),F={id:I[0],field:{name:A.name,exactMatch:"true"===L.exactMatch,type:A.type}},1<I.length&&(F.subLayer=parseInt(I[I.length-1],10)),z.layers.push(F))});this._searchTables&&b["default"].isChecked(this._opByTable)&&this._searchTables.forEach(function(L){E(L.table,
L.field.name)||(A=L.field,I=L.table,H={id:I,field:{name:A.name,exactMatch:"true"===L.exactMatch,type:A.type}},z.tables.push(H))});return z};C.prototype._removeGridHandlers=function(){var z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la;null===(D=null===(z=this._observationHandle)||void 0===z?void 0:z.cancel)||void 0===D?void 0:D.call(z);null===(A=null===(E=this._gridDataChangeHandle)||void 0===E?void 0:E.remove)||void 0===A?void 0:A.call(E);null===(H=null===(F=this._gridCellClickHandle)||void 0===F?void 0:F.remove)||
void 0===H?void 0:H.call(F);null===(L=null===(I=this._removeRowHandle)||void 0===I?void 0:I.remove)||void 0===L?void 0:L.call(I);null===(O=null===(J=this._tableObservationHandle)||void 0===J?void 0:J.cancel)||void 0===O?void 0:O.call(J);null===(fa=null===(P=this._tableGridDataChangeHandle)||void 0===P?void 0:P.remove)||void 0===fa?void 0:fa.call(P);null===(ba=null===(V=this._tableGridCellClickHandle)||void 0===V?void 0:V.remove)||void 0===ba?void 0:ba.call(V);null===(la=null===(ka=this._tableRemoveRowHandle)||
void 0===ka?void 0:ka.remove)||void 0===la?void 0:la.call(ka)};C.prototype.showHideFeatureSearch=function(){var z,D,E=(null===(z=this._tableOptions)||void 0===z?void 0:z.length)||0;z=(null===(D=this._layerOptions)||void 0===D?void 0:D.length)||0;E||z?(l["default"](".opFindLocations",this.domNode).forEach(b["default"].showNode),b["default"].showNode(this.domNode.querySelector(".js-find-loc-label")),b["default"].showHide(this._opByLayerContainer,0<z),b["default"].showHide(this._opByTableContainer,0<
E)):(l["default"](".opFindLocations",this.domNode).forEach(b["default"].hideNode),b["default"].hideNode(this.domNode.querySelector(".js-find-loc-label")),this.item.type===this.WEB_SCENE&&(this._hideOpContainer=!0,b["default"].hideNode(this._opContainer),this.isHidden=!0,this._emitHideLastHR(),this.emitHideEmptyOptions()))};C.prototype._initAppCollectorProperties=function(){var z=this;this.item.type===this.WEB_SCENE&&(this._opSummary.innerHTML=this.i18n.itemProperties.operationsCollectorSceneSummary);
this._createFieldsGrid().then(this.showHideFeatureSearch);if(!this._appCollectorPropsInitialized){var D=this._handleAppCollectorPropertyChange.bind(this),E=this._handleHintTextChange.bind(this),A=this._handleFieldChange.bind(this);this.own(k["default"](this._opCollector,"change",this._handleCollectorCheckboxChange.bind(this)),k["default"](this.opFieldMaps,"change",this.handleFieldMapsCheckboxChange.bind(this)),k["default"](this._opFindLocations,"change",this._findLocationsClick.bind(this)),k["default"](this._opFindLocationsHintText,
"change",E),k["default"](this._opByAddress,"change",D),k["default"](this._opTracking,"change",D),k["default"](this._opTracking,"click",this._handleOpTrackingClick.bind(this)),k["default"](this._opTrackingSelect,"change",D),f["default"].registerKeystrokeHandler(this._opFindLocationsHintText,E),k["default"](this._opFindLocationsLink,"click",this._handleExpandContractClick.bind(this)),k["default"](this._addFieldBtn,"click",this._addFieldClick.bind(this)),k["default"](this._addTableFieldBtn,"click",this._addTableFieldClick.bind(this)),
k["default"](this._opByLayer,"click",function(){var F,H;b["default"].showHideAll(b["default"].nodeListToArray(z.domNode.querySelectorAll(".byLayerDiv")),z._opByLayer.checked);(null===(F=z._searchProps.layers)||void 0===F?0:F.length)?D():0===(null===(H=z._layerSearch.props.searchLayers)||void 0===H?void 0:H.length)&&z._opByLayer.checked&&z._addFieldBtn.click()}),k["default"](this._opByTable,"click",function(){var F,H;b["default"].showHideAll(b["default"].nodeListToArray(z.domNode.querySelectorAll(".byTableDiv")),
z._opByTable.checked);(null===(F=z._searchProps.tables)||void 0===F?0:F.length)?D():0===(null===(H=z._tableSearch.props.searchLayers)||void 0===H?void 0:H.length)&&z._opByTable.checked&&z._addTableFieldBtn.click()}),h["default"].subscribe("by-layer/field-change",A),h["default"].subscribe("by-table/field-change",A));b["default"].showHide(this._opContainer,!this._hideOpContainer);this._hideOpContainer||(this.isHidden=!1,this._emitHideLastHR());this._appCollectorPropsInitialized=!0}};C.prototype._getMapServerLayers=
function(z){return t["default"].request({url:z},{addToken:!1})};C.prototype._getRelatedServiceItems=function(z){var D=this,E=new d["default"],A,F;t["default"].request({url:v["default"].restBaseUrl+"content/items/"+z+"/relatedItems",content:{relationshipType:"Service2Service",direction:"reverse"}}).then(function(H){F=(A=(H&&H.relatedItems?H.relatedItems:H||[]).map(function(I){return new r["default"](w.__assign(w.__assign({},I),{portal:D.page.portal}))}))||[];E.resolve((null===F||void 0===F?0:F.length)?
F.slice(0):F)},function(){E.resolve([])});return E};C.prototype.processGroupLayer=function(z,D){var E=this,A=new d["default"],F=[];D.layers.forEach(function(H){H.layers&&"GroupLayer"===H.layerType?F.push(E.processGroupLayer(z,H)):F.push(E.processLayer(z,H))});g["default"](F).then(function(){A.resolve()},function(){A.resolve()});return A};C.prototype.processMapServerLayers=function(z,D){var E=this,A=new d["default"];this._getMapServerLayers(D.url).then(function(F){var H;-1<(null===(H=null===F||void 0===
F?void 0:F.capabilities)||void 0===H?void 0:H.indexOf("Query"))?t["default"].request({url:D.url+"/layers"},{addToken:!1}).then(function(I){I.layers.forEach(function(L){E._getLayerFields(z,D,L,!0)});A.resolve()},function(){A.resolve()}):A.resolve()},function(){A.resolve()});return A};C.prototype.processAcceptedLayer=function(z,D){var E=this,A=new d["default"];t["default"].request({url:D.url},{addToken:!1}).then(function(F){E._getLayerFields(z,D,F);A.resolve()},function(){A.resolve()});return A};C.prototype.checkSubLayers=
function(z,D){var E=this,A=new d["default"],F=this.isBuildingSceneLayer(z),H=this.isSceneLayer(z);if(!F&&!H)return A.resolve(),A;var I=z.url,L=/\/layers\/([0-9]+)$/i;H&&L.test(I)&&(I=I.substring(0,I.indexOf("/layers/")));t["default"].request({url:I}).then(function(J){return H?1.7>parseFloat(null===J||void 0===J?void 0:J.serviceVersion)?[]:E.flattenSublayers(J):E.flattenSublayers(J)},function(){A.resolve()}).then(function(J){g["default"](J.map(function(O){return t["default"].request({url:I+"/"+(F?
"sublayers":"layers")+"/"+O.id})})).then(function(O){D.layers.forEach(function(P){var fa=O.filter(function(V){return V.associatedLayerID===P.id})[0];fa&&(P.id=fa.id)});A.resolve()},function(){A.resolve()})},function(){A.resolve()});return A};C.prototype.flattenSublayers=function(z){var D=this,E,A=[];null===(E=z[z.sublayers?"sublayers":"layers"])||void 0===E?void 0:E.forEach(function(F){"group"===F.layerType?A=A.concat(D.flattenSublayers(F)):A.push(F)});return A};C.prototype.processSceneLayer=function(z,
D){var E=this,A=new d["default"],F=/\/((MapServer|FeatureServer)\/([0-9]+)$).*/gi,H=/\/((FeatureServer)).*/gi,I=!1,L=function(){A.resolve()};this._getRelatedServiceItems(D.itemId).then(function(J){(null===J||void 0===J?0:J.length)?J.forEach(function(O){var P;(I=!(null===(P=O.url)||void 0===P||!P.match(H)))&&!O.url.match(F)?E._getMapServerLayers(O.url).then(function(fa){var V;if(-1<(null===(V=null===fa||void 0===fa?void 0:fa.capabilities)||void 0===V?void 0:V.indexOf("Query"))){var ba=new d["default"];
t["default"].request({url:O.url+"/layers"},{addToken:!1}).then(function(ka){var la=/\/layers\/([0-9]+)$/i;if(la.test(D.url))try{var ma=parseInt(D.url.match(la)[1],10)}catch(Z){ma=void 0}var ha=u["default"].isDefined(ma);E.checkSubLayers(D,ka).then(function(){ka.layers.forEach(function(Z){ha&&Z.id===ma&&!E.isBuildingSceneLayer(D)?(E._getLayerFields(z,D,Z,!0),ba.resolve()):ha&&1===ka.layers.length?(E._getLayerFields(z,D,Z,!0),ba.resolve()):ha&&!E.isBuildingSceneLayer(D)||E._getLayerFields(z,D,Z,!0)});
ba.resolve()},function(){ba.resolve()})},function(){ba.resolve()});ba.then(L,L)}else L()},function(){L()}):O.url&&(O.url.match(F)||I)?(P=D.url.indexOf("/layers/"),-1<P?t["default"].request({url:""+O.url+"/layers/"+D.url.substring(P+8)},{addToken:!1}).then(function(fa){E._getLayerFields(z,O,fa);L()},function(){L()}):L()):L()}):L()},function(){L()});return A};C.prototype.processTable=function(z,D){var E,A=new d["default"],F=/\/(FeatureServer\/([0-9]+)$).*/gi;F=!(null===(E=D.url)||void 0===E||!E.match(F));
E=function(){A.resolve()};D.url&&F?this.processAcceptedTableLayer(z,D).then(E,E):E();return A};C.prototype.processAcceptedTableLayer=function(z,D){var E=this,A=new d["default"];t["default"].request({url:D.url},{addToken:!1}).then(function(F){E._getTableFields(z,D,F);A.resolve()},function(){A.resolve()});return A};C.prototype.processLayer=function(z,D){var E,A,F=new d["default"],H=/\/((MapServer|FeatureServer)\/([0-9]+)$).*/gi,I=/\/((MapServer)).*/gi,L=/\/((SceneServer)).*/gi,J=!1,O=!1,P=function(){F.resolve()};
J=!(null===(E=D.url)||void 0===E||!E.match(I));O=!(null===(A=D.url)||void 0===A||!A.match(L));J&&!D.url.match(H)?this.processMapServerLayers(z,D).then(P,P):D.url&&(D.url.match(H)||J)?this.processAcceptedLayer(z,D).then(P,P):O&&D.itemId?this.processSceneLayer(z,D).then(P,P):P();return F};C.prototype._getTableFields=function(z,D,E,A){var F=this;this.tablesInfo||(this.tablesInfo={});this.tablesInfo[D.id]||(this.tablesInfo[D.id]=E);var H=""+D.id+(A?"#"+E.id:""),I={esriFieldTypeSmallInteger:1,esriFieldTypeInteger:1,
esriFieldTypeString:1};A=u["default"].isDefined(A);this._findTableFields.set(H,[]);-1<(null===E||void 0===E?void 0:E.capabilities.indexOf("Query"))&&"Table"===E.type&&((E.fields||[]).forEach(function(L){if(L&&!0===L.type in I&&!L.domain){var J=F._findTableFields.get(H);J.push({label:L.name,value:L.name,name:L.name,type:L.type});F._findTableFields.set(H,J)}}),this._findTableFields.get(H)&&this._findTableFields.get(H).length&&(D={label:A?E.name:D.title||E.name,value:H,layer:A?E:D},A&&(D.subLayer=parseInt(E.id,
10)),z.push(D)))};C.prototype._getLayerFields=function(z,D,E,A){var F=this;this.layersInfo||(this.layersInfo={});this.layersInfo[D.id]||(this.layersInfo[D.id]=E);var H=""+D.id+(A?"#"+E.id:""),I={esriFieldTypeSmallInteger:1,esriFieldTypeInteger:1,esriFieldTypeString:1};A=u["default"].isDefined(A);this._findFields.set(H,[]);-1<(null===E||void 0===E?void 0:E.capabilities.indexOf("Query"))&&"Feature Layer"===E.type&&((E.fields||[]).forEach(function(L){if(L&&!0===L.type in I&&!L.domain){var J=F._findFields.get(H);
J.push({label:L.alias||L.name,value:L.name,name:L.name,type:L.type});F._findFields.set(H,J)}}),this._findFields.get(H)&&this._findFields.get(H).length&&(D={label:A?E.name:D.title||E.name,value:H,layer:A?E:D},A&&(D.subLayer=parseInt(E.id,10)),z.push(D)))};C.prototype.isSceneLayer=function(z){return"ArcGISSceneServiceLayer"===z.layerType};C.prototype.isBuildingSceneLayer=function(z){return"BuildingSceneLayer"===z.layerType};C.prototype._createFieldsGrid=function(){var z=this,D=new d["default"];if(!this.item.itemData)return D.resolve(),
D;var E=w.__assign({},this.item.itemData),A=E.operationalLayers||[];E=E.tables||[];var F=[],H=[],I=[],L=[];this._findFields=new e["default"]({});this._findTableFields=new e["default"]({});A.forEach(function(J){F.push(J.layers&&"GroupLayer"===J.layerType?z.processGroupLayer(I,J):z.processLayer(I,J))});E.forEach(function(J){H.push(z.processTable(L,J))});g["default"](w.__spreadArray(w.__spreadArray([],F),H)).then(function(){if(null===L||void 0===L?0:L.length)z.tables=L,l["default"](".opFindRecords",
z.domNode).forEach(b["default"].showNode),z._tableOptions=L.map(function(J){var O;return w.__assign(w.__assign({},J),{layer:w.__assign(w.__assign({},J.layer),{fields:null===(O=z._findTableFields.get(J.value))||void 0===O?void 0:O.map(function(P){return w.__assign({},P)})})})}),z._tableSearchContainer||(z._tableSearchContainer=document.createElement("div"),z._opFindRecordsGrid.insertAdjacentElement("afterend",z._tableSearchContainer),z._tableSearch=B.h(y["default"],{layers:z._tableOptions,searchLayers:z._searchTables,
mode:"tables",strings:{contains:z.i18n.itemProperties.contains,equals:z.i18n.itemProperties.equals},save:function(){z._resettingAppProperties||h["default"].publish("by-table/field-change",{changed:!0})}}),B.render(z._tableSearch,z._tableSearchContainer));if(null===I||void 0===I?0:I.length)z.layers=I,l["default"](".opFindLocations",z.domNode).forEach(b["default"].showNode),z._layerOptions=I.map(function(J){var O;return w.__assign(w.__assign({},J),{layer:w.__assign(w.__assign({},J.layer),{fields:null===
(O=z._findFields.get(J.value))||void 0===O?void 0:O.map(function(P){return w.__assign({},P)})})})}),z._layerSearchContainer||(z._layerSearchContainer=document.createElement("div"),z._opFindLocationsGrid.insertAdjacentElement("afterend",z._layerSearchContainer),z._layerSearch=B.h(y["default"],{layers:z._layerOptions,searchLayers:z._searchLayers,mode:"layers",strings:{contains:z.i18n.itemProperties.contains,equals:z.i18n.itemProperties.equals},save:function(){z._resettingAppProperties||h["default"].publish("by-layer/field-change",
{changed:!0})}}),B.render(z._layerSearch,z._layerSearchContainer));z._resettingAppProperties=!1;z._appPropertiesChanged=!1;b["default"].showHideAll(b["default"].querySelectorAllAsArray(".opFindLocationsDiv",z.domNode),z._searchProps.enabled);D.resolve()},function(J){z._resettingAppProperties=!1;z._appPropertiesChanged=!1;b["default"].showHideAll(b["default"].querySelectorAllAsArray(".opFindLocationsDiv",z.domNode),z._searchProps.enabled);D.resolve()});return D};C.prototype._handleAppCollectorPropertyChange=
function(){this._resettingAppProperties||(this._appPropertiesChanged=!0,this._handlePropertyChange())};C.prototype._handleCollectorCheckboxChange=function(){this._resettingAppProperties||(this._collectorChanged=!0,this._handlePropertyChange())};C.prototype.handleFieldMapsCheckboxChange=function(){this._resettingAppProperties||(this.fieldmapsChanged=!0,this._handlePropertyChange())};C.prototype._handleHintTextChange=function(){var z;if(!this._resettingAppProperties){var D=(null===(z=this._readApplicationProperties().viewing)||
void 0===z?void 0:z.search)||w.__assign({},this.DEFAULT_SEARCH_PROPS);z=this._opFindLocationsHintText.value;D=(null===D||void 0===D?void 0:D.hintText)||"";this._appPropertiesChanged=!!D&&!z||!D&&!!z||(null===D||void 0===D?void 0:D.trim())!==(null===z||void 0===z?void 0:z.trim());this._handlePropertyChange()}};C.prototype._handleFieldChange=function(){this._appPropertiesChanged=!0;this._handlePropertyChange()};C.prototype._findLocationsClick=function(){var z=this._opFindLocations.checked;this._opFindLocationsLink.innerHTML=
z?this.i18n.customRoles.contract:this.i18n.customRoles.expand;this._opFindLocationsLink.setAttribute("aria-expanded",""+z);this._opFindLocationsContainer.setAttribute("aria-hidden",""+!z);l["default"](".opFindLocationsDiv",this.domNode).forEach(function(D){D.classList[z?"remove":"add"]("hide")});this._handleAppCollectorPropertyChange()};C.prototype._handleOpTrackingClick=function(){b["default"].disableNode(this._opTrackingSelect,!b["default"].isChecked(this._opTracking))};C.prototype._handleExpandContractClick=
function(z){z&&z.preventDefault();var D=(z=this._opFindLocationsLink.innerHTML===this.i18n.customRoles.contract)?this.i18n.customRoles.expand:this.i18n.customRoles.contract;this._opFindLocationsLink.setAttribute("aria-expanded",""+!z);this._opFindLocationsContainer.setAttribute("aria-hidden",""+z);l["default"](".opFindLocationsDiv",this.domNode).toggleClass("hide");this._opFindLocationsLink.innerHTML=D};C.prototype._addFieldClick=function(z){var D,E;z&&z.preventDefault();if(this._layerSearchContainer){z=
this._layerOptions;var A=z.length?z[0]:void 0;if(D=(A=(null===(E=null===(D=A.layer)||void 0===D?void 0:D.fields)||void 0===E?0:E.length)?A.layer.fields[0]:void 0)?{layer:z[0].value,field:A,exactMatch:-1<(null===A||void 0===A?void 0:A.type.indexOf("Integer"))?"true":"false"}:void 0)this._searchLayers.push(D),this._appPropertiesChanged=!0;this._searchLayers=this._searchLayers.map(function(F,H){return w.__assign(w.__assign({},F),{searchLayerId:""+F.layer+H,id:F.layer})});this._layerSearch=B.h(y["default"],
w.__assign(w.__assign({},this._layerSearch.props),{searchLayers:this._searchLayers}));B.render(this._layerSearch,this._layerSearchContainer)}};C.prototype._addTableFieldClick=function(z){var D;z&&z.preventDefault();if(this._tableSearchContainer){z=this._tableOptions;var E=z.length?z[0]:void 0;if(D=(E=(null===(D=E.layer)||void 0===D?0:D.fields.length)?E.layer.fields[0]:void 0)?{table:z[0].value,field:E,exactMatch:-1<(null===E||void 0===E?void 0:E.type.indexOf("Integer"))?"true":"false"}:void 0)this._searchTables.push(D),
this._appPropertiesChanged=!0;this._searchTables=this._searchTables.map(function(A,F){return w.__assign(w.__assign({},A),{searchTableId:""+A.table+F,id:A.table})});this._tableSearch=B.h(y["default"],w.__assign(w.__assign({},this._tableSearch.props),{searchLayers:this._searchTables}));B.render(this._tableSearch,this._tableSearchContainer)}};C.prototype._refreshItemData=function(){var z=this;this.page.fetchMapLayers(this.page._item).then(function(D){z.page._item.set("itemData",z.page._item.itemData);
z.page._item.set("layers",D);z.item.itemData=z.page._item.itemData;z.item.layers=D;h["default"].publish("item-data/change-complete",{source:"type-options/appsettings",itemData:z.page._item.itemData})},function(){h["default"].publish("item-data/change-complete",{source:"type-options/appsettings",itemData:z.page._item.itemData})})};return C=w.__decorate([x["default"](c["default"],n["default"])],C)}()})},"arcgisonline/pages/components/LayerSearch":function(){define("require exports tslib ./LayerSearchRow preact preact/hooks".split(" "),
function(K,G,w,v,r,f){Object.defineProperty(G,"__esModule",{value:!0});v=w.__importDefault(v);G["default"]=function(c){var a=c.layers,b=c.searchLayers,p=c.mode,q=void 0===p?"layers":p,t=c.strings,m=c.save;c=f.useState(w.__spreadArray([],b));p=c[0];var n=c[1],k=function(){n(w.__spreadArray([],b));m()};f.useEffect(function(){k()},[b]);var l=function(g,u){var x=a.find(function(B){return B.value===u}),y=x.layer.fields.find(function(B){return B.name===b[g].field.name})||x.layer.fields[0];x="layers"===
q?{searchLayerId:""+x.value+g,id:""+x.value,layer:""+x.value,exactMatch:b[g].exactMatch,field:w.__assign(w.__assign({},y),{exactMatch:!!b[g].exactMatch})}:{searchTableId:""+x.value+g,id:""+x.value,table:""+x.value,exactMatch:b[g].exactMatch,field:w.__assign(w.__assign({},y),{exactMatch:!!b[g].exactMatch})};b[g]=x;k()},h=function(g,u){var x=a.find(function(y){return y.value===b[g].id}).layer.fields.find(function(y){return y.name===u});x=w.__assign(w.__assign({},b[g]),{field:w.__assign(w.__assign({},
x),{exactMatch:!!b[g].exactMatch})});b[g]=x;k()},e=function(g,u){var x=w.__assign(w.__assign({},b[g]),{exactMatch:u?"true":"false",field:w.__assign(w.__assign({},b[g].field),{exactMatch:u})});b[g]=x;k()},d=function(g){b.splice(g,1);k()};c=p.map(function(g,u){return r.h(v["default"],{key:u,layers:a,selected:g,row:u,mode:q,strings:t,layerChanged:l,fieldChanged:h,matchChanged:e,removeRow:d})});return r.h("div",{"class":"layer-search margin-right-1"},c)}})},"arcgisonline/pages/components/LayerSearchRow":function(){define(["require",
"exports","preact"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G["default"]=function(v){var r,f=v.row,c=v.layers,a=v.selected,b=v.strings,p=v.layerChanged,q=v.fieldChanged,t=v.matchChanged,m=v.removeRow;v=c.map(function(k){return w.h("option",{key:k.value,value:k.value,selected:k.value===a.id},k.label)});c=null===(r=c.find(function(k){return k.value===a.id}))||void 0===r?void 0:r.layer;c=null===c||void 0===c?void 0:c.fields;r=null===c||void 0===c?void 0:c.find(function(k){return k.name===
a.field.name});c=(null===c||void 0===c?void 0:c.map(function(k){return w.h("option",{key:k.name,value:k.value,selected:k.name===a.field.name},k.label)}))||[];var n="esriFieldTypeInteger"===(null===r||void 0===r?void 0:r.type)||"esriFieldTypeSmallInteger"===(null===r||void 0===r?void 0:r.type);r=["contains","equals"].map(function(k){var l=""+(n||"equals"===k);k=k.toLowerCase();return w.h("option",{key:k,value:l,selected:a.exactMatch===l},b[k])});return w.h("div",{"class":"layer-search-row"},w.h("select",
{"class":"layer-search-row__layer-select inline-block margin-leader-half margin-trailer-half margin-right-1 rtl-margin-right-0",onChange:function(k){k=k.target;p(f,k.options[k.selectedIndex].value)}},v),w.h("select",{"class":"layer-search-row__field-select inline-block margin-leader-half margin-trailer-half margin-right-1 rtl-margin-right-0",onChange:function(k){k=k.target;q(f,k.options[k.selectedIndex].value)}},c),w.h("select",{"class":"layer-search-row__match-select inline-block margin-leader-half margin-trailer-half margin-right-1 rtl-margin-right-0",
onChange:function(k){k=k.target;t(f,"true"===k.options[k.selectedIndex].value)},disabled:n},r),w.h("div",{"class":"right"},w.h("calcite-button",{appearance:"transparent",color:"red",onClick:function(k){m(f)}},w.h("calcite-icon",{icon:"x","class":"deleteLayer"}))))}})},"arcgisonline/pages/item/widgets/typeOptions/webscene":function(){define("require exports tslib ../../../../esriGeowConfig ./_mixin ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/a11yclick dijit/popup dijit/TooltipDialog dojo/dom-construct dojo/topic dojo/text!./webscene.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.templateString=n["default"]}k.prototype.destroy=function(){this._removePopovers();this.inherited(arguments)};k.prototype._initHandlers=function(){this.isHidden=!1;this.own(m["default"].subscribe("item-data/change",
this._refreshItemData.bind(this)));this._createUpdateToHTTPSPopover()};k.prototype._removePopovers=function(){this._httpsPopover&&this._httpsPopover.destroyRecursive()};k.prototype._createUpdateToHTTPSPopover=function(){var l=this,h=f["default"].isPortal();h=""+v["default"].self.helpBase+(h?"#/Item_details/01930000001p000000#WEBMAP_LAYER_SETTINGS":v["default"].self.helpMap.m["120001298"]);var e=t["default"].create("div",{"class":"popover text-left"}),d=t["default"].create("span",{"class":"popover-close icon-ui-close",
"tab-index":0,"aria-label":this.i18n.common.close},e);t["default"].create("div",{"class":"popover-title",innerHTML:this.i18n.itemProperties.updateToHTTPS},e);t["default"].create("div",{"class":"popover-text leader-half",innerHTML:this.i18n.itemProperties.updateToHTTPSDesc},e);t["default"].create("div",{"class":"popover-text leader-half",innerHTML:'\x3ca href\x3d"'+h+'" target\x3d"_blank"\x3e'+this.i18n.itemProperties.learnMore+"\x3c/a\x3e"},e);this._httpsPopover=new q["default"]({"class":"popover",
title:this.i18n.itemProperties.updateToHTTPS,content:e});this.own(b["default"](d,function(){p["default"].close(l._httpsPopover)}),b["default"](this._httpsHelpLink,function(){p["default"].open({popup:l._httpsPopover,orient:["above-centered"],around:l._httpsHelpLink})}))};k.prototype._refreshItemData=function(){var l=this;this.page.fetchMapLayers(this.page._item).then(function(h){l.page._item.set({itemData:l.page._item.itemData,layers:h});l.item.itemData=l.page._item.itemData;l.item.layers=h;m["default"].publish("item-data/change-complete",
{source:"type-options/scene",itemData:l.page._item.itemData})},function(){m["default"].publish("item-data/change-complete",{source:"type-options/scene",itemData:l.page._item.itemData})})};return k=w.__decorate([c["default"](r["default"],a["default"])],k)}()})},"arcgisonline/pages/item/widgets/typeOptions/notebook":function(){define("require exports tslib ../../../../esriGeowConfig ./_mixin ../../../utils/dom ../../../utils/notebook ../../../utils/strings ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/topic dojo/dom-construct dojo/string dojo/on dojo/query dojo/Deferred dojo/i18n!../../../../nls/arcgisonline dojo/text!./notebook.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);return function(){function g(u,x){this.templateString=n["default"].substitute(d["default"],
{i18n:e["default"].itemProperties});this.runtimes=[];this.runtimeId="";this.isReadOnly=(v["default"].self||{}).isReadOnly}g.prototype.startup=function(){var u=this;this.inherited(arguments);var x=new h["default"];this._user=b["default"].getUser();c["default"].getNotebookRuntimes().then(function(y){u.runtimes=y;u._initRuntimes(y);x.resolve()},function(y){x.reject(y)});return x};g.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),
t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),k["default"](this.notebookRuntimeSelect,"change",this._notebookRuntimeChange.bind(this)))};g.prototype.retrievePropertyValues=function(){return{runtimeId:this.notebookRuntimeSelect.value}};g.prototype.hasChanges=function(){var u=this.retrievePropertyValues();return this._runtimeChanged=u.runtimeId&&!a["default"].areEqual(this.runtimeId,u.runtimeId)};g.prototype.save=function(){var u=this,x=new h["default"];this.newRuntimeId=
this.retrievePropertyValues().runtimeId;this._notebookRuntimeChange().then(function(){x.resolve({changed:{},toChange:{properties:c["default"].createNotebookRuntimeProperties(u.runtimes,u.notebookRuntimeSelect)}})},function(y){x.reject(y)});return x};g.prototype.reset=function(){var u=new h["default"];this.notebookRuntimeSelect.value=this.newRuntimeId||this.runtimeId;u.resolve();return u};g.prototype._notebookRuntimeChange=function(){var u=new h["default"];this._handlePropertyChange();u.resolve();
return u};g.prototype._initRuntimes=function(u){var x={};if("string"!==typeof this.item.properties)x=this.item.properties||{};else try{x=JSON.parse(this.item.properties)}catch(B){}var y=x.notebookRuntimeName;x=x.notebookRuntimeVersion;u.length?this._createRuntimesDropdown(u,y,x):this._createRuntimeDisplay(y,x)};g.prototype._createRuntimesDropdown=function(u,x,y){var B=this,C=u.filter(function(z){return z.name===x&&z.version===y});x=x||e["default"].myOrganization.defaultPortalSelection;C.length||u.unshift({name:x,
version:y,id:""});u.forEach(function(z){var D={value:z.id,innerHTML:z.name+(z.version?" - "+c["default"].formatNotebookRuntimeVersion(z.version):"")};x===z.name&&y===z.version&&(B.runtimeId=z.id,D.selected="");var E=B._user.userRole.canCreateAdvancedNotebooks();(!z.requiresAdvancedPrivileges||z.requiresAdvancedPrivileges&&D.hasOwnProperty("selected")||z.requiresAdvancedPrivileges&&E)&&m["default"].create("option",D,B.notebookRuntimeSelect)});this.isReadOnly&&f["default"].disableNode(this.notebookRuntimeSelect,
!0);f["default"].showNode(this.notebookRuntimeSelect)};g.prototype._createRuntimeDisplay=function(u,x){u&&x&&m["default"].create("div",{"class":"text-right",innerHTML:u+" - "+c["default"].formatNotebookRuntimeVersion(x)},this.runtimeSelectContainer)};g.prototype._handleUpdateSuccess=function(){this.runtimeId||(this.runtimes=(this.runtimes||[]).filter(function(u){return!!u.id}),l["default"]("option:contains('"+e["default"].myOrganization.defaultPortalSelection+"')",this.notebookRuntimeSelect).addClass("hide"));
this.runtimeId=this.newRuntimeId;this.newRuntimeId=null};g.prototype._handleUpdateError=function(){this.newRuntimeId=null};return g=w.__decorate([p["default"](r["default"],q["default"])],g)}()})},"arcgisonline/pages/item/widgets/typeOptions/datastoreDatabase":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreDatabaseSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/query dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreDatabase.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);return function(){function e(d,g){this.templateString=q["default"].substitute(h["default"],{i18n:l["default"].itemProperties});this.datastoreId=
d.item.id;this.portal=d.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+"/data";this.itemData={};this.newItemData={info:{}};this.hostingServer=null}e.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};e.prototype._getServerAndItemInformation=function(){var d=this,g=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(u){d.federatedServers=
u.servers.servers;d.itemData=u.itemData;d._setupDatabaseSettings(d.federatedServers,d.itemData)},function(u){g.reject(u)});return g};e.prototype._setupDatabaseSettings=function(d,g){this.hostingServer=d.filter(function(u){return"HOSTING_SERVER"===u.serverRole.toUpperCase()})[0];this.datastoreDatabaseSettings&&this.datastoreDatabaseSettings.destroyRecursive();this.datastoreDatabaseSettings=(new c["default"]({hostingServer:this.hostingServer,settingsMode:!0})).placeAt(this.databaseSettingsContainer);
this.datastoreDatabaseSettings._setConnectionStrings(g.info.connectionString,g.info.clientConnectionString)};e.prototype._connectionStringChange=function(d){var g=new m["default"];"publisher"===d.connectionStringType?this.newItemData.info.publisherConnectionString=d.connectionString:this.newItemData.info.serverConnectionString=d.connectionString;d="replicated"===this.itemData.info.dataStoreConnectionType;(!d||d&&this.newItemData.info.publisherConnectionString&&this.newItemData.info.serverConnectionString)&&
this._startValidateConnection();g.resolve();return g};e.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};e.prototype._handleUpdateError=function(){};e.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),t["default"].subscribe("settings/connectionStringChange",
this._connectionStringChange.bind(this)),t["default"].subscribe("settings/startChangeConnectionFile",this._startChangeConnectionFile.bind(this)),t["default"].subscribe("settings/cancelChangeConnectionFile",this._cancelChangeConnectionFile.bind(this)),t["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),
p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),p["default"](this.datastoreDatabaseEditBtn,"click",this._startDatastoreDatabaseEdit.bind(this)),p["default"](this.datastoreDatabaseCancelBtn,"click",this._cancelDatastoreDatabaseEdit.bind(this)))};e.prototype._startDatastoreEdit=function(){this.newItemData={info:{}};r["default"].hideNode(this.datastoreDatabaseEditBtn)};e.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreDatabaseEditBtn)};e.prototype._startDatastoreDatabaseEdit=
function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");r["default"].showNode(this.datastoreDatabaseCancelBtn);this.datastoreDatabaseSettings._startDatastoreDatabaseEdit()};e.prototype._cancelDatastoreDatabaseEdit=function(){t["default"].publish("settings/cancelDatastoreEdit")};e.prototype._startChangeConnectionFile=function(){r["default"].hideNode(this.validateBtn);r["default"].deactivateNode(this.validateAlert)};e.prototype._cancelChangeConnectionFile=function(){this.disableSave&&
(r["default"].showNode(this.validateBtn),r["default"].activateNode(this.validateBtn))};e.prototype._startValidateConnection=function(){this.disableSave=!0;this._handlePropertyChange();r["default"].deactivateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};e.prototype._validateConnection=function(){var d=this._createDatastoreObject();r["default"].deactivateNode(this.validateAlert);r["default"].disableNode(this.validateBtn,!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;
t["default"].publish("settings/validateConnection",d)};e.prototype._validationComplete=function(d){this.editing&&(r["default"].disableNode(this.validateBtn,!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,d.filter(function(g){return g[0]}).filter(function(g){return"success"===g[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&(this._showValidationAlert("alert-green",this.i18n.itemProperties.validateDatastoreSuccess),this._handlePropertyChange())):this._showValidationAlert("alert-red",
this.i18n.itemProperties.validateDatastoreFailed))};e.prototype._showValidationAlert=function(d,g){r["default"].removeClasses(this.validateAlert,["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=g;r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(d)};e.prototype._createDatastoreObject=function(){var d={info:{isManaged:!1}};"newConnection"===(k["default"]("input[name\x3d'serverDatabaseOption']:checked",this.datastoreDatabaseSettings.domNode)[0]||
{}).value?(d.info.connectionString=this.newItemData.info.serverConnectionString||this.itemData.info.connectionString,d.info.clientConnectionString=this.newItemData.info.publisherConnectionString||this.itemData.info.clientConnectionString,d.info.dataStoreConnectionType="replicated"):(d.info.connectionString=this.newItemData.info.publisherConnectionString||this.itemData.info.connectionString,d.info.dataStoreConnectionType="shared");d.type=this.itemData.type;d.path=this.itemData.path;return d};e.prototype.hasChanges=
function(){return!this.disableSave};e.prototype.save=function(){var d=new m["default"];if(this.editing&&this.hasChanges()){this.emitSuccessMessage=!0;var g=this._createDatastoreObject();d.resolve({changed:{},toChange:{text:JSON.stringify(g)}})}else d.resolve({changed:{},toChange:{}});return d};e.prototype.reset=function(){var d=new m["default"];this.editing&&(this._getServerAndItemInformation(),r["default"].showNode(this.datastoreDatabaseEditBtn),r["default"].hideNode(this.datastoreDatabaseCancelBtn),
r["default"].hideNode(this.validateBtn),r["default"].deactivateNode(this.validateAlert));this.editing=!1;d.resolve();return d};return e=w.__decorate([a["default"](v["default"],b["default"])],e)}()})},"arcgisonline/sharing/dijit/DatastoreDatabaseSettings":function(){define("esri/declare arcgisonline/sharing/util dojo/Deferred dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dojo/dom-construct dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreDatabaseSettings.html dojo/i18n!arcgisonline/nls/arcgisonline dojo/NodeList-traverse".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){return K([q,t,m],{templateString:v.substitute(n,{i18n:k.AddDatastoreDlg}),hostingServer:null,constructor:function(l){this.hostingServer=l.hostingServer;this.settingsMode=l.settingsMode;this.publishingToolsUrl=this._getPublishingToolsUrl()},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode?(this.changePublisherConnectionBtn.innerHTML=k.AddDatastoreDlg.chooseDifferentPasswordFile,this.changeServerConnectionBtn.innerHTML=
k.AddDatastoreDlg.chooseDifferentPasswordFile,a.add(this.databaseGeneralDescription,"hide"),a.add(this.changePublisherConnectionBtn,"hide"),a.add(this.changeServerConnectionBtn,"hide"),a.add(this.serverDatabaseOptionContainer,"hide")):this.hostingServer||(a.add(this.publisherDatabaseContainer,"hide"),a.add(this.serverDatabaseContainer,"hide"),a.add(this.databaseGeneralDescription,"hide"),a.add(this.hostingServerError,"is-active"));this.addEventListeners()},_getPublishingToolsUrl:function(){return this.hostingServer?
this.hostingServer.adminUrl+"/rest/services/System/PublishingTools/GPServer":""},_setConnectionStrings:function(l,h){a.remove(this.publisherConnectionContainer,"hide");a.add(this.publisherConnectionFile,"hide");a.add(this.publisherFileNameContainer,"hide");h?(r("input[value\x3d'newConnection']",this.domNode)[0].checked=!0,this._renderConnectionString(this.publisherConnectionStringTable,h),this._renderConnectionString(this.serverConnectionStringTable,l),p.set(this.publisherConnectionString,{value:h}),
p.set(this.serverConnectionString,{value:l}),a.remove(this.publisherDatabaseNewContainer,"hide"),a.remove(this.serverConnectionContainer,"hide"),a.add(this.serverConnectionFile,"hide"),a.add(this.serverFileNameContainer,"hide"),a.add(this.serverDatabaseOptionContainer,"hide")):(this._renderConnectionString(this.publisherConnectionStringTable,l),p.set(this.publisherConnectionString,{value:l}),a.add(this.serverDatabaseContainer,"hide"))},_doesKeyExist:function(l,h){return l.some(function(e){return e.key===
h})},_parseConnectionString:function(l){var h=[];l&&l.split(";").forEach(function(e){e=e.split("\x3d");2!==e.length||this._doesKeyExist(h,e[0])||h.push({key:e[0],value:e[1]})}.bind(this));return h},_changeConnectionFile:function(l,h,e,d,g){g.stopPropagation();e.value="";a.remove(l,"is-error");a.add(l,"hide");a.remove(e,"hide");a.remove(d,"hide");this.settingsMode&&c.publish("settings/startChangeConnectionFile")},_cancelChangeConnectionFile:function(l,h,e){a.remove(l,"hide");a.add(h,"hide");a.add(e,
"hide");a.remove(h,"input-error");a.remove(h.nextElementSibling,"is-active");this.settingsMode&&c.publish("settings/cancelChangeConnectionFile")},_processConnectionFile:function(l,h,e,d,g,u,x){var y=new w;x.target.value&&(a.remove(x.target,"input-error"),a.remove(x.target.nextElementSibling,"is-active"),a.add(x.target,"hide"),a.remove(l,"hide"),a.add(u,"hide"));var B=event.target.files[0];this._uploadConnectionFile(B).then(this._submitJob.bind(this)).then(this._pollStatus.bind(this)).then(this._getConnectionString.bind(this)).then(function(C){a.remove(d.parentElement,
"hide");a.remove(h,"is-error");a.remove(h,"hide");a.add(l,"hide");this._renderConnectionString(g,C.value);p.set(e,{value:C.value});d.innerHTML=B.name;this.settingsMode&&(C={connectionString:C.value,connectionStringType:p.get(e,"data-connection-string-type")},c.publish("settings/connectionStringChange",C))}.bind(this),function(C){x.target.value&&(a.add(x.target,"input-error"),a.add(x.target.nextElementSibling,"is-active"),a.remove(x.target,"hide"),a.add(l,"hide"),a.remove(u,"hide"));d.innerHTML=B.name}.bind(this));
return y},_renderConnectionString:function(l,h){p.set(l,{innerHTML:null});this._parseConnectionString(h).forEach(function(e){"DBCLIENT"===e.key&&-1<["bigquery","snowflake","redshift"].indexOf(e.value)&&a.add(this.serverDatabaseContainer,"hide");var d=b.create("tr");b.create("td",{innerHTML:e.key},d);b.create("td",{innerHTML:e.value,"class":"value-cell"},d);-1<["ENCRYPTED_PASSWORD_UTF8","ENCRYPTED_PASSWORD"].indexOf(e.key)&&a.add(d,"hide");b.place(d,l)}.bind(this))},_getConnectionString:function(l){var h=
new w;l=this.publishingToolsUrl+"/Get%20Database%20Connection%20String/jobs/"+l.jobId+"/"+l.results.out_connectionString.paramUrl;G.request({url:l},{useProxy:G.shouldUseProxy(l)}).then(function(e){h.resolve(e)}.bind(this),function(e){h.reject(e)}.bind(this));return h},_submitJob:function(l){var h=new w,e=this.publishingToolsUrl+"/Get%20Database%20Connection%20String/submitJob";G.request({url:e,content:{in_inputData:l.itemID,in_connDataType:"UPLOADED_CONNECTION_FILE_ID"}},{usePost:!0,useProxy:G.shouldUseProxy(e)}).then(function(d){"ESRIJOBSUBMITTED"===
(d.jobStatus||"").toUpperCase()?h.resolve(d):h.reject(d)}.bind(this),function(d){h.reject(d)}.bind(this));return h},_uploadConnectionFile:function(l){var h=new w,e=this.hostingServer.adminUrl+"/admin/uploads/upload",d=new FormData;d.append("itemFile",l);G.request({url:e,form:d},{usePost:!0,useProxy:G.shouldUseProxy(e)}).then(function(g){"success"===g.status?h.resolve(g.item):h.reject(g)},function(g){h.reject(g)});return h},_pollStatus:function(l){var h=new w,e=0,d=this.publishingToolsUrl+"/Get%20Database%20Connection%20String/jobs/"+
l.jobId;(function u(){e++;20>=e?G.request({url:d},{useProxy:G.shouldUseProxy(d)}).then(function(x){switch((x.jobStatus||"").toUpperCase()){case "ESRIJOBNEW":case "ESRIJOBSUBMITTED":case "ESRIJOBWAITING":case "ESRIJOBEXECUTING":setTimeout(u,1E3);break;case "ESRIJOBSUCCEEDED":h.resolve(x);break;default:h.reject(x)}},function(x){h.reject({message:"Error."})}):h.reject({message:"Error."})})();return h},_startDatastoreDatabaseEdit:function(){a.remove(this.changePublisherConnectionBtn,"hide");a.remove(this.changeServerConnectionBtn,
"hide")},addEventListeners:function(){this.own(c.subscribe("settings/startDatastoreConnectionEdit",this._startDatastoreDatabaseEdit.bind(this)),r("input[name\x3d'serverDatabaseOption']",this.domNode).on("change",function(l){r("div.serverDatabaseOptionContainer label").removeClass("active");a.add(l.target.parentElement,"active");"newConnection"===l.target.value?(p.get(this.serverConnectionString,"value")||"").length?(a.remove(this.publisherDatabaseNewContainer,"hide"),a.remove(this.serverConnectionContainer,
"hide")):(a.remove(this.publisherDatabaseNewContainer,"hide"),a.remove(this.serverConnectionFile,"hide")):(a.add(this.publisherDatabaseNewContainer,"hide"),a.add(this.serverConnectionFile,"hide"),a.add(this.serverConnectionContainer,"hide"));if(this.settingsMode){var h={};"newConnection"===l.target.value?(h.connectionString=p.get(this.serverConnectionString,"value"),h.connectionStringType="server"):(connectionString=p.get(this.publisherConnectionString,"value"),h.connectionStringType="publisher");
c.publish("settings/connectionStringChange",h)}}.bind(this)),f(this.changePublisherConnectionBtn,"click",this._changeConnectionFile.bind(this,this.publisherConnectionContainer,this.publisherConnectionString,this.publisherConnectionFile,this.changePublisherConnectionCancelBtn)),f(this.changeServerConnectionBtn,"click",this._changeConnectionFile.bind(this,this.serverConnectionContainer,this.serverConnectionString,this.serverConnectionFile,this.changeServerConnectionCancelBtn)),f(this.changePublisherConnectionCancelBtn,
"click",this._cancelChangeConnectionFile.bind(this,this.publisherConnectionContainer,this.publisherConnectionFile,this.changePublisherConnectionCancelBtn)),f(this.changeServerConnectionCancelBtn,"click",this._cancelChangeConnectionFile.bind(this,this.serverConnectionContainer,this.serverConnectionFile,this.changeServerConnectionCancelBtn)),f(this.publisherConnectionFile,"change",this._processConnectionFile.bind(this,this.publisherLoader,this.publisherConnectionContainer,this.publisherConnectionString,
this.publisherFileName,this.publisherConnectionStringTable,this.changePublisherConnectionCancelBtn)),f(this.serverConnectionFile,"change",this._processConnectionFile.bind(this,this.serverLoader,this.serverConnectionContainer,this.serverConnectionString,this.serverFileName,this.serverConnectionStringTable,this.changeServerConnectionCancelBtn)))}})})},"arcgisonline/pages/item/widgets/typeOptions/datastoreFolder":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreFolderSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreFolder.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=q["default"].substitute(l["default"],{i18n:k["default"].itemProperties});this.datastoreId=e.item.id;this.portal=
e.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+"/data";this.itemData={};this.newItemData={};this.hostingServer=null}h.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};h.prototype._getServerAndItemInformation=function(){var e=this,d=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(g){var u;e.federatedServers=null===(u=
null===g||void 0===g?void 0:g.servers)||void 0===u?void 0:u.servers;e.itemData=g.itemData;e._setupFolderSettings(e.itemData)},function(g){d.reject(g)});return d};h.prototype._setupFolderSettings=function(e){this.datastoreFolderSettings&&this.datastoreFolderSettings.destroyRecursive();this.datastoreFolderSettings=(new c["default"]({settingsMode:!0})).placeAt(this.folderSettingsContainer);this.datastoreFolderSettings.setFolderPaths(e.info.path,e.clientPath,e.info.hostName)};h.prototype._folderPathChange=
function(e){if(this.editing)return e=new m["default"],this.newItemData=this.datastoreFolderSettings.getFolderParamterUpdatedItem({}),this._startValidatePath(),e.resolve(),e};h.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};h.prototype._handleUpdateError=function(){};h.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),t["default"].subscribe("settings/error",
this._handleUpdateError.bind(this)),t["default"].subscribe("settings/folderPathChange",this._folderPathChange.bind(this)),t["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),p["default"](this.datastoreFolderEditBtn,
"click",this._startDatastoreFolderEdit.bind(this)),p["default"](this.datastoreFolderCancelBtn,"click",this._cancelDatastoreFolderEdit.bind(this)))};h.prototype._startDatastoreEdit=function(){r["default"].hideNode(this.datastoreFolderEditBtn)};h.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreFolderEditBtn)};h.prototype._startDatastoreFolderEdit=function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");r["default"].showNode(this.datastoreFolderCancelBtn);
this.datastoreFolderSettings.startDatastoreFolderEdit()};h.prototype._cancelDatastoreFolderEdit=function(){t["default"].publish("settings/cancelDatastoreEdit")};h.prototype._startValidatePath=function(){this.disableSave=!0;this._handlePropertyChange();r["default"].deactivateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};h.prototype._validateConnection=function(){var e=this._createDatastoreObject();r["default"].deactivateNode(this.validateAlert);r["default"].disableNode(this.validateBtn,
!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;t["default"].publish("settings/validateConnection",e)};h.prototype._validationComplete=function(e){this.editing&&(r["default"].disableNode(this.validateBtn,!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,e.filter(function(d){return d[0]}).filter(function(d){return"success"===d[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&(this._showValidationAlert("alert-green",this.i18n.itemProperties.validateDatastoreSuccess),
this._handlePropertyChange())):this._showValidationAlert("alert-red",this.i18n.itemProperties.validateDatastoreFailed))};h.prototype._showValidationAlert=function(e,d){r["default"].removeClasses(this.validateAlert,["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=d;r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(e)};h.prototype._createDatastoreObject=function(){var e={info:{isManaged:!1}};e=this.datastoreFolderSettings.createFolderDataObject(e,
this.newItemData);e.type=this.itemData.type;e.path=this.itemData.path;return e};h.prototype.hasChanges=function(){return!this.disableSave};h.prototype.save=function(){var e=new m["default"];if(this.editing&&this.hasChanges()){this.emitSuccessMessage=!0;var d=this._createDatastoreObject();e.resolve({changed:{},toChange:{text:JSON.stringify(d)}})}else e.resolve({changed:{},toChange:{}});return e};h.prototype.reset=function(){var e=new m["default"];this.editing&&(this._getServerAndItemInformation(),
r["default"].showNode(this.datastoreFolderEditBtn),r["default"].hideNode(this.datastoreFolderCancelBtn),r["default"].hideNode(this.validateBtn),r["default"].deactivateNode(this.validateAlert));this.editing=!1;e.resolve();return e};return h=w.__decorate([a["default"](v["default"],b["default"])],h)}()})},"arcgisonline/sharing/dijit/DatastoreFolderSettings":function(){define("esri/declare dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin arcgisonline/sharing/util dojo/text!./templates/DatastoreFolderSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){return K([c,a,b],{templateString:G.substitute(q,{i18n:t.AddDatastoreDlg}),constructor:function(m){this.inherited(arguments);this.settingsMode=m.settingsMode;this.i18n=t},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&f.add(this.folderGeneralDescription,"hide");this.addEventListeners()},_disableTextBoxes:function(m){this.publisherFolderPath.readOnly=m;this.newServerFolderPath.readOnly=m;this.publisherFolderHostName.readOnly=
m},_onPublisherFolderChange:function(m){(this.isDriveLetterLocation=1===m.target.value.split(":")[0].length?!0:!1)?f.remove(this.publisherFolderHostnameContainer,"hide"):f.add(this.publisherFolderHostnameContainer,"hide");this.settingsMode&&r.publish("settings/folderPathChange")},_onServerFolderChange:function(m){this.settingsMode&&r.publish("settings/folderPathChange")},_onServerFolderRadioChange:function(m){w("div.serverFolderOptionContainer label").removeClass("active");f.add(m.target.parentElement,
"active");"newPath"===m.target.value?(f.remove(this.newServerFolderPath,"hide"),f.remove(this.newServerFolderPathContainer,"hide")):(f.add(this.newServerFolderPath,"hide"),f.add(this.newServerFolderPathContainer,"hide"));this.settingsMode&&r.publish("settings/folderPathChange")},_onHostNameChange:function(m){this.settingsMode&&r.publish("settings/folderPathChange")},addEventListeners:function(){this.own(r.subscribe("settings/startDatastoreFolderEdit",this.startDatastoreFolderEdit.bind(this)),v(this.publisherFolderPath,
"change",this._onPublisherFolderChange.bind(this)),v(this.newServerFolderPath,"change",this._onServerFolderChange.bind(this)),v(this.publisherFolderHostName,"change",this._onHostNameChange.bind(this)),w("input[name\x3d'serverFolderPath']",this.domNode).on("change",this._onServerFolderRadioChange.bind(this)))},getFolderParamterUpdatedItem:function(m){m.publisherFolderPath=this.publisherFolderPath.value;m.publisherHostName=this.isDriveLetterLocation?this.publisherFolderHostName.value:void 0;m.serverFolderPath=
(w("input[name\x3d'serverFolderPath']:checked")[0]||{}).value;m.newServerFolderPath=this.newServerFolderPath.value;return m},validateFolderInputs:function(m){return m.publisherFolderPath?this.isDriveLetterLocation&&!m.publisherHostName?this.i18n.AddDatastoreDlg.validation.invalidPublisherHostName:"newPath"!==m.serverFolderPath||m.newServerFolderPath?!1:this.i18n.AddDatastoreDlg.validation.invalidServerFolderPath:this.i18n.AddDatastoreDlg.validation.invalidPublisherFolderPath},setFolderPaths:function(m,
n,k){this._disableTextBoxes(!0);n?(w("input[value\x3d'newPath']",this.domNode)[0].checked=!0,f.add(w(".datastore-folder-same-as-publisher",this.domNode)[0],"hide"),this.publisherFolderPath.value=n,this.newServerFolderPath.value=m,f.remove(this.serverFolderPathContainer,"hide"),f.remove(this.newServerFolderPath.domNode,"hide"),f.remove(this.newServerFolderPathContainer,"hide")):this.publisherFolderPath.value=m;k&&(this.publisherFolderHostName.value=k,f.remove(this.publisherFolderHostnameContainer,
"hide"))},createFolderDataObject:function(m,n){m.type="folder";m.path="/fileShares/"+n.title;m.info.dataStoreConnectionType="shared";m.info.path=n.publisherFolderPath;m.info.hostName=n.publisherHostName;"newPath"===n.serverFolderPath&&(m.clientPath=n.publisherFolderPath,m.info.path=n.newServerFolderPath,m.info.dataStoreConnectionType="replicated");return m},startDatastoreFolderEdit:function(){this._disableTextBoxes(!1)}})})},"arcgisonline/pages/item/widgets/typeOptions/datastoreCloud":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreCloudSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreCloud.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=q["default"].substitute(l["default"],{i18n:k["default"].itemProperties});this.datastoreId=e.item.id;this.portal=
e.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+"/data";this.itemData={};this.newItemData={}}h.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};h.prototype._getServerAndItemInformation=function(){var e=this,d=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(g){e.federatedServers=g.servers.servers;e.itemData=g.itemData;
e._setupCloudSettings(e.itemData)},function(g){d.reject(g)});return d};h.prototype._setupCloudSettings=function(e){this.datastoreCloudSettings&&this.datastoreCloudSettings.destroyRecursive();this.datastoreCloudSettings=(new c["default"]({settingsMode:!0,itemData:e})).placeAt(this.cloudSettingsContainer)};h.prototype._connectionChange=function(){if(this.editing){var e=new m["default"];this.newItemData=this.datastoreCloudSettings.getCloudParamterUpdatedItem({});this._startValidatePath();e.resolve();
return e}};h.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};h.prototype._handleUpdateError=function(){};h.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),t["default"].subscribe("settings/cloudConnectionChange",this._connectionChange.bind(this)),t["default"].subscribe("settings/validationComplete",
this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),p["default"](this.datastoreCloudEditBtn,"click",this._startDatastoreCloudEdit.bind(this)),p["default"](this.datastoreCloudCancelBtn,"click",this._cancelDatastoreCloudEdit.bind(this)))};h.prototype._startDatastoreEdit=
function(){r["default"].hideNode(this.datastoreCloudEditBtn)};h.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreCloudEditBtn)};h.prototype._startDatastoreCloudEdit=function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");r["default"].showNode(this.datastoreCloudCancelBtn);this.datastoreCloudSettings.startDatastoreCloudEdit()};h.prototype._cancelDatastoreCloudEdit=function(){t["default"].publish("settings/cancelDatastoreEdit")};h.prototype._startValidatePath=
function(){this.disableSave=!0;this._handlePropertyChange();r["default"].activateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};h.prototype._validateConnection=function(){var e=this._createDatastoreObject();r["default"].deactivateNode(this.validateAlert);r["default"].disableNode(this.validateBtn,!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;t["default"].publish("settings/validateConnection",e)};h.prototype._validationComplete=function(e){this.editing&&(r["default"].disableNode(this.validateBtn,
!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,e.filter(function(d){return d[0]}).filter(function(d){return"success"===d[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&(this._showValidationAlert("alert-green",this.i18n.itemProperties.validateDatastoreSuccess),this._handlePropertyChange())):this._showValidationAlert("alert-red",this.i18n.itemProperties.validateDatastoreFailed))};h.prototype._showValidationAlert=function(e,d){r["default"].removeClasses(this.validateAlert,
["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=d;r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(e)};h.prototype._createDatastoreObject=function(){var e={info:{isManaged:!1}};e=this.datastoreCloudSettings.createCloudProviderDataObject(e,this.newItemData);e.type=this.itemData.type;e.path=this.itemData.path;return e};h.prototype.hasChanges=function(){return!this.disableSave};h.prototype.save=function(){var e=new m["default"];if(this.editing&&
this.hasChanges()){this.emitSuccessMessage=!0;var d=this._createDatastoreObject();e.resolve({changed:{},toChange:{text:JSON.stringify(d)}})}else e.resolve({changed:{},toChange:{}});return e};h.prototype.reset=function(){var e=new m["default"];this.editing&&(this._getServerAndItemInformation(),r["default"].showNode(this.datastoreCloudEditBtn),r["default"].hideNode(this.datastoreCloudCancelBtn),r["default"].hideNode(this.validateBtn),r["default"].deactivateNode(this.validateAlert));this.editing=!1;
e.resolve();return e};return h=w.__decorate([a["default"](v["default"],b["default"])],h)}()})},"arcgisonline/sharing/dijit/DatastoreCloudSettings":function(){define("esri/declare esri/request dojo/string dojo/query dojo/topic dojo/dom-class dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreCloudSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t){return K([a,b,p],{templateString:w.substitute(q,
{i18n:t.AddDatastoreDlg}),googleCloudJsonString:null,regionData:{},constructor:function(m){this.inherited(arguments);this.settingsMode=m.settingsMode;this.i18n=t;this.itemData=m.itemData},startup:function(){this.inherited(arguments);this.settingsMode&&f.add(this.cloudStoreDescription,"hide");return this._populateFormSelects().then(function(){this._addEventListeners();this.settingsMode&&this._populateCloudOptions(this.itemData)}.bind(this))},_showCloudTypeUI:function(m){Array.from(this.cloudStoreRegistrationUI.children).forEach(function(n){n.classList&&
n.classList.length&&!n.classList.contains(m)?n.classList.add("hide"):n.classList.remove("hide")})},_populateFormSelects:function(){this._createOptions(this.i18n.AddDatastoreDlg.credentialTypeValues,this.amazonCredentialType);this._createOptions(this.i18n.AddDatastoreDlg.credentialTypeValues,this.googleCredentialType);return this._fetchRegionInfo()},_fetchRegionInfo:function(){var m=new c;G({url:"https://esriresources.s3.amazonaws.com/1091/regionsforcloudstorage.dat",handleAs:"json"}).then(function(n){this._addOptions(n.Amazon.regions,
this.region,!0);this._addOptions(n.environments,this.environment,!1,"storageEndpointSuffix");this._addOptions(n.Huawei.regions,this.regionHuawei,!0);this._addOptions(n.Alibaba.regions,this.regionAlibaba,!0);this._addOptions(n.Google.regions,this.regionGoogle,!1);m.resolve()}.bind(this),function(n){m.resolve()});return m},_createOptions:function(m,n){Object.keys(m).forEach(function(k){var l=n.id;"amazonCredentialType"===l&&"privatekey"===k||"googleCredentialType"===l&&"accesskey"!==k||(l=document.createElement("option"),
l.label=m[k],l.value=k,n.appendChild(l))},this)},_addOptions:function(m,n,k,l){l=l||"id";n.labelAttr="displayName";n.sortByLabel=!1;k&&(k={},k.displayName=this.i18n.AddDatastoreDlg.custom,k[l]="custom",m.push(k));this._configureRegionSelect(m,n)},_configureRegionSelect:function(m,n){this.regionData[n.id]=m;m.forEach(function(k){var l=document.createElement("option");l.id=k.id;l.label=k.displayName;l.value=k.id;n.appendChild(l)})},_onCredentialTypeChange:function(m){m=m.target.value;var n=-1<["iamrole",
"privatekey"].indexOf(m)?!0:!1;this.accessKeyId.disabled=n;this.secretKeyId.disabled=n;v(".credential-type-change-connect").forEach(function(l){this.settingsMode&&this.editing||!this.settingsMode?(l.classList.remove("hide"),n?l.classList.add("grey-out"):l.classList.remove("grey-out")):n?l.classList.add("hide"):l.classList.remove("hide")},this);var k="privatekey"!==m;v(".googlePrivateKey").forEach(function(l){l.classList&&l.classList.length&&(k?l.classList.add("hide"):l.classList.remove("hide"))});
this.settingsMode&&r.publish("settings/cloudConnectionChange")},_onCloudOptionChange:function(m){"region"!==m.target.id&&"regionGoogle"!==m.target.id&&"regionHuawei"!==m.target.id&&"regionAlibaba"!==m.target.id||this._showPrivateURL(m.target.value);this.settingsMode&&r.publish("settings/cloudConnectionChange")},_showPrivateURL:function(m,n){v(".privateUrl").forEach(function(k){"custom"===m||n?k.classList.remove("hide"):k.classList.add("hide")})},_addEventListeners:function(){this.own(v("input[name\x3d'cloudstoreProvider']").on("change",
function(m){v("label.cloudstore-type").removeClass("active");f.add(m.target.parentElement,"active")}.bind(this)))},_displayCloudStoreContent:function(m){this.cloudStoreRegistrationUI.classList.remove("hide");if(this.settingsMode&&this.editing||!this.settingsMode)this.amazonCredentialType.value="accesskey",this.googleCredentialType.value="accesskey";this._showCloudTypeUI(m);this.settingsMode&&r.publish("settings/cloudConnectionChange")},_displayCloudStoreItem:function(m){this.cloudStoreOption.value=
this.i18n.AddDatastoreDlg.cloudProviders[m];this._displayCloudStoreContent(m)},_onGooglePrivateKeyChange:function(m){m=m.target.files[0];var n=new FileReader;n.onload=function(k){this.googleCloudJsonString=JSON.parse(k.target.result)}.bind(this);n.readAsText(m,"UTF-8")},_disableControls:function(m){this.cloudStoreOption.disabled=this.settingsMode||m;this.storageURL.readOnly=m;this.amazonCredentialType.disabled=m;this.googleCredentialType.disabled=m;this.accountName.readOnly=m;this.accountKey.readOnly=
m;this.accessKeyId.readOnly=m;this.secretKeyId.readOnly=m;this.googlePrivateKey.disabled=m;this.region.disabled=m;this.regionGoogle.disabled=m;this.regionHuawei.disabled=m;this.regionAlibaba.disabled=m;this.environment.disabled=m;this.containerName.readOnly=m;this.bucketName.readOnly=m;this.cloudFolder.readOnly=m},getRegionID:function(m,n){var k;m.forEach(function(l){if(l.blobStoreEndpoint===n||l.storageEndpointSuffix===n)k=l.id});return k},getRegionEndpointURL:function(m,n){var k;m.forEach(function(l){l.id===
n&&(k=l.blobStoreEndpoint||l.storageEndpointSuffix)});return k},getCloudParamterUpdatedItem:function(m){m||(m={});m.provider=this.getCloudStoreValue(this.cloudStoreOption.value);m.storageURL=this.storageURL.value;m.amazonCredentialType=this.amazonCredentialType.value;m.googleCredentialType=this.googleCredentialType.value;m.accountName=this.accountName.value;m.accountKey=this.accountKey.value;m.accessKeyId=this.accessKeyId.value;m.secretKeyId=this.secretKeyId.value;m.googlePrivateKey=this.googlePrivateKey.value;
m.googleCloudJsonString=this.googleCloudJsonString;m.region=this.region.value;m.regionGoogle=this.regionGoogle.value;m.regionHuawei=this.regionHuawei.value;m.regionAlibaba=this.regionAlibaba.value;m.environment=this.environment.value;m.containerName=this.containerName.value;m.bucketName=this.bucketName.value;m.cloudFolder=this.cloudFolder.value;return m},_retrieveGooglePrivateKey:function(m,n){for(var k in n)m[k]=n[k]},createCloudProviderDataObject:function(m,n){var k=(n.provider||"").toLowerCase(),
l=m.info.connectionString={};l.credentialType="accesskey";switch(k){case "amazon":"accesskey"===n.amazonCredentialType?(l.accessKeyId=n.accessKeyId,l.secretAccessKey=n.secretKeyId):l.credentialType=n.amazonCredentialType;l.regionEndpointUrl="custom"===n.region?n.storageURL:this.getRegionEndpointURL(this.regionData.region,n.region);m.info.objectStore=n.bucketName;m.provider="amazon";break;case "google":"accesskey"===n.googleCredentialType?(l.accessKeyId=n.accessKeyId,l.secretAccessKey=n.secretKeyId):
"privatekey"===n.googleCredentialType&&(l.credentialType=n.googleCredentialType,this._retrieveGooglePrivateKey(l,n.googleCloudJsonString));l.regionEndpointUrl="https://storage.googleapis.com";m.info.objectStore=n.bucketName;m.provider="Google";break;case "azure":l.accountKey=n.accountKey;l.accountName=n.accountName;l.accountEndpoint="custom"===n.environment?n.storageURL:this.getRegionEndpointURL(this.regionData.environment,n.environment);m.info.objectStore=n.containerName;m.provider="azure";break;
case "alibaba":case "huawei":l.accessKeyId=n.accessKeyId;l.secretAccessKey=n.secretKeyId;m.info.objectStore=n.bucketName;"alibaba"===k?(m.provider="Alibaba",l.regionEndpointUrl="custom"===n.regionAlibaba?n.storageURL:this.getRegionEndpointURL(this.regionData.regionAlibaba,n.regionAlibaba)):(m.provider="Huawei",l.regionEndpointUrl="custom"===n.regionHuawei?n.storageURL:this.getRegionEndpointURL(this.regionData.regionHuawei,n.regionHuawei));break;default:throw"Invalid cloud provider";}l.defaultEndpointsProtocol=
"https";n.cloudFolder&&(m.info.objectStore=m.info.objectStore+"/"+n.cloudFolder);m.info.connectionString=JSON.stringify(l);m.type="cloudStore";m.path="/cloudStores/"+n.title;return m},validateCloudProviderInputs:function(m){var n=(m.provider||"").toLowerCase();if(!n)return this.i18n.AddDatastoreDlg.validation.invalidCloudProvider;var k=[];switch(n){case "amazon":"accesskey"!==m.amazonCredentialType||m.secretKeyId||k.push(this.i18n.AddDatastoreDlg.secretKeyId);"amazon"!==n||m.bucketName||k.push(this.i18n.AddDatastoreDlg.bucketName);
"custom"!==m.region||m.storageURL||k.push(this.i18n.AddDatastoreDlg.storageURL);break;case "google":"accesskey"===m.googleCredentialType?(m.accessKeyId||k.push(this.i18n.AddDatastoreDlg.accessKeyId),m.secretKeyId||k.push(this.i18n.AddDatastoreDlg.secretKeyId)):"privatekey"===m.googleCredentialType&&(m.googlePrivateKey||k.push(this.i18n.AddDatastoreDlg.privateKeyId));m.bucketName||k.push(this.i18n.AddDatastoreDlg.bucketName);break;case "azure":m.accountName||k.push(this.i18n.AddDatastoreDlg.accountName);
m.accountKey||k.push(this.i18n.AddDatastoreDlg.accountKey);m.containerName||k.push(this.i18n.AddDatastoreDlg.containerName);"custom"!==m.environment||m.storageURL||k.push(this.i18n.AddDatastoreDlg.storageURL);break;case "alibaba":case "huawei":m.accessKeyId||k.push(this.i18n.AddDatastoreDlg.accessKeyId);m.secretKeyId||k.push(this.i18n.AddDatastoreDlg.secretKeyId);m.bucketName||k.push(this.i18n.AddDatastoreDlg.bucketName);"custom"!==m.region||m.storageURL||k.push(this.i18n.AddDatastoreDlg.storageURL);
break;default:throw"Invalid cloud provider";}m=this.i18n.AddDatastoreDlg.validation.errorInfo.replace("${missingFields}",k.join(", ")).replace(/,([^,]*)$/," "+this.i18n.FilterDlg.and+"$1");m=m.replace(/:/g,"");return k.length?m:!1},_populateCloudOptions:function(m){this._disableControls(!0);var n=(m.provider||"").toLowerCase(),k=m.info.objectStore;this.cloudStoreOption.value=this.i18n.AddDatastoreDlg.cloudProviders[n];this._displayCloudStoreContent(n);if(-1<m.info.objectStore.indexOf("/")){var l=
m.info.objectStore.indexOf("/");k=m.info.objectStore.substring(0,l);this.cloudFolder.value=m.info.objectStore.substring(l+1)}else f.add(this.cloudFolderContainer,"hide");m=JSON.parse(m.info.connectionString);switch(n){case "amazon":this.amazonCredentialType.value=m.credentialType;"accesskey"===m.amazonCredentialType&&(this.accessKeyId.value=m.accessKeyId,this.secretKeyId.value=m.secretAccessKey);n=this.getRegionID(this.regionData.region,m.regionEndpointUrl);this.region.value=n?n:"custom";this.storageURL.value=
m.regionEndpointUrl;this.bucketName.value=k;break;case "google":this.googleCredentialType.value=m.credentialType;"accesskey"===m.googleCredentialType&&(this.accessKeyId.value=m.accessKeyId,this.secretKeyId.value=m.secretAccessKey);n=this.getRegionID(this.regionData.regionGoogle,m.regionEndpointUrl.substring(8));this.regionGoogle.value=n;this.bucketName.value=k;break;case "azure":this.accountKey.value=m.accountKey;this.accountName.value=m.accountName;this.environment.value=m.accountEndpoint;this.containerName.value=
k;break;case "alibaba":case "huawei":this.accessKeyId.value=m.accessKeyId;this.secretKeyId.value=m.secretAccessKey;this.bucketName.value=k;"alibaba"===n?(n=this.getRegionID(this.regionData.regionAlibaba,m.regionEndpointUrl),this.regionAlibaba.value=n?n:"custom"):(n=this.getRegionID(this.regionData.regionHuawei,m.regionEndpointUrl),this.regionHuawei.value=n?n:"custom");this.storageURL.value=m.regionEndpointUrl;break;default:throw"Invalid cloud provider";}},startDatastoreCloudEdit:function(){this._disableControls(!1);
this._showCloudTypeUI(this.getCloudStoreValue(this.cloudStoreOption.value));this._showPrivateURL(null,!!this.storageURL.value);this.editing=!0},getCloudStoreValue:function(m){var n;Object.keys(this.i18n.AddDatastoreDlg.cloudProviders).forEach(function(k){m===this.i18n.AddDatastoreDlg.cloudProviders[k]&&(n=k)},this);return n}})})},"arcgisonline/pages/item/widgets/typeOptions/datastoreNoSQL":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreNoSQLSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreNoSQL.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=q["default"].substitute(l["default"],{i18n:k["default"].itemProperties});this.datastoreId=e.item.id;this.portal=
e.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+"/data";this.itemData={};this.newItemData={};this.hostingServer=null}h.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};h.prototype._getServerAndItemInformation=function(){var e=this,d=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(g){e.federatedServers=g.servers.servers;
e.itemData=g.itemData;e._setupNoSQLSettings(e.itemData)},function(g){d.reject(g)});return d};h.prototype._setupNoSQLSettings=function(e){this.datastoreNoSQLSettings&&this.datastoreNoSQLSettings.destroyRecursive();this.datastoreNoSQLSettings=(new c["default"]({settingsMode:!0,itemData:e})).placeAt(this.noSQLSettingsContainer)};h.prototype._connectionChange=function(){if(this.editing){var e=new m["default"];this.newItemData=this.datastoreNoSQLSettings.getNoSQLUpdatedItem({});this._startValidatePath();
e.resolve();return e}};h.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};h.prototype._handleUpdateError=function(){};h.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),t["default"].subscribe("settings/noSQLConnectionChange",this._connectionChange.bind(this)),
t["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),p["default"](this.datastoreNoSQLEditBtn,"click",this._startDatastoreNoSQLEdit.bind(this)),p["default"](this.datastoreNoSQLCancelBtn,"click",this._cancelDatastoreNoSQLEdit.bind(this)))};
h.prototype._startDatastoreEdit=function(){r["default"].hideNode(this.datastoreNoSQLEditBtn)};h.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreNoSQLEditBtn)};h.prototype._startDatastoreNoSQLEdit=function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");r["default"].showNode(this.datastoreNoSQLCancelBtn);this.datastoreNoSQLSettings.startDatastoreNoSQLEdit();r["default"].showNode(this.validateBtn)};h.prototype._cancelDatastoreNoSQLEdit=function(){t["default"].publish("settings/cancelDatastoreEdit")};
h.prototype._startValidatePath=function(){this.disableSave=!0;this._handlePropertyChange();r["default"].deactivateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};h.prototype._validateConnection=function(){var e=this._createDatastoreObject();r["default"].deactivateNode(this.validateAlert);r["default"].disableNode(this.validateBtn,!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;t["default"].publish("settings/validateConnection",e)};h.prototype._validationComplete=
function(e){this.editing&&(r["default"].disableNode(this.validateBtn,!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,e.filter(function(d){return d[0]}).filter(function(d){return"success"===d[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&(this._showValidationAlert("alert-green",this.i18n.itemProperties.validateDatastoreSuccess),this._handlePropertyChange())):this._showValidationAlert("alert-red",this.i18n.itemProperties.validateDatastoreFailed))};h.prototype._showValidationAlert=
function(e,d){r["default"].removeClasses(this.validateAlert,["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=d;this.validateAlert.style.whiteSpace="nowrap";this.validateAlert.style.maxWidth="inherit";r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(e)};h.prototype._createDatastoreObject=function(){var e={info:{isManaged:!1}};e=this.datastoreNoSQLSettings.createNoSQLDataObject(e,this.newItemData);e.type=this.itemData.type;e.path=this.itemData.path;
return e};h.prototype.hasChanges=function(){return!this.disableSave};h.prototype.save=function(){var e=new m["default"];if(this.editing&&this.hasChanges()){this.emitSuccessMessage=!0;var d=this._createDatastoreObject();e.resolve({changed:{},toChange:{text:JSON.stringify(d)}})}else e.resolve({changed:{},toChange:{}});return e};h.prototype.reset=function(){var e=new m["default"];this.editing&&(this._getServerAndItemInformation(),r["default"].showNode(this.datastoreNoSQLEditBtn),r["default"].hideNode(this.datastoreNoSQLCancelBtn),
r["default"].hideNode(this.validateBtn),r["default"].deactivateNode(this.validateAlert));this.editing=!1;e.resolve();return e};return h=w.__decorate([a["default"](v["default"],b["default"])],h)}()})},"arcgisonline/sharing/dijit/DatastoreNoSQLSettings":function(){define("esri/declare esri/request dojo/string dojo/query dojo/topic dojo/dom-class dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreNoSQLSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){return K([a,b,p],{templateString:w.substitute(q,{i18n:t.AddDatastoreDlg}),constructor:function(m){this.inherited(arguments);this.settingsMode=m.settingsMode;this.i18n=t},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&this._populateNoSQLSettingsPage()},_displayNoSQLContent:function(m){this.noSQLOption.value=m;this.settingsMode&&r.publish("settings/noSQLConnectionChange")},_populateNoSQLSettingsPage:function(){this._disableControls(!0);
f.add(this.noSQLGeneralDescription,"hide");this.noSQLConnectionURI.value=this.itemData.info.connectionProperties.connectionUri;this.noSQLOption.value=this.itemData.info.implementation;this.itemData.info.noSQLFallBackServer&&(this.noSQLFallBackServer.value=this.itemData.info.noSQLFallBackServer);this.noSQLFallBackServer.disabled=!0;this.noSQLUsername.value=this.itemData.info.connectionProperties.username;this.noSQLUsername.disabled=!0;this.noSQLPassword.value=this.itemData.info.passwordForSettings;
this.noSQLDataBase.value=this.itemData.info.connectionProperties.database;this.noSQLDataBase.disabled=!0},getNoSQLUpdatedItem:function(m){m||(m={});m.noSQLConnectionURI=this.noSQLConnectionURI.value;m.noSQLFallBackServer=this.noSQLFallBackServer.value;m.noSQLUsername=this.noSQLUsername.value;m.noSQLPassword=this.noSQLPassword.value;m.noSQLDataBase=this.noSQLDataBase.value;return m},validateNoSQLInputs:function(m){var n=[];m.noSQLConnectionURI||n.push(this.i18n.AddDatastoreDlg.noSQLConnectionURI);
m.noSQLUsername||n.push(this.i18n.AddDatastoreDlg.noSQLUsername);m.noSQLPassword||n.push(this.i18n.AddDatastoreDlg.noSQLPassword);m.noSQLDataBase||n.push(this.i18n.AddDatastoreDlg.noSQLDataBase);m=this.i18n.AddDatastoreDlg.validation.errorInfo.replace("${missingFields}",n.join(", ")).replace(/,([^,]*)$/," "+this.i18n.FilterDlg.and+"$1");m=m.replace(/:/g,"");return n.length?m:!1},createNoSQLDataObject:function(m,n){m.path="/nosqlDatabases/"+n.title;m.type="nosql";m.info.provider="Neo4J";m.info.dsFeature=
"graphStore";m.info.factory="nosql";m.info.implementation="Neo4j";m.info.category="database";m.info.systemManaged=!1;m.info.isManagedData=!0;m.info.passwordForSettings=n.noSQLPassword;m.info.purposes=["knowledge-graph"];var k=m.info.connectionProperties={};k.connectionUri=n.noSQLConnectionURI;""!==n.noSQLFallBackServer&&(k.fallbackServerAddresses=[n.noSQLFallBackServer.split(",")]);k.username=n.noSQLUsername;k.password=n.noSQLPassword;k.database=n.noSQLDataBase;return m},_onNoSQLOptionChange:function(m){this.settingsMode&&
r.publish("settings/noSQLConnectionChange")},_disableControls:function(m){this.noSQLConnectionURI.disabled=m;this.noSQLFallBackServer.disabled=m;this.noSQLPassword.disabled=m},startDatastoreNoSQLEdit:function(){this._disableControls(!1);this.editing=!0}})})},"arcgisonline/pages/item/widgets/typeOptions/datastoreServer":function(){define("require exports tslib ../../../../esriGeowConfig ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/_federated-servers-table ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/_base/lang dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreServer.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);return function(){function d(g,u){this.templateString=m["default"].substitute(e["default"],{i18n:h["default"].itemProperties});
this.datastoreId=g.item.id;this.portal=g.page.portal;this.registeredServersUrl=v["default"].restBaseUrl+"portals/self/datastores/getServers";this.addToServerUrl=v["default"].restBaseUrl+"portals/self/datastores/addToServer";this.removeFromServerUrl=v["default"].restBaseUrl+"portals/self/datastores/removeFromServer";this.refreshServerUrl=v["default"].restBaseUrl+"portals/self/datastores/refreshServer"}d.prototype.startup=function(){this.inherited(arguments);return this._getServerInformation()};d.prototype._initHandlers=
function(){this.own(n["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),n["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),n["default"].subscribe("settings/selectedServersChange",this._selectedServersChange.bind(this)),n["default"].subscribe("settings/validateConnection",this._validateConnection.bind(this)),n["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),n["default"].subscribe("settings/cancelDatastoreEdit",
this._cancelDatastoreEdit.bind(this)),n["default"].subscribe("settings/updateServers",this._updateServers.bind(this)),n["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"](this.datastoreServersEditBtn,"click",this._startDatastoreServersEdit.bind(this)),t["default"](this.datastoreServersCancelBtn,"click",this._cancelDatastoreServersEdit.bind(this)))};d.prototype.getSelectedServers=function(){return{servers:this.federatedServersTable.getSelectedServers()}};
d.prototype.hasChanges=function(g){var u=this.getSelectedServers();this.serversToAdd=[];this.serversToRemove=[];this.serversToRemove=this._findDifferences(this.registeredServers.servers,u.servers);this.serversToAdd=this._findDifferences(u.servers,g?[]:this.registeredServers.servers);return!(!this.serversToAdd.length&&!this.serversToRemove.length)};d.prototype.save=function(g){var u=this,x=new k["default"];(this.editing||g)&&this.hasChanges(g)?this.processServers(g).then(function(y){var B=!1,C="";
y.forEach(function(z){if(!z.success){B=!0;C.length&&(C+="\x3cbr\x3e");C+=z.data.message+" ";var D=u.federatedServers.filter(function(E){return E.id===z.data.serverId});D.length&&(C+="("+D[0].url+") ")}});B?x.reject({message:C}):x.resolve({changed:{},toChange:{}})}):x.resolve({changed:{},toChange:{}});return x};d.prototype.processServers=function(g){function u(E,A,F){c["default"].request({url:E,content:{datastoreId:F,serverId:A}},{usePost:!0}).then(function(H){x(!0,H)},function(H){x(!1,H)})}function x(E,
A){z++;D.push({success:E,data:A});z<C.length?u(C[z].url,C[z].serverId,C[z].datastoreId):y.resolve(D)}var y=new k["default"];g=this._createRequestArray(this.serversToAdd,g?this.refreshServerUrl:this.addToServerUrl,this.datastoreId,g);var B=this._createRequestArray(this.serversToRemove,this.removeFromServerUrl,this.datastoreId),C=g.concat(B),z=0,D=[];u(C[0].url,C[0].serverId,C[0].datastoreId);return y};d.prototype.reset=function(){var g=new k["default"];this.editing&&(this._getServerInformation(),f["default"].showNode(this.datastoreServersEditBtn),
f["default"].hideNode(this.datastoreServersCancelBtn));this.editing=!1;g.resolve();return g};d.prototype._updateServers=function(){var g=this;this.save(!0).then(function(){return g._getServerInformation()})};d.prototype._validationComplete=function(){f["default"].disableNode(this.datastoreServersEditBtn,!1)};d.prototype._getServerInformation=function(){var g=this,u=new k["default"];l["default"]({servers:this.portal.getFederatedServers(),registeredServers:c["default"].request({url:this.registeredServersUrl,
content:{datastoreId:this.datastoreId}},{usePost:!0})}).then(function(x){g.federatedServers=q["default"].clone(x.servers.servers);g.registeredServers=q["default"].clone(x.registeredServers);g._setupServers(x.servers.servers,x.registeredServers);u.resolve()},function(x){u.reject(x)});return u};d.prototype._startDatastoreServersEdit=function(){this.editing=!0;n["default"].publish("settings/startDatastoreEdit");f["default"].showNode(this.datastoreServersCancelBtn);this.federatedServersTable.updateServerStatuses(!0)};
d.prototype._cancelDatastoreServersEdit=function(){n["default"].publish("settings/cancelDatastoreEdit")};d.prototype._startDatastoreEdit=function(){f["default"].hideNode(this.datastoreServersEditBtn)};d.prototype._cancelDatastoreEdit=function(){f["default"].showNode(this.datastoreServersEditBtn)};d.prototype._validateConnection=function(g){this.federatedServersTable.validateDatastoreForServers(JSON.stringify(g))};d.prototype._createRequestArray=function(g,u,x,y){return g.map(function(B){return{serverId:B,
url:u,datastoreId:x}})};d.prototype._findDifferences=function(g,u){var x=[];g.forEach(function(y){var B=!1;(B=u.length?!u.some(function(C){return C.id===y.id}):!0)&&x.push(y.id)});return x};d.prototype._setupServers=function(g,u){f["default"].disableNode(this.datastoreServersEditBtn,!0);var x=this._checkRegisteredServers(g,u.servers);this.federatedServersTable&&this.federatedServersTable.destroyRecursive();this.federatedServersTable=(new a["default"]({federatedServers:x,filterFederatedServers:!0,
datastoreId:this.datastoreId,settingsMode:!0})).placeAt(this.serversGridContainer)};d.prototype._checkRegisteredServers=function(g,u){g.forEach(function(x){var y=u.some(function(B){return B.id===x.id});x.isRegistered=y});-1<this.item.typeKeywords.indexOf("bigDataFileShare")&&(g=g.filter(function(x){return-1!==x.serverFunction.indexOf("GeoAnalytics")}));return g};d.prototype._selectedServersChange=function(){var g=new k["default"];this._handlePropertyChange();return g.resolve()};d.prototype._handleUpdateSuccess=
function(){this._cancelDatastoreServersEdit()};d.prototype._handleUpdateError=function(){};return d=w.__decorate([b["default"](r["default"],p["default"])],d)}()})},"arcgisonline/sharing/dijit/_federated-servers-table":function(){define("esri/declare arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/pages/utils/dom arcgisonline/pages/utils/clone dojo/_base/array dojo/Deferred dojo/string dojo/query dojo/topic dojo/dom-class dojo/dom-construct dojo/dom-attr dojo/DeferredList dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_federated-servers-table.html dojo/i18n!arcgisonline/nls/arcgisonline dojo/NodeList-traverse".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){return K([k,l],{templateString:a.substitute(h,{i18n:e.AddDatastoreDlg}),statusImageBaseUrl:"js/arcgisonline/sharing/dijit/css/images/",validateServerUrl:w.restBaseUrl+"portals/self/datastores/validate",constructor:function(d){this.settingsMode=d.settingsMode;this.singleSelect=d.singleSelect;this.datastoreId=d.datastoreId;this.i18n=e.AddDatastoreDlg;this.serversi18n=e.myOrganization.serversTab;this.federatedServers=d.federatedServers;this.filterFederatedServers=
d.filterFederatedServers;this.selectedServers=[];this.serverTypes=[];this.federatedServersForDisplaying=d.federatedServers},postCreate:function(){this.filterFederatedServers&&(this.federatedServers=this.filterServers(this.federatedServers,!1,!1),this.federatedServersForDisplaying=r["default"](this.federatedServers));this.federatedServersForDisplaying.forEach(function(d){this.buildFederatedServersRow(d)}.bind(this));this.singleSelect&&q.add(this.selectAllCheckbox,"hide");this.datastoreId&&this.validateDatastoreForServers();
this.checkServersType()},checkServersType:function(){if(G.isArcGISEnterpriseOnKubernetes())this.federatedServersForDisplaying.forEach(function(g){var u={};u.name=g.adminUrl;u.type="Linux";this.serverTypes.push(u)}.bind(this));else{var d=[];this.federatedServersForDisplaying.forEach(function(g){d.push(function(){var u=new c;G.request({url:g.adminUrl+"/admin/machines?f\x3djson"},{usePost:!0}).then(function(x){u.resolve(x)}.bind(this),function(x){u.reject(x)}.bind(this));return u}.call(this))});(new n(d)).then(function(g){this.validateServerType(g)}.bind(this))}},
validateServerType:function(d){var g=[];this.federatedServersForDisplaying=this.federatedServersForDisplaying.filter(function(u,x){return d[x][0]?(g.push(function(){var y=new c;G.request({url:u.adminUrl+"/admin/machines/"+d[x][1].machines[0].machineName+"?f\x3djson"},{usePost:!0}).then(function(B){y.resolve(B)}.bind(this),function(B){y.reject(B)}.bind(this));return y}.call(this)),!0):!1}.bind(this));(new n(g)).then(function(u){u.forEach(function(x,y){if(x[0]){var B={};B.name=this.federatedServersForDisplaying[y].adminUrl;
B.type=-1<x[1].platform.indexOf("Windows")?"Windows":"Linux";this.serverTypes.push(B)}}.bind(this))}.bind(this))},filterServersByServerPath:function(d){var g=-1<("folder"===d.dataStoreType?d.newServerFolderPath||d.publisherFolderPath:d.publisherFileShareFolderPath)[0].indexOf("/")?"Linux":"Windows";return this.federatedServersForDisplaying.filter(function(u){return this.serverTypes.some(function(x){return x.name===u.adminUrl&&x.type===g})}.bind(this))},checkDatabaseClient:function(d){var g=!1;"database"===
d.dataStoreType&&d.publisherConnectionString&&d.publisherConnectionString.split(";").forEach(function(u){-1<u.indexOf("DBCLIENT")&&-1<["bigquery","snowflake","redshift"].indexOf(u.split("\x3d")[1])&&(g=!0)});return g},renderTable:function(d){this.federatedServersForDisplaying=r["default"](this.federatedServers);var g=d.dataStoreType,u=this.checkBigDataFileShare(g);g=this.checkNoSQLFileShare(g);var x=this.checkDatabaseClient(d);this.federatedServersForDisplaying=this.filterServers(this.federatedServersForDisplaying,
u,g,x);["folder","fileshare"].includes(d.dataStoreType)&&(this.federatedServersForDisplaying=this.filterServersByServerPath(d));t.empty(this.federatedServersTableBody);this.federatedServersForDisplaying.forEach(function(y){this.buildFederatedServersRow(y)}.bind(this))},checkBigDataFileShare:function(d){return-1<["fileshare","hdfs","hive","bdfsCloud"].indexOf(d)},checkNoSQLFileShare:function(d){return-1<["Neo4j"].indexOf(d)},formatServerDisplay:function(d){var g=d.url;(d=this.getServerType(d))&&(g+=
" ("+d+")");return g},getServerType:function(d){var g=d.serverFunction&&d.serverFunction.replace(/\s+/g,"").split(",")||[],u="";"HOSTING_SERVER"===d.serverRole&&(u+=this.serversi18n.hostedSetting);-1<f.indexOf(g,"NotebookServer")&&(u+=this.appendServer(u,this.serversi18n.notebookServerSetting));-1<f.indexOf(g,"GeoAnalytics")&&(u+=this.appendServer(u,this.serversi18n.geoAnalyticsServerSetting));-1<f.indexOf(g,"RasterAnalytics")&&(u+=this.appendServer(u,this.serversi18n.rasterAnalysisSetting));-1<f.indexOf(g,
"ImageHosting")&&(u+=this.appendServer(u,this.serversi18n.imageHostingSetting));-1<f.indexOf(g,"MissionServer")&&(u+=this.appendServer(u,this.serversi18n.missionServerSetting));return u},appendServer:function(d,g){return""+(d&&", ")+g},buildFederatedServersRow:function(d){var g=t.create("tr",null,this.federatedServersTableBody),u=t.create("td",null,g),x=null;x=this.singleSelect?t.create("input",{type:"radio",name:"serverId","class":"federated-server-checkbox","data-server-id":d.id,disabled:!0},u):
t.create("input",{type:"checkbox","class":"federated-server-checkbox","data-server-id":d.id,disabled:!0},u);d.isRegistered&&(x.checked=!0);this.connect(x,"onchange","selectServer");t.create("td",{innerHTML:this.formatServerDisplay(d)},g);g=t.create("td",{"class":"server-status"},g);t.create("img",{src:G.relativeToExplicitUrl("js/arcgisonline/css/images/LoadingAnimation_circle24blue.gif"),"class":"hide","data-server-id":d.id,"data-server-validate":""},g);t.create("img",{src:"","class":"hide","data-server-id":d.id,
"data-server-status":""},g);t.create("span",{innerHTML:this.i18n.serverValidation.validating,"data-server-id":d.id},g)},selectAll:function(d){b(".federated-server-checkbox").forEach(function(g){g.disabled||(g.checked=d.target.checked?!0:!1,this.updateSelectedServers(g,!0),this.toggleActiveState(g))}.bind(this))},disableAllCheckboxes:function(){v.forEachNode(b("input[type\x3d'checkbox'",this.domNode),function(d){d.disabled=!0})},getSelectedServers:function(){v.forEachNode(b(".federated-server-checkbox"),
function(d){d.checked&&this.updateSelectedServers(d,!1)}.bind(this));return this.selectedServers},selectServer:function(d){d=d.target;this.updateSelectedServers(d,!0);this.toggleActiveState(d)},updateSelectedServers:function(d,g){var u=m.get(d,"data-server-id");if(d.checked){var x=this.federatedServersForDisplaying.filter(function(y){return y.id===u})[0];-1===this.selectedServers.indexOf(x)&&this.selectedServers.push(x)}else this.selectedServers=this.selectedServers.filter(function(y){return y.id!==
u});g&&p.publish("settings/selectedServersChange",{servers:this.selectedServers})},updateServerStatuses:function(d){this.federatedServersForDisplaying.forEach(function(u){var x=b('img[data-server-id\x3d"'+u.id+'"][data-server-validate]')[0],y=b('img[data-server-id\x3d"'+u.id+'"][data-server-status]')[0],B=b('input[data-server-id\x3d"'+u.id+'"]')[0],C=b('span[data-server-id\x3d"'+u.id+'"]')[0],z="",D=this.statusImageBaseUrl,E=this.serverValidationResult.filter(function(F){return F[1].serverId===u.id})[0][1].result||
{},A=E.status||"error";E.error?z+=E.error.message:(E.machines||[]).length&&(A=E.machines.filter(function(F){return"error"===F.status?(z+=F.machine+": ",F.dataItems.forEach(function(H){z+=H.message+". "}),!0):!1}).length?"error":"success");switch(A.toLowerCase()){case "success":D+="server-valid-icon.png";B.disabled=!1;C.innerHTML=this.i18n.serverValidation.normal;this.selectAllCheckbox.disabled&&(this.selectAllCheckbox.disabled=!1);break;case "failure":case "error":D+="server-invalid-icon.png";C.innerHTML=
this.i18n.serverValidation.notAvailable;B.disabled=d?!1:!0;break;default:D+="server-unknown-icon.png",C.innerHTML=this.i18n.serverValidation.notAvailable,B.disabled=!1}y.parentElement.title=z.replace(/[\r\n\t]/g," ");y.src=G.relativeToExplicitUrl(D);q.add(x,"hide");q.remove(y,"hide");this.settingsMode&&!d&&this.disableAllCheckboxes()}.bind(this));if(!this.settingsMode&&1===this.federatedServersForDisplaying.length){var g=b('input[data-server-id\x3d"'+this.federatedServersForDisplaying[0].id+'"]')[0];
g.disabled||(g.checked=!0,this.updateSelectedServers(g,!1),p.publish("servers/serverAutoSelected"))}},toggleActiveState:function(d){var g=b(d).closest("tr")[0];d.checked?q.add(g,"active"):q.remove(g,"active")},filterServers:function(d,g,u,x){return(d||[]).filter(function(y){var B=(y.serverRole||"").toUpperCase(),C=["ARCGIS_NOTEBOOK_SERVER","ARCGIS_MISSION_SERVER"];y=y.serverFunction&&y.serverFunction.replace(/\s+/g,"").split(",")||[];var z=["NOTEBOOKSERVER","WORKFLOWMANAGER","MISSIONSERVER"],D="HOSTING_SERVER"===
B;g&&-1===y.indexOf("GeoAnalytics")&&(C.push(B),D=!1);u&&-1===y.indexOf("KnowledgeServer")&&(C.push(B),D=!1);B=-1===C.indexOf(B);x&&(B=!1);return D||B&&(!y.length||y.some(function(E){return-1===z.indexOf(E.toUpperCase())}))})},validateDatastoreForServers:function(d){this.disableAllCheckboxes();var g=[];this.federatedServersForDisplaying.forEach(function(u){var x=b('img[data-server-id\x3d"'+u.id+'"][data-server-validate]',this.domNode)[0],y=b('img[data-server-id\x3d"'+u.id+'"][data-server-status]',
this.domNode)[0],B=b('span[data-server-id\x3d"'+u.id+'"]',this.domNode)[0];q.add(y,"hide");q.remove(x,"hide");B.innerHTML=this.i18n.serverValidation.validating;var C={serverId:u.id};d?C.datastore=d:C.datastoreId=this.datastoreId;d&&"folder"===JSON.parse(d).type&&G.isArcGISEnterpriseOnKubernetes()&&(C.options=JSON.stringify({allowServicesRestart:!0}));g.push(function(){var z=new c,D={serverId:u.id};G.request({url:this.validateServerUrl,content:C},{usePost:!0}).then(function(E){D.result=E;z.resolve(D)}.bind(this),
function(E){D.result={error:E};z.reject(D)}.bind(this));return z}.call(this))}.bind(this));(new n(g)).then(function(u){this.serverValidationResult=u;p.publish("settings/validationComplete",u);this.updateServerStatuses()}.bind(this))}})})},"arcgisonline/pages/item/widgets/typeOptions/datastoreBDFSFileShare":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreBDFSFileShareSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreBDFSFileShare.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=q["default"].substitute(l["default"],{i18n:k["default"].itemProperties});this.datastoreId=e.item.id;this.portal=
e.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+"/data";this.itemData={};this.newItemData={};this.hostingServer=null}h.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};h.prototype._getServerAndItemInformation=function(){var e=this,d=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(g){var u;e.federatedServers=null===(u=
null===g||void 0===g?void 0:g.servers)||void 0===u?void 0:u.servers;e.itemData=g.itemData;e._setupFileShareSettings(e.itemData)},function(g){d.reject(g)});return d};h.prototype._setupFileShareSettings=function(e){this.datastoreBDFSFileShareSettings&&this.datastoreBDFSFileShareSettings.destroyRecursive();this.datastoreBDFSFileShareSettings=(new c["default"]({settingsMode:!0})).placeAt(this.fileshareSettingsContainer);e=JSON.parse(e.info.connectionString).path;this.datastoreBDFSFileShareSettings.setFileSharePaths(e)};
h.prototype._filesharePathChange=function(e){if(this.editing)return e=new m["default"],this.newItemData=this.datastoreBDFSFileShareSettings.getFolderParamterUpdatedItem({}),this._startValidatePath(),e.resolve(),e};h.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};h.prototype._handleUpdateError=function(){};h.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),
t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),t["default"].subscribe("settings/filesharePathChange",this._filesharePathChange.bind(this)),t["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),
p["default"](this.datastoreBDFSFileShareEditBtn,"click",this._startDatastoreBDFSFileShareEdit.bind(this)),p["default"](this.datastoreBDFSFileShareCancelBtn,"click",this._cancelDatastoreBDFSFileShareEdit.bind(this)))};h.prototype._startDatastoreEdit=function(){r["default"].hideNode(this.datastoreBDFSFileShareEditBtn)};h.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreBDFSFileShareEditBtn)};h.prototype._startDatastoreBDFSFileShareEdit=function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");
r["default"].showNode(this.datastoreBDFSFileShareCancelBtn);this.datastoreBDFSFileShareSettings.startDatastoreBDFSFileShareEdit()};h.prototype._cancelDatastoreBDFSFileShareEdit=function(){t["default"].publish("settings/cancelDatastoreEdit")};h.prototype._startValidatePath=function(){this.disableSave=!0;this._handlePropertyChange();r["default"].deactivateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};h.prototype._validateConnection=function(){var e=this._createDatastoreObject();
r["default"].deactivateNode(this.validateAlert);r["default"].disableNode(this.validateBtn,!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;t["default"].publish("settings/validateConnection",e)};h.prototype._validationComplete=function(e){this.editing&&(r["default"].disableNode(this.validateBtn,!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,e.filter(function(d){return d[0]}).filter(function(d){return"success"===d[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&
(this._showValidationAlert("alert-green",this.i18n.itemProperties.validateDatastoreSuccess),this._handlePropertyChange())):this._showValidationAlert("alert-red",this.i18n.itemProperties.validateDatastoreFailed))};h.prototype._showValidationAlert=function(e,d){r["default"].removeClasses(this.validateAlert,["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=d;r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(e)};h.prototype._createDatastoreObject=function(){var e=
{info:{isManaged:!1}};e=this.datastoreBDFSFileShareSettings.createFileShareProviderDataObject(e,this.newItemData);e.type=this.itemData.type;e.path=this.itemData.path;return e};h.prototype.hasChanges=function(){return!this.disableSave};h.prototype.save=function(){var e=new m["default"];if(this.editing&&this.hasChanges()){this.emitSuccessMessage=!0;var d=this._createDatastoreObject();e.resolve({changed:{},toChange:{text:JSON.stringify(d)}})}else e.resolve({changed:{},toChange:{}});return e};h.prototype.reset=
function(){var e=new m["default"];this.editing&&(this._getServerAndItemInformation(),r["default"].showNode(this.datastoreBDFSFileShareEditBtn),r["default"].hideNode(this.datastoreBDFSFileShareCancelBtn),r["default"].hideNode(this.validateBtn),r["default"].deactivateNode(this.validateAlert));this.editing=!1;e.resolve();return e};return h=w.__decorate([a["default"](v["default"],b["default"])],h)}()})},"arcgisonline/sharing/dijit/DatastoreBDFSFileShareSettings":function(){define("esri/declare dojo/string dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSFileShareSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return K([f,c,a],{templateString:G.substitute(b,{i18n:p.AddDatastoreDlg}),constructor:function(q){this.settingsMode=q.settingsMode;this.i18n=p},startup:function(){this.inherited(arguments);this.settingsMode&&r.add(this.bdfsFileShareGeneralDescription,"hide");this.addEventListeners()},addEventListeners:function(){this.own(w(this.publisherFileShareFolderPath,"change",this._onPublisherFileShareFolderChange.bind(this)))},_onPublisherFileShareFolderChange:function(){this.settingsMode&&
v.publish("settings/filesharePathChange")},_disableTextBoxes:function(q){this.publisherFileShareFolderPath.readOnly=q},getFileshareParamterUpdatedItem:function(q){q.publisherFileShareFolderPath=this.publisherFileShareFolderPath.value;return q},validateFileShareInputs:function(q){return q.publisherFileShareFolderPath?this.isDriveLetterLocation&&!q.publisherFileShareHostName?this.i18n.AddDatastoreDlg.validation.invalidPublisherHostName:!1:this.i18n.AddDatastoreDlg.validation.invalidPublisherFolderPath},
createFileShareProviderDataObject:function(q,t){q.type="bigDataFileShare";q.path="/bigDataFileShares/"+t.title;q.info.connectionString=JSON.stringify({path:t.publisherFileShareFolderPath});q.info.connectionType="fileShare";delete q.info.isManaged;return q},setFileSharePaths:function(q){this._disableTextBoxes(!0);this.publisherFileShareFolderPath.value=q},getFolderParamterUpdatedItem:function(q){q.publisherFileShareFolderPath=this.publisherFileShareFolderPath.value;return q},startDatastoreBDFSFileShareEdit:function(){this._disableTextBoxes(!1)}})})},
"arcgisonline/pages/item/widgets/typeOptions/datastoreBDFSHDFS":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreBDFSHDFSSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreBDFSHDFS.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);
f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=q["default"].substitute(l["default"],{i18n:k["default"].itemProperties});this.datastoreId=e.item.id;this.portal=e.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+
"/data";this.itemData={};this.newItemData={};this.hostingServer=null}h.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};h.prototype._getServerAndItemInformation=function(){var e=this,d=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(g){var u;e.federatedServers=null===(u=null===g||void 0===g?void 0:g.servers)||void 0===u?void 0:u.servers;e.itemData=g.itemData;
e._setupHDFSSettings(e.itemData)},function(g){d.reject(g)});return d};h.prototype._setupHDFSSettings=function(e){this.datastoreBDFSHDFSSettings&&this.datastoreBDFSHDFSSettings.destroyRecursive();this.datastoreBDFSHDFSSettings=(new c["default"]({settingsMode:!0})).placeAt(this.hdfsSettingsContainer);e=JSON.parse(e.info.connectionString);this.datastoreBDFSHDFSSettings.setHDFSParameters(e.path,e.username)};h.prototype._hdfsPathChange=function(e){if(this.editing)return e=new m["default"],this.newItemData=
this.datastoreBDFSHDFSSettings.getHDFSParamterUpdatedItem({}),this._startValidatePath(),e.resolve(),e};h.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};h.prototype._handleUpdateError=function(){};h.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),t["default"].subscribe("settings/hdfsPathChange",
this._hdfsPathChange.bind(this)),t["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),p["default"](this.datastoreBDFSHDFSEditBtn,"click",this._startDatastoreBDFSHDFSEdit.bind(this)),p["default"](this.datastoreBDFSHDFSCancelBtn,
"click",this._cancelDatastoreBDFSHDFSEdit.bind(this)))};h.prototype._startDatastoreEdit=function(){r["default"].hideNode(this.datastoreBDFSHDFSEditBtn)};h.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreBDFSHDFSEditBtn)};h.prototype._startDatastoreBDFSHDFSEdit=function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");r["default"].showNode(this.datastoreBDFSHDFSCancelBtn);this.datastoreBDFSHDFSSettings.startDatastoreBDFSHDFSEdit()};h.prototype._cancelDatastoreBDFSHDFSEdit=
function(){t["default"].publish("settings/cancelDatastoreEdit")};h.prototype._startValidatePath=function(){this.disableSave=!0;this._handlePropertyChange();r["default"].deactivateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};h.prototype._validateConnection=function(){var e=this._createDatastoreObject();r["default"].deactivateNode(this.validateAlert);r["default"].disableNode(this.validateBtn,!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;t["default"].publish("settings/validateConnection",
e)};h.prototype._validationComplete=function(e){this.editing&&(r["default"].disableNode(this.validateBtn,!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,e.filter(function(d){return d[0]}).filter(function(d){return"success"===d[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&(this._showValidationAlert("alert-green",this.i18n.itemProperties.validateDatastoreSuccess),this._handlePropertyChange())):this._showValidationAlert("alert-red",this.i18n.itemProperties.validateDatastoreFailed))};
h.prototype._showValidationAlert=function(e,d){r["default"].removeClasses(this.validateAlert,["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=d;r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(e)};h.prototype._createDatastoreObject=function(){var e={info:{isManaged:!1}};e=this.datastoreBDFSHDFSSettings.createHDFSProviderDataObject(e,this.newItemData);e.type=this.itemData.type;e.path=this.itemData.path;return e};h.prototype.hasChanges=function(){return!this.disableSave};
h.prototype.save=function(){var e=new m["default"];if(this.editing&&this.hasChanges()){this.emitSuccessMessage=!0;var d=this._createDatastoreObject();e.resolve({changed:{},toChange:{text:JSON.stringify(d)}})}else e.resolve({changed:{},toChange:{}});return e};h.prototype.reset=function(){var e=new m["default"];this.editing&&(this._getServerAndItemInformation(),r["default"].showNode(this.datastoreBDFSHDFSEditBtn),r["default"].hideNode(this.datastoreBDFSHDFSCancelBtn),r["default"].hideNode(this.validateBtn),
r["default"].deactivateNode(this.validateAlert));this.editing=!1;e.resolve();return e};return h=w.__decorate([a["default"](v["default"],b["default"])],h)}()})},"arcgisonline/sharing/dijit/DatastoreBDFSHDFSSettings":function(){define("esri/declare dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSHDFSSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c,
a,b,p,q){return K([c,a,b],{templateString:G.substitute(p,{i18n:q.AddDatastoreDlg}),constructor:function(t){this.inherited(arguments);this.settingsMode=t.settingsMode;this.i18n=q},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&(f.add(this.bdfsHDFSDescription,"hide"),f.add(this.hdfsUserKerberoesToggle,"hide"));this.addEventListeners()},_onHDFSPathChange:function(t){this.settingsMode&&r.publish("settings/hdfsPathChange")},_onHDFSUsernameChange:function(t){this.settingsMode&&
r.publish("settings/hdfsPathChange")},_onKerberosSwitchChange:function(t){t.target.checked?f.remove(this.hdfsUserKerberos,"hide"):f.add(this.hdfsUserKerberos,"hide");this.settingsMode&&r.publish("settings/hdfsPathChange")},_onHDFSKeytabLocationChange:function(t){this.settingsMode&&r.publish("settings/hdfsPathChange")},_onHDFSPrincipalUserChange:function(t){this.settingsMode&&r.publish("settings/hdfsPathChange")},_onHDFSPrincipalRealmChange:function(t){this.settingsMode&&r.publish("settings/hdfsPathChange")},
addEventListeners:function(){this.own(v(this.hdfsPath,"change",this._onHDFSPathChange.bind(this)),v(this.hdfsUsername,"change",this._onHDFSUsernameChange.bind(this)),w("input[name\x3d'userKerberosSwitch']",this.domNode).on("change",this._onKerberosSwitchChange.bind(this)),v(this.hdfsKeytabLocation,"change",this._onHDFSKeytabLocationChange.bind(this)),v(this.hdfsPrincipalUser,"change",this._onHDFSPrincipalUserChange.bind(this)),v(this.hdfsPrincipalRealm,"change",this._onHDFSPrincipalRealmChange.bind(this)))},
getHDFSParamterUpdatedItem:function(t){t.hdfsPath=this.hdfsPath.value;t.hdfsUsername=this.hdfsUsername.value;t.hdfsKeytabLocation=this.hdfsKeytabLocation.value;t.hdfsPrincipalUser=this.hdfsPrincipalUser.value;t.hdfsPrincipalRealm=this.hdfsPrincipalRealm.value;return t},validateHDFSInputs:function(t){return t.hdfsPath?!1:this.i18n.AddDatastoreDlg.validation.invalidPublisherFolderPath},createHDFSProviderDataObject:function(t,m){t.type="bigDataFileShare";t.path="/bigDataFileShares/"+m.title;t.info.connectionString=
JSON.stringify({path:m.hdfsPath,username:m.hdfsUsername});t.info.connectionType="hdfs";delete t.info.isManaged;return t},_disableTextBoxes:function(t){this.hdfsPath.readOnly=t;this.hdfsUsername.readOnly=t},setHDFSParameters:function(t,m){this._disableTextBoxes(!0);this.hdfsPath.readOnly=t;this.hdfsUsername.readOnly=m},startDatastoreBDFSHDFSEdit:function(){this._disableTextBoxes(!1)}})})},"arcgisonline/pages/item/widgets/typeOptions/datastoreBDFSHive":function(){define("require exports tslib ./_mixin ../../../utils/dom ../../../../sharing/util ../../../../sharing/dijit/DatastoreBDFSHiveSettings ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/on dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/i18n!../../../../nls/arcgisonline dojo/text!./datastoreBDFSHive.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);return function(){function h(e,d){this.templateString=q["default"].substitute(l["default"],{i18n:k["default"].itemProperties});this.datastoreId=e.item.id;this.portal=
e.page.portal;this.itemDataUrl=this.portal.portalUrl+"content/items/"+this.datastoreId+"/data";this.itemData={};this.newItemData={};this.hostingServer=null}h.prototype.startup=function(){this.inherited(arguments);return this._getServerAndItemInformation()};h.prototype._getServerAndItemInformation=function(){var e=this,d=new m["default"];n["default"]({servers:this.portal.getFederatedServers(),itemData:f["default"].request({url:this.itemDataUrl})}).then(function(g){var u;e.federatedServers=null===(u=
null===g||void 0===g?void 0:g.servers)||void 0===u?void 0:u.servers;e.itemData=g.itemData;e._setupHiveSettings(e.itemData)},function(g){d.reject(g)});return d};h.prototype._setupHiveSettings=function(e){this.datastoreBDFSHiveSettings&&this.datastoreBDFSHiveSettings.destroyRecursive();this.datastoreBDFSHiveSettings=(new c["default"]({settingsMode:!0})).placeAt(this.hiveSettingsContainer);e=JSON.parse(e.info.connectionString);this.datastoreBDFSHiveSettings.setHiveParameters(e.metaStoreUris,e.database,
e.username||"")};h.prototype._hivePathChange=function(e){if(this.editing)return e=new m["default"],this.newItemData=this.datastoreBDFSHiveSettings.getHiveParamterUpdatedItem({}),this._startValidatePath(),e.resolve(),e};h.prototype._handleUpdateSuccess=function(){this.emitSuccessMessage&&(t["default"].publish("settings/updateServers"),this.emitSuccessMessage=!1)};h.prototype._handleUpdateError=function(){};h.prototype._initHandlers=function(){this.own(t["default"].subscribe("settings/update",this._handleUpdateSuccess.bind(this)),
t["default"].subscribe("settings/error",this._handleUpdateError.bind(this)),t["default"].subscribe("settings/hivePathChange",this._hivePathChange.bind(this)),t["default"].subscribe("settings/validationComplete",this._validationComplete.bind(this)),t["default"].subscribe("settings/startDatastoreEdit",this._startDatastoreEdit.bind(this)),t["default"].subscribe("settings/cancelDatastoreEdit",this._cancelDatastoreEdit.bind(this)),p["default"](this.validateBtn,"click",this._validateConnection.bind(this)),
p["default"](this.datastoreBDFSHiveEditBtn,"click",this._startDatastoreBDFSHiveEdit.bind(this)),p["default"](this.datastoreBDFSHiveCancelBtn,"click",this._cancelDatastoreBDFSHiveEdit.bind(this)))};h.prototype._startDatastoreEdit=function(){r["default"].hideNode(this.datastoreBDFSHiveEditBtn)};h.prototype._cancelDatastoreEdit=function(){r["default"].showNode(this.datastoreBDFSHiveEditBtn)};h.prototype._startDatastoreBDFSHiveEdit=function(){this.editing=!0;t["default"].publish("settings/startDatastoreEdit");
r["default"].showNode(this.datastoreBDFSHiveCancelBtn);this.datastoreBDFSHiveSettings.startDatastoreBDFSHiveEdit()};h.prototype._cancelDatastoreBDFSHiveEdit=function(){t["default"].publish("settings/cancelDatastoreEdit")};h.prototype._startValidatePath=function(){this.disableSave=!0;this._handlePropertyChange();r["default"].deactivateNode(this.validateAlert);r["default"].showNode(this.validateBtn)};h.prototype._validateConnection=function(){var e=this._createDatastoreObject();r["default"].deactivateNode(this.validateAlert);
r["default"].disableNode(this.validateBtn,!0);this.validateBtn.innerText=this.i18n.itemProperties.validating;t["default"].publish("settings/validateConnection",e)};h.prototype._validationComplete=function(e){this.editing&&(r["default"].disableNode(this.validateBtn,!1),this.validateBtn.innerText=this.i18n.itemProperties.validate,e.filter(function(d){return d[0]}).filter(function(d){return"success"===d[1].result.status}).length?(this.disableSave=!1,this.hasChanges()&&(this._showValidationAlert("alert-green",
this.i18n.itemProperties.validateDatastoreSuccess),this._handlePropertyChange())):this._showValidationAlert("alert-red",this.i18n.itemProperties.validateDatastoreFailed))};h.prototype._showValidationAlert=function(e,d){r["default"].removeClasses(this.validateAlert,["alert-red","alert-yellow","alert-green"]);this.validateAlert.innerText=d;r["default"].activateNode(this.validateAlert);this.validateAlert.classList.add(e)};h.prototype._createDatastoreObject=function(){var e={info:{isManaged:!1}};e=this.datastoreBDFSHiveSettings.createHiveProviderDataObject(e,
this.newItemData);e.type=this.itemData.type;e.path=this.itemData.path;return e};h.prototype.hasChanges=function(){return!this.disableSave};h.prototype.save=function(){var e=new m["default"];if(this.editing&&this.hasChanges()){this.emitSuccessMessage=!0;var d=this._createDatastoreObject();e.resolve({changed:{},toChange:{text:JSON.stringify(d)}})}else e.resolve({changed:{},toChange:{}});return e};h.prototype.reset=function(){var e=new m["default"];this.editing&&(this._getServerAndItemInformation(),
r["default"].showNode(this.datastoreBDFSHiveEditBtn),r["default"].hideNode(this.datastoreBDFSHiveCancelBtn),r["default"].hideNode(this.validateBtn),r["default"].deactivateNode(this.validateAlert));this.editing=!1;e.resolve();return e};return h=w.__decorate([a["default"](v["default"],b["default"])],h)}()})},"arcgisonline/sharing/dijit/DatastoreBDFSHiveSettings":function(){define("esri/declare dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSHiveSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){return K([c,a,b],{templateString:G.substitute(p,{i18n:q.AddDatastoreDlg}),constructor:function(t){this.inherited(arguments);this.settingsMode=t.settingsMode;this.i18n=q},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&f.add(this.bdfsHIVEDescription,"hide");this.addEventListeners()},_onHiveMetastoreURLsChange:function(t){this.settingsMode&&r.publish("settings/hivePathChange")},_onHiveDatabaseChange:function(t){this.settingsMode&&
r.publish("settings/hivePathChange")},_onHiveUsernameChange:function(t){this.settingsMode&&r.publish("settings/hivePathChange")},_onDatabaseSwitchChange:function(t){t.target.checked?f.remove(this.hiveUserDatabase,"hide"):f.add(this.hiveUserDatabase,"hide")},addEventListeners:function(){this.own(v(this.hiveMetastoreURLs,"change",this._onHiveMetastoreURLsChange.bind(this)),v(this.hiveDatabase,"change",this._onHiveDatabaseChange.bind(this)),v(this.hiveUsername,"change",this._onHiveUsernameChange.bind(this)),
w("input[name\x3d'hiveDatabaseSwitch']",this.domNode).on("change",this._onDatabaseSwitchChange.bind(this)))},getHiveParamterUpdatedItem:function(t){t.hiveMetastoreURLs=this.hiveMetastoreURLs.value;t.hiveDatabase=this.hiveDatabase.value?this.hiveDatabase.value:"default";t.hiveUsername=this.hiveUsername.value;return t},validateHiveInputs:function(t){return t.hiveMetastoreURLs?!1:this.i18n.AddDatastoreDlg.validation.invalidHiveMetastoreURLs},createHiveProviderDataObject:function(t,m){t.type="bigDataFileShare";
t.path="/bigDataFileShares/"+m.title;t.info.connectionString=JSON.stringify({metaStoreUris:m.hiveMetastoreURLs,database:m.hiveDatabase});t.info.connectionType="hive";delete t.info.isManaged;return t},setHiveParameters:function(t,m,n){this._disableTextBoxes(!0);this.hiveMetastoreURLs.value=t;this.hiveDatabase.value=m;this.hiveUsername.value=n},_disableTextBoxes:function(t){this.hiveMetastoreURLs.readOnly=t;this.hiveDatabase.readOnly=t;this.hiveUsername.readOnly=t},startDatastoreBDFSHiveEdit:function(){this._disableTextBoxes(!1)}})})},
"arcgisonline/pages/item/widgets/typeOptions/offline":function(){define("require exports tslib ../../../../esriGeowConfig ../../../dijit/ManageAreas ./_mixin ../../../utils/arrays ../../../utils/dom ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/_base/lang dojo/string dojo/dom-construct dojo/on dojo/Deferred dojo/topic dojo/text!./offline.html".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);
c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);return function(){function d(g,u){this.templateString=e["default"];this.OFFLINE="Offline";this.OFFLINE_DISABLED="OfflineDisabled";this.UPDATE_ITEM_CONTROL="updateitemcontrol"}d.prototype.postCreate=function(){var g=this;this.inherited(arguments);
this._updateManageAreasText();var u=v["default"].portal||v["default"].self,x=u.helpMap.m["120000899"];this._offlineDescription.innerHTML=m["default"].substitute(this.i18n.itemProperties.offlineSection.offlineDescription,{learnUrl:""+u.helpBase+(x?x:"")});c["default"].includes(this.item.typeKeywords,this.OFFLINE)||this._disableOfflineDependencies(!0);(this._isOwner=this.item.itemOwner.username===this.portalUser.username)||a["default"].disableNode(this._manageAreasBtn,!0);x=this.item.sharing;x.groups&&
0<x.groups.length&&x.groups.some(function(y){return y.capabilities&&-1!==y.capabilities.indexOf(g.UPDATE_ITEM_CONTROL)})&&(a["default"].hideNode(this._manageAreasBtn),a["default"].showNode(this._warningContainer),x=u.helpMap.m["120001687"],this._warningLearnMoreLink.href=""+u.helpBase+(x?x:""))};d.prototype._initHandlers=function(){var g=this;this.own(k["default"](this._offlineToggle,"click",function(){g._offlineCheckbox.checked=!g._offlineCheckbox.checked;g._offlineCheckboxChange.call(g)}),k["default"](this._offlineCheckbox,
"change",this._offlineCheckboxChange.bind(this)),k["default"](this._manageAreasBtn,"click",this._manageAreasClick.bind(this)),h["default"].subscribe("item-data/change",this._refreshItemData.bind(this)))};d.prototype.reset=function(){var g=new l["default"];a["default"].checkNode(this._offlineCheckbox,this.item.isOfflineEnabled);this._disableOfflineDependencies(!this.item.isOfflineEnabled);g.resolve();return g};d.prototype.retrievePropertyValues=function(){return{offline:a["default"].isChecked(this._offlineCheckbox)}};
d.prototype.hasChanges=function(){var g=a["default"].isChecked(this._offlineCheckbox);return this._offlineChanged=this.item.isOfflineEnabled!==g};d.prototype.save=function(){var g=new l["default"],u=this.retrievePropertyValues(),x=t["default"].clone(this.item.typeKeywords),y={addTypeKeywords:[],removeTypeKeywords:[]},B=x.indexOf(this.OFFLINE);this.item.supportsOffline&&this.item.isOfflineEnabled!==u.offline&&(u.offline&&-1===B?(x.push(this.OFFLINE),y.addTypeKeywords.push(this.OFFLINE),y.removeTypeKeywords.push(this.OFFLINE_DISABLED)):
!u.offline&&-1<B&&(x.splice(B,1),y.removeTypeKeywords.push(this.OFFLINE),y.addTypeKeywords.push(this.OFFLINE_DISABLED)));g.resolve({changed:{},toChange:y});return g};d.prototype._updateManageAreasText=function(){var g=this;b["default"].request({url:v["default"].restBaseUrl+"content/items/"+this.item.id+"/relatedItems?relationshipType\x3dMap2Area"}).then(function(u){g._mapAreasText.innerHTML=0===u.relatedItems.length?g.i18n.itemProperties.offlineSection.noMapAreas:m["default"].substitute(g.i18n.itemProperties.offlineSection.mapAreasPresent,
{numMapAreas:u.relatedItems.length})})};d.prototype._manageAreasClick=function(){var g=this._onOverlayClose.bind(this);this._manageAreasOverlay=new r["default"]({itemId:this.item.id,onClose:g},n["default"].place(n["default"].create("div"),document.body,"last"));this._manageAreasOverlay.open()};d.prototype._onOverlayClose=function(){this._updateManageAreasText()};d.prototype._disableOfflineDependencies=function(g){a["default"].disableNode(this._advancedOfflineBtn,g);this._isOwner&&a["default"].disableNode(this._manageAreasBtn,
g)};d.prototype._offlineCheckboxChange=function(){var g=a["default"].isChecked(this._offlineCheckbox);this._disableOfflineDependencies(!g);this._handlePropertyChange()};d.prototype._refreshItemData=function(){var g=this;this.page.fetchMapLayers(this.page._item).then(function(u){g.page._item.set("itemData",g.page._item.itemData);g.page._item.set("layers",u);g.item.itemData=g.page._item.itemData;g.item.layers=u;h["default"].publish("item-data/change-complete",{source:"type-options/map",itemData:g.page._item.itemData})},
function(){h["default"].publish("item-data/change-complete",{source:"type-options/map",itemData:g.page._item.itemData})})};return d=w.__decorate([p["default"](f["default"],q["default"])],d)}()})},"arcgisonline/pages/dijit/ManageAreas":function(){define("require exports tslib dojo/string ./Overlay ../../esriGeowConfig ../../tsutils/declareDecorator dojo/text!./ManageAreas/templates/ManageAreas.html dojo/i18n!../../nls/arcgisonline".split(" "),function(K,G,w,v,r,f,c,a,b){v=w.__importDefault(v);r=w.__importDefault(r);
f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);(function(){return function(){}})();return function(){function p(q,t){this.overlayContents=v["default"].substitute(a["default"],{i18n:b["default"]});this.showActionBar=!1;this.title=b["default"].itemProperties.offlineSection.manageAreas;this.i18n=b["default"]}p.prototype.postCreate=function(){this.inherited(arguments);this.domNode.classList.add("overlay--top");this.domNode.querySelector(".js-iframe").src=""+
f["default"].manageAreasUrl+this.itemId};return p=w.__decorate([c["default"](r["default"])],p)}()})},"arcgisonline/pages/item/widgets/typeOptions/imageService":function(){define("require exports tslib ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../utils/strings ../../../../sharing/util ../../../../tsutils/declareDecorator ../../../../esriGeowConfig dijit/_TemplatedMixin dojo/on dojo/query dojo/Deferred esri/dijit/analysis/mixins/browselayers/BrowseLayerMixin esri/tasks/Geoprocessor esri/request dojo/text!./imageService.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);return function(){function g(u,x){this.templateString=d["default"];this.activeAsyncJobs=
{};this.capabilities=["image","catalog","mensuration","download"];this.checkboxWithProps=["allowFunction","isCached","exportTilesAllowed"];this.checkboxLists=["allowedCompressions","allowedMosaicMethods","allowedFields","allowedMensurationCapabilities","sortableFields"]}g.prototype.destroy=function(){this.inherited(arguments);this._pageExists&&(this._pageExists=void 0)};g.prototype._initHandlers=function(){this._pageExists=!0;var u=this._handlePropertyChange.bind(this),x=this._handleRFTSelected.bind(this),
y=this._handleResamplingChange.bind(this),B=this._handleTemplateSelected.bind(this);this._removeRfts.bind(this);this.own(m["default"](this.page,"service-info-change",this.reset.bind(this)),n["default"](".browseRfts",this._root).on("click",this._handleBrowseClick.bind(this)),n["default"](".removeRfts",this._root).on("click",this._removeRfts.bind(this)));this._root.addEventListener("input",u);this._rftList.addEventListener("input",x);this._templateList.addEventListener("input",B);this._root.addEventListener("select",
y);c["default"].hideNode(this.removeRfts)};g.prototype.hasChanges=function(){return!0};g.prototype.validate=function(){var u=new k["default"];u.resolve({validates:!0});return u};g.prototype.retrieveProperties=function(){var u={},x;for(x in u)this["_"+x]=u[x];return u};g.prototype.updatedProperties=function(){var u=this,x=[],y=[],B=[],C={},z,D=[];var E=this._root.querySelectorAll("input[type\x3dtext],input[type\x3dnumber]");var A=this._root.querySelectorAll("input[type\x3dcheckbox]");var F=this.item.adminServiceInfo&&
this.item.adminServiceInfo.extensions||[];var H=this._root.querySelectorAll("select");var I=["allowedMensurationCapabilities","allowedMosaicMethods","allowedCompressions","allowedFields"];c["default"].forEachNode(E,function(J){(z=J.dataset.dojoAttachPoint)&&0<J.value.length&&(z=z.substr(1),C[z]=J.value)});c["default"].forEachNode(A,function(J){if(z=J.dataset.dojoAttachPoint)if(z=z.substr(1),-1<u.capabilities.indexOf(z))J.checked&&D.push(z.charAt(0).toUpperCase()+z.slice(1));else{var O=I.filter(function(P){return 0===
z.indexOf(P)});O&&0!==O.length||(C[z]=J.checked)}});c["default"].forEachNode(H,function(J){(z=J.dataset.dojoAttachPoint)&&"_defaultMosaicMethodCombo"!==z&&J.value&&(z=z.substr(1),C[z]=J.value)});E=D.join(",");A=this._rftList.querySelectorAll(".internal");if(0<(null===A||void 0===A?void 0:A.length)){var L=this._rftPath;c["default"].forEachNode(A,function(J){x.push(L+J.value)})}C.rasterFunctions="";0<x.length&&(C.rasterFunctions=x.join(","));A=this._templateList.querySelectorAll("input");0<(null===
A||void 0===A?void 0:A.length)&&c["default"].forEachNode(A,function(J){B.push(J.parentElement.innerText)});C.availableTemplates="";0<B.length&&(C.availableTemplates=B.join(","));A=this._templateList.querySelectorAll("input[type\x3dcheckbox]:checked");0<(null===A||void 0===A?void 0:A.length)&&c["default"].forEachNode(A,function(J){y.push(J.parentElement.innerText)});C.allowedTemplates="";0<y.length&&(C.allowedTemplates=y.join(","));A=f["default"].find(F,function(J){return"WCSServer"===J.typeName});
H=f["default"].find(F,function(J){return"WMSServer"===J.typeName});A?A.enabled=c["default"].isChecked(this._wcs):c["default"].isChecked(this._wcs)&&F.push({typeName:"WCSServer",enabled:!0});H?A.enabled=c["default"].isChecked(this._wms):c["default"].isChecked(this._wms)&&F.push({typeName:"WMSServer",enabled:!0});return{capabilities:E,properties:C}};g.prototype.rfts=function(){var u=[],x=this._rftList.querySelectorAll(".external");return 0<x.length&&(c["default"].forEachNode(x,function(y){u.push(y.value)}),
0<u.length)?JSON.stringify({itemIds:u}):""};g.prototype.save=function(){var u=this;this.saving=!0;var x=new k["default"],y=this.updatedProperties(),B=this.rfts(),C={},z={};this._editService(y,B).then(function(){u.saving=!1;C.serviceChanged=!0;x.resolve({changed:C,toChange:z})},function(D){u.saving=!1;x.reject(D)});return x};g.prototype.reset=function(){var u=this,x,y=new k["default"];this.item?this.saving&&0<(null===(x=this.jobId)||void 0===x?void 0:x.length)?(x=q["default"].self.helperServices.rasterAnalytics.url+
"/UpdateServiceConfiguration/jobs/"+this.jobId+"/cancel",this.jobId="",this.saving=!1,e["default"]({url:x,content:{f:"json"}}).then(function(){return u._fetchSourceAdminServiceInfo().then(function(){u._updateUI();y.resolve()})})):this._fetchSourceAdminServiceInfo().then(function(){u._updateUI();y.resolve()}):(this._updateUI(),y.resolve());return y};g.prototype._fetchSourceAdminServiceInfo=function(){var u=this,x=new k["default"],y=this.item.adminUrl;if(b["default"].isPortal()){y=this.item.url.replace("/rest/services/",
"/admin/services/");var B=y.lastIndexOf("/");y=y.substr(0,B)+"."+y.substr(B+1)}var C=this.item.adminUrl.replace("/admin/","/");this.item.adminUrl=y;b["default"].request({url:this.item.adminUrl}).then(function(z){u.item.sourceAdminServiceInfo=z;b["default"].request({url:C}).then(function(D){var E;0<(null===(E=null===D||void 0===D?void 0:D.rasterFunctionInfos)||void 0===E?void 0:E.length)&&(D=null===D||void 0===D?void 0:D.rasterFunctionInfos.filter(function(A){return"None"!=A.name}),0<(null===D||void 0===
D?void 0:D.length)&&(u.item.sourceAdminServiceInfo.rasterFunctionInfos=D));x.resolve()},function(D){x.resolve()})},function(z){x.resolve()});return x};g.prototype._updateUI=function(){var u=this,x=b["default"].isPortal(),y=this.item.sourceAdminServiceInfo||this.item.adminServiceInfo||this.item.serviceInfo,B=a["default"].stringToArray(y&&y.capabilities||"",",",!0),C=(null===y||void 0===y?void 0:y.extensions)||[],z=(null===y||void 0===y?void 0:y.properties)||{},D;4E3<z.maxImageHeight&&(z.maxImageHeight=
4E3);4E3<z.maxImageWidth&&(z.maxImageWidth=4E3);this._rftList.innerHTML="";this._templateList.innerHTML="";this._allowAnalysis.checked=!0;this._allowCopy.checked=!1;this._allowedFieldsList.innerHTML="";this._sortableFieldsList.innerHTML="";this._templateList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' disabled checked value\x3d'None'\x3eNone\x3c/label\x3e";for(var E=this._mosaicMethodSortField.length-1;0<=E;E--)this._mosaicMethodSortField.remove(E);for(E=this._defaultMosaicMethodCombo.length-
1;0<=E;E--)this._defaultMosaicMethodCombo.remove(E);for(E=this._defaultTemplate.length-1;0<E;E--)this._defaultTemplate.remove(E);z.defaultTemplate||(this._defaultTemplate.value="None");z.allowFunction=!z.hasOwnProperty("allowFunction")||z.allowFunction;z.esriImageServiceSourceType=z.esriImageServiceSourceType||"esriImageServiceSourceTypeDataset";v["default"].isOverwriteableService(this.item).then(function(H){H?u.item.set("types",f["default"].concatUnique(u.item.types,["is-overwrite"])):u.item.set("types",
f["default"].filterOut(u.item.types,["is-overwrite"]))});this.capabilities.forEach(function(H){D="_"+H.toLowerCase();u[D]&&(u[D].checked=-1<B.indexOf(H.charAt(0).toUpperCase()+H.slice(1)),u._toggleCapability(D))});E=z.allowedFields;0<(null===E||void 0===E?void 0:E.length)&&E.split(",").forEach(function(H){u._allowedFieldsList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' checked value\x3d'"+H+"'\x3e"+H+"\x3c/label\x3e";u._sortableFieldsList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' value\x3d'"+
H+"'\x3e"+H+"\x3c/label\x3e";u._mosaicMethodSortField.options[u._mosaicMethodSortField.options.length]=new Option(H,H)});E=function(H){var I=z[H];if("allowedMensurationCapabilities"===H||"allowedMosaicMethods"===H||"allowedCompressions"===H)I.split(",").forEach(function(P){u["_"+H+P]&&(u["_"+H+P].checked=!0);"allowedMosaicMethods"===H&&(u._defaultMosaicMethodCombo.options[u._defaultMosaicMethodCombo.options.length]=new Option(u.i18n.itemProperties.imageService["mosaic"+P],P))});else if("defaultResamplingMethod"===
H)A._defaultResamplingMethod.value=I;else if("fields"===H)A._fields=I;else if("esriImageServiceSourceType"===H||"serviceSourceType"===H)c["default"].disableNode(A._catalog,"esriImageServiceSourceTypeMosaicDataset"!==I),c["default"].disableNode(A._download,"esriImageServiceSourceTypeMosaicDataset"!==I),c["default"].disableNode(A._isCached,!x||"esriImageServiceSourceTypeDataset"!==I||z.path&&"crf"===z.path.split(".").pop());else if("allowFunction"===H&&(!0===I||"true"===I)&&(z.rasterFunctions||z.availableTemplates)){var L=
[];if(z.allowedTemplates){var J=z.allowedTemplates.split(",");0<J.length&&J.forEach(function(P){0<P.length&&(P=P.replace(/^.*[\\\/]/,""),L.push(P),"none"!=P.toLowerCase()&&(u._defaultTemplate.options[u._defaultTemplate.options.length]=new Option(P,P)))})}z.availableTemplates&&(J=z.availableTemplates.split(","),0<J.length&&(-1<J.indexOf("None")&&(A._templateList.innerHTML=""),J.forEach(function(P){u._rftPath=P.replace(/[^\\\/]*$/,"");if(0<P.length){P=P.replace(/^.*[\\\/]/,"");var fa=-1<L.indexOf(P)?
"checked":"";"none"===P.toLowerCase()?u._templateList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' class\x3d'internal' disabled checked value\x3d'"+P+"'\x3e"+P+"\x3c/label\x3e":u._templateList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' class\x3d'internal' "+fa+" value\x3d'"+P+"'\x3e"+P+"\x3c/label\x3e"}})));z.rasterFunctions&&(J=z.rasterFunctions.split(","),0<J.length&&J.forEach(function(P){u._rftPath=P.replace(/[^\\\/]*$/,"");if(0<P.length){P=P.replace(/^.*[\\\/]/,"");var fa=
-1<P.indexOf(".rft.")?P.slice(0,P.indexOf(".rft.")):P;u._rftList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' class\x3d'internal' value\x3d'"+P+"'\x3e"+fa+"\x3c/label\x3e";u._defaultTemplate.options[u._defaultTemplate.options.length]=new Option(fa,P)}}))}else if("sortableFields"===H){var O=I.split(",");A._sortableFieldsList.querySelectorAll("input[type\x3dcheckbox]").forEach(function(P){-1<O.indexOf(P.value)&&(P.checked=!0)})}if(J=A["_"+H])"checkbox"===J.type?J.checked=!0===I||"true"===I:
J.value=I};var A=this,F;for(F in z)E(F);y.rasterFunctionInfos&&y.rasterFunctionInfos.forEach(function(H){var I;H=H.name;var L=void 0===z.availableTemplates||-1<(null===(I=z.allowedTemplates)||void 0===I?void 0:I.indexOf(H));L&&!u._optionExists(H,!1)&&(u._defaultTemplate.options[u._defaultTemplate.options.length]=new Option(H,H));void 0===z.availableTemplates&&(u._templateList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' class\x3d'internal' "+(L?"checked":"")+" value\x3d'"+H+"'\x3e"+H+"\x3c/label\x3e")});
if(y=z.defaultTemplate)this._defaultTemplate.value=y.replace(/^.*[\\\/]/,"");this.checkboxWithProps.forEach(function(H){D="_"+H;u[D]&&(u[D].checked=!0===z[H]||"true"===z[H],u._toggleCapability(D))});C.forEach(function(H){"WCSServer"===H.typeName&&H.enabled&&c["default"].checkNode(u._wcs,!0);"WMSServer"===H.typeName&&H.enabled&&c["default"].checkNode(u._wms,!0)})};g.prototype._handleBrowseClick=function(){this.useArcGISComponents=!0;var u=[],x=[];this.isSingleTenant=b["default"].isPortal();this.portalUrl=
q["default"].restBaseUrl.substring(0,q["default"].restBaseUrl.indexOf("/sharing/rest"));this.defaultItemTypes=[];u.push("Raster function template");x.push("rasterFunctionTemplates");this.set("allowedItemTypes",u);this.set("availableItemTypeFilters",x);this._createBrowseItems({disableLAAL:!0,disableBoundary:!0,title:this.i18n.itemProperties.imageService.rasterFunctionTemplates,showRFTSystemSection:!1,showRFTEditCustomAction:!1})};g.prototype._handleSelectRFTTool=function(u){var x=-1<u.name.indexOf(".rft.")?
u.name.slice(0,u.name.indexOf(".rft.")):u.name;this._optionExists(x,!0)||(this.emitChanged(null,!0),this._rftList.innerHTML+="\x3clabel\x3e\x3cinput type\x3d'checkbox' class\x3d'external' value\x3d'"+u.id+"' name\x3d'"+u.name+"'\x3e"+x+"\x3c/label\x3e",this._defaultTemplate.options[this._defaultTemplate.options.length]=new Option(x,u.name))};g.prototype._toggleCapability=function(u){var x=c["default"].isChecked(this[u])&&!c["default"].isDisabled(this[u]);"_image"===u&&(x=this._image.checked=!0,c["default"].disableNode(this._image,
!0));c["default"].showHide(this[u+"Properties"],x);"_catalog"===u&&c["default"].disableNode(this._download,!x)};g.prototype._updateSelection=function(u){var x="_"+u;u=x+"List";var y=[];this[u]&&(u=this[u].querySelectorAll("input[type\x3dcheckbox]:checked"),c["default"].forEachNode(u,function(B){var C,z=null===(C=B.dataset)||void 0===C?void 0:C.dojoAttachPoint;z?y.push(z.slice(x.length)):y.push(B.value)}),this[x].value=y.join(","))};g.prototype._updateMosaicMethods=function(u,x){var y=u.slice(21),
B=this._allowedMosaicMethods.value;B=(null===B||void 0===B?void 0:B.split(","))||[];if(x)this._defaultMosaicMethodCombo.options[this._defaultMosaicMethodCombo.options.length]=new Option(this.i18n.itemProperties.imageService["mosaic"+y],y),B.push(y);else{var C=B.indexOf(y);B.splice(C,1);for(C=0;C<this._defaultMosaicMethodCombo.length;C++)this._defaultMosaicMethodCombo.options[C].value===y&&this._defaultMosaicMethodCombo.remove(C)}this._allowedMosaicMethods.value=B.join(",")};g.prototype._handlePropertyChange=
function(u){var x,y,B,C=null===(x=u.target.dataset)||void 0===x?void 0:x.dojoAttachPoint;x=this.hasChanges();C||(C=null===(B=(null===(y=u.target.parentNode)||void 0===y?void 0:y.parentNode).dataset)||void 0===B?void 0:B.dojoAttachPoint);if(C){"_maxImageWidth"===C&&4E3<parseInt(this._maxImageWidth.value)&&(this._maxImageWidth.value="4000");"_maxImageHeight"===C&&4E3<parseInt(this._maxImageHeight.value)&&(this._maxImageHeight.value="4000");if("_defaultMosaicMethodCombo"===C){var z=this._defaultMosaicMethodCombo.value;
u=this._allowedMosaicMethods.value.split(",");u=u.filter(function(D){return D!==z});u.unshift(z);this._allowedMosaicMethods.value=u.join(",");return this.emitChanged(null,x)}-1<this.capabilities.concat(this.checkboxWithProps).indexOf(C.slice(1))?this._toggleCapability(C):(y=this.checkboxLists.filter(function(D){return 0===C.slice(1).indexOf(D)}))&&0<y.length&&("allowedMosaicMethods"===y[0]?this._updateMosaicMethods(C,u.target.checked):this._updateSelection(y[0]))}this.emitChanged(null,x)};g.prototype._handleResamplingChange=
function(){this.emitChanged(null,!0)};g.prototype._handleRFTSelected=function(){var u=this._rftList.querySelectorAll("input[type\x3dcheckbox]:checked");0<(null===u||void 0===u?void 0:u.length)?c["default"].showNode(this.removeRfts):c["default"].hideNode(this.removeRfts)};g.prototype._removeRfts=function(u){var x=this;u=this._rftList.querySelectorAll("input[type\x3dcheckbox]:checked");var y=this._rftList.querySelectorAll("input[type\x3dcheckbox]:not(:checked)");this._templateList.querySelectorAll("input[type\x3dcheckbox]:checked");
var B="";0<y.length?(y.forEach(function(C){B+=C.parentNode.outerHTML}),this._rftList.innerHTML=B):this._rftList.innerHTML="\x3clabel/\x3e";u.forEach(function(C){B+=C.parentNode.outerHTML;x._defaultTemplate.removeChild(x._defaultTemplate.querySelector('option[value\x3d"'+(C.name||C.value)+'"]'))});c["default"].hideNode(this.removeRfts)};g.prototype._handleTemplateSelected=function(u){var x=u.target.value;u.target.checked?this._optionExists(u.target.parentElement.innerText,!1)||(this._defaultTemplate.options[this._defaultTemplate.options.length]=
new Option(u.target.parentElement.innerText,x)):this._defaultTemplate.removeChild(this._defaultTemplate.querySelector('option[value\x3d"'+x+'"]'))};g.prototype._editService=function(u,x){var y=this,B=new k["default"],C={},z=q["default"].self.helperServices.rasterAnalytics.url+"/UpdateServiceConfiguration";C.imageLayer=JSON.stringify({itemId:this.item.id});C.newServiceConfig=JSON.stringify(u);C.rasterFunctionTemplates=x;this.jobId="";(new h["default"](z)).submitJob(C).then(function(D){"esriJobSucceeded"===
D.jobStatus?B.resolve():B.reject({})},function(D){B.reject(D)},function(D){y.jobId=D.jobId});return B};g.prototype._optionExists=function(u,x){for(var y=1;y<this._defaultTemplate.length;y++)if(x&&u===this._defaultTemplate.options[y].value||!x&&u===this._defaultTemplate.options[y].text)return!0;return!1};return g=w.__decorate([p["default"](r["default"],t["default"],l["default"])],g)}()})},"esri/dijit/analysis/mixins/browselayers/BrowseLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/query ../../../../kernel ../../../../request ../../../../lang ../../../../layers/CSVLayer ../../../../arcgis/Portal ../../../../SpatialReference ../../ProjectExtent dojo/Deferred ../../ItemTypes ../../utils ./configs/AGOLBrowseItem ./configs/EnterpriseBrowseItem dojo/i18n!../../nls/BrowseLayerMixin".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){K=K([],{tableSupportedTools:"JoinFeatures SummarizeAttributes ExtractData GeocodeLocationsfromTable CopyToDataStore AppendData CalculateField MergeLayers DescribeDataset DetectIncidents".split(" "),allowedItemTypes:[],defaultItemTypes:[n.MS,n.FS],availableItemTypeFilters:["layers","featureLayers"],_createBrowseItems:function(d,g,u){d=d||{};var x=d.browseValue||{};g=g||{};var y=this.defaultItemTypes.concat(this.get("allowedItemTypes"));if(this.useArcGISComponents)this.setUpItemBrowser(d,
g,u).then(function(){this.map&&this._chopExtentAtDateLine(this.map.extent).then(this._projectExtentAndDispatch.bind(this))}.bind(this));else{var B=[];y.forEach(function(C){B.push('type:"'+C+'"')});"browse"===x?(u=this._browsedlg.browseItems.get("query"),u.custom=this._queryTagsForLivingAtlasBrowseItems(g),this._browsedlg.browseItems.set("extent",this.get("map").extent),this._browsedlg.browseItems.set("query",u),this._browsedlg.show()):(this.showGeoAnalyticsParams&&B.push('type:"'+n.BIGDATA+'"'),u=
this._browseLyrsdlg.browseItems.get("query"),u.types=B,this._browseLyrsdlg.browseItems.set("query",u),g.geometryTypes?(this._browseLyrsdlg.browseItems.plugIn.checkGeometryType=!0,0<g.geometryTypes.length&&(this._browseLyrsdlg.browseItems.plugIn.geometryTypes=g.geometryTypes)):this._browseLyrsdlg.browseItems.plugIn.checkGeometryType=!1,g.layerTypes?(this._browseLyrsdlg.browseItems.plugIn.checkLayerType=!0,0<g.layerTypes.length&&(this._browseLyrsdlg.browseItems.plugIn.layerTypes=g.layerTypes)):this._browseLyrsdlg.browseItems.plugIn.checkLayerType=
!1,g.customCheck?(this._browseLyrsdlg.browseItems.plugIn.customCheckHandler=g.customCheck.customCheckHandler,this._browseLyrsdlg.browseItems.plugIn.customCheckFailureMessage=g.customCheck.customCheckFailureMessage):this._browseLyrsdlg.browseItems.plugIn.customCheckHandler=void 0,this._browseLyrsdlg.show())}},setUpItemBrowser:function(d,g,u){var x=new m;window.require(["arcgis-components/wrappers/ItemBrowser","esri/arcgis/Portal"],function(y,B){if(!this.ib){var C=document.createElement("div");!d.isDialog&&
document.body.appendChild(C);var z=new B.Portal(this.portalSelf&&this.portalSelf.urlKey&&this.portalSelf.customBaseUrl?location.protocol+"//"+this.portalSelf.urlKey+"."+this.portalSelf.customBaseUrl+"/sharing/rest":(this.portalSelf&&this.portalSelf.portalHostname?location.protocol+"//"+this.portalSelf.portalHostname:this.portalUrl)+"/sharing/rest");"ArcGISEnterpriseOnKubernetes"===(this.portalSelf||{}).portalDeploymentType&&(d.disableBoundary=!0,d.disableLAAL=!0);var D=this.defaultItemTypes.concat(this.get("allowedItemTypes")),
E=function(){this._closeFullScreenBrowser();d.isDialog&&this._closeDialog();this._resetSelectBox(u);!d.isDialog&&this._removeDOMfromBody(C)},A=function(J){this._closeFullScreenBrowser();d.isDialog&&this._closeDialog();J[0]&&J[0].type===n.RFT?this.onSelectRFTTool.bind(this)(J[0],z):J[0]&&J[0].type===n.DLPK?this.onSelectDLPKTool.bind(this)(J[0],z):this.onBrowseItemSelect.bind(this)(J[0],z,u);!d.isDialog&&this._removeDOMfromBody(C)},F=function(J){this._closeFullScreenBrowser();d.isDialog&&this._closeDialog();
this.onSelectGPTool.bind(this)(J);!d.isDialog&&this._removeDOMfromBody(C)},H=function(J){this._closeFullScreenBrowser();d.isDialog&&this._closeDialog();this.onEditRFTTool.bind(this)(J,z);!d.isDialog&&this._removeDOMfromBody(C)},I=function(J){this._closeFullScreenBrowser();d.isDialog&&this._closeDialog();this.onBrowseItemSelect.bind(this)(J,z,u);!d.isDialog&&this._removeDOMfromBody(C)},L=function(J){d.isDialog&&this._closeDialog();J&&J.type===n.RFT?this.onEditRFTTool.bind(this)(J,z):this.onBrowseItemSelect.bind(this)(J,
z,u,!0);!d.isDialog&&this._removeDOMfromBody(C)};-1<this.tableSupportedTools.indexOf(this.helpFileName)&&(D=D.concat([this.showGeoAnalyticsParams?n.TABLE:n.BTABLE]));z.signIn().then(function(){this._fetchGroupForRFT(z).then(function(J){-1<D.indexOf(n.IS)?this.availableItemTypeFilters=["layers","featureLayers","mapImageLayers","imageryLayers"]:-1===D.indexOf(n.GPSERVICE)&&-1===D.indexOf(n.RFT)&&-1===D.indexOf(n.FILE)&&(this.availableItemTypeFilters=this.availableItemTypeFilters.concat(["layers","featureLayers"]));
-1<this.tableSupportedTools.indexOf(this.helpFileName)&&(this.availableItemTypeFilters=this.availableItemTypeFilters.concat(["tables"]));J={allowedItemTypes:this.showGeoAnalyticsParams?[n.BIGDATA].concat(D):D,availableItemTypeFilters:this.showGeoAnalyticsParams?this.availableItemTypeFilters.concat(["bigDataFileShares"]):this.availableItemTypeFilters,customQueryTags:g,addQueryParameters:d.addQueryParameters,portal:z,isPortal:this.isSingleTenant,onSelectSubLayer:I.bind(this),onActionSubLayer:L.bind(this),
onSelectGPTool:F.bind(this),onEditRFT:H.bind(this),rftGroupId:J,disableLAAL:d.disableLAAL,disableBoundary:d.disableBoundary,title:d.title,disabledSubResources:this._getDisableResources(d.disabledSubResources),showRFTSystemSection:null!=d.showRFTSystemSection?d.showRFTSystemSection:"raster"===d.analysisMode?!0:!1,showRFTEditCustomAction:null!=d.showRFTEditCustomAction?d.showRFTEditCustomAction:!0,enableMapAreaFilter:null!=d.enableMapAreaFilter?d.enableMapAreaFilter:!0};var O=G.mixin(y.initialState.settings.config,
this.isSingleTenant?h.getConfig(J):l.getConfig(J)),P=G.mixin(y.initialState.parameters,{section:"myContent",filter:G.mixin(y.initialState.parameters.filter,{searchMapArea:!1})});-1<J.allowedItemTypes.indexOf(n.RFT)&&!this.isSingleTenant&&(O.addQueryParameters=function(ba){return"all"===ba.parameters.section?"-owner: (esri_*)":""});if(-1<J.allowedItemTypes.indexOf(n.RFT)&&J.showRFTSystemSection){var fa=this.isSingleTenant;P.section="System";P.sort={field:"title",order:"asc"};O.enableMapAreaFilter=
!1;O.addQueryParameters=function(ba){var ka;return!fa&&ba.parameters&&"all"===ba.parameters.section?"-owner: (esri_*)":ba.parameters&&ba.parameters.searchString&&ba.parameters.searchString.current&&"System"===ba.parameters.section?(ba=ba.parameters.searchString.current,-1===ba.indexOf(":")&&(ka="tags: ("+ba+")"),ka?ka:""):""};var V;w.some(O.customSections,function(ba){if("System"===ba.name)return V=ba.baseQuery,!0});require(["arcgis-raster-function-editor/RFxRegistry"],function(ba){ba.initialize({sysRFxBaseQuery:V,
asRFxEditorBuddy:!1,isMultiTenant:!1===this.isSingleTenant});ba=ba.createRequestProxy(c);this._originalRequestModule=c;c=ba}.bind(this))}this.ib=new y.ItemBrowserWrapper(C,{apiVersion:3,portal:z,request:c,initialState:G.mixin(y.initialState,{settings:G.mixin(y.initialState.settings,{config:G.mixin(O,{onBack:E.bind(this),onSelect:A.bind(this)})}),ui:G.mixin(y.initialState.ui,{expanded:G.mixin(y.initialState.ui.expanded,{filters:!0})})}),parameters:P});d.isDialog&&this._createDialog(C,z);x.resolve()}.bind(this))}.bind(this))}}.bind(this));
return x},_queryTagsForLivingAtlasBrowseItems:function(d){if((d=d&&d.tags)&&0!==d.length){if(1===d.length)return['tags:"'+d[0]+'"'];r=[];d.forEach(function(g){r.push('tags:"'+g+'"')});return r}},onBrowseItemSelect:function(d,g,u,x){g=this._getPortalItem(d,g);var y={selection:g,dialog:this._browseLyrsdlg||this._browsedlg};!d.url||k.isHostedService(d.url)||this.isSingleTenant||g.selectedLayer instanceof b?this._handleBrowseItemsSelect(y,x):this._getProxyServiceInfo(d).then(function(){a.isDefined(d.analysisProxyCheck)&&
"failure"===d.analysisProxyCheck?this._resetSelectBox(u):this._handleBrowseItemsSelect(y,x)}.bind(this),function(){this._resetSelectBox(u)}.bind(this))},onSelectGPTool:function(d){d.resource.url=d.url;this._handleSelectGpTool(d.resource)},onSelectRFTTool:function(d,g){this._handleSelectRFTTool(this._getPortalItem(d,g))},onSelectDLPKTool:function(d,g){this._handleSelectDLPKTool(this._getPortalItem(d,g))},onEditRFTTool:function(d,g){this._handleEditRFTTool(this._getPortalItem(d,g))},_getPortalItem:function(d,
g){if(d.resource&&d.item){var u=new p.PortalItem(G.mixin(d.item,{portal:g}));u.selectedLayer=d.resource;u.selectedLayer.url=d.url}else u=new p.PortalItem(G.mixin(d,{portal:g})),d.type&&-1<[n.CSV,n.XLS].indexOf(d.type)&&(u.selectedLayer=u);return u},_createDialog:function(d,g){window.require(["dijit/Dialog","esri/dijit/analysis/mixins/browselayers/configs/Common"],function(u,x){this.itemBrowserDialog||(this.itemBrowserDialog=new u({style:"width: 900px; height:900px; overflow: auto",id:"itemBrowserDialog",
closable:!1,title:e.customAnalysisLayerTitle}));this.itemBrowserDialog.set("content",d);this.itemBrowserDialog.show()}.bind(this))},_closeDialog:function(){this.itemBrowserDialog.hide();this.itemBrowserDialog.destroy();delete this.itemBrowserDialog;delete this.ib},_closeFullScreenBrowser:function(){this._originalRequestModule&&(c=this._originalRequestModule);this.ib.dispatch({type:"CLOSE_FULLSCREEN_BROWSER"})},_setAllowedItemTypesAttr:function(d){this.allowedItemTypes=d},_setAvailableItemTypeFiltersAttr:function(d){this.availableItemTypeFilters=
d},_getDisableResources:function(d){var g={};d&&d.length&&d.forEach(function(u){u&&u.url&&(g[u.url]=!0)},this);return g},_projectExtentAndDispatch:function(d){this.sr||(this.sr=new q(4326));t(d,this.sr,function(g){this._dispatchExtentToItemBrowser(g[0])}.bind(this),function(g){}.bind(this))},_chopExtentAtDateLine:function(d){var g=new m;window.esri.geometry.normalizeCentralMeridian([d],null,function(u){if(u[0].rings){var x=(new window.esri.geometry.Polygon(d.spatialReference)).addRing(u[0].rings[0]).getExtent();
u=(new window.esri.geometry.Polygon(d.spatialReference)).addRing(u[0].rings[1]).getExtent();g.resolve(x.getWidth()>u.getWidth()?x:u)}else g.resolve(u[0])},function(u){g.reject(u)});return g},_dispatchExtentToItemBrowser:function(d){window.require(["arcgis-components/wrappers/ItemBrowser"],function(g){this.ib.dispatch(g.updateExtent({minx:d.xmin,miny:d.ymin,maxx:d.xmax,maxy:d.ymax}))}.bind(this))},_fetchGroupForRFT:function(d){var g=new m;-1===this.allowedItemTypes.indexOf(n.RFT)&&g.resolve();this._systemRFTsGroup&&
g.resolve(this._systemRFTsGroup);k.fetchGroupForRFT(d).then(function(u){this._systemRFTsGroup=u;g.resolve(u)}.bind(this));return g},_removeDOMfromBody:function(d){setTimeout(function(){document.body.removeChild(d)},300);delete this.ib},_resetSelectBox:function(d){d&&d.reset()},_getProxyServiceInfo:function(d){var g=new m,u;a.isDefined(d)&&a.isDefined(d.url)||g.reject({error:"mapLayer is not defined"});var x=d.url+(-1<d.url.indexOf("?")?"\x26":"?")+"f\x3djson";var y=f.id.findCredential(d.url);var B=
d.url;this.proxyCheckedServers||(this.proxyCheckedServers=[]);w.some(this.proxyCheckedServers,function(C){u=B.substring(0,B.indexOf("/",9));if(C.server===u)return d.analysisProxyCheck=C.check,!0},this)?g.resolve({}):(y&&y.token&&(x+="\x26token\x3d"+y.token),g=c({url:x,content:null},{useProxy:!0}),g.then(function(){d.analysisProxyCheck="success";this.proxyCheckedServers.push({server:B.substring(0,B.indexOf("/",9)),check:"success"})}.bind(this),function(){d.analysisProxyCheck="failure";this.proxyCheckedServers.push({server:B.substring(0,
B.indexOf("/",9)),check:"failure"})}.bind(this)));return g.promise}});G.setObject("dijit.analysis.mixins.browselayers.BrowseLayerMixin",K,f);return K})},"esri/dijit/analysis/ProjectExtent":function(){define(["dojo/_base/array","esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(K,G,w,v,r){function f(c,a){if(c&&a.xmin>a.xmax){var b=c.valid[1]-a.xmin,p=a.xmax-c.valid[0];b>p?a.xmax=c.valid[1]+p:a.xmin=c.valid[0]-b}}return function(c,
a,b,p,q,t){var m=[102113,102100,3857],n=c.spatialReference.wkid;if(n===a.wkid)return b([c],null);if(4326==n&&-1<K.indexOf(m,a.wkid))return c.ymin=Math.max(c.ymin,-89.99),c.ymax=Math.min(c.ymax,89.99),c=w.geographicToWebMercator(c),q=c.spatialReference._getInfo(),f(q,c),c.spatialReference.wkid=a.wkid,b([c],null);if(-1<K.indexOf(m,n)&&4326==a.wkid)return c=w.webMercatorToGeographic(c),q=c.spatialReference._getInfo(),f(q,c),b([c],null);t||(t=new r(window.esriGeowConfig.self.helperServices.geometry.url));
if(q&&q.wrapAround180&&"extent"===c.type){var k=c;c=v.fromExtent(c)}t.project([c],a,function(l,h){if(!(l&&0<l.length&&l[0]&&"extent"==l[0].type)||isNaN(l[0].xmin)||isNaN(l[0].ymin)||isNaN(l[0].xmax)||isNaN(l[0].ymax)){if(l&&0<l.length&&l[0]&&"point"==l[0].type&&!isNaN(l[0].x)&&!isNaN(l[0].y))return b(l,h);if(k&&"polygon"===l[0].type){if(1===l[0].rings.length)l[0]=new G(l[0].getExtent());else{var e=(new v(l[0].spatialReference.toJson())).addRing(l[0].rings[0]).getExtent(),d=(new v(l[0].spatialReference.toJson())).addRing(l[0].rings[1]).getExtent();
l[0]=d;l[0].xmin=d.xmin-e.getWidth();l[0].ymin=Math.min(d.ymin,e.ymin);l[0].ymax=Math.max(d.ymax,e.ymax)}return b(l,h)}if(p)return p()}else return b(l,h)},p)}})},"esri/dijit/analysis/ItemTypes":function(){define(["dojo/_base/lang","dojo/has","../../kernel"],function(K,G,w){G={BIGDATA:"Big Data File Share",CSV:"CSV",XLS:"Microsoft Excel",FS:"Feature Service",MS:"Map Service",IS:"Image Service",FLAYER:"Feature Layer",BDATAFEATURE:"featureClass",TABLE:"Table",BTABLE:"table",FLAYERVIEW:"FeatureLayerView",
MVGRID:"Multi-Variable Grid",GPSERVICE:"Geoprocessing Service",RFT:"Raster function template",BDFSTEMPLATE:"bdfstemplate",DLPK:"Deep Learning Package",FILE:"files",DOC:"documents",IMG:"images",PDF:"pdfs",CSVS:"csvs"};K.setObject("dijit.analysis.itemTypes",G,w);return G})},"esri/dijit/analysis/utils":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/_base/fx dojo/_base/json dojo/_base/kernel dojo/dom-attr dojo/has dojo/i18n dojo/io-query dojo/i18n!../../nls/jsapi dojo/json dojo/string dojo/query dojo/date/locale dojo/dom-style dojo/dom-class dojo/dom-construct dojo/Deferred dojo/promise/all dojo/fx/easing dojo/number dojo/_base/window dojo/when dojo/dom dojo/on dojo/data/ItemFileWriteStore dojo/topic dojo/store/Memory dojox/mvc/equals dijit/registry dijit/Dialog dijit/form/CheckBox ../../kernel ../../lang ../../units ../../request ./HelpWindow ../../tasks/query ../../dijit/BrowseItems ../../layers/FeatureLayer ./PluginAnalysisLayers ../../tasks/Geoprocessor ../../dijit/SingleFilter ./FeatureRecordSetLayer ./PluginLayers ./PCSList ./ItemTypes ../../layers/ArcGISImageServiceLayer ../../layers/RasterXLayer ../../layers/RasterFunction ./AnalysisRegistry ../RasterFunctionEditor/utils".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea,Y,T,ca){G={};w.mixin(G,{_helpDialog:null,systemRFTGroupName:"Raster Function Templates",i18n:null,UNITSMAP:{Feet:"esriFeet",Yards:"esriYards",Miles:"esriMiles",Meters:"esriMeters",Kilometers:"esriKilometers",NauticalMiles:"esriNauticalMiles"},initHelpLinks:function(M,U,da){if(M){var ja=J.byNode(M),na=ja?ja.get("helpFileName"):da&&da.helpFileName?da.helpFileName:null,oa=ja?ja.get("isSingleTenant"):
da&&da.isSingleTenant?da.isSingleTenant:!1,ra=T.Modes.standard,ua=ja&&ja.portalSelf?ja.portalSelf.helpBase:da&&da.helpBase?da.helpBase:null,wa=ja&&ja.portalSelf;this._helpDialog||(this._helpDialog=new la({isPortal:oa,portalSelf:wa}));ja&&(ja.showGeoAnalyticsParams||ja.showBigData)||da&&da.analysisMode&&da.analysisMode===T.Modes.Bigdata?(na+="_bd",ra=T.Modes.Bigdata):da&&da.analysisMode&&"raster"===da.analysisMode&&(na+="_ra",ra=T.Modes.Raster);h("[esriHelpTopic]",M).forEach(function(Ba,Da,La){Ba&&
(d.set(Ba,"display",V.isDefined(U)&&!0!==U?"none":""),V.isDefined(Ba._helpClickHandler)&&(Ba._helpClickHandler.remove(),Ba._helpClickHandler=null),Ba._helpClickHandler=A(Ba,"click",w.hitch(this,function(Ga){f.stop(Ga);da&&da.showHelpFromUrl&&da.helpUrl?this._helpDialog.show(Ga,{showHelpFromUrl:da.showHelpFromUrl,helpUrl:da.helpUrl}):this._helpDialog.show(Ga,{helpId:p.get(Ba,"esriHelpTopic"),helpFileName:na,analysisGpServer:da&&da.analysisGpServer?da.analysisGpServer:null,helpParentNode:M,isPortal:oa,
analysisMode:ra,helpBase:ua,portalSelf:ja&&ja.portalSelf})})))},this)}},constructAnalysisFeatColl:function(M){var U={},da;U.featureCollection=M.layerDefinition;for(da in U.featureCollection)U.featureCollection.hasOwnProperty(da)&&"objectIdField"===da&&(U.featureCollection.objectIdFieldName=w.clone(U.featureCollection.objectIdField),delete U.featureCollection.objectIdField);U.featureCollection.features=M.featureSet.features;return U},constructAnalysisInputLyrObj:function(M,U,da){if(M instanceof aa||
"Image Service"===M.type||"esri.layers.RasterXLayer"===M.declaredClass)return ca.getRasterJsonFromLayer(M);var ja={},na="";V.isDefined(da)||(da=!0);if(M.getMap)var oa=M.getMap();else M._map&&(oa=M._map);if(M.url&&!M._collection)ja={url:M.url},this.isHostedService(M.url),M.getDefinitionExpression&&M.getDefinitionExpression()?ja.filter=M.getDefinitionExpression():V.isDefined(M.definitionExpression)&&""!==M.definitionExpression&&(ja.filter=M.definitionExpression),M.useMapTime&&M.timeInfo&&oa&&oa.timeExtent&&
da&&(oa.timeExtent.startTime?(na+=oa.timeExtent.startTime.getTime(),oa.timeExtent.endTime&&(na+=","+oa.timeExtent.endTime.getTime())):oa.timeExtent.endTime&&(na+=oa.timeExtent.endTime.getTime()),na&&(ja.time=na)),M.credential&&(ja.serviceToken=M.credential.token),-1!==ja.url.indexOf("?")&&(da=ja.url.substring(ja.url.indexOf("?")+1,ja.url.length),da=m.queryToObject(da),w.mixin(ja,da),ja.url=ja.url.substring(0,ja.url.indexOf("?")));else if(!M.url||M._collection)try{ja=M.toJson()}catch(ra){M._json=k.parse(M._json),
ja=M.toJson()}ja.name=M.name;U&&(ja=new R(ja));return ja},formatDate:function(M){return e.format(M,{datePattern:"yyyy-MM-dd",selector:"date"})+" "+e.format(M,{selector:"time",timePattern:"HH:mm:ss"})},isHostedService:function(M){if(!M)return!1;var U=-1!==M.indexOf(".arcgis.com/");M=-1!==M.indexOf("/services")||-1!==M.indexOf("//tiles")||-1!==M.indexOf("//features");return U&&M},isPortalHostedService:function(M){return M?-1!==M.toLowerCase().indexOf("/hosted/"):!1},isTimeEnabled:function(M){var U=
10.2<=M.version&&M._useStandardizedQueries;return M.useMapTime&&M.timeInfo&&(U||10.2<=M.version)||V.isDefined(M.time)},isTimeInstantLayer:function(M){return V.isDefined(M.timeInfo)&&V.isDefined(M.timeInfo.startTimeField)&&!V.isDefined(M.timeInfo.endTimeField)||V.isDefined(M.time)&&V.isDefined(M.time.timeType)&&"instant"===M.time.timeType},buildReport:function(M,U){var da="";U||(U={},w.mixin(U,n.analysisMsgCodes));v.forEach(M,function(ja,na){if("string"===typeof ja.message){var oa=V.isDefined(U[ja.messageCode])?
U[ja.messageCode]:ja.message;da+=ja.style.substring(0,ja.style.indexOf("\x3c/"))+(this._isEmptyObject(ja.params)?oa:l.substitute(oa,ja.params))+ja.style.substring(ja.style.indexOf("\x3c/"))}else if(w.isArray(ja.message)){var ra=[];var ua=w.clone(ja.style);v.forEach(ja.message,function(wa,Ba){ua=ua.replace(/<\//,"${"+Ba+"}");oa=V.isDefined(U[ja.messageCode+"_"+Ba])?U[ja.messageCode+"_"+Ba]:wa;oa=this._isEmptyObject(ja.params)?oa:l.substitute(oa,ja.params);"string"===typeof oa&&(oa=this.safetagsReplace(oa));
ra.push(oa+"\x3c/")},this);ua=l.substitute(ua,ra);da+=ua}},this);return da},getLayerFeatureCount:function(M,U){var da=new ma,ja=new x;U||(U={});da.geometry=U.geometry;da.geometryType=U.geometryType||"esriGeometryEnvelope";M.url||da.geometry?(M.url&&(da.where=U.where||"1\x3d1",M.getDefinitionExpression&&M.getDefinitionExpression()&&!U.where?da.where=M.getDefinitionExpression():V.isDefined(M.definitionExpression)&&""!==M.definitionExpression&&!U.where&&(da.where=M.definitionExpression)),ja=M.queryCount(da)):
ja.resolve(M.graphics.length);return ja.promise},createPolygonFeatureCollection:function(M){var U={layerDefinition:null,featureSet:{features:[],geometryType:T.GeometryTypes.Polygon}};U.layerDefinition={currentVersion:10.2,copyrightText:"",defaultVisibility:!0,relationships:[],isDataVersioned:!1,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,geometryType:T.GeometryTypes.Polygon,minScale:0,maxScale:0,objectIdField:"OBJECTID",templates:[],type:"Feature Layer",
displayField:"TITLE",visibilityField:"VISIBLE",name:M,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",allowGeometryUpdates:!0,htmlPopupType:"",hasM:!1,hasZ:!1,globalIdField:"",supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:-1,indexes:[],types:[],drawingInfo:{renderer:{type:"simple",symbol:{color:[0,0,0,255],outline:{color:[0,0,0,255],width:3,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSNull"},label:"",description:""},transparency:0,labelingInfo:null,
fixedSymbols:!0},fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};return U},createPointFeatureCollection:function(M){var U={layerDefinition:null,featureSet:{features:[],
geometryType:T.GeometryTypes.Point}};U.layerDefinition={objectIdField:"OBJECTID",templates:[],type:"Feature Layer",drawingInfo:{renderer:{field1:"TYPEID",type:"simple",symbol:{height:24,xoffset:0,yoffset:12,width:24,contentType:"image/png",type:"esriPMS",url:K.toUrl("./images/GreenStickpin.png")},description:"",value:"0",label:"Stickpin"}},displayField:"TITLE",visibilityField:"VISIBLE",name:M,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",types:[],geometryType:T.GeometryTypes.Point,fields:[{alias:"OBJECTID",
name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};return U},createFolderStore:function(M,U){var da=new F({data:{identifier:"id",label:"name",items:[]}});da.newItem({name:U,id:""});
v.forEach(M,function(ja){da.newItem({name:ja.title,id:ja.id})});return da},setupFoldersUI:function(M){M.folderSelect.set("store",M.folderStore);M.folderSelect.set("required",!0);M.folderSelect.set("searchAttr","name");V.isDefined(M.folderId)?M.folderStore.get(M.folderId).then(w.hitch(this,function(U){V.isDefined(U)?M.folderSelect.set("item",U):M.folderStore.get("").then(function(da){M.folderSelect.set("item",da)},this)})):M.folderName?M.folderStore.fetch({query:{name:M.folderName},onComplete:w.hitch(this,
function(U){V.isDefined(U)&&0<U.length?M.folderSelect.set("item",U[0]):M.folderStore.get("").then(function(da){M.folderSelect.set("item",da)},this)})}):M.username?M.folderSelect.set("displayedValue",M.username):M.folderStore.get("").then(function(U){M.folderSelect.set("item",U)},this)},_isEmptyObject:function(M){for(var U in M)if(M.hasOwnProperty(U))return!1;return!0},validateServiceName:function(M,U){var da=/(:|&|<|>|%|#|\?|\\|"|\/|\+|=|\*|@|'|;|\||,)/g.test(M),ja=!0,na=!0;if(V.isDefined(U)&&U.textInput)var oa=
U.textInput;V.isDefined(U)&&V.isDefined(U.isItem)&&(na=U.isItem);this.initI18n();if(0===M.length||0===l.trim(M).length){var ra=this.i18n.requiredValue;ja=!1}else if(da)ra=this.i18n.invalidServiceName,ja=!1;else if(na&&98<M.length)ra=this.i18n.invalidServiceNameLength,ja=!1;else if(na&&170<encodeURIComponent(M).length){for(da=M+"";170<encodeURIComponent(da).length;)da=da.substring(0,da.length-1);ra=l.substitute(this.i18n.suggestedServiceNameLength,{count:da.length});ja=!1}oa&&!ja&&oa.set("invalidMessage",
ra);return ja},getStepNumber:function(M){h(".esriAnalysisNumberLabel",M).forEach(function(U,da){var ja=this._getNumberLabel(da);p.set(U,"innerHTML",ja)},this)},_getNumberLabel:function(M){var U="";this.initI18n();switch(M){case 0:U=this.i18n.oneLabel;break;case 1:U=this.i18n.twoLabel;break;case 2:U=this.i18n.threeLabel;break;case 3:U=this.i18n.fourLabel;break;case 4:U=this.i18n.fiveLabel;break;case 5:U=this.i18n.sixLabel;break;case 6:U=this.i18n.sevenLabel;break;case 7:U=this.i18n.eightLabel;break;
case 8:U=this.i18n.nineLabel;break;case 9:U=this.i18n.tenLabel;break;case 10:U=this.i18n.elevenLabel;break;case 11:U=this.i18n.twelveLabel;break;case 12:U=this.i18n.thirteenLabel}return U},populateAnalysisLayers:function(M,U,da,ja){if(M){var na=[],oa=M.get(U);U=ja&&ja.layerSelect?ja.layerSelect:M._analysisSelect;M.rerun&&!oa&&(ja||(ja={}),ja.chooseBlank=!0);M._titleRow&&d.set(M._titleRow,"display","none");M._analysisLabelRow&&d.set(M._analysisLabelRow,"display","table-row");M._selectAnalysisRow&&
(d.set(M._selectAnalysisRow,"display","table-row"),d.set(M._analysisSelect.domNode.parentNode,"padding-bottom","1em"));M.domNode&&this.getStepNumber(M.domNode);V.isDefined(ja)&&ja.chooseLabel&&na.push({value:-1,label:this.i18n.chooseLabel});V.isDefined(ja)&&ja.chooseBlank&&na.push({value:"  ",label:""});V.isDefined(ja)&&V.isDefined(ja.posIncrement)||(V.isDefined(ja)||(ja={}),ja.posIncrement=0);M.get(da)||M.set(da,[]);v.forEach(M.get(da),function(ra,ua){ua+=ja.posIncrement;var wa={value:V.isDefined(ja)&&
ja.chooseLabel?""+ua+1:""+ua,label:ra.name};oa&&(ra.name===oa.name||ra.url&&oa.url&&ra.url===oa.url)&&(wa.selected=!0);na.push(wa)},this);U.addOption(na);U.set("required",!0);ja.chooseBlank&&"  "===U.get("value")&&setTimeout(w.hitch(this,this._validateSelectUI,U),100)}},isValidAnalysisLayer:function(M){var U="",da=!0;var ja={isValid:da,validationMessage:U};var na,oa,ra=0,ua=0,wa=0,Ba,Da,La,Ga=!0;if(!V.isDefined(M)||!V.isDefined(M.toolName))return ja;this.initI18n();ja=M.toolName;var xa=M.layers;var Ca=
M.analysisLayer;var ta=ja.charAt(0).toLowerCase()+ja.substring(1);var qa=this.i18n;M=M.showReadyToUseLayers||!1;v.forEach(xa,function(pa){Ga=!1;if(pa instanceof aa||"esri.layers.RasterXLayer"===pa.declaredClass)Ba=!0;Ba&&1<pa.bandCount&&(Da=!0);Ba&&1===pa.bandCount&&(La=!0);pa.geometryType===T.GeometryTypes.Point&&(va=!0,ra++);if(pa.geometryType===T.GeometryTypes.Point||pa.geometryType===T.GeometryTypes.MultiPoint)na=!0;pa.geometryType===T.GeometryTypes.Line&&(oa=!0,wa++);pa.geometryType===T.GeometryTypes.Polygon&&
(za=!0,ua++)},this);if(-1!==v.indexOf(["CreateDriveTimeAreas","PlanRoutes","ConnectOriginsToDestinations"],ja)&&(!va||Ca&&Ca.geometryType!==T.GeometryTypes.Point))U=l.substitute(this.i18n.selectPointLayer,{toolName:qa[ta]}),da=!1;else if("AggregatePoints"!==ja&&"InterpolatePoints"!==ja||(!Ca||Ca.geometryType===T.GeometryTypes.Point||Ca.geometryType===T.GeometryTypes.MultiPoint)&&na)if("CalculateDensity"===ja&&(!na&&!oa||Ca&&Ca.geometryType!==T.GeometryTypes.Point&&Ca.geometryType!==T.GeometryTypes.MultiPoint&&
Ca.geometryType!==T.GeometryTypes.Line))U=l.substitute(this.i18n.areaFeatureInvalidMsg,{toolName:qa[ta]}),da=!1;else if("FindHotSpots"!==ja&&"FindOutliers"!==ja||M||!(!na&&!za||Ca&&Ca.geometryType!==T.GeometryTypes.Point&&Ca.geometryType!==T.GeometryTypes.MultiPoint&&Ca.geometryType!==T.GeometryTypes.Polygon))if("OverlayLayers"!==ja&&"AggregatePoints"!==ja&&"SummarizeWithin"!==ja&&"SummarizeNearby"!==ja&&"FindNearest"!==ja&&"MergeLayers"!==ja||M||0!==xa.length&&(1!==xa.length||xa[0]!==Ca&&V.isDefined(Ca)))if("ConnectOriginsToDestinations"===
ja&&!M&&(Ga||2>ra))U=l.substitute(this.i18n.odPointMsg,{toolName:qa[ta]}),da=!1;else if(this.isFindCentroids(ja)&&this.isPointLayer(Ca))U=l.substitute(this.i18n.selectNoPointLayer,{toolName:qa[ta]}),da=!1;else if("AggregatePoints"===ja&&!M&&1<xa.length){var za=v.some(xa,function(pa){return pa.geometryType===T.GeometryTypes.Polygon});za||(U=l.substitute(this.i18n.aggregatePolyMsg,{toolName:qa[ta]}),da=!1)}else if("MergeLayers"===ja&&!M&&1<xa.length)1<ra||1<wa||1<ua||(U=this.i18n.mergeValidationMsg,
da=!1);else if("SummarizeWithin"!==ja&&"DissolveBoundaries"!==ja||(!Ca||Ca.geometryType===T.GeometryTypes.Polygon)&&za||M)if("ExtractData"===ja)(da=v.some(xa,function(pa){return-1!==pa.capabilities.indexOf("Extract")}))||(U=l.substitute(this.i18n.extractValidationMsg));else if(("ConnectOriginsToDestinations"===ja||ja===T.Tools.ChooseBestFacilities)&&1<xa.length){var va=v.some(xa,function(pa){var sa=V.isDefined(Ca)&&Ca.id===pa.id;return pa.geometryType===T.GeometryTypes.Point&&!sa});va||(U=l.substitute(ja===
T.Tools.ChooseBestFacilities?this.i18n.selectPointLayer:this.i18n.odPointMsg,{toolName:qa[ta]}),da=!1)}else"CalculateSlope"===ja||"DeriveAspect"===ja||"RemapValues"===ja?Ba?La||(da=!1,U=l.substitute(this.i18n.noSingleBandISMsg,{toolName:qa[ta]})):(da=!1,U=l.substitute(this.i18n.noImageServiceMsg,{toolName:qa[ta]})):"ExtractRaster"===ja?Ba||(da=!1,U=l.substitute(this.i18n.noImageServiceMsg,{toolName:qa[ta]})):"MonitorVegetation"===ja&&(Ba?Da||(da=!1,U=l.substitute(this.i18n.noMultiBandISMsg,{toolName:qa[ta]})):
(da=!1,U=l.substitute(this.i18n.noImageServiceMsg,{toolName:qa[ta]})));else U=l.substitute(this.i18n.selectPolyLayer,{toolName:qa[ta]}),da=!1;else U=l.substitute(this.i18n.overlayValidationMsg,{toolName:qa[ta]}),da=!1;else U=l.substitute(this.i18n.hotspotsLineFeatureMsg,{toolName:qa[ta]}),da=!1;else U=l.substitute(this.i18n.selectPointLayer,{toolName:qa[ta]}),da=!1;return ja={isValid:da,validationMessage:U}},isFindCentroids:function(M){return M===T.Tools.FindCentroids},isPointLayer:function(M){return M&&
M.geometryType===T.GeometryTypes.Point},initI18n:function(){this.i18n||(this.i18n={},w.mixin(this.i18n,n.common),w.mixin(this.i18n,n.analysisTools),w.mixin(this.i18n,n.analysisMsgCodes),w.mixin(this.i18n,n.browseLayersDlg),w.mixin(this.i18n,n.driveTimes),w.mixin(this.i18n,n.calculateFields))},addBrowseAnalysisDialog:function(M){if(M&&M.widget){this.i18n||this.initI18n();var U="esri/dijit/analysis/PluginAnalysisLayers",da=function(xa){return"\x3cimg class\x3d'grid-item galleryThumbnail' width\x3d'120px' height\x3d'80px' alt\x3d'' src\x3d'"+
(xa.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png")+"'\x3e"},ja=function(xa){return'\x3cdiv class\x3d"galleryLabelContainer"\x3e\x3cspan alt\x3d\''+(xa.title||xa.name||"\x3cNo Title\x3e")+"'\x3e"+(xa.title.replace(/_/g," ")||xa.name.replace(/_/g," ")||"\x3cNo Title\x3e")+"\x3c/span\x3e\x3c/div\x3e"},na=function(xa){return"\x3cimg class\x3d'grid-item-thumb' width\x3d'16px' height\x3d'16px' alt\x3d'' src\x3d'"+xa.iconUrl+"'/\x3e"},oa=function(xa){return"\x3cimg class\x3d'grid-item-thumb' width\x3d'16px' height\x3d'16px' alt\x3d'' src\x3d'"+
xa.iconUrl+"'/\x3e"},ra=z.doc.createDocumentFragment();ra=u.create("div",{style:"width:100%;height:100%;"},ra);var ua=u.create("div",{style:"width:100%;height:10%;","class":""}),wa=u.create("div",{style:"width:100%"},ra),Ba=this._isCustomAnalysisQuery(M.widget);1===M.browseType?(U="esri/dijit/analysis/PluginLayers",U={portalUrl:M.widget.get("portalUrl"),message:"",plugin:U,sortDescending:!0,sort:"title",self:M.widget.get("portalSelf"),itemsPerPage:100,demandList:!0,extent:M.widget.get("map").extent,
useExtent:!1,fetchTimeout:600,galleryTemplate:"\x3cdiv class\x3d'listServiceTitle'\x3e\x3ctable cellpadding\x3d'0' cellspacing\x3d'0' width\x3d'100%'\x3e\x3ctr width\x3d'100%'\x3e\x3ctd nowrap\x3d'nowrap'\x3e  \x3cdiv  style\x3d\"position:absolute;left:80px; top:10px; width:1px; height:1px; background: transparent;\"\x3e\x3c/div\x3e\x3cdiv style\x3d'overflow:hidden;'\x3e\x3ca style\x3d\"height:16px;\"\x3e${item.title}\x3c/a\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3ctable cellpadding\x3d'0' cellspacing\x3d'0' width\x3d'100%'\x3e\x3ctr width\x3d'100%' class\x3d'bottomRowTable'\x3e\x3ctd width\x3d'20'\x3e  \x3cspan class\x3d'esriAlignLeading'\x3e${item:_formatThumbnail}\x3c/span\x3e\x3c/td\x3e\x3ctd nowrap\x3d'nowrap'\x3e  \x3cspan class\x3d'esriAlignLeading' style\x3d'color:#656565;'\x3e${item.owner}\x3c/span\x3e\x3c/td\x3e\x3ctd style\x3d'padding-right:5px;padding-left:3px;'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e",
showInfoPanel:!0,isAutoClose:!1,checkIsButtonEnabled:!0,formatThumbnail:oa,formatInfoPanelImage:na,"class":"esriAnalysisLayersItems"}):U={portalUrl:M.widget.get("portalUrl"),message:"",plugin:U,sortDescending:!0,sort:"title",self:M.widget.get("portalSelf"),pagingLinks:1,rowsPerPage:6,"class":"esriBrowseAnalysisLayers itemsGallery esriFloatLeading",extent:M.widget.get("map").extent,useExtent:!Ba,fetchTimeout:600,galleryTemplate:'\x3cdiv style\x3d\'opacity:1;\' class\x3d\'grid-item gallery-view galleryNode\'\x3e${item:_formatItemTitle}${item:_formatThumbnail}\x3cdiv class\x3d"linksDiv" style\x3d\'display:none;\'\x3e\x3cdiv class\x3d"esriItemLinks"\x3e\x3cdiv class\x3d"esriFloatLeading"\x3e\x3ca style\x3d"text-decoration: none;"\x3e\x3cspan\x3eAdd layer to analysis\x3c/span\x3e\x3cdiv class\x3d"dijitReset dijitInline esriArrows"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
formatItemTitle:ja,showInfoPanel:!1,showTooltip:!0,formatThumbnail:da,style:"width:48em;height:100%;clear:both;"};ja=u.toDom('\x3cdiv class\x3d"esriBrowseOptions"\x3e');u.place(ja,ua);da=u.create("div",{"class":"esriBrowseOption"},ja);if(!M.browseType||1!==M.browseType){ja=u.create("div",{"class":"esriBrowseOption"},ja);var Da=new P({name:"addlayer",id:M.widget.id+(M.browseType?M.browseType:"")+"_addlayercheck","class":"",value:!1,checked:!1},u.create("input",{},ja));u.create("label",{"for":M.widget.id+
"_addlayercheck","class":"esriBrowseOption_label",innerHTML:this.i18n.addLayer},ja)}ja=!0;M.browseType&&1===M.browseType?ja=!1:Ba&&(ja=!1);ja=new P({name:"extentcheck",id:M.widget.id+(M.browseType?M.browseType:"")+"_addextentcheck","class":"",value:ja,checked:ja},u.create("input",{},da));u.create("label",{"for":M.widget.id+(M.browseType?M.browseType:"")+"_addextentcheck","class":"esriBrowseOption_label",innerHTML:this.i18n.withinMapArea},da);U.messageRight=ua;var La=new ha(U,wa);ja.on("change",w.hitch(this,
function(xa){La.set("useExtent",xa)}));var Ga=new O({title:1===M.browseType?this.i18n.browseLayers:Ba?this.i18n.browseAnalysisLayers:this.i18n.browseAnalysisTitle,content:ra,browseItems:La,addlayerCheckBox:Da,style:M.browseType&&1===M.browseType?"":"padding:.75em 0;background-color: #fff;width:50em;"});M.widget.own(Ga.on("hide",w.hitch(Ga,function(xa){Ga.browseItems.reset()})));return Ga}},addAnalysisReadyLayer:function(M,U){function da(La){var Ga;if("Feature Service"===oa.type){var xa=new Z(oa.url,
{outFields:["*"]});w.mixin(oa,xa)}"Image Service"===oa.type&&(xa=-1<La.capabilities.indexOf("TilesOnly")?new ea(oa.url,{outFields:["*"]}):new aa(oa.url,{outFields:["*"]}),w.mixin(oa,xa));w.mixin(oa,La);oa.id=oa.title+"_"+La.id;oa.title=M.item.selectedLayer?oa.title+"-"+La.name:oa.title.replace(/_/g," ");oa.name=oa.title;oa.version=oa.currentVersion;if(ua&&M.widget.showBrowseLayers){var Ca=(Ga=M.layersSelect.get("store"))&&Ga.data;Ga=2;Ga=Ca.splice(Ca.length-Ga,Ga);var ta={id:Ca.length,label:oa.title,
name:oa.title,url:oa.url};Ca.push(ta);Ca=Ca.concat(Ga);Ga=new I({data:Ca,idProperty:"id"});M.layersSelect.set("store",Ga);M.layersSelect.set("value",ta.name)}else{Ca=M.layersSelect.getOptions();if(M.widget.useArcGISComponents&&(M.widget.showBrowseLayers||M.widget.showReadyToUseLayers))Ga=2;else if(M.widget.showBrowseLayers&&M.widget.showReadyToUseLayers)Ga=3;else if(M.widget.showBrowseLayers||M.widget.showReadyToUseLayers)Ga=2;Ga=Ca.splice(Ca.length-Ga,Ga);M.layersSelect.removeOption(Ga);Ca=M.layers.length;
M.posIncrement&&(Ca+=M.posIncrement);Ca=""+Ca;Ga.unshift({value:Ca,label:oa.title,selected:!0});M.layersSelect.addOption(Ga);M.layersSelect.set("value",Ca)}xa&&(oa.lyr=xa,xa.name=oa.name);oa.linfo=La;M.layers.push(oa);if(M.browseDialog.addlayerCheckBox&&M.browseDialog.addlayerCheckBox.get("checked")||ra||U)this._addLayerHandle&&this._addLayerHandle.remove(),this._addLayerHandle=M.widget.map.on("layer-add",w.hitch(this,function(qa){this._addLayerHandle.remove();M.widget.emit("add-ready-to-use-layer",
{layer:qa.layer,layerInfo:La,item:oa})})),M.widget.map.addLayer(xa);M.browseDialog.browseItems&&M.browseDialog.browseItems.clear()}if(V.isDefined(M)&&V.isDefined(M.item)&&V.isDefined(M.layersSelect)&&V.isDefined(M.layers)&&V.isDefined(M.browseDialog)){M.browseDialog.hide&&M.browseDialog.hide();var ja,na;(ja=!M.item.selectedLayer&&M.item.url?M.item.type===X.IS?M.item.url:M.item.url+"/0":M.item.selectedLayer.url)&&-1!==window.location.protocol.indexOf("https:")&&(ja=ja.replace("http:","https:"));var oa=
{url:ja,itemId:M.item.id,title:M.item.title,type:M.item.type,analysisReady:!0};ja=v.some(M.layers,function(La,Ga){var xa=La.analysisReady&&oa.analysisReady&&La.itemId===oa.itemId;M.item.selectedLayer&&M.item.selectedLayer.url&&(xa=La.itemId&&oa.itemId?La.itemId===oa.itemId&&La.url===oa.url:La.url===oa.url);xa&&(na=Ga);return xa});var ra;M.browseDialog.browseItems&&h(".js-add-layer-checkbox",M.browseDialog.browseItems.infoPanel).forEach(function(La){ra=La.checked});var ua=-1!==M.layersSelect.baseClass.indexOf("dijitComboBox");
var wa=new x;var Ba="sync";if(ja){M.posIncrement&&(na+=M.posIncrement);if(M.browseDialog.addlayerCheckBox&&M.browseDialog.addlayerCheckBox.get("checked")||ra||U){M.posIncrement||(M.posIncrement=0);var Da=M.layers[na-M.posIncrement];M.widget.map.getLayer(Da.lyr.id)||(this._addLayerHandle&&this._addLayerHandle.remove(),this._addLayerHandle=M.widget.map.on("layer-add",w.hitch(this,function(La){this._addLayerHandle.remove();M.widget.emit("add-ready-to-use-layer",{layer:La.layer,layerInfo:Da.linfo,item:Da})})),
M.widget.map.addLayer(Da.lyr))}ua?M.layersSelect.set("value",M.layers[na-1].name):M.layersSelect.set("value",""+na);M.browseDialog.browseItems&&M.browseDialog.browseItems.clear();wa.resolve()}else M.item.selectedLayer?(oa.url=M.item.selectedLayer.url,wa.then(w.hitch(this,da)),setTimeout(function(){wa.resolve(M.item.selectedLayer)},500)):(Ba=M.item.itemDataUrl?ka({url:M.item.itemDataUrl,content:{f:"json"}}):"sync",D(Ba,w.hitch(this,function(La){La&&La.layers&&La.layers[0].id&&(oa.url=oa.url.substring(0,
oa.url.lastIndexOf("/0"))+"/"+La.layers[0].id);ka({url:oa.url,content:{f:"json"}}).then(w.hitch(this,function(Ga){da(Ga);wa.resolve()}))})));return wa.promise}},addReadyToUseLayerOption:function(M,U){M&&(M.showReadyToUseLayers||M.showBrowseLayers)&&(U||(U=[]),M.signInPromise||(M.signInPromise=new x,setTimeout(w.hitch(this,function(){M.signInPromise.resolve()}),100)),M.i18n||(this.initI18n(),M.i18n=this.i18n),M.signInPromise.then(w.hitch(this,function(){v.forEach(U,function(da){var ja=da.select||da;
if(-1!==ja.baseClass.indexOf("dijitComboBox")&&M.showBrowseLayers){if(da=ja.get("store"))da.put({id:"separator",name:"separator",label:"\x3chr\x3e"}),da.put({id:"browselayers",name:"browselayers",label:M.i18n.browseLayers})}else{var na=ja.getOptions();v.some(na,function(oa){return"separator"===oa.type},this)||!M.showReadyToUseLayers&&!M.showBrowseLayers||ja.addOption({type:"separator",value:""});this.addBrowseOptionForTool({select:ja,disableLAAL:da.disableLAAL},M)}},this);M.showReadyToUseLayers&&
!V.isDefined(M._browsedlg)&&(M._browsedlg=this.addBrowseAnalysisDialog({widget:M}),M.own(M._browsedlg.browseItems.on("select-change",w.hitch(M,M._handleBrowseItemsSelect)),M._browsedlg.on("hide",w.hitch(M,function(){v.forEach(U,function(da){"browse"===da.get("value")&&da.reset()});M.layersSelect&&M.layersSelect.reset()}))));M.showBrowseLayers&&!V.isDefined(M._browseLyrsdlg)&&(M._browseLyrsdlg=this.addBrowseAnalysisDialog({widget:M,browseType:1}),M.own(M._browseLyrsdlg.on("browseitems-close",w.hitch(this,
function(da){"add-layer"===da.action&&(M._browseLyrsdlg.browseItems.plugIn._grid&&(da.selection.selectedLayer=M._browseLyrsdlg.browseItems.plugIn._selectedLayer,M._handleBrowseItemsSelect({dialog:M._browseLyrsdlg,selection:da.selection})),M._browseLyrsdlg.browseItems.closeInfoPanel())})),M._browseLyrsdlg.on("hide",w.hitch(M,function(){v.forEach(U,function(da){"browselayers"===da.get("value")&&da.reset()})}))))})))},addBrowseOptionForTool:function(M,U){var da=M.select,ja=M.disableLAAL||!1,na=da.getOptions(),
oa=[],ra=!1;if(!v.some(na,function(ua){return"browselayers"===ua.value||"browse"===ua.value},this)){if(0<na.length&&"separator"!==na[na.length-1].type||0===na.length)oa.push({type:"separator"}),ra=!0;U.useArcGISComponents&&(U.showBrowseLayers||U.showReadyToUseLayers)?oa.push({value:"browselayers",label:U.i18n.browseAnalysisLayers}):(!ja&&U.showReadyToUseLayers&&(ja=U.i18n.browseAnalysisTitle,this._isCustomAnalysisQuery(U)&&(ja=U.i18n.browseAnalysisLayers),oa.push({value:"browse",label:ja})),U.showBrowseLayers&&
oa.push({value:"browselayers",label:U.i18n.browseLayers}));(!0===ra&&1<oa.length||!1===ra&&0<oa.length)&&da.addOption(oa)}},_isCustomAnalysisQuery:function(M){var U='title:"Living Atlas Analysis Layers" AND owner:esri',da=!1;M&&M.isSingleTenant&&(U='title:"Living Atlas Analysis Layers" AND owner:esri_livingatlas');M.portalSelf&&M.portalSelf.analysisLayersGroupQuery&&M.portalSelf.analysisLayersGroupQuery!==U?da=!0:M._portal&&M._portal.analysisLayersGroupQuery&&M._portal.analysisLayersGroupQuery!==
U&&(da=!0);return da},getMaxInputByMode:function(M){if(M&&M.units&&M.type&&M.limits&&M.travelMode){var U,da=M.limits.maximumBreakDistanceValue,ja=M.limits.maximumBreakDistanceValueUnits,na=M.limits.maximumBreakTimeValue,oa=M.limits.maximumBreakTimeValueUnits,ra=this.isWalkingTravelMode(M.travelMode.travelMode);ra&&(da=M.limits.maximumBreakWalkingDistanceValue,ja=M.limits.maximumBreakWalkingDistanceValueUnits,na=M.limits.maximumBreakWalkingTimeValue,oa=M.limits.maximumBreakWalkingTimeValueUnits);"reachableStreets"===
M.alternateLimits&&(oa=this.generateLimitsForReachableStreets({limits:M.limits,isWalking:ra}),da=oa.driveDistanceLimit,ja=oa.driveDistanceUnit,na=oa.driveTimeLimit,oa=oa.driveTimeUnit);"unreachableAreas"===M.alternateLimits&&(oa=this.generateLimitsForUnreachableAreas({limits:M.limits,isWalking:ra}),da=oa.driveDistanceLimit,ja=oa.driveDistanceUnit,na=oa.driveTimeLimit,oa=oa.driveTimeUnit);na*=this.perMinute(oa);da*=this.perMile(ja);"StraightLine"===M.type?"Miles"===M.units?U=1E3:"Yards"===M.units?
U=176E4:"Kilometers"===M.units?U=C.format(1609.344,{places:2}):"Meters"===M.units?U=C.format(1609344,{places:2}):"Feet"===M.units&&(U=528E4):this.isDistanceMode(M.travelMode)?"Miles"===M.units?U=da:"Yards"===M.units?U=1760*da:"Kilometers"===M.units?U=C.format(1.609344*da,{places:2}):"Meters"===M.units?U=C.format(1609.344*da,{places:2}):"Feet"===M.units&&(U=5280*da):this.isTimeMode(M.travelMode)&&("Minutes"===M.units?U=na:"Seconds"===M.units?U=60*na:"Hours"===M.units&&(U=na/60));return"string"===typeof U?
C.parse(U):parseFloat(U)}},isWalkingTravelMode:function(M){if(M&&M.restrictionAttributeNames)return M.restrictionAttributeNames.some(function(U){return"walking"===U.toLowerCase()})},isDistanceMode:function(M){return"Distance"===M.units},isTimeMode:function(M){return"Time"===M.units},generateLimitsForUnreachableAreas:function(M){var U={driveDistanceLimit:null,driveDistanceUnit:null,driveTimeLimit:null,driveTimeUnit:null};M.isWalking?(U.driveDistanceLimit=M.limits.maximumBreakWalkingDistanceValueDetailedPolygons,
U.driveDistanceUnit=M.limits.maximumBreakWalkingDistanceValueUnitsDetailedPolygons,U.driveTimeLimit=M.limits.maximumBreakWalkingTimeValueDetailedPolygons,U.driveTimeUnit=M.limits.maximumBreakWalkingTimeValueUnitsDetailedPolygons):(U.driveDistanceLimit=M.limits.maximumBreakDistanceValueDetailedPolygons,U.driveDistanceUnit=M.limits.maximumBreakDistanceValueUnitsDetailedPolygons,U.driveTimeLimit=M.limits.maximumBreakTimeValueDetailedPolygons,U.driveTimeUnit=M.limits.maximumBreakTimeValueUnitsDetailedPolygons);
return U},generateLimitsForReachableStreets:function(M){var U={driveDistanceLimit:null,driveDistanceUnit:null,driveTimeLimit:null,driveTimeUnit:null};M.isWalking?(U.driveDistanceLimit=M.limits.maximumBreakWalkingDistanceValueServiceAreaLines,U.driveDistanceUnit=M.limits.maximumBreakWalkingDistanceValueUnitsServiceAreaLines,U.driveTimeLimit=M.limits.maximumBreakWalkingTimeValueServiceAreaLines,U.driveTimeUnit=M.limits.maximumBreakWalkingTimeValueUnitsServiceAreaLines):(U.driveDistanceLimit=M.limits.maximumBreakDistanceValueServiceAreaLines,
U.driveDistanceUnit=M.limits.maximumBreakDistanceValueUnitsServiceAreaLines,U.driveTimeLimit=M.limits.maximumBreakTimeValueServiceAreaLines,U.driveTimeUnit=M.limits.maximumBreakTimeValueUnitsServiceAreaLines);return U},updateModeConstraints:function(M){if(M&&M.validateWidget&&M.units&&M.type&&M.travelMode){var U=M.validateWidget.get("constraints");U.max=this.getMaxInputByMode(M);M.validateWidget.set(U)}},getTravelModes:function(M){var U=new x,da,ja,na,oa;V.isDefined(this.travelModes)&&0<this.travelModes.length?
U.resolve(this.travelModes):M&&M.widget?M.widget.signInPromise.then(w.hitch(this,function(ra){(oa=M.widget.get("helperServices"))&&oa.routingUtilities?(na=oa.routingUtilities.url,da="sync"):da=M.widget._getSelf(M.widget.portalUrl);D(da,w.hitch(this,function(ua){ua&&ua.helperServices&&ua.helperServices.routingUtilities&&(na=ua.helperServices.routingUtilities.url);V.isDefined(na)?(ja=new Q(na+"/GetTravelModes"),ja.execute({}).then(w.hitch(this,function(wa){this.travelModes=v.map(wa[0].value&&wa[0].value.features,
function(Ba){return a.fromJson(Ba.attributes.TravelMode)});wa[1]&&wa[1].paramName&&"defaultTravelMode"===wa[1].paramName&&(this.defaultTravelModeId=wa[1].value);U.resolve(this.travelModes)}),w.hitch(this,function(wa){U.reject(wa)}))):U.reject(Error("Missing Routing Utility Service to get Travel Modes"))}),function(ua){U.reject(ua)})})):U.reject(Error("Missing parameter: params.widget required parameter"));return U.promise},populateTravelModes:function(M){if(M&&M.selectWidget&&M.widget){var U=[],da=
M.allowmode||"all",ja=!1;this.initI18n();M.addStraightLine&&U.push({value:"StraightLine",label:'\x3cdiv class\x3d"esriFloatLeading bufferIcon esriStraightLineDistanceIcon"\x3e\x3c/div\x3e\x3cdiv class\x3d"esriLeadingMargin4" style\x3d"height:20px;margin-top:10px;"\x3e'+this.i18n.straightLineDistance+"\x3c/div\x3e",selected:M.value&&"StraightLine"===M.value});this.getTravelModes({widget:M.widget}).then(w.hitch(this,function(na){var oa=V.isDefined(M.enableTravelModes)&&!M.enableTravelModes;v.forEach(na,
function(ra,ua){var wa=this.createOptionForTravelMode(ra,{name:ra.name,disabled:oa,separator:M.separator});this.isTravelModeAllowed(da,wa.units)&&("all"!==da&&(wa.value=wa.value.replace(wa.units,"")),M.value&&M.value.id===ra.id?L(M.value,ra)&&(wa.selected=!wa.disabled,ja=!0):!M.value&&M.selectDefaultMode&&this.defaultTravelModeId&&this.defaultTravelModeId===ra.id&&(wa.selected=!0),U.push(wa))},this);!ja&&this.isRequiredToAddTravelMode(M)&&this.isTravelModeAllowed(da,this.getTravelModeUnits(M.value))&&
U.push(this.getOptionForCustomTravelMode(M,oa));M.selectWidget.removeOption();M.selectWidget.addOption(U);M.widget.emit("travelmodes-added",{travelOptions:U})}),w.hitch(this,function(na){U&&0<U.length&&(M.selectWidget.removeOption(),M.selectWidget.addOption(U),M.widget.emit("travelmodes-added",{travelOptions:U}))}))}},getTravelModeLabel:function(M,U){var da=U?U:M.name;return'\x3cdiv class\x3d"esriFloatLeading bufferIcon esri'+this.getTravelModei18nKey(M.type)+this.getTravelModeUnits(M)+'Icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"esriLeadingMargin4" style\x3d"height:20px;margin-top:10px;" title\x3d"'+
M.description+'"\x3e'+da+"\x3c/div\x3e"},getTravelModeUnits:function(M){var U=M.units||name.split(/\s/)[1];return U=M.impedanceAttributeName===M.timeAttributeName?"Time":M.impedanceAttributeName===M.distanceAttributeName?"Distance":"Other"},getTravelModeValue:function(M,U){return M.replace(/\s/g,U||"")},getTravelModei18nKey:function(M){return"AUTOMOBILE"===M?"Driving":"TRUCK"===M?"Trucking":"WALK"===M?"Walking":"Other"},isTravelModeAllowed:function(M,U){return"all"===M||M.toLowerCase()===U.toLowerCase()},
isRequiredToAddTravelMode:function(M){return M.widget.rerun&&"StraightLine"!==M.value},isTrafficBasedTravelMode:function(M){var U=this.getTravelModei18nKey(M.type).toLowerCase();return"time"===this.getTravelModeUnits(M).toLowerCase()&&("driving"===U||"trucking"===U)},getOptionForCustomTravelMode:function(M,U){var da=this.createOptionForTravelMode(M.value,{name:"\x26lt"+M.value.name+"\x26gt",disabled:U,separator:M.separator});da.selected=!0;return da},createOptionForTravelMode:function(M,U){return{label:this.getTravelModeLabel(M,
U.name),value:this.getTravelModeValue(U.name,U.separator),travelMode:M,disabled:U.disabled,modei18nKey:this.getTravelModei18nKey(M.type).toLowerCase(),units:this.getTravelModeUnits(M)}},updateDisplay:function(M,U,da){(new h.NodeList(M)).style("display",U?da?da:"block":"none")},isGreaterThanZero:function(){return 0<this.get("value")},getExprFunctions:function(){this.i18n||this.initI18n();this.exprFunctions||(this.exprFunctions=[{type:"NumType",label:l.substitute(this.i18n.asMetersFunc,{functionName:"as_meters(\x3ci\x3enumber\x3c/i\x3e)",
num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"as_meters()"},{type:"NumType",label:l.substitute(this.i18n.asKilometersFunc,{functionName:"as_kilometers(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"as_kilometers()"},{type:"NumType",label:l.substitute(this.i18n.asFeetFunc,{functionName:"as_feet(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"as_feet()"},{type:"NumType",label:l.substitute(this.i18n.asYardsFunc,{functionName:"as_yards(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),
name:"as_yards()"},{type:"NumType",label:l.substitute(this.i18n.asMilesFunc,{functionName:"as_miles(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"as_miles()"},{type:"NumType",label:l.substitute(this.i18n.asNuaticalMilesFunc,{functionName:"as_nautical_miles(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"as_nautical_miles()"},{type:"NumType",label:l.substitute(this.i18n.absFunc,{functionName:"abs(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),
name:"abs()"},{type:"NumType",label:l.substitute(this.i18n.logFunc,{functionName:"log(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"log()"},{type:"NumType",label:l.substitute(this.i18n.sinFunc,{functionName:"sin(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"sin()"},{type:"NumType",label:l.substitute(this.i18n.cosFunc,{functionName:"cos(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"cos()"},{type:"NumType",label:l.substitute(this.i18n.tanFunc,
{functionName:"tan(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"tan()"},{type:"NumType",label:l.substitute(this.i18n.squareRootFunc,{functionName:"sqrt(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"sqrt()"},{type:"NumType",label:l.substitute(this.i18n.minFunc,{functionName:"min(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"min()"},{type:"NumType",label:l.substitute(this.i18n.maxFunc,{functionName:"max(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),
name:"max()"},{type:"NumType",label:l.substitute(this.i18n.constrainFunc,{functionName:"constrain(\x3ci\x3enumber\x3c/i\x3e, \x3ci\x3elow\x3c/i\x3e, \x3ci\x3ehigh\x3c/i\x3e",num:"\x3ci\x3enumber\x3c/i\x3e",low:"\x3ci\x3elow\x3c/i\x3e",high:"\x3ci\x3ehigh\x3c/i\x3e"}),name:"constrain(,,)"},{type:"NumType",label:l.substitute(this.i18n.iffFunc,{functionName:"iif(\x3ci\x3econdition\x3c/i\x3e,\x3ci\x3evalue if TRUE\x3c/i\x3e,\x3ci\x3evalue if FALSE\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"iif(,,)"},
{type:"NumType",label:l.substitute(this.i18n.whenFunc,{functionName:"when(\x3ci\x3enumber\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"when(,)"},{type:"NumType",label:l.substitute(this.i18n.decodeFunc,{functionName:"decode(\x3ci\x3eexpression\x3c/i\x3e, \x3ci\x3ecase1,return1,..caseN,returnN\x3c/i\x3e, \x3ci\x3edefault\x3c/i\x3e)",num:"\x3ci\x3enumber\x3c/i\x3e"}),name:"decode(,,,)"}]);return this.exprFunctions},addAttributeOptions:function(M){this.initI18n();V.isDefined(M.allowSelectLabel)||
(M.allowSelectLabel=!0);var U=[],da=V.isDefined(M.emptyValue)?M.emptyValue:"";if(M.allowNumericType||void 0===M.allowNumericType)U=[T.FieldTypes.Short,T.FieldTypes.Integer,T.FieldTypes.Float,T.FieldTypes.Double];var ja=M.layer;var na=M.selectWidget;var oa=ja?ja.fields:[];na.removeOption(na.getOptions());M.allowSelectLabel&&na.addOption({value:da,label:this.i18n.attribute});M.allowStringType&&U.push(T.FieldTypes.String);M.allowDateType&&U.push(T.FieldTypes.Date);var ra=[];v.forEach(oa,function(ua){-1!==
v.indexOf(U,ua.type)&&ua.name!==ja.objectIdField&&ra.push({value:ua.name,label:V.isDefined(ua.alias)&&""!==ua.alias?ua.alias:ua.name,type:ua.type===T.FieldTypes.String?T.PseudoFieldTypes.String:ua.type===T.FieldTypes.Date?T.PseudoFieldTypes.Date:T.PseudoFieldTypes.Number})},this);if(0===ra.length)return!1;na.addOption(ra);V.isDefined(M.priorityChange)?na.set("value",da,M.priorityChange):na.set("value",da);na.set("disabled",!ja||0===ja.fields.length);return!0},addStatisticsOptions:function(M){this.initI18n();
var U=M.selectWidget,da=[{value:"SUM",label:this.i18n.sum},{value:"MIN",label:this.i18n.minimum},{value:"MAX",label:this.i18n.maximum},{value:"MEAN",label:M.showGeoAnalyticsParams?this.i18n.mean:this.i18n.average},{value:"STDDEV",label:this.i18n.standardDev}],ja=[{value:"MIN",label:this.i18n.minimum},{value:"MAX",label:this.i18n.maximum}],na=[{value:"First",label:this.i18n.first},{value:"Last",label:this.i18n.last}],oa=V.isDefined(M.emptyValue)?M.emptyValue:"";U.removeOption(U.getOptions());U.addOption([{value:oa,
label:this.i18n.statistic}]);M.showGeoAnalyticsParams&&(U.addOption({value:"COUNT",label:this.i18n.count}),da.push({value:"VARIANCE",label:this.i18n.variance}),da.splice(4,0,{value:"RANGE",label:this.i18n.range}));M.showFirstLastStats&&U.addOption(na);M.type&&"number"!==M.type?M.type&&"string"===M.type?(U.addOption({value:"ANY",label:this.i18n.any}),M.selectWidget.optionsType="string"):M.type&&"date"===M.type&&(U.addOption(ja),M.selectWidget.optionsType="date"):(U.addOption(da),M.selectWidget.optionsType=
"number");U.set("value",oa)},addFillOptions:function(M){var U=M.selectWidget,da=[{value:"ZEROES",label:this.i18n.zeroes},{value:"SPATIAL_NEIGHBORS",label:this.i18n.spatialneighbhors},{value:"SPACE_TIME_NEIGHBORS",label:this.i18n.spacetimeneighbors},{value:"TEMPORAL_TREND",label:this.i18n.temporaltrend}];U.removeOption(U.getOptions());U.addOption([{value:"0",label:this.i18n.fill}]);M.type&&"number"!==M.type||U.addOption(da)},perMeter:function(M){var U=1;switch(M){case ba.MILLIMETERS:U=1E3;break;case ba.CENTIMETERS:U=
100;break;case ba.DECIMETERS:U=10;break;case ba.METERS:U=1;break;case ba.KILOMETERS:U=.001;break;case ba.INCHES:U=39.370079;break;case ba.FEET:U=3.2808399;break;case ba.YARDS:U=1.0936133;break;case ba.MILES:U=6.2137119E-4;break;case ba.NAUTICAL_MILES:U=5.399568E-4;break;case ba.ACRES:U=2.4710538E-4;break;case ba.ARES:U=.01;break;case ba.HECTARES:U=1E-4;break;case ba.SQUARE_INCHES:U=1550.0031;break;case ba.SQUARE_FEET:U=10.7639104;break;case ba.SQUARE_YARDS:U=1.19599005;break;case ba.SQUARE_MILES:U=
3.86102159E-7;break;case ba.SQUARE_NAUTICAL_MILES:U=2.9155335E-7;break;case ba.SQUARE_MILLIMETERS:U=1E6;break;case ba.SQUARE_CENTIMETERS:U=1E4;break;case ba.SQUARE_DECIMETERS:U=100;break;case ba.SQUARE_METERS:U=1;break;case ba.SQUARE_KILOMETERS:U=1E-6}return U},perMile:function(M){var U=1;switch(M){case "Feet":U=1.89394E-4;break;case "Yards":U=5.68182E-4;break;case "Meters":U=6.21371E-4;break;case "Kilometers":U=.621371}return U},perMinute:function(M){var U=1;switch(M){case "Seconds":U=.0166667;break;
case "Hours":U=60}return U},getType:function(M){var U=null;switch(M){case ba.ACRES:U=2;break;case ba.ARES:U=2;break;case ba.CENTIMETERS:U=1;break;case ba.DECIMETERS:U=1;break;case ba.FEET:U=1;break;case ba.HECTARES:U=2;break;case ba.INCHES:U=1;break;case ba.KILOMETERS:U=1;break;case ba.METERS:U=1;break;case ba.MILES:U=1;break;case ba.MILLIMETERS:U=1;break;case ba.NAUTICAL_MILES:U=1;break;case ba.SQUARE_CENTIMETERS:U=2;break;case ba.SQUARE_DECIMETERS:U=2;break;case ba.SQUARE_FEET:U=2;break;case ba.SQUARE_INCHES:U=
2;break;case ba.SQUARE_KILOMETERS:U=2;break;case ba.SQUARE_METERS:U=2;break;case ba.SQUARE_MILES:U=2;break;case ba.SQUARE_MILLIMETERS:U=2;break;case ba.SQUARE_NAUTICAL_MILES:U=2;break;case ba.SQUARE_YARDS:U=2;break;case ba.YARDS:U=1;break;default:U=0}return U},unitConversion:function(M,U,da){var ja=!0;V.isDefined(M)||(this.emitError("The 'From' Value must be a valid numeric value: "+M),ja=!1);V.isDefined(U)||(this.emitError("The 'From' Units must be defined: "+U),ja=!1);V.isDefined(da)||(this.emitError("The 'To' Units must be defined: "+
da),ja=!1);M instanceof Array&&(this.emitError("Only single 'From' Value supported: "+M),ja=!1);U instanceof Array&&(this.emitError("Only single 'From' Units supported: "+U),ja=!1);da instanceof Array&&(this.emitError("Only single 'To' Units supported: "+da),ja=!1);var na=this.getType(U),oa=this.getType(da);0===na&&(this.emitError("Unsupported 'From' Units: "+U),ja=!1);0===oa&&(this.emitError("Unsupported 'To' Units: "+da),ja=!1);na!==oa&&(this.emitError("Incompatible 'From' and 'To' Units: "+U+" and "+
da),ja=!1);return ja?U===da?+M:+M/this.perMeter(U)*this.perMeter(da):Number.NaN},emitError:function(M){},isEmpty:function(M){for(var U in M)if(M.hasOwnProperty(U))return!1;return k.stringify(M)===k.stringify({})},getRoutingUtilities:function(M){var U=new x,da={},ja,na,oa,ra;M||U.reject(Error("Missing parameter: widget required parameter"));-1!==v.indexOf(["CreateDriveTimeAreas","EnrichLayer","SummarizeNearby"],M.toolName)?w.mixin(da,{toolName:"GenerateServiceAreas",serviceName:"asyncServiceArea"}):
M.toolName===T.Tools.ChooseBestFacilities?w.mixin(da,{toolName:"SolveLocationAllocation",serviceName:"asyncLocationAllocation"}):"PlanRoutes"===M.toolName?w.mixin(da,{toolName:"SolveVehicleRoutingProblem",serviceName:"asyncVRP"}):"FindNearest"===M.toolName?w.mixin(da,{toolName:"FindClosestFacilities",serviceName:"asyncClosestFacility"}):"ConnectOriginsToDestinations"===M.toolName&&w.mixin(da,{toolName:"FindRoutes",serviceName:"asyncRoute"});this.routingUtilities||(this.routingUtilities={});this.routingUtilities&&
this.routingUtilities[M.toolName]?U.resolve(this.routingUtilities[M.toolName]):M.signInPromise.then(w.hitch(this,function(ua){(ra=M.get("helperServices"))&&ra.routingUtilities?(oa=ra.routingUtilities.url,ja="sync"):ja=M._getSelf(M.portalUrl);D(ja,w.hitch(this,function(wa){wa&&wa.helperServices&&wa.helperServices.routingUtilities&&(oa=wa.helperServices.routingUtilities.url);V.isDefined(oa)||U.reject(Error("Missing Routing Utility Service to get Network Analysis Service Limits."));na=new Q(oa+"/GetToolInfo");
na.execute(da).then(w.hitch(this,function(Ba){Ba&&0<Ba.length&&Ba[0].value?(this.routingUtilities[M.toolName]=Ba[0].value,U.resolve(Ba[0].value)):U.reject("Routing Utility Service 'GetToolInfo' job did not return service limits.")}),function(Ba){U.reject(Ba)})}))}),function(ua){U.reject(ua)});return U.promise},getNetworkAnalysisLimits:function(M){var U=new x;M||U.reject(Error("Missing parameter: widget required parameter"));this.getRoutingUtilities(M).then(w.hitch(this,function(da){da.serviceLimits?
U.resolve(da.serviceLimits):U.reject()}),function(da){U.reject(da)});return U.promise},isEsriWorldGeocoder:function(M){var U=this.isAgoWorldGeocodeServer(M);M=this.isAgoWorldGeocodeServerProxy(M);return U||M},isAgoWorldGeocodeServer:function(M){return M&&!!M.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig)},isCustomGeoEnrichmentServer:function(M,U){var da=(M||"").toLowerCase(),ja=-1<da.indexOf("/geoenrichmentserver")&&-1<da.indexOf("/servers/")&&-1<da.indexOf("/rest/services/");
da=!U&&da.indexOf("utility")&&-1<da.indexOf(".arcgis.com");return ja&&da},isAgoWorldGeocodeServerProxy:function(M){return M&&!!M.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig)},isWorldGeoLocator:function(M){return M&&!!M.match(/(\/rest\/services\/world\/geocodeserver).*/ig)},showMessages:function(M,U,da){p.set(U,"innerHTML",M);c.fadeIn({node:da,easing:B.quadIn,onEnd:w.hitch(this,function(){d.set(da,{display:""})})}).play()},hideMessages:function(M){c.fadeOut({node:M,easing:B.quadOut,
onEnd:function(){d.set(M,{display:"none"})}}).play()},getHelpUrl:function(M){if(M.topic&&M.widget){var U;M.widget.portalSelf&&M.widget.portalSelf.helpBase?U=M.widget.portalSelf.helpBase+"index.html#":!M.widget.isSingleTenant||M.widget.portalSelf&&M.widget.portalSelf.helpBase||(U="http://server.arcgis.com/en/portal/latest/use/");"BufferExpression"===M.topic&&(U+="Use_expressions_with_GeoAnalytics_Tools/019300000183000000/");return U}},isPCS:function(M){return!!M&&!!N&&-1!==v.indexOf(N,M)},isPCSByLayerType:function(M){var U=
!!M&&!!M.fullExtent&&this.isPCS(M.fullExtent.spatialReference.wkid);!U&&M.extent&&(U=!!M&&!!M.extent&&this.isPCS(M.extent.spatialReference.wkid));!U&&M.spatialReference&&(U=!!M&&!!M.spatialReference&&this.isPCS(M.spatialReference.wkid));return U},checkPCSforAnalysis:function(M){var U=M.widget&&M.widget.toolName,da=!!M.widget&&!!M.widget.context&&!!M.widget.context.processSR&&this.isPCS(M.widget.context.processSR.wkid),ja=!0,na=M.jobParams||M.widget.jobParams,oa=!!M.widget&&!!M.widget.context&&!!M.widget.context.processSR&&
!!M.widget.context.processSR.wkid;if(!U||!na||!M.widget.showGeoAnalyticsParams)return!1;var ra="\x3ca  href\x3d'#' id\x3d'"+M.widget.id+"_warn_settings_link'\x3e"+M.widget.i18n.analysisSettings+"\x3c/a\x3e\x3cdiv class\x3d'esriAnalysisSettingsIcon'\x3e\x3c/div\x3e";var ua=l.substitute(M.widget.i18n.PCSReqMsg,{defaultSpatialRef:M.widget.i18n.worldCylindrical,settingsIcon:ra});"FindHotSpots"!==U&&"FindPointClusters"!==U||da?"CalculateDensity"!==U&&"FindPointClusters"!==U&&"GeographicallyWeightedRegression"!==
U||da?"AggregatePoints"!==U||-1===v.indexOf(["HEXAGON","SQUARE"],na.binType)||da?"SummarizeWithin"===U&&na.summaryPolygons&&!da?ja=this.isPCSByLayerType(M.widget.sumWithinLayer):"SummarizeWithin"!==U||-1===v.indexOf(["HEXAGON","SQUARE"],na.binType)||da?"JoinFeatures"===U&&na.spatialNearDistance&&"Near"===na.spatialRelationship&&!da?(ja=this.isPCSByLayerType(M.widget.targetLayer))||(ua=l.substitute(M.widget.i18n.JFPCSReqMsg,{settingsIcon:ra})):"BuildMultiVariableGrid"!==U||da?"CalculateMotionStatistics"===
U&&"Planar"===na.distanceMethod&&(1<na.motionStatistics.split(",").length||1===na.motionStatistics.split(",").length&&-1===na.motionStatistics.indexOf("Duration"))&&!da?(ja=this.isPCSByLayerType(M.widget.inputLayer))||(ua=l.substitute(M.widget.i18n.CMSPCSReqMsg,{settingsIcon:ra})):"TraceProximityEvents"!==U||"Planar"!==na.distanceMethod||da||(ja=this.isPCSByLayerType(M.widget.inputLayer))||(ua=l.substitute(M.widget.i18n.TPEPCSReqMsg,{settingsIcon:ra})):ja=v.every(M.inputLayers,function(wa){return this.isPCSByLayerType(wa)},
this):ja=this.isPCSByLayerType(M.widget.summaryLayer):ja=this.isPCSByLayerType(M.widget.pointLayer):(ja=this.isPCSByLayerType(M.widget.inputLayer),"GeographicallyWeightedRegression"!==U||ja||(ua=l.substitute(M.widget.i18n.GWRPCSReqMsg,{settingsIcon:ra}))):(ja=this.isPCSByLayerType(M.widget.analysisLayer),"FindPointClusters"!==U||ja||(ua=l.substitute(M.widget.i18n.FPCSReqMsg,{settingsIcon:ra})));ja||M.hasPCSWarnShown||(M.widget.set("disableRunAnalysis",ja),this.settingsVM&&this.settingsDlg&&M.widget._bodyNode&&
M.widget._errorMessagePane&&(this.showMessages(ua,M.widget._bodyNode,M.widget._errorMessagePane),E.byId(M.widget.id+"_warn_settings_link")&&A(E.byId(M.widget.id+"_warn_settings_link"),"click",w.hitch(M.widget,M.widget.showSettingsDlg))));!ja&&M.hasPCSWarnShown&&oa&&(ja=!0);return ja},tryParseJSON:function(M){try{var U=k.parse(M);if(U&&"object"===typeof U&&null!==U)return U}catch(da){}return!1},decodeTag:function(M){return{"\x26lt;":"\x3c","\x26gt;":"\x3e"}[M]||M},stringDecode:function(M){return M.replace(/(&lt;|&gt;)/g,
this.decodeTag)},jobParamsToWidgetProps:function(M){if(M&&M.jobParams){var U=M.jobParams,da=new x,ja=[],na=[],oa;for(oa in U){var ra;U.hasOwnProperty(oa)&&("string"===typeof U[oa]&&-1!==U[oa].search(/(&lt;|&gt;)/g)&&(U[oa]=this.stringDecode(U[oa])),ra="string"===typeof U[oa]?this.tryParseJSON(U[oa]):U[oa])&&(-1!==oa.toLowerCase().indexOf("layer")&&"object"===typeof ra?na.push({key:oa,obj:ra}):ra&&(ra.Raster||ra.url)&&na.push({key:oa,obj:ra}),U[oa]=ra)}for(oa=0;oa<na.length;oa++){ra=na[oa].obj;var ua=
na[oa].key;"object"===typeof ra&&ra.length?(U[ua]=[],v.forEach(ra,function(wa,Ba){this._getFlayers(wa,ua,U,ja,!0,Ba)},this)):"object"===typeof ra&&ra.Raster?(ra.url=ra.Raster.url,this._getFlayers(ra,ua,U,ja,!0,"Raster")):this._getFlayers(ra,ua,U,ja)}y(ja).then(w.hitch(this,function(){da.resolve(M)}),w.hitch(this,function(){da.resolve(M)}));return da.promise}},_getLayerType:function(M){return M?-1!==M.indexOf("BigDataCatalogServer")?X.BIGDATA:-1!==M.indexOf("ImageServer")?X.IS:X.FS:null},_getFlayers:function(M,
U,da,ja,na,oa){if(M.url){var ra=ka({url:M.url,content:{f:"json"}});var ua=new x;ja.push(ua);ra.then(w.hitch(this,function(wa,Ba,Da,La,Ga){var xa=this._getLayerType(wa.url);if(xa===X.FS){var Ca=new Z(wa.url,{mode:Z.MODE_ONDEMAND,outFields:["*"],resourceInfo:Ga});wa.filter&&Ca.setDefinitionExpression(wa.filter);Ca.filter=wa.filter}else xa===X.BIGDATA?(Ca=Ga,w.mixin(Ca,wa)):xa===X.IS&&(Ga=wa.Raster||wa,Ca=new aa(Ga.url),Ga.renderingRule&&Ca.setRenderingRule(new Y(Ga.renderingRule)),Ga.name&&(Ca.name=
Ga.name),wa.Raster&&wa.Raster.url===wa.url&&delete wa.url);wa.name&&(Ca.name=wa.name);na?da[Ba][La]=Ca:na&&xa===X.IS?w.mixin(da[Ba][La],Ca):da[Ba]=Ca;Da.resolve()},M,U,ua,oa),w.hitch(this,function(wa,Ba,Da,La,Ga){wa={name:wa.name,empty:!0};na?da[Ba][La]=wa:da[Ba]=wa;Da.resolve()},M,U,ua,oa))}else ja=new Z(M,{outFields:["*"]}),M.name&&(ja.name=M.name),na?da[U][oa]=ja:da[U]=ja},isLayerInLayers:function(M,U){return v.some(U,function(da){return this.isSameLayer(M,da)},this)},addBlankOption:function(M,
U){U&&U.length?U.push({value:"  ",label:""}):M.addOption({value:"  ",label:""});setTimeout(w.hitch(this,this._validateSelectUI,M),100)},_validateSelectUI:function(M){M._hasBeenBlurred=!0;M.set("focused",!0);M.validate();M.set("focused",!1);M._hasBeenBlurred=!1;setTimeout(w.hitch(this,function(){M.reset()}),1E3)},updateExpressions:function(M){M&&M.selectedInputLayers&&M.inputLayers&&M.data&&M.expressions&&(v.forEach(M.selectedInputLayers,function(U,da){v.forEach(M.inputLayers,function(ja,na){ja&&U&&
(!U.url&&!ja.url&&U.name===ja.name||U.url&&ja.url&&U.url===ja.url)&&(U._oldIndex=da,U._newIndex=na)})}),v.forEach(M.data,function(U,da){if(0<da&&U){var ja=M.expressions[da-1];V.isDefined(U.layer)&&(U.layer=ja&&ja.layer);V.isDefined(U.selectingLayer)&&(U.selectingLayer=ja&&ja.selectingLayer)}}),v.forEach(M.data,function(U){var da=!1,ja=!1;v.forEach(M.selectedInputLayers,function(na){V.isDefined(U.layer)&&U.layer===na._oldIndex&&!da&&(U.layer=na._newIndex,da=!0);V.isDefined(U.selectingLayer)&&U.selectingLayer===
na._oldIndex&&!ja&&(U.selectingLayer=na._newIndex,ja=!0)},this)},this))},isBigDataTypeTobeAdded:function(M){return-1==v.indexOf(M,'type:"Big Data File Share"')?!0:!1},removeDuplicates:function(M,U){for(var da=[],ja={},na=0;na<M.length;na++)ja[M[na]]?ja[M[na]]+=1:(da.push(M[na]),ja[M[na]]=1);return U?ja:da},isPoint:function(M){return M&&M.geometryType===T.GeometryTypes.Point},isLine:function(M){return M&&M.geometryType===T.GeometryTypes.Line},isPolygon:function(M){return M&&M.geometryType===T.GeometryTypes.Polygon},
isSameLayer:function(M,U){return M&&U&&(M.name&&U.name&&M.name===U.name||M.url&&U.url&&M.url===U.url)},getTimeType:function(M){return M?V.isDefined(M.timeInfo)&&V.isDefined(M.timeInfo.startTimeField)&&!V.isDefined(M.timeInfo.endTimeField)?T.TimeTypes.Instant:V.isDefined(M.timeInfo)&&V.isDefined(M.timeInfo.startTimeField)&&V.isDefined(M.timeInfo.endTimeField)?T.TimeTypes.Interval:V.isDefined(M.time)&&V.isDefined(M.time.timeType)?M.time.timeType:!1:!1},fetchGroupForRFT:function(M){var U=new x,da=b.locale,
ja=da?da.substring(0,2):"en";da=this.systemRFTGroupName+" owner: ("+("en"===ja?["esri_en"]:["esri_en","esri_"+ja]).join(" OR ")+")";M.queryGroups({q:da},!0).then(function(na){0<na.total&&na.results?(na=na.results,na=this.findRFTLocaleGroup(na,ja)||this.findRFTLocaleGroup(na,"en"),U.resolve(na)):U.resolve(null)}.bind(this));return U},findRFTLocaleGroup:function(M,U){var da;M.some(function(ja){var na=ja.owner;if(na&&na.substring(na.length-2)===U)return da=ja,!0});return da},updateOptions:function(M,
U){if(M){for(;0<M.getOptions().length;)M.removeOption(M.getOptions());M._setDisplay("");U&&0<U.length&&M.addOption(U)}},addOptionsFromLayers:function(M){M.select&&M.layers&&(M.customOptions=M.customOptions||[],M.forbiddenLayers=M.forbiddenLayers||[],M.layers.forEach(function(U,da){this.isLayerInLayers(U,M.forbiddenLayers)||M.customOptions.push({value:da.toString(),label:U.name,selected:M.selectedOption&&this.isSameLayer(M.selectedOption,U)})},this),this.updateOptions(M.select,M.customOptions),this.addBrowseOptionForTool({select:M.select,
disableLAAL:!0},M.widget))},replaceTag:function(M){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;"}[M]||M},safetagsReplace:function(M){return M.replace(/[<>]/g,this.replaceTag)}});w.setObject("dijit.analysis.utils",G,fa);return G})},"dojox/mvc/equals":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/Stateful","./StatefulArray"],function(K,G,w,v){var r=function(f,c,a){a=a||r;var b=[a.getType(f),a.getType(c)];return b[0]!=b[1]?!1:a["equals"+b[0].replace(/^[a-z]/,function(p){return p.toUpperCase()})](f,
c)};return G.setObject("dojox.mvc.equals",G.mixin(r,{getType:function(f){return G.isArray(f)?"array":G.isFunction((f||{}).getTime)?"date":null!=f&&("[object Object]"=={}.toString.call(f)||G.isFunction((f||{}).set)&&G.isFunction((f||{}).watch))?"object":"value"},equalsArray:function(f,c){for(var a=0,b=Math.max(f.length,c.length);a<b;a++)if(!r(f[a],c[a]))return!1;return!0},equalsDate:function(f,c){return f.getTime()==c.getTime()},equalsObject:function(f,c){var a=G.mixin({},f,c),b;for(b in a)if(!(b in
w.prototype||"_watchCallbacks"==b||r(f[b],c[b])))return!1;return!0},equalsValue:function(f,c){return f===c}}))})},"dojox/mvc/StatefulArray":function(){define(["dojo/_base/lang","dojo/Stateful"],function(K,G){function w(r){r._watchElementCallbacks&&r._watchElementCallbacks(void 0,[],[]);return r}var v=function(r){r=K._toArray(r||[]);r.constructor=v;return K.mixin(r,{pop:function(){return this.splice(this.get("length")-1,1)[0]},push:function(){this.splice.apply(this,[this.get("length"),0].concat(K._toArray(arguments)));
return this.get("length")},reverse:function(){return w([].reverse.apply(this,K._toArray(arguments)))},shift:function(){return this.splice(0,1)[0]},sort:function(){return w([].sort.apply(this,K._toArray(arguments)))},splice:function(f,c){var a=this.get("length");f+=0>f?a:0;var b=Math.min(f,a),p=this.slice(f,f+c),q=K._toArray(arguments).slice(2);[].splice.apply(this,[f,c].concat(Array(q.length)));for(var t=0;t<q.length;t++)this[b+t]=q[t];this._watchElementCallbacks&&this._watchElementCallbacks(f,p,
q);this._watchCallbacks&&this._watchCallbacks("length",a,a-p.length+q.length);return p},unshift:function(){this.splice.apply(this,[0,0].concat(K._toArray(arguments)));return this.get("length")},concat:function(f){return new v([].concat.apply(this,arguments))},join:function(f){for(var c=[],a=this.get("length"),b=0;b<a;b++)c.push(this.get(b));return c.join(f)},slice:function(f,c){var a=this.get("length");c=(void 0===c?a:c)+(0>c?a:0);var b=[];for(a=f+(0>f?a:0)||0;a<Math.min(c,this.get("length"));a++)b.push(this.get(a));
return new v(b)},watchElements:function(f){var c=this._watchElementCallbacks,a=this;c||(c=this._watchElementCallbacks=function(p,q,t){for(var m=[].concat(c.list),n=0;n<m.length;n++)m[n].call(a,p,q,t)},c.list=[]);c.list.push(f);var b={};b.unwatch=b.remove=function(){for(var p=c.list,q=0;q<p.length;q++)if(p[q]==f){p.splice(q,1);break}};return b}},G.prototype,{set:function(f,c){if("length"==f){var a=this.get("length");a<c?this.splice.apply(this,[a,0].concat(Array(c-a))):c<a&&this.splice.apply(this,[c,
a-c])}else a=this.length,G.prototype.set.call(this,f,c),a!=this.length&&G.prototype.set.call(this,"length",this.length);return this},isInstanceOf:function(f){return G.prototype.isInstanceOf.apply(this,arguments)||f==v}})};v._meta={bases:[G]};return K.setObject("dojox.mvc.StatefulArray",v)})},"esri/dijit/analysis/HelpWindow":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/_base/kernel dojo/aspect dojo/has dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/dom-style dojo/query dojo/window dojo/dom-geometry dijit/_Widget dijit/TooltipDialog dijit/popup ../../kernel ../../lang ../../urlUtils ../../request ../_EventedWidget dojo/i18n!../../nls/jsapi".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C){w=w([h],{declaredClass:"esri.dijit.analysis.HelpWindow",i18n:null,onlineHelpMap:null,showLearnMore:!1,"class":"esriAnalyisHelpWindow",constructor:function(z){this.isPortal=z&&z.isPortal},postMixInProperties:function(){this.inherited(arguments);this.i18n={};v.mixin(this.i18n,C.common);v.mixin(this.i18n,C.analysisHelp)},postCreate:function(){this.inherited(arguments);var z=["ar","he"],D;for(D=0;D<z.length;D+=1){var E=z[D];c.locale&&-1!==c.locale.indexOf(E)&&
(-1!==c.locale.indexOf("-")?-1!==c.locale.indexOf(E+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0)}z=K.toUrl(this.isPortal?"./help/helpmap_enterprise.json":"./help/helpmap.json");y({url:z}).then(v.hitch(this,function(A){this.onlineHelpMap=A.map}),function(A){});this._initSelfHelpMap()},_getAbsoluteUrl:function(z){var D=x.getProtocolForWebResource();if(/^https?:/i.test(z))return z;if(/^\/\//i.test(z))return D+z;if(/^\//i.test(z))return D+"//"+window.location.host+z},_computeSize:function(z){var D=
{w:400,h:200};b("esri-mobile")?D={w:"50%",h:"90%"}:-1!==z.indexOf("Category")?(D.w=400,D.h=320):-1!==z.indexOf("Tool")?(D.w=400,D.h=320):-1!==z.indexOf("toolDescription")&&(D.w=400,D.h=520);return D},_initSelfHelpMap:function(){this.isPortal&&this.portalSelf&&this.portalSelf.helpMap&&(this.selfHelpMap=this.portalSelf.helpMap.m)},_setHelpTopicAttr:function(z){this.tooltipHelpDlg&&(d.close(this.tooltipHelpDlg),this.tooltipHelpDlg.destroy(),this.tooltipHelpDlg=null);var D="";this.showLearnMore=!1;var E=
this._analysisGpServer&&-1!==this._analysisGpServer.indexOf("dev")?"dev":this._analysisGpServer&&-1!==this._analysisGpServer.indexOf("qa")?"uat":"";D=this.isPortal?"-PortalOnly":"-OnlineOnly";var A=v.clone(c.locale);var F="es-es es-mx fr-fr fr-ch it-ch it-it de-de de-ch".split(" ");"nb"===A?A="no":-1!==G.indexOf(F,A)&&(A=A.split("-")[0]);var H="ar bg bs ca cs da de es el et fi fr he hr hu id it ja ko lt lv ru nl no pl pt-br pt-pt ro sl sk sv sr th tr uk vi zh-cn zh-hk zh-tw".split(" ");var I="ar de es fr it ja ko ru pl pt-br zh-cn".split(" ");
if("SHOWHELPURL"===z)F=this.helpIdUrl,this.showLearnMore=!1;else{F=K.toUrl("esri/dijit/analysis/help/"+this.helpFileName+".html");var L=this.helpFileName;if(u.isDefined(this.onlineHelpMap)&&u.isDefined(this.onlineHelpMap[L])&&u.isDefined(this.onlineHelpMap[L][z])){this.showLearnMore=!0;var J="https://doc"+E+".arcgis.com/en/arcgis-online/analyze/"+this.onlineHelpMap[L][z];this.isPortal&&this.helpBase&&this.selfHelpMap&&(J=this.helpBase+this.selfHelpMap[this.onlineHelpMap[L][z]])}-1!==G.indexOf(H,A)&&
(-1!==A.indexOf("-")&&(A=A.split("-"),A=A[0]+"-"+A[1].toUpperCase()),F=K.toUrl("esri/dijit/analysis/help/"+A+"/"+this.helpFileName+".html"));-1!==G.indexOf(I,A)&&this.showLearnMore&&(J="https://doc"+E+".arcgis.com/"+A+"/arcgis-online/analyze/"+this.onlineHelpMap[L][z],this.isPortal&&this.helpBase&&this.selfHelpMap?J=this.helpBase+this.selfHelpMap[this.onlineHelpMap[L][z]]:this.isPortal&&!this.helpBase&&(J="https://server"+E+".arcgis.com/"+A+"/portal/latest/use/"+this.onlineHelpMap[L][z]))}this._size=
E=this._computeSize(z);this.tooltipHelpDlg=new e({preload:!0,content:"\x3cdiv class\x3d'' style\x3d'position:relative'\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3cdiv class\x3d'esriFloatTrailing' style\x3d'padding:0;'\x3e\x3ca href\x3d'#' class\x3d'esriAnalysisCloseIcon' title\x3d'"+this.i18n.close+"'\x3e\x3c/a\x3e\x3c/div\x3e\x3ciframe frameborder\x3d'0'  id\x3d'"+z+"' src\x3d'"+F+"#"+z+D+"' width\x3d'"+E.w+"' height\x3d'"+E.h+"' marginheight\x3d'0' marginwidth\x3d'0'\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList"+
(this.showLearnMore?"'\x3e":" hidden'\x3e")+"\x3ca class\x3d'action zoomTo' href\x3d'"+(this.showLearnMore?J:"#")+"' target\x3d'_help'\x3e"+this.i18n.learnMore+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e","class":"esriHelpPopup esriHelpPopupWrapper esriAnalyisHelpWindow"});this.tooltipHelpDlg.startup()},show:function(z,D){this.helpFileName=D.helpFileName;this._analysisGpServer=D.analysisGpServer;this.isPortal=D.isPortal;this.helpBase=D.helpBase;D.portalSelf&&(this.portalSelf=
D.portalSelf);this.selfHelpMap||this._initSelfHelpMap();D.analysisMode&&(this.analysisMode=D.analysisMode);D.showHelpFromUrl&&D.helpUrl&&(this.showHelpFromUrl=D.showHelpFromUrl,this.helpIdUrl=D.helpUrl,D.helpId="SHOWHELPURL");this.set("helpTopic",D.helpId);var E=a.after(d,"open",v.hitch(this,function(){n(".esriAnalysisCloseIcon",this.tooltipHelpDlg.domNode).on("click",v.hitch(this,this.close));E.remove()})),A=z.pageX,F=k.getBox(),H;var I=!1;if(D.helpParentNode)var L=D.helpParentNode;L&&(H=l.position(L));
H&&F.w-z.pageX<H.w?(I=!0,A=H.x-this._size.w-10,this._isRightToLeft&&(A-=10)):this._isRightToLeft&&A-40<this._size.w&&(A=H.w+this._size.w+80);d.open({popup:this.tooltipHelpDlg,x:!0===this._isRightToLeft||I?A-40:A+40,y:z.screenY-z.pageY+10,onCancel:v.hitch(this,function(){this.close()}),onExecute:function(){this.close()}});this.tooltipHelpDlg.domNode.parentNode&&m.set(this.tooltipHelpDlg.domNode.parentNode,"overflowY","hidden")},close:function(z,D){d.close(this.tooltipHelpDlg)}});v.setObject("dijit.analysis.HelpWindow",
w,g);return w})},"esri/dijit/BrowseItems":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/_base/event dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/has dojo/dom dojo/dom-construct dojo/mouse dojo/topic dojo/query dojo/parser dijit/registry dijit/TooltipDialog dijit/popup dojo/promise/all dojo/Deferred dgrid/Grid dgrid/extensions/Pagination dgrid/extensions/DijitRegistry dgrid/OnDemandGrid dgrid/Selection dgrid/selector dgrid/Keyboard dgrid/util/mouse dgrid/util/touch put-selector/put dojo/store/Observable dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../arcgis/Portal ../Evented ../PluginTarget dojo/i18n!../nls/jsapi ./_AppTemplateFiltersMixin ./_RefreshMixin ../kernel ../lang ../config ../geometry/webMercatorUtils ../tasks/GeometryService ../SpatialReference dojo/NodeList-dom".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S){var N=K(null,{idProperty:"id",constructor:function(X){K.safeMixin(this,X)},get:function(X,aa){return V.PortalUtil.request(this.portalUrl+"content/items/"+X,aa).then(function(ea){return new V.PortalItem(G.mixin(ea,{portal:this.portal}))})},getIdentity:function(X){return X[this.idProperty]},query:function(X,aa){var ea=G.isObject(X)?X:{q:X},Y=null;if(aa){ea=G.mixin(ea,{num:aa.count,start:(aa.start||
0)+1});if(aa.sort&&aa.sort.length){var T=aa.sort[0];ea=G.mixin(ea,{sortField:encodeURIComponent("created"===T.attribute?"uploaded":T.attribute),sortOrder:T.descending?"desc":"asc"})}aa.useExtent&&aa.extent&&(ea.bbox=aa.extent);aa.queryType&&"group"===aa.queryType&&(Y="group")}ea="group"===Y?this.portal.queryGroups(ea,!0).then(function(ca){ca.results.total=ca.total;return ca.results}):this.portal.queryItems(ea,!0).then(function(ca){ca.results.total=ca.total;return ca.results});return V.PortalResult(ea)}});
v=K([O,P,fa,ka],{templateString:'\x3cdiv\x3e\x3cdiv class\x3d"top-bar"\x3e\x3cdiv  class\x3d"esriFloatLeading instructions"\x3e\x3cspan class\x3d"messageLeft hide" data-dojo-attach-point\x3d"messageNodeLeft"\x3e\x3c/span\x3e\x3cspan class\x3d"messageRight hide" data-dojo-attach-point\x3d"messageNodeRight"\x3e\x3c/span\x3e\x3ca tabIndex\x3d"-1" data-dojo-attach-point\x3d"helpLink" class\x3d"esriHelpIcon hide" title\x3d"${i18n.browseItems.learnMoreConfigurableApps}" href\x3d"#" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}_search"class\x3d"searchBar esriFloatTrailing"\x3e\x3cinput tabIndex\x3d"1" placeholder\x3d"${i18n.browseItems.searchTitle}" class\x3d"esriSearchBox dijitTextBox" type\x3d"search"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"gallery"\x3e\x3cdiv class\x3d"gallery-left  quiet-scroll"\x3e\x3cul class\x3d"filters"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"templates gallery-right"\x3e\x3cp id\x3d"${id}_filterTitle" class\x3d"filter-title hide" data-dojo-attach-point\x3d"filterDescription"\x3e\x3c/p\x3e\x3cdiv id\x3d"${id}_grid"class\x3d"dgrid-autoheight quiet-scroll"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  class\x3d"loaderWrap" data-dojo-attach-point\x3d"loaderWrap"\x3e\x3c/div\x3e\x3cdiv  class\x3d"js-info-panel templateInfoPanel" data-dojo-attach-point\x3d"infoPanel"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
galleryTemplate:"\x3cdiv style\x3d'opacity:1;' class\x3d'grid-item gallery-view'\x3e${item:_formatThumbnail}${item:_formatItemTitle}\x3cp class\x3d\"template-overlay\" style\x3d\"display:none;\"\x3e${i18n.browseItems.selectDetails}\x3c/p\x3e\x3c/div\x3e",infoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"on-next"\x3e${i18n.browseItems.configure}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
_popupTemplate:'\x3cdiv class\x3d"esriBrowsePopup quiet-scroll"\x3e\x3cp\x3e{summary}\x3c/p\x3e\x3c/div\x3e',showInfoPanel:!0,isAutoClose:!0,showTooltip:!1,filterWithinGroup:!0,checkIsButtonEnabled:!1,baseClass:"esriBrowseItemsCtr",i18n:la,postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.self?(this._portal=new V.Portal({url:this.portalUrl,self:this.self}),this._init(),this._portal.on("load",G.hitch(this,function(){this.emit("portal-load",
{portal:this._portal});this._fetchData()}))):(this._portal=new V.Portal(this.portalUrl),this._portal.signIn().then(G.hitch(this,function(){this.emit("portal-load",{portal:this._portal});this._init();this._fetchData()})))},_init:function(){this._canSearchPublic=this.self?this.self.canSearchPublic:this._portal.canSearchPublic;this.query=G.mixin(this.query||{},{get:function(X){return this[X]&&this[X].length?"("+this[X].join(" OR ")+") ":""},toString:function(){return{q:this.get("groups")+this.get("tags")+
this.get("persistentTypekeywords")+this.get("typekeywords")+this.get("types")+this.get("owners")+this.get("orgids")+this.get("custom")+(this.query||"")+(this.search||"")+' -type:"Attachment" -tags:"mature support"'}}});this.self?this.self.canSearchPublic=!0:this._portal.canSearchPublic=!0;this.galleryTemplate=this.plugIn&&this.plugIn.galleryTemplate||this.galleryTemplate;this.infoPanelTemplate=this.plugIn&&this.plugIn.infoPanelTemplate||this.infoPanelTemplate;if(this.helpLinkUrl=this.plugIn&&this.plugIn.helpLinkUrl||
"")a.set(this.helpLink,"href",this.helpLinkUrl),f.remove(this.helpLink,"hide");h(".templates",this.domNode).addClass("fade");h(".dgrid-footer",this.domNode).addClass("hide");c.set(this.infoPanel,"display","none")},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove());this._queryTimer&&clearTimeout(this._queryTimer);this._grid=this._portal=null},closeInfoPanel:function(){m.byId("close-panel").click()},
_setItemQueryAttr:function(X){this.itemQuery=X},_setPluginAttr:function(X){this.addPlugin(X)},_setMessageAttr:function(X){this.set("messageRight",X)},_setMessageRightAttr:function(X){"string"===typeof X?a.set(this.messageNodeRight,"innerHTML",X):X instanceof HTMLElement&&n.place(X,this.messageNodeRight);f.remove(this.messageNodeRight,"hide")},_setMessageLeftAttr:function(X){"string"===typeof X?a.set(this.messageNodeLeft,"innerHTML",X):X instanceof HTMLElement&&n.place(X,this.messageNodeLeft);f.remove(this.messageNodeLeft,
"hide")},_setDisabledAttr:function(X){var aa=d.findWidgets(this.domNode).concat(d.findWidgets(this._content));w.forEach(aa,function(ea){ea.set("disabled",X)});f[X?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_setSortAttr:function(X){this.sortAttribute=X},_setSortDescendingAttr:function(X){this.sortDescending=X},_getSelectionAttr:function(){var X=this._grid.selection,aa;for(aa in X)if(X.hasOwnProperty(aa))break;return aa&&this._grid.row(aa).data},_setGalleryTemplateAttr:function(X){W.isDefined(X)&&
(this.galleryTemplate=X)},_setFormatThumbnailAttr:function(X){W.isDefined(X)&&"function"===typeof X&&(this._formatThumbnail=X)},_setFormatItemTitleAttr:function(X){W.isDefined(X)&&"function"===typeof X&&(this._formatItemTitle=X)},_setRowsPerPageAttr:function(X){this._set("rowsPerPage",X)},_setPagingLinksAttr:function(X){this._set("pagingLinks",X)},_getQueryAttr:function(){return this.query},_setQueryAttr:function(X){this._set("query",X);this._grid&&this._grid.set("query",X.toString())},_setExtentAttr:function(X){X&&
this._set("extent",this._extentToString(X))},_setUseExtentAttr:function(X){this._set("useExtent",X)},_setQueryTypeAttr:function(X){this._set("queryType",X)},_setFetchTimeoutAttr:function(X){this._set("fetchTimeout",X)},_setShowInfoPanelAttr:function(X){this._set("showInfoPanel",X)},_setSelectionModeAttr:function(X){-1===w.indexOf(["extended","toggle","multiple","single","none"],X)&&(X="single");this._set("selectionMode",X)},_setDemandListAttr:function(X){this._set("demandList",X)},_validate:function(){return!!this.get("selection")},
reset:function(){h(".esriSearchBox",m.byId(this.id+"_search")).forEach(function(T){a.set(T,"value","")});this.query.search="";if(this.plugIn.filters){var X=[],aa=[],ea=[],Y=[];h("li.active",this.domNode).forEach(function(T){f.remove(T,"active");var ca=this.plugIn.filters[T.childNodes[0].id];T=w.map(ca.tags,function(da){return'tags:"'+da+'"'},this);var M=w.map(ca.owners,function(da){return'owner:"'+da+'"'},this),U=w.map(ca.orgids,function(da){return'orgid:"'+da+'"'},this);ca=w.map(ca.typekeywords,
function(da){return'typekeywords:"'+da+'"'},this);X.push(T);ea.push(M);Y.push(U);aa.push(ca)},this);this.query.tags=w.filter(this.query.tags,function(T){return-1!==w.indexOf(X,T)});this.query.owners=w.filter(this.query.owners,function(T){return-1!==w.indexOf(ea,T)});this.query.orgids=w.filter(this.query.orgids,function(T){return-1!==w.indexOf(Y,T)});this.query.typekeywords=w.filter(this.query.typekeywords,function(T){return-1!==w.indexOf(aa,T)});m.byId("all").click()}},_showPopup:function(X){if(!this._isInsideTooltipDialog){this._closePopup();
var aa=this._grid.row(X);X=h("img",aa.element)[0];if(aa={summary:aa.data.snippet},aa.summary)this._tooltip=new g({content:G.replace(this._popupTemplate,aa),onMouseEnter:G.hitch(this,function(){this._isInsideTooltipDialog=!0}),onMouseLeave:G.hitch(this,function(){this._isInsideTooltipDialog=!1;this._closePopup()})}),u.open({className:"esriBrowsePopupCtr",popup:this._tooltip,around:X,orient:["after-centered","before-centered"]}),this._onCloseConnect=h(".dijitDialogCloseIcon",this._tooltip.domNode).on("click",
G.hitch(this,function(ea){ea.preventDefault();this._closePopup()}))}},_closePopup:function(){this._tooltip&&(this._onCloseConnect&&this._onCloseConnect.remove(),u.close(this._tooltip),this._tooltip.destroyRecursive(),this._tooltip=this._onCloseConnect=void 0)},_clearQueryTimeout:function(){clearTimeout(this._queryTimer);this._queryTimer=null},_clearClosePanelTimeout:function(){clearTimeout(this._panelClosing);this._panelClosing=null;w.forEach(this._panelClickHandles,"item.remove();");n.empty(this.infoPanel)},
_createGrid:function(){var X=K([B,C,E,ha,z]),aa=new J(new N({portal:this._portal})),ea=this.query,Y=G.hitch(this,function(M){M.snippet=M.snippet||"";var U=L("div");M=b.substitute(this.galleryTemplate,{item:M,i18n:this.i18n},null,this);n.place(M,U);return U}),T={};this.get("demandList")&&(X=K([B,D,E,ha,z]));this.get("useExtent")&&(T.extent=this.get("extent"),T.useExtent=this.get("useExtent"));this.get("queryType")&&(T.queryType=this.get("queryType"));var ca={store:aa,query:ea.toString(),selectionMode:this.selectionMode||
"single",pagingLinks:this.get("pagingLinks")||2,rowsPerPage:this.plugIn&&this.plugIn.rowsPerPage||this.get("itemsPerPage")||6,loadingMessage:"Loading items...",showLoadingMessage:!1,renderRow:Y,noDataMessage:this.i18n.gallery.noItemsToDisplay,deselectOnRefresh:!("multiple"===this.selectionMode||"extended"===this.selectionMode||"toggle"===this.selectionMode),sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}],queryOptions:T};this.get("demandList")&&(ca={store:aa,query:ea.toString(),
minRowsPerPage:this.plugIn&&this.plugIn.rowsPerPage||this.get("itemsPerPage")||50,selectionMode:this.selectionMode||"single",loadingMessage:"Loading items...",showLoadingMessage:!1,renderRow:Y,pagingMethod:"throttleDelayed",noDataMessage:this.i18n.gallery.noItemsToDisplay,deselectOnRefresh:!("multiple"===this.selectionMode||"extended"===this.selectionMode||"toggle"===this.selectionMode),sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}],queryOptions:T});this._grid=new X(ca,
this.id+"_grid");this._grid.startup();this.own(p(this.domNode,"click",G.hitch(this,function(M){m.byId("close-panel")&&this.isAutoClose&&m.byId("close-panel").click()})),this._grid.on(H.enterRow,G.hitch(this,function(M){!1===f.contains(this.domNode,"showing")&&this.showInfoPanel&&this._showOverlay(!0,M);this.showTooltip&&!this.showInfoPanel&&this._showPopup(M)})),this._grid.on(H.leaveRow,G.hitch(this,function(M){this._showOverlay(!1,M);this.showTooltip&&!this.showInfoPanel&&this._closePopup(M)})),
this._grid.on(".dgrid-row:click",G.hitch(this,function(M){this.emit("grid-row-click",M);if(!1===f.contains(this.domNode,"showing")&&this.showInfoPanel){M.preventDefault();r.stop(M);this._clearClosePanelTimeout();var U=this.get("selection");this._showOverlay(!1,M);this.showInfoPanel&&this.infoPanelTemplate?(c.set(this.infoPanel,"display","block"),n.place(b.substitute(this.infoPanelTemplate,{item:U,i18n:this.i18n},function(da){return W.isDefined(da)?da:""},this),this.infoPanel)):c.set(this.infoPanel,
"display","none");this.emit("show-info-panel");f.add(this.domNode,"showing");this._panelClickHandles=[h(".template-info-showing .thumbnail img",this.domNode).on("error",G.hitch(this,function(da){a.set(da.target,"src",U.thumbnailUrl)})),h(".panel-actions .btn").on("click",G.hitch(this,function(da){da.preventDefault();r.stop(da);this.checkIsButtonEnabled&&f.contains(da.target,"disabled")||("close-panel"===da.target.id?(f.remove(this.domNode,"showing"),c.set(this.infoPanel,"display","none"),this._panelClosing=
setTimeout(G.hitch(this,function(){w.forEach(void 0,"item.remove();");n.empty(this.infoPanel)},250))):(l.publish("/esri/browseitems/close",da.target.id,this.get("selection")),da={selection:this.get("selection"),action:da.target.id},this.emit("browseitems-close",da)))})),h(".js-info-panel",this.domNode).on("click",G.hitch(this,function(da){this.isAutoClose&&(da.preventDefault(),r.stop(da))})),p(h(".dgrid-footer,.dgrid-header",this._grid.domNode),k.leave,G.hitch(this,function(da){this.showTooltip&&
!this.showInfoPanel&&this._closePopup()}))]}})),this._grid.on("dgrid-refresh-complete",G.hitch(this,function(M){h(".templates",this.domNode).removeClass("fade");h(".loaderWrap",this.domNode).addClass("hide");h(".dgrid-footer",this.domNode)[this._grid._total<=this._grid.rowsPerPage?"addClass":"removeClass"]("hide");this.showTooltip&&!this.showInfoPanel&&this._closePopup()})),this._grid.on("refresh",G.hitch(this,function(){this.showTooltip&&!this.showInfoPanel&&this._closePopup();this._img_connect&&
(this._img_connect.remove(),this._img_connect_error.remove(),this._img_connect_error=this._img_connect=null);this._img_connect=h(".grid-item-thumb",this._grid.domNode).on("load",G.hitch(this,function(M){(M=this._grid.row(M))&&M.element&&h(".grid-item",M.element).addClass("fadeIn").style("opacity","1")}));this._img_connect_error=h(".grid-item-thumb",this._grid.domNode).on("error",G.hitch(this,function(M){a.set(M.target,"src",this._portal.staticImagesUrl+"/desktopapp.png")}))})),p(m.byId(this.id+"_search"),
"keyup",G.hitch(this,function(M){M.preventDefault();this._clearQueryTimeout();this._queryTimer=setTimeout(G.hitch(this,function(){this.query.search=a.get(M.target,"value");this._fetchItems(this.query).then(G.hitch(this,function(){this._clearQueryTimeout()}))}),this.searchKeypressDelay||450)})),p(m.byId(this.id+"_search"),"search",G.hitch(this,function(M){this._queryTimer||(M.preventDefault(),this.query.search=a.get(M.target,"value"),this._fetchItems(this.query))})),this.watch("extent",G.hitch(this,
function(M,U,da){this._grid.queryOptions.extent=this.get("extent");this._grid.queryOptions.useExtent=this.get("useExtent");this._grid.query.bbox=this._grid.queryOptions.useExtent?this._grid.queryOptions.extent:"";this._grid.refresh()})),this.watch("useExtent",G.hitch(this,function(M,U,da){this._grid.queryOptions.extent=this.get("extent");this._grid.queryOptions.useExtent=da;this._grid.query.bbox=this._grid.queryOptions.useExtent?this._grid.queryOptions.extent:"";this._grid.refresh()})));this.showInfoPanel||
("single"===this._grid.selectionMode?this.own(this._grid.on("dgrid-select,dgrid-deselect",G.hitch(this,function(M){M={selection:this.get("selection")};this.emit("select-change",M)}))):-1!==w.indexOf(["toggle","multiple","extended"],this._grid.selectionMode)&&this.own(this._grid.on("dgrid-select,dgrid-deselect",G.hitch(this,function(M){M=M.grid.selection;var U,da=[];for(U in M)M[U]&&da.push(this._grid.row(U).data);this.emit("select-change",{selection:da})}))));this.emit("grid-ready",{grid:this._grid,
ready:!0})},_createFilters:function(){if(this.plugIn&&this.plugIn.filters){var X=this.plugIn.filters,aa=this.plugIn.filterStrings,ea,Y=h(".filters",this.domNode)[0];for(ea in X)n.create("li",{"class":"all"===ea?"active":"",innerHTML:"\x3ca id\x3d'"+ea+"'  href\x3d'#'\x3e"+aa[ea].title+"\x3c/a\x3e"},Y);this.own(p(Y,"li a:click",G.hitch(this,function(T){T.preventDefault();var ca=T.target;h(".active",Y).removeClass("active");f.add(ca.parentNode,"active");h(".templates",this.domNode).addClass("fade");
setTimeout(G.hitch(this,function(){f["all"===ca.id?"add":"remove"](this.filterDescription,"hide");a.set(this.filterDescription,"innerHTML",aa[ca.id].description||"")}),225);T=G.mixin({},X[ca.id]||{});this.query.tags=w.map(T.tags||[],function(M){return'tags:"'+M+'"'});this.query.owners=w.map(T.owners,function(M){return'owner:"'+M+'"'});this.query.orgids=w.map(T.orgids,function(M){return'orgid:"'+M+'"'});this.query.typekeywords=[].concat(w.map(T.typekeywords||[],function(M){return'typekeywords:"'+M+
'"'}));this.filterWithinGroup||(this.query.groups=w.map(T.groups,function(M){return'group:"'+M+'"'}));this._fetchItems(this.query)})));f.add(this.domNode,"filters");f.remove(this.domNode,"nofilters")}else f.add(this.domNode,"nofilters"+(this.plugIn&&this.plugIn.extraClasses?" "+this.plugIn.extraClasses.join(" "):"")),f.remove(this.domNode,"filters")},_showOverlay:function(X,aa){var ea=this._grid.row(aa);ea&&h(".template-overlay",ea.element).style("display",X?"":"none")},_fetchData:function(){this._user=
this._portal.getPortalUser();return this.plugIn&&this.plugIn.fetchData?this.plugIn.fetchData():this._fetchItems(this.itemQuery)},_fetchItems:function(X,aa){var ea={sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},Y=new y;this.get("useExtent")&&(ea.extent=this.get("extent"),ea.useExtent=this.get("useExtent"));this.get("queryType")&&(ea.queryType=this.get("queryType"));h(".templates",this.domNode).addClass("fade");h(".dgrid-footer",this.domNode).addClass("hide");h(".loaderWrap",
this.domNode).removeClass("hide");setTimeout(G.hitch(this,function(){this.query=G.mixin(this.query,X);this._grid?this._grid.set("query",this.query.toString(),ea):(this._createFilters(),this._createGrid());Y.resolve(this._grid)}),60);return Y},_formatThumbnail:function(X){var aa=X.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png";X.thumbnailUrl=aa;return"\x3cimg class\x3d'grid-item-thumb' width\x3d'187px' height\x3d'125px' alt\x3d'' src\x3d'"+aa+"'\x3e"},_formatInfoPanelImage:function(X){var aa=
X.screenshots&&X.screenshots.length?X.screenshots[0]:null;return aa?X.itemUrl+"/info/"+aa:X.thumbnailUrl},_formatItemTitle:function(X){return"\x3ch5\x3e"+(X.title||X.name||"\x3cNo Title\x3e")+"\x3c/h5\x3e"},clear:function(){this._grid.clearSelection()},doProject:function(X,aa){var ea=[102113,102100,3857],Y=new y;var T=function(U,da){!(U&&0<U.length&&U[0]&&"extent"==U[0].type)||isNaN(U[0].xmin)||isNaN(U[0].ymin)||isNaN(U[0].xmax)||isNaN(U[0].ymax)?U&&0<U.length&&U[0]&&"point"==U[0].type&&!isNaN(U[0].x)&&
!isNaN(U[0].y)&&Y.resolve(U,da):Y.resolve(U,da)};if(null!=X.spatialReference.wkid&&4326==X.spatialReference.wkid&&null!=aa.wkid&&this.contains(ea,aa.wkid)){X.ymin=Math.max(X.ymin,-89.99);X.ymax=Math.min(X.ymax,89.99);ea=ia.geographicToWebMercator(X);if((T=ea.spatialReference._getInfo())&&ea.xmin>ea.xmax){var ca=T.valid[1]-ea.xmin;var M=ea.xmax-T.valid[0];ca>M?ea.xmax=T.valid[1]+M:ea.xmin=T.valid[0]-ca}ea.spatialReference.wkid=aa.wkid;Y.resolve([ea])}else null!=X.spatialReference.wkid&&this.contains(ea,
X.spatialReference.wkid)&&null!=aa.wkid&&4326==aa.wkid?(ea=ia.webMercatorToGeographic(X),(T=ea.spatialReference._getInfo())&&ea.xmin>ea.xmax&&(ca=T.valid[1]-ea.xmin,M=ea.xmax-T.valid[0],ca>M?ea.xmax=T.valid[1]+M:ea.xmin=T.valid[0]-ca),Y.resolve([ea])):(this.geometryService||(this.geometryService=new R(Q.defaults.geometryService)),this.geometryService.project([X],aa,T));return Y},contains:function(X,aa){for(var ea=X.length;ea--;)if(X[ea]===aa)return!0;return!1},_extentToGCS:function(X){X=X.shiftCentralMeridian(!0);
return ia.webMercatorToGeographic(X)},_extentToString:function(X){var aa="";null!=X&&(X=this._extentToGCS(X),aa=this._roundValue(X.xmin,1E4)+","+this._roundValue(X.ymin,1E4)+","+this._roundValue(X.xmax,1E4)+","+this._roundValue(X.ymax,1E4));return aa},_roundValue:function(X,aa){return Math.round(X*aa)/aa}});G.setObject("dijit.BrowseItems",v,Z);return v})},"esri/dijit/_AppTemplateFiltersMixin":function(){define(["dojo/_base/declare"],function(){return{rootNodes:{app:{all:{},narrate:{typekeywords:["story"]},
collect:{typekeywords:["collect"]},compare:{typekeywords:["compare"]},"3dscene":{typekeywords:["3Dscene"]},analyze:{typekeywords:["summarize"]},present:{typekeywords:["gallery"]},social:{typekeywords:["social"]},local:{typekeywords:["local"]},route:{typekeywords:["route"]},showcase:{typekeywords:["showcase"]}}}}})},"esri/dijit/_RefreshMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/has ../kernel".split(" "),function(K,G,w,v,r,f){function c(a){"object"!==
typeof a&&(a=Error(a));a.grid=this;v.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})}K=K(null,{_trackError:function(a){"string"===typeof a&&(a=G.hitch(this,a));try{var b=a()}catch(p){c.call(this,p)}return w.when(b,G.hitch(this,function(){v.emit(this.domNode,"refresh",{cancelable:!0,bubbles:!0})}),G.hitch(this,c))}});G.setObject("dijit._RefreshMixin",K,f);return K})},"esri/dijit/analysis/PluginAnalysisLayers":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/has ../../kernel dojo/i18n!../../nls/jsapi".split(" "),
function(K,G,w,v,r,f,c){var a=K(null,{filters:{all:{},categoryBoundaries:{tags:["boundaries","places"]},subCategoryBoundaries:{tags:["boundaries"]},subCategoryPlaces:{tags:["places"]},categoryHexBins:{tags:["hex"]},categoryTransportation:{tags:["transportation"]}},constructor:function(b){G.mixin(this,b);this.i18n=G.mixin({},c.browseLayersDlg);this.filterStrings={all:{title:this.i18n.categoryAll},categoryBoundaries:{title:this.i18n.categoryBoundaries},subCategoryBoundaries:{title:"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+
this.i18n.subCategoryBoundaries},subCategoryPlaces:{title:"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+this.i18n.subCategoryPlaces},categoryHexBins:{title:this.i18n.categoryHexBins},categoryTransportation:{title:this.i18n.categoryTransportation}}},fetchData:function(){this._portal=this.parent._portal;var b;return this._fetchGroups().then(G.hitch(this,function(p){b=w.map(p||[],function(q){if(q)return'group:"'+q.id+'"'});return this._fetchGroupItems(b)}))},_fetchGroup:function(b,p){this._groups=this._groups||
[];return this._groups[b]||this._portal.queryGroups(p,!0).then(G.hitch(this,function(q){0<q.total&&q.results&&(this._groups[b]=q.results);return this._groups[b]||[]}))},_fetchGroupItems:function(b,p){var q=this._isCustom?['-typekeywords:"Multilayer"']:['typekeywords:"Analysis Ready"'];this._portal&&this._portal.user&&this._portal.user.demographics||q.push('-typekeywords:"Requires Credits"');return this.parent._fetchItems({groups:b,query:p,types:['type:"Map Service"','type:"Feature Service"'],typekeywords:q})},
_fetchGroups:function(){return this._fetchEsriAnalysisLayers()},_fetchEsriAnalysisLayers:function(){if(this._portal&&this._portal.analysisLayersGroupQuery){var b=this._portal.analysisLayersGroupQuery;this._isCustomAnalysisQuery()&&(this.filterStrings=this.filters=null)}return this._fetchGroup("esriAnalysisLayers",{q:b,num:100,start:0}).then(G.hitch(this,function(p){p&&0<p.length&&(this.parent.sortAttribute=p[0].sortField,this.parent.sortDescending="asc"!==p[0].sortOrder);return p}))},_isCustomAnalysisQuery:function(){var b=
'title:"Living Atlas Analysis Layers" AND owner:esri',p=!1;this._portal&&this._portal.isPortal&&(b='title:"Living Atlas Analysis Layers" AND owner:esri_livingatlas');this._portal&&this._portal.analysisLayersGroupQuery&&this._portal.analysisLayersGroupQuery!==b&&(p=!0);return this._isCustom=p}});G.mixin(a,{add:function(b,p){if(!b.plugIn){var q=p||{};q.parent=b;b.plugIn=new a(q)}},remove:function(b){b.plugIn&&(b.plugIn.destroy(),delete b.plugIn)}});G.setObject("dijit.analysis.PluginAnalysisLayers",
a,f);return a})},"esri/dijit/SingleFilter":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/number dojo/dom dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/_base/event dojo/Evented dojo/data/ItemFileWriteStore dojo/date/locale dojo/parser dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/TextBox dijit/form/FilteringSelect dijit/form/RadioButton dijit/form/DateTextBox dijit/form/NumberTextBox ../config ../kernel ../lang ../tasks/GenerateRendererTask ../tasks/UniqueValueDefinition ../tasks/GenerateRendererParameters ../layers/FeatureLayer ../layers/GeoRSSLayer ./analysis/ItemTypes dojo/i18n!../nls/jsapi dojo/text!./templates/SingleFilter.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha){K=G([x,y,B,C,z,e],{declaredClass:"esri.dijit.SingleFilter",widgetsInTemplate:!0,templateString:ha,valueHandlers:[],onFieldChangeEnabled:!0,onOperatorChangeEnabled:!0,onPromptChangeHandler:null,onHintChangeHandler:null,fieldDomains:{},fieldsStore:null,fieldsInfo:{stringFieldsCount:0,numberFieldsCount:0,dateFieldsCount:0},stringOperatorStore:null,dateOperatorStore:null,numberOperatorStore:null,uniqueValuesStore:null,
isEnableInteractiveFilter:!0,uniqueValuesResults:{},partsObj:null,dayInMS:86399E3,allowAllDateTypes:!1,showUnique:!0,postMixInProperties:function(){this.inherited(arguments);this.i18n={};this.i18n=w.mixin(this.i18n,ma.filterDlg)},parseExpressionTemplate:function(){var Z=function(ea,Y){q.byId(Y).className="attributeValueContainer";"field_dropdown"===ea?q.byId(Y).innerHTML=W:"operator_dropdown"===ea?q.byId(Y).innerHTML=Q:"values_input"===ea&&(q.byId(Y).innerHTML=ia+R)},W='\x3cselect id\x3d"'+this.id+
'.fieldsList" class\x3d"attributeField" data-dojo-type\x3d"dijit/form/FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"true"\x3e\x3c/select\x3e',Q='\x3cselect id\x3d"'+this.id+'.operatorList" class\x3d"operator" data-dojo-type\x3d"dijit/form/FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\x3c/select\x3e',ia='\x3cdiv id\x3d"'+this.id+'.attributeValueContainer"\x3e\x3c/div\x3e',R='\x3cdiv class\x3d"attributeValueOptions"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e  \x3ctbody\x3e    \x3ctr\x3e      \x3ctd nowrap\x3d"nowrap"\x3e        \x3cinput id\x3d"'+
this.id+'.radioValue" class\x3d"radioValue attributeValueRadio" checked\x3d"checked" name\x3d"'+this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+this.i18n.valueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.valueTooltip+'"\x3e'+this.i18n.value+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioFields" class\x3d"radioFields attributeValueRadio" name\x3d"'+
this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+this.i18n.fieldTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.fieldTooltip+'"\x3e'+this.i18n.field+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd id\x3d"'+this.id+'.radioUniqueColumn" nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioUnique" class\x3d"radioUnique attributeValueRadio" name\x3d"'+this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+
this.i18n.uniqueValueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.uniqueValueTooltip+'"\x3e'+this.i18n.uniqueValues+"        \x3c/label\x3e      \x3c/td\x3e    \x3c/tr\x3e  \x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",S=this.i18n.expressionTemplate,N=S.indexOf("${"),X=S.substring(0,N).trim();q.byId(this.id+".column1").innerHTML=X.length?"\x3cdiv class\x3d'attributeText'\x3e"+X+"\x3c/div\x3e":"";X=S.indexOf("}",N+1);var aa=S.substring(N+2,X);Z(aa,this.id+".column2");N=S.indexOf("${",
N+1);X=S.substring(X+1,N).trim();q.byId(this.id+".column3").innerHTML=X.length?"\x3cdiv class\x3d'attributeText'\x3e"+X+"\x3c/div\x3e":"";X=S.indexOf("}",N+1);aa=S.substring(N+2,X);Z(aa,this.id+".column4");N=S.indexOf("${",N+1);X=S.substring(X+1,N).trim();q.byId(this.id+".column5").innerHTML=X.length?"\x3cdiv class\x3d'attributeText'\x3e"+X+"\x3c/div\x3e":"";X=S.indexOf("}",N+1);aa=S.substring(N+2,X);Z(aa,this.id+".column6");X=S.substring(X+1,S.length).trim();q.byId(this.id+".column7").innerHTML=
X.length?"\x3cdiv class\x3d'attributeText'\x3e"+X+"\x3c/div\x3e":""},postCreate:function(){this.inherited(arguments);this.parseExpressionTemplate();this.createOperatorStores();this.createFieldsStore(this.fields);this.readCodedValues();u.parse(q.byId(this.id+".exprTable")).then(w.hitch(this,function(Z){r.connect(this.getFieldsList(),"onChange",this,"onChangeField");r.connect(this.getOperatorList(),"onChange",this,"onChangeOperator");r.connect(D.byId(this.id+".radioValue"),"onClick",this,"showValueInput");
r.connect(D.byId(this.id+".radioFields"),"onClick",this,"showFields");r.connect(D.byId(this.id+".radioUnique"),"onClick",this,"showUniqueList");this.version&&10.1>this.version&&this.mapLayer.url&&this.showUnique&&t.set(q.byId(this.id+".radioUniqueColumn"),"display","none");r.connect(q.byId(this.id+".deleteExpression"),"onclick",this,"onClickDeleteExpression");r.connect(this.interactiveCheck,"onclick",this,"onInteractiveClick");r.connect(this.interactiveArrow,"onclick",this,"onClickShowHideInteractive");
this.enableInteractiveHandlers();this.isEnableInteractiveFilter||t.set(this._interactiveFilterRow,"display","none");t.set(q.byId(this.id+".radioUniqueColumn"),"display",this.showUnique?"block":"none");this.own(this.watch("showUnique",w.hitch(this,function(W,Q,ia){t.set(q.byId(this.id+".radioUniqueColumn"),"display",ia?"block":"none")})))}))},constructor:function(Z,W){this.id=Z.id||"";this.owner=Z.owner;this.version=Z.version;this.part=Z.part;this.fields=Z.fields;this.mapLayer=Z.mapLayer;!1===Z.enableEvents&&
(this.onOperatorChangeEnabled=this.onFieldChangeEnabled=!1)},init:function(Z){if(!Z.part||this.mapLayer&&Z.mapLayer&&this.mapLayer.id!==Z.mapLayer.id)this.clearAttributeValueDijits(),this.mapLayer=Z.mapLayer,this.version=Z.version,this.fields=Z.fields,this.createOperatorStores(),this.createFieldsStore(this.fields),this.readCodedValues(),this.fillFieldsList(this.fieldsStore),this.onChangeField();Z.part&&(this.part=Z.part,this.onOperatorChangeEnabled=this.onFieldChangeEnabled=!1,this.buildEditUIField(this.part,
this))},destroy:function(){this.onOperatorChangeEnabled=this.onFieldChangeEnabled=!1;this.clearAttributeValueDijits();v.forEach(D.findWidgets(q.byId(this.id)),function(Z){Z.destroyRecursive()});this.inherited(arguments)},toJson:function(){var Z=null;this.isInteractiveChecked()&&(Z={prompt:this.promptText.attr("value"),hint:this.hintText.attr("value")});return{fieldObj:this.getField(),operator:this.getOperator(),valueObj:this.getValue(),interactiveObj:Z}},buildFriendlyTextExpr:function(Z){var W=this.i18n.expressionTemplate,
Q=function(S,N,X){return b.substitute(W,{field_dropdown:S,operator_dropdown:N,values_input:X})};if(!1===Z.valueObj.isValid)return"\x26lt;expression is missing value\x26gt;";var ia="";if("string"===Z.fieldObj.shortType)Z.operator===this.i18n.stringOperatorIsBlank||Z.operator===this.i18n.stringOperatorIsNotBlank?ia=Q(Z.fieldObj.label,Z.operator,""):"field"===Z.valueObj.type?ia=Q(Z.fieldObj.label,Z.operator,Z.valueObj.label):(ia=this.getDecodedValue(Z.interactiveObj?Z.interactiveObj.value:Z.valueObj.value,
Z.fieldObj.name),ia=Q(Z.fieldObj.label,Z.operator,"'"+ia+"'"));else if("number"===Z.fieldObj.shortType)if(Z.operator===this.i18n.numberOperatorIsBetween||Z.operator===this.i18n.numberOperatorIsNotBetween)ia=Z.interactiveObj?Z.interactiveObj.value2:Z.valueObj.value2,ia=Q(Z.fieldObj.label,Z.operator,p.format(Z.interactiveObj?Z.interactiveObj.value1:Z.valueObj.value1,{pattern:"#####0.##########"})+" "+this.i18n.andBetweenValues+" "+p.format(ia,{pattern:"#####0.##########"}));else if(Z.operator===this.i18n.numberOperatorIsBlank||
Z.operator===this.i18n.numberOperatorIsNotBlank)ia=Q(Z.fieldObj.label,Z.operator,"");else if("field"===Z.valueObj.type)ia=Q(Z.fieldObj.label,Z.operator,Z.valueObj.label);else{ia=Z.interactiveObj?Z.interactiveObj.value:Z.valueObj.value;var R=this.getDecodedValue(ia,Z.fieldObj.name);ia=Q(Z.fieldObj.label,Z.operator,ia!==R?"'"+R+"'":p.format(ia,{pattern:"#####0.##########"}))}else O.isDefined(Z.valueObj.value)&&"field"!==Z.valueObj.type&&"string"===typeof Z.valueObj.value&&(Z.valueObj.value=new Date(Z.valueObj.value)),
ia=Z.operator===this.i18n.dateOperatorIsBetween||Z.operator===this.i18n.dateOperatorIsNotBetween?Q(Z.fieldObj.label,Z.operator,(Z.interactiveObj?this.formatFriendlyDate(Z.interactiveObj.value1):this.formatFriendlyDate(Z.valueObj.value1))+" "+this.i18n.andBetweenValues+" "+(Z.interactiveObj?this.formatFriendlyDate(Z.interactiveObj.value2):this.formatFriendlyDate(this.addDay(Z.valueObj.value2)))):Z.operator===this.i18n.dateOperatorIsBlank||Z.operator===this.i18n.dateOperatorIsNotBlank?Q(Z.fieldObj.label,
Z.operator,""):"field"===Z.valueObj.type?Q(Z.fieldObj.label,Z.operator,Z.valueObj.label):Q(Z.fieldObj.label,Z.operator,Z.interactiveObj?this.formatFriendlyDate(Z.interactiveObj.value):this.formatFriendlyDate(Z.valueObj.value));return ia},builtSingleFilterString:function(Z,W){if(O.isDefined(Z.valueObj.isValid)&&!Z.valueObj.isValid)return{whereClause:null};var Q=Z.valueObj.value,ia=Z.valueObj.value1,R=Z.valueObj.value2,S=!1;if(Z.interactiveObj){if(!Z.interactiveObj.prompt||!Z.interactiveObj.hint)return{whereClause:null};
O.isDefined(W)&&(S=!0,O.isDefined(Z.valueObj.value)&&(Q="{"+W+"}"),O.isDefined(Z.valueObj.value1)&&(ia="{"+W+"}"),O.isDefined(Z.valueObj.value2)&&(R="{"+(W+1)+"}"))}var N="",X=Z.fieldObj.name;this.mapLayer&&this.mapLayer.url&&-1!==this.mapLayer.url.indexOf("BigDataCatalogServer")&&this.hasWhiteSpace(X)&&(X='"'+X+'"');if("string"===Z.fieldObj.shortType)switch(ia="",Q&&"field"!==Z.valueObj.type&&this.isHostedService(this.mapLayer.url)&&this.containsNonLatinCharacter(Q)&&(ia="N"),Z.operator){case this.i18n.stringOperatorIs:N=
"field"===Z.valueObj.type?X+" \x3d "+Q:X+" \x3d "+ia+"'"+Q.replace(/'/g,"''")+"'";break;case this.i18n.stringOperatorIsNot:N="field"===Z.valueObj.type?X+" \x3c\x3e "+Q:X+" \x3c\x3e "+ia+"'"+Q.replace(/'/g,"''")+"'";break;case this.i18n.stringOperatorStartsWith:N=X+" LIKE "+ia+"'"+Q.replace(/'/g,"''")+"%'";break;case this.i18n.stringOperatorEndsWith:N=X+" LIKE "+ia+"'%"+Q.replace(/'/g,"''")+"'";break;case this.i18n.stringOperatorContains:N=X+" LIKE "+ia+"'%"+Q.replace(/'/g,"''")+"%'";break;case this.i18n.stringOperatorDoesNotContain:N=
X+" NOT LIKE "+ia+"'%"+Q.replace(/'/g,"''")+"%'";break;case this.i18n.stringOperatorIsBlank:N=X+" IS NULL";break;case this.i18n.stringOperatorIsNotBlank:N=X+" IS NOT NULL"}else if("number"===Z.fieldObj.shortType)switch(Z.operator){case this.i18n.numberOperatorIs:N=X+" \x3d "+Q;break;case this.i18n.numberOperatorIsNot:N=X+" \x3c\x3e "+Q;break;case this.i18n.numberOperatorIsAtLeast:N=X+" \x3e\x3d "+Q;break;case this.i18n.numberOperatorIsLessThan:N=X+" \x3c "+Q;break;case this.i18n.numberOperatorIsAtMost:N=
X+" \x3c\x3d "+Q;break;case this.i18n.numberOperatorIsGreaterThan:N=X+" \x3e "+Q;break;case this.i18n.numberOperatorIsBetween:N=X+" BETWEEN "+ia+" AND "+R;break;case this.i18n.numberOperatorIsNotBetween:N=X+" NOT BETWEEN "+ia+" AND "+R;break;case this.i18n.numberOperatorIsBlank:N=X+" IS NULL";break;case this.i18n.numberOperatorIsNotBlank:N=X+" IS NOT NULL"}else switch(O.isDefined(Q)&&"field"!==Z.valueObj.type&&"string"===typeof Q&&(Q=this.parseFriendlyDate(Q)),Z.operator){case this.i18n.dateOperatorIsOn:N=
"field"===Z.valueObj.type?X+" \x3d "+Q:S?X+" BETWEEN "+(this.supportsStandardizedQuery?"timestamp ":"")+"'{"+W+"}' AND "+(this.supportsStandardizedQuery?"timestamp ":"")+"'{"+(W+1)+"}'":X+" BETWEEN "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(Q)+"' AND "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(this.addDay(Q))+"'";break;case this.i18n.dateOperatorIsNotOn:N="field"===Z.valueObj.type?X+" \x3c\x3e "+Q:S?X+" NOT BETWEEN "+(this.supportsStandardizedQuery?
"timestamp ":"")+"'{"+W+"}' AND "+(this.supportsStandardizedQuery?"timestamp ":"")+"'{"+(W+1)+"}'":X+" NOT BETWEEN "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(Q)+"' AND "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(this.addDay(Q))+"'";break;case this.i18n.dateOperatorIsBefore:N="field"===Z.valueObj.type?X+" \x3c "+Q:X+" \x3c "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(Q)+"'";break;case this.i18n.dateOperatorIsAfter:N="field"===
Z.valueObj.type?X+" \x3e "+Q:X+" \x3e "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(this.addDay(Q))+"'";break;case this.i18n.dateOperatorIsBetween:N=S?X+" BETWEEN '"+ia+"' AND '"+R+"'":X+" BETWEEN "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(ia)+"' AND "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(this.addDay(R))+"'";break;case this.i18n.dateOperatorIsNotBetween:N=S?X+" NOT BETWEEN '"+ia+"' AND '"+R+"'":X+" NOT BETWEEN "+
(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(ia)+"' AND "+(this.supportsStandardizedQuery?"timestamp ":"")+"'"+this.formatDate(this.addDay(R))+"'";break;case this.i18n.dateOperatorIsBlank:N=X+" IS NULL";break;case this.i18n.dateOperatorIsNotBlank:N=X+" IS NOT NULL"}return{whereClause:N}},showDeleteIcon:function(){t.set(q.byId(this.id+".deleteExpression"),"display","block")},hideDeleteIcon:function(){t.set(q.byId(this.id+".deleteExpression"),"display","none")},createFieldsStore:function(Z){if(Z&&
Z.length){Z=w.clone(Z);Z=Z.sort(function(Q,ia){Q.label=Q.alias||Q.name;ia.label=ia.alias||ia.name;return Q.label<ia.label?-1:Q.label>ia.label?1:0});var W=this.isHostedService(this.mapLayer.url);this.supportsStandardizedQuery=10.2<=this.mapLayer.version&&(this.mapLayer.useStandardizedQueries||this.isBigDataLayer(this.mapLayer));Z=v.filter(Z,function(Q,ia){return"esriFieldTypeString"===Q.type||"esriFieldTypeDouble"===Q.type||"esriFieldTypeSingle"===Q.type||"esriFieldTypeInteger"===Q.type||"esriFieldTypeSmallInteger"===
Q.type||"esriFieldTypeDate"===Q.type&&(this.allowAllDateTypes||W||this.supportsStandardizedQuery)?!0:!1},this);Z=v.map(Z,function(Q,ia){switch(Q.type){case "esriFieldTypeString":var R="string";this.fieldsInfo.stringFieldsCount++;break;case "esriFieldTypeDate":R="date";this.fieldsInfo.dateFieldsCount++;break;default:R="number",this.fieldsInfo.numberFieldsCount++}return{id:ia,label:Q.label,shortType:R,alias:Q.alias,editable:Q.editable,name:Q.name,nullable:Q.nullable,type:Q.type}},this);Z.length&&(this.fieldsStore=
new d({data:{identifier:"id",label:"label",items:Z}}))}},createOperatorStores:function(){var Z=[];Z.push({name:this.i18n.stringOperatorIs,name_:this.i18n.stringOperatorIs,id:0});Z.push({name:this.i18n.stringOperatorIsNot,name_:this.i18n.stringOperatorIsNot,id:1});Z.push({name:this.i18n.stringOperatorStartsWith,name_:this.i18n.stringOperatorStartsWith,id:2});Z.push({name:this.i18n.stringOperatorEndsWith,name_:this.i18n.stringOperatorEndsWith,id:3});Z.push({name:this.i18n.stringOperatorContains,name_:this.i18n.stringOperatorContains,
id:4});Z.push({name:this.i18n.stringOperatorDoesNotContain,name_:this.i18n.stringOperatorDoesNotContain,id:5});Z.push({name:this.i18n.stringOperatorIsBlank,name_:this.i18n.stringOperatorIsBlank,id:6});Z.push({name:this.i18n.stringOperatorIsNotBlank,name_:this.i18n.stringOperatorIsNotBlank,id:7});this.stringOperatorStore=new d({data:{label:"name",identifier:"id",items:Z}});Z=[];Z.push({name:this.i18n.dateOperatorIsOn,id:0});Z.push({name:this.i18n.dateOperatorIsNotOn,id:1});Z.push({name:this.i18n.dateOperatorIsBefore,
id:2});Z.push({name:this.i18n.dateOperatorIsAfter,id:3});Z.push({name:this.i18n.dateOperatorIsBetween,id:6});Z.push({name:this.i18n.dateOperatorIsNotBetween,id:7});Z.push({name:this.i18n.dateOperatorIsBlank,id:8});Z.push({name:this.i18n.dateOperatorIsNotBlank,id:9});this.dateOperatorStore=new d({data:{label:"name",identifier:"id",items:Z}});Z=[];Z.push({name:this.i18n.numberOperatorIs,name_:this.i18n.numberOperatorIs,id:0});Z.push({name:this.i18n.numberOperatorIsNot,name_:this.i18n.numberOperatorIsNot,
id:1});Z.push({name:this.i18n.numberOperatorIsAtLeast,name_:this.i18n.numberOperatorIsAtLeast,id:2});Z.push({name:this.i18n.numberOperatorIsLessThan,name_:this.i18n.numberOperatorIsLessThan,id:3});Z.push({name:this.i18n.numberOperatorIsAtMost,name_:this.i18n.numberOperatorIsAtMost,id:4});Z.push({name:this.i18n.numberOperatorIsGreaterThan,name_:this.i18n.numberOperatorIsGreaterThan,id:5});Z.push({name:this.i18n.numberOperatorIsBetween,name_:this.i18n.numberOperatorIsBetween,id:6});Z.push({name:this.i18n.numberOperatorIsNotBetween,
name_:this.i18n.numberOperatorIsNotBetween,id:7});Z.push({name:this.i18n.numberOperatorIsBlank,name_:this.i18n.numberOperatorIsBlank,id:8});Z.push({name:this.i18n.numberOperatorIsNotBlank,name_:this.i18n.numberOperatorIsNotBlank,id:9});this.numberOperatorStore=new d({data:{label:"name",identifier:"id",items:Z}})},readCodedValues:function(){v.forEach(this.mapLayer.fields,function(Z){Z.domain&&Z.domain.codedValues&&(this.fieldDomains[Z.name]=Z.domain.codedValues)},this)},getDecodedValue:function(Z,
W){var Q=this.getCodedValues(W),ia;if(Q)for(ia=0;ia<Q.length;ia+=1){var R=Q[ia];if(R.code===Z)return R.name}return Z},getCodedValues:function(Z){return this.fieldDomains[Z]},getFieldsList:function(){return D.byId(this.id+".fieldsList")},getOperatorList:function(){return D.byId(this.id+".operatorList")},getValueFieldsList:function(){return D.byId(this.id+".valueFields")},getAttrValContNode:function(){return q.byId(this.id+".attributeValueContainer")},getField:function(){var Z=this.getFieldsList();
return{name:Z.store.getValue(Z.item,"name"),label:Z.store.getValue(Z.item,"label"),shortType:Z.store.getValue(Z.item,"shortType"),type:Z.store.getValue(Z.item,"type")}},getOperator:function(){var Z=this.getOperatorList();return Z.item?Z.store.getValue(Z.item,"name"):""},getValue:function(){return{}},isInteractiveChecked:function(){return this.interactiveCheck.checked},setInteractiveSection:function(Z,W,Q){this.disableInteractiveHandlers();this.interactiveCheck.checked=Z;this.promptText.attr("value",
W);this.hintText.attr("value",Q);t.set(this.interactiveSpace,"display","block");this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;";this.enableInteractiveHandlers()},enableInteractiveHandlers:function(){this.onPromptChangeHandler=r.connect(this.promptText,"onChange",this,"onChangeInteractive");this.onHintchangeHandler=r.connect(this.hintText,"onChange",this,"onChangeInteractive")},disableInteractiveHandlers:function(){r.disconnect(this.onPromptChangeHandler);r.disconnect(this.onHintChangeHandler)},
fillFieldsList:function(Z){var W=this.getFieldsList();W.set("labelAttr","label");W.set("searchAttr","label");W.set("store",Z);W.set("value",0)},fillOperatorList:function(Z,W,Q){var ia=this.getOperatorList();ia.set("labelAttr","name");ia.set("searchAttr","name");ia.set("query",Q?Q:{});ia.set("store",Z);if(W){var R=!1;for(Q=0;20>Q&&(Z.fetchItemByIdentity({identity:Q,onItem:w.hitch(this,function(S){S&&S.name[0]===W&&(ia.set("value",S.id[0]),R=!0)})}),!R);Q++);}else ia.set("value",0)},createValueString:function(Z){var W=
this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(W);if(Z){W=new A({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},n.create("div",{},W));var Q=this.buildCodedValuesStore(Z);W.set("store",Q);W.set("value",0);this.valueHandlers.push(r.connect(W,"onChange",this,"onValueChange"))}else W=new E({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0},n.create("div",{},W)),this.valueHandlers.push(r.connect(W,"onChange",
this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var ia=D.byId(this.id+".value"),R=!0;Z?ia.item?ia=ia.item.code[0]:(ia="",R=!1):R=ia=ia.get("value");return{value:ia,isValid:R}}},createValueDate:function(){var Z=this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(Z);Z=new H({id:this.id+".value","class":"attributeValue",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},n.create("div",{},Z));this.checkDefaultOption();this.valueHandlers.push(r.connect(Z,
"onChange",this,"onValueChange"));this.getValue=function(){var W=D.byId(this.id+".value").get("value");return{value:W,isValid:O.isDefined(W)}}},createValueNumber:function(Z){var W=this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(W);if(Z){W=new A({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},n.create("div",{},W));var Q=this.buildCodedValuesStore(Z);W.set("store",Q);W.set("value",0);this.valueHandlers.push(r.connect(W,"onChange",this,"onValueChange"))}else W=
new I({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},n.create("div",{},W)),this.valueHandlers.push(r.connect(W,"onChange",this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var ia=D.byId(this.id+".value"),R=!0;Z?ia.item?ia=ia.item.code[0]:(ia="",R=!1):(ia=ia.get("value"),R=O.isDefined(ia)&&!isNaN(ia));return{value:ia,isValid:R}}},createValueBetweenDate:function(){var Z=this.getAttrValContNode();
this.clearAttributeValueDijits();n.empty(Z);var W=new H({id:this.id+".value1","class":"attributeValue1",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},n.create("div",{},Z));n.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},Z);Z=new H({id:this.id+".value2","class":"attributeValue2",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},n.create("div",{},Z));this.checkDefaultOption();this.valueHandlers.push(r.connect(W,"onChange",
this,"onValueChange"));this.valueHandlers.push(r.connect(Z,"onChange",this,"onValueChange"));this.getValue=function(){var Q=D.byId(this.id+".value1").get("value"),ia=D.byId(this.id+".value2").get("value");return{value1:Q,value2:ia,isValid:O.isDefined(Q)&&O.isDefined(ia)}}},createValueBetweenNumber:function(){var Z=this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(Z);var W=new I({id:this.id+".value1","class":"attributeValue1",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},
n.create("div",{},Z));n.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},Z);Z=new I({id:this.id+".value2","class":"attributeValue2",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},n.create("div",{},Z));this.checkDefaultOption();this.valueHandlers.push(r.connect(W,"onChange",this,"onValueChange"));this.valueHandlers.push(r.connect(Z,"onChange",this,"onValueChange"));this.getValue=function(){var Q=D.byId(this.id+".value1").get("value"),
ia=D.byId(this.id+".value2").get("value");return{value1:Q,value2:ia,isValid:O.isDefined(Q)&&O.isDefined(ia)&&!isNaN(Q)&&!isNaN(ia)&&Q<=ia}}},createValueInTheLastDate:function(){},createValueIsBlank:function(){var Z=this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(Z);Z.innerHTML="\x3cinput id\x3d'"+this.id+".value' class\x3d'attributeValue' type\x3d'text' disabled\x3d'true'/\x3e";this.checkDefaultOption();this.getValue=function(){return{value:null,isValid:!0}}},createValueFields:function(Z,
W,Q){var ia=this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(ia);var R=new A({id:this.id+".valueFields","class":"attributeValue",maxHeight:150,labelAttr:"label",searchAttr:"label",store:Z,query:W},n.create("div",{},ia));if(Q){var S=!1;for(ia=0;100>ia&&(Z.fetchItemByIdentity({identity:ia,onItem:w.hitch(this,function(N){N&&N.shortType[0]===W.shortType&&N.name[0]!==Q&&(R.set("value",N.id),S=!0)})}),!S);ia++);}this.valueHandlers.push(r.connect(R,"onChange",this,"onValueChange"));this.getValue=
function(){var N=D.byId(this.id+".valueFields");return{value:N.store.getValue(N.item,"name"),label:N.store.getValue(N.item,"label"),type:"field",isValid:!0}}},createValueUnique:function(Z){var W=this.getAttrValContNode();this.clearAttributeValueDijits();n.empty(W);Z=new A({id:this.id+".valueUnique","class":"attributeValue",maxHeight:150,store:Z},n.create("div",{},W));Z.set("value",0);this.valueHandlers.push(r.connect(Z,"onChange",this,"onValueChange"));this.getValue=function(){var Q=D.byId(this.id+
".valueUnique");return{value:Q.store.getValue(Q.item,"value"),isValid:!0}}},setValue:function(Z,W){if(W)for(var Q=0;Q<W.length;Q++){if(Z===W[Q].code){D.byId(this.id+".value").set("value",Q);break}}else"date"===this.part.fieldObj.shortType?D.byId(this.id+".value").set("value",new Date(Z)):("number"===this.part.fieldObj.shortType&&(Z=Number(Z)),D.byId(this.id+".value").set("value",Z))},setValue1:function(Z){"date"===this.part.fieldObj.shortType?Z=new Date(Z):"number"===this.part.fieldObj.shortType&&
(Z=Number(Z));D.byId(this.id+".value1").set("value",Z)},setValue2:function(Z){"date"===this.part.fieldObj.shortType?Z=new Date(Z):"number"===this.part.fieldObj.shortType&&(Z=Number(Z));D.byId(this.id+".value2").set("value",Z)},setValueFieldById:function(Z){this.getValueFieldsList().set("value",Z)},enableOnFieldChange:function(){this.onFieldChangeEnabled=!0},enableOnOperatorChange:function(){this.onOperatorChangeEnabled=!0},onChangeField:function(Z){this.onFieldChangeEnabled&&this._onChangeField(this.getFieldsList(),
this)},onChangeOperator:function(Z){this.onOperatorChangeEnabled&&this._onChangeOperator(this.getOperatorList(),this)},onClickDeleteExpression:function(Z){this._deleteExpression(this)},_onChangeField:function(Z,W,Q){var ia=!!this.mapLayer&&this.isPortalHostedService(this.mapLayer.url);this.isBigDataLayer(this.mapLayer)||ia&&"esriFieldTypeDate"===this.fieldsStore.getValue(Z.item,"type")?t.set(q.byId(this.id+".radioUniqueColumn"),"display","none"):t.set(q.byId(this.id+".radioUniqueColumn"),"display",
"");ia=W.getOperatorList();switch(this.fieldsStore.getValue(Z.item,"type")){case "esriFieldTypeString":var R=null;Z=this.fieldsStore.getValue(Z.item,"name");this.getCodedValues(Z)&&(R=this.i18n.stringOperatorStartsWith,R+="|"+this.i18n.stringOperatorEndsWith,R+="|"+this.i18n.stringOperatorContains,R+="|"+this.i18n.stringOperatorDoesNotContain,R={name_:new RegExp("^(?!("+R+")$)")});ia.attr("value")===this.i18n.stringOperatorIs?(W.fillOperatorList(this.stringOperatorStore,this.i18n.stringOperatorIs,
R),this.onChangeOperator(ia,W,Q)):W.fillOperatorList(this.stringOperatorStore,this.i18n.stringOperatorIs,R);W.createValueString(this.getCodedValues(Z));break;case "esriFieldTypeDate":W.fillOperatorList(this.dateOperatorStore,this.i18n.dateOperatorIsOn);W.createValueDate();break;default:R=null,Z=this.fieldsStore.getValue(Z.item,"name"),this.getCodedValues(Z)&&(R=this.i18n.numberOperatorIsBetween,R+="|"+this.i18n.numberOperatorIsNotBetween,R+="|"+this.i18n.numberOperatorIsAtLeast,R+="|"+this.i18n.numberOperatorIsLessThan,
R+="|"+this.i18n.numberOperatorIsAtMost,R+="|"+this.i18n.numberOperatorIsGreaterThan,R={name_:new RegExp("^(?!("+R+")$)")}),ia.attr("value")===this.i18n.numberOperatorIs?(W.fillOperatorList(this.numberOperatorStore,this.i18n.numberOperatorIs,R),this.onChangeOperator(ia,W,Q)):W.fillOperatorList(this.numberOperatorStore,this.i18n.numberOperatorIs,R),W.createValueNumber(this.getCodedValues(Z))}"date"===this.fieldsStore.getValue(W.getFieldsList().item,"shortType")?W.disableInteractiveCheck():W.enableInteractiveCheck();
r.publish("filter-expression-change",this)},_onChangeOperator:function(Z,W,Q){Z=Z.item?Z.item.name[0]:Z.value;Q=this.fieldsStore.getValue(W.getFieldsList().item,"shortType");var ia=this.fieldsStore.getValue(W.getFieldsList().item,"name");W.enableOptions();if("date"!==Q&&"number"!==Q||Z!==this.i18n.dateOperatorIsBetween&&Z!==this.i18n.numberOperatorIsBetween&&Z!==this.i18n.dateOperatorIsNotBetween&&Z!==this.i18n.numberOperatorIsNotBetween)if("date"!==Q||Z!==this.i18n.dateOperatorInTheLast&&Z!==this.i18n.dateOperatorNotInTheLast)if(Z===
this.i18n.stringOperatorIsBlank||Z===this.i18n.dateOperatorIsBlank||Z===this.i18n.numberOperatorIsBlank||Z===this.i18n.stringOperatorIsNotBlank||Z===this.i18n.dateOperatorIsNotBlank||Z===this.i18n.numberOperatorIsNotBlank)W.createValueIsBlank(),W.disableOptions();else switch(Q){case "string":W.createValueString(this.getCodedValues(ia));break;case "date":W.createValueDate();break;default:W.createValueNumber(this.getCodedValues(ia))}else W.disableOptions(),W.createValueInTheLastDate();else W.disableOptions(),
"date"===Q?W.createValueBetweenDate():W.createValueBetweenNumber();r.publish("filter-expression-change",this)},onInteractiveClick:function(Z){this.isInteractiveChecked()?(t.set(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(t.set(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;");r.publish("filter-expression-change",this)},onClickShowHideInteractive:function(Z){this.interactiveCheck.disabled||("none"===t.set(this.interactiveSpace,
"display")?(t.set(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(t.set(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;"))},onChangeInteractive:function(){r.publish("filter-expression-change",this)},showValueInput:function(Z){this._showValueInput(D.byNode(Z.target),this)},showFields:function(Z){this._showFields(D.byNode(Z.target),this)},showUniqueList:function(Z){this._showUniqueList(D.byNode(Z.target),this)},
onValueChange:function(){this.onValueChangeHandler&&clearTimeout(this.onValueChangeHandler);this.onValueChangeHandler=setTimeout(w.hitch(this,function(){this.onValueChangeHandler=null;r.publish("filter-expression-change",this)}),800)},_showValueInput:function(Z,W,Q){W.onChangeOperator(Z,W,Q);W.enableInteractiveCheck()},_showFields:function(Z,W,Q){Q=W.getFieldsList().item;Z=this.fieldsStore.getValue(Q,"shortType");Q=this.fieldsStore.getValue(Q,"name");W.createValueFields(this.fieldsStore,{shortType:Z,
name:new RegExp("^(?!"+Q+"$)")},Q);W.disableInteractiveCheck()},_showUniqueList:function(Z,W,Q){this.uniqueValuesStore&&delete this.uniqueValuesStore;Q=this.fieldsStore.getValue(W.getFieldsList().item,"name");if(10.1<=this.version||!this.mapLayer.url){var ia=null;this.mapLayer.queryServiceUrl?ia=this.mapLayer.queryServiceUrl:this.mapLayer.itemLayers&&v.forEach(this.mapLayer.itemLayers,function(R){R.id===this.layerInfo.id&&R.layerUrl&&(ia=R.layerUrl)},this);ia||(ia=this.mapLayer.url);if(this.uniqueValuesResults[this.mapLayer.id+
"_"+Q])this.onGenerateRendererResults(W,Z,this.uniqueValuesResults[this.mapLayer.id+"_"+Q]);else this.generateRendererUniqueValues(Q,ia,w.hitch(this,"onGenerateRendererResults",W,Z),w.hitch(this,function(){this.showValueInput(Z,W)}))}else Z&&this.showValueInput(Z,W)},onGenerateRendererResults:function(Z,W,Q){var ia=this.fieldsStore.getValue(Z.getFieldsList().item,"name"),R=this.fieldsStore.getValue(Z.getFieldsList().item,"shortType"),S=this.fieldsStore.getValue(Z.getFieldsList().item,"type");this.uniqueValuesResults[this.mapLayer.id+
"_"+ia]=Q;var N=null;v.forEach(this.mapLayer.fields,function(X){X.name===ia&&X.domain&&(N=X.domain)});Q=v.filter(Q,function(X,aa){return"string"===R?"\x3cNull\x3e"!==X&&""!==X.trim():"\x3cNull\x3e"!==X&&""!==X});Q.length?("date"===R?(Q=v.map(Q,function(X){return new Date(X)}),Q=Q.sort(function(X,aa){var ea=X.getTime(),Y=aa.getTime();return ea<Y?-1:ea>Y?1:0}),Q=v.map(Q,function(X){return this.formatFriendlyDate(X)},this)):"number"===R?(Q=v.map(Q,function(X){return"esriFieldTypeDouble"===S||"esriFieldTypeSingle"===
S?parseFloat(X):parseInt(X,10)}),Q=Q.sort(function(X,aa){return X<aa?-1:X>aa?1:0})):Q=Q.sort(function(X,aa){return X<aa?-1:X>aa?1:0}),W=v.map(Q,function(X,aa){var ea=X;"string"===R&&(ea=""===X?"\x3c"+this.i18n.emptyString+"\x3e":X);if(N&&N.codedValues){for(var Y=0;Y<N.codedValues.length;Y++){var T=N.codedValues[Y];if(X===T.code)return{id:aa,name:T.name||ea,value:X}}return{id:aa,name:""+ea,value:X}}if("esriFieldTypeDouble"===S||"esriFieldTypeSingle"===S)ea=p.format(X,{pattern:"#####0.##########"});
return{id:aa,name:""+ea,value:X}},this),this.uniqueValuesStore=new d({data:{label:"name",identifier:"id",items:W}}),Z.createValueUnique(this.uniqueValuesStore)):this.showValueInput(W,Z)},generateRendererUniqueValues:function(Z,W,Q,ia){Z instanceof Array&&(Z=Z.toString());var R=new fa;R.attributeField=Z;Z=new V;Z.classificationDefinition=R;this.mapLayer instanceof ka?W=new P(this.mapLayer):this.mapLayer instanceof ba&&!this.mapLayer.url?W=new P(this.mapLayer):this.hasDynamicLayers(this.mapLayer)?(R=
this.mapLayer.layerDefinitions&&this.mapLayer.layerDefinitions[this.mapLayer.id]?this.mapLayer.layerDefinitions[this.mapLayer.id]:null,Z.where=R?R:null,W=new P(this.mapLayer.url+"/dynamicLayer",{source:this.layerInfo.source})):(R=this.mapLayer.getDefinitionExpression(),Z.where=R?R:null,W=new P(W));L.defaults.io.timeout=1E4;W.execute(Z,function(S){L.defaults.io.timeout=6E4;S=v.map(S.infos,function(N){return N.value});Q(S)},w.hitch(this,function(S){L.defaults.io.timeout=6E4;ia()}))},hasDynamicLayers:function(Z){return Z&&
Z.supportsDynamicLayers?!0:!1},formatDate:function(Z){return g.format(Z,{datePattern:"yyyy-MM-dd",selector:"date"})+" "+g.format(Z,{selector:"time",timePattern:"HH:mm:ss"})},formatFriendlyDate:function(Z){return g.format(Z,{formatLength:"short",selector:"date"})},parseFriendlyDate:function(Z){return g.parse(Z,{formatLength:"short",selector:"date"})},parseDate:function(Z){var W=g.parse(Z,{datePattern:"yyyy-MM-dd",timePattern:"HH:mm:ss"});W||(W=g.parse(Z.replace(" ",", "),{datePattern:"yyyy-MM-dd",
timePattern:"HH:mm:ss"}))||(W=g.parse(Z.replace(" "," - "),{datePattern:"yyyy-MM-dd",timePattern:"HH:mm:ss"}));return W},addDay:function(Z){return new Date(Z.getTime()+this.dayInMS)},subtractDay:function(Z){return new Date(Z.getTime()-this.dayInMS)},containsNonLatinCharacter:function(Z){for(var W=0;W<Z.length;W++)if(255<Z.charCodeAt(W))return!0;return!1},hasWhiteSpace:function(Z){return/\s/g.test(Z)},buildCodedValuesStore:function(Z){Z=v.map(Z,function(W,Q){return{name:W.name,code:W.code,id:Q}});
return new d({data:{label:"name",identifier:"id",items:Z}})},clearAttributeValueDijits:function(){this.valueHandlers&&0!==this.valueHandlers.length&&(v.forEach(this.valueHandlers,w.hitch(this,function(Z){r.disconnect(Z);Z=null})),this.valueHandlers=[],D.byId(this.id+".value")?D.byId(this.id+".value").destroy():q.byId(this.id+".value")&&this.getAttrValContNode().removeChild(q.byId(this.id+".value")),D.byId(this.id+".value1")?D.byId(this.id+".value1").destroy():q.byId(this.id+".value1")&&this.getAttrValContNode().removeChild(q.byId(this.id+
".value1")),D.byId(this.id+".value2")?D.byId(this.id+".value2").destroy():q.byId(this.id+".value2")&&this.getAttrValContNode().removeChild(q.byId(this.id+".value2")),D.byId(this.id+".valueFields")&&D.byId(this.id+".valueFields").destroy(),D.byId(this.id+".valueUnique")&&D.byId(this.id+".valueUnique").destroy())},checkDefaultOption:function(){k(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(Z){D.byNode(Z).set("checked",-1<Z.className.indexOf("radioValue"))})},disableOptions:function(){k(".attributeValueOptions .attributeValueRadio",
this.domNode).forEach(function(Z){D.byNode(Z).set("disabled",!0)})},enableOptions:function(){k(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(Z){D.byNode(Z).set("disabled",!1)})},checkFieldOption:function(){D.byId(this.id+".radioFields").set("checked",!0)},disableFieldOption:function(){D.byId(this.id+".radioFields").set("disabled",!0)},disableUniqueOption:function(){D.byId(this.id+".radioUnique").set("disabled",!0)},enableInteractiveCheck:function(){this.interactiveCheck.disabled=
!1},disableInteractiveCheck:function(){this.interactiveCheck.checked=!1;this.interactiveCheck.disabled=!0},isBigDataLayer:function(Z){return!!Z.url&&-1!==Z.url.indexOf("BigDataCatalogServer")&&("featureClass"===Z.type||"table"===Z.type)},isPortalHostedService:function(Z){return Z?-1!==Z.toLowerCase().indexOf("/hosted/"):!1},isHostedService:function(Z){if(!Z)return!1;var W=-1!==Z.indexOf(".arcgis.com/");Z=-1!==Z.indexOf("//services")||-1!==Z.indexOf("//tiles")||-1!==Z.indexOf("//features");return W&&
Z},buildEditUIField:function(Z,W,Q){this.getFieldItemByName({name:Z.fieldObj.name},w.hitch(this,function(ia){W.getFieldsList().set("value",ia.id[0],!1);this.buildEditUIOperator(Z,W,Q)}),w.hitch(this,function(){W.getFieldsList().set("value",0);this.buildEditUIOperator(Z,W,Q)}))},buildEditUIOperator:function(Z,W,Q){switch(Z.fieldObj.shortType){case "string":W.fillOperatorList(this.stringOperatorStore,Z.operator);break;case "date":W.fillOperatorList(this.dateOperatorStore,Z.operator);break;default:W.fillOperatorList(this.numberOperatorStore,
Z.operator)}setTimeout(w.hitch(this,function(){this.getOperatorItemByName(W.getOperatorList().store,{name:Z.operator},w.hitch(this,function(ia){W.getOperatorList().set("value",ia.id[0],!1);this.buildEditUIValue(Z,W,Q)}),w.hitch(this,function(){W.getOperatorList().set("value",0);this.buildEditUIValue(Z,W,Q)}))}),100)},buildEditUIValue:function(Z,W,Q){this.onOperatorChangeEnabled=this.onFieldChangeEnabled=!0;var ia=Z.operator;this.onChangeOperator(W.getOperatorList(),W);W.enableOptions();setTimeout(w.hitch(this,
function(){ia===this.i18n.stringOperatorIsBlank||ia===this.i18n.dateOperatorIsBlank||ia===this.i18n.numberOperatorIsBlank||ia===this.i18n.stringOperatorIsNotBlank||ia===this.i18n.dateOperatorIsNotBlank||ia===this.i18n.numberOperatorIsNotBlank?(W.createValueIsBlank(),W.disableOptions()):"field"===Z.valueObj.type?(W.createValueFields(this.fieldsStore,{shortType:Z.fieldObj.shortType,name:new RegExp("^(?!"+Z.fieldObj.name+"$)")}),W.checkFieldOption(),this.getFieldItemByName({name:Z.valueObj.value},w.hitch(this,
function(R){W.setValueFieldById(R.id[0])}),w.hitch(this,function(){W.setValueFieldById(0)}))):O.isDefined(Z.valueObj.value1)?(W.setValue1(Z.valueObj.value1),W.setValue2(Z.valueObj.value2)):W.setValue(Z.valueObj.value,this.getCodedValues(Z.fieldObj.name))}),100)},getFieldItemByName:function(Z,W,Q){this.fieldsStore.fetch({query:Z,onComplete:w.hitch(this,function(ia){ia&&ia.length?W(ia[0]):Q()})})},getOperatorItemByName:function(Z,W,Q,ia){Z.fetch({query:W,onComplete:w.hitch(this,function(R){R&&R.length?
Q(R[0]):ia()})})}});w.setObject("dijit.SingleFilter",K,J);return K})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(K,G,w,v,r){return K("dijit.form.FilteringSelect",[v,r],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},
_callbackSetLabel:function(f,c,a,b){c&&c[this.searchAttr]!==this._lastQuery||!c&&f.length&&this.store.getIdentity(f[0])!=this._lastQuery||(f.length?this.set("item",f[0],b):this.set("value","",b||void 0===b&&!this.focused,this.textbox.value,null))},_openResultList:function(f,c,a){c[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(f,
c,a,b){this._onChangeActive||(c=null);if(void 0===b){if(null===f||""===f)if(f="",!G.isString(a)){this._setDisplayedValueAttr(a||"",c);return}var p=this;this._lastQuery=f;w(this.store.get(f),function(q){p._callbackSetLabel(q?[q]:[],void 0,void 0,c)})}else this.valueNode.value=f,this.inherited(arguments,[f,c,a,b])},_setItemAttr:function(f,c,a){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(f){return f.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(f,
c){null==f&&(f="");if(!this._created){if(!("displayedValue"in this.params))return;c=!1}if(this.store){this.closeDropDown();var a=G.clone(this.query),b=this._getDisplayQueryString(f);if(this.store._oldAPI)var p=b;else p=this._patternToRegExp(b),p.toString=function(){return b};this._lastQuery=a[this.searchAttr]=p;this._lastDisplayedValue=this.textbox.value=f;this._set("displayedValue",f);var q=this,t={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};G.mixin(t,this.fetchProperties);this._fetchHandle=
this.store.query(a,t);w(this._fetchHandle,function(m){q._fetchHandle=null;q._callbackSetLabel(m||[],a,t,c)},function(m){q._fetchHandle=null})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"esri/tasks/GenerateRendererTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/number dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ../urlUtils ../renderers/jsonUtils ./StatisticDefinition ./Task ./QueryTask ./query ./GenerateRendererParameters ./ClassificationDefinition ./ClassBreaksDefinition ./UniqueValueDefinition ./ColorRamp ./AlgorithmicColorRamp ./MultipartColorRamp".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){G=G(k,{declaredClass:"esri.tasks.GenerateRendererTask",_eventMap:{complete:["renderer"]},constructor:function(e,d){!w.isObject(e)||"esri.layers.FeatureLayer"!==e.declaredClass&&"esri.layers.CSVLayer"!==e.declaredClass?(this.url=e,this._url.path+="/generateRenderer"):e.url&&w.isString(e.url)&&"esri.layers.CSVLayer"!==e.declaredClass?(this.url=e.url,this._url=t.urlToObject(this.url),this._url.path+="/generateRenderer"):this._features=e.graphics;this._handler=
w.hitch(this,this._handler);this.source=d&&d.source;this.gdbVersion=d&&d.gdbVersion;this.checkValueRange=d&&d.checkValueRange;this.registerConnectEvents()},_handler:function(e,d,g,u,x){try{if("esri.renderer.ClassBreaksRenderer"===e.declaredClass||"esri.renderer.UniqueValueRenderer"===e.declaredClass)var y=e;else y=m.fromJson(e),"classBreaks"===e.type&&y.setMaxInclusive(!0);if(this.checkValueRange){var B=new l(this.url),C=new h,z=new n;z.statisticType="min";z.onStatisticField=this._field;var D=new n;
D.statisticType="max";D.onStatisticField=this._field;C.outStatistics=[z,D];B.execute(C).then(w.hitch(this,function(E){E=E.features[0].attributes;for(var A in E)if(0===A.toLowerCase().indexOf("min"))var F=E[A];else var H=E[A];y=this._processRenderer(y,this._prefix,this._unitLabel,this._formatLabel,this._precision,F,H);this._successHandler([y],"onComplete",g,x)}))}else y=this._processRenderer(y,this._prefix,this._unitLabel,this._formatLabel,this._precision),this._successHandler([y],"onComplete",g,x)}catch(E){this._errorHandler(E,
u,x)}},_processRenderer:function(e,d,g,u,x,y,B){"esri.renderer.ClassBreaksRenderer"===e.declaredClass?v.forEach(e.infos,function(C,z){0===z&&void 0!==y&&null!==y&&(C.minValue=y);z===e.infos.length-1&&void 0!==B&&null!==B&&(C.classMaxValue=C.maxValue=B);x&&(C.classMaxValue=C.maxValue=Math.round(C.maxValue/x)*x,C.minValue=Math.round(C.minValue/x)*x);u&&(C.label=r.format(C.minValue)+" - "+r.format(C.maxValue));d&&(C.label=d+" "+C.label);g&&(C.label=C.label+" "+g)}):v.forEach(e.infos,function(C,z){0===
z&&void 0!==y&&null!==y&&(C.value=y);z===e.infos.length-1&&void 0!==B&&null!==B&&(C.value=B);u&&(C.label=r.format(C.value));d&&(C.label=d+" "+C.label);g&&(C.label=C.label+" "+g)});return e},execute:function(e,d,g){var u=this._handler,x=this._errorHandler;this._precision=e.precision;this._prefix=e.prefix;this._unitLabel=e.unitLabel;this._formatLabel=e.formatLabel;if(this._features=e.features||this._features){var y=new c;var B=this._features;K(["./generateRenderer"],function(D){var E;"esri.tasks.ClassBreaksDefinition"===
e.classificationDefinition.declaredClass?E=D.createClassBreaksRenderer({features:B,definition:e.classificationDefinition}):"esri.tasks.UniqueValueDefinition"===e.classificationDefinition.declaredClass&&(E=D.createUniqueValueRenderer({features:B,definition:e.classificationDefinition}));E?u(E,null,d,g,y):x(null,g,y)})}else{var C=w.mixin(e.toJson(),{f:"json"});this._field="esri.tasks.ClassBreaksDefinition"===e.classificationDefinition.declaredClass?e.classificationDefinition.classificationField:e.classificationDefinition.attributeField;
if(this.source){var z={source:this.source.toJson()};C.layer=f.toJson(z)}this.gdbVersion&&(C.gdbVersion=this.gdbVersion);y=new c(q._dfdCanceller);y._pendingDfd=p({url:this._url.path,content:C,callbackParamName:"callback",load:function(D,E){u(D,E,d,g,y)},error:function(D){x(D,g,y)}})}return y},onComplete:function(){}});w.setObject("tasks.GenerateRendererTask",G,b);return G})},"esri/tasks/GenerateRendererParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has",
"../kernel"],function(K,G,w,v,r){K=K(null,{declaredClass:"esri.tasks.GenerateRendererParameters",classificationDefinition:null,where:null,precision:null,prefix:null,unitLabel:null,formatLabel:null,toJson:function(){return{classificationDef:w.toJson(this.classificationDefinition.toJson()),where:this.where}}});G.setObject("tasks.GenerateRendererParameters",K,r);return K})},"esri/tasks/ClassificationDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(K,
G,w,v){K=K(null,{declaredClass:"esri.tasks.ClassificationDefinition",type:null,baseSymbol:null,colorRamp:null,toJson:function(){var r={};this.baseSymbol&&G.mixin(r,{baseSymbol:this.baseSymbol.toJson()});this.colorRamp&&!G.isString(this.colorRamp)&&G.mixin(r,{colorRamp:this.colorRamp.toJson()});return r}});G.setObject("tasks.ClassificationDefinition",K,v);return K})},"esri/tasks/ClassBreaksDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./ClassificationDefinition"],
function(K,G,w,v,r){K=K(r,{declaredClass:"esri.tasks.ClassBreaksDefinition",type:"classBreaksDef",classificationField:null,classificationMethod:null,breakCount:null,standardDeviationInterval:null,normalizationType:null,normalizationField:null,toJson:function(){var f=this.inherited(arguments);switch(this.classificationMethod.toLowerCase()){case "natural-breaks":var c="esriClassifyNaturalBreaks";break;case "equal-interval":c="esriClassifyEqualInterval";break;case "quantile":c="esriClassifyQuantile";
break;case "standard-deviation":c="esriClassifyStandardDeviation";break;case "geometrical-interval":c="esriClassifyGeometricalInterval";break;default:c=this.classificationMethod}G.mixin(f,{type:this.type,classificationField:this.classificationField,classificationMethod:c,breakCount:this.breakCount});if(this.normalizationType){switch(this.normalizationType.toLowerCase()){case "field":c="esriNormalizeByField";break;case "log":c="esriNormalizeByLog";break;case "percent-of-total":c="esriNormalizeByPercentOfTotal";
break;default:c=this.normalizationType}G.mixin(f,{normalizationType:c})}this.normalizationField&&G.mixin(f,{normalizationField:this.normalizationField});this.standardDeviationInterval&&G.mixin(f,{standardDeviationInterval:this.standardDeviationInterval});return f}});G.setObject("tasks.ClassBreaksDefinition",K,v);return K})},"esri/tasks/UniqueValueDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./ClassificationDefinition"],function(K,G,w,v,r){K=K(r,{declaredClass:"esri.tasks.UniqueValueDefinition",
type:"uniqueValueDef",attributeField:null,attributeField2:null,attributeField3:null,fieldDelimiter:null,toJson:function(){var f=this.inherited(arguments);this.uniqueValueFields=[];this.attributeField&&this.uniqueValueFields.push(this.attributeField);this.attributeField2&&this.uniqueValueFields.push(this.attributeField2);this.attributeField3&&this.uniqueValueFields.push(this.attributeField3);G.mixin(f,{type:this.type,uniqueValueFields:this.uniqueValueFields});this.fieldDelimiter&&G.mixin(f,{fieldDelimiter:this.fieldDelimiter});
return f}});G.setObject("tasks.UniqueValueDefinition",K,v);return K})},"esri/dijit/analysis/FeatureRecordSetLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../../tasks/DataFile","../../kernel"],function(K,G,w,v,r){K=K(v,{declaredClass:"esri.dijit.analysis.FeatureRecordSetLayer",constructor:function(f){f&&G.mixin(this,f)},toJson:function(){var f={};this.url&&(f.url=this.url);this.filter&&(f.filter=this.filter);this.serviceToken&&(f.serviceToken=this.serviceToken);this.featureSet&&
(f.featureSet=this.featureSet);this.layerDefinition&&(f.layerDefinition=this.layerDefinition);this.time&&(f.time=this.time);return f}});G.setObject("dijit.analysis.FeatureRecordSetLayer",K,r);return K})},"esri/dijit/analysis/PluginLayers":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/Deferred dojo/promise/all dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/query dojo/store/Memory dojo/store/Observable dojo/Evented dojo/has ./ItemTypes ../../request ../../kernel ../../lang dgrid/OnDemandGrid dgrid/Selection ./AnalysisRegistry dojo/i18n!../../nls/jsapi".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y){var B=K([n],{infoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv\x3e\x3cimg width\x3d\'16px\' height\x3d\'16px\' alt\x3d\'\' src\x3d\'${item.iconUrl}\'\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d""\x3e${item.snippet}\x3c/p\x3e${item:plugIn._showLayers}\x3cdiv id\x3d"${item.id}_details" class\x3d"quiet-scroll layer-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e${item:plugIn._addLayerToMap}\x3cbutton class\x3d"btn blue btn-main disabled" id\x3d"add-layer"\x3e${i18n.common.addLayerBtnLabel}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
geometryTypes:[x.GeometryTypes.Point,x.GeometryTypes.Point.MultiPoint,x.GeometryTypes.Line,x.GeometryTypes.Polygon],layerTypes:[l.FLAYER,l.BDATAFEATURE,l.BTABLE,l.TABLE],timeTypes:[x.TimeTypes.Instant,x.TimeTypes.Interval],checkGeometryType:!0,checkLayerType:!1,checkTimeFilter:!1,fetchType:['type:"'+l.MS+'"','type:"'+l.FS+'"'],constructor:function(C){G.mixin(this,C);this.filters={all:{},mycontent:{owners:this.self?[this.self.user.username]:[]},esriBoundaryLayers:{owners:["esri_boundaries"]}};this.i18n=
G.mixin({},y.browseLayersDlg);G.mixin(this.i18n,y.browseItems);G.mixin(this.i18n,y.common);this.filterStrings={all:{title:this.self&&this.self.isPortal?this.i18n.items.portalOrg:this.i18n.items.organizationLabel},mycontent:{title:this.i18n.items.contentLabel},esriBoundaryLayers:{title:this.i18n.esriBoundaryLayers}}},fetchData:function(){this._portal=this.parent._portal;this._user=this._portal.getPortalUser();this.filters.mycontent.owner=this._user;this.parent.fetchType&&(this.fetchType=this.parent.fetchType);
return this._fetchItems()},_fetchItems:function(){return this.parent._fetchItems({types:this.fetchType})},_fetchServiceInfo:function(C){var z=new r,D,E={f:"json"};C.url?(-1!==window.location.protocol.indexOf("https:")&&(C.url=C.url.replace("http:","https:")),h({url:C.url,content:E}).then(function(A){z.resolve(A)},G.hitch(this,function(A){D=A.details&&A.details.length?A.details.shift():"";A&&403===A.httpCode&&-1<D.indexOf("SSL Required")?(C.set("url",C.url.replace("http:","https:")),this._fetchServiceInfo(C).then(function(F){z.resolve(F)})):
(C.isLoaded=!0,z.resolve({error:A}))}))):z.resolve(null);return z},_addLayerToMap:function(C){return C.type===l.BIGDATA||C.type===l.CSV||C.type===l.XLS?"":'\x3cdiv class\x3d"esriFloatLeading esriLeadingPadding1 padding-trailer-half js-add-layer-node"\x3e\x3clabel\x3e\x3cinput name\x3d"addlayertomap" class\x3d"js-add-layer-checkbox" type\x3d"checkbox"\x3e\x3cspan class\x3d"esriLeadingPadding1"\x3e'+this.i18n.common.addLayer+"\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e"},_showLayers:function(C){if(C&&-1!==
w.indexOf([l.FS,l.MS,l.IS,l.BIGDATA,l.CSV,l.XLS],C.type)){if(C.type===l.CSV||C.type===l.XLS)C.url=C.itemUrl;this.plugIn._fetchServiceInfo(C).then(G.hitch(this,function(z){var D=[],E={f:"json"};z.layers&&(D=[].concat(D).concat(z.layers));z.tables&&0<z.tables.length&&(D=[].concat(D).concat(z.tables));z.children&&(D=z.children);!C||C.type!==l.CSV&&C.type!==l.XLS&&C.type!==l.IS||(D=[C]);if(!D.length)var A=this.plugIn.i18n.noDataMessages.noItemInfo;this.plugIn._createLayerGrid(v.create("div",null,c.byId(C.id+
"_details")),A);w.forEach(D,function(F,H){C.type===l.BIGDATA?(F.url=C.url+"/"+F.name,F.url=encodeURI(F.url)):F.url=C.type===l.CSV?C.itemUrl:C.type===l.IS?C.url:C.url+"/"+H;-1!==window.location.protocol.indexOf("https:")&&(F.url=F.url.replace("http:","https:"));h({url:F.url,content:E}).then(G.hitch(this,function(I){F=G.mixin(F,I);this.plugIn._store.put(F);this.plugIn._grid.refresh()}),G.hitch(this,function(I){this.plugIn._grid.noDataMessage=this.plugIn.i18n.noDataMessages.noLayerInfo;this.plugIn._grid.refresh()}))},
this)}))}return""},_getLayerHead:function(){return"\x3ctr\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3eLayer Name\x3c/th\x3e\x3cth\x3e Geometry Type\x3c/th\x3e\x3c/tr\x3e"},_getLayerNode:function(C,z,D){z=C.name;var E='\x3ctr\x3e\x3ctd\x3e\x3cinput type\x3d"checkbox" class\x3d"js-layer-check" name\x3d"layers" value\x3d"'+z+' checked"\x3e\x3c/td\x3e\x3ctd\x3e',A="\x3c/td\x3e\x3ctd\x3e"+C.geometryType+"\x3c/td\x3e\x3c/tr\x3e";return C.itemUrl||C.url?E+'\x3ca class\x3d"'+(D||"")+'"\x3e'+z+"\x3c/a\x3e"+A:E+z+A},
_createLayerGrid:function(C,z){var D=K([g,u]);this._store=m(new t({idProperty:"name"}));this._atleastALayerAvailable=!1;this._grid=new D({store:this._store,query:G.hitch(this,function(E){var A=!0,F=!0,H=!0,I=!0;this.checkGeometryType&&E.type!==l.IS&&(H=-1!==w.indexOf(this.geometryTypes,E.geometryType));this.checkTimeFilter&&(A=-1!==w.indexOf(this.timeTypes,this.getTimeType(E)));this.checkLayerType&&(F=-1!==w.indexOf(this.layerTypes,E.type));"function"===typeof this.customCheckHandler&&(I=this.customCheckHandler(E));
E=E&&H&&A&&F&&I;E||(this._grid.noDataMessage=this.getNoDataMessage({geomCheck:H,timeCheck:A,typeCheck:F,customCheck:I}));!this._atleastALayerAvailable&&E&&(this._atleastALayerAvailable=E);q(".js-add-layer-checkbox",this.parent.infoPanel).forEach(function(L){a.set(L,"disabled",!this._atleastALayerAvailable)},this);return E}),selectionMode:"single","class":"esriAnalysisLayersGrid quiet-scroll",noDataMessage:z||this.i18n.noValidLayerMsg,allowSelect:G.hitch(this,function(E){var A;this.checkLayerType&&
E.data&&(A=-1!==w.indexOf(this.layerTypes,E.data.type));A=E.data.geometryType?-1!==w.indexOf(this.geometryTypes,E.data.geometryType)||this.checkLayerType&&A:!0;return E&&E.data&&A}),renderRow:G.hitch(this,this._renderer)},C);this._grid.startup();this._grid.on("dgrid-select,dgrid-deselect",G.hitch(this,function(E){E=E.grid.selection;var A=[];for(F in E)E[F]&&A.push(this._grid.row(F).data);var F={selection:A};q(".panel-actions .btn-main",this.parent.infoPanel).forEach(function(H){b.toggle(H,"disabled",
0===A.length)},this);A[0]&&(this._selectedLayer=A[0]);this.emit("layer-change",F)}))},hasTimeInfo:function(C){return C&&C.timeInfo},getTimeType:function(C){return C?d.isDefined(C.timeInfo)&&d.isDefined(C.timeInfo.startTimeField)&&!d.isDefined(C.timeInfo.endTimeField)?x.TimeTypes.Instant:d.isDefined(C.timeInfo)&&d.isDefined(C.timeInfo.startTimeField)&&d.isDefined(C.timeInfo.endTimeField)?x.TimeTypes.Interval:d.isDefined(C.time)&&d.isDefined(C.time.timeType)?C.time.timeType:!1:!1},getNoDataMessage:function(C){if(C.geomCheck)if(C.timeCheck){if(!C.typeCheck)return this.i18n.noDataMessages.typeCheckFailure;
if(!C.customCheck)return this.customCheckFailureMessage}else return this.i18n.noDataMessages.timeCheckFailure;else return this.i18n.noDataMessages.geomCheckFailure},getDateFields:function(C){return w.filter(C&&C.fields||[],function(z){return z&&"esriFieldTypeDate"===z.type})},_renderer:function(C){C.snippet=C.snippet||"";var z=v.create("div"),D=this._getLabel(C);v.place('\x3cdiv class\x3d"panel panel-white panel-bordered panel-compact border-bottom-clear"\x3e\x3ch5 class\x3d"trailer-0 font-size-0 word-break"\x3e\x3ca\x3e'+
C.name+'\x3c/a\x3e\x3c/h5\x3e\x3cnav class\x3d"inline-block"\x3e\x3ca class\x3d"link-gray font-size--2 esriTrailingPadding1 esriTrailingMargin05"\x3e\x3cspan class\x3d"'+D.icon+'"\x3e\x3c/span\x3e'+D.name+"\x3c/a\x3e"+(C.timeInfo||C.time&&"instant"===C.time.timeType?'\x3ca class\x3d"link-gray font-size--2 esriTrailingPadding1" data-action\x3d"timeSettings" data-layerid\x3d"0"\x3e\x3cspan class\x3d"esri-icon-time-clock"\x3e\x3c/span\x3e'+this.i18n.timeEnabled+"\x3c/a\x3e":'\x3ca class\x3d"esriTrailingPadding1"\x3e\x3c/a\x3e')+
"\x3c/nav\x3e\x3c/div\x3e",z);return z},_getLabel:function(C){var z={icon:"",name:""},D=C.geometryType;D===x.GeometryTypes.Point||D===x.GeometryTypes.MultiPoint?(z.name=this.i18n.points,z.icon="esri-icon-map-pin"):D===x.GeometryTypes.Polygon?(z.name=this.i18n.areas,z.icon="esri-icon-polygon"):D===x.GeometryTypes.Line?(z.name=this.i18n.lines,z.icon="esri-icon-polyline"):C.type===l.IS?(z.name=this.i18n.imageService,z.icon="esri-icon-layers"):(z.name=this.i18n.table,z.icon="esri-icon-table");return z}});
G.mixin(B,{add:function(C,z){if(!C.plugIn){var D=z||{};D.parent=C;D.self=C.self;C.plugIn=new B(D)}},remove:function(C){C.plugIn&&(C.plugIn.destroy(),delete C.plugIn)}});G.setObject("dijit.analysis.PluginLayers",B,e);return B})},"esri/dijit/analysis/AnalysisRegistry":function(){define(["dojo/_base/lang","dojo/has","../../kernel"],function(K,G,w){G={Modes:{Raster:"raster",Bigdata:"bigdata",Standard:"standard",Feature:"feature"},Tools:{FindCentroids:"FindCentroids",ChooseBestFacilities:"ChooseBestFacilities"},
ProcessInfoTools:{DescribeDataset:{Name:"DescribeDataset",Gax:!0,Std:!1},GeneralizedLinearRegression:{Name:"GeneralizedLinearRegression",Gax:!0,Std:!1},ForestBasedClassificationAndRegression:{Name:"ForestBasedClassificationAndRegression",Gax:!0,Std:!1},GeographicallyWeightedRegression:{Name:"GeographicallyWeightedRegression",Gax:!0,Std:!1},FindSimilarLocations:{Name:"FindSimilarLocations",Gax:!0,Std:!0},FindHotSpots:{Name:"FindHotSpots",Gax:!1,Std:!0},FindOutliers:{Name:"FindOutliers",Gax:!0,Std:!0}},
ToolCategory:{Gax:"GeoAnalyticsTools",Std:"SpatialAnalysisTools"},GeometryTypes:{Polygon:"esriGeometryPolygon",Line:"esriGeometryPolyline",Point:"esriGeometryPoint",MultiPoint:"esriGeometryMultipoint"},PseudoGeometryTypes:{Point:"point",Line:"line",Polygon:"polygon"},TimeTypes:{Instant:"instant",Interval:"interval"},FieldTypes:{ObjectId:"esriFieldTypeOID",String:"esriFieldTypeString",Short:"esriFieldTypeSmallInteger",Integer:"esriFieldTypeInteger",Float:"esriFieldTypeSingle",Double:"esriFieldTypeDouble",
Date:"esriFieldTypeDate"},PseudoFieldTypes:{Number:"number",String:"string",Date:"date"},Shapes:{square:"SQUARE",hexagon:"HEXAGON",transverseHexagon:"TRANSVERSEHEXAGON",triangle:"TRIANGLE",diamond:"DIAMOND"},DistanceMethods:{geodesic:"Geodesic",planar:"Planar"}};K.setObject("dijit.analysis.AnalysisRegistry",G,w);return G})},"esri/dijit/analysis/PCSList":function(){define(["dojo/_base/lang","dojo/has","../../kernel"],function(K,G,w){G=[2E3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,
2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2070,2071,2072,2073,2074,2075,2076,2077,2078,2079,2080,2081,2082,2083,2084,2085,2086,2087,2088,2089,2090,2091,2092,2093,2094,2095,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,
2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2137,2138,2139,2140,2141,2142,2143,2144,2145,2146,2147,2148,2149,2150,2151,2152,2153,2154,2155,2157,2158,2159,2160,2161,2162,2163,2164,2165,2166,2167,2168,2169,2170,2172,2173,2174,2175,2176,2177,2178,2179,2180,2181,2182,2183,2184,2185,2186,2187,2188,2189,2190,2191,2192,2193,2195,2196,2197,2198,2200,2201,2202,2203,2204,2205,2206,2207,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2219,2220,2222,2223,2224,2225,2226,2227,2228,2229,2230,
2231,2232,2233,2234,2235,2236,2237,2238,2239,2240,2241,2242,2243,2244,2245,2246,2247,2248,2249,2250,2251,2252,2253,2254,2255,2256,2257,2258,2259,2260,2261,2262,2263,2264,2265,2266,2267,2268,2269,2270,2271,2272,2273,2274,2275,2276,2277,2278,2279,2280,2281,2282,2283,2284,2285,2286,2287,2288,2289,2290,2291,2292,2294,2295,2308,2309,2310,2311,2312,2313,2314,2315,2316,2317,2318,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,
2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,
2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,
2549,2550,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,
2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2736,2737,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,
2751,2752,2753,2754,2755,2756,2757,2758,2759,2760,2761,2762,2763,2764,2765,2766,2767,2768,2769,2770,2771,2772,2773,2774,2775,2776,2777,2778,2779,2780,2781,2782,2783,2784,2785,2786,2787,2788,2789,2790,2791,2792,2793,2794,2795,2796,2797,2798,2799,2800,2801,2802,2803,2804,2805,2806,2807,2808,2809,2810,2811,2812,2813,2814,2815,2816,2817,2818,2819,2820,2821,2822,2823,2824,2825,2826,2827,2828,2829,2830,2831,2832,2833,2834,2835,2836,2837,2838,2839,2840,2841,2842,2843,2844,2845,2846,2847,2848,2849,2850,2851,
2852,2853,2854,2855,2856,2857,2858,2859,2860,2861,2862,2863,2864,2865,2866,2867,2868,2869,2870,2871,2872,2873,2874,2875,2876,2877,2878,2879,2880,2881,2882,2883,2884,2885,2886,2887,2888,2891,2892,2893,2894,2895,2896,2897,2898,2899,2900,2901,2902,2903,2904,2905,2906,2907,2908,2909,2910,2911,2912,2913,2914,2915,2916,2917,2918,2919,2920,2921,2922,2923,2924,2925,2926,2927,2928,2929,2930,2931,2932,2933,2934,2935,2936,2937,2938,2939,2940,2941,2942,2943,2944,2945,2946,2947,2948,2949,2950,2951,2952,2953,2954,
2955,2956,2957,2958,2959,2960,2961,2962,2964,2965,2966,2967,2968,2969,2970,2971,2972,2973,2975,2976,2977,2978,2979,2980,2981,2982,2983,2984,2985,2986,2987,2988,2989,2990,2991,2992,2993,2994,2995,2996,2997,2998,2999,3E3,3001,3002,3003,3004,3005,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3031,3032,3033,3034,3035,3036,3037,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3054,3055,3056,3057,3058,3059,
3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,3070,3071,3072,3073,3074,3075,3076,3077,3078,3079,3080,3081,3082,3083,3084,3085,3086,3087,3088,3089,3090,3091,3092,3093,3094,3095,3096,3097,3098,3099,3100,3101,3102,3106,3107,3108,3109,3110,3111,3112,3113,3114,3115,3116,3117,3118,3119,3120,3121,3122,3123,3124,3125,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3141,3142,3146,3147,3148,3149,3150,3151,3153,3154,3155,3156,3157,3158,3159,3160,3161,3162,3163,3164,3165,3166,3167,3168,3169,
3170,3171,3172,3174,3175,3176,3177,3178,3179,3180,3181,3182,3183,3184,3185,3186,3187,3188,3189,3190,3191,3192,3193,3194,3195,3196,3197,3198,3199,3200,3201,3202,3203,3294,3295,3296,3297,3298,3299,3300,3301,3302,3303,3304,3305,3306,3307,3308,3309,3310,3311,3312,3313,3314,3315,3316,3317,3318,3319,3320,3321,3322,3323,3324,3325,3326,3327,3328,3329,3330,3331,3332,3333,3334,3335,3336,3337,3338,3339,3340,3341,3342,3343,3344,3345,3346,3347,3348,3349,3350,3351,3352,3353,3354,3355,3356,3357,3358,3359,3360,3361,
3362,3363,3364,3365,3366,3367,3368,3369,3370,3371,3372,3373,3374,3375,3376,3377,3378,3379,3380,3381,3382,3383,3384,3385,3386,3387,3388,3389,3390,3391,3392,3393,3394,3395,3396,3397,3398,3399,3400,3401,3402,3403,3404,3405,3406,3407,3408,3409,3410,3411,3412,3413,3414,3415,3416,3417,3418,3419,3420,3421,3422,3423,3424,3425,3426,3427,3428,3429,3430,3431,3432,3433,3434,3435,3436,3437,3438,3439,3440,3441,3442,3443,3444,3445,3446,3447,3448,3449,3450,3451,3452,3453,3454,3455,3456,3457,3458,3459,3460,3461,3462,
3463,3464,3465,3466,3467,3468,3469,3470,3471,3472,3473,3474,3475,3476,3477,3478,3479,3480,3481,3482,3483,3484,3485,3486,3487,3488,3489,3490,3491,3492,3493,3494,3495,3496,3497,3498,3499,3500,3501,3502,3503,3504,3505,3506,3507,3508,3509,3510,3511,3512,3513,3514,3515,3516,3517,3518,3519,3520,3521,3522,3523,3524,3525,3526,3527,3528,3529,3530,3531,3532,3533,3534,3535,3536,3537,3538,3539,3540,3541,3542,3543,3544,3545,3546,3547,3548,3549,3550,3551,3552,3553,3554,3555,3556,3557,3558,3559,3560,3561,3562,3563,
3564,3565,3566,3567,3568,3569,3570,3571,3572,3573,3574,3575,3576,3577,3578,3579,3580,3581,3582,3583,3584,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,3643,3644,3645,3646,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,
3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688,3689,3690,3691,3692,3693,3694,3695,3696,3697,3698,3699,3700,3701,3702,3703,3704,3705,3706,3707,3708,3709,3710,3711,3712,3713,3714,3715,3716,3717,3718,3719,3720,3721,3722,3723,3724,3725,3726,3727,3728,3729,3730,3731,3732,3733,3734,3735,3736,3737,3738,3739,3740,3741,3742,3743,3744,3745,3746,3747,3748,3749,3750,3751,3753,3754,3755,3756,3757,3758,3759,3760,3761,3762,3763,3764,3765,3766,
3767,3768,3769,3770,3771,3772,3773,3775,3776,3777,3779,3780,3781,3783,3784,3785,3788,3789,3790,3791,3793,3794,3797,3798,3799,3800,3801,3802,3812,3814,3815,3816,3825,3826,3827,3828,3829,3832,3833,3834,3835,3836,3837,3838,3839,3840,3841,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3857,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3890,3891,3892,3893,3907,3908,3909,3910,3911,3912,3920,3942,3943,3944,3945,3946,3947,3948,3949,3950,3968,3969,3970,3973,3974,3975,3976,3978,3979,3986,
3987,3988,3989,3991,3992,3994,3995,3996,3997,4026,4037,4038,4048,4049,4050,4051,4056,4057,4058,4059,4060,4061,4062,4063,4071,4082,4083,4087,4088,4093,4094,4095,4096,4217,4390,4391,4392,4393,4394,4395,4396,4397,4398,4399,4400,4401,4402,4403,4404,4405,4406,4407,4408,4409,4410,4411,4412,4413,4414,4415,4417,4418,4419,4420,4421,4422,4423,4424,4425,4426,4427,4428,4429,4430,4431,4432,4433,4434,4437,4438,4439,4455,4456,4457,4462,4467,4471,4474,4484,4485,4486,4487,4488,4489,4491,4492,4493,4494,4495,4496,4497,
4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4559,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4647,4652,4653,4654,4655,4656,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,
4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4822,4826,4839,5014,5015,5016,5018,5048,5069,5070,5071,5072,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5167,5168,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5221,5223,5234,5235,5243,5247,5253,5254,5255,5256,5257,5258,5259,5266,5269,5270,5271,5272,5273,5274,5275,5292,5293,5294,5295,
5296,5297,5298,5299,5300,5301,5302,5303,5304,5305,5306,5307,5308,5309,5310,5311,5316,5320,5321,5325,5329,5330,5331,5337,5343,5344,5345,5346,5347,5348,5349,5355,5356,5357,5361,5362,5367,5382,5383,5387,5388,5389,5396,5456,5457,5459,5460,5461,5462,5463,5469,5472,5479,5480,5481,5482,5490,5513,5514,5518,5519,5520,5523,5530,5531,5532,5533,5534,5535,5536,5537,5538,5539,5550,5551,5552,5559,5562,5563,5564,5565,5566,5567,5568,5569,5570,5571,5572,5573,5574,5575,5576,5577,5578,5579,5580,5581,5582,5583,5588,5589,
5596,5623,5624,5625,5627,5629,5631,5632,5633,5634,5635,5636,5637,5638,5639,5641,5643,5644,5646,5649,5650,5651,5652,5653,5654,5655,5659,5663,5664,5665,5666,5667,5668,5669,5670,5671,5672,5673,5674,5675,5676,5677,5678,5679,5680,5682,5683,5684,5685,5700,5825,5836,5837,5839,5842,5844,5858,5875,5876,5877,5879,5880,5887,5890,5921,5922,5923,5924,5925,5926,5927,5928,5929,5930,5931,5932,5933,5934,5935,5936,5937,5938,5939,5940,6050,6051,6052,6053,6054,6055,6056,6057,6058,6059,6060,6061,6062,6063,6064,6065,6066,
6067,6068,6069,6070,6071,6072,6073,6074,6075,6076,6077,6078,6079,6080,6081,6082,6083,6084,6085,6086,6087,6088,6089,6090,6091,6092,6093,6094,6095,6096,6097,6098,6099,6100,6101,6102,6103,6104,6105,6106,6107,6108,6109,6110,6111,6112,6113,6114,6115,6116,6117,6118,6119,6120,6121,6122,6123,6124,6125,6128,6129,6141,6204,6210,6211,6244,6245,6246,6247,6248,6249,6250,6251,6252,6253,6254,6255,6256,6257,6258,6259,6260,6261,6262,6263,6264,6265,6266,6267,6268,6269,6270,6271,6272,6273,6274,6275,6307,6312,6316,6328,
6329,6330,6331,6332,6333,6334,6335,6336,6337,6338,6339,6340,6341,6342,6343,6344,6345,6346,6347,6348,6350,6351,6352,6353,6354,6355,6356,6362,6366,6367,6368,6369,6370,6371,6372,6381,6382,6383,6384,6385,6386,6387,6391,6393,6394,6395,6396,6397,6398,6399,6400,6401,6402,6403,6404,6405,6406,6407,6408,6409,6410,6411,6412,6413,6414,6415,6416,6417,6418,6419,6420,6421,6422,6423,6424,6425,6426,6427,6428,6429,6430,6431,6432,6433,6434,6435,6436,6437,6438,6439,6440,6441,6442,6443,6444,6445,6446,6447,6448,6449,6450,
6451,6452,6453,6454,6455,6456,6457,6458,6459,6460,6461,6462,6463,6464,6465,6466,6467,6468,6469,6470,6471,6472,6473,6474,6475,6476,6477,6478,6479,6480,6481,6482,6483,6484,6485,6486,6487,6488,6489,6490,6491,6492,6493,6494,6495,6496,6497,6498,6499,6500,6501,6502,6503,6504,6505,6506,6507,6508,6509,6510,6511,6512,6513,6514,6515,6516,6518,6519,6520,6521,6522,6523,6524,6525,6526,6527,6528,6529,6530,6531,6532,6533,6534,6535,6536,6537,6538,6539,6540,6541,6542,6543,6544,6545,6546,6547,6548,6549,6550,6551,6552,
6553,6554,6555,6556,6557,6558,6559,6560,6561,6562,6563,6564,6565,6566,6567,6568,6569,6570,6571,6572,6573,6574,6575,6576,6577,6578,6579,6580,6581,6582,6583,6584,6585,6586,6587,6588,6589,6590,6591,6592,6593,6594,6595,6596,6597,6598,6599,6600,6601,6602,6603,6605,6606,6607,6608,6609,6610,6611,6612,6613,6614,6615,6616,6617,6618,6619,6620,6621,6622,6623,6624,6625,6626,6627,6628,6629,6630,6631,6632,6633,6634,6635,6636,6637,6646,6669,6670,6671,6672,6673,6674,6675,6676,6677,6678,6679,6680,6681,6682,6683,6684,
6685,6686,6687,6688,6689,6690,6691,6692,6703,6707,6708,6709,6720,6721,6722,6723,6732,6733,6734,6735,6736,6737,6738,6784,6785,6786,6787,6788,6789,6790,6791,6792,6793,6794,6795,6796,6797,6798,6799,6800,6801,6802,6803,6804,6805,6806,6807,6808,6809,6810,6811,6812,6813,6814,6815,6816,6817,6818,6819,6820,6821,6822,6823,6824,6825,6826,6827,6828,6829,6830,6831,6832,6833,6834,6835,6836,6837,6838,6839,6840,6841,6842,6843,6844,6845,6846,6847,6848,6849,6850,6851,6852,6853,6854,6855,6856,6857,6858,6859,6860,6861,
6862,6863,6867,6868,6870,6875,6876,6879,6880,6884,6885,6886,6887,6915,6922,6923,6924,6925,6931,6932,6933,6956,6957,6958,6959,6962,6984,6991,7005,7006,7007,7057,7058,7059,7060,7061,7062,7063,7064,7065,7066,7067,7068,7069,7070,7074,7075,7076,7077,7078,7079,7080,7081,7082,7109,7110,7111,7112,7113,7114,7115,7116,7117,7118,7119,7120,7121,7122,7123,7124,7125,7126,7127,7128,7131,7132,7257,7258,7259,7260,7261,7262,7263,7264,7265,7266,7267,7268,7269,7270,7271,7272,7273,7274,7275,7276,7277,7278,7279,7280,7281,
7282,7283,7284,7285,7286,7287,7288,7289,7290,7291,7292,7293,7294,7295,7296,7297,7298,7299,7300,7301,7302,7303,7304,7305,7306,7307,7308,7309,7310,7311,7312,7313,7314,7315,7316,7317,7318,7319,7320,7321,7322,7323,7324,7325,7326,7327,7328,7329,7330,7331,7332,7333,7334,7335,7336,7337,7338,7339,7340,7341,7342,7343,7344,7345,7346,7347,7348,7349,7350,7351,7352,7353,7354,7355,7356,7357,7358,7359,7360,7361,7362,7363,7364,7365,7366,7367,7368,7369,7370,7374,7375,7376,7528,7529,7530,7531,7532,7533,7534,7535,7536,
7537,7538,7539,7540,7541,7542,7543,7544,7545,7546,7547,7548,7549,7550,7551,7552,7553,7554,7555,7556,7557,7558,7559,7560,7561,7562,7563,7564,7565,7566,7567,7568,7569,7570,7571,7572,7573,7574,7575,7576,7577,7578,7579,7580,7581,7582,7583,7584,7585,7586,7587,7588,7589,7590,7591,7592,7593,7594,7595,7596,7597,7598,7599,7600,7601,7602,7603,7604,7605,7606,7607,7608,7609,7610,7611,7612,7613,7614,7615,7616,7617,7618,7619,7620,7621,7622,7623,7624,7625,7626,7627,7628,7629,7630,7631,7632,7633,7634,7635,7636,7637,
7638,7639,7640,7641,7642,7643,7644,7645,7845,7846,7847,7848,7849,7850,7851,7852,7853,7854,7855,7856,7857,7858,7859,20002,20003,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20062,20063,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,20135,20136,20137,
20138,20248,20249,20250,20251,20252,20253,20254,20255,20256,20257,20258,20348,20349,20350,20351,20352,20353,20354,20355,20356,20357,20358,20436,20437,20438,20439,20440,20499,20538,20539,20790,20791,20822,20823,20824,20934,20935,20936,21035,21036,21037,21095,21096,21097,21148,21149,21150,21291,21292,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21500,21780,21781,21782,21817,21818,21891,21892,21893,21894,21896,21897,
21898,21899,22032,22033,22091,22092,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,22234,22235,22236,22332,22391,22392,22521,22522,22523,22524,22525,22700,22770,22780,22832,22991,22992,22993,22994,23028,23029,23030,23031,23032,23033,23034,23035,23036,23037,23038,23090,23095,23239,23240,23433,23700,23830,23831,23832,23833,23834,23835,23836,23837,23838,23839,23840,23841,23842,23843,23844,23845,23846,23847,23848,23849,23850,
23851,23852,23853,23866,23867,23868,23869,23870,23871,23872,23877,23878,23879,23880,23881,23882,23883,23884,23886,23887,23888,23889,23890,23891,23892,23893,23894,23946,23947,23948,24047,24048,24100,24200,24305,24306,24311,24312,24313,24342,24343,24344,24345,24346,24347,24370,24371,24372,24373,24374,24375,24376,24377,24378,24379,24380,24381,24382,24383,24500,24547,24548,24571,24600,24718,24719,24720,24721,24817,24818,24819,24820,24821,24877,24878,24879,24880,24881,24882,24891,24892,24893,25E3,25231,
25391,25392,25393,25394,25395,25828,25829,25830,25831,25832,25833,25834,25835,25836,25837,25838,25884,25932,26191,26192,26193,26194,26195,26237,26331,26332,26391,26392,26393,26432,26591,26592,26632,26692,26701,26702,26703,26704,26705,26706,26707,26708,26709,26710,26711,26712,26713,26714,26715,26716,26717,26718,26719,26720,26721,26722,26729,26730,26731,26732,26733,26734,26735,26736,26737,26738,26739,26740,26741,26742,26743,26744,26745,26746,26747,26748,26749,26750,26751,26752,26753,26754,26755,26756,
26757,26758,26759,26760,26761,26762,26763,26764,26765,26766,26767,26768,26769,26770,26771,26772,26773,26774,26775,26776,26777,26778,26779,26780,26781,26782,26783,26784,26785,26786,26787,26788,26789,26790,26791,26792,26793,26794,26795,26796,26797,26798,26799,26801,26802,26803,26811,26812,26813,26847,26848,26849,26850,26851,26852,26853,26854,26855,26856,26857,26858,26859,26860,26861,26862,26863,26864,26865,26866,26867,26868,26869,26870,26891,26892,26893,26894,26895,26896,26897,26898,26899,26901,26902,
26903,26904,26905,26906,26907,26908,26909,26910,26911,26912,26913,26914,26915,26916,26917,26918,26919,26920,26921,26922,26923,26929,26930,26931,26932,26933,26934,26935,26936,26937,26938,26939,26940,26941,26942,26943,26944,26945,26946,26948,26949,26950,26951,26952,26953,26954,26955,26956,26957,26958,26959,26960,26961,26962,26963,26964,26965,26966,26967,26968,26969,26970,26971,26972,26973,26974,26975,26976,26977,26978,26979,26980,26981,26982,26983,26984,26985,26986,26987,26988,26989,26990,26991,26992,
26993,26994,26995,26996,26997,26998,27037,27038,27039,27040,27120,27200,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27258,27259,27260,27291,27292,27391,27392,27393,27394,27395,27396,27397,27398,27429,27492,27493,27500,27561,27562,27563,27564,27571,27572,27573,27574,27581,27582,27583,27584,27591,27592,27593,27594,27700,28191,28192,28193,28232,28348,28349,28350,28351,28352,28353,
28354,28355,28356,28357,28358,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,28600,28991,28992,29100,29101,29118,29119,29120,29121,29122,29168,29169,29170,29171,29172,29177,29178,
29179,29180,29181,29182,29183,29184,29185,29187,29188,29189,29190,29191,29192,29193,29194,29195,29220,29221,29333,29635,29636,29701,29738,29739,29849,29850,29871,29872,29873,29900,29901,29902,29903,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30200,30339,30340,30491,30492,30493,30494,30591,30592,30729,30730,30731,30732,30791,30792,30800,31028,31121,31154,31170,31171,31251,31252,31253,31254,31255,31256,31257,31258,31259,31265,31266,
31267,31268,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31291,31292,31293,31294,31295,31296,31297,31370,31461,31462,31463,31464,31465,31466,31467,31468,31469,31491,31492,31493,31494,31495,31528,31529,31600,31700,31838,31839,31900,31901,31917,31918,31919,31920,31921,31922,31965,31966,31967,31968,31969,31970,31971,31972,31973,31974,31975,31976,31977,31978,31979,31980,31981,31982,31983,31984,31985,31986,31987,31988,31989,31990,31991,31992,31993,31994,31995,
31996,31997,31998,31999,32E3,32001,32002,32003,32005,32006,32007,32008,32009,32010,32011,32012,32013,32014,32015,32016,32017,32018,32019,32020,32021,32022,32023,32024,32025,32026,32027,32028,32029,32030,32031,32033,32034,32035,32036,32037,32038,32039,32040,32041,32042,32043,32044,32045,32046,32047,32048,32049,32050,32051,32052,32053,32054,32055,32056,32057,32058,32059,32060,32061,32062,32064,32065,32066,32067,32074,32075,32076,32077,32081,32082,32083,32084,32085,32086,32098,32099,32100,32104,32107,
32108,32109,32110,32111,32112,32113,32114,32115,32116,32117,32118,32119,32120,32121,32122,32123,32124,32125,32126,32127,32128,32129,32130,32133,32134,32135,32136,32137,32138,32139,32140,32141,32142,32143,32144,32145,32146,32147,32148,32149,32150,32151,32152,32153,32154,32155,32156,32157,32158,32161,32164,32165,32166,32167,32180,32181,32182,32183,32184,32185,32186,32187,32188,32189,32190,32191,32192,32193,32194,32195,32196,32197,32198,32199,32201,32202,32203,32204,32205,32206,32207,32208,32209,32210,
32211,32212,32213,32214,32215,32216,32217,32218,32219,32220,32221,32222,32223,32224,32225,32226,32227,32228,32229,32230,32231,32232,32233,32234,32235,32236,32237,32238,32239,32240,32241,32242,32243,32244,32245,32246,32247,32248,32249,32250,32251,32252,32253,32254,32255,32256,32257,32258,32259,32260,32301,32302,32303,32304,32305,32306,32307,32308,32309,32310,32311,32312,32313,32314,32315,32316,32317,32318,32319,32320,32321,32322,32323,32324,32325,32326,32327,32328,32329,32330,32331,32332,32333,32334,
32335,32336,32337,32338,32339,32340,32341,32342,32343,32344,32345,32346,32347,32348,32349,32350,32351,32352,32353,32354,32355,32356,32357,32358,32359,32360,32601,32602,32603,32604,32605,32606,32607,32608,32609,32610,32611,32612,32613,32614,32615,32616,32617,32618,32619,32620,32621,32622,32623,32624,32625,32626,32627,32628,32629,32630,32631,32632,32633,32634,32635,32636,32637,32638,32639,32640,32641,32642,32643,32644,32645,32646,32647,32648,32649,32650,32651,32652,32653,32654,32655,32656,32657,32658,
32659,32660,32661,32662,32664,32665,32666,32667,32701,32702,32703,32704,32705,32706,32707,32708,32709,32710,32711,32712,32713,32714,32715,32716,32717,32718,32719,32720,32721,32722,32723,32724,32725,32726,32727,32728,32729,32730,32731,32732,32733,32734,32735,32736,32737,32738,32739,32740,32741,32742,32743,32744,32745,32746,32747,32748,32749,32750,32751,32752,32753,32754,32755,32756,32757,32758,32759,32760,32761,32766,53001,53002,53003,53004,53008,53009,53010,53011,53012,53013,53014,53015,53016,53017,
53018,53019,53021,53022,53023,53024,53025,53026,53027,53028,53029,53030,53031,53032,53034,53042,53043,53044,53045,53046,53048,53049,53074,53075,53076,53077,53078,53079,53080,54001,54002,54003,54004,54008,54009,54010,54011,54012,54013,54014,54015,54016,54017,54018,54019,54021,54022,54023,54024,54025,54026,54027,54028,54029,54030,54031,54032,54034,54042,54043,54044,54045,54046,54048,54049,54050,54051,54052,54053,54074,54075,54076,54077,54078,54079,54080,65061,65062,65161,65163,102001,102002,102003,
102004,102005,102006,102007,102008,102009,102010,102011,102012,102013,102014,102015,102016,102017,102018,102019,102020,102021,102022,102023,102024,102025,102026,102027,102028,102029,102030,102031,102032,102033,102034,102035,102036,102037,102038,102039,102040,102041,102042,102043,102044,102045,102046,102047,102048,102049,102050,102051,102052,102053,102054,102055,102056,102057,102058,102059,102060,102061,102062,102063,102064,102065,102066,102067,102068,102069,102070,102071,102072,102073,102074,102075,
102076,102077,102078,102079,102080,102081,102082,102083,102084,102085,102086,102087,102088,102089,102090,102091,102092,102093,102094,102095,102096,102097,102098,102099,102100,102101,102102,102103,102104,102105,102106,102107,102108,102109,102110,102111,102112,102113,102114,102115,102116,102117,102118,102119,102120,102121,102122,102123,102124,102125,102126,102127,102128,102129,102130,102131,102132,102133,102134,102135,102136,102137,102138,102139,102140,102141,102142,102143,102144,102145,102146,102147,
102148,102149,102150,102151,102152,102153,102154,102155,102156,102157,102158,102159,102160,102161,102162,102163,102164,102165,102166,102167,102168,102169,102170,102171,102172,102173,102174,102175,102176,102177,102178,102179,102180,102181,102182,102183,102184,102185,102186,102187,102188,102189,102190,102191,102192,102193,102194,102195,102196,102197,102198,102199,102200,102201,102202,102203,102204,102205,102206,102207,102208,102209,102210,102211,102212,102213,102214,102215,102216,102217,102218,102219,
102220,102221,102222,102223,102224,102225,102226,102227,102228,102229,102230,102231,102232,102233,102234,102235,102236,102237,102238,102239,102240,102241,102242,102243,102244,102245,102246,102247,102248,102249,102250,102251,102252,102253,102254,102255,102256,102257,102258,102259,102260,102261,102262,102263,102264,102265,102266,102267,102268,102269,102270,102271,102272,102273,102274,102275,102276,102277,102278,102279,102280,102281,102282,102283,102284,102285,102286,102287,102288,102289,102290,102291,
102292,102293,102294,102295,102296,102297,102298,102299,102300,102301,102302,102303,102304,102305,102306,102307,102308,102309,102310,102311,102312,102313,102314,102315,102316,102317,102318,102319,102320,102321,102322,102323,102324,102325,102326,102327,102328,102329,102330,102331,102332,102333,102334,102335,102336,102337,102338,102339,102340,102341,102342,102343,102344,102345,102346,102347,102348,102349,102350,102351,102352,102353,102354,102355,102356,102357,102358,102359,102360,102361,102362,102363,
102364,102365,102366,102367,102368,102369,102370,102371,102372,102373,102374,102375,102376,102377,102378,102379,102380,102381,102382,102383,102384,102385,102386,102387,102388,102389,102390,102391,102392,102393,102394,102395,102396,102397,102398,102399,102400,102401,102402,102403,102404,102405,102406,102407,102408,102409,102410,102411,102412,102413,102414,102415,102416,102417,102418,102419,102420,102421,102422,102423,102424,102425,102426,102427,102428,102429,102430,102431,102432,102433,102434,102435,
102436,102437,102438,102439,102440,102441,102442,102443,102444,102445,102446,102447,102448,102449,102450,102451,102452,102453,102454,102455,102456,102457,102458,102459,102460,102461,102462,102463,102464,102465,102466,102467,102468,102469,102470,102471,102472,102473,102474,102475,102476,102477,102478,102479,102480,102481,102482,102483,102484,102485,102486,102487,102488,102489,102490,102491,102492,102493,102494,102495,102496,102500,102501,102502,102503,102504,102505,102506,102507,102508,102509,102510,
102511,102512,102513,102514,102515,102516,102517,102518,102519,102520,102521,102522,102523,102524,102525,102526,102527,102528,102529,102530,102531,102532,102533,102534,102535,102536,102537,102538,102539,102540,102541,102542,102543,102544,102545,102546,102547,102548,102549,102550,102551,102552,102553,102554,102555,102556,102557,102558,102559,102560,102561,102570,102571,102572,102573,102574,102575,102576,102577,102578,102579,102580,102581,102582,102583,102584,102585,102586,102587,102588,102589,102590,
102591,102592,102593,102594,102595,102596,102597,102598,102599,102600,102601,102602,102603,102604,102605,102606,102607,102608,102609,102610,102611,102612,102613,102614,102615,102616,102617,102618,102619,102620,102621,102622,102623,102624,102625,102626,102627,102628,102629,102630,102631,102632,102633,102634,102635,102636,102637,102638,102639,102640,102641,102642,102643,102644,102645,102646,102647,102648,102649,102650,102651,102652,102653,102654,102655,102656,102657,102658,102659,102660,102661,102662,
102663,102664,102665,102666,102667,102668,102669,102670,102671,102672,102673,102674,102675,102676,102677,102678,102679,102680,102681,102682,102683,102684,102685,102686,102687,102688,102689,102690,102691,102692,102693,102694,102695,102696,102697,102698,102699,102700,102701,102702,102703,102704,102705,102706,102707,102708,102709,102710,102711,102712,102713,102714,102715,102716,102717,102718,102719,102720,102721,102722,102723,102724,102725,102726,102727,102728,102729,102730,102733,102734,102735,102736,
102737,102738,102739,102740,102741,102742,102743,102744,102745,102746,102747,102748,102749,102750,102751,102752,102753,102754,102755,102756,102757,102758,102761,102762,102763,102764,102765,102766,102767,102768,102769,102770,102771,102772,102773,102774,102775,102776,102777,102778,102779,102780,102781,102782,102783,102784,102785,102786,102787,102788,102789,102790,102791,102792,102793,102794,102795,102796,102797,102798,102962,102963,102965,102966,102967,102968,102969,102970,102971,102972,102973,102974,
102975,102976,102977,102978,102979,102980,102981,102982,102983,102984,102985,102986,102987,102988,102989,102990,102991,102992,102993,102994,102995,102996,102997,102998,102999,103E3,103001,103002,103003,103004,103005,103006,103007,103008,103009,103010,103011,103012,103013,103014,103015,103016,103017,103018,103019,103020,103021,103022,103023,103024,103025,103026,103027,103028,103029,103030,103031,103032,103033,103034,103035,103036,103037,103038,103039,103040,103041,103042,103043,103044,103045,103046,
103047,103048,103049,103050,103051,103052,103053,103054,103055,103056,103057,103058,103059,103060,103061,103062,103063,103064,103065,103066,103067,103068,103069,103070,103071,103072,103073,103074,103075,103076,103077,103078,103079,103080,103081,103082,103083,103084,103085,103086,103087,103088,103089,103090,103091,103092,103093,103094,103095,103096,103097,103098,103099,103100,103101,103102,103103,103104,103105,103106,103107,103108,103109,103110,103111,103112,103113,103114,103115,103116,103117,103118,
103119,103120,103121,103122,103123,103124,103125,103126,103127,103128,103129,103130,103131,103132,103133,103134,103135,103136,103137,103138,103139,103140,103141,103142,103143,103144,103145,103146,103147,103148,103149,103150,103151,103152,103153,103154,103155,103156,103157,103158,103159,103160,103161,103162,103163,103164,103165,103166,103167,103168,103169,103170,103171,103172,103173,103174,103175,103176,103177,103178,103179,103180,103181,103182,103183,103184,103185,103186,103187,103188,103189,103190,
103191,103192,103193,103194,103195,103196,103197,103198,103199,103200,103201,103202,103203,103204,103205,103206,103207,103208,103209,103210,103211,103212,103213,103214,103215,103216,103217,103218,103219,103220,103221,103222,103223,103224,103225,103226,103227,103228,103229,103230,103231,103232,103233,103234,103235,103236,103237,103238,103239,103240,103241,103242,103243,103244,103245,103246,103247,103248,103249,103250,103251,103252,103253,103254,103255,103256,103257,103258,103259,103260,103261,103262,
103263,103264,103265,103266,103267,103268,103269,103270,103271,103272,103273,103274,103275,103276,103277,103278,103279,103280,103281,103282,103283,103284,103285,103286,103287,103288,103289,103290,103291,103292,103293,103294,103295,103296,103297,103298,103299,103300,103301,103302,103303,103304,103305,103306,103307,103308,103309,103310,103311,103312,103313,103314,103315,103316,103317,103318,103319,103320,103321,103322,103323,103324,103325,103326,103327,103328,103329,103330,103331,103332,103333,103334,
103335,103336,103337,103338,103339,103340,103341,103342,103343,103344,103345,103346,103347,103348,103349,103350,103351,103352,103353,103354,103355,103356,103357,103358,103359,103360,103361,103362,103363,103364,103365,103366,103367,103368,103369,103370,103371,103372,103373,103374,103375,103376,103377,103378,103379,103380,103381,103382,103383,103384,103385,103386,103387,103388,103389,103390,103391,103392,103393,103394,103395,103396,103397,103398,103399,103400,103401,103402,103403,103404,103405,103406,
103407,103408,103409,103410,103411,103412,103413,103414,103415,103416,103417,103418,103419,103420,103421,103422,103423,103424,103425,103426,103427,103428,103429,103430,103431,103432,103433,103434,103435,103436,103437,103438,103439,103440,103441,103442,103443,103444,103445,103446,103447,103448,103449,103450,103451,103452,103453,103454,103455,103456,103457,103458,103459,103460,103461,103462,103463,103464,103465,103466,103467,103468,103469,103470,103471,103472,103473,103474,103475,103476,103477,103478,
103479,103480,103481,103482,103483,103484,103485,103486,103487,103488,103489,103490,103491,103492,103493,103494,103495,103496,103497,103498,103499,103500,103501,103502,103503,103504,103505,103506,103507,103508,103509,103510,103511,103512,103513,103514,103515,103516,103517,103518,103519,103520,103521,103522,103523,103524,103525,103526,103527,103528,103529,103530,103531,103532,103533,103534,103535,103536,103537,103538,103539,103540,103541,103542,103543,103544,103545,103546,103547,103548,103549,103550,
103551,103552,103553,103554,103555,103556,103557,103558,103559,103560,103561,103562,103563,103564,103565,103566,103567,103568,103569,103570,103571,103572,103573,103574,103575,103576,103577,103578,103579,103580,103581,103582,103583,103584,103585,103600,103601,103602,103603,103604,103605,103606,103607,103608,103609,103610,103611,103612,103613,103614,103615,103616,103617,103618,103619,103620,103621,103622,103623,103624,103625,103626,103627,103628,103629,103630,103631,103632,103633,103634,103635,103636,
103637,103638,103639,103640,103641,103642,103643,103644,103645,103646,103647,103648,103649,103650,103651,103652,103653,103654,103655,103656,103657,103658,103659,103660,103661,103662,103663,103664,103665,103666,103667,103668,103669,103670,103671,103672,103673,103674,103675,103676,103677,103678,103679,103680,103681,103682,103683,103684,103685,103686,103687,103688,103689,103690,103691,103692,103693,103694,103695,103700,103701,103702,103703,103704,103705,103706,103707,103708,103709,103710,103711,103712,
103713,103714,103715,103716,103717,103718,103719,103720,103721,103722,103723,103724,103725,103726,103727,103728,103729,103730,103731,103732,103733,103734,103735,103736,103737,103738,103739,103740,103741,103742,103743,103744,103745,103746,103747,103748,103749,103750,103751,103752,103753,103754,103755,103756,103757,103758,103759,103760,103761,103762,103763,103764,103765,103766,103767,103768,103769,103770,103771,103772,103773,103774,103775,103776,103777,103778,103779,103780,103781,103782,103783,103784,
103785,103786,103787,103788,103789,103790,103791,103792,103793,103794,103795,103796,103797,103798,103799,103800,103801,103802,103803,103804,103805,103806,103807,103808,103809,103810,103811,103812,103813,103814,103815,103816,103817,103818,103819,103820,103821,103822,103823,103824,103825,103826,103827,103828,103829,103830,103831,103832,103833,103834,103835,103836,103837,103838,103839,103840,103841,103842,103843,103844,103845,103846,103847,103848,103849,103850,103851,103852,103853,103854,103855,103856,
103857,103858,103859,103860,103861,103862,103863,103864,103865,103866,103867,103868,103869,103870,103871,103900,103901,103902,103903,103904,103905,103906,103907,103908,103909,103910,103911,103912,103913,103914,103915,103916,103917,103918,103919,103920,103921,103922,103923,103924,103925,103926,103927,103928,103929,103930,103931,103932,103933,103934,103935,103936,103937,103938,103939,103940,103941,103942,103943,103944,103945,103946,103947,103948,103949,103950,103951,103952,103953,103954,103955,103956,
103957,103958,103959,103960,103961,103962,103963,103964,103965,103966,103967,103968,103969,103970,103971];K.setObject("dijit.analysis.PCSList",G,w);return G})},"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),function(K,G,w,v,r,f,c){K=K([f,c],{declaredClass:"esri.layers.ArcGISImageServiceLayer",constructor:function(a,b){this._initialize(a,b);this.useMapImage=b&&b.useMapImage||
!1},refresh:function(a){if(!0===a)this.inherited(arguments);else{var b=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=b}},setRenderer:function(a,b){this.renderer=a;this.onRendererChange();b||this.refresh(!0)},exportMapImage:function(a,b){var p=r.defaults.map;p=G.mixin({size:p.width+","+p.height},this._params,a?a.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,b)}});G.setObject("layers.ArcGISImageServiceLayer",
K,v);return K})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query dojo/DeferredList dojo/debounce ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ../renderers/colorRampUtils ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L){K=K(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_rasterFunctionServiceInfoProps:"bandCount pixelType hasRasterAttributeTable hasColormap hasHistograms minValues maxValues meanValues stdvValues serviceDataType".split(" "),_pixelTypeRanges:{U1:[0,1],U2:[0,3],U4:[0,15],U8:[0,255],S8:[-128,127],U16:[0,65535],S16:[-32768,32767]},_eventMap:{"rendering-change":!0,
"mosaic-rule-change":!0,"spatial-reference-change":!0,"renderer-change":!0},_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(J,O){this.useMapTime=O&&O.hasOwnProperty("useMapTime")?!!O.useMapTime:!0},_initialize:function(J,O){this._url=h.urlToObject(J);this.raster=new C(this._url.path);this._rasterFunctionTemplateInfos={};this._rasterFunctionTemplatePromise={};this._customRenderingRuleId={};this.infoTemplate=O&&O.infoTemplate;var P=O&&O.imageServiceParameters;this.format=P&&
P.format;this.compressionTolerance=P&&P.compressionTolerance?P.compressionTolerance:.01;this.interpolation=P?P.interpolation:null;this.compressionQuality=P?P.compressionQuality:null;this.bandIds=P?P.bandIds:null;this.mosaicRule=P?P.mosaicRule:null;this.renderingRule=P?P.renderingRule:null;this.renderer=P?P.renderer:null;this.useMapDimensionValue=O&&O.hasOwnProperty("useMapDimensionValue")?!!O.useMapDimensionValue:!0;this.hasImageFilter=O&&O.hasImageFilter;this.activeMapDimensions=O&&O.activeMapDimensions;
this._params=G.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},P?P.toJson():{});this.pixelFilter=O&&O.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=G.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=G.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=G.hitch(this,
this._initLayer);this._queryVisibleRastersHandler=G.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._renderingRuleColormap={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=O&&O.loadCallback;P&&P.renderer&&(P.renderer.outputUnit||P.renderer.inputUnit)&&(this.vectorFieldPixelFilter=new D,this.vectorFieldPixelFilter.setUnits(P.renderer.inputUnit,P.renderer.outputUnit));
(P=O&&O.resourceInfo)?this._initLayer(P):k({url:this._url.path,content:G.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(J,O){if(null!==J&&void 0!==J){this._findCredential();(this.credential&&this.credential.ssl||J&&J._ssl)&&this._useSSL();var P=this.minScale,fa=this.maxScale;G.mixin(this,J);this.minScale=P;this.maxScale=fa;this.initialExtent=this.fullExtent=this.extent=
new e(J.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var V=this.minValues,ba=this.maxValues,ka=this.meanValues,la=this.stdvValues,ma=this.bands=[];P=0;for(fa=this.bandCount;P<fa;P++)ma[P]={min:V[P],max:ba[P],mean:ka[P],stddev:la[P]};this.timeInfo=(P=this.timeInfo)&&P.timeExtent?new A(P):null;fa=this.fields=[];if(V=J.fields)for(P=0;P<V.length;P++)fa.push(new F(V[P]));this._updateInfoTemplateFields(this.fields);
this.version=J.currentVersion;this.version||(this.version="fields"in J||"objectIdField"in J||"timeInfo"in J?10:9.3);n.isDefined(J.minScale)&&!this._hasMin&&"Raster"!==J.cacheType&&this.setMinScale(J.minScale);n.isDefined(J.maxScale)&&!this._hasMax&&"Raster"!==J.cacheType&&this.setMaxScale(J.maxScale);P={};J.defaultMosaicMethod?(P.method=J.defaultMosaicMethod,P.operation=J.mosaicOperator,P.sortField=J.sortField,P.sortValue=J.sortValue):P.method=x.METHOD_NONE;this.defaultMosaicRule=new x(P);this.defaultMosaicRule.ascending=
!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===this.serviceDataType;this._setDefaultRenderingRule(!0);this._getRenderingRuleAttributeTableAndColormap();this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(G.hitch(this,function(ha){ha&&(ha.features&&ha.fields&&(this.rasterAttributeTable=
G.clone(ha)),ha.features&&0<ha.features.length&&(this._rasterAttributeTableFeatures=G.clone(ha.features)),ha.fields&&0<ha.fields.length&&(this._rasterAttributeTableFields=G.clone(ha.fields)),this.renderingRule||!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh())}));this._initVectorPixelFilter();this.bandIds||2!==this.bandCount||this.renderingRule||"esri.layers.ArcGISImageServiceLayer"!==
this.declaredClass||this.setBandIds([0,0,0],!0);!(10.3<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)||this._url.query&&this._url.query.raster||this.getRasterFunctionInfos().then(G.hitch(this,function(ha){if(ha&&ha.length){this.rasterFunctionInfos=ha;var Z=[],W;v.forEach(ha,function(Q){if(Q){var ia=Q.functionType;W=W||1===ia||2===ia;Z.push(Q.name)}},this);this._hasItemLevelRFT=W;this._rasterFunctionNames=Z;W&&(this._initVectorPixelFilter(),this.refresh())}}));this.loaded=
!0;this._setDefaultFilter();this.onLoad(this);if(P=this._loadCallback)delete this._loadCallback,P(this)}},_updateInfoTemplateFields:function(J){if(J&&!(1>J.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var O,P;var fa=this.infoTemplate.info.fieldInfos;for(O=0;O<J.length;O++){var V=J[O];for(P=0;P<fa.length;P++)if(fa[P].fieldName.toLowerCase()===V.name.toLowerCase()&&fa[P].fieldName!==V.name){fa[P].fieldName=V.name;
break}}}},getKeyProperties:function(J){var O=this._url.path+"/keyProperties",P=new w(l._dfdCanceller),fa={f:"json"};J&&J.renderingRule&&(fa.renderingRule=r.toJson(J.renderingRule.toJson()));10<this.version?(P._pendingDfd=k({url:O,content:fa,handleAs:"json",callbackParamName:"callback"}),P._pendingDfd.then(function(V){P.callback(V)},function(V){P.errback(V)})):(J=Error("Layer does not have key properties"),J.log=!!f.isDebug,P.errback(J));return P},getRasterAttributeTable:function(J){var O=this._url.path+
"/rasterAttributeTable",P=new w(l._dfdCanceller),fa={f:"json"},V=this.hasRasterAttributeTable;J&&J.renderingRule&&(fa.renderingRule=r.toJson(J.renderingRule.toJson()),V=!0);!this.loaded||10<this.version&&V?(P._pendingDfd=k({url:O,content:fa,handleAs:"json",callbackParamName:"callback"}),P._pendingDfd.then(function(ba){P.callback(ba)},function(ba){P.errback(ba)})):(J=Error("Layer does not support raster attribute table"),J.log=!!f.isDebug,P.errback(J));return P},getRenderingRuleAttributeTable:function(J){var O=
new w(l._dfdCanceller);if(!J||!J.renderingRule)return O.errback(Error("Rendering rule is not specified")),O;J=J.renderingRule;var P=this._getRenderingRuleId(J);this._renderingRuleAttributeTable&&P&&this._renderingRuleAttributeTable.hasOwnProperty(P)?O.resolve(this._renderingRuleAttributeTable[P]):O=this.getRasterAttributeTable({renderingRule:J}).then(G.hitch(this,function(fa){if(fa&&fa.features&&fa.features.length&&fa.fields&&fa.fields.length){var V={features:G.clone(fa.features),fields:G.clone(fa.fields)};
P&&(this._renderingRuleAttributeTable[P]=V)}return V}));return O},_initVectorPixelFilter:function(){var J;this._hasItemLevelRFT&&this.renderingRule&&(J=this._getItemLevelRenderingRule(this.renderingRule));if(J=J||this.renderingRule)return this.getRenderingRuleServiceInfo(J).then(G.hitch(this,function(O){!O||!this._isVectorData(O)&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass||n.isDefined(this.pixelFilter)||(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new D,this.vectorFieldPixelFilter.isDataUV=
"esriImageServiceDataTypeVector-UV"===O.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(G.hitch(this,this._setFlowRepresentation)),this._applyVectorResamplingType(O.serviceDataType))}))},_applyVectorResamplingType:function(J){if(J){var O=this.renderingRule;O&&"Resample"===O.functionName&&((O.functionArguments||{}).ResamplingType="esriImageServiceDataTypeVector-UV"===J?7:10,this.setRenderingRule(new y(O.toJson())))}},_getRasterAttributeTableFeatures:function(){var J=
new w;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return J.resolve(this._rasterAttributeTableFeatures),J;if(10<this.version&&this.hasRasterAttributeTable)return J=this.getRasterAttributeTable(),J.then(G.hitch(this,function(O){O&&O.features&&0<O.features.length&&(this._rasterAttributeTableFeatures=G.clone(O.features))})),J;J.resolve(this._rasterAttributeTableFeatures);return J},_getRenderingRuleAttributeTableFeatures:function(J){J=J&&J.renderingRule;return J?
this.getRenderingRuleAttributeTable({renderingRule:J}).then(function(O){return O&&O.features}):(J=new w,J.errback(Error("Rendering rule is not specified")),J)},_getRenderingRuleAttributeTableAndColormap:function(){this.renderingRule&&this.getRenderingRuleServiceInfo(this.renderingRule).then(G.hitch(this,function(J){J.hasRasterAttributeTable&&this.getRenderingRuleAttributeTable({renderingRule:this.renderingRule}).then(G.hitch(this,function(){!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&
"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh()}));J.hasColormap&&this.getRenderingRuleColormap({renderingRule:this.renderingRule}).then(G.hitch(this,function(){this.renderer&&"esri.renderer.ColormapRenderer"===this.renderer.declaredClass&&this.refresh()}))}))},getCustomRasterFields:function(J){var O=J?J.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;J=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var P={name:this._rasterFieldPrefix+"ItemPixelValue",
alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:J},fa={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:J},V={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},ba=this.fields?G.clone(this.fields):[];J=ba.length;ba[J]=fa;10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||
!this.rasterFunctionInfos.length||this._isRenderingRuleAProcessingTemplate({functionName:"none"}))&&(J++,ba[J]=V);if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)J++,ba[J]=P;!n.isDefined(this.pixelFilter)||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(P={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},
fa={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},J++,ba[J]=P,J++,ba[J]=fa);J=this._rasterAttributeTableFields;(P=this.renderingRule&&this._getRenderingRuleId(this.renderingRule))&&this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(P)&&(J=this._renderingRuleAttributeTable[P].fields);J&&0<J.length&&(J=v.filter(J,function(la){return"esriFieldTypeOID"!==la.type&&"value"!==la.name.toLowerCase()}),J=v.map(J,
function(la){var ma=G.clone(la);ma.name=O+la.name;return ma}),ba=ba.concat(J));var ka=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&v.forEach(this.rasterFunctionInfos,function(la){la&&la.name&&"none"!==la.name.toLowerCase()&&(la={name:ka+la.name.replace(/ /gi,"_"),alias:la.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},ba.push(la))});return ba},_applyTimeToMultidimensionalCRF:function(J,O){var P=this._isTimeSupportedOnCRF();if(P&&
(!J||!J.multidimensionalDefinition))return J;var fa=this.timeInfo&&this.timeInfo.startTimeField;if((O=O||this._params.time)&&fa&&this._isMultidimensionalCRF()){J=G.clone(J||this.defaultMosaicRule)||new x;J.multidimensionalDefinition=J.multidimensionalDefinition||[];var V=J.multidimensionalDefinition.filter(function(ka){return ka.dimensionName===fa}),ba=O.split(",").map(function(ka){return parseInt(ka,10)});2===ba.length&&ba[0]===ba[1]&&(ba.length=1);0<V.length?P?J.multidimensionalDefinition.forEach(function(ka){ka.dimensionName===
fa&&(ka.dimensionName=null,ka.isSlice=null,ka.values=null)}):J.multidimensionalDefinition.forEach(function(ka){ka.dimensionName===fa&&(ka.isSlice=1===ba.length,ka.values=1===ba.length?ba:[ba])}):P||(J.multidimensionalDefinition.some(function(ka){return null!=ka.variableName&&null==ka.dimensionName})?J.multidimensionalDefinition.forEach(function(ka){null!=ka.variableName&&null==ka.dimensionName&&(ka.dimensionName=fa,ka.isSlice=1===ba.length,ka.values=1===ba.length?ba:[ba])}):J.multidimensionalDefinition.push(new B({variableName:"",
dimensionName:fa,isSlice:1===ba.length,values:1===ba.length?ba:[ba]})));this._cleanupMultidimensionalDefinition(J)}return J},_prepareGetImageParameters:function(J,O,P,fa){fa=n.isDefined(fa)?fa:this._params;if(this.renderer||this._hasItemLevelRFT&&this.renderingRule){var V=this.getExportImageRenderingRule();fa.renderingRule=V?r.toJson(V.toJson()):null}V=this.getExportImageMosaicRule(fa);fa.mosaicRule=V?r.toJson(V.toJson()):null;V=J.spatialReference.wkid||r.toJson(J.spatialReference.toJson(!1));delete fa._ts;
G.mixin(fa,{bbox:J.xmin+","+J.ymin+","+J.xmax+","+J.ymax,imageSR:V,bboxSR:V,size:O+","+P},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete fa.compressionTolerance;fa.format&&"LERC"===fa.format.toUpperCase()&&(fa.compressionTolerance=this.compressionTolerance);fa.token=this._getToken()},getImageUrl:function(J,O,P,fa,V){V=n.isDefined(V)?V:this._params;this._prepareGetImageParameters(J,O,P,V);J=G.clone(V);this._cleanupRequestParams(J);O=this._url.path+"/exportImage?";P=h.addProxy(O+b.objectToQuery(G.mixin(J,
{f:"image"})));var ba=J.token;P.length>m.defaults.io.postLength||this.useMapImage?this._jsonRequest=k({url:O,content:G.mixin(J,{f:"json"}),callbackParamName:"callback",load:function(ka,la){var ma=ka.href;ba&&(ma+=-1===ma.indexOf("?")?"?token\x3d"+ba:"\x26token\x3d"+ba);fa(h.addProxy(ma))},error:this._errorHandler}):fa(P)},onRenderingChange:function(){},onMosaicRuleChange:function(){},onRendererChange:function(){},setInterpolation:function(J,O){this.interpolation=this._params.interpolation=J;O||this.refresh(!0)},
setCompressionQuality:function(J,O){this.compressionQuality=this._params.compressionQuality=J;O||this.refresh(!0)},setCompressionTolerance:function(J,O){this.compressionTolerance=J;O||this.refresh(!0)},setBandIds:function(J,O){var P=!1;this.bandIds!==J&&(P=!0);this.bandIds=J;this._params.bandIds=J?J.join(","):null;if(P&&!O)this.onRenderingChange();O||this.refresh(!0)},setDefaultBandIds:function(J){this.bandIds=this._params.bandIds=null;J||this.refresh(!0)},setDisableClientCaching:function(J){this.disableClientCaching=
J},setMosaicRule:function(J,O){var P=!1;this.mosaicRule!==J&&(P=!0);this.mosaicRule=J;this._params.mosaicRule=r.toJson(J.toJson());if(P&&!O)this.onMosaicRuleChange();O||this.refresh(!0)},getRasterFunctionInfos:function(){if(!(10.3>this.version)&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)return k({url:this._url.path+"/rasterFunctionInfos",content:{f:"json"},handleAs:"json",load:function(J){return J&&J.rasterFunctionInfos}})},setRenderingRule:function(J,O){var P=!1;this.renderingRule!==
J&&(P=!0);this.renderingRule=J;this._params.renderingRule=J?r.toJson(J.toJson()):null;this._useRenderingRuleAttributeTable?this.getRenderingRuleAttributeTable({renderingRule:J}):"esri.layers.RasterXLayer"!==this.declaredClass&&this._getRenderingRuleAttributeTableAndColormap();if(P)this.onRenderingChange();this._setDefaultFilter();O||this.refresh(!0)},setImageFormat:function(J,O){this.format=this._params.format=J;this._setDefaultFilter();O||this.refresh(!0)},setInfoTemplate:function(J){this.infoTemplate=
J;this._updateInfoTemplateFields(this.fields)},setDefinitionExpression:function(J,O){var P=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?P=this.defaultMosaicRule.toJson():P.method=x.METHOD_NONE);P.where=J;P=new x(P);this.setMosaicRule(P,O);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},setPixelFilter:function(J){this.pixelFilter=J;this._isDefaultPixelFilter=!1},getPixelData:function(J){return J?(this._useBrowserDecoding()&&
(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},getExportImageRenderingRule:function(){var J;this._hasItemLevelRFT&&this.renderingRule&&(J=this._getServiceLevelRenderingRule(this.renderingRule));J=J||this.renderingRule;this._isItemLevelRasterFunction(this.renderingRule)&&(J=void 0);return this._combineRenderingRule(this._convertRendererToRenderingRule(this.renderer),
J)},getExportImageMosaicRule:function(){var J=this.mosaicRule,O;this._hasItemLevelRFT&&this.renderingRule&&(O=this._getItemLevelRenderingRule(this.renderingRule));O&&(J=J||this.defaultMosaicRule||new x,J.itemRenderingRule=O);return J=this._applyTimeToMultidimensionalCRF(J)},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},getHistograms:function(J){var O=J.variableName,P=(J=(J=J.renderingRule||this.renderingRule||this.defaultRenderingRule)&&"none"!==J.functionName.toLowerCase()?
J.toJson():null)?J.functionName:"",fa=new w(l._dfdCanceller);if((O||""===O)&&this._cachedVariableHistogram[O]&&this._cachedVariableHistogram[O][P])return fa.resolve(this._cachedVariableHistogram[O][P]),fa;if(this.hasHistograms){var V={f:"json"};O&&(V.variable=O);J&&10.9<this.version&&(V.renderingRule=JSON.stringify(J));fa._pendingDfd=k({url:this._url.path+"/histograms",content:V,handleAs:"json",callbackParamName:"callback"});fa._pendingDfd.then(G.hitch(this,function(ba){if(O||""===O)this._cachedVariableHistogram[O]=
this._cachedVariableHistogram[O]||{},this._cachedVariableHistogram[O][P]=ba;fa.callback(ba)}),function(ba){fa.errback(ba)})}else J=Error("Layer does not have histograms."),J.log=!!f.isDebug,fa.errback(J);return fa},computeHistograms:function(J){var O=new w(l._dfdCanceller);if(10.1<=this.currentVersion){J=J||{};var P=J.geometry||this.fullExtent,fa=(J.geometry||this.fullExtent).toJson();P="extent"===P.type?"esriGeometryEnvelope":"esriGeometryPolygon";var V=J.renderingRule||this.renderingRule||this.defaultRenderingRule;
V=V?V.toJson():null;var ba=J.mosaicRule||this.mosaicRule||this.defaultMosaicRule;ba=ba?ba.toJson():null;J=J.pixelSize||{x:this.pixelSizeX,y:this.pixelSizeY};O._pendingDfd=k({url:this._url.path+"/computeHistograms",content:G.mixin({f:"json",geometry:JSON.stringify(fa),geometryType:P,renderingRule:JSON.stringify(V),mosaicRule:JSON.stringify(ba),pixelSize:JSON.stringify(J),callbackParamName:"callback"}),handleAs:"json"});O._pendingDfd.then(function(ka){O.callback(ka)},function(ka){O.errback(ka)})}else fa=
Error("Layer doesn't support computeHistograms."),fa.log=!!f.isDebug,O.errback(fa);return O},getRenderingRuleServiceInfo:function(J,O){function P(ba){return ba.name&&ba.arguments&&ba["function"]&&ba.hasOwnProperty("functionType")}var fa=new l._fixDfd(new w(l._dfdCanceller));if(!J)return fa.errback(Error("Rendering rule is not specified")),fa;if(P(J))"ClipFunction"===J["function"].type&&(J=this._handleClipFunctionInRenderingRule(J));else{var V=this._getRenderingRuleId(J);if(V){if(this._rasterFunctionTemplateInfos[V])return fa.resolve(this._rasterFunctionTemplateInfos[V]),
fa;if(this._rasterFunctionTemplatePromise[V])return fa=this._rasterFunctionTemplatePromise[V]}}fa=k({url:this._url.path,content:G.mixin(G.mixin({f:"json",renderingRule:JSON.stringify(J.toJson())},this._url.query)),callbackParamName:"callback",load:G.hitch(this,function(ba){var ka={};v.forEach(this._rasterFunctionServiceInfoProps,function(la){ka[la]=ba[la]});P(J)||(this._rasterFunctionTemplateInfos[V]=ka);return ka}),error:O||this._errorHandler});V&&!this._rasterFunctionTemplatePromise[V]&&(this._rasterFunctionTemplatePromise[V]=
fa);return fa},queryVisibleRasters:function(J,O,P,fa){var V=this._map,ba=l._fixDfd(new w(l._dfdCanceller));this._visibleRasters=[];var ka,la,ma=!0,ha=!0,Z=null,W=this.infoTemplate?this.infoTemplate.info:null,Q=W?G.clone(this.infoTemplate.info.fieldInfos):null;O=O||{};if(W&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var ia=[];v.forEach(this.infoTemplate.info.mediaInfos,function(Y){ia=ia.concat(Y&&Y.value&&Y.value.fields||[])});ia.length&&v.forEach(Q,function(Y){Y&&
-1<ia.indexOf(Y.fieldName)&&(Y.visible=!0)})}var R=function(Y){var T=W&&W.title&&-1<W.title.toLowerCase().indexOf(Y.toLowerCase());Y=W&&W.description&&-1<W.description.toLowerCase().indexOf(Y.toLowerCase());return T||Y};if(Q&&0<Q.length)for(ma=!1,ka=0;ka<Q.length;ka++)if((la=Q[ka])&&la.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(la.visible||R(la.fieldName))){ma=!0;break}this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("returnTopmostRaster")&&
(Z=this.infoTemplate.info.layerOptions.returnTopmostRaster?1:null);Q&&0<Q.length&&(ha=!1,v.some(Q,function(Y){if(Y&&Y.fieldName.toLowerCase()===this._rasterFieldPrefix.toLowerCase()+"itempixelvalue"&&Y.visible)return ha=!0},this),R(this._rasterFieldPrefix.toLowerCase()+"itempixelvalue")&&(ha=!0));var S=(la=this._removeVisualizationStretchFunction(this.renderingRule))&&la.functionName,N=[];if(10.4<=this.version){var X=!1;if(this.rasterFunctionInfos&&Q){var aa=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;
v.forEach(this.rasterFunctionInfos,function(Y){var T=aa+Y.name.replace(/ /gi,"_");v.some(Q,function(ca){return ca.visible&&ca.fieldName===T})&&(X=X||S&&S===Y.name,N.push(new y({rasterFunction:Y.name})))})}la&&!X&&N.push(la)}ka=new L;ka.geometry=J.geometry;ka.returnGeometry=this._map.spatialReference.equals(this.spatialReference);ka.returnCatalogItems=ma;ka.timeExtent=this.timeInfo?J.timeExtent:null;ka.returnPixelValues=ha;ka.maxItemCount=Z||J.maxItemCount;this._params.time&&this.mosaicRule?(J=G.clone(this.mosaicRule),
J=this._filterOutTimeDimension(J),ka.mosaicRule=J):ka.mosaicRule=this.mosaicRule||null;this._isMultidimensionalCRF()&&ka.timeExtent&&(ka.mosaicRule=this._applyTimeToMultidimensionalCRF(ka.mosaicRule,ka.timeExtent.toJson().join(",")),this._isTimeSupportedOnCRF()||delete ka.timeExtent);ka.renderingRule=10.4>this.version&&la||null;ka.renderingRules=N||null;10.8>this.version&&(ka.returnPixelValues=void 0,ka.maxItemCount=void 0);V&&(V=new d((V.extent.xmax-V.extent.xmin)/V.width,(V.extent.ymax-V.extent.ymin)/
V.height,V.extent.spatialReference),ka.pixelSize=V);O.requestParams=ka;var ea=this;V=new I(this.url);(ba._pendingDfd=V.execute(ka)).addCallbacks(function(Y){ea._queryVisibleRastersHandler(Y,O,P,fa,ba)},function(Y){ea._resolve([Y],null,fa,ba,!0)});return ba},_queryVisibleRastersHandler:function(J,O,P,fa,V){function ba(){var ja=this.getCustomRasterFields(O),na=this._getDomainFields(ja),oa=O?O.returnDomainValues:!1,ra=O&&O.rasterAttributeTableFieldPrefix,ua,wa,Ba,Da,La,Ga,xa,Ca,ta,qa;ja=(ja=this._getRenderingRuleId(this.renderingRule))&&
this._rasterFunctionTemplateInfos[ja];this.renderingRule&&(this._useRenderingRuleAttributeTable||ja)?(ja=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),this.hasRasterAttributeTable||(qa=ka)):ja=this._getRasterAttributeTableFeatures();ja.then(G.hitch(this,function(za){for(ua=0;ua<ea.length;ua++){U=ea[ua];U.setInfoTemplate(this.infoTemplate);U._layer=this;if(ka){ta=ka.replace(/ /gi,"").split(",");wa=ka;Ba=ta;Y&&Y.length>=ua&&(wa=Y[ua].replace(/ /gi,", "),Ba=Y[ua].split(" "));
U.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=Ba;U.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=ta;la&&(U.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=la.replace(/ /gi,"").split(","));if(this.pixelFilter){var va=new z({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});v.forEach(Ba,function(sa){va.addData({pixels:[sa],statistics:{minValue:sa,maxValue:sa,noDataValue:null}})});this.pixelFilter({pixelBlock:va,extent:new e(0,0,0,0,this._map.spatialReference)});
if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)U.attributes[this._rasterFieldPrefix+"Magnitude"]=va.pixels[0][0],U.attributes[this._rasterFieldPrefix+"Direction"]=va.pixels[1][0]}v.forEach(Q,function(sa){U.attributes[sa.name]=sa.value});var pa=0<this.fields.length?qa||wa:qa||la;if(za&&0<za.length&&(Da=v.filter(za,function(sa){if(sa&&sa.attributes)return sa.attributes.hasOwnProperty("Value")?sa.attributes.Value==pa:sa.attributes.VALUE==
pa}),0<Da.length&&(La=G.clone(Da[0]),ra&&La))){Ca={};for(Ga in La.attributes)La.attributes.hasOwnProperty(Ga)&&(xa=ra+Ga,Ca[xa]=La.attributes[Ga]);La.attributes=Ca;U.attributes=G.mixin(U.attributes,La.attributes)}}oa&&na&&0<na.length&&v.forEach(na,function(sa){if(sa){var ya=U.attributes[sa.name];n.isDefined(ya)&&(ya=this._getDomainValue(sa.domain,ya),n.isDefined(ya)&&(U.attributes[sa.name]=ya))}},this);da.push(U);this._visibleRasters.push(U)}this._resolve([da,null,!0],null,P,V)}))}var ka=J.value,
la=J.value,ma=0,ha=0,Z=this,W=this.objectIdField,Q=[];fa=O.requestParams.renderingRules;var ia=J.processedValues,R=this.renderingRule&&r.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(fa&&ia&&fa.length===ia.length){var S=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;v.forEach(fa,function(ja,na){if(ja.functionName){var oa={name:S+ja.functionName.replace(/ /gi,"_"),value:ia[na].replace(/ /gi,"").split(",")};Q.push(oa);R&&R===r.toJson(ja.toJson())&&(ka=ia[na])}})}fa=
this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(J.catalogItems){var N=0,X=J.catalogItems.features.length;var aa=0;var ea=Array(X);var Y=Array(X);var T=Array(X);if(J.properties&&J.properties.Values){X=J.properties.Values.length;for(ma=0;ma<X;ma++)-1<J.properties.Values[ma].toLowerCase().indexOf("nodata")&&aa++;var ca=X-aa;for(ma=0;ma<X;ma++){aa=
!0;if(-1<J.properties.Values[ma].toLowerCase().indexOf("nodata")){var M=ca++;fa||(aa=!1,ea.length--,Y.length--,T.length--)}else M=N++;aa&&(ea[M]=J.catalogItems.features[ma],Y[M]=J.properties.Values[ma],T[M]=ea[M].attributes[W])}}else{for(ma=0;ma<X;ma++)ea[ma]=J.catalogItems.features[ma],T[ma]=ea[ma].attributes[W];Y=null}}this._visibleRasters=[];(J=-1<ka.toLowerCase().indexOf("nodata"))&&!fa&&(ea=[],Y=[],T=[]);if(ka&&!ea&&!J){W="ObjectId";ea=[];var U=new H(new e(this.fullExtent),null,{ObjectId:0});
ea.push(U)}var da=[];ea?!this._map.spatialReference.equals(this.spatialReference)&&T&&0<T.length?k({url:this._url.path+"/query",content:{f:"json",objectIds:T.join(","),returnGeometry:!0,outSR:r.toJson(Z._map.spatialReference.toJson()),outFields:W},handleAs:"json",callbackParamName:"callback",load:function(ja){if(0===ja.features.length)Z._resolve([da,null,null],null,P,V);else{for(ma=0;ma<ja.features.length;ma++)for(ha=0;ha<ea.length;ha++)ea[ha].attributes[W]==ja.features[ma].attributes[W]&&(ea[ha].geometry=
new g(ja.features[ma].geometry),ea[ha].geometry.setSpatialReference(Z._map.spatialReference));ba.call(Z)}},error:function(ja){Z._resolve([da,null,null],null,P,V)}}):ba.call(this):this._resolve([da,null,null],null,P,V)},getVisibleRasters:function(){var J=this._visibleRasters,O=[],P;for(P in J)J.hasOwnProperty(P)&&O.push(J[P]);return O},_getDomainFields:function(J){if(J){var O=[];v.forEach(J,function(P){if(P.domain){var fa={};fa.name=P.name;fa.domain=P.domain;O.push(fa)}});return O}},_getDomainValue:function(J,
O){if(J&&J.codedValues){var P;v.some(J.codedValues,function(fa){return fa.code===O?(P=fa.name,!0):!1});return P}},_requestData:function(J,O,P){this._rasterReadPromise&&this._rasterReadPromise.cancel();J=G.clone(J);var fa=J._normalize(!0);this._prepareGetImageParameters(fa,O,P);O=G.clone(this._params);this._cleanupRequestParams(O);O.extent=J;O.format=O.format||(10.3<=this.version?"lerc":"jpgpng");"lerc"===O.format.toLowerCase()&&!O.lercVersion&&10.5<=this.version&&(O.lercVersion=2);this._params.time&&
this._isMultidimensionalCRF()&&!this._isTimeSupportedOnCRF()&&delete O.time;P=null;this._useBrowserDecoding()&&(P=new E({ctx:this._context}));O={imageServiceParameters:O,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:P?G.hitch(P,"decode"):null};this._rasterReadPromise=this.raster.read(O,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(J){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=J,this.hasDataChanged=
!0,this._setPixelData(J))},_setPixelData:function(J){J=this._clonePixelData(J);this.pixelFilter&&this.pixelFilter(J);this.pixelData=J;this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this._drawPixelData(),this._rasterReadPromise=null)},_clonePixelData:function(J){if(null===J||void 0===J)return J;var O={};J.extent&&(O.extent=G.clone(J.extent));J=J.pixelBlock;if(null===J||void 0===J)return O;O.pixelBlock=J.clone();return O},_setDefaultFilter:function(){},_getPixelBlockFromCanvas:function(J,
O,P){J=J.getImageData(0,0,O,P).data;var fa=O*P,V=0,ba=0,ka=new Uint8Array(fa),la=new Uint8Array(fa),ma=new Uint8Array(fa),ha=new Uint8Array(fa),Z=Infinity,W=Infinity,Q=Infinity,ia=-Infinity,R=-Infinity,S=-Infinity;for(V=0;V<fa;V++){var N=J[ba++];var X=J[ba++];var aa=J[ba++];Z=Z<N?Z:N;ia=ia>N?ia:N;W=W<X?W:X;R=R>X?R:X;Q=Q<aa?Q:aa;S=S>aa?S:aa;ka[V]=N;la[V]=X;ma[V]=aa;ha[V]=J[ba++]&1}return new z({width:O,height:P,pixels:[ka,la,ma],pixelType:"U8",mask:ha,statistics:[{minValue:Z,maxValue:ia},{minValue:W,
maxValue:R},{minValue:Q,maxValue:S}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var J=this._url.path+"/multiDimensionalInfo",O=new w(l._dfdCanceller);if(this._multidimensionalInfo)return O.resolve(this._multidimensionalInfo),O;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(O._pendingDfd=
k({url:J,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),O._pendingDfd.then(G.hitch(this,function(P){this._multidimensionalInfo=P.multidimensionalInfo;O.callback(P.multidimensionalInfo)}),function(P){O.errback(P)})):(J=Error("Layer does not support multidimensional info"),J.log=!!f.isDebug,O.errback(J));return O},getStatistics:function(J){var O=new w(l._dfdCanceller);if(J&&this._cachedVariableStats[J])O.resolve(this._cachedVariableStats[J]);else{var P={f:"json"};J&&(P.variable=J);
O._pendingDfd=k({url:this._url.path+"/statistics",content:P,handleAs:"json",callbackParamName:"callback"});O._pendingDfd.then(G.hitch(this,function(fa){fa=fa.statistics||fa.statitsics;var V=[];fa&&fa[0]&&null!=fa[0].min?fa.forEach(function(ba){V.push([ba.min,ba.max,ba.mean,ba.standardDeviation])}):V=this.minValues&&this.minValues.length?this.minValues.map(function(ba,ka){return[ba,this.maxValues[ka],this.meanValues[ka],this.stdvValues[ka]]}.bind(this)):fa;J&&(this._cachedVariableStats[J]=V);O.callback(V)}),
function(fa){O.errback(fa)})}return O},getDefaultMultidimensionalDefinition:function(){var J=new w(l._dfdCanceller);if(this._defaultMultidimensionalDefinition)return J.resolve(G.clone(this._defaultMultidimensionalDefinition)),J;J._pendingDfd=this.getMultidimensionalInfo();J._pendingDfd.then(G.hitch(this,function(O){O=this._getDefaultMultidimensionalDefinition(O);J.callback(O)}),function(O){J.errback(O)});return J},_getDefaultMultidimensionalDefinition:function(J,O,P){var fa,V=[],ba=this.defaultVariable||
this.raster&&this.raster.defaultVariable;variableName=ba||"";dimensions=variableName.length?J.variables.filter(function(ka){return ka.name===variableName})[0].dimensions:J.variables[0].dimensions;P&&(variableName=ba||J.variables[0].name);for(fa in dimensions)dimensions.hasOwnProperty(fa)&&(O||"StdTime"!==dimensions[fa].name)&&(J=dimensions[fa],V.push(new B({variableName:variableName,dimensionName:J.name,isSlice:!J.hasRanges,values:[this._getDefaultDimensionValue(J)]})));this._defaultMultidimensionalDefinition=
V;return G.clone(V)},_getDefaultDimensionValue:function(J){if(J&&J.values&&J.values.length){var O=Infinity,P;if(J.hasRanges)return J.values[0];if(J.name&&"stdz"===J.name.toLowerCase()){for(P=0;P<J.values.length;P++){var fa=J.values[P];var V=Math.abs(fa-0);if(V<O){O=V;var ba=fa}if(0===V)break}return ba}return J.extent[0]}},_setDefaultMultidimensionalDefinition:function(J){var O,P={};this.getDefaultMultidimensionalDefinition().then(G.hitch(this,function(fa){O=fa;0<O.length&&(this.mosaicRule?(P=G.clone(this.mosaicRule),
P.multidimensionalDefinition=O):this.defaultMosaicRule?(P=G.clone(this.defaultMosaicRule),P.multidimensionalDefinition=O):P=new x({multidimensionalDefinition:O}),this.setMosaicRule(P,J))}))},_setDefaultRenderingRule:function(J){var O={},P=this.renderingRule;if(!P&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&!this.bandIds&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())O.rasterFunction=this.rasterFunctionInfos[0].name;
else if("esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version&&(!P||"Resample"!==P.functionName)){var fa="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;O.rasterFunction="Resample";O.rasterFunctionArguments={ResamplingType:fa,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}};P&&(O.rasterFunctionArguments.Raster=P.toJson())}O.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new y(O),this.setRenderingRule(this.defaultRenderingRule,J))},_cleanupRequestParams:function(J){if(!J)return J;
if(J.time&&J.mosaicRule){var O=new x(r.fromJson(J.mosaicRule));O=this._filterOutTimeDimension(O);J.mosaicRule=r.toJson(O.toJson())}O="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent renderer".split(" ");for(var P in O)J.hasOwnProperty(O[P])&&delete J[O[P]];return J},_filterOutTimeDimension:function(J){if(this._isMultidimensionalCRF())return J;if(J&&J.multidimensionalDefinition&&0<J.multidimensionalDefinition.length){var O=v.filter(J.multidimensionalDefinition,
function(P){return"StdTime"!==P.dimensionName});J.multidimensionalDefinition=O}return J},_removeVisualizationStretchFunction:function(J){var O=J&&J.functionName;if(!O||"stretch"!==O.toLowerCase())return J;var P=J.functionArguments.Raster;return P&&P.functionName&&v.some(this.rasterFunctionInfos,function(fa){return P.functionName===fa.name})?P:J},_isMultidimensionalCRF:function(){return 10.71<=this.version&&this.hasMultidimensions&&this.timeInfo&&!(this.objectIdField&&this.fields&&1<this.fields.length)},
_isTimeSupportedOnCRF:function(){return 10.8<=this.version},_cleanupMultidimensionalDefinition:function(J){J&&J.multidimensionalDefinition&&(J.multidimensionalDefinition=J.multidimensionalDefinition.filter(function(O){return!(!O.variableName&&!O.dimensionName)}),0===J.multidimensionalDefinition.length&&(J.multidimensionalDefinition=null))},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||
"esriImageServiceDataTypeScientific"===this.serviceDataType||this.hasMultidimensions},_isVectorData:function(J){J=(J=J||this)&&J.serviceDataType;return"esriImageServiceDataTypeVector-UV"===J||"esriImageServiceDataTypeVector-MagDir"===J},_isRenderingRuleAProcessingTemplate:function(J){var O=J&&J.functionName;return!O||J.functionArguments?!1:v.some(O&&(this.rasterFunctionInfos||[]),function(P){return P&&P.name&&P.name.toLowerCase()===O.toLowerCase()})},_getRenderingRuleId:function(J){var O=J&&J.functionName;
if(O){if(this._isRenderingRuleAProcessingTemplate(J))return O;var P=this._customRenderingRuleId[O];if(P){if(P!==J){for(var fa in this._customRenderingRuleId)if(this._customRenderingRuleId[fa]===J)return fa;for(P=0;this._customRenderingRuleId[V];)P+=1;var V;this._customRenderingRuleId[O+P]=J}}else this._customRenderingRuleId[O]=J;return O}},_createPixelData:function(J){J=new z({width:2,height:2,pixels:J,pixelType:this.pixelType,statistics:J});var O=this.fullExtent.getCenter();O=new e(O.x,O.y,O.x+this.pixelSizeX,
O.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:J,extent:O}},_convertRendererToRenderingRule:function(J){var O=J&&J.declaredClass;if(!O||"esri.renderer.UniqueValueRenderer"!==O&&"esri.renderer.ClassBreaksRenderer"!==O&&"esri.renderer.StretchRenderer"!==O&&"esri.renderer.ShadedReliefRenderer"!==O&&"esri.renderer.ColormapRenderer"!==O)return null;var P=null;"esri.renderer.StretchRenderer"===O?P=J.toRenderingRule({convertToColormap:10.6>this.version}):"esri.renderer.ClassBreaksRenderer"===
O?P=this._convertClassifyRenderer(J):"esri.renderer.UniqueValueRenderer"===O?P=this._convertUniqueValueRenderer(J):"esri.renderer.ShadedReliefRenderer"===O?P=this._convertShadedReliefRenderer(J):"esri.renderer.ColormapRenderer"===O&&(P=this._convertColormapRenderer(J));return P},_getValueField:function(J){if(J&&J.length){var O,P;v.some(J,function(fa){if((P=fa.name)&&"value"===P.toLowerCase())return O=P,!0});return O}},_convertColormapRenderer:function(J){var O=new y;O.functionName="Colormap";O.functionArguments=
{};J=J.colormapInfos.map(function(P){return[P.value].concat(P.color)});O.functionArguments.Colormap=J;return O},_convertShadedReliefRenderer:function(J){var O=new y;O.functionName="Hillshade";var P="traditional"===J.hillshadeType?0:1,fa="none"===J.scalingType?1:3,V={HillshadeType:P,SlopeType:fa,ZFactor:J.zFactor};0===P&&(V.Azimuth=J.azimuth,V.Altitude=J.altitude);3===fa&&(V.PSPower=J.pixelSizePower,V.PSZFactor=J.pixelSizeFactor);O.functionArguments=V;O.variableName="Raster";J.colorRamp&&(O.functionName=
"ShadedRelief",V.Colormap=u.convertColorRampToColormap(J.colorRamp,256));return O},_convertClassifyRenderer:function(J){var O=[],P=[],fa=[],V=[],ba;var ka=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);var la=this.hasRasterAttributeTable;if(ka){la=this._rasterFunctionTemplateInfos[ka]?this._rasterFunctionTemplateInfos[ka].hasRasterAttributeTable:this.hasRasterAttributeTable;var ma=this._renderingRuleAttributeTable[ka];var ha=this._rasterFunctionTemplateInfos[ka]}var Z=ma&&ma.features?
ma.features:this._rasterAttributeTableFeatures;var W=this._getValueField(ma&&ma.fields?ma.fields:this._rasterAttributeTableFields);la&&Z?(v.forEach(J.infos,function(Q,ia){var R,S=Q.symbol.color;S.a&&v.forEach(Z,function(N){R=N.attributes[J.attributeField];(R>=Q.minValue&&R<Q.maxValue||ia===J.infos.length-1&&R>=Q.minValue)&&V.push([N.attributes[W],S.r,S.g,S.b])},this)},this),ka=ha&&ha.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(V,ka),ka=new y,ka.functionName="Colormap",ka.functionArguments=
{},ka.functionArguments.Colormap=V,ka.variableName="Raster"):(v.forEach(J.infos,function(Q,ia){ba=Q.symbol&&Q.symbol.color;ba.a?(0===ia?O.push.call(O,Q.minValue,Q.maxValue+1E-4):O.push.call(O,Q.minValue+1E-4,Q.maxValue+1E-4),P.push(ia),V.push([ia,ba.r,ba.g,ba.b])):fa.push(Q.minValue,Q.maxValue)}),ka=ha&&ha.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(V,ka),ka=new y,ka.functionName="Remap",ka.functionArguments={InputRanges:O,OutputValues:P,NoDataRanges:fa},ka.variableName="Raster",
ma=new y,ma.functionName="Colormap",ma.functionArguments={Colormap:V,Raster:ka},ka=ma);return ka},_convertUniqueValueRenderer:function(J){var O=[],P=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);if(P){var fa=this._renderingRuleAttributeTable[P];var V=this._rasterFunctionTemplateInfos[P]}var ba=fa&&fa.features?fa.features:this._rasterAttributeTableFeatures;var ka=(P=fa&&fa.fields?fa.fields:this._rasterAttributeTableFields)&&P.length?this._getValueField(P):"Value";v.forEach(J.infos,
function(la){var ma=la.symbol.color;ma.a&&(J.attributeField!==ka&&ba?v.forEach(ba,function(ha){ha.attributes[J.attributeField]==la.value&&O.push([ha.attributes[ka],ma.r,ma.g,ma.b])},this):O.push([la.value,ma.r,ma.g,ma.b]))},this);this._adjustColormapToPixelTypeRange(O,V&&V.pixelType||this.pixelType);V=new y;V.functionName="Colormap";V.functionArguments={};V.functionArguments.Colormap=O;V.variableName="Raster";return V},_adjustColormapToPixelTypeRange:function(J,O){var P=this._pixelTypeRanges[O];P&&
J.push([Math.floor(P[0]-1),0,0,0],[Math.ceil(P[1]+1),0,0,0]);return J},_combineRenderingRule:function(J,O){if(!J||!O)return J||O;var P=function(V){var ba=V.Raster;return ba=ba&&"esri.layers.RasterFunction"===ba.declaredClass?P(ba.functionArguments):V},fa=G.clone(J);"none"!==O.functionName.toLocaleLowerCase()&&(P(fa.functionArguments).Raster=O);return fa},_isItemLevelRasterFunction:function(J){var O=J&&J.functionName;if(!O||!this._hasItemLevelRFT)return!1;var P=!1;v.some(this.rasterFunctionInfos,function(fa){if(fa&&
fa.name===O){if(1===fa.functionType||2===fa.functionType)P=!0;return!0}});return P},_getServiceLevelRenderingRule:function(J){if(!this._hasItemLevelRFT||!J)return J;J=new y(J.toJson());var O=J.functionArguments;for(var P;;)if((P=O&&O.Raster)&&P.functionArguments&&P.functionArguments.Raster)O=P,O=O.functionArguments;else{this._isItemLevelRasterFunction(P)&&delete O.Raster;break}return J},_getItemLevelRenderingRule:function(J){if(!this._hasItemLevelRFT||!J)return null;if(this._isItemLevelRasterFunction(J))return J;
J=new y(J.toJson());for(J=J.functionArguments;;)if((J=J&&J.Raster)&&J.functionArguments&&J.functionArguments.Raster)J=J.functionArguments;else{if(this._isItemLevelRasterFunction(J))return J;break}},_resolve:function(J,O,P,fa,V){O&&this[O].apply(this,J);P&&P.apply(null,J);fa&&l._resDfd(fa,J,V)},_toggleTime:function(){var J=this._map;this.timeInfo&&this.useMapTime&&J&&!this.suspended?(this._timeConnect||(this._timeConnect=c.connect(J,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(J.timeExtent)):
(c.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(J,O){this.useMapTime=J;this._toggleTime();!O&&this._map&&this.refresh(!0)},_setTime:function(J){this._params&&(this._params.time=J?J.toJson().join(","):null)},onResume:function(){if(this._isScientificData()||this.timeInfo)this._originalGetImageUrl=this._originalGetImageUrl||this.getImageUrl.bind(this),this.getImageUrl=q(this._originalGetImageUrl,200),this._debounceGetImageTimer&&clearTimeout(this._debounceGetImageTimer),
this._debounceGetImageTimer=setTimeout(function(){this.getImageUrl=this._originalGetImageUrl}.bind(this),5E3);this.inherited(arguments)},_onTimeExtentChangeHandler:function(J){this.suspended||(this._setTime(J),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()},getColormap:function(J){var O=this._url.path+"/colormap",P=new w(l._dfdCanceller),fa={f:"json"};J&&J.renderingRule&&(fa.renderingRule=r.toJson(J.renderingRule.toJson()));this.hasColormap?(P._pendingDfd=
k({url:O,content:fa,handleAs:"json",callbackParamName:"callback"}),P._pendingDfd.then(function(V){P.callback(V)},function(V){P.errback(V)})):(J=Error("Layer does not support colormap"),J.log=!!f.isDebug,P.errback(J));return P},getRenderingRuleColormap:function(J){var O=new w(l._dfdCanceller);if(!J||!J.renderingRule)return O.errback(Error("Rendering rule is not specified")),O;J=J.renderingRule;var P=this._getRenderingRuleId(J);this._renderingRuleColormap&&P&&this._renderingRuleColormap.hasOwnProperty(P)?
O.resolve(this._renderingRuleColormap[P]):O=this.getColormap({renderingRule:J}).then(G.hitch(this,function(fa){fa=fa&&fa.colormap;P&&(this._renderingRuleColormap[P]=fa);return fa}));return O},_handleClipFunctionInRenderingRule:function(J){J=G.clone(J);var O=J.arguments,P=O.ClippingGeometry&&O.ClippingGeometry.value,fa=O.Extent&&O.Extent.value;O.ClippingRaster&&O.ClippingRaster.value||P||fa||(O=this._map.extent.toJson(),J.arguments.Extent.value=O,J.functionArguments.Extent.value=O,J._isTemplate&&(J._templateJson.arguments.Extent.value=
O));return J}});G.setObject("layers.ImageServiceLayerMixin",K,t);return K})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point ./RasterFunction".split(" "),function(K,G,w,v,r,f,c){var a=K(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],itemRenderingRule:null,constructor:function(b){G.isObject(b)&&
(G.mixin(this,b),b.mosaicMethod&&(this.method=b.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),b.mosaicOperation&&(this.operation=b.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),b.fids&&(this.objectIds=b.fids),b.viewpoint&&(this.viewpoint=new f(b.viewpoint)),b.itemRenderingRule&&(this.itemRenderingRule=new c(b.itemRenderingRule)),
this.multidimensionalDefinition=b.multidimensionalDefinition||[])},toJson:function(){var b=null,p=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(p){b=[];for(var q=0;q<p;q++)b.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[q].declaredClass?this.multidimensionalDefinition[q].toJson():this.multidimensionalDefinition[q])}b={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:G.clone(this.lockRasterIds),
viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:G.clone(this.objectIds),mosaicOperation:this.operation,multidimensionalDefinition:b,itemRenderingRule:this.itemRenderingRule?this.itemRenderingRule.toJson():null};return r.filter(b,function(t){if(null!==t)return!0})},_getMethodEnum:function(b){if(b){var p=a.METHOD_NONE;switch(b.toLowerCase()){case "byattribute":p=a.METHOD_ATTRIBUTE;break;case "center":p=a.METHOD_CENTER;break;case "lockraster":p=a.METHOD_LOCKRASTER;break;case "nadir":p=a.METHOD_NADIR;
break;case "northwest":p=a.METHOD_NORTHWEST;break;case "seamline":p=a.METHOD_SEAMLINE;break;case "viewpoint":p=a.METHOD_VIEWPOINT}return p}},_getOperatorEnum:function(b){if(b)switch(b.toLowerCase()){case "first":return a.OPERATION_FIRST;case "last":return a.OPERATION_LAST;case "max":return a.OPERATION_MAX;case "min":return a.OPERATION_MIN;case "blend":return a.OPERATION_BLEND;case "mean":return a.OPERATION_MEAN;case "sum":return a.OPERATION_SUM}}});G.mixin(a,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",
METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});G.setObject("layers.MosaicRule",a,v);return a})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(K,G,w,v,r){K=K(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(f){G.isObject(f)&&G.mixin(this,f)},toJson:function(){var f={variableName:this.variableName,dimensionName:this.dimensionName,values:G.clone(this.values),isSlice:this.isSlice};return r.filter(f,function(c){return null!==c})}});G.setObject("layers.DimensionalDefinition",K,v);return K})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){var e,d,g,u,x,y;G=G(p,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(E){this.imageServiceUrl=E;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(E,A,F){var H=this,I=new v(n._dfdCanceller);if(10>a("ie"))throw"This browser is not supported.";
if(!E.imageServiceParameters)throw"Insufficient parameters to read data";var L=w.clone(E.imageServiceParameters),J=E.pixelType;r.some(this.validPixelTypes,function(ka){return ka===J})||(L.pixelType="F32");r.some(this.validFormats,function(ka){return ka.toLowerCase()===L.format.toLowerCase()})||(L.format="lerc");var O=E.decodeFunc,P;this._prepareGetImageParameters(L);var fa=L.width,V=L.height,ba=L.extent;delete L.width;delete L.height;delete L.extent;I._pendingDfd=q({url:this.imageServiceUrl+"/exportImage",
handleAs:"arraybuffer",content:w.mixin(L,{f:"image"}),load:function(ka){H.decode(ka,{width:fa,height:V,planes:null,pixelType:J,noDataValue:L.noData,format:L.format,decodeFunc:O}).then(function(la){P={pixelBlock:la,extent:ba};H._resolve([P,L],"onRasterReadComplete",A,I)},function(la){H._resolve([la],null,F,I,!0)})},error:function(ka){H._resolve([ka],null,F,I,!0)}});return I.promise},decode:function(E,A){if(void 0===A||null===A)throw"missing decode options";var F;A.format&&(F=A.format.toUpperCase());
"BSQ"!==F&&"BIP"!==F&&(F=this._getFormat(E));var H=A.decodeFunc;if(void 0===H||null===H)H=this._getFormatDecoderDfd(F);return H(E,A)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(E){if(E.size&&E.bbox){var A=E.size.split(",");E.width=parseFloat(A[0]);E.height=parseFloat(A[1]);E.extent||(A=E.bbox.split(","),E.extent=new t(parseFloat(A[0]),parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]),new m(E.bboxSR)))}else{if(!E.width||Math.floor(E.width)!==E.width||!E.height||Math.floor(E.height)!==
E.height)throw"Incorrect Image Dimensions";if(!E.extent||"esri.geometry.Extent"!==E.extent.declaredClass)throw"Incorrect extent";A=E.extent;var F=A.spatialReference.wkid||c.toJson(A.spatialReference.toJson());delete E._ts;w.mixin(E,{bbox:A.xmin+","+A.ymin+","+A.xmax+","+A.ymax,imageSR:F,bboxSR:F,size:E.width+","+E.height},E.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(E,A,F){var H=E.ymax-E.ymin,I=E.xmax-E.xmin;F>=A?E.ymax=E.ymin+I*A/F:E.xmax=E.xmin+H*F/A;return E},
_resolve:function(E,A,F,H,I){A&&this[A].apply(this,E);F&&F.apply(null,E);H&&n._resDfd(H,E,I)},_getFormatDecoderDfd:function(E){var A=null;switch(E){case "LERC":A=this._decodeLerc;break;case "LERC2":A=this._decodeLerc2;break;case "JPEG":A=this._decodeJpeg;break;case "PNG":A=this._decodePng;break;case "BSQ":A=this._decodeBsq;break;case "BIP":A=this._decodeBip;break;case "TIFF":A=this._decodeTiff;break;default:A=function(F,H){throw"The raster format is not supported";}}A=w.hitch(this,A);return function(F,
H){var I=new v;try{if("LERC"===E||!0===x){var L=A(F,H);I.resolve(L)}else y.then(function(){L=A(F,H);I.resolve(L)})}catch(J){I.reject(J)}return I}},_getFormat:function(E){E=new Uint8Array(E,0,10);var A="";if(255===E[0]&&216===E[1])A="JPEG";else if(137===E[0]&&80===E[1]&&78===E[2]&&71===E[3])A="PNG";else if(67===E[0]&&110===E[1]&&116===E[2]&&90===E[3]&&73===E[4]&&109===E[5]&&97===E[6]&&103===E[7]&&101===E[8]&&32===E[9])A="LERC";else if(76===E[0]&&101===E[1]&&114===E[2]&&99===E[3]&&50===E[4]&&32===E[5])A=
"LERC2";else if(-1<String.fromCharCode.apply(null,E).toLowerCase().indexOf("error"))A="ERROR";else if(73===E[0]&&73===E[1]&&42===E[2]&&0===E[3]||77===E[0]&&77===E[1]&&0===E[2]&&42===E[3])A="TIFF";return A},_validateDecodeParams:function(E){if(!E.height||Math.floor(E.height)!==E.height)throw"Height not provided.";if(!E.width||Math.floor(E.width)!==E.width)throw"Width not provided.";},_decodeJpeg:function(E,A){if(!e)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(A);var F=(new e).decode(E);
if(!D(F,A))throw"The decoded image dimensions are incorrect.";var H=[],I;for(I=0;I<F.pixels.length;I++){var L=F.pixels[I];H.push(this._calculateBandStatistics(L))}return new k({width:F.width,height:F.height,pixels:F.pixels,pixelType:"U8",mask:F.mask,statistics:H})},_decodePng:function(E,A){if(!d)throw"The png decoder module is not loaded.";this._validateDecodeParams(A);var F=new Uint8Array(E),H=new d(F);F=new Uint8Array(A.width*A.height*4);H.copyToImageData(F,H.decodePixels());var I=H=0;I=new Uint8Array(A.width*
A.height);for(H=0;H<A.width*A.height;H++)I[H]=F[4*H+3];var L=new k({width:A.width,height:A.height,pixels:[],pixelType:"U8",mask:I,statistics:[]});for(H=0;3>H;H++){var J=new Uint8Array(A.width*A.height);for(I=0;I<A.width*A.height;I++)J[I]=F[4*I+H];L.addData({pixels:J,statistics:this._calculateBandStatistics(J)})}return L},_decodeBsq:function(E,A){if(!g)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(A);C=A.noDataValue;A.pixelType=z(A.pixelType);var F=g.decodeBSQ(E,{bandCount:A.planes,
width:A.width,height:A.height,pixelType:B,noDataValue:C}),H=[],I,L=null;for(I=0;I<F.pixels.length;I++)L=F.pixels[I],H.push(this._calculateBandStatistics(L));return new k({width:A.width,height:A.height,pixels:F.pixels,pixelType:A.pixelType,mask:F.maskData,statistics:H})},_decodeBip:function(E,A){this._validateDecodeParams(A);C=A.noDataValue;A.pixelType=z(A.pixelType);var F=g.decodeBIP(E,{bandCount:A.planes,width:A.width,height:A.height,pixelType:B,noDataValue:C}),H=[],I,L=null;for(I=0;I<F.pixels.length;I++)L=
F.pixels[I],H.push(this._calculateBandStatistics(L));return new k({width:A.width,height:A.height,pixels:F.pixels,pixelType:A.pixelType,mask:F.maskData,statistics:H})},_decodeTiff:function(E,A){this._validateDecodeParams(A);C=A.noDataValue;A.pixelType=z(A.pixelType);var F=u.decode(E),H=[],I,L=null;for(I=0;I<F.pixels.length;I++)L=F.pixels[I],H.push(this._calculateBandStatistics(L,F.maskData));return new k({width:F.width,height:F.height,pixels:F.pixels,pixelType:F.pixelType,mask:F.maskData,statistics:H})},
_decodeLerc:function(E,A){this._validateDecodeParams(A);C=A.noDataValue;A.pixelType=z(A.pixelType);for(var F=0,H,I=0,L,J=E.byteLength-10;I<J;){var O=l.decode(E,{inputOffset:I,encodedMaskData:H,returnMask:0===F?!0:!1,returnEncodedMask:0===F?!0:!1,returnFileInfo:!0,pixelType:B,noDataValue:C});I=O.fileInfo.eofOffset;0===F&&(H=O.encodedMaskData,L=new k({width:A.width,height:A.height,pixels:[],pixelType:A.pixelType,mask:O.maskData,statistics:[]}));F++;if(!D(O,A))throw"The decoded image dimensions are incorrect";
L.addData({pixels:O.pixelData,statistics:{minValue:O.minValue,maxValue:O.maxValue,noDataValue:O.noDataValue}})}return L},_decodeLerc2:function(E,A){this._validateDecodeParams(A);C=A.noDataValue;A.pixelType=z(A.pixelType);for(var F=0,H,I,L=0,J,O=E.byteLength-10,P=[];L<O;){I=h.decode(E,{inputOffset:L,maskData:H,returnFileInfo:!0});L=I.fileInfo.eofOffset;0===F&&(H=I.maskData,J=new k({width:A.width,height:A.height,pixels:[],pixelType:I.fileInfo.pixelType,mask:I.maskData,statistics:[]}));I.fileInfo.mask&&
0<I.fileInfo.mask.numBytes&&P.push(I.maskData);F++;if(!D(I,A))throw"The decoded image dimensions are incorrect";if(1<I.dimCount&&I.pixelData&&I.pixelData.length===I.width*I.height*I.dimCount){I.pixelData=I.pixelData.slice(-I.width*I.height);var fa=I.dimStats&&I.dimStats.minValues&&I.dimStats.minValues[I.dimCount-1],V=I.dimStats&&I.dimStats.maxValues&&I.dimStats.maxValues[I.dimCount-1];null!=fa&&null!=V&&(I.minValue=fa,I.maxValue=V)}J.addData({pixels:I.pixelData,statistics:{minValue:I.minValue,maxValue:I.maxValue,
noDataValue:I.noDataValue}})}if(1<P.length){O=J.width*J.height;J.bandMasks=P;H=new Uint8Array(O);H.set(P[0]);for(I=1;I<P.length;I++)for(F=P[I],L=0;L<O;L++)H[L]&=F[L];J.maskData=H}return J},_calculateBandStatistics:function(E,A){var F=Infinity,H=-Infinity,I=E.length,L,J=0;if(A)for(L=0;L<I;L++)A[L]&&(J=E[L],F=J<F?J:F,H=J>H?J:H);else for(L=0;L<I;L++)J=E[L],F=J<F?J:F,H=J>H?J:H;return{minValue:F,maxValue:H}},_loadRasterFormatModules:function(){x||(y||(y=new v),10>a("ie")?y.isRejected()||y.reject("unsupported browser version"):
K(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(E,A,F,H){e=E;d=A;g=F;u=H;x=!0;y.isResolved()||y.resolve(!0)}))}});var B=null,C=null,z=function(E){if("U1"===E||"U2"===E||"U4"===E||"U8"===E)return C=Math.pow(2,8)-1,B=Uint8Array,"U8";"U16"===E?(C=C||Math.pow(2,16)-1,B=Uint16Array):"U32"===E?(C=C||Math.pow(2,32)-1,B=Uint32Array):"S8"===E?(C=C||0-Math.pow(2,7),B=Int8Array):"S16"===E?(C=C||0-Math.pow(2,15),B=Int16Array):
"S32"===E?(C=C||0-Math.pow(2,31),B=Int32Array):B=Float32Array;return E},D=function(E,A){return E.height!==A.height||E.width!==A.width?!1:!0};w.setObject("layers.Raster",G,b);return G})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(K,G,w,v){K=K([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],maskIsAlpha:!1,validPixelCount:null,constructor:function(r){if(r){if(!r.width||
Math.floor(r.width)!==r.width)throw"PixelBlock: incorrect width";if(!r.height||Math.floor(r.height)!==r.height)throw"PixelBlock: incorrect height";if(!r.pixels)throw"PixelBlock: pixel data not present";this.width=r.width;this.height=r.height;this.pixels=r.pixels;this.pixelType=r.pixelType||null;this.statistics=r.statistics;this.mask=r.mask||null;this.maskIsAlpha=r.maskIsAlpha||!1;r=r.validPixelCount;null==r&&(r=this.mask?this._getValidPixelCount(this.mask):this.width*this.height);this.validPixelCount=
r}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?0:this.statistics.length},addData:function(r){if(!r.pixels||!r.statistics)throw"Pixel data or statistics are not present";if(r.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(r.statistics);this.pixels.push(r.pixels)},getAsRGBA:function(){var r=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(r);
break;default:this._fillFrom8Bit(r)}return new Uint8ClampedArray(r)},getAsRGBAFloat:function(){var r=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(r);return r},clone:function(r){r=r||this;var f=new this.constructor;f.width=r.width;f.height=r.height;f.pixelType=r.pixelType;f.maskIsAlpha=r.maskIsAlpha;r.mask&&(f.mask=new Uint8Array(r.mask));var c,a;if(r.pixels){f.pixels=[];var b=(a=r.pixels.length)&&r.pixels[0].slice;for(c=0;c<a;c++)f.pixels[c]=b?r.pixels[c].slice(0,r.pixels[c].length):
new r.pixels[c].constructor(r.pixels[c])}if(r.statistics)for(f.statistics=[],a=r.statistics.length,c=0;c<a;c++)f.statistics[c]=G.clone(r.statistics[c]);r=r.validPixelCount;null==r&&(r=f.mask?this._getValidPixelCount(f.mask):f.width*f.height);return f},clamp:function(r){if("F64"!==r&&"F32"!==r){switch(r){case "U8":var f=[0,255];break;case "U16":f=[0,65535];break;case "U32":f=[0,4294967295];break;case "S8":f=[-128,127];break;case "S16":f=[-32768,32767];break;case "S32":f=[-2147483648,2147483647];break;
default:f=[-3.4*1E39,3.4*1E39]}var c=f[0];f=f[1];var a=this.pixels,b=this.width*this.height,p=a.length,q,t,m=[];for(q=0;q<p;q++){var n=this._createEmptyBand(r,b);var k=a[q];for(t=0;t<b;t++){var l=k[t];n[t]=l>f?f:l<c?c:l}m.push(n)}this.pixels=m;this.pixelType=r}},calculateStatistics:function(){var r,f=[],c=this.mask;for(r=0;r<this.pixels.length;r++){var a=this.pixels[r];f.push(this._calculateBandStatistics(a,c))}this.statistics=f},_getValidPixelCount:function(r){var f,c=0;for(f=0;f<r.length;f++)r[f]&&
c++;return c},_createEmptyBand:function(r,f){switch(r){case "U8":var c=new Uint8Array(f);break;case "U16":c=new Uint16Array(f);break;case "U32":c=new Uint32Array(f);break;case "S8":c=new Int8Array(f);break;case "S16":c=new Int16Array(f);break;case "S32":c=new Int32Array(f);break;case "U32":c=new Uint32Array(f);break;case "F32":c=new Float32Array(f);break;case "F64":c=new Float64Array(f);break;default:c=new Float32Array(f)}return c},_fillFrom8Bit:function(r){var f=this.pixels,c=this.mask;if(!r||!f||
!f.length)return 0;var a,b;var p=a=b=f[0];3<=f.length&&(a=f[1],b=f[2]);f=new Uint32Array(r);var q=this.width*this.height;if(p.length!==q)return 0;if(c&&c.length===q)if(this.maskIsAlpha)for(r=0;r<q;r++)c[r]&&(f[r]=c[r]<<24|b[r]<<16|a[r]<<8|p[r]);else for(r=0;r<q;r++)c[r]&&(f[r]=-16777216|b[r]<<16|a[r]<<8|p[r]);else for(r=0;r<q;r++)f[r]=-16777216|b[r]<<16|a[r]<<8|p[r]},_fillFromNon8Bit:function(r){var f=this.pixels,c=this.mask,a=this.statistics;if(!r||!f||!f.length)return 0;var b=1,p=0;b=1;a&&0<a.length?
(p=a.map(function(n){return n.minValue}).reduce(function(n,k){return Math.min(n,k)}),b=a.map(function(n){return n.maxValue-n.minValue}).reduce(function(n,k){return Math.max(n,k)}),b=255/b):(b=255,"S8"===this.pixelType?(p=-128,b=127):"U16"===this.pixelType?b=65535:"S16"===this.pixelType?(p=-32768,b=32767):"U32"===this.pixelType?b=4294967295:"S32"===this.pixelType?(p=-2147483648,b=2147483647):"F32"===this.pixelType?(p=-3.4*1E39,b=3.4*1E39):"F64"===this.pixelType&&(p=-Number.MAX_VALUE,b=Number.MAX_VALUE),
b=255/(b-p));r=new Uint32Array(r);a=this.width*this.height;var q=f[0];if(q.length!==a)return 0;if(3<=f.length){var t=f[1];var m=f[2];if(c&&c.length===a)for(f=0;f<a;f++)c[f]&&(r[f]=-16777216|(m[f]-p)*b<<16|(t[f]-p)*b<<8|(q[f]-p)*b);else for(f=0;f<a;f++)r[f]=-16777216|(m[f]-p)*b<<16|(t[f]-p)*b<<8|(q[f]-p)*b}else if(c&&c.length===a)for(f=0;f<a;f++)t=(q[f]-p)*b,c[f]&&(r[f]=-16777216|t<<16|t<<8|t);else for(f=0;f<a;f++)t=(q[f]-p)*b,r[f]=-16777216|t<<16|t<<8|t},_fillFrom32Bit:function(r){var f=this.pixels,
c=this.mask;if(!r||!f||!f.length)return 0;var a,b;var p=a=b=f[0];3<=f.length&&(a=f[1],b=f[2]);var q=this.width*this.height;if(p.length!==q)return 0;var t=0;if(c&&c.length===q)for(f=0;f<q;f++)r[t++]=p[f],r[t++]=a[f],r[t++]=b[f],r[t++]=c[f]&1;else for(f=0;f<q;f++)r[t++]=p[f],r[t++]=a[f],r[t++]=b[f],r[t++]=1},_calculateBandStatistics:function(r,f){var c=Infinity,a=-Infinity,b=r.length,p,q=0;if(f)for(p=0;p<b;p++)f[p]&&(q=r[p],c=q<c?q:c,a=q>a?q:a);else for(p=0;p<b;p++)q=r[p],c=q<c?q:c,a=q>a?q:a;return{minValue:c,
maxValue:a}}});G.setObject("layers.PixelBlock",K,v);return K})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var K={defaultNoDataValue:-3.4027999387901484E38,decode:function(w,v){v=v||{};var r=v.inputOffset||0,f=v.encodedMaskData||null===v.encodedMaskData,c={},a=new Uint8Array(w,r,10);c.fileIdentifierString=String.fromCharCode.apply(null,a);if("CntZImage"!=c.fileIdentifierString.trim())throw"Unexpected file identifier string: "+c.fileIdentifierString;r+=10;a=new DataView(w,
r,24);c.fileVersion=a.getInt32(0,!0);c.imageType=a.getInt32(4,!0);c.height=a.getUint32(8,!0);c.width=a.getUint32(12,!0);c.maxZError=a.getFloat64(16,!0);r+=24;if(!f)if(a=new DataView(w,r,16),c.mask={},c.mask.numBlocksY=a.getUint32(0,!0),c.mask.numBlocksX=a.getUint32(4,!0),c.mask.numBytes=a.getUint32(8,!0),c.mask.maxValue=a.getFloat32(12,!0),r+=16,0<c.mask.numBytes){f=new Uint8Array(Math.ceil(c.width*c.height/8));a=new DataView(w,r,c.mask.numBytes);var b=a.getInt16(0,!0),p=2,q=0;do{if(0<b)for(;b--;)f[q++]=
a.getUint8(p++);else{var t=a.getUint8(p++);for(b=-b;b--;)f[q++]=t}b=a.getInt16(p,!0);p+=2}while(p<c.mask.numBytes);if(-32768!==b||q<f.length)throw"Unexpected end of mask RLE encoding";c.mask.bitset=f;r+=c.mask.numBytes}else 0===(c.mask.numBytes|c.mask.numBlocksY|c.mask.maxValue)&&(f=new Uint8Array(Math.ceil(c.width*c.height/8)),c.mask.bitset=f);a=new DataView(w,r,16);c.pixels={};c.pixels.numBlocksY=a.getUint32(0,!0);c.pixels.numBlocksX=a.getUint32(4,!0);c.pixels.numBytes=a.getUint32(8,!0);c.pixels.maxValue=
a.getFloat32(12,!0);r+=16;f=c.pixels.numBlocksX;a=c.pixels.numBlocksY;f+=0<c.width%f?1:0;b=a+(0<c.height%a?1:0);c.pixels.blocks=Array(f*b);for(q=p=0;q<b;q++)for(t=0;t<f;t++){var m=0;a=new DataView(w,r,Math.min(10,w.byteLength-r));var n={};c.pixels.blocks[p++]=n;var k=a.getUint8(0);m++;n.encoding=k&63;if(3<n.encoding)throw"Invalid block encoding ("+n.encoding+")";if(2===n.encoding)r++;else{if(0!==k&&2!==k){k>>=6;n.offsetType=k;if(2===k)n.offset=a.getInt8(1),m++;else if(1===k)n.offset=a.getInt16(1,
!0),m+=2;else if(0===k)n.offset=a.getFloat32(1,!0),m+=4;else throw"Invalid block offset type";if(1===n.encoding)if(k=a.getUint8(m),m++,n.bitsPerPixel=k&63,k>>=6,n.numValidPixelsType=k,2===k)n.numValidPixels=a.getUint8(m),m++;else if(1===k)n.numValidPixels=a.getUint16(m,!0),m+=2;else if(0===k)n.numValidPixels=a.getUint32(m,!0),m+=4;else throw"Invalid valid pixel count type";}r+=m;if(3!=n.encoding)if(0===n.encoding){k=(c.pixels.numBytes-1)/4;if(k!==Math.floor(k))throw"uncompressed block has invalid length";
a=new ArrayBuffer(4*k);m=new Uint8Array(a);m.set(new Uint8Array(w,r,4*k));a=new Float32Array(a);n.rawData=a;r+=4*k}else 1===n.encoding&&(k=Math.ceil(n.numValidPixels*n.bitsPerPixel/8),a=new ArrayBuffer(4*Math.ceil(k/4)),m=new Uint8Array(a),m.set(new Uint8Array(w,r,k)),n.stuffedData=new Uint32Array(a),r+=k)}}c.eofOffset=r;r=null!=v.noDataValue?v.noDataValue:K.defaultNoDataValue;b=v.encodedMaskData;var l=v.returnMask;p=0;q=c.pixels.numBlocksX;t=c.pixels.numBlocksY;n=Math.floor(c.width/q);m=Math.floor(c.height/
t);k=2*c.maxZError;a=Number.MAX_VALUE;b=b||(c.mask?c.mask.bitset:null);var h;f=new (v.pixelType||Float32Array)(c.width*c.height);l&&b&&(h=new Uint8Array(c.width*c.height));l=new Float32Array(n*m);for(var e,d,g=0;g<=t;g++){var u=g!==t?m:c.height%t;if(0!==u)for(var x=0;x<=q;x++){var y=x!==q?n:c.width%q;if(0!==y){var B=g*c.width*m+x*n,C=c.width-y,z=c.pixels.blocks[p],D;if(2>z.encoding){if(0===z.encoding)var E=z.rawData;else{var A=D=E=void 0;e=z.stuffedData;d=z.bitsPerPixel;var F=z.numValidPixels,H=z.offset,
I=k,L=l,J=c.pixels.maxValue,O=(1<<d)-1,P=0,fa=0,V=Math.ceil((J-H)/I);e[e.length-1]<<=8*(4*e.length-Math.ceil(d*F/8));for(A=0;A<F;A++)0===fa&&(E=e[P++],fa=32),fa>=d?(D=E>>>fa-d&O,fa-=d):(fa=d-fa,D=(E&O)<<fa&O,E=e[P++],fa=32-fa,D+=E>>>fa),L[A]=D<V?H+D*I:J;E=l}D=0}else var ba=2===z.encoding?0:z.offset;if(b)for(d=0;d<u;d++){if(B&7){var ka=b[B>>3];ka<<=B&7}for(e=0;e<y;e++)B&7||(ka=b[B>>3]),ka&128?(h&&(h[B]=1),A=2>z.encoding?E[D++]:ba,a=a>A?A:a,f[B++]=A):(h&&(h[B]=0),f[B++]=r),ka<<=1;B+=C}else if(2>z.encoding)for(d=
0;d<u;d++){for(e=0;e<y;e++)A=E[D++],a=a>A?A:a,f[B++]=A;B+=C}else for(a=a>ba?ba:a,d=0;d<u;d++){for(e=0;e<y;e++)f[B++]=ba;B+=C}if(1===z.encoding&&D!==z.numValidPixels)throw"Block and Mask do not match";p++}}}ba=h;h={width:c.width,height:c.height,pixelData:f,minValue:a,maxValue:c.pixels.maxValue,noDataValue:r};ba&&(h.maskData=ba);v.returnEncodedMask&&c.mask&&(h.encodedMaskData=c.mask.bitset?c.mask.bitset:null);if(v.returnFileInfo&&(h.fileInfo=G(c),v.computeUsedBitDepths)){ba=h.fileInfo;ka=c.pixels.numBlocksX*
c.pixels.numBlocksY;E={};for(D=0;D<ka;D++)r=c.pixels.blocks[D],0===r.encoding?E.float32=!0:1===r.encoding?E[r.bitsPerPixel]=!0:E[0]=!0;c=Object.keys(E);ba.bitDepths=c}return h}},G=function(w){return{fileIdentifierString:w.fileIdentifierString,fileVersion:w.fileVersion,imageType:w.imageType,height:w.height,width:w.width,maxZError:w.maxZError,eofOffset:w.eofOffset,mask:w.mask?{numBlocksX:w.mask.numBlocksX,numBlocksY:w.mask.numBlocksY,numBytes:w.mask.numBytes,maxValue:w.mask.maxValue}:null,pixels:{numBlocksX:w.pixels.numBlocksX,
numBlocksY:w.pixels.numBlocksY,numBytes:w.pixels.numBytes,maxValue:w.pixels.maxValue,noDataValue:this.noDataValue}}};return K})},"esri/layers/rasterFormats/Lerc2Codec":function(){define([],function(){var K={unstuff:function(v,r,f,c,a,b,p,q){var t=(1<<f)-1,m=0,n,k=0;v[v.length-1]<<=8*(4*v.length-Math.ceil(f*c/8));if(a)for(n=0;n<c;n++){if(0===k){var l=v[m++];k=32}if(k>=f){var h=l>>>k-f&t;k-=f}else k=f-k,h=(l&t)<<k&t,l=v[m++],k=32-k,h+=l>>>k;r[n]=a[h]}else for(a=Math.ceil((q-b)/p),n=0;n<c;n++)0===k&&
(l=v[m++],k=32),k>=f?(h=l>>>k-f&t,k-=f):(k=f-k,h=(l&t)<<k&t,l=v[m++],k=32-k,h+=l>>>k),r[n]=h<a?b+h*p:q},unstuffLUT:function(v,r,f,c,a,b){var p=(1<<r)-1,q=0,t=0,m=0,n=m=0,k=[];v[v.length-1]<<=8*(4*v.length-Math.ceil(r*f/8));var l=Math.ceil((b-c)/a);for(t=0;t<f;t++){if(0===m){var h=v[q++];m=32}m>=r?(n=h>>>m-r&p,m-=r):(m=r-m,n=(h&p)<<m&p,h=v[q++],m=32-m,n+=h>>>m);k[t]=n<l?c+n*a:b}k.unshift(c);return k},unstuff2:function(v,r,f,c,a,b,p,q){var t=(1<<f)-1,m=0,n,k=0,l=0;if(a)for(n=0;n<c;n++){if(0===k){var h=
v[m++];k=32;l=0}if(k>=f){var e=h>>>l&t;k-=f;l+=f}else{var d=f-k;e=h>>>l&t;h=v[m++];k=32-d;e|=(h&(1<<d)-1)<<f-d;l=d}r[n]=a[e]}else for(a=Math.ceil((q-b)/p),n=0;n<c;n++)0===k&&(h=v[m++],k=32,l=0),k>=f?(e=h>>>l&t,k-=f,l+=f):(d=f-k,e=h>>>l&t,h=v[m++],k=32-d,e|=(h&(1<<d)-1)<<f-d,l=d),r[n]=e<a?b+e*p:q;return r},unstuffLUT2:function(v,r,f,c,a,b){var p=(1<<r)-1,q=0,t=0,m=0,n=0,k=0,l=0,h=[],e=Math.ceil((b-c)/a);for(t=0;t<f;t++){if(0===n){var d=v[q++];n=32;l=0}n>=r?(k=d>>>l&p,n-=r,l+=r):(m=r-n,k=d>>>l&p,d=
v[q++],n=32-m,k|=(d&(1<<m)-1)<<r-m,l=m);h[t]=k<e?c+k*a:b}h.unshift(c);return h},originalUnstuff:function(v,r,f,c){var a=(1<<f)-1,b=0,p,q=0;v[v.length-1]<<=8*(4*v.length-Math.ceil(f*c/8));for(p=0;p<c;p++){if(0===q){var t=v[b++];q=32}if(q>=f){var m=t>>>q-f&a;q-=f}else q=f-q,m=(t&a)<<q&a,t=v[b++],q=32-q,m+=t>>>q;r[p]=m}return r},originalUnstuff2:function(v,r,f,c){var a=(1<<f)-1,b=0,p,q=0,t=0;for(p=0;p<c;p++){if(0===q){var m=v[b++];q=32;t=0}if(q>=f){var n=m>>>t&a;q-=f;t+=f}else{var k=f-q;n=m>>>t&a;m=
v[b++];q=32-k;n|=(m&(1<<k)-1)<<f-k;t=k}r[p]=n}return r}},G={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(v){for(var r=65535,f=65535,c=v.length,a=Math.floor(c/2),b=0;a;){var p=359<=a?359:a;a-=p;do r+=v[b++]<<8,f+=r+=v[b++];while(--p);r=(r&65535)+(r>>>16);f=(f&65535)+(f>>>16)}c&1&&(f+=r+=v[b]<<8);return((f&65535)+(f>>>16)<<16|(r&65535)+(r>>>16))>>>0},readHeaderInfo:function(v,r){var f=r.ptr,c=new Uint8Array(v,f,6),a={};a.fileIdentifierString=String.fromCharCode.apply(null,c);if(0!==a.fileIdentifierString.lastIndexOf("Lerc2",
0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;f+=6;c=new DataView(v,f,8);var b=c.getInt32(0,!0);a.fileVersion=b;f+=4;3<=b&&(a.checksum=c.getUint32(4,!0),f+=4);c=new DataView(v,f,12);a.height=c.getUint32(0,!0);a.width=c.getUint32(4,!0);f+=8;4<=b?(a.numDims=c.getUint32(8,!0),f+=4):a.numDims=1;c=new DataView(v,f,40);a.numValidPixel=c.getUint32(0,!0);a.microBlockSize=c.getInt32(4,!0);a.blobSize=c.getInt32(8,!0);a.imageType=c.getInt32(12,!0);a.maxZError=c.getFloat64(16,
!0);a.zMin=c.getFloat64(24,!0);a.zMax=c.getFloat64(32,!0);f+=40;r.headerInfo=a;r.ptr=f;if(3<=b&&(f=this.computeChecksumFletcher32(new Uint8Array(v,f-(4<=b?52:48),a.blobSize-14)),f!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(v,r){var f=r.headerInfo,c=this.getDataTypeArray(f.imageType),a=f.numDims*this.getDataTypeSize(f.imageType),b=this.readSubArray(v,r.ptr,c,a);c=this.readSubArray(v,r.ptr+a,c,a);r.ptr+=2*a;var p=!0;for(a=0;a<f.numDims;a++)if(b[a]!==c[a]){p=!1;break}f.minValues=
b;f.maxValues=c;return p},readSubArray:function(v,r,f,c){if(f===Uint8Array)v=new Uint8Array(v,r,c);else{var a=new ArrayBuffer(c);(new Uint8Array(a)).set(new Uint8Array(v,r,c));v=new f(a)}return v},readMask:function(v,r){var f=r.ptr,c=r.headerInfo,a=c.width*c.height,b=c.numValidPixel,p=new DataView(v,f,4);c={};c.numBytes=p.getUint32(0,!0);f+=4;if((0===b||a===b)&&0!==c.numBytes)throw"invalid mask";if(0===b)b=new Uint8Array(Math.ceil(a/8)),c.bitset=b,p=new Uint8Array(a),r.pixels.resultMask=p,f+=c.numBytes;
else if(0<c.numBytes){b=new Uint8Array(Math.ceil(a/8));p=new DataView(v,f,c.numBytes);var q=p.getInt16(0,!0),t=2,m=0,n=0;do{if(0<q)for(;q--;)b[m++]=p.getUint8(t++);else for(n=p.getUint8(t++),q=-q;q--;)b[m++]=n;q=p.getInt16(t,!0);t+=2}while(t<c.numBytes);if(-32768!==q||m<b.length)throw"Unexpected end of mask RLE encoding";p=new Uint8Array(a);for(t=t=q=0;t<a;t++)t&7?(q=b[t>>3],q<<=t&7):q=b[t>>3],q&128&&(p[t]=1);r.pixels.resultMask=p;c.bitset=b;f+=c.numBytes}r.ptr=f;r.mask=c;return!0},readDataOneSweep:function(v,
r,f,c){var a=r.ptr,b=r.headerInfo,p=b.numDims,q=b.width*b.height;b=b.numValidPixel*G.getDataTypeSize(b.imageType)*p;var t=r.pixels.resultMask;if(f===Uint8Array)v=new Uint8Array(v,a,b);else{var m=new ArrayBuffer(b);(new Uint8Array(m)).set(new Uint8Array(v,a,b));v=new f(m)}if(v.length===q*p)r.pixels.resultPixels=c?G.swapDimensionOrder(v,q,p,f,!0):v;else{r.pixels.resultPixels=new f(q*p);var n=m=f=0,k=0;if(1<p)if(c)for(m=0;m<q;m++){if(t[m])for(k=m,n=0;n<p;n++,k+=q)r.pixels.resultPixels[k]=v[f++]}else for(m=
0;m<q;m++){if(t[m])for(k=m*p,n=0;n<p;n++)r.pixels.resultPixels[k+n]=v[f++]}else for(m=0;m<q;m++)t[m]&&(r.pixels.resultPixels[m]=v[f++])}r.ptr=a+b;return!0},readHuffmanTree:function(v,r){var f=this.HUFFMAN_LUT_BITS_MAX,c=new DataView(v,r.ptr,16);r.ptr+=16;if(2>c.getInt32(0,!0))throw"unsupported Huffman version";var a=c.getInt32(4,!0),b=c.getInt32(8,!0);c=c.getInt32(12,!0);if(b>=c)return!1;var p=new Uint32Array(c-b);G.decodeBits(v,r,p);var q=[],t;for(t=b;t<c;t++){var m=t-(t<a?0:a);q[m]={first:p[t-b],
second:null}}t=v.byteLength-r.ptr;p=new ArrayBuffer(4*Math.ceil(t/4));(new Uint8Array(p)).set(new Uint8Array(v,r.ptr,t));p=new Uint32Array(p);var n=0,k=0;var l=p[0];for(t=b;t<c;t++){m=t-(t<a?0:a);var h=q[m].first;0<h&&(q[m].second=l<<n>>>32-h,32-n>=h?(n+=h,32===n&&(n=0,k++,l=p[k])):(n+=h-32,k++,l=p[k],q[m].second|=l>>>32-n))}var e=l=0,d=new w;for(t=0;t<q.length;t++)void 0!==q[t]&&(l=Math.max(l,q[t].first));e=l>=f?f:l;f=[];var g;for(t=b;t<c;t++)if(m=t-(t<a?0:a),h=q[m].first,0<h)if(b=[h,m],h<=e){m=
q[m].second<<e-h;var u=1<<e-h;for(h=0;h<u;h++)f[m|h]=b}else for(m=q[m].second,u=d,--h;0<=h;h--)(g=m>>>h&1)?(u.right||(u.right=new w),u=u.right):(u.left||(u.left=new w),u=u.left),0!==h||u.val||(u.val=b[1]);return{decodeLut:f,numBitsLUTQick:e,numBitsLUT:l,tree:d,stuffedData:p,srcPtr:k,bitPos:n}},readHuffman:function(v,r,f,c){var a=r.headerInfo.numDims,b=r.headerInfo.height,p=r.headerInfo.width,q=p*b,t=this.readHuffmanTree(v,r);v=t.decodeLut;var m=t.tree,n=t.stuffedData,k=t.srcPtr,l=t.bitPos,h=t.numBitsLUTQick;
t=t.numBitsLUT;var e=0===r.headerInfo.imageType?128:0,d=r.pixels.resultMask,g,u,x,y,B,C,z=0;0<l&&(k++,l=0);var D=n[k],E=1===r.encodeMode,A=new f(q*a),F=A,H;if(2>a||E)for(H=0;H<a;H++)if(1<a&&(F=new f(A.buffer,q*H,q),z=0),r.headerInfo.numValidPixel===p*b)for(x=B=0;x<b;x++)for(y=0;y<p;y++,B++){var I=0;var L=g=D<<l>>>32-h;32-l<h&&(L=g|=n[k+1]>>>64-l-h);if(v[L])I=v[L][1],l+=v[L][0];else for(L=g=D<<l>>>32-t,32-l<t&&(L=g|=n[k+1]>>>64-l-t),L=m,C=0;C<t;C++)if(L=(u=g>>>t-C-1&1)?L.right:L.left,!L.left&&!L.right){I=
L.val;l=l+C+1;break}32<=l&&(l-=32,k++,D=n[k]);I-=e;E?(I=0<y?I+z:0<x?I+F[B-p]:I+z,I&=255,z=F[B]=I):F[B]=I}else for(x=B=0;x<b;x++)for(y=0;y<p;y++,B++){if(d[B]){I=0;L=g=D<<l>>>32-h;32-l<h&&(L=g|=n[k+1]>>>64-l-h);if(v[L])I=v[L][1],l+=v[L][0];else for(L=g=D<<l>>>32-t,32-l<t&&(L=g|=n[k+1]>>>64-l-t),L=m,C=0;C<t;C++)if(L=(u=g>>>t-C-1&1)?L.right:L.left,!L.left&&!L.right){I=L.val;l=l+C+1;break}32<=l&&(l-=32,k++,D=n[k]);I-=e;E?(I=0<y&&d[B-1]?I+z:0<x&&d[B-p]?I+F[B-p]:I+z,I&=255,z=F[B]=I):F[B]=I}}else for(x=B=
0;x<b;x++)for(y=0;y<p;y++)if(B=x*p+y,!d||d[B])for(H=0;H<a;H++,B+=q){I=0;L=g=D<<l>>>32-h;32-l<h&&(L=g|=n[k+1]>>>64-l-h);if(v[L])I=v[L][1],l+=v[L][0];else for(L=g=D<<l>>>32-t,32-l<t&&(L=g|=n[k+1]>>>64-l-t),L=m,C=0;C<t;C++)if(L=(u=g>>>t-C-1&1)?L.right:L.left,!L.left&&!L.right){I=L.val;l=l+C+1;break}32<=l&&(l-=32,k++,D=n[k]);I-=e;F[B]=I}r.ptr=r.ptr+4*(k+1)+(0<l?4:0);r.pixels.resultPixels=A;1<a&&!c&&(r.pixels.resultPixels=G.swapDimensionOrder(A,q,a,f))},decodeBits:function(v,r,f,c,a){var b=r.headerInfo,
p=b.fileVersion,q=0,t=new DataView(v,r.ptr,5<=v.byteLength-r.ptr?5:v.byteLength-r.ptr),m=t.getUint8(0);q++;var n=m>>6,k=0===n?4:3-n,l=0<(m&32)?!0:!1;n=m&31;m=0;if(1===k)m=t.getUint8(q),q++;else if(2===k)m=t.getUint16(q,!0),q+=2;else if(4===k)m=t.getUint32(q,!0),q+=4;else throw"Invalid valid pixel count type";k=2*b.maxZError;a=1<b.numDims?b.maxValues[a]:b.zMax;if(l){r.counter.lut++;l=t.getUint8(q);q++;b=Math.ceil((l-1)*n/8);var h=Math.ceil(b/4);h=new ArrayBuffer(4*h);var e=new Uint8Array(h);r.ptr+=
q;e.set(new Uint8Array(v,r.ptr,b));q=new Uint32Array(h);r.ptr+=b;for(t=0;l-1>>>t;)t++;b=Math.ceil(m*t/8);h=Math.ceil(b/4);h=new ArrayBuffer(4*h);e=new Uint8Array(h);e.set(new Uint8Array(v,r.ptr,b));v=new Uint32Array(h);r.ptr+=b;r=3<=p?K.unstuffLUT2(q,n,l-1,c,k,a):K.unstuffLUT(q,n,l-1,c,k,a);3<=p?K.unstuff2(v,f,t,m,r):K.unstuff(v,f,t,m,r)}else r.counter.bitstuffer++,t=n,r.ptr+=q,0<t&&(b=Math.ceil(m*t/8),h=Math.ceil(b/4),h=new ArrayBuffer(4*h),e=new Uint8Array(h),e.set(new Uint8Array(v,r.ptr,b)),v=
new Uint32Array(h),r.ptr+=b,3<=p?null==c?K.originalUnstuff2(v,f,t,m):K.unstuff2(v,f,t,m,!1,c,k,a):null==c?K.originalUnstuff(v,f,t,m):K.unstuff(v,f,t,m,!1,c,k,a))},readTiles:function(v,r,f,c){var a=r.headerInfo,b=a.width,p=a.height,q=b*p,t=a.microBlockSize,m=a.imageType,n=G.getDataTypeSize(m),k=Math.ceil(b/t),l=Math.ceil(p/t);r.pixels.numBlocksY=l;r.pixels.numBlocksX=k;var h=r.pixels.ptr=0,e=0,d=0,g=0,u=0,x=0,y=0,B=0,C=h=0,z=0,D=0,E=y=0;y=y=0;var A=new f(t*t);p=p%t||t;var F=b%t||t,H=a.numDims,I,L=
r.pixels.resultMask,J=r.pixels.resultPixels,O=5<=a.fileVersion?14:15,P=a.zMax;for(d=0;d<l;d++)for(u=d!==l-1?t:p,g=0;g<k;g++)for(x=g!==k-1?t:F,z=d*b*t+g*t,D=b-x,I=0;I<H;I++){1<H?(E=J,z=d*b*t+g*t,J=new f(r.pixels.resultPixels.buffer,q*I*n,q),P=a.maxValues[I]):E=null;y=v.byteLength-r.ptr;e=new DataView(v,r.ptr,Math.min(10,y));var fa={};y=0;B=e.getUint8(0);y++;var V=5<=a.fileVersion?B&4:0;h=B>>6&255;C=B>>2&O;if(C!==(g*t>>3&O))throw"integrity issue";if(V&&0===I)throw"integrity issue";B&=3;if(3<B)throw r.ptr+=
y,"Invalid block encoding ("+B+")";if(2===B){if(V)if(L)for(h=0;h<u;h++)for(e=0;e<x;e++)L[z]&&(J[z]=E[z]),z++;else for(h=0;h<u;h++)for(e=0;e<x;e++)J[z]=E[z],z++;r.counter.constant++;r.ptr+=y}else if(0===B){if(V)throw"integrity issue";r.counter.uncompressed++;r.ptr+=y;y=u*x*n;E=v.byteLength-r.ptr;y=y<E?y:E;E=new ArrayBuffer(0===y%n?y:y+n-y%n);V=new Uint8Array(E);V.set(new Uint8Array(v,r.ptr,y));E=new f(E);y=0;if(L)for(h=0;h<u;h++){for(e=0;e<x;e++)L[z]&&(J[z]=E[y++]),z++;z+=D}else for(h=0;h<u;h++){for(e=
0;e<x;e++)J[z++]=E[y++];z+=D}r.ptr+=y*n}else if(h=G.getDataTypeUsed(V&&6>m?4:m,h),fa=G.getOnePixel(fa,y,h,e),y+=G.getDataTypeSize(h),3===B)if(r.ptr+=y,r.counter.constantoffset++,L)for(h=0;h<u;h++){for(e=0;e<x;e++)L[z]&&(J[z]=V?Math.min(P,E[z]+fa):fa),z++;z+=D}else for(h=0;h<u;h++){for(e=0;e<x;e++)J[z]=V?Math.min(P,E[z]+fa):fa,z++;z+=D}else if(r.ptr+=y,G.decodeBits(v,r,A,fa,I),y=0,V)if(L)for(h=0;h<u;h++){for(e=0;e<x;e++)L[z]&&(J[z]=A[y++]+E[z]),z++;z+=D}else for(h=0;h<u;h++){for(e=0;e<x;e++)J[z]=A[y++]+
E[z],z++;z+=D}else if(L)for(h=0;h<u;h++){for(e=0;e<x;e++)L[z]&&(J[z]=A[y++]),z++;z+=D}else for(h=0;h<u;h++){for(e=0;e<x;e++)J[z++]=A[y++];z+=D}}1<H&&!c&&(r.pixels.resultPixels=G.swapDimensionOrder(r.pixels.resultPixels,q,H,f))},formatFileInfo:function(v){return{fileIdentifierString:v.headerInfo.fileIdentifierString,fileVersion:v.headerInfo.fileVersion,imageType:v.headerInfo.imageType,height:v.headerInfo.height,width:v.headerInfo.width,numValidPixel:v.headerInfo.numValidPixel,microBlockSize:v.headerInfo.microBlockSize,
blobSize:v.headerInfo.blobSize,maxZError:v.headerInfo.maxZError,pixelType:G.getPixelType(v.headerInfo.imageType),eofOffset:v.eofOffset,mask:v.mask?{numBytes:v.mask.numBytes}:null,pixels:{numBlocksX:v.pixels.numBlocksX,numBlocksY:v.pixels.numBlocksY,maxValue:v.headerInfo.zMax,minValue:v.headerInfo.zMin,noDataValue:v.noDataValue}}},constructConstantSurface:function(v,r){var f=v.headerInfo.zMax,c=v.headerInfo.zMin,a=v.headerInfo.maxValues,b=v.headerInfo.numDims,p=v.headerInfo.height*v.headerInfo.width,
q=0,t=0,m=0,n=v.pixels.resultMask,k=v.pixels.resultPixels;if(n)if(1<b)if(r)for(q=0;q<b;q++)for(m=q*p,f=a[q],t=0;t<p;t++)n[t]&&(k[m+t]=f);else for(t=0;t<p;t++){if(n[t])for(m=t*b,q=0;q<b;q++)k[m+b]=a[q]}else for(t=0;t<p;t++)n[t]&&(k[t]=f);else if(1<b&&c!==f)if(r)for(q=0;q<b;q++)for(m=q*p,f=a[q],t=0;t<p;t++)k[m+t]=f;else for(t=0;t<p;t++)for(m=t*b,q=0;q<b;q++)k[m+q]=a[q];else for(t=0;t<p*b;t++)k[t]=f},getDataTypeArray:function(v){switch(v){case 0:v=Int8Array;break;case 1:v=Uint8Array;break;case 2:v=Int16Array;
break;case 3:v=Uint16Array;break;case 4:v=Int32Array;break;case 5:v=Uint32Array;break;case 6:v=Float32Array;break;case 7:v=Float64Array;break;default:v=Float32Array}return v},getPixelType:function(v){switch(v){case 0:v="S8";break;case 1:v="U8";break;case 2:v="S16";break;case 3:v="U16";break;case 4:v="S32";break;case 5:v="U32";break;case 6:v="F32";break;case 7:v="F64";break;default:v="F32"}return v},isValidPixelValue:function(v,r){if(null==r)return!1;switch(v){case 0:var f=-128<=r&&127>=r;break;case 1:f=
0<=r&&255>=r;break;case 2:f=-32768<=r&&32767>=r;break;case 3:f=0<=r&&65536>=r;break;case 4:f=-2147483648<=r&&2147483647>=r;break;case 5:f=0<=r&&4294967296>=r;break;case 6:f=-3.4027999387901484E38<=r&&3.4027999387901484E38>=r;break;case 7:f=4.9E-324<=r&&1.7976931348623157E308>=r;break;default:f=!1}return f},getDataTypeSize:function(v){var r=0;switch(v){case 0:case 1:r=1;break;case 2:case 3:r=2;break;case 4:case 5:case 6:r=4;break;case 7:r=8;break;default:r=v}return r},getDataTypeUsed:function(v,r){var f=
v;switch(v){case 2:case 4:f=v-r;break;case 3:case 5:f=v-2*r;break;case 6:f=0===r?v:1===r?2:1;break;case 7:f=0===r?v:v-2*r+1;break;default:f=v}return f},getOnePixel:function(v,r,f,c){v=0;switch(f){case 0:v=c.getInt8(r);break;case 1:v=c.getUint8(r);break;case 2:v=c.getInt16(r,!0);break;case 3:v=c.getUint16(r,!0);break;case 4:v=c.getInt32(r,!0);break;case 5:v=c.getUInt32(r,!0);break;case 6:v=c.getFloat32(r,!0);break;case 7:v=c.getFloat64(r,!0);break;default:throw"the decoder does not understand this pixel type";
}return v},swapDimensionOrder:function(v,r,f,c,a){var b=0,p=0,q=0,t=0,m=v;if(1<f)if(m=new c(r*f),a)for(b=0;b<r;b++)for(t=b,q=0;q<f;q++,t+=r)m[t]=v[p++];else for(b=0;b<r;b++)for(t=b,q=0;q<f;q++,t+=r)m[p++]=v[t];return m}},w=function(v,r,f){this.val=v;this.left=r;this.right=f};return{decode:function(v,r){r=r||{};var f=r.noDataValue,c=0,a={};a.ptr=r.inputOffset||0;a.pixels={};if(G.readHeaderInfo(v,a)){c=a.headerInfo;var b=c.fileVersion,p=G.getDataTypeArray(c.imageType);if(5<b)throw"unsupported lerc version 2."+
b;G.readMask(v,a);c.numValidPixel===c.width*c.height||a.pixels.resultMask||(a.pixels.resultMask=r.maskData);var q=c.width*c.height;a.pixels.resultPixels=new p(q*c.numDims);a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var t=!r.returnPixelInterleavedDims;if(0!==c.numValidPixel)if(c.zMax===c.zMin)G.constructConstantSurface(a,t);else if(4<=b&&G.checkMinMaxRanges(v,a))G.constructConstantSurface(a,t);else{var m=new DataView(v,a.ptr,2),n=m.getUint8(0);a.ptr++;if(n)G.readDataOneSweep(v,
a,p,t);else if(1<b&&1>=c.imageType&&1E-5>Math.abs(c.maxZError-.5)){m=m.getUint8(1);a.ptr++;a.encodeMode=m;if(2<m||4>b&&1<m)throw"Invalid Huffman flag "+m;m?G.readHuffman(v,a,p,t):G.readTiles(v,a,p,t)}else G.readTiles(v,a,p,t)}a.eofOffset=a.ptr;r.inputOffset?(b=a.headerInfo.blobSize+r.inputOffset-a.ptr,1<=Math.abs(b)&&(a.eofOffset=r.inputOffset+a.headerInfo.blobSize)):(b=a.headerInfo.blobSize-a.ptr,1<=Math.abs(b)&&(a.eofOffset=a.headerInfo.blobSize));b={width:c.width,height:c.height,pixelData:a.pixels.resultPixels,
minValue:c.zMin,maxValue:c.zMax,validPixelCount:c.numValidPixel,dimCount:c.numDims,dimStats:{minValues:c.minValues,maxValues:c.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&G.isValidPixelValue(c.imageType,f)){p=a.pixels.resultMask;for(c=0;c<q;c++)p[c]||(b.pixelData[c]=f);b.noDataValue=f}a.noDataValue=f;r.returnFileInfo&&(b.fileInfo=G.formatFileInfo(a));return b}},getBandCount:function(v){for(var r=0,f=0,c={ptr:0,pixels:{}};f<v.byteLength-58;)G.readHeaderInfo(v,c),f+=c.headerInfo.blobSize,
r++,c.ptr=f;return r}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(K,G,w,v,r,f){K=K(null,{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(c){G.mixin(this,c);this.isDataUV=c&&c.isDataUV?c.isDataUV:!1;this.computeMagnitudeAndDirection=
G.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(c,a){this.inputUnit=c;this.outputUnit=a;this.unitConversionFactor=1;this._updateUnitConvFactor()},_updateUnitConvFactor:function(){var c=f.indexOf(this.speedUnits,this.inputUnit),a=f.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=c&&0<=a){var b=[1,.277778,.514444,.3048,.44704,0];this.unitConversionFactor=b[c]/b[a]}},computeMagnitudeAndDirection:function(c){if(!r.isDefined(c))throw"Could not compute magnitude and direction. No pixel data is available.";
var a=c.pixelBlock;if(!r.isDefined(a)||2!==a.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";var b=c.extent,p=(b.xmax-b.xmin)/a.width,q=(b.ymax-b.ymin)/a.height,t=b.xmin+p/2;b=b.ymax-q/2;a.statistics[0].minValue=0;a.statistics[0].maxValue=0;var m=180/Math.PI,n=[],k=0,l=0,h=0,e=!r.isDefined(a.mask),d,g,u,x;var y=u=Infinity;var B=x=-Infinity;for(k=0;k<a.height;k++)for(l=0;l<a.width;l++,h++)if(n.push([t+p*l,b-q*k]),e||a.mask[h]){var C=d=a.pixels[0][h];
var z=g=a.pixels[1][h];this.isDataUV&&(C=Math.sqrt(d*d+g*g),z=90-m*Math.atan2(g,d));a.pixels[0][h]=C*this.unitConversionFactor;a.pixels[1][h]=z;C>B&&(B=C);C<y&&(y=C);z>x&&(x=z);z<u&&(u=z)}a.statistics[0].maxValue=B;a.statistics[0].minValue=y;a.statistics[1].maxValue=x;a.statistics[1].minValue=u;c.locations=n;return c}});G.setObject("layers.pixelFilters.VectorFieldPixelFilter",K,v);return K})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred",
"dojo/sniff"],function(K,G,w,v){var r;return G(null,{constructor:function(f){this.ctx=f.ctx;this._loadRasterFormatModule()},decode:function(f,c){if(!c.width||!c.height)throw"Native decoding requires the image format, width and height";var a=new w,b,p=new Uint8Array(f),q=this._getFormat(f);if("error"===q)throw"invalid format";"jpeg"===q&&(b=this._getMask(p,c));var t="",m;for(m=0;m<p.length;m+=65535){var n=p.subarray(m,m+65535>p.length-1?p.length-1:m+65535);t+=String.fromCharCode.apply(null,n)}p="data:image/"+
q+";base64,"+window.btoa(t);var k=new Image,l;k.src=p;var h=this;k.onload=function(){h.ctx.clearRect(0,0,c.width,c.height);h.ctx.drawImage(k,0,0);var e=h.ctx.getImageData(0,0,k.width,k.height);l=e.data;if(b)for(m=0;m<b.length;m++)l[4*m+3]=b[m]?255:0;h.ctx.putImageData(e,0,0);a.resolve(null)};k.onerror=function(){a.reject("cannot load image")};return a},_getFormat:function(f){f=new Uint8Array(f,0,10);var c="error";255===f[0]&&216===f[1]?c="jpeg":137===f[0]&&80===f[1]&&78===f[2]&&71===f[3]&&(c="png");
return c},_getMask:function(f,c){try{if(!r)throw"The zlib decoder module is not loaded.";var a=0,b=0,p=Math.round(f.length/2);1===p%2&&(p+=1);var q=f.length-2;for(a=p;a<q&&(255!==f[a]||217!==f[a+1]);a++);p=a+=2;if(p<f.length-1){var t=(new r(f.subarray(p))).getBytes();var m=new Uint8Array(c.width*c.height);for(a=p=0;a<t.length;a++)for(b=7;0<=b;b--)m[p++]=t[a]>>b&1}}catch(n){}return m},_loadRasterFormatModule:function(){10>v("ie")||K(["./Zlib"],function(f){r=f})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),
function(K,G,w,v,r,f,c,a){K=K(c,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(b){this._url.path+="/identify";this._handler=G.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(b,p,q,t,m){try{var n=new a(b);this._successHandler([n],"onComplete",q,m)}catch(k){this._errorHandler(k,t,m)}},execute:function(b,p,q,t){var m=t.assembly;b=this._encode(G.mixin({},this._url.query,{f:"json"},b.toJson(m&&m[0])));var n=this._handler,
k=this._errorHandler;return r({url:this._url.path,content:b,callbackParamName:"callback",load:function(l,h){n(l,h,p,q,t.dfd)},error:function(l){k(l,q,t.dfd)}})},onComplete:function(){}});f._createWrappers(K);G.setObject("tasks.ImageServiceIdentifyTask",K,v);return K})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(K,G,w,v,r,f){K=K(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",
constructor:function(c){c.catalogItems&&(this.catalogItems=new f(c.catalogItems));c.location&&(this.location=r.fromJson(c.location));this.catalogItemVisibilities=c.catalogItemVisibilities;this.name=c.name;this.objectId=c.objectId;this.value=c.value;this.processedValues=c.processedValues;this.properties=c.properties}});G.setObject("tasks.ImageServiceIdentifyResult",K,v);return K})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),
function(K,G,w,v,r,f,c,a){K=K(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,maxItemCount:null,returnPixelValues:!0,toJson:function(b){var p=b&&b.geometry||this.geometry;b={geometry:p,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?w.toJson(this.mosaicRule.toJson()):
null,renderingRule:this.renderingRule?w.toJson(this.renderingRule.toJson()):null};p&&(b.geometryType=a.getJsonType(p));p=this.timeExtent;b.time=p?p.toJson().join(","):null;c.isDefined(this.pixelSizeX)&&c.isDefined(this.pixelSizeY)?b.pixelSize=w.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(b.pixelSize=this.pixelSize?w.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(b.renderingRules=w.toJson(v.map(this.renderingRules,function(q){return q.toJson()})));
c.isDefined(this.returnPixelValues)&&(b.returnPixelValues=this.returnPixelValues);c.isDefined(this.maxItemCount)&&(b.maxItemCount=this.maxItemCount);return b}});G.setObject("tasks.ImageServiceIdentifyParameters",K,f);return K})},"esri/layers/RasterXLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/dom-construct dojo/dom-style dojo/on dojox/gfx/matrix dojo/when dojo/DeferredList ../kernel ../config ../lang ../domUtils ../urlUtils ../graphic ../request ../renderers/ClassBreaksRenderer ../renderers/StretchRenderer ../renderers/UniqueValueRenderer ../renderers/ColormapRenderer ../renderers/ShadedReliefRenderer ../geometry/Extent ../SpatialReference ../geometry/Point ./Field ./TimeInfo ./MosaicRule ./DimensionalDefinition ./PixelBlock ./ImageServiceLayerMixin ./rasterLib/function/StretchFunction ./rasterLib/raster/rasterFactory ./rasterLib/raster/rasterProjectionHelper ./rasterLib/renderer/rasterRendererHelper ./rasterLib/tile/RasterTileInfo ./rasterLib/tile/RasterTileManager ./rasterLib/tile/RasterHandler ./layer".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la){var ma=n.defaults.map.zoomDuration;K=K([la],{declaredClass:"esri.layers.RasterXLayer",managedSuspension:!0,opacity:1,tileMode:!0,useWebGL:!0,drawMode:!0,_eventMap:{"raster-change":!0,"renderer-change":!0},_lastPopup:[],_rasterFieldPrefix:"Raster.",_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(ha,Z){Z=Z||{};this.tileMode=null!=Z.tileMode?Z.tileMode:this.tileMode;this.useWebGL=
null!=Z.useWebGL?Z.useWebGL:this.useWebGL;this.roaming=null!=Z.roaming?Z.roaming:this.roaming;this.drawMode=null!=Z.drawMode?Z.drawMode:this.drawMode;this.bandIds=Z.bandIds&&0<Z.bandIds.length?Z.bandIds:null;this.renderer=Z.renderer;this._customModules=Z.customModules;this.useMapTime=Z.useMapTime;if(Z.multidimensionalDefinition&&0<Z.multidimensionalDefinition.length){var W=new F;W.multidimensionalDefinition=Z.multidimensionalDefinition.map(function(Q){return Q.toJson?Q:new H(Q)});W.method=F.METHOD_NONE;
this.mosaicRule=W}this.infoTemplate=Z.infoTemplate;this.drawMode||(this._contextType=Z._contextType||Z.drawType);this._supportLegacyPropMethods=!1!==Z.legacySupport;this._rasterHandler=new ka({customModules:this._customModules});this._workInitPromise=this._rasterHandler.start();this.pixelData=null;this._initialize(ha,Z);b(this,"load",G.hitch(this,function(){q(this._rasterHandler._connected||this._rasterHandler._connectionPromise,G.hitch(this,function(){this._rasterHandler.setLayer({layerId:this.id,
raster:{rasterInfo:this.raster.rasterInfo,rasterFunction:this.raster.rasterFunction&&this.raster.rasterFunction.toJson()},bandCount:this.raster.rasterInfo.bandCount});this.raster.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this.id,data:this.raster.rasterFunction.toJson(!0)});this._rasterRenderer&&this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)})}))}));this._animatePan2d=G.hitch(this,this._animatePan2d)},setOpacity:function(ha){this.opacity!==
ha&&(this.opacity=ha,this.onOpacityChange(ha))},onOpacityChange:function(){},onRendererChange:function(){},refresh:function(){if(this.loaded&&this._map)if(!this._canDraw()||10>f("ie"))this.onError(Error("Unable to refresh. This layer is not supported in the current browser."));else this._map&&this._extentChangeHandler(this._map.extent)},clear:function(ha,Z,W,Q){this._canDraw()&&(this.useWebGL||(W?this._context.clearRect(ha,Z,W,Q):this._context.clearRect(0,0,this._map.width,this._map.height)))},getContext:function(){return this._context},
onResume:function(){this.inherited(arguments);this._toggleTime();l.show(this._div);if("css-transforms"===this._map.navigationMode){var ha=this._map.__visibleDelta;this._left=this._tdx=ha.x;this._top=this._tdy=ha.y;a.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top))}this._displayTimer=this._displayTimer||setTimeout(G.hitch(this,function(){this._extentChangeHandler(this._map.extent,null,!0)}),0)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();
l.hide(this._div);clearTimeout(this._displayTimer);this._displayTimer=null},redraw:function(){this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!1);var ha=this.tileMode?this.tileManager.originalPixelData:this.originalPixelData;if(this.tileMode?ha&&(ha.src||ha.texture):ha)if(this.tileMode)if(this.useWebGL)this._updateAllTilesOnce(ha);else{this.tileManager.tiles.forEach(function(W){W&&(W.update=null,W.completed=!1,W.processedPixelBlock=null,W.renderedPixelBlock=null)});ha.processedPixelBlock=
null;var Z=this.raster.rasterFunction?this.raster.rasterFunction.read(ha):{extent:ha.extent,pixelBlock:ha.src[this.tileManager.identifiers[0]]&&ha.src[this.tileManager.identifiers[0]].pixelBlock};ha.renderedPixelBlock=null;ha=this._rasterRenderer?this._rasterRenderer.draw(Z):Z;this._drawOneFrame(ha)}else this._supportLegacyPropMethods&&this.pixelFilter?this._setPixelData(this.originalPixelData):(ha.processedPixelBlock=null,Z=this.raster.rasterFunction?this.raster.rasterFunction.read(ha):{extent:ha.extent,
pixelBlock:ha.src?ha.src[this.tileManager.identifiers[0]]&&ha.src[this.tileManager.identifiers[0]].pixelBlock:ha.pixelBlock},ha.renderedPixelBlock=null,ha=this._rasterRenderer?this._rasterRenderer.draw(Z):Z,this._drawOneFrame(ha))},getCurrentResolution:function(){var ha=this._map.extent;return new D((ha.xmax-ha.xmin)/this._map.width,(ha.ymax-ha.ymin)/this._map.height,ha.spatialReference)},getCustomRasterFields:function(ha){var Z=ha?ha.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix,W={name:this._rasterFieldPrefix+
"ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString"};ha=this.fields?G.clone(this.fields):[];ha.push(W);(W=this.rasterAttributeTable&&this.rasterAttributeTable.fields)&&0<W.length&&(W=v.filter(W,function(Q){return"esriFieldTypeOID"!==Q.type&&"value"!==Q.name.toLowerCase()}),W=v.map(W,function(Q){var ia=G.clone(Q);ia.name=Z+Q.name;return ia}),ha=ha.concat(W));return ha},setRenderer:function(ha,Z){if(this.loaded&&
ha){if(ha.declaredClass&&-1<ha.declaredClass.indexOf("esri.layers.rasterLib")){this._rasterRenderer=ha;this._rasterRenderer.bind({layer:this});var W=this.bandIds=ha.bandIndex;this.raster&&this.raster.setFetchParameters({bandIds:W});this._params&&(this._params.bandIds=W&&0<W.length?W.join(","):null);this.renderer=this._getCommonRenderer(ha)}else W=G.clone(ha.toJson?ha.toJson():ha),"rasterStretch"===W.type&&(W.bandIndex=this.bandIds,W.bandIndex&&1<W.bandIndex.length||!W.bandIndex&&this.raster&&1<this.raster.rasterInfo.bandCount)&&
(W.type="rgb"),this._rasterRenderer=fa.create(W),this.renderer=ha.declaredClass?ha:this._getCommonRenderer(this._rasterRenderer),this._rasterRenderer.bind({layer:this});if(this._map){if(this.loaded&&this._rasterHandler._connected){var Q=this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)});this._updateTilingEffects()}Z||(Q?Q.then(G.hitch(this,function(){this.redraw()})):this.redraw());this.onRendererChange()}}},setBandIds:function(ha,Z){this.bandIds=ha;this.raster&&
this.raster.setFetchParameters({bandIds:ha});this._params&&(this._params.bandIds=ha&&0<ha.length?ha.join(","):null);this.setRenderer(this.renderer,Z)},_setTime:function(ha){ha=ha?ha.toJson():null;this._params&&(this._params.time=ha);this.raster.setFetchParameters({time:ha});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles()},setInfoTemplate:function(ha){this.infoTemplate=ha;this._updateInfoTemplateFields(this.fields)},setMultiDimensionalDefinition:function(ha,Z){var W=ha&&ha.multidimensionalDefinition;
if(W&&this.loaded){var Q=W&&W[0].variableName;""===Q&&(Q=this._multidimensionalInfo.variables[0].name,W.forEach(function(R){R.variableName=Q}));if("ImageService"===this.raster.sourceType){var ia=this.raster._getAllDimensionDefinition(W,Q);ia.defChanged&&(ha.multidimensionalDefinition=ia.definition,this.setMosaicRule(ha,!0))}this.raster.setFetchParameters({multidimensionalDefinition:W});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles();Q&&this._updateRasterInfo(Q);Z||this.refresh()}},
_updateRasterInfo:function(ha){var Z=this.raster.rasterInfo,W=this.getHistograms({variableName:ha});ha=this.getStatistics(ha);(new t([W,ha])).then(G.hitch(this,function(Q){Q[0][0]&&(Z.histograms=Q[0][1].histograms);Q[1][0]&&(Z.statistics=Q[1][1]);this.refresh()}))},_updateInfoTemplateFields:function(ha){if(ha&&!(1>ha.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var Z,W;var Q=this.infoTemplate.info.fieldInfos;
for(Z=0;Z<ha.length;Z++){var ia=ha[Z];for(W=0;W<Q.length;W++)if(Q[W].fieldName.toLowerCase()===ia.name.toLowerCase()&&Q[W].fieldName!==ia.name){Q[W].fieldName=ia.name;break}}}},getPixelData:function(ha){return this.tileMode?ha?this.tileManager&&this.tileManager.originalPixelData&&this.tileManager.originalPixelData.src&&this.tileManager.originalPixelData.src[this.tileManager.identifiers[0]]:null:this.inherited(arguments)},fetchPopupFromTiles:function(ha){var Z=new r;this.identify(ha.geometry).then(function(W){var Q=
W.pixelValue;this.hasStdTime()&&Q&&Q.length&&null!=Q[0]&&(Q=Q.map(function(S){return this.getStdTimeValue(S)}.bind(this)).join(", "));if(Q){W={ObjectId:0,"Raster.ServicePixelValue":Q};var ia=this.rasterAttributeTable&&this.rasterAttributeTable.features;if(ia&&0<ia.length&&(ia=v.filter(ia,function(S){if(S&&S.attributes)return S.attributes.hasOwnProperty("Value")?S.attributes.Value==Q:S.attributes.VALUE==Q}),0<ia.length&&(ia=G.clone(ia[0]))))for(var R in ia.attributes)ia.attributes.hasOwnProperty(R)&&
(W[this._rasterFieldPrefix+R]=ia.attributes[R]);R=new e(new C(this.projectedFullExtent||this.fullExtent),null,W);R.setInfoTemplate(this.infoTemplate);R._layer=this;this._lastPopup=[R];Z.resolve([R])}else this._lastPopup=[],Z.resolve()}.bind(this),function(W){this._lastPopup=[];Z.resolve(W)});return Z},getPopupFromTiles:function(){return this._lastPopup},identify:function(ha,Z){if(!this.raster){var W=new r;W.reject("layer must be initialized to identify");return W.promise}return this.raster.identify(ha)},
_getCommonRenderer:function(ha){switch(ha.rendererName){case "RGB":case "Stretch":return new u(ha.toCommonRendererJson());case "UniqueValue":return new x(ha.toCommonRendererJson());case "ClassBreaks":return new g(ha.toCommonRendererJson());case "Colormap":return new y(ha.toCommonRendererJson());case "ShadedRelief":return new B(ha.toCommonRendererJson())}},_getProjectedFullExtent:function(ha){return this.raster.getProjectedFullExtent(ha).then(G.hitch(this,function(Z){this.projectedFullExtent=Z}))},
_initialize:function(ha,Z){Z=Z||{};this._supportLegacyPropMethods&&this.constructor._onMap&&(this.constructor._onMap["rendering-change"]={method:"onRenderingChange"},this.constructor._onMap["mosaic-rule-change"]={method:"onMosaicRuleChange"},this.constructor._onMap["spatial-reference-change"]={method:"onSpatialReferenceChange"});this.raster={};var W=Z.raster?Z.raster.url:ha;W&&-1<W.toLowerCase().indexOf("/imageserver")&&this._supportLegacyPropMethods&&this._addLegacySupport(W,Z);var Q=G.hitch(this,
function(){this.loaded=!0;this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length&&this.setMultiDimensionalDefinition(this.mosaicRule,!0);this.raster._setRasterHandler(this._rasterHandler);this.onLoad(this);var ia=this._loadCallback;ia&&(delete this._loadCallback,ia(this))});(ha?O.create(G.mixin({url:ha},Z)):Z.raster&&Z.raster.open()).then(G.hitch(this,function(ia){if(ia){this.raster=ia;var R=this._getSourceImageServiceRaster();this.url||(this.url=
R&&R.url);this.url&&(this._url=h.urlToObject(ha));var S=Z.minScale,N=Z.maxScale,X=ia.tileInfo&&"Raster"===ia.tileInfo.tileType;null==N&&(N=X&&Z.zoomFactor?ia.tileInfo.lods[ia.tileInfo.lods.length-1].scale/Z.zoomFactor:this.maxScale);null==S&&(S=X&&Z.zoomFactor?ia.tileInfo.lods[0].scale*Z.zoomFactor:this.minScale);R&&"ImageService"===R.sourceType&&this._supportLegacyPropMethods&&this._addGeneralProperties(ha,Z);this.initialExtent=this.fullExtent=this.extent=this.raster.rasterInfo.extent;this.spatialReference=
this.extent.spatialReference;this.timeInfo=this.raster.rasterInfo.timeInfo?new A(this.raster.rasterInfo.timeInfo):null;this.rasterAttributeTable=this.raster.rasterInfo.vat;this._multidimensionalInfo=this.raster.rasterInfo.multidimensionalInfo;this.rasterAttributeTable&&(this._rasterAttributeTableFields=this.rasterAttributeTable.fields);this.mosaicRule&&this.raster.setFetchParameters({multidimensionalDefinition:this.mosaicRule.multidimensionalDefinition});this._multidimensionalInfo&&(this._getDefaultMultidimensionalDefinition(this._multidimensionalInfo,
!0,!0),this.mosaicRule||(this.mosaicRule=this.defaultMosaicRule,this.raster.setFetchParameters({multidimensionalDefinition:this._defaultMultidimensionalDefinition})),this.raster.defaultMultidimensionalDefinition=this._defaultMultidimensionalDefinition);null==S||this._hasMin||this.setMinScale(S);null==N||this._hasMax||this.setMaxScale(N);this._workInitPromise?this._workInitPromise.then(Q,Q):Q()}}),this._errorHandler)},_getSourceImageServiceRaster:function(){var ha=this.raster&&"Function"===this.raster.sourceType?
1===this.raster.getMemberRasters().length?this.raster.getMemberRasters()[0]:null:this.raster;if(ha&&"ImageService"===ha.sourceType)return ha},_addLegacySupport:function(ha,Z){this._url=h.urlToObject(ha);Z=Z||{};var W=Z.imageServiceParameters;this.format=W&&W.format;this.compressionTolerance=W&&W.compressionTolerance?W.compressionTolerance:.01;this.interpolation=W?W.interpolation:null;this.compressionQuality=W?W.compressionQuality:null;this.bandIds=W&&W.bandIds||Z&&Z.bandIds||null;this.mosaicRule||
(this.mosaicRule=W?W.mosaicRule:null);this.renderingRule||(this.renderingRule=W?W.renderingRule:null);this.useMapDimensionValue=Z.hasOwnProperty("useMapDimensionValue")?!!Z.useMapDimensionValue:!0;this.hasImageFilter=Z.hasImageFilter;this.activeMapDimensions=Z.activeMapDimensions;this._params=G.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},W?W.toJson():{});this.pixelFilter=
Z.pixelFilter;this.originalPixelData=this.pixelData=null;this._queryVisibleRastersHandler=G.hitch(this,this._queryVisibleRastersHandler);this._useRenderingRuleAttributeTable=!1;this._rasterFunctionTemplateInfos={};this._customRenderingRuleId={};this._setDefaultFilter=function(){};var Q={setInterpolation:"interpolation",setCompressionQuality:"compressionQuality",setCompressionTolerance:"compressionTolerance",setBandIds:"bandIds",setDefaultBandIds:"bandIds",setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",
setImageFormat:"format"},ia,R=new L;Object.keys(Q).forEach(G.hitch(this,function(S){this[S]=G.hitch(this,function(N,X){ia={};ia[Q[S]]=N;this.raster&&(this.raster.setFetchParameters(ia),R[S].bind(this)(N,X))})}));this.setDisableClientCaching=function(S){R.setDisableClientCaching.bind(this)(S);var N=this._getSourceImageServiceRaster();N?N.disableClientCaching=S:null}.bind(this);this.setDefinitionExpression=R.setDefinitionExpression.bind(this);this.setUseMapTime=R.setUseMapTime.bind(this);this._toggleTime=
R._toggleTime.bind(this);this._onTimeExtentChangeHandler=R._onTimeExtentChangeHandler.bind(this);this.setPixelFilter=R.setPixelFilter.bind(this);this.getHistograms=R.getHistograms.bind(this);this.getRasterFunctionInfos=R.getRasterFunctionInfos.bind(this);this.getKeyProperties=R.getKeyProperties.bind(this);this.getRasterAttributeTable=R.getRasterAttributeTable.bind(this);this.getRenderingRuleServiceInfo=R.getRenderingRuleServiceInfo.bind(this);this._getRenderingRuleId=R._getRenderingRuleId.bind(this);
this._isRenderingRuleAProcessingTemplate=R._isRenderingRuleAProcessingTemplate.bind(this);this.handleSpatialReferenceChange=R.handleSpatialReferenceChange.bind(this);this.onRenderingChange=this.onRenderingChange||function(){};this.onSpatialReferenceChange=this.onSpatialReferenceChange||function(){};this.onMosaicRuleChange=this.onMosaicRuleChange||function(S){};this.setRasterRenderer=this.setRenderer;this.getMultidimensionalInfo=R.getMultidimensionalInfo.bind(this);this.getColormap=R.getColormap.bind(this);
this.getRenderingRuleColormap=R.getRenderingRuleColormap.bind(this);this.getDefaultMultidimensionalDefinition=R.getDefaultMultidimensionalDefinition.bind(this);this._getDefaultMultidimensionalDefinition=R._getDefaultMultidimensionalDefinition.bind(this);this._getDefaultDimensionValue=R._getDefaultDimensionValue.bind(this);this.getStatistics=R.getStatistics.bind(this)},_addGeneralProperties:function(){var ha=this._getSourceImageServiceRaster();if(ha){var Z=["minScale","maxScale","tileInfo"];Object.keys(ha.serviceInfo).forEach(function(ia){null==
this[ia]&&-1===Z.indexOf(ia)&&(this[ia]=ha.serviceInfo[ia])}.bind(this));this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);this.bands=ha.rasterInfo.statistics;var W,Q=[];this.fields=this.fields||[];for(W=0;W<this.fields.length;W++)Q.push(new E(this.fields[W]));this.fields=Q;this.version=this.currentVersion;this.defaultMosaicRule=ha.serviceInfo.defaultMosaicRule}},setDefaultRenderer:function(){if(this.loaded&&this._canvas&&!this.pixelFilter){var ha=fa.createDefaultRenderer(this);
if(null!=ha){var Z=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length;if(this._multidimensionalInfo&&Z&&"Stretch"===ha.rendererName){var W=this.mosaicRule.multidimensionalDefinition[0].variableName;(Z=this._multidimensionalInfo.variables.filter(function(Q){return Q.name===W})[0])&&Z.histograms&&Z.histograms.length&&(ha.histograms=Z.histograms,6===ha.stretchType&&(ha.dra=!1));Z&&Z.statistics&&Z.statistics.length&&(ha.statistics=Z.statistics.map(function(Q){return[Q.min,
Q.max,Q.mean,Q.stddev||Q.standardDeviation]}),6!==ha.stretchType&&(ha.dra=!1))}this.setRenderer(ha,!0)}}},setDefaultInterpolation:function(){if(this.loaded&&this._canvas){var ha=this.raster.serviceInfo&&this.raster.serviceInfo.defaultResamplingMethod;if(ha)switch(ha.toLowerCase()){case "bilinear":this.interpolation="RSP_BilinearInterpolation";break;case "cubic":this.interpolation="RSP_CubicConvolution";break;case "majority":this.interpolation="RSP_Majority";break;case "nearest":this.interpolation=
"RSP_NearestNeighbor"}else{ha=this.raster.dataType&&this.raster.dataType.toLowerCase();var Z=!!this.raster.rasterInfo.colormap;this.raster.rasterInfo.vat||Z||"thematic"===ha||"StdTime"===ha?"RSP_NearestNeighbor":"RSP_BilinearInterpolation"}}},_toggleTime:function(){},_updateTilingEffects:function(){(this._hasTilingEffects=this._rasterRenderer&&this._rasterRenderer.hasTilingEffects()||this.raster&&this.raster.rasterFunction&&this.raster.rasterFunction.hasTilingEffects())&&this._map&&this.tileMode&&
this.useWebGL&&this.tileManager&&(this._hasTilingEffects=!1)},_setMap:function(ha,Z){this.inherited(arguments);ha.spatialReference&&(ha.spatialReference.ics||ha.spatialReference.icsId)&&(this.roaming=this.useWebGL=this.tileMode=!1);if(this.tileMode){this.virtualTileInfo=new V(null,{refTileInfo:ha.tileInfo,spatialReference:ha.spatialReference,extent:this.raster.rasterInfo.extent});var W=this.raster.tileInfo&&(-1<["Elevation","Raster"].indexOf(this.raster.tileInfo.tileType)||3===this.raster.rasterInfo.bandCount&&
"U8"===this.raster.rasterInfo.pixelType)?this.raster.tileInfo:this.virtualTileInfo;this._tileParams=this._tileParams||{};this._tileParams.size=W.cols+","+W.rows;this.tileManager=new ba({tileInfo:W,layer:this,mapSR:ha.spatialReference})}this._dragOrigin={x:0,y:0};W=this._div=c.create("div",null,Z);var Q={width:ha.width+"px",height:ha.height+"px",position:"absolute"};"css-transforms"===ha.navigationMode?this.roaming&&this.tileMode&&this.useWebGL||(Q[m._css.names.transform]=m._css.translate(ha.__visibleDelta.x,
ha.__visibleDelta.y),this._left=ha.__visibleDelta.x,this._top=ha.__visibleDelta.y):this._left=this._top=0;a.set(W,Q);this._canvas=c.create("canvas",{width:ha.width+"px",height:ha.height+"px",style:"position: absolute;"},W);k.isDefined(this.opacity)&&a.set(W,"opacity",this.opacity);this._contextType?(this._context=this._canvas.getContext(this._contextType,null),this.useWebGL=this._context instanceof WebGLRenderingContext):this.useWebGL?(this._context=this._canvas.getContext("webgl",null)||this._canvas.getContext("experimental-webgl",
null),this.drawMode=!1):(this._context=this._canvas.getContext("2d"),this.drawMode=!0);this.useWebGL&&(ha.acquireWebGLContext(this),this._glSetting={gl:this._context,branchCount:this.raster.rasterFunction?this.raster.rasterFunction.branchCount:0,pingpong:null,branches:null,drawMesh:this._drawMesh,programUniforms:{}});this.raster.rasterFunction&&(this._updateTilingEffects(),this.raster.setProcessingContext({layer:this}));this.setRenderer(this.renderer,!0);this._rasterRenderer||this.setDefaultRenderer();
this.interpolation||this.setDefaultInterpolation();this._mapWidth=ha.width;this._mapHeight=ha.height;this._connects=[];this._connects.push(w.connect(ha,"onPan",this,this._panHandler));this._connects.push(w.connect(ha,"onPanEnd",this,this._panEndHandler));"css-transforms"===ha.navigationMode?this._connects.push(w.connect(ha,"onScale",this,this._onScaleHandler)):(this._connects.push(w.connect(ha,"onZoom",this,this._onZoomHandler)),this._connects.push(w.connect(ha,"onZoomEnd",this,this._onZoomEndHandler)));
this._connects.push(w.connect(ha,"onResize",this,this._onResizeHandler));this._connects.push(w.connect(ha,"onExtentChange",this,this._extentChangeHandler));this._connects.push(w.connect(this,"onVisibilityChange",this,this._visibilityChangeHandler));this._connects.push(w.connect(this,"onOpacityChange",this,this._opacityChangeHandler));this._startRect={left:0,top:0,width:ha.width,height:ha.height};this.evaluateSuspension();if(this.suspended&&!ha.loaded)var ia=w.connect(ha,"onLoad",this,function(){w.disconnect(ia);
ia=null;this.evaluateSuspension()});return W},_unsetMap:function(ha,Z){this.useWebGL&&ha.releaseWebGLContext(this);v.forEach(this._connects,w.disconnect,this);var W=this._div;W&&(Z.removeChild(W),c.destroy(W));this._map=this._canvas=this._context=this.data=this._connects=null;clearTimeout(this._displayTimer);this._displayTimer=null;this.inherited(arguments)},_canDraw:function(){return!!(this._map&&this._canvas&&this._context)},_requestDataErrorHandler:function(ha){"CancelError"!==ha.name&&(this.clear(),
this.onError(ha))},_clonePixelData:function(ha){if(null===ha||ha.texture)return ha;var Z={};ha.extent&&(Z.extent=G.clone(ha.extent));var W=ha.pixelBlock;null!=W&&(Z.pixelBlock=W.clone());Z.texture=ha.texture;return Z},_setPixelData:function(ha){if(ha){ha=this._clonePixelData(ha);this.pixelFilter&&(this.pixelFilter.filter?(this.pixelFilter.renderTexture=!0,this.pixelFilter.filter(ha)):this.pixelFilter(ha));this.pixelData=ha;if(this._rasterReadPromise&&this._rasterReadPromise.isCanceled())return;this._drawPixelData()}this._rasterReadPromise=
null},_requestData:function(ha,Z,W){this._rasterReadPromise&&this._rasterReadPromise.cancel();ha=G.clone(ha)._normalize(!0);this._rasterReadPromise=this.raster.read({extent:ha,width:this._map.width,height:this._map.height});this._rasterReadPromise.then(G.hitch(this,function(Q){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=Q&&Q.srcData?{extent:Q.extent,src:Q.srcData}:Q,this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!0),this._setPixelData(Q))}),
G.hitch(this,this._requestDataErrorHandler));return this._rasterReadPromise},_drawPixelData:function(ha){a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};this.drawMode||"css-transforms"!==this._map.navigationMode||(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top)),a.set(this._canvas,
m._css.names.transform,m._css.translate(-this._left,-this._top)),this._dragOrigin={x:0,y:0});this.useWebGL&&this._rasterRenderer&&this._rasterRenderer.draw(this.pixelData);if(this._canDraw()&&this.drawMode&&this.drawMode&&(ha=ha||this.pixelData)&&ha.pixelBlock){var Z=this.pixelFilter?this.pixelData:this._rasterRenderer?this._rasterRenderer.draw(ha):ha;ha=Z.pixelBlock;var W=this._context,Q=W.createImageData(ha.width,ha.height);Q.data.set(ha.getAsRGBA());Z=Z.extent;var ia=this._map.extent,R=this.getCurrentResolution(),
S=0,N=0;Math.abs(Z.xmin-ia.xmin)>R.x&&(S=Math.round((Z.xmin-ia.xmin)/R.x));Math.abs(ia.ymax-Z.ymax)>R.y&&(N=Math.round((ia.ymax-Z.ymax)/R.y));"css-transforms"===this._map.navigationMode?(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top)),a.set(this._canvas,m._css.names.transform,m._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+
"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}));this._dragOrigin={x:0,y:0};this.tileMode?this.clear(S,N,ha.width,ha.height):this.clear();W.putImageData(Q,S,N,0,0,ha.width,ha.height);this._fireUpdateEnd()}},hasStdTime:function(){if(!this.hasMultidimensions||"StdTime"!==this.raster.dataType)return!1;var ha=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition,Z=ha&&ha.length?ha[0].variableName:this._defaultMultidimensionalDefinition[0].variableName;
return this.raster.rasterInfo.multidimensionalInfo.variables.some(function(W){if(W.name===Z)return W.dimensions.some(function(Q){return"StdTime"===Q.name})})},getStdTimeValue:function(ha){return(new Date(864E5*(ha-25569))).toString()},computeHistograms:function(ha){ha=new r;var Z=this.getPixelData(!0);if(Z&&Z.pixelBlock&&Z.pixelBlock.pixels&&((new J({}))._calculateStatisticsHistograms(Z),Z.pixelBlock.histograms))return ha.resolve({histograms:Z.pixelBlock.histograms}),ha;ha.reject();return ha},_animatePan2d:function(){this._oldDelta&&
this._delta.x===this._oldDelta.x&&this._delta.y===this._oldDelta.y||(this.tileManager.updateTile(this.tileManager.originalPixelData,!0),this._oldDelta={x:this._delta.x,y:this._delta.y});this._roamingAnimation&&this.tileMode&&this.useWebGL&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))},_cancelAnimation:function(){this._animation&&(cancelAnimationFrame(this._animation),this._animation=null)},_updateAllTilesOnce:function(ha,Z){return this.tileManager.updateTile(ha,!0).then(G.hitch(this,
function(W){(this._hasTilingEffects||this.useWebGL||Z)&&this._drawOneFrame(W)}))},_drawOneFrame:function(ha,Z){if(!(this.suspended||!this._map||this.tileMode&&!this._drawTile||(this.tileMode&&this.useWebGL&&this.tileManager.originalPixelData.isEmpty&&this._context.clear(this._context.COLOR_BUFFER_BIT),this.tileMode&&this.useWebGL&&this.tileManager.xformSetting&&this.tileManager.xformSetting.requireProjection&&!this.tileManager.xformSetting.gridConfig))){if(!this._resetCss||this._levelChange)this._levelChange=
!1,this._resetDrawing();if(ha&&(ha.renderedPixelBlock||ha.pixelBlock)&&this._canDraw()&&this.drawMode){var W=ha.extent,Q=this._map.extent;if(!this._isExtentOutSide(W,Q)){var ia=ha.pixelBlock||ha.renderedPixelBlock,R=this._context,S=R.createImageData(ia.width,ia.height);S.data.set((ha.renderedPixelBlock||ha.pixelBlock).getAsRGBA());var N=this.getCurrentResolution(),X=0,aa=0;Math.abs(W.xmin-Q.xmin)>N.x&&(X=Math.round((W.xmin-Q.xmin)/N.x));Math.abs(Q.ymax-W.ymax)>N.y&&(aa=Math.round((Q.ymax-W.ymax)/
N.y));R.putImageData(S,X,aa,0,0,ia.width,ia.height)}}else this._fireUpdateEnd()}},_isExtentOutSide:function(ha,Z){return ha.xmax<=Z.xmin||ha.xmin>=Z.xmax||ha.ymax<=Z.ymin||ha.ymin>=Z.ymax},_resetDrawing:function(){this._resetCss=!0;if(!this.useWebGL)if(this._multiply||this._startRect.width!==this._map.width||this._startRect.height!==this._map.height)this.clear();else{var ha=this._context.getImageData(0,0,this._map.width,this._map.height);this.clear();this._context.putImageData(ha,this._startRect.left,
this._startRect.top)}this._dragOrigin={x:0,y:0};this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});"css-transforms"===this._map.navigationMode?(this.roaming&&this.tileMode&&this.useWebGL&&(this._delta=null),this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top)),a.set(this._canvas,m._css.names.transform,
m._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}))},_drawAllFrames:function(){if(!this.suspended&&this._map&&(!this.tileMode||this._drawTile))if(this._resetCss){var ha=this._frames,Z=0,W;for(W=0;W<ha.length;W++)if(ha[W].completed)Z++;else if(ha[W].tileData.renderedPixelBlock){ha[W].completed=!0;var Q=ha[W].tileData;
break}else if(ha[W].tileData._fetched&&!ha[W].tileData.src){ha[W].completed=!0;break}else if(ha[W].tileData.update&&ha[W].tileData.update.isFulfilled()&&!ha[W].tileData.renderedPixelBlock){ha[W].completed=!0;break}else ha[W].tileData.fetch&&(!0===ha[W].tileData.fetch||ha[W].tileData.fetch.isCanceled()||ha[W].tileData.fetch.isRejected())?(ha[W].completed=!0,Z++):this._isExtentOutSide(ha[W].tileData.extent,this._map.extent)&&(ha[W].completed=!0,Z++);if(Q){Z++;var ia=Q.extent,R=this._map.extent,S=this.getCurrentResolution(),
N=W=0;Math.abs(ia.xmin-R.xmin)>S.x&&(W=Math.round((ia.xmin-R.xmin)/S.x));Math.abs(R.ymax-ia.ymax)>S.y&&(N=Math.round((R.ymax-ia.ymax)/S.y));Q.renderedPixelBlock?(ia=Q.renderedPixelBlock,R=this._context.createImageData(ia.width,ia.height),R.data.set(Q.renderedPixelBlock.getAsRGBA()),this._context.putImageData(R,W,N,0,0,ia.width,ia.height)):this.clear(W,N,Q.width,Q.height)}Z===ha.length?(this._animation=null,this._fireUpdateEnd()):this._animation=requestAnimationFrame(G.hitch(this,this._drawAllFrames))}else this._resetDrawing(),
this._animation=requestAnimationFrame(G.hitch(this,this._drawAllFrames))},_fetchTiles:function(ha,Z){if(!this.suspended&&this.loaded){this._cancelAnimation();var W=this.tileManager,Q=!(W.xformSetting.requireProjection&&W.xformSetting.requirePE)||P.load();q(Q,G.hitch(this,function(){W.updateExtent(ha,this.getCurrentResolution());this._resetCss=!1;W.fetchTiles(Z);Z&&(this._hasTilingEffects||this.useWebGL?this.useWebGL&&0<W.tiles.length?(W.fillupTiles(),W._validateRawPixelBlocks(W.originalPixelData)?
this._updateAllTilesOnce(W.originalPixelData):W.originalPixelData&&W.originalPixelData.src&&W.tiles.some(function(ia){return ia.updateCompleted})&&this._context.clear(this._context.COLOR_BUFFER_BIT),W.tiles.forEach(G.hitch(this,function(ia){ia.update&&!ia.updateCompleted&&ia.update.then(function(R){ia.updateCompleted||(ia.updateCompleted=!0);(this._hasTilingEffects||this.useWebGL)&&this._drawOneFrame(R)}.bind(this))}))):this._hasTilingEffects&&q(W.fetchAllCompleted.isResolved()||W.fetchAllCompleted,
G.hitch(this,function(){this._updateAllTilesOnce(W.originalPixelData)})):(this._frames=W.tiles.map(function(ia){return{completed:!1,tileData:ia}}),this._drawAllFrames()))}))}},_redrawTiles:function(){this._fetchTiles(this._map.extent,!0)},_panHandler:function(ha,Z){this._drawTile=!1;"css-transforms"===this._map.navigationMode?this.roaming&&this.tileMode&&this.useWebGL?(this._delta=Z,!this._roamingAnimation&&this.tileMode&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))):(this._left=
this._map.__visibleDelta.x+Z.x,this._top=this._map.__visibleDelta.y+Z.y,a.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top))):a.set(this._div,{left:this._startRect.left+Z.x+"px",top:this._startRect.top+Z.y+"px"});this.tileMode&&this._fetchTiles(ha)},_panEndHandler:function(ha,Z){Z&&(this._startRect.left+=Z.x,this._startRect.top+=Z.y);this.oldData=null;this._roamingAnimation&&(cancelAnimationFrame(this._roamingAnimation),this._oldDelta=this._roamingAnimation=null)},_onScaleHandler:function(ha,
Z){var W={},Q=m._css.names;a.set(this._canvas,Q.transition,Z?"none":Q.transformName+" "+ma+"ms ease");this._matrix=ha;ha=this._multiply?p.multiply(ha,this._multiply):ha;if(this._tdx||this._tdy)ha=p.multiply(ha,{xx:1,xy:0,yx:0,yy:1,dx:-this._tdx,dy:-this._tdy});W[Q.transform]=m._css.matrix(ha);a.set(this._canvas,W)},_onZoomHandler:function(ha,Z,W){var Q=this._startRect;ha=Q.width*Z;Z*=Q.height;var ia=Q.left-(ha-Q.width)*(W.x-Q.left)/Q.width;W=Q.top-(Z-Q.height)*(W.y-Q.top)/Q.height;a.set(this._canvas,
{left:ia+"px",top:W+"px",width:ha+"px",height:Z+"px"});this._endRect={left:ia,top:W,width:ha,height:Z}},_onZoomEndHandler:function(){this._endRect&&(this._startRect=this._endRect)},_onResizeHandler:function(ha,Z,W){a.set(this._div,{width:Z+"px",height:W+"px"});a.set(this._canvas,{width:Z+"px",height:W+"px"});this._startRect.width=this._canvas.width=Z;this._startRect.height=this._canvas.height=W;this.useWebGL&&this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null)},_extentChangeHandler:function(ha,
Z,W,Q){if(this.loaded&&!this.suspended&&(!Z||0!==Z.x||0!==Z.y||W)){this._drawTile=!0;"css-transforms"===this._map.navigationMode&&(Z&&(this._dragOrigin.x+=Z.x,this._dragOrigin.y+=Z.y),this._left=this._map.__visibleDelta.x,this._top=this._map.__visibleDelta.y,this.roaming&&this.tileMode&&this.useWebGL||W||a.set(this._div,m._css.names.transform,m._css.translate(this._left,this._top)),W&&(a.set(this._canvas,m._css.names.transition,"none"),this._multiply=this._multiply?p.multiply(this._matrix,this._multiply):
this._matrix,this._levelChange=!0));this._fireUpdateStart();var ia=this._map;Z=this.raster.rasterFunction?this.raster.getMemberRasters().map(function(S){return S._rasterId}):[this.raster._rasterId];var R={};this.tileMode?((this.roaming||this.useWebGL)&&this.tileMode||(Z.forEach(function(S,N){R[S]={extent:ia.extent,pixelBlock:new I({width:ia.width,height:ia.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}),this.tileManager.originalPixelData={extent:ia.extent,src:R}),this.projectedFullExtent?
this._fetchTiles(ha,!0):this._getProjectedFullExtent(ia.spatialReference).then(G.hitch(this,function(){this._fetchTiles(ha,!0)}))):this._requestData(ia.extent,ia.width,ia.height)}},_visibilityChangeHandler:function(ha){ha?l.show(this._div):l.hide(this._div)},_opacityChangeHandler:function(ha){a.set(this._div,"opacity",ha)}});G.setObject("layers.RasterXLayer",K,m);return K})},"esri/layers/rasterLib/function/StretchFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./vertexShaders ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),
function(K,G,w,v,r,f,c){return K([w,c],{declaredClass:"esri.layers.rasterLib.function.StretchFunction",functionName:"Stretch",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,raster:null,computeGamma:!1},a);this.functionArguments.statistics=this._convertStats(this.functionArguments.statistics);-1===[0,3,
5,6].indexOf(this.functionArguments.stretchType)&&(this.functionArguments.stretchType=5);this.min=null==this.min?0:this.min;this.max=null==this.max?255:this.max},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to stretch function is invalid.");a.raster.statistics&&(this.srcStatistics=this._convertStats(a.raster.statistics));a.raster.histograms&&(this.srcHistograms=a.raster.histograms);this.rasterInfo=G.mixin({},a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,
"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){a=a.raster;this._stretch(a);return a},hasTilingEffects:function(a){a=a||this.functionArguments;return!!(a.dra||a.raster&&"object"===typeof a.raster&&a.raster.dra)},_convertStats:function(a){return a?a.map(function(b){return b&&null!=b.min?[b.min,b.max,b.mean,b.stddev]:b}):null},_updateStatistisHistograms:function(a){var b=
this.functionArguments,p=b.histograms||this.srcHistograms;if(a&&a.pixelBlock&&a.pixelBlock.pixels){if(0===b.stretchType)this._statistics=b.statistics&&0<b.statistics.length?b.statistics:this.srcStatistics,this._histograms=p;else{var q=a.pixelBlock,t=q.pixels.length,m=6===b.stretchType&&(b.dra||!p)||3===b.stretchType&&b.dra;m&&(q.statistics||q.calculateStatistics(),this._calculateStatisticsHistograms(a));if(b.dra)if(q.statistics||q.calculateStatistics(),m)this._statistics=q.statistics,this._histograms=
q.histograms;else for(b=q.statistics,this._statistics=[],a=0;a<t;a++)this._statistics[a]=[b[a].minValue,b[a].maxValue,0,0];else this._statistics=b.statistics&&0<b.statistics.length?b.statistics:this.srcStatistics,this._histograms=p}this._statistics=this._convertStats(this._statistics);this._gammaCorrection=this._getGammaCorrection()}else this._statistics=b.statistics&&0<b.statistics.length?b.statistics:this.srcStatistics,this._histograms=p,this._gammaCorrection=this._getGammaCorrection(),this._statistics=
this._convertStats(this._statistics)},_getGammaCorrection:function(){var a=this.functionArguments.gamma;if(a){var b=[],p;for(p=0;p<a.length;p++)b[p]=1<a[p]?2<a[p]?6.5+Math.pow(a[p]-2,2.5):6.5+100*Math.pow(2-a[p],4):1;return b}},_stretch:function(a){if(null!==a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels&&0!==this.functionArguments.stretchType){this._updateStatistisHistograms(a);var b=a.pixelBlock,p=b.pixels;b=b.width*b.height;var q=p.length,t,m;this._createLUT(a);if(null==this.LUT)return this._filterNoLUT(a);
var n=this.LUT,k=this.LUTOffset;for(t=0;t<q;t++){var l=n[t];for(m=0;m<b;m++){var h=p[t][m];p[t][m]=l[h-k]}}a.pixelBlock.pixelType="U8"}},_calculateStatisticsHistograms:function(a){a=a.pixelBlock;var b=a.pixelType,p=a.pixels,q=a.mask,t=p.length,m,n,k=function(C){this.min=-.5;this.max=255.5;this.size=256;G.mixin(this,C);this.counts=this.counts||new Uint32Array(this.size)},l=[],h,e;for(m=0;m<t;m++){var d=new k;var g=d.counts;var u=p[m];if("U8"===b)if(q)for(n=0;n<a.width*a.height;n++)q[n]&&g[u[n]]++;
else for(n=0;n<a.width*a.height;n++)g[u[n]]++;else{var x=a.statistics[m].minValue;var y=a.statistics[m].maxValue;d.min=x;d.max=y;y=(y-x)/256;var B=new Uint32Array(257);if(q)for(n=0;n<a.width*a.height;n++)q[n]&&B[Math.floor((u[n]-x)/y)]++;else for(n=0;n<a.width*a.height;n++)B[Math.floor((u[n]-x)/y)]++;for(n=0;255>n;n++)g[n]=B[n];g[255]=B[255]+B[256]}l.push(d);u=[];x=a.statistics[m].minValue;y=a.statistics[m].maxValue;for(n=e=h=B=0;n<d.size;n++)B+=g[n],h+=n*g[n];h/=B;for(n=0;n<d.size;n++)e+=g[n]*Math.pow(n-
h,2);g=Math.sqrt(e/(B-1));n=(h+.5)*(d.max-d.min)/d.size+d.min;d=g*(d.max-d.min)/d.size;u.push(x);u.push(y);u.push(n);u.push(d);a.statistics[m]={min:x,minValue:x,max:y,maxValue:y,mean:n,stddev:d}}a.histograms=l},_getCutOffPoints:function(a){var b=this.functionArguments,p=999;a&&a.pixelBlock?p=a.pixelBlock.pixels.length:a&&a.texture&&(p=3);a=Math.min(p,this._statistics.length);var q=[],t=[],m,n;switch(b.stretchType){case 5:for(m=0;m<a;m++)q[m]=this._statistics[m][0],t[m]=this._statistics[m][1];break;
case 3:for(m=0;m<a;m++)q[m]=this._statistics[m][2]-b.numberOfStandardDeviations*this._statistics[m][3],t[m]=this._statistics[m][2]+b.numberOfStandardDeviations*this._statistics[m][3],q[m]<this._statistics[m][0]&&(q[m]=this._statistics[m][0]),t[m]>this._statistics[m][1]&&(t[m]=this._statistics[m][1]);break;case 6:for(m=0;m<a;m++){p=this._histograms[m];var k=new Uint32Array(p.size);var l=p.counts;var h=0;var e=-.5===p.min&&1===(p.max-p.min)/l?.5:0;for(n=0;n<p.size;n++)h+=l[n],k[n]=h;l=b.minPercent*
h/100;for(n=0;n<p.size;n++)if(k[n]>l){q[m]=p.min+(p.max-p.min)/p.size*(n+e);break}l=(1-b.maxPercent/100)*h;for(n=p.size-2;0<=n;n--)if(k[n]<l){t[m]=p.min+(p.max-p.min)/p.size*(n+2-e);break}}break;default:for(m=0;m<p;m++)q[m]=0,t[m]=255}return{minCutOff:q,maxCutOff:t}},_createLUT:function(a){var b=this.functionArguments,p=a.pixelBlock,q=p.pixelType;if("U8"===q||"U16"===q||"S8"===q||"S16"===q){if(this._LUTSignature&&(q=this._computeLutSignature(),q.length===this._LUTSignature.length&&!q.some(function(z,
D){return z!==this._LUTSignature[D]}.bind(this))))return;q=p.pixels.length;var t=[],m=[],n=b.max,k=b.min,l=b.gamma,h=n-k,e=this._getCutOffPoints(a);a=e.minCutOff;e=e.maxCutOff;var d=0,g=256;"S8"===p.pixelType?d=-127:"S16"===p.pixelType&&(d=-32767);if("U16"===p.pixelType||"S16"===p.pixelType)g=65536;for(p=0;p<q;p++)t[p]=e[p]-a[p];var u=this._gammaCorrection;if(b.useGamma)for(p=0;p<q;p++){var x=[];for(b=0;b<g;b++){var y=b+d;var B=(y-a[p])/t[p];var C=1;1<l[p]&&(C-=Math.pow(1/h,B*u[p]));y<e[p]&&y>a[p]?
x[b]=Math.floor(C*h*Math.pow(B,1/l[p]))+k:y>e[p]?x[b]=n:y<a[p]&&(x[b]=k)}m[p]=x}else for(p=0;p<q;p++){x=[];for(b=0;b<g;b++)y=b+d,x[b]=y<a[p]?k:y>e[p]?n:Math.floor((y-a[p])/t[p]*h)+k;m[p]=x}this.LUT=m;this.LUTOffset=d;this._LUTSignature=this._computeLutSignature()}},_computeLutSignature:function(){var a=this.functionArguments,b=[],p,q;b.push(a.stretchType);b.push(a.min);b.push(a.max);b.push(a.numberOfStandardDeviations);if(this._statistics)for(p=0;p<this._statistics.length;p++)for(q=0;q<this._statistics[p].length;q++)b.push(this._statistics[p][q]);
b.push(a.dra?1:0);b.push(a.minPercent);b.push(a.maxPercent);if(a.gamma)for(p=0;p<this._statistics.length;p++)b.push(a.gamma[p]);b.push(a.useGamma?1:0);return b},_filterNoLUT:function(a){if(null!==a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels){var b=this.functionArguments,p=a.pixelBlock,q=p.pixels,t=p.mask;p=p.width*p.height;var m=q.length,n=[],k=[],l=b.max,h=b.min,e=b.gamma,d=l-h;var g=this._getCutOffPoints(a);var u=g.minCutOff,x=g.maxCutOff;for(g=0;g<m;g++)n[g]=x[g]-u[g];if(b.useGamma&&null!==
e&&e.length>=m)for(g=0;g<m;g++)k[g]=1<e[g]?2<e[g]?6.5+Math.pow(e[g]-2,2.5):6.5+100*Math.pow(2-e[g],4):1;if(b.useGamma)if(void 0!==t&&null!==t)for(b=0;b<p;b++){if(t[b])for(g=0;g<m;g++){var y=q[g][b];var B=(y-u[g])/n[g];var C=1;1<e[g]&&(C-=Math.pow(1/d,B*k[g]));y<x[g]&&y>u[g]?q[g][b]=Math.floor(C*d*Math.pow(B,1/e[g]))+h:y>x[g]?q[g][b]=l:y<u[g]&&(q[g][b]=h)}}else for(b=0;b<p;b++)for(g=0;g<m;g++)y=q[g][b],B=(y-u[g])/n[g],C=1,1<e[g]&&(C-=Math.pow(1/d,B*k[g])),y<x[g]&&y>u[g]?q[g][b]=Math.floor(C*d*Math.pow(B,
1/e[g]))+h:y>x[g]?q[g][b]=l:y<u[g]&&(q[g][b]=h);else if(void 0!==t&&null!==t)for(b=0;b<p;b++){if(t[b])for(g=0;g<m;g++)y=q[g][b],y<x[g]&&y>u[g]?q[g][b]=Math.floor((y-u[g])/n[g]*d)+h:y>x[g]?q[g][b]=l:y<u[g]&&(q[g][b]=h)}else for(b=0;b<p;b++)for(g=0;g<m;g++)y=q[g][b],y<x[g]&&y>u[g]?q[g][b]=Math.floor((y-u[g])/n[g]*d)+h:y>x[g]?q[g][b]=l:y<u[g]&&(q[g][b]=h);a.pixelBlock.pixelType="U8";return a}},_computeGammaValues:function(a){var b=this._statistics.length,p,q=[];for(p=0;p<b;p++){var t=this._statistics[p][2];
"U8"!==a&&(t=255*(t-this._statistics[p][0])/(this._statistics[p][1]-this._statistics[p][0]));q.push(this._computeGammaValue(t))}return q},_computeGammaValue:function(a){if(0!==a&&!(255<a||0>a)){var b=0;0<a&&150!=a&&255>a&&(b=150>=a?45*Math.cos(.01047*a):17*Math.sin(.021*a));b=Math.log((a+b)/255);if(0!==b&&(a=Math.log(a/255)/b,!isNaN(a)))return Math.min(9.9,Math.max(.01,a))}},readGL:function(a){return this._stretchGL(a.raster)},_stretchGL:function(a){this._performance.start();var b=this.renderTexture,
p,q=a.pixelBlock&&a.pixelBlock.pixels&&a.pixelBlock.pixels.length||this.sourceRasterInfo.raster.bandCount,t=a.pixelBlock,m=this.gl,n=m.drawingBufferWidth,k=m.drawingBufferHeight;if(!t&&this.functionArguments.dra){var l=new Float32Array(n*k*4),h=new Uint8Array(n*k);var e=new Float32Array(n*k);var d=new Float32Array(n*k);var g=new Float32Array(n*k);m.checkFramebufferStatus(m.FRAMEBUFFER)==m.FRAMEBUFFER_COMPLETE&&m.readPixels(0,0,n,k,m.RGBA,m.FLOAT,l);for(p=0;p<n*k;p++)e[p]=l[4*p],d[p]=l[4*p+1],g[p]=
l[4*p+2],h[p]=l[4*p+3];a.pixelBlock=new v({width:n,height:k,pixels:[e,d,g],mask:h});a.pixelBlock.calculateStatistics()}!t&&this.functionArguments.dra&&this._useGPUStats?(e=new Float32Array(q),d=new Float32Array(q)):(this._updateStatistisHistograms(a),l=this._getCutOffPoints(a),e=new Float32Array(q),d=new Float32Array(q),e.set(l.minCutOff.slice(0,q)),d.set(l.maxCutOff.slice(0,q)));this._initializeProgram({fragment:f.stretch,fragmentName:"Stretch"});l=this._setupTextureData(a);h=this.bindFrameBuffer();
this.renderTexture=!1;this._performance.start();if(!t&&this.functionArguments.dra&&this._useGPUStats){this._setUniforms({u_sourceDim:[n,k],u_bandCount:q});if(1===q)var u=this._readMinMax(l,2);else{u=this._readMinMax(l,0);var x=this._readMinMax(l,1)}if(6===this.functionArguments.stretchType||3===this.functionArguments.stretchType&&this.functionArguments.dra)p=this._readHistogram(u,x,a),e=p.minCutOff||e,d=p.minCutOff||d}g=this.functionArguments.max-this.functionArguments.min;a=new Float32Array(q);for(p=
0;p<q;p++)a[p]=g/(d[p]-e[p]);this._useGPUStats&&this._initializeProgram({fragment:f.stretch,fragmentName:"Stretch"});m.blendFunc(m.SRC_ALPHA,m.ZERO);g=new Float32Array(3);var y=new Float32Array(3);for(p=0;3>p;p++)g[p]=this.functionArguments.min,y[p]=this.functionArguments.max;p=this.functionArguments.useGamma;var B=this.functionArguments.gamma,C=this._gammaCorrection;Array.isArray(B)&&B.length>=q||(p=!1);this._setUniforms({u_sourceDim:[n,k],u_bandCount:q,u_minOutput:g,u_maxOutput:y,u_minCutOff:e,
u_maxCutOff:d,u_factor:a,u_state:100,u_useGamma:p,u_gamma:B,u_scaled:!b,u_gammaCorrection:C,u_minMaxTexture:!t&&this.functionArguments.dra&&this._useGPUStats?!0:!1});this.renderTexture=b;m.viewport(0,0,n,k);this._bindTexture(l.texture,"u_image");!t&&this.functionArguments.dra&&this._useGPUStats&&(b=m.getUniformLocation(this.rasterProgram,"u_image1"),m.uniform1i(b,1),m.activeTexture(m.TEXTURE1),m.bindTexture(m.TEXTURE_2D,u.texture),1<q&&(q=m.getUniformLocation(this.rasterProgram,"u_image2"),m.uniform1i(q,
2),m.activeTexture(m.TEXTURE2),m.bindTexture(m.TEXTURE_2D,x.texture)));this._drawGL();return{extent:l.extent,texture:h.texture}},_readMinMax:function(a,b){var p=this.gl,q=a.width||p.drawingBufferWidth,t=a.height||p.drawingBufferHeight;this._setUniforms({u_state:b});this.renderTexture=!1;var m=a.texture;for(p.activeTexture(p.TEXTURE0);1<q||1<t;){var n=this._createTexture();var k=Math.max(Math.ceil(q/2),1);var l=Math.max(Math.ceil(t/2),1);p.getExtension("OES_texture_float");p.texImage2D(p.TEXTURE_2D,
0,p.RGBA,k,l,0,p.RGBA,p.FLOAT,null);var h=p.createFramebuffer();p.bindFramebuffer(p.FRAMEBUFFER,h);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,n,0);p.viewport(0,0,k,l);p.bindTexture(p.TEXTURE_2D,m);this._setUniforms({u_sourceDim:[q,t]});q=k;t=l;this._drawGL(!0);m=n}h=new Float32Array(q*t*4);p.checkFramebufferStatus(p.FRAMEBUFFER)==p.FRAMEBUFFER_COMPLETE&&p.readPixels(0,0,q,t,p.RGBA,p.FLOAT,h);return{texture:n,minmax:h}},_readHistogram:function(a,b,p){if(a)try{var q=this.gl,
t=q.drawingBufferWidth,m=q.drawingBufferHeight,n,k,l;if(a.texture instanceof WebGLTexture){var h=!0;var e=[1,0,0,1];if(b){var d=a.minmax;var g=b.minmax}else d=[a.minmax[0]],g=[a.minmax[1]]}else for(g=b,d=a,e=new Float32Array(g.length),n=0;n<g.length;n++)e[n]=256/(g[n]-d[n]);var u=new Float32Array(t*m);for(l=0;l<u.length;l++)u[l]=l;if(!this.histogramProgram){var x=r.getShader(q,r.histogram),y=f.getShader(q,f.constant);this.histogramProgram=this._loadProgram(x,y)}q.blendFunc(q.ONE,q.ONE);q.enable(q.BLEND);
q.useProgram(this.histogramProgram);var B=q.getAttribLocation(this.histogramProgram,"a_pixelIndex"),C=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,C);q.bufferData(q.ARRAY_BUFFER,u,q.STATIC_DRAW);q.enableVertexAttribArray(B);q.vertexAttribPointer(B,1,q.FLOAT,!1,0,0);var z=this._setupHistTexture(p),D=this._createTexture();q.getExtension("OES_texture_float");q.texImage2D(q.TEXTURE_2D,0,q.RGBA,257,1,0,q.RGBA,q.FLOAT,null);var E=q.createFramebuffer();q.bindFramebuffer(q.FRAMEBUFFER,E);q.framebufferTexture2D(q.FRAMEBUFFER,
q.COLOR_ATTACHMENT0,q.TEXTURE_2D,D,0);q.viewport(0,0,257,1);var A=q.getUniformLocation(this.histogramProgram,"u_image");q.uniform1i(A,0);q.activeTexture(q.TEXTURE0);q.bindTexture(q.TEXTURE_2D,z);var F=q.getUniformLocation(this.histogramProgram,"u_sourceDim");q.uniform2f(F,t,m);var H=q.getUniformLocation(this.histogramProgram,"u_bandCount");q.uniform1i(H,3);var I=q.getUniformLocation(this.histogramProgram,"u_halfPixel");q.uniform2f(I,.5/t,.5/m);var L=q.getUniformLocation(this.histogramProgram,"u_minMaxTexture");
if(h){q.uniform1i(L,1);var J=q.getUniformLocation(this.histogramProgram,"u_image1");q.uniform1i(J,1);q.activeTexture(q.TEXTURE1);q.bindTexture(q.TEXTURE_2D,a.texture);if(b){var O=q.getUniformLocation(this.histogramProgram,"u_image2");q.uniform1i(O,2);q.activeTexture(q.TEXTURE2);q.bindTexture(q.TEXTURE_2D,b.texture)}}else{var P=q.getUniformLocation(this.histogramProgram,"u_mins");q.uniform4f(P,d[0],d[0],d[0],d[0]);q.uniform1i(L,0)}var fa=q.getUniformLocation(this.histogramProgram,"u_color"),V=q.getUniformLocation(this.histogramProgram,
"u_factors"),ba=q.getUniformLocation(this.histogramProgram,"u_size");q.uniform1f(ba,256);a=[];b=[];q.uniform4fv(fa,[1,0,0,1]);q.uniform4fv(V,[e[0],0,0,1]);q.drawArrays(q.POINTS,0,u.length);var ka=this.sourceRasterInfo.raster.bandCount;1<ka&&(q.uniform4fv(fa,[0,1,0,1]),q.uniform4fv(V,[0,e[0],0,1]),q.drawArrays(q.POINTS,0,u.length),q.uniform4fv(fa,[0,0,1,1]),q.uniform4fv(V,[0,0,e[0],1]),q.drawArrays(q.POINTS,0,u.length));if(q.checkFramebufferStatus(q.FRAMEBUFFER)==q.FRAMEBUFFER_COMPLETE){var la=new Float32Array(1028);
q.readPixels(0,0,257,1,q.RGBA,q.FLOAT,la);q=0;var ma=-.5===d[0]&&1===(g[0]-d[0])/256?.5:0;for(n=0;n<ka;n++){var ha=new Float32Array(257);var Z=new Float32Array(257);for(l=q=0;256>l;l++)q+=la[4*l+n],ha[l]=q,Z[l]=la[4*l+n];Z[256]=la[1024+n];ha[256]=q+la[1024+n];var W=this.functionArguments.minPercent*q/100;if(g){for(k=0;256>k;k++)if(ha[k]>W){a[n]=d[0]+(g[0]-d[0])/256*(k+ma);break}W=(1-this.functionArguments.maxPercent/100)*q;for(k=254;0<=k;k--)if(ha[k]<W){b[n]=d[0]+(g[0]-d[0])/256*(k+2-ma);break}}}}return{histogram:la,
minCutOff:a,maxCutOff:b}}catch(Q){}},_setupHistTexture:function(a){if(a instanceof WebGLTexture)return a;var b=this.originalHistTexture=this._createTexture(),p=this.gl;a=a.pixelBlock;var q=a.width,t=a.height;p.getExtension("OES_texture_float");this.rgbaFloatData=a.getAsRGBAFloat();p.texImage2D(p.TEXTURE_2D,0,p.RGBA,q,t,0,p.RGBA,p.FLOAT,this.rgbaFloatData);return b}})})},"esri/layers/rasterLib/function/RasterFunctionX":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/config ../raster/RasterInfo ../../../geometry/Extent ../../PixelBlock".split(" "),
function(K,G,w,v,r,f){return K(null,{functionName:null,functionArguments:null,pixelType:"Unknown",rasterInfo:null,constructor:function(c){c&&(this.pixelType=c.outputPixelType||c.OutputPixelType||this.pixelType,this.renderTexture=c.renderTexture,this._initFunction())},mixinIgnoreCase:function(c,a){var b=Object.keys(c),p=Object.keys(a),q,t,m=b.length;for(q=0;q<p.length;q++){var n=a[p[q]];if(null!=n)for(t=0;t<m;t++)if(b[t].toLowerCase()===p[q].toLowerCase()){c[b[t]]=n;break}}return c},bind:function(c){},
setProcessingContext:function(c){if(!c)throw"cannot bind to layer without options";this.useWebGL=!!c.useWebGL;this._tileMode=!!c.tileMode;this._glSetting=c.glSetting;this._rawRasterInfo=c.rawRasterInfo;this._xformSetting=c.xformSetting||this._xformSetting;if(!this.useWebGL||this._glSetting&&this._glSetting.gl){this.gl=this.useWebGL?this._glSetting.gl:null;this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null);var a=this.functionArguments.raster,b=this.functionArguments.raster2,
p=this.functionArguments.dem,q=this.functionArguments.fillRaster,t=this.functionArguments.rasters;a&&a.functionArguments&&a.setProcessingContext(c);b&&b.functionArguments&&b.setProcessingContext(c);p&&p.functionArguments&&p.setProcessingContext(c);q&&q.functionArguments&&q.setProcessingContext(c);if(t)for(a=0;a<t.length;a++)t[a]&&t[a].functionArguments&&t[a].setProcessingContext(c);this.bind()}},updateBranchStructure:function(){var c=0,a=this.functionArguments;a.raster&&a.raster.read&&a.raster.functionArguments&&
(c+=a.raster.updateBranchStructure());a.raster2&&a.raster2.read&&a.raster2.functionArguments&&(c+=a.raster2.updateBranchStructure(),a.raster2.isBranch=!0,a.raster&&a.raster.read&&(a.raster.isBranch=!0));a.rasters&&(c=a.rasters.length,a.rasters.forEach(function(b){b.read&&b.functionArguments&&(b.isBranch=!0)}));a.dem&&a.dem.read&&a.dem.functionArguments&&(c+=a.dem.updateBranchStructure());return 1===c?0:c},read:function(c){c=this.processRasterArgument(c);return this.useWebGL?this.readGL(c):this.read2D(c)},
hasTilingEffects:function(){return!1},read2D:function(){},readGL:function(){},getSourceRasterInfo:function(){var c,a={};if(this.functionArguments.raster2)a.functionArguments.raster=this._bindRaster(this.functionArguments.raster),a.functionArguments.raster2=this._bindRaster(this.functionArguments.raster2);else if(this.functionArguments.rasters)for(a.rasters=[],c=0;c<this.functionArguments.rasters.length;c++)a.rasters[c]=this._bindRaster(this.functionArguments.rasters[c]);else a.raster=this._bindRaster(this.functionArguments.raster);
return this.sourceRasterInfo=a},processRasterArgument:function(c){var a=this.bind();if(!0!==a)throw a;var b={};if(this.functionArguments.raster2)b.raster=this._readRaster(this.functionArguments.raster,c),b.raster2=this._readRaster(this.functionArguments.raster2,c);else if(this.functionArguments.rasters)for(b.rasters=[],a=0;a<this.functionArguments.rasters.length;a++)b.rasters[a]=this._readRaster(this.functionArguments.rasters[a],c);else b.raster=this._readRaster(this.functionArguments.raster,c);return b},
toJson:function(){var c=this.functionArguments,a=c.raster,b=c.raster2;c=c.rasters;a=a?a.toJson?a.toJson():a:null;b=b?b.toJson?b.toJson():b:null;var p;c&&0<c.length&&(p=c.map(function(q){return q.toJson?q.toJson():q}));c=G.mixin({},this.functionArguments);c.raster=a;c.raster2=b;c.rasters=p;c=this._fixRasterFunctionJson(c);return{rasterFunction:this.functionName,rasterFunctionArguments:c,outputPixelType:this.pixelType}},_initFunction:function(c){},_getIntegerRange:function(c){switch(c){case "U8":var a=
[0,255];break;case "U16":a=[0,65535];break;case "U32":a=[0,4294967295];break;case "S8":a=[-128,127];break;case "S16":a=[-32768,32767];break;case "S32":a=[-2147483648,2147483647]}return a},_calculatePixelType:function(c,a){return c&&"unknown"!==c.toLowerCase()?c:a},_clonePixelData:function(c){if(null==c)return c;var a={};c.extent&&(a.extent=new r(c.extent.xmin,c.extent.ymin,c.extent.xmax,c.extent.ymax,c.extent.spatialReference));c=c.pixelBlock;if(null==c)return a;a.pixelBlock=c.clone?c.clone():f.prototype.clone(c);
return a},_readRaster:function(c,a){if(null==c||"$$"===c)var b=this._clonePixelData(a.src[Object.keys(a.src)[0]]);else if(c&&c.rasterInfo&&!c.functionArguments)b=this._clonePixelData(a.src[c._rasterId]);else if(isNaN(c))c.read&&(b=c.functionArguments?c.read(a):this._clonePixelData(a));else{b=a.src?a.src[Object.keys(a.src)[0]]:a;var p=b.pixelBlock;p=new Float32Array(p.width*p.height);p.fill(parseFloat(c));b=this._clonePixelData(b);b.pixelBlock.pixels=[p];b.isConstant=!0}return b},_bindRaster:function(c){if(c&&
"$$"!==c)isNaN(c)?c.rasterInfo?a=c.rasterInfo:c.bind&&c.bind()&&(a=c.rasterInfo):a={};else var a=this._rawRasterInfo;a&&(a=a.clone?a.clone():new v(a),a.bandCount=a.bandCount||3);return a},_getOutputBand:function(c,a){switch(c){case "U8":var b=new Uint8Array(a);break;case "U16":b=new Uint16Array(a);break;case "U32":b=new Uint32Array(a);break;case "S8":b=new Int8Array(a);break;case "S16":b=new Int16Array(a);break;case "S32":b=new Int32Array(a);break;case "U32":b=new Uint32Array(a);break;case "F32":b=
new Float32Array(a);break;case "F64":b=new Float64Array(a);break;default:b=new Float32Array(a)}return b},_clampBand:function(c,a,b){if(("F64"===a||"F32"===a)&&!b)return c;var p,q=this._getIntegerRange(a),t=c.length;if(q)for(b=q[1],q=q[0],a=this._getOutputBand(a,t),p=0;p<t;p++){var m=c[p];a[p]=m>b?b:m<q?q:m}else a=c;return a},_performance:{start:function(){return this._start=self.performance&&self.performance.now()||new Date}.bind(this),elapsed:function(){return(self.performance&&self.performance.now()||
new Date)-this._start}.bind(this)},_addPerformanceMetric:function(c){w.isDebug&&(self.rasterFunctionPerformance||(self.rasterFunctionPerformance=[]),self.rasterFunctionPerformance.push(c),50<self.rasterFunctionPerformance.length&&self.rasterFunctionPerformance.shift())},_fixRasterFunctionJson:function(c){for(var a in c)c.hasOwnProperty(a)&&(null==c[a]?delete c[a]:c[a]instanceof Object&&!c[a].sourceType&&this._fixRasterFunctionJson(c[a],!0));return c}})})},"esri/layers/rasterLib/raster/RasterInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../geometry/Extent","../../../SpatialReference","../tile/RasterTileInfo"],function(K,G,w,v,r){return K(null,{declaredClass:"esri.layers.rasterLib.raster.RasterInfo",bandCount:null,pixelType:null,extent:null,spatialReference:null,width:null,height:null,colormap:null,attributeTable:null,multiDimensionalInfo:null,statistics:null,histograms:null,catalogInfo:null,keyProperties:null,cellSize:null,format:null,compression:null,compressionQuality:null,packetSize:null,geodataXform:null,
constructor:function(f){G.mixin(this,f);this.extent=this.extent?this.extent.toJson?this.extent:new w(this.extent):null;this.spatialReference=this.spatialReference?this.spatialReference.toJson?this.spatialReference:new v(this.spatialReference):null;this.tileInfo=this.tileInfo?this.tileInfo.toJson?this.tileInfo:new r(this.tileInfo):null},toJson:function(){return{bandCount:this.bandCount,pixelType:this.pixelType,extent:this.extent&&this.extent.toJson?this.extent.toJson():this.extent,spatialReference:this.spatialReference&&
this.spatialReference.toJson?this.spatialReference.toJson():this.spatialReference,width:this.width,height:this.height,colormap:this.colormap?G.clone(this.colormap):null,attributeTable:this.attributeTable?G.clone(this.attributeTable):null,multiDimensionalInfo:this.multiDimensionalInfo?G.clone(this.multiDimensionalInfo):null,statistics:this.statistics?G.clone(this.statistics):null,histograms:this.histograms?G.clone(this.histograms):null,catalogInfo:this.catalogInfo?G.clone(this.catalogInfo):null,keyProperties:this.keyProperties?
G.clone(this.keyProperties):null,cellSize:this.cellSize&&this.cellSize.toJson?this.cellSize.toJson():this.cellSize,tileInfo:this.tileInfo&&this.tileInfo.toJson?this.tileInfo.toJson():this.tileInfo,format:this.format,compression:this.compression,compressionQuality:this.compressionQuality,packetSize:this.packetSize,geodataXform:this.geodataXform?G.clone(this.geodataXform):null}},clone:function(){return new this.constructor(this.toJson())}})})},"esri/layers/rasterLib/tile/RasterTileInfo":function(){define("dojo/_base/declare dojo/_base/lang ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../../lang ../../TileInfo".split(" "),
function(K,G,w,v,r,f,c){return K([c],{declaredClass:"esri.layers.rasterLib.tile.RasterTileInfo",rows:512,cols:512,compressionQuality:95,lercError:.01,spatialReference:null,origin:null,virtual:!0,tileType:"Raster",constructor:function(a,b){if(a||b){var p=b&&b.refTileInfo;a?this.virtual=!1:(this.virtual=!0,G.mixin(this,{rows:b.rows||this.rows,cols:b.cols||this.cols,compressionQuality:b.compressionQuality||95,lercError:b.compressionTolerance||.01,spatialReference:b.spatialReference,origin:b.origin}),
this.width=this.cols,this.height=this.rows,this.origin||(p?this.origin=p.origin:b.spatialReference.isWebMercator()||b.extent&&360<=Math.max(Math.abs(b.extent.xmin),Math.abs(b.extent.xmax))?this.origin={x:-2.0037508342787E7,y:2.0037508342787E7}:-1<[4326,4269].indexOf(b.spatialReference.wkid)||360>Math.max(Math.abs(b.extent.xmin),Math.abs(b.extent.xmax))?this.origin={x:-180,y:90}:this.origin={x:b.extent.xmin,y:b.extent.ymax}))}},toJson:function(){var a=c.prototype.toJson.apply(this);a.tileType=this.tileType;
a.virtual=this.virtual;a.lercError=this.lercError;return a},clone:function(){return new this.prototype(this.toJson())}})})},"esri/layers/rasterLib/function/vertexShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./vertexShaderScripts"],function(K,G,w){K={shaderType:"vertex",getShader:function(v,r){var f=v.createShader(v.VERTEX_SHADER);v.shaderSource(f,r);v.compileShader(f);v.getShaderParameter(f,v.COMPILE_STATUS)||(f=null);return f}};G.mixin(K,w);return K})},"esri/layers/rasterLib/function/vertexShaderScripts":function(){define([],
function(){return{basic:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform bool u_flipY;\nvoid main() {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}",histogram:"attribute float a_pixelIndex;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nuniform vec2 u_sourceDim;\nuniform vec2 u_halfPixel;\nuniform vec4 u_bandSelection;\nuniform vec4 u_mins;\nuniform vec4 u_factors;\nuniform float u_size;\nuniform int u_bandCount;\nuniform bool u_minMaxTexture;\nvoid main() {\nfloat row \x3d a_pixelIndex/u_sourceDim.s;\nvec2 coord \x3d vec2(fract(row), floor(row)/u_sourceDim.t);\nvec4 pv \x3d texture2D(u_image, coord + u_halfPixel);\nvec4 minVal, maxVal, pvm;\nif (u_minMaxTexture){\nif (u_bandCount \x3d\x3d1){ //min \x3d red, max \x3d green\nvec4 minmax \x3d texture2D(u_image1, vec2(0.5,0.5));\nminVal \x3d vec4(minmax.r, minmax.r, minmax.r, 0.0);\nmaxVal \x3d vec4(minmax.g, minmax.g, minmax.g, 0.0);\n}\nelse if (u_bandCount \x3d\x3d3){ //min \x3d red, max \x3d green\nminVal \x3d texture2D(u_image1, vec2(0.5,0.5));\nmaxVal \x3d texture2D(u_image2, vec2(0.5,0.5));\n}\nvec4 factors \x3d u_size/(maxVal-minVal+vec4(0.0,0.0,0.0,1.0)) * u_factors;\npvm \x3d (pv - minVal) * factors;\n}\nelse {\npvm \x3d (pv - u_mins) * u_factors;\n}\nfloat histVal \x3d min(floor(pvm.r+pvm.g+pvm.b), u_size-1.0);\nhistVal \x3d pv.a \x3d\x3d 1.0? histVal: u_size;\ngl_Position \x3d vec4((histVal+0.1) / (u_size+1.0) * 2.0 - 1.0, 0.5, 0, 1);\ngl_PointSize \x3d 1.0;\n}",
mesh:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform bool u_drawMeshLines;\nuniform bool u_flipY;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nuniform vec2 u_srcImageSize;\nuniform bool u_projection;\nvec2 projectPixelLocation(vec2 coords) {\nvec2 index_image \x3d floor(coords * u_targetImageSize);\nvec2 oneTransformPixel \x3d vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform \x3d floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos \x3d fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location \x3d index_transform + oneTransformPixel * 0.5;\nif (pos.s \x3c\x3d pos.t) {\nvec4 ll_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;// + halfPixel;\n}\nvoid main() {\nif (u_projection) {\nv_texCoord \x3d projectPixelLocation(a_texCoord);\n} else {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\n}\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\nif (u_drawMeshLines){\nvec2 adjustedPos \x3d (v_texCoord - u_xformOffset) / u_xformScale;\ngl_Position \x3d vec4( adjustedPos * 2.0 - 1.0, 0.0, 1.0);\n}\nelse {\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}\n}"}})},
"esri/layers/rasterLib/function/pixelShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaderScripts"],function(K,G,w){K={shaderType:"fragment",getShader:function(v,r){var f=v.createShader(v.FRAGMENT_SHADER);v.shaderSource(f,r);v.compileShader(f);v.getShaderParameter(f,v.COMPILE_STATUS)||(f=null);return f}};G.mixin(K,w);return K})},"esri/layers/rasterLib/function/pixelShaderScripts":function(){define([],function(){return{aspect:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nfloat pi \x3d 3.141592653589793238;\nfloat dz_dx \x3d 0.0;\nfloat dz_dy \x3d 0.0;\nvec4 va, vb, vc,vd,ve,vf,vg,vh,vi;\nvec2 axy \x3d vec2(-1.0,-1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s)\n{\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t)\n{\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e1.0-u_resolution.s)\n{\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0- u_resolution.t)\n{\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0-u_resolution.s)\x3e\x3dv_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0-u_resolution.t)\x3e\x3dv_texCoord.t)\n{\nva \x3d texture2D(u_image, v_texCoord + u_resolution* axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution* bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution* cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution* dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution* vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution* fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution* gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution* hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution* ixy);\n}\ndz_dx \x3d (vc+2.0*vf+vi - va - 2.0*vd - vg).r/(8.0*u_cellSize[0]);\ndz_dy \x3d -(vg+2.0*vh+vi - va - 2.0*vb - vc).r/(8.0*u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat aspect_rad \x3d 0.0;\nif (dz_dx \x3d\x3d 0.0)\n{\nif (dz_dy \x3e 0.0)\naspect_rad \x3d 0.5 * pi;\nelse if (dz_dy \x3c 0.0)\naspect_rad \x3d 1.5 * pi;\nelse\nalpha \x3d 0.0;//undefined make it nodata\n}\nelse\n{\naspect_rad \x3d 0.5*pi + atan(dz_dy, -dz_dx);\nif (aspect_rad \x3c 0.0)\naspect_rad \x3d 2.0*pi + aspect_rad;\n}\nfloat aspect \x3d aspect_rad * 180.0 / pi;\ngl_FragColor \x3d vec4(aspect, aspect, aspect, alpha);\n}",
bandArithmetic:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_nir;\nuniform int u_bandId_red;\nuniform bool u_scaled;\nuniform int u_bandCount;\nuniform int u_method;\nuniform float u_constants[6];\nvec4 calculateNDVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n} else {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nvec4 calculateSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat savi_denom \x3d nir + red + u_constants[0];\nfloat savi;\nif (savi_denom \x3d\x3d 0.0) {\nsavi \x3d 0.0;\n} else {\nsavi \x3d (nir - red) / savi_denom * (1.0 + u_constants[0]);\n}\nreturn vec4(savi, savi, savi, currentPixel.a);\n}\nvec4 calculateMSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat msavi \x3d 0.5 * (2.0 * (nir + 1.0) - sqrt(pow((2.0 * nir + 1.0), 2.0) - 8.0 * (nir - red)));\nreturn vec4(msavi, msavi, msavi, currentPixel.a);\n}\nvec4 calculateTSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat s \x3d u_constants[0];\nfloat a \x3d u_constants[1];\nfloat x \x3d u_constants[2];\nfloat tsavi_denom \x3d a * nir + red - a * s + x * (1.0 + s * s);\nfloat tsavi;\nif (tsavi_denom \x3d\x3d 0.0) {\ntsavi \x3d 0.0;\n} else {\ntsavi \x3d s * (nir - s * red - a) / tsavi_denom;\n}\nreturn vec4(tsavi, tsavi, tsavi, currentPixel.a);\n}\nvec4 calculatePVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat a \x3d u_constants[0];\nfloat b \x3d u_constants[1];\nfloat pvi \x3d (nir - a * red - b) / sqrt(1.0 + a * 2.0);\nreturn vec4(pvi, pvi, pvi, currentPixel.a);\n}\nvec4 calculateGEMI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat gemi;\nif (red \x3d\x3d 1.0) {\ngemi \x3d 0.0;\n} else {\nfloat eta \x3d (2.0 * (nir * nir - red * red) + 1.5 * nir + 0.5 * red) / (nir + red + 0.5);\nfloat gemi \x3d eta * (1.0 - 0.25*eta) - (red - 0.125) / (1.0 - red);\n}\nreturn vec4(gemi, gemi, gemi, currentPixel.a);\n}\nvec4 calculateVARI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(currentPixel.r);\nfloat green \x3d float(currentPixel.g);\nfloat blue \x3d float(currentPixel.b);\nfloat vari \x3d (green - red) /(green + red - blue);\nreturn vec4(vari, vari, vari, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 pv;\nif (u_method \x3c 4) {\nif (u_method \x3d\x3d 1) {\npv \x3d calculateNDVI();\n} else if (u_method \x3d\x3d 2) {\npv \x3d calculateSAVI();\n} else if (u_method \x3d\x3d 3) {\npv \x3d calculateTSAVI();\n} else if (u_method \x3d\x3d 4) {\npv \x3d calculateMSAVI();\n}\n} else {\nif (u_method \x3d\x3d 5) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 6) {\npv \x3d calculatePVI();\n} else if (u_method \x3d\x3d 7) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 9) {\npv \x3d calculateVARI();\n}\n}\ngl_FragColor \x3d pv;\n}",
colormap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nvec4 colorize() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat clrIndex \x3d currentPixel.r - u_indexedColormapOffset;\nvec4 result;\nif (currentPixel.a \x3d\x3d 0.0 || clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d colorize();\n}",
compositeBand:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 composite() {\nvec4 p0, p1, p2;\np0 \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nif (u_rasterCount \x3d\x3d 1){\nresult \x3d p0;\n}\nelse if (u_rasterCount \x3d\x3d 2){\np1 \x3d texture2D(u_image1, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,0.0,min(p0.a,p1.a));\n}\nelse if (u_rasterCount \x3d\x3d 3){\np1 \x3d texture2D(u_image1, v_texCoord);\np2 \x3d texture2D(u_image2, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,p2.r,min(min(p0.a,p1.a),p2.a));\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d composite();\n}",
constant:"precision mediump float;\nuniform vec4 u_color;\nvoid main() {\ngl_FragColor \x3d u_color;\n}",contrastBrightness:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nuniform float u_scaleFactor;\nvec4 adjustContrastBrightness() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat c \x3d u_contrastOffset;\nfloat b \x3d u_brightnessOffset;\nfloat maxI \x3d 255.0;\nfloat mid \x3d 128.0;\nvec4 v;\nif (c \x3e 0.0 \x26\x26 c \x3c 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c \x3c\x3d 0.0 \x26\x26 c \x3e -100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c \x3d\x3d 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv \x3d (sign(v) + 1.0) / 2.0; //binary contrast with extra mid tone at 0.5\n} else if (c \x3d\x3d -100.0) {\nv \x3d vec4(mid, mid, mid, currentPixel.a); //no contrast\n}\nreturn vec4(v.r / u_scaleFactor, v.g / u_scaleFactor, v.b / u_scaleFactor, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d adjustContrastBrightness();\n}",
convolution:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform float u_kernel[25];\nuniform int u_kernelSize;\nvec4 convolve33(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nvec2 xy11 \x3d vec2(-1.0, -1.0);\nvec2 xy12 \x3d vec2(0.0, -1.0);\nvec2 xy13 \x3d vec2(1.0, -1.0);\nvec2 xy21 \x3d vec2(-1.0, 0.0);\nvec2 xy23 \x3d vec2(1.0, 0.0);\nvec2 xy31 \x3d vec2(-1.0, 1.0);\nvec2 xy32 \x3d vec2(0.0, 1.0);\nvec2 xy33 \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\nxy11[0] \x3d 1.0;\nxy21[0] \x3d 1.0;\nxy31[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\nxy11[1] \x3d 1.0;\nxy12[1] \x3d 1.0;\nxy13[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxy13[0] \x3d -1.0;\nxy23[0] \x3d -1.0;\nxy33[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nxy31[1] \x3d -1.0;\nxy32[1] \x3d -1.0;\nxy33[1] \x3d -1.0;\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * xy11) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * xy12) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * xy13) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * xy21) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(0, 0)) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * xy23) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * xy31) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * xy32) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * xy33) * u_kernel[8];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nvec4 convolve55(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nfloat xdif[5];//https://www.opengl.org/wiki/Data_Type_(GLSL) array constructor ES3.0\nfloat ydif[5];\nfloat a \x3d -2.0;\nfor (int i\x3d0; i\x3c5; i++){\nxdif[i] \x3d a;\nydif[i] \x3d a;\na++;\n}\nif (v_texCoord.s \x3c u_resolution.s *2.0) { //2 pixel\nxdif[0] \x3d 2.0;\nif (v_texCoord.s \x3c u_resolution.s) { //1 pixel\nxdif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.s \x3e 1.0 - u_resolution.s *2.0) {\nxdif[0] \x3d -2.0;\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxdif[1] \x3d -1.0;\n}\n}\nif (v_texCoord.t \x3c u_resolution.t *2.0) {\nydif[0] \x3d 2.0;\nif (v_texCoord.t \x3c u_resolution.t) {\nydif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.t \x3e 1.0 - u_resolution.t*2.0) {\nydif[0] \x3d -2.0;\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nydif[1] \x3d -1.0;\n}\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[0])) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[0])) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[0])) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[0])) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[0])) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[1])) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[1])) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[1])) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[1])) * u_kernel[8] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[1])) * u_kernel[9] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[2])) * u_kernel[10] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[2])) * u_kernel[11] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[2])) * u_kernel[12] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[2])) * u_kernel[13] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[2])) * u_kernel[14] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[3])) * u_kernel[15] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[3])) * u_kernel[16] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[3])) * u_kernel[17] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[3])) * u_kernel[18] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[3])) * u_kernel[19] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[4])) * u_kernel[20] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[4])) * u_kernel[21] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[4])) * u_kernel[22] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[4])) * u_kernel[23] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[4])) * u_kernel[24];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_kernelSize \x3d\x3d 9){\ngl_FragColor \x3d convolve33();\n}\nelse {\ngl_FragColor \x3d convolve55();\n}\n}",
extractBand:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandIDs[3];\nuniform bool u_alterBand;\nvec4 extractBand() {\nvec4 p \x3d texture2D(u_image, v_texCoord);\nif (!u_alterBand){\nreturn p;\n}\nfloat r, g, b;\nif (u_bandIDs[0] \x3d\x3d0){\nr \x3d p.r;\n}\nelse if (u_bandIDs[0] \x3d\x3d1){\nr \x3d p.g;\n}\nelse if (u_bandIDs[0] \x3d\x3d2){\nr \x3d p.b;\n}\nif (u_bandIDs[1] \x3d\x3d0){\ng \x3d p.r;\n}\nelse if (u_bandIDs[1] \x3d\x3d1){\ng \x3d p.g;\n}\nelse if (u_bandIDs[1] \x3d\x3d2){\ng \x3d p.b;\n}\nif (u_bandIDs[2] \x3d\x3d0){\nb \x3d p.r;\n}\nelse if (u_bandIDs[2] \x3d\x3d1){\nb \x3d p.g;\n}\nelse if (u_bandIDs[2] \x3d\x3d2){\nb \x3d p.b;\n}\nreturn vec4(r, g, b, p.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d extractBand();\n}",
hillshade:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform int u_slopeType;\nuniform int u_hillshadeType;\nuniform int u_lightSourceCount;\nuniform float u_sinZcosA;\nuniform float u_sinZsinA;\nuniform float u_cosZ;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform float u_xFactor;\nuniform float u_yFactor;\nuniform bool u_scaled;\nuniform float u_minValue;\nuniform float u_maxValue;\nuniform bool u_applyColorramp;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p \x3d c.g \x3c c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q \x3d c.r \x3c p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d \x3d q.x - min(q.w, q.y);\nfloat e \x3d 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade, float alpha) {\nfloat clrIndex \x3d clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb \x3d texture2D(u_image1, vec2(clrIndex, 0.0));\nvec3 hsv \x3d rgb2hsv(rgb.xyz);\nhsv.z \x3d hillshade;\nreturn vec4(hsv2rgb(hsv) * alpha, alpha);\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 va, vb, vc, vd, ve, vf, vg, vh, vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat dzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_xFactor;\nfloat dzy \x3d (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_yFactor; //flip\nfloat s2 \x3d sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade \x3d 0.0;\nif (u_hillshadeType \x3d\x3d 0){\nfloat cosDelta \x3d u_sinZsinA * dzy - u_sinZcosA * dzx;\nfloat z \x3d (u_cosZ + cosDelta) / s2;\nif (z \x3c 0.0)  z \x3d 0.0;\nhillshade \x3d z;\n}\nelse if (u_hillshadeType \x3d\x3d 1){\nfor (int k \x3d 0; k \x3c 6; k++) {\nfloat cosDelta \x3d u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z \x3d (u_cosZs[k] + cosDelta) / s2;\nif (z \x3c 0.0) z \x3d 0.0;\nhillshade \x3d hillshade + z * u_weights[k];\nif (k \x3d\x3d u_lightSourceCount-1) break;\n}\n}\nif (u_applyColorramp) {\nvec4 result \x3d overlay(ve.r, u_minValue, u_maxValue, hillshade, alpha);\nif (u_scaled) {\nresult \x3d vec4(result.rgb * 255.0, result.a);\n}\ngl_FragColor \x3d result;\n} else {\nif (u_scaled) {\nhillshade \x3d hillshade * 255.0;\nif (hillshade\x3e 255.0) {\nhillshade \x3d 255.0;\n}\n}\ngl_FragColor \x3d vec4(hillshade, hillshade, hillshade, alpha);\n}\n}",
identity:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandCount;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d  texture2D(u_image, v_texCoord);\ngl_FragColor \x3d vec4( currentPixel.rgb, currentPixel.a); //encode_float(currentPixel.r);\n}",
local:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 polyfill;\nvec4 localOp1() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nvec4 replaceme1;\nreturn result;\n}\nvec4 localOp2() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 result;\nvec4 replaceme2;\nreturn result;\n}\nvec4 localOp3() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 c \x3d texture2D(u_image2, v_texCoord);\nvec4 result;\nvec4 replaceme3;\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d localOp1();\n}",
local0:"precision mediump float;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_operation;\nuniform int u_constant[3];\nuniform vec4 gamma;\nfloat localOperate1(float a, float b, float c){\nfloat result;\nif (u_operation \x3d\x3d 1){\nresult \x3d a + b;\n}\nelse if (u_operation \x3d\x3d 2){\nresult \x3d a - b;\n}\nelse if (u_operation \x3d\x3d3){\nresult \x3d a * b;\n}\nelse if (u_operation \x3d\x3d4){\nresult \x3d sqrt(a);\n}\nelse if (u_operation \x3d\x3d5){\nresult \x3d pow(a, b);\n}\nelse if (u_operation \x3d\x3d6){\nresult \x3d acos(a);\n}\nelse if (u_operation \x3d\x3d7){\nresult \x3d asin(a);\n}\nelse if (u_operation \x3d\x3d8){\nresult \x3d atan(a);\n}\nelse if (u_operation \x3d\x3d9){\nresult \x3d 999.0; //atanh not available\n}\nelse if (u_operation \x3d\x3d10){\nresult \x3d abs(a);\n}\nelse if (u_operation \x3d\x3d13){\nresult \x3d 999.0; //bitwise not available\n}\nelse if (u_operation \x3d\x3d17){\nresult \x3d a !\x3d 0.0 \x26\x26 b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d18){\nresult \x3d a \x3d\x3d0.0? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d19){\nresult \x3d a !\x3d 0.0 || b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d20){\nresult \x3d a !\x3d 0.0 ^^ b !\x3d0.0; //exclusive or\n}\nelse if (u_operation \x3d\x3d21){\nresult \x3d cos(a);\n}\nelse if (u_operation \x3d\x3d23){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d24){\nresult \x3d a \x3d\x3d b ? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d25){\nresult \x3d exp(a);\n}\nelse if (u_operation \x3d\x3d26){\nresult \x3d pow(10.0, a);\n}\nelse if (u_operation \x3d\x3d27){\nresult \x3d exp2(a);\n}\nelse if (u_operation \x3d\x3d28){\nresult \x3d a \x3e b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d29){\nresult \x3d  a \x3e\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d30){\nresult \x3d floor(a); //int\n}\nelse if (u_operation \x3d\x3d31){\nresult \x3d a \x3d\x3d0? 1.0:0.0; //null pass mask\n}\nelse if (u_operation \x3d\x3d32){\nresult \x3d a; //float\n}\nelse if (u_operation \x3d\x3d33){\nresult \x3d a \x3c b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d34){\nresult \x3d a \x3c\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d35){\nresult \x3d log(a);\n}\nelse if (u_operation \x3d\x3d36){\nresult \x3d log2(a) / log2(10.0);\n}\nelse if (u_operation \x3d\x3d37){\nresult \x3d log2(a);\n}\nelse if (u_operation \x3d\x3d44){\nresult \x3d mod(a, b);\n}\nelse if (u_operation \x3d\x3d45){\nresult \x3d -a;\n}\nelse if (u_operation \x3d\x3d46){\nresult \x3d a !\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d48){\nresult \x3d ceil(a);\n}\nelse if (u_operation \x3d\x3d49){\nresult \x3d floor(a);\n}\nelse if (u_operation \x3d\x3d51){\nresult \x3d sin(a);\n}\nelse if (u_operation \x3d\x3d53){\nresult \x3d a * a;\n}\nelse if (u_operation \x3d\x3d56){\nresult \x3d tan(a);\n}\nelse if (u_operation \x3d\x3d57){\nresult \x3d 999.0; //tanh not available\n}\nelse if (u_operation \x3d\x3d59){\nresult \x3d 999.0; //acosh not available\n}\nelse if (u_operation \x3d\x3d60){\nresult \x3d 999.0; //asinh not available\n}\nelse if (u_operation \x3d\x3d61){\nresult \x3d atan(a, b);\n}\nelse if (u_operation \x3d\x3d64){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d65){\nresult \x3d floor(a/b);\n}\nelse if (u_operation \x3d\x3d76){\nresult \x3d a !\x3d0? b:c;\n}\n}\nvoid main() {\nvec4 currentPixel0 \x3d  texture2D(u_image0, v_texCoord);\nfloat graya, reda, greena, bluea;\nif (u_bandCount \x3d\x3d 1) {\ngraya \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngl_FragColor \x3d vec4(graya, graya, graya, currentPixel.a);\n}\nelse if (u_bandCount \x3d\x3d 3) {\nreda \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngreena \x3d stretchOneaue(float(currentPixel.g), u_minCutOff[1], u_maxCutOff[1], u_minOutput[1], u_maxOutput[1], u_factor[1]);\nbluea \x3d stretchOneaue(float(currentPixel.b), u_minCutOff[2], u_maxCutOff[2], u_minOutput[2], u_maxOutput[2], u_factor[2]);\ngl_FragColor \x3d vec4(reda, greena, bluea, currentPixel.a);\n}\n}",
mask:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_includedRanges[6];\nuniform bool u_includedRanges_specified;\nuniform float u_noDataValues[6];\nuniform bool u_noDataValues_specified;\nuniform int u_noDataInterpretation;\nuniform int u_bandCount;\nvec4 mask() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nvec4 processedPixel \x3d currentPixel;\nif (u_includedRanges_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n} else if (u_bandCount \x3d\x3d 3) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1] \x26\x26 currentPixel.g \x3e u_includedRanges[2] \x26\x26 currentPixel.g \x3c u_includedRanges[3] \x26\x26 currentPixel.b \x3e u_includedRanges[4] \x26\x26 currentPixel.b \x3c u_includedRanges[5])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n}\n}\nif (u_noDataValues_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (processedPixel.r \x3d\x3d u_noDataValues[0])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n} else if (u_bandCount \x3d\x3d 3) {\nif (u_noDataInterpretation \x3d\x3d1 \x26\x26 processedPixel.r \x3d\x3d u_noDataValues[0] \x26\x26 processedPixel.g \x3d\x3d u_noDataValues[1] \x26\x26 processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse if (processedPixel.r \x3d\x3d u_noDataValues[0] || processedPixel.g \x3d\x3d u_noDataValues[1] || processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n}\n}\nreturn processedPixel;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d mask();\n}",
ndvi:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_red;\nuniform int u_bandId_nir;\nuniform bool u_scaled;\nuniform int u_bandCount;\nvec4 calculateNDVI(){\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n}\nelse {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateNDVI();\n}",
remap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform float u_breaks[16];\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getRemapIndex(float pixelValue) {\nif (pixelValue \x3c u_breaks[0] || pixelValue \x3e u_breaks[15]) {\nreturn -1.0;\n}\nfor (int i \x3d 0; i \x3c 16; i++) {\nif (pixelValue \x3c u_breaks[i]) {\nreturn float(i - 1);\n}\n}\nif (pixelValue \x3d\x3d u_breaks[15]) {\nreturn 15.0;\n}\nreturn 0.0;\n}\nvec4 colorize(float pv) {\nfloat clrIndex \x3d pv - u_indexedColormapOffset;\nvec4 result;\nif (clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nif (currentPixel.a \x3d\x3d 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nfloat remappedIndex \x3d getRemapIndex(currentPixel.r);\nif (remappedIndex \x3c 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\ngl_FragColor \x3d colorize(remappedIndex);\n}",
resample:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resamplingRatio;\nuniform int u_resamplingType;\nuniform vec2 u_anchor;\nuniform vec2 u_resolution;\nvec4 resample(){\nvec2 pos_nn, pos_ul, pos_ur, pos_ll, pos_lr, pos_offset;\nfloat weight,weight_total, weight_ul, weight_ur, weight_ll, weight_lr;\nvec4 vp;  //v_texCoord is canvas space 0-1\nvec2 originalResolution \x3d vec2(u_resolution.s*u_resamplingRatio.s, u_resolution.t*u_resamplingRatio.t);\nvec2 pos \x3d vec2(u_anchor.s+(v_texCoord.s-u_anchor.s),(u_anchor.t+(v_texCoord.t-u_anchor.t)));\nif (u_resamplingType \x3d\x3d 0)\n{//shift and scaling, y \x3d ax+b so x \x3d (y-b)/a\npos_nn \x3d vec2(floor(pos.s/originalResolution.s+0.5)*originalResolution.s,floor(pos.t/originalResolution.t+0.5)*originalResolution.t);\nif (pos_nn.s \x3c0.0 || pos_nn.s \x3e 1.0 || pos_nn.t \x3c0.0 || pos_nn.t \x3e 1.0){\nvp \x3d vec4(1.0, 0.0, 0.0, 1.0);//vec4(0.0, 1.0, 0.0, vp.a);\n}\nelse {\nvp \x3d texture2D(u_image, vec2(pos_nn.s, pos_nn.t));\n}\n}\nelse if (u_resamplingType \x3d\x3d 1)\n{//shift and scaling, 4 neighbors y \x3d ax+b so x \x3d (y-b)/a\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t);\npos_ur \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t);\npos_ll \x3d vec2(pos_ul.s, pos_ul.t+originalResolution.t);\npos_lr \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t+originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nweight_lr \x3d sqrt(pow(pos_offset.s,2.0) + pow(pos_offset.t,2.0));\nweight_ul \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(originalResolution.t- pos_offset.t,2.0));\nweight_ur \x3d sqrt(pow( pos_offset.s,2.0)+ 1.0- pow(originalResolution.t - pos_offset.t,2.0));\nweight_ll \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(pos_offset.t,2.0));\nvp \x3d (texture2D(u_image, pos_ul) * weight_ul + texture2D(u_image, pos_ur) * weight_ur + texture2D(u_image, pos_ll) * weight_ll + texture2D(u_image, pos_lr) * weight_lr)/(weight_ul+weight_ur+weight_ll+weight_lr);\n}\nelse if (u_resamplingType \x3d\x3d 2)\n{//shift and scaling, 16 neighbors\nweight_total \x3d 0.0;\nvp \x3d vec4(0.0,0.0,0.0,0.0);\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s-originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t-originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nfor (int i\x3d0; i\x3c4; i++){//row\nfor (int j\x3d0; j\x3c4; j++){//col\nweight \x3d sqrt(pow(pos_offset.s-float(j),2.0)+ pow(pos_offset.t-float(i),2.0));\nvp +\x3dtexture2D(u_image, vec2(pos_ul.s+float(i)*originalResolution.s,pos_ul.t+float(j)*originalResolution.t)) * weight;\nweight_total +\x3d weight;\n}\n}\nvp \x3d vp/weight_total;\n}\nreturn vp;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d resample();\n}",
slope:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nuniform float u_zfactor;\nuniform float u_altitude;\nuniform float u_azimuth;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nvec4 calculateSlope() {\nfloat pi \x3d 3.141592653589793238;\nfloat dzx \x3d 0.0;\nfloat dzy \x3d 0.0;\nvec4 va,  vb,  vc,  vd,  ve,  vf,  vg,  vh,  vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0 - u_resolution.s) \x3e\x3d v_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0 - u_resolution.t) \x3e\x3d v_texCoord.t) {\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\n}\ndzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r / (8.0 * u_cellSize[0]);\ndzy \x3d -(vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r / (8.0 * u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat slope \x3d atan(u_zfactor * sqrt(dzx * dzx + dzy * dzy)) * 57.2957795;\nreturn vec4(slope, slope, slope, alpha);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateSlope();\n}",
stretch:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_bandCount;\nuniform vec2 u_sourceDim;\nuniform vec2 u_targetDim;\nuniform int u_state;\nuniform bool u_minMaxTexture;\nuniform bool u_useGamma;\nuniform float u_gamma[4];\nuniform float u_gammaCorrection[4];\nuniform bool u_scaled;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nif (u_bandCount \x3d\x3d 1) {\nfloat alpha \x3d vp_ul.a * vp_ur.a * vp_ll.a * vp_lr.a;\nvec4 vp_nn \x3d texture2D(u_image, coords);\nreturn alpha \x3d\x3d 0.0 ? vp_nn : vec4(vp.rgb, alpha);\n}\nreturn vp;\n}\nvec4 findMin(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r),min(p1.g, p2.g),min(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(max(p1.r, p2.r),max(p1.g, p2.g),max(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMinMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r), max(p1.g, p2.g), 0.0, p1.a);\n}\n}\nvec4 minMax(int state) {\nvec2 pixelFract \x3d fract(v_texCoord * u_sourceDim);\nfloat xshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.s; //take left pixel if \x3e 0.5\nfloat yshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.t; //take bottom pixel if \x3e 0.5\nif (u_sourceDim.s \x3d\x3d 1.0) {\nxshift \x3d 0.0;\n}\nif (u_sourceDim.t \x3d\x3d 1.0) {\nyshift \x3d 0.0;\n}\nvec4 p1 \x3d texture2D(u_image, v_texCoord);\nvec4 p2 \x3d texture2D(u_image, v_texCoord + vec2(xshift, 0.0));\nvec4 p3 \x3d texture2D(u_image, v_texCoord + vec2(0.0, yshift));\nvec4 p4 \x3d texture2D(u_image, v_texCoord + vec2(xshift, yshift));\nvec4 pval;\nif (state \x3d\x3d 2) {\npval \x3d findMinMax(findMinMax(p1, p2), findMinMax(p3, p4));\n} else if (state \x3d\x3d 1) {\npval \x3d findMax(findMax(p1, p2), findMax(p3, p4));\n} else if (state \x3d\x3d 0) {\npval \x3d findMin(findMin(p1, p2), findMin(p3, p4));\n}\nreturn pval;\n}\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool scaled) {\nfloat stretchedVal;\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nstretchedVal \x3d minOutput + (val - minCutOff) * factor;\n} else if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nfloat stretchOneValueGamma(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, float gamma, float gammaCorrection, bool scaled) {\nfloat stretchedVal;\nfloat tempf \x3d 1.0;\nfloat outRange \x3d maxOutput - minOutput;\nfloat relativeVal \x3d (val - minCutOff) / (maxCutOff - minCutOff);\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nif (gamma \x3e 1.0) {\ntempf -\x3d pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal \x3d floor(tempf * outRange * pow(relativeVal, 1.0 / gamma)) + minOutput;\n}\nelse if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_state \x3d\x3d 100) {\nvec4 currentPixel \x3d getPixelValue(v_texCoord);\nfloat grayVal,\nredVal,\ngreenVal,\nblueVal;\nfloat min0,\nmax0,\nmin1,\nmax1,\nmin2,\nmax2,\nfactor0,\nfactor1,\nfactor2;\nvec4 minV, maxV;\nif (u_minMaxTexture) {\nif (u_bandCount \x3d\x3d 1) {\nminV \x3d texture2D(u_image1, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d minV.g;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\n} else {\nminV \x3d texture2D(u_image1, v_texCoord);\nmaxV \x3d texture2D(u_image2, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d maxV.r;\nmin1 \x3d minV.g;\nmax1 \x3d maxV.g;\nmin2 \x3d minV.b;\nmax2 \x3d maxV.b;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\nfactor1 \x3d (u_maxOutput[1] - u_minOutput[1]) / (max1 - min1);\nfactor2 \x3d (u_maxOutput[2] - u_minOutput[2]) / (max2 - min2);\n}\n} else {\nmin0 \x3d u_minCutOff[0];\nmax0 \x3d u_maxCutOff[0];\nmin1 \x3d u_minCutOff[1];\nmax1 \x3d u_maxCutOff[1];\nmin2 \x3d u_minCutOff[2];\nmax2 \x3d u_maxCutOff[2];\nfactor0 \x3d u_factor[0];\nfactor1 \x3d u_factor[1];\nfactor2 \x3d u_factor[2];\n}\nif (u_useGamma){\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngreenVal \x3d stretchOneValueGamma(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_gamma[1], u_gammaCorrection[1], u_scaled);\nblueVal \x3d stretchOneValueGamma(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_gamma[1], u_gammaCorrection[2], u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\nelse {\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngreenVal \x3d stretchOneValue(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_scaled);\nblueVal \x3d stretchOneValue(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\n} else {\nvec4 currentPixel \x3d minMax(u_state);\ngl_FragColor \x3d currentPixel;\n}\n}"}})},
"esri/layers/rasterLib/function/RasterFunctionWebGLMixin":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ./pixelShaders ./vertexShaders ./webglHelper ./convolutionKernel".split(" "),function(K,G,w,v,r,f,c){return K(null,{gl:null,rgbaFloatData:null,originalTexture:null,lastTexture:null,renderTexture:!1,constructor:function(a){this._isProgramInitialized=!1;this.gl=a&&a.gl;a&&a.renderTexture&&(this.renderTexture=a.renderTexture);this._xformSetting=a&&a._xformSetting||{requireProjection:!1,
meshSize:[20,20]}},bindFrameBuffer:function(){var a=this.gl;this._setupPingPongTextures();this._setupBranchingTextures();var b=this._glSetting;this.isBranch?(b.branchIndex=(b.branchIndex+1)%b.branchCount,b=b.branches[b.branchIndex]):(b.pingpongIndex=(b.pingpongIndex+1)%b.pingpong.length,b=b.pingpong[b.pingpongIndex]);a.bindFramebuffer(a.FRAMEBUFFER,b.frameBuffer);a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);return b},_initializeProgram:function(a){if(this.gl)try{var b=this.gl;b.viewport(0,
0,b.drawingBufferWidth,b.drawingBufferHeight);var p=this._glSetting.programUniforms,q="local"===this.functionName?"local"+this.functionArguments.operation:this.functionName,t=p[q];if(t)this._uniforms=t.uniforms,this.rasterProgram=t.program;else{var m=(this._useMesh=this._tileMode&&this._xformSetting.requireProjection)?r.mesh:r.basic,n=r.getShader(b,a.vertex||m),k=v.getShader(b,a.fragment),l=this._loadProgram(n,k),h={rasterProgram:f.getUniforms(b,l)};p[q]={uniforms:h,program:l};this.rasterProgram=
l;this._uniforms=h}b.useProgram(this.rasterProgram);var e=b.getAttribLocation(this.rasterProgram,"a_texCoord"),d=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,d);var g=f.createMesh(this._xformSetting.meshSize);b.bufferData(b.ARRAY_BUFFER,g,b.STATIC_DRAW);b.enableVertexAttribArray(e);b.vertexAttribPointer(e,2,b.FLOAT,!1,0,0);b.disable(b.DEPTH_TEST);b.blendFunc(b.SRC_ALPHA,b.ZERO);b.disable(b.BLEND);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);this._shaderInfo=
{fragment:a.fragmentName}}catch(u){}},_setUniform:function(a,b,p){null!=b&&(p&&!this._uniforms[p]&&(this._uniforms[p]=f.getUniforms(this.gl,this[p])),p=p?this._uniforms[p]:this._uniforms.rasterProgram,(a=p[a]||p[a+"[0]"])&&f.setUniform(this.gl,a,b))},_setUniforms:function(a,b){var p=Object.keys(a),q,t=p.length;for(q=0;q<t;q++)this._setUniform(p[q],a[p[q]],b);this.rawInput?this._setUniform("u_flipY",!0,b):this._setUniform("u_flipY",!1,b);this._tileMode?(this.rawInput?(p=this._xformSetting.offset,q=
this._xformSetting.scale):(p=[0,0],q=[1,1]),this._setUniform("u_xformOffset",p,b),this._setUniform("u_xformScale",q,b),this._xformSetting.requireProjection&&(this.rawInput?(this._setupXformTexture(),this._setUniform("u_projection",!0,b),this._setUniform("u_transformGridSize",this._xformSetting.gridConfig.size,b),this._setUniform("u_transformSpacing",this._xformSetting.gridConfig.spacing,b),this._setUniform("u_targetImageSize",new Float32Array([this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]),
b)):this._setUniform("u_projection",!1,b))):(p=[0,0],q=[1,1],this._setUniform("u_xformOffset",p,b),this._setUniform("u_xformScale",q,b));this.rawInput&&this._rawResolution&&("RSP_BilinearInterpolation"===this.interpolation||"RSP_CubicConvolution"===this.interpolation)?(this._setUniform("u_resampling",1),this._setUniform("u_rawResolution",this._rawResolution)):this._setUniform("u_resampling",0)},_setupTextureData:function(a,b){if(a.texture)return a;a.raster&&a.raster.pixelBlock&&(a=a.raster);this.rawInput=
!0;var p=b&&b.notOriginal,q=b&&b.bandIDs;if(b&&b.reCreate)var t=!1;else(t=this._tileMode?!this._xformSetting.hasNewTexture:!this._glSetting.hasNewTexture)&&this._originalBandIDs&&(t=q?this._originalBandIDs.join("")===q.join(""):!1);0<this._glSetting.branchCount&&(t=!1);if(t&&this.originalTexture)return{extent:a.extent,texture:this.originalTexture};t=this._createTexture();p||(this.originalTexture=t,this._originalBandIDs=q);p=this.gl;var m=a.pixelBlock;this._rawResolution=m?[1/a.pixelBlock.width,1/
a.pixelBlock.height]:[1/this.gl.drawingBufferWidth,1/this.gl.drawingBufferHeight];var n=0;q&&0<q.length&&m&&(n=Math.max.apply(null,q),m.pixels.length>n&&q&&(m.pixels=q.map(function(l){return m.pixels[l]}),m.statistics&&(m.statistics=q.map(function(l){return m.statistics[l]}))));q=m.width;n=m.height;p.getExtension("OES_texture_float");var k=m.getAsRGBAFloat();p.texImage2D(p.TEXTURE_2D,0,p.RGBA,q,n,0,p.RGBA,p.FLOAT,k);return{extent:a.extent,texture:t}},_setupPingPongTextures:function(){var a=this._glSetting;
if(!a||!a.pingpong){a.pingpong=[];var b=f.createBufferTexture(this.gl,!1);a.pingpong.push(b);b=f.createBufferTexture(this.gl,!1);a.pingpong.push(b);a.pingpongIndex=1}},_setupBranchingTextures:function(){var a=this._glSetting;if(!a||!a.branches){a.branches=[];var b=0,p=a.branchCount;if(0<p){for(b=0;b<p;b++){var q=f.createBufferTexture(this.gl,!1);a.branches.push(q)}a.branchIndex=p-1}}},_setupXformTexture:function(a){for(var b=this._createTexture(),p=this.gl,q=4*this._xformSetting.gridConfig.size[0],
t=this._xformSetting.gridConfig.size[1],m=new Float32Array(q*t*4),n=0,k=0;k<this._xformSetting.gridConfig.coefficients.length;k++)m[n++]=this._xformSetting.gridConfig.coefficients[k],2===k%3&&(m[n++]=1);p.getExtension("OES_texture_float");p.texImage2D(p.TEXTURE_2D,0,p.RGBA,q,t,0,p.RGBA,p.FLOAT,m);this._bindTexture(b,"u_transformGrid",a)},_createTexture:function(a){return f.createTexture(this.gl,a)},_bindTexture:function(a,b,p){b=b||"u_image";p=this._uniforms[p||"rasterProgram"];var q=this._getTextureIndex(b);
if(-1!==q){var t=this.gl;t.uniform1i(p[b].location,q);t.activeTexture(t.TEXTURE0+q);t.bindTexture(t.TEXTURE_2D,a)}},_getTextureIndex:function(a,b){var p=this._uniforms[b||"rasterProgram"];if(!p||!p[a]||p[a].info.type!==this.gl.SAMPLER_2D)return-1;if("u_transformGrid"===a)return 0;p="u_image"===a?0:parseInt(a.replace("u_image",""));return this._xformSetting.requireProjection?p+1:p},_drawGL:function(a){var b=this.gl;this.renderTexture?(b.enable(b.BLEND),b.bindFramebuffer(b.FRAMEBUFFER,null)):b.disable(b.BLEND);
a||b.viewport(0,0,b.drawingBufferWidth,b.drawingBufferHeight);a=this._xformSetting.meshSize||[1,1];b.drawArrays(b.TRIANGLES,0,a[0]*a[1]*6);this._drawMesh()},_drawMesh:function(){if(this.renderTexture&&this._glSetting.drawMesh){this.meshProgram=this.meshProgram||this._setupMeshProgram();var a=this.gl;a.useProgram(this.meshProgram);a.bindFramebuffer(a.FRAMEBUFFER,null);var b=a.getAttribLocation(this.meshProgram,"a_texCoord"),p=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,p);p=this._xformSetting.meshSize||
[1,1];var q=f.createMesh(p,!0);a.bufferData(a.ARRAY_BUFFER,q,a.STATIC_DRAW);a.enableVertexAttribArray(b);a.vertexAttribPointer(b,2,a.FLOAT,!1,0,0);a.disable(a.DEPTH_TEST);a.blendFunc(a.ONE,a.ZERO);this._setUniforms({u_color:[0,0,1,1],u_drawMeshLines:!0},"meshProgram");a.drawArrays(a.LINES,0,p[0]*p[1]*10)}},_setupMeshProgram:function(){var a=r.getShader(this.gl,r.mesh),b=v.getShader(this.gl,v.constant);return this._loadProgram(a,b)},_loadProgram:function(a,b){return f.loadProgram(this.gl,a,b)},_getShaderScript:function(a,
b){var p=document.getElementById(b);if(!p)return null;var q="";for(p=p.firstChild;p;)3==p.nodeType&&(q+=p.textContent),p=p.nextSibling;return q}})})},"esri/layers/rasterLib/function/webglHelper":function(){define([],function(){var K={getUniforms:function(G,w){var v=G.getProgramParameter(w,G.ACTIVE_UNIFORMS),r,f,c={};for(r=0;r<v;r++)(f=G.getActiveUniform(w,r))&&(c[f.name]={location:G.getUniformLocation(w,f.name),info:f});return c},setUniform:function(G,w,v){var r=w.info;w=w.location;var f=r.type;if(null!=
v)switch(f){case G.FLOAT:1<r.size?0!==v.length&&G.uniform1fv(w,v):G.uniform1f(w,v);break;case G.FLOAT_VEC2:if(0===v.length)break;G.uniform2fv(w,v);break;case G.FLOAT_VEC3:if(0===v.length)break;G.uniform3fv(w,v);break;case G.FLOAT_VEC4:if(0===v.length)break;G.uniform4fv(w,v);break;case G.INT:case G.BOOL:1<r.size?0!==v.length&&G.uniform1iv(w,v):G.uniform1i(w,v);break;case G.INT_VEC2:case G.BOOL_VEC2:if(0===v.length)break;G.uniform2iv(w,v);break;case G.INT_VEC3:case G.BOOL_VEC3:if(0===v.length)break;
G.uniform3iv(w,v);break;case G.INT_VEC4:case G.BOOL_VEC4:0!==v.length&&G.uniform4iv(w,v)}},createTexture:function(G,w){var v=G.createTexture();G.bindTexture(G.TEXTURE_2D,v);G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE);G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE);G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,w?G.LINEAR:G.NEAREST);G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,w?G.LINEAR:G.NEAREST);return v},createBufferTexture:function(G,w,v){w=K.createTexture(G,
w);G.getExtension("OES_texture_float");v=v||[G.drawingBufferWidth,G.drawingBufferHeight];G.texImage2D(G.TEXTURE_2D,0,G.RGBA,v[0],v[1],0,G.RGBA,G.FLOAT,null);v=G.createFramebuffer();G.bindFramebuffer(G.FRAMEBUFFER,v);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,w,0);return{texture:w,frameBuffer:v}},getShader:function(G,w,v){v=v?G.createShader(G.VERTEX_SHADER):G.createShader(G.FRAGMENT_SHADER);G.shaderSource(v,w);G.compileShader(v);G.getShaderParameter(v,G.COMPILE_STATUS)||
(v=null);return v},loadProgram:function(G,w,v){var r=G.createProgram();G.attachShader(r,w);G.attachShader(r,v);G.linkProgram(r);G.getProgramParameter(r,G.LINK_STATUS)||(G.deleteProgram(r),r=null);return r},createMesh:function(G,w){if(!G||1===G[0]&&1===G[1])return new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);var v=G&&w?new Float32Array(G[0]*G[1]*20):new Float32Array(G[0]*G[1]*12);var r=.9998/G[1],f=.9998/G[0],c,a,b=0;for(c=0;c<G[1];c++)for(a=0;a<G[0];a++){var p=1E-4+r*c;var q=1E-4+f*a;G&&!w?(v[b++]=
p,v[b++]=q,v[b++]=p+r,v[b++]=q,v[b++]=p,v[b++]=q+f,v[b++]=p,v[b++]=q+f,v[b++]=p+r,v[b++]=q,v[b++]=p+r,v[b++]=q+f):(v[b++]=p,v[b++]=q,v[b++]=p,v[b++]=q+f,v[b++]=p,v[b++]=q+f,v[b++]=p+r,v[b++]=q+f,v[b++]=p+r,v[b++]=q+f,v[b++]=p+r,v[b++]=q,v[b++]=p,v[b++]=q,v[b++]=p+r,v[b++]=q,v[b++]=p,v[b++]=q+f,v[b++]=p+r,v[b++]=q)}return v}};return K})},"esri/layers/rasterLib/function/convolutionKernel":function(){define([],function(){var K={Default:[0,0,0,0,1,0,0,0,0],LineDetectionHorizontal:[-1,-1,-1,2,2,2,-1,-1,
-1],LineDetectionVertical:[-1,2,-1,-1,2,-1,-1,2,-1],LineDetectionLeftDiagonal:[2,-1,-1,-1,2,-1,-1,-1,2],LineDetectionRightDiagonal:[-1,-1,2,-1,2,-1,2,-1,-1],GradientNorth:[-1,-2,-1,0,0,0,1,2,1],GradientWest:[-1,0,1,-2,0,2,-1,0,1],GradientEast:[1,0,-1,2,0,-2,1,0,-1],GradientSouth:[1,2,1,0,0,0,-1,-2,-1],GradientNorthEast:[0,-1,-2,1,0,-1,2,1,0],GradientNorthWest:[-2,-1,0,-1,0,1,0,1,2],SmoothArithmeticMean:[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,
.111111111111,.111111111111],Smoothing3x3:[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],Smoothing5x5:[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,1,1],Sharpening3x3:[-1,-1,-1,-1,9,-1,-1,-1,-1],Sharpening5x5:[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1],Laplacian3x3:[0,-1,0,-1,4,-1,0,-1,0],Laplacian5x5:[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0],SobelHorizontal:[-1,-2,-1,0,0,0,1,2,1],SobelVertical:[-1,0,1,-2,0,2,-1,0,1],Sharpen:[0,-.25,0,-.25,2,-.25,
0,-.25,0],Sharpen2:[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25],PointSpread:[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627],getKernel:function(G){switch(G){case 0:return K.LineDetectionHorizontal;case 1:return K.LineDetectionVertical;case 2:return K.LineDetectionLeftDiagonal;case 3:return K.LineDetectionRightDiagonal;case 4:return K.GradientNorth;case 5:return K.GradientWest;case 6:return K.GradientEast;case 7:return K.GradientSouth;case 8:return K.GradientNorthEast;case 9:return K.GradientNorthWest;
case 10:return K.SmoothArithmeticMean;case 11:return K.Smoothing3x3;case 12:return K.Smoothing5x5;case 13:return K.Sharpening3x3;case 14:return K.Sharpening5x5;case 15:return K.Laplacian3x3;case 16:return K.Laplacian5x5;case 17:return K.SobelHorizontal;case 18:return K.SobelVertical;case 19:return K.Sharpen;case 20:return K.Sharpen2;case 21:return K.PointSpread;default:return K.Default}}};return K})},"esri/layers/rasterLib/raster/rasterFactory":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/sniff dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../urlUtils ./ImageServiceRaster ./TileServiceRaster ./TileRaster ./FunctionRaster".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){K={customDrivers:[],create:function(e){if(e){if(e.url){var d=m.urlToObject(e.url);var g=d.path;var u=d.query}d=e.serviceInfo;var x=e.rasterFxArgs||{},y=new v,B=w.hitch(this,function(E){this._trycustomDrivers(w.mixin({url:g},e),0,y)});if(g)if(-1===g.toLowerCase().indexOf("imageserver")&&-1===g.toLowerCase().indexOf("mapserver")){var C=new l(w.mixin({},e,{url:g}));e.rasterFx&&(C=new h({rasterFx:e.rasterFx,rasterFxArgs:w.mixin({},x,{raster:C})}));var z=C}else{z=
new v;d=d||this._getServiceInfo(g,u);var D=w.hitch(this,function(E){E.bandCount?C=new n(w.mixin({},{serviceInfo:E},u,e,{url:g})):E.tileInfo&&(C=new k(w.mixin({},{serviceInfo:E},u,this._options,{url:g})));e.rasterFx&&(C=new h({rasterFx:e.rasterFx,rasterFxArgs:w.mixin({},x,{raster:C})}));z.resolve(C)});a(d,D,B)}else z=C=new h({rasterFx:e.rasterFx,rasterFxArgs:w.mixin({},x,{raster:C})});a(z,w.hitch(this,function(E){E?E.open().then(w.hitch(this,function(A){y.resolve(E)}),B):B(Error("There is no raster to open"))}),
B);return y.promise}},register:function(e){this.customDrivers=this.customDrivers||[];0<this.customDrivers.filter(function(d){return d.sourceType===e.prototype.sourceType}).length||this.customDrivers.push(e)},_trycustomDrivers:function(e,d,g){g=g||new v;var u=this.customDrivers[d];if(u){var x=new u(e);x.open().then(w.hitch(this,function(y){g.resolve(x)}),w.hitch(this,function(y){this._trycustomDrivers(e,d+1,g)}))}else g.reject("cannot load layer "+(e&&e.url||""));return g.promise},_getServiceInfo:function(e,
d){d=d||{};var g=d.bandIds,u=d.renderingRule,x=new v(t._dfdCanceller),y={f:"json"};g&&(y.bandIds=g);u&&(y.renderingRule=u.toJson?JSON.stringify(u.toJson()):JSON.stringify(u));x._pendingDfd=q({url:e,content:y,handleAs:"json",callbackParamName:"callback"});x._pendingDfd.then(function(B){x.callback(B)},function(B){x.errback(B)});return x.promise}};w.setObject("layers.rasterLib.raster.rasterFactory",K,b);return K})},"esri/layers/rasterLib/raster/ImageServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../WKIDUnitConversion ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ./RasterInfo ./BasicRaster ../../rasterFormats/rasterCodec ../tile/RasterTileInfo".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z){K=G([B],{declaredClass:"esri.layers.rasterLib.raster.ImageServiceRaster",sourceType:"ImageService",constructor:function(D){D&&(this._imageServiceParams=D.imageServiceParameters,this._commonReqParams=D._commonReqParams,this._imageServiceParams||(this._imageServiceParams={interpolation:D.interpolation,pixelType:D.pixelType,format:D.format||"lerc",compressionQuality:D.compressionQuality,bandIds:D.bandIds,noDataInterpretation:D.noDataInterpretation,
adjustAspectRatio:D.adjustAspectRatio,mosaicRule:D.mosaicRule,renderingRule:D.interpolation}))},open:function(){var D=new v;if(this.serviceInfo&&this.rasterInfo)return this.loaded=!0,this._findCredential(),this.setFetchParameters(this._imageServiceParams),D.resolve(this),D.promise;var E=this.serviceInfo||this._generateServiceInfo(this._imageServiceParams&&this._imageServiceParams.renderingRule),A=w.hitch(this,function(H){this._fixServiceInfo(H);this.serviceInfo=H;this._findCredential();var I=this._parseRasterInfo(H),
L={};H.defaultMosaicMethod?(L.method=H.defaultMosaicMethod,L.operation=H.mosaicOperator,L.sortField=H.sortField,L.sortValue=H.sortValue):L.method=g.METHOD_NONE;this.serviceInfo.defaultMosaicRule=new g(L);this.serviceInfo.defaultMosaicRule.ascending=!0;H=this._getColormap(this);L=this._getHistograms(this);var J=this._getRasterAttributeTable(this),O=this._getKeyProperties(this),P=this._getMultidimensionalInfo(),fa=this._getSlices();(new b([H,L,J,O,P,fa])).then(w.hitch(this,function(V){V[0][0]&&(I.colormap=
V[0][1]);V[1][0]&&(I.histograms=V[1][1]);V[2][0]&&(I.vat=V[2][1]);V[3][0]&&(I.keyProperties=V[3][1]);V[4][0]&&(I.multidimensionalInfo=V[4][1]);I.keyProperties=I.keyProperties||{};this._slices=V[5][0]?V[5][1]:null;I.keyProperties&&I.keyProperties.DataType&&(this.dataType=I.keyProperties.DataType);I.keyProperties&&I.keyProperties.DefaultVariable&&(this.defaultVariable=I.keyProperties.DefaultVariable);this.loaded=!0;this.rasterInfo=I;this.setFetchParameters(this._imageServiceParams);D.resolve(this)}))}),
F=w.hitch(this,function(H){this.loaded=!0;D.reject(H)});p(E,A,F);return D.promise},setFetchParameters:function(D,E){if(E)this.imageServiceParams=D;else{var A=this.imageServiceParams;A&&D?Object.keys(D).forEach(function(F){A[F]=D[F]}):this.imageServiceParams=D}this._constructGetImageParams();this._getRasterIdentifier(!0)},read:function(D){if(D.pixelBlock||D.texture){var E=new v;E.resolve(D);return E.promise}if(!1===D.virtual&&this.tileInfo&&!this.tileInfo.virtual)return this.readTile(D);if(this._slices){var A=
this._getSliceId();if(null==A)return E=new v,E.resolve(D),E.promise}var F=D.extent,H=F.spatialReference.wkid||c.toJson(F.spatialReference.toJson(!1)),I=D.timeExtent?D.timeExtent.toJson().join(","):null;E=this.url+"/exportImage";var L={};this._slices&&(L.sliceid=A);this.disableClientCaching&&(L._ts=(new Date).getTime());A=w.mixin({},this._commonReqParams,{bbox:F.xmin+","+F.ymin+","+F.xmax+","+F.ymax,imageSR:H,bboxSR:H,size:D.width+","+D.height,time:I},L);return this._requestPixels({url:E,payload:A,
decodeParams:{width:D.width,height:D.height,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:!1},tileOptions:D})},readTile:function(D){var E=this.tileBoundary&&this.tileBoundary[D.level];if(E&&(E.minRow>D.row||E.maxRow<D.row||E.minCol>D.col||E.maxCol<D.col)){var A=new v;A.resolve(D);return A.promise}if(this._slices&&(A=this._getSliceId(),null==A))return A=new v,A.resolve(D),A.promise;E=this.url+"/tile/"+D.level+"/"+D.row+"/"+D.col;var F={width:this.tileInfo.cols,height:this.tileInfo.rows,
planes:null,pixelType:null,format:null,decodeFunc:null,useWasm:!0,isPoint:"elevation"===D.tileType.toLowerCase()?!0:!1};A=this._slices?"sliceid\x3d"+A+"\x26":"";A=this.disableClientCaching?"_ts\x3d "+(new Date).getTime():A.replace(/&$/,"");return this._requestPixels({url:E+(0<A.length?"?"+A:""),payload:{},decodeParams:F,tileOptions:D})},toJson:function(){return{url:this.url,tileInfo:this.tileInfo,rasterInfo:this.rasterInfo,serviceInfo:this.serviceInfo,sourceType:this.sourceType,_commonReqParams:this._commonReqParams,
_rasterId:this._rasterId}},_getSliceId:function(){var D=w.clone(this._imageServiceParams.multidimensionalDefinition),E=w.clone(this._imageServiceParams.time);if(null==this._slices||null==E&&(null==D||0===D.length))return 0;var A=D||this.defaultMultidimensionalDefinition,F=A[0].variableName;A=this._getAllDimensionDefinition(A,F).definition;D=null;if(null==A||0===A.length)return null;if(E&&this.serviceInfo.timeInfo){if(null==E[1]||E[1]===E[0])var H=E[0];else{var I=this.serviceInfo.timeInfo.startTimeField;
H=this.rasterInfo.multidimensionalInfo.variables.find(function(O){return O.name===F}).dimensions.find(function(O){return O.name===I}).values.filter(function(O){return Array.isArray(O)?Math.max(O[0],E[0])<Math.min(O[1],E[1]):O>=E[0]&&O<=E[1]}).sort(function(O,P){O=Array.isArray(O)?O[1]:O;P=Array.isArray(P)?O[1]:P;return Math.abs(E[1]-O)-Math.abs(E[1]-P)})[0]||[E[1]]}A.some(function(O){if(O.dimensionName===I)return O.values[0]=H,!0;if(!O.dimensionName)return O.dimensionName=I,O.isSlice=!0,O.values=
[H],!0})||A.push({variableName:F,dimensionName:I,isSlice:!0,values:[H]})}for(var L=0;L<this._slices.length;L++){var J=this._slices[L].multidimensionalDefinition;if(J.length===A.length&&!J.some(function(O){var P=A.filter(function(V){return O.variableName===V.variableName&&V.dimensionName===O.dimensionName})[0];if(!P)return!0;var fa=Array.isArray(O.values[0])?O.values[0][0]:O.values[0];P=Array.isArray(P.values[0])?P.values[0][0]:P.values[0];return fa!==P})){D=L;break}}return D},_getAllDimensionDefinition:function(D,
E){var A=D.map(function(H){return H.dimensionName}),F=!1;this.rasterInfo.multidimensionalInfo.variables.forEach(function(H){H.name!==E||H.dimensions.length===D.length&&A[0]||(H.dimensions.forEach(function(I){0>A.indexOf(I.name)&&(A[0]?D.push({variableName:E,dimensionName:I.name,values:[I.values[0]]}):(D[0].dimensionName=I.name,D[0].values=[I.values[0]],I[0]=I.name))}),F=!0)},this);return{defChanged:F,definition:D}},_generateServiceInfo:function(D){var E=this.url,A=new v(e._dfdCanceller);A._pendingDfd=
m({url:E,content:{f:"json",renderingRule:D?c.toJson(D.toJson()):null},handleAs:"json",callbackParamName:"callback"});A._pendingDfd.then(function(F){A.callback(F)},function(F){A.errback(F)});return A},_fixServiceInfo:function(D){var E=D.spatialReference.wkid;D.tileInfo&&0===D.extent.xmin&&360===D.extent.xmax&&E&&null==h[E]&&(D.tileInfo.applyGCS360Transform=!0)},_parseRasterInfo:function(D){var E=new y;E.bandCount=D.bandCount;E.extent=new n(D.fullExtent);E.spatialReference=D.spatialReference;E.pixelType=
D.pixelType;E.width=Math.floor((D.fullExtent.xmax-D.fullExtent.xmin)/D.pixelSizeX+.5);E.height=Math.floor((D.fullExtent.ymax-D.fullExtent.ymin)/D.pixelSizeY+.5);E.cellSize=new k({x:D.pixelSizeX,y:D.pixelSizeY,spatialReference:D.spatialReference});var A;if(D.minValues&&0<D.minValues.length&&D.maxValues&&D.stdvValues&&D.meanValues){var F=[];for(A=0;A<D.minValues.length;A++)F.push({min:D.minValues[A],max:D.maxValues[A],mean:D.meanValues[A],stddev:D.stdvValues[A]});D.bandCount!==F.length&&(F=null)}this.dataType=
D.serviceDataType?D.serviceDataType.replace("esriImageServiceDataType",""):"Generic";E.statistics=F;D.objectIdField&&D.fields&&(E.catalogInfo={objectIdField:D.objectIdField,fields:D.fields});E.timeInfo=D.timeInfo;if(D.tileInfo){this.tileInfo=new z(D.tileInfo);this.tileInfo.tileType=D.cacheType||"Map";E.tileInfo=this.tileInfo;var H=E.extent,I=this.tileInfo.origin,L=this.tileInfo.cols,J=this.tileInfo.rows;this.tileBoundary=this.tileInfo.lods.map(function(O){return{minCol:Math.floor((H.xmin-I.x+.1*O.resolution)/
L/O.resolution),maxCol:Math.floor((H.xmax-I.x-.1*O.resolution)/L/O.resolution),minRow:Math.floor((I.y-H.ymax+.1*O.resolution)/J/O.resolution),maxRow:Math.floor((I.y-H.ymin-.1*O.resolution)/J/O.resolution)}})}return E},_getColormap:function(D){D=this.url+"/colormap";var E=new v(e._dfdCanceller),A={f:"json"},F=this.serviceInfo.hasColormap||this.rasterInfo&&this.rasterInfo.hasColormap;10<this.serviceInfo.currentVersion&&F?(E._pendingDfd=m({url:D,content:A,handleAs:"json",callbackParamName:"callback"}),
E._pendingDfd.then(function(H){E.callback(H.colormap)},function(H){E.errback(H)})):E.callback(null);return E},_getHistograms:function(D){var E=this.url+"/histograms",A=new v(e._dfdCanceller),F={f:"json"},H=this.serviceInfo.hasHistograms||this.rasterInfo&&this.rasterInfo.hasHistograms;D&&D.renderingRule&&(F.renderingRule=c.toJson(D.renderingRule.toJson()),H=!0);10<this.serviceInfo.currentVersion&&H?(A._pendingDfd=m({url:E,content:F,handleAs:"json",callbackParamName:"callback"}),A._pendingDfd.then(function(I){A.callback(I.histograms)},
function(I){A.errback(I)})):A.callback(null);return A},_getRasterAttributeTable:function(D){var E=this.url+"/rasterAttributeTable",A=new v(e._dfdCanceller),F={f:"json"},H=this.serviceInfo.hasRasterAttributeTable;D&&D.renderingRule&&(F.renderingRule=c.toJson(D.renderingRule.toJson()),H=!0);10<this.serviceInfo.currentVersion&&H?(A._pendingDfd=m({url:E,content:F,handleAs:"json",callbackParamName:"callback"}),A._pendingDfd.then(function(I){A.callback(I)},function(I){A.errback(I)})):A.callback(null);return A},
_getKeyProperties:function(D){var E=this.url+"/keyProperties",A=new v(e._dfdCanceller),F={f:"json"};D&&D.renderingRule&&(F.renderingRule=c.toJson(D.renderingRule.toJson()));10<this.serviceInfo.currentVersion?(A._pendingDfd=m({url:E,content:F,handleAs:"json",callbackParamName:"callback"}),A._pendingDfd.then(function(H){A.callback(H)},function(H){A.errback(H)})):A.callback(null);return A},_getMultidimensionalInfo:function(){var D=this.url+"/multidimensionalInfo",E=new v(e._dfdCanceller);10.3<=this.serviceInfo.currentVersion&&
this.serviceInfo.hasMultidimensions?(E._pendingDfd=m({url:D,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),E._pendingDfd.then(w.hitch(this,function(A){E.callback(A.multidimensionalInfo)}),function(A){E.errback(A)})):E.callback(null);return E},_getSlices:function(){var D=this.url+"/slices",E=new v(e._dfdCanceller);this.serviceInfo.hasMultidimensions?(E._pendingDfd=m({url:D,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),E._pendingDfd.then(w.hitch(this,function(A){E.callback(A.slices)}),
function(A){E.errback(A)})):E.callback(null);return E},_initializationFailed:function(){},_constructGetImageParams:function(){var D=this.imageServiceParams||{},E=w.mixin({},this._query,{f:"image",interpolation:D.interpolation,pixelType:D.pixelType,format:D.format||"lerc",compressionQuality:D.compressionQuality,bandIds:D.bandIds?D.bandIds.join(","):null,noData:null!=D.noData?D.noData.join(","):null,noDataInterpretation:D.noDataInterpretation,adjustAspectRatio:null==D.adjustAspectRatio?null:D.adjustAspectRatio,
mosaicRule:D.mosaicRule?c.toJson(D.mosaicRule.toJson()):null,renderingRule:D.renderingRule?c.toJson(D.renderingRule.toJson()):null,token:this.credential&&this.credential.token||null});"lerc"===E.format.toLowerCase()?(E.compressionTolerance=D.compressionTolerance,10.5<=this.serviceInfo.currentVersion&&(E.lercVersion=D.lercVersion||2)):"tiff"===E.format.toLowerCase()?E.compression=D.compression:-1<["jpg","jpeg","jpg","jpgpng"].indexOf(E.format.toLowerCase())&&(E.compression=D.compression);this._commonReqParams=
E},_getRasterIdentifier:function(D){if(this._rasterId)return this._rasterId;D=this.url.replace("http:","").replace("https:","");var E=[],A=this.imageServiceParams||{};E.push(D);E.push(A.interpolation);E.push(A.pixelType);E.push(A.compressionQuality);E.push(A.bandIds?A.bandIds.join(","):"");E.push(A.mosaicRule?c.toJson(A.mosaicRule.toJson()):"");E.push(A.renderingRule?c.toJson(A.renderingRule.toJson()):"");D=E.join("|");return this._rasterId=this._computeSignature(D)},_wrapExtent:function(D){var E=
D.spatialReference._getInfo();if(E){var A=E.valid[0];E=E.valid[1];if(D.xmin<A-this.resolution.x||D.xmax>E+this.resolution.y){var F=new n((D.xmin-A)%(E-A),D.ymin,(D.xmax-E)%(E-A),D.ymax,D.spatialReference);F.xmax<F.xmin&&(F=null)}}return F||D}});w.setObject("layers.rasterLib.raster.ImageServiceRaster",K,q);return K})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(K,G,w,v,r,f){K=K(null,{declaredClass:"esri.layers.ImageServiceParameters",
extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,renderer:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(c){var a=this.bbox||this.extent;c=(a=a&&c&&a._normalize(!0))?a.spatialReference.wkid||w.toJson(a.spatialReference.toJson()):null;var b=this.imageSpatialReference;a={bbox:a?a.xmin+","+a.ymin+","+a.xmax+","+a.ymax:
null,bboxSR:c,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:b?b.wkid||w.toJson(b.toJson()):c,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?w.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?w.toJson(this.renderingRule.toJson()):null,renderer:this.renderer?w.toJson(this.renderer.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,
compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};c=this.timeExtent;a.time=c?c.toJson().join(","):null;return f.filter(a,function(p){if(null!==p&&void 0!==p)return!0})}});G.mixin(K,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});
G.setObject("layers.ImageServiceParameters",K,r);return K})},"esri/layers/rasterLib/raster/BasicRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterHandler ./rasterProjectionHelper ./RasterInfo".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C){return G([t],{url:null,dataType:null,rasterInfo:null,tileInfo:null,serviceInfo:null,loaded:null,constructor:function(z){if(z){var D=z.url;D&&(D=e.urlToObject(D),this.url=D.path,this._query=D.query);this.dataType=z.dataType;this.serviceInfo=z.serviceInfo;this.rasterInfo=z.rasterInfo;this.tileInfo=z.tileInfo;this.serviceInfo=z.serviceInfo}},open:function(){},read:function(z){},identify:function(z){var D=new v,E=this.rasterInfo.extent;if(B.requirePE(E.spatialReference,
z.spatialReference))B.load().then(w.hitch(this,function(){A=B.project(z,E.spatialReference);D.resolve(A)}),function(){D.reject(Error("cannot project into this spatial reference"))});else{var A=B.project(z,E.spatialReference);D.resolve(A)}return D.then(w.hitch(this,function(F){var H=this.tileInfo,I=H.origin,L=H.lods[H.lods.length-1],J=(F.x-I.x)/H.cols/L.resolution;F=(I.y-F.y)/H.rows/L.resolution;var O=Math.round((F-Math.floor(F))*H.rows)*H.cols+Math.round((J-Math.floor(J))*H.cols);I=new n(I.x+L.resolution*
H.cols*J,I.y-L.resolution*H.rows*(F+1),I.x+L.resolution*H.cols*(J+1),I.y-L.resolution*H.rows*F,E.spatialReference);var P=this.getMemberRasters?this.getMemberRasters()[0]:this;return P.read({level:L.level,row:Math.floor(F),col:Math.floor(J),extent:I,width:H.cols,height:H.rows,virtual:P.tileInfo.virtual,tileType:P.tileInfo.tileType}).then(function(fa){return(fa=fa&&fa.pixelBlock)&&fa.pixels&&0<fa.pixels.length&&(!fa.mask||fa.mask[O])?{pixelValue:fa.pixels.map(function(V){return V[O]})}:{pixelValue:null}})}))},
getProjectedFullExtent:function(z,D){var E=new v;if(this.projectedFullExtent&&!D)return E.resolve(this.projectedFullExtent),E.promise;var A=this.rasterInfo.extent;if(B.requirePE(this.rasterInfo.extent.spatialReference,z))B.load().then(w.hitch(this,function(){F=B.project(A,z);this.projectedFullExtent=F=new n(F.toJson());E.resolve(F)}),function(){E.reject(Error("cannot project into this spatial reference"))});else{var F=B.project(A,z);this.projectedFullExtent=F=new n(F.toJson());E.resolve(F)}return E.promise},
setFetchParameters:function(z,D){},_setRasterHandler:function(z){this._rasterHandler=z;this.getMemberRasters&&this.getMemberRasters().forEach(w.hitch(this,function(D){D._rasterHandler=z}))},_findCredential:function(){this.url&&((this._credential=q.id&&q.id.findCredential(this.url))&&this._credential.ssl||this.serviceInfo&&this.serviceInfo._ssl)&&(this.url=this.url.replace(/^http:/i,"https:"))},_initWorker:function(){this._rasterHandler=new y;this._rasterHandler.start().then(function(){this._rasterHandlerInitialized=
!0}.bind(this))},_requestPixels:function(z){var D=z.url,E=z.payload,A=z.decodeParams,F=z.tileOptions,H=new v(h._dfdCanceller);this._rasterHandler||this._initWorker();var I=this._rasterHandler,L={};D={url:D,handleAs:"arraybuffer",content:E};z.headers&&(D.headers=z.headers);H._pendingDfd=m(D).then(w.hitch(this,function(J){(I&&this._rasterHandlerInitialized?I.decode({encodedData:J,decodeParams:A}):x.decode(J,A)).then(function(O){L.pixelBlock=new u(O);L.extent=F.extent;L.level=F.level;L.row=F.row;L.col=
F.col;L.width=F.width;L.height=F.height;h._resDfd(H,[L])},function(O){h._resDfd(H,[O],!0)})}),function(J){h._resDfd(H,[J],!0)});return H},_computeSignature:function(z){if("string"===typeof z){for(var D=new Uint8Array(z.length),E=0;E<z.length;E++)D[E]=z.charCodeAt(E);z=D}E=D=65535;for(var A=z.length,F=Math.floor(A/2),H=0;F;){var I=359<=F?359:F;F-=I;do D+=z[H++]<<8,E+=D+=z[H++];while(--I);D=(D&65535)+(D>>>16);E=(E&65535)+(E>>>16)}A&1&&(E+=D+=z[H]<<8);return((E&65535)+(E>>>16)<<16|(D&65535)+(D>>>16))>>>
0}})})},"esri/layers/rasterFormats/rasterCodec":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred ../PixelBlock ./LercCodec ./Lerc2Codec ./Lerc ./JpgPlus ./Png ./Raw ./TiffDecoder".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t){return{validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),supportedFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_isPlatformLittleEndian:function(){var m=new ArrayBuffer(4),n=new Uint8Array(m);(new Uint32Array(m))[0]=
1;return 1===n[0]}(),decode:function(m,n){if(void 0===n||null===n)throw"missing decode options";var k;n.format&&(k=n.format.toUpperCase());"BSQ"!==k&&"BIP"!==k&&(k=this._getFormat(m));var l=n.decodeFunc;if(void 0===l||null===l)l=this._getFormatDecoderDfd(k,n.useWasm);return l(m,n)},_getFormatDecoderDfd:function(m,n){if(n&&("LERC"===m||"LERC2"===m))return this._decodeLercWasm.bind(this);var k=null;switch(m){case "LERC":k=this._decodeLerc;break;case "LERC2":k=this._decodeLerc2;break;case "JPEG":k=this._decodeJpeg;
break;case "PNG":k=this._decodePng;break;case "BSQ":k=this._decodeBsq;break;case "BIP":k=this._decodeBip;break;case "TIFF":k=this._decodeTiff;break;default:k=function(l,h){throw"The raster format is not supported";}}k=w.hitch(this,k);return function(l,h){var e=new v;h.isPoint&&h.width&&(h.width++,h.height++);var d=k(l,h);h.isPoint&&h.width&&(this._interpolatePointGrid(d),h.width--,h.height--);e.resolve(d);return e}.bind(this)},_getFormat:function(m){m=new Uint8Array(m,0,10);var n="";if(255===m[0]&&
216===m[1])n="JPEG";else if(137===m[0]&&80===m[1]&&78===m[2]&&71===m[3])n="PNG";else if(67===m[0]&&110===m[1]&&116===m[2]&&90===m[3]&&73===m[4]&&109===m[5]&&97===m[6]&&103===m[7]&&101===m[8]&&32===m[9])n="LERC";else if(76===m[0]&&101===m[1]&&114===m[2]&&99===m[3]&&50===m[4]&&32===m[5])n="LERC2";else if(-1<String.fromCharCode.apply(null,m).toLowerCase().indexOf("error"))n="ERROR";else if(73===m[0]&&73===m[1]&&42===m[2]&&0===m[3]||77===m[0]&&77===m[1]&&0===m[2]&&42===m[3])n="TIFF";return n},_validateDecodeParams:function(m){if(!m.height||
Math.floor(m.height)!==m.height)throw"Height not provided.";if(!m.width||Math.floor(m.width)!==m.width)throw"Width not provided.";},_decodeJpeg:function(m,n){if(!b)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(n);var k=(new b).decode(m);if(!this._verifyResult(k,n))throw"The decoded image dimensions are incorrect.";k=new r({width:k.width,height:k.height,pixels:k.pixels,pixelType:"U8",mask:k.mask,statistics:null});k.calculateStatistics();return k},_decodePng:function(m,n){if(!p)throw"The png decoder module is not loaded.";
this._validateDecodeParams(n);var k=new Uint8Array(m),l=new p(k);k=new Uint8Array(n.width*n.height*4);l.copyToImageData(k,l.decodePixels());var h=l=0;h=new Uint8Array(n.width*n.height);for(l=0;l<n.width*n.height;l++)h[l]=k[4*l+3];var e=new r({width:n.width,height:n.height,pixels:[],pixelType:"U8",mask:h,statistics:[]});for(l=0;3>l;l++){var d=new Uint8Array(n.width*n.height);for(h=0;h<n.width*n.height;h++)d[h]=k[4*h+l];e.addData({pixels:d})}e.calculateStatistics();return e},_decodeBsq:function(m,n){if(!q)throw"The bsq decoder module is not loaded.";
this._validateDecodeParams(n);var k=n.noDataValue;n.pixelType=this._getpixelTypeAndNoData(n.pixelType);k=q.decodeBSQ(m,{bandCount:n.planes,width:n.width,height:n.height,pixelType:n.pixelType,noDataValue:k});k=new r({width:n.width,height:n.height,pixels:k.pixels,pixelType:n.pixelType,mask:k.maskData,statistics:null});k.calculateStatistics();return k},_decodeBip:function(m,n){this._validateDecodeParams(n);var k=n.noDataValue;n.pixelType=this._getpixelTypeAndNoData(n.pixelType);k=q.decodeBIP(m,{bandCount:n.planes,
width:n.width,height:n.height,pixelType:n.pixelType,noDataValue:k});k=new r({width:n.width,height:n.height,pixels:k.pixels,pixelType:n.pixelType,mask:k.maskData,statistics:null});k.calculateStatistics();return k},_decodeTiff:function(m,n){this._validateDecodeParams(n);n.pixelType=this._getpixelTypeAndNoData(n.pixelType);var k=t.decode(m);k=new r({width:k.width,height:k.height,pixels:k.pixels,pixelType:k.pixelType,mask:k.maskData,statistics:null});k.calculateStatistics();return k},_decodeLerc:function(m,
n){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(n);var k=n.noDataValue;n.pixelType=this._getpixelTypeAndNoData(n.pixelType);for(var l=0,h,e=0,d,g=m.byteLength-10;e<g;){var u=f.decode(m,{inputOffset:e,encodedMaskData:h,returnMask:0===l?!0:!1,returnEncodedMask:0===l?!0:!1,returnFileInfo:!0,pixelType:n.pixelType,noDataValue:k});e=u.fileInfo.eofOffset;0===l&&(h=u.encodedMaskData,d=new r({width:n.width,height:n.height,pixels:[],
pixelType:n.pixelType,mask:u.maskData,statistics:[]}));l++;if(!this._verifyResult(u,n))throw"The decoded image dimensions are incorrect";d.addData({pixels:u.pixelData,statistics:{minValue:u.minValue,maxValue:u.maxValue,noDataValue:u.noDataValue}})}return d},_decodeLerc2:function(m,n){if(!this._isPlatformLittleEndian)throw"lerc2 decoder is not supported on big endian platform";this._validateDecodeParams(n);n.pixelType=this._getpixelTypeAndNoData(n.pixelType);for(var k=0,l,h,e,d=0,g,u=m.byteLength-
10,x=[],y,B=0;d<u;){h=c.decode(m,{inputOffset:d,maskData:l,returnFileInfo:!0});d=h.fileInfo.eofOffset;l=h.maskData;0===k&&(e=h.fileInfo.numValidPixel,g=new r({width:n.width,height:n.height,pixels:[],dimCount:h.dimCount||1,pixelType:h.fileInfo.pixelType,mask:l,statistics:[]}));h.fileInfo.mask&&0<h.fileInfo.mask.numBytes&&B++;l&&x.push(l);k++;if(!this._verifyResult(h,n))throw"The decoded image dimensions are incorrect";g.addData({pixels:h.pixelData,statistics:{minValue:h.minValue,maxValue:h.maxValue,
noDataValue:h.noDataValue,dimStats:h.dimStats}})}if(1<B){h=g.width*g.height;g.bandMasks=x;l=new Uint8Array(h);l.set(x[0]);for(e=1;e<x.length;e++)for(y=x[e],k=0;k<h;k++)l[k]&=y[k];for(k=e=0;k<h;k++)e+=y[k];g.mask=l}g.validPixelCount=e;return g},_decodeLercWasm:function(m,n){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(n);var k=new v;a.load().then(function(){var l=a.decode(m,{inputOffset:0,noDataValue:n.noDataValue,pixelType:n.pixelType&&
n.pixelType.toUpperCase()});l=new r({width:l.width,height:l.height,pixelType:l.pixelType.toUpperCase(),pixels:l.pixels,mask:l.mask,statistics:l.statistics,validPixelCount:l.validPixelCount});n.isPoint&&n.width&&(this._interpolatePointGrid(l),n.width--,n.height--);k.resolve(l)}.bind(this),function(){k.reject("Cannot load lerc wasm decoder")});return k},_interpolatePointGrid:function(m,n){var k=m.pixels;if(k&&0!==k.length){var l=k.length,h=m.width,e=m.mask,d=h-1,g=m.height-1,u=[],x,y,B;if(0===(null==
n?1:n)){for(x=0;x<l;x++){var C=k[x];var z=new C.constructor(d*g);for(y=0;y<g;y++){var D=y*h;for(B=0;B<d;B++)z[y*d+B]=C[D+B]}u.push(z)}if(e){var E=new Uint8Array(d*g);for(y=0;y<g;y++)for(D=y*h,B=0;B<d;B++)E[y*d+B]=e[D+B]}}else{for(x=0;x<l;x++){C=k[x];z=new C.constructor(d*g);for(y=0;y<g;y++)for(D=y*h,B=0;B<d;B++)z[y*d+B]=(C[D+B]+C[D+B+1]+C[D+h+B]+C[D+h+B+1])/4;u.push(z)}if(e)for(E=new Uint8Array(d*g),y=0;y<g;y++)for(D=y*h,B=0;B<d;B++)E[y*d+B]=Math.min.apply(null,[e[D+B],e[D+B+1],e[D+h+B],e[D+h+B+1]])}m.width=
d;m.height=g;m.mask=E;m.pixels=u;return m}},_getpixelTypeAndNoData:function(m){return"U1"===m||"U2"===m||"U4"===m||"U8"===m?"U8":m},_verifyResult:function(m,n){return m.height!==n.height||m.width!==n.width?!1:!0}}})},"esri/layers/rasterFormats/Lerc":function(){var K=this&&this.__createBinding||(Object.create?function(r,f,c,a){void 0===a&&(a=c);Object.defineProperty(r,a,{enumerable:!0,get:function(){return f[c]}})}:function(r,f,c,a){void 0===a&&(a=c);r[a]=f[c]}),G=this&&this.__setModuleDefault||(Object.create?
function(r,f){Object.defineProperty(r,"default",{enumerable:!0,value:f})}:function(r,f){r["default"]=f}),w=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var f={};if(null!=r)for(var c in r)"default"!==c&&Object.prototype.hasOwnProperty.call(r,c)&&K(f,r,c);G(f,r);return f},v=this&&this.__read||function(r,f){var c="function"===typeof Symbol&&r[Symbol.iterator];if(!c)return r;var a=c.call(r),b,p=[];try{for(;(void 0===f||0<f--)&&!(b=a.next()).done;)p.push(b.value)}catch(t){var q={error:t}}finally{try{b&&
!b.done&&(c=a["return"])&&c.call(a)}finally{if(q)throw q.error;}}return p};define(["require","exports"],function(r,f){function c(t){var m=t._malloc,n=t._free,k=t._lerc_getBlobInfo,l=t._lerc_getDataRanges,h=t._lerc_decode_4D,e,d=Object.values(t.asm).find(function(u){return u&&"buffer"in u&&u.buffer===t.HEAPU8.buffer}),g=function(u){u=u.map(function(C){return(C>>3<<3)+16});var x=u.reduce(function(C,z){return C+z}),y=m(x);e=new Uint8Array(d.buffer);x=u[0];u[0]=y;for(y=1;y<u.length;y++){var B=u[y];u[y]=
u[y-1]+x;x=B}return u};q.getBlobInfo=function(u){var x,y=new Uint8Array(48),B=new Uint8Array(24),C=v(g([u.length,y.length,B.length]),3),z=C[0],D=C[1];C=C[2];e.set(u,z);e.set(y,D);e.set(B,C);if(x=k(z,u.length,D,C,12,3))throw n(z),"lerc-getBlobInfo: error code is ".concat(x);e=new Uint8Array(d.buffer);y.set(e.slice(D,D+y.length));B.set(e.slice(C,C+B.length));y=new Uint32Array(y.buffer);C=new Float64Array(B.buffer);D=v(y,11);B=D[2];y=D[5];var E=D[10];D={version:D[0],dimCount:B,width:D[3],height:D[4],
validPixelCount:D[6],bandCount:y,blobSize:D[7],maskCount:D[8],dataType:D[1],minValue:C[0],maxValue:C[1],maxZerror:C[2],statistics:[],bandCountWithNoData:E};if(E)return D;if(1===B&&1===y)return n(z),D.statistics.push({minValue:C[0],maxValue:C[1]}),D;var A=B*y*8,F=new Uint8Array(A),H=new Uint8Array(A);C=z;E=0;var I=!1;if(e.byteLength<z+2*A){n(z);I=!0;x=v(g([u.length,A,A]),3);C=x[0];E=x[1];var L=x[2];e.set(u,C)}else x=v(g([A,A]),2),E=x[0],L=x[1];e.set(F,E);e.set(H,L);if(x=l(z,u.length,B,y,E,L))throw n(C),
I||n(E),"lerc-getDataRanges: error code is ".concat(x);e=new Uint8Array(d.buffer);F.set(e.slice(E,E+A));H.set(e.slice(L,L+A));u=new Float64Array(F.buffer);z=new Float64Array(H.buffer);x=D.statistics;for(H=0;H<y;H++)if(1<B){A=u.slice(H*B,(H+1)*B);F=z.slice(H*B,(H+1)*B);L=Math.min.apply(null,A);var J=Math.max.apply(null,F);x.push({minValue:L,maxValue:J,dimStats:{minValues:A,maxValues:F}})}else x.push({minValue:u[H],maxValue:z[H]});n(C);I||n(E);return D};q.decode=function(u,x){var y=x.maskCount,B=x.dimCount,
C=x.bandCount,z=x.width,D=x.height,E=x.dataType,A=x.bandCountWithNoData,F=a[E],H=z*D,I=new Uint8Array(H*C),L=H*B*C*F.size;F=new Uint8Array(L);H=new Uint8Array(C);var J=8*C,O=new Uint8Array(J),P=v(g([u.length,I.length,F.length,H.length,O.length]),5),fa=P[0],V=P[1],ba=P[2],ka=P[3];P=P[4];e.set(u,fa);e.set(I,V);e.set(F,ba);e.set(H,ka);e.set(O,P);if(y=h(fa,u.length,y,V,B,z,D,C,E,ba,ka,P))throw n(fa),"lerc-decode: error code is ".concat(y);e=new Uint8Array(d.buffer);F.set(e.slice(ba,ba+L));I.set(e.slice(V,
V+I.length));y=null;if(A)for(H.set(e.slice(ka,ka+C)),O.set(e.slice(P,P+J)),y=[],C=0;C<H.length;C++)y.push(H[C]?O[C]:null);n(fa);return{data:F,maskData:I,noDataValues:y}}}Object.defineProperty(f,"__esModule",{value:!0});f.getBlobInfo=f.decode=f.isLoaded=f.load=void 0;var a=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},
{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}],b=null,p=!1;f.load=function(){return b?b:b=(new Promise(function(t,m){r(["./lerc-wasm"],t,m)})).then(w).then(function(t){t=t["default"];return t({locateFile:function(m){return r.toUrl("./"+
m)}})}).then(function(t){c(t);p=!0})};f.isLoaded=function(){return p};var q={getBlobInfo:null,decode:null};f.decode=function(t,m){var n;void 0===m&&(m={});var k=null!==(n=m.inputOffset)&&void 0!==n?n:0;k=t instanceof Uint8Array?t.subarray(k):new Uint8Array(t,k);n=q.getBlobInfo(k);var l=q.decode(k,n),h=l.maskData;k=n.width;var e=n.height,d=n.bandCount,g=n.dimCount,u=n.maskCount,x=n.statistics,y=a[n.dataType],B=new y.ctor(l.data.buffer);l=[];for(var C=[],z=k*e,D=z*g,E=0;E<d;E++){var A=B.subarray(E*
D,(E+1)*D);if(m.returnPixelInterleavedDims)l.push(A);else{var F=z,H=g;if(!(2>H)){for(var I=new y.ctor(F*H),L=0,J=0;L<F;L++)for(var O=0,P=L;O<H;O++,P+=F)I[P]=A[J++];A=I}l.push(A)}C.push(h.subarray(E*D,(E+1)*D))}h=0===u?null:1===u?C[0]:new Uint8Array(z);if(1<u)for(h.set(C[0]),E=1;E<C.length;E++)for(B=C[E],D=0;D<z;D++)h[D]&=B[D];E=m.noDataValue;E=null!=E&&y.range[0]<=E&&y.range[1]>=E;if(0<u&&E)for(F=m.noDataValue,E=0;E<d;E++)for(A=l[E],B=C[E]||h,D=0;D<z;D++)0===B[D]&&(A[D]=F);return{width:k,height:e,
bandCount:d,pixelType:m.pixelType&&0===n.version?m.pixelType:y.pixelType,dimCount:g,statistics:x,pixels:l,mask:h,bandMasks:u===d&&1<d?C:null}};f.getBlobInfo=function(t,m){var n,k;void 0===m&&(m={});var l=t instanceof Uint8Array?t.subarray(null!==(n=m.inputOffset)&&void 0!==n?n:0):new Uint8Array(t,null!==(k=m.inputOffset)&&void 0!==k?k:0);return q.getBlobInfo(l)}})},"esri/layers/rasterFormats/JpgPlus":function(){define(["dojo/_base/declare","./Zlib","./Jpg"],function(K,G,w){return K(null,{constructor:function(){},
decode:function(v){var r=new Uint8Array(v);v=new w;v.parse(r);var f=v.numComponents,c=v.getData(v.width,v.height,!0),a=v.width*v.height,b=v.eof,p=0,q=0,t=0;if(b<r.length-1){q=(new G(r.subarray(b))).getBytes();var m=new Uint8Array(a);for(p=r=0;p<q.length;p++)for(t=7;0<=t;t--)m[r++]=q[p]>>t&1}r=[];if(1===f&&c.length===a)r=[c,c,c];else{for(p=0;3>p;p++)f=new Uint8Array(a),r.push(f);for(q=t=0;q<a;q++)for(p=0;3>p;p++)r[p][q]=c[t++]}return{width:v.width,height:v.height,pixels:r,mask:m}}})})},"esri/layers/rasterFormats/Zlib":function(){define([],
function(){var K=function(){function G(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}G.prototype={ensureBuffer:function(w){var v=this.buffer,r=v?v.byteLength:0;if(w<r)return v;for(var f=512;f<w;)f<<=1;w=new Uint8Array(f);for(f=0;f<r;++f)w[f]=v[f];return this.buffer=w},getByte:function(){for(var w=this.pos;this.bufferLength<=w;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(w){var v=this.pos;if(w){this.ensureBuffer(v+w);for(w=v+w;!this.eof&&
this.bufferLength<w;)this.readBlock();var r=this.bufferLength;w>r&&(w=r)}else{for(;!this.eof;)this.readBlock();w=this.bufferLength}this.pos=w;return this.buffer.subarray(v,w)},lookChar:function(){for(var w=this.pos;this.bufferLength<=w;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var w=this.pos;this.bufferLength<=w;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(w,
v,r){for(var f=w+v;this.bufferLength<=f&&!this.eof;)this.readBlock();return new Stream(this.buffer,w,v,r)},skip:function(w){w||(w=1);this.pos+=w},reset:function(){this.pos=0}};return G}();return function(){function G(b){throw Error(b);}function w(b){var p=0,q=b[p++],t=b[p++];-1!=q&&-1!=t||G("Invalid header in flate stream");8!=(q&15)&&G("Unknown compression method in flate stream");0!=((q<<8)+t)%31&&G("Bad FCHECK in flate stream");t&32&&G("FDICT bit set in flate stream");this.bytes=b;this.bytesPos=
p;this.codeBuf=this.codeSize=0;K.call(this)}if(!self||!self.Uint32Array)return null;var v=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),f=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,
724993,727041,794625,798721,868353,876545]),c=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,
590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,
590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,
590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,
590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,
590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,
590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,
590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];w.prototype=Object.create(K.prototype);w.prototype.getBits=function(b){for(var p=this.codeSize,q=this.codeBuf,t=this.bytes,m=this.bytesPos,
n;p<b;)"undefined"==typeof(n=t[m++])&&G("Bad encoding in flate stream"),q|=n<<p,p+=8;this.codeBuf=q>>b;this.codeSize=p-=b;this.bytesPos=m;return q&(1<<b)-1};w.prototype.getCode=function(b){var p=b[0],q=b[1];b=this.codeSize;for(var t=this.codeBuf,m=this.bytes,n=this.bytesPos;b<q;){var k;"undefined"==typeof(k=m[n++])&&G("Bad encoding in flate stream");t|=k<<b;b+=8}q=p[t&(1<<q)-1];p=q>>16;q&=65535;(0==b||b<p||0==p)&&G("Bad encoding in flate stream");this.codeBuf=t>>p;this.codeSize=b-p;this.bytesPos=
n;return q};w.prototype.generateHuffmanTable=function(b){for(var p=b.length,q=0,t=0;t<p;++t)b[t]>q&&(q=b[t]);for(var m=1<<q,n=new Uint32Array(m),k=1,l=0,h=2;k<=q;++k,l<<=1,h<<=1)for(var e=0;e<p;++e)if(b[e]==k){var d=0,g=l;for(t=0;t<k;++t)d=d<<1|g&1,g>>=1;for(t=d;t<m;t+=h)n[t]=k<<16|e;++l}return[n,q]};w.prototype.readBlock=function(){function b(d,g,u,x,y){for(d=d.getBits(u)+x;0<d--;)g[l++]=y}var p=this.getBits(3);p&1&&(this.eof=!0);p>>=1;if(0==p){var q=this.bytes,t=this.bytesPos,m;"undefined"==typeof(m=
q[t++])&&G("Bad block header in flate stream");var n=m;"undefined"==typeof(m=q[t++])&&G("Bad block header in flate stream");n|=m<<8;"undefined"==typeof(m=q[t++])&&G("Bad block header in flate stream");p=m;"undefined"==typeof(m=q[t++])&&G("Bad block header in flate stream");(p|m<<8)!=(~n&65535)&&G("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;m=this.bufferLength;p=this.ensureBuffer(m+n);this.bufferLength=n=m+n;for(var k=m;k<n;++k){if("undefined"==typeof(m=q[t++])){this.eof=
!0;break}p[k]=m}this.bytesPos=t}else{if(1==p)t=c,m=a;else if(2==p){p=this.getBits(5)+257;m=this.getBits(5)+1;q=this.getBits(4)+4;t=Array(v.length);for(var l=0;l<q;)t[v[l++]]=this.getBits(3);t=this.generateHuffmanTable(t);l=q=0;m=p+m;for(n=Array(m);l<m;)k=this.getCode(t),16==k?b(this,n,2,3,q):17==k?b(this,n,3,3,q=0):18==k?b(this,n,7,11,q=0):n[l++]=q=k;t=this.generateHuffmanTable(n.slice(0,p));m=this.generateHuffmanTable(n.slice(p,m))}else G("Unknown block type in flate stream");n=(p=this.buffer)?p.length:
0;for(k=this.bufferLength;;){var h=this.getCode(t);if(256>h)k+1>=n&&(p=this.ensureBuffer(k+1),n=p.length),p[k++]=h;else{if(256==h){this.bufferLength=k;break}h-=257;h=r[h];var e=h>>16;0<e&&(e=this.getBits(e));q=(h&65535)+e;h=this.getCode(m);h=f[h];e=h>>16;0<e&&(e=this.getBits(e));h=(h&65535)+e;k+q>=n&&(p=this.ensureBuffer(k+q),n=p.length);for(e=0;e<q;++e,++k)p[k]=p[k-h]}}}};return w}()})},"esri/layers/rasterFormats/Jpg":function(){define([],function(){var K=function(){function G(w){this.message="JPEG error: "+
w}G.prototype=Error();G.prototype.name="JpegError";return G.constructor=G}();return function(){function G(){this.decodeTransform=null;this.colorTransform=-1}function w(a,b){for(var p=0,q=[],t,m,n=16;0<n&&!a[n-1];)n--;q.push({children:[],index:0});var k=q[0],l;for(t=0;t<n;t++){for(m=0;m<a[t];m++){k=q.pop();for(k.children[k.index]=b[p];0<k.index;)k=q.pop();k.index++;for(q.push(k);q.length<=t;)q.push(l={children:[],index:0}),k.children[k.index]=l.children,k=l;p++}t+1<n&&(q.push(l={children:[],index:0}),
k.children[k.index]=l.children,k=l)}return q[0].children}function v(a,b,p,q,t,m,n,k,l){function h(){if(0<A)return A--,E>>A&1;E=a[b++];if(255===E){var ha=a[b++];if(ha)throw new K("unexpected marker "+(E<<8|ha).toString(16));}A=7;return E>>>7}function e(ha){for(;;){ha=ha[h()];if("number"===typeof ha)return ha;if("object"!==typeof ha)throw new K("invalid huffman sequence");}}function d(ha){for(var Z=0;0<ha;)Z=Z<<1|h(),ha--;return Z}function g(ha){if(1===ha)return 1===h()?1:-1;var Z=d(ha);return Z>=1<<
ha-1?Z:Z+(-1<<ha)+1}function u(ha,Z){var W=e(ha.huffmanTableDC);W=0===W?0:g(W);ha.blockData[Z]=ha.pred+=W;for(W=1;64>W;){var Q=e(ha.huffmanTableAC),ia=Q&15;Q>>=4;if(0===ia){if(15>Q)break;W+=16}else W+=Q,ha.blockData[Z+c[W]]=g(ia),W++}}function x(ha,Z){var W=e(ha.huffmanTableDC);W=0===W?0:g(W)<<l;ha.blockData[Z]=ha.pred+=W}function y(ha,Z){ha.blockData[Z]|=h()<<l}function B(ha,Z){if(0<F)F--;else for(var W=m;W<=n;){var Q=e(ha.huffmanTableAC),ia=Q&15;Q>>=4;if(0===ia){if(15>Q){F=d(Q)+(1<<Q)-1;break}W+=
16}else W+=Q,ha.blockData[Z+c[W]]=g(ia)*(1<<l),W++}}function C(ha,Z){for(var W=m,Q=0,ia;W<=n;){ia=c[W];switch(H){case 0:Q=e(ha.huffmanTableAC);ia=Q&15;Q>>=4;if(0===ia)15>Q?(F=d(Q)+(1<<Q),H=4):(Q=16,H=1);else{if(1!==ia)throw new K("invalid ACn encoding");I=g(ia);H=Q?2:3}continue;case 1:case 2:ha.blockData[Z+ia]?ha.blockData[Z+ia]+=h()<<l:(Q--,0===Q&&(H=2===H?3:0));break;case 3:ha.blockData[Z+ia]?ha.blockData[Z+ia]+=h()<<l:(ha.blockData[Z+ia]=I<<l,H=0);break;case 4:ha.blockData[Z+ia]&&(ha.blockData[Z+
ia]+=h()<<l)}W++}4===H&&(F--,0===F&&(H=0))}var z=p.mcusPerLine,D=b,E=0,A=0,F=0,H=0,I,L=q.length,J,O,P,fa;k=p.progressive?0===m?0===k?x:y:0===k?B:C:u;var V=0;p=1===L?q[0].blocksPerLine*q[0].blocksPerColumn:z*p.mcusPerColumn;for(var ba,ka;V<p;){var la=t?Math.min(p-V,t):p;for(J=0;J<L;J++)q[J].pred=0;F=0;if(1===L){var ma=q[0];for(fa=0;fa<la;fa++)k(ma,64*((ma.blocksPerLine+1)*(V/ma.blocksPerLine|0)+V%ma.blocksPerLine)),V++}else for(fa=0;fa<la;fa++){for(J=0;J<L;J++)for(ma=q[J],ba=ma.h,ka=ma.v,O=0;O<ka;O++)for(P=
0;P<ba;P++)k(ma,64*((ma.blocksPerLine+1)*((V/z|0)*ma.v+O)+(V%z*ma.h+P)));V++}A=0;(ma=f(a,b))&&ma.invalid&&(b=ma.offset);ma=ma&&ma.marker;if(!ma||65280>=ma)throw new K("marker was not found");if(65488<=ma&&65495>=ma)b+=2;else break}(ma=f(a,b))&&ma.invalid&&(b=ma.offset);return b-D}function r(a,b){for(var p=b.blocksPerLine,q=b.blocksPerColumn,t=new Int16Array(64),m=0;m<q;m++)for(var n=0;n<p;n++){var k=void 0,l=void 0,h=void 0,e=void 0,d=void 0,g=void 0,u=void 0,x=void 0,y=d=g=e=l=k=void 0,B=void 0,
C=void 0,z=void 0,D=64*((b.blocksPerLine+1)*m+n),E=t,A=b.quantizationTable,F=b.blockData;if(!A)throw new K("missing required Quantization Table.");for(var H=0;64>H;H+=8)k=F[D+H],x=F[D+H+1],u=F[D+H+2],g=F[D+H+3],d=F[D+H+4],e=F[D+H+5],h=F[D+H+6],l=F[D+H+7],k*=A[H],0===(x|u|g|d|e|h|l)?(k=5793*k+512>>10,E[H]=k,E[H+1]=k,E[H+2]=k,E[H+3]=k,E[H+4]=k,E[H+5]=k,E[H+6]=k,E[H+7]=k):(x*=A[H+1],u*=A[H+2],g*=A[H+3],d*=A[H+4],e*=A[H+5],h*=A[H+6],l*=A[H+7],z=5793*k+128>>8,C=5793*d+128>>8,B=u,y=h,d=2896*(x-l)+128>>
8,l=2896*(x+l)+128>>8,g<<=4,e<<=4,z=z+C+1>>1,C=z-C,k=3784*B+1567*y+128>>8,B=1567*B-3784*y+128>>8,y=k,d=d+e+1>>1,e=d-e,l=l+g+1>>1,g=l-g,z=z+y+1>>1,y=z-y,C=C+B+1>>1,B=C-B,k=2276*d+3406*l+2048>>12,d=3406*d-2276*l+2048>>12,l=k,k=799*g+4017*e+2048>>12,g=4017*g-799*e+2048>>12,e=k,E[H]=z+l,E[H+7]=z-l,E[H+1]=C+e,E[H+6]=C-e,E[H+2]=B+g,E[H+5]=B-g,E[H+3]=y+d,E[H+4]=y-d);for(A=0;8>A;++A)k=E[A],x=E[A+8],u=E[A+16],g=E[A+24],d=E[A+32],e=E[A+40],h=E[A+48],l=E[A+56],0===(x|u|g|d|e|h|l)?(k=5793*k+8192>>14,k=-2040>
k?0:2024<=k?255:k+2056>>4,F[D+A]=k,F[D+A+8]=k,F[D+A+16]=k,F[D+A+24]=k,F[D+A+32]=k,F[D+A+40]=k,F[D+A+48]=k,F[D+A+56]=k):(z=5793*k+2048>>12,C=5793*d+2048>>12,B=u,y=h,d=2896*(x-l)+2048>>12,l=2896*(x+l)+2048>>12,z=(z+C+1>>1)+4112,C=z-C,k=3784*B+1567*y+2048>>12,B=1567*B-3784*y+2048>>12,y=k,d=d+e+1>>1,e=d-e,l=l+g+1>>1,g=l-g,z=z+y+1>>1,y=z-y,C=C+B+1>>1,B=C-B,k=2276*d+3406*l+2048>>12,d=3406*d-2276*l+2048>>12,l=k,k=799*g+4017*e+2048>>12,g=4017*g-799*e+2048>>12,e=k,k=z+l,l=z-l,x=C+e,h=C-e,u=B+g,e=B-g,g=y+d,
d=y-d,k=16>k?0:4080<=k?255:k>>4,x=16>x?0:4080<=x?255:x>>4,u=16>u?0:4080<=u?255:u>>4,g=16>g?0:4080<=g?255:g>>4,d=16>d?0:4080<=d?255:d>>4,e=16>e?0:4080<=e?255:e>>4,h=16>h?0:4080<=h?255:h>>4,l=16>l?0:4080<=l?255:l>>4,F[D+A]=k,F[D+A+8]=x,F[D+A+16]=u,F[D+A+24]=g,F[D+A+32]=d,F[D+A+40]=e,F[D+A+48]=h,F[D+A+56]=l)}return b.blockData}function f(a,b,p){var q=a.length-1;p=p<b?p:b;if(b>=q)return null;var t=a[b]<<8|a[b+1];if(65472<=t&&65534>=t)return{invalid:null,marker:t,offset:b};for(b=a[p]<<8|a[p+1];!(65472<=
b&&65534>=b);){if(++p>=q)return null;b=a[p]<<8|a[p+1]}return{invalid:t.toString(16),marker:b,offset:p}}if(!self||!self.Uint8ClampedArray)return null;var c=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);G.prototype={parse:function(a){function b(){var E=a[t]<<8|a[t+1];t+=2;return E}function p(){var E=b();E=t+E-2;var A=f(a,E,t);A&&A.invalid&&(E=A.offset);
E=a.subarray(t,E);t+=E.length;return E}function q(E){for(var A=Math.ceil(E.samplesPerLine/8/E.maxH),F=Math.ceil(E.scanLines/8/E.maxV),H=0;H<E.components.length;H++){D=E.components[H];var I=Math.ceil(Math.ceil(E.samplesPerLine/8)*D.h/E.maxH),L=Math.ceil(Math.ceil(E.scanLines/8)*D.v/E.maxV);D.blockData=new Int16Array(64*F*D.v*(A*D.h+1));D.blocksPerLine=I;D.blocksPerColumn=L}E.mcusPerLine=A;E.mcusPerColumn=F}var t=0,m=null,n=null,k=[],l=[],h=[],e=b();if(65496!==e)throw new K("SOI not found");for(e=b();65497!==
e;){switch(e){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var d=p();65504===e&&74===d[0]&&70===d[1]&&73===d[2]&&70===d[3]&&0===d[4]&&(m={version:{major:d[5],minor:d[6]},densityUnits:d[7],xDensity:d[8]<<8|d[9],yDensity:d[10]<<8|d[11],thumbWidth:d[12],thumbHeight:d[13],thumbData:d.subarray(14,14+3*d[12]*d[13])});65518===e&&65===d[0]&&100===d[1]&&111===d[2]&&
98===d[3]&&101===d[4]&&(n={version:d[5]<<8|d[6],flags0:d[7]<<8|d[8],flags1:d[9]<<8|d[10],transformCode:d[11]});break;case 65499:e=b()+t-2;for(var g;t<e;){var u=a[t++],x=new Uint16Array(64);if(0===u>>4)for(d=0;64>d;d++)g=c[d],x[g]=a[t++];else if(1===u>>4)for(d=0;64>d;d++)g=c[d],x[g]=b();else throw new K("DQT - invalid table spec");k[u&15]=x}break;case 65472:case 65473:case 65474:if(y)throw new K("Only single frame JPEGs supported");b();var y={};y.extended=65473===e;y.progressive=65474===e;y.precision=
a[t++];y.scanLines=b();y.samplesPerLine=b();y.components=[];y.componentIds={};d=a[t++];for(e=x=u=0;e<d;e++){g=a[t];var B=a[t+1]>>4;var C=a[t+1]&15;u<B&&(u=B);x<C&&(x=C);B=y.components.push({h:B,v:C,quantizationId:a[t+2],quantizationTable:null});y.componentIds[g]=B-1;t+=3}y.maxH=u;y.maxV=x;q(y);break;case 65476:g=b();for(e=2;e<g;){u=a[t++];x=new Uint8Array(16);for(d=B=0;16>d;d++,t++)B+=x[d]=a[t];C=new Uint8Array(B);for(d=0;d<B;d++,t++)C[d]=a[t];e+=17+B;(0===u>>4?h:l)[u&15]=w(x,C)}break;case 65501:b();
var z=b();break;case 65498:b();g=a[t++];d=[];for(e=0;e<g;e++){u=y.componentIds[a[t++]];var D=y.components[u];u=a[t++];D.huffmanTableDC=h[u>>4];D.huffmanTableAC=l[u&15];d.push(D)}e=a[t++];g=a[t++];u=a[t++];e=v(a,t,y,d,z,e,g,u>>4,u&15);t+=e;break;case 65535:255!==a[t]&&t--;break;default:if(255===a[t-3]&&192<=a[t-2]&&254>=a[t-2])t-=3;else throw new K("unknown marker "+e.toString(16));}e=b()}this.width=y.samplesPerLine;this.height=y.scanLines;this.jfif=m;this.eof=t;this.adobe=n;this.components=[];for(e=
0;e<y.components.length;e++){D=y.components[e];if(m=k[D.quantizationId])D.quantizationTable=m;this.components.push({output:r(y,D),scaleX:D.h/y.maxH,scaleY:D.v/y.maxV,blocksPerLine:D.blocksPerLine,blocksPerColumn:D.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(a,b){var p=this.width/a,q=this.height/b,t,m,n=0,k=this.components.length,l=a*b*k,h=new Uint8ClampedArray(l),e=new Uint32Array(a);for(m=0;m<k;m++){var d=this.components[m];var g=d.scaleX*p;var u=
d.scaleY*q;n=m;var x=d.output;var y=d.blocksPerLine+1<<3;for(t=0;t<a;t++)d=0|t*g,e[t]=(d&4294967288)<<3|d&7;for(g=0;g<b;g++)for(d=0|g*u,d=y*(d&4294967288)|(d&7)<<3,t=0;t<a;t++)h[n]=x[d+e[t]],n+=k}if(q=this.decodeTransform)for(m=0;m<l;)for(p=d=0;d<k;d++,m++,p+=2)h[m]=(h[m]*q[p]>>8)+q[p+1];return h},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(a){for(var b,
p,q,t=0,m=a.length;t<m;t+=3)b=a[t],p=a[t+1],q=a[t+2],a[t]=b-179.456+1.402*q,a[t+1]=b+135.459-.344*p-.714*q,a[t+2]=b-226.816+1.772*p;return a},_convertYcckToRgb:function(a){for(var b,p,q,t,m=0,n=0,k=a.length;n<k;n+=4)b=a[n],p=a[n+1],q=a[n+2],t=a[n+3],a[m++]=-122.67195406894+p*(-6.60635669420364E-5*p+4.37130475926232E-4*q-5.4080610064599E-5*b+4.8449797120281E-4*t-.154362151871126)+q*(-9.57964378445773E-4*q+8.17076911346625E-4*b-.00477271405408747*t+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*
t+.48357088451265)+t*(-3.36197177618394E-4*t+.484791561490776),a[m++]=107.268039397724+p*(2.19927104525741E-5*p-6.40992018297945E-4*q+6.59397001245577E-4*b+4.26105652938837E-4*t-.176491792462875)+q*(-7.78269941513683E-4*q+.00130872261408275*b+7.70482631801132E-4*t-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*t+.25802910206845)+t*(-3.18913117588328E-4*t-.213742400323665),a[m++]=-20.810012546947+p*(-5.70115196973677E-4*p-2.63409051004589E-5*q+.0020741088115012*b-.00288260236853442*t+
.814272968359295)+q*(-1.53496057440975E-5*q-1.32689043961446E-4*b+5.60833691242812E-4*t-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*t+.116935020465145)+t*(-3.43531996510555E-4*t+.24165260232407);return a},_convertYcckToCmyk:function(a){for(var b,p,q,t=0,m=a.length;t<m;t+=4)b=a[t],p=a[t+1],q=a[t+2],a[t]=434.456-b-1.402*q,a[t+1]=119.541-b+.344*p+.714*q,a[t+2]=481.816-b-1.772*p;return a},_convertCmykToRgb:function(a){for(var b,p,q,t,m=0,n=1/255,k=0,l=a.length;k<l;k+=4)b=a[k]*n,p=a[k+
1]*n,q=a[k+2]*n,t=a[k+3]*n,a[m++]=255+b*(-4.387332384609988*b+54.48615194189176*p+18.82290502165302*q+212.25662451639585*t-285.2331026137004)+p*(1.7149763477362134*p-5.6096736904047315*q-17.873870861415444*t-5.497006427196366)+q*(-2.5217340131683033*q-21.248923337353073*t+17.5119270841813)-t*(21.86122147463605*t+189.48180835922747),a[m++]=255+b*(8.841041422036149*b+60.118027045597366*p+6.871425592049007*q+31.159100130055922*t-79.2970844816548)+p*(-15.310361306967817*p+17.575251261109482*q+131.35250912493976*
t-190.9453302588951)+q*(4.444339102852739*q+9.8632861493405*t-24.86741582555878)-t*(20.737325471181034*t+187.80453709719578),a[m++]=255+b*(.8842522430003296*b+8.078677503112928*p+30.89978309703729*q-.23883238689178934*t-14.183576799673286)+p*(10.49593273432072*p+63.02378494754052*q+50.606957656360734*t-112.23884253719248)+q*(.03296041114873217*q+115.60384449646641*t-193.58209356861505)-t*(22.33816807309886*t+180.12613974708367);return a},getData:function(a,b,p){if(4<this.numComponents)throw new K("Unsupported color mode");
a=this._getLinearizedBlockData(a,b);if(1===this.numComponents&&p){p=a.length;b=new Uint8ClampedArray(3*p);for(var q=0,t=0;t<p;t++){var m=a[t];b[q++]=m;b[q++]=m;b[q++]=m}return b}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return p?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(p)return this._convertCmykToRgb(a)}return a}};return G}()})},"esri/layers/rasterFormats/Png":function(){define(["./Zlib"],
function(K){return function(){function G(v){var r,f;this.data=v;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(f=null;;){var c=this.readUInt32();var a=v=void 0;v=[];for(a=0;4>a;++a)v.push(String.fromCharCode(this.data[this.pos++]));v=v.join("");switch(v){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(c);break;case "fcTL":f&&this.animation.frames.push(f);this.pos+=4;f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};v=this.readUInt16();c=this.readUInt16()||100;f.delay=1E3*v/c;f.disposeOp=this.data[this.pos++];f.blendOp=this.data[this.pos++];
f.data=[];break;case "IDAT":case "fdAT":"fdAT"===v&&(this.pos+=4,c-=4);v=(null!=f?f.data:void 0)||this.imgData;for(a=0;0<=c?a<c:a>c;0<=c?++a:--a)v.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(c);c=255-this.transparency.indexed.length;if(0<c)for(v=0;0<=c?v<c:v>c;0<=c?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;
case "tEXt":a=this.read(c);c=a.indexOf(0);v=String.fromCharCode.apply(String,a.slice(0,c));this.text[v]=String.fromCharCode.apply(String,a.slice(c+1));break;case "IEND":f&&this.animation.frames.push(f);a:{switch(this.colorType){case 0:case 3:case 4:f=1;break a;case 2:case 6:f=3;break a}f=void 0}this.colors=f;this.hasAlphaChannel=4===(r=this.colorType)||6===r;r=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*r;a:{switch(this.colors){case 1:r="DeviceGray";break a;case 3:r="DeviceRGB";
break a}r=void 0}this.colorSpace=r;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=c}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}G.load=function(v,r,f){"function"===typeof r&&(f=r);var c=new XMLHttpRequest;c.open("GET",v,!0);c.responseType="arraybuffer";c.onload=function(){var a=new Uint8Array(c.response||c.mozResponseArrayBuffer);a=new G(a);"function"===typeof(null!=r?r.getContext:void 0)&&a.render(r);return"function"===typeof f?f(a):
void 0};return c.send(null)};G.prototype.read=function(v){var r;var f=[];for(r=0;0<=v?r<v:r>v;0<=v?++r:--r)f.push(this.data[this.pos++]);return f};G.prototype.readUInt32=function(){var v=this.data[this.pos++]<<24;var r=this.data[this.pos++]<<16;var f=this.data[this.pos++]<<8;var c=this.data[this.pos++];return v|r|f|c};G.prototype.readUInt16=function(){var v=this.data[this.pos++]<<8;var r=this.data[this.pos++];return v|r};G.prototype.decodePixels=function(v){var r,f,c,a,b,p,q,t;null==v&&(v=this.imgData);
if(0===v.length)return new Uint8Array(0);v=new K(v);v=v.getBytes();var m=this.pixelBitlength/8;var n=m*this.width;var k=new Uint8Array(n*this.height);var l=v.length;for(f=a=b=0;a<l;){switch(v[a++]){case 0:for(c=r=0;r<n;c=r+=1)k[f++]=v[a++];break;case 1:for(c=p=0;p<n;c=p+=1){r=v[a++];var h=c<m?0:k[f-m];k[f++]=(r+h)%256}break;case 2:for(c=h=0;h<n;c=h+=1){r=v[a++];var e=(c-c%m)/m;p=b&&k[(b-1)*n+e*m+c%m];k[f++]=(p+r)%256}break;case 3:for(c=t=0;t<n;c=t+=1)r=v[a++],e=(c-c%m)/m,h=c<m?0:k[f-m],p=b&&k[(b-
1)*n+e*m+c%m],k[f++]=(r+Math.floor((h+p)/2))%256;break;case 4:for(c=t=0;t<n;c=t+=1){r=v[a++];e=(c-c%m)/m;h=c<m?0:k[f-m];0===b?p=q=0:(p=k[(b-1)*n+e*m+c%m],q=e&&k[(b-1)*n+(e-1)*m+c%m]);var d=h+p-q;c=Math.abs(d-h);e=Math.abs(d-p);d=Math.abs(d-q);h=c<=e&&c<=d?h:e<=d?p:q;k[f++]=(r+h)%256}break;default:throw Error("Invalid filter algorithm: "+v[a-1]);}b++}return k};G.prototype.decodePalette=function(){var v,r,f,c,a;var b=this.palette;var p=this.transparency.indexed||[];var q=new Uint8Array((p.length||0)+
b.length);var t=f=v=r=0;for(c=b.length;f<c;t=f+=3)q[r++]=b[t],q[r++]=b[t+1],q[r++]=b[t+2],q[r++]=null!=(a=p[v++])?a:255;return q};G.prototype.copyToImageData=function(v,r){var f,c;var a=this.colors;var b=null;var p=this.hasAlphaChannel;this.palette.length&&(b=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),a=4,p=!0);f=v.data||v;var q=f.length;var t=b||r;var m=c=0;if(1===a)for(;m<q;)a=b?4*r[m/4]:c,c=t[a++],f[m++]=c,f[m++]=c,f[m++]=c,f[m++]=p?t[a++]:this.transparency.grayscale&&
this.transparency.grayscale===c?0:255,c=a;else for(;m<q;)a=b?4*r[m/4]:c,f[m++]=t[a++],f[m++]=t[a++],f[m++]=t[a++],f[m++]=p?t[a++]:this.transparency.rgb&&this.transparency.rgb[1]===t[a-3]&&this.transparency.rgb[3]===t[a-2]&&this.transparency.rgb[5]===t[a-1]?0:255,c=a};G.prototype.decode=function(){var v=new Uint8Array(this.width*this.height*4);this.copyToImageData(v,this.decodePixels());return v};var w=function(v){(void 0).clearRect(0,0,v.width,v.height);(void 0).putImageData(v,0,0);v=new Image;v.src=
(void 0).toDataURL();return v};G.prototype.decodeFrames=function(v){var r,f;if(this.animation){var c=this.animation.frames;var a=[];var b=r=0;for(f=c.length;r<f;b=++r){b=c[b];var p=v.createImageData(b.width,b.height);var q=this.decodePixels(new Uint8Array(b.data));this.copyToImageData(p,q);b.imageData=p;a.push(b.image=w(p))}return a}};G.prototype.renderFrame=function(v,r){var f=this.animation.frames;var c=f[r];f=f[r-1];0===r&&v.clearRect(0,0,this.width,this.height);1===(null!=f?f.disposeOp:void 0)?
v.clearRect(f.xOffset,f.yOffset,f.width,f.height):2===(null!=f?f.disposeOp:void 0)&&v.putImageData(f.imageData,f.xOffset,f.yOffset);0===c.blendOp&&v.clearRect(c.xOffset,c.yOffset,c.width,c.height);return v.drawImage(c.image,c.xOffset,c.yOffset)};G.prototype.animate=function(v){var r,f=this;var c=0;var a=this.animation;var b=a.numFrames;var p=a.frames;var q=a.numPlays;return(r=function(){var t=c++%b;var m=p[t];f.renderFrame(v,t);if(1<b&&c/b<q)return f.animation._timeout=setTimeout(r,m.delay)})()};
G.prototype.stopAnimation=function(){var v;return clearTimeout(null!=(v=this.animation)?v._timeout:void 0)};G.prototype.render=function(v){v._png&&v._png.stopAnimation();v._png=this;v.width=this.width;v.height=this.height;v=v.getContext("2d");if(this.animation)return this.decodeFrames(v),this.animate(v);var r=v.createImageData(this.width,this.height);this.copyToImageData(r,this.decodePixels());return v.putImageData(r,0,0)};return G}()})},"esri/layers/rasterFormats/Raw":function(){define([],function(){return{decodeBIP:function(K,
G){var w=G.pixelType,v=G.bandCount,r=[],f=G.width*G.height,c=this.getBandCount(K,G);v=v||c;var a=K.byteLength-K.byteLength%(f*this._getPixelLength(w)),b=new w(K,0,f*c),p,q,t;for(p=0;p<v;p++){var m=new w(f);for(q=0;q<f;q++)m[q]=b[q*c+p];r.push(m)}a<K.byteLength-1&&(t=this._decodeMask(K.slice(a),G));return{pixels:r,maskData:t}},decodeBSQ:function(K,G){var w=G.pixelType,v=G.bandCount;if(void 0===v||null===v)v=this.getBandCount(K,G);var r=[],f=G.width*G.height,c=f*v,a=K.byteLength-K.byteLength%(f*this._getPixelLength(w));
w=new w(K,0,c);var b;for(c=0;c<v;c++)r.push(w.subarray(c*f,(c+1)*f));a<K.byteLength-1&&(b=this._decodeMask(K.slice(a),G));return{pixels:r,maskData:b}},getBandCount:function(K,G){return Math.floor(K.byteLength/(G.width*G.height*this._getPixelLength(G.pixelType)))},_getPixelLength:function(K){var G=1;switch(K){case Uint8Array:case Int8Array:case Uint8ClampedArray:G=1;break;case Uint16Array:case Int16Array:G=2;break;case Uint32Array:case Int32Array:case Float32Array:G=4;break;case Float64Array:G=8}return G},
_decodeMask:function(K,G){var w=G.width*G.height;if(8*K.byteLength<w)return null;var v=new Uint8Array(K,0,Math.ceil(w/8)),r=new Uint8Array(G.width*G.height),f=0,c=0,a=0,b=0;for(a=0;a<v.length-1;a++)for(c=v[a],b=7;0<=b;b--)r[f++]=c>>b&1;for(b=7;f<w-1;)c=v[v.length-1],r[f++]=c>>b&1,b--;return r}}})},"esri/layers/rasterFormats/TiffDecoder":function(){define(["./Jpg","./Zlib"],function(K,G){var w=function(){var c=new ArrayBuffer(4),a=new Uint8Array(c);c=new Uint32Array(c);a[0]=1;a[1]=2;a[2]=3;a[3]=4;
return 67305985===c[0]},v=function(){var c=[];c[254]="NEWSUBFILETYPE";c[255]="SUBFILETYPE";c[256]="IMAGEWIDTH";c[257]="IMAGELENGTH";c[258]="BITSPERSAMPLE";c[259]="COMPRESSION";c[262]="PHOTOMETRICINTERPRETATION";c[263]="THRESHHOLDING";c[264]="CELLWIDTH";c[265]="CELLLENGTH";c[266]="FILLORDER";c[269]="DOCUMENTNAME";c[270]="IMAGEDESCRIPTION";c[271]="MAKE";c[272]="MODEL";c[273]="STRIPOFFSETS";c[274]="ORIENTATION";c[277]="SAMPLESPERPIXEL";c[278]="ROWSPERSTRIP";c[279]="STRIPBYTECOUNTS";c[280]="MINSAMPLEVALUE";
c[281]="MAXSAMPLEVALUE";c[282]="XRESOLUTION";c[283]="YRESOLUTION";c[284]="PLANARCONFIGURATION";c[285]="PAGENAME";c[286]="XPOSITION";c[287]="YPOSITION";c[288]="FREEOFFSETS";c[289]="FREEBYTECOUNTS";c[290]="GRAYRESPONSEUNIT";c[291]="GRAYRESPONSECURVE";c[292]="T4OPTIONS";c[293]="T6OPTIONS";c[296]="RESOLUTIONUNIT";c[297]="PAGENUMBER";c[300]="COLORRESPONSEUNIT";c[301]="TRANSFERFUNCTION";c[305]="SOFTWARE";c[306]="DATETIME";c[315]="ARTIST";c[316]="HOSTCOMPUTER";c[317]="PREDICTOR";c[318]="WHITEPOINT";c[319]=
"PRIMARYCHROMATICITIES";c[320]="COLORMAP";c[321]="HALFTONEHINTS";c[322]="TILEWIDTH";c[323]="TILELENGTH";c[324]="TILEOFFSETS";c[325]="TILEBYTECOUNTS";c[326]="BADFAXLINES";c[327]="CLEANFAXDATA";c[328]="CONSECUTIVEBADFAXLINES";c[330]="SUBIFD";c[332]="INKSET";c[333]="INKNAMES";c[334]="NUMBEROFINKS";c[336]="DOTRANGE";c[337]="TARGETPRINTER";c[338]="EXTRASAMPLES";c[339]="SAMPLEFORMAT";c[340]="SMINSAMPLEVALUE";c[341]="SMAXSAMPLEVALUE";c[342]="TRANSFERRANGE";c[347]="JPEGTABLES";c[512]="JPEGPROC";c[513]="JPEGIFOFFSET";
c[514]="JPEGIFBYTECOUNT";c[515]="JPEGRESTARTINTERVAL";c[517]="JPEGLOSSLESSPREDICTORS";c[518]="JPEGPOINTTRANSFORM";c[519]="JPEGQTABLES";c[520]="JPEGDCTABLES";c[521]="JPEGACTABLES";c[529]="YCBCRCOEFFICIENTS";c[530]="YCBCRSUBSAMPLING";c[531]="YCBCRPOSITIONING";c[532]="REFERENCEBLACKWHITE";c[33550]="GEOPIXELSCALE";c[33922]="GEOTIEPOINTS";c[33432]="COPYRIGHT";c[42112]="GDAL_METADATA";c[42113]="GDAL_NODATA";c[50844]="RPCCOEFFICIENT";c[34735]="GEOKEYDIRECTORY";c[34736]="GEODOUBLEPARAMS";c[34737]="GEOASCIIPARAMS";
return c}(),r=[0,1,1,2,4,8,1,1,2,4,8,4,8],f=function(c,a){var b="UNKNOWN";3===c?b="F32":1===c?8>=a?b="U8":16>=a?b="U16":32>=a&&(b="U32"):2===c&&(8>=a?b="S8":16>=a?b="S16":32>=a&&(b="S32"));return b};return{decode:function(c){var a=new DataView(c,0,8),b=a.getUint16(0,!1);if(18761===b)var p=!0;else if(19789===b)p=!1;else throw"unexpected endianess byte";if(42!==a.getUint16(2,p))throw"unexpected tiff identifier";var q=a.getUint32(4,p);var t=p;var m,n;var k=q;for(var l=[];k;){var h=(new DataView(c,k,
2)).getUint16(0,t);var e=k+2;k=(new DataView(c,e+12*h,4)).getUint32(0,t);var d={};for(m=0;m<h;m++){var g=new DataView(c,e,12);var u=g.getUint16(0,t);var x=g.getUint16(2,t);var y=g.getUint32(4,t);var B=g.getUint32(8,t);e+=12;if(!(7===x||12<x)){var C=n={fieldTag:u,fieldType:x,fieldValueCount:y,fieldValueOffset:B},z=void 0,D=void 0,E=c,A=t,F=[],H=n.fieldType,I=n.fieldValueCount,L=n.fieldValueOffset,J=L,O=r[H],P=8*O,fa=I*O,V=I*r[H]*8;if(32>=V)if(A||(L>>>=32-V),1===I)F=[L];else for(z=0;z<I;z++)F.push(L<<
P*z>>>32-P);else for(J=L;J<L+fa;J+=O){switch(H){case 1:D=(new DataView(E,J,1)).getUint8(0);break;case 2:D=(new DataView(E,J,1)).getUint8(0);break;case 3:D=(new DataView(E,J,2)).getUint16(0,A);break;case 4:D=(new DataView(E,J,4)).getUint32(0,A);break;case 5:D=(new DataView(E,J,4)).getUint32(0,A)/(new DataView(E,J+4,4)).getUint32(0,A);break;case 6:D=(new DataView(E,J,1)).getInt8(0);break;case 8:D=(new DataView(E,J,2)).getInt16(0,A);break;case 9:D=(new DataView(E,J,4)).getInt32(0,A);break;case 10:D=
(new DataView(E,J,4)).getInt32(0,A)/(new DataView(E,J+4,4)).getInt32(0,A);break;case 11:D=(new DataView(E,J,4)).getFloat32(0,A);break;case 12:D=(new DataView(E,J,8)).getFloat64(0,A);break;case 7:D=null;break;default:D=null}F.push(D)}if(2===H){var ba="",ka=F;F=[];for(z=0;z<ka.length;z++)0===ka[z]&&""!==ba?(F.push(ba),ba=""):ba+=String.fromCharCode(ka[z]);""===ba&&0!==F.length||F.push(ba)}C.fieldValues=F;var la=d,ma=v[u];void 0===ma&&(ma="unknown"+u);la[ma]={type:x,values:n.fieldValues}}}l.push(d)}if(0===
l.length)throw"no valid image file directory";var ha,Z=l[0],W=void 0===Z.GDAL_NODATA||null===Z.GDAL_NODATA?null:parseFloat(Z.GDAL_NODATA.values[0]);if(Z.TILEOFFSETS){var Q=w()===t,ia=Z.TILEOFFSETS?Z.TILEOFFSETS.values:void 0;if(void 0===ia)var R=void 0;else{var S=Z.TILEBYTECOUNTS.values,N=Z.TILEWIDTH.values[0],X=Z.TILELENGTH.values[0],aa=Z.IMAGEWIDTH.values[0],ea=Z.IMAGELENGTH.values[0],Y=aa*ea,T=Z.BITSPERSAMPLE.values[0],ca=Z.SAMPLESPERPIXEL.values[0],M=Z.SAMPLEFORMAT?Z.SAMPLEFORMAT.values[0]:1,
U=f(M,T);if(1!==(Z.PLANARCONFIGURATION?Z.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var da=Z.COMPRESSION?Z.COMPRESSION.values[0]:1;if(1!==da&&6!==da&&8!==da&&32946!==da)throw"this compression is not supported at this moment";if(3<M)R=void 0;else{if(3===M){var ja=new Float32Array(Y*ca);var na=Float32Array}else 1===M?8>=T?(ja=new Uint8Array(Y*ca),na=Uint8Array):16>=T?(ja=new Uint16Array(Y*ca),na=Uint16Array):32>=T&&(ja=new Uint32Array(Y*ca),na=Uint32Array):2===
M&&(8>=T?(ja=new Int8Array(Y*ca),na=Int8Array):16>=T?(ja=new Int16Array(Y*ca),na=Int16Array):32>=T&&(ja=new Int32Array(Y*ca),na=Int32Array));var oa,ra,ua,wa,Ba,Da=Math.ceil(aa/N);if(0===T%8)for(oa=0;oa<ia.length;oa++){var La=Math.floor(oa/Da)*X;var Ga=oa%Da*N;var xa=(La*aa+Ga)*ca;if("U8"===U||"S8"===U||Q)if(8===da||32946===da){var Ca=new Uint8Array(c,ia[oa],S[oa]);var ta=new G(Ca);var qa=ta.getBytes();var za=new ArrayBuffer(qa.length);Ca=new Uint8Array(za);Ca.set(qa)}else if(6===da){Ca=new Uint8Array(c,
ia[oa],S[oa]);var va=new K;va.parse(Ca);var pa=va.getData(va.width,va.height);za=new ArrayBuffer(pa.length);Ca=new Uint8Array(za);Ca.set(pa)}else 1===da&&(za=c.slice(ia[oa],ia[oa]+S[oa]));else{if(8===da||32946===da){Ca=new Uint8Array(c,ia[oa],S[oa]);ta=new G(Ca);Ca=ta.getBytes();za=new ArrayBuffer(Ca.length);var sa=new Uint8Array(za)}else 1===da&&(za=new ArrayBuffer(S[oa]),Ca=new Uint8Array(c,ia[oa],S[oa]),sa=new Uint8Array(za));switch(U){case "U16":case "S16":for(ua=0;ua<Ca.length;ua+=2)sa[ua]=Ca[ua+
1],sa[ua+1]=Ca[ua];break;case "U32":case "S32":case "F32":for(ua=0;ua<Ca.length;ua+=4)sa[ua]=Ca[ua+3],sa[ua+1]=Ca[ua+2],sa[ua+2]=Ca[ua+1],sa[ua+3]=Ca[ua]}}var ya=new na(za);var Ha=0;var Ea=xa;var Aa=Math.min(N,aa-Ga);var Fa=Math.min(X,ea-La);for(wa=0;wa<Fa;wa++)for(Ea=xa+wa*aa*ca,Ha=wa*N*ca,Ba=0;Ba<Aa*ca;Ba++,Ea++,Ha++)ja[Ea]=ya[Ha]}var Ka={width:aa,height:ea,pixelType:U};if(1===ca)Ka.pixels=[ja];else for(Ka.pixels=[],oa=0;oa<ca;oa++){var Ia=new na(Y);for(ra=0;ra<Y;ra++)Ia[ra]=ja[ra*ca+oa];Ka.pixels.push(Ia)}R=
Ka}}}else if(Z.STRIPOFFSETS){var Oa=w()===t,Ja=Z.STRIPOFFSETS?Z.STRIPOFFSETS.values:void 0;if(void 0===Ja)R=void 0;else{var Ma=Z.STRIPBYTECOUNTS.values,Na=Z.ROWSPERSTRIP.values,Pa=Z.IMAGEWIDTH.values[0],Qa=Z.IMAGELENGTH.values[0],Ra=Pa*Qa,Sa=Z.BITSPERSAMPLE.values[0],Ta=Z.SAMPLESPERPIXEL.values[0],Xa=Z.SAMPLEFORMAT?Z.SAMPLEFORMAT.values[0]:1,Ua=f(Xa,Sa);if(1!==(Z.PLANARCONFIGURATION?Z.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var Va=Z.COMPRESSION?Z.COMPRESSION.values[0]:
1;if(1!==Va&&6!==Va&&8!==Va&&32946!==Va)throw"compressed tiff is not supported at this moment";if(3<Xa)R=void 0;else{if(3===Xa){var ab=new Float32Array(Ra*Ta);var Ya=Float32Array}else 1===Xa?8>=Sa?(ab=new Uint8Array(Ra*Ta),Ya=Uint8Array):16>=Sa?(ab=new Uint16Array(Ra*Ta),Ya=Uint16Array):32>=Sa&&(ab=new Uint32Array(Ra*Ta),Ya=Uint32Array):2===Xa&&(8>=Sa?(ab=new Int8Array(Ra*Ta),Ya=Int8Array):16>=Sa?(ab=new Int16Array(Ra*Ta),Ya=Int16Array):32>=Sa&&(ab=new Int32Array(Pa*Qa*Ta),Ya=Int32Array));var $a,
cb,Za;if(0===Sa%8)for($a=0;$a<Ja.length;$a++){var bb=$a*Na*Pa*Ta;if("U8"===Ua||"S8"===Ua||Oa)if(8===Va||32946===Va){var Wa=new Uint8Array(c,Ja[$a],Ma[$a]);var db=new G(Wa);var fb=db.getBytes();var eb=new ArrayBuffer(fb.length);Wa=new Uint8Array(eb);Wa.set(fb)}else if(6===Va){Wa=new Uint8Array(c,Ja[$a],Ma[$a]);var gb=new K;gb.parse(Wa);var ib=gb.getData(gb.width,gb.height);eb=new ArrayBuffer(ib.length);Wa=new Uint8Array(eb);Wa.set(ib)}else 1===Va&&(eb=c.slice(Ja[$a],Ja[$a]+Ma[$a]));else{if(6===Va||
8===Va||32946===Va){Wa=new Uint8Array(c,Ja[$a],Ma[$a]);db=new G(Wa);Wa=db.getBytes();eb=new ArrayBuffer(Wa.length);var hb=new Uint8Array(eb)}else 1===Va&&(eb=new ArrayBuffer(Ma[$a]),Wa=new Uint8Array(c,Ja[$a],Ma[$a]),hb=new Uint8Array(eb));switch(Ua){case "U16":case "S16":for(Za=0;Za<Wa.length;Za+=2)hb[Za]=Wa[Za+1],hb[Za+1]=Wa[Za];break;case "U32":case "S32":case "F32":for(Za=0;Za<Wa.length;Za+=4)hb[Za]=Wa[Za+3],hb[Za+1]=Wa[Za+2],hb[Za+2]=Wa[Za+1],hb[Za+3]=Wa[Za]}}var kb=new Ya(eb);ab.set(kb,bb)}var jb=
{width:Pa,height:Qa,pixelType:Ua};if(1===Ta)jb.pixels=[ab];else for(jb.pixels=[],$a=0;$a<Ta;$a++){var lb=new Ya(Ra);for(cb=0;cb<Ra;cb++)lb[cb]=ab[cb*Ta+$a];jb.pixels.push(lb)}R=jb}}}if(null!==W){R.maskData=new Uint8Array(R.width*R.height);if(1E24<Math.abs(W))for(ha=0;ha<R.width*R.height;ha++)R.maskData[ha]=1E-6>Math.abs((R.pixels[0][ha]-W)/W)?0:1;else for(ha=0;ha<R.width*R.height;ha++)R.maskData[ha]=R.pixels[0][ha]===W?0:1;R.noDataValue=W}return R}}})},"esri/layers/rasterLib/tile/RasterHandler":function(){define("require exports module dojo/Deferred dojo/promise/all ../../PixelBlock ../../vectorTiles/core/workers ../../vectorTiles/core/promiseUtils ../../vectorTiles/core/requireUtils ../../vectorTiles/request ../../rasterLib/function/rasterFunctionHelper ../../rasterLib/renderer/rasterRendererHelper".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){function m(n){var k=new v;r(n).then(function(l){k.resolve()});return k.promise}return function(){function n(k){this.customModules=k&&k.customModules}n.prototype.destroy=function(){this.stop();this.customModules=this.rasterLayer=null};n.prototype.start=function(){this.stop();var k=new v,l=0,h=this.customModules?this.customModules.length+1:1,e=b.getAbsMid("esri/layers/rasterLib/tile/RasterWorker",K,w),d=c.open(e,{client:this}).then(function(g){this._connection=g;l++;
l===h&&(this._connected=!0,k.resolve())}.bind(this));this._openDL=[d];this.customModules&&this.customModules.forEach(function(g){d=c.open(g,{client:this}).then(function(u){l++;l===h&&(this._connected=!0,k.resolve())});this._openDL.push(d)}.bind(this));return this._connectionPromise=k.promise};n.prototype.stop=function(){this._openDL?this._openDL.forEach(function(k){k.isFulfilled()||k.cancel()}.bind(this)):this._connectionPromise&&!this._connectionPromise.isFulfilled()&&this._connectionPromise.cancel();
this._connection&&(this._connection.close(),this._connection=null)};n.prototype.decode=function(k){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var l={id:null};return this._connection.invoke("decode",k,[],l).then(function(h){h.targetWorker=l;return h})};n.prototype.process=function(k){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var l={id:null};k.layerId=this.rasterLayer.layerId;var h=new v;
this._connection.invoke("process",k,[],l).then(function(e){e.targetWorker=l;e.src?Object.keys(e.src).forEach(function(d){e.src[d].pixelBlock=new f(e.src[d].pixelBlock)}):e.src=null;e.pixelBlock&&(e.pixelBlock=new f(e.pixelBlock));h.resolve(e)});return h.promise};n.prototype.render=function(k){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var l={id:null};k.layerId=this.rasterLayer.layerId;return this._connection.invoke("render",k,[],l).then(function(h){h.targetWorker=
l;h.pixelBlock=h.pixelBlock?new f(h.pixelBlock):null;return h})};n.prototype.setLayer=function(k){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));this.rasterLayer=k;k=this._connection.broadcast("setLayer",k,[],{id:null});return m(k)};n.prototype.setRasterFunction=function(k){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));k=this._connection.broadcast("setRasterFunction",k,[],{id:null});return m(k)};
n.prototype.setRasterRenderer=function(k){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));k=this._connection.broadcast("setRasterRenderer",k,[],{id:null});return m(k)};return n}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});for(var v in w)G.hasOwnProperty(v)||(G[v]=w[v])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(K,G,w,v,r,f,c,a,b){function p(){if(l)return l;for(var h=q+t,e=[],d=function(u){var x=b.create(u).then(function(y){return k[u]=y});e.push(x)},g=0;g<h;g++)d(g);return l=v(e).then(function(){})}Object.defineProperty(G,"__esModule",{value:!0});G.Connection=c;G.RemoteClient=a;(c=navigator.hardwareConcurrency)||(c=w("safari")&&w("mac")||w("trident")?8:2);var q=w("esri-workers-debug")?1:Math.max(1,Math.ceil(c/2)),t=w("esri-workers-debug")?1:Math.max(1,Math.floor(c/2)),m=r.getLogger("esri.core.workers"),
n=0,k=[];G.initialize=function(){p()};G.open=function(h,e,d){void 0===e&&(e={});if(Array.isArray(h))return new G.Connection(h.map(function(x){return new G.RemoteClient(x,e.client)}));if("string"!==typeof h){m.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var g=h;h=e;e={client:g,strategy:d?"dedicated":"distributed"}}var u=e.strategy||"distributed";return"local"===u?f.create(function(x){K([h],function(y){x(G.RemoteClient.connect(y))})}).then(function(x){return new G.Connection([new G.RemoteClient(x,
e.client)])}):p().then(function(){if("dedicated"===u){var x=q+n++;n%=t;return k[x].open(h).then(function(y){return new G.Connection([new G.RemoteClient(y,e.client)])})}return f.all(k.map(function(y){return y.open(h)})).then(function(y){return new G.Connection(y.map(function(B){return new G.RemoteClient(B,e.client)}))})})};G.terminate=function(){for(var h=0;h<k.length;h++)k[h]&&k[h].terminate();k.length=0};var l})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],
function(K,G,w){var v={info:0,warn:1,error:2};K=function(){function r(f){void 0===f&&(f={});this.module=f.module||"";this.writer=f.writer||null;this.level=f.level||null;null!=f.enabled&&(this.enabled=!!f.enabled);r._loggers[this.module]=this;f=this.module.lastIndexOf(".");-1!==f&&(this.parent=r.getLogger(this.module.slice(0,f)))}r.prototype.log=function(f){for(var c=[],a=1;a<arguments.length;a++)c[a-1]=arguments[a];this._isEnabled()&&this._matchLevel(f)&&(a=this._inheritedWriter())&&a.apply(void 0,
[f,this.module].concat(c))};r.prototype.error=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];this.log.apply(this,["error"].concat(f))};r.prototype.warn=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];this.log.apply(this,["warn"].concat(f))};r.prototype.info=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];this.log.apply(this,["info"].concat(f))};r.prototype.getLogger=function(f){return r.getLogger(this.module+"."+f)};r.getLogger=function(f){var c=
r._loggers[f];c||(c=new r({module:f}));return c};r.prototype._parentWithMember=function(f,c){for(var a=this;a&&null==a[f];)a=a.parent;return a?a[f]:c};r.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};r.prototype._consoleWriter=function(f,c){for(var a=[],b=2;b<arguments.length;b++)a[b-2]=arguments[b];console[f].apply(console,["["+c+"]"].concat(a))};r.prototype._matchLevel=function(f){return v[this._parentWithMember("level","error")]<=v[f]};r.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};r._loggers={};return r}();K.getLogger("esri").level="warn";return K})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(K,G,w,v,r,f){function c(a){if(a){if("function"!==typeof a.forEach){var b=Object.keys(a),p=b.map(function(n){return a[n]});return c(p).then(function(n){var k={};b.forEach(function(l,h){return k[l]=n[h]});return k})}var q=new w,
t=[],m=a.length;0===m&&q.resolve(t);a.forEach(function(n){var k={promise:n};t.push(k);n.then(function(l){k.value=l})["catch"](function(l){k.error=l}).then(function(){--m;0===m&&q.resolve(t)})});return q.promise}}Object.defineProperty(G,"__esModule",{value:!0});G.all=function(a){return r(a)};G.filter=function(a,b){var p=a.slice();return r(a.map(function(q,t){return b(q,t)})).then(function(q){return p.filter(function(t,m){return q[m]})})};G.eachAlways=c;G.create=function(a,b){var p=new w(b);a(function(q){void 0===
q&&(q=null);return v(q).then(p.resolve)},p.reject);return p.promise};G.reject=function(a){var b=new w;b.reject(a);return b.promise};G.resolve=function(a){void 0===a&&(a=null);var b=new w;b.resolve(a);return b.promise};G.after=function(a,b){void 0===b&&(b=null);var p=0,q=new w(function(){p&&(clearTimeout(p),p=0)});p=setTimeout(function(){q.resolve(b)},a);return q.promise};G.timeout=function(a,b,p){var q=0,t=new w(a.cancel);a.then(function(m){t.isFulfilled()||(t.resolve(m),q&&(clearTimeout(q),q=0))});
a["catch"](function(m){t.isFulfilled()||(t.reject(m),q&&(clearTimeout(q),q=0))});q=setTimeout(function(){var m=p||new f("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");t.reject(m)},b);return t.promise};G.wrapCallback=function(a){var b=!1,p=new w(function(){return b=!0});a(function(q){b||p.resolve(q)});return p.promise};G.isThenable=function(a){return a&&"function"===typeof a.then};G.when=function(a){return v(a)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require",
"exports","./tsSupport/extendsHelper","./lang","./Message"],function(K,G,w,v,r){K=function(f){function c(a,b,p){var q=f.call(this,a,b,p)||this;return q instanceof c?q:new c(a,b,p)}w(c,f);c.prototype.toJSON=function(){return{name:this.name,message:this.message,details:v.clone(this.details),dojoType:this.dojoType}};c.fromJSON=function(a){var b=new c(a.name,a.message,a.details);null!=a.dojoType&&(b.dojoType=a.dojoType);return b};return c}(r);K.prototype.type="error";return K})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],
function(){return function(){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,w){G.__proto__=w}||function(G,w){for(var v in w)w.hasOwnProperty(v)&&(G[v]=w[v])};return function(G,w){function v(){this.constructor=G}K(G,w);G.prototype=null===w?Object.create(w):(v.prototype=w.prototype,new v)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(K,G,w,v,
r,f){function c(n){return void 0!==n&&null!==n}function a(n){return c(n)?n:""}function b(n,k,l){var h=l.match(/([^\(]+)(\([^\)]+\))?/i),e=G.trim(h[1]);l=k[n];h=JSON.parse((h[2]?G.trim(h[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var d=h.utcOffset;if(-1===t.indexOf(e))e=G.getObject(e),G.isFunction(e)&&(l=e(l,n,k,h));else if("number"===typeof l||"string"===typeof l&&l&&!isNaN(Number(l)))switch(l=
Number(l),e){case "NumberFormat":n=G.mixin({},h);k=parseFloat(n.places);if(isNaN(k)||0>k)n.places=Infinity;return v.format(l,n);case "DateString":l=new Date(l);if(h.local||h.systemLocale)return h.systemLocale?l.toLocaleDateString()+(h.hideTime?"":" "+l.toLocaleTimeString()):l.toDateString()+(h.hideTime?"":" "+l.toTimeString());l=l.toUTCString();h.hideTime&&(l=l.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return l;case "DateFormat":return l=new Date(l),c(d)&&(l=w.add(l,"minute",l.getTimezoneOffset()-
d)),r.format(l,h)}return a(l)}function p(n,k){var l;if(k)for(l in n)n.hasOwnProperty(l)&&(void 0===n[l]?delete n[l]:n[l]instanceof Object&&p(n[l],!0));else for(l in n)n.hasOwnProperty(l)&&void 0===n[l]&&delete n[l];return n}function q(n){if(!n||"object"!=typeof n||G.isFunction(n))return n;if(n instanceof Int8Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Int32Array||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof Float32Array||
n instanceof Float64Array||n instanceof Date)return new n.constructor(n);if(n instanceof ArrayBuffer)return n.slice(0,n.byteLength);if("function"===typeof n.clone)n=n.clone();else if("function"===typeof n.map&&"function"===typeof n.forEach)n=n.map(q);else if("function"===typeof n.notifyChange&&"function"===typeof n.watch)n=n.clone();else{var k={},l,h={};for(l in n){var e=n[l];var d=!(l in h)||h[l]!==e;if(!(l in k)||k[l]!==e&&d)k[l]=q?q(e):e}n=k}return n}var t=["NumberFormat","DateString","DateFormat"],
m=/<\/?[^>]+>/g;return{equals:function(n,k){return n===k||"number"===typeof n&&isNaN(n)&&"number"===typeof k&&isNaN(k)||G.isFunction((n||{}).getTime)&&G.isFunction((k||{}).getTime)&&n.getTime()==k.getTime()||G.isFunction((n||{}).equals)&&n.equals(k)||G.isFunction((k||{}).equals)&&k.equals(n)||!1},mixin:G.mixin,valueOf:function(n,k){for(var l in n)if(n[l]==k)return l;return null},stripTags:function(n){if(n){var k=typeof n;if("string"===k)n=n.replace(m,"");else if("object"===k)for(var l in n)(k=n[l])&&
"string"===typeof k&&(k=k.replace(m,"")),n[l]=k}return n},substitute:function(n,k,l){if(c(l))if(G.isObject(l)){var h=l.first;var e=l.dateFormat;var d=l.numberFormat}else h=l;if(k&&"{*}"!==k)return G.replace(k,G.hitch({obj:n},function(u,x){var y=x.split(":");return 1<y.length?(x=y[0],y.shift(),b(x,this.obj,y.join(":"))):e&&-1!==(e.properties||[]).indexOf(x)?b(x,this.obj,e.formatter||"DateString"):d&&-1!==(d.properties||[]).indexOf(x)?b(x,this.obj,d.formatter||"NumberFormat"):a(this.obj[x])}));k=[];
var g;k.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+f.fieldsSummary+'"\x3e\x3ctbody\x3e');for(g in n)if(l=n[g],e&&-1!==(e.properties||[]).indexOf(g)?l=b(g,n,e.formatter||"DateString"):d&&-1!==(d.properties||[]).indexOf(g)&&(l=b(g,n,d.formatter||"NumberFormat")),k.push("\x3ctr\x3e\x3cth\x3e"+g+"\x3c/th\x3e\x3ctd\x3e"+a(l)+"\x3c/td\x3e\x3c/tr\x3e"),h)break;k.push("\x3c/tbody\x3e\x3c/table\x3e");return k.join("")},filter:function(n,k,l){k=[G.isString(n)?n.split(""):n,l||K.global,G.isString(k)?
new Function("item","index","array",k):k];l={};var h;n=k[0];for(h in n)k[2].call(k[h],n[h],h,n)&&(l[h]=n[h]);return l},startsWith:function(n,k,l){l=l||0;return n.indexOf(k,l)===l},endsWith:function(n,k,l){if("number"!==typeof l||!isFinite(l)||Math.floor(l)!==l||l>n.length)l=n.length;l-=k.length;n=n.indexOf(k,l);return-1!==n&&n===l},isDefined:c,fixJson:p,clone:q}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(K,G,w){return function(){function v(r,
f,c){this instanceof v&&(this.name=r,this.message=f&&w.substitute(f,c,function(a){return null==a?"":a})||"",this.details=c)}v.prototype.toString=function(){return"["+this.name+"]: "+this.message};return v}()})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(K,G,w){return function(){function v(r){this._clientIdx=0;this._clients=r}v.prototype.broadcast=function(r,f,c){for(var a=[],b=0,p=this._clients;b<p.length;b++)a.push(p[b].invoke(r,
f,c));return a};v.prototype.close=function(){for(var r=0,f=this._clients;r<f.length;r++)f[r].close();this._clients=[]};v.prototype.invoke=function(r,f,c,a){var b=a&&a.client;if(!this._clients||!this._clients.length)return w.reject(Error("Connection closed"));null!=b&&-1!==this._clients.indexOf(b)||this._clients.some(function(p){return p.isBusy()?!1:(b=p,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,b=this._clients[this._clientIdx]);r=b.invoke(r,f,c);a&&(a.client=b);return r};v.prototype.openPorts=
function(){return w.all(this._clients.map(function(r){return r.openPort()}))};return v}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(K,G,w,v,r,f){function c(n,k){n["delete"](k)}var a=f.MessageType.CLOSE,b=f.MessageType.CANCEL,p=f.MessageType.INVOKE,q=f.MessageType.RESPONSE,t=f.MessageType.OPEN_PORT,m=function(){function n(k){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=
[];this._invoke=k;this._timer=null;this._process=this._process.bind(this)}n.prototype.push=function(k){k.type===f.MessageType.CANCEL?this._cancelledJobIds.add(k.jobId):(this._invokeMessages.push(k),null===this._timer&&(this._timer=setTimeout(this._process,0)))};n.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};n.prototype._process=function(){this._timer=null;for(var k=0,l=this._invokeMessages;k<l.length;k++){var h=l[k];this._cancelledJobIds.has(h.jobId)||
this._invoke(h)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return n}();return function(){function n(k,l,h){this._outJobs=new Map;this._inJobs=new Map;this._queue=new m(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=l;this._port=k;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=h}n.connect=function(k){var l=new MessageChannel;k="function"===typeof k?new k:"default"in k&&"function"===typeof k["default"]?new k["default"]:
k;k.remoteClient=new n(l.port1,k,l);return l.port2};n.prototype.close=function(){this._post({type:a});this._close()};n.prototype.isBusy=function(){return 0<this._outJobs.size};n.prototype.invoke=function(k,l,h){var e=this;if(!this._port)return r.reject(new v("remote-client:port-closed","Can't invoke(), port is closed"));var d=f.newJobId(),g=new w(function(){c(e._outJobs,d);e._post({type:b,jobId:d})});this._outJobs.set(d,g);this._post({type:p,jobId:d,methodName:k},l,h);return g.promise};n.prototype.openPort=
function(){var k=this,l=f.newJobId(),h=new w(function(){c(k._outJobs,l);k._post({type:b,jobId:l})});this._outJobs.set(l,h);this._post({type:t,jobId:l});return h.promise};n.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(k){k.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};n.prototype._onMessage=function(k){if(k=f.receiveMessage(k))switch(k.type){case q:this._onResponse(k);
break;case p:this._queue.push(k);break;case b:this._onCancel(k);break;case a:this._close();break;case t:this._onOpenPort(k)}};n.prototype._onCancel=function(k){var l=this._inJobs,h=k.jobId,e=l.get(h);this._queue.push(k);e&&(c(l,h),e.cancel())};n.prototype._onInvoke=function(k){var l=this,h=k.methodName,e=k.jobId;k=k.data;var d=this._inJobs,g=this._client,u=g[h];try{if(!u&&h&&-1!==h.indexOf("."))for(var x=h.split("."),y=0;y<x.length-1;y++)g=g[x[y]],u=g[x[y+1]];if("function"!==typeof u)throw new TypeError(h+
" is not a function");var B=u.call(g,k,this)}catch(C){this._post({type:q,jobId:e,error:f.toInvokeError(C)});return}r.isThenable(B)?(d.set(e,B),B.then(function(C){d.has(e)&&(c(d,e),l._post({type:q,jobId:e},C))})["catch"](function(C){d.has(e)&&(c(d,e),C&&"cancel"===C.dojoType||l._post({type:q,jobId:e,error:f.toInvokeError(C||{message:"Error encountered at method "+h})}))})):this._post({type:q,jobId:e},B)};n.prototype._onOpenPort=function(k){var l=new MessageChannel;new n(l.port1,this._client);this._post({type:q,
jobId:k.jobId},l.port2,[l.port2])};n.prototype._onResponse=function(k){var l=k.jobId,h=k.error;k=k.data;var e=this._outJobs;if(e.has(l)){var d=e.get(l);c(e,l);h?d.reject(v.fromJSON(JSON.parse(h))):d.resolve(k)}};n.prototype._post=function(k,l,h){return f.postMessage(this._port,k,l,h)};return n}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(K,G,w){function v(f){return f&&"object"===typeof f&&("result"in f||"transferList"in f)}Object.defineProperty(G,
"__esModule",{value:!0});(function(f){f[f.HANDSHAKE=0]="HANDSHAKE";f[f.CONFIGURE=1]="CONFIGURE";f[f.CONFIGURED=2]="CONFIGURED";f[f.OPEN=3]="OPEN";f[f.OPENED=4]="OPENED";f[f.RESPONSE=5]="RESPONSE";f[f.INVOKE=6]="INVOKE";f[f.CANCEL=7]="CANCEL";f[f.CLOSE=8]="CLOSE";f[f.OPEN_PORT=9]="OPEN_PORT"})(G.MessageType||(G.MessageType={}));var r=0;G.newJobId=function(){return r++};G.isTranferableResult=v;G.toInvokeError=function(f){return f?f.toJSON?JSON.stringify(f):JSON.stringify({name:f.name,message:f.message,
details:f.details,stack:f.stack}):null};G.postMessage=function(f,c,a,b){2===arguments.length||void 0===a&&void 0===b?f.postMessage(c):(w("esri-workers-supports-transfer-arraybuffer")||(b?(b=b.filter(function(p){return!(p instanceof ArrayBuffer)}),b.length||(b=null)):v(a)&&a.transferList&&(a.transferList=a.transferList.filter(function(p){return!(p instanceof ArrayBuffer)}),a.transferList.length||(a.transferList=null))),b?(c.data=a,f.postMessage(c,b)):v(a)?(c.data=a.result,a.transferList?f.postMessage(c,
a.transferList):f.postMessage(c)):(c.data=a,f.postMessage(c)))};G.receiveMessage=function(f){return f?(f=f.data)?"string"===typeof f?JSON.parse(f):f:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(K,G,w,v,r,f,c,a,b){var p=f.getLogger("esri.core.workers"),q=a.MessageType.CANCEL,t=a.MessageType.INVOKE,m=a.MessageType.OPEN,n=a.MessageType.OPENED,
k=a.MessageType.RESPONSE;return function(){function l(h,e){this._outJobs=new Map;this._inJobs=new Map;this.worker=h;this.id=e;h.addEventListener("message",this._onMessage.bind(this));h.addEventListener("error",function(d){d.preventDefault();p.error(d)})}l.create=function(h){return b.createWorker().then(function(e){return new l(e,h)})};l.prototype.terminate=function(){this.worker.terminate()};l.prototype.open=function(h){var e=this,d=a.newJobId(),g=new w(function(u){e._outJobs["delete"](d);e._post({type:q,
jobId:d})});this._outJobs.set(d,g);this._post({type:m,jobId:d,modulePath:h});return g.promise};l.prototype._onMessage=function(h){if(h=a.receiveMessage(h))switch(h.type){case n:case k:this._onResponse(h);break;case q:this._onCancel(h);break;case t:this._onInvoke(h)}};l.prototype._onCancel=function(h){(h=this._inJobs.get(h.jobId))&&h.cancel()};l.prototype._onInvoke=function(h){var e=this,d=h.methodName,g=h.jobId;h=h.data;var u=this._inJobs,x=v.workerMessages[d];try{if("function"!==typeof x)throw new TypeError(d+
" is not a function");var y=x.call(null,h)}catch(B){this._post({type:k,jobId:g,error:a.toInvokeError(B)});return}c.isThenable(y)?(u.set(g,y),y.then(function(B){u["delete"](g);e._post({type:k,jobId:g},B)})["catch"](function(B){u["delete"](g);B||(B={message:"Error encountered at method"+d});B.dojoType&&"cancel"===B.dojoType||e._post({type:k,jobId:g,error:a.toInvokeError(B)})})):this._post({type:k,jobId:g},y)};l.prototype._onResponse=function(h){var e=h.jobId,d=h.error;h=h.data;var g=this._outJobs.get(e);
g&&(this._outJobs["delete"](e),d?g.reject(r.fromJSON(JSON.parse(d))):g.resolve(h))};l.prototype._post=function(h,e,d){return a.postMessage(this.worker,h,e,d)};return l}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(K,G,w,v){return function(){function r(){}Object.defineProperty(r,"id",{get:function(){return w.id?v:null},enumerable:!0,configurable:!0});r.workerMessages={};return r}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require",
"exports","esri/IdentityManager"],function(K,G,w){Object.defineProperty(G,"__esModule",{value:!0});G.findCredential=function(v){return w.findCredential(v)}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m){function n(x){return a.create(function(y){function B(z){if(z=
t.receiveMessage(z))switch(z.type){case u:z=x;var D=r.workers.loaderUrl||q.DEFAULT_LOADER_URL;if(null!=r["default"]){var E=w({},r);delete E["default"];E=JSON.parse(JSON.stringify(E))}else E=JSON.parse(JSON.stringify(r));var A=r.workers.loaderConfig;A=q["default"]({baseUrl:A.baseUrl,locale:v.locale,has:w({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":b("esri-secure-context"),"esri-workers-supports-transfer-arraybuffer":b("esri-workers-supports-transfer-arraybuffer"),
"events-keypress-typed":0,"host-webworker":1},A.has),map:w({},A.map),paths:w({},A.paths),packages:A.packages||[]});z.postMessage({type:g,configure:{esriConfig:E,loaderUrl:D,loaderConfig:A}});break;case d:x.removeEventListener("message",B),x.removeEventListener("error",C),y(x)}}function C(z){z.preventDefault();x.removeEventListener("message",B);x.removeEventListener("error",C);h.warn("Failed to create Worker. Fallback to execute module in main thread",z);x=new m;x.addEventListener("message",B);x.addEventListener("error",
C)}x.addEventListener("message",B);x.addEventListener("error",C)})}Object.defineProperty(G,"__esModule",{value:!0});var k=p.normalize(K.toUrl("./worker.js")),l=!p.hasSameOrigin(k,location.href),h=c.getLogger("esri.core.workers"),e=null,d=t.MessageType.CONFIGURED,g=t.MessageType.CONFIGURE,u=t.MessageType.HANDSHAKE;G.createWorker=function(){if(!b("esri-workers"))return n(new m);if(!l){var x=void 0;try{x=new Worker(k)}catch(y){h.warn("Failed to create Worker. Fallback to execute module in main thread",
event),x=new m}return n(x)}e||(e=f(k,{responseType:"text"}));return e.then(function(y){return new Worker(URL.createObjectURL(new Blob([y.data],{type:"text/javascript"})))})["catch"](function(y){h.warn("Failed to create Worker. Fallback to execute module in main thread",y);return new m}).then(function(y){return n(y)})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(K){for(var G,w=1,v=arguments.length;w<v;w++){G=arguments[w];for(var r in G)Object.prototype.hasOwnProperty.call(G,
r)&&(K[r]=G[r])}return K}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(K,G,w){Object.defineProperty(w,"workers",{get:function(){return w.defaults.workers},set:function(v){return w.defaults.workers=v}});return w})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(K,G,w,v,r){return function(f,c){var a=v.mixin({},{url:f,failOk:!0},c);"array-buffer"===c.responseType?
(a.handleAs="arraybuffer",delete a.responseType):c.responseType&&(a.handleAs=c.responseType,delete a.responseType);null!==c.query&&(a.content=a.query,delete a.query);if(c.hasOwnProperty("allowImageDataAccess")){var b={allowImageDataAccess:c.allowImageDataAccess};delete a.allowImageDataAccess}var p=new r(function(){q.isFulfilled()||q.cancel()});var q=w(a,b).then(function(t){p.resolve({data:t})})["catch"](function(t){t&&null!=t.httpCode&&(t.details=t.details||{},t.details.httpStatus=t.httpCode);p.reject(t)});
return p.promise}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(K,G,w,v,r){function f(){var p={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},q=document.createElement("canvas");if(!q)return p;var t=r.createContext(q,{failIfMajorPerformanceCaveat:!0},"webgl");!t&&(t=r.createContext(q,
{},"webgl"))&&(p.majorPerformanceCaveat=!0);if(!t)return p;q=t.getParameter(t.VERSION);if(!q)return p;if(q=q.match(/^WebGL\s+([\d.]*)/))p.version=parseFloat(q[1]),p.available=.94<=p.version,q=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),p.supportsHighPrecisionFragment=q&&0<q.precision,p.supportsVertexShaderSamplers=0<t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p.supportsElementIndexUint=null!==t.getExtension("OES_element_index_uint"),p.supportsStandardDerivatives=null!==t.getExtension("OES_standard_derivatives");
return p}function c(){var p={available:!1,version:0},q=document.createElement("canvas");if(!q)return p;q=r.createContext(q,{},"webgl2");if(!q)return p;p.available=!0;q=q.getParameter(q.VERSION);if(!q)return p;if(q=q.match(/^WebGL\s+([\d.]*)/))p.version=parseFloat(q[1]);return p}(function(){var p=navigator.userAgent,q=p.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);p=p.match(/iPhone/i);q&&w.add("esri-mobile",q);p&&w.add("esri-iPhone",p);w.add("esri-phonegap",!!v.cordova);
w.add("esri-cors",w("esri-phonegap")||"XMLHttpRequest"in v&&"withCredentials"in new XMLHttpRequest);w.add("esri-geolocation",function(){return!!navigator.geolocation});w.add("esri-canvas-svg-support",function(){return!(w("trident")||w("ie"))});w.add("esri-secure-context",function(){if("isSecureContext"in v)return v.isSecureContext;if(v.location&&v.location.origin)return 0===v.location.origin.indexOf("https:")});w.add("esri-wasm","WebAssembly"in v);w("host-webworker")||(w.add("esri-workers","Worker"in
v),w.add("esri-script-sandbox",function(){return"MessageChannel"in v&&"HTMLIFrameElement"in v&&"sandbox"in HTMLIFrameElement.prototype}),w.add("esri-url-encodes-apostrophe",function(){var t=v.document.createElement("a");t.href="?'";return-1<t.href.indexOf("?%27")}),a||(a=f()),w.add("esri-webgl",a.available),w.add("esri-webgl-high-precision-fragment",a.supportsHighPrecisionFragment),w.add("esri-webgl-vertex-shader-samplers",a.supportsVertexShaderSamplers),w.add("esri-webgl-element-index-uint",a.supportsElementIndexUint),
w.add("esri-webgl-standard-derivatives",a.supportsStandardDerivatives),w.add("esri-webgl-major-performance-caveat",a.majorPerformanceCaveat),w.add("esri-featurelayer-webgl-labeling",!0),b||(b=c()),w.add("esri-webgl2",b.available))})();var a=null,b=null;return w})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(K,G){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},
"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(K,G){function w(c,a,b){void 0===a&&(a={});switch(b){case "webgl":var p=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":p=["webgl2"];break;default:p=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}b=null;for(var q=0;q<p.length;q++){var t=p[q];try{b=c.getContext(t,a)}catch(m){}if(b)break}return b}function v(c,a){var b=c.parentNode;b&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(G,"__esModule",{value:!0});G.createContextOrErrorHTML=function(c,a,b){void 0===a&&(a={});if(!window.WebGLRenderingContext)return v(c,r),null;a=w(c,a,b);return a?a:(v(c,f),null)};G.createContext=w;var r='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',f='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(K,G,w,v){function r(g){return w.normalize(g)}function f(g){return"data:"===g.slice(0,5)}function c(g){return a(g)||e.test(g)}function a(g){return g&&"/"===g[0]&&"/"===g[1]}function b(g){return w.urlToObject(g)}function p(g){if("string"===typeof g)return new v(t(g));g.scheme||(g.scheme=G.appUrl.scheme);return g}function q(g){if(f(g))return null;var u=g.indexOf("://");if(-1===u&&
a(g))u=2;else if(-1!==u)u+=3;else return null;u=g.indexOf("/",u);return-1===u?g:g.slice(0,u)}function t(g,u,x){void 0===u&&(u=G.appBaseUrl);if(a(g))return x&&x.preserveProtocolRelative?g:"http"===G.appUrl.scheme&&G.appUrl.authority===q(g).slice(2)?"http:"+g:"https:"+g;if(e.test(g))return g;"/"===g[0]&&(x=u.indexOf("//"),x=u.indexOf("/",x+2),u=-1===x?u:u.slice(0,x));return n(u,g)}function m(g,u,x){void 0===x&&(x=!1);g=p(g);u=p(u);return x||g.scheme===u.scheme?g.host.toLowerCase()===u.host.toLowerCase()&&
g.port===u.port:!1}function n(){for(var g=[],u=0;u<arguments.length;u++)g[u]=arguments[u];if(g&&g.length){u=[];if(c(g[0])){var x=g[0],y=x.indexOf("//");u.push(x.slice(0,y+1));h.test(g[0])&&(u[0]+="/");g[0]=x.slice(y+2)}else"/"===g[0][0]&&u.push("");g=g.reduce(function(B,C){return C?B.concat(C.split("/")):B},[]);for(x=0;x<g.length;x++)y=g[x],".."===y&&0<u.length?u.pop():!y||"."===y&&0!==u.length||u.push(y);return u.join("/")}}function k(g,u,x){if(!(u&&x&&g&&c(g)))return g;var y=g.indexOf("//"),B=g.indexOf("/",
y+2),C=g.indexOf(":",y+2);B=Math.min(0>B?g.length:B,0>C?g.length:C);if(g.slice(y+2,B).toLowerCase()!==u.toLowerCase())return g;u=g.slice(0,y+2);g=g.slice(B);return""+u+x+g}function l(g,u,x){void 0===u&&(u=G.appBaseUrl);if(!c(g))return g;var y=r(g),B=y.toLowerCase();u=r(u).toLowerCase().replace(/\/+$/,"");if((x=x?r(x).toLowerCase().replace(/\/+$/,""):null)&&0!==u.indexOf(x))return g;for(var C=function(E,A,F){F=E.indexOf(A,F);return-1===F?E.length:F},z=C(B,"/",B.indexOf("//")+2),D=-1;B.slice(0,z+1)===
u.slice(0,z)+"/";){D=z+1;if(z===B.length)break;z=C(B,"/",z+1)}if(-1===D||x&&D<x.length)return g;g=y.slice(D);y=u.slice(D-1).replace(/[^/]+/g,"").length;if(0<y)for(B=0;B<y;B++)g="../"+g;else g="./"+g;return g}Object.defineProperty(G,"__esModule",{value:!0});G.normalize=r;G.canUseXhr=function(g){return w.canUseXhr(g)};G.removeTrailingSlash=function(g){return g.replace(/\/+$/,"")};K=Function("return this")();G.appUrl=new v(K.location);G.appBaseUrl=function(){var g=G.appUrl.path;g=g.substring(0,g.lastIndexOf(g.split("/")[g.split("/").length-
1]));return G.appUrl.scheme+"://"+G.appUrl.host+(null!=G.appUrl.port?":"+G.appUrl.port:"")+g}();var h=/^\s*file:/i,e=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;G.isDataProtocol=f;G.isAbsolute=c;G.isProtocolRelative=a;G.urlToObject=b;G.getOrigin=q;G.makeAbsolute=t;G.hasSameOrigin=m;G.join=n;G.removeFile=function(g){var u=0;if(c(g)){var x=g.indexOf("//");-1!==x&&(u=x+2)}x=g.lastIndexOf("/");return x<u?g:g.slice(0,x+1)};G.addProxy=function(g){return w.addProxy(g)};G.makeData=function(g){return g.isBase64?"data:"+
g.mediaType+";base64,"+g.data:"data:"+g.mediaType+","+g.data};var d=/^data:(.*?)(;base64)?,(.*)$/;G.dataComponents=function(g){return(g=g.match(d))?{mediaType:g[1],isBase64:!!g[2],data:g[3]}:null};G.changeDomain=k;G.read=function(g,u){var x=u&&u.url&&u.url.path;g&&x&&(g=t(g,x,{preserveProtocolRelative:!0}));x=g;var y=u&&u.portal;if(y&&!y.isPortal&&y.urlKey&&y.customBaseUrl){var B=y.urlKey+"."+y.customBaseUrl;x=m(G.appUrl,G.appUrl.scheme+"://"+B)?k(x,y.portalHostname,B):k(x,B,y.portalHostname)}return x};
G.write=function(g,u){if(!g)return g;!c(g)&&u&&u.blockedRelativeUrls&&u.blockedRelativeUrls.push(g);var x=t(g);if(u){var y=u.verifyItemRelativeUrls&&u.verifyItemRelativeUrls.rootPath||u.url&&u.url.path;y&&(x=l(x,y,y),x!==g&&u.verifyItemRelativeUrls&&u.verifyItemRelativeUrls.writtenUrls.push(x))}x=(y=u&&u.portal)&&!y.isPortal&&y.urlKey&&y.customBaseUrl?k(x,y.urlKey+"."+y.customBaseUrl,y.portalHostname):x;return x};G.makeRelative=l;G.removeQueryParameters=function(g){g=b(g);Object.keys(g.query||{});
return g.path}})},"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(K,G,w,v,r){Object.defineProperty(G,"__esModule",{value:!0});G.DEFAULT_LOADER_URL=r.makeAbsolute(r.removeQueryParameters(K.toUrl("./worker-init.js")));G.DEFAULT_CONFIG={baseUrl:function(){var f=r.removeQueryParameters(K.toUrl("dojo/x.js"));return r.makeAbsolute(f.slice(0,f.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},
{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};
G["default"]=function(f){var c={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:w({},f.has),map:w({},f.map),packages:f.packages&&f.packages.concat()||[],paths:w({},f.paths)};f.hasOwnProperty("async")||(c.async=!0);f.hasOwnProperty("isDebug")||(c.isDebug=!1);f.baseUrl||(c.baseUrl=G.DEFAULT_CONFIG.baseUrl);G.DEFAULT_CONFIG.packages.forEach(function(q){a:{for(var t=c.packages,m=0;m<t.length;m++)if(t[m].name===q.name)break a;q=w({},q);m=r.removeQueryParameters(K.toUrl(q.name+"/x.js"));
m=m.slice(0,m.length-5);q.location=r.makeAbsolute(m);t.push(q)}});f=c.map=c.map||{};for(var a=0,b=Object.keys(G.DEFAULT_CONFIG.map);a<b.length;a++){var p=b[a];f[p]||(f[p]=G.DEFAULT_CONFIG.map[p])}return c}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(K,G,w,v,r){var f=function(){return function(){var b=this,p=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(q){b[q]=
function(){for(var t=[],m=0;m<arguments.length;m++)t[m]=arguments[m];return p[q].apply(p,t)}})}}(),c=v.MutationObserver||v.WebKitMutationObserver,a=function(){if(v.process&&v.process.nextTick)var b=function(t){v.process.nextTick(t)};else if(v.Promise)b=function(t){v.Promise.resolve().then(t)};else if(c){var p=[],q=document.createElement("div");(new c(function(){for(;0<p.length;)p.shift()()})).observe(q,{attributes:!0});b=function(t){p.push(t);q.setAttribute("queueStatus","1")}}return b}();return function(){function b(){this._dispatcher=
new f;this._isInitialized=!1;this._workerPostMessage({type:r.MessageType.HANDSHAKE})}b.prototype.terminate=function(){};Object.defineProperty(b.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(p){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=p)&&this.addEventListener("message",p)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(p){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=p)&&this.addEventListener("error",p)},enumerable:!0,configurable:!0});b.prototype.postMessage=function(p,q){var t=this;a(function(){t._workerMessageHandler(new MessageEvent("message",{data:p}))})};b.prototype.dispatchEvent=function(p){return this._dispatcher.dispatchEvent(p)};b.prototype.addEventListener=function(p,q,t){this._dispatcher.addEventListener(p,q,t)};b.prototype.removeEventListener=function(p,q,t){this._dispatcher.removeEventListener(p,
q,t)};b.prototype._workerPostMessage=function(p,q){var t=this;a(function(){t.dispatchEvent(new MessageEvent("message",{data:p}))})};b.prototype._workerMessageHandler=function(p){var q=this;if(p=r.receiveMessage(p)){var t=p.jobId;switch(p.type){case r.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:r.MessageType.CONFIGURED});break;case r.MessageType.OPEN:p=p.modulePath,w("esri-webpack")?K(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline",
"esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",p],function(m,n,k,l,h,e,d,g){switch(g){case "esri/views/vectorTiles/WorkerTileHandler":break;case "esri/views/2d/layers/features/Pipeline":n=k;break;case "esri/views/3d/layers/PointCloudWorker":n=l;break;case "esri/views/3d/layers/SceneLayerWorker":n=h;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":n=
e;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":n=d;break;default:n=g}m=m.connect(n);q._workerPostMessage({type:r.MessageType.OPENED,jobId:t,data:m})}):K(["./RemoteClient",p],function(m,n){var k=m.connect(n);q._workerPostMessage({type:r.MessageType.OPENED,jobId:t,data:k})})}}};return b}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(K,G,w){function v(r,f){if(Array.isArray(f)){var c=new w;r(f,function(){for(var a=
[],b=0;b<arguments.length;b++)a[b]=arguments[b];c.resolve(a)});return c.promise}return v(r,[f]).then(function(a){return a[0]})}Object.defineProperty(G,"__esModule",{value:!0});G.when=v;G.getAbsMid=function(r,f,c){return f.toAbsMid?f.toAbsMid(r):c.id.replace(/\/[^\/]*$/gi,"/")+r}})},"esri/layers/rasterLib/function/rasterFunctionHelper":function(){define(["dojo/_base/declare","dojo/_base/lang","./rasterFunctionRegistry"],function(K,G,w){return{create:function(v,r){if(v){var f=v.renderTexture,c=Object.keys(v);
if(v.read&&!r)return v;v.read&&r&&(v=v.toJson());-1<c.indexOf("name")&&c.indexOf(!1)?(c=G.mixin({},v),c=this._parseV2(c,r)):(c="esri.layers.RasterFunction"===v.declaredClass?v.toJson():G.mixin({},v),c=this._parseV1(c,r));c.branchCount=c.updateBranchStructure();c.renderTexture||(c.renderTexture=!!f);return c}},_parseV1:function(v,r){var f=v.rasterFunction,c=v.rasterFunctionArguments,a=v.renderTexture||v.rasterFunctionArguments.renderTexture||!1,b,p,q,t,m,n,k;(t=c.raster||c.Raster)&&t.rasterFunction&&
(b=this._parseV1(t,r));(t=c.raster2||c.Raster2)&&t.rasterFunction&&(p=this._parseV1(t,r));(t=c.rasters||c.Rasters)&&0<t.length&&(q=t.map(G.hitch(this,function(l){return l&&l.rasterFunction?this._parseV1(l,r):l})));(t=c.dem||c.DEM)&&(t.functionName||t.rasterFunction)&&(m=this._parseV1(t,r));(t=c.fillRaster||c.FillRaster)&&(t.functionName||t.rasterFunction)&&(n=this._parseV1(t,r));t=w.functions[f];if(!t)return null;f=new t(c);f.variableName&&(t=c[f.variableName])&&(t.functionName||t.rasterFunction)&&
(k=this._parseV1(t,r));v.outputPixelType&&(f.pixelType=v.outputPixelType);"$$"===b?f.functionArguments.raster=r&&r.raster:null!=b?f.functionArguments.raster=b:f.functionArguments.raster||(f.functionArguments.raster=r&&r.raster);null!=p&&(f.functionArguments.raster2=p);null!=q&&(f.functionArguments.rasters=q.map(function(l){"$$"===l&&(l=r&&r.raster);return l}));null!=m&&(f.functionArguments.dem=m);null!=n&&(f.functionArguments.fillRaster=n);null!=k&&(f.functionArguments[f.variableName]=k);f.renderTexture=
a;return f},_parseV2:function(v,r){if(!v)return null;var f=G.clone(v);this._bindV2Args(f,r);var c={};this._convertTov1(f,c);return this._parseV1(c,r)},_bindV2Args:function(v,r){(v||r)&&Object.keys(v).forEach(function(f){v[f]["function"]&&v[f].arguments?this._bindV2Args(v[f].arguments,r):null!=r[v[f].name]&&(v[f].value=r[v[f].name])}.bind(this))},_convertV2Types:function(v){if(!v)return null;"ArgumentArray"===v.type?v.elements&&"RasterStatistics"===v.elements[0].type&&(v=v.elements):v instanceof Array&&
0===v.length&&(v=null);return v},_convertTov1:function(v,r){if((v||r)&&v["function"]){var f=v["function"],c=v.arguments;r.rasterFunction=f.type.replace("Function","");r.outputPixelType="UNKNOWN"===f.pixelType?"Unknown":f.pixelType;r.rasterFunctionArguments={};var a;Object.keys(c).forEach(function(b){c[b]["function"]&&c[b].arguments?(r.rasterFunctionArguments[b]={},this._convertTov1(c[b],r.rasterFunctionArguments[b])):(a=c[b].value,r.rasterFunctionArguments[b]="object"!==typeof a||a.functionArguments?
a:this._convertV2Types(a))}.bind(this))}}}})},"esri/layers/rasterLib/function/rasterFunctionRegistry":function(){define("dojo/_base/declare dojo/_base/lang ../../rasterLib/function/AspectFunction ../../rasterLib/function/BandArithmeticFunction ../../rasterLib/function/ColormapFunction ../../rasterLib/function/CompositeBandFunction ../../rasterLib/function/ContrastBrightnessFunction ../../rasterLib/function/ConvolutionFunction ../../rasterLib/function/ExtractBandFunction ../../rasterLib/function/HillshadeFunction ../../rasterLib/function/LocalFunction ../../rasterLib/function/MaskFunction ../../rasterLib/function/NDVIFunction ../../rasterLib/function/SlopeFunction ../../rasterLib/function/StretchFunction ../../rasterLib/function/RemapFunction ../../rasterLib/function/IdentityFunction ../../rasterLib/function/ResampleFunction".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e){return function(){function d(y){y.prototype.supportWebGL&&(u[y.prototype.functionName]=y);y.prototype.support2D&&(g[y.prototype.functionName]=y);x[y.prototype.functionName]=y}var g={},u={},x={};d(w);d(v);d(r);d(f);d(c);d(a);d(b);d(p);d(q);d(t);d(m);d(n);d(k);d(l);d(h);d(e);return{cpu:g,gpu:u,functions:x,register:d,getFunction:function(y){return x[y]},support:function(y,B){return!!("gpu"===B?u:"cpu"===B?g:x)[y]}}}()})},"esri/layers/rasterLib/function/AspectFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),
function(K,G,w,v,r,f,c,a){return K([w,c],{declaredClass:"esri.layers.rasterLib.function.AspectFunction",functionName:"Aspect",supportWebGL:!0,support2D:!0,constructor:function(b){this.functionArguments=this.mixinIgnoreCase({raster:null},b)},bind:function(){var b=this.getSourceRasterInfo();if(!b.raster)return Error("The raster input to aspect function is invalid.");this.rasterInfo=G.mixin(b.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:[{min:0,max:360}],histograms:null});
this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(b){this._performance.start();b=a.aspect(b.raster);this._addPerformanceMetric(this._performance.elapsed());return b},readGL:function(b){this._performance.start();this._initializeProgram({fragment:f.aspect,fragmentName:"Aspect"});var p=this._setupTextureData(b.raster),q=this.bindFrameBuffer(),t=this.gl,m=t.drawingBufferWidth;t=t.drawingBufferHeight;var n=p.extent;
this._setUniforms({u_resolution:b&&b.raster&&b.raster.pixelBlock?[1/b.raster.pixelBlock.width,1/b.raster.pixelBlock.height]:[1/m,1/t],u_cellSize:[(n.xmax-n.xmin)/m,(n.ymax-n.ymin)/t]});this._bindTexture(p.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:p.extent,texture:q.texture}}})})},"esri/layers/rasterLib/function/surfaceUtils":function(){define(["dojo/_base/lang"],function(K){return{hillshade:function(G,w){if(null!==G&&null!==G.pixelBlock&&
null!==G.pixelBlock.pixels){var v=this._clonePixelBlock(G.pixelBlock),r=w.altitude,f=w.azimuth,c=w.zFactor,a=w.psPower,b=w.psFactor,p=w.hillshadeType,q=w.slopeType,t=w.isGCS;1===p&&(c*=2);var m=v.width,n=v.height,k=v.pixels[0],l=v.mask,h=new Uint8Array(m*n);l&&h.set(l);var e=new Uint8Array(m*n),d=(G.extent.xmax-G.extent.xmin)/m,g=(G.extent.ymax-G.extent.ymin)/n,u=c/(8*d),x=c/(8*g);.001<c&&t&&(u/=111E3,x/=111E3);3===q&&(t?(u=111E3*d,x=111E3*g,u=(c+Math.pow(u,a)*b)/(8*u),x=(c+Math.pow(x,a)*b)/(8*x)):
(u=(c+Math.pow(d,a)*b)/(8*d),x=(c+Math.pow(g,a)*b)/(8*g)));t=(90-r)*Math.PI/180;r=Math.cos(t);var y=(360-f+90)*Math.PI/180;f=Math.sin(t)*Math.cos(y);t=Math.sin(t)*Math.sin(y);c=[];a=[];b=[];d=[315,270,225,360,180,0];var B=[60,60,60,60,60,90];g=[3,5,3,2,1,4];var C=g.reduce(function(J,O){return J+O});q=g.map(function(J){return J/C});if(1===p){var z=d.length;for(g=0;g<z;g++)r=B[g],f=d[g],t=(90-r)*Math.PI/180,r=Math.cos(t),y=(360-f+90)*Math.PI/180,f=Math.sin(t)*Math.cos(y),t=Math.sin(t)*Math.sin(y),c.push(r),
a.push(f),b.push(t)}var D=0;for(g=1;g<n-1;g++)for(B=g*m,d=1;d<m-1;d++)if(l&&!l[B+d])e[B+d]=0;else{y=0;if(l&&(y=l[B-m+d-1]+l[B-m+d]+l[B-m+d+1]+l[B+d-1]+l[B+d+1]+l[B+m+d-1]+l[B+m+d]+l[B+m+d+1],7>y)){e[B+d]=0;h[B+d]=0;continue}if(7===y){var E=l[B-m+d-1]?k[B-m+d-1]:k[B+d];var A=l[B-m+d]?k[B-m+d]:k[B+d];var F=l[B-m+d+1]?k[B-m+d+1]:k[B+d];y=l[B+d-1]?k[B+d-1]:k[B+d];var H=l[B+d+1]?k[B+d+1]:k[B+d];D=l[B+m+d-1]?k[B+m+d-1]:k[B+d];var I=l[B+m+d]?k[B+m+d]:k[B+d];var L=l[B+m+d+1]?k[B+m+d+1]:k[B+d]}else E=k[B-
m+d-1],A=k[B-m+d],F=k[B-m+d+1],y=k[B+d-1],H=k[B+d+1],D=k[B+m+d-1],I=k[B+m+d],L=k[B+m+d+1];y=(F+H+H+L-(E+y+y+D))*u;A=(D+I+I+L-(E+A+A+F))*x;F=Math.sqrt(1+y*y+A*A);D=0;if(0===p)I=t*A-f*y,I=255*(r+I)/F,0>I&&(I=0),D=I;else if(1===p)for(E=0;E<z;E++)I=b[E]*A-a[E]*y,I=255*(c[E]+I)/F,0>I&&(I=0),D+=I*q[E];e[B+d]=D}for(g=0;g<n;g++)e[g*m]=e[g*m+1],e[(g+1)*m-1]=e[(g+1)*m-2];for(g=1;g<m-1;g++)e[g]=e[g+m],e[g+(n-1)*m]=e[g+(n-2)*m];v.pixelType="U8";v.pixels=[e];v.statistics=[{minValue:0,maxValue:255}];l&&(v.mask=
h);return{extent:G.extent,pixelBlock:v}}},slope:function(G,w){if(null!==G&&null!==G.pixelBlock&&null!==G.pixelBlock.pixels){var v=this._clonePixelBlock(G.pixelBlock),r=w.zFactor,f=w.psPower,c=w.psFactor,a=w.slopeType,b=w.isGCS,p=v.width,q=v.height,t=v.pixels[0],m=v.mask,n=new Uint8Array(p*q);m&&n.set(m);var k=new Float32Array(p*q),l=(G.extent.xmax-G.extent.xmin)/p,h=(G.extent.ymax-G.extent.ymin)/q,e=r/(8*l),d=r/(8*h);1E-4>Math.abs(r-1)&&b&&(e/=111E3,d/=111E3);3===a&&(b?(e=111E3*l,d=111E3*h,e=(r+Math.pow(e,
f)*c)/(8*e),d=(r+Math.pow(d,f)*c)/(8*d)):(e=(r+Math.pow(l,f)*c)/(8*l),d=(r+Math.pow(h,f)*c)/(8*h)));for(r=1;r<q-1;r++)for(c=r*p,f=1;f<p-1;f++)if(m&&!m[c+f])k[c+f]=0;else{h=0;if(m&&(h=m[c-p+f-1]+m[c-p+f]+m[c-p+f+1]+m[c+f-1]+m[c+f+1]+m[c+p+f-1]+m[c+p+f]+m[c+p+f+1],7>h)){k[c+f]=0;n[c+f]=0;continue}if(7===h){h=m[c-p+f-1]?t[c-p+f-1]:t[c+f];b=m[c-p+f]?t[c-p+f]:t[c+f];l=m[c-p+f+1]?t[c-p+f+1]:t[c+f];var g=m[c+f-1]?t[c+f-1]:t[c+f];var u=m[c+f+1]?t[c+f+1]:t[c+f];var x=m[c+p+f-1]?t[c+p+f-1]:t[c+f];var y=m[c+
p+f]?t[c+p+f]:t[c+f];var B=m[c+p+f+1]?t[c+p+f+1]:t[c+f]}else h=t[c-p+f-1],b=t[c-p+f],l=t[c-p+f+1],g=t[c+f-1],u=t[c+f+1],x=t[c+p+f-1],y=t[c+p+f],B=t[c+p+f+1];g=(l+u+u+B-(h+g+g+x))*e;h=(x+y+y+B-(h+b+b+l))*d;h=Math.sqrt(g*g+h*h);k[c+f]=1===a||3===a?57.2957795*Math.atan(h):100*h}for(r=0;r<q;r++)k[r*p]=k[r*p+1],k[(r+1)*p-1]=k[(r+1)*p-2];for(r=1;r<p-1;r++)k[r]=k[r+p],k[r+(q-1)*p]=k[r+(q-2)*p];v.pixelType="F32";v.pixels=[k];v.statistics=[{minValue:0,maxValue:255}];m&&(v.mask=n);return{extent:G.extent,pixelBlock:v}}},
aspect:function(G){if(null!==G&&null!==G.pixelBlock&&null!==G.pixelBlock.pixels){var w=this._clonePixelBlock(G.pixelBlock),v=w.width,r=w.height,f=w.pixels[0],c=w.mask,a=new Uint8Array(v*r);c&&a.set(c);var b=new Float32Array(v*r),p=1/((G.extent.xmax-G.extent.xmin)/v),q=1/((G.extent.ymax-G.extent.ymin)/r),t,m;for(t=1;t<r-1;t++){var n=t*v;for(m=1;m<v-1;m++)if(c&&!c[n+m])b[n+m]=0;else{var k=0;if(c&&(k=c[n-v+m-1]+c[n-v+m]+c[n-v+m+1]+c[n+m-1]+c[n+m+1]+c[n+v+m-1]+c[n+v+m]+c[n+v+m+1],7>k)){b[n+m]=0;a[n+m]=
0;continue}if(7===k){k=c[n-v+m-1]?f[n-v+m-1]:f[n+m];var l=c[n-v+m]?f[n-v+m]:f[n+m];var h=c[n-v+m+1]?f[n-v+m+1]:f[n+m];var e=c[n+m-1]?f[n+m-1]:f[n+m];var d=c[n+m+1]?f[n+m+1]:f[n+m];var g=c[n+v+m-1]?f[n+v+m-1]:f[n+m];var u=c[n+v+m]?f[n+v+m]:f[n+m];var x=c[n+v+m+1]?f[n+v+m+1]:f[n+m]}else k=f[n-v+m-1],l=f[n-v+m],h=f[n-v+m+1],e=f[n+m-1],d=f[n+m+1],g=f[n+v+m-1],u=f[n+v+m],x=f[n+v+m+1];e=(h+d+d+x-(k+e+e+g))*p;k=(g+u+u+x-(k+l+l+h))*q;0===e&&0===k?k=-1:(k=90-57.29578*Math.atan2(k,-e),0>k&&(k+=360),360===k?
k=0:360<k&&(k%=360));b[n+m]=k}}for(t=0;t<r;t++)b[t*v]=b[t*v+1],b[(t+1)*v-1]=b[(t+1)*v-2];for(t=1;t<v-1;t++)b[t]=b[t+v],b[t+(r-1)*v]=b[t+(r-2)*v];w.pixelType="F32";w.pixels=[b];w.statistics={minValue:0,maxValue:360};c&&(w.mask=a);return{extent:G.extent,pixelBlock:w}}},_clonePixelBlock:function(G){return G.clone?G.clone():K.clone(G)}}})},"esri/layers/rasterLib/function/BandArithmeticFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),
function(K,G,w,v,r,f,c){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.BandArithmeticFunction",functionName:"BandArithmetic",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({method:1,bandIndexes:"",raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to band arithmetic function is invalid.");this.rasterInfo=G.mixin(a.raster,{bandCount:8===this.functionArguments.method?a.raster.bandCount:
1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var b=c.calculate(a.pixelBlock,{bandIndexes:this.functionArguments.bandIndexes,method:this.functionArguments.method});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(b.pixelType=this.pixelType);
return{extent:a.extent,pixelBlock:b}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:r.bandArithmetic,fragmentName:"bandArithmetic"});var b=this.functionArguments.bandIndexes.trim().split(" ").map(function(m){return parseInt(m,10)});this._infraredBandID=b[0]-1;this._visibleBandID=b[1]-1;this._alterBand=2<Math.max(this._infraredBandID,this._visibleBandID)?!0:!1;a=this._setupTextureData(a.raster,this._alterBand&&2==b.length?{bandIDs:[this._infraredBandID,this._visibleBandID,
this._infraredBandID]}:{bandIDs:[b[0]-1,b[1]-1,b[2]-1]});var p=this.bindFrameBuffer(),q=this.functionArguments.method,t=2<b.length?b.slice(2):null;this._alterBand?this._setUniforms({u_method:q,u_bandId_nir:0,u_bandId_red:1,u_constants:t}):this._setUniforms({u_method:q,u_bandId_nir:b[0]-1,u_bandId_red:b[1]-1,u_constants:t});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:p.texture}}})})},"esri/layers/rasterLib/function/rasterIndex":function(){define(["dojo/_base/lang"],
function(K){return{calculate:function(G,w){if(G&&G.pixels&&G.pixels.length){var v=w&&w.bandIndexes,r=w&&w.method,f=v.trim().split(" ").map(function(p){return parseInt(p,10)}).filter(function(p){return null!=p}),c=this._clonePixelBlock(G),a=c.pixels,b=c.mask;switch(r){case 1:a=this._calculateNDVI(b,a[f[0]-1],a[f[1]-1]);break;case 2:a=this._calculateSAVI(b,a[f[0]-1],a[f[1]-1],f[2]);break;case 3:a=this._calculateTSAVI(b,a[f[0]-1],a[f[1]-1],f[2],f[3],f[4]);break;case 4:a=this._calculateMSAVI(b,a[f[0]-
1],a[f[1]-1]);break;case 5:a=this._calculateGEMI(b,a[f[0]-1],a[f[1]-1]);break;case 6:a=this._calculatePVI(b,a[f[0]-1],a[f[1]-1],f[2],f[3]);break;case 7:a=this._calculateGVITM(b,a[f[0]-1],a[f[1]-1],a[f[2]-1],a[f[3]-1],a[f[4]-1],a[f[5]-1]);break;case 8:a=this._calculateSultan(b,a[f[0]-1],a[f[1]-1],a[f[2]-1],a[f[3]-1],a[f[4]-1],a[f[5]-1]);break;case 9:a=this._calculateVARI(b,a[f[0]-1],a[f[1]-1],a[f[2]-1]);break;case 0:a=this._calculateUserDefined(b,a,v)}c.pixels=a;c.pixelType="F32";c.calculateStatistics();
return c}},_clonePixelBlock:function(G){return G.clone?G.clone():K.clone(G)},_parseUserDefined:function(G,w){G=G.replace(" ","");0===G.indexOf("-")&&(G="0"+G);0===G.indexOf("+")&&(G=G.slice(1,G.length));var v=G.split(""),r=[],f=[],c="+-*/()".split(""),a,b="";for(a=0;a<v.length;a++){var p=v[a];c.some(function(q){return q===p})?(""!==b&&f.push(parseFloat(b)),r.push(p),b=""):"b"===p.toLowerCase()?(a++,b=p.concat(v[a]),f.push(w[parseInt(b[1],10)-1]),b=""):(b=b.concat(p),a===v.length-1&&f.push(parseFloat(b)))}return{ops:r,
nums:f}},_op:function(G,w,v,r){if(v.constructor===Number&&r.constructor===Number)return v+r;var f;if(v.constructor===Number){var c=r.length;var a=v;v=new Float32Array(c);for(f=0;f<c;f++)v[f]=a}else if(c=v.length,r.constructor===Number)for(a=r,r=new Float32Array(c),f=0;f<c;f++)r[f]=a;a=new Float32Array(c);if(null==G)if("+"===w)for(f=0;f<c;f++)a[f]=v[f]+r[f];else if("-"===w)for(f=0;f<c;f++)a[f]=v[f]-r[f];else if("*"===w)for(f=0;f<c;f++)a[f]=v[f]*r[f];else{if("/"===w)for(f=0;f<c;f++)a[f]=v[f]/r[f]}else if("+"===
w)for(f=0;f<c;f++)G[f]&&(a[f]=v[f]+r[f]);else if("-"===w)for(f=0;f<c;f++)G[f]&&(a[f]=v[f]-r[f]);else if("*"===w)for(f=0;f<c;f++)G[f]&&(a[f]=v[f]*r[f]);else if("/"===w)for(f=0;f<c;f++)G[f]&&(a[f]=v[f]/r[f]);return a},_shrinkOp:function(G,w){G.splice(w,1);var v=0,r=0,f=0;do{for(v=f=r=0;v<G.length;v++)if("("===G[v])r=v;else if(")"===G[v]){f=v;break}f===r+1&&G.splice(r,2)}while(f===r+1);return G},_getPriorityOpIndex:function(G,w){if(1===G.length)return{opIndex:0,numIndex:0};var v=0,r=0,f=0,c=-1,a=0;for(v=
0;v<G.length;v++)if("("===G[v])r=v;else if(")"===G[v]){f=v;break}var b=0===f?G:G.slice(r+1,f);for(v=0;v<b.length;v++)if("*"===b[v]||"/"===b[v]){c=v;break}if(!(-1<c))for(v=0;v<b.length;v++)if("+"===b[v]||"-"===b[v]){c=v;break}0<f&&(c+=r+1);for(v=0;v<c;v++)"("===G[v]&&a++;return{opIndex:c,numIndex:c-a}},_calculateUserDefined:function(G,w,v){w=this._parseUserDefined(v,w);v=w.ops;for(var r=w.nums,f,c,a;0<v.length&&(w=this._getPriorityOpIndex(v,r),f=v[w.opIndex],c=r[w.numIndex],a=r[w.numIndex+1],f=this._op(G,
f,c,a),1!==v.length);)v=this._shrinkOp(v,w.opIndex),r.splice(w.numIndex,2,f);return[f]},_calculateNDVI:function(G,w,v){var r=v.length,f=new Float32Array(r),c;if(null==G)for(c=0;c<r;c++){var a=v[c];var b=w[c];f[c]=(b-a)/(b+a)}else for(c=0;c<r;c++)G[c]&&(a=v[c],b=w[c],f[c]=(b-a)/(b+a));return[f]},_calculateSAVI:function(G,w,v,r){var f=v.length,c=new Float32Array(f),a;if(null==G)for(a=0;a<f;a++){var b=v[a];var p=w[a];c[a]=(p-b)/(p+b+r)*(1+r)}else for(a=0;a<f;a++)G[a]&&(b=v[a],p=w[a],c[a]=(p-b)/(p+b+
r)*(1+r));return[c]},_calculateTSAVI:function(G,w,v,r,f,c){var a=v.length,b=new Float32Array(a),p=-f*r+c*(1+r*r);if(null==G)for(c=0;c<a;c++){var q=v[c];var t=w[c];b[c]=r*(t-r*q-f)/(f*t+q+p)}else for(c=0;c<a;c++)G[c]&&(q=v[c],t=w[c],b[c]=r*(t-r*q-f)/(f*t+q+p));return[b]},_calculateMSAVI:function(G,w,v){var r=v.length,f=new Float32Array(r),c;if(null==G)for(c=0;c<r;c++){var a=v[c];var b=w[c];f[c]=.5*(2*(b+1)-Math.sqrt(Math.pow(2*b+1,2)-8*(b-a)))}else for(c=0;c<r;c++)G[c]&&(f[c]=.5*(2*(b+1)-Math.sqrt(Math.pow(2*
b+1,2)-8*(b-a))));return[f]},_calculateGEMI:function(G,w,v){var r=v.length,f=new Float32Array(r),c;if(null==G)for(c=0;c<r;c++){var a=v[c];var b=w[c];b=(2*(b*b-a*a)+1.5*b+.5*a)/(b+a+.5);f[c]=b*(1-.25*b)-(a-.125)/(1-a)}else for(c=0;c<r;c++)G[c]&&(a=v[c],b=w[c],b=(2*(b*b-a*a)+1.5*b+.5*a)/(b+a+.5),f[c]=b*(1-.25*b)-(a-.125)/(1-a));return[f]},_calculatePVI:function(G,w,v,r,f){var c=v.length,a=new Float32Array(c),b,p=Math.sqrt(1+r*r);if(null==G)for(b=0;b<c;b++){var q=v[b];var t=w[b];a[b]=(t-r*q-f)/p}else for(b=
0;b<c;b++)G[b]&&(q=v[b],t=w[b],a[b]=(t-r*q-f)/p);return[a]},_calculateGVITM:function(G,w,v,r,f,c,a){var b=w.length,p=new Float32Array(b),q;if(null==G)for(q=0;q<b;q++)p[q]=-.2848*w[q]-.2435*v[q]-.5436*r[q]+.7243*f[q]+.084*c[q]-1.18*a[q];else for(q=0;q<b;q++)G[q]&&(p[q]=-.2848*w[q]-.2435*v[q]-.5436*r[q]+.7243*f[q]+.084*c[q]-1.18*a[q]);return[p]},_calculateSultan:function(G,w,v,r,f,c,a){v=w.length;var b=new Float32Array(v),p=new Float32Array(v),q=new Float32Array(v),t;if(null==G)for(t=0;t<v;t++)b[t]=
c[t]/a[t]*100,p[t]=c[t]/w[t]*100,q[t]=r[t]/f[t]*(c[t]/f[t])*100;else for(t=0;t<v;t++)G[t]&&(b[t]=c[t]/a[t]*100,p[t]=c[t]/w[t]*100,q[t]=r[t]/f[t]*(c[t]/f[t])*100);return[b,p,q]},_calculateVARI:function(G,w,v,r){var f=w.length,c=new Float32Array(f),a;if(null==G)for(a=0;a<f;a++){var b=w[a];var p=v[a];var q=r[a];c[a]=(p-b)/(p+b-q)}else for(a=0;a<f;a++)if(G[a])for(a=0;a<f;a++)b=w[a],p=v[a],q=r[a],c[a]=(p-b)/(p+b-q);return[c]}}})},"esri/layers/rasterLib/function/ColormapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(K,G,w,v,r,f,c){return K([v,f],{declaredClass:"esri.layers.rasterLib.function.ColormapFunction",functionName:"Colormap",pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({colormap:null,colorRampName:null,colorRamp:null,colorMapName:null,raster:null},a);this.invert=a&&a.invert;a=a.colormap||a.Colormap;if(a){if(a.features||a[0].attributes){a=a.features||a;var b=Object.keys(a[0].attributes);var p=b.filter(function(l){return"alpha"===
l.toLowerCase()})[0];var q=b.filter(function(l){return"value"===l.toLowerCase()})[0];var t=b.filter(function(l){return"red"===l.toLowerCase()})[0];var m=b.filter(function(l){return"green"===l.toLowerCase()})[0];var n=b.filter(function(l){return"blue"===l.toLowerCase()})[0];if(!(q&&t&&m&&n))throw"invalid colormap";a=a.map(function(l){return p?[l.attributes[q],l.attributes[t],l.attributes[m],l.attributes[n],l.attributes[p]]:[l.attributes[q],l.attributes[t],l.attributes[m],l.attributes[n]]});var k=1.1>
Math.max.apply(null,a.map(function(l){return l[1]}));b=p&&1.1>Math.max.apply(null,a.map(function(l){return l[4]}));if(k)for(k=0;k<a.length;k++)a[k][1]=Math.round(255*a[k][1]),a[k][2]=Math.round(255*a[k][2]),a[k][3]=Math.round(255*a[k][3]),b&&(a[k][4]=Math.round(255*a[k][4]))}this.functionArguments.colormap=this._sortClr(a)}this._initialize()},bind:function(a){this._initialize();a=this.getSourceRasterInfo(a);if(!a.raster||"F32"===a.raster.pixelType)return Error("The raster input to colormap function is invalid. It must be integer type.");
this.rasterInfo=G.mixin(a.raster,{bandCount:3,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){return this._colorize(a.raster)},readGL:function(a){return this._colorizeGL(a.raster)},_colorize:function(a){this._performance.start();var b=c.colorize(a.pixelBlock,{indexedColormap:this._indexedColormap,indexedColormapOffset:this._indexedColormapOffset,
indexed2DColormap:this._indexed2DColormap,alphaSpecified:this._alphaSpecified});this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:b}},_binarySearchClr:function(a,b){for(var p=0,q=a.length-1,t=0,m=0;p<q;)if(t=Math.floor((p+q)/2),m=a[t],m[0]<b)p=t;else if(m[0]>b)q=t;else return m.slice(1);return null},_sortClr:function(a,b){var p,q,t=[];for(p=0;p<a.length;p++)t.push(a[p]);for(p=0;p<t.length-1;p++){var m=t[p];for(q=p+1;q<t.length;q++)m[0]>t[q][0]&&(m=t[q],t[q]=
t[p],t[p]=m)}if(b)for(p=0;p<t.length/2;p++)m=t[p],t[t.length-1-p]=t[p],t[p]=m;return t},_invertColorRamp:function(a){if(!a)return a;var b={type:a.type};"random"===a.type?b=a:"multipart"===a.type?b.colorRamps=a.colorRamps.map(function(p){return{fromColor:p.toColor,toColor:p.fromColor}}).reverse():(b.fromColor=a.toColor,b.toColor=a.fromColor);return b},_initialize:function(){this._indexedColormapOffset=0;if(this.functionArguments.colormap){var a=c.buildIndexedColormap(this.functionArguments.colormap);
this._alphaSpecified=a&&a.alphaSpecified;this._indexedColormap=a&&a.indexedColormap;this._indexedColormapOffset=a&&a.offset;this._indexedColormap||(this._indexed2DColormap=this._getIndexed2DColormap())}else this.functionArguments.colorRamp?this._indexedColormap="multipart"===this.functionArguments.colorRamp.type?this.invert?w.createMultiPartColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):w.createMultiPartColorRamp(this.functionArguments.colorRamp):this.invert?w.createAlgorithmicColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):
w.createAlgorithmicColorRamp(this.functionArguments.colorRamp):this.functionArguments.colormapName&&"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=w.createRandomColorRamp())},_getIndexed2DColormap:function(){var a=this.functionArguments.colormap;if(!a)return null;var b=0;0>a[0][0]&&(b=a[0][0]);var p=[],q=5===a[0].length,t;for(t=0;t<a.length;t++)p[a[t][0]-b]=q?a[t].slice(1):a[t].slice(1).concat([255]);return p},_colorizeGL:function(a){this._performance.start();
this._initializeProgram({fragment:r.colormap,fragmentName:"Colormap"});var b=this._indexedColormap,p=this._indexedColormapOffset;this._clrTexture||(this._clrTexture=this._setupColormapTexture(b));var q=this._clrTexture,t=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:p,u_indexedColormapMaxIndex:b.length/4-1});this._bindTexture(q,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:t.texture}},_setupColormapTexture:function(a){var b=
this._createTexture(),p=this.gl,q=a.length/4,t=new Float32Array(a.length),m,n=this.renderTexture?255:1;for(m=0;m<a.length;m++)t[m]=a[m]/n;p.getExtension("OES_texture_float");p.texImage2D(p.TEXTURE_2D,0,p.RGBA,q,1,0,p.RGBA,p.FLOAT,t);return b}})})},"esri/renderers/colorRampGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","../renderers/colorUtils"],function(K,G,w){return{createAlgorithmicColorRamp:function(v,r){if(!v)return null;var f=v.fromColor,c=v.toColor;if(!f||!c)return null;
void 0===f.r&&3<=f.length&&(f={r:f[0],g:f[1],b:f[2]});void 0===c.r&&3<=c.length&&(c={r:c[0],g:c[1],b:c[2]});var a=v.size||256,b=v.algorithm||"cie-lab";if(1===a)var p=[f.r,f.g,f.b,255];else if(2===a)p=[f.r,f.g,f.b,255,c.r,c.g,f.b,255];else if(-1<b.toLowerCase().indexOf("hsv")){p=w.toHSV(f);c=w.toHSV(c);a=a||256;var q=0===p.s,t=0===c.s;f=p.h;b=c.h;q&&!t?f=p.h=b:t&&!q&&(b=c.h=f);q=Math.abs(b-f);180>q?b=(b-f)/(a-1):(q=360-q,b=f>b?q/(a-1):-q/(a-1));q=(c.s-p.s)/(a-1);t=(c.v-p.v)/(a-1);var m=p.s;p=p.v;var n,
k=new Uint8Array(4*a);for(n=0;n<a-1;n++){var l=w.toRGB({h:f,s:m,v:p});k[4*n]=l.r;k[4*n+1]=l.g;k[4*n+2]=l.b;k[4*n+3]=255;f+=b;m+=q;p+=t;360<f?f-=360:0>f&&(f+=360)}l=w.toRGB(c);k[4*(a-1)]=l.r;k[4*(a-1)+1]=l.g;k[4*(a-1)+2]=l.b;k[4*(a-1)+3]=255;p=k}else if(-1<b.toLowerCase().indexOf("lch")){m=w.toLCH(f);c=w.toLCH(c);a=a||256;p=(c.l-m.l)/(a-1);f=(c.c-m.c)/(a-1);b=(c.h-m.h)/(a-1);q=m.l;t=m.c;m=m.h;k=new Uint8Array(4*a);for(n=0;n<a-1;n++)l=w.toRGB({l:q,c:t,h:m}),k[4*n]=l.r,k[4*n+1]=l.g,k[4*n+2]=l.b,k[4*
n+3]=255,q+=p,t+=f,m+=b;l=w.toRGB(c);k[4*(a-1)]=l.r;k[4*(a-1)+1]=l.g;k[4*(a-1)+2]=l.b;k[4*(a-1)+3]=255;p=k}else if(-1<b.toLowerCase().indexOf("lab")){m=w.toLAB(f);c=w.toLAB(c);a=a||256;p=(c.l-m.l)/(a-1);f=(c.a-m.a)/(a-1);b=(c.b-m.b)/(a-1);q=m.l;t=m.a;m=m.b;k=new Uint8Array(4*a);for(n=0;n<a-1;n++)l=w.toRGB({l:q,a:t,b:m}),k[4*n]=l.r,k[4*n+1]=l.g,k[4*n+2]=l.b,k[4*n+3]=255,q+=p,t+=f,m+=b;l=w.toRGB(c);k[4*(a-1)]=l.r;k[4*(a-1)+1]=l.g;k[4*(a-1)+2]=l.b;k[4*(a-1)+3]=255;p=k}if(r&&!1===r.flattened)for(c=p,
p=[],a=0;a<p/4;a++)p[a]=c.slice(4*a,4*a+4);return p},createMultiPartColorRamp:function(v,r){if(!v)return null;r=r&&G.clone(r)||{flattened:!0};var f=v.colorRamps;if(!f||0===f.length)return null;var c=v.size||256,a=Math.max(Math.floor(c/f.length),1),b=Math.max(a,c-(f.length-1)*a),p=!1!==r.flattened;r.flattened=!0;c=(f.length-1)*a+b;var q=new Uint8Array(4*c);for(c=0;c<f.length;c++){var t={fromColor:f[c].fromColor,toColor:f[c].toColor,size:c===f.length-1?b:a};q instanceof Array?q.concat(this.createAlgorithmicColorRamp(t,
r)):q.set(this.createAlgorithmicColorRamp(t,r),a*c*4)}if(!p)for(f=q,q=[],c=0;c<q/4;c++)q[c]=f.slice(4*c,4*c+4);return q},createRandomColorRamp:function(v){v=v||{};var r=v.size||256,f=!1===v.flattened;var c=f?new Uint8Array(4*r):[];for(v=0;v<r;v++)f?(c[4*v]=Math.round(255*Math.random()),c[4*v+1]=Math.round(255*Math.random()),c[4*v+2]=Math.round(255*Math.random()),c[4*v+3]=255):c[v]=[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),255];return c}}})},"esri/layers/rasterLib/function/rasterUtils":function(){define(["dojo/_base/lang"],
function(K){return{mask:function(G,w){if(G&&G.pixels&&G.pixels.length){var v=this._clonePixelBlock(G),r=w.includedRanges,f=w.noDataInterpretation,c=w.noDataValues;if(null===r&&null===c)return v;var a=v.pixels,b=v.mask,p=v.width*v.height,q=a.length,t;if(null!==c&&c.length!==q)throw"expect "+q+" elements in noDataValues";if(null!==r&&r.length!==2*q)throw"expect "+2*q+" elements in IncludeRanges";if(null==b){b=new Uint8Array(p);for(t=0;t<p;t++)b[t]=1;v.mask=b}if(0===f)for(f=0;f<q;f++){var m=a[f];var n=
null===r?null:r[2*f];var k=null===r?null:r[2*f+1];var l=null===c?null:parseFloat(c[f]);if(null===n||null===k)for(t=0;t<p;t++){if(b[t]){var h=m[t];h===l&&(b[t]=0)}}else if(null===l)for(t=0;t<p;t++)b[t]&&(h=m[t],h<n||h>k)&&(b[t]=0);else for(t=0;t<p;t++)b[t]&&(h=m[t],h<n||h>k||h===l)&&(b[t]=0)}else{var e=new Uint8Array(p);for(t=0;t<p;t++)e[t]=b[t];for(f=0;f<q;f++)if(m=a[f],n=null===r?null:r[2*f],k=null===r?null:r[2*f+1],l=null===c?null:parseFloat(c[f]),null===n||null===k)for(t=0;t<p;t++)e[t]&&(h=m[t],
h!==l&&(e=0));else if(null===l)for(t=0;t<p;t++)e[t]&&(h=m[t],h<=n&&h<=k&&(e=0));else for(t=0;t<p;t++)e[t]&&(h=m[t],h<=n&&h<=k&&h!==l&&(e=0));for(t=0;t<p;t++)b[t]&&e[t]&&(b[t]=0)}return v}},calculateStatisticsHistograms:function(G,w){var v=this._clonePixelBlock(G),r=v.pixelType,f=v.pixels,c=v.mask,a=f.length,b,p,q=[],t;for(b=0;b<a;b++){var m={min:-.5,max:255.5,size:256,counts:new Uint32Array(256)};var n=m.counts;var k=f[b];if("U8"===r)if(c)for(p=0;p<v.width*v.height;p++)c[p]&&n[k[p]]++;else for(p=
0;p<v.width*v.height;p++)n[k[p]]++;else{var l=v.statistics[b].minValue;var h=v.statistics[b].maxValue;m.min=l;m.max=h;h=(h-l)/256;var e=new Uint32Array(257);if(c)for(p=0;p<v.width*v.height;p++)c[p]&&e[Math.floor((k[p]-l)/h)]++;else for(p=0;p<v.width*v.height;p++)e[Math.floor((k[p]-l)/h)]++;for(p=0;255>p;p++)n[p]=e[p];n[255]=e[255]+e[256]}q.push(m);l=v.statistics[b].minValue;h=v.statistics[b].maxValue;for(p=e=t=k=0;p<m.size;p++)k+=n[p],t+=p*n[p];t/=k;for(p=0;p<m.size;p++)e+=n[p]*Math.pow(p-t,2);n=
Math.sqrt(e/(k-1));p=(t+.5)*(m.max-m.min)/m.size+m.min;m=n*(m.max-m.min)/m.size;v.statistics[b]={min:l,minValue:l,max:h,maxValue:h,mean:p,stddev:m}}v.histograms=q;return v},buildIndexedColormap:function(G,w){if(!G)return null;var v=0;0>G[0][0]&&(v=G[0][0]);var r=Math.max(256,G[G.length-1][0]-v);if(65536<r)return null;var f=new Uint8Array(4*r),c=[],a,b=0,p=5===G[0].length;if(w)for(c=G[b],a=c[0]-v;a<r;a++)f[4*a]=c[1],f[4*a+1]=c[2],f[4*a+2]=c[3],f[4*a+3]=p?c[4]:255,a===c[0]-v&&(c=b===G.length-1?c:G[++b]);
else for(a=0;a<G.length;a++)c=G[a],b=4*(c[0]-v),f[b]=c[1],f[b+1]=c[2],f[b+2]=c[3],f[b+3]=p?c[4]:255;return{indexedColormap:f,offset:v,alphaSpecified:p}},colorize:function(G,w){if(null!==G&&null!==G.pixels){var v=this._clonePixelBlock(G),r=v.pixels,f=v.width*v.height,c=v.mask,a=w.indexedColormap,b=w.indexedColormapOffset,p=a&&a.length-1,q=w.indexed2DColormap,t=w.alphaSpecified;if(3<=r.length)throw"colormap only works on single band image";var m=r[0],n=new Uint8Array(m.length),k=new Uint8Array(m.length),
l=new Uint8Array(m.length),h=0;if(a)if(c)for(r=0;r<f;r++)c[r]&&(h=4*(m[r]-b),h<b||h>p?c[r]=0:(n[r]=a[h],k[r]=a[h+1],l[r]=a[h+2],c[r]=a[h+3]));else{c=new Uint8Array(f);for(r=0;r<f;r++)h=4*(m[r]-b),h<b||h>p?c[r]=0:(n[r]=a[h],k[r]=a[h+1],l[r]=a[h+2],c[r]=a[h+3]);v.mask=c}else if(c)for(r=0;r<f;r++)c[r]&&(a=q[m[r]],n[r]=a[0],k[r]=a[1],l[r]=a[2],c[r]=a[3]);else{c=new Uint8Array(f);for(r=0;r<f;r++)a=q[m[r]],n[r]=a[0],k[r]=a[1],l[r]=a[2],c[r]=a[3];v.mask=c}v.pixels=[n,k,l];v.statistics=null;v.pixelType="U8";
v.maskIsAlpha=t;return v}},convolute:function(G,w){var v=this._clonePixelBlock(G),r=v.pixels,f=v.width,c=v.height,a=f*c,b=r.length,p,q,t,m,n,k=[],l=[],h=w.normalizedKernel,e=w.kernelRows,d=w.kernelCols;for(p=0;p<b;p++){var g=r[p];var u=new Float32Array(a);u.set(g);for(m=1;m<c-1;m++){var x=m*f;for(n=1;n<f-1;n++){for(q=l=0;q<e;q++)for(t=0;t<d;t++)l+=g[x+n+(q-1)*f+t-1]*h[q*d+t];u[x+n]=l}}k.push(u)}v.pixels=k;return v},contrastBrightnessStretch:function(G,w){if(null!==G&&null!==G.pixels){var v=this._clonePixelBlock(G),
r=v.pixels,f=v.mask,c=v.width*v.height,a=r.length;var b=w&&w.contrastOffset;var p=w&&w.brightnessOffset;if("U8"!==v.pixelType)throw"the contrast and brightness function only supports 8 bit unsigned integer data";var q=this._createContrastBrightnessLUT(b,p);if(null==f)for(p=0;p<c;p++)for(b=0;b<a;b++)r[b][p]=q[r[b][p]];else for(p=0;p<c;p++)if(f[p])for(b=0;b<a;b++)r[b][p]=q[r[b][p]];v.pixelType="U8";return v}},isNull:function(G,w){if(null!==G&&null!==G.pixels){var v=this._clonePixelBlock(G),r=v.mask,
f=v.pixels[0],c=f.length,a;if(r){for(a=0;a<c;a++)f[a]=r[a]?0:1;v.mask=null}else if(f.fill)f.fill(0);else for(a=0;a<c;a++)f[a]=0;return v}},setNull:function(G){if(null!==w&&null!==w.pixels){var w=this._clonePixelBlock(G);G=w.mask;var v=w.pixels[0],r=v.length,f;G=G||new Uint8Array(r);for(f=0;f<r;f++)G[f]=v[f]?0:1;w.mask=G;return w}},local:function(G,w){if(!w)return G[0];var v=w.rasterCountNeeded,r=w.functor,f=this._clonePixelBlock(G[0]);if(null!==f&&null!==f.pixels){var c=f.width*f.height,a,b=(a=G[1])&&
a.pixels[0],p=a&&a.mask,q=f.mask,t=f.pixels[0];if(2===v)if(!q&&p)q=p;else if(q&&p)for(a=0;a<c;a++)q[a]=q[a]&&p[a]?1:0;f.mask=q;if(1===v)if(null==q)for(a=0;a<c;a++)t[a]=r(t[a]);else for(a=0;a<c;a++)q[a]&&(t[a]=r(t[a]));else if(2===v)if(null==q)for(a=0;a<c;a++)t[a]=r(t[a],b[a]);else for(a=0;a<c;a++)q[a]&&(t[a]=r(t[a],b[a]));f.mask=q;f.calculateStatistics();return f}},remapColor:function(G,w){var v=this._clonePixelBlock(G),r=v.width*v.height,f=w.length,c=Math.floor(f/2),a=w[Math.floor(c)],b=w[0].value,
p=w[w.length-1].value,q=v.pixels[0],t,m,n=!1,k=new Uint8Array(r),l=new Uint8Array(r),h=new Uint8Array(r),e=v.mask,d=4===w[0].mappedColor.length;e&&0!==e.length||(e=new Uint8Array(r),e.fill(d?255:1),v.mask=e);for(m=0;m<r;m++)if(e[m]){var g=q[m];if(g<b||g>p)k[m]=l[m]=h[m]=e[m]=0;else{n=!1;var u=c;var x=a;var y=0;for(t=f-1;1<t-y;){if(g===x.value){n=!0;break}g>x.value?y=u:t=u;u=Math.floor((y+t)/2);x=w[Math.floor(u)]}n||(x=g===w[t].value?w[t]:w[y]);k[m]=x.mappedColor[0];l[m]=x.mappedColor[1];h[m]=x.mappedColor[2];
e[m]=x.mappedColor[3]}}v.pixels=[k,l,h];v.mask=e;v.pixelType="u8";v.maskIsAlpha=d;return v},_clonePixelBlock:function(G){if(G.clone)return G.clone();var w=K.clone(G),v;if(G.pixels&&G.pixels[0]&&0<G.pixels[0].length&&!(w.pixels&&w.pixels[0]&&0<w.pixels[0].length)){w.pixels=[];var r=G.pixels.length;for(v=0;v<r;v++)w.pixels[v]=new G.pixels[v].constructor(G.pixels[v])}if(G.statistics)for(w.statistics=[],r=G.statistics.length,v=0;v<r;v++)w.statistics[v]=K.clone(G.statistics[v]);G.mask&&(w.mask=new Uint8Array(G.mask));
return w},_createContrastBrightnessLUT:function(G,w){if(this._contrastCache&&this._contrastCache.contrastOffset===G&&this._contrastCache.brightnessOffset===w)return this._contrastCache.lut;var v=Math.min(Math.max(G,-100),100),r=Math.min(Math.max(w,-100),100),f,c=new Uint8Array(256);for(f=0;256>f;f++){if(0<v&&100>v)var a=(200*f-25500+510*r)/(2*(100-v))+128;else 0>=v&&-100<v?a=(200*f-25500+510*r)*(100+v)/2E4+128:100===v?(a=200*f-25500+256*(100-v)+510*r,a=0<a?255:0):-100===v&&(a=128);c[f]=255<a?255:
0>a?0:a}this._contrastCache={contrastOffset:G,brightnessOffset:w,lut:c};return c}}})},"esri/layers/rasterLib/function/CompositeBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(K,G,w,v,r,f){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.CompositeBandFunction",functionName:"CompositeBand",supportWebGL:!0,support2D:!0,constructor:function(c){this.functionArguments=this.mixinIgnoreCase({rasters:null},
c)},bind:function(c){c=this.getSourceRasterInfo(c);if(!c.rasters)return Error("The rasters input to composite band function is invalid.");var a=[],b=[],p=c.rasters.length,q;if(c.rasters[0].statistics)for(q=0;q<p;q++)a.push(c.rasters[q].statistics[0]);if(c.rasters[0].histograms)for(q=0;q<p;q++)b.push(c.rasters[q].histograms[0]);this.rasterInfo=G.mixin(c.rasters[0],{bandCount:p,pixelType:this._calculatePixelType(this.pixelType,c.rasters[0].pixelType),statistics:a,histograms:b});return!0},read2D:function(c){c=
c.rasters;if(null!=c&&0!==c.length){var a=this._clonePixelData(c[0]),b=a.pixelBlock,p=[],q=[];for(t=0;t<c.length;t++)p.push(c[t].pixelBlock.pixels[0]),q.push(c[t].pixelBlock.statistics[0]);b.pixels=p;b.stackedStatistics=q;b.planes=c.length;var t;q=b.width*b.height;for(t=0;t<c.length;t++)if(b=c[t].pixelBlock.mask,m&&b)for(p=0;p<q;p++)m[p]&=b[p];else var m=m||b;a.maks=m;return a}},readGL:function(c){this._performance.start();this._initializeProgram({fragment:r.compositeBand,fragmentName:"CompositeBand"});
var a=c.rasters;if(null!=a&&0!==a.length){a=a.length;var b,p=this.bindFrameBuffer();for(b=0;b<a;b++){var q=this._setupTextureData(c.rasters[b],{notOriginal:0<b});var t=0<b?b.toString():"";this._bindTexture(q.texture,"u_image"+t)}this._setUniforms({u_rasterCount:a});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:q.extent,texture:p.texture}}}})})},"esri/layers/rasterLib/function/ContrastBrightnessFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(K,G,w,v,r,f,c){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.ContrastBrightnessFunction",renderTexture:!0,functionName:"ContrastBrightness",supportWebGL:!0,support2D:!0,pixelType:"U8",constructor:function(a){this.functionArguments=this.mixinIgnoreCase({contrastOffset:0,brightnessOffset:0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to contrast and brightness function is invalid.");this.rasterInfo=G.mixin(a.raster,
{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){a=a.raster;if(null!==a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels){var b=c.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.functionArguments.contrastOffset,brightnessOffset:this.functionArguments.brightnessOffset});"Unknown"!==
this.pixelType&&(b.pixelType=this.pixelType,b.pixels=b.pixels.map(G.hitch(this,function(p){return this._clampBand(p,b.pixelType)})));return{extent:a.extent,pixelBlock:b}}},readGL:function(a){return this._cbGL(a.raster)},_cbGL:function(a){this._performance.start();this._initializeProgram({fragment:r.contrastBrightness,fragmentName:"ContrastBrightness"});a=this._setupTextureData(a);this._setUniforms({u_contrastOffset:Math.min(Math.max(this.functionArguments.contrastOffset,-100),100),u_brightnessOffset:Math.min(Math.max(this.functionArguments.brightnessOffset,
-100),100),u_scaleFactor:this.renderTexture?255:1});this._bindTexture(a.texture,"u_image");var b=this.bindFrameBuffer();this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:b.texture}}})})},"esri/layers/rasterLib/function/ConvolutionFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./convolutionKernel ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(K,G,w,v,r,f,c,a){return K([w,
c],{declaredClass:"esri.layers.rasterLib.function.ConvolutionFunction",functionName:"Convolution",supportWebGL:!0,support2D:!0,constructor:function(b){this.functionArguments=this.mixinIgnoreCase({columns:3,rows:3,type:0,kernel:null,raster:null},b)},bind:function(b){b=this.getSourceRasterInfo(b);if(!b.raster)return Error("The raster input to convolution function is invalid.");this.rasterInfo=G.mixin(b.raster,{bandCount:b.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,b.raster.pixelType),
statistics:b.raster.statistics,histograms:b.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(b){this._performance.start();b=b.raster;var p=this._analyzeKernel(),q=a.convolute(b.pixelBlock,{normalizedKernel:p.normalizedKernel,kernelCols:this.functionArguments.columns,kernelRows:this.functionArguments.rows});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&
(q.pixelType=this.pixelType);q.pixels=q.pixels.map(G.hitch(this,function(t){return this._clampBand(t,q.pixelType)}));return{extent:b.extent,pixelBlock:q}},readGL:function(b){this._performance.start();this._initializeProgram({fragment:f.convolution,fragmentName:"Convolution"});var p=this._setupTextureData(b.raster),q=this.bindFrameBuffer(),t=this.gl,m=t.drawingBufferWidth;t=t.drawingBufferHeight;var n=this.functionArguments.kernel;this._setUniforms({u_resolution:b&&b.raster&&b.raster.pixelBlock?[1/
b.raster.pixelBlock.width,1/b.raster.pixelBlock.height]:[1/m,1/t],u_kernel:n,u_kernelSize:n.length});this._bindTexture(p.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:p.extent,texture:q.texture}},_analyzeKernel:function(){var b=this.functionArguments.kernel,p=b.reduce(function(m,n){return m+n});0!==p&&1!==p&&(b=b.map(function(m){return m/p}));var q,t=[];for(q=0;q<b.length;q++)t.some(function(m){return m===b[q]})||t.push(b[q]);return{normalizedKernel:b,
distinctValues:t}},_analyzeKernelPattern:function(){var b=this.functionArguments.rows,p=this.functionArguments.columns,q=this.functionArguments.kernel,t=[],m,n;for(m=0;m<b;m++)t.push({weights:q.slice(m*p,(m+1)*p)});var k;for(m=1;m<b;m++){var l=t[m].weights;for(q=0;q<m;q++)if(k=t[q].weights){var h=l[0]/k[0];for(n=1;n<p;n++)l[n]/k[n]!==h&&(h=null);null!==h&&(t[m]={row:q,factor:h})}}return t}})})},"esri/layers/rasterLib/function/ExtractBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),
function(K,G,w,v,r,f){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.ExtractBandFunction",functionName:"ExtractBand",supportWebGL:!0,support2D:!0,constructor:function(c){this.functionArguments=this.mixinIgnoreCase({bandIDs:[],missingBandAction:0,raster:null},c)},bind:function(c){c=this.getSourceRasterInfo(c);if(!c.raster)return Error("The raster input to extract band function is invalid.");var a=[],b=c.raster.statistics,p=[],q=c.raster.histograms,t=this.functionArguments.bandIDs.length||
c.raster.bandCount;this.functionArguments.bandIDs.forEach(G.hitch(this,function(m){if(m>=t-1){if(1===this.functionArguments.missingBandAction)return Error("missing band "+m);m=t-1}if(0>m)return Error("missing band "+m);void 0!==b&&null!==b&&0<b.length&&a.push(b[m]);void 0!==q&&null!==q&&0<q.length&&p.push(q[m])}));this.rasterInfo=G.mixin(c.raster,{bandCount:t,pixelType:this._calculatePixelType(this.pixelType,c.raster.pixelType),statistics:a,histograms:p});return!0},read2D:function(c){c=this._clonePixelData(c.raster);
if(null!==c&&null!==c.pixelBlock&&null!==c.pixelBlock.pixels){this._performance.start();var a=c.pixelBlock,b=a.statistics,p=a.pixels,q=p.length;if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(0===this.functionArguments.bandIDs.length)return c;var t=[],m=[];this.functionArguments.bandIDs.forEach(function(n){if(n>=q-1){if(1===this.functionArguments.missingBandAction)throw"missing band "+n;n=q-1}if(0>n)throw"missing band "+n;t.push(p[n]);void 0!==b&&null!==b&&0<b.length&&
m.push(b[n])});a.pixels=t;a.statistics=m;a.planes=this.functionArguments.bandIDs.length;return c}},readGL:function(c){this._performance.start();if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(3<this.functionArguments.bandIDs.length)throw"this version does not support more than 3 bands yet";this._initializeProgram({fragment:r.extractBand,fragmentName:"ExtractBand"});var a=this.functionArguments.bandIDs;1===a.length&&(a=[a[0],a[0],a[0]]);this._bandIDs=a;this._alterBand=!(0===
this.functionArguments.bandIDs.length||0===a[0]&&1===a[1]&&2===a[2]);var b=!!(this._alterBand&&c.raster&&c.raster.texture);c=this._setupTextureData(c.raster,{bandIDs:a});var p=this.bindFrameBuffer();b?this._setUniforms({u_bandIDs:a,u_alterBand:this._alterBand}):this._setUniforms({u_bandIDs:a,u_alterBand:!1});this._bindTexture(c.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:c.extent,texture:p.texture}}})})},"esri/layers/rasterLib/function/HillshadeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../renderers/colorRampGenerator ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils ./rasterUtils".split(" "),
function(K,G,w,v,r,f,c,a,b,p){return K([w,a],{declaredClass:"esri.layers.rasterLib.function.HillshadeFunction",functionName:"Hillshade",supportWebGL:!0,support2D:!0,renderTexture:!0,constructor:function(q){this.functionArguments=this.mixinIgnoreCase({hillshadeType:0,altitude:45,azimuth:315,zFactor:1,slopeType:1,psPower:.664,psFactor:.024,colorRamp:null,raster:null},q);this._azimuths=[315,270,225,360,180,0];this._altitudes=[60,60,60,60,60,90];this._weights=[3,5,3,2,1,4];var t=this._weights.reduce(function(m,
n){return m+n});this._weights=this._weights.map(function(m){return m/t})},bind:function(q){q=this.getSourceRasterInfo(q);if(!q.raster)return Error("The raster input to hillshade function is invalid.");q.raster.statistics&&(this.srcStatistics=q.raster.statistics);this.rasterInfo=G.mixin(q.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:[{min:0,max:255}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=
"Generic";this._initializeColormap();return!0},read2D:function(q){this._performance.start();q=q.raster;q=b.hillshade(q,{altitude:this.functionArguments.altitude,azimuth:this.functionArguments.azimuth,zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,hillshadeType:this.functionArguments.hillshadeType,slopeType:this.functionArguments.slopeType,isGCS:q.extent.spatialReference.wkid&&null==r[q.extent.spatialReference.wkid]});this._addPerformanceMetric(this._performance.elapsed());
return q},readGL:function(q){this._performance.start();this._initializeProgram({fragment:c.hillshade,fragmentName:"Hillshade"});this.functionArguments.colorRamp&&this._indexedColormap&&!this._clrTexture&&(this._clrTexture=this._setupColormapTexture(this._indexedColormap));var t=this._setupTextureData(q.raster),m=this.bindFrameBuffer(),n=this.gl,k=n.drawingBufferWidth;n=n.drawingBufferHeight;var l=t.extent,h=(l.xmax-l.xmin)/k,e=(l.ymax-l.ymin)/n,d=this.functionArguments.altitude,g=this.functionArguments.azimuth,
u=this.functionArguments.zFactor;1===this.functionArguments.hillshadeType&&(u*=2);var x=u/(8*h),y=u/(8*e);.001<u&&l.spatialReference.wkid&&null==r[l.spatialReference.wkid]&&(x/=111E3,y/=111E3);var B=this.functionArguments.psPower,C=this.functionArguments.psFactor;3===this.functionArguments.slopeType&&((x=l.spatialReference.wkid&&null==r[l.spatialReference.wkid])?(x=111E3*h,y=111E3*e,x=(u+Math.pow(x,B)*C)/(8*x),y=(u+Math.pow(y,B)*C)/(8*y)):(x=(u+Math.pow(h,B)*C)/(8*h),y=(u+Math.pow(e,B)*C)/(8*e)));
var z=(90-d)*Math.PI/180;d=Math.cos(z);var D=(360-g+90)*Math.PI/180;g=Math.sin(z)*Math.cos(D);z=Math.sin(z)*Math.sin(D);B=Array(6);C=Array(6);l=Array(6);var E=this._weights,A;if(1===this.functionArguments.hillshadeType){var F=this._azimuths.length;for(A=0;A<F;A++)d=this._altitudes[A],g=this._azimuths[A],z=(90-d)*Math.PI/180,d=Math.cos(z),D=(360-g+90)*Math.PI/180,g=Math.sin(z)*Math.cos(D),z=Math.sin(z)*Math.sin(D),B[A]=d,C[A]=g,l[A]=z}else B[0]=d,C[0]=g,l[0]=z;B=B.map(function(H){return parseFloat(H)});
C=C.map(function(H){return parseFloat(H)});l=l.map(function(H){return parseFloat(H)});this._setUniforms({u_cellSize:[h,e],u_zfactor:u,u_xFactor:x,u_yFactor:y,u_sinZcosA:g,u_sinZsinA:z,u_cosZ:d,u_sinZcosAs:C,u_sinZsinAs:l,u_cosZs:B,u_weights:E,u_hillshadeType:this.functionArguments.hillshadeType,u_resolution:q&&q.raster&&q.raster.pixelBlock?[1/q.raster.pixelBlock.width,1/q.raster.pixelBlock.height]:[1/k,1/n],u_scaled:!this.renderTexture,u_applyColorramp:this._clrTexture?!0:!1,u_minValue:this.srcStatistics[0].min,
u_maxValue:this.srcStatistics[0].max,u_indexedColormapOffset:this._indexedColormapOffset||0,u_indexedColormapMaxIndex:this._indexedColormap?this._indexedColormap.length/4-1:0});this._clrTexture&&this._bindTexture(this._clrTexture,"u_image1");this._bindTexture(t.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:t.extent,texture:m.texture}},_initializeColormap:function(){this._indexedColormapOffset=0;var q=this._indexedColormap,t=this.functionArguments.colorRamp;
this.functionArguments.colormap?(this._alphaSpecified=(t=p.buildIndexedColormap(this.functionArguments.colormap))&&t.alphaSpecified,this._indexedColormap=t&&t.indexedColormap,this._indexedColormapOffset=t&&t.offset):t?(this._indexedColormap="multipart"===t.type?this.invert?v.createMultiPartColorRamp(this._invertColorRamp(t)):v.createMultiPartColorRamp(t):this.invert?v.createAlgorithmicColorRamp(this._invertColorRamp(t)):v.createAlgorithmicColorRamp(t),t.fromColor&&t.toColor&&"000"===t.fromColor.slice(0,
3).join("")&&"255255255"===t.toColor.slice(0,3).join("")&&(this._clrTexture=this._indexedColormap=null)):this.functionArguments.colormapName?"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=v.createRandomColorRamp()):this._clrTexture=this._indexedColormap=null;if(q&&this._indexedColormap){t=!0;for(var m=0;m<q.length;m++)if(q[m]!==this._indexedColormap[m]){t=!1;break}t||(this._clrTexture=null)}},_setupColormapTexture:function(q){var t=this._createTexture(),m=this.gl,
n=q.length/4,k=new Float32Array(q.length),l;for(l=0;l<q.length;l++)k[l]=q[l]/255;m.getExtension("OES_texture_float");m.texImage2D(m.TEXTURE_2D,0,m.RGBA,n,1,0,m.RGBA,m.FLOAT,k);return t}})})},"esri/layers/rasterLib/function/LocalFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(K,G,w,v,r,f,c){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.LocalFunction",functionName:"Local",
supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({operation:null,rasters:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);var b=0;a.raster?b=a.raster.bandCount:a.rasters&&(b=Math.max.apply(null,a.rasters.map(function(p){return p.bandCount})));if(0===b)return Error("The raster input to local function is invalid. It only takes single band input.");a=a.raster||a.rasters.filter(function(p){return!!p.extent})[0];this.rasterInfo=G.mixin(a,{bandCount:1,
pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){var b=[];b=a.raster?a.raster2?[a.raster,a.raster2]:[a.raster]:a.rasters;a=b.map(function(n){return n.pixelBlock});var p=this.functionArguments.operation;if(null===p)return b[0];this._performance.start();var q=this._getOperations(),t=q.operators[p-1];q=q.functors[p-1];
if(!this.functionArguments.rasters){if(1!==t)throw"no sufficient rasters, require "+t;}else if(999!==t&&this.functionArguments.rasters.length!==t)throw"number of rasters does not meet (short or exceed) the operation requirment, require "+t;var m=31===p?c.isNull(a[0]):50===p?c.setNull(a[0]):c.local(a,{rasterCountNeeded:t,functor:q});"Unknown"!==this.pixelType&&(m.pixelType=this.pixelType,m.pixels=m.pixels.map(G.hitch(this,function(n){return this._clampBand(n,m.pixelType)})));m.statistics||m.calculateStatistics();
return{extent:b[0].extent,pixelBlock:m}},readGL:function(a){this._performance.start();var b=this.functionArguments.operation,p=this._getWebGLOperations(),q=p.operators[b-1],t=r.local;p="result\x3d"+p.functors[b-1]+";";31!==b&&50!==b&&(p+="result \x3d vec4(result.rgb, a.a);");t=t.replace("vec4 replaceme"+q+";",p);p=this.gl.getParameter(this.gl.VERSION);var m="";if(-1<p.toLowerCase().indexOf("webgl 1.0")||-1<p.toLowerCase().indexOf("webgl 0."))m=this._getPolyfill(b);t=t.replace("vec4 polyfill;",m);
1<q&&(t=t.replace("gl_FragColor \x3d localOp1();","gl_FragColor \x3d localOp1();".replace("1",q.toString())));this._initializeProgram({fragment:t,fragmentName:"Local"});b=a.rasters;if(null!=b&&0!==b.length){b=b.length;p=this.bindFrameBuffer();for(q=0;q<b;q++){t=0<q?q.toString():"";var n=this._setupTextureData(a.rasters[q],{reCreate:!0});this._bindTexture(n.texture,"u_image"+t)}this._setUniforms({});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:n.extent,texture:p.texture}}},
_getOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:[function(a,b){return a+b},function(a,b){return a-b},function(a,b){return a*b},function(a){return Math.sqrt(a)},function(a,b){return Math.pow(a,b)},function(a){return Math.acos(a)},function(a){return Math.asin(a)},function(a){return Math.atan(a)},function(a){return Math.atanh(a)},
function(a){return Math.abs(a)},function(a,b){return a&b},function(a,b){return a<<b},function(a){return~a},function(a,b){return a|b},function(a,b){return a>>b},function(a,b){return a^b},function(a,b){return a&&b},function(a){return!a},function(a,b){return a||b},function(a,b){return a!=b},function(a){return Math.cos(a)},function(a,b){return Math.cosh(a)},function(a,b){return a/b},function(a,b){return a==b},function(a){return Math.exp(a)},function(a){return Math.pow(10,a)},function(a){return Math.pow(2,
a)},function(a,b){return a>b?1:0},function(a,b){return a>=b?1:0},function(a,b){return Math.floor(a)},function(a){return!a},function(a){return a},function(a,b){return a<b?1:0},function(a,b){return a<=b?1:0},function(a){return Math.log(a)},function(a,b){return Math.log10(a)},function(a,b){return Math.log2(a)},999,999,999,999,999,999,function(a,b){return a%b},function(a){return-a},function(a,b){return a!=b?1:0},999,function(a,b){return Math.floor(a)},function(a,b){return Math.ceil(a)},function(a,b){return b?
0:a},function(a,b){return Math.sin(a)},function(a,b){return Math.sinh(a)},function(a,b){return a*a},999,999,function(a){return Math.tan(a)},function(a){return Math.tanh(a)},999,function(a){return Math.acosh(a)},function(a){return Math.asinh(a)},function(a,b){return Math.atan2(a,b)},function(a,b){return a/b},function(a,b){return Math.floor(a/b)},999,999,999,999,999,999,999,999,999,999,function(a,b,p){return a?b:p}]}},_polyfill:{sinh:"vec4 sinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp - 1.0/halfexp;\n}",
asinh:"vec4 asinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp - 1.0/halfexp);\n}",cosh:"vec4 cosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp + 1.0/halfexp;\n}",acosh:"vec4 acosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp + 1.0/halfexp);\n}",tanh:"vec4 tanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx - 1.0/expx)/(expx + 1.0/expx);\n}",atanh:"vec4 atanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx + 1.0/expx)/(expx - 1.0/expx);\n}"},_getPolyfill:function(a){var b=
"";switch(a){case 9:b=this._polyfill.atanh;break;case 22:b=this._polyfill.cosh;break;case 52:b=this._polyfill.sinh;break;case 57:b=this._polyfill.tanh;break;case 59:b=this._polyfill.acosh;break;case 60:b=this._polyfill.asinh}return b},_getWebGLOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:["(a + b)","(a - b)",
"(a * b)","sqrt(a)","pow(a, b)","acos(a)","asin(a)","atan(a)","atanh(a)","abs(a)","a","a","a","a","a","a","(a.r\x3d\x3d0.0 || b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","a.r\x3d\x3d0.0?vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","(a.r\x3d\x3d0.0 \x26\x26 b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","(a.r\x3d\x3d0.0 ^^ b.r\x3d\x3d0.0) ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","cos(a)","cosh(a)","a / b","a.r \x3d\x3d b.r? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
"exp(a)","pow(10.0, a)","pow(2.0, a)","a.r \x3e b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3e\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","floor(a)","a.a \x3d\x3d 0.0? vec4(1.0,1.0,1.0,1.0) : vec4(0.0,0.0,0.0,1.0)","a","a.r \x3c b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3c\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","log(a)","log2(a) / log2(10.0)","log2(a)",999,999,999,999,999,999,"mod(a, b)","-a","a.r !\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
999,"floor(a)","ceil(a)","a.r !\x3d 0.0 ? vec4(0.0,0.0,0.0,0.0) : a","sin(a)","sinh(a)","a * a",999,999,"tan(a)","tanh(a)",999,"acosh(a)","asinh(a)","atan(a, b)","a / b","floor(a / b)",999,999,999,999,999,999,999,999,999,999,"a.r!\x3d0 ? b : c"]}}})})},"esri/layers/rasterLib/function/MaskFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(K,G,w,v,r,f,c){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.MaskFunction",
functionName:"Mask",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({includedRanges:null,noDataInterpretation:0,noDataValues:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to mask function is invalid.");this.rasterInfo=G.mixin(a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,a.raster.pixelType),statistics:a.raster.statistics,histograms:a.raster.histograms});
return!0},read2D:function(a){this._performance.start();a=a.raster;var b=c.mask(a.pixelBlock,{includedRanges:this.functionArguments.includedRanges,noDataInterpretation:this.functionArguments.noDataInterpretation,noDataValues:this.functionArguments.noDataValues});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(b.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:b}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:r.mask,fragmentName:"Mask"});
a=this._setupTextureData(a.raster);var b=this.bindFrameBuffer(),p=this.functionArguments.includedRanges,q=this.functionArguments.noDataValues?this.functionArguments.noDataValues.map(function(t){return parseFloat(t,10)}):null;this._setUniforms({u_includedRanges:p,u_includedRanges_specified:p?!0:!1,u_noDataValues:q,u_noDataValues_specified:q?!0:!1,u_noDataInterpretation:this.functionArguments.noDataInterpretation,u_bandCount:Math.min(this.sourceRasterInfo.raster.bandCount,3)});this._bindTexture(a.texture,
"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:b.texture}}})})},"esri/layers/rasterLib/function/NDVIFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),function(K,G,w,v,r,f,c){return K([w,f],{declaredClass:"esri.layers.rasterLib.function.NDVIFunction",functionName:"NDVI",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=
this.mixinIgnoreCase({visibleBandID:1,infraredBandID:2,scaled:!0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!(a.raster&&1<a.raster.bandCount))return Error("The raster input to ndvi function is invalid. It requires more than 1 band.");this.rasterInfo=G.mixin(a.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,this.scaled?"U8":"F32"),statistics:this.scaled?[{min:0,max:200}]:[{min:-1,max:1}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||
{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var b=c.calculate(a.pixelBlock,{bandIndexes:[this.functionArguments.infraredBandID+1,this.functionArguments.visibleBandID+1].join(" "),method:1}),p;if(this.functionArguments.scaled){var q=b.pixels[0];var t=b.mask;var m=q.length;var n=new Uint8Array(m);if(null==t)for(p=0;p<m;p++)n[p]=100*q[p]+100&255;else for(p=0;p<m;p++)t[p]&&(n[p]=100*q[p]+100&255);b.pixels[0]=n;b.pixelType="U8"}this._addPerformanceMetric(this._performance.elapsed());
"Unknown"!==this.pixelType&&(b.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:b}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:r.ndvi,fragmentName:"NDVI"});var b=this.functionArguments.visibleBandID,p=this.functionArguments.infraredBandID,q=this.functionArguments.scaled||!1;this._alterBand=2<Math.max(p,b)?!0:!1;a=this._setupTextureData(a.raster,{bandIDs:this._alterBand?{bandIDs:[p,b,p]}:null});var t=this.bindFrameBuffer();this._alterBand?this._setUniforms({u_bandId_nir:0,
u_bandId_red:1,u_scaled:q}):this._setUniforms({u_bandId_nir:p,u_bandId_red:b,u_scaled:q});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:t.texture}}})})},"esri/layers/rasterLib/function/SlopeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),function(K,G,w,v,r,f,
c,a){return K([w,c],{declaredClass:"esri.layers.rasterLib.function.SlopeFunction",functionName:"Slope",supportWebGL:!0,support2D:!0,constructor:function(b){this.functionArguments=this.mixinIgnoreCase({zFactor:1,slopeType:1,psPower:.664,psFactor:.024,raster:null},b)},bind:function(b){b=this.getSourceRasterInfo(b);if(!b.raster)return Error("The raster input to slope function is invalid.");this.rasterInfo=G.mixin(b.raster,{bandCount:1,pixelType:this._calculatePixelType(this.outputPixelType,"F32"),statistics:1===
this.slopeType||3===this.slopeType?[{min:0,max:90}]:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(b){this._performance.start();b=b.raster;b=a.slope(b,{zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,slopeType:this.functionArguments.slopeType,isGCS:b.extent.spatialReference.wkid&&null==v[b.extent.spatialReference.wkid]});
this._addPerformanceMetric(this._performance.elapsed());return b},readGL:function(b){this._performance.start();this._initializeProgram({fragment:f.slope,fragmentName:"Slope"});var p=this._setupTextureData(b.raster),q=this.bindFrameBuffer(),t=this.gl,m=t.drawingBufferWidth;t=t.drawingBufferHeight;var n=p.extent;this._setUniforms({u_resolution:b&&b.raster&&b.raster.pixelBlock?[1/b.raster.pixelBlock.width,1/b.raster.pixelBlock.height]:[1/m,1/t],u_cellSize:[(n.xmax-n.xmin)/m,(n.ymax-n.ymin)/t],u_zfactor:this.functionArguments.zFactor});
this._bindTexture(p.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:p.extent,texture:q.texture}}})})},"esri/layers/rasterLib/function/RemapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(K,G,w,v,r,f,c){return K([v,f],{declaredClass:"esri.layers.rasterLib.function.RemapFunction",functionName:"Remap",
pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({inputRanges:null,outputValues:null,outputColors:null,colorBreaks:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input is not available.");var b=!(!this.functionArguments.outputColors&&!this.functionArguments.colorBreaks);this.rasterInfo=G.mixin(a.raster,{bandCount:b?3:1,pixelType:this._calculatePixelType(this.pixelType,
"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=b?"Processed":"Thematic";return!0},read2D:function(a){return this._remap(a.raster)},readGL:function(a){return this._remapGL(a.raster)},_remap:function(a){this._performance.start();var b=c.remapColor(a.pixelBlock,this.functionArguments.colorBreaks);this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:b}},_remapGL:function(a){this._performance.start();
this._initializeProgram({fragment:r.remap,fragmentName:"Remap"});var b=new Uint8Array(64),p=this.functionArguments.colorBreaks;p.forEach(function(n,k){b[4*k]=n.mappedColor[0];b[4*k+1]=n.mappedColor[1];b[4*k+2]=n.mappedColor[2];b[4*k+3]=1>=n.mappedColor[3]?255*n.mappedColor[3]:n.mappedColor[3]});var q=p[p.length-1],t=q.mappedColor;b[60]=t[0];b[61]=t[1];b[62]=t[2];b[63]=1>=t[3]?255*t[3]:t[3];var m=new Float32Array(16);p.forEach(function(n,k){m[k]=n.value});m[15]=q.value;this._clrTexture||(this._clrTexture=
this._setupColormapTexture(b));p=this._clrTexture;q=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:0,u_indexedColormapMaxIndex:b.length/4-1,u_breaks:m});this._bindTexture(p,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:q.texture}},_setupColormapTexture:function(a){var b=this._createTexture(),p=a.length/4,q=new Float32Array(a.length),t=this.renderTexture?255:1,m,n=this.gl;for(m=0;m<a.length;m++)q[m]=a[m]/
t;n.getExtension("OES_texture_float");n.texImage2D(n.TEXTURE_2D,0,n.RGBA,p,1,0,n.RGBA,n.FLOAT,q);return b}})})},"esri/layers/rasterLib/function/IdentityFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(K,G,w,v,r){return K([v,r],{declaredClass:"esri.layers.rasterLib.function.IdentityFunction",functionName:"Identity",supportWebGL:!0,support2D:!0,constructor:function(f){this.functionArguments={raster:null}},
bind:function(f){f=this.getSourceRasterInfo(f);if(!f.raster)return Error("The raster input to identity function is invalid.");this.rasterInfo=G.mixin(f.raster,{});return!0},read2D:function(f){return f.raster},readGL:function(f){this._initializeProgram({fragment:w.identity,fragmentName:"identity"});f=this._setupTextureData(f.raster);var c=this.bindFrameBuffer();this._bindTexture(f.texture,"u_image");this._drawGL();return{extent:f.extent,texture:c.texture}}})})},"esri/layers/rasterLib/function/ResampleFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(K,G,w,v,r){return K([v,r],{declaredClass:"esri.layers.rasterLib.function.ResampleFunction",renderTexture:!0,resamplingOrigin:null,resamplingRatio:null,zFactor:1,functionName:"Resample",supportWebGL:!0,support2D:!1,constructor:function(f){this.functionArguments=this.mixinIgnoreCase({resamplingType:0},f)},bind:function(f){f=this.getSourceRasterInfo(f);if(!f.raster)return Error("The raster input to convolution function is invalid.");
this.rasterInfo=G.mixin(f.raster,{bandCount:f.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,f.raster.pixelType),statistics:f.raster.statistics,histograms:f.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};return!0},readGL:function(f){this._performance.start();this._initializeProgram({fragment:w.resample,fragmentName:"Resample"});var c=this._setupTextureData(f.raster),a=this.bindFrameBuffer(),b=this.gl,p=b.drawingBufferWidth;b=b.drawingBufferHeight;
var q=f.raster;void 0!==q.pixelBlock?(c=c||this._setupTextureData(q),f=q.pixelBlock.width,q=q.pixelBlock.height):(c=c||q,f=p,q=b);this._setUniforms({u_resamplingRatio:this.resamplingRatio||[f/p,q/b],u_anchor:this.resamplingOrigin||[0,1],u_resamplingType:this.functionArguments.resamplingType,u_resolution:[1/p,1/b]});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:c.extent,texture:a.texture}}})})},"esri/layers/rasterLib/renderer/rasterRendererHelper":function(){define("dojo/_base/declare dojo/_base/lang ../../PixelBlock ./RasterColormapRenderer ./RasterUniqueValueRenderer ./RasterRGBRenderer ./RasterStretchColorRampRenderer ./RasterClassBreaksRenderer ./RasterShadedReliefRenderer".split(" "),
function(K,G,w,v,r,f,c,a,b){var p=function(){function q(m){t[m.prototype.rendererName]=m}var t={};q(v);q(f);q(c);q(r);q(a);q(b);return t}();return{wellKnownRenderers:p,isSupported:function(q){if(!q)return!1;var t=!0;p[q.rendererName]||(t=!1);return t},create:function(q){if(!q)return null;if(q.rendererName){var t=q.rendererName;q=q.rendererArguments}else t="uniqueValue rasterStretch rasterShadedRelief rgb rasterColormap classBreaks".split(" ").indexOf(q.type),t="UniqueValue Stretch ShadedRelief RGB Colormap ClassBreaks".split(" ")[t],
"rasterStretch"===q.type&&q.bandIndex&&1<q.bandIndex.length&&(t="RGB");return(t=p[t])?new t(q):null},createDefaultRenderer:function(q){if(q&&q.raster){var t=q.raster.rasterInfo,m=q.raster.dataType;if(t){var n=q.raster.rasterFunction,k=["Stretch","Colormap","ContrastAndBrightness"];if(n&&"U8"===t.pixelType&&-1<k.indexOf(n.functionName))n.renderTexture=!0;else if("Processed"!==m||!(q.useWebGL&&n&&n.renderTexture||!q.useWebGL&&"U8"===t.pixelType)){n&&(t=n.rasterInfo);n=t.bandCount;var l=t.colormap,h=
t.vat;k=t.histograms;k&&0===k.length&&(k=null);var e=t.statistics&&t.statistics.map(function(u){return[u.min,u.max,u.mean,u.stddev]});if(1===n&&l&&0<l.length)var d=this._getDefaultColormapRenderer(h,l);else if(1===n&&h&&h.features&&0<h.features.length)d=new r({});else{l=0;h=!1;m||!q.raster||!q.raster.tileInfo||void 0!==q.raster.tileInfo.tileType&&"Map"!==q.raster.tileInfo.tileType?"U8"===t.pixelType&&"Processed"===m?(l=5,e=e||[[0,255,0,0],[0,255,0,0],[0,255,0,0]],h=!1):"U8"===t.pixelType||"Elevation"===
m?(l=5,h=e?!1:!0):"Scientific"===m||"StdTime"===m?(l=5,h=e?!1:!0,d=this._getDefaultScientificColorRamp()):k&&0<k.length?(l=6,h=!1):e?(l=5,h=!1):(l=6,h=!0):(e=[[0,255,0,0],[0,255,0,0],[0,255,0,0]],l=5,h=!1);e||(l=5,h=!0);var g;3<=n&&!(q.bandIds||q.raster&&q.raster.imageServiceParams&&q.raster.imageServiceParams.bandIds)&&(g=this.getDefaultBandCombination(t));g&&e&&(e=g.map(function(u){return e[u]}));q={stretchType:l,min:0,max:255,dra:h,minPercent:.25,maxPercent:.25,useGamma:!1,computeGamma:!1,statistics:e,
histograms:k,numberOfStandardDeviations:2.5,bandIndex:g};1===n||g&&1===g.length?(d&&(q.colorRamp=d,q.invert=!1),d=new c(q)):d=new f(q)}return d}}}},getDefaultBandCombination:function(q){var t=q.bandCount;if(1===t)return null;if(2===t)return[0];var m=(q=q.keyProperties)&&q.ChangeAnalysisParameters&&q.ChangeAnalysisParameters.AnalysisType;if(m&&("ccdc"===m.toLowerCase()||"landtrendr"===m.toLowerCase()))return[0];q=q&&q.BandProperties;var n;if(q&&q.length===t){var k=this.getWellKnownBandIndexes(q);q=
k.red;m=k.green;var l=k.blue;k=k.nir;null!=q&&null!=m&&null!=l?n=[q,m,l]:null!=k&&null!=q&&null!=m&&(n=[k,q,m])}!n&&3<=t&&(n=[0,1,2]);return n},getWellKnownBandIndexes:function(q){for(var t={},m=0;m<q.length;m++){var n=q[m],k=n.BandName&&n.BandName.toLowerCase();"red"===k?t.red=m:"green"===k?t.green=m:"blue"===k?t.blue=m:"nearinfrared"===k||"nearinfrared_1"===k||"nir"===k?t.nir=m:n.WavelengthMax&&n.WavelengthMin&&(k=n.WavelengthMin,n=n.WavelengthMax,null==t.blue&&410<=k&&480>=k&&480<=n&&540>=n?t.blue=
m:null==t.green&&490<=k&&560>=k&&560<=n&&610>=n?t.green=m:null==t.red&&595<=k&&670>=k&&660<=n&&730>=n?t.red=m:null==t.nir&&700<=k&&860>=k&&800<=n&&950>=n&&(t.nir=m))}return t},_getDefaultColormapRenderer:function(q,t){if(t||t.length){var m=[],n=this._ratContainsColormap(q);if(n)var k=this._getRATValueClassNameMap(q);t.forEach(function(l){var h=k?k[l[0]]:l[0];m.push({color:[l[1],l[2],l[3]],value:l[0],label:n?null!=h?h:"":l[0]})});return new v({colormapInfos:m})}},_ratContainsColormap:function(q){if(!q||
!q.fields)return!1;var t,m,n;return q.fields.some(function(k){k&&k.name&&(k=k.name.toLowerCase(),"red"===k&&(t=!0),"green"===k&&(m=!0),"blue"===k&&(n=!0));return t&&m&&n})},_getRATValueClassNameMap:function(q){if(!q||!q.fields)return null;var t={},m,n;q.fields.forEach(function(k){if("classname"===k.name.toLowerCase()||"class_name"===k.name.toLowerCase())m=k.name;"value"===k.name.toLowerCase()&&(n=k.name)});q.features.forEach(function(k){k=k.attributes;t[k[n]]=m?k[m]:k[n]});return t},_getDefaultScientificColorRamp:function(){return{type:"multipart",
colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}].map(function(q){return{fromColor:q.toColor,toColor:q.fromColor}}).reverse()}}}})},"esri/layers/rasterLib/renderer/RasterColormapRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction"],function(K,G,w,v){return K([w],{declaredClass:"esri.layers.rasterLib.renderer.RasterColormapRenderer",rendererName:"Colormap",
renderTexture:!0,constructor:function(r){r&&r.colormapInfos&&(r.colormap=r.colormapInfos.map(function(f){return[f.value].concat(f.color)}));this._function=new v(r);this._function.outputPixelType="U8";this._function.renderTexture=!0},draw2D:function(r){this._updateColormapParameters();r=this._clonePixelData(r);return r=this._function._colorize(r)},drawGL:function(r){this._updateColormapParameters();this._function._colorizeGL(r)},toJson:function(){var r=this._function.toJson().rasterFunctionArguments;
return{rendererName:this.rendererName,rendererArguments:r}},toCommonRendererJson:function(){return{type:"rasterColormap",colormapInfos:this.colormapInfos||this.colormap.map(function(r){return{value:r[0],color:r.slice(1),label:r[0]}})}},_updateColormapParameters:function(){var r=this._function.functionArguments;r.colormap=this.colormap;r.colormapName=this.colormapName;r.colorRamp=this.colorRamp;r.colorRampName=this.colorRampName}})})},"esri/layers/rasterLib/renderer/RasterRenderer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../geometry/Extent","../../PixelBlock"],function(K,G,w,v){return K(null,{declaredClass:"esri.layers.rasterLib.renderer.RasterRenderer",raster:null,constructor:function(r){r=r||{};this.raster=r.raster||r.Raster||this.raster;this.draw=G.hitch(this,this.draw);this.bind=G.hitch(this,this.bind);r=G.clone(r);Object.keys(r).forEach(function(f){null==r[f]&&delete r[f]});G.mixin(this,r)},bind:function(r){if(!r)throw"failed to bind without options";var f=r;r.layer&&(r=r.layer,f={id:r.id,
rawRasterInfo:r.raster.rasterInfo,glSetting:r._glSetting,xformSetting:r.tileManager&&r.tileManager.xformSetting,useWebGL:r.useWebGL,resampling:r.tileMode&&r.tileManager&&r.tileManager.xformSetting.requireProjection&&!r._hasTilingEffects&&"Thematic"!==r.raster.dataType?1:0,tileMode:r.tileMode});this._rawRasterInfo=f.rawRasterInfo;this.useWebGL=f.useWebGL;this._function&&this._function.setProcessingContext(G.mixin({useProcessedData:!0},f));this._processingContext=f},hasTilingEffects:function(){},draw:function(r){return this.useWebGL?
this.drawGL(r):this.draw2D(r)},toJson:function(){},_clonePixelData:function(r){if(null==r)return r;var f={};r.extent&&(f.extent=new w(r.extent.xmin,r.extent.ymin,r.extent.xmax,r.extent.ymax,r.extent.spatialReference));r=r.processedPixelBlock||r.pixelBlock;if(null==r)return f;f.pixelBlock=r.clone?r.clone():v.prototype.clone(r);return f}})})},"esri/layers/rasterLib/renderer/RasterUniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction",
"../../../renderers/colorRampGenerator"],function(K,G,w,v,r){return K([w],{declaredClass:"esri.layers.rasterLib.renderer.RasterUniqueValueRenderer",rendererName:"UniqueValue",field:"",alias:"",uniqueValueInfos:null,constructor:function(f){f&&f.colormap&&(this.colormap=f.colormap,this._function=new v(f),this._function.outputPixelType="U8",this._function.renderTexture=!0)},bind:function(f){this.inherited(arguments);if(!this._function){var c=(this.raster&&this.raster.rasterInfo||this._rawRasterInfo).vat;
if(!c)throw"uv renderer requires data source to have raster attribute table";var a=this.attributeField||this.field1||this.field,b=this.infos||this.uniqueValueInfos;this.defaultColor=this.defaultColor||this.defaultSymbol&&this.defaultSymbol.color;var p=c.fields.filter(function(d){return"value"===d.name.toLowerCase()})[0];if(p)var q=p.name;a||((a=c.fields.filter(function(d){return-1<["classname","category"].indexOf(d.name.toLowerCase())})[0])||(a=c.fields.filter(function(d){return"esriFieldTypeString"===
d.type})[0]),this.alias=(this.field=a=a&&a.name||q)&&a.alias||q);var t=[],m;if(!b){b=[];var n=c.fields.filter(function(d){return"alpha"===d.name.toLowerCase()})[0];var k=c.fields.filter(function(d){return"red"===d.name.toLowerCase()})[0];var l=c.fields.filter(function(d){return"green"===d.name.toLowerCase()})[0];var h=c.fields.filter(function(d){return"blue"===d.name.toLowerCase()})[0];for(p=0;p<c.features.length;p++){var e=c.features[p].attributes;(m=b.some(function(d){d.value===e[a]}))||(n&&k&&
l&&h?b.push({value:e[a],alias:e[a],color:[e[k.name],e[l.name],e[h.name],e[n.name]]}):k&&l&&h?b.push({value:e[a],alias:e[a],color:[e[k.name],e[l.name],e[h.name]]}):b.push({value:e[a],alias:e[a]}))}if(!(k&&l&&h))for(m=r.createRandomColorRamp({size:b.length}),p=0;p<b.length;p++)b[p].color=m[p];this.uniqueValueInfos=b}if(b)b.forEach(function(d){t=t.concat(c.features.filter(function(g){return d.value==g.attributes[a]}).map(function(g){return[g.attributes[q]].concat(d.color||d.symbol&&d.symbol.color)}))}),
this.defaultColor&&c.features.filter(function(d){t.some(function(g){return g[0]===d.attributes[q]})||t.push([d.attributes[q]].concat(this.defaultColor))});else throw"missing uniqueValueInfos property";this._function=new v({colormap:t});this.colormap=t;this._function.outputPixelType="U8";this._function.renderTexture=!0;this._function.setProcessingContext(this._processingContext)}},draw2D:function(f){f=this._clonePixelData(f);return f=this._function._colorize(f)},drawGL:function(f){this._function._colorizeGL(f)},
toJson:function(f){var c={field:this.field,uniqueValueInfos:this.uniqueValueInfos,defaultColor:this.defaultColor};f&&(c.colormap=this.colormap);return{rendererName:this.rendererName,rendererArguments:c}},toCommonRendererJson:function(){var f=this.attributeField||this.field1||this.field,c=(this.infos||this.uniqueValueInfos).map(function(a){return{value:a.value,label:a.alias+"",symbol:{color:3===a.color.length?a.color.concat([255]):a.color,type:"esriSFS",style:"esriSFSSolid"}}});return{type:"uniqueValue",
field1:f,uniqueValueInfos:c}}})})},"esri/layers/rasterLib/renderer/RasterRGBRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/rasterUtils".split(" "),function(K,G,w,v,r,f){return K([w],{declaredClass:"esri.layers.rasterLib.renderer.RasterRGBRenderer",rendererName:"RGB",bandIndex:null,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,
maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(c){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);c=G.mixin({},c,{stretchType:this.stretchType});this._stretchFunction=new v(c);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this.bandIndex=c.bandIndex||c.BandIndex;this._function=new r(c);
this._function.functionArguments.raster=this._stretchFunction;this._function.renderTexture=!0},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},draw2D:function(c){this._updateStretchParameters();c=this._clonePixelData(c);if("U8"===c.pixelBlock.pixelType&&!this.contrastOffset&&!this.brightnessOffset)return c;this._stretchFunction._stretch(c);var a=c.pixelBlock,b=this.bandIndex,p=Math.max.apply(null,b);a&&a.pixels.length>p&&b&&(a.pixels=b.map(function(q){return a.pixels[q]}),
a.statistics&&(a.statistics=b.map(function(q){return a.statistics[q]})));if(this.contrastOffset||this.brightnessOffset)c.pixelBlock=f.contrastBrightnessStretch(c.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return c},drawGL:function(c){this._updateStretchParameters();c.pixelBlock&&(c=this._clonePixelData(c));var a=c.pixelBlock,b=this.bandIndex,p=Math.max.apply(null,b),q=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,
t=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,m,n;a&&a.pixels.length>p&&b&&(a.pixels=b.map(function(k){return a.pixels[k]}),a.statistics&&(a.statistics=b.map(function(k){return a.statistics[k]})),q&&0<q.length&&q.length!==b.length&&(m=b.map(function(k){return q[k]})),t&&0<t.length&&t.length!==b.length&&(n=b.map(function(k){return t[k]})));this._stretchFunction.functionArguments.statistics=m||q;this._stretchFunction.functionArguments.histograms=
n||t;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._function.renderTexture=!0,c=this._stretchFunction._stretchGL(c),this._function._cbGL(c)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(c))},toJson:function(){var c=this._stretchFunction.toJson().rasterFunctionArguments;c.bandIndex=this.bandIndex;c.contrastOffset=this.contrastOffset;c.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:c}},
toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:G.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:G.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},
_updateStretchParameters:function(){var c=this._stretchFunction.functionArguments;c.stretchType=this.stretchType;c.min=this.min;c.max=this.max;c.numberOfStandardDeviations=this.numberOfStandardDeviations;c.statistics=this.statistics;c.histograms=this.histograms;c.dra=this.dra;c.minPercent=this.minPercent;c.maxPercent=this.maxPercent;c.useGamma=this.useGamma;c.gamma=this.gamma;c.computeGamma=this.computeGamma;this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterStretchColorRampRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/ResampleFunction ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),
function(K,G,w,v,r,f,c,a){return K([w],{declaredClass:"esri.layers.rasterLib.renderer.RasterStretchColorRampRenderer",rendererName:"Stretch",bandIndex:[0],colorRamp:null,invert:!1,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(b){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);
b=G.mixin({},b,{stretchType:this.stretchType});Object.keys(b).forEach(function(p){null==b[p]&&delete b[p]});this._function=new f(b);this._stretchFunction=new r(b);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this._clrFunction=new c(b);this._clrFunction.functionArguments.raster=this._stretchFunction;this._clrFunction.renderTexture=!1;this._function.functionArguments.raster=this._clrFunction},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},
draw2D:function(b){this._updateStretchParameters();b=this._clonePixelData(b);if("U8"===b.pixelBlock.pixelType&&!(this.contrastOffset||this.brightnessOffset||this.colorRamp))return b;this._stretchFunction._stretch(b);var p=b.pixelBlock,q=this.bandIndex?this.bandIndex[0]:0;p&&1<p.pixels.length&&p.pixels.length>q&&(p.pixels=[p.pixels[q]],p.statistics&&(p.statistics=[p.statistics[q]]));this.colorRamp&&(b=this._clrFunction._colorize(b));if(this.contrastOffset||this.brightnessOffset)b.pixelBlock=a.contrastBrightnessStretch(b.pixelBlock,
{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return b},drawGL:function(b){this._updateStretchParameters();b.pixelBlock&&(b=this._clonePixelData(b));var p=b.pixelBlock,q=this.bandIndex?this.bandIndex[0]||0:0,t=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,m=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,n,k;p&&1<p.pixels.length&&
p.pixels.length>q&&(p.pixels=[p.pixels[q]],p.statistics&&(p.statistics=[p.statistics[q]]),t&&t.length>q&&(n=[t[q]]),m&&m.length>q&&(k=[m[q]]));this._stretchFunction.functionArguments.statistics=n||t;this._stretchFunction.functionArguments.histograms=k||m;p=!!this.colorRamp;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!1,this._function.renderTexture=!0,b=this._stretchFunction._stretchGL(b),p&&(b=this._clrFunction._colorizeGL(b)),
this._function._cbGL(b)):p?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!0,b=this._stretchFunction._stretchGL(b),this._clrFunction._colorizeGL(b)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(b))},toJson:function(){var b=this._stretchFunction.toJson().rasterFunctionArguments;b.colorRamp=this.colorRamp||"";this.invert&&(b.invert=!0);b.contrastOffset=this.contrastOffset;b.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,
rendererArguments:b}},toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp,min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:G.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,
gamma:G.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},_updateStretchParameters:function(){var b=this._stretchFunction.functionArguments;b.stretchType=this.stretchType;b.min=this.min;b.max=this.max;b.numberOfStandardDeviations=this.numberOfStandardDeviations;b.statistics=this.statistics;b.histograms=this.histograms;b.dra=this.dra;b.minPercent=this.minPercent;b.maxPercent=this.maxPercent;b.useGamma=this.useGamma;b.gamma=this.gamma;b.computeGamma=this.computeGamma;
this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction","../function/RemapFunction"],function(K,G,w,v,r){return K([w],{declaredClass:"esri.layers.rasterLib.renderer.RasterClassBreaksRenderer",rendererName:"ClassBreaks",renderTexture:!0,constructor:function(f){f=f||{};this._function=new r(f);this._function.outputPixelType="U8";var c=
f.classBreakInfos;f=f.minValue;null!=f&&c&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(f,c))},bind:function(f){this.inherited(arguments);this.isColormapFunction=!1;var c=this.raster&&this.raster.rasterInfo||this._rawRasterInfo,a=c&&c.vat;if(a&&"u8"===c.pixelType.toLowerCase()&&this.classBreakInfos){var b=this.field;if(c=a.fields.filter(function(k){return"value"===k.name.toLowerCase()})[0])var p=c.name;var q=a.features.sort(function(k,l){return parseFloat(k.attributes[b])-
parseFloat(l.attributes[b])})[0].attributes[b];this.isColormapFunction=!0;var t=[],m=this.field,n=this.classBreakInfos;n.forEach(function(k,l){a.features.forEach(function(h){var e=n[l-1]&&n[l-1].classMaxValue||q;h.attributes[m]<=k.classMaxValue&&(h.attributes[m]>e||h.attributes[m]===q)&&(e=k.symbol.color,t.some(function(d){return d[0]===h.attributes[p]})||t.push([h.attributes[p]].concat(e)))})});this._function=new v({colormap:t});this.colormap=t;this._function.outputPixelType="U8";this._function.renderTexture=
!0}this._function&&this._function.setProcessingContext(G.mixin({useProcessedData:!0},this._processingContext))},draw2D:function(f){if(this.isColormapFunction)return this._updateColormapParameters(),f=this._clonePixelData(f),f=this._function._colorize(f);this._updateRemapParameters();return this._function._remap(f)},drawGL:function(f){this.isColormapFunction?(this._updateColormapParameters(),this._function._colorizeGL(f)):(this._function.renderTexture=!0,this._updateRemapParameters(),this._function._remapGL(f))},
toJson:function(){var f=this._function.toJson().rasterFunctionArguments;return{rendererName:this.rendererName,rendererArguments:f}},toCommonRendererJson:function(){var f,c=this.classBreakInfos,a=this.colorBreaks;if(null==c&&a)for(c=[],f=0;f<a.length-1;f++)c.push({classMaxValue:a[f+1].value,symbol:{color:a[f].mappedColor,type:"esriSFS",style:"esriSFSSolid"},label:a[f].value+" - "+a[f+1].value});return{type:"classBreaks",field:"Value",minValue:null!=this.minValue?this.minValue:a[0].value,classBreakInfos:c}},
_updateRemapParameters:function(){var f=this.classBreakInfos,c=this.minValue;null!=c&&f&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(c,f))},_getSortedColorBreaks:function(f,c){var a=c.map(function(q){return{maxValue:q.classMaxValue,color:q.symbol.color}}).sort(function(q,t){return q.maxValue-t.maxValue}),b,p=[{value:f,mappedColor:a[0].color}];for(b=0;b<a.length;b++)p.push({value:a[b].maxValue,mappedColor:b===a.length-1?a[b].color:a[b+1].color});return p},_updateColormapParameters:function(){this._function.functionArguments.colormap=
this.colormap;this._function.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/HillshadeFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),function(K,G,w,v,r,f,c){return K([w],{declaredClass:"esri.layers.rasterLib.renderer.RasterShadedReliefRenderer",rendererName:"ShadedRelief",hillshadeType:null,azimuth:315,
altitude:45,zFactor:1,slopeType:null,psPower:.664,psFactor:.024,raster:null,constructor:function(a){this.hillshadeType="number"===typeof this.hillshadeType?this.hillshadeType:["traditional","multi-directional"].indexOf(this.hillshadeType);a&&a.scalingType&&(this.slopeType="adjusted"===a.scalingType?3:1);a&&a.pixelSizePower&&(this.psPower=a.pixelSizePower);a&&a.pixelSizeFactor&&(this.psFactor=a.pixelSizeFactor);a=G.mixin({},a,{hillshadeType:this.hillshadeType,psPower:this.psPower,psFactor:this.psFactor,
slopeType:this.slopeType});Object.keys(a).forEach(function(b){null==a[b]&&delete a[b]});this._function=new r(a);this._hillshadeFunction=new v(a);this._hillshadeFunction.outputPixelType="U8";this._hillshadeFunction.renderTexture=!1;this._function.functionArguments.raster=this._hillshadeFunction},hasTilingEffects:function(){return this._hillshadeFunction.hasTilingEffects()},draw2D:function(a){this._updateHillshadeParameters();a=this._clonePixelData(a);a=this._hillshadeFunction.read2D({raster:a});if(this.contrastOffset||
this.brightnessOffset)a.pixelBlock=c.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return a},drawGL:function(a){this._updateHillshadeParameters();this.contrastOffset||this.brightnessOffset?(this._hillshadeFunction.renderTexture=!1,this._function.renderTexture=!0,a=this._hillshadeFunction.readGL({raster:a}),this._function._cbGL(a)):(this._hillshadeFunction.renderTexture=!0,this._hillshadeFunction.readGL({raster:a}))},toJson:function(){var a=
this._hillshadeFunction.toJson().rasterFunctionArguments;a.colorRamp=this.colorRamp||"";this.invert&&(a.invert=!0);a.contrastOffset=this.contrastOffset;a.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:a}},toCommonRendererJson:function(){return{type:"rasterShadedRelief",hillshadeType:["traditional","multi-directional"][this.hillshadeType]||"traditional",azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:3===this.slopeType?"adjusted":
"none",pixelSizePower:this.psPower,pixelSizeFactor:this.psFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp}},_updateHillshadeParameters:function(){var a=this._hillshadeFunction.functionArguments;a.hillshadeType=this.hillshadeType;a.azimuth=this.azimuth;a.altitude=this.altitude;a.zFactor=this.zFactor;a.slopeType=this.slopeType;a.psPower=this.psPower;a.psFactor=this.psFactor}})})},"esri/layers/rasterLib/raster/rasterProjectionHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/sniff ../../../kernel ../../../WKIDUnitConversion ../../../geometry/Extent ../../../geometry/projection ../../../geometry/webMercatorUtils ../../../SpatialReference ../../../geometry/Point".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){K={requirePE:function(m,n){return!(m.equals(n)||m._canProject(n))},load:function(){var m=new w;if(!this._loadPromise)if(a.isSupported())this._loadPromise=a.load();else{var n=new w;n.reject("projection engine is not supported on this version of the browser, please try with a modern browser");this._loadPromise=n.promise}this._loadPromise.isFulfilled()?this._loadPromise.isResolved()?m.resolve():this._loadPromise.isRejected()&&m.resolve():(this._pendingdfds=this._pendingdfds||
[],this._pendingdfds.push(m),this._loadPromise.then(G.hitch(this,function(){this._pendingdfds.forEach(function(k){k.isFulfilled()||k.resolve()})}),G.hitch(this,function(){this._pendingdfds.forEach(function(k){k.isFulfilled()||k.reject()})})));return m.promise},computeError:function(m,n){return[Math.abs((m[0]+m[4]+m[4*n.rows]+m[4*n.rows+4])/4-m[2*n.rows+2]),Math.abs((m[1]+m[5]+m[4*n.rows+1]+m[4*n.rows+5])/4-m[2*n.rows+3])]},getDefaultDatumTransformationForDataset:function(m,n,k){if(!(n&&m.spatialReference&&
this.requirePE(m.spatialReference,n)&&a.isLoaded()))return null;m=new c(m.toJson());n=new p(n.toJson());return k?a.getTransformation(n,m.spatialReference,m):a.getTransformation(m.spatialReference,n,m)},project:function(m,n,k){if(!n||m.spatialReference.equals(n))return m;var l=a.isLoaded()?a:b;"esri.geometry.Extent"===m.declaredClass?m=new c(m.toJson()):"esri.geometry.Point"===m.declaredClass&&(m=new q(m.toJson()));n=new p(n.toJson());(m=l.project(m,n))&&"esri.geometry.Extent"===m.declaredClass?(m=
new c(m.toJson()),k&&(1E-5>Math.abs(m.xmin+180)&&1E-5>Math.abs(m.xmax-180)?(m.xmin=0,m.xmax=360):(0>m.xmin&&(m.xmin+=360,m.xmax+=360),0>m.xmax&&(m.xmax+=360)))):m&&"esri.geometry.Point"===m.declaredClass&&(m=new q(m.toJson()),k&&0>m.x&&(m.x+=360));return m},projectResolution:function(m,n,k){var l=k.xmin+(k.xmax-k.xmin)/2;k=k.ymin+(k.ymax-k.ymin)/2;m=new c(l,k,l+m.x,k+m.y,m.spatialReference);m=this.project(m,n);return new q(m.xmax-m.xmin,m.ymax-m.ymin,n)},getProjectionOffsetGrid:function(m,n,k,l,h,
e,d){null==d&&(d=[32,32]);var g=m.xmin,u=m.ymin,x=m.xmax,y=m.ymax,B=m.spatialReference,C=n.spatialReference,z=a.isLoaded()?a:b,D=h?-h:null,E=d[0]*k.x,A=d[1]*k.y;x={cols:Math.ceil((x-g)/E)+1,rows:Math.ceil((y-u)/A)+1};m=[];for(y=0;y<x.cols;y++){var F=H;var H=[];for(k=0;k<x.rows;k++){var I=new q({x:g+E*y,y:u+A*k,spatialReference:B});I=z.project(I,C,e);if(!I)return null;l&&0>I.x&&(I.x+=360);H.push(I);0<y&&null!=D&&I.x<F[k].x&&(I.x+=h-D,I.x<F[k].x&&(I.x+=h-D));m.push((I.x-n.xmin)/(n.xmax-n.xmin));m.push((I.y-
n.ymin)/(n.ymax-n.ymin))}}n=this.computeError(m,x);l=new Float32Array((x.cols-1)*(x.rows-1)*12);h=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);e=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(y=0;y<x.cols-1;y++)for(k=0;k<x.rows-1;k++){E=y*x.rows*2+2*k;g=m[E];u=m[E+1];H=m[E+2];B=m[E+3];E+=2*x.rows;C=m[E];z=m[E+1];D=m[E+2];A=m[E+3];F=0;I=12*(k*(x.cols-1)+y);for(E=0;3>E;E++)l[I++]=h[F++]*g+h[F++]*H+h[F++]*D;for(E=F=0;3>E;E++)l[I++]=h[F++]*u+h[F++]*B+h[F++]*A;for(E=F=0;3>E;E++)l[I++]=e[F++]*g+e[F++]*C+e[F++]*
D;for(E=F=0;3>E;E++)l[I++]=e[F++]*u+e[F++]*z+e[F++]*A}return{offsets:m,error:n,coefficients:l,spacing:d,size:[x.cols-1,x.rows-1]}},getHalfWorldWidth:function(m){var n=m&&m.wkid;if(null!=n)return m.isWebMercator()&&(n=3857),null==f[n]?180:t[n]}};G.setObject("layers.rasterLib.raster.rasterProjectionHelper",K,r);var t={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,
53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,
54101:2.0037508342789244E7};return K})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ../SpatialReference ./GeographicTransformation".split(" "),function(K,G,w,v,r,f){function c(t,m,n,k,l){void 0===k&&(k=null);void 0===l&&(l=!1);if(null===k){var h=f.cacheKey(m,n);void 0!==q[h]?k=q[h]:(k=a(m,n,null),null===k&&(k=new f),q[h]=k)}return b._project(t,m,n instanceof r||!1===l?n:new r(n),k,l)}function a(t,m,n){void 0===n&&(n=null);t=b._getTransformation(t,m,n);return null!==
t?f.fromGE(t):null}Object.defineProperty(G,"__esModule",{value:!0});var b=null;G.isLoaded=function(){return!!b&&v.isLoaded()};G.isSupported=function(){return v.isSupported()};var p=null;G.load=function(){if(p)return p.promise;p=new w;var t=v.load();K(["./geometryEngine"],function(m){b=m;t.then(function(){b._enableProjection(v);p.resolve()},function(n){p.reject(n)})});return p.promise};G.project=function(t,m,n){void 0===n&&(n=null);return t instanceof Array?0===t.length?[]:c(t,t[0].spatialReference,
m,n):c([t],t.spatialReference,m,n)[0]};var q={};G.projectMany=c;G.getTransformation=a;G.getTransformations=function(t,m,n){void 0===n&&(n=null);t=b._getTransformationBySuitability(t,m,n);if(null!==t){m=[];for(n=0;n<t.length;n++)m.push(f.fromGE(t[n]));return m}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(K,G,w,v,r){function f(h){function e(x,y,B){x[y]=B(x[y])}G._pe=h;t.init();m.init();n.init();k.init();
l.init();G.PeGCSExtent=function(x){function y(){return null!==x&&x.apply(this,arguments)||this}w(y,x);y.prototype.destroy=function(){G._pe.destroy(this)};return y}(G._pe.PeGCSExtent);for(var d=0,g=[G._pe.PeDatum,G._pe.PeGeogcs,G._pe.PeGeogtran,G._pe.PeObject,G._pe.PeParameter,G._pe.PePrimem,G._pe.PeProjcs,G._pe.PeSpheroid,G._pe.PeUnit];d<g.length;d++)h=g[d],e(h.prototype,"getName",function(x){return function(){return x.call(this,Array(t.PE_NAME_MAX))}});d=0;for(g=[G._pe.PeGeogtran,G._pe.PeProjcs];d<
g.length;d++)h=g[d],e(h.prototype,"getParameters",function(x){return function(){for(var y=Array(t.PE_PARM_MAX),B=x.call(this),C=0;C<y.length;C++){var z=G._pe.getValue(B,"*");y[C]=z?G._pe.wrapPointer(z,G._pe.PeParameter):null;B+=Int32Array.BYTES_PER_ELEMENT}return y}});e(G._pe.PeHorizon.prototype,"getCoord",function(x){return function(){var y=this.getSize();if(!y)return null;var B=[],C=x.call(this);p(B,y,C);return B}});e(G._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(x){var y=G._pe._pe_getPeGTlistExtendedGTsSize();
return function(){var B=null,C=x.call(this);if(!G._pe.compare(C,G._pe.NULL)){B=[C];var z=this.getSteps();if(1<z){C=G._pe.getPointer(C);for(var D=1;D<z;D++)B.push(G._pe.wrapPointer(C+y*D,G._pe.PeGTlistExtendedGTs))}}return B}});var u=G._pe._pe_getPeHorizonSize();h=function(x){return function(){var y=this._cache;y||(this._cache=y=new Map);if(y.has(x))return y.get(x);var B=null,C=x.call(this);if(!G._pe.compare(C,G._pe.NULL)){B=[C];var z=C.getNump();if(1<z){C=G._pe.getPointer(C);for(var D=1;D<z;D++)B.push(G._pe.wrapPointer(C+
u*D,G._pe.PeHorizon))}}y.set(x,B);return B}};e(G._pe.PeProjcs.prototype,"horizonGcsGenerate",h);e(G._pe.PeProjcs.prototype,"horizonPcsGenerate",h);G._pe.PeObject.prototype.toString=function(x){void 0===x&&(x=t.PE_STR_OPTS_NONE);G._pe.ensureCache.prepare();var y=G._pe.getPointer(this),B=G._pe.ensureInt8(Array(t.PE_BUFFER_MAX));return G._pe.UTF8ToString(G._pe._pe_object_to_string_ext(y,x,B))}}function c(h){if(h){var e=G._pe.getClass(h);e&&(e=G._pe.getCache(e))&&(h=G._pe.getPointer(h))&&delete e[h]}}
function a(h,e){for(var d=[],g=Array(e),u=0;u<h;u++)d.push(G._pe.ensureInt8(g));return d}function b(h){if(Array.isArray(h[0])){var e=[];h.forEach(function(d){e.push(d[0],d[1])})}else e=h;return e}function p(h,e,d,g){void 0===g&&(g=!1);if(g)for(g=0;g<2*e;g++)h[g]=G._pe.getValue(d+g*Float64Array.BYTES_PER_ELEMENT,"double");else{var u=0===h.length;for(g=0;g<e;g++)u&&(h[g]=Array(2)),h[g][0]=G._pe.getValue(d,"double"),h[g][1]=G._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(G,"__esModule",{value:!0});var q;G._pe=null;G.isLoaded=function(){return!!G._pe};G.isSupported=function(){return!!r("esri-wasm")};G.load=function(){if(q)return q.promise;q=new v;K(["./support/pe-wasm"],function(h){h({locateFile:function(e){return K.toUrl("./support/"+e)},onAbort:function(e){q.reject(Error(e))}}).then(function(e){f(e);q.resolve()})});return q.promise};(function(h){function e(u,x,y){G._pe.ensureCache.prepare();var B=b(y),C=y===B;B=G._pe.ensureFloat64(B);(u=G._pe._pe_geog_to_proj(G._pe.getPointer(u),
x,B))&&p(y,x,B,C);return u}function d(u,x,y){return g(u,x,y,0)}function g(u,x,y,B){G._pe.ensureCache.prepare();var C=b(y),z=y===C;C=G._pe.ensureFloat64(C);(u=G._pe._pe_proj_to_geog_center(G._pe.getPointer(u),x,C,B))&&p(y,x,C,z);return u}h.geogToProj=e;h.projGeog=function(u,x,y,B){switch(B){case t.PE_TRANSFORM_P_TO_G:return d(u,x,y);case t.PE_TRANSFORM_G_TO_P:return e(u,x,y)}return 0};h.projToGeog=d;h.projToGeogCenter=g})(G.PeCSTransformations||(G.PeCSTransformations={}));var t;(function(h){h.init=
function(){h.PE_BUFFER_MAX=G._pe.PeDefs.prototype.PE_BUFFER_MAX;h.PE_NAME_MAX=G._pe.PeDefs.prototype.PE_NAME_MAX;h.PE_MGRS_MAX=G._pe.PeDefs.prototype.PE_MGRS_MAX;h.PE_USNG_MAX=G._pe.PeDefs.prototype.PE_USNG_MAX;h.PE_DD_MAX=G._pe.PeDefs.prototype.PE_DD_MAX;h.PE_DDM_MAX=G._pe.PeDefs.prototype.PE_DDM_MAX;h.PE_DMS_MAX=G._pe.PeDefs.prototype.PE_DMS_MAX;h.PE_UTM_MAX=G._pe.PeDefs.prototype.PE_UTM_MAX;h.PE_PARM_MAX=G._pe.PeDefs.prototype.PE_PARM_MAX;h.PE_TYPE_NONE=G._pe.PeDefs.prototype.PE_TYPE_NONE;h.PE_TYPE_GEOGCS=
G._pe.PeDefs.prototype.PE_TYPE_GEOGCS;h.PE_TYPE_PROJCS=G._pe.PeDefs.prototype.PE_TYPE_PROJCS;h.PE_TYPE_GEOGTRAN=G._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;h.PE_TYPE_COORDSYS=G._pe.PeDefs.prototype.PE_TYPE_COORDSYS;h.PE_TYPE_UNIT=G._pe.PeDefs.prototype.PE_TYPE_UNIT;h.PE_STR_OPTS_NONE=G._pe.PeDefs.prototype.PE_STR_OPTS_NONE;h.PE_STR_AUTH_NONE=G._pe.PeDefs.prototype.PE_STR_AUTH_NONE;h.PE_STR_AUTH_TOP=G._pe.PeDefs.prototype.PE_STR_AUTH_TOP;h.PE_STR_NAME_CANON=G._pe.PeDefs.prototype.PE_STR_NAME_CANON;h.PE_PARM_X0=
G._pe.PeDefs.prototype.PE_PARM_X0;h.PE_PARM_ND=G._pe.PeDefs.prototype.PE_PARM_ND;h.PE_TRANSFORM_1_TO_2=G._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;h.PE_TRANSFORM_2_TO_1=G._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;h.PE_TRANSFORM_P_TO_G=G._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;h.PE_TRANSFORM_G_TO_P=G._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;h.PE_HORIZON_RECT=G._pe.PeDefs.prototype.PE_HORIZON_RECT;h.PE_HORIZON_POLY=G._pe.PeDefs.prototype.PE_HORIZON_POLY;h.PE_HORIZON_LINE=G._pe.PeDefs.prototype.PE_HORIZON_LINE;
h.PE_HORIZON_DELTA=G._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(t=G.PeDefs||(G.PeDefs={}));(function(h){function e(x,y){var B=null,C=g[x];C||(C={},g[x]=C);if(C.hasOwnProperty(String(y)))B=C[y];else{var z=G._pe.PeFactory.prototype.factoryByType(x,y);G._pe.compare(z,G._pe.NULL)||(B=z,C[y]=B)}return B=d(B)}function d(x){if(x){var y=x.getType();switch(y){case t.PE_TYPE_GEOGCS:x=G._pe.castObject(x,G._pe.PeGeogcs);break;case t.PE_TYPE_PROJCS:x=G._pe.castObject(x,G._pe.PeProjcs);break;case t.PE_TYPE_GEOGTRAN:x=
G._pe.castObject(x,G._pe.PeGeogtran);break;default:y&t.PE_TYPE_UNIT&&(x=G._pe.castObject(x,G._pe.PeUnit))}}return x}var g={},u={};h.initialize=function(){G._pe.PeFactory.prototype.initialize(null)};h.coordsys=function(x){return e(t.PE_TYPE_COORDSYS,x)};h.factoryByType=e;h.fromString=function(x,y){var B=null,C=u[x];C||(C={},u[x]=C);if(C.hasOwnProperty(y))B=C[y];else{var z=G._pe.PeFactory.prototype.fromString(x,y);G._pe.compare(z,G._pe.NULL)||(B=z,C[y]=B)}return B=d(B)};h.geogcs=function(x){return e(t.PE_TYPE_GEOGCS,
x)};h.geogtran=function(x){return e(t.PE_TYPE_GEOGTRAN,x)};h.getCode=function(x){return G._pe.PeFactory.prototype.getCode(x)};h.projcs=function(x){return e(t.PE_TYPE_PROJCS,x)};h.unit=function(x){return e(t.PE_TYPE_UNIT,x)}})(G.PeFactory||(G.PeFactory={}));G.PeGCSExtent=null;var m;(function(h){var e;h.init=function(){h.PE_GTLIST_OPTS_COMMON=G._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;e=G._pe._pe_getPeGTlistExtendedEntrySize()};h.getGTlist=function(d,g,u,x,y,B){var C=null,z=new G._pe.PeInteger(B);
try{var D=G._pe.PeGTlistExtended.prototype.getGTlist(d,g,u,x,y,z);if(B=z.val)if(C=[D],1<B){var E=G._pe.getPointer(D);for(d=1;d<B;d++)C.push(G._pe.wrapPointer(E+e*d,G._pe.PeGTlistExtendedEntry))}}finally{G._pe.destroy(z)}return C}})(m=G.PeGTlistExtended||(G.PeGTlistExtended={}));(function(h){h.destroy=function(e){if(e&&e.length){for(var d=0;d<e.length;d++){var g=e[d];c(g);g.getEntries().forEach(function(u){c(u);u=u.getGeogtran();c(u);u.getParameters().forEach(c);[u.getGeogcs1(),u.getGeogcs2()].forEach(function(x){c(x);
var y=x.getDatum();c(y);c(y.getSpheroid());c(x.getPrimem());c(x.getUnit())})})}G._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}})(G.PeGTlistExtendedEntry||(G.PeGTlistExtendedEntry={}));(function(h){h.geogToGeog=function(e,d,g,u,x){G._pe.ensureCache.prepare();var y=b(g),B=g===y;y=G._pe.ensureFloat64(y);var C=0;u&&(C=G._pe.ensureFloat64(u));(e=G._pe._pe_geog_to_geog(G._pe.getPointer(e),d,y,C,x))&&p(g,d,y,B);return e}})(G.PeGTTransformations||(G.PeGTTransformations={}));(function(h){function e(g,
u,x,y,B,C){G._pe.ensureCache.prepare();switch(g){case "dd":var z=G._pe._pe_geog_to_dd;var D=t.PE_DD_MAX;break;case "ddm":z=G._pe._pe_geog_to_ddm;D=t.PE_DDM_MAX;break;case "dms":z=G._pe._pe_geog_to_dms,D=t.PE_DMS_MAX}g=0;u&&(g=G._pe.getPointer(u));u=b(y);u=G._pe.ensureFloat64(u);D=a(x,D);y=G._pe.ensureInt32(D);if(B=z(g,x,u,B,y))for(z=0;z<x;z++)C[z]=G._pe.UTF8ToString(D[z]);return B}function d(g,u,x,y,B){G._pe.ensureCache.prepare();switch(g){case "dd":var C=G._pe._pe_dd_to_geog;break;case "ddm":C=G._pe._pe_ddm_to_geog;
break;case "dms":C=G._pe._pe_dms_to_geog}g=0;u&&(g=G._pe.getPointer(u));u=y.map(function(z){return G._pe.ensureString(z)});y=G._pe.ensureInt32(u);u=G._pe.ensureFloat64(Array(2*x));(C=C(g,x,y,u))&&p(B,x,u);return C}h.geog_to_dms=function(g,u,x,y,B){return e("dms",g,u,x,y,B)};h.dms_to_geog=function(g,u,x,y){return d("dms",g,u,x,y)};h.geog_to_ddm=function(g,u,x,y,B){return e("ddm",g,u,x,y,B)};h.ddm_to_geog=function(g,u,x,y){return d("ddm",g,u,x,y)};h.geog_to_dd=function(g,u,x,y,B){return e("dd",g,u,
x,y,B)};h.dd_to_geog=function(g,u,x,y){return d("dd",g,u,x,y)}})(G.PeNotationDms||(G.PeNotationDms={}));var n;(function(h){h.init=function(){h.PE_MGRS_STYLE_NEW=G._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;h.PE_MGRS_STYLE_OLD=G._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;h.PE_MGRS_STYLE_AUTO=G._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;h.PE_MGRS_180_ZONE_1_PLUS=G._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;h.PE_MGRS_ADD_SPACES=G._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
h.geog_to_mgrs_extended=function(e,d,g,u,x,y,B){G._pe.ensureCache.prepare();var C=0;e&&(C=G._pe.getPointer(e));e=b(g);g=G._pe.ensureFloat64(e);e=a(d,t.PE_MGRS_MAX);var z=G._pe.ensureInt32(e);if(u=G._pe._pe_geog_to_mgrs_extended(C,d,g,u,x,y,z))for(x=0;x<d;x++)B[x]=G._pe.UTF8ToString(e[x]);return u};h.mgrs_to_geog_extended=function(e,d,g,u,x){G._pe.ensureCache.prepare();var y=0;e&&(y=G._pe.getPointer(e));e=g.map(function(B){return G._pe.ensureString(B)});g=G._pe.ensureInt32(e);e=G._pe.ensureFloat64(Array(2*
d));(u=G._pe._pe_mgrs_to_geog_extended(y,d,g,u,e))&&p(x,d,e);return u}})(n=G.PeNotationMgrs||(G.PeNotationMgrs={}));(function(h){h.geog_to_usng=function(e,d,g,u,x,y,B){G._pe.ensureCache.prepare();var C=0;e&&(C=G._pe.getPointer(e));e=b(g);g=G._pe.ensureFloat64(e);e=a(d,t.PE_MGRS_MAX);var z=G._pe.ensureInt32(e);if(u=G._pe._pe_geog_to_usng(C,d,g,u,x,y,z))for(x=0;x<d;x++)B[x]=G._pe.UTF8ToString(e[x]);return u};h.usng_to_geog=function(e,d,g,u){G._pe.ensureCache.prepare();var x=0;e&&(x=G._pe.getPointer(e));
e=g.map(function(y){return G._pe.ensureString(y)});g=G._pe.ensureInt32(e);e=G._pe.ensureFloat64(Array(2*d));(x=G._pe._pe_usng_to_geog(x,d,g,e))&&p(u,d,e);return x}})(G.PeNotationUsng||(G.PeNotationUsng={}));var k;(function(h){h.init=function(){h.PE_UTM_OPTS_NONE=G._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;h.PE_UTM_OPTS_ADD_SPACES=G._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;h.PE_UTM_OPTS_NS=G._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};h.geog_to_utm=function(e,d,g,u,x){G._pe.ensureCache.prepare();
var y=0;e&&(y=G._pe.getPointer(e));e=b(g);g=G._pe.ensureFloat64(e);e=a(d,t.PE_UTM_MAX);var B=G._pe.ensureInt32(e);if(u=G._pe._pe_geog_to_utm(y,d,g,u,B))for(y=0;y<d;y++)x[y]=G._pe.UTF8ToString(e[y]);return u};h.utm_to_geog=function(e,d,g,u,x){G._pe.ensureCache.prepare();var y=0;e&&(y=G._pe.getPointer(e));e=g.map(function(B){return G._pe.ensureString(B)});g=G._pe.ensureInt32(e);e=G._pe.ensureFloat64(Array(2*d));(u=G._pe._pe_utm_to_geog(y,d,g,u,e))&&p(x,d,e);return u}})(k=G.PeNotationUtm||(G.PeNotationUtm=
{}));var l;(function(h){var e=new Map;h.init=function(){h.PE_PCSINFO_OPTION_NONE=G._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;h.PE_PCSINFO_OPTION_DOMAIN=G._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;h.PE_POLE_OUTSIDE_BOUNDARY=G._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;h.PE_POLE_POINT=G._pe.PePCSInfo.prototype.PE_POLE_POINT};h.generate=function(d,g){void 0===g&&(g=h.PE_PCSINFO_OPTION_DOMAIN);var u;if(e.has(d)){var x=e.get(d);x[g]&&(u=x[g])}u||(u=G._pe.PePCSInfo.prototype.generate(d,
g),x||(x=[],e.set(d,x)),x[g]=u);return u}})(l=G.PePCSInfo||(G.PePCSInfo={}));(function(h){h.version_string=function(){return G._pe.PeVersion.prototype.version_string()}})(G.PeVersion||(G.PeVersion={}));G._init=f})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,w){G.__proto__=w}||function(G,w){for(var v in w)w.hasOwnProperty(v)&&(G[v]=w[v])};return function(G,w){function v(){this.constructor=
G}K(G,w);G.prototype=null===w?Object.create(w):(v.prototype=w.prototype,new v)}}()})},"esri/geometry/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(K,G,w){return function(){function v(r){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(r&&r.steps){var f=0;for(r=r.steps;f<r.length;f++){var c=r[f];c instanceof w?this.steps.push(c):this.steps.push(new w({wkid:c.wkid,wkt:c.wkt,isInverse:c.isInverse}))}}}v.cacheKey=
function(r,f){return[void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};v.fromGE=function(r){var f=new v,c="",a=0;for(r=r.steps;a<r.length;a++){var b=w.fromGE(r[a]);f.steps.push(b);c+=b.uid.toString()+","}f._cached_projection={};f._gtlistentry=null;f._chain=c;return f};v.prototype.getInverse=function(){var r=new v;r.steps=[];for(var f=
this.steps.length-1;0<=f;f--)r.steps.push(this.steps[f].getInverse());return r};v.prototype.getGTListEntry=function(){for(var r="",f=0,c=this.steps;f<c.length;f++)r+=c[f].uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);return this._gtlistentry};v.prototype.assignCachedGe=function(r,f,c){this._cached_projection[v.cacheKey(r,f)]=c};v.prototype.getCachedGeTransformation=function(r,f){for(var c="",a=0,b=this.steps;a<b.length;a++)c+=b[a].uid.toString()+
",";c!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=c);c=this._cached_projection[v.cacheKey(r,f)];return void 0===c?null:c};return v}()})},"esri/geometry/GeographicTransformationStep":function(){define(["require","exports"],function(K,G){var w=0;return function(){function v(r){void 0===r&&(r=null);this.uid=w++;r?(this._wkt=void 0!==r.wkt?r.wkt:null,this._wkid=void 0!==r.wkid?r.wkid:-1,this._isInverse=void 0!==r.isInverse?!0===r.isInverse:!1):(this._wkt=null,this._wkid=
-1,this._isInverse=!1)}v.fromGE=function(r){var f=new v;f._wkt=r.wkt;f._wkid=r.wkid;f._isInverse=r.isInverse;return f};Object.defineProperty(v.prototype,"wkt",{get:function(){return this._wkt},set:function(r){this._wkt=r;this.uid=w++},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"wkid",{get:function(){return this._wkid},set:function(r){this._wkid=r;this.uid=w++},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"isInverse",{get:function(){return this._isInverse},
set:function(r){this._isInverse=r;this.uid=w++},enumerable:!0,configurable:!0});v.prototype.getInverse=function(){var r=new v;r._wkt=this.wkt;r._wkid=this._wkid;r._isInverse=!this.isInverse;return r};return v}()})},"esri/layers/rasterLib/raster/TileServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y){K=G([y],{declaredClass:"esri.layers.rasterLib.raster.TileServiceRaster",constructor:function(B){},open:function(){var B=new v,C=this.serviceInfo||this._getServiceInfo(null),z=w.hitch(this,function(E){this.serviceInfo=E;this.version=E.currentVersion;this.rasterInfo=this._parseRasterInfo(E);this.loaded=!0;this._getRasterIdentifier();B.resolve(this)}),D=w.hitch(this,function(E){this.loaded=!0;this._getRasterIdentifier();B.reject(E)});p(C,z,D);return B.promise},
read:function(B){var C=this.url+"/tile/"+B.level+"/"+B.row+"/"+B.col,z={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1};return this._requestPixels({url:C+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},decodeParams:z,tileOptions:B})},identify:function(B,C){null==C&&(C=this.tileInfo.lods[this.tileInfo.lods.length-1].level);var z=(B.x-this.tileInfo.origin.x)/
this.tileInfo.lods[C].resolution/this.tileInfo.cols,D=(this.tileInfo.origin.y-B.y)/this.tileInfo.lods[C].resolution/this.tileInfo.rows,E=Math.floor(z),A=Math.floor(D),F=Math.floor((z-E)*this.tileInfo.cols);F=Math.min(F,this.tileInfo.cols-1);var H=Math.floor((D-A)*this.tileInfo.rows);H=Math.min(H,this.tileInfo.rows-1);var I=new v;this.read({level:C,row:A,col:E}).then(function(L){var J=H*L.width+F;L&&L.pixels&&0<L.pixels.length?(L=L.mask?L.mask[J]?L.pixels.map(function(O){return O[J]}):null:L.pixels.map(function(O){return O[J]}),
I.resolve(L)):I.reject("no valid data")},function(L){I.reject(L)});return I.promise},setFetchParameters:function(B,C){},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_getServiceInfo:function(){var B=this.url,C=new v(h._dfdCanceller);C._pendingDfd=m({url:B,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});C._pendingDfd.then(function(z){C.callback(z)},function(z){C.errback(z)});return C},_parseRasterInfo:function(B){var C=
new x;C.extent=new n(B.fullExtent);C.spatialReference=new l(B.spatialReference);this.tileType=B.cacheType||"Map";switch(this.tileType){case "Map":C.bandCount=3;C.pixelType="U8";this.dataType="Processed";break;case "Elevation":C.bandCount=1;C.pixelType=B.pixelType||"F32";this.dataType="Elevation";break;case "Raster":C.bandCount=null,C.pixelType=null,this.dataType=B.serviceDataType&&B.serviceDataType.replace("esriImageServiceDataType","")||"Generic"}var z=B.tileInfo;C.width=Math.floor((B.fullExtent.xmax-
B.fullExtent.xmin)/z.lods[z.lods.length-1].resolution+.5);C.height=Math.floor((B.fullExtent.ymax-B.fullExtent.ymin)/z.lods[z.lods.length-1].resolution+.5);C.cellSize=new k({x:z.lods[z.lods.length-1].resolution,y:z.lods[z.lods.length-1].resolution,spatialReference:B.spatialReference});this.tileInfo=new u(z);this.tileInfo.tileType=this.tileType;return C}});w.setObject("layers.rasterLib.raster.TileServiceRaster",K,q);return K})},"esri/layers/rasterLib/raster/TileRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y){K=G([y],{declaredClass:"esri.layers.rasterLib.raster.TileRaster",sourceType:"TileCache",_RECORD_SIZE:8,constructor:function(B){this._cloudBlobStorage=B&&B._cloudBlobStorage},open:function(){var B=new v,C=this.datasetInfo||this._getDatasetInfo(null),z=w.hitch(this,function(E){this.datasetInfo=E;this.rasterInfo=E=this._parseRasterInfo(E);this.tileType="Cache/LERC"===E.format?"Elevation":"Cache/MIXED"===E.format||"Cache/JPEG"===E.format||"Cache/PNG"===
E.format?"Map":"Raster";this.tileInfo=E.tileInfo;this.dataType=["Generic","Elevation","Processed"][["Raster","Elevation","Map"].indexOf(this.tileType)];this._HEADER_SIZE=E.packetSize*E.packetSize*this._RECORD_SIZE+64;this.loaded=!0;this._cloudBlobStorage=this._cloudBlobStorage||-1<this.url.toLowerCase().indexOf("s3.amazonaws.com")||-1<this.url.toLowerCase().indexOf("windows.net")||-1<this.url.toLowerCase().indexOf("googleapis.com");this._getRasterIdentifier();B.resolve(this)}),D=w.hitch(this,function(E){this.loaded=
!0;this._getRasterIdentifier();B.reject(E)});p(C,z,D);return B.promise},read:function(B){var C=new v,z=B.level,D=B.row,E=B.col,A=this._buildCacheFilePath(this.url,z,D,E),F=this._getIndexRecordFromBundle(z,D,E);m({url:A,content:{},headers:{Range:"bytes\x3d0-"+(this._HEADER_SIZE-1).toString()},handleAs:"arraybuffer"}).then(w.hitch(this,function(H,I){if(!C.isCanceled()){var L=new Uint8Array(H);L=this._getTileEndAndContentType(L,F);var J={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,
pixelType:null,format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1};this._requestPixels({url:A+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},headers:{Range:"bytes\x3d"+L.position.toString()+"-"+(L.position+L.recordSize).toString()},decodeParams:J,tileOptions:B}).then(function(O){C.isCanceled()||C.resolve(O)},function(O){C.isCanceled()||C.reject(O)})}}));return C.promise},identify:function(){return null},setFetchParameters:function(B,C){},
toJson:function(){return{url:this.url,tileInfo:this.tileInfo.toJson(),rasterInfo:this.rasterInfo.toJson(),datasetInfo:this.datasetInfo,sourceType:this.sourceType,tileType:this.tileType,_rasterId:this._rasterId}},_getDatasetInfo:function(){return m({url:this.url+"/conf.json",handleAs:"json",content:{}})},_parseRasterInfo:function(B){var C=new x;switch(B.pixelType){case 1:var z="U1";break;case 1:z="U2";break;case 2:z="U4";break;case 3:z="U8";break;case 4:z="S8";break;case 5:z="U16";break;case 6:z="S16";
break;case 7:z="U32";break;case 8:z="S32";break;case 9:z="F32";break;default:z="F32"}var D,E=[],A=B.LODInfos;for(D=0;D<A.levels.length;D++)E.push({level:A.levels[D],resolution:A.resolutions[D],scale:96/.0254*A.resolutions[D]});D=new l(B.extent.spatialReference||B.geodataXform.spatialReference);E=new u({rows:B.blockHeight,cols:B.blockWidth,dpi:96,format:B.format,compressionQuality:0,origin:B.origin,spatialReference:D,lods:E});C.pixelType=z;C.bandCount=B.bandCount;C.spatialReference=D;C.extent=new n({xmin:B.extent.xmin,
ymin:B.extent.ymin,xmax:B.extent.xmax,ymax:B.extent.ymax,spatialReference:D});C.cellSize=new k({x:B.pixelSizeX,y:B.pixelSizeY,spatialReference:D});C.width=Math.floor((C.extent.xmax-C.extent.xmin)/C.cellSize.x+.5);C.height=Math.floor((C.extent.ymax-C.extent.ymin)/C.cellSize.y+.5);C.statistics=B.statistics.map(function(F){Object.keys(F).forEach(function(H){isNaN(F[H])&&(F[H]=null)});return F});C.histograms=B.histograms;C.geodataXform=B.geodataXform;C.packetSize=B.packetSize;C.format=B.format;C.compressionQuality=
B.compressionQuality;C.tileInfo=E;return C},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_buildCacheFilePath:function(B,C,z,D){var E=this.rasterInfo.packetSize;D=Math.floor(D/E)*E;z="R"+this._toHexString4(Math.floor(z/E)*E)+"C"+this._toHexString4(D);E="L";E=10<=C?E+C.toString():E+("0"+C.toString());return this._cloudBlobStorage?B+"/_alllayers/"+E+"/"+z+".bundle":B+"/"+E+"_"+z+"/bundle"},_getIndexRecordFromBundle:function(B,
C,z){B=this.rasterInfo.packetSize;C=C%B*B+z%B;if(0>C)throw"Invalid level / row / col";return C*this._RECORD_SIZE+64},_getTileEndAndContentType:function(B,C){var z=B.subarray(C,C+8),D=0,E;for(E=0;5>E;E++)D|=(z[E]&255)<<8*E;var A=D&0xffffffffff;D=0;for(E=5;8>E;E++)D|=(z[E]&255)<<8*(E-5);return{position:A,recordSize:D&0xffffffffff}},_toHexString4:function(B){B=B.toString(16);if(4!=B.length)for(var C=4-B.length;0<C--;)B="0"+B;return B}});w.setObject("layers.rasterLib.raster.TileRaster",K,q);return K})},
"esri/layers/rasterLib/raster/FunctionRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff ../DeferredList2 dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../rasterFormats/rasterCodec ./RasterInfo ./BasicRaster ../../rasterLib/function/rasterFunctionHelper".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y){K=G([x],{declaredClass:"esri.layers.rasterLib.raster.FunctionRaster",rasterFunction:null,sourceType:"Function",constructor:function(B){B&&B.rasterFx&&this._init(B.rasterFx,B.rasterFxArgs)},open:function(){var B=this.getMemberRasters().map(function(z){return z.open()});this.identifiers=this.getMemberRasters().map(function(z){return z._rasterId});var C=new v;(new b(B,null,null,!0)).then(function(z){z.some(function(D){return!D[0]})?C.reject(z):
(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.tileInfo=z[0][1].tileInfo,C.resolve(this))}.bind(this));return C.promise},getProjectedFullExtent:function(B){var C=new v;this.getMemberRasters()[0].getProjectedFullExtent(B).then(w.hitch(this,function(z){this.projectedFullExtent=z;C.resolve(z)}));return C.promise},setProcessingContext:function(B){var C=B;B.layer&&(B=B.layer,
C={id:B.id,rawRasterInfo:B.raster.rasterInfo,glSetting:B._glSetting,xformSetting:B.tileManager&&B.tileManager.xformSetting,useWebGL:B.useWebGL,resampling:B.tileMode&&B.tileManager&&B.tileManager.xformSetting.requireProjection&&!B._hasTilingEffects&&"Thematic"!==B.raster.dataType?1:0,tileMode:B.tileMode});this.rasterFunction.setProcessingContext(C);this._layerOptions=C},alterDefinition:function(B){if(B=B||this.rasterFunction)1===this.memberRasters.length&&!B._bindComplete&&(this.rasterFunction=y.create(B,
{raster:this.memberRasters[0]}))&&(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.rasterFunction.setProcessingContext(this._layerOptions)),this._rasterHandler&&this._rasterHandler._connected&&this.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this._layerOptions.id,data:this.rasterFunction.toJson(!0)})},setFetchParameters:function(B,C){var z=this.getMemberRasters();
z&&1===z.length&&z[0].setFetchParameters(B,C)},getMemberRasters:function(){this.memberRasters||(this.memberRasters=[],this._getMemberRasters(this.rasterFunction.functionArguments,this.memberRasters));return this.memberRasters},read:function(B){var C=new v(n._dfdCanceller);if(B.src){var z=this.rasterFunction.read(B);C.resolve(z);return C.promise}var D=this.getMemberRasters().map(function(H){return H.read(B)});D=new b(D);var E,A,F=this.identifiers;C._pendingDfd=D;D.then(w.hitch(this,function(H){if(E=
H.some(function(I){return I[0]}))A={},H.forEach(function(I,L){A[F[L]]=I[0]?I[1]:null});z=A?this.rasterFunction.read({extent:B.extent,src:A}):null;z.srcData=A;C.resolve(z)}));return C},_init:function(B,C){if(this.rasterFunction=y.create(B,C))this.rasterFunction._bindComplete=!0;else throw"Cannot initialize a function raster without a raster function";},_getMemberRasters:function(B,C){var z=Object.keys(B),D,E,A;for(D=0;D<z.length;D++)if(A=B[z[D]]){var F=A instanceof Array?A:[A];for(E=0;E<F.length;E++)(A=
F[E])&&("function"===typeof A||"object"===typeof A)&&A.read&&(A.functionArguments?this._getMemberRasters(A.functionArguments,C):A.sourceType&&"Function"!==A.sourceType&&(A._identifier=A._getRasterIdentifier(),C.some(function(H){return H._identifier===A._identifier})||C.push(A)))}return C}});w.setObject("layers.rasterLib.raster.FunctionRaster",K,q);return K})},"esri/layers/rasterLib/DeferredList2":function(){define(["dojo/DeferredList"],function(K){return function(G,w,v,r,f){this.list=G;w=new K(G,
w,v,r,f);var c=w.resolve.bind(w),a=w.cancel.bind(w);w.cancel=function(){G&&G.forEach(function(b){b.cancel&&b.cancel()});a.apply(this,arguments)}.bind(w);w.resolve=function(){this.isFulfilled()||c.apply(this,arguments)}.bind(w);return w}})},"esri/layers/rasterLib/tile/RasterTileManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when ../DeferredList2 ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../PixelBlock ./RasterTileInfo ../raster/rasterProjectionHelper".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q){var t=function(m,n){var k;for(k=0;k<m.length;k++)if(n(m[k]))return k;return-1};return K(null,{declaredClass:"esri.layers.rasterLib.tile.RasterTileManager",count:null,fullBoundary:null,tileBoundary:null,tiles:null,resolution:null,virtual:!0,prefetchBufferSize:0,_progressiveGlobal:!1,_MAX_TILES:128,_defaultMatrixResolution:20,constructor:function(m){this.tiles=[];this.xformSetting={};this.mapSpatialReference=m&&m.mapSR;this.layer=m&&m.layer;this.identifiers=this.layer.raster.rasterFunction?
this.layer.raster.getMemberRasters().map(function(n){return n._rasterId}):[this.layer.raster._rasterId];(m=m&&m.tileInfo)&&this.setTileInfo(m)},setTileInfo:function(m){this.tileInfo=m;this.virtual=m.virtual;this.mapResolution=null;this.tiles.length=0;this.xformSetting.requireProjection=!this.virtual&&!this.mapSpatialReference.equals(this.tileInfo.spatialReference);this.xformSetting.requirePE=q.requirePE(this.mapSpatialReference,this.tileInfo.spatialReference);this.xformSetting.meshSize=this.xformSetting.requireProjection?
[this._defaultMatrixResolution,this._defaultMatrixResolution]:[1,1];this.halfWorldWidth=q.getHalfWorldWidth(m.spatialReference)},updateResolution:function(m,n){if(!(this.mapResolution&&m&&this._resolutionEqual(this.mapResolution.x,m.x)&&this._resolutionEqual(this.mapResolution.y,m.y))){this.resetTiles();var k=this.xformSetting.requireProjection;this.mapResolution=this.resolution=m;k&&(this.resolution=q.projectResolution(m,this.tileInfo.spatialReference,this.layer.projectedFullExtent||n));this._resolution=
this.resolution;k=this.resolution;if(!this.tileInfo.virtual){var l=.75*Math.min(k.x,k.y)+.25*Math.max(k.x,k.y);if(l>=this.tileInfo.lods[0].resolution){var h=this.tileInfo.lods[0];this.ooe=!0}else{if(l<=this.tileInfo.lods[this.tileInfo.lods.length-1].resolution)h=this.tileInfo.lods[this.tileInfo.lods.length-1];else for(k=0;k<this.tileInfo.lods.length-1;k++){h=this.tileInfo.lods[k];var e=this.tileInfo.lods[k+1];if(h.resolution>=l&&e.resolution<=l){h.resolution-l>l-e.resolution&&(h=e);break}}this.ooe=
!1}this.level=h&&h.level;k=this.resolution=new a({x:h.resolution,y:h.resolution,spatialReference:this.tileInfo.spatialReference})}l=this.layer.raster.rasterInfo.extent;h=this.tileInfo.origin;e=this.tileInfo.cols;var d=this.tileInfo.rows;this.fullBoundary={rowStart:Math.floor((h.y-l.ymax)/k.y/d),rowEnd:Math.floor((h.y-l.ymin-k.y)/k.y/d),colStart:Math.floor((l.xmin-h.x)/k.x/e),colEnd:Math.floor((l.xmax-h.x-k.x)/k.x/e)};if(l=this.halfWorldWidth){d=Math.ceil(l/k.x/(e/2));var g=this.tileInfo.applyGCS360Transform?
360:l,u=Math.round(e-(g-h.x)/k.x%e);u===e&&(u=0);this.fullBoundary.colRange=d;this.fullBoundary.paddingRight=u;this.fullBoundary.paddingLeft=Math.round((d*e*k.x+h.x-g-(this.tileInfo.applyGCS360Transform?0:h.x+l))/k.x)}this.hasNewData=!0}},getXformGrid:function(){var m=this.mapExtent,n=this.layer._hasTilingEffects?this.extent:this.fullExtent,k=this.layer.getCurrentResolution(),l=JSON.stringify(m.toJson())+JSON.stringify(n.toJson());this._datumTransformationInitialized||(this._datumTransformationInitialized=
!0,this._datumTransformation=q.getDefaultDatumTransformationForDataset(this.layer.raster.rasterInfo.extent,m.spatialReference,!0));this._cachedExtentString&&this._cachedExtentString===l||(this._cachedExtentString=l,this._xformGrid=m=q.getProjectionOffsetGrid(m,n,k,this.tileInfo.applyGCS360Transform,this.halfWorldWidth,this._datumTransformation));m=this._xformGrid;this.xformSetting.meshSize=m&&m.size;return m},getWrapTimes:function(m){var n=q.getHalfWorldWidth(m.spatialReference);if(!n)return 0;var k=
2*n;n=this.tileInfo.applyGCS360Transform?0:-n;return Math.floor((m.xmax-n)/k)-Math.floor((m.xmin-n)/k)},normalizeCoordinate:function(m,n){if(!n)return 0;var k=2*n;if(0<m){for(;m>n;)m-=k;return m}for(;m<-n;)m+=k;return m},resetTiles:function(){this.tiles.forEach(G.hitch(this,function(m){m.fetch&&!m.fetch.isCanceled()&&m.fetch.cancel();m.update&&!m.update.isCanceled()&&m.update.cancel()}));this.tiles.length=0},updateExtent:function(m,n){this.mapExtent=this.extent=m;var k=this.xformSetting.requireProjection;
if(k){this.extent=q.project(m,this.tileInfo.spatialReference,this.tileInfo.applyGCS360Transform);if(!this.extent)return;this.extent.spatialReference=new c(this.extent.spatialReference.toJson())}else if(m.spatialReference.isWebMercator()||4326===m.spatialReference.wkid){var l=4326===m.spatialReference.wkid?180:this.halfWorldWidth,h=m.xmin;if(h<-l||h>l){for(var e=m.xmax,d=2*l;h<-l;)h+=d,e+=d;for(;h>l;)h-=d,e-=d;this.mapExtent=this.extent=m=new f(h,m.ymin,e,m.ymax,m.spatialReference)}}this.updateResolution(n,
m);l=this.extent;h=this.tileInfo;e=h.cols;d=h.rows;n=this.resolution;var g=l,u=k?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent;this.ooe&&(g=this._getIntersect(l,u));var x=Math.floor((g.xmin-h.origin.x)/n.x/e)-this.prefetchBufferSize,y=Math.floor((g.xmax-h.origin.x)/n.x/e)+this.prefetchBufferSize,B=null,C=this.getWrapTimes(m),z=this.fullBoundary&&this.fullBoundary.colRange;C&&this.halfWorldWidth&&(y===x&&(B=x),y+=C*z);if(k=this.halfWorldWidth&&this.tiles.length&&(C!==this.wrapTimes||
B!==this._circlularColId))this._wrapSwitchCount=this._wrapSwitchCount?this._wrapSwitchCount+1:1;this.wrapTimes=C;this._circlularColId=B;var D=Math.floor((h.origin.y-g.ymax)/n.y/d)-this.prefetchBufferSize;B=Math.floor((h.origin.y-g.ymin)/n.y/d)+this.prefetchBufferSize;this.tileBoundary={rowStart:D,rowEnd:B,colStart:x,colEnd:y};var E,A;((g=(B-D+1)*(y-x+1)>this._MAX_TILES||!this.virtual&&this._resolution.x>8*this.tileInfo.lods[0].resolution)||2<C||k)&&this.resetTiles();if(!(g||2<C)){g=this.tiles;k=!1;
for(E=g.length-1;0<=E;E--){var F=g[E].row;var H=g[E].wrapCol;if(F<D||F>B||H<x||H>y)g[E].fetch&&!g[E].fetch.isCanceled()&&g[E].fetch.cancel(),g[E].update&&!g[E].update.isCanceled()&&g[E].update.cancel(),g.splice(E,1),k=!0}for(E=D;E<=B;E++)for(A=x;A<=y;A++){D=new f(h.origin.x+n.x*e*A,h.origin.y-n.y*d*(E+1),h.origin.x+n.x*e*(A+1),h.origin.y-n.y*d*E,l.spatialReference);var I=C&&z?0<=A?A%z:z- -A%z:A;F=t(g,function(L){return L.row===E&&L.col===I&&L.wrapCol===A});H=u.xmax>=D.xmax?e:Math.round((u.xmax-D.xmin)/
n.x);-1===F&&(g.push({row:E,col:I,wrapCol:A,cellsizeX:n.x,cellsizeY:n.y,width:e,height:d,actualWidth:H,extent:D,normalizedExtent:this._wrapExtent(D,I),pixelBlock:null,virtual:this.virtual,level:this.level,tileType:this.tileInfo.tileType||"Raster"}),k=!0)}k&&this._sortTiles();h=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);this.width=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);this.height=h;this.count=g.length;h=Math.min.apply(null,g.map(function(L){return L.extent.xmin}));
e=Math.max.apply(null,g.map(function(L){return L.extent.xmax}));d=Math.min.apply(null,g.map(function(L){return L.extent.ymin}));u=Math.max.apply(null,g.map(function(L){return L.extent.ymax}));h=this.fullExtent=new f(h,d,e,u,l.spatialReference);if(this.layer.roaming||this.layer.useWebGL)this.layer._hasTilingEffects?(this.xformSetting.offset=[0,0],this.xformSetting.scale=[1,1]):(k&&(this._tilesChanged=!0),this.xformSetting.offset=[(l.xmin-h.xmin)/(h.xmax-h.xmin),-(h.ymin-l.ymin)/(h.ymax-h.ymin)],this.xformSetting.scale=
[(l.xmax-l.xmin)/(h.xmax-h.xmin),(l.ymax-l.ymin)/(h.ymax-h.ymin)])}},fetchTiles:function(m){(this._tilesChanged||m)&&this._fetchTiles(m)},_fetchTiles:function(m){this._fetchCounter=0;var n=this.extent;this.fetchAllCompleted=m?new w:null;(this._tilesChanged||m&&this.layer._hasTilingEffects)&&this.tiles.forEach(G.hitch(this,function(l){l.updateCompleted=!1}));var k={};!this.layer.roaming&&this.layer._hasTilingEffects&&m?(this.identifiers.forEach(function(l,h){k[l]={extent:this.extent,pixelBlock:new b({width:this.layer._map.width,
height:this.layer._map.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.extent,src:k,isEmpty:!0}):this._tilesChanged&&(this.identifiers.forEach(function(l,h){k[l]={extent:this.fullExtent,pixelBlock:new b({width:128,height:128,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.fullExtent,src:k,isEmpty:!0});this.tiles.forEach(G.hitch(this,function(l){if(l.fetch)l.update||(l.update=this.updateTile(l));
else{if(this._isTileOutSide(l,n)){l.updateCompleted=!0;return}this._requestTile(l)}this.layer.roaming&&this.layer.useWebGL?this._fillPixelData(l):l.src&&m&&(this.layer._hasTilingEffects||this.layer.useWebGL)&&(this._fillPixelData(l),this.layer._hasTilingEffects&&(l.updateCompleted=!0),l.processedPixelBlock=null,l.renderedPixelBlock=null)}));0===this._fetchCounter&&(this._fetched=!0);this._tilesChanged=!1;m&&this._updateFetchStatus()},updateTile:function(m,n){var k=new w;if(!m.src&&!m.fetch)return k.resolve(m),
k.promise;v(m.src||m._fetched||m.fetch,G.hitch(this,function(){var l=this.layer.tileMode&&this.layer._rasterHandler&&!(this.layer._hasTilingEffects||this.layer.useWebGL),h=this.layer._drawTile,e=this._validateRawPixelBlocks(m);this.layer._hasTilingEffects&&!this.layer.useWebGL&&(h=h&&(this._progressiveGlobal||n));if((n||!n&&e)&&(l||h||this.layer.roaming)){if(this.xformSetting.requireProjection&&this.layer.useWebGL&&(this.xformSetting.gridConfig=this.getXformGrid(),null==this.xformSetting.gridConfig))return k.cancel(),
k.promise;this._processTile(m,n).then(G.hitch(this,function(d){k.isCanceled()||this._renderTile(d,n).then(G.hitch(this,function(g){this.hasNewData=!1;k.isCanceled()||k.resolve(g)}))}))}else n||e||(m.updateCompleted=!0),this.layer.useWebGL||this.layer._hasTilingEffects?k.resolve(this.originalPixelData):k.resolve()}));return k.promise},setLayer:function(m){this.layer=m},fillupTiles:function(){this.tiles.forEach(G.hitch(this,function(m){m.update&&m.updateCompleted&&!m.filled&&(m.updateCompleted=!1,this._fillPixelData(m),
m.updateCompleted=!0)}))},_validateRawPixelBlocks:function(m){return m&&m.src&&!this.identifiers.some(function(n){return!(m.src[n].pixelBlock&&0!==m.src[n].pixelBlock.validPixelCount&&m.src[n].pixelBlock.pixels&&0<m.src[n].pixelBlock.pixels.length)})},_wrapExtent:function(m,n){if(m){if(this.tileInfo.applyGCS360Transform){var k=this.normalizeCoordinate(m.xmin,180);0>k&&(k+=360);return new f({xmin:k,ymin:m.ymin,xmax:m.xmax-m.xmin+k,ymax:m.ymax,spatialReference:m.spatialReference})}if(this.halfWorldWidth){k=
null!=n?new f({xmin:this.tileInfo.origin.x+this.tileInfo.cols*n*this.resolution.x,ymin:m.ymin,xmax:this.tileInfo.origin.x+this.tileInfo.cols*(n+1)*this.resolution.x,ymax:m.ymax,spatialReference:m.spatialReference}):new f({xmin:m.xmin,ymin:m.ymin,xmax:m.xmax,ymax:m.ymax,spatialReference:m.spatialReference});var l=this.normalizeCoordinate(k.xmin,this.halfWorldWidth),h=l-k.xmin;.01<Math.abs(h)&&(k.xmin=l,k.xmax+=h)}return k||m}},_getIntersect:function(m,n){return new f(Math.max(m.xmin,n.xmin),Math.max(m.ymin,
n.ymin),Math.min(m.xmax,n.xmax),Math.min(m.ymax,n.ymax),m.spatialReference)},_isTileOutSide:function(m,n){var k=!1;if(m.virtual){var l=m.normalizedExtent;if(n=n||(this.xformSetting.requireProjection?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent)){k=l.xmin-this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;var h=l.ymin-this.prefetchBufferSize*this.tileInfo.rows*this.resolution.y;var e=l.xmax+this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;l=l.ymax+
this.prefetchBufferSize*this.tileInfo.rows*this.resolution.y;k=e<=n.xmin||k>=n.xmax||l<=n.ymin||h>=n.ymax}else k=!1}else k=0>m.level||m.row<this.fullBoundary.rowStart||m.row>this.fullBoundary.rowEnd||m.col<this.fullBoundary.colStart||m.col>this.fullBoundary.colEnd;return k},_resolutionEqual:function(m,n){return m===n||m&&n&&Math.abs(m-n)<Math.abs(n/1E4)?!0:!1},_requestTile:function(m){var n=this.identifiers,k;if(this._isTileOutSide(m)){var l=new w;m.updateCompleted=!0;l.resolve(null);l=l.promise}else l=
this.layer.raster.rasterFunction?new r(this.layer.raster.getMemberRasters().map(function(h){return h.read(m)})):new r([this.layer.raster.read(m)]);m.fetch=l;this._fetchCounter++;v(m.src||m._fetched||l,G.hitch(this,function(h){if(k=h&&h.some(function(d){return d[0]})){var e={};h.forEach(function(d,g){e[n[g]]=d[0]&&d[1]?{extent:d[1].extent,pixelBlock:d[1].pixelBlock,width:d[1].width,height:d[1].height}:null});m.src=e}else m.src=null;this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);m._fetched=
!0;this._updateFetchStatus()}),G.hitch(this,function(){this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);m._fetched=!0;this._updateFetchStatus()}));m.update=this.updateTile(m)},_updateFetchStatus:function(){this.layer._drawTile&&this.fetchAllCompleted&&!this.fetchAllCompleted.isResolved()&&!this.tiles.some(function(m){return!m._fetched})&&(this.tiles.forEach(G.hitch(this,function(m){this._fillPixelData(m)})),this.fetchAllCompleted.resolve())},_fillPixelData:function(m,n){if(m&&!m.updateCompleted)if(Math.abs(m.cellsizeX-
this.resolution.x)>m.cellsizeX/10)m.updateCompleted=!0;else if(!1===this._validateRawPixelBlocks(m))m.updateCompleted=!0;else{var k=m.extent;if(this.layer.roaming||this.layer.useWebGL&&!this.layer._hasTilingEffects){var l=this.fullExtent;var h=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);var e=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);n?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new b({width:h,
height:e,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(G.hitch(this,function(g){this.originalPixelData.src[g].pixelBlock.width=h;this.originalPixelData.src[g].pixelBlock.height=e}))}else l=this.extent,h=this.layer._map.width,e=this.layer._map.height,n?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new b({width:h,height:e,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(G.hitch(this,function(g){this.originalPixelData.src[g].pixelBlock.width=
h;this.originalPixelData.src[g].pixelBlock.height=e}));if(l.xmax<=k.xmin||l.xmin>=k.xmax||l.ymax<=k.ymin||l.ymin>=k.ymax)return null;var d=this.originalPixelData.isEmpty=!1;this.identifiers.forEach(G.hitch(this,function(g){m.src&&(this._fillPixelBlock(m.src[g],this.originalPixelData.src[g],{extent:l,width:h,height:e,normalizedExtent:m.normalizedExtent},!1),d=!0)}));m.filled=d;this.hasNewData=!0}},_fillPixelBlock:function(m,n,k,l){var h=m.extent,e=k.extent;l=k.width;var d=k.height;if(m.pixelBlock&&
m.pixelBlock.pixels&&m.pixelBlock.pixels[0]){var g=(h.xmax-h.xmin)/m.width,u=Math.max(h.xmin,e.xmin),x=Math.min(h.ymax,e.ymax),y=Math.round((u-h.xmin)/g),B=m.width-Math.round(Math.abs(h.xmax-Math.min(h.xmax,e.xmax))/g),C=Math.round(Math.abs(h.ymax-x)/g),z=m.height-Math.round((Math.max(h.ymin,e.ymin)-h.ymin)/g),D=this.halfWorldWidth;u=Math.round((u-e.xmin)/g);k=k.normalizedExtent;if(!(this.wrapTimes&&D&&h.xmin<-D)){if(this.wrapTimes&&D){if(this.tileInfo.applyGCS360Transform)360<h.xmin&&(u-=this.fullBoundary.paddingLeft);
else if(h.xmin>D){u-=this.fullBoundary.paddingLeft;var E=this.normalizeCoordinate(h.xmin,D);var A=this.normalizeCoordinate(h.xmax,D)}else E=h.xmin,A=h.xmax;this.tileInfo.applyGCS360Transform?k&&360>k.xmin&&360<k.xmax&&(B-=this.fullBoundary.paddingRight):k&&k.xmin<D&&k.xmax>D?B-=this.fullBoundary.paddingRight:E<D&&A>D&&(B-=this.fullBoundary.paddingRight)}E=Math.round(Math.abs(e.ymax-x)/g);A=m.pixelBlock.pixels.length;n=n.pixelBlock;k=m.width;h=n.mask||new Uint8Array(l*d);var F=m.pixelBlock,H=F.mask,
I=0;for(g=0;g<A;g++){x=F.pixels[g];D=n.pixels[g]||new x.constructor(l*d);for(m=C;m<z;m++)for(I=(E+m-C)*l+u,e=y;e<B;e++)D[I+e-y]=x[m*k+e];n.pixels[g]=D}if(H)for(m=C;m<z;m++)for(I=(E+m-C)*l+u,e=y;e<B;e++)h[I+e-y]=H[m*k+e];else for(m=C;m<z;m++)for(I=(E+m-C)*l+u,e=y;e<B;e++)h[I+e-y]=1;n.pixelType=n.pixelType||F.pixelType;n.mask=h;if(!(n.statistics&&0<n.statistics.length))for(n.statistics=[],m=0;m<F.statistics.length;m++)n.statistics[m]={minValue:F.statistics[m].minValue,maxValue:F.statistics[m].maxValue};
else if(F.statistics&&n.statistics)for(m=0;m<n.statistics.length;m++)n.statistics[m].minValue=Math.min(F.statistics[m].minValue,n.statistics[m].minValue),n.statistics[m].maxValue=Math.max(F.statistics[m].maxValue,n.statistics[m].maxValue)}}},_processTile:function(m,n){var k=new w,l=this.layer._hasTilingEffects,h=this.layer.useWebGL,e=l||h,d=this.layer.raster.rasterFunction&&m&&(l||h||!m.processedPixelBlock);if(n)var g=m;else this._fillPixelData(m),g=e?this.originalPixelData:m;this.xformSetting.hasNewTexture=
this.hasNewData;var u;d?(this.identifiers.forEach(function(x){if(0===g.src[x].pixelBlock.pixels.length||0===g.src[x].pixelBlock.pixels[0].length)u=!0}),u?k.resolve({extent:g.extent,processedPixelBlock:g.src[this.identifiers[0]],pixelBlock:g.src[this.identifiers[0]]}):h?(this.processedPixelData=this.layer.raster.rasterFunction.read(g),k.resolve(this.processedPixelData)):this.layer._rasterHandler?this.layer._rasterHandler.process({extent:g.extent,src:g.src}).then(function(x){l?(this.processedPixelData=
x,k.resolve(this.processedPixelData)):(m.processedPixelBlock=x.pixelBlock,k.resolve(m))}):(h=this.layer.raster.rasterFunction.read(m),m.processedPixelBlock=h.pixelBlock,k.resolve(m))):e?k.resolve(g.src[this.identifiers[0]]):(m.pixelBlock=g.src[this.identifiers[0]]&&g.src[this.identifiers[0]].pixelBlock,k.resolve(m));return k.promise},_renderTile:function(m){var n=new w,k=this.layer._hasTilingEffects,l=this.layer.useWebGL,h=Math.abs((m.extent.xmax-m.extent.xmin)/m.width-this.layer.getCurrentResolution().x)>
this.resolution.x/10;h=this.layer.useWebGL&&(h||this._isTileOutSide(m,this.layer._map.extent));this.xformSetting.hasNewTexture=this.hasNewData;this.layer._rasterRenderer&&m&&(m.texture||m.src||m.pixelBlock||m.processedPixelBlock)?(this.layer._rasterRenderer.interpolation=this.layer.interpolation,l&&!h?(this.layer.raster.rasterFunction&&this.layer.raster.rasterFunction.renderTexture||this.layer._rasterRenderer.draw(m),n.resolve(m)):this.layer._rasterHandler?this.layer._rasterHandler.render({extent:m.extent,
pixelBlock:m.processedPixelBlock||m.pixelBlock}).then(function(e){k?(e.renderedPixelBlock=e.pixelBlock,n.resolve(e)):(m.renderedPixelBlock=e.pixelBlock,n.resolve(m))}.bind(this)):(m.renderedPixelBlock=this.layer._rasterRenderer.draw(m).pixelBlock,n.resolve(m))):(m.renderedPixelBlock=m.processedPixelBlock||m.pixelBlock,n.resolve(m));return n.promise},_sortTiles:function(){this.tiles.sort(function(m,n){return m.row<n.row||m.row==n.row&&m.col<n.col?-1:1})}})})},"esri/dijit/RasterFunctionEditor/utils":function(){define("dojo/_base/lang dojo/_base/url dojo/has dojo/on dojo/Deferred dojo/_base/array dojo/i18n!../../nls/jsapi ../../kernel ../../request ../../lang ../../config ../../layers/ArcGISImageServiceLayer ../../layers/ImageServiceParameters ../../layers/MosaicRule ../../layers/RasterFunction ../../tasks/Geoprocessor ../../tasks/JobInfo ../../renderers/colorUtils ../../renderers/colorRampUtils ../../layers/ArcGISRenderingImageServiceLayer".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g){function u(V){if(V){var ba=f.map([V.FromColor,V.ToColor],function(ka){ka=e.toRGB({h:ka.Hue,s:ka.Saturation,v:ka.Value});return[ka.r,ka.g,ka.b]});return{fromColor:ba[0],toColor:ba[1],type:"algorithmic",algorithm:V.Algorithm}}}function x(V){if(V)return V=e.toHSV(e.getDojoColor(V)),{type:"HsvColor",Hue:V.h,Saturation:V.s,Value:V.v,AlphaValue:255}}function y(V){if(V){var ba=V.toJson?V.toJson():void 0;return{Algorithm:ba&&ba.Algorithm||"esriHSVAlgorithm",
type:"AlgorithmicColorRamp",FromColor:x(V.fromColor),ToColor:x(V.toColor)}}}function B(V,ba,ka){function la(Z,W){return V+" ("+ha[Z]+" - "+ha[W]+")"}var ma=c.rasterFunctions.enumLabels,ha={1:ma.esriMonthJanuary,2:ma.esriMonthFebruary,3:ma.esriMonthMarch,4:ma.esriMonthApril,5:ma.esriMonthMay,6:ma.esriMonthJune,7:ma.esriMonthJuly,8:ma.esriMonthAugust,9:ma.esriMonthSeptember,10:ma.esriMonthOctober,11:ma.esriMonthNovember,12:ma.esriMonthDecember};if(ka&&""===ka)return V.toString();ma="Months"===ka;ka=
"Quarters"===ka;if(!ma&&!ka)return V.toString();if(1==ba&&ma)return V+" ("+ha[+V]+")";switch(+V){case 1:return la(1,3);case 2:return la(4,6);case 3:case 7:return la(7,9);case 4:return ka?la(10,12):la(4,6);case 10:return la(10,12)}return V.toString()}function C(V){return(new Date(Number(V))).toISOString().replace("Z","")}function z(V){return(new Date(V+"Z")).getTime()}function D(V,ba){return V.some(function(ka){return ka.label===ba.label}.bind(this))}function E(V){if(V&&V.type){var ba,ka=J,la=V.type.replace("Arguments",
"");if(la.toLowerCase()===ka.local.toLowerCase()){var ma=V.Operation;0<=P.indexOf(ma&&ma.value)&&(ba="CellStatisticsFunction")}la.toLowerCase()===ka.gpAdapter.toLowerCase()&&(ba=(ba=V.ToolName)&&ba.value&&ba.value.replace("_sa",""));la.toLowerCase()===ka.pythonAdapter.toLowerCase()&&(V=V.ClassName,ba="object"===typeof V?V.value:V);return ba||la}}function A(V,ba){Array.isArray(V)?V.forEach(function(ka,la){ba(V,la)}.bind(this)):F(V)&&Object.keys(V).forEach(function(ka){ba(V,ka)}.bind(this))}function F(V){return null!==
V&&"object"===typeof V}w={};var H,I,L,J={local:"LocalFunction",gpAdapter:"GPAdapterFunction",pythonAdapter:"PythonAdapterFunction"},O=new Map,P=[38,39,40,41,42,43,47,54,55,58,66,67,68,69,70,71,72,73,74,75,93,94],fa=this&&this.__spreadArrays||function(){for(var V=0,ba=0,ka=arguments.length;ba<ka;ba++)V+=arguments[ba].length;V=Array(V);var la=0;for(ba=0;ba<ka;ba++)for(var ma=arguments[ba],ha=0,Z=ma.length;ha<Z;ha++,la++)V[la]=ma[ha];return V};K.mixin(w,{fetchRFT:function(V,ba,ka,la,ma){var ha=new r;
var Z=(Z=(Z=V.name)&&Z.slice(-8))&&".rft.xml"===Z.toLowerCase();return V&&V.itemDataUrl?Z?ma?this.convertRFT({url:ma+"/ConvertRasterFunctionTemplate",rft:{itemId:V.id},format:"json"},ba,la,ka):(ka("errorUtilitiesServiceNotAvailable"),ha.reject(Error("errorUtilitiesServiceNotAvailable")),ha.promise):b({url:V.itemDataUrl,callbackParamName:"callback",content:{f:"json"},handleAs:"json",load:ba,error:ka}).then(la):(ka("errorRetrievingRFTItem"),ha.reject(Error("errorRetrievingRFTItem")),ha.promise)},convertRFT:function(V,
ba,ka,la){var ma=V.url,ha=function(){L&&(L.remove(),L=null);I&&(I.remove(),I=null)};H||(H=new l(ma),v(H,"error",ha));I=v(H,"job-complete",function(Z){I&&(I.remove(),I=null);Z.jobInfo.jobStatus!==h.STATUS_SUCCEEDED?(ha(),la(Z)):H.getResultData(Z.jobInfo.jobId,"outputRasterFunction")});L=v(H,"get-result-data-complete",function(Z){L&&(L.remove(),L=null);var W=Z&&Z.result&&Z.result.value;W&&W.url&&(Z={url:W.url,handleAs:"json",load:ka,error:la},W=(new G(W.url)).authority,-1===q.defaults.io.corsEnabledServers.indexOf(W)&&
q.defaults.io.corsEnabledServers.push(W),b(Z))});V={inputRasterFunction:JSON.stringify(V.rft),format:V.format};return H.submitJob(V,ba,null,la)},getRasterJsonFromLayer:function(V){if(!V)return null;var ba=V.url;ba&&0<ba.indexOf("?token\x3d")&&(ba=ba.slice(0,ba.indexOf("?token\x3d")));var ka=V.credential||ba&&a.id.findCredential(ba);p.isDefined(ka)&&(ba=ba+"?token\x3d"+ka.token,ka.referer&&(ba+=ka.referer));ba={url:ba,name:V.name};V.renderingRule&&(ba.renderingRule=V.renderingRule.toJson?V.renderingRule.toJson():
V.renderingRule);V.mosaicRule&&(ba.mosaicRule=V.mosaicRule.toJson?V.mosaicRule.toJson():V.mosaicRule);return ba},getLayerIdfromRasterValue:function(V,ba){if(V&&ba){var ka;f.some(ba,function(la){if(la&&la.url===V.url&&la.name===V.name&&V.name)return ka=la.id,!0});return ka}},getColorRampFromArg:function(V){if(V){var ba;if(V.type&&-1<V.type.toLowerCase().indexOf("colorramp"))var ka=V;else V.value&&-1<V.value.type.toLowerCase().indexOf("colorramp")&&(ka=V.value);if(ka)return V=ka.type.toLowerCase(),
"multipartcolorramp"===V?ba=d.fromJson({type:"multipart",colorRamps:f.map(ka.ArrayOfColorRamp,function(la){return u(la)})}):"algorithmiccolorramp"===V&&(ba=d.fromJson(u(ka))),ba.id=ba.name=ka.Name,ba}},getRFxArgColorRampValue:function(V){if(V){if(V.fromColor&&V.toColor)return K.mixin(y(V),{Name:V.name});if(V.colorRamps){var ba=f.map(V.colorRamps,y);return{type:"MultiPartColorRamp",NumColorRamps:ba.length,ArrayOfColorRamp:ba,Name:V.name}}}},RFX_VARIABLE_TYPE:"RasterFunctionVariable",RFX_TEMPLATE_TYPE:"RasterFunctionTemplate",
ARGUMENT_ARRAY_TYPE:"ArgumentArray",getArgRFT:function(V){if(V){if("RasterFunctionTemplate"===V.type)return V;if(V.value&&"RasterFunctionTemplate"===V.value.type)return V.value}},getEnumData:function(V,ba,ka){if(Array.isArray(V))return V.forEach(function(la){la.key=la.key.toString()}),V},getImageServiceTitle:function(V){V=V.split("/");return V[V.length-2]},isReferencedObject:function(V){if(V&&p.isDefined(V._object_ref_id))return!0},functionTypes:J,defaultRasterNodeProps:{name:"Raster",isDataset:!0,
isPublic:!1,type:"RasterFunctionVariable"},getArcGISImageServiceLayerItem:function(V){if(V){V=K.clone(V);V.name||(V.name=this.getImageServiceTitle(V.url));var ba=new m;V.mosaicRule&&(ba.mosaicRule=new n(V.mosaicRule));V.renderingRule&&(ba.renderingRule=new k(V.renderingRule));ba=new t(V.url,{id:V.name+(new Date).toString(),imageServiceParameters:ba});ba.name=V.name;return ba}},filterMDInfoIfMosiacRuleIsSet:function(V){var ba=K.clone(V.multidimensionalInfo),ka=[],la=V.mosaicRule&&V.mosaicRule.multidimensionalDefinition;
if(la&&0<la.length){var ma=ba.variables.filter(function(ha){return la[0].variableName===ha.name}.bind(this));if(!ma||0===ma.length)return ba;ma=ma[0];ka=K.clone(ma);ka.dimensions=[];la.forEach(function(ha){var Z=ma.dimensions.filter(function(S){return ha.dimensionName===S.name}.bind(this));if(Z&&0!==Z.length){var W=(Z=Z[0])&&Z.values,Q=0,ia=1,R=ha.values&&ha.values.length;switch(ha.values&&ha.values[0].length||R){case 1:Q=W.indexOf(ha.values[0]);ia=Q+1;break;case 2:Q=W.indexOf(ha.values[0][0]),ia=
W.indexOf(ha.values[0][1])+1}W=W.slice(Q,ia);Z.values=W;ka.dimensions.push(Z)}else ka.dimensions=K.clone(ma.dimensions)}.bind(this));ba.variables=[ka]}return ba},getRecurrentIntervalName:B,getCorrespondingDimensionRange:function(V,ba){var ka="StdTime"===V.name,la=ka&&"string"===typeof ba?z(ba):ba,ma=V.values.filter(function(ha){return ha[0]===la})[0];return"object"===typeof ma&&ka?ma.map(function(ha){return C(ha)}):ma},getFormattedDateString:C,parseFormattedDateString:z,getVariables:function(V){var ba=
V.selectedVariables,ka=void 0===ba?[]:ba;return V.multiDimensionalData.variables.filter(function(la){var ma=ka.some(function(ha){return"string"===typeof ha?ha===la.name:ha.value===la.name}.bind(this));return ka.length?ma:!0}.bind(this))},getDimensions:function(V){var ba=V.variables;V=V.selectedDimension;var ka=void 0===V?"":V;return(void 0===ba?[]:ba).reduce(function(la,ma){var ha=ma.dimensions.filter(function(Z){return ka?Z.name===ka:!0}.bind(this));return ha.length?fa(la,ha):la}.bind(this),[])},
getFormattedDimensionValues:function(V){var ba=[];V.forEach(function(ka){var la=ka.hasRanges,ma=ka.recurring,ha;ka.values.forEach(function(Z){var W=K.clone(Z);la||(W=[W]);"StdTime"===ka.name&&(W=W.map(function(Q){return ma?B(Q,ka.interval,ka.intervalUnit):C(Number(Q))}.bind(this)));W=la?W.join(" \u2014 "):W.join("");ha={label:W,value:ma?la?Z.join(" \u2014 "):Z.toString():W,selected:!1,disabled:!1};D(ba,ha)||ba.push(ha)}.bind(this))}.bind(this));return ba},dimensionHasRanges:function(V){var ba=!1;
0<V.length&&(ba=V[0].hasRanges);return ba},getFormattedDimensionRanges:function(V){var ba=[],ka=[];V.forEach(function(la){la=la.label.split(" \u2014 ");ba.push({label:la[0],value:la[0],selected:!1,disabled:!1});ka.push({label:la[1],value:la[1],selected:!1,disabled:!1})});return{min:ba,max:ka}},applyMultidimensionalDefinitionFilter:function(V,ba){var ka=ba&&ba.dimensions&&0<ba.dimensions.length;ba&&"BY_RANGES"===ba.definitionType?ka=ka&&ba.minValues&&0<ba.minValues.length&&ba.maxValues&&0<ba.maxValues.length:
ba&&"BY_VALUES"===ba.definitionType&&(ka=ka&&ba.values&&0<ba.values.length);if(!ka)return V;ka=K.clone(V);ka.forEach(function(la){var ma=la.hasRanges,ha=[],Z=0<=ba.dimensions.indexOf(la.name);Z||(ha=la.values);Z&&ba.dimensions.forEach(function(W,Q){if(W===la.name)switch(ba.definitionType){case "BY_RANGES":var ia=ba.minValues[Q],R=ba.maxValues[Q];"StdTime"===la.name&&(ia=z(ia),R=z(R));"boolean"===typeof ia||isNaN(ia)||(ia=Number(ia));"boolean"===typeof R||isNaN(R)||(R=Number(R));var S=-1,N=-1;if(ma)for(var X=
0;X<la.values.length&&!(la.values[X][0]===ia&&(S=X),la.values[X][1]===R&&(N=X+1),0<=S&&1<=N);X++);else S=la.values.indexOf(ia),N=la.values.indexOf(R)+1;ha=fa(ha,la.values.slice(S,N));break;case "BY_VALUES":var aa=ma?ba.values[Q].split(" \u2014 "):[ba.values[Q]];"StdTime"===la.name&&(aa=aa.map(function(ea){return z(ea)}.bind(this)));ia=la.values.filter(function(ea){"boolean"===typeof ea||isNaN(ea)||(ea=Number(ea));return ma?ea.includes(aa[0])&&ea.includes(aa[1]):aa[0]==ea}.bind(this));ha=fa(ha,ia)}}.bind(this));
la.values=K.clone(ha)}.bind(this));return ka},mapObjectByProperty:function(V,ba){return V.map(function(ka){return ka[ba]}.bind(this))},removeDuplicatesFromArray:function(V){return V.filter(function(ba,ka,la){return la.indexOf(ba)===ka}.bind(this))},UIModifier:{show:function(V){V.classList.remove("hidden")},hide:function(V){V.classList.add("hidden")}},isArrayEqual:function(V,ba){return V&&ba?V.length===ba.length&&V.every(function(ka){return 0<=ba.indexOf(ka)}.bind(this)):!1},makeComboboxSelection:function(V,
ba){var ka=!1;V.forEach(function(la){la.value[0]===ba?ka=la.selected=!0:la.selected=!1});ka||V.unshift({label:ba,value:ba,selected:!0,disabled:!0})},processRFTAsLayerInput:function(V){var ba=esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant,ka=esriGeowConfig.self.helperServices.analysis&&esriGeowConfig.self.helperServices.analysis.url?esriGeowConfig.self.helperServices.analysis.url:"";ba=(ba?ka:ka.replace("rasteranalysis","rasterutils")).replace("SpatialAnalysisTools/GPServer",
"RasterRendering/ImageServer");return new g(ba,{raster:JSON.stringify(V),type:"rft"})},getFunctionName:E,coerceEnumDataForCurrentEnv:function(V,ba,ka){if(!ka)return ba;var la={};la="multitenant"!==ka?{ComputeChangeFunction:{Method:[3,4,5]}}:{ZonalStatistics:{statistics_type:["CIRCULAR_MEAN"]},ComputeChangeFunction:{Method:[3,4,5]}};ka=E(V);for(var ma in la)if(ma===ka){var ha=la[ma],Z;for(Z in ha){var W=ha[Z];V[Z]&&(ba=ba.filter(function(Q){return!(0<=W.indexOf(Q.key))}.bind(this)))}}return ba},createObjectMap:function(V){var ba=
function(ka,la){var ma=ka[la];F(ma)&&(void 0!==ma._object_id&&O.set(ma._object_id,ma),A(ma,ba))};A(V,ba)},processAllComponents:A,isDefinedObject:F,getReferencedObject:function(V){return O.has(V)?O.get(V):null}});K.setObject("dijit.RasterFunctionEditor.utils",w,a);return w})},"esri/layers/ArcGISRenderingImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/config dojo/has dojox/encoding/digests/_base ../kernel ../config ../request ../deferredUtils ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t){K=K([q,t],{declaredClass:"esri.layers.ArcGISRenderingImageServiceLayer",rasterType:{rft:"rft",rasterObject:"rasterObj",url:"url"},constructor:function(m,n){this.type=n.type;var k=this._processRasterParam(n.raster);k&&(this._initialize(m+"?raster\x3d"+k,n),this.useMapImage=n&&n.useMapImage||!1)},_processRasterParam:function(m){if(m)return this.type===this.rasterType.rft||this.type===this.rasterType.rasterObject?("object"===typeof m&&(m=JSON.stringify(m)),m=f.stringToWord(m),
f.wordToBase64(m)):m},refresh:function(m){if(!0===m)this.inherited(arguments);else{var n=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=n}},setRaster:function(m){m=this._processRasterParam(m);this._url.query.raster=m;this._params.raster=m;this.refresh(!0)},setRenderer:function(m,n){this.renderer=m;this.onRendererChange();n||this.refresh(!0)},exportMapImage:function(m,n){var k=a.defaults.map;k=G.mixin({size:k.width+","+k.height},this._params,
m?m.toJson(this.normalization):{},{f:"json"});delete k._ts;this._exportMapImage(this._url.path+"/exportImage",k,n)},getMultidimensionalInfo:function(){var m=this._url.path+"/multiDimensionalInfo",n=new w(p._dfdCanceller);if(this._multidimensionalInfo)return n.resolve(this._multidimensionalInfo),n;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(n._pendingDfd=b({url:m,content:G.mixin(this._params,{f:"json",token:this._getToken()}),handleAs:"json",callbackParamName:"callback"}),n._pendingDfd.then(G.hitch(this,
function(k){this._multidimensionalInfo=k.multidimensionalInfo;n.callback(k.multidimensionalInfo)}),function(k){n.errback(k)})):(m=Error("Layer does not support multidimensional info"),m.log=!!v.isDebug,n.errback(m));return n}});G.setObject("layers.ArcGISRenderingImageServiceLayer",K,c);return K})},"esri/dijit/analysis/mixins/browselayers/configs/AGOLBrowseItem":function(){define(["dojo/_base/lang","dojo/has","../../../../../kernel","./EnterpriseBrowseItem","../../../ItemTypes"],function(K,G,w,v,r){G=
{getConfig:function(f){var c=v.getConfig(f);c.baseSections.push("all");c.baseSections.push("subscription");(-1<f.allowedItemTypes.indexOf(r.RFT)||-1<f.allowedItemTypes.indexOf(r.DLPK))&&c.baseSections.push("livingAtlas");return c}};K.setObject("dijit.analysis.mixins.browselayers.configs.AGOLBrowseItem",G,w);return G})},"esri/dijit/analysis/mixins/browselayers/configs/EnterpriseBrowseItem":function(){define("dojo/_base/lang dojo/has dojox/lang/functional/object ../../../../../kernel ./Common ../../../AnalysisRegistry ../../../ItemTypes dojo/i18n!../../../nls/BrowseLayerMixin".split(" "),
function(K,G,w,v,r,f,c,a){G={getConfig:function(b){var p=b.disableLAAL?{customSections:[]}:{customSections:r.getLAALCustomSection(b)};!b.disableBoundary&&b.portal.EsriBoundaryLayersGroupQuery&&p.customSections.push(r.getBoundaryLayersSection(b));-1<b.allowedItemTypes.indexOf(c.RFT)&&b.showRFTSystemSection&&p.customSections.push(r.getSystemRFTSection(b));p=K.mixin({dialogTitle:b.title||a.customAnalysisLayerTitle,allowedItemTypes:b.allowedItemTypes,availableItemTypeFilters:b.availableItemTypeFilters,
baseSections:["myContent","myFavorites","myGroups","myOrganization"],resultsPerQuery:r.getNumberOfPages(),layoutMode:"fullscreen",staticFilters:r.getStaticFilters(b.customQueryTags),mainActionTitle:a.mainActionTitle,customActions:[r.getAddtoMapActions(b.onActionSubLayer)],showSubResources:this._getSubResourcesForPortal(b),disabledSubResources:b.disabledSubResources,addQueryParameters:b.addQueryParameters,enableMapAreaFilter:b.enableMapAreaFilter},p);b.showRFTEditCustomAction&&p.customActions.push(r.getEditRFTActions(b.onEditRFT));
return p},_getSubResourcesForPortal:function(b){var p={};-1<b.allowedItemTypes.indexOf(c.FS)&&(p[c.FS]={allowed:function(q){return this.allowedItemsForTypes(q,b.customQueryTags)}.bind(this),onSelect:b.onSelectSubLayer,customActions:[r.getAddtoMapActions(b.onActionSubLayer)],filters:this._getFilterforSubLayer(!1,b.customQueryTags)});-1<b.allowedItemTypes.indexOf(c.MS)&&(p[c.MS]={allowed:function(q){return this.allowedItemsForTypes(q,b.customQueryTags)}.bind(this),onSelect:b.onSelectSubLayer,customActions:[r.getAddtoMapActions(b.onActionSubLayer)],
filters:this._getFilterforSubLayer(!1,b.customQueryTags)});-1<b.allowedItemTypes.indexOf(c.BIGDATA)&&(p[c.BIGDATA]={allowed:function(q){return this.allowedItemsForTypes(q,b.customQueryTags)}.bind(this),onSelect:b.onSelectSubLayer,filters:this._getFilterforSubLayer(!0,b.customQueryTags)});-1<b.allowedItemTypes.indexOf(c.GPSERVICE)&&(p[c.GPSERVICE]={allowed:function(){return!0},onSelect:b.onSelectGPTool,filters:[]});return p},_getFilterforSubLayer:function(b,p){var q=[];q.push(this.getGeometryFilter(p.geometryTypes));
p.layerTypes&&(b?q.push(this.getFilterForLayerTypesForBigData(p.layerTypes)):q.push(this.getFilterForLayerTypesForFS(p.layerTypes)));p.timeTypes&&q.push(this.getTimeFilter(p.timeTypes));return q},getGeometryFilter:function(b){var p=[];(b&&0<b.length?b:w.values(f.GeometryTypes)).forEach(function(q){switch(q){case f.GeometryTypes.Point:p.push({displayName:a.pointFilterName,allowed:this.filters.geometryTypes[f.GeometryTypes.Point],value:"point"});break;case f.GeometryTypes.Polygon:p.push({displayName:a.polygonFilterName,
allowed:this.filters.geometryTypes[f.GeometryTypes.Polygon],value:"polygon"});break;case f.GeometryTypes.Line:p.push({displayName:a.lineFilterName,allowed:this.filters.geometryTypes[f.GeometryTypes.Line],value:"line"});break;case f.GeometryTypes.MultiPoint:p.push({displayName:a.multiPointFilterName,allowed:this.filters.geometryTypes[f.GeometryTypes.MultiPoint],value:"multipoint"})}},this);return{allowed:function(){return!0},displayName:a.geometryFilterName,value:"geometry",children:p}},getFilterForLayerTypesForFS:function(b){var p=
[];(b?0<b.length?b:[c.FLAYER,c.TABLE]:[]).forEach(function(q){switch(q){case c.FLAYER:p.push({displayName:a.featureLayerName,allowed:this.filters.layerTypes[c.FLAYER],value:"featurelayer"});break;case c.TABLE:p.push({displayName:a.tableLayerName,allowed:this.filters.layerTypes[c.TABLE],value:"ftable"})}},this);return{allowed:function(){return!0},displayName:a.itemTypeFilterName,value:"itemtype",children:p}},getFilterForLayerTypesForBigData:function(b){var p=[];(b?0<b.length?b:[c.BDATAFEATURE,c.BTABLE]:
[]).forEach(function(q){switch(q){case c.BDATAFEATURE:p.push({displayName:a.featureLayerName,allowed:this.filters.layerTypes[c.BDATAFEATURE],value:"bfeaturelayer"});break;case c.BTABLE:p.push({displayName:a.tableLayerName,allowed:this.filters.layerTypes[c.BTABLE],value:"btable"})}},this);return{allowed:function(){return!0},displayName:a.featureLayerName,value:"itemtype",children:p}},getTimeFilter:function(b){var p=[];(b?0<b.length?b:[f.TimeTypes.Instant,f.TimeTypes.Interval]:[]).forEach(function(q){switch(q){case f.TimeTypes.Instant:p.push({displayName:a.instantFilterName,
allowed:this.filters.timeTypes[f.TimeTypes.Instant].bind(this),value:"instant"});break;case f.TimeTypes.Interval:p.push({displayName:a.intervalFilterName,allowed:this.filters.timeTypes[f.TimeTypes.Interval].bind(this),value:"interval"})}},this);return{allowed:function(){return!0},displayName:a.timeFilterName,value:"time",children:p}},allowedItemsForTypes:function(b,p){var q=!0,t=p.layerTypes||[c.FLAYER,c.BDATAFEATURE];p.geometryTypes&&b.geometryType&&(p.geometryTypes=0<p.geometryTypes.length?p.geometryTypes:
w.values(f.GeometryTypes),q=q&&-1!==p.geometryTypes.indexOf(b.geometryType));t&&b.type&&(t=0<t.length?t:[c.FLAYER,c.BDATAFEATURE,c.BTABLE,c.TABLE],q=q&&-1!==t.indexOf(b.type));p.timeTypes&&(p.timeTypes=0<p.timeTypes.length?p.timeTypes:[f.TimeTypes.Instant,f.TimeTypes.Interval],q=q&&-1!==p.timeTypes.indexOf(this.getTimeType(b)));p.customCheck&&p.customCheck.customCheckHandler&&(q=q&&p.customCheck.customCheckHandler(b));return q&&b},getTimeType:function(b){return b?this.isDefined(b.timeInfo)&&this.isDefined(b.timeInfo.startTimeField)&&
!this.isDefined(b.timeInfo.endTimeField)?f.TimeTypes.Instant:this.isDefined(b.timeInfo)&&this.isDefined(b.timeInfo.startTimeField)&&this.isDefined(b.timeInfo.endTimeField)?f.TimeTypes.Interval:this.isDefined(b.time)&&this.isDefined(b.time.timeType)?b.time.timeType:!1:!1},isDefined:function(b){return void 0!==b&&null!==b},filters:{layerTypes:{"Feature Layer":function(b){return b.type===c.FLAYER},Table:function(b){return b.type===c.TABLE},featureClass:function(b){return b.type===c.BDATAFEATURE},table:function(b){return b.type===
c.BTABLE}},geometryTypes:{esriGeometryMultipoint:function(b){return b.geometryType===f.GeometryTypes.MultiPoint},esriGeometryPolyline:function(b){return b.geometryType===f.GeometryTypes.Line},esriGeometryPolygon:function(b){return b.geometryType===f.GeometryTypes.Polygon},esriGeometryPoint:function(b){return b.geometryType===f.GeometryTypes.Point}},timeTypes:{instant:function(b){return this.getTimeType(b)===f.TimeTypes.Instant},interval:function(b){return this.getTimeType(b)===f.TimeTypes.Interval}}}};
K.setObject("dijit.analysis.mixins.browselayers.configs.EnterpriseBrowseItem",G,v);return G})},"esri/dijit/analysis/mixins/browselayers/configs/Common":function(){define(["dojo/_base/lang","dojo/has","../../../../../kernel","dojo/i18n!../../../nls/BrowseLayerMixin","../../../ItemTypes"],function(K,G,w,v,r){G={getLAALCustomSection:function(f){var c=this._isCustomAnalysisQuery(f.portal,f.isPortal),a=[{name:v.customeSectionName,baseQuery:this._getLAALBaseQuery(f.customQueryTags,f.portal,f.isPortal),
filters:[{fetchGroupIdByQuery:this._getDefaultQueryString(f.isPortal),name:v.Categories,type:"group",path:["categories"],staticSchema:this._getStaticLAALSchema(f.portal,f.isPortal)}].concat(this._getFilters(f.isPortal)),disableSubResources:!0}];c&&a.push({name:v.customAnalysisGroupName,baseQuery:"",filters:[{id:this._getAnalysisGroupQuery(f.portal,f.isPortal).split(":")[1],name:v.Categories,type:"group",path:["categories"],staticSchema:void 0}].concat(this._getFilters(f.isPortal)),disableSubResources:!1});
return a},getAddtoMapActions:function(f){return{allowed:function(c){return c.type!==r.RFT&&c.type!==r.XLS&&c.type!==r.CSV&&c.type!==r.DLPK},asynchronous:!1,onAction:f,name:v.customActionName}},getEditRFTActions:function(f){return{allowed:function(c){return c.type===r.RFT&&!c.rfxTemplateData},asynchronous:!1,onAction:f,name:v.edit}},getSystemRFTSection:function(f){var c='(group:"'+(f.rftGroupId&&f.rftGroupId.id)+'") -type:"Attachment" -tags:"mature support"';f.isPortal||(c+=' -typekeywords:"categoryname#distance (legacy)system_rft"');
return{name:"System",baseQuery:c,filters:[].concat(this._getFilters(f.isPortal)),addToFront:!1,sortField:"title"}},getStaticFilters:function(f){if((f=f.tags)&&0!==f.length){var c=[];f.forEach(function(a){c.push(v[a]?v[a]:a)});return c}},getBoundaryLayersSection:function(f){return{name:v.boundaryLayers,baseQuery:"("+f.portal.EsriBoundaryLayersGroupQuery.split("AND")[1].trim()+')-type:"Attachment" -tags:"mature support"',filters:this._getFilters(f.isPortal),addToFront:!1,disableSubResources:!1}},getNumberOfPages:function(){return 16},
_getLAALBaseQuery:function(f,c,a){a=['typekeywords:"Analysis Ready"'];(c||c.user||!c.user.demographics)&&a.push('-typekeywords:"Requires Credits"');a.push('-type:"Attachment" -tags:"mature support"');a.push(this._queryTagsForLivingAtlasItemBrowser(f));return a.join(" ")},_queryTagsForLivingAtlasItemBrowser:function(f){f=f.tags;var c=[];if(!f||0===f.length)return"";if(1===f.length)return"tags: ("+f[0]+")";f.forEach(function(a){c.push(a)});return"tags: ("+c.join(" OR ")+")"},_getAnalysisGroupQuery:function(f,
c){return this._isCustomAnalysisQuery(f,c)},_getDefaultQueryString:function(f){var c='title:"Living Atlas Analysis Layers" AND owner:esri';f&&(c='title:"Living Atlas Analysis Layers" AND owner:esri_livingatlas');return c},_isCustomAnalysisQuery:function(f,c){return f&&f.analysisLayersGroupQuery&&f.analysisLayersGroupQuery!==this._getDefaultQueryString(c)?f.analysisLayersGroupQuery:!1},_getStaticLAALSchema:function(f,c){return[{title:"categories",categories:[{title:"boundaries and places",categories:[{title:"boundaries",
categories:[],displayName:v.boundaries},{title:"places",categories:[],displayName:v.places}],displayName:v.boundariesAndPlaces},{title:"hexbins",categories:[],displayName:v.hexbins},{title:"transportation",categories:[],displayName:v.transportation}]}]},_getFilters:function(f){return["tags"]}};K.setObject("dijit.analysis.mixins.browselayers.configs.Common",G,w);return G})},"arcgisonline/pages/item/widgets/typeOptions/solution":function(){define("require exports tslib ./_mixin ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/a11yclick dojo/Deferred dojo/dom-construct dojo/dom-class dojo/on dojo/_base/lang dojo/text!./solution.html ../../../utils/icons ../../../utils/dom ../../../utils/focus ../../../utils/validation".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);var e;(function(d){d.id="id";d.version="version"})(e||(e={}));return function(){function d(g,u){this.templateString=m["default"];this.icons=
n["default"];this.editA11yLabel="";this.disableEditPopup=!0;this.versionPrefix="solutionversion-";this.idPrefix="solutionid-"}d.prototype.postCreate=function(){this.inherited(arguments);this._version=this._getValueByTypeKey(this.versionPrefix);this._id=this._getValueByTypeKey(this.idPrefix);this.disableEditPopup=-1<this.item.typeKeywords.indexOf("Deployed");this.render();this._setupA11y();this._addEventListeners()};d.prototype.render=function(){this.editA11yLabel&&(this._editVersionBtn.setAttribute("aria-label",
this.editA11yLabel),this._editIDBtn.setAttribute("aria-label",this.editA11yLabel));this._versionTextbox=this._createInput("solution-version-input",this._version,this._formVersionContent);this._inputVersionError=this._createInputError(this._formVersionContent);this._idTextbox=this._createInput("solution-id-input",this._id,this._formIDContent);this._inputIDError=this._createInputError(this._formIDContent);this.disableEditPopup&&(p["default"].add(this._editVersionBtn,"solution-settings__btn-disabled"),
p["default"].add(this._editVersion,"solution-settings__display-none"),p["default"].add(this._solutionID,"solution-settings__display-none"));this.inherited(arguments)};d.prototype.save=function(){var g=this._getChanges(),u=new a["default"];u.resolve({changed:{},toChange:g});return u};d.prototype.cancel=function(g){this._toggleEdit(!1,g);g===e.version?this._resetVersion():this._resetId();this.hasChanges();this._handlePropertyChange()};d.prototype.reset=function(){this._resetFormValues();var g=new a["default"];
g.resolve();return g};d.prototype.retrievePropertyValues=function(){return{version:this._versionTextbox.value.trim(),id:this._idTextbox.value.trim()}};d.prototype.hasChanges=function(){var g=this.retrievePropertyValues();return this._saveAsChanged=this._version!==g.version||this._id!==g.id};d.prototype.validate=function(){var g=new a["default"];g.resolve({validates:!0});return g};d.prototype._addEventListeners=function(){var g=this;this.inherited(arguments);this.own(q["default"](this._versionTextbox,
"keyup",function(u){13===u.keyCode?g._stageChange(e.version):g._isValid(e.version)}));this.own(q["default"](this._idTextbox,"keyup",function(u){13===u.keyCode?g._stageChange(e.id):g._isValid(e.id)}));this.disableEditPopup||(this.own(c["default"](this._editVersionBtn,this._toggleEdit.bind(this,!0,e.version)),c["default"](this._saveVersionBtn,this._stageChange.bind(this,e.version)),c["default"](this._cancelVersionBtn,this.cancel.bind(this,e.version))),this.own(c["default"](this._editIDBtn,this._toggleEdit.bind(this,
!0,e.id)),c["default"](this._saveIDBtn,this._stageChange.bind(this,e.id)),c["default"](this._cancelIDBtn,this.cancel.bind(this,e.id))))};d.prototype._createInput=function(g,u,x){return b["default"].create("input",{id:g,type:"text",value:u,maxLength:55},x)};d.prototype._createInputError=function(g){return b["default"].create("div",{"class":"input-error-message"},g)};d.prototype._getValueByTypeKey=function(g){var u=this.item.typeKeywords.filter(function(x){return-1<x.indexOf(g)}).map(function(x){return x.replace(g,
"")});return 1===u.length?u[0]:void 0};d.prototype._isValid=function(g){var u=!0,x=g===e.version?this._versionTextbox:this._idTextbox,y=g===e.version?this._inputVersionError:this._inputIDError,B=g===e.version?this._saveVersionBtn:this._saveIDBtn,C=x.value.trim();if(C&&0<C.length){if(g===e.version&&!/^[1-9][\.\d]*?$/.test(C)){u=!1;var z=this.i18n.solution.invalidValue}}else u=!1,z=this.i18n.solution.valueRequired;u||(y.innerHTML=z);u?(h["default"].clearState([x,y]),k["default"].disableNode(B,!1)):
(h["default"].setInvalidState(x,y),k["default"].disableNode(B,!0));return u};d.prototype._resetFormValues=function(){this._resetVersion();this._resetId()};d.prototype._resetVersion=function(){this._versionTextbox.value=this._version;this._updateDisplayValue(this._version,e.version);this._versionTextbox.classList.remove("input-error");this._inputVersionError.classList.remove("is-active")};d.prototype._resetId=function(){this._idTextbox.value=this._id;this._updateDisplayValue(this._id,e.id);this._idTextbox.classList.remove("input-error");
this._inputIDError.classList.remove("is-active")};d.prototype._getChanges=function(){var g=this,u={addTypeKeywords:[],removeTypeKeywords:[]},x=t["default"].clone(this.item.typeKeywords),y=this._idTextbox.value.trim(),B=this._versionTextbox.value.trim();B=this._updateVersionValue(B);y!==this._id&&this._isValid(e.id)&&(u.addTypeKeywords=x.filter(function(C){return-1===C.indexOf(g.idPrefix)}),u.removeTypeKeywords=x.filter(function(C){return-1<C.indexOf(g.idPrefix)}),u.addTypeKeywords.push(this.idPrefix+
y),this._id=y);B!==this._version&&this._isValid(e.version)&&(u.addTypeKeywords=u.addTypeKeywords.filter(function(C){return-1===C.indexOf(g.versionPrefix)}),x=x.filter(function(C){return-1<C.indexOf(g.versionPrefix)}),u.removeTypeKeywords=u.removeTypeKeywords.concat(x),u.addTypeKeywords.push(this.versionPrefix+B),this._version=B);return u};d.prototype._stageChange=function(g){var u=(g===e.version?this._versionTextbox:this._idTextbox).value.trim();(g===e.version?this._version:this._id)!==u&&this._isValid(g)&&
this._updateDisplayValue(u,g);this._toggleEdit(!1,g);this._handlePropertyChange()};d.prototype._setupA11y=function(){if(!this.disableEditPopup&&this._editVersionBtn&&this._editVersionForm){var g=this.id+"-edit-version-form";this._editVersionForm.setAttribute("id",g);this._editVersionBtn.setAttribute("aria-expanded","false");this._editVersionBtn.setAttribute("aria-controls",g)}!this.disableEditPopup&&this._editIDBtn&&this._editIDForm&&(g=this.id+"-edit-id-form",this._editIDForm.setAttribute("id",g),
this._editIDBtn.setAttribute("aria-expanded","false"),this._editIDBtn.setAttribute("aria-controls",g))};d.prototype._toggleEdit=function(g,u){var x=u===e.version?this._editVersionForm:this._editIDForm,y=u===e.version?this._editVersionBtn:this._editIDBtn,B=u===e.version?this._saveVersionBtn:this._saveIDBtn;k["default"].showHide(x,g);if(g){y.setAttribute("aria-expanded","true");k["default"].disableNode(B,!0);this.focusTrapListener&&l["default"].untrapFocus(x,this.focusTrapListener);this.focusTrapListener=
l["default"].trapFocus(x);var C=l["default"].getFocusableElements(x);C.length&&setTimeout(function(){C.shift().focus()},100)}else y.setAttribute("aria-expanded","false"),this.focusTrapListener&&(l["default"].untrapFocus(x,this.focusTrapListener),this.focusTrapListener=void 0),y.focus()};d.prototype._updateDisplayValue=function(g,u){var x=u===e.version?this._displayVersionValue:this._displayIDValue;u===e.version&&(g=this._updateVersionValue(g));x.textContent=g};d.prototype._updateVersionValue=function(g){/[.]\d$/.test(g)||
(g=/[.]{1,}$/.test(g)?g.replace(/[.]{1,}$/,".0"):g+".0");return g};return d=w.__decorate([r["default"](v["default"],f["default"])],d)}()})},"arcgisonline/pages/item/widgets/typeOptions/opFieldMaps":function(){define("require exports tslib dojo/Deferred dojo/on dojo/text!./opFieldMaps.html dijit/_TemplatedMixin ./_mixin arcgisonline/tsutils/declareDecorator".split(" "),function(K,G,w,v,r,f,c,a,b){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);
b=w.__importDefault(b);return function(){function p(q,t){this.templateString=f["default"];this.FIELD_MAPS_DISABLED="FieldMapsDisabled";this.hasChanged=!1}p.prototype.hasChanges=function(){return this.hasChanged};p.prototype.save=function(){var q=new v["default"],t={};this.hasChanged&&(this.checkbox.checked?t.removeTypeKeywords=[this.FIELD_MAPS_DISABLED]:t.addTypeKeywords=[this.FIELD_MAPS_DISABLED]);q.resolve({changed:{},toChange:t});return q};p.prototype.reset=function(){var q=new v["default"];this.checkbox.checked=
-1===this.item.typeKeywords.indexOf(this.FIELD_MAPS_DISABLED);q.resolve();return q};p.prototype._initHandlers=function(){var q=this;this.own(r["default"](this.checkbox,"change",function(){return q.handleCheckboxChange()}))};p.prototype.handleCheckboxChange=function(){this.hasChanged=!0;this._handlePropertyChange()};return p=w.__decorate([b["default"](a["default"],c["default"])],p)}()})},"arcgisonline/pages/item/widgets/typeOptions/cache":function(){define("require exports tslib ../../../pageUtil ./_mixin ../../../utils/arrays ../../../utils/dom ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/Deferred dojo/on esri/lang dojo/text!./cache.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);return function(){function k(l,h){this.templateString=n["default"];this.CACHE_OPTIONS=[0,30,60,120,300,900,1800,3600]}k.prototype._initHandlers=function(){this.own(t["default"](this.cacheControlSelect,"change",
this._handlePropertyChange.bind(this)))};k.prototype.hasChanges=function(){var l=this.retrievePropertyValues();return this.cacheControlChanged=this.cacheMaxAge!==l.cacheMaxAge};k.prototype.retrievePropertyValues=function(){var l={};a["default"].isPortal()||(l.cacheMaxAge=parseInt(c["default"].getSelectedOption(this.cacheControlSelect.options).value,10));return l};k.prototype.save=function(){var l=new q["default"],h=a["default"].isPortal(),e=this.retrievePropertyValues(),d={};!h&&this.cacheControlChanged&&
(d.advancedSettings={cacheMaxAge:e.cacheMaxAge});l.resolve({changed:{},toChange:d});return l};k.prototype.reset=function(){var l=new q["default"];this.cacheControlDefaultOption.innerHTML=this.i18n.itemProperties.cacheControlOptions.never;this.inspect();this.updateUI();l.resolve();return l};k.prototype.inspect=function(){var l,h;!a["default"].isPortal()&&m["default"].isDefined(null===(l=this.item.advancedSettings)||void 0===l?void 0:l.cacheMaxAge)?this.cacheMaxAge=null===(h=this.item.advancedSettings)||
void 0===h?void 0:h.cacheMaxAge:this.cacheMaxAge=void 0};k.prototype.updateUI=function(){if(!a["default"].isPortal())if(this.cacheControlHelpLink.href=""+this.item.portal.helpBase+(this.item.portal.helpMap.m["120001509"]||""),void 0!==this.cacheMaxAge){var l=this.cacheMaxAge;f["default"].includes(this.CACHE_OPTIONS,l)||(l=this.cacheMaxAge=v["default"].findClosestValue(this.CACHE_OPTIONS,this.cacheMaxAge));c["default"].selectOption(this.cacheControlSelect.options,""+l)}else{l=this.item.sourceUrl?/\/FeatureServer$/gi.test(this.item.sourceUrl):
!1;var h=this.item.sourceUrl?/\/FeatureServer\??/gi.test(this.item.sourceUrl):!1;"public"!==this.item.access||l||h?this.cacheControlDefaultOption.innerHTML=this.i18n.itemProperties.cacheControlOptions.sameAsSource:c["default"].selectOption(this.cacheControlSelect.options,""+this.CACHE_OPTIONS[1])}};return k=w.__decorate([b["default"](r["default"],p["default"])],k)}()})},"arcgisonline/pages/item/widgets/typeOptions/graph":function(){define("require exports tslib ../../../serviceUtil ../../../statusUtil ../../../components/ConfirmDialog ./_mixin ../../../utils/arrays ../../../utils/dom ../../../utils/polling ../../../utils/strings ../../../../sharing/util ../../../../tsutils/declareDecorator dijit/_TemplatedMixin dojo/Deferred dojo/on dojo/topic preact dojo/text!./graph.html".split(" "),
function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);d=w.__importDefault(d);return function(){function g(u,x){this.templateString=d["default"];this.activeAsyncJobs={}}g.prototype.destroy=
function(){this.inherited(arguments);this.longRunningJobWarningContainer&&this.closeLongRunningWarning()};g.prototype._initHandlers=function(){var u=this._handlePropertyChange.bind(this),x=this.toggleEditingAllowed.bind(this,u);this.own(l["default"](this.enableEditing,"change",this.toggleEditing.bind(this,u,!0)),l["default"](this.enableAdd,"change",x),l["default"](this.enableDelete,"change",x),l["default"](this.enableUpdate,"change",x),l["default"](this.editPropsOnly,"change",x),l["default"](this.editPropsAndGeometry,
"change",x));this.closeLongRunningWarning=this.closeLongRunningWarning.bind(this)};g.prototype.retrievePropertyValues=function(){var u=this.enableEditing.checked,x=u&&this.enableUpdate.checked;return{editingEnabled:u,allowAdd:u&&this.enableAdd.checked,allowDelete:u&&this.enableDelete.checked,allowUpdate:x,allowUpdatePropsOnly:u&&x&&this.editPropsOnly.checked}};g.prototype.hasChanges=function(){var u=this.retrievePropertyValues();return this.editingChanged=this.editingInfo.editingEnabled!==u.editingEnabled||
this.editingInfo.allowAdd!==u.allowAdd||this.editingInfo.allowDelete!==u.allowDelete||this.editingInfo.allowUpdate!==u.allowUpdate||this.editingInfo.allowUpdateOnly!==u.allowUpdatePropsOnly};g.prototype.save=function(){var u=this,x=new k["default"],y=t["default"].isPortal(),B=this.retrievePropertyValues(),C={},z={},D={};B.editingEnabled?(C.capabilities="Query,Editing",B.allowAdd&&(C.capabilities+=",Create"),B.allowUpdate&&(C.capabilities+=",Update"),B.allowDelete&&(C.capabilities+=",Delete"),this.editingInfo.allowUpdateOnly!==
B.allowUpdatePropsOnly&&(C.allowGeometryUpdates=!B.allowUpdatePropsOnly)):C.capabilities="Query";if(this.editingChanged){B=void 0;var E={updateDefinition:JSON.stringify(C)};B=y?this.item.adminUrl+"/updateDefinition":this.item.url.replace("/rest/","/rest/admin/")+"/updateDefinition";B=v["default"].encodeServiceName(B);t["default"].request({url:B,content:E},{usePost:!0,timeout:6E4}).then(function(A){z.serviceChanged=!0;E.async&&A.statusURL?(u.activeAsyncJobs[A.statusURL]=!0,setTimeout(function(){u.activeAsyncJobs[A.statusURL]&&
(u.openLongRunningWarning(),u.activeAsyncJobs[A.statusURL]=void 0)},6E5),r["default"].checkAsyncJobStatusWithVaryingInterval(A.statusURL,p["default"].asyncIntervalTimerFunction).then(function(){u.activeAsyncJobs[A.statusURL]=void 0;h["default"].publish("settings/update/serviceInfo",C);x.resolve({changed:z,toChange:D})},function(F){u.activeAsyncJobs[A.statusURL]=void 0;x.reject(F)})):(h["default"].publish("settings/update/serviceInfo",C),x.resolve({changed:z,toChange:D}))},function(A){x.reject(A)})}else x.resolve({changed:z,
toChange:D});return x};g.prototype.reset=function(){var u=new k["default"];this.inspectServiceInfo();this.updateUI();u.resolve();return u};g.prototype._handlePropertyChange=function(){var u=this.retrievePropertyValues(),x=this.hasChanges();this.emitChanged(u,x)};g.prototype.inspectServiceInfo=function(){var u=this.item.adminServiceInfo||{},x=q["default"].stringToArray(u.capabilities||"",",",!0);this.editingInfo={editingEnabled:!1,allowAdd:!1,allowDelete:!1,allowUpdate:!1,allowUpdatePropsOnly:!1};
a["default"].includes(x,"Editing")?(this.editingInfo.editingEnabled=!0,this.editingInfo.allowAdd=a["default"].includes(x,"Create"),this.editingInfo.allowDelete=a["default"].includes(x,"Delete"),this.editingInfo.allowUpdate=a["default"].includes(x,"Update"),this.editingInfo.allowUpdatePropsOnly=this.editingInfo.allowUpdate&&!u.allowGeometryUpdates):this.editingInfo.editingEnabled=!1};g.prototype.updateUI=function(){var u=this.page._formatSharing(this.item.sharing);this.howToShare.innerHTML=u&&u!==
this.i18n.itemProperties.itemNotShared?this.i18n.itemProperties.currentLayerSharing+" "+u:this.i18n.itemProperties.currentLayerNotShared;this.updateSharedUpdateUI();this.editingInfo.editingEnabled?(this.enableAdd.checked=this.editingInfo.allowAdd,this.enableDelete.checked=this.editingInfo.allowDelete,this.enableUpdate.checked=this.editingInfo.allowUpdate,(u=this.editingInfo.allowUpdatePropsOnly)?this.editPropsOnly.checked=!0:this.editPropsAndGeometry.checked=!0,b["default"].showHide(this.enableUpdateOptions,
this.editingInfo.allowUpdate),this.enableEditing.checked=!0):(this.enableAdd.checked=!1,this.enableDelete.checked=!1,this.enableUpdate.checked=!1,b["default"].showHide(this.enableUpdateOptions,this.editingInfo.allowUpdate),(u=this.editingInfo.allowUpdatePropsOnly)?this.editPropsOnly.checked=!0:this.editPropsAndGeometry.checked=!0,this.enableEditing.checked=!1);this.toggleEditing();this.toggleEditingAllowed()};g.prototype.updateSharedUpdateUI=function(){var u;b["default"].hideNode(this.updateCapableGroupsContainer);
0<(null===(u=this.item.sharing.groups)||void 0===u?void 0:u.length)&&(u=this.fetchSharedUpdateGroups(this.item.sharing),0<(null===u||void 0===u?void 0:u.length)&&(this.updateCapableGroups.innerHTML=this.formatSharedUpdateGroups(u),b["default"].showNode(this.updateCapableGroupsContainer)))};g.prototype.openLongRunningWarning=function(){this.longRunningJobWarningContainer=document.createElement("div");document.body.appendChild(this.longRunningJobWarningContainer);e.render(e.h(f["default"],{strings:{title:this.i18n.common.notice,
description:this.i18n.itemProperties.longRunningOperation,ok:this.i18n.common.ok},autoCloseOnOk:!0,hideCancel:!0,onOk:this.closeLongRunningWarning,onCancel:this.closeLongRunningWarning}),this.longRunningJobWarningContainer)};g.prototype.closeLongRunningWarning=function(){e.render(null,this.longRunningJobWarningContainer);document.body.removeChild(this.longRunningJobWarningContainer);this.longRunningJobWarningContainer=void 0};g.prototype.fetchSharedUpdateGroups=function(u){return u.groups.filter(function(x){return a["default"].includes(x.capabilities,
"updateitemcontrol")})};g.prototype.formatSharedUpdateGroups=function(u){var x=this.i18n.itemProperties.groupDetails;u=(u||[]).map(function(y){var B=t["default"].htmlEncode(y.title);return'\x3ca href\x3d"group.html?owner\x3d'+(y.owner+"\x26title\x3d"+encodeURIComponent(y.title))+'" alt\x3d"'+x+'" title\x3d"'+x+'"\x3e'+B+"\x3c/a\x3e"});return u.join(", ")};g.prototype.toggleEditingAllowed=function(u){var x,y=this.enableUpdate.checked,B=this.enableAdd.checked&&!this.enableDelete.checked&&!y;b["default"].showHide(this.enableUpdateOptions,
y);y=[this.enableAdd,this.enableDelete,this.enableUpdate];1===y.filter(function(C){return C.checked}).length?y.forEach(function(C){C.checked&&(C.disabled=!0,C.parentElement.classList.add("optimizing"))}):y.forEach(function(C){C.disabled=!1;C.parentElement.classList.remove("optimizing")});B||this.toggleEditing();null===(x=null===u||void 0===u?void 0:u.call)||void 0===x?void 0:x.call(u)};g.prototype.toggleEditing=function(u,x){var y,B=this.enableEditing.checked;b["default"].nodeListToArray(this.domNode.querySelectorAll(".requires-editing")).forEach(function(C){C.classList[B?
"remove":"add"]("no-editing")});b["default"].showHideAll(b["default"].nodeListToArray(this.domNode.querySelectorAll(".editing-properties")),B);B&&!this.editingInfo.editingEnabled&&x&&(b["default"].checkNode(this.enableAdd,!0),b["default"].checkNode(this.enableUpdate,!0),b["default"].checkNode(this.enableDelete,!0),b["default"].checkNode(this.editPropsAndGeometry,!0),b["default"].showNode(this.enableUpdateOptions));null===(y=null===u||void 0===u?void 0:u.call)||void 0===y?void 0:y.call(u)};return g=
w.__decorate([m["default"](c["default"],n["default"])],g)}()})},"arcgisonline/pages/item/widgets/typeOptions/hostedView":function(){define("require exports tslib preact ./_mixin dijit/_TemplatedMixin dojo/on dojo/topic arcgisonline/pages/utils/dom arcgisonline/sharing/util arcgisonline/pages/utils/strings dojo/text!./hostedView.html arcgisonline/pages/components/UpdateViewModal ./featureSupport ../../../../tsutils/declareDecorator".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k){r=w.__importDefault(r);
f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);k=w.__importDefault(k);return function(){function l(h,e){this.templateString=t["default"];this.closeModal=this.closeModal.bind(this)}l.prototype.postMixInProperties=function(){this.i18n=w.__assign({},this.i18n.itemProperties.hostedViewSection)};l.prototype.postCreate=function(){this.inherited(arguments);this.checkCanUpdateView()};
l.prototype._initHandlers=function(){var h=this;this.own(c["default"](this.updateViewButton,"click",function(){h.openModal()}))};l.prototype.checkCanUpdateView=function(){var h,e,d;return w.__awaiter(this,void 0,void 0,function(){var g,u,x,y,B,C;return w.__generator(this,function(z){switch(z.label){case 0:if(null===(e=null===(h=this.item.relatedItems)||void 0===h?void 0:h.Service2Service_forward)||void 0===e||!e.length)return[2];if(this.item.relatedItems.Service2Service_forward.some(function(D){return-1<
["Map Service","Vector Tile Service"].indexOf(D.type)}))return this.disableUpdateView("You can't modify view layers with dependent tile layers or vector tile layers."),[2];if((null===(d=this.portalUser)||void 0===d?0:d.username)&&this.item.owner!==this.portalUser.username)return this.disableUpdateView(this.i18n.disableNotOwner),[2];g=p["default"].isPortal();u=this.item.serviceInfo||{};x=this.item.adminServiceInfo||{};y=g&&!this.item.isSDS?q["default"].stringToArray(u.capabilities,",",!0):q["default"].stringToArray(x.capabilities||
"",",",!0);B=g?y.includes("Sync"):x.syncEnabled||y.includes("Sync");if(!B)return[3,4];z.label=1;case 1:return z.trys.push([1,3,,4]),[4,n.fetchReplicas(this.item)];case 2:return C=z.sent(),C.length&&this.disableUpdateView(this.i18n.disableReplicas),[3,4];case 3:return z.sent(),[3,4];case 4:return[2]}})})};l.prototype.disableUpdateView=function(h){this.updateViewButton.disabled=!0;this.descriptionText.classList.add("update-view--disabled");this.disabledText.innerHTML=h;b["default"].showNode(this.disabledText)};
l.prototype.openModal=function(){this.renderModal(!0)};l.prototype.closeModal=function(){this.renderModal(!1);a["default"].publish("item-layers/refresh")};l.prototype.renderModal=function(h){var e,d,g=0<(null===(d=null===(e=this.item.relatedItems)||void 0===e?void 0:e.Service2Service_forward)||void 0===d?void 0:d.length);v.render(v.h(m["default"],{title:this.i18n.updateView,active:h,itemId:this.item.id,hasDerivative:g,onClose:this.closeModal}),this.domNode)};return l=w.__decorate([k["default"](r["default"],
f["default"])],l)}()})},"arcgisonline/pages/item/widgets/SettingsSection/SettingsSection":function(){define("require exports tslib esri/Evented dojo/on dojo/query dojo/text!./SettingsSection.html dojo/promise/all dojo/topic dojo/_base/lang dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ../../../utils/dom ../../../utils/arrays arcgisonline/tsutils/declareDecorator arcgisonline/pages/utils/channels".split(" "),function(K,G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h){v=w.__importDefault(v);r=w.__importDefault(r);
f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);var e;(function(d){d.AddTypeKeywords="addTypeKeywords";d.RemoveTypeKeywords="removeTypeKeywords";d.ApplicationProperties="applicationProperties";d.AdvancedSettings="advancedSettings"})(e||(e={}));return function(){function d(g,u){this.templateString=
c["default"]}d.prototype.postCreate=function(){this.inherited(arguments);this.handleUpdateResult=this.handleUpdateResult.bind(this);this.handleSaveResults=this.handleSaveResults.bind(this);this.handleSaveError=this.handleSaveError.bind(this);this.optionsValidationSuccess=this.optionsValidationSuccess.bind(this);this.startupUI=this.startupUI.bind(this);this.startupPromisesSuccess=this.startupPromisesSuccess.bind(this);this.initOptions();this.addEventListeners()};d.prototype.allOptionsHidden=function(){return this.options.every(function(g){return g.isHidden})};
d.prototype.hasChanges=function(){var g=this.options.some(function(u){return u.hasChanges()});return!this.options.every(function(u){return u.ignoreChanges})&&g};d.prototype.handleSaveResults=function(g){var u=this;g=this.compileSaveResults(g);var x=g.errors,y=g.changed,B=g.toChange;0<x.length?this.compileSaveErrors(x):(Object.keys(y).forEach(function(C){u.page._item.set(C,y[C])}),g=Object.keys(B),0===g.length?(this.showLoader(!1),this.hideLastOptionsHR(),this.hideSaveContainer(),this.disableActionButtons(!0),
this.alertUpdateSuccess()):(g.forEach(function(C){u.analyzeToChangeProp(B,C)}),this.page.updateItem(B).then(this.handleUpdateResult,this.handleSaveError)))};d.prototype.analyzeToChangeProp=function(g,u){""===g[u]&&(g.clearEmptyFields=!0)};d.prototype.updateResultSuccess=function(){this.showLoader(!1);this.cancelClick()};d.prototype.addEventListeners=function(){var g=this;this.saveClick=this.saveClick.bind(this);this.cancelClick=this.cancelClick.bind(this);this.own(m["default"](this.topSaveBtn,this.saveClick),
m["default"](this.bottomSaveBtn,this.saveClick),m["default"](this.topCancelBtn,this.cancelClick),m["default"](this.bottomCancelBtn,this.cancelClick),b["default"].subscribe("settings/cancelDatastoreEdit",this.cancelClick));this.options.forEach(function(u){g.own(r["default"](u,"type-options-change",g.handleOptionsChange.bind(g)),r["default"](u,"section/hide-last-hr",g.hideLastOptionsHR.bind(g)),r["default"](u,"section/hide-empty-options",g.detectAndHideEmptyTypeOptions.bind(g)),r["default"](u,"section/force-save",
function(){return g.saveClick(null)}),r["default"](u,"section/force-cancel",function(){return g.cancelClick(null)}),b["default"].subscribe("settings/updateExtent",g.handleExtentPickerChange.bind(g)))})};d.prototype.handleExtentPickerChange=function(g){this.page.updateItem({extent:g}).then(this.handleUpdateResult,this.handleSaveError)};d.prototype.handleOptionsChange=function(g){g=!(null===g||void 0===g||!g.hasChanges);var u=this.options.some(function(y){return y.hasChanges()}),x=this.options.every(function(y){return y.ignoreChanges});
this.disableActionButtons(!(!x&&(g||u)))};d.prototype.saveClick=function(g){null===g||void 0===g?void 0:g.preventDefault();b["default"].publish("settings/clearAlerts");this.validateOptions().then(this.optionsValidationSuccess)};d.prototype.cancelClick=function(g){var u=this;null===g||void 0===g?void 0:g.preventDefault();b["default"].publish("settings/clearAlerts");a["default"](this.options.map(function(x){return x.reset()})).then(function(){u.hideLastOptionsHR();u.hideSaveContainer();u.disableActionButtons(!0)})};
d.prototype.optionsValidationSuccess=function(g){g.every(function(u){return!0===u.validates})&&(this.showLoader(!0),a["default"](this.options.map(function(u){return u.save()})).then(this.handleSaveResults,this.handleSaveError))};d.prototype.handleUpdateResult=function(g){(null===g||void 0===g?0:g.code)&&g.message?this.handleSaveError(g):this.updateResultSuccess();this.alertUpdateSuccess()};d.prototype.handleSaveError=function(g){this.showLoader(!1);b["default"].publish("settings/error",g)};d.prototype.alertUpdateSuccess=
function(){b["default"].publish("settings/update");this.page.fetchItemResult().then(function(g){h.broadcastItemSettingsUpdate(g)})};d.prototype.compileSaveResults=function(g){var u=this,x,y,B={errors:[],changed:{},toChange:{}},C=p["default"].clone(this.item.itemData)||{},z=!1,D=!1;g.forEach(function(E){E.code&&E.message&&B.errors.push(u.i18n.itemProperties.error.saveUnsuccessful);E.changed&&(B.changed=w.__assign(w.__assign({},B.changed),E.changed));Object.keys(E.toChange).forEach(function(A){var F=
E.toChange[A];if(F){var H=p["default"].clone(F);B.toChange[A]=0<F.length&&(A===e.AddTypeKeywords||A===e.RemoveTypeKeywords)?k["default"].concatUnique(B.toChange[A],H):A===e.ApplicationProperties||A===e.AdvancedSettings?w.__assign(w.__assign({},B.toChange[A]),H):H}})});g=0<(null===(x=B.toChange.removeTypeKeywords)||void 0===x?void 0:x.length);x=0<(null===(y=B.toChange.addTypeKeywords)||void 0===y?void 0:y.length);if(g||x)B.toChange.typeKeywords=this.item.typeKeywords,g&&(B.toChange.typeKeywords=k["default"].filterOut(B.toChange.typeKeywords,
B.toChange.removeTypeKeywords),delete B.toChange.removeTypeKeywords),x&&(B.toChange.typeKeywords=k["default"].concatUnique(B.toChange.typeKeywords,B.toChange.addTypeKeywords),delete B.toChange.addTypeKeywords);B.toChange.typeKeywords&&(B.toChange.typeKeywords=B.toChange.typeKeywords.join(","));B.toChange.applicationProperties&&C&&(C.applicationProperties=B.toChange.applicationProperties,z=!0,delete B.toChange.applicationProperties);(y=B.toChange[e.AdvancedSettings])&&(B.toChange[e.AdvancedSettings]=
JSON.stringify(y));B.toChange.configurationSettings&&C&&(C=B.toChange.configurationSettings,D=!0,delete B.toChange.configurationSettings);z?B.toChange.text=JSON.stringify(C):D&&(B.toChange.text=C);return B};d.prototype.compileSaveErrors=function(g){g=g.map(function(u){return u[1]}).join("\x3cbr\x3e");this.alertError(g.join("\x3cbr\x3e"))};d.prototype.validateOptions=function(){return a["default"](this.options.map(function(g){return g.validate()}))};d.prototype.initOptions=function(){var g=this;this.options.forEach(function(u){g.optionsContainer.appendChild(u.domNode)});
this.startupOptions()};d.prototype.startupOptions=function(){a["default"](this.options.map(function(g){return g.startup()})).then(this.startupPromisesSuccess,this.startupUI)};d.prototype.startupPromisesSuccess=function(){this.showLoader(!0);this.detectAndHideEmptyTypeOptions();a["default"](this.options.map(function(g){return g.performActions()})).then(this.startupUI,this.startupUI)};d.prototype.startupUI=function(){this.showLoader(!1);this.hideLastOptionsHR();this.hideSaveContainer()};d.prototype.showLoader=
function(g){n["default"].addRemoveClass(this.optionsLoader,"is-active",g)};d.prototype.detectAndHideEmptyTypeOptions=function(){n["default"].showHide(this.domNode,0<this.options.length&&!this.allOptionsHidden())};d.prototype.hideSaveContainer=function(){var g=this.options.every(function(u){return!0===u.ignoreChanges});g&&n["default"].hideNode(this.bottomActions);n["default"].addRemoveClass(this.optionsSection,"border-bottom-clear",g)};d.prototype.hideLastOptionsHR=function(){var g=this.options.reduceRight(function(u,
x){return u||!x.isHidden&&x},void 0);g&&this.hideLastHorizontalRule(g.domNode)};d.prototype.hideLastHorizontalRule=function(g){f["default"]("hr.invisible-last-rule",g).removeClass(".invisible-last-rule");g=f["default"]("hr.leader-1.trailer-1.text-rule-light",g);for(var u=g.length-1;-1<u;u--){var x=g[u],y=null===x||void 0===x?void 0:x.parentNode;if(!(n["default"].isHidden(x)||y&&n["default"].isHidden(y))){var B=x;break}}null===B||void 0===B?void 0:B.classList.add("invisible-last-rule")};d.prototype.disableActionButtons=
function(g){n["default"].showHide(this.topCancelBtn,!g);n["default"].showHide(this.topSaveBtn,!g);this.bottomSaveBtn.disabled=g;this.bottomCancelBtn.disabled=g};return d=w.__decorate([l["default"](t["default"],q["default"],v["default"])],d)}()})},"arcgisonline/pages/utils/channels":function(){define(["require","exports"],function(K,G){function w(a){r[a]=r[a]||new BroadcastChannel(a);return r[a]}Object.defineProperty(G,"__esModule",{value:!0});G.handleGroupSettingsUpdate=G.broadcastGroupSettingsUpdate=
G.handleItemSettingsUpdate=G.broadcastItemSettingsUpdate=void 0;var v;(function(a){a.ITEM_SETTINGS_UPDATE="ITEM_SETTINGS_UPDATE";a.GROUP_SETTINGS_UPDATE="GROUP_SETTINGS_UPDATE"})(v||(v={}));var r={},f={},c=function(a,b){if("BroadcastChannel"in self){var p=w(a);f[a]=f[a]||[];f[a].push(b);p.onmessage||(p.onmessage=function(q){f[a].forEach(function(t){return t(q.data)})})}};G.broadcastItemSettingsUpdate=function(a){"BroadcastChannel"in self&&w(v.ITEM_SETTINGS_UPDATE).postMessage(a)};G.handleItemSettingsUpdate=
function(a){return c(v.ITEM_SETTINGS_UPDATE,a)};G.broadcastGroupSettingsUpdate=function(){"BroadcastChannel"in self&&w(v.GROUP_SETTINGS_UPDATE).postMessage(!0)};G.handleGroupSettingsUpdate=function(a){return c(v.GROUP_SETTINGS_UPDATE,a)}})},"arcgisonline/pages/item/widgets/SettingsSection/GeneralSettingsSection":function(){define("require exports tslib dojo/topic ./SettingsSection arcgisonline/tsutils/declareDecorator".split(" "),function(K,G,w,v,r,f){v=w.__importDefault(v);r=w.__importDefault(r);
f=w.__importDefault(f);return function(){function c(a,b){}c.prototype.handleSaveResults=function(a){this.refreshItemThumbnail=!1;this.inherited(arguments)};c.prototype.analyzeToChangeProp=function(a,b){"extent"===b&&(this.refreshItemThumbnail=!0)};c.prototype.updateResultSuccess=function(){this.inherited(arguments);!this.refreshItemThumbnail||this.item.thumbnail&&-1===this.item.thumbnail.indexOf("ago_downloaded")||(v["default"].publish("thumbnail/update",{}),this.refreshItemThumbnail=!1)};return c=
w.__decorate([f["default"](r["default"])],c)}()})},"url:arcgisonline/pages/item/widgets/templates/_settings.html":'\x3cmain\x3e\r\n  \x3cdiv class\x3d"third-nav js-sticky third-nav--top" data-top\x3d"0" style\x3d"top: 0px;"\x3e\r\n    \x3cdiv class\x3d"grid-container"\x3e\r\n      \x3cnav class\x3d"column-24" role\x3d"navigation" aria-label\x3d"${i18n.itemProperties.settingsThirdNav}"\x3e\r\n        \x3ca class\x3d"third-nav-link is-active js-general-options" href\x3d"#settings-general" data-dojo-attach-point\x3d"generalOptionsLink"\x3e${i18n.itemProperties.general}\x3c/a\x3e\r\n        \x3ca class\x3d"third-nav-link js-offline-options" href\x3d"#settings-offline" data-dojo-attach-point\x3d"offlineLink"\x3e${i18n.itemProperties.offline}\x3c/a\x3e\r\n        \x3ca class\x3d"third-nav-link js-type-options" href\x3d"#settings-options" data-dojo-attach-point\x3d"typeOptionsLink"\x3e${item.displayName}\x3c/a\x3e\r\n      \x3c/nav\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"grid-container"\x3e\r\n    \x3cdiv class\x3d"column-12"\x3e\r\n      \x3ccalcite-notice icon color\x3d"red" class\x3d"js-invalid-url-error leader-2"\x3e\r\n        \x3cdiv slot\x3d"title"\x3e${i18n.addItemFrm.errors.invalid.url.message}\x3c/div\x3e\r\n        \x3cdiv slot\x3d"message" class\x3d"js-invalid-url-message break-word"\x3e\x3c/div\x3e\r\n      \x3c/calcite-notice\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"generalSection" id\x3d"main-content-area"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"offlineSection"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"js-type-section"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/main\x3e\r\n',
"url:arcgisonline/pages/dijit/Alert/Alert.html":'\x3cdiv class\x3d"alert alert-${modifier} alert-fixed alert-fade-in-down leader-1 trailer-1 ${cssClasses}"\x3e\r\n  \x3cdiv class\x3d"flex"\x3e\r\n    \x3cdiv class\x3d"flex-0 margin-right-half margin-left-0 text-${modifier}" aria-label\x3d"${iconAltText}"\x3e\r\n      ${!icon}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1 flex-center-self margin-right-half margin-left-0 alert__text-container" role\x3d"status"\x3e\r\n      ${!text}\r\n      \x3cdiv data-dojo-attach-point\x3d"_listContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"alert-close btn-link btn-link-black js-alert-close" aria-label\x3d"${i18n.common.close}"\x3e\r\n      ${!icons.x.32}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Overlay/templates/Overlay.html":'\x3cdiv class\x3d"overlay-background js-overlay-background" data-dojo-attach-point\x3d"_backgroundScrim" id\x3d"${id}"\x3e\r\n  \x3cdiv\r\n    class\x3d"overlay overlay--${background} ${class} js-overlay"\r\n    role\x3d"dialog"\r\n    aria-labelledby\x3d"overlay-title-${uid}"\r\n    aria-modal\x3d"true"\r\n    data-dojo-attach-point\x3d"_overlay"\r\n  \x3e\r\n    \x3cdiv\r\n      class\x3d"js-overlay-loader overlay-loader-container overlay-white fullscreen"\r\n      data-dojo-attach-point\x3d"_overlayLoader"\r\n    \x3e\r\n      \x3cdiv class\x3d"loader is-active"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader-text overlay-loader-text" data-dojo-attach-point\x3d"_overlayLoaderText"\x3e\r\n          ${!loadingText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"overlay-title-bar flex js-overlay-title-bar" data-dojo-attach-point\x3d"_overlayTitleBar"\x3e\r\n      \x3cdiv class\x3d"flex overlay-mobile__title font-size-2"\x3e\r\n        \x3cdiv class\x3d"overlay-mobile__back-arrow" data-dojo-attach-point\x3d"_backArrow"\x3e${!icons.arrow-left.24}\x3c/div\x3e\r\n        \x3cdiv class\x3d"overlay-mobile__title-text" data-dojo-attach-point\x3d"mobileTitle"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3ch3 id\x3d"overlay-title-${uid}" class\x3d"overlay-title flex-1" title\x3d"${title}" data-dojo-attach-point\x3d"overlayTitle"\x3e${title}\x3c/h3\x3e\r\n      \x3cdiv\x3e\r\n        \x3cbutton\r\n          class\x3d"btn-link btn-link-off-black font-size-2 margin-right-half flex-0 overlay-help hide"\r\n          data-dojo-attach-point\x3d"_helpBtn"\r\n          aria-label\x3d"help"\r\n        \x3e\r\n          ${!icons.question.32}\x3c/button\r\n        \x3e\x3cbutton\r\n          class\x3d"btn-link btn-link-off-black font-size-2 flex-0 overlay-close"\r\n          data-dojo-attach-point\x3d"closeBtn"\r\n          aria-label\x3d"${i18n.common.close}"\r\n        \x3e\r\n          ${!icons.x.32}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-overlay-control-bar"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"overlay-control-bar-filters js-overlay-control-bar-filters"\x3e\x3c/div\x3e\r\n    \x3cdiv\r\n      class\x3d"overlay-content js-overlay-content"\r\n      data-dojo-attach-point\x3d"_overlayContentWrapper"\r\n      id\x3d"overlay-content-${uid}"\r\n    \x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"overlay-action-bar ${showActionBar:hide}" data-dojo-attach-point\x3d"_overlayActionBar"\x3e\r\n      \x3cbutton class\x3d"hide btn-link" data-dojo-attach-point\x3d"backBtn"\x3e\x3c/button\x3e\r\n      \x3cnav class\x3d"right"\x3e\r\n        \x3cbutton class\x3d"btn js-overlay-primary" data-dojo-attach-point\x3d"_primaryBtn"\x3e${primaryBtnText}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-clear calcite-web-btn-clear js-overlay-cancel" data-dojo-attach-point\x3d"_cancelBtn"\x3e\r\n          ${i18n.common.cancel}\r\n        \x3c/button\x3e\r\n      \x3c/nav\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-folder-loader folder-loader loader loader-centered overlay-white"\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${i18n.common.loading}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ChangeOwner/templates/FolderPicker.html":'\x3cdiv class\x3d"${containerClass}"\x3e\r\n  \x3cdiv class\x3d"font-size--1 trailer-half flex js-member-picker-header"\x3e\r\n    \x3ch4 class\x3d"trailer-0 font-size--1 flex-1" id\x3d"folder-picker-label"\x3e${i18n.changeOwner.selectFolder}\x3c/h4\x3e\r\n    \x3cbutton class\x3d"btn-link font-size--1 flex-0 btn-link-off-black right js-folder-picker-cancel"\x3e\r\n      ${i18n.common.cancel}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cinput\r\n    class\x3d"member-picker-search js-search-input"\r\n    placeholder\x3d"${i18n.changeOwner.searchFolders}"\r\n    aria-label\x3d"${i18n.changeOwner.searchFolders}"\r\n    aria-controls\x3d"folder-results-list"\r\n    type\x3d"search"\r\n    autocomplete\x3d"off"\r\n  /\x3e\r\n\r\n  \x3cul\r\n    class\x3d"js-member-picker-results folder-picker-results member-picker-results--border"\r\n    id\x3d"folder-results-list"\r\n    role\x3d"menu"\r\n    aria-labelledby\x3d"folder-picker-label"\r\n    data-dojo-attach-point\x3d"_resultsDropdown"\r\n  \x3e\r\n    \x3cli class\x3d"folder-list-item js-no-folder hide" data-title\x3d"no-folder" role\x3d"none"\x3e\r\n      \x3cspan\r\n        class\x3d"folder-list-link folder-list-link--expanded"\r\n        data-id\x3d"no-folder"\r\n        data-title\x3d"no-folder"\r\n        role\x3d"menuitem"\r\n        aria-selected\x3d"false"\r\n        data-dojo-attach-point\x3d"_folderLink"\r\n      \x3e\r\n        ${i18n.folderDlg.noFolders}\r\n        \x3cbutton class\x3d"js-create-folder-inline create-folder-inline-link btn-link font-size--2"\x3e\r\n          ${i18n.folderDlg.noFolderLabel}\r\n        \x3c/button\x3e\r\n      \x3c/span\x3e\r\n    \x3c/li\x3e\r\n  \x3c/ul\x3e\r\n  \x3cbutton\r\n    class\x3d"js-create-new-folder btn-link btn-link-dark-blue padding-leader-quarter padding-trailer-quarter leader-half padding-left-half padding-right-half font-size--2"\r\n  \x3e\r\n    ${!icons.inline.folder-plus.16} ${i18n.changeOwner.createNewFolder}\r\n  \x3c/button\x3e\r\n  \x3cform class\x3d"hide js-create-folder-form position-relative leader-half"\x3e\r\n    \x3cinput\r\n      class\x3d"folder-list-link folder-list-link--large leader-0 trailer-0 js-create-folder-input"\r\n      type\x3d"text"\r\n      maxlength\x3d"125"\r\n      value\x3d""\r\n      placeholder\x3d"${i18n.changeOwner.enterFolderName}"\r\n      aria-label\x3d"${i18n.changeOwner.enterFolderName}"\r\n    /\x3e\r\n    \x3cspan class\x3d"change-owner-new-folder-icon"\x3e${!icons.inline.folder-plus.16}\x3c/span\x3e\r\n    \x3cbutton\r\n      aria-label\x3d"${i18n.common.save}"\r\n      class\x3d"tooltip tooltip-left btn-link folder-list-action folder-list-action--show folder-list-action--green folder-list-action--left js-folder-create-save"\r\n      type\x3d"submit"\r\n    \x3e\r\n      ${!icons.check.24}\r\n    \x3c/button\x3e\r\n    \x3cbutton\r\n      aria-label\x3d"${i18n.common.cancel}"\r\n      class\x3d"tooltip tooltip-left btn-link folder-list-action folder-list-action--show js-folder-create-cancel"\r\n    \x3e\r\n      ${!icons.x.24}\r\n    \x3c/button\x3e\r\n  \x3c/form\x3e\r\n  \x3cdiv class\x3d"js-create-folder-error-message input-error-message"\x3e\r\n    ${i18n.folderDlg.passwordMin}\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ChangeOwner/templates/FolderPickerRow.html":'\x3cli class\x3d"folder-list-item" data-title\x3d"${folder.title}" role\x3d"none"\x3e\r\n  \x3cspan \r\n    class\x3d"folder-list-link folder-list-link--expanded" \r\n    data-id\x3d"${folder.id}"\r\n    data-title\x3d"${folder.title}"\r\n    role\x3d"menuitem"\r\n    aria-selected\x3d"false"\r\n    data-dojo-attach-point\x3d"_folderLink"\x3e\r\n    ${!folderIcon}${folder.title}\r\n  \x3c/span\x3e\r\n\x3c/li\x3e',"url:arcgisonline/pages/dijit/ChangeOwner/templates/ChangeOwner.html":'\x3cdiv class\x3d"change-owner-container padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1 position-relative"\x3e\r\n  \x3cdiv class\x3d"js-change-owner-loader loader loader-centered is-active"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.common.loading}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-change-owner-wrapper change-owner-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-owner-area visibility-hidden"\x3e\r\n      \x3ch4 class\x3d"font-size--1 js-item-owner-label"\x3e${i18n.changeOwner.itemOwner}\x3c/h4\x3e\r\n      \x3cdiv class\x3d"panel panel-white flex change-owner-card js-owner-edit input-error--no-icon"\x3e\r\n        \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-1 flex flex-column margin-left-half break-word"\x3e\r\n          \x3ch4 class\x3d"member-browser-row-name avenir-bold font-size--1 trailer-0 js-fullname"\x3eFullname\x3c/h4\x3e\r\n          \x3cp class\x3d"trailer-0 font-size--2 js-username"\x3eUsername\x3c/p\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton\r\n          class\x3d"btn-link btn-link-off-black change-owner-card-edit js-owner-edit-button"\r\n          aria-label\x3d"${i18n.changeOwner.title}"\r\n        \x3e\r\n          ${icons.edit.16}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cp class\x3d"input-error-message js-member-select-error position-absolute"\x3e\x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-member-picker"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"js-folder-area visibility-hidden leader-1"\x3e\r\n      \x3ch4 class\x3d"font-size--1"\x3e${i18n.changeOwner.folder}\x3c/h4\x3e\r\n      \x3cdiv class\x3d"panel panel-white flex trailer-2 change-owner-card js-folder-edit"\x3e\r\n        \x3cdiv class\x3d"flex-0 js-folder-icon"\x3e${icons.inline.folder.16}\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-1 flex flex-column margin-left-half break-word"\x3e\r\n          \x3ch4 class\x3d"font-size-0 trailer-0 js-folder-name"\x3e${i18n.folderDlg.noFolderLabel}\x3c/h4\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-off-black change-owner-card-edit js-folder-edit-button" aria-label\x3d"${i18n.changeOwner.title}"\x3e\r\n          ${icons.edit.16}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-folder-picker hide"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Overlay/templates/OverlayConfirm.html":'\x3cdiv class\x3d"position-relative full-height overlay-confirm"\x3e\r\n    \x3cdiv class\x3d"overlay-confirm-mask"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"overlay-confirm-pane ${cssClasses} position-relative"\x3e\r\n      \x3cbutton class\x3d"btn btn-link btn-link-darker-gray overlay-confirm-close-btn" data-dojo-attach-point\x3d"_closeBtn"\x3e${!icons.x.24}\x3c/button\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n        \x3cdiv class\x3d"overlay-confirm__icon margin-right-1" data-dojo-attach-point\x3d"icon"\x3e\x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"avenir-demi font-size-1" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"_description"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-half flex overlay-confirm-buttons" data-dojo-attach-point\x3d"_buttons"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear js-cancel-btn"\x3e\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn margin-left-half overlay-confirm__confirm-btn js-confirm-btn"\x3e\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-1 padding-leader-1 overlay-confirm-actions" data-dojo-attach-point\x3d"_actions"\x3e\r\n        \x3cbutton class\x3d"btn-link trailer-half display-block js-action-one"\x3e\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn-link js-action-two"\x3e\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ChangeOwner/templates/MoveItem.html":'\x3cdiv class\x3d"padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1 position-relative"\x3e\r\n  \x3cdiv class\x3d"js-change-owner-loader loader loader-centered is-active"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.common.updating}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-change-owner-wrapper change-owner-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-folder-picker"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CategoryPicker/templates/CategoryPicker.html":'\x3cdiv class\x3d"leader-half"\x3e\r\n  \x3cdiv\r\n    class\x3d"js-add-category-error alert alert-red font-size--3 padding-leader-quarter padding-trailer-quarter trailer-quarter"\r\n  \x3e\r\n    ${i18n.contentCategories.addCategoryError}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"category-picker"\x3e\r\n    \x3cdiv class\x3d"font-size--1 category-picker__chip-wrap js-category-chip-wrap" data-dojo-attach-point\x3d"_chipWrap"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"hide category-picker__default-text font-size--1" data-dojo-attach-point\x3d"defaultTextContainer"\x3e${defaultText}\x3c/div\x3e\r\n    \x3cdiv class\x3d"dropdown js-add-category-dropdown leader-half trailer-half category-picker__dropdown"\x3e\r\n      \x3cspan class\x3d"font-size--1 category-picker__dropdown-btn"\x3e\r\n        \x3cbutton\r\n          class\x3d"btn-link btn-link-off-black font-size--1 js-add-category-dropdown-button"\r\n          tabindex\x3d"0"\r\n          aria-haspopup\x3d"true"\r\n          aria-expanded\x3d"false"\r\n          type\x3d"button"\r\n        \x3e\r\n          \x3cspan class\x3d"text-green"\x3e${!icons.inline.plus-f.16}\x3c/span\r\n          \x3e${i18n.contentCategories.addCategory}${!icons.inline-end.chevron-down.16}\r\n        \x3c/button\x3e\r\n      \x3c/span\x3e\r\n      \x3cdiv class\x3d"dropdown-menu leader-quarter category-picker__dropdown-menu"\x3e\r\n        \x3cdiv class\x3d"category-picker-search-wrap"\x3e\r\n          \x3cinput\r\n            type\x3d"text"\r\n            class\x3d"add-category-input js-add-category-input leader-0"\r\n            placeholder\x3d"${i18n.contentCategories.filterCategories}"\r\n            aria-label\x3d"${i18n.contentCategories.addCategoryToItem}"\r\n          /\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"js-add-category-dropdown-menu category-picker-dropdown-nav padding-leader-half padding-trailer-half padding-left-half padding-right-half filter-tree--always-open"\r\n          role\x3d"menu"\r\n        \x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CategoryPicker/templates/Category.html":'\x3cli class\x3d"js-category-picker-item filter-tree-item category-picker--add-category-dropdown ${isActive}" data-category-name\x3d"${title}" data-category-path\x3d"${path}" role\x3d"treeitem"\x3e\r\n  \x3cspan class\x3d"category-picker--add-category-dropdown-icon"\x3e${icons.check.16}\x3c/span\x3e\r\n  \x3ca href\x3d"#" class\x3d"filter-tree-link category-picker--add-category-dropdown-link js-add-category-dropdown-link ${isSelected}" data-category-name\x3d"${title}" data-category-path\x3d"${path}"\x3e${title}\x3c/a\x3e\r\n  ${children}\r\n\x3c/li\x3e\r\n',
"url:arcgisonline/pages/dijit/CategoryPicker/templates/CategoryGroup.html":'\x3cul class\x3d"filter-tree" role\x3d"${role}"\x3e${categories}\x3c/ul\x3e',"url:arcgisonline/pages/dijit/CategoryPicker/templates/CategoryChip.html":'\x3cspan class\x3d"label filter-label js-category-chip" data-category-name\x3d"${category}"\x3e\r\n  ${category:formatCategoryChip}\r\n  \x3cbutton class\x3d"js-category-chip-remove btn-link filter-label-remove margin-left-quarter right" aria-label\x3d"${removeText}" data-category-name\x3d"${category}"\x3e${icons.x.16}\x3c/button\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SaveItem.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n\r\n  \x3clabel class\x3d"calcite-web-label trailer-half calcite-web-label-textbox"\x3e\r\n    ${i18n.titleLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemTitle"\r\n         data-dojo-type\x3d"dijit/form/TextBox"\r\n         placeHolder\x3d"${i18n.defaultTextTitle}" trim\x3d"true"\x3e\x3c/div\x3e\r\n\r\n  \x3c/label\x3e\r\n  \x3clabel class\x3d"calcite-web-label trailer-half clearfix"\x3e\r\n    ${i18n.tagsLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemTagsContainer"\x3e\x3c/div\x3e\r\n  \x3c/label\x3e\r\n  \x3cdiv class\x3d"categories-container"\x3e\r\n    \x3clabel class\x3d"calcite-web-label trailer-0 clearfix categories-container"\r\n      data-dojo-attach-point\x3d"saveItemCategoriesContainer"\r\n      for\x3d"saveItemCategoryPicker"\x3e\r\n      ${i18n.categoriesLabel}\r\n    \x3c/label\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemCategories" id\x3d"saveItemCategoryPicker"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3clabel class\x3d"calcite-web-label trailer-half calcite-web-label-textbox"\x3e\r\n    ${i18n.summaryLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemSummary"\r\n         data-dojo-type\x3d"dijit/form/TextBox"\r\n         placeHolder\x3d"${i18n.defaultTextSummary}" maxlength\x3d"250" trim\x3d"true"\x3e\x3c/div\x3e\r\n\r\n  \x3c/label\x3e\r\n  \x3clabel class\x3d"calcite-web-label trailer-half calcite-web-label-select" for\x3d"itemFolderComboBox"\x3e\r\n    ${i18n.saveInFolderLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemFolder"\r\n         data-dojo-type\x3d"arcgisonline/sharing/dijit/ComboBox"\r\n         id\x3d"itemFolderComboBox"\x3e\x3c/div\x3e\r\n  \x3c/label\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/ExportDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"exportDialog" id\x3d"export-dialog" title\x3d"${i18n.exportDialogTitle}" execute\x3d""\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemForm"\x3e\x3c/div\x3e\r\n    \x3cfieldset data-dojo-attach-point\x3d"featureCollectionDiv" class\x3d"featureCollectionOnly hide"\x3e\r\n      \x3clabel\x3e\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"generalizeChk" name\x3d"generalize"\x3e${i18n.generalize}\x3c/label\x3e\r\n      \x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"generalize" checked\x3e${i18n.keepOrig}\x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cp data-dojo-attach-point\x3d"_message" class\x3d"break_word"\x3e\x3c/p\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing right"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"exportingLabel" style\x3d"visibility:hidden;"\x3e${i18n.exportingLabel}\x3c/span\x3e\r\n      \x3cbutton class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn" type\x3d"button" data-dojo-attach-point\x3d"exportBtn"\x3e${i18n.exportLabel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/ComboBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"combobox" aria-haspopup\x3d"true"\r\n     data-dojo-attach-point\x3d"_popupStateNode"\x3e\r\n  \x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n       data-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\x3e\r\n    \x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1"\r\n           readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true" ${_buttonInputDisabled}/\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\x3e\r\n    \x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text"\r\n           tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"/\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\x3e\r\n    \x3cinput class\x3d\'dijitReset dijitInputInner\' readonly\x3d"readonly" ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\r\n           data-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DefineExtent.html":'\x3cdiv\x3e\r\n  \x3cspan\x3e\r\n    \x3cdiv class\x3d"esriLeadingMargin05 extent-search backward-compatible-extent-search inline-block" data-dojo-attach-point\x3d"_extentSearchContainer"\x3e\x3c/div\x3e\r\n    \x3cbutton class\x3d"calcite secondary btn btn-blue small right" id\x3d"extent-dlg-draw-button" data-dojo-attach-point\x3d"_buttonSetExtent"\x3e\r\n      ${i18n.drawExtent}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cdiv id\x3d"extent-map-container" style\x3d"width:500px; max-width: 100%; height:340px; border:1px solid #000;"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"inline-block leader-half"\x3e\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-left"\x3e${i18n.leftLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input inline-block" id\x3d"extent-left" data-dojo-attach-point\x3d"_extentLeft"\r\n           data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n\r\n    \x3cspan class\x3d"extent-spacer"\x3e\x26nbsp;\x3c/span\x3e\r\n\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-right"\x3e${i18n.rightLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input" id\x3d"extent-right" data-dojo-attach-point\x3d"_extentRight" data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n  \x3c/div\x3e\r\n  \x3cbr\x3e\r\n  \x3cdiv class\x3d"inline-block"\x3e\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-top"\x3e${i18n.topLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input" id\x3d"extent-top" data-dojo-attach-point\x3d"_extentTop" data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n\r\n    \x3cspan class\x3d"extent-spacer"\x3e\x26nbsp;\x3c/span\x3e\r\n\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-bottom"\x3e${i18n.bottomLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input" id\x3d"extent-bottom" data-dojo-attach-point\x3d"_extentBottom" data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/ExtentDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" class\x3d"extent-dialog" data-dojo-attach-point\x3d"_extentDialog" title\x3d"${i18n.extentDlgTitle}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_extentContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"right esriFloatTrailing margin-right-1 extent-ltr-margin-right-0"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_cancelBtn" type\x3d"button" data-dojo-type\x3d"dijit/form/Button" class\x3d"cancel"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_okBtn" data-dojo-type\x3d"dijit/form/Button" class\x3d"primary"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/form/resources/TriStateCheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dojoxTriStateCheckBoxInner" dojoAttachPoint\x3d"stateLabelNode"\x3e\x3c/div\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" dojoAttachPoint\x3d"focusNode"\r\n\tclass\x3d"dijitReset dojoxTriStateCheckBoxInput" dojoAttachEvent\x3d"onclick:_onClick"\r\n/\x3e\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/dialog/templates/RateLimiting.html":'\x3cdiv\x3e\r\n  \x3cdiv id\x3d"rateLimiting" class\x3d"rateLimiting"\x3e\r\n    \x3cp\x3e${i18n.rateLimiting.instructions}\x3c/p\x3e\r\n    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_enableLimits" type\x3d"checkbox" value\x3d"true" name\x3d"enableRateLimiting"/\x3e\r\n    \x3clabel class\x3d"esriLeadingMargin05 esriTrailingMargin1 inline-block trailer-half" for\x3d"referrerUri"\x3e${i18n.rateLimiting.hitRate}\x3c/label\x3e\r\n    \x3cdiv class\x3d"rateLimitingDiv esriLeadingMargin108 clearfix"\x3e\r\n      \x3cinput class\x3d"hitRate" value\x3d"1000"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-attach-point\x3d"_hitRate"\r\n        data-dojo-props\x3d"disabled:true, rangeMessage:\'${i18n.rateLimiting.hitRateRangeMessage}\', invalidMessage:\'${i18n.rateLimiting.hitRateInvalidMessage}\',constraints:{min:1, max:1000000, places:0}" /\x3e\r\n      \x3clabel class\x3d"canDisable esriLeadingMargin1 esriTrailingMargin1 inline-block left leader-half trailer-0 padding-right-half" for\x3d"referrerUri"\x3e\r\n        ${i18n.rateLimiting.per}\r\n      \x3c/label\x3e\r\n      \x3cinput class\x3d"hitRate" value\x3d"1"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-attach-point\x3d"_hitCount"\r\n        data-dojo-props\x3d"disabled:true, rangeMessage:\'${i18n.rateLimiting.hitRateRangeMessage}\', invalidMessage:\'${i18n.rateLimiting.hitRateInvalidMessage}\', constraints:{min:1, max:1000000, places:0}"/\x3e\r\n\r\n      \x3cselect class\x3d"esriUnits left inline-block" data-dojo-attach-point\x3d"_interval" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d"disabled:true" style\x3d"width:8.75em;"\x3e\r\n        \x3coption value\x3d"1"\x3e${i18n.rateLimiting.second}\x3c/option\x3e\r\n        \x3coption value\x3d"60"\x3e${i18n.rateLimiting.minute}\x3c/option\x3e\r\n        \x3coption value\x3d"3600"\x3e${i18n.rateLimiting.hour}\x3c/option\x3e\r\n        \x3coption value\x3d"86400"\x3e${i18n.rateLimiting.day}\x3c/option\x3e\r\n        \x3coption value\x3d"604800"\x3e${i18n.rateLimiting.week}\x3c/option\x3e\r\n        \x3coption value\x3d"2628000"\x3e${i18n.rateLimiting.month}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cbr /\x3e\r\n    \x3clabel class\x3d"esriTrailingMargin05 trailer-half" for\x3d"referrerUri"\x3e${i18n.rateLimiting.referrerUri}\x3c/label\x3e\r\n    \x3cdiv class\x3d"clearfix"\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"_referrerUrl" data-dojo-props\x3d"placeHolder:\'${i18n.registerApp.urlPlaceHolder}\'" type\x3d"text" class\x3d"left referrerUrl"/\x3e\r\n      \x3cbutton class\x3d"calcite small cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_delBtn" data-dojo-props\x3d"disabled:true, label:\'${i18n.registerApp.del}\'"\x3e\x3c/button\x3e\r\n      \x3cbutton class\x3d"calcite small cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_addBtn" data-dojo-props\x3d"label:\'${i18n.registerApp.add}\'"\x3e\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriLeadingMargin93 trailer-half referralUris" data-dojo-type\x3d"dijit/form/MultiSelect" data-dojo-attach-point\x3d"_referrers" data-dojo-props\x3d"size:4, name:\'referral_uris\'"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/UploadProgressBar/UploadProgressBar.html":'\x3cdiv class\x3d"upload-progress-bar flex-1 flex-column-justify-center margin-right-1 margin-left-half position-relative"\x3e\r\n  \x3cdiv class\x3d"progress-bar"\x3e\r\n    \x3cdiv class\x3d"progress-bar-fill" data-dojo-attach-point\x3d"_uploadProgressFill"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"font-size--3 upload-percent-label" data-dojo-attach-point\x3d"_uploadPercentLabel"\x3e0%\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/Uploader.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e \r\n\t\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1" data-dojo-attach-point\x3d"valueNode" /\x3e\r\n\x3c/span\x3e\r\n',
"url:dijit/templates/actionBar.html":"\x3cdiv class\x3d'dijitDialogPaneActionBar' data-dojo-attach-point\x3d\"actionBarNode\"\x3e\r\n\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'submit' data-dojo-attach-point\x3d\"okButton\"\x3e\x3c/button\x3e\r\n\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'button'\r\n\t\t\tdata-dojo-attach-point\x3d\"cancelButton\" data-dojo-attach-event\x3d'click:onCancel'\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n","url:esri/dijit/VisibleScaleRangeSlider/templates/ScaleMenu.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${css.section}"\x3e\r\n    \x3cdiv class\x3d"${css.header}"\x3e${labels.current}\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.content}"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_currentScaleLabel" class\x3d"${css.item} ${css.current}"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_scaleInput" data-dojo-type\x3d"dijit/form/TextBox" class\x3d"${css.input}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_recommendedScaleSection"\x3e\r\n    \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_scaleListHeader"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.content}"\x3e\r\n      \x3col data-dojo-attach-point\x3d"dap_recommendedScales" class\x3d"${css.list}"\x3e\r\n        \x3cli data-dojo-attach-point\x3d"dap_mapScaleItem" class\x3d"${css.item} ${css.selectable}"\x3e\x3c/li\x3e\r\n        \x3c!--additional list items added dynamically--\x3e\r\n      \x3c/ol\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/VisibleScaleRangeSlider/templates/ScalePreview.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${css.header}"\x3e${labels.preview}\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"dap_scalePreviewThumbnail" class\x3d"${css.thumbnail}"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/PublishTilesDlg.html":'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\r\n  \x3cp data-dojo-attach-point\x3d"_message"\x3e\x3c/p\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_itemPropertiesDlg"  data-dojo-type\x3d"arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg" data-dojo-props\x3d"typeInfo:\'${_typeInfo}\', showFile:false, showUrl:false, showFolders:${showFolders}"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"sceneProperties hide"\x3e\r\n      \x3cdiv class\x3d"sceneDataDisplay hide"\x3e\r\n          \x3cdiv\x3e${i18n.publishTileServiceDlg.displayInLbl}\x3c/div\x3e\r\n          \x3clabel\x3e\r\n              \x3cinput id\x3d"${id}-globalWkid" data-dojo-attach-point\x3d"_globalWkidRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:true" value\x3d"global"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"_globalWkidRadioLabel"\x3e\x3c/span\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel\x3e\r\n              \x3cinput id\x3d"${id}-localWkid" data-dojo-attach-point\x3d"_localWkidRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:false" value\x3d"local"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"_localWkidRadioLabel"\x3e\x3c/span\x3e\r\n          \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"sceneMultipatch hide"\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput id\x3d"${id}-enableUpdates" data-dojo-attach-point\x3d"_enableSceneUpdates" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" value\x3d"true"\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_enableSceneUpdatesLabel"\x3e${i18n.publishTileServiceDlg.enableUpdates}\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"tileProperties hide" data-dojo-attach-point\x3d"_tilePropertiesContainer"\x3e\r\n    \x3clabel\x3e${i18n.publishTileServiceDlg.tileSchemeLabel}\x3c/label\x3e\r\n    \x3cdiv class\x3d"tilePropertiesRadios"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput id\x3d"${id}-agoBasemap" data-dojo-attach-point\x3d"_agoBasemapRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:true" value\x3d"ago"\x3e${i18n.publishTileServiceDlg.matchAGOLBasemaps}\r\n      \x3c/label\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput id\x3d"${id}-custom" data-dojo-attach-point\x3d"_customBasemapRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:false" value\x3d"custom"\x3e${i18n.publishTileServiceDlg.matchOwnBasemap}\r\n      \x3c/label\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_customBasemapUrl" class\x3d"custom esriLeadingMargin2" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"disabled:true,placeholder:\'${i18n.publishTileServiceDlg.tileSchemePlaceholder}\'"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"tileProperties hide" data-dojo-attach-point\x3d"_tilesOnDemandContainer"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput id\x3d"${id}-tilesOnDemand" data-dojo-attach-point\x3d"_tilesOnDemand" type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"\x3e ${i18n.publishTileServiceDlg.enableTilesOnDemand}\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"visibleScaleRange hide"\x3e\r\n      \x3clabel class\x3d"tileRange"\x3e${i18n.publishTileServiceDlg.scaleRangeLabel}\x3c/label\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_visibleScaleRangeContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader js-visible-range-loader overlay-white position-relative hide" data-dojo-attach-point\x3d"_visibleRangeLoader"\x3e\r\n          \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"loader-text hide" data-dojo-attach-point\x3d"_visibleRangeLoaderMsg"\x3e${!i18n.common.loading}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_increaseScaleWarning"\x3e\r\n      ${i18n.publishTileServiceDlg.increaseScaleWarning}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"vectorTileProperties leader-half hide" data-dojo-attach-point\x3d"_selectAttributesContainer"\x3e\r\n    \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_selectAttributesBtn"\x3e${i18n.itemProperties.configureAttributes.selectAttributes}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"viewProperties hide"\x3e\r\n    \x3clabel\x3e ${i18n.publishTileServiceDlg.createViewOptionsLabel}\x3c/label\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput id\x3d"${id}-preserveIds" data-dojo-attach-point\x3d"_preserveIds" type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"\x3e ${i18n.publishTileServiceDlg.preserveLayerIds}\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/widget/Wizard/Wizard.html":'\x3cdiv class\x3d"dojoxWizard" dojoAttachPoint\x3d"wizardNode"\x3e\r\n    \x3cdiv class\x3d"dojoxWizardContainer" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"dojoxWizardButtons" dojoAttachPoint\x3d"wizardNav"\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"previousButton"\x3e${previousButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"nextButton"\x3e${nextButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"doneButton" style\x3d"display:none"\x3e${doneButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"cancelButton"\x3e${cancelButtonLabel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/AdvancedOfflineOptions/templates/AdvancedOfflineOptions.html":'\x3cdiv class\x3d"advanced-offline-options grid-container js-accordion"\x3e\r\n  \x3csection class\x3d"accordion-section is-active"\x3e\r\n    \x3ch4 class\x3d"accordion-title font-size-1" tabindex\x3d"0"\x3e\r\n      \x3cspan class\x3d"avenir-demi"\x3e${i18n.itemProperties.advancedOptions.featuresAttachmentsTitle}\x3c/span\x3e\r\n      \x3cdiv class\x3d"js-attachments-info"\x3e\x3c/div\x3e\r\n    \x3c/h4\x3e\r\n    \x3cdiv class\x3d"accordion-content"\x3e\r\n      \x3cdiv\x3e${i18n.itemProperties.advancedOptions.featuresAttachmentsDescription}\x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-half leader-1 avenir-demi"\x3e${i18n.itemProperties.advancedOptions.editableFeatures}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size--1 margin-left-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"editableFeatures" value\x3d"featuresAndAttachments" data-sync\x3d"syncFeaturesAndAttachments"\r\n            class\x3d"js-editable-features js-edit-features-and-attachments"\x3e\r\n          ${i18n.itemProperties.advancedOptions.downloadFeaturesAndAttachments}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\x3cinput type\x3d"radio" name\x3d"editableFeatures" value\x3d"features"\r\n            data-sync\x3d"syncFeaturesUploadAttachments" class\x3d"js-editable-features js-edit-features-only"\x3e\r\n          ${i18n.itemProperties.advancedOptions.downloadFeaturesOnly}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\x3cinput type\x3d"radio" name\x3d"editableFeatures" value\x3d"none"\r\n            data-sync\x3d"uploadFeaturesAndAttachments" class\x3d"js-editable-features js-edit-none"\x3e\r\n          ${i18n.itemProperties.advancedOptions.neverGetUpdates}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 trailer-half avenir-demi"\x3e${i18n.itemProperties.advancedOptions.readonlyFeatures}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size--1 margin-left-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\x3cinput type\x3d"radio" name\x3d"readonlyFeatures" value\x3d"true"\r\n            class\x3d"js-readonly-features js-readonly-features-and-attachments"\x3e\r\n          ${i18n.itemProperties.advancedOptions.downloadFeaturesAndAttachments}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\x3cinput type\x3d"radio" name\x3d"readonlyFeatures" value\x3d"false"\r\n            class\x3d"js-readonly-features js-readonly-features-only"\x3e\r\n          ${i18n.itemProperties.advancedOptions.readonlyFeaturesOnly}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"advanced-offline-options__foot-note font-size--2 leader-1"\x3e${i18n.itemProperties.advancedOptions.featuresAttachmentsFootNote}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3csection class\x3d"accordion-section is-active leader-1"\x3e\r\n    \x3ch4 class\x3d"accordion-title font-size-1" tabindex\x3d"0"\x3e\r\n      \x3cspan class\x3d"avenir-demi"\x3e ${i18n.itemProperties.advancedOptions.tilePackageTitle}\x3c/span\x3e\r\n      \x3cdiv class\x3d"js-package-info"\x3e\x3c/div\x3e\r\n    \x3c/h4\x3e\r\n    \x3cdiv class\x3d"accordion-content"\x3e\r\n      \x3cdiv\x3e${i18n.itemProperties.advancedOptions.tilePackageDescription}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size--1 leader-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useTilePackage" value\x3d"webmap" class\x3d"js-tile-option js-tile-webmap"\x3e\r\n          ${i18n.itemProperties.advancedOptions.useBasemapInWebmap}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row flex"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useTilePackage" value\x3d"mobile" class\x3d"js-tile-option js-tile-mobile"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv\x3e${i18n.itemProperties.advancedOptions.useTilePackageOnMobile}\x3c/div\x3e\r\n            \x3cdiv class\x3d"leader-half padding-left-2 hide advanced-offline-options__option-input-container js-file-name-container"\x3e\r\n              \x3clabel class\x3d"trailer-0"\x3e\r\n                ${i18n.itemProperties.advancedOptions.packageFileName}\r\n                \x3cinput type\x3d"text" class\x3d"js-tile-mobile-file-name" placeholder\x3d"${i18n.itemProperties.advancedOptions.fileNamePlaceholder}"\x3e\r\n                \x3cdiv class\x3d"input-error-message js-tile-mobile-file-name-error"\x3e\x3c/div\x3e\r\n              \x3c/label\x3e\r\n              \x3cdiv class\x3d"font-size--2"\x3e${i18n.itemProperties.advancedOptions.enterTilePackageFileName}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- hide the third option until Apps team supports it --\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row flex hide"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useTilePackage" value\x3d"uploaded" class\x3d"js-tile-option js-tile-org"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv\x3e\r\n              ${i18n.itemProperties.advancedOptions.useUploadedTilePackage}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hide leader-half padding-left-2 padding-trailer-1 advanced-offline-options__option-input-container js-tile-search-container"\x3e\r\n              \x3cinput type\x3d"search" class\x3d"input-minimal js-tile-search" placeholder\x3d"${i18n.itemProperties.advancedOptions.findPackage}"\x3e\r\n              \x3cdiv class\x3d"position-relative"\x3e\r\n                \x3cdiv class\x3d"advanced-offline-options__search-results trailer-1 js-search-results"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"advanced-offline-options__foot-note font-size--2 leader-1"\x3e${i18n.itemProperties.advancedOptions.tilePackageFootnote}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3cdiv class\x3d"position-relative js-update-loader-container advanced-offline-options__loader-container"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_optionsLoader" class\x3d"loader js-update-loader overlay-white fullscreen"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader-text"\x3e${i18n.itemProperties.updatingItemLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3ca class\x3d"js-learn-more" target\x3d"_blank"\x3e${i18n.itemProperties.advancedOptions.learnMore}\x3c/a\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/AdvancedOfflineOptions/templates/AdvancedOfflineOptionSearchItem.html":'\x3cbutton class\x3d"btn-link flex advanced-offline-options__search-result-item"\x3e\r\n    \x3cdiv class\x3d"margin-right-half"\x3e\r\n        \x3cimg src\x3d"js/arcgisonline/img/item-types/tilepackage16.svg" class\x3d"advanced-offline-options__search-result-item-img"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1 margin-right-1 advanced-offline-options__search-result-item-title"\x3e${title}\x3c/div\x3e\r\n\x3c/button\x3e',
"url:arcgisonline/pages/dijit/InfoTooltip/templates/InfoTooltip.html":'\x3cdiv class\x3d"inline-block"\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn-link btn-link-darker-gray info-icon ${buttonClasses}" aria-label\x3d"${buttonAriaLabel}" data-dojo-attach-point\x3d"_infoButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"iconWrapper"\x3e${!icons.inline.info.16}\x3c/div\x3e\r\n        \x3cdiv class\x3d"hide margin-left-quarter font-size--1" data-dojo-attach-point\x3d"infoTextEl"\x3e${infoText}\x3c/div\x3e\r\n    \x3c/button\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_popover" class\x3d"text-left"\x3e\r\n        \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"_closeIcon" class\x3d"info-tooltip__close popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n        \x3cdiv class\x3d"popover-title"\x3e${title}\x3c/div\x3e\r\n        \x3cdiv class\x3d"popover-text leader-half" data-dojo-attach-point\x3d"_popoverContent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ManageSceneCache.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_optionsContainer"\x3e\r\n    ${i18n.description}\r\n    \x3cfieldset class\x3d"trailer-0 fieldset-checkbox leader-half padding-trailer-1"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_rebuildFullContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildFullRadio" checked\x3e ${i18n.rebuildFull}\r\n      \x3c/label\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildLayersRadio"\x3e ${i18n.rebuildLayers}\r\n      \x3c/label\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_rebuildPartialContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPartialRadio"\x3e ${i18n.rebuildPartialCache}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"hide" data-dojo-attach-point\x3d"_rebuildPartialAttrContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildAttributesRadio"\x3e ${i18n.rebuildAttributesCache}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_portalOptionsContainer"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 fieldset-checkbox leader-half padding-trailer-1"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPortalFullRadio"\x3e ${i18n.rebuildFullCache}\r\n      \x3c/label\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPortalPartialRadio"\x3e ${i18n.rebuildPartialCache}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"hide"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPortalAttributesRadio"\x3e ${i18n.rebuildAttributesCache}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"loader js-caching-loader overlay-white position-relative leader-1 padding-trailer-1" data-dojo-attach-point\x3d"_caching"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${!i18n.republishing}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"_sceneLayerSelectContainer"\x3e\r\n    \x3clabel class\x3d"trailer-0" data-dojo-attach-point\x3d"_sceneLayerSelectLabel"\x3e${i18n.selectLayers}\x3c/label\x3e\r\n    \x3cdiv class\x3d"scene-layer-list trailer-1" data-dojo-attach-point\x3d"_sceneLayerContainer"\x3e\r\n      \x3c!-- create scene layers here--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"right inline-block padding-right-1" data-dojo-attach-point\x3d"_buttonBar"\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-blue" disabled\x3d"true" data-dojo-attach-point\x3d"_rebuildBtn"\x3e${i18n.rebuildLabel}\x3c/button\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/JobStatusDlg.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv class\x3d"${baseClass} orgDlg job-status-dlg" data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.title}"\x3e\r\n    \x3cdiv class\x3d"leader-1" data-dojo-attach-point\x3d"_statusContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_statusInfo"\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.status}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobStatus"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.startTime}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobStartTime"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.endTime}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobEndTime"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.duration}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobDuration"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_jobAdminDetailsContainer"\x3e\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e${i18n.machine}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_jobMachine"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e${i18n.user}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_jobUser"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.jobId}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobIdLinkContainer"\x3e\x3ca data-dojo-attach-point\x3d"_jobIdLink" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_jobIdText"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"loader overlay-white position-relative js-status-loader" data-dojo-attach-point\x3d"_statusLoader"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader-text"\x3e${!i18n.awaitingInfo}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block leader-1"\x3e\r\n      \x3cbutton type\x3d"button" class\x3d"btn btn-blue" data-dojo-attach-point\x3d"_cancelJobBtn"\x3e${i18n.cancelJob}\x3c/button\x3e\r\n      \x3cbutton type\x3d"button" class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_closeBtn"\x3e${i18n.close}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/AppendData/templates/_table-row.html":'\x3cdiv class\x3d"table-select-row" role\x3d"row"\x3e\r\n    \x3c!-- Field Name --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-field text-ellipsis"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width display-block"\x3e${displayName}\x3c/span\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n    \x3c!-- Match Field --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-matchField text-ellipsis" data-dojo-attach-point\x3d"matchFieldsContainer"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width" data-dojo-attach-point\x3d"matchFieldValue" data-value\x3d"__none"\x3e${!i18n.appendDataDlg.none}\x3c/span\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"matchFields" class\x3d"leader-0 hide"\x3e\x3c/select\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/View/templates/loader.html":'\x3cdiv class\x3d"loader padding-leader-5 padding-trailer-5 is-active"\x3e\r\n  \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"loader-text"\x3e${location}\x3c/div\x3e\r\n\x3c/div\x3e',"url:arcgisonline/sharing/dijit/AppendData/templates/_appendData.html":'\x3cdiv\x3e\r\n    \x3csection class\x3d"padding-leader-half content-node append-data"\x3e\r\n\r\n            \x3c!--Step 1--\x3e\r\n            \x3cdiv class\x3d"step-1 hide" data-dojo-attach-point\x3d"step1"\x3e\r\n                \x3cp class\x3d"trailer-half"\x3e${i18n.appendDataDlg.messageStep1}\x3c/p\x3e\r\n                \x3clabel class\x3d"trailer-half"\x3e${i18n.appendDataDlg.messageStep1Title}\x3c/label\x3e\r\n                \x3cul class\x3d"trailer-half"\x3e\r\n                    \x3cli\x3e${i18n.appendDataDlg.messageStep1Bullet1}\x3c/li\x3e\r\n                    \x3cli\x3e${i18n.appendDataDlg.messageStep1Bullet2}\x3c/li\x3e\r\n                    \x3cli\x3e${i18n.appendDataDlg.messageStep1Bullet3}\x3c/li\x3e\r\n                    \x3cli data-dojo-attach-point\x3d"step1Bullet4"\x3e${i18n.appendDataDlg.messageStep1Bullet4}\x3c/li\x3e\r\n                \x3c/ul\x3e\r\n                \x3cform data-dojo-attach-point\x3d"fileForm" enctype\x3d"multipart/form-data" class\x3d"text-left"\x3e\r\n                    \x3clabel\x3e\r\n                        ${i18n.appendDataDlg.fileName}\r\n                        \x3cinput name\x3d"file" type\x3d"file" accept\x3d".zip, .csv, .xls, .xlsx, .geojson" data-dojo-attach-point\x3d"fileInput"/\x3e\r\n                    \x3c/label\x3e\r\n                    \x3clabel class\x3d"hide" data-dojo-attach-point\x3d"zipSelect"\x3e\r\n                        ${i18n.appendDataDlg.contents}\r\n                        \x3cselect name\x3d"type" data-dojo-attach-point\x3d"supportedTypes" class\x3d"text-left"\x3e\x3c/select\x3e\r\n                    \x3c/label\x3e\r\n                \x3c/form\x3e\r\n                \x3cp class\x3d"trailer-quarter"\x3e${i18n.appendDataDlg.note}\x3c/p\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--Step 2--\x3e\r\n            \x3cdiv class\x3d"step-2 padding-right-half hide" data-dojo-attach-point\x3d"step2"\x3e\r\n                \x3cp class\x3d"trailer-half"\x3e${!i18n.appendDataDlg.messageStep2}\x3c/p\x3e\r\n                \x3clabel class\x3d"trailer-half" data-dojo-attach-point\x3d"serviceLayersContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"appendDataLabel"\x3e${i18n.appendDataDlg.chooseServiceLayer}\x3c/span\x3e\r\n                    \x3cselect data-dojo-attach-point\x3d"serviceLayersSelect" class\x3d"leader-0 select-full"\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"trailer-half" data-dojo-attach-point\x3d"dataLayersContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"appendDataLabel"\x3e${i18n.appendDataDlg.chooseLayer}\x3c/span\x3e\r\n                    \x3cselect data-dojo-attach-point\x3d"dataLayersSelect" class\x3d"leader-0 select-full"\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3c!-- Update Existing Features--\x3e\r\n                \x3cdiv class\x3d"trailer-half updateFeatures"\x3e${i18n.appendDataDlg.updateExistingFeaturesLbl}\x3c/div\x3e\r\n                \x3cp class\x3d"trailer-half updateFeatures"\x3e${i18n.appendDataDlg.updateExistingFeaturesMsg}\x3c/p\x3e\r\n                \x3clabel class\x3d"inline-block margin-right-half trailer-half align-middle updateFeatures js-updateFeatures js-attributesOnly"\x3e\r\n                    \x3cinput name\x3d"updateExistingFeatures" type\x3d"checkbox" data-dojo-attach-point\x3d"updateExistingFeatures"/\x3e\r\n                    ${i18n.appendDataDlg.updateExistingFeatures}\r\n                \x3c/label\x3e\r\n                \x3cdiv class\x3d"margin-left-1 updateFeatures js-updateFeatures-container js-updateFeatures"\x3e\r\n                    \x3c!-- UID field matching --\x3e\r\n                    \x3cp class\x3d"trailer-half"\x3e${i18n.appendDataDlg.selectFields}\x3c/p\x3e\r\n                    \x3cdiv class\x3d"trailer-half"\x3e\r\n                        \x3cselect data-dojo-attach-point\x3d"fromField" class\x3d"margin-right-half inline-block"\x3e\x3c/select\x3e\r\n                        \x3cspan class\x3d"margin-right-half"\x3e${i18n.appendDataDlg.matchesTo}\x3c/span\x3e\r\n                        \x3cselect data-dojo-attach-point\x3d"toField" class\x3d"inline-block"\x3e\x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3clabel class\x3d"inline-block margin-right-half trailer-half js-attributesOnly"\x3e\r\n                        ${i18n.appendDataDlg.skipInserts}\r\n                        \x3cinput name\x3d"skipInserts" type\x3d"checkbox" data-dojo-attach-point\x3d"skipInserts"/\x3e\r\n                    \x3c/label\x3e\r\n                    \x3clabel class\x3d"inline-block margin-right-half trailer-half js-updateGeometry js-attributesOnly"\x3e\r\n                        ${i18n.appendDataDlg.updateGeometryOnly}\r\n                        \x3cinput name\x3d"updateGeometry" type\x3d"checkbox" data-dojo-attach-point\x3d"updateGeometry"/\x3e\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- Table View --\x3e\r\n                \x3cbutton class\x3d"btn-link trailer-half btn-fill" data-value\x3d"false" data-dojo-attach-point\x3d"showFieldMatchingLink"\x3e${i18n.appendDataDlg.showFieldMatching}\x3c/button\x3e\r\n                \x3cdiv class\x3d"js-table-wrap table-select trailer-half js-view hide" role\x3d"table" data-dojo-attach-point\x3d"fieldMatching"\x3e\r\n                    \x3cdiv class\x3d"table-select-head js-table-header" role\x3d"rowgroup"\x3e\r\n                        \x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n                            \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header is-ascending" aria-sort\x3d"ascending" data-sort\x3d"title" data-sort-order\x3d"asc"\x3e${i18n.appendDataDlg.fields}\x3c/button\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"matchField" data-sort-order\x3d"asc"\x3e${i18n.appendDataDlg.matchField}\x3c/button\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"table-select-rows js-table-rows js-view" role\x3d"rowgroup"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Loader --\x3e\r\n            \x3cdiv class\x3d"hide analyze-loader-wrap js-analyze-loader-wrap"\x3e\x3c/div\x3e\r\n\r\n    \x3c/section\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ReplaceLayer/templates/ReplaceLayer.html":'\x3cdiv class\x3d"stepper js-overlay-body grid-container"\x3e\r\n  \x3cdiv class\x3d"stepper__header js-stepper-headers"\x3e\r\n    \x3cdiv class\x3d"stepper__header-steps"\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"1"\r\n        title\x3d"${i18n.replaceLayer.selectReplacementLayer}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 stepper__step-item--active js-step-link js-step-header-1"\r\n      \x3e\r\n        ${i18n.replaceLayer.selectReplacementLayer}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"2"\r\n        title\x3d"${i18n.replaceLayer.chooseArchiveOption}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-2"\r\n      \x3e\r\n        ${i18n.replaceLayer.chooseArchiveOption}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"3"\r\n        title\x3d"${i18n.replaceLayer.previewStyles}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-3 js-replace-lyr-show-preview-step"\r\n      \x3e\r\n        ${i18n.replaceLayer.previewStyles}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"4"\r\n        title\x3d"${i18n.replaceLayer.summary}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-4"\r\n      \x3e\r\n        ${i18n.replaceLayer.summary}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__step-bars js-step-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex-1 stepper__search-container"\x3e\x3cdiv class\x3d"js-search-input"\x3e\x3c/div\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__content"\x3e\r\n    \x3cbutton data-step-num\x3d"1" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-1 leader-half hide"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/h4\x3e\r\n        \x3cdiv class\x3d"pre-select"\x3e\r\n          \x3cdiv class\x3d"font-size-2 text-darker-gray trailer-1"\x3e${i18n.replaceLayer.noLayerSelected}\x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear js-replace-layer-select trailer-2"\x3e${i18n.replaceLayer.selectLayer}\x3c/button\x3e\r\n          \x3cdiv\x3e${i18n.replaceLayer.requirements}\x3c/div\x3e\r\n          \x3chr class\x3d"leader-0 trailer-half" /\x3e\r\n          \x3cdiv\x3e\r\n            \x3cspan\x3e${i18n.replaceLayer.layersShouldHaveSame}\x3c/span\x3e\r\n            \x3cul\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.layerShouldHaveSameScheme}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.layerShouldHaveSameComposition}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"post-select hide"\x3e\r\n          \x3cdiv class\x3d"selected-card trailer-2"\x3e\r\n            \x3cdiv class\x3d"stepper__content-pane js-replace-lyr-selected-layer"\x3e\r\n              \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n              \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n                \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n                \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n                \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n              \x3c/h5\x3e\r\n              \x3cdiv class\x3d"replace-lyr-change-lyr-container"\x3e\r\n                \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-lyr"\x3e\r\n                  ${i18n.replaceLayer.changeLayer}\r\n                \x3c/button\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              data-dojo-attach-point\x3d"_layerError"\r\n              class\x3d"input-error-message input-error-message-right js-replace-lyr-error replace-lyr-error"\r\n            \x3e\r\n              ${i18n.replaceLayer.error}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-check-styles flex-center"\x3e\r\n            \x3cspan class\x3d"replace-lyr-loader margin-right-quarter"\x3e\x3c/span\x3e ${i18n.replaceLayer.checkIfCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-success font-size--1 js-replace-lyr-check-styles-success flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-success-icon"\x3e${icons.inline.check-circle-f.16}\x3c/span\x3e\r\n            ${i18n.replaceLayer.stylesAreCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-warning font-size--1 js-replace-lyr-check-styles-warning flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-warning-icon margin-right-half"\r\n              \x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\r\n            \x3e\r\n            \x3cdiv\x3e${i18n.replaceLayer.stylesAreIncompatible}\x3cbr /\x3e\x3cspan class\x3d"js-replace-lyr-show-preview-step"\x3e${i18n.replaceLayer.reviewDifferences}\x3c/span\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cbutton data-step-num\x3d"2" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-2 leader-half hide"\x3e\r\n      \x3c!-- Radio --\x3e\r\n      \x3cdiv class\x3d"stepper__radio-item stepper__radio-item--selected"\x3e\r\n        \x3clabel class\x3d"flex trailer-0 stepper__radio-title"\x3e\r\n          \x3cinput\r\n            name\x3d"js-replace-lyr-archive-option-radio"\r\n            type\x3d"radio"\r\n            role\x3d"radio"\r\n            value\x3d"archive"\r\n            checked\r\n          /\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.archiveAs}\x3c/span\x3e\r\n\r\n          \x3cdiv class\x3d"js-replace-lyr-edit-container replace-lyr-edit-container margin-left-half input-group hide"\x3e\r\n            \x3cinput\r\n              class\x3d"js-replace-lyr-edit-name input-group-input"\r\n              onfocus\x3d"this.select();"\r\n              type\x3d"text"\r\n              placeholder\x3d"${i18n.replaceLayer.layerName}"\r\n              maxlength\x3d"120"\r\n            /\x3e\r\n            \x3cdiv class\x3d"js-replace-name-input-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.invalidServiceTitle.message}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"js-replace-name-available-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.serviceNameExists.message}\r\n            \x3c/div\x3e\r\n            \x3cspan class\x3d"input-group-button"\x3e\r\n              \x3cbutton class\x3d"js-replace-lyr-edit-save btn"\x3e${i18n.replaceLayer.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cbutton class\x3d"js-replace-lyr-current-arch-btn margin-left-half btn-link"\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-arch-name"\x3e\x3c/span\x3e ${icons.inline.edit.16}\r\n          \x3c/button\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"stepper__radio-desc leader-quarter"\x3e${i18n.replaceLayer.contentWillBeArchived}\x3c/div\x3e\r\n        \x3c!-- below the divider - list of replacement rules and localized svg--\x3e\r\n        \x3chr class\x3d"margin-left-2 leader-half trailer-half" /\x3e\r\n        \x3cdiv class\x3d"margin-left-1 stepper__radio-details flex"\x3e\r\n          \x3cdiv class\x3d"stepper__radio-detail margin-right-2"\x3e\r\n            \x3cul class\x3d"font-size--2"\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.retainsCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.archiveCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replacementLayerIsDeleted}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.idealForArchive}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-archive_svg stepper__radio-detail"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__radio-item"\x3e\r\n        \x3clabel class\x3d"flex trailer-0 stepper__radio-title"\x3e\r\n          \x3cinput\r\n            name\x3d"js-replace-lyr-archive-option-radio"\r\n            type\x3d"radio"\r\n            role\x3d"radio"\r\n            value\x3d"replace"\r\n          /\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\r\n            \x3e${i18n.replaceLayer.useReplacementAsArchive}\x3c/span\r\n          \x3e\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"stepper__radio-desc leader-quarter"\x3e${i18n.replaceLayer.contentWillBeSwapped}\x3c/div\x3e\r\n        \x3c!-- below the divider - list of replacement rules and localized svg--\x3e\r\n        \x3chr class\x3d"margin-left-2 leader-half trailer-half" /\x3e\r\n        \x3cdiv class\x3d"margin-left-1 stepper__radio-details flex"\x3e\r\n          \x3cdiv class\x3d"stepper__radio-detail margin-right-2"\x3e\r\n            \x3cul class\x3d"font-size--2"\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.retainsBothLayers}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.idealForReplacement}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-replace_svg stepper__radio-detail"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- End radio --\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane stepper__content-pane-flex leader-1"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/span\x3e\r\n          \x3cdiv class\x3d"margin-left-1 font-size--2 leader-quarter"\x3e${i18n.replaceLayer.willUpdateItemInfo}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3clabel class\x3d"toggle-switch replace-lyr-switch modifier-class"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"js-replace-lyr-replace-item-switch toggle-switch-input" /\x3e\r\n          \x3cspan class\x3d"toggle-switch-track margin-right-1"\x3e\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"3" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-3 grid-container stepper__content-container flex-column leader-half hide"\x3e\r\n      \x3cdiv class\x3d"leader-1 trailer-half"\x3e${i18n.replaceLayer.stylePreview}\x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-single-style flex hide"\x3e\r\n        \x3cspan\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e \x3cb class\x3d"js-replace-lyr-style-layer margin-left-half"\x3e\x3c/b\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-multiple-styles replace-lyr-multiple-styles flex"\x3e\r\n        \x3c/span\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e\r\n        \x3cselect class\x3d"js-replace-lyr-style-layer-dropdown margin-left-half"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane flex-column"\x3e\r\n        \x3cdiv class\x3d"replace-lyr-preview-label flex flex-space-between"\x3e\r\n          \x3cspan\x3e${i18n.replaceLayer.replacementLayer}\x3c/span\x3e\r\n          \x3cspan\x3e${i18n.replaceLayer.currentLayer}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3ciframe class\x3d"js-replace-lyr-preview-container replace-lyr-preview-container"\x3e\x3c/iframe\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"4" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-4 leader-half hide"\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.currentLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-current-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-current-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by} \x3ca class\x3d"js-replace-lyr-current-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n            \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container flex-center"\x3e\r\n            \x3cdiv class\x3d"js-replace-lyr-check-styles-warning flex-center font-size--1 hide"\x3e\r\n              \x3cspan class\x3d"replace-lyr-warning-icon"\x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\x3e\r\n              ${i18n.replaceLayer.stylesAreIncompatible}\r\n            \x3c/div\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link js-replace-lyr-change-lyr-summary text-right flex-1"\x3e\r\n              ${i18n.replaceLayer.selectReplacementLayer}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.archiveOption}\x3c/div\x3e\r\n          \x3cul\x3e\r\n            \x3cli class\x3d"js-replace-lyr-archive-option hide"\x3e\r\n              ${i18n.replaceLayer.archiveAs} \x3cb class\x3d"js-replace-lyr-new-layer-name"\x3e\x3c/b\x3e\r\n            \x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-option hide"\x3e${i18n.replaceLayer.useReplacementAsArchive}\x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-item-information hide"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/li\x3e\r\n          \x3c/ul\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container"\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-option"\x3e\r\n              ${i18n.replaceLayer.chooseArchiveOption}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-availabilty-notice flex flex-space-between hide"\x3e\r\n        \x3cspan\x3e${icons.inline.lightbulb.24} ${i18n.replaceLayer.replacementLayerAvailabilityNotice}\x3c/span\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-off-black js-replace-lyr-availabilty-notice-close replace-lyr-availabilty-notice-close"\x3e${icons.inline.x.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"btn stepper__next leader-half js-stepper-next-btn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/img/Archive_no-text.svg":'\x3csvg id\x3d"Layer_1" data-name\x3d"Layer 1" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 550 200" class\x3d"font-size--3"\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1,.cls-13{fill:none}.cls-1{stroke:#323232;stroke-miterlimit:10}.cls-1,.cls-13,.cls-14{stroke-linecap:round}.cls-2{fill:#323232}.cls-14,.cls-3{fill:#fff}.cls-4{fill:#efe9e3}.cls-5{fill:#a9d99d}.cls-6{fill:#fcf2ea}.cls-7{fill:#e5e4de}.cls-8{fill:#bdf2af}.cls-9{fill:#a7d6fe}.cls-13,.cls-14{stroke:#ff3636;stroke-linejoin:round}\x3c/style\x3e\x3c/defs\x3e\x3cpath class\x3d"cls-1" d\x3d"M389.51 132.42c-7 0-14.06 4.57-19.41 13.84M100.34 109.42c-7 0-14.06 4.57-19.42 13.84M219.51 16.42c-7 0-14.06 4.57-19.41 13.84"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M245 83.11l-.19-13.15-7.42 4.29-9.52-5.5-7.75 4.47 9.53 5.5-7.42 4.28 22.77.11z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M118.17 126.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M117.83 62.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L62.25 93a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L173.75 95a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M87.7 79.49l19.06 11 30.12-17.39-19.05-11L87.7 79.49zM62.75 93.9l19.05 11 19.79-11.43-19.05-11L62.75 93.9zM112.11 122.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM111.95 93.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM167.19 90.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M87 107.9l19.92 11.5 19.79-11.43-19.92-11.5L87 107.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M88.57 78.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM62.75 93.9l18.18 10.5 18.94-10.93-18.19-10.5L62.75 93.9zM112.98 122.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM113.68 93.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM168.06 91.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M106.05 118.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M117.88 71.07l7.79 4.5 7.74-4.47-7.79-4.5-7.74 4.47zM108.41 76.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM98.94 82l7.8 4.5 6.88-3.97-7.79-4.5L98.94 82zM170.66 92.6l-7.75 4.47 2.6 1.5 7.74-4.47-2.59-1.5zM153.44 102.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM143.97 108l2.6 1.5 6.89-3.97-2.6-1.5-6.89 3.97zM123.02 65.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM112.7 71.06l-5.2-3-6.89 3.98 5.2 3 6.89-3.98zM103.23 76.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM62.75 93.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM115.58 124.4l2.59 1.5 16.36-9.44-2.6-1.5-16.35 9.44zM118.86 93.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM133.49 85.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M111.59 105.2a3.88 3.88 0 011.86 2h10.31L108 98.18v5.95a9.28 9.28 0 013.59 1.07zM102.09 105.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"106.85" cy\x3d"107.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 106.851 107.935)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M102.12 110.67a3.9 3.9 0 01-1.86-2l-11.34.33 16.08 9.29.63-6.55a9.09 9.09 0 01-3.51-1.07zM113.45 108.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.21 84.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M177.79 7.89L244 46.12l-65.79 38L112 45.88l65.79-38m0-1a1 1 0 00-.5.14L111.5 45a1 1 0 000 1.74L177.71 85a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L178.29 7a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.17 78.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M177.83 14.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L122.25 45a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L233.75 47a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M147.71 31.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM122.75 45.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM172.11 74.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM171.95 45.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM227.19 42.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M147 59.9l19.91 11.5 19.8-11.43-19.92-11.5L147 59.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M148.57 30.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM122.75 45.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM172.98 74.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM173.68 45.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM228.06 43.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M166.05 70.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.21 148.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M288.79 71.89L355 110.12l-65.79 38L223 109.88l65.79-38m0-1a1 1 0 00-.5.14L222.5 109a1 1 0 000 1.74L288.71 149a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L289.29 71a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.17 142.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.83 78.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L233.25 109a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L344.75 111a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M258.7 95.49l19.06 11 30.12-17.39-19.05-11-30.13 17.39zM233.75 109.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM283.11 138.4l6.06 3.5 19.8-11.43-6.07-3.5-19.79 11.43zM282.95 109.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM338.19 106.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M258 123.9l19.92 11.5 19.79-11.43-19.92-11.5L258 123.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M259.57 94.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM233.75 109.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM283.98 138.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM284.68 109.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM339.06 107.1l-29.26 16.89 5.19 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M277.05 134.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.88 87.07l7.79 4.5 7.75-4.47-7.8-4.5-7.74 4.47zM279.41 92.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM269.94 98l7.8 4.5 6.88-3.97-7.79-4.5-6.89 3.97zM341.65 108.6l-7.74 4.47 2.6 1.5 7.74-4.47-2.6-1.5zM324.44 118.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM314.98 124l2.59 1.5 6.89-3.97-2.6-1.5-6.88 3.97zM294.02 81.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM283.7 87.06l-5.2-3-6.88 3.98 5.19 3 6.89-3.98zM274.23 92.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM233.75 109.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM286.57 140.4l2.6 1.5 16.35-9.44-2.59-1.5-16.36 9.44zM289.86 109.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM304.49 101.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M282.59 121.2a3.88 3.88 0 011.86 2h10.31L279 114.18v5.95a9.28 9.28 0 013.59 1.07zM273.09 121.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"277.85" cy\x3d"123.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 277.848 123.937)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M273.12 126.67a3.9 3.9 0 01-1.86-2l-11.34.36 16.08 9.26.63-6.55a9.09 9.09 0 01-3.51-1.07zM284.45 124.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M229.17 190.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath d\x3d"M228.83 126.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L173.25 157a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L284.75 159a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z" fill\x3d"#ff3636"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M198.71 143.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM173.75 157.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM223.11 186.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM222.95 157.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM278.19 154.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5zM198 171.9l19.91 11.5 19.8-11.43-19.92-11.5L198 171.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M199.57 142.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM173.75 157.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM223.98 186.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM224.68 157.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM279.06 155.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M217.05 182.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M228.88 135.07l7.79 4.5 7.74-4.47-7.79-4.5-7.74 4.47zM219.41 140.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM209.94 146l7.8 4.5 6.88-3.97-7.79-4.5-6.89 3.97zM281.65 156.6l-7.74 4.47 2.6 1.5 7.74-4.47-2.6-1.5zM264.44 166.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM254.97 172l2.6 1.5 6.89-3.97-2.6-1.5-6.89 3.97zM234.02 129.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM223.7 135.06l-5.2-3-6.88 3.98 5.19 3 6.89-3.98zM214.23 140.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM173.75 157.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM226.57 188.4l2.6 1.5 16.36-9.44-2.6-1.5-16.36 9.44zM229.86 157.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM244.49 149.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M222.59 169.2a3.88 3.88 0 011.86 2h10.31L219 162.18v5.95a9.28 9.28 0 013.59 1.07zM213.09 169.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"217.85" cy\x3d"171.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 217.85 171.934)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M213.12 174.67a3.9 3.9 0 01-1.86-2l-11.34.36 16.08 9.26.63-6.55a9.09 9.09 0 01-3.51-1.07zM224.45 172.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M350.67 190.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M350.33 126.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L294.75 157a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L406.25 159a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M320.2 143.49l19.06 11 30.12-17.39-19.05-11-30.13 17.39zM295.25 157.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM344.61 186.4l6.06 3.5 19.8-11.43-6.07-3.5-19.79 11.43zM344.45 157.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM399.69 154.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M319.5 171.9l19.92 11.5 19.79-11.43-19.92-11.5-19.79 11.43z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M321.07 142.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM295.25 157.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM345.48 186.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM346.18 157.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM400.56 155.1l-29.26 16.89 5.19 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M338.55 182.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath fill\x3d"#ffe0e0" d\x3d"M229.17 189.9l-55.42-32 55.08-31.8 55.42 32-55.08 31.8z" opacity\x3d".5"/\x3e\x3cpath class\x3d"cls-13" d\x3d"M232.93 150v-1.73a2.8 2.8 0 00-2.57-2.27h-3.29a2.8 2.8 0 00-2.57 2.27V150"/\x3e\x3cpath class\x3d"cls-14" d\x3d"M235.47 170h-12.94l-2.35-20h17.64l-2.35 20z"/\x3e\x3cpath class\x3d"cls-14" d\x3d"M219.5 149h19v4h-19z"/\x3e\x3cpath class\x3d"cls-13" d\x3d"M223.6 155.6l1.2 12M227.2 155.6l.4 12M230.8 155.6l-.4 12M234.4 155.6l-1.2 12"/\x3e\x3cpath class\x3d"cls-1" d\x3d"M132.65 87a29.18 29.18 0 011.35-8.41 39.56 39.56 0 013.68-8.38 40.18 40.18 0 015.45-7.37 29.46 29.46 0 016.68-5.4 17.25 17.25 0 015.6-2.16"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M153.15 60.13l-.83-.56 2.74-4.1-4.29-2.43.49-.87 5.23 2.96-3.34 5z"/\x3e\x3ctext class\x3d"archive-lyr-current-layer-svg" x\x3d"225" y\x3d"20" text-anchor\x3d"start"\x3e${i18n.replaceLayer.currentLayer}\x3c/text\x3e\x3ctext x\x3d"80" y\x3d"140" text-anchor\x3d"middle"\x3e${i18n.replaceLayer.replacementLayer}\x3c/text\x3e\x3ctext class\x3d"archive-lyr-archive-svg" x\x3d"395" y\x3d"137" text-anchor\x3d"start"\x3e${i18n.replaceLayer.archivedSvg}\x3c/text\x3e\x3c/svg\x3e\r\n',
"url:arcgisonline/img/Replace_no-text.svg":'\x3csvg id\x3d"Layer_1" data-name\x3d"Layer 1" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 550 200" class\x3d"font-size--3"\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1{fill:none;stroke:#323232;stroke-linecap:round;stroke-miterlimit:10}.cls-2{fill:#323232}.cls-3{fill:#fff}.cls-4{fill:#efe9e3}.cls-5{fill:#a9d99d}.cls-6{fill:#fcf2ea}.cls-7{fill:#e5e4de}.cls-8{fill:#bdf2af}.cls-9{fill:#a7d6fe}\x3c/style\x3e\x3c/defs\x3e\x3cpath class\x3d"cls-1" d\x3d"M100.34 109.42c-7 0-14.06 4.57-19.42 13.84M219.51 16.42c-7 0-14.06 4.57-19.41 13.84"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M245 83.11l-.19-13.15-7.42 4.29-9.52-5.5-7.75 4.47 9.53 5.5-7.42 4.28 22.77.11z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M118.17 126.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M117.83 62.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L62.25 93a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L173.75 95a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M87.7 79.49l19.06 11 30.12-17.39-19.05-11L87.7 79.49zM62.75 93.9l19.05 11 19.79-11.43-19.05-11L62.75 93.9zM112.11 122.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM111.95 93.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM167.19 90.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M87 107.9l19.92 11.5 19.79-11.43-19.92-11.5L87 107.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M88.57 78.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM62.75 93.9l18.18 10.5 18.94-10.93-18.19-10.5L62.75 93.9zM112.98 122.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM113.68 93.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM168.06 91.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M106.05 118.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M117.88 71.07l7.79 4.5 7.74-4.47-7.79-4.5-7.74 4.47zM108.41 76.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM98.94 82l7.8 4.5 6.88-3.97-7.79-4.5L98.94 82zM170.66 92.6l-7.75 4.47 2.6 1.5 7.74-4.47-2.59-1.5zM153.44 102.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM143.97 108l2.6 1.5 6.89-3.97-2.6-1.5-6.89 3.97zM123.02 65.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM112.7 71.06l-5.2-3-6.89 3.98 5.2 3 6.89-3.98zM103.23 76.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM62.75 93.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM115.58 124.4l2.59 1.5 16.36-9.44-2.6-1.5-16.35 9.44zM118.86 93.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM133.49 85.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M111.59 105.2a3.88 3.88 0 011.86 2h10.31L108 98.18v5.95a9.28 9.28 0 013.59 1.07zM102.09 105.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"106.85" cy\x3d"107.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 106.851 107.935)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M102.12 110.67a3.9 3.9 0 01-1.86-2l-11.34.33 16.08 9.29.63-6.55a9.09 9.09 0 01-3.51-1.07zM113.45 108.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.21 84.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M177.79 7.89L244 46.12l-65.79 38L112 45.88l65.79-38m0-1a1 1 0 00-.5.14L111.5 45a1 1 0 000 1.74L177.71 85a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L178.29 7a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.17 78.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M177.83 14.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L122.25 45a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L233.75 47a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M147.71 31.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM122.75 45.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM172.11 74.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM171.95 45.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM227.19 42.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M147 59.9l19.91 11.5 19.8-11.43-19.92-11.5L147 59.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M148.57 30.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM122.75 45.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM172.98 74.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM173.68 45.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM228.06 43.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M166.05 70.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.21 148.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M288.79 71.89L355 110.12l-65.79 38L223 109.88l65.79-38m0-1a1 1 0 00-.5.14L222.5 109a1 1 0 000 1.74L288.71 149a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L289.29 71a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.17 142.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.83 78.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L233.25 109a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L344.75 111a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M258.7 95.49l19.06 11 30.12-17.39-19.05-11-30.13 17.39zM233.75 109.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM283.11 138.4l6.06 3.5 19.8-11.43-6.07-3.5-19.79 11.43zM282.95 109.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM338.19 106.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M258 123.9l19.92 11.5 19.79-11.43-19.92-11.5L258 123.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M259.57 94.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM233.75 109.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM283.98 138.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM284.68 109.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM339.06 107.1l-29.26 16.89 5.19 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M277.05 134.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.88 87.07l7.79 4.5 7.75-4.47-7.8-4.5-7.74 4.47zM279.41 92.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM269.94 98l7.8 4.5 6.88-3.97-7.79-4.5-6.89 3.97zM341.65 108.6l-7.74 4.47 2.6 1.5 7.74-4.47-2.6-1.5zM324.44 118.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM314.98 124l2.59 1.5 6.89-3.97-2.6-1.5-6.88 3.97zM294.02 81.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM283.7 87.06l-5.2-3-6.88 3.98 5.19 3 6.89-3.98zM274.23 92.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM233.75 109.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM286.57 140.4l2.6 1.5 16.35-9.44-2.59-1.5-16.36 9.44zM289.86 109.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM304.49 101.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M282.59 121.2a3.88 3.88 0 011.86 2h10.31L279 114.18v5.95a9.28 9.28 0 013.59 1.07zM273.09 121.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"277.85" cy\x3d"123.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 277.848 123.937)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M273.12 126.67a3.9 3.9 0 01-1.86-2l-11.34.36 16.08 9.26.63-6.55a9.09 9.09 0 01-3.51-1.07zM284.45 124.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M229.17 190.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M228.83 126.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L173.25 157a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L284.75 159a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M198.71 143.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM173.75 157.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM223.11 186.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM222.95 157.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM278.19 154.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M198 171.9l19.91 11.5 19.8-11.43-19.92-11.5L198 171.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M199.57 142.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM173.75 157.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM223.98 186.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM224.68 157.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM279.06 155.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M217.05 182.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-1" d\x3d"M132.68 85.94a30.38 30.38 0 011.32-7.35 39.56 39.56 0 013.68-8.38 40.18 40.18 0 015.45-7.37 29.46 29.46 0 016.68-5.4 17.25 17.25 0 015.6-2.16"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M137.07 82.96l-.68-.74-3.62 3.34-3.07-3.86-.78.63 3.73 4.7 4.42-4.07zM153.15 60.13l-.83-.56 2.74-4.1-4.29-2.43.49-.87 5.23 2.96-3.34 5z"/\x3e\x3ctext class\x3d"replace-lyr-current-layer-svg" x\x3d"225" y\x3d"20" text-anchor\x3d"start"\x3e${i18n.replaceLayer.currentLayer}\x3c/text\x3e\x3ctext x\x3d"80" y\x3d"140" text-anchor\x3d"middle"\x3e${i18n.replaceLayer.replacementLayer}\x3c/text\x3e\x3c/svg\x3e\r\n',
"url:arcgisonline/pages/dijit/ReplaceLayer/templates/ReplaceSceneLayer.html":'\x3cdiv class\x3d"stepper js-overlay-body grid-container"\x3e\r\n  \x3cdiv class\x3d"stepper__header js-stepper-headers"\x3e\r\n    \x3cdiv class\x3d"stepper__header-steps"\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"1"\r\n        title\x3d"${i18n.replaceLayer.selectReplacementLayer}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 stepper__step-item--active js-step-link js-step-header-1"\r\n      \x3e\r\n        ${i18n.replaceLayer.selectReplacementLayer}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"2"\r\n        title\x3d"${i18n.replaceLayer.replaceSceneLayer.archive}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-2"\r\n      \x3e\r\n        ${i18n.replaceLayer.replaceSceneLayer.archive}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"3"\r\n        title\x3d"${i18n.replaceLayer.previewStyles}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-3 js-replace-lyr-show-preview-step"\r\n      \x3e\r\n        ${i18n.replaceLayer.previewStyles}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"4"\r\n        title\x3d"${i18n.replaceLayer.summary}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-4"\r\n      \x3e\r\n        ${i18n.replaceLayer.summary}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__step-bars js-step-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex-1 stepper__search-container"\x3e\x3cdiv class\x3d"js-search-input"\x3e\x3c/div\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__content"\x3e\r\n    \x3cbutton data-step-num\x3d"1" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-1 leader-half hide"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/h4\x3e\r\n        \x3cdiv class\x3d"pre-select"\x3e\r\n          \x3cdiv class\x3d"font-size-2 text-darker-gray trailer-1"\x3e${i18n.replaceLayer.noLayerSelected}\x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear js-replace-layer-select trailer-2"\x3e${i18n.replaceLayer.selectLayer}\x3c/button\x3e\r\n          \x3cdiv\x3e${i18n.replaceLayer.requirements}\x3c/div\x3e\r\n          \x3chr class\x3d"leader-0 trailer-half" /\x3e\r\n          \x3cdiv\x3e\r\n            \x3cspan\x3e${i18n.replaceLayer.layersShouldHaveSame}\x3c/span\x3e\r\n            \x3cul\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replaceSceneLayer.coordinateSystem}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.layerShouldHaveSameComposition}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replaceSceneLayer.layerTypesShouldMatch}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"post-select hide"\x3e\r\n          \x3cdiv class\x3d"selected-card trailer-2"\x3e\r\n            \x3cdiv class\x3d"stepper__content-pane js-replace-lyr-selected-layer"\x3e\r\n              \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n              \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n                \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n                \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n                \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n              \x3c/h5\x3e\r\n              \x3cdiv class\x3d"replace-lyr-change-lyr-container"\x3e\r\n                \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-lyr"\x3e\r\n                  ${i18n.replaceLayer.changeLayer}\r\n                \x3c/button\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              data-dojo-attach-point\x3d"_layerError"\r\n              class\x3d"input-error-message input-error-message-right js-replace-lyr-error replace-lyr-error"\r\n            \x3e\r\n              ${i18n.replaceLayer.error}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-check-styles flex-center"\x3e\r\n            \x3cspan class\x3d"replace-lyr-loader margin-right-quarter"\x3e\x3c/span\x3e ${i18n.replaceLayer.checkIfCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-success font-size--1 js-replace-lyr-check-styles-success flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-success-icon"\x3e${icons.inline.check-circle-f.16}\x3c/span\x3e\r\n            ${i18n.replaceLayer.stylesAreCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-warning font-size--1 js-replace-lyr-check-styles-warning flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-warning-icon margin-right-half"\r\n              \x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\r\n            \x3e\r\n            \x3cdiv\x3e${i18n.replaceLayer.stylesAreIncompatible}\x3cbr /\x3e\x3cspan class\x3d"js-replace-lyr-show-preview-step"\x3e${i18n.replaceLayer.reviewDifferences}\x3c/span\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cbutton data-step-num\x3d"2" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-2 leader-half hide"\x3e\r\n      \x3c!-- Radio --\x3e\r\n      \x3cdiv class\x3d"stepper__radio-item"\x3e\r\n        \x3clabel class\x3d"flex trailer-0 stepper__radio-title"\x3e\r\n          \x3c!-- Radio \'checked\' needed for summary --\x3e\r\n          \x3cinput\r\n            name\x3d"js-replace-lyr-archive-option-radio"\r\n            type\x3d"radio"\r\n            role\x3d"radio"\r\n            value\x3d"archive"\r\n            checked\r\n            class\x3d"hide"\r\n          /\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.archiveAs}\x3c/span\x3e\r\n\r\n          \x3cdiv class\x3d"js-replace-lyr-edit-container replace-lyr-edit-container margin-left-half input-group hide"\x3e\r\n            \x3cinput\r\n              class\x3d"js-replace-lyr-edit-name input-group-input"\r\n              onfocus\x3d"this.select();"\r\n              type\x3d"text"\r\n              placeholder\x3d"${i18n.replaceLayer.layerName}"\r\n              maxlength\x3d"120"\r\n            /\x3e\r\n            \x3cdiv class\x3d"js-replace-name-input-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.invalidServiceTitle.message}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"js-replace-name-available-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.serviceNameExists.message}\r\n            \x3c/div\x3e\r\n            \x3cspan class\x3d"input-group-button"\x3e\r\n              \x3cbutton class\x3d"js-replace-lyr-edit-save btn"\x3e${i18n.replaceLayer.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cbutton class\x3d"js-replace-lyr-current-arch-btn margin-left-half btn-link"\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-arch-name"\x3e\x3c/span\x3e ${icons.inline.edit.16}\r\n          \x3c/button\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"stepper__radio-desc leader-quarter"\x3e${i18n.replaceLayer.contentWillBeArchived}\x3c/div\x3e\r\n        \x3c!-- below the divider - list of replacement rules and localized svg--\x3e\r\n        \x3chr class\x3d"margin-left-2 leader-half trailer-half" /\x3e\r\n        \x3cdiv class\x3d"margin-left-1 stepper__radio-details flex"\x3e\r\n          \x3cdiv class\x3d"stepper__radio-detail margin-right-2"\x3e\r\n            \x3cul class\x3d"font-size--2"\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replaceSceneLayer.retainsCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.archiveCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replacementLayerIsDeleted}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-archive_svg stepper__radio-detail"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"stepper__content-pane stepper__content-pane-flex leader-1"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/span\x3e\r\n          \x3cdiv class\x3d"margin-left-1 font-size--2 leader-quarter"\x3e${i18n.replaceLayer.willUpdateItemInfo}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3clabel class\x3d"toggle-switch replace-lyr-switch modifier-class"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"js-replace-lyr-replace-item-switch toggle-switch-input" /\x3e\r\n          \x3cspan class\x3d"toggle-switch-track margin-right-1"\x3e\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"3" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-3 grid-container stepper__content-container flex-column leader-half hide"\x3e\r\n      \x3cdiv class\x3d"leader-1 trailer-half"\x3e${i18n.replaceLayer.stylePreview}\x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-single-style flex hide"\x3e\r\n        \x3cspan\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e \x3cb class\x3d"js-replace-lyr-style-layer margin-left-half"\x3e\x3c/b\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-multiple-styles replace-lyr-multiple-styles flex"\x3e\r\n        \x3c/span\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e\r\n        \x3cselect class\x3d"js-replace-lyr-style-layer-dropdown margin-left-half"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane flex-1"\x3e\x3ciframe class\x3d"js-replace-lyr-preview-container replace-lyr-preview-container"\x3e\x3c/iframe\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"4" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-4 leader-half hide"\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.currentLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-current-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-current-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by} \x3ca class\x3d"js-replace-lyr-current-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n            \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container flex-center"\x3e\r\n            \x3cdiv class\x3d"js-replace-lyr-check-styles-warning flex-center font-size--1 hide"\x3e\r\n              \x3cspan class\x3d"replace-lyr-warning-icon"\x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\x3e\r\n              ${i18n.replaceLayer.stylesAreIncompatible}\r\n            \x3c/div\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link js-replace-lyr-change-lyr-summary text-right flex-1"\x3e\r\n              ${i18n.replaceLayer.selectReplacementLayer}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.replaceSceneLayer.archiveDetails}\x3c/div\x3e\r\n          \x3cul\x3e\r\n            \x3cli class\x3d"js-replace-lyr-archive-option hide"\x3e\r\n              ${i18n.replaceLayer.archiveAs} \x3cb class\x3d"js-replace-lyr-new-layer-name"\x3e\x3c/b\x3e\r\n            \x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-option hide"\x3e${i18n.replaceLayer.useReplacementAsArchive}\x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-item-information hide"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/li\x3e\r\n          \x3c/ul\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container"\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-option"\x3e\r\n              ${i18n.replaceLayer.replaceSceneLayer.updateArchive}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-availabilty-notice flex flex-space-between hide"\x3e\r\n        \x3cspan\x3e${icons.inline.lightbulb.24} ${i18n.replaceLayer.replacementLayerAvailabilityNotice}\x3c/span\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-off-black js-replace-lyr-availabilty-notice-close replace-lyr-availabilty-notice-close"\x3e${icons.inline.x.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"btn stepper__next leader-half js-stepper-next-btn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/OverwriteFromCloud.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n   \x3cdiv class\x3d"overwriteDialog"\x3e\r\n       \x3cp class\x3d"overwriteInfoText"\x3e${i18n.overwriteFromCloudDlg.overwriteInfoText}\x3c/p\x3e\r\n       \x3cp class\x3d"overwriteInfoNote"\x3e${i18n.overwriteFromCloudDlg.overwriteInfoNote}\x3c/p\x3e\r\n   \x3c/div\x3e \r\n   \x3c!-- Loader --\x3e\r\n   \x3cdiv class\x3d"loader loader-connectDataset is-active hide padding-leader-3 padding-trailer-3"\x3e\r\n     \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n     \x3cdiv class\x3d"loader-text"\x3e${i18n.overwriteFromCloudDlg.defaultLoading}\x3c/div\x3e\r\n   \x3c/div\x3e \r\n \x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsResultIssue.html":'\x3cdiv class\x3d"margin-left-1 leader-half"\x3e\r\n  ${title}\x3cbr\x3e\r\n  \x3cspan class\x3d"font-size--3"\x3e${message}\x3c/span\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsResultUpdated.html":'\x3cdiv class\x3d"margin-left-1 leader-half"\x3e\r\n  ${title}\x3cbr\x3e\r\n  \x3cspan class\x3d"font-size--3"\x3e${message}\x3c/span\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsResultUnchanged.html":'\x3cdiv class\x3d"margin-left-1 leader-half"\x3e\r\n  ${title}\x3cbr\x3e\r\n  \x3cspan class\x3d"font-size--3"\x3e${message}\x3c/span\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsUpdate.html":'\x3cdiv class\x3d"clearfix"\x3e\r\n  \x3cdiv class\x3d"leader-half font-size--1" data-dojo-attach-point\x3d"updateHttpsDesc"\x3e${i18n.itemProperties.updateLayersToHTTPSDesc}\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"updateHttpsLoading"\x3e\r\n    \x3cspan class\x3d"icon-ui-loading-indicator icon-ui-flush icon-ui-spinning" aria-label\x3d"${i18n.itemProperties.updatingLayersToHTTPS}"\x3e\x3c/span\x3e\r\n    ${i18n.itemProperties.updatingLayersToHTTPS}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide update-https-results" data-dojo-attach-point\x3d"updateHttpsResults"\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"layersWithIssues"\x3e\r\n      \x3cdiv class\x3d"update-layer-section inline-block"\x3e\r\n        \x3cspan class\x3d"icon-ui-right update-section-toggle" data-dojo-attach-point\x3d"toggleIssues"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"icon-ui-error icon-ui-red"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"text-red" data-dojo-attach-point\x3d"issuesTitle"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half margin-left-1" data-dojo-attach-point\x3d"issues"\x3e\x3c!-- write out issues here --\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"layersUpdated"\x3e\r\n      \x3cdiv class\x3d"update-layer-section inline-block"\x3e\r\n        \x3cspan class\x3d"icon-ui-right update-section-toggle" data-dojo-attach-point\x3d"toggleUpdated"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"updatedTitle"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half margin-left-1" data-dojo-attach-point\x3d"updated"\x3e\x3c!-- write out updated here --\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"layersUnchanged"\x3e\r\n      \x3cdiv class\x3d"update-layer-section inline-block"\x3e\r\n        \x3cspan class\x3d"icon-ui-right update-section-toggle" data-dojo-attach-point\x3d"toggleUnchanged"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"unchangedTitle"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half margin-left-1" data-dojo-attach-point\x3d"unchanged"\x3e\x3c!-- write out unchanged here --\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"noChangesMade"\x3e\r\n    \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n    ${i18n.itemProperties.noLayersToUpdateHTTPS}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"unexpectedError"\x3e${i18n.itemProperties.errorUpdateHTTPS}\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"leader-1 inline-block esriFloatTrailing right"\x3e\r\n    \x3cbutton class\x3d"btn btn-blue" data-dojo-attach-point\x3d"okBtn"\x3e${i18n.itemProperties.updateLayers}\x3c/button\x3e\r\n    \x3cbutton class\x3d"hide btn btn-blue" data-dojo-attach-point\x3d"doneBtn"\x3e${i18n.common.done}\x3c/button\x3e\r\n    \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"cancelBtn"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/domainUpdate.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"updateDomainDesc"\x3e${i18n.itemProperties.updateDomainDesc}\x3c/div\x3e\r\n  \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"updateDomainContainer"\x3e\r\n    \x3cdiv class\x3d"align-top"\x3e\r\n      \x3clabel for\x3d"domain-update-select"\x3e\r\n        ${i18n.common.find}\x3cbr\x3e\r\n        \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"domainSelect" id\x3d"domain-update-select"\x3e\x3c/select\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"align-top"\x3e\r\n      \x3clabel for\x3d"domain-replace-input"\x3e\r\n        ${i18n.common.replace}\x3cbr\x3e\r\n        \x3cinput id\x3d"domain-replace-input" data-dojo-attach-point\x3d"domainReplace"\x3e\r\n        \x3cdiv class\x3d"hide input-error-message" data-dojo-attach-point\x3d"domainReplaceError"\x3e\r\n          ${i18n.itemProperties.siteReferenceInvalid}\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"inline-block align-top"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"replaceDomainBtn" disabled\x3e${i18n.common.replace}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"replaceDomainLoading"\x3e\r\n    \x3cspan class\x3d"icon-ui-loading-indicator icon-ui-flush icon-ui-spinning" aria-label\x3d"${i18n.itemProperties.updatingDomains}"\x3e\x3c/span\x3e\r\n    ${i18n.itemProperties.updatingDomains}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"replaceDomainFailure"\x3e\r\n    \x3cspan class\x3d"icon-ui-error icon-ui-red"\x3e\x3c/span\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"replaceDomainFailureMessage"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"replaceDomainSuccess"\x3e\r\n    \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"replaceDomainSuccessMessage"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"layerDetailsContainer"\x3e\r\n    ${i18n.itemProperties.layersWithDomain}\r\n    \x3cdiv class\x3d"font-size--2" data-dojo-attach-point\x3d"layerDetails"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"clearfix leader-1 esriFloatTrailing right"\x3e\r\n    \x3cbutton class\x3d"btn btn-blue" data-dojo-attach-point\x3d"doneBtn"\x3e${i18n.common.done}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/ExtentPicker.html":'\r\n\x3cdiv class\x3d"flex extent-picker"\x3e\r\n  \x3ciframe id\x3d"extent-picker-iframe" class\x3d"js-iframe flex-1 extent-picker__iframe"\x3e\x3c/iframe\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n\r\n\r\n\r\n\r\n',"url:arcgisonline/pages/item/widgets/typeOptions/base.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"if-can-edit-contentStatus if-can-update-org-items" data-dojo-attach-point\x3d"_contentStatusContainer"\x3e\r\n    \x3ch5 class\x3d"font-size-0"\x3e${i18n.itemProperties.contentStatus}\x3c/h5\x3e\r\n    \x3cdiv class\x3d"if-no-contentStatus"\x3e\r\n      \x3cdiv class\x3d"if-can-edit-authoritative-status if-can-update-org-items trailer-1"\x3e\r\n        \x3cp class\x3d"trailer-quarter font-size--1"\x3e${i18n.itemProperties.identifyThisItemAsReliable}\x3c/p\x3e\r\n        \x3cbutton\r\n          data-dojo-attach-point\x3d"_markAuthoritativeBtn"\r\n          data-action\x3d"markItemAsAuthoritative"\r\n          class\x3d"btn btn-clear js-action-markItemAsAuthoritative"\r\n        \x3e\r\n          ${i18n.itemProperties.markAsAuthoritative}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cp class\x3d"trailer-quarter font-size--1"\x3e${i18n.itemProperties.discourageUsageOfThisItem}\x3c/p\x3e\r\n      \x3cbutton\r\n        data-dojo-attach-point\x3d"_markDeprecatedBtn"\r\n        data-action\x3d"markItemAsDeprecated"\r\n        class\x3d"btn btn-clear js-action-markItemAsDeprecated"\r\n      \x3e\r\n        ${i18n.itemProperties.markAsDeprecated}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"if-authoritative"\x3e\r\n      \x3cp class\x3d"trailer-0 inline-block"\x3e${!authoritative} ${i18n.itemProperties.thisItemIsAuthoritative}\x3c/p\x3e\r\n      \x3cspan\x3e\r\n        \x3cbutton\r\n          data-action\x3d"removeContentStatus"\r\n          class\x3d"btn-link js-action-removeContentStatus if-can-edit-authoritative-status if-can-update-org-items margin-left-1"\r\n        \x3e\r\n          ${i18n.itemProperties.undo}\r\n        \x3c/button\x3e\r\n      \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"if-deprecated"\x3e\r\n      \x3cp class\x3d"trailer-0 inline-block"\x3e${!deprecated} ${i18n.itemProperties.thisItemIsDeprecated}\x3c/p\x3e\r\n      \x3cspan\x3e\r\n        \x3cbutton data-action\x3d"removeContentStatus" class\x3d"btn-link js-action-removeContentStatus margin-left-1"\x3e\r\n          ${i18n.itemProperties.undo}\r\n        \x3c/button\x3e\r\n      \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light" /\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"_deleteProtectionContainer"\x3e\r\n    \x3clabel class\x3d"if-can-update"\x3e${i18n.itemProperties.deleteProtectionLbl}\x3c/label\x3e\r\n    \x3cdiv class\x3d"right inline-block trailer-half"\x3e\r\n      \x3cbutton\r\n        data-dojo-attach-point\x3d"_deleteBtn"\r\n        data-action\x3d"deleteItem"\r\n        class\x3d"btn btn-red btn-small js-action-deleteItem"\r\n      \x3e\r\n        ${i18n.itemProperties.deleteItemLabel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cfieldset class\x3d"trailer-0 fieldset-checkbox if-can-update"\x3e\r\n    \x3clabel class\x3d"fieldset-checkbox--inline" data-dojo-attach-point\x3d"_deleteProtectionLabel"\x3e\r\n      \x3cinput type\x3d"checkbox" class\x3d"delete-prevention-checkbox" data-dojo-attach-point\x3d"_deleteProtection" /\x3e\r\n      ${i18n.itemProperties.deleteProtectionMsg}\r\n    \x3c/label\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n\r\n  \x3cdiv class\x3d"hide leader-1" data-dojo-attach-point\x3d"_publicDataSection"\x3e\r\n    \x3chr class\x3d"text-rule-light" /\x3e\r\n    \x3cdiv class\x3d"leader-1"\x3e\r\n      \x3cfieldset data-dojo-attach-point\x3d"_publicDataCollectionContainer" class\x3d"fieldset-checkbox js-public-data-collection-container"\x3e\r\n        \x3clegend class\x3d"trailer-half"\x3e${i18n.itemProperties.publicDataCollection.settingTitle}\x3c/legend\x3e\r\n        \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_publicDataCollection" id\x3d"public-data-collection-checkbox"/\x3e\r\n        \x3clabel for\x3d"public-data-collection-checkbox" class\x3d"fieldset-checkbox--inline" data-dojo-attach-point\x3d"_publicDataCollectionLabel"\x3e\r\n          ${i18n.itemProperties.publicDataCollection.settingLabel}\r\n        \x3c/label\x3e\r\n        \x3cp class\x3d"font-size--2 leader-1 trailer-0" data-dojo-attach-point\x3d"_publicDataCollectionExplanation"\x3e\x3c/p\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"extent-container" data-dojo-attach-point\x3d"extentContainer"\x3e\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-can-update" /\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel class\x3d"if-can-update"\x3e${i18n.itemProperties.extent}\x3c/label\x3e\r\n      \x3cdiv class\x3d"right inline-block trailer-half"\x3e\r\n        \x3cbutton id\x3d"setExtent" class\x3d"btn btn-clear btn-small js-action-setExtent" data-dojo-attach-point\x3d"_setExtentBtn"\x3e\r\n          ${i18n.itemProperties.setExtent}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3clabel class\x3d"inline-block font-size--1" data-dojo-attach-point\x3d"_extentSetLabel"\x3e\r\n      ${i18n.itemProperties.setExtentTo}\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light" /\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/message.html":'\x3cdiv class\x3d"clearfix hide"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_messageContainer"\x3e\r\n    \x3c!-- service type message injected here --\x3e\r\n  \x3c/div\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/url.html":'\x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n  \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.dataSource}\x3c/legend\x3e\r\n  \x3cdiv class\x3d"clearfix"\x3e\r\n    \x3cdiv class\x3d"column-3 padding-leader-half"\x3e\x3clabel for\x3d"dataSource-url"\x3e${i18n.itemProperties.url}\x3c/label\x3e\x3c/div\x3e\r\n    \x3cinput type\x3d"text" id\x3d"datasource-url" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_url"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"clearfix"\x3e\r\n    \x3cdiv class\x3d"column-3 padding-leader-half"\x3e\x26nbsp;\x3c/div\x3e\r\n    \x3cdiv class\x3d"text-constrain input-error-message" data-dojo-attach-point\x3d"_urlError"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/useOnly.html":'\x3cdiv\x3e\r\n  \x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.viewer.saveAs}\x3c/legend\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_saveAs" type\x3d"checkbox"\x3e ${i18n.itemProperties.viewOnlyMsg}\r\n    \x3c/label\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/map.html":'\x3cdiv\x3e\r\n  \x3cfieldset class\x3d"fieldset-checkbox trailer-0"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.layerSettings}\x3c/legend\x3e\r\n\r\n    \x3cdiv class\x3d"leader-half"\x3e\r\n      ${i18n.itemProperties.httpsLabel}\r\n      \x3cspan class\x3d"icon-ui-description popover-link" tabindex\x3d"0" data-dojo-attach-point\x3d"_httpsHelpLink" aria-label\x3d"${i18n.itemProperties.learnMore}"\x3e\x3c/span\x3e\r\n      \x3cdiv class\x3d"leader-half"\x3e\r\n        \x3cbutton data-action\x3d"httpsUpdate" class\x3d"btn btn-clear btn-small js-action-httpsUpdate" data-dojo-attach-point\x3d"_updateHttpsBtn"\x3e\r\n          ${i18n.itemProperties.updateLayersToHTTPS}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"clearfix leader-1"\x3e\r\n      ${i18n.itemProperties.domainsLabel}\r\n      \x3cspan class\x3d"icon-ui-description popover-link" tabindex\x3d"0" data-dojo-attach-point\x3d"_domainHelpLink" aria-label\x3d"${i18n.itemProperties.learnMore}"\x3e\x3c/span\x3e\r\n      \x3cdiv class\x3d"leader-half"\x3e\r\n        \x3cbutton data-action\x3d"domainUpdate" class\x3d"btn btn-clear btn-small js-action-domainUpdate" data-dojo-attach-point\x3d"_updateDomainBtn"\x3e\r\n          ${i18n.itemProperties.updateDomain}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/proxy.html":'\x3cdiv\x3e\r\n  \x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.dataSource}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"clearfix"\x3e\r\n      \x3cdiv class\x3d"column-3"\x3e${i18n.itemProperties.url}\x3c/div\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_proxySourceUrlLabel"\x3e${item.sourceUrl}\x3c/label\x3e\r\n      \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"_updateSourceUrlToHttpsContainer"\x3e\r\n        \x3cbutton data-action\x3d"updateSourceUrlToHttps" class\x3d"btn btn-clear btn-small js-action-updateSourceUrlToHttps"\x3e\r\n          ${i18n.itemProperties.upgradeToHttps}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n  \x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.storedCredentials}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"trailer-half"\x3e${i18n.itemProperties.storedCredentialsChange}\x3c/div\x3e\r\n    \x3cdiv class\x3d"clearfix"\x3e\r\n      \x3cdiv class\x3d"column-3 padding-leader-half"\x3e\x3clabel for\x3d"proxy-username"\x3e${i18n.createAccount.usernameLabel}\x3c/label\x3e\x3c/div\x3e\r\n      \x3cinput type\x3d"text" id\x3d"proxy-username" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_username"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"clearfix"\x3e\r\n      \x3cdiv class\x3d"column-3 padding-leader-half"\x3e\x3clabel for\x3d"proxy-password"\x3e${i18n.createAccount.passwordLabel}\x3c/label\x3e\x3c/div\x3e\r\n      \x3cinput type\x3d"password" id\x3d"proxy-password" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_password"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/categoryPicker/subcategory.html":'\x3cdiv\x3e\r\n    \x3ci data-dojo-attach-point\x3d"plusIcon" class\x3d"category-toggle-icon inline-block"\x3e\r\n        \x3csvg \r\n            xmlns\x3d"http://www.w3.org/2000/svg"\r\n            width\x3d"48"\r\n            height\x3d"48"\r\n            viewBox\x3d"0 0 48 48"\r\n            class\x3d"svg-icon"\r\n            style\x3d"display: block;"\r\n        \x3e\r\n        \x3c/svg\x3e\r\n    \x3c/i\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\r\n        ${props.text}\r\n        \x3cinput data-dojo-attach-point\x3d"checkbox" type\x3d"checkbox" value\x3d"${props.value}" checked /\x3e\r\n    \x3c/label\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/categoryPicker/category.html":'\x3cdiv\x3e\r\n    \x3ci data-dojo-attach-point\x3d"plusIcon" class\x3d"category-toggle-icon inline-block"\x3e\r\n        \x3csvg\r\n            xmlns\x3d"http://www.w3.org/2000/svg"\r\n            width\x3d"48"\r\n            height\x3d"48"\r\n            viewBox\x3d"0 0 48 48"\r\n            class\x3d"svg-icon"\r\n            style\x3d"display: block;"\r\n        \x3e\r\n            \x3cpath d\x3d"M30 18H18v12h-4V18H2v-4h12V2h4v12h12v4z"/\x3e\r\n        \x3c/svg\x3e\r\n    \x3c/i\x3e\r\n    \x3ci data-dojo-attach-point\x3d"minusIcon" class\x3d"category-toggle-icon inline-block hide"\x3e\r\n        \x3csvg\r\n            xmlns\x3d"http://www.w3.org/2000/svg"\r\n            width\x3d"48"\r\n            height\x3d"48"\r\n            viewBox\x3d"0 0 48 48"\r\n            class\x3d"svg-icon"\r\n            style\x3d"display: block;"\r\n        \x3e\r\n            \x3cpath d\x3d"M30 18H2v-4h28v4z"/\x3e\r\n        \x3c/svg\x3e\r\n    \x3c/i\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\r\n        ${props.text}\r\n        \x3cinput data-dojo-attach-point\x3d"checkbox" type\x3d"checkbox" value\x3d"${props.value}" checked /\x3e\r\n    \x3c/label\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"categoriesContainer" class\x3d"margin-left-2 hide"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/categoryPicker/index.html":'\x3cfieldset class\x3d"fieldset-checkbox" data-dojo-attach-point\x3d"geocodingCategories"\x3e\r\n    \x3clegend data-dojo-attach-point\x3d"categoriesLabel"\x3e${i18n.itemProperties.geocodingFilters.categoryLabel}\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"categoriesContainer" class\x3d"panel-white overflow-200"\x3e\r\n    \x3c/div\x3e\r\n\x3c/fieldset\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/countryPicker.html":'  \x3cdiv data-dojo-attach-point\x3d"_geocodingCountries"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_searchControls"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_searchLabel"\x3e\r\n        ${i18n.itemProperties.geocodingFilters.countryPicker.searchCountries}\r\n        \x3cinput\r\n          type\x3d"text"\r\n          class\x3d"groupSearch input-search"\r\n          placeholder\x3d"${i18n.itemProperties.geocodingFilters.countryPicker.countryTip}"\r\n          data-dojo-attach-point\x3d"_searchBox"\r\n        /\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3ctable class\x3d"table table-plain trailer-0"\x3e\r\n        \x3cthead\x3e\r\n          \x3ctr\x3e\r\n            \x3cth class\x3d"country-picker-column"\x3e${i18n.itemProperties.geocodingFilters.countryPicker.selectToAdd}\x3c/th\x3e\r\n            \x3cth class\x3d"country-picker-column"\x3e${i18n.itemProperties.geocodingFilters.countryPicker.selectToRemove}\x3c/th\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/thead\x3e\r\n      \x3c/table\x3e\r\n      \x3ctable class\x3d"table table-striped"\x3e\r\n        \x3cthead\x3e\r\n          \x3ctr\x3e\r\n            \x3cth class\x3d"country-picker-column"\x3e\r\n              ${i18n.itemProperties.geocodingFilters.countryPicker.countries}\r\n            \x3c/th\x3e\r\n            \x3cth class\x3d"country-picker-column"\x3e\r\n              ${i18n.itemProperties.geocodingFilters.countryPicker.selectedCountries}\r\n              \x3ca\r\n                data-dojo-attach-point\x3d"_clearCountryLink"\r\n                class\x3d"clear-country-link right"\r\n              \x3e\r\n                ${i18n.itemProperties.geocodingFilters.countryPicker.clearCountries}\r\n              \x3c/a\x3e\r\n            \x3c/th\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/thead\x3e\r\n        \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv\r\n                data-dojo-attach-point\x3d"_availableCountriesContainer"\r\n                class\x3d"country-link-container"\r\n              \x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv\r\n                data-dojo-attach-point\x3d"_selectedCountriesContainer"\r\n                class\x3d"country-link-container"\r\n              \x3e\r\n              \x3c/div\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/extentPicker.html":'  \x3cdiv class\x3d"clearfix leader-1 trailer-1"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_searchExtentBtnContainer" class\x3d"right inline-block"\x3e\r\n        \x3cbutton\r\n          class\x3d"btn btn-clear btn-small"\r\n          data-dojo-attach-point\x3d"_setExtentButton"\r\n        \x3e${i18n.itemProperties.geocodingFilters.setAreaOfInterest}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_noSearchExtentContainer" class\x3d"hide font-size--1"\x3e\r\n        ${i18n.itemProperties.geocodingFilters.noAreaOfInterest}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\r\n      class\x3d"font-size--1 leader-half trailer-0 column-10"\r\n      data-dojo-attach-point\x3d"_searchExtentContainer"\x3e\r\n      \x3cdiv class\x3d"column-10 phone-column-5 text-center trailer-half"\x3e\r\n        ${i18n.itemProperties.top}:\r\n        \x3cspan id\x3d"search-extent-text-top" class\x3d"label text-off-black inline-block" data-dojo-attach-point\x3d"_searchExtentTop"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"column-10 phone-column-5"\x3e\r\n        \x3cdiv\r\n          class\x3d"column-4 phone-column-2 text-left trailer-half left"\r\n          data-dojo-attach-point\x3d"_searchExtentLeftContainer"\r\n        \x3e\r\n          ${i18n.itemProperties.left}:\r\n          \x3cspan id\x3d"search-extent-text-left" class\x3d"label text-off-black inline-block" data-dojo-attach-point\x3d"_searchExtentLeft"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"column-4 phone-column-2 text-right trailer-half right"\r\n          data-dojo-attach-point\x3d"_searchExtentRightContainer"\r\n        \x3e\r\n          ${i18n.itemProperties.right}:\r\n          \x3cspan id\x3d"search-extent-text-right" class\x3d"label text-off-black inline-block" data-dojo-attach-point\x3d"_searchExtentRight"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv\r\n        class\x3d"column-10 phone-column-5 text-center trailer-0"\x3e\r\n        ${i18n.itemProperties.bottom}:\r\n        \x3cspan id\x3d"search-extent-text-bottom" class\x3d"label text-off-black inline-block" data-dojo-attach-point\x3d"_searchExtentBottom"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/locatorViewOptions/index.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"mainContainer"\x3e\r\n    \x3clabel for\x3d"location-type-select"\x3e\r\n      ${i18n.itemProperties.geocodingFilters.targetedDescription}\r\n      \x3ca\r\n        class\x3d"icon-ui-question clear-country-link"\r\n        data-dojo-attach-point\x3d"helpLink"\r\n        title\x3d"${i18n.itemProperties.geocodingFilters.learnMore}"\r\n      \x3e\r\n      \x3c/a\x3e\r\n      \x3cselect id\x3d"location-type-select" class\x3d"modifier-class select-full" data-dojo-attach-point\x3d"locationTypeSelect"\x3e\r\n        \x3coption value\x3d"all"\x3e${i18n.itemProperties.geocodingFilters.categoriesAll}\x3c/option\x3e\r\n        \x3coption value\x3d"address"\x3e${i18n.itemProperties.geocodingFilters.categoriesAddresses}\x3c/option\x3e\r\n        \x3coption value\x3d"coord"\x3e${i18n.itemProperties.geocodingFilters.categoriesCoordinates}\x3c/option\x3e\r\n        \x3coption value\x3d"poi"\x3e${i18n.itemProperties.geocodingFilters.categoriesPOI}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/label\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"categoryPickerContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\r\n    \x3cfieldset class\x3d"fieldset-radio" data-dojo-attach-point\x3d"areaTypeSelect"\x3e\r\n      \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.geocodingFilters.limitArea}\x3c/legend\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"area-type-radio-any"\x3e\r\n        \x3cinput id\x3d"area-type-radio-any" type\x3d"radio" name\x3d"source" value\x3d"any" data-dojo-attach-point\x3d"anyRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.areaAnywhere}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"area-type-radio-country"\x3e\r\n        \x3cinput id\x3d"area-type-radio-country" type\x3d"radio" name\x3d"source" value\x3d"country" data-dojo-attach-point\x3d"countryRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.areaCountries}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"area-type-radio-area"\x3e\r\n        \x3cinput id\x3d"area-type-radio-area" type\x3d"radio" name\x3d"source" value\x3d"area" data-dojo-attach-point\x3d"areaRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.areaExtent}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"areaPickerContainer"\x3e\x3c/div\x3e\r\n    \x3cfieldset class\x3d"fieldset-radio" data-dojo-attach-point\x3d"displayLocationSelect"\x3e\r\n      \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.geocodingFilters.displayLocation}\x3c/legend\x3e\r\n      \x3cp class\x3d"font-size-0 trailer-quarter"\x3e${i18n.itemProperties.geocodingFilters.displayLocationHelp}\x3c/p\x3e\r\n      \x3clabel class\x3d"padding-left-1 leader-half" for\x3d"locator-view-display-location-street"\x3e\r\n        \x3cinput id\x3d"locator-view-display-location-street" type\x3d"radio" name\x3d"locationType" value\x3d"street" data-dojo-attach-point\x3d"streetRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.streetside}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"locator-view-display-rooftop"\x3e\r\n        \x3cinput id\x3d"locator-view-display-rooftop" type\x3d"radio" name\x3d"locationType" value\x3d"rooftop" data-dojo-attach-point\x3d"rooftopRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.rooftop}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cfieldset class\x3d"fieldset-radio" data-dojo-attach-point\x3d"cityNameSelect"\x3e\r\n      \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.geocodingFilters.defaultCityName}\x3c/legend\x3e\r\n      \x3cp class\x3d"font-size-0 trailer-quarter"\x3e${i18n.itemProperties.geocodingFilters.defaultCityNameHelp}\x3c/p\x3e\r\n      \x3clabel class\x3d"padding-left-1 leader-half" for\x3d"defaultCityRadio-input"\x3e\r\n        \x3cinput id\x3d"defaultCityRadio-input" type\x3d"radio" name\x3d"cityName" value\x3d"" data-dojo-attach-point\x3d"defaultCityRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.definedByCountry}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"postalCityRadio-input"\x3e\r\n        \x3cinput id\x3d"postalCityRadio-input" type\x3d"radio" name\x3d"cityName" value\x3d"postalCity" data-dojo-attach-point\x3d"postalCityRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.postalCityName}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"localCityRadio-input"\x3e\r\n        \x3cinput id\x3d"localCityRadio-input" type\x3d"radio" name\x3d"cityName" value\x3d"localCity" data-dojo-attach-point\x3d"localCityRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.localCityName}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"matchedCityRadio-input"\x3e\r\n        \x3cinput id\x3d"matchedCityRadio-input" type\x3d"radio" name\x3d"cityName" value\x3d"matchedCity" data-dojo-attach-point\x3d"matchedCityRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.matchedCityName}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cfieldset class\x3d"fieldset-radio" data-dojo-attach-point\x3d"streetNameSelect"\x3e\r\n      \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.geocodingFilters.defaultStreetName}\x3c/legend\x3e\r\n      \x3cp class\x3d"font-size-0 trailer-quarter"\x3e${i18n.itemProperties.geocodingFilters.defaultStreetNameHelp}\x3c/p\x3e\r\n      \x3clabel class\x3d"padding-left-1 leader-half" for\x3d"defaultStreetRadio-input"\x3e\r\n        \x3cinput id\x3d"defaultStreetRadio-input" type\x3d"radio" name\x3d"streetName" value\x3d"" data-dojo-attach-point\x3d"defaultStreetRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.definedByCountry}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"matchedStreetRadio-input"\x3e\r\n        \x3cinput id\x3d"matchedStreetRadio-input" type\x3d"radio" name\x3d"streetName" value\x3d"matchedStreet" data-dojo-attach-point\x3d"matchedStreetRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.matchedStreetName}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"padding-left-1" for\x3d"primaryStreetRadio-input"\x3e\r\n        \x3cinput id\x3d"primaryStreetRadio-input" type\x3d"radio" name\x3d"streetName" value\x3d"primaryStreet" data-dojo-attach-point\x3d"primaryStreetRadio"\x3e\x26nbsp;${i18n.itemProperties.geocodingFilters.primaryStreetName}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"loader is-active padding-leader-2 padding-trailer-2" data-dojo-attach-point\x3d"loaderContainer"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.arcGISOnlineServices.loading}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"failedContainer" class\x3d"hide"\x3e\r\n    \x3cp\x3e${i18n.itemProperties.geocodingFilters.locatorViewFailed}\x3c/p\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/ratelimit.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"clearfix"\x3e\r\n    \x3cdiv class\x3d"column-10"\x3e\r\n      \x3cspan\x3e${i18n.itemProperties.rateLimitingTitle}\x3c/span\x3e\x3cbr\x3e\r\n      \x3cspan class\x3d"font-size--1"\x3e${i18n.itemProperties.rateLimitingDesc}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"phone-leader-1 right inline-block"\x3e\r\n      \x3cbutton data-action\x3d"rateLimiting" class\x3d"btn btn-clear btn-small js-action-rateLimiting" data-dojo-attach-point\x3d"_rateLimitBtn"\x3e${i18n.itemProperties.rateLimitingTitle}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/ChoiceDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"choice-dialog" class\x3d"general-dialog" title\x3d"${i18n.notice}"\x3e\r\n    \x3cdiv style\x3d"margin-top:1em;" data-dojo-attach-point\x3d"choiceContent"\x3e\x3c/div\x3e\r\n    \x3cdiv style\x3d"clear: both; margin-top: 2em;" class\x3d"esriAlignTrailing right"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"choiceOneButton" class\x3d"primary trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"choiceTwoButton" class\x3d"cancel btn-two trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; float:none; height: 0;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/app.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"clearfix js-codeAttachment-container"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n      \x3cdiv class\x3d"column-10 tablet-column-4"\x3e\r\n        \x3cspan class\x3d"display-block trailer-half"\x3e${i18n.itemProperties.codeAttachment}\x3c/span\x3e\r\n        \x3cspan class\x3d"label" data-dojo-attach-point\x3d"_attachedFile"\x3e${item.codeAttachment:_formatCodeAttachment}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_codeContainer" class\x3d"phone-leader-1 right inline-block"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_attachCodeContainer"\x3e\r\n          \x3cbutton data-action\x3d"attachCode" class\x3d"btn btn-clear btn-small js-action-attachCode" data-dojo-attach-point\x3d"_attachCodeBtn"\x3e${i18n.itemProperties.attachCode}\x3c/button\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_updateCodeContainer"\x3e\r\n          \x3cbutton data-action\x3d"attachCode" class\x3d"btn btn-clear btn-small js-action-attachCode" data-dojo-attach-point\x3d"_updateCodeBtn"\x3e${i18n.itemProperties.updateCode}\x3c/button\x3e\r\n          \x3cbutton data-action\x3d"deleteCode" class\x3d"btn btn-clear btn-small js-action-deleteCode" data-dojo-attach-point\x3d"_deleteCodeBtn"\x3e${i18n.common.remove}\x3c/button\x3e\r\n        \x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"clearfix"\x3e\r\n    \x3clabel class\x3d"if-web if-mobile if-platform left padding-right-1 trailer-0"\x3e\r\n      ${i18n.itemProperties.purpose}\r\n        \x3cselect data-dojo-attach-point\x3d"_purpose"\x3e\r\n          \x3coption value\x3d"${_purposes.notSpecified}" selected\x3e${i18n.itemProperties.notSpecified}\x3c/option\x3e\r\n          \x3coption value\x3d"${_purposes.readyToUse}"\x3e${i18n.itemProperties.readyToUse}\x3c/option\x3e\r\n          \x3coption value\x3d"${_purposes.configurable}"\x3e${i18n.itemProperties.configurable}\x3c/option\x3e\r\n          \x3coption value\x3d"${_purposes.selfConfigured}"\x3e${i18n.itemProperties.selfConfigurable}\x3c/option\x3e\r\n          \x3coption value\x3d"${_purposes.codeSample}"\x3e${i18n.itemProperties.codeSample}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-web if-mobile if-platform"\x3e\r\n\r\n  \x3cdiv class\x3d"clearfix"\x3e\r\n    \x3clabel class\x3d"if-web if-mobile if-platform left trailer-0"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_apiLabel"\x3e${i18n.itemProperties.api}\x3c/span\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"_webAppAPI" class\x3d"if-web"\x3e\r\n        \x3coption value\x3d"${_apis.notSpecified}" selected\x3e${i18n.itemProperties.notSpecified}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.flex}"\x3e${i18n.common.Flex}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.silverlight}"\x3e${i18n.common.Silverlight}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.webADF}"\x3e${i18n.common.WebADF}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.other}"\x3e${i18n.itemProperties.other}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"_mobileAppAPI" class\x3d"if-mobile"\x3e\r\n        \x3coption value\x3d"${_apis.notSpecified}" selected\x3e${i18n.itemProperties.notSpecified}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.iOS}"\x3e${i18n.common.ios}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.windowsMobile}"\x3e${i18n.common.mobile}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.windowsPhone}"\x3e${i18n.common.windowsPhone}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.windowsStore}"\x3e${i18n.common.windowsStore}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.windowsUniversal}"\x3e${i18n.common.windowsUniversal}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.android}"\x3e${i18n.common.Android}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"_platformAppAPI" class\x3d"if-platform"\x3e\r\n        \x3coption value\x3d"${_apis.notSpecified}" selected\x3e${i18n.itemProperties.notSpecified}\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.java}"\x3eJava\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.windowsDesktop}"\x3e.NET\u2013Windows Desktop\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.osx}"\x3eOS X\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.qt}"\x3eQt\x3c/option\x3e\r\n        \x3coption value\x3d"${_apis.wpf}"\x3eWPF\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-web if-mobile if-platform"\x3e\r\n\r\n  \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_configurationContainer"\x3e\r\n    ${i18n.itemProperties.configurationParameters}\r\n    \x3ctextarea rows\x3d"8" data-dojo-attach-point\x3d"_configurationSettings"\x3e\x3c/textarea\x3e\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"clearfix hide" data-dojo-attach-point\x3d"_registrationContainer"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_notRegisteredContainer"\x3e\r\n        \x3cdiv class\x3d"column-10 tablet-column-8 phone-column-5"\x3e\r\n          ${i18n.itemProperties.registration}\r\n          \x3cp class\x3d"trailer-0 font-size--1 leader-half" data-dojo-attach-point\x3d"_notRegisteredLabel"\x3e${i18n.itemProperties.notRegistered}\x3c/p\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"phone-leader-1 right phone-left inline-block"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"_registerAppBtn"\x3e${i18n.itemProperties.register}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_registeredContainer"\x3e\r\n        \x3cdiv class\x3d"inline-block trailer-half"\x3e\r\n          ${i18n.itemProperties.registration}\r\n          \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"_registration"\x3e\x3c!-- app registration info filled in here --\x3e\x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_registeredInfoBtn"\x3e${i18n.itemProperties.registerAppInfo}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"phone-leader-1 right inline-block"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear btn-small trailer-half if-online" data-dojo-attach-point\x3d"_appUsageBtn"\x3e${i18n.itemProperties.appUsage}\x3c/button\x3e\r\n          \x3cbutton class\x3d"btn btn-clear btn-small trailer-half" data-dojo-attach-point\x3d"_registerEditBtn"\x3e${i18n.itemProperties.registerEdit}\x3c/button\x3e\r\n          \x3cbutton class\x3d"btn btn-clear btn-small trailer-half" data-dojo-attach-point\x3d"_unregisterAppBtn"\x3e${i18n.itemProperties.unRegisterApp}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ManageGeometryUpdatesDlg.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv class\x3d"leader-half trailer-half"\x3e${i18n.description}\x3c/div\x3e\r\n  \x3cdiv class\x3d"scene-layer-list trailer-1"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerContainer"\x3e\r\n      \x3c!-- create layers here--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"right inline-block padding-right-1" data-dojo-attach-point\x3d"buttonBar"\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-blue" data-dojo-attach-point\x3d"okBtn"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-clear" data-dojo-attach-point\x3d"cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/RebuildSpatialIndexDlg.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n   \x3cdiv class\x3d"rebuildSpatialIndexDialog"\x3e\r\n       \x3cfieldset class\x3d"trailer-1 fieldset-checkbox rebuildSpatialIndexCheckbox"\x3e\r\n          \x3clegend class\x3d"font-size-0"\x3e${i18n.rebuildSpatialIndexDlg.rebuildSpatialIndexInfoText}\x3c/legend\x3e\r\n      \x3c/fieldset\x3e\r\n   \x3c/div\x3e\r\n   \x3c!-- Loader --\x3e\r\n   \x3cdiv class\x3d"loader loader-connectDataset is-active hide padding-leader-3 padding-trailer-3"\x3e\r\n     \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n     \x3cdiv class\x3d"loader-text"\x3e${i18n.rebuildSpatialIndexDlg.defaultLoading}\x3c/div\x3e\r\n   \x3c/div\x3e \r\n \x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/feature.html":'\x3cdiv\x3e\r\n\r\n  \x3cfieldset class\x3d"trailer-0 if-no-elastic fieldset-checkbox"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.editFeatures}\x3c/legend\x3e\r\n    \x3clabel class\x3d"inline-block" data-dojo-attach-point\x3d"_enableEditingLabel"\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_enableEditing"\x3e\r\n      ${i18n.itemProperties.enableEditing}\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"margin-left-2 font-size--1 avenir-bold hide" data-dojo-attach-point\x3d"_publiclyEditableWarning"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"margin-left-2 font-size--2 hide" data-dojo-attach-point\x3d"_publicLayerWarning"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_changeTrackingContainer"\x3e\r\n      \x3clabel class\x3d"inline-block" data-dojo-attach-point\x3d"_changeTrackingLabel"\x3e\r\n        \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_enableChangeTracking"\x3e ${i18n.itemProperties.configEnableChangeTracking}\r\n        \x3cspan class\x3d"is-view-service green-asterisk hide" data-dojo-attach-point\x3d"_changeTrackingAsterisk"\x3e*\x3c/span\x3e\r\n        \x3cspan class\x3d"hide" data-dojo-attach-point\x3d"_manageChangeLogContainer"\x3e\r\n          \x3cbutton class\x3d"btn btn-link margin-left-half" data-dojo-attach-point\x3d"_manageChangeLogBtn"\x3e${i18n.itemProperties.manageChangeLog.title}\x3c/button\x3e\r\n        \x3c/span\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"if-no-arcobjects if-no-spatiotemporal" data-dojo-attach-point\x3d"_enableTrackEditsContainer"\x3e\r\n      \x3clabel class\x3d"fieldset-checkbox--inline requires-editing" data-dojo-attach-point\x3d"_enableTrackEditsLabel"\x3e\r\n        \x3cinput class\x3d"requires-editing" type\x3d"checkbox" data-dojo-attach-point\x3d"_enableTrackEdits"\x3e\r\n        ${i18n.itemProperties.configTrackEdits}\r\n        \x3cspan class\x3d"is-view-service green-asterisk hide"\x3e*\x3c/span\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"if-no-multipatch"\x3e\r\n      \x3cdiv class\x3d"if-no-arcobjects if-no-spatiotemporal" data-dojo-attach-point\x3d"_syncContainer"\x3e\r\n        \x3clabel class\x3d"inline-block" data-dojo-attach-point\x3d"_syncLabel"\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_enableSync"\x3e ${i18n.itemProperties.configEnableSync}\r\n          \x3cspan class\x3d"is-view-service green-asterisk hide" data-dojo-attach-point\x3d"_syncAsterisk"\x3e*\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"editing-properties leader-half"\x3e\r\n      ${!i18n.itemProperties.whoCanEdit}\r\n      \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e${i18n.itemProperties.howToShare} \x3cspan data-dojo-attach-point\x3d"_howToShare"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      ${!i18n.itemProperties.whatKindEdits}\r\n      \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n        \x3clabel class\x3d"requires-editing"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"requires-editing" data-dojo-attach-point\x3d"_editEnableAddFeatures"\x3e\r\n          ${i18n.itemProperties.configEditAddFeatures}\r\n        \x3c/label\x3e\r\n        \x3clabel class\x3d"requires-editing"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"requires-editing" data-dojo-attach-point\x3d"_editEnableDeleteFeatures"\x3e\r\n          ${i18n.itemProperties.configEditDeleteFeatures}\r\n        \x3c/label\x3e\r\n        \x3clabel class\x3d"requires-editing"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"requires-editing" data-dojo-attach-point\x3d"_editEnableUpdateFeatures"\x3e\r\n          ${i18n.itemProperties.configEditUpdateFeatures}\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"padding-left-2" data-dojo-attach-point\x3d"_editEnableUpdateFeaturesOptions"\x3e\r\n          \x3clabel class\x3d"requires-editing"\x3e\r\n            \x3cinput type\x3d"radio" class\x3d"requires-editing" name\x3d"editing-update-options" data-dojo-attach-point\x3d"_editAttributesOnly"\x3e\r\n            ${i18n.itemProperties.configEditUpdateAttributesOnly}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"requires-editing"\x3e\r\n            \x3cinput type\x3d"radio" class\x3d"requires-editing" name\x3d"editing-update-options" data-dojo-attach-point\x3d"_editAttributesAndGeometry"\x3e\r\n            ${i18n.itemProperties.configEditUpdateAttributesGeometry}\r\n          \x3c/label\x3e\r\n          \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_manageGeometryUpdatesContainer"\x3e\r\n            \x3cbutton class\x3d"btn btn-transparent" data-dojo-attach-point\x3d"_manageGeometryUpdatesBtn"\x3e${i18n.itemProperties.manageGeometryUpdates.title}\x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"if-no-arcobjects"\x3e\r\n        ${!i18n.itemProperties.whatFeaturesView}\r\n        \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n          \x3clabel class\x3d"requires-editing"\x3e\r\n            \x3cinput type\x3d"radio" class\x3d"requires-editing" name\x3d"view-features" data-dojo-attach-point\x3d"_viewAllFeatures" checked\x3d"true"\x3e\r\n            ${i18n.itemProperties.seeAllFeatures}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"requires-tracking" data-dojo-attach-point\x3d"_viewOwnFeaturesOnlyLabel"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"view-features" class\x3d"requires-tracking" data-dojo-attach-point\x3d"_viewOwnFeaturesOnly"\x3e\r\n            ${i18n.itemProperties.seeOwnFeatures}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"requires-add-only"\x3e\r\n            \x3cinput type\x3d"radio" class\x3d"requires-add-only" name\x3d"view-features" data-dojo-attach-point\x3d"_viewNoFeatures"\x3e\r\n            ${i18n.itemProperties.seeNoFeatures}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cspan class\x3d"requires-edit-features"\x3e${!i18n.itemProperties.whatFeaturesCanEdit}\x3c/span\x3e\r\n        \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n          \x3clabel class\x3d"requires-edit-features requires-editing" data-dojo-attach-point\x3d"_editAllFeaturesLabel"\x3e\r\n            \x3cinput type\x3d"radio" class\x3d"requires-edit-features requires-editing" name\x3d"edit-features" data-dojo-attach-point\x3d"_editAllFeatures" checked\x3d"true"\x3e\r\n            ${i18n.itemProperties.editAllFeatures}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"requires-edit-features requires-tracking" data-dojo-attach-point\x3d"_editOwnFeaturesOnlyLabel"\x3e\r\n            \x3cinput type\x3d"radio" class\x3d"requires-edit-features requires-tracking" name\x3d"edit-features" data-dojo-attach-point\x3d"_editOwnFeaturesOnly"\x3e\r\n            ${i18n.itemProperties.editOwnFeatures}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_anonymousAccessContainer"\x3e\r\n          ${!i18n.itemProperties.whatAccessAnonymous}\r\n          \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n            \x3clabel class\x3d"requires-editing"\x3e\r\n              \x3cinput type\x3d"radio" class\x3d"requires-editing" name\x3d"anonymous-access" data-dojo-attach-point\x3d"_anonSame" checked\x3d"true"\x3e\r\n              ${i18n.itemProperties.sameAsSignedIn}\r\n            \x3c/label\x3e\r\n            \x3clabel class\x3d"requires-tracking"\x3e\r\n              \x3cinput type\x3d"radio" name\x3d"anonymous-access" class\x3d"requires-tracking" data-dojo-attach-point\x3d"_anonAddOnly"\x3e\r\n              ${i18n.itemProperties.onlyAddNew}\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      ${!i18n.itemProperties.whoCanManage}\r\n      \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n        \x3cdiv\x3e\r\n          ${!i18n.itemProperties.youCanManage}\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          ${!i18n.itemProperties.administratorsCanManage}\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          ${!i18n.itemProperties.curatorsCanManage}\r\n          \x3cspan class\x3d"who-can-manage-learn-more"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_updateCapabilitiesGroupsContainer"\x3e\r\n          ${!i18n.itemProperties.groupMembersCanManage}\r\n          \x3cspan data-dojo-attach-point\x3d"_updateCapabilitiesGroups"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"who-can-manage-learn-more"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n  \x3c!-- optimize layers --\x3e\r\n  \x3c!-- \x3cfieldset class\x3d"trailer-0 if-online if-no-elastic if-no-arcobjects fieldset-checkbox js-optimize-layers"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.optimizeLayersDrawing}\x3c/legend\x3e\r\n    ${i18n.itemProperties.optimizeLayersDesc}\r\n\r\n    \x3cdiv class\x3d"leader-half trailer-half"\x3e${i18n.itemProperties.optimizeLayersSelect}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_optimizeLayersContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"leader-half trailer-half"\x3e${i18n.itemProperties.optimizeLayersNote}\x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e --\x3e\r\n\r\n  \x3cfieldset class\x3d"trailer-0 if-online if-no-elastic if-no-arcobjects fieldset-checkbox js-optimize-layers"\x3e\r\n    \x3cdiv class\x3d"column-12"\x3e\r\n      \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.optimizeLayersDrawing}\x3c/legend\x3e\r\n      ${i18n.itemProperties.optimizeLayersDesc}\r\n\r\n      \x3cdiv class\x3d"leader-half hide js-optimizing"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-half hide js-optimized"\x3e\x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"leader-half trailer-half hide" data-dojo-attach-point\x3d"optimizeNote"\x3e${i18n.itemProperties.optimizeLayersNote}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"optimizeBtn"\x3e\r\n        ${i18n.itemProperties.optimizeLayers}\r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small hide" data-dojo-attach-point\x3d"cancelOptimizeBtn"\x3e\r\n        ${i18n.common.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-online if-no-elastic if-no-arcobjects fieldset-checkbox js-optimize-layers"\x3e\r\n\r\n  \x3c!-- spatial index --\x3e\r\n  \x3cfieldset class\x3d"trailer-0 if-no-elastic if-no-arcobjects if-no-multipatch js-rebuild-spatial-index"\x3e\r\n    \x3cdiv class\x3d"column-12"\x3e\r\n      \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.rebuildIndexTitle}\x3c/legend\x3e\r\n      ${i18n.itemProperties.rebuildIndexDesc}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small rebuildSpatialIndex"\x3e\r\n          ${i18n.itemProperties.rebuildIndexButton}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-no-elastic if-no-arcobjects if-no-multipatch js-rebuild-spatial-index"\x3e\r\n\r\n  \x3c!-- cache control --\x3e\r\n  \x3cfieldset class\x3d"trailer-0 fieldset-checkbox if-online js-cache-control"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.cacheControlTitle}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"leader-half"\x3e\r\n      ${i18n.itemProperties.cacheControlDesc}\r\n      \x3ca href\x3d"#" target\x3d"_blank" data-dojo-attach-point\x3d"_cacheControlHelpLink"\x3e${i18n.itemProperties.learnMore}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_cacheControlLabel"\x3e\r\n        ${i18n.itemProperties.cacheControlTime}\r\n        \x3cselect class\x3d"inline-block margin-left-2" data-dojo-attach-point\x3d"_cacheControlSelect"\x3e\r\n          \x3coption value\x3d"0" data-dojo-attach-point\x3d"_cacheControlDefaultOption"\x3e${i18n.itemProperties.cacheControlOptions.never}\x3c/option\x3e\r\n          \x3coption value\x3d"30"\x3e${i18n.itemProperties.cacheControlOptions.thirtySec}\x3c/option\x3e\r\n          \x3coption value\x3d"60"\x3e${i18n.itemProperties.cacheControlOptions.oneMin}\x3c/option\x3e\r\n          \x3coption value\x3d"120"\x3e${i18n.itemProperties.cacheControlOptions.twoMin}\x3c/option\x3e\r\n          \x3coption value\x3d"300"\x3e${i18n.itemProperties.cacheControlOptions.fiveMin}\x3c/option\x3e\r\n          \x3coption value\x3d"900"\x3e${i18n.itemProperties.cacheControlOptions.fifteenMin}\x3c/option\x3e\r\n          \x3coption value\x3d"1800"\x3e${i18n.itemProperties.cacheControlOptions.thirtyMin}\x3c/option\x3e\r\n          \x3coption value\x3d"3600"\x3e${i18n.itemProperties.cacheControlOptions.oneHr}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-online js-cache-control"\x3e\r\n\r\n  \x3cfieldset class\x3d"trailer-0 if-no-elastic if-no-arcobjects if-no-spatiotemporal fieldset-checkbox"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.exportLabel}\x3c/legend\x3e\r\n    \x3clabel for\x3d"item-settings-feature-enable-export"\x3e\r\n      \x3cinput id\x3d"item-settings-feature-enable-export" type\x3d"checkbox" data-dojo-attach-point\x3d"_enableExport"\x3e ${i18n.itemProperties.configEnableExport}\r\n    \x3c/label\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-no-elastic if-no-arcobjects if-no-spatiotemporal if-no-multipatch"\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/marketplace.html":'\x3cdiv\x3e\r\n  \x3cfieldset class\x3d"hide trailer-0 fieldset-checkbox" data-dojo-attach-point\x3d"_marketplaceContainer"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.marketplace}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"leader-half"\x3e\r\n      \x3cp class\x3d"hide trailer-0" data-dojo-attach-point\x3d"_mustRegisterContainer"\x3e${i18n.itemProperties.marketplaceInfo}\x3c/p\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_listingContainer"\x3e\r\n        \x3cbutton class\x3d"createListing btn btn-clear" data-dojo-attach-point\x3d"_createListingBtn"\x3e${i18n.itemProperties.createListing}\x3c/button\x3e\r\n        \x3cbutton class\x3d"viewListing btn btn-clear" data-dojo-attach-point\x3d"_viewListingBtn"\x3e${i18n.itemProperties.viewListing}\x3c/button\x3e\r\n        \x3cbutton class\x3d"viewListing btn btn-clear" data-dojo-attach-point\x3d"_unlistItemBtn"\x3e${i18n.itemProperties.unlistListing}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ManageTilesDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${baseClass} manage-tiles-dialog js-tab-group" data-dojo-type\x3d"dijit/Dialog"\r\n       data-dojo-attach-point\x3d"dialog" title\x3d"${i18n.dialogTitle}"\x3e\r\n    \x3cnav class\x3d"tab-nav" data-dojo-attach-point\x3d"_tabNav"\x3e\r\n      \x3ca class\x3d"tab-title js-tab is-active" data-dojo-attach-point\x3d"_levelsTab"\x3e${i18n.levelsTab}\x3c/a\x3e\r\n      \x3ca class\x3d"tab-title js-tab" data-dojo-attach-point\x3d"_extentTab"\x3e${i18n.extentTab}\x3c/a\x3e\r\n    \x3c/nav\x3e\r\n\r\n    \x3csection class\x3d"tab-contents"\x3e\r\n      \x3carticle class\x3d"tab-section js-tab-section is-active" data-dojo-attach-point\x3d"_levelsSection"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_dialogDescription"\x3e\x3c/span\x3e\r\n        \x3cbr\x3e\r\n        \x3cdiv class\x3d"selected-scales-container"\x3e\x3cspan data-dojo-attach-point\x3d"_scalesSelectedSpan"\x3e\x3c/span\x3e\x3cbr\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"scaleContainer" data-dojo-attach-point\x3d"_gridContainer"\x3e\x3c/div\x3e\r\n      \x3c/article\x3e\r\n      \x3carticle class\x3d"tab-section js-tab-section" data-dojo-attach-point\x3d"_extentSection"\x3e\r\n        \x3c!-- Add Extent UI here --\x3e\r\n        \x3cdiv class\x3d"extentContainer hide" data-dojo-attach-point\x3d"_extentContainer"\x3e\x3c/div\x3e\r\n      \x3c/article\x3e\r\n    \x3c/section\x3e\r\n\r\n    \x3cdiv class\x3d"controlDiv clearfix" data-dojo-attach-point\x3d"_controlDiv"\x3e\r\n      \x3cdiv class\x3d"left messageContainer"\x3e\r\n        \x3cdiv class\x3d"message" data-dojo-attach-point\x3d"_messageDiv"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"right buildContainer"\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_buildButton" class\x3d"calcite secondary btn btn-blue"\x3e${i18n.buildButton}\x3c/button\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_cancelButton" class\x3d"calcite secondary btn btn-blue hide"\x3e${i18n.cancelButton}\x3c/button\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_closeButton" class\x3d"calcite transparent btn btn-clear"\x3e${i18n.close}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/tile.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"clearfix padding-leader-half" data-dojo-attach-point\x3d"setting-tile-config"\x3e\x3c/div\x3e\r\n\r\n  \x3c!--\x3cfieldset class\x3d"trailer-0 fieldset-checkbox" data-dojo-attach-point\x3d"_visibleRangeContainer"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.visibleRangeLabel}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"clearfix padding-leader-half" data-dojo-attach-point\x3d"_visibleRangeText"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"clearfix visibleScaleRange" data-dojo-attach-point\x3d"_visibleRange"\x3e\r\n      \x3cdiv class\x3d"leader-1" data-dojo-attach-point\x3d"_visibleScaleRangeContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e --\x3e\r\n\r\n  \x3c!-- \x3cdiv class\x3d"clearfix trailer-1 padding-trailer-half leader-half" data-dojo-attach-point\x3d"_tilesContainer"\x3e --\x3e\r\n  \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_tilesContainer"\x3e\r\n    \x3c!-- ${i18n.itemProperties.tilesLabel} --\x3e\r\n    \x3c!-- \x3cdiv data-dojo-attach-point\x3d"_tileInfo"\x3e\r\n      \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_tileSourceContainer"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 hide" data-dojo-attach-point\x3d"_tilesFromFeaturesContainer"\x3e\r\n        \x3cdiv class\x3d"inline-block"\x3e\r\n          ${i18n.itemProperties.buildTilesOnDemand.choice}\r\n          \x3clabel class\x3d"pre-1 inline-block" data-dojo-attach-point\x3d"_buildTilesAutomaticallyLabel"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"buildTilesOnDemand" data-dojo-attach-point\x3d"_buildTilesAutomatically"\x3e\r\n            ${i18n.itemProperties.buildTilesOnDemand.automatically}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"pre-1 inline-block"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"buildTilesOnDemand" data-dojo-attach-point\x3d"_buildTilesManually"\x3e\r\n            ${i18n.itemProperties.buildTilesOnDemand.manually}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loader js-caching-loader overlay-white position-relative" data-dojo-attach-point\x3d"_caching"\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text" data-dojo-attach-point\x3d"_cachingMsg"\x3e${i18n.itemProperties.buildingTiles}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half"\x3e\r\n      \x3ca data-dojo-attach-point\x3d"_showDetailsBtn" class\x3d"link-no-href hide"\x3e\r\n        ${i18n.itemProperties.showDetails}\r\n      \x3c/a\x3e\r\n      \x3ca data-dojo-attach-point\x3d"_hideDetailsBtn" class\x3d"link-no-href hide"\x3e\r\n        ${i18n.itemProperties.hideDetails}\r\n      \x3c/a\x3e\r\n    \x3c/div\x3e --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_tileDetailsContainer" class\x3d"leader-half hide"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_tileDetailsTableContainer"\x3e\r\n        \x3c!-- tile details will be written here --\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"_manageTilesContainer"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"_manageTilesBtn"\x3e\r\n        ${i18n.itemProperties.buildTiles}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"_manualBuildMsgContainer"\x3e\r\n        ${i18n.itemProperties.buildTilesOnDemand.manualBuild}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"_automaticBuildMsgContainer"\x3e\r\n        ${i18n.itemProperties.buildTilesOnDemand.optionalBuild}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e --\x3e\r\n\r\n    \x3c!-- \x3chr class\x3d"clearfix leader-1 trailer-1 text-rule-light"\x3e --\x3e\r\n  \x3c/div\x3e\r\n\r\n\r\n\r\n  \x3c!-- \x3cfieldset class\x3d"trailer-0 fieldset-checkbox" data-dojo-attach-point\x3d"_offlineTileContainer"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.offlineModeLabel}\x3c/legend\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel class\x3d"inline-block"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"_offlineTile" type\x3d"checkbox"\x3e ${i18n.itemProperties.offlineModeTileEnable}\r\n      \x3c/label\x3e\r\n      \x3cdiv class\x3d"gutter-left-1 leader-half" data-dojo-attach-point\x3d"_offlineTileDesc"\x3e\r\n        ${i18n.itemProperties.offlineModeTileDesc}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e\r\n\r\n  \x3cfieldset class\x3d"fieldset-checkbox hide" data-dojo-attach-point\x3d"vtlCacheContainer"\x3e\r\n    \x3cdiv class\x3d"column-10" data-dojo-attach-point\x3d"vtlCacheInfo"\x3e\r\n      \x3cspan\x3e${i18n.itemProperties.manageVTLCache}\x3c/span\x3e\x3cbr\x3e\r\n      \x3cspan class\x3d"font-size--1"\x3e${i18n.itemProperties.manageVTLCacheDesc}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loader js-caching-loader overlay-white position-relative" data-dojo-attach-point\x3d"vtlCachingContainer"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"vtlCachingTitle"\x3e${i18n.itemProperties.manageVTLCache}\x3c/span\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${i18n.itemProperties.buildingCache}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block hide" data-dojo-attach-point\x3d"vtlManageInfoContainer"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"rebuildVtlBtn"\x3e\r\n        ${i18n.itemProperties.rebuildCache}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"clear-both leader-1 trailer-1 text-rule-light hide" data-dojo-attach-point\x3d"vtlCacheHR"\x3e\r\n\r\n\r\n\r\n  \x3cfieldset class\x3d"fieldset-checkbox hide" data-dojo-attach-point\x3d"vtlAttrContainer"\x3e\r\n    \x3cdiv class\x3d"column-10" data-dojo-attach-point\x3d"vtlAttrInfo"\x3e\r\n      \x3cspan\x3e${i18n.itemProperties.configureAttributes.configure}\x3c/span\x3e\x3cbr\x3e\r\n      \x3cspan class\x3d"font-size--1"\x3e${i18n.itemProperties.configureAttributes.description}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loader js-select-atts-loader overlay-white position-relative"\r\n      data-dojo-attach-point\x3d"vtlSelectingContainer"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"vtlCachingTitle"\x3e${i18n.itemProperties.configureAttributes.configure}\x3c/span\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${!i18n.itemProperties.configureAttributes.configuring}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block hide" data-dojo-attach-point\x3d"vtlSelectAttrContainer"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"selectAttsBtn"\x3e\r\n        ${i18n.itemProperties.configureAttributes.selectAttributes}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3chr class\x3d"clear-both leader-1 trailer-1 text-rule-light"\x3e\r\n  \x3c/fieldset\x3e --\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/CreateTaskDlg.html":'\x3cdiv class\x3d"main-flex-container"\x3e\r\n  \x3cdiv class\x3d"trailer-half step-indicator-container" data-dojo-attach-point\x3d"stepIndicatorContainer"\x3e\r\n    \x3cdiv class\x3d"create-step active" id\x3d"step1"\x3e\r\n      \x3cdiv class\x3d"step-text"\x3e${i18n.step1}\x3c/div\x3e\r\n      \x3cdiv class\x3d"step-label"\x3e${i18n.step1Description}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"create-step" id\x3d"step2"\x3e\r\n      \x3cdiv class\x3d"step-text"\x3e${i18n.step2}\x3c/div\x3e\r\n      \x3cdiv class\x3d"step-label"\x3e${i18n.step2Description}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"content-container"\x3e\r\n    \x3cdiv class\x3d"step-container step-1" data-dojo-attach-point\x3d"step1Container"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel id\x3d"task-title"\x3e\r\n          ${i18n.taskTitle}\r\n          \x3cinput\r\n            type\x3d"text"\r\n            data-dojo-attach-point\x3d"taskTitle"\r\n            autocomplete\x3d"off"\r\n            name\x3d"taskTitle"\r\n            placeholder\x3d"${i18n.taskTitlePlaceholder}"\r\n          /\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv\x3e\r\n          \x3clabel for\x3d"taskParameters" class\x3d"trailer-half"\x3e\r\n            ${i18n.parameters}\r\n            \x3cdiv class\x3d"parameters-container"\x3e\r\n              \x3cinput type\x3d"text" placeholder\x3d"${i18n.taskParameterKeyPlaceholder}" data-dojo-attach-point\x3d"parameterKey" /\x3e\r\n              \x3cinput\r\n                type\x3d"text"\r\n                class\x3d"margin-left-third margin-right-third"\r\n                placeholder\x3d"${i18n.taskParameterValuePlaceholder}"\r\n                data-dojo-attach-point\x3d"parameterValue"\r\n              /\x3e\r\n              \x3cbutton class\x3d"btn btn-clear" title\x3d"${i18n.addParameter}" data-dojo-attach-point\x3d"addParameterButton"\x3e\r\n                \x3ci class\x3d"icon-ui-plus no-padding"\x3e\x3c/i\x3e\r\n              \x3c/button\x3e\r\n            \x3c/div\x3e\r\n          \x3c/label\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"parametersTableContainer" class\x3d"hide"\x3e\r\n            \x3ctable class\x3d"table parameters-table"\x3e\r\n              \x3ctbody data-dojo-attach-point\x3d"parametersTableBody"\x3e\x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n            \x3clabel class\x3d"toggle-switch"\x3e\r\n              \x3cinput\r\n                type\x3d"checkbox"\r\n                class\x3d"toggle-switch-input"\r\n                value\x3d"true"\r\n                name\x3d"saveInjectedParameters"\r\n                data-dojo-attach-point\x3d"saveInjectedParameters"\r\n              /\x3e\r\n              \x3cspan class\x3d"toggle-switch-track margin-right-1"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"toggle-switch-label"\x3e${i18n.saveParametersToNotebook}\x3c/span\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"step-container step-2 hide" data-dojo-attach-point\x3d"step2Container"\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3clabel id\x3d"schedule-date-start" class\x3d"schedule-date full-width"\x3e\r\n          ${i18n.scheduleStart}\r\n          \x3cinput\r\n            type\x3d"text"\r\n            data-dojo-attach-point\x3d"scheduleDateStart"\r\n            name\x3d"scheduleDateStart"\r\n            placeholder\x3d"${i18n.scheduleDateStart}"\r\n            data-dojo-type\x3d"dijit/form/DateTextBox"\r\n          /\x3e\r\n        \x3c/label\x3e\r\n        \x3clabel id\x3d"schedule-interval-type" class\x3d"full-width margin-left-quarter"\x3e\r\n          ${i18n.repeatType}\r\n          \x3cselect name\x3d"scheduleIntervalType" data-dojo-attach-point\x3d"scheduleIntervalType" class\x3d"select-full"\x3e\r\n            \x3coption value\x3d"minute"\x3e${i18n.scheduleIntervalType.minute}\x3c/option\x3e\r\n            \x3coption value\x3d"hour"\x3e${i18n.scheduleIntervalType.hour}\x3c/option\x3e\r\n            \x3coption value\x3d"day"\x3e${i18n.scheduleIntervalType.day}\x3c/option\x3e\r\n            \x3coption value\x3d"week"\x3e${i18n.scheduleIntervalType.week}\x3c/option\x3e\r\n            \x3coption value\x3d"month"\x3e${i18n.scheduleIntervalType.month}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv id\x3d"minuteForm" class\x3d"schedule-interval-options" data-dojo-attach-point\x3d"minuteForm"\x3e\r\n          \x3clabel\x3e\r\n            ${i18n.repeatInterval}\r\n            \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"minuteInterval"\x3e\r\n              \x3coption value\x3d"1" data-hide-agol\x3d"true"\x3e${i18n.minuteInterval.oneMinute}\x3c/option\x3e\r\n              \x3coption value\x3d"2" data-hide-agol\x3d"true"\x3e${i18n.minuteInterval.twoMinutes}\x3c/option\x3e\r\n              \x3coption value\x3d"3" data-hide-agol\x3d"true"\x3e${i18n.minuteInterval.threeMinutes}\x3c/option\x3e\r\n              \x3coption value\x3d"4" data-hide-agol\x3d"true"\x3e${i18n.minuteInterval.fourMinutes}\x3c/option\x3e\r\n              \x3coption value\x3d"5" data-hide-agol\x3d"true"\x3e${i18n.minuteInterval.fiveMinutes}\x3c/option\x3e\r\n              \x3coption value\x3d"10" data-hide-agol\x3d"true"\x3e${i18n.minuteInterval.tenMinutes}\x3c/option\x3e\r\n              \x3coption value\x3d"15"\x3e${i18n.minuteInterval.fifteenMinutes}\x3c/option\x3e\r\n              \x3coption value\x3d"30"\x3e${i18n.minuteInterval.thirtyMinutes}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"hourForm" class\x3d"hide schedule-interval-options" data-dojo-attach-point\x3d"hourForm"\x3e\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3clabel class\x3d"full-width"\x3e\r\n              ${i18n.repeatInterval}\r\n              \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"hourInterval"\x3e\r\n                \x3coption value\x3d"1"\x3e${i18n.hourInterval.oneHour}\x3c/option\x3e\r\n                \x3coption value\x3d"2"\x3e${i18n.hourInterval.twoHours}\x3c/option\x3e\r\n                \x3coption value\x3d"3"\x3e${i18n.hourInterval.threeHours}\x3c/option\x3e\r\n                \x3coption value\x3d"4"\x3e${i18n.hourInterval.fourHours}\x3c/option\x3e\r\n                \x3coption value\x3d"6"\x3e${i18n.hourInterval.sixHours}\x3c/option\x3e\r\n                \x3coption value\x3d"12"\x3e${i18n.hourInterval.twelveHours}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/label\x3e\r\n            \x3clabel class\x3d"full-width margin-left-quarter"\x3e\r\n              ${i18n.hourOnMinute}\r\n              \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"hourOnMinuteInterval"\x3e\r\n                \x3coption value\x3d"0"\x3e${i18n.hourOnMinuteInterval.minuteZero}\x3c/option\x3e\r\n                \x3coption value\x3d"5"\x3e${i18n.hourOnMinuteInterval.minuteFive}\x3c/option\x3e\r\n                \x3coption value\x3d"10"\x3e${i18n.hourOnMinuteInterval.minuteTen}\x3c/option\x3e\r\n                \x3coption value\x3d"15"\x3e${i18n.hourOnMinuteInterval.minuteFifteen}\x3c/option\x3e\r\n                \x3coption value\x3d"30"\x3e${i18n.hourOnMinuteInterval.minuteThirty}\x3c/option\x3e\r\n                \x3coption value\x3d"45"\x3e${i18n.hourOnMinuteInterval.minuteFourtyFive}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"dayForm" class\x3d"hide schedule-interval-options" data-dojo-attach-point\x3d"dayForm"\x3e\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3clabel class\x3d"full-width"\x3e\r\n              ${i18n.repeatInterval}\r\n              \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"dayInterval"\x3e\r\n                \x3coption value\x3d"1"\x3e${i18n.dayInterval.oneDay}\x3c/option\x3e\r\n                \x3coption value\x3d"2"\x3e${i18n.dayInterval.twoDays}\x3c/option\x3e\r\n                \x3coption value\x3d"3"\x3e${i18n.dayInterval.threeDays}\x3c/option\x3e\r\n                \x3coption value\x3d"4"\x3e${i18n.dayInterval.fourDays}\x3c/option\x3e\r\n                \x3coption value\x3d"5"\x3e${i18n.dayInterval.fiveDays}\x3c/option\x3e\r\n                \x3coption value\x3d"6"\x3e${i18n.dayInterval.sixDays}\x3c/option\x3e\r\n                \x3coption value\x3d"7"\x3e${i18n.dayInterval.sevenDays}\x3c/option\x3e\r\n                \x3coption value\x3d"14"\x3e${i18n.dayInterval.fourteenDays}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/label\x3e\r\n            \x3clabel id\x3d"schedule-time-start" class\x3d"margin-left-quarter full-width"\x3e\r\n              ${i18n.scheduleTimeStart}\r\n              \x3cinput\r\n                type\x3d"text"\r\n                data-dojo-attach-point\x3d"scheduleTimeStartDay"\r\n                name\x3d"scheduleTimeStart"\r\n                placeholder\x3d"${i18n.scheduleTimeStartPlaceholder}"\r\n                data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n              /\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"weekForm" class\x3d"hide schedule-interval-options" data-dojo-attach-point\x3d"weekForm"\x3e\r\n          \x3cfieldset class\x3d"fieldset-checkbox" data-dojo-attach-point\x3d"weekdayCheckboxOptions"\x3e\r\n            \x3clabel\x3e${i18n.dayOfWeek.title}\x3c/label\x3e\r\n            \x3cdiv class\x3d"checkbox-options"\x3e\r\n              \x3cdiv class\x3d"checkbox-options-column"\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"2" /\x3e${i18n.dayOfWeek.monday}\x3c/label\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"3" /\x3e${i18n.dayOfWeek.tuesday}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"checkbox-options-column"\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"4" /\x3e${i18n.dayOfWeek.wednesday}\x3c/label\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"5" /\x3e${i18n.dayOfWeek.thursday}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"checkbox-options-column"\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"6" /\x3e${i18n.dayOfWeek.friday}\x3c/label\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"7" /\x3e${i18n.dayOfWeek.saturday}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"checkbox-options-column"\x3e\r\n                \x3clabel\x3e \x3cinput name\x3d"scheduleDayOfWeek" type\x3d"checkbox" value\x3d"1" /\x3e${i18n.dayOfWeek.sunday}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3clabel id\x3d"schedule-time-start" class\x3d"full-width"\x3e\r\n            ${i18n.scheduleTimeStart}\r\n            \x3cinput\r\n              type\x3d"text"\r\n              data-dojo-attach-point\x3d"scheduleTimeStartWeek"\r\n              name\x3d"scheduleTimeStartWeek"\r\n              placeholder\x3d"${i18n.scheduleTimeStartPlaceholder}"\r\n              data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n            /\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv id\x3d"monthForm" class\x3d"hide schedule-interval-options" data-dojo-attach-point\x3d"monthForm"\x3e\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3clabel class\x3d"full-width"\x3e\r\n              ${i18n.dayOfMonth}\r\n              \x3cinput type\x3d"text" placeholder\x3d"${i18n.dayOfMonthPlaceholder}" data-dojo-attach-point\x3d"dayOfMonth" /\x3e\r\n            \x3c/label\x3e\r\n            \x3clabel class\x3d"full-width margin-left-quarter"\x3e\r\n              ${i18n.repeatInterval}\r\n              \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"monthInterval"\x3e\r\n                \x3coption value\x3d"1"\x3e${i18n.monthInterval.oneMonth}\x3c/option\x3e\r\n                \x3coption value\x3d"2"\x3e${i18n.monthInterval.twoMonths}\x3c/option\x3e\r\n                \x3coption value\x3d"3"\x3e${i18n.monthInterval.threeMonths}\x3c/option\x3e\r\n                \x3coption value\x3d"4"\x3e${i18n.monthInterval.fourMonths}\x3c/option\x3e\r\n                \x3coption value\x3d"5"\x3e${i18n.monthInterval.fiveMonths}\x3c/option\x3e\r\n                \x3coption value\x3d"6"\x3e${i18n.monthInterval.sixMonths}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3clabel id\x3d"schedule-time-start" class\x3d"full-width"\x3e\r\n              ${i18n.scheduleTimeStart}\r\n              \x3cinput\r\n                type\x3d"text"\r\n                data-dojo-attach-point\x3d"scheduleTimeStartMonth"\r\n                name\x3d"scheduleTimeStart"\r\n                placeholder\x3d"${i18n.scheduleTimeStartPlaceholder}"\r\n                data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n              /\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3clabel class\x3d"full-width"\x3e\r\n          ${i18n.scheduleEnd}\r\n          \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"scheduleEnds"\x3e\r\n            \x3coption value\x3d"never"\x3e${i18n.endsNever}\x3c/option\x3e\r\n            \x3coption value\x3d"date"\x3e${i18n.endsDate}\x3c/option\x3e\r\n            \x3coption value\x3d"count"\x3e${i18n.endsCount}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"full-width margin-left-quarter"\x3e\r\n          \x3clabel id\x3d"schedule-date-end" class\x3d"schedule-date hide" data-dojo-attach-point\x3d"scheduleDateEndContainer"\x3e\r\n            ${i18n.scheduleDateEnd}\r\n            \x3cinput\r\n              type\x3d"date"\r\n              data-dojo-attach-point\x3d"scheduleDateEnd"\r\n              name\x3d"scheduleDateEnd"\r\n              placeholder\x3d"${i18n.scheduleDateEnd}"\r\n              data-dojo-type\x3d"dijit/form/DateTextBox"\r\n            /\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"hide" data-dojo-attach-point\x3d"scheduleCountEndContainer"\x3e\r\n            ${i18n.endsCount}\r\n            \x3cinput\r\n              type\x3d"number"\r\n              data-dojo-attach-point\x3d"scheduleCountEnd"\r\n              name\x3d"scheduleCountEnd"\r\n              placeholder\x3d"${i18n.endsCountPlaceholder}"\r\n              min\x3d"1"\r\n            /\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel class\x3d"toggle-switch"\x3e\r\n          \x3cinput\r\n            type\x3d"checkbox"\r\n            class\x3d"toggle-switch-input"\r\n            value\x3d"true"\r\n            checked\x3d"true"\r\n            name\x3d"updatePortalItem"\r\n            data-dojo-attach-point\x3d"updatePortalItem"\r\n          /\x3e\r\n          \x3cspan class\x3d"toggle-switch-track margin-right-1"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"toggle-switch-label"\x3e${i18n.updateItemOnCompletion}\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-half"\x3e\r\n        \x3ccalcite-accordion\x3e\r\n          \x3ccalcite-accordion-item icon-position\x3d"start" appearance\x3d"transparent" item-title\x3d"${i18n.advanced}"\x3e\r\n            \x3clabel class\x3d"leader-half trailer-quarter"\x3e\r\n              ${i18n.taskTimeoutLabel}\r\n              \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n                \x3cinput class\x3d"width-50" step\x3d"1" type\x3d"number" data-dojo-attach-point\x3d"executionTimeoutInMinutes" name\x3d"timeout" min\x3d"15" /\x3e\r\n                \x3cdiv class\x3d"margin-left-1" data-dojo-attach-point\x3d"timeoutInText"\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"font-size--2 text-darkest-gray"\x3e${i18n.timeoutHelp}\x3c/div\x3e\r\n          \x3c/calcite-accordion-item\x3e\r\n        \x3c/calcite-accordion\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- \x3cdiv class\x3d"schedule-repeat-container" data-dojo-attach-point\x3d"scheduleRepeatContainer"\x3e\r\n        \x3clabel id\x3d"schedule-time-start" class\x3d"schedule-time"\x3e\r\n          ${i18n.scheduleTimeStart}\r\n          \x3cinput\r\n            type\x3d"text"\r\n            data-dojo-attach-point\x3d"scheduleTimeStart"\r\n            name\x3d"scheduleTimeStart"\r\n            placeholder\x3d"${i18n.scheduleTimeStartPlaceholder}"\r\n            data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n          /\x3e\r\n        \x3c/label\x3e\r\n        \r\n      \x3c/div\x3e --\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"action-buttons"\x3e\r\n    \x3cbutton class\x3d"btn btn-transparent hide" id\x3d"back-button" name\x3d"backButton" data-dojo-attach-point\x3d"backButton"\x3e\r\n      ${i18n.backButton}\r\n    \x3c/button\x3e\r\n    \x3cspan class\x3d"right"\x3e\r\n      \x3cbutton class\x3d"btn hide" data-dojo-attach-point\x3d"submitButton"\x3e\r\n        ${i18n.createTaskButton}\r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"btn" id\x3d"next-button" name\x3d"nextButton" data-dojo-attach-point\x3d"nextButton"\x3e\r\n        ${i18n.nextButton}\r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n        ${i18n.cancelButton}\r\n      \x3c/button\x3e\r\n    \x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/Notebook/templates/PreviewOverlay.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"panel panel-white"\x3e\r\n    \x3cdiv class\x3d"notebook-preview-container"\x3e\r\n      \x3cdiv id\x3d"notebook-preview-loader" class\x3d"loader padding-leader-3 padding-trailer-3 is-active"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader-text"\x3e${i18n.common.loading}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"notebook-preview-error" class\x3d"leader-2 trailer-2 margin-right-2 margin-left-3 alert alert-red alert-full"\x3e\r\n        ${i18n.itemProperties.previewResultsError}\r\n      \x3c/div\x3e\r\n      \x3ciframe\r\n        class\x3d"hide"\r\n        frameborder\x3d"0"\r\n        id\x3d"notebook-preview-iframe"\r\n        sandbox\x3d"allow-same-origin"\r\n        scrolling\x3d"no"\r\n      \x3e\x3c/iframe\x3e\r\n      \x3cdiv id\x3d"notebook-results" class\x3d"hide"\x3e\r\n        \x3cpre id\x3d"notebook-results-json"\x3e\x3c/pre\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/TaskDetailsDlg.html":'\x3cdiv class\x3d"main-flex-container"\x3e\r\n  \x3cdiv class\x3d"loader is-active padding-leader-3 padding-trailer-3" data-dojo-attach-point\x3d"loader"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.loading}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"error-container hide" data-dojo-attach-point\x3d"errorContainer"\x3e\r\n    \x3cdiv\r\n      class\x3d"is-active alert alert-red alert-full"\r\n      data-dojo-attach-point\x3d"errorMessage"\r\n    \x3e\r\n      ${i18n.error}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"empty-container hide" data-dojo-attach-point\x3d"emptyContainer"\x3e\r\n    \x3cdiv class\x3d"text-center"\x3e\r\n      \x3ci class\x3d"icon-ui-table"\x3e\x3c/i\x3e\r\n      \x3ch3\x3e${i18n.noTaskDetails}\x3c/h3\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"content-container hide" data-dojo-attach-point\x3d"contentContainer"\x3e\r\n    \x3ch5\x3e${i18n.runs}\x3c/h5\x3e\r\n    \x3ctable class\x3d"table table-striped"\x3e\r\n      \x3cthead\x3e\r\n        \x3ctr\x3e\r\n          \x3cth\x3e${i18n.runId}\x3c/th\x3e\r\n          \x3cth\x3e${i18n.status}\x3c/th\x3e\r\n          \x3cth\x3e${i18n.created}\x3c/th\x3e\r\n          \x3cth\x3e${i18n.modified}\x3c/th\x3e\r\n          \x3cth\x3e${i18n.results}\x3c/th\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/thead\x3e\r\n      \x3ctbody data-dojo-attach-point\x3d"taskRunsTableBody"\x3e\x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"text-right action-buttons"\x3e\r\n    \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"closeButton"\x3e\r\n      ${i18n.closeButton}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/scene.html":'\x3cdiv\x3e\r\n  \x3cfieldset class\x3d"fieldset-checkbox" data-dojo-attach-point\x3d"_sceneContainer"\x3e\r\n    \x3cdiv class\x3d"column-10 hide" data-dojo-attach-point\x3d"_sceneInfo"\x3e\r\n      \x3cspan\x3e${i18n.itemProperties.manageSceneCache}\x3c/span\x3e\x3cbr\x3e\r\n      \x3cspan class\x3d"font-size--1"\x3e${i18n.itemProperties.manageSceneCacheDesc}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loader js-caching-loader overlay-white position-relative" data-dojo-attach-point\x3d"_caching"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"_cachingTitle"\x3e${i18n.items.webScene}\x3c/span\x3e\r\n      \x3cdiv class\x3d"right inline-block" data-dojo-attach-point\x3d"_sceneJobInfo"\x3e\r\n        \x3cbutton data-action\x3d"sceneJobStatus" class\x3d"btn btn-clear btn-small js-action-sceneJobStatus" data-dojo-attach-point\x3d"_sceneJobStatusBtn"\x3e\r\n          ${i18n.itemProperties.jobStatus}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${i18n.itemProperties.buildingCache}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block hide" data-dojo-attach-point\x3d"_manageInfo"\x3e\r\n      \x3cbutton data-action\x3d"manageSceneCache" class\x3d"btn btn-clear btn-small js-action-manageSceneCache" data-dojo-attach-point\x3d"_manageSceneBtn"\x3e\r\n        ${i18n.itemProperties.manageCache}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-action\x3d"sceneJobStatus" class\x3d"btn btn-clear btn-small js-action-sceneJobStatus hide" data-dojo-attach-point\x3d"_sceneJobStatusFailedBtn"\x3e\r\n        ${i18n.itemProperties.jobStatus}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3cfieldset class\x3d"fieldset-checkbox scene-schedule-container hide" data-dojo-attach-point\x3d"sceneScheduleContainer"\x3e\r\n    \x3ccalcite-accordion scale\x3d"m" appearance\x3d"transparent" icon-position\x3d"start" icon-type\x3d"chevron" selection-mode\x3d"single"\x3e\r\n      \x3ccalcite-accordion-item item-subtitle\x3d"${i18n.itemProperties.sceneTask.title}" tabindex\x3d"0"\x3e\r\n        \x3cdiv id\x3d"scene-schedule-container__tasks" class\x3d"leader-half trailer-half scene-schedule-container__tasks" data-dojo-attach-point\x3d"sceneTaskContainer" aria-expanded\x3d"false"\x3e\r\n          \x3cdiv class\x3d"leader-half trailer-half"\x3e${i18n.itemProperties.sceneTask.description}\x3c/div\x3e\r\n          \x3ccalcite-dropdown data-dojo-attach-point\x3d"rebuildDropdown"\x3e\r\n            \x3ccalcite-button appearance\x3d"outline" slot\x3d"dropdown-trigger" icon-end\x3d"chevron-down"\x3e${i18n.itemProperties.sceneTask.create}\x3c/calcite-button\x3e\r\n            \x3ccalcite-dropdown-group selection-mode\x3d"none"\x3e\r\n              \x3ccalcite-dropdown-item class\x3d"js-create-full-rebuild" data-dojo-attach-point\x3d"createFullRebuildBtn"\x3e${i18n.itemProperties.sceneTask.fullRebuild}\x3c/calcite-dropdown-item\x3e\r\n              \x3ccalcite-dropdown-item class\x3d"js-create-partial-rebuild" data-dojo-attach-point\x3d"createPartialRebuildBtn"\x3e${i18n.itemProperties.sceneTask.partialRebuild}\x3c/calcite-dropdown-item\x3e\r\n            \x3c/calcite-dropdown-group\x3e\r\n          \x3c/calcite-dropdown\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"sceneTasksContainer"\x3e\x3c/div\x3e\r\n      \x3c/calcite-accordion-item\x3e\r\n    \x3c/calcite-accordion\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/image.html":'\x3cfieldset class\x3d"fieldset-checkbox" data-dojo-attach-point\x3d"_imageContainer"\x3e\r\n  \x3cdiv class\x3d"loader js-caching-loader overlay-white position-relative" data-dojo-attach-point\x3d"_caching"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.itemProperties.buildingCache}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/appsettings.html":'\x3cfieldset data-dojo-attach-point\x3d"_opContainer" class\x3d"trailer-0 hide fieldset-checkbox"\x3e\r\n  \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.operationsCollector}\x3c/legend\x3e\r\n  \x3clabel data-dojo-attach-point\x3d"_opSummary"\x3e${i18n.itemProperties.operationsCollectorSummary}\x3c/label\x3e\r\n  \x3clabel class\x3d"inline-block js-find-loc-label"\x3e\r\n    \x3cinput data-dojo-attach-point\x3d"_opFindLocations" type\x3d"checkbox" class\x3d"opFindLocations hide" name\x3d"opFindLocations"\x3e \x3cspan class\x3d"opFindLocations hide"\x3e${i18n.itemProperties.opFindLocations}\x3c/span\x3e\r\n    \x3cbutton aria-expanded\x3d"true" aria-controls\x3d"find-locations-container" data-dojo-attach-point\x3d"_opFindLocationsLink" class\x3d"btn btn-clear expcon avenir-demi opFindLocations hide"\x3e${i18n.customRoles.contract}\x3c/button\x3e\r\n  \x3c/label\x3e\r\n  \x3cdiv id\x3d"find-locations-container" aria-hidden\x3d"false" data-dojo-attach-point\x3d"_opFindLocationsContainer" class\x3d"leader-quarter fieldsGrid opFindLocationsDiv opFindLocations margin-left-2 hide"\x3e\r\n    \x3clabel class\x3d"opFindLocations hide"\x3e\r\n      ${i18n.itemProperties.hintText}\x26nbsp;\r\n      \x3cinput class\x3d"opFindLocations display-block hide" data-dojo-attach-point\x3d"_opFindLocationsHintText" value\x3d"${i18n.itemProperties.findPlace}" maxlength\x3d"250"\x3e\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"_opByLayerContainer"\x3e\r\n      \x3clabel class\x3d"inline-block esriLeadingMargin05 opFindLocations hide trailer-half"\x3e\r\n        \x3cinput data-label\x3d"${i18n.itemProperties.findByLayer}" class\x3d"opSetting opFindLocations hide" data-dojo-attach-point\x3d"_opByLayer" type\x3d"checkbox" checked name\x3d"opByLayer"\x3e\r\n        ${i18n.itemProperties.byLayer}\r\n      \x3c/label\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_byLayerDiv" class\x3d"byLayerDiv"\x3e\r\n        \x3cdiv class\x3d"fieldsGridContainer opFindLocations hide" data-dojo-attach-point\x3d"_opFindLocationsGrid"\x3e\x3c/div\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_addFieldBtn" class\x3d"btn btn-clear leader-half opFindLocations hide"\x3e${i18n.addLayerFromUrlDlg.addLayerBtn}\x3c/button\x3e\r\n        \x3cbr\x3e\x3cbr\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half opFindRecords hide" data-dojo-attach-point\x3d"_opByTableContainer"\x3e\r\n      \x3clabel class\x3d"inline-block esriLeadingMargin05 trailer-half"\x3e\r\n        \x3cinput data-label\x3d"${i18n.itemProperties.findByTable}" class\x3d"opSetting" data-dojo-attach-point\x3d"_opByTable" type\x3d"checkbox" checked name\x3d"opByTable"\x3e\r\n        ${i18n.itemProperties.byTable}\r\n      \x3c/label\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_byTableDiv" class\x3d"byTableDiv"\x3e\r\n        \x3cdiv class\x3d"fieldsGridContainer" data-dojo-attach-point\x3d"_opFindRecordsGrid"\x3e\x3c/div\x3e\r\n        \x3cbutton data-dojo-attach-point\x3d"_addTableFieldBtn" class\x3d"btn btn-clear leader-half"\x3e${i18n.itemProperties.addTable}\x3c/button\x3e\r\n        \x3cbr\x3e\x3cbr\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half trailer-half if-map"\x3e\r\n      \x3clabel class\x3d"inline-block esriLeadingMargin05 opFindLocations hide"\x3e\r\n        \x3cinput data-label\x3d"${i18n.itemProperties.findByAddress}" class\x3d"opSetting opFindLocations hide" data-dojo-attach-point\x3d"_opByAddress" type\x3d"checkbox" checked name\x3d"opByAddress"/\x3e\r\n        ${i18n.itemProperties.byAddress}\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cspan class\x3d"opTracking if-map"\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\x3cinput class\x3d"opSetting" type\x3d"checkbox" data-dojo-attach-point\x3d"_opTracking"\x3e ${i18n.itemProperties.opLocationTracking}\x3c/label\x3e\x3cbr\x3e\r\n    \x3clabel class\x3d"margin-left-2 padding-leader-quarter"\x3e\r\n      ${i18n.itemProperties.opTrackFrequency}\r\n      \x3cselect class\x3d"esriLeadingMargin05 opSetting" data-dojo-attach-point\x3d"_opTrackingSelect"\x3e\r\n        \x3coption value\x3d"30"\x3e${i18n.itemProperties.thirtysec}\x3c/option\x3e\r\n        \x3coption value\x3d"60"\x3e${i18n.itemProperties.onemin}\x3c/option\x3e\r\n        \x3coption value\x3d"120"\x3e${i18n.itemProperties.twomin}\x3c/option\x3e\r\n        \x3coption value\x3d"300"\x3e${i18n.itemProperties.fivemin}\x3c/option\x3e\r\n        \x3coption value\x3d"1800"\x3e${i18n.itemProperties.thirtymin}\x3c/option\x3e\r\n        \x3coption value\x3d"3600"\x3e${i18n.itemProperties.onehour}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/label\x3e\r\n  \x3c/span\x3e\r\n  \x3cdiv class\x3d"if-map" data-dojo-attach-point\x3d"_opCollectorContainer"\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_opCollector" type\x3d"checkbox" checked\x3e ${i18n.itemProperties.opCollector}\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"if-map"\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"opFieldMaps" type\x3d"checkbox" checked\x3e ${i18n.itemProperties.opFieldMapsMobile}\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/webscene.html":'\x3cfieldset class\x3d"fieldset-checkbox trailer-0"\x3e\r\n  \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.layerSettings}\x3c/legend\x3e\r\n\r\n  \x3cdiv class\x3d"leader-half"\x3e\r\n    ${i18n.itemProperties.httpsLabel}\r\n    \x3cspan class\x3d"icon-ui-description popover-link" tabindex\x3d"0" data-dojo-attach-point\x3d"_httpsHelpLink" aria-label\x3d"${i18n.itemProperties.learnMore}"\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"leader-half"\x3e\r\n      \x3cbutton data-action\x3d"httpsUpdate" class\x3d"btn btn-clear btn-small js-action-httpsUpdate" data-dojo-attach-point\x3d"_updateHttpsBtn"\x3e\r\n        ${i18n.itemProperties.updateLayersToHTTPS}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/notebook.html":'\x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n    \x3ch5\x3e${i18n.notebookSettings}\x3c/h5\x3e\r\n    \x3cdiv\x3e\r\n        \x3clabel class\x3d"control-label"\x3e\r\n            ${i18n.notebookRuntime}\r\n            \x3cdiv class\x3d"control-input" data-dojo-attach-point\x3d"runtimeSelectContainer"\x3e\r\n                \x3cselect class\x3d"hide" data-dojo-attach-point\x3d"notebookRuntimeSelect"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/fieldset\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreDatabaseSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"databaseGeneralDescription"\x3e\r\n    \x3clabel for\x3d"database-general-description"\x3e\r\n      \x3cdiv id\x3d"database-general-description" class\x3d"generalDescription" \x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"publisherDatabaseContainer"\x3e\r\n    \x3clegend for\x3d"publisherDatabaseConnection"\x3e\r\n      ${i18n.publisherDatabaseConnection}\x3cspan class\x3d"sde-file"\x3e${i18n.sdeFile}\x3c/span\x3e\r\n    \x3c/legend\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"publisherLoader" class\x3d"hide loader-container"\x3e\r\n        \x3cimg src\x3d"./js/arcgisonline/css/images/LoadingAnimation_circle24blue.gif"\r\n          alt\x3d"${i18n.importingConnectionFile}" /\x3e\x26nbsp;${i18n.importingConnectionFile}\r\n      \x3c/div\x3e\r\n      \x3cinput id\x3d"publisherConnectionFile" name\x3d"publisherConnectionFile" type\x3d"file" accept\x3d".sde"\r\n        data-dojo-attach-point\x3d"publisherConnectionFile" /\x3e\r\n      \x3cdiv class\x3d"input-error-message"\x3e\r\n        ${i18n.connectionFileError}\r\n      \x3c/div\x3e\r\n      \x3cbutton class\x3d"btn btn-transparent right choose-different-file-btn hide"\r\n        data-dojo-attach-point\x3d"changePublisherConnectionCancelBtn"\x3e\r\n        ${i18n.cancelButton}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"hide connection-string-container" data-dojo-attach-point\x3d"publisherConnectionContainer"\x3e\r\n        \x3cdiv\x3e\r\n          \x3ctable class\x3d"table table-striped trailer-0"\x3e\r\n            \x3cthead data-dojo-attach-point\x3d"publisherFileNameContainer"\x3e\r\n              \x3ctr\x3e\r\n                \x3cth colspan\x3d"2"\x3e\r\n                  ${i18n.fileChosen}: \x3cspan class\x3d"server-file-name" data-dojo-attach-point\x3d"publisherFileName"\x3e\x3c/span\x3e\r\n                \x3c/th\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/thead\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"publisherConnectionStringTable"\x3e\x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"publisherConnectionString"\r\n          data-connection-string-type\x3d"publisher" /\x3e\r\n\r\n        \x3cbutton class\x3d"btn btn-transparent choose-different-file-btn"\r\n          data-dojo-attach-point\x3d"changePublisherConnectionBtn"\x3e\r\n          ${i18n.chooseDifferentFile}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection leader-1" data-dojo-attach-point\x3d"serverDatabaseContainer"\x3e\r\n    \x3cdiv class\x3d"fieldset-radio"\x3e\r\n      \x3clegend\x3e${i18n.serverDatabaseConnection}\x3cspan class\x3d"sde-file"\x3e${i18n.sdeFile}\x3c/span\x3e\x3c/legend\x3e\r\n      \x3cdiv class\x3d"serverDatabaseOptionContainer" data-dojo-attach-point\x3d"serverDatabaseOptionContainer"\x3e\r\n        \x3clabel class\x3d"datastore-database-same-as-publisher active"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"serverDatabaseOption" value\x3d"sameAsPublisher"\r\n            checked\x3d"checked" /\x3e${i18n.sameAsPublisher}\r\n        \x3c/label\x3e\r\n        \x3clabel class\x3d"datastore-database-new-path"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"serverDatabaseOption" value\x3d"newConnection" /\x3e\r\n          ${i18n.newConnection}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"publisherDatabaseNewContainer"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"serverLoader" class\x3d"hide loader-container"\x3e\r\n        \x3cimg src\x3d"./js/arcgisonline/css/images/LoadingAnimation_circle24blue.gif"\r\n          alt\x3d"${i18n.importingConnectionFile}" /\x3e\x26nbsp;${i18n.importingConnectionFile}\r\n      \x3c/div\x3e\r\n      \x3cinput class\x3d"hide" id\x3d"serverConnectionFile" name\x3d"serverConnectionFile" type\x3d"file" accept\x3d".sde"\r\n        data-dojo-attach-point\x3d"serverConnectionFile" /\x3e\r\n      \x3cdiv class\x3d"input-error-message"\x3e\r\n        ${i18n.connectionFileError}\r\n      \x3c/div\x3e\r\n      \x3cbutton class\x3d"btn btn-transparent right choose-different-file-btn hide"\r\n        data-dojo-attach-point\x3d"changeServerConnectionCancelBtn"\x3e\r\n        ${i18n.cancelButton}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"hide connection-string-container" data-dojo-attach-point\x3d"serverConnectionContainer"\x3e\r\n        \x3cdiv\x3e\r\n          \x3ctable class\x3d"table table-striped trailer-0"\x3e\r\n            \x3cthead data-dojo-attach-point\x3d"serverFileNameContainer"\x3e\r\n              \x3ctr\x3e\r\n                \x3cth colspan\x3d"2"\x3e\r\n                  ${i18n.fileChosen}: \x3cspan class\x3d"server-file-name" data-dojo-attach-point\x3d"serverFileName"\x3e\x3c/span\x3e\r\n                \x3c/th\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/thead\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"serverConnectionStringTable"\x3e\x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"serverConnectionString" data-connection-string-type\x3d"server" /\x3e\r\n\r\n        \x3cbutton class\x3d"btn btn-transparent choose-different-file-btn"\r\n          data-dojo-attach-point\x3d"changeServerConnectionBtn"\x3e\r\n          ${i18n.chooseDifferentFile}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"alert alert-yellow leader-1" data-dojo-attach-point\x3d"hostingServerError"\x3e\r\n    ${i18n.hostingServerError}\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreDatabase.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n  \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n        \x3ch5\x3e${i18n.datastoreSettingsDatabase}\x3c/h5\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n            \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreDatabaseEditBtn"\x3e${i18n.datastoreSettingsDatabaseEdit}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreDatabaseCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"databaseSettingsContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreFolderSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"folderGeneralDescription"\x3e\r\n    \x3clabel for\x3d"folder-general-description"\x3e\r\n      \x3cdiv id\x3d"folder-general-description" class\x3d"generalDescription"\x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"publisherFolderPath"\x3e\r\n      ${i18n.publisherFolderPath}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"publisherFolderPath" type\x3d"text" data-dojo-attach-point\x3d"publisherFolderPath"\r\n          placeholder\x3d"${i18n.fileSharePlaceholder}" class\x3d"folder-path" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"publisherFolderHostnameContainer" class\x3d"publisherFolderHostname hide"\x3e\r\n      \x3clabel for\x3d"publisherFolderHostname"\x3e\r\n        ${i18n.publisherFolderHostname}\r\n        \x3ctextarea id\x3d"publisherFolderHostName" data-dojo-attach-point\x3d"publisherFolderHostName"\x3e\x3c/textarea\x3e\r\n        \x3cdiv class\x3d"publisherHostnameInfo"\x3e${i18n.publisherHostnameInfo}\x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"serverFolderPathContainer"\x3e\r\n    \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n      \x3clegend\x3e${i18n.serverFolderPath}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"serverFolderOptionContainer" data-dojo-attach-point\x3d"serverFolderOptionContainer"\x3e\r\n        \x3clabel class\x3d"datastore-folder-same-as-publisher active"\x3e\x3cinput type\x3d"radio" name\x3d"serverFolderPath"\r\n            value\x3d"sameAsPublisher" checked\x3d"checked"\x3e${i18n.sameAsPublisherFolderPath}\x3c/label\x3e\r\n        \x3clabel class\x3d"datastore-folder-new-path"\x3e\x3cinput type\x3d"radio" name\x3d"serverFolderPath"\r\n            value\x3d"newPath"\x3e${i18n.newPath}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"newServerFolderPathContainer"\x3e\r\n    \x3clabel for\x3d"newServerFolderPath"\x3e\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"newServerFolderPath" class\x3d"folder-path" type\x3d"text" data-dojo-attach-point\x3d"newServerFolderPath"\r\n          placeholder\x3d"${i18n.replicatedFileSharePlaceholder}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreFolder.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n  \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3ch5\x3e${i18n.datastoreSettingsFolder}\x3c/h5\x3e\r\n      \x3cdiv class\x3d"margin-left-auto"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreFolderEditBtn"\x3e${i18n.datastoreSettingsFolderEdit}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreFolderCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"folderSettingsContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-auto"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreCloudSettings.html":'\x3cdiv\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"datastore-cloud-general-description"\x3e\r\n      \x3cdiv id\x3d"datastore-cloud-general-description" class\x3d"generalDescription" data-dojo-attach-point\x3d"cloudStoreDescription"\x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"cloudStoreOption" class\x3d"cloudStore-options"\x3e\r\n      ${i18n.cloudStoreOption}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"cloudStoreOption" type\x3d"text" data-dojo-attach-point\x3d"cloudStoreOption" disabled /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hide cloudStoreRegistrationUI" data-dojo-attach-point\x3d"cloudStoreRegistrationUI"\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"amazonCredentialType"\x3e\r\n          ${i18n.credentialType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"amazonCredentialType" data-dojo-attach-point\x3d"amazonCredentialType"\r\n              data-dojo-attach-event\x3d"onChange: _onCredentialTypeChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"google"\x3e\r\n        \x3clabel for\x3d"googleCredentialType"\x3e\r\n          ${i18n.credentialType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"googleCredentialType" data-dojo-attach-point\x3d"googleCredentialType"\r\n              data-dojo-attach-event\x3d"onChange: _onCredentialTypeChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"googlePrivateKey"\x3e\r\n        \x3clabel for\x3d"googlePrivateKey"\x3e\r\n          ${i18n.privateKeyLabel}\r\n          \x3cdiv\x3e\r\n            \x3cinput class\x3d"cloud-ui-select" id\x3d"googlePrivateKey" type\x3d"file" name\x3d"googlePrivateKey" accept\x3d".json"\r\n              data-dojo-attach-point\x3d"googlePrivateKey" data-dojo-attach-event\x3d"onChange: _onGooglePrivateKeyChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"accountName"\x3e\r\n          ${i18n.accountName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"accountName" type\x3d"text" data-dojo-attach-point\x3d"accountName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"accountKey"\x3e\r\n          ${i18n.accountKey}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"accountKey" type\x3d"password" data-dojo-attach-point\x3d"accountKey"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon google alibaba huawei"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect" for\x3d"accessKeyId"\x3e\r\n          ${i18n.accessKeyId}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"accessKeyId" type\x3d"text" data-dojo-attach-point\x3d"accessKeyId"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon alibaba huawei google"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect" for\x3d"secretKeyId"\x3e\r\n          ${i18n.secretKeyId}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"secretKeyId" type\x3d"password" data-dojo-attach-point\x3d"secretKeyId"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"region"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"region" data-dojo-attach-point\x3d"region"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"google"\x3e\r\n        \x3clabel for\x3d"regionGoogle"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"regionGoogle" data-dojo-attach-point\x3d"regionGoogle"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" disabled\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"huawei"\x3e\r\n        \x3clabel for\x3d"regionHuawei"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"regionHuawei" data-dojo-attach-point\x3d"regionHuawei"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"alibaba"\x3e\r\n        \x3clabel for\x3d"regionAlibaba"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"regionAlibaba" data-dojo-attach-point\x3d"regionAlibaba"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"environment"\x3e\r\n          ${i18n.environment}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"environment" data-dojo-attach-point\x3d"environment"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"privateUrl"\x3e\r\n        \x3clabel for\x3d"storageURL"\x3e\r\n          ${i18n.storageURL}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"storageURL" type\x3d"text" data-dojo-attach-point\x3d"storageURL"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"containerName"\x3e\r\n          ${i18n.containerName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"containerName" type\x3d"text" data-dojo-attach-point\x3d"containerName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon google huawei alibaba"\x3e\r\n        \x3clabel for\x3d"bucketName"\x3e\r\n          ${i18n.bucketName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bucketName" type\x3d"text" data-dojo-attach-point\x3d"bucketName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon azure google huawei alibaba" data-dojo-attach-point\x3d"cloudFolderContainer"\x3e\r\n        \x3clabel for\x3d"cloudFolder"\x3e\r\n          ${i18n.cloudfolder}\r\n          \x3cdiv\x3e\r\n            \x3cinput type\x3d"text" id\x3d"cloudFolder" data-dojo-attach-point\x3d"cloudFolder"\r\n              placeholder\x3d"${i18n.cloudFolderPlaceHolder}" data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreCloud.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n  \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3ch5\x3e${i18n.datastoreSettingsCloud}\x3c/h5\x3e\r\n      \x3cdiv class\x3d"margin-left-auto"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreCloudEditBtn"\x3e${i18n.datastoreSettingsDatabaseEdit}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreCloudCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"cloudSettingsContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-auto"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreNoSQLSettings.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3clabel for\x3d"datastore-noSQL-general-description"\x3e\r\n          \x3cdiv id\x3d"datastore-noSQL-general-description" class\x3d"generalDescription" data-dojo-attach-point\x3d"noSQLGeneralDescription"\x3e\r\n            ${i18n.noSQLGeneralDescription}\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3clabel for\x3d"noSQLOption" class\x3d"noSQL-options"\x3e\r\n            ${i18n.noSQLOption}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"noSQLOption" type\x3d"text" data-dojo-attach-point\x3d"noSQLOption" disabled /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3cdiv class\x3d"noSQLRegistrationUI" data-dojo-attach-point\x3d"noSQLRegistrationUI"\x3e\r\n            \x3cdiv class\x3d"noSQLConnectionURI"\x3e\r\n                \x3clabel for\x3d"noSQLConnectionURI"\x3e\r\n                    ${i18n.noSQLConnectionURI}\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text" id\x3d\'noSQLConnectionURI\' data-dojo-attach-point\x3d"noSQLConnectionURI"\r\n                        data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\r\n                        /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"noSQLConnectionURLExample"\x3e${i18n.noSQLConnectionURLExample}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"noSQLFallBackServer"\x3e\r\n                \x3clabel for\x3d"noSQLFallBackServer"\x3e\r\n                    ${i18n.noSQLFallBackServer}\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text" data-dojo-attach-point\x3d"noSQLFallBackServer"\r\n                        data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\r\n                        /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"noSQLFallBackServerExample"\x3e${i18n.noSQLFallBackServerExample}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n            \x3cdiv class\x3d"noSQLUsername"\x3e\r\n              \x3clabel for\x3d"noSQLUsername"\x3e\r\n                  ${i18n.noSQLUsername}\r\n                  \x3cdiv\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"noSQLUsername"/\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"noSQLPassword"\x3e\r\n              \x3clabel for\x3d"noSQLPassword"\x3e\r\n                  ${i18n.noSQLPassword}\r\n                  \x3cdiv\x3e\r\n                      \x3cinput type\x3d"password" id\x3d"noSQLPassword" data-dojo-attach-point\x3d"noSQLPassword"\r\n                      data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\r\n                      /\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"noSQLDataBase"\x3e\r\n              \x3clabel for\x3d"noSQLDataBase"\x3e\r\n                  ${i18n.noSQLDataBase}\r\n                  \x3cdiv\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"noSQLDataBase"/\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--keep for future change as we look more into trust strategy  --\x3e\r\n            \x3c!-- \x3cdiv class\x3d"noSQLTrustStrategy"\x3e\r\n              \x3clabel for\x3d"noSQLTrustStrategy"\x3e\r\n                ${i18n.noSQLTrustStrategy}\r\n                \x3cdiv\x3e\r\n                  \x3cselect class\x3d"noSQLTrustStrategy" id\x3d"noSQLTrustStrategy" data-dojo-attach-point\x3d"noSQLTrustStrategy" data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\x3e\r\n                      \x3coption value\x3d"TRUST_ALL_CERTIFICATES" selected\x3d"selected"\x3e${i18n.noSQLTrustStrategyTRUST_ALL_CERTIFICATES}\x3c/option\x3e\r\n                      \x3coption value\x3d"TRUST_CUSTOM_CA_SIGNED_CERTIFICATES"\x3e${i18n.noSQLTrustStrategyTRUST_CUSTOM_CA_SIGNED_CERTIFICATES}\x3c/option\x3e\r\n                      \x3coption value\x3d"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"\x3e${i18n.noSQLTrustStrategyTRUST_SYSTEM_CA_SIGNED_CERTIFICATES}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e --\x3e\r\n        \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreNoSQL.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3ch5\x3e${i18n.datastoreSettingsNoSQL}\x3c/h5\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreNoSQLEditBtn"\x3e${i18n.update}\x3c/button\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreNoSQLCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"noSQLSettingsContainer"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n  \r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n  \x3c/div\x3e\r\n  ',
"url:arcgisonline/sharing/dijit/templates/_federated-servers-table.html":'\x3ctable class\x3d"table add-datastore-dlg-server-table"\x3e\r\n    \x3cthead\x3e\r\n        \x3ctr\x3e\r\n            \x3cth class\x3d"col-width-1 text-center"\x3e\r\n                \x3cinput type\x3d"checkbox" data-dojo-attach-event\x3d"onchange: selectAll" data-dojo-attach-point\x3d"selectAllCheckbox" disabled\x3d"true"\x3e\r\n            \x3c/th\x3e\r\n            \x3cth\x3e${i18n.server}\x3c/th\x3e\r\n            \x3cth class\x3d"col-width-3 text-center"\x3e${i18n.status}\x3c/th\x3e\r\n        \x3c/tr\x3e\r\n    \x3c/thead\x3e\r\n    \x3ctbody data-dojo-attach-point\x3d"federatedServersTableBody"\x3e\r\n    \x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreServer.html":'\x3cdiv class\x3d"trailer-0 add-datastore-dlg width-inherit"\x3e\r\n  \x3cfieldset\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3ch5\x3e${i18n.datastoreSettingsServers}\x3c/h5\x3e\r\n      \x3cdiv class\x3d"margin-left-auto"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreServersEditBtn" disabled\x3d"true"\x3e\r\n          ${i18n.datastoreSettingsServersEdit}\r\n        \x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreServersCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cp class\x3d"trailer-half"\x3e${i18n.datastoreSettingsServersInfo}\x3c/p\x3e\r\n    \x3cdiv class\x3d"" data-dojo-attach-point\x3d"serversGridContainer"\x3e\x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSFileShareSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsFileShareGeneralDescription"\x3e\r\n    \x3clabel for\x3d"bdfsFileShare-general-description"\x3e\r\n      \x3cdiv id\x3d"bdfsFileShare-general-description" class\x3d"generalDescription" style\x3d"color: hsl(0, 0%, 66%);"\x3e\r\n        ${i18n.bdfsInfoConfig}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsFileShareContainer"\x3e\r\n    \x3clabel for\x3d"publisherFileShareFolderPath"\x3e\r\n      ${i18n.publisherFileShareFolderPath}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"publisherFileShareFolderPath" data-dojo-attach-point\x3d"publisherFileShareFolderPath"\r\n          placeholder\x3d"${i18n.fileSharePlaceholder}" class\x3d"folder-path" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreBDFSFileShare.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3ch5\x3e${i18n.datastoreSettingsFileShare}\x3c/h5\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreBDFSFileShareEditBtn"\x3e${i18n.datastoreSettingsFolderEdit}\x3c/button\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreBDFSFileShareCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \r\n      \x3cdiv data-dojo-attach-point\x3d"fileshareSettingsContainer"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n  \r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n  \x3c/div\x3e\r\n  ',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSHDFSSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsHDFSDescription"\x3e\r\n    \x3clabel for\x3d"bdfsHDFS-general-description"\x3e\r\n      \x3cdiv id\x3d"bdfsHDFS-general-description" class\x3d"generalDescription" style\x3d"color: hsl(0, 0%, 66%);"\x3e\r\n        ${i18n.bdfsInfoConfig}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hdfsStoreRegistrationUI" data-dojo-attach-point\x3d"hdfsStoreRegistrationUI"\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs"\x3e\r\n        \x3clabel for\x3d"hdfsPath"\x3e\r\n          ${i18n.hdfsPath}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsPath" type\x3d"text" data-dojo-attach-point\x3d"hdfsPath" placeholder\x3d"${i18n.hdfsPathPlaceholder}" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs"\x3e\r\n        \x3clabel for\x3d"hdfsUsername"\x3e\r\n          ${i18n.hdfsUsername}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsUsername" type\x3d"text" data-dojo-attach-point\x3d"hdfsUsername" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs" data-dojo-attach-point\x3d"hdfsUserKerberoesToggle"\x3e\r\n        \x3clabel class\x3d"toggle-switch modifier-class clearfix"\x3e\r\n          \x3cspan class\x3d"toggle-switch-label margin-right-1"\x3e${i18n.hdfsUserKerberos}\x3c/span\x3e\r\n          \x3cinput type\x3d"checkbox" name\x3d"userKerberosSwitch" class\x3d"toggle-switch-input"\x3e\r\n          \x3cspan class\x3d"toggle-switch-track"\x3e\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs hide" data-dojo-attach-point\x3d"hdfsUserKerberos"\x3e\r\n        \x3clabel for\x3d"hdfsKeytabLocation"\x3e\r\n          ${i18n.hdfsKeytabLocation}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsKeytabLocation" type\x3d"text" data-dojo-attach-point\x3d"hdfsKeytabLocation" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3clabel for\x3d"hdfsPrincipalUser"\x3e\r\n          ${i18n.hdfsPrincipalUser}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsPrincipalUser" type\x3d"text" data-dojo-attach-point\x3d"hdfsPrincipalUser" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3clabel for\x3d"hdfsPrincipalRealm"\x3e\r\n          ${i18n.hdfsPrincipalRealm}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsPrincipalRealm" type\x3d"text" data-dojo-attach-point\x3d"hdfsPrincipalRealm" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreBDFSHDFS.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3ch5\x3e${i18n.datastoreSettingsHDFS}\x3c/h5\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreBDFSHDFSEditBtn"\x3e${i18n.datastoreSettingsHDFSEdit}\x3c/button\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreBDFSHDFSCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \r\n      \x3cdiv data-dojo-attach-point\x3d"hdfsSettingsContainer"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n  \r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n  \x3c/div\x3e\r\n  ',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSHiveSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsHIVEDescription"\x3e\r\n    \x3clabel for\x3d"bdfsHive-general-description"\x3e\r\n      \x3cdiv id\x3d"bdfsHive-general-description" class\x3d"generalDescription" style\x3d"color: hsl(0, 0%, 66%);"\x3e\r\n        ${i18n.bdfsInfoConfig}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hiveStoreRegistrationUI" data-dojo-attach-point\x3d"hiveStoreRegistrationUI"\x3e\r\n      \x3cdiv class\x3d"hive"\x3e\r\n        \x3clabel for\x3d"hiveMetastoreURLs"\x3e\r\n          ${i18n.hiveMetastoreURLs}\r\n          \x3cdiv\x3e\r\n            \x3ctextarea id\x3d"hiveMetastoreURLs" rows\x3d"3" cols\x3d"20" data-dojo-attach-point\x3d"hiveMetastoreURLs"\r\n              placeholder\x3d"${i18n.hiveMetastoreURLsPlaceholder}" style\x3d"font-style: oblique;"\x3e\x3c/textarea\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hive" data-dojo-attach-point\x3d"hiveDatabase"\x3e\r\n        \x3clabel for\x3d"hiveDatabase"\x3e\r\n          ${i18n.hiveDatabase}\r\n          \x3cdiv class\x3d"hive" data-dojo-attach-point\x3d"hiveDatabaseToggle"\x3e\r\n            \x3cdiv\x3e${i18n.hiveDatabaseLabel}\x3c/div\x3e\r\n            \x3c!-- Hive database switch --\x3e\r\n            \x3clabel class\x3d"hive-toggle-switch toggle-switch modifier-class clearfix"\x3e\r\n              \x3cspan class\x3d"toggle-switch-label margin-right-1"\x3e${i18n.hiveSwitchLabel}\x3c/span\x3e\r\n              \x3cinput type\x3d"checkbox" name\x3d"hiveDatabaseSwitch" class\x3d"toggle-switch-input"\x3e\r\n              \x3cspan class\x3d"toggle-switch-track"\x3e\x3c/span\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Hive database input textbox --\x3e\r\n          \x3cdiv class\x3d"hiveDatabase hide" data-dojo-attach-point\x3d"hiveUserDatabase"\x3e\r\n            \x3cinput id\x3d"hiveDatabase" type\x3d"text" data-dojo-attach-point\x3d"hiveDatabase"\r\n              placeholder\x3d"${i18n.hiveDatabasePlaceholder}"/\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hive"\x3e\r\n        \x3clabel for\x3d"hiveUsername"\x3e\r\n          ${i18n.hiveUsername}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hiveUsername" type\x3d"text" data-dojo-attach-point\x3d"hiveUsername" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/datastoreBDFSHive.html":'\x3cdiv class\x3d"add-datastore-dlg width-inherit"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 datastore-settings"\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3ch5\x3e${i18n.datastoreSettingsHive}\x3c/h5\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"datastoreBDFSHiveEditBtn"\x3e${i18n.datastoreSettingsHiveEdit}\x3c/button\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"datastoreBDFSHiveCancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \r\n      \x3cdiv data-dojo-attach-point\x3d"hiveSettingsContainer"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv class\x3d"alert" data-dojo-attach-point\x3d"validateAlert"\x3e\r\n  \r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-quarter margin-right-quarter"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"margin-left-auto"\x3e\r\n          \x3cbutton class\x3d"btn btn-clear hide" data-dojo-attach-point\x3d"validateBtn"\x3e${i18n.validate}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3chr class\x3d"leader-half trailer-1 text-rule-light if-can-update" /\x3e\r\n  \x3c/div\x3e\r\n  ',
"url:arcgisonline/pages/dijit/ManageAreas/templates/ManageAreas.html":'\x3cdiv class\x3d"flex manage-areas"\x3e\r\n    \x3ciframe class\x3d"js-iframe flex-1 manage-areas__iframe" \x3e\x3c/iframe\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/offline.html":'\x3cdiv\x3e\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"_offlineDescription"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex leader-half"\x3e\r\n            \x3cdiv class\x3d"flex-1 toggle-switch leader-quarter" data-dojo-attach-point\x3d"_offlineToggle"\x3e\r\n                \x3cspan class\x3d"margin-right-1 left"\x3e${i18n.itemProperties.offlineModeEnable}\x3c/span\x3e\r\n                \x3cinput type\x3d"checkbox" class\x3d"toggle-switch-input hide" data-dojo-attach-point\x3d"_offlineCheckbox"\x3e\r\n                \x3cspan class\x3d"toggle-switch-track left"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3cbutton data-action\x3d"advancedOfflineOptions" class\x3d"btn btn-clear btn-small js-action-advancedOfflineOptions" data-dojo-attach-point\x3d"_advancedOfflineBtn"\x3e${i18n.itemProperties.offlineSection.optimize}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n        \x3ch5 class\x3d"font-size-0 trailer-half"\x3e${i18n.itemProperties.offlineSection.mapAreas}\x3c/h5\x3e\r\n        \x3cdiv class\x3d"font-size--1"\x3e${i18n.itemProperties.offlineSection.mapAreasDescription}\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex trailer-1 leader-half"\x3e\r\n            \x3cdiv class\x3d"flex-1 font-size--1" data-dojo-attach-point\x3d"_mapAreasText"\x3e\r\n                ${i18n.itemProperties.offlineSection.noMapAreas}\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3cbutton data-action\x3d"manageAreas" class\x3d"btn btn-clear btn-small js-action-manageAreas" data-dojo-attach-point\x3d"_manageAreasBtn"\x3e${i18n.itemProperties.offlineSection.manageAreas}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hide flex-center" data-dojo-attach-point\x3d"_warningContainer"\x3e\r\n            \x3cdiv class\x3d"offline-section__warning"\x3e\r\n                \x3ch6\x3e${i18n.itemProperties.offlineSection.featureDisabled}\x3c/h6\x3e\r\n                \x3cp class\x3d"font-size--1 trailer-half"\x3e${i18n.itemProperties.offlineSection.sharedGroupWarning1}\x3c/p\x3e\r\n                \x3cp class\x3d"font-size--1 trailer-half"\x3e${i18n.itemProperties.offlineSection.sharedGroupWarning2}\x3c/p\x3e\r\n                \x3cp class\x3d"font-size--1 trailer-0"\x3e\x3ca data-dojo-attach-point\x3d"_warningLearnMoreLink" target\x3d"_blank"\x3e${i18n.itemProperties.offlineSection.learnMore}\x3c/a\x3e\x3c/p\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/templates/SingleFilter.html":'\x3cdiv class\x3d"esriSingleFilterForm singleFilter" id\x3d"${id}.singleFilter"\x3e\r\n  \x3cdiv\x3e\r\n    \x3ctable id\x3d"${id}.exprTable" class\x3d"rowTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column1"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column2"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column3"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column4"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column5"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column6"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3cdiv id\x3d"${id}.column7"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd valign\x3d"top" nowrap\x3e\r\n            \x3ca id\x3d"${id}.deleteExpression" href\x3d"JavaScript:void(0);" style\x3d"margin:0 5px;display:none;" class\x3d"esriAGOFilterRemoveIcon" title\x3d"${i18n.deleteExpression}"\x3e\x3c/a\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"_interactiveFilterRow"\x3e\r\n          \x3ctd colspan\x3d"8"\x3e\r\n            \x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"interactiveFilter"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd nowrap\x3d"nowrap"\x3e\r\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                      \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            \x3cinput dojoAttachPoint\x3d"interactiveCheck" type\x3d"checkbox" class\x3d"promptCheckBox" title\x3d"${i18n.promptMsg}"/\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            \x3clabel class\x3d"labels" for\x3d"promptCheckBox"\x3e\r\n                              \x26nbsp;\x26nbsp;${i18n.askForValues}\r\n                            \x3c/label\x3e\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cspan dojoAttachPoint\x3d"interactiveArrow" style\x3d"color:#cbcbcb;cursor:pointer;" class\x3d"showHidePromptDiv"\x3e\x26nbsp;\x26#9660;\x3c/span\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr dojoAttachPoint\x3d"interactiveSpace" style\x3d"display:none"\x3e\r\n                  \x3ctd nowrap\x3d"nowrap"\x3e\r\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                      \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            ${i18n.prompt}\r\n                          \x3c/td\x3e\r\n                          \x3ctd width\x3d"10"\x3e\r\n                            \x26nbsp;\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv dojoAttachPoint\x3d"promptText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                          \x3ctd nowrap\x3d"nowrap"\x3e\r\n                            ${i18n.hint}\r\n                          \x3c/td\x3e\r\n                          \x3ctd width\x3d"10"\x3e\r\n                            \x26nbsp;\r\n                          \x3c/td\x3e\r\n                          \x3ctd\x3e\r\n                            \x3cdiv dojoAttachPoint\x3d"hintText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"promptDiv" style\x3d"display:none;padding:10px 0px;"\x3e\r\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtPrompt"\x3e\r\n      ${i18n.prompt}\r\n    \x3c/label\x3e\r\n    \x3cinput class\x3d"promptFields txtPrompt" type\x3d"text"/\x3e\r\n    \x3cbr/\x3e\r\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtHint"\x3e\r\n      ${i18n.hint}\r\n    \x3c/label\x3e\r\n    \x3cinput class\x3d"promptFields txtHint" type\x3d"text" /\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/imageService.html":'\x3cdiv data-dojo-attach-point\x3d"_root" class\x3d"imageService"\x3e\r\n  \x3cfieldset class\x3d"fieldset-checkbox"\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.imageService.capabilities}\x3c/legend\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_image"\x3e ${i18n.itemProperties.imageService.image}\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"padding-left-1 clearfix" data-dojo-attach-point\x3d"_imageProperties"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"width"\x3e\r\n          ${i18n.itemProperties.imageService.maxImageWidth}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"maxImageWidth" class\x3d"text-constrain inline-block" id\x3d"width" type\x3d"number" value\x3d"4000" max\x3d"4000" title\x3d"${i18n.itemProperties.imageService.maxImageWidthValidation}" data-dojo-attach-point\x3d"_maxImageWidth"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"height"\x3e\r\n          ${i18n.itemProperties.imageService.maxImageHeight}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"maxImageHeight" id\x3d"height" type\x3d"number" value\x3d"4000" max\x3d"4000" title\x3d"${i18n.itemProperties.imageService.maxImageHeightValidation}" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_maxImageHeight"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"sampleCount"\x3e\r\n          ${i18n.itemProperties.imageService.maxSampleCount}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"maxSampleCount" id\x3d"sampleCount" type\x3d"number" value\x3d"1000" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_maxSampleCount"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"resampling"\x3e\r\n          ${i18n.itemProperties.imageService.defaultResampling}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cselect name\x3d"defaultResamplingMethod" data-dojo-attach-point\x3d"_defaultResamplingMethod" class\x3d"text-constrain inline-block" \x3e\r\n        \x3coptions\x3e\r\n          \x3coption value\x3d0\x3e${i18n.itemProperties.imageService.nearest}\x3c/option\x3e\r\n          \x3coption value\x3d1\x3e${i18n.itemProperties.imageService.bilinear}\x3c/option\x3e\r\n          \x3coption value\x3d2\x3e${i18n.itemProperties.imageService.cubic}\x3c/option\x3e\r\n          \x3coption value\x3d3\x3e${i18n.itemProperties.imageService.majority}\x3c/option\x3e\r\n        \x3c/options\x3e\r\n      \x3c/select\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"allowedCompression"\x3e\r\n          ${i18n.itemProperties.imageService.allowedCompressions}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide"\x3e\r\n        \x3cinput class\x3d"text-constrain inline-block" readonly type\x3d"text" data-dojo-attach-point\x3d"_allowedCompressions"\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"padding-left-1" data-dojo-attach-point\x3d"_allowedCompressionsList"\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedCompressionsNone"\x3e ${i18n.itemProperties.imageService.none}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedCompressionsJPEG"\x3e ${i18n.itemProperties.imageService.jpeg}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedCompressionsLZ77"\x3e ${i18n.itemProperties.imageService.lz77}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedCompressionsLERC"\x3e ${i18n.itemProperties.imageService.lerc}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"defaultCompressionTolerance"\x3e\r\n          ${i18n.itemProperties.imageService.defaultCompressionTolerance}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"defaultCompressionTolerance" id\x3d"defaultCompressionTolerance" type\x3d"number" value\x3d"0.01" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_defaultCompressionTolerance"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"defaultCompressionQuality"\x3e\r\n          ${i18n.itemProperties.imageService.defaultCompressionQuality}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"defaultCompressionQuality" id\x3d"defaultCompressionQuality" type\x3d"number" value\x3d"75" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_defaultCompressionQuality"\x3e\r\n      \x3clabel class\x3d"hide"\x3e\r\n        \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowCopy"\x3e ${i18n.itemProperties.imageService.allowCopy}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"hide"\x3e\r\n        \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowAnalysis"\x3e ${i18n.itemProperties.imageService.allowAnalysis}\r\n      \x3c/label\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowFunction"\x3e${i18n.itemProperties.imageService.allowFunction}\r\n      \x3c/label\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_allowFunctionProperties" class\x3d"padding-left-1"\x3e\r\n        \x3cdiv\x3e\r\n          \x3clabel for\x3d"defaultTemplate"\x3e\r\n            ${i18n.itemProperties.imageService.defaultTemplate}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"_defaultTemplate" class\x3d"text-constrain inline-block" style\x3d"min-width:5em"\x3e\r\n          \x3coptions\x3e\r\n            \x3coption value\x3d"None" selected\x3e${i18n.itemProperties.imageService.none}\x3c/option\x3e\r\n          \x3c/options\x3e\r\n        \x3c/select\x3e\r\n        \x3cdiv\x3e\r\n          \x3clabel for\x3d"allowedTemplates"\x3e\r\n            ${i18n.itemProperties.imageService.allowedTemplates}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"border:thin solid; min-height:40px; max-width:32.5em; margin-bottom:5px;" data-dojo-attach-point\x3d"_templateList"\x3e\r\n          \x3clabel\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          \x3clabel for\x3d"rasterFunctions"\x3e\r\n            ${i18n.itemProperties.imageService.rasterFunctions}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"border:thin solid; min-height:40px; max-width:32.5em" data-dojo-attach-point\x3d"_rftList"\x3e\r\n          \x3clabel\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"text-constrain" style\x3d"margin-top:5px; max-width:32.5em"\x3e\r\n          \x3cdiv class\x3d"right inline-block"\x3e\r\n            \x3cbutton class\x3d"btn btn-clear btn-small removeRfts" data-dojo-attach-point\x3d"removeRfts"\x3e\r\n              ${i18n.itemProperties.imageService.remove}\r\n            \x3c/button\x3e\r\n            \x3cbutton class\x3d"btn btn-clear btn-small browseRfts"\x3e\r\n              ${i18n.itemProperties.imageService.rasterFunctionTemplates}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_catalog"\x3e ${i18n.itemProperties.imageService.catalog}\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"padding-left-1 clearfix" data-dojo-attach-point\x3d"_catalogProperties"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"max_raster"\x3e\r\n          ${i18n.itemProperties.imageService.maxRaster}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"maxMosaicImageCount" class\x3d"text-constrain inline-block" id\x3d"max_raster" type\x3d"number" data-dojo-attach-point\x3d"_maxMosaicImageCount"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"max_record"\x3e\r\n          ${i18n.itemProperties.imageService.maxRecord}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"maxRecordCount" class\x3d"text-constrain inline-block" id\x3d"max_record" type\x3d"number" data-dojo-attach-point\x3d"_maxRecordCount"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"allowedFields"\x3e\r\n          ${i18n.itemProperties.imageService.allowedFields}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide"\x3e\r\n        \x3cinput class\x3d"text-constrain inline-block" readonly type\x3d"text" data-dojo-attach-point\x3d"_allowedFields"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"max-height:120px;overflow:auto;max-width:33em" class\x3d"padding-left-1 text-constrain inline-block" data-dojo-attach-point\x3d"_allowedFieldsList"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"mosaicMethod"\x3e\r\n          ${i18n.itemProperties.imageService.mosaicMethods}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide"\x3e\r\n        \x3cinput class\x3d"text-constrain inline-block" readonly type\x3d"text" data-dojo-attach-point\x3d"_allowedMosaicMethods"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"padding-left-1" data-dojo-attach-point\x3d"_allowedMosaicMethodsList"\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsNorthWest"\x3e${i18n.itemProperties.imageService.mosaicNorthWest}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsCenter"\x3e${i18n.itemProperties.imageService.mosaicCenter}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsLockRaster"\x3e${i18n.itemProperties.imageService.mosaicLockRaster}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsByAttribute"\x3e${i18n.itemProperties.imageService.mosaicByAttribute}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsNadir"\x3e${i18n.itemProperties.imageService.mosaicNadir}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsViewpoint"\x3e${i18n.itemProperties.imageService.mosaicViewpoint}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsSeamline"\x3e${i18n.itemProperties.imageService.mosaicSeamline}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMosaicMethodsNone"\x3e${i18n.itemProperties.imageService.mosaicNone}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          ${i18n.itemProperties.imageService.defaultMosaicMethod}\r\n        \x3c/label\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"_defaultMosaicMethodCombo" class\x3d"text-constrain inline-block" style\x3d"min-width:5em"\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"min-width:5em"\x3e\r\n        \x3clabel for\x3d"mosaicMethodSortField"\x3e\r\n          ${i18n.itemProperties.imageService.mosaicMethodSortField}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cselect name\x3d"defaultResamplingMethod" data-dojo-attach-point\x3d"_mosaicMethodSortField"\x3e\r\n        \x3c!--\x3coptions data-dojo-attach-point\x3d"_mosaicMethodSortFieldOptions"\x3e\r\n    \x3c/options\x3e--\x3e\r\n      \x3c/select\x3e\r\n      \x3cdiv class\x3d"hide"\x3e\r\n        \x3clabel for\x3d"sortableFields"\x3e\r\n          ${i18n.itemProperties.imageService.sortableFields}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide"\x3e\r\n        \x3cinput class\x3d"text-constrain inline-block" readonly type\x3d"text" data-dojo-attach-point\x3d"_sortableFields"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"padding-left-1 hide" data-dojo-attach-point\x3d"_sortableFieldsList"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"sort_value"\x3e\r\n          ${i18n.itemProperties.imageService.sortValue}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"sortValue" class\x3d"text-constrain inline-block" id\x3d"sort_value" type\x3d"text" data-dojo-attach-point\x3d"_sortValue"\x3e\r\n      \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3c/div\x3e\r\n    \x3clabel class\x3d"hide"\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_download"\x3e ${i18n.itemProperties.imageService.download}\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"padding-left-1 clearfix hide" data-dojo-attach-point\x3d"_downloadProperties"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"d_num"\x3e\r\n          ${i18n.itemProperties.imageService.maxDownloadNumber}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"maxDownloadImageCount" class\x3d"text-constrain inline-block" id\x3d"d_num" type\x3d"number" data-dojo-attach-point\x3d"_maxDownloadImageCount"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"d_size"\x3e\r\n          ${i18n.itemProperties.imageService.maxDownloadSize}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput name\x3d"downloadSize" id\x3d"d_size" type\x3d"number" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_maxDownloadSizeLimit"\x3e\r\n      \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3c/div\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_isCached"\x3e ${i18n.itemProperties.imageService.cache}\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"padding-left-1 clearfix" data-dojo-attach-point\x3d"_isCachedProperties"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_exportTilesAllowed"\x3e ${i18n.itemProperties.imageService.exportTilesAllowed}\r\n      \x3c/label\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_exportTilesAllowedProperties"\x3e\r\n        \x3cdiv\x3e\r\n          \x3clabel for\x3d"maxTilesCount"\x3e\r\n            ${i18n.itemProperties.imageService.maxExportTilesCount}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput name\x3d"maxExportTilesCount" id\x3d"maxTilesCount" type\x3d"number" class\x3d"text-constrain inline-block" data-dojo-attach-point\x3d"_maxExportTilesCount"\x3e\r\n      \x3c/div\x3e\r\n      \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3c/div\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_mensuration"\x3e ${i18n.itemProperties.imageService.mensuration}\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"padding-left-1 hide" data-dojo-attach-point\x3d"_mensurationProperties"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel\x3e${i18n.itemProperties.imageService.allowedMensurationCapabilities}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide"\x3e\r\n        \x3cinput class\x3d"text-constrain inline-block" readonly type\x3d"text" data-dojo-attach-point\x3d"_allowedMensurationCapabilities"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"padding-left-1" data-dojo-attach-point\x3d"_allowedMensurationCapabilitiesList"\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMensurationCapabilitiesNone"\x3e ${i18n.itemProperties.imageService.mensurationNone}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMensurationCapabilitiesBasic"\x3e ${i18n.itemProperties.imageService.mensurationBasic}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMensurationCapabilitiesBase-Top Height"\x3e ${i18n.itemProperties.imageService.mensurationBaseTopHeight}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMensurationCapabilitiesBase-Top Shadow Height"\x3e ${i18n.itemProperties.imageService.mensurationBaseTopShadowHeight}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMensurationCapabilitiesTop-Top Shadow Height"\x3e ${i18n.itemProperties.imageService.mensurationTopTopShadowHeight}\r\n        \x3c/label\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_allowedMensurationCapabilities3D"\x3e ${i18n.itemProperties.imageService.mensuration3D}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--\x3cfieldset\x3e\r\n    \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.imageService.function}\x3c/legend\x3e\r\n    \x3cdiv style\x3d"border:thin solid" data-dojo-attach-point\x3d"_rftList"\x3e\r\n      \x3clabel\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small removeRfts" data-dojo-attach-point\x3d"removeRfts"\x3e\r\n        ${i18n.itemProperties.imageService.remove}\r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small browseRfts"\x3e\r\n        ${i18n.itemProperties.imageService.browseRFTs}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e--\x3e\r\n\x3c/div\x3e\n',
"url:arcgisonline/pages/item/widgets/typeOptions/solution.html":'\x3cdiv class\x3d"trailer-0"\x3e\r\n\r\n  \x3c!-- VERSION --\x3e\r\n  \x3cdiv class\x3d"clearfix"\x3e\r\n    \x3cdiv class\x3d"org-settings__card-row"\x3e\r\n      \x3cdiv class\x3d"margin-right-2 trailer-half"\x3e\r\n        \x3cdiv class\x3d"font-size--1"\x3e${i18n.common.version}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"solution-settings-value-col position-relative org-settings__display-text-value"\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-darker-gray flex text-left org-settings__edit-btn"\r\n          data-dojo-attach-point\x3d"_editVersionBtn" aria-haspopup\x3d"dialog" aria-label\x3d"${editA11yLabel}"\x3e\r\n          \x3cdiv class\x3d"org-settings__display-value" data-dojo-attach-point\x3d"_displayVersionValue"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"margin-left-1 org-settings__edit-icon" data-dojo-attach-point\x3d"_editVersion"\x3e${!icons.inline.pencil.16}\x3c/div\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"hide org-settings__edit-form" data-dojo-attach-point\x3d"_editVersionForm"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_formVersionContent"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex leader-half org-settings__row-actions"\x3e\r\n            \x3cbutton class\x3d"control-bar__btn" data-dojo-attach-point\x3d"_saveVersionBtn"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3cbutton class\x3d"control-bar__btn margin-right-quarter" data-dojo-attach-point\x3d"_cancelVersionBtn"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3c!-- ID --\x3e\r\n  \x3cdiv class\x3d"clearfix" data-dojo-attach-point\x3d"_solutionID"\x3e\r\n    \x3cdiv class\x3d"org-settings__card-row"\x3e\r\n      \x3cdiv class\x3d"margin-right-2 trailer-half"\x3e\r\n        \x3cdiv class\x3d"font-size--1"\x3e${i18n.common.id}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"solution-settings-value-col position-relative org-settings__display-text-value"\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-darker-gray flex text-left org-settings__edit-btn"\r\n          data-dojo-attach-point\x3d"_editIDBtn" aria-haspopup\x3d"dialog" aria-label\x3d"${editA11yLabel}"\x3e\r\n          \x3cdiv class\x3d"org-settings__display-value" data-dojo-attach-point\x3d"_displayIDValue"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"margin-left-1 org-settings__edit-icon"\x3e${!icons.inline.pencil.16}\x3c/div\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"hide org-settings__edit-form" data-dojo-attach-point\x3d"_editIDForm"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_formIDContent"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex leader-half org-settings__row-actions"\x3e\r\n            \x3cbutton class\x3d"control-bar__btn" data-dojo-attach-point\x3d"_saveIDBtn"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3cbutton class\x3d"control-bar__btn margin-right-quarter" data-dojo-attach-point\x3d"_cancelIDBtn"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/opFieldMaps.html":'\x3cfieldset data-dojo-attach-point\x3d"_opContainer" class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n  \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.operationsCollector}\x3c/legend\x3e\r\n  \x3cdiv\x3e\r\n    \x3clabel class\x3d"inline-block"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"checkbox" type\x3d"checkbox" checked\x3e ${i18n.itemProperties.opFieldMapsMobile}\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/cache.html":'\x3cfieldset class\x3d"trailer-0 fieldset-checkbox if-online js-cache-control"\x3e\r\n  \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.cacheControlTitle}\x3c/legend\x3e\r\n  \x3cdiv class\x3d"leader-half"\x3e\r\n    ${i18n.itemProperties.cacheControlDesc}\r\n    \x3ca href\x3d"#" target\x3d"_blank" data-dojo-attach-point\x3d"cacheControlHelpLink"\x3e${i18n.itemProperties.learnMore}\x3c/a\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"leader-half"\x3e\r\n    \x3clabel data-dojo-attach-point\x3d"cacheControlLabel"\x3e\r\n      ${i18n.itemProperties.cacheControlTime}\r\n      \x3cselect class\x3d"inline-block margin-left-2" data-dojo-attach-point\x3d"cacheControlSelect"\x3e\r\n        \x3coption value\x3d"0" data-dojo-attach-point\x3d"cacheControlDefaultOption"\x3e${i18n.itemProperties.cacheControlOptions.never}\x3c/option\x3e\r\n        \x3coption value\x3d"30"\x3e${i18n.itemProperties.cacheControlOptions.thirtySec}\x3c/option\x3e\r\n        \x3coption value\x3d"60"\x3e${i18n.itemProperties.cacheControlOptions.oneMin}\x3c/option\x3e\r\n        \x3coption value\x3d"120"\x3e${i18n.itemProperties.cacheControlOptions.twoMin}\x3c/option\x3e\r\n        \x3coption value\x3d"300"\x3e${i18n.itemProperties.cacheControlOptions.fiveMin}\x3c/option\x3e\r\n        \x3coption value\x3d"900"\x3e${i18n.itemProperties.cacheControlOptions.fifteenMin}\x3c/option\x3e\r\n        \x3coption value\x3d"1800"\x3e${i18n.itemProperties.cacheControlOptions.thirtyMin}\x3c/option\x3e\r\n        \x3coption value\x3d"3600"\x3e${i18n.itemProperties.cacheControlOptions.oneHr}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light if-online js-cache-control"\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/graph.html":'\x3cfieldset class\x3d"trailer-0 fieldset-checkbox"\x3e\r\n  \x3clegend class\x3d"font-size-0"\x3e${i18n.itemProperties.editFeatures}\x3c/legend\x3e\r\n  \x3clabel class\x3d"inline-block" data-dojo-attach-point\x3d"enableEditingLabel"\x3e\r\n    \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"enableEditing"\x3e\r\n    ${i18n.itemProperties.enableEditing}\r\n  \x3c/label\x3e\r\n  \x3cdiv class\x3d"editing-properties leader-half"\x3e\r\n    ${!i18n.itemProperties.knowledgeGraph.whoCanEdit}\r\n    \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e${i18n.itemProperties.howToShare} \x3cspan data-dojo-attach-point\x3d"howToShare"\x3e\x3c/span\x3e\x3c/div\x3e\r\n    ${!i18n.itemProperties.whatKindEdits}\r\n    \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n      \x3clabel class\x3d"requires-editing"\x3e\r\n        \x3cinput type\x3d"checkbox" class\x3d"requires-editing" data-dojo-attach-point\x3d"enableAdd"\x3e\r\n        ${i18n.itemProperties.knowledgeGraph.editAdd}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"requires-editing"\x3e\r\n        \x3cinput type\x3d"checkbox" class\x3d"requires-editing" data-dojo-attach-point\x3d"enableDelete"\x3e\r\n        ${i18n.itemProperties.knowledgeGraph.editDelete}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"requires-editing"\x3e\r\n        \x3cinput type\x3d"checkbox" class\x3d"requires-editing" data-dojo-attach-point\x3d"enableUpdate"\x3e\r\n        ${i18n.itemProperties.knowledgeGraph.editUpdate}\r\n      \x3c/label\x3e\r\n      \x3cdiv class\x3d"padding-left-2" data-dojo-attach-point\x3d"enableUpdateOptions"\x3e\r\n        \x3clabel class\x3d"requires-editing"\x3e\r\n          \x3cinput type\x3d"radio" class\x3d"requires-editing" name\x3d"editing-update-options" data-dojo-attach-point\x3d"editPropsOnly"\x3e\r\n          ${i18n.itemProperties.knowledgeGraph.updatePropsOnly}\r\n        \x3c/label\x3e\r\n        \x3clabel class\x3d"requires-editing"\x3e\r\n          \x3cinput type\x3d"radio" class\x3d"requires-editing" name\x3d"editing-update-options" data-dojo-attach-point\x3d"editPropsAndGeometry"\x3e\r\n          ${i18n.itemProperties.knowledgeGraph.updatePropsGeometry}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    ${!i18n.itemProperties.whoCanManage}\r\n    \x3cdiv class\x3d"padding-left-1 trailer-half"\x3e\r\n      \x3cdiv\x3e\r\n        ${!i18n.itemProperties.youCanManage}\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        ${!i18n.itemProperties.administratorsCanManage}\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        ${!i18n.itemProperties.curatorsCanManage}\r\n        \x3cspan class\x3d"who-can-manage-learn-more"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"updateCapableGroupsContainer"\x3e\r\n        ${!i18n.itemProperties.groupMembersCanManage}\r\n        \x3cspan data-dojo-attach-point\x3d"updateCapableGroups"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"who-can-manage-learn-more"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/hostedView.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"trailer-1"\x3e${i18n.title}\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex"\x3e\r\n    \x3cp class\x3d"flex-1" data-dojo-attach-point\x3d"descriptionText"\x3e${i18n.description}\x3c/p\x3e\r\n    \x3cdiv\x3e\r\n      \x3ccalcite-button scale\x3d"m" appearance\x3d"outline" data-dojo-attach-point\x3d"updateViewButton"\x3e${i18n.updateView}\x3c/calcite-button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cp class\x3d"hide" data-dojo-attach-point\x3d"disabledText"\x3e${i18n.disabledMessage}\x3c/p\x3e\r\n  \x3chr class\x3d"leader-1 trailer-1 text-rule-light"\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/SettingsSection/SettingsSection.html":'\x3cdiv\x3e\r\n    \x3cdiv id\x3d"${sectionId}" class\x3d"column-18 padding-leader-2" data-dojo-attach-point\x3d"_offlineSettingsSection"\x3e\r\n        \x3csection data-dojo-attach-point\x3d"optionsSection"\x3e\r\n            \x3cheader class\x3d"panel panel-white border-bottom-clear"\x3e\r\n                \x3ch4 class\x3d"font-size-1 panel-header"\x3e${sectionTitle} \r\n                    \x3cbutton data-dojo-attach-point\x3d"topCancelBtn" class\x3d"btn btn-small btn-clear btn-two right hide js-cancel-settings"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n                    \x3cbutton data-dojo-attach-point\x3d"topSaveBtn" class\x3d"btn btn-small right hide js-save-settings"\x3e${i18n.common.save}\x3c/button\x3e\r\n                \x3c/h4\x3e\r\n            \x3c/header\x3e\r\n            \x3cdiv class\x3d"panel panel-white position-relative"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"optionsLoader" class\x3d"loader js-sharing-loader overlay-white fullscreen padding-leader-3 padding-trailer-3"\x3e\r\n                    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"loader-text"\x3e${i18n.itemProperties.updatingItemLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"optionsContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/section\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"bottomActions" class\x3d"column-18 if-can-update"\x3e\r\n        \x3csection class\x3d"panel panel-white panel-no-padding padding-trailer-half padding-leader-half padding-left-1 padding-right-1 position-relative"\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"bottomCancelBtn" class\x3d"btn btn-clear btn-two right js-cancel-settings" disabled\x3d"true"\x3e\r\n                ${i18n.common.cancel}\r\n            \x3c/button\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"bottomSaveBtn" class\x3d"btn right js-save-settings" disabled\x3d"true"\x3e\r\n                ${i18n.common.save}\r\n            \x3c/button\x3e\r\n        \x3c/section\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"*now":function(K){K(['dojo/i18n!*preload*arcgisonline/pages/item/widgets/nls/_settings*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/pages/item/widgets/_settings","require exports tslib esri/Evented dojo/query dojo/topic dojo/Deferred dojo/text!./templates/_settings.html dojo/i18n!../../../nls/arcgisonline dijit/_WidgetBase dijit/_TemplatedMixin arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg arcgisonline/map/utils/supportsOffline ../../pageUtil ../../utils/notebook ../../utils/icons ../../utils/alerts ../../utils/arrays ../../utils/dom ../_Actions ../../dijit/_CheckReadonlyMixin ./typeOptions/base ./typeOptions/message ./typeOptions/url ./typeOptions/useOnly ./typeOptions/map ./typeOptions/proxy ./typeOptions/locatorViewOptions/index ./typeOptions/ratelimit ./typeOptions/app ./typeOptions/feature ./typeOptions/marketplace ./typeOptions/tile ./typeOptions/scene ./typeOptions/image ./typeOptions/appsettings ./typeOptions/webscene ./typeOptions/notebook ./typeOptions/datastoreDatabase ./typeOptions/datastoreFolder ./typeOptions/datastoreCloud ./typeOptions/datastoreNoSQL ./typeOptions/datastoreServer ./typeOptions/datastoreBDFSFileShare ./typeOptions/datastoreBDFSHDFS ./typeOptions/datastoreBDFSHive ./typeOptions/offline ./typeOptions/imageService ./typeOptions/solution ./typeOptions/opFieldMaps ./typeOptions/cache ./typeOptions/graph ./typeOptions/hostedView ./SettingsSection/SettingsSection ./SettingsSection/GeneralSettingsSection arcgisonline/tsutils/declareDecorator".split(" "),function(K,
G,w,v,r,f,c,a,b,p,q,t,m,n,k,l,h,e,d,g,u,x,y,B,C,z,D,E,A,F,H,I,L,J,O,P,fa,V,ba,ka,la,ma,ha,Z,W,Q,ia,R,S,N,X,aa,ea,Y,T,ca){v=w.__importDefault(v);r=w.__importDefault(r);f=w.__importDefault(f);c=w.__importDefault(c);a=w.__importDefault(a);b=w.__importDefault(b);p=w.__importDefault(p);q=w.__importDefault(q);t=w.__importDefault(t);m=w.__importDefault(m);n=w.__importDefault(n);k=w.__importDefault(k);l=w.__importDefault(l);h=w.__importDefault(h);e=w.__importDefault(e);d=w.__importDefault(d);g=w.__importDefault(g);
u=w.__importDefault(u);x=w.__importDefault(x);y=w.__importDefault(y);B=w.__importDefault(B);C=w.__importDefault(C);z=w.__importDefault(z);D=w.__importDefault(D);E=w.__importDefault(E);A=w.__importDefault(A);F=w.__importDefault(F);H=w.__importDefault(H);I=w.__importDefault(I);L=w.__importDefault(L);J=w.__importDefault(J);O=w.__importDefault(O);P=w.__importDefault(P);fa=w.__importDefault(fa);V=w.__importDefault(V);ba=w.__importDefault(ba);ka=w.__importDefault(ka);la=w.__importDefault(la);ma=w.__importDefault(ma);
ha=w.__importDefault(ha);Z=w.__importDefault(Z);W=w.__importDefault(W);Q=w.__importDefault(Q);ia=w.__importDefault(ia);R=w.__importDefault(R);S=w.__importDefault(S);N=w.__importDefault(N);X=w.__importDefault(X);aa=w.__importDefault(aa);ea=w.__importDefault(ea);Y=w.__importDefault(Y);T=w.__importDefault(T);ca=w.__importDefault(ca);var M;(function(ja){ja.AppBuilderWidgetPackage="AppBuilder Widget Package";ja.ArcGISProAddIn="ArcGIS Pro Add In";ja.Dashboard="Dashboard";ja.DataStore="Data Store";ja.DocumentLink=
"Document Link";ja.FeatureService="Feature Service";ja.GeocodingService="Geocoding Service";ja.ImageService="Image Service";ja.KML="KML";ja.KnowledgeGraph="Knowledge Graph";ja.MapService="Map Service";ja.MobileMapPackage="Mobile Map Package";ja.Notebook="Notebook";ja.OperationView="Operation View";ja.QuickCaptureProject="QuickCapture Project";ja.RulePackage="Rule Package";ja.Solution="Solution Item";ja.SceneService="Scene Service";ja.TilePackage="Tile Package";ja.UrbanModel="Urban Model";ja.VectorTileService=
"Vector Tile Service";ja.ViewService="View Service";ja.WebExperience="Web Experience";ja.WebExperienceTemplate="Web Experience Template";ja.WebMap="Web Map";ja.WebScene="Web Scene";ja.Workflow="Workflow";ja.WorkforceProject="Workforce Project";ja.HubProject="Hub Project";ja.HubSiteApplication="Hub Site Application";ja.HubInitiativeTemplate="Hub Initiative Template";ja.HubEvent="Hub Event";ja.HubInitiative="Hub Initiative";ja.HubPage="Hub Page"})(M||(M={}));var U;(function(ja){ja.CloudStore="cloudStore";
ja.Egdb="egdb";ja.Elevation3DLayer="Elevation 3D Layer";ja.Folder="folder";ja.GeocodingFilter="Geocoding filter";ja.Offline="Offline";ja.SpatioTemporal="Spatiotemporal";ja.TiledImagery="Tiled Imagery";ja.ViewService="View Service";ja.ManagedImageCollection="Managed Image Collection";ja.FileShare="fileShare";ja.HDFS="hdfs";ja.Hive="hive"})(U||(U={}));var da;(function(ja){ja.App="app";ja.DataStore="data store";ja.File="file";ja.Layer="layer";ja.Map="map";ja.Notebook="notebook";ja.Solution="solution"})(da||
(da={}));return function(){function ja(){this.templateString=a["default"];this.icons=l["default"];this.i18n=b["default"]}ja.prototype.startup=function(){var na=this;this.inherited(arguments);var oa=new c["default"],ra=this.item.watch("isLoaded",function(){na.initUI().then(function(){var ua;ra.remove();na.page.hideLoader();var wa=n["default"].splitHashParts(null===(ua=location.hash)||void 0===ua?void 0:ua.replace("#",""));1<wa.length&&f["default"].publish("item-settings/scroll",wa[1])})});this.item.statusErrorCode?
this.handleItemErrorStatus():this.item.watch("statusErrorCode",this.handleItemErrorStatus.bind(this));oa.resolve(!1);return oa};ja.prototype.destroy=function(){this.inherited(arguments);this.page.toggleErrors(!0);document.querySelector(".tab-content").style.position="relative";this.destroyDialogs()};ja.prototype.initUI=function(){var na=this,oa=new c["default"];this.page.toggleErrors(!1);this.item.type===M.WebMap?e["default"].includes(this.item.typeKeywords,U.Offline)?oa.resolve(!0):m["default"](this.item.itemData).then(function(ra){oa.resolve(ra)},
function(){oa.resolve(!1)}):oa.resolve(!1);return oa.then(function(ra){na.toggleSupportsOffline(ra);na.initTypeOptions();na.addEventHandlers();document.querySelector(".tab-content").style.position="initial"})};ja.prototype.cleanStickyHeaderDisplay=function(){r["default"]("a.third-nav-link").forEach(function(na){"block"===na.style.display&&(na.style.display="inline")})};ja.prototype.addEventHandlers=function(){this.cleanStickyHeaderDisplay();this.own(r["default"](".third-nav .grid-container a",this.domNode).on("click",
this.handleStickyMenuClick.bind(this)),f["default"].subscribe("settings/update",this.alertUpdateSuccess.bind(this)),f["default"].subscribe("settings/error",this.handleSaveError.bind(this)),f["default"].subscribe("settings/clearAlerts",function(){return h["default"].clearAlerts()}));n["default"].registerItemActions(this,this.domNode,g["default"],this.page,this.actionGuard.bind(this))};ja.prototype.actionGuard=function(na){return-1===["markItemAsAuthoritative","markItemAsDeprecated","deleteItem"].indexOf(na)?
!1:this.checkReadonly(this.page.portal)};ja.prototype.handleSaveError=function(na){var oa=["SB_0001","SB_0002","SB_0003","SB_0004"],ra=["SB_0005","SB_0006","SB_0007"];this.item.isServiceProxy&&500===(null===na||void 0===na?void 0:na.code)?this.alertError(this.i18n.itemProperties.error.invalidCredentials.massage):(null===na||void 0===na?0:na.messageCode)&&e["default"].includes(oa,na.messageCode)?(this.subscriptionStatusDlg=new t["default"],this.subscriptionStatusDlg.show(this.page.portal.subscriptionInfo)):
(null===na||void 0===na?0:na.messageCode)&&e["default"].includes(ra,na.messageCode)?(this.subscriptionStatusDlg=new t["default"],this.subscriptionStatusDlg.showOther(na.messageCode)):(null===na||void 0===na?0:na.message)&&-1<na.message.indexOf("file exceeds the max size")?this.alertError(na.message):this.alertError(na.message||this.i18n.itemProperties.error.saveUnsuccessful)};ja.prototype.alertUpdateSuccess=function(){h["default"].showAlert("success",this.i18n.itemProperties.updatingItemSuccessful)};
ja.prototype.handleStickyMenuClick=function(na){var oa,ra=na.target;na.preventDefault();na=(null===(oa=ra.hash)||void 0===oa?void 0:oa.split("#")[1])||"settings-general";oa=document.getElementById(na);null===oa||void 0===oa?void 0:oa.scrollIntoView();r["default"](".third-nav .grid-container a").removeClass("is-active");ra.classList.add("is-active")};ja.prototype.toggleSupportsOffline=function(na){this.item.supportsOffline=na;this.item.supportsOffline||d["default"].hideNodes([this.offlineSection,this.offlineLink])};
ja.prototype.initTypeOptions=function(){var na={page:this.page,item:this.item,i18n:this.i18n,portalUser:this.portalUser,alertError:this.alertError.bind(this)};this.initGeneralSettings();var oa=this.constructTypeOptions(na);this.typeSection=oa=new Y["default"](w.__assign(w.__assign({},na),{sectionId:"settings-options",sectionTitle:this.item.displayName,options:oa}),this.domNode.querySelector(".js-type-section"));this.item.supportsOffline&&new Y["default"](w.__assign(w.__assign({},na),{sectionId:"settings-offline",
sectionTitle:this.i18n.itemProperties.offline,options:[new ia["default"](na)]}),this.offlineSection);oa.allOptionsHidden()&&d["default"].hideNode(this.typeOptionsLink)};ja.prototype.initGeneralSettings=function(){var na={page:this.page,item:this.item,i18n:this.i18n,portalUser:this.portalUser,alertError:this.alertError.bind(this)},oa=this.constructGeneralOptions(na);new T["default"](w.__assign(w.__assign({},na),{sectionId:"settings-general",sectionTitle:this.i18n.itemProperties.general,options:oa}),
this.generalSection);0===oa.length&&d["default"].hideNode(this.generalOptionsLink)};ja.prototype.constructGeneralOptions=function(na){var oa,ra=[],ua=!e["default"].includes(this.item.typeKeywords,"EditExtensionIndoorsSpaces");this.page.sublayer||(ra.push(new x["default"](na)),this.item.canUpdate&&(e["default"].includes([da.Layer,da.Map,da.App],this.item.classification)?(ua&&ra.push(new I["default"](na)),this.item.classification===da.Layer&&this.item.isHostedService&&(this.item.type===M.SceneService&&
(null===(oa=this.item.sourceData)||void 0===oa?void 0:oa.type)!==M.FeatureService&&(oa=new J["default"](na),oa.set("minimalUI",!0),ra.push(oa)),this.item.type===M.ImageService&&ra.push(new O["default"](na)))):this.item.classification===da.File&&e["default"].includes([M.ArcGISProAddIn,M.AppBuilderWidgetPackage,M.RulePackage],this.item.type)&&ua&&ra.push(new I["default"](na))),this.item.type===M.MobileMapPackage&&ra.push(new N["default"](na)));return ra};ja.prototype.constructTypeOptions=function(na){var oa,
ra,ua=da.Layer,wa=da.Map,Ba=da.App,Da=da.File,La=da.Notebook,Ga=da.DataStore,xa=da.Solution;ua=(oa={},oa[ua]=this.getLayerOptions.bind(this),oa[wa]=this.getMapOptions.bind(this),oa[Ba]=this.getAppOptions.bind(this),oa[Da]=this.getFileOptions.bind(this),oa[La]=this.getNotebookOptions.bind(this),oa[Ga]=this.getDataStoreOptions.bind(this),oa[xa]=this.getSolutionOptions.bind(this),oa);return this.item.canUpdate&&(null===(ra=ua[this.item.classification])||void 0===ra?void 0:ra.call(ua,na))||[]};ja.prototype.getLayerOptions=
function(na){var oa,ra,ua=this.item.typeKeywords,wa=[];this.item.isServiceProxy?(-1===this.item.typeKeywords.indexOf(U.GeocodingFilter)&&(wa.push(new D["default"](na)),this.page.portal.isPortal||wa.push(new X["default"](na))),this.item.type===M.GeocodingService&&-1!==this.item.typeKeywords.indexOf(U.GeocodingFilter)&&wa.push(new E["default"](na)),-1===this.item.typeKeywords.indexOf(U.GeocodingFilter)&&wa.push(new A["default"](na))):this.item.isHostedService?(this.item.type===M.KnowledgeGraph&&wa.push(new aa["default"](na)),
this.item.type===M.SceneService&&(null===(oa=this.item.sourceData)||void 0===oa?void 0:oa.type)===M.FeatureService&&wa.push(new J["default"](na)),this.item.type!==M.FeatureService||this.item.isLocationTrackingService)?e["default"].includes([M.MapService,M.VectorTileService,M.ImageService],this.item.type)&&!e["default"].includes(this.item.typeKeywords,U.SpatioTemporal)&&(oa=!this.page.portal.isPortal&&this.item.type===M.ImageService&&(null===(ra=this.item.sourceData)||void 0===ra?void 0:ra.type)===
M.TilePackage,(this.item.type!==M.ImageService||oa)&&wa.push(new L["default"](na)),this.item.type!==M.ImageService||e["default"].includesSome(this.item.typeKeywords,[U.Elevation3DLayer,U.TiledImagery])||wa.push(new R["default"](na))):(e["default"].includes(this.item.typeKeywords,U.ViewService)&&(this.item.canEditService&&wa.push(new ea["default"](na)),wa.push(new y["default"](na))),wa.push(new H["default"](na))):-1<this.item.typeKeywords.indexOf("ExtractedCache")&&(-1<ua.indexOf("Map Service")||-1<
ua.indexOf("Vector Tile Service"))?wa.push(new L["default"](na)):this.item.isFeatureCollection||(wa.push(new B["default"](na)),this.item.type===M.ImageService&&e["default"].includes(this.item.typeKeywords,U.ManagedImageCollection)&&!e["default"].includesSome(this.item.typeKeywords,[U.Elevation3DLayer,U.TiledImagery])&&wa.push(new R["default"](na)));return wa};ja.prototype.getMapOptions=function(na){var oa=[];this.item.type===M.WebMap&&(oa=[new C["default"](na),new z["default"](na),new P["default"](na)]);
this.item.type===M.WebScene&&(oa=w.__spreadArray(w.__spreadArray([],oa),[new fa["default"](na),new P["default"](na)]));return oa};ja.prototype.getAppOptions=function(na){var oa=[];e["default"].includes([M.WorkforceProject,M.UrbanModel,M.WebExperience,M.WebExperienceTemplate,M.QuickCaptureProject,M.Workflow,M.HubProject,M.HubSiteApplication,M.HubInitiativeTemplate,M.HubEvent,M.HubInitiative,M.HubPage],this.item.type)||e["default"].includes(this.item.types,"is-insights")||(oa=[new B["default"](na),
new F["default"](na)]);return oa};ja.prototype.getFileOptions=function(na){var oa,ra=[],ua=this.portalUser&&(null===(oa=this.item.itemOwner)||void 0===oa?void 0:oa.orgId)===this.portalUser.orgId&&this.page.portal.canListData;this.item.type===M.OperationView||this.item.type===M.Dashboard?ra.push(new C["default"](na)):this.item.type===M.DocumentLink?ra.push(new B["default"](na)):this.item.type===M.ArcGISProAddIn&&ua&&ra.push(new F["default"](na));return ra};ja.prototype.getNotebookOptions=function(na){var oa=
[];k["default"].notebookServerConfigured()&&this.item.type===M.Notebook&&oa.push(new V["default"](na));return oa};ja.prototype.getDataStoreOptions=function(na){var oa=[],ra=this.item.typeKeywords.some(function(wa){return-1<wa.indexOf("cloudStore")}),ua=this.item.typeKeywords.some(function(wa){return-1<wa.indexOf("Neo4J")});this.item.type===M.DataStore&&e["default"].includes(this.item.typeKeywords,U.Folder)?oa.push(new ka["default"](na)):this.item.type===M.DataStore&&e["default"].includes(this.item.typeKeywords,
U.Egdb)?oa.push(new ba["default"](na)):this.item.type===M.DataStore&&ra?oa.push(new la["default"](na)):this.item.type===M.DataStore&&e["default"].includes(this.item.typeKeywords,U.FileShare)?oa.push(new Z["default"](na)):this.item.type===M.DataStore&&e["default"].includes(this.item.typeKeywords,U.HDFS)?oa.push(new W["default"](na)):this.item.type===M.DataStore&&e["default"].includes(this.item.typeKeywords,U.Hive)?oa.push(new Q["default"](na)):this.item.type===M.DataStore&&ua&&oa.push(new ma["default"](na));
oa.push(new ha["default"](na));return oa};ja.prototype.getSolutionOptions=function(na){var oa=[];oa.push(new S["default"](na));return oa};ja.prototype.alertError=function(na){h["default"].showAlert("error",na)};ja.prototype.destroyDialogs=function(){this.subscriptionStatusDlg&&(this.subscriptionStatusDlg.subscriptionStatusDlg.destroyRecursive(),this.subscriptionStatusDlg.destroyRecursive())};ja.prototype.handleItemErrorStatus=function(){var na=this.item.statusErrorCode;if(400===na||403===na){this.page.hideLoader();
this.domNode.querySelector(".js-invalid-url-error").active=!0;var oa={400:b["default"].arcGISServerServices.error.inaccessible.replace("${title}",this.item.title),403:b["default"].arcGISServerServices.error.notAuthorized};this.domNode.querySelector(".js-invalid-url-message").textContent=oa[na];this.initGeneralSettings();this.addEventHandlers();[this.domNode.querySelector(".js-offline-options"),this.domNode.querySelector(".js-type-options")].forEach(function(ra){return ra.parentNode.removeChild(ra)});
document.querySelector(".tab-content").style.position="initial"}};return ja=w.__decorate([ca["default"](p["default"],q["default"],v["default"],u["default"])],ja)}()});