/*! Storymaps-Shortlist - v2.9.0 - 2022-01-18, 12:52:41 PM - This application is released under the Apache License V2.0 by Esri http://www.esri.com/ - https://github.com/Esri/map-series-storytelling-template-js */function FastClick(e){"use strict";var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,n.hijacked||n,i):r.call(e,t,n,i)},e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}if(define("lib-build/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,i=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(n=parseInt(t[4])<18);var r={};r.pluginBuilder="./css-builder";var a,o=function(){a=document.createElement("style"),e.appendChild(a)},s=function(e,t){o();var n=a.styleSheet||a.sheet;if(n&&n.addImport)n.addImport(e),a.onload=t;else{a.textContent='@import "'+e+'";';var i=setInterval(function(){try{a.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},l=function(t,n){var r=document.createElement("link");if(r.type="text/css",r.rel="stylesheet",i)r.onload=function(){r.onload=function(){},setTimeout(n,7)};else var a=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){if(document.styleSheets[e].href==r.href)return clearInterval(a),n()}},10);r.href=t,e.appendChild(r)};return r.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},r.load=function(e,t,i,r){(n?s:l)(t.toUrl(e+".css"),i)},r}),define("lib-build/css!lib-app/bootstrap/css/bootstrap.min",[],function(){}),define("lib-build/css!storymaps/common/ui/Modal",[],function(){}),define("lib-build/css!storymaps/common/Core",[],function(){}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ae.type(e);return"function"!==n&&!ae.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function i(e,t,n){if(ae.isFunction(t))return ae.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ae.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ae.filter(t,e,n);t=ae.filter(t,e)}return ae.grep(e,function(e){return ae.inArray(e,t)>=0!==n})}function r(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function a(e){var t=we[e]={};return ae.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function o(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(me.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(o(),ae.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(ke,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Se.test(n)?ae.parseJSON(n):n)}catch(e){}ae.data(e,t,n)}else n=void 0}return n}function p(e){var t;for(t in e)if(("data"!==t||!ae.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(ae.acceptData(e)){var r,a,o=ae.expando,s=e.nodeType,l=s?ae.cache:e,p=s?e[o]:e[o]&&o;if(p&&l[p]&&(i||l[p].data)||void 0!==n||"string"!=typeof t)return p||(p=s?e[o]=X.pop()||ae.guid++:o),l[p]||(l[p]=s?{}:{toJSON:ae.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[p]=ae.extend(l[p],t):l[p].data=ae.extend(l[p].data,t)),a=l[p],i||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[ae.camelCase(t)]=n),"string"==typeof t?null==(r=a[t])&&(r=a[ae.camelCase(t)]):r=a,r}}function c(e,t,n){if(ae.acceptData(e)){var i,r,a=e.nodeType,o=a?ae.cache:e,s=a?e[ae.expando]:ae.expando;if(o[s]){if(t&&(i=n?o[s]:o[s].data)){ae.isArray(t)?t=t.concat(ae.map(t,ae.camelCase)):t in i?t=[t]:(t=ae.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!p(i):!ae.isEmptyObject(i))return}(n||(delete o[s].data,p(o[s])))&&(a?ae.cleanData([e],!0):ie.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}function d(){return!0}function f(){return!1}function h(){try{return me.activeElement}catch(e){}}function m(e){var t=Be.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,i,r=0,a=typeof e.getElementsByTagName!==Te?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Te?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||ae.nodeName(i,t)?a.push(i):ae.merge(a,g(i,t));return void 0===t||t&&ae.nodeName(e,t)?ae.merge([e],a):a}function v(e){Le.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==ae.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Ve.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){for(var n,i=0;null!=(n=e[i]);i++)ae._data(n,"globalEval",!t||ae._data(t[i],"globalEval"))}function C(e,t){if(1===t.nodeType&&ae.hasData(e)){var n,i,r,a=ae._data(e),o=ae._data(t,a),s=a.events;if(s){delete o.handle,o.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)ae.event.add(t,n,s[n][i])}o.data&&(o.data=ae.extend({},o.data))}}function T(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ie.noCloneEvent&&t[ae.expando]){r=ae._data(t);for(i in r.events)ae.removeEvent(t,i,r.handle);t.removeAttribute(ae.expando)}"script"===n&&t.text!==e.text?(y(t).text=e.text,w(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ie.html5Clone&&e.innerHTML&&!ae.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Le.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var i=ae(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle?e.getDefaultComputedStyle(i[0]).display:ae.css(i[0],"display");return i.detach(),r}function k(e){var t=me,n=Je[e];return n||(n=S(e,t),"none"!==n&&n||(Ze=(Ze||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ze[0].contentWindow||Ze[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Ze.detach()),Je[e]=n),n}function _(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=dt.length;r--;)if((t=dt[r]+n)in e)return t;return i}function A(e,t){for(var n,i,r,a=[],o=0,s=e.length;s>o;o++)i=e[o],i.style&&(a[o]=ae._data(i,"olddisplay"),n=i.style.display,t?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Ae(i)&&(a[o]=ae._data(i,"olddisplay",k(i.nodeName)))):a[o]||(r=Ae(i),(n&&"none"!==n||!r)&&ae._data(i,"olddisplay",r?n:ae.css(i,"display"))));for(o=0;s>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[o]||"":"none"));return e}function I(e,t,n){var i=lt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function L(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=ae.css(e,n+Ee[a],!0,r)),i?("content"===n&&(o-=ae.css(e,"padding"+Ee[a],!0,r)),"margin"!==n&&(o-=ae.css(e,"border"+Ee[a]+"Width",!0,r))):(o+=ae.css(e,"padding"+Ee[a],!0,r),"padding"!==n&&(o+=ae.css(e,"border"+Ee[a]+"Width",!0,r)));return o}function $(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=et(e),o=ie.boxSizing()&&"border-box"===ae.css(e,"boxSizing",!1,a);if(0>=r||null==r){if(r=tt(e,t,a),(0>r||null==r)&&(r=e.style[t]),it.test(r))return r;i=o&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+L(e,t,n||(o?"border":"content"),i,a)+"px"}function D(e,t,n,i,r){return new D.prototype.init(e,t,n,i,r)}function O(){return setTimeout(function(){ft=void 0}),ft=ae.now()}function P(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Ee[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function M(e,t,n){for(var i,r=(yt[t]||[]).concat(yt["*"]),a=0,o=r.length;o>a;a++)if(i=r[a].call(n,t,e))return i}function B(e,t,n){var i,r,a,o,s,l,p,u,c=this,d={},f=e.style,h=e.nodeType&&Ae(e),m=ae._data(e,"fxshow");n.queue||(s=ae._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,ae.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],p=ae.css(e,"display"),u=k(e.nodeName),"none"===p&&(p=u),"inline"===p&&"none"===ae.css(e,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==u?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ie.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],mt.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;h=!0}d[i]=m&&m[i]||ae.style(e,i)}if(!ae.isEmptyObject(d)){m?"hidden"in m&&(h=m.hidden):m=ae._data(e,"fxshow",{}),a&&(m.hidden=!h),h?ae(e).show():c.done(function(){ae(e).hide()}),c.done(function(){var t;ae._removeData(e,"fxshow");for(t in d)ae.style(e,t,d[t])});for(i in d)o=M(h?m[i]:0,i,c),i in m||(m[i]=o.start,h&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function R(e,t){var n,i,r,a,o;for(n in e)if(i=ae.camelCase(n),r=t[i],a=e[n],ae.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(o=ae.cssHooks[i])&&"expand"in o){a=o.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=r)}else t[i]=r}function z(e,t,n){var i,r,a=0,o=bt.length,s=ae.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ft||O(),n=Math.max(0,p.startTime+p.duration-t),i=n/p.duration||0,a=1-i,o=0,l=p.tweens.length;l>o;o++)p.tweens[o].run(a);return s.notifyWith(e,[p,a,n]),1>a&&l?n:(s.resolveWith(e,[p]),!1)},p=s.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ft||O(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ae.Tween(e,p.opts,t,n,p.opts.specialEasing[t]||p.opts.easing);return p.tweens.push(i),i},stop:function(t){var n=0,i=t?p.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)p.tweens[n].run(1);return t?s.resolveWith(e,[p,t]):s.rejectWith(e,[p,t]),this}}),u=p.props;for(R(u,p.opts.specialEasing);o>a;a++)if(i=bt[a].call(p,e,u,p.opts))return i;return ae.map(u,M,p),ae.isFunction(p.opts.start)&&p.opts.start.call(e,p),ae.fx.timer(ae.extend(l,{elem:e,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}function j(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(ye)||[];if(ae.isFunction(n))for(;i=a[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function N(e,t,n,i){function r(s){var l;return a[s]=!0,ae.each(e[s]||[],function(e,s){var p=s(t,n,i);return"string"!=typeof p||o||a[p]?o?!(l=p):void 0:(t.dataTypes.unshift(p),r(p),!1)}),l}var a={},o=e===Ft;return r(t.dataTypes[0])||!a["*"]&&r("*")}function H(e,t){var n,i,r=ae.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&ae.extend(!0,e,n),e}function W(e,t,n){for(var i,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}i||(i=o)}a=a||i}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}function F(e,t,n,i){var r,a,o,s,l,p={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)p[o.toLowerCase()]=e.converters[o];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=p[l+" "+a]||p["* "+a]))for(r in p)if(s=r.split(" "),s[1]===a&&(o=p[l+" "+s[0]]||p["* "+s[0]])){!0===o?o=p[r]:!0!==p[r]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function U(e,t,n,i){var r;if(ae.isArray(t))ae.each(t,function(t,r){n||qt.test(e)?i(e,r):U(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==ae.type(t))i(e,t);else for(r in t)U(e+"["+r+"]",t[r],n,i)}function G(){try{return new e.XMLHttpRequest}catch(e){}}function q(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(e){return ae.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var X=[],Y=X.slice,K=X.concat,Q=X.push,Z=X.indexOf,J={},ee=J.toString,te=J.hasOwnProperty,ne="".trim,ie={},re="1.11.0",ae=function(e,t){return new ae.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:re,constructor:ae,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ae.each(this,e,t)},map:function(e){return this.pushStack(ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:X.sort,splice:X.splice},ae.extend=ae.fn.extend=function(){var e,t,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,p=!1;for("boolean"==typeof o&&(p=o,o=arguments[s]||{},s++),"object"==typeof o||ae.isFunction(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(r=arguments[s]))for(i in r)e=o[i],n=r[i],o!==n&&(p&&n&&(ae.isPlainObject(n)||(t=ae.isArray(n)))?(t?(t=!1,a=e&&ae.isArray(e)?e:[]):a=e&&ae.isPlainObject(e)?e:{},o[i]=ae.extend(p,a,n)):void 0!==n&&(o[i]=n));return o},ae.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray||function(e){return"array"===ae.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ie.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ae.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(se,"ms-").replace(le,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r=0,a=e.length,o=n(e);if(i){if(o)for(;a>r&&!1!==t.apply(e[r],i);r++);else for(r in e)if(!1===t.apply(e[r],i))break}else if(o)for(;a>r&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:ne&&!ne.call("\ufeff ")?function(e){return null==e?"":ne.call(e)}:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ae.merge(i,"string"==typeof e?[e]:e):Q.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(Z)return Z.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,o=!n;a>r;r++)!t(e[r],r)!==o&&i.push(e[r]);return i},map:function(e,t,i){var r,a=0,o=e.length,s=n(e),l=[];if(s)for(;o>a;a++)null!=(r=t(e[a],a,i))&&l.push(r);else for(a in e)null!=(r=t(e[a],a,i))&&l.push(r);return K.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),ae.isFunction(e)?(n=Y.call(arguments,2),i=function(){return e.apply(t||this,n.concat(Y.call(arguments)))},i.guid=e.guid=e.guid||ae.guid++,i):void 0},now:function(){return+new Date},support:ie}),ae.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,i){var r,a,o,s,p,d,f,h,m,g;if((t?t.ownerDocument||t:z)!==L&&I(t),t=t||L,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(D&&!i){if(r=ge.exec(e))if(o=r[1]){if(9===s){if(!(a=t.getElementById(o))||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&B(t,a)&&a.id===o)return n.push(a),n}else{if(r[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=r[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(x.qsa&&(!O||!O.test(e))){if(h=f=R,m=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(d=u(e),(f=t.getAttribute("id"))?h=f.replace(be,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",p=d.length;p--;)d[p]=h+c(d[p]);m=ve.test(e)&&l(t.parentNode)||t,g=d.join(",")}if(g)try{return Q.apply(n,m.querySelectorAll(g)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return y(e.replace(oe,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function r(e){var t=L.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return i(function(t){return t=+t,i(function(n,i){for(var r,a=e([],n.length,t),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function l(e){return e&&typeof e.getElementsByTagName!==G&&e}function p(){}function u(e,n){var i,r,a,o,s,l,p,u=W[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],p=C.preFilter;s;){(!i||(r=se.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=le.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(oe," ")}),s=s.slice(i.length));for(o in C.filter)!(r=de[o].exec(s))||p[o]&&!(r=p[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):W(e,l).slice(0)}function c(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,r=n&&"parentNode"===i,a=N++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,a)}:function(t,n,o){var s,l,p=[j,a];if(o){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[R]||(t[R]={}),(s=l[i])&&s[0]===j&&s[1]===a)return p[2]=s[2];if(l[i]=p,p[2]=e(t,n,o))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function h(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,p=null!=t;l>s;s++)(a=e[s])&&(!n||n(a,i,r))&&(o.push(a),p&&t.push(s));return o}function m(e,t,n,r,a,o){return r&&!r[R]&&(r=m(r)),a&&!a[R]&&(a=m(a,o)),i(function(i,o,s,l){var p,u,c,d=[],f=[],m=o.length,g=i||b(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?g:h(g,d,e,s,l),y=n?a||(i?e:m||r)?[]:o:v;if(n&&n(v,y,s,l),r)for(p=h(y,f),r(p,[],s,l),u=p.length;u--;)(c=p[u])&&(y[f[u]]=!(v[f[u]]=c));if(i){if(a||e){if(a){for(p=[],u=y.length;u--;)(c=y[u])&&p.push(v[u]=c);a(null,y=[],p,l)}for(u=y.length;u--;)(c=y[u])&&(p=a?J.call(i,c):d[u])>-1&&(i[p]=!(o[p]=c))}}else y=h(y===o?y.splice(m,y.length):y),a?a(null,o,y,l):Q.apply(o,y)})}function g(e){for(var t,n,i,r=e.length,a=C.relative[e[0].type],o=a||C.relative[" "],s=a?1:0,l=d(function(e){return e===t},o,!0),p=d(function(e){return J.call(t,e)>-1},o,!0),u=[function(e,n,i){return!a&&(i||n!==_)||((t=n).nodeType?l(e,n,i):p(e,n,i))}];r>s;s++)if(n=C.relative[e[s].type])u=[d(f(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;r>i&&!C.relative[e[i].type];i++);return m(s>1&&f(u),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),n,i>s&&g(e.slice(s,i)),r>i&&g(e=e.slice(i)),r>i&&c(e))}u.push(n)}return f(u)}function v(e,n){var r=n.length>0,a=e.length>0,o=function(i,o,s,l,p){var u,c,d,f=0,m="0",g=i&&[],v=[],b=_,y=i||a&&C.find.TAG("*",p),w=j+=null==b?1:Math.random()||.1,x=y.length;for(p&&(_=o!==L&&o);m!==x&&null!=(u=y[m]);m++){if(a&&u){for(c=0;d=e[c++];)if(d(u,o,s)){l.push(u);break}p&&(j=w)}r&&((u=!d&&u)&&f--,i&&g.push(u))}if(f+=m,r&&m!==f){for(c=0;d=n[c++];)d(g,v,o,s);if(i){if(f>0)for(;m--;)g[m]||v[m]||(v[m]=Y.call(l));v=h(v)}Q.apply(l,v),p&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return p&&(j=w,_=b),g};return r?i(o):o}function b(e,n,i){for(var r=0,a=n.length;a>r;r++)t(e,n[r],i);return i}function y(e,t,n,i){var r,a,o,s,p,d=u(e);if(!i&&1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&x.getById&&9===t.nodeType&&D&&C.relative[a[1].type]){if(!(t=(C.find.ID(o.matches[0].replace(ye,we),t)||[])[0]))return n;e=e.slice(a.shift().value.length)}for(r=de.needsContext.test(e)?0:a.length;r--&&(o=a[r],!C.relative[s=o.type]);)if((p=C.find[s])&&(i=p(o.matches[0].replace(ye,we),ve.test(a[0].type)&&l(t.parentNode)||t))){if(a.splice(r,1),!(e=i.length&&c(a)))return Q.apply(n,i),n;break}}return k(e,d)(i,t,!D,n,ve.test(e)&&l(t.parentNode)||t),n}var w,x,C,T,S,k,_,E,A,I,L,$,D,O,P,M,B,R="sizzle"+-new Date,z=e.document,j=0,N=0,H=n(),W=n(),F=n(),U=function(e,t){return e===t&&(A=!0),0},G="undefined",q=1<<31,V={}.hasOwnProperty,X=[],Y=X.pop,K=X.push,Q=X.push,Z=X.slice,J=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ne.replace("w","w#"),re="\\["+te+"*("+ne+")"+te+"*(?:([*^$|!~]?=)"+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+te+"*\\]",ae=":("+ne+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",oe=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),se=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),pe=new RegExp("="+te+"*([^\\]'\"]*?)"+te+"*\\]","g"),ue=new RegExp(ae),ce=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(X=Z.call(z.childNodes),z.childNodes),X[z.childNodes.length].nodeType}catch(e){Q={apply:X.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:z,i=n.defaultView;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,$=n.documentElement,D=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){I()},!1):i.attachEvent&&i.attachEvent("onunload",function(){I()})),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=me.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),x.getById=r(function(e){return $.appendChild(e).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),x.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==G&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(ye,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(ye,we);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=x.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},C.find.CLASS=x.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==G&&D?t.getElementsByClassName(e):void 0},P=[],O=[],(x.qsa=me.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&O.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+te+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(x.matchesSelector=me.test(M=$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector||$.msMatchesSelector))&&r(function(e){x.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),P.push("!=",ae)}),O=O.length&&new RegExp(O.join("|")),P=P.length&&new RegExp(P.join("|")),t=me.test($.compareDocumentPosition),B=t||me.test($.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===z&&B(z,e)?-1:t===n||t.ownerDocument===z&&B(z,t)?1:E?J.call(E,e)-J.call(E,t):0:4&i?-1:1)}:function(e,t){if(e===t)return A=!0,0;var i,r=0,a=e.parentNode,s=t.parentNode,l=[e],p=[t];if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:E?J.call(E,e)-J.call(E,t):0;if(a===s)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)p.unshift(i);for(;l[r]===p[r];)r++;return r?o(l[r],p[r]):l[r]===z?-1:p[r]===z?1:0},n):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&I(e),n=n.replace(pe,"='$1']"),!(!x.matchesSelector||!D||P&&P.test(n)||O&&O.test(n)))try{var i=M.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&I(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&I(e);var n=C.attrHandle[t.toLowerCase()],i=n&&V.call(C.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:x.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(A=!x.detectDuplicates,E=!x.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return E=null,e},T=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=T(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,we),e[3]=(e[4]||e[5]||"").replace(ye,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return de.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&ue.test(n)&&(t=u(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var a=t.attr(r,e);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}
},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var p,u,c,d,f,h,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(g){if(a){for(;m;){for(c=t;c=c[m];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?g.firstChild:g.lastChild],o&&b){for(u=g[R]||(g[R]={}),p=u[e]||[],f=p[0]===j&&p[1],d=p[0]===j&&p[2],c=f&&g.childNodes[f];c=++f&&c&&c[m]||(d=f=0)||h.pop();)if(1===c.nodeType&&++d&&c===t){u[e]=[j,f,d];break}}else if(b&&(p=(t[R]||(t[R]={}))[e])&&p[0]===j)d=p[1];else for(;(c=++f&&c&&c[m]||(d=f=0)||h.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++d||(b&&((c[R]||(c[R]={}))[e]=[j,d]),c!==t)););return(d-=r)===i||d%i==0&&d/i>=0}}},PSEUDO:function(e,n){var r,a=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[R]?a(n):a.length>1?(r=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=a(e,n),o=r.length;o--;)i=J.call(e,r[o]),e[i]=!(t[i]=r[o])}):function(e){return a(e,0,r)}):a}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(oe,"$1"));return r[R]?i(function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:i(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,we).toLowerCase(),function(t){var n;do{if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===$},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[0>n?n+t:n]}),even:s(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:s(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(w);return p.prototype=C.filters=C.pseudos,C.setFilters=new p,k=t.compile=function(e,t){var n,i=[],r=[],a=F[e+" "];if(!a){for(t||(t=u(e)),n=t.length;n--;)a=g(t[n]),a[R]?i.push(a):r.push(a);a=F(e,v(r,i))}return a},x.sortStable=R.split("").sort(U).join("")===R,x.detectDuplicates=!!A,I(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(ee,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);ae.find=ue,ae.expr=ue.selectors,ae.expr[":"]=ae.expr.pseudos,ae.unique=ue.uniqueSort,ae.text=ue.getText,ae.isXMLDoc=ue.isXML,ae.contains=ue.contains;var ce=ae.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ae.find.matchesSelector(i,e)?[i]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;r>t;t++)if(ae.contains(i[t],this))return!0}));for(t=0;r>t;t++)ae.find(e,i[t],n);return n=this.pushStack(r>1?ae.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ce.test(e)?ae(e):e||[],!1).length}});var he,me=e.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ae.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ge.exec(e))||!n[1]&&t)return!t||t.jquery?(t||he).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:me,!0)),de.test(n[1])&&ae.isPlainObject(t))for(n in t)ae.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((i=me.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return he.find(e);this.length=1,this[0]=i}return this.context=me,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?void 0!==he.ready?he.ready(e):e(ae):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))}).prototype=ae.fn,he=ae(me);var ve=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};ae.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!ae(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ae.fn.extend({has:function(e){var t,n=ae(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(ae.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,a=[],o=ce.test(e)||"string"!=typeof e?ae(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&ae.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?ae.unique(a):a)},index:function(e){return e?"string"==typeof e?ae.inArray(this[0],ae(e)):ae.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.unique(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ae.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ae.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return ae.dir(e,"nextSibling")},prevAll:function(e){return ae.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ae.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ae.dir(e,"previousSibling",n)},siblings:function(e){return ae.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ae.sibling(e.firstChild)},contents:function(e){return ae.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(n,i){var r=ae.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ae.filter(i,r)),this.length>1&&(be[e]||(r=ae.unique(r)),ve.test(e)&&(r=r.reverse())),this.pushStack(r)}});var ye=/\S+/g,we={};ae.Callbacks=function(e){e="string"==typeof e?we[e]||a(e):ae.extend({},e);var t,n,i,r,o,s,l=[],p=!e.once&&[],u=function(a){for(n=e.memory&&a,i=!0,o=s||0,s=0,r=l.length,t=!0;l&&r>o;o++)if(!1===l[o].apply(a[0],a[1])&&e.stopOnFalse){n=!1;break}t=!1,l&&(p?p.length&&u(p.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function t(n){ae.each(n,function(n,i){var r=ae.type(i);"function"===r?e.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==r&&t(i)})}(arguments),t?r=l.length:n&&(s=i,u(n))}return this},remove:function(){return l&&ae.each(arguments,function(e,n){for(var i;(i=ae.inArray(n,l,i))>-1;)l.splice(i,1),t&&(r>=i&&r--,o>=i&&o--)}),this},has:function(e){return e?ae.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=p=n=void 0,this},disabled:function(){return!l},lock:function(){return p=void 0,n||c.disable(),this},locked:function(){return!p},fireWith:function(e,n){return!l||i&&!p||(n=n||[],n=[e,n.slice?n.slice():n],t?p.push(n):u(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(n){ae.each(t,function(t,a){var o=ae.isFunction(e[t])&&e[t];r[a[1]](function(){var e=o&&o.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ae.extend(e,i):i}},r={};return i.pipe=i.then,ae.each(t,function(e,a){var o=a[2],s=a[3];i[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,a=Y.call(arguments),o=a.length,s=1!==o||e&&ae.isFunction(e.promise)?o:0,l=1===s?e:ae.Deferred(),p=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?Y.call(arguments):r,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)a[r]&&ae.isFunction(a[r].promise)?a[r].promise().done(p(r,i,a)).fail(l.reject).progress(p(r,n,t)):--s;return s||l.resolveWith(i,a),l.promise()}});var xe;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){if(!0===e?!--ae.readyWait:!ae.isReady){if(!me.body)return setTimeout(ae.ready);ae.isReady=!0,!0!==e&&--ae.readyWait>0||(xe.resolveWith(me,[ae]),ae.fn.trigger&&ae(me).trigger("ready").off("ready"))}}}),ae.ready.promise=function(t){if(!xe)if(xe=ae.Deferred(),"complete"===me.readyState)setTimeout(ae.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{me.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&me.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!ae.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}o(),ae.ready()}}()}return xe.promise(t)};var Ce,Te="undefined";for(Ce in ae(ie))break;ie.ownLast="0"!==Ce,ie.inlineBlockNeedsLayout=!1,ae(function(){var e,t,n=me.getElementsByTagName("body")[0];n&&(e=me.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=me.createElement("div"),n.appendChild(e).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(ie.inlineBlockNeedsLayout=3===t.offsetWidth)&&(n.style.zoom=1)),n.removeChild(e),e=t=null)}),function(){var e=me.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(e){ie.deleteExpando=!1}}e=null}(),ae.acceptData=function(e){var t=ae.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/([A-Z])/g;ae.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ae.cache[e[ae.expando]]:e[ae.expando])&&!p(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return c(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return c(e,t,!0)}}),ae.fn.extend({data:function(e,t){var n,i,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=ae.data(a),1===a.nodeType&&!ae._data(a,"parsedAttrs"))){for(n=o.length;n--;)i=o[n].name,0===i.indexOf("data-")&&(i=ae.camelCase(i.slice(5)),l(a,i,r[i]));ae._data(a,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ae.data(this,e)}):arguments.length>1?this.each(function(){ae.data(this,e,t)}):a?l(a,e,ae.data(a,e)):void 0},removeData:function(e){return this.each(function(){ae.removeData(this,e)})}}),ae.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ae._data(e,t),n&&(!i||ae.isArray(n)?i=ae._data(e,t,ae.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),i=n.length,r=n.shift(),a=ae._queueHooks(e,t),o=function(){ae.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae._data(e,n)||ae._data(e,n,{empty:ae.Callbacks("once memory").add(function(){ae._removeData(e,t+"queue"),ae._removeData(e,n)})})}}),ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=ae.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=ae._data(a[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},Ie=ae.access=function(e,t,n,i,r,a,o){var s=0,l=e.length,p=null==n;if("object"===ae.type(n)){r=!0;for(s in n)ae.access(e,t,s,n[s],!0,a,o)}else if(void 0!==i&&(r=!0,ae.isFunction(i)||(o=!0),p&&(o?(t.call(e,i),t=null):(p=t,t=function(e,t,n){return p.call(ae(e),n)})),t))for(;l>s;s++)t(e[s],n,o?i:i.call(e[s],s,t(e[s],n)));return r?e:p?t.call(e):l?t(e[0],n):a},Le=/^(?:checkbox|radio)$/i;!function(){var e=me.createDocumentFragment(),t=me.createElement("div"),n=me.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",ie.leadingWhitespace=3===t.firstChild.nodeType,ie.tbody=!t.getElementsByTagName("tbody").length,ie.htmlSerialize=!!t.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),ie.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ie.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}e=t=n=null}(),function(){var t,n,i=me.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ie[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),ie[t+"Bubbles"]=!1===i.attributes[n].expando);i=null}();var $e=/^(?:input|select|textarea)$/i,De=/^key/,Oe=/^(?:mouse|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,Me=/^([^.]*)(?:\.(.+)|)$/;ae.event={global:{},add:function(e,t,n,i,r){var a,o,s,l,p,u,c,d,f,h,m,g=ae._data(e);if(g){for(n.handler&&(l=n,n=l.handler,r=l.selector),n.guid||(n.guid=ae.guid++),(o=g.events)||(o=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof ae===Te||e&&ae.event.triggered===e.type?void 0:ae.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(ye)||[""],s=t.length;s--;)a=Me.exec(t[s])||[],f=m=a[1],h=(a[2]||"").split(".").sort(),f&&(p=ae.event.special[f]||{},f=(r?p.delegateType:p.bindType)||f,p=ae.event.special[f]||{},c=ae.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ae.expr.match.needsContext.test(r),namespace:h.join(".")},l),(d=o[f])||(d=o[f]=[],d.delegateCount=0,p.setup&&!1!==p.setup.call(e,i,h,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),ae.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var a,o,s,l,p,u,c,d,f,h,m,g=ae.hasData(e)&&ae._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ye)||[""],p=t.length;p--;)if(s=Me.exec(t[p])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(c=ae.event.special[f]||{},f=(i?c.delegateType:c.bindType)||f,d=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=d.length;a--;)o=d[a],!r&&m!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(d.splice(a,1),o.selector&&d.delegateCount--,c.remove&&c.remove.call(e,o));l&&!d.length&&(c.teardown&&!1!==c.teardown.call(e,h,g.handle)||ae.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)ae.event.remove(e,f+t[p],n,i,!0);ae.isEmptyObject(u)&&(delete g.handle,ae._removeData(e,"events"))}},trigger:function(t,n,i,r){var a,o,s,l,p,u,c,d=[i||me],f=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(s=u=i=i||me,3!==i.nodeType&&8!==i.nodeType&&!Pe.test(f+ae.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),o=f.indexOf(":")<0&&"on"+f,t=t[ae.expando]?t:new ae.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:ae.makeArray(n,[t]),p=ae.event.special[f]||{},r||!p.trigger||!1!==p.trigger.apply(i,n))){if(!r&&!p.noBubble&&!ae.isWindow(i)){for(l=p.delegateType||f,Pe.test(l+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),u=s;u===(i.ownerDocument||me)&&d.push(u.defaultView||u.parentWindow||e)}for(c=0;(s=d[c++])&&!t.isPropagationStopped();)t.type=c>1?l:p.bindType||f,a=(ae._data(s,"events")||{})[t.type]&&ae._data(s,"handle"),a&&a.apply(s,n),(a=o&&s[o])&&a.apply&&ae.acceptData(s)&&(t.result=a.apply(s,n),!1===t.result&&t.preventDefault());if(t.type=f,!r&&!t.isDefaultPrevented()&&(!p._default||!1===p._default.apply(d.pop(),n))&&ae.acceptData(i)&&o&&i[f]&&!ae.isWindow(i)){u=i[o],u&&(i[o]=null),ae.event.triggered=f;try{i[f]()}catch(e){}ae.event.triggered=void 0,u&&(i[o]=u)}return t.result}},dispatch:function(e){e=ae.event.fix(e);var t,n,i,r,a,o=[],s=Y.call(arguments),l=(ae._data(this,"events")||{})[e.type]||[],p=ae.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!p.preDispatch||!1!==p.preDispatch.call(this,e)){for(o=ae.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(i=r.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,void 0!==(n=((ae.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],a=0;s>a;a++)i=t[a],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?ae(n,this).index(l)>=0:ae.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},fix:function(e){if(e[ae.expando])return e;var t,n,i,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Oe.test(r)?this.mouseHooks:De.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new ae.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=a.srcElement||me),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||me,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ae.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=ae.extend(new ae.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ae.event.trigger(r,null,t):ae.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},ae.removeEvent=me.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Te&&(e[i]=null),e.detachEvent(i,n))},ae.Event=function(e,t){return this instanceof ae.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault())?d:f):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),void(this[ae.expando]=!0)):new ae.Event(e,t)},ae.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d,this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return(!r||r!==i&&!ae.contains(i,r))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),ie.submitBubbles||(ae.event.special.submit={setup:function(){return!ae.nodeName(this,"form")&&void ae.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ae.nodeName(t,"input")||ae.nodeName(t,"button")?t.form:void 0;n&&!ae._data(n,"submitBubbles")&&(ae.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ae._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ae.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!ae.nodeName(this,"form")&&void ae.event.remove(this,"._submit")}}),ie.changeBubbles||(ae.event.special.change={setup:function(){return $e.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ae.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ae.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ae.event.simulate("change",this,e,!0)})),!1):void ae.event.add(this,"beforeactivate._change",function(e){var t=e.target;$e.test(t.nodeName)&&!ae._data(t,"changeBubbles")&&(ae.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ae.event.simulate("change",this.parentNode,e,!0)}),ae._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ae.event.remove(this,"._change"),!$e.test(this.nodeName)}}),ie.focusinBubbles||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ae.event.simulate(t,e.target,ae.event.fix(e),!0)};ae.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ae._data(i,t);r||i.addEventListener(e,n,!0),ae._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ae._data(i,t)-1;r?ae._data(i,t,r):(i.removeEventListener(e,n,!0),ae._removeData(i,t))}}}),ae.fn.extend({on:function(e,t,n,i,r){var a,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=f;else if(!i)return this;return 1===r&&(o=i,i=function(e){return ae().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=ae.guid++)),this.each(function(){ae.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ae(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=f),this.each(function(){ae.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ae.event.trigger(e,t,n,!0):void 0}});var Be="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,ze=new RegExp("<(?:"+Be+")[\\s/>]","i"),je=/^\s+/,Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,We=/<tbody/i,Fe=/<|&#?\w+;/,Ue=/<(?:script|style|link)/i,Ge=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^$|\/(?:java|ecma)script/i,Ve=/^true\/(.*)/,Xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ke=m(me),Qe=Ke.appendChild(me.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,ae.extend({clone:function(e,t,n){var i,r,a,o,s,l=ae.contains(e.ownerDocument,e);if(ie.html5Clone||ae.isXMLDoc(e)||!ze.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Qe.innerHTML=e.outerHTML,Qe.removeChild(a=Qe.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(i=g(a),s=g(e),o=0;null!=(r=s[o]);++o)i[o]&&T(r,i[o]);if(t)if(n)for(s=s||g(e),i=i||g(a),o=0;null!=(r=s[o]);o++)C(r,i[o]);else C(e,a);return i=g(a,"script"),i.length>0&&x(i,!l&&g(e,"script")),i=s=r=null,a},buildFragment:function(e,t,n,i){for(var r,a,o,s,l,p,u,c=e.length,d=m(t),f=[],h=0;c>h;h++)if((a=e[h])||0===a)if("object"===ae.type(a))ae.merge(f,a.nodeType?[a]:a);else if(Fe.test(a)){for(s=s||d.appendChild(t.createElement("div")),l=(He.exec(a)||["",""])[1].toLowerCase(),u=Ye[l]||Ye._default,s.innerHTML=u[1]+a.replace(Ne,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!ie.leadingWhitespace&&je.test(a)&&f.push(t.createTextNode(je.exec(a)[0])),!ie.tbody)for(a="table"!==l||We.test(a)?"<table>"!==u[1]||We.test(a)?0:s:s.firstChild,r=a&&a.childNodes.length;r--;)ae.nodeName(p=a.childNodes[r],"tbody")&&!p.childNodes.length&&a.removeChild(p);for(ae.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else f.push(t.createTextNode(a));for(s&&d.removeChild(s),ie.appendChecked||ae.grep(g(f,"input"),v),h=0;a=f[h++];)if((!i||-1===ae.inArray(a,i))&&(o=ae.contains(a.ownerDocument,a),s=g(d.appendChild(a),"script"),o&&x(s),n))for(r=0;a=s[r++];)qe.test(a.type||"")&&n.push(a);return s=null,d},cleanData:function(e,t){for(var n,i,r,a,o=0,s=ae.expando,l=ae.cache,p=ie.deleteExpando,u=ae.event.special;null!=(n=e[o]);o++)if((t||ae.acceptData(n))&&(r=n[s],a=r&&l[r])){if(a.events)for(i in a.events)u[i]?ae.event.remove(n,i):ae.removeEvent(n,i,a.handle);l[r]&&(delete l[r],p?delete n[s]:typeof n.removeAttribute!==Te?n.removeAttribute(s):n[s]=null,X.push(r))}}}),ae.fn.extend({text:function(e){return Ie(this,function(e){return void 0===e?ae.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){b(this,e).appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=b(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ae.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||ae.cleanData(g(n)),n.parentNode&&(t&&ae.contains(n.ownerDocument,n)&&x(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ae.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ae.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return Ie(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Re,""):void 0
;if(!("string"!=typeof e||Ue.test(e)||!ie.htmlSerialize&&ze.test(e)||!ie.leadingWhitespace&&je.test(e)||Ye[(He.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ne,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(ae.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ae.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var n,i,r,a,o,s,l=0,p=this.length,u=this,c=p-1,d=e[0],f=ae.isFunction(d);if(f||p>1&&"string"==typeof d&&!ie.checkClone&&Ge.test(d))return this.each(function(n){var i=u.eq(n);f&&(e[0]=d.call(this,n,i.html())),i.domManip(e,t)});if(p&&(s=ae.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(a=ae.map(g(s,"script"),y),r=a.length;p>l;l++)i=s,l!==c&&(i=ae.clone(i,!0,!0),r&&ae.merge(a,g(i,"script"))),t.call(this[l],i,l);if(r)for(o=a[a.length-1].ownerDocument,ae.map(a,w),l=0;r>l;l++)i=a[l],qe.test(i.type||"")&&!ae._data(i,"globalEval")&&ae.contains(o,i)&&(i.src?ae._evalUrl&&ae._evalUrl(i.src):ae.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xe,"")));s=n=null}return this}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var n,i=0,r=[],a=ae(e),o=a.length-1;o>=i;i++)n=i===o?this:this.clone(!0),ae(a[i])[t](n),Q.apply(r,n.get());return this.pushStack(r)}});var Ze,Je={};!function(){var e,t,n=me.createElement("div");n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",ie.opacity=/^0.5/.test(e.style.opacity),ie.cssFloat=!!e.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===n.style.backgroundClip,e=n=null,ie.shrinkWrapBlocks=function(){var e,n,i;if(null==t){if(!(e=me.getElementsByTagName("body")[0]))return;"border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=me.createElement("div"),i=me.createElement("div"),e.appendChild(n).appendChild(i),t=!1,typeof i.style.zoom!==Te&&(i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0;width:1px;padding:1px;zoom:1",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t=3!==i.offsetWidth),e.removeChild(n),e=n=i=null}return t}}();var et,tt,nt=/^margin/,it=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),rt=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tt=function(e,t,n){var i,r,a,o,s=e.style;return n=n||et(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||ae.contains(e.ownerDocument,e)||(o=ae.style(e,t)),it.test(o)&&nt.test(t)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0===o?o:o+""}):me.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var i,r,a,o,s=e.style;return n=n||et(e),o=n?n[t]:void 0,null==o&&s&&s[t]&&(o=s[t]),it.test(o)&&!rt.test(t)&&(i=s.left,r=e.runtimeStyle,a=r&&r.left,a&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=i,a&&(r.left=a)),void 0===o?o:o+""||"auto"}),!function(){function t(){var t,n,i=me.getElementsByTagName("body")[0];i&&(t=me.createElement("div"),n=me.createElement("div"),t.style.cssText=p,i.appendChild(t).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",ae.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){r=4===n.offsetWidth}),a=!0,o=!1,s=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(n,null)||{}).top,a="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width),i.removeChild(t),n=i=null)}var n,i,r,a,o,s,l=me.createElement("div"),p="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=l.getElementsByTagName("a")[0],n.style.cssText="float:left;opacity:.5",ie.opacity=/^0.5/.test(n.style.opacity),ie.cssFloat=!!n.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===l.style.backgroundClip,n=l=null,ae.extend(ie,{reliableHiddenOffsets:function(){if(null!=i)return i;var e,t,n,r=me.createElement("div"),a=me.getElementsByTagName("body")[0];return a?(r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=me.createElement("div"),e.style.cssText=p,a.appendChild(e).appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=r.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",i=n&&0===t[0].offsetHeight,a.removeChild(e),r=a=null,i):void 0},boxSizing:function(){return null==r&&t(),r},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){var t,n,i,r;if(null==s&&e.getComputedStyle){if(!(t=me.getElementsByTagName("body")[0]))return;n=me.createElement("div"),i=me.createElement("div"),n.style.cssText=p,t.appendChild(n).appendChild(i),r=i.appendChild(me.createElement("div")),r.style.cssText=i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0",r.style.marginRight=r.style.width="0",i.style.width="1px",s=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight),t.removeChild(n)}return s}})}(),ae.swap=function(e,t,n,i){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];r=n.apply(e,i||[]);for(a in t)e.style[a]=o[a];return r};var at=/alpha\([^)]*\)/i,ot=/opacity\s*=\s*([^)]*)/,st=/^(none|table(?!-c[ea]).+)/,lt=new RegExp("^("+_e+")(.*)$","i"),pt=new RegExp("^([+-])=("+_e+")","i"),ut={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:0,fontWeight:400},dt=["Webkit","O","Moz","ms"];ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ie.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=ae.camelCase(t),l=e.style;if(t=ae.cssProps[s]||(ae.cssProps[s]=E(l,s)),o=ae.cssHooks[t]||ae.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t];if(a=typeof n,"string"===a&&(r=pt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(ae.css(e,t)),a="number"),null!=n&&n===n&&("number"!==a||ae.cssNumber[s]||(n+="px"),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,i)))))try{l[t]="",l[t]=n}catch(e){}}},css:function(e,t,n,i){var r,a,o,s=ae.camelCase(t);return t=ae.cssProps[s]||(ae.cssProps[s]=E(e.style,s)),o=ae.cssHooks[t]||ae.cssHooks[s],o&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=tt(e,t,i)),"normal"===a&&t in ct&&(a=ct[t]),""===n||n?(r=parseFloat(a),!0===n||ae.isNumeric(r)?r||0:a):a}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&st.test(ae.css(e,"display"))?ae.swap(e,ut,function(){return $(e,t,i)}):$(e,t,i):void 0},set:function(e,n,i){var r=i&&et(e);return I(e,n,i?L(e,t,i,ie.boxSizing()&&"border-box"===ae.css(e,"boxSizing",!1,r),r):0)}}}),ie.opacity||(ae.cssHooks.opacity={get:function(e,t){return ot.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=ae.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ae.trim(a.replace(at,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=at.test(a)?a.replace(at,r):a+" "+r)}}),ae.cssHooks.marginRight=_(ie.reliableMarginRight,function(e,t){return t?ae.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ee[i]+t]=a[i]||a[i-2]||a[0];return r}},nt.test(e)||(ae.cssHooks[e+t].set=I)}),ae.fn.extend({css:function(e,t){return Ie(this,function(e,t,n){var i,r,a={},o=0;if(ae.isArray(t)){for(i=et(e),r=t.length;r>o;o++)a[t[o]]=ae.css(e,t[o],!1,i);return a}return void 0!==n?ae.style(e,t,n):ae.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=D,D.prototype={constructor:D,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(ae.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.pos=t=this.options.duration?ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ae.cssProps[e.prop]]||ae.cssHooks[e.prop])?ae.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ae.fx=D.prototype.init,ae.fx.step={};var ft,ht,mt=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),vt=/queueHooks$/,bt=[B],yt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=gt.exec(t),a=r&&r[3]||(ae.cssNumber[e]?"":"px"),o=(ae.cssNumber[e]||"px"!==a&&+i)&&gt.exec(ae.css(n.elem,e)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+i||1;do{s=s||".5",o/=s,ae.style(n.elem,e,o+a)}while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=a,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};ae.Animation=ae.extend(z,{tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),ae.speed=function(e,t,n){var i=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return i.duration=ae.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ae.fx.speeds?ae.fx.speeds[i.duration]:ae.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ae.isFunction(i.old)&&i.old.call(this),i.queue&&ae.dequeue(this,i.queue)},i},ae.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ae.isEmptyObject(e),a=ae.speed(t,n,i),o=function(){var t=z(this,ae.extend({},e),a);(r||ae._data(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=ae.timers,o=ae._data(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&vt.test(r)&&i(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));(t||!n)&&ae.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ae._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=ae.timers,o=i?i.length:0;for(n.finish=!0,ae.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var n=ae.fn[t];ae.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,i,r)}}),ae.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ae.timers=[],ae.fx.tick=function(){var e,t=ae.timers,n=0;for(ft=ae.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ae.fx.stop(),ft=void 0},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){ht||(ht=setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){clearInterval(ht),ht=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(e,t){return e=ae.fx?ae.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r=me.createElement("div");r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=r.getElementsByTagName("a")[0],n=me.createElement("select"),i=n.appendChild(me.createElement("option")),t=r.getElementsByTagName("input")[0],e.style.cssText="top:1px",ie.getSetAttribute="t"!==r.className,ie.style=/top/.test(e.getAttribute("style")),ie.hrefNormalized="/a"===e.getAttribute("href"),ie.checkOn=!!t.value,ie.optSelected=i.selected,ie.enctype=!!me.createElement("form").enctype,n.disabled=!0,ie.optDisabled=!i.disabled,t=me.createElement("input"),t.setAttribute("value",""),ie.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ie.radioValue="t"===t.value,e=t=n=i=r=null}();var wt=/\r/g;ae.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=ae.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,ae(this).val()):e,null==r?r="":"number"==typeof r?r+="":ae.isArray(r)&&(r=ae.map(r,function(e){return null==e?"":e+""})),(t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=ae.valHooks[r.type]||ae.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(wt,""):null==n?"":n)):void 0}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:ae.text(e)}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,o=a?null:[],s=a?r+1:i.length,l=0>r?s:a?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ie.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ae.nodeName(n.parentNode,"optgroup"))){if(t=ae(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=ae.makeArray(t),o=r.length;o--;)if(i=r[o],ae.inArray(ae.valHooks.option.get(i),a)>=0)try{i.selected=n=!0}catch(e){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){return ae.isArray(t)?e.checked=ae.inArray(ae(e).val(),t)>=0:void 0}},ie.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt,Ct,Tt=ae.expr.attrHandle,St=/^(?:checked|selected)$/i,kt=ie.getSetAttribute,_t=ie.input;ae.fn.extend({attr:function(e,t){return Ie(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Te?ae.prop(e,t,n):(1===a&&ae.isXMLDoc(e)||(t=t.toLowerCase(),i=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?Ct:xt)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=ae.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void ae.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(ye);if(a&&1===e.nodeType)for(;n=a[r++];)i=ae.propFix[n]||n,ae.expr.match.bool.test(n)?_t&&kt||!St.test(n)?e[i]=!1:e[ae.camelCase("default-"+n)]=e[i]=!1:ae.attr(e,n,""),e.removeAttribute(kt?n:i)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ct={set:function(e,t,n){return!1===t?ae.removeAttr(e,n):_t&&kt||!St.test(n)?e.setAttribute(!kt&&ae.propFix[n]||n,n):e[ae.camelCase("default-"+n)]=e[n]=!0,n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tt[t]||ae.find.attr;Tt[t]=_t&&kt||!St.test(t)?function(e,t,i){var r,a;return i||(a=Tt[t],Tt[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,Tt[t]=a),r}:function(e,t,n){return n?void 0:e[ae.camelCase("default-"+t)]?t.toLowerCase():null}}),_t&&kt||(ae.attrHooks.value={set:function(e,t,n){return ae.nodeName(e,"input")?void(e.defaultValue=t):xt&&xt.set(e,t,n)}}),kt||(xt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Tt.id=Tt.name=Tt.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},ae.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:xt.set},ae.attrHooks.contenteditable={set:function(e,t,n){xt.set(e,""!==t&&t,n)}},ae.each(["width","height"],function(e,t){ae.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ie.style||(ae.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Et=/^(?:input|select|textarea|button|object)$/i,At=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return Ie(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ae.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),ae.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!ae.isXMLDoc(e),a&&(t=ae.propFix[t]||t,r=ae.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}}}),ie.hrefNormalized||ae.each(["href","src"],function(e,t){ae.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ie.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this}),ie.enctype||(ae.propFix.enctype="encoding");var It=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t,n,i,r,a,o,s=0,l=this.length,p="string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,this.className))});if(p)for(t=(e||"").match(ye)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):" ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o=ae.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,i,r,a,o,s=0,l=this.length,p=0===arguments.length||"string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,this.className))});if(p)for(t=(e||"").match(ye)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):"")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");o=e?ae.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ae.isFunction(e)?function(n){ae(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=ae(this),a=e.match(ye)||[];t=a[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Te||"boolean"===n)&&(this.className&&ae._data(this,"__className__",this.className),this.className=this.className||!1===e?"":ae._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(It," ").indexOf(t)>=0)return!0;return!1}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Lt=ae.now(),$t=/\?/,Dt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ae.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=ae.trim(t+"");return r&&!ae.trim(r.replace(Dt,function(e,t,r,a){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!a-!r,"")}))?Function("return "+r)():ae.error("Invalid JSON: "+t)},ae.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(e){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+t),n};var Ot,Pt,Mt=/#.*$/,Bt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,Nt=/^\/\//,Ht=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wt={},Ft={},Ut="*/".concat("*");try{Pt=location.href}catch(e){Pt=me.createElement("a"),Pt.href="",Pt=Pt.href}Ot=Ht.exec(Pt.toLowerCase())||[],ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pt,type:"GET",isLocal:zt.test(Ot[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,ae.ajaxSettings),t):H(ae.ajaxSettings,e)},ajaxPrefilter:j(Wt),ajaxTransport:j(Ft),ajax:function(e,t){function n(e,t,n,i){var r,u,v,b,w,C=t;2!==y&&(y=2,s&&clearTimeout(s),p=void 0,o=i||"",x.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(b=W(c,x,n)),b=F(c,b,x,r),r?(c.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ae.lastModified[a]=w),(w=x.getResponseHeader("etag"))&&(ae.etag[a]=w)),204===e||"HEAD"===c.type?C="nocontent":304===e?C="notmodified":(C=b.state,u=b.data,v=b.error,r=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(t||C)+"",r?h.resolveWith(d,[u,C,x]):h.rejectWith(d,[x,C,v]),x.statusCode(g),g=void 0,l&&f.trigger(r?"ajaxSuccess":"ajaxError",[x,c,r?u:v]),m.fireWith(d,[x,C]),l&&(f.trigger("ajaxComplete",[x,c]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,a,o,s,l,p,u,c=ae.ajaxSetup({},t),d=c.context||c,f=c.context&&(d.nodeType||d.jquery)?ae(d):ae.event,h=ae.Deferred(),m=ae.Callbacks("once memory"),g=c.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!u)for(u={};t=Rt.exec(o);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return p&&p.abort(t),n(0,t),this}};if(h.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||Pt)+"").replace(Mt,"").replace(Nt,Ot[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=ae.trim(c.dataType||"*").toLowerCase().match(ye)||[""],null==c.crossDomain&&(i=Ht.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===Ot[1]&&i[2]===Ot[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ot[3]||("http:"===Ot[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=ae.param(c.data,c.traditional)),N(Wt,c,t,x),2===y)return x;l=c.global,l&&0==ae.active++&&ae.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!jt.test(c.type),a=c.url,c.hasContent||(c.data&&(a=c.url+=($t.test(a)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=Bt.test(a)?a.replace(Bt,"$1_="+Lt++):a+($t.test(a)?"&":"?")+"_="+Lt++)),c.ifModified&&(ae.lastModified[a]&&x.setRequestHeader("If-Modified-Since",ae.lastModified[a]),ae.etag[a]&&x.setRequestHeader("If-None-Match",ae.etag[a])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Ut+"; q=0.01":""):c.accepts["*"]);for(r in c.headers)x.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(!1===c.beforeSend.call(d,x,c)||2===y))return x.abort();w="abort";for(r in{success:1,error:1,complete:1})x[r](c[r]);if(p=N(Ft,c,t,x)){x.readyState=1,l&&f.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},c.timeout));try{y=1,p.send(v,n)}catch(e){if(!(2>y))throw e;n(-1,e)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,n,i,r){return ae.isFunction(n)&&(r=r||i,i=n,n=void 0),ae.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ae.fn.extend({wrapAll:function(e){if(ae.isFunction(e))return this.each(function(t){ae(this).wrapAll(e.call(this,t))});if(this[0]){var t=ae(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ae.isFunction(e)?function(t){ae(this).wrapInner(e.call(this,t))}:function(){var t=ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(n){ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ae.css(e,"display"))},ae.expr.filters.visible=function(e){return!ae.expr.filters.hidden(e)};var Gt=/%20/g,qt=/\[\]$/,Vt=/\r?\n/g,Xt=/^(?:submit|button|image|reset|file)$/i,Yt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n,i=[],r=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){r(this.name,this.value)});else for(n in e)U(n,e[n],t,r);return i.join("&").replace(Gt,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Yt.test(this.nodeName)&&!Xt.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:ae.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&G()||q()}:G;var Kt=0,Qt={},Zt=ae.ajaxSettings.xhr();e.ActiveXObject&&ae(e).on("unload",function(){for(var e in Qt)Qt[e](void 0,!0)}),ie.cors=!!Zt&&"withCredentials"in Zt,(Zt=ie.ajax=!!Zt)&&ae.ajaxTransport(function(e){if(!e.crossDomain||ie.cors){var t;return{send:function(n,i){var r,a=e.xhr(),o=++Kt;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&a.setRequestHeader(r,n[r]+"");a.send(e.hasContent&&e.data||null),t=function(n,r){var s,l,p;if(t&&(r||4===a.readyState))if(delete Qt[o],t=void 0,a.onreadystatechange=ae.noop,r)4!==a.readyState&&a.abort();else{p={},s=a.status,"string"==typeof a.responseText&&(p.text=a.responseText);try{l=a.statusText}catch(e){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=p.text?200:404}p&&i(s,l,p,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(t):a.onreadystatechange=Qt[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=me.head||ae("head")[0]||me.documentElement;return{send:function(i,r){t=me.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Jt=[],en=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||ae.expando+"_"+Lt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,n,i){var r,a,o,s=!1!==t.jsonp&&(en.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(t.data)&&"data")
;return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(en,"$1"+r):!1!==t.jsonp&&(t.url+=($t.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||ae.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},i.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,Jt.push(r)),o&&ae.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),ae.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||me;var i=de.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=ae.buildFragment([e],t,r),r&&r.length&&ae(r).remove(),ae.merge([],i.childNodes))};var tn=ae.fn.load;ae.fn.load=function(e,t,n){if("string"!=typeof e&&tn)return tn.apply(this,arguments);var i,r,a,o=this,s=e.indexOf(" ");return s>=0&&(i=e.slice(s,e.length),e=e.slice(0,s)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&ae.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){r=arguments,o.html(i?ae("<div>").append(ae.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){o.each(n,r||[e.responseText,t,e])}),this},ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length};var nn=e.document.documentElement;ae.offset={setOffset:function(e,t,n){var i,r,a,o,s,l,p,u=ae.css(e,"position"),c=ae(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=ae.css(e,"top"),l=ae.css(e,"left"),p=("absolute"===u||"fixed"===u)&&ae.inArray("auto",[a,l])>-1,p?(i=c.position(),o=i.top,r=i.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):c.css(d)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(t=a.documentElement,ae.contains(t,r)?(typeof r.getBoundingClientRect!==Te&&(i=r.getBoundingClientRect()),n=V(a),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===ae.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ae.nodeName(e[0],"html")||(n=e.offset()),n.top+=ae.css(e[0],"borderTopWidth",!0),n.left+=ae.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ae.css(i,"marginTop",!0),left:t.left-n.left-ae.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||nn;e&&!ae.nodeName(e,"html")&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||nn})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ae.fn[e]=function(i){return Ie(this,function(e,i,r){var a=V(e);return void 0===r?a?t in a?a[t]:a.document.documentElement[i]:e[i]:void(a?a.scrollTo(n?ae(a).scrollLeft():r,n?r:ae(a).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=_(ie.pixelPosition,function(e,n){return n?(n=tt(e,t),it.test(n)?ae(e).position()[t]+"px":n):void 0})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ae.fn[i]=function(i,r){var a=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===r?"margin":"border");return Ie(this,function(t,n,i){var r;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?ae.css(t,n,o):ae.style(t,n,i,o)},t,a?i:void 0,a,null)}})}),ae.fn.size=function(){return this.length},ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var rn=e.jQuery,an=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=an),t&&e.jQuery===ae&&(e.jQuery=rn),ae},typeof t===Te&&(e.jQuery=e.$=ae),ae}),define("lib-app/jquery",function(){}),define("storymaps/common/utils/Polyfills",[],function(){return{apply:function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.now||(Date.now=function(){return(new Date).valueOf()}),Object.keys=Object.keys||function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n},function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var i,r,a=String(t),o=0,s=n,l="";a.charAt(0|o)||(s="=",o%1);l+=s.charAt(63&i>>8-o%1*8)){if((r=a.charCodeAt(o+=.75))>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|r}return l}),t.atob||(t.atob=function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,o=0,s=0,l="";a=i.charAt(s++);~a&&(r=o%4?64*r+a:a,o++%4)?l+=String.fromCharCode(255&r>>(-2*o&6)):0)a=n.indexOf(a);return l})}()}}}),define("storymaps/common/utils/SocialSharing",["dojo/Deferred","esri/urlUtils"],function(e,t){return{shareFacebook:function(e,t,n,i){var r=this.cleanURL(i||document.location.href);window.open("http://www.facebook.com/sharer/sharer.php?u="+r,"","toolbar=0,status=0,width=626,height=436")},shareTwitter:function(e,t){var n="text="+encodeURIComponent(e||"")+"&url="+this.cleanURL(t||document.location.href)+"&related=EsriStoryMaps&hashtags=StoryMaps";window.open("https://twitter.com/intent/tweet?"+n,"","toolbar=0,status=0,width=626,height=436")},requestShortUrl:function(t){var n=t||document.location.href,i=new e;return $.getJSON("https://arcg.is/prod/shorten?callback=?",{longUrl:n},function(e){console.log(e),e&&e&&e.data.url?i.resolve(e.data.url):i.reject()}),i},cleanURL:function(e,n){var i=t.urlToObject(e),r=i.path;return i.query&&(delete i.query.edit,delete i.query.locale,delete i.query.folderId,delete i.query.webmap,delete i.query.autoplay,$.each(Object.keys(i.query),function(e,t){r+=0===e?"?":"&",void 0!==i.query[t]&&""!==i.query[t]?r+=t+"="+i.query[t]:r+=t})),n?r:encodeURIComponent(r)}}}),define("storymaps/common/utils/CommonHelper",["dojo/cookie","dojo/has","dojo/_base/lang","dojo/_base/Color","dojo/Deferred","dojo/DeferredList","./SocialSharing","esri/IdentityManager","esri/request","esri/dijit/Search","esri/tasks/locator","esri/urlUtils","esri/arcgis/utils","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/layers/FeatureLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer","dojo/i18n!commonResources/nls/webmap.js?v="+app.version,"dojo/i18n!commonResources/nls/media.js?v="+app.version],function(e,t,n,i,r,a,o,s,l,p,u,c,d,f,h,m,g,v,b,y,w,x,C){var T,S;return{fetchPortalSelfInfo:function(){var e=new r,t=d.arcgisUrl.split("/sharing/")[0],n=t.replace("http://","https://")+"/sharing/rest/oauth2/platformSelf?f=json";return $.ajax(n,{method:"POST",dataType:"json",data:{f:"json"},xhrFields:{withCredentials:!0},headers:{"X-Esri-Auth-Client-Id":app.cfg.DEFAULT_CLIENT_ID,"X-Esri-Auth-Redirect-Uri":window.location.href},success:function(t){t&&(t.username&&(T=t.username),t.token&&(S=t.token)),e.resolve()},error:function(){e.resolve()}}),e.promise},isMobile:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)},switchToBuilder:function(){document.location.search.match(/appid/)?document.location=o.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search,!0)+"&edit"+document.location.hash:(document.location.search.slice(-1),document.location=o.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname,!0)+"?edit"+document.location.hash)},isArcGISHosted:function(){return/(\/)([a-zA-Z0-9]+(\/))*(apps\/|home\/)([a-zA-Z0-9\-\_]+\/)/.test(document.location.pathname)},browserSupportHistory:function(){return!(!window.history||!history.pushState)},getUrlParams:function(){var e=c.urlToObject(document.location.search).query;return e||(this.browserSupportHistory()||e?{}:c.urlToObject(document.location.hash).query||{})},getWebmapID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.webmap?app.indexCfg.webmap:this.isArcGISHosted()||!e?t.webmap:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.webmap:void 0},getAppID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.appid?app.indexCfg.appid:this.isArcGISHosted()||!e?t.appid:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.appid:void 0},getGraphicsLayerByName:function(e,t){for(var n,i=0;i<e.graphicsLayerIds.length;i++)if(n=e.getLayer(e.graphicsLayerIds[i]),n.name==t)return n;return null},getWebMapExtentFromItem:function(e){if(!e.extent||2!=e.extent.length)return null;var t=f.geographicToWebMercator(new h(e.extent[0][0],e.extent[0][1])),n=f.geographicToWebMercator(new h(e.extent[1][0],e.extent[1][1]));return new m({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})},serializeExtentToItem:function(e){if(!e||!e.spatialReference)return null;var t=4326==e.spatialReference.wkid?e:f.webMercatorToGeographic(e);return[[Math.round(1e4*t.xmin)/1e4,Math.round(1e4*t.ymin)/1e4],[Math.round(1e4*t.xmax)/1e4,Math.round(1e4*t.ymax)/1e4]]},serializedExtentEquals:function(e,t){return e&&t&&e.length==t.length&&2==e.length&&e[0][0]==t[0][0]&&e[0][1]==t[0][1]&&e[1][0]==t[1][0]&&e[1][1]==t[1][1]},extentsAreCloseEnough:function(e,t,n,i){if(n=n||app.map){void 0===i&&(i=30);var r=n.toScreen(new h({x:e.xmin,y:e.ymin,spatialReference:e.spatialReference})),a=n.toScreen(new h({x:t.xmin,y:t.ymin,spatialReference:t.spatialReference}));if(Math.abs(r.x-a.x)>i||Math.abs(r.y-a.y)>i)return!1;var o=n.toScreen(new h({x:e.xmax,y:e.ymax,spatialReference:e.spatialReference})),s=n.toScreen(new h({x:t.xmax,y:t.ymax,spatialReference:t.spatialReference}));return!(Math.abs(o.x-s.x)>i||Math.abs(o.y-s.y)>i)}},cloneLayer:function(e){return e.url&&e.url.match(/virtualearth\./)?new y("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"):e instanceof y?new y(e.url):e instanceof b?new b(e.url):"OpenStreetMap"==e.id?new w:new y("http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer")},extentToPolygon:function(e){var t=new g(e.spatialReference);return t.addRing([[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]),t},getFirstLevelWhereExtentFit:function(e,t){var n=t.width,i=t.height,r=t._params.lods;if(!r)return-1;for(var a=r.length-1;a>=0;a--)if(n*t._params.lods[a].resolution>e.getWidth()&&i*t._params.lods[a].resolution>e.getHeight())return a;return-1},getPortalUser:function(){return T},getPortalRole:function(){var t=e("esri_auth");if(t&&(t=JSON.parse(t.replace('"ssl":undefined','"ssl":""')),!t.urlKey||!t.customBaseUrl||(t.urlKey+"."+t.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return t?t.role:null},getAppViewModeURL:function(){return document.location.protocol+"//"+document.location.host+document.location.pathname+"?appid="+app.data.getWebAppItem().id},getWebmapViewerLinkFromSharingURL:function(e){return e.split("/sharing/")[0]+"/home/webmap/viewer.html"},getPortalURL:function(){return d.arcgisUrl.split("/sharing/")[0]},getItemURL:function(e){return this.getPortalURL()+"/home/item.html?id="+e},getItemId:function(){return app.data&&app.data.getWebAppItem&&app.data.getWebAppItem().id},getMyContentURL:function(){return this.getPortalURL()+"/home/content.html"},getMyStoriesURL:function(){return app.isPortal?this.getPortalURL()+"/apps/MyStories/":"//storymaps.arcgis.com/en/my-stories/"},browserSupportAttachementUsingFileReader:function(){return!!(window.FileReader&&window.FormData&&this.browserSupportCanvas()&&window.Blob)},browserSupportCanvas:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},browserSupportFileReaderBinaryString:function(){return!!window.FileReader&&!!("readAsArrayBuffer"in new window.FileReader)},getBinaryStringFromArrayBuffer:function(e){for(var t=new Uint8Array(e),n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n},addCSSRule:function(e,n,i){var r="head";if(!(t("ie")<=8)){if(i&&(r=i.contents().find("head")),n){var a=$(r).find("#"+n).eq(0);if(a.length)return void a.html(e)}$("<style>").prop("type","text/css").attr("id",n).html(e).appendTo(r)}},hex2rgba:function(e,t){if(!e||""===e)return"";var n,i=e.replace("#","").match(/../g),r=[];for(n in i)r.push(parseInt(i[n],16));return r.push(t),"rgba("+r.join()+")"},prependURLHTTP:function(e){return!e||""===e||e.match(/^mailto:/)?e:/^(https?:\/\/)|^(\/\/)/i.test(e)?e:"http://"+e},convertURLHTTPS:function(e){return!e||""===e||e.match(/^mailto:/)?e:(e=e.replace(/http:\/\//,"https://"),e=e.replace(/^\/\//,"https://"),/^(https:\/\/)/i.test(e)?e:"https://"+e)},convertURLHTTP:function(e){return!e||""===e||e.match(/^mailto:/)?e:(e=e.replace(/https:\/\//,"http://"),e=e.replace(/^\/\//,"http://"),/^(http:\/\/)/i.test(e)?e:"http://"+e)},checkImageURL:function(e){return e&&e.match(/((\.png)|(\.jp(e)?g))$/i)},createGeocoder:function(e){var t=new r;if(!e||!e.map||!e.domNode)return t.resolve(),t;if(!app.cfg.HELPER_SERVICES.geocode)return t.resolve(),t;var n=[],i=[],o=[],s=this;e.searchOptions&&e.searchOptions.layers&&e.searchOptions.layers.length&&e.searchOptions.enabled&&(i=this.getLayerSources(e.searchOptions.layers,e.map,e.searchOptions.hintText));var l=s.processAppDataGeocoders(e.placeHolder);if(i.length&&(o=i),(!e.searchOptions||e.searchOptions&&!e.searchOptions.disablePlaceFinder)&&(o=o.concat(l||[]),$.each(app.cfg.HELPER_SERVICES.geocode,function(e,t){n.push(s.getGeocoderRequest(t))})),e.searchOptions&&e.searchOptions.disablePlaceFinder&&!o.length)if(l&&l.length)o.push(l[0]);else if(app.cfg.HELPER_SERVICES.geocode&&app.cfg.HELPER_SERVICES.geocode.length){var u=!1;$.each(app.cfg.HELPER_SERVICES.geocode,function(e,t){!u&&t.url&&(n.push(s.getGeocoderRequest(t)),u=!0)})}else o=null;var c={map:e.map,allPlaceholder:e.placeHolder,enableButtonMode:e.enableButtonMode};o&&o.length?(this.checkForSourceNameDuplicates(o),c.sources=o):c.placeholder=e.placeHolder||C.commonMedia.editorActionGeocode.lblTitle;var d=new p(c,e.domNode);if(n.length){new a(n).then(function(n){var i=s.processGeocoderRequestReturn(n,e.placeHolder),r=d.get("sources").concat(i||[]);r.length&&(s.setGeocodeSources(d,r),t.resolve(d))})}else{var f=d.get("sources");f.length&&(s.setGeocodeSources(d,f),t.resolve(d))}return t},getGeocoderRequest:function(e){var t={url:e.url,content:{f:"json"},handleAs:"json"};return app.isInBuilder||app.portal.user?t.callbackParamName="callback":t.disableIdentityLookup=!0,l(t)},getLayerSources:function(e,t,n){var i=this;return $.map(e,function(e){var r=t.getLayer(e.id),a={featureLayer:r,searchFields:[e.field.name],displayField:e.field.name,exactMatch:e.field.exactMatch,outFields:["*"],maxResults:6,name:i.findGeocoderName(r,e),placeholder:n};if(e.subLayer||0===e.subLayer){var o;e.subLayer;(o=r.dynamicLayerInfos)&&(o=o[e.subLayer])&&(o=o.source)&&o.mapLayerId,a.featureLayer=new v(r.url+"/"+e.subLayer)}return a})},processGeocoderRequestReturn:function(e,t){var n=[],i=this;return $.each(e,function(e,r){if(r[0]&&r[1]&&r[1].singleLineAddressField){var a=app.cfg.HELPER_SERVICES.geocode[e],o=new u(a.url),s={singleLineFieldName:r[1].singleLineAddressField.name,name:a.name?a.name:r[1].name,placeholder:a.placeholder||t||C.commonMedia.editorActionGeocode.lblTitle,locator:o};s.name=s.name||i.findGeocoderName({url:o.url}),i.isEsriGeocoder({url:a.url})&&(s.placeholder=C.commonMedia.editorActionGeocode.lblTitle),(!r[1].capabilities||r[1].capabilities.toLowerCase().indexOf("suggest")<0)&&(s.enableSuggestions=!1),n.push(s)}}),n},processAppDataGeocoders:function(e){if(app.data.getWebAppData().getAppGeocoders){var t=app.data.getWebAppData().getAppGeocoders();if(t||(t=[{name:"Esri World Geocoder",url:"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",singleLineFieldName:"SingleLine"}]),!t.length)return[];t=t.slice();var i=[],r=this;return $.each(t,function(t,a){if(a.url){var o=n.mixin({},a);o.locator=new u(o.url),r.isEsriGeocoder({url:o.url})?(o.placeholder=C.commonMedia.editorActionGeocode.lblTitle,o.name=x.commonWebmap.selector.lblEsriGeocoder):(o.placeholder=o.placeholder||e,o.name=o.name||r.findGeocoderName({url:o.url})),i.push(o)}}),i}},setGeocodeSources:function(e,t){this.checkForSourceNameDuplicates(t),e.set("sources",t),e.set("activeSourceIndex",0),e.startup(),app.data.getWebAppData().getAppGeocoders&&!app.data.getWebAppData().getAppGeocoders()&&e._allIndex&&e.set("activeSourceIndex",e._allIndex)},checkForSourceNameDuplicates:function(e){var t=[],n=this;$.each(e,function(e,i){t.indexOf(i.name)>=0&&(i.name=n.getAdjustedSourceName(t,i.name)),t.push(i.name)})},getAdjustedSourceName:function(e,t){for(var n=2,i=t+" - "+n;e.indexOf(i)>=0;)n++,i=t+" - "+n;return i},isEsriGeocoder:function(e){return e.url?e.url.match(/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g):(console.warn("no url on locator",e),!1)},findGeocoderName:function(e,t){var n=t?t.name||t.title:"";if(!n){(app.mapItem?app.mapItem.itemData.operationalLayers:[]).some(function(t){return t.id===e.id&&(n=t.title,!0)})}if(!(n=n||e.name||e.title)){if(!this.isEsriGeocoder(e)){if("string"==typeof e.url&&e.url.split){var i=e.url.split("/"),r=i[i.length-2];return void(r&&(n=r))}return}n=x.commonWebmap.selector.lblEsriGeocoder}if(t&&(t.subLayer||0===t.subLayer)){var a=e.dynamicLayerInfos||e.layerInfos,o=a[t.subLayer];o&&o.name&&(n+=" - "+o.name)}return n.replace(/_/g," ")},colorsAreSimilar:function(e,t,n){var i=this.getLuminance(e),r=this.getLuminance(t),a=(i+.05)/(r+.05);return r>i&&(a=1/a),!(a>=2.85||n&&a>=2.2)},getLuminance:function(e){var t=new i(e),n=t.toRgb().map(function(e){return e/=255,e<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return.2126*n[0]+.7152*n[1]+.0722*n[2]},convertToDegrees:function(e){var t=e[0].numerator,n=e[0].denominator,i=parseFloat(t)/parseFloat(n),r=e[1].numerator,a=e[1].denominator,o=parseFloat(r)/parseFloat(a),s=e[2].numerator,l=e[2].denominator;return i+o/60+parseFloat(s)/parseFloat(l)/3600},debounce:function(e,t,n){var i;return function(){var r=this,a=arguments;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,a)},t),n&&!i&&e.apply(r,a)}},findDifferences:function(e,t){var n=[],i=["this"];return function(e,t){if(e.constructor==Array)if(t&&t.constructor==Array&&t.length==e.length)for(var r=0;r<e.length;r++)i.push("["+r.toString()+"]"),arguments.callee(e[r],t[r]),i.pop();else n.push({Property:i.join(""),ObjectA:e,ObjectB:t});else if(e.constructor==Object||e.constructor!=Number&&e.constructor!=String&&e.constructor!=Date&&e.constructor!=RegExp&&e.constructor!=Function&&e.constructor!=Boolean)for(var a in e)i.push("."+a),t[a]?e[a]&&e[a].constructor!=Function&&arguments.callee(e[a],t[a]):n.push({Property:i.join(""),ObjectA:e[a],ObjectB:null}),i.pop();else e.constructor!=Function&&e!=t&&n.push({Property:i.join(""),ObjectA:e,ObjectB:t})}(e,t),n},possiblyAddToken:function(e){if(!this.isAppResource(e))return e;if(e=this.removeToken(e),!this.needsTokenAdded(e))return e;var t="";return t=app.portal&&app.portal.getPortalUser()?app.portal.getPortalUser().credential.token:s.findCredential(document.location.origin)?s.findCredential(document.location.origin).token:s.findCredential(app.portal.url)?s.findCredential(app.portal.url).token:this.getCookieToken(),this.forceHttps(e)+"?token="+t},forceHttps:function(e){return"https://"+e.replace(/^.*?\/\//,"")},isAppResource:function(e,t){return t||(t=app.data&&app.data.getWebAppItem&&app.data.getWebAppItem()),!!t&&(t&&t.id&&e&&e.match(new RegExp("/sharing/rest/content/items/"+t.id+"/resources/")))},needsTokenAdded:function(e){var t=app.data&&app.data.getWebAppItem&&app.data.getWebAppItem();return!!t&&(this.isAppResource(e,t)&&"public"!==t.access)},getCookieToken:function(){return S},possiblyRemoveToken:function(e){return this.isAppResource(e)?this.removeToken(e):e},removeToken:function(e){return e.split("?token=")[0]}}}),define("storymaps/common/ui/EmbedBar/EmbedBar",[],function(){"use strict";return function(e){function t(){var t=document.location.href;$.getJSON("https://arcg.is/prod/shorten?callback=?",{format:"json",apiKey:e.bitlyCreds[0],login:e.bitlyCreds[1],longUrl:t},function(e){e&&e&&e.data.url&&(document.querySelector(".embed-bitlylink").value=e.data.url)})}if(this.initiated=!1,!(e.isBuilder||e.classicEmbedMode||e.appCreationDate<e.june2018ReleaseDate)&&(window.app.isEsriStoryMap=!0,window.top!==window.self)){try{parent.window.app.isEsriStoryMap&&(window.app.isEmbeddedInEsriStoryMap=!0)}catch(e){window.app.isEmbeddedInEsriStoryMap=!1}if(!window.app.isEmbeddedInEsriStoryMap){var n='      <div class="embed-left">        <div class="esri-logo-embed">          <a target="_blank" href="https://www.esri.com">\t\t\t\t\t\t<img alt="Esri logo" class="embedLogoImg" src='+e.logoPath+' style="outline: none;">          </a>        </div>        <div class="esri-tagline-embed"><a href="https://storymaps.arcgis.com" target="_blank">'+e.strings.tagline+'</a></div>      </div>      <div class="embed-right">        <div class="share-embed" title="'+e.strings.share+'">          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="shareIcon" fill="#505050" d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg>        </div>        <div class="open-newtab-embed" title="'+e.strings.newTab+'">          <a href='+window.location.href+' target="_blank">            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 577 512"><path id="newTabIcon" fill="#505050" d="M576 24v127.984c0 21.461-25.96 31.98-40.971 16.971l-35.707-35.709-243.523 243.523c-9.373 9.373-24.568 9.373-33.941 0l-22.627-22.627c-9.373-9.373-9.373-24.569 0-33.941L442.756 76.676l-35.703-35.705C391.982 25.9 402.656 0 424.024 0H552c13.255 0 24 10.745 24 24zM407.029 270.794l-16 16A23.999 23.999 0 0 0 384 303.765V448H64V128h264a24.003 24.003 0 0 0 16.97-7.029l16-16C376.089 89.851 365.381 64 344 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V287.764c0-21.382-25.852-32.09-40.971-16.97z"/></svg>          </a>        </div>        <div class="fullscreen-embed " title="'+e.strings.fullScreen+'">          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="fullscreenIcon" fill="#505050" d="M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"/></svg>          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="compressIcon" fill="#505050" d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"/></svg>        </div>      </div>    ',i='      <div class="embed-share-modal">        <div class="embed-modal-content">          <div class="embed-modal-logo">            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="shareIconLogo" fill="#fff" d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg>          </div>          <div class="embed-modal-header">            <h4 class="embed-modal-title">'+e.strings.share+'</h4>          </div>          <div class="embed-modal-body">            <div class="embed-share-url-social">              <div class="embed-share-url-panel">                <div class="embed-share-url-container">                  <input type="text" id="embed-bitlylink" class="form-control embed-bitlylink" aria-label="bitly link">                  <a class="btn embed-bar-btn btn-primary btn-bitlylink-open" target="_blank" href="'+window.location.href+'">'+e.strings.open+'</a>                </div>              </div>            </div>            <div class="embed-share-social-container">              <div class="social-icon embed-share-facebook" title="'+e.strings.shareFacebook+'" aria-label="Share on Facebook button">                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="facebookIcon" fill="#505050" d="M448 80v352c0 26.5-21.5 48-48 48h-85.3V302.8h60.6l8.7-67.6h-69.3V192c0-19.6 5.4-32.9 33.5-32.9H384V98.7c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9H184v67.6h60.9V480H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z"/></svg>              </div>              <div class="social-icon embed-share-twitter" title="'+e.strings.shareTwitter+'" aria-label="Share on Twitter button">                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="twitterIcon" fill="#505050" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>              </div>            </div>          </div>          <div class="embed-modal-footer">            <button type="button" class="btn embed-bar-btn btnCancel btn-naked btn-close" data-dismiss="modal">'+e.strings.close+"</button>          </div>        </div>      </div>    ",r=!1,a=null,o=function(){document.querySelector("body").appendChild(C),document.querySelector("body").appendChild(S),s()?document.querySelector(".open-newtab-embed").style.display="none":document.querySelector(".fullscreen-embed").style.display="none",p(),u()},s=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},l=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},p=function(){if(e.isEsriLogo)for(var t=0;t<e.logoElements.length;t++)document.querySelector(e.logoElements[t].selector).style.display="none";for(var n=0;n<e.shareElements.length;n++)if(e.shareElements[n].length>1)for(var i=0;i<e.shareElements[n].length;i++)e.shareElements[n][i].style.display="none";else document.querySelector(e.shareElements[n].selector).style.display="none";for(var r=0;r<e.taglineElements.length;r++)if(e.taglineElements[r].length>1)for(var a=0;a<e.taglineElements[r].length;a++)e.taglineElements[r][a].textContent&&"a story map"==e.taglineElements[r][a].textContent.toLowerCase()&&(e.taglineElements[r][a].style.display="none");else e.taglineElements[r].text()&&"a story map"==e.taglineElements[r].text().toLowerCase()&&(document.querySelector(e.taglineElements[r].selector).style.display="none")},u=function(){document.querySelector(".fullscreen-embed").addEventListener("click",d),document.querySelector(".share-embed").addEventListener("click",v),document.querySelector(".embed-modal-footer .btn-close").addEventListener("click",b),document.querySelector(".embed-share-facebook").addEventListener("click",y),document.querySelector(".embed-share-twitter").addEventListener("click",w),window.addEventListener("fullscreenchange",c),window.addEventListener("webkitfullscreenchange",c),window.addEventListener("mozfullscreenchange",c),window.addEventListener("msfullscreenchange",c)},c=function(){s()&&(l()?f():(document.querySelector("body").classList.contains("fullscreen")&&document.querySelector("body").classList.toggle("fullscreen"),document.querySelectorAll(".fullscreen-embed svg")[0].style.display="block",document.querySelectorAll(".fullscreen-embed svg")[1].style.display="none",r||h()))},d=function(){var t=document.querySelector("body");s()?(m(),t.classList.contains("fullscreen")?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),document.querySelector(".fullscreen-embed").title=e.strings.fullScreen,document.querySelectorAll(".fullscreen-embed svg")[0].style.display="block",document.querySelectorAll(".fullscreen-embed svg")[1].style.display="none"):(t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),t.classList.toggle("fullscreen"),document.querySelector(".fullscreen-embed").title=e.strings.exitFullScreen,document.querySelectorAll(".fullscreen-embed svg")[1].style.display="block",document.querySelectorAll(".fullscreen-embed svg")[0].style.display="none")):(document.querySelector(".fullscreen-embed").style.display="none",document.querySelector(".open-newtab-embed").style.display="block",console.log("Full screen not available"))},f=function(){var e=app&&app.map;e&&(a={height:e.height,width:e.width})},h=function(){var e=app&&app.map?app.map.extent.getCenter():null;if(e&&a){var t=app.map.toScreen(e);t.x=a.width/2,t.y=a.height/2,app.map.centerAt(app.map.toMap(t))}},m=function(){var e=app&&app.map?app.map.extent.getCenter():null;if(e){r=!0;var t=g(function(){app.map.centerAt(e),n.remove(),r=!1},250),n=app.map.on("resize",t)}},g=function(e,t,n){var i;return function(){var r=this,a=arguments,o=function(){i=null,n||e.apply(r,a)},s=n&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(r,a)}},v=function(){
"block"==document.querySelector(".embed-share-modal").style.display?document.querySelector(".embed-share-modal").style.display="none":document.querySelector(".embed-share-modal").style.display="block",t()},b=function(){document.querySelector(".embed-share-modal").style.display="none"},y=function(){window.open("http://www.facebook.com/sharer/sharer.php?u="+document.location.href,"","toolbar=0,status=0,width=626,height=436")},w=function(){var t="text="+e.appTitle+"&url="+document.location.href+"&related=EsriStoryMaps&hashtags=StoryMaps";window.open("https://twitter.com/intent/tweet?"+t,"","toolbar=0,status=0,width=626,height=436")},x='      <style type="text/css">        .embed-bar {          position: absolute;          bottom: 0;          left: 0;          width: 100%;          height: 26px;          font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;          background-color: #f1f1f1;          color: #505050;          z-index: 99999;          line-height: normal;        }        .embed-left {          position: absolute;          left: 10px;          margin-top: 5px;        }        .embed-right {          position: absolute;          right: 10px;          margin-top: 4px;        }        .embedLogoImg {          position: absolute;          top: 50%;          bottom: 50%;          left: 0px;          max-width: 250px;          max-height: 20px;          margin: auto 0;        }        .esri-tagline-embed {          margin-left: 70px;        }        .esri-tagline-embed :hover{          color: #036765;        }        .esri-tagline-embed a {          font-size: 15px;          font-weight: normal;          color: #505050;        }        .share-embed {          position: absolute;          top: 2px;          right: 22px;          padding-right: 8px;          outline: none;          cursor: pointer;        }        .open-newtab-embed {          position: absolute;          top: 2px;          right: 0px;          outline: none;        }        .fullscreen-embed {          position: absolute;          top: 2px;          right: 0px;          outline: none;          cursor: pointer;        }        .fullScreen {          width: 100%;          height: 100%;          position: absolute;          top: 0;          left: 0;        }        .embed-right svg {          width: 16px;          height: 16px;          cursor: pointer;        }        svg:hover #shareIcon,        svg:hover #newTabIcon,        svg:hover #fullscreenIcon,        svg:hover #compressIcon {          fill: #036765;        }      </style>    '+n,C=document.createElement("div");C.className="embed-bar",C.innerHTML=x;var T='      <style type="text/css">        .embed-share-modal {          display: none;          position: fixed;          z-index: 999;          left: 0;          top: 0;          width: 100%;          height: 100%;          overflow: auto;          background-color: rgba(0,0,0, 0.4);        }        .embed-modal-content {          background-color: #fff;          margin: 15% auto;          padding: 20px;          border: 1px solid #888;          width: 80%;          max-width: 500px;          display: flex;          flex-direction: column;        }        .embed-modal-logo {          margin-top: -40px;          margin-left: -40px;          width: 40px;          height: 40px;          border: 4px solid #FFF;          border-radius: 24px;          background-color: #196fa6;          color: white;          font-size: 16px;          box-sizing: content-box;        }        .embed-modal-logo i{          margin-left: 8px;          margin-top: 7px;          font-size: 24px;        }        .embed-modal-header {          padding-bottom: 15px;        }        .embed-modal-title {          line-height: 1.1;          font-size: 19px;          font-weight: 200;          margin-top: -4px;        }        .embed-modal-body {          height: 60px;        }        .embed-share-url-social {          font-size: 10px;        }        .embed-share-social-container {          font-size: 2.5em;          color: #4c4c4c;        }        .embed-share-social-container i:hover {          cursor: pointer;          color: #036765;        }        .embed-share-facebook {          float: left;        }        .embed-share-twitter {          margin-left: 5px;          float: left;        }        #embed-bitlylink {          display: inline-block;          height: 38px;          width: 240px;          text-align: left;          font-size: 20px;          cursor: text;          padding: 0 0 0 10px;          line-height: 20px;          border: 1px solid #959595;          border-radius: 0;          background-color: #f8f8f8;          opacity: 1;        }        .embed-bar-btn {          background-image: none;          border: 1px solid transparent;          padding: 6px 12px;          font-size: 15px;          line-height: 1.5;          border-radius: 0;          margin-bottom: 0;          font-weight: 400;        }        .btn-bitlylink-open {          margin-top: 1px;          margin-bottom: 11px;          margin-left: 10px;          color: #fff;          background-color: #196fa6;          border-color: #166090;          text-transform: uppercase;        }        .btn-bitlylink-open:hover {          background-color: #005e95;          border-color: #005e95;        }        .embed-modal-footer {          margin-left: auto;          text-align: right;        }        .embed-modal-footer .btn-close {          background-color: #eee;          color: #6e6e6e;          margin-top: 20px;        }        .embed-modal-footer .btn-close:hover {          background-color: #ccc;          color: #6e6e6e;        }        .embed-modal-body svg {          width: 36px;          height: 36px;          cursor: pointer;        }        svg:hover #facebookIcon,        svg:hover #twitterIcon {          fill: #036765;        }        .embed-modal-logo svg  {          width: 24px;          height: 24px;          margin-top: 8px;          margin-left: 6px;        }        @media(max-width: 530px) {          .embed-share-url-container {            display: flex;            justify-content: flex-start;            align-items: stretch;            margin-bottom: 11px;          }          #embed-bitlylink {            width: auto;            min-width: 0;            max-width: 200px;            flex-grow: 1;            flex-shrink: 1;            flex-basis: 0;            padding-right: 10px;          }          .btn-bitlylink-open {            flex: 0 0 auto;          }        }      </style>    '+i,S=document.createElement("div");S.className="embedbar-share-modal",S.innerHTML=T,setTimeout(function(){o()},0),this.initiated=!0}}}}),define("storymaps/common/builder/PortalVersionTest",["esri/arcgis/utils","dojo/Deferred"],function(e,t){function n(){return e.arcgisUrl.split("/sharing/")[0]}return{run:function(){var e=new t,i=null;app.portal.hasMyStories=null;var r=new Image,a=app.isProduction?n()+"/apps/":"../";return r.src=a+"MyStories/assets/my-stories-portal-detector.png",r.onload=function(){app.portal.hasMyStories=!0,i&&clearTimeout(i),e.resolve()},r.onerror=r.onabort=function(){app.portal.hasMyStories=!1,i&&clearTimeout(i),e.reject()},i=setTimeout(function(){e.reject()},2e3),e}}}),define("storymaps/common/builder/MyStoriesWrapper",["./PortalVersionTest","esri/IdentityManager","storymaps/common/utils/CommonHelper","dojo/topic"],function(e,t,n,i){function r(){e.run().then(function(){app.isProduction&&!p()?a():o()},a)}function a(){$(".check-story").hide(),$(window).resize()}function o(){window.myStoriesInit=s,i.publish("MYSTORIES_SCAN","start");var e="../MyStories/index.html?fromBuilder";e+="&locale="+dojo.locale,setTimeout(function(){$("#my-stories-frame").attr("src",e)},1e3)}function s(){var e=$("#my-stories-frame")[0].contentWindow;return e&&e.init&&e.check&&e.share?app.data.getStoryLength()||app.appCfg.noStoryLengthRequired?(app.mystories={init:e.init,check:e.check,share:e.share,isChecking:!1,hasCheckErrors:!1,hasScanErrors:!1},void app.mystories.init(app.isInBuilder?t.toJson():null,app.isDirectCreationFirstSave||app.isGalleryCreation?null:app.data.getWebAppItem(),app.cfg.TPL_ID,app.isPortal,function(e,t,n){i.publish("MY-STORIES-EDIT-MEDIA",{index:e,type:t,actionId:n})},function(e){i.publish("MY-STORIES-EDIT-MAP",{id:e})},function(){app.mystories.hasCheckErrors=!1,i.publish("MY-STORIES-REFRESH")},function(e){e=e||{completed:!1,ignoreAllIssues:!1},app.mystories.hasCheckErrors=!e.ignoreAllIssues,app.mystories.forcedIgnoreIssues=e.ignoreAllIssues,i.publish("MY-STORIES-REFRESH")}).then(l,function(){console.error("Failed to initialize My Stories")})):void console.log("Skipping the initialization of My Stories until the story has content"):void console.error("Failed to load My Stories")}function l(){if(app.mystories)return app.mystories.init?void(app.mystories.check&&(app.mystories.isChecking=!0,app.mystories.hasCheckErrors=!1,i.publish("MYSTORIES_SCAN","start"),app.mystories.check(app.data.getWebAppData().get()).then(function(e){e=e||{ignoreAllIssues:!1},app.mystories.isChecking=!1,app.mystories.hasCheckErrors=!1,app.mystories.forcedIgnoreIssues=e.ignoreAllIssues,i.publish("MYSTORIES_SCAN","success"),$("#sharePopup").is(":visible")&&app.builder.openSharePopup()},function(e){e=e||{completed:!1,ignoreAllIssues:!1},app.mystories.isChecking=!1,app.mystories.hasCheckErrors=!0,app.mystories.forcedIgnoreIssues=e.ignoreAllIssues,i.publish("MYSTORIES_SCAN","error"),$("#sharePopup").is(":visible")&&app.builder.openSharePopup()}))):void s()}function p(){var e=n.getPortalURL().split("//").slice(-1)[0],t=e.split("."),i=document.location.host,r=i.split(".");return e==i||e.split("/").length>1&&e.split("/")[0]==i||(r.length<3?i==e:r.slice(1).join(".")==t.slice(-2).join("."))}return{loadMyStories:r,scanStory:l,myStoriesIsSameDomain:p}}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},FastClick.prototype.onTouchMove=function(e){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},FastClick.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n,i,r,a,o=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(a=e.changedTouches[0],o=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=o.tagName.toLowerCase())){if(t=this.findControl(o)){if(this.focus(o),this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o))return e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(o),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(r=o.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";var t,n;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===e.style.msTouchAction},FastClick.attach=function(e){"use strict";return new FastClick(e)},"undefined"!=typeof define&&define.amd?define("lib-app/jquery.fastClick",[],function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(r).remove(),e(a).each(function(){var i=e(this),r=t(i),a={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",a))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var a=t(r),o=a.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(a.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=t(i),o=r.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&r.find(a).trigger("focus"),i.trigger("click");var s=r.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),a=r.data("bs.modal"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);a||r.data("bs.modal",a=new n(this,o)),"string"==typeof t?a[t](i):o.show&&a.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),a=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},a.data(),i.data());i.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(a,o,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),a="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.tooltip",r=new n(this,a)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),a=r.length;a--;){var o=r[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,a=this.tip(),o=this.getUID(this.type);this.setContent(),a.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&a.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,p=l.test(s);p&&(s=s.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),c=a[0].offsetWidth,d=a[0].offsetHeight;if(p){var f=s,h=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+d>h.bottom?"top":"top"==s&&u.top-d<h.top?"bottom":"right"==s&&u.right+c>h.width?"left":"left"==s&&u.left-c<h.left?"right":s,a.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,u,c,d);this.applyPlacement(m,s);var g=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,a=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,p=i[0].offsetHeight;"top"==n&&p!=a&&(t.top=t.top+a-p);var u=this.getViewportAdjustedDelta(n,t,l,p);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(n),d=c?2*u.left-r+l:2*u.top-a+p,f=c?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(d,i[0][f],c)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&a.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,a=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var a=i?{top:0,left:0}:t.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,o,s,a)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r
;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,l=t.top+a-o.scroll+i;s<o.top?r.top=o.top-s:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var p=t.left-a,u=t.left+a+n;p<o.left?r.left=o.left-p:u>o.right&&(r.left=o.left+o.width-u)}return r},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),a="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.popover",r=new n(this,a)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var o=i.find("> .active"),s=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a(),o.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),r||n.data("bs.collapse",r=new i(this,a)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.5",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"))&&t.transitioning)){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var a=t(r),o=a.data("bs.collapse"),s=o?"toggle":r.data();n.call(a,s)})}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),define("lib-app/bootstrap/js/bootstrap.min",function(){}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;n<a;n+=1)o[n]=str(n,l)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(i=rep[n],(r=str(i,l))&&o.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l))&&o.push(quote(i)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{};if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={handlers:{},_uid:1,uid:function(e){return e._uid||(e._uid=n.Adapter._uid++)},bind:function(e,t,i){var r=n.Adapter.uid(e);n.Adapter.handlers[r]=n.Adapter.handlers[r]||{},n.Adapter.handlers[r][t]=n.Adapter.handlers[r][t]||[],n.Adapter.handlers[r][t].push(i),e["on"+t]=function(e,t){return function(i){n.Adapter.trigger(e,t,i)}}(e,t)},trigger:function(e,t,i){i=i||{};var r,a,o=n.Adapter.uid(e);for(n.Adapter.handlers[o]=n.Adapter.handlers[o]||{},n.Adapter.handlers[o][t]=n.Adapter.handlers[o][t]||[],r=0,a=n.Adapter.handlers[o][t].length;r<a;++r)n.Adapter.handlers[o][t][r].apply(this,[i])},extractEventData:function(e,t){return t&&t[e]||void 0},onDomLoad:function(t){var n=e.setTimeout(function(){t()},2e3);e.onload=function(){clearTimeout(n),t()}}},void 0!==n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,i=e.setTimeout||i,r=e.clearTimeout||r,a=e.setInterval||a,o=e.History=e.History||{};if(void 0!==o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if(void 0!==o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t=o.getHashByIndex();return e===t},o.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},o.saveHash=function(e){return!o.isLastHash(e)&&(o.savedHashes.push(e),!0)},o.getHashByIndex=function(e){return void 0===e?o.savedHashes[o.savedHashes.length-1]:e<0?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,n){var i,r=o.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},o.discardedStates[r]=i,!0},o.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return o.discardedHashes[e]=i,!0},o.discardedState=function(e){var t=o.getHashByState(e);return o.discardedStates[t]||!1},o.discardedHash=function(e){return o.discardedHashes[e]||!1},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var t,i,r,s,l="",p=Boolean(o.getHash());return o.isInternetExplorer()?(t="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",t),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),r="",s=!1,o.checkerFunction=function(){if(s)return!1;s=!0;var t=o.getHash(),n=o.getHash(i.contentWindow.document);return t!==l?(l=t,n!==t&&(r=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):n!==r&&(r=n,p&&""===n?o.back():o.setHash(n,!1)),s=!1,!0}):o.checkerFunction=function(){var t=o.getHash()||"";return t!==l&&(l=t,o.Adapter.trigger(e,"hashchange")),!0},o.intervalList.push(a(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(t){var n,i=t&&t.newURL||o.getLocationHref(),r=o.getHashByUrl(i),a=null;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(a=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(a)?(o.busy(!1),!1):(o.getHashByState(a),n=o.discardedState(a),n?(o.getHashByIndex(-2)===o.getHashByState(n.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(a.data,a.title,encodeURI(a.url),!1),!0))))},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),l=o.getState(!1),p=o.getHashByState(l),u=o.getHash(),c=o.expectedStateId==a.id;return o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),s===p?(o.busy(!1),!1):(o.saveState(a),c||o.Adapter.trigger(e,"statechange"),!o.isHashEqual(s,u)&&!o.isHashEqual(s,o.getShortUrl(o.getLocationHref()))&&o.setHash(s,!1),o.busy(!1),!0)},o.replaceState=function(t,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:r}),!1;o.busy(!0);var a=o.createStateObject(t,n,i),s=o.getHashByState(a),l=o.getState(!1),p=o.getHashByState(l),u=o.getStateByIndex(-2);return o.discardState(l,a,u),s===p?(o.storeState(a),o.expectedStateId=a.id,o.recycleState(a),o.setTitle(a),o.saveState(a),o.Adapter.trigger(e,"statechange"),o.busy(!1)):o.pushState(a.data,a.title,a.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")})},void 0!==o.init&&o.init()}(window),function(e,t){"use strict";var n=e.console||t,i=e.document,r=e.navigator,a=!1,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,p=e.clearInterval,u=e.JSON,c=e.alert,d=e.History=e.History||{},f=e.history;try{a=e.sessionStorage,a.setItem("TEST","1"),a.removeItem("TEST")}catch(e){a=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==d.init)throw new Error("History.js Core has already been loaded...");d.init=function(e){return void 0!==d.Adapter&&(void 0!==d.initCore&&d.initCore(),void 0!==d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(h){if(void 0!==d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.disableSuid=d.options.disableSuid||!1,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||i.title,d.options.html4Mode=d.options.html4Mode||!1,d.options.delayInit=d.options.delayInit||!1,d.intervalList=[],d.clearAllIntervals=function(){var e,t=d.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)p(t[e]);d.intervalList=null}},d.debug=function(){(d.options.debug||!1)&&d.log.apply(d,arguments)},d.log=function(){var e,t,r,a,o,s=void 0!==n&&void 0!==n.log&&void 0!==n.log.apply,l=i.getElementById("log");for(s?(a=Array.prototype.slice.call(arguments),e=a.shift(),void 0!==n.debug?n.debug.apply(n,[e,a]):n.log.apply(n,[e,a])):e="\n"+arguments[0]+"\n",t=1,r=arguments.length;t<r;++t){if("object"==typeof(o=arguments[t])&&void 0!==u)try{o=u.stringify(o)}catch(e){}e+="\n"+o+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||c(e),!0},d.getInternetExplorerMajorVersion=function(){return d.getInternetExplorerMajorVersion.cached=void 0!==d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},d.isInternetExplorer=function(){return d.isInternetExplorer.cached=void 0!==d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion())},d.options.html4Mode?d.emulated={pushState:!0,hashChange:!0}:d.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},d.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},d.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},d.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},d.getBaseUrl=function(){return d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl()},d.getPageUrl=function(){var e=d.getState(!1,!1),t=(e||{}).url||d.getLocationHref();return t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},d.getBasePageUrl=function(){return d.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},d.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===i?d.getRootUrl()+e.replace(/^\/+/,""):"#"===i?d.getPageUrl().replace(/#.*/,"")+e:"?"===i?d.getPageUrl().replace(/[\?#].*/,"")+e:t?d.getBaseUrl()+e.replace(/^(\.\/)+/,""):d.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},d.getShortUrl=function(e){var t=e,n=d.getBaseUrl(),i=d.getRootUrl();return d.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),d.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.getLocationHref=function(e){return e=e||i,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},d.store={},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.normalizeStore=function(){d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{}},d.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=d.getLastSavedState();return!n&&t&&(n=d.createStateObject()),e&&(n=d.cloneObject(n),n.url=n.cleanUrl||n.url),n},d.getIdByState=function(e){var t,n=d.extractId(e.url);if(!n)if(t=d.getStateString(e),void 0!==d.stateToId[t])n=d.stateToId[t];else if(void 0!==d.store.stateToId[t])n=d.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==d.idToState[n]||void 0!==d.store.idToState[n];);d.stateToId[t]=n,d.idToState[n]=e}return n},d.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=d.getFullUrl(e.url?e.url:d.getLocationHref()),t.hash=d.getShortUrl(t.url),t.data=d.cloneObject(e.data),t.id=d.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!d.isEmptyObject(t.data),(t.title||n)&&!0!==d.options.disableSuid&&(t.hash=d.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=d.getFullUrl(t.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},d.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=d.normalizeState(i)},d.getStateById=function(e){return e=String(e),d.idToState[e]||d.store.idToState[e]||t},d.getStateString=function(e){var t,n;return t=d.normalizeState(e),n={data:t.data,title:e.title,url:e.url},u.stringify(n)},d.getStateId=function(e){var t;return t=d.normalizeState(e),t.id},d.getHashByState=function(e){var t;return t=d.normalizeState(e),t.hash},d.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,t=/(.*)\&_suid=([0-9]+)$/.exec(n),t?t[1]||e:e,(t?String(t[2]||""):"")||!1},d.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},d.extractState=function(e,t){var n,i,r=null;return t=t||!1,n=d.extractId(e),n&&(r=d.getStateById(n)),r||(i=d.getFullUrl(e),n=d.getIdByUrl(i)||!1,n&&(r=d.getStateById(n)),!r&&t&&!d.isTraditionalAnchor(e)&&(r=d.createStateObject(null,null,i))),r},d.getIdByUrl=function(e){return d.urlToId[e]||d.store.urlToId[e]||t},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||t},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||t},d.hasUrlDuplicate=function(e){var t;return t=d.extractState(e.url),t&&t.id!==e.id},d.storeState=function(e){return d.urlToId[e.url]=e.id,d.storedStates.push(d.cloneObject(e)),e},d.isLastSavedState=function(e){var t,n,i,r=!1;return d.savedStates.length&&(t=e.id,n=d.getLastSavedState(),i=n.id,r=t===i),r},d.saveState=function(e){return!d.isLastSavedState(e)&&(d.savedStates.push(d.cloneObject(e)),!0)},d.getStateByIndex=function(e){return void 0===e?d.savedStates[d.savedStates.length-1]:e<0?d.savedStates[d.savedStates.length+e]:d.savedStates[e]},d.getCurrentIndex=function(){return d.savedStates.length<1?0:d.savedStates.length-1},d.getHash=function(e){var t=d.getLocationHref(e);return d.getHashByUrl(t)},d.unescapeHash=function(e){var t=d.normalizeHash(e);return t=decodeURIComponent(t)},d.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},d.setHash=function(e,t){var n,r;return!1!==t&&d.busy()?(d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:t}),!1):(d.busy(!0),n=d.extractState(e,!0),n&&!d.emulated.pushState?d.pushState(n.data,n.title,n.url,!1):d.getHash()!==e&&(d.bugs.setHash?(r=d.getPageUrl(),d.pushState(null,null,r+"#"+e,!1)):i.location.hash=e),d)},d.escapeHash=function(t){var n=d.normalizeHash(t);return n=e.encodeURIComponent(n),d.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},d.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=d.unescapeHash(t)},d.setTitle=function(e){var t,n=e.title;n||(t=d.getStateByIndex(0))&&t.url===e.url&&(n=t.title||d.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return i.title=n,d},d.queues=[],d.busy=function(e){if(void 0!==e?d.busy.flag=e:void 0===d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){s(d.busy.timeout);var t=function(){var e,n,i;if(!d.busy.flag)for(e=d.queues.length-1;e>=0;--e)n=d.queues[e],0!==n.length&&(i=n.shift(),d.fireQueueItem(i),d.busy.timeout=o(t,d.options.busyDelay))};d.busy.timeout=o(t,d.options.busyDelay)}return d.busy.flag},d.busy.flag=!1,d.fireQueueItem=function(e){return e.callback.apply(e.scope||d,e.args||[])},d.pushQueue=function(e){return d.queues[e.queue||0]=d.queues[e.queue||0]||[],d.queues[e.queue||0].push(e),d},d.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),d.busy()?d.pushQueue(e):d.fireQueueItem(e),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(s(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(e){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=o(function(){return d.doubleCheckClear(),d.stateChanged||e(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var t,n=d.extractState(d.getLocationHref());if(!d.isLastSavedState(n))return t=n,t||(t=d.createStateObject()),d.Adapter.trigger(e,"popstate"),d},d.back=function(e){return!1!==e&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:e}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),f.go(-1),!0)},d.forward=function(e){return!1!==e&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:e}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),f.go(1),!0)},d.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)d.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)d.back(t)}return d},d.emulated.pushState){var m=function(){};d.pushState=d.pushState||m,d.replaceState=d.replaceState||m}else d.onPopState=function(t,n){var i,r,a=!1,o=!1;return d.doubleCheckComplete(),i=d.getHash(),i?(r=d.extractState(i||d.getLocationHref(),!0),r?d.replaceState(r.data,r.title,r.url,!1):(d.Adapter.trigger(e,"anchorchange"),d.busy(!1)),d.expectedStateId=!1,!1):(a=d.Adapter.extractEventData("state",t,n)||!1,o=a?d.getStateById(a):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(d.getLocationHref()),o||(o=d.createStateObject(null,null,d.getLocationHref())),d.expectedStateId=!1,d.isLastSavedState(o)?(d.busy(!1),!1):(d.storeState(o),d.saveState(o),d.setTitle(o),d.Adapter.trigger(e,"statechange"),d.busy(!1),!0))},d.Adapter.bind(e,"popstate",d.onPopState),d.pushState=function(t,n,i,r){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:r}),!1;d.busy(!0);var a=d.createStateObject(t,n,i);return d.isLastSavedState(a)?d.busy(!1):(d.storeState(a),d.expectedStateId=a.id,f.pushState(a.id,a.title,a.url),d.Adapter.trigger(e,"popstate")),!0},d.replaceState=function(t,n,i,r){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:r}),!1;d.busy(!0);var a=d.createStateObject(t,n,i);return d.isLastSavedState(a)?d.busy(!1):(d.storeState(a),d.expectedStateId=a.id,f.replaceState(a.id,a.title,a.url),d.Adapter.trigger(e,"popstate")),!0};if(a){try{d.store=u.parse(a.getItem("History.store"))||{}}catch(e){d.store={}}d.normalizeStore()}else d.store={},d.normalizeStore();d.Adapter.bind(e,"unload",d.clearAllIntervals),d.saveState(d.storeState(d.extractState(d.getLocationHref(),!0))),a&&(d.onUnload=function(){var e,t,n;try{e=u.parse(a.getItem("History.store"))||{}}catch(t){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in d.idToState)d.idToState.hasOwnProperty(t)&&(e.idToState[t]=d.idToState[t]);for(t in d.urlToId)d.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=d.urlToId[t]);for(t in d.stateToId)d.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=d.stateToId[t]);d.store=e,d.normalizeStore(),n=u.stringify(e);try{a.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;a.length&&(a.removeItem("History.store"),a.setItem("History.store",n))}},d.intervalList.push(l(d.onUnload,d.options.storeInterval)),d.Adapter.bind(e,"beforeunload",d.onUnload),d.Adapter.bind(e,"unload",d.onUnload)),d.emulated.pushState||(d.bugs.safariPoll&&d.intervalList.push(l(d.safariStatePoll,d.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(d.Adapter.bind(e,"hashchange",function(){d.Adapter.trigger(e,"popstate")}),
d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(e,"hashchange")})))},(!d.options||!d.options.delayInit)&&d.init()}(window),define("lib-app/history.min",function(){}),define("storymaps/common/Core",["lib-build/css!lib-app/bootstrap/css/bootstrap.min","lib-build/css!storymaps/common/ui/Modal.css","lib-build/css!./Core","lib-app/jquery","./utils/Polyfills","esri/map","esri/arcgis/Portal","esri/arcgis/utils","./utils/CommonHelper","esri/urlUtils","storymaps/common/ui/EmbedBar/EmbedBar","./builder/MyStoriesWrapper","dojo/has","esri/IdentityManager","esri/arcgis/OAuthInfo","esri/config","esri/tasks/GeometryService","esri/request","dojo/topic","dojo/on","dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","dojo/Deferred","dojo/DeferredList","dojo/query","lib-app/jquery.fastClick","lib-app/bootstrap/js/bootstrap.min","lib-app/history.min"],function(e,t,n,i,r,a,o,s,l,p,u,c,d,f,h,m,g,v,b,y,w,x,C,T,S,k,_){function E(e,t){var n=!1,i=!1;if(console.log("common.core.Core - init",t),pe=e,app.userCanEdit=!1,ne(),null!=t&&(n=null!=ue.fromScratch||null!=ue.fromscratch,i=null!=ue.fromGallery),l.browserSupportHistory()||!n&&!i||null!=ue.ieredirected||(window.location=document.location.protocol+"//"+document.location.host+document.location.pathname+"#"+document.location.search+"&ieredirected"),l.isArcGISHosted()?app.indexCfg={}:ie()||(app.indexCfg={proxyurl:app.indexCfg.proxyurl,sharingurl:app.indexCfg.sharingurl,username:app.indexCfg.username,password:app.indexCfg.password,oAuthAppId:app.indexCfg.oAuthAppId}),ue.sharinghost&&(app.indexCfg.sharingurl=ue.sharinghost),!pe.checkConfigFileIsOK())return void N("invalidConfig");if(document.title=app.cfg.TPL_NAME,d("touch")&&$("body").addClass("hasTouch"),app.appCfg.noFastClick||(_.prototype._needsClick=_.prototype.needsClick,_.prototype.needsClick=function(e){return!!$(e).parents(".esriPopup").length||_.prototype._needsClick.call(this,e)},_.attach(document.body)),window!=window.top&&$("body").addClass("isEmbed"),w.mixin(app,{map:null,maps:{},portal:null,builder:t,isDirectCreation:n,isGalleryCreation:i,isDirectCreationFirstSave:n,isLoading:!0,loadingTimeout:null,ui:{}}),app.appCfg.useStandardHeader&&require(["storymaps/common/ui/header/Desktop"],function(e){app.ui.headerDesktop=new e($("#headerDesktop"),app.isInBuilder)}),pe.init(this)){if(!ie()&&app.indexCfg.username&&app.indexCfg.password&&y(f,"dialog-create",function(){y(f.dialog,"show",function(){f.dialog.txtUser_.set("value",app.indexCfg.username),f.dialog.txtPwd_.set("value",app.indexCfg.password),f.dialog.btnSubmit_.onClick()})}),J(),!app.indexCfg.sharingurl){var r=document.location.pathname.indexOf("/apps/");if(-1==r&&(r=document.location.pathname.indexOf("/home/")),-1!=r){var a=location.pathname.substr(0,r);app.indexCfg.sharingurl="//"+location.host+a+"/sharing/rest/content/items",app.indexCfg.proxyurl="//"+location.host+a+"/sharing/proxy"}else app.indexCfg.sharingurl=app.cfg.DEFAULT_SHARING_URL}ue.sharinghost&&(app.indexCfg.sharingurl=ue.sharinghost),app.indexCfg.sharingurl.match(/^http/)?s.arcgisUrl=app.indexCfg.sharingurl:s.arcgisUrl=location.protocol+app.indexCfg.sharingurl,app.indexCfg.proxyurl||(app.indexCfg.proxyurl=app.cfg.DEFAULT_PROXY_URL),m.defaults.io.proxyUrl=location.protocol+app.indexCfg.proxyurl,f&&f.setProtocolErrorHandler(function(){return!0}),app.isInBuilder&&app.cfg.CORS_SERVER&&$.each(app.cfg.CORS_SERVER,function(e,t){m.defaults.io.corsEnabledServers.push(t)}),app.cfg.PROXY_RULES&&app.cfg.PROXY_RULES.length&&$.each(app.cfg.PROXY_RULES,function(e,t){t&&t.urlPrefix&&t.proxyUrl&&p.addProxyRule(t)}),m.defaults.io.timeout=app.isInBuilder?app.cfg.TIMEOUT_BUILDER_REQUEST:app.cfg.TIMEOUT_VIEWER_REQUEST,$.fn.modal.Constructor.prototype.enforceFocus=function(){},pe.initLocalization(),$(window).resize(q),$("form").bind("keydown",function(e){if(13==e.keyCode)return!1}),y(f,"dialog-create",X),b.subscribe("CORE_UPDATE_UI",U),b.subscribe("CORE_RESIZE",q),b.subscribe("CORE_UPDATE_EXTENT",W),app.portal=new o.Portal(app.indexCfg.sharingurl.split("/sharing/")[0]),app.portal.on("load",function(e){app.isPortal=!!e.isPortal,re(),f.checkSignInStatus(app.portal.portalUrl),l.fetchPortalSelfInfo().then(function(){if(app.indexCfg.oAuthAppId){var e=new h({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+app.indexCfg.sharingurl.split("/sharing/")[0]});f.registerOAuthInfos([e]),f.checkSignInStatus(e.portalUrl).then(function(){O().then(A)},function(){t?O().then(A):A()})}else A()})})}}function A(){console.log("common.core.Core - initStep2");var e=l.getAppID(ie()),t=l.getWebmapID(ie()),n=!(app.appCfg&&!app.appCfg.supportWebmapPreviewAGOL);if(e)return void I(e);var i=l.getUrlParams().insights;if(app.isDirectCreation&&i)return i.match(/^[a-fA-F0-9]{32}$/)?void O().then(function(){R(),app.isInitializing=!1,app.data.setStoryStorage("WEBAPP"),s.getItem(i).then(function(e){if(!e)return void N("appLoadingFail");var t=e.item;if(!t.url)return void N("appLoadingFail");app.data.getWebAppData().setTitle(t.title+" - story");var n=location.protocol+app.indexCfg.sharingurl.split("/sharing/")[0]+"/apps/insights/#/embed/"+i;app.data.addStorySection({title:t.title,creaDate:Date.now(),status:"PUBLISHED",media:{type:"webpage",webpage:{url:n,display:"stretch",unload:!1}},description:t.description}),app.data.getWebAppData().setLayout({id:"tab"}),app.data.getWebAppData().setLayoutOptions({description:!0,legend:"panel",panel:{position:"right",size:"medium"},panelMapOverlap:!1}),app.data.setCurrentSectionIndex(0),b.publish("story-update-entries"),b.publish("BUILDER_INCREMENT_COUNTER",1),z(),b.publish("CORE_UPDATE_UI"),j()},function(){N("appLoadingFail")})}):void N("appLoadingFail");var r=l.getUrlParams().webmap;return app.isDirectCreation&&(t||r)?void O().then(function(){R(),"opendata"==l.getUrlParams().source&&(app.isDirectCreationOpenData=!0),app.isInitializing=!1,app.data.setStoryStorage("WEBAPP");var e=(t||r).split(","),n=[];$.each(e,function(e,t){if(t.match(/^[a-fA-F0-9]{32}$/)&&!(app.data.getStoryLength()>=app.cfg.MAX_NB_ENTRIES)){var i={title:"",contentActions:[],creaDate:Date.now(),status:"PUBLISHED",media:{type:"webmap",webmap:{id:t,extent:null,layers:null,popup:null,legend:{enable:!1,openByDefault:!1}}},description:""};n.push(i),app.data.addStorySection(i)}}),app.data.getWebAppData().setLayout({id:"tab"}),app.data.getWebAppData().setDefaultLayoutOptions(),app.data.getWebAppData().setMapOptions({mapsSync:!1});var i=0,a=n.length,o=b.subscribe("story-loaded-map",function(e){if(app.maps[e.id]){var t=app.maps[e.id].response.itemInfo.item;$.each(n,function(n,r){r.media.webmap.id==e.id&&(0===n&&app.data.getWebAppData().setTitle(t.title),r.title=t.title,r.description=t.description,app.data.editSection(n,r),i++)})}else console.log("Could not load web map with id:",e.id),a--;i==a&&(o.remove(),z(),b.publish("CORE_UPDATE_UI"),b.publish("story-update-entries"),j())});app.data.setCurrentSectionIndex(0),b.publish("story-update-entries"),b.publish("BUILDER_INCREMENT_COUNTER",1),app.ui.mainStage.preloadAllMaps(!0)}):t&&!n?void(l.isArcGISHosted()?B():P(t)):app.isDirectCreation&&ie()&&l.isArcGISHosted()&&!l.getPortalUser()&&!app.portal.getPortalUser()?void Q():app.isDirectCreation?void O().then(function(){var e=new h({appId:"storymaps",portalUrl:"https:"+app.indexCfg.sharingurl.split("/sharing")[0],popup:!0});f.registerOAuthInfos([e]),f.checkAppAccess("https:"+app.indexCfg.sharingurl,"storymaps").then(function(e){return e&&e.code&&"IdentityManagerBase.1"===e.code?void N("notAuthorizedBuilder"):e.viewOnly?void N("viewOnlyLicense"):(R(),pe.startFromScratch(),z(),void 0)},function(){N("notAuthorizedBuilder")})}):void(l.isArcGISHosted()?B():N(!ue.appid||app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners[0]?app.isProduction?"invalidConfigNoApp":"invalidConfigNoAppDev":"unspecifiedConfigOwner"))}function I(e){console.log("common.core.Core - loadWebMappingApp - appId:",e),void 0!==ue.forceLogin||app.isInBuilder?O().then(function(){L(e)},function(){N("notAuthorized")}):L(e)}function L(e){s.getItem(e).then(function(e){if(!e)return void N("appLoadingFail");var t=new h({appId:"storymaps",portalUrl:"https:"+app.indexCfg.sharingurl.split("/sharing")[0],popup:!0});if(f.registerOAuthInfos([t]),"public"!==e.item.access||app.isInBuilder)f.checkAppAccess("https:"+app.indexCfg.sharingurl,"storymaps").then(function(t){return t&&t.code&&"IdentityManagerBase.1"===t.code?void N("notAuthorizedLicense"):app.isInBuilder&&t.viewOnly?void N("viewOnlyLicense"):void D(e)},function(){N("notAuthorizedLicense")});else{if(app.isPortal||!e.item.contentOrigin||"self"===e.item.contentOrigin||app.portal&&(l.getPortalUser()||app.portal.getPortalUser())||window.top!==window.self)return void D(e);N("nonOwnerOrgUrl")}},function(e){N(e&&400==e.httpCode?"invalidApp":e&&403==e.httpCode?"notAuthorized":"appLoadingFail")})}function D(e){var t=e.item,n=e.itemData;if(app.data.setWebAppItem(t),"shortlist"==app.appCfg.mediaPickerConfigureForceMode&&app.cfg.HTML_SANITIZER_DATE&&t.created>app.cfg.HTML_SANITIZER_DATE&&(n=app.sanitizer.sanitize(n)),app.data.getWebAppData().set(n),app.userCanEdit=app.data.userIsAppOwner(),app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]){var i=t.owner,r=!1;if(i&&(r=-1!=$.inArray(i,app.indexCfg.authorizedOwners)),r||"*"!=app.indexCfg.authorizedOwners[0]||(r=!0),r||$.each(app.indexCfg.authorizedOwners,function(e,n){var i=n.match(/^\[(.*)\]$/);i&&t.orgId==i[1]&&(r=!0)}),!r)return void N("invalidConfigOwner")}if(t&&t.appProxies){var a=x.map(t.appProxies,function(e){return{url:e.sourceUrl,mixin:{url:e.proxyUrl}}});app.data.setAppProxies(a)}if(app.isInBuilder&&ie()&&!app.userCanEdit)return void N("notAuthorized");pe.webAppConfigLoaded();var o=!(app.appCfg&&!app.appCfg.useWebmapInApp),s=app.data.getWebAppData().getWebmap()||l.getWebmapID(ie());s&&o&&app.data.getWebAppData().isBlank()||app.isGalleryCreation?(pe.startFromScratch(),R()):s&&o?P(s):!o||!s&&o?(R(),pe.loadWebmapFromData()):l.getPortalUser()||!ie()&&app.data.getWebAppData().isBlank()?Z():app.data.getWebAppData().isBlank()?N("appLoadingFail"):P(app.data.getWebAppData().getViews()[0].cfg.webmap.id)}function O(){var e=new T;return y(f,"dialog-create",Y),app.portal.signIn().then(function(){if(app.isInBuilder&&!app.data.checkUserItemPrivileges())return void N("notAuthorizedBuilder");l.fetchPortalSelfInfo().then(function(){app.userCanEdit=app.data.userIsAppOwner(),re(),e.resolve()})},function(){e.reject()}),e}function P(e){pe.loadFirstWebmap(e).then(w.hitch(this,function(e){M(e)}),w.hitch(this,function(){N("createMap")}))}function M(e){console.log("common.core.Core - webMapInitCallback"),app.maps[e.itemInfo.item.id]=pe.getMapConfig(e),app.map=e.map,app.data.setWebMap(e.itemInfo),app.map.disableKeyboardNavigation(),R(),pe.firstWebmapLoaded()}function B(){window.location=app.isPortal&&app.cfg.HELP_URL_PORTAL?app.cfg.HELP_URL_PORTAL:app.cfg.HELP_URL}function R(){var e=app.indexCfg.title||app.data.getWebAppData().getTitle(),t=app.indexCfg.subtitle||app.data.getWebAppData().getSubtitle(),n=app.data.getWebAppData().getColors();app.ui.headerDesktop&&app.ui.headerDesktop.init(!app.isInBuilder&&(app.cfg.EMBED||ue.embed||""===ue.embed),e,t,G(),n,V(),app.appCfg.headerCompactByDefault),app.appCfg.useAppTitleAsPageTitle&&(document.title=e?$("<div>"+e+"</div>").text():app.cfg.TPL_NAME)}function z(){if(console.log("common.core.Core - initApp"),!app.embedBar||app.embedBar&&!app.embedBar.initiated){var e=esri.urlToObject(document.location.search).query||{},t=!!e.classicEmbedMode||(""===e.classicEmbedMode||(!!e.classicembedmode||""===e.classicembedmode)),n="resources/tpl/viewer/icons/esri-logo-white.png"==app.data.getWebAppData().getLogoURL(),i=i18n.commonCore.embedBar;w.mixin(i,{open:i18n.viewer.shareFromCommon.open,close:i18n.viewer.common.close,shareFacebook:i18n.viewer.headerFromCommon.facebookTooltip,shareTwitter:i18n.viewer.headerFromCommon.twitterTooltip});var r=[$(".shareBtns")];"shortlist"!=app.appCfg.mediaPickerConfigureForceMode&&r.push($(".share-btn")),app.embedBar=new u({classicEmbedMode:t,strings:i,appCreationDate:app.data.getWebAppItem().created,june2018ReleaseDate:app.cfg.JUNE_RELEASE_DATE,isBuilder:app.isInBuilder,isEsriLogo:n,logoPath:"resources/common/icons/esri-logo-black.png",logoElements:[$(".logoContainer")],taglineElements:[$(".linkContainer")],shareElements:r,appTitle:app.data.getWebAppData().getTitle(),bitlyCreds:[app.cfg.HEADER_SOCIAL.bitly.key,app.cfg.HEADER_SOCIAL.bitly.login]})}q(),location.hash&&l.browserSupportHistory()&&(location.hash="map"),window.onhashchange=function(){pe.prepareMobileViewSwitch(),pe.onHashChange()},pe.appInitComplete(),app.builder&&app.builder.appInitComplete();var a="true"===ue.preview||""===ue.preview,o="true"===ue.autoplay||""===ue.autoplay;!app.isInBuilder&&!app.userCanEdit||9==d("ie")||a||o||(d("ff")&&$(".builderShare #my-stories-frame").remove(),!d("ff")&&app.isInBuilder||$("body").append('<div id="my-stories-hidden-container"><iframe id="my-stories-frame"></iframe></div>'),c.loadMyStories()),document.location.pathname.match(/\/apps\/[a-zA-Z]+\/$/)&&document.location.search.match(/^\?appid=/)&&(!d("ie")||d("ie")>=10)&&History.replaceState({},"","index.html"+document.location.search+document.location.hash);var s=document.location.search;s&&(s=s.replace("&preview",""))!=document.location.search&&window.history.replaceState({},"","index.html"+s+document.location.hash)}function j(){app.isLoading=!1,$("#headerDesktop").removeAttr("aria-hidden"),$("#loadingIndicator, #loadingMessage").addClass("fadeOut").fadeOut(400),$("#loadingOverlay").fadeOut(800)}function N(e,t,n){var i=i18n.viewer.errors[e];if(ee(),$("#loadingIndicator").hide(),"notAuthorizedLicense"==e?(i=i18n.commonCore.licenseChange2018.noAccess,i=i.replace(/%USER_NAME%/g,l.getPortalUser()?l.getPortalUser():"")):"viewOnlyLicense"==e?(i=i18n.commonCore.storyTellerUserType.notCreatorError,i=i.replace(/%USER_NAME%/g,l.getPortalUser()?l.getPortalUser():"")):i=i.replace(/%TPL_NAME%/g,app.cfg.TPL_NAME),"notAuthorized"==e&&app.indexCfg.oAuthAppId&&(i+='<div><button class="btn btn-sm btn-default" onclick="esri.id.destroyCredentials(); window.location.reload();">'+i18n.viewer.errors.signOut+"</button></div>"),"nonOwnerOrgUrl"==e){var r=app.portal&&app.portal.portalHostname||app.cfg.DEFAULT_SHARING_URL.split("/sharing")[0].replace(/\//g,""),a="https://"+r+"/apps/"+app.cfg.TPL_DIR+"/index.html?appid="+l.getAppID(ie());window.showLink=function(){$("#proceed-to-btn").hide(),$("#proceed-to-link").show()};var o='<a id="proceed-to-link" style="display: none;" href="'+a+'">'+i18n.viewer.errors.nonOwnerOrgProceedToGeneric.replace(/%HREF%/g,a);i+='<div class="error-details">'+('<button id="proceed-to-btn" class="btn btn-default btn-sm" onclick="showLink();">'+i18n.viewer.errors.advanced+"</button>")+o+"</div>"}"appLoadingFail"==e?$("#loadingMessage").html('<div id="loadingRetry"> <button type="button" class="btn btn-naked btn-sm" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+" </button></div>").hide().fadeIn(1200,function(){$("#loadingMessage").addClass("loaded")}):$("#loadingMessage").hide(),8==d("ie")&&($("#fatalError-icon").css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='_resources/icons/warning-icon.png', sizingMethod='scale')",backgroundPosition:"2px 3px",width:78}),$("#fatalError-msg").css({paddingLeft:5})),$("#fatalError .error-msg").html(i),n||$("#fatalError").show()}function H(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function W(e,t){if(t=t||app.map,!(e&&e.spatialReference&&t&&t.extent.spatialReference&&t.spatialReference)){var n=new T;return n.resolve(),n}var i=!!app.appCfg.mapExtentFit&&app.appCfg.mapExtentFit;if(t.spatialReference.wkid==e.spatialReference.wkid)return t.setExtent(pe.getLayoutExtent(e,!1),i);var r=new T;return m.defaults.geometryService.project([e],t.spatialReference,function(e){if(e&&e[0]){var n=pe.getLayoutExtent(e[0],!1);t.setExtent(n,i),r.resolve()}}),r}function F(e,t){e?102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?m.defaults.geometryService.project([t],app.map.spatialReference,function(e){e&&e[0]&&(app.map.extent.contains(e[0])||app.map.centerAt(e[0]))}):app.map.extent.contains(t)||app.map.centerAt(t):($(".mainMediaContainer.active .mapLocationMsg").html(i18n.viewer.locatorFromCommon.error),$(".mainMediaContainer.active .mapLocationError").fadeIn(),setTimeout(function(){$(".mainMediaContainer.active .mapLocationError").fadeOut()},5e3))}function U(){console.log("common.core.Core - updateUI");var e=app.data.getWebAppData().getColors();app.ui.headerDesktop&&(app.ui.headerDesktop.setTitleAndSubtitle(app.data.getWebAppData().getTitle()||(app.data.getWebMap()?app.data.getWebMap().item.title:""),app.data.getWebAppData().getSubtitle()||(app.data.getWebMap()?app.data.getWebMap().item.snippet:"")),app.ui.headerDesktop.update(G(),e,app.appCfg.headerCompactByDefault)),pe.updateUI(),q()}function G(e){return{logoURL:app.data.getWebAppData().getLogoURL(e&&e.useMobileLogo),logoTarget:app.data.getWebAppData().getLogoTarget(),linkText:app.data.getWebAppData().getHeaderLinkText(),linkURL:app.data.getWebAppData().getHeaderLinkURL(),socialBtn:app.data.getWebAppData().getSocial(),compactSize:app.data.getWebAppData().getHeaderCompactSize()}}function q(){var e=$("body").width(),t=$("body").height(),n=0,i=0,r=void 0!==ue.forceDesktop||app.indexCfg.forceDesktop,a=void 0!==ue.forceMobile||app.indexCfg.forceMobile,o=e<=768||a,s=!$(".centerLink").length||$(".centerLink").hasClass("current");if(r&&(o=!1),o?$("body").addClass("mobile-view"):$("body").removeClass("mobile-view"),$(".mainViewAboveMap, .mainViewBelowMap").each(function(e,t){var i=$(t);n+=i.is(":visible")?i.outerHeight():0}),$(".mainViewSideMap").each(function(e,t){var n=$(t);i+=n.is(":visible")?n.outerWidth():0}),app.ui.headerDesktop&&app.ui.headerDesktop.resize(e),app.initScreenIsOpen&&($("#header").css("display",o?"none":"block"),$("#fatalError").css("display",o?"block":"none")),app.initScreenIsOpen||$("#contentPanel").height(t-n),pe.resize({isMobileView:o,isOnMobileMapView:s,width:e,height:t-n}),app.isInBuilder&&app.builder.resize({isMobileView:o}),app.map&&(!o||o&&s))try{app.map.resize(!!app.appCfg.mapsImmediateResize)}catch(e){}o?$(".mapContainer .esriControlsBR > div").first().removeClass("logo-med").addClass("logo-sm"):$(".mapContainer .esriControlsBR > div").first().removeClass("logo-sm").addClass("logo-med")}function V(){return!app.isInBuilder&&(!ie()&&!!l.getAppID(ie())||ie()&&app.userCanEdit)&&(void 0===ue.autoplay||"false"==ue.autoplay)&&(void 0===ue.preview||"false"==ue.preview)}function X(){$(".esriSignInDialog td label").siblings("br").css("display","none"),$(".esriSignInDialog .dijitDialogPaneContentArea div:nth(1)").css("display","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("padding","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("margin-bottom","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-border-radius","0px"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-webkit-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitInputInner").css("-moz-box-shadow","none"),$(".esriSignInDialog .dijitReset.dijitValidationContainer").css("display","none"),$(".esriSignInDialog .esriErrorMsg").css("margin-top","10px"),$(".esriSignInDialog").find(".dijitDialogTitleBar").find(".dijitDialogTitle").first().html(i18n.viewer.signin.title),f._arcgisUrl&&($(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().css("display","none"),$(".esriSignInDialog").find(".dijitDialogPaneContentArea:first-child").find(":first-child").first().after("<div id='dijitDialogPaneContentAreaLoginText'>"+i18n.viewer.signin.explainViewer.replace("%PORTAL_LINK%","<a href='http://"+f._arcgisUrl+"' title='"+f._arcgisUrl+"' target='_blank'>"+f._arcgisUrl+"</a>")+"</div>"))}function Y(){f._arcgisUrl&&$(".esriSignInDialog").find("#dijitDialogPaneContentAreaLoginText").html(i18n.viewer.signin.explainBuilder.replace("%PORTAL_LINK%","<a href='http://"+f._arcgisUrl+"' title='"+f._arcgisUrl+"' target='_blank'>"+f._arcgisUrl+"</a>"))}function K(){$("#header").css("display","inherit"),$(".mobileView").css("display","inherit"),$("#fatalError").css("display","none"),$("#loadingOverlay").css("top","0px"),J(),q()}function Q(){window.location=s.arcgisUrl.split("/sharing/")[0]+"/home/signin.html?returnUrl="+encodeURIComponent(document.location.href)}function Z(){window.location=document.location.href+"&fromGallery"}function J(){app.loadingTimeout=setTimeout(te,app.cfg.TIMEOUT_VIEWER_LOAD)}function ee(){"undefined"!=typeof app&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function te(){if(f&&f.dialog&&f.dialog._alreadyInitialized&&!f.loadingTimeoutAlreadyFired)return clearTimeout(app.loadingTimeout),J(),void(f._busy||(f.loadingTimeoutAlreadyFired=!0));$("#loadingMessage").html('<div class="mainMessage">'+i18n.viewer.loading.long+"<br />"+i18n.viewer.loading.long2+"</div>").fadeIn("slow",function(){$("#loadingMessage").addClass("loaded")})}function ne(){document.documentElement.lang=C.locale,k("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle;var e=i18n.viewer.a11y;e&&($(".skip-to-content").html(e.skipToContent),$('header[role="banner"]').attr("aria-label",e.headerAria),$('#nav-bar[role="navigation"]').attr("aria-label",e.navAria),$('[role="main"]').attr("aria-label",e.panelAria),$(".loop-to-top").html(e.toTop),$(".loading-gif").attr("alt",e.loadingAria).html(),$(".mainStagePanel").attr("aria-label",e.mainStageAria))}function ie(){return le.environment!=["TPL","ENV","DEV"].join("_")}function re(){if(console.log("common.core.Core - parsePortalConfig"),app.portal){if(app.data.getWebAppData().getAppGeocoders){var e=app.data.getWebAppData().getAppGeocoders(),t=e?e.map(function(e){return e.url}):[],n=[];app.cfg.HELPER_SERVICES.geocode&&app.cfg.HELPER_SERVICES.geocode.length&&($.each(app.portal.helperServices.geocode,function(e,i){i.url&&t.indexOf(i.url)<0&&n.push(i)}),app.cfg.HELPER_SERVICES.geocode=n)}var i;if(app.cfg.HELPER_SERVICES.geometry&&app.cfg.HELPER_SERVICES.geometry.url?i=app.cfg.HELPER_SERVICES.geometry.url:app.portal.helperServices.geometry&&app.portal.helperServices.geometry.url&&(i=app.portal.helperServices.geometry.url),m.defaults.geometryService=new g(i),!app.cfg.BING_MAPS_KEY&&app.portal.bingKey&&(app.cfg.BING_MAPS_KEY=app.portal.bingKey),app.portal.isPortal&&app.cfg&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&(app.cfg.AUTHORIZED_IMPORT_SOURCE.featureService=!1),app.isPortal=!!app.portal.isPortal,app.isPortal&&app.portal.helpBase&&app.portal.portalHostname&&!app.cfg.HELP_URL_PORTAL.match("^//")){var r=app.portal.portalHostname.split("/")[0];app.cfg.HELP_URL_PORTAL="//"+r+app.portal.helpBase+app.cfg.HELP_URL_PORTAL}}}function ae(){var e="notConfiguredMobile";ee(),app.isInitializing=!0,app.initScreenIsOpen=!0,d("touch")&&l.isMobile()&&(window.innerHeight>window.innerWidth?window.innerHeight>768&&(e="notConfiguredMobile2"):window.innerWidth>768&&(e="notConfiguredMobile2")),N(e,null,!0),setTimeout(q,50)}function oe(){$("#initPopup").modal("hide"),app.initScreenIsOpen=!1}function se(){H("notConfiguredDesktop"),$("#loadingOverlay").css("top","0px"),$("#header").css("display","inherit"),$("#fatalError").css("display","block"),app.initScreenIsOpen=!1,q()}var le={environment:"TPL_ENV_PRODUCTION"},pe=null,ue=l.getUrlParams();return r.apply(),{init:E,isProd:ie,appInitComplete:z,displayApp:j,loadWebMap:P,handleWindowResize:q,hasSwitchBuilderButton:V,initPopupPrepare:ae,initPopupComplete:oe,initPopupFail:se,setMapExtent:W,zoomToDeviceLocation:F,getHeaderUserCfg:G,cleanLoadingTimeout:ee,initError:N,prepareAppForWebmapReload:K,replaceInitErrorMessage:H,portalLogin:O}}),define("lib-build/css!storymaps/common/ui/header/Desktop",[],function(){}),define("text",{}),function(){function e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function t(e,t,n,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var o=e[r];t(i,o,n(o),e)}return i}function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function r(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function a(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a}function o(e,t){return!!(null==e?0:e.length)&&v(e,t,0)>-1}function s(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function l(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function p(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function u(e,t,n,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function c(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function d(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function f(e){return e.split("")}function h(e){return e.match(Mt)||[]}function m(e,t,n){var i;return n(e,function(e,n,r){if(t(e,n,r))return i=n,!1}),i}function g(e,t,n,i){for(var r=e.length,a=n+(i?1:-1);i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function v(e,t,n){return t===t?G(e,t,n):g(e,y,n)}function b(e,t,n,i){for(var r=n-1,a=e.length;++r<a;)if(i(e[r],t))return r;return-1}function y(e){return e!==e}function w(e,t){var n=null==e?0:e.length;return n?k(e,t)/n:$e}function x(e){return function(t){return null==t?J:t[e]}}function C(e){return function(t){return null==e?J:e[t]}}function T(e,t,n,i,r){return r(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)}),n}function S(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function k(e,t){for(var n,i=-1,r=e.length;++i<r;){var a=t(e[i]);a!==J&&(n=n===J?a:n+a)}return n}function _(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function E(e,t){return l(t,function(t){return[t,e[t]]})}function A(e){return e?e.slice(0,Y(e)+1).replace(Lt,""):e}function I(e){return function(t){return e(t)}}function L(e,t){return l(t,function(t){return e[t]})}function $(e,t){return e.has(t)}function D(e,t){for(var n=-1,i=e.length;++n<i&&v(t,e[n],0)>-1;);return n}function O(e,t){for(var n=e.length;n--&&v(t,e[n],0)>-1;);return n}function P(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}function M(e){return"\\"+Mn[e]}function B(e,t){return null==e?J:e[t]}function R(e){return _n.test(e)}function z(e){return En.test(e)}function j(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function N(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function H(e,t){return function(n){return e(t(n))}}function W(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o=e[n];o!==t&&o!==oe||(e[n]=oe,a[r++]=n)}return a}function F(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function U(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function G(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function q(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}function V(e){return R(e)?K(e):Zn(e)}function X(e){return R(e)?Q(e):f(e)}function Y(e){for(var t=e.length;t--&&$t.test(e.charAt(t)););return t}function K(e){for(var t=Sn.lastIndex=0;Sn.test(e);)++t;return t}function Q(e){return e.match(Sn)||[]}function Z(e){return e.match(kn)||[]}
var J,ee=200,te="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ne="Expected a function",ie="Invalid `variable` option passed into `_.template`",re="__lodash_hash_undefined__",ae=500,oe="__lodash_placeholder__",se=1,le=2,pe=4,ue=1,ce=2,de=1,fe=2,he=4,me=8,ge=16,ve=32,be=64,ye=128,we=256,xe=512,Ce=30,Te="...",Se=800,ke=16,_e=1,Ee=2,Ae=1/0,Ie=9007199254740991,Le=1.7976931348623157e308,$e=NaN,De=4294967295,Oe=De-1,Pe=De>>>1,Me=[["ary",ye],["bind",de],["bindKey",fe],["curry",me],["curryRight",ge],["flip",xe],["partial",ve],["partialRight",be],["rearg",we]],Be="[object Arguments]",Re="[object Array]",ze="[object AsyncFunction]",je="[object Boolean]",Ne="[object Date]",He="[object DOMException]",We="[object Error]",Fe="[object Function]",Ue="[object GeneratorFunction]",Ge="[object Map]",qe="[object Number]",Ve="[object Null]",Xe="[object Object]",Ye="[object Promise]",Ke="[object Proxy]",Qe="[object RegExp]",Ze="[object Set]",Je="[object String]",et="[object Symbol]",tt="[object Undefined]",nt="[object WeakMap]",it="[object WeakSet]",rt="[object ArrayBuffer]",at="[object DataView]",ot="[object Float32Array]",st="[object Float64Array]",lt="[object Int8Array]",pt="[object Int16Array]",ut="[object Int32Array]",ct="[object Uint8Array]",dt="[object Uint8ClampedArray]",ft="[object Uint16Array]",ht="[object Uint32Array]",mt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,yt=/[&<>"']/g,wt=RegExp(bt.source),xt=RegExp(yt.source),Ct=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_t=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,At=/[\\^$.*+?()[\]{}|]/g,It=RegExp(At.source),Lt=/^\s+/,$t=/\s/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,Pt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bt=/[()=,{}\[\]\/\s]/,Rt=/\\(\\)?/g,zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jt=/\w*$/,Nt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Ft=/^0o[0-7]+$/i,Ut=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qt=/($^)/,Vt=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",Yt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Kt="\\u2700-\\u27bf",Qt="a-z\\xdf-\\xf6\\xf8-\\xff",Zt="A-Z\\xc0-\\xd6\\xd8-\\xde",Jt="\\ufe0e\\ufe0f",en="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="['’]",nn="["+en+"]",rn="["+Yt+"]",an="["+Qt+"]",on="[^"+Xt+en+"\\d+"+Kt+Qt+Zt+"]",sn="\\ud83c[\\udffb-\\udfff]",ln="[^"+Xt+"]",pn="(?:\\ud83c[\\udde6-\\uddff]){2}",un="[\\ud800-\\udbff][\\udc00-\\udfff]",cn="["+Zt+"]",dn="\\u200d",fn="(?:"+an+"|"+on+")",hn="(?:['’](?:d|ll|m|re|s|t|ve))?",mn="(?:['’](?:D|LL|M|RE|S|T|VE))?",gn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",vn="["+Jt+"]?",bn="(?:"+dn+"(?:"+[ln,pn,un].join("|")+")"+vn+gn+")*",yn=vn+gn+bn,wn="(?:"+["[\\u2700-\\u27bf]",pn,un].join("|")+")"+yn,xn="(?:"+[ln+rn+"?",rn,pn,un,"[\\ud800-\\udfff]"].join("|")+")",Cn=RegExp(tn,"g"),Tn=RegExp(rn,"g"),Sn=RegExp(sn+"(?="+sn+")|"+xn+yn,"g"),kn=RegExp([cn+"?"+an+"+"+hn+"(?="+[nn,cn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+"+mn+"(?="+[nn,cn+fn,"$"].join("|")+")",cn+"?"+fn+"+"+hn,cn+"+"+mn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",wn].join("|"),"g"),_n=RegExp("["+dn+Xt+Yt+Jt+"]"),En=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,An=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],In=-1,Ln={};Ln[ot]=Ln[st]=Ln[lt]=Ln[pt]=Ln[ut]=Ln[ct]=Ln[dt]=Ln[ft]=Ln[ht]=!0,Ln[Be]=Ln[Re]=Ln[rt]=Ln[je]=Ln[at]=Ln[Ne]=Ln[We]=Ln[Fe]=Ln[Ge]=Ln[qe]=Ln[Xe]=Ln[Qe]=Ln[Ze]=Ln[Je]=Ln[nt]=!1;var $n={};$n[Be]=$n[Re]=$n[rt]=$n[at]=$n[je]=$n[Ne]=$n[ot]=$n[st]=$n[lt]=$n[pt]=$n[ut]=$n[Ge]=$n[qe]=$n[Xe]=$n[Qe]=$n[Ze]=$n[Je]=$n[et]=$n[ct]=$n[dt]=$n[ft]=$n[ht]=!0,$n[We]=$n[Fe]=$n[nt]=!1;var Dn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},On={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bn=parseFloat,Rn=parseInt,zn="object"==typeof global&&global&&global.Object===Object&&global,jn="object"==typeof self&&self&&self.Object===Object&&self,Nn=zn||jn||Function("return this")(),Hn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wn=Hn&&"object"==typeof module&&module&&!module.nodeType&&module,Fn=Wn&&Wn.exports===Hn,Un=Fn&&zn.process,Gn=function(){try{var e=Wn&&Wn.require&&Wn.require("util").types;return e||Un&&Un.binding&&Un.binding("util")}catch(e){}}(),qn=Gn&&Gn.isArrayBuffer,Vn=Gn&&Gn.isDate,Xn=Gn&&Gn.isMap,Yn=Gn&&Gn.isRegExp,Kn=Gn&&Gn.isSet,Qn=Gn&&Gn.isTypedArray,Zn=x("length"),Jn=C(Dn),ei=C(On),ti=C(Pn),ni=function f(C){function G(e){if(rl(e)&&!md(e)&&!(e instanceof $t)){if(e instanceof Q)return e;if(mu.call(e,"__wrapped__"))return eo(e)}return new Q(e)}function K(){}function Q(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=J}function $t(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function Mt(){var e=new $t(this.__wrapped__);return e.__actions__=Mr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mr(this.__views__),e}function Xt(){if(this.__filtered__){var e=new $t(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yt(){var e=this.__wrapped__.value(),t=this.__dir__,n=md(e),i=t<0,r=n?e.length:0,a=Sa(0,r,this.__views__),o=a.start,s=a.end,l=s-o,p=i?s:o-1,u=this.__iteratees__,c=u.length,d=0,f=Gu(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return br(e,this.__actions__);var h=[];e:for(;l--&&d<f;){p+=t;for(var m=-1,g=e[p];++m<c;){var v=u[m],b=v.iteratee,y=v.type,w=b(g);if(y==Ee)g=w;else if(!w){if(y==_e)continue e;break e}}h[d++]=g}return h}function Kt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Qt(){this.__data__=tc?tc(null):{},this.size=0}function Zt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Jt(e){var t=this.__data__;if(tc){var n=t[e];return n===re?J:n}return mu.call(t,e)?t[e]:J}function en(e){var t=this.__data__;return tc?t[e]!==J:mu.call(t,e)}function tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=tc&&t===J?re:t,this}function nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function rn(){this.__data__=[],this.size=0}function an(e){var t=this.__data__,n=zn(t,e);return!(n<0||(n==t.length-1?t.pop():Iu.call(t,n,1),--this.size,0))}function on(e){var t=this.__data__,n=zn(t,e);return n<0?J:t[n][1]}function sn(e){return zn(this.__data__,e)>-1}function ln(e,t){var n=this.__data__,i=zn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function un(){this.size=0,this.__data__={hash:new Kt,map:new(Qu||nn),string:new Kt}}function cn(e){var t=wa(this,e).delete(e);return this.size-=t?1:0,t}function dn(e){return wa(this,e).get(e)}function fn(e){return wa(this,e).has(e)}function hn(e,t){var n=wa(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function mn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new pn;++t<n;)this.add(e[t])}function gn(e){return this.__data__.set(e,re),this}function vn(e){return this.__data__.has(e)}function bn(e){this.size=(this.__data__=new nn(e)).size}function yn(){this.__data__=new nn,this.size=0}function wn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function xn(e){return this.__data__.get(e)}function Sn(e){return this.__data__.has(e)}function kn(e,t){var n=this.__data__;if(n instanceof nn){var i=n.__data__;if(!Qu||i.length<ee-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new pn(i)}return n.set(e,t),this.size=n.size,this}function _n(e,t){var n=md(e),i=!n&&hd(e),r=!n&&!i&&vd(e),a=!n&&!i&&!r&&Cd(e),o=n||i||r||a,s=o?_(e.length,lu):[],l=s.length;for(var p in e)!t&&!mu.call(e,p)||o&&("length"==p||r&&("offset"==p||"parent"==p)||a&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||Da(p,l))||s.push(p);return s}function En(e){var t=e.length;return t?e[Ji(0,t-1)]:J}function Dn(e,t){return Ka(Mr(e),Zn(t,0,e.length))}function On(e){return Ka(Mr(e))}function Pn(e,t,n){(n===J||Us(e[t],n))&&(n!==J||t in e)||Un(e,t,n)}function Mn(e,t,n){var i=e[t];mu.call(e,t)&&Us(i,n)&&(n!==J||t in e)||Un(e,t,n)}function zn(e,t){for(var n=e.length;n--;)if(Us(e[n][0],t))return n;return-1}function jn(e,t,n,i){return fc(e,function(e,r,a){t(i,e,n(e),a)}),i}function Hn(e,t){return e&&Br(t,jl(t),e)}function Wn(e,t){return e&&Br(t,Nl(t),e)}function Un(e,t,n){"__proto__"==t&&Ou?Ou(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Gn(e,t){for(var n=-1,i=t.length,r=tu(i),a=null==e;++n<i;)r[n]=a?J:Bl(e,t[n]);return r}function Zn(e,t,n){return e===e&&(n!==J&&(e=e<=n?e:n),t!==J&&(e=e>=t?e:t)),e}function ii(e,t,i,r,a,o){var s,l=t&se,p=t&le,u=t&pe;if(i&&(s=a?i(e,r,a,o):i(e)),s!==J)return s;if(!il(e))return e;var c=md(e);if(c){if(s=Ea(e),!l)return Mr(e,s)}else{var d=kc(e),f=d==Fe||d==Ue;if(vd(e))return kr(e,l);if(d==Xe||d==Be||f&&!a){if(s=p||f?{}:Aa(e),!l)return p?zr(e,Wn(s,e)):Rr(e,Hn(s,e))}else{if(!$n[d])return a?e:{};s=Ia(e,d,l)}}o||(o=new bn);var h=o.get(e);if(h)return h;o.set(e,s),xd(e)?e.forEach(function(n){s.add(ii(n,t,i,n,e,o))}):yd(e)&&e.forEach(function(n,r){s.set(r,ii(n,t,i,r,e,o))});var m=u?p?ga:ma:p?Nl:jl,g=c?J:m(e);return n(g||e,function(n,r){g&&(r=n,n=e[r]),Mn(s,r,ii(n,t,i,r,e,o))}),s}function ri(e){var t=jl(e);return function(n){return ai(n,e,t)}}function ai(e,t,n){var i=n.length;if(null==e)return!i;for(e=ou(e);i--;){var r=n[i],a=t[r],o=e[r];if(o===J&&!(r in e)||!a(o))return!1}return!0}function oi(e,t,n){if("function"!=typeof e)throw new pu(ne);return Ac(function(){e.apply(J,n)},t)}function si(e,t,n,i){var r=-1,a=o,p=!0,u=e.length,c=[],d=t.length;if(!u)return c;n&&(t=l(t,I(n))),i?(a=s,p=!1):t.length>=ee&&(a=$,p=!1,t=new mn(t));e:for(;++r<u;){var f=e[r],h=null==n?f:n(f);if(f=i||0!==f?f:0,p&&h===h){for(var m=d;m--;)if(t[m]===h)continue e;c.push(f)}else a(t,h,i)||c.push(f)}return c}function li(e,t){var n=!0;return fc(e,function(e,i,r){return n=!!t(e,i,r)}),n}function pi(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],o=t(a);if(null!=o&&(s===J?o===o&&!ml(o):n(o,s)))var s=o,l=a}return l}function ui(e,t,n,i){var r=e.length;for(n=xl(n),n<0&&(n=-n>r?0:r+n),i=i===J||i>r?r:xl(i),i<0&&(i+=r),i=n>i?0:Cl(i);n<i;)e[n++]=t;return e}function ci(e,t){var n=[];return fc(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function di(e,t,n,i,r){var a=-1,o=e.length;for(n||(n=$a),r||(r=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?di(s,t-1,n,i,r):p(r,s):i||(r[r.length]=s)}return r}function fi(e,t){return e&&mc(e,t,jl)}function hi(e,t){return e&&gc(e,t,jl)}function mi(e,t){return a(t,function(t){return el(e[t])})}function gi(e,t){t=Tr(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[Qa(t[n++])];return n&&n==i?e:J}function vi(e,t,n){var i=t(e);return md(e)?i:p(i,n(e))}function bi(e){return null==e?e===J?tt:Ve:Du&&Du in ou(e)?Ta(e):Fa(e)}function yi(e,t){return e>t}function wi(e,t){return null!=e&&mu.call(e,t)}function xi(e,t){return null!=e&&t in ou(e)}function Ci(e,t,n){return e>=Gu(t,n)&&e<Uu(t,n)}function Ti(e,t,n){for(var i=n?s:o,r=e[0].length,a=e.length,p=a,u=tu(a),c=1/0,d=[];p--;){var f=e[p];p&&t&&(f=l(f,I(t))),c=Gu(f.length,c),u[p]=!n&&(t||r>=120&&f.length>=120)?new mn(p&&f):J}f=e[0];var h=-1,m=u[0];e:for(;++h<r&&d.length<c;){var g=f[h],v=t?t(g):g;if(g=n||0!==g?g:0,!(m?$(m,v):i(d,v,n))){for(p=a;--p;){var b=u[p];if(!(b?$(b,v):i(e[p],v,n)))continue e}m&&m.push(v),d.push(g)}}return d}function Si(e,t,n,i){return fi(e,function(e,r,a){t(i,n(e),r,a)}),i}function ki(t,n,i){n=Tr(n,t),t=Ga(t,n);var r=null==t?t:t[Qa(wo(n))];return null==r?J:e(r,t,i)}function _i(e){return rl(e)&&bi(e)==Be}function Ei(e){return rl(e)&&bi(e)==rt}function Ai(e){return rl(e)&&bi(e)==Ne}function Ii(e,t,n,i,r){return e===t||(null==e||null==t||!rl(e)&&!rl(t)?e!==e&&t!==t:Li(e,t,n,i,Ii,r))}function Li(e,t,n,i,r,a){var o=md(e),s=md(t),l=o?Re:kc(e),p=s?Re:kc(t);l=l==Be?Xe:l,p=p==Be?Xe:p;var u=l==Xe,c=p==Xe,d=l==p;if(d&&vd(e)){if(!vd(t))return!1;o=!0,u=!1}if(d&&!u)return a||(a=new bn),o||Cd(e)?ca(e,t,n,i,r,a):da(e,t,l,n,i,r,a);if(!(n&ue)){var f=u&&mu.call(e,"__wrapped__"),h=c&&mu.call(t,"__wrapped__");if(f||h){var m=f?e.value():e,g=h?t.value():t;return a||(a=new bn),r(m,g,n,i,a)}}return!!d&&(a||(a=new bn),fa(e,t,n,i,r,a))}function $i(e){return rl(e)&&kc(e)==Ge}function Di(e,t,n,i){var r=n.length,a=r,o=!i;if(null==e)return!a;for(e=ou(e);r--;){var s=n[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<a;){s=n[r];var l=s[0],p=e[l],u=s[1];if(o&&s[2]){if(p===J&&!(l in e))return!1}else{var c=new bn;if(i)var d=i(p,u,l,e,t,c);if(!(d===J?Ii(u,p,ue|ce,i,c):d))return!1}}return!0}function Oi(e){return!(!il(e)||Ra(e))&&(el(e)?xu:Wt).test(Za(e))}function Pi(e){return rl(e)&&bi(e)==Qe}function Mi(e){return rl(e)&&kc(e)==Ze}function Bi(e){return rl(e)&&nl(e.length)&&!!Ln[bi(e)]}function Ri(e){return"function"==typeof e?e:null==e?Ip:"object"==typeof e?md(e)?Fi(e[0],e[1]):Wi(e):Rp(e)}function zi(e){if(!za(e))return Fu(e);var t=[];for(var n in ou(e))mu.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ji(e){if(!il(e))return Wa(e);var t=za(e),n=[];for(var i in e)("constructor"!=i||!t&&mu.call(e,i))&&n.push(i);return n}function Ni(e,t){return e<t}function Hi(e,t){var n=-1,i=Gs(e)?tu(e.length):[];return fc(e,function(e,r,a){i[++n]=t(e,r,a)}),i}function Wi(e){var t=xa(e);return 1==t.length&&t[0][2]?Na(t[0][0],t[0][1]):function(n){return n===e||Di(n,e,t)}}function Fi(e,t){return Pa(e)&&ja(t)?Na(Qa(e),t):function(n){var i=Bl(n,e);return i===J&&i===t?zl(n,e):Ii(t,i,ue|ce)}}function Ui(e,t,n,i,r){e!==t&&mc(t,function(a,o){if(r||(r=new bn),il(a))Gi(e,t,o,n,Ui,i,r);else{var s=i?i(Va(e,o),a,o+"",e,t,r):J;s===J&&(s=a),Pn(e,o,s)}},Nl)}function Gi(e,t,n,i,r,a,o){var s=Va(e,n),l=Va(t,n),p=o.get(l);if(p)return Pn(e,n,p),J;var u=a?a(s,l,n+"",e,t,o):J,c=u===J;if(c){var d=md(l),f=!d&&vd(l),h=!d&&!f&&Cd(l);u=l,d||f||h?md(s)?u=s:qs(s)?u=Mr(s):f?(c=!1,u=kr(l,!0)):h?(c=!1,u=Lr(l,!0)):u=[]:dl(l)||hd(l)?(u=s,hd(s)?u=Sl(s):il(s)&&!el(s)||(u=Aa(l))):c=!1}c&&(o.set(l,u),r(u,l,i,a,o),o.delete(l)),Pn(e,n,u)}function qi(e,t){var n=e.length;if(n)return t+=t<0?n:0,Da(t,n)?e[t]:J}function Vi(e,t,n){t=t.length?l(t,function(e){return md(e)?function(t){return gi(t,1===e.length?e[0]:e)}:e}):[Ip];var i=-1;return t=l(t,I(ya())),S(Hi(e,function(e,n,r){return{criteria:l(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return Dr(e,t,n)})}function Xi(e,t){return Yi(e,t,function(t,n){return zl(e,n)})}function Yi(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var o=t[i],s=gi(e,o);n(s,o)&&ar(a,Tr(o,e),s)}return a}function Ki(e){return function(t){return gi(t,e)}}function Qi(e,t,n,i){var r=i?b:v,a=-1,o=t.length,s=e;for(e===t&&(t=Mr(t)),n&&(s=l(e,I(n)));++a<o;)for(var p=0,u=t[a],c=n?n(u):u;(p=r(s,c,p,i))>-1;)s!==e&&Iu.call(s,p,1),Iu.call(e,p,1);return e}function Zi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==a){var a=r;Da(r)?Iu.call(e,r,1):mr(e,r)}}return e}function Ji(e,t){return e+zu(Xu()*(t-e+1))}function er(e,t,n,i){for(var r=-1,a=Uu(Ru((t-e)/(n||1)),0),o=tu(a);a--;)o[i?a:++r]=e,e+=n;return o}function tr(e,t){var n="";if(!e||t<1||t>Ie)return n;do{t%2&&(n+=e),(t=zu(t/2))&&(e+=e)}while(t);return n}function nr(e,t){return Ic(Ua(e,t,Ip),e+"")}function ir(e){return En(Zl(e))}function rr(e,t){var n=Zl(e);return Ka(n,Zn(t,0,n.length))}function ar(e,t,n,i){if(!il(e))return e;t=Tr(t,e);for(var r=-1,a=t.length,o=a-1,s=e;null!=s&&++r<a;){var l=Qa(t[r]),p=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=o){var u=s[l];(p=i?i(u,l,s):J)===J&&(p=il(u)?u:Da(t[r+1])?[]:{})}Mn(s,l,p),s=s[l]}return e}function or(e){return Ka(Zl(e))}function sr(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=tu(r);++i<r;)a[i]=e[i+t];return a}function lr(e,t){var n;return fc(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function pr(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t===t&&r<=Pe){for(;i<r;){var a=i+r>>>1,o=e[a];null!==o&&!ml(o)&&(n?o<=t:o<t)?i=a+1:r=a}return r}return ur(e,t,Ip,n)}function ur(e,t,n,i){var r=0,a=null==e?0:e.length;if(0===a)return 0;t=n(t);for(var o=t!==t,s=null===t,l=ml(t),p=t===J;r<a;){var u=zu((r+a)/2),c=n(e[u]),d=c!==J,f=null===c,h=c===c,m=ml(c);if(o)var g=i||h;else g=p?h&&(i||d):s?h&&d&&(i||!f):l?h&&d&&!f&&(i||!m):!f&&!m&&(i?c<=t:c<t);g?r=u+1:a=u}return Gu(a,Oe)}function cr(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o=e[n],s=t?t(o):o;if(!n||!Us(s,l)){var l=s;a[r++]=0===o?0:o}}return a}function dr(e){return"number"==typeof e?e:ml(e)?$e:+e}function fr(e){if("string"==typeof e)return e;if(md(e))return l(e,fr)+"";if(ml(e))return cc?cc.call(e):"";var t=e+"";return"0"==t&&1/e==-Ae?"-0":t}function hr(e,t,n){var i=-1,r=o,a=e.length,l=!0,p=[],u=p;if(n)l=!1,r=s;else if(a>=ee){var c=t?null:xc(e);if(c)return F(c);l=!1,r=$,u=new mn}else u=t?[]:p;e:for(;++i<a;){var d=e[i],f=t?t(d):d;if(d=n||0!==d?d:0,l&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),p.push(d)}else r(u,f,n)||(u!==p&&u.push(f),p.push(d))}return p}function mr(e,t){return t=Tr(t,e),null==(e=Ga(e,t))||delete e[Qa(wo(t))]}function gr(e,t,n,i){return ar(e,t,n(gi(e,t)),i)}function vr(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?sr(e,i?0:a,i?a+1:r):sr(e,i?a+1:0,i?r:a)}function br(e,t){var n=e;return n instanceof $t&&(n=n.value()),u(t,function(e,t){return t.func.apply(t.thisArg,p([e],t.args))},n)}function yr(e,t,n){var i=e.length;if(i<2)return i?hr(e[0]):[];for(var r=-1,a=tu(i);++r<i;)for(var o=e[r],s=-1;++s<i;)s!=r&&(a[r]=si(a[r]||o,e[s],t,n));return hr(di(a,1),t,n)}function wr(e,t,n){for(var i=-1,r=e.length,a=t.length,o={};++i<r;)n(o,e[i],i<a?t[i]:J);return o}function xr(e){return qs(e)?e:[]}function Cr(e){return"function"==typeof e?e:Ip}function Tr(e,t){return md(e)?e:Pa(e,t)?[e]:Lc(_l(e))}function Sr(e,t,n){var i=e.length;return n=n===J?i:n,!t&&n>=i?e:sr(e,t,n)}function kr(e,t){if(t)return e.slice();var n=e.length,i=ku?ku(n):new e.constructor(n);return e.copy(i),i}function _r(e){var t=new e.constructor(e.byteLength);return new Su(t).set(new Su(e)),t}function Er(e,t){return new e.constructor(t?_r(e.buffer):e.buffer,e.byteOffset,e.byteLength)}function Ar(e){var t=new e.constructor(e.source,jt.exec(e));return t.lastIndex=e.lastIndex,t}function Ir(e){return uc?ou(uc.call(e)):{}}function Lr(e,t){return new e.constructor(t?_r(e.buffer):e.buffer,e.byteOffset,e.length)}function $r(e,t){if(e!==t){var n=e!==J,i=null===e,r=e===e,a=ml(e),o=t!==J,s=null===t,l=t===t,p=ml(t);if(!s&&!p&&!a&&e>t||a&&o&&l&&!s&&!p||i&&o&&l||!n&&l||!r)return 1;if(!i&&!a&&!p&&e<t||p&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!l)return-1}return 0}function Dr(e,t,n){for(var i=-1,r=e.criteria,a=t.criteria,o=r.length,s=n.length;++i<o;){var l=$r(r[i],a[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}function Or(e,t,n,i){for(var r=-1,a=e.length,o=n.length,s=-1,l=t.length,p=Uu(a-o,0),u=tu(l+p),c=!i;++s<l;)u[s]=t[s];for(;++r<o;)(c||r<a)&&(u[n[r]]=e[r]);for(;p--;)u[s++]=e[r++];return u}function Pr(e,t,n,i){for(var r=-1,a=e.length,o=-1,s=n.length,l=-1,p=t.length,u=Uu(a-s,0),c=tu(u+p),d=!i;++r<u;)c[r]=e[r];for(var f=r;++l<p;)c[f+l]=t[l];for(;++o<s;)(d||r<a)&&(c[f+n[o]]=e[r++]);return c}function Mr(e,t){var n=-1,i=e.length;for(t||(t=tu(i));++n<i;)t[n]=e[n];return t}function Br(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=i?i(n[s],e[s],s,n,e):J;l===J&&(l=e[s]),r?Un(n,s,l):Mn(n,s,l)}return n}function Rr(e,t){return Br(e,Tc(e),t)}function zr(e,t){return Br(e,Sc(e),t)}function jr(e,n){return function(i,r){var a=md(i)?t:jn,o=n?n():{};return a(i,e,ya(r,2),o)}}function Nr(e){return nr(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:J,o=r>2?n[2]:J;for(a=e.length>3&&"function"==typeof a?(r--,a):J,o&&Oa(n[0],n[1],o)&&(a=r<3?J:a,r=1),t=ou(t);++i<r;){var s=n[i];s&&e(t,s,i,a)}return t})}function Hr(e,t){return function(n,i){if(null==n)return n;if(!Gs(n))return e(n,i);for(var r=n.length,a=t?r:-1,o=ou(n);(t?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Wr(e){return function(t,n,i){for(var r=-1,a=ou(t),o=i(t),s=o.length;s--;){var l=o[e?s:++r];if(!1===n(a[l],l,a))break}return t}}function Fr(e,t,n){function i(){return(this&&this!==Nn&&this instanceof i?a:e).apply(r?n:this,arguments)}var r=t&de,a=qr(e);return i}function Ur(e){return function(t){t=_l(t);var n=R(t)?X(t):J,i=n?n[0]:t.charAt(0),r=n?Sr(n,1).join(""):t.slice(1);return i[e]()+r}}function Gr(e){return function(t){return u(Sp(rp(t).replace(Cn,"")),e,"")}}function qr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=dc(e.prototype),i=e.apply(n,t);return il(i)?i:n}}function Vr(t,n,i){function r(){for(var o=arguments.length,s=tu(o),l=o,p=ba(r);l--;)s[l]=arguments[l];var u=o<3&&s[0]!==p&&s[o-1]!==p?[]:W(s,p);return o-=u.length,o<i?ra(t,n,Kr,r.placeholder,J,s,u,J,J,i-o):e(this&&this!==Nn&&this instanceof r?a:t,this,s)}var a=qr(t);return r}function Xr(e){return function(t,n,i){var r=ou(t);if(!Gs(t)){var a=ya(n,3);t=jl(t),n=function(e){return a(r[e],e,r)}}var o=e(t,n,i);return o>-1?r[a?t[o]:o]:J}}function Yr(e){return ha(function(t){var n=t.length,i=n,r=Q.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new pu(ne);if(r&&!o&&"wrapper"==va(a))var o=new Q([],!0)}for(i=o?i:n;++i<n;){a=t[i];var s=va(a),l="wrapper"==s?Cc(a):J;o=l&&Ba(l[0])&&l[1]==(ye|me|ve|we)&&!l[4].length&&1==l[9]?o[va(l[0])].apply(o,l[3]):1==a.length&&Ba(a)?o[s]():o.thru(a)}return function(){var e=arguments,i=e[0];if(o&&1==e.length&&md(i))return o.plant(i).value();for(var r=0,a=n?t[r].apply(this,e):i;++r<n;)a=t[r].call(this,a);return a}})}function Kr(e,t,n,i,r,a,o,s,l,p){function u(){for(var v=arguments.length,b=tu(v),y=v;y--;)b[y]=arguments[y];if(h)var w=ba(u),x=P(b,w);if(i&&(b=Or(b,i,r,h)),a&&(b=Pr(b,a,o,h)),v-=x,h&&v<p)return ra(e,t,Kr,u.placeholder,n,b,W(b,w),s,l,p-v);var C=d?n:this,T=f?C[e]:e;return v=b.length,s?b=qa(b,s):m&&v>1&&b.reverse(),c&&l<v&&(b.length=l),this&&this!==Nn&&this instanceof u&&(T=g||qr(T)),T.apply(C,b)}var c=t&ye,d=t&de,f=t&fe,h=t&(me|ge),m=t&xe,g=f?J:qr(e);return u}function Qr(e,t){return function(n,i){return Si(n,e,t(i),{})}}function Zr(e,t){return function(n,i){var r;if(n===J&&i===J)return t;if(n!==J&&(r=n),i!==J){if(r===J)return i;"string"==typeof n||"string"==typeof i?(n=fr(n),i=fr(i)):(n=dr(n),i=dr(i)),r=e(n,i)}return r}}function Jr(t){return ha(function(n){return n=l(n,I(ya())),nr(function(i){var r=this;return t(n,function(t){return e(t,r,i)})})})}function ea(e,t){t=t===J?" ":fr(t);var n=t.length;if(n<2)return n?tr(t,e):t;var i=tr(t,Ru(e/V(t)));return R(t)?Sr(X(i),0,e).join(""):i.slice(0,e)}function ta(t,n,i,r){function a(){for(var n=-1,l=arguments.length,p=-1,u=r.length,c=tu(u+l),d=this&&this!==Nn&&this instanceof a?s:t;++p<u;)c[p]=r[p];for(;l--;)c[p++]=arguments[++n];return e(d,o?i:this,c)}var o=n&de,s=qr(t);return a}function na(e){return function(t,n,i){return i&&"number"!=typeof i&&Oa(t,n,i)&&(n=i=J),t=wl(t),n===J?(n=t,t=0):n=wl(n),i=i===J?t<n?1:-1:wl(i),er(t,n,i,e)}}function ia(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Tl(t),n=Tl(n)),e(t,n)}}function ra(e,t,n,i,r,a,o,s,l,p){var u=t&me,c=u?o:J,d=u?J:o,f=u?a:J,h=u?J:a;t|=u?ve:be,(t&=~(u?be:ve))&he||(t&=~(de|fe));var m=[e,t,r,f,c,h,d,s,l,p],g=n.apply(J,m);return Ba(e)&&Ec(g,m),g.placeholder=i,Xa(g,e,t)}function aa(e){var t=au[e];return function(e,n){if(e=Tl(e),(n=null==n?0:Gu(xl(n),292))&&Hu(e)){var i=(_l(e)+"e").split("e");return i=(_l(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function oa(e){return function(t){var n=kc(t);return n==Ge?N(t):n==Ze?U(t):E(t,e(t))}}function sa(e,t,n,i,r,a,o,s){var l=t&fe;if(!l&&"function"!=typeof e)throw new pu(ne);var p=i?i.length:0;if(p||(t&=~(ve|be),i=r=J),o=o===J?o:Uu(xl(o),0),s=s===J?s:xl(s),p-=r?r.length:0,t&be){var u=i,c=r;i=r=J}var d=l?J:Cc(e),f=[e,t,n,i,r,u,c,a,o,s];if(d&&Ha(f,d),e=f[0],t=f[1],n=f[2],i=f[3],r=f[4],s=f[9]=f[9]===J?l?0:e.length:Uu(f[9]-p,0),!s&&t&(me|ge)&&(t&=~(me|ge)),t&&t!=de)h=t==me||t==ge?Vr(e,t,s):t!=ve&&t!=(de|ve)||r.length?Kr.apply(J,f):ta(e,t,n,i);else var h=Fr(e,t,n);return Xa((d?vc:Ec)(h,f),e,t)}function la(e,t,n,i){return e===J||Us(e,du[n])&&!mu.call(i,n)?t:e}function pa(e,t,n,i,r,a){return il(e)&&il(t)&&(a.set(t,e),Ui(e,t,J,pa,a),a.delete(t)),e}function ua(e){return dl(e)?J:e}function ca(e,t,n,i,r,a){var o=n&ue,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var p=a.get(e),u=a.get(t);if(p&&u)return p==t&&u==e;var c=-1,f=!0,h=n&ce?new mn:J;for(a.set(e,t),a.set(t,e);++c<s;){var m=e[c],g=t[c];if(i)var v=o?i(g,m,c,t,e,a):i(m,g,c,e,t,a);if(v!==J){if(v)continue;f=!1;break}if(h){if(!d(t,function(e,t){if(!$(h,t)&&(m===e||r(m,e,n,i,a)))return h.push(t)})){f=!1;break}}else if(m!==g&&!r(m,g,n,i,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function da(e,t,n,i,r,a,o){switch(n){case at:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rt:return!(e.byteLength!=t.byteLength||!a(new Su(e),new Su(t)));case je:case Ne:case qe:return Us(+e,+t);case We:return e.name==t.name&&e.message==t.message;case Qe:case Je:return e==t+"";case Ge:var s=N;case Ze:var l=i&ue;if(s||(s=F),e.size!=t.size&&!l)return!1;var p=o.get(e);if(p)return p==t;i|=ce,o.set(e,t);var u=ca(s(e),s(t),i,r,a,o);return o.delete(e),u;case et:if(uc)return uc.call(e)==uc.call(t)}return!1}function fa(e,t,n,i,r,a){var o=n&ue,s=ma(e),l=s.length;if(l!=ma(t).length&&!o)return!1;for(var p=l;p--;){var u=s[p];if(!(o?u in t:mu.call(t,u)))return!1}var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var f=!0;a.set(e,t),a.set(t,e);for(var h=o;++p<l;){u=s[p];var m=e[u],g=t[u];if(i)var v=o?i(g,m,u,t,e,a):i(m,g,u,e,t,a);if(!(v===J?m===g||r(m,g,n,i,a):v)){f=!1;break}h||(h="constructor"==u)}if(f&&!h){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(f=!1)}return a.delete(e),a.delete(t),f}function ha(e){return Ic(Ua(e,J,co),e+"")}function ma(e){return vi(e,jl,Tc)}function ga(e){return vi(e,Nl,Sc)}function va(e){for(var t=e.name+"",n=ic[t],i=mu.call(ic,t)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function ba(e){return(mu.call(G,"placeholder")?G:e).placeholder}function ya(){var e=G.iteratee||Lp;return e=e===Lp?Ri:e,arguments.length?e(arguments[0],arguments[1]):e}function wa(e,t){var n=e.__data__;return Ma(t)?n["string"==typeof t?"string":"hash"]:n.map}function xa(e){for(var t=jl(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,ja(r)]}return t}function Ca(e,t){var n=B(e,t);return Oi(n)?n:J}function Ta(e){var t=mu.call(e,Du),n=e[Du];try{e[Du]=J;var i=!0}catch(e){}var r=bu.call(e);return i&&(t?e[Du]=n:delete e[Du]),r}function Sa(e,t,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Gu(t,e+o);break;case"takeRight":e=Uu(e,t-o)}}return{start:e,end:t}}function ka(e){var t=e.match(Ot);return t?t[1].split(Pt):[]}function _a(e,t,n){t=Tr(t,e);for(var i=-1,r=t.length,a=!1;++i<r;){var o=Qa(t[i]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&nl(r)&&Da(o,r)&&(md(e)||hd(e))}function Ea(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&mu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Aa(e){return"function"!=typeof e.constructor||za(e)?{}:dc(_u(e))}function Ia(e,t,n){var i=e.constructor;switch(t){case rt:return _r(e);case je:case Ne:return new i(+e);case at:return Er(e,n);case ot:case st:case lt:case pt:case ut:case ct:case dt:case ft:case ht:return Lr(e,n);case Ge:return new i;case qe:case Je:return new i(e);case Qe:return Ar(e);case Ze:return new i;case et:return Ir(e)}}function La(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function $a(e){return md(e)||hd(e)||!!(Lu&&e&&e[Lu])}function Da(e,t){var n=typeof e;return!!(t=null==t?Ie:t)&&("number"==n||"symbol"!=n&&Ut.test(e))&&e>-1&&e%1==0&&e<t}function Oa(e,t,n){if(!il(n))return!1;var i=typeof t;return!!("number"==i?Gs(n)&&Da(t,n.length):"string"==i&&t in n)&&Us(n[t],e)}function Pa(e,t){if(md(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ml(e))||_t.test(e)||!kt.test(e)||null!=t&&e in ou(t)}function Ma(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Ba(e){var t=va(e),n=G[t];if("function"!=typeof n||!(t in $t.prototype))return!1;if(e===n)return!0;var i=Cc(n);return!!i&&e===i[0]}function Ra(e){return!!vu&&vu in e}function za(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||du)}function ja(e){return e===e&&!il(e)}function Na(e,t){return function(n){return null!=n&&n[e]===t&&(t!==J||e in ou(n))}}function Ha(e,t){
var n=e[1],i=t[1],r=n|i,a=r<(de|fe|ye),o=i==ye&&n==me||i==ye&&n==we&&e[7].length<=t[8]||i==(ye|we)&&t[7].length<=t[8]&&n==me;if(!a&&!o)return e;i&de&&(e[2]=t[2],r|=n&de?0:he);var s=t[3];if(s){var l=e[3];e[3]=l?Or(l,s,t[4]):s,e[4]=l?W(e[3],oe):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?Pr(l,s,t[6]):s,e[6]=l?W(e[5],oe):t[6]),s=t[7],s&&(e[7]=s),i&ye&&(e[8]=null==e[8]?t[8]:Gu(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function Wa(e){var t=[];if(null!=e)for(var n in ou(e))t.push(n);return t}function Fa(e){return bu.call(e)}function Ua(t,n,i){return n=Uu(n===J?t.length-1:n,0),function(){for(var r=arguments,a=-1,o=Uu(r.length-n,0),s=tu(o);++a<o;)s[a]=r[n+a];a=-1;for(var l=tu(n+1);++a<n;)l[a]=r[a];return l[n]=i(s),e(t,this,l)}}function Ga(e,t){return t.length<2?e:gi(e,sr(t,0,-1))}function qa(e,t){for(var n=e.length,i=Gu(t.length,n),r=Mr(e);i--;){var a=t[i];e[i]=Da(a,n)?r[a]:J}return e}function Va(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Xa(e,t,n){var i=t+"";return Ic(e,La(i,Ja(ka(i),n)))}function Ya(e){var t=0,n=0;return function(){var i=qu(),r=ke-(i-n);if(n=i,r>0){if(++t>=Se)return arguments[0]}else t=0;return e.apply(J,arguments)}}function Ka(e,t){var n=-1,i=e.length,r=i-1;for(t=t===J?i:t;++n<t;){var a=Ji(n,r),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}function Qa(e){if("string"==typeof e||ml(e))return e;var t=e+"";return"0"==t&&1/e==-Ae?"-0":t}function Za(e){if(null!=e){try{return hu.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ja(e,t){return n(Me,function(n){var i="_."+n[0];t&n[1]&&!o(e,i)&&e.push(i)}),e.sort()}function eo(e){if(e instanceof $t)return e.clone();var t=new Q(e.__wrapped__,e.__chain__);return t.__actions__=Mr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function to(e,t,n){t=(n?Oa(e,t,n):t===J)?1:Uu(xl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var r=0,a=0,o=tu(Ru(i/t));r<i;)o[a++]=sr(e,r,r+=t);return o}function no(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var a=e[t];a&&(r[i++]=a)}return r}function io(){var e=arguments.length;if(!e)return[];for(var t=tu(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return p(md(n)?Mr(n):[n],di(t,1))}function ro(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===J?1:xl(t),sr(e,t<0?0:t,i)):[]}function ao(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===J?1:xl(t),t=i-t,sr(e,0,t<0?0:t)):[]}function oo(e,t){return e&&e.length?vr(e,ya(t,3),!0,!0):[]}function so(e,t){return e&&e.length?vr(e,ya(t,3),!0):[]}function lo(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Oa(e,t,n)&&(n=0,i=r),ui(e,t,n,i)):[]}function po(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:xl(n);return r<0&&(r=Uu(i+r,0)),g(e,ya(t,3),r)}function uo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==J&&(r=xl(n),r=n<0?Uu(i+r,0):Gu(r,i-1)),g(e,ya(t,3),r,!0)}function co(e){return(null==e?0:e.length)?di(e,1):[]}function fo(e){return(null==e?0:e.length)?di(e,Ae):[]}function ho(e,t){return(null==e?0:e.length)?(t=t===J?1:xl(t),di(e,t)):[]}function mo(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}function go(e){return e&&e.length?e[0]:J}function vo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:xl(n);return r<0&&(r=Uu(i+r,0)),v(e,t,r)}function bo(e){return(null==e?0:e.length)?sr(e,0,-1):[]}function yo(e,t){return null==e?"":Wu.call(e,t)}function wo(e){var t=null==e?0:e.length;return t?e[t-1]:J}function xo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==J&&(r=xl(n),r=r<0?Uu(i+r,0):Gu(r,i-1)),t===t?q(e,t,r):g(e,y,r,!0)}function Co(e,t){return e&&e.length?qi(e,xl(t)):J}function To(e,t){return e&&e.length&&t&&t.length?Qi(e,t):e}function So(e,t,n){return e&&e.length&&t&&t.length?Qi(e,t,ya(n,2)):e}function ko(e,t,n){return e&&e.length&&t&&t.length?Qi(e,t,J,n):e}function _o(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],a=e.length;for(t=ya(t,3);++i<a;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}return Zi(e,r),n}function Eo(e){return null==e?e:Yu.call(e)}function Ao(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Oa(e,t,n)?(t=0,n=i):(t=null==t?0:xl(t),n=n===J?i:xl(n)),sr(e,t,n)):[]}function Io(e,t){return pr(e,t)}function Lo(e,t,n){return ur(e,t,ya(n,2))}function $o(e,t){var n=null==e?0:e.length;if(n){var i=pr(e,t);if(i<n&&Us(e[i],t))return i}return-1}function Do(e,t){return pr(e,t,!0)}function Oo(e,t,n){return ur(e,t,ya(n,2),!0)}function Po(e,t){if(null==e?0:e.length){var n=pr(e,t,!0)-1;if(Us(e[n],t))return n}return-1}function Mo(e){return e&&e.length?cr(e):[]}function Bo(e,t){return e&&e.length?cr(e,ya(t,2)):[]}function Ro(e){var t=null==e?0:e.length;return t?sr(e,1,t):[]}function zo(e,t,n){return e&&e.length?(t=n||t===J?1:xl(t),sr(e,0,t<0?0:t)):[]}function jo(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===J?1:xl(t),t=i-t,sr(e,t<0?0:t,i)):[]}function No(e,t){return e&&e.length?vr(e,ya(t,3),!1,!0):[]}function Ho(e,t){return e&&e.length?vr(e,ya(t,3)):[]}function Wo(e){return e&&e.length?hr(e):[]}function Fo(e,t){return e&&e.length?hr(e,ya(t,2)):[]}function Uo(e,t){return t="function"==typeof t?t:J,e&&e.length?hr(e,J,t):[]}function Go(e){if(!e||!e.length)return[];var t=0;return e=a(e,function(e){if(qs(e))return t=Uu(e.length,t),!0}),_(t,function(t){return l(e,x(t))})}function qo(t,n){if(!t||!t.length)return[];var i=Go(t);return null==n?i:l(i,function(t){return e(n,J,t)})}function Vo(e,t){return wr(e||[],t||[],Mn)}function Xo(e,t){return wr(e||[],t||[],ar)}function Yo(e){var t=G(e);return t.__chain__=!0,t}function Ko(e,t){return t(e),e}function Qo(e,t){return t(e)}function Zo(){return Yo(this)}function Jo(){return new Q(this.value(),this.__chain__)}function es(){this.__values__===J&&(this.__values__=yl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?J:this.__values__[this.__index__++]}}function ts(){return this}function ns(e){for(var t,n=this;n instanceof K;){var i=eo(n);i.__index__=0,i.__values__=J,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function is(){var e=this.__wrapped__;if(e instanceof $t){var t=e;return this.__actions__.length&&(t=new $t(this)),t=t.reverse(),t.__actions__.push({func:Qo,args:[Eo],thisArg:J}),new Q(t,this.__chain__)}return this.thru(Eo)}function rs(){return br(this.__wrapped__,this.__actions__)}function as(e,t,n){var i=md(e)?r:li;return n&&Oa(e,t,n)&&(t=J),i(e,ya(t,3))}function os(e,t){return(md(e)?a:ci)(e,ya(t,3))}function ss(e,t){return di(fs(e,t),1)}function ls(e,t){return di(fs(e,t),Ae)}function ps(e,t,n){return n=n===J?1:xl(n),di(fs(e,t),n)}function us(e,t){return(md(e)?n:fc)(e,ya(t,3))}function cs(e,t){return(md(e)?i:hc)(e,ya(t,3))}function ds(e,t,n,i){e=Gs(e)?e:Zl(e),n=n&&!i?xl(n):0;var r=e.length;return n<0&&(n=Uu(r+n,0)),hl(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&v(e,t,n)>-1}function fs(e,t){return(md(e)?l:Hi)(e,ya(t,3))}function hs(e,t,n,i){return null==e?[]:(md(t)||(t=null==t?[]:[t]),n=i?J:n,md(n)||(n=null==n?[]:[n]),Vi(e,t,n))}function ms(e,t,n){var i=md(e)?u:T,r=arguments.length<3;return i(e,ya(t,4),n,r,fc)}function gs(e,t,n){var i=md(e)?c:T,r=arguments.length<3;return i(e,ya(t,4),n,r,hc)}function vs(e,t){return(md(e)?a:ci)(e,$s(ya(t,3)))}function bs(e){return(md(e)?En:ir)(e)}function ys(e,t,n){return t=(n?Oa(e,t,n):t===J)?1:xl(t),(md(e)?Dn:rr)(e,t)}function ws(e){return(md(e)?On:or)(e)}function xs(e){if(null==e)return 0;if(Gs(e))return hl(e)?V(e):e.length;var t=kc(e);return t==Ge||t==Ze?e.size:zi(e).length}function Cs(e,t,n){var i=md(e)?d:lr;return n&&Oa(e,t,n)&&(t=J),i(e,ya(t,3))}function Ts(e,t){if("function"!=typeof t)throw new pu(ne);return e=xl(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ss(e,t,n){return t=n?J:t,t=e&&null==t?e.length:t,sa(e,ye,J,J,J,J,t)}function ks(e,t){var n;if("function"!=typeof t)throw new pu(ne);return e=xl(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=J),n}}function _s(e,t,n){t=n?J:t;var i=sa(e,me,J,J,J,J,J,t);return i.placeholder=_s.placeholder,i}function Es(e,t,n){t=n?J:t;var i=sa(e,ge,J,J,J,J,J,t);return i.placeholder=Es.placeholder,i}function As(e,t,n){function i(t){var n=d,i=f;return d=f=J,b=t,m=e.apply(i,n)}function r(e){return b=e,g=Ac(s,t),y?i(e):m}function a(e){var n=e-v,i=e-b,r=t-n;return w?Gu(r,h-i):r}function o(e){var n=e-v,i=e-b;return v===J||n>=t||n<0||w&&i>=h}function s(){var e=id();return o(e)?l(e):(g=Ac(s,a(e)),J)}function l(e){return g=J,x&&d?i(e):(d=f=J,m)}function p(){g!==J&&wc(g),b=0,d=v=f=g=J}function u(){return g===J?m:l(id())}function c(){var e=id(),n=o(e);if(d=arguments,f=this,v=e,n){if(g===J)return r(v);if(w)return wc(g),g=Ac(s,t),i(v)}return g===J&&(g=Ac(s,t)),m}var d,f,h,m,g,v,b=0,y=!1,w=!1,x=!0;if("function"!=typeof e)throw new pu(ne);return t=Tl(t)||0,il(n)&&(y=!!n.leading,w="maxWait"in n,h=w?Uu(Tl(n.maxWait)||0,t):h,x="trailing"in n?!!n.trailing:x),c.cancel=p,c.flush=u,c}function Is(e){return sa(e,xe)}function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new pu(ne);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Ls.Cache||pn),n}function $s(e){if("function"!=typeof e)throw new pu(ne);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ds(e){return ks(2,e)}function Os(e,t){if("function"!=typeof e)throw new pu(ne);return t=t===J?t:xl(t),nr(e,t)}function Ps(t,n){if("function"!=typeof t)throw new pu(ne);return n=null==n?0:Uu(xl(n),0),nr(function(i){var r=i[n],a=Sr(i,0,n);return r&&p(a,r),e(t,this,a)})}function Ms(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new pu(ne);return il(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),As(e,t,{leading:i,maxWait:t,trailing:r})}function Bs(e){return Ss(e,1)}function Rs(e,t){return pd(Cr(t),e)}function zs(){if(!arguments.length)return[];var e=arguments[0];return md(e)?e:[e]}function js(e){return ii(e,pe)}function Ns(e,t){return t="function"==typeof t?t:J,ii(e,pe,t)}function Hs(e){return ii(e,se|pe)}function Ws(e,t){return t="function"==typeof t?t:J,ii(e,se|pe,t)}function Fs(e,t){return null==t||ai(e,t,jl(t))}function Us(e,t){return e===t||e!==e&&t!==t}function Gs(e){return null!=e&&nl(e.length)&&!el(e)}function qs(e){return rl(e)&&Gs(e)}function Vs(e){return!0===e||!1===e||rl(e)&&bi(e)==je}function Xs(e){return rl(e)&&1===e.nodeType&&!dl(e)}function Ys(e){if(null==e)return!0;if(Gs(e)&&(md(e)||"string"==typeof e||"function"==typeof e.splice||vd(e)||Cd(e)||hd(e)))return!e.length;var t=kc(e);if(t==Ge||t==Ze)return!e.size;if(za(e))return!zi(e).length;for(var n in e)if(mu.call(e,n))return!1;return!0}function Ks(e,t){return Ii(e,t)}function Qs(e,t,n){n="function"==typeof n?n:J;var i=n?n(e,t):J;return i===J?Ii(e,t,J,n):!!i}function Zs(e){if(!rl(e))return!1;var t=bi(e);return t==We||t==He||"string"==typeof e.message&&"string"==typeof e.name&&!dl(e)}function Js(e){return"number"==typeof e&&Hu(e)}function el(e){if(!il(e))return!1;var t=bi(e);return t==Fe||t==Ue||t==ze||t==Ke}function tl(e){return"number"==typeof e&&e==xl(e)}function nl(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ie}function il(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rl(e){return null!=e&&"object"==typeof e}function al(e,t){return e===t||Di(e,t,xa(t))}function ol(e,t,n){return n="function"==typeof n?n:J,Di(e,t,xa(t),n)}function sl(e){return cl(e)&&e!=+e}function ll(e){if(_c(e))throw new iu(te);return Oi(e)}function pl(e){return null===e}function ul(e){return null==e}function cl(e){return"number"==typeof e||rl(e)&&bi(e)==qe}function dl(e){if(!rl(e)||bi(e)!=Xe)return!1;var t=_u(e);if(null===t)return!0;var n=mu.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&hu.call(n)==yu}function fl(e){return tl(e)&&e>=-Ie&&e<=Ie}function hl(e){return"string"==typeof e||!md(e)&&rl(e)&&bi(e)==Je}function ml(e){return"symbol"==typeof e||rl(e)&&bi(e)==et}function gl(e){return e===J}function vl(e){return rl(e)&&kc(e)==nt}function bl(e){return rl(e)&&bi(e)==it}function yl(e){if(!e)return[];if(Gs(e))return hl(e)?X(e):Mr(e);if($u&&e[$u])return j(e[$u]());var t=kc(e);return(t==Ge?N:t==Ze?F:Zl)(e)}function wl(e){return e?(e=Tl(e))===Ae||e===-Ae?(e<0?-1:1)*Le:e===e?e:0:0===e?e:0}function xl(e){var t=wl(e),n=t%1;return t===t?n?t-n:t:0}function Cl(e){return e?Zn(xl(e),0,De):0}function Tl(e){if("number"==typeof e)return e;if(ml(e))return $e;if(il(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=il(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=A(e);var n=Ht.test(e);return n||Ft.test(e)?Rn(e.slice(2),n?2:8):Nt.test(e)?$e:+e}function Sl(e){return Br(e,Nl(e))}function kl(e){return e?Zn(xl(e),-Ie,Ie):0===e?e:0}function _l(e){return null==e?"":fr(e)}function El(e,t){var n=dc(e);return null==t?n:Hn(n,t)}function Al(e,t){return m(e,ya(t,3),fi)}function Il(e,t){return m(e,ya(t,3),hi)}function Ll(e,t){return null==e?e:mc(e,ya(t,3),Nl)}function $l(e,t){return null==e?e:gc(e,ya(t,3),Nl)}function Dl(e,t){return e&&fi(e,ya(t,3))}function Ol(e,t){return e&&hi(e,ya(t,3))}function Pl(e){return null==e?[]:mi(e,jl(e))}function Ml(e){return null==e?[]:mi(e,Nl(e))}function Bl(e,t,n){var i=null==e?J:gi(e,t);return i===J?n:i}function Rl(e,t){return null!=e&&_a(e,t,wi)}function zl(e,t){return null!=e&&_a(e,t,xi)}function jl(e){return Gs(e)?_n(e):zi(e)}function Nl(e){return Gs(e)?_n(e,!0):ji(e)}function Hl(e,t){var n={};return t=ya(t,3),fi(e,function(e,i,r){Un(n,t(e,i,r),e)}),n}function Wl(e,t){var n={};return t=ya(t,3),fi(e,function(e,i,r){Un(n,i,t(e,i,r))}),n}function Fl(e,t){return Ul(e,$s(ya(t)))}function Ul(e,t){if(null==e)return{};var n=l(ga(e),function(e){return[e]});return t=ya(t),Yi(e,n,function(e,n){return t(e,n[0])})}function Gl(e,t,n){t=Tr(t,e);var i=-1,r=t.length;for(r||(r=1,e=J);++i<r;){var a=null==e?J:e[Qa(t[i])];a===J&&(i=r,a=n),e=el(a)?a.call(e):a}return e}function ql(e,t,n){return null==e?e:ar(e,t,n)}function Vl(e,t,n,i){return i="function"==typeof i?i:J,null==e?e:ar(e,t,n,i)}function Xl(e,t,i){var r=md(e),a=r||vd(e)||Cd(e);if(t=ya(t,4),null==i){var o=e&&e.constructor;i=a?r?new o:[]:il(e)&&el(o)?dc(_u(e)):{}}return(a?n:fi)(e,function(e,n,r){return t(i,e,n,r)}),i}function Yl(e,t){return null==e||mr(e,t)}function Kl(e,t,n){return null==e?e:gr(e,t,Cr(n))}function Ql(e,t,n,i){return i="function"==typeof i?i:J,null==e?e:gr(e,t,Cr(n),i)}function Zl(e){return null==e?[]:L(e,jl(e))}function Jl(e){return null==e?[]:L(e,Nl(e))}function ep(e,t,n){return n===J&&(n=t,t=J),n!==J&&(n=Tl(n),n=n===n?n:0),t!==J&&(t=Tl(t),t=t===t?t:0),Zn(Tl(e),t,n)}function tp(e,t,n){return t=wl(t),n===J?(n=t,t=0):n=wl(n),e=Tl(e),Ci(e,t,n)}function np(e,t,n){if(n&&"boolean"!=typeof n&&Oa(e,t,n)&&(t=n=J),n===J&&("boolean"==typeof t?(n=t,t=J):"boolean"==typeof e&&(n=e,e=J)),e===J&&t===J?(e=0,t=1):(e=wl(e),t===J?(t=e,e=0):t=wl(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=Xu();return Gu(e+r*(t-e+Bn("1e-"+((r+"").length-1))),t)}return Ji(e,t)}function ip(e){return Xd(_l(e).toLowerCase())}function rp(e){return(e=_l(e))&&e.replace(Gt,Jn).replace(Tn,"")}function ap(e,t,n){e=_l(e),t=fr(t);var i=e.length;n=n===J?i:Zn(xl(n),0,i);var r=n;return(n-=t.length)>=0&&e.slice(n,r)==t}function op(e){return e=_l(e),e&&xt.test(e)?e.replace(yt,ei):e}function sp(e){return e=_l(e),e&&It.test(e)?e.replace(At,"\\$&"):e}function lp(e,t,n){e=_l(e),t=xl(t);var i=t?V(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return ea(zu(r),n)+e+ea(Ru(r),n)}function pp(e,t,n){e=_l(e),t=xl(t);var i=t?V(e):0;return t&&i<t?e+ea(t-i,n):e}function up(e,t,n){e=_l(e),t=xl(t);var i=t?V(e):0;return t&&i<t?ea(t-i,n)+e:e}function cp(e,t,n){return n||null==t?t=0:t&&(t=+t),Vu(_l(e).replace(Lt,""),t||0)}function dp(e,t,n){return t=(n?Oa(e,t,n):t===J)?1:xl(t),tr(_l(e),t)}function fp(){var e=arguments,t=_l(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function hp(e,t,n){return n&&"number"!=typeof n&&Oa(e,t,n)&&(t=n=J),(n=n===J?De:n>>>0)?(e=_l(e),e&&("string"==typeof t||null!=t&&!wd(t))&&!(t=fr(t))&&R(e)?Sr(X(e),0,n):e.split(t,n)):[]}function mp(e,t,n){return e=_l(e),n=null==n?0:Zn(xl(n),0,e.length),t=fr(t),e.slice(n,n+t.length)==t}function gp(e,t,n){var i=G.templateSettings;n&&Oa(e,t,n)&&(t=J),e=_l(e),t=Ed({},t,i,la);var r,a,o=Ed({},t.imports,i.imports,la),s=jl(o),l=L(o,s),p=0,u=t.interpolate||qt,c="__p += '",d=su((t.escape||qt).source+"|"+u.source+"|"+(u===St?zt:qt).source+"|"+(t.evaluate||qt).source+"|$","g"),f="//# sourceURL="+(mu.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++In+"]")+"\n";e.replace(d,function(t,n,i,o,s,l){return i||(i=o),c+=e.slice(p,l).replace(Vt,M),n&&(r=!0,c+="' +\n__e("+n+") +\n'"),s&&(a=!0,c+="';\n"+s+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),p=l+t.length,t}),c+="';\n";var h=mu.call(t,"variable")&&t.variable;if(h){if(Bt.test(h))throw new iu(ie)}else c="with (obj) {\n"+c+"\n}\n";c=(a?c.replace(mt,""):c).replace(gt,"$1").replace(vt,"$1;"),c="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var m=Yd(function(){return ru(s,f+"return "+c).apply(J,l)});if(m.source=c,Zs(m))throw m;return m}function vp(e){return _l(e).toLowerCase()}function bp(e){return _l(e).toUpperCase()}function yp(e,t,n){if((e=_l(e))&&(n||t===J))return A(e);if(!e||!(t=fr(t)))return e;var i=X(e),r=X(t);return Sr(i,D(i,r),O(i,r)+1).join("")}function wp(e,t,n){if((e=_l(e))&&(n||t===J))return e.slice(0,Y(e)+1);if(!e||!(t=fr(t)))return e;var i=X(e);return Sr(i,0,O(i,X(t))+1).join("")}function xp(e,t,n){if((e=_l(e))&&(n||t===J))return e.replace(Lt,"");if(!e||!(t=fr(t)))return e;var i=X(e);return Sr(i,D(i,X(t))).join("")}function Cp(e,t){var n=Ce,i=Te;if(il(t)){var r="separator"in t?t.separator:r;n="length"in t?xl(t.length):n,i="omission"in t?fr(t.omission):i}e=_l(e);var a=e.length;if(R(e)){var o=X(e);a=o.length}if(n>=a)return e;var s=n-V(i);if(s<1)return i;var l=o?Sr(o,0,s).join(""):e.slice(0,s);if(r===J)return l+i;if(o&&(s+=l.length-s),wd(r)){if(e.slice(s).search(r)){var p,u=l;for(r.global||(r=su(r.source,_l(jt.exec(r))+"g")),r.lastIndex=0;p=r.exec(u);)var c=p.index;l=l.slice(0,c===J?s:c)}}else if(e.indexOf(fr(r),s)!=s){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i}function Tp(e){return e=_l(e),e&&wt.test(e)?e.replace(bt,ti):e}function Sp(e,t,n){return e=_l(e),t=n?J:t,t===J?z(e)?Z(e):h(e):e.match(t)||[]}function kp(t){var n=null==t?0:t.length,i=ya();return t=n?l(t,function(e){if("function"!=typeof e[1])throw new pu(ne);return[i(e[0]),e[1]]}):[],nr(function(i){for(var r=-1;++r<n;){var a=t[r];if(e(a[0],this,i))return e(a[1],this,i)}})}function _p(e){return ri(ii(e,se))}function Ep(e){return function(){return e}}function Ap(e,t){return null==e||e!==e?t:e}function Ip(e){return e}function Lp(e){return Ri("function"==typeof e?e:ii(e,se))}function $p(e){return Wi(ii(e,se))}function Dp(e,t){return Fi(e,ii(t,se))}function Op(e,t,i){var r=jl(t),a=mi(t,r);null!=i||il(t)&&(a.length||!r.length)||(i=t,t=e,e=this,a=mi(t,jl(t)));var o=!(il(i)&&"chain"in i&&!i.chain),s=el(e);return n(a,function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Mr(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,p([this.value()],arguments))})}),e}function Pp(){return Nn._===this&&(Nn._=wu),this}function Mp(){}function Bp(e){return e=xl(e),nr(function(t){return qi(t,e)})}function Rp(e){return Pa(e)?x(Qa(e)):Ki(e)}function zp(e){return function(t){return null==e?J:gi(e,t)}}function jp(){return[]}function Np(){return!1}function Hp(){return{}}function Wp(){return""}function Fp(){return!0}function Up(e,t){if((e=xl(e))<1||e>Ie)return[];var n=De,i=Gu(e,De);t=ya(t),e-=De;for(var r=_(i,t);++n<e;)t(n);return r}function Gp(e){return md(e)?l(e,Qa):ml(e)?[e]:Mr(Lc(_l(e)))}function qp(e){var t=++gu;return _l(e)+t}function Vp(e){return e&&e.length?pi(e,Ip,yi):J}function Xp(e,t){return e&&e.length?pi(e,ya(t,2),yi):J}function Yp(e){return w(e,Ip)}function Kp(e,t){return w(e,ya(t,2))}function Qp(e){return e&&e.length?pi(e,Ip,Ni):J}function Zp(e,t){return e&&e.length?pi(e,ya(t,2),Ni):J}function Jp(e){return e&&e.length?k(e,Ip):0}function eu(e,t){return e&&e.length?k(e,ya(t,2)):0}C=null==C?Nn:ni.defaults(Nn.Object(),C,ni.pick(Nn,An));var tu=C.Array,nu=C.Date,iu=C.Error,ru=C.Function,au=C.Math,ou=C.Object,su=C.RegExp,lu=C.String,pu=C.TypeError,uu=tu.prototype,cu=ru.prototype,du=ou.prototype,fu=C["__core-js_shared__"],hu=cu.toString,mu=du.hasOwnProperty,gu=0,vu=function(){var e=/[^.]+$/.exec(fu&&fu.keys&&fu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bu=du.toString,yu=hu.call(ou),wu=Nn._,xu=su("^"+hu.call(mu).replace(At,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cu=Fn?C.Buffer:J,Tu=C.Symbol,Su=C.Uint8Array,ku=Cu?Cu.allocUnsafe:J,_u=H(ou.getPrototypeOf,ou),Eu=ou.create,Au=du.propertyIsEnumerable,Iu=uu.splice,Lu=Tu?Tu.isConcatSpreadable:J,$u=Tu?Tu.iterator:J,Du=Tu?Tu.toStringTag:J,Ou=function(){try{var e=Ca(ou,"defineProperty");return e({},"",{}),e}catch(e){}}(),Pu=C.clearTimeout!==Nn.clearTimeout&&C.clearTimeout,Mu=nu&&nu.now!==Nn.Date.now&&nu.now,Bu=C.setTimeout!==Nn.setTimeout&&C.setTimeout,Ru=au.ceil,zu=au.floor,ju=ou.getOwnPropertySymbols,Nu=Cu?Cu.isBuffer:J,Hu=C.isFinite,Wu=uu.join,Fu=H(ou.keys,ou),Uu=au.max,Gu=au.min,qu=nu.now,Vu=C.parseInt,Xu=au.random,Yu=uu.reverse,Ku=Ca(C,"DataView"),Qu=Ca(C,"Map"),Zu=Ca(C,"Promise"),Ju=Ca(C,"Set"),ec=Ca(C,"WeakMap"),tc=Ca(ou,"create"),nc=ec&&new ec,ic={},rc=Za(Ku),ac=Za(Qu),oc=Za(Zu),sc=Za(Ju),lc=Za(ec),pc=Tu?Tu.prototype:J,uc=pc?pc.valueOf:J,cc=pc?pc.toString:J,dc=function(){function e(){}return function(t){if(!il(t))return{};if(Eu)return Eu(t);e.prototype=t;var n=new e;return e.prototype=J,n}}();G.templateSettings={escape:Ct,evaluate:Tt,interpolate:St,variable:"",imports:{_:G}},G.prototype=K.prototype,G.prototype.constructor=G,Q.prototype=dc(K.prototype),Q.prototype.constructor=Q,$t.prototype=dc(K.prototype),$t.prototype.constructor=$t,Kt.prototype.clear=Qt,Kt.prototype.delete=Zt,Kt.prototype.get=Jt,Kt.prototype.has=en,Kt.prototype.set=tn,nn.prototype.clear=rn,nn.prototype.delete=an,nn.prototype.get=on,nn.prototype.has=sn,nn.prototype.set=ln,pn.prototype.clear=un,pn.prototype.delete=cn,pn.prototype.get=dn,pn.prototype.has=fn,pn.prototype.set=hn,mn.prototype.add=mn.prototype.push=gn,mn.prototype.has=vn,bn.prototype.clear=yn,bn.prototype.delete=wn,bn.prototype.get=xn,bn.prototype.has=Sn,bn.prototype.set=kn;var fc=Hr(fi),hc=Hr(hi,!0),mc=Wr(),gc=Wr(!0),vc=nc?function(e,t){return nc.set(e,t),e}:Ip,bc=Ou?function(e,t){return Ou(e,"toString",{configurable:!0,enumerable:!1,value:Ep(t),writable:!0})}:Ip,yc=nr,wc=Pu||function(e){return Nn.clearTimeout(e)},xc=Ju&&1/F(new Ju([,-0]))[1]==Ae?function(e){return new Ju(e)}:Mp,Cc=nc?function(e){return nc.get(e)}:Mp,Tc=ju?function(e){return null==e?[]:(e=ou(e),a(ju(e),function(t){return Au.call(e,t)}))}:jp,Sc=ju?function(e){for(var t=[];e;)p(t,Tc(e)),e=_u(e);return t}:jp,kc=bi;(Ku&&kc(new Ku(new ArrayBuffer(1)))!=at||Qu&&kc(new Qu)!=Ge||Zu&&kc(Zu.resolve())!=Ye||Ju&&kc(new Ju)!=Ze||ec&&kc(new ec)!=nt)&&(kc=function(e){var t=bi(e),n=t==Xe?e.constructor:J,i=n?Za(n):"";if(i)switch(i){case rc:return at;case ac:return Ge;case oc:return Ye;case sc:return Ze;case lc:return nt}return t});var _c=fu?el:Np,Ec=Ya(vc),Ac=Bu||function(e,t){return Nn.setTimeout(e,t)},Ic=Ya(bc),Lc=function(e){var t=Ls(e,function(e){return n.size===ae&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Et,function(e,n,i,r){t.push(i?r.replace(Rt,"$1"):n||e)}),t}),$c=nr(function(e,t){return qs(e)?si(e,di(t,1,qs,!0)):[]}),Dc=nr(function(e,t){var n=wo(t);return qs(n)&&(n=J),qs(e)?si(e,di(t,1,qs,!0),ya(n,2)):[]}),Oc=nr(function(e,t){var n=wo(t);return qs(n)&&(n=J),qs(e)?si(e,di(t,1,qs,!0),J,n):[]}),Pc=nr(function(e){var t=l(e,xr);return t.length&&t[0]===e[0]?Ti(t):[]}),Mc=nr(function(e){var t=wo(e),n=l(e,xr);return t===wo(n)?t=J:n.pop(),n.length&&n[0]===e[0]?Ti(n,ya(t,2)):[]}),Bc=nr(function(e){var t=wo(e),n=l(e,xr);return t="function"==typeof t?t:J,t&&n.pop(),n.length&&n[0]===e[0]?Ti(n,J,t):[]}),Rc=nr(To),zc=ha(function(e,t){var n=null==e?0:e.length,i=Gn(e,t);return Zi(e,l(t,function(e){return Da(e,n)?+e:e}).sort($r)),i}),jc=nr(function(e){return hr(di(e,1,qs,!0))}),Nc=nr(function(e){var t=wo(e);return qs(t)&&(t=J),hr(di(e,1,qs,!0),ya(t,2))}),Hc=nr(function(e){var t=wo(e);return t="function"==typeof t?t:J,hr(di(e,1,qs,!0),J,t)}),Wc=nr(function(e,t){return qs(e)?si(e,t):[]}),Fc=nr(function(e){return yr(a(e,qs))}),Uc=nr(function(e){var t=wo(e);return qs(t)&&(t=J),yr(a(e,qs),ya(t,2))}),Gc=nr(function(e){var t=wo(e);return t="function"==typeof t?t:J,yr(a(e,qs),J,t)}),qc=nr(Go),Vc=nr(function(e){var t=e.length,n=t>1?e[t-1]:J;return n="function"==typeof n?(e.pop(),n):J,qo(e,n)}),Xc=ha(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return Gn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof $t&&Da(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Qo,args:[r],thisArg:J}),new Q(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(J),e})):this.thru(r)}),Yc=jr(function(e,t,n){mu.call(e,n)?++e[n]:Un(e,n,1)}),Kc=Xr(po),Qc=Xr(uo),Zc=jr(function(e,t,n){mu.call(e,n)?e[n].push(t):Un(e,n,[t])}),Jc=nr(function(t,n,i){var r=-1,a="function"==typeof n,o=Gs(t)?tu(t.length):[];return fc(t,function(t){o[++r]=a?e(n,t,i):ki(t,n,i)}),o}),ed=jr(function(e,t,n){Un(e,n,t)}),td=jr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),nd=nr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Oa(e,t[0],t[1])?t=[]:n>2&&Oa(t[0],t[1],t[2])&&(t=[t[0]]),Vi(e,di(t,1),[])}),id=Mu||function(){return Nn.Date.now()},rd=nr(function(e,t,n){var i=de;if(n.length){var r=W(n,ba(rd));i|=ve}return sa(e,i,t,n,r)}),ad=nr(function(e,t,n){var i=de|fe;if(n.length){var r=W(n,ba(ad));i|=ve}return sa(t,i,e,n,r)}),od=nr(function(e,t){return oi(e,1,t)}),sd=nr(function(e,t,n){return oi(e,Tl(t)||0,n)});Ls.Cache=pn;var ld=yc(function(t,n){n=1==n.length&&md(n[0])?l(n[0],I(ya())):l(di(n,1),I(ya()));var i=n.length;return nr(function(r){for(var a=-1,o=Gu(r.length,i);++a<o;)r[a]=n[a].call(this,r[a]);return e(t,this,r)})}),pd=nr(function(e,t){return sa(e,ve,J,t,W(t,ba(pd)))}),ud=nr(function(e,t){return sa(e,be,J,t,W(t,ba(ud)))}),cd=ha(function(e,t){return sa(e,we,J,J,J,t)}),dd=ia(yi),fd=ia(function(e,t){return e>=t}),hd=_i(function(){return arguments}())?_i:function(e){return rl(e)&&mu.call(e,"callee")&&!Au.call(e,"callee")},md=tu.isArray,gd=qn?I(qn):Ei,vd=Nu||Np,bd=Vn?I(Vn):Ai,yd=Xn?I(Xn):$i,wd=Yn?I(Yn):Pi,xd=Kn?I(Kn):Mi,Cd=Qn?I(Qn):Bi,Td=ia(Ni),Sd=ia(function(e,t){return e<=t}),kd=Nr(function(e,t){if(za(t)||Gs(t))return Br(t,jl(t),e),J;for(var n in t)mu.call(t,n)&&Mn(e,n,t[n])}),_d=Nr(function(e,t){Br(t,Nl(t),e)}),Ed=Nr(function(e,t,n,i){Br(t,Nl(t),e,i)}),Ad=Nr(function(e,t,n,i){Br(t,jl(t),e,i)}),Id=ha(Gn),Ld=nr(function(e,t){e=ou(e);var n=-1,i=t.length,r=i>2?t[2]:J;for(r&&Oa(t[0],t[1],r)&&(i=1);++n<i;)for(var a=t[n],o=Nl(a),s=-1,l=o.length;++s<l;){var p=o[s],u=e[p];(u===J||Us(u,du[p])&&!mu.call(e,p))&&(e[p]=a[p])}return e}),$d=nr(function(t){return t.push(J,pa),e(Bd,J,t)}),Dd=Qr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=bu.call(t)),e[t]=n},Ep(Ip)),Od=Qr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=bu.call(t)),mu.call(e,t)?e[t].push(n):e[t]=[n]},ya),Pd=nr(ki),Md=Nr(function(e,t,n){Ui(e,t,n)}),Bd=Nr(function(e,t,n,i){Ui(e,t,n,i)}),Rd=ha(function(e,t){var n={};if(null==e)return n;var i=!1;t=l(t,function(t){return t=Tr(t,e),i||(i=t.length>1),t}),Br(e,ga(e),n),i&&(n=ii(n,se|le|pe,ua));for(var r=t.length;r--;)mr(n,t[r]);return n}),zd=ha(function(e,t){return null==e?{}:Xi(e,t)}),jd=oa(jl),Nd=oa(Nl),Hd=Gr(function(e,t,n){return t=t.toLowerCase(),e+(n?ip(t):t)}),Wd=Gr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Fd=Gr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ud=Ur("toLowerCase"),Gd=Gr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),qd=Gr(function(e,t,n){return e+(n?" ":"")+Xd(t)}),Vd=Gr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Xd=Ur("toUpperCase"),Yd=nr(function(t,n){try{return e(t,J,n)}catch(e){return Zs(e)?e:new iu(e)}}),Kd=ha(function(e,t){return n(t,function(t){t=Qa(t),Un(e,t,rd(e[t],e))}),e}),Qd=Yr(),Zd=Yr(!0),Jd=nr(function(e,t){return function(n){return ki(n,e,t)}}),ef=nr(function(e,t){return function(n){return ki(e,n,t)}}),tf=Jr(l),nf=Jr(r),rf=Jr(d),af=na(),of=na(!0),sf=Zr(function(e,t){return e+t},0),lf=aa("ceil"),pf=Zr(function(e,t){return e/t},1),uf=aa("floor"),cf=Zr(function(e,t){return e*t},1),df=aa("round"),ff=Zr(function(e,t){return e-t},0);return G.after=Ts,G.ary=Ss,G.assign=kd,G.assignIn=_d,G.assignInWith=Ed,G.assignWith=Ad,G.at=Id,G.before=ks,G.bind=rd,G.bindAll=Kd,G.bindKey=ad,G.castArray=zs,G.chain=Yo,G.chunk=to,G.compact=no,G.concat=io,G.cond=kp,G.conforms=_p,G.constant=Ep,G.countBy=Yc,G.create=El,G.curry=_s,G.curryRight=Es,G.debounce=As,G.defaults=Ld,G.defaultsDeep=$d,G.defer=od,G.delay=sd,G.difference=$c,G.differenceBy=Dc,G.differenceWith=Oc,G.drop=ro,G.dropRight=ao,G.dropRightWhile=oo,G.dropWhile=so,G.fill=lo,G.filter=os,G.flatMap=ss,G.flatMapDeep=ls,G.flatMapDepth=ps,G.flatten=co,G.flattenDeep=fo,G.flattenDepth=ho,G.flip=Is,G.flow=Qd,G.flowRight=Zd,G.fromPairs=mo,G.functions=Pl,G.functionsIn=Ml,G.groupBy=Zc,G.initial=bo,G.intersection=Pc,G.intersectionBy=Mc,G.intersectionWith=Bc,G.invert=Dd,G.invertBy=Od,G.invokeMap=Jc,G.iteratee=Lp,G.keyBy=ed,G.keys=jl,G.keysIn=Nl,G.map=fs,G.mapKeys=Hl,G.mapValues=Wl,G.matches=$p,G.matchesProperty=Dp,G.memoize=Ls,G.merge=Md,G.mergeWith=Bd,G.method=Jd,G.methodOf=ef,G.mixin=Op,G.negate=$s,G.nthArg=Bp,G.omit=Rd,G.omitBy=Fl,G.once=Ds,G.orderBy=hs,G.over=tf,G.overArgs=ld,G.overEvery=nf,G.overSome=rf,G.partial=pd,G.partialRight=ud,G.partition=td,G.pick=zd,G.pickBy=Ul,G.property=Rp,G.propertyOf=zp,G.pull=Rc,G.pullAll=To,G.pullAllBy=So,G.pullAllWith=ko,G.pullAt=zc,G.range=af,G.rangeRight=of,G.rearg=cd,G.reject=vs,G.remove=_o,G.rest=Os,G.reverse=Eo,G.sampleSize=ys,G.set=ql,G.setWith=Vl,G.shuffle=ws,G.slice=Ao,G.sortBy=nd,G.sortedUniq=Mo,G.sortedUniqBy=Bo,G.split=hp,G.spread=Ps,G.tail=Ro,G.take=zo,G.takeRight=jo,G.takeRightWhile=No,G.takeWhile=Ho,G.tap=Ko,G.throttle=Ms,G.thru=Qo,G.toArray=yl,G.toPairs=jd,G.toPairsIn=Nd,G.toPath=Gp,G.toPlainObject=Sl,G.transform=Xl,G.unary=Bs,G.union=jc,G.unionBy=Nc,G.unionWith=Hc,G.uniq=Wo,G.uniqBy=Fo,G.uniqWith=Uo,G.unset=Yl,G.unzip=Go,G.unzipWith=qo,G.update=Kl,G.updateWith=Ql,G.values=Zl,G.valuesIn=Jl,G.without=Wc,G.words=Sp,G.wrap=Rs,G.xor=Fc,G.xorBy=Uc,G.xorWith=Gc,G.zip=qc,G.zipObject=Vo,G.zipObjectDeep=Xo,G.zipWith=Vc,G.entries=jd,G.entriesIn=Nd,G.extend=_d,G.extendWith=Ed,Op(G,G),G.add=sf,G.attempt=Yd,G.camelCase=Hd,G.capitalize=ip,G.ceil=lf,G.clamp=ep,G.clone=js,G.cloneDeep=Hs,G.cloneDeepWith=Ws,G.cloneWith=Ns,G.conformsTo=Fs,G.deburr=rp,G.defaultTo=Ap,G.divide=pf,G.endsWith=ap,G.eq=Us,G.escape=op,G.escapeRegExp=sp,G.every=as,G.find=Kc,G.findIndex=po,G.findKey=Al,G.findLast=Qc,G.findLastIndex=uo,G.findLastKey=Il,G.floor=uf,G.forEach=us,G.forEachRight=cs,G.forIn=Ll,G.forInRight=$l,G.forOwn=Dl,G.forOwnRight=Ol,G.get=Bl,G.gt=dd,G.gte=fd,G.has=Rl,G.hasIn=zl,G.head=go,G.identity=Ip,G.includes=ds,G.indexOf=vo,G.inRange=tp,G.invoke=Pd,G.isArguments=hd,G.isArray=md,G.isArrayBuffer=gd,G.isArrayLike=Gs,G.isArrayLikeObject=qs,G.isBoolean=Vs,G.isBuffer=vd,G.isDate=bd,G.isElement=Xs,G.isEmpty=Ys,G.isEqual=Ks,G.isEqualWith=Qs,G.isError=Zs,G.isFinite=Js,G.isFunction=el,G.isInteger=tl,G.isLength=nl,G.isMap=yd,G.isMatch=al,G.isMatchWith=ol,G.isNaN=sl,G.isNative=ll,G.isNil=ul,G.isNull=pl,G.isNumber=cl,G.isObject=il,G.isObjectLike=rl,G.isPlainObject=dl,G.isRegExp=wd,G.isSafeInteger=fl,G.isSet=xd,G.isString=hl,
G.isSymbol=ml,G.isTypedArray=Cd,G.isUndefined=gl,G.isWeakMap=vl,G.isWeakSet=bl,G.join=yo,G.kebabCase=Wd,G.last=wo,G.lastIndexOf=xo,G.lowerCase=Fd,G.lowerFirst=Ud,G.lt=Td,G.lte=Sd,G.max=Vp,G.maxBy=Xp,G.mean=Yp,G.meanBy=Kp,G.min=Qp,G.minBy=Zp,G.stubArray=jp,G.stubFalse=Np,G.stubObject=Hp,G.stubString=Wp,G.stubTrue=Fp,G.multiply=cf,G.nth=Co,G.noConflict=Pp,G.noop=Mp,G.now=id,G.pad=lp,G.padEnd=pp,G.padStart=up,G.parseInt=cp,G.random=np,G.reduce=ms,G.reduceRight=gs,G.repeat=dp,G.replace=fp,G.result=Gl,G.round=df,G.runInContext=f,G.sample=bs,G.size=xs,G.snakeCase=Gd,G.some=Cs,G.sortedIndex=Io,G.sortedIndexBy=Lo,G.sortedIndexOf=$o,G.sortedLastIndex=Do,G.sortedLastIndexBy=Oo,G.sortedLastIndexOf=Po,G.startCase=qd,G.startsWith=mp,G.subtract=ff,G.sum=Jp,G.sumBy=eu,G.template=gp,G.times=Up,G.toFinite=wl,G.toInteger=xl,G.toLength=Cl,G.toLower=vp,G.toNumber=Tl,G.toSafeInteger=kl,G.toString=_l,G.toUpper=bp,G.trim=yp,G.trimEnd=wp,G.trimStart=xp,G.truncate=Cp,G.unescape=Tp,G.uniqueId=qp,G.upperCase=Vd,G.upperFirst=Xd,G.each=us,G.eachRight=cs,G.first=go,Op(G,function(){var e={};return fi(G,function(t,n){mu.call(G.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),G.VERSION="4.17.21",n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){G[e].placeholder=G}),n(["drop","take"],function(e,t){$t.prototype[e]=function(n){n=n===J?1:Uu(xl(n),0);var i=this.__filtered__&&!t?new $t(this):this.clone();return i.__filtered__?i.__takeCount__=Gu(n,i.__takeCount__):i.__views__.push({size:Gu(n,De),type:e+(i.__dir__<0?"Right":"")}),i},$t.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),n(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==_e||3==n;$t.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ya(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),n(["head","last"],function(e,t){var n="take"+(t?"Right":"");$t.prototype[e]=function(){return this[n](1).value()[0]}}),n(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");$t.prototype[e]=function(){return this.__filtered__?new $t(this):this[n](1)}}),$t.prototype.compact=function(){return this.filter(Ip)},$t.prototype.find=function(e){return this.filter(e).head()},$t.prototype.findLast=function(e){return this.reverse().find(e)},$t.prototype.invokeMap=nr(function(e,t){return"function"==typeof e?new $t(this):this.map(function(n){return ki(n,e,t)})}),$t.prototype.reject=function(e){return this.filter($s(ya(e)))},$t.prototype.slice=function(e,t){e=xl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new $t(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==J&&(t=xl(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},$t.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},$t.prototype.toArray=function(){return this.take(De)},fi($t.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=G[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);r&&(G.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,s=t instanceof $t,l=o[0],u=s||md(t),c=function(e){var t=r.apply(G,p([e],o));return i&&d?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,f=!!this.__actions__.length,h=a&&!d,m=s&&!f;if(!a&&u){t=m?t:new $t(this);var g=e.apply(t,o);return g.__actions__.push({func:Qo,args:[c],thisArg:J}),new Q(g,d)}return h&&m?e.apply(this,o):(g=this.thru(c),h?i?g.value()[0]:g.value():g)})}),n(["pop","push","shift","sort","splice","unshift"],function(e){var t=uu[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);G.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(md(r)?r:[],e)}return this[n](function(n){return t.apply(md(n)?n:[],e)})}}),fi($t.prototype,function(e,t){var n=G[t];if(n){var i=n.name+"";mu.call(ic,i)||(ic[i]=[]),ic[i].push({name:t,func:n})}}),ic[Kr(J,fe).name]=[{name:"wrapper",func:J}],$t.prototype.clone=Mt,$t.prototype.reverse=Xt,$t.prototype.value=Yt,G.prototype.at=Xc,G.prototype.chain=Zo,G.prototype.commit=Jo,G.prototype.next=es,G.prototype.plant=ns,G.prototype.reverse=is,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=rs,G.prototype.first=G.prototype.head,$u&&(G.prototype[$u]=ts),G}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Nn._=ni,define("underscore",[],function(){return ni})):Wn?((Wn.exports=ni)._=ni,Hn._=ni):Nn._=ni}.call(this),define("lib-build/tpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("lib-build/tpl!storymaps/common/ui/share/ShareDialog",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="modal-dialog">\n\t<div class="modal-content">\n\t\t<div class="modal-logo"></div>\n\t\t<div class="modal-header">\n\t\t\t<span class="modal-title"></span>\n\t\t</div>\n\n\t\t<div class="modal-body">\n\t\t\t<div class="social-container">\n\t\t\t\t<i class="shareIcon blackHover share_facebook icon-facebook-squared"></i>\n\t\t\t\t<i class="shareIcon blackHover share_twitter icon-twitter"></i>\n\t\t\t</div>\n\n\t\t\t<div class="share-url-panel"></div>\n\n\t\t\t<div class="embed-title"></div>\n\t\t\t<div class="share-embed-panel"></div>\n\n\t\t\t<div class="checkbox autoplay-container">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" class="autoplay-checkbox" value="autoplay" />\n\t\t\t\t\t<span class="autoplay-label"></span>\n\t\t\t\t</label>\n\t\t\t\t<a href="#" class="help autoplay-help" data-toggle="tooltip">\n\t\t\t\t\t<img src="resources/tpl/builder/icons/builder-help.png" style="vertical-align: -5px;"/>\n\t\t\t\t</a>\n\t\t\t\t<span class="autoplay-notification"></span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="modal-footer">\n\t\t\t<button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal"></button>\n\t\t</div>\n\t</div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareDialog",[],function(){}),define("lib-build/tpl!storymaps/common/ui/share/ShareURLPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="share-url-container">\n\t<span class="share-btn share-clipboard"></span>\n\t<input type="text" class="form-control bitlylink" readonly="true"/>\n\t<a class="btn btn-primary btn-bitlylink-open" target="_blank"></a>\n\t<div class="share-status-wrapper"><span class="share-status"></span></div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareURLPanel",[],function(){}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("lib-app/clipboard/clipboard",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n||e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){function i(e,t){for(;e&&e!==document;){if(e.matches(t))return e;e=e.parentNode}}if(Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=i},{}],2:[function(e,t,n){function i(e,t,n,i,a){var o=r.apply(this,arguments);return e.addEventListener(n,o,a),{destroy:function(){e.removeEventListener(n,o,a)}}}function r(e,t,n,i){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&i.call(e,n)}}var a=e("./closest");t.exports=i},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return r(e,t,n);if(s.nodeList(e))return a(e,t,n);if(s.string(e))return o(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function a(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function o(e,t,n){return l(document.body,e,t,n)}var s=e("./is"),l=e("delegate");t.exports=i},{"./is":3,delegate:2}],5:[function(e,t,n){function i(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}t.exports=i},{}],6:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var a=0,o=i.length;a<o;a++)i[a].fn!==t&&i[a].fn._!==t&&r.push(i[a]);return r.length?n[e]=r:delete n[e],this}},t.exports=i},{}],7:[function(t,n,i){!function(r,a){if("function"==typeof e&&e.amd)e(["module","select"],a);else if(void 0!==i)a(n,t("select"));else{var o={exports:{}};a(o,r.select),r.clipboardAction=o.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(e){return e&&e.__esModule?e:{default:e}}(t),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,n)),this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=o})},{select:5}],8:[function(t,n,i){!function(r,a){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],a);else if(void 0!==i)a(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};a(o,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=o.exports}}(this,function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var p=r(t),u=r(n),c=r(i),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return s(t,e),d(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,c.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new p.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(u.default);e.exports=f})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),define("lib-build/css!storymaps/common/_resources/font/builder-share/css/share-font",[],function(){}),define("storymaps/common/ui/share/ShareURLPanel",["lib-build/tpl!./ShareURLPanel","lib-build/css!./ShareURLPanel","../../utils/SocialSharing","lib-app/clipboard/clipboard","lib-build/css!storymaps/common/_resources/font/builder-share/css/share-font.css"],function(e,t,n,i){return function(t){function r(e,r){o.val(e),t.find(".btn-bitlylink-open").attr("href",e),n.requestShortUrl(e).then(function(e){o.val(e),void 0!==r&&!0!==r||o.select()}),new i(t.find(".share-btn").get(0),{text:function(){return t.find(".bitlylink").val()}}).on("success",function(){t.find(".share-btn").removeClass("share-clipboard").addClass("share-ok"),t.find(".share-status").show(),t.find(".bitlylink")[0].selectionStart=t.find(".bitlylink")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("share-clipboard").removeClass("share-ok"),t.find(".share-status").hide()},2e3)})}var a=document.queryCommandSupported("copy");t.append(e({}));var o=t.find(".bitlylink"),s=null;!function(){t.find(".bitlylink").click(function(){this.setSelectionRange(0,this.value.length)})}(),this.present=function(e,i){s=n.cleanURL(e,!0),r(s,i),t.find(".btn-bitlylink-open").html(i18n.viewer.shareFromCommon.open),t.find(".share-url-container").toggleClass("touch",!a),t.find(".share-btn").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.focus=function(){o.select()},this.setAutoplay=function(e){var t=s;e&&(t+=t.match(/\?/)?"&":"?",t+="autoplay"),r(t)}}}),define("lib-build/tpl!storymaps/common/ui/share/ShareEmbedPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="share-embed-container">\n\t<div class="embed-explain"></div>\n\n\t<div class="share-embed-wrapper">\n\t\t<div class="share-btn share-clipboard"></div>\n\t\t<textarea class="form-control embedTextarea" readonly="true"></textarea>\n\t</div>\n\t<div class="share-status-wrapper"><span class="share-status"></span></div>\n\n\t<div>\n\t\t<span class="embed-lbl-size"></span>\n\t\t<div class="btn-group">\n\t\t\t<button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">\n\t\t\t\t<span class="embed-sizes-btn"></span>&nbsp;<span class="caret"></span>\n\t\t\t</button>\n\t\t\t<ul class="dropdown-menu embed-sizes" role="menu"></ul>\n\t\t</div>\n\t</div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareEmbedPanel",[],function(){}),define("storymaps/common/ui/share/ShareEmbedPanel",["lib-build/tpl!./ShareEmbedPanel","lib-build/css!./ShareEmbedPanel","lib-app/clipboard/clipboard","lib-build/css!storymaps/common/_resources/font/builder-share/css/share-font.css"],function(e,t,n){return function(t){function i(e,i){t.find(".embedTextarea").val(r.replace("%URL%",o).replace("%WIDTH%",e).replace("%HEIGHT%",i)),new n(t.find(".share-btn").get(0),{text:function(){return t.find(".embedTextarea").val()}}).on("success",function(){t.find(".share-btn").removeClass("share-clipboard").addClass("share-ok"),t.find(".share-status").show(),t.find(".embedTextarea")[0].selectionStart=t.find(".embedTextarea")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("share-clipboard").removeClass("share-ok"),t.find(".share-status").hide()},2e3)})}var r='<iframe width="%WIDTH%" height="%HEIGHT%" src="%URL%" frameborder="0" scrolling="no"></iframe>',a=[{width:"100%",height:"800px"},{width:"100%",height:"640px"},{width:"800px",height:"600px"},{width:"640px",height:"480px"}],o=null,s=null;t.append(e({})),function(){$.each(a,function(e,n){t.find(".embed-sizes").append('<li><a data-width="'+n.width+'" data-height="'+n.height+'">'+n.width+" / "+n.height+"</a></li>")}),t.find(".embed-sizes a").click(function(){var e=$(this);e.parents(".btn-group").find(".embed-sizes-btn").text(e.text()),i(e.data("width"),e.data("height"))})}(),function(){t.find(".embedTextarea").click(function(){this.setSelectionRange(0,this.value.length)})}(),this.present=function(e){var n=document.queryCommandSupported("copy");s=e,o=e,t.find(".embed-explain").html(i18n.viewer.shareFromCommon.embedExplain),t.find(".embed-lbl-size").html(i18n.viewer.shareFromCommon.size),t.find(".embed-sizes a").eq(0).click(),t.find(".share-embed-wrapper").toggleClass("touch",!n),t.find(".share-clipboard").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.setAutoplay=function(e){var n=s;e&&(n+=n.match(/\?/)?"&":"?",n+="autoplay"),o=n,t.find(".embed-sizes a").eq(0).click()}}}),define("storymaps/common/ui/share/ShareDialog",["lib-build/tpl!./ShareDialog","lib-build/css!./ShareDialog","./ShareURLPanel","./ShareEmbedPanel","../../utils/SocialSharing"],function(e,t,n,i,r){return function(t){function a(e){var n=$("<div>"+app.data.getWebAppData().getTitle()+"</div>").text();t.find(".share_facebook").toggle(e.facebook),e.facebook&&t.find(".share_facebook").off("click").click(function(){r.shareFacebook("","",null,$(this).data("url"))}),t.find(".share_twitter").toggle(e.twitter),e.twitter&&t.find(".share_twitter").off("click").click(function(){r.shareTwitter(n,$(this).data("url"))})}t.append(e({}));var o=new n(t.find(".share-url-panel")),s=new i(t.find(".share-embed-panel"));t.on("shown.bs.modal",function(){o.focus()}),t.find(".autoplay-checkbox").change(function(){o.setAutoplay(!!this.checked),s.setAutoplay(!!this.checked),t.find(".autoplay-notification").html(i18n.viewer.shareFromCommon.linksupdated).fadeIn(),setTimeout(function(){t.find(".autoplay-notification").fadeOut()},1e3)}),this.present=function(e,n){n=n||{facebook:!1,twitter:!1},t.find(".social-container").toggle(n.facebook||n.twitter),a(n),o.present(e),s.present(e),t.find(".modal-title").html(i18n.viewer.headerFromCommon.share),t.find(".embed-title").html(i18n.viewer.shareFromCommon.embed),t.find(".btn-close").html(i18n.viewer.common.close),t.find(".autoplay-label").html(i18n.viewer.shareFromCommon.autoplayLabel),t.find(".autoplay-help").tooltip({title:i18n.viewer.shareFromCommon.autoplayExplain1+"<br /><br />"+i18n.viewer.shareFromCommon.autoplayExplain2,html:!0}),t.find(".autoplay-checkbox").prop("checked",!1),t.modal({keyboard:!0}),app.appCfg.disableAutoPlay&&t.find(".autoplay-container").hide()}}}),define("storymaps/common/utils/HeaderHelper",["./SocialSharing","../ui/share/ShareDialog","storymaps/common/utils/CommonHelper"],function(e,t,n){function i(e){e.find(".linkContainer").parent().length&&e.find(".linkContainer").css("width",(e.find(".logoContainer").position()||{left:186}).left-e.find(".linkContainer").parent().position().left-e.find(".shareBtns").outerWidth()-($(".logoContainer").width()>1?14:4))}var r=new t($("#shareDialog"));return{setLogo:function(e,t,r){if(t.logoURL&&"NO_LOGO"!=t.logoURL){var a=e.find(".logoLink");t.logoTarget?a.css("cursor","pointer").attr("aria-label",i18n.viewer.a11y?i18n.viewer.a11y.logoLinkAria:"").attr("href",t.logoTarget):a.css("cursor","default").removeAttr("href"),i(e);var o=e.find(".logoImg");o[0].onload=function(){i(e),r&&"function"==typeof r&&r()},o[0].onerror=function(){i(e)},o.attr("src",n.possiblyAddToken(t.logoURL)).attr("alt",i18n.viewer.a11y?i18n.viewer.a11y.logoAria:"").show()}else e.find(".logoImg").hide(),i(e)},setLink:function(e,t){t.linkURL&&t.linkText?e.find(".linkContainer").html('<a href="'+t.linkURL+'" class="link" target="_blank">'+t.linkText+"</a>"):e.find(".linkContainer").html(t.linkText)},setSocial:function(e,t){var n=app.cfg.HEADER_SOCIAL,i=t.socialBtn,r=n&&n.facebook&&(!i||i.facebook),a=n&&n.twitter&&(!i||i.twitter),o=n&&n.bitly&&n.bitly.enable&&n.bitly.login&&n.bitly.key&&(!i||i.bitly);e.find(".share_facebook").toggleClass("active",r),e.find(".share_twitter").toggleClass("active",a),e.find(".share_bitly").toggleClass("active",o),e.find(".share-all").data("share-facebook",r).data("share-twitter",a).toggleClass("active",r||a||o)},toggleSocialBtnAppSharing:function(e,t){t&&e.find(".shareIcon").attr("title",""),e.find(".shareIcon").toggleClass("disabled",!!t).tooltip(t?{title:i18n.commonCore?i18n.commonCore.builderPanel.tooltipNotShared:"",container:"body"}:"destroy")},disableSocialBtnAppSharingAutoplay:function(e,t){e.find(".shareIcon").attr("title",""),e.find(".shareIcon").toggleClass("disabled",!0).tooltip({title:i18n.viewer.headerFromCommon.tooltipAutoplayDisabled,container:"body",placement:t||"bottom"})},initEvents:function(t){app.ui&&app.ui.accordionPanel&&t.off("keydown").on("keydown",function(e){if(9===e.keyCode&&!e.shiftKey&&!app.isInBuilder&&"accordion"===app.data.getWebAppData().getLayoutId()){var n=t.find(app.appCfg.focusable).filter(":visible"),i=$(":focus");return n.index(i)===n.length-1?(app.ui.accordionPanel.focus(0),!1):void 0}}),t.find(".share_facebook").off("click").click(function(){if(!$(this).hasClass("disabled")){var t=$("<div>"+(app.data.getWebAppData().getTitle()||"")+"</div>").text(),n=$("<div>"+(app.data.getWebAppData().getSubtitle()||"")+"</div>").text();e.shareFacebook(t,n,null,$(this).data("url"))}}),t.find(".share_twitter").off("click").click(function(){if(!$(this).hasClass("disabled")){var t=$("<div>"+(app.data.getWebAppData().getTitle()||"")+"</div>").text();e.shareTwitter(t,$(this).data("url"))}}),t.find(".share_bitly").off("click").click(function(){if(!$(this).hasClass("disabled")){var t=$(this).data("url")||document.location.href;r.present(e.cleanURL(t,!0))}}),t.find(".share-all").off("click").click(function(){if(!$(this).hasClass("disabled")){var t=$(this).data("url")||document.location.href;r.present(e.cleanURL(t,!0),{facebook:!!$(this).data("share-facebook"),twitter:!!$(this).data("share-twitter")})}}),t.find(".shareIcon, .share-all").off("keypress").keypress(function(e){if(13==e.which)return $(this).click(),!1});var n=i18n.viewer.headerFromCommon;t.find(".share_facebook").attr("title",n.facebookTooltip).attr("aria-label",n.facebookTooltip),t.find(".share_twitter").attr("title",n.twitterTooltip).attr("aria-label",n.twitterTooltip),t.find(".share_bitly").attr("title",n.bitlyTooltip).attr("aria-label",n.bitlyTooltip),$(window).resize(function(){i(t)})}}}),define("lib-build/css!storymaps/common/builder/InlineFieldEdit",[],function(){}),define("storymaps/common/builder/InlineFieldEdit",["lib-build/css!./InlineFieldEdit","dojo/has"],function(e,t){return function(e,n,i){function r(e,t,i){e&&t&&i&&("function"==typeof n&&n(),o=i,t.parent().parent().addClass("isEditing"),t.hide(),e.hide(),i.val(t.html()),i.show(),i.select())}function a(e){if(e&&e.get(0)){o=null;var n=e.get(0).value,r=e.parent().find(".text_edit_label"),a=e.parent().find(".text_edit_icon"),s=r.parent().first();""===n&&(n=$(e).parents("h1.title")?i18n.commonCore.inlineFieldEdit.enterTitle:i18n.commonCore.inlineFieldEdit.enterSubtitle),n=!app.data.getWebAppItem().created||app.data.getWebAppItem().created>app.cfg.HTML_SANITIZER_DATE?app.sanitizer.sanitize(n):n.replace(/<\/?script>/g,""),r.parent().parent().removeClass("isEditing"),r.html(n),r.show(),e.hide(),a.css("display","inline-block"),t("ios")&&document.activeElement.blur(),"function"==typeof i&&i(s,n)}}var o=null;e.find(".text_edit_icon").click(function(){r($(this),$(this).parent().find(".text_edit_label"),$(this).parent().find(".text_edit_input"))}),e.find(".text_edit_label").click(function(){r($(this).parent().find(".text_edit_icon"),$(this),$(this).parent().find(".text_edit_input"))}),e.find(".text_edit_input").blur(function(){a($(this))}),t("ios")&&$("body").bind("touchstart",function(e){o&&e.target!=o.get(0)&&a(o)}),e.find(".text_edit_input").keypress(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&a($(this))})}}),define("storymaps/common/ui/header/Desktop",["lib-build/css!./Desktop","../../utils/HeaderHelper","../../builder/InlineFieldEdit","../../utils/CommonHelper","dojo/has","dojo/topic"],function(e,t,n,i,r,a){return function(e,o){function s(){$("#headerDesktop .subtitle:visible").length?$("#headerDesktop .subtitle")[0].focus():$("#headerDesktop .title")[0].focus()}function l(t){if(!app.appCfg.noAppThemes){e.css("background-color",t.header),e.find(".textArea").css("color",t.headerTitle),e.find(".rightArea").css("color",t.headerText);var n=e.find(".subtitle");t.name.match(/-org$|-modified$/)?n.css({color:t.headerTitle,opacity:.8}):n.css({color:t.headerText})}}function p(n,i){var r=void 0===n.compactSize?i:n.compactSize;t.setLogo(e,n,m.resize),t.setLink(e,n),t.setSocial(e,n),t.initEvents(e,"bottom"),e.toggleClass("compact",r),r&&(e.find(".rightArea").hide(),setTimeout(function(){e.find(".rightArea").show()},0))}function u(){return e.find(".check-story").hide(),e.find(".check-story").is(":visible")||e.find(".share-story").is(":visible")||e.find(".error-status").removeClass("enabled"),m.resize(),!1}function c(){return e.find(".share-story").hide(),e.find(".check-story").is(":visible")||e.find(".share-story").is(":visible")||e.find(".error-status").removeClass("enabled"),m.resize(),!1}function d(t){var n=e.find(".check-story"),a=$('<span aria-hidden="true" class="check-story-close">×</span>'),o=$('<span aria-hidden="true" class="check-story-close">×</span>');n.off("click").removeClass("forceEvent").show(),a.click(u),o.click(c),"start"==t?n.html('<span class="small-loader"></span>'+i18n.viewer.headerFromCommon.checking).append(a).css("cursor","default"):"error"==t?n.html(i18n.viewer.headerFromCommon.fix).append(a).css("cursor","pointer").click(i.switchToBuilder).removeClass("btn-warning").addClass("btn-danger"):n.html(i18n.viewer.headerFromCommon.noerrors).append(a).removeClass("btn-warning").addClass("btn-success"),(r("ff")||r("ie")||7==r("trident"))&&"error"!=t&&n.click(u).addClass("forceEvent");var s=e.find(".share-story").html(i18n.viewer.headerFromCommon.notshared).append(o).toggle("private"==app.data.getWebAppItem().access||"shared"==app.data.getWebAppItem().access),l=s.css("background-color");if(!app.appCfg.noAppThemes){var p=app.data.getWebAppData().getColors();l&&p&&p.header&&i.colorsAreSimilar(l,p.header,!0)&&s.css("box-shadow","0 0 2px 1px white")}m.resize()}function f(){}function h(e,t){setTimeout(function(){a.publish("HEADER_EDITED",{src:$(e).attr("class").split(" ")[0],value:t}),$(e).removeClass("error")},r("ios")||r("ie")>=10?700:0),app.builder.hideSaveConfirmation()}var m=this;this.init=function(t,s,u,c,m,g,v){if(l(m),t)return void e.addClass("hideDesktop");if(o&&(e.addClass("isBuilder"),s="<div class='text_edit_label'>"+(s||i18n.commonCore.inlineFieldEdit.enterTitle)+"</div>",s+="<div class='text_edit_icon' title='"+i18n.commonCore.header.title.replace("%TPL_NAME%",app.cfg.TPL_NAME)+"'></div>",s+="<textarea rows='1' class='text_edit_input form-control' type='text' spellcheck='true'></textarea>",u="<span class='text_edit_label'>"+(u||i18n.commonCore.inlineFieldEdit.enterSubtitle)+"</span>",u+="<div class='text_edit_icon' title='"+i18n.commonCore.header.subtitle.replace("%TPL_NAME%",app.cfg.TPL_NAME)+"'></div>",u+="<textarea rows='3' class='text_edit_input form-control' type='text' spellcheck='true'></textarea>"),e.find(".title").html(s),e.find(".subtitle").html(u),o&&new n(e,f,h),!o&&!u){(void 0===c.compactSize?v:c.compactSize)||(e.find(".title").css({paddingTop:30,height:90}),e.find(".subtitle").css("height",32).attr("tabindex","-1"))}if(g){
var b=e.find(".switchBuilder").html('<span class="glyphicon glyphicon-cog"></span>'+i18n.viewer.headerFromCommon.builderButton+'<span aria-hidden="true" class="switch-builder-close">×</span>').click(i.switchToBuilder).show(),y=b.css("background-color");if(!app.appCfg.noAppThemes){var w=app.data.getWebAppData().getColors();y&&w&&w.header&&i.colorsAreSimilar(y,w.header,!0)&&b.css("box-shadow","0 0 2px 1px white")}r("ff")||r("ie")||7==r("trident")?b.find(".switch-builder-close").hide():b.find(".switch-builder-close").click(function(){return b.hide(),$(window).resize(),!1})}var x=i.getUrlParams(),C="true"===x.preview||""===x.preview,T="true"===x.autoplay||""===x.autoplay;app.isInBuilder||!app.userCanEdit||9==r("ie")||C||T||(e.find(".error-status").addClass("enabled"),a.subscribe("MYSTORIES_SCAN",d),d("start")),p(c,v)},this.resize=function(t){t||(t=$(document).width());var n=Math.max(e.find(".logoImg").outerWidth()+50,e.find(".rightArea").outerWidth()+20);e.find(".textArea").width(t-n-15)},this.update=function(e,t,n){l(t),p(e,n)},this.getTitle=function(){return o?e.find(".title .text_edit_label").html():e.find(".title").html()},this.getSubtitle=function(){return o?e.find(".subtitle .text_edit_label").html():e.find(".subtitle").html()},this.setTitleAndSubtitle=function(t,n){var i=o?i18n.commonCore.inlineFieldEdit.enterTitle:"",r=o?i18n.commonCore.inlineFieldEdit.enterSubtitle:"";e.find(".title"+(o?" .text_edit_label":"")).html(t||i),e.find(".subtitle"+(o?" .text_edit_label":"")).html(n||r)},this.toggleSocialBtnAppSharing=function(n){t.toggleSocialBtnAppSharing(e,n)},this.focus=function(e){e&&"social"!=e.area?s():($("#headerDesktop .shareIcon").attr("tabindex","0"),$("#headerDesktop .linkContainer a").length?$("#headerDesktop .linkContainer a").attr("tabindex","0")[0].focus():$("#headerDesktop .linkContainer").length?$("#headerDesktop .linkContainer").attr("tabindex","0")[0].focus():$("#headerDesktop .shareIcon:visible").length?$("#headerDesktop .shareIcon")[0].focus():s())},this.enableAutoplay=function(){t.disableSocialBtnAppSharingAutoplay(e)},this.setTitleError=function(){e.find(".title").addClass("error")},this.initLocalization=function(){}}}),define("lib-build/css!storymaps/tpl/core/MainView",[],function(){}),define("storymaps/tpl/core/Config",[],function(){return app.appCfg={supportWebmapPreviewAGOL:!1,webmapStory:!0,createWebmap:!0,useWebmapInApp:!0,useStandardHeader:!0,useAppTitleAsPageTitle:!0,headerCompactOpt:!0,headerCompactByDefault:!1,mapsImmediateResize:!0,mapCommandLargerTouch:!1,mediaPickerDisableVideo:!0,mediaPickerDisableWebPage:!0,mediaPickerSkipConfigure:!0,mediaPickerConfigureForceMode:"shortlist",disableAutoPlay:!1,noAppTitleInitScreen:!0,mapExtentFit:!0,noFastClick:!0,deleteProtect:!!app.isProduction,noStoryLengthRequired:!0,disableImageUpload:!1,disableImageImportUpload:!0,disableFBWarning:!0,disableBuilderTour:!0,imageUploadThumbWidth:250,useImageEXIF:!0,noAppThemes:!0,disableGalleryCreationSaveGeocoders:!0,useWebmapOwnerAsSave:!0},{checkConfigFileIsOK:function(){return app.cfg.HEADER_LOGO_URL="",app.cfg.HEADER_LOGO_TARGET="",app.cfg.HEADER_LINK_TEXT=i18n.viewer.headerFromCommon.storymapsText,app.cfg.HEADER_LINK_URL="https://storymaps.arcgis.com",app.cfg&&void 0!==app.cfg.HEADER_LOGO_URL&&void 0!==app.cfg.HEADER_LOGO_TARGET&&void 0!==app.cfg.HEADER_LINK_TEXT&&void 0!==app.cfg.HEADER_LINK_URL&&app.cfg.HEADER_SOCIAL&&app.cfg.TIMEOUT_VIEWER_LOAD&&app.cfg.TIMEOUT_VIEWER_REQUEST&&app.cfg.TIMEOUT_BUILDER_REQUEST&&app.cfg.HELP_URL&&app.cfg.HELP_URL_PORTAL&&app.cfg.TPL_NAME&&app.cfg.WEBAPP_TAG&&app.cfg.WEBAPP_KEYWORD_GENERIC&&app.cfg.WEBAPP_KEYWORD_APP&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&app.cfg.FLICKR_API_KEY&&app.cfg.CORS_SERVER&&app.cfg.DEFAULT_SHARING_URL&&app.cfg.DEFAULT_PROXY_URL}}}),define("storymaps/tpl/core/WebApplicationData",["dojo/_base/lang"],function(e){var t={},n={values:{tabs:[]}};return{set:function(i){t=e.clone(i),i&&i.values&&(n=i)},get:function(){var t=e.clone(n);return t.values.template=t.values.template||{},t.values.template={name:t.values.template.name||app.cfg.TPL_NAME,createdWith:t.values.template.createdWith||app.version,editedWith:app.version},t},getOriginalData:function(){return t},isBlank:function(){return Object.keys(n.values).length<=2},getBlank:function(){return{values:{webmap:t.values.webmap}}},getSourceWebmap:function(){return t&&t.values?t.values.webmap:null},cleanWebAppAfterInitialization:function(){return!1},restoreOriginalData:function(){this.set(t)},updateAfterSave:function(){t=e.clone(n)},getTemplateVersion:function(){return n.values.template?n.values.template.editedWith:null},getTemplateCreation:function(){return n.values.template?n.values.template.creaedWith:null},getDoNotWarnTitle:function(){return n.values.doNotWarnTitle||!1},setDoNotWarnTitle:function(e){n.values.doNotWarnTitle=e},getIsExternalData:function(){return n.values.isExternalData},setIsExternalData:function(e){n.values.isExternalData=e},getWebmap:function(){return n.values.webmap},setWebmap:function(e){n.values.webmap=e},getResponse:function(){return n.values.response},setResponse:function(e){n.values.response=e},getOriginalWebmap:function(){return n.values.originalWebmap},setOriginalWebmap:function(e){n.values.originalWebmap=e},getMapExtent:function(){return n.values.mapExtent},setMapExtent:function(e){n.values.mapExtent=e},getTitle:function(){return n.values.title},setTitle:function(e){n.values.title=e},getSubtitle:function(){return n.values.subtitle},setSubtitle:function(e){n.values.subtitle=e},getSettings:function(){return n.values.settings||{}},getLayoutId:function(){return"shortlist-classic"},getAppGeocoders:function(){return this.getSettings().appGeocoders},setAppGeocoders:function(e){n.values.settings=n.values.settings||{},n.values.settings.appGeocoders=e},getLayers:function(){return n.values.layers},setLayers:function(e){n.values.layers||(n.values.layers=[]),n.values.layers.push(e)},getShortlistLayerId:function(){return n.values.shortlistLayerId},setShortlistLayerId:function(e){n.values.shortlistLayerId=e},getTabs:function(){return n.values.tabs},setTabs:function(e){n.values.tabs=e},clearTabs:function(){n.values.tabs={}},clearLayers:function(){n.values.layers=[]},reverseContentLayers:function(){n.values.contentLayers.reverse()},getSupportLayers:function(){return n.values.supportLayers},setSupportLayers:function(e){n.values.supportLayers||(n.values.supportLayers=[]),n.values.supportLayers.push(e)},getStoryTestPanel:function(){return n.values.testPanel},setStoryTestPanel:function(e){n.values.testPanel=e},getLocateButton:function(){return!0},getGeneralOptions:function(){return e.clone(this.getSettings().generalOptions)||{}},setGeneralOptions:function(e){n.values.settings=n.values.settings||{},n.values.settings.generalOptions=e},setDefaultGeneralOptions:function(){this.setGeneralOptions({extentMode:"default",numberedIcons:!1,filterByExtent:!0,bookmarks:!1,bookmarksAlias:app.cfg.BOOKMARKS_ALIAS,geocoder:!1,locateButton:!1})},getLayoutOptions:function(){return e.clone(this.getSettings().layoutOptions)||{}},setLayoutOptions:function(e){n.values.settings=n.values.settings||{},n.values.settings.layoutOptions=e},setDefaultLayoutOptions:function(){this.setLayoutOptions({description:!0})},getThemeOptions:function(){return e.clone(this.getSettings().themeOptions)||{}},setThemeOptions:function(e){n.values.settings=n.values.settings||{},n.values.settings.themeOptions=e},setDefaultThemeOptions:function(){this.setThemeOptions({headerColor:"#444"})},getColors:function(){return{}},getHeader:function(){return this.getSettings().header||{}},setHeader:function(e){app.isInitializing&&app.data.getWebAppData().getShortlistLayerId()||(n.values.settings=n.values.settings||{},n.values.settings.header=e)},getHeaderLinkText:function(){return void 0===this.getHeader().linkText?app.cfg.HEADER_LINK_TEXT:this.getHeader().linkText},getHeaderLinkURL:function(){return void 0===this.getHeader().linkURL?app.cfg.HEADER_LINK_URL:this.getHeader().linkURL},getLogoURL:function(e){var t=this.getHeader().logoURL?this.getHeader().logoURL:app.cfg.HEADER_LOGO_URL;return t==app.cfg.HEADER_LOGO_URL&&this.getColors()&&(e?"white"==this.getColors().esriLogoMobile&&(t=""):"white"==this.getColors().esriLogo&&(t="")),t},getLogoTarget:function(){return this.getHeader().logoURL&&this.getHeader().logoURL!=app.cfg.HEADER_LOGO_URL?this.getHeader().logoTarget:app.cfg.HEADER_LOGO_TARGET},getSocial:function(){return this.getHeader().social},getHeaderCompactSize:function(){return this.getHeader().compactSize}}}),define("storymaps/tpl/core/Data",["./WebApplicationData","storymaps/common/utils/CommonHelper"],function(e,t){return function(){var n=null,i=null,r=null,a=null,o={},s=null;this.getWebMap=function(){return n},this.setWebMap=function(e){n=e},this.getShortlistLayerId=function(){return a},this.setShortlistLayerId=function(e){a=e},this.getWebAppItem=function(){return i||{}},this.setWebAppItem=function(e){i=e},this.getResponse=function(){return r},this.setResponse=function(e){r=e},this.getWebAppData=function(){return e},this.updateAfterSave=function(){e.updateAfterSave()},this.userIsAppOwner=function(){var e=app.portal?app.portal.getPortalUser():null;return e&&e.username==this.getWebAppItem().owner||null!=t.getPortalUser()&&t.getPortalUser()==this.getWebAppItem().owner||e&&e.privileges&&$.inArray("portal:admin:updateItems",e.privileges)>-1||"admin"==this.getWebAppItem().itemControl||"update"==this.getWebAppItem().itemControl},this.userIsOrgaPublisher=function(){var e=app.portal?app.portal.getPortalUser():null;return e&&e.orgId&&("org_admin"==e.role||"org_publisher"==e.role)},this.checkUserItemPrivileges=function(){var e=app.portal?app.portal.getPortalUser():null;return e&&!e.orgId&&!e.privileges||e&&e.privileges&&$.inArray("portal:user:createItem",e.privileges)>-1},this.isOrga=function(){return!(!app.portal||!app.portal.getPortalUser())&&!!app.portal.getPortalUser().orgId},this.getAppProxies=function(){return s},this.setAppProxies=function(e){s=e};var l=null;this.getStoryStorage=function(){return l},this.setStoryStorage=function(e){l=e},this.debug=function(){},this.getStory=function(){return o},this.setStory=function(e,t,n,i){e in o||(o[e]={title:"",id:e,color:null,extent:null}),t&&(o[e].title=t),n&&(o[e].color=n),i&&(o[e].extent=i)},this.clearStory=function(){o={}},this.getStoryByIndex=function(e){return o[e]},this.getStoryLength=function(){return app.data.getShortlistLayerId()&&app.map.getLayer(app.data.getShortlistLayerId())&&app.map.getLayer(app.data.getShortlistLayerId()).graphics.length?!!app.map.getLayer(app.data.getShortlistLayerId()).graphics.length:0},this.storyReadyToScan=function(){return!app.isGalleryCreation||app.data.getWebMap().item.id},this.getStoryEntries=function(){var t=[],n=[];return"WEBAPP"==l&&(t=e.getStoryEntries()),t=t.slice(0,app.cfg.MAX_NB_ENTRIES),app.isInBuilder?t||[]:($.each(t||[],function(e,t){"PUBLISHED"==t.status&&n.push(t)}),n)},this.getImages=function(){var e=$.map(this.getStoryEntries(),function(e){return e.media&&"image"==e.media.type&&e.media.image?e.media.image.url:null});return e=$.grep(e,function(t,n){return n==$.inArray(t,e)})},this.getAllImageUrls=function(){return _.map(this.getImages().concat(this.getSidebarImages().concat([e.getLogoURL()])),this.getNonProtocolNonDoubleSlashUrl)},this.getSidebarImages=function(){var e=this.getStoryEntries(),n=[];return _.forEach(e,function(e){var i=$(e.description);_.forEach(i.find("img"),function(e){n.push(t.possiblyRemoveToken(e.src))})}),n},this.getNonProtocolNonDoubleSlashUrl=function(e){return e.replace(/http[s]?\:\/\//,"").replace("//","/")}}}),define("storymaps/tpl/core/Helper",[],function(){return function(){this.isMobile=function(){var e=!!navigator.userAgent.match(/Android/i),t=!!navigator.userAgent.match(/BlackBerry/i),n=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),i=!!navigator.userAgent.match(/IEMobile/i);return e||t||n||i},this.isIE=function(){return navigator.appVersion.indexOf("MSIE")>-1||navigator.userAgent.match(/Trident.*rv\:11\./)||navigator.appVersion.indexOf("Edge")},this.isIE8=function(){return parseInt(navigator.userAgent.toLowerCase().split("msie")[1])<9},this.prependURLHTTP=function(e){return!e||""===e||e.match(/^mailto:/)?e:/^(https?:\/\/)|^(\/\/)/i.test(e)?e:"http://"+e}}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("storymaps/tpl/core/arcgis-html-sanitizer",[],t):"object"==typeof exports?exports.Sanitizer=t():e.Sanitizer=t()}(window,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(t){return e[t]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./src/index.ts")}({"./node_modules/cssfilter/lib/css.js":function(e,t,n){function i(e){return void 0===e||null===e}function r(e){var t={};for(var n in e)t[n]=e[n];return t}function a(e){e=r(e||{}),e.whiteList=e.whiteList||o.whiteList,e.onAttr=e.onAttr||o.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||o.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,this.options=e}var o=n("./node_modules/cssfilter/lib/default.js"),s=n("./node_modules/cssfilter/lib/parser.js");n("./node_modules/cssfilter/lib/util.js");a.prototype.process=function(e){if(e=e||"",!(e=e.toString()))return"";var t=this,n=t.options,r=n.whiteList,a=n.onAttr,o=n.onIgnoreAttr,l=n.safeAttrValue;return s(e,function(e,t,n,s,p){var u=r[n],c=!1;if(!0===u?c=u:"function"==typeof u?c=u(s):u instanceof RegExp&&(c=u.test(s)),!0!==c&&(c=!1),s=l(n,s)){var d={position:t,sourcePosition:e,source:p,isWhite:c};if(c){var f=a(n,s,d);return i(f)?n+":"+s:f}var f=o(n,s,d);return i(f)?void 0:f}})},e.exports=a},"./node_modules/cssfilter/lib/default.js":function(e,t){function n(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function i(e,t,n){}function r(e,t,n){}function a(e,t){return o.test(t)?"":t}var o=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=i,t.onIgnoreAttr=r,t.safeAttrValue=a},"./node_modules/cssfilter/lib/index.js":function(e,t,n){function i(e,t){return new a(t).process(e)}var r=n("./node_modules/cssfilter/lib/default.js"),a=n("./node_modules/cssfilter/lib/css.js");t=e.exports=i,t.FilterCSS=a;for(var o in r)t[o]=r[o];"undefined"!=typeof window&&(window.filterCSS=e.exports)},"./node_modules/cssfilter/lib/parser.js":function(e,t,n){function i(e,t){function n(){if(!a){var n=r.trim(e.slice(o,s)),i=n.indexOf(":");if(-1!==i){var p=r.trim(n.slice(0,i)),u=r.trim(n.slice(i+1));if(p){var c=t(o,l.length,p,u,n);c&&(l+=c+"; ")}}}o=s+1}e=r.trimRight(e),";"!==e[e.length-1]&&(e+=";");for(var i=e.length,a=!1,o=0,s=0,l="";s<i;s++){var p=e[s];if("/"===p&&"*"===e[s+1]){var u=e.indexOf("*/",s+2);if(-1===u)break;s=u+1,o=s+1,a=!1}else"("===p?a=!0:")"===p?a=!1:";"===p?a||n():"\n"===p&&n()}return r.trim(l)}var r=n("./node_modules/cssfilter/lib/util.js");e.exports=i},"./node_modules/cssfilter/lib/util.js":function(e,t){e.exports={indexOf:function(e,t){var n,i;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var i,r;if(Array.prototype.forEach)return e.forEach(t,n);for(i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},"./node_modules/lodash.isplainobject/index.js":function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function i(e){return!!e&&"object"==typeof e}function r(e){if(!i(e)||c.call(e)!=a||n(e))return!1;var t=d(e);if(null===t)return!0;var r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==u}var a="[object Object]",o=Function.prototype,s=Object.prototype,l=o.toString,p=s.hasOwnProperty,u=l.call(Object),c=s.toString,d=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);e.exports=r},"./node_modules/xss/lib/default.js":function(e,t,n){function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function r(e,t,n){}function a(e,t,n){}function o(e,t,n){}function s(e,t,n){}function l(e){return e.replace(k,"&lt;").replace(_,"&gt;")}function p(e,t,n,i){if(n=m(n),"href"===t||"src"===t){if("#"===(n=T.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(D.lastIndex=0,D.test(n))return""}else if("style"===t){if(O.lastIndex=0,O.test(n))return"";if(P.lastIndex=0,P.test(n)&&(D.lastIndex=0,D.test(n)))return"";!1!==i&&(i=i||S,n=i.process(n))}return n=g(n)}function u(e){return e.replace(E,"&quot;")}function c(e){return e.replace(A,'"')}function d(e){return e.replace(I,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function f(e){return e.replace(L,":").replace($," ")}function h(e){for(var t="",n=0,i=e.length;n<i;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return T.trim(t)}function m(e){return e=c(e),e=d(e),e=f(e),e=h(e)}function g(e){return e=u(e),e=l(e)}function v(){return""}function b(e,t){function n(t){return!!i||-1!==T.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),r=[],a=!1;return{onIgnoreTag:function(e,i,o){if(n(e)){if(o.isClosing){var s="[/removed]",l=o.position+s.length;return r.push([!1!==a?a:o.position,l]),a=!1,s}return a||(a=o.position),"[removed]"}return t(e,i,o)},remove:function(e){var t="",n=0;return T.forEach(r,function(i){t+=e.slice(n,i[0]),n=i[1]}),t+=e.slice(n)}}}function y(e){return e.replace(M,"")}function w(e){var t=e.split("");return t=t.filter(function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}),t.join("")}var x=n("./node_modules/cssfilter/lib/index.js").FilterCSS,C=n("./node_modules/cssfilter/lib/index.js").getDefaultWhiteList,T=n("./node_modules/xss/lib/util.js"),S=new x,k=/</g,_=/>/g,E=/"/g,A=/&quot;/g,I=/&#([a-zA-Z0-9]*);?/gim,L=/&colon;?/gim,$=/&newline;?/gim,D=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,O=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,P=/u\s*r\s*l\s*\(.*/gi,M=/<!--[\s\S]*?-->/g;t.whiteList=i(),t.getDefaultWhiteList=i,t.onTag=r,t.onIgnoreTag=a,t.onTagAttr=o,t.onIgnoreTagAttr=s,t.safeAttrValue=p,t.escapeHtml=l,t.escapeQuote=u,t.unescapeQuote=c,t.escapeHtmlEntities=d,t.escapeDangerHtml5Entities=f,t.clearNonPrintableCharacter=h,t.friendlyAttrValue=m,t.escapeAttrValue=g,t.onIgnoreTagStripAll=v,t.StripTagBody=b,t.stripCommentTag=y,t.stripBlankChar=w,t.cssFilter=S,t.getDefaultCSSWhiteList=C},"./node_modules/xss/lib/index.js":function(e,t,n){function i(e,t){return new o(t).process(e)}var r=n("./node_modules/xss/lib/default.js"),a=n("./node_modules/xss/lib/parser.js"),o=n("./node_modules/xss/lib/xss.js");t=e.exports=i,t.FilterXSS=o;for(var s in r)t[s]=r[s];for(var s in a)t[s]=a[s];"undefined"!=typeof window&&(window.filterXSS=e.exports)},"./node_modules/xss/lib/parser.js":function(e,t,n){function i(e){var t=c.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else var n=e.slice(1,t+1);return n=c.trim(n).toLowerCase(),"/"===n.slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function r(e){return"</"===e.slice(0,2)}function a(e,t,n){"user strict";var a="",o=0,s=!1,l=!1,p=0,u=e.length,c="",d="";for(p=0;p<u;p++){var f=e.charAt(p);if(!1===s){if("<"===f){s=p;continue}}else if(!1===l){if("<"===f){a+=n(e.slice(o,p)),s=p,o=p;continue}if(">"===f){a+=n(e.slice(o,s)),d=e.slice(s,p+1),c=i(d),a+=t(s,a.length,c,d,r(d)),o=p+1,s=!1;continue}if(('"'===f||"'"===f)&&"="===e.charAt(p-1)){l=f;continue}}else if(f===l){l=!1;continue}}return o<e.length&&(a+=n(e.substr(o))),a}function o(e,t){"user strict";function n(e,n){if(e=c.trim(e),e=e.replace(d,"").toLowerCase(),!(e.length<1)){var i=t(e,n||"");i&&r.push(i)}}for(var i=0,r=[],a=!1,o=e.length,p=0;p<o;p++){var f,h,m=e.charAt(p);if(!1!==a||"="!==m)if(!1===a||p!==i||'"'!==m&&"'"!==m||"="!==e.charAt(p-1))if(/\s|\n|\t/.test(m)){if(e=e.replace(/\s|\n|\t/g," "),!1===a){if(-1===(h=s(e,p))){f=c.trim(e.slice(i,p)),n(f),a=!1,i=p+1;continue}p=h-1;continue}if(-1===(h=l(e,p-1))){f=c.trim(e.slice(i,p)),f=u(f),n(a,f),a=!1,i=p+1;continue}}else;else{if(-1===(h=e.indexOf(m,p+1)))break;f=c.trim(e.slice(i+1,h)),n(a,f),a=!1,p=h,i=p+1}else a=e.slice(i,p),i=p+1}return i<e.length&&(!1===a?n(e.slice(i)):n(a,u(c.trim(e.slice(i))))),c.trim(r.join(" "))}function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function p(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}function u(e){return p(e)?e.substr(1,e.length-2):e}var c=n("./node_modules/xss/lib/util.js"),d=/[^a-zA-Z0-9_:\.\-]/gim;t.parseTag=a,t.parseAttr=o},"./node_modules/xss/lib/util.js":function(e,t){e.exports={indexOf:function(e,t){var n,i;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var i,r;if(Array.prototype.forEach)return e.forEach(t,n);for(i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}}},"./node_modules/xss/lib/xss.js":function(e,t,n){function i(e){return void 0===e||null===e}function r(e){var t=d.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=d.trim(e.slice(t+1,-1));var n="/"===e[e.length-1];return n&&(e=d.trim(e.slice(0,-1))),{html:e,closing:n}}function a(e){var t={};for(var n in e)t[n]=e[n];return t}function o(e){e=a(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=l.onIgnoreTagStripAll),e.whiteList=e.whiteList||l.whiteList,e.onTag=e.onTag||l.onTag,e.onTagAttr=e.onTagAttr||l.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||l.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||l.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||l.safeAttrValue,e.escapeHtml=e.escapeHtml||l.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new s(e.css))}var s=n("./node_modules/cssfilter/lib/index.js").FilterCSS,l=n("./node_modules/xss/lib/default.js"),p=n("./node_modules/xss/lib/parser.js"),u=p.parseTag,c=p.parseAttr,d=n("./node_modules/xss/lib/util.js");o.prototype.process=function(e){if(e=e||"",!(e=e.toString()))return"";var t=this,n=t.options,a=n.whiteList,o=n.onTag,s=n.onIgnoreTag,p=n.onTagAttr,f=n.onIgnoreTagAttr,h=n.safeAttrValue,m=n.escapeHtml,g=t.cssFilter;n.stripBlankChar&&(e=l.stripBlankChar(e)),n.allowCommentTag||(e=l.stripCommentTag(e));var v=!1;if(n.stripIgnoreTagBody){var v=l.StripTagBody(n.stripIgnoreTagBody,s);s=v.onIgnoreTag}var b=u(e,function(e,t,n,l,u){var v={sourcePosition:e,position:t,isClosing:u,isWhite:a.hasOwnProperty(n)},b=o(n,l,v);if(!i(b))return b;if(v.isWhite){if(v.isClosing)return"</"+n+">";var y=r(l),w=a[n],x=c(y.html,function(e,t){var r=-1!==d.indexOf(w,e),a=p(n,e,t,r);if(!i(a))return a;if(r)return t=h(n,e,t,g),t?e+'="'+t+'"':e;var a=f(n,e,t,r);return i(a)?void 0:a}),l="<"+n;return x&&(l+=" "+x),
y.closing&&(l+=" /"),l+=">"}var b=s(n,l,v);return i(b)?m(l):b},m);return v&&(b=v.remove(b)),b},e.exports=o},"./src/index.ts":function(e,t,n){n.r(t),n.d(t,"Sanitizer",function(){return s});var i=n("./node_modules/lodash.isplainobject/index.js"),r=n.n(i),a=n("./node_modules/xss/lib/index.js"),o=n.n(a),s=function(){function e(e,t){var n=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","src","width"],audio:["autoplay","controls","loop","muted","preload","src"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","class"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],br:[],li:[],ul:[],tbody:[]},this.arcgisFilterOptions={allowCommentTag:!0};var i;e&&!t?i=e:e&&t?(i=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(t){"whiteList"===t?i.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):i[t]=e[t]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList),this.xssFilterOptions=i,this._xssFilter=new o.a.FilterXSS(i)}return e.prototype.sanitize=function(e){switch(typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e);default:return null}},e.prototype.validate=function(e){var t=this.sanitize(e);return{isValid:e===t,sanitized:t}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]})}),t},e.prototype._iterateOverObject=function(e){var t=this;try{var n=!1,i=void 0;if(Array.isArray(e))i=e.reduce(function(e,i){var r=t.validate(i);return r.isValid?e.concat([i]):(n=!0,e.concat([r.sanitized]))},[]);else{if(!r()(e))return null;i=Object.keys(e).reduce(function(i,r){var a=e[r],o=t.validate(a);return o.isValid?i[r]=a:(n=!0,i[r]=o.sanitized),i},{})}return n?i:e}catch(e){return null}},e}()}}).Sanitizer}),define("lib-build/tpl!storymaps/tpl/ui/desktop/TestPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="userInput"></div>';return __p}}),define("lib-build/css!storymaps/tpl/ui/desktop/TestPanel",[],function(){}),define("lib-build/css!storymaps/tpl/ui/desktop/Common",[],function(){}),define("storymaps/tpl/ui/desktop/TestPanel",["lib-build/tpl!./TestPanel","lib-build/css!./TestPanel","lib-build/css!./Common"],function(e){return function(t,n,i){function r(){t.find(".userInput").attr("contenteditable","true")}function a(){n&&t.find(".userInput").blur(function(){i($(this).html())})}this.init=function(i){i=i||{},t.html(e({})),t.show(),n&&r(),a()},this.update=function(e){e=e||{},t.find(".userInput").html(e.data)},this.resize=function(){},this.showEntryIndex=function(){},this.destroy=function(){}}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/TilePanel",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="paneLeft">\r\n\t<ul id="myList" class="tilelist"></ul>\r\n\t<div class="noFeature">\r\n\t\t<span class="noFeatureText">\r\n\t\t\t'+(null==(__t=noPlaces)?"":__t)+"\r\n\t\t</span>\r\n\t</div>\r\n</div>\r\n";return __p}}),define("lib-build/css!storymaps/tpl/ui/desktop/TilePanel",[],function(){}),define("storymaps/tpl/ui/desktop/TilePanel",["esri/geometry/screenUtils","../../core/Helper","storymaps/common/utils/CommonHelper","lib-build/tpl!./TilePanel","lib-build/css!./TilePanel","../../core/WebApplicationData"],function(e,t,n,i){return function(e,r,a){var o=this,s=r,l=new t,p=/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u=!1;this.tileClick=!0,$(document).bind("cbox_complete",function(){$(".details .rightDiv").height($(".details").height()-$(".detailsTitle").height()-20)}),this.init=function(){$(e).prepend(i({noPlaces:i18n.viewer.general.noPlaces})),$("#mainStagePanel").width($("#contentPanel").width()-$("#paneLeft").width()),$("#mainStagePanel").css({left:$("#paneLeft").width()})},this.resize=function(e){$("#paneLeft").width(e),$(".tilelist").width(e)},this.createTab=function(e,t){$("#tabs").append('<div class="tab" tabindex="0">'+t.title+"</div>")},this.setTabClick=function(){$.each($(".entry.visible"),function(e){$(this).click(function(){s.selected=null,s.activateLayer(e),$(".detailContainer").hide(),app.mapTips&&app.mapTips.clean()})})},this.clearTilePanel=function(){p&&($.each($("#mobileList").find("img"),function(e,t){$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=")}),$("#mobileList").empty()),$("#myList").empty()},this.buildTilePanel=function(){o.clearTilePanel();var e,t,i,r,s,l,p=!1;if(app.layerCurrent&&app.layerCurrent.graphics&&app.layerCurrent.graphics.length){var u=app.layerCurrent.graphics[0].attributes,c=u.number?"number":u.Number?"Number":u.NUMBER?"NUMBER":u.PLACENUMSL?"PLACENUMSL":null;c&&app.layerCurrent.graphics.sort(function(e,t){return parseInt(e.attributes[c])-parseInt(t.attributes[c])}),$.each(app.layerCurrent.graphics,function(o,u){app.map.extent.contains(u.geometry)?(e="block",p=!0):app.data.getWebAppData().getGeneralOptions().filterByExtent&&!app.isInBuilder&&(e="none"),t=$('<li tabindex="0" id="item'+u.attributes.shortlist_id+'" style="display:'+e+'">'),i=$('<div class="tileImage"></div>'),$(i).attr("alt","");var c=u.attributes,d=c[$.grep(Object.keys(c),function(e){return"thumb_url"==e.toLowerCase()})[0]],f=c[$.grep(Object.keys(c),function(e){return"pic_url"==e.toLowerCase()})[0]];d?(d.indexOf("sharing/rest/content/items/")>-1&&(d=n.possiblyAddToken(d)),$(i).css("background-image","url("+d+")"),$(i).find("i").hide()):f?(d=f,d.indexOf("sharing/rest/content/items/")>-1&&(d=n.possiblyAddToken(d)),$(i).css("background-image","url("+d+")"),$(i).find("i").hide()):$(i).append('<i class=" fa fa-camera" aria-hidden="true"></i>'),r=$('<div class="footer"></div>');var h=c[$.grep(Object.keys(c),function(e){return"name"==e.toLowerCase()})[0]],m=h||"Unnamed Place";if(l=$('<div class="blurb">'+m+"</div>"),a.getGeneralOptions().numberedIcons){var g=app.layerCurrent.graphics[o].attributes.number||app.layerCurrent.graphics[o].attributes.Number||app.layerCurrent.graphics[o].attributes.NUMBER||app.layerCurrent.graphics[o].attributes.PLACENUMSL;u.attributes.number<100?s=$('<div class="num" style="background-color:'+app.layerCurrent.color+'">'+g+"</div>"):(s=$('<div class="num longNum" style="background-color:'+app.layerCurrent.color+'">'+g+"</div>"),l=$('<div class="blurb longNumBlurb">'+h+"</div>")),$(r).append(s)}$(r).append(l),$(t).append(r),$(t).data("shortlist-id",u.attributes.shortlist_id),app.ui.mobileFeatureList.buildList(o,u,t),$(t).append(i),app.isInBuilder&&(u.attributes.locationSet||app.data.getWebAppData().getIsExternalData()?$(t).addClass("located"):$(t).find(".tileImage").append('<div class="unlocated" style="outline: none;"></div>')),$("#myList").append(t)}),o.setTileEvents(),$("ul.tilelist").animate({scrollTop:0},{duration:200}),p||!app.data.getWebAppData().getGeneralOptions().filterByExtent||app.isInBuilder?$(".noFeature").css("display","none"):$(".noFeature").css("display","block"),a.getGeneralOptions().numberedIcons||$("ul.tilelist .blurb").addClass("unNumBlurb")}},this.findTile=function(t){return $.grep($(e).find($("ul.tilelist li")),function(e){return $(e).data("shortlist-id")==t})[0]},this.findMobileTile=function(e){return $.grep($("ul.mobileTileList li"),function(t){return $(t).data("shortlist-id")==e})[0]},this.setTileEvents=function(){$("ul.tilelist li").mouseover(o.tile_onMouseOver),$("ul.tilelist li").mouseout(o.tile_onMouseOut),$("ul.tilelist li").click(o.tile_onClick),$("ul.tilelist li").on("touchmove",function(){u=!0}),$("ul.tilelist li").on("touchend",o.tile_onClick)},this.refreshList=function(){var e,t,n=!1;app.layerCurrent&&app.layerCurrent.graphics.length&&setTimeout(function(){$.each(app.layerCurrent.graphics,function(i,r){e=o.findTile(r.attributes.shortlist_id),t=o.findMobileTile(r.attributes.shortlist_id),app.data.getWebAppData().getGeneralOptions().filterByExtent&&!app.isInBuilder&&(app.map.extent.contains(r.geometry)?("none"==$(e).css("display")&&$(e).stop().fadeIn(),n=!0):"none"!=$(e).css("display")&&$(e).stop().fadeOut(1e3))}),n||!app.data.getWebAppData().getGeneralOptions().filterByExtent||app.isInBuilder?$(".noFeature").css("display","none"):$(".noFeature").css("display","block")},100)},this.initSortable=function(){$("#myList").sortable({update:function(){app.addFeatureBar.updateNumber()}}),$("#myList").addClass("organize")},this.destroySortable=function(){$("#myList").sortable("destroy"),$("#myList").css("background-color","#C7C7C7"),$("body").removeClass("organizeFeatures"),$("#myList").removeClass("organize")},this.tile_onMouseOver=function(){var e=this,t=$.grep(app.layerCurrent.graphics,function(t){return t.attributes.shortlist_id==$(e).data("shortlist-id")});if(t[0]){t[0].symbol.setWidth(s.lutIconSpecs.medium.getWidth()),t[0].symbol.setHeight(s.lutIconSpecs.medium.getHeight()),t[0].symbol.setOffset(s.lutIconSpecs.medium.getOffsetX(),s.lutIconSpecs.medium.getOffsetY()),t[0].draw(),l.isIE()||s.moveGraphicToFront(t[0]);var n=t[0].attributes,i=n[$.grep(Object.keys(n),function(e){return"name"==e.toLowerCase()})[0]];s.buildMapHoverTips(i,t[0])}},this.tile_onMouseOut=function(){if(null!=s.selected){var e=parseInt($(this).attr("id").substring(4));if(s.selected.attributes.shortlist_id==e)return}var t=this,n=$.grep(app.layerCurrent.graphics,function(e){return e.attributes.shortlist_id==$(t).data("shortlist-id")});n[0]&&(n[0].symbol.setWidth(s.lutIconSpecs.tiny.getWidth()),n[0].symbol.setHeight(s.lutIconSpecs.tiny.getHeight()),n[0].symbol.setOffset(s.lutIconSpecs.tiny.getOffsetX(),s.lutIconSpecs.tiny.getOffsetY()),n[0].draw()),app.mapTips&&app.mapTips.clean(!0)},this.tile_onClick=function(e){if(!$("body").hasClass("organizeFeatures")){if(u)return void(u=!1);1==e.which||2==e.which||3==e.which?o.tileClick=!0:o.tileClick=!1;var t=$(this).data("shortlist-id");s.preSelection(),s.selected=$.grep(app.layerCurrent.graphics,function(e){return e.attributes.shortlist_id==t})[0],s.postSelection(),$("#mobileTitlePage").css("display","none"),s.themeSelected||app.ui.mobileFeatureList.selectTheme(0),s.themeSelected=!0}}}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/DetailPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="detailContainer swiper-container">\r\n\t<button type="button" class=\'detailClose ion-android-close\' style=""></button>\r\n\t<div class="detail-btn-container detail-btn-left">\r\n\t\t<div class="detail-btn ion-chevron-left" style="outline: none;"></div>\r\n\t</div>\r\n\t<div class="detail-btn-container detail-btn-right">\r\n\t\t<div class="detail-btn ion-chevron-right" style="outline: none;"></div>\r\n\t</div>\r\n\t<div class="detailView swiper-wrapper"></div>\r\n</div>\r\n';return __p}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/DetailSlide",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class=\'swiper-slide\'>\r\n\t<div class=\'detailHeader\'>\r\n\t\t<div class="detailFeatureNum" ></div>\r\n\t\t<div class=\'detailFeatureTitle\'></div>\r\n\t</div>\r\n\t<div class="detailTextContainer">\r\n\t\t<div class="detailPictureDiv">\r\n\t\t\t<img class="swiper-lazy">\r\n\t\t\t<div class="swiper-lazy-preloader"></div>\r\n\t\t</div>\r\n\t\t<div class=\'shortDesc\'></div>\r\n\t\t<div class=\'description detailFeatureDesc\'></div>\r\n\t\t<div class="website"></div>\r\n\t</div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/tpl/ui/desktop/DetailPanel",[],function(){}),define("storymaps/tpl/ui/desktop/DetailPanel",["../../core/Helper","storymaps/common/utils/CommonHelper","lib-build/tpl!./DetailPanel","lib-build/tpl!./DetailSlide","lib-build/css!./DetailPanel"],function(e,t,n,i){return function(r,a,o,s,l){function p(){var e=$(".entry.active").index();e<0&&(e=0),$(".detailContainer").show(),b[e].slideNext(),b[e].slidePrev(),h.resize(),$(".detailContainer").hide()}function u(){r.find(".userInput").attr("contenteditable","true")}function c(){a&&r.find(".userInput").blur(function(){o($(this).html())})}var d,f=s,h=this,m=new e,g=0,v=!1,b=[],y={},w=!1,x=l,C=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,T=/(android)/i.test(navigator.userAgent),S={};h.loaded=!1,h.viewed=!1,this.init=function(e){e=e||{},$(r).show(),a&&u(),c()},this.buildFeatureViews=function(e){var t=$(".entry.active").index();t<0&&(t=0);var i=e||[];if(!i.length){var a=app.map.getLayer(app.data.getShortlistLayerId());$.each(app.data.getStory(),function(e,t){var n={title:t.title?t.title:"tab "+(i.length+1),features:[]};i.push(n)}),$.each(a.graphics,function(e,t){t.attributes.locationSet&&t.attributes.pic_url&&t.attributes.name&&"Unnamed Place"!=t.attributes.name&&i[t.attributes.tab_id].features.push(t)})}if(!v)if(C){$(r).prepend(n({}));var o=$(".detailView")[0];$(o).attr("id","detailView0"),S=new Swiper($(".detailContainer")[0],{speed:0,setWrapperSize:!0}),S.init(),v=!0,r.find(".detailClose").click(function(){r.find(".detailContainer").hide(),"small"==app.ui.mobileIntro.screenSize&&app.ui.mobileFeatureList.showMobileList(),f.unselect()}),r.find($(".detail-btn-left")[0]).click(function(){var e=app.layerCurrent.graphics,t=null,n=[];$.each(e,function(e,t){!app.map.extent.contains(t.geometry)&&app.data.getWebAppData().getGeneralOptions().filterByExtent||n.push(t)});var i=null;$.grep(n,function(e,t){e.attributes.shortlist_id==app.ui.mainView.selected.attributes.shortlist_id&&(i=t)}),t=0!==i?n[i-1]:n[n.length-1],f.unselect(),f.selected=t,app.map.extent.contains(t.geometry)||app.map.centerAt(t.geometry),f.selectSymbol(),h.buildSlide()}),r.find($(".detail-btn-right")[0]).click(function(){var e=app.layerCurrent.graphics,t=null,n=[];$.each(e,function(e,t){!app.map.extent.contains(t.geometry)&&app.data.getWebAppData().getGeneralOptions().filterByExtent||n.push(t)});var i=null;$.grep(n,function(e,t){e.attributes.shortlist_id==app.ui.mainView.selected.attributes.shortlist_id&&(i=t)}),t=i!==n.length-1?n[i+1]:n[0],f.unselect(),f.selected=t,app.map.extent.contains(t.geometry)||app.map.centerAt(t.geometry),f.selectSymbol(),h.buildSlide()}),r.find(".detailPictureDiv img").click(function(){var e=app.layerCurrent.graphics,t=null,n=[];$.each(e,function(e,t){!app.map.extent.contains(t.geometry)&&app.data.getWebAppData().getGeneralOptions().filterByExtent||n.push(t)});var i=null;$.grep(n,function(e,t){e.attributes.shortlist_id==app.ui.mainView.selected.attributes.shortlist_id&&(i=t)}),t=i!==n.length-1?n[i+1]:n[0],f.unselect(),f.selected=t,f.selectSymbol(),h.buildSlide()})}else $.each(i,function(e){if(0!==e||app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()){var t=$(r).find(" .detailContainer")[e-1];$(t).after(n({}))}else $(r).prepend(n({}));app.isInBuilder&&app.data.getWebAppData().getIsExternalData()&&($(".detailContainer.swiper-container").addClass("externalData"),$(".detail-btn-add").addClass("externalData"));var i=$(".detailView")[e];$(i).attr("id","detailView"+e),b[e]={},y[String(e)]=[]});if(!C&&(v=!0,!y[String(t)].length)){$(".detailContainer").css("z-index","0");var s=$(".detailContainer")[t];$(s).css("z-index","99"),g=0,C||h.buildSlides(i)}},this.buildSlide=function(){var e=$(".entry.active").index();e<0&&(e=0),S.removeAllSlides(),r.find("#detailView0").append(i()),$(".swiper-lazy-preloader").addClass("iOS-hidden");var n=$(".detailContainer")[0],a=$(n).find(".swiper-slide")[0];$(a).addClass("swiper-no-swiping");var o=app.ui.mainView.selected.attributes,s=o[$.grep(Object.keys(o),function(e){return"name"==e.toLowerCase()})[0]],l=o[$.grep(Object.keys(o),function(e){return"description"==e.toLowerCase()})[0]],p="";if(app.data.getWebAppData().getIsExternalData()){p=o[$.grep(Object.keys(o),function(e){return"short_desc"==e.toLowerCase()})[0]];var u=o[$.grep(Object.keys(o),function(e){return"desc1"==e.toLowerCase()})[0]],c=o[$.grep(Object.keys(o),function(e){return"desc2"==e.toLowerCase()})[0]],d=o[$.grep(Object.keys(o),function(e){return"desc3"==e.toLowerCase()})[0]],f=o[$.grep(Object.keys(o),function(e){return"desc4"==e.toLowerCase()})[0]],m=o[$.grep(Object.keys(o),function(e){return"desc5"==e.toLowerCase()})[0]];u&&(l?l+="<p>"+u+"</p>":l="<p>"+u+"</p>"),c&&(l?l+="<p>"+c+"</p>":l="<p>"+c+"</p>"),d&&(l?l+="<p>"+d+"</p>":l="<p>"+d+"</p>"),f&&(l?l+="<p>"+f+"</p>":l="<p>"+f+"</p>"),m&&(l?l+="<p>"+m+"</p>":l="<p>"+m+"</p>")}var g=o[$.grep(Object.keys(o),function(e){return"pic_url"==e.toLowerCase()})[0]],v=o[$.grep(Object.keys(o),function(e){return"thumb_url"==e.toLowerCase()})[0]],b=o[$.grep(Object.keys(o),function(e){return"website"==e.toLowerCase()})[0]];if(app.data.getWebAppData().getGeneralOptions().numberedIcons?($(a).find(".detailFeatureNum").css("background-color",app.data.getStory()[e].color),$(a).find(".detailFeatureNum").text(o.PLACENUMSL?o.PLACENUMSL:o.number)):($(a).find(".detailFeatureNum").hide(),$(a).find(".detailFeatureTitle").addClass("notNumbered")),s&&$(a).find(".detailFeatureTitle").html(s),g){g=v||g,g.indexOf("sharing/rest/content/items/")>-1&&(g=t.possiblyAddToken(g));$(a).find("img")[0].onload=function(){$(this).parent().find(".imageLoadingIndicator").css("display","none"),h.resize()},$(a).find("img").attr("src",g)}else $(a).find(".imageLoadingIndicator").css("display","none");p?$(a).find(".shortDesc").html(p):$(a).find(".shortDesc").remove(),l&&$(a).find(".description").html(l),b&&($(a).find(".website").empty(),$(a).find(".website").append("<a href="+b+' target="_blank" >More info</a>'),$(".website").show()),$(a).data("shortlist-id",o.shortlist_id);var y=app.data.getStory()[e].color;$("#detailView0").find(".detailHeader").css("border-top-color",y),h.resize(),$("#mobilePaneList").hide(),setTimeout(function(){$(n).show(),$(n).css("z-index",99)},0)},this.buildSlides=function(e){w=!0,h.loaded=!1,d=e;var n=$(".entry.active").index();n<0&&(n=0);var a=d[n],o=a.features;if(o[0]&&o[0].attributes){o[0].attributes[$.grep(Object.keys(o[0].attributes),function(e){return"number"==e.toLowerCase()})[0]]&&o.sort(function(e,t){var n=e.attributes[$.grep(Object.keys(e.attributes),function(e){return"number"==e.toLowerCase()})[0]],i=t.attributes[$.grep(Object.keys(t.attributes),function(e){return"number"==e.toLowerCase()})[0]];return parseInt(n)-parseInt(i)})}for(;g<o.length;g++){var s=$(".detailContainer")[n];r.find("#detailView"+n).append(i());var l=$(s).find(".swiper-slide")[g];$(l).on("mousedown",function(){$(this).addClass("swiper-no-swiping")}),navigator.userAgent.match(/Trident.*rv\:11\./)&&navigator.userAgent.match(/Trident.*rv\:11\./).length&&$(l).on("pointerdown",function(){$(this).addClass("swiper-no-swiping")}),$(l).on("mouseup",function(){$(this).removeClass("swiper-no-swiping")});var u=o[g].attributes,c=u[$.grep(Object.keys(u),function(e){return"name"==e.toLowerCase()})[0]],v=u[$.grep(Object.keys(u),function(e){return"description"==e.toLowerCase()})[0]],x="";if(app.data.getWebAppData().getIsExternalData()){x=u[$.grep(Object.keys(u),function(e){return"short_desc"==e.toLowerCase()})[0]];var C=u[$.grep(Object.keys(u),function(e){return"desc1"==e.toLowerCase()})[0]],S=u[$.grep(Object.keys(u),function(e){return"desc2"==e.toLowerCase()})[0]],k=u[$.grep(Object.keys(u),function(e){return"desc3"==e.toLowerCase()})[0]],_=u[$.grep(Object.keys(u),function(e){return"desc4"==e.toLowerCase()})[0]],E=u[$.grep(Object.keys(u),function(e){return"desc5"==e.toLowerCase()})[0]];C&&(v?v+="<p>"+C+"</p>":v="<p>"+C+"</p>"),S&&(v?v+="<p>"+S+"</p>":v="<p>"+S+"</p>"),k&&(v?v+="<p>"+k+"</p>":v="<p>"+k+"</p>"),_&&(v?v+="<p>"+_+"</p>":v="<p>"+_+"</p>"),E&&(v?v+="<p>"+E+"</p>":v="<p>"+E+"</p>")}var A=u[$.grep(Object.keys(u),function(e){return"pic_url"==e.toLowerCase()})[0]],I=u[$.grep(Object.keys(u),function(e){return"thumb_url"==e.toLowerCase()})[0]],L=u[$.grep(Object.keys(u),function(e){return"website"==e.toLowerCase()})[0]];if(m.prependURLHTTP(L),app.data.getWebAppData().getGeneralOptions().numberedIcons?($(l).find(".detailFeatureNum").css("background-color",app.data.getStory()[n].color),$(l).find(".detailFeatureNum").text(u.PLACENUMSL?u.PLACENUMSL:u.number)):($(l).find(".detailFeatureNum").hide(),$(l).find(".detailFeatureTitle").addClass("notNumbered")),c&&$(l).find(".detailFeatureTitle").html(c),A){var D=$(l).find("img")[0];if(A.indexOf("sharing/rest/content/items/")>-1){A.indexOf("http")>-1&&5==A.indexOf("https")&&(A=A.slice(5));(A.match(/https/g)||[].length).length>1&&(A=A.slice(6))}T?(A=I||A,A.indexOf("sharing/rest/content/items/")>-1&&(A=t.possiblyAddToken(A)),$(l).find("img").attr("src",A)):(A.indexOf("sharing/rest/content/items/")>-1&&(A=t.possiblyAddToken(A)),$(l).find("img").attr("data-src",A),$(l).find("img").attr("alt","")),D.complete&&$(l).find(".imageLoadingIndicator").hide()}else $(l).find(".imageLoadingIndicator").css("display","none");if(x?$(l).find(".shortDesc").html(x):$(l).find(".shortDesc").remove(),v&&$(l).find(".description").html(v),L&&($(l).find(".website").append("<a href="+L+' target="_blank" >More info</a>'),$(".website").show(),app.data.getWebAppData().getIsExternalData()&&$(".website").css("margin-top",0)),$(l).data("shortlist-id",u.shortlist_id),$(l).find(".detailPictureDiv img").click(function(){var e=$(".entry.active").index();if(e<0&&(e=0),!f.selected){var t=b[e].activeIndex+1;b[e].activeIndex===b[e].slides.length-1&&(t=0);var n=b[e].slides[t],i=$(n).data("shortlist-id"),r=app.map.getLayer(app.data.getWebAppData().getShortlistLayerId());app.ui.mainView.selected=$.grep(r.graphics,function(e){return e.attributes.shortlist_id==i})[0]}f.selected.updated=!1,b[e].activeIndex==b[e].slides.length-1?((P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"visible"}),b[e].slideTo(0,0),(P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"auto"})):((P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"visible"}),b[e].slideNext(),(P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"auto"}))}),y[String(n)].push(l),g%10==0&&g+1<o.length)return setTimeout(function(){g++,h.buildSlides(e)},0),!1;if(g+1==o.length){var O=new Swiper($(".detailContainer")[n],{speed:0,setWrapperSize:!0,lazyLoading:!0});b[n]=O,O.init(),O.update(),O.on("onSlideChangeEnd",function(e){if(!w){if(f.preSelection(),f.selected.updated)return void(!f.selected||app.map.extent.contains(f.selected.geometry)||app.data.getWebAppData().getGeneralOptions().filterByExtent||app.map.centerAt(f.selected.geometry));var t=$(".entry.active").index();if(t<0&&(t=0),h.viewed&&!f.selected.updated){var n=O.slides[O.activeIndex],i=$(n).data("shortlist-id"),r=$.grep(app.layerCurrent.graphics,function(e){return e.attributes.shortlist_id==i})[0];f.selected=r,!f.selected||app.map.extent.contains(f.selected.geometry)||app.data.getWebAppData().getGeneralOptions().filterByExtent||app.map.centerAt(f.selected.geometry)}if(setTimeout(function(){f.buildMapTips()},0),$(".showOnce").length){var a=$(".showOnce")[0];$(a).hasClass("swiper-slide-active")||($(".swiper-slide").removeClass("showOnce"),b[t].removeSlide(b[t].previousIndex),b[t].update())}1==b[t].slides.length?$(".detail-btn-container").hide():$(".detail-btn-container").show(),h.resize(),O.update(),$(".esriPopup").hide()}}),r.find(".detail-btn-left").mouseover(function(){$(".detail-btn-left").css("opacity",1),$(".detail-btn-right").css("opacity",.8)}),r.find(".detail-btn-right").mouseover(function(){$(".detail-btn-right").css("opacity",1),$(".detail-btn-left").css("opacity",.8)}),r.find(".detail-btn-left").mouseout(function(){$(".detail-btn-left").css("opacity",.8)}),r.find(".detail-btn-right").mouseout(function(){$(".detail-btn-right").css("opacity",.8)}),r.find(".detailClose").click(function(){r.find(".detailContainer").hide(),"small"==app.ui.mobileIntro.screenSize&&app.ui.mobileFeatureList.showMobileList(),f.unselect()});var P=navigator.appVersion.indexOf("Edge")>0,M=navigator.userAgent.indexOf("Windows NT 10.0")>0;r.find($(".detail-btn-left")[n]).click(function(){if(!f.selected){var e=b[n].activeIndex-1;0===b[n].activeIndex&&(e=b[n].slides.length-1);var t=b[n].slides[e],i=$(t).data("shortlist-id"),r=app.map.getLayer(app.data.getWebAppData().getShortlistLayerId());app.ui.mainView.selected=$.grep(r.graphics,function(e){return e.attributes.shortlist_id==i})[0]}f.selected.updated=!1,0===b[n].activeIndex?((P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"visible"}),b[n].slideTo(b[n].slides.length-1,0),(P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"auto"})):((P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"visible"}),b[n].slidePrev(),(P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"auto"}))}),r.find($(".detail-btn-right")[n]).click(function(){if(!f.selected){var e=b[n].activeIndex+1;b[n].activeIndex===b[n].slides.length-1&&(e=0);var t=b[n].slides[e],i=$(t).data("shortlist-id"),r=app.map.getLayer(app.data.getWebAppData().getShortlistLayerId());app.ui.mainView.selected=$.grep(r.graphics,function(e){return e.attributes.shortlist_id==i})[0]}f.selected.updated=!1,b[n].activeIndex==b[n].slides.length-1?((P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"visible"}),b[n].slideTo(0,0),(P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"auto"})):((P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"visible"}),b[n].slideNext(),(P||M)&&$(".swiper-slide-active .detailTextContainer").css({"overflow-y":"auto"}))});var B=app.data.getStory()[n].color;$("#detailView"+n).find(".detailHeader").css("border-top-color",B),b[n].update(),p(),h.resize()}}h.loaded=!0,h.viewed=!1,w=!1},this.showDetails=function(e){if(app.data.getWebAppData().getGeneralOptions().filterByExtent||(f.selected=e,f.selected.updated=!0),null!=e){h.resize(),app.data.getWebAppData().getGeneralOptions().filterByExtent&&p();var n=$(".entry.active").index();n<0&&(n=0);var i=$(".detailContainer")[n],r=b[n];$("#mobilePaneList").hide();var a;$.each($("#detailView"+n).find($(".swiper-slide")),function(t,n){if(parseInt($(n).data("shortlist-id"))==e.attributes.shortlist_id)return a=t,!1}),x.getGeneralOptions().numberedIcons||$(".detailFeatureTitle").addClass("notNumbered");var o=navigator.userAgent.indexOf("Windows NT 10.0")>0,s=navigator.appVersion.indexOf("Edge")>0;if(b[n].on("onSlideChangeEnd",function(){$(i).show(),$(i).css("z-index",99)}),0===a&&0===r.activeIndex?($(i).show(),!s&&o&&0==n&&(b[n].slideNext(),b[n].slidePrev()),$(i).hide(),$(i).show(),$(i).css("z-index",99)):setTimeout(function(){b[n].slideTo(a,0),a===r.activeIndex&&$(i).show()},0),1==b[n].slides.length?$(".detail-btn-container").hide():$(".detail-btn-container").show(),b[n].update(),0===$(".swiper-slide-active img").width()){var l=$(".swiper-slide-active img")[0],u=$(l).attr("data-src")?$(l).attr("data-src"):$(l).attr("src");u&&u.indexOf("sharing/rest/content/items/")>-1&&(u=t.possiblyAddToken(u)),$(l).attr("src",u),$(l).attr("alt","")}h.resize(),h.viewed=!0}},this.refreshSlides=function(){if(w=!0,!app.data.getWebAppData().getGeneralOptions().filterByExtent&&!app.isInBuilder)return void(w=!1);var e=$(".entry.active").index();if(e<0&&(e=0),!(b[e]&&b[e].init&&y&&y[String(e)])){return}$(".detailContainer").css("z-index","0");var t=$(".detailContainer")[e];if($(t).css("z-index","99"),!d)return void(w=!1);var n=d[e],i=n.features,r=null;b[e].slides&&b[e].removeAllSlides(),$.each(i,function(t,n){app.map.extent.contains(n.geometry)&&$.each(y[String(e)],function(t,i){parseInt($(i).data("shortlist-id"))==n.attributes.shortlist_id&&(b[e].appendSlide($(i)[0]),f.selected&&parseInt($(i).data("shortlist-id"))==f.selected.attributes.shortlist_id&&(r=parseInt(t)))}),f.selected&&!app.map.extent.contains(f.selected.geometry)&&$.each(y[String(e)],function(t,n){parseInt($(n).data("shortlist-id"))==f.selected.attributes.shortlist_id&&(b[e].appendSlide($(n)[0]),$(n).addClass("showOnce"))})}),f.selected&&$.each($("#detailView"+e).find($(".swiper-slide")),function(e,t){parseInt($(t).data("shortlist-id"))==f.selected.attributes.shortlist_id&&(r=parseInt(e))}),b[e].update(),null!=r&&b[e].slideTo(r,0),1==b[e].slides.length?$(".detail-btn-container").hide():$(".detail-btn-container").show(),w=!1},this.update=function(e){e=e||{},r.find(".detailContainer").html(e.data)},this.resize=function(){setTimeout(function(){var e=40;C&&(e=80),"small"==app.ui.mobileIntro.screenSize&&($("#paneLeft").css("height",$("#contentPanel").height()-$("#map").height()+10),$("#paneLeft").css("width","100%"),$("#paneLeft").css({top:$("#map").height()-10}),e=20,C&&(e=110));var t,n=$(".entry.active").index();n<0&&(n=0);var i;$.isEmptyObject(b[n])||(i=b[n],t=i.slides[i.activeIndex]),$(t).height($("#paneLeft").outerHeight()-5+(app.embedBar&&app.embedBar.initiated?-26:0));var r=$(t).find(".detailHeader").outerHeight();$(".detailTextContainer").height($("#paneLeft").outerHeight()-r-e+"px"),$(".detailPictureDiv img").css("max-width",$("#paneLeft").outerWidth());var a=$("#paneLeft").outerHeight()-r-60<.6*$("#paneLeft").outerHeight()?$("#paneLeft").outerHeight()-r-60:.6*$("#paneLeft").outerHeight();$(".detailPictureDiv img").css("max-height",parseInt(a)+"px"),$(".detailContainer").width($("#paneLeft").outerWidth()),$(".detailContainer").height($("#paneLeft").outerHeight()),i&&(app.data.getWebAppData().getGeneralOptions().filterByExtent?setTimeout(function(){b[n].slideTo(i.activeIndex),i.update(),b[n].slideTo(i.activeIndex)},800):(b[n].slideTo(i.activeIndex),i.update(),b[n].slideTo(i.activeIndex)))},0)},this.showEntryIndex=function(){},this.destroy=function(){}}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/NavBar",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="nav-bar">\r\n\t<div class="entries">\r\n\t\t<ul class="nav nav-tabs">\r\n\t\t\t\x3c!--\r\n\t\t\t\ttabs and the more button are injected here\r\n\t\t\t--\x3e\r\n\t\t</ul>\r\n\t</div>\r\n\t<div class="builder-content-panel inline">\r\n\t\t<span class="builder-content-panel-group builder-edit btn btn-sm btn-default">\r\n\t\t\t<div class="builder-btn"></div>\r\n\t\t\t<div class="builder-lbl"></div>\r\n\t\t</span>\r\n\r\n\t\t<span class="builder-content-panel-group builder-add btn btn-sm btn-default">\r\n\t\t\t<div class="builder-btn"></div>\r\n\t\t\t<div class="builder-lbl"></div>\r\n\t\t</span>\r\n\t\t<span class="builder-content-panel-group builder-organize btn btn-sm btn-default">\r\n\t\t\t<div class="builder-btn"></div>\r\n\t\t\t<div class="builder-lbl"></div>\r\n\t\t</span>\r\n\t</div>\r\n\t<div class="builder-mask"></div>\r\n\t<div id="bookmarksCon">\r\n\t\t<div id="bookmarksButton"></div>\r\n\t\t<div id="bookmarksToggle"> \x3c!--tabindex="0"--\x3e\r\n\t\t\t<span id="bookmarksTogText"></span>\r\n\t\t</div>\r\n\t\t<div id="bookmarksDiv"></div>\r\n\t</div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/tpl/ui/desktop/NavBar",[],function(){}),define("lib-build/tpl!storymaps/tpl/ui/desktop/NavBarEntry",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<li class="entry '+(null==(__t=optHtmlClass)?"":__t)+'" data-title="'+(null==(__t=tooltip)?"":__t)+'">\r\n\t<a class="entryLbl" tabindex="0">'+(null==(__t=value)?"":__t)+"</a>\r\n</li>\r\n";return __p}}),define("lib-build/tpl!storymaps/tpl/ui/desktop/NavBarEntryMore",[],function(){return function(obj){obj||(obj={});var __t,__p=""
;with(obj)__p+='<li class="dropdown pull-right"> \x3c!-- tabindex="0" --\x3e\r\n\t<a class="dropdown-toggle" data-toggle="dropdown">\r\n\t\t<span class="glyphicon glyphicon-th-list"></span> <span class="caret"></span>\r\n\t</a>\r\n\t<ul class="dropdown-menu">\r\n\t\t\x3c!--\r\n\t\t\ttabs are injected here a second time\r\n\t\t\tthat way they are just toggled and not moved around\r\n\t\t--\x3e\r\n\t\t'+(null==(__t=entries)?"":__t)+"\r\n\t</ul>\r\n</li>\r\n";return __p}}),define("storymaps/tpl/ui/desktop/NavBar",["lib-build/tpl!./NavBar","lib-build/css!./NavBar","lib-build/tpl!./NavBarEntry","lib-build/tpl!./NavBarEntryMore","storymaps/common/utils/CommonHelper","esri/graphicsUtils","esri/layers/GraphicsLayer","esri/geometry/webMercatorUtils","esri/geometry/Extent","dojo/topic","dojo/has"],function(e,t,n,i,r,a,o,s,l,p,u){return function(t,a,o,s){function l(e,r){g=g||[],$(".nav-bar").addClass("isTab");var a=(g.length,"");$.each(g,function(e,t){var i=t.alias?t.alias:t.title;a+=n({value:i,tooltip:"",optHtmlClass:""})}),t.find(".nav-tabs").html(a+i({entries:a})),u(e),t.find(".entry").click(c),t.find(".entryLbl").on("keydown",function(e){if(9===e.keyCode)return p.publish("story-tab-navigation",{from:"nav",direction:e.shiftKey?"backward":"forward"}),!1}),t.find(".entryLbl").eq(0).focus(function(){$(this).data("mouseDown")||$(this).parent(".entry").hasClass("active")||$(this).parent(".entry").click()}).mousedown(function(){$(this).data("mouseDown",!0)}).mouseup(function(){$(this).removeData("mouseDown")}),$("#nav-bar").show(),app.isInBuilder&&app.addFeatureBar.updateLocatedFeatures(r),m.resize()}function u(e){t.css("background-color",e.header),r.addCSSRule(".nav-bar .nav > .entry .entryLbl, \t\t\t\t\t.nav-bar .dropdown-toggle { \t\t\t\t\t\tcolor: "+e.tabText+"; \t\t\t\t\t\tbackground-color: "+e.tab+" !important; \t\t\t\t\t}","NavBarTab"),r.addCSSRule(".nav-bar .entry.active > .entryLbl, \t\t\t\t\t.nav-bar .dropdown.active .dropdown-toggle { \t\t\t\t\t\tcolor: "+e.tabTextActive+"; \t\t\t\t\t\tbackground-color: "+e.tabActive+" !important; \t\t\t\t\t}","NavBarActive"),r.addCSSRule(".nav-bar .dropdown:not(.active):hover .dropdown-toggle, \t\t\t\t\t.nav-bar li:not(.active) .entryLbl:hover { \t\t\t\t\t\tcolor: "+e.tabTextHover+"; \t\t\t\t\t\tbackground-color: "+e.tabHover+" !important; \t\t\t\t\t}","NavBarHover"),r.addCSSRule(".nav-bar .dropdown-menu, \t\t\t\t\t.nav-bar .dropdown-menu .entryLbl { \t\t\t\t\t\tcolor: "+e.tabText+" !important; \t\t\t\t\t\tbackground-color: "+e.header+" !important; \t\t\t\t\t}","NavBarMore")}function c(){if(!$("body").hasClass("organizeFeatures")){var e=$(this).index();o(e),app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()&&(app.addFeatureBar.updateLocatedFeatures(),app.addFeatureBar.exitOrganizeMode())}}function d(){t.find(".builder-content-panel").css("display","inline-block"),t.find(".builder-edit").off("click").click(f).find(".builder-lbl").html(i18n.builder.addEditPopup.editTab),t.find(".builder-add").off("click").click(m.onClickAdd).find(".builder-lbl").html(i18n.builder.addEditPopup.addTab)}function f(){$("body").hasClass("organizeFeatures")||app.builder.openEditPopup({entryIndex:m.getEntryIndex()})}function h(e,t,n){return e.hasOwnProperty(t)&&e[t]===n}var m=this,g=null,v=null,b=null;t.html(e({})),this.init=function(e,t,n,i){g=e,v=null,b=i,l(n,t),this.showEntryIndex(t),1==g.length&&app.ui.navBar.disableOrganize(),a&&d()},this.update=function(e){l(e),this.showEntryIndex(v)},this.resize=function(){t.find(".nav-tabs > li").addClass("visible"),t.find(".nav-tabs .dropdown").removeClass("visible"),t.find(".nav-tabs .dropdown-menu li").removeClass("visible");var e=0,n=0,i=!1,r=t.find(".nav-tabs > li:not(.dropdown)"),a=t.find("li.dropdown").outerWidth(),o=t.width()-t.find(".builder-content-panel:visible").outerWidth()-30-4;r.each(function(){n++,((e+=$(this).outerWidth())>o||e+a>o&&n<r.length)&&(i=!0,$(this).removeClass("visible"),t.find(".nav-tabs .dropdown-menu li").eq($(this).index()).addClass("visible"))});var s=t.find(".nav-tabs > .entry.active"),l=t.find(".nav-tabs .dropdown-menu li.active");s.length&&!s.hasClass("visible")?(s.removeClass("active"),t.find(".nav-tabs .dropdown-menu li").eq(s.index()).addClass("active"),t.find(".nav-tabs > .dropdown").addClass("active")):l.length&&!l.hasClass("visible")&&(l.removeClass("active"),t.find(".nav-tabs > .entry").eq(l.index()).addClass("active"),t.find(".nav-tabs > .dropdown").removeClass("active")),i&&t.find(".nav-tabs .dropdown").addClass("visible")},this.showEntryIndex=function(e){var n=t.find(".nav-tabs > .entry.visible").length;t.find("li").removeClass("active"),e<n?(t.find(".entry").eq(e).addClass("active"),app.isLoading||(t.find(".entry").eq(e).find(".entryLbl").focus(),t.find(".dropdown").hasClass("open")&&t.find(".dropdown-toggle").click())):(t.find(".dropdown").addClass("active"),t.find(".dropdown .entry").eq(e).addClass("active"),app.isLoading||(t.find(".dropdown").hasClass("open")||t.find(".dropdown-toggle").click(),t.find(".dropdown .entry").eq(e).focus())),app.isInBuilder&&setTimeout(function(){m.resize()},50),v=e},this.getEntryIndex=function(){return v},this.destroy=function(){t.hide()},this.bookmarksLoaded=!1,this.initBookmarks=function(){var e=app.data.getResponse()?app.data.getResponse().itemInfo.itemData.bookmarks:app.maps[app.data.getWebAppData().getWebmap()].response.itemInfo.itemData.bookmarks;e.length&&app.data.getWebAppData().getGeneralOptions().bookmarks&&($("#bookmarksCon").show(),$("#bookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;"),$("#mobileBookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;"),$("#bookmarksToggle").addClass("closed"),$("#mobileBookmarksToggle").addClass("closed"),$("#bookmarksToggle").click(function(){"none"==$("#bookmarksDiv").css("display")?($("#bookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25B2;"),$("#bookmarksDiv").css("display","inline-block"),$("#bookmarksToggle").removeClass("closed"),$("#bookmarksToggle").addClass("open")):($("#bookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;"),$("#bookmarksDiv").css("display","none"),$("#bookmarksToggle").removeClass("open"),$("#bookmarksToggle").addClass("closed")),$("#mobileBookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;")}),$("#mobileBookmarksToggle").click(function(){"none"==$("#mobileBookmarksDiv").css("display")?($("#mobileBookmarksDiv").css("display","inline-block"),$("#mobileBookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25B2;"),$("#mobileBookmarksToggle").removeClass("closed"),$("#mobileBookmarksToggle").addClass("open")):($("#mobileBookmarksDiv").css("display","none"),$("#mobileBookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;"),$("#mobileBookmarksToggle").removeClass("open"),$("#mobileBookmarksToggle").addClass("closed"))}),$.each(e,function(e,t){$("#bookmarksDiv").append("<p><a tabindex='0'>"+t.name+"</a></p>"),$("#mobileBookmarksDiv").append("<p><a>"+t.name+"</a></p>")}),$("#bookmarksDiv a").click(function(){var t=$(this).html(),n=new esri.geometry.Extent($.grep(e,function(e){return e.name==t})[0].extent);app.map.setExtent(n),$("#bookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;"),$("#bookmarksDiv").css("display","none"),$("#bookmarksToggle").removeClass("open"),$("#bookmarksToggle").addClass("closed")}),$("#mobileBookmarksDiv a").click(function(){var t=$(this).html(),n=new esri.geometry.Extent($.grep(e,function(e){return e.name==t})[0].extent);app.map.setExtent(n),$("#mobileBookmarksTogText").html(app.data.getWebAppData().getGeneralOptions().bookmarksAlias+" &#x25BC;"),$("#mobileBookmarksToggle").removeClass("open"),$("#mobileBookmarksToggle").addClass("closed"),$("#mobileBookmarksDiv").css("display","none")}),!app.isInBuilder&&app.data.getWebAppData().getTabs()&&1==Object.keys(app.data.getWebAppData().getTabs()).length&&$("#bookmarksCon").css({top:"10px"})),$("#nav-bar").show(),$("#bookmarksDiv").show(),$("#bookmarksCon").width($("#bookmarksDiv").outerWidth()),$("#bookmarksDiv").hide(),m.bookmarksLoaded=!0},this.hideBookmarks=function(){$("#bookmarksCon").hide()},this.showBookmarks=function(){$("#bookmarksCon").show()},this.updateBookmarksAlias=function(e){$("#bookmarksTogText").html(e+" &#x25BC;"),$("#mobileBookmarksTogText").html(e+" &#x25BC;")},this.disableOrganize=function(){t.find(".builder-organize").attr("disabled",!0),t.find(".builder-organize").addClass("disabled"),$.each(t.find(".builder-organize").children(),function(e,t){$(t).addClass("disabled")})},this.enableOrganize=function(){t.find(".builder-organize").attr("disabled",!1),t.find(".builder-organize").removeClass("disabled"),$.each(t.find(".builder-organize").children(),function(e,t){$(t).removeClass("disabled")})},this.onClickAdd=function(e,n){if(!$("body").hasClass("organizeFeatures")){app.detailPanelBuilder.hideSearch();var i=t.find(".nav-tabs .entry.visible").length,r="customHome"==app.data.getWebAppData().getGeneralOptions().extentMode?app.data.getWebAppData().getMapExtent():null,a={id:i,title:n||"Tab "+(i+1),features:[],extent:r};h(g,"id",i)||(g[i]=a);var s=app.cfg.COLOR_ORDER.split(","),l=i;l>7&&(l%=7);var u=$.grep(app.cfg.COLOR_SCHEMES,function(e){return e.name==s[l]});a.color=u,$("#contentPanel").css("border-top-color",u[0].color),app.ui.tilePanel.clearTilePanel();var c={header:app.data.getWebAppData().getThemeOptions().headerColor,tabText:"#d8d8d8",tab:"#666",tabTextActive:"#fff",tabActive:u[0].color,tabTextHover:"#fff",tabHover:"#666"};app.isGalleryCreation&&app.data.getStory()[0].title&&(g[0].title=app.data.getStory()[0].title),m.init(g,t.find(".nav-tabs .entry.visible").length,c,b);var d=app.map.getLayer(app.data.getShortlistLayerId());$.each(d.graphics,function(e,t){t.hide()});var f=new esri.layers.GraphicsLayer,v=u[0].color;f.color=v,app.layerCurrent=f,app.detailPanelBuilder.addDetailPanelSwiper(i),app.addFeatureBar.exitOrganizeMode(),app.data.setStory(i,a.title,v,r),app.data.getWebAppData().setTabs(app.data.getStory()),o(i),m.enableOrganize(),b.getTitle()&&p.publish("BUILDER_INCREMENT_COUNTER")}}}}),define("storymaps/tpl/ui/desktop/MultiTips",["dojo/dom-style","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/_base/array","dojo/query","dojo/dom","dojo/has"],function(e,t,n,i,r,a,o,s){return function(l){function p(n,o){u();var s=i(x.map,"zoom-start",function(){f()}),l=i(x.map,"zoom-end",function(e){C||c(e.extent,!0)}),p=i(x.map,"pan",function(e){e&&(e.delta.x||e.delta.y)&&(C||d(e.extent,e.delta))}),h=i(x.map,"extent-change",function(e){e&&e.delta&&0===e.delta.x&&0===e.delta.y||C||c(e.extent,!0)});o&&(x.visible=!0),x.selected&&(x.pointArray.push(x.selected),x.pointArray.reverse(),x.selected.geometry.x==x.pointArray[1].geometry.x&&x.selected.geometry.y==x.pointArray[1].geometry.y&&x.pointArray.splice(1,1)),r.forEach(x.pointArray,function(i,r){t.place("<div id='arrow"+r+"' class='mtArrow'></div><div id='multiTip"+r+"' class='multiTip'></div>",n,"last");var o;x.selected&&(o=x.selected.attributes.name||x.selected.attributes.Name||x.selected.attributes.NAME),a("#multiTip"+r)[0].innerHTML=0===r&&x.selected?o:x.content;var s=$("#multiTip"+r),l=$("#arrow"+r);if(0===r&&x.selected&&$(s).addClass("selected"),0===r&&x.selected&&$(l).addClass("selected"),e.set("multiTip"+r,{backgroundColor:0===r&&x.selected?app.cfg.SELECTED_POPUP_BACKGROUND_COLOR:x.backgroundColor,borderColor:0===r&&x.selected?app.cfg.SELECTED_POPUP_BORDER_COLOR:x.borderColor,color:x.textColor,padding:"5px",position:"absolute"}),x.minWidth&&e.set("multiTip"+r,"minWidth",x.minWidth+"px"),e.set("arrow"+r,{pointerColor:0===r&&x.selected?app.cfg.SELECTED_POPUP_ARROW_COLOR:x.pointerColor,position:"absolute",width:"0px",height:"0px"}),x.map.extent.contains(i.geometry)){g(x.map.toScreen(i.geometry),r,x)}}),T=[s,l,p,h]}function u(e){C=!1,r.forEach(T,function(e){e.remove()}),e?(a(".multiTip").forEach(function(e){$(e).remove()}),a(".mtArrow").forEach(function(e){$(e).remove()}),C=!0):(a(".multiTip").forEach(function(e){$(e).hasClass("selected")||$(e).remove()}),a(".mtArrow").forEach(function(e){$(e).hasClass("selected")||$(e).remove()}))}function c(e,t){r.forEach(x.pointArray,function(n,i){e.contains(n.geometry)&&(m(i)||t)?g(x.map.toScreen(n.geometry),i,x):h(i)})}function d(e,t){r.forEach(x.pointArray,function(n,i){if(e.contains(n.geometry)){var r=x.map.toScreen(n.geometry);r.x+=t.x,r.y+=t.y;g(r,i,x)}else h(i)})}function f(){a(".multiTip, .mtArrow").forEach(function(e){$(e).hasClass("selected")||(e.style.display="none")})}function h(t){o.byId("multiTip"+t)&&"none"!=e.get(o.byId("multiTip"+t),"display")&&(e.set(o.byId("multiTip"+t),"display","none"),e.set(o.byId("arrow"+t),"display","none"))}function m(t){if(o.byId("multiTip"+t))return"block"==e.get(o.byId("multiTip"+t),"display")}function g(t,n,i){if(o.byId("multiTip"+n)){if(t.x>i.mapAuthorizedWidth||t.y>i.mapAuthorizedHeight)return void h(n);var r=0===n&&i.selected?44:i.offsetTop;(s("ie")>0||/Trident\/7\./.test(navigator.userAgent))&&(r+=10);var a=e.get("multiTip"+n,"width"),l=e.get("multiTip"+n,"height");if(8==s("ie")&&(a-=7,l-=14),a&&l||(e.set(o.byId("multiTip"+n),"display",i.visible?"block":"none"),e.set(o.byId("arrow"+n),"display",i.visible?"block":"none"),a=e.get("multiTip"+n,"width"),l=e.get("multiTip"+n,"height")),i.minWidth&&a<i.minWidth&&(a=i.minWidth),"auto"!=i.labelDirection)"left"==i.labelDirection?w(t,n,i,a,l):"right"==i.labelDirection?y(t,n,i,a,l):"down"==i.labelDirection?v(t,n,i,a):b(t,n,i,a,l,r);else if(t.x<a/2+25+i.offsetSide+i.topLeftNotAuthorizedArea[0]&&t.y<i.topLeftNotAuthorizedArea[1]+l){if(t.y<l-15||t.x<35+i.topLeftNotAuthorizedArea[0]&&t.y<i.topLeftNotAuthorizedArea[1])return void h(n);y(t,n,i,a,l)}else if(t.x<a/2+25+i.offsetSide){if(t.y<l-15||t.y>i.mapAuthorizedHeight-l/2-10)return void h(n);y(t,n,i,a,l)}else if(t.x>i.mapAuthorizedWidth-a/2-10){if(t.y<l-15||t.y>i.mapAuthorizedHeight-l/2-10)return void h(n);w(t,n,i,a,l)}else if(t.x<i.mapAuthorizedMinWidth+a/2){if(t.y<l-15||t.y>i.mapAuthorizedHeight-l/2-10||t.x<i.mapAuthorizedMinWidth)return void h(n);y(t,n,i,a,l)}else t.y>l+25+r?b(t,n,i,a,l,r):v(t,n,i,a);e.set(o.byId("multiTip"+n),"display",i.visible?"block":"none"),e.set(o.byId("arrow"+n),"display",i.visible?"block":"none")}}function v(t,n,i,r){e.set("multiTip"+n,{top:t.y+3+i.offsetBottom+"px",left:t.x-r/2-5+"px"}),e.set("arrow"+n,{left:t.x-10+"px",top:t.y+i.offsetBottom-5+"px",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderBottom:"10px solid",borderBottomColor:0===n&&i.selected?app.cfg.SELECTED_POPUP_ARROW_COLOR:i.pointerColor,borderTop:"none"})}function b(t,n,i,r,a,o){e.set("multiTip"+n,{top:t.y-a-10-o+"px",left:t.x-r/2+0+"px"}),(s("ie")>0||/Trident\/7\./.test(navigator.userAgent))&&(o-=10),e.set("arrow"+n,{left:t.x-10+"px",top:t.y-10-o+"px",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"10px solid",borderTopColor:0===n&&i.selected?app.cfg.SELECTED_POPUP_ARROW_COLOR:i.pointerColor,borderBottom:"none"})}function y(t,n,i,r,a){var o=0===n&&i.selected?5:0,l=0;(s("ie")>0||/Trident\/7\./.test(navigator.userAgent))&&(l+=5),e.set("arrow"+n,{left:t.x+8+i.offsetSide+"px",top:t.y-26-o+"px",borderTop:"10px solid transparent",borderBottom:"10px solid transparent",borderRight:"10px solid",borderRightColor:0===n&&i.selected?app.cfg.SELECTED_POPUP_ARROW_COLOR:i.pointerColor,borderLeft:"none"}),e.set("multiTip"+n,{top:t.y-22-o-l-(a-10)/2+"px",left:t.x+17+i.offsetSide+"px"})}function w(t,n,i,r,a){var o=0===n&&i.selected?5:0,l=0,p=0;(s("ie")>0||/Trident\/7\./.test(navigator.userAgent))&&(l+=5,p+=10),e.set("arrow"+n,{left:t.x-18-i.offsetSide+"px",top:t.y-26-o+"px",borderTop:"10px solid transparent",borderBottom:"10px solid transparent",borderLeft:"10px solid",borderLeftColor:0===n&&i.selected?app.cfg.SELECTED_POPUP_ARROW_COLOR:i.pointerColor,borderRight:"none"}),e.set("multiTip"+n,{top:t.y-22-o-l-(a-10)/2+"px",left:t.x-18-r-p-i.offsetSide+"px"})}var x=null,C=!1,T=[];!function(e){x=n.mixin({pointArray:[],map:null,attributeLabelField:"",content:"",selected:!1,zoomToPoints:!1,backgroundColor:"#000000",borderColor:"#000000",pointerColor:"#000000",textColor:"#ffffff",minWidth:"",labelDirection:"auto",offsetTop:8,offsetSide:3,offsetBottom:8,mapAuthorizedMinWidth:-1,mapAuthorizedWidth:-1,mapAuthorizedHeight:-1,visible:!0},e),-1==e.mapAuthorizedWidth&&(x.mapAuthorizedWidth=x.map.width),-1==e.mapAuthorizedHeight&&(x.mapAuthorizedHeight=x.map.height),p(e.map.container)}(l),this.current=function(){return x.pointArray},this.clean=function(e){x=null,u(e)},this.hide=function(){C=!0,f()},this.show=function(){x&&(C=!1,x.visible=!0,c(x.map.extent,!0))}}}),define("lib-build/tpl!storymaps/common/ui/autoplay/Autoplay",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="autoplay-container">\n\t<div class="backdrop"></div>\n\t<div class="btn-play-container status-pause">\n\t\t<span class="btn-play glyphicon glyphicon-play"></span>\n\t</div>\n\t<div class="slider-container ">\n\t\t<input type="text" class="span2" value="" />\n\t</div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/common/ui/autoplay/Autoplay",[],function(){}),function(e){var t=function(t,n){this.element=e(t),this.picker=e('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||n.id,this.id&&(this.picker[0].id=this.id),"undefined"!=typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var i=this.element.data("slider-tooltip")||n.tooltip;switch(this.tooltip=this.picker.find(".tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.orientation=this.element.data("slider-orientation")||n.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}switch(this.min=this.element.data("slider-min")||n.min,this.max=this.element.data("slider-max")||n.max,this.step=this.element.data("slider-step")||n.step,this.value=this.element.data("slider-value")||n.value,this.value[1]&&(this.range=!0),this.selection=this.element.data("slider-selection")||n.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,this.element.data("slider-handle")||n.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=n.formater,this.layout(),this.touchCapable?this.picker.on({touchstart:e.proxy(this.mousedown,this)}):this.picker.on({mousedown:e.proxy(this.mousedown,this)}),"show"===i?this.picker.on({mouseenter:e.proxy(this.showTooltip,this),mouseleave:e.proxy(this.hideTooltip,this)}):this.tooltip.addClass("hide")};t.prototype={constructor:t,over:!1,inDrag:!1,showTooltip:function(){this.tooltip.addClass("in"),this.over=!0},hideTooltip:function(){!1===this.inDrag&&this.tooltip.removeClass("in"),this.over=!1},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%",this.handle2Stype[this.stylePos]=this.percentage[1]+"%","vertical"==this.orientation?(this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"):(this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"),this.range?(this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(t){this.touchCapable&&"touchstart"===t.type&&(t=t.originalEvent),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var n=this.getPercentage(t);if(this.range){var i=Math.abs(this.percentage[0]-n),r=Math.abs(this.percentage[1]-n);this.dragged=i<r?0:1}else this.dragged=0;this.percentage[this.dragged]=n,this.layout(),this.touchCapable?e(document).on({touchmove:e.proxy(this.mousemove,this),touchend:e.proxy(this.mouseup,this)}):e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)}),this.inDrag=!0;var a=this.calculateValue();return this.element.trigger({type:"slideStart",value:a}).trigger({type:"slide",value:a}),!1},mousemove:function(e){this.touchCapable&&"touchmove"===e.type&&(e=e.originalEvent);var t=this.getPercentage(e);this.range&&(0===this.dragged&&this.percentage[1]<t?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>t&&(this.percentage[1]=this.percentage[0],this.dragged=0)),this.percentage[this.dragged]=t,this.layout();var n=this.calculateValue();return this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n),!1},mouseup:function(t){this.touchCapable?e(document).off({touchmove:this.mousemove,touchend:this.mouseup}):e(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,0==this.over&&this.hideTooltip(),this.element;var n=this.calculateValue();return this.element.trigger({type:"slideStop",value:n}).data("value",n).prop("value",n),!1},calculateValue:function(){var e;return this.range?(e=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step],this.value=e):(e=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.value=[e,this.value[1]]),e},getPercentage:function(e){this.touchCapable&&(e=e.touches[0]);var t=100*(e[this.mousePos]-this.offset[this.stylePos])/this.size;return t=Math.round(t/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,t))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(e){this.value=e,this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.layout()}},e.fn.slider=function(n,i){return this.each(function(){var r=e(this),a=r.data("slider"),o="object"==typeof n&&n;a||r.data("slider",a=new t(this,e.extend({},e.fn.slider.defaults,o))),"string"==typeof n&&a[n](i)})},e.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(e){return e}},e.fn.slider.Constructor=t}(window.jQuery),define("lib-app/bootstrap-slider/js/bootstrap-slider",function(){}),define("lib-build/css!lib-app/bootstrap-slider/css/slider",[],function(){}),define("storymaps/common/ui/autoplay/Autoplay",["lib-build/tpl!./Autoplay","lib-build/css!./Autoplay","dojo/topic","dojo/has","lib-app/bootstrap-slider/js/bootstrap-slider","lib-build/css!lib-app/bootstrap-slider/css/slider"],function(e,t,n,i){var r=10;return function(t,n){function a(e,t){console.log("Autoplay: start, delay:",e,"immediate:",t),h=!0,m&&clearTimeout(m),t?s(e):m=setTimeout(function(){s(e)},e)}function o(){h&&(console.log("Autoplay: pause"),h=!1,m&&clearTimeout(m))}function s(e){g=n(),m=setTimeout(function(){s(e)},e)}function l(){return t.find(".btn-play-container").hasClass("status-play")}function p(e){t.find(".btn-play-container").removeClass("status-play status-pause"),t.find(".btn-play").removeClass("glyphicon-play glyphicon-pause"),t.find(".btn-play-container").addClass(e?"status-play":"status-pause"),t.find(".btn-play").addClass(e?"glyphicon-pause":"glyphicon-play")}function u(){var e=!l();e?c(!0):o(),p(e)}function c(e){a(1e3*(t.find(".slider input").slider("getValue").val()||r),e)}function d(){var e=Date.now();v>Date.now()-150&&t.removeClass("fade"),v=e}function f(){!b&&Date.now()>v+6e3&&t.addClass("fade")}var h=!1,m=null,g=null,v=null,b=!1;t&&n&&"function"==typeof n||console.log("Autoplay: failed to initialize"),t.append(e({})).show(),function(){t.find(".btn-play-container").click(u),t.find(".slider-container input").slider({min:5,max:60,value:r,formater:function(e){return e+"s"}}),t.find(".slider-container input").on("slideStop",function(){l()&&c(!1)}),i("touch")||(v=Date.now(),t.hover(function(){b=!0},function(){b=!1,f()}),$(window).mousemove(d),setInterval(f,1e3))}(),this.init=function(e){e&&(e.color&&(e.useBackdrop?(t.find(".backdrop").css({backgroundColor:e.color,display:"block"}),t.find(".autoplay-container").css({backgroundColor:"inherit"})):(t.find(".autoplay-container").css({backgroundColor:e.color}),"#FFF8E9"!=e.color&&"#FFFFFF"!=e.color&&"#D4E6C3"!=e.color||(e.themeMajor="white2"))),e.themeMajor&&t.addClass("theme-"+e.themeMajor))},this.start=function(){c(!1),p(!0)},this.stop=function(){o(),p(!1)},this.onNavigationEvent=function(e){l()&&e!=g&&u()}}}),define("lib-build/tpl!storymaps/tpl/ui/mobile/MobileIntro",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="mobileIntro"></div>\r\n';return __p}}),define("lib-build/css!storymaps/tpl/ui/mobile/MobileIntro",[],function(){}),define("storymaps/tpl/ui/mobile/MobileIntro",["esri/geometry/Extent","lib-build/tpl!./MobileIntro","lib-build/css!./MobileIntro","dojo/on"],function(e,t,n){return function(n,i,r,a){function o(){app.map.on("click",function(){$("#mobileIntro").css("display","none")})}var s=a,l=this;this.screenSize="desktop",this.init=function(){$(n).prepend(t({}))},this.hide=function(){$("#mobileIntro").hide()},this.setTitle=function(){var e=app.data.getWebAppData().getTitle(),t=app.data.getWebAppData().getSubtitle();$("#mobileIntro").append('<div class="mobileTitle">'+e+"</div>"),app.data.getWebAppData().getSettings().header&&!app.data.getWebAppData().getSettings().header.compactSize?($("#mobileIntro").append('<div class="mobileSnippet"></div>'),t&&$(".mobileSnippet").html(t)):t&&!app.data.getWebAppData().getSettings().header&&($("#mobileIntro").append('<div class="mobileSnippet"></div>'),t&&$(".mobileSnippet").html(t)),o()},this.fillList=function(e,t,n){if(1==n.length){if($("#mobileThemeList .mobileTitleTheme")[e])return;$("#mobileIntro").append("<br><hr></hr>"),$("#mobileIntro").append('<ul id="mobileThemeList" class="mobileTileList">');var i=$('<li class="mobileTitleTheme">').append('<div class="startButton">'+i18n.viewer.general.start+"</div>");i.on("click",function(){l.selectMobileTheme(0)}),$("#mobileThemeList").append(i)}else{if($("#mobileThemeList .mobileTitleThemes")[e])return;0===e&&$("#mobileIntro").append('<ul id="mobileThemeList" style=" height: 80px; line-height: 80px;" class="mobileTileList introList">');var i=$('<li class="mobileTitleThemes">').append('<span style="width: 100%;margin-left: 30px; margin-right: 30px; vertical-align: middle; line-height: 20px; display: inline-block;">'+t.title+"</span>");i.on("click",function(){l.selectMobileTheme(e)}),0===e&&$(i).css("border-width","2px 0px 1px 0px"),e==n.length-1&&$(i).css("border-width","1px 0px 2px 0px"),$("#mobileThemeList").append(i)}},this.resizeMobileElements=function(){"desktop"!=l.screenSize||s.selected||app.ui.mobileFeatureList.showMobileList(),setTimeout(function(){app.ui.detailPanel.resize()},50),$("#contentPanel").height($("body").height());var e=.48*$(window).height()-20;$("#mobileIntro").height($("body").height()-(app.embedBar&&app.embedBar.initiated?26:0)),$("#map").css("height",e),$("#map").css({top:0}),$("#mainStagePanel").css({left:0}),$("#mainStagePanel").css("width","100%"),$("#map").css("width","100%"),$("#mainStagePanel").height($("#map").height()),$("#paneLeft").css("height","52%").css("height","+=20px");var t=.52*$("#paneLeft").css("top");t-=20,$("#paneLeft").css("top",t),app.embedBar&&app.embedBar.initiated&&$("#mobilePaneList").css("bottom","26px"),$("#mobileThemeBar").css("top","48%").css("top",$("#mobileThemeBar").position().top-20+"px");var n=$(".mobileThemeTitle").length;$("#mobileThemeBarSlider").width($(window).width()*n),$("#returnHiddenBar").css("width","100%").css("width","-=80px");var i=.52*$("body").height()-(app.embedBar&&app.embedBar.initiated?41:20);$("#mobilePaneList").css("height","52%").css("height",i),$(".mobileTileList.blurb").css("width","100%").css("width","-=125px"),setTimeout(function(){app.ui.detailPanel.resize()},50),l.screenSize="small"},this.selectMobileTheme=function(t){0!==t&&s.activateLayer(t),$("#contentPanel").css("display","block"),$("#mobileIntro").css("display","none"),$(window).resize(),app.ui.mobileFeatureList.selectTheme(t),s.themeSelected=!0;var n=new e(app.data.getWebAppData().getMapExtent());102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?n=esriConfig.defaults.geometryService.project([n],app.map.spatialReference,function(e){n=e[0],app.map.setExtent(n,!0)}):app.map.setExtent(n,!0)}}}),define("lib-build/css!storymaps/tpl/ui/mobile/MobileFeatureList",[],function(){}),define("lib-build/css!lib-app/Swiper/swiper",[],function(){}),function(){"use strict";var e,t=function(i,r){function a(e){return Math.floor(e)}function o(){w.autoplayTimeoutId=setTimeout(function(){w.params.loop?(w.fixLoop(),w._slideNext(),w.emit("onAutoplay",w)):w.isEnd?r.autoplayStopOnLast?w.stopAutoplay():(w._slideTo(0),w.emit("onAutoplay",w)):(w._slideNext(),w.emit("onAutoplay",w))},w.params.autoplay)}function s(t,n){var i=e(t.target);if(!i.is(n))if("string"==typeof n)i=i.parents(n);else if(n.nodeType){var r;return i.parents().each(function(e,t){t===n&&(r=n)}),r?n:void 0}if(0!==i.length)return i[0]}function l(e,t){t=t||{};var n=window.MutationObserver||window.WebkitMutationObserver,i=new n(function(e){e.forEach(function(e){w.onResize(!0),w.emit("onObserverUpdate",w,e)})});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),w.observers.push(i)}function p(e){e.originalEvent&&(e=e.originalEvent);var t=e.keyCode||e.charCode;if(!w.params.allowSwipeToNext&&(w.isHorizontal()&&39===t||!w.isHorizontal()&&40===t))return!1
;if(!w.params.allowSwipeToPrev&&(w.isHorizontal()&&37===t||!w.isHorizontal()&&38===t))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===t||39===t||38===t||40===t){var n=!1;if(w.container.parents(".swiper-slide").length>0&&0===w.container.parents(".swiper-slide-active").length)return;var i={left:window.pageXOffset,top:window.pageYOffset},r=window.innerWidth,a=window.innerHeight,o=w.container.offset();w.rtl&&(o.left=o.left-w.container[0].scrollLeft);for(var s=[[o.left,o.top],[o.left+w.width,o.top],[o.left,o.top+w.height],[o.left+w.width,o.top+w.height]],l=0;l<s.length;l++){var p=s[l];p[0]>=i.left&&p[0]<=i.left+r&&p[1]>=i.top&&p[1]<=i.top+a&&(n=!0)}if(!n)return}w.isHorizontal()?(37!==t&&39!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===t&&!w.rtl||37===t&&w.rtl)&&w.slideNext(),(37===t&&!w.rtl||39===t&&w.rtl)&&w.slidePrev()):(38!==t&&40!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===t&&w.slideNext(),38===t&&w.slidePrev())}}function u(e){e.originalEvent&&(e=e.originalEvent);var t=w.mousewheel.event,n=0,i=w.rtl?-1:1;if("mousewheel"===t)if(w.params.mousewheelForceToAxis)if(w.isHorizontal()){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;n=e.wheelDeltaX*i}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;n=e.wheelDeltaY}else n=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?-e.wheelDeltaX*i:-e.wheelDeltaY;else if("DOMMouseScroll"===t)n=-e.detail;else if("wheel"===t)if(w.params.mousewheelForceToAxis)if(w.isHorizontal()){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;n=-e.deltaX*i}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;n=-e.deltaY}else n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX*i:-e.deltaY;if(0!==n){if(w.params.mousewheelInvert&&(n=-n),w.params.freeMode){var r=w.getWrapperTranslate()+n*w.params.mousewheelSensitivity,a=w.isBeginning,o=w.isEnd;if(r>=w.minTranslate()&&(r=w.minTranslate()),r<=w.maxTranslate()&&(r=w.maxTranslate()),w.setWrapperTransition(0),w.setWrapperTranslate(r),w.updateProgress(),w.updateActiveIndex(),(!a&&w.isBeginning||!o&&w.isEnd)&&w.updateClasses(),w.params.freeModeSticky?(clearTimeout(w.mousewheel.timeout),w.mousewheel.timeout=setTimeout(function(){w.slideReset()},300)):w.params.lazyLoading&&w.lazy&&w.lazy.load(),0===r||r===w.maxTranslate())return}else{if((new window.Date).getTime()-w.mousewheel.lastScrollTime>60)if(n<0)if(w.isEnd&&!w.params.loop||w.animating){if(w.params.mousewheelReleaseOnEdges)return!0}else w.slideNext();else if(w.isBeginning&&!w.params.loop||w.animating){if(w.params.mousewheelReleaseOnEdges)return!0}else w.slidePrev();w.mousewheel.lastScrollTime=(new window.Date).getTime()}return w.params.autoplay&&w.stopAutoplay(),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}}function c(t,n){t=e(t);var i,r,a,o=w.rtl?-1:1;i=t.attr("data-swiper-parallax")||"0",r=t.attr("data-swiper-parallax-x"),a=t.attr("data-swiper-parallax-y"),r||a?(r=r||"0",a=a||"0"):w.isHorizontal()?(r=i,a="0"):(a=i,r="0"),r=r.indexOf("%")>=0?parseInt(r,10)*n*o+"%":r*n*o+"px",a=a.indexOf("%")>=0?parseInt(a,10)*n+"%":a*n+"px",t.transform("translate3d("+r+", "+a+",0px)")}function d(e){return 0!==e.indexOf("on")&&(e=e[0]!==e[0].toUpperCase()?"on"+e[0].toUpperCase()+e.substring(1):"on"+e),e}if(!(this instanceof t))return new t(i,r);var f={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,hashnav:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},h=r&&r.virtualTranslate;r=r||{};var m={};for(var g in r)if("object"!=typeof r[g]||null===r[g]||(r[g].nodeType||r[g]===window||r[g]===document||void 0!==n&&r[g]instanceof n||"undefined"!=typeof jQuery&&r[g]instanceof jQuery))m[g]=r[g];else{m[g]={};for(var v in r[g])m[g][v]=r[g][v]}for(var b in f)if(void 0===r[b])r[b]=f[b];else if("object"==typeof r[b])for(var y in f[b])void 0===r[b][y]&&(r[b][y]=f[b][y]);var w=this;if(w.params=r,w.originalParams=m,w.classNames=[],void 0!==e&&void 0!==n&&(e=n),(void 0!==e||(e=void 0===n?window.Dom7||window.Zepto||window.jQuery:n))&&(w.$=e,w.currentBreakpoint=void 0,w.getActiveBreakpoint=function(){if(!w.params.breakpoints)return!1;var e,t=!1,n=[];for(e in w.params.breakpoints)w.params.breakpoints.hasOwnProperty(e)&&n.push(e);n.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)});for(var i=0;i<n.length;i++)(e=n[i])>=window.innerWidth&&!t&&(t=e);return t||"max"},w.setBreakpoint=function(){var e=w.getActiveBreakpoint();if(e&&w.currentBreakpoint!==e){var t=e in w.params.breakpoints?w.params.breakpoints[e]:w.originalParams,n=w.params.loop&&t.slidesPerView!==w.params.slidesPerView;for(var i in t)w.params[i]=t[i];w.currentBreakpoint=e,n&&w.destroyLoop&&w.reLoop(!0)}},w.params.breakpoints&&w.setBreakpoint(),w.container=e(i),0!==w.container.length)){if(w.container.length>1){var x=[];return w.container.each(function(){x.push(new t(this,r))}),x}w.container[0].swiper=w,w.container.data("swiper",w),w.classNames.push("swiper-container-"+w.params.direction),w.params.freeMode&&w.classNames.push("swiper-container-free-mode"),w.support.flexbox||(w.classNames.push("swiper-container-no-flexbox"),w.params.slidesPerColumn=1),w.params.autoHeight&&w.classNames.push("swiper-container-autoheight"),(w.params.parallax||w.params.watchSlidesVisibility)&&(w.params.watchSlidesProgress=!0),["cube","coverflow","flip"].indexOf(w.params.effect)>=0&&(w.support.transforms3d?(w.params.watchSlidesProgress=!0,w.classNames.push("swiper-container-3d")):w.params.effect="slide"),"slide"!==w.params.effect&&w.classNames.push("swiper-container-"+w.params.effect),"cube"===w.params.effect&&(w.params.resistanceRatio=0,w.params.slidesPerView=1,w.params.slidesPerColumn=1,w.params.slidesPerGroup=1,w.params.centeredSlides=!1,w.params.spaceBetween=0,w.params.virtualTranslate=!0,w.params.setWrapperSize=!1),"fade"!==w.params.effect&&"flip"!==w.params.effect||(w.params.slidesPerView=1,w.params.slidesPerColumn=1,w.params.slidesPerGroup=1,w.params.watchSlidesProgress=!0,w.params.spaceBetween=0,w.params.setWrapperSize=!1,void 0===h&&(w.params.virtualTranslate=!0)),w.params.grabCursor&&w.support.touch&&(w.params.grabCursor=!1),w.wrapper=w.container.children("."+w.params.wrapperClass),w.params.pagination&&(w.paginationContainer=e(w.params.pagination),w.params.uniqueNavElements&&"string"==typeof w.params.pagination&&w.paginationContainer.length>1&&1===w.container.find(w.params.pagination).length&&(w.paginationContainer=w.container.find(w.params.pagination)),"bullets"===w.params.paginationType&&w.params.paginationClickable?w.paginationContainer.addClass("swiper-pagination-clickable"):w.params.paginationClickable=!1,w.paginationContainer.addClass("swiper-pagination-"+w.params.paginationType)),(w.params.nextButton||w.params.prevButton)&&(w.params.nextButton&&(w.nextButton=e(w.params.nextButton),w.params.uniqueNavElements&&"string"==typeof w.params.nextButton&&w.nextButton.length>1&&1===w.container.find(w.params.nextButton).length&&(w.nextButton=w.container.find(w.params.nextButton))),w.params.prevButton&&(w.prevButton=e(w.params.prevButton),w.params.uniqueNavElements&&"string"==typeof w.params.prevButton&&w.prevButton.length>1&&1===w.container.find(w.params.prevButton).length&&(w.prevButton=w.container.find(w.params.prevButton)))),w.isHorizontal=function(){return"horizontal"===w.params.direction},w.rtl=w.isHorizontal()&&("rtl"===w.container[0].dir.toLowerCase()||"rtl"===w.container.css("direction")),w.rtl&&w.classNames.push("swiper-container-rtl"),w.rtl&&(w.wrongRTL="-webkit-box"===w.wrapper.css("display")),w.params.slidesPerColumn>1&&w.classNames.push("swiper-container-multirow"),w.device.android&&w.classNames.push("swiper-container-android"),w.container.addClass(w.classNames.join(" ")),w.translate=0,w.progress=0,w.velocity=0,w.lockSwipeToNext=function(){w.params.allowSwipeToNext=!1},w.lockSwipeToPrev=function(){w.params.allowSwipeToPrev=!1},w.lockSwipes=function(){w.params.allowSwipeToNext=w.params.allowSwipeToPrev=!1},w.unlockSwipeToNext=function(){w.params.allowSwipeToNext=!0},w.unlockSwipeToPrev=function(){w.params.allowSwipeToPrev=!0},w.unlockSwipes=function(){w.params.allowSwipeToNext=w.params.allowSwipeToPrev=!0},w.params.grabCursor&&(w.container[0].style.cursor="move",w.container[0].style.cursor="-webkit-grab",w.container[0].style.cursor="-moz-grab",w.container[0].style.cursor="grab"),w.imagesToLoad=[],w.imagesLoaded=0,w.loadImage=function(e,t,n,i,r){function a(){r&&r()}var o;e.complete&&i?a():t?(o=new window.Image,o.onload=a,o.onerror=a,n&&(o.srcset=n),t&&(o.src=t)):a()},w.preloadImages=function(){function e(){void 0!==w&&null!==w&&(void 0!==w.imagesLoaded&&w.imagesLoaded++,w.imagesLoaded===w.imagesToLoad.length&&(w.params.updateOnImagesReady&&w.update(),w.emit("onImagesReady",w)))}w.imagesToLoad=w.container.find("img");for(var t=0;t<w.imagesToLoad.length;t++)w.loadImage(w.imagesToLoad[t],w.imagesToLoad[t].currentSrc||w.imagesToLoad[t].getAttribute("src"),w.imagesToLoad[t].srcset||w.imagesToLoad[t].getAttribute("srcset"),!0,e)},w.autoplayTimeoutId=void 0,w.autoplaying=!1,w.autoplayPaused=!1,w.startAutoplay=function(){return void 0===w.autoplayTimeoutId&&(!!w.params.autoplay&&(!w.autoplaying&&(w.autoplaying=!0,w.emit("onAutoplayStart",w),void o())))},w.stopAutoplay=function(e){w.autoplayTimeoutId&&(w.autoplayTimeoutId&&clearTimeout(w.autoplayTimeoutId),w.autoplaying=!1,w.autoplayTimeoutId=void 0,w.emit("onAutoplayStop",w))},w.pauseAutoplay=function(e){w.autoplayPaused||(w.autoplayTimeoutId&&clearTimeout(w.autoplayTimeoutId),w.autoplayPaused=!0,0===e?(w.autoplayPaused=!1,o()):w.wrapper.transitionEnd(function(){w&&(w.autoplayPaused=!1,w.autoplaying?o():w.stopAutoplay())}))},w.minTranslate=function(){return-w.snapGrid[0]},w.maxTranslate=function(){return-w.snapGrid[w.snapGrid.length-1]},w.updateAutoHeight=function(){var e=w.slides.eq(w.activeIndex)[0];if(void 0!==e){var t=e.offsetHeight;t&&w.wrapper.css("height",t+"px")}},w.updateContainerSize=function(){var e,t;e=void 0!==w.params.width?w.params.width:w.container[0].clientWidth,t=void 0!==w.params.height?w.params.height:w.container[0].clientHeight,0===e&&w.isHorizontal()||0===t&&!w.isHorizontal()||(e=e-parseInt(w.container.css("padding-left"),10)-parseInt(w.container.css("padding-right"),10),t=t-parseInt(w.container.css("padding-top"),10)-parseInt(w.container.css("padding-bottom"),10),w.width=e,w.height=t,w.size=w.isHorizontal()?w.width:w.height)},w.updateSlidesSize=function(){w.slides=w.wrapper.children("."+w.params.slideClass),w.snapGrid=[],w.slidesGrid=[],w.slidesSizesGrid=[];var e,t=w.params.spaceBetween,n=-w.params.slidesOffsetBefore,i=0,r=0;if(void 0!==w.size){"string"==typeof t&&t.indexOf("%")>=0&&(t=parseFloat(t.replace("%",""))/100*w.size),w.virtualSize=-t,w.rtl?w.slides.css({marginLeft:"",marginTop:""}):w.slides.css({marginRight:"",marginBottom:""});var o;w.params.slidesPerColumn>1&&(o=Math.floor(w.slides.length/w.params.slidesPerColumn)===w.slides.length/w.params.slidesPerColumn?w.slides.length:Math.ceil(w.slides.length/w.params.slidesPerColumn)*w.params.slidesPerColumn,"auto"!==w.params.slidesPerView&&"row"===w.params.slidesPerColumnFill&&(o=Math.max(o,w.params.slidesPerView*w.params.slidesPerColumn)));var s,l=w.params.slidesPerColumn,p=o/l,u=p-(w.params.slidesPerColumn*p-w.slides.length);for(e=0;e<w.slides.length;e++){s=0;var c=w.slides.eq(e);if(w.params.slidesPerColumn>1){var d,f,h;"column"===w.params.slidesPerColumnFill?(f=Math.floor(e/l),h=e-f*l,(f>u||f===u&&h===l-1)&&++h>=l&&(h=0,f++),d=f+h*o/l,c.css({"-webkit-box-ordinal-group":d,"-moz-box-ordinal-group":d,"-ms-flex-order":d,"-webkit-order":d,order:d})):(h=Math.floor(e/p),f=e-h*p),c.css({"margin-top":0!==h&&w.params.spaceBetween&&w.params.spaceBetween+"px"}).attr("data-swiper-column",f).attr("data-swiper-row",h)}"none"!==c.css("display")&&("auto"===w.params.slidesPerView?(s=w.isHorizontal()?c.outerWidth(!0):c.outerHeight(!0),w.params.roundLengths&&(s=a(s))):(s=(w.size-(w.params.slidesPerView-1)*t)/w.params.slidesPerView,w.params.roundLengths&&(s=a(s)),w.isHorizontal()?w.slides[e].style.width=s+"px":w.slides[e].style.height=s+"px"),w.slides[e].swiperSlideSize=s,w.slidesSizesGrid.push(s),w.params.centeredSlides?(n=n+s/2+i/2+t,0===e&&(n=n-w.size/2-t),Math.abs(n)<.001&&(n=0),r%w.params.slidesPerGroup==0&&w.snapGrid.push(n),w.slidesGrid.push(n)):(r%w.params.slidesPerGroup==0&&w.snapGrid.push(n),w.slidesGrid.push(n),n=n+s+t),w.virtualSize+=s+t,i=s,r++)}w.virtualSize=Math.max(w.virtualSize,w.size)+w.params.slidesOffsetAfter;var m;if(w.rtl&&w.wrongRTL&&("slide"===w.params.effect||"coverflow"===w.params.effect)&&w.wrapper.css({width:w.virtualSize+w.params.spaceBetween+"px"}),w.support.flexbox&&!w.params.setWrapperSize||(w.isHorizontal()?w.wrapper.css({width:w.virtualSize+w.params.spaceBetween+"px"}):w.wrapper.css({height:w.virtualSize+w.params.spaceBetween+"px"})),w.params.slidesPerColumn>1&&(w.virtualSize=(s+w.params.spaceBetween)*o,w.virtualSize=Math.ceil(w.virtualSize/w.params.slidesPerColumn)-w.params.spaceBetween,w.wrapper.css({width:w.virtualSize+w.params.spaceBetween+"px"}),w.params.centeredSlides)){for(m=[],e=0;e<w.snapGrid.length;e++)w.snapGrid[e]<w.virtualSize+w.snapGrid[0]&&m.push(w.snapGrid[e]);w.snapGrid=m}if(!w.params.centeredSlides){for(m=[],e=0;e<w.snapGrid.length;e++)w.snapGrid[e]<=w.virtualSize-w.size&&m.push(w.snapGrid[e]);w.snapGrid=m,Math.floor(w.virtualSize-w.size)-Math.floor(w.snapGrid[w.snapGrid.length-1])>1&&w.snapGrid.push(w.virtualSize-w.size)}0===w.snapGrid.length&&(w.snapGrid=[0]),0!==w.params.spaceBetween&&(w.isHorizontal()?w.rtl?w.slides.css({marginLeft:t+"px"}):w.slides.css({marginRight:t+"px"}):w.slides.css({marginBottom:t+"px"})),w.params.watchSlidesProgress&&w.updateSlidesOffset()}},w.updateSlidesOffset=function(){for(var e=0;e<w.slides.length;e++)w.slides[e].swiperSlideOffset=w.isHorizontal()?w.slides[e].offsetLeft:w.slides[e].offsetTop},w.updateSlidesProgress=function(e){if(void 0===e&&(e=w.translate||0),0!==w.slides.length){void 0===w.slides[0].swiperSlideOffset&&w.updateSlidesOffset();var t=-e;w.rtl&&(t=e),w.slides.removeClass(w.params.slideVisibleClass);for(var n=0;n<w.slides.length;n++){var i=w.slides[n],r=(t-i.swiperSlideOffset)/(i.swiperSlideSize+w.params.spaceBetween);if(w.params.watchSlidesVisibility){var a=-(t-i.swiperSlideOffset),o=a+w.slidesSizesGrid[n];(a>=0&&a<w.size||o>0&&o<=w.size||a<=0&&o>=w.size)&&w.slides.eq(n).addClass(w.params.slideVisibleClass)}i.progress=w.rtl?-r:r}}},w.updateProgress=function(e){void 0===e&&(e=w.translate||0);var t=w.maxTranslate()-w.minTranslate(),n=w.isBeginning,i=w.isEnd;0===t?(w.progress=0,w.isBeginning=w.isEnd=!0):(w.progress=(e-w.minTranslate())/t,w.isBeginning=w.progress<=0,w.isEnd=w.progress>=1),w.isBeginning&&!n&&w.emit("onReachBeginning",w),w.isEnd&&!i&&w.emit("onReachEnd",w),w.params.watchSlidesProgress&&w.updateSlidesProgress(e),w.emit("onProgress",w,w.progress)},w.updateActiveIndex=function(){var e,t,n,i=w.rtl?w.translate:-w.translate;for(t=0;t<w.slidesGrid.length;t++)void 0!==w.slidesGrid[t+1]?i>=w.slidesGrid[t]&&i<w.slidesGrid[t+1]-(w.slidesGrid[t+1]-w.slidesGrid[t])/2?e=t:i>=w.slidesGrid[t]&&i<w.slidesGrid[t+1]&&(e=t+1):i>=w.slidesGrid[t]&&(e=t);(e<0||void 0===e)&&(e=0),n=Math.floor(e/w.params.slidesPerGroup),n>=w.snapGrid.length&&(n=w.snapGrid.length-1),e!==w.activeIndex&&(w.snapIndex=n,w.previousIndex=w.activeIndex,w.activeIndex=e,w.updateClasses())},w.updateClasses=function(){w.slides.removeClass(w.params.slideActiveClass+" "+w.params.slideNextClass+" "+w.params.slidePrevClass);var t=w.slides.eq(w.activeIndex);t.addClass(w.params.slideActiveClass);var n=t.next("."+w.params.slideClass).addClass(w.params.slideNextClass);w.params.loop&&0===n.length&&w.slides.eq(0).addClass(w.params.slideNextClass);var i=t.prev("."+w.params.slideClass).addClass(w.params.slidePrevClass);if(w.params.loop&&0===i.length&&w.slides.eq(-1).addClass(w.params.slidePrevClass),w.paginationContainer&&w.paginationContainer.length>0){var r,a=w.params.loop?Math.ceil((w.slides.length-2*w.loopedSlides)/w.params.slidesPerGroup):w.snapGrid.length;if(w.params.loop?(r=Math.ceil((w.activeIndex-w.loopedSlides)/w.params.slidesPerGroup),r>w.slides.length-1-2*w.loopedSlides&&(r-=w.slides.length-2*w.loopedSlides),r>a-1&&(r-=a),r<0&&"bullets"!==w.params.paginationType&&(r=a+r)):r=void 0!==w.snapIndex?w.snapIndex:w.activeIndex||0,"bullets"===w.params.paginationType&&w.bullets&&w.bullets.length>0&&(w.bullets.removeClass(w.params.bulletActiveClass),w.paginationContainer.length>1?w.bullets.each(function(){e(this).index()===r&&e(this).addClass(w.params.bulletActiveClass)}):w.bullets.eq(r).addClass(w.params.bulletActiveClass)),"fraction"===w.params.paginationType&&(w.paginationContainer.find("."+w.params.paginationCurrentClass).text(r+1),w.paginationContainer.find("."+w.params.paginationTotalClass).text(a)),"progress"===w.params.paginationType){var o=(r+1)/a,s=o,l=1;w.isHorizontal()||(l=o,s=1),w.paginationContainer.find("."+w.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+s+") scaleY("+l+")").transition(w.params.speed)}"custom"===w.params.paginationType&&w.params.paginationCustomRender&&(w.paginationContainer.html(w.params.paginationCustomRender(w,r+1,a)),w.emit("onPaginationRendered",w,w.paginationContainer[0]))}w.params.loop||(w.params.prevButton&&w.prevButton&&w.prevButton.length>0&&(w.isBeginning?(w.prevButton.addClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.disable(w.prevButton)):(w.prevButton.removeClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.enable(w.prevButton))),w.params.nextButton&&w.nextButton&&w.nextButton.length>0&&(w.isEnd?(w.nextButton.addClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.disable(w.nextButton)):(w.nextButton.removeClass(w.params.buttonDisabledClass),w.params.a11y&&w.a11y&&w.a11y.enable(w.nextButton))))},w.updatePagination=function(){if(w.params.pagination&&w.paginationContainer&&w.paginationContainer.length>0){var e="";if("bullets"===w.params.paginationType){for(var t=w.params.loop?Math.ceil((w.slides.length-2*w.loopedSlides)/w.params.slidesPerGroup):w.snapGrid.length,n=0;n<t;n++)w.params.paginationBulletRender?e+=w.params.paginationBulletRender(n,w.params.bulletClass):e+="<"+w.params.paginationElement+' class="'+w.params.bulletClass+'"></'+w.params.paginationElement+">";w.paginationContainer.html(e),w.bullets=w.paginationContainer.find("."+w.params.bulletClass),w.params.paginationClickable&&w.params.a11y&&w.a11y&&w.a11y.initPagination()}"fraction"===w.params.paginationType&&(e=w.params.paginationFractionRender?w.params.paginationFractionRender(w,w.params.paginationCurrentClass,w.params.paginationTotalClass):'<span class="'+w.params.paginationCurrentClass+'"></span> / <span class="'+w.params.paginationTotalClass+'"></span>',w.paginationContainer.html(e)),"progress"===w.params.paginationType&&(e=w.params.paginationProgressRender?w.params.paginationProgressRender(w,w.params.paginationProgressbarClass):'<span class="'+w.params.paginationProgressbarClass+'"></span>',w.paginationContainer.html(e)),"custom"!==w.params.paginationType&&w.emit("onPaginationRendered",w,w.paginationContainer[0])}},w.update=function(e){function t(){n=Math.min(Math.max(w.translate,w.maxTranslate()),w.minTranslate()),w.setWrapperTranslate(n),w.updateActiveIndex(),w.updateClasses()}if(w.updateContainerSize(),w.updateSlidesSize(),w.updateProgress(),w.updatePagination(),w.updateClasses(),w.params.scrollbar&&w.scrollbar&&w.scrollbar.set(),e){var n;w.controller&&w.controller.spline&&(w.controller.spline=void 0),w.params.freeMode?(t(),w.params.autoHeight&&w.updateAutoHeight()):(("auto"===w.params.slidesPerView||w.params.slidesPerView>1)&&w.isEnd&&!w.params.centeredSlides?w.slideTo(w.slides.length-1,0,!1,!0):w.slideTo(w.activeIndex,0,!1,!0))||t()}else w.params.autoHeight&&w.updateAutoHeight()},w.onResize=function(e){w.params.breakpoints&&w.setBreakpoint();var t=w.params.allowSwipeToPrev,n=w.params.allowSwipeToNext;w.params.allowSwipeToPrev=w.params.allowSwipeToNext=!0,w.updateContainerSize(),w.updateSlidesSize(),("auto"===w.params.slidesPerView||w.params.freeMode||e)&&w.updatePagination(),w.params.scrollbar&&w.scrollbar&&w.scrollbar.set(),w.controller&&w.controller.spline&&(w.controller.spline=void 0);var i=!1;if(w.params.freeMode){var r=Math.min(Math.max(w.translate,w.maxTranslate()),w.minTranslate());w.setWrapperTranslate(r),w.updateActiveIndex(),w.updateClasses(),w.params.autoHeight&&w.updateAutoHeight()}else w.updateClasses(),i=("auto"===w.params.slidesPerView||w.params.slidesPerView>1)&&w.isEnd&&!w.params.centeredSlides?w.slideTo(w.slides.length-1,0,!1,!0):w.slideTo(w.activeIndex,0,!1,!0);w.params.lazyLoading&&!i&&w.lazy&&w.lazy.load(),w.params.allowSwipeToPrev=t,w.params.allowSwipeToNext=n};var C=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?C=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(C=["MSPointerDown","MSPointerMove","MSPointerUp"]),w.touchEvents={start:w.support.touch||!w.params.simulateTouch?"touchstart":C[0],move:w.support.touch||!w.params.simulateTouch?"touchmove":C[1],end:w.support.touch||!w.params.simulateTouch?"touchend":C[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===w.params.touchEventsTarget?w.container:w.wrapper).addClass("swiper-wp8-"+w.params.direction),w.initEvents=function(e){var t=e?"off":"on",n=e?"removeEventListener":"addEventListener",i="container"===w.params.touchEventsTarget?w.container[0]:w.wrapper[0],a=w.support.touch?i:document,o=!!w.params.nested;w.browser.ie?(i[n](w.touchEvents.start,w.onTouchStart,!1),a[n](w.touchEvents.move,w.onTouchMove,o),a[n](w.touchEvents.end,w.onTouchEnd,!1)):(w.support.touch&&(i[n](w.touchEvents.start,w.onTouchStart,!1),i[n](w.touchEvents.move,w.onTouchMove,o),i[n](w.touchEvents.end,w.onTouchEnd,!1)),!r.simulateTouch||w.device.ios||w.device.android||(i[n]("mousedown",w.onTouchStart,!1),document[n]("mousemove",w.onTouchMove,o),document[n]("mouseup",w.onTouchEnd,!1))),window[n]("resize",w.onResize),w.params.nextButton&&w.nextButton&&w.nextButton.length>0&&(w.nextButton[t]("click",w.onClickNext),w.params.a11y&&w.a11y&&w.nextButton[t]("keydown",w.a11y.onEnterKey)),w.params.prevButton&&w.prevButton&&w.prevButton.length>0&&(w.prevButton[t]("click",w.onClickPrev),w.params.a11y&&w.a11y&&w.prevButton[t]("keydown",w.a11y.onEnterKey)),w.params.pagination&&w.params.paginationClickable&&(w.paginationContainer[t]("click","."+w.params.bulletClass,w.onClickIndex),w.params.a11y&&w.a11y&&w.paginationContainer[t]("keydown","."+w.params.bulletClass,w.a11y.onEnterKey)),(w.params.preventClicks||w.params.preventClicksPropagation)&&i[n]("click",w.preventClicks,!0)},w.attachEvents=function(){w.initEvents()},w.detachEvents=function(){w.initEvents(!0)},w.allowClick=!0,w.preventClicks=function(e){w.allowClick||(w.params.preventClicks&&e.preventDefault(),w.params.preventClicksPropagation&&w.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},w.onClickNext=function(e){e.preventDefault(),w.isEnd&&!w.params.loop||w.slideNext()},w.onClickPrev=function(e){e.preventDefault(),w.isBeginning&&!w.params.loop||w.slidePrev()},w.onClickIndex=function(t){t.preventDefault();var n=e(this).index()*w.params.slidesPerGroup;w.params.loop&&(n+=w.loopedSlides),w.slideTo(n)},w.updateClickedSlide=function(t){var n=s(t,"."+w.params.slideClass),i=!1;if(n)for(var r=0;r<w.slides.length;r++)w.slides[r]===n&&(i=!0);if(!n||!i)return w.clickedSlide=void 0,void(w.clickedIndex=void 0);if(w.clickedSlide=n,w.clickedIndex=e(n).index(),w.params.slideToClickedSlide&&void 0!==w.clickedIndex&&w.clickedIndex!==w.activeIndex){var a,o=w.clickedIndex;if(w.params.loop){if(w.animating)return;a=e(w.clickedSlide).attr("data-swiper-slide-index"),w.params.centeredSlides?o<w.loopedSlides-w.params.slidesPerView/2||o>w.slides.length-w.loopedSlides+w.params.slidesPerView/2?(w.fixLoop(),o=w.wrapper.children("."+w.params.slideClass+'[data-swiper-slide-index="'+a+'"]:not(.swiper-slide-duplicate)').eq(0).index(),setTimeout(function(){w.slideTo(o)},0)):w.slideTo(o):o>w.slides.length-w.params.slidesPerView?(w.fixLoop(),o=w.wrapper.children("."+w.params.slideClass+'[data-swiper-slide-index="'+a+'"]:not(.swiper-slide-duplicate)').eq(0).index(),setTimeout(function(){w.slideTo(o)},0)):w.slideTo(o)}else w.slideTo(o)}};var T,S,k,_,E,A,I,L,$,D,O="input, select, textarea, button",P=Date.now(),M=[];w.animating=!1,w.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var B,R;if(w.onTouchStart=function(t){if(t.originalEvent&&(t=t.originalEvent),(B="touchstart"===t.type)||!("which"in t)||3!==t.which){if(w.params.noSwiping&&s(t,"."+w.params.noSwipingClass))return void(w.allowClick=!0);if(!w.params.swipeHandler||s(t,w.params.swipeHandler)){var n=w.touches.currentX="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i=w.touches.currentY="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY;if(!(w.device.ios&&w.params.iOSEdgeSwipeDetection&&n<=w.params.iOSEdgeSwipeThreshold)){if(T=!0,S=!1,k=!0,E=void 0,R=void 0,w.touches.startX=n,w.touches.startY=i,_=Date.now(),w.allowClick=!0,w.updateContainerSize(),w.swipeDirection=void 0,w.params.threshold>0&&(L=!1),"touchstart"!==t.type){var r=!0;e(t.target).is(O)&&(r=!1),document.activeElement&&e(document.activeElement).is(O)&&document.activeElement.blur(),r&&t.preventDefault()}w.emit("onTouchStart",w,t)}}}},w.onTouchMove=function(t){if(t.originalEvent&&(t=t.originalEvent),!B||"mousemove"!==t.type){if(t.preventedByNestedSwiper)return w.touches.startX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,void(w.touches.startY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY);if(w.params.onlyExternal)return w.allowClick=!1,void(T&&(w.touches.startX=w.touches.currentX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,w.touches.startY=w.touches.currentY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,_=Date.now()));if(B&&document.activeElement&&t.target===document.activeElement&&e(t.target).is(O))return S=!0,void(w.allowClick=!1);if(k&&w.emit("onTouchMove",w,t),!(t.targetTouches&&t.targetTouches.length>1)){if(w.touches.currentX="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,w.touches.currentY="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===E){var n=180*Math.atan2(Math.abs(w.touches.currentY-w.touches.startY),Math.abs(w.touches.currentX-w.touches.startX))/Math.PI;E=w.isHorizontal()?n>w.params.touchAngle:90-n>w.params.touchAngle}if(E&&w.emit("onTouchMoveOpposite",w,t),void 0===R&&w.browser.ieTouch&&(w.touches.currentX===w.touches.startX&&w.touches.currentY===w.touches.startY||(R=!0)),T){if(E)return void(T=!1);if(R||!w.browser.ieTouch){w.allowClick=!1,w.emit("onSliderMove",w,t),t.preventDefault(),w.params.touchMoveStopPropagation&&!w.params.nested&&t.stopPropagation(),S||(r.loop&&w.fixLoop(),I=w.getWrapperTranslate(),w.setWrapperTransition(0),w.animating&&w.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),w.params.autoplay&&w.autoplaying&&(w.params.autoplayDisableOnInteraction?w.stopAutoplay():w.pauseAutoplay()),D=!1,w.params.grabCursor&&(w.container[0].style.cursor="move",w.container[0].style.cursor="-webkit-grabbing",w.container[0].style.cursor="-moz-grabbin",w.container[0].style.cursor="grabbing")),S=!0;var i=w.touches.diff=w.isHorizontal()?w.touches.currentX-w.touches.startX:w.touches.currentY-w.touches.startY;i*=w.params.touchRatio,w.rtl&&(i=-i),w.swipeDirection=i>0?"prev":"next",A=i+I;var a=!0;if(i>0&&A>w.minTranslate()?(a=!1,w.params.resistance&&(A=w.minTranslate()-1+Math.pow(-w.minTranslate()+I+i,w.params.resistanceRatio))):i<0&&A<w.maxTranslate()&&(a=!1,w.params.resistance&&(A=w.maxTranslate()+1-Math.pow(w.maxTranslate()-I-i,w.params.resistanceRatio))),a&&(t.preventedByNestedSwiper=!0),!w.params.allowSwipeToNext&&"next"===w.swipeDirection&&A<I&&(A=I),!w.params.allowSwipeToPrev&&"prev"===w.swipeDirection&&A>I&&(A=I),w.params.followFinger){if(w.params.threshold>0){if(!(Math.abs(i)>w.params.threshold||L))return void(A=I);if(!L)return L=!0,w.touches.startX=w.touches.currentX,w.touches.startY=w.touches.currentY,A=I,void(w.touches.diff=w.isHorizontal()?w.touches.currentX-w.touches.startX:w.touches.currentY-w.touches.startY)}(w.params.freeMode||w.params.watchSlidesProgress)&&w.updateActiveIndex(),w.params.freeMode&&(0===M.length&&M.push({position:w.touches[w.isHorizontal()?"startX":"startY"],time:_}),M.push({position:w.touches[w.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),w.updateProgress(A),w.setWrapperTranslate(A)}}}}}},w.onTouchEnd=function(t){if(t.originalEvent&&(t=t.originalEvent),k&&w.emit("onTouchEnd",w,t),k=!1,T){w.params.grabCursor&&S&&T&&(w.container[0].style.cursor="move",w.container[0].style.cursor="-webkit-grab",w.container[0].style.cursor="-moz-grab",w.container[0].style.cursor="grab");var n=Date.now(),i=n-_;if(w.allowClick&&(w.updateClickedSlide(t),w.emit("onTap",w,t),i<300&&n-P>300&&($&&clearTimeout($),$=setTimeout(function(){w&&(w.params.paginationHide&&w.paginationContainer.length>0&&!e(t.target).hasClass(w.params.bulletClass)&&w.paginationContainer.toggleClass(w.params.paginationHiddenClass),w.emit("onClick",w,t))},300)),
i<300&&n-P<300&&($&&clearTimeout($),w.emit("onDoubleTap",w,t))),P=Date.now(),setTimeout(function(){w&&(w.allowClick=!0)},0),!T||!S||!w.swipeDirection||0===w.touches.diff||A===I)return void(T=S=!1);T=S=!1;var r;if(r=w.params.followFinger?w.rtl?w.translate:-w.translate:-A,w.params.freeMode){if(r<-w.minTranslate())return void w.slideTo(w.activeIndex);if(r>-w.maxTranslate())return void(w.slides.length<w.snapGrid.length?w.slideTo(w.snapGrid.length-1):w.slideTo(w.slides.length-1));if(w.params.freeModeMomentum){if(M.length>1){var a=M.pop(),o=M.pop(),s=a.position-o.position,l=a.time-o.time;w.velocity=s/l,w.velocity=w.velocity/2,Math.abs(w.velocity)<w.params.freeModeMinimumVelocity&&(w.velocity=0),(l>150||(new window.Date).getTime()-a.time>300)&&(w.velocity=0)}else w.velocity=0;M.length=0;var p=1e3*w.params.freeModeMomentumRatio,u=w.velocity*p,c=w.translate+u;w.rtl&&(c=-c);var d,f=!1,h=20*Math.abs(w.velocity)*w.params.freeModeMomentumBounceRatio;if(c<w.maxTranslate())w.params.freeModeMomentumBounce?(c+w.maxTranslate()<-h&&(c=w.maxTranslate()-h),d=w.maxTranslate(),f=!0,D=!0):c=w.maxTranslate();else if(c>w.minTranslate())w.params.freeModeMomentumBounce?(c-w.minTranslate()>h&&(c=w.minTranslate()+h),d=w.minTranslate(),f=!0,D=!0):c=w.minTranslate();else if(w.params.freeModeSticky){var m,g=0;for(g=0;g<w.snapGrid.length;g+=1)if(w.snapGrid[g]>-c){m=g;break}c=Math.abs(w.snapGrid[m]-c)<Math.abs(w.snapGrid[m-1]-c)||"next"===w.swipeDirection?w.snapGrid[m]:w.snapGrid[m-1],w.rtl||(c=-c)}if(0!==w.velocity)p=w.rtl?Math.abs((-c-w.translate)/w.velocity):Math.abs((c-w.translate)/w.velocity);else if(w.params.freeModeSticky)return void w.slideReset();w.params.freeModeMomentumBounce&&f?(w.updateProgress(d),w.setWrapperTransition(p),w.setWrapperTranslate(c),w.onTransitionStart(),w.animating=!0,w.wrapper.transitionEnd(function(){w&&D&&(w.emit("onMomentumBounce",w),w.setWrapperTransition(w.params.speed),w.setWrapperTranslate(d),w.wrapper.transitionEnd(function(){w&&w.onTransitionEnd()}))})):w.velocity?(w.updateProgress(c),w.setWrapperTransition(p),w.setWrapperTranslate(c),w.onTransitionStart(),w.animating||(w.animating=!0,w.wrapper.transitionEnd(function(){w&&w.onTransitionEnd()}))):w.updateProgress(c),w.updateActiveIndex()}return void((!w.params.freeModeMomentum||i>=w.params.longSwipesMs)&&(w.updateProgress(),w.updateActiveIndex()))}var v,b=0,y=w.slidesSizesGrid[0];for(v=0;v<w.slidesGrid.length;v+=w.params.slidesPerGroup)void 0!==w.slidesGrid[v+w.params.slidesPerGroup]?r>=w.slidesGrid[v]&&r<w.slidesGrid[v+w.params.slidesPerGroup]&&(b=v,y=w.slidesGrid[v+w.params.slidesPerGroup]-w.slidesGrid[v]):r>=w.slidesGrid[v]&&(b=v,y=w.slidesGrid[w.slidesGrid.length-1]-w.slidesGrid[w.slidesGrid.length-2]);var x=(r-w.slidesGrid[b])/y;if(i>w.params.longSwipesMs){if(!w.params.longSwipes)return void w.slideTo(w.activeIndex);"next"===w.swipeDirection&&(x>=w.params.longSwipesRatio?w.slideTo(b+w.params.slidesPerGroup):w.slideTo(b)),"prev"===w.swipeDirection&&(x>1-w.params.longSwipesRatio?w.slideTo(b+w.params.slidesPerGroup):w.slideTo(b))}else{if(!w.params.shortSwipes)return void w.slideTo(w.activeIndex);"next"===w.swipeDirection&&w.slideTo(b+w.params.slidesPerGroup),"prev"===w.swipeDirection&&w.slideTo(b)}}},w._slideTo=function(e,t){return w.slideTo(e,t,!0,!0)},w.slideTo=function(e,t,n,i){void 0===n&&(n=!0),void 0===e&&(e=0),e<0&&(e=0),w.snapIndex=Math.floor(e/w.params.slidesPerGroup),w.snapIndex>=w.snapGrid.length&&(w.snapIndex=w.snapGrid.length-1);var r=-w.snapGrid[w.snapIndex];w.params.autoplay&&w.autoplaying&&(i||!w.params.autoplayDisableOnInteraction?w.pauseAutoplay(t):w.stopAutoplay()),w.updateProgress(r);for(var a=0;a<w.slidesGrid.length;a++)-Math.floor(100*r)>=Math.floor(100*w.slidesGrid[a])&&(e=a);return!(!w.params.allowSwipeToNext&&r<w.translate&&r<w.minTranslate())&&(!(!w.params.allowSwipeToPrev&&r>w.translate&&r>w.maxTranslate()&&(w.activeIndex||0)!==e)&&(void 0===t&&(t=w.params.speed),w.previousIndex=w.activeIndex||0,w.activeIndex=e,w.rtl&&-r===w.translate||!w.rtl&&r===w.translate?(w.params.autoHeight&&w.updateAutoHeight(),w.updateClasses(),"slide"!==w.params.effect&&w.setWrapperTranslate(r),!1):(w.updateClasses(),w.onTransitionStart(n),0===t?(w.setWrapperTranslate(r),w.setWrapperTransition(0),w.onTransitionEnd(n)):(w.setWrapperTranslate(r),w.setWrapperTransition(t),w.animating||(w.animating=!0,w.wrapper.transitionEnd(function(){w&&w.onTransitionEnd(n)}))),!0)))},w.onTransitionStart=function(e){void 0===e&&(e=!0),w.params.autoHeight&&w.updateAutoHeight(),w.lazy&&w.lazy.onTransitionStart(),e&&(w.emit("onTransitionStart",w),w.activeIndex!==w.previousIndex&&(w.emit("onSlideChangeStart",w),w.activeIndex>w.previousIndex?w.emit("onSlideNextStart",w):w.emit("onSlidePrevStart",w)))},w.onTransitionEnd=function(e){w.animating=!1,w.setWrapperTransition(0),void 0===e&&(e=!0),w.lazy&&w.lazy.onTransitionEnd(),e&&(w.emit("onTransitionEnd",w),w.activeIndex!==w.previousIndex&&(w.emit("onSlideChangeEnd",w),w.activeIndex>w.previousIndex?w.emit("onSlideNextEnd",w):w.emit("onSlidePrevEnd",w))),w.params.hashnav&&w.hashnav&&w.hashnav.setHash()},w.slideNext=function(e,t,n){if(w.params.loop){if(w.animating)return!1;w.fixLoop();w.container[0].clientLeft;return w.slideTo(w.activeIndex+w.params.slidesPerGroup,t,e,n)}return w.slideTo(w.activeIndex+w.params.slidesPerGroup,t,e,n)},w._slideNext=function(e){return w.slideNext(!0,e,!0)},w.slidePrev=function(e,t,n){if(w.params.loop){if(w.animating)return!1;w.fixLoop();w.container[0].clientLeft;return w.slideTo(w.activeIndex-1,t,e,n)}return w.slideTo(w.activeIndex-1,t,e,n)},w._slidePrev=function(e){return w.slidePrev(!0,e,!0)},w.slideReset=function(e,t,n){return w.slideTo(w.activeIndex,t,e)},w.setWrapperTransition=function(e,t){w.wrapper.transition(e),"slide"!==w.params.effect&&w.effects[w.params.effect]&&w.effects[w.params.effect].setTransition(e),w.params.parallax&&w.parallax&&w.parallax.setTransition(e),w.params.scrollbar&&w.scrollbar&&w.scrollbar.setTransition(e),w.params.control&&w.controller&&w.controller.setTransition(e,t),w.emit("onSetTransition",w,e)},w.setWrapperTranslate=function(e,t,n){var i=0,r=0;w.isHorizontal()?i=w.rtl?-e:e:r=e,w.params.roundLengths&&(i=a(i),r=a(r)),w.params.virtualTranslate||(w.support.transforms3d?w.wrapper.transform("translate3d("+i+"px, "+r+"px, 0px)"):w.wrapper.transform("translate("+i+"px, "+r+"px)")),w.translate=w.isHorizontal()?i:r;var o,s=w.maxTranslate()-w.minTranslate();o=0===s?0:(e-w.minTranslate())/s,o!==w.progress&&w.updateProgress(e),t&&w.updateActiveIndex(),"slide"!==w.params.effect&&w.effects[w.params.effect]&&w.effects[w.params.effect].setTranslate(w.translate),w.params.parallax&&w.parallax&&w.parallax.setTranslate(w.translate),w.params.scrollbar&&w.scrollbar&&w.scrollbar.setTranslate(w.translate),w.params.control&&w.controller&&w.controller.setTranslate(w.translate,n),w.emit("onSetTranslate",w,w.translate)},w.getTranslate=function(e,t){var n,i,r,a;return void 0===t&&(t="x"),w.params.virtualTranslate?w.rtl?-w.translate:w.translate:(r=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(i=r.transform||r.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new window.WebKitCSSMatrix("none"===i?"":i)):(a=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=window.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),w.rtl&&i&&(i=-i),i||0)},w.getWrapperTranslate=function(e){return void 0===e&&(e=w.isHorizontal()?"x":"y"),w.getTranslate(w.wrapper[0],e)},w.observers=[],w.initObservers=function(){if(w.params.observeParents)for(var e=w.container.parents(),t=0;t<e.length;t++)l(e[t]);l(w.container[0],{childList:!1}),l(w.wrapper[0],{attributes:!1})},w.disconnectObservers=function(){for(var e=0;e<w.observers.length;e++)w.observers[e].disconnect();w.observers=[]},w.createLoop=function(){w.wrapper.children("."+w.params.slideClass+"."+w.params.slideDuplicateClass).remove();var t=w.wrapper.children("."+w.params.slideClass);"auto"!==w.params.slidesPerView||w.params.loopedSlides||(w.params.loopedSlides=t.length),w.loopedSlides=parseInt(w.params.loopedSlides||w.params.slidesPerView,10),w.loopedSlides=w.loopedSlides+w.params.loopAdditionalSlides,w.loopedSlides>t.length&&(w.loopedSlides=t.length);var n,i=[],r=[];for(t.each(function(n,a){var o=e(this);n<w.loopedSlides&&r.push(a),n<t.length&&n>=t.length-w.loopedSlides&&i.push(a),o.attr("data-swiper-slide-index",n)}),n=0;n<r.length;n++)w.wrapper.append(e(r[n].cloneNode(!0)).addClass(w.params.slideDuplicateClass));for(n=i.length-1;n>=0;n--)w.wrapper.prepend(e(i[n].cloneNode(!0)).addClass(w.params.slideDuplicateClass))},w.destroyLoop=function(){w.wrapper.children("."+w.params.slideClass+"."+w.params.slideDuplicateClass).remove(),w.slides.removeAttr("data-swiper-slide-index")},w.reLoop=function(e){var t=w.activeIndex-w.loopedSlides;w.destroyLoop(),w.createLoop(),w.updateSlidesSize(),e&&w.slideTo(t+w.loopedSlides,0,!1)},w.fixLoop=function(){var e;w.activeIndex<w.loopedSlides?(e=w.slides.length-3*w.loopedSlides+w.activeIndex,e+=w.loopedSlides,w.slideTo(e,0,!1,!0)):("auto"===w.params.slidesPerView&&w.activeIndex>=2*w.loopedSlides||w.activeIndex>w.slides.length-2*w.params.slidesPerView)&&(e=-w.slides.length+w.activeIndex+w.loopedSlides,e+=w.loopedSlides,w.slideTo(e,0,!1,!0))},w.appendSlide=function(e){if(w.params.loop&&w.destroyLoop(),"object"==typeof e&&e.length)for(var t=0;t<e.length;t++)e[t]&&w.wrapper.append(e[t]);else w.wrapper.append(e);w.params.loop&&w.createLoop(),w.params.observer&&w.support.observer||w.update(!0)},w.prependSlide=function(e){w.params.loop&&w.destroyLoop();var t=w.activeIndex+1;if("object"==typeof e&&e.length){for(var n=0;n<e.length;n++)e[n]&&w.wrapper.prepend(e[n]);t=w.activeIndex+e.length}else w.wrapper.prepend(e);w.params.loop&&w.createLoop(),w.params.observer&&w.support.observer||w.update(!0),w.slideTo(t,0,!1)},w.removeSlide=function(e){w.params.loop&&(w.destroyLoop(),w.slides=w.wrapper.children("."+w.params.slideClass));var t,n=w.activeIndex;if("object"==typeof e&&e.length){for(var i=0;i<e.length;i++)t=e[i],w.slides[t]&&w.slides.eq(t).remove(),t<n&&n--;n=Math.max(n,0)}else t=e,w.slides[t]&&w.slides.eq(t).remove(),t<n&&n--,n=Math.max(n,0);w.params.loop&&w.createLoop(),w.params.observer&&w.support.observer||w.update(!0),w.params.loop?w.slideTo(n+w.loopedSlides,0,!1):w.slideTo(n,0,!1)},w.removeAllSlides=function(){for(var e=[],t=0;t<w.slides.length;t++)e.push(t);w.removeSlide(e)},w.effects={fade:{setTranslate:function(){for(var e=0;e<w.slides.length;e++){var t=w.slides.eq(e),n=t[0].swiperSlideOffset,i=-n;w.params.virtualTranslate||(i-=w.translate);var r=0;w.isHorizontal()||(r=i,i=0);var a=w.params.fade.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);t.css({opacity:a}).transform("translate3d("+i+"px, "+r+"px, 0px)")}},setTransition:function(e){if(w.slides.transition(e),w.params.virtualTranslate&&0!==e){var t=!1;w.slides.transitionEnd(function(){if(!t&&w){t=!0,w.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=0;n<e.length;n++)w.wrapper.trigger(e[n])}})}}},flip:{setTranslate:function(){for(var t=0;t<w.slides.length;t++){var n=w.slides.eq(t),i=n[0].progress;w.params.flip.limitRotation&&(i=Math.max(Math.min(n[0].progress,1),-1));var r=n[0].swiperSlideOffset,a=-180*i,o=a,s=0,l=-r,p=0;if(w.isHorizontal()?w.rtl&&(o=-o):(p=l,l=0,s=-o,o=0),n[0].style.zIndex=-Math.abs(Math.round(i))+w.slides.length,w.params.flip.slideShadows){var u=w.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),c=w.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===u.length&&(u=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"left":"top")+'"></div>'),n.append(u)),0===c.length&&(c=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"right":"bottom")+'"></div>'),n.append(c)),u.length&&(u[0].style.opacity=Math.max(-i,0)),c.length&&(c[0].style.opacity=Math.max(i,0))}n.transform("translate3d("+l+"px, "+p+"px, 0px) rotateX("+s+"deg) rotateY("+o+"deg)")}},setTransition:function(t){if(w.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),w.params.virtualTranslate&&0!==t){var n=!1;w.slides.eq(w.activeIndex).transitionEnd(function(){if(!n&&w&&e(this).hasClass(w.params.slideActiveClass)){n=!0,w.animating=!1;for(var t=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=0;i<t.length;i++)w.wrapper.trigger(t[i])}})}}},cube:{setTranslate:function(){var t,n=0;w.params.cube.shadow&&(w.isHorizontal()?(t=w.wrapper.find(".swiper-cube-shadow"),0===t.length&&(t=e('<div class="swiper-cube-shadow"></div>'),w.wrapper.append(t)),t.css({height:w.width+"px"})):(t=w.container.find(".swiper-cube-shadow"),0===t.length&&(t=e('<div class="swiper-cube-shadow"></div>'),w.container.append(t))));for(var i=0;i<w.slides.length;i++){var r=w.slides.eq(i),a=90*i,o=Math.floor(a/360);w.rtl&&(a=-a,o=Math.floor(-a/360));var s=Math.max(Math.min(r[0].progress,1),-1),l=0,p=0,u=0;i%4==0?(l=4*-o*w.size,u=0):(i-1)%4==0?(l=0,u=4*-o*w.size):(i-2)%4==0?(l=w.size+4*o*w.size,u=w.size):(i-3)%4==0&&(l=-w.size,u=3*w.size+4*w.size*o),w.rtl&&(l=-l),w.isHorizontal()||(p=l,l=0);var c="rotateX("+(w.isHorizontal()?0:-a)+"deg) rotateY("+(w.isHorizontal()?a:0)+"deg) translate3d("+l+"px, "+p+"px, "+u+"px)";if(s<=1&&s>-1&&(n=90*i+90*s,w.rtl&&(n=90*-i-90*s)),r.transform(c),w.params.cube.slideShadows){var d=w.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),f=w.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===d.length&&(d=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"left":"top")+'"></div>'),r.append(d)),0===f.length&&(f=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"right":"bottom")+'"></div>'),r.append(f)),d.length&&(d[0].style.opacity=Math.max(-s,0)),f.length&&(f[0].style.opacity=Math.max(s,0))}}if(w.wrapper.css({"-webkit-transform-origin":"50% 50% -"+w.size/2+"px","-moz-transform-origin":"50% 50% -"+w.size/2+"px","-ms-transform-origin":"50% 50% -"+w.size/2+"px","transform-origin":"50% 50% -"+w.size/2+"px"}),w.params.cube.shadow)if(w.isHorizontal())t.transform("translate3d(0px, "+(w.width/2+w.params.cube.shadowOffset)+"px, "+-w.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+w.params.cube.shadowScale+")");else{var h=Math.abs(n)-90*Math.floor(Math.abs(n)/90),m=1.5-(Math.sin(2*h*Math.PI/360)/2+Math.cos(2*h*Math.PI/360)/2),g=w.params.cube.shadowScale,v=w.params.cube.shadowScale/m,b=w.params.cube.shadowOffset;t.transform("scale3d("+g+", 1, "+v+") translate3d(0px, "+(w.height/2+b)+"px, "+-w.height/2/v+"px) rotateX(-90deg)")}var y=w.isSafari||w.isUiWebView?-w.size/2:0;w.wrapper.transform("translate3d(0px,0,"+y+"px) rotateX("+(w.isHorizontal()?0:n)+"deg) rotateY("+(w.isHorizontal()?-n:0)+"deg)")},setTransition:function(e){w.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),w.params.cube.shadow&&!w.isHorizontal()&&w.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var t=w.translate,n=w.isHorizontal()?-t+w.width/2:-t+w.height/2,i=w.isHorizontal()?w.params.coverflow.rotate:-w.params.coverflow.rotate,r=w.params.coverflow.depth,a=0,o=w.slides.length;a<o;a++){var s=w.slides.eq(a),l=w.slidesSizesGrid[a],p=s[0].swiperSlideOffset,u=(n-p-l/2)/l*w.params.coverflow.modifier,c=w.isHorizontal()?i*u:0,d=w.isHorizontal()?0:i*u,f=-r*Math.abs(u),h=w.isHorizontal()?0:w.params.coverflow.stretch*u,m=w.isHorizontal()?w.params.coverflow.stretch*u:0;Math.abs(m)<.001&&(m=0),Math.abs(h)<.001&&(h=0),Math.abs(f)<.001&&(f=0),Math.abs(c)<.001&&(c=0),Math.abs(d)<.001&&(d=0);var g="translate3d("+m+"px,"+h+"px,"+f+"px)  rotateX("+d+"deg) rotateY("+c+"deg)";if(s.transform(g),s[0].style.zIndex=1-Math.abs(Math.round(u)),w.params.coverflow.slideShadows){var v=w.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),b=w.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===v.length&&(v=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"left":"top")+'"></div>'),s.append(v)),0===b.length&&(b=e('<div class="swiper-slide-shadow-'+(w.isHorizontal()?"right":"bottom")+'"></div>'),s.append(b)),v.length&&(v[0].style.opacity=u>0?u:0),b.length&&(b[0].style.opacity=-u>0?-u:0)}}if(w.browser.ie){w.wrapper[0].style.perspectiveOrigin=n+"px 50%"}},setTransition:function(e){w.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},w.lazy={initialImageLoaded:!1,loadImageInSlide:function(t,n){if(void 0!==t&&(void 0===n&&(n=!0),0!==w.slides.length)){var i=w.slides.eq(t),r=i.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");!i.hasClass("swiper-lazy")||i.hasClass("swiper-lazy-loaded")||i.hasClass("swiper-lazy-loading")||(r=r.add(i[0])),0!==r.length&&r.each(function(){var t=e(this);t.addClass("swiper-lazy-loading");var r=t.attr("data-background"),a=t.attr("data-src"),o=t.attr("data-srcset");w.loadImage(t[0],a||r,o,!1,function(){if(r?(t.css("background-image",'url("'+r+'")'),t.removeAttr("data-background")):(o&&(t.attr("srcset",o),t.removeAttr("data-srcset")),a&&(t.attr("src",a),t.removeAttr("data-src"))),t.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"),i.find(".swiper-lazy-preloader, .preloader").remove(),w.params.loop&&n){var e=i.attr("data-swiper-slide-index");if(i.hasClass(w.params.slideDuplicateClass)){var s=w.wrapper.children('[data-swiper-slide-index="'+e+'"]:not(.'+w.params.slideDuplicateClass+")");w.lazy.loadImageInSlide(s.index(),!1)}else{var l=w.wrapper.children("."+w.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');w.lazy.loadImageInSlide(l.index(),!1)}}w.emit("onLazyImageReady",w,i[0],t[0])}),w.emit("onLazyImageLoad",w,i[0],t[0])})}},load:function(){var t;if(w.params.watchSlidesVisibility)w.wrapper.children("."+w.params.slideVisibleClass).each(function(){w.lazy.loadImageInSlide(e(this).index())});else if(w.params.slidesPerView>1)for(t=w.activeIndex;t<w.activeIndex+w.params.slidesPerView;t++)w.slides[t]&&w.lazy.loadImageInSlide(t);else w.lazy.loadImageInSlide(w.activeIndex);if(w.params.lazyLoadingInPrevNext)if(w.params.slidesPerView>1||w.params.lazyLoadingInPrevNextAmount&&w.params.lazyLoadingInPrevNextAmount>1){var n=w.params.lazyLoadingInPrevNextAmount,i=w.params.slidesPerView,r=Math.min(w.activeIndex+i+Math.max(n,i),w.slides.length),a=Math.max(w.activeIndex-Math.max(i,n),0);for(t=w.activeIndex+w.params.slidesPerView;t<r;t++)w.slides[t]&&w.lazy.loadImageInSlide(t);for(t=a;t<w.activeIndex;t++)w.slides[t]&&w.lazy.loadImageInSlide(t)}else{var o=w.wrapper.children("."+w.params.slideNextClass);o.length>0&&w.lazy.loadImageInSlide(o.index());var s=w.wrapper.children("."+w.params.slidePrevClass);s.length>0&&w.lazy.loadImageInSlide(s.index())}},onTransitionStart:function(){w.params.lazyLoading&&(w.params.lazyLoadingOnTransitionStart||!w.params.lazyLoadingOnTransitionStart&&!w.lazy.initialImageLoaded)&&w.lazy.load()},onTransitionEnd:function(){w.params.lazyLoading&&!w.params.lazyLoadingOnTransitionStart&&w.lazy.load()}},w.scrollbar={isTouched:!1,setDragPosition:function(e){var t=w.scrollbar,n=w.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY,i=n-t.track.offset()[w.isHorizontal()?"left":"top"]-t.dragSize/2,r=-w.minTranslate()*t.moveDivider,a=-w.maxTranslate()*t.moveDivider;i<r?i=r:i>a&&(i=a),i=-i/t.moveDivider,w.updateProgress(i),w.setWrapperTranslate(i,!0)},dragStart:function(e){var t=w.scrollbar;t.isTouched=!0,e.preventDefault(),e.stopPropagation(),t.setDragPosition(e),clearTimeout(t.dragTimeout),t.track.transition(0),w.params.scrollbarHide&&t.track.css("opacity",1),w.wrapper.transition(100),t.drag.transition(100),w.emit("onScrollbarDragStart",w)},dragMove:function(e){var t=w.scrollbar;t.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),w.wrapper.transition(0),t.track.transition(0),t.drag.transition(0),w.emit("onScrollbarDragMove",w))},dragEnd:function(e){var t=w.scrollbar;t.isTouched&&(t.isTouched=!1,w.params.scrollbarHide&&(clearTimeout(t.dragTimeout),t.dragTimeout=setTimeout(function(){t.track.css("opacity",0),t.track.transition(400)},1e3)),w.emit("onScrollbarDragEnd",w),w.params.scrollbarSnapOnRelease&&w.slideReset())},enableDraggable:function(){var t=w.scrollbar,n=w.support.touch?t.track:document;e(t.track).on(w.touchEvents.start,t.dragStart),e(n).on(w.touchEvents.move,t.dragMove),e(n).on(w.touchEvents.end,t.dragEnd)},disableDraggable:function(){var t=w.scrollbar,n=w.support.touch?t.track:document;e(t.track).off(w.touchEvents.start,t.dragStart),e(n).off(w.touchEvents.move,t.dragMove),e(n).off(w.touchEvents.end,t.dragEnd)},set:function(){if(w.params.scrollbar){var t=w.scrollbar;t.track=e(w.params.scrollbar),w.params.uniqueNavElements&&"string"==typeof w.params.scrollbar&&t.track.length>1&&1===w.container.find(w.params.scrollbar).length&&(t.track=w.container.find(w.params.scrollbar)),t.drag=t.track.find(".swiper-scrollbar-drag"),0===t.drag.length&&(t.drag=e('<div class="swiper-scrollbar-drag"></div>'),t.track.append(t.drag)),t.drag[0].style.width="",t.drag[0].style.height="",t.trackSize=w.isHorizontal()?t.track[0].offsetWidth:t.track[0].offsetHeight,t.divider=w.size/w.virtualSize,t.moveDivider=t.divider*(t.trackSize/w.size),t.dragSize=t.trackSize*t.divider,w.isHorizontal()?t.drag[0].style.width=t.dragSize+"px":t.drag[0].style.height=t.dragSize+"px",t.divider>=1?t.track[0].style.display="none":t.track[0].style.display="",w.params.scrollbarHide&&(t.track[0].style.opacity=0)}},setTranslate:function(){if(w.params.scrollbar){var e,t=w.scrollbar,n=(w.translate,t.dragSize);e=(t.trackSize-t.dragSize)*w.progress,w.rtl&&w.isHorizontal()?(e=-e,e>0?(n=t.dragSize-e,e=0):-e+t.dragSize>t.trackSize&&(n=t.trackSize+e)):e<0?(n=t.dragSize+e,e=0):e+t.dragSize>t.trackSize&&(n=t.trackSize-e),w.isHorizontal()?(w.support.transforms3d?t.drag.transform("translate3d("+e+"px, 0, 0)"):t.drag.transform("translateX("+e+"px)"),t.drag[0].style.width=n+"px"):(w.support.transforms3d?t.drag.transform("translate3d(0px, "+e+"px, 0)"):t.drag.transform("translateY("+e+"px)"),t.drag[0].style.height=n+"px"),w.params.scrollbarHide&&(clearTimeout(t.timeout),t.track[0].style.opacity=1,t.timeout=setTimeout(function(){t.track[0].style.opacity=0,t.track.transition(400)},1e3))}},setTransition:function(e){w.params.scrollbar&&w.scrollbar.drag.transition(e)}},w.controller={LinearSpline:function(e,t){this.x=e,this.y=t,this.lastIndex=e.length-1;var n,i;this.x.length;this.interpolate=function(e){return e?(i=r(this.x,e),n=i-1,(e-this.x[n])*(this.y[i]-this.y[n])/(this.x[i]-this.x[n])+this.y[n]):0};var r=function(){var e,t,n;return function(i,r){for(t=-1,e=i.length;e-t>1;)i[n=e+t>>1]<=r?t=n:e=n;return e}}()},getInterpolateFunction:function(e){w.controller.spline||(w.controller.spline=w.params.loop?new w.controller.LinearSpline(w.slidesGrid,e.slidesGrid):new w.controller.LinearSpline(w.snapGrid,e.snapGrid))},setTranslate:function(e,n){function i(t){e=t.rtl&&"horizontal"===t.params.direction?-w.translate:w.translate,"slide"===w.params.controlBy&&(w.controller.getInterpolateFunction(t),a=-w.controller.spline.interpolate(-e)),a&&"container"!==w.params.controlBy||(r=(t.maxTranslate()-t.minTranslate())/(w.maxTranslate()-w.minTranslate()),a=(e-w.minTranslate())*r+t.minTranslate()),w.params.controlInverse&&(a=t.maxTranslate()-a),t.updateProgress(a),t.setWrapperTranslate(a,!1,w),t.updateActiveIndex()}var r,a,o=w.params.control;if(w.isArray(o))for(var s=0;s<o.length;s++)o[s]!==n&&o[s]instanceof t&&i(o[s]);else o instanceof t&&n!==o&&i(o)},setTransition:function(e,n){function i(t){t.setWrapperTransition(e,w),0!==e&&(t.onTransitionStart(),t.wrapper.transitionEnd(function(){a&&(t.params.loop&&"slide"===w.params.controlBy&&t.fixLoop(),t.onTransitionEnd())}))}var r,a=w.params.control;if(w.isArray(a))for(r=0;r<a.length;r++)a[r]!==n&&a[r]instanceof t&&i(a[r]);else a instanceof t&&n!==a&&i(a)}},w.hashnav={init:function(){if(w.params.hashnav){w.hashnav.initialized=!0;var e=document.location.hash.replace("#","");if(e)for(var t=0,n=w.slides.length;t<n;t++){var i=w.slides.eq(t),r=i.attr("data-hash");if(r===e&&!i.hasClass(w.params.slideDuplicateClass)){var a=i.index();w.slideTo(a,0,w.params.runCallbacksOnInit,!0)}}}},setHash:function(){w.hashnav.initialized&&w.params.hashnav&&(document.location.hash=w.slides.eq(w.activeIndex).attr("data-hash")||"")}},w.disableKeyboardControl=function(){w.params.keyboardControl=!1,e(document).off("keydown",p)},w.enableKeyboardControl=function(){w.params.keyboardControl=!0,e(document).on("keydown",p)},w.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},w.params.mousewheelControl){try{new window.WheelEvent("wheel"),w.mousewheel.event="wheel"}catch(e){(window.WheelEvent||w.container[0]&&"wheel"in w.container[0])&&(w.mousewheel.event="wheel")}!w.mousewheel.event&&window.WheelEvent,w.mousewheel.event||void 0===document.onmousewheel||(w.mousewheel.event="mousewheel"),w.mousewheel.event||(w.mousewheel.event="DOMMouseScroll")}w.disableMousewheelControl=function(){return!!w.mousewheel.event&&(w.container.off(w.mousewheel.event,u),!0)},w.enableMousewheelControl=function(){return!!w.mousewheel.event&&(w.container.on(w.mousewheel.event,u),!0)},w.parallax={setTranslate:function(){w.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){c(this,w.progress)}),w.slides.each(function(){var t=e(this);t.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){c(this,Math.min(Math.max(t[0].progress,-1),1))})})},setTransition:function(t){void 0===t&&(t=w.params.speed),w.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var n=e(this),i=parseInt(n.attr("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),n.transition(i)})}},w._plugins=[];for(var z in w.plugins){var j=w.plugins[z](w,w.params[z]);j&&w._plugins.push(j)}return w.callPlugins=function(e){for(var t=0;t<w._plugins.length;t++)e in w._plugins[t]&&w._plugins[t][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},w.emitterEventListeners={},w.emit=function(e){w.params[e]&&w.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var t;if(w.emitterEventListeners[e])for(t=0;t<w.emitterEventListeners[e].length;t++)w.emitterEventListeners[e][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);w.callPlugins&&w.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},w.on=function(e,t){return e=d(e),w.emitterEventListeners[e]||(w.emitterEventListeners[e]=[]),w.emitterEventListeners[e].push(t),w},w.off=function(e,t){var n;if(e=d(e),void 0===t)return w.emitterEventListeners[e]=[],w;if(w.emitterEventListeners[e]&&0!==w.emitterEventListeners[e].length){for(n=0;n<w.emitterEventListeners[e].length;n++)w.emitterEventListeners[e][n]===t&&w.emitterEventListeners[e].splice(n,1);return w}},w.once=function(e,t){e=d(e);var n=function(){t(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),w.off(e,n)};return w.on(e,n),w},w.a11y={makeFocusable:function(e){return e.attr("tabIndex","0"),e},addRole:function(e,t){return e.attr("role",t),e},addLabel:function(e,t){return e.attr("aria-label",t),e},disable:function(e){return e.attr("aria-disabled",!0),e},enable:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(t){13===t.keyCode&&(e(t.target).is(w.params.nextButton)?(w.onClickNext(t),w.isEnd?w.a11y.notify(w.params.lastSlideMessage):w.a11y.notify(w.params.nextSlideMessage)):e(t.target).is(w.params.prevButton)&&(w.onClickPrev(t),w.isBeginning?w.a11y.notify(w.params.firstSlideMessage):w.a11y.notify(w.params.prevSlideMessage)),e(t.target).is("."+w.params.bulletClass)&&e(t.target)[0].click())},liveRegion:e('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var t=w.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},init:function(){w.params.nextButton&&w.nextButton&&w.nextButton.length>0&&(w.a11y.makeFocusable(w.nextButton),w.a11y.addRole(w.nextButton,"button"),w.a11y.addLabel(w.nextButton,w.params.nextSlideMessage)),w.params.prevButton&&w.prevButton&&w.prevButton.length>0&&(w.a11y.makeFocusable(w.prevButton),w.a11y.addRole(w.prevButton,"button"),w.a11y.addLabel(w.prevButton,w.params.prevSlideMessage)),e(w.container).append(w.a11y.liveRegion)},initPagination:function(){w.params.pagination&&w.params.paginationClickable&&w.bullets&&w.bullets.length&&w.bullets.each(function(){var t=e(this);w.a11y.makeFocusable(t),w.a11y.addRole(t,"button"),w.a11y.addLabel(t,w.params.paginationBulletMessage.replace(/{{index}}/,t.index()+1))})},destroy:function(){w.a11y.liveRegion&&w.a11y.liveRegion.length>0&&w.a11y.liveRegion.remove()}},w.init=function(){w.params.loop&&w.createLoop(),w.updateContainerSize(),w.updateSlidesSize(),w.updatePagination(),w.params.scrollbar&&w.scrollbar&&(w.scrollbar.set(),w.params.scrollbarDraggable&&w.scrollbar.enableDraggable()),"slide"!==w.params.effect&&w.effects[w.params.effect]&&(w.params.loop||w.updateProgress(),w.effects[w.params.effect].setTranslate()),w.params.loop?w.slideTo(w.params.initialSlide+w.loopedSlides,0,w.params.runCallbacksOnInit):(w.slideTo(w.params.initialSlide,0,w.params.runCallbacksOnInit),0===w.params.initialSlide&&(w.parallax&&w.params.parallax&&w.parallax.setTranslate(),w.lazy&&w.params.lazyLoading&&(w.lazy.load(),w.lazy.initialImageLoaded=!0))),w.attachEvents(),w.params.observer&&w.support.observer&&w.initObservers(),w.params.preloadImages&&!w.params.lazyLoading&&w.preloadImages(),w.params.autoplay&&w.startAutoplay(),w.params.keyboardControl&&w.enableKeyboardControl&&w.enableKeyboardControl(),w.params.mousewheelControl&&w.enableMousewheelControl&&w.enableMousewheelControl(),w.params.hashnav&&w.hashnav&&w.hashnav.init(),w.params.a11y&&w.a11y&&w.a11y.init(),w.emit("onInit",w)},w.cleanupStyles=function(){w.container.removeClass(w.classNames.join(" ")).removeAttr("style"),w.wrapper.removeAttr("style"),w.slides&&w.slides.length&&w.slides.removeClass([w.params.slideVisibleClass,w.params.slideActiveClass,w.params.slideNextClass,w.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),w.paginationContainer&&w.paginationContainer.length&&w.paginationContainer.removeClass(w.params.paginationHiddenClass),w.bullets&&w.bullets.length&&w.bullets.removeClass(w.params.bulletActiveClass),w.params.prevButton&&e(w.params.prevButton).removeClass(w.params.buttonDisabledClass),w.params.nextButton&&e(w.params.nextButton).removeClass(w.params.buttonDisabledClass),w.params.scrollbar&&w.scrollbar&&(w.scrollbar.track&&w.scrollbar.track.length&&w.scrollbar.track.removeAttr("style"),w.scrollbar.drag&&w.scrollbar.drag.length&&w.scrollbar.drag.removeAttr("style"))},w.destroy=function(e,t){w.detachEvents(),w.stopAutoplay(),w.params.scrollbar&&w.scrollbar&&w.params.scrollbarDraggable&&w.scrollbar.disableDraggable(),w.params.loop&&w.destroyLoop(),t&&w.cleanupStyles(),w.disconnectObservers(),w.params.keyboardControl&&w.disableKeyboardControl&&w.disableKeyboardControl(),w.params.mousewheelControl&&w.disableMousewheelControl&&w.disableMousewheelControl(),w.params.a11y&&w.a11y&&w.a11y.destroy(),w.emit("onDestroy"),!1!==e&&(w=null)},w.init(),w}}
;t.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),n=e.match(/(iPad).*OS\s([\d_]+)/),i=e.match(/(iPod)(.*OS\s([\d_]+))?/),r=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:n||r||i,android:t}}(),support:{touch:window.Modernizr&&!0===Modernizr.touch||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&!0===Modernizr.csstransforms3d||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),n=0;n<t.length;n++)if(t[n]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()},plugins:{}};for(var n=(function(){var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this},t=function(t,n){var i=[],r=0;if(t&&!n&&t instanceof e)return t;if(t)if("string"==typeof t){var a,o,s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";for(0===s.indexOf("<li")&&(l="ul"),0===s.indexOf("<tr")&&(l="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(l="tr"),0===s.indexOf("<tbody")&&(l="table"),0===s.indexOf("<option")&&(l="select"),o=document.createElement(l),o.innerHTML=t,r=0;r<o.childNodes.length;r++)i.push(o.childNodes[r])}else for(a=n||"#"!==t[0]||t.match(/[ .<>:~]/)?(n||document).querySelectorAll(t):[document.getElementById(t.split("#")[1])],r=0;r<a.length;r++)a[r]&&i.push(a[r])}else if(t.nodeType||t===window||t===document)i.push(t);else if(t.length>0&&t[0].nodeType)for(r=0;r<t.length;r++)i.push(t[r]);return new e(i)};return e.prototype={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),n=0;n<t.length;n++)for(var i=0;i<this.length;i++)this[i].classList.add(t[n]);return this},removeClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var i=0;i<this.length;i++)this[i].classList.remove(t[n]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var i=0;i<this.length;i++)this[i].classList.toggle(t[n]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(e,t);else for(var i in e)this[n][i]=e[i],this[n].setAttribute(i,e[i]);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},data:function(e,t){if(void 0!==t){for(var n=0;n<this.length;n++){var i=this[n];i.dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t}return this}if(this[0]){var r=this[0].getAttribute("data-"+e);return r||(this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0)}},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,i,r){function a(e){var r=e.target;if(t(r).is(n))i.call(r,e);else for(var a=t(r).parents(),o=0;o<a.length;o++)t(a[o]).is(n)&&i.call(a[o],e)}var o,s,l=e.split(" ");for(o=0;o<this.length;o++)if("function"==typeof n||!1===n)for("function"==typeof n&&(i=arguments[1],r=arguments[2]||!1),s=0;s<l.length;s++)this[o].addEventListener(l[s],i,r);else for(s=0;s<l.length;s++)this[o].dom7LiveListeners||(this[o].dom7LiveListeners=[]),this[o].dom7LiveListeners.push({listener:i,liveListener:a}),this[o].addEventListener(l[s],a,r);return this},off:function(e,t,n,i){for(var r=e.split(" "),a=0;a<r.length;a++)for(var o=0;o<this.length;o++)if("function"==typeof t||!1===t)"function"==typeof t&&(n=arguments[1],i=arguments[2]||!1),this[o].removeEventListener(r[a],n,i);else if(this[o].dom7LiveListeners)for(var s=0;s<this[o].dom7LiveListeners.length;s++)this[o].dom7LiveListeners[s].listener===n&&this[o].removeEventListener(r[a],this[o].dom7LiveListeners[s].liveListener,i);return this},once:function(e,t,n,i){function r(o){n(o),a.off(e,t,r,i)}var a=this;"function"==typeof t&&(t=!1,n=arguments[1],i=arguments[2]),a.on(e,t,r,i)},trigger:function(e,t){for(var n=0;n<this.length;n++){var i;try{i=new window.CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(n){i=document.createEvent("Event"),i.initEvent(e,!0,!0),i.detail=t}this[n].dispatchEvent(i)}return this},transitionEnd:function(e){function t(a){if(a.target===this)for(e.call(this,a),n=0;n<i.length;n++)r.off(i[n],t)}var n,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],r=this;if(e)for(n=0;n<i.length;n++)r.on(i[n],t);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),n=document.body,i=e.clientTop||n.clientTop||0,r=e.clientLeft||n.clientLeft||0,a=window.pageYOffset||e.scrollTop,o=window.pageXOffset||e.scrollLeft;return{top:t.top+a-i,left:t.left+o-r}}return null},css:function(e,t){var n;if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n++)for(var i in e)this[n].style[i]=e[i];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n++)this[n].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=e;return this},is:function(n){if(!this[0])return!1;var i,r;if("string"==typeof n){var a=this[0];if(a===document)return n===document;if(a===window)return n===window;if(a.matches)return a.matches(n);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(n);if(a.mozMatchesSelector)return a.mozMatchesSelector(n);if(a.msMatchesSelector)return a.msMatchesSelector(n);for(i=t(n),r=0;r<i.length;r++)if(i[r]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof e){for(i=n.nodeType?[n]:n,r=0;r<i.length;r++)if(i[r]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}},eq:function(t){if(void 0===t)return this;var n,i=this.length;return t>i-1?new e([]):t<0?(n=i+t,new e(n<0?[]:[this[n]])):new e([this[t]])},append:function(t){var n,i;for(n=0;n<this.length;n++)if("string"==typeof t){var r=document.createElement("div");for(r.innerHTML=t;r.firstChild;)this[n].appendChild(r.firstChild)}else if(t instanceof e)for(i=0;i<t.length;i++)this[n].appendChild(t[i]);else this[n].appendChild(t);return this},prepend:function(t){var n,i;for(n=0;n<this.length;n++)if("string"==typeof t){var r=document.createElement("div");for(r.innerHTML=t,i=r.childNodes.length-1;i>=0;i--)this[n].insertBefore(r.childNodes[i],this[n].childNodes[0])}else if(t instanceof e)for(i=0;i<t.length;i++)this[n].insertBefore(t[i],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},insertBefore:function(e){for(var n=t(e),i=0;i<this.length;i++)if(1===n.length)n[0].parentNode.insertBefore(this[i],n[0]);else if(n.length>1)for(var r=0;r<n.length;r++)n[r].parentNode.insertBefore(this[i].cloneNode(!0),n[r])},insertAfter:function(e){for(var n=t(e),i=0;i<this.length;i++)if(1===n.length)n[0].parentNode.insertBefore(this[i],n[0].nextSibling);else if(n.length>1)for(var r=0;r<n.length;r++)n[r].parentNode.insertBefore(this[i].cloneNode(!0),n[r].nextSibling)},next:function(n){return new e(this.length>0?n?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(n){var i=[],r=this[0];if(!r)return new e([]);for(;r.nextElementSibling;){var a=r.nextElementSibling;n?t(a).is(n)&&i.push(a):i.push(a),r=a}return new e(i)},prev:function(n){return new e(this.length>0?n?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(n){var i=[],r=this[0];if(!r)return new e([]);for(;r.previousElementSibling;){var a=r.previousElementSibling;n?t(a).is(n)&&i.push(a):i.push(a),r=a}return new e(i)},parent:function(e){for(var n=[],i=0;i<this.length;i++)e?t(this[i].parentNode).is(e)&&n.push(this[i].parentNode):n.push(this[i].parentNode);return t(t.unique(n))},parents:function(e){for(var n=[],i=0;i<this.length;i++)for(var r=this[i].parentNode;r;)e?t(r).is(e)&&n.push(r):n.push(r),r=r.parentNode;return t(t.unique(n))},find:function(t){for(var n=[],i=0;i<this.length;i++)for(var r=this[i].querySelectorAll(t),a=0;a<r.length;a++)n.push(r[a]);return new e(n)},children:function(n){for(var i=[],r=0;r<this.length;r++)for(var a=this[r].childNodes,o=0;o<a.length;o++)n?1===a[o].nodeType&&t(a[o]).is(n)&&i.push(a[o]):1===a[o].nodeType&&i.push(a[o]);return new e(t.unique(i))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){var e,n,i=this;for(e=0;e<arguments.length;e++){var r=t(arguments[e]);for(n=0;n<r.length;n++)i[i.length]=r[n],i.length++}return i}},t.fn=e.prototype,t.unique=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},t}()),i=["jQuery","Zepto","Dom7"],r=0;r<i.length;r++)window[i[r]]&&function(e){e.fn.swiper=function(n){var i;return e(this).each(function(){var e=new t(this,n);i||(i=e)}),i}}(window[i[r]]);var a;a=void 0===n?window.Dom7||window.Zepto||window.jQuery:n,a&&("transitionEnd"in a.fn||(a.fn.transitionEnd=function(e){function t(a){if(a.target===this)for(e.call(this,a),n=0;n<i.length;n++)r.off(i[n],t)}var n,i=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],r=this;if(e)for(n=0;n<i.length;n++)r.on(i[n],t);return this}),"transform"in a.fn||(a.fn.transform=function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this}),"transition"in a.fn||(a.fn.transition=function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this})),window.Swiper=t}(),"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define("lib-app/Swiper/swiper",[],function(){"use strict";return window.Swiper}),function(e,t){var n=function(e,t){"use strict";if(t.getElementsByClassName){var n,i=t.documentElement,r=e.Date,a=e.HTMLPictureElement,o="addEventListener",s="getAttribute",l=e[o],p=e.setTimeout,u=e.requestAnimationFrame||p,c=e.requestIdleCallback,d=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],h={},m=Array.prototype.forEach,g=function(e,t){return h[t]||(h[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),h[t].test(e[s]("class")||"")&&h[t]},v=function(e,t){g(e,t)||e.setAttribute("class",(e[s]("class")||"").trim()+" "+t)},b=function(e,t){var n;(n=g(e,t))&&e.setAttribute("class",(e[s]("class")||"").replace(n," "))},y=function(e,t,n){var i=n?o:"removeEventListener";n&&y(e,t),f.forEach(function(n){e[i](n,t)})},w=function(e,n,i,r,a){var o=t.createEvent("CustomEvent");return o.initCustomEvent(n,!r,!a,i||{}),e.dispatchEvent(o),o},x=function(t,i){var r;!a&&(r=e.picturefill||n.pf)?r({reevaluate:!0,elements:[t]}):i&&i.src&&(t.src=i.src)},C=function(e,t){return(getComputedStyle(e,null)||{})[t]},T=function(e,t,i){for(i=i||e.offsetWidth;i<n.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},S=function(){var e,n,i=[],r=function(){var t;for(e=!0,n=!1;i.length;)t=i.shift(),t[0].apply(t[1],t[2]);e=!1};return function(a){e?a.apply(this,arguments):(i.push([a,this,arguments]),n||(n=!0,(t.hidden?p:u)(r)))}}(),k=function(e,t){return t?function(){S(e)}:function(){var t=this,n=arguments;S(function(){e.apply(t,n)})}},_=function(e){var t,n=0,i=999,a=function(){t=!1,n=r.now(),e()},o=c?function(){c(a,{timeout:i}),999!==i&&(i=999)}:k(function(){p(a)},!0);return function(e){var a;(e=!0===e)&&(i=66),t||(t=!0,a=125-(r.now()-n),0>a&&(a=0),e||9>a&&c?o():p(o,a))}},E=function(e){var t,n,i=function(){t=null,e()},a=function(){var e=r.now()-n;99>e?p(a,99-e):(c||i)(i)};return function(){n=r.now(),t||(t=p(a,99))}},A=function(){var a,u,c,f,h,T,A,L,$,D,O,P,M,B,R,z=/^img$/i,j=/^iframe$/i,N="onscroll"in e&&!/glebot/.test(navigator.userAgent),H=0,W=0,F=-1,U=function(e){W--,e&&e.target&&y(e.target,U),(!e||0>W||!e.target)&&(W=0)},G=function(e,n){var r,a=e,o="hidden"==C(t.body,"visibility")||"hidden"!=C(e,"visibility");for($-=n,P+=n,D-=n,O+=n;o&&(a=a.offsetParent)&&a!=t.body&&a!=i;)(o=(C(a,"opacity")||1)>0)&&"visible"!=C(a,"overflow")&&(r=a.getBoundingClientRect(),o=O>r.left&&D<r.right&&P>r.top-1&&$<r.bottom+1);return o},q=function(){var e,r,o,l,p,d,f,m,g;if((h=n.loadMode)&&8>W&&(e=a.length)){r=0,F++,null==B&&("expand"in n||(n.expand=i.clientHeight>500&&i.clientWidth>500?500:370),M=n.expand,B=M*n.expFactor),B>H&&1>W&&F>2&&h>2&&!t.hidden?(H=B,F=0):H=h>1&&F>1&&6>W?M:0;for(;e>r;r++)if(a[r]&&!a[r]._lazyRace)if(N)if((m=a[r][s]("data-expand"))&&(d=1*m)||(d=H),g!==d&&(A=innerWidth+d*R,L=innerHeight+d,f=-1*d,g=d),o=a[r].getBoundingClientRect(),(P=o.bottom)>=f&&($=o.top)<=L&&(O=o.right)>=f*R&&(D=o.left)<=A&&(P||O||D||$)&&(c&&3>W&&!m&&(3>h||4>F)||G(a[r],d))){if(ee(a[r]),p=!0,W>9)break}else!p&&c&&!l&&4>W&&4>F&&h>2&&(u[0]||n.preloadAfterLoad)&&(u[0]||!m&&(P||O||D||$||"auto"!=a[r][s](n.sizesAttr)))&&(l=u[0]||a[r]);else ee(a[r]);l&&!p&&ee(l)}},V=_(q),X=function(e){v(e.target,n.loadedClass),b(e.target,n.loadingClass),y(e.target,K)},Y=k(X),K=function(e){Y({target:e.target})},Q=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},Z=function(e){var t,i,r=e[s](n.srcsetAttr);(t=n.customMedia[e[s]("data-media")||e[s]("media")])&&e.setAttribute("media",t),r&&e.setAttribute("srcset",r),t&&(i=e.parentNode,i.insertBefore(e.cloneNode(),e),i.removeChild(e))},J=k(function(e,t,i,r,a){var o,l,u,c,h,g;(h=w(e,"lazybeforeunveil",t)).defaultPrevented||(r&&(i?v(e,n.autosizesClass):e.setAttribute("sizes",r)),l=e[s](n.srcsetAttr),o=e[s](n.srcAttr),a&&(u=e.parentNode,c=u&&d.test(u.nodeName||"")),g=t.firesLoad||"src"in e&&(l||o||c),h={target:e},g&&(y(e,U,!0),clearTimeout(f),f=p(U,2500),v(e,n.loadingClass),y(e,K,!0)),c&&m.call(u.getElementsByTagName("source"),Z),l?e.setAttribute("srcset",l):o&&!c&&(j.test(e.nodeName)?Q(e,o):e.src=o),(l||c)&&x(e,{src:o})),S(function(){e._lazyRace&&delete e._lazyRace,b(e,n.lazyClass),(!g||e.complete)&&(g?U(h):W--,X(h))})}),ee=function(e){var t,i=z.test(e.nodeName),r=i&&(e[s](n.sizesAttr)||e[s]("sizes")),a="auto"==r;(!a&&c||!i||!e.src&&!e.srcset||e.complete||g(e,n.errorClass))&&(t=w(e,"lazyunveilread").detail,a&&I.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,W++,J(e,t,a,r,i))},te=function(){if(!c){if(r.now()-T<999)return void p(te,999);var e=E(function(){n.loadMode=3,V()});c=!0,n.loadMode=3,V(),l("scroll",function(){3==n.loadMode&&(n.loadMode=2),e()},!0)}};return{_:function(){T=r.now(),a=t.getElementsByClassName(n.lazyClass),u=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),R=n.hFac,l("scroll",V,!0),l("resize",V,!0),e.MutationObserver?new MutationObserver(V).observe(i,{childList:!0,subtree:!0,attributes:!0}):(i[o]("DOMNodeInserted",V,!0),i[o]("DOMAttrModified",V,!0),setInterval(V,999)),l("hashchange",V,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t[o](e,V,!0)}),/d$|^c/.test(t.readyState)?te():(l("load",te),t[o]("DOMContentLoaded",V),p(te,2e4)),V(a.length>0)},checkElems:V,unveil:ee}}(),I=function(){var e,i=k(function(e,t,n,i){var r,a,o;if(e._lazysizesWidth=i,i+="px",e.setAttribute("sizes",i),d.test(t.nodeName||""))for(r=t.getElementsByTagName("source"),a=0,o=r.length;o>a;a++)r[a].setAttribute("sizes",i);n.detail.dataAttr||x(e,n.detail)}),r=function(e,t,n){var r,a=e.parentNode;a&&(n=T(e,a,n),r=w(e,"lazybeforesizes",{width:n,dataAttr:!!t}),r.defaultPrevented||(n=r.detail.width)&&n!==e._lazysizesWidth&&i(e,a,r,n))},a=function(){var t,n=e.length;if(n)for(t=0;n>t;t++)r(e[t])},o=E(a);return{_:function(){e=t.getElementsByClassName(n.autosizesClass),l("resize",o)},checkElems:o,updateElem:r}}(),L=function(){L.i||(L.i=!0,I._(),A._())};return function(){var t,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};n=e.lazySizesConfig||e.lazysizesConfig||{};for(t in i)t in n||(n[t]=i[t]);e.lazySizesConfig=n,p(function(){n.init&&L()})}(),{cfg:n,autoSizer:I,loader:A,init:L,uP:x,aC:v,rC:b,hC:g,fire:w,gW:T,rAF:S}}}(e,e.document);e.lazySizes=n,"object"==typeof module&&module.exports&&(module.exports=n)}(window),define("lib-app/lazysizes.min",function(){}),define("storymaps/tpl/ui/mobile/MobileFeatureList",["storymaps/common/utils/CommonHelper","lib-build/css!./MobileFeatureList","lib-build/css!lib-app/Swiper/swiper","lib-app/Swiper/swiper","lib-app/lazysizes.min"],function(e){return function(t,n,i,r){function a(){$("#navThemeRight").on("click",function(){u.slideNext()}),$("#navThemeLeft").on("click",function(){u.slidePrev()})}function o(e){0===e&&u.slides.length>1?($("#navThemeLeft").css("display","none"),$("#navThemeRight").css("display","block")):e==u.slides.length-1?($("#navThemeRight").css("display","none"),$("#navThemeLeft").css("display","block")):($("#navThemeLeft").css("display","block"),$("#navThemeRight").css("display","block"))}function s(e){return $.grep($("ul.mobileTileList li"),function(t,n){return t.id=="item"+e})[0]}var l=r,p=!0,u=null,c=$("#mobileThemeBarSlider");app.scrollList;/iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,/(android)/i.test(navigator.userAgent);this.init=function(){u=new Swiper("#mobileThemeSliderContainer",{speed:0,direction:"horizontal"}),u.on("onSlideChangeEnd",function(e){"visible"==$("#mobileThemeBar").css("visibility")&&l.activateLayer(u.activeIndex),o(u.activeIndex),$("#mobileThemeBar").css("background-color",app.layerCurrent.color)}),a()},this.addTheme=function(e,t,n){if(!$(".mobileThemeTitle")[n]){if(t)$("#mobileThemeBar .swiper-container").css("display","none"),$("#navThemeLeft").css("display","none"),$("#navThemeRight").css("display","none"),$("#navThemeRight").css("display","none");else{var i='<div class="mobileThemeTitle swiper-slide"><p style="margin-top: 7px;">'+e.title+"</p></div>";$(c).append(i)}u.update()}},this.showMobileList=function(){$("#mobileFeature").css("visibility","hidden"),$("#mobileSupportedLayersView").css("visibility","hidden"),$("#mobileThemeBarSlider").css("display","block"),$("#mobilePaneList").show(),$("#returnIcon").css("display","none"),$("#returnHiddenBar").css("display","none"),$("#centerMapIconContainer").css("display","none"),$("#navThemeLeft").css("visibility","visible"),$("#navThemeRight").css("visibility","visible"),l.selected&&(l.selected.symbol.setWidth(l.lutIconSpecs.tiny.getWidth()),l.selected.symbol.setHeight(l.lutIconSpecs.tiny.getHeight()),l.selected.symbol.setOffset(l.lutIconSpecs.tiny.getOffsetX(),l.lutIconSpecs.tiny.getOffsetY()),l.selected.draw()),l.selected=null,app.mapTips&&app.mapTips.clean(!0),$(".detailContainer").hide(),u.update()},this.selectTheme=function(e){p?u.slideTo(e,0):(u.slideTo(e,0),$("#mobileTitlePage").css("display","none")),p=!1,$("#mobileThemeBar").css("background-color",app.layerCurrent.color),o(e)},this.buildList=function(t,n,i){0===t&&$("#mobileList").empty();var r=$(i).clone();$(r).data("shortlist-id",n.attributes.shortlist_id);var a=n.attributes,o=a[$.grep(Object.keys(a),function(e){return"thumb_url"==e.toLowerCase()})[0]];o||(o=a[$.grep(Object.keys(a),function(e){return"pic_url"==e.toLowerCase()})[0]]);var s;o&&o.indexOf("sharing/rest/content/items/")>-1&&(o=e.possiblyAddToken(o)),s=$('<div style="height: 75px; max-width: 100px; margin-bottom: 8px;"><div class="mobileTileListImg"></div></div>'),$(s).find(".mobileTileListImg").css("background-image","url("+o+")"),$(s).find(".mobileTileListImg").attr("alt",""),$(r).append(s),$(r).on("tap",app.ui.tilePanel.tile_onClick),$(r).on("click",app.ui.tilePanel.tile_onClick),$("#mobileList").append(r)},this.setColor=function(){app.isInBuilder||$("#mobileThemeBar").css("background-color",app.layerCurrent.color)},this.refreshMobileList=function(){var e,t=!1;app.layerCurrent&&app.layerCurrent.graphics.length&&setTimeout(function(){$.each(app.layerCurrent.graphics,function(n,i){e=s(i.attributes.shortlist_id),app.map.extent.contains(i.geometry)?("none"==$(e).css("display")&&$(e).css("display","block"),t=!0):"none"!=$(e).css("display")&&$(e).css("display","none")}),$("#mobilePaneList").scrollTop(0),t?$(".noFeature").css("display","none"):$(".noFeature").css("display","block")},100)}}}),define("lib-build/css!storymaps/common/mapcontrols/command/MapCommand",[],function(){}),define("storymaps/common/mapcontrols/command/MapCommand",["lib-build/css!./MapCommand","dojo/has","esri/geometry/Point","dojo/on","esri/symbols/PictureMarkerSymbol","esri/layers/GraphicsLayer","esri/graphic","esri/config"],function(e,t,n,i,r,a,o,s){return function(e,l,p,u){function c(t){if(t)$(e.container).find(".mapCommandHomeBtn").addClass("loading"),m=Date.now();else{var n=Date.now()-m,i=0;n<450&&(i=450-n),setTimeout(function(){$(e.container).find(".mapCommandHomeBtn").removeClass("loading"),m=0},i)}}function d(){console.log("getDeviceLocation");var t=!1;setTimeout(function(){t||$(e.container).find(".mapCommandLocation").addClass("loading")},300),navigator.geolocation.getCurrentPosition(function(i){t=!0,$(e.container).find(".mapCommandLocation").removeClass("loading");var r=new n(i.coords.longitude,i.coords.latitude);if(p&&"function"==typeof p&&p(!0,r,i),102100!=e.spatialReference.wkid&&4326!=e.spatialReference.wkid)return void s.defaults.geometryService.project([r],e.spatialReference,function(e){e&&e[0]&&f(e[0])});f(r)},function(e){t=!0,h(e)},{enableHighAccuracy:!0,maximumAge:12e4,timeout:1e4}),setTimeout(function(){t||h()},1e4)}function f(e){b.clear(),b.add(new o(e,v)),setTimeout(function(){$("#locateLayer_layer image").fadeOut({duration:800})},1e4)}function h(t){console.log("getDeviceLocationError",t),$(e.container).find(".mapCommandLocation").removeClass("loading"),p(!1,null)}var m=0,g=$('<div class="esriSimpleSliderIncrementButton"><div class="mapCommandHomeBtn" title="'+(i18n.viewer.mapFromCommon?i18n.viewer.mapFromCommon.home:"Zoom Home")+'" role="button" tabindex="0"></div></div>'),v=new r("resources/common/icons/mapcommand-location-marker.png",21,21),b=new a({id:"locateLayer"});g.on("click keydown",function(t){"keydown"===t.type&&32!==t.keyCode&&13!==t.keyCode||0!==m&&$("body").hasClass("mobile-view")||(l&&"function"==typeof l?l(e._params.extent):e.setExtent(e._params.extent))}),$(e.container).find(".esriSimpleSlider div:nth-child(1)").after(g),i(e,"update-start",function(){0===m&&c(!0)}),i(e,"update-end",function(){c(!1)}),this.setMobile=function(t){$(".esriSimpleSlider, .mapCommandHomeBtn",e.container).toggleClass("touch",!!t)},this.destroy=function(){$(e.container).find(".esriSimpleSliderIncrementButton").remove(),$(e.container).find(".mapCommandLocation").remove()},this.startLoading=function(){c(!0)},this.stopLoading=function(){c(!1)},this.enableLocationButton=function(t){$(e.container).toggleClass("has-locator",t),$(".mapCommandLocation",e.container).toggleClass("hidden",!t)},navigator&&navigator.geolocation&&window.top===window.self&&window.location.protocol.search("https")>=0&&($(".esriSimpleSlider",e.container).after('<div class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"></div>'),$(".mapCommandLocation",e.container).click(d),this.enableLocationButton(u),e.addLayer(b)),this.setMobile(app.appCfg.mapCommandLargerTouch||void 0===app.appCfg.mapCommandLargerTouch&&t("touch"))}}),define("lib-build/tpl!storymaps/common/mapcontrols/legend/Legend",[],function(){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="legendContainer mapControls">\n\t<button class="titleBtn">\n\t\t<span class="collapseBtn" aria-hidden="true">\n\t\t\t<div class="glyphicon glyphicon-chevron-down"></div>\n\t\t\t<div class="glyphicon glyphicon-chevron-up"></div>\n\t\t</span>\n\t\t'+(null==(__t=title)?"":__t)+'\n\t</button>\n\n\t<div class="content">\n\t\t<div class="legendDijitContainer"></div>\n\t\t',isInBuilder&&(__p+='\n\t\t\t<div class="settingsGear glyphicon glyphicon-wrench"></div>\n\t\t\t<div class="settingsOverlay">\n\t\t\t\t<div class="settings-title">'+(null==(__t=settings)?"":__t)+'</div>\n\t\t\t\t<div class="settings-content">\n\t\t\t\t\t\x3c!-- Open by default --\x3e\n\t\t\t\t\t<div class="checkbox">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" class="expandStartup" />\n\t\t\t\t\t\t\t'+(null==(__t=openDefault)?"":__t)+"\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),__p+="\n\t</div>\n</div>\n";return __p}}),define("lib-build/css!storymaps/common/mapcontrols/legend/Legend",[],function(){}),define("lib-build/css!storymaps/common/mapcontrols/Common",[],function(){}),define("storymaps/common/mapcontrols/legend/Legend",["lib-build/tpl!./Legend","lib-build/css!./Legend","lib-build/css!../Common","storymaps/common/utils/CommonHelper","esri/dijit/Legend","esri/arcgis/utils","dojo/topic"],function(e,t,n,i,r,a,o){return function(t,n,s){function l(){m.find(".legendDijitContainer").html('<div class="legendDijit"></div>'),f=new r({map:t.map,layerInfos:a.getLegendLayers(t)},m.find(".legendDijit")[0]),f.startup(),o.publish("story-created-legend",t.itemInfo.item.id)}function p(){f&&f.destroy(),f=null}function u(){m.find(".legendContainer").toggleClass("collapsed"),m.find(".settingsOverlay").hide()}function c(){h.openByDefault=m.find(".expandStartup").prop("checked"),o.publish("BUILDER_INCREMENT_COUNTER",1)}var d=this,f=null,h=null,m=s.container,g={isInBuilder:n,title:i18n.viewer.mapFromCommon.legend};n&&(g.settings=i18n.commonMapControls.common.settings,g.openDefault=i18n.commonMapControls.common.openDefault),m.html(e(g)),this.toggle=function(e){m.toggle(!!e),e&&!f?l():e||p()},this.toggleExpanded=function(e){m.find(".legendContainer").toggleClass("collapsed",!e)},this.setColors=function(e){m.find(".legendContainer").css({backgroundColor:e.mapControls,color:e.text}),m.find(".titleBtn").css("color",e.softText),m.find(".settingsGear, .collapseBtn").css("color",e.softBtn),i.addCSSRule(".mainMediaContainer .legendContainer ::-webkit-scrollbar-thumb { background-color:"+e.header+"; }","MapControlLegendDropdownScrollbar")},this.updatePlacementSettings=function(e){m.find(".legendContainer").toggleClass("isInlined","panel"==e.mode),e.container[0]!=m[0]&&(e.container.html(m.find(".legendContainer")),m=e.container)},this.setSettings=function(e){h=e,m.find(".expandStartup").prop("checked",h.openByDefault)},function(){m.find(".titleBtn").click(u),m.find(".settingsGear").click(function(){m.find(".settingsOverlay").is(":visible")?m.off("mouseleave"):m.mouseleave(function(){m.find(".settingsOverlay").toggle(),m.off("mouseleave"),m.find(".content").removeClass("settingsOpen")}),m.find(".settingsOverlay").toggle(),m.find(".content").toggleClass("settingsOpen")}),m.find(".expandStartup").change(c),d.updatePlacementSettings(s)}()}}),define("lib-build/tpl!storymaps/common/mapcontrols/overview/Overview",[],function(){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="overviewContainer mapControls">\n\t<button class="titleBtn">\n\t\t<span class="collapseBtn" aria-hidden="true">\n\t\t\t<div class="glyphicon glyphicon-chevron-down"></div>\n\t\t\t<div class="glyphicon glyphicon-chevron-up"></div>\n\t\t</span>\n\t\t'+(null==(__t=title)?"":__t)+'\n\t</button>\n\n\t<div class="content">\n\t\t<div class="overviewMapContainer">\n\t\t\t\x3c!-- Map is injected here --\x3e\n\t\t</div>\n\t\t',isInBuilder&&(__p+='\n\t\t\t<div class="settingsGear glyphicon glyphicon-wrench"></div>\n\t\t\t<div class="settingsOverlay">\n\t\t\t\t<div class="settings-title">'+(null==(__t=settings)?"":__t)+'</div>\n\t\t\t\t<div class="settings-content">\n\t\t\t\t\t\x3c!-- Open by default --\x3e\n\t\t\t\t\t<div class="checkbox">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="checkbox" class="expandStartup" />\n\t\t\t\t\t\t\t'+(null==(__t=openDefault)?"":__t)+'\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Basemap --\x3e\n\t\t\t\t\t<div class="btn-group dropup basemap-dropdown">\n\t\t\t\t\t\t<button type="button" class="btn btn-default btn-sm dropdown-toggle basemapBtn" data-toggle="dropdown">\n\t\t\t\t\t\t\t'+(null==(__t=basemapGalleryBtnLabel)?"":__t)+' <span class="caret"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="dropdown-menu basemaps dropdown-menu-form pull-right" role="menu"></ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="basemapGallery"></div>\n\n\t\t\t\t\t\x3c!-- Expand factor --\x3e\n\t\t\t\t\t<div class="spinnerLabel">\n\t\t\t\t\t\t<label for="expandFactorSpinner">'+(null==(__t=expandFactorLabel)?"":__t)+'</label>\n\t\t\t\t\t\t<a class="locateBtnHelp" data-original-title="" title="">\n\t\t\t\t\t\t\t<img src="resources/tpl/builder/icons/builder-help.png" style="vertical-align: -5px;">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="input-group expandFactorSpinner">\n\t\t\t\t\t\t<input type="text" class="form-control input-small input-xs" id="expandFactorSpinner" value="2">\n\t\t\t\t\t\t<div class="input-group-btn-vertical">\n\t\t\t\t\t\t\t<button class="btn btn-default btn-xs"><i class="glyphicon glyphicon-chevron-up"></i></button>\n\t\t\t\t\t\t\t<button class="btn btn-default btn-xs"><i class="glyphicon glyphicon-chevron-down"></i></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),__p+="\n\t</div>\n</div>\n";return __p}}),
define("lib-build/css!storymaps/common/mapcontrols/overview/Overview",[],function(){}),define("storymaps/common/mapcontrols/overview/Overview",["lib-build/tpl!./Overview","lib-build/css!./Overview","lib-build/css!../Common","esri/dijit/OverviewMap","esri/dijit/BasemapGallery","esri/layers/ArcGISTiledMapServiceLayer","esri/arcgis/utils","dojo/Deferred","dojo/dom","dojo/on","dojo/topic"],function(e,t,n,i,r,a,o,s,l,p,u){return function(t,n,r){function a(e){n.find(".overviewMapContainer").html('<div class="overviewMap"></div>'),p=new i({map:t,visible:!0,color:"transparent",opacity:1},n.find(".overviewMap")[0]),p.startup();var r=e?e.header:d;r&&n.find(".ovwHighlight").css("border","3px solid "+r)}function o(){p&&p.destroy(),p=null}function s(){n.find(".overviewContainer").toggleClass("collapsed"),n.find(".settingsOverlay").hide()}function l(){c.openByDefault=n.find(".expandStartup").prop("checked"),u.publish("BUILDER_INCREMENT_COUNTER",1)}var p=null,c=null,d=null,f={isInBuilder:r,title:i18n.viewer.mapFromCommon.overview,overlayHeader:"",basemapGalleryBtnLabel:"",expandFactorLabel:""};r&&(f.settings=i18n.commonMapControls.common.settings,f.openDefault=i18n.commonMapControls.common.openDefault,f.basemapGalleryBtnLabel=i18n.commonMapControls.overview.basemapGalleryBtnLabel,f.expandFactorLabel=i18n.commonMapControls.overview.expandFactorLabel),n.append(e(f)),this.toggle=function(e,t){n.toggle(!!e),e&&!p?a(t):e||o()},this.toggleExpanded=function(e){n.find(".overviewContainer").toggleClass("collapsed",!e)},this.setColors=function(e){d=e.mapControls,n.find(".overviewContainer").css({backgroundColor:d,color:e.text}),n.find(".titleBtn").css("color",e.softText),n.find(".settingsGear, .collapseBtn").css("color",e.softBtn),n.find(".ovwHighlight").css("border","3px solid "+d)},this.setSettings=function(e){c=e,n.find(".expandStartup").prop("checked",c.openByDefault)},function(){n.find(".titleBtn").click(s),n.find(".settingsGear").click(function(){n.find(".settingsOverlay").is(":visible")?n.off("mouseleave"):n.mouseleave(function(){n.find(".settingsOverlay").toggle(),n.off("mouseleave")}),n.find(".settingsOverlay").toggle()}),n.find(".expandStartup").change(l)}()}}),define("lib-build/tpl!storymaps/common/mapcontrols/geocoder/Geocoder",[],function(){return function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="geocoderBtn">\n\t<div class="geocoderContainer"></div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/common/mapcontrols/geocoder/Geocoder",[],function(){}),define("storymaps/common/mapcontrols/geocoder/Geocoder",["lib-build/tpl!./Geocoder","lib-build/css!./Geocoder","../../utils/CommonHelper"],function(e,t,n){return function(t,i,r,a){function o(){var e=$(t.container).find(".geocoderBtn");s=n.createGeocoder({map:t,domNode:e.find(".geocoderContainer")[0],enableButtonMode:!0,searchOptions:a}).then(function(t){p=t,e.find(".esriGeocoderContainer input, .esriGeocoderSearch").attr("tabindex","-1")})}var s,l=this,p=null;this.toggle=function(e){if(!app.isInBuilder){var n=app.data.getWebAppData();if(n.getMapOptions&&(!n.getMapOptions().geocoder||!n.getMapOptions().geocoder.enable))return;if(n.getGeneralOptions&&!n.getGeneralOptions().geocoder)return}var i=$(t.container).find(".geocoderBtn");p||s&&!s.isRejected()||o(),$(t.container).toggleClass("has-geocoder",e),i.toggle(e)},function(){$(t.container).find(".esriSimpleSlider").last().after(e({})),o(),l.toggle(r)}()}}),define("lib-build/css!storymaps/common/utils/SocialSharing",[],function(){}),define("lib-build/css!storymaps/common/ui/loadingIndicator/LoadingIndicator",[],function(){}),define("lib-build/css!storymaps/tpl/ui/Common",[],function(){}),define("lib-build/css!storymaps/tpl/ui/mobile/Common",[],function(){}),define("lib-build/css!storymaps/tpl/ui/Responsive",[],function(){}),define("lib-build/css!storymaps/tpl/ui/desktop/MultiTips",[],function(){}),define("storymaps/tpl/core/MainView",["lib-build/css!./MainView","./Config","./Data","./WebApplicationData","./Helper","./arcgis-html-sanitizer","../ui/desktop/TestPanel","../ui/desktop/TilePanel","../ui/desktop/DetailPanel","../ui/desktop/NavBar","../ui/desktop/MultiTips","storymaps/common/ui/autoplay/Autoplay","../ui/mobile/MobileIntro","../ui/mobile/MobileFeatureList","storymaps/common/mapcontrols/command/MapCommand","storymaps/common/mapcontrols/legend/Legend","storymaps/common/mapcontrols/overview/Overview","storymaps/common/mapcontrols/geocoder/Geocoder","lib-build/css!storymaps/common/ui/Modal.css","lib-build/css!storymaps/common/utils/SocialSharing.css","lib-build/css!storymaps/common/ui/loadingIndicator/LoadingIndicator.css","storymaps/common/utils/CommonHelper","dojo/has","dojo/topic","dojo/on","dojo/dom","dojo/DeferredList","dojo/_base/lang","esri/arcgis/utils","esri/geometry/Point","esri/geometry/screenUtils","esri/geometry/Extent","esri/dijit/Search","esri/SpatialReference","esri/tasks/query","esri/graphic","esri/symbols/SimpleMarkerSymbol","lib-build/css!../ui/Common","lib-build/css!../ui/mobile/Common","lib-build/css!../ui/Responsive","lib-build/css!../ui/desktop/MultiTips"],function(e,t,n,i,r,a,o,s,l,p,u,c,d,f,h,m,g,v,b,y,w,x,C,T,S,k,E,A,I,L,D,O,P,M,B,R,z){return function(e){function o(e){var t=e.itemInfo.itemData,n=t.applicationProperties,i=n&&n.viewing&&n.viewing.search,r=t.operationalLayers||[];if(i)return i.layers.forEach(function(e){_.find(r,function(t){if(t.id===e.id)return e.name=t.name,e.title=t.title,!0})}),i}function m(e){return $.each(e,function(e,t){t.attributes=app.sanitizer.sanitize(t.attributes)}),e}function g(e){var t,n=app.map.getLayer(app.data.getWebAppData().getShortlistLayerId()),i=e.fields;if($.each(i,function(e,n){"tab_name"==n.name.toLowerCase()&&(t=!0)}),t){var r=new z,a=new esri.layers.GraphicsLayer({id:app.data.getWebAppData().getShortlistLayerId()+"_copy"});app.data.getWebAppItem().created>app.cfg.HTML_SANITIZER_DATE&&(e.features=m(e.features)),$.each(e.features,function(e,t){var n=new R(t.geometry,r,t.attributes);a.add(n)}),layerFound=!0,a.fields=i,app.data.getWebAppData().setShortlistLayerId(a.id),app.map.removeLayer(n),app.map.addLayer(a),b(a)}}function b(e){var t=[],n=[],r=e.fields,a=!1,o=!1,s=null;if($.each(r,function(e,t){"name"==t.name.toLowerCase()&&(a=!0),"pic_url"==t.name.toLowerCase()&&(o=!0),s||"number"!=t.name.toLowerCase()||(s=t.name),"placenumsl"==t.name.toLowerCase()&&(s=t.name)}),!a||!o){if(app.isInBuilder){var l=i18n.builder.migration.migrationPattern.badData;l+='  (<a href="http://links.esri.com/storymaps/shortlist_layer_template" target="_blank" download="">'+i18n.builder.migration.migrationPattern.downloadTemplate+"</a>)",$("#fatalError .error-msg").html(l),$("#fatalError").show()}return!1}app.data.setShortlistLayerId(e.id),app.data.getWebAppData().setShortlistLayerId(e.id),e.setScaleRange(0,0),e.on("mouse-over",X.layer_onMouseOver),e.on("mouse-out",X.layer_onMouseOut),e.on("click",X.layer_onClick);var p=[];$.each(app.map.graphicsLayerIds,function(t,n){n!==e.id&&p.push(app.map.getLayer(n))}),$.each(p,function(e,t){t.on("click",D)}),app.isInBuilder&&(app.map.on("pan-start",function(){app.ui.mainView.mapIsPanning=!1}),app.map.on("pan-end",function(){setTimeout(function(){app.ui.mainView.mapIsPanning=!1},800)}),app.map.on("zoom-start",function(){app.ui.mainView.mapIsZooming=!1}),app.map.on("zoom-end",function(){setTimeout(function(){app.ui.mainView.mapIsZooming=!1},800)})),app.map.on("click",function(e){X.mapIsPanning||X.mapIsZooming||app.mapTips&&(e.graphic?X.selected&&(X.selected.hidden=!1):(app.mapTips.clean(!0),X.selected&&!app.isInBuilder&&(X.selected.hidden=!0)))}),app.map.reorderLayer(e,app.map.graphicsLayerIds.length),$.each(e.graphics,function(i,r){var a=e.graphics[i].attributes,o=a[$.grep(Object.keys(a),function(e){return"tab_name"==e.toLowerCase()})[0]];if(o){if(n.indexOf(o)<0){n.push(o),t.push({features:[],extent:null,title:o});var l=t.length-1;t[l].id=l;var p;if(app.data.getWebAppData().getTabs()[l]&&app.data.getWebAppData().getTabs()[l].color)p=app.data.getWebAppData().getTabs()[l].color;else{var u=l;u>7&&(u%=7);var c=app.cfg.COLOR_ORDER.split(",");p=$.grep(app.cfg.COLOR_SCHEMES,function(e){return e.name.toLowerCase()==$.trim(c[u].toLowerCase())})[0].color}t[t.length-1].color=p,app.data.setStory(l,o,p)}$.grep(t,function(e,n){e.title==o&&(r.attributes.tab_id=n,r.attributes.shortlist_id=t[n].features.length+1,r.attributes.number=s?r.attributes[s]:t[n].features.length+1,e.features.push(r))})}}),s&&($.each(e.graphics,function(e,t){t.attributes.number=t.attributes[s]}),e.graphics.sort(N));var u={header:app.data.getWebAppData().getThemeOptions().headerColor,tabText:"#d8d8d8",tab:"#666",tabTextActive:"#fff",tabActive:app.data.getStory()[0].color,tabTextHover:"#fff",tabHover:"#666"};app.ui.navBar.init(t,0,u,app.data.getWebAppData()),1!=t.length||app.isInBuilder||$(".entries").css("display","none"),$.each(t,function(e,n){X.buildLayer(n.features,n.color),app.ui.mobileIntro.fillList(e,n,t);var i=!1;1==t.length&&(i=!0,$("#navThemeLeft").addClass("hideButtons"),$("#navThemeRight").addClass("hideButtons")),app.ui.mobileFeatureList.addTheme(n,i,e)}),X.activateLayer(0,t),$("#basemapChooser").remove(),q.appInitComplete(i),app.data.getWebAppData().getIsExternalData()&&app.isWebMapFirstSave&&setTimeout(function(){q.displayApp()},0)}function y(){if($.isEmptyObject(app.data.getWebAppData().getThemeOptions())&&app.data.getWebAppData().setDefaultThemeOptions(),app.data.getWebAppData().getIsExternalData()){var t=app.data.getWebMap().item.extent,n=new O(t[0][0],t[0][1],t[1][0],t[1][1],new M({wkid:4326}));app.data.getWebAppData().setMapExtent(n)}if(app.data.getWebAppData().getGeneralOptions().bookmarks&&app.maps[app.data.getWebAppData().getWebmap()].response.itemInfo.itemData.bookmarks&&app.maps[app.data.getWebAppData().getWebmap()].response.itemInfo.itemData.bookmarks.length&&app.ui.navBar.initBookmarks(),app.data.getWebAppData().getWebmap()&&(app.mapItem=app.maps[app.data.getWebAppData().getWebmap()].response.itemInfo),app.data.getWebAppData().getGeneralOptions().geocoder&&!app.isInBuilder&&app.maps[app.data.getWebAppData().getWebmap()].geocoder.toggle(!0),app.map){setTimeout(function(){if(app.data.getWebAppData().getMapExtent())setTimeout(function(){var e=app.map.on("extent-change",function(){e.remove(),q.displayApp()}),t=new O(app.data.getWebAppData().getMapExtent());102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?t=esriConfig.defaults.geometryService.project([t],app.map.spatialReference,function(e){t=e[0],app.map.setExtent(t,!0)}):app.map.setExtent(t,!0)},500);else if(app.data.getWebAppData().getTabs()&&app.data.getWebAppData().getTabs()[0]&&app.data.getWebAppData().getTabs()[0].extent){var e=new O(app.data.getWebAppData().getTabs()[0].extent);app.appCfg.mapExtentFit=!0;var t=app.map.on("extent-change",function(){t.remove(),q.displayApp()});setTimeout(function(){102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?e=esriConfig.defaults.geometryService.project([e],app.map.spatialReference,function(t){e=t[0],app.map.setExtent(e,!0)}):app.map.setExtent(e,!0)},500)}else if(app.isDirectCreationFirstSave){var t=app.map.on("extent-change",function(){t.remove(),q.displayApp()});app.map.centerAndZoom([0,0],3)}else{var t=app.map.on("extent-change",function(){t.remove(),q.displayApp()});setTimeout(function(){app.map.setExtent(app.map._params.extent)},500)}app.map.on("extent-change",function(){setTimeout(function(){app.data.getWebAppData().getGeneralOptions().filterByExtent&&!app.isInBuilder&&(app.ui.tilePanel.refreshList(),app.ui.mobileFeatureList.refreshMobileList(),app.ui.detailPanel.loaded&&app.ui.detailPanel.refreshSlides())},0)})},750),app.ui.mobileIntro.setTitle();var r=app.data.getWebAppData().getThemeOptions().headerColor;$("#header").css("background-color",r),$("#mobileIntro").css("background-color",r),i.getTabs()&&$.each(i.getTabs(),function(e,t){app.data.setStory(e,t.title,t.color,t.extent)});var a=$.grep(app.map.graphicsLayerIds,function(e){return e.split("_").slice(0,-1).join("_")==i.getShortlistLayerId()?e:e==i.getShortlistLayerId()&&e});app.data.setShortlistLayerId(a[0]),app.map.loaded?w():app.map.on("load",function(){w()}),S.once(app.map,"update-end",function(){w()}),e&&e.storyDataReady()}}function w(){if(app.data.getWebAppData().getIsExternalData())return void X.processExternalData();app.map.resize(),app.map.on("click",function(e){X.mapIsPanning||X.mapIsZooming||app.mapTips&&(e.graphic?X.selected&&(X.selected.hidden=!1):(app.mapTips.clean(!0),X.selected&&!app.isInBuilder&&(X.selected.hidden=!0)))});var e=[];if($.each(i.getTabs(),function(t,n){e.push({features:[],title:n.title,color:n.color,extent:n.extent})}),!app.data.getWebAppData().getIsExternalData()){var t=app.map.getLayer(app.data.getWebAppData().getShortlistLayerId())?app.data.getWebAppData().getShortlistLayerId():app.data.getWebAppData().getShortlistLayerId()+"_0";app.data.getWebAppData().setShortlistLayerId(t)}if(app.data.getWebAppItem().created>app.cfg.HTML_SANITIZER_DATE){app.map.getLayer(app.data.getWebAppData().getShortlistLayerId()).graphics;m(app.map.getLayer(app.data.getWebAppData().getShortlistLayerId()).graphics)}var n=app.map.getLayer(app.data.getWebAppData().getShortlistLayerId());n.setScaleRange(0,0),$.each(n.graphics,function(t,n){if(n.attributes.locationSet&&n.attributes.name&&"Unnamed Place"!=n.attributes.name&&n.attributes.pic_url&&!app.isInBuilder&&e[n.attributes.tab_id].features.push(n),app.data.getWebAppData().getIsExternalData()){var i=n.attributes,r=i[$.grep(Object.keys(i),function(e){return"tab_name"==e.toLowerCase()})[0]];$.grep(e,function(e,t){e.title==r&&(n.attributes.tab_id=t)}),e[n.attributes.tab_id].features.push(n),n.attributes.shortlist_id=e[n.attributes.tab_id].features.length}else app.isInBuilder&&e[n.attributes.tab_id].features.push(n)}),n.on("click",X.layer_onClick),n.on("mouse-over",X.layer_onMouseOver),n.on("mouse-out",X.layer_onMouseOut);var r=[];if($.each(app.map.graphicsLayerIds,function(e,t){t!==n.id&&r.push(app.map.getLayer(t))}),$.each(r,function(e,t){t.on("click",D)}),e.length>1||app.isInBuilder&&!app.isDirectCreationFirstSave){if($("#divStrip").height("35px"),$.each(e,function(t,n){app.ui.tilePanel.createTab(t,n),app.ui.mobileIntro.fillList(t,n,e),app.ui.mobileFeatureList.addTheme(n,null,t);var i=t;i>7&&(i%=7);var r=app.cfg.COLOR_ORDER.split(","),a=$.grep(app.cfg.COLOR_SCHEMES,function(e){return e.name.toLowerCase()==$.trim(r[i].toLowerCase())})[0],o=n.color||a.color;if(X.buildLayer(n.features.sort(N),o),app.isInBuilder){app.data.setStory(t,n.title,a.color,n.extent);var s=A.clone(app.data.getStory());$.each(s,function(e,t){t.title=n.title,t.color=o}),app.detailPanelBuilder.addDetailPanelSwiper(t)}app.data.setStory(t,n.title,n.color)}),!app.isDirectCreationFirstSave&&!app.data.getWebAppData().getIsExternalData()){var a={header:app.data.getWebAppData().getThemeOptions().headerColor,tabText:"#d8d8d8",tab:"#666",tabTextActive:"#fff",tabActive:"#999",tabTextHover:"#fff",tabHover:"#666"};app.ui.navBar.init(e,0,a,i),app.ui.tilePanel.setTabClick()}}else{if(e.length<1)return!1;$.each(e,function(e,t){app.ui.tilePanel.createTab(e,t),app.ui.mobileFeatureList.addTheme(t,!0,e);var n=app.cfg.COLOR_ORDER.split(","),i=$.grep(app.cfg.COLOR_SCHEMES,function(t){return t.name.toLowerCase()==$.trim(n[e].toLowerCase())})[0],r=t.color||i.color;if(X.buildLayer(t.features.sort(N),r),app.isInBuilder){app.data.setStory(e,t.title,i.color);var a=A.clone(app.data.getStory());$.each(a,function(e,n){n.title=t.title,n.color=r}),app.detailPanelBuilder.addDetailPanelSwiper(e)}}),$(".tab").css("display","none"),$("#mobileIntro").append("<br><hr></hr>"),$("#mobileIntro").append('<ul id="mobileThemeList" class="mobileTileList">');var o=$('<li class="mobileTitleTheme" onclick="app.ui.mobileIntro.selectMobileTheme(0)">').append('<div class="startButton"> '+i18n.viewer.general.start+"</div>");$("#mobileThemeList").append(o),$("#navThemeLeft").addClass("hideButtons"),$("#navThemeRight").addClass("hideButtons"),$("#nav-bar").show(),$("#nav-bar .entries").hide()}if(q.handleWindowResize(),X.activateLayer(0),app.isInBuilder&&app.detailPanelBuilder.buildSlides(),$(".entryLbl").css("outline-style","none"),$("#zoomToggle").css("visibility","visible"),$("#whiteOut").fadeOut("slow"),$("body").width()>768){var s=$("body").height(),l=0;$(".mainViewAboveMap, .mainViewBelowMap").each(function(e,t){var n=$(t);l+=n.is(":visible")?n.outerHeight():0}),$("#paneLeft").height(s-l-25-$("#tabs").height()+(app.embedBar&&app.embedBar.initiated?26:0)),$("#paneLeft").css("top",$("#divStrip").height()),$("#map").height($("#contentPanel").height()),$("#map").css("top",0),$(".tilelist").height($("#paneLeft").height()-(app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?70:25)-(app.embedBar&&app.embedBar.initiated?5:0))}else app.ui.mobileIntro.resizeMobileElements();q.appInitComplete(i),$("body").on("mousedown","*",function(e){($(this).is(":focus")||$(this).is(e.target))&&"none"==$(this).css("outline-style")&&($(this).css("outline","none").on("blur",function(){$(this).off("blur").css("outline","")}),$(this).parents("#bookmarksToggle").length&&$(this).parents("#bookmarksToggle").css("outline","none").on("blur",function(){$(this).off("blur").css("outline","")}))}),app.map.disableKeyboardNavigation(),$("body").keypress(function(e){13==e.which&&$(document.activeElement).click(),43==e.which&&(app.map.setLevel(app.map.getLevel()+1),$("#zoomIn").focus(),X.hideBookmarks()),45==e.which&&(app.map.setLevel(app.map.getLevel()-1),$("#zoomOut").focus(),X.hideBookmarks())}),app.map.reorderLayer(app.data.getWebAppData().getShortlistLayerId(),app.map.graphicsLayerIds.length-1)}function k(e,t){var n=4*t,i=e.data;return[i[n],i[n+1],i[n+2],i[n+3]]}function E(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function L(e,t,n){return new esri.symbol.PictureMarkerSymbol(t.toDataURL(),n.getWidth(),n.getHeight()).setOffset(n.getOffsetX(),n.getOffsetY())}function D(e){X.selected=null,$("#mobileTitlePage").css("display","none");var t=$(".esriPopup")[0];app.map.infoWindow.on("set-features",function(){app.ui.mainView.selected||($(".esriPopup").removeClass("app-hidden"),$(t).show())}),"small"!=app.ui.mobileIntro.screenSize&&app.mapTips&&app.mapTips.clean()}function P(){function t(){if($.each(l,function(e,t){"esriGeometryPoint"==t.geometryType&&-1==t.id.toLowerCase().indexOf("mapnotes")&&t.graphics.length&&r.push(t)}),r.length){if(f)return;$.each(r,function(e,t){var i=n.indexOf(t);n.splice(i,1)}),e.openMigrationPopup(r,n),$("#loadingIndicator").hide(),clearTimeout(app.loadingTimeout),app.loadingTimeout=null}else{var t={};if(e.initPopupComplete(t),app.detailPanelBuilder.init(app.ui.mainView,e),app.data.getWebAppData().setTitle(app.data.getResponse().itemInfo.item.title),app.data.getWebAppData().setSubtitle(app.data.getResponse().itemInfo.item.description),app.ui.headerDesktop.setTitleAndSubtitle(app.data.getWebAppData().getTitle(),app.data.getWebAppData().getSubtitle()),app.data.getWebAppData().setDefaultThemeOptions(),app.data.getResponse().itemInfo.itemData.bookmarks&&app.data.getResponse().itemInfo.itemData.bookmarks.length){var a={extentMode:"default",numberedIcons:!1,filterByExtent:!0,bookmarks:!0,bookmarksAlias:"Zoom"};app.data.getWebAppData().setGeneralOptions(a),app.ui.navBar.initBookmarks()}app.addFeatureBar.addLayer(),e.storyDataReady(),q.appInitComplete(i),q.displayApp()}}var n=[],r=[];$.each(app.map.graphicsLayerIds,function(e,t){n.push(app.map.getLayer(t))});var a={bookmarks:!1,bookmarksAlias:app.cfg.BOOKMARKS_ALIAS,extentMode:"customHome",filterByExtent:!0,numberedIcons:!1,geocoder:!1,locateButton:!1};app.data.getWebAppData().setGeneralOptions(a),$.each(app.map.layerIds,function(e,t){var i=app.data.getResponse().itemInfo.itemData.baseMap.baseMapLayers;$.grep(i,function(e){return e.id==t})[0]||n.push(app.map.getLayer(t))});var o,s,l=[],p=[],u=null;$.each(n,function(e,t){s=t.layerType?t.layerType:t.type,"esriGeometryPoint"==t.geometryType&&-1==t.id.toLowerCase().indexOf("mapnotes")&&t.graphics.length&&r.push(t),"esriGeometryPoint"!=t.geometryType||!t.url||"ArcGISFeatureLayer"!==s&&"Feature Layer"!==s||(o=!0,u=t,l.push(t),p.push(e))});var c=!1,d=!1,f=!1;if(!c){c=!0,l.length;var h=!1;app.map.on("update-end",function(){h||(h=!0,t())});var m=app.map.getLayer(app.data.getWebMap().itemData.baseMap.baseMapLayers[0].id);if(m.tileIndexUrl&&m.loaded){if(h)return;h=!0,t()}}var g=app.data.getWebMap().item.extent,v=new O(g[0][0],g[0][1],g[1][0],g[1][1],new M({wkid:4326}));app.map.setExtent(v,!0),app.map._params.extent=new O(JSON.parse(JSON.stringify(app.map.extent.toJson()))),app.data.getWebAppData().setMapExtent(v),$(".builder-share").toggleClass("disabled",!0),app.isWebMapFirstSave=!0;var b=$.grep(l,function(e){return"esriGeometryPoint"==e.geometryType});if(r.length||b.length)l.length||f||(f=!0,$.each(r,function(e,t){var i=n.indexOf(t);n.splice(i,1)}),e.openMigrationPopup(r,n),$("#loadingIndicator").hide(),clearTimeout(app.loadingTimeout),app.loadingTimeout=null);else{var y={};if(e.initPopupComplete(y),app.detailPanelBuilder.init(app.ui.mainView,e),app.data.getWebAppData().setTitle(app.data.getResponse().itemInfo.item.title),app.data.getWebAppData().setSubtitle(app.data.getResponse().itemInfo.item.description),app.ui.headerDesktop.setTitleAndSubtitle(app.data.getWebAppData().getTitle(),app.data.getWebAppData().getSubtitle()),parseInt(app.data.getWebMap().itemData.version)<2.9&&(app.data.getWebMap().itemData.version="2.9"),app.data.getWebMap().itemData.authoringApp="StoryMapShortlist",app.data.getWebMap().itemData.authoringAppVersion=app.version,app.data.getResponse().itemInfo.itemData.bookmarks&&app.data.getResponse().itemInfo.itemData.bookmarks.length){var w={extentMode:"default",numberedIcons:!1,filterByExtent:!0,bookmarks:!0,bookmarksAlias:"Zoom"};app.data.getWebAppData().setGeneralOptions(w),app.ui.navBar.initBookmarks()}q.appInitComplete(i),setTimeout(function(){d||(app.maps[app.data.getResponse().itemInfo.item.id]=X.getMapConfig(app.data.getResponse())),d=!0},app.data.getWebAppData().getAppGeocoders()?0:1e3)}}function j(){if(!i.isBlank()&&i.getWebmap())q.appInitComplete(i);else if(app.isInBuilder&&app.data.getWebAppData().getWebmap()){app.isGalleryCreation=!0;var t=X.loadWebmap(app.data.getWebAppData().getWebmap(),"map");t.then(function(n){app.data.setResponse(n),app.map=t.results[0].map,app.data.setWebMap(t.results[0].itemInfo),e.updateUI(),P()}),q.isProd()?e.showInitPopup():q.portalLogin().then()}else x.getAppID(q.isProd())?app.data.userIsAppOwner()?app.isInBuilder||setTimeout(function(){x.switchToBuilder()},1200):q.initError("notConfiguredDesktop"):app.isInBuilder||q.initError("noLayer");if(e&&!app.data.getWebAppData().getWebmap()){$.isEmptyObject(app.data.getWebAppData().getThemeOptions())&&app.data.getWebAppData().setDefaultThemeOptions();var t=X.loadWebmap(e.buildWebMap(),"map");t.then(function(n){app.data.setResponse(n),app.map=t.results[0].map,app.data.setWebMap(t.results[0].itemInfo);var r=n.itemInfo.item.id.length?n.itemInfo.item.id:n.map.id;e.updateUI(),q.appInitComplete(i),!app.data.getWebAppData().getWebmap()&&app.data.getWebAppItem().id&&(app.data.getWebAppData().setWebmap(r),setTimeout(function(){app.maps[r]=X.getMapConfig(n)},app.data.getWebAppData().getAppGeocoders()?0:1e3)),e.storyDataReady(),q.displayApp()})}}function N(e,t){var n=e.attributes.number||e.attributes.shortlist_id,i=t.attributes.number||t.attributes.shortlist_id;return window.chrome?n<i?-1:n==i?-1:n>i?1:0:n<i?-1:n>i?1:0}function H(){var e=app.data.getWebAppData().getMapExtent()?app.data.getWebAppData().getMapExtent():app.data.getWebAppData().getTabs()&&app.data.getWebAppData().getTabs()[0].extent?app.data.getWebAppData().getTabs()[0].extent:null;T.publish("CORE_UPDATE_EXTENT",new O(e))}function W(e,t,n,i){var r=e,a=t,o=n,s=i;this.getWidth=function(){return r},this.getHeight=function(){return a},this.getOffsetX=function(){return o},this.getOffsetY=function(){return s}}var F,U,G,q=null,V=new r,X=this,Y=!1,K=0,Q=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Z=x.getUrlParams(),J=null;X.mapIsPanning=!1,X.mapIsZooming=!1;var ee=0,te=0;this.init=function(t){if(q=t,app.isInBuilder&&C("ie")&&C("ie")<10)return i18n.viewer.errors.noBuilderIE=i18n.viewer.errors.noBuilderIE.replace("%VERSION%",10).replace("%UPGRADE%",i18n.viewer.errors.upgradeBrowser),q.initError("noBuilderIE"),!1;var r=navigator.appVersion.indexOf("Edge")>0;if(app.isInBuilder&&r)return q.initError("noBuilderEdge"),!1;if(C("ie")&&C("ie")<=8)return i18n.viewer.errors.noViewerIE=i18n.viewer.errors.noViewerIE.replace("%VERSION%",9).replace("%UPGRADE%",i18n.viewer.errors.upgradeBrowser),q.initError("noViewerIE"),!1;app.data=new n,app.sanitizer=new a({whiteList:{b:[],i:[],u:[],hr:[],source:["src","type"],iframe:["src","height","width","border","allowfullscreen","mozallowfullscreen","webkitallowfullscreen","frameborder","scrolling","allowtransparency","data-unload"]}},!0),G=document.createElement("canvas"),F=G.getContext("2d"),U=new Image,U.src=app.cfg.ICON_SRC,U.onload=function(){F.drawImage(U,0,0),F.font=G.width/3.8+"pt open_sanssemibold, sans-serif"},X.themeSelected=!1,app.ui.mainView=this,app.ui.tilePanel=new s($("#contentPanel"),X,i,app.isInBuilder),setTimeout(function(){app.ui.detailPanel=new l($("#paneLeft"),app.isInBuilder,i,X,i),app.ui.detailPanel.init()},100),app.ui.navBar=new p($("#nav-bar"),app.isInBuilder,X.activateLayer,e),app.ui.tilePanel.init(),app.ui.mobileIntro=new d($("body"),app.isInBuilder,function(){},X),app.ui.mobileFeatureList=new f($("#contentPanel"),app.isInBuilder,function(){},X),app.ui.mobileIntro.init(),app.ui.mobileFeatureList.init();var o={},u=esri.urlToObject(document.location.href).query;return u&&$.each(u,function(e,t){o[e.toLowerCase()]=t}),$("body").on("mousedown","*",function(e){($(this).is(":focus")||$(this).is(e.target))&&"none"==$(this).css("outline-style")&&$(this).css("outline","none").on("blur",function(){$(this).off("blur").css("outline","")})}),app.isInBuilder||void 0===Z.autoplay||"false"===Z.autoplay||(app.ui.autoplay=new c($("#autoplay"),function(){var e=$(".tilelist li").length;return 0===te||ee!=$(".entry.active").index()?($(".tilelist li")[0].click(),te=0,te++,ee=$(".entry.active").index()):te<=e-1?(te++,$("#detailView"+ee+" .swiper-slide-active img").click()):($(".entries .entry.visible").length==ee-1?ee=0:ee++,te=0,$(".entries .entry")[ee].click()),ee}),T.subscribe("tpl-ready",function(){$("body").hasClass("mobile-view")||app.ui.autoplay.start()})),!0},this.webAppConfigLoaded=function(){app.isGalleryCreation=!app.data.getWebAppData().getWebmap()},this.loadFirstWebmap=function(e){return this.loadWebmap(e,$("#map")[0])},this.loadWebmapFromData=function(){y()},this.loadWebmap=function(e,t,n){console.log("tpl.core.MainView - loadWebMap - webmapId:",e);var i=new esri.dijit.Popup({highlight:!1},dojo.create("div"));return I.createMap(e,t,{mapOptions:{slider:!0,autoResize:!1,showAttribution:!0,infoWindow:i,extent:n,wrapAround180:!1},usePopupManager:!0,bingMapsKey:app.cfg.BING_MAPS_KEY,editable:!1,layerMixins:app.data.getAppProxies()})},this.firstWebmapLoaded=function(){y()},this.startFromScratch=function(){j()},this.getMapConfig=function(e){var t=!!app.data.getWebAppData().getGeneralOptions().geocoder&&app.data.getWebAppData().getGeneralOptions().geocoder;return{response:e,mapCommand:new h(e.map,H,q.zoomToDeviceLocation,app.data.getWebAppData().getGeneralOptions().locateButton),geocoder:new v(e.map,app.isInBuilder,t,o(e))}},this.processExternalData=function(){if(!app.data.getShortlistLayerId()){var e=[];$.each(app.map.graphicsLayerIds,function(t,n){var i=app.map.getLayer(n);i.graphics&&"esriGeometryPoint"===i.geometryType&&e.push(i)}),e.reverse(),app.data.getWebAppData().setShortlistLayerId(e[0].id);var t,n=[],i=[],r=null,a=!1;$.each(e,function(o,s){if(t=s.layerType?s.layerType:s.type,s.url&&"Feature Layer"===t&&!s.id.match(/^csv_/)){r=s,n.push(s.url),i.push(o);var l=new B;l.where="1=1",l.outFields=["*"],s.queryFeatures(l,function(e){e.features.length>0&&g(e)})}else if(s.graphics.length<1&&s.visibleAtMapScale)S.once(s,"update-end",function(){if(!a){var t,n=s.fields;if($.each(n,function(e,n){"tab_name"==n.name.toLowerCase()&&(t=!0)}),!t&&o==e.length-1){if(!app.isInBuilder)return;var i=i18n.builder.migration.migrationPattern.badData;return i+='  (<a href="http://links.esri.com/storymaps/shortlist_layer_template" target="_blank" download="">'+i18n.builder.migration.migrationPattern.downloadTemplate+"</a>)",$("#fatalError .error-msg").html(i),void $("#fatalError").show()}if(t){var r=s.graphics,l=s.fields;app.map.removeLayer(s);var p=new esri.layers.GraphicsLayer({id:app.data.getWebAppData().getShortlistLayerId()+"_copy"});a=!0,app.data.getWebAppItem().created>app.cfg.HTML_SANITIZER_DATE&&(newLayerGraphics=m(r)),p.graphics=r,p.fields=l,app.map.addLayer(p),app.data.getWebAppData().setShortlistLayerId(p.id),b(p)}}}),s.on("update-end",function(){}),app.map.on("zoom-start",function(){s.hide()}),app.map.on("zoom-end",function(){s.show()});else{if(a)return;var p,u=s.fields;if($.each(u,function(e,t){"tab_name"==t.name.toLowerCase()&&(p=!0)}),p){var c=s.graphics,d=s.fields;app.map.removeLayer(s);var f=new esri.layers.GraphicsLayer({id:app.data.getWebAppData().getShortlistLayerId()+"_copy"});app.data.getWebAppItem().created>app.cfg.HTML_SANITIZER_DATE&&(c=m(c)),f.graphics=c,f.fields=d,app.map.addLayer(f),app.data.getWebAppData().setShortlistLayerId(f.id),b(f),a=!0}if(!p&&o==e.length-1){var h=i18n.builder.migration.migrationPattern.badData;return h+='  (<a href="http://links.esri.com/storymaps/shortlist_layer_template" target="_blank" download="">'+i18n.builder.migration.migrationPattern.downloadTemplate+"</a>)",$("#fatalError .error-msg").html(h),void $("#fatalError").show()}}}),$("home-location-save-btn").remove()}},this.activateLayer=function(e,t){T.publish("story-tab-navigation",e);var n=[];t&&(J=t);var r=app.map.getLayer(app.data.getShortlistLayerId());app.isInBuilder&&app.detailPanelBuilder.checkTempLayer(),$.each(r.graphics,function(t,i){var r=i.attributes,a=r[$.grep(Object.keys(r),function(e){return"tab_name"==e.toLowerCase()})[0]];if(app.data.getWebAppData().getIsExternalData()||r.tab_id==e)if(app.data.getWebAppData().getIsExternalData()&&a!=app.data.getStory()[e].title)i.hide();else if(app.data.getWebAppData().getIsExternalData())if(app.isInBuilder)i.show(),n.push(i);else{var o=r[$.grep(Object.keys(r),function(e){return"name"==e.toLowerCase()})[0]],s=r[$.grep(Object.keys(r),function(e){return"name"==e.toLowerCase()})[0]];o&&s&&(i.show(),n.push(i))}else!app.isInBuilder&&i.attributes.locationSet&&i.attributes.name&&"Unnamed Place"!=i.attributes.name&&i.attributes.pic_url?(i.show(),n.push(i)):app.isInBuilder?(n.push(i),i.attributes.locationSet?i.show():i.hide()):i.hide();else i.hide()});var a=new esri.layers.GraphicsLayer;a.graphics=n;var o=app.data.getStory()[e].color;if(a.color=o,app.layerCurrent=a,app.layerCurrent.color=app.data.getStory()[e].color,r.redraw(),app.ui.mobileFeatureList.setColor(),app.mapTips&&app.mapTips.clean(!0),X.preSelection(),X.selected=null,X.postSelection(),!$.isEmptyObject(app.cfg.TAB_SPECIFIC_SUPPORT_LAYERS)){var s=i.getSupportLayers(),l="tab"+String(e+1),p=app.cfg.TAB_SPECIFIC_SUPPORT_LAYERS[l];$.each(s,function(e,t){p&&p.indexOf(t.name)>-1?t.setVisibility(!0):t.setVisibility(!1)})}$(".detailContainer").hide(),app.ui.tilePanel.buildTilePanel(),app.ui.navBar.showEntryIndex(e),setTimeout(function(){x.addCSSRule(".nav-bar .entry.active > .entryLbl, \t\t\t\t\t\t.nav-bar .dropdown.active .dropdown-toggle { \t\t\t\t\t\t\tbackground-color: "+app.data.getStory()[e].color+" !important; \t\t\t\t\t\t}","NavBarActive")},0),$("#contentPanel").css("border-top-color",app.data.getStory()[e].color),$(".detailHeader").css("border-top-color",app.data.getStory()[e].color)
;var u=0===e?500:100;setTimeout(function(){app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()||app.ui.detailPanel.buildFeatureViews(J)},u),app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?app.addFeatureBar.updateLocatedFeatures():app.ui.detailPanel.refreshSlides()},this.unselect=function(){X.preSelection(),X.selected=null,X.postSelection()},this.preSelection=function(){X.selected&&X.selected.symbol&&X.selected.symbol.setWidth&&(X.selected.symbol.setWidth(X.lutIconSpecs.tiny.getWidth()),X.selected.symbol.setHeight(X.lutIconSpecs.tiny.getHeight()),X.selected.symbol.setOffset(X.lutIconSpecs.tiny.getOffsetX(),X.lutIconSpecs.tiny.getOffsetY()),X.selected.draw(),app.mapTips&&app.mapTips.clean(!0))},this.postSelection=function(){if(null==X.selected)app.map.infoWindow.hide();else{if(!X.selected.attributes.locationSet&&!app.isInBuilder&&!app.data.getWebAppData().getIsExternalData())return;app.map.extent.contains(X.selected.geometry)||!X.selected.attributes.locationSet&&!app.data.getWebAppData().getIsExternalData()||app.map.centerAt(X.selected.geometry),setTimeout(function(){X.buildMapTips()},250),app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?app.detailPanelBuilder.showSlide(X.selected.attributes.shortlist_id):Q?app.ui.detailPanel.buildSlide(X.selected):app.ui.detailPanel.showDetails(X.selected),app.ui.mobileIntro.hide(),app.ui.mobileFeatureList.setColor()}},this.buildMapTips=function(e){setTimeout(function(){if(!X.selected||!X.selected.attributes||X.selected.hidden||!X.selected.attributes.locationSet&&!app.data.getWebAppData().getIsExternalData())return void(app.mapTips&&app.mapTips.clean(!0));if(app.mapTips&&!app.map.extent.contains(X.selected.geometry)&&app.data.getWebAppData().getGeneralOptions().filterByExtent&&!app.isInBuilder)return void app.mapTips.clean(!0);if($("body").hasClass("mobile-view"))return app.mapTips&&app.mapTips.clean(!0),void(X.selected&&X.selectSymbol());e&&app.mapTips.clean(!0);var t=X.selected.attributes,n=t[$.grep(Object.keys(t),function(e){return"name"==e.toLowerCase()})[0]];n||(X.selected.attributes.name="Unnamed Place");var i=e||n;app.mapTips=new u({map:app.map,content:i,selected:X.selected&&!0!==X.selected.hidden?X.selected:null,pointArray:[X.selected],labelDirection:"auto",backgroundColor:app.cfg.SELECTED_POPUP_BACKGROUND_COLOR,borderColor:app.cfg.SELECTED_POPUP_BORDER_COLOR,pointerColor:app.cfg.SELECTED_POPUP_ARROW_COLOR,textColor:"#ffffff",offsetTop:44,topLeftNotAuthorizedArea:[40,180],mapAuthorizedMinWidth:-1,mapAuthorizedWidth:-1,mapAuthorizedHeight:-1,visible:!0}),X.selectSymbol()},100)},this.selectSymbol=function(){X.selected.symbol.width!=X.lutIconSpecs.large.getWidth()&&(X.selected.symbol.setWidth(X.lutIconSpecs.large.getWidth()),X.selected.symbol.setHeight(X.lutIconSpecs.large.getHeight()),X.selected.symbol.setOffset(X.lutIconSpecs.large.getOffsetX(),X.lutIconSpecs.large.getOffsetY()),X.selected.draw(),app.map.getLayer(app.data.getWebAppData().getShortlistLayerId()).redraw(),setTimeout(function(){try{X.selected.getShape().moveToFront()}catch(e){console.log("problem with 'moveToFront()'...")}},10))},this.buildMapHoverTips=function(e,t){if(app.mapTips&&($("body").hasClass("mobile-view")||!t.attributes.locationSet&&!app.data.getWebAppData().getIsExternalData()))return void app.mapTips.clean(!0);var n=t==X.selected?44:33,i=t.attributes;i[$.grep(Object.keys(i),function(e){return"name"==e.toLowerCase()})[0]]||(t.attributes.name="Unnamed Place"),app.mapTips=new u({map:app.map,content:e,selected:X.selected&&!0!==X.selected.hidden?X.selected:null,pointArray:[t],labelDirection:"auto",backgroundColor:app.cfg.POPUP_BACKGROUND_COLOR,borderColor:app.cfg.POPUP_BORDER_COLOR,pointerColor:app.cfg.POPUP_ARROW_COLOR,textColor:"#ffffff",offsetTop:n,topLeftNotAuthorizedArea:[40,180],mapAuthorizedMinWidth:-1,mapAuthorizedWidth:-1,mapAuthorizedHeight:-1,visible:!0})},this.buildMapSupportHoverTips=function(e,t){if(app.mapTips&&$("body").hasClass("mobile-view"))return void app.mapTips.clean(!0);app.mapTips=new u({map:app.map,content:e,selected:X.selected&&!0!==X.selected.hidden?X.selected:null,pointArray:[t],labelDirection:"auto",backgroundColor:app.cfg.POPUP_BACKGROUND_COLOR,borderColor:app.cfg.POPUP_BORDER_COLOR,pointerColor:app.cfg.POPUP_ARROW_COLOR,textColor:"#ffffff",offsetTop:5,topLeftNotAuthorizedArea:[40,180],mapAuthorizedMinWidth:-1,mapAuthorizedWidth:-1,mapAuthorizedHeight:-1,visible:!0})},this.moveGraphicToFront=function(e){if(e){var t=e.getDojoShape();t&&t.moveToFront()}},this.buildLayer=function(e,t){var n,r=X.lutIconSpecs.tiny,a=document.createElement("canvas");a.width=U.width,a.height=U.height;var o=a.getContext("2d");o.font=a.width/3.8+"pt pt open_sanssemibold, sans-serif",o.drawImage(G,0,0);var s=t;if(!n){var l=o.getImageData(0,0,G.width,G.height),p=k(l,4804);if(p[0]!=E(s).r||p[1]!=E(s).g||p[2]!=E(s).b){for(var u=0;u<l.data.length;u+=4)l.data[u]==p[0]&&l.data[u+1]==p[1]&&l.data[u+2]==p[2]&&(l.data[u]=E(s).r,l.data[u+1]=E(s).g,l.data[u+2]=E(s).b);o.putImageData(l,0,0)}n=l}$.each(e,function(e,t){if(e>0&&o.putImageData(n,0,0),i.getGeneralOptions().numberedIcons){var s=t.attributes.PLACENUMSL?t.attributes.PLACENUMSL:t.attributes.number;o.textAlign="center",o.fillStyle="white",o.fillText(s,a.width/3.2,a.height/2)}t.setSymbol(L(e,a,r))}),app.map.getLayer(app.data.getWebAppData().getShortlistLayerId()).show()},this.layer_onClick=function(e){if(!($("body").hasClass("pickLocation")||X.mapIsZooming||X.mapIsPanning)){Y=!0,X.preSelection(),X.selected=null,X.selected=e.graphic,X.postSelection(),$("#mobileTitlePage").css("display","none");var t=$(".esriPopup");$(t).addClass("app-hidden"),setTimeout(function(){Y=!1},500),X.themeSelected||app.ui.mobileFeatureList.selectTheme(0),X.themeSelected=!0}},this.layer_onMouseOver=function(e){if(!(Y||$("body").hasClass("pickLocation")||X.mapIsZooming||X.mapIsPanning||V.isMobile())){app.map.setMapCursor("pointer");var t=e.graphic;app.map.toScreen(t.geometry);if(t!=X.selected||!0===X.selected.hidden||"block"!=$("#header").css("display")){if(t==X.selected&&!0===X.selected.hidden){if(app.isInBuilder)return}else t.symbol.setWidth(X.lutIconSpecs.medium.getWidth()),t.symbol.setHeight(X.lutIconSpecs.medium.getHeight()),t.symbol.setOffset(X.lutIconSpecs.medium.getOffsetX(),X.lutIconSpecs.medium.getOffsetY()),t.draw(),V.isIE()||X.moveGraphicToFront(t);var n=t.attributes,i=n[$.grep(Object.keys(n),function(e){return"name"==e.toLowerCase()})[0]];X.buildMapHoverTips(i,t)}}},this.layer_onMouseOut=function(e){if(!($("body").hasClass("pickLocation")||X.mapIsZooming||X.mapIsPanning)){var t=e.graphic;t==X.selected&&app.isInBuilder||V.isMobile()||(app.map.setMapCursor("default"),t!=X.selected&&(t.symbol.setWidth(X.lutIconSpecs.tiny.getWidth()),t.symbol.setHeight(X.lutIconSpecs.tiny.getHeight()),t.symbol.setOffset(X.lutIconSpecs.tiny.getOffsetX(),X.lutIconSpecs.tiny.getOffsetY()),t.draw()),app.mapTips&&app.mapTips.clean())}},this.updateUI=function(){},this.resize=function(e){app.isInBuilder&&(app.initScreenIsOpen=!0);var t=$(".entry.active").index();if(e.isMobileView)app.isInBuilder&&$("#mobileBuilderOverlay").attr("style","display: block !important"),setTimeout(function(){app.ui.mobileIntro.resizeMobileElements()},0),app.data.getStory()[t]&&app.data.getStory()[t].color&&($(".detailHeader").css({"border-top-width":"10px","border-top-style":"solid","border-top-color":app.data.getStory()[t].color}),$("#contentPanel").css("border-top","0px"),$(".notNumbered").css("margin-top","10px")),app.data.getWebAppData().getSettings().generalOptions&&app.data.getWebAppData().getSettings().generalOptions.bookmarks&&$("#mobileBookmarksCon").show(),$("#header").height("0"),app.mapTips&&app.mapTips.hide(),(K<2||"block"==$("#mobileIntro").css("display"))&&H();else{app.isInBuilder&&"block"==$("#mobileBuilderOverlay").css("display")&&(app.addFeatureBar.loaded||app.data.getWebAppData().getIsExternalData())&&$("#mobileBuilderOverlay").attr("style","display: none !important"),app.ui.mobileIntro.screenSize="desktop",$("#mobilePaneList").hide(),$("#navThemeLeft").css("visibility","hidden"),$("#navThemeRight").css("visibility","hidden"),$("#mobileBookmarksCon").hide(),$("#bookmarksDiv").css("max-height",$("#map").height()-100),app.data.getStory()[t]&&app.data.getStory()[t].color&&($("#contentPanel").css({"border-top-width":"10px","border-top-style":"solid","border-top-color":app.data.getStory()[t].color}),$(".detailHeader").css("border-top","0px"),$(".notNumbered").css("margin-top","20px"));var n=$("body").height(),i=0;if($(".mainViewAboveMap, .mainViewBelowMap").each(function(e,t){var n=$(t);i+=n.is(":visible")?n.outerHeight():0}),$("#paneLeft").height(n-i-25-$("#tabs").height()-(app.embedBar&&app.embedBar.initiated?26:0)),!(Z.embed||""===Z.embed||app.cfg.embed||Z.forceEmbed||app.indexCfg.forceEmbed)){var r=app.data.getWebAppData().getHeader().compactSize?"60px":"110px";$("#header").height(r)}if($(".tilelist").height($("#paneLeft").height()-(app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?70:25)+(app.embedBar&&app.embedBar.initiated?5:0)),$(".tilelist").css("top",app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?50:28),$("#paneLeft .noFeature").width($("#paneLeft").width()),$("#paneLeft").width()==app.cfg.LEFT_PANE_WIDTH_TWO_COLUMN?$("#paneLeft .noFeatureText").css("margin-left","20px"):$("#paneLeft .noFeatureText").css("margin-left","100px"),$("#map").height(e.height-10+(app.embedBar&&app.embedBar.initiated?-26:0)),$("#map").css("top",0),app.ui.navBar.resize(),app.ui.autoplay){var a=$("#map").width()/2-$("#autoplay").width()/2;$("#autoplay").css("left",a)}e.width<=app.cfg.TWO_COLUMN_THRESHOLD||e.width<=1024&&e.height<=768?(setTimeout(function(){$("#mainStagePanel").width(e.width-(app.cfg.LEFT_PANE_WIDTH_TWO_COLUMN+16)),$("#mainStagePanel").css("left",app.cfg.LEFT_PANE_WIDTH_TWO_COLUMN+16),app.map&&app.map.resize(),X.selected&&!app.map.extent.contains(X.selected.geometry)&&app.mapTips&&app.mapTips.clean(!0)},0),$("#paneLeft .noFeatureText").css("margin-left","20px"),app.ui.tilePanel.resize(app.cfg.LEFT_PANE_WIDTH_TWO_COLUMN),app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?app.detailPanelBuilder.resize():app.ui.detailPanel.resize()):e.width<=app.cfg.THREE_COLUMN_THRESHOLD&&e.width>=app.cfg.TWO_COLUMN_THRESHOLD?(setTimeout(function(){$("#mainStagePanel").width(e.width-(app.cfg.LEFT_PANE_WIDTH_THREE_COLUMN+16)),$("#mainStagePanel").css("left",app.cfg.LEFT_PANE_WIDTH_THREE_COLUMN+16),app.map&&app.map.resize()},0),$("#paneLeft .noFeatureText").css("margin-left","100px"),app.ui.tilePanel.resize(app.cfg.LEFT_PANE_WIDTH_THREE_COLUMN),app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?app.detailPanelBuilder.resize():app.ui.detailPanel.resize()):(setTimeout(function(){$("#mainStagePanel").width(e.width-(app.cfg.LEFT_PANE_WIDTH_FOUR_COLUMN+16)),$("#mainStagePanel").css("left",app.cfg.LEFT_PANE_WIDTH_FOUR_COLUMN+16),app.map&&app.map.resize()},0),$("#paneLeft .noFeatureText").css("margin-left","170px"),app.ui.tilePanel.resize(app.cfg.LEFT_PANE_WIDTH_FOUR_COLUMN),app.isInBuilder&&!app.data.getWebAppData().getIsExternalData()?app.detailPanelBuilder.resize():app.ui.detailPanel.resize())}K++},this.setMapExtent=function(e,t){return q.setMapExtent(e,t)},this.getLayoutExtent=function(e){return e},this.checkConfigFileIsOK=function(){return t.checkConfigFileIsOK()},this.appInitComplete=function(){this.updateUI(),q.cleanLoadingTimeout(),$(window).resize(),app.isGalleryCreation;var e=app.data.getWebAppData().isBlank()||"private"==app.data.getWebAppItem().access;app.ui.headerDesktop&&app.ui.headerDesktop.toggleSocialBtnAppSharing(e),T.publish("tpl-ready")},this.onHashChange=function(){},this.lutIconSpecs={tiny:new W(31,34,6,13),medium:new W(34,38,7,15),large:new W(44,48,9,20)},this.prepareMobileViewSwitch=function(){},this.initLocalization=function(){}}}),require(["storymaps/common/Core","storymaps/common/ui/header/Desktop","storymaps/tpl/core/MainView"],function(){}),define("storymaps/tpl/BuildConfigViewer",function(){});