//------------ Begin Algemene functies --------------function schakelButtons(element, schakelaar, button, fsswitch) {//Doel: Met deze functie kunnen alle buttons of één specifieke button binnen een fieldset worden verborgen danwel getoond.//para1: Geef hier de naam van de fieldset op waarbinnen de buttons worden geschakeld//para2: Geef hier true of false op om de buttons te tonen danwel te verbergen//para3: Geef de naam op van de specifieke button welke geschakeld moet worden OF //			 geef te tekst all op waarmee wordt bereikt dat alle buttons binnen de fieldset worden geschakeld.//			 true = tonen, false is NIET tonen//para4: Geef hier true of false op om de in para1 vermelde fieldset te verberegen of te tonen.	var input = document.getElementById(element).getElementsByTagName("input");	if (schakelaar == true) {		schakelaar = "'visible'";	} else {		schakelaar = "'hidden'";	}	for(var i = 0; i<input.length; i++) {		if(input[i].name.substr(0, 6) == "butTi_" || input[i].name.substr(0, 4) == "but_") {			if (button == "all" || input[i].name == button) {				if(input[i].style.visibility) {					input[i].style.visibility = schakelaar;				}			}		}		}	if (fsswitch == false){		document.getElementById(element).style.display = 'none';		// - TI -		if (document.getElementById("divTiButtons")!=null) {			document.getElementById("divTiButtons").style.display = 'none';		} else {			document.getElementById("divButtons").style.display = 'none';		}			} else{		document.getElementById(element).style.display = 'block';		// - TI -		if (document.getElementById("divTiButtons")!=null) {			document.getElementById("divTiButtons").style.display = 'block';		} else {			document.getElementById("divButtons").style.display = 'block';		}	}	}function ZetInputUit(element, schakelaar) {//Doel: Deze functie schakelt alle invoervelden binnen een fieldset in danwel uit.//Werking: Alle input-tags worden geschakeld behalve de tags waarvan de naam van de tag begint met de tekst "butTi_"//para1: Geef hier de naam van de fieldset op waarbinnen de velden worden geschakeld//para2: Geef hier true of false op om de velden te déactiveren danwel te activeren//			 true = uitgeschakeld, false is ingeschakeld	var input = document.getElementById(element).getElementsByTagName("input");	for(var i = 0; i < input.length; i++) {		if(input[i].name.substr(0, 6) != "butTi_") {			input[i].disabled = schakelaar;		}		}}function ZetSelectUit(element, schakelaar) {//Doel: Deze functie schakelt alle selectboxes binnen een fieldset in danwel uit.//Werking: Alle select's	worden geschakeld behalve de tags waarvan de naam van de tag begint met de tekst "butTi_"//para1: Geef hier de naam van de fieldset op waarbinnen de velden worden geschakeld//para2: Geef hier true of false op om de velden te déactiveren danwel te activeren//			 true = uitgeschakeld, false is ingeschakeld	var input = document.getElementById(element).getElementsByTagName("select");	for(var i = 0; i < input.length; i++) {		input[i].disabled = schakelaar;	}}function ResizeBackground(divBG) {	htmlheight = document.body.parentNode.scrollHeight;	windowheight = window.innerHeight;	divOffsetY = 150;	// ca. 8.5em (margin-top van divTiBG)	if (htmlheight < windowheight) {		document.body.style.height = windowheight + "px";		divBG.style.height = (windowheight-divOffsetY) + "px";	} else {		document.body.style.height = htmlheight + "px";		divBG.style.height = (htmlheight-divOffsetY) + "px";	}}function CheckAanvraagDatum(iJaar) {	dVandaag = new Date();	dVandaag.getDate();	iJaar++;	dMaxAanvraag = new Date();	dMaxAanvraag.setFullYear(iJaar,3,1);	// 1 april komend jaar	if(dVandaag > dMaxAanvraag) {		return false;	// te laat	} else {		return true;	}}function AutoFollow(sDiv) {	sRadio1 = ConvertDivToRadioID(sDiv,"True");	sRadio2 = ConvertDivToRadioID(sDiv,"False");	// Radiobuttons binnen div? Ja? Dan "onclick" event uitvoeren.	if(sRadio1.indexOf("radio") > -1) {		if(document.getElementById(sRadio1)) {			oRadio = document.getElementById(sRadio1);			if(oRadio.checked) oRadio.onclick();		}		if(document.getElementById(sRadio2)) {			oRadio = document.getElementById(sRadio2);			if(oRadio.checked) oRadio.onclick();		}	}}function ToonParents(sDiv,bTonen){	// Als parent bestaat: (on)zichtbaar maken (recursief)	sTonen = (bTonen) ? 'block' : 'none';	objDiv = ConvertToObject(sDiv);	if(objDiv.style) {		objDiv.style.display = sTonen;		ToonParents(objDiv.parentNode,bTonen);	}}function GetFieldset(sDiv) {	objDiv = ConvertToObject(sDiv);	return objDiv.parentNode.id.toString();}function ConvertToObject(elem) {	if(typeof(elem) != "object") {		return document.getElementById(elem);	} else {		return elem;	}}function ConvertDivToRadioID(sDiv,bVal) {	return sDiv.replace("div","radio") + bVal;}function checkJarenInModule (sJaar, sJaarVeld){	// Met deze funtcie wordt gecontroleerd of het jaar waarmee de module moet starten in de module zelf is opgenomen	var oField = document.getElementById(sJaarVeld);	var bReturn = false; 	for (var i=0; i < oField.length && bReturn == false; i++){		if (oField.options[i].value == sJaar){			bReturn = true;		}	}	return(bReturn);}//------------ Einde Algemene functies --------------// BEGIN Functies t.b.v. Module Beslisboomif (arrAllResults == undefined) var arrAllResults = new Array();if (arrAllQuestions == undefined){	// de array waarin de beantwoording van de getoonde vragen wordt bijgehouden.	var arrAllQuestions = new Array();	arrAllQuestions[arrAllQuestions.length]= "Vraag1";}function doBeslisBoom(oActVraag, strConclusie, strVolgendeVraag, strResult){// Met deze functie wordt de presentatie van de vragen geregeld voor een beslisboom.// Para1: De Actuele vraag// Para2: Te onthouden TussenConclusie.// Para3: De volgende vraag.// Para4: Te tonen eindresultaat/conclusie. 	var arrAllFields = document.getElementById("fsInvoer1").getElementsByTagName("input");	toonDivs("", "divResult", "fsUitvoer", "");	if (oActVraag.name != arrAllQuestions[arrAllQuestions.length-1]){	// gebruiker klikt op iets anders dan de volgende vraag		var bStop = false;						 		for (var i = arrAllQuestions.length-1 ; i>0 && bStop == false; i--) {			if (arrAllQuestions[i] != oActVraag.name) {				if (isRadio(arrAllFields, arrAllQuestions[i]) == 'radio'){					document.getElementById(arrAllQuestions[i] + "True").checked = false;					document.getElementById(arrAllQuestions[i] + "False").checked = false;					doPrnRadio("prn" + arrAllQuestions[i], "");				}				document.getElementById("div" + arrAllQuestions[i] ).style.display = 'none';				arrAllQuestions.pop();				arrAllResults.pop();			} else {				bStop = true;				if (arrAllResults.length > (arrAllQuestions.length - 1)) {			 	 	arrAllResults.pop();				}			}		}	}	// tonen van de volgende volgende vraag	if (strVolgendeVraag != "" || ( strVolgendeVraag == "" && oActVraag.name == arrAllQuestions[arrAllQuestions.length-1])) {		if (arrAllResults.length == arrAllQuestions.length &&	oActVraag.name == arrAllQuestions[arrAllQuestions.length-1]) {			arrAllResults[arrAllResults.length-1]= strConclusie;		} else {			arrAllResults[arrAllResults.length]= strConclusie;		}	 		if (strVolgendeVraag != "") {			arrAllQuestions[arrAllQuestions.length]= strVolgendeVraag;			toonDivs("div" + strVolgendeVraag, "divResult", "", "");		}	}	if (strResult != "") {		doUitvoerResult(strResult, arrAllResults);	}	// printwaarde vullen	doPrnRadio("prn" + oActVraag.name, oActVraag.value);}// EINDE Functies t.b.v. Module Beslisboom// Start afhandelen melding bij invullen toetsingsinkomenvar savBuTiAlert_focus = "";function doBuTiAlert(oThis, sJaar, sToeslag) {	if (parseInt(sJaar) >= 2009) {		if ((oThis.value == "" || oThis.value == null) && oThis.id != savBuTiAlert_focus){			savBuTiAlert_focus = oThis.id;			document.getElementById('txtBuTiAlert').innerHTML = vulBuTiAlert(oThis, sJaar, sToeslag);			ZetInputUit('divContent', true);			ZetSelectUit('divContent', true);			document.getElementById('BuTiAlert_ja').disabled = false;			document.getElementById('BuTiAlert_nee').disabled = false;			// selects in IE6 verbergen i.v.m. bug in IE6			if (sToeslag == 'huurtoeslag'){				HideSelect_HT('none');			}			doHelp('divHelpBuTiAlert', oThis);		} else {			savBuTiAlert_focus = "";		}			}}function ToonInputSelectBuTiAlert(sToeslag){	if (sToeslag == 'huurtoeslag'){		HideSelect_HT('block');	}	ZetInputUit('divContent', false);	ZetSelectUit('divContent', false);	try {algValidatie()	} catch(err){	}}function vulBuTiAlert(oThis, sJaar, sToeslag){var sTxt_1, sTxt_2, sTxt_3;if(oThis.id.indexOf('partner') > -1) {	sTxt_1 = "het toetsingsinkomen van uw toeslagpartner";	sTxt_2 = "uw toeslagpartner";	sTxt_4 = "partner";} else if(oThis.id.indexOf('medebewoner') > -1) {	sTxt_1 = "het toetsingsinkomen van uw medebewoner";	sTxt_2 = "uw medebewoner";	sTxt_4 = "medebewoner";	} else {	sTxt_1 = "uw toetsingsinkomen";	sTxt_2 = "u";	sTxt_4 = "u";}sTxt_3 = sToeslag;if (sToeslag == "toeslagen-generiek") { sTxt_3 = "toeslag"; }var sHtml  = '<p><strong>Let op!</strong></p>';		sHtml += '<p>Wij raden u aan om ' + sTxt_1 + ' te schatten met de Rekenhulp toetsingsinkomen. Zo krijgt u een zo nauwkeurig mogelijke berekening van uw ' + sTxt_3 + '. Gebruik de rekenhulp zeker als ' + sTxt_2 + ' aangifte inkomstenbelasting doet.</p>';		sHtml += '<p><label class="lblBuTiAlert">Wilt u de Rekenhulp toetsingsinkomen gebruiken?</label>';		sHtml += '<span class="clNietPrinten">'		sHtml += '<input type="radio" name="BuTiAlert" id="BuTiAlert_ja" value="ja" class="radioWelke" onclick="ToonInputSelectBuTiAlert(\'' + sToeslag + '\'); StartInkomenApplicatie(sURL,\'' + oThis.id + '\', \'' + sJaar + '\',\'' + sToeslag + '\',\'' + sTxt_4 + '\')" /><label for="BuTiAlert_ja">ja</label>';		sHtml += '<input type="radio" name="BuTiAlert" id="BuTiAlert_nee" value="nee" class="radioWelke" onclick="ToonInputSelectBuTiAlert(\'' + sToeslag + '\'); SluitHelp(); SetFocus(\'' + oThis.id + '\'); " /><label for="BuTiAlert_nee">nee</label>';		sHtml += '</span>';		sHtml += '<span id="prnBuTiAlert" class="clPrinten"></span>';		sHtml += '</p>';		return sHtml;}function HideSelect_HT(sDisplay) {// oplossing voor probleem met IE6 en het naar de voorgrond drukken van select-velden	var x = navigator;	if (x.appName=="Microsoft Internet Explorer") {		var versionStart = x.appVersion.indexOf("MSIE ");		if (versionStart != -1) {			var version = parseFloat(x.appVersion.substr(versionStart+5,3));			if (version < 7) {				document.getElementById('JarenUwzelf').style.display = sDisplay;				document.getElementById('JarenPartner').style.display = sDisplay;				document.getElementById('idSelectJaren1').style.display = sDisplay;				document.getElementById('idSelectJaren2').style.display = sDisplay;				document.getElementById('idSelectJaren3').style.display = sDisplay;				document.getElementById('idSelectJaren4').style.display = sDisplay;				document.getElementById('idSelectJaren5').style.display = sDisplay;			}		}	}}// Einde afhandelen melding bij invullen toetsingsinkomenfunction getInnerText(obj, bTrim){	//Haalt de tekst op uit een node incl. alle onderliggende nodes	//obj = het object	//bTrim = whitespace om de totale tekst verwijderen (true = verwijderen)	var text = "";	text = obj.innerText || obj.textContent;	if (bTrim === true) {		while (text.substr(0,1) == "\n" ) {			text = trim(text.substr(2));				}	}		return text} function trim(str, chars) {	return ltrim(rtrim(str, chars), chars);} function ltrim(str, chars) {	chars = chars || "\\s";	return str.replace(new RegExp("^[" + chars + "]+", "g"), "");} function rtrim(str, chars) {	chars = chars || "\\s";	return str.replace(new RegExp("[" + chars + "]+$", "g"), "");}