/* start of /views/pagetypes/reacties/js/lib/autolinker.js (as is) */
!function(t,e){"function"==typeof define&&define.amd?define([],(function(){return t.Autolinker=e()})):"object"==typeof exports?module.exports=e():t.Autolinker=e()}(this,(function(){
/*!
 * Autolinker.js
 * 0.19.0
 *
 * Copyright(c) 2015 Gregory Jacobs <greg@greg-jacobs.com>
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 *
 * https://github.com/gregjacobs/Autolinker.js
 */
var t,e,r,n,i=function(t){i.Util.assign(this,t);var e=this.hashtag;if(!1!==e&&"twitter"!==e&&"facebook"!==e&&"instagram"!==e)throw new Error("invalid `hashtag` cfg - see docs")};return i.prototype={constructor:i,urls:!0,email:!0,twitter:!0,phone:!0,hashtag:!1,newWindow:!0,stripPrefix:!0,truncate:void 0,className:"",htmlParser:void 0,matchParser:void 0,tagBuilder:void 0,link:function(t){if(!t)return"";for(var e=this.getHtmlParser().parse(t),r=0,n=[],i=0,s=e.length;i<s;i++){var a=e[i],o=a.getType(),c=a.getText();if("element"===o)"a"===a.getTagName()&&(a.isClosing()?r=Math.max(r-1,0):r++),n.push(c);else if("entity"===o||"comment"===o)n.push(c);else if(0===r){var h=this.linkifyStr(c);n.push(h)}else n.push(c)}return n.join("")},linkifyStr:function(t){return this.getMatchParser().replace(t,this.createMatchReturnVal,this)},createMatchReturnVal:function(t){var e;return this.replaceFn&&(e=this.replaceFn.call(this,this,t)),"string"==typeof e?e:!1===e?t.getMatchedText():e instanceof i.HtmlTag?e.toAnchorString():this.getTagBuilder().build(t).toAnchorString()},getHtmlParser:function(){var t=this.htmlParser;return t||(t=this.htmlParser=new i.htmlParser.HtmlParser),t},getMatchParser:function(){var t=this.matchParser;return t||(t=this.matchParser=new i.matchParser.MatchParser({urls:this.urls,email:this.email,twitter:this.twitter,phone:this.phone,hashtag:this.hashtag,stripPrefix:this.stripPrefix})),t},getTagBuilder:function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new i.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t}},i.link=function(t,e){return new i(e).link(t)},i.match={},i.htmlParser={},i.matchParser={},i.Util={abstractMethod:function(){throw"abstract"},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},extend:function(t,e){var r,n=t.prototype,s=function(){};s.prototype=n,r=e.hasOwnProperty("constructor")?e.constructor:function(){n.constructor.apply(this,arguments)};var a=r.prototype=new s;return a.constructor=r,a.superclass=n,delete e.constructor,i.Util.assign(a,e),r},ellipsis:function(t,e,r){return t.length>e&&(r=null==r?"..":r,t=t.substring(0,e-r.length)+r),t},indexOf:function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},splitAndCapture:function(t,e){if(!e.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var r,n=[],i=0;r=e.exec(t);)n.push(t.substring(i,r.index)),n.push(r[0]),i=r.index+r[0].length;return n.push(t.substring(i)),n},trim:function(t){return t.replace(this.trimRegex,"")}},i.HtmlTag=i.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(t){i.Util.assign(this,t),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(t){return this.tagName=t,this},getTagName:function(){return this.tagName||""},setAttr:function(t,e){return this.getAttrs()[t]=e,this},getAttr:function(t){return this.getAttrs()[t]},setAttrs:function(t){var e=this.getAttrs();return i.Util.assign(e,t),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(t){return this.setAttr("class",t)},addClass:function(t){for(var e,r=this.getClass(),n=this.whitespaceRegex,s=i.Util.indexOf,a=r?r.split(n):[],o=t.split(n);e=o.shift();)-1===s(a,e)&&a.push(e);return this.getAttrs().class=a.join(" "),this},removeClass:function(t){for(var e,r=this.getClass(),n=this.whitespaceRegex,s=i.Util.indexOf,a=r?r.split(n):[],o=t.split(n);a.length&&(e=o.shift());){var c=s(a,e);-1!==c&&a.splice(c,1)}return this.getAttrs().class=a.join(" "),this},getClass:function(){return this.getAttrs().class||""},hasClass:function(t){return-1!==(" "+this.getClass()+" ").indexOf(" "+t+" ")},setInnerHtml:function(t){return this.innerHtml=t,this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var t=this.getTagName(),e=this.buildAttrsStr();return["<",t,e=e?" "+e:"",">",this.getInnerHtml(),"</",t,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var t=this.getAttrs(),e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+'="'+t[r]+'"');return e.join(" ")}}),i.AnchorTagBuilder=i.Util.extend(Object,{constructor:function(t){i.Util.assign(this,t)},build:function(t){return new i.HtmlTag({tagName:"a",attrs:this.createAttrs(t.getType(),t.getAnchorHref()),innerHtml:this.processAnchorText(t.getAnchorText())})},createAttrs:function(t,e){var r={href:e},n=this.createCssClass(t);return n&&(r.class=n),this.newWindow&&(r.target="_blank",r.rel="noopener noreferrer"),r},createCssClass:function(t){var e=this.className;return e?e+" "+e+"-"+t:""},processAnchorText:function(t){return t=this.doTruncate(t)},doTruncate:function(t){return i.Util.ellipsis(t,this.truncate||Number.POSITIVE_INFINITY)}}),i.htmlParser.HtmlParser=i.Util.extend(Object,{htmlRegex:(t=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,e=/[^\s\0"'>\/=\x01-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+t.source+")?",new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",e,"|",t.source+")",")*",">",")","|","(?:","<(/)?","(?:",/!--([\s\S]+?)--/.source,"|","(?:","("+/[0-9a-zA-Z][0-9a-zA-Z:]*/.source+")","(?:","\\s+",e,")*","\\s*/?",")",")",">",")"].join(""),"gi")),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(t){for(var e,r,n=this.htmlRegex,i=0,s=[];null!==(e=n.exec(t));){var a=e[0],o=e[3],c=e[1]||e[4],h=!!e[2],l=t.substring(i,e.index);l&&(r=this.parseTextAndEntityNodes(l),s.push.apply(s,r)),o?s.push(this.createCommentNode(a,o)):s.push(this.createElementNode(a,c,h)),i=e.index+a.length}if(i<t.length){var u=t.substring(i);u&&(r=this.parseTextAndEntityNodes(u),s.push.apply(s,r))}return s},parseTextAndEntityNodes:function(t){for(var e=[],r=i.Util.splitAndCapture(t,this.htmlCharacterEntitiesRegex),n=0,s=r.length;n<s;n+=2){var a=r[n],o=r[n+1];a&&e.push(this.createTextNode(a)),o&&e.push(this.createEntityNode(o))}return e},createCommentNode:function(t,e){return new i.htmlParser.CommentNode({text:t,comment:i.Util.trim(e)})},createElementNode:function(t,e,r){return new i.htmlParser.ElementNode({text:t,tagName:e.toLowerCase(),closing:r})},createEntityNode:function(t){return new i.htmlParser.EntityNode({text:t})},createTextNode:function(t){return new i.htmlParser.TextNode({text:t})}}),i.htmlParser.HtmlNode=i.Util.extend(Object,{text:"",constructor:function(t){i.Util.assign(this,t)},getType:i.Util.abstractMethod,getText:function(){return this.text}}),i.htmlParser.CommentNode=i.Util.extend(i.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}}),i.htmlParser.ElementNode=i.Util.extend(i.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}}),i.htmlParser.EntityNode=i.Util.extend(i.htmlParser.HtmlNode,{getType:function(){return"entity"}}),i.htmlParser.TextNode=i.Util.extend(i.htmlParser.HtmlNode,{getType:function(){return"text"}}),i.matchParser.MatchParser=i.Util.extend(Object,{urls:!0,email:!0,twitter:!0,phone:!0,hashtag:!1,stripPrefix:!0,matcherRegex:(r=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,n=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|press|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,new RegExp(["(",/(^|[^\w])@(\w{1,15})/.source,")","|","(",/(?:[\-;:&=\+\$,\w\.]+@)/.source,r.source,n.source,")","|","(","(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,r.source,")","|","(?:","(.?//)?",/(?:www\.)/.source,r.source,")","|","(?:","(.?//)?",r.source,n.source,")",")","(?:"+/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/.source+")?",")","|","(",/(?:\+?\d{1,3}[-\s.])?\(?\d{3}\)?[-\s.]?\d{3}[-\s.]\d{4}/.source,")","|","(",/(^|[^\w])#(\w{1,139})/.source,")"].join(""),"gi")),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,constructor:function(t){i.Util.assign(this,t),this.matchValidator=new i.MatchValidator},replace:function(t,e,r){var n=this;return t.replace(this.matcherRegex,(function(t,i,s,a,o,c,h,l,u,g,m,f,p){var d=n.processCandidateMatch(t,i,s,a,o,c,h,l,u,g,m,f,p);if(d){var x=e.call(r,d.match);return d.prefixStr+x+d.suffixStr}return t}))},processCandidateMatch:function(t,e,r,n,s,a,o,c,h,l,u,g,m){var f,p=c||h,d="",x="";if(a&&!this.urls||s&&!this.email||l&&!this.phone||e&&!this.twitter||u&&!this.hashtag||!this.matchValidator.isValidMatch(a,o,p))return null;if(this.matchHasUnbalancedClosingParen(t))t=t.substr(0,t.length-1),x=")";else{var v=this.matchHasInvalidCharAfterTld(a,o);v>-1&&(x=t.substr(v),t=t.substr(0,v))}if(s)f=new i.match.Email({matchedText:t,email:s});else if(e)r&&(d=r,t=t.slice(1)),f=new i.match.Twitter({matchedText:t,twitterHandle:n});else if(l){var w=t.replace(/\D/g,"");f=new i.match.Phone({matchedText:t,number:w})}else if(u)g&&(d=g,t=t.slice(1)),f=new i.match.Hashtag({matchedText:t,serviceName:this.hashtag,hashtag:m});else{if(p){var b=p.match(this.charBeforeProtocolRelMatchRegex)[1]||"";b&&(d=b,t=t.slice(1))}f=new i.match.Url({matchedText:t,url:t,protocolUrlMatch:!!o,protocolRelativeMatch:!!p,stripPrefix:this.stripPrefix})}return{prefixStr:d,suffixStr:x,match:f}},matchHasUnbalancedClosingParen:function(t){if(")"===t.charAt(t.length-1)){var e=t.match(/\(/g),r=t.match(/\)/g);if((e&&e.length||0)<(r&&r.length||0))return!0}return!1},matchHasInvalidCharAfterTld:function(t,e){if(!t)return-1;var r=0;e&&(r=t.indexOf(":"),t=t.slice(r));var n=/^((.?\/\/)?[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.[A-Za-z]+)/.exec(t);return null===n?-1:(r+=n[1].length,t=t.slice(n[1].length),/^[^.A-Za-z:\/?#]/.test(t)?r:-1)}}),i.MatchValidator=i.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(t,e,r){return!(e&&!this.isValidUriScheme(e)||this.urlMatchDoesNotHaveProtocolOrDot(t,e)||this.urlMatchDoesNotHaveAtLeastOneWordChar(t,e)||this.isInvalidProtocolRelativeMatch(r))},isValidUriScheme:function(t){var e=t.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==e&&"vbscript:"!==e},urlMatchDoesNotHaveProtocolOrDot:function(t,e){return!(!t||e&&this.hasFullProtocolRegex.test(e)||-1!==t.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(t,e){return!(!t||!e)&&!this.hasWordCharAfterProtocolRegex.test(t)},isInvalidProtocolRelativeMatch:function(t){return!!t&&this.invalidProtocolRelMatchRegex.test(t)}}),i.match.Match=i.Util.extend(Object,{constructor:function(t){i.Util.assign(this,t)},getType:i.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:i.Util.abstractMethod,getAnchorText:i.Util.abstractMethod}),i.match.Email=i.Util.extend(i.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),i.match.Hashtag=i.Util.extend(i.match.Match,{getType:function(){return"hashtag"},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var t=this.serviceName,e=this.hashtag;switch(t){case"twitter":return"https://twitter.com/hashtag/"+e;case"facebook":return"https://www.facebook.com/hashtag/"+e;case"instagram":return"https://instagram.com/explore/tags/"+e;default:throw new Error("Unknown service name to point hashtag to: ",t)}},getAnchorText:function(){return"#"+this.hashtag}}),i.match.Phone=i.Util.extend(i.match.Match,{getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+this.number},getAnchorText:function(){return this.matchedText}}),i.match.Twitter=i.Util.extend(i.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),i.match.Url=i.Util.extend(i.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var t=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(t=this.url="http://"+t,this.protocolPrepended=!0),t},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var t=this.getUrl();return this.protocolRelativeMatch&&(t=this.stripProtocolRelativePrefix(t)),this.stripPrefix&&(t=this.stripUrlPrefix(t)),t=this.removeTrailingSlash(t)},stripUrlPrefix:function(t){return t.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(t){return t.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(t){return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}}),i}));
/* end of /views/pagetypes/reacties/js/lib/autolinker.js */
/* start of /views/pagetypes/reacties/js/lib/classnames.js (as is) */
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var e={}.hasOwnProperty;function n(){for(var r=[],t=0;t<arguments.length;t++){var f=arguments[t];if(f){var o=typeof f;if("string"===o||"number"===o)r.push(f);else if(Array.isArray(f)&&f.length){var i=n.apply(null,f);i&&r.push(i)}else if("object"===o)for(var a in f)e.call(f,a)&&f[a]&&r.push(a)}}return r.join(" ")}"undefined"!=typeof module&&module.exports?(n.default=n,module.exports=n):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],(function(){return n})):window.classNames=n}();
/* end of /views/pagetypes/reacties/js/lib/classnames.js */
/* start of /views/pagetypes/reacties/js/model.js (as is) */
"use strict";function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Immutable={put:function(e,t,r){var n=_toConsumableArray(e);return n[t]=r,n},set:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return(t=$).extend.apply(t,[{},e].concat(n))},unset:function(e){for(var t=$.extend({},e),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach((function(e){return delete t[e]})),t}},EnumFactory={createEnum:function(e){var t=[];for(var r in e){var n=e[r];"number"==typeof n&&(t[n]=r)}return Immutable.set(e,{labels:t})}},ReactiesService={InitStatus:EnumFactory.createEnum({Void:0,Loading:1,Error:2,Ready:3,Expanding:4}),SyncStatus:EnumFactory.createEnum({Local:0,Sent:1,Error:2,Stored:3,CaptchaInvalid:4,Duplicate:5,Remote:6,NotFound:7}),ReactieStatus:EnumFactory.createEnum({Unknown:0,Visible:1,WaitingForModerator:2,HiddenByUser:3,HiddenByModerator:4}),ReactiesMode:EnumFactory.createEnum({Hide:0,ShowReacties:1,ShowForm:2,Open:3}),ImageMode:EnumFactory.createEnum({None:0,All:1})},ReactiesFollowService={},ReactiesDefaultTheme={buttonBase:"reacties-knop",buttonLabel:"",cancelCommentButton:"reactie-cancel",cancelFollowButton:"reactie-cancel",commentsModuleInitializing:"reacties-initial",errorSummary:"reactie-message-container",fieldInvalidMessage:"error-message",moderateAllowButton:"reactie-moderate-allow",moderateDisallowButton:"reactie-moderate-disallow",sendCommentButton:"reactie-send",senderDisallowButton:"reactie-sender-disallow",sendFollowButton:"reactie-send",syncErrorIgnoreButton:"reactie-ignore",syncErrorRetryButton:"reactie-retry"},ReactiesResources=function(){function e(t){var r=this;_classCallCheck(this,e),this._months="en"===(t&&t.lang)?["January","February","March","April","May","June","July","August","September","October","November","December"]:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],this.notificationOptions=[{id:"0",label:"Geen e-mail bij reacties",emailRequired:!1},{id:"2",label:"Alleen e-mail bij directe reacties op mijn eigen reactie",emailRequired:!0},{id:"4",label:"E-mail bij alle nieuwe reacties op deze pagina",emailRequired:!0}].map((function(e){return Immutable.set(e,{label:r.getText(e.label)})}))}return _createClass(e,[{key:"_isSameYear",value:function(e,t){return e.getFullYear()===t.getFullYear()}},{key:"_isSameDay",value:function(e,t){return this._isSameYear(e,t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()}},{key:"_padWithZeros",value:function(e,t){return t>0&&t<=12&&e<=Math.pow(10,t)-1?("000000000000"+e).slice(-t):e}},{key:"getHtml",value:function(e){return{__html:iprox.referenceLists.getHtml(e,"reacties")}}},{key:"getHtmlOrNull",value:function(e){var t=iprox.referenceLists.getHtmlOrNull(e,"reacties");return t?{__html:t.replace(/<br><\/br>/gi,"<br/>")}:t}},{key:"getText",value:function(t){for(var r=iprox.referenceLists.getText(t,"reacties"),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return e.replaceText.apply(e,[r].concat(a))}},{key:"getTextOrNull",value:function(t){for(var r=iprox.referenceLists.getTextOrNull(t,"reacties"),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return e.replaceText.apply(e,[r].concat(a))}},{key:"formatDateTime",value:function(e,t){var r=Immutable.set({showCurrentYear:!1,showCurrentDay:!1,showOnlyDate:!1,showOnlyTime:!1},t||{}),n=r.showCurrentYear,a=r.showCurrentDay,i=r.showOnlyDate,o=r.showOnlyTime,s=new Date,c=n||!this._isSameYear(e,s),u=a||!this._isSameDay(e,s);return i?"".concat(e.getDate()," ").concat(this._months[e.getMonth()]).concat(c?" ".concat(e.getFullYear()):""," "):o?"".concat(e.getHours(),":").concat(this._padWithZeros(e.getMinutes(),2)):(u?"".concat(e.getDate()," ").concat(this._months[e.getMonth()]).concat(c?" ".concat(e.getFullYear()):""," "):"")+"".concat(e.getHours(),":").concat(this._padWithZeros(e.getMinutes(),2))}}],[{key:"replaceText",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e?e.replace(/\{\d+\}/g,(function(e){var t=r[parseInt(e.substring(1,e.length-1),10)];return null==t?"":t})):e}}]),e}(),ReactiesModelBase=function(){function e(){var t=this;_classCallCheck(this,e);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];n.forEach((function(e){return t.importObject(e)})),this.parentId=_.last(this.ancestors)||null}return _createClass(e,[{key:"importObject",value:function(e){if("object"===_typeof(e))for(var t in e){var r=e[t];null!=r&&(this[t]=t.indexOf("DateTime")===t.length-8?new Date(r):r)}}}]),e}(),ReactiesListModel=function(e){_inherits(r,ReactiesModelBase);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this,r.defaults].concat(a))).reacties=e.reacties.map((function(t){return new ReactieModel(t,{ancestors:e.ancestors})})),e.reacties.forEach((function(t){return t.reactiesList=new r(t.reactiesList,{hasAuthorizationModerator:e.hasAuthorizationModerator})})),e}return _createClass(r,[{key:"_locateChild",value:function(e){var t=this,n=_.findIndex(this.reacties,(function(t){return t.id===e[0]})),a=this.reacties[n];return{combine:function(e){var i=Immutable.put(t.reacties,n,new ReactieModel(a,{reactiesList:e}));return new r(t,{reacties:i})},tail:_.rest(e),reactiesList:a.reactiesList}}},{key:"findList",value:function(e){return 0===(e=_.isArray(e)?e:[]).length?this:_.find(this.reacties,(function(t){return t.id===e[0]})).reactiesList.findList(_.rest(e))}},{key:"prependLocal",value:function(e){if(_.isArray(e)&&e.length>0){var t=this._locateChild(e),n=t.combine,a=t.tail;return n(t.reactiesList.prependLocal(a))}return new r(this,{reacties:[new ReactieModel({itmIdt:this.itmIdt,ancestors:this.ancestors,syncStatus:ReactiesService.SyncStatus.Local})].concat(_toConsumableArray(this.reacties))})}},{key:"update",value:function(e,t){if(t=t||e.ancestors,_.isArray(t)&&t.length>0){var n=this._locateChild(t),a=n.combine,i=n.tail;return a(n.reactiesList.update(e,i))}var o=_.findIndex(this.reacties,(function(t){return t.id===e.id}));if(o<0){if(!this.reacties.length||this.reacties[0].id)return this;o=0}var s=new ReactieModel(this.reacties[o],e);return new r(this,{reacties:Immutable.put(this.reacties,o,s)})}},{key:"shift",value:function(e){if(_.isArray(e)&&e.length>0){var t=this._locateChild(e),n=t.combine,a=t.tail;return n(t.reactiesList.shift(a))}return this.reacties.length&&this.reacties[0].syncStatus!==ReactiesService.SyncStatus.Stored?new r(this,{reacties:this.reacties.slice(1)}):this}},{key:"setInitStatus",value:function(e,t){if(_.isArray(t)&&t.length>0){var n=this._locateChild(t),a=n.combine,i=n.tail;return a(n.reactiesList.setInitStatus(e,i))}return new r(this,{initStatus:e})}},{key:"append",value:function(e,t,n,a){if(_.isArray(n)&&n.length>0){var i=this._locateChild(n),o=i.combine,s=i.tail;return o(i.reactiesList.append(e,t,s,a))}var c={};return new r(this,e,{initStatus:t,reacties:_.chain(this.reacties.concat(e.reacties)).filter((function(e){return e.id in c?(c[e.id]=Immutable.set(c[e.id],{reactiesList:c[e.id].reactiesList.append(e.reactiesList)}),!1):(c[e.id]=e,!0)})).map((function(e){return c[e.id]})).value(),found:a})}}]),r}();ReactiesListModel.defaults={ancestors:[],hasAuthorizationModerator:!1,itmIdt:null,more:!1,page:0,reacties:[],verifiedUser:!1,initStatus:ReactiesService.SyncStatus.Void};var ReactieModel=function(e){_inherits(r,ReactiesModelBase);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this,r.defaults].concat(a))).reactiesList?e.id&&!e.reactiesList.parentId&&(e.reactiesList=new ReactiesListModel(e.reactiesList,{ancestors:[].concat(_toConsumableArray(e.ancestors),[e.id])})):e.reactiesList=new ReactiesListModel({page:-1,more:e.hasChildren,initStatus:ReactiesService.InitStatus.Ready,ancestors:[].concat(_toConsumableArray(e.ancestors),[e.id])}),e}return _createClass(r)}();ReactieModel.defaults={ancestors:[],bodyText:"",hasChildren:!1,itmIdt:null,name:"",email:"",submittedDateTime:null,status:ReactiesService.ReactieStatus.Unknown,syncStatus:ReactiesService.SyncStatus.Stored,image:"",imageFileName:""};var ReactiesFollowModel=function(e){_inherits(r,ReactiesModelBase);var t=_createSuper(r);function r(){_classCallCheck(this,r);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.call.apply(t,[this,r.defaults].concat(n))}return _createClass(r)}();ReactiesFollowModel.defaults={email:"",followerSecret:null,itmIdt:null,notification:4,syncStatus:ReactiesService.SyncStatus.Local};
/* end of /views/pagetypes/reacties/js/model.js */
/* start of /views/pagetypes/reacties/js/store.js (as is) */
"use strict";function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach((function(e){_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var CaptchaService=function(){var t={get:Reflux.createAction({asyncResult:!0,children:["started"]})};return t.get.listen((function(){t.get.started(),$.ajax({url:"/appidt/captcha",type:"get"}).done((function(e){t.get.completed(e)})).fail((function(){t.get.failed()}))})),{actions:t}}(),ReactiesFollowServiceFactory={createStore:function(){var t=new ReactiesFollowModel({itmIdt:itmIdt}),e={clear:Reflux.createAction(),follow:Reflux.createAction({asyncResult:!0,children:["started"]}),get:Reflux.createAction({asyncResult:!0,children:["started"]})},a=(Reflux.createStore({listenables:e,onFollow:function(a,i){var n=new ReactiesFollowModel(a,{itmIdt:itmIdt,syncStatus:ReactiesService.SyncStatus.Sent,followerSecret:t.followerSecret});e.follow.started(n),$.ajax({url:"/appidt/items/".concat(itmIdt,"/reacties/follow"),type:"post",data:n}).done((function(t){e.follow.completed(new ReactiesFollowModel(t,{itmIdt:itmIdt}))})).fail((function(t){e.follow.failed(t.status)}))},onGet:function(t){var a=t.followerSecret;e.get.started({followerSecret:a}),$.ajax({url:"/appidt/items/".concat(itmIdt,"/reacties/follow?followerSecret=").concat(a),type:"get"}).done((function(t){e.get.completed(new ReactiesFollowModel(t,{itmIdt:itmIdt}))})).fail((function(t){e.get.failed(t.status)}))}}),Reflux.createStore({setState:function(e){this.trigger(t=new ReactiesFollowModel(t,e))},getInitialState:function(){return t},listenables:e,onClear:function(){this.trigger(t=new ReactiesFollowModel({itmIdt:itmIdt}))},onFollowStarted:function(t){this.setState({syncStatus:ReactiesService.SyncStatus.Sent})},onFollowCompleted:function(t){this.setState(_objectSpread(_objectSpread({},t),{},{syncStatus:ReactiesService.SyncStatus.Stored}))},onFollowFailed:function(t){this.setState({syncStatus:409===t?ReactiesService.SyncStatus.CaptchaInvalid:410===t?ReactiesService.SyncStatus.Duplicate:ReactiesService.SyncStatus.Error})},onGetStarted:function(t){var e=t.followerSecret;this.setState({syncStatus:ReactiesService.SyncStatus.Remote,followerSecret:e})},onGetCompleted:function(t){this.setState(_objectSpread(_objectSpread({},t),{},{syncStatus:ReactiesService.SyncStatus.Local}))},onGetFailed:function(t){this.setState({syncStatus:ReactiesService.SyncStatus.NotFound})}}));return{actions:e,store:a}},addStoreMembers:function(t){var e={};t.get=function(t){var a=t.itmIdt;return e[a]||(e[a]=ReactiesFollowServiceFactory.createStore(t))},t.empty=ReactiesFollowServiceFactory.createStore({})}};ReactiesFollowServiceFactory.addStoreMembers(ReactiesFollowService);var ReactiesServiceFactory={createStore:function(t){var e=t.itmIdt,a=t.reactieLink,i={add:Reflux.createAction(),cancel:Reflux.createAction(),update:Reflux.createAction(),submit:Reflux.createAction({asyncResult:!0,children:["started"]}),view:Reflux.createAction({asyncResult:!0,children:["started"]}),more:Reflux.createAction({asyncResult:!0,children:["started"]}),all:Reflux.createAction({asyncResult:!0,children:["started"]}),allow:Reflux.createAction({asyncResult:!0,children:["started"]}),disallow:Reflux.createAction({asyncResult:!0,children:["started"]}),subscribe:Reflux.createAction({asyncResult:!0,children:["started"]})},n=(Reflux.createStore({listenables:i,onSubmit:function(t,a){var n=new ReactieModel(t,{syncStatus:ReactiesService.SyncStatus.Sent,ancestors:a});i.submit.started(n),$.ajax({url:"/appidt/items/".concat(e,"/reacties"),type:"post",data:n}).done((function(t){i.submit.completed(new ReactieModel(t,{itmIdt:e,ancestors:a}))})).fail((function(t){i.submit.failed(new ReactieModel(n,{syncStatus:t&&409===t.status?ReactiesService.SyncStatus.CaptchaInvalid:ReactiesService.SyncStatus.Error}))}))},onView:function(t){var n=this;t=_.isArray(t)?t:[],i.view.started(new ReactiesListModel({itmIdt:e,ancestors:t})),!t[0]&&a?$.ajax({url:"/appidt/items/".concat(e,"/reacties/").concat(a.id,"?senderSecret=").concat(a.senderSecret||"","&moderatorSecret=").concat(a.moderatorSecret||""),type:"get"}).done((function(a){i.view.completed(new ReactiesListModel(a,{itmIdt:e,ancestors:t}),!0)})).fail((function(){n.view(t,!1)})):this.view(t)},view:function(t,a){var n=t[0]?"/topics/".concat(_.last(t)):"";$.ajax({url:"/appidt/items/".concat(e,"/reacties").concat(n),type:"get"}).done((function(n){i.view.completed(new ReactiesListModel(n,{itmIdt:e,ancestors:t}),a)})).fail((function(e){i.view.failed(t,e)}))},onMore:function(t){var a=(t=_.isArray(t)?t:[])[0]?"/topics/".concat(_.last(t)):"",c=n.findList(t),o=c.more,s=c.page,r=c.initStatus;o&&r!==ReactiesService.InitStatus.Expanding&&(i.more.started(t),$.ajax({url:"/appidt/items/".concat(e,"/reacties").concat(a,"/pages/").concat(s+1),type:"get"}).done((function(a){i.more.completed(new ReactiesListModel(a,{itmIdt:e,ancestors:t}))})).fail((function(e){i.more.failed(t,e)})))},onAll:function(){n.initStatus!==ReactiesService.InitStatus.Expanding&&(i.all.started(),$.ajax({url:"/appidt/items/".concat(e,"/reacties/all"),type:"get"}).done((function(t){i.all.completed(new ReactiesListModel(t,{itmIdt:e}))})).fail((function(t){i.all.failed(t)})))},onAllow:function(t,e){this.sendUpdate(t,e,"allow")},onDisallow:function(t,e){this.sendUpdate(t,e,"disallow")},onSubscribe:function(t,e){this.sendUpdate(t,e,"subscribe")},sendUpdate:function(t,a,n){a=t.ancestors||a||[];var c=new ReactieModel(t,{syncStatus:ReactiesService.SyncStatus.Sent,ancestors:a,itmIdt:e});i[n].started(c,a),$.ajax({url:"/appidt/items/".concat(e,"/reacties/").concat(n),type:"post",data:t}).done((function(t){i[n].completed(new ReactieModel(t,{itmIdt:e,ancestors:a}))})).fail((function(t){i[n].failed(new ReactieModel(c,{syncStatus:ReactiesService.SyncStatus.Error}))}))}}),new ReactiesListModel({itmIdt:e})),c=Reflux.createStore({setState:function(t){this.trigger(n=t)},init:function(){"number"==typeof e&&i.view()},getInitialState:function(){return n},listenables:i,onAdd:function(t,e){this.setState(n.prependLocal(e))},onUpdate:function(t,e){this.setState(n.update(new ReactieModel(t,{ancestors:e,syncStatus:ReactiesService.SyncStatus.Local})))},onCancel:function(t){this.setState(n.shift(t.ancestors))},onSubmitStarted:function(t){this.setState(n.update(t))},onSubmitCompleted:function(t){this.setState(n.update(t))},onSubmitFailed:function(t){this.setState(n.update(t))},onViewStarted:function(t){this.setState(n.setInitStatus(ReactiesService.InitStatus.Loading,t.ancestors))},onViewCompleted:function(t,e){this.setState(n.append(t,ReactiesService.InitStatus.Ready,t.ancestors,e))},onViewFailed:function(t,e){this.setState(n.setInitStatus(ReactiesService.InitStatus.Error,t))},onMoreStarted:function(t){this.setState(n.setInitStatus(ReactiesService.InitStatus.Expanding,t))},onMoreCompleted:function(t){var e=t.more&&n.findList(t.ancestors).reacties.length;this.setState(n.append(t,ReactiesService.InitStatus.Ready,t.ancestors));var a=t.more&&n.findList(t.ancestors).reacties.length;t.more&&a===e&&i.more()},onMoreFailed:function(t){this.setState(n.setInitStatus(ReactiesService.InitStatus.Error))},onAllStarted:function(){this.setState(n.setInitStatus(ReactiesService.InitStatus.Expanding))},onAllCompleted:function(t){this.setState(n.append(t,ReactiesService.InitStatus.Ready))},onAllFailed:function(t){this.setState(n.setInitStatus(ReactiesService.InitStatus.Error))},onAllowStarted:function(t){this.setState(n.update(t))},onAllowCompleted:function(t){this.setState(n.update(t))},onAllowFailed:function(t){this.setState(n.update(t))},onSubscribeStarted:function(t){this.setState(n.update(t))},onSubscribeCompleted:function(t){this.setState(n.update(t))},onSubscribeFailed:function(t){this.setState(n.update(t))},onDisallowStarted:function(t){this.setState(n.update(t))},onDisallowCompleted:function(t){this.setState(n.update(t))},onDisallowFailed:function(t){this.setState(n.update(t))}});return{actions:i,store:c}},addStoreMembers:function(t){var e={};t.get=function(t){var a=t.itmIdt;return e[a]||(e[a]=ReactiesServiceFactory.createStore(t))},t.empty=ReactiesServiceFactory.createStore({})}};ReactiesServiceFactory.addStoreMembers(ReactiesService);
/* end of /views/pagetypes/reacties/js/store.js */
/* start of /views/pagetypes/reacties/js/invoervelden.js (as is) */
"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_extends.apply(this,arguments)}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=_superPropBase(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:a):n.value}},_get.apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,r=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var ReactComponentBase=function(e){_inherits(a,React.Component);var t=_createSuper(a);function a(){return _classCallCheck(this,a),t.apply(this,arguments)}return _createClass(a,[{key:"_bind",value:function(){for(var e=this,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];a.forEach((function(t){return e[t]=e[t].bind(e)}))}},{key:"getUid",value:function(){return Math.floor(65535*Math.random())}}]),a}(),InvoerVeld=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),(r=t.call(this,e)).theme=r.props.theme,r._bind("toggleExplanationDisplay"),r.state={explanationDisplay:"none"},r.fieldValidation=new IproxFieldValidation(e.required,e.type),r}return _createClass(a,[{key:"render",value:function(){var e,t,a=this.props,r=a.fieldId,n=a.label,i=a.required,o=a.resources,s=a.validation,l=a.invalidMessage,p=a.type;this.fieldValidation.setFieldState(s.required,s.pattern),i&&(e=React.createElement("span",{className:"verplicht"},"Â ",o.getText("(verplicht)"))),!1===s.pattern&&(t=React.createElement("div",{className:this.theme.fieldInvalidMessage,role:"alert"},o.getText("Dit veld is ongeldig ingevuld",n.includes(o.getTextOrNull("captcha"))?o.getText("reactie captcha"):n.toLowerCase()))),!1===s.required&&(t=React.createElement("div",{className:this.theme.fieldInvalidMessage,role:"alert"},o.getText("Dit veld is verplicht",n.includes(o.getTextOrNull("captcha"))?o.getText("reactie captcha"):n.toLowerCase()))),s.invalid&&l&&(t=React.createElement("div",{className:this.theme.fieldInvalidMessage,role:"alert"},o.getText(l)));var c="".concat(o.getText("Toelichting")),u=this.props.explanation?React.createElement("div",{className:"none"===this.state.explanationDisplay?"closed input-explanation":"open input-explanation"},React.createElement("a",{href:"#",title:c,onClick:this.toggleExplanationDisplay,"aria-expanded":"none"!==this.state.explanationDisplay},c),React.createElement("div",{className:"toelichting",style:{display:this.state.explanationDisplay}},React.createElement("p",{dangerouslySetInnerHTML:this.props.explanation}))):null;return"checkbox"===p?React.createElement("div",{className:"".concat(this.fieldValidation.validationClasses).concat(this.props.disabled?" rij_disabled":"")},React.createElement("div",{className:"invoer"},this.props.children,React.createElement("label",{htmlFor:r},n,e))):React.createElement("div",{className:"".concat(this.fieldValidation.validationClasses).concat(this.props.disabled?" rij_disabled":"")},React.createElement("div",{className:"label"},React.createElement("label",{htmlFor:r},n,e)),t,React.createElement("div",{className:"invoer"},this.props.children),u)}},{key:"toggleExplanationDisplay",value:function(e){this.setState({explanationDisplay:"none"===this.state.explanationDisplay?"block":"none"}),e.preventDefault()}}]),a}();InvoerVeld.defaultProps={invalidMessage:"field {0} is not valid.",type:"text"},InvoerVeld.propTypes={theme:React.PropTypes.object.isRequired,label:React.PropTypes.string.isRequired,onChange:React.PropTypes.func,required:React.PropTypes.bool,disabled:React.PropTypes.bool,invalidMessage:React.PropTypes.string,explanation:React.PropTypes.shape({__html:React.PropTypes.string.isRequired}),resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired}),type:React.PropTypes.string,autoComplete:React.PropTypes.string,autoFocus:React.PropTypes.bool};var WaardeInvoer=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var r,n;_classCallCheck(this,a),(n=t.call(this,e)).theme=n.props.theme,n._bind("handleBlur","handleChange","validateRequired"),n.id=_get((r=_assertThisInitialized(n),_getPrototypeOf(a.prototype)),"getUid",r).call(r);var i=n.isEmpty(n.props.value),o=!i,s=!o||n.isValid(n.props);return n.state={needsValidation:o,empty:i,valid:s,dirty:!1},n.needsValidationDebounced=_.debounce((function(){return!n.componentUnmounted&&n.needsValidation(!0)}),n.props.options.debounce),n}return _createClass(a,[{key:"handleBlur",value:function(e){this.needsValidation(!0)}},{key:"handleChange",value:function(e){this.needsValidationDebounced()}},{key:"needsValidation",value:function(e){this.setState({needsValidation:e})}},{key:"isValid",value:function(e){return!(e.required&&this.isEmpty(e.value))}},{key:"isEmpty",value:function(e){return void 0===e||""===e}},{key:"validateRequired",value:function(e,t){return this.props.required?!this.isEmpty(e):null}},{key:"componentWillUnmount",value:function(){this.componentUnmounted=!0}}]),a}();WaardeInvoer.defaultProps={options:{debounce:1500}},WaardeInvoer.propTypes={theme:React.PropTypes.object.isRequired,required:React.PropTypes.bool,value:React.PropTypes.string,options:React.PropTypes.shape({debounce:React.PropTypes.number})};var PlatInvoerVeld=function(e){_inherits(a,WaardeInvoer);var t=_createSuper(a);function a(e){var r;if(_classCallCheck(this,a),(r=t.call(this,e))._bind("validatePattern"),r.props.pattern){var n="^(?:".concat(r.props.pattern,")$");r.patternRegEx=new RegExp(n)}return r.state.validation={pattern:r.validatePattern(r.props.value),required:r.validateRequired(r.props.value)},r}return _createClass(a,[{key:"componentDidMount",value:function(){this.props.defaultValue&&this.setValue(this.props.defaultValue)}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.setValue&&e.setValue!==this.props.setValue&&this.setValue(e.setValue),e.required!==this.props.required&&(this.props=e,this.fieldValidation=new IproxFieldValidation(this.props.required,this.props.type),this.setValue(this.state.value))}},{key:"validatePattern",value:function(e){return this.isEmpty(e)||!this.props.pattern?null:this.patternRegEx.test(e)}},{key:"handleChange",value:function(e){_get(_getPrototypeOf(a.prototype),"handleChange",this).call(this,e),this.setValue(e.target.value)}},{key:"setValue",value:function(e){var t=!0===this.props.trim&&e?e.trim():e,a=this.isEmpty(t),r=t!==this.props.value,n={pattern:this.validatePattern(t),required:this.validateRequired(t)},i=!1!==n.pattern&&!1!==n.required;this.setState({empty:a,dirty:r,validation:n,value:t,valid:i}),this.props.onChange({empty:a,valid:i,value:t})}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.label,r=e.required,n=e.explanation,i=e.resources,o=e.autoComplete,s=e.autoFocus,l=this.state.value,p="field_".concat(this.id),c=this.state.needsValidation?this.state.validation:{},u="email"===t?{invalidMessage:"field {0} is not a valid email address."}:{};return React.createElement(InvoerVeld,_extends({theme:this.theme,fieldId:p,type:t,value:l,required:r,valid:this.state.valid,label:a,explanation:n,resources:i,validation:c},u),React.createElement("input",{autoComplete:o,type:t,value:l,id:p,className:"input",onChange:this.handleChange,onBlur:this.handleBlur,required:r,autoFocus:s}))}}]),a}();PlatInvoerVeld.defaultProps=_objectSpread(_objectSpread(_objectSpread({},InvoerVeld.defaultProps),WaardeInvoer.defaultProps),{},{defaultValue:""}),PlatInvoerVeld.propTypes=_objectSpread(_objectSpread(_objectSpread({},InvoerVeld.propTypes),WaardeInvoer.propTypes),{},{setValue:React.PropTypes.string,trim:React.PropTypes.bool,pattern:React.PropTypes.string});var CaptchaInvoerVeld=function(e){_inherits(a,React.Component);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),(r=t.call(this,e)).state={},r.props.captcha().then((function(e){r.setState({captcha:e.question}),r.props.onCaptchaChange({key:e.key})})),r}return _createClass(a,[{key:"render",value:function(){var e=this.props.resources,t=e.getText,a=e.getTextOrNull,r=a("captcha"),n=a("="),i=this.state.captcha?this.state.captcha.split(" ").map(t).join(" ")+(n?" ".concat(n):""):void 0,o=this.state.captcha?r?"".concat(r," ").concat(i):i:t("Vraag");return React.createElement(PlatInvoerVeld,_extends({},this.props,{required:!0,label:this.props.label||o,explanation:this.props.explanation||this.props.resources.getHtmlOrNull("Captcha_explanation")}))}}]),a}();CaptchaInvoerVeld.defaultProps=_objectSpread({},PlatInvoerVeld.defaultProps),CaptchaInvoerVeld.propTypes=Immutable.unset(_objectSpread(_objectSpread({},PlatInvoerVeld.propTypes),{},{label:React.PropTypes.string,captcha:React.PropTypes.func.isRequired,onCaptchaChange:React.PropTypes.func.isRequired}),"required");var CheckboxInvoerVeld=function(e){_inherits(a,WaardeInvoer);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),(r=t.call(this,e)).state.validation={required:r.validateRequired(r.props.value,r.props)},r.state.checked=e.defaultValue,r}return _createClass(a,[{key:"handleChange",value:function(e){_get(_getPrototypeOf(a.prototype),"handleChange",this).call(this,e);var t=!this.state.checked;this.setState({checked:t}),this.props.onChange({checked:t})}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.label,r=e.value,n=e.required,i=e.resources,o="field_".concat(this.id),s=this.state.needsValidation?this.state.validation:{};return React.createElement(InvoerVeld,{theme:this.theme,fieldId:o,type:t,value:r,required:n,valid:this.state.valid,label:a,resources:i,validation:s},React.createElement("input",{type:t,id:o,onChange:this.handleChange,onBlur:this.handleBlur,required:n,checked:this.state.checked}))}}]),a}();CheckboxInvoerVeld.defaultProps=_objectSpread(_objectSpread({},PlatInvoerVeld.defaultProps),{},{type:"checkbox",defaultValue:!1}),CheckboxInvoerVeld.propTypes=Immutable.unset(_objectSpread(_objectSpread({},PlatInvoerVeld.propTypes),{},{label:React.PropTypes.string}));var TekstvlakInvoerVeld=function(e){_inherits(a,WaardeInvoer);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),(r=t.call(this,e)).state.validation={required:r.validateRequired(r.props.value,r.props)},r}return _createClass(a,[{key:"handleChange",value:function(e){_get(_getPrototypeOf(a.prototype),"handleChange",this).call(this,e);var t=!1===this.props.trim?e.target.value:e.target.value.trim(),r=this.isEmpty(t),n=t!==this.props.value,i={required:this.validateRequired(t)},o=!1!==i.required;this.setState({empty:r,dirty:n,validation:i,value:t,valid:o}),this.props.onChange({empty:r,valid:o,value:t})}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.label,r=e.value,n=e.required,i=e.cols,o=e.rows,s=e.resources,l=(e.onChange,"field_".concat(this.id)),p=this.state.needsValidation?this.state.validation:{};return React.createElement(InvoerVeld,{theme:this.theme,fieldId:l,type:t,value:r,required:n,valid:this.state.valid,label:a,resources:s,validation:p},React.createElement("textarea",{defaultValue:r,id:l,className:"input norows nocols",cols:i,rows:o,onChange:this.handleChange,onBlur:this.handleBlur,required:n}))}}]),a}();TekstvlakInvoerVeld.defaultProps=_objectSpread(_objectSpread(_objectSpread({},InvoerVeld.defaultProps),WaardeInvoer.defaultProps),{},{value:"",rows:6,cols:40,type:"textarea"}),TekstvlakInvoerVeld.propTypes=_objectSpread(_objectSpread(_objectSpread({},InvoerVeld.propTypes),WaardeInvoer.propTypes),{},{value:React.PropTypes.string,trim:React.PropTypes.bool,rows:React.PropTypes.number,cols:React.PropTypes.number});var SelectieInvoerVeld=function(e){_inherits(a,WaardeInvoer);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),(r=t.call(this,e)).state.validation={required:r.validateRequired(r.props.value,r.props)},r.state.value=r.props.value,r}return _createClass(a,[{key:"handleChange",value:function(e){_get(_getPrototypeOf(a.prototype),"handleChange",this).call(this,e),this.setValue(e.target.value)}},{key:"setValue",value:function(e){var t=this.isEmpty(e),a=e!==this.props.value,r={required:this.validateRequired(e)},n=!1!==r.required;this.setState({empty:t,dirty:a,validation:r,value:e,valid:n}),this.props.onChange({empty:t,valid:n,value:e})}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.label,r=e.value,n=e.required,i=e.disabled,o=e.resources,s=(e.onChange,"field_".concat(this.id)),l=this.state.needsValidation?this.state.validation:{};return React.createElement(InvoerVeld,{theme:this.theme,fieldId:s,type:t,value:r,required:n,disabled:i,valid:this.state.valid,label:a,resources:o,validation:l},React.createElement("select",{id:s,value:this.state.value,className:"input select",onChange:this.handleChange,onBlur:this.handleBlur,required:n,disabled:!0===this.props.disabled},this.props.options.map((function(e){return React.createElement("option",{key:e.id,value:e.id},e.label)}))))}}]),a}();SelectieInvoerVeld.defaultProps=_objectSpread(_objectSpread(_objectSpread({},InvoerVeld.defaultProps),WaardeInvoer.defaultProps),{},{type:"pulldown",value:"",options:[]}),SelectieInvoerVeld.propTypes=_objectSpread(_objectSpread(_objectSpread({},InvoerVeld.propTypes),WaardeInvoer.propTypes),{},{value:React.PropTypes.string,options:React.PropTypes.array});var ButtonWithConfirm=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),(r=t.call(this,e)).theme=r.props.theme,r._bind("handleClick","handleBlur"),r.state={confirmed:!1},r}return _createClass(a,[{key:"resetButton",value:function(){this.setState({confirmed:!1}),"function"==typeof this.props.onCancel&&this.props.onCancel()}},{key:"buttonText",value:function(){return this.state.confirmed?this.props.confirmMessage:this.props.children}},{key:"render",value:function(){return React.createElement("button",{type:"button",className:this.props.className,onBlur:this.handleBlur,onClick:this.handleClick},React.createElement("span",{className:this.theme.buttonLabel},this.buttonText()))}},{key:"handleClick",value:function(e){if(this.state.confirmed)return this.props.onClick(e),void this.setState({confirmed:!1});this.setState({confirmed:!0})}},{key:"handleBlur",value:function(e){this.state.confirmed&&this.resetButton()}}]),a}();ButtonWithConfirm.propTypes={theme:React.PropTypes.object.isRequired,onCancel:React.PropTypes.func,onClick:React.PropTypes.func.isRequired,confirmMessage:React.PropTypes.string},ButtonWithConfirm.defaultProps={confirmMessage:"Bevestig"};var ImageInvoerVeld=function(e){_inherits(a,WaardeInvoer);var t=_createSuper(a);function a(e){return _classCallCheck(this,a),t.call(this,e)}return _createClass(a,[{key:"handleChange",value:function(e){_get(_getPrototypeOf(a.prototype),"handleChange",this).call(this,e),this.setValue(e.target)}},{key:"setValue",value:function(e){var t=e.files,a=0===t.length,r=a?null:t[0],n=r.name;this.setState({empty:a,dirty:true,value:n,valid:true,file:r}),this.props.onChange({empty:a,dirty:true,value:n,valid:true,file:r})}},{key:"validateRequired",value:function(e,t){return null}},{key:"validatePattern",value:function(e){return null}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.label,r=(e.required,e.explanation),n=e.resources,i=e.accept,o=e.imageValid,s=this.state,l=s.value,p=s.valid,c="field_".concat(this.id),u={},d={};return"invalidType"===o&&(d={invalidMessage:"Bestandstype afbeelding is ongeldig"},u={invalid:!0}),"invalidSize"===o&&(d={invalidMessage:"Afbeelding is te groot"},u={invalid:!0}),React.createElement(InvoerVeld,_extends({theme:this.theme,fieldId:c,type:t,value:l,valid:p,label:a,explanation:r,resources:n,validation:u},d),React.createElement("input",{type:t,id:c,className:"input",onChange:this.handleChange,accept:i}))}}]),a}();ImageInvoerVeld.defaultProps=_objectSpread(_objectSpread({},PlatInvoerVeld.defaultProps),{},{type:"file",accept:".jpg,.jpeg,.png,.svg,.gif"}),ImageInvoerVeld.propTypes=_objectSpread({},PlatInvoerVeld.propTypes);
/* end of /views/pagetypes/reacties/js/invoervelden.js */
/* start of /views/pagetypes/reacties/js/fieldvalidation.js (as is) */
"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,r=_getPrototypeOf(e);if(t){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var IproxFieldValidation=function(e){_inherits(i,ReactComponentBase);var t=_createSuper(i);function i(e,r){var s;return _classCallCheck(this,i),(s=t.call(this))._bind("setFieldState","callTriState","setGeldig","setOngeldig","setValid","setInvalid","noValidation","addClass","removeClass","replaceClass","hasClass"),s.classes=["rij","mode_input",s.getTypeClassName(r)],e&&s.classes.push("rij_verplicht"),s}return _createClass(i,[{key:"setFieldState",value:function(e,t){this.hasClass("rij_verplicht")&&this.callTriState(e,this.setGeldig,this.setOngeldig),this.callTriState(t,this.setValid,this.setInvalid,this.noValidation)}},{key:"callTriState",value:function(e,t,i,r){switch(e){case!0:return"function"==typeof t&&t();case!1:return"function"==typeof i&&i();case null:return"function"==typeof r&&r()}return null}},{key:"setGeldig",value:function(){this.hasClass("rij_verplicht")&&this.hasClass("rij_ongeldig")&&this.replaceClass("rij_ongeldig","rij_geldig")}},{key:"setOngeldig",value:function(){this.hasClass("rij_verplicht")&&this.replaceClass("rij_geldig","rij_ongeldig")}},{key:"setValid",value:function(){this.replaceClass("rij_invalid","rij_valid"),this.hasClass("rij_ongeldig")&&this.replaceClass("rij_ongeldig","rij_geldig")}},{key:"setInvalid",value:function(){this.replaceClass("rij_valid","rij_invalid")}},{key:"noValidation",value:function(){this.removeClass("rij_invalid"),this.removeClass("rij_valid"),this.hasClass("rij_verplicht")||this.removeClass("rij_ongeldig")}},{key:"addClass",value:function(e){this.hasClass(e)||this.classes.push(e)}},{key:"removeClass",value:function(e){var t=this.classes.indexOf(e);-1!==t&&this.classes.splice(t,1)}},{key:"replaceClass",value:function(e,t){this.removeClass(e),this.addClass(t)}},{key:"hasClass",value:function(e){return-1!==this.classes.indexOf(e)}},{key:"validationClasses",get:function(){return this.hasClass("rij_invalid")&&this.replaceClass("rij_geldig","rij_ongeldig"),this.classes.join(" ").trim()}},{key:"getTypeClassName",value:function(e){return{email:"mail"}[e]||e}}]),i}();
/* end of /views/pagetypes/reacties/js/fieldvalidation.js */
/* start of /views/pagetypes/reacties/js/views.js (as is) */
"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:a):r.value}},_get.apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},_extends.apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,r,s=[],n=!0,o=!1;try{for(a=a.call(e);!(n=(i=a.next()).done)&&(s.push(i.value),!t||s.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var ReactieStatus=ReactiesService.ReactieStatus,ReactiesMode=ReactiesService.ReactiesMode,ImageMode=ReactiesService.ImageMode,SyncStatus=ReactiesService.SyncStatus,InitStatus=ReactiesService.InitStatus,ReactieDatum=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(){return _classCallCheck(this,a),t.apply(this,arguments)}return _createClass(a,[{key:"render",value:function(){return void 0===this.props.date?React.createElement("span",{className:"reactie-meta-datum verborgen"}):React.createElement("time",{className:"reactie-meta-datum",dateTime:this.props.date.toISOString()},this.props.resources.formatDateTime(this.props.date))}}]),a}();ReactieDatum.propTypes={date:React.PropTypes.object,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired})};var Reactie=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e)).theme=i.props.theme,i._bind("onChange","onCancel","onSubmit","onModerateAllow","onModerateDisallow","onReadMoreClick","onSenderNotificationChange","onSenderRemove"),i.notificationOptions=i.props.resources.notificationOptions,i.props.level>=i.props.config.maxDepth&&(i.notificationOptions=i.notificationOptions.filter((function(e){return"2"!==e.id}))),i.maxLines=i.props.config.maxLines||5,i.state={showFullMessage:!1,reactie:i.props.reactie,focused:!1},i.reactieEvents={},!0!==i.props.data.hasAuthorizationModerator||i.props.reactie.moderatorSecret||(i.reactieEvents.onMouseEnter=function(e){return i.setState({focused:!0})},i.reactieEvents.onMouseLeave=function(e){return i.setState({focused:!1})},i.reactieEvents.onTouchStart=function(e){return i.setState({focused:!0})}),i}return _createClass(a,[{key:"componentWillMount",value:function(){this.getText=this.props.resources.getText}},{key:"componentDidMount",value:function(){if(this.props.reactie.syncStatus===SyncStatus.Stored){this.jReactieItem=$("#reactie-".concat(this.props.reactie.id)),this.jReactieBody=$("#reactie-".concat(this.props.reactie.id," > .reactie-entry-container > .reactie-entry > .reactie-body"));var e=_slicedToArray([this.jReactieBody.css("height"),this.jReactieBody.css("line-height")].map((function(e){return parseInt(e,10)})),2),t=e[0],a=e[1],i=Math.floor(t/a),r=a*Math.max(1,this.maxLines-1);if(i>this.maxLines&&(this.jReactieItem.addClass("reactie-wrapped"),this.jReactieBody.css("max-height",r)),this.props.reactie.linked)$("#reactie-".concat(this.props.reactie.id)).scrollTo()}}},{key:"linkedText",value:function(e){var t=$("<div></div>").text(e).html();return{__html:Autolinker.link(t)}}},{key:"isInEditMode",value:function(){return!0===this.props.data.hasAuthorizationModerator||this.props.reactie.senderSecret||this.props.reactie.moderatorSecret}},{key:"moderatorButtons",value:function(){var e=React.createElement("button",{type:"button",className:classNames(this.theme.buttonBase,this.theme.moderateAllowButton),onClick:this.onModerateAllow},React.createElement("span",{className:this.theme.buttonLabel},this.getText("Goedkeuren"))),t=React.createElement(ButtonWithConfirm,{theme:this.theme,className:classNames(this.theme.buttonBase,this.theme.moderateDisallowButton),onClick:this.onModerateDisallow,confirmMessage:this.getText("Bevestig")},this.getText("Verwijderen"));return React.createElement("div",{className:"reactie-moderate-knoppen knoppen"},this.props.reactie.status===ReactieStatus.WaitingForModerator&&e,t)}},{key:"senderMessage",value:function(){switch(this.props.reactie.status){case ReactieStatus.WaitingForModerator:return React.createElement("div",{key:"previewMessage",className:"reactie-mode-preview"},this.getText("Deze reactie is niet zichtbaar op de website. Dit is een preview."));case ReactieStatus.HiddenByUser:return React.createElement("div",{key:"previewMessage",className:"reactie-mode-preview"},this.getText("Deze bijdrage is door de reageerder verwijderd."));case ReactieStatus.HiddenByModerator:return React.createElement("div",{key:"previewMessage",className:"reactie-mode-preview"},this.getText("Deze bijdrage voldoet niet aan de spelregels en is daarom verwijderd."));default:return null}}},{key:"senderNotification",value:function(){var e=this.state.reactie.notification?this.state.reactie.notification.toString():"0";return React.createElement("form",{key:"f",className:"reactie-sender-formulier formulier",noValidate:!0},React.createElement("fieldset",{className:"reacties-formulier-sender"},React.createElement(SelectieInvoerVeld,_extends({},this.props,{value:e,options:this.notificationOptions,onChange:this.onSenderNotificationChange,label:this.getText("Notificatie")}))))}},{key:"senderButtons",value:function(){this.state.reactie.notification&&this.state.reactie.notification.toString();return React.createElement("div",{key:"k",className:"reactie-sender-knoppen knoppen"},React.createElement(ButtonWithConfirm,{theme:this.theme,className:classNames(this.theme.buttonBase,this.theme.senderDisllowButton),onClick:this.onSenderRemove,confirmMessage:this.getText("Bevestig")},this.getText("Verwijderen")))}},{key:"reactiesList",value:function(){return React.createElement("div",{className:"reactie-thread","data-level":this.props.reactie.ancestors.length+1},React.createElement(ReactiesList,_extends({},this.props,{level:this.props.reactie.ancestors.length+1,data:this.props.reactie.reactiesList})))}},{key:"renderLocal",value:function(){if(""===this.props.reactie.bodyText&&""===this.props.reactie.name)return null;var e=SyncStatus.labels[this.props.reactie.syncStatus].toLowerCase(),t=this.props.reactie.submittedDateTime||new Date;return React.createElement("div",{className:"reactie reactie-local reactie-syncstatus-"+e},React.createElement("div",{className:"reactie-entry-container"},React.createElement("div",{className:"reactie-entry"},React.createElement("div",{className:"reactie-meta"},React.createElement("span",{className:"reactie-meta-name".concat(this.props.reactie.verifiedUser?" official-account":"")},this.props.reactie.name&&(this.props.config.showEmail&&this.props.reactie.email?React.createElement("a",{className:"externLink mailto",href:"mailto:"+this.props.reactie.email},this.props.reactie.name):this.props.reactie.name)),React.createElement("span",{className:"reactie-meta-sep"}," - "),React.createElement(ReactieDatum,{date:t,resources:this.props.resources}),this.props.reactie.verifiedUser&&React.createElement("span",{className:"reactie-meta-verified"},this.getText("Geverifieerd account"))),React.createElement("div",{className:"reactie-body",dangerouslySetInnerHTML:this.linkedText(this.props.reactie.bodyText)}),this.props.reactie.imageFileName&&this.props.config.imageMode===ImageMode.All&&this.props.reactie.id&&this.props.reactie.status===ReactieStatus.Visible&&React.createElement("div",{className:"reactie-image"},React.createElement("img",{src:"/publish/reacties/".concat(this.props.reactie.id,"/").concat(this.props.reactie.imageFileName)}))),this.props.reactie.syncStatus===SyncStatus.Error&&[React.createElement("div",{key:"message",className:this.theme.errorSummary},React.createElement("p",{role:"alert",key:"p"},this.getText("Opslaan is mislukt."))),React.createElement("div",{key:"retry-buttons",className:"reactie-retry-knoppen knoppen"},React.createElement("button",{key:"a",type:"button",className:classNames(this.theme.buttonBase,this.theme.syncErrorIgnoreButton),onClick:this.onCancel},React.createElement("span",{className:this.theme.buttonLabel},this.getText("Laat maar"))),React.createElement("button",{key:"b",type:"button",className:classNames(this.theme.buttonBase,this.theme.syncErrorRetryButton),onClick:this.onSubmit},React.createElement("span",{className:this.theme.buttonLabel},this.getText("Probeer nogmaals"))))],this.props.reactie.syncStatus===SyncStatus.CaptchaInvalid&&[React.createElement("div",{className:this.theme.errorSummary},React.createElement("p",{role:"alert",key:"p"},this.getText("captcha is not valid."))),React.createElement(CaptchaReactieForm,_extends({},this.props,{onChange:this.onChange,onSubmit:this.onSubmit,key:"p1"}))]))}},{key:"renderVisible",value:function(){var e=["reactie","reactie-zichtbaar"],t=SyncStatus.labels[this.props.reactie.syncStatus].toLowerCase();e.push("reactie-syncstatus-"+t);var a=this.props.reactie.senderSecret,i=this.props.reactie.senderSecret;this.props.reactie.linked&&e.push("reactie-linked");var r=this.props.reactie.submittedDateTime||new Date,s=this.props.data.hasAuthorizationModerator&&(this.props.reactie.status===ReactieStatus.WaitingForModerator||this.state.focused)||this.props.reactie.moderatorSecret;return React.createElement("div",{id:"reactie-".concat(this.props.reactie.id),className:classNames(e)},React.createElement("div",_extends({className:"reactie-entry-container"},this.reactieEvents),React.createElement("div",{className:"reactie-entry"},a&&this.senderMessage(),React.createElement("div",{key:"meta",className:"reactie-meta"},React.createElement("span",{className:"reactie-meta-name".concat(this.props.reactie.verifiedUser?" official-account":"")},this.props.reactie.name&&(this.props.config.showEmail&&this.props.reactie.email?React.createElement("a",{className:"externLink mailto",href:"mailto:"+this.props.reactie.email},this.props.reactie.name):this.props.reactie.name)),React.createElement("span",{className:"reactie-meta-sep"}," - "),React.createElement(ReactieDatum,{date:r,resources:this.props.resources}),this.props.reactie.verifiedUser&&React.createElement("span",{className:"reactie-meta-verified"},this.getText("Geverifieerd account")),s&&!i&&this.moderatorButtons()),React.createElement("div",{key:"body",className:"reactie-body",dangerouslySetInnerHTML:this.linkedText(this.props.reactie.bodyText),onClick:this.onReadMoreClick}),this.props.reactie.imageFileName&&this.props.config.imageMode===ImageMode.All&&this.props.reactie.id&&this.props.reactie.status===ReactieStatus.Visible&&React.createElement("div",{className:"reactie-image"},React.createElement("img",{src:"/publish/reacties/".concat(this.props.reactie.id,"/").concat(this.props.reactie.imageFileName)})),React.createElement("div",{key:"more-link",className:"reactie-toon-meer-link","aria-hidden":"true"},React.createElement("a",{href:"#",onClick:this.onReadMoreClick},this.getText("Toon hele bericht"),React.createElement("span",{className:"reactie-links-context-details"}," ",this.getText("Toon volledige reactie details",this.props.reactie.name,this.props.resources.formatDateTime(r,{showOnlyDate:!0}),this.props.resources.formatDateTime(r,{showOnlyTime:!0}))))),React.createElement("div",{key:"actions",className:"reactie-actions"},i&&this.senderNotification(),i&&this.senderButtons()))),this.reactiesList())}},{key:"renderWaitingForModerator",value:function(){return this.isInEditMode()?this.renderVisible():this.basicReactieWrapper("reactie-wacht-op-moderator","Deze bijdrage wacht op goedkeuring.")}},{key:"renderHiddenByUser",value:function(){var e=this.props.reactie.senderSecret?this.senderNotification:null;return this.basicReactieWrapper("reactie-verborgen-door-gebruiker","Deze bijdrage is door de reageerder verwijderd.",e,!0)}},{key:"renderHiddenByModerator",value:function(){var e=this.props.reactie.senderSecret?this.senderNotification:null;return this.basicReactieWrapper("reactie-verborgen-door-moderator","Deze bijdrage voldoet niet aan de spelregels en is daarom verwijderd.",e,!0)}},{key:"basicReactieWrapper",value:function(e,t,a,i){var r=a?React.createElement("div",{key:"actions",className:"reactie-actions"},a.call(this)):null;return React.createElement("div",{id:"reactie-".concat(this.props.reactie.id),className:"reactie "+e},React.createElement("div",{className:"reactie-entry-container"},React.createElement("div",{className:"reactie-entry"},React.createElement("div",{className:"reactie-body"},this.getText(t)),r),this.props.reactie.imageFileName&&this.props.config.imageMode===ImageMode.All&&this.props.reactie.id&&this.props.reactie.status===ReactieStatus.Visible&&React.createElement("div",{className:"reactie-image"},React.createElement("img",{src:"/publish/reacties/".concat(this.props.reactie.id,"/").concat(this.props.reactie.imageFileName)}))),i&&this.reactiesList())}},{key:"render",value:function(){if(this.props.reactie.syncStatus!==SyncStatus.Stored)return this.renderLocal();switch(this.props.reactie.status){case ReactieStatus.Visible:return this.renderVisible();case ReactieStatus.WaitingForModerator:return this.renderWaitingForModerator();case ReactieStatus.HiddenByUser:return this.renderHiddenByUser();case ReactieStatus.HiddenByModerator:return this.renderHiddenByModerator();default:return null}}},{key:"onReadMoreClick",value:function(e){this.state.showFullMessage||(e.preventDefault(),this.jReactieItem.removeClass("reactie-wrapped"),this.jReactieBody.css("max-height","none"),this.setState({showFullMessage:!0}))}},{key:"onCancel",value:function(){this.props.onCancel(Immutable.set(this.state.reactie,{ancestors:this.props.data.ancestors}))}},{key:"onChange",value:function(e){this.state.reactie=e}},{key:"onSubmit",value:function(){this.props.onSubmit(this.state.reactie)}},{key:"onSenderNotificationChange",value:function(e){e.valid;var t=e.value,a=_.find(this.notificationOptions,(function(e){return e.id===t})),i=Immutable.set(this.state.reactie,{notification:a.id});this.setState({reactie:i}),this.props.onSubscribe(i)}},{key:"onSenderRemove",value:function(){this.props.onDisallow(this.props.reactie)}},{key:"onModerateAllow",value:function(){this.props.onAllow(this.props.reactie)}},{key:"onModerateDisallow",value:function(){this.props.onDisallow(this.props.reactie)}}]),a}();Reactie.propTypes={theme:React.PropTypes.object.isRequired,config:React.PropTypes.object.isRequired,level:React.PropTypes.number.isRequired,reactie:React.PropTypes.object.isRequired,onCancel:React.PropTypes.func.isRequired,onSubmit:React.PropTypes.func.isRequired,onAllow:React.PropTypes.func.isRequired,onDisallow:React.PropTypes.func.isRequired,onSubscribe:React.PropTypes.func.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired})};var ReactieFormBase=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e))._bind("onCaptchaChange","onCaptchaAnswerChange","onCancel","onSubmit"),i.state={captchaAnswerValid:!1,reactie:{itmIdt:i.props.config.itmIdt}},i}return _createClass(a,[{key:"onCaptchaChange",value:function(e){var t=e.key,a=e.question,i=Immutable.set(this.state.reactie,{captchaKey:t,captchaQuestion:a});this.setState({reactie:i}),this.props.onChange(i)}},{key:"onCaptchaAnswerChange",value:function(e){var t=e.valid,a=e.value,i=Immutable.set(this.state.reactie,{captchaAnswer:a});this.setState({reactie:i,captchaAnswerValid:t}),this.props.onChange(i)}},{key:"onCancel",value:function(e){this.props.onCancel(Immutable.set(this.state.reactie,{ancestors:this.props.data.ancestors}))}},{key:"onSubmit",value:function(e){this.props.onSubmit(this.state.reactie)}}]),a}();ReactieFormBase.propTypes={theme:React.PropTypes.object.isRequired,config:React.PropTypes.object.isRequired,onCancel:React.PropTypes.func.isRequired,onChange:React.PropTypes.func.isRequired,onSubmit:React.PropTypes.func.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired}),autoComplete:React.PropTypes.string,autoFocus:React.PropTypes.bool};var CaptchaReactieForm=function(e){_inherits(a,ReactieFormBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e)).theme=i.props.theme,i.props.reactie&&(i.state.reactie=i.props.reactie),i}return _createClass(a,[{key:"render",value:function(){var e=this.props.resources.getText,t=(this.props.resources.getTextOrNull,this.state.captchaAnswerValid);return React.createElement("form",{className:"reactie-captcha-formulier formulier",noValidate:!0},React.createElement("fieldset",{className:"reacties-formulier-captcha"},React.createElement("legend",null,e("Captcha")),React.createElement(CaptchaInvoerVeld,_extends({},this.props,{onChange:this.onCaptchaAnswerChange,onCaptchaChange:this.onCaptchaChange,captcha:CaptchaService.actions.get}))),React.createElement("div",{className:"knoppen reactie-captcha-knoppen"},React.createElement("button",{type:"button",onClick:this.onSubmit,disabled:!t,className:classNames(this.theme.buttonBase,this.theme.sendCommentButton,{disabled:!t})},React.createElement("span",{className:this.theme.buttonLabel},e("Verzenden")))))}}]),a}();CaptchaReactieForm.propTypes=_objectSpread(_objectSpread({},ReactieFormBase.propTypes),{},{reactie:React.PropTypes.object.isRequired});var ReactieForm=function(e){_inherits(a,ReactieFormBase);var t=_createSuper(a);function a(e){var i;_classCallCheck(this,a),_defineProperty(_assertThisInitialized(i=t.call(this,e)),"onPlaceAsVerifiedUserChange",(function(e){var t=Immutable.set(i.state.reactie,{verifiedUser:e.checked});i.setState({reactie:t}),i.props.onChange(t)})),i.theme=i.props.theme,i._bind("onNaamChange","onEmailChange","onImageChange","onBerichtChange","onNotificationChange"),i.notificationOptions=i.props.resources.notificationOptions,i.props.level>=i.props.config.maxDepth&&(i.notificationOptions=i.notificationOptions.filter((function(e){return"2"!==e.id})));var r=i.notificationOptions[0];return i.state={naamValid:!1,emailValid:!r.emailRequired,berichtValid:!1,captchaAnswerValid:!i.props.config.captcha,imageValid:!0,reactie:{itmIdt:i.props.config.itmIdt,notification:r.id}},i}return _createClass(a,[{key:"componentDidMount",value:function(){var e=this;this.props.config&&this.props.config.prefillUserFields&&$.ajax({url:"/appidt/usersession",type:"get"}).done((function(t){t.displayName&&e.setState({setNameValue:t.displayName}),t.emailAddress&&setTimeout((function(){return e.setState({setEmailValue:t.emailAddress})}))}))}},{key:"render",value:function(){var e=this.props.resources.getText,t=this.props.resources.getHtmlOrNull,a=this.state.naamValid&&this.state.emailValid&&"invalidSize"!==this.state.imageValid&&"invalidType"!==this.state.imageValid&&this.state.captchaAnswerValid&&this.state.berichtValid,i=t("Reactie_intro");return React.createElement("div",{className:"reacties-formulier-container"},React.createElement("form",{className:"reacties-formulier formulier",noValidate:!0},React.createElement("fieldset",{className:"reacties-formulier-velden"},React.createElement("legend",null,e("Reactie")),i&&React.createElement("div",{className:"reacties-formulier-intro iprox-content iprox-rich-content",dangerouslySetInnerHTML:i}),React.createElement("div",{className:"reacties-formulier-knoppen knoppen reacties-cancel"},React.createElement("button",{type:"button",className:classNames(this.theme.buttonBase,this.theme.cancelCommentButton),onClick:this.onCancel,"aria-expanded":"true"},React.createElement("span",{className:this.theme.buttonLabel},e("Annuleren")))),React.createElement(PlatInvoerVeld,_extends({},this.props,{label:e("Naam"),onChange:this.onNaamChange,setValue:this.state.setNameValue,required:!0,autoComplete:"name",autoFocus:this.props.config.initiallyFormHidden})),this.props.data.hasAuthorizationModerator&&React.createElement(CheckboxInvoerVeld,_extends({},this.props,{label:e("Plaatsen als geverifieerd account"),onChange:this.onPlaceAsVerifiedUserChange})),React.createElement(PlatInvoerVeld,_extends({},this.props,{label:e("E-mail"),type:"email",onChange:this.onEmailChange,setValue:this.state.setEmailValue,required:this.state.reactie.notification>0,pattern:this.props.config.emailRegex,autoComplete:"email"})),React.createElement(TekstvlakInvoerVeld,_extends({},this.props,{onChange:this.onBerichtChange,label:e("Uw reactie"),required:!0})),React.createElement(SelectieInvoerVeld,_extends({},this.props,{value:this.state.reactie.notification,options:this.notificationOptions,onChange:this.onNotificationChange,label:e("Notificatie"),required:!0})),this.props.config.imageMode===ImageMode.All&&React.createElement(ImageInvoerVeld,_extends({},this.props,{label:e("Image"),onChange:this.onImageChange,imageValid:this.state.imageValid})),this.props.config.captcha&&React.createElement(CaptchaInvoerVeld,_extends({},this.props,{onChange:this.onCaptchaAnswerChange,onCaptchaChange:this.onCaptchaChange,captcha:CaptchaService.actions.get}))),React.createElement("div",{className:"reacties-formulier-knoppen knoppen"},React.createElement("button",{type:"submit",className:classNames(this.theme.buttonBase,this.theme.sendCommentButton,{disabled:!a}),onClick:this.onSubmit,disabled:!a},React.createElement("span",{className:this.theme.buttonLabel},e("Verzenden"))))))}},{key:"onNaamChange",value:function(e){var t=e.valid,a=e.value,i=Immutable.set(this.state.reactie,{name:a});this.setState({reactie:i,naamValid:t}),this.props.onChange(i)}},{key:"onEmailChange",value:function(e){var t=e.valid,a=e.value,i=Immutable.set(this.state.reactie,{email:a});this.setState({reactie:i,emailValid:t}),this.props.onChange(i)}},{key:"onImageChange",value:function(e){var t=this.state;if(e.file&&e.file.size){var a=e.value,i=this,r=".jpg,.jpeg,.png,.svg,.gif".split(","),s=!1;if(_.each(r,(function(e){-1!==a.toLowerCase().indexOf(e,a.length-e.length)&&(s=!0)})),!s){var n=Immutable.set(t.reactie,{image:"",imageFileName:""});return void i.setState({reactie:n,imageValid:"invalidType"})}if(this.props.config.maxFileSize>0&&e.file.size>this.props.config.maxFileSize){var o=Immutable.set(t.reactie,{image:"",imageFileName:""});return void i.setState({reactie:o,imageValid:"invalidSize"})}var c=new FileReader;c.onload=function(){for(var e=this.result,r=new Uint8Array(e),s=r.byteLength,n="",o=0;o<s;o++)n+=String.fromCharCode(r[o]);var c=btoa(n),l=Immutable.set(t.reactie,{image:c,imageFileName:a});i.setState({reactie:l,imageValid:!0})},c.readAsArrayBuffer(e.file)}else{var l=Immutable.set(t.reactie,{image:"",imageFileName:""});this.setState({reactie:l,imageValid:!0})}}},{key:"onNotificationChange",value:function(e){e.valid;var t=e.value,a=_.find(this.notificationOptions,(function(e){return e.id===t})),i=Immutable.set(this.state.reactie,{notification:a.id});this.setState({reactie:i}),this.props.onChange(i)}},{key:"onBerichtChange",value:function(e){var t=e.valid,a=e.value,i=Immutable.set(this.state.reactie,{bodyText:a});this.setState({reactie:i,berichtValid:t}),this.props.onChange(i)}}]),a}();ReactieForm.propTypes=_objectSpread({},ReactieFormBase.propTypes);var ReactiesList=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e)).theme=i.props.theme,i._bind("onAdd","onCancel","onSubmit","onUpdate","onExpandAllClick","onMoreClick"),i.state={adding:!1,formOpen:i.props.config.reactiesMode===ReactiesMode.Open&&!i.props.config.initiallyFormHidden&&0===(e.data.ancestors||[]).length},i.config=i.props.config,i.getText=i.props.resources.getText,i}return _createClass(a,[{key:"renderExpandAll",value:function(){if(!this.props.config.enableExpandAll||this.props.data.parentId||this.props.data.initStatus!==InitStatus.Ready)return null;return function e(t){return t&&(t.more||_.some(t.reacties,(function(t){return e(t.reactiesList)})))}(this.props.data)?React.createElement("div",{className:"reacties-expandall"},React.createElement("div",{className:"reacties-expandall-inner"},React.createElement("a",{href:"#","aria-expanded":"false",onClick:this.onExpandAllClick},this.getText("Alles uitklappen")))):null}},{key:"renderMoreAction",value:function(){return React.createElement("div",{className:"reacties-more"},React.createElement("div",{className:"reacties-more-inner"},React.createElement("a",{href:"#","aria-expanded":"false",onClick:this.onMoreClick},this.getText("Oudere reacties weergeven"))))}},{key:"renderNoReacties",value:function(){return React.createElement("div",{className:"reacties-noreacties"},React.createElement("div",{className:"reacties-noreacties-inner",dangerouslySetInnerHTML:this.props.resources.getHtml("geen reacties")}))}},{key:"renderReactieActions",value:function(){var e=this.props.config.reactiesMode===ReactiesMode.Open&&this.props.level<=this.props.config.maxDepth&&!this.state.formOpen,t=this.props.data.more&&0===this.props.data.reacties.length,a=this.props,i=a.level,r=a.reactie,s=a.resources;return e||t?React.createElement("div",{className:"reactie-actions-knoppen knoppen"},e&&React.createElement("a",{href:"#",className:classNames(this.theme.buttonBase,"reactie-reageren"),"aria-expanded":this.state.adding,onClick:this.onAdd},s.getTextOrNull("Reageren-".concat(i))||this.getText("Reageren"),r&&React.createElement("span",{className:"reactie-links-context-details"}," ",this.getText("op deze reactie",r.name,s.formatDateTime(r.submittedDateTime,{showOnlyDate:!0}),s.formatDateTime(r.submittedDateTime,{showOnlyTime:!0})))),e&&t&&React.createElement("span",null," of "),t&&React.createElement("a",{href:"#",className:classNames(this.theme.buttonBase,"reactie-toon-reacties"),"aria-expanded":"false",onClick:this.onMoreClick},this.getText("Toon reacties"),React.createElement("span",{className:"reactie-links-context-details"}," ",this.getText("op deze reactie",r.name,s.formatDateTime(r.submittedDateTime,{showOnlyDate:!0}),s.formatDateTime(r.submittedDateTime,{showOnlyTime:!0}))))):null}},{key:"render",value:function(){var e=this,t=this.props.data.more&&this.props.data.reacties.length>0,a=!this.props.data.more&&0===this.props.level&&!_.some(this.props.data.reacties,(function(e){return e.syncStatus===SyncStatus.Stored||""!==e.bodyText||""!==e.name}))&&this.props.resources.getHtmlOrNull("geen reacties");return React.createElement("div",{className:"reacties-set"},this.renderExpandAll(),this.state.formOpen&&React.createElement(ReactieForm,_extends({},this.props,{onChange:this.onUpdate,onSubmit:this.onSubmit,onCancel:this.onCancel,key:"p1"})),this.renderReactieActions(),React.createElement("div",{className:"reacties-lijst"},this.props.data.reacties.map((function(t){return React.createElement(Reactie,_extends({},e.props,{reactie:t,onCancel:e.props.actions.cancel,onSubmit:e.props.actions.submit,onAllow:e.props.actions.allow,onDisallow:e.props.actions.disallow,onSubscribe:e.props.actions.subscribe,key:"number"==typeof t.id?t.id:0}))}))),t&&this.renderMoreAction(),a&&this.renderNoReacties())}},{key:"onExpandAllClick",value:function(e){e.preventDefault(),this.props.actions.all()}},{key:"onMoreClick",value:function(e){e.preventDefault(),this.props.actions.more(this.props.data.ancestors)}},{key:"onAdd",value:function(e){e&&e.preventDefault(),this.setState({adding:!0,formOpen:!0}),this.props.actions.add({itmIdt:this.props.config.itmIdt},this.props.data.ancestors)}},{key:"onCancel",value:function(e){this.setState({adding:!1,formOpen:!1}),this.props.actions.cancel(e)}},{key:"onSubmit",value:function(e){this.setState({adding:!1,formOpen:!1}),this.props.actions.submit(e,this.props.data.ancestors)}},{key:"onUpdate",value:function(e){this.state.adding||this.onAdd(),this.props.actions.update(e,this.props.data.ancestors)}}]),a}();ReactiesList.propTypes={theme:React.PropTypes.object.isRequired,config:React.PropTypes.object.isRequired,level:React.PropTypes.number.isRequired,data:React.PropTypes.object.isRequired,actions:React.PropTypes.object.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired})};var SmartComponentBase=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var i;for(var r in _classCallCheck(this,a),(i=t.call(this,e)).theme=Object.assign({},ReactiesDefaultTheme,i.props.theme),i.state={data:{}},i._bind("setData"),Reflux.ListenerMethods)i[r]=Reflux.ListenerMethods[r];return i}return _createClass(a,[{key:"componentDidMount",value:function(){var e=this.flux;void 0!==e&&(this.setState({actions:e.actions}),"store"in e&&this.listenTo(e.store,this.setData,this.setData))}},{key:"componentWillUnmount",value:function(){this.setState({actions:void 0}),this.stopListeningToAll()}},{key:"setData",value:function(e){this.setState({data:e})}}]),a}(),Reacties=function(e){_inherits(a,SmartComponentBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e)).getText=i.props.resources.getText,i}return _createClass(a,[{key:"flux",get:function(){return ReactiesService.get(this.props.config)}},{key:"render",value:function(){return-1!==[InitStatus.Ready,InitStatus.Expanding].indexOf(this.state.data.initStatus)?React.createElement("div",{className:"reacties-inner"},React.createElement("h3",null,this.getText("Reacties")),React.createElement(ReactiesList,_extends({},this.props,{theme:this.theme,level:0},this.state))):this.state.data.initStatus===InitStatus.Error?React.createElement("div",{className:"reacties reacties-error"},this.getText("Fout bij laden reacties.")):React.createElement("div",{className:classNames("reacties",this.theme.commentsModuleInitializing)})}}]),a}();Reacties.propTypes={theme:React.PropTypes.object,config:React.PropTypes.object.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired})};var ReactiesFollowForm=function(e){var t=e.captcha,a=e.captchaGet,i=e.emailRegex,r=e.emailValue,s=e.notificationOption,n=e.notificationOptions,o=e.onCancel,c=e.onCaptchaAnswerChange,l=e.onCaptchaChange,p=e.onEmailChange,u=e.onNotificationChange,h=e.onSubmit,m=e.resources,d=e.valid,f=e.theme;return React.createElement("div",{className:"reacties-formulier-container"},React.createElement("form",{className:"reacties-formulier formulier",noValidate:!0,onSubmit:function(e){h(),e.preventDefault()}},React.createElement("fieldset",{className:"reacties-formulier-velden"},React.createElement("legend",null,m.getText("Reactie")),React.createElement("div",{className:"reacties-formulier-knoppen knoppen reacties-cancel"},React.createElement("button",{type:"button",className:classNames(f.buttonBase,f.cancelFollowButton),"aria-expanded":"true",onClick:o},React.createElement("span",{className:f.buttonLabel},m.getText("Annuleren")))),React.createElement(PlatInvoerVeld,{autoComplete:"email",theme:f,resources:m,onChange:p,label:m.getText("E-mail"),type:"email",required:!0,pattern:i,defaultValue:r,autoFocus:"true"}),t&&React.createElement(CaptchaInvoerVeld,{theme:f,resources:m,captcha:a,onChange:c,onCaptchaChange:l}),React.createElement(SelectieInvoerVeld,{theme:f,resources:m,value:s||n[0].id,options:n,onChange:u,label:m.getText("Notificatie"),required:!0,disabled:1===n.length})),React.createElement("div",{className:"reacties-formulier-knoppen knoppen"},React.createElement("button",{type:"submit",className:classNames(f.buttonBase,f.sendFollowButton,{disabled:!d}),disabled:!d},React.createElement("span",{className:f.buttonLabel},m.getText("Verzenden"))))))};ReactiesFollowForm.propTypes={theme:React.PropTypes.object.isRequired,captcha:React.PropTypes.bool,captchaGet:React.PropTypes.func.isRequired,emailRegex:React.PropTypes.string.isRequired,emailValue:React.PropTypes.string,notificationOption:React.PropTypes.string,notificationOptions:React.PropTypes.array.isRequired,onCancel:React.PropTypes.func.isRequired,onCaptchaChange:React.PropTypes.func.isRequired,onCaptchaAnswerChange:React.PropTypes.func.isRequired,onEmailChange:React.PropTypes.func.isRequired,onNotificationChange:React.PropTypes.func.isRequired,onSubmit:React.PropTypes.func.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired}),valid:React.PropTypes.bool.isRequired,autoComplete:React.PropTypes.string,autoFocus:React.PropTypes.bool};var ReactiesFollowMessages={CaptchaInvalid:"captcha is not valid.",Deleted:"Uw abonnement is verwijderd.",Duplicate:"Dit e-mailadres is al ingeschreven.",NotFound:"Geen abonnement gevonden.",Error:"Opslaan is mislukt.",Stored:"Uw abonnement is opgeslagen."},ReactiesFollowState=function(e){_inherits(a,ReactComponentBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e)).theme=i.props.theme,i.state={email:{valid:!!e.data.email,empty:!e.data.email,value:e.data.email},notification:{valid:!0,empty:!("notification"in i.props.data),value:("notification"in i.props.data?i.props.data.notification:4).toString()},captcha:{valid:!1},dirty:!1},i._bind("onEmailChange","onCaptchaChange","onCaptchaAnswerChange","onNotificationChange","submit"),i}return _createClass(a,[{key:"componentWillReceiveProps",value:function(e){e.data.syncStatus!==this.props.data.syncStatus&&e.data.syncStatus===SyncStatus.Stored&&this.setState({dirty:!1})}},{key:"captcha",get:function(){return this.props.config.captcha&&!this.props.data.followerSecret}},{key:"valid",get:function(){return this.props.data.syncStatus!==SyncStatus.Sent&&this.props.data.syncStatus!==SyncStatus.Remote&&this.state.email.valid&&(!this.captcha||this.state.captcha.valid)&&this.state.notification.valid&&this.state.dirty}},{key:"render",value:function(){var e=this.props.data.followerSecret?function(e){return"2"!==e.id}:function(e){return"4"===e.id},t=this.props.resources.getText(ReactiesFollowMessages[this.props.data.syncStatus==SyncStatus.Stored&&this.state.dirty?"Local":this.props.data.syncStatus==SyncStatus.Stored&&"0"===this.state.notification.value?"Deleted":SyncStatus.labels[this.props.data.syncStatus]]);return React.createElement("div",null,React.createElement(ReactiesFollowForm,_extends({},this.props,{captcha:this.captcha,captchaGet:CaptchaService.actions.get,emailRegex:this.props.config.emailRegex,emailValue:this.state.email.value,valid:this.valid,onEmailChange:this.onEmailChange,onNotificationChange:this.onNotificationChange,onCaptchaAnswerChange:this.onCaptchaAnswerChange,onCaptchaChange:this.onCaptchaChange,onSubmit:this.submit,notificationOption:this.state.notification.value,notificationOptions:this.props.resources.notificationOptions.filter(e)})),t&&React.createElement("div",{className:this.theme.errorSummary},React.createElement("p",{role:"alert"},t)))}},{key:"onEmailChange",value:function(e){this.setState({email:e,dirty:!0})}},{key:"onNotificationChange",value:function(e){this.setState({notification:e,dirty:!0})}},{key:"onCaptchaAnswerChange",value:function(e){this.setState({captcha:e,dirty:!0})}},{key:"onCaptchaChange",value:function(e){this.setState({captchaKey:e.key})}},{key:"submit",value:function(){this.valid&&this.props.onSubmit({email:this.state.email.value,notification:this.state.notification.value,captchaAnswer:this.state.captcha.value,captchaKey:this.state.captchaKey})}}]),a}();ReactiesFollowState.propTypes={theme:React.PropTypes.object.isRequired,config:React.PropTypes.object.isRequired,data:React.PropTypes.object.isRequired,onCancel:React.PropTypes.func.isRequired,onSubmit:React.PropTypes.func.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired,notificationOptions:React.PropTypes.array.isRequired})};var ReactiesFollow=function(e){_inherits(a,SmartComponentBase);var t=_createSuper(a);function a(e){var i;return _classCallCheck(this,a),(i=t.call(this,e)).state=Immutable.set(i.state,{formOpen:!1}),i._bind("toggleFormOpen","cancel","submit"),i.props.config.followerSecret&&i.flux.actions.get(i.props.config),i}return _createClass(a,[{key:"flux",get:function(){return ReactiesFollowService.get(this.props.config)}},{key:"render",value:function(){return this.props.config.reactiesMode!==ReactiesMode.Open?null:React.createElement("div",{className:"reacties-follow reacties-follow-".concat(this.state.formOpen?"open":"closed"," reacties-follow-").concat(SyncStatus.labels[this.state.data.syncStatus])},React.createElement("h3",null,React.createElement("a",{href:"#","aria-expanded":this.state.formOpen,onClick:this.toggleFormOpen},this.props.resources.getText("Abonneren"))),this.state.formOpen&&React.createElement(ReactiesFollowState,_extends({},this.props,{theme:this.theme,data:this.state.data,onCancel:this.cancel,onSubmit:this.submit})))}},{key:"setData",value:function(e){this.state.data.syncStatus===SyncStatus.Remote&&e.syncState!==SyncStatus.Remote?this.setState({formOpen:!0,data:e}):_get(_getPrototypeOf(a.prototype),"setData",this).call(this,e)}},{key:"toggleFormOpen",value:function(e){e.preventDefault(),this.state.data.syncStatus!==SyncStatus.Remote&&(this.state.formOpen?this.cancel():this.setState({formOpen:!0}))}},{key:"cancel",value:function(){this.state.actions.clear(),this.setState({formOpen:!1})}},{key:"submit",value:function(e){this.state.actions.follow(e)}}]),a}();ReactiesFollow.propTypes={theme:React.PropTypes.object,config:React.PropTypes.object.isRequired,resources:React.PropTypes.shape({formatDateTime:React.PropTypes.func.isRequired,getText:React.PropTypes.func.isRequired})};
/* end of /views/pagetypes/reacties/js/views.js */
/* start of /views/pagetypes/reacties/js/start.js (as is) */
"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var ReactiesStart=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){try{$("div.reacties.reacties-initial[data-reacties]").each((function(){var e=$(this).data("reacties"),t=$(this).data("reacties-theme");e&&($(this).removeClass().addClass("reacties"),ReactDOM.render(React.createElement(Reacties,{config:e,theme:t,resources:new ReactiesResources({lang:$("html").attr("lang")})}),this))})),$("div.reacties-follow-wrapper.reacties-follow-initial[data-reacties]").each((function(){var e=$(this).data("reacties"),t=$(this).data("reacties-theme");e&&e.reactiesMode===ReactiesService.ReactiesMode.Open?($(this).removeClass().addClass("reacties-follow-wrapper"),ReactDOM.render(React.createElement(ReactiesFollow,{config:e,theme:t,resources:new ReactiesResources({lang:$("html").attr("lang")})}),this)):$(this).remove()}))}catch(e){"object"===("undefined"==typeof console?"undefined":_typeof(console))&&"function"==typeof console.warn&&console.warn(e)}}}]),e}();ReactiesStart.init(),$(ReactiesStart.init);
/* end of /views/pagetypes/reacties/js/start.js */
