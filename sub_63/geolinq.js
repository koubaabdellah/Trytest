/*! For license information please see geolinq.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.geolinq=e():t.geolinq=e()}(self,(function(){return(()=>{var t,e,n,i,r={612:t=>{self,t.exports=(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.d(e,{default:()=>T});var n={};function i(t,e,n,i,r={}){e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);for(const o of e)for(const e of n)o[t](e,i,{capture:!1,...r});return Array.prototype.slice.call(arguments,1)}t.r(n),t.d(n,{adjustableInputNumbers:()=>c,createElementFromString:()=>a,createFromTemplate:()=>s,eventPath:()=>h,off:()=>o,on:()=>r,resolveElement:()=>l});const r=i.bind(null,"addEventListener"),o=i.bind(null,"removeEventListener");function a(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}function s(t){const e=(t,e)=>{const n=t.getAttribute(e);return t.removeAttribute(e),n},n=(t,i={})=>{const r=e(t,":obj"),o=e(t,":ref"),a=r?i[r]={}:i;o&&(i[o]=t);for(const i of Array.from(t.children)){const t=e(i,":arr"),r=n(i,t?{}:a);t&&(a[t]||(a[t]=[])).push(Object.keys(r).length?r:i)}return i};return n(a(t))}function h(t){let e=t.path||t.composedPath&&t.composedPath();if(e)return e;let n=t.target.parentElement;for(e=[t.target,n];n=n.parentElement;)e.push(n);return e.push(document,window),e}function l(t){return t instanceof Element?t:"string"==typeof t?t.split(/>>/g).reduce(((t,e,n,i)=>(t=t.querySelector(e),n<i.length-1?t.shadowRoot:t)),document):null}function c(t,e=(t=>t)){function n(n){const i=[.001,.01,.1][Number(n.shiftKey||2*n.ctrlKey)]*(n.deltaY<0?1:-1);let r=0,o=t.selectionStart;t.value=t.value.replace(/[\d.]+/g,((t,n)=>n<=o&&n+t.length>=o?(o=n,e(Number(t),i,r)):(r++,t))),t.focus(),t.setSelectionRange(o,o),n.preventDefault(),t.dispatchEvent(new Event("input"))}r(t,"focus",(()=>r(window,"wheel",n,{passive:!1}))),r(t,"blur",(()=>o(window,"wheel",n)))}const{min:u,max:f,floor:p,round:d}=Math;function g(t,e,n){e/=100,n/=100;const i=p(t=t/360*6),r=t-i,o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),h=i%6;return[255*[n,a,o,o,s,n][h],255*[s,n,n,a,o,o][h],255*[o,o,s,n,n,a][h]]}function m(t,e,n){const i=(2-(e/=100))*(n/=100)/2;return 0!==i&&(e=1===i?0:i<.5?e*n/(2*i):e*n/(2-2*i)),[t,100*e,100*i]}function y(t,e,n){const i=u(t/=255,e/=255,n/=255),r=f(t,e,n),o=r-i;let a,s;if(0===o)a=s=0;else{s=o/r;const i=((r-t)/6+o/2)/o,h=((r-e)/6+o/2)/o,l=((r-n)/6+o/2)/o;t===r?a=l-h:e===r?a=1/3+i-l:n===r&&(a=2/3+h-i),a<0?a+=1:a>1&&(a-=1)}return[360*a,100*s,100*r]}function v(t,e,n,i){return e/=100,n/=100,[...y(255*(1-u(1,(t/=100)*(1-(i/=100))+i)),255*(1-u(1,e*(1-i)+i)),255*(1-u(1,n*(1-i)+i)))]}function _(t,e,n){e/=100;const i=2*(e*=(n/=100)<.5?n:1-n)/(n+e)*100,r=100*(n+e);return[t,isNaN(i)?0:i,r]}function x(t){return y(...t.match(/.{2}/g).map((t=>parseInt(t,16))))}function w(t=0,e=0,n=0,i=1){const r=(t,e)=>(n=-1)=>e(~n?t.map((t=>Number(t.toFixed(n)))):t),o={h:t,s:e,v:n,a:i,toHSVA(){const t=[o.h,o.s,o.v,o.a];return t.toString=r(t,(t=>`hsva(${t[0]}, ${t[1]}%, ${t[2]}%, ${o.a})`)),t},toHSLA(){const t=[...m(o.h,o.s,o.v),o.a];return t.toString=r(t,(t=>`hsla(${t[0]}, ${t[1]}%, ${t[2]}%, ${o.a})`)),t},toRGBA(){const t=[...g(o.h,o.s,o.v),o.a];return t.toString=r(t,(t=>`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${o.a})`)),t},toCMYK(){const t=function(t,e,n){const i=g(t,e,n),r=i[0]/255,o=i[1]/255,a=i[2]/255,s=u(1-r,1-o,1-a);return[100*(1===s?0:(1-r-s)/(1-s)),100*(1===s?0:(1-o-s)/(1-s)),100*(1===s?0:(1-a-s)/(1-s)),100*s]}(o.h,o.s,o.v);return t.toString=r(t,(t=>`cmyk(${t[0]}%, ${t[1]}%, ${t[2]}%, ${t[3]}%)`)),t},toHEXA(){const t=function(t,e,n){return g(t,e,n).map((t=>d(t).toString(16).padStart(2,"0")))}(o.h,o.s,o.v),e=o.a>=1?"":Number((255*o.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return e&&t.push(e),t.toString=()=>`#${t.join("").toUpperCase()}`,t},clone:()=>w(o.h,o.s,o.v,o.a)};return o}const b=t=>Math.max(Math.min(t,1),0);function M(t){const e={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},t),_keyboard(t){const{options:n}=e,{type:i,key:r}=t;if(document.activeElement===n.wrapper){const{lock:n}=e.options,o="ArrowUp"===r,a="ArrowRight"===r,s="ArrowDown"===r,h="ArrowLeft"===r;if("keydown"===i&&(o||a||s||h)){let i=0,r=0;"v"===n?i=o||a?1:-1:"h"===n?i=o||a?-1:1:(r=o?-1:s?1:0,i=h?-1:a?1:0),e.update(b(e.cache.x+.01*i),b(e.cache.y+.01*r)),t.preventDefault()}else r.startsWith("Arrow")&&(e.options.onstop(),t.preventDefault())}},_tapstart(t){r(document,["mouseup","touchend","touchcancel"],e._tapstop),r(document,["mousemove","touchmove"],e._tapmove),t.cancelable&&t.preventDefault(),e._tapmove(t)},_tapmove(t){const{options:n,cache:i}=e,{lock:r,element:o,wrapper:a}=n,s=a.getBoundingClientRect();let h=0,l=0;if(t){const e=t&&t.touches&&t.touches[0];h=t?(e||t).clientX:0,l=t?(e||t).clientY:0,h<s.left?h=s.left:h>s.left+s.width&&(h=s.left+s.width),l<s.top?l=s.top:l>s.top+s.height&&(l=s.top+s.height),h-=s.left,l-=s.top}else i&&(h=i.x*s.width,l=i.y*s.height);"h"!==r&&(o.style.left=`calc(${h/s.width*100}% - ${o.offsetWidth/2}px)`),"v"!==r&&(o.style.top=`calc(${l/s.height*100}% - ${o.offsetHeight/2}px)`),e.cache={x:h/s.width,y:l/s.height};const c=b(h/s.width),u=b(l/s.height);switch(r){case"v":return n.onchange(c);case"h":return n.onchange(u);default:return n.onchange(c,u)}},_tapstop(){e.options.onstop(),o(document,["mouseup","touchend","touchcancel"],e._tapstop),o(document,["mousemove","touchmove"],e._tapmove)},trigger(){e._tapmove()},update(t=0,n=0){const{left:i,top:r,width:o,height:a}=e.options.wrapper.getBoundingClientRect();"h"===e.options.lock&&(n=t),e._tapmove({clientX:i+o*t,clientY:r+a*n})},destroy(){const{options:t,_tapstart:n,_keyboard:i}=e;o(document,["keydown","keyup"],i),o([t.wrapper,t.element],"mousedown",n),o([t.wrapper,t.element],"touchstart",n,{passive:!1})}},{options:n,_tapstart:i,_keyboard:a}=e;return r([n.wrapper,n.element],"mousedown",i),r([n.wrapper,n.element],"touchstart",i,{passive:!1}),r(document,["keydown","keyup"],a),e}function C(t={}){t=Object.assign({onchange:()=>0,className:"",elements:[]},t);const e=r(t.elements,"click",(e=>{t.elements.forEach((n=>n.classList[e.target===n?"add":"remove"](t.className))),t.onchange(e),e.stopPropagation()}));return{destroy:()=>o(...e)}}const S={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8};function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class T{constructor(t){E(this,"_initializingActive",!0),E(this,"_recalc",!0),E(this,"_nanopop",null),E(this,"_root",null),E(this,"_color",w()),E(this,"_lastColor",w()),E(this,"_swatchColors",[]),E(this,"_setupAnimationFrame",null),E(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]}),this.options=t=Object.assign({...T.DEFAULT_OPTIONS},t);const{swatches:e,components:n,theme:i,sliders:r,lockOpacity:o,padding:a}=t;["nano","monolith"].includes(i)&&!r&&(t.sliders="h"),n.interaction||(n.interaction={});const{preview:s,opacity:h,hue:l,palette:c}=n;n.opacity=!o&&h,n.palette=c||s||h||l,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),e&&e.length&&e.forEach((t=>this.addSwatch(t)));const{button:u,app:f}=this._root;this._nanopop=((t,e,n)=>{const i="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...n}:t;return{update(t=i){const{reference:e,popper:n}=Object.assign(i,t);if(!n||!e)throw new Error("Popper- or reference-element missing.");return((t,e,n)=>{const{container:i,margin:r,position:o,variantFlipOrder:a,positionFlipOrder:s}={container:document.documentElement.getBoundingClientRect(),...S,...n},{left:h,top:l}=e.style;e.style.left="0",e.style.top="0";const c=t.getBoundingClientRect(),u=e.getBoundingClientRect(),f={t:c.top-u.height-r,b:c.bottom+r,r:c.right+r,l:c.left-u.width-r},p={vs:c.left,vm:c.left+c.width/2+-u.width/2,ve:c.left+c.width-u.width,hs:c.top,hm:c.bottom-c.height/2-u.height/2,he:c.bottom-u.height},[d,g="middle"]=o.split("-"),m=s[d],y=a[g],{top:v,left:_,bottom:x,right:w}=i;for(const t of m){const n="t"===t||"b"===t,i=f[t],[r,o]=n?["top","left"]:["left","top"],[a,s]=n?[u.height,u.width]:[u.width,u.height],[h,l]=n?[x,w]:[w,x],[c,d]=n?[v,_]:[_,v];if(!(i<c||i+a>h))for(const a of y){const h=p[(n?"v":"h")+a];if(!(h<d||h+s>l))return e.style[o]=h-u[o]+"px",e.style[r]=i-u[r]+"px",t+a}}return e.style.left=h,e.style.top=l,null})(e,n,i)}}})(u,f,{margin:a}),u.setAttribute("role","button"),u.setAttribute("aria-label",this._t("btn:toggle"));const p=this;this._setupAnimationFrame=requestAnimationFrame((function e(){if(!f.offsetWidth)return requestAnimationFrame(e);p.setColor(t.default),p._rePositioningPicker(),t.defaultRepresentation&&(p._representation=t.defaultRepresentation,p.setColorRepresentation(p._representation)),t.showAlways&&p.show(),p._initializingActive=!1,p._emit("init")}))}_preBuild(){const{options:t}=this;for(const e of["el","container"])t[e]=l(t[e]);this._root=(t=>{const{components:e,useAsButton:n,inline:i,appClass:r,theme:o,lockOpacity:a}=t.options,h=t=>t?"":'style="display:none" hidden',l=e=>t._t(e),c=s(`\n      <div :ref="root" class="pickr">\n\n        ${n?"":'<button type="button" :ref="button" class="pcr-button"></button>'}\n\n        <div :ref="app" class="pcr-app ${r||""}" data-theme="${o}" ${i?'style="position: unset"':""} aria-label="${l("ui:dialog")}" role="window">\n          <div class="pcr-selection" ${h(e.palette)}>\n            <div :obj="preview" class="pcr-color-preview" ${h(e.preview)}>\n              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${l("btn:last-color")}"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${l("aria:palette")}" role="listbox"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ${h(e.hue)}>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${l("aria:hue")}" role="slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ${h(e.opacity)}>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${l("aria:opacity")}" role="slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ${e.palette?"":"pcr-last"}" :ref="swatches"></div>\n\n          <div :obj="interaction" class="pcr-interaction" ${h(Object.keys(e.interaction).length)}>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${h(e.interaction.input)} aria-label="${l("aria:input")}">\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="${a?"HEX":"HEXA"}" type="button" ${h(e.interaction.hex)}>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="${a?"RGB":"RGBA"}" type="button" ${h(e.interaction.rgba)}>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="${a?"HSL":"HSLA"}" type="button" ${h(e.interaction.hsla)}>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="${a?"HSV":"HSVA"}" type="button" ${h(e.interaction.hsva)}>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${h(e.interaction.cmyk)}>\n\n            <input :ref="save" class="pcr-save" value="${l("btn:save")}" type="button" ${h(e.interaction.save)} aria-label="${l("aria:btn:save")}">\n            <input :ref="cancel" class="pcr-cancel" value="${l("btn:cancel")}" type="button" ${h(e.interaction.cancel)} aria-label="${l("aria:btn:cancel")}">\n            <input :ref="clear" class="pcr-clear" value="${l("btn:clear")}" type="button" ${h(e.interaction.clear)} aria-label="${l("aria:btn:clear")}">\n          </div>\n        </div>\n      </div>\n    `),u=c.interaction;return u.options.find((t=>!t.hidden&&!t.classList.add("active"))),u.type=()=>u.options.find((t=>t.classList.contains("active"))),c})(this),t.useAsButton&&(this._root.button=t.el),t.container.appendChild(this._root.root)}_finalBuild(){const t=this.options,e=this._root;if(t.container.removeChild(e.root),t.inline){const n=t.el.parentElement;t.el.nextSibling?n.insertBefore(e.app,t.el.nextSibling):n.appendChild(e.app)}else t.container.appendChild(e.app);t.useAsButton?t.inline&&t.el.remove():t.el.parentNode.replaceChild(e.root,t.el),t.disabled&&this.disable(),t.comparison||(e.button.style.transition="none",t.useAsButton||(e.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const t=this,e=this.options.components,n=(t.options.sliders||"v").repeat(2),[i,r]=n.match(/^[vh]+$/g)?n:[],o=()=>this._color||(this._color=this._lastColor.clone()),a={palette:M({element:t._root.palette.picker,wrapper:t._root.palette.palette,onstop:()=>t._emit("changestop","slider",t),onchange(n,i){if(!e.palette)return;const r=o(),{_root:a,options:s}=t,{lastColor:h,currentColor:l}=a.preview;t._recalc&&(r.s=100*n,r.v=100-100*i,r.v<0&&(r.v=0),t._updateOutput("slider"));const c=r.toRGBA().toString(0);this.element.style.background=c,this.wrapper.style.background=`\n                        linear-gradient(to top, rgba(0, 0, 0, ${r.a}), transparent),\n                        linear-gradient(to left, hsla(${r.h}, 100%, 50%, ${r.a}), rgba(255, 255, 255, ${r.a}))\n                    `,s.comparison?s.useAsButton||t._lastColor||h.style.setProperty("--pcr-color",c):(a.button.style.setProperty("--pcr-color",c),a.button.classList.remove("clear"));const u=r.toHEXA().toString();for(const{el:e,color:n}of t._swatchColors)e.classList[u===n.toHEXA().toString()?"add":"remove"]("pcr-active");l.style.setProperty("--pcr-color",c)}}),hue:M({lock:"v"===r?"h":"v",element:t._root.hue.picker,wrapper:t._root.hue.slider,onstop:()=>t._emit("changestop","slider",t),onchange(n){if(!e.hue||!e.palette)return;const i=o();t._recalc&&(i.h=360*n),this.element.style.backgroundColor=`hsl(${i.h}, 100%, 50%)`,a.palette.trigger()}}),opacity:M({lock:"v"===i?"h":"v",element:t._root.opacity.picker,wrapper:t._root.opacity.slider,onstop:()=>t._emit("changestop","slider",t),onchange(n){if(!e.opacity||!e.palette)return;const i=o();t._recalc&&(i.a=Math.round(100*n)/100),this.element.style.background=`rgba(0, 0, 0, ${i.a})`,a.palette.trigger()}}),selectable:C({elements:t._root.interaction.options,className:"active",onchange(e){t._representation=e.target.getAttribute("data-type").toUpperCase(),t._recalc&&t._updateOutput("swatch")}})};this._components=a}_bindEvents(){const{_root:t,options:e}=this,n=[r(t.interaction.clear,"click",(()=>this._clearColor())),r([t.interaction.cancel,t.preview.lastColor],"click",(()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")})),r(t.interaction.save,"click",(()=>{!this.applyColor()&&!e.showAlways&&this.hide()})),r(t.interaction.result,["keyup","input"],(t=>{this.setColor(t.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),t.stopImmediatePropagation()})),r(t.interaction.result,["focus","blur"],(t=>{this._recalc="blur"===t.type,this._recalc&&this._updateOutput(null)})),r([t.palette.palette,t.palette.picker,t.hue.slider,t.hue.picker,t.opacity.slider,t.opacity.picker],["mousedown","touchstart"],(()=>this._recalc=!0),{passive:!0})];if(!e.showAlways){const i=e.closeWithKey;n.push(r(t.button,"click",(()=>this.isOpen()?this.hide():this.show())),r(document,"keyup",(t=>this.isOpen()&&(t.key===i||t.code===i)&&this.hide())),r(document,["touchstart","mousedown"],(e=>{this.isOpen()&&!h(e).some((e=>e===t.app||e===t.button))&&this.hide()}),{capture:!0}))}if(e.adjustableNumbers){const e={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};c(t.interaction.result,((t,n,i)=>{const r=e[this.getColorRepresentation().toLowerCase()];if(r){const e=r[i],o=t+(e>=100?1e3*n:n);return o<=0?0:Number((o<e?o:e).toPrecision(3))}return t}))}if(e.autoReposition&&!e.inline){let t=null;const i=this;n.push(r(window,["scroll","resize"],(()=>{i.isOpen()&&(e.closeOnScroll&&i.hide(),null===t?(t=setTimeout((()=>t=null),100),requestAnimationFrame((function e(){i._rePositioningPicker(),null!==t&&requestAnimationFrame(e)}))):(clearTimeout(t),t=setTimeout((()=>t=null),100)))}),{capture:!0}))}this._eventBindings=n}_rePositioningPicker(){const{options:t}=this;if(!t.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:t.position})){const t=this._root.app,e=t.getBoundingClientRect();t.style.top=(window.innerHeight-e.height)/2+"px",t.style.left=(window.innerWidth-e.width)/2+"px"}}_updateOutput(t){const{_root:e,_color:n,options:i}=this;if(e.interaction.type()){const t=`to${e.interaction.type().getAttribute("data-type")}`;e.interaction.result.value="function"==typeof n[t]?n[t]().toString(i.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",n,t,this)}_clearColor(t=!1){const{_root:e,options:n}=this;n.useAsButton||e.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),e.button.classList.add("clear"),n.showAlways||this.hide(),this._lastColor=null,this._initializingActive||t||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(t){const{values:e,type:n,a:i}=function(t){t=t.match(/^[a-zA-Z]+$/)?function(t){if("black"===t.toLowerCase())return"#000";const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,"#000"===e.fillStyle?null:e.fillStyle}(t):t;const e={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},n=t=>t.map((t=>/^(|\d+)\.\d+|\d+$/.test(t)?Number(t):void 0));let i;t:for(const r in e){if(!(i=e[r].exec(t)))continue;const o=t=>!!i[2]==("number"==typeof t);switch(r){case"cmyk":{const[,t,e,o,a]=n(i);if(t>100||e>100||o>100||a>100)break t;return{values:v(t,e,o,a),type:r}}case"rgba":{const[,,,t,e,a,s]=n(i);if(t>255||e>255||a>255||s<0||s>1||!o(s))break t;return{values:[...y(t,e,a),s],a:s,type:r}}case"hexa":{let[,t]=i;4!==t.length&&3!==t.length||(t=t.split("").map((t=>t+t)).join(""));const e=t.substring(0,6);let n=t.substring(6);return n=n?parseInt(n,16)/255:void 0,{values:[...x(e),n],a:n,type:r}}case"hsla":{const[,,,t,e,a,s]=n(i);if(t>360||e>100||a>100||s<0||s>1||!o(s))break t;return{values:[..._(t,e,a),s],a:s,type:r}}case"hsva":{const[,,,t,e,a,s]=n(i);if(t>360||e>100||a>100||s<0||s>1||!o(s))break t;return{values:[t,e,a,s],a:s,type:r}}}}return{values:null,type:null}}(t),{lockOpacity:r}=this.options,o=void 0!==i&&1!==i;return e&&3===e.length&&(e[3]=void 0),{values:!e||r&&o?null:e,type:n}}_t(t){return this.options.i18n[t]||T.I18N_DEFAULTS[t]}_emit(t,...e){this._eventListener[t].forEach((t=>t(...e,this)))}on(t,e){return this._eventListener[t].push(e),this}off(t,e){const n=this._eventListener[t]||[],i=n.indexOf(e);return~i&&n.splice(i,1),this}addSwatch(t){const{values:e}=this._parseLocalColor(t);if(e){const{_swatchColors:t,_root:n}=this,i=w(...e),o=a(`<button type="button" style="--pcr-color: ${i.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return n.swatches.appendChild(o),t.push({el:o,color:i}),this._eventBindings.push(r(o,"click",(()=>{this.setHSVA(...i.toHSVA(),!0),this._emit("swatchselect",i),this._emit("change",i,"swatch",this)}))),!0}return!1}removeSwatch(t){const e=this._swatchColors[t];if(e){const{el:n}=e;return this._root.swatches.removeChild(n),this._swatchColors.splice(t,1),!0}return!1}applyColor(t=!1){const{preview:e,button:n}=this._root,i=this._color.toRGBA().toString(0);return e.lastColor.style.setProperty("--pcr-color",i),this.options.useAsButton||n.style.setProperty("--pcr-color",i),n.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||t||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach((t=>o(...t))),Object.keys(this._components).forEach((t=>this._components[t].destroy()))}destroyAndRemove(){this.destroy();const{root:t,app:e}=this._root;t.parentElement&&t.parentElement.removeChild(t),e.parentElement.removeChild(e),Object.keys(this).forEach((t=>this[t]=null))}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(t=360,e=0,n=0,i=1,r=!1){const o=this._recalc;if(this._recalc=!1,t<0||t>360||e<0||e>100||n<0||n>100||i<0||i>1)return!1;this._color=w(t,e,n,i);const{hue:a,opacity:s,palette:h}=this._components;return a.update(t/360),s.update(i),h.update(e/100,1-n/100),r||this.applyColor(),o&&this._updateOutput(),this._recalc=o,!0}setColor(t,e=!1){if(null===t)return this._clearColor(e),!0;const{values:n,type:i}=this._parseLocalColor(t);if(n){const t=i.toUpperCase(),{options:r}=this._root.interaction,o=r.find((e=>e.getAttribute("data-type")===t));if(o&&!o.hidden)for(const t of r)t.classList[t===o?"add":"remove"]("active");return!!this.setHSVA(...n,e)&&this.setColorRepresentation(t)}return!1}setColorRepresentation(t){return t=t.toUpperCase(),!!this._root.interaction.options.find((e=>e.getAttribute("data-type").startsWith(t)&&!e.click()))}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return E(T,"utils",n),E(T,"version","1.8.2"),E(T,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),E(T,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),E(T,"create",(t=>new T(t))),e.default})()},560:function(t,e,n){var i;!function(r){"use strict";function o(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e,n,i,r,a){return o((s=o(o(e,t),o(i,a)))<<(h=r)|s>>>32-h,n);var s,h}function s(t,e,n,i,r,o,s){return a(e&n|~e&i,t,e,r,o,s)}function h(t,e,n,i,r,o,s){return a(e&i|n&~i,t,e,r,o,s)}function l(t,e,n,i,r,o,s){return a(e^n^i,t,e,r,o,s)}function c(t,e,n,i,r,o,s){return a(n^(e|~i),t,e,r,o,s)}function u(t,e){var n,i,r,a,u;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var f=1732584193,p=-271733879,d=-1732584194,g=271733878;for(n=0;n<t.length;n+=16)i=f,r=p,a=d,u=g,f=s(f,p,d,g,t[n],7,-680876936),g=s(g,f,p,d,t[n+1],12,-389564586),d=s(d,g,f,p,t[n+2],17,606105819),p=s(p,d,g,f,t[n+3],22,-1044525330),f=s(f,p,d,g,t[n+4],7,-176418897),g=s(g,f,p,d,t[n+5],12,1200080426),d=s(d,g,f,p,t[n+6],17,-1473231341),p=s(p,d,g,f,t[n+7],22,-45705983),f=s(f,p,d,g,t[n+8],7,1770035416),g=s(g,f,p,d,t[n+9],12,-1958414417),d=s(d,g,f,p,t[n+10],17,-42063),p=s(p,d,g,f,t[n+11],22,-1990404162),f=s(f,p,d,g,t[n+12],7,1804603682),g=s(g,f,p,d,t[n+13],12,-40341101),d=s(d,g,f,p,t[n+14],17,-1502002290),f=h(f,p=s(p,d,g,f,t[n+15],22,1236535329),d,g,t[n+1],5,-165796510),g=h(g,f,p,d,t[n+6],9,-1069501632),d=h(d,g,f,p,t[n+11],14,643717713),p=h(p,d,g,f,t[n],20,-373897302),f=h(f,p,d,g,t[n+5],5,-701558691),g=h(g,f,p,d,t[n+10],9,38016083),d=h(d,g,f,p,t[n+15],14,-660478335),p=h(p,d,g,f,t[n+4],20,-405537848),f=h(f,p,d,g,t[n+9],5,568446438),g=h(g,f,p,d,t[n+14],9,-1019803690),d=h(d,g,f,p,t[n+3],14,-187363961),p=h(p,d,g,f,t[n+8],20,1163531501),f=h(f,p,d,g,t[n+13],5,-1444681467),g=h(g,f,p,d,t[n+2],9,-51403784),d=h(d,g,f,p,t[n+7],14,1735328473),f=l(f,p=h(p,d,g,f,t[n+12],20,-1926607734),d,g,t[n+5],4,-378558),g=l(g,f,p,d,t[n+8],11,-2022574463),d=l(d,g,f,p,t[n+11],16,1839030562),p=l(p,d,g,f,t[n+14],23,-35309556),f=l(f,p,d,g,t[n+1],4,-1530992060),g=l(g,f,p,d,t[n+4],11,1272893353),d=l(d,g,f,p,t[n+7],16,-155497632),p=l(p,d,g,f,t[n+10],23,-1094730640),f=l(f,p,d,g,t[n+13],4,681279174),g=l(g,f,p,d,t[n],11,-358537222),d=l(d,g,f,p,t[n+3],16,-722521979),p=l(p,d,g,f,t[n+6],23,76029189),f=l(f,p,d,g,t[n+9],4,-640364487),g=l(g,f,p,d,t[n+12],11,-421815835),d=l(d,g,f,p,t[n+15],16,530742520),f=c(f,p=l(p,d,g,f,t[n+2],23,-995338651),d,g,t[n],6,-198630844),g=c(g,f,p,d,t[n+7],10,1126891415),d=c(d,g,f,p,t[n+14],15,-1416354905),p=c(p,d,g,f,t[n+5],21,-57434055),f=c(f,p,d,g,t[n+12],6,1700485571),g=c(g,f,p,d,t[n+3],10,-1894986606),d=c(d,g,f,p,t[n+10],15,-1051523),p=c(p,d,g,f,t[n+1],21,-2054922799),f=c(f,p,d,g,t[n+8],6,1873313359),g=c(g,f,p,d,t[n+15],10,-30611744),d=c(d,g,f,p,t[n+6],15,-1560198380),p=c(p,d,g,f,t[n+13],21,1309151649),f=c(f,p,d,g,t[n+4],6,-145523070),g=c(g,f,p,d,t[n+11],10,-1120210379),d=c(d,g,f,p,t[n+2],15,718787259),p=c(p,d,g,f,t[n+9],21,-343485551),f=o(f,i),p=o(p,r),d=o(d,a),g=o(g,u);return[f,p,d,g]}function f(t){var e,n="",i=32*t.length;for(e=0;e<i;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function p(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var i=8*t.length;for(e=0;e<i;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function d(t){var e,n,i="0123456789abcdef",r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+=i.charAt(e>>>4&15)+i.charAt(15&e);return r}function g(t){return unescape(encodeURIComponent(t))}function m(t){return function(t){return f(u(p(t),8*t.length))}(g(t))}function y(t,e){return function(t,e){var n,i,r=p(t),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=u(r,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],a[n]=1549556828^r[n];return i=u(o.concat(p(e)),512+8*e.length),f(u(a.concat(i),640))}(g(t),g(e))}function v(t,e,n){return e?n?y(e,t):d(y(e,t)):n?m(t):d(m(t))}void 0===(i=function(){return v}.call(e,n,e,t))||(t.exports=i)}()},977:function(t,e){var n;!function(i){"use strict";var r=function(t){return.5*(Math.exp(t)+Math.exp(-t))},o=function(t){return.5*(Math.exp(t)-Math.exp(-t))},a=function(){throw SyntaxError("Invalid Param")};function s(t,e){var n=Math.abs(t),i=Math.abs(e);return 0===t?Math.log(i):0===e?Math.log(n):n<3e3&&i<3e3?.5*Math.log(t*t+e*e):Math.log(t/Math.cos(Math.atan2(e,t)))}function h(t,e){if(!(this instanceof h))return new h(t,e);var n=function(t,e){var n={re:0,im:0};if(null==t)n.re=n.im=0;else if(void 0!==e)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return h.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return h.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else 2===t.length?(n.re=t[0],n.im=t[1]):a();break;case"string":n.im=n.re=0;var i=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),r=1,o=0;null===i&&a();for(var s=0;s<i.length;s++){var l=i[s];" "===l||"\t"===l||"\n"===l||("+"===l?r++:"-"===l?o++:"i"===l||"I"===l?(r+o===0&&a()," "===i[s+1]||isNaN(i[s+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+i[s+1]),s++),r=o=0):((r+o===0||isNaN(l))&&a(),"i"===i[s+1]||"I"===i[s+1]?(n.im+=parseFloat((o%2?"-":"")+l),s++):n.re+=parseFloat((o%2?"-":"")+l),r=o=0))}r+o>0&&a();break;case"number":n.im=0,n.re=t;break;default:a()}return isNaN(n.re)||isNaN(n.im),n}(t,e);this.re=n.re,this.im=n.im}h.prototype={re:0,im:0,sign:function(){var t=this.abs();return new h(this.re/t,this.im/t)},add:function(t,e){var n=new h(t,e);return this.isInfinite()&&n.isInfinite()?h.NAN:this.isInfinite()||n.isInfinite()?h.INFINITY:new h(this.re+n.re,this.im+n.im)},sub:function(t,e){var n=new h(t,e);return this.isInfinite()&&n.isInfinite()?h.NAN:this.isInfinite()||n.isInfinite()?h.INFINITY:new h(this.re-n.re,this.im-n.im)},mul:function(t,e){var n=new h(t,e);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?h.NAN:this.isInfinite()||n.isInfinite()?h.INFINITY:0===n.im&&0===this.im?new h(this.re*n.re,0):new h(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){var n=new h(t,e);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return h.NAN;if(this.isInfinite()||n.isZero())return h.INFINITY;if(this.isZero()||n.isInfinite())return h.ZERO;t=this.re,e=this.im;var i,r,o=n.re,a=n.im;return 0===a?new h(t/o,e/o):Math.abs(o)<Math.abs(a)?new h((t*(r=o/a)+e)/(i=o*r+a),(e*r-t)/i):new h((t+e*(r=a/o))/(i=a*r+o),(e-t*r)/i)},pow:function(t,e){var n=new h(t,e);if(t=this.re,e=this.im,n.isZero())return h.ONE;if(0===n.im){if(0===e&&t>0)return new h(Math.pow(t,n.re),0);if(0===t)switch((n.re%4+4)%4){case 0:return new h(Math.pow(e,n.re),0);case 1:return new h(0,Math.pow(e,n.re));case 2:return new h(-Math.pow(e,n.re),0);case 3:return new h(0,-Math.pow(e,n.re))}}if(0===t&&0===e&&n.re>0&&n.im>=0)return h.ZERO;var i=Math.atan2(e,t),r=s(t,e);return t=Math.exp(n.re*r-n.im*i),e=n.im*r+n.re*i,new h(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,n=this.re,i=this.im,r=this.abs();if(n>=0){if(0===i)return new h(Math.sqrt(n),0);t=.5*Math.sqrt(2*(r+n))}else t=Math.abs(i)/Math.sqrt(2*(r-n));return e=n<=0?.5*Math.sqrt(2*(r-n)):Math.abs(i)/Math.sqrt(2*(r+n)),new h(t,i<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new h(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new h(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;var n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new h(s(t,e),Math.atan2(e,t))},abs:function(){return t=this.re,e=this.im,n=Math.abs(t),i=Math.abs(e),n<3e3&&i<3e3?Math.sqrt(n*n+i*i):(n<i?(n=i,i=t/e):i=e/t,n*Math.sqrt(1+i*i));var t,e,n,i},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new h(Math.sin(t)*r(e),Math.cos(t)*o(e))},cos:function(){var t=this.re,e=this.im;return new h(Math.cos(t)*r(e),-Math.sin(t)*o(e))},tan:function(){var t=2*this.re,e=2*this.im,n=Math.cos(t)+r(e);return new h(Math.sin(t)/n,o(e)/n)},cot:function(){var t=2*this.re,e=2*this.im,n=Math.cos(t)-r(e);return new h(-Math.sin(t)/n,o(e)/n)},sec:function(){var t=this.re,e=this.im,n=.5*r(2*e)+.5*Math.cos(2*t);return new h(Math.cos(t)*r(e)/n,Math.sin(t)*o(e)/n)},csc:function(){var t=this.re,e=this.im,n=.5*r(2*e)-.5*Math.cos(2*t);return new h(Math.sin(t)*r(e)/n,-Math.cos(t)*o(e)/n)},asin:function(){var t=this.re,e=this.im,n=new h(e*e-t*t+1,-2*t*e).sqrt(),i=new h(n.re-e,n.im+t).log();return new h(i.im,-i.re)},acos:function(){var t=this.re,e=this.im,n=new h(e*e-t*t+1,-2*t*e).sqrt(),i=new h(n.re-e,n.im+t).log();return new h(Math.PI/2-i.im,i.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new h(0,1/0);if(-1===e)return new h(0,-1/0)}var n=t*t+(1-e)*(1-e),i=new h((1-e*e-t*t)/n,-2*t/n).log();return new h(-.5*i.im,.5*i.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new h(Math.atan2(1,t),0);var n=t*t+e*e;return 0!==n?new h(t/n,-e/n).atan():new h(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new h(0,1/0);var n=t*t+e*e;return 0!==n?new h(t/n,-e/n).acos():new h(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new h(Math.PI/2,1/0);var n=t*t+e*e;return 0!==n?new h(t/n,-e/n).asin():new h(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new h(o(t)*Math.cos(e),r(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new h(r(t)*Math.cos(e),o(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,n=r(t)+Math.cos(e);return new h(o(t)/n,Math.sin(e)/n)},coth:function(){var t=2*this.re,e=2*this.im,n=r(t)-Math.cos(e);return new h(o(t)/n,-Math.sin(e)/n)},csch:function(){var t=this.re,e=this.im,n=Math.cos(2*e)-r(2*t);return new h(-2*o(t)*Math.cos(e)/n,2*r(t)*Math.sin(e)/n)},sech:function(){var t=this.re,e=this.im,n=Math.cos(2*e)+r(2*t);return new h(2*r(t)*Math.cos(e)/n,-2*o(t)*Math.sin(e)/n)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else e=t.im,t.im=-t.re,t.re=e;return t},atanh:function(){var t=this.re,e=this.im,n=t>1&&0===e,i=1-t,r=1+t,o=i*i+e*e,a=0!==o?new h((r*i-e*e)/o,(e*i+r*e)/o):new h(-1!==t?t/0:0,0!==e?e/0:0),l=a.re;return a.re=s(a.re,a.im)/2,a.im=Math.atan2(a.im,l)/2,n&&(a.im=-a.im),a},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new h(0,Math.PI/2);var n=t*t+e*e;return 0!==n?new h(t/n,-e/n).atanh():new h(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new h(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var n=t*t+e*e;return 0!==n?new h(t/n,-e/n).asinh():new h(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return h.INFINITY;var n=t*t+e*e;return 0!==n?new h(t/n,-e/n).acosh():new h(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return h.INFINITY;if(this.isInfinite())return h.ZERO;var t=this.re,e=this.im,n=t*t+e*e;return new h(t/n,-e/n)},conjugate:function(){return new h(this.re,-this.im)},neg:function(){return new h(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new h(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new h(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new h(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var n=new h(t,e);return Math.abs(n.re-this.re)<=h.EPSILON&&Math.abs(n.im-this.im)<=h.EPSILON},clone:function(){return new h(this.re,this.im)},toString:function(){var t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<h.EPSILON&&(t=0),Math.abs(e)<h.EPSILON&&(e=0),0===e?n+t:(0!==t?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),1!==e&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},h.ZERO=new h(0,0),h.ONE=new h(1,0),h.I=new h(0,1),h.PI=new h(Math.PI,0),h.E=new h(Math.E,0),h.INFINITY=new h(1/0,1/0),h.NAN=new h(NaN,NaN),h.EPSILON=1e-15,void 0===(n=function(){return h}.apply(e,[]))||(t.exports=n)}()},776:function(t,e,n){var i;!function(r){"use strict";var o,a,s,h=9e15,l=1e9,c="0123456789abcdef",u="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-h,maxE:h,crypto:!1},d=!0,g="[DecimalError] ",m=g+"Invalid argument: ",y=g+"Precision limit exceeded",v=g+"crypto unavailable",_="[object Decimal]",x=Math.floor,w=Math.pow,b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,M=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,C=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,S=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,T=u.length-1,O=f.length-1,P={toStringTag:_};function k(t){var e,n,i,r=t.length-1,o="",a=t[0];if(r>0){for(o+=a,e=1;e<r;e++)(n=7-(i=t[e]+"").length)&&(o+=U(n)),o+=i;(n=7-(i=(a=t[e])+"").length)&&(o+=U(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function I(t,e,n){if(t!==~~t||t<e||t>n)throw Error(m+t)}function A(t,e,n,i){var r,o,a,s;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=7,r=0):(r=Math.ceil((e+1)/7),e%=7),o=w(10,7-e),s=t[r]%o|0,null==i?e<3?(0==e?s=s/100|0:1==e&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(t[r+1]/o/100|0)==w(10,e-2)-1||(s==o/2||0==s)&&0==(t[r+1]/o/100|0):e<4?(0==e?s=s/1e3|0:1==e?s=s/100|0:2==e&&(s=s/10|0),a=(i||n<4)&&9999==s||!i&&n>3&&4999==s):a=((i||n<4)&&s+1==o||!i&&n>3&&s+1==o/2)&&(t[r+1]/o/1e3|0)==w(10,e-3)-1,a}function L(t,e,n){for(var i,r,o=[0],a=0,s=t.length;a<s;){for(r=o.length;r--;)o[r]*=e;for(o[0]+=c.indexOf(t.charAt(a++)),i=0;i<o.length;i++)o[i]>n-1&&(void 0===o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/n|0,o[i]%=n)}return o.reverse()}P.absoluteValue=P.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),N(t)},P.ceil=function(){return N(new this.constructor(this),this.e+1,2)},P.clampedTo=P.clamp=function(t,e){var n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(m+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new i(n)},P.comparedTo=P.cmp=function(t){var e,n,i,r,o=this,a=o.d,s=(t=new o.constructor(t)).d,h=o.s,l=t.s;if(!a||!s)return h&&l?h!==l?h:a===s?0:!a^h<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?h:s[0]?-l:0;if(h!==l)return h;if(o.e!==t.e)return o.e>t.e^h<0?1:-1;for(e=0,n=(i=a.length)<(r=s.length)?i:r;e<n;++e)if(a[e]!==s[e])return a[e]>s[e]^h<0?1:-1;return i===r?0:i>r^h<0?1:-1},P.cosine=P.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i,r;if(e.isZero())return e;(i=e.d.length)<32?r=(1/$(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),t.precision+=n,e=Z(t,1,e.times(r),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(i,Q(i,n)),i.precision=t,i.rounding=e,N(2==s||3==s?n.neg():n,t,e,!0)):new i(1):new i(NaN)},P.cubeRoot=P.cbrt=function(){var t,e,n,i,r,o,a,s,h,l,c=this,u=c.constructor;if(!c.isFinite()||c.isZero())return new u(c);for(d=!1,(o=c.s*w(c.s*c,1/3))&&Math.abs(o)!=1/0?i=new u(o.toString()):(n=k(c.d),(o=((t=c.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=w(n,1/3),t=x((t+1)/3)-(t%3==(t<0?-1:2)),(i=new u(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=c.s),a=(t=u.precision)+3;;)if(l=(h=(s=i).times(s).times(s)).plus(c),i=R(l.plus(c).times(s),l.plus(h),a+2,1),k(s.d).slice(0,a)===(n=k(i.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(r||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(N(i,t+1,1),e=!i.times(i).times(i).eq(c));break}if(!r&&(N(s,t+1,0),s.times(s).times(s).eq(c))){i=s;break}a+=4,r=1}return d=!0,N(i,t,u.rounding,e)},P.decimalPlaces=P.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=7*((t=e.length-1)-x(this.e/7)),t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},P.dividedBy=P.div=function(t){return R(this,new this.constructor(t))},P.dividedToIntegerBy=P.divToInt=function(t){var e=this.constructor;return N(R(this,new e(t),0,1,1),e.precision,e.rounding)},P.equals=P.eq=function(t){return 0===this.cmp(t)},P.floor=function(){return N(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(t){return this.cmp(t)>0},P.greaterThanOrEqualTo=P.gte=function(t){var e=this.cmp(t);return 1==e||0===e},P.hyperbolicCosine=P.cosh=function(){var t,e,n,i,r,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,i=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(r=o.d.length)<32?e=(1/$(4,t=Math.ceil(r/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=Z(a,1,o.times(e),new a(1),!0);for(var h,l=t,c=new a(8);l--;)h=o.times(o),o=s.minus(h.times(c.minus(h.times(c))));return N(o,a.precision=n,a.rounding=i,!0)},P.hyperbolicSine=P.sinh=function(){var t,e,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(r.e,r.sd())+4,o.rounding=1,(i=r.d.length)<3)r=Z(o,2,r,r,!0);else{t=(t=1.4*Math.sqrt(i))>16?16:0|t,r=Z(o,2,r=r.times(1/$(5,t)),r,!0);for(var a,s=new o(5),h=new o(16),l=new o(20);t--;)a=r.times(r),r=r.times(s.plus(a.times(h.times(a).plus(l))))}return o.precision=e,o.rounding=n,N(r,e,n,!0)},P.hyperbolicTangent=P.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,R(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)},P.inverseCosine=P.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,o=n.rounding;return-1!==i?0===i?e.isNeg()?z(n,r,o):new n(0):new n(NaN):e.isZero()?z(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=z(n,r+4,o).times(.5),n.precision=r,n.rounding=o,t.minus(e))},P.inverseHyperbolicCosine=P.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,d=!1,n=n.times(n).minus(1).sqrt().plus(n),d=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)},P.inverseHyperbolicSine=P.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,d=!1,n=n.times(n).plus(1).sqrt().plus(n),d=!0,i.precision=t,i.rounding=e,n.ln())},P.inverseHyperbolicTangent=P.atanh=function(){var t,e,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=o.precision,e=o.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?N(new o(r),t,e,!0):(o.precision=n=i-r.e,r=R(r.plus(1),new o(1).minus(r),n+t,1),o.precision=t+4,o.rounding=1,r=r.ln(),o.precision=t,o.rounding=e,r.times(.5))):new o(NaN)},P.inverseSine=P.asin=function(){var t,e,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(e=r.abs().cmp(1),n=o.precision,i=o.rounding,-1!==e?0===e?((t=z(o,n+4,i).times(.5)).s=r.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))},P.inverseTangent=P.atan=function(){var t,e,n,i,r,o,a,s,h,l=this,c=l.constructor,u=c.precision,f=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&u+4<=O)return(a=z(c,u+4,f).times(.25)).s=l.s,a}else{if(!l.s)return new c(NaN);if(u+4<=O)return(a=z(c,u+4,f).times(.5)).s=l.s,a}for(c.precision=s=u+10,c.rounding=1,t=n=Math.min(28,s/7+2|0);t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(d=!1,e=Math.ceil(s/7),i=1,h=l.times(l),a=new c(l),r=l;-1!==t;)if(r=r.times(h),o=a.minus(r.div(i+=2)),r=r.times(h),void 0!==(a=o.plus(r.div(i+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),d=!0,N(a,c.precision=u,c.rounding=f,!0)},P.isFinite=function(){return!!this.d},P.isInteger=P.isInt=function(){return!!this.d&&x(this.e/7)>this.d.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isPositive=P.isPos=function(){return this.s>0},P.isZero=function(){return!!this.d&&0===this.d[0]},P.lessThan=P.lt=function(t){return this.cmp(t)<0},P.lessThanOrEqualTo=P.lte=function(t){return this.cmp(t)<1},P.logarithm=P.log=function(t){var e,n,i,r,o,a,s,h,l=this,c=l.constructor,u=c.precision,f=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(r=n[0];r%10==0;)r/=10;o=1!==r}if(d=!1,a=q(l,s=u+5),i=e?j(c,s+10):q(t,s),A((h=R(a,i,s,1)).d,r=u,f))do{if(a=q(l,s+=10),i=e?j(c,s+10):q(t,s),h=R(a,i,s,1),!o){+k(h.d).slice(r+1,r+15)+1==1e14&&(h=N(h,u+1,0));break}}while(A(h.d,r+=10,f));return d=!0,N(h,u,f)},P.minus=P.sub=function(t){var e,n,i,r,o,a,s,h,l,c,u,f,p=this,g=p.constructor;if(t=new g(t),!p.d||!t.d)return p.s&&t.s?p.d?t.s=-t.s:t=new g(t.d||p.s!==t.s?p:NaN):t=new g(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(l=p.d,f=t.d,s=g.precision,h=g.rounding,!l[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!l[0])return new g(3===h?-0:0);t=new g(p)}return d?N(t,s,h):t}if(n=x(t.e/7),c=x(p.e/7),l=l.slice(),o=c-n){for((u=o<0)?(e=l,o=-o,a=f.length):(e=f,n=c,a=l.length),o>(i=Math.max(Math.ceil(s/7),a)+2)&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for((u=(i=l.length)<(a=f.length))&&(a=i),i=0;i<a;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}o=0}for(u&&(e=l,l=f,f=e,t.s=-t.s),a=l.length,i=f.length-a;i>0;--i)l[a++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(r=i;r&&0===l[--r];)l[r]=E-1;--l[r],l[i]+=E}l[i]-=f[i]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=F(l,n),d?N(t,s,h):t):new g(3===h?-0:0)},P.modulo=P.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?N(new i(n),i.precision,i.rounding):(d=!1,9==i.modulo?(e=R(n,t.abs(),0,3,1)).s*=t.s:e=R(n,t,0,i.modulo,1),e=e.times(t),d=!0,n.minus(e))},P.naturalExponential=P.exp=function(){return V(this)},P.naturalLogarithm=P.ln=function(){return q(this)},P.negated=P.neg=function(){var t=new this.constructor(this);return t.s=-t.s,N(t)},P.plus=P.add=function(t){var e,n,i,r,o,a,s,h,l,c,u=this,f=u.constructor;if(t=new f(t),!u.d||!t.d)return u.s&&t.s?u.d||(t=new f(t.d||u.s===t.s?u:NaN)):t=new f(NaN),t;if(u.s!=t.s)return t.s=-t.s,u.minus(t);if(l=u.d,c=t.d,s=f.precision,h=f.rounding,!l[0]||!c[0])return c[0]||(t=new f(u)),d?N(t,s,h):t;if(o=x(u.e/7),i=x(t.e/7),l=l.slice(),r=o-i){for(r<0?(n=l,r=-r,a=c.length):(n=c,i=o,a=l.length),r>(a=(o=Math.ceil(s/7))>a?o+1:a+1)&&(r=a,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((a=l.length)-(r=c.length)<0&&(r=a,n=c,c=l,l=n),e=0;r;)e=(l[--r]=l[r]+c[r]+e)/E|0,l[r]%=E;for(e&&(l.unshift(e),++i),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=F(l,i),d?N(t,s,h):t},P.precision=P.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(m+t);return n.d?(e=B(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},P.round=function(){var t=this,e=t.constructor;return N(new e(t),t.e+1,e.rounding)},P.sine=P.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Z(t,2,e,e);n=(n=1.4*Math.sqrt(i))>16?16:0|n,e=Z(t,2,e=e.times(1/$(5,n)),e);for(var r,o=new t(5),a=new t(16),s=new t(20);n--;)r=e.times(e),e=e.times(o.plus(r.times(a.times(r).minus(s))));return e}(i,Q(i,n)),i.precision=t,i.rounding=e,N(s>2?n.neg():n,t,e,!0)):new i(NaN)},P.squareRoot=P.sqrt=function(){var t,e,n,i,r,o,a=this,s=a.d,h=a.e,l=a.s,c=a.constructor;if(1!==l||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?a:1/0);for(d=!1,0==(l=Math.sqrt(+a))||l==1/0?(((e=k(s)).length+h)%2==0&&(e+="0"),l=Math.sqrt(e),h=x((h+1)/2)-(h<0||h%2),i=new c(e=l==1/0?"5e"+h:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+h)):i=new c(l.toString()),n=(h=c.precision)+3;;)if(i=(o=i).plus(R(a,o,n+2,1)).times(.5),k(o.d).slice(0,n)===(e=k(i.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(N(i,h+1,1),t=!i.times(i).eq(a));break}if(!r&&(N(o,h+1,0),o.times(o).eq(a))){i=o;break}n+=4,r=1}return d=!0,N(i,h,c.rounding,t)},P.tangent=P.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,(n=n.sin()).s=1,n=R(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,N(2==s||4==s?n.neg():n,t,e,!0)):new i(NaN)},P.times=P.mul=function(t){var e,n,i,r,o,a,s,h,l,c=this,u=c.constructor,f=c.d,p=(t=new u(t)).d;if(t.s*=c.s,!(f&&f[0]&&p&&p[0]))return new u(!t.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:f&&p?0*t.s:t.s/0);for(n=x(c.e/7)+x(t.e/7),(h=f.length)<(l=p.length)&&(o=f,f=p,p=o,a=h,h=l,l=a),o=[],i=a=h+l;i--;)o.push(0);for(i=l;--i>=0;){for(e=0,r=h+i;r>i;)s=o[r]+p[i]*f[r-i-1]+e,o[r--]=s%E|0,e=s/E|0;o[r]=(o[r]+e)%E|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=F(o,n),d?N(t,u.precision,u.rounding):t},P.toBinary=function(t,e){return J(this,2,t,e)},P.toDecimalPlaces=P.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),void 0===t?n:(I(t,0,l),void 0===e?e=i.rounding:I(e,0,8),N(n,t+n.e+1,e))},P.toExponential=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=D(i,!0):(I(t,0,l),void 0===e?e=r.rounding:I(e,0,8),n=D(i=N(new r(i),t+1,e),!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n},P.toFixed=function(t,e){var n,i,r=this,o=r.constructor;return void 0===t?n=D(r):(I(t,0,l),void 0===e?e=o.rounding:I(e,0,8),n=D(i=N(new o(r),t+r.e+1,e),!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},P.toFraction=function(t){var e,n,i,r,o,a,s,h,l,c,u,f,p=this,g=p.d,y=p.constructor;if(!g)return new y(p);if(l=n=new y(1),i=h=new y(0),a=(o=(e=new y(i)).e=B(g)-p.e-1)%7,e.d[0]=w(10,a<0?7+a:a),null==t)t=o>0?e:l;else{if(!(s=new y(t)).isInt()||s.lt(l))throw Error(m+s);t=s.gt(e)?o>0?e:l:s}for(d=!1,s=new y(k(g)),c=y.precision,y.precision=o=7*g.length*2;u=R(s,e,0,1,1),1!=(r=n.plus(u.times(i))).cmp(t);)n=i,i=r,r=l,l=h.plus(u.times(r)),h=r,r=e,e=s.minus(u.times(r)),s=r;return r=R(t.minus(n),i,0,1,1),h=h.plus(r.times(l)),n=n.plus(r.times(i)),h.s=l.s=p.s,f=R(l,i,o,1).minus(p).abs().cmp(R(h,n,o,1).minus(p).abs())<1?[l,i]:[h,n],y.precision=c,d=!0,f},P.toHexadecimal=P.toHex=function(t,e){return J(this,16,t,e)},P.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),null==t){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:I(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(d=!1,n=R(n,t,0,e,1).times(t),d=!0,N(n)):(t.s=n.s,n=t),n},P.toNumber=function(){return+this},P.toOctal=function(t,e){return J(this,8,t,e)},P.toPower=P.pow=function(t){var e,n,i,r,o,a,s=this,h=s.constructor,l=+(t=new h(t));if(!(s.d&&t.d&&s.d[0]&&t.d[0]))return new h(w(+s,l));if((s=new h(s)).eq(1))return s;if(i=h.precision,o=h.rounding,t.eq(1))return N(s,i,o);if((e=x(t.e/7))>=t.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return r=G(h,s,n,i),t.s<0?new h(1).div(r):N(r,i,o);if((a=s.s)<0){if(e<t.d.length-1)return new h(NaN);if(0==(1&t.d[e])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(e=0!=(n=w(+s,l))&&isFinite(n)?new h(n+"").e:x(l*(Math.log("0."+k(s.d))/Math.LN10+s.e+1)))>h.maxE+1||e<h.minE-1?new h(e>0?a/0:0):(d=!1,h.rounding=s.s=1,n=Math.min(12,(e+"").length),(r=V(t.times(q(s,i+n)),i)).d&&A((r=N(r,i+5,1)).d,i,o)&&(e=i+10,+k((r=N(V(t.times(q(s,e+n)),e),e+5,1)).d).slice(i+1,i+15)+1==1e14&&(r=N(r,i+1,0))),r.s=a,d=!0,h.rounding=o,N(r,i,o))},P.toPrecision=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=D(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(I(t,1,l),void 0===e?e=r.rounding:I(e,0,8),n=D(i=N(new r(i),t,e),t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n},P.toSignificantDigits=P.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(I(t,1,l),void 0===e?e=n.rounding:I(e,0,8)),N(new n(this),t,e)},P.toString=function(){var t=this,e=t.constructor,n=D(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},P.truncated=P.trunc=function(){return N(new this.constructor(this),this.e+1,1)},P.valueOf=P.toJSON=function(){var t=this,e=t.constructor,n=D(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var R=function(){function t(t,e,n){var i,r=0,o=t.length;for(t=t.slice();o--;)i=t[o]*e+r,t[o]=i%n|0,r=i/n|0;return r&&t.unshift(r),t}function e(t,e,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(t[r]!=e[r]){o=t[r]>e[r]?1:-1;break}return o}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(i,r,o,s,h,l){var c,u,f,p,d,g,m,y,v,_,w,b,M,C,S,T,O,P,k,I,A=i.constructor,L=i.s==r.s?1:-1,R=i.d,D=r.d;if(!(R&&R[0]&&D&&D[0]))return new A(i.s&&r.s&&(R?!D||R[0]!=D[0]:D)?R&&0==R[0]||!D?0*L:L/0:NaN);for(l?(d=1,u=i.e-r.e):(l=E,d=7,u=x(i.e/d)-x(r.e/d)),k=D.length,O=R.length,_=(v=new A(L)).d=[],f=0;D[f]==(R[f]||0);f++);if(D[f]>(R[f]||0)&&u--,null==o?(C=o=A.precision,s=A.rounding):C=h?o+(i.e-r.e)+1:o,C<0)_.push(1),g=!0;else{if(C=C/d+2|0,f=0,1==k){for(p=0,D=D[0],C++;(f<O||p)&&C--;f++)S=p*l+(R[f]||0),_[f]=S/D|0,p=S%D|0;g=p||f<O}else{for((p=l/(D[0]+1)|0)>1&&(D=t(D,p,l),R=t(R,p,l),k=D.length,O=R.length),T=k,b=(w=R.slice(0,k)).length;b<k;)w[b++]=0;(I=D.slice()).unshift(0),P=D[0],D[1]>=l/2&&++P;do{p=0,(c=e(D,w,k,b))<0?(M=w[0],k!=b&&(M=M*l+(w[1]||0)),(p=M/P|0)>1?(p>=l&&(p=l-1),1==(c=e(m=t(D,p,l),w,y=m.length,b=w.length))&&(p--,n(m,k<y?I:D,y,l))):(0==p&&(c=p=1),m=D.slice()),(y=m.length)<b&&m.unshift(0),n(w,m,b,l),-1==c&&(c=e(D,w,k,b=w.length))<1&&(p++,n(w,k<b?I:D,b,l)),b=w.length):0===c&&(p++,w=[0]),_[f++]=p,c&&w[0]?w[b++]=R[T]||0:(w=[R[T]],b=1)}while((T++<O||void 0!==w[0])&&C--);g=void 0!==w[0]}_[0]||_.shift()}if(1==d)v.e=u,a=g;else{for(f=1,p=_[0];p>=10;p/=10)f++;v.e=f+u*d-1,N(v,h?o+v.e+1:o,s,g)}return v}}();function N(t,e,n,i){var r,o,a,s,h,l,c,u,f,p=t.constructor;t:if(null!=e){if(!(u=t.d))return t;for(r=1,s=u[0];s>=10;s/=10)r++;if((o=e-r)<0)o+=7,a=e,h=(c=u[f=0])/w(10,r-a-1)%10|0;else if((f=Math.ceil((o+1)/7))>=(s=u.length)){if(!i)break t;for(;s++<=f;)u.push(0);c=h=0,r=1,a=(o%=7)-7+1}else{for(c=s=u[f],r=1;s>=10;s/=10)r++;h=(a=(o%=7)-7+r)<0?0:c/w(10,r-a-1)%10|0}if(i=i||e<0||void 0!==u[f+1]||(a<0?c:c%w(10,r-a-1)),l=n<4?(h||i)&&(0==n||n==(t.s<0?3:2)):h>5||5==h&&(4==n||i||6==n&&(o>0?a>0?c/w(10,r-a):0:u[f-1])%10&1||n==(t.s<0?8:7)),e<1||!u[0])return u.length=0,l?(e-=t.e+1,u[0]=w(10,(7-e%7)%7),t.e=-e||0):u[0]=t.e=0,t;if(0==o?(u.length=f,s=1,f--):(u.length=f+1,s=w(10,7-o),u[f]=a>0?(c/w(10,r-a)%w(10,a)|0)*s:0),l)for(;;){if(0==f){for(o=1,a=u[0];a>=10;a/=10)o++;for(a=u[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(t.e++,u[0]==E&&(u[0]=1));break}if(u[f]+=s,u[f]!=E)break;u[f--]=0,s=1}for(o=u.length;0===u[--o];)u.pop()}return d&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function D(t,e,n){if(!t.isFinite())return Y(t);var i,r=t.e,o=k(t.d),a=o.length;return e?(n&&(i=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+U(i):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):r<0?(o="0."+U(-r-1)+o,n&&(i=n-a)>0&&(o+=U(i))):r>=a?(o+=U(r+1-a),n&&(i=n-r-1)>0&&(o=o+"."+U(i))):((i=r+1)<a&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(o+="."),o+=U(i))),o}function F(t,e){var n=t[0];for(e*=7;n>=10;n/=10)e++;return e}function j(t,e,n){if(e>T)throw d=!0,n&&(t.precision=n),Error(y);return N(new t(u),e,1,!0)}function z(t,e,n){if(e>O)throw Error(y);return N(new t(f),e,n,!0)}function B(t){var e=t.length-1,n=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function U(t){for(var e="";t--;)e+="0";return e}function G(t,e,n,i){var r,o=new t(1),a=Math.ceil(i/7+4);for(d=!1;;){if(n%2&&tt((o=o.times(e)).d,a)&&(r=!0),0===(n=x(n/2))){n=o.d.length-1,r&&0===o.d[n]&&++o.d[n];break}tt((e=e.times(e)).d,a)}return d=!0,o}function H(t){return 1&t.d[t.d.length-1]}function W(t,e,n){for(var i,r=new t(e[0]),o=0;++o<e.length;){if(!(i=new t(e[o])).s){r=i;break}r[n](i)&&(r=i)}return r}function V(t,e){var n,i,r,o,a,s,h,l=0,c=0,u=0,f=t.constructor,p=f.rounding,g=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(d=!1,h=g):h=e,s=new f(.03125);t.e>-2;)t=t.times(s),u+=5;for(h+=i=Math.log(w(2,u))/Math.LN10*2+5|0,n=o=a=new f(1),f.precision=h;;){if(o=N(o.times(t),h,1),n=n.times(++c),k((s=a.plus(R(o,n,h,1))).d).slice(0,h)===k(a.d).slice(0,h)){for(r=u;r--;)a=N(a.times(a),h,1);if(null!=e)return f.precision=g,a;if(!(l<3&&A(a.d,h-i,p,l)))return N(a,f.precision=g,p,d=!0);f.precision=h+=10,n=o=s=new f(1),c=0,l++}a=s}}function q(t,e){var n,i,r,o,a,s,h,l,c,u,f,p=1,g=t,m=g.d,y=g.constructor,v=y.rounding,_=y.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new y(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(null==e?(d=!1,c=_):c=e,y.precision=c+=10,i=(n=k(m)).charAt(0),!(Math.abs(o=g.e)<15e14))return l=j(y,c+2,_).times(o+""),g=q(new y(i+"."+n.slice(1)),c-10).plus(l),y.precision=_,null==e?N(g,_,v,d=!0):g;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=k((g=g.times(t)).d)).charAt(0),p++;for(o=g.e,i>1?(g=new y("0."+n),o++):g=new y(i+"."+n.slice(1)),u=g,h=a=g=R(g.minus(1),g.plus(1),c,1),f=N(g.times(g),c,1),r=3;;){if(a=N(a.times(f),c,1),k((l=h.plus(R(a,new y(r),c,1))).d).slice(0,c)===k(h.d).slice(0,c)){if(h=h.times(2),0!==o&&(h=h.plus(j(y,c+2,_).times(o+""))),h=R(h,new y(p),c,1),null!=e)return y.precision=_,h;if(!A(h.d,c-10,v,s))return N(h,y.precision=_,v,d=!0);y.precision=c+=10,l=a=g=R(u.minus(1),u.plus(1),c,1),f=N(g.times(g),c,1),r=s=1}h=l,r+=2}}function Y(t){return String(t.s*t.s/0)}function X(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;48===e.charCodeAt(i);i++);for(r=e.length;48===e.charCodeAt(r-1);--r);if(e=e.slice(i,r)){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=7;i<r;)t.d.push(+e.slice(i,i+=7));i=7-(e=e.slice(i)).length}else i-=r;for(;i--;)e+="0";t.d.push(+e),d&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function K(t,e){var n,i,r,a,s,h,l,c,u;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),S.test(e))return X(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(M.test(e))n=16,e=e.toLowerCase();else if(b.test(e))n=2;else{if(!C.test(e))throw Error(m+e);n=8}for((a=e.search(/p/i))>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),s=(a=e.indexOf("."))>=0,i=t.constructor,s&&(a=(h=(e=e.replace(".","")).length)-a,r=G(i,new i(n),a,2*a)),a=u=(c=L(e,n,E)).length-1;0===c[a];--a)c.pop();return a<0?new i(0*t.s):(t.e=F(c,u),t.d=c,d=!1,s&&(t=R(t,r,4*h)),l&&(t=t.times(Math.abs(l)<54?w(2,l):o.pow(2,l))),d=!0,t)}function Z(t,e,n,i,r){var o,a,s,h,l=t.precision,c=Math.ceil(l/7);for(d=!1,h=n.times(n),s=new t(i);;){if(a=R(s.times(h),new t(e++*e++),l,1),s=r?i.plus(a):i.minus(a),i=R(a.times(h),new t(e++*e++),l,1),void 0!==(a=s.plus(i)).d[c]){for(o=c;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=i,i=a,a=o}return d=!0,a.d.length=c+1,a}function $(t,e){for(var n=t;--e;)n*=t;return n}function Q(t,e){var n,i=e.s<0,r=z(t,t.precision,1),o=r.times(.5);if((e=e.abs()).lte(o))return s=i?4:1,e;if((n=e.divToInt(r)).isZero())s=i?3:2;else{if((e=e.minus(n.times(r))).lte(o))return s=H(n)?i?2:3:i?4:1,e;s=H(n)?i?1:4:i?3:2}return e.minus(r).abs()}function J(t,e,n,i){var r,o,s,h,u,f,p,d,g,m=t.constructor,y=void 0!==n;if(y?(I(n,1,l),void 0===i?i=m.rounding:I(i,0,8)):(n=m.precision,i=m.rounding),t.isFinite()){for(y?(r=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):r=e,(s=(p=D(t)).indexOf("."))>=0&&(p=p.replace(".",""),(g=new m(1)).e=p.length-s,g.d=L(D(g),10,r),g.e=g.d.length),o=u=(d=L(p,10,r)).length;0==d[--u];)d.pop();if(d[0]){if(s<0?o--:((t=new m(t)).d=d,t.e=o,d=(t=R(t,g,n,i,0,r)).d,o=t.e,f=a),s=d[n],h=r/2,f=f||void 0!==d[n+1],f=i<4?(void 0!==s||f)&&(0===i||i===(t.s<0?3:2)):s>h||s===h&&(4===i||f||6===i&&1&d[n-1]||i===(t.s<0?8:7)),d.length=n,f)for(;++d[--n]>r-1;)d[n]=0,n||(++o,d.unshift(1));for(u=d.length;!d[u-1];--u);for(s=0,p="";s<u;s++)p+=c.charAt(d[s]);if(y){if(u>1)if(16==e||8==e){for(s=16==e?4:3,--u;u%s;u++)p+="0";for(u=(d=L(p,r,e)).length;!d[u-1];--u);for(s=1,p="1.";s<u;s++)p+=c.charAt(d[s])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>u)for(o-=u;o--;)p+="0";else o<u&&(p=p.slice(0,o)+"."+p.slice(o))}else p=y?"0p+0":"0";p=(16==e?"0x":2==e?"0b":8==e?"0o":"")+p}else p=Y(t);return t.s<0?"-"+p:p}function tt(t,e){if(t.length>e)return t.length=e,!0}function et(t){return new this(t).abs()}function nt(t){return new this(t).acos()}function it(t){return new this(t).acosh()}function rt(t,e){return new this(t).plus(e)}function ot(t){return new this(t).asin()}function at(t){return new this(t).asinh()}function st(t){return new this(t).atan()}function ht(t){return new this(t).atanh()}function lt(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,o=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?z(this,i,r):new this(0)).s=t.s:!t.d||e.isZero()?(n=z(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(R(t,e,o,1)),e=z(this,o,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(R(t,e,o,1)):(n=z(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function ct(t){return new this(t).cbrt()}function ut(t){return N(t=new this(t),t.e+1,2)}function ft(t,e,n){return new this(t).clamp(e,n)}function pt(t){if(!t||"object"!=typeof t)throw Error(g+"Object expected");var e,n,i,r=!0===t.defaults,o=["precision",1,l,"rounding",0,8,"toExpNeg",-h,0,"toExpPos",0,h,"maxE",0,h,"minE",-h,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],r&&(this[n]=p[n]),void 0!==(i=t[n])){if(!(x(i)===i&&i>=o[e+1]&&i<=o[e+2]))throw Error(m+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=p[n]),void 0!==(i=t[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(m+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[n]=!0}else this[n]=!1}return this}function dt(t){return new this(t).cos()}function gt(t){return new this(t).cosh()}function mt(t,e){return new this(t).div(e)}function yt(t){return new this(t).exp()}function vt(t){return N(t=new this(t),t.e+1,3)}function _t(){var t,e,n=new this(0);for(d=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return d=!0,new this(1/0);n=e}return d=!0,n.sqrt()}function xt(t){return t instanceof o||t&&t.toStringTag===_||!1}function wt(t){return new this(t).ln()}function bt(t,e){return new this(t).log(e)}function Mt(t){return new this(t).log(2)}function Ct(t){return new this(t).log(10)}function St(){return W(this,arguments,"lt")}function Et(){return W(this,arguments,"gt")}function Tt(t,e){return new this(t).mod(e)}function Ot(t,e){return new this(t).mul(e)}function Pt(t,e){return new this(t).pow(e)}function kt(t){var e,n,i,r,o=0,a=new this(1),s=[];if(void 0===t?t=this.precision:I(t,1,l),i=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)(r=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=r%1e7;else{if(!crypto.randomBytes)throw Error(v);for(e=crypto.randomBytes(i*=4);o<i;)(r=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(r%1e7),o+=4);o=i/4}else for(;o<i;)s[o++]=1e7*Math.random()|0;for(t%=7,(i=s[--o])&&t&&(r=w(10,7-t),s[o]=(i/r|0)*r);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(i=1,r=s[0];r>=10;r/=10)i++;i<7&&(n-=7-i)}return a.e=n,a.d=s,a}function It(t){return N(t=new this(t),t.e+1,this.rounding)}function At(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Lt(t){return new this(t).sin()}function Rt(t){return new this(t).sinh()}function Nt(t){return new this(t).sqrt()}function Dt(t,e){return new this(t).sub(e)}function Ft(){var t=0,e=arguments,n=new this(e[t]);for(d=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return d=!0,N(n,this.precision,this.rounding)}function jt(t){return new this(t).tan()}function zt(t){return new this(t).tanh()}function Bt(t){return N(t=new this(t),t.e+1,1)}(o=function t(e){var n,i,r;function o(t){var e,n,i,r=this;if(!(r instanceof o))return new o(t);if(r.constructor=o,xt(t))return r.s=t.s,void(d?!t.d||t.e>o.maxE?(r.e=NaN,r.d=null):t.e<o.minE?(r.e=0,r.d=[0]):(r.e=t.e,r.d=t.d.slice()):(r.e=t.e,r.d=t.d?t.d.slice():t.d));if("number"==(i=typeof t)){if(0===t)return r.s=1/t<0?-1:1,r.e=0,void(r.d=[0]);if(t<0?(t=-t,r.s=-1):r.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(d?e>o.maxE?(r.e=NaN,r.d=null):e<o.minE?(r.e=0,r.d=[0]):(r.e=e,r.d=[t]):(r.e=e,r.d=[t]))}return 0*t!=0?(t||(r.s=NaN),r.e=NaN,void(r.d=null)):X(r,t.toString())}if("string"!==i)throw Error(m+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),r.s=-1):(43===n&&(t=t.slice(1)),r.s=1),S.test(t)?X(r,t):K(r,t)}if(o.prototype=P,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=pt,o.clone=t,o.isDecimal=xt,o.abs=et,o.acos=nt,o.acosh=it,o.add=rt,o.asin=ot,o.asinh=at,o.atan=st,o.atanh=ht,o.atan2=lt,o.cbrt=ct,o.ceil=ut,o.clamp=ft,o.cos=dt,o.cosh=gt,o.div=mt,o.exp=yt,o.floor=vt,o.hypot=_t,o.ln=wt,o.log=bt,o.log10=Ct,o.log2=Mt,o.max=St,o.min=Et,o.mod=Tt,o.mul=Ot,o.pow=Pt,o.random=kt,o.round=It,o.sign=At,o.sin=Lt,o.sinh=Rt,o.sqrt=Nt,o.sub=Dt,o.sum=Ft,o.tan=jt,o.tanh=zt,o.trunc=Bt,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)e.hasOwnProperty(i=r[n++])||(e[i]=this[i]);return o.config(e),o}(p)).prototype.constructor=o,o.default=o.Decimal=o,u=new o(u),f=new o(f),void 0===(i=function(){return o}.call(e,n,e,t))||(t.exports=i)}()},628:function(t,e){var n;!function(i){"use strict";var r={s:1,n:0,d:1};function o(t){function e(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message}function n(){}return n.prototype=Error.prototype,e.prototype=new n,e}var a=p.DivisionByZero=o("DivisionByZero"),s=p.InvalidParameter=o("InvalidParameter");function h(t,e){return isNaN(t=parseInt(t,10))&&l(),t*e}function l(){throw new s}function c(t){for(var e={},n=t,i=2,r=4;r<=n;){for(;n%i==0;)n/=i,e[i]=(e[i]||0)+1;r+=1+2*i++}return n!==t?n>1&&(e[n]=(e[n]||0)+1):e[t]=(e[t]||0)+1,e}var u=function(t,e){var n,i=0,o=1,s=1,c=0,u=0,f=0,p=1,d=1,g=0,m=1,y=1,v=1,_=1e7;if(null==t);else if(void 0!==e)s=(i=t)*(o=e);else switch(typeof t){case"object":"d"in t&&"n"in t?(i=t.n,o=t.d,"s"in t&&(i*=t.s)):0 in t?(i=t[0],1 in t&&(o=t[1])):l(),s=i*o;break;case"number":if(t<0&&(s=t,t=-t),t%1==0)i=t;else if(t>0){for(t>=1&&(t/=d=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));m<=_&&v<=_;){if(t===(n=(g+y)/(m+v))){m+v<=_?(i=g+y,o=m+v):v>m?(i=y,o=v):(i=g,o=m);break}t>n?(g+=y,m+=v):(y+=g,v+=m),m>_?(i=y,o=v):(i=g,o=m)}i*=d}else(isNaN(t)||isNaN(e))&&(o=i=NaN);break;case"string":if(null===(m=t.match(/\d+|./g))&&l(),"-"===m[g]?(s=-1,g++):"+"===m[g]&&g++,m.length===g+1?u=h(m[g++],s):"."===m[g+1]||"."===m[g]?("."!==m[g]&&(c=h(m[g++],s)),(1+ ++g===m.length||"("===m[g+1]&&")"===m[g+3]||"'"===m[g+1]&&"'"===m[g+3])&&(u=h(m[g],s),p=Math.pow(10,m[g].length),g++),("("===m[g]&&")"===m[g+2]||"'"===m[g]&&"'"===m[g+2])&&(f=h(m[g+1],s),d=Math.pow(10,m[g+1].length)-1,g+=3)):"/"===m[g+1]||":"===m[g+1]?(u=h(m[g],s),p=h(m[g+2],1),g+=3):"/"===m[g+3]&&" "===m[g+1]&&(c=h(m[g],s),u=h(m[g+2],s),p=h(m[g+4],1),g+=5),m.length<=g){s=i=f+(o=p*d)*c+d*u;break}default:l()}if(0===o)throw new a;r.s=s<0?-1:1,r.n=Math.abs(i),r.d=Math.abs(o)};function f(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function p(t,e){if(!(this instanceof p))return new p(t,e);u(t,e),t=f(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t}p.prototype={s:1,n:0,d:1,abs:function(){return new p(this.n,this.d)},neg:function(){return new p(-this.s*this.n,this.d)},add:function(t,e){return u(t,e),new p(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,e){return u(t,e),new p(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,e){return u(t,e),new p(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,e){return u(t,e),new p(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return new p(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new p(NaN):void 0===t?new p(this.s*this.n%this.d,1):(u(t,e),0===r.n&&0===this.d&&p(0,0),new p(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d))},gcd:function(t,e){return u(t,e),new p(f(r.n,this.n)*f(r.d,this.d),r.d*this.d)},lcm:function(t,e){return u(t,e),0===r.n&&0===this.n?new p:new p(r.n*this.n,f(r.n,this.n)*f(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new p(this.s*this.d,this.n)},pow:function(t,e){if(u(t,e),1===r.d)return r.s<0?new p(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):new p(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var n=c(this.n),i=c(this.d),o=1,a=1;for(var s in n)if("1"!==s){if("0"===s){o=0;break}if(n[s]*=r.n,n[s]%r.d!=0)return null;n[s]/=r.d,o*=Math.pow(s,n[s])}for(var s in i)if("1"!==s){if(i[s]*=r.n,i[s]%r.d!=0)return null;i[s]/=r.d,a*=Math.pow(s,i[s])}return r.s<0?new p(a,o):new p(o,a)},equals:function(t,e){return u(t,e),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(t,e){u(t,e);var n=this.s*this.n*r.d-r.s*r.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;var e=this.abs().toContinued();function n(t){return 1===t.length?new p(t[0]):n(t.slice(1)).inverse().add(t[0])}t=t||.001;for(var i=0;i<e.length;i++){var r=n(e.slice(0,i+1));if(r.sub(this.abs()).abs().valueOf()<t)return r.mul(this.s)}return this},divisible:function(t,e){return u(t,e),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(t&&(e=Math.floor(i/r))>0&&(n+=e,n+=" ",i%=r),n+=i,n+="/",n+=r),n},toLatex:function(t){var e,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(t&&(e=Math.floor(i/r))>0&&(n+=e,i%=r),n+="\\frac{",n+=i,n+="}{",n+=r,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,i=[];if(isNaN(e)||isNaN(n))return i;do{i.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return i},toString:function(t){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";t=t||15;var i=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,i=1;1!==n;i++)if(n=10*n%e,i>2e3)return 0;return i}(0,n),r=function(t,e,n){for(var i=1,r=function(t,e,n){for(var i=1;e>0;t=t*t%n,e>>=1)1&e&&(i=i*t%n);return i}(10,n,e),o=0;o<300;o++){if(i===r)return o;i=10*i%e,r=10*r%e}return 0}(0,n,i),o=-1===this.s?"-":"";if(o+=e/n|0,e%=n,(e*=10)&&(o+="."),i){for(var a=r;a--;)o+=e/n|0,e%=n,e*=10;for(o+="(",a=i;a--;)o+=e/n|0,e%=n,e*=10;o+=")"}else for(a=t;e&&a--;)o+=e/n|0,e%=n,e*=10;return o}},void 0===(n=function(){return p}.apply(e,[]))||(t.exports=n)}()},228:t=>{t.exports=function t(e,n){"use strict";var i,r,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,l=/^0/,c=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},u=c(e).replace(a,"")||"",f=c(n).replace(a,"")||"",p=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(u.match(h),16)||1!==p.length&&u.match(s)&&Date.parse(u),m=parseInt(f.match(h),16)||g&&f.match(s)&&Date.parse(f)||null;if(m){if(g<m)return-1;if(g>m)return 1}for(var y=0,v=Math.max(p.length,d.length);y<v;y++){if(i=!(p[y]||"").match(l)&&parseFloat(p[y])||p[y]||0,r=!(d[y]||"").match(l)&&parseFloat(d[y])||d[y]||0,isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),i<r)return-1;if(i>r)return 1}return 0}},582:function(t){t.exports=function(){"use strict";function t(t,i,r,o,a){!function t(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,h=i-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(h-s/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-h*c/s+u)),Math.min(o,Math.floor(i+(s-h)*c/s+u)),a)}var f=n[i],p=r,d=o;for(e(n,r,i),a(n[o],f)>0&&e(n,r,o);p<d;){for(e(n,p,d),p++,d--;a(n[p],f)<0;)p++;for(;a(n[d],f)>0;)d--}0===a(n[r],f)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(t,i,r||0,o||t.length-1,a||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(r,t.leaf?i(a):a)}return r}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,i,r,o){for(var a=[n,i];a.length;)if(!((i=a.pop())-(n=a.pop())<=r)){var s=n+Math.ceil((i-n)/r/2)*r;t(e,s,n,i,o),a.push(n,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?i(a):a;p(t,s)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):r.push(a))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(p(t,o)){if(e.leaf||f(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,a=this.data,s=this.toBBox(t),h=[],l=[];a||h.length;){if(a||(a=h.pop(),i=h[h.length-1],n=l.pop(),o=!0),a.leaf){var c=r(t,a.children,e);if(-1!==c)return a.children.splice(c,1),h.push(a),this._condense(h),this}o||a.leaf||!f(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(h.push(a),l.push(n),n=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,a=n-e+1,s=this._maxEntries;if(a<=s)return o(r=d(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(r=d([])).leaf=!1,r.height=i;var h=Math.ceil(a/s),l=h*Math.ceil(Math.sqrt(s));g(t,e,n,l,this.compareMinX);for(var c=e;c<=n;c+=l){var u=Math.min(c+l-1,n);g(t,c,u,h,this.compareMinY);for(var f=c;f<=u;f+=h){var p=Math.min(f+h-1,u);r.children.push(this._build(t,f,p,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var h=e.children[s],l=c(h),u=(f=t,p=h,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);u<o?(o=u,r=l<r?l:r,a=h):u===o&&l<r&&(r=l,a=h)}e=a||e.children[0]}var f,p;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),s(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,s,h,l,u,f=1/0,p=1/0,d=e;d<=n-e;d++){var g=a(t,0,d,this.toBBox),m=a(t,d,n,this.toBBox),y=(r=g,o=m,void 0,void 0,void 0,void 0,s=Math.max(r.minX,o.minX),h=Math.max(r.minY,o.minY),l=Math.min(r.maxX,o.maxX),u=Math.min(r.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,u-h)),v=c(g)+c(m);y<f?(f=y,i=d,p=v<p?v:p):y===f&&v<p&&(p=v,i=d)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=a(t,0,e,r),h=a(t,n-e,n,r),l=u(o)+u(h),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?r(f):f),l+=u(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p];s(h,t.leaf?r(d):d),l+=u(h)}return l},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)s(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},377:(t,e,n)=>{var i=n(832),r=n(652),o=n(801),a=n(30),s=n(618),h=n(49),l=n(971);l.alea=i,l.xor128=r,l.xorwow=o,l.xorshift7=a,l.xor4096=s,l.tychei=h,t.exports=l},832:function(t,e,n){var i;!function(t,r,o){function a(t){var e,n=this,i=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=i(" "),n.s1=i(" "),n.s2=i(" "),n.s0-=i(t),n.s0<0&&(n.s0+=1),n.s1-=i(t),n.s1<0&&(n.s1+=1),n.s2-=i(t),n.s2<0&&(n.s2+=1),i=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function h(t,e){var n=new a(t),i=e&&e.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=h:n.amdD&&n.amdO?void 0===(i=function(){return h}.call(e,n,e,r))||(r.exports=i):this.alea=h}(0,t=n.nmd(t),n.amdD)},49:function(t,e,n){var i;!function(t,r,o){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,i=e.d,r=e.a;return t=t<<25^t>>>7^n,n=n-i|0,i=i<<24^i>>>8^r,r=r-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-i|0,e.d=i<<16^n>>>16^r,e.a=r-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var i=0;i<n.length+20;i++)e.b^=0|n.charCodeAt(i),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function h(t,e){var n=new a(t),i=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=h:n.amdD&&n.amdO?void 0===(i=function(){return h}.call(e,n,e,r))||(r.exports=i):this.tychei=h}(0,t=n.nmd(t),n.amdD)},652:function(t,e,n){var i;!function(t,r,o){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var i=0;i<n.length+64;i++)e.x^=0|n.charCodeAt(i),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function h(t,e){var n=new a(t),i=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=h:n.amdD&&n.amdO?void 0===(i=function(){return h}.call(e,n,e,r))||(r.exports=i):this.xor128=h}(0,t=n.nmd(t),n.amdD)},618:function(t,e,n){var i;!function(t,r,o){function a(t){var e=this;e.next=function(){var t,n,i=e.w,r=e.X,o=e.i;return e.w=i=i+1640531527|0,n=r[o+34&127],t=r[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=r[o]=n^t,e.i=o,n+(i^i>>>16)|0},function(t,e){var n,i,r,o,a,s=[],h=128;for(e===(0|e)?(i=e,e=null):(e+="\0",i=0,h=Math.max(h,e.length)),r=0,o=-32;o<h;++o)e&&(i^=e.charCodeAt((o+32)%e.length)),0===o&&(a=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(a=a+1640531527|0,r=0==(n=s[127&o]^=i+a)?r+1:0);for(r>=128&&(s[127&(e&&e.length||0)]=-1),r=127,o=512;o>0;--o)i=s[r+34&127],n=s[r=r+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,s[r]=i^n;t.w=a,t.X=s,t.i=r}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function h(t,e){null==t&&(t=+new Date);var n=new a(t),i=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,i&&(i.X&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=h:n.amdD&&n.amdO?void 0===(i=function(){return h}.call(e,n,e,r))||(r.exports=i):this.xor4096=h}(0,t=n.nmd(t),n.amdD)},30:function(t,e,n){var i;!function(t,r,o){function a(t){var e=this;e.next=function(){var t,n,i=e.x,r=e.i;return t=i[r],n=(t^=t>>>7)^t<<24,n^=(t=i[r+1&7])^t>>>10,n^=(t=i[r+3&7])^t>>>3,n^=(t=i[r+4&7])^t<<7,t=i[r+7&7],n^=(t^=t<<13)^t<<9,i[r]=n,e.i=r+1&7,n},function(t,e){var n,i=[];if(e===(0|e))i[0]=e;else for(e=""+e,n=0;n<e.length;++n)i[7&n]=i[7&n]<<15^e.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n?i[7]=-1:i[n],t.x=i,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function h(t,e){null==t&&(t=+new Date);var n=new a(t),i=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,i&&(i.x&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=h:n.amdD&&n.amdO?void 0===(i=function(){return h}.call(e,n,e,r))||(r.exports=i):this.xorshift7=h}(0,t=n.nmd(t),n.amdD)},801:function(t,e,n){var i;!function(t,r,o){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var i=0;i<n.length+64;i++)e.x^=0|n.charCodeAt(i),i==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function h(t,e){var n=new a(t),i=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=h:n.amdD&&n.amdO?void 0===(i=function(){return h}.call(e,n,e,r))||(r.exports=i):this.xorwow=h}(0,t=n.nmd(t),n.amdD)},971:function(t,e,n){var i;!function(r,o,a){var s,h=256,l=a.pow(h,6),c=a.pow(2,52),u=2*c,f=255;function p(t,e,n){var i=[],f=y(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(o)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(h):(t=new Uint8Array(h),(r.crypto||r.msCrypto).getRandomValues(t)),v(t)}catch(t){var e=r.navigator,n=e&&e.plugins;return[+new Date,r,n,r.screen,v(o)]}}():t,3),i),p=new d(i),_=function(){for(var t=p.g(6),e=l,n=0;t<c;)t=(t+n)*h,e*=h,n=p.g(1);for(;t>=u;)t/=2,e/=2,n>>>=1;return(t+n)/e};return _.int32=function(){return 0|p.g(4)},_.quick=function(){return p.g(4)/4294967296},_.double=_,y(v(p.S),o),(e.pass||n||function(t,e,n,i){return i&&(i.S&&g(i,p),t.state=function(){return g(p,{})}),n?(a.random=t,e):t})(_,f,"global"in e?e.global:this==a,e.state)}function d(t){var e,n=t.length,i=this,r=0,o=i.i=i.j=0,a=i.S=[];for(n||(t=[n++]);r<h;)a[r]=r++;for(r=0;r<h;r++)a[r]=a[o=f&o+t[r%n]+(e=a[r])],a[o]=e;(i.g=function(t){for(var e,n=0,r=i.i,o=i.j,a=i.S;t--;)e=a[r=f&r+1],n=n*h+a[f&(a[r]=a[o=f&o+e])+(a[o]=e)];return i.i=r,i.j=o,n})(h)}function g(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){var n,i=[],r=typeof t;if(e&&"object"==r)for(n in t)try{i.push(m(t[n],e-1))}catch(t){}return i.length?i:"string"==r?t:t+"\0"}function y(t,e){for(var n,i=t+"",r=0;r<i.length;)e[f&r]=f&(n^=19*e[f&r])+i.charCodeAt(r++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(y(a.random(),o),t.exports){t.exports=p;try{s=n(42)}catch(t){}}else void 0===(i=function(){return p}.call(e,n,e,t))||(t.exports=i)}("undefined"!=typeof self?self:this,[],Math)},287:function(t,e){"use strict";var n,i;n=function(){function t(){return!0}function e(){return!1}function n(){}return function i(){var r=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t&&null!==t&&t.constructor===Object}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],o={name:"any",test:t},a=[],s=[],h={types:r,conversions:s,ignore:a};function l(t){var e=z(h.types,(function(e){return e.name===t}));if(e)return e;if("any"===t)return o;var n=z(h.types,(function(e){return e.name.toLowerCase()===t.toLowerCase()}));throw new TypeError('Unknown type "'+t+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function c(t){return t===o?999:h.types.indexOf(t)}function u(t){var e=z(h.types,(function(e){return e.test(t)}));if(e)return e.name;throw new TypeError("Value has unknown type. Value: "+t)}function f(t){return t.map((function(t){var e=t.types.map(x);return(t.restParam?"...":"")+e.join("|")})).join(",")}function p(t,e){var n=0===t.indexOf("..."),i=(n?t.length>3?t.slice(3):"any":t).split("|").map(A).filter(L).filter(I),r=function(t,e){var n={};return t.forEach((function(t){-1!==e.indexOf(t.from)||-1===e.indexOf(t.to)||n[t.from]||(n[t.from]=t)})),Object.keys(n).map((function(t){return n[t]}))}(e,i),o=i.map((function(t){var e=l(t);return{name:t,typeIndex:c(e),test:e.test,conversion:null,conversionIndex:-1}})),a=r.map((function(t){var n=l(t.from);return{name:t.from,typeIndex:c(n),test:n.test,conversion:t,conversionIndex:e.indexOf(t)}}));return{types:o.concat(a),restParam:n}}function d(t){var e=D(t);return!!e&&e.restParam}function g(t){return t.types.some((function(t){return null!=t.conversion}))}function m(e){if(e&&0!==e.types.length){if(1===e.types.length)return l(e.types[0].name).test;if(2===e.types.length){var n=l(e.types[0].name).test,i=l(e.types[1].name).test;return function(t){return n(t)||i(t)}}var r=e.types.map((function(t){return l(t.name).test}));return function(t){for(var e=0;e<r.length;e++)if(r[e](t))return!0;return!1}}return t}function y(t){var e,n,i,r;if(d(t)){var o=(e=(r=t,r.slice(0,r.length-1)).map(m)).length,a=m(D(t));return function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return function(t){for(var e=o;e<t.length;e++)if(!a(t[e]))return!1;return!0}(t)&&t.length>=o+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(n=m(t[0]),function(t){return n(t[0])&&1===t.length}):2===t.length?(n=m(t[0]),i=m(t[1]),function(t){return n(t[0])&&i(t[1])&&2===t.length}):(e=t.map(m),function(t){for(var n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return t.length===e.length})}function v(t,e){return e<t.params.length?t.params[e]:d(t.params)?D(t.params):null}function _(t,e,n){var i=v(t,e);return(i?n?i.types.filter(w):i.types:[]).map(x)}function x(t){return t.name}function w(t){return null===t.conversion||void 0===t.conversion}function b(t,e){var n=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return Object.keys(e)}(B(t,(function(t){return _(t,e,!1)})));return-1!==n.indexOf("any")?["any"]:n}function M(t,e,n){var i,r,o,a=t||"unnamed",s=n;for(o=0;o<e.length;o++){var h=s.filter((function(t){var n=m(v(t,o));return(o<t.params.length||d(t.params))&&n(e[o])}));if(0===h.length){if((r=b(s,o)).length>0){var l=u(e[o]);return(i=new TypeError("Unexpected type of argument in function "+a+" (expected: "+r.join(" or ")+", actual: "+l+", index: "+o+")")).data={category:"wrongType",fn:a,index:o,actual:l,expected:r},i}}else s=h}var c=s.map((function(t){return d(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,c))return r=b(s,o),(i=new TypeError("Too few arguments in function "+a+" (expected: "+r.join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:a,index:e.length,expected:r},i;var f=Math.max.apply(null,c);return e.length>f?((i=new TypeError("Too many arguments in function "+a+" (expected: "+f+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:a,index:e.length,expectedLength:f},i):((i=new TypeError('Arguments of type "'+e.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:e.map(u)},i)}function C(t){for(var e=999,n=0;n<t.types.length;n++)w(t.types[n])&&(e=Math.min(e,t.types[n].typeIndex));return e}function S(t){for(var e=999,n=0;n<t.types.length;n++)w(t.types[n])||(e=Math.min(e,t.types[n].conversionIndex));return e}function E(t,e){var n;return 0!=(n=t.restParam-e.restParam)||0!=(n=g(t)-g(e))||0!=(n=C(t)-C(e))?n:S(t)-S(e)}function T(t,e){var n,i,r=Math.min(t.params.length,e.params.length);if(0!=(i=t.params.some(g)-e.params.some(g)))return i;for(n=0;n<r;n++)if(0!=(i=g(t.params[n])-g(e.params[n])))return i;for(n=0;n<r;n++)if(0!==(i=E(t.params[n],e.params[n])))return i;return t.params.length-e.params.length}function O(t){var e,n,i,r,o=[],a=[];switch(t.types.forEach((function(t){t.conversion&&(o.push(l(t.conversion.from).test),a.push(t.conversion.convert))})),a.length){case 0:return function(t){return t};case 1:return e=o[0],i=a[0],function(t){return e(t)?i(t):t};case 2:return e=o[0],n=o[1],i=a[0],r=a[1],function(t){return e(t)?i(t):n(t)?r(t):t};default:return function(t){for(var e=0;e<a.length;e++)if(o[e](t))return a[e](t);return t}}}function P(t,e){return function t(n,i,r){if(i<n.length){var o,a=n[i],s=e?a.types.filter(w):a.types;if(a.restParam){var h=s.filter(w);o=h.length<s.length?[h,s]:[s]}else o=s.map((function(t){return[t]}));return B(o,(function(e){return t(n,i+1,r.concat([e]))}))}return[r.map((function(t,e){return{types:t,restParam:e===n.length-1&&d(n)}}))]}(t,0,[])}function k(t,i){if(0===Object.keys(i).length)throw new SyntaxError("No signatures provided");var r=[];Object.keys(i).map((function(t){return function(t,e,n){var i=[];return""!==t.trim()&&(i=t.split(",").map(A).map((function(t,e,i){var r=p(t,n);if(r.restParam&&e!==i.length-1)throw new SyntaxError('Unexpected rest parameter "'+t+'": only allowed for the last parameter');return r}))),i.some(N)?null:{params:i,fn:e}}(t,i[t],h.conversions)})).filter(R).forEach((function(t){var e=z(r,(function(e){return function(t,e){for(var n=Math.max(t.params.length,e.params.length),i=0;i<n;i++)if(!j(_(t,i,!0),_(e,i,!0)))return!1;var r=t.params.length,o=e.params.length,a=d(t.params),s=d(e.params);return a?s?r===o:o>=r:s?r>=o:r===o}(e,t)}));if(e)throw new TypeError('Conflicting signatures "'+f(e.params)+'" and "'+f(t.params)+'".');r.push(t)}));var o=B(r,(function(t){return(t?P(t.params,!1):[]).map((function(e){return{params:e,fn:t.fn}}))})).filter(R);o.sort(T);var a=o[0]&&o[0].params.length<=2&&!d(o[0].params),s=o[1]&&o[1].params.length<=2&&!d(o[1].params),l=o[2]&&o[2].params.length<=2&&!d(o[2].params),c=o[3]&&o[3].params.length<=2&&!d(o[3].params),u=o[4]&&o[4].params.length<=2&&!d(o[4].params),v=o[5]&&o[5].params.length<=2&&!d(o[5].params),x=a&&s&&l&&c&&u&&v,w=o.map((function(t){return y(t.params)})),b=a?m(o[0].params[0]):e,C=s?m(o[1].params[0]):e,S=l?m(o[2].params[0]):e,E=c?m(o[3].params[0]):e,k=u?m(o[4].params[0]):e,I=v?m(o[5].params[0]):e,L=a?m(o[0].params[1]):e,D=s?m(o[1].params[1]):e,U=l?m(o[2].params[1]):e,G=c?m(o[3].params[1]):e,H=u?m(o[4].params[1]):e,W=v?m(o[5].params[1]):e,V=o.map((function(t){return function(t,e){var n=e;if(t.some(g)){var i=d(t),r=t.map(O);n=function(){for(var t=[],n=i?arguments.length-1:arguments.length,o=0;o<n;o++)t[o]=r[o](arguments[o]);return i&&(t[n]=arguments[n].map(r[n])),e.apply(this,t)}}var o=n;if(d(t)){var a=t.length-1;o=function(){return n.apply(this,F(arguments,0,a).concat([F(arguments,a)]))}}return o}(t.params,t.fn)})),q=a?V[0]:n,Y=s?V[1]:n,X=l?V[2]:n,K=c?V[3]:n,Z=u?V[4]:n,$=v?V[5]:n,Q=a?o[0].params.length:-1,J=s?o[1].params.length:-1,tt=l?o[2].params.length:-1,et=c?o[3].params.length:-1,nt=u?o[4].params.length:-1,it=v?o[5].params.length:-1,rt=x?6:0,ot=o.length,at=function(){for(var e=rt;e<ot;e++)if(w[e](arguments))return V[e].apply(this,arguments);throw M(t,arguments,o)},st=function t(e,n){return arguments.length===Q&&b(e)&&L(n)?q.apply(t,arguments):arguments.length===J&&C(e)&&D(n)?Y.apply(t,arguments):arguments.length===tt&&S(e)&&U(n)?X.apply(t,arguments):arguments.length===et&&E(e)&&G(n)?K.apply(t,arguments):arguments.length===nt&&k(e)&&H(n)?Z.apply(t,arguments):arguments.length===it&&I(e)&&W(n)?$.apply(t,arguments):at.apply(t,arguments)};try{Object.defineProperty(st,"name",{value:t})}catch(t){}return st.signatures=function(t){var e={};return t.forEach((function(t){t.params.some(g)||P(t.params,!0).forEach((function(n){e[f(n)]=t.fn}))})),e}(o),st}function I(t){return-1===h.ignore.indexOf(t)}function A(t){return t.trim()}function L(t){return!!t}function R(t){return null!==t}function N(t){return 0===t.types.length}function D(t){return t[t.length-1]}function F(t,e,n){return Array.prototype.slice.call(t,e,n)}function j(t,e){for(var n=0;n<t.length;n++)if(i=e,r=t[n],-1!==i.indexOf(r))return!0;var i,r;return!1}function z(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function B(t,e){return Array.prototype.concat.apply([],t.map(e))}function U(t){for(var e="",n=0;n<t.length;n++){var i=t[n];if(("object"==typeof i.signatures||"string"==typeof i.signature)&&""!==i.name)if(""===e)e=i.name;else if(e!==i.name){var r=new Error("Function names do not match (expected: "+e+", actual: "+i.name+")");throw r.data={actual:i.name,expected:e},r}}return e}function G(t){var e,n={};function i(t,i){if(n.hasOwnProperty(t)&&i!==n[t])throw(e=new Error('Signature "'+t+'" is defined twice')).data={signature:t},e}for(var r=0;r<t.length;r++){var o=t[r];if("object"==typeof o.signatures)for(var a in o.signatures)o.signatures.hasOwnProperty(a)&&(i(a,o.signatures[a]),n[a]=o.signatures[a]);else{if("string"!=typeof o.signature)throw(e=new TypeError("Function is no typed-function (index: "+r+")")).data={index:r},e;i(o.signature,o),n[o.signature]=o}}return n}return(h=k("typed",{"string, Object":k,Object:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return k(U(e),t)},"...Function":function(t){return k(U(t),G(t))},"string, ...Function":function(t,e){return k(t,G(e))}})).create=i,h.types=r,h.conversions=s,h.ignore=a,h.convert=function(t,e){var n=u(t);if(e===n)return t;for(var i=0;i<h.conversions.length;i++){var r=h.conversions[i];if(r.from===n&&r.to===e)return r.convert(t)}throw new Error("Cannot convert from "+n+" to "+e)},h.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof e){n=e.split(",");for(var i=0;i<n.length;i++)n[i]=n[i].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");n=e}var r=n.join(","),o=t.signatures[r];if(o)return o;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+n.join(", ")+"))")},h.addType=function(t,e){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==e)for(var n=0;n<h.types.length;n++)if("Object"===h.types[n].name)return void h.types.splice(n,0,t);h.types.push(t)},h.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");h.conversions.push(t)},h}()},void 0===(i=n.apply(e,[]))||(t.exports=i)},42:()=>{}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,loaded:!1,exports:{}};return r[t].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=r,a.amdD=function(){throw new Error("define cannot be used indirect")},a.amdO={},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var r=Object.create(null);a.r(r);var o={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>o[t]=()=>n[t]));return o.default=()=>n,a.d(r,o),r},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,n)=>(a.f[n](t,e),e)),[])),a.u=t=>"jszip.chunk.js?c41daf3ab400d34b1c5e",a.miniCssF=t=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},i="geolinq:",a.l=(t,e,r,o)=>{if(n[t])n[t].push(e);else{var s,h;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==i+r){s=u;break}}s||(h=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",i+r),s.src=t),n[t]=[e];var f=(e,i)=>{s.onerror=s.onload=null,clearTimeout(p);var r=n[t];if(delete n[t],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(i))),e)return e(i)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),h&&document.head.appendChild(s)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={179:0};a.f.j=(e,n)=>{var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=t[e]=[n,r]));n.push(i[2]=r);var o=a.p+a.u(e),s=new Error;a.l(o,(n=>{if(a.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}}),"chunk-"+e,e)}};var e=(e,n)=>{var i,r,[o,s,h]=n,l=0;if(o.some((e=>0!==t[e]))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);h&&h(a)}for(e&&e(n);l<o.length;l++)r=o[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0},n=self.webpackChunkgeolinq=self.webpackChunkgeolinq||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var s={};return(()=>{"use strict";a.r(s),a.d(s,{chart:()=>Pf,control:()=>Lf,data_format:()=>Hy,icon:()=>gw,locale:()=>gB,map:()=>dB,tooltip:()=>B_,util:()=>yB});const t="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function e(e,n,i){const r=i||(t=>Array.prototype.slice.call(t));let o=!1,a=[];return function(...i){a=r(i),o||(o=!0,t.call(window,(()=>{o=!1,e.apply(n,a)})))}}const n=t=>"start"===t?"left":"end"===t?"right":"center",i=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function r(){}const o=function(){let t=0;return function(){return t++}}();function h(t){return null==t}function l(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function c(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const u=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function f(t,e){return u(t)?t:e}function p(t,e){return void 0===t?e:t}const d=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function g(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function m(t,e,n,i){let r,o,a;if(l(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(c(t))for(a=Object.keys(t),o=a.length,r=0;r<o;r++)e.call(n,t[a[r]],a[r])}function y(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function v(t){if(l(t))return t.map(v);if(c(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=v(t[n[r]]);return e}return t}function _(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function x(t,e,n,i){if(!_(t))return;const r=e[t],o=n[t];c(r)&&c(o)?w(r,o,i):e[t]=v(o)}function w(t,e,n){const i=l(e)?e:[e],r=i.length;if(!c(t))return t;const o=(n=n||{}).merger||x;for(let a=0;a<r;++a){if(!c(e=i[a]))continue;const r=Object.keys(e);for(let i=0,a=r.length;i<a;++i)o(r[i],t,e,n)}return t}function b(t,e){return w(t,e,{merger:M})}function M(t,e,n){if(!_(t))return;const i=e[t],r=n[t];c(i)&&c(r)?b(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=v(r))}function C(t,e){const n=t.indexOf(".",e);return-1===n?t.length:n}function S(t,e){if(""===e)return t;let n=0,i=C(e,n);for(;t&&i>n;)t=t[e.substr(n,i-n)],n=i+1,i=C(e,n);return t}function E(t){return t.charAt(0).toUpperCase()+t.slice(1)}const T=t=>void 0!==t,O=t=>"function"==typeof t,P=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},k=Math.PI,I=2*k,A=I+k,L=Number.POSITIVE_INFINITY,R=k/180,N=k/2,D=k/4,F=2*k/3,j=Math.log10,z=Math.sign;function B(t){const e=Math.round(t);t=G(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(j(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function U(t){return!isNaN(parseFloat(t))&&isFinite(t)}function G(t,e,n){return Math.abs(t-e)<n}function H(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function W(t){return t*(k/180)}function V(t){return t*(180/k)}function q(t){if(!u(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Y(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*k&&(o+=I),{angle:o,distance:r}}function X(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function K(t,e){return(t-e+A)%I-k}function Z(t){return(t%I+I)%I}function $(t,e,n,i){const r=Z(t),o=Z(e),a=Z(n),s=Z(o-r),h=Z(a-r),l=Z(r-o),c=Z(r-a);return r===o||r===a||i&&o===a||s>h&&l<c}function Q(t,e,n){return Math.max(e,Math.min(n,t))}function J(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}const tt=t=>0===t||1===t,et=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*I/n),nt=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*I/n)+1,it={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*N),easeOutSine:t=>Math.sin(t*N),easeInOutSine:t=>-.5*(Math.cos(k*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>tt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>tt(t)?t:et(t,.075,.3),easeOutElastic:t=>tt(t)?t:nt(t,.075,.3),easeInOutElastic(t){const e=.1125;return tt(t)?t:t<.5?.5*et(2*t,e,.45):.5+.5*nt(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-it.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*it.easeInBounce(2*t):.5*it.easeOutBounce(2*t-1)+.5},rt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ot="0123456789ABCDEF",at=t=>ot[15&t],st=t=>ot[(240&t)>>4]+ot[15&t],ht=t=>(240&t)>>4==(15&t);function lt(t){return t+.5|0}const ct=(t,e,n)=>Math.max(Math.min(t,n),e);function ut(t){return ct(lt(2.55*t),0,255)}function ft(t){return ct(lt(255*t),0,255)}function pt(t){return ct(lt(t/2.55)/100,0,1)}function dt(t){return ct(lt(100*t),0,100)}const gt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,mt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yt(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function vt(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function _t(t,e,n){const i=yt(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function xt(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;let s,h,l;return r!==o&&(l=r-o,h=a>.5?l/(2-r-o):l/(r+o),s=r===e?(n-i)/l+(n<i?6:0):r===n?(i-e)/l+2:(e-n)/l+4,s=60*s+.5),[0|s,h||0,a]}function wt(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ft)}function bt(t,e,n){return wt(yt,t,e,n)}function Mt(t){return(t%360+360)%360}const Ct={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},St={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Et;function Tt(t,e,n){if(t){let i=xt(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=bt(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Ot(t,e){return t?Object.assign(e||{},t):t}function Pt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ft(t[3]))):(e=Ot(t,{r:0,g:0,b:0,a:1})).a=ft(e.a),e}function kt(t){return"r"===t.charAt(0)?function(t){const e=gt.exec(t);let n,i,r,o=255;if(e){if(e[7]!==n){const t=+e[7];o=255&(e[8]?ut(t):255*t)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?ut(n):n),i=255&(e[4]?ut(i):i),r=255&(e[6]?ut(r):r),{r:n,g:i,b:r,a:o}}}(t):function(t){const e=mt.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?ut(+e[5]):ft(+e[5]));const r=Mt(+e[2]),o=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return wt(_t,t,e,n)}(r,o,a):"hsv"===e[1]?function(t,e,n){return wt(vt,t,e,n)}(r,o,a):bt(r,o,a),{r:n[0],g:n[1],b:n[2],a:i}}(t)}class It{constructor(t){if(t instanceof It)return t;const e=typeof t;let n;var i,r,o;"object"===e?n=Pt(t):"string"===e&&(o=(i=t).length,"#"===i[0]&&(4===o||5===o?r={r:255&17*rt[i[1]],g:255&17*rt[i[2]],b:255&17*rt[i[3]],a:5===o?17*rt[i[4]]:255}:7!==o&&9!==o||(r={r:rt[i[1]]<<4|rt[i[2]],g:rt[i[3]]<<4|rt[i[4]],b:rt[i[5]]<<4|rt[i[6]],a:9===o?rt[i[7]]<<4|rt[i[8]]:255})),n=r||function(t){Et||(Et=function(){const t={},e=Object.keys(St),n=Object.keys(Ct);let i,r,o,a,s;for(i=0;i<e.length;i++){for(a=s=e[i],r=0;r<n.length;r++)o=n[r],s=s.replace(o,Ct[o]);o=parseInt(St[a],16),t[s]=[o>>16&255,o>>8&255,255&o]}return t}(),Et.transparent=[0,0,0,0]);const e=Et[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||kt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Ot(this._rgb);return t&&(t.a=pt(t.a)),t}set rgb(t){this._rgb=Pt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?(t=this._rgb,e=function(t){return ht(t.r)&&ht(t.g)&&ht(t.b)&&ht(t.a)}(t)?at:st,t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t):this._rgb;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=xt(t),n=e[0],i=dt(e[1]),r=dt(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${pt(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):this._rgb}mix(t,e){const n=this;if(t){const i=n.rgb,r=t.rgb;let o;const a=e===o?.5:e,s=2*a-1,h=i.a-r.a,l=((s*h==-1?s:(s+h)/(1+s*h))+1)/2;o=1-l,i.r=255&l*i.r+o*r.r+.5,i.g=255&l*i.g+o*r.g+.5,i.b=255&l*i.b+o*r.b+.5,i.a=a*i.a+(1-a)*r.a,n.rgb=i}return n}clone(){return new It(this.rgb)}alpha(t){return this._rgb.a=ft(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=lt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Tt(this._rgb,2,t),this}darken(t){return Tt(this._rgb,2,-t),this}saturate(t){return Tt(this._rgb,1,t),this}desaturate(t){return Tt(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=xt(t);n[0]=Mt(n[0]+e),n=bt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function At(t){return new It(t)}const Lt=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function Rt(t){return Lt(t)?t:At(t)}function Nt(t){return Lt(t)?t:At(t).saturate(.5).darken(.1).hexString()}const Dt=Object.create(null),Ft=Object.create(null);function jt(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function zt(t,e,n){return"string"==typeof e?w(jt(t,e),n):w(jt(t,""),e)}var Bt=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Nt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Nt(e.borderColor),this.hoverColor=(t,e)=>Nt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return zt(this,t,e)}get(t){return jt(this,t)}describe(t,e){return zt(Ft,t,e)}override(t,e){return zt(Dt,t,e)}route(t,e,n,i){const r=jt(this,t),o=jt(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[i];return c(t)?Object.assign({},e,t):p(t,e)},set(t){this[a]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ut(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function Gt(t,e,n,i){let r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const s=n.length;let h,c,u,f,p;for(h=0;h<s;h++)if(f=n[h],null!=f&&!0!==l(f))a=Ut(t,r,o,a,f);else if(l(f))for(c=0,u=f.length;c<u;c++)p=f[c],null==p||l(p)||(a=Ut(t,r,o,a,p));t.restore();const d=o.length/2;if(d>n.length){for(h=0;h<d;h++)delete r[o[h]];o.splice(0,d)}return a}function Ht(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Wt(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Vt(t,e,n,i){let r,o,a,s,h;const l=e.pointStyle,c=e.rotation,u=e.radius;let f=(c||0)*R;if(l&&"object"==typeof l&&(r=l.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(f),t.drawImage(l,-l.width/2,-l.height/2,l.width,l.height),void t.restore();if(!(isNaN(u)||u<=0)){switch(t.beginPath(),l){default:t.arc(n,i,u,0,I),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(f)*u,i-Math.cos(f)*u),f+=F,t.lineTo(n+Math.sin(f)*u,i-Math.cos(f)*u),f+=F,t.lineTo(n+Math.sin(f)*u,i-Math.cos(f)*u),t.closePath();break;case"rectRounded":h=.516*u,s=u-h,o=Math.cos(f+D)*s,a=Math.sin(f+D)*s,t.arc(n-o,i-a,h,f-k,f-N),t.arc(n+a,i-o,h,f-N,f),t.arc(n+o,i+a,h,f,f+N),t.arc(n-a,i+o,h,f+N,f+k),t.closePath();break;case"rect":if(!c){s=Math.SQRT1_2*u,t.rect(n-s,i-s,2*s,2*s);break}f+=D;case"rectRot":o=Math.cos(f)*u,a=Math.sin(f)*u,t.moveTo(n-o,i-a),t.lineTo(n+a,i-o),t.lineTo(n+o,i+a),t.lineTo(n-a,i+o),t.closePath();break;case"crossRot":f+=D;case"cross":o=Math.cos(f)*u,a=Math.sin(f)*u,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"star":o=Math.cos(f)*u,a=Math.sin(f)*u,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o),f+=D,o=Math.cos(f)*u,a=Math.sin(f)*u,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"line":o=Math.cos(f)*u,a=Math.sin(f)*u,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(f)*u,i+Math.sin(f)*u)}t.fill(),e.borderWidth>0&&t.stroke()}}function qt(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Xt(t){t.restore()}function Kt(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Zt(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function $t(t,e,n,i,r,o={}){const a=l(e)?e:[e],s=o.strokeWidth>0&&""!==o.strokeColor;let c,u;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),h(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),c=0;c<a.length;++c)u=a[c],s&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),h(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(u,n,i,o.maxWidth)),t.fillText(u,n,i,o.maxWidth),Qt(t,n,i,u,o),i+=r.lineHeight;t.restore()}function Qt(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,h=n-o.actualBoundingBoxAscent,l=n+o.actualBoundingBoxDescent,c=r.strikethrough?(h+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,c),t.lineTo(s,c),t.stroke()}}function Jt(t,e){const{x:n,y:i,w:r,h:o,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,-N,k,!0),t.lineTo(n,i+o-a.bottomLeft),t.arc(n+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,k,N,!0),t.lineTo(n+r-a.bottomRight,i+o),t.arc(n+r-a.bottomRight,i+o-a.bottomRight,a.bottomRight,N,0,!0),t.lineTo(n+r,i+a.topRight),t.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-N,!0),t.lineTo(n+a.topLeft,i)}const te=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),ee=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ne(t,e){const n=(""+t).match(te);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function ie(t,e){const n={},i=c(e),r=i?Object.keys(e):e,o=c(t)?i?n=>p(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=+o(t)||0;return n}function re(t){return ie(t,{top:"y",right:"x",bottom:"y",left:"x"})}function oe(t){return ie(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ae(t){const e=re(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function se(t,e){t=t||{},e=e||Bt.font;let n=p(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=p(t.style,e.style);i&&!(""+i).match(ee)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:p(t.family,e.family),lineHeight:ne(p(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:p(t.weight,e.weight),string:""};return r.string=function(t){return!t||h(t.size)||h(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function he(t,e,n,i){let r,o,a,s=!0;for(r=0,o=t.length;r<o;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==n&&l(a)&&(a=a[n%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function le(t,e){return Object.assign(Object.create(t),e)}function ce(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const ue=(t,e,n)=>ce(t,n,(i=>t[i][e]<n)),fe=(t,e,n)=>ce(t,n,(i=>t[i][e]>=n)),pe=["push","pop","shift","splice","unshift"];function de(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(pe.forEach((e=>{delete t[e]})),delete t._chartjs)}function ge(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}function me(t,e=[""],n=t,i,r=(()=>t[0])){T(i)||(i=Te("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:r=>me([r,...t],e,n,i)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>we(n,i,(()=>function(t,e,n,i){let r;for(const o of e)if(r=Te(_e(o,t),n),T(r))return xe(t,r)?Se(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Oe(t).includes(e),ownKeys:t=>Oe(t),set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function ye(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ve(t,i),setContext:e=>ye(t,e,n,i),override:r=>ye(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>we(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=t;let s=i[e];return O(s)&&a.isScriptable(e)&&(s=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);return s.add(t),e=e(o,a||i),s.delete(t),xe(t,e)&&(e=Se(r._scopes,r,t,e)),e}(e,s,t,n)),l(s)&&s.length&&(s=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_descriptors:s}=n;if(T(o.index)&&i(t))e=e[o.index%e.length];else if(c(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const h of n){const n=Se(i,r,t,h);e.push(ye(n,o,a&&a[t],s))}}return e}(e,s,t,a.isIndexable)),xe(e,s)&&(s=ye(s,r,o&&o[e],a)),s}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function ve(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:O(n)?n:()=>n,isIndexable:O(i)?i:()=>i}}const _e=(t,e)=>t?t+E(e):e,xe=(t,e)=>c(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function we(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function be(t,e,n){return O(t)?t(e,n):t}const Me=(t,e)=>!0===t?e:"string"==typeof t?S(e,t):void 0;function Ce(t,e,n,i,r){for(const o of e){const e=Me(n,o);if(e){t.add(e);const o=be(e._fallback,n,r);if(T(o)&&o!==n&&o!==i)return o}else if(!1===e&&T(i)&&n!==i)return null}return!1}function Se(t,e,n,i){const r=e._rootScopes,o=be(e._fallback,n,i),a=[...t,...r],s=new Set;s.add(i);let h=Ee(s,a,n,o||n,i);return null!==h&&(!T(o)||o===n||(h=Ee(s,a,o,h,i),null!==h))&&me(Array.from(s),[""],r,o,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return l(r)&&c(n)?n:r}(e,n,i)))}function Ee(t,e,n,i,r){for(;n;)n=Ce(t,e,n,i,r);return n}function Te(t,e){for(const n of e){if(!n)continue;const e=n[t];if(T(e))return e}}function Oe(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const Pe=Number.EPSILON||1e-14,ke=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ie=t=>"x"===t?"y":"x";function Ae(t,e,n,i){const r=t.skip?e:t,o=e,a=n.skip?e:n,s=X(o,r),h=X(a,o);let l=s/(s+h),c=h/(s+h);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=i*l,f=i*c;return{previous:{x:o.x-u*(a.x-r.x),y:o.y-u*(a.y-r.y)},next:{x:o.x+f*(a.x-r.x),y:o.y+f*(a.y-r.y)}}}function Le(t,e,n){return Math.max(Math.min(t,n),e)}function Re(t,e,n,i,r){let o,a,s,h;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){const n=Ie(e),i=t.length,r=Array(i).fill(0),o=Array(i);let a,s,h,l=ke(t,0);for(a=0;a<i;++a)if(s=h,h=l,l=ke(t,a+1),h){if(l){const t=l[e]-h[e];r[a]=0!==t?(l[n]-h[n])/t:0}o[a]=s?l?z(r[a-1])!==z(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(t,e,n){const i=t.length;let r,o,a,s,h,l=ke(t,0);for(let c=0;c<i-1;++c)h=l,l=ke(t,c+1),h&&l&&(G(e[c],0,Pe)?n[c]=n[c+1]=0:(r=n[c]/e[c],o=n[c+1]/e[c],s=Math.pow(r,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[c]=r*a*e[c],n[c+1]=o*a*e[c])))}(t,r,o),function(t,e,n="x"){const i=Ie(n),r=t.length;let o,a,s,h=ke(t,0);for(let l=0;l<r;++l){if(a=s,s=h,h=ke(t,l+1),!s)continue;const r=s[n],c=s[i];a&&(o=(r-a[n])/3,s[`cp1${n}`]=r-o,s[`cp1${i}`]=c-o*e[l]),h&&(o=(h[n]-r)/3,s[`cp2${n}`]=r+o,s[`cp2${i}`]=c+o*e[l])}}(t,o,e)}(t,r);else{let n=i?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)s=t[o],h=Ae(n,s,t[Math.min(o+1,a-(i?0:1))%a],e.tension),s.cp1x=h.previous.x,s.cp1y=h.previous.y,s.cp2x=h.next.x,s.cp2y=h.next.y,n=s}e.capBezierPoints&&function(t,e){let n,i,r,o,a,s=qt(t[0],e);for(n=0,i=t.length;n<i;++n)a=o,o=s,s=n<i-1&&qt(t[n+1],e),o&&(r=t[n],a&&(r.cp1x=Le(r.cp1x,e.left,e.right),r.cp1y=Le(r.cp1y,e.top,e.bottom)),s&&(r.cp2x=Le(r.cp2x,e.left,e.right),r.cp2y=Le(r.cp2y,e.top,e.bottom)))}(t,n)}function Ne(){return"undefined"!=typeof window&&"undefined"!=typeof document}function De(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Fe(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const je=t=>window.getComputedStyle(t,null),ze=["top","right","bottom","left"];function Be(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=ze[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Ue(t,e){const{canvas:n,currentDevicePixelRatio:i}=e,r=je(n),o="border-box"===r.boxSizing,a=Be(r,"padding"),s=Be(r,"border","width"),{x:h,y:l,box:c}=function(t,e){const n=t.native||t,i=n.touches,r=i&&i.length?i[0]:n,{offsetX:o,offsetY:a}=r;let s,h,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(o,a,n.target))s=o,h=a;else{const t=e.getBoundingClientRect();s=r.clientX-t.left,h=r.clientY-t.top,l=!0}return{x:s,y:h,box:l}}(t,n),u=a.left+(c&&s.left),f=a.top+(c&&s.top);let{width:p,height:d}=e;return o&&(p-=a.width+s.width,d-=a.height+s.height),{x:Math.round((h-u)/p*n.width/i),y:Math.round((l-f)/d*n.height/i)}}const Ge=t=>Math.round(10*t)/10;function He(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=r/i,t.width=o/i;const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||a.height!==r||a.width!==o)&&(t.currentDevicePixelRatio=i,a.height=r,a.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0)}const We=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Ve(t,e){const n=function(t,e){return je(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function qe(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Ye(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Xe(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=qe(t,r,n),s=qe(r,o,n),h=qe(o,e,n),l=qe(a,s,n),c=qe(s,h,n);return qe(l,c,n)}const Ke=new Map;function Ze(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Ke.get(n);return i||(i=new Intl.NumberFormat(t,e),Ke.set(n,i)),i}(e,n).format(t)}function $e(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Qe(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Je(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function tn(t){return"angle"===t?{between:$,compare:K,normalize:Z}:{between:J,compare:(t,e)=>t-e,normalize:t=>t}}function en({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function nn(t,e,n){if(!n)return[t];const{property:i,start:r,end:o}=n,a=e.length,{compare:s,between:h,normalize:l}=tn(i),{start:c,end:u,loop:f,style:p}=function(t,e,n){const{property:i,start:r,end:o}=n,{between:a,normalize:s}=tn(i),h=e.length;let l,c,{start:u,end:f,loop:p}=t;if(p){for(u+=h,f+=h,l=0,c=h;l<c&&a(s(e[u%h][i]),r,o);++l)u--,f--;u%=h,f%=h}return f<u&&(f+=h),{start:u,end:f,loop:p,style:t.style}}(t,e,n),d=[];let g,m,y,v=!1,_=null;for(let t=c,n=c;t<=u;++t)m=e[t%a],m.skip||(g=l(m[i]),g!==y&&(v=h(g,r,o),null===_&&(v||h(r,y,g)&&0!==s(r,y))&&(_=0===s(g,r)?t:n),null!==_&&(!v||0===s(o,g)||h(o,y,g))&&(d.push(en({start:_,end:t,loop:f,count:a,style:p})),_=null),n=t,y=g));return null!==_&&d.push(en({start:_,end:u,loop:f,count:a,style:p})),d}function rn(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const o=nn(i[r],t.points,e);o.length&&n.push(...o)}return n}function on(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function an(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var sn=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=t.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,a=r.length-1,s=!1;for(;a>=0;--a)o=r[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(r[a]=r[r.length-1],r.pop());s&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const hn="transparent",ln={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Rt(t||hn),r=i.valid&&Rt(e||hn);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class cn{constructor(t,e,n,i){const r=e[n];i=he([t.to,i,r,t.from]);const o=he([t.from,r,i]);this._active=!0,this._fn=t.fn||ln[t.type||typeof o],this._easing=it[t.easing]||it.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=he([t.to,e,i,t.from]),this._from=he([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let s;if(this._active=r!==a&&(o||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(r,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}Bt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const un=Object.keys(Bt.animation);Bt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),Bt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Bt.describe("animations",{_fallback:"animation"}),Bt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class fn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!c(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const i=t[n];if(!c(i))return;const r={};for(const t of un)r[t]=i[t];(l(i.properties)&&i.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const h=o[s];if("$"===h.charAt(0))continue;if("options"===h){i.push(...this._animateOptions(t,e));continue}const l=e[h];let c=r[h];const u=n.get(h);if(c){if(u&&c.active()){c.update(u,l,a);continue}c.cancel()}u&&u.duration?(r[h]=c=new cn(u,t,h,l),i.push(c)):t[h]=l}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(sn.add(this._chart,n),!0):void 0}}function pn(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function dn(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function gn(t,e,n,i={}){const r=t.keys,o="single"===i.mode;let a,s,h,l;if(null!==e){for(a=0,s=r.length;a<s;++a){if(h=+r[a],h===n){if(i.all)continue;break}l=t.values[h],u(l)&&(o||0===e||z(e)===z(l))&&(e+=l)}return e}}function mn(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function yn(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function vn(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function _n(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=i,h=o.axis,l=a.axis,c=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,a,i),u=e.length;let f;for(let t=0;t<u;++t){const n=e[t],{[h]:o,[l]:u}=n;f=(n._stacks||(n._stacks={}))[l]=yn(r,c,o),f[s]=u,f._top=vn(f,a,!0,i.type),f._bottom=vn(f,a,!1,i.type)}}function xn(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function wn(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const bn=t=>"reset"===t||"none"===t,Mn=(t,e)=>e?t:Object.assign({},t);class Cn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=mn(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&wn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=p(n.xAxisID,xn(t,"x")),o=e.yAxisID=p(n.yAxisID,xn(t,"y")),a=e.rAxisID=p(n.rAxisID,xn(t,"r")),s=e.indexAxis,h=e.iAxisID=i(s,r,o,a),l=e.vAxisID=i(s,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&de(this._data,this),t._stacked&&wn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(c(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){de(n,this);const t=this._cachedMeta;wn(t),t._parsed=[]}e&&Object.isExtensible(e)&&function(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pe.forEach((e=>{const n="_onData"+E(e),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const r=i.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[n]&&t[n](...e)})),r}})})))}(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=mn(e.vScale,e),e.stack!==n.stack&&(i=!0,wn(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&_n(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let s,h,u,f=0===t&&e===i.length||n._sorted,p=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,u=i;else{u=l(i[t])?this.parseArrayData(n,i,t,e):c(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===h[a]||p&&h[a]<p[a];for(s=0;s<e;++s)n._parsed[s+t]=h=u[s],f&&(r()&&(f=!1),p=h);n._sorted=f}o&&_n(this,u)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,s=o.axis,h=r.getLabels(),l=r===o,c=new Array(i);let u,f,p;for(u=0,f=i;u<f;++u)p=u+n,c[u]={[a]:l||r.parse(h[p],p),[s]:o.parse(e[p],p)};return c}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let s,h,l,c;for(s=0,h=i;s<h;++s)l=s+n,c=e[l],a[s]={x:r.parse(c[0],l),y:o.parse(c[1],l)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,h=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+n,f=e[u],h[l]={x:r.parse(S(f,a),u),y:o.parse(S(f,s),u)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return gn({keys:dn(i,!0),values:e._stacks[t.axis]},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=gn(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),s=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:dn(n,!0),values:null})(e,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:c}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let f,p;function d(){p=i[f];const e=p[a.axis];return!u(p[t.axis])||l>e||c<e}for(f=0;f<o&&(d()||(this.updateRangeFromParsed(h,t,p,s),!r));++f);if(r)for(f=o-1;f>=0;--f)if(!d()){this.updateRangeFromParsed(h,t,p,s);break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],u(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return c(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(p(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=pn(t,n),r=pn(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||i.length-a,h=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(t,r,a,s),l=a;l<a+s;++l){const e=i[l];e.hidden||(e.active&&h?o.push(e):e.draw(t,r))}for(l=0;l<o.length;++l)o[l].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return le(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return le(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,a=r[o],s=this.enableOptionSharing&&T(n);if(a)return Mn(a,s);const h=this.chart.config,l=h.datasetElementScopeKeys(this._type,t),c=i?[`${t}Hover`,"hover",t,""]:[t,""],u=h.getOptionScopes(this.getDataset(),l),f=Object.keys(Bt.elements[t]),p=h.resolveNamedOptions(u,f,(()=>this.getContext(n,i)),c);return p.$shared&&(p.$shared=s,r[o]=Object.freeze(Mn(p,s))),p}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);s=i.createResolver(o,this.getContext(t,n,e))}const h=new fn(i,s&&s.animations);return s&&s._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||bn(t)||this.chart._animationsDisabled}updateElement(t,e,n,i){bn(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!bn(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&wn(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Sn(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=ge(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,a,s=e._length;const h=()=>{32767!==o&&-32768!==o&&(T(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),h();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),h();return s}function En(t,e,n,i){return l(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),a=Math.min(r,o),s=Math.max(r,o);let h=a,l=s;Math.abs(a)>Math.abs(s)&&(h=s,l=a),e[n.axis]=l,e._custom={barStart:h,barEnd:l,start:r,end:o,min:a,max:s}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Tn(t,e,n,i){const r=t.iScale,o=t.vScale,a=r.getLabels(),s=r===o,h=[];let l,c,u,f;for(l=n,c=n+i;l<c;++l)f=e[l],u={},u[r.axis]=s||r.parse(a[l],l),h.push(En(f,u,o,l));return h}function On(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Pn(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);const{start:a,end:s,reverse:h,top:l,bottom:c}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=l:(n._bottom||0)===i?r=c:(o[kn(c,a,s,h)]=!0,r=l)),o[kn(r,a,s,h)]=!0,t.borderSkipped=o}function kn(t,e,n,i){var r,o,a;return i?(a=n,t=In(t=(r=t)===(o=e)?a:r===a?o:r,n,e)):t=In(t,e,n),t}function In(t,e,n){return"start"===t?e:"end"===t?n:t}function An(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}Cn.defaults={},Cn.prototype.datasetElementType=null,Cn.prototype.dataElementType=null;class Ln extends Cn{parsePrimitiveData(t,e,n,i){return Tn(t,e,n,i)}parseArrayData(t,e,n,i){return Tn(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,h="x"===r.axis?a:s,l="x"===o.axis?a:s,c=[];let u,f,p,d;for(u=n,f=n+i;u<f;++u)d=e[u],p={},p[r.axis]=r.parse(S(d,h),u),c.push(En(S(d,l),p,o,u));return c}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=On(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),u=this.resolveDataElementOptions(e,i),f=this.getSharedOptions(u),p=this.includeOptions(i,f);this.updateSharedOptions(f,i,u);for(let u=e;u<e+n;u++){const e=this.getParsed(u),n=r||h(e[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(u),d=this._calculateBarIndexPixels(u,c),g=(e._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!g||On(e._custom)||o===g._top||o===g._bottom,x:l?n.head:d.center,y:l?d.center:n.head,height:l?d.size:Math.abs(n.size),width:l?Math.abs(n.size):d.size};p&&(m.options=f||this.resolveDataElementOptions(u,t[u].active?"active":i));const y=m.options||t[u].options;Pn(m,y,g,o),An(m,y,c.ratio),this.updateElement(t[u],u,m,i)}}_getStacks(t,e){const n=this._cachedMeta.iScale,i=n.getMatchingVisibleMetas(this._type),r=n.options.stacked,o=i.length,a=[];let s,l;for(s=0;s<o;++s)if(l=i[s],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(h(t)||isNaN(t))continue}if((!1===r||-1===a.indexOf(l.stack)||void 0===r&&void 0===l.stack)&&a.push(l.stack),l.index===t)break}return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||Sn(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:i,minBarLength:r}}=this,o=i||0,a=this.getParsed(t),s=a._custom,l=On(s);let c,u,f=a[e.axis],p=0,d=n?this.applyStack(e,a,n):f;d!==f&&(p=d-f,d=f),l&&(f=s.barStart,d=s.barEnd-s.barStart,0!==f&&z(f)!==z(s.barEnd)&&(p=0),p+=f);const g=h(i)||l?p:i;let m=e.getPixelForValue(g);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(p+d):m,u=c-m,Math.abs(u)<r&&(u=function(t,e,n){return 0!==t?z(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(u,e,o)*r,f===o&&(m-=u/2),c=m+u),m===e.getPixelForValue(o)){const t=z(u)*e.getLineWidthForValue(o)/2;m+=t,u-=t}return{size:u,base:m,head:c,center:c+u/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=p(i.maxBarThickness,1/0);let a,s;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let a=t>0?r[t-1]:null,s=t<r.length-1?r[t+1]:null;const h=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const l=o-(o-Math.min(a,s))/2*h;return{chunk:Math.abs(s-a)/2*h/i,ratio:n.barPercentage,start:l}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let o,a;return h(r)?(o=e.min*n.categoryPercentage,a=n.barPercentage):(o=r*i,a=1),{chunk:o/i,ratio:a,start:e.pixels[t]-o/2}}(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=l.start+l.chunk*c+l.chunk/2,s=Math.min(o,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),s=Math.min(o,e.min*e.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}}Ln.id="bar",Ln.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Ln.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Rn extends Cn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=p(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=p(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,r=this.getParsed(t),o=n.getLabelForValue(r.x),a=i.getLabelForValue(r.y),s=r._custom;return{label:e.label,value:"("+o+", "+a+(s?", "+s:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a}=this._cachedMeta,s=this.resolveDataElementOptions(e,i),h=this.getSharedOptions(s),l=this.includeOptions(i,h),c=o.axis,u=a.axis;for(let s=e;s<e+n;s++){const e=t[s],n=!r&&this.getParsed(s),h={},f=h[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),p=h[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=this.resolveDataElementOptions(s,e.active?"active":i),r&&(h.options.radius=0)),this.updateElement(e,s,h,i)}this.updateSharedOptions(h,i,s)}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=p(n&&n._custom,r),i}}Rn.id="bubble",Rn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Rn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Nn extends Cn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,a=t=>+n[t];if(c(n[t])){const{key:t="value"}=this._parsing;a=e=>+S(n[e],t)}for(r=t,o=t+e;r<o;++r)i._parsed[r]=a(r)}}_getRotation(){return W(this.options.rotation-90)}_getCircumference(){return W(this.options.circumference)}_getRotationExtents(){let t=I,e=-I;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min(((t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e)(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:l,rotation:c}=this._getRotationExtents(),{ratioX:u,ratioY:f,offsetX:p,offsetY:g}=function(t,e,n){let i=1,r=1,o=0,a=0;if(e<I){const s=t,h=s+e,l=Math.cos(s),c=Math.sin(s),u=Math.cos(h),f=Math.sin(h),p=(t,e,i)=>$(t,s,h,!0)?1:Math.max(e,e*n,i,i*n),d=(t,e,i)=>$(t,s,h,!0)?-1:Math.min(e,e*n,i,i*n),g=p(0,l,u),m=p(N,c,f),y=d(k,l,u),v=d(k+N,c,f);i=(g-y)/2,r=(m-v)/2,o=-(g+y)/2,a=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:a}}(c,l,s),m=(n.width-o)/u,y=(n.height-o)/f,v=Math.max(Math.min(m,y)/2,0),_=d(this.options.radius,v),x=(_-Math.max(_*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*_,this.offsetY=g*_,i.total=this.calculateTotal(),this.outerRadius=_-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/I)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.chartArea,s=o.options.animation,h=(a.left+a.right)/2,l=(a.top+a.bottom)/2,c=r&&s.animateScale,u=c?0:this.innerRadius,f=c?0:this.outerRadius,p=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(p),g=this.includeOptions(i,d);let m,y=this._getRotation();for(m=0;m<e;++m)y+=this._circumference(m,r);for(m=e;m<e+n;++m){const e=this._circumference(m,r),n=t[m],o={x:h+this.offsetX,y:l+this.offsetY,startAngle:y,endAngle:y+e,circumference:e,outerRadius:f,innerRadius:u};g&&(o.options=d||this.resolveDataElementOptions(m,n.active?"active":i)),y+=e,this.updateElement(n,m,o,i)}this.updateSharedOptions(d,i,p)}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?I*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ze(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,s;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(p(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Nn.id="doughnut",Nn.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Nn.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},Nn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return l(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class Dn extends Cn{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=function(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:a,_parsed:s}=t,h=a.axis,{min:l,max:c,minDefined:u,maxDefined:f}=a.getUserBounds();u&&(r=Q(Math.min(ue(s,a.axis,l).lo,n?i:ue(e,h,a.getPixelForValue(l)).lo),0,i-1)),o=f?Q(Math.max(ue(s,a.axis,c).hi+1,n?0:ue(e,h,a.getPixelForValue(c)).hi+1),r,i)-r:i-r}return{start:r,count:o}}(e,i,o);this._drawStart=a,this._drawCount=s,function(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}(e)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},t),this.updateElements(i,a,s,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),f=this.includeOptions(i,u),p=o.axis,d=a.axis,{spanGaps:g,segment:m}=this.options,y=U(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let _=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),g=v?e:{},x=h(n[d]),w=g[p]=o.getPixelForValue(n[p],c),b=g[d]=r||x?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[d],c);g.skip=isNaN(w)||isNaN(b)||x,g.stop=c>0&&n[p]-_[p]>y,m&&(g.parsed=n,g.raw=l.data[c]),f&&(g.options=u||this.resolveDataElementOptions(c,e.active?"active":i)),v||this.updateElement(e,c,g,i),_=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Dn.id="line",Dn.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Dn.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Fn extends Cn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ze(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=this.getDataset(),s=o.options.animation,h=this._cachedMeta.rScale,l=h.xCenter,c=h.yCenter,u=h.getIndexAngle(0)-.5*k;let f,p=u;const d=360/this.countVisibleElements();for(f=0;f<e;++f)p+=this._computeAngle(f,i,d);for(f=e;f<e+n;f++){const e=t[f];let n=p,g=p+this._computeAngle(f,i,d),m=o.getDataVisibility(f)?h.getDistanceFromCenterForValue(a.data[f]):0;p=g,r&&(s.animateScale&&(m=0),s.animateRotate&&(n=g=u));const y={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(f,e.active?"active":i)};this.updateElement(e,f,y,i)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let n=0;return e.data.forEach(((e,i)=>{!isNaN(t.data[i])&&this.chart.getDataVisibility(i)&&n++})),n}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?W(this.resolveDataElementOptions(t,e).angle||n):0}}Fn.id="polarArea",Fn.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Fn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class jn extends Nn{}jn.id="pie",jn.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class zn extends Cn{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this.getDataset(),o=this._cachedMeta.rScale,a="reset"===i;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":i),h=o.getPointPositionForValue(s,r.data[s]),l=a?o.xCenter:h.x,c=a?o.yCenter:h.y,u={x:l,y:c,angle:h.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,s,u,i)}}}zn.id="radar",zn.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},zn.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Bn extends Dn{}function Un(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Bn.id="scatter",Bn.defaults={showLine:!1,fill:!1},Bn.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};class Gn{constructor(t){this.options=t||{}}formats(){return Un()}parse(t,e){return Un()}format(t,e){return Un()}add(t,e,n){return Un()}diff(t,e,n){return Un()}startOf(t,e,n){return Un()}endOf(t,e){return Un()}}Gn.override=function(t){Object.assign(Gn.prototype,t)};var Hn={_date:Gn};function Wn(t,e){return"native"in t?{x:t.x,y:t.y}:Ue(t,e)}function Vn(t,e,n,i){const{controller:r,data:o,_sorted:a}=t,s=r._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const t=s._reversePixels?fe:ue;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),a=t(o,e,n+r);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function qn(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:s}=o[t],{lo:h,hi:l}=Vn(o[t],e,a,r);for(let t=h;t<=l;++t){const e=s[t];e.skip||i(e,n,t)}}}function Yn(t,e,n,i){const r=[];return qt(e,t.chartArea,t._minPadding)?(qn(t,n,e,(function(t,n,o){t.inRange(e.x,e.y,i)&&r.push({element:t,datasetIndex:n,index:o})}),!0),r):r}function Xn(t,e,n,i,r){return qt(e,t.chartArea,t._minPadding)?"r"!==n||i?function(t,e,n,i,r){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let s=Number.POSITIVE_INFINITY;return qn(t,n,e,(function(n,h,l){const c=n.inRange(e.x,e.y,r);if(i&&!c)return;const u=n.getCenterPoint(r);if(!qt(u,t.chartArea,t._minPadding)&&!c)return;const f=a(e,u);f<s?(o=[{element:n,datasetIndex:h,index:l}],s=f):f===s&&o.push({element:n,datasetIndex:h,index:l})})),o}(t,e,n,i,r):function(t,e,n,i){let r=[];return qn(t,n,e,(function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],i),{angle:h}=Y(t,{x:e.x,y:e.y});$(h,a,s)&&r.push({element:t,datasetIndex:n,index:o})})),r}(t,e,n,r):[]}function Kn(t,e,n,i){const r=Wn(e,t),o=[],a=n.axis,s="x"===a?"inXRange":"inYRange";let h=!1;return function(t,e){const n=t.getSortedVisibleDatasetMetas();let i,r,o;for(let t=0,a=n.length;t<a;++t){({index:i,data:r}=n[t]);for(let t=0,n=r.length;t<n;++t)o=r[t],o.skip||e(o,i,t)}}(t,((t,e,n)=>{t[s](r[a],i)&&o.push({element:t,datasetIndex:e,index:n}),t.inRange(r.x,r.y,i)&&(h=!0)})),n.intersect&&!h?[]:o}var Zn={modes:{index(t,e,n,i){const r=Wn(e,t),o=n.axis||"x",a=n.intersect?Yn(t,r,o,i):Xn(t,r,o,!1,i),s=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&s.push({element:n,datasetIndex:t.index,index:e})})),s):[]},dataset(t,e,n,i){const r=Wn(e,t),o=n.axis||"xy";let a=n.intersect?Yn(t,r,o,i):Xn(t,r,o,!1,i);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>Yn(t,Wn(e,t),n.axis||"xy",i),nearest:(t,e,n,i)=>Xn(t,Wn(e,t),n.axis||"xy",n.intersect,i),x:(t,e,n,i)=>Kn(t,e,{axis:"x",intersect:n.intersect},i),y:(t,e,n,i)=>Kn(t,e,{axis:"y",intersect:n.intersect},i)}};const $n=["left","top","right","bottom"];function Qn(t,e){return t.filter((t=>t.pos===e))}function Jn(t,e){return t.filter((t=>-1===$n.indexOf(t.pos)&&t.box.axis===e))}function ti(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function ei(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ni(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ii(t,e,n,i){const{pos:r,box:o}=n,a=t.maxPadding;if(!c(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[r]+=n.size}o.getPadding&&ni(a,o.getPadding());const s=Math.max(0,e.outerWidth-ei(a,t,"left","right")),h=Math.max(0,e.outerHeight-ei(a,t,"top","bottom")),l=s!==t.w,u=h!==t.h;return t.w=s,t.h=h,n.horizontal?{same:l,other:u}:{same:u,other:l}}function ri(t,e){const n=e.maxPadding;return function(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}(t?["left","right"]:["top","bottom"])}function oi(t,e,n,i){const r=[];let o,a,s,h,l,c;for(o=0,a=t.length,l=0;o<a;++o){s=t[o],h=s.box,h.update(s.width||e.w,s.height||e.h,ri(s.horizontal,e));const{same:a,other:u}=ii(e,n,s,i);l|=a&&r.length,c=c||u,h.fullSize||r.push(s)}return l&&oi(r,e,n,i)||c}function ai(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function si(t,e,n,i){const r=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,h=i[s.stack]||{count:1,placed:0,weight:1},l=s.stackWeight/h.weight||1;if(s.horizontal){const i=e.w*l,o=h.size||t.height;T(h.start)&&(a=h.start),t.fullSize?ai(t,r.left,a,n.outerWidth-r.right-r.left,o):ai(t,e.left+h.placed,a,i,o),h.start=a,h.placed+=i,a=t.bottom}else{const i=e.h*l,a=h.size||t.width;T(h.start)&&(o=h.start),t.fullSize?ai(t,o,r.top,a,n.outerHeight-r.bottom-r.top):ai(t,o,e.top+h.placed,a,i),h.start=o,h.placed+=i,o=t.right}}e.x=o,e.y=a}Bt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var hi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=ae(t.options.layout.padding),o=Math.max(e-r.width,0),a=Math.max(n-r.height,0),s=function(t){const e=function(t){const e=[];let n,i,r,o,a,s;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=ti(e.filter((t=>t.box.fullSize)),!0),i=ti(Qn(e,"left"),!0),r=ti(Qn(e,"right")),o=ti(Qn(e,"top"),!0),a=ti(Qn(e,"bottom")),s=Jn(e,"x"),h=Jn(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(h).concat(a).concat(s),chartArea:Qn(e,"chartArea"),vertical:i.concat(r).concat(h),horizontal:o.concat(a).concat(s)}}(t.boxes),h=s.vertical,l=s.horizontal;m(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=h.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),f=Object.assign({},r);ni(f,ae(i));const p=Object.assign({maxPadding:f,w:o,h:a,x:r.left,y:r.top},r),d=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!$n.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,h=n[s.stack],l=h&&s.stackWeight/h.weight;s.horizontal?(s.width=l?l*i:a&&e.availableWidth,s.height=r):(s.width=i,s.height=l?l*r:a&&e.availableHeight)}return n}(h.concat(l),u);oi(s.fullSize,p,u,d),oi(h,p,u,d),oi(l,p,u,d)&&oi(h,p,u,d),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(p),si(s.leftAndTop,p,u,d),p.x+=p.w,p.y+=p.h,si(s.rightAndBottom,p,u,d),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},m(s.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class li{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class ci extends li{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ui={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fi=t=>null===t||""===t,pi=!!We&&{passive:!0};function di(t,e,n){t.canvas.removeEventListener(e,n,pi)}function gi(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function mi(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||gi(n.addedNodes,i),e=e&&!gi(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function yi(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||gi(n.removedNodes,i),e=e&&!gi(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const vi=new Map;let _i=0;function xi(){const t=window.devicePixelRatio;t!==_i&&(_i=t,vi.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function wi(t,n,i){const r=t.canvas,o=r&&De(r);if(!o)return;const a=e(((t,e)=>{const n=o.clientWidth;i(t,e),n<o.clientWidth&&i()}),window),s=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||a(n,i)}));return s.observe(o),function(t,e){vi.size||window.addEventListener("resize",xi),vi.set(t,e)}(t,a),s}function bi(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){vi.delete(t),vi.size||window.removeEventListener("resize",xi)}(t)}function Mi(t,n,i){const r=t.canvas,o=e((e=>{null!==t.ctx&&i(function(t,e){const n=ui[t.type]||t.type,{x:i,y:r}=Ue(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,pi)}(r,n,o),o}class Ci extends li{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",fi(r)){const e=Ve(t,"width");void 0!==e&&(t.width=e)}if(fi(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Ve(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach((t=>{const i=n[t];h(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:mi,detach:yi,resize:wi}[e]||Mi;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];i&&(({attach:bi,detach:bi,resize:bi}[e]||di)(t,e,i),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return function(t,e,n,i){const r=je(t),o=Be(r,"margin"),a=Fe(r.maxWidth,t,"clientWidth")||L,s=Fe(r.maxHeight,t,"clientHeight")||L,h=function(t,e,n){let i,r;if(void 0===e||void 0===n){const o=De(t);if(o){const t=o.getBoundingClientRect(),a=je(o),s=Be(a,"border","width"),h=Be(a,"padding");e=t.width-h.width-s.width,n=t.height-h.height-s.height,i=Fe(a.maxWidth,o,"clientWidth"),r=Fe(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||L,maxHeight:r||L}}(t,e,n);let{width:l,height:c}=h;if("content-box"===r.boxSizing){const t=Be(r,"border","width"),e=Be(r,"padding");l-=e.width+t.width,c-=e.height+t.height}return l=Math.max(0,l-o.width),c=Math.max(0,i?Math.floor(l/i):c-o.height),l=Ge(Math.min(l,a,h.maxWidth)),c=Ge(Math.min(c,s,h.maxHeight)),l&&!c&&(c=Ge(l/2)),{width:l,height:c}}(t,e,n,i)}isAttached(t){const e=De(t);return!(!e||!e.isConnected)}}class Si{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return U(this.x)&&U(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}Si.defaults={},Si.defaultRoutes=void 0;const Ei={values:t=>l(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const a=j(Math.abs(o)),s=Math.max(Math.min(-1*Math.floor(a),20),0),h={notation:r,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(h,this.options.ticks.format),Ze(t,i,h)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(j(t)));return 1===i||2===i||5===i?Ei.numeric.call(this,t,e,n):""}};var Ti={formatters:Ei};function Oi(t,e,n,i,r){const o=p(i,0),a=Math.min(p(r,t.length),t.length);let s,h,l,c=0;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),l=o;l<0;)c++,l=Math.round(o+c*n);for(h=Math.max(o,0);h<a;h++)h===l&&(e.push(t[h]),c++,l=Math.round(o+c*n))}Bt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ti.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Bt.route("scale.ticks","color","","color"),Bt.route("scale.grid","color","","borderColor"),Bt.route("scale.grid","borderColor","","borderColor"),Bt.route("scale.title","color","","color"),Bt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),Bt.describe("scales",{_fallback:"scale"}),Bt.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Pi=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function ki(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function Ii(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,a=t._endPixel,s=1e-6;let h,l=t.getPixelForTick(r);if(!(n&&(h=1===i?Math.max(l-o,a-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(r-1))/2,l+=r<e?h:-h,l<o-s||l>a+s)))return l}function Ai(t){return t.drawTicks?t.tickLength:0}function Li(t,e){if(!t.display)return 0;const n=se(t.font,e),i=ae(t.padding);return(l(t.text)?t.text.length:1)*n.lineHeight+i.height}function Ri(t,e,i){let r=n(t);return(i&&"right"!==e||!i&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class Ni extends Si{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=f(t,Number.POSITIVE_INFINITY),e=f(e,Number.NEGATIVE_INFINITY),n=f(n,Number.POSITIVE_INFINITY),i=f(i,Number.NEGATIVE_INFINITY),{min:f(t,n),max:f(e,i),minDefined:u(t),maxDefined:u(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let s=0,h=a.length;s<h;++s)e=a[s].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:f(n,f(i,n)),max:f(i,f(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){g(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,o=d(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(o)),max:a(r,o)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?ki(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=r.length,a=r[0],s=r[o-1],l=[];if(o>i)return function(t,e,n,i){let r,o=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),o++,a=n[o*i])}(e,l,r,o/i),l;const c=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>r)return e}return Math.max(r,1)}(r,e,i);if(o>0){let t,n;const i=o>1?Math.round((s-a)/(o-1)):null;for(Oi(e,l,c,h(i)?0:a-i,a),t=0,n=o-1;t<n;t++)Oi(e,l,c,r[t],r[t+1]);return Oi(e,l,c,s,h(i)?e.length:s+i),l}return Oi(e,l,c),l}(this,this.ticks),this._labelSizes=null),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){g(this.options.afterUpdate,[this])}beforeSetDimensions(){g(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){g(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),g(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){g(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=g(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){g(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){g(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,i=e.minRotation||0,r=e.maxRotation;let o,a,s,h=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const l=this._getLabelSizes(),c=l.widest.width,u=l.highest.height,f=Q(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/n:f/(n-1),c+6>o&&(o=f/(n-(t.offset?.5:1)),a=this.maxHeight-Ai(t.grid)-e.padding-Li(t.title,this.chart.options.font),s=Math.sqrt(c*c+u*u),h=V(Math.min(Math.asin(Q((l.highest.height+6)/o,-1,1)),Math.asin(Q(a/s,-1,1))-Math.asin(Q(u/s,-1,1)))),h=Math.max(i,Math.min(r,h))),this.labelRotation=h}afterCalculateLabelRotation(){g(this.options.afterCalculateLabelRotation,[this])}beforeFit(){g(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=Li(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Ai(r)+o):(t.height=this.maxHeight,t.width=Ai(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),s=2*n.padding,h=W(this.labelRotation),l=Math.cos(h),c=Math.sin(h);if(a){const e=n.mirror?0:c*r.width+l*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:l*r.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,i,c,l)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,s=0!==this.labelRotation,h="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,u=0;s?h?(c=i*t.width,u=n*e.height):(c=n*t.height,u=i*e.width):"start"===r?u=e.width:"end"===r?c=t.width:(c=t.width/2,u=e.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-l+o)*this.width/(this.width-l),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){g(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)h(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ki(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:i}=this,r=[],o=[];let a,s,c,u,f,p,d,g,y,v,_,x=0,w=0;for(a=0;a<e;++a){if(u=t[a].label,f=this._resolveTickFontOptions(a),n.font=p=f.string,d=i[p]=i[p]||{data:{},gc:[]},g=f.lineHeight,y=v=0,h(u)||l(u)){if(l(u))for(s=0,c=u.length;s<c;++s)_=u[s],h(_)||l(_)||(y=Ut(n,d.data,d.gc,y,_),v+=g)}else y=Ut(n,d.data,d.gc,y,u),v=g;r.push(y),o.push(v),x=Math.max(y,x),w=Math.max(v,w)}!function(t,e){m(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(i,e);const b=r.indexOf(x),M=o.indexOf(w),C=t=>({width:r[t]||0,height:o[t]||0});return{first:C(0),last:C(e-1),widest:C(b),highest:C(M),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function(t){return Q(t,-32768,32767)}(this._alignToPixels?Ht(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return le(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=le(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=W(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,s=r?r.highest.height+o:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o}=i,a=r.offset,s=this.isHorizontal(),h=this.ticks.length+(a?1:0),l=Ai(r),u=[],f=r.setContext(this.getContext()),d=f.drawBorder?f.borderWidth:0,g=d/2,m=function(t){return Ht(n,t,d)};let y,v,_,x,w,b,M,C,S,E,T,O;if("top"===o)y=m(this.bottom),b=this.bottom-l,C=y-g,E=m(t.top)+g,O=t.bottom;else if("bottom"===o)y=m(this.top),E=t.top,O=m(t.bottom)-g,b=y+g,C=this.top+l;else if("left"===o)y=m(this.right),w=this.right-l,M=y-g,S=m(t.left)+g,T=t.right;else if("right"===o)y=m(this.left),S=t.left,T=m(t.right)-g,w=y+g,M=this.left+l;else if("x"===e){if("center"===o)y=m((t.top+t.bottom)/2+.5);else if(c(o)){const t=Object.keys(o)[0],e=o[t];y=m(this.chart.scales[t].getPixelForValue(e))}E=t.top,O=t.bottom,b=y+g,C=b+l}else if("y"===e){if("center"===o)y=m((t.left+t.right)/2);else if(c(o)){const t=Object.keys(o)[0],e=o[t];y=m(this.chart.scales[t].getPixelForValue(e))}w=y-g,M=w-l,S=t.left,T=t.right}const P=p(i.ticks.maxTicksLimit,h),k=Math.max(1,Math.ceil(h/P));for(v=0;v<h;v+=k){const t=r.setContext(this.getContext(v)),e=t.lineWidth,i=t.color,o=r.borderDash||[],h=t.borderDashOffset,l=t.tickWidth,c=t.tickColor,f=t.tickBorderDash||[],p=t.tickBorderDashOffset;_=Ii(this,v,a),void 0!==_&&(x=Ht(n,_,e),s?w=M=S=T=x:b=C=E=O=x,u.push({tx1:w,ty1:b,tx2:M,ty2:C,x1:S,y1:E,x2:T,y2:O,width:e,color:i,borderDash:o,borderDashOffset:h,tickWidth:l,tickColor:c,tickBorderDash:f,tickBorderDashOffset:p}))}return this._ticksLength=h,this._borderValue=y,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:h,padding:u,mirror:f}=r,p=Ai(n.grid),d=p+u,g=f?-u:d,m=-W(this.labelRotation),y=[];let v,_,x,w,b,M,C,S,E,T,O,P,k="middle";if("top"===i)M=this.bottom-g,C=this._getXAxisLabelAlignment();else if("bottom"===i)M=this.top+g,C=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(p);C=t.textAlign,b=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(p);C=t.textAlign,b=t.x}else if("x"===e){if("center"===i)M=(t.top+t.bottom)/2+d;else if(c(i)){const t=Object.keys(i)[0],e=i[t];M=this.chart.scales[t].getPixelForValue(e)+d}C=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)b=(t.left+t.right)/2-d;else if(c(i)){const t=Object.keys(i)[0],e=i[t];b=this.chart.scales[t].getPixelForValue(e)}C=this._getYAxisLabelAlignment(p).textAlign}"y"===e&&("start"===s?k="top":"end"===s&&(k="bottom"));const I=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){x=a[v],w=x.label;const t=r.setContext(this.getContext(v));S=this.getPixelForTick(v)+r.labelOffset,E=this._resolveTickFontOptions(v),T=E.lineHeight,O=l(w)?w.length:1;const e=O/2,n=t.color,s=t.textStrokeColor,c=t.textStrokeWidth;let u;if(o?(b=S,P="top"===i?"near"===h||0!==m?-O*T+T/2:"center"===h?-I.highest.height/2-e*T+T:-I.highest.height+T/2:"near"===h||0!==m?T/2:"center"===h?I.highest.height/2-e*T:I.highest.height-O*T,f&&(P*=-1)):(M=S,P=(1-O)*T/2),t.showLabelBackdrop){const e=ae(t.backdropPadding),n=I.heights[v],i=I.widths[v];let r=M+P-e.top,o=b-e.left;switch(k){case"middle":r-=n/2;break;case"bottom":r-=n}switch(C){case"center":o-=i/2;break;case"right":o-=i}u={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}y.push({rotation:m,label:w,font:E,color:n,strokeColor:s,strokeWidth:c,textOffset:P,textAlign:C,textBaseline:k,translation:[b,M],backdrop:u})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-W(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align&&(n="right"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,a=this._getLabelSizes().widest.width;let s,h;return"left"===e?i?(h=this.right+r,"near"===n?s="left":"center"===n?(s="center",h+=a/2):(s="right",h+=a)):(h=this.right-o,"near"===n?s="right":"center"===n?(s="center",h-=a/2):(s="left",h=this.left)):"right"===e?i?(h=this.left+r,"near"===n?s="right":"center"===n?(s="center",h-=a/2):(s="left",h-=a)):(h=this.left+o,"near"===n?s="left":"center"===n?(s="center",h+=a/2):(s="right",h=this.right)):s="right",{textAlign:s,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,i=n.setContext(this.getContext()),r=n.drawBorder?i.borderWidth:0;if(!r)return;const o=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let s,h,l,c;this.isHorizontal()?(s=Ht(t,this.left,r)-r/2,h=Ht(t,this.right,o)+o/2,l=c=a):(l=Ht(t,this.top,r)-r/2,c=Ht(t,this.bottom,o)+o/2,s=h=a),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(s,l),e.lineTo(h,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Yt(e,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(t));let r,o;for(r=0,o=i.length;r<o;++r){const t=i[r],n=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),$t(e,o,0,t.textOffset,n,t)}n&&Xt(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const o=se(n.font),a=ae(n.padding),s=n.align;let h=o.lineHeight/2;"bottom"===e||"center"===e||c(e)?(h+=a.bottom,l(n.text)&&(h+=o.lineHeight*(n.text.length-1))):h+=a.top;const{titleX:u,titleY:f,maxWidth:p,rotation:d}=function(t,e,n,r){const{top:o,left:a,bottom:s,right:h,chart:l}=t,{chartArea:u,scales:f}=l;let p,d,g,m=0;const y=s-o,v=h-a;if(t.isHorizontal()){if(d=i(r,a,h),c(n)){const t=Object.keys(n)[0],i=n[t];g=f[t].getPixelForValue(i)+y-e}else g="center"===n?(u.bottom+u.top)/2+y-e:Pi(t,n,e);p=h-a}else{if(c(n)){const t=Object.keys(n)[0],i=n[t];d=f[t].getPixelForValue(i)-v+e}else d="center"===n?(u.left+u.right)/2-v+e:Pi(t,n,e);g=i(r,s,o),m="left"===n?-N:N}return{titleX:d,titleY:g,maxWidth:p,rotation:m}}(this,h,e,s);$t(t,n.text,0,0,o,{color:n.color,maxWidth:p,rotation:d,textAlign:Ri(s,e,r),textBaseline:"middle",translation:[u,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=p(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Ni.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return se(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Di{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=w(Object.create(null),[n?Bt.get(n):{},Bt.get(e),t.defaults]);Bt.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),a=e[n].split("."),s=a.pop(),h=a.join(".");Bt.route(o,r,h,s)}))}(e,t.defaultRoutes),t.descriptors&&Bt.describe(e,t.descriptors)}(t,o,n),this.override&&Bt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in Bt[i]&&(delete Bt[i][n],this.override&&delete Dt[n])}}var Fi=new class{constructor(){this.controllers=new Di(Cn,"datasets",!0),this.elements=new Di(Si,"elements"),this.plugins=new Di(Object,"plugins"),this.scales=new Di(Ni,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):m(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=E(t);g(n["before"+i],[],n),e[t](n),g(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class ji{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===g(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){h(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=p(n.options&&n.options.plugins,{}),r=function(t){const e=[],n=Object.keys(Fi.plugins.items);for(let t=0;t<n.length;t++)e.push(Fi.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===e.indexOf(n)&&e.push(n)}return e}(n);return!1!==i||e?function(t,e,n,i){const r=[],o=t.getContext();for(let a=0;a<e.length;a++){const s=e[a],h=zi(n[s.id],i);null!==h&&r.push({plugin:s,options:Bi(t.config,s,h,o)})}return r}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function zi(t,e){return e||!1!==t?!0===t?{}:t:null}function Bi(t,e,n,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(n,r);return t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ui(t,e){const n=Bt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Gi(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function Hi(t){const e=t.options||(t.options={});e.plugins=p(e.plugins,{}),e.scales=function(t,e){const n=Dt[t.type]||{scales:{}},i=e.scales||{},r=Ui(t.type,e),o=Object.create(null),a=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!c(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const s=Gi(t,e),h=function(t,e){return t===e?"_index_":"_value_"}(s,r),l=n.scales||{};o[s]=o[s]||t,a[t]=b(Object.create(null),[{axis:s},e,l[s],l[h]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,s=n.indexAxis||Ui(r,e),h=(Dt[r]||{}).scales||{};Object.keys(h).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,s),r=n[e+"AxisID"]||o[e]||e;a[r]=a[r]||Object.create(null),b(a[r],[{axis:e},i[r],h[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];b(e,[Bt.scales[e.type],Bt.scale])})),a}(t,e)}function Wi(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Vi=new Map,qi=new Set;function Yi(t,e){let n=Vi.get(t);return n||(n=e(),Vi.set(t,n),qi.add(n)),n}const Xi=(t,e,n)=>{const i=S(e,n);void 0!==i&&t.add(i)};class Ki{constructor(t){this._config=function(t){return(t=t||{}).data=Wi(t.data),Hi(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Wi(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Hi(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Yi(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Yi(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Yi(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Yi(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>Xi(s,t,e)))),e.forEach((t=>Xi(s,i,t))),e.forEach((t=>Xi(s,Dt[r]||{},t))),e.forEach((t=>Xi(s,Bt,t))),e.forEach((t=>Xi(s,Ft,t)))}));const h=Array.from(s);return 0===h.length&&h.push(Object.create(null)),qi.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Dt[e]||{},Bt.datasets[e]||{},{type:e},Bt,Ft]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Zi(this._resolverCache,t,i);let s=o;(function(t,e){const{isScriptable:n,isIndexable:i}=ve(t);for(const r of e){const e=n(r),o=i(r),a=(o||e)&&t[r];if(e&&(O(a)||$i(a))||o&&l(a))return!0}return!1})(o,e)&&(r.$shared=!1,s=ye(o,n=O(n)?n():n,this.createResolver(t,n,a)));for(const t of e)r[t]=s[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Zi(this._resolverCache,t,n);return c(e)?ye(r,e,void 0,i):r}}function Zi(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);return o||(o={resolver:me(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)),o}const $i=t=>c(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||O(t[n])),!1),Qi=["top","bottom","left","right","chartArea"];function Ji(t,e){return"top"===t||"bottom"===t||-1===Qi.indexOf(t)&&"x"===e}function tr(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function er(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),g(n&&n.onComplete,[t],e)}function nr(t){const e=t.chart,n=e.options.animation;g(n&&n.onProgress,[t],e)}function ir(t){return Ne()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const rr={},or=t=>{const e=ir(t);return Object.values(rr).filter((t=>t.canvas===e)).pop()};function ar(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}class sr{constructor(t,e){const n=this.config=new Ki(e),i=ir(t),r=or(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!Ne()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?ci:Ci}(i)),this.platform.updateConfig(n);const s=this.platform.acquireContext(i,a.aspectRatio),h=s&&s.canvas,l=h&&h.height,c=h&&h.width;this.id=o(),this.ctx=s,this.canvas=h,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ji,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),a.resizeDelay||0),this._dataChanges=[],rr[this.id]=this,s&&h?(sn.listen(this,"complete",er),sn.listen(this,"progress",nr),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return h(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():He(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Wt(this.canvas,this.ctx),this}stop(){return sn.stop(this),this}resize(t,e){sn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,He(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),g(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){m(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=Gi(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),m(r,(e=>{const r=e.options,o=r.id,a=Gi(o,r),s=p(r.type,e.dtype);void 0!==r.position&&Ji(r.position,a)===Ji(e.dposition)||(r.position=e.dposition),i[o]=!0;let h=null;o in n&&n[o].type===s?h=n[o]:(h=new(Fi.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[h.id]=h),h.init(r,t)})),m(i,((t,e)=>{t||delete n[e]})),m(n,(t=>{hi.configure(this,t,t.options),hi.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(tr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||Ui(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=Fi.getController(o),{datasetElementType:i,dataElementType:a}=Bt.datasets[o];Object.assign(e.prototype,{dataElementType:Fi.getElement(a),datasetElementType:i&&Fi.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){m(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||m(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(tr("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){m(this.scales,(t=>{hi.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);P(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e)ar(t,i,"_removeElements"===n?-r:r)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!P(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;hi.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],m(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,O(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(sn.has(this)?this.attached&&!sn.running(this)&&sn.start(this):(this.draw(),er({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&Yt(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Xt(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(t,e,n,i){const r=Zn.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=le(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);T(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),sn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Wt(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete rr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};m(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){m(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},m(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,s;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!y(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:qt(t,this.chartArea,this._minPadding)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),h=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,g(r.onHover,[t,a,this],this),s&&g(r.onClick,[t,a,this],this));const l=!y(a,i);return(l||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=h,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}const hr=()=>m(sr.instances,(t=>t._plugins.invalidate())),lr=!0;function cr(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:a,outerRadius:s,innerRadius:h}=e;let l=r/s;t.beginPath(),t.arc(o,a,s,i-l,n+l),h>r?(l=r/h,t.arc(o,a,h,n+l,i-l,!0)):t.arc(o,a,r,n+N,i-N),t.closePath(),t.clip()}function ur(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function fr(t,e,n,i,r){const{x:o,y:a,startAngle:s,pixelMargin:h,innerRadius:l}=e,c=Math.max(e.outerRadius+i+n-h,0),u=l>0?l+i+n+h:0;let f=0;const p=r-s;if(i){const t=((l>0?l-i:0)+(c>0?c-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const d=(p-Math.max(.001,p*c-n/k)/c)/2,g=s+d+f,m=r-d-f,{outerStart:y,outerEnd:v,innerStart:_,innerEnd:x}=function(t,e,n,i){const r=function(t){return ie(t,["outerStart","outerEnd","innerStart","innerEnd"])}(t.options.borderRadius),o=(n-e)/2,a=Math.min(o,i*e/2),s=t=>{const e=(n-Math.min(o,t))*i/2;return Q(t,0,Math.min(o,e))};return{outerStart:s(r.outerStart),outerEnd:s(r.outerEnd),innerStart:Q(r.innerStart,0,a),innerEnd:Q(r.innerEnd,0,a)}}(e,u,c,m-g),w=c-y,b=c-v,M=g+y/w,C=m-v/b,S=u+_,E=u+x,T=g+_/S,O=m-x/E;if(t.beginPath(),t.arc(o,a,c,M,C),v>0){const e=ur(b,C,o,a);t.arc(e.x,e.y,v,C,m+N)}const P=ur(E,m,o,a);if(t.lineTo(P.x,P.y),x>0){const e=ur(E,O,o,a);t.arc(e.x,e.y,x,m+N,O+Math.PI)}if(t.arc(o,a,u,m-x/u,g+_/u,!0),_>0){const e=ur(S,T,o,a);t.arc(e.x,e.y,_,T+Math.PI,g-N)}const I=ur(w,g,o,a);if(t.lineTo(I.x,I.y),y>0){const e=ur(w,M,o,a);t.arc(e.x,e.y,y,g-N,M)}t.closePath()}Object.defineProperties(sr,{defaults:{enumerable:lr,value:Bt},instances:{enumerable:lr,value:rr},overrides:{enumerable:lr,value:Dt},registry:{enumerable:lr,value:Fi},version:{enumerable:lr,value:"3.7.0"},getChart:{enumerable:lr,value:or},register:{enumerable:lr,value:(...t)=>{Fi.add(...t),hr()}},unregister:{enumerable:lr,value:(...t)=>{Fi.remove(...t),hr()}}});class pr extends Si{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=Y(i,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:h,outerRadius:l,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=this.options.spacing/2,f=p(c,s-a)>=I||$(r,a,s),d=J(o,h+u,l+u);return f&&d}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:s,spacing:h}=this.options,l=(i+r)/2,c=(o+a+h+s)/2;return{x:e+Math.cos(l)*c,y:n+Math.sin(l)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/2,r=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>I?Math.floor(n/I):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=0;if(i){o=i/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*o,Math.sin(e)*o),this.circumference>=k&&(o=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function(t,e,n,i){const{fullCircles:r,startAngle:o,circumference:a}=e;let s=e.endAngle;if(r){fr(t,e,n,i,o+I);for(let e=0;e<r;++e)t.fill();isNaN(a)||(s=o+a%I,a%I==0&&(s+=I))}return fr(t,e,n,i,s),t.fill(),s}(t,this,o,r);(function(t,e,n,i,r){const{options:o}=e,{borderWidth:a,borderJoinStyle:s}=o,h="inner"===o.borderAlign;a&&(h?(t.lineWidth=2*a,t.lineJoin=s||"round"):(t.lineWidth=a,t.lineJoin=s||"bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:r,startAngle:o,pixelMargin:a,fullCircles:s}=e,h=Math.max(e.outerRadius-a,0),l=e.innerRadius+a;let c;for(n&&cr(t,e,o+I),t.beginPath(),t.arc(i,r,l,o+I,o,!0),c=0;c<s;++c)t.stroke();for(t.beginPath(),t.arc(i,r,h,o,o+I),c=0;c<s;++c)t.stroke()}(t,e,h),h&&cr(t,e,r),fr(t,e,n,i,r),t.stroke())})(t,this,o,r,a),t.restore()}}function dr(t,e,n=e){t.lineCap=p(n.borderCapStyle,e.borderCapStyle),t.setLineDash(p(n.borderDash,e.borderDash)),t.lineDashOffset=p(n.borderDashOffset,e.borderDashOffset),t.lineJoin=p(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=p(n.borderWidth,e.borderWidth),t.strokeStyle=p(n.borderColor,e.borderColor)}function gr(t,e,n){t.lineTo(n.x,n.y)}function mr(t,e,n={}){const i=t.length,{start:r=0,end:o=i-1}=n,{start:a,end:s}=e,h=Math.max(r,a),l=Math.min(o,s),c=r<a&&o<a||r>s&&o>s;return{count:i,start:h,loop:e.loop,ilen:l<h&&!c?i+l-h:l-h}}function yr(t,e,n,i){const{points:r,options:o}=e,{count:a,start:s,loop:h,ilen:l}=mr(r,n,i),c=function(t){return t.stepped?Kt:t.tension||"monotone"===t.cubicInterpolationMode?Zt:gr}(o);let u,f,p,{move:d=!0,reverse:g}=i||{};for(u=0;u<=l;++u)f=r[(s+(g?l-u:u))%a],f.skip||(d?(t.moveTo(f.x,f.y),d=!1):c(t,p,f,g,o.stepped),p=f);return h&&(f=r[(s+(g?l:0))%a],c(t,p,f,g,o.stepped)),!!h}function vr(t,e,n,i){const r=e.points,{count:o,start:a,ilen:s}=mr(r,n,i),{move:h=!0,reverse:l}=i||{};let c,u,f,p,d,g,m=0,y=0;const v=t=>(a+(l?s-t:t))%o,_=()=>{p!==d&&(t.lineTo(m,d),t.lineTo(m,p),t.lineTo(m,g))};for(h&&(u=r[v(0)],t.moveTo(u.x,u.y)),c=0;c<=s;++c){if(u=r[v(c)],u.skip)continue;const e=u.x,n=u.y,i=0|e;i===f?(n<p?p=n:n>d&&(d=n),m=(y*m+e)/++y):(_(),t.lineTo(e,n),f=i,y=0,p=d=n),g=n}_()}function _r(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n?yr:vr}pr.id="arc",pr.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},pr.defaultRoutes={backgroundColor:"backgroundColor"};const xr="function"==typeof Path2D;class wr extends Si{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Re(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);return function(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),o=on(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,h=n.length,l=[];let c=o,u=e[0].start,f=u;function p(t,e,i,r){const o=s?-1:1;if(t!==e){for(t+=h;n[t%h].skip;)t-=o;for(;n[e%h].skip;)e+=o;t%h!=e%h&&(l.push({start:t%h,end:e%h,loop:i,style:r}),c=r,u=e%h)}}for(const t of e){u=s?u:t.start;let e,o=n[u%h];for(f=u+1;f<=t.end;f++){const s=n[f%h];e=on(i.setContext(le(r,{type:"segment",p0:o,p1:s,p0DataIndex:(f-1)%h,p1DataIndex:f%h,datasetIndex:a}))),an(e,c)&&p(u,f-1,t.loop,c),o=s,c=e}u<f-1&&p(u,f-1,t.loop,c)}return l}(t,e,n,i):e}(t,!0===i?[{start:a,end:s,loop:o}]:function(t,e,n,i){const r=t.length,o=[];let a,s=e,h=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?h.skip||(i=!1,o.push({start:e%r,end:(a-1)%r,loop:i}),e=s=n.stop?a:null):(s=a,h.skip&&(e=a)),h=n}return null!==s&&o.push({start:e%r,end:s%r,loop:i}),o}(n,a,s<a?s+r:s,!!t._fullLoop&&0===a&&s===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=rn(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],s=function(t){return t.stepped?Ye:t.tension||"monotone"===t.cubicInterpolationMode?Xe:qe}(n);let h,l;for(h=0,l=o.length;h<l;++h){const{start:l,end:c}=o[h],u=r[l],f=r[c];if(u===f){a.push(u);continue}const p=s(u,f,Math.abs((i-u[e])/(f[e]-u[e])),n.stepped);p[e]=t[e],a.push(p)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return _r(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=_r(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),function(t,e,n,i){xr&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),dr(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,a=_r(e);for(const s of r)dr(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function br(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}wr.id="line",wr.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},wr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},wr.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Mr extends Si{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return br(this,t,"x",e)}inYRange(t,e){return br(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!qt(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Vt(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Cr(t,e){const{x:n,y:i,base:r,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,h,l,c,u;return t.horizontal?(u=a/2,s=Math.min(n,r),h=Math.max(n,r),l=i-u,c=i+u):(u=o/2,s=n-u,h=n+u,l=Math.min(i,r),c=Math.max(i,r)),{left:s,top:l,right:h,bottom:c}}function Sr(t,e,n,i){return t?0:Q(e,n,i)}function Er(t,e,n,i){const r=null===e,o=null===n,a=t&&!(r&&o)&&Cr(t,i);return a&&(r||J(e,a.left,a.right))&&(o||J(n,a.top,a.bottom))}function Tr(t,e){t.rect(e.x,e.y,e.w,e.h)}function Or(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+a,radius:t.radius}}Mr.id="point",Mr.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Mr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Pr extends Si{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=function(t){const e=Cr(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=re(i);return{t:Sr(r.top,o.top,0,n),r:Sr(r.right,o.right,0,e),b:Sr(r.bottom,o.bottom,0,n),l:Sr(r.left,o.left,0,e)}}(t,n/2,i/2),o=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=oe(r),a=Math.min(e,n),s=t.borderSkipped,h=i||c(r);return{topLeft:Sr(!h||s.top||s.left,o.topLeft,0,a),topRight:Sr(!h||s.top||s.right,o.topRight,0,a),bottomLeft:Sr(!h||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:Sr(!h||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Jt:Tr;var s;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),a(t,Or(o,e,r)),t.clip(),a(t,Or(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Or(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Er(this,t,e,n)}inXRange(t,e){return Er(this,t,null,e)}inYRange(t,e){return Er(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}function kr(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function Ir(t){t.data.datasets.forEach((t=>{kr(t)}))}Pr.id="bar",Pr.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Pr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ar={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void Ir(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:o,indexAxis:a}=e,s=t.getDatasetMeta(r),l=o||e.data;if("y"===he([a,t.options.indexAxis]))return;if("line"!==s.type)return;const c=t.scales[s.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let u,{start:f,count:p}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:a,max:s,minDefined:h,maxDefined:l}=o.getUserBounds();return h&&(r=Q(ue(e,o.axis,a).lo,0,n-1)),i=l?Q(ue(e,o.axis,s).hi+1,r,n)-r:n-r,{start:r,count:i}}(s,l);if(p<=(n.threshold||4*i))kr(e);else{switch(h(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":u=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let h=0;const l=e+n-1;let c,u,f,p,d,g=e;for(a[h++]=t[g],c=0;c<o-2;c++){let i,r=0,o=0;const l=Math.floor((c+1)*s)+1+e,m=Math.min(Math.floor((c+2)*s)+1,n)+e,y=m-l;for(i=l;i<m;i++)r+=t[i].x,o+=t[i].y;r/=y,o/=y;const v=Math.floor(c*s)+1+e,_=Math.min(Math.floor((c+1)*s)+1,n)+e,{x,y:w}=t[g];for(f=p=-1,i=v;i<_;i++)p=.5*Math.abs((x-r)*(t[i].y-w)-(x-t[i].x)*(o-w)),p>f&&(f=p,u=t[i],d=i);a[h++]=u,g=d}return a[h++]=t[l],a}(l,f,p,i,n);break;case"min-max":u=function(t,e,n,i){let r,o,a,s,l,c,u,f,p,d,g=0,m=0;const y=[],v=e+n-1,_=t[e].x,x=t[v].x-_;for(r=e;r<e+n;++r){o=t[r],a=(o.x-_)/x*i,s=o.y;const e=0|a;if(e===l)s<p?(p=s,c=r):s>d&&(d=s,u=r),g=(m*g+o.x)/++m;else{const n=r-1;if(!h(c)&&!h(u)){const e=Math.min(c,u),i=Math.max(c,u);e!==f&&e!==n&&y.push({...t[e],x:g}),i!==f&&i!==n&&y.push({...t[i],x:g})}r>0&&n!==f&&y.push(t[n]),y.push(o),l=e,m=0,p=d=s,c=u=f=r}}return y}(l,f,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=u}}))},destroy(t){Ir(t)}};function Lr(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=p(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(c(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return u(r)&&Math.floor(r)===r?("-"!==i[0]&&"+"!==i[0]||(r=e+r),!(r===e||r<0||r>=n)&&r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}class Rr{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:I},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function Nr(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Dr(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:a,last:s,point:h}=Fr(o,e,"x");if(!(!h||a&&s))if(a)i.unshift(h);else if(t.push(h),!s)break}t.push(...i)}function Fr(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,a=t.points;let s=!1,h=!1;for(let t=0;t<o.length;t++){const e=o[t],i=a[e.start][n],l=a[e.end][n];if(J(r,i,l)){s=r===i,h=r===l;break}}return{first:s,last:h,point:i}}function jr(t){const{chart:e,fill:n,line:i}=t;if(u(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,a=i.points,s=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);s.push(zr({x:null,y:e.bottom},i));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Dr(r,a[t],s)}return new wr({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=[],a=i.reverse?e.max:e.min,s=i.reverse?e.min:e.max;let h,l,u;if(u="start"===n?a:"end"===n?s:c(n)?n.value:e.getBaseValue(),i.grid.circular)return l=e.getPointPositionForValue(0,a),new Rr({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(u)});for(h=0;h<r;++h)o.push(e.getPointPositionForValue(h,u));return o}(t):function(t){const{scale:e={},fill:n}=t;let i,r=null;return"start"===n?r=e.bottom:"end"===n?r=e.top:c(n)?r=e.getPixelForValue(n.value):e.getBasePixel&&(r=e.getBasePixel()),u(r)?(i=e.isHorizontal(),{x:i?r:null,y:i?null:r}):null}(t)}(t);return r instanceof Rr?r:zr(r,i)}function zr(t,e){let n=[],i=!1;return l(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=Nr(t,e,r);const a=r[t],s=r[e];null!==i?(o.push({x:a.x,y:i}),o.push({x:s.x,y:i})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))})),o}(t,e),n.length?new wr({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Br(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!u(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function Ur(t,e,n){t.beginPath(),e.path(t),t.lineTo(e.last().x,n),t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Gr(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=Z(r),o=Z(o)),{property:t,start:r,end:o}}function Hr(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Wr(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(t.beginPath(),t.rect(a,i,s-a,r-i),t.clip())}function Vr(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}function qr(t,e){const{line:n,target:i,property:r,color:o,scale:a}=e,s=function(t,e,n){const i=t.segments,r=t.points,o=e.points,a=[];for(const t of i){let{start:i,end:s}=t;s=Nr(i,s,r);const h=Gr(n,r[i],r[s],t.loop);if(!e.segments){a.push({source:t,target:h,start:r[i],end:r[s]});continue}const l=rn(e,h);for(const e of l){const i=Gr(n,o[e.start],o[e.end],e.loop),s=nn(t,r,i);for(const t of s)a.push({source:t,target:e,start:{[n]:Hr(h,i,"start",Math.max)},end:{[n]:Hr(h,i,"end",Math.min)}})}}return a}(n,i,r);for(const{source:e,target:h,start:l,end:c}of s){const{style:{backgroundColor:s=o}={}}=e,u=!0!==i;t.save(),t.fillStyle=s,Wr(t,a,u&&Gr(r,l,c)),t.beginPath();const f=!!n.pathSegment(t,e);let p;if(u){f?t.closePath():Vr(t,i,c,r);const e=!!i.pathSegment(t,h,{move:f,reverse:!0});p=f&&e,p||Vr(t,i,l,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Yr(t,e,n){const i=jr(e),{line:r,scale:o,axis:a}=e,s=r.options,h=s.fill,l=s.backgroundColor,{above:c=l,below:u=l}=h||{};i&&r.points.length&&(Yt(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:a,scale:s}=e,h=n._loop?"angle":e.axis;t.save(),"x"===h&&o!==r&&(Ur(t,i,a.top),qr(t,{line:n,target:i,color:r,scale:s,property:h}),t.restore(),t.save(),Ur(t,i,a.bottom)),qr(t,{line:n,target:i,color:o,scale:s,property:h}),t.restore()}(t,{line:r,target:i,above:c,below:u,area:n,scale:o,axis:a}),Xt(t))}var Xr={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,a,s,h;for(a=0;a<i;++a)o=t.getDatasetMeta(a),s=o.dataset,h=null,s&&s.options&&s instanceof wr&&(h={visible:t.isDatasetVisible(a),index:a,fill:Lr(s,a,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=h,r.push(h);for(a=0;a<i;++a)h=r[a],h&&!1!==h.fill&&(h.fill=Br(r,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),i&&Yr(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&Yr(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;i&&!1!==i.fill&&"beforeDatasetDraw"===n.drawTime&&Yr(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Kr=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Zr extends Si{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=g(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=se(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Kr(n,r);let h,l;e.font=i.string,this.isHorizontal()?(h=this.maxWidth,l=this._fitRows(o,r,a,s)+10):(l=this.maxHeight,h=this._fitCols(o,r,a,s)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],h=this.lineWidths=[0],l=i+a;let c=t;r.textAlign="left",r.textBaseline="middle";let u=-1,f=-l;return this.legendItems.forEach(((t,p)=>{const d=n+e/2+r.measureText(t.text).width;(0===p||h[h.length-1]+d+2*a>o)&&(c+=l,h[h.length-(p>0?0:1)]=0,f+=l,u++),s[p]={left:0,top:f,row:u,width:d,height:i},h[h.length-1]+=d+a})),c}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],h=this.columnSizes=[],l=o-t;let c=a,u=0,f=0,p=0,d=0;return this.legendItems.forEach(((t,o)=>{const g=n+e/2+r.measureText(t.text).width;o>0&&f+i+2*a>l&&(c+=u+a,h.push({width:u,height:f}),p+=u+a,d++,u=f=0),s[o]={left:p,top:f,col:d,width:g,height:i},u=Math.max(u,g),f+=i+a})),c+=u,h.push({width:u,height:f}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:o}}=this,a=$e(o,this.left,this.width);if(this.isHorizontal()){let o=0,s=i(n,this.left+r,this.right-this.lineWidths[o]);for(const h of e)o!==h.row&&(o=h.row,s=i(n,this.left+r,this.right-this.lineWidths[o])),h.top+=this.top+t+r,h.left=a.leftForLtr(a.x(s),h.width),s+=h.width+r}else{let o=0,s=i(n,this.top+t+r,this.bottom-this.columnSizes[o].height);for(const h of e)h.col!==o&&(o=h.col,s=i(n,this.top+t+r,this.bottom-this.columnSizes[o].height)),h.top=s,h.left+=this.left+r,h.left=a.leftForLtr(a.x(h.left),h.width),s+=h.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Yt(t,this),this._draw(),Xt(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:o,labels:a}=t,s=Bt.color,h=$e(t.rtl,this.left,this.width),l=se(a.font),{color:c,padding:u}=a,f=l.size,d=f/2;let g;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:m,boxHeight:y,itemHeight:v}=Kr(a,f),_=this.isHorizontal(),x=this._computeTitleHeight();g=_?{x:i(o,this.left+u,this.right-n[0]),y:this.top+u+x,line:0}:{x:this.left+u,y:i(o,this.top+x+u,this.bottom-e[0].height),line:0},Qe(this.ctx,t.textDirection);const w=v+u;this.legendItems.forEach(((b,M)=>{r.strokeStyle=b.fontColor||c,r.fillStyle=b.fontColor||c;const C=r.measureText(b.text).width,S=h.textAlign(b.textAlign||(b.textAlign=a.textAlign)),E=m+d+C;let T=g.x,O=g.y;h.setWidth(this.width),_?M>0&&T+E+u>this.right&&(O=g.y+=w,g.line++,T=g.x=i(o,this.left+u,this.right-n[g.line])):M>0&&O+w>this.bottom&&(T=g.x=T+e[g.line].width+u,g.line++,O=g.y=i(o,this.top+x+u,this.bottom-e[g.line].height)),function(t,e,n){if(isNaN(m)||m<=0||isNaN(y)||y<0)return;r.save();const i=p(n.lineWidth,1);if(r.fillStyle=p(n.fillStyle,s),r.lineCap=p(n.lineCap,"butt"),r.lineDashOffset=p(n.lineDashOffset,0),r.lineJoin=p(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=p(n.strokeStyle,s),r.setLineDash(p(n.lineDash,[])),a.usePointStyle){const o={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},a=h.xPlus(t,m/2);Vt(r,o,a,e+d)}else{const o=e+Math.max((f-y)/2,0),a=h.leftForLtr(t,m),s=oe(n.borderRadius);r.beginPath(),Object.values(s).some((t=>0!==t))?Jt(r,{x:a,y:o,w:m,h:y,radius:s}):r.rect(a,o,m,y),r.fill(),0!==i&&r.stroke()}r.restore()}(h.x(T),O,b),T=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(S,T+m+d,_?T+E:this.right,t.rtl),function(t,e,n){$t(r,n.text,t,e+v/2,l,{strikethrough:n.hidden,textAlign:h.textAlign(n.textAlign)})}(h.x(T),O,b),_?g.x+=E+u:g.y+=w})),Je(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=se(e.font),o=ae(e.padding);if(!e.display)return;const a=$e(t.rtl,this.left,this.width),s=this.ctx,h=e.position,l=r.size/2,c=o.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=i(t.align,f,this.right-p);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);u=c+i(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=i(h,f,f+p);s.textAlign=a.textAlign(n(h)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=r.string,$t(s,e.text,d,u,r)}_computeTitleHeight(){const t=this.options.title,e=se(t.font),n=ae(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(J(t,this.left,this.right)&&J(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],J(t,i.left,i.left+i.width)&&J(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const o=this._hoveredItem,a=(r=n,null!==(i=o)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);o&&!a&&g(e.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!a&&g(e.onHover,[t,n,this],this)}else n&&g(e.onClick,[t,n,this],this);var i,r}}var $r={id:"legend",_element:Zr,start(t,e,n){const i=t.legend=new Zr({ctx:t.ctx,options:n,chart:t});hi.configure(t,i,n),hi.addBox(t,i)},stop(t){hi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;hi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const a=t.controller.getStyle(n?0:void 0),s=ae(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Qr extends Si{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=l(n.text)?n.text.length:1;this._padding=ae(n.padding);const r=i*se(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:o,options:a}=this,s=a.align;let h,l,c,u=0;return this.isHorizontal()?(l=i(s,n,o),c=e+t,h=o-n):("left"===a.position?(l=n+t,c=i(s,r,e),u=-.5*k):(l=o-t,c=i(s,e,r),u=.5*k),h=r-e),{titleX:l,titleY:c,maxWidth:h,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=se(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:s,rotation:h}=this._drawArgs(r);$t(t,e.text,0,0,i,{color:e.color,maxWidth:s,rotation:h,textAlign:n(e.align),textBaseline:"middle",translation:[o,a]})}}var Jr={id:"title",_element:Qr,start(t,e,n){!function(t,e){const n=new Qr({ctx:t.ctx,options:e,chart:t});hi.configure(t,n,e),hi.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;hi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;hi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const to={average(t){if(!t.length)return!1;let e,n,i=0,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++o}}return{x:i/o,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=X(e,i.getCenterPoint());t<s&&(s=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function eo(t,e){return e&&(l(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function no(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function io(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:a,value:s}=o.getLabelAndValue(r);return{chart:t,label:a,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:s,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function ro(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:a,boxHeight:s}=e,h=se(e.bodyFont),l=se(e.titleFont),c=se(e.footerFont),u=o.length,f=r.length,p=i.length,d=ae(e.padding);let g=d.height,y=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);v+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*l.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),v&&(g+=p*(e.displayColors?Math.max(s,h.lineHeight):h.lineHeight)+(v-p)*h.lineHeight+(v-1)*e.bodySpacing),f&&(g+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);let _=0;const x=function(t){y=Math.max(y,n.measureText(t).width+_)};return n.save(),n.font=l.string,m(t.title,x),n.font=h.string,m(t.beforeBody.concat(t.afterBody),x),_=e.displayColors?a+2+e.boxPadding:0,m(i,(t=>{m(t.before,x),m(t.lines,x),m(t.after,x)})),_=0,n.font=c.string,m(t.footer,x),n.restore(),y+=d.width,{width:y,height:g}}function oo(t,e,n,i){const{x:r,width:o}=n,{width:a,chartArea:{left:s,right:h}}=t;let l="center";return"center"===i?l=r<=(s+h)/2?"left":"right":r<=o/2?l="left":r>=a-o/2&&(l="right"),function(t,e,n,i){const{x:r,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+o+a>e.width||"right"===t&&r-o-a<0||void 0}(l,t,e,n)&&(l="center"),l}function ao(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||oo(t,e,n,i),yAlign:i}}function so(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:h}=n,l=r+o,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:p}=oe(a);let d=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,s);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,h,l);return"center"===h?"left"===s?d+=l:"right"===s&&(d-=l):"left"===s?d-=Math.max(c,f)+r:"right"===s&&(d+=Math.max(u,p)+r),{x:Q(d,0,i.width-e.width),y:Q(g,0,i.height-e.height)}}function ho(t,e,n){const i=ae(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function lo(t){return eo([],no(t))}function co(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class uo extends Si{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new fn(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=function(t,e,n){return le(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,i=n.beforeTitle.apply(this,[t]),r=n.title.apply(this,[t]),o=n.afterTitle.apply(this,[t]);let a=[];return a=eo(a,no(i)),a=eo(a,no(r)),a=eo(a,no(o)),a}getBeforeBody(t,e){return lo(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,i=[];return m(t,(t=>{const e={before:[],lines:[],after:[]},r=co(n,t);eo(e.before,no(r.beforeLabel.call(this,t))),eo(e.lines,r.label.call(this,t)),eo(e.after,no(r.afterLabel.call(this,t))),i.push(e)})),i}getAfterBody(t,e){return lo(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,i=n.beforeFooter.apply(this,[t]),r=n.footer.apply(this,[t]),o=n.afterFooter.apply(this,[t]);let a=[];return a=eo(a,no(i)),a=eo(a,no(r)),a=eo(a,no(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a,s,h=[];for(a=0,s=e.length;a<s;++a)h.push(io(this.chart,e[a]));return t.filter&&(h=h.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(h=h.sort(((e,i)=>t.itemSort(e,i,n)))),m(h,(e=>{const n=co(t.callbacks,e);i.push(n.labelColor.call(this,e)),r.push(n.labelPointStyle.call(this,e)),o.push(n.labelTextColor.call(this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=h,h}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=to[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=ro(this,n),a=Object.assign({},t,e),s=ao(this.chart,n,a),h=so(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,r={opacity:1,x:h.x,y:h.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:h,bottomLeft:l,bottomRight:c}=oe(a),{x:u,y:f}=t,{width:p,height:d}=e;let g,m,y,v,_,x;return"center"===r?(_=f+d/2,"left"===i?(g=u,m=g-o,v=_+o,x=_-o):(g=u+p,m=g+o,v=_-o,x=_+o),y=g):(m="left"===i?u+Math.max(s,l)+o:"right"===i?u+p-Math.max(h,c)-o:this.caretX,"top"===r?(v=f,_=v-o,g=m-o,y=m+o):(v=f+d,_=v+o,g=m+o,y=m-o),x=v),{x1:g,x2:m,x3:y,y1:v,y2:_,y3:x}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,s;if(r){const h=$e(n.rtl,this.x,this.width);for(t.x=ho(this,n.titleAlign,n),e.textAlign=h.textAlign(n.titleAlign),e.textBaseline="middle",o=se(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:h,boxPadding:l}=r,c=se(r.bodyFont),u=ho(this,"left",r),f=i.x(u),p=s<c.lineHeight?(c.lineHeight-s)/2:0,d=e.y+p;if(r.usePointStyle){const e={radius:Math.min(h,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(f,h)+h/2,l=d+s/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Vt(t,e,n,l),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Vt(t,e,n,l)}else{t.lineWidth=o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(f,h-l),n=i.leftForLtr(i.xPlus(f,1),h-l-2),a=oe(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Jt(t,{x:e,y:d,w:h,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Jt(t,{x:n,y:d+1,w:h-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,d,h,s),t.strokeRect(e,d,h,s),t.fillStyle=o.backgroundColor,t.fillRect(n,d+1,h-2,s-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:h,boxPadding:l}=n,c=se(n.bodyFont);let u=c.lineHeight,f=0;const p=$e(n.rtl,this.x,this.width),d=function(n){e.fillText(n,p.x(t.x+f),t.y+u/2),t.y+=u+r},g=p.textAlign(o);let y,v,_,x,w,b,M;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=ho(this,g,n),e.fillStyle=n.bodyColor,m(this.beforeBody,d),f=a&&"right"!==g?"center"===o?h/2+l:h+2+l:0,x=0,b=i.length;x<b;++x){for(y=i[x],v=this.labelTextColors[x],e.fillStyle=v,m(y.before,d),_=y.lines,a&&_.length&&(this._drawColorBox(e,t,x,p,n),u=Math.max(c.lineHeight,s)),w=0,M=_.length;w<M;++w)d(_[w]),u=c.lineHeight;m(y.after,d)}f=0,u=c.lineHeight,m(this.afterBody,d),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const s=$e(n.rtl,this.x,this.width);for(t.x=ho(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=se(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:s}=t,{width:h,height:l}=n,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:p}=oe(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+c,s),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+h-u,s),e.quadraticCurveTo(a+h,s,a+h,s+u),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+h,s+l-p),e.quadraticCurveTo(a+h,s+l,a+h-p,s+l),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+f,s+l),e.quadraticCurveTo(a,s+l,a,s+l-f),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,s+c),e.quadraticCurveTo(a,s,a+c,s),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=to[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=ro(this,t),a=Object.assign({},n,this._size),s=ao(e,t,a),h=so(t,a,s,e);i._to===h.x&&r._to===h.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,h))}}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ae(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),Qe(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),Je(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!y(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),s=e||!y(o,r)||a;return s&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=to[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}uo.positioners=to;var fo={id:"tooltip",_element:uo,positioners:to,afterInit(t,e,n){n&&(t.tooltip=new uo({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip,n={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",n)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n))},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:r,beforeBody:r,beforeLabel:r,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return h(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:r,afterBody:r,beforeFooter:r,footer:r,afterFooter:r}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};class po extends Ni{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(h(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Q(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,n,i){const r=t.indexOf(e);return-1===r?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):r!==t.lastIndexOf(e)?n:r}(n,t,p(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function go(t,e,{horizontal:n,minRotation:i}){const r=W(i),o=(n?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}po.id="category",po.defaults={ticks:{callback:po.prototype.getLabelForValue}};class mo extends Ni{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return h(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=z(i),e=z(r);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(i===r){let e=1;(r>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*r)),a(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=function(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:s,count:l,maxTicks:c,maxDigits:u,includeBounds:f}=t,p=r||1,d=c-1,{min:g,max:m}=e,y=!h(o),v=!h(a),_=!h(l),x=(m-g)/(u+1);let w,b,M,C,S=B((m-g)/d/p)*p;if(S<1e-14&&!y&&!v)return[{value:g},{value:m}];C=Math.ceil(m/S)-Math.floor(g/S),C>d&&(S=B(C*S/d/p)*p),h(s)||(w=Math.pow(10,s),S=Math.ceil(S*w)/w),"ticks"===i?(b=Math.floor(g/S)*S,M=Math.ceil(m/S)*S):(b=g,M=m),y&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/r,S/1e3)?(C=Math.round(Math.min((a-o)/S,c)),S=(a-o)/C,b=o,M=a):_?(b=y?o:b,M=v?a:M,C=l-1,S=(M-b)/C):(C=(M-b)/S,C=G(C,Math.round(C),S/1e3)?Math.round(C):Math.ceil(C));const E=Math.max(q(S),q(b));w=Math.pow(10,h(s)?E:s),b=Math.round(b*w)/w,M=Math.round(M*w)/w;let T=0;for(y&&(f&&b!==o?(n.push({value:o}),b<o&&T++,G(Math.round((b+T*S)*w)/w,o,go(o,x,t))&&T++):b<o&&T++);T<C;++T)n.push({value:Math.round((b+T*S)*w)/w});return v&&f&&M!==a?n.length&&G(n[n.length-1].value,a,go(a,x,t))?n[n.length-1].value=a:n.push({value:a}):v&&M!==a||n.push({value:M}),n}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&H(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Ze(t,this.chart.options.locale,this.options.ticks.format)}}class yo extends mo{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=u(t)?t:0,this.max=u(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=W(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function vo(t){return 1==t/Math.pow(10,Math.floor(j(t)))}yo.id="linear",yo.defaults={ticks:{callback:Ti.formatters.numeric}};class _o extends Ni{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=mo.prototype.parse.apply(this,[t,e]);if(0!==n)return u(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=u(t)?Math.max(0,t):null,this.max=u(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t,a=(t,e)=>Math.pow(10,Math.floor(j(t))+e);n===i&&(n<=0?(r(1),o(10)):(r(a(n,-1)),o(a(i,1)))),n<=0&&r(a(i,-1)),i<=0&&o(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&r(a(n,-1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(j(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let o=f(t.min,Math.pow(10,Math.floor(j(e.min)))),a=Math.floor(j(o)),s=Math.floor(o/Math.pow(10,a)),h=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:o,major:vo(o)}),++s,10===s&&(s=1,++a,h=a>=0?1:h),o=Math.round(s*Math.pow(10,a)*h)/h}while(a<n||a===n&&s<i);const l=f(t.max,o);return r.push({value:l,major:vo(o)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&H(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Ze(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=j(t),this._valueRange=j(this.max)-j(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(j(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function xo(t){const e=t.ticks;if(e.display&&t.display){const t=ae(e.backdropPadding);return p(e.font&&e.font.size,Bt.font.size)+t.height}return 0}function wo(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function bo(t,e,n,i,r){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,h=0;i.start<e.l?(s=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),r.start<e.t?(h=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-h)):r.end>e.b&&(h=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+h))}function Mo(t){return 0===t||180===t?"center":t<180?"left":"right"}function Co(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function So(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function Eo(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,I);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}_o.id="logarithmic",_o.defaults={ticks:{callback:Ti.formatters.logarithmic,major:{enabled:!0}}};class To extends mo{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ae(xo(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=u(t)&&!isNaN(t)?t:0,this.max=u(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xo(this.options))}generateTickLabels(t){mo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=g(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,a=t.options.pointLabels,s=a.centerPointLabels?k/o:0;for(let f=0;f<o;f++){const o=a.setContext(t.getPointLabelContext(f));r[f]=o.padding;const p=t.getPointPosition(f,t.drawingArea+r[f],s),d=se(o.font),g=(h=t.ctx,c=d,u=l(u=t._pointLabels[f])?u:[u],{w:Gt(h,c.string,u),h:u.length*c.lineHeight});i[f]=g;const m=Z(t.getIndexAngle(f)+s),y=Math.round(V(m));bo(n,e,m,wo(y,p.x,g.w,0,180),wo(y,p.y,g.h,90,270))}var h,c,u;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,a=xo(o)/2,s=t.drawingArea,h=o.pointLabels.centerPointLabels?k/r:0;for(let o=0;o<r;o++){const r=t.getPointPosition(o,s+a+n[o],h),l=Math.round(V(Z(r.angle+N))),c=e[o],u=So(r.y,c.h,l),f=Mo(l),p=Co(r.x,c.w,f);i.push({x:r.x,y:u,textAlign:f,left:p,top:u,right:p+c.w,bottom:u+c.h})}return i}(t,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Z(t*(I/(this._pointLabels.length||1))+W(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(h(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(h(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return le(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-N+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Eo(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i}=e,r=this._pointLabels.length;let o,a,s;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=i.setContext(t.getPointLabelContext(r)),o=se(e.font),{x:a,y:s,textAlign:l,left:c,top:u,right:f,bottom:p}=t._pointLabelItems[r],{backdropColor:d}=e;if(!h(d)){const t=ae(e.backdropPadding);n.fillStyle=d,n.fillRect(c-t.left,u-t.top,f-c+t.width,p-u+t.height)}$t(n,t._pointLabels[r],a,s+o.lineHeight/2,o,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,r),i.display&&this.ticks.forEach(((t,e)=>{0!==e&&(a=this.getDistanceFromCenterForValue(t.value),function(t,e,n,i){const r=t.ctx,o=e.circular,{color:a,lineWidth:s}=e;!o&&!i||!a||!s||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=s,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),Eo(t,n,o,i),r.closePath(),r.stroke(),r.restore())}(this,i.setContext(this.getContext(e-1)),a,r))})),n.display){for(t.save(),o=r-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:h}=i;h&&r&&(t.lineWidth=h,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),s=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(s.x,s.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&!e.reverse)return;const s=n.setContext(this.getContext(a)),h=se(s.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=h.string,o=t.measureText(i.label).width,t.fillStyle=s.backdropColor;const e=ae(s.backdropPadding);t.fillRect(-o/2-e.left,-r-h.size/2-e.top,o+e.width,h.size+e.height)}$t(t,i.label,0,-r,h,{color:s.color})})),t.restore()}drawTitle(){}}To.id="radialLinear",To.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ti.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},To.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},To.descriptors={angleLines:{_fallback:"grid"}};const Oo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Po=Object.keys(Oo);function ko(t,e){return t-e}function Io(t,e){if(h(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof i&&(a=i(a)),u(a)||(a="string"==typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!U(o)&&!0!==o?n.startOf(a,r):n.startOf(a,"isoWeek",o)),+a)}function Ao(t,e,n,i){const r=Po.length;for(let o=Po.indexOf(t);o<r-1;++o){const t=Oo[Po[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return Po[o]}return Po[r-1]}function Lo(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=ce(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Ro(t,e,n){const i=[],r={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],r[s]=a,i.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),a=e[e.length-1].value;let s,h;for(s=o;s<=a;s=+r.add(s,1,i))h=n[s],h>=0&&(e[h].major=!0);return e}(t,i,r,n):i}class No extends Ni{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new Hn._date(t.adapters.date);b(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Io(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function s(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}o&&a||(s(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||s(this.getMinMax(!1))),i=u(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=u(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Ao(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=Po.length-1;o>=Po.indexOf(n);o--){const n=Po[o];if(Oo[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return Po[n?Po.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Po.indexOf(t)+1,n=Po.length;e<n;++e)if(Oo[Po[e]].common)return Po[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Ro(this,o,this._majorUnit)}initOffsets(t){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=Q(i,0,o),r=Q(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||Ao(r.minUnit,e,n,this._getLabelCapacity(e)),a=p(r.stepSize,1),s="week"===o&&r.isoWeekday,h=U(s)||!0===s,l={};let c,u,f=e;if(h&&(f=+t.startOf(f,"isoWeek",s)),f=+t.startOf(f,h?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const d="data"===i.ticks.source&&this.getDataTimestamps();for(c=f,u=0;c<n;c=+t.add(c,a,o),u++)Lo(l,c,d);return c!==n&&"ticks"!==i.bounds&&1!==u||Lo(l,c,d),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.time.displayFormats,a=this._unit,s=this._majorUnit,h=a&&o[a],l=s&&o[s],c=n[e],u=s&&l&&c&&c.major,f=this._adapter.format(t,i||(u?l:h)),p=r.ticks.callback;return p?g(p,[f,e,n],this):f}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=W(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Ro(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Io(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ge(t.sort(ko))}}function Do(t,e,n){let i,r,o,a,s=0,h=t.length-1;n?(e>=t[s].pos&&e<=t[h].pos&&({lo:s,hi:h}=ue(t,"pos",e)),({pos:i,time:o}=t[s]),({pos:r,time:a}=t[h])):(e>=t[s].time&&e<=t[h].time&&({lo:s,hi:h}=ue(t,"time",e)),({time:i,pos:o}=t[s]),({time:r,pos:a}=t[h]));const l=r-i;return l?o+(a-o)*(e-i)/l:o}No.id="time",No.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Fo extends No{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Do(e,this.min),this._tableRange=Do(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,s,h,l;for(o=0,a=t.length;o<a;++o)h=t[o],h>=e&&h<=n&&i.push(h);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)l=i[o+1],s=i[o-1],h=i[o],Math.round((l+s)/2)!==h&&r.push({time:h,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Do(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Do(this._table,n*this._tableRange+this._minPos,!0)}}function jo(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function zo(t){jo(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Bo(t,e){jo(2,arguments);var n=zo(t),i=zo(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function Uo(t,e){jo(2,arguments);var n=zo(t),i=zo(e);return n.getFullYear()-i.getFullYear()}function Go(t,e){jo(2,arguments);var n=zo(t),i=zo(e),r=Bo(n,i),o=Math.abs(Uo(n,i));n.setFullYear(1584),i.setFullYear(1584);var a=Bo(n,i)===-r,s=r*(o-Number(a));return 0===s?0:s}function Ho(t,e){jo(2,arguments);var n=zo(t),i=zo(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return 12*r+o}function Wo(t){jo(1,arguments);var e=zo(t);return e.setHours(23,59,59,999),e}function Vo(t){jo(1,arguments);var e=zo(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function qo(t){jo(1,arguments);var e=zo(t);return Wo(e).getTime()===Vo(e).getTime()}function Yo(t,e){jo(2,arguments);var n,i=zo(t),r=zo(e),o=Bo(i,r),a=Math.abs(Ho(i,r));if(a<1)n=0;else{1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);var s=Bo(i,r)===-o;qo(zo(t))&&1===a&&1===Bo(t,r)&&(s=!1),n=o*(a-Number(s))}return 0===n?0:n}function Xo(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Ko(t){jo(1,arguments);var e=zo(t);return e.setHours(0,0,0,0),e}Fo.id="timeseries",Fo.defaults=No.defaults;var Zo=864e5;function $o(t,e){jo(2,arguments);var n=Ko(t),i=Ko(e),r=n.getTime()-Xo(n),o=i.getTime()-Xo(i);return Math.round((r-o)/Zo)}function Qo(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Jo(t,e){jo(2,arguments);var n=zo(t),i=zo(e),r=Qo(n,i),o=Math.abs($o(n,i));n.setDate(n.getDate()-r*o);var a=Number(Qo(n,i)===-r),s=r*(o-a);return 0===s?0:s}Math.pow(10,8);var ta=6e4,ea=36e5;function na(t,e){return jo(2,arguments),zo(t).getTime()-zo(e).getTime()}var ia={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}};function ra(t){return t?ia[t]:ia.trunc}function oa(t,e,n){jo(2,arguments);var i=na(t,e)/ea;return ra(null==n?void 0:n.roundingMethod)(i)}function aa(t,e,n){jo(2,arguments);var i=na(t,e)/ta;return ra(null==n?void 0:n.roundingMethod)(i)}function sa(t,e,n){jo(2,arguments);var i=na(t,e)/1e3;return ra(null==n?void 0:n.roundingMethod)(i)}function ha(t){return jo(1,arguments),t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}function la(t){if(jo(1,arguments),!ha(t)&&"number"!=typeof t)return!1;var e=zo(t);return!isNaN(Number(e))}function ca(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ua(t,e){jo(2,arguments);var n=zo(t),i=ca(e);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}function fa(t,e){jo(2,arguments);var n=ca(e);return ua(t,-n)}function pa(t,e){jo(2,arguments);var n=zo(t),i=ca(e);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+i+1,0);var a=o.getDate();return r>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}function da(t,e){jo(2,arguments);var n=ca(e);return pa(t,-n)}function ga(t,e){if(jo(2,arguments),!e||"object"!=typeof e)return new Date(NaN);var n=e.years?ca(e.years):0,i=e.months?ca(e.months):0,r=e.weeks?ca(e.weeks):0,o=e.days?ca(e.days):0,a=e.hours?ca(e.hours):0,s=e.minutes?ca(e.minutes):0,h=e.seconds?ca(e.seconds):0,l=da(t,i+12*n),c=fa(l,o+7*r),u=s+60*a,f=h+60*u,p=1e3*f,d=new Date(c.getTime()-p);return d}function ma(t){jo(1,arguments);var e=zo(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function ya(t,e){jo(2,arguments);var n=ca(e);return pa(t,12*n)}function va(t){jo(1,arguments);var e=zo(t);return e.setDate(1),e.setHours(0,0,0,0),e}function _a(t){jo(1,arguments);var e=zo(t),n=e.getTime();return n}const xa=(t,e)=>{let n="rgb";return e&&(n=`${n}a`),n=`${n}(${t>>16&255},${t>>8&255},${255&t}`,e&&(n=`${n}, ${(t>>24&255)/255}`),n=`${n})`,n};class wa{constructor(t){this.options=t}setUnit(t){this.options.unit=t}setColour(t){let e=xa(t,!0);this.options.borderColor=e,this.options.backgroundColor=e}}const ba=["#329ae4","#07ee8f","#eeba07","#ee0784","#ebee07","#07e6ee"];class Ma{constructor(){this.colors=ba.slice(),this.index=0}get next(){this.index>this.colors.length-1&&(this.index=0);const t=this.colors[this.index];return this.index++,t}}var Ca={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Sa(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,i=t.formats[n]||t.formats[t.defaultWidth];return i}}const Ea={date:Sa({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Sa({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Sa({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Ta={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Oa(t){return function(e,n){var i,r=n||{};if("formatting"===(r.context?String(r.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{var s=t.defaultWidth,h=r.width?String(r.width):t.defaultWidth;i=t.values[h]||t.values[s]}return i[t.argumentCallback?t.argumentCallback(e):e]}}var Pa={ordinalNumber:function(t,e){var n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Oa({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Oa({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Oa({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Oa({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Oa({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};const ka=Pa;function Ia(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;var a,s=o[0],h=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(h)?La(h,(function(t){return t.test(s)})):Aa(h,(function(t){return t.test(s)}));a=t.valueCallback?t.valueCallback(l):l,a=n.valueCallback?n.valueCallback(a):a;var c=e.slice(s.length);return{value:a,rest:c}}}function Aa(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function La(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}var Ra,Na={ordinalNumber:(Ra={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(Ra.matchPattern);if(!n)return null;var i=n[0],r=t.match(Ra.parsePattern);if(!r)return null;var o=Ra.valueCallback?Ra.valueCallback(r[0]):r[0];o=e.valueCallback?e.valueCallback(o):o;var a=t.slice(i.length);return{value:o,rest:a}}),era:Ia({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ia({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ia({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ia({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ia({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const Da={code:"en-US",formatDistance:function(t,e,n){var i,r=Ca[t];return i="string"==typeof r?r:1===e?r.one:r.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Ea,formatRelative:function(t,e,n,i){return Ta[t]},localize:ka,match:Na,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fa(t,e){jo(2,arguments);var n=zo(t).getTime(),i=ca(e);return new Date(n+i)}function ja(t,e){jo(2,arguments);var n=ca(e);return Fa(t,-n)}function za(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e=e||{})Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function Ba(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}}function Ua(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}}const Ga={p:Ua,P:function(t,e){var n,i=t.match(/(P+)(p+)?/)||[],r=i[1],o=i[2];if(!o)return Ba(t,e);switch(r){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",Ba(r,e)).replace("{{time}}",Ua(o,e))}};var Ha=["D","DD"],Wa=["YY","YYYY"];function Va(t){return-1!==Ha.indexOf(t)}function qa(t){return-1!==Wa.indexOf(t)}function Ya(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}function Xa(t,e){jo(1,arguments);var n=e||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,o=null==r?0:ca(r),a=null==n.weekStartsOn?o:ca(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=zo(t),h=s.getUTCDay(),l=(h<a?7:0)+h-a;return s.setUTCDate(s.getUTCDate()-l),s.setUTCHours(0,0,0,0),s}function Ka(t,e){jo(1,arguments);var n=zo(t),i=n.getUTCFullYear(),r=e||{},o=r.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:ca(a),h=null==r.firstWeekContainsDate?s:ca(r.firstWeekContainsDate);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setUTCFullYear(i+1,0,h),l.setUTCHours(0,0,0,0);var c=Xa(l,e),u=new Date(0);u.setUTCFullYear(i,0,h),u.setUTCHours(0,0,0,0);var f=Xa(u,e);return n.getTime()>=c.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function Za(t,e,n){jo(2,arguments);var i=n||{},r=i.locale,o=r&&r.options&&r.options.weekStartsOn,a=null==o?0:ca(o),s=null==i.weekStartsOn?a:ca(i.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=zo(t),l=ca(e),c=h.getUTCDay(),u=l%7,f=(u+7)%7,p=(f<s?7:0)+l-c;return h.setUTCDate(h.getUTCDate()+p),h}function $a(t){jo(1,arguments);var e=1,n=zo(t),i=n.getUTCDay(),r=(i<e?7:0)+i-e;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function Qa(t){jo(1,arguments);var e=zo(t),n=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=$a(i),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=$a(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Ja(t){jo(1,arguments);var e=Qa(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var i=$a(n);return i}var ts=6048e5;function es(t){jo(1,arguments);var e=zo(t),n=$a(e).getTime()-Ja(e).getTime();return Math.round(n/ts)+1}function ns(t,e){jo(1,arguments);var n=e||{},i=n.locale,r=i&&i.options&&i.options.firstWeekContainsDate,o=null==r?1:ca(r),a=null==n.firstWeekContainsDate?o:ca(n.firstWeekContainsDate),s=Ka(t,e),h=new Date(0);h.setUTCFullYear(s,0,a),h.setUTCHours(0,0,0,0);var l=Xa(h,e);return l}var is=6048e5;function rs(t,e){jo(1,arguments);var n=zo(t),i=Xa(n,e).getTime()-ns(n,e).getTime();return Math.round(i/is)+1}var os=/^(1[0-2]|0?\d)/,as=/^(3[0-1]|[0-2]?\d)/,ss=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,hs=/^(5[0-3]|[0-4]?\d)/,ls=/^(2[0-3]|[0-1]?\d)/,cs=/^(2[0-4]|[0-1]?\d)/,us=/^(1[0-1]|0?\d)/,fs=/^(1[0-2]|0?\d)/,ps=/^[0-5]?\d/,ds=/^[0-5]?\d/,gs=/^\d/,ms=/^\d{1,2}/,ys=/^\d{1,3}/,vs=/^\d{1,4}/,_s=/^-?\d+/,xs=/^-?\d/,ws=/^-?\d{1,2}/,bs=/^-?\d{1,3}/,Ms=/^-?\d{1,4}/,Cs=/^([+-])(\d{2})(\d{2})?|Z/,Ss=/^([+-])(\d{2})(\d{2})|Z/,Es=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Ts=/^([+-])(\d{2}):(\d{2})|Z/,Os=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Ps(t,e,n){var i=e.match(t);if(!i)return null;var r=parseInt(i[0],10);return{value:n?n(r):r,rest:e.slice(i[0].length)}}function ks(t,e){var n=e.match(t);return n?"Z"===n[0]?{value:0,rest:e.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:e.slice(n[0].length)}:null}function Is(t,e){return Ps(_s,t,e)}function As(t,e,n){switch(t){case 1:return Ps(gs,e,n);case 2:return Ps(ms,e,n);case 3:return Ps(ys,e,n);case 4:return Ps(vs,e,n);default:return Ps(new RegExp("^\\d{1,"+t+"}"),e,n)}}function Ls(t,e,n){switch(t){case 1:return Ps(xs,e,n);case 2:return Ps(ws,e,n);case 3:return Ps(bs,e,n);case 4:return Ps(Ms,e,n);default:return Ps(new RegExp("^-?\\d{1,"+t+"}"),e,n)}}function Rs(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Ns(t,e){var n,i=e>0,r=i?e:1-e;if(r<=50)n=t||100;else{var o=r+50;n=t+100*Math.floor(o/100)-(t>=o%100?100:0)}return i?n:1-n}var Ds=[31,28,31,30,31,30,31,31,30,31,30,31],Fs=[31,29,31,30,31,30,31,31,30,31,30,31];function js(t){return t%400==0||t%4==0&&t%100!=0}var zs={G:{priority:140,parse:function(t,e,n,i){switch(e){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}},set:function(t,e,n,i){return e.era=n,t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(t,e,n,i){var r=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return As(4,t,r);case"yo":return n.ordinalNumber(t,{unit:"year",valueCallback:r});default:return As(e.length,t,r)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,i){var r=t.getUTCFullYear();if(n.isTwoDigitYear){var o=Ns(n.year,r);return t.setUTCFullYear(o,0,1),t.setUTCHours(0,0,0,0),t}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(t,e,n,i){var r=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return As(4,t,r);case"Yo":return n.ordinalNumber(t,{unit:"year",valueCallback:r});default:return As(e.length,t,r)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,i){var r=Ka(t,i);if(n.isTwoDigitYear){var o=Ns(n.year,r);return t.setUTCFullYear(o,0,i.firstWeekContainsDate),t.setUTCHours(0,0,0,0),Xa(t,i)}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,i.firstWeekContainsDate),t.setUTCHours(0,0,0,0),Xa(t,i)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(t,e,n,i){return Ls("R"===e?4:e.length,t)},set:function(t,e,n,i){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),$a(r)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(t,e,n,i){return Ls("u"===e?4:e.length,t)},set:function(t,e,n,i){return t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(t,e,n,i){switch(e){case"Q":case"QQ":return As(e.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,i){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(t,e,n,i){switch(e){case"q":case"qq":return As(e.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,i){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(t,e,n,i){var r=function(t){return t-1};switch(e){case"M":return Ps(os,t,r);case"MM":return As(2,t,r);case"Mo":return n.ordinalNumber(t,{unit:"month",valueCallback:r});case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,i){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(t,e,n,i){var r=function(t){return t-1};switch(e){case"L":return Ps(os,t,r);case"LL":return As(2,t,r);case"Lo":return n.ordinalNumber(t,{unit:"month",valueCallback:r});case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,i){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(t,e,n,i){switch(e){case"w":return Ps(hs,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,i){return Xa(function(t,e,n){jo(2,arguments);var i=zo(t),r=ca(e),o=rs(i,n)-r;return i.setUTCDate(i.getUTCDate()-7*o),i}(t,n,i),i)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(t,e,n,i){switch(e){case"I":return Ps(hs,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,i){return $a(function(t,e){jo(2,arguments);var n=zo(t),i=ca(e),r=es(n)-i;return n.setUTCDate(n.getUTCDate()-7*r),n}(t,n,i),i)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(t,e,n,i){switch(e){case"d":return Ps(as,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return As(e.length,t)}},validate:function(t,e,n){var i=js(t.getUTCFullYear()),r=t.getUTCMonth();return i?e>=1&&e<=Fs[r]:e>=1&&e<=Ds[r]},set:function(t,e,n,i){return t.setUTCDate(n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(t,e,n,i){switch(e){case"D":case"DD":return Ps(ss,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return As(e.length,t)}},validate:function(t,e,n){return js(t.getUTCFullYear())?e>=1&&e<=366:e>=1&&e<=365},set:function(t,e,n,i){return t.setUTCMonth(0,n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(t,e,n,i){switch(e){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,i){return(t=Za(t,n,i)).setUTCHours(0,0,0,0),t},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(t,e,n,i){var r=function(t){var e=7*Math.floor((t-1)/7);return(t+i.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return As(e.length,t,r);case"eo":return n.ordinalNumber(t,{unit:"day",valueCallback:r});case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,i){return(t=Za(t,n,i)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(t,e,n,i){var r=function(t){var e=7*Math.floor((t-1)/7);return(t+i.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return As(e.length,t,r);case"co":return n.ordinalNumber(t,{unit:"day",valueCallback:r});case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,i){return(t=Za(t,n,i)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(t,e,n,i){var r=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return As(e.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return n.day(t,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(t,{width:"short",context:"formatting",valueCallback:r})||n.day(t,{width:"narrow",context:"formatting",valueCallback:r});case"iiiii":return n.day(t,{width:"narrow",context:"formatting",valueCallback:r});case"iiiiii":return n.day(t,{width:"short",context:"formatting",valueCallback:r})||n.day(t,{width:"narrow",context:"formatting",valueCallback:r});default:return n.day(t,{width:"wide",context:"formatting",valueCallback:r})||n.day(t,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(t,{width:"short",context:"formatting",valueCallback:r})||n.day(t,{width:"narrow",context:"formatting",valueCallback:r})}},validate:function(t,e,n){return e>=1&&e<=7},set:function(t,e,n,i){return t=function(t,e){jo(2,arguments);var n=ca(e);n%7==0&&(n-=7);var i=1,r=zo(t),o=r.getUTCDay(),a=((n%7+7)%7<i?7:0)+n-o;return r.setUTCDate(r.getUTCDate()+a),r}(t,n,i),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(t,e,n,i){switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,i){return t.setUTCHours(Rs(n),0,0,0),t},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(t,e,n,i){switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,i){return t.setUTCHours(Rs(n),0,0,0),t},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(t,e,n,i){switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,i){return t.setUTCHours(Rs(n),0,0,0),t},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(t,e,n,i){switch(e){case"h":return Ps(fs,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=12},set:function(t,e,n,i){var r=t.getUTCHours()>=12;return r&&n<12?t.setUTCHours(n+12,0,0,0):r||12!==n?t.setUTCHours(n,0,0,0):t.setUTCHours(0,0,0,0),t},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(t,e,n,i){switch(e){case"H":return Ps(ls,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=23},set:function(t,e,n,i){return t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(t,e,n,i){switch(e){case"K":return Ps(us,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,i){return t.getUTCHours()>=12&&n<12?t.setUTCHours(n+12,0,0,0):t.setUTCHours(n,0,0,0),t},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(t,e,n,i){switch(e){case"k":return Ps(cs,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=24},set:function(t,e,n,i){var r=n<=24?n%24:n;return t.setUTCHours(r,0,0,0),t},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(t,e,n,i){switch(e){case"m":return Ps(ps,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,i){return t.setUTCMinutes(n,0,0),t},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(t,e,n,i){switch(e){case"s":return Ps(ds,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return As(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,i){return t.setUTCSeconds(n,0),t},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(t,e,n,i){return As(e.length,t,(function(t){return Math.floor(t*Math.pow(10,3-e.length))}))},set:function(t,e,n,i){return t.setUTCMilliseconds(n),t},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(t,e,n,i){switch(e){case"X":return ks(Cs,t);case"XX":return ks(Ss,t);case"XXXX":return ks(Es,t);case"XXXXX":return ks(Os,t);default:return ks(Ts,t)}},set:function(t,e,n,i){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(t,e,n,i){switch(e){case"x":return ks(Cs,t);case"xx":return ks(Ss,t);case"xxxx":return ks(Es,t);case"xxxxx":return ks(Os,t);default:return ks(Ts,t)}},set:function(t,e,n,i){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(t,e,n,i){return Is(t)},set:function(t,e,n,i){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(t,e,n,i){return Is(t)},set:function(t,e,n,i){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}};const Bs=zs;var Us=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hs=/^'([^]*?)'?$/,Ws=/''/g,Vs=/\S/,qs=/[a-zA-Z]/;function Ys(t,e){if(e.timestampIsSet)return t;var n=new Date(0);return n.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),n.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n}function Xs(t){return t.match(Hs)[1].replace(Ws,"'")}var Ks={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Zs=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Qs=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Js(t){var e,n={},i=t.split(Ks.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?e=i[0]:(n.date=i[0],e=i[1],Ks.timeZoneDelimiter.test(n.date)&&(n.date=t.split(Ks.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var r=Ks.timezone.exec(e);r?(n.time=e.replace(r[1],""),n.timezone=r[1]):n.time=e}return n}function th(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};var r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:null===o?r:100*o,restDateString:t.slice((i[1]||i[2]).length)}}function eh(t,e){if(null===e)return new Date(NaN);var n=t.match(Zs);if(!n)return new Date(NaN);var i=!!n[4],r=nh(n[1]),o=nh(n[2])-1,a=nh(n[3]),s=nh(n[4]),h=nh(n[5])-1;if(i)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,s,h)?function(t,e,n){var i=new Date(0);i.setUTCFullYear(t,0,4);var r=7*(e-1)+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}(e,s,h):new Date(NaN);var l=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(ah[e]||(sh(t)?29:28))}(e,o,a)&&function(t,e){return e>=1&&e<=(sh(t)?366:365)}(e,r)?(l.setUTCFullYear(e,o,Math.max(r,a)),l):new Date(NaN)}function nh(t){return t?parseInt(t):1}function ih(t){var e=t.match($s);if(!e)return NaN;var n=rh(e[1]),i=rh(e[2]),r=rh(e[3]);return function(t,e,n){return 24===t?0===e&&0===n:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(n,i,r)?n*ea+i*ta+1e3*r:NaN}function rh(t){return t&&parseFloat(t.replace(",","."))||0}function oh(t){if("Z"===t)return 0;var e=t.match(Qs);if(!e)return 0;var n="+"===e[1]?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,r)?n*(i*ea+r*ta):NaN}var ah=[31,null,31,30,31,30,31,31,30,31,30,31];function sh(t){return t%400==0||t%4==0&&t%100!=0}var hh=864e5;function lh(t,e){for(var n=t<0?"-":"",i=Math.abs(t).toString();i.length<e;)i="0"+i;return n+i}var ch={y:function(t,e){var n=t.getUTCFullYear(),i=n>0?n:1-n;return lh("yy"===e?i%100:i,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):lh(n+1,2)},d:function(t,e){return lh(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return lh(t.getUTCHours()%12||12,e.length)},H:function(t,e){return lh(t.getUTCHours(),e.length)},m:function(t,e){return lh(t.getUTCMinutes(),e.length)},s:function(t,e){return lh(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,i=t.getUTCMilliseconds();return lh(Math.floor(i*Math.pow(10,n-3)),e.length)}};const uh=ch;var fh={G:function(t,e,n){var i=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var i=t.getUTCFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return uh.y(t,e)},Y:function(t,e,n,i){var r=Ka(t,i),o=r>0?r:1-r;return"YY"===e?lh(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):lh(o,e.length)},R:function(t,e){return lh(Qa(t),e.length)},u:function(t,e){return lh(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return lh(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return lh(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){var i=t.getUTCMonth();switch(e){case"M":case"MM":return uh.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){var i=t.getUTCMonth();switch(e){case"L":return String(i+1);case"LL":return lh(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){var r=rs(t,i);return"wo"===e?n.ordinalNumber(r,{unit:"week"}):lh(r,e.length)},I:function(t,e,n){var i=es(t);return"Io"===e?n.ordinalNumber(i,{unit:"week"}):lh(i,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):uh.d(t,e)},D:function(t,e,n){var i=function(t){jo(1,arguments);var e=zo(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),r=n-i;return Math.floor(r/hh)+1}(t);return"Do"===e?n.ordinalNumber(i,{unit:"dayOfYear"}):lh(i,e.length)},E:function(t,e,n){var i=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){var r=t.getUTCDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return lh(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){var r=t.getUTCDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return lh(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){var i=t.getUTCDay(),r=0===i?7:i;switch(e){case"i":return String(r);case"ii":return lh(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){var i=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var i,r=t.getUTCHours();switch(i=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){var i,r=t.getUTCHours();switch(i=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var i=t.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return uh.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):uh.H(t,e)},K:function(t,e,n){var i=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(i,{unit:"hour"}):lh(i,e.length)},k:function(t,e,n){var i=t.getUTCHours();return 0===i&&(i=24),"ko"===e?n.ordinalNumber(i,{unit:"hour"}):lh(i,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):uh.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):uh.s(t,e)},S:function(t,e){return uh.S(t,e)},X:function(t,e,n,i){var r=(i._originalDate||t).getTimezoneOffset();if(0===r)return"Z";switch(e){case"X":return dh(r);case"XXXX":case"XX":return gh(r);default:return gh(r,":")}},x:function(t,e,n,i){var r=(i._originalDate||t).getTimezoneOffset();switch(e){case"x":return dh(r);case"xxxx":case"xx":return gh(r);default:return gh(r,":")}},O:function(t,e,n,i){var r=(i._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ph(r,":");default:return"GMT"+gh(r,":")}},z:function(t,e,n,i){var r=(i._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ph(r,":");default:return"GMT"+gh(r,":")}},t:function(t,e,n,i){var r=i._originalDate||t;return lh(Math.floor(r.getTime()/1e3),e.length)},T:function(t,e,n,i){return lh((i._originalDate||t).getTime(),e.length)}};function ph(t,e){var n=t>0?"-":"+",i=Math.abs(t),r=Math.floor(i/60),o=i%60;if(0===o)return n+String(r);var a=e||"";return n+String(r)+a+lh(o,2)}function dh(t,e){return t%60==0?(t>0?"-":"+")+lh(Math.abs(t)/60,2):gh(t,e)}function gh(t,e){var n=e||"",i=t>0?"-":"+",r=Math.abs(t);return i+lh(Math.floor(r/60),2)+n+lh(r%60,2)}const mh=fh;var yh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_h=/^'([^]*?)'?$/,xh=/''/g,wh=/[a-zA-Z]/;function bh(t,e,n){jo(2,arguments);var i=String(e),r=n||{},o=r.locale||Da,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:ca(a),h=null==r.firstWeekContainsDate?s:ca(r.firstWeekContainsDate);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=o.options&&o.options.weekStartsOn,c=null==l?0:ca(l),u=null==r.weekStartsOn?c:ca(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=zo(t);if(!la(f))throw new RangeError("Invalid time value");var p=Xo(f),d=ja(f,p),g={firstWeekContainsDate:h,weekStartsOn:u,locale:o,_originalDate:f},m=i.match(vh).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,Ga[e])(t,o.formatLong,g):t})).join("").match(yh).map((function(n){if("''"===n)return"'";var i=n[0];if("'"===i)return Mh(n);var a=mh[i];if(a)return!r.useAdditionalWeekYearTokens&&qa(n)&&Ya(n,e,t),!r.useAdditionalDayOfYearTokens&&Va(n)&&Ya(n,e,t),a(d,n,o.localize,g);if(i.match(wh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return n})).join("");return m}function Mh(t){return t.match(_h)[1].replace(xh,"'")}var Ch=36e5;function Sh(t,e){jo(1,arguments);var n=e||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,o=null==r?0:ca(r),a=null==n.weekStartsOn?o:ca(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=zo(t),h=s.getDay(),l=(h<a?7:0)+h-a;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}const Eh={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Hn._date.override({_id:"date-fns",formats:function(){return Eh},parse:function(t,e){if(null==t)return null;const n=typeof t;return"number"===n||t instanceof Date?t=zo(t):"string"===n&&(t="string"==typeof e?function(t,e,n,i){jo(3,arguments);var r=String(t),o=String(e),a=i||{},s=a.locale||Da;if(!s.match)throw new RangeError("locale must contain match property");var h=s.options&&s.options.firstWeekContainsDate,l=null==h?1:ca(h),c=null==a.firstWeekContainsDate?l:ca(a.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=s.options&&s.options.weekStartsOn,f=null==u?0:ca(u),p=null==a.weekStartsOn?f:ca(a.weekStartsOn);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)return""===r?zo(n):new Date(NaN);var d,g={firstWeekContainsDate:c,weekStartsOn:p,locale:s},m=[{priority:10,subPriority:-1,set:Ys,index:0}],y=o.match(Gs).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,Ga[e])(t,s.formatLong,g):t})).join("").match(Us),v=[];for(d=0;d<y.length;d++){var _=y[d];!a.useAdditionalWeekYearTokens&&qa(_)&&Ya(_,o,t),!a.useAdditionalDayOfYearTokens&&Va(_)&&Ya(_,o,t);var x=_[0],w=Bs[x];if(w){var b=w.incompatibleTokens;if(Array.isArray(b)){for(var M=void 0,C=0;C<v.length;C++){var S=v[C].token;if(-1!==b.indexOf(S)||S===x){M=v[C];break}}if(M)throw new RangeError("The format string mustn't contain `".concat(M.fullToken,"` and `").concat(_,"` at the same time"))}else if("*"===w.incompatibleTokens&&v.length)throw new RangeError("The format string mustn't contain `".concat(_,"` and any other token at the same time"));v.push({token:x,fullToken:_});var E=w.parse(r,_,s.match,g);if(!E)return new Date(NaN);m.push({priority:w.priority,subPriority:w.subPriority||0,set:w.set,validate:w.validate,value:E.value,index:m.length}),r=E.rest}else{if(x.match(qs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if("''"===_?_="'":"'"===x&&(_=Xs(_)),0!==r.indexOf(_))return new Date(NaN);r=r.slice(_.length)}}if(r.length>0&&Vs.test(r))return new Date(NaN);var T=m.map((function(t){return t.priority})).sort((function(t,e){return e-t})).filter((function(t,e,n){return n.indexOf(t)===e})).map((function(t){return m.filter((function(e){return e.priority===t})).sort((function(t,e){return e.subPriority-t.subPriority}))})).map((function(t){return t[0]})),O=zo(n);if(isNaN(O))return new Date(NaN);var P=ja(O,Xo(O)),k={};for(d=0;d<T.length;d++){var I=T[d];if(I.validate&&!I.validate(P,I.value,g))return new Date(NaN);var A=I.set(P,k,I.value,g);A[0]?(P=A[0],za(k,A[1])):P=A}return P}(t,e,new Date,this.options):function(t,e){jo(1,arguments);var n=e||{},i=null==n.additionalDigits?2:ca(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var r,o=Js(t);if(o.date){var a=th(o.date,i);r=eh(a.restDateString,a.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var s,h=r.getTime(),l=0;if(o.time&&(l=ih(o.time),isNaN(l)))return new Date(NaN);if(!o.timezone){var c=new Date(h+l),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return s=oh(o.timezone),isNaN(s)?new Date(NaN):new Date(h+l+s)}(t,this.options)),la(t)?t.getTime():null},format:function(t,e){return bh(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return Fa(t,e);case"second":return function(t,e){jo(2,arguments);var n=ca(e);return Fa(t,1e3*n)}(t,e);case"minute":return function(t,e){jo(2,arguments);var n=ca(e);return Fa(t,6e4*n)}(t,e);case"hour":return function(t,e){jo(2,arguments);var n=ca(e);return Fa(t,n*Ch)}(t,e);case"day":return ua(t,e);case"week":return function(t,e){jo(2,arguments);var n=ca(e);return ua(t,7*n)}(t,e);case"month":return pa(t,e);case"quarter":return function(t,e){jo(2,arguments);var n=ca(e);return pa(t,3*n)}(t,e);case"year":return ya(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return na(t,e);case"second":return sa(t,e);case"minute":return aa(t,e);case"hour":return oa(t,e);case"day":return Jo(t,e);case"week":return function(t,e,n){jo(2,arguments);var i=Jo(t,e)/7;return ra(null==n?void 0:n.roundingMethod)(i)}(t,e);case"month":return Yo(t,e);case"quarter":return function(t,e,n){jo(2,arguments);var i=Yo(t,e)/3;return ra(null==n?void 0:n.roundingMethod)(i)}(t,e);case"year":return Go(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return function(t){jo(1,arguments);var e=zo(t);return e.setMilliseconds(0),e}(t);case"minute":return function(t){jo(1,arguments);var e=zo(t);return e.setSeconds(0,0),e}(t);case"hour":return function(t){jo(1,arguments);var e=zo(t);return e.setMinutes(0,0,0),e}(t);case"day":return Ko(t);case"week":return Sh(t);case"isoWeek":return Sh(t,{weekStartsOn:+n});case"month":return va(t);case"quarter":return function(t){jo(1,arguments);var e=zo(t),n=e.getMonth(),i=n-n%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}(t);case"year":return ma(t);default:return t}},endOf:function(t,e){switch(e){case"second":return function(t){jo(1,arguments);var e=zo(t);return e.setMilliseconds(999),e}(t);case"minute":return function(t){jo(1,arguments);var e=zo(t);return e.setSeconds(59,999),e}(t);case"hour":return function(t){jo(1,arguments);var e=zo(t);return e.setMinutes(59,59,999),e}(t);case"day":return Wo(t);case"week":return function(t,e){jo(1,arguments);var n=e||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,o=null==r?0:ca(r),a=null==n.weekStartsOn?o:ca(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=zo(t),h=s.getDay(),l=6+(h<a?-7:0)-(h-a);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}(t);case"month":return Vo(t);case"quarter":return function(t){jo(1,arguments);var e=zo(t),n=e.getMonth(),i=n-n%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}(t);case"year":return function(t){jo(1,arguments);var e=zo(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}(t);default:return t}}});const Th=t=>t.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3}),Oh=t=>bh(new Date(t),"yyyy-MM-dd HH:mm:ss");function Ph(){return Ph=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ph.apply(this,arguments)}var kh={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Ih=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(kh)};Ph(Ih,kh,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var Ah=a(776);function Lh(t){return"number"==typeof t}function Rh(t){return!(!t||"object"!=typeof t||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function Nh(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function Dh(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function Fh(t){return t&&!0===t.constructor.prototype.isUnit||!1}function jh(t){return"string"==typeof t}var zh=Array.isArray;function Bh(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function Uh(t){return Array.isArray(t)||Bh(t)}function Gh(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Hh(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Wh(t){return t&&!0===t.constructor.prototype.isRange||!1}function Vh(t){return t&&!0===t.constructor.prototype.isIndex||!1}function qh(t){return"boolean"==typeof t}function Yh(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function Xh(t){return t&&!0===t.constructor.prototype.isHelp||!1}function Kh(t){return"function"==typeof t}function Zh(t){return t instanceof Date}function $h(t){return t instanceof RegExp}function Qh(t){return!(!t||"object"!=typeof t||t.constructor!==Object||Nh(t)||Dh(t))}function Jh(t){return null===t}function tl(t){return void 0===t}function el(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function nl(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function il(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function rl(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function ol(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function al(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function sl(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function hl(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function ll(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function cl(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function ul(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function fl(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function pl(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function dl(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function gl(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function ml(t){return t&&!0===t.constructor.prototype.isChain||!1}function yl(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":Rh(t)?"BigNumber":Nh(t)?"Complex":Dh(t)?"Fraction":Bh(t)?"Matrix":Fh(t)?"Unit":Vh(t)?"Index":Wh(t)?"Range":Yh(t)?"ResultSet":cl(t)?t.type:ml(t)?"Chain":Xh(t)?"Help":"Object":"function"===e?"Function":e}function vl(t){var e=typeof t;if("number"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return vl(t)}));if(t instanceof Date)return new Date(t.valueOf());if(Rh(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return function(t,e){var n={};for(var i in t)wl(t,i)&&(n[i]=e(t[i]));return n}(t,vl)}function _l(t,e){for(var n in e)wl(e,n)&&(t[n]=e[n]);return t}function xl(t,e){var n,i,r;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(i=0,r=t.length;i<r;i++)if(!xl(t[i],e[i]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!xl(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}return t===e}function wl(t,e){return t&&Object.hasOwnProperty.call(t,e)}function bl(t,e,n,i){function r(i){var r=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i],o=t[r];void 0!==o&&(n[r]=o)}return n}(i,e.map(Ml));return function(t,e,n){if(!e.filter((t=>!function(t){return t&&"?"===t[0]}(t))).every((t=>void 0!==n[t]))){var i=e.filter((t=>void 0===n[t]));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map((t=>'"'.concat(t,'"'))).join(", "),"."))}}(t,e,i),n(r)}return r.isFactory=!0,r.fn=t,r.dependencies=e.slice().sort(),i&&(r.meta=i),r}function Ml(t){return t&&"?"===t[0]?t.slice(1):t}var Cl=bl("BigNumber",["?on","config"],(t=>{var{on:e,config:n}=t,i=Ah.clone({precision:n.precision,modulo:Ah.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(t){return new i(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&i.config({precision:t.precision})})),i}),{isClass:!0}),Sl=a(977);function El(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}Math.sign,Math.log2,Math.log10,Math.log1p,Math.cbrt,Math.expm1;function Tl(t,e,n){var i={2:"0b",8:"0o",16:"0x"}[e],r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!El(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!El(t))throw new Error("Value must be an integer");t<0&&(t+=2**n),r="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(r)}function Ol(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n,i,r="auto";if(e&&(e.notation&&(r=e.notation),Lh(e)?n=e:Lh(e.precision)&&(n=e.precision),e.wordSize&&"number"!=typeof(i=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return kl(t,n);case"exponential":return Il(t,n);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Al(Pl(t),e),i=n.exponent,r=n.coefficients,o=i%3==0?i:i<0?i-3-i%3:i-i%3;if(Lh(e))for(;e>r.length||i-o+1>r.length;)r.push(0);else for(var a=Math.abs(i-o)-(r.length-1),s=0;s<a;s++)r.push(0);for(var h=Math.abs(i-o),l=1;h>0;)l++,h--;var c=r.slice(l).join(""),u=Lh(e)&&c.length||c.match(/[1-9]/)?"."+c:"",f=r.slice(0,l).join("")+u+"e"+(i>=0?"+":"")+o.toString();return n.sign+f}(t,n);case"bin":return Tl(t,2,i);case"oct":return Tl(t,8,i);case"hex":return Tl(t,16,i);case"auto":return function(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var i=n&&void 0!==n.lowerExp?n.lowerExp:-3,r=n&&void 0!==n.upperExp?n.upperExp:5,o=Pl(t),a=e?Al(o,e):o;if(a.exponent<i||a.exponent>=r)return Il(t,e);var s=a.coefficients,h=a.exponent;s.length<e&&(s=s.concat(Ll(e-s.length))),s=s.concat(Ll(h-s.length+1+(s.length<e?e-s.length:0)));var l=h>0?h:0;return l<(s=Ll(-h).concat(s)).length-1&&s.splice(l+1,0,"."),a.sign+s.join("")}(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Pl(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],i=e[2],r=parseFloat(e[4]||"0"),o=i.indexOf(".");r+=-1!==o?o-1:i.length-1;var a=i.replace(".","").replace(/^0*/,(function(t){return r-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===a.length&&(a.push(0),r++),{sign:n,coefficients:a,exponent:r}}function kl(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Pl(t),i="number"==typeof e?Al(n,n.exponent+1+e):n,r=i.coefficients,o=i.exponent+1,a=o+(e||0);return r.length<a&&(r=r.concat(Ll(a-r.length))),o<0&&(r=Ll(1-o).concat(r),o=1),o<r.length&&r.splice(o,0,0===o?"0.":"."),i.sign+r.join("")}function Il(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Pl(t),i=e?Al(n,e):n,r=i.coefficients,o=i.exponent;r.length<e&&(r=r.concat(Ll(e-r.length)));var a=r.shift();return i.sign+a+(r.length>0?"."+r.join(""):"")+"e"+(o>=0?"+":"")+o}function Al(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},i=n.coefficients;e<=0;)i.unshift(0),n.exponent++,e++;if(i.length>e&&i.splice(e,i.length-e)[0]>=5){var r=e-1;for(i[r]++;10===i[r];)i.pop(),0===r&&(i.unshift(0),n.exponent++,r++),i[--r]++}return n}function Ll(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}var Rl=Number.EPSILON||2220446049250313e-31;function Nl(t,e,n){if(null==n)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var i=Math.abs(t-e);return i<Rl||i<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}Math.acosh,Math.asinh,Math.atanh,Math.cosh,Math.sinh;var Dl=(Math.tanh,bl("Complex",[],(()=>(Sl.prototype.type="Complex",Sl.prototype.isComplex=!0,Sl.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Sl.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Sl.prototype.format=function(t){var e=this.im,n=this.re,i=Ol(this.re,t),r=Ol(this.im,t),o=Lh(t)?t:t?t.precision:null;if(null!==o){var a=Math.pow(10,-o);Math.abs(n/e)<a&&(n=0),Math.abs(e/n)<a&&(e=0)}return 0===e?i:0===n?1===e?"i":-1===e?"-i":r+"i":e<0?-1===e?i+" - i":i+" - "+r.substring(1)+"i":1===e?i+" + i":i+" + "+r+"i"},Sl.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return Sl(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],i=arguments[1];if(Lh(n)){if(Fh(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),Lh(i))return new Sl({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Sl.prototype.valueOf=Sl.prototype.toString,Sl.fromJSON=function(t){return new Sl(t)},Sl.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Sl)),{isClass:!0}));function Fl(t){var e=0,n=1,i=Object.create(null),r=Object.create(null),o=0,a=function(t){var a=r[t];if(a&&(delete i[a],delete r[t],--e,n===a)){if(!e)return o=0,void(n=1);for(;!hasOwnProperty.call(i,++n););}};return t=Math.abs(t),{hit:function(s){var h=r[s],l=++o;if(i[l]=s,r[s]=l,!h){if(++e<=t)return;return s=i[n],a(s),s}if(delete i[h],n===h)for(;!hasOwnProperty.call(i,++n););},delete:a,clear:function(){e=o=0,n=1,i=Object.create(null),r=Object.create(null)}}}function jl(t){var{hasher:e,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,e=null==e?JSON.stringify:e,function i(){"object"!=typeof i.cache&&(i.cache={values:new Map,lru:Fl(n||Number.POSITIVE_INFINITY)});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=e(r);if(i.cache.values.has(a))return i.cache.lru.hit(a),i.cache.values.get(a);var s=t.apply(t,r);return i.cache.values.set(a,s),i.cache.values.delete(i.cache.lru.hit(a)),s}}jl((function(t){return new t(1).exp()}),{hasher:Bl}),jl((function(t){return new t(1).plus(new t(5).sqrt()).div(2)}),{hasher:Bl});var zl=jl((function(t){return t.acos(-1)}),{hasher:Bl});function Bl(t){return t[0].precision}function Ul(t,e){return bl(t,["config","BigNumber"],(t=>{var{config:n,BigNumber:i}=t;return"BigNumber"===n.number?new i(e):e}))}jl((function(t){return zl(t).times(2)}),{hasher:Bl}),Math.PI,Math.PI,Math.E,Ul("fineStructure",.0072973525693),Ul("weakMixingAngle",.2229),Ul("efimovFactor",22.7),Ul("sackurTetrode",-1.16487052358);var Gl=a(628),Hl=bl("Fraction",[],(()=>(Gl.prototype.type="Fraction",Gl.prototype.isFraction=!0,Gl.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Gl.fromJSON=function(t){return new Gl(t)},Gl)),{isClass:!0}),Wl=bl("Matrix",[],(()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0});function Vl(t,e,n){var i=new(0,t.constructor)(2),r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!El(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),r="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(r);case 8:return"".concat(t.toOctal()).concat(r);case 16:return"".concat(t.toHexadecimal()).concat(r);default:throw new Error("Base ".concat(e," not supported "))}}function ql(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function Yl(t,e){return"number"==typeof t?Ol(t,e):Rh(t)?function(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n,i,r="auto";if(void 0!==e&&(e.notation&&(r=e.notation),"number"==typeof e?n=e:e.precision&&(n=e.precision),e.wordSize&&"number"!=typeof(i=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return function(t,e){return t.toFixed(e)}(t,n);case"exponential":return ql(t,n);case"engineering":return function(t,e){var n=t.e,i=n%3==0?n:n<0?n-3-n%3:n-n%3,r=t.mul(Math.pow(10,-i)),o=r.toPrecision(e);return-1!==o.indexOf("e")&&(o=r.toString()),o+"e"+(n>=0?"+":"")+i.toString()}(t,n);case"bin":return Vl(t,2,i);case"oct":return Vl(t,8,i);case"hex":return Vl(t,16,i);case"auto":var o=e&&void 0!==e.lowerExp?e.lowerExp:-3,a=e&&void 0!==e.upperExp?e.upperExp:5;if(t.isZero())return"0";var s=t.toSignificantDigits(n),h=s.e;return(h>=o&&h<a?s.toFixed():ql(t,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,e):function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t)?e&&"decimal"===e.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?Xl(t,e):jh(t)?'"'+t+'"':"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((n=>'"'+n+'": '+Yl(t[n],e))).join(", ")+"}":String(t)}function Xl(t,e){if(Array.isArray(t)){for(var n="[",i=t.length,r=0;r<i;r++)0!==r&&(n+=", "),n+=Xl(t[r],e);return n+"]"}return Yl(t,e)}function Kl(t,e,n){if(!(this instanceof Kl))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function Zl(t,e,n){if(!(this instanceof Zl))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function $l(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Ql(t,e,n){var i,r=t.length;if(r!==e[n])throw new Kl(r,e[n]);if(n<e.length-1){var o=n+1;for(i=0;i<r;i++){var a=t[i];if(!Array.isArray(a))throw new Kl(e.length-1,e.length,"<");Ql(t[i],e,o)}}else for(i=0;i<r;i++)if(Array.isArray(t[i]))throw new Kl(e.length+1,e.length,">")}function Jl(t,e){if(0===e.length){if(Array.isArray(t))throw new Kl(t.length,0)}else Ql(t,e,0)}function tc(t,e){if(!Lh(t)||!El(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new Zl(t,e)}function ec(t,e,n){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!Lh(t)||!El(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Yl(e)+")")})),nc(t,e,0,void 0!==n?n:0),t}function nc(t,e,n,i){var r,o,a=t.length,s=e[n],h=Math.min(a,s);if(t.length=s,n<e.length-1){var l=n+1;for(r=0;r<h;r++)o=t[r],Array.isArray(o)||(o=[o],t[r]=o),nc(o,e,l,i);for(r=h;r<s;r++)o=[],t[r]=o,nc(o,e,l,i)}else{for(r=0;r<h;r++)for(;Array.isArray(t[r]);)t[r]=t[r][0];for(r=h;r<s;r++)t[r]=i}}function ic(t,e){var n=rc(t),i=t.slice(),r=t.indexOf(-1);if(t.indexOf(-1,r+1)>=0)throw new Error("More than one wildcard in sizes");if(r>=0){if(e%n!=0)throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);i[r]=-e/n}return i}function rc(t){return t.reduce(((t,e)=>t*e),1)}function oc(t,e,n,i){var r=i||$l(t);if(n)for(var o=0;o<n;o++)t=[t],r.unshift(1);for(t=ac(t,e,0);r.length<e;)r.push(1);return t}function ac(t,e,n){var i,r;if(Array.isArray(t)){var o=n+1;for(i=0,r=t.length;i<r;i++)t[i]=ac(t[i],e,o)}else for(var a=n;a<e;a++)t=[t];return t}function sc(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(n){Array.isArray(n)?n.forEach(t):e.push(n)})),e}function hc(t,e){for(var n,i=0,r=0;r<t.length;r++){var o=t[r],a=Array.isArray(o);if(0===r&&a&&(i=o.length),a&&o.length!==i)return;var s=a?hc(o,e):e(o);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}Kl.prototype=new RangeError,Kl.prototype.constructor=RangeError,Kl.prototype.name="DimensionError",Kl.prototype.isDimensionError=!0,Zl.prototype=new RangeError,Zl.prototype.constructor=RangeError,Zl.prototype.name="IndexError",Zl.prototype.isIndexError=!0;var lc=bl("DenseMatrix",["Matrix"],(t=>{var{Matrix:e}=t;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!jh(e))throw new Error("Invalid datatype: "+e);if(Bh(t))"DenseMatrix"===t.type?(this._data=vl(t._data),this._size=vl(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&zh(t.data)&&zh(t.size))this._data=t.data,this._size=t.size,Jl(this._data,this._size),this._datatype=e||t.datatype;else if(zh(t))this._data=l(t),this._size=$l(this._data),Jl(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+yl(t)+")");this._data=[],this._size=[0],this._datatype=e}}function i(t,e){if(!Vh(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var i=e.size();if(i.length!==t._size.length)throw new Kl(i.length,t._size.length);for(var o=e.min(),a=e.max(),s=0,h=t._size.length;s<h;s++)tc(o[s],t._size[s]),tc(a[s],t._size[s]);return new n(r(t._data,e,i.length,0),t._datatype)}function r(t,e,n,i){var o=i===n-1,a=e.dimension(i);return o?a.map((function(e){return tc(e,t.length),t[e]})).valueOf():a.map((function(o){return tc(o,t.length),r(t[o],e,n,i+1)})).valueOf()}function o(t,e,n,i){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var r,o=e.size(),s=e.isScalar();if(Bh(n)?(r=n.size(),n=n.valueOf()):r=$l(n),s){if(0!==r.length)throw new TypeError("Scalar expected");t.set(e.min(),n,i)}else{if(o.length<t._size.length)throw new Kl(o.length,t._size.length,"<");if(r.length<o.length){for(var l=0,c=0;1===o[l]&&1===r[l];)l++;for(;1===o[l];)c++,l++;n=oc(n,o.length,c,r)}if(!xl(o,r))throw new Kl(o,r,">");var u=e.max().map((function(t){return t+1}));h(t,u,i);var f=o.length;a(t._data,e,n,f,0)}return t}function a(t,e,n,i,r){var o=r===i-1,s=e.dimension(r);o?s.forEach((function(e,i){tc(e),t[e]=n[i[0]]})):s.forEach((function(o,s){tc(o),a(t[o],e,n[s[0]],i,r+1)}))}function s(t,e,n){if(0===e.length){for(var i=t._data;zh(i);)i=i[0];return i}return t._size=e.slice(0),t._data=ec(t._data,t._size,n),t}function h(t,e,n){for(var i=t._size.slice(0),r=!1;i.length<e.length;)i.push(0),r=!0;for(var o=0,a=e.length;o<a;o++)e[o]>i[o]&&(i[o]=e[o],r=!0);r&&s(t,i,n)}function l(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];zh(i)?t[e]=l(i):i&&!0===i.isMatrix&&(t[e]=l(i.valueOf()))}return t}return n.prototype=new e,n.prototype.createDenseMatrix=function(t,e){return new n(t,e)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return hc(this._data,yl)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(t,e){return new n(t,e)},n.prototype.subset=function(t,e,n){switch(arguments.length){case 1:return i(this,t);case 2:case 3:return o(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(t){if(!zh(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Kl(t.length,this._size.length);for(var e=0;e<t.length;e++)tc(t[e],this._size[e]);for(var n=this._data,i=0,r=t.length;i<r;i++){var o=t[i];tc(o,n.length),n=n[o]}return n},n.prototype.set=function(t,e,n){if(!zh(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new Kl(t.length,this._size.length,"<");var i,r,o,a=t.map((function(t){return t+1}));h(this,a,n);var s=this._data;for(i=0,r=t.length-1;i<r;i++)tc(o=t[i],s.length),s=s[o];return tc(o=t[t.length-1],s.length),s[o]=e,this},n.prototype.resize=function(t,e,n){if(!Uh(t))throw new TypeError("Array or Matrix expected");var i=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));return s(n?this.clone():this,i,e)},n.prototype.reshape=function(t,e){var n=e?this.clone():this;n._data=function(t,e){var n=sc(t),i=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Kl(0,i,"!=");var r=rc(e=ic(e,i));if(i!==r)throw new Kl(r,i,"!=");try{return function(t,e){for(var n,i=t,r=e.length-1;r>0;r--){var o=e[r];n=[];for(var a=i.length/o,s=0;s<a;s++)n.push(i.slice(s*o,(s+1)*o));i=n}return i}(n,e)}catch(t){if(t instanceof Kl)throw new Kl(r,i,"!=");throw t}}(n._data,t);var i=n._size.reduce(((t,e)=>t*e));return n._size=ic(t,i),n},n.prototype.clone=function(){return new n({data:vl(this._data),size:vl(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(t){var e=this,i=function n(i,r){return zh(i)?i.map((function(t,e){return n(t,r.concat(e))})):t(i,r,e)}(this._data,[]);return new n(i,void 0!==this._datatype?hc(i,yl):void 0)},n.prototype.forEach=function(t){var e=this;!function n(i,r){zh(i)?i.forEach((function(t,e){n(t,r.concat(e))})):t(i,r,e)}(this._data,[])},n.prototype[Symbol.iterator]=function*(){yield*function*t(e,n){if(zh(e))for(var i=0;i<e.length;i++)yield*t(e[i],n.concat(i));else yield{value:e,index:n}}(this._data,[])},n.prototype.rows=function(){var t=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var e=this._data;for(var i of e)t.push(new n([i],this._datatype));return t},n.prototype.columns=function(){var t=this,e=[],i=this.size();if(2!==i.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var r=this._data,o=function(i){var o=r.map((t=>[t[i]]));e.push(new n(o,t._datatype))},a=0;a<i[1];a++)o(a);return e},n.prototype.toArray=function(){return vl(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(t){return Yl(this._data,t)},n.prototype.toString=function(){return Yl(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(t){if(t){if(Rh(t)&&(t=t.toNumber()),!Lh(t)||!El(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,i=t<0?-t:0,r=this._size[0],o=this._size[1],a=Math.min(r-i,o-e),s=[],h=0;h<a;h++)s[h]=this._data[h+i][h+e];return new n({data:s,size:[a],datatype:this._datatype})},n.diagonal=function(t,e,i,r){if(!zh(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(Rh(t)&&(t=t.toNumber()),!Lh(t)||!El(t)||t<1)throw new Error("Size values must be positive integers");return t})),i){if(Rh(i)&&(i=i.toNumber()),!Lh(i)||!El(i))throw new TypeError("The parameter k must be an integer number")}else i=0;var o,a=i>0?i:0,s=i<0?-i:0,h=t[0],l=t[1],c=Math.min(h-s,l-a);if(zh(e)){if(e.length!==c)throw new Error("Invalid value array length");o=function(t){return e[t]}}else if(Bh(e)){var u=e.size();if(1!==u.length||u[0]!==c)throw new Error("Invalid matrix length");o=function(t){return e.get([t])}}else o=function(){return e};r||(r=Rh(o(0))?o(0).mul(0):0);var f=[];if(t.length>0){f=ec(f,t,r);for(var p=0;p<c;p++)f[p+s][p+a]=o(p)}return new n({data:f,size:[h,l]})},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(t,e){if(!(Lh(t)&&El(t)&&Lh(e)&&El(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return tc(t,this._size[0]),tc(e,this._size[0]),n._swapRows(t,e,this._data),this},n._swapRows=function(t,e,n){var i=n[t];n[t]=n[e],n[e]=i},n}),{isClass:!0}),cc=a(287);function uc(t,e){if(pc(t)&&fc(t,e))return t[e];if("function"==typeof t[e]&&function(t,e){return!(null==t||"function"!=typeof t[e]||wl(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)||!wl(gc,e)&&(e in Object.prototype||e in Function.prototype))}(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function fc(t,e){return!(!t||"object"!=typeof t||!wl(dc,e)&&(e in Object.prototype||e in Function.prototype))}function pc(t){return"object"==typeof t&&t&&t.constructor===Object}var dc={length:!0,name:!0},gc={toString:!0,valueOf:!0,toLocaleString:!0};function mc(t){return!!t&&(t instanceof Map||t instanceof class{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return uc(this.wrappedObject,t)}set(t,e){return function(t,e,n){if(pc(t)&&fc(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}(this.wrappedObject,t,e),this}has(t){return function(t,e){return e in t}(this.wrappedObject,t)}}||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}var yc=function(){return yc=cc.create,cc},vc=bl("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var{BigNumber:e,Complex:n,DenseMatrix:i,Fraction:r}=t,o=yc();return o.types=[{name:"number",test:Lh},{name:"Complex",test:Nh},{name:"BigNumber",test:Rh},{name:"Fraction",test:Dh},{name:"Unit",test:Fh},{name:"string",test:jh},{name:"Chain",test:ml},{name:"Array",test:zh},{name:"Matrix",test:Bh},{name:"DenseMatrix",test:Gh},{name:"SparseMatrix",test:Hh},{name:"Range",test:Wh},{name:"Index",test:Vh},{name:"boolean",test:qh},{name:"ResultSet",test:Yh},{name:"Help",test:Xh},{name:"function",test:Kh},{name:"Date",test:Zh},{name:"RegExp",test:$h},{name:"null",test:Jh},{name:"undefined",test:tl},{name:"AccessorNode",test:el},{name:"ArrayNode",test:nl},{name:"AssignmentNode",test:il},{name:"BlockNode",test:rl},{name:"ConditionalNode",test:ol},{name:"ConstantNode",test:al},{name:"FunctionNode",test:hl},{name:"FunctionAssignmentNode",test:sl},{name:"IndexNode",test:ll},{name:"Node",test:cl},{name:"ObjectNode",test:ul},{name:"OperatorNode",test:fl},{name:"ParenthesisNode",test:pl},{name:"RangeNode",test:dl},{name:"SymbolNode",test:gl},{name:"Map",test:mc},{name:"Object",test:Qh}],o.conversions=[{from:"number",to:"BigNumber",convert:function(t){if(e||_c(t),function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(t)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return n||xc(t),new n(t,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(t){return n||xc(t),new n(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return n||xc(t),new n(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){r||wc(t);var e=new r(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||_c(t);try{return new e(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){r||wc(t);try{return new r(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){n||xc(t);try{return new n(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||_c(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return r||wc(t),new r(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return i||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],o}));function _c(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function xc(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function wc(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}function bc(t,e,n){return t&&"function"==typeof t.map?t.map((function(t){return bc(t,e,n)})):e(t)}var Mc="number",Cc="number, number";function Sc(t){return Math.abs(t)}function Ec(t,e){return t+e}function Tc(t,e){return t*e}function Oc(t){return-t}Sc.signature=Mc,Ec.signature=Cc,Tc.signature=Cc,Oc.signature=Mc;var Pc=bl("abs",["typed"],(t=>{var{typed:e}=t;return e("abs",{number:Sc,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},Fraction:function(t){return t.abs()},"Array | Matrix":function(t){return bc(t,this,!0)},Unit:function(t){return t.abs()}})}));var kc="addScalar",Ic=bl(kc,["typed"],(t=>{var{typed:e}=t;return e(kc,{"number, number":Ec,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null===t.value||void 0===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value||void 0===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=this(n.value,e.value),n.fixPrefix=!1,n}})})),Ac=bl("bignumber",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(t){return new n(t+"")},string:function(t){var e=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(e){var i=e[2],r=n(e[1]),o=new n(2).pow(Number(i));if(r.gt(o.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var a=new n(2).pow(Number(i)-1);return r.gte(a)?r.sub(o):r}return new n(t)},BigNumber:function(t){return t},Fraction:function(t){return new n(t.n).div(t.d).times(t.s)},null:function(t){return new n(0)},"Array | Matrix":function(t){return bc(t,this)}})}));var Lc="conj",Rc=bl(Lc,["typed"],(t=>{var{typed:e}=t;return e(Lc,{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.conjugate()},"Array | Matrix":function(t){return bc(t,this)}})}));function Nc(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var i=t.minus(e).abs();if(i.isZero())return!0;var r=t.constructor.max(t.abs(),e.abs());return i.lte(r.times(n))}return!1}var Dc="equalScalar",Fc=bl(Dc,["typed","config"],(t=>{var{typed:e,config:n}=t;return e(Dc,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return Nl(t,e,n.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||Nc(t,e,n.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,n){return Nl(t.re,e.re,n)&&Nl(t.im,e.im,n)}(t,e,n.epsilon)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)}})}));bl(Dc,["typed","config"],(t=>{var{typed:e,config:n}=t;return e(Dc,{"number, number":function(t,e){return Nl(t,e,n.epsilon)}})})),Math.pow(2,53),bl("hex",["typed","format"],(t=>{var{typed:e,format:n}=t;return e("hex",{"number | BigNumber":function(t){return n(t,{notation:"hex"})},"number | BigNumber, number":function(t,e){return n(t,{notation:"hex",wordSize:e})}})}));var jc="number";function zc(t){return Number.isNaN(t)}zc.signature=jc;var Bc=bl("multiplyScalar",["typed"],(t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Tc,"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, Unit":function(t,e){return t.multiply(e)}})}));var Uc=bl("number",["typed"],(t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e,n,i=(n=(e=t).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:e,radix:{"0b":2,"0o":8,"0x":16}[n[1]],integerPart:n[2],fractionalPart:n[3]}:null;if(i)return function(t){for(var e=parseInt(t.integerPart,t.radix),n=0,i=0;i<t.fractionalPart.length;i++)n+=parseInt(t.fractionalPart[i],t.radix)/Math.pow(t.radix,i+1);var r=e+n;if(isNaN(r))throw new SyntaxError('String "'+t.input+'" is no valid number');return r}(i);var r=0,o=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(r=Number(o[2]),t=o[1]);var a=Number(t);if(isNaN(a))throw new SyntaxError('String "'+t+'" is no valid number');if(o){if(a>2**r-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));a>=2**(r-1)&&(a-=2**r)}return a},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return bc(t,this)}});return n.fromJSON=function(t){return parseFloat(t.value)},n}));bl("oct",["typed","format"],(t=>{var{typed:e,format:n}=t;return e("oct",{"number | BigNumber":function(t){return n(t,{notation:"oct"})},"number | BigNumber, number":function(t,e){return n(t,{notation:"oct",wordSize:e})}})})),a(377);Date.now();var Gc=bl("SparseMatrix",["typed","equalScalar","Matrix"],(t=>{var{typed:e,equalScalar:n,Matrix:i}=t;function r(t,e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!jh(e))throw new Error("Invalid datatype: "+e);if(Bh(t))!function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?vl(e._values):void 0,t._index=vl(e._index),t._ptr=vl(e._ptr),t._size=vl(e._size),t._datatype=n||e._datatype):o(t,e.valueOf(),n||e._datatype)}(this,t,e);else if(t&&zh(t.index)&&zh(t.ptr)&&zh(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(zh(t))o(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+yl(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function o(t,i,r){t._values=[],t._index=[],t._ptr=[],t._datatype=r;var o=i.length,a=0,s=n,h=0;if(jh(r)&&(s=e.find(n,[r,r])||n,h=e.convert(0,r)),o>0){var l=0;do{t._ptr.push(t._index.length);for(var c=0;c<o;c++){var u=i[c];if(zh(u)){if(0===l&&a<u.length&&(a=u.length),l<u.length){var f=u[l];s(f,h)||(t._values.push(f),t._index.push(c))}}else 0===l&&a<1&&(a=1),s(u,h)||(t._values.push(u),t._index.push(c))}l++}while(l<a)}t._ptr.push(t._index.length),t._size=[o,a]}function a(t,e){if(!Vh(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var n,i,o,a,s=e.size();if(s.length!==t._size.length)throw new Kl(s.length,t._size.length);var h=e.min(),l=e.max();for(n=0,i=t._size.length;n<i;n++)tc(h[n],t._size[n]),tc(l[n],t._size[n]);var c=t._values,u=t._index,f=t._ptr,p=e.dimension(0),d=e.dimension(1),g=[],m=[];p.forEach((function(t,e){m[t]=e[0],g[t]=!0}));var y=c?[]:void 0,v=[],_=[];return d.forEach((function(t){for(_.push(v.length),o=f[t],a=f[t+1];o<a;o++)n=u[o],!0===g[n]&&(v.push(m[n]),y&&y.push(c[o]))})),_.push(v.length),new r({values:y,index:v,ptr:_,size:s,datatype:t._datatype})}function s(t,e,n,i){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var r,o=e.size(),a=e.isScalar();if(Bh(n)?(r=n.size(),n=n.toArray()):r=$l(n),a){if(0!==r.length)throw new TypeError("Scalar expected");t.set(e.min(),n,i)}else{if(1!==o.length&&2!==o.length)throw new Kl(o.length,t._size.length,"<");if(r.length<o.length){for(var s=0,h=0;1===o[s]&&1===r[s];)s++;for(;1===o[s];)h++,s++;n=oc(n,o.length,h,r)}if(!xl(o,r))throw new Kl(o,r,">");if(1===o.length)e.dimension(0).forEach((function(e,r){tc(e),t.set([e,0],n[r[0]],i)}));else{var l=e.dimension(0),c=e.dimension(1);l.forEach((function(e,r){tc(e),c.forEach((function(o,a){tc(o),t.set([e,o],n[r[0]][a[0]],i)}))}))}}return t}function h(t,e,n,i){if(n-e==0)return n;for(var r=e;r<n;r++)if(i[r]===t)return r;return e}function l(t,e,n,i,r,o,a){r.splice(t,0,i),o.splice(t,0,e);for(var s=n+1;s<a.length;s++)a[s]++}function c(t,i,r,o){var a=o||0,s=n,h=0;jh(t._datatype)&&(s=e.find(n,[t._datatype,t._datatype])||n,h=e.convert(0,t._datatype),a=e.convert(a,t._datatype));var l,c,u,f=!s(a,h),p=t._size[0],d=t._size[1];if(r>d){for(c=d;c<r;c++)if(t._ptr[c]=t._values.length,f)for(l=0;l<p;l++)t._values.push(a),t._index.push(l);t._ptr[r]=t._values.length}else r<d&&(t._ptr.splice(r+1,d-r),t._values.splice(t._ptr[r],t._values.length),t._index.splice(t._ptr[r],t._index.length));if(d=r,i>p){if(f){var g=0;for(c=0;c<d;c++){t._ptr[c]=t._ptr[c]+g,u=t._ptr[c+1]+g;var m=0;for(l=p;l<i;l++,m++)t._values.splice(u+m,0,a),t._index.splice(u+m,0,l),g++}t._ptr[d]=t._values.length}}else if(i<p){var y=0;for(c=0;c<d;c++){t._ptr[c]=t._ptr[c]-y;var v=t._ptr[c],_=t._ptr[c+1]-y;for(u=v;u<_;u++)(l=t._index[u])>i-1&&(t._values.splice(u,1),t._index.splice(u,1),y++)}t._ptr[c]=t._values.length}return t._size[0]=i,t._size[1]=r,t}function u(t,e,n,i,r){var o,a,s=i[0],h=i[1],l=[];for(o=0;o<s;o++)for(l[o]=[],a=0;a<h;a++)l[o][a]=0;for(a=0;a<h;a++)for(var c=n[a],u=n[a+1],f=c;f<u;f++)l[o=e[f]][a]=t?r?vl(t[f]):t[f]:1;return l}return r.prototype=new i,r.prototype.createSparseMatrix=function(t,e){return new r(t,e)},r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return hc(this._values,yl)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(t,e){return new r(t,e)},r.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},r.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,t);case 2:case 3:return s(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(t){if(!zh(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Kl(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];tc(e,this._size[0]),tc(n,this._size[1]);var i=h(e,this._ptr[n],this._ptr[n+1],this._index);return i<this._ptr[n+1]&&this._index[i]===e?this._values[i]:0},r.prototype.set=function(t,i,r){if(!zh(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Kl(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=t[0],a=t[1],s=this._size[0],u=this._size[1],f=n,p=0;jh(this._datatype)&&(f=e.find(n,[this._datatype,this._datatype])||n,p=e.convert(0,this._datatype)),(o>s-1||a>u-1)&&(c(this,Math.max(o+1,s),Math.max(a+1,u),r),s=this._size[0],u=this._size[1]),tc(o,s),tc(a,u);var d=h(o,this._ptr[a],this._ptr[a+1],this._index);return d<this._ptr[a+1]&&this._index[d]===o?f(i,p)?function(t,e,n,i,r){n.splice(t,1),i.splice(t,1);for(var o=e+1;o<r.length;o++)r[o]--}(d,a,this._values,this._index,this._ptr):this._values[d]=i:l(d,o,a,i,this._values,this._index,this._ptr),this},r.prototype.resize=function(t,e,n){if(!Uh(t))throw new TypeError("Array or Matrix expected");var i=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));if(2!==i.length)throw new Error("Only two dimensions matrix are supported");return i.forEach((function(t){if(!Lh(t)||!El(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Yl(i)+")")})),c(n?this.clone():this,i[0],i[1],e)},r.prototype.reshape=function(t,e){if(!zh(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!Lh(e)||!El(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Yl(t)+")")}));var n=this._size[0]*this._size[1];if(n!==(t=ic(t,n))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var i=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return i;for(var r=[],o=0;o<i._ptr.length;o++)for(var a=0;a<i._ptr[o+1]-i._ptr[o];a++)r.push(o);for(var s=i._values.slice(),c=i._index.slice(),u=0;u<i._index.length;u++){var f=c[u],p=r[u],d=f*i._size[1]+p;r[u]=d%t[1],c[u]=Math.floor(d/t[1])}i._values.length=0,i._index.length=0,i._ptr.length=t[1]+1,i._size=t.slice();for(var g=0;g<i._ptr.length;g++)i._ptr[g]=0;for(var m=0;m<s.length;m++){var y=c[m],v=r[m],_=s[m];l(h(y,i._ptr[v],i._ptr[v+1],i._index),y,v,_,i._values,i._index,i._ptr)}return i},r.prototype.clone=function(){return new r({values:this._values?vl(this._values):void 0,index:vl(this._index),ptr:vl(this._ptr),size:vl(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(t,i){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this;return function(t,i,o,a,s,h,l){var c=[],u=[],f=[],p=n,d=0;jh(t._datatype)&&(p=e.find(n,[t._datatype,t._datatype])||n,d=e.convert(0,t._datatype));for(var g=function(t,e,n){t=h(t,e,n),p(t,d)||(c.push(t),u.push(e))},m=0;m<=s;m++){f.push(c.length);var y=t._ptr[m],v=t._ptr[m+1];if(l)for(var _=y;_<v;_++){var x=t._index[_];x>=0&&x<=o&&g(t._values[_],x-0,m-0)}else{for(var w={},b=y;b<v;b++)w[t._index[b]]=t._values[b];for(var M=0;M<=o;M++)g(M in w?w[M]:0,M-0,m-0)}}return f.push(c.length),new r({values:c,index:u,ptr:f,size:[o-0+1,s-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(e,n,i){return t(e,[n,i],o)}),i)},r.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],i=this._size[1],r=0;r<i;r++){var o=this._ptr[r],a=this._ptr[r+1];if(e)for(var s=o;s<a;s++){var h=this._index[s];t(this._values[s],[h,r],this)}else{for(var l={},c=o;c<a;c++)l[this._index[c]]=this._values[c];for(var u=0;u<n;u++)t(u in l?l[u]:0,[u,r],this)}}},r.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var t=this._size[1],e=0;e<t;e++)for(var n=this._ptr[e],i=this._ptr[e+1],r=n;r<i;r++){var o=this._index[r];yield{value:this._values[r],index:[o,e]}}},r.prototype.toArray=function(){return u(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return u(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],i=this.density(),r="Sparse Matrix ["+Yl(e,t)+" x "+Yl(n,t)+"] density: "+Yl(i,t)+"\n",o=0;o<n;o++)for(var a=this._ptr[o],s=this._ptr[o+1],h=a;h<s;h++)r+="\n    ("+Yl(this._index[h],t)+", "+Yl(o,t)+") ==> "+(this._values?Yl(this._values[h],t):"X");return r},r.prototype.toString=function(){return Yl(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(t){if(t){if(Rh(t)&&(t=t.toNumber()),!Lh(t)||!El(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,n=t<0?-t:0,i=this._size[0],o=this._size[1],a=Math.min(i-n,o-e),s=[],h=[],l=[];l[0]=0;for(var c=e;c<o&&s.length<a;c++)for(var u=this._ptr[c],f=this._ptr[c+1],p=u;p<f;p++){var d=this._index[p];if(d===c-e+n){s.push(this._values[p]),h[s.length-1]=d-n;break}}return l.push(s.length),new r({values:s,index:h,ptr:l,size:[a,1]})},r.fromJSON=function(t){return new r(t)},r.diagonal=function(t,i,o,a,s){if(!zh(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(Rh(t)&&(t=t.toNumber()),!Lh(t)||!El(t)||t<1)throw new Error("Size values must be positive integers");return t})),o){if(Rh(o)&&(o=o.toNumber()),!Lh(o)||!El(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var h=n,l=0;jh(s)&&(h=e.find(n,[s,s])||n,l=e.convert(0,s));var c,u=o>0?o:0,f=o<0?-o:0,p=t[0],d=t[1],g=Math.min(p-f,d-u);if(zh(i)){if(i.length!==g)throw new Error("Invalid value array length");c=function(t){return i[t]}}else if(Bh(i)){var m=i.size();if(1!==m.length||m[0]!==g)throw new Error("Invalid matrix length");c=function(t){return i.get([t])}}else c=function(){return i};for(var y=[],v=[],_=[],x=0;x<d;x++){_.push(y.length);var w=x-u;if(w>=0&&w<g){var b=c(w);h(b,l)||(v.push(w+f),y.push(b))}}return _.push(y.length),new r({values:y,index:v,ptr:_,size:[p,d]})},r.prototype.swapRows=function(t,e){if(!(Lh(t)&&El(t)&&Lh(e)&&El(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return tc(t,this._size[0]),tc(e,this._size[0]),r._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(t,e,n,i,r){for(var o=i[t],a=i[t+1],s=o;s<a;s++)r(n[s],e[s])},r._swapRows=function(t,e,n,i,r,o){for(var a=0;a<n;a++){var s=o[a],l=o[a+1],c=h(t,s,l,r),u=h(e,s,l,r);if(c<l&&u<l&&r[c]===t&&r[u]===e){if(i){var f=i[c];i[c]=i[u],i[u]=f}}else if(c<l&&r[c]===t&&(u>=l||r[u]!==e)){var p=i?i[c]:void 0;r.splice(u,0,e),i&&i.splice(u,0,p),r.splice(u<=c?c+1:c,1),i&&i.splice(u<=c?c+1:c,1)}else if(u<l&&r[u]===e&&(c>=l||r[c]!==t)){var d=i?i[u]:void 0;r.splice(c,0,t),i&&i.splice(c,0,d),r.splice(c<=u?u+1:u,1),i&&i.splice(c<=u?u+1:u,1)}}},r}),{isClass:!0});bl("bin",["typed","format"],(t=>{var{typed:e,format:n}=t;return e("bin",{"number | BigNumber":function(t){return n(t,{notation:"bin"})},"number | BigNumber, number":function(t,e){return n(t,{notation:"bin",wordSize:e})}})}));var Hc="isNaN",Wc=bl(Hc,["typed"],(t=>{var{typed:e}=t;return e(Hc,{number:zc,BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":function(t){return bc(t,Number.isNaN)}})})),Vc="unaryMinus",qc=bl(Vc,["typed"],(t=>{var{typed:e}=t;return e(Vc,{number:Oc,Complex:function(t){return t.neg()},BigNumber:function(t){return t.neg()},Fraction:function(t){return t.neg()},Unit:function(t){var e=t.clone();return e.value=this(t.value),e},"Array | Matrix":function(t){return bc(t,this,!0)}})})),Yc=bl("fraction",["typed","Fraction"],(t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new n(t)},string:function(t){return new n(t)},"number, number":function(t,e){return new n(t,e)},null:function(t){return new n(0)},BigNumber:function(t){return new n(t.toString())},Fraction:function(t){return t},Object:function(t){return new n(t)},"Array | Matrix":function(t){return bc(t,this)}})})),Xc="isNumeric",Kc=bl(Xc,["typed"],(t=>{var{typed:e}=t;return e(Xc,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(t){return bc(t,this)}})})),Zc="matrix",$c=bl(Zc,["typed","Matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,Matrix:n,DenseMatrix:i,SparseMatrix:r}=t;return e(Zc,{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(t,e,n){if("dense"===e||"default"===e||void 0===e)return new i(t,n);if("sparse"===e)return new r(t,n);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}})),Qc=bl("algorithm03",["typed"],(t=>{var{typed:e}=t;return function(t,n,i,r){var o=t._data,a=t._size,s=t._datatype,h=n._values,l=n._index,c=n._ptr,u=n._size,f=n._datatype;if(a.length!==u.length)throw new Kl(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,d=a[0],g=a[1],m=0,y=i;"string"==typeof s&&s===f&&(p=s,m=e.convert(0,p),y=e.find(i,[p,p]));for(var v=[],_=0;_<d;_++)v[_]=[];for(var x=[],w=[],b=0;b<g;b++){for(var M=b+1,C=c[b],S=c[b+1],E=C;E<S;E++){var T=l[E];x[T]=r?y(h[E],o[T][b]):y(o[T][b],h[E]),w[T]=M}for(var O=0;O<d;O++)w[O]===M?v[O][b]=x[O]:v[O][b]=r?y(m,o[O][b]):y(o[O][b],m)}return t.createDenseMatrix({data:v,size:[d,g],datatype:p})}})),Jc=bl("algorithm05",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,i,r){var o=t._values,a=t._index,s=t._ptr,h=t._size,l=t._datatype,c=i._values,u=i._index,f=i._ptr,p=i._size,d=i._datatype;if(h.length!==p.length)throw new Kl(h.length,p.length);if(h[0]!==p[0]||h[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+p+")");var g,m=h[0],y=h[1],v=n,_=0,x=r;"string"==typeof l&&l===d&&(g=l,v=e.find(n,[g,g]),_=e.convert(0,g),x=e.find(r,[g,g]));var w,b,M,C,S=o&&c?[]:void 0,E=[],T=[],O=S?[]:void 0,P=S?[]:void 0,k=[],I=[];for(b=0;b<y;b++){T[b]=E.length;var A=b+1;for(M=s[b],C=s[b+1];M<C;M++)w=a[M],E.push(w),k[w]=A,O&&(O[w]=o[M]);for(M=f[b],C=f[b+1];M<C;M++)k[w=u[M]]!==A&&E.push(w),I[w]=A,P&&(P[w]=c[M]);if(S)for(M=T[b];M<E.length;){var L=k[w=E[M]],R=I[w];if(L===A||R===A){var N=x(L===A?O[w]:_,R===A?P[w]:_);v(N,_)?E.splice(M,1):(S.push(N),M++)}}}return T[y]=E.length,t.createSparseMatrix({values:S,index:E,ptr:T,size:[m,y],datatype:g})}})),tu=bl("algorithm11",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,i,r,o){var a=t._values,s=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,f=l[0],p=l[1],d=n,g=0,m=r;"string"==typeof c&&(u=c,d=e.find(n,[u,u]),g=e.convert(0,u),i=e.convert(i,u),m=e.find(r,[u,u]));for(var y=[],v=[],_=[],x=0;x<p;x++){_[x]=v.length;for(var w=h[x],b=h[x+1],M=w;M<b;M++){var C=s[M],S=o?m(i,a[M]):m(a[M],i);d(S,g)||(v.push(C),y.push(S))}}return _[p]=v.length,t.createSparseMatrix({values:y,index:v,ptr:_,size:[f,p],datatype:u})}})),eu=bl("algorithm12",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,i,r,o){var a=t._values,s=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,f=l[0],p=l[1],d=r;"string"==typeof c&&(u=c,i=e.convert(i,u),d=e.find(r,[u,u]));for(var g=[],m=[],y=[],v=0;v<p;v++){for(var _=v+1,x=h[v],w=h[v+1],b=x;b<w;b++){var M=s[b];m[M]=a[b],y[M]=_}for(var C=0;C<f;C++)0===v&&(g[C]=[]),y[C]===_?g[C][v]=o?d(i,m[C]):d(m[C],i):g[C][v]=o?d(i,0):d(0,i)}return new n({data:g,size:[f,p],datatype:u})}})),nu=bl("algorithm13",["typed"],(t=>{var{typed:e}=t;return function(t,i,r){var o,a=t._data,s=t._size,h=t._datatype,l=i._data,c=i._size,u=i._datatype,f=[];if(s.length!==c.length)throw new Kl(s.length,c.length);for(var p=0;p<s.length;p++){if(s[p]!==c[p])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");f[p]=s[p]}var d=r;"string"==typeof h&&h===u&&(o=h,d=e.find(r,[o,o]));var g=f.length>0?n(d,0,f,f[0],a,l):[];return t.createDenseMatrix({data:g,size:f,datatype:o})};function n(t,e,i,r,o,a){var s=[];if(e===i.length-1)for(var h=0;h<r;h++)s[h]=t(o[h],a[h]);else for(var l=0;l<r;l++)s[l]=n(t,e+1,i,i[e+1],o[l],a[l]);return s}})),iu=bl("algorithm14",["typed"],(t=>{var{typed:e}=t;return function(t,i,r,o){var a,s=t._data,h=t._size,l=t._datatype,c=r;"string"==typeof l&&(a=l,i=e.convert(i,a),c=e.find(r,[a,a]));var u=h.length>0?n(c,0,h,h[0],s,i,o):[];return t.createDenseMatrix({data:u,size:vl(h),datatype:a})};function n(t,e,i,r,o,a,s){var h=[];if(e===i.length-1)for(var l=0;l<r;l++)h[l]=s?t(a,o[l]):t(o[l],a);else for(var c=0;c<r;c++)h[c]=n(t,e+1,i,i[e+1],o[c],a,s);return h}})),ru=bl("algorithm01",["typed"],(t=>{var{typed:e}=t;return function(t,n,i,r){var o=t._data,a=t._size,s=t._datatype,h=n._values,l=n._index,c=n._ptr,u=n._size,f=n._datatype;if(a.length!==u.length)throw new Kl(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,d,g=a[0],m=a[1],y="string"==typeof s&&s===f?s:void 0,v=y?e.find(i,[y,y]):i,_=[];for(p=0;p<g;p++)_[p]=[];var x=[],w=[];for(d=0;d<m;d++){for(var b=d+1,M=c[d],C=c[d+1],S=M;S<C;S++)x[p=l[S]]=r?v(h[S],o[p][d]):v(o[p][d],h[S]),w[p]=b;for(p=0;p<g;p++)w[p]===b?_[p][d]=x[p]:_[p][d]=o[p][d]}return t.createDenseMatrix({data:_,size:[g,m],datatype:y})}}));function ou(){throw new Error('No "bignumber" implementation available')}function au(){throw new Error('No "fraction" implementation available')}var su=bl("numeric",["number","?bignumber","?fraction"],(t=>{var{number:e,bignumber:n,fraction:i}=t,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:t=>e(t),BigNumber:n?t=>n(t):ou,Fraction:i?t=>i(t):au};return function(t,e){var n=yl(t);if(!(n in r))throw new TypeError("Cannot convert "+t+' of type "'+n+'"; valid input types are '+Object.keys(r).join(", "));if(!(e in o))throw new TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(o).join(", "));return e===n?t:o[e](t)}}));var hu="size",lu=bl(hu,["typed","config","?matrix"],(t=>{var{typed:e,config:n,matrix:i}=t;return e(hu,{Matrix:function(t){return t.create(t.size())},Array:$l,string:function(t){return"Array"===n.matrix?[t.length]:i([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===n.matrix?[]:i?i([]):function(){throw new Error('No "matrix" implementation available')}()}})})),cu=bl("algorithm07",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,r,o){var a=t._size,s=t._datatype,h=r._size,l=r._datatype;if(a.length!==h.length)throw new Kl(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");var c,u,f,p=a[0],d=a[1],g=0,m=o;"string"==typeof s&&s===l&&(c=s,g=e.convert(0,c),m=e.find(o,[c,c]));var y=[];for(u=0;u<p;u++)y[u]=[];var v=[],_=[],x=[],w=[];for(f=0;f<d;f++){var b=f+1;for(i(t,f,x,v,b),i(r,f,w,_,b),u=0;u<p;u++){var M=x[u]===b?v[u]:g,C=w[u]===b?_[u]:g;y[u][f]=m(M,C)}}return new n({data:y,size:[p,d],datatype:c})};function i(t,e,n,i,r){for(var o=t._values,a=t._index,s=t._ptr,h=s[e],l=s[e+1];h<l;h++){var c=a[h];n[c]=r,i[c]=o[h]}}})),uu="smaller",fu=bl(uu,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:n,matrix:i,DenseMatrix:r}=t,o=Qc({typed:e}),a=cu({typed:e,DenseMatrix:r}),s=eu({typed:e,DenseMatrix:r}),h=nu({typed:e}),l=iu({typed:e});return e(uu,{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,e){return t<e&&!Nl(t,e,n.epsilon)},"BigNumber, BigNumber":function(t,e){return t.lt(e)&&!Nc(t,e,n.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,this)},"Array, Array":function(t,e){return this(i(t),i(e)).valueOf()},"Array, Matrix":function(t,e){return this(i(t),e)},"Matrix, Array":function(t,e){return this(t,i(e))},"SparseMatrix, any":function(t,e){return s(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return s(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(i(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(i(e),t,this,!0).valueOf()}})})),pu=bl("algorithm10",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,i,r,o){var a=t._values,s=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,f=l[0],p=l[1],d=r;"string"==typeof c&&(u=c,i=e.convert(i,u),d=e.find(r,[u,u]));for(var g=[],m=[],y=[],v=0;v<p;v++){for(var _=v+1,x=h[v],w=h[v+1],b=x;b<w;b++){var M=s[b];m[M]=a[b],y[M]=_}for(var C=0;C<f;C++)0===v&&(g[C]=[]),y[C]===_?g[C][v]=o?d(i,m[C]):d(m[C],i):g[C][v]=i}return new n({data:g,size:[f,p],datatype:u})}})),du="subtract",gu=bl(du,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(t=>{var{typed:e,matrix:n,equalScalar:i,addScalar:r,unaryMinus:o,DenseMatrix:a}=t,s=ru({typed:e}),h=Qc({typed:e}),l=Jc({typed:e,equalScalar:i}),c=pu({typed:e,DenseMatrix:a}),u=nu({typed:e}),f=iu({typed:e});return e(du,{"number, number":function(t,e){return t-e},"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":function(t,e){if(null===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=this(n.value,e.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(t,e){return mu(t,e),l(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return mu(t,e),h(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return mu(t,e),s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return mu(t,e),u(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return c(t,o(e),r)},"DenseMatrix, any":function(t,e){return f(t,e,this)},"any, SparseMatrix":function(t,e){return c(e,t,this,!0)},"any, DenseMatrix":function(t,e){return f(e,t,this,!0)},"Array, any":function(t,e){return f(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return f(n(e),t,this,!0).valueOf()}})}));function mu(t,e){var n=t.size(),i=e.size();if(n.length!==i.length)throw new Kl(n.length,i.length)}var yu=bl("transpose",["typed","matrix"],(t=>{var{typed:e,matrix:n}=t;return e("transpose",{Array:function(t){return this(n(t)).valueOf()},Matrix:function(t){var e,n=t.size();switch(n.length){case 1:e=t.clone();break;case 2:var i=n[0],r=n[1];if(0===r)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Yl(n)+")");switch(t.storage()){case"dense":e=function(t,e,n){for(var i,r=t._data,o=[],a=0;a<n;a++){i=o[a]=[];for(var s=0;s<e;s++)i[s]=vl(r[s][a])}return t.createDenseMatrix({data:o,size:[n,e],datatype:t._datatype})}(t,i,r);break;case"sparse":e=function(t,e,n){for(var i,r,o,a=t._values,s=t._index,h=t._ptr,l=a?[]:void 0,c=[],u=[],f=[],p=0;p<e;p++)f[p]=0;for(i=0,r=s.length;i<r;i++)f[s[i]]++;for(var d=0,g=0;g<e;g++)u.push(d),d+=f[g],f[g]=u[g];for(u.push(d),o=0;o<n;o++)for(var m=h[o],y=h[o+1],v=m;v<y;v++){var _=f[s[v]]++;c[_]=o,a&&(l[_]=vl(a[v]))}return t.createSparseMatrix({values:l,index:c,ptr:u,size:[n,e],datatype:t._datatype})}(t,i,r)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Yl(this._size)+")")}return e},any:function(t){return vl(t)}})})),vu="compare",_u=bl(vu,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],(t=>{var{typed:e,config:n,equalScalar:i,matrix:r,BigNumber:o,Fraction:a,DenseMatrix:s}=t,h=Qc({typed:e}),l=Jc({typed:e,equalScalar:i}),c=eu({typed:e,DenseMatrix:s}),u=nu({typed:e}),f=iu({typed:e});return e(vu,{"boolean, boolean":function(t,e){return t===e?0:t>e?1:-1},"number, number":function(t,e){return Nl(t,e,n.epsilon)?0:t>e?1:-1},"BigNumber, BigNumber":function(t,e){return Nc(t,e,n.epsilon)?new o(0):new o(t.cmp(e))},"Fraction, Fraction":function(t,e){return new a(t.compare(e))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return l(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return h(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return h(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return c(t,e,this,!1)},"DenseMatrix, any":function(t,e){return f(t,e,this,!1)},"any, SparseMatrix":function(t,e){return c(e,t,this,!0)},"any, DenseMatrix":function(t,e){return f(e,t,this,!0)},"Array, any":function(t,e){return f(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return f(r(e),t,this,!0).valueOf()}})})),xu="divideScalar",wu=bl(xu,["typed","numeric"],(t=>{var{typed:e,numeric:n}=t;return e(xu,{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Fraction | BigNumber":function(t,e){var i=t.clone(),r=n(1,yl(e));return i.value=this(null===i.value?i._normalize(r):i.value,e),i},"number | Fraction | BigNumber, Unit":function(t,e){var i=e.clone();i=i.pow(-1);var r=n(1,yl(t));return i.value=this(t,null===e.value?e._normalize(r):e.value),i},"Unit, Unit":function(t,e){return t.divide(e)}})})),bu="equal",Mu=(bl(bu,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return e(bu,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:n(t,e)}})})),bl("algorithm04",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,i,r){var o=t._values,a=t._index,s=t._ptr,h=t._size,l=t._datatype,c=i._values,u=i._index,f=i._ptr,p=i._size,d=i._datatype;if(h.length!==p.length)throw new Kl(h.length,p.length);if(h[0]!==p[0]||h[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+p+")");var g,m=h[0],y=h[1],v=n,_=0,x=r;"string"==typeof l&&l===d&&(g=l,v=e.find(n,[g,g]),_=e.convert(0,g),x=e.find(r,[g,g]));var w,b,M,C,S,E=o&&c?[]:void 0,T=[],O=[],P=o&&c?[]:void 0,k=o&&c?[]:void 0,I=[],A=[];for(b=0;b<y;b++){O[b]=T.length;var L=b+1;for(C=s[b],S=s[b+1],M=C;M<S;M++)w=a[M],T.push(w),I[w]=L,P&&(P[w]=o[M]);for(C=f[b],S=f[b+1],M=C;M<S;M++)if(I[w=u[M]]===L){if(P){var R=x(P[w],c[M]);v(R,_)?I[w]=null:P[w]=R}}else T.push(w),A[w]=L,k&&(k[w]=c[M]);if(P&&k)for(M=O[b];M<T.length;)I[w=T[M]]===L?(E[M]=P[w],M++):A[w]===L?(E[M]=k[w],M++):T.splice(M,1)}return O[y]=T.length,t.createSparseMatrix({values:E,index:T,ptr:O,size:[m,y],datatype:g})}}))),Cu="partitionSelect",Su=bl(Cu,["typed","isNumeric","isNaN","compare"],(t=>{var{typed:e,isNumeric:n,isNaN:i,compare:r}=t,o=r,a=(t,e)=>-r(t,e);return e(Cu,{"Array | Matrix, number":function(t,e){return s(t,e,o)},"Array | Matrix, number, string":function(t,e,n){if("asc"===n)return s(t,e,o);if("desc"===n)return s(t,e,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(t,e,n){if(!El(e)||e<0)throw new Error("k must be a non-negative integer");if(Bh(t)){if(t.size().length>1)throw new Error("Only one dimensional matrices supported");return h(t.valueOf(),e,n)}if(Array.isArray(t))return h(t,e,n)}function h(t,e,r){if(e>=t.length)throw new Error("k out of bounds");for(var o=0;o<t.length;o++)if(n(t[o])&&i(t[o]))return t[o];for(var a=0,s=t.length-1;a<s;){for(var h=a,l=s,c=t[Math.floor(Math.random()*(s-a+1))+a];h<l;)if(r(t[h],c)>=0){var u=t[l];t[l]=t[h],t[h]=u,--l}else++h;r(t[h],c)>0&&--h,e<=h?s=h:a=h+1}return t[e]}}));function Eu(t,e,n,i){if(!(this instanceof Eu))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=i,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}Eu.prototype=new Error,Eu.prototype.constructor=Error,Eu.prototype.name="ArgumentsError",Eu.prototype.isArgumentsError=!0;var Tu="unequal",Ou=(bl(Tu,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return e(Tu,{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:!n(t,e)}})})),bl("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,matrix:n,addScalar:i,equalScalar:r,DenseMatrix:o,SparseMatrix:a}=t,s=ru({typed:e}),h=Mu({typed:e,equalScalar:r}),l=pu({typed:e,DenseMatrix:o}),c=nu({typed:e}),u=iu({typed:e});return e("add",_l({"DenseMatrix, DenseMatrix":function(t,e){return c(t,e,i)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,i,!1)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,i,!0)},"SparseMatrix, SparseMatrix":function(t,e){return h(t,e,i)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"DenseMatrix, any":function(t,e){return u(t,e,i,!1)},"SparseMatrix, any":function(t,e){return l(t,e,i,!1)},"any, DenseMatrix":function(t,e){return u(e,t,i,!0)},"any, SparseMatrix":function(t,e){return l(e,t,i,!0)},"Array, any":function(t,e){return u(n(t),e,i,!1).valueOf()},"any, Array":function(t,e){return u(n(e),t,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(t,e,n){for(var i=this(t,e),r=0;r<n.length;r++)i=this(i,n[r]);return i}},i.signatures))})));a(228);var Pu=bl("dot",["typed","addScalar","multiplyScalar","conj","size"],(t=>{var{typed:e,addScalar:n,multiplyScalar:i,conj:r,size:o}=t;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(t,o){var h=a(t,o),l=Bh(t)?t._data:t,c=Bh(t)?t._datatype:void 0,u=Bh(o)?o._data:o,f=Bh(o)?o._datatype:void 0,p=2===s(t).length,d=2===s(o).length,g=n,m=i;if(c&&f&&c===f&&"string"==typeof c){var y=c;g=e.find(n,[y,y]),m=e.find(i,[y,y])}if(!p&&!d){for(var v=m(r(l[0]),u[0]),_=1;_<h;_++)v=g(v,m(r(l[_]),u[_]));return v}if(!p&&d){for(var x=m(r(l[0]),u[0][0]),w=1;w<h;w++)x=g(x,m(r(l[w]),u[w][0]));return x}if(p&&!d){for(var b=m(r(l[0][0]),u[0]),M=1;M<h;M++)b=g(b,m(r(l[M][0]),u[M]));return b}if(p&&d){for(var C=m(r(l[0][0]),u[0][0]),S=1;S<h;S++)C=g(C,m(r(l[S][0]),u[S][0]));return C}},"SparseMatrix, SparseMatrix":function(t,e){a(t,e);for(var r=t._index,o=t._values,s=e._index,h=e._values,l=0,c=n,u=i,f=0,p=0;f<r.length&&p<s.length;){var d=r[f],g=s[p];d<g?f++:d>g?p++:d===g&&(l=c(l,u(o[f],h[p])),f++,p++)}return l}});function a(t,e){var n,i,r=s(t),o=s(e);if(1===r.length)n=r[0];else{if(2!==r.length||1!==r[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+r.join(", ")+")");n=r[0]}if(1===o.length)i=o[0];else{if(2!==o.length||1!==o[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");i=o[0]}if(n!==i)throw new RangeError("Vectors must have equal length ("+n+" != "+i+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function s(t){return Bh(t)?t.size():o(t)}})),ku="identity",Iu=bl(ku,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,config:n,matrix:i,BigNumber:r,DenseMatrix:o,SparseMatrix:a}=t;return e(ku,{"":function(){return"Matrix"===n.matrix?i([]):[]},string:function(t){return i(t)},"number | BigNumber":function(t){return h(t,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(t,e){return h(t,t,e)},"number | BigNumber, number | BigNumber":function(t,e){return h(t,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,n){return h(t,e,n)},Array:function(t){return s(t)},"Array, string":function(t,e){return s(t,e)},Matrix:function(t){return s(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return s(t.valueOf(),e)}});function s(t,e){switch(t.length){case 0:return e?i(e):[];case 1:return h(t[0],t[0],e);case 2:return h(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function h(t,e,n){var i=Rh(t)||Rh(e)?r:null;if(Rh(t)&&(t=t.toNumber()),Rh(e)&&(e=e.toNumber()),!El(t)||t<1)throw new Error("Parameters in function identity must be positive integers");if(!El(e)||e<1)throw new Error("Parameters in function identity must be positive integers");var s=i?new r(1):1,h=i?new i(0):0,l=[t,e];if(n){if("sparse"===n)return a.diagonal(l,s,0,h);if("dense"===n)return o.diagonal(l,s,0,h);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var c=ec([],l,h),u=t<e?t:e,f=0;f<u;f++)c[f][f]=s;return c}})),Au="larger",Lu=bl(Au,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:n,matrix:i,DenseMatrix:r}=t,o=Qc({typed:e}),a=cu({typed:e,DenseMatrix:r}),s=eu({typed:e,DenseMatrix:r}),h=nu({typed:e}),l=iu({typed:e});return e(Au,{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,e){return t>e&&!Nl(t,e,n.epsilon)},"BigNumber, BigNumber":function(t,e){return t.gt(e)&&!Nc(t,e,n.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,this)},"Array, Array":function(t,e){return this(i(t),i(e)).valueOf()},"Array, Matrix":function(t,e){return this(i(t),e)},"Matrix, Array":function(t,e){return this(t,i(e))},"SparseMatrix, any":function(t,e){return s(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return s(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(i(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(i(e),t,this,!0).valueOf()}})})),Ru="multiply",Nu=bl(Ru,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(t=>{var{typed:e,matrix:n,addScalar:i,multiplyScalar:r,equalScalar:o,dot:a}=t,s=tu({typed:e,equalScalar:o}),h=iu({typed:e});function l(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}var c=e("_multiplyMatrixVector",{"DenseMatrix, any":function(t,n){var o,a=t._data,s=t._size,h=t._datatype,l=n._data,c=n._datatype,u=s[0],f=s[1],p=i,d=r;h&&c&&h===c&&"string"==typeof h&&(o=h,p=e.find(i,[o,o]),d=e.find(r,[o,o]));for(var g=[],m=0;m<u;m++){for(var y=a[m],v=d(y[0],l[0]),_=1;_<f;_++)v=p(v,d(y[_],l[_]));g[m]=v}return t.createDenseMatrix({data:g,size:[u],datatype:o})},"SparseMatrix, any":function(t,n){var a=t._values,s=t._index,h=t._ptr,l=t._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,u=n._data,f=n._datatype,p=t._size[0],d=n._size[0],g=[],m=[],y=[],v=i,_=r,x=o,w=0;l&&f&&l===f&&"string"==typeof l&&(c=l,v=e.find(i,[c,c]),_=e.find(r,[c,c]),x=e.find(o,[c,c]),w=e.convert(0,c));var b=[],M=[];y[0]=0;for(var C=0;C<d;C++){var S=u[C];if(!x(S,w))for(var E=h[C],T=h[C+1],O=E;O<T;O++){var P=s[O];M[P]?b[P]=v(b[P],_(S,a[O])):(M[P]=!0,m.push(P),b[P]=_(S,a[O]))}}for(var k=m.length,I=0;I<k;I++){var A=m[I];g[I]=b[A]}return y[1]=m.length,t.createSparseMatrix({values:g,index:m,ptr:y,size:[p,1],datatype:c})}}),u=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,n){var o,a=t._data,s=t._size,h=t._datatype,l=n._data,c=n._size,u=n._datatype,f=s[0],p=s[1],d=c[1],g=i,m=r;h&&u&&h===u&&"string"==typeof h&&(o=h,g=e.find(i,[o,o]),m=e.find(r,[o,o]));for(var y=[],v=0;v<f;v++){var _=a[v];y[v]=[];for(var x=0;x<d;x++){for(var w=m(_[0],l[0][x]),b=1;b<p;b++)w=g(w,m(_[b],l[b][x]));y[v][x]=w}}return t.createDenseMatrix({data:y,size:[f,d],datatype:o})},"DenseMatrix, SparseMatrix":function(t,n){var a=t._data,s=t._size,h=t._datatype,l=n._values,c=n._index,u=n._ptr,f=n._size,p=n._datatype;if(!l)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var d,g=s[0],m=f[1],y=i,v=r,_=o,x=0;h&&p&&h===p&&"string"==typeof h&&(d=h,y=e.find(i,[d,d]),v=e.find(r,[d,d]),_=e.find(o,[d,d]),x=e.convert(0,d));for(var w=[],b=[],M=[],C=n.createSparseMatrix({values:w,index:b,ptr:M,size:[g,m],datatype:d}),S=0;S<m;S++){M[S]=b.length;var E=u[S],T=u[S+1];if(T>E)for(var O=0,P=0;P<g;P++){for(var k=P+1,I=void 0,A=E;A<T;A++){var L=c[A];O!==k?(I=v(a[P][L],l[A]),O=k):I=y(I,v(a[P][L],l[A]))}O!==k||_(I,x)||(b.push(P),w.push(I))}}return M[m]=b.length,C},"SparseMatrix, DenseMatrix":function(t,n){var a=t._values,s=t._index,h=t._ptr,l=t._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,u=n._data,f=n._datatype,p=t._size[0],d=n._size[0],g=n._size[1],m=i,y=r,v=o,_=0;l&&f&&l===f&&"string"==typeof l&&(c=l,m=e.find(i,[c,c]),y=e.find(r,[c,c]),v=e.find(o,[c,c]),_=e.convert(0,c));for(var x=[],w=[],b=[],M=t.createSparseMatrix({values:x,index:w,ptr:b,size:[p,g],datatype:c}),C=[],S=[],E=0;E<g;E++){b[E]=w.length;for(var T=E+1,O=0;O<d;O++){var P=u[O][E];if(!v(P,_))for(var k=h[O],I=h[O+1],A=k;A<I;A++){var L=s[A];S[L]!==T?(S[L]=T,w.push(L),C[L]=y(P,a[A])):C[L]=m(C[L],y(P,a[A]))}}for(var R=b[E],N=w.length,D=R;D<N;D++){var F=w[D];x[D]=C[F]}}return b[g]=w.length,M},"SparseMatrix, SparseMatrix":function(t,n){var o,a=t._values,s=t._index,h=t._ptr,l=t._datatype,c=n._values,u=n._index,f=n._ptr,p=n._datatype,d=t._size[0],g=n._size[1],m=a&&c,y=i,v=r;l&&p&&l===p&&"string"==typeof l&&(o=l,y=e.find(i,[o,o]),v=e.find(r,[o,o]));for(var _,x,w,b,M,C,S,E,T=m?[]:void 0,O=[],P=[],k=t.createSparseMatrix({values:T,index:O,ptr:P,size:[d,g],datatype:o}),I=m?[]:void 0,A=[],L=0;L<g;L++){P[L]=O.length;var R=L+1;for(M=f[L],C=f[L+1],b=M;b<C;b++)if(E=u[b],m)for(x=h[E],w=h[E+1],_=x;_<w;_++)A[S=s[_]]!==R?(A[S]=R,O.push(S),I[S]=v(c[b],a[_])):I[S]=y(I[S],v(c[b],a[_]));else for(x=h[E],w=h[E+1],_=x;_<w;_++)A[S=s[_]]!==R&&(A[S]=R,O.push(S));if(m)for(var N=P[L],D=O.length,F=N;F<D;F++){var j=O[F];T[F]=I[j]}}return P[g]=O.length,k}});return e(Ru,_l({"Array, Array":function(t,e){l($l(t),$l(e));var i=this(n(t),n(e));return Bh(i)?i.valueOf():i},"Matrix, Matrix":function(t,n){var o=t.size(),s=n.size();return l(o,s),1===o.length?1===s.length?function(t,e,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return a(t,e)}(t,n,o[0]):function(t,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(t,n){var o,a=t._data,s=t._size,h=t._datatype,l=n._data,c=n._size,u=n._datatype,f=s[0],p=c[1],d=i,g=r;h&&u&&h===u&&"string"==typeof h&&(o=h,d=e.find(i,[o,o]),g=e.find(r,[o,o]));for(var m=[],y=0;y<p;y++){for(var v=g(a[0],l[0][y]),_=1;_<f;_++)v=d(v,g(a[_],l[_][y]));m[y]=v}return t.createDenseMatrix({data:m,size:[p],datatype:o})}(t,n)}(t,n):1===s.length?c(t,n):u(t,n)},"Matrix, Array":function(t,e){return this(t,n(e))},"Array, Matrix":function(t,e){return this(n(t,e.storage()),e)},"SparseMatrix, any":function(t,e){return s(t,e,r,!1)},"DenseMatrix, any":function(t,e){return h(t,e,r,!1)},"any, SparseMatrix":function(t,e){return s(e,t,r,!0)},"any, DenseMatrix":function(t,e){return h(e,t,r,!0)},"Array, any":function(t,e){return h(n(t),e,r,!1).valueOf()},"any, Array":function(t,e){return h(n(e),t,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(t,e,n){for(var i=this(t,e),r=0;r<n.length;r++)i=this(i,n[r]);return i}},r.signatures))})),Du=bl("FibonacciHeap",["smaller","larger"],(t=>{var{smaller:e,larger:n}=t,i=1/Math.log((1+Math.sqrt(5))/2);function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function o(t,e,n){e.left.right=e.right,e.right.left=e.left,n.degree--,n.child===e&&(n.child=e.right),0===n.degree&&(n.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1}function a(t,e){var n=e.parent;n&&(e.mark?(o(t,e,n),a(n)):e.mark=!0)}r.prototype.type="FibonacciHeap",r.prototype.isFibonacciHeap=!0,r.prototype.insert=function(t,n){var i={key:t,value:n,degree:0};if(this._minimum){var r=this._minimum;i.left=r,i.right=r.right,r.right=i,i.right.left=i,e(t,r.key)&&(this._minimum=i)}else i.left=i,i.right=i,this._minimum=i;return this._size++,i},r.prototype.size=function(){return this._size},r.prototype.clear=function(){this._minimum=null,this._size=0},r.prototype.isEmpty=function(){return 0===this._size},r.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var r=this._minimum,o=t.degree,a=t.child;o>0;){var h=a.right;a.left.right=a.right,a.right.left=a.left,a.left=r,a.right=r.right,r.right=a,a.right.left=a,a.parent=null,a=h,o--}return t.left.right=t.right,t.right.left=t.left,r=t===t.right?null:function(t,r){var o,a=Math.floor(Math.log(r)*i)+1,h=new Array(a),l=0,c=t;if(c)for(l++,c=c.right;c!==t;)l++,c=c.right;for(;l>0;){for(var u=c.degree,f=c.right;o=h[u];){if(n(c.key,o.key)){var p=o;o=c,c=p}s(o,c),h[u]=null,u++}h[u]=c,c=f,l--}t=null;for(var d=0;d<a;d++)(o=h[d])&&(t?(o.left.right=o.right,o.right.left=o.left,o.left=t,o.right=t.right,t.right=o,o.right.left=o,e(o.key,t.key)&&(t=o)):t=o);return t}(r=t.right,this._size),this._size--,this._minimum=r,t},r.prototype.remove=function(t){this._minimum=function(t,n,i){n.key=-1;var r=n.parent;return r&&e(n.key,r.key)&&(o(t,n,r),a(t,r)),e(n.key,t.key)&&(t=n),t}(this._minimum,t),this.extractMinimum()};var s=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1};return r}),{isClass:!0});var Fu=bl("Spa",["addScalar","equalScalar","FibonacciHeap"],(t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:i}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return r.prototype.type="Spa",r.prototype.isSpa=!0,r.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var n=this._heap.insert(t,e);this._values[t]=n}},r.prototype.get=function(t){var e=this._values[t];return e?e.value:0},r.prototype.accumulate=function(t,n){var i=this._values[t];i?i.value=e(i.value,n):(i=this._heap.insert(t,n),this._values[t]=i)},r.prototype.forEach=function(t,e,i){var r=this._heap,o=this._values,a=[],s=r.extractMinimum();for(s&&a.push(s);s&&s.key<=e;)s.key>=t&&(n(s.value,0)||i(s.key,s.value,this)),(s=r.extractMinimum())&&a.push(s);for(var h=0;h<a.length;h++){var l=a[h];o[(s=r.insert(l.key,l.value)).key]=s}},r.prototype.swap=function(t,e){var n=this._values[t],i=this._values[e];if(!n&&i)n=this._heap.insert(t,i.value),this._heap.remove(i),this._values[t]=n,this._values[e]=void 0;else if(n&&!i)i=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=i,this._values[t]=void 0;else if(n&&i){var r=n.value;n.value=i.value,i.value=r}},r}),{isClass:!0}),ju=bl("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(t=>{var{typed:e,matrix:n,abs:i,addScalar:r,divideScalar:o,multiplyScalar:a,subtract:s,larger:h,equalScalar:l,unaryMinus:c,DenseMatrix:u,SparseMatrix:f,Spa:p}=t;return e("lup",{DenseMatrix:function(t){return d(t)},SparseMatrix:function(t){return function(t){var e,n,r,s=t._size[0],u=t._size[1],d=Math.min(s,u),g=t._values,m=t._index,y=t._ptr,v=[],_=[],x=[],w=[s,d],b=[],M=[],C=[],S=[d,u],E=[],T=[];for(e=0;e<s;e++)E[e]=e,T[e]=e;var O=function(){var t=new p;n<s&&(x.push(v.length),v.push(1),_.push(n)),C.push(b.length);var u=y[n],d=y[n+1];for(r=u;r<d;r++)e=m[r],t.set(E[e],g[r]);n>0&&t.forEach(0,n-1,(function(e,n){f._forEachRow(e,v,_,x,(function(i,r){i>e&&t.accumulate(i,c(a(r,n)))}))}));var O,P,k,I,A=n,L=t.get(n),R=i(L);t.forEach(n+1,s-1,(function(t,e){var n=i(e);h(n,R)&&(A=t,R=n,L=e)})),n!==A&&(f._swapRows(n,A,w[1],v,_,x),f._swapRows(n,A,S[1],b,M,C),t.swap(n,A),P=A,k=T[O=n],I=T[P],E[k]=P,E[I]=O,T[O]=I,T[P]=k),t.forEach(0,s-1,(function(t,e){t<=n?(b.push(e),M.push(t)):(e=o(e,L),l(e,0)||(v.push(e),_.push(t)))}))};for(n=0;n<u;n++)O();return C.push(b.length),x.push(v.length),{L:new f({values:v,index:_,ptr:x,size:w}),U:new f({values:b,index:M,ptr:C,size:S}),p:E,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(t)},Array:function(t){var e=d(n(t));return{L:e.L.valueOf(),U:e.U.valueOf(),p:e.p}}});function d(t){var e,n,c,f=t._size[0],p=t._size[1],d=Math.min(f,p),g=vl(t._data),m=[],y=[f,d],v=[],_=[d,p],x=[];for(e=0;e<f;e++)x[e]=e;for(n=0;n<p;n++){if(n>0)for(e=0;e<f;e++){var w=Math.min(e,n),b=0;for(c=0;c<w;c++)b=r(b,a(g[e][c],g[c][n]));g[e][n]=s(g[e][n],b)}var M=n,C=0,S=0;for(e=n;e<f;e++){var E=g[e][n],T=i(E);h(T,C)&&(M=e,C=T,S=E)}if(n!==M&&(x[n]=[x[M],x[M]=x[n]][0],u._swapRows(n,M,g)),n<f)for(e=n+1;e<f;e++){var O=g[e][n];l(O,0)||(g[e][n]=o(g[e][n],S))}}for(n=0;n<p;n++)for(e=0;e<f;e++)0===n&&(e<p&&(v[e]=[]),m[e]=[]),e<n?(e<p&&(v[e][n]=g[e][n]),n<f&&(m[e][n]=0)):e!==n?(e<p&&(v[e][n]=0),n<f&&(m[e][n]=g[e][n])):(e<p&&(v[e][n]=g[e][n]),n<f&&(m[e][n]=1));var P=new u({data:m,size:y}),k=new u({data:v,size:_}),I=[];for(e=0,d=x.length;e<d;e++)I[x[e]]=e;return{L:P,U:k,p:I,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}})),zu=bl("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(t=>{var{typed:e,matrix:n,subtract:i,multiply:r,unaryMinus:o,lup:a}=t;return e("det",{any:function(t){return vl(t)},"Array | Matrix":function(t){var e;switch((e=Bh(t)?t.size():Array.isArray(t)?(t=n(t)).size():[]).length){case 0:return vl(t);case 1:if(1===e[0])return vl(t.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Yl(e)+")");case 2:var s=e[0];if(s===e[1])return function(t,e,n){if(1===e)return vl(t[0][0]);if(2===e)return i(r(t[0][0],t[1][1]),r(t[1][0],t[0][1]));for(var s=a(t),h=s.U[0][0],l=1;l<e;l++)h=r(h,s.U[l][l]);for(var c=0,u=0,f=[];;){for(;f[u];)u++;if(u>=e)break;for(var p=u,d=0;!f[s.p[p]];)f[s.p[p]]=!0,p=s.p[p],d++;d%2==0&&c++}return c%2==0?h:o(h)}(t.clone().valueOf(),s);throw new RangeError("Matrix must be square (size: "+Yl(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Yl(e)+")")}}})})),Bu=bl("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(t=>{var{typed:e,matrix:n,divideScalar:i,addScalar:r,multiply:o,unaryMinus:a,det:s,identity:h,abs:l}=t;return e("inv",{"Array | Matrix":function(t){var e=Bh(t)?t.size():$l(t);switch(e.length){case 1:if(1===e[0])return Bh(t)?n([i(1,t.valueOf()[0])]):[i(1,t[0])];throw new RangeError("Matrix must be square (size: "+Yl(e)+")");case 2:var r=e[0],o=e[1];if(r===o)return Bh(t)?n(c(t.valueOf(),r,o),t.storage()):c(t,r,o);throw new RangeError("Matrix must be square (size: "+Yl(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Yl(e)+")")}},any:function(t){return i(1,t)}});function c(t,e,n){var c,u,f,p,d;if(1===e){if(0===(p=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,p)]]}if(2===e){var g=s(t);if(0===g)throw Error("Cannot calculate inverse, determinant is zero");return[[i(t[1][1],g),i(a(t[0][1]),g)],[i(a(t[1][0]),g),i(t[0][0],g)]]}var m=t.concat();for(c=0;c<e;c++)m[c]=m[c].concat();for(var y=h(e).valueOf(),v=0;v<n;v++){var _=l(m[v][v]),x=v;for(c=v+1;c<e;)l(m[c][v])>_&&(_=l(m[c][v]),x=c),c++;if(0===_)throw Error("Cannot calculate inverse, determinant is zero");(c=x)!==v&&(d=m[v],m[v]=m[c],m[c]=d,d=y[v],y[v]=y[c],y[c]=d);var w=m[v],b=y[v];for(c=0;c<e;c++){var M=m[c],C=y[c];if(c!==v){if(0!==M[v]){for(f=i(a(M[v]),w[v]),u=v;u<n;u++)M[u]=r(M[u],o(f,w[u]));for(u=0;u<n;u++)C[u]=r(C[u],o(f,b[u]))}}else{for(f=w[v],u=v;u<n;u++)M[u]=i(M[u],f);for(u=0;u<n;u++)C[u]=i(C[u],f)}}}return y}})),Uu=bl("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(t=>{var{typed:e,matrix:n,multiply:i,equalScalar:r,divideScalar:o,inv:a}=t,s=tu({typed:e,equalScalar:r}),h=iu({typed:e});return e("divide",_l({"Array | Matrix, Array | Matrix":function(t,e){return i(t,a(e))},"DenseMatrix, any":function(t,e){return h(t,e,o,!1)},"SparseMatrix, any":function(t,e){return s(t,e,o,!1)},"Array, any":function(t,e){return h(n(t),e,o,!1).valueOf()},"any, Array | Matrix":function(t,e){return i(t,a(e))}},o.signatures))})),Gu="median",Hu=bl(Gu,["typed","add","divide","compare","partitionSelect"],(t=>{var{typed:e,add:n,divide:i,compare:r,partitionSelect:o}=t;function a(t){try{var e=(t=sc(t.valueOf())).length;if(0===e)throw new Error("Cannot calculate median of an empty array");if(e%2==0){for(var n=e/2-1,i=o(t,n+1),a=t[n],l=0;l<n;++l)r(t[l],a)>0&&(a=t[l]);return h(a,i)}var c=o(t,(e-1)/2);return s(c)}catch(t){throw function(t,e,n){var i;return-1!==String(t).indexOf("Unexpected type")?(i=arguments.length>2?" (type: "+yl(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+i)):-1!==String(t).indexOf("complex numbers")?(i=arguments.length>2?" (type: "+yl(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+i)):t}(t,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(t){return t}}),h=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(t,e){return i(n(t,e),2)}});return e(Gu,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("median(A, dim) is not yet supported")},"...":function(t){if(function(t){for(var e=0;e<t.length;e++)if(Uh(t[e]))return!0;return!1}(t))throw new TypeError("Scalar values expected in function median");return a(t)}})})),Wu=Cl({config:Ih}),Vu=Dl({}),qu=Hl({}),Yu=Wl({}),Xu=lc({Matrix:Yu}),Ku=vc({BigNumber:Wu,Complex:Vu,DenseMatrix:Xu,Fraction:qu}),Zu=Pc({typed:Ku}),$u=Ic({typed:Ku}),Qu=Ac({BigNumber:Wu,typed:Ku}),Ju=Rc({typed:Ku}),tf=Fc({config:Ih,typed:Ku}),ef=Bc({typed:Ku}),nf=Uc({typed:Ku}),rf=Gc({Matrix:Yu,equalScalar:tf,typed:Ku}),of=Wc({typed:Ku}),af=qc({typed:Ku}),sf=Yc({Fraction:qu,typed:Ku}),hf=Kc({typed:Ku}),lf=$c({DenseMatrix:Xu,Matrix:Yu,SparseMatrix:rf,typed:Ku}),cf=su({bignumber:Qu,fraction:sf,number:nf}),uf=lu({matrix:lf,config:Ih,typed:Ku}),ff=fu({DenseMatrix:Xu,config:Ih,matrix:lf,typed:Ku}),pf=gu({DenseMatrix:Xu,addScalar:$u,equalScalar:tf,matrix:lf,typed:Ku,unaryMinus:af}),df=yu({matrix:lf,typed:Ku}),gf=_u({BigNumber:Wu,DenseMatrix:Xu,Fraction:qu,config:Ih,equalScalar:tf,matrix:lf,typed:Ku}),mf=wu({numeric:cf,typed:Ku}),yf=Su({compare:gf,isNaN:of,isNumeric:hf,typed:Ku}),vf=Ou({DenseMatrix:Xu,SparseMatrix:rf,addScalar:$u,equalScalar:tf,matrix:lf,typed:Ku}),_f=Pu({addScalar:$u,conj:Ju,multiplyScalar:ef,size:uf,typed:Ku}),xf=Iu({BigNumber:Wu,DenseMatrix:Xu,SparseMatrix:rf,config:Ih,matrix:lf,typed:Ku}),wf=Lu({DenseMatrix:Xu,config:Ih,matrix:lf,typed:Ku}),bf=Nu({addScalar:$u,dot:_f,equalScalar:tf,matrix:lf,multiplyScalar:ef,typed:Ku}),Mf=Bu({abs:Zu,addScalar:$u,det:zu({lup:ju({DenseMatrix:Xu,Spa:Fu({FibonacciHeap:Du({larger:wf,smaller:ff}),addScalar:$u,equalScalar:tf}),SparseMatrix:rf,abs:Zu,addScalar:$u,divideScalar:mf,equalScalar:tf,larger:wf,matrix:lf,multiplyScalar:ef,subtract:pf,typed:Ku,unaryMinus:af}),matrix:lf,multiply:bf,subtract:pf,typed:Ku,unaryMinus:af}),divideScalar:mf,identity:xf,matrix:lf,multiply:bf,typed:Ku,unaryMinus:af}),Cf=Hu({add:vf,compare:gf,divide:Uu({divideScalar:mf,equalScalar:tf,inv:Mf,matrix:lf,multiply:bf,typed:Ku}),partitionSelect:yf,typed:Ku});sr.register(pr,wr,Pr,Mr,Ln,Nn,Dn,Bn,po,yo,_o,To,No,Fo,Ar,Xr,$r,Jr,fo);class Sf{constructor(t,e){this.element=t,this.type=e,this.colorWheel=new Ma,this.data={labels:void 0,datasets:[]},this.formatTooltip=void 0,this.options={responsive:!0,maintainAspectRatio:!1,resizeDelay:250,plugins:{legend:{position:"bottom"},tooltip:{intersect:!1,callbacks:{label:({dataset:t,raw:e})=>{if(e){const{label:n}=t;let i=n||"";i&&(i+=": ");let r=e;return t.formatValue?r=t.formatValue(r):this.formatTooltip?r=this.formatTooltip(r):"object"==typeof r&&null!==r&&r.hasOwnProperty("y")&&(r=Th(r.y)),i=`${i} ${r}`,t&&t.unit&&(i=`${i}${t.unit}`),i}}}}},scales:{x:{grid:{drawOnChartArea:!1,drawTicks:!0},ticks:{display:!0,maxRotation:0}}}}}setLabels(t){this.data.labels=t}setMaxX(t,e){this.setScaleX(0,t,e)}setScaleX(t,e,n){this.options.scales.x.type="linear",this.options.scales.x.min=t,this.options.scales.x.max=e,n&&(this.options.scales.x.ticks.callback=n)}linearTimeScale(t,e){let n=((t,e)=>{const{years:n,months:i,days:r,hours:o}=function(t){var e=t.start,n=t.end;jo(1,arguments);var i=zo(e),r=zo(n);if(!la(i))throw new RangeError("Start Date is invalid");if(!la(r))throw new RangeError("End Date is invalid");var o={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},a=Bo(i,r);o.years=Math.abs(Go(i,r));var s=ga(i,{years:a*o.years});o.months=Math.abs(Yo(s,r));var h=ga(s,{months:a*o.months});o.days=Math.abs(Jo(h,r));var l=ga(h,{days:a*o.days});o.hours=Math.abs(oa(l,r));var c=ga(l,{hours:a*o.hours});o.minutes=Math.abs(aa(c,r));var u=ga(c,{minutes:a*o.minutes});return o.seconds=Math.abs(sa(u,r)),o}({start:t,end:e});let a=t,s=e;return n>1?(a=ma(t),s=ma(ya(e,1))):i>0?(a=va(t),s=va(pa(e,1))):(a=Ko(t),s=Ko(ua(e,1))),{min:_a(a),max:_a(s)}})(new Date(t),new Date(e));this.setScaleX(n.min,n.max),this.options.scales.x.type="time",this.formatTooltip=({x:t,y:e})=>`${Oh(new Date(t))}: ${Th(e)}`}addDataset(t,e,n){let i=this.colorWheel.next;const r={label:t,borderColor:i||"#cccccc",backgroundColor:i||"#cccccc",data:e,pointRadius:0};return Object.assign(r,n||{}),this.data.datasets.push(r),new wa(r)}addTrendLine(t,e,n){if(e<0&&e>10)return void console.warn("Invalid value for degree: ",e);const{data:i,label:r,unit:o}=t.options,a=((t,e,n)=>e>0?((t,e,n)=>{const i=[],r=[],o=((t,e)=>{if(e>0){const n=e>0?1e3*e:0,i=t.map((({x:t})=>t)).sort(),r=Cf(i);return t=>(t-r)/n}return t=>t})(t,n);for(let a of t){const{x:t,y:s}=a,h=o(t),l=[1];for(let t=1;t<=e;t++)l.push(Math.pow(h,t));n>0&&(l.push(Math.sin(2*Math.PI*h)),l.push(Math.cos(2*Math.PI*h)-1)),i.push(l),r.push(s)}const a=lf(i),s=df([r]),h=df(a),l=bf(h,a),c=Mf(l),u=bf(h,s),f=bf(c,u),p=[];for(let t=0;t<=e;t++){const e=f.get([t,0]);p.push(e)}const d=f.get([0,0]),g=[];for(let t=1;t<=e;t++){const e=f.get([t,0]);g.push(e)}const m=n>0?f.get([e+1,0]):void 0,y=n>0?f.get([e+2,0]):void 0;return t=>{let e=d;const n=o(t);let i=1;for(let t of g)e+=t*Math.pow(n,i),i++;if(void 0!==m){const t=Math.sin(2*Math.PI*n),i=Math.cos(2*Math.PI*n)-1;e=e+m*t+y*i}return e}})(t,e,n):()=>1)(i,e,n),s=i.map((t=>{return{x:e=t.x,y:a(e)};var e}));this.addDataset(`${r} - trend`,s,{pointRadius:0,showLine:!0,borderDash:[10,5],unit:o,order:-10})}buildScales(){const t=this.data,e={};t.datasets.map((t=>t.unit)).map((t=>t||"y")).forEach((t=>(t in e?e[t]++:e[t]=1,e)));let n=Object.keys(e).reduce(((t,n)=>e[t]>e[n]?t:n));const i=this.options.scales;Object.keys(e).forEach((t=>{i[t]={position:n===t?"left":"right",weight:e[t],ticks:{callback:(e,n,i)=>{let r=Th(e);return"y"!==t&&(r=`${e}${t}`),r}},grid:{display:n===t}}})),t.datasets.forEach((t=>{null!==t.unit?t.yAxisID=t.unit:t.yAxisID="y"}))}buildOptions(){return this.buildScales(),{type:this.type,data:this.data,options:this.options}}build(){const t=this.buildOptions();this.instance=new sr(this.element,t)}}class Ef extends Sf{constructor(t){super(t,"scatter")}addDataset(t,e,n){const i=Object.assign({pointRadius:3},n||{});return super.addDataset(t,e,i)}}class Tf extends Sf{constructor(t){super(t,"line")}}class Of extends Sf{constructor(t){super(t,"line"),this.options.scales.x.type="time"}}const Pf={scatter:t=>new Ef(t),line:t=>new Tf(t),time_series:t=>new Of(t)};var kf=a(612),If=a.n(kf);class Af{constructor(t,e){const n=[];this.listeners=n;const i=If().create({el:t,position:"top-start",margin:16,inline:!1,components:{preview:!0,opacity:e,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!0,save:!0}}}),r=this;i.on("change",((t,e,i)=>{r.cleared=null===t,n.forEach((t=>t()))})),i.on("save",((t,e)=>{r.cleared=null===t,r.save=!0})),this.pickr=i;const o=i.getRoot(),a=()=>{i.getColor()&&i.setColor(i.getColor().toRGBA().toString()),o.button.removeEventListener("click",a)};o.button.addEventListener("click",a)}addListener(t){this.listeners.push(t)}setValue(t){var e=this;setTimeout((()=>e.pickr.setColor(t)),1)}enable(){this.pickr.enable()}disable(){this.pickr.disable()}destroyAndRemove(){this.pickr.destroyAndRemove()}getValue(){const t=this.pickr.getColor();if(this.save&&!this.cleared&&t)return t.toRGBA()}setVisible(t){this.pickr.getRoot().root.style.display=t?"":"none"}}const Lf={ColourBox:(t,e,n)=>new Af(t,e,n)},Rf=[137,"H","D","F","\r","\n",26,"\n"],Nf=t=>"string"==typeof t?t.charCodeAt(0):t;var Df=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();const Ff=Df,jf="propertychange",zf=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function Bf(t,e){return t>e?1:t<e?-1:0}function Uf(t,e){return t.indexOf(e)>=0}function Gf(t,e,n){var i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;var r=void 0;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof n?n(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return i-1}function Hf(t,e,n){for(;e<n;){var i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function Wf(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]}function Vf(t,e){for(var n,i=t.length>>>0,r=0;r<i;r++)if(e(n=t[r],r,t))return n;return null}function qf(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Yf(t,e){var n;return t.every((function(i,r){return n=r,!e(i,r,t)}))?-1:n}function Xf(){return!0}function Kf(){return!1}function Zf(){}var $f="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1,r=arguments.length;i<r;++i){var o=arguments[i];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function Qf(t){for(var e in t)delete t[e]}var Jf="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function tp(t){var e;for(e in t)return!1;return!e}var ep,np=(ep=function(t,e){return ep=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ep(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ep(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ip=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return np(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Ff(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[n];if(r){var o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];for(var s=0,h=r.length;s<h;++s)if(!1===(i="handleEvent"in r[s]?r[s].handleEvent(e):r[s].call(this,e))||e.propagationStopped){i=!1;break}if(--o[n],0===o[n]){var l=a[n];for(delete a[n];l--;)this.removeEventListener(n,Zf);delete o[n]}return i}},e.prototype.disposeInternal=function(){this.listeners_&&Qf(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=Zf,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}},e}(zf);const rp=ip,op="change",ap="contextmenu",sp="click",hp="keydown",lp="keypress",cp="touchmove",up="wheel";function fp(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function pp(t,e,n,i){return fp(t,e,n,i,!0)}function dp(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Qf(t))}var gp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),mp=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return gp(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(op)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=fp(this,t[r],e);return i}return fp(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var i=t.length;n=new Array(i);for(var r=0;r<i;++r)n[r]=pp(this,t[r],e)}else n=pp(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)yp(n);else if(Array.isArray(t))for(var i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)},e}(rp);function yp(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)dp(t[e]);else dp(t)}mp.prototype.on,mp.prototype.once,mp.prototype.un;const vp=mp;function _p(){return function(){throw new Error("Unimplemented abstract method.")}()}var xp=0;function wp(t){return t.ol_uid||(t.ol_uid=String(++xp))}var bp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Mp=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.key=n,r.oldValue=i,r}return bp(e,t),e}(Ff),Cp=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,wp(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return bp(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&$f({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var n;n="change:"+t,this.dispatchEvent(new Mp(n,t,e)),n=jf,this.dispatchEvent(new Mp(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var i=this.values_||(this.values_={});if(n)i[t]=e;else{var r=i[t];i[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&$f(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],tp(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(vp);const Sp=Cp;var Ep=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const Tp=function(t){function e(e){var n=this,i="Assertion failed. See https://openlayers.org/en/v"+"6.12.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,i)||this).code=e,n.name="AssertionError",n.message=i,n}return Ep(e,t),e}(Error);function Op(t,e){if(!t)throw new Tp(e)}var Pp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kp=function(t){function e(e){var n=t.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;n.setGeometry(i)}else{var r=e;n.setProperties(r)}return n}return Pp(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(dp(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=fp(t,op,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,n;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?n=e:(Op("function"==typeof e.getZIndex,41),n=[e]),function(){return n}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Sp);const Ip=kp;var Ap={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Lp={};Lp[Ap.RADIANS]=6370997/(2*Math.PI),Lp[Ap.DEGREES]=2*Math.PI*6370997/360,Lp[Ap.FEET]=.3048,Lp[Ap.METERS]=1,Lp[Ap.USFEET]=1200/3937;const Rp=Ap;var Np,Dp="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Fp=-1!==Dp.indexOf("firefox"),jp=(-1!==Dp.indexOf("safari")&&Dp.indexOf("chrom"),-1!==Dp.indexOf("webkit")&&-1==Dp.indexOf("edge")),zp=-1!==Dp.indexOf("macintosh"),Bp="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Up="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Gp="undefined"!=typeof Image&&Image.prototype.decode,Hp=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Wp(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Vp(t,e,n,i,r,o,a,s){var h=Math.sin(o),l=Math.cos(o);return t[0]=i*l,t[1]=r*h,t[2]=-i*h,t[3]=r*l,t[4]=a*i*l-s*i*h+e,t[5]=a*r*h+s*r*l+n,t}function qp(t,e){var n,i=(n=e)[0]*n[3]-n[1]*n[2];Op(0!==i,32);var r=e[0],o=e[1],a=e[2],s=e[3],h=e[4],l=e[5];return t[0]=s/i,t[1]=-o/i,t[2]=-a/i,t[3]=r/i,t[4]=(a*l-s*h)/i,t[5]=-(r*l-o*h)/i,t}function Yp(t){var e="matrix("+t.join(", ")+")";if(Up)return e;var n=Np||(Np=document.createElement("div"));return n.style.transform=e,n.style.transform}new Array(6);const Xp="top-left";function Kp(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,i=t.length;n<i;++n)cd(e,t[n]);return e}function Zp(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function $p(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Qp(t,e,n){var i,r;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r}function Jp(t,e){return ed(t,e[0],e[1])}function td(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function ed(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function nd(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],a=e[0],s=e[1],h=0;return a<n?h|=16:a>r&&(h|=4),s<i?h|=8:s>o&&(h|=2),0===h&&(h=1),h}function id(){return[1/0,1/0,-1/0,-1/0]}function rd(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function od(t){return rd(1/0,1/0,-1/0,-1/0,t)}function ad(t,e){var n=t[0],i=t[1];return rd(n,i,n,i,e)}function sd(t,e,n,i,r){return ud(od(r),t,e,n,i)}function hd(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ld(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function cd(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ud(t,e,n,i,r){for(;n<i;n+=r)fd(t,e[n],e[n+1]);return t}function fd(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function pd(t,e){var n;return(n=e(gd(t)))||(n=e(md(t)))||(n=e(Md(t)))?n:(n=e(bd(t)))||!1}function dd(t){var e=0;return Ed(t)||(e=Cd(t)*xd(t)),e}function gd(t){return[t[0],t[1]]}function md(t){return[t[2],t[1]]}function yd(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function vd(t,e){var n;return"bottom-left"===e?n=gd(t):"bottom-right"===e?n=md(t):e===Xp?n=bd(t):"top-right"===e?n=Md(t):Op(!1,13),n}function _d(t,e,n,i,r){var o=e*i[0]/2,a=e*i[1]/2,s=Math.cos(n),h=Math.sin(n),l=o*s,c=o*h,u=a*s,f=a*h,p=t[0],d=t[1],g=p-l+f,m=p-l-f,y=p+l-f,v=p+l+f,_=d-c-u,x=d-c+u,w=d+c+u,b=d+c-u;return rd(Math.min(g,m,y,v),Math.min(_,x,w,b),Math.max(g,m,y,v),Math.max(_,x,w,b),r)}function xd(t){return t[3]-t[1]}function wd(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return Sd(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):od(i),i}function bd(t){return[t[0],t[3]]}function Md(t){return[t[2],t[3]]}function Cd(t){return t[2]-t[0]}function Sd(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ed(t){return t[2]<t[0]||t[3]<t[1]}var Td=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Lp[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();const Od=Td;function Pd(t,e,n){return Math.min(Math.max(t,e),n)}var kd="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},Id="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function Ad(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var h=((t-n)*a+(e-i)*s)/(a*a+s*s);h>1?(n=r,i=o):h>0&&(n+=a*h,i+=s*h)}return Ld(t,e,n,i)}function Ld(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o}function Rd(t){return t*Math.PI/180}function Nd(t,e){var n=t%e;return n*e<0?n+e:n}function Dd(t,e,n){return t+n*(e-t)}function Fd(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function jd(t,e){return Math.round(Fd(t,e))}function zd(t,e){return Math.floor(Fd(t,e))}function Bd(t,e){return Math.ceil(Fd(t,e))}var Ud=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Gd=6378137,Hd=Math.PI*Gd,Wd=[-Hd,-Hd,Hd,Hd],Vd=[-180,-85,180,85],qd=Gd*Math.log(Math.tan(Math.PI/2)),Yd=function(t){function e(e){return t.call(this,{code:e,units:Rp.METERS,extent:Wd,global:!0,worldExtent:Vd,getPointResolution:function(t,e){return t/kd(e[1]/Gd)}})||this}return Ud(e,t),e}(Od),Xd=[new Yd("EPSG:3857"),new Yd("EPSG:102100"),new Yd("EPSG:102113"),new Yd("EPSG:900913"),new Yd("http://www.opengis.net/def/crs/EPSG/0/3857"),new Yd("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Kd=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Zd=[-180,-90,180,90],$d=6378137*Math.PI/180,Qd=function(t){function e(e,n){return t.call(this,{code:e,units:Rp.DEGREES,extent:Zd,axisOrientation:n,global:!0,metersPerUnit:$d,worldExtent:Zd})||this}return Kd(e,t),e}(Od),Jd=[new Qd("CRS:84"),new Qd("EPSG:4326","neu"),new Qd("urn:ogc:def:crs:OGC:1.3:CRS84"),new Qd("urn:ogc:def:crs:OGC:2:84"),new Qd("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Qd("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Qd("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],tg={},eg={};function ng(t,e,n){var i=t.getCode(),r=e.getCode();i in eg||(eg[i]={}),eg[i][r]=n}function ig(t,e){var n;return t in eg&&e in eg[t]&&(n=eg[t][e]),n}function rg(t,e,n){var i=n||6371008.8,r=Rd(t[1]),o=Rd(e[1]),a=(o-r)/2,s=Rd(e[0]-t[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function og(t,e){var n,i,r=t[0],o=t[1],a=e[0],s=e[1],h=a[0],l=a[1],c=s[0],u=s[1],f=c-h,p=u-l,d=0===f&&0===p?0:(f*(r-h)+p*(o-l))/(f*f+p*p||0);return d<=0?(n=h,i=l):d>=1?(n=c,i=u):(n=h+d*f,i=l+d*p),[n,i]}function ag(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function sg(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function hg(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function lg(t,e){return Math.sqrt(hg(t,e))}function cg(t,e){if(e.canWrapX()){var n=Cd(e.getExtent()),i=ug(t,e,n);i&&(t[0]-=i*n)}return t}function ug(t,e,n){var i=e.getExtent(),r=0;if(e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])){var o=n||Cd(i);r=Math.floor((t[0]-i[0])/o)}return r}function fg(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i}function pg(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function dg(t){!function(t,e){tg[t]=e}(t.getCode(),t),ng(t,t,fg)}function gg(t){return"string"==typeof t?tg[e=t]||tg[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function mg(t,e,n,i){var r,o=(t=gg(t)).getPointResolutionFunc();if(o)r=o(e,n),i&&i!==t.getUnits()&&(s=t.getMetersPerUnit())&&(r=r*s/Lp[i]);else{var a=t.getUnits();if(a==Rp.DEGREES&&!i||i==Rp.DEGREES)r=e;else{var s,h=wg(t,gg("EPSG:4326"));if(h===pg&&a!==Rp.DEGREES)r=e*t.getMetersPerUnit();else{var l=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];r=(rg((l=h(l,l,2)).slice(0,2),l.slice(2,4))+rg(l.slice(4,6),l.slice(6,8)))/2}void 0!==(s=i?Lp[i]:t.getMetersPerUnit())&&(r/=s)}}return r}function yg(t){!function(t){t.forEach(dg)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&ng(e,t,fg)}))}))}function vg(t,e){return t?"string"==typeof t?gg(t):t:gg(e)}function _g(t){return function(e,n,i){for(var r=e.length,o=void 0!==i?i:2,a=void 0!==n?n:new Array(r),s=0;s<r;s+=o){var h=t([e[s],e[s+1]]);a[s]=h[0],a[s+1]=h[1];for(var l=o-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function xg(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||wg(t,e)===fg)&&n}function wg(t,e){var n=ig(t.getCode(),e.getCode());return n||(n=pg),n}function bg(t,e){return wg(gg(t),gg(e))}function Mg(t,e,n){return bg(e,n)(t,void 0,t.length)}function Cg(t,e,n,i){return function(t,e,n,i){var r=[];if(i>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<i;++s)r.push(t[0]+o*s/i,t[1],t[2],t[1]+a*s/i,t[2]-o*s/i,t[3],t[0],t[3]-a*s/i);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var h=[],l=[],c=(s=0,r.length);s<c;s+=2)h.push(r[s]),l.push(r[s+1]);return function(t,e,n){return rd(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(h,l,n)}(t,bg(e,n),void 0,i)}var Sg,Eg,Tg,Og=null;function Pg(){return Og}function kg(t,e){return t}function Ig(t,e){return t}function Ag(t,e){return t}function Lg(t,e){return t}function Rg(t,e){return t}function Ng(t,e,n){return function(i){var r,o,a=i[0],s=i[1];if(t.canWrapX()){var h=t.getExtent(),l=Cd(h);(o=ug(i,t,l))&&(a-=o*l),a=Pd(a,h[0],h[2]),s=Pd(s,h[1],h[3]),r=n([a,s])}else r=n(i);return o&&e.canWrapX()&&(r[0]+=o*Cd(e.getExtent())),r}}function Dg(t,e,n,i,r,o){for(var a=o||[],s=0,h=e;h<n;h+=i){var l=t[h],c=t[h+1];a[s++]=r[0]*l+r[2]*c+r[4],a[s++]=r[1]*l+r[3]*c+r[5]}return o&&a.length!=s&&(a.length=s),a}function Fg(t,e,n,i,r,o,a){for(var s=a||[],h=Math.cos(r),l=Math.sin(r),c=o[0],u=o[1],f=0,p=e;p<n;p+=i){var d=t[p]-c,g=t[p+1]-u;s[f++]=c+d*h-g*l,s[f++]=u+d*l+g*h;for(var m=p+2;m<p+i;++m)s[f++]=t[m]}return a&&s.length!=f&&(s.length=f),s}function jg(t,e,n,i,r,o,a){for(var s=a||[],h=0,l=e;l<n;l+=i){s[h++]=t[l]+r,s[h++]=t[l+1]+o;for(var c=l+2;c<l+i;++c)s[h++]=t[c]}return a&&s.length!=h&&(s.length=h),s}yg(Xd),yg(Jd),Sg=Xd,Eg=function(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var a=0;a<i;a+=r){o[a]=Hd*t[a]/180;var s=Gd*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));s>qd?s=qd:s<-qd&&(s=-qd),o[a+1]=s}return o},Tg=function(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var a=0;a<i;a+=r)o[a]=180*t[a]/Hd,o[a+1]=360*Math.atan(Math.exp(t[a+1]/Gd))/Math.PI-90;return o},Jd.forEach((function(t){Sg.forEach((function(e){ng(t,e,Eg),ng(e,t,Tg)}))}));var zg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bg=[1,0,0,1,0,0],Ug=function(t){function e(){var e,n,i,r,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&qf(t,i)||(o=!0,r=this,i=t,n=e.apply(this,arguments)),n}),a}return zg(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return _p()},e.prototype.closestPointXY=function(t,e,n,i){return _p()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return _p()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&od(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){_p()},e.prototype.scale=function(t,e,n){_p()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return _p()},e.prototype.getType=function(){return _p()},e.prototype.applyTransform=function(t){_p()},e.prototype.intersectsExtent=function(t){return _p()},e.prototype.translate=function(t,e){_p()},e.prototype.transform=function(t,e){var n=gg(t),i=n.getUnits()==Rp.TILE_PIXELS?function(t,i,r){var o=n.getExtent(),a=n.getWorldExtent(),s=xd(a)/xd(o);return Vp(Bg,a[0],a[3],s,-s,0,0,0),Dg(t,0,t.length,r,Bg,i),bg(n,e)(t,i,r)}:bg(n,e);return this.applyTransform(i),this},e}(Sp);const Gg=Ug,Hg={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};var Wg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vg=function(t){function e(e){var n=t.call(this)||this;return n.geometries_=e||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return Wg(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(dp),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(fp(this.geometries_[t],op,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){if(i<Qp(this.getExtent(),t,e))return i;for(var r=this.geometries_,o=0,a=r.length;o<a;++o)i=r[o].closestPointXY(t,e,n,i);return i},e.prototype.containsXY=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){od(t);for(var e=this.geometries_,n=0,i=e.length;n<i;++n)ld(t,e[n].getExtent());return t},e.prototype.getGeometries=function(){return qg(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,r=!1,o=0,a=i.length;o<a;++o){var s=i[o],h=s.getSimplifiedGeometry(t);n.push(h),h!==s&&(r=!0)}if(r){var l=new e(null);return l.setGeometriesArray(n),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return Hg.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var i=n;i||(i=yd(this.getExtent()));for(var r=this.geometries_,o=0,a=r.length;o<a;++o)r[o].scale(t,e,i);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(qg(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(Gg);function qg(t){for(var e=[],n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}const Yg=Vg,Xg=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var n;if(e){var i=e.dataProjection?gg(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()===Rp.TILE_PIXELS&&(i=gg(i)).setWorldExtent(e.extent),n={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(t){return $f({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return _p()},t.prototype.readFeature=function(t,e){return _p()},t.prototype.readFeatures=function(t,e){return _p()},t.prototype.readGeometry=function(t,e){return _p()},t.prototype.readProjection=function(t){return _p()},t.prototype.writeFeature=function(t,e){return _p()},t.prototype.writeFeatures=function(t,e){return _p()},t.prototype.writeGeometry=function(t,e){return _p()},t}();function Kg(t,e,n){var i,r=n?gg(n.featureProjection):null,o=n?gg(n.dataProjection):null;if(i=r&&o&&!xg(r,o)?(e?t.clone():t).transform(e?r:o,e?o:r):t,e&&n&&void 0!==n.decimals){var a=Math.pow(10,n.decimals);i===t&&(i=t.clone()),i.applyTransform((function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return i}const Zg="arraybuffer",$g="json",Qg="text";var Jg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),tm=function(t){function e(){return t.call(this)||this}return Jg(e,t),e.prototype.getType=function(){return $g},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(em(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(em(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return _p()},e.prototype.readFeaturesFromObject=function(t,e){return _p()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(em(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return _p()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(em(t))},e.prototype.readProjectionFromObject=function(t){return _p()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return _p()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return _p()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return _p()},e}(Xg);function em(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}const nm=tm,im="XY",rm="XYZ",om="XYM",am="XYZM";var sm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),hm=function(t){function e(){var e=t.call(this)||this;return e.layout=im,e.stride=2,e.flatCoordinates=null,e}return sm(e,t),e.prototype.computeExtent=function(t){return sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return _p()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=lm(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){_p()},e.prototype.setLayout=function(t,e,n){var i;if(t)i=lm(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout=im,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=im:3==t?e=rm:4==t&&(e=am),e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();Fg(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var r=n;r||(r=yd(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,n,i,r,o,a,s){for(var h=s||[],l=a[0],c=a[1],u=0,f=0;f<n;f+=i){var p=t[f]-l,d=t[f+1]-c;h[u++]=l+r*p,h[u++]=c+o*d;for(var g=f+2;g<f+i;++g)h[u++]=t[g]}s&&h.length!=u&&(h.length=u)}(o,0,o.length,a,t,i,r,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();jg(n,0,n.length,i,t,e,n),this.changed()}},e}(Gg);function lm(t){var e;return t==im?e=2:t==rm||t==om?e=3:t==am&&(e=4),e}const cm=hm;function um(t,e,n,i,r,o,a){var s,h=t[e],l=t[e+1],c=t[n]-h,u=t[n+1]-l;if(0===c&&0===u)s=e;else{var f=((r-h)*c+(o-l)*u)/(c*c+u*u);if(f>1)s=n;else{if(f>0){for(var p=0;p<i;++p)a[p]=Dd(t[e+p],t[n+p],f);return void(a.length=i)}s=e}}for(p=0;p<i;++p)a[p]=t[s+p];a.length=i}function fm(t,e,n,i,r){var o=t[e],a=t[e+1];for(e+=i;e<n;e+=i){var s=t[e],h=t[e+1],l=Ld(o,a,s,h);l>r&&(r=l),o=s,a=h}return r}function pm(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o];r=fm(t,e,s,i,r),e=s}return r}function dm(t,e,n,i,r,o,a,s,h,l,c){if(e==n)return l;var u,f;if(0===r){if((f=Ld(a,s,t[e],t[e+1]))<l){for(u=0;u<i;++u)h[u]=t[e+u];return h.length=i,f}return l}for(var p=c||[NaN,NaN],d=e+i;d<n;)if(um(t,d-i,d,i,a,s,p),(f=Ld(a,s,p[0],p[1]))<l){for(l=f,u=0;u<i;++u)h[u]=p[u];h.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(l))/r|0,1);if(o&&(um(t,n-i,e,i,a,s,p),(f=Ld(a,s,p[0],p[1]))<l)){for(l=f,u=0;u<i;++u)h[u]=p[u];h.length=i}return l}function gm(t,e,n,i,r,o,a,s,h,l,c){for(var u=c||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];l=dm(t,e,d,i,r,o,a,s,h,l,u),e=d}return l}function mm(t,e,n,i){for(var r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}function ym(t,e,n,i){for(var r=0,o=n.length;r<o;++r)for(var a=n[r],s=0;s<i;++s)t[e++]=a[s];return e}function vm(t,e,n,i,r){for(var o=r||[],a=0,s=0,h=n.length;s<h;++s){var l=ym(t,e,n[s],i);o[a++]=l,e=l}return o.length=a,o}function _m(t,e,n,i,r,o,a){var s=(n-e)/i;if(s<3){for(;e<n;e+=i)o[a++]=t[e],o[a++]=t[e+1];return a}var h=new Array(s);h[0]=1,h[s-1]=1;for(var l=[e,n-i],c=0;l.length>0;){for(var u=l.pop(),f=l.pop(),p=0,d=t[f],g=t[f+1],m=t[u],y=t[u+1],v=f+i;v<u;v+=i){var _=Ad(t[v],t[v+1],d,g,m,y);_>p&&(c=v,p=_)}p>r&&(h[(c-e)/i]=1,f+i<c&&l.push(f,c),c+i<u&&l.push(c,u))}for(v=0;v<s;++v)h[v]&&(o[a++]=t[e+v*i],o[a++]=t[e+v*i+1]);return a}function xm(t,e){return e*Math.round(t/e)}function wm(t,e,n,i,r,o,a){if(e==n)return a;var s,h,l=xm(t[e],r),c=xm(t[e+1],r);e+=i,o[a++]=l,o[a++]=c;do{if(s=xm(t[e],r),h=xm(t[e+1],r),(e+=i)==n)return o[a++]=s,o[a++]=h,a}while(s==l&&h==c);for(;e<n;){var u=xm(t[e],r),f=xm(t[e+1],r);if(e+=i,u!=s||f!=h){var p=s-l,d=h-c,g=u-l,m=f-c;p*m==d*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(d<0&&m<d||d==m||d>0&&m>d)?(s=u,h=f):(o[a++]=s,o[a++]=h,l=s,c=h,s=u,h=f)}}return o[a++]=s,o[a++]=h,a}function bm(t,e,n,i,r,o,a,s){for(var h=0,l=n.length;h<l;++h){var c=n[h];a=wm(t,e,c,i,r,o,a),s.push(a),e=c}return a}function Mm(t,e,n,i,r){var o;for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)))return o;return!1}function Cm(t,e,n,i,r){for(var o=void 0!==r?r:[],a=0,s=e;s<n;s+=i)o[a++]=t.slice(s,s+i);return o.length=a,o}function Sm(t,e,n,i,r){for(var o=void 0!==r?r:[],a=0,s=0,h=n.length;s<h;++s){var l=n[s];o[a++]=Cm(t,e,l,i,o[a]),e=l}return o.length=a,o}function Em(t,e,n,i,r){for(var o=void 0!==r?r:[],a=0,s=0,h=n.length;s<h;++s){var l=n[s];o[a++]=Sm(t,e,l,i,o[a]),e=l[l.length-1]}return o.length=a,o}function Tm(t,e,n,i,r,o,a){var s,h,l=(n-e)/i;if(1===l)s=e;else if(2===l)s=e,h=r;else if(0!==l){for(var c=t[e],u=t[e+1],f=0,p=[0],d=e+i;d<n;d+=i){var g=t[d],m=t[d+1];f+=Math.sqrt((g-c)*(g-c)+(m-u)*(m-u)),p.push(f),c=g,u=m}var y=r*f,v=function(t,e,n){for(var i,r,o=Bf,a=0,s=t.length,h=!1;a<s;)(r=+o(t[i=a+(s-a>>1)],e))<0?a=i+1:(s=i,h=!r);return h?a:~a}(p,y);v<0?(h=(y-p[-v-2])/(p[-v-1]-p[-v-2]),s=e+(-v-2)*i):s=e+v*i}var _=a>1?a:2,x=o||new Array(_);for(d=0;d<_;++d)x[d]=void 0===s?NaN:void 0===h?t[s+d]:Dd(t[s+d],t[s+i+d],h);return x}function Om(t,e,n,i,r,o){if(n==e)return null;var a;if(r<t[e+i-1])return o?((a=t.slice(e,e+i))[i-1]=r,a):null;if(t[n-1]<r)return o?((a=t.slice(n-i,n))[i-1]=r,a):null;if(r==t[e+i-1])return t.slice(e,e+i);for(var s=e/i,h=n/i;s<h;){var l=s+h>>1;r<t[(l+1)*i-1]?h=l:s=l+1}var c=t[s*i-1];if(r==c)return t.slice((s-1)*i,(s-1)*i+i);var u=(r-c)/(t[(s+1)*i-1]-c);a=[];for(var f=0;f<i-1;++f)a.push(Dd(t[(s-1)*i+f],t[s*i+f],u));return a.push(r),a}function Pm(t,e,n,i,r){return!pd(r,(function(r){return!km(t,e,n,i,r[0],r[1])}))}function km(t,e,n,i,r,o){for(var a=0,s=t[n-i],h=t[n-i+1];e<n;e+=i){var l=t[e],c=t[e+1];h<=o?c>o&&(l-s)*(o-h)-(r-s)*(c-h)>0&&a++:c<=o&&(l-s)*(o-h)-(r-s)*(c-h)<0&&a--,s=l,h=c}return 0!==a}function Im(t,e,n,i,r,o){if(0===n.length)return!1;if(!km(t,e,n[0],i,r,o))return!1;for(var a=1,s=n.length;a<s;++a)if(km(t,n[a-1],n[a],i,r,o))return!1;return!0}function Am(t,e,n,i,r){var o=ud([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!Sd(r,o)&&(!!td(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]||Mm(t,e,n,i,(function(t,e){return function(t,e,n){var i=!1,r=nd(t,e),o=nd(t,n);if(1===r||1===o)i=!0;else{var a=t[0],s=t[1],h=t[2],l=t[3],c=e[0],u=e[1],f=n[0],p=n[1],d=(p-u)/(f-c),g=void 0,m=void 0;2&o&&!(2&r)&&(i=(g=f-(p-l)/d)>=a&&g<=h),i||!(4&o)||4&r||(i=(m=p-(f-h)*d)>=s&&m<=l),i||!(8&o)||8&r||(i=(g=f-(p-s)/d)>=a&&g<=h),i||!(16&o)||16&r||(i=(m=p-(f-a)*d)>=s&&m<=l)}return i}(r,t,e)})))}function Lm(t,e,n,i,r){if(!function(t,e,n,i,r){return!!(Am(t,e,n,i,r)||km(t,e,n,i,r[0],r[1])||km(t,e,n,i,r[0],r[3])||km(t,e,n,i,r[2],r[1])||km(t,e,n,i,r[2],r[3]))}(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(Pm(t,n[o-1],n[o],i,r)&&!Am(t,n[o-1],n[o],i,r))return!1;return!0}function Rm(t,e,n,i){for(var r=t[e],o=t[e+1],a=0,s=e+i;s<n;s+=i){var h=t[s],l=t[s+1];a+=Math.sqrt((h-r)*(h-r)+(l-o)*(l-o)),r=h,o=l}return a}var Nm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Dm=function(t){function e(e,n){var i=t.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?i.setCoordinates(e,n):i.setFlatCoordinates(n,e),i}return Nm(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Wf(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){return i<Qp(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))},e.prototype.forEachSegment=function(t){return Mm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=om&&this.layout!=am)return null;var n=void 0!==e&&e;return Om(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Cm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return Rm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=_m(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,im)},e.prototype.getType=function(){return Hg.LINE_STRING},e.prototype.intersectsExtent=function(t){return Am(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ym(this.flatCoordinates,0,t,this.stride),this.changed()},e}(cm);const Fm=Dm;var jm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zm=function(t){function e(e,n,i){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,n);else if(void 0!==n&&i)r.setFlatCoordinates(n,e),r.ends_=i;else{for(var o=r.getLayout(),a=e,s=[],h=[],l=0,c=a.length;l<c;++l){var u=a[l];0===l&&(o=u.getLayout()),Wf(s,u.getFlatCoordinates()),h.push(s.length)}r.setFlatCoordinates(o,s),r.ends_=h}return r}return jm(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Wf(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){return i<Qp(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=om&&this.layout!=am||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,r=void 0!==n&&n;return function(t,e,n,i,r,o,a){if(a)return Om(t,e,n[n.length-1],i,r,o);var s;if(r<t[i-1])return o?((s=t.slice(0,i))[i-1]=r,s):null;if(t[t.length-1]<r)return o?((s=t.slice(t.length-i))[i-1]=r,s):null;for(var h=0,l=n.length;h<l;++h){var c=n[h];if(e!=c){if(r<t[e+i-1])return null;if(r<=t[c-1])return Om(t,e,c,i,r,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,i,r)},e.prototype.getCoordinates=function(){return Sm(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Fm(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[],r=0,o=0,a=e.length;o<a;++o){var s=e[o],h=new Fm(t.slice(r,s),n);i.push(h),r=s}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,i=this.ends_,r=this.stride,o=0,a=i.length;o<a;++o){var s=i[o];Wf(t,Tm(e,n,s,r,.5)),n=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=function(t,e,n,i,r,o,a,s){for(var h=0,l=n.length;h<l;++h){var c=n[h];a=_m(t,e,c,i,r,o,a),s.push(a),e=c}return a}(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,im,i)},e.prototype.getType=function(){return Hg.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){if(Am(t,e,n[o],i,r))return!0;e=n[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=vm(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(cm);const Bm=zm;var Um=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Gm=function(t){function e(e,n){var i=t.call(this)||this;return i.setCoordinates(e,n),i}return Um(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=Ld(t,e,r[0],r[1]);if(o<i){for(var a=this.stride,s=0;s<a;++s)n[s]=r[s];return n.length=a,o}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return ad(this.flatCoordinates,t)},e.prototype.getType=function(){return Hg.POINT},e.prototype.intersectsExtent=function(t){return ed(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mm(this.flatCoordinates,0,t,this.stride),this.changed()},e}(cm);const Hm=Gm;var Wm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vm=function(t){function e(e,n){var i=t.call(this)||this;return n&&!Array.isArray(e[0])?i.setFlatCoordinates(n,e):i.setCoordinates(e,n),i}return Wm(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Wf(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){if(i<Qp(this.getExtent(),t,e))return i;for(var r=this.flatCoordinates,o=this.stride,a=0,s=r.length;a<s;a+=o){var h=Ld(t,e,r[a],r[a+1]);if(h<i){i=h;for(var l=0;l<o;++l)n[l]=r[a+l];n.length=o}}return i},e.prototype.getCoordinates=function(){return Cm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Hm(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,i=[],r=0,o=t.length;r<o;r+=n){var a=new Hm(t.slice(r,r+n),e);i.push(a)}return i},e.prototype.getType=function(){return Hg.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,i=0,r=e.length;i<r;i+=n)if(ed(t,e[i],e[i+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ym(this.flatCoordinates,0,t,this.stride),this.changed()},e}(cm);const qm=Vm;function Ym(t,e,n,i){for(var r=0,o=t[n-i],a=t[n-i+1];e<n;e+=i){var s=t[e],h=t[e+1];r+=a*s-o*h,o=s,a=h}return r/2}function Xm(t,e,n,i){for(var r=0,o=0,a=n.length;o<a;++o){var s=n[o];r+=Ym(t,e,s,i),e=s}return r}var Km=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Zm=function(t){function e(e,n){var i=t.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?i.setCoordinates(e,n):i.setFlatCoordinates(n,e),i}return Km(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<Qp(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return Ym(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Cm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=_m(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,im)},e.prototype.getType=function(){return Hg.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ym(this.flatCoordinates,0,t,this.stride),this.changed()},e}(cm);const $m=Zm;function Qm(t,e,n,i,r,o,a){for(var s,h,l,c,u,f,p,d=r[o+1],g=[],m=0,y=n.length;m<y;++m){var v=n[m];for(c=t[v-i],f=t[v-i+1],s=e;s<v;s+=i)u=t[s],p=t[s+1],(d<=f&&p<=d||f<=d&&d<=p)&&(l=(d-f)/(p-f)*(u-c)+c,g.push(l)),c=u,f=p}var _=NaN,x=-1/0;for(g.sort(Bf),c=g[0],s=1,h=g.length;s<h;++s){u=g[s];var w=Math.abs(u-c);w>x&&Im(t,e,n,i,l=(c+u)/2,d)&&(_=l,x=w),c=u}return isNaN(_)&&(_=r[o]),a?(a.push(_,d,x),a):[_,d,x]}function Jm(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function ty(t,e,n,i){for(var r=0,o=t[n-i],a=t[n-i+1];e<n;e+=i){var s=t[e],h=t[e+1];r+=(s-o)*(h+a),o=s,a=h}return 0===r?void 0:r>0}function ey(t,e,n,i,r){for(var o=void 0!==r&&r,a=0,s=n.length;a<s;++a){var h=n[a],l=ty(t,e,h,i);if(0===a){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=h}return!0}function ny(t,e,n,i,r){for(var o=void 0!==r&&r,a=0,s=n.length;a<s;++a){var h=n[a],l=ty(t,e,h,i);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&Jm(t,e,h,i),e=h}return e}function iy(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o)e=ny(t,e,n[o],i,r);return e}var ry=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),oy=function(t){function e(e,n,i){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==n&&i?(r.setFlatCoordinates(n,e),r.ends_=i):r.setCoordinates(e,n),r}return ry(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Wf(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){return i<Qp(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Im(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Xm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ny(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Sm(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=yd(this.getExtent());this.flatInteriorPoint_=Qm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Hm(this.getFlatInteriorPoint(),om)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new $m(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,o=0,a=n.length;o<a;++o){var s=n[o],h=new $m(e.slice(r,s),t);i.push(h),r=s}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ey(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ny(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=bm(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,im,i)},e.prototype.getType=function(){return Hg.POLYGON},e.prototype.intersectsExtent=function(t){return Lm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=vm(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(cm);const ay=oy;function sy(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new oy(o,im,[o.length])}function hy(t,e,n){for(var i=e||32,r=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=r*(i+1),h=new Array(s),l=0;l<s;l+=r){h[l]=0,h[l+1]=0;for(var c=2;c<r;c++)h[l+c]=a[c]}var u=[h.length],f=new oy(h,o,u);return function(t,e,n,i){for(var r=t.getFlatCoordinates(),o=t.getStride(),a=r.length/o-1,s=i||0,h=0;h<=a;++h){var l=h*o,c=s+2*Nd(h,a)*Math.PI/a;r[l]=e[0]+n*Math.cos(c),r[l+1]=e[1]+n*Math.sin(c)}t.changed()}(f,a,t.getRadius(),n),f}var ly=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),cy=function(t){function e(e,n,i){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){for(var o=r.getLayout(),a=e,s=[],h=[],l=0,c=a.length;l<c;++l){var u=a[l];0===l&&(o=u.getLayout());for(var f=s.length,p=u.getEnds(),d=0,g=p.length;d<g;++d)p[d]+=f;Wf(s,u.getFlatCoordinates()),h.push(p)}n=o,e=s,i=h}return void 0!==n&&i?(r.setFlatCoordinates(n,e),r.endss_=i):r.setCoordinates(e,n),r}return ly(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;Wf(this.flatCoordinates,t.getFlatCoordinates());for(var i=0,r=(e=t.getEnds().slice()).length;i<r;++i)e[i]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();var r=new e(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r},e.prototype.closestPointXY=function(t,e,n,i){return i<Qp(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o];r=pm(t,e,s,i,r),e=s[s.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,r,o,a,s,h,l,c){for(var u=[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];l=gm(t,e,d,i,r,true,a,s,h,l,u),e=d[d.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,n,i))},e.prototype.containsXY=function(t,e){return function(t,e,n,i,r,o){if(0===n.length)return!1;for(var a=0,s=n.length;a<s;++a){var h=n[a];if(Im(t,e,h,i,r,o))return!0;e=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,i){for(var r=0,o=0,a=n.length;o<a;++o){var s=n[o];r+=Xm(t,e,s,i),e=s[s.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?iy(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Em(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,i){for(var r=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=n.length;a<s;++a){var h=n[a];o=sd(t,e,h[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,n,i,r){for(var o=[],a=0,s=n.length;a<s;++a){var h=n[a];o=Qm(t,e,h,i,r,2*a,o),e=h[h.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new qm(this.getFlatInteriorPoints().slice(),om)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(!ey(t,e,s,i,undefined))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=iy(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=function(t,e,n,i,r,o,a,s){for(var h=0,l=n.length;h<l;++h){var c=n[h],u=[];a=bm(t,e,c,i,r,o,a,u),s.push(u),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,im,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var i=this.endss_[t].slice(),r=i[i.length-1];if(0!==e)for(var o=0,a=i.length;o<a;++o)i[o]-=e;return new ay(this.flatCoordinates.slice(e,r),this.layout,i)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[],r=0,o=0,a=n.length;o<a;++o){var s=n[o].slice(),h=s[s.length-1];if(0!==r)for(var l=0,c=s.length;l<c;++l)s[l]-=r;var u=new ay(e.slice(r,h),t,s);i.push(u),r=h}return i},e.prototype.getType=function(){return Hg.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(Lm(t,e,s,i,r))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,i,r){for(var o=r||[],a=0,s=0,h=n.length;s<h;++s){var l=vm(t,e,n[s],i,o[a]);o[a++]=l,e=l[l.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var i=n[n.length-1];this.flatCoordinates.length=0===i.length?0:i[i.length-1]}this.changed()},e}(cm);const uy=cy;var fy=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),py=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this)||this).dataProjection=gg(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=gg(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return fy(e,t),e.prototype.readFeatureFromObject=function(t,e){var n,i=dy((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new Ip;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&r.setGeometryName(n.geometry_name),r.setGeometry(i),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type){n=[];for(var i=t.features,r=0,o=i.length;r<o;++r)n.push(this.readFeatureFromObject(i[r],e))}else n=[this.readFeatureFromObject(t,e)];return n},e.prototype.readGeometryFromObject=function(t,e){return dy(t,e)},e.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=gg(n.properties.name):"EPSG"===n.type?e=gg("EPSG:"+n.properties.code):Op(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;var r=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=gy(o,e),delete r[t.getGeometryName()]),tp(r)||(n.properties=r),n},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return gy(t,this.adaptOptions(e))},e}(nm);function dy(t,e){if(!t)return null;var n;switch(t.type){case Hg.POINT:n=function(t){return new Hm(t.coordinates)}(t);break;case Hg.LINE_STRING:n=function(t){return new Fm(t.coordinates)}(t);break;case Hg.POLYGON:n=function(t){return new ay(t.coordinates)}(t);break;case Hg.MULTI_POINT:n=function(t){return new qm(t.coordinates)}(t);break;case Hg.MULTI_LINE_STRING:n=function(t){return new Bm(t.coordinates)}(t);break;case Hg.MULTI_POLYGON:n=function(t){return new uy(t.coordinates)}(t);break;case Hg.GEOMETRY_COLLECTION:n=function(t,e){var n=t.geometries.map((function(t){return dy(t,undefined)}));return new Yg(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Kg(n,!1,e)}function gy(t,e){var n,i=(t=Kg(t,!0,e)).getType();switch(i){case Hg.POINT:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case Hg.LINE_STRING:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Hg.POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case Hg.MULTI_POINT:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case Hg.MULTI_LINE_STRING:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Hg.MULTI_POLYGON:n=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case Hg.GEOMETRY_COLLECTION:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var n=$f({},e);return delete n.featureProjection,gy(t,n)}))}}(t,e);break;case Hg.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const my=py;class yy{constructor(t,e,n){this.name=t,this.required=e,this.type=n,this.index=0}getIndex(){return this.index}getName(){return this.name}isRequired(){return this.required}getType(){return this.type}updateIndex(t){this.index=t}updateType(t){const e=vy(t);this.required&&e&&(this.required=!1),e&&(this.type=xy(this.type,_y(t)))}}const vy=t=>null==t,_y=t=>{let e;const n=typeof t;return t instanceof Gg?e=9:t instanceof Date?e=6:"number"===n?(e=7,t%1==0&&(e=2)):"boolean"===n?e=4:"string"===n?e=1:console.debug(t),e},xy=(t,e)=>{let n;return 2===t&&7===e?n=7:t===e?n=e:1===e?n=1:console.log("Unsupported switch: %s to %s",t,e),n},wy=(t,e,n)=>{if(t.hasOwnProperty(e))t[e].updateType(n);else{const i=((t,e)=>{let n=_y(e);return new yy(t,!!e,n)})(e,n);i.updateIndex(Object.keys(t).length),t[e]=i}},by={1:1,2:1,3:2,4:4,5:8,6:1,7:1,8:2,9:4,10:8,11:4,12:8};class My{constructor(t){this.directory=t,console.log(t)}getInterpretation(){return this.directory[262][0]}getSamplesPerPixel(){return this.directory[277][0]}getSampleFormat(){return this.directory[339][0]}}class Cy{constructor(t,e,n){this.reader=t,this.littleEndian=e,this.offset=n,this.directory={},this.entries=[],this.entryIndex=-1}async read(){const t=await this.reader.read(this.offset,this.offset+2),e=new DataView(t).getUint16(0,this.littleEndian),n=await this.reader.read(this.offset+2,this.offset+2+12*e);return await this.parseEntries(n),new My(this.directory)}async parseEntries(t){const e=new DataView(t);for(let n=0,i=t.byteLength/12;n<i;n++){const t={tag:e.getUint16(12*n+0,this.littleEndian),type:e.getUint16(12*n+2,this.littleEndian),count:e.getUint32(12*n+4,this.littleEndian),valueOffset:e.getUint32(12*n+8,this.littleEndian)};this.entries.push(t)}await this.processNextEntry()}async addDirectoryValue(t,e){this.directory[t]=e,await this.processNextEntry()}async processNextEntry(){if(this.entryIndex++,this.entryIndex<this.entries.length){const{type:t,tag:e,count:n,valueOffset:i}=this.entries[this.entryIndex],r=by[t];let o=i;if(r*n<=4&&!1===this.littleEndian&&(o=entry.valueOffset>>>8*(4-r)),n>1||r>4)if(n<100||2===t){let o=[];try{const e=await this.reader.read(i,i+r*n),a=new DataView(e),s=((t,e)=>{switch(t){case 1:default:return e.getUint8;case 6:return e.getInt8;case 3:return e.getUint16;case 8:return e.getInt16;case 4:return e.getUint32;case 9:return e.getInt32;case 11:return e.getFloat32;case 12:return e.getFloat64}})(t,a);for(let t=0;t<n;t++)o[t]=s.apply(a,[t*r,this.littleEndian])}catch(n){console.debug("Skipping tag",e,"of type",t,":",n)}2===t&&(o=[String.fromCharCode.apply(null,o)]),await this.addDirectoryValue(e,o)}else console.warn("Ignoring entry tag",e,"of type",t,":",n,"records"),await this.processNextEntry();else await this.addDirectoryValue(e,[o])}}}class Sy{constructor(t){this.format=t}getFormat(){return this.format}}const Ey=32,Ty={C:1,N:2,L:4,D:5,F:7,"@":6},Oy=(t,e)=>{if(Ty.hasOwnProperty(e))return Ty[e];console.warn("Unknown DBF type: ",t,e)};class Py{constructor(t,e){this.name=t,this.type=e}getName(){return this.name}getPropertyType(){return this.type}}class ky{constructor(t,e){this.dataView=t,this.numberOfFields=e}readString(t,e){let n="";for(let i=t,r=t+e;i<r;i++){const t=this.dataView.getUint8(i);t>0&&(n+=String.fromCharCode(t))}return n}read(){const t=[];for(let e=0;e<this.numberOfFields;e++){const n=this.readString(e*Ey,10);let i=String.fromCharCode(this.dataView.getUint8(e*Ey+11));const r=this.dataView.getUint8(e*Ey+17);"N"===i.toUpperCase()&&r>0&&(i="F");const o=Oy(n,i);t.push(new Py(n,o))}return t}}const Iy={0:null,1:2,3:3,5:4,8:5,9:2,10:3,11:2,13:3,15:4,18:5,19:4,20:5,21:2,23:3,25:4,28:5,31:null};class Ay{constructor(t){this.options=t}getShp(){const{shp:t}=this.options;return t}getShx(){const{shx:t}=this.options;return t}getDbf(){const{dbf:t}=this.options;return t}hasMultipleShapefiles(){const{multipleShapefiles:t}=this.options;return t}isValidShp(){const{validShp:t}=this.options;return t}isValidShx(){const{validShx:t}=this.options;return t}getGeometryType(){const{geometryType:t}=this.options;return t}getFields(){const{fields:t}=this.options;return t}}class Ly{constructor(t){this.object=t}read(t,e){let n=this.object.async("arraybuffer");return void 0!==t&&void 0!==e&&(n=n.then((n=>n.slice(t,e)))),n}get name(){return this.object.name}}const Ry=(t,e)=>t.toLowerCase()===e,Ny=t=>{const e=t.name,n=e.lastIndexOf(".");return{name:e.substring(0,n),extension:e.substring(n+1,e.length).toLowerCase()}},Dy=t=>{if(t){const{name:e}=Ny(t);return e}},Fy=t=>{if(t)return new Ly(t)},jy=async t=>{const e=await t.read(0,8);return 9994==new DataView(e).getUint32(0)},zy=async(t,e,n)=>{const i=t&&await jy(t),r=e&&await jy(e),o=i&&await(async t=>{const e=await t.read(32,36);return(t=>Iy.hasOwnProperty(t)?Iy[t]:(console.warn("Unknown geometry type: ",t),null))(new DataView(e).getUint32(0,!0))})(t),a=n&&await(async t=>{const{fields:e,headerSize:n}=await(async t=>{const e=await t.read(0,Ey),n=new DataView(e);let i=-1;return 3==n.getUint8(0)?i=n.getUint16(8,!0):console.log("Invalid DBF File: "+n.getUint8(0)),{fields:(i-Ey-1)/Ey,headerSize:i}})(t);if(e>0){const i=await t.read(Ey,n),r=new DataView(i);return new ky(r,e).read()}})(n),s={shp:Dy(t),shx:Dy(e),dbf:Dy(n),validShp:!!i,validShx:!!r,geometryType:o,fields:a};return new Ay(s)},By=4096;class Uy{constructor(t){this.file=t}read(t,e){let n=this.file;void 0!==t&&void 0!==e&&(n=this.file.slice(t,e));const i=(r=n,new Promise(((t,e)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>e(n.error),n.readAsArrayBuffer(r)})));var r;return i}get name(){return this.file.name}get blob(){return this.file}}class Gy{constructor(t,e){this.url=t,this.file_name=e}read(t,e){const n={};return void 0!==t&&void 0!==e&&(n.Range=`bytes=${t}-${e}`),fetch(this.url,{method:"GET",headers:n}).then((t=>t.arrayBuffer()))}get name(){return this.file_name}get blob(){return this.read()}}const Hy={bag:async t=>(t=>{const e=new DataView(t);let n=!0;for(let t=0;t<Rf.length&&n;t++){const i=e.getUint8(t),r=Nf(Rf[t]);n=n&&i===r}return n})(await t.read(0,512)),dxf:async t=>(t=>{let e=(new TextDecoder).decode(t);return e=e.replaceAll(/(\r\n|\n|\r)/gm,""),e.indexOf("  0SECTION  2HEADER")>=0})(await t.read(0,1024)),geojson:async t=>(t=>{const e={};for(let n of t){const t=n.getProperties();for(let i of Object.keys(t))wy(e,i,n.get(i))}return Object.values(e)})((t=>{const e=new my,n=(new TextDecoder).decode(t);return e.readFeatures(n)})(await t.read())),geotiff:async t=>{const e=await(async t=>{const e=await t.read(0,8),n=new DataView(e),i=n.getUint8(0),r=n.getUint8(1);let o;if(73===i&&73===r?o=!0:77===i&&77===r&&(o=!1),42===n.getUint16(2,o)){const e=n.getUint32(4,o);return new Cy(t,o,e)}console.warn(i,r)})(t);return e?e.read():null},las:async t=>{const e=await t.read(0,4);let n=-1;if("LASF"===(new TextDecoder).decode(e)){const e=await t.read(104,106);n=new DataView(e).getUint8(0)}return new Sy(n)},shapefile:async(t,e,n)=>{const{extension:i}=Ny(t);return Ry(i,"zip")?(async t=>{const{default:e}=await a.e(578).then(a.t.bind(a,733,23)),n=[];(await e.loadAsync(t.blob)).forEach(((t,e)=>n.push(e)));let i=null,r=null,o=null,s=null,h=!1;for(let t of n){const{name:e,extension:n}=Ny(t),a=Ry(n,"shp"),l=!a&&Ry(n,"shx"),c=!a&&!l&&Ry(n,"dbf");a?i=t:l?r=t:c&&(o=t),(a||l||c)&&(null==s?s=e:h=h||s!==e)}h&&(i=null,r=null,o=null);const l=await zy(Fy(i),Fy(r),Fy(o));return l.options.multipleShapefiles=h,l})(t):zy(t,e,n)},text:async(t,e)=>{let n="",i=0,r=By,o=0;for(;i<e&&r==By;){const a=await t.read(o,o+By);r=a.byteLength;const s=(new TextDecoder).decode(a);console.log("read");let h=0;for(;h<s.length&&i<e;){let t=s.indexOf("\n",h);-1==t?t=s.length:(t+=1,i++),n=`${n}${s.substring(h,t)}`,h=t}o+=a.byteLength}return n},file_reader:t=>new Uy(t),remote_file_reader:(t,e)=>new Gy(t,e)};function Wy(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vy(t){return t instanceof Wy(t).Element||t instanceof Element}function qy(t){return t instanceof Wy(t).HTMLElement||t instanceof HTMLElement}function Yy(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Wy(t).ShadowRoot||t instanceof ShadowRoot)}var Xy=Math.max,Ky=Math.min,Zy=Math.round;function $y(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(qy(t)&&e){var o=t.offsetHeight,a=t.offsetWidth;a>0&&(i=Zy(n.width)/a||1),o>0&&(r=Zy(n.height)/o||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Qy(t){var e=Wy(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Jy(t){return t?(t.nodeName||"").toLowerCase():null}function tv(t){return((Vy(t)?t.ownerDocument:t.document)||window.document).documentElement}function ev(t){return $y(tv(t)).left+Qy(t).scrollLeft}function nv(t){return Wy(t).getComputedStyle(t)}function iv(t){var e=nv(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function rv(t,e,n){void 0===n&&(n=!1);var i,r,o=qy(e),a=qy(e)&&function(t){var e=t.getBoundingClientRect(),n=Zy(e.width)/t.offsetWidth||1,i=Zy(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),s=tv(e),h=$y(t,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(o||!o&&!n)&&(("body"!==Jy(e)||iv(s))&&(l=(i=e)!==Wy(i)&&qy(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Qy(i)),qy(e)?((c=$y(e,!0)).x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=ev(s))),{x:h.left+l.scrollLeft-c.x,y:h.top+l.scrollTop-c.y,width:h.width,height:h.height}}function ov(t){var e=$y(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function av(t){return"html"===Jy(t)?t:t.assignedSlot||t.parentNode||(Yy(t)?t.host:null)||tv(t)}function sv(t){return["html","body","#document"].indexOf(Jy(t))>=0?t.ownerDocument.body:qy(t)&&iv(t)?t:sv(av(t))}function hv(t,e){var n;void 0===e&&(e=[]);var i=sv(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),o=Wy(i),a=r?[o].concat(o.visualViewport||[],iv(i)?i:[]):i,s=e.concat(a);return r?s:s.concat(hv(av(a)))}function lv(t){return["table","td","th"].indexOf(Jy(t))>=0}function cv(t){return qy(t)&&"fixed"!==nv(t).position?t.offsetParent:null}function uv(t){for(var e=Wy(t),n=cv(t);n&&lv(n)&&"static"===nv(n).position;)n=cv(n);return n&&("html"===Jy(n)||"body"===Jy(n)&&"static"===nv(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&qy(t)&&"fixed"===nv(t).position)return null;for(var n=av(t);qy(n)&&["html","body"].indexOf(Jy(n))<0;){var i=nv(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}var fv="top",pv="bottom",dv="right",gv="left",mv="auto",yv=[fv,pv,dv,gv],vv="start",_v="end",xv="viewport",wv="popper",bv=yv.reduce((function(t,e){return t.concat([e+"-"+vv,e+"-"+_v])}),[]),Mv=[].concat(yv,[mv]).reduce((function(t,e){return t.concat([e,e+"-"+vv,e+"-"+_v])}),[]),Cv=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Sv(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var Ev={placement:"bottom",modifiers:[],strategy:"absolute"};function Tv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Ov(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?Ev:r;return function(t,e,n){void 0===n&&(n=o);var r,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ev,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},h=[],l=!1,c={state:s,setOptions:function(n){var r="function"==typeof n?n(s.options):n;u(),s.options=Object.assign({},o,s.options,r),s.scrollParents={reference:Vy(t)?hv(t):t.contextElement?hv(t.contextElement):[],popper:hv(e)};var a,l,f=function(t){var e=Sv(t);return Cv.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((a=[].concat(i,s.options.modifiers),l=a.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return s.orderedModifiers=f.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var o=r({state:s,name:e,instance:c,options:i});h.push(o||function(){})}})),c.update()},forceUpdate:function(){if(!l){var t=s.elements,e=t.reference,n=t.popper;if(Tv(e,n)){s.rects={reference:rv(e,uv(n),"fixed"===s.options.strategy),popper:ov(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<s.orderedModifiers.length;i++)if(!0!==s.reset){var r=s.orderedModifiers[i],o=r.fn,a=r.options,h=void 0===a?{}:a,u=r.name;"function"==typeof o&&(s=o({state:s,options:h,name:u,instance:c})||s)}else s.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){c.forceUpdate(),t(s)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(r())}))}))),a}),destroy:function(){u(),l=!0}};if(!Tv(t,e))return c;function u(){h.forEach((function(t){return t()})),h=[]}return c.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var Pv={passive:!0};function kv(t){return t.split("-")[0]}function Iv(t){return t.split("-")[1]}function Av(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Lv(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?kv(r):null,a=r?Iv(r):null,s=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2;switch(o){case fv:e={x:s,y:n.y-i.height};break;case pv:e={x:s,y:n.y+n.height};break;case dv:e={x:n.x+n.width,y:h};break;case gv:e={x:n.x-i.width,y:h};break;default:e={x:n.x,y:n.y}}var l=o?Av(o):null;if(null!=l){var c="y"===l?"height":"width";switch(a){case vv:e[l]=e[l]-(n[c]/2-i[c]/2);break;case _v:e[l]=e[l]+(n[c]/2-i[c]/2)}}return e}var Rv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Nv(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,a=t.offsets,s=t.position,h=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,u=t.isFixed,f=a.x,p=void 0===f?0:f,d=a.y,g=void 0===d?0:d,m="function"==typeof c?c({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),_=gv,x=fv,w=window;if(l){var b=uv(n),M="clientHeight",C="clientWidth";b===Wy(n)&&"static"!==nv(b=tv(n)).position&&"absolute"===s&&(M="scrollHeight",C="scrollWidth"),b=b,(r===fv||(r===gv||r===dv)&&o===_v)&&(x=pv,g-=(u&&w.visualViewport?w.visualViewport.height:b[M])-i.height,g*=h?1:-1),r!==gv&&(r!==fv&&r!==pv||o!==_v)||(_=dv,p-=(u&&w.visualViewport?w.visualViewport.width:b[C])-i.width,p*=h?1:-1)}var S,E=Object.assign({position:s},l&&Rv),T=!0===c?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:Zy(e*i)/i||0,y:Zy(n*i)/i||0}}({x:p,y:g}):{x:p,y:g};return p=T.x,g=T.y,h?Object.assign({},E,((S={})[x]=v?"0":"",S[_]=y?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",S)):Object.assign({},E,((e={})[x]=v?g+"px":"",e[_]=y?p+"px":"",e.transform="",e))}const Dv={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];qy(r)&&Jy(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});qy(i)&&Jy(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};var Fv={left:"right",right:"left",bottom:"top",top:"bottom"};function jv(t){return t.replace(/left|right|bottom|top/g,(function(t){return Fv[t]}))}var zv={start:"end",end:"start"};function Bv(t){return t.replace(/start|end/g,(function(t){return zv[t]}))}function Uv(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Yy(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Gv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Hv(t,e){return e===xv?Gv(function(t){var e=Wy(t),n=tv(t),i=e.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,s=0;return i&&(r=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,s=i.offsetTop)),{width:r,height:o,x:a+ev(t),y:s}}(t)):Vy(e)?function(t){var e=$y(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):Gv(function(t){var e,n=tv(t),i=Qy(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=Xy(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Xy(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+ev(t),h=-i.scrollTop;return"rtl"===nv(r||n).direction&&(s+=Xy(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:h}}(tv(t)))}function Wv(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Vv(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function qv(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,h=void 0===s?xv:s,l=n.elementContext,c=void 0===l?wv:l,u=n.altBoundary,f=void 0!==u&&u,p=n.padding,d=void 0===p?0:p,g=Wv("number"!=typeof d?d:Vv(d,yv)),m=c===wv?"reference":wv,y=t.rects.popper,v=t.elements[f?m:c],_=function(t,e,n){var i="clippingParents"===e?function(t){var e=hv(av(t)),n=["absolute","fixed"].indexOf(nv(t).position)>=0&&qy(t)?uv(t):t;return Vy(n)?e.filter((function(t){return Vy(t)&&Uv(t,n)&&"body"!==Jy(t)})):[]}(t):[].concat(e),r=[].concat(i,[n]),o=r[0],a=r.reduce((function(e,n){var i=Hv(t,n);return e.top=Xy(i.top,e.top),e.right=Ky(i.right,e.right),e.bottom=Ky(i.bottom,e.bottom),e.left=Xy(i.left,e.left),e}),Hv(t,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Vy(v)?v:v.contextElement||tv(t.elements.popper),a,h),x=$y(t.elements.reference),w=Lv({reference:x,element:y,strategy:"absolute",placement:r}),b=Gv(Object.assign({},y,w)),M=c===wv?b:x,C={top:_.top-M.top+g.top,bottom:M.bottom-_.bottom+g.bottom,left:_.left-M.left+g.left,right:M.right-_.right+g.right},S=t.modifiersData.offset;if(c===wv&&S){var E=S[r];Object.keys(C).forEach((function(t){var e=[dv,pv].indexOf(t)>=0?1:-1,n=[fv,pv].indexOf(t)>=0?"y":"x";C[t]+=E[n]*e}))}return C}function Yv(t,e,n){return Xy(t,Ky(e,n))}const Xv={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,h=n.boundary,l=n.rootBoundary,c=n.altBoundary,u=n.padding,f=n.tether,p=void 0===f||f,d=n.tetherOffset,g=void 0===d?0:d,m=qv(e,{boundary:h,rootBoundary:l,padding:u,altBoundary:c}),y=kv(e.placement),v=Iv(e.placement),_=!v,x=Av(y),w=function(t){return"x"===t?"y":"x"}(x),b=e.modifiersData.popperOffsets,M=e.rects.reference,C=e.rects.popper,S="function"==typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,E="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(b){if(o){var P,k="y"===x?fv:gv,I="y"===x?pv:dv,A="y"===x?"height":"width",L=b[x],R=L+m[k],N=L-m[I],D=p?-C[A]/2:0,F=v===vv?M[A]:C[A],j=v===vv?-C[A]:-M[A],z=e.elements.arrow,B=p&&z?ov(z):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=U[k],H=U[I],W=Yv(0,M[A],B[A]),V=_?M[A]/2-D-W-G-E.mainAxis:F-W-G-E.mainAxis,q=_?-M[A]/2+D+W+H+E.mainAxis:j+W+H+E.mainAxis,Y=e.elements.arrow&&uv(e.elements.arrow),X=Y?"y"===x?Y.clientTop||0:Y.clientLeft||0:0,K=null!=(P=null==T?void 0:T[x])?P:0,Z=L+q-K,$=Yv(p?Ky(R,L+V-K-X):R,L,p?Xy(N,Z):N);b[x]=$,O[x]=$-L}if(s){var Q,J="x"===x?fv:gv,tt="x"===x?pv:dv,et=b[w],nt="y"===w?"height":"width",it=et+m[J],rt=et-m[tt],ot=-1!==[fv,gv].indexOf(y),at=null!=(Q=null==T?void 0:T[w])?Q:0,st=ot?it:et-M[nt]-C[nt]-at+E.altAxis,ht=ot?et+M[nt]+C[nt]-at-E.altAxis:rt,lt=p&&ot?function(t,e,n){var i=Yv(t,e,n);return i>n?n:i}(st,et,ht):Yv(p?st:it,et,p?ht:rt);b[w]=lt,O[w]=lt-et}e.modifiersData[i]=O}},requiresIfExists:["offset"]},Kv={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=kv(n.placement),h=Av(s),l=[gv,dv].indexOf(s)>=0?"height":"width";if(o&&a){var c=function(t,e){return Wv("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Vv(t,yv))}(r.padding,n),u=ov(o),f="y"===h?fv:gv,p="y"===h?pv:dv,d=n.rects.reference[l]+n.rects.reference[h]-a[h]-n.rects.popper[l],g=a[h]-n.rects.reference[h],m=uv(o),y=m?"y"===h?m.clientHeight||0:m.clientWidth||0:0,v=d/2-g/2,_=c[f],x=y-u[l]-c[p],w=y/2-u[l]/2+v,b=Yv(_,w,x),M=h;n.modifiersData[i]=((e={})[M]=b,e.centerOffset=b-w,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&Uv(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zv(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function $v(t){return[fv,dv,pv,gv].some((function(e){return t[e]>=0}))}var Qv=Ov({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,h=Wy(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&l.forEach((function(t){t.addEventListener("scroll",n.update,Pv)})),s&&h.addEventListener("resize",n.update,Pv),function(){o&&l.forEach((function(t){t.removeEventListener("scroll",n.update,Pv)})),s&&h.removeEventListener("resize",n.update,Pv)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Lv({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,h=void 0===s||s,l={placement:kv(e.placement),variation:Iv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Nv(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:h})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Nv(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Dv,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,a=Mv.reduce((function(t,n){return t[n]=function(t,e,n){var i=kv(t),r=[gv,fv].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[gv,dv].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],h=s.x,l=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,h=n.fallbackPlacements,l=n.padding,c=n.boundary,u=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,d=void 0===p||p,g=n.allowedAutoPlacements,m=e.options.placement,y=kv(m),v=h||(y!==m&&d?function(t){if(kv(t)===mv)return[];var e=jv(t);return[Bv(t),e,Bv(e)]}(m):[jv(m)]),_=[m].concat(v).reduce((function(t,n){return t.concat(kv(n)===mv?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,h=n.allowedAutoPlacements,l=void 0===h?Mv:h,c=Iv(i),u=c?s?bv:bv.filter((function(t){return Iv(t)===c})):yv,f=u.filter((function(t){return l.indexOf(t)>=0}));0===f.length&&(f=u);var p=f.reduce((function(e,n){return e[n]=qv(t,{placement:n,boundary:r,rootBoundary:o,padding:a})[kv(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:c,rootBoundary:u,padding:l,flipVariations:d,allowedAutoPlacements:g}):n)}),[]),x=e.rects.reference,w=e.rects.popper,b=new Map,M=!0,C=_[0],S=0;S<_.length;S++){var E=_[S],T=kv(E),O=Iv(E)===vv,P=[fv,pv].indexOf(T)>=0,k=P?"width":"height",I=qv(e,{placement:E,boundary:c,rootBoundary:u,altBoundary:f,padding:l}),A=P?O?dv:gv:O?pv:fv;x[k]>w[k]&&(A=jv(A));var L=jv(A),R=[];if(o&&R.push(I[T]<=0),s&&R.push(I[A]<=0,I[L]<=0),R.every((function(t){return t}))){C=E,M=!1;break}b.set(E,R)}if(M)for(var N=function(t){var e=_.find((function(e){var n=b.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},D=d?3:1;D>0&&"break"!==N(D);D--);e.placement!==C&&(e.modifiersData[i]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},Xv,Kv,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=qv(e,{elementContext:"reference"}),s=qv(e,{altBoundary:!0}),h=Zv(a,i),l=Zv(s,r,o),c=$v(h),u=$v(l);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}}]}),Jv="tippy-content",t_="tippy-arrow",e_="tippy-svg-arrow",n_={passive:!0,capture:!0},i_=function(){return document.body};function r_(t,e,n){if(Array.isArray(t)){var i=t[e];return null==i?Array.isArray(n)?n[e]:n:i}return t}function o_(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function a_(t,e){return"function"==typeof t?t.apply(void 0,e):t}function s_(t,e){return 0===e?t:function(i){clearTimeout(n),n=setTimeout((function(){t(i)}),e)};var n}function h_(t){return[].concat(t)}function l_(t,e){-1===t.indexOf(e)&&t.push(e)}function c_(t){return[].slice.call(t)}function u_(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function f_(){return document.createElement("div")}function p_(t){return["Element","Fragment"].some((function(e){return o_(t,e)}))}function d_(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function g_(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function m_(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[i](e,n)}))}function y_(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=null==n.getRootNode||null==(i=n.getRootNode())?void 0:i.host}return!1}var v_={isTouch:!1},__=0;function x_(){v_.isTouch||(v_.isTouch=!0,window.performance&&document.addEventListener("mousemove",w_))}function w_(){var t=performance.now();t-__<20&&(v_.isTouch=!1,document.removeEventListener("mousemove",w_)),__=t}function b_(){var t=document.activeElement;if(function(t){return!(!t||!t._tippy||t._tippy.reference!==t)}(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var M_=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),C_=Object.assign({appendTo:i_,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),S_=Object.keys(C_);function E_(t){var e=(t.plugins||[]).reduce((function(e,n){var i,r=n.name,o=n.defaultValue;return r&&(e[r]=void 0!==t[r]?t[r]:null!=(i=C_[r])?i:o),e}),{});return Object.assign({},t,e)}function T_(t,e){var n=Object.assign({},e,{content:a_(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(E_(Object.assign({},C_,{plugins:e}))):S_).reduce((function(e,n){var i=(t.getAttribute("data-tippy-"+n)||"").trim();if(!i)return e;if("content"===n)e[n]=i;else try{e[n]=JSON.parse(i)}catch(t){e[n]=i}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},C_.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}function O_(t,e){t.innerHTML=e}function P_(t){var e=f_();return!0===t?e.className=t_:(e.className=e_,p_(t)?e.appendChild(t):O_(e,t)),e}function k_(t,e){p_(e.content)?(O_(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?O_(t,e.content):t.textContent=e.content)}function I_(t){var e=t.firstElementChild,n=c_(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(Jv)})),arrow:n.find((function(t){return t.classList.contains(t_)||t.classList.contains(e_)})),backdrop:n.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function A_(t){var e=f_(),n=f_();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=f_();function r(n,i){var r=I_(e),o=r.box,a=r.content,s=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||k_(a,t.props),i.arrow?s?n.arrow!==i.arrow&&(o.removeChild(s),o.appendChild(P_(i.arrow))):o.appendChild(P_(i.arrow)):s&&o.removeChild(s)}return i.className=Jv,i.setAttribute("data-state","hidden"),k_(i,t.props),e.appendChild(n),n.appendChild(i),r(t.props,t.props),{popper:e,onUpdate:r}}A_.$$tippy=!0;var L_=1,R_=[],N_=[];function D_(t,e){var n,i,r,o,a,s,h,l,c=T_(t,Object.assign({},C_,E_(u_(e)))),u=!1,f=!1,p=!1,d=!1,g=[],m=s_(Y,c.interactiveDebounce),y=L_++,v=(l=c.plugins).filter((function(t,e){return l.indexOf(t)===e})),_={id:y,reference:t,popper:f_(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(r)},setProps:function(e){if(!_.state.isDestroyed){L("onBeforeUpdate",[_,e]),V();var n=_.props,i=T_(t,Object.assign({},n,u_(e),{ignoreAttributes:!0}));_.props=i,W(),n.interactiveDebounce!==i.interactiveDebounce&&(D(),m=s_(Y,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?h_(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):i.triggerTarget&&t.removeAttribute("aria-expanded"),N(),A(),b&&b(n,i),_.popperInstance&&($(),J().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),L("onAfterUpdate",[_,e])}},setContent:function(t){_.setProps({content:t})},show:function(){var t=_.state.isVisible,e=_.state.isDestroyed,n=!_.state.isEnabled,i=v_.isTouch&&!_.props.touch,r=r_(_.props.duration,0,C_.duration);if(!(t||e||n||i||O().hasAttribute("disabled")||(L("onShow",[_],!1),!1===_.props.onShow(_)))){if(_.state.isVisible=!0,T()&&(w.style.visibility="visible"),A(),B(),_.state.isMounted||(w.style.transition="none"),T()){var o=k();d_([o.box,o.content],0)}var a,h,l;s=function(){var t;if(_.state.isVisible&&!d){if(d=!0,w.offsetHeight,w.style.transition=_.props.moveTransition,T()&&_.props.animation){var e=k(),n=e.box,i=e.content;d_([n,i],r),g_([n,i],"visible")}R(),N(),l_(N_,_),null==(t=_.popperInstance)||t.forceUpdate(),L("onMount",[_]),_.props.animation&&T()&&function(t,e){G(t,(function(){_.state.isShown=!0,L("onShown",[_])}))}(r)}},h=_.props.appendTo,l=O(),(a=_.props.interactive&&h===i_||"parent"===h?l.parentNode:a_(h,[l])).contains(w)||a.appendChild(w),_.state.isMounted=!0,$()}},hide:function(){var t=!_.state.isVisible,e=_.state.isDestroyed,n=!_.state.isEnabled,i=r_(_.props.duration,1,C_.duration);if(!(t||e||n)&&(L("onHide",[_],!1),!1!==_.props.onHide(_))){if(_.state.isVisible=!1,_.state.isShown=!1,d=!1,u=!1,T()&&(w.style.visibility="hidden"),D(),U(),A(!0),T()){var r=k(),o=r.box,a=r.content;_.props.animation&&(d_([o,a],i),g_([o,a],"hidden"))}R(),N(),_.props.animation?T()&&function(t,e){G(t,(function(){!_.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&e()}))}(i,_.unmount):_.unmount()}},hideWithInteractivity:function(t){P().addEventListener("mousemove",m),l_(R_,m),m(t)},enable:function(){_.state.isEnabled=!0},disable:function(){_.hide(),_.state.isEnabled=!1},unmount:function(){_.state.isVisible&&_.hide(),_.state.isMounted&&(Q(),J().forEach((function(t){t._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w),N_=N_.filter((function(t){return t!==_})),_.state.isMounted=!1,L("onHidden",[_]))},destroy:function(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),V(),delete t._tippy,_.state.isDestroyed=!0,L("onDestroy",[_]))}};if(!c.render)return _;var x=c.render(_),w=x.popper,b=x.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+_.id,_.popper=w,t._tippy=_,w._tippy=_;var M=v.map((function(t){return t.fn(_)})),C=t.hasAttribute("aria-expanded");return W(),N(),A(),L("onCreate",[_]),c.showOnCreate&&tt(),w.addEventListener("mouseenter",(function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&P().addEventListener("mousemove",m)})),_;function S(){var t=_.props.touch;return Array.isArray(t)?t:[t,0]}function E(){return"hold"===S()[0]}function T(){var t;return!(null==(t=_.props.render)||!t.$$tippy)}function O(){return h||t}function P(){var t,e,n=O().parentNode;return n?null!=(e=h_(n)[0])&&null!=(t=e.ownerDocument)&&t.body?e.ownerDocument:document:document}function k(){return I_(w)}function I(t){return _.state.isMounted&&!_.state.isVisible||v_.isTouch||o&&"focus"===o.type?0:r_(_.props.delay,t?0:1,C_.delay)}function A(t){void 0===t&&(t=!1),w.style.pointerEvents=_.props.interactive&&!t?"":"none",w.style.zIndex=""+_.props.zIndex}function L(t,e,n){var i;void 0===n&&(n=!0),M.forEach((function(n){n[t]&&n[t].apply(n,e)})),n&&(i=_.props)[t].apply(i,e)}function R(){var e=_.props.aria;if(e.content){var n="aria-"+e.content,i=w.id;h_(_.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(_.state.isVisible)t.setAttribute(n,e?e+" "+i:i);else{var r=e&&e.replace(i,"").trim();r?t.setAttribute(n,r):t.removeAttribute(n)}}))}}function N(){!C&&_.props.aria.expanded&&h_(_.props.triggerTarget||t).forEach((function(t){_.props.interactive?t.setAttribute("aria-expanded",_.state.isVisible&&t===O()?"true":"false"):t.removeAttribute("aria-expanded")}))}function D(){P().removeEventListener("mousemove",m),R_=R_.filter((function(t){return t!==m}))}function F(e){if(!v_.isTouch||!p&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!_.props.interactive||!y_(w,n)){if(h_(_.props.triggerTarget||t).some((function(t){return y_(t,n)}))){if(v_.isTouch)return;if(_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[_,e]);!0===_.props.hideOnClick&&(_.clearDelayTimeouts(),_.hide(),f=!0,setTimeout((function(){f=!1})),_.state.isMounted||U())}}}function j(){p=!0}function z(){p=!1}function B(){var t=P();t.addEventListener("mousedown",F,!0),t.addEventListener("touchend",F,n_),t.addEventListener("touchstart",z,n_),t.addEventListener("touchmove",j,n_)}function U(){var t=P();t.removeEventListener("mousedown",F,!0),t.removeEventListener("touchend",F,n_),t.removeEventListener("touchstart",z,n_),t.removeEventListener("touchmove",j,n_)}function G(t,e){var n=k().box;function i(t){t.target===n&&(m_(n,"remove",i),e())}if(0===t)return e();m_(n,"remove",a),m_(n,"add",i),a=i}function H(e,n,i){void 0===i&&(i=!1),h_(_.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,i),g.push({node:t,eventType:e,handler:n,options:i})}))}function W(){E()&&(H("touchstart",q,{passive:!0}),H("touchend",X,{passive:!0})),function(t){return t.split(/\s+/).filter(Boolean)}(_.props.trigger).forEach((function(t){if("manual"!==t)switch(H(t,q),t){case"mouseenter":H("mouseleave",X);break;case"focus":H(M_?"focusout":"blur",K);break;case"focusin":H("focusout",K)}}))}function V(){g.forEach((function(t){var e=t.node,n=t.eventType,i=t.handler,r=t.options;e.removeEventListener(n,i,r)})),g=[]}function q(t){var e,n=!1;if(_.state.isEnabled&&!Z(t)&&!f){var i="focus"===(null==(e=o)?void 0:e.type);o=t,h=t.currentTarget,N(),!_.state.isVisible&&function(t){return o_(t,"MouseEvent")}(t)&&R_.forEach((function(e){return e(t)})),"click"===t.type&&(_.props.trigger.indexOf("mouseenter")<0||u)&&!1!==_.props.hideOnClick&&_.state.isVisible?n=!0:tt(t),"click"===t.type&&(u=!n),n&&!i&&et(t)}}function Y(t){var e=t.target,n=O().contains(e)||w.contains(e);if("mousemove"!==t.type||!n){var i=J().concat(w).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:c}:null})).filter(Boolean);(function(t,e){var n=e.clientX,i=e.clientY;return t.every((function(t){var e=t.popperRect,r=t.popperState,o=t.props.interactiveBorder,a=r.placement.split("-")[0],s=r.modifiersData.offset;if(!s)return!0;var h="bottom"===a?s.top.y:0,l="top"===a?s.bottom.y:0,c="right"===a?s.left.x:0,u="left"===a?s.right.x:0,f=e.top-i+h>o,p=i-e.bottom-l>o,d=e.left-n+c>o,g=n-e.right-u>o;return f||p||d||g}))})(i,t)&&(D(),et(t))}}function X(t){Z(t)||_.props.trigger.indexOf("click")>=0&&u||(_.props.interactive?_.hideWithInteractivity(t):et(t))}function K(t){_.props.trigger.indexOf("focusin")<0&&t.target!==O()||_.props.interactive&&t.relatedTarget&&w.contains(t.relatedTarget)||et(t)}function Z(t){return!!v_.isTouch&&E()!==t.type.indexOf("touch")>=0}function $(){Q();var e=_.props,n=e.popperOptions,i=e.placement,r=e.offset,o=e.getReferenceClientRect,a=e.moveTransition,h=T()?I_(w).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||O()}:t,c=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(T()){var n=k().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}}];T()&&h&&c.push({name:"arrow",options:{element:h,padding:3}}),c.push.apply(c,(null==n?void 0:n.modifiers)||[]),_.popperInstance=Qv(l,w,Object.assign({},n,{placement:i,onFirstUpdate:s,modifiers:c}))}function Q(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function J(){return c_(w.querySelectorAll("[data-tippy-root]"))}function tt(t){_.clearDelayTimeouts(),t&&L("onTrigger",[_,t]),B();var e=I(!0),i=S(),r=i[0],o=i[1];v_.isTouch&&"hold"===r&&o&&(e=o),e?n=setTimeout((function(){_.show()}),e):_.show()}function et(t){if(_.clearDelayTimeouts(),L("onUntrigger",[_,t]),_.state.isVisible){if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&u)){var e=I(!1);e?i=setTimeout((function(){_.state.isVisible&&_.hide()}),e):r=requestAnimationFrame((function(){_.hide()}))}}else U()}}function F_(t,e){void 0===e&&(e={});var n=C_.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",x_,n_),window.addEventListener("blur",b_);var i=Object.assign({},e,{plugins:n}),r=function(t){return p_(t)?[t]:function(t){return o_(t,"NodeList")}(t)?c_(t):Array.isArray(t)?t:c_(document.querySelectorAll(t))}(t).reduce((function(t,e){var n=e&&D_(e,i);return n&&t.push(n),t}),[]);return p_(t)?r[0]:r}F_.defaultProps=C_,F_.setDefaultProps=function(t){Object.keys(t).forEach((function(e){C_[e]=t[e]}))},F_.currentInput=v_,Object.assign({},Dv,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}}),F_.setDefaultProps({render:A_});const j_=F_;class z_{constructor(t,e){const n=e.replaceAll("\n","<br>");this.instance=j_(t,{content:n,arrow:!0,trigger:"click mouseenter focus"})}setText(t){this.instance.setContent(t)}}const B_=(t,e)=>new z_(t,e);function U_(t){return U_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U_(t)}function G_(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function H_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){H_(t,e,n[e])}))}return t}function V_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q_(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Y_=function(){},X_={},K_={},Z_={mark:Y_,measure:Y_};try{"undefined"!=typeof window&&(X_=window),"undefined"!=typeof document&&(K_=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(Z_=performance)}catch(t){}var $_=(X_.navigator||{}).userAgent,Q_=void 0===$_?"":$_,J_=X_,tx=K_,ex=Z_,nx=(J_.document,!!tx.documentElement&&!!tx.head&&"function"==typeof tx.addEventListener&&"function"==typeof tx.createElement),ix=(~Q_.indexOf("MSIE")||Q_.indexOf("Trident/"),"svg-inline--fa"),rx=[1,2,3,4,5,6,7,8,9,10],ox=rx.concat([11,12,13,14,15,16,17,18,19,20]),ax={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},sx=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",ax.GROUP,ax.SWAP_OPACITY,ax.PRIMARY,ax.SECONDARY].concat(rx.map((function(t){return"".concat(t,"x")}))).concat(ox.map((function(t){return"w-".concat(t)}))),J_.FontAwesomeConfig||{});tx&&"function"==typeof tx.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(t){var e=V_(t,2),n=e[0],i=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=tx.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(n));null!=r&&(sx[i]=r)}));var hx=W_({},{familyPrefix:"fa",replacementClass:ix,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},sx);hx.autoReplaceSvg||(hx.observeMutations=!1);var lx=W_({},hx);J_.FontAwesomeConfig=lx;var cx=J_||{};cx.___FONT_AWESOME___||(cx.___FONT_AWESOME___={}),cx.___FONT_AWESOME___.styles||(cx.___FONT_AWESOME___.styles={}),cx.___FONT_AWESOME___.hooks||(cx.___FONT_AWESOME___.hooks={}),cx.___FONT_AWESOME___.shims||(cx.___FONT_AWESOME___.shims=[]);var ux=cx.___FONT_AWESOME___,fx=[];nx&&((tx.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(tx.readyState)||tx.addEventListener("DOMContentLoaded",(function t(){tx.removeEventListener("DOMContentLoaded",t),fx.map((function(t){return t()}))})));var px,dx="pending",gx="settled",mx="fulfilled",yx="rejected",vx=function(){},_x=void 0!==a.g&&void 0!==a.g.process&&"function"==typeof a.g.process.emit,xx="undefined"==typeof setImmediate?setTimeout:setImmediate,wx=[];function bx(){for(var t=0;t<wx.length;t++)wx[t][0](wx[t][1]);wx=[],px=!1}function Mx(t,e){wx.push([t,e]),px||(px=!0,xx(bx,0))}function Cx(t){var e=t.owner,n=e._state,i=e._data,r=t[n],o=t.then;if("function"==typeof r){n=mx;try{i=r(i)}catch(t){Ox(o,t)}}Sx(o,i)||(n===mx&&Ex(o,i),n===yx&&Ox(o,i))}function Sx(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===U_(e))){var i=e.then;if("function"==typeof i)return i.call(e,(function(i){n||(n=!0,e===i?Tx(t,i):Ex(t,i))}),(function(e){n||(n=!0,Ox(t,e))})),!0}}catch(e){return n||Ox(t,e),!0}return!1}function Ex(t,e){t!==e&&Sx(t,e)||Tx(t,e)}function Tx(t,e){t._state===dx&&(t._state=gx,t._data=e,Mx(kx,t))}function Ox(t,e){t._state===dx&&(t._state=gx,t._data=e,Mx(Ix,t))}function Px(t){t._then=t._then.forEach(Cx)}function kx(t){t._state=mx,Px(t)}function Ix(t){t._state=yx,Px(t),!t._handled&&_x&&a.g.process.emit("unhandledRejection",t._data,t)}function Ax(t){a.g.process.emit("rejectionHandled",t)}function Lx(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof Lx==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){Ox(e,t)}try{t((function(t){Ex(e,t)}),n)}catch(t){n(t)}}(t,this)}Lx.prototype={constructor:Lx,_state:dx,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(vx),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===yx&&_x&&Mx(Ax,this)),this._state===mx||this._state===yx?Mx(Cx,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},Lx.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Lx((function(e,n){var i=[],r=0;function o(t){return r++,function(n){i[t]=n,--r||e(i)}}for(var a,s=0;s<t.length;s++)(a=t[s])&&"function"==typeof a.then?a.then(o(s),n):i[s]=a;r||e(i)}))},Lx.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Lx((function(e,n){for(var i,r=0;r<t.length;r++)(i=t[r])&&"function"==typeof i.then?i.then(e,n):e(i)}))},Lx.resolve=function(t){return t&&"object"===U_(t)&&t.constructor===Lx?t:new Lx((function(e){e(t)}))},Lx.reject=function(t){return new Lx((function(e,n){n(t)}))};var Rx={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Nx(){for(var t=12,e="";t-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Dx(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Fx(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,": ").concat(t[n],";")}),"")}function jx(t){return t.size!==Rx.size||t.x!==Rx.x||t.y!==Rx.y||t.rotate!==Rx.rotate||t.flipX||t.flipY}function zx(t){var e=t.transform,n=t.containerWidth,i=t.iconWidth,r={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*e.x,", ").concat(32*e.y,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),s="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}var Bx={x:0,y:0,width:"100%",height:"100%"};function Ux(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Gx(t){var e=t.icons,n=e.main,i=e.mask,r=t.prefix,o=t.iconName,a=t.transform,s=t.symbol,h=t.title,l=t.maskId,c=t.titleId,u=t.extra,f=t.watchable,p=void 0!==f&&f,d=i.found?i:n,g=d.width,m=d.height,y="fak"===r,v=y?"":"fa-w-".concat(Math.ceil(g/m*16)),_=[lx.replacementClass,o?"".concat(lx.familyPrefix,"-").concat(o):"",v].filter((function(t){return-1===u.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(u.classes).join(" "),x={children:[],attributes:W_({},u.attributes,{"data-prefix":r,"data-icon":o,class:_,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},w=y&&!~u.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};p&&(x.attributes["data-fa-i2svg"]=""),h&&x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(c||Nx())},children:[h]});var b=W_({},x,{prefix:r,iconName:o,main:n,mask:i,maskId:l,transform:a,symbol:s,styles:W_({},w,u.styles)}),M=i.found&&n.found?function(t){var e,n=t.children,i=t.attributes,r=t.main,o=t.mask,a=t.maskId,s=t.transform,h=r.width,l=r.icon,c=o.width,u=o.icon,f=zx({transform:s,containerWidth:c,iconWidth:h}),p={tag:"rect",attributes:W_({},Bx,{fill:"white"})},d=l.children?{children:l.children.map(Ux)}:{},g={tag:"g",attributes:W_({},f.inner),children:[Ux(W_({tag:l.tag,attributes:W_({},l.attributes,f.path)},d))]},m={tag:"g",attributes:W_({},f.outer),children:[g]},y="mask-".concat(a||Nx()),v="clip-".concat(a||Nx()),_={tag:"mask",attributes:W_({},Bx,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,m]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(e=u,"g"===e.tag?e.children:[e])},_]};return n.push(x,{tag:"rect",attributes:W_({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(y,")")},Bx)}),{children:n,attributes:i}}(b):function(t){var e=t.children,n=t.attributes,i=t.main,r=t.transform,o=Fx(t.styles);if(o.length>0&&(n.style=o),jx(r)){var a=zx({transform:r,containerWidth:i.width,iconWidth:i.width});e.push({tag:"g",attributes:W_({},a.outer),children:[{tag:"g",attributes:W_({},a.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:W_({},i.icon.attributes,a.path)}]}]})}else e.push(i.icon);return{children:e,attributes:n}}(b),C=M.children,S=M.attributes;return b.children=C,b.attributes=S,s?function(t){var e=t.prefix,n=t.iconName,i=t.children,r=t.attributes,o=t.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:W_({},r,{id:!0===o?"".concat(e,"-").concat(lx.familyPrefix,"-").concat(n):o}),children:i}]}]}(b):function(t){var e=t.children,n=t.main,i=t.mask,r=t.attributes,o=t.styles,a=t.transform;if(jx(a)&&n.found&&!i.found){var s={x:n.width/n.height/2,y:.5};r.style=Fx(W_({},o,{"transform-origin":"".concat(s.x+a.x/16,"em ").concat(s.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(b)}var Hx=(lx.measurePerformance&&ex&&ex.mark&&ex.measure,function(t,e,n,i){var r,o,a,s=Object.keys(t),h=s.length,l=void 0!==i?function(t,e){return function(n,i,r,o){return t.call(e,n,i,r,o)}}(e,i):e;for(void 0===n?(r=1,a=t[s[0]]):(r=0,a=n);r<h;r++)a=l(a,t[o=s[r]],o,t);return a});function Wx(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.skipHooks,r=void 0!==i&&i,o=Object.keys(e).reduce((function(t,n){var i=e[n];return i.icon?t[i.iconName]=i.icon:t[n]=i,t}),{});"function"!=typeof ux.hooks.addPack||r?ux.styles[t]=W_({},ux.styles[t]||{},o):ux.hooks.addPack(t,o),"fas"===t&&Wx("fa",e)}var Vx=ux.styles,qx=ux.shims,Yx=function(){var t=function(t){return Hx(Vx,(function(e,n,i){return e[i]=Hx(n,t,{}),e}),{})};t((function(t,e,n){return e[3]&&(t[e[3]]=n),t})),t((function(t,e,n){var i=e[2];return t[n]=n,i.forEach((function(e){t[e]=n})),t}));var e="far"in Vx;Hx(qx,(function(t,n){var i=n[0],r=n[1],o=n[2];return"far"!==r||e||(r="fas"),t[i]={prefix:r,iconName:o},t}),{})};function Xx(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Kx(t){var e=t.tag,n=t.attributes,i=void 0===n?{}:n,r=t.children,o=void 0===r?[]:r;return"string"==typeof t?Dx(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,'="').concat(Dx(t[n]),'" ')}),"").trim()}(i),">").concat(o.map(Kx).join(""),"</").concat(e,">")}Yx(),ux.styles;function Zx(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}Zx.prototype=Object.create(Error.prototype),Zx.prototype.constructor=Zx;var $x={fill:"currentColor"},Qx={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Jx=(W_({},$x,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),W_({},Qx,{attributeName:"opacity"}));function tw(t){var e=t[0],n=t[1],i=V_(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(i)?{tag:"g",attributes:{class:"".concat(lx.familyPrefix,"-").concat(ax.GROUP)},children:[{tag:"path",attributes:{class:"".concat(lx.familyPrefix,"-").concat(ax.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(lx.familyPrefix,"-").concat(ax.PRIMARY),fill:"currentColor",d:i[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:i}}}}W_({},$x,{cx:"256",cy:"364",r:"28"}),W_({},Qx,{attributeName:"r",values:"28;14;28;28;14;28;"}),W_({},Jx,{values:"1;0;1;1;0;1;"}),W_({},$x,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),W_({},Jx,{values:"1;0;0;0;0;1;"}),W_({},$x,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),W_({},Jx,{values:"0;0;1;1;0;0;"}),ux.styles,ux.styles;var ew=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,n;return e=t,n=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(e){t.definitions[e]=W_({},t.definitions[e]||{},r[e]),Wx(e,r[e]),Yx()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map((function(e){var i=n[e],r=i.prefix,o=i.iconName,a=i.icon;t[r]||(t[r]={}),t[r][o]=a})),t}}],n&&G_(e.prototype,n),t}();function nw(){lx.autoAddCss&&!sw&&(function(t){if(t&&nx){var e=tx.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=tx.head.childNodes,i=null,r=n.length-1;r>-1;r--){var o=n[r],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=o)}tx.head.insertBefore(e,i)}}(function(){var t="fa",e=ix,n=lx.familyPrefix,i=lx.replacementClass,r='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(n!==t||i!==e){var o=new RegExp("\\.".concat(t,"\\-"),"g"),a=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(e),"g");r=r.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(i))}return r}()),sw=!0)}function iw(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(t){return Kx(t)}))}}),Object.defineProperty(t,"node",{get:function(){if(nx){var e=tx.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function rw(t){var e=t.prefix,n=void 0===e?"fa":e,i=t.iconName;if(i)return Xx(aw.definitions,n,i)||Xx(ux.styles,n,i)}var ow,aw=new ew,sw=!1,hw=function(t){return function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce((function(t,e){var n=e.toLowerCase().split("-"),i=n[0],r=n.slice(1).join("-");if(i&&"h"===r)return t.flipX=!0,t;if(i&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(i){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t}),e):e}(t)},lw=(ow=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,i=void 0===n?Rx:n,r=e.symbol,o=void 0!==r&&r,a=e.mask,s=void 0===a?null:a,h=e.maskId,l=void 0===h?null:h,c=e.title,u=void 0===c?null:c,f=e.titleId,p=void 0===f?null:f,d=e.classes,g=void 0===d?[]:d,m=e.attributes,y=void 0===m?{}:m,v=e.styles,_=void 0===v?{}:v;if(t){var x=t.prefix,w=t.iconName,b=t.icon;return iw(W_({type:"icon"},t),(function(){return nw(),lx.autoA11y&&(u?y["aria-labelledby"]="".concat(lx.replacementClass,"-title-").concat(p||Nx()):(y["aria-hidden"]="true",y.focusable="false")),Gx({icons:{main:tw(b),mask:s?tw(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:w,transform:W_({},Rx,i),symbol:o,title:u,maskId:l,titleId:p,extra:{attributes:y,styles:_,classes:g}})}))}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t||{}).icon?t:rw(t||{}),i=e.mask;return i&&(i=(i||{}).icon?i:rw(i||{})),ow(n,W_({},e,{mask:i}))}),cw={prefix:"fas",iconName:"chevron-left",icon:[320,512,[],"f053","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"]},uw={prefix:"fas",iconName:"chevron-right",icon:[320,512,[],"f054","M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"]},fw={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"]},pw={prefix:"fas",iconName:"history",icon:[512,512,[],"f1da","M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"]};aw.add({prefix:"fas",iconName:"arrows-alt",icon:[512,512,[],"f0b2","M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"]},{prefix:"fas",iconName:"arrows-alt-h",icon:[512,512,[],"f337","M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z"]},{prefix:"fas",iconName:"angle-double-left",icon:[448,512,[],"f100","M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"]},{prefix:"fas",iconName:"angle-left",icon:[256,512,[],"f104","M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"]},{prefix:"fas",iconName:"angle-right",icon:[256,512,[],"f105","M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"]},{prefix:"fas",iconName:"angle-double-right",icon:[448,512,[],"f101","M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z"]},{prefix:"fas",iconName:"calculator",icon:[448,512,[],"f1ec","M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"]},{prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"]},{prefix:"fas",iconName:"caret-up",icon:[320,512,[],"f0d8","M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"]},{prefix:"fas",iconName:"caret-right",icon:[192,512,[],"f0da","M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"]},{prefix:"fas",iconName:"chart-line",icon:[512,512,[],"f201","M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"]},{prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},fw,{prefix:"fas",iconName:"check",icon:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"]},{prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"]},{prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},cw,uw,{prefix:"fas",iconName:"crop",icon:[512,512,[],"f125","M488 352h-40V109.25l59.31-59.31c6.25-6.25 6.25-16.38 0-22.63L484.69 4.69c-6.25-6.25-16.38-6.25-22.63 0L402.75 64H192v96h114.75L160 306.75V24c0-13.26-10.75-24-24-24H88C74.75 0 64 10.74 64 24v40H24C10.75 64 0 74.74 0 88v48c0 13.25 10.75 24 24 24h40v264c0 13.25 10.75 24 24 24h232v-96H205.25L352 205.25V488c0 13.25 10.75 24 24 24h48c13.25 0 24-10.75 24-24v-40h40c13.25 0 24-10.75 24-24v-48c0-13.26-10.75-24-24-24z"]},{prefix:"fas",iconName:"compass",icon:[496,512,[],"f14e","M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"]},{prefix:"fas",iconName:"cogs",icon:[640,512,[],"f085","M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"]},{prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"]},{prefix:"fas",iconName:"draw-polygon",icon:[448,512,[],"f5ee","M384 352c-.35 0-.67.1-1.02.1l-39.2-65.32c5.07-9.17 8.22-19.56 8.22-30.78s-3.14-21.61-8.22-30.78l39.2-65.32c.35.01.67.1 1.02.1 35.35 0 64-28.65 64-64s-28.65-64-64-64c-23.63 0-44.04 12.95-55.12 32H119.12C108.04 44.95 87.63 32 64 32 28.65 32 0 60.65 0 96c0 23.63 12.95 44.04 32 55.12v209.75C12.95 371.96 0 392.37 0 416c0 35.35 28.65 64 64 64 23.63 0 44.04-12.95 55.12-32h209.75c11.09 19.05 31.49 32 55.12 32 35.35 0 64-28.65 64-64 .01-35.35-28.64-64-63.99-64zm-288 8.88V151.12A63.825 63.825 0 0 0 119.12 128h208.36l-38.46 64.1c-.35-.01-.67-.1-1.02-.1-35.35 0-64 28.65-64 64s28.65 64 64 64c.35 0 .67-.1 1.02-.1l38.46 64.1H119.12A63.748 63.748 0 0 0 96 360.88zM272 256c0-8.82 7.18-16 16-16s16 7.18 16 16-7.18 16-16 16-16-7.18-16-16zM400 96c0 8.82-7.18 16-16 16s-16-7.18-16-16 7.18-16 16-16 16 7.18 16 16zM64 80c8.82 0 16 7.18 16 16s-7.18 16-16 16-16-7.18-16-16 7.18-16 16-16zM48 416c0-8.82 7.18-16 16-16s16 7.18 16 16-7.18 16-16 16-16-7.18-16-16zm336 16c-8.82 0-16-7.18-16-16s7.18-16 16-16 16 7.18 16 16-7.18 16-16 16z"]},{prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"]},{prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"]},{prefix:"fas",iconName:"exclamation-triangle",icon:[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"]},{prefix:"fas",iconName:"file",icon:[384,512,[],"f15b","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"]},{prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"]},{prefix:"fas",iconName:"file-download",icon:[384,512,[],"f56d","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"]},{prefix:"fas",iconName:"file-upload",icon:[384,512,[],"f574","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm65.18 216.01H224v80c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-80H94.82c-14.28 0-21.41-17.29-11.27-27.36l96.42-95.7c6.65-6.61 17.39-6.61 24.04 0l96.42 95.7c10.15 10.07 3.03 27.36-11.25 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"]},{prefix:"fas",iconName:"font",icon:[448,512,[],"f031","M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"]},{prefix:"fas",iconName:"hourglass-start",icon:[384,512,[],"f251","M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-64 448H88c0-77.458 46.204-144 104-144 57.786 0 104 66.517 104 144z"]},{prefix:"fas",iconName:"info-circle",icon:[512,512,[],"f05a","M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"]},{prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},{prefix:"fas",iconName:"plus-circle",icon:[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"]},{prefix:"fas",iconName:"layer-group",icon:[512,512,[],"f5fd","M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"]},{prefix:"fas",iconName:"list-ul",icon:[512,512,[],"f0ca","M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"]},{prefix:"fas",iconName:"location-arrow",icon:[512,512,[],"f124","M444.52 3.52L28.74 195.42c-47.97 22.39-31.98 92.75 19.19 92.75h175.91v175.91c0 51.17 70.36 67.17 92.75 19.19l191.9-415.78c15.99-38.39-25.59-79.97-63.97-63.97z"]},{prefix:"fas",iconName:"map-marker",icon:[384,512,[],"f041","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z"]},{prefix:"fas",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"]},{prefix:"fas",iconName:"map-pin",icon:[288,512,[],"f276","M112 316.94v156.69l22.02 33.02c4.75 7.12 15.22 7.12 19.97 0L176 473.63V316.94c-10.39 1.92-21.06 3.06-32 3.06s-21.61-1.14-32-3.06zM144 0C64.47 0 0 64.47 0 144s64.47 144 144 144 144-64.47 144-144S223.53 0 144 0zm0 76c-37.5 0-68 30.5-68 68 0 6.62-5.38 12-12 12s-12-5.38-12-12c0-50.73 41.28-92 92-92 6.62 0 12 5.38 12 12s-5.38 12-12 12z"]},{prefix:"fas",iconName:"minus",icon:[448,512,[],"f068","M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},{prefix:"fas",iconName:"minus-circle",icon:[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"]},{prefix:"fas",iconName:"mouse-pointer",icon:[320,512,[],"f245","M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"]},{prefix:"fas",iconName:"object-group",icon:[512,512,[],"f247","M480 128V96h20c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v20H64V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v40c0 6.627 5.373 12 12 12h20v320H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-20h384v20c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-20V128zM96 276V140c0-6.627 5.373-12 12-12h168c6.627 0 12 5.373 12 12v136c0 6.627-5.373 12-12 12H108c-6.627 0-12-5.373-12-12zm320 96c0 6.627-5.373 12-12 12H236c-6.627 0-12-5.373-12-12v-52h72c13.255 0 24-10.745 24-24v-72h84c6.627 0 12 5.373 12 12v136z"]},{prefix:"fas",iconName:"print",icon:[512,512,[],"f02f","M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"]},{prefix:"fas",iconName:"palette",icon:[512,512,[],"f53f","M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"]},{prefix:"fas",iconName:"pencil-alt",icon:[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]},{prefix:"fas",iconName:"route",icon:[512,512,[],"f4d7","M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"]},{prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},{prefix:"fas",iconName:"square",icon:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"]},{prefix:"fas",iconName:"sync",icon:[512,512,[],"f021","M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"]},{prefix:"fas",iconName:"table",icon:[512,512,[],"f0ce","M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"]},{prefix:"fas",iconName:"trash-alt",icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]},{prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},{prefix:"fas",iconName:"wrench",icon:[512,512,[],"f0ad","M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"]});var dw={prefix:"far",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"]};aw.add({prefix:"far",iconName:"square",icon:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"]});const gw={getIcon:(t,e)=>{const n=rw({prefix:t,iconName:e});return lw(n).html[0]},getLayeredIcon:(t,e,n,i)=>{const r=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).classes,n=void 0===e?[]:e;return iw({type:"layer"},(function(){nw();var e=[];return t((function(t){Array.isArray(t)?t.map((function(t){e=e.concat(t.abstract)})):e=e.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(lx.familyPrefix,"-layers")].concat(q_(n)).join(" ")},children:e}]}))}((r=>{for(var o=0;o<e.length;o++){const a=t[o],s=e[o],h=n[o],l=hw(i[o]);let c=rw({prefix:a,iconName:s});c||(console.error("Icon with prefix %s and name %s cannot be found",a,s),c=dw),r(lw(c,{transform:l,classes:[h]}))}}));return r.html[0]}};var mw=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,yw=/^([a-z]*)$|^hsla?\(.*\)$/i;function vw(t){return"string"==typeof t?t:bw(t)}var _w=function(){var t={},e=0;return function(n){var i;if(t.hasOwnProperty(n))i=t[n];else{if(e>=1024){var r=0;for(var o in t)0==(3&r++)&&(delete t[o],--e)}i=function(t){var e,n,i,r,o;if(yw.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(t)),mw.exec(t)){var a,s=t.length-1;a=s<=4?1:2;var h=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),n=parseInt(t.substr(1+1*a,a),16),i=parseInt(t.substr(1+2*a,a),16),r=h?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,h&&(r=(r<<4)+r)),o=[e,n,i,r/255]}else 0==t.indexOf("rgba(")?ww(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),ww(o)):Op(!1,14);return o}(n),t[n]=i,++e}return i}}();function xw(t){return Array.isArray(t)?t:_w(t)}function ww(t){return t[0]=Pd(t[0]+.5|0,0,255),t[1]=Pd(t[1]+.5|0,0,255),t[2]=Pd(t[2]+.5|0,0,255),t[3]=Pd(t[3],0,1),t}function bw(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}var Mw=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var i=Cw(t,e,n);return i in this.cache_?this.cache_[i]:null},t.prototype.set=function(t,e,n,i){var r=Cw(t,e,n);this.cache_[r]=i,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Cw(t,e,n){return e+":"+t+":"+(n?vw(n):"null")}var Sw=new Mw;const Ew="opacity",Tw="visible",Ow="extent",Pw="zIndex",kw="maxResolution",Iw="minResolution",Aw="maxZoom",Lw="minZoom",Rw="source";var Nw=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Dw=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.background_=e.background;var i=$f({},e);return"object"==typeof e.properties&&(delete i.properties,$f(i,e.properties)),i.opacity=void 0!==e.opacity?e.opacity:1,Op("number"==typeof i.opacity,64),i.visible=void 0===e.visible||e.visible,i.zIndex=e.zIndex,i.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,i.minResolution=void 0!==e.minResolution?e.minResolution:0,i.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,i.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==i.className?e.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return Nw(e,t),e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Pd(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return _p()},e.prototype.getLayerStatesArray=function(t){return _p()},e.prototype.getExtent=function(){return this.get(Ow)},e.prototype.getMaxResolution=function(){return this.get(kw)},e.prototype.getMinResolution=function(){return this.get(Iw)},e.prototype.getMinZoom=function(){return this.get(Lw)},e.prototype.getMaxZoom=function(){return this.get(Aw)},e.prototype.getOpacity=function(){return this.get(Ew)},e.prototype.getSourceState=function(){return _p()},e.prototype.getVisible=function(){return this.get(Tw)},e.prototype.getZIndex=function(){return this.get(Pw)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(Ow,t)},e.prototype.setMaxResolution=function(t){this.set(kw,t)},e.prototype.setMinResolution=function(t){this.set(Iw,t)},e.prototype.setMaxZoom=function(t){this.set(Aw,t)},e.prototype.setMinZoom=function(t){this.set(Lw,t)},e.prototype.setOpacity=function(t){Op("number"==typeof t,64),this.set(Ew,t)},e.prototype.setVisible=function(t){this.set(Tw,t)},e.prototype.setZIndex=function(t){this.set(Pw,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Sp);const Fw=Dw,jw="precompose",zw="rendercomplete",Bw="undefined",Uw="ready";var Gw=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Hw=function(t){function e(e){var n=this,i=$f({},e);delete i.source,(n=t.call(this,i)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(Rw,n.handleSourcePropertyChange_);var r=e.source?e.source:null;return n.setSource(r),n}return Gw(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Rw)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Bw},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(dp(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=fp(t,op,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMapInternal=function(t){this.set("map",t)},e.prototype.getMapInternal=function(){return this.get("map")},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(dp(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(dp(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=fp(t,jw,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Op(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=fp(this,op,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Rw,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Fw);function Ww(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const Vw=Hw;var qw=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yw=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return qw(e,t),e.prototype.dispatchRenderEvent=function(t,e){_p()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Vp(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),qp(i,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,a,s){var h,l=e.viewState;function c(t,e,n,i){return r.call(o,e,t?n:null,i)}var u=l.projection,f=cg(t.slice(),u),p=[[0,0]];if(u.canWrapX()&&i){var d=Cd(u.getExtent());p.push([-d,0],[d,0])}for(var g=e.layerStatesArray,m=g.length,y=[],v=[],_=0;_<p.length;_++)for(var x=m-1;x>=0;--x){var w=g[x],b=w.layer;if(b.hasRenderer()&&Ww(w,l)&&a.call(s,b)){var M=b.getRenderer(),C=b.getSource();if(M&&C){var S=C.getWrapX()?f:t,E=c.bind(null,w.managed);v[0]=S[0]+p[_][0],v[1]=S[1]+p[_][1],h=M.forEachFeatureAtCoordinate(v,e,n,E,y)}if(h)return h}}if(0!==y.length){var T=1/y.length;return y.forEach((function(t,e){return t.distanceSq+=e*T})),y.sort((function(t,e){return t.distanceSq-e.distanceSq})),y.some((function(t){return h=t.callback(t.feature,t.layer,t.geometry)})),h}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r){return _p()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,Xf,this,r,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){_p()},e.prototype.scheduleExpireIconCache=function(t){Sw.canExpireCache()&&t.postRenderFunctions.push(Xw)},e}(zf);function Xw(t,e){Sw.expire()}const Kw=Yw;var Zw=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$w=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=i,o.context=r,o}return Zw(e,t),e}(Ff);const Qw=$w;var Jw="ol-hidden",tb="ol-control",eb=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),nb=["style","variant","weight","size","lineHeight","family"],ib=function(t){var e=t.match(eb);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,r=nb.length;i<r;++i){var o=e[i+1];void 0!==o&&(n[nb[i]]=o)}return n.families=n.family.split(/,\s?/),n};function rb(t){return 1===t?"":String(Math.round(100*t)/100)}function ob(t,e,n,i){var r;return r=n&&n.length?n.shift():Up?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}function ab(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function sb(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var hb="10px sans-serif",lb="#000",cb="round",ub=[],fb="round",pb="#000",db="center",gb="middle",mb=[0,0,0,0],yb=new Sp;(new rp).setSize=function(){console.warn("labelCache is deprecated.")};var vb,_b,xb=null,wb={},bb=function(){var t,e,n="32px ",i=["monospace","serif"],r=i.length,o="wmytzilWMYTZIL@#/&?$%10";function a(t,a,s){for(var h=!0,l=0;l<r;++l){var c=i[l];if(e=Cb(t+" "+a+" "+n+c,o),s!=c){var u=Cb(t+" "+a+" "+n+s+","+c,o);h=h&&u!=e}}return!!h}function s(){for(var e=!0,n=yb.getKeys(),i=0,r=n.length;i<r;++i){var o=n[i];yb.get(o)<100&&(a.apply(this,o.split("\n"))?(Qf(wb),xb=null,vb=void 0,yb.set(o,100)):(yb.set(o,yb.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=ib(e);if(n)for(var i=n.families,r=0,o=i.length;r<o;++r){var h=i[r],l=n.style+"\n"+n.weight+"\n"+h;void 0===yb.get(l)&&(yb.set(l,100,!0),a(n.style,n.weight,h)||(yb.set(l,0,!0),void 0===t&&(t=setInterval(s,32))))}}}();function Mb(t,e){return xb||(xb=ob(1,1)),t!=vb&&(xb.font=t,vb=xb.font),xb.measureText(e)}function Cb(t,e){return Mb(t,e).width}function Sb(t,e,n){if(e in n)return n[e];var i=Cb(t,e);return n[e]=i,i}var Eb=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Tb=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=fp(yb,jf,e.redrawText.bind(e)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(n.element_,r.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return Eb(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var i=new Qw(t,void 0,e);n.dispatchEvent(i)}},e.prototype.disposeInternal=function(){dp(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(jw,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var i=[],r=null,o=0,a=e.length;o<a;++o){var s=e[o];if(t.layerIndex=o,Ww(s,n)&&(s.sourceState==Uw||s.sourceState==Bw)){var h=s.layer,l=h.render(t,r);l&&(l!==r&&(this.children_.push(l),r=l),"getDeclutter"in h&&i.push(h))}}for(o=i.length-1;o>=0;--o)i[o].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,i=0;;++i){var r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var h=a[s],l=h.layer;if(l.hasRenderer()&&Ww(h,o)&&r(l)){var c=l.getRenderer().getDataAtPixel(t,e,n);if(c){var u=i(l,c);if(u)return u}}}},e}(Kw);const Ob=Tb,Pb="add",kb="remove";var Ib=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ab="length",Lb=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.element=n,r.index=i,r}return Ib(e,t),e}(Ff),Rb=function(t){function e(e,n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};if(i.unique_=!!r.unique,i.array_=e||[],i.unique_)for(var o=0,a=i.array_.length;o<a;++o)i.assertUnique_(i.array_[o],o);return i.updateLength_(),i}return Ib(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Ab)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Lb(Pb,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Lb(kb,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Lb(kb,i,t)),this.dispatchEvent(new Lb(Pb,e,t))}else{for(var r=n;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Ab,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Tp(58)},e}(Sp);const Nb=Rb;var Db=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Fb=function(t){function e(e,n){var i=t.call(this,e)||this;return i.layer=n,i}return Db(e,t),e}(Ff),jb="layers",zb=function(t){function e(e){var n=this,i=e||{},r=$f({},i);delete r.layers;var o=i.layers;return(n=t.call(this,r)||this).on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(jb,n.handleLayersChanged_),o?Array.isArray(o)?o=new Nb(o.slice(),{unique:!0}):Op("function"==typeof o.getArray,43):o=new Nb(void 0,{unique:!0}),n.setLayers(o),n}return Db(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(dp),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(fp(t,Pb,this.handleLayersAdd_,this),fp(t,kb,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(dp);Qf(this.listenerKeys_);for(var n=t.getArray(),i=0,r=n.length;i<r;i++){var o=n[i];this.registerLayerListeners_(o),this.dispatchEvent(new Fb("addlayer",o))}this.changed()},e.prototype.registerLayerListeners_=function(t){var n=[fp(t,jf,this.handleLayerChange_,this),fp(t,op,this.handleLayerChange_,this)];t instanceof e&&n.push(fp(t,"addlayer",this.handleLayerGroupAdd_,this),fp(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[wp(t)]=n},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new Fb("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new Fb("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Fb("addlayer",e)),this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=wp(e);this.listenerKeys_[n].forEach(dp),delete this.listenerKeys_[n],this.dispatchEvent(new Fb("removelayer",e)),this.changed()},e.prototype.getLayers=function(){return this.get(jb)},e.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var n=e.getArray(),i=0,r=n.length;i<r;++i)this.dispatchEvent(new Fb("removelayer",n[i]));this.set(jb,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var i=this.getLayerState(),r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(var o=n,a=e.length;o<a;o++){var s=e[o];s.opacity*=i.opacity,s.visible=s.visible&&i.visible,s.maxResolution=Math.min(s.maxResolution,i.maxResolution),s.minResolution=Math.max(s.minResolution,i.minResolution),s.minZoom=Math.max(s.minZoom,i.minZoom),s.maxZoom=Math.min(s.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==s.extent?s.extent=wd(s.extent,i.extent):s.extent=i.extent),void 0===s.zIndex&&(s.zIndex=r)}return e},e.prototype.getSourceState=function(){return Uw},e}(Fw);const Bb=zb;var Ub=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Gb=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.map=n,r.frameState=void 0!==i?i:null,r}return Ub(e,t),e}(Ff);const Hb=Gb;var Wb=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vb=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=i,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==r&&r,a}return Wb(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Hb);const qb=Vb,Yb={SINGLECLICK:"singleclick",CLICK:sp,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Xb="pointermove",Kb="pointerdown";var Zb=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$b=function(t){function e(e,n){var i=t.call(this,e)||this;i.map_=e,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=void 0===n?1:n,i.down_=null;var r=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=r,i.pointerdownListenerKey_=fp(r,Kb,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=fp(r,Xb,i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(cp,i.boundHandleTouchMove_,!!Hp&&{passive:!1}),i}return Zb(e,t),e.prototype.emulateClick_=function(t){var e=new qb(Yb.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new qb(Yb.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new qb(Yb.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Yb.POINTERUP||e.type==Yb.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Yb.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new qb(Yb.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(dp),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new qb(Yb.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var i=t[n];this.down_[n]="function"==typeof i?Zf:i}if(0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(fp(r,Yb.POINTERMOVE,this.handlePointerMove_,this),fp(r,Yb.POINTERUP,this.handlePointerUp_,this),fp(this.element_,Yb.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(fp(this.element_.getRootNode(),Yb.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new qb(Yb.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new qb(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(dp(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(cp,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(dp(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(dp),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(rp);const Qb=$b,Jb="postrender",tM="layergroup",eM="size",nM="target",iM="view";var rM=1/0;const oM=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Qf(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},t.prototype.enqueue=function(t){Op(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=rM&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],a=t;t<i>>1;){var s=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<i&&n[h]<n[s]?h:s;e[t]=e[l],n[t]=n[l],t=l}e[t]=r,n[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],o=i[e];e>t;){var a=this.getParentIndex_(e);if(!(i[a]>o))break;n[e]=n[a],i[e]=i[a],e=a}n[e]=r,i[e]=o},t.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,r=this.elements_,o=this.priorities_,a=0,s=r.length;for(e=0;e<s;++e)(n=i(t=r[e]))==rM?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,r[a++]=t);r.length=a,o.length=a,this.heapify_()},t}();var aM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const sM=function(t){function e(e,n){var i=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return aM(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(op,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(op,this.boundHandleTileChange_);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)i=(n=this.dequeue()[0]).getKey(),0!==n.getState()||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++r,n.load())},e}(oM),hM={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function lM(t,e,n){return function(i,r,o,a,s){if(i){var h=e?0:o[0]*r,l=e?0:o[1]*r,c=s?s[0]:0,u=s?s[1]:0,f=t[0]+h/2+c,p=t[2]-h/2+c,d=t[1]+l/2+u,g=t[3]-l/2+u;f>p&&(p=f=(p+f)/2),d>g&&(g=d=(g+d)/2);var m=Pd(i[0],f,p),y=Pd(i[1],d,g),v=30*r;return a&&n&&(m+=-v*Math.log(1+Math.max(0,f-i[0])/v)+v*Math.log(1+Math.max(0,i[0]-p)/v),y+=-v*Math.log(1+Math.max(0,d-i[1])/v)+v*Math.log(1+Math.max(0,i[1]-g)/v)),[m,y]}}}function cM(t){return t}function uM(t,e,n,i){var r=Cd(e)/n[0],o=xd(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function fM(t,e,n){var i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Pd(i,n/2,2*e)}function pM(t,e,n,i,r){return function(o,a,s,h){if(void 0!==o){var l=i?uM(t,i,s,r):t;return(void 0===n||n)&&h?fM(o,l,e):Pd(o,e,l)}}}function dM(t){return void 0!==t?0:void 0}function gM(t){return void 0!==t?t:void 0}function mM(t){return Math.pow(t,3)}function yM(t){return 1-mM(1-t)}function vM(t){return 3*t*t-2*t*t*t}function _M(t){return t}var xM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),wM=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var i=$f({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=vg(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.center&&(i.center=Ig(i.center,n.projection_)),i.extent&&(i.extent=Lg(i.extent,n.projection_)),n.applyOptions_(i),n}return xM(e,t),e.prototype.applyOptions_=function(t){var e=$f({},t);for(var n in hM)delete e[n];this.setProperties(e,!0);var i=function(t){var e,n,i,r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=vg(t.projection,"EPSG:3857"),u=c.getExtent(),f=t.constrainOnlyCenter,p=t.extent;if(s||p||!c.isGlobal()||(f=!1,p=u),void 0!==t.resolutions){var d=t.resolutions;n=d[r],i=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,n,i){return function(r,o,a,s){if(void 0!==r){var h=t[0],l=t[t.length-1],c=n?uM(h,n,a,i):h;if(s)return void 0===e||e?fM(r,c,l):Pd(r,l,c);var u=Math.min(c,r),f=Math.floor(Gf(t,u,o));return t[f]>c&&f<t.length-1?t[f+1]:t[f]}}}(d,h,!f&&p,l):pM(n,i,h,!f&&p,l)}else{var g=(u?Math.max(Cd(u),xd(u)):360*Lp[Rp.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),m=g/Math.pow(2,28);void 0!==(n=t.maxResolution)?r=0:n=g/Math.pow(a,r),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,o):g/Math.pow(a,o):m),o=r+Math.floor(Math.log(n/i)/Math.log(a)),i=n/Math.pow(a,o-r),e=t.constrainResolution?function(t,e,n,i,r,o){return function(a,s,h,l){if(void 0!==a){var c=r?uM(e,r,h,o):e,u=void 0!==n?n:0;if(l)return void 0===i||i?fM(a,c,u):Pd(a,u,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),g=Math.floor(Math.log(e/d)/Math.log(t)+p),m=Math.max(f,g);return Pd(e/Math.pow(t,m),u,c)}}}(a,n,i,h,!f&&p,l):pM(n,i,h,!f&&p,l)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return lM(t.extent,t.constrainOnlyCenter,e)}var n=vg(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var i=n.getExtent().slice();return i[0]=-1/0,i[2]=1/0,lM(i,!1,!1)}return cM}(t),o=i.constraint,a=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(r=Rd(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=r?0:t:void 0}):!1===e?gM:"number"==typeof e?(n=e,i=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/i+.5)*i:void 0}):gM}return dM;var n,i,r}(t);this.constraints_={center:r,resolution:o,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var i=t||[0,0,0,0];e=e||[0,0,0,0];var r=this.getResolution(),o=r/2*(i[3]-e[3]+e[1]-i[1]),a=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-a])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),$f({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var i=arguments[n];i.center&&((i=$f({},i)).center=Ig(i.center,this.getProjection())),i.anchor&&((i=$f({},i)).anchor=Ig(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var r=arguments[i];r.center&&this.setCenterInternal(r.center),void 0!==r.zoom?this.setZoom(r.zoom):r.resolution&&this.setResolution(r.resolution),void 0!==r.rotation&&this.setRotation(r.rotation)}if(i!==n){for(var o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,h=this.targetRotation_,l=[];i<n;++i){var c=arguments[i],u={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||vM,callback:e};if(c.center&&(u.sourceCenter=a,u.targetCenter=c.center.slice(),a=u.targetCenter),void 0!==c.zoom?(u.sourceResolution=s,u.targetResolution=this.getResolutionForZoom(c.zoom),s=u.targetResolution):c.resolution&&(u.sourceResolution=s,u.targetResolution=c.resolution,s=u.targetResolution),void 0!==c.rotation){u.sourceRotation=h;var f=Nd(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=h+f,h=u.targetRotation}MM(u)?u.complete=!0:o+=u.duration,l.push(u)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}else e&&bM(e,!0)},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var i=this.animations_[e];if(i[0].callback&&bM(i[0].callback,!1),!t)for(var r=0,o=i.length;r<o;++r){var a=i[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],r=!0,o=0,a=i.length;o<a;++o){var s=i[o];if(!s.complete){var h=t-s.start,l=s.duration>0?h/s.duration:1;l>=1?(s.complete=!0,l=1):r=!1;var c=s.easing(l);if(s.sourceCenter){var u=s.sourceCenter[0],f=s.sourceCenter[1],p=s.targetCenter[0],d=s.targetCenter[1];this.nextCenter_=s.targetCenter;var g=u+c*(p-u),m=f+c*(d-f);this.targetCenter_=[g,m]}if(s.sourceResolution&&s.targetResolution){var y=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var v=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(y,0,v,!0);this.targetCenter_=this.calculateCenterZoom(_,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var x=1===c?Nd(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var w=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(w,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(r){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var b=i[0].callback;b&&bM(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,i,r,o=this.getCenterInternal();return void 0!==o&&(sg(n=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),r=e,(i=n)[0]+=+r[0],i[1]+=+r[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenterInternal(),r=this.getResolution();return void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?kg(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(hM.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return Ag(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();Op(n,1);var i=this.getResolution();Op(void 0!==i,2);var r=this.getRotation();return Op(void 0!==r,3),_d(n,i,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(hM.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Lg(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),i=Cd(t)/n[0],r=xd(t)/n[1];return Math.max(i,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return n/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(hM.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),i=this.getCenterInternal(),r=this.padding_;if(r){var o=this.getViewportSizeMinusPadding_();i=CM(i,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var r=Gf(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Pd(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Pd(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(Op(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Op(!Ed(t),25),n=sy(i=Lg(t,this.getProjection()));else if(t.getType()===Hg.CIRCLE){var i;(n=sy(i=Lg(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),yd(i))}else{var r=Pg();n=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,h=-1/0,l=-1/0,c=0,u=r.length;c<u;c+=o){var f=r[c]*n-r[c+1]*i,p=r[c]*i+r[c+1]*n;a=Math.min(a,f),s=Math.min(s,p),h=Math.max(h,f),l=Math.max(l,p)}return[a,s,h,l]},e.prototype.fitInternal=function(t,e){var n=e||{},i=n.size;i||(i=this.getViewportSizeMinusPadding_());var r,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var s=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(s,[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);h=isNaN(h)?r:Math.max(h,r),h=this.getConstrainedResolution(h,a?0:1);var l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),f=yd(s);f[0]+=(o[1]-o[3])/2*h,f[1]+=(o[0]-o[2])/2*h;var p=f[0]*u-f[1]*c,d=f[1]*u+f[0]*c,g=this.getConstrainedCenter([p,d],h),m=n.callback?n.callback:Zf;void 0!==n.duration?this.animateInternal({resolution:h,center:g,duration:n.duration,easing:n.easing},m):(this.targetResolution_=h,this.targetCenter_=g,this.applyTargetState_(!1,!0),bM(m,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Ig(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(CM(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,i){var r,o=this.padding_;if(o&&t){var a=this.getViewportSizeMinusPadding_(-n),s=CM(t,i,[a[0]/2+o[3],a[1]/2+o[0]],e,n);r=[t[0]-s[0],t[1]-s[1]]}return r},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=kg(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Ig(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Ig(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Ig(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,i,r));this.get(hM.ROTATION)!==i&&this.set(hM.ROTATION,i),this.get(hM.RESOLUTION)!==o&&(this.set(hM.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(hM.CENTER)&&ag(this.get(hM.CENTER),a)||this.set(hM.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var i=void 0!==t?t:200,r=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,r,a),h=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,o,a));if(0===i&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=h,void this.applyTargetState_();var l=n||(0===i?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&ag(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:h,resolution:s,duration:i,easing:yM,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var i=n&&Ig(n,this.getProjection());this.endInteractionInternal(t,e,i)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)},e}(Sp);function bM(t,e){setTimeout((function(){t(e)}),0)}function MM(t){return!(t.sourceCenter&&t.targetCenter&&!ag(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function CM(t,e,n,i,r){var o=Math.cos(-r),a=Math.sin(-r),s=t[0]*o-t[1]*a,h=t[1]*o+t[0]*a;return[(s+=(e[0]/2-n[0])*i)*o-(h+=(n[1]-e[1]/2)*i)*(a=-a),h*o+s*a]}const SM=wM;function EM(t){return t[0]>0&&t[1]>0}function TM(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var OM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function PM(t){t instanceof Vw?t.setMapInternal(null):t instanceof Bb&&t.getLayers().forEach(PM)}function kM(t,e){if(t instanceof Vw)t.setMapInternal(e);else if(t instanceof Bb)for(var n=t.getLayers().getArray(),i=0,r=n.length;i<r;++i)kM(n[i],e)}var IM=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,r,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Bb({layers:t.layers});return o.layergroup=a,o.target=t.target,o.view=t.view instanceof SM?t.view:new SM,void 0!==t.controls&&(Array.isArray(t.controls)?n=new Nb(t.controls.slice()):(Op("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new Nb(t.interactions.slice()):(Op("function"==typeof t.interactions.getArray,48),i=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new Nb(t.overlays.slice()):(Op("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new Nb,{controls:n,interactions:i,keyboardEventTarget:e,overlays:r,values:o}}(e);n.renderComplete_,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Bp,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new Nb,n.interactions=i.interactions||new Nb,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new sM(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(tM,n.handleLayerGroupChanged_),n.addChangeListener(iM,n.handleViewChanged_),n.addChangeListener(eM,n.handleSizeChanged_),n.addChangeListener(nM,n.handleTargetChanged_),n.setProperties(i.values);var r=n;return!e.view||e.view instanceof SM||e.view.then((function(t){r.setView(new SM(t))})),n.controls.addEventListener(Pb,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(kb,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Pb,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(kb,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Pb,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(kb,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return OM(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.handleLayerAdd_=function(t){kM(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:Xf,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.getAllLayers=function(){var t=[];return function e(n){n.forEach((function(n){n instanceof Bb?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{},r=void 0!==i.hitTolerance?i.hitTolerance:0,o=i.layerFilter||Xf;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Xf,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(nM)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return kg(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Wp(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(tM)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof Nb)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer.getSource();if(i&&i.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Ig(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Wp(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(eM)},e.prototype.getView=function(){return this.get(iM)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return rM;if(!t.wantedTiles[n][e.getKey()])return rM;var o=t.viewState.center,a=i[0]-o[0],s=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r}(this.frameState_,t,e,n,i)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,i=new qb(n,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===Kb||n===up||n===hp){var i=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===i?i.documentElement:r).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var h=a[s];if(h.getMap()===this&&h.getActive()&&this.getTargetElement()&&(!h.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var r=t.viewHints;if(r[0]||r[1]){var o=Date.now()-t.time>8;n=o?0:8,i=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.hasListener(zw)&&!t.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(zw,t);for(var a=this.postRenderFunctions_,s=0,h=a.length;s<h;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)dp(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ap,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(up,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,sb(this.viewport_)}var n=this.getTargetElement();if(n){for(var i in n.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Qb(this,this.moveTolerance_),Yb)this.mapBrowserEventHandler_.addEventListener(Yb[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ap,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(up,this.boundHandleBrowserEvent_,!!Hp&&{passive:!1});var r=this.getOwnerDocument().defaultView,o=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[fp(o,hp,this.handleBrowserEvent,this),fp(o,lp,this.handleBrowserEvent,this),fp(r,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(dp(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(dp(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=fp(t,jf,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=fp(t,op,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(dp),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Fb("addlayer",t)),this.layerGroupPropertyListenerKeys_=[fp(t,jf,this.render,this),fp(t,op,this.render,this),fp(t,"addlayer",this.handleLayerAdd_,this),fp(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.handleLayerRemove_=function(t){PM(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this,n=this.getSize(),i=this.getView(),r=this.frameState_,o=null;if(void 0!==n&&EM(n)&&i&&i.isDef()){var a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:_d(s.center,s.resolution,s.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:wp(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var h=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=_d(s.nextCenter,s.nextResolution,h,n)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Ed(this.previousExtent_)&&!hd(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Hb("movestart",this,r)),this.previousExtent_=od(this.previousExtent_)),this.previousExtent_&&!o.viewHints[0]&&!o.viewHints[1]&&!hd(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Hb("moveend",this,o)),$p(o.extent,this.previousExtent_))),this.dispatchEvent(new Hb(Jb,this,o)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoading(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new Fb("removelayer",e)),this.set(tM,t)},e.prototype.setSize=function(t){this.set(eM,t)},e.prototype.setTarget=function(t){this.set(nM,t)},e.prototype.setView=function(t){if(!t||t instanceof SM)this.set(iM,t);else{this.set(iM,new SM);var e=this;t.then((function(t){e.setView(new SM(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||!EM(e=[i,r])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(Sp);const AM=IM;var LM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),RM=function(t){function e(e){var n=t.call(this)||this,i=e.element;return!i||e.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return LM(e,t),e.prototype.disposeInternal=function(){sb(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&sb(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)dp(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Zf&&this.listenerKeys.push(fp(t,Jb,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Sp);const NM=RM;var DM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const FM=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===i.collapsed||i.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==i.collapsible,n.collapsible_=void 0===i.collapsible||i.collapsible,n.collapsible_||(n.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-attribution",o=void 0!==i.tipLabel?i.tipLabel:"Attributions",a=void 0!==i.expandClassName?i.expandClassName:r+"-expand",s=void 0!==i.collapseLabel?i.collapseLabel:"›",h=void 0!==i.collapseClassName?i.collapseClassName:r+"-collpase";"string"==typeof s?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=s,n.collapseLabel_.className=h):n.collapseLabel_=s;var l=void 0!==i.label?i.label:"i";"string"==typeof l?(n.label_=document.createElement("span"),n.label_.textContent=l,n.label_.className=a):n.label_=l;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=o,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(sp,n.handleClick_.bind(n),!1);var u=r+" ol-unselectable "+tb+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),f=n.element;return f.className=u,f.appendChild(n.toggleButton_),f.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return DM(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],i=!0,r=t.layerStatesArray,o=0,a=r.length;o<a;++o){var s=r[o];if(Ww(s,t.viewState)){var h=s.layer.getSource();if(h){var l=h.getAttributions();if(l){var c=l(t);if(c)if(i=i&&!1!==h.getAttributionsCollapsible(),Array.isArray(c))for(var u=0,f=c.length;u<f;++u)c[u]in e||(n.push(c[u]),e[c[u]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!qf(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var i=0,r=e.length;i<r;++i){var o=document.createElement("li");o.innerHTML=e[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ab(this.collapseLabel_,this.label_):ab(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(NM);var jM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zM=function(t){function e(e){var n=this,i=e||{};n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var r=void 0!==i.className?i.className:"ol-rotate",o=void 0!==i.label?i.label:"⇧",a=void 0!==i.compassClassName?i.compassClassName:"ol-compass";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className=a,n.label_.textContent=o):(n.label_=o,n.label_.classList.add(a));var s=i.tipLabel?i.tipLabel:"Reset rotation",h=document.createElement("button");h.className=r+"-reset",h.setAttribute("type","button"),h.title=s,h.appendChild(n.label_),h.addEventListener(sp,n.handleClick_.bind(n),!1);var l=r+" ol-unselectable "+tb,c=n.element;return c.className=l,c.appendChild(h),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=void 0!==i.duration?i.duration:250,n.autoHide_=void 0===i.autoHide||i.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(Jw),n}return jM(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:yM}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var r=this.element.classList.contains(Jw);r||0!==n?r&&0!==n&&this.element.classList.remove(Jw):this.element.classList.add(Jw)}this.label_.style.transform=i}this.rotation_=n}},e}(NM);const BM=zM;var UM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const GM=function(t){function e(e){var n=this,i=e||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this;var r=void 0!==i.className?i.className:"ol-zoom",o=void 0!==i.delta?i.delta:1,a=void 0!==i.zoomInClassName?i.zoomInClassName:r+"-in",s=void 0!==i.zoomOutClassName?i.zoomOutClassName:r+"-out",h=void 0!==i.zoomInLabel?i.zoomInLabel:"+",l=void 0!==i.zoomOutLabel?i.zoomOutLabel:"–",c=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",u=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=c,f.appendChild("string"==typeof h?document.createTextNode(h):h),f.addEventListener(sp,n.handleClick_.bind(n,o),!1);var p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=u,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(sp,n.handleClick_.bind(n,-o),!1);var d=r+" ol-unselectable "+tb,g=n.element;return g.className=d,g.appendChild(f),g.appendChild(p),n.duration_=void 0!==i.duration?i.duration:250,n}return UM(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:yM})):e.setZoom(i)}}},e}(NM);function HM(t){var e=t||{},n=new Nb;return(void 0===e.zoom||e.zoom)&&n.push(new GM(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new BM(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new FM(e.attributionOptions)),n}const WM="active";var VM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),qM=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return VM(e,t),e.prototype.getActive=function(){return this.get(WM)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(WM,t)},e.prototype.setMap=function(t){this.map_=t},e}(Sp);function YM(t,e,n,i){var r=t.getZoom();if(void 0!==r){var o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:yM})}}const XM=qM;var KM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ZM=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:250,n}return KM(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Yb.DBLCLICK){var n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;YM(i.getView(),o,r,this.duration_),n.preventDefault(),e=!0}return!e},e}(XM);const $M=ZM;var QM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),JM=function(t){function e(e){var n=this,i=e||{};return n=t.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return QM(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Yb.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Yb.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Yb.POINTERDOWN){var i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Yb.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Yb.POINTERDOWN||e===Yb.POINTERDRAG||e===Yb.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==Yb.POINTERUP?delete this.trackedPointers_[n]:(t.type==Yb.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Jf(this.trackedPointers_)}},e}(XM);function tC(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}const eC=JM;function nC(t){var e=arguments;return function(t){for(var n=!0,i=0,r=e.length;i<r&&(n=n&&e[i](t));++i);return n}}var iC=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},rC=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},oC=Xf,aC=function(t){var e=t.originalEvent;return 0==e.button&&!(jp&&zp&&e.ctrlKey)},sC=Kf,hC=function(t){return t.type==Yb.SINGLECLICK},lC=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},cC=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},uC=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},fC=function(t){var e=t.originalEvent;return Op(void 0!==e,56),"mouse"==e.pointerType},pC=function(t){var e=t.originalEvent;return Op(void 0!==e,56),e.isPrimary&&0===e.button},dC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gC=function(t){function e(e){var n=t.call(this,{stopDown:Kf})||this,i=e||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var r=i.condition?i.condition:nC(lC,pC);return n.condition_=i.onFocusOnly?nC(rC,r):r,n.noKinetic_=!1,n}return dC(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,i=this.targetPointers,r=tC(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();e=o,n=a.getResolution(),e[0]*=n,e[1]*=n,sg(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-i*Math.cos(r),a[1]-i*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:yM})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(eC);const mC=gC;var yC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vC=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,{stopDown:Kf})||this).condition_=i.condition?i.condition:iC,n.lastAngle_=void 0,n.duration_=void 0!==i.duration?i.duration:250,n}return yC(e,t),e.prototype.handleDragEvent=function(t){if(fC(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==dM){var i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!fC(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!fC(t)||!aC(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(eC);const _C=vC;var xC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),wC=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return xC(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new ay([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(zf);const bC=wC;var MC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),CC=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.coordinate=n,r.mapBrowserEvent=i,r}return MC(e,t),e}(Ff);const SC=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var i=e||{};return n.box_=new bC(i.className||"ol-dragbox"),n.minArea_=void 0!==i.minArea?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:aC,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return MC(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new CC("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new CC(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new CC("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(eC);var EC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),TC=function(t){function e(e){var n=this,i=e||{},r=i.condition?i.condition:cC;return(n=t.call(this,{condition:r,className:i.className||"ol-dragzoom",minArea:i.minArea})||this).duration_=void 0!==i.duration?i.duration:200,n.out_=void 0!==i.out&&i.out,n}return EC(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var i=e.rotatedExtentForGeometry(n),r=e.getResolutionForExtentInternal(i),o=e.getResolution()/r;(n=n.clone()).scale(o*o)}e.fitInternal(n,{duration:this.duration_,easing:yM})},e}(SC);const OC=TC;var PC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kC=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.defaultCondition_=function(t){return lC(t)&&uC(t)},n.condition_=void 0!==i.condition?i.condition:n.defaultCondition_,n.duration_=void 0!==i.duration?i.duration:100,n.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128,n}return PC(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==hp){var n=t.originalEvent,i=n.keyCode;if(this.condition_(t)&&(40==i||37==i||39==i||38==i)){var r=t.map.getView(),o=r.getResolution()*this.pixelDelta_,a=0,s=0;40==i?s=-o:37==i?a=-o:39==i?a=o:s=o;var h=[a,s];sg(h,r.getRotation()),function(t,e,n){var i=t.getCenterInternal();if(i){var r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:_M,center:t.getConstrainedCenter(r)})}}(r,h,this.duration_),n.preventDefault(),e=!0}}return!e},e}(XM);const IC=kC;var AC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),LC=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.condition_=i.condition?i.condition:uC,n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:100,n}return AC(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==hp||t.type==lp){var n=t.originalEvent,i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var r=t.map,o=i=="+".charCodeAt(0)?this.delta_:-this.delta_;YM(r.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(XM);const RC=LC,NC=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var DC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),FC="trackpad",jC=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,i)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,n.duration_=void 0!==i.duration?i.duration:250,n.timeout_=void 0!==i.timeout?i.timeout:80,n.useAnchor_=void 0===i.useAnchor||i.useAnchor,n.constrainResolution_=void 0!==i.constrainResolution&&i.constrainResolution;var r=i.condition?i.condition:oC;return n.condition_=i.onFocusOnly?nC(rC,r):r,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return DC(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==up)return!0;var e,n=t.map,i=t.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==up&&(e=i.deltaY,Fp&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Bp),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?FC:"wheel");var o=n.getView();if(this.mode_===FC&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Pd(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),YM(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(XM);const zC=jC;var BC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),UC=function(t){function e(e){var n=this,i=e||{},r=i;return r.stopDown||(r.stopDown=Kf),(n=t.call(this,r)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==i.threshold?i.threshold:.3,n.duration_=void 0!==i.duration?i.duration:250,n}return BC(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==dM){var h=a.getViewport().getBoundingClientRect(),l=tC(this.targetPointers);l[0]-=h.left,l[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(eC);const GC=UC;var HC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),WC=function(t){function e(e){var n=this,i=e||{},r=i;return r.stopDown||(r.stopDown=Kf),(n=t.call(this,r)||this).anchor_=null,n.duration_=void 0!==i.duration?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return HC(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,h=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=tC(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),h.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(eC);const VC=WC;var qC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const YC=function(t){function e(e){return(e=$f({},e)).controls||(e.controls=HM()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},n=new Nb,i=new NC(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new _C),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new $M({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new mC({onFocusOnly:e.onFocusOnly,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new GC),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new VC({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new IC),n.push(new RC({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new zC({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new OC({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return qC(e,t),e.prototype.createRenderer=function(){return new Ob(this)},e}(AM),XC="layer",KC="legend_name",ZC="legend_url";class $C{constructor(t){this.layer=t,this.layer.set(XC,this)}getName(){return this.layer.get(KC)}setName(t){this.layer.set(KC,t)}isVisible(){return this.layer.getVisible()}setVisible(t){this.layer.setVisible(t)}setOpacity(t){this.layer.setOpacity(t)}hasLegend(t){return null!=this.getLegendUrl(t)}getLegendUrl(t){return this.layer.get(ZC)}setLegendUrl(t){this.layer.set(ZC,t)}clearLegend(){this.setLegendUrl(null)}changed(){this.layer.changed()}addAttribution(t){const e=this.layer.getSource();e&&e.setAttributions(t)}addChangeEventHandler(t){const e=this.layer.on(["change","change:visible"],(e=>t())),n=this.layer.getSource();let i=null;return n&&(i=n.on(["change","change:params"],(e=>t()))),()=>{yp(e),i&&yp(i)}}}class QC{constructor(t){this.interaction=t}setActive(t){this.interaction.setActive(t)}}var JC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),tS="projection",eS="coordinateFormat",nS=function(t){function e(e){var n=this,i=e||{},r=document.createElement("div");r.className=void 0!==i.className?i.className:"ol-mouse-position",(n=t.call(this,{element:r,render:i.render,target:i.target})||this).on,n.once,n.un,n.addChangeListener(tS,n.handleProjectionChanged_),i.coordinateFormat&&n.setCoordinateFormat(i.coordinateFormat),i.projection&&n.setProjection(i.projection);var o=!0,a="&#160;";return"undefinedHTML"in i?(void 0!==i.undefinedHTML&&(a=i.undefinedHTML),o=!!a):"placeholder"in i&&(!1===i.placeholder?o=!1:a=String(i.placeholder)),n.placeholder_=a,n.renderOnMouseOut_=o,n.renderedHTML_=r.innerHTML,n.mapProjection_=null,n.transform_=null,n}return JC(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(eS)},e.prototype.getProjection=function(){return this.get(tS)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(fp(n,Xb,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(fp(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(eS,t)},e.prototype.setProjection=function(t){this.set(tS,gg(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?wg(this.mapProjection_,n):pg}var i=this.getMap().getCoordinateFromPixelInternal(t);if(i){var r=Pg();r&&(this.transform_=wg(this.mapProjection_,r)),this.transform_(i,i);var o=this.getCoordinateFormat();e=o?o(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(NM);const iS=nS,rS="timeRange",oS="mapTime",aS="DISCRETE";class sS extends iS{constructor(t){super(t),this.htmlIcon=lw(pw).html[0]}setMap(t){super.setMap(t);for(let t=0,e=this.listenerKeys.length;t<e;++t)"pointermove"===this.listenerKeys[t].type&&dp(this.listenerKeys[t]);if(t){const e=t.on("propertychange",(({key:t})=>{t===oS&&this.updateMapTime()}));this.listenerKeys.push(e)}this.updateMapTime()}updateMapTime(){const t=this.getMap();if(t){const e=t.get(oS),n=this.element;e&&"none"===n.style.display?n.style.display="":e||""!==n.style.display||(n.style.display="none"),this.element.innerHTML=e?this.htmlIcon+" "+Oh(e):""}}}class hS{constructor(t){this.layer=t.layer,this.source=t.source,this.instance=t,this.eventKeys=[]}listen(t){this.eventKeys.push(t)}remove(){this.eventKeys.forEach(yp)}}class lS extends NM{constructor(t){const e=t||{};super({element:document.createElement("div"),render:e.render,target:e.target}),this.layers={}}setMap(t){super.setMap(t),t&&(t.getLayers().on("add",(({element:t})=>{const e=t.get(XC);this.acceptLayer(e)&&this.addLayer(e)})),t.getLayers().on("remove",(({element:t})=>{const e=t.get(XC);this.acceptLayer(e)&&this.removeLayer(e)})))}acceptLayer(t){return!0}addLayer(t){const e=t.layer.ol_uid;this.deleteLayer(e),this.layers[e]=this.createEntry(t),this.refresh()}createEntry(t){return new hS(t)}removeLayer(t){const e=t.layer.ol_uid;this.deleteLayer(e),this.refresh()}getLayers(){return Object.keys(this.layers).map((t=>this.layers[t]))}refresh(){}deleteLayer(t){this.layers.hasOwnProperty(t)&&(this.layers[t].remove(),delete this.layers[t])}}var cS="1.3.0";var uS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fS=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=i,o.resolution=n,o.state=r,o}return uS(e,t),e.prototype.changed=function(){this.dispatchEvent(op)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return _p()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){_p()},e}(rp);const pS=fS;var dS=function(){function t(t,e,n,i,r,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=bg(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Cd(i)==Cd(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Cd(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Cd(this.targetProj_.getExtent()):null;var h=bd(n),l=Md(n),c=md(n),u=gd(n),f=this.transformInv_(h),p=this.transformInv_(l),d=this.transformInv_(c),g=this.transformInv_(u),m=10+(o?Math.max(0,Math.ceil(Id(dd(n)/(o*o*256*256)))):0);if(this.addQuad_(h,l,c,u,f,p,d,g,m),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach((function(t,e,n){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,i,r,o,a,s,h){var l=Kp([r,o,a,s]),c=this.sourceWorldWidth_?Cd(l)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(h>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=Cd(Kp([t,e,n,i]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)),!(!p&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||Sd(l,this.maxSourceExtent_)){var d=0;if(!(p||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(h>0)p=!0;else if(1!=(d=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!p){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],m=this.transformInv_(g),y=void 0;y=f?(Nd(r[0],u)+Nd(a[0],u))/2-Nd(m[0],u):(r[0]+a[0])/2-m[0];var v=(r[1]+a[1])/2-m[1];p=y*y+v*v>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var _=[(e[0]+n[0])/2,(e[1]+n[1])/2],x=this.transformInv_(_),w=[(i[0]+t[0])/2,(i[1]+t[1])/2],b=this.transformInv_(w);this.addQuad_(t,e,_,w,r,o,x,b,h-1),this.addQuad_(w,_,n,i,b,x,a,s,h-1)}else{var M=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(M),S=[(n[0]+i[0])/2,(n[1]+i[1])/2],E=this.transformInv_(S);this.addQuad_(t,M,S,i,r,C,E,s,h-1),this.addQuad_(M,e,n,S,C,o,a,E,h-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(t,n,i,r,a,s),0==(14&d)&&this.addTriangle_(t,n,e,r,a,o),d&&(0==(13&d)&&this.addTriangle_(e,i,t,o,s,r),0==(7&d)&&this.addTriangle_(e,i,n,o,s,a))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,i){var r=e.source;cd(t,r[0]),cd(t,r[1]),cd(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();const gS=dS;var mS,yS={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},vS={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};function _S(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function xS(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function wS(t,e,n,i){var r=Mg(n,e,t),o=mg(e,i,n),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var h=t.getExtent();if(!h||Jp(h,r)){var l=mg(t,o,r)/o;isFinite(l)&&l>0&&(o/=l)}return o}function bS(t,e,n,i,r,o,a,s,h,l,c,u){var f=ob(Math.round(n*t),Math.round(n*e));if(u||$f(f,yS),0===h.length)return f.canvas;function p(t){return Math.round(t*n)/n}f.scale(n,n),f.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,e,n){ld(d,t.extent)}));var g=Cd(d),m=xd(d),y=ob(Math.round(n*g/i),Math.round(n*m/i));u||$f(y,yS);var v=n/i;h.forEach((function(t,e,n){var i=t.extent[0]-d[0],r=-(t.extent[3]-d[3]),o=Cd(t.extent),a=xd(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,i*v,r*v,o*v,a*v)}));var _=bd(a);return s.getTriangles().forEach((function(t,e,r){var a=t.source,s=t.target,h=a[0][0],l=a[0][1],c=a[1][0],g=a[1][1],m=a[2][0],v=a[2][1],x=p((s[0][0]-_[0])/o),w=p(-(s[0][1]-_[1])/o),b=p((s[1][0]-_[0])/o),M=p(-(s[1][1]-_[1])/o),C=p((s[2][0]-_[0])/o),S=p(-(s[2][1]-_[1])/o),E=h,T=l;h=0,l=0;var O=function(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),o=n+1;o<e;o++){var a=Math.abs(t[o][n]);a>r&&(r=a,i=o)}if(0===r)return null;var s=t[i];t[i]=t[n],t[n]=s;for(var h=n+1;h<e;h++)for(var l=-t[h][n]/t[n][n],c=n;c<e+1;c++)n==c?t[h][c]=0:t[h][c]+=l*t[n][c]}for(var u=new Array(e),f=e-1;f>=0;f--){u[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*u[f]}return u}([[c-=E,g-=T,0,0,b-x],[m-=E,v-=T,0,0,C-x],[0,0,c,g,M-w],[0,0,m,v,S-w]]);if(O){if(f.save(),f.beginPath(),function(){if(void 0===mS){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",_S(t,4,5,4,0),_S(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;mS=xS(e,0)||xS(e,4)||xS(e,8)}return mS}()||!u){f.moveTo(b,M);for(var P=x-b,k=w-M,I=0;I<4;I++)f.lineTo(b+p((I+1)*P/4),M+p(I*k/3)),3!=I&&f.lineTo(b+p((I+1)*P/4),M+p((I+1)*k/3));f.lineTo(C,S)}else f.moveTo(b,M),f.lineTo(x,w),f.lineTo(C,S);f.clip(),f.transform(O[0],O[2],O[1],O[3],x,w),f.translate(d[0]-E,d[3]-T),f.scale(i/n,-i/n),f.drawImage(y.canvas,0,0),f.restore()}})),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var i=t.target,r=(i[0][0]-_[0])/o,a=-(i[0][1]-_[1])/o,s=(i[1][0]-_[0])/o,h=-(i[1][1]-_[1])/o,l=(i[2][0]-_[0])/o,c=-(i[2][1]-_[1])/o;f.beginPath(),f.moveTo(s,h),f.lineTo(r,a),f.lineTo(l,c),f.closePath(),f.stroke()})),f.restore()),f.canvas}var MS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),CS=function(t){function e(e,n,i,r,o,a,s){var h=this,l=e.getExtent(),c=n.getExtent(),u=c?wd(i,c):i,f=wS(e,n,yd(u),r),p=new gS(e,n,u,l,.5*f,r),d=a(p.calculateSourceExtent(),f,o),g=d?0:4,m=d?d.getPixelRatio():1;return(h=t.call(this,i,r,m,g)||this).targetProj_=n,h.maxSourceExtent_=l,h.triangulation_=p,h.targetResolution_=r,h.targetExtent_=i,h.sourceImage_=d,h.sourcePixelRatio_=m,h.interpolate_=s,h.canvas_=null,h.sourceListenerKey_=null,h}return MS(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(2==t){var e=Cd(this.targetExtent_)/this.targetResolution_,n=xd(this.targetExtent_)/this.targetResolution_;this.canvas_=bS(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=fp(this.sourceImage_,op,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){dp(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(pS);const SS=CS;var ES=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),TS=function(t){function e(e){var n=t.call(this)||this;n.projection=gg(e.projection),n.attributions_=OS(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:Uw,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n.interpolate_=!!e.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise((function(t,e){i.viewResolver=t,i.viewRejector=e})),n}return ES(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return _p()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=OS(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Sp);function OS(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const PS=TS;var kS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),IS=function(t){function e(e,n){var i=t.call(this,e)||this;return i.image=n,i}return kS(e,t),e}(Ff),AS=function(t){function e(e){var n=this,i=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(i=e.interpolate),(n=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:i})||this).on,n.once,n.un,n.resolutions_=void 0!==e.resolutions?e.resolutions:null,n.reprojectedImage_=null,n.reprojectedRevision_=0,n}return kS(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Gf(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,n,i){var r=this.getProjection();if(r&&i&&!xg(r,i)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&xg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&hd(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new SS(r,i,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,r)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(i=r),this.getImageInternal(t,e,n,i)},e.prototype.getImageInternal=function(t,e,n,i){return _p()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new IS("imageloadstart",e));break;case 2:this.loading=!1,this.dispatchEvent(new IS("imageloadend",e));break;case 3:this.loading=!1,this.dispatchEvent(new IS("imageloaderror",e))}},e}(PS);function LS(t,e){t.getImage().src=e}const RS=AS;var NS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),DS=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,n,i,0)||this;return s.src_=r,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=0,s.imageLoadFunction_=a,s}return NS(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=xd(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=FS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=xd(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(pS);function FS(t,e,n){var i=t,r=!0,o=!1,a=!1,s=[pp(i,"load",(function(){a=!0,o||e()}))];return i.src&&Gp?(o=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(a?e():n())}))):s.push(pp(i,"error",n)),function(){r=!1,s.forEach(dp)}}const jS=DS;function zS(t,e){var n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));var i=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+i}var BS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),US=[101,101],GS=function(t){function e(e){var n=this,i=e||{},r=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(r=i.interpolate),(n=t.call(this,{attributions:i.attributions,interpolate:r,projection:i.projection,resolutions:i.resolutions})||this).crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,n.url_=i.url,n.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:LS,n.params_=i.params||{},n.v13_=!0,n.updateV13_(),n.serverType_=i.serverType,n.hidpi_=void 0===i.hidpi||i.hidpi,n.image_=null,n.imageSize_=[0,0],n.renderedRevision_=0,n.ratio_=void 0!==i.ratio?i.ratio:1.5,n}return BS(e,t),e.prototype.getFeatureInfoUrl=function(t,e,n,i){if(void 0!==this.url_){var r=gg(n),o=this.getProjection();o&&o!==r&&(e=wS(o,r,t,e),t=Mg(t,r,o));var a=_d(t,e,0,US),s={SERVICE:"WMS",VERSION:cS,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};$f(s,this.params_,i);var h=zd((t[0]-a[0])/e,4),l=zd((a[3]-t[1])/e,4);return s[this.v13_?"I":"X"]=h,s[this.v13_?"J":"Y"]=l,this.getRequestUrl_(a,US,1,o||r,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var n={SERVICE:"WMS",VERSION:cS,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var i=this.params_.LAYERS;if(Array.isArray(i)&&1!==i.length)return;n.LAYER=i}if(void 0!==t){var r=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*r/28e-5}return $f(n,e),zS(this.url_,n)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,n,i){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==n||this.hidpi_&&void 0!==this.serverType_||(n=1);var r=e/n,o=yd(t),a=_d(o,r,0,[Bd(Cd(t)/r,4),Bd(xd(t)/r,4)]),s=_d(o,r,0,[Bd(this.ratio_*Cd(t)/r,4),Bd(this.ratio_*xd(t)/r,4)]),h=this.image_;if(h&&this.renderedRevision_==this.getRevision()&&h.getResolution()==e&&h.getPixelRatio()==n&&td(h.getExtent(),a))return h;var l={SERVICE:"WMS",VERSION:cS,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};$f(l,this.params_),this.imageSize_[0]=jd(Cd(s)/r,4),this.imageSize_[1]=jd(xd(s)/r,4);var c=this.getRequestUrl_(s,this.imageSize_,n,i,l);return this.image_=new jS(s,e,n,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(op,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,n,i,r){if(Op(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":var o=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+o:r.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":r.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":r.DPI=90*n;break;default:Op(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];var a,s=i.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=a.join(","),zS(this.url_,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){$f(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||cS;this.v13_=function(t,e){for(var n=(""+t).split("."),i="1.3".split("."),r=0;r<Math.max(n.length,i.length);r++){var o=parseInt(n[r]||"0",10),a=parseInt(i[r]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}(t)>=0},e}(RS);const HS=GS;var WS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const VS=function(t){function e(e){var n=e||{};return t.call(this,n)||this}return WS(e,t),e}(Vw);var qS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),YS=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return qS(e,t),e.prototype.getFeatures=function(t){return _p()},e.prototype.prepareFrame=function(t){return _p()},e.prototype.renderFrame=function(t,e){return _p()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(i,r){var o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){},e.prototype.getDataAtPixel=function(t,e,n){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(op,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Uw&&t.changed()},e}(vp);const XS=YS;var KS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ZS=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.pixelContext_=null,n}return KS(e,t),e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,n,i){var r,o,a=this.getLayer().getClassName();if(t&&t.className===a&&""===t.style.opacity&&1===n&&(!i||t.style.backgroundColor&&qf(xw(t.style.backgroundColor),xw(i)))&&(h=t.firstElementChild)instanceof HTMLCanvasElement&&(o=h.getContext("2d")),o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=a;var s=r.style;s.position="absolute",s.width="100%",s.height="100%",i&&(s.backgroundColor=i);var h=(o=ob()).canvas;r.appendChild(h),(s=h.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=r,this.context=o}},e.prototype.clipUnrotated=function(t,e,n){var i=bd(n),r=Md(n),o=md(n),a=gd(n);Wp(e.coordinateToPixelTransform,i),Wp(e.coordinateToPixelTransform,r),Wp(e.coordinateToPixelTransform,o),Wp(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Wp(s,i),Wp(s,r),Wp(s,o),Wp(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var i=this.getLayer();if(i.hasListener(t)){var r=new Qw(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,i,r,o,a){var s=r/2,h=o/2,l=i/e,c=-l,u=-t[0]+a,f=-t[1];return Vp(this.tempTransform,s,h,l,c,-n,u,f)},e.prototype.getDataAtPixel=function(t,e,n){var i=Wp(this.inversePixelTransform,t.slice()),r=this.context,o=this.getLayer().getExtent();if(o&&!Jp(o,Wp(e.pixelToCoordinateTransform,t.slice())))return null;var a,s=Math.round(i[0]),h=Math.round(i[1]),l=this.pixelContext_;if(!l){var c=document.createElement("canvas");c.width=1,c.height=1,l=c.getContext("2d"),this.pixelContext_=l}l.clearRect(0,0,1,1);try{l.drawImage(r.canvas,s,h,1,1,0,0,1,1),a=l.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.pixelContext_=null,new Uint8Array):a}return 0===a[3]?null:a},e}(XS);const $S=ZS;var QS=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),JS=function(t){function e(e){var n=t.call(this,e)||this;return n.image_=null,n}return QS(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,r=i.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=wd(s,Lg(e.extent,i.projection))),!a[0]&&!a[1]&&!Ed(s))if(o){var h=i.projection,l=o.getImage(s,r,n,h);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var n=this.image_,i=n.getExtent(),r=n.getResolution(),o=n.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,h=t.viewState,l=h.center,c=h.resolution,u=t.size,f=s*r/(c*o),p=Math.round(u[0]*s),d=Math.round(u[1]*s),g=h.rotation;if(g){var m=Math.round(Math.sqrt(p*p+d*d));p=m,d=m}Vp(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,g,-p/2,-d/2),qp(this.inversePixelTransform,this.pixelTransform);var y=Yp(this.pixelTransform);this.useContainer(e,y,a.opacity,this.getBackground(t));var v=this.context,_=v.canvas;_.width!=p||_.height!=d?(_.width=p,_.height=d):this.containerReused||v.clearRect(0,0,p,d);var x=!1,w=!0;if(a.extent){var b=Lg(a.extent,h.projection);(x=(w=Sd(b,t.extent))&&!td(b,t.extent))&&this.clipUnrotated(v,t,b)}var M=n.getImage(),C=Vp(this.tempTransform,p/2,d/2,f,f,0,o*(i[0]-l[0])/r,o*(l[1]-i[3])/r);this.renderedResolution=r*s/o;var S=M.width*C[0],E=M.height*C[3];if(this.getLayer().getSource().getInterpolate()||$f(v,yS),this.preRender(v,t),w&&S>=.5&&E>=.5){var T=C[4],O=C[5],P=a.opacity,k=void 0;1!==P&&(k=v.globalAlpha,v.globalAlpha=P),v.drawImage(M,0,0,+M.width,+M.height,Math.round(T),Math.round(O),Math.round(S),Math.round(E)),1!==P&&(v.globalAlpha=k)}return this.postRender(v,t),x&&v.restore(),$f(v,vS),y!==_.style.transform&&(_.style.transform=y),this.container},e}($S);const tE=JS;var eE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const nE=function(t){function e(e){return t.call(this,e)||this}return eE(e,t),e.prototype.createRenderer=function(){return new tE(this)},e}(VS);class iE{constructor(t,e){this.min=new Date(t),this.max=new Date(e)}get start(){return this.min}get end(){return this.max}get values(){return[this.min,this.max]}}class rE{constructor(t){this.values_=(t||[]).map((t=>new Date(t)))}get start(){return this.values[0]}get end(){return this.values.at(-1)}get values(){return this.values_}}const oE="LEGEND_SIZE";class aE extends $C{constructor(t,e){super(e),this.source=t,this.extent=void 0,this.source.on("imageloadstart",(({image:t})=>{t.extent&&(this.extent=t.extent)}))}updateLayers(t){this.source.updateParams({LAYERS:t})}updateStyles(t){const e=t||"";this.source.updateParams({STYLES:e})}updateVersion(t){this.source.updateParams({VERSION:t})}updateCqlFilter(t){if(t)this.source.updateParams({CQL_FILTER:t});else{const t=this.source.getParams();t.hasOwnProperty("CQL_FILTER")&&(delete t.CQL_FILTER,this.source.changed())}}updateTime(t){if(t)this.source.updateParams({TIME:t});else{const t=this.source.getParams();t.hasOwnProperty("TIME")&&(delete t.TIME,this.source.changed())}}getTimestamp(){return this.source.getParams().TIME}setUrl(t){this.source.setUrl(t)}getExtent(){return this.extent}setLinearTimeRange(t,e){this.layer.set(rS,new iE(t,e))}setDiscreteTimeRange(t){this.layer.set(rS,new rE(t))}clearTimeRange(){this.layer.set(rS,null)}getLegendUrl(t){let e=super.getLegendUrl(t);const n=this.layer.get(oE);if(null==e&&null!=n){const{width:i,height:r}=n,o=this.source.getParams(),a={HEIGHT:r,WIDTH:i,STYLE:o.STYLES||"",TIME:o.TIME,CQL_FILTER:o.CQL_FILTER};e=this.source.getLegendUrl(t,a)}return e}setLegendSize(t,e){const n=this.layer.get(oE);void 0===t&&void 0===e?this.layer.set(oE,null):n&&n.width===t&&n.height===e||this.layer.set(oE,{width:t,height:e})}clearLegend(){this.setLegendSize(),super.clearLegend()}setImageLoadFunction(t){if(null!=t){const e=(e,n)=>{t(n).then((t=>{const n=new FileReader;n.onload=()=>{e.getImage().src=n.result},n.readAsDataURL(t)}))};this.source.setImageLoadFunction(e)}}refresh(){this.source.updateParams({_cache:(new Date).getTime()})}getFeatureInfoUrl(t,e,n,i,r){return this.source.getFeatureInfoUrl(t,n,i,{info_format:r,feature_count:e})}}class sE{constructor(t){this.image=t}getImage(){return this.image}}class hE extends hS{constructor(t,e){super(t),this.control=e,this.listen(this.layer.on("propertychange",(({key:t})=>{t!==KC&&t!==ZC&&t!==oE||this.updateLegend()}))),this.listen(this.layer.on("change:visible",(()=>this.updateLegend()))),this.instance instanceof aE&&this.listen(this.source.on("change",(()=>this.updateLegend())))}getResolution(){return this.control.getMap().getView().getResolution()}hasLegend(){return this.instance.hasLegend(this.getResolution())}updateLegend(){let t=null;this.instance.isVisible()&&(t=this.instance.getLegendUrl(this.getResolution())),null!=t&&void 0===this.element?this.setupElement(t):null!=t&&void 0!==this.element&&this.updateUrl(t),t||void 0===this.element||this.removeElement()}updateUrl(t){this.timer&&(clearTimeout(this.timer),this.timer=null),this.label&&(this.label.innerText=this.instance.getName()||"");let e=null;e=this.source&&this.source.getImageLoadFunction()?this.source.getImageLoadFunction():(t,e)=>t.getImage().src=e,this.timer=setTimeout((()=>{this.imageWrapper&&e(this.imageWrapper,t)}),250)}setupElement(t){this.element=document.createElement("div"),this.element.className="entry",this.label=document.createElement("div"),this.label.className="header",this.label.innerText=this.instance.getName()||"",this.image=new Image,this.imageWrapper=new sE(this.image),this.element.appendChild(this.label),this.element.appendChild(this.image),this.control.element.appendChild(this.element),this.updateUrl(t)}removeElement(){this.element&&(this.control.element.removeChild(this.element),this.element=void 0,this.label=void 0,this.image=void 0)}remove(){this.removeElement(),super.remove()}}class lE extends lS{constructor(t){const e=t||{};super(e);const n=void 0!==e.className?e.className:"ol-legend";this.element.className=`${n} ol-unselectable ol-control`}createEntry(t){return new hE(t,this)}setMap(t){super.setMap(t),null!=t&&t.getView().on("change:resolution",(()=>this.refresh()))}refresh(){this.getLayers().forEach((t=>t.updateLegend()))}}function cE(t){return t}var uE=1e-6;function fE(t){return"translate("+t+",0)"}function pE(t){return"translate(0,"+t+")"}function dE(t){return e=>+t(e)}function gE(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function mE(){return!this.__axis}function yE(t,e){var n=[],i=null,r=null,o=6,a=6,s=3,h="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",u=1===t||3===t?fE:pE;function f(f){var p=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,d=null==r?e.tickFormat?e.tickFormat.apply(e,n):cE:r,g=Math.max(o,0)+s,m=e.range(),y=+m[0]+h,v=+m[m.length-1]+h,_=(e.bandwidth?gE:dE)(e.copy(),h),x=f.selection?f.selection():f,w=x.selectAll(".domain").data([null]),b=x.selectAll(".tick").data(p,e).order(),M=b.exit(),C=b.enter().append("g").attr("class","tick"),S=b.select("line"),E=b.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(C),S=S.merge(C.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),E=E.merge(C.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==x&&(w=w.transition(f),b=b.transition(f),S=S.transition(f),E=E.transition(f),M=M.transition(f).attr("opacity",uE).attr("transform",(function(t){return isFinite(t=_(t))?u(t+h):this.getAttribute("transform")})),C.attr("opacity",uE).attr("transform",(function(t){var e=this.parentNode.__axis;return u((e&&isFinite(e=e(t))?e:_(t))+h)}))),M.remove(),w.attr("d",4===t||2===t?a?"M"+l*a+","+y+"H"+h+"V"+v+"H"+l*a:"M"+h+","+y+"V"+v:a?"M"+y+","+l*a+"V"+h+"H"+v+"V"+l*a:"M"+y+","+h+"H"+v),b.attr("opacity",1).attr("transform",(function(t){return u(_(t)+h)})),S.attr(c+"2",l*o),E.attr(c,l*g).text(d),x.filter(mE).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each((function(){this.__axis=_}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),f):i&&i.slice()},f.tickFormat=function(t){return arguments.length?(r=t,f):r},f.tickSize=function(t){return arguments.length?(o=a=+t,f):o},f.tickSizeInner=function(t){return arguments.length?(o=+t,f):o},f.tickSizeOuter=function(t){return arguments.length?(a=+t,f):a},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(h=+t,f):h},f}function vE(){}function _E(t){return null==t?vE:function(){return this.querySelector(t)}}function xE(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function wE(){return[]}function bE(t){return function(e){return e.matches(t)}}var ME=Array.prototype.find;function CE(){return this.firstElementChild}var SE=Array.prototype.filter;function EE(){return Array.from(this.children)}function TE(t){return new Array(t.length)}function OE(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function PE(t){return function(){return t}}function kE(t,e,n,i,r,o){for(var a,s=0,h=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new OE(t,o[s]);for(;s<h;++s)(a=e[s])&&(r[s]=a)}function IE(t,e,n,i,r,o,a){var s,h,l,c=new Map,u=e.length,f=o.length,p=new Array(u);for(s=0;s<u;++s)(h=e[s])&&(p[s]=l=a.call(h,h.__data__,s,e)+"",c.has(l)?r[s]=h:c.set(l,h));for(s=0;s<f;++s)l=a.call(t,o[s],s,o)+"",(h=c.get(l))?(i[s]=h,h.__data__=o[s],c.delete(l)):n[s]=new OE(t,o[s]);for(s=0;s<u;++s)(h=e[s])&&c.get(p[s])===h&&(r[s]=h)}function AE(t){return t.__data__}function LE(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function RE(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}OE.prototype={constructor:OE,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var NE="http://www.w3.org/1999/xhtml";const DE={svg:"http://www.w3.org/2000/svg",xhtml:NE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function FE(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),DE.hasOwnProperty(e)?{space:DE[e],local:t}:t}function jE(t){return function(){this.removeAttribute(t)}}function zE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BE(t,e){return function(){this.setAttribute(t,e)}}function UE(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function GE(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function HE(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function WE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function VE(t){return function(){this.style.removeProperty(t)}}function qE(t,e,n){return function(){this.style.setProperty(t,e,n)}}function YE(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function XE(t,e){return t.style.getPropertyValue(e)||WE(t).getComputedStyle(t,null).getPropertyValue(e)}function KE(t){return function(){delete this[t]}}function ZE(t,e){return function(){this[t]=e}}function $E(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function QE(t){return t.trim().split(/^|\s+/)}function JE(t){return t.classList||new tT(t)}function tT(t){this._node=t,this._names=QE(t.getAttribute("class")||"")}function eT(t,e){for(var n=JE(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function nT(t,e){for(var n=JE(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function iT(t){return function(){eT(this,t)}}function rT(t){return function(){nT(this,t)}}function oT(t,e){return function(){(e.apply(this,arguments)?eT:nT)(this,t)}}function aT(){this.textContent=""}function sT(t){return function(){this.textContent=t}}function hT(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function lT(){this.innerHTML=""}function cT(t){return function(){this.innerHTML=t}}function uT(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function fT(){this.nextSibling&&this.parentNode.appendChild(this)}function pT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dT(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===NE&&e.documentElement.namespaceURI===NE?e.createElement(t):e.createElementNS(n,t)}}function gT(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mT(t){var e=FE(t);return(e.local?gT:dT)(e)}function yT(){return null}function vT(){var t=this.parentNode;t&&t.removeChild(this)}function _T(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xT(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wT(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function bT(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function MT(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function CT(t,e,n){var i=WE(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ST(t,e){return function(){return CT(this,t,e)}}function ET(t,e){return function(){return CT(this,t,e.apply(this,arguments))}}tT.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var TT=[null];function OT(t,e){this._groups=t,this._parents=e}function PT(t){return"string"==typeof t?new OT([[document.querySelector(t)]],[document.documentElement]):new OT([[t]],TT)}OT.prototype=function(){return new OT([[document.documentElement]],TT)}.prototype={constructor:OT,select:function(t){"function"!=typeof t&&(t=_E(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=e[r],h=s.length,l=i[r]=new Array(h),c=0;c<h;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new OT(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return xE(t.apply(this,arguments))}}(t):function(t){return null==t?wE:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,s=e[o],h=s.length,l=0;l<h;++l)(a=s[l])&&(i.push(t.call(a,a.__data__,l,s)),r.push(a));return new OT(i,r)},selectChild:function(t){return this.select(null==t?CE:function(t){return function(){return ME.call(this.children,t)}}("function"==typeof t?t:bE(t)))},selectChildren:function(t){return this.selectAll(null==t?EE:function(t){return function(){return SE.call(this.children,t)}}("function"==typeof t?t:bE(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,h=i[r]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&h.push(o);return new OT(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,AE);var n=e?IE:kE,i=this._parents,r=this._groups;"function"!=typeof t&&(t=PE(t));for(var o=r.length,a=new Array(o),s=new Array(o),h=new Array(o),l=0;l<o;++l){var c=i[l],u=r[l],f=u.length,p=LE(t.call(c,c&&c.__data__,l,i)),d=p.length,g=s[l]=new Array(d),m=a[l]=new Array(d),y=h[l]=new Array(f);n(c,u,g,m,y,p,e);for(var v,_,x=0,w=0;x<d;++x)if(v=g[x]){for(x>=w&&(w=x+1);!(_=m[w])&&++w<d;);v._next=_||null}}return(a=new OT(a,i))._enter=s,a._exit=h,a},enter:function(){return new OT(this._enter||this._groups.map(TE),this._parents)},exit:function(){return new OT(this._exit||this._groups.map(TE),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),h=0;h<a;++h)for(var l,c=n[h],u=i[h],f=c.length,p=s[h]=new Array(f),d=0;d<f;++d)(l=c[d]||u[d])&&(p[d]=l);for(;h<r;++h)s[h]=n[h];return new OT(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=RE);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],h=s.length,l=r[o]=new Array(h),c=0;c<h;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new OT(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=FE(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?zE:jE:"function"==typeof e?n.local?HE:GE:n.local?UE:BE)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?VE:"function"==typeof e?YE:qE)(t,e,null==n?"":n)):XE(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?KE:"function"==typeof e?$E:ZE)(t,e)):this.node()[t]},classed:function(t,e){var n=QE(t+"");if(arguments.length<2){for(var i=JE(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?oT:e?iT:rT)(n,e))},text:function(t){return arguments.length?this.each(null==t?aT:("function"==typeof t?hT:sT)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?lT:("function"==typeof t?uT:cT)(t)):this.node().innerHTML},raise:function(){return this.each(fT)},lower:function(){return this.each(pT)},append:function(t){var e="function"==typeof t?t:mT(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:mT(t),i=null==e?yT:"function"==typeof e?e:_E(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(vT)},clone:function(t){return this.select(t?xT:_T)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=wT(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?MT:bT,i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var h,l=0,c=s.length;l<c;++l)for(i=0,h=s[l];i<a;++i)if((r=o[i]).type===h.type&&r.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?ET:ST)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};var kT={value:()=>{}};function IT(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new AT(i)}function AT(t){this._=t}function LT(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function RT(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function NT(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=kT,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}AT.prototype=IT.prototype={constructor:AT,on:function(t,e){var n,i=this._,r=LT(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=NT(i[n],t.name,e);else if(null==e)for(n in i)i[n]=NT(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=RT(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new AT(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const DT=IT;function FT(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const jT={passive:!1},zT={capture:!0,passive:!1};function BT(t){t.stopImmediatePropagation()}function UT(t){t.preventDefault(),t.stopImmediatePropagation()}const GT=t=>()=>t;function HT(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:a,y:s,dx:h,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}function WT(t){return!t.ctrlKey&&!t.button}function VT(){return this.parentNode}function qT(t,e){return null==e?{x:t.x,y:t.y}:e}function YT(){return navigator.maxTouchPoints||"ontouchstart"in this}HT.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};const XT=function(t,e){PT(this).attr("class","sample-mouseover").attr("stroke-width",2).attr("y1",0).attr("y2",40)},KT=function(t,e){PT(this).attr("class",null).attr("stroke-width",1).attr("y1",0).attr("y2",20)};class ZT{constructor(t){const{width:e,height:n,getMap:i}=t;this.width=e,this.height=n,this.getMap=i;const r=("svg",PT(mT("svg").call(document.documentElement))).attr("width",e).attr("height",n);this.svg=r,this.samples=r.append("g").attr("transform","translate(0, 2)").attr("class","samples"),this.ticks=r.append("g").attr("transform","translate(0, 22)").attr("class","ticks"),this.dragger=this.initDragger()}initDragger(){const t=this,e=this.svg.append("g").attr("transform","translate(100, 0)").attr("class","dragger").call(function(){var t,e,n,i,r=WT,o=VT,a=qT,s=YT,h={},l=DT("start","drag","end"),c=0,u=0;function f(t){t.on("mousedown.drag",p).filter(s).on("touchstart.drag",m).on("touchmove.drag",y,jT).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!i&&r.call(this,a,s)){var h=_(this,o.call(this,a,s),a,s,"mouse");h&&(PT(a.view).on("mousemove.drag",d,zT).on("mouseup.drag",g,zT),function(t){var e=t.document.documentElement,n=PT(t).on("dragstart.drag",UT,zT);"onselectstart"in e?n.on("selectstart.drag",UT,zT):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(a.view),BT(a),n=!1,t=a.clientX,e=a.clientY,h("start",a))}}function d(i){if(UT(i),!n){var r=i.clientX-t,o=i.clientY-e;n=r*r+o*o>u}h.mouse("drag",i)}function g(t){PT(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,i=PT(t).on("dragstart.drag",null);e&&(i.on("click.drag",UT,zT),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),UT(t),h.mouse("end",t)}function m(t,e){if(r.call(this,t,e)){var n,i,a=t.changedTouches,s=o.call(this,t,e),h=a.length;for(n=0;n<h;++n)(i=_(this,s,t,e,a[n].identifier,a[n]))&&(BT(t),i("start",t,a[n]))}}function y(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=h[i[e].identifier])&&(UT(t),n("drag",t,i[e]))}function v(t){var e,n,r=t.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<o;++e)(n=h[r[e].identifier])&&(BT(t),n("end",t,r[e]))}function _(t,e,n,i,r,o){var s,u,p,d=l.copy(),g=FT(o||n,e);if(null!=(p=a.call(t,new HT("beforestart",{sourceEvent:n,target:f,identifier:r,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),i)))return s=p.x-g[0]||0,u=p.y-g[1]||0,function n(o,a,l){var m,y=g;switch(o){case"start":h[r]=n,m=c++;break;case"end":delete h[r],--c;case"drag":g=FT(l||a,e),m=c}d.call(o,t,new HT(o,{sourceEvent:a,subject:p,target:f,identifier:r,active:m,x:g[0]+s,y:g[1]+u,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:d}),i)}}return f.filter=function(t){return arguments.length?(r="function"==typeof t?t:GT(!!t),f):r},f.container=function(t){return arguments.length?(o="function"==typeof t?t:GT(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:GT(t),f):a},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:GT(!!t),f):s},f.on=function(){var t=l.on.apply(l,arguments);return t===l?f:t},f.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,f):Math.sqrt(u)},f}().on("start",(function(e,n){t.getMap().getView().beginInteraction()})).on("drag",(function(e,n){t.updateRelativePosition(e.x)})).on("end",(function(e,n){t.getMap().getView().endInteraction()})));return e.append("path").attr("d","M-5.5,-5.5v10l6,5.5l6,-5.5v-10z").attr("class","drag-handle").attr("fill","white").attr("stroke","#777").attr("focusable",!0).attr("transform","translate(0, 8) scale(1.05 1.25)"),e}updateRelativePosition(t){const e=this.getMap(),n=this.timeScale,i=this.values;let r=i(n.invert(t));if(this.displayType===aS&&r%1<.1?r=Math.round(r):this.displayType===aS&&(r=void 0),void 0!==r){const t=i.invert(r);e.set(oS,t)}}updateValues(t,e,n){this.displayType=t,this.values=e,this.timeScale=n,n&&(this.timeScale=n.copy()),this.updateTimeScale(),this.draw()}updateTimeScale(){this.timeScale&&(this.timeScale=this.timeScale.range([20,this.width-20]).clamp(!0))}updateSize(){const t=this.getMap().getSize();this.width=t[0]-60,this.svg.attr("width",this.width),this.updateTimeScale(),this.draw()}draw(){this.timeScale&&(this.drawSamples(),this.drawTicks(),this.updateDragger())}drawSamples(){const t=this.samples;t.selectAll("*").remove();const e=this.timeScale,n=this.getMap(),i=function(t,i){const r=PT(this).attr("x1"),o=e.invert(r);n.set(oS,o)};for(let n of this.values.domain()){const r=e(n),o=t.append("g").attr("class","sample");o.append("title").text(Oh(n)),Number.isNaN(r)&&console.log(r),o.append("line").attr("stroke","currentColor").attr("x1",r).attr("x2",r).attr("y1",0).attr("y2",20).on("mouseover",XT).on("mouseout",KT).on("click",i)}}drawTicks(){const t=this.ticks;t.selectAll("*").remove();const e=this.timeScale;var n;t.call((n=e,yE(3,n)).ticks())}updateMapTime(){this.updateDragger()}updateDragger(){const t=this.getMap();if(null!=this.getMap()&&null!=this.timeScale){const e=t.get(oS),n=this.timeScale(e);n&&this.dragger.attr("transform",`translate(${n}, 0)`)}}node(){return this.svg.node()}}function $T(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QT(t){let e=t,n=t,i=t;function r(t,e,r=0,o=t.length){if(r<o){if(0!==n(e,e))return o;do{const n=r+o>>>1;i(t[n],e)<0?r=n+1:o=n}while(r<o)}return r}return 2!==t.length&&(e=(e,n)=>t(e)-n,n=$T,i=(e,n)=>$T(t(e),n)),{left:r,center:function(t,n,i=0,o=t.length){const a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,r=0,o=t.length){if(r<o){if(0!==n(e,e))return o;do{const n=r+o>>>1;i(t[n],e)<=0?r=n+1:o=n}while(r<o)}return r}}}var JT=Math.sqrt(50),tO=Math.sqrt(10),eO=Math.sqrt(2);function nO(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=JT?r*=10:o>=tO?r*=5:o>=eO&&(r*=2),e<t?-r:r}const iO=1e3,rO=6e4,oO=36e5,aO=864e5,sO=6048e5,hO=31536e6;var lO=new Date,cO=new Date;function uO(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var a,s=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<i);return s},r.filter=function(n){return uO((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return lO.setTime(+e),cO.setTime(+i),t(lO),t(cO),Math.floor(n(lO,cO))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var fO=uO((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));fO.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?uO((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):fO:null};const pO=fO;fO.range;var dO=uO((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*iO)}),(function(t,e){return(e-t)/iO}),(function(t){return t.getUTCSeconds()}));const gO=dO;dO.range;var mO=uO((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*iO)}),(function(t,e){t.setTime(+t+e*rO)}),(function(t,e){return(e-t)/rO}),(function(t){return t.getMinutes()}));const yO=mO;mO.range;var vO=uO((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*iO-t.getMinutes()*rO)}),(function(t,e){t.setTime(+t+e*oO)}),(function(t,e){return(e-t)/oO}),(function(t){return t.getHours()}));const _O=vO;vO.range;var xO=uO((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*rO)/aO),(t=>t.getDate()-1));const wO=xO;function bO(t){return uO((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*rO)/sO}))}xO.range;var MO=bO(0),CO=bO(1),SO=bO(2),EO=bO(3),TO=bO(4),OO=bO(5),PO=bO(6),kO=(MO.range,CO.range,SO.range,EO.range,TO.range,OO.range,PO.range,uO((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));const IO=kO;kO.range;var AO=uO((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));AO.every=function(t){return isFinite(t=Math.floor(t))&&t>0?uO((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const LO=AO;AO.range;var RO=uO((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*rO)}),(function(t,e){return(e-t)/rO}),(function(t){return t.getUTCMinutes()}));const NO=RO;RO.range;var DO=uO((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*oO)}),(function(t,e){return(e-t)/oO}),(function(t){return t.getUTCHours()}));const FO=DO;DO.range;var jO=uO((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/aO}),(function(t){return t.getUTCDate()-1}));const zO=jO;function BO(t){return uO((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/sO}))}jO.range;var UO=BO(0),GO=BO(1),HO=BO(2),WO=BO(3),VO=BO(4),qO=BO(5),YO=BO(6),XO=(UO.range,GO.range,HO.range,WO.range,VO.range,qO.range,YO.range,uO((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})));const KO=XO;XO.range;var ZO=uO((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));ZO.every=function(t){return isFinite(t=Math.floor(t))&&t>0?uO((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const $O=ZO;function QO(t,e,n,i,r,o){const a=[[gO,1,iO],[gO,5,5e3],[gO,15,15e3],[gO,30,3e4],[o,1,rO],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,oO],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,aO],[i,2,1728e5],[n,1,sO],[e,1,2592e6],[e,3,7776e6],[t,1,hO]];function s(e,n,i){const r=Math.abs(n-e)/i,o=QT((([,,t])=>t)).right(a,r);if(o===a.length)return t.every(nO(e/hO,n/hO,i));if(0===o)return pO.every(Math.max(nO(e,n,i),1));const[s,h]=a[r/a[o-1][2]<a[o][2]/r?o-1:o];return s.every(h)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:s(t,e,n),o=r?r.range(t,+e+1):[];return i?o.reverse():o},s]}ZO.range;const[JO,tP]=QO($O,KO,UO,zO,FO,NO),[eP,nP]=QO(LO,IO,MO,wO,_O,yO);function iP(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function rP(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function oP(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var aP,sP,hP={"-":"",_:" ",0:"0"},lP=/^\s*\d+/,cP=/^%/,uP=/[\\^$*+?|[\]().{}]/g;function fP(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function pP(t){return t.replace(uP,"\\$&")}function dP(t){return new RegExp("^(?:"+t.map(pP).join("|")+")","i")}function gP(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function mP(t,e,n){var i=lP.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function yP(t,e,n){var i=lP.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function vP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function _P(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function xP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function wP(t,e,n){var i=lP.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function bP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function MP(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function CP(t,e,n){var i=lP.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function SP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function EP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function TP(t,e,n){var i=lP.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function OP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function PP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function kP(t,e,n){var i=lP.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function IP(t,e,n){var i=lP.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function AP(t,e,n){var i=lP.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function LP(t,e,n){var i=cP.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function RP(t,e,n){var i=lP.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function NP(t,e,n){var i=lP.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function DP(t,e){return fP(t.getDate(),e,2)}function FP(t,e){return fP(t.getHours(),e,2)}function jP(t,e){return fP(t.getHours()%12||12,e,2)}function zP(t,e){return fP(1+wO.count(LO(t),t),e,3)}function BP(t,e){return fP(t.getMilliseconds(),e,3)}function UP(t,e){return BP(t,e)+"000"}function GP(t,e){return fP(t.getMonth()+1,e,2)}function HP(t,e){return fP(t.getMinutes(),e,2)}function WP(t,e){return fP(t.getSeconds(),e,2)}function VP(t){var e=t.getDay();return 0===e?7:e}function qP(t,e){return fP(MO.count(LO(t)-1,t),e,2)}function YP(t){var e=t.getDay();return e>=4||0===e?TO(t):TO.ceil(t)}function XP(t,e){return t=YP(t),fP(TO.count(LO(t),t)+(4===LO(t).getDay()),e,2)}function KP(t){return t.getDay()}function ZP(t,e){return fP(CO.count(LO(t)-1,t),e,2)}function $P(t,e){return fP(t.getFullYear()%100,e,2)}function QP(t,e){return fP((t=YP(t)).getFullYear()%100,e,2)}function JP(t,e){return fP(t.getFullYear()%1e4,e,4)}function tk(t,e){var n=t.getDay();return fP((t=n>=4||0===n?TO(t):TO.ceil(t)).getFullYear()%1e4,e,4)}function ek(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fP(e/60|0,"0",2)+fP(e%60,"0",2)}function nk(t,e){return fP(t.getUTCDate(),e,2)}function ik(t,e){return fP(t.getUTCHours(),e,2)}function rk(t,e){return fP(t.getUTCHours()%12||12,e,2)}function ok(t,e){return fP(1+zO.count($O(t),t),e,3)}function ak(t,e){return fP(t.getUTCMilliseconds(),e,3)}function sk(t,e){return ak(t,e)+"000"}function hk(t,e){return fP(t.getUTCMonth()+1,e,2)}function lk(t,e){return fP(t.getUTCMinutes(),e,2)}function ck(t,e){return fP(t.getUTCSeconds(),e,2)}function uk(t){var e=t.getUTCDay();return 0===e?7:e}function fk(t,e){return fP(UO.count($O(t)-1,t),e,2)}function pk(t){var e=t.getUTCDay();return e>=4||0===e?VO(t):VO.ceil(t)}function dk(t,e){return t=pk(t),fP(VO.count($O(t),t)+(4===$O(t).getUTCDay()),e,2)}function gk(t){return t.getUTCDay()}function mk(t,e){return fP(GO.count($O(t)-1,t),e,2)}function yk(t,e){return fP(t.getUTCFullYear()%100,e,2)}function vk(t,e){return fP((t=pk(t)).getUTCFullYear()%100,e,2)}function _k(t,e){return fP(t.getUTCFullYear()%1e4,e,4)}function xk(t,e){var n=t.getUTCDay();return fP((t=n>=4||0===n?VO(t):VO.ceil(t)).getUTCFullYear()%1e4,e,4)}function wk(){return"+0000"}function bk(){return"%"}function Mk(t){return+t}function Ck(t){return Math.floor(+t/1e3)}aP=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,h=t.shortMonths,l=dP(r),c=gP(r),u=dP(o),f=gP(o),p=dP(a),d=gP(a),g=dP(s),m=gP(s),y=dP(h),v=gP(h),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:DP,e:DP,f:UP,g:QP,G:tk,H:FP,I:jP,j:zP,L:BP,m:GP,M:HP,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Mk,s:Ck,S:WP,u:VP,U:qP,V:XP,w:KP,W:ZP,x:null,X:null,y:$P,Y:JP,Z:ek,"%":bk},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:nk,e:nk,f:sk,g:vk,G:xk,H:ik,I:rk,j:ok,L:ak,m:hk,M:lk,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Mk,s:Ck,S:ck,u:uk,U:fk,V:dk,w:gk,W:mk,x:null,X:null,y:yk,Y:_k,Z:wk,"%":bk},w={a:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return C(t,e,n,i)},d:EP,e:EP,f:AP,g:bP,G:wP,H:OP,I:OP,j:TP,L:IP,m:SP,M:PP,p:function(t,e,n){var i=l.exec(e.slice(n));return i?(t.p=c.get(i[0].toLowerCase()),n+i[0].length):-1},q:CP,Q:RP,s:NP,S:kP,u:yP,U:vP,V:_P,w:mP,W:xP,x:function(t,e,i){return C(t,n,e,i)},X:function(t,e,n){return C(t,i,e,n)},y:bP,Y:wP,Z:MP,"%":LP};function b(t,e){return function(n){var i,r,o,a=[],s=-1,h=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(h,s)),null!=(r=hP[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),a.push(i),h=s+1);return a.push(t.slice(h,s)),a.join("")}}function M(t,e){return function(n){var i,r,o=oP(1900,void 0,1);if(C(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=rP(oP(o.y,0,1))).getUTCDay(),i=r>4||0===r?GO.ceil(i):GO(i),i=zO.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=iP(oP(o.y,0,1))).getDay(),i=r>4||0===r?CO.ceil(i):CO(i),i=wO.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?rP(oP(o.y,0,1)).getUTCDay():iP(oP(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,rP(o)):iP(o)}}function C(t,e,n,i){for(var r,o,a=0,s=e.length,h=n.length;a<s;){if(i>=h)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(o=w[r in hP?e.charAt(a++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return _.x=b(n,_),_.X=b(i,_),_.c=b(e,_),x.x=b(n,x),x.X=b(i,x),x.c=b(e,x),{format:function(t){var e=b(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=b(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),sP=aP.format,aP.parse,aP.utcFormat,aP.utcParse;const Sk=QT($T),Ek=Sk.right,Tk=(Sk.left,QT((function(t){return null===t?NaN:+t})).center,Ek);function Ok(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Pk(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function kk(){}var Ik=.7,Ak=1/Ik,Lk="\\s*([+-]?\\d+)\\s*",Rk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dk=/^#([0-9a-f]{3,8})$/,Fk=new RegExp("^rgb\\("+[Lk,Lk,Lk]+"\\)$"),jk=new RegExp("^rgb\\("+[Nk,Nk,Nk]+"\\)$"),zk=new RegExp("^rgba\\("+[Lk,Lk,Lk,Rk]+"\\)$"),Bk=new RegExp("^rgba\\("+[Nk,Nk,Nk,Rk]+"\\)$"),Uk=new RegExp("^hsl\\("+[Rk,Nk,Nk]+"\\)$"),Gk=new RegExp("^hsla\\("+[Rk,Nk,Nk,Rk]+"\\)$"),Hk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wk(){return this.rgb().formatHex()}function Vk(){return this.rgb().formatRgb()}function qk(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Dk.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yk(e):3===n?new $k(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Xk(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Xk(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Fk.exec(t))?new $k(e[1],e[2],e[3],1):(e=jk.exec(t))?new $k(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=zk.exec(t))?Xk(e[1],e[2],e[3],e[4]):(e=Bk.exec(t))?Xk(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Uk.exec(t))?eI(e[1],e[2]/100,e[3]/100,1):(e=Gk.exec(t))?eI(e[1],e[2]/100,e[3]/100,e[4]):Hk.hasOwnProperty(t)?Yk(Hk[t]):"transparent"===t?new $k(NaN,NaN,NaN,0):null}function Yk(t){return new $k(t>>16&255,t>>8&255,255&t,1)}function Xk(t,e,n,i){return i<=0&&(t=e=n=NaN),new $k(t,e,n,i)}function Kk(t){return t instanceof kk||(t=qk(t)),t?new $k((t=t.rgb()).r,t.g,t.b,t.opacity):new $k}function Zk(t,e,n,i){return 1===arguments.length?Kk(t):new $k(t,e,n,null==i?1:i)}function $k(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Qk(){return"#"+tI(this.r)+tI(this.g)+tI(this.b)}function Jk(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function tI(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function eI(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new iI(t,e,n,i)}function nI(t){if(t instanceof iI)return new iI(t.h,t.s,t.l,t.opacity);if(t instanceof kk||(t=qk(t)),!t)return new iI;if(t instanceof iI)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,h=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=h<.5?o+r:2-o-r,a*=60):s=h>0&&h<1?0:a,new iI(a,s,h,t.opacity)}function iI(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function rI(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function oI(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}Ok(kk,qk,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Wk,formatHex:Wk,formatHsl:function(){return nI(this).formatHsl()},formatRgb:Vk,toString:Vk}),Ok($k,Zk,Pk(kk,{brighter:function(t){return t=null==t?Ak:Math.pow(Ak,t),new $k(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Ik:Math.pow(Ik,t),new $k(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qk,formatHex:Qk,formatRgb:Jk,toString:Jk})),Ok(iI,(function(t,e,n,i){return 1===arguments.length?nI(t):new iI(t,e,n,null==i?1:i)}),Pk(kk,{brighter:function(t){return t=null==t?Ak:Math.pow(Ak,t),new iI(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Ik:Math.pow(Ik,t),new iI(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new $k(rI(t>=240?t-240:t+120,r,i),rI(t,r,i),rI(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const aI=t=>()=>t;function sI(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):aI(isNaN(t)?e:t)}const hI=function t(e){var n=function(t){return 1==(t=+t)?sI:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):aI(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=Zk(t)).r,(e=Zk(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=sI(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function lI(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Zk(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}function cI(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=vI(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}function uI(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function fI(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pI(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=vI(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}lI((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return oI((n-i/e)*e,a,r,o,s)}})),lI((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return oI((n-i/e)*e,r,o,a,s)}}));var dI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gI=new RegExp(dI.source,"g");function mI(t,e){var n,i,r,o=dI.lastIndex=gI.lastIndex=0,a=-1,s=[],h=[];for(t+="",e+="";(n=dI.exec(t))&&(i=gI.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,h.push({i:a,x:fI(n,i)})),o=gI.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)s[(n=h[i]).i]=n.x(t);return s.join("")})}function yI(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function vI(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?aI(e):("number"===r?fI:"string"===r?(n=qk(e))?(e=n,hI):mI:e instanceof qk?hI:e instanceof Date?uI:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?cI:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?pI:fI:yI))(t,e)}function _I(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function xI(t){return+t}var wI=[0,1];function bI(t){return t}function MI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function CI(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=MI(r,i),o=n(a,o)):(i=MI(i,r),o=n(o,a)),function(t){return o(i(t))}}function SI(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=MI(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Tk(t,e,1,i)-1;return o[n](r[n](e))}}function EI(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function TI(t){return new Date(t)}function OI(t){return t instanceof Date?+t:+new Date(+t)}function PI(t,e,n,i,r,o,a,s,h,l){var c=function(){var t,e,n,i,r,o,a=wI,s=wI,h=vI,l=bI;function c(){var t,e,n,h=Math.min(a.length,s.length);return l!==bI&&(t=a[0],e=a[h-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),i=h>2?SI:CI,r=o=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),s,h)))(t(l(e)))}return u.invert=function(n){return l(e((o||(o=i(s,a.map(t),fI)))(n)))},u.domain=function(t){return arguments.length?(a=Array.from(t,xI),c()):a.slice()},u.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},u.rangeRound=function(t){return s=Array.from(t),h=_I,c()},u.clamp=function(t){return arguments.length?(l=!!t||bI,c()):l!==bI},u.interpolate=function(t){return arguments.length?(h=t,c()):h},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,c()}}()(bI,bI),u=c.invert,f=c.domain,p=l(".%L"),d=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),x=l("%Y");function w(t){return(h(t)<t?p:s(t)<t?d:a(t)<t?g:o(t)<t?m:i(t)<t?r(t)<t?y:v:n(t)<t?_:x)(t)}return c.invert=function(t){return new Date(u(t))},c.domain=function(t){return arguments.length?f(Array.from(t,OI)):f().map(TI)},c.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?w:l(e)},c.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(function(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}(n,t)):c},c.copy=function(){return u=c,PI(t,e,n,i,r,o,a,s,h,l).domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown());var u},c}function kI(){return EI.apply(PI(eP,nP,LO,IO,MO,wO,_O,yO,gO,sP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}class II extends hS{constructor(t,e){super(t),this.control=e,this.listen(this.layer.on("propertychange",(({key:t})=>{t===rS&&this.updateEntry()}))),this.listen(this.layer.on("change:visible",(()=>this.updateEntry())))}getRange(){if(this.layer.getVisible())return this.layer.get(rS)}updateEntry(){this.control.refreshRange()}remove(){super.remove()}updateTime(t){this.instance instanceof aE&&this.instance.updateTime(t)}}class AI extends lS{constructor(t){const e=t||{};super({element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.duration_=void 0!==e.duration?e.duration:200,this.map_width=0;const n=void 0!==e.className?e.className:"ol-timeslider",i=(t,e)=>{const i=document.createElement("button");i.setAttribute("type","button"),i.className=`${n}-${t} ol-unselectable`;const r=lw(e).node[0];return i.appendChild(r),i.style.visibility="hidden",i},r=i("previous",cw),o=i("next",uw);r.addEventListener(sp,this.handlePreviousClick.bind(this),!1),o.addEventListener(sp,this.handleNextClick.bind(this),!1),this.previousElement=r,this.nextElement=o;const a=document.createElement("div");a.className=`${n}-inner`;const s=this.element;s.className=`${n} ol-unselectable ol-control`,s.appendChild(r),s.appendChild(a),s.appendChild(o),this.widget=new ZT({width:100,height:40,getMap:()=>this.getMap()}),a.append(this.widget.node()),this.values=void 0,this.element.style.display="none"}createEntry(t){return new II(t,this)}acceptLayer(t){return t instanceof aE}setMap(t){super.setMap(t),t&&t.on("propertychange",(({key:t})=>{t===oS&&(this.widget.updateMapTime(),this.updateTime())}))}updateValues(t,e){if(this.displayType=t,this.values=void 0,this.timeScale=void 0,e&&e.length>1){const t=[];for(let n=0;n<e.length;n++)t.push(n);this.values=kI().domain(e).range(t).clamp(!0),this.timeScale=kI().domain([e[0],e.at(-1)]).range([0,1]),this.checkMapTime()}this.widget.updateValues(t,this.values,this.timeScale)}checkMapTime(){const t=this.getMap().get(oS)||new Date;let e=this.values(t);this.displayType===aS&&(e=Math.round(e));const n=this.values.invert(e);this.getMap().set(oS,n)}updateTime(){const t=this.getMap().get(oS);let e;t&&(e=function(t,e){jo(1,arguments);var n=zo(t);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");var i=null!=e&&e.format?String(e.format):"extended",r=null!=e&&e.representation?String(e.representation):"complete";if("extended"!==i&&"basic"!==i)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==r&&"time"!==r&&"complete"!==r)throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",a="",s="extended"===i?"-":"",h="extended"===i?":":"";if("time"!==r){var l=lh(n.getDate(),2),c=lh(n.getMonth()+1,2),u=lh(n.getFullYear(),4);o="".concat(u).concat(s).concat(c).concat(s).concat(l)}if("date"!==r){var f=n.getTimezoneOffset();if(0!==f){var p=Math.abs(f),d=lh(Math.floor(p/60),2),g=lh(p%60,2);a="".concat(f<0?"+":"-").concat(d,":").concat(g)}else a="Z";var m=""===o?"":"T",y=[lh(n.getHours(),2),lh(n.getMinutes(),2),lh(n.getSeconds(),2)].join(h);o="".concat(o).concat(m).concat(y).concat(a)}return o}(t)),this.getLayers().forEach((t=>t.updateTime(e)))}refresh(){this.refreshRange()}refreshRange(){let t,e=this.getLayers().map((t=>t.getRange())).filter((t=>!!t)),n=this.getMap().get(oS),i="LINEAR";if(e.length>0){const n=new Set;e.forEach((t=>t.values.forEach((t=>n.add(t))))),t=[...n.values()].sort(Bo),e.every((t=>t instanceof rE))&&(i=aS)}else n=void 0;this.getMap().set(oS,n),this.updateValues(i,t),this.element.style.display=void 0===this.values?"none":""}handlePreviousClick(){this.handleRelativePosition(-1)}handleNextClick(){this.handleRelativePosition(1)}handleRelativePosition(t){const e=this.getMap().get(oS);if(e&&this.values){const n=this.values(e)+t,i=this.values.invert(n);this.getMap().set(oS,i)}}render(t){if(t.frameState&&this.values){const{map:e}=t,n=e.getSize();this.map_width!==n[0]&&(this.widget.updateSize(),this.map_width=n[0]),this.updateButtons(),this.widget.updateMapTime()}}updateButtons(){if(this.getMap()&&this.timeScale&&this.displayType===aS){const t=this.getMap().get(oS),e=this.timeScale(t);this.nextElement.style.visibility=e<1?"":"hidden",this.previousElement.style.visibility=e>0?"":"hidden"}else this.nextElement.style.visibility="hidden",this.previousElement.style.visibility="hidden"}}class LI extends hS{constructor(t,e){super(t),this.control=e,this.timerId=null,this.loading=!1,this.instance instanceof aE&&(this.listen(this.source.on("imageloadstart",(t=>{clearTimeout(this.timerId),this.timerId=setTimeout((()=>this.updateLoadingState(!0)),1500)}))),this.listen(this.source.on("imageloadend",(()=>{this.updateLoadingState(!1)}))))}isLoading(){return this.loading}updateLoadingState(t){t||clearTimeout(this.timerId),this.loading=t,this.control.refreshControl()}remove(){super.remove()}}class RI extends lS{constructor(t){const e=t||{};super(e);const n=void 0!==e.className?e.className:"ol-loading-indicator",i=this.element;i.className=`${n} ol-unselectable ol-control`;const r=document.createElement("span");r.className=`${n}-inner`,this.inner=r;const o=lw(fw,{classes:["fa-spin"]}).node[0];i.appendChild(o),i.appendChild(r)}createEntry(t){return new LI(t,this)}refresh(){this.refreshControl()}refreshControl(){const t=this.getLayers().filter((t=>t.isLoading()));let e="";t.length>1?e=`Loading ${t.length} layers`:1===t.length&&(e=`Loading ${t[0].instance.getName()}`),e&&(this.inner.innerHTML=e),this.element.style.display=e?"":"none"}}var NI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),DI="units",FI="degrees",jI="metric",zI=[1,2,5],BI=25.4/.28,UI=function(t){function e(e){var n=this,i=e||{},r=void 0!==i.className?i.className:i.bar?"ol-scale-bar":"ol-scale-line";return(n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).on,n.once,n.un,n.innerElement_=document.createElement("div"),n.innerElement_.className=r+"-inner",n.element.className=r+" ol-unselectable",n.element.appendChild(n.innerElement_),n.viewState_=null,n.minWidth_=void 0!==i.minWidth?i.minWidth:64,n.renderedVisible_=!1,n.renderedWidth_=void 0,n.renderedHTML_="",n.addChangeListener(DI,n.handleUnitsChanged_),n.setUnits(i.units||jI),n.scaleBar_=i.bar||!1,n.scaleBarSteps_=i.steps||4,n.scaleBarText_=i.text||!1,n.dpi_=i.dpi||void 0,n}return NI(e,t),e.prototype.getUnits=function(){return this.get(DI)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(DI,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,n=t.projection,i=this.getUnits(),r=i==FI?Rp.DEGREES:Rp.METERS,o=mg(n,t.resolution,e,r),a=this.minWidth_*(this.dpi_||BI)/BI,s=a*o,h="";if(i==FI){var l=Lp[Rp.DEGREES];(s*=l)<l/60?(h="″",o*=3600):s<l?(h="′",o*=60):h="°"}else"imperial"==i?s<.9144?(h="in",o/=.0254):s<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):"nautical"==i?(o/=1852,h="nm"):i==jI?s<.001?(h="μm",o*=1e6):s<1?(h="mm",o*=1e3):s<1e3?h="m":(h="km",o/=1e3):"us"==i?s<.9144?(h="in",o*=39.37):s<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):Op(!1,33);for(var c,u,f,p,d=3*Math.floor(Math.log(a*o)/Math.log(10));;){f=Math.floor(d/3);var g=Math.pow(10,f);if(c=zI[(d%3+3)%3]*g,u=Math.round(c/o),isNaN(u))return this.element.style.display="none",void(this.renderedVisible_=!1);if(u>=a)break;++d}p=this.scaleBar_?this.createScaleBar(u,c,h):c.toFixed(f<0?-f:0)+" "+h,this.renderedHTML_!=p&&(this.innerElement_.innerHTML=p,this.renderedHTML_=p),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,n){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),r=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&r.push(this.createMarker("absolute",s)),r.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,n):"")+"</div>"),s===this.scaleBarSteps_-1&&r.push(this.createStepText(s+1,t,!0,e,n)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+i+"</div>":"")+r.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,n,i,r){var o=(0===t?0:Math.round(i/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+r);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(n?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=mg(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,Rp.METERS),e=this.dpi_||BI;return parseFloat(t.toString())*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},e}(NM);const GI=UI;var HI=6378137,WI=.0066943799901413165,VI=484813681109536e-20,qI=Math.PI/2,YI=1e-10,XI=.017453292519943295,KI=57.29577951308232,ZI=Math.PI/4,$I=2*Math.PI,QI=3.14159265359,JI={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const tA={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var eA=/[\s_\-\/\(\)]/g;function nA(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(eA,""),o=-1;++o<i.length;)if((n=i[o]).toLowerCase().replace(eA,"")===r)return t[n]}function iA(t){var e,n,i,r={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*XI},lat_1:function(t){r.lat1=t*XI},lat_2:function(t){r.lat2=t*XI},lat_ts:function(t){r.lat_ts=t*XI},lon_0:function(t){r.long0=t*XI},lon_1:function(t){r.long1=t*XI},lon_2:function(t){r.long2=t*XI},alpha:function(t){r.alpha=parseFloat(t)*XI},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*XI},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=nA(tA,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*XI},pm:function(t){var e=nA(JI,t);r.from_greenwich=(e||parseFloat(t))*XI},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in o)n=o[e],e in a?"function"==typeof(i=a[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var rA=/\s/,oA=/[A-Za-z]/,aA=/[A-Za-z84_]/,sA=/[,\]]/,hA=/[\d\.E\-\+]/;function lA(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function cA(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return uA(e,t),t}),i);e&&(t[e]=r)}function uA(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void uA(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&uA(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&uA(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void cA(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return uA(t,e[n]);return cA(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function fA(t){return.017453292519943295*t}function pA(t){var e=new lA(t).output(),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return uA(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var r=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",fA],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",fA],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",fA],["lat0","latitude_of_origin",fA],["lat0","standard_parallel_1",fA],["lat1","standard_parallel_1",fA],["lat2","standard_parallel_2",fA],["azimuth","Azimuth"],["alpha","azimuth",fA],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=fA(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function dA(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?dA[t]=iA(arguments[1]):dA[t]=pA(arguments[1]):dA[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?dA.apply(e,t):dA(t)}));if("string"==typeof t){if(t in dA)return dA[t]}else"EPSG"in t?dA["EPSG:"+t.EPSG]=t:"ESRI"in t?dA["ESRI:"+t.ESRI]=t:"IAU2000"in t?dA["IAU2000:"+t.IAU2000]=t:console.log(t);return}}lA.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;rA.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},lA.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(sA.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},lA.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},lA.prototype.number=function(t){if(!hA.test(t)){if(sA.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},lA.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},lA.prototype.keyword=function(t){if(aA.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!sA.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},lA.prototype.neutral=function(t){if(oA.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(hA.test(t))return this.word=t,void(this.state=3);if(!sA.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},lA.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(dA);const gA=dA;var mA=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],yA=["3857","900913","3785","102113"];function vA(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}function _A(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function xA(t){return t<0?-1:1}function wA(t){return Math.abs(t)<=QI?t:t-xA(t)*$I}function bA(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(qI-e))/i}function MA(t,e){for(var n,i,r=.5*t,o=qI-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=i=qI-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o,Math.abs(i)<=1e-10)return o;return-9999}function CA(t){return t}var SA=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=_A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*KI>90&&r*KI<-90&&i*KI>180&&i*KI<-180)return null;if(Math.abs(Math.abs(r)-qI)<=YI)return null;if(this.sphere)e=this.x0+this.a*this.k0*wA(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ZI+.5*r));else{var o=Math.sin(r),a=bA(this.e,r,o);e=this.x0+this.a*this.k0*wA(i-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=qI-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(n=MA(this.e,o)))return null}return e=wA(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:CA,inverse:CA,names:["longlat","identity"]}],EA={},TA=[];function OA(t,e){var n=TA.length;return t.names?(TA[n]=t,t.names.forEach((function(t){EA[t.toLowerCase()]=n})),this):(console.log(e),!0)}const PA={start:function(){SA.forEach(OA)},add:OA,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==EA[e]&&TA[EA[e]]?TA[EA[e]]:void 0}};var kA={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},IA=kA.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};kA.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var AA={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var LA={};function RA(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:LA[t]||null,isNull:!1}}function NA(t){return t/3600*Math.PI/180}function DA(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function FA(t){return t.map((function(t){return[NA(t.longitudeShift),NA(t.latitudeShift)]}))}function jA(t,e,n){return{name:DA(t,e+8,e+16).trim(),parent:DA(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function zA(t,e,n,i){for(var r=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(r+16*a,i),longitudeShift:t.getFloat32(r+16*a+4,i),latitudeAccuracy:t.getFloat32(r+16*a+8,i),longitudeAccuracy:t.getFloat32(r+16*a+12,i)};o.push(s)}return o}function BA(t,e){if(!(this instanceof BA))return new BA(t);e=e||function(t){if(t)throw t};var n,i,r,o,a,s,h,l=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in gA}(t))return gA[t];if(function(t){return mA.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=pA(t);if(function(t){var e=nA(t,"authority");if(e){var n=nA(e,"epsg");return n&&yA.indexOf(n)>-1}}(e))return gA["EPSG:3857"];var n=function(t){var e=nA(t,"extension");if(e)return nA(e,"proj4")}(e);return n?iA(n):e}return function(t){return"+"===t[0]}(t)?iA(t):void 0}(t);if("object"==typeof l){var c=BA.projections.get(l.projName);if(c){if(l.datumCode&&"none"!==l.datumCode){var u=nA(AA,l.datumCode);u&&(l.datum_params=l.datum_params||(u.towgs84?u.towgs84.split(","):null),l.ellps=u.ellipse,l.datumName=u.datumName?u.datumName:l.datumCode)}l.k0=l.k0||1,l.axis=l.axis||"enu",l.ellps=l.ellps||"wgs84",l.lat1=l.lat1||l.lat0;var f=function(t,e,n,i,r){if(!t){var o=nA(kA,i);o||(o=IA),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<YI)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(l.a,l.b,l.rf,l.ellps,l.sphere),p=(n=f.a,i=f.b,f.rf,r=l.R_A,s=((o=n*n)-(a=i*i))/o,h=0,r?(o=(n*=1-s*(.16666666666666666+s*(.04722222222222222+.022156084656084655*s)))*n,s=0):h=Math.sqrt(s),{es:s,e:h,ep2:(o-a)/a}),d=function(t){return void 0===t?null:t.split(",").map(RA)}(l.nadgrids),g=l.datum||function(t,e,n,i,r,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=VI,s.datum_params[4]*=VI,s.datum_params[5]*=VI,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=3,s.grids=a),s.a=n,s.b=i,s.es=r,s.ep2=o,s}(l.datumCode,l.datum_params,f.a,f.b,p.es,p.ep2,d);vA(this,l),vA(this,c),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=g,this.init(),e(null,this)}else e(t)}else e(t)}BA.projections=PA,BA.projections.start();const UA=BA;function GA(t,e,n){var i,r,o,a,s=t.x,h=t.y,l=t.z?t.z:0;if(h<-qI&&h>-1.001*qI)h=-qI;else if(h>qI&&h<1.001*qI)h=qI;else{if(h<-qI)return{x:-1/0,y:-1/0,z:t.z};if(h>qI)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),r=Math.sin(h),a=Math.cos(h),o=r*r,{x:((i=n/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(i+l)*a*Math.sin(s),z:(i*(1-e)+l)*r}}function HA(t,e,n,i){var r,o,a,s,h,l,c,u,f,p,d,g,m,y,v,_=t.x,x=t.y,w=t.z?t.z:0;if(r=Math.sqrt(_*_+x*x),o=Math.sqrt(_*_+x*x+w*w),r/n<1e-12){if(y=0,o/n<1e-12)return v=-i,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(x,_);a=w/o,u=(s=r/o)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*h,m=0;do{m++,l=e*(c=n/Math.sqrt(1-e*f*f))/(c+(v=r*u+w*f-c*(1-e*f*f))),g=(d=a*(h=1/Math.sqrt(1-l*(2-l)*s*s)))*u-(p=s*(1-l)*h)*f,u=p,f=d}while(g*g>1e-24&&m<30);return{x:y,y:Math.atan(d/Math.abs(p)),z:v}}function WA(t){return 1===t||2===t}function VA(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){r=i;break}if(s.mandatory,null!==s.grid){var h=s.grid.subgrids[0],l=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,c=h.ll[0]-l,u=h.ll[1]-l,f=h.ll[0]+(h.lim[0]-1)*h.del[0]+l,p=h.ll[1]+(h.lim[1]-1)*h.del[1]+l;if(!(u>i.y||c>i.x||p<i.y||f<i.x||(r=qA(i,e,h),isNaN(r.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*KI+" "+i.y*KI+" tried: '"+o+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function qA(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=wA(r.x-Math.PI)+Math.PI;var o=YA(r,n);if(e){if(isNaN(o.x))return i;o.x=r.x-o.x,o.y=r.y-o.y;var a,s,h=9;do{if(s=YA(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:r.x-(s.x+o.x),y:r.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(h--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=wA(o.x+n.ll[0]),i.y=o.y+n.ll[1]}else isNaN(o.x)||(i.x=t.x+o.x,i.y=t.y+o.y);return i}function YA(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(i.x),o=Math.floor(i.y),a=i.x-1*r,s=i.y-1*o,h={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return h;if(o<0||o>=e.lim[1])return h;n=o*e.lim[0]+r;var l=e.cvs[n][0],c=e.cvs[n][1];n++;var u=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],m=e.cvs[n][1],y=a*s,v=a*(1-s),_=(1-a)*(1-s),x=(1-a)*s;return h.x=_*l+v*u+x*g+y*p,h.y=_*c+v*f+x*m+y*d,h}function XA(t,e,n){var i,r,o,a=n.x,s=n.y,h=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=a,r=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(i=s,r=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(i=h,r="z"),t.axis[o]){case"e":case"n":l[r]=i;break;case"w":case"s":l[r]=-i;break;case"u":void 0!==n[r]&&(l.z=i);break;case"d":void 0!==n[r]&&(l.z=-i);break;default:return null}return l}function KA(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function ZA(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function $A(t,e,n,i){var r;if(Array.isArray(n)&&(n=KA(n)),function(t){ZA(t.x),ZA(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=$A(t,r=new UA("WGS84"),n,i),t=r),i&&"enu"!==t.axis&&(n=XA(t,!1,n)),"longlat"===t.projName)n={x:n.x*XI,y:n.y*XI,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var i=t.a,r=t.es;if(3===t.datum_type){if(0!==VA(t,!1,n))return;i=HI,r=WI}var o=e.a,a=e.b,s=e.es;return 3===e.datum_type&&(o=HI,a=6356752.314,s=WI),r!==s||i!==o||WA(t.datum_type)||WA(e.datum_type)?(n=GA(n,r,i),WA(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],h=n[5],l=n[6];return{x:l*(t.x-h*t.y+s*t.z)+i,y:l*(h*t.x+t.y-a*t.z)+r,z:l*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),WA(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],h=n[5],l=n[6],c=(t.x-i)/l,u=(t.y-r)/l,f=(t.z-o)/l;return{x:c+h*u-s*f,y:-h*c+u+a*f,z:s*c-a*u+f}}}(n,e.datum_type,e.datum_params)),n=HA(n,s,o,a),3!==e.datum_type||0===VA(e,!0,n)?n:void 0):n}(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*KI,y:n.y*KI,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&"enu"!==e.axis?XA(e,!0,n):n}var QA=UA("WGS84");function JA(t,e,n,i){var r,o,a;return Array.isArray(n)?(r=$A(t,e,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(o=$A(t,e,n,i),2===(a=Object.keys(n)).length||a.forEach((function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;o[i]=n[i]})),o)}function tL(t){return t instanceof UA?t:t.oProj?t.oProj:UA(t)}const eL=function(t,e,n){t=tL(t);var i,r=!1;return void 0===e?(e=t,t=QA,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=QA,r=!0),e=tL(e),n?JA(t,e,n):(i={forward:function(n,i){return JA(t,e,n,i)},inverse:function(n,i){return JA(e,t,n,i)}},r&&(i.oProj=e),i)};var nL="AJSAJS",iL="AFAFAF",rL=65,oL=73,aL=79;const sL={forward:hL,inverse:function(t){var e=fL(dL(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:lL};function hL(t,e){return e=e||5,function(t,e){var n,i,r,o,a,s,h,l,c,u,f,p,d,g="00000"+t.easting,m="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,u=t.northing,f=pL(t.zoneNumber),p=Math.floor(c/1e5),d=Math.floor(u/1e5)%20,n=p,i=d,o=nL.charCodeAt(r=f-1),a=iL.charCodeAt(r),l=!1,(s=o+n-1)>90&&(s=s-90+rL-1,l=!0),(s===oL||o<oL&&s>oL||(s>oL||o<oL)&&l)&&s++,(s===aL||o<aL&&s>aL||(s>aL||o<aL)&&l)&&++s===oL&&s++,s>90&&(s=s-90+rL-1),(h=a+i)>86?(h=h-86+rL-1,l=!0):l=!1,(h===oL||a<oL&&h>oL||(h>oL||a<oL)&&l)&&h++,(h===aL||a<aL&&h>aL||(h>aL||a<aL)&&l)&&++h===oL&&h++,h>86&&(h=h-86+rL-1),String.fromCharCode(s)+String.fromCharCode(h))+g.substr(g.length-5,e)+m.substr(m.length-5,e)}(function(t){var e,n,i,r,o,a,s,h=t.lat,l=t.lon,c=6378137,u=.00669438,f=.9996,p=cL(h),d=cL(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60),h>=56&&h<64&&l>=3&&l<12&&(s=32),h>=72&&h<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37)),a=cL(6*(s-1)-180+3),e=.006739496752268451,n=c/Math.sqrt(1-u*Math.sin(p)*Math.sin(p)),i=Math.tan(p)*Math.tan(p),r=e*Math.cos(p)*Math.cos(p);var g,m,y=f*n*((o=Math.cos(p)*(d-a))+(1-i+r)*o*o*o/6+(5-18*i+i*i+72*r-58*e)*o*o*o*o*o/120)+5e5,v=f*(c*(.9983242984503243*p-.002514607064228144*Math.sin(2*p)+2639046602129982e-21*Math.sin(4*p)-3.418046101696858e-9*Math.sin(6*p))+n*Math.tan(p)*(o*o/2+(5-i+9*r+4*r*r)*o*o*o*o/24+(61-58*i+i*i+600*r-2.2240339282485886)*o*o*o*o*o*o/720));return h<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(y),zoneNumber:s,zoneLetter:(g=h,m="Z",84>=g&&g>=72?m="X":72>g&&g>=64?m="W":64>g&&g>=56?m="V":56>g&&g>=48?m="U":48>g&&g>=40?m="T":40>g&&g>=32?m="S":32>g&&g>=24?m="R":24>g&&g>=16?m="Q":16>g&&g>=8?m="P":8>g&&g>=0?m="N":0>g&&g>=-8?m="M":-8>g&&g>=-16?m="L":-16>g&&g>=-24?m="K":-24>g&&g>=-32?m="J":-32>g&&g>=-40?m="H":-40>g&&g>=-48?m="G":-48>g&&g>=-56?m="F":-56>g&&g>=-64?m="E":-64>g&&g>=-72?m="D":-72>g&&g>=-80&&(m="C"),m)}}({lat:t[1],lon:t[0]}),e)}function lL(t){var e=fL(dL(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function cL(t){return t*(Math.PI/180)}function uL(t){return t/Math.PI*180}function fL(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,a,s,h,l,c,u,f,p,d=.9996,g=6378137,m=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,_=e;i<"N"&&(_-=1e7),u=6*(r-1)-180+3,o=.006739496752268451,p=(f=_/d/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),a=g/Math.sqrt(1-m*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),h=o*Math.cos(p)*Math.cos(p),l=.99330562*g/Math.pow(1-m*Math.sin(p)*Math.sin(p),1.5),c=v/(a*d);var x=p-a*Math.tan(p)/l*(c*c/2-(5+3*s+10*h-4*h*h-9*o)*c*c*c*c/24+(61+90*s+298*h+45*s*s-1.6983531815716497-3*h*h)*c*c*c*c*c*c/720);x=uL(x);var w,b=(c-(1+2*s+h)*c*c*c/6+(5-2*h+28*s-3*h*h+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(b=u+uL(b),t.accuracy){var M=fL({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:M.lat,right:M.lon,bottom:x,left:b}}else w={lat:x,lon:b};return w}function pL(t){var e=t%6;return 0===e&&(e=6),e}function dL(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var a=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;i=t.substring(o,o+=2);for(var h=pL(a),l=function(t,e){for(var n=nL.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){if(++n===oL&&n++,n===aL&&n++,n>90){if(r)throw"Bad character: "+t;n=rL,r=!0}i+=1e5}return i}(i.charAt(0),h),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=iL.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(++n===oL&&n++,n===aL&&n++,n>86){if(r)throw"Bad character: "+t;n=rL,r=!0}i+=1e5}return i}(i.charAt(1),h);c<gL(s);)c+=2e6;var u=n-o;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=u/2,m=0,y=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),m=parseFloat(p)*f,d=t.substring(o+g),y=parseFloat(d)*f),{easting:m+l,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function gL(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function mL(t,e,n){if(!(this instanceof mL))return new mL(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}mL.fromMGRS=function(t){return new mL(lL(t))},mL.prototype.toMGRS=function(t){return hL([this.x,this.y],t)};const yL=mL;var vL=.046875,_L=.01953125,xL=.01068115234375;function wL(t){var e=[];e[0]=1-t*(.25+t*(vL+t*(_L+t*xL))),e[1]=t*(.75-t*(vL+t*(_L+t*xL)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function bL(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}function ML(t,e,n){for(var i=1/(1-e),r=t,o=20;o;--o){var a=Math.sin(r),s=1-e*a*a;if(r-=s=(bL(r,a,Math.cos(r),n)-t)*(s*Math.sqrt(s))*i,Math.abs(s)<YI)return r}return r}const CL={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=wL(this.es),this.ml0=bL(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,o=t.y,a=wA(r-this.long0),s=Math.sin(o),h=Math.cos(o);if(this.es){var l=h*a,c=Math.pow(l,2),u=this.ep2*Math.pow(h,2),f=Math.pow(u,2),p=Math.abs(h)>YI?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var m=bL(o,s,h,this.en);n=this.a*(this.k0*l*(1+c/6*(1-d+u+c/20*(5-18*d+g+14*u-58*d*u+c/42*(61+179*g-g*d-479*d)))))+this.x0,i=this.a*(this.k0*(m-this.ml0+s*a*l/2*(1+c/12*(5-d+9*u+4*f+c/30*(61+g-58*d+270*u-330*d*u+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var y=h*Math.sin(a);if(Math.abs(Math.abs(y)-1)<YI)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,i=h*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(i))>=1){if(y-1>YI)return 93;i=0}else i=Math.acos(i);o<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(n=ML(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(n)<qI){var s=Math.sin(n),h=Math.cos(n),l=Math.abs(h)>YI?Math.tan(n):0,c=this.ep2*Math.pow(h,2),u=Math.pow(c,2),f=Math.pow(l,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);i=n-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*u-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),r=wA(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/h)}else i=qI*xA(a),r=0;else{var m=Math.exp(o/this.k0),y=.5*(m-1/m),v=this.lat0+a/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(y,2))),i=Math.asin(e),a<0&&(i=-i),r=0===y&&0===_?0:wA(Math.atan2(y,_)+this.long0)}return t.x=r,t.y=i,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function SL(t){var e=Math.exp(t);return(e-1/e)/2}function EL(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function TL(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,o=t[r],a=0;--r>=0;)n=i*o-a+t[r],a=o,o=n;return e+n*Math.sin(2*e)}function OL(t,e,n){for(var i,r,o=Math.sin(e),a=Math.cos(e),s=SL(n),h=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),l=2*a*h,c=-2*o*s,u=t.length-1,f=t[u],p=0,d=0,g=0;--u>=0;)i=d,r=p,f=l*(d=f)-i-c*(p=g)+t[u],g=c*d-r+l*p;return[(l=o*h)*f-(c=a*s)*g,l*g+c*f]}const PL={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(CL.init.apply(this),this.forward=CL.forward,this.inverse=CL.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=TL(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,o=t[r],a=0;--r>=0;)n=i*o-a+t[r],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*i))},forward:function(t){var e=wA(t.x-this.long0),n=t.y;n=TL(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(i,a*r),e=Math.atan2(o*r,EL(i,r*a)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(EL(1,e)+1))),t<0?-e:e}(Math.tan(e));var s,h,l=OL(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,h=1/0),t.x=s,t.y=h,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var o=OL(this.utg,2*r,2*i);r+=o[0],i+=o[1],i=Math.atan(SL(i));var a=Math.sin(r),s=Math.cos(r),h=Math.sin(i),l=Math.cos(i);r=Math.atan2(a*l,EL(h,l*s)),e=wA((i=Math.atan2(h,l*s))+this.long0),n=TL(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},kL={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(wA(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*XI,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,PL.init.apply(this),this.forward=PL.forward,this.inverse=PL.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function IL(t,e){return Math.pow((1-t)/(1+t),e)}const AL={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ZI)/(Math.pow(Math.tan(.5*this.lat0+ZI),this.C)*IL(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ZI),this.C)*IL(this.e*Math.sin(n),this.ratexp))-qI,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+ZI)/this.K,1/this.C),r=20;r>0&&(n=2*Math.atan(i*IL(this.e*Math.sin(t.y),-.5*this.e))-qI,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]},LL={init:function(){AL.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=wA(t.x-this.long0),AL.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),i=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,AL.inverse.apply(this,[t]),t.x=wA(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},RL={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=YI&&(this.k0=.5*(1+xA(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=YI&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=YI&&(this.k0=.5*this.cons*_A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/bA(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=_A(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-qI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,o,a,s=t.x,h=t.y,l=Math.sin(h),c=Math.cos(h),u=wA(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=YI&&Math.abs(h+this.lat0)<=YI?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(u))+this.y0,t):(n=2*Math.atan(this.ssfn_(h,l,this.e))-qI,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=YI?(o=bA(this.e,h*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<YI?(e=2*this.a*this.k0/(1+r*Math.cos(u)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(u))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(u))+this.y0),t.x=e*r*Math.sin(u)+this.x0,t))},inverse:function(t){var e,n,i,r,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=YI?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<YI?this.lat0>0?wA(this.long0+Math.atan2(t.x,-1*t.y)):wA(this.long0+Math.atan2(t.x,t.y)):wA(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=YI){if(a<=YI)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=a*this.cons/(2*this.a*this.k0),n=this.con*MA(this.e,i),e=this.con*wA(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=YI?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/a),e=wA(this.long0+Math.atan2(t.x*Math.sin(r),a*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*MA(this.e,Math.tan(.5*(qI+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(qI+t))*Math.pow((1-e)/(1+e),.5*n)}},NL={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+a/this.alpha,h=0,l=o,c=-1e3,u=0;Math.abs(l-c)>1e-7;){if(++u>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};var DL=1e-7;const FL={init:function(){var t,e,n,i,r,o,a,s,h,l,c,u,f,p=0,d=0,g=0,m=0,y=0,v=0,_=0;this.no_off=(f="object"==typeof(u=this).PROJECTION?Object.keys(u.PROJECTION)[0]:u.PROJECTION,"no_uoff"in u||"no_off"in u||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),x&&(_=this.alpha),w&&(p=this.rectified_grid_angle*XI),x||w)d=this.longc;else if(g=this.long1,y=this.lat1,m=this.long2,v=this.lat2,Math.abs(y-v)<=DL||(t=Math.abs(y))<=DL||Math.abs(t-qI)<=DL||Math.abs(Math.abs(this.lat0)-qI)<=DL||Math.abs(Math.abs(v)-qI)<=DL)throw new Error;var b=1-this.es;e=Math.sqrt(b),Math.abs(this.lat0)>YI?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*e/t,(r=(i=this.B*e/(n*Math.sqrt(t)))*i-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(bA(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),x||w?(x?(c=Math.asin(Math.sin(_)/i),w||(p=_)):(c=p,_=Math.asin(i*Math.sin(c))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(c))/this.B):(o=Math.pow(bA(this.e,y,Math.sin(y)),this.B),a=Math.pow(bA(this.e,v,Math.sin(v)),this.B),r=this.E/o,h=(a-o)/(a+o),l=((l=this.E*this.E)-a*o)/(l+a*o),(t=g-m)<-Math.pi?m-=$I:t>Math.pi&&(m+=$I),this.lam0=wA(.5*(g+m)-Math.atan(l*Math.tan(.5*this.B*(g-m))/h)/this.B),c=Math.atan(2*Math.sin(this.B*wA(g-this.lam0))/(r-1/r)),p=_=Math.asin(i*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(ZI-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(ZI+r))},forward:function(t){var e,n,i,r,o,a,s,h,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-qI)>YI){if(e=.5*((o=this.E/Math.pow(bA(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),n=.5*(o+a),r=Math.sin(this.B*t.x),i=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(i)-1)<YI)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*t.x),s=Math.abs(a)<DL?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,a)}else h=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=h):(s-=this.u_0,l.x=h*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-h*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,n,i,r,o,a,s,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((i=Math.exp(-this.BrA*n))-1/i),o=.5*(i+1/i),s=((a=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(s)-1)<YI)h.x=0,h.y=s<0?-qI:qI;else{if(h.y=this.E/Math.sqrt((1+s)/(1-s)),h.y=MA(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},jL={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<YI)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=_A(this.e,e,n),r=bA(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=_A(this.e,o,a),h=bA(this.e,this.lat2,o),l=bA(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>YI?this.ns=Math.log(i/s)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=YI&&(n=xA(n)*(qI-2e-10));var i,r,o=Math.abs(Math.abs(n)-qI);if(o>YI)i=bA(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((o=n*this.ns)<=0)return null;r=0}var a=this.ns*wA(e-this.long0);return t.x=this.k0*(r*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,i,r,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=MA(this.e,i)))return null}else r=-qI;return o=wA(h/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},zL={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,o,a,s,h=t.x,l=t.y,c=wA(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,o,a,s,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function BL(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function UL(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function GL(t){return.375*t*(1+.25*t*(1+.46875*t))}function HL(t){return.05859375*t*t*(1+.75*t)}function WL(t){return t*t*t*(35/3072)}function VL(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function qL(t){return Math.abs(t)<qI?t:t-xA(t)*Math.PI}function YL(t,e,n,i,r){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}const XL={init:function(){this.sphere||(this.e0=UL(this.es),this.e1=GL(this.es),this.e2=HL(this.es),this.e3=WL(this.es),this.ml0=this.a*BL(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=wA(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),a=Math.cos(r),s=VL(this.a,this.e,o),h=Math.tan(r)*Math.tan(r),l=i*Math.cos(r),c=l*l,u=this.es*a*a/(1-this.es);e=s*l*(1-c*h*(1/6-(8-h+8*u)*c/120)),n=this.a*BL(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*o/a*c*(.5+(5-h+6*u)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var a=YL(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-qI)<=YI)return t.x=this.long0,t.y=qI,r<0&&(t.y*=-1),t;var s=VL(this.a,this.e,Math.sin(a)),h=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=i*this.a/s,u=c*c;e=a-s*Math.tan(a)/h*c*c*(.5-(1+3*l)*c*c/24),n=c*(1-u*(l/3+(1+3*l)*l*u/15))/Math.cos(a)}return t.x=wA(n+this.long0),t.y=qL(e),t},names:["Cassini","Cassini_Soldner","cass"]};function KL(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}const ZL={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-qI)<YI?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<YI?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=KL(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=KL(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,o,a,s,h,l,c,u=t.x,f=t.y;if(u=wA(u-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),i=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*i:1+this.sinph0*o+this.cosph0*c*i)<=YI)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(u),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<YI)return null;n=ZI-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(u),n*=i}}else{switch(s=0,h=0,l=0,i=Math.cos(u),r=Math.sin(u),o=Math.sin(f),a=KL(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,h=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*h*i;break;case this.EQUIT:l=1+h*i;break;case this.N_POLE:l=qI+f,a=this.qp-a;break;case this.S_POLE:l=f-qI,a=this.qp+a}if(Math.abs(l)<YI)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*h*i):(l=Math.sqrt(2/(1+h*i)))*s*this.ymf,e=this.xmf*l*h*r;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*r,n=i*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,o,a,s,h,l,c,u=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if((n=.5*(p=Math.sqrt(u*u+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=YI?0:Math.asin(f*g/p),u*=g,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=YI?this.lat0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),u*=g*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=qI-n;break;case this.S_POLE:n-=qI}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,f*=this.dd,(a=Math.sqrt(u*u+f*f))<YI)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*a/this.rq),i=Math.cos(r),u*=r=Math.sin(r),this.mode===this.OBLIQ?(s=i*this.sinb1+f*r*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*i-f*this.sinb1*r):(s=f*r/a,o=this.qp*s,f=a*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=u*u+f*f))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(u,f),c=(h=Math.asin(s))+h,n=h+(l=this.apa)[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=wA(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function $L(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const QL={init:function(){Math.abs(this.lat1+this.lat2)<YI||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=_A(this.e3,this.sin_po,this.cos_po),this.qs1=KL(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=_A(this.e3,this.sin_po,this.cos_po),this.qs2=KL(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=KL(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>YI?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=KL(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*wA(e-this.long0),a=r*Math.sin(o)+this.x0,s=this.rh-r*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,i,r,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),o=wA(r/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,o,a=$L(.5*e);if(t<YI)return a;for(var s=t*t,h=1;h<=25;h++)if(a+=o=.5*(r=1-(i=t*(n=Math.sin(a)))*i)*r/Math.cos(a)*(e/(1-s)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return a;return null}},JL={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,o,a,s,h=t.x,l=t.y;return i=wA(h-this.long0),e=Math.sin(l),n=Math.cos(l),r=Math.cos(i),(o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=YI?(a=this.x0+1*this.a*n*Math.sin(i)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/o):(a=this.x0+this.infinity_dist*n*Math.sin(i),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=s,t},inverse:function(t){var e,n,i,r,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),a=$L((i=Math.cos(r))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),o=wA(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},tR={init:function(){this.sphere||(this.k0=_A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,o=wA(i-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=KL(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=wA(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*qI:qI;for(var i,r,o,a,s=Math.asin(.5*e),h=0;h<30;h++)if(r=Math.sin(s),o=Math.cos(s),a=t*r,s+=i=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-r/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(i)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=wA(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},eR={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=wA(e-this.long0),r=qL(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=wA(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=qL(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},nR={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=UL(this.es),this.e1=GL(this.es),this.e2=HL(this.es),this.e3=WL(this.es),this.ml0=this.a*BL(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,o=t.y,a=wA(r-this.long0);if(i=a*Math.sin(o),this.sphere)Math.abs(o)<=YI?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*(qL(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=YI)e=this.a*a,n=-1*this.ml0;else{var s=VL(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(i),n=this.a*BL(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,o,a,s,h,l;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=YI)e=wA(i/this.a+this.long0),n=0;else{var c;for(a=this.lat0+r/this.a,s=i*i/this.a/this.a+a*a,h=a,o=20;o;--o)if(h+=l=-1*(a*(h*(c=Math.tan(h))+1)-h-.5*(h*h+s)*c)/((h-a)/c-1),Math.abs(l)<=YI){n=h;break}e=wA(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=YI)n=0,e=wA(this.long0+i/this.a);else{var u,f,p,d,g;for(a=(this.ml0+r)/this.a,s=i*i/this.a/this.a+a*a,h=a,o=20;o;--o)if(g=this.e*Math.sin(h),u=Math.sqrt(1-g*g)*Math.tan(h),f=this.a*BL(this.e0,this.e1,this.e2,this.e3,h),p=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=l=(a*(u*(d=f/this.a)+1)-d-.5*u*(d*d+s))/(this.es*Math.sin(2*h)*(d*d+s-2*a*d)/(4*u)+(a-d)*(u*p-2/Math.sin(2*h))-p),Math.abs(l)<=YI){n=h;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=wA(this.long0+Math.asin(i*u/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},iR={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,o=i/VI*1e-5,a=r,s=1,h=0;for(e=1;e<=10;e++)s*=o,h+=this.A[e]*s;var l,c=h,u=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)l=p*c+f*u,f=f*c-p*u,p=l,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,o=i-this.x0,a=(r-this.y0)/this.a,s=o/this.a,h=1,l=0,c=0,u=0;for(e=1;e<=6;e++)n=l*a+h*s,h=h*a-l*s,l=n,c=c+this.C_re[e]*h-this.C_im[e]*l,u=u+this.C_im[e]*h+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,g=u,m=a,y=s;for(e=2;e<=6;e++)p=g*c+d*u,d=d*c-g*u,g=p,m+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),y+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*u,d=d*c-g*u,g=p,v+=e*(this.B_re[e]*d-this.B_im[e]*g),_+=e*(this.B_im[e]*d+this.B_re[e]*g);var x=v*v+_*_;c=(m*v+y*_)/x,u=(y*v-m*_)/x}var w=c,b=u,M=1,C=0;for(e=1;e<=9;e++)M*=w,C+=this.D[e]*M;var S=this.lat0+C*VI*1e5,E=this.long0+b;return t.x=E,t.y=S,t},names:["New_Zealand_Map_Grid","nzmg"]},rR={init:function(){},forward:function(t){var e=t.x,n=t.y,i=wA(e-this.long0),r=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=wA(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},oR={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=wL(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=wA(i-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),a=20;a;--a){var s=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<YI)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var h=Math.sin(r),l=Math.cos(r);n=this.a*bL(r,h,l,this.en),e=this.a*i*l/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=$L((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=$L(Math.sin(e)/this.n)),n=wA(n+this.long0),e=qL(e)):(e=ML(t.y/this.a,this.es,this.en),(i=Math.abs(e))<qI?(i=Math.sin(e),n=wA(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-YI<qI&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]},aR={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=wA(e-this.long0),r=n,o=Math.PI*Math.sin(n);;){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<YI)break}r/=2,Math.PI/2-Math.abs(n)<YI&&(i=0);var s=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=s,t.y=h,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=wA(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]},sR={init:function(){Math.abs(this.lat1+this.lat2)<YI||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=UL(this.es),this.e1=GL(this.es),this.e2=HL(this.es),this.e3=WL(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=_A(this.e,this.sinphi,this.cosphi),this.ml1=BL(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<YI?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=_A(this.e,this.sinphi,this.cosphi),this.ml2=BL(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=BL(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=BL(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*wA(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=wA(this.long0+o/this.ns),i=qL(this.g-n/this.a),t.x=r,t.y=i,t):(i=YL(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),r=wA(this.long0+o/this.ns),t.x=r,t.y=i,t)},names:["Equidistant_Conic","eqdc"]},hR={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,o=wA(i-this.long0);Math.abs(r)<=YI&&(e=this.x0+this.R*o,n=this.y0);var a=$L(2*Math.abs(r/Math.PI));(Math.abs(o)<=YI||Math.abs(Math.abs(r)-qI)<=YI)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),h=s*s,l=Math.sin(a),c=Math.cos(a),u=c/(l+c-1),f=u*u,p=u*(2/l-1),d=p*p,g=Math.PI*this.R*(s*(u-d)+Math.sqrt(h*(u-d)*(u-d)-(d+h)*(f-d)))/(d+h);o<0&&(g=-g),e=this.x0+g;var m=h+u;return g=Math.PI*this.R*(p*m-s*Math.sqrt((d+h)*(h+1)-m*m))/(d+h),n=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,o,a,s,h,l,c,u,f;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,o=(i=t.x/u)*i+(r=t.y/u)*r,u=3*(r*r/(h=-2*(a=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(s=a-2*r*r+i*i)*s*s/h/h/h-9*a*s/h/h)/27)/(l=(a-s*s/3/h)/h)/(c=2*Math.sqrt(-l/3)),Math.abs(u)>1&&(u=u>=0?1:-1),f=Math.acos(u)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/h)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/h)*Math.PI,e=Math.abs(i)<YI?this.long0:wA(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-r*r)+o*o))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},lR={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,a,s,h,l,c,u,f,p,d,g,m,y,v,_,x,w,b,M=t.x,C=t.y,S=Math.sin(t.y),E=Math.cos(t.y),T=wA(M-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=YI?(t.x=this.x0+this.a*(qI-C)*Math.sin(T),t.y=this.y0-this.a*(qI-C)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=YI?(t.x=this.x0+this.a*(qI+C)*Math.sin(T),t.y=this.y0+this.a*(qI+C)*Math.cos(T),t):(v=this.sin_p12*S+this.cos_p12*E*Math.cos(T),y=(m=Math.acos(v))?m/Math.sin(m):1,t.x=this.x0+this.a*y*E*Math.sin(T),t.y=this.y0+this.a*y*(this.cos_p12*S-this.sin_p12*E*Math.cos(T)),t):(e=UL(this.es),n=GL(this.es),i=HL(this.es),r=WL(this.es),Math.abs(this.sin_p12-1)<=YI?(o=this.a*BL(e,n,i,r,qI),a=this.a*BL(e,n,i,r,C),t.x=this.x0+(o-a)*Math.sin(T),t.y=this.y0-(o-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=YI?(o=this.a*BL(e,n,i,r,qI),a=this.a*BL(e,n,i,r,C),t.x=this.x0+(o+a)*Math.sin(T),t.y=this.y0+(o+a)*Math.cos(T),t):(s=S/E,h=VL(this.a,this.e,this.sin_p12),l=VL(this.a,this.e,S),c=Math.atan((1-this.es)*s+this.es*h*this.sin_p12/(l*E)),_=0===(u=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=YI?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(u)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=h*_*(1-(x=_*_)*(g=(p=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es))*p)*(1-g)/6+(w=x*_)/8*(d=f*p)*(1-2*g)+(b=w*_)/120*(g*(4-7*g)-3*f*f*(1-7*g))-b*_/48*d),t.x=this.x0+m*Math.sin(u),t.y=this.y0+m*Math.cos(u),t))},inverse:function(t){var e,n,i,r,o,a,s,h,l,c,u,f,p,d,g,m,y,v,_,x,w,b,M;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*qI*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=YI?a=this.lat0:(a=$L(r*this.sin_p12+t.y*i*this.cos_p12/e),s=Math.abs(this.lat0)-qI,o=Math.abs(s)<=YI?this.lat0>=0?wA(this.long0+Math.atan2(t.x,-t.y)):wA(this.long0-Math.atan2(-t.x,t.y)):wA(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=o,t.y=a,t}return h=UL(this.es),l=GL(this.es),c=HL(this.es),u=WL(this.es),Math.abs(this.sin_p12-1)<=YI?(a=YL(((f=this.a*BL(h,l,c,u,qI))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,l,c,u),o=wA(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=YI?(f=this.a*BL(h,l,c,u,qI),a=YL(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,h,l,c,u),o=wA(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=VL(this.a,this.e,this.sin_p12),m=Math.cos(g),v=-(y=this.e*this.cos_p12*m)*y/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*m/(1-this.es),b=1-v*(w=(x=e/p)-v*(1+v)*Math.pow(x,3)/6-_*(1+3*v)*Math.pow(x,4)/24)*w/2-x*w*w*w/6,d=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*m),o=wA(this.long0+Math.asin(Math.sin(g)*Math.sin(w)/Math.cos(d))),M=Math.sin(d),a=Math.atan2((M-this.es*b*this.sin_p12)*Math.tan(d),M*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]},cR={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,a,s,h=t.x,l=t.y;return i=wA(h-this.long0),e=Math.sin(l),n=Math.cos(l),r=Math.cos(i),((o=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(o)<=YI)&&(a=1*this.a*n*Math.sin(i),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=s,t},inverse:function(t){var e,n,i,r,o,a,s;return t.x-=this.x0,t.y-=this.y0,n=$L((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),r=Math.cos(n),a=this.long0,Math.abs(e)<=YI?(s=this.lat0,t.x=a,t.y=s,t):(s=$L(r*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.abs(this.lat0)-qI,Math.abs(o)<=YI?(a=this.lat0>=0?wA(this.long0+Math.atan2(t.x,-t.y)):wA(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=wA(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=a,t.y=s,t))},names:["ortho"]};function uR(t,e,n,i){var r;return t<YI?(i.value=1,r=0):(r=Math.atan2(e,n),Math.abs(r)<=ZI?i.value=1:r>ZI&&r<=qI+ZI?(i.value=2,r-=qI):r>qI+ZI||r<=-(qI+ZI)?(i.value=3,r=r>=0?r-QI:r+QI):(i.value=4,r+=qI)),r}function fR(t,e){var n=t+e;return n<-QI?n+=$I:n>+QI&&(n-=$I),n}const pR={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=qI-ZI/2?this.face=5:this.lat0<=-(qI-ZI/2)?this.face=6:Math.abs(this.long0)<=ZI?this.face=1:Math.abs(this.long0)<=qI+ZI?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,o,a,s={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,5===this.face)r=qI-e,n>=ZI&&n<=qI+ZI?(h.value=1,i=n-qI):n>qI+ZI||n<=-(qI+ZI)?(h.value=2,i=n>0?n-QI:n+QI):n>-(qI+ZI)&&n<=-ZI?(h.value=3,i=n+qI):(h.value=4,i=n);else if(6===this.face)r=qI+e,n>=ZI&&n<=qI+ZI?(h.value=1,i=-n+qI):n<ZI&&n>=-ZI?(h.value=2,i=-n):n<-ZI&&n>=-(qI+ZI)?(h.value=3,i=-n-qI):(h.value=4,i=n>0?-n+QI:-n-QI);else{var l,c,u,f,p,d;2===this.face?n=fR(n,+qI):3===this.face?n=fR(n,+QI):4===this.face&&(n=fR(n,-qI)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),l=p*Math.cos(n),c=p*d,u=f,1===this.face?i=uR(r=Math.acos(l),u,c,h):2===this.face?i=uR(r=Math.acos(c),u,-l,h):3===this.face?i=uR(r=Math.acos(-l),u,-c,h):4===this.face?i=uR(r=Math.acos(-c),u,l,h):(r=i=0,h.value=1)}return a=Math.atan(12/QI*(i+Math.acos(Math.sin(i)*Math.cos(ZI))-qI)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),2===h.value?a+=qI:3===h.value?a+=QI:4===h.value&&(a+=1.5*QI),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,i,r,o,a,s,h,l,c,u,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=2,e-=qI):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=3,e=e<0?e+QI:e-QI):(d.value=4,e+=qI),l=QI/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),5===this.face)h=Math.acos(s),p.phi=qI-h,1===d.value?p.lam=a+qI:2===d.value?p.lam=a<0?a+QI:a-QI:3===d.value?p.lam=a-qI:p.lam=a;else if(6===this.face)h=Math.acos(s),p.phi=h-qI,1===d.value?p.lam=-a+qI:2===d.value?p.lam=-a:3===d.value?p.lam=-a-qI:p.lam=a<0?-a-QI:-a+QI;else{var g,m,y;l=(g=s)*g,m=(l+=(y=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*y)>=1?0:Math.sqrt(1-l),2===d.value?(l=m,m=-y,y=l):3===d.value?(m=-m,y=-y):4===d.value&&(l=m,m=y,y=-l),2===this.face?(l=g,g=-m,m=l):3===this.face?(g=-g,m=-m):4===this.face&&(l=g,g=m,m=-l),p.phi=Math.acos(-y)-qI,p.lam=Math.atan2(m,g),2===this.face?p.lam=fR(p.lam,-qI):3===this.face?p.lam=fR(p.lam,-QI):4===this.face&&(p.lam=fR(p.lam,+qI))}return 0!==this.es&&(c=p.phi<0?1:0,u=Math.tan(p.phi),f=this.b/Math.sqrt(u*u+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var dR=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],gR=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],mR=.8487,yR=1.3523,vR=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const _R={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=wA(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(11.459155902616464*n);i<0?i=0:i>=18&&(i=17);var r={x:vR(dR[i],n=KI*(n-.08726646259971647*i))*e,y:vR(gR[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*mR+this.x0,r.y=r.y*this.a*yR+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*mR),y:Math.abs(t.y-this.y0)/(this.a*yR)};if(e.y>=1)e.x/=dR[18][0],e.y=t.y<0?-qI:qI;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(gR[n][0]>e.y)--n;else{if(!(gR[n+1][0]<=e.y))break;++n}var i=gR[n],r=5*(e.y-i[0])/(gR[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var o=t(r);if(r-=o,Math.abs(o)<1e-10)break}return r}((function(t){return(vR(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)}),r,0,100),e.x/=vR(dR[n],r),e.y=(5*n+r)*XI,t.y<0&&(e.y=-e.y)}return e.x=wA(e.x+this.long0),e},names:["Robinson","robin"]},xR={init:function(){this.name="geocent"},forward:function(t){return GA(t,this.es,this.a)},inverse:function(t){return HA(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var wR={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const bR={init:function(){if(Object.keys(wR).forEach(function(t){if(void 0===this[t])this[t]=wR[t].def;else{if(wR[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);wR[t].num&&(this[t]=parseFloat(this[t]))}wR[t].degrees&&(this[t]=this[t]*XI)}.bind(this)),Math.abs(Math.abs(this.lat0)-qI)<YI?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<YI?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,i,r,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case 3:n=this.sinph0*o+this.cosph0*a*s;break;case 2:n=a*s;break;case 1:n=-o;break;case 0:n=o}switch(e=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case 3:n*=this.cosph0*o-this.sinph0*a*s;break;case 2:n*=o;break;case 0:n*=-a*s;break;case 1:n*=a*s}return r=1/((i=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,i,r={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=EL(t.x,t.y);if(Math.abs(o)<YI)r.x=0,r.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case 3:r.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(r.y))*o,t.x*=s*this.cosph0;break;case 2:r.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case 0:r.y=Math.asin(a),t.y=-t.y;break;case 1:r.y=-Math.asin(a)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]};var MR;eL.defaultDatum="WGS84",eL.Proj=UA,eL.WGS84=new eL.Proj("WGS84"),eL.Point=yL,eL.toPoint=KA,eL.defs=gA,eL.nadgrid=function(t,e){var n=new DataView(e),i=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(n),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:DA(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,n){for(var i=[],r=0;r<e.nSubgrids;r++){var o=jA(t,176,n),a=zA(t,176,o,n),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[NA(o.lowerLongitude),NA(o.lowerLatitude)],del:[NA(o.longitudeInterval),NA(o.latitudeInterval)],lim:[s,h],count:o.gridNodeCount,cvs:FA(a)})}return i}(n,r,i),a={header:r,subgrids:o};return LA[t]=a,a},eL.transform=$A,eL.mgrs=sL,eL.version="__VERSION__",(MR=eL).Proj.projections.add(CL),MR.Proj.projections.add(PL),MR.Proj.projections.add(kL),MR.Proj.projections.add(LL),MR.Proj.projections.add(RL),MR.Proj.projections.add(NL),MR.Proj.projections.add(FL),MR.Proj.projections.add(jL),MR.Proj.projections.add(zL),MR.Proj.projections.add(XL),MR.Proj.projections.add(ZL),MR.Proj.projections.add(QL),MR.Proj.projections.add(JL),MR.Proj.projections.add(tR),MR.Proj.projections.add(eR),MR.Proj.projections.add(nR),MR.Proj.projections.add(iR),MR.Proj.projections.add(rR),MR.Proj.projections.add(oR),MR.Proj.projections.add(aR),MR.Proj.projections.add(sR),MR.Proj.projections.add(hR),MR.Proj.projections.add(lR),MR.Proj.projections.add(cR),MR.Proj.projections.add(pR),MR.Proj.projections.add(_R),MR.Proj.projections.add(xR),MR.Proj.projections.add(bR);const CR=eL;function SR(t){var e,n,i,r,o,a,s,h,l=Object.keys(t.defs),c=l.length;for(e=0;e<c;++e){var u=l[e];if(!gg(u)){var f=t.defs(u),p=f.units;p||"longlat"!==f.projName||(p=Rp.DEGREES),dg(new Od({code:u,axisOrientation:f.axis,metersPerUnit:f.to_meter,units:p}))}}for(e=0;e<c;++e){var d=l[e],g=gg(d);for(n=0;n<c;++n){var m=l[n],y=gg(m);if(!ig(d,m))if(t.defs[d]===t.defs[m])yg([g,y]);else{var v=t(d,m);i=g,r=y,o=Ng(g,y,v.forward),a=Ng(y,g,v.inverse),s=void 0,h=void 0,s=gg(i),h=gg(r),ng(s,h,_g(o)),ng(h,s,_g(a))}}}}CR.defs("EPSG:4258","+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"),SR(CR);const ER=39.3700787,TR=25.4/.28;class OR{constructor(t){const{element:e,scale:n,center:i}=t,r=gg(`EPSG:${t.projection}`),o=gg(`EPSG:${t.displayProjection}`);this.defaultScale=n,this.defaultCenter=Mg(i,o,r);const a=new SM({projection:r,maxZoom:23}),s=new GI,h=new YC({layers:[],target:e,view:a,controls:HM({attributionOptions:{collapsible:!1}}).extend([s,new lE,new AI])});this.view=a,this.map=h;const l=(t=>{const e=t.getOverlayContainerStopEvent(),n=document.createElement("div");return n.className="ol-position-container",e.appendChild(n),n})(h),c=((t,e)=>{return new iS({coordinateFormat:(n=5,function(t){return function(t,e){return function(t,e,n){return t?"{x}, {y}".replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}(t,0,e)}(t,n)}),projection:t,target:e,placeholder:!1});var n})(o,l),u=new sS({placeholder:!1,target:l}),f=new RI({target:l});h.addControl(c),h.addControl(u),h.addControl(f),((t,e,n)=>{const i=e.element,r=(n.element,()=>{const e=t.getBoundingClientRect();let r=i.getBoundingClientRect();n.style.left=r.width+(r.left-e.left)+8+"px"});new ResizeObserver((t=>r())).observe(i),r()})(h.getViewport(),s,l)}getCenter(){return this.view.getCenter()}setCenter(t){this.view.setCenter(t)}getResolution(){return this.view.getResolution()}getScale(){return this.toScale(this.getResolution())}setScale(t){this.view.setResolution(this.toResolution(t))}getExtent(){return this.view.calculateExtent(this.map.getSize())}setExtent(t){let e=t&&!0;if(e)for(var n=0,i=t.length;n<i&&e;n++)e=e&&isFinite(t[n]);e?this.view.fit(t,{minResolution:this.toResolution(1e3)}):this.defaultCenter&&this.defaultScale&&(this.setCenter(this.defaultCenter),this.setScale(this.defaultScale))}getSize(){return this.map.getSize()}fit(t){this.view.fit(t,{constrainResolution:!0,minResolution:this.toResolution(1e3)})}addLayer(t){t instanceof $C?this.map.addLayer(t.layer):console.warn(t)}removeLayer(t){t instanceof $C?this.map.removeLayer(t.layer):console.warn(t)}addInteraction(t){t instanceof QC?(this.map.addInteraction(t.interaction),t.setActive(!0)):console.warn(t)}removeInteraction(t){t instanceof QC?(t.setActive(!1),this.map.removeInteraction(t.interaction)):console.warn(t)}getProjection(){return this.view.getProjection()}updateSize(){this.map.updateSize()}addExtentChangeHandler(t){const e=this.map.on("moveend",(({coordinate:e})=>t(e)));return()=>yp(e)}addMapClickHandler(t){const e=this.map.on("singleclick",(({coordinate:e})=>t(e)));return()=>yp(e)}toScale(t){const e=this.view.getProjection().getUnits();return t*Lp[e]*ER*TR}toResolution(t){const e=this.view.getProjection().getUnits();return t/(Lp[e]*ER*TR)}}var PR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kR=function(t){function e(e,n,i){var r=t.call(this)||this,o=i||{};return r.tileCoord=e,r.state=n,r.interimTile=null,r.key="",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r.interpolate=!!o.interpolate,r}return PR(e,t),e.prototype.changed=function(){this.dispatchEvent(op)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){_p()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:mM(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(rp);const IR=kR;var AR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const LR=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,n,a)||this;return s.crossOrigin_=r,s.src_=i,s.key=i,s.image_=new Image,null!==r&&(s.image_.crossOrigin=r),s.unlisten_=null,s.tileLoadFunction_=o,s}return AR(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=ob(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=FS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(IR);var RR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),NR=function(t){function e(e,n,i,r,o,a,s,h,l,c,u,f){var p=t.call(this,o,0,{interpolate:!!f})||this;p.renderEdges_=void 0!==u&&u,p.pixelRatio_=s,p.gutter_=h,p.canvas_=null,p.sourceTileGrid_=n,p.targetTileGrid_=r,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var d=r.getTileCoordExtent(p.wrappedTileCoord_),g=p.targetTileGrid_.getExtent(),m=p.sourceTileGrid_.getExtent(),y=g?wd(d,g):d;if(0===dd(y))return p.state=4,p;var v=e.getExtent();v&&(m=m?wd(m,v):v);var _=r.getResolution(p.wrappedTileCoord_[0]),x=function(t,e,n,i){var r=yd(n),o=wS(t,e,r,i);return(!isFinite(o)||o<=0)&&pd(n,(function(n){return o=wS(t,e,n,i),isFinite(o)&&o>0})),o}(e,i,y,_);if(!isFinite(x)||x<=0)return p.state=4,p;var w=void 0!==c?c:.5;if(p.triangulation_=new gS(e,i,y,m,x*w,_),0===p.triangulation_.getTriangles().length)return p.state=4,p;p.sourceZ_=n.getZForResolution(x);var b=p.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(b[1]=Pd(b[1],m[1],m[3]),b[3]=Pd(b[3],m[1],m[3])):b=wd(b,m)),dd(b)){for(var M=n.getTileRangeForExtentAndZ(b,p.sourceZ_),C=M.minX;C<=M.maxX;C++)for(var S=M.minY;S<=M.maxY;S++){var E=l(p.sourceZ_,C,S,s);E&&p.sourceTiles_.push(E)}0===p.sourceTiles_.length&&(p.state=4)}else p.state=4;return p}return RR(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=bS(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){var r=e.getState();if(0==r||1==r){t++;var o=fp(e,op,(function(n){var i=e.getState();2!=i&&3!=i&&4!=i||(dp(o),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(dp),this.sourcesListenerKeys_=null},e}(IR);const DR=NR;var FR=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return Op(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Op(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Op(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();const jR=FR;function zR(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function BR(t,e,n){return t+"/"+e+"/"+n}function UR(t){return BR(t[0],t[1],t[2])}var GR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),HR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return GR(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey().split("/").map(Number)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(UR(e.tileCoord)),e.release())}.bind(this))}},e}(jR);const WR=HR;var VR=function(){function t(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function qR(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new VR(t,e,n,i)}const YR=VR;var XR=[0,0,0],KR=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Op(function(t,e,n){var i=function(t,e){return e-t}||Bf;return t.every((function(e,n){if(0===n)return!0;var r=i(t[n-1],e);return!(r>0||0===r)}))}(this.resolutions_),17),!t.origins)for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Op(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=bd(r)),Op(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Op(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Op(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new YR(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(r){var i=this.getTileRangeForExtentAndZ(r,e);n.minX=Math.max(i.minX,n.minX),n.maxX=Math.min(i.maxX,n.maxX),n.minY=Math.max(i.minY,n.minY),n.maxY=Math.min(i.maxY,n.maxY)}return n}),this):r&&this.calculateTileRanges_(r)}return t.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,o=i.maxX;r<=o;++r)for(var a=i.minY,s=i.maxY;a<=s;++a)n([e,r,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,i){var r,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):a=this.getTileCoordExtent(t,i);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?qR(r=Math.floor(r/2),r,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(a,s,n)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return qR(i,i+1,r,r+1,e)}var o=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var i=t[0],r=t[1],o=t[2];if(e===i)return qR(r,o,r,o,n);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-i),s=Math.floor(r*a),h=Math.floor(o*a);return e<i?qR(s,s,h,h,n):qR(s,Math.floor(a*(r+1))-1,h,Math.floor(a*(o+1))-1,n)}var l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),o=TM(this.getTileSize(t),this.tmpSize_),a=i[0]+e.minX*o[0]*r,s=i[0]+(e.maxX+1)*o[0]*r;return rd(a,i[1]+e.minY*o[1]*r,s,i[1]+(e.maxY+1)*o[1]*r,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=XR;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),qR(r,i[1],o,i[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=TM(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=TM(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,a=n[1]-(t[2]+1)*r[1]*i;return rd(o,a,o+r[0]*i,a+r[1]*i,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var o=this.getZForResolution(n),a=n/this.getResolution(o),s=this.getOrigin(o),h=TM(this.getTileSize(o),this.tmpSize_),l=a*(t-s[0])/n/h[0],c=a*(s[1]-e)/n/h[1];return i?(l=Bd(l,5)-1,c=Bd(c,5)-1):(l=zd(l,5),c=zd(c,5)),zR(o,l,c,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var o=this.getOrigin(n),a=this.getResolution(n),s=TM(this.getTileSize(n),this.tmpSize_),h=(t-o[0])/a/s[0],l=(o[1]-e)/a/s[1];return i?(h=Bd(h,5)-1,l=Bd(l,5)-1):(h=zd(h,5),l=zd(l,5)),zR(n,h,l,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return Pd(Gf(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n},t}();const ZR=KR;function $R(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){var r=QR(t,undefined,n);return new ZR({extent:t,origin:vd(t,"top-left"),resolutions:r,tileSize:n})}(JR(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function QR(t,e,n,i){for(var r=void 0!==e?e:42,o=xd(t),a=Cd(t),s=TM(void 0!==n?n:256),h=i>0?i:Math.max(a/s[0],o/s[1]),l=r+1,c=new Array(l),u=0;u<l;++u)c[u]=h/Math.pow(2,u);return c}function JR(t){var e=(t=gg(t)).getExtent();if(!e){var n=180*Lp[Rp.DEGREES]/t.getMetersPerUnit();e=rd(-n,-n,n,n)}return e}var tN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),eN=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var i=e.tileGrid;return i&&TM(i.getTileSize(i.getMinZoom()),[256,256]),n.tileCache=new WR(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return tN(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,a,s,h=!0,l=n.minX;l<=n.maxX;++l)for(var c=n.minY;c<=n.maxY;++c)a=BR(e,l,c),s=!1,r.containsKey(a)&&(s=2===(o=r.get(a)).getState())&&(s=!1!==i(o)),s||(h=!1);return h},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,i,r){return _p()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:$R(t)},e.prototype.getTileCacheForProjection=function(t){return Op(xg(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=TM(i.getTileSize(t),this.tmpSize);return 1==r?o:function(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}(o,r,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),o=JR(n);if(Jp(o,r))return e;var a=Cd(o),s=Math.ceil((o[0]-r[0])/a);return r[0]+=a*s,t.getTileCoordForCoordAndZ(r,i)}(i,t,n)),function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o=e.getFullTileRange(n);return!o||o.containsXY(i,r)}(t,i)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,i){},e}(PS),nN=function(t){function e(e,n){var i=t.call(this,e)||this;return i.tile=n,i}return tN(e,t),e}(Ff);const iN=eN;function rN(t,e){var n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,s,h){return a?t.replace(n,a[0].toString()).replace(i,a[1].toString()).replace(r,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return Op(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function oN(t){return 1===t.length?t[0]:function(e,n,i){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),o=Nd(r,t.length);return t[o](e,n,i)}}}function aN(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i=n[1].charCodeAt(0),r=n[2].charCodeAt(0),o=void 0;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}var sN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),hN=function(t){function e(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===e.prototype.tileUrlFunction,i.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(i.tileUrlFunction=n.tileUrlFunction),i.urls=null,n.urls?i.setUrls(n.urls):n.url&&i.setUrl(n.url),i.tileLoadingKeys_={},i}return sN(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,i=wp(n),r=n.getState();1==r?(this.tileLoadingKeys_[i]=!0,e="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=e&&this.dispatchEvent(new nN(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=aN(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=rN(t[r],e);return oN(i)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var i=BR(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(iN);const lN=hN;var cN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uN=function(t){function e(e){var n=this,i=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(i=e.interpolate),(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:fN,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:i,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:LR,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return cN(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[i];r.expireCache(r==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!xg(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var e=t.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!xg(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!xg(e,t)){var n=wp(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=$R(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||xg(e,t))return this.tileCache;var n=wp(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new WR(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,i,r,o){var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,r),h=s?this.tileUrlFunction(s,i,r):void 0,l=new this.tileClass(a,void 0!==h?0:4,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(op,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,n,i,r){var o=this.getProjection();if(o&&r&&!xg(o,r)){var a=this.getTileCacheForProjection(r),s=[t,e,n],h=void 0,l=UR(s);a.containsKey(l)&&(h=a.get(l));var c=this.getKey();if(h&&h.key==c)return h;var u=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),p=this.getTileCoordForTileUrlFunction(s,r),d=new DR(o,u,r,f,s,p,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return d.key=c,h?(d.interimTile=h,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,n,i,o||r)},e.prototype.getTileInternal=function(t,e,n,i,r){var o=null,a=BR(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var h=o;o=this.createTile_(t,e,n,i,r,s),0==h.getState()?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,n,i,r,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=gg(t);if(n){var i=wp(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}},e}(lN);function fN(t,e){t.getImage().src=e}const pN=uN;var dN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gN=function(t){function e(e){var n=e||{},i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var r=void 0!==n.projection?n.projection:"EPSG:3857",o=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||gg("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:QR(n,e.maxZoom,e.tileSize,e.maxResolution)};return new ZR(i)}({extent:JR(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,opaque:n.opaque,projection:r,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return dN(e,t),e}(pN);const mN=gN;var yN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vN=function(t){function e(e){var n,i=e||{},r=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(r=i.interpolate),n=void 0!==i.attributions?i.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];var o=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",a=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:n,attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:o,interpolate:r,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,opaque:void 0===i.opaque||i.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:a,wrapX:i.wrapX,zDirection:i.zDirection})||this}return yN(e,t),e}(mN);const _N=vN,xN="preload",wN="useInterimTilesOnError";var bN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const MN=function(t){function e(e){var n=this,i=e||{},r=$f({},i);return delete r.preload,delete r.useInterimTilesOnError,(n=t.call(this,r)||this).on,n.once,n.un,n.setPreload(void 0!==i.preload?i.preload:0),n.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),n}return bN(e,t),e.prototype.getPreload=function(){return this.get(xN)},e.prototype.setPreload=function(t){this.set(xN,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(wN)},e.prototype.setUseInterimTilesOnError=function(t){this.set(wN,t)},e}(Vw);var CN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),SN=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new YR(0,0,0,0),n}return CN(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!i},e.prototype.getTile=function(t,e,n,i){var r=i.pixelRatio,o=i.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,r,o);return 3==s.getState()&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(2)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,n,i){return!!this.isDrawableTile(i)&&t.prototype.loadedTileCallback.call(this,e,n,i)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,a=i.center,s=i.rotation,h=t.pixelRatio,l=this.getLayer(),c=l.getSource(),u=c.getRevision(),f=c.getTileGridForProjection(r),p=f.getZForResolution(o,c.zDirection),d=f.getResolution(p),g=t.extent,m=n.extent&&Lg(n.extent);m&&(g=wd(g,Lg(n.extent)));var y=c.getTilePixelRatio(h),v=Math.round(t.size[0]*y),_=Math.round(t.size[1]*y);if(s){var x=Math.round(Math.sqrt(v*v+_*_));v=x,_=x}var w=d*v/2/y,b=d*_/2/y,M=[a[0]-w,a[1]-b,a[0]+w,a[1]+b],C=f.getTileRangeForExtentAndZ(g,p),S={};S[p]={};var E=this.createLoadedTileFinder(c,r,S),T=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var P=C.minX;P<=C.maxX;++P)for(var k=C.minY;k<=C.maxY;++k){var I=this.getTile(p,P,k,t);if(this.isDrawableTile(I)){var A=wp(this);if(2==I.getState()){S[p][I.tileCoord.toString()]=I;var L=I.inTransition(A);this.newTiles_||!L&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(A,t.time))continue}var R=f.getTileCoordChildTileRange(I.tileCoord,O,T),N=!1;R&&(N=E(p+1,R)),N||f.forEachTileCoordParentTileRange(I.tileCoord,E,O,T)}var D=d/o;Vp(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/y,1/y,s,-v/2,-_/2);var F=Yp(this.pixelTransform);this.useContainer(e,F,n.opacity,this.getBackground(t));var j=this.context,z=j.canvas;qp(this.inversePixelTransform,this.pixelTransform),Vp(this.tempTransform,v/2,_/2,D,D,0,-v/2,-_/2),z.width!=v||z.height!=_?(z.width=v,z.height=_):this.containerReused||j.clearRect(0,0,v,_),m&&this.clipUnrotated(j,t,m),c.getInterpolate()||$f(j,yS),this.preRender(j,t),this.renderedTiles.length=0;var B,U,G,H=Object.keys(S).map(Number);H.sort(Bf),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],U=[]):H=H.reverse();for(var W=H.length-1;W>=0;--W){var V=H[W],q=c.getTilePixelSize(V,h,r),Y=f.getResolution(V)/d,X=q[0]*Y*D,K=q[1]*Y*D,Z=f.getTileCoordForCoordAndZ(bd(M),V),$=f.getTileCoordExtent(Z),Q=Wp(this.tempTransform,[y*($[0]-M[0])/d,y*(M[3]-$[3])/d]),J=y*c.getGutterForProjection(r),tt=S[V];for(var et in tt){var nt=(I=tt[et]).tileCoord,it=Z[1]-nt[1],rt=Math.round(Q[0]-(it-1)*X),ot=Z[2]-nt[2],at=Math.round(Q[1]-(ot-1)*K),st=rt-(P=Math.round(Q[0]-it*X)),ht=at-(k=Math.round(Q[1]-ot*K)),lt=p===V;if(!(L=lt&&1!==I.getAlpha(wp(this),t.time)))if(B){j.save(),G=[P,k,P+st,k,P+st,k+ht,P,k+ht];for(var ct=0,ut=B.length;ct<ut;++ct)if(p!==V&&V<U[ct]){var ft=B[ct];j.beginPath(),j.moveTo(G[0],G[1]),j.lineTo(G[2],G[3]),j.lineTo(G[4],G[5]),j.lineTo(G[6],G[7]),j.moveTo(ft[6],ft[7]),j.lineTo(ft[4],ft[5]),j.lineTo(ft[2],ft[3]),j.lineTo(ft[0],ft[1]),j.clip()}B.push(G),U.push(V)}else j.clearRect(P,k,st,ht);this.drawTileImage(I,t,P,k,st,ht,J,lt),B&&!L?(j.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,c,I)}}this.renderedRevision=u,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!hd(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,c,f,h,r,g,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(j,t),n.extent&&j.restore(),$f(j,vS),F!==z.style.transform&&(z.style.transform=F);var pt=rb(n.opacity),dt=this.container;return pt!==dt.style.opacity&&(dt.style.opacity=pt),this.container},e.prototype.drawTileImage=function(t,e,n,i,r,o,a,s){var h=this.getTileImage(t);if(h){var l=wp(this),c=s?t.getAlpha(l,e.time):1,u=c!==this.context.globalAlpha;u&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,n,i,r,o),u&&this.context.restore(),1!==c?e.animate=!0:s&&t.endTransition(l)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var i=wp(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var i=wp(e);i in t||(t[i]={}),t[i][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,i,r,o,a,s,h){var l=wp(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,u,f,p,d,g,m=t.wantedTiles[l],y=t.tileQueue,v=0;for(g=n.getMinZoom();g<=a;++g)for(u=n.getTileRangeForExtentAndZ(o,g,u),f=n.getResolution(g),p=u.minX;p<=u.maxX;++p)for(d=u.minY;d<=u.maxY;++d)a-g<=s?(++v,0==(c=e.getTile(g,p,d,i,r)).getState()&&(m[c.getKey()]=!0,y.isKeyQueued(c.getKey())||y.enqueue([c,l,n.getTileCoordCenter(c.tileCoord),f])),void 0!==h&&h(c)):e.useTile(g,p,d,r);e.updateCacheSize(v,r)},e}($S);SN.prototype.getLayer;const EN=SN;var TN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const ON=function(t){function e(e){return t.call(this,e)||this}return TN(e,t),e.prototype.createRenderer=function(){return new EN(this)},e}(MN),PN="KVP";var kN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),IN=function(t){function e(e){var n=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return n.matrixIds_=e.matrixIds,n}return kN(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(ZR);const AN=IN;var LN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),RN=function(t){function e(e){var n=this,i=void 0===e.imageSmoothing||e.imageSmoothing;void 0!==e.interpolate&&(i=e.interpolate);var r=void 0!==e.requestEncoding?e.requestEncoding:PN,o=e.tileGrid,a=e.urls;return void 0===a&&void 0!==e.url&&(a=aN(e.url)),(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:i,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:a,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})||this).version_=void 0!==e.version?e.version:"1.0.0",n.format_=void 0!==e.format?e.format:"image/jpeg",n.dimensions_=void 0!==e.dimensions?e.dimensions:{},n.layer_=e.layer,n.matrixSet_=e.matrixSet,n.style_=e.style,n.requestEncoding_=r,n.setKey(n.getKeyForDimensions_()),a&&a.length>0&&(n.tileUrlFunction=oN(a.map(n.createFromWMTSTemplate.bind(n)))),n}return LN(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(oN(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var n in this.dimensions_)e[t++]=n+"-"+this.dimensions_[n];return e.join("/")},e.prototype.updateDimensions=function(t){$f(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==PN&&$f(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==PN?zS(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));var i=this.tileGrid,r=this.dimensions_;return function(n,o,a){if(n){var s={TileMatrix:i.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};$f(s,r);var h=t;return h=e==PN?zS(h,s):h.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}},e}(pN);const NN=RN;var DN=a(582);const FN=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=TM(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return _p()},t.prototype.getImage=function(t){return _p()},t.prototype.getHitDetectionImage=function(){return _p()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return _p()},t.prototype.getImageSize=function(){return _p()},t.prototype.getOrigin=function(){return _p()},t.prototype.getSize=function(){return _p()},t.prototype.setDisplacement=function(t){this.displacement_=t},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=TM(t)},t.prototype.listenImageChange=function(t){_p()},t.prototype.load=function(){_p()},t.prototype.unlistenImageChange=function(t){_p()},t}();function jN(t){return Array.isArray(t)?bw(t):t}var zN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),BN=function(t){function e(e){var n=this,i=void 0!==e.rotateWithView&&e.rotateWithView;return(n=t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=void 0!==e.fill?e.fill:null,n.origin_=[0,0],n.points_=e.points,n.radius_=void 0!==e.radius?e.radius:e.radius1,n.radius2_=e.radius2,n.angle_=void 0!==e.angle?e.angle:0,n.stroke_=void 0!==e.stroke?e.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return zN(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement();return[t[0]/2-e[0],t[1]/2+e[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var n=this.renderOptions_,i=ob(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var i=this.radius_,r=void 0===this.radius2_?i:this.radius2_;if(i<r){var o=i;i=r,r=o}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,h=r*Math.sin(s),l=i-Math.sqrt(r*r-h*h),c=Math.sqrt(h*h+l*l),u=c/h;if("miter"===t&&u<=n)return u*e;var f=e/2/u,p=e/2*(l/c),d=Math.sqrt((i+f)*(i+f)+p*p)-i;if(void 0===this.radius2_||"bevel"===t)return 2*d;var g=i*Math.sin(s),m=r-Math.sqrt(i*i-g*g),y=Math.sqrt(g*g+m*m)/g;if(y<=n){var v=y*e/2-r-i;return 2*Math.max(d,v)}return 2*d},e.prototype.createRenderOptions=function(){var t,e=fb,n=0,i=null,r=0,o=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=pb),t=jN(t),void 0===(o=this.stroke_.getWidth())&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=fb),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var a=this.calculateLineJoinSize_(e,o,n),s=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*s+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var i=this.fill_.getColor();null===i&&(i=lb),e.fillStyle=jN(i),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=xw(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var i=ob(t.size,t.size);this.hitDetectionCanvas_=i.canvas,this.drawHitDetectionCanvas_(t,i)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{var i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var r=this.angle_-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=r+a*o,h=a%2==0?n:i;t.lineTo(h*Math.cos(s),h*Math.sin(s))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=lb,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(FN);const UN=BN;var GN=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const HN=function(t){function e(e){var n=e||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this}return GN(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(UN);var WN=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}();const VN=WN;var qN=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();const YN=qN;var XN=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=QN,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=QN,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),KN=null;function ZN(t,e){if(!KN){var n=new VN({color:"rgba(255,255,255,0.4)"}),i=new YN({color:"#3399CC",width:1.25});KN=[new XN({image:new HN({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return KN}function $N(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[Hg.POLYGON]=[new XN({fill:new VN({color:[255,255,255,.5]})})],t[Hg.MULTI_POLYGON]=t[Hg.POLYGON],t[Hg.LINE_STRING]=[new XN({stroke:new YN({color:e,width:5})}),new XN({stroke:new YN({color:n,width:3})})],t[Hg.MULTI_LINE_STRING]=t[Hg.LINE_STRING],t[Hg.CIRCLE]=t[Hg.POLYGON].concat(t[Hg.LINE_STRING]),t[Hg.POINT]=[new XN({image:new HN({radius:6,fill:new VN({color:n}),stroke:new YN({color:e,width:1.5})}),zIndex:1/0})],t[Hg.MULTI_POINT]=t[Hg.POINT],t[Hg.GEOMETRY_COLLECTION]=t[Hg.POLYGON].concat(t[Hg.LINE_STRING],t[Hg.POINT]),t}function QN(t){return t.getGeometry()}const JN=XN;var tD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),eD="renderOrder",nD=function(t){function e(e){var n=this,i=e||{},r=$f({},i);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(n=t.call(this,r)||this).declutter_=void 0!==i.declutter&&i.declutter,n.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,n.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,n}return tD(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(eD)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new DN(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(eD,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:ZN,this.styleFunction_=null===t?void 0:function(t){var e,n;"function"==typeof t?e=t:(Array.isArray(t)?n=t:(Op("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n});return e}(this.style_),this.changed()},e}(Vw);const iD=nD;var rD={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},oD=[rD.FILL],aD=[rD.STROKE],sD=[rD.BEGIN_PATH],hD=[rD.CLOSE_PATH];const lD=rD,cD=function(){function t(){}return t.prototype.drawCustom=function(t,e,n,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}();var uD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fD=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=i,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return uD(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates,o=r.length,a=0,s=t.length;a<s;a+=e)i[0]=t[a],i[1]=t[a+1],Jp(n,i)&&(r[o++]=i[0],r[o++]=i[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,n,i,r,o){var a=this.coordinates,s=a.length,h=this.getBufferedMaxExtent();o&&(e+=i);var l,c,u,f=t[e],p=t[e+1],d=this.tmpCoordinate_,g=!0;for(l=e+i;l<n;l+=i)d[0]=t[l],d[1]=t[l+1],(u=nd(h,d))!==c?(g&&(a[s++]=f,a[s++]=p,g=!1),a[s++]=d[0],a[s++]=d[1]):1===u?(a[s++]=d[0],a[s++]=d[1],g=!1):g=!0,f=d[0],p=d[1],c=u;return(r&&g||l===e+i)&&(a[s++]=f,a[s++]=p),s},e.prototype.drawCustomCoordinates_=function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o],h=this.appendFlatLineCoordinates(t,e,s,i,!1,!1);r.push(h),e=s}return e},e.prototype.drawCustom=function(t,e,n,i){this.beginGeometry(t,e);var r,o,a,s,h,l=t.getType(),c=t.getStride(),u=this.coordinates.length;switch(l){case Hg.MULTI_POLYGON:r=t.getOrientedFlatCoordinates(),s=[];var f=t.getEndss();h=0;for(var p=0,d=f.length;p<d;++p){var g=[];h=this.drawCustomCoordinates_(r,h,f[p],c,g),s.push(g)}this.instructions.push([lD.CUSTOM,u,s,t,n,Em]),this.hitDetectionInstructions.push([lD.CUSTOM,u,s,t,i||n,Em]);break;case Hg.POLYGON:case Hg.MULTI_LINE_STRING:a=[],r=l==Hg.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(r,0,t.getEnds(),c,a),this.instructions.push([lD.CUSTOM,u,a,t,n,Sm]),this.hitDetectionInstructions.push([lD.CUSTOM,u,a,t,i||n,Sm]);break;case Hg.LINE_STRING:case Hg.CIRCLE:r=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(r,0,r.length,c,!1,!1),this.instructions.push([lD.CUSTOM,u,o,t,n,Cm]),this.hitDetectionInstructions.push([lD.CUSTOM,u,o,t,i||n,Cm]);break;case Hg.MULTI_POINT:r=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(r,c))>u&&(this.instructions.push([lD.CUSTOM,u,o,t,n,Cm]),this.hitDetectionInstructions.push([lD.CUSTOM,u,o,t,i||n,Cm]));break;case Hg.POINT:r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),o=this.coordinates.length,this.instructions.push([lD.CUSTOM,u,o,t,n]),this.hitDetectionInstructions.push([lD.CUSTOM,u,o,t,i||n])}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[lD.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[lD.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,i,r=e.length,o=-1;for(t=0;t<r;++t)(i=(n=e[t])[0])==lD.END_GEOMETRY?o=t:i==lD.BEGIN_GEOMETRY&&(n[2]=t,Hf(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var i=t.getColor();n.fillStyle=jN(i||lb)}else n.fillStyle=void 0;if(e){var r=e.getColor();n.strokeStyle=jN(r||pb);var o=e.getLineCap();n.lineCap=void 0!==o?o:cb;var a=e.getLineDash();n.lineDash=a?a.slice():ub;var s=e.getLineDashOffset();n.lineDashOffset=s||0;var h=e.getLineJoin();n.lineJoin=void 0!==h?h:fb;var l=e.getWidth();n.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,n=[lD.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[lD.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!qf(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=h)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[lD.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=$p(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Zp(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(cD);const pD=fD;var dD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gD=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i,r)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return dD(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([lD.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([lD.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([lD.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([lD.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),i=t.getSize(),r=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=r,this.image_=o,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=a[0]*this.imagePixelRatio_,this.originY_=a[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterImageWithText_=e},e}(pD);const mD=gD;var yD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vD=function(t){function e(e,n,i,r){return t.call(this,e,n,i,r)||this}return yD(e,t),e.prototype.drawFlatCoordinates_=function(t,e,n,i){var r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),a=[lD.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n},e.prototype.drawLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([lD.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ub,0],sD);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(aD),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([lD.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],sD);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),h=0,l=0,c=o.length;l<c;++l)h=this.drawFlatCoordinates_(a,h,o[l],s);this.hitDetectionInstructions.push(aD),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(aD),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(aD),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(sD)},e}(pD);const _D=vD;var xD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),wD=function(t){function e(e,n,i,r){return t.call(this,e,n,i,r)||this}return xD(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,n,i){var r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,s=n.length;this.instructions.push(sD),this.hitDetectionInstructions.push(sD);for(var h=0;h<s;++h){var l=n[h],c=this.coordinates.length,u=this.appendFlatLineCoordinates(t,e,l,i,!0,!a),f=[lD.MOVE_TO_LINE_TO,c,u];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(hD),this.hitDetectionInstructions.push(hD)),e=l}return o&&(this.instructions.push(oD),this.hitDetectionInstructions.push(oD)),a&&(this.instructions.push(aD),this.hitDetectionInstructions.push(aD)),e},e.prototype.drawCircle=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([lD.SET_FILL_STYLE,lb]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([lD.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var h=[lD.CIRCLE,s];this.instructions.push(sD,h),this.hitDetectionInstructions.push(sD,h),void 0!==n.fillStyle&&(this.instructions.push(oD),this.hitDetectionInstructions.push(oD)),void 0!==n.strokeStyle&&(this.instructions.push(aD),this.hitDetectionInstructions.push(aD)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([lD.SET_FILL_STYLE,lb]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([lD.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([lD.SET_FILL_STYLE,lb]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([lD.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),h=0,l=0,c=o.length;l<c;++l)h=this.drawFlatCoordinatess_(a,h,o[l],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,i=0,r=n.length;i<r;++i)n[i]=xm(n[i],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(pD);const bD=wD;function MD(t,e,n,i,r){var o,a,s,h,l,c,u,f,p,d=n,g=n,m=0,y=0,v=n;for(o=n;o<i;o+=r){var _=e[o],x=e[o+1];void 0!==h&&(f=_-h,p=x-l,s=Math.sqrt(f*f+p*p),void 0!==c&&(y+=a,Math.acos((c*f+u*p)/(a*s))>t&&(y>m&&(m=y,d=v,g=o),y=0,v=o-r)),a=s,c=f,u=p),h=_,l=x}return(y+=s)>m?[v,o]:[d,g]}var CD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),SD={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ED=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i,r)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return CD(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(n||i)){var o=this.coordinates,a=o.length,s=t.getType(),h=null,l=t.getStride();if("line"!==r.placement||s!=Hg.LINE_STRING&&s!=Hg.MULTI_LINE_STRING&&s!=Hg.POLYGON&&s!=Hg.MULTI_POLYGON){var c=r.overflow?null:[];switch(s){case Hg.POINT:case Hg.MULTI_POINT:h=t.getFlatCoordinates();break;case Hg.LINE_STRING:h=t.getFlatMidpoint();break;case Hg.CIRCLE:h=t.getCenter();break;case Hg.MULTI_LINE_STRING:h=t.getFlatMidpoints(),l=2;break;case Hg.POLYGON:h=t.getFlatInteriorPoint(),r.overflow||c.push(h[2]/this.resolution),l=3;break;case Hg.MULTI_POLYGON:var u=t.getFlatInteriorPoints();for(h=[],b=0,M=u.length;b<M;b+=3)r.overflow||c.push(u[b+2]/this.resolution),h.push(u[b],u[b+1]);if(0===h.length)return;l=2}if((k=this.appendFlatPointCoordinates(h,l))===a)return;if(c&&(k-a)/2!=h.length/l){var f=a/2;c=c.filter((function(t,e){var n=o[2*(f+e)]===h[e*l]&&o[2*(f+e)+1]===h[e*l+1];return n||--f,n}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var p=r.padding;if(p!=mb&&(r.scale[0]<0||r.scale[1]<0)){var d=r.padding[0],g=r.padding[1],m=r.padding[2],y=r.padding[3];r.scale[0]<0&&(g=-g,y=-y),r.scale[1]<0&&(d=-d,m=-m),p=[d,g,m,y]}var v=this.pixelRatio;this.instructions.push([lD.DRAW_IMAGE,a,k,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,p==mb?mb:p.map((function(t){return t*v})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var _=1/v;this.hitDetectionInstructions.push([lD.DRAW_IMAGE,a,k,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,this.declutterImageWithText_,p,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(e)}else{if(!Sd(this.getBufferedMaxExtent(),t.getExtent()))return;var x=void 0;if(h=t.getFlatCoordinates(),s==Hg.LINE_STRING)x=[h.length];else if(s==Hg.MULTI_LINE_STRING)x=t.getEnds();else if(s==Hg.POLYGON)x=t.getEnds().slice(0,1);else if(s==Hg.MULTI_POLYGON){var w=t.getEndss();x=[];for(var b=0,M=w.length;b<M;++b)x.push(w[b][0])}this.beginGeometry(t,e);for(var C=r.textAlign,S=0,E=void 0,T=0,O=x.length;T<O;++T){if(null==C){var P=MD(r.maxAngle,h,S,x[T],l);S=P[0],E=P[1]}else E=x[T];for(b=S;b<E;b+=l)o.push(h[b],h[b+1]);var k=o.length;S=x[T],this.drawChars_(a,k),a=k}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||db,textBaseline:e.textBaseline||gb,scale:e.scale});var o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))},e.prototype.drawChars_=function(t,e){var n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,h=SD[i.textBaseline],l=this.textOffsetY_*s,c=this.text_,u=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([lD.DRAW_CHARS,t,e,h,i.overflow,a,i.maxAngle,s,l,r,u*s,c,o,1]),this.hitDetectionInstructions.push([lD.DRAW_CHARS,t,e,h,i.overflow,a,i.maxAngle,1,l,r,u,c,o,1/s])},e.prototype.setTextStyle=function(t,e){var n,i,r;if(t){var o=t.getFill();o?((i=this.textFillState_)||(i={},this.textFillState_=i),i.fillStyle=jN(o.getColor()||lb)):(i=null,this.textFillState_=i);var a=t.getStroke();if(a){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var s=a.getLineDash(),h=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();r.lineCap=a.getLineCap()||cb,r.lineDash=s?s.slice():ub,r.lineDashOffset=void 0===h?0:h,r.lineJoin=a.getLineJoin()||fb,r.lineWidth=void 0===l?1:l,r.miterLimit=void 0===c?10:c,r.strokeStyle=jN(a.getColor()||pb)}else r=null,this.textStrokeState_=r;n=this.textState_;var u=t.getFont()||hb;bb(u);var f=t.getScaleArray();n.overflow=t.getOverflow(),n.font=u,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||gb,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||mb,n.scale=void 0===f?[1,1]:f;var p=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===m?0:m,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:wp(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+wp(i.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(pD),TD={Circle:bD,Default:pD,Image:mD,LineString:_D,Polygon:bD,Text:ED};const OD=function(){function t(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var i in n){var r=n[i].finish();t[e][i]=r}}return t},t.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);var r=i[e];return void 0===r&&(r=new(0,TD[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r),r},t}(),PD="Circle",kD="Default",ID="Image",AD="LineString",LD="Polygon",RD="Text";function ND(t,e,n,i,r,o,a,s,h,l,c,u){var f=t[e],p=t[e+1],d=0,g=0,m=0,y=0;function v(){d=f,g=p,f=t[e+=i],p=t[e+1],y+=m,m=Math.sqrt((f-d)*(f-d)+(p-g)*(p-g))}do{v()}while(e<n-i&&y+m<o);for(var _=0===m?0:(o-y)/m,x=Dd(d,f,_),w=Dd(g,p,_),b=e-i,M=y,C=o+s*h(l,r,c);e<n-i&&y+m<C;)v();var S,E=Dd(d,f,_=0===m?0:(C-y)/m),T=Dd(g,p,_);if(u){var O=[x,w,E,T];Fg(O,0,4,2,u,O,O),S=O[0]>O[2]}else S=x>E;var P,k=Math.PI,I=[],A=b+i===e;if(m=0,y=M,f=t[e=b],p=t[e+1],A){v(),P=Math.atan2(p-g,f-d),S&&(P+=P>0?-k:k);var L=(E+x)/2,R=(T+w)/2;return I[0]=[L,R,(C-o)/2,P,r],I}for(var N=0,D=r.length;N<D;){v();var F=Math.atan2(p-g,f-d);if(S&&(F+=F>0?-k:k),void 0!==P){var j=F-P;if(j+=j>k?-2*k:j<-k?2*k:0,Math.abs(j)>a)return null}P=F;for(var z=N,B=0;N<D;++N){var U=s*h(l,r[S?D-N-1:N],c);if(e+i<n&&y+m<o+B+U/2)break;B+=U}if(N!==z){var G=S?r.substring(D-z,D-N):r.substring(z,N);L=Dd(d,f,_=0===m?0:(o+B/2-y)/m),R=Dd(g,p,_),I.push([L,R,B/2,F,G]),o+=B}}return I}var DD=[1/0,1/0,-1/0,-1/0],FD=[],jD=[],zD=[],BD=[];function UD(t){return t[3].declutterBox}var GD=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function HD(t,e){return"start"!==e&&"end"!==e||GD.test(t)||(e="start"===e?"left":"right"),SD[e]}var WD=function(){function t(t,e,n,i){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,n,i){var r=t+e+n+i;if(this.labels_[r])return this.labels_[r];var o=i?this.strokeStates[i]:null,a=n?this.fillStates[n]:null,s=this.textStates[e],h=this.pixelRatio,l=[s.scale[0]*h,s.scale[1]*h],c=HD(t,s.textAlign||db),u=i&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],g=function(t,e,n){for(var i=e.length,r=0,o=0;o<i;++o){var a=Cb(t,e[o]);r=Math.max(r,a),n.push(a)}return r}(s.font,f,d),m=function(t){var e=wb[t];if(null==e){if(Up){var n=ib(t),i=Mb(t,"Žg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else _b||((_b=document.createElement("div")).innerHTML="M",_b.style.minHeight="0",_b.style.maxHeight="none",_b.style.height="auto",_b.style.padding="0",_b.style.border="none",_b.style.position="absolute",_b.style.display="block",_b.style.left="-99999px"),_b.style.font=t,document.body.appendChild(_b),e=_b.offsetHeight,document.body.removeChild(_b);wb[t]=e}return e}(s.font),y=g+u,v=[],_=(y+2)*l[0],x=(m*p+u)*l[1],w={width:_<0?Math.floor(_):Math.ceil(_),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:v};1==l[0]&&1==l[1]||v.push("scale",l),v.push("font",s.font),i&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",u),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),(Up?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset))),n&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");var b,M=.5-c,C=c*y+M*u;if(i)for(b=0;b<p;++b)v.push("strokeText",[f[b],C+M*d[b],.5*(u+m)+b*m]);if(n)for(b=0;b<p;++b)v.push("fillText",[f[b],C+M*d[b],.5*(u+m)+b*m]);return this.labels_[r]=w,w},t.prototype.replayTextBackground_=function(t,e,n,i,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,n,i,r,o,a,s,h,l,c,u,f,p,d,g){var m,y=n-(a*=u[0]),v=i-(s*=u[1]),_=r+h>t?t-h:r,x=o+l>e?e-l:o,w=p[3]+_*u[0]+p[1],b=p[0]+x*u[1]+p[2],M=y-p[3],C=v-p[0];return(d||0!==c)&&(FD[0]=M,BD[0]=M,FD[1]=C,jD[1]=C,jD[0]=M+w,zD[0]=jD[0],zD[1]=C+b,BD[1]=zD[1]),0!==c?(Wp(m=Vp([1,0,0,1,0,0],n,i,1,1,c,-n,-i),FD),Wp(m,jD),Wp(m,zD),Wp(m,BD),rd(Math.min(FD[0],jD[0],zD[0],BD[0]),Math.min(FD[1],jD[1],zD[1],BD[1]),Math.max(FD[0],jD[0],zD[0],BD[0]),Math.max(FD[1],jD[1],zD[1],BD[1]),DD)):rd(Math.min(M,M+w),Math.min(C,C+b),Math.max(M,M+w),Math.max(C,C+b),DD),f&&(y=Math.round(y),v=Math.round(v)),{drawImageX:y,drawImageY:v,drawImageW:_,drawImageH:x,originX:h,originY:l,declutterBox:{minX:DD[0],minY:DD[1],maxX:DD[2],maxY:DD[3],value:g},canvasTransform:m,scale:u}},t.prototype.replayImageOrLabel_=function(t,e,n,i,r,o,a){var s=!(!o&&!a),h=i.declutterBox,l=t.canvas,c=a?a[2]*i.scale[0]/2:0;return h.minX-c<=l.width/e&&h.maxX+c>=0&&h.minY-c<=l.height/e&&h.maxY+c>=0&&(s&&this.replayTextBackground_(t,FD,jD,zD,BD,o,a),function(t,e,n,i,r,o,a,s,h,l,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),i.contextInstructions?(t.translate(h,l),t.scale(c[0],c[1]),function(t,e){for(var n=t.contextInstructions,i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}(i,t)):c[0]<0||c[1]<0?(t.translate(h,l),t.scale(c[0],c[1]),t.drawImage(i,r,o,a,s,0,0,a,s)):t.drawImage(i,r,o,a,s,h,l,a*c[0],s*c[1]),t.restore()}(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Wp(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,n,i){var r=this.textStates[e],o=this.createLabel(t,e,i,n),a=this.strokeStates[n],s=this.pixelRatio,h=HD(t,r.textAlign||db),l=SD[r.textBaseline||gb],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:h*(o.width/s-2*r.scale[0])+2*(.5-h)*c,anchorY:l*o.height/s+2*(.5-l)*c}},t.prototype.execute_=function(t,e,n,i,r,o,a,s){var h,l,c;this.pixelCoordinates_&&qf(n,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Dg(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),c=n,(l=this.renderedTransform_)[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5]);for(var u,f,p,d,g,m,y,v,_,x,w,b,M,C,S,E,T=0,O=i.length,P=0,k=0,I=0,A=null,L=null,R=this.coordinateCache_,N=this.viewRotation_,D=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,F={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},j=this.instructions!=i||this.overlaps?0:200;T<O;){var z=i[T];switch(z[0]){case lD.BEGIN_GEOMETRY:M=z[1],E=z[3],M.getGeometry()?void 0===a||Sd(a,E.getExtent())?++T:T=z[2]+1:T=z[2];break;case lD.BEGIN_PATH:k>j&&(this.fill_(t),k=0),I>j&&(t.stroke(),I=0),k||I||(t.beginPath(),d=NaN,g=NaN),++T;break;case lD.CIRCLE:var B=h[P=z[1]],U=h[P+1],G=h[P+2]-B,H=h[P+3]-U,W=Math.sqrt(G*G+H*H);t.moveTo(B+W,U),t.arc(B,U,W,0,2*Math.PI,!0),++T;break;case lD.CLOSE_PATH:t.closePath(),++T;break;case lD.CUSTOM:P=z[1],u=z[2];var V=z[3],q=z[4],Y=6==z.length?z[5]:void 0;F.geometry=V,F.feature=M,T in R||(R[T]=[]);var X=R[T];Y?Y(h,P,u,2,X):(X[0]=h[P],X[1]=h[P+1],X.length=2),q(X,F),++T;break;case lD.DRAW_IMAGE:P=z[1],u=z[2],v=z[3],f=z[4],p=z[5];var K=z[6],Z=z[7],$=z[8],Q=z[9],J=z[10],tt=z[11],et=z[12],nt=z[13],it=z[14];if(!v&&z.length>=19){_=z[18],x=z[19],w=z[20],b=z[21];var rt=this.drawLabelWithPointPlacement_(_,x,w,b);v=rt.label,z[3]=v;var ot=z[22];f=(rt.anchorX-ot)*this.pixelRatio,z[4]=f;var at=z[23];p=(rt.anchorY-at)*this.pixelRatio,z[5]=p,K=v.height,z[6]=K,nt=v.width,z[13]=nt}var st=void 0;z.length>24&&(st=z[24]);var ht=void 0,lt=void 0,ct=void 0;z.length>16?(ht=z[15],lt=z[16],ct=z[17]):(ht=mb,lt=!1,ct=!1),J&&D?tt+=N:J||D||(tt-=N);for(var ut=0;P<u;P+=2)if(!(st&&st[ut++]<nt/this.pixelRatio)){var ft=[t,e,v,zt=this.calculateImageOrLabelDimensions_(v.width,v.height,h[P],h[P+1],nt,K,f,p,$,Q,tt,et,r,ht,lt||ct,M),Z,lt?A:null,ct?L:null],pt=void 0,dt=void 0;if(s&&it){var gt=u-P;if(!it[gt]){it[gt]=ft;continue}if(pt=it[gt],delete it[gt],dt=UD(pt),s.collides(dt))continue}s&&s.collides(zt.declutterBox)||(pt&&(s&&s.insert(dt),this.replayImageOrLabel_.apply(this,pt)),s&&s.insert(zt.declutterBox),this.replayImageOrLabel_.apply(this,ft))}++T;break;case lD.DRAW_CHARS:var mt=z[1],yt=z[2],vt=z[3],_t=z[4];b=z[5];var xt=z[6],wt=z[7],bt=z[8];w=z[9];var Mt=z[10];_=z[11],x=z[12];var Ct=[z[13],z[13]],St=this.textStates[x],Et=St.font,Tt=[St.scale[0]*wt,St.scale[1]*wt],Ot=void 0;Et in this.widths_?Ot=this.widths_[Et]:(Ot={},this.widths_[Et]=Ot);var Pt=Rm(h,mt,yt,2),kt=Math.abs(Tt[0])*Sb(Et,_,Ot);if(_t||kt<=Pt){var It=this.textStates[x].textAlign,At=ND(h,mt,yt,2,_,(Pt-kt)*SD[It],xt,Math.abs(Tt[0]),Sb,Et,Ot,D?0:this.viewRotation_);t:if(At){var Lt=[],Rt=void 0,Nt=void 0,Dt=void 0,Ft=void 0,jt=void 0;if(w)for(Rt=0,Nt=At.length;Rt<Nt;++Rt){Dt=(jt=At[Rt])[4],Ft=this.createLabel(Dt,x,"",w),f=jt[2]+(Tt[0]<0?-Mt:Mt),p=vt*Ft.height+2*(.5-vt)*Mt*Tt[1]/Tt[0]-bt;var zt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,jt[0],jt[1],Ft.width,Ft.height,f,p,0,0,jt[3],Ct,!1,mb,!1,M);if(s&&s.collides(zt.declutterBox))break t;Lt.push([t,e,Ft,zt,1,null,null])}if(b)for(Rt=0,Nt=At.length;Rt<Nt;++Rt){if(Dt=(jt=At[Rt])[4],Ft=this.createLabel(Dt,x,b,""),f=jt[2],p=vt*Ft.height-bt,zt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,jt[0],jt[1],Ft.width,Ft.height,f,p,0,0,jt[3],Ct,!1,mb,!1,M),s&&s.collides(zt.declutterBox))break t;Lt.push([t,e,Ft,zt,1,null,null])}s&&s.load(Lt.map(UD));for(var Bt=0,Ut=Lt.length;Bt<Ut;++Bt)this.replayImageOrLabel_.apply(this,Lt[Bt])}}++T;break;case lD.END_GEOMETRY:if(void 0!==o){var Gt=o(M=z[1],E);if(Gt)return Gt}++T;break;case lD.FILL:j?k++:this.fill_(t),++T;break;case lD.MOVE_TO_LINE_TO:for(P=z[1],u=z[2],C=h[P],y=(S=h[P+1])+.5|0,(m=C+.5|0)===d&&y===g||(t.moveTo(C,S),d=m,g=y),P+=2;P<u;P+=2)m=(C=h[P])+.5|0,y=(S=h[P+1])+.5|0,P!=u-2&&m===d&&y===g||(t.lineTo(C,S),d=m,g=y);++T;break;case lD.SET_FILL_STYLE:A=z,this.alignFill_=z[2],k&&(this.fill_(t),k=0,I&&(t.stroke(),I=0)),t.fillStyle=z[1],++T;break;case lD.SET_STROKE_STYLE:L=z,I&&(t.stroke(),I=0),this.setStrokeStyle_(t,z),++T;break;case lD.STROKE:j?I++:t.stroke(),++T;break;default:++T}}k&&this.fill_(t),I&&t.stroke()},t.prototype.execute=function(t,e,n,i,r,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,r)},t}();const VD=WD;var qD=[LD,PD,AD,ID,RD,kD],YD=function(){function t(t,e,n,i,r,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}return t.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);var i=t[e];for(var r in i){var o=i[r];n[r]=new VD(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],i=0,r=t.length;i<r;++i)if(t[i]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o){var a=2*(i=Math.round(i))+1,s=Vp(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=ob(a,a));var l,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(cd(l=[1/0,1/0,-1/0,-1/0],t),Zp(l,e*(this.renderBuffer_+i),l));var u,f=function(t){if(void 0!==XD[t])return XD[t];for(var e=2*t+1,n=t*t,i=new Array(n+1),r=0;r<=t;++r)for(var o=0;o<=t;++o){var a=r*r+o*o;if(a>n)break;var s=i[a];s||(s=[],i[a]=s),s.push(4*((t+r)*e+(t+o))+3),r>0&&s.push(4*((t-r)*e+(t+o))+3),o>0&&(s.push(4*((t+r)*e+(t-o))+3),r>0&&s.push(4*((t-r)*e+(t-o))+3))}for(var h=[],l=(r=0,i.length);r<l;++r)i[r]&&h.push.apply(h,i[r]);return XD[t]=h,h}(i);function p(t,e){for(var n=c.getImageData(0,0,a,a).data,s=0,h=f.length;s<h;s++)if(n[f[s]]>0){if(!o||u!==ID&&u!==RD||-1!==o.indexOf(t)){var l=(f[s]-3)/4,p=i-l%a,d=i-(l/a|0),g=r(t,e,p*p+d*d);if(g)return g}c.clearRect(0,0,a,a);break}}var d,g,m,y,v,_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(Bf),d=_.length-1;d>=0;--d){var x=_[d].toString();for(m=this.executorsByZIndex_[x],g=qD.length-1;g>=0;--g)if(void 0!==(y=m[u=qD[g]])&&(v=y.executeHitDetection(c,s,n,p,l)))return v}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],i=e[1],r=e[2],o=e[3],a=[n,i,n,o,r,o,r,i];return Dg(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return tp(this.executorsByZIndex_)},t.prototype.execute=function(t,e,n,i,r,o,a){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort(Bf),this.maxExtent_&&(t.save(),this.clip(t,n));var h,l,c,u,f,p,d=o||qD;for(a&&s.reverse(),h=0,l=s.length;h<l;++h){var g=s[h].toString();for(f=this.executorsByZIndex_[g],c=0,u=d.length;c<u;++c)void 0!==(p=f[d[c]])&&p.execute(t,e,n,i,r,a)}this.maxExtent_&&t.restore()},t}(),XD={};const KD=YD;var ZD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$D=function(t){function e(e,n,i,r,o,a,s){var h=t.call(this)||this;return h.context_=e,h.pixelRatio_=n,h.extent_=i,h.transform_=r,h.viewRotation_=o,h.squaredTolerance_=a,h.userTransform_=s,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=[1,0,0,1,0,0],h}return ZD(e,t),e.prototype.drawImages_=function(t,e,n,i){if(this.image_){var r=Dg(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,c=r.length;l<c;l+=2){var u=r[l]-this.imageAnchorX_,f=r[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=u+this.imageAnchorX_,d=f+this.imageAnchorY_;Vp(a,p,d,1,1,h,-p,-d),o.setTransform.apply(o,a),o.translate(p,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,n,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Dg(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=i){var s=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){var l=Vp(this.tmpLocalTransform_,s,h,1,1,a,-s,-h);o.setTransform.apply(o,l),o.translate(s,h),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,s,h),this.textFillState_&&o.fillText(this.text_,s,h)}}},e.prototype.moveToLineTo_=function(t,e,n,i,r){var o=this.context_,a=Dg(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var h=2;h<s;h+=2)o.lineTo(a[h],a[h+1]);return r&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e},e.prototype.drawCircle=function(t){if(Sd(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var i=t.getFlatCoordinates();if(i){var r=t.getStride();return Dg(i,0,i.length,r,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Hg.POINT:this.drawPoint(t);break;case Hg.LINE_STRING:this.drawLineString(t);break;case Hg.POLYGON:this.drawPolygon(t);break;case Hg.MULTI_POINT:this.drawMultiPoint(t);break;case Hg.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Hg.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Hg.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Hg.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Sd(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Sd(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Sd(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,h=o.length;s<h;++s)r=this.moveToLineTo_(i,r,o[s],a,!1);n.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Sd(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Sd(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),i=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=r.length;a<s;++a){var h=r[a];i=this.drawRings_(n,i,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(qf(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:db;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var n=this;if(t){var i=t.getColor();this.fillState_={fillStyle:jN(i||lb)}}else this.fillState_=null;if(e){var r=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),h=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),u=a||ub;this.strokeState_={lineCap:void 0!==o?o:cb,lineDash:1===this.pixelRatio_?u:u.map((function(t){return t*n.pixelRatio_})),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==h?h:fb,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:jN(r||pb)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var n=t.getAnchor(),i=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*this.pixelRatio_,this.imageAnchorY_=n[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:jN(n||lb)}}else this.textFillState_=null;var i=t.getStroke();if(i){var r=i.getColor(),o=i.getLineCap(),a=i.getLineDash(),s=i.getLineDashOffset(),h=i.getLineJoin(),l=i.getWidth(),c=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:cb,lineDash:a||ub,lineDashOffset:s||0,lineJoin:void 0!==h?h:fb,lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:jN(r||pb)}}else this.textStrokeState_=null;var u=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),m=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==u?u:hb,textAlign:void 0!==v?v:db,textBaseline:void 0!==_?_:gb},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=[this.pixelRatio_*m[0],this.pixelRatio_*m[1]]}else this.text_=""},e}(cD);const QD=$D,JD="fraction",tF="pixels",eF="bottom-left",nF="bottom-right",iF="top-left",rF="top-right";var oF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),aF=null,sF=function(t){function e(e,n,i,r,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==r&&(s.image_.crossOrigin=r),s.canvas_={},s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=i,s.src_=n,s.tainted_,s}return oF(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){aF||(aF=ob(1,1)),aF.drawImage(this.image_,0,0);try{aF.getImageData(0,0,1,1),this.tainted_=!1}catch(t){aF=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(op)},e.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],n=ob(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=FS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var n=e.getContext("2d");if(n.scale(t,t),n.drawImage(this.image_,0,0),n.globalCompositeOperation="multiply","multiply"===n.globalCompositeOperation||this.isTainted_())n.fillStyle=vw(this.color_),n.fillRect(0,0,e.width/t,e.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.image_,0,0);else{for(var i=n.getImageData(0,0,e.width,e.height),r=i.data,o=this.color_[0]/255,a=this.color_[1]/255,s=this.color_[2]/255,h=this.color_[3],l=0,c=r.length;l<c;l+=4)r[l]*=o,r[l+1]*=a,r[l+2]*=s,r[l+3]*=h;n.putImageData(i,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(rp),hF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),lF=function(t){function e(e){var n=this,i=e||{},r=void 0!==i.opacity?i.opacity:1,o=void 0!==i.rotation?i.rotation:0,a=void 0!==i.scale?i.scale:1,s=void 0!==i.rotateWithView&&i.rotateWithView;(n=t.call(this,{opacity:r,rotation:o,scale:a,displacement:void 0!==i.displacement?i.displacement:[0,0],rotateWithView:s})||this).anchor_=void 0!==i.anchor?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:iF,n.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:JD,n.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:JD,n.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var h=void 0!==i.img?i.img:null,l=void 0!==i.imgSize?i.imgSize:null,c=i.src;Op(!(void 0!==c&&h),4),Op(!h||h&&l,5),void 0!==c&&0!==c.length||!h||(c=h.src||wp(h)),Op(void 0!==c&&c.length>0,6);var u=void 0!==i.src?0:2;return n.color_=void 0!==i.color?xw(i.color):null,n.iconImage_=function(t,e,n,i,r,o){var a=Sw.get(e,i,o);return a||(a=new sF(t,e,n,i,r,o),Sw.set(e,i,o,a)),a}(h,c,l,n.crossOrigin_,u,n.color_),n.offset_=void 0!==i.offset?i.offset:[0,0],n.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:iF,n.origin_=null,n.size_=void 0!==i.size?i.size:null,n}return hF(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if(this.anchorXUnits_==JD||this.anchorYUnits_==JD){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==JD&&(t[0]*=e[0]),this.anchorYUnits_==JD&&(t[1]*=e[1])}if(this.anchorOrigin_!=iF){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=rF&&this.anchorOrigin_!=nF||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=eF&&this.anchorOrigin_!=nF||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var n=this.getDisplacement();return[t[0]-n[0],t[1]+n[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=iF){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=rF&&this.offsetOrigin_!=nF||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=eF&&this.offsetOrigin_!=nF||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(op,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(op,t)},e}(FN);const cF=lF;var uF=.5,fF={Point:function(t,e,n,i,r){var o,a=n.getImage(),s=n.getText();if(r&&(t=r,o=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var h=t.getBuilder(n.getZIndex(),ID);h.setImageStyle(a,o),h.drawPoint(e,i)}if(s&&s.getText()){var l=t.getBuilder(n.getZIndex(),RD);l.setTextStyle(s,o),l.drawText(e,i)}},LineString:function(t,e,n,i,r){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),AD);a.setFillStrokeStyle(null,o),a.drawLineString(e,i)}var s=n.getText();if(s&&s.getText()){var h=(r||t).getBuilder(n.getZIndex(),RD);h.setTextStyle(s),h.drawText(e,i)}},Polygon:function(t,e,n,i,r){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),LD);s.setFillStrokeStyle(o,a),s.drawPolygon(e,i)}var h=n.getText();if(h&&h.getText()){var l=(r||t).getBuilder(n.getZIndex(),RD);l.setTextStyle(h),l.drawText(e,i)}},MultiPoint:function(t,e,n,i,r){var o,a=n.getImage(),s=n.getText();if(r&&(t=r,o=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var h=t.getBuilder(n.getZIndex(),ID);h.setImageStyle(a,o),h.drawMultiPoint(e,i)}if(s&&s.getText()){var l=(r||t).getBuilder(n.getZIndex(),RD);l.setTextStyle(s,o),l.drawText(e,i)}},MultiLineString:function(t,e,n,i,r){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),AD);a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i)}var s=n.getText();if(s&&s.getText()){var h=(r||t).getBuilder(n.getZIndex(),RD);h.setTextStyle(s),h.drawText(e,i)}},MultiPolygon:function(t,e,n,i,r){var o=n.getFill(),a=n.getStroke();if(a||o){var s=t.getBuilder(n.getZIndex(),LD);s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,i)}var h=n.getText();if(h&&h.getText()){var l=(r||t).getBuilder(n.getZIndex(),RD);l.setTextStyle(h),l.drawText(e,i)}},GeometryCollection:function(t,e,n,i,r){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o)(0,fF[s[o].getType()])(t,s[o],n,i,r)},Circle:function(t,e,n,i,r){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),PD);s.setFillStrokeStyle(o,a),s.drawCircle(e,i)}var h=n.getText();if(h&&h.getText()){var l=(r||t).getBuilder(n.getZIndex(),RD);l.setTextStyle(h),l.drawText(e,i)}}};function pF(t,e){return parseInt(wp(t),10)-parseInt(wp(e),10)}function dF(t,e){return.5*t/e}function gF(t,e,n,i,r,o,a){var s=!1,h=n.getImage();if(h){var l=h.getImageState();2==l||3==l?h.unlistenImageChange(r):(0==l&&h.load(),l=h.getImageState(),h.listenImageChange(r),s=!0)}return function(t,e,n,i,r,o){var a=n.getGeometryFunction()(e);if(a){var s=a.simplifyTransformed(i,r);n.getRenderer()?mF(t,s,n,e):(0,fF[s.getType()])(t,s,n,e,o)}}(t,e,n,i,o,a),s}function mF(t,e,n,i){if(e.getType()!=Hg.GEOMETRY_COLLECTION)t.getBuilder(n.getZIndex(),kD).drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer());else for(var r=e.getGeometries(),o=0,a=r.length;o<a;++o)mF(t,r[o],n,i)}var yF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vF=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=[1/0,1/0,-1/0,-1/0],n.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return yF(e,t),e.prototype.renderWorlds=function(t,e,n){var i=e.extent,r=e.viewState,o=r.center,a=r.resolution,s=r.projection,h=r.rotation,l=s.getExtent(),c=this.getLayer().getSource(),u=e.pixelRatio,f=e.viewHints,p=!(f[0]||f[1]),d=this.context,g=Math.round(e.size[0]*u),m=Math.round(e.size[1]*u),y=c.getWrapX()&&s.canWrapX(),v=y?Cd(l):null,_=y?Math.ceil((i[2]-l[2])/v)+1:1,x=y?Math.floor((i[0]-l[0])/v):0;do{var w=this.getRenderTransform(o,a,h,u,g,m,x*v);t.execute(d,1,w,h,p,void 0,n)}while(++x<_)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];!function(t,e,n){!function(t,e,n,i,r,o,a){t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=a}(t,e,0,0,n,0,0)}(this.pixelTransform,1/n,1/n),qp(this.inversePixelTransform,this.pixelTransform);var r=Yp(this.pixelTransform);this.useContainer(e,r,i.opacity,this.getBackground(t));var o=this.context,a=o.canvas,s=this.replayGroup_,h=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!h||h.isEmpty()))return null;var l=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);a.width!=l||a.height!=c?(a.width=l,a.height=c,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,l,c),this.preRender(o,t);var u=t.viewState,f=(u.projection,!1),p=!0;if(i.extent&&this.clipping){var d=Lg(i.extent);(f=(p=Sd(d,t.extent))&&!td(d,t.extent))&&this.clipUnrotated(o,t,d)}p&&this.renderWorlds(s,t),f&&o.restore(),this.postRender(o,t);var g=rb(i.opacity),m=this.container;return g!==m.style.opacity&&(m.style.opacity=g),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];Wp(this.pixelTransform,n);var i=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,s=this.wrappedRenderedExtent_,h=this.getLayer(),l=[],c=n[0]*uF,u=n[1]*uF;l.push(this.getRenderTransform(i,r,o,uF,c,u,0).slice());var f=h.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!td(p,s)){for(var d=s[0],g=Cd(p),m=0,y=void 0;d<p[0];)y=g*--m,l.push(this.getRenderTransform(i,r,o,uF,c,u,y).slice()),d+=g;for(m=0,d=s[2];d>p[2];)y=g*++m,l.push(this.getRenderTransform(i,r,o,uF,c,u,y).slice()),d-=g}this.hitDetectionImageData_=function(t,e,n,i,r,o,a){var s=ob(t[0]*uF,t[1]*uF);s.imageSmoothingEnabled=!1;for(var h=s.canvas,l=new QD(s,uF,r,null,a),c=n.length,u=Math.floor(16777215/c),f={},p=1;p<=c;++p){var d=n[p-1],g=d.getStyleFunction()||i;if(i){var m=g(d,o);if(m){Array.isArray(m)||(m=[m]);for(var y="#"+("000000"+(p*u).toString(16)).slice(-6),v=0,_=m.length;v<_;++v){var x=m[v],w=x.getGeometryFunction()(d);if(w&&Sd(r,w.getExtent())){var b=x.clone(),M=b.getFill();M&&M.setColor(y);var C=b.getStroke();C&&(C.setColor(y),C.setLineDash(null)),b.setText(void 0);var S=x.getImage();if(S&&0!==S.getOpacity()){var E=S.getImageSize();if(!E)continue;var T=ob(E[0],E[1],void 0,{alpha:!1}),O=T.canvas;T.fillStyle=y,T.fillRect(0,0,O.width,O.height),b.setImage(new cF({img:O,imgSize:E,anchor:S.getAnchor(),anchorXUnits:tF,anchorYUnits:tF,offset:S.getOrigin(),opacity:1,size:S.getSize(),scale:S.getScale(),rotation:S.getRotation(),rotateWithView:S.getRotateWithView()}))}var P=b.getZIndex()||0;(A=f[P])||(A={},f[P]=A,A[Hg.POLYGON]=[],A[Hg.CIRCLE]=[],A[Hg.LINE_STRING]=[],A[Hg.POINT]=[]),A[w.getType().replace("Multi","")].push(w,b)}}}}}for(var k=Object.keys(f).map(Number).sort(Bf),I=(p=0,k.length);p<I;++p){var A=f[k[p]];for(var L in A){var R=A[L];for(v=0,_=R.length;v<_;v+=2){l.setStyle(R[v+1]);for(var N=0,D=e.length;N<D;++N)l.setTransform(e[N]),l.drawGeometry(R[v])}}}return s.getImageData(0,0,h.width,h.height)}(n,l,this.renderedFeatures_,h.getStyleFunction(),s,r,o)}e(function(t,e,n){var i=[];if(n){var r=Math.floor(Math.round(t[0])*uF),o=Math.floor(Math.round(t[1])*uF),a=4*(Pd(r,0,n.width-1)+Pd(o,0,n.height-1)*n.width),s=n.data[a],h=n.data[a+1],l=n.data[a+2]+256*(h+256*s),c=Math.floor(16777215/e.length);l&&l%c==0&&i.push(e[l/c-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=this;if(this.replayGroup_){var a,s=e.viewState.resolution,h=e.viewState.rotation,l=this.getLayer(),c={},u=function(t,e,n){var o=wp(t),a=c[o];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return c[o]=!0,r.splice(r.lastIndexOf(a),1),i(t,l,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return c[o]=!0,i(t,l,e);r.push(c[o]={feature:t,layer:l,geometry:e,distanceSq:n,callback:i})}},f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(i){return a=i.forEachFeatureAtCoordinate(t,s,h,n,u,i===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),a}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource();if(!n)return!1;var i=t.viewHints[0],r=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&i||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,h=t.viewState,l=h.projection,c=h.resolution,u=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=pF);var g=h.center.slice(),m=Zp(s,p*c),y=m.slice(),v=[m.slice()],_=l.getExtent();if(n.getWrapX()&&l.canWrapX()&&!td(_,t.extent)){var x=Cd(_),w=Math.max(Cd(m)/2,x);m[0]=_[0]-w,m[2]=_[2]+w,cg(g,l);var b=function(t,e){var n=e.getExtent(),i=yd(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){var r=Cd(n),o=Math.floor((i[0]-n[0])/r)*r;t[0]-=o,t[2]-=o}return t}(v[0],l);b[0]<_[0]&&b[2]<_[2]?v.push([b[0]+x,b[1],b[2]+x,b[3]]):b[0]>_[0]&&b[2]>_[2]&&v.push([b[0]-x,b[1],b[2]-x,b[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&td(this.wrappedRenderedExtent_,m))return qf(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var M,C=new OD(dF(c,u),m,c,u);this.getLayer().getDeclutter()&&(M=new OD(dF(c,u),m,c,u));var S,E=Pg();if(E){for(var T=0,O=v.length;T<O;++T){var P=Ag(v[T]);n.loadFeatures(P,Rg(c),E)}S=wg(E,l)}else for(T=0,O=v.length;T<O;++T)n.loadFeatures(v[T],c,l);var k=function(t,e){var n=dF(t,e);return n*n}(c,u),I=function(t){var n,i=t.getStyleFunction()||e.getStyleFunction();if(i&&(n=i(t,c)),n){var r=this.renderFeature(t,k,n,C,S,M);this.dirty_=this.dirty_||r}}.bind(this),A=Ag(m),L=n.getFeaturesInExtent(A);for(d&&L.sort(d),T=0,O=L.length;T<O;++T)I(L[T]);this.renderedFeatures_=L;var R=C.finish(),N=new KD(m,c,u,n.getOverlaps(),R,e.getRenderBuffer());return M&&(this.declutterExecutorGroup=new KD(m,c,u,n.getOverlaps(),M.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=g,this.renderedProjection_=l,this.replayGroup_=N,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,i,r,o){if(!n)return!1;var a=!1;if(Array.isArray(n))for(var s=0,h=n.length;s<h;++s)a=gF(i,t,n[s],e,this.boundHandleStyleImageChange_,r,o)||a;else a=gF(i,t,n,e,this.boundHandleStyleImageChange_,r,o);return a},e}($S);const _F=vF;var xF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const wF=function(t){function e(e){return t.call(this,e)||this}return xF(e,t),e.prototype.createRenderer=function(){return new _F(this)},e}(iD);var bF=function(){function t(t){this.rbush_=new DN(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[wp(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++){var o=t[i],a=e[i],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[i]=s,this.items_[wp(a)]=s}this.rbush_.load(n)},t.prototype.remove=function(t){var e=wp(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[wp(e)];hd([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var n,i=0,r=t.length;i<r;i++)if(n=e(t[i]))return n;return n},t.prototype.isEmpty=function(){return tp(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return rd(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}();const MF=bF,CF="addfeature",SF="removefeature";function EF(t,e){return[[-1/0,-1/0,1/0,1/0]]}function TF(t,e){return function(n,i,r,o,a){var s=this;!function(t,e,n,i,r,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,i,r):t,!0),e.getType()==Zg&&(s.responseType="arraybuffer"),s.withCredentials=false,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var i=e.getType(),h=void 0;i==$g||i==Qg?h=s.responseText:"xml"==i?(h=s.responseXML)||(h=(new DOMParser).parseFromString(s.responseText,"application/xml")):i==Zg&&(h=s.response),h?o(e.readFeatures(h,{extent:n,featureProjection:r}),e.readProjection(h)):a()}else a()},s.onerror=a,s.send()}(t,e,n,i,r,(function(t,e){s.addFeatures(t),void 0!==o&&o(t)}),a||Zf)}}var OF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),PF=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.feature=n,r.features=i,r}return OF(e,t),e}(Ff),kF=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:Uw,wrapX:void 0===i.wrapX||i.wrapX})||this).on,n.once,n.un,n.loader_=Zf,n.format_=i.format,n.overlaps_=void 0===i.overlaps||i.overlaps,n.url_=i.url,void 0!==i.loader?n.loader_=i.loader:void 0!==n.url_&&(Op(n.format_,7),n.loader_=TF(n.url_,n.format_)),n.strategy_=void 0!==i.strategy?i.strategy:EF;var r,o,a=void 0===i.useSpatialIndex||i.useSpatialIndex;return n.featuresRtree_=a?new MF:null,n.loadedExtentsRtree_=new MF,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(i.features)?o=i.features:i.features&&(o=(r=i.features).getArray()),a||void 0!==r||(r=new Nb(o)),void 0!==o&&n.addFeaturesInternal(o),void 0!==r&&n.bindFeaturesCollection_(r),n}return OF(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=wp(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new PF(CF,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[fp(e,op,this.handleFeatureChange_,this),fp(e,jf,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i&&(i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e),n&&(Op(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],i=[],r=0,o=t.length;r<o;r++){var a=wp(h=t[r]);this.addToIndex_(a,h)&&n.push(h)}r=0;for(var s=n.length;r<s;r++){var h;a=wp(h=n[r]),this.setupChangeEvents_(a,h);var l=h.getGeometry();if(l){var c=l.getExtent();e.push(c),i.push(h)}else this.nullGeometryFeatures_[a]=h}this.featuresRtree_&&this.featuresRtree_.load(e,i),r=0;for(var u=n.length;r<u;r++)this.dispatchEvent(new PF(CF,n[r]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(CF,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(SF,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(Pb,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(kb,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(dp);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var n=function(t){this.removeFeatureInternal(t)}.bind(this);for(var i in this.featuresRtree_.forEach(n),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var r=new PF("clear");this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var i=e(n);if(i)return i}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),tp(this.nullGeometryFeatures_)||Wf(t,Jf(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],i=t[1],r=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],h=e||Xf;return this.featuresRtree_.forEachInExtent(s,(function(t){if(h(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(n,i,o,a))<l){r=t;var c=Math.sqrt(a);s[0]=n-c,s[1]=i-c,s[2]=n+c,s[3]=i+c}}})),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=wp(e),i=e.getGeometry();if(i){var r=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new PF("changefeature",e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:wp(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&tp(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){for(var i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n),o=function(t,o){var s=r[t],h=i.forEachInExtent(s,(function(t){return td(t.extent,s)}));h||(++a.loadingExtentsCount_,a.dispatchEvent(new PF("featuresloadstart")),a.loader_.call(a,s,e,n,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new PF("featuresloadend",void 0,t))}.bind(a),function(){--this.loadingExtentsCount_,this.dispatchEvent(new PF("featuresloaderror"))}.bind(a)),i.insert(s,{extent:s.slice()}))},a=this,s=0,h=r.length;s<h;++s)o(s);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(hd(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){if(t){var e=wp(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var e=wp(t),n=this.featureChangeKeys_[e];if(n){n.forEach(dp),delete this.featureChangeKeys_[e];var i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new PF(SF,t)),t}},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Op(this.format_,7),this.url_=t,this.setLoader(TF(t,this.format_))},e}(PS);const IF=kF;class AF extends $C{constructor(t,e){super(e),this.source=t}addFeature(t){null!=t?this.source.addFeature(t):console.log("null feature")}addFeatures(t){t.length>0&&this.source.addFeatures(t)}removeFeature(t){this.hasFeature(t)&&this.source.removeFeature(t)}hasFeature(t){return t&&this.source.hasFeature(t)}getFeatures(){return this.source.getFeatures()}getFeaturesAtCoordinate(t){return this.source.getFeaturesAtCoordinate(t)}clear(){this.source.clear()}}const LF=(t,e,n,i)=>{let r=null;if(t)try{const o=function(t,e){var n=Vf(t.Contents.Layer,(function(t,n,i){return t.Identifier==e.layer}));if(null===n)return null;var i,r=t.Contents.TileMatrixSet;(i=n.TileMatrixSetLink.length>1?Yf(n.TileMatrixSetLink,"projection"in e?function(t,n,i){var o=Vf(r,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=gg(o),s=gg(e.projection);return a&&s?xg(a,s):o==e.projection}:function(t,n,i){return t.TileMatrixSet==e.matrixSet}):0)<0&&(i=0);var o=n.TileMatrixSetLink[i].TileMatrixSet,a=n.TileMatrixSetLink[i].TileMatrixSetLimits,s=n.Format[0];"format"in e&&(s=e.format),(i=Yf(n.Style,(function(t,n,i){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(i=0);var h=n.Style[i].Identifier,l={};"Dimension"in n&&n.Dimension.forEach((function(t,e,n){var i=t.Identifier,r=t.Default;void 0===r&&(r=t.Value[0]),l[i]=r}));var c,u=Vf(t.Contents.TileMatrixSet,(function(t,e,n){return t.Identifier==o})),f=u.SupportedCRS;if(f&&(c=gg(f)),"projection"in e){var p=gg(e.projection);p&&(c&&!xg(p,c)||(c=p))}var d=!1,g="ne"==c.getAxisOrientation().substr(0,2),m=u.TileMatrix[0],y={MinTileCol:0,MinTileRow:0,MaxTileCol:m.MatrixWidth-1,MaxTileRow:m.MatrixHeight-1};if(a){y=a[a.length-1];var v=Vf(u.TileMatrix,(function(t){return t.Identifier===y.TileMatrix||u.Identifier+":"+t.Identifier===y.TileMatrix}));v&&(m=v)}var _=28e-5*m.ScaleDenominator/c.getMetersPerUnit(),x=g?[m.TopLeftCorner[1],m.TopLeftCorner[0]]:m.TopLeftCorner,w=m.TileWidth*_,b=m.TileHeight*_,M=u.BoundingBox,C=[x[0]+w*y.MinTileCol,x[1]-b*(1+y.MaxTileRow),x[0]+w*(1+y.MaxTileCol),x[1]-b*y.MinTileRow];if(void 0!==M&&!td(M,C)){var S=n.WGS84BoundingBox,E=gg("EPSG:4326").getExtent();if(C=M,S)d=S[0]===E[0]&&S[2]===E[2];else{var T=Cg(M,u.SupportedCRS,"EPSG:4326");d=T[0]-1e-10<=E[0]&&T[2]+1e-10>=E[2]}}var O=function(t,e,n){var i=[],r=[],o=[],a=[],s=[],h=void 0!==n?n:[],l=gg(t.SupportedCRS),c=l.getMetersPerUnit(),u="ne"==l.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(h.length>0)||Vf(h,(function(n){return e.Identifier==n.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===n.TileMatrix}))){r.push(e.Identifier);var n=28e-5*e.ScaleDenominator/c,l=e.TileWidth,f=e.TileHeight;u?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),i.push(n),a.push(l==f?l:[l,f]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new IN({extent:e,origins:o,resolutions:i,matrixIds:r,tileSizes:a,sizes:s})}(u,C,a),P=[],k=e.requestEncoding;if(k=void 0!==k?k:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var I=t.OperationsMetadata.GetTile.DCP.HTTP.Get,A=0,L=I.length;A<L;++A)if(I[A].Constraint){var R=Vf(I[A].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===k&&(k=R[0]),k!==PN)break;Uf(R,PN)&&P.push(I[A].href)}else I[A].href&&(k=PN,P.push(I[A].href));return 0===P.length&&(k="REST",n.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,P.push(t.template))}))),{urls:P,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:k,tileGrid:O,style:h,dimensions:l,wrapX:d,crossOrigin:e.crossOrigin}}(t,{layer:e,matrixSet:i,style:n});r=new NN(o)}catch(t){console.warn(t)}return r};class RF extends $C{constructor(t,e){super(e),this.source=t}updateLayer(t,e,n,i){this.source=LF(t,e,n,i),this.layer.setSource(this.source)}}const NF={brt:()=>{const t=3440.64/gg("EPSG:28992").getMetersPerUnit(),e=new Array(15),n=new Array(e.length);for(let i=0;i<e.length;++i)n[i]=i,e[i]=t/Math.pow(2,i);const i=[-285401.92,903401.92],r=256*t,o=[i[0],i[1]-r,i[0]+r,i[1]],a=new AN({resolutions:e,matrixIds:n,extent:o}),s=new NN({url:"https://service.pdok.nl/brt/achtergrondkaart/wmts/v2_0",layer:"standaard",matrixSet:"EPSG:28992",format:"image/png",projection:"EPSG:28992",tileGrid:a,style:"default"}),h=new ON({extent:o,source:s});return new $C(h)},osm:()=>{const t=new ON({source:new _N});return new $C(t)},vector:t=>{const e=new IF,n=new wF({source:e,style:t});return new AF(e,n)},VectorLayer:AF,wms:(t,e)=>{const n=new HS({url:t,params:{LAYERS:e}}),i=new nE({source:n});return new aE(n,i)},WMSLayer:aE,wmts:(t,e,n,i)=>{const r=LF(t,e,n,i),o=new ON({source:r});return new RF(r,o)},WMTSLayer:RF};var DF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),FF=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.selected=n,o.deselected=i,o.mapBrowserEvent=r,o}return DF(e,t),e}(Ff),jF={},zF=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var i,r=e||{};if(n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=r.condition?r.condition:hC,n.addCondition_=r.addCondition?r.addCondition:sC,n.removeCondition_=r.removeCondition?r.removeCondition:sC,n.toggleCondition_=r.toggleCondition?r.toggleCondition:cC,n.multi_=!!r.multi&&r.multi,n.filter_=r.filter?r.filter:Xf,n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.style_=void 0!==r.style?r.style:function(){var t=$N();return Wf(t[Hg.POLYGON],t[Hg.LINE_STRING]),Wf(t[Hg.GEOMETRY_COLLECTION],t[Hg.LINE_STRING]),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),n.features_=r.features||new Nb,r.layers)if("function"==typeof r.layers)i=r.layers;else{var o=r.layers;i=function(t){return Uf(o,t)}}else i=Xf;return n.layerFilter_=i,n.featureLayerAssociation_={},n}return DF(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[wp(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[wp(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(Pb,this.boundAddFeature_),this.features_.addEventListener(kb,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Pb,this.boundAddFeature_),this.features_.removeEventListener(kb,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){var n=this.getMap().getAllLayers().find((function(t){if(t instanceof wF&&t.getSource()&&t.getSource().hasFeature(e))return t}));n&&this.addFeatureLayerAssociation_(e,n)}},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=wp(t);e in jF||(jF[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var n=this.getMap().getInteractions().getArray(),i=n.length-1;i>=0;--i){var r=n[i];if(r!==this&&r instanceof e&&r.getStyle()&&-1!==r.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(r.getStyle())}var o=wp(t);t.setStyle(jF[o]),delete jF[o]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[wp(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,o=t.map,a=this.getFeatures(),s=[],h=[];if(r){Qf(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),h.push(t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var c=a.item(l),u=h.indexOf(c);u>-1?h.splice(u,1):(a.remove(c),s.push(c))}0!==h.length&&a.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!i||Uf(a.getArray(),t)?(n||i)&&Uf(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),h.push(t)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.length-1;f>=0;--f)a.remove(s[f]);a.extend(h)}return(h.length>0||s.length>0)&&this.dispatchEvent(new FF("select",h,s,t)),!0},e}(XM);const BF=zF;class UF extends QC{constructor(t){super(t)}addSelectEventHandler(t){const e=this.interaction.on("select",(({selected:e})=>t(e[0])));return()=>unByKey(e)}clear(){this.interaction.getFeatures().clear()}}var GF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),HF=function(t){function e(e,n,i){var r=t.call(this)||this;if(void 0!==i&&void 0===n)r.setFlatCoordinates(i,e);else{var o=n||0;r.setCenterAndRadius(e,o,i)}return r}return GF(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=t-r[0],a=e-r[1],s=o*o+a*a;if(s<i){if(0===s)for(var h=0;h<this.stride;++h)n[h]=r[h];else{var l=this.getRadius()/Math.sqrt(s);for(n[0]=r[0]+l*o,n[1]=r[1]+l*a,h=2;h<this.stride;++h)n[h]=r[h]}return n.length=this.stride,s}return i},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return rd(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return Hg.CIRCLE},e.prototype.intersectsExtent=function(t){if(Sd(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||pd(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(var r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,r=mm(i,0,t,this.stride);i[r++]=i[0]+e;for(var o=1,a=this.stride;o<a;++o)i[r++]=i[o];i.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),i=this.getStride();this.setCenter(Fg(n,0,n.length,i,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),i=this.getStride();this.setCenter(jg(n,0,n.length,i,t,e,n)),this.changed()},e}(cm);HF.prototype.transform;const WF=HF;var VF=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),qF="Point",YF="LineString",XF="Polygon",KF="Circle",ZF="drawstart",$F=function(t){function e(e,n){var i=t.call(this,e)||this;return i.feature=n,i}return VF(e,t),e}(Ff),QF=function(t){function e(e){var n=this,i=e;i.stopDown||(i.stopDown=Kf),(n=t.call(this,i)||this).on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=e.source?e.source:null,n.features_=e.features?e.features:null,n.snapTolerance_=e.snapTolerance?e.snapTolerance:12,n.type_=e.type,n.mode_=function(t){switch(t){case Hg.POINT:case Hg.MULTI_POINT:return qF;case Hg.LINE_STRING:case Hg.MULTI_LINE_STRING:return YF;case Hg.POLYGON:case Hg.MULTI_POLYGON:return XF;case Hg.CIRCLE:return KF;default:throw new Error("Invalid type: "+t)}}(n.type_),n.stopClick_=!!e.stopClick,n.minPoints_=e.minPoints?e.minPoints:n.mode_===XF?3:2,n.maxPoints_=n.mode_===KF?2:e.maxPoints?e.maxPoints:1/0,n.finishCondition_=e.finishCondition?e.finishCondition:Xf;var r=e.geometryFunction;if(!r){var o,a=n.mode_;a===KF?r=function(t,e,n){var i=e||new WF([NaN,NaN]),r=Ig(t[0]),o=hg(r,Ig(t[t.length-1]));i.setCenterAndRadius(r,Math.sqrt(o));var a=Pg();return a&&i.transform(n,a),i}:(a===qF?o=Hm:a===YF?o=Fm:a===XF&&(o=ay),r=function(t,e,n){return e?a===XF?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new o(t),e})}return n.geometryFunction_=r,n.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,n.overlay_=new wF({source:new IF({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:JF(),updateWhileInteracting:!0}),n.geometryName_=e.geometryName,n.condition_=e.condition?e.condition:lC,n.freehandCondition_,e.freehand?n.freehandCondition_=oC:n.freehandCondition_=e.freehandCondition?e.freehandCondition:cC,n.addChangeListener(WM,n.updateState_),n}return VF(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===ap&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==qF&&this.freehandCondition_(e);var n=e.type===Yb.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Yb.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Yb.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Yb.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=e.type===Yb.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===Yb.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Yb.DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,e)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new qb(Yb.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&this.mode_!==qF||(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,i=e[0]-n[0],r=e[1]-n[1],o=i*i+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_],r=this.mode_;if(r===qF)e=!0;else if(r===KF)e=2===this.sketchCoords_.length;else if(r===YF)n=this.sketchCoords_.length>this.minPoints_;else if(r===XF){var o=this.sketchCoords_;n=o[0].length>this.minPoints_,i=[o[0][0],o[0][o[0].length-2]]}if(n)for(var a=this.getMap(),s=0,h=i.length;s<h;s++){var l=i[s],c=a.getPixelFromCoordinate(l),u=t[0]-c[0],f=t[1]-c[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(u*u+f*f)<=p){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Ip(new Hm(t)),this.updateSketchFeatures_())},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new Ip);var e=t.getLinearRing(0),n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new Fm(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))},e.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===qF?this.sketchCoords_=t.slice():this.mode_===XF?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ip(new Fm(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new Ip,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new $F(ZF,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,i=this.getMap(),r=this.sketchFeature_.getGeometry(),o=i.getView().getProjection();this.mode_===qF?n=this.sketchCoords_:this.mode_===XF?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(i.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=t[0],n[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),r.getType()===Hg.POLYGON&&this.mode_!==XF?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,i=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),o=this.mode_;o===YF||o===KF?(this.finishCoordinate_=t.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),this.geometryFunction_(n,i,r)):o===XF&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(t.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,i,r)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;if(i===YF||i===KF){if((t=this.sketchCoords_).splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();var r=this.finishCoordinate_.slice();t[t.length-1]=r,this.createOrUpdateSketchPoint_(r)}this.geometryFunction_(t,e,n),e.getType()===Hg.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(i===XF){(t=this.sketchCoords_[0]).splice(-2,1);var o=this.sketchLine_.getGeometry();t.length>=2&&(r=t[t.length-2].slice(),t[t.length-1]=r,this.createOrUpdateSketchPoint_(r)),o.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,n)}1===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===YF?(e.pop(),this.geometryFunction_(e,n,i)):this.mode_===XF&&(e[0].pop(),this.geometryFunction_(e,n,i),e=n.getCoordinates()),this.type_===Hg.MULTI_POINT?t.setGeometry(new qm([e])):this.type_===Hg.MULTI_LINE_STRING?t.setGeometry(new Bm([e])):this.type_===Hg.MULTI_POLYGON&&t.setGeometry(new uy([e])),this.dispatchEvent(new $F("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new $F("drawabort",t))},e.prototype.appendCoordinates=function(t){var e,n=this.mode_,i=!this.sketchFeature_;if(i&&this.startDrawing_(t[0]),n===YF||n===KF)e=this.sketchCoords_;else{if(n!==XF)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&e.shift(),e.pop();for(var r=0;r<t.length;r++)this.addToDrawing_(t[r]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new Ip(new Hm(n)),this.updateSketchFeatures_(),this.dispatchEvent(new $F(ZF,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(eC);function JF(){var t=$N();return function(e,n){return t[e.getGeometry().getType()]}}const tj=QF;class ej extends QC{constructor(t){super(t)}addDrawEventHandler(t){const e=this.interaction.on("drawend",(({feature:e})=>t(e)));return()=>yp(e)}getExtent(){return this.geometry.getGeometry().getExtent()}}const nj=(t,e,n,i)=>{const r={style:e,type:t,geometryFunction:i};n>0&&(r.maxPoints=n);const o=new tj(r);return new ej(o)};var ij=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rj=[0,0,0,0],oj=[],aj="modifyend",sj=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.features=n,r.mapBrowserEvent=i,r}return ij(e,t),e}(Ff),hj=function(t){function e(e){var n,i,r=t.call(this,e)||this;if(r.on,r.once,r.un,r.boundHandleFeatureChange_=r.handleFeatureChange_.bind(r),r.condition_=e.condition?e.condition:pC,r.defaultDeleteCondition_=function(t){return function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(t)&&hC(t)},r.deleteCondition_=e.deleteCondition?e.deleteCondition:r.defaultDeleteCondition_,r.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:oC,r.vertexFeature_=null,r.vertexSegments_=null,r.lastPixel_=[0,0],r.ignoreNextSingleClick_=!1,r.featuresBeingModified_=null,r.rBush_=new MF,r.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.snappedToVertex_=!1,r.changingFeature_=!1,r.dragSegments_=[],r.overlay_=new wF({source:new IF({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=$N(),function(t,e){return i[Hg.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r)},r.source_=null,r.hitDetection_=null,e.features?n=e.features:e.source&&(r.source_=e.source,n=new Nb(r.source_.getFeatures()),r.source_.addEventListener(CF,r.handleSourceAdd_.bind(r)),r.source_.addEventListener(SF,r.handleSourceRemove_.bind(r))),!n)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(r.hitDetection_=e.hitDetection),r.features_=n,r.features_.forEach(r.addFeature_.bind(r)),r.features_.addEventListener(Pb,r.handleFeatureAdd_.bind(r)),r.features_.addEventListener(kb,r.handleFeatureRemove_.bind(r)),r.lastPointerEvent_=null,r.delta_=[0,0],r.snapToPointer_=void 0===e.snapToPointer?!r.hitDetection_:e.snapToPointer,r}return ij(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),t.addEventListener(op,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Nb;for(var n=this.featuresBeingModified_.getArray(),i=0,r=e.length;i<r;++i)for(var o=e[i],a=0,s=o.length;a<s;++a){var h=o[a].feature;h&&-1===n.indexOf(h)&&this.featuresBeingModified_.push(h)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new sj("modifystart",this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(op,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(var i=n.length-1;i>=0;--i){for(var r=n[i],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],a={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),a={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(Kp(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],a=0,s=o.length-1;a<s;++a){var h=o.slice(a,a+2),l={feature:t,geometry:e,depth:[i],index:a,segment:h};this.rBush_.insert(Kp(h),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],a=0,s=o.length-1;a<s;++a){var h=o.slice(a,a+2),l={feature:t,geometry:e,depth:[i],index:a,segment:h};this.rBush_.insert(Kp(h),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i)for(var o=n[i],a=0,s=o.length;a<s;++a)for(var h=o[a],l=0,c=h.length-1;l<c;++l){var u=h.slice(l,l+2),f={feature:t,geometry:e,depth:[a,i],index:l,segment:u};this.rBush_.insert(Kp(u),f)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),i={feature:t,geometry:e,index:0,segment:[n,n]},r={feature:t,geometry:e,index:1,segment:[n,n]},o=[i,r];i.featureSegments=o,r.featureSegments=o,this.rBush_.insert(ad(n),i);var a=e,s=Pg();if(s&&this.getMap()){var h=this.getMap().getView().getProjection();a=hy(a=a.clone().transform(s,h)).transform(h,s)}this.rBush_.insert(a.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i){var r=n[i];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t,e,n){var i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(t):(i=new Ip(new Hm(t)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",e),i.set("geometries",n),i},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Yb.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=Yb.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Yb.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[],r=0,o=this.dragSegments_.length;r<o;++r){var a=this.dragSegments_[r],s=a[0],h=s.feature;-1===n.indexOf(h)&&n.push(h);var l=s.geometry;-1===i.indexOf(l)&&i.push(l);for(var c=s.depth,u=void 0,f=s.segment,p=a[1];e.length<l.getStride();)e.push(f[p][e.length]);switch(l.getType()){case Hg.POINT:u=e,f[0]=e,f[1]=e;break;case Hg.MULTI_POINT:(u=l.getCoordinates())[s.index]=e,f[0]=e,f[1]=e;break;case Hg.LINE_STRING:(u=l.getCoordinates())[s.index+p]=e,f[p]=e;break;case Hg.MULTI_LINE_STRING:case Hg.POLYGON:(u=l.getCoordinates())[c[0]][s.index+p]=e,f[p]=e;break;case Hg.MULTI_POLYGON:(u=l.getCoordinates())[c[1]][c[0]][s.index+p]=e,f[p]=e;break;case Hg.CIRCLE:if(f[0]=e,f[1]=e,0===s.index)this.changingFeature_=!0,l.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var d=t.map.getView().getProjection(),g=lg(Ig(l.getCenter()),Ig(e)),m=Pg();if(m){var y=l.clone().transform(m,d);y.setRadius(g),g=y.transform(d,m).getRadius()}l.setRadius(g),this.changingFeature_=!1}}u&&this.setGeometryCoordinates_(l,u)}this.createOrUpdateVertexFeature_(e,n,i)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;var n=this.vertexFeature_;if(n){var i=t.map.getView().getProjection(),r=[],o=n.getGeometry().getCoordinates(),a=Kp([o]),s=this.rBush_.getInExtent(a),h={};s.sort(lj);for(var l=0,c=s.length;l<c;++l){var u=s[l],f=u.segment,p=wp(u.geometry),d=u.depth;if(d&&(p+="-"+d.join("-")),h[p]||(h[p]=new Array(2)),u.geometry.getType()!==Hg.CIRCLE||1!==u.index)if(!ag(f[0],o)||h[p][0])if(!ag(f[1],o)||h[p][1])wp(f)in this.vertexSegments_&&!h[p][0]&&!h[p][1]&&this.insertVertexCondition_(t)&&r.push(u);else{if((u.geometry.getType()===Hg.LINE_STRING||u.geometry.getType()===Hg.MULTI_LINE_STRING)&&h[p][0]&&0===h[p][0].index)continue;this.dragSegments_.push([u,1]),h[p][1]=u}else this.dragSegments_.push([u,0]),h[p][0]=u;else ag(uj(e,u,i),o)&&!h[p][0]&&(this.dragSegments_.push([u,0]),h[p][0]=u)}r.length&&this.willModifyFeatures_(t,[r]);for(var g=r.length-1;g>=0;--g)this.insertVertex_(r[g],o)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],i=n.geometry;if(i.getType()===Hg.CIRCLE){var r=i.getCenter(),o=n.featureSegments[0],a=n.featureSegments[1];o.segment[0]=r,o.segment[1]=r,a.segment[0]=r,a.segment[1]=r,this.rBush_.update(ad(r),o);var s=i,h=Pg();if(h){var l=t.map.getView().getProjection();s=hy(s=s.clone().transform(h,l)).transform(l,h)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(Kp(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new sj(aj,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,n){var i,r,o=this,a=n||e.getCoordinateFromPixel(t),s=e.getView().getProjection();if(this.hitDetection_){var h="object"==typeof this.hitDetection_?function(t){return t===o.hitDetection_}:void 0;e.forEachFeatureAtPixel(t,(function(t,e,n){if((n=n||t.getGeometry()).getType()===Hg.POINT&&Uf(o.features_.getArray(),t)){r=n;var a=n.getFlatCoordinates().slice(0,2);i=[{feature:t,geometry:n,segment:[a,a]}]}return!0}),{layerFilter:h})}if(!i){var l=Ag(Zp(Lg(ad(a,rj)),e.getView().getResolution()*this.pixelTolerance_,rj));i=this.rBush_.getInExtent(l)}if(i&&i.length>0){var c=i.sort((function(t,e){return cj(a,t,s)-cj(a,e,s)}))[0],u=c.segment,f=uj(a,c,s),p=e.getPixelFromCoordinate(f),d=lg(t,p);if(r||d<=this.pixelTolerance_){var g={};if(g[wp(u)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-a[0],this.delta_[1]=f[1]-a[1]),c.geometry.getType()===Hg.CIRCLE&&1===c.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[c.feature],[c.geometry]);else{var m=e.getPixelFromCoordinate(u[0]),y=e.getPixelFromCoordinate(u[1]),v=hg(p,m),_=hg(p,y);d=Math.sqrt(Math.min(v,_)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(f=v>_?u[1]:u[0]),this.createOrUpdateVertexFeature_(f,[c.feature],[c.geometry]);var x={};x[wp(c.geometry)]=!0;for(var w=1,b=i.length;w<b;++w){var M=i[w].segment;if(!(ag(u[0],M[0])&&ag(u[1],M[1])||ag(u[0],M[1])&&ag(u[1],M[0])))break;var C=wp(i[w].geometry);C in x||(x[C]=!0,g[wp(M)]=!0)}}return void(this.vertexSegments_=g)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var n,i=t.segment,r=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case Hg.MULTI_LINE_STRING:case Hg.POLYGON:(n=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case Hg.MULTI_POLYGON:(n=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case Hg.LINE_STRING:(n=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,n);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,s,a,1);var l={segment:[i[0],e],feature:r,geometry:o,depth:a,index:s};h.insert(Kp(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,i[1]],feature:r,geometry:o,depth:a,index:s+1};h.insert(Kp(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Yb.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new sj(aj,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1},e.prototype.removeVertex_=function(){var t,e,n,i,r,o,a,s,h,l,c,u=this.dragSegments_,f={},p=!1;for(r=u.length-1;r>=0;--r)c=wp((l=(n=u[r])[0]).feature),l.depth&&(c+="-"+l.depth.join("-")),c in f||(f[c]={}),0===n[1]?(f[c].right=l,f[c].index=l.index):1==n[1]&&(f[c].left=l,f[c].index=l.index+1);for(c in f){switch(h=f[c].right,a=f[c].left,(s=(o=f[c].index)-1)<0&&(s=0),t=e=(i=(l=void 0!==a?a:h).geometry).getCoordinates(),p=!1,i.getType()){case Hg.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(o,1),p=!0);break;case Hg.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case Hg.MULTI_POLYGON:t=t[l.depth[1]];case Hg.POLYGON:(t=t[l.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),s=t.length-1))}if(p){this.setGeometryCoordinates_(i,e);var d=[];if(void 0!==a&&(this.rBush_.remove(a),d.push(a.segment[0])),void 0!==h&&(this.rBush_.remove(h),d.push(h.segment[1])),void 0!==a&&void 0!==h){var g={depth:l.depth,feature:l.feature,geometry:l.geometry,index:s,segment:d};this.rBush_.insert(Kp(g.segment),g)}this.updateSegmentIndices_(i,o,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),u.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===n||void 0===r.depth||qf(r.depth,n))&&r.index>e&&(r.index+=i)}))},e}(eC);function lj(t,e){return t.index-e.index}function cj(t,e,n){var i=e.geometry;if(i.getType()===Hg.CIRCLE){var r=i;if(1===e.index){var o=Pg();o&&(r=r.clone().transform(o,n));var a=hg(r.getCenter(),Ig(t)),s=Math.sqrt(a)-r.getRadius();return s*s}}var h=Ig(t);return oj[0]=Ig(e.segment[0]),oj[1]=Ig(e.segment[1]),function(t,e){return hg(t,og(t,e))}(h,oj)}function uj(t,e,n){var i=e.geometry;if(i.getType()===Hg.CIRCLE&&1===e.index){var r=i,o=Pg();return o&&(r=r.clone().transform(o,n)),kg(r.getClosestPoint(Ig(t)))}var a=Ig(t);return oj[0]=Ig(e.segment[0]),oj[1]=Ig(e.segment[1]),kg(og(a,oj))}const fj=hj;class pj extends QC{constructor(t){super(t)}addModifyFeatureEvent(t){const e=this.interaction.on("modifyend",(({features:e})=>{for(let n=0;n<e.length;n++)t(e.get(n))}));return()=>unByKey(e)}}const dj={select:(t,e)=>{if(t instanceof AF){const n=new Nb,i=new BF({layers:[t.layer],style:e,features:n});return new UF(i)}},Select:UF,draw:nj,drawRegularPolygon:t=>nj("Circle",t,void 0,(function(t,e,n){var i=Kp([t[0],t[t.length-1]].map((function(t){return Ig(t)}))),r=[[gd(i),md(i),Md(i),bd(i),gd(i)]],o=e;o?o.setCoordinates(r):o=new ay(r);var a=Pg();return a&&o.transform(n,a),o})),Draw:ej,measure:(t,e,n)=>{const i=new IF,r=new wF({source:i,style:t}),o=new tj({style:t,source:i,type:"LineString"});let a,s=null;return o.on("drawstart",(({feature:t})=>{a=t,s=a.getGeometry().on("change",(t=>{const i=t.target;e.innerHTML=(t=>{let e=0;const i=t.getCoordinates();for(let t=0,r=i.length-1;t<r;++t)e+=rg(Mg(i[t],n,"EPSG:4326"),Mg(i[t+1],n,"EPSG:4326"));let r;return r=e>100?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m",r})(i)}))})),o.on("drawend",(t=>{yp(s),a=null;let e=i.getFeatures();for(let n=0,r=e.length;n<r;n++){let r=e[n];r!==t.feature&&i.removeFeature(r)}})),o.on("change:active",(t=>{let n=t.target.getActive(),o=t.target.getMap();e.parentElement.style.display=t.target.getActive()?"initial":"none",n||(o=null,i.clear()),r.setMap(o),e.innerHTML=""})),o.setActive(!1),new QC(o)},modify:(t,e,n)=>{let i=null,r=null;t instanceof AF?i=t.source:e&&(r=new Nb([e]),r.push(e));const o=new fj({style:n,source:i,features:r,deleteCondition:t=>cC(t)&&hC(t)});return new pj(o)},Modify:pj,link:(t,e)=>{const n=t.interaction,i=e.interaction,r=n.on("change:active",(t=>{i.getMap()&&i.getMap().removeInteraction(i),yp(r)}))}};const gj=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=TM(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new VN({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=TM(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}(),mj=t=>{const e=new YN({color:t,width:1});return[new JN({image:new HN({radius:8,stroke:e})}),new JN({image:new UN({stroke:e,points:4,radius:12,radius2:0,angle:0})})]},yj={style:t=>t,dragBox:()=>new JN({stroke:new YN({color:[48,154,228,1]}),fill:new VN({color:[48,154,228,.1]}),image:new HN({radius:7,fill:new VN({color:[48,154,228,.8]})})}),vector:()=>new JN({stroke:new YN({color:"#CCCCCC",width:1}),fill:new VN({color:"rgba(00, 255, 00, 0.2)"}),image:new HN({radius:7,fill:new VN({color:"rgba(00, 255, 00, 0.2)"})})}),draw:()=>{const t=new JN({fill:new VN({color:"rgba(14, 238, 35, 0.5)"}),stroke:new YN({color:"rgba(45, 154, 228, 0.5)",width:4}),image:new HN({radius:7,fill:new VN({color:"rgba(00, 255, 00, 0.5)"})})}),e=new JN({stroke:new YN({color:"rgba(45, 154, 228, 0.5)",width:8})}),n=new JN({fill:new VN({color:"rgba(00, 255, 00, 0.5)"}),stroke:new YN({color:"#CCCCCC",width:2}),image:new HN({radius:7,fill:new VN({color:"rgba(255, 00, 00, 0.5)"})})});return(i,r)=>{if(i){const r=i.getGeometry().getType();return"MultiPolygon"===r||"Polygon"===r?[t]:"MultiLineString"===r||"LineString"===r?[e]:[n]}return[]}},measure:()=>{const t=new JN({stroke:new YN({color:"rgba(45, 154, 228, 0.5)",width:4})}),e=new JN({fill:new VN({color:"rgba(00, 255, 00, 0.5)"}),stroke:new YN({color:"#CCCCCC",width:2}),image:new HN({radius:7,fill:new VN({color:"rgba(255, 00, 00, 0.5)"})})});return(n,i)=>{if(n){const i=n.getGeometry().getType();return"MultiLineString"===i||"LineString"===i?[t]:[e]}return[]}},featureHighlight:()=>{const t=new JN({fill:new VN({color:"rgba(255, 0, 0, 0.2)"}),stroke:new YN({color:"#AAAAAA",width:4,lineDash:[10,20]})}),e=new JN({stroke:new YN({color:"rgba(255, 0, 0, 0.2)",width:8})}),n=new JN({image:new HN({radius:7,stroke:new YN({color:"rgba(50, 50, 50, 0.90)"}),fill:new VN({color:"rgba(235, 235, 235, 0.25)"})})});return(i,r)=>{if(i){const r=i.getGeometry().getType();return"MultiPolygon"===r||"Polygon"===r||"GeometryCollection"===r?[t]:"MultiLineString"===r||"LineString"===r?[e]:[n]}return[]}},pointHighlight:()=>{const t=new YN({color:"rgba(50, 50, 50, 0.90)"}),e=new VN({color:"rgba(235, 235, 235, 0.25)"}),n=new JN({fill:e,stroke:t}),i=new JN({image:new HN({radius:7,stroke:t,fill:e})});return(t,e)=>{if(t){const e=t.getGeometry().getType();return"MultiPolygon"===e||"Polygon"===e||"GeometryCollection"===e?[n]:[i]}return[]}},calculateSource:()=>new JN({fill:new VN({color:"rgba(255, 0, 0, 0.8)"}),stroke:new YN({color:"#AAAAAA",width:2}),image:new HN({radius:12,fill:new VN({color:"rgba(255, 00, 00, 0.8)"})})}),locate:()=>new JN({stroke:new YN({color:"rgba(255, 0, 0, 0.8)",width:2,lineDash:[5,10]})}),crossHair:()=>mj("#da1313"),getCrossHairStyle:mj,geolocationUnavailable:()=>(t=>{const e=new YN({color:"#da1313",width:1});return[new JN({image:new HN({radius:8,stroke:e})}),new JN({image:new UN({stroke:e,points:4,radius:8,radius2:0,angle:4})})]})(),dashed:()=>new JN({stroke:new YN({color:"#000",lineDash:[2,5],width:2})}),arrow:()=>{const t=new YN({color:"rgba(255, 0, 0, 0.8)",width:2});return(e,n)=>{const i=e.getGeometry(),r=[new JN({stroke:t})];return i.forEachSegment(((e,i)=>{var o=i[0]-e[0],a=i[1]-e[1],s=Math.atan2(a,o),h=10*n;const l=new Fm([i,[i[0]-h,i[1]+h]]);l.rotate(s,i);const c=new Fm([i,[i[0]-h,i[1]-h]]);c.rotate(s,i),r.push(new JN({geometry:l,stroke:t})),r.push(new JN({geometry:c,stroke:t}))})),r}},sketchStyle:t=>{const e=new VN({color:xa(t.fill)}),n=new YN({color:xa(t.stroke),width:t.strokeWidth||1});if(t.geometry instanceof Hm){let i=((t,e,n,i)=>{const r=e/2||10;switch(t){case"circle":return new HN({fill:n,stroke:i,radius:r});case"triangle":return new UN({fill:n,stroke:i,points:3,radius:r,angle:0});case"star":return new UN({fill:n,stroke:i,points:5,radius:r,radius2:.4*r,angle:0});case"cross":return new UN({fill:n,stroke:i,points:4,radius:r,radius2:0,angle:0});case"x":return new UN({fill:n,stroke:i,points:4,radius:r,radius2:0,angle:Math.PI/4});default:return new UN({fill:n,stroke:i,points:4,radius:r,angle:Math.PI/4})}})(t.mark,t.markSize,e,n);return new JN({image:i})}{let i=null;return t.lineLength&&(i=(t=>new gj({text:t,placement:"line",font:"16px sans-serif",fill:new VN({color:"#000000"}),stroke:new YN({color:"#fff",width:3})}))(t.lineLength)),new JN({fill:e,stroke:n,text:i})}},sketchLabel:t=>{const e=new VN({color:xa(t.fill)}),n=new gj({text:t.text,fill:e,rotation:t.rotation,font:t.font});return new JN({text:n})}},vj=(t,e,n)=>rg(Mg(t,n,"EPSG:4326"),Mg(e,n,"EPSG:4326")),_j={get:gg,transform:Mg,transformExtent:Cg,register:(t,e)=>{CR.defs(t,e),SR(CR)},haversineDistance:vj},xj={extend:ld,buffer:Zp,createEmpty:id,getCenter:yd};var wj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),bj=function(t){function e(){return t.call(this)||this}return wj(e,t),e.prototype.getType=function(){return Qg},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Mj(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return _p()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Mj(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return _p()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Mj(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return _p()},e.prototype.readProjection=function(t){return this.readProjectionFromText(Mj(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return _p()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return _p()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return _p()},e}(Xg);function Mj(t){return"string"==typeof t?t:""}const Cj=bj;var Sj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ej={POINT:Hm,LINESTRING:Fm,POLYGON:ay,MULTIPOINT:qm,MULTILINESTRING:Bm,MULTIPOLYGON:uy},Tj="EMPTY",Oj={};for(var Pj in Hg)Oj[Pj]=Hg[Pj].toUpperCase();var kj=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:i,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),Ij=function(){function t(t){this.lexer_=t,this.token_={position:0,type:0},this.layout_=im}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=im,e=this.token_;if(this.isTokenType(1)){var n=e.value;"Z"===n?t=rm:"M"===n?t=om:"ZM"===n&&(t=am),t!==im&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){if(this.match(2)){var t;if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&this.token_.value==Tj;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;this.layout_=this.parseGeometryLayout_();var n=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==e){if(n)return new Yg([]);var i=this.parseGeometryCollectionText_();return new Yg(i)}var r=Ej[e];if(!r)throw new Error("Invalid geometry type: "+e);var o=void 0;if(n)o="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":o=this.parsePointText_();break;case"LINESTRING":o=this.parseLineStringText_();break;case"POLYGON":o=this.parsePolygonText_();break;case"MULTIPOINT":o=this.parseMultiPointText_();break;case"MULTILINESTRING":o=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":o=this.parseMultiPolygonText_()}return new r(o,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),Aj=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.splitCollection_=void 0!==i.splitCollection&&i.splitCollection,n}return Sj(e,t),e.prototype.parse_=function(t){var e=new kj(t);return new Ij(e).parse()},e.prototype.readFeatureFromText=function(t,e){var n=this.readGeometryFromText(t,e),i=new Ip;return i.setGeometry(n),i},e.prototype.readFeaturesFromText=function(t,e){for(var n,i=this.readGeometryFromText(t,e),r=[],o=0,a=(n=this.splitCollection_&&i.getType()==Hg.GEOMETRY_COLLECTION?i.getGeometriesArray():[i]).length;o<a;++o){var s=new Ip;s.setGeometry(n[o]),r.push(s)}return r},e.prototype.readGeometryFromText=function(t,e){return Kg(this.parse_(t),!1,e)},e.prototype.writeFeatureText=function(t,e){var n=t.getGeometry();return n?this.writeGeometryText(n,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].getGeometry());var o=new Yg(n);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return Fj(Kg(t,!0,e))},e}(Cj);function Lj(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function Rj(t){for(var e=t.getCoordinates(),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(",")}function Nj(t){for(var e=[],n=t.getLinearRings(),i=0,r=n.length;i<r;++i)e.push("("+Rj(n[i])+")");return e.join(",")}var Dj={Point:Lj,LineString:Rj,Polygon:Nj,MultiPoint:function(t){for(var e=[],n=t.getPoints(),i=0,r=n.length;i<r;++i)e.push("("+Lj(n[i])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],n=t.getLineStrings(),i=0,r=n.length;i<r;++i)e.push("("+Rj(n[i])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],n=t.getPolygons(),i=0,r=n.length;i<r;++i)e.push("("+Nj(n[i])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],n=t.getGeometries(),i=0,r=n.length;i<r;++i)e.push(Fj(n[i]));return e.join(",")}};function Fj(t){var e=t.getType(),n=(0,Dj[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var i=function(t){var e=t.getLayout(),n="";return e!==rm&&e!==am||(n+="Z"),e!==om&&e!==am||(n+="M"),n}(t);i.length>0&&(e+=" "+i)}return 0===n.length?e+" "+Tj:e+"("+n+")"}const jj=Aj,zj=(t,e)=>{let n=0;const i=t.getCoordinates();for(let t=0,r=i.length-1;t<r;++t)n+=vj(i[t],i[t+1],e);return n},Bj={convertLineString:t=>new Fm(t),convertMultiLineString:t=>new Bm(t),convertPoint:t=>new Hm(t),convertMultiPoint:t=>{const e=new qm([]);for(let n=0;n<t.length;n++)e.appendPoint(t[n]);return e},convertPolygon:t=>new ay(t),convertMultiPolygon:t=>new uy(t),convertGeometryCollection:t=>new Yg(t),fromWKT:(t,e,n)=>{try{return(new jj).readGeometry(t,{dataProjection:e,featureProjection:n})}catch(t){console.warn(t)}},toWKT:(t,e,n)=>(new jj).writeGeometry(t,{dataProjection:e,featureProjection:n}),fromGeoJSON:(t,e,n)=>{try{return(new my).readGeometry(t,{dataProjection:e,featureProjection:n})}catch(t){console.warn(t)}},getLength:zj,getLengthM:(t,e)=>{const n=zj(t,e);let i;return i=n>100?Math.round(n/1e3*100)/100+" km":Math.round(100*n)/100+" m",i},fromExtent:sy,bufferedPoint:(t,e)=>hy(new WF(t,e)),createMultiPoint:t=>{const e=t.getCoordinates();return new qm(e)}},Uj={fromGeometry:t=>new Ip({geometry:t}),fromGeoJSON:(t,e)=>(new my).readFeatures(t,{dataProjection:e})};function Gj(t,e){return Hj(t,e,[]).join("")}function Hj(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{var i=void 0;for(i=t.firstChild;i;i=i.nextSibling)Hj(i,e,n)}return n}function Wj(t,e){return function(n,i){var r=t.call(void 0!==e?e:this,n,i);void 0!==r&&i[i.length-1].push(r)}}function Vj(t,e,n){return function(i,r){var o=t.call(void 0!==n?n:this,i,r);if(void 0!==o){var a=r[r.length-1],s=void 0!==e?e:i.localName,h=void 0;s in a?h=a[s]:(h=[],a[s]=h),h.push(o)}}}function qj(t,e,n){return function(i,r){var o=t.call(void 0!==n?n:this,i,r);void 0!==o&&(r[r.length-1][void 0!==e?e:i.localName]=o)}}var Yj;function Xj(t,e,n){var i,r,o=void 0!==n?n:{};for(i=0,r=t.length;i<r;++i)o[t[i]]=e;return o}function Kj(t,e,n,i,r){return i.push(t),function(t,e,n,i){var r;for(r=e.firstElementChild;r;r=r.nextElementSibling){var o=t[r.namespaceURI];if(void 0!==o){var a=o[r.localName];void 0!==a&&a.call(i,r,n)}}}(e,n,i,r),i.pop()}var Zj=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=(n=t,(new DOMParser).parseFromString(n,"application/xml"));return this.readFromDocument(e)}return function(t){return"documentElement"in t}(t)?this.readFromDocument(t):this.readFromNode(t)}return null;var n},t.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},t.prototype.readFromNode=function(t){},t}();const $j=Zj;function Qj(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function Jj(t){return tz(Gj(t,!1))}function tz(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function ez(t){return nz(Gj(t,!1))}function nz(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function iz(t){return Gj(t,!1).trim()}function rz(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var oz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),az=[null,"http://www.opengis.net/wms"],sz=Xj(az,{Service:qj((function(t,e){return Kj({},cz,t,e)})),Capability:qj((function(t,e){return Kj({},hz,t,e)}))}),hz=Xj(az,{Request:qj((function(t,e){return Kj({},vz,t,e)})),Exception:qj((function(t,e){return Kj([],dz,t,e)})),Layer:qj((function(t,e){var n=Kj({},gz,t,e);return void 0===n.Layer?Object.assign(n,Sz(t,e)):n}))}),lz=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return oz(e,t),e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),Kj({version:this.version},sz,t,[])||null},e}($j),cz=Xj(az,{Name:qj(iz),Title:qj(iz),Abstract:qj(iz),KeywordList:qj(Pz),OnlineResource:qj(rz),ContactInformation:qj((function(t,e){return Kj({},uz,t,e)})),Fees:qj(iz),AccessConstraints:qj(iz),LayerLimit:qj(ez),MaxWidth:qj(ez),MaxHeight:qj(ez)}),uz=Xj(az,{ContactPersonPrimary:qj((function(t,e){return Kj({},fz,t,e)})),ContactPosition:qj(iz),ContactAddress:qj((function(t,e){return Kj({},pz,t,e)})),ContactVoiceTelephone:qj(iz),ContactFacsimileTelephone:qj(iz),ContactElectronicMailAddress:qj(iz)}),fz=Xj(az,{ContactPerson:qj(iz),ContactOrganization:qj(iz)}),pz=Xj(az,{AddressType:qj(iz),Address:qj(iz),City:qj(iz),StateOrProvince:qj(iz),PostCode:qj(iz),Country:qj(iz)}),dz=Xj(az,{Format:Wj(iz)}),gz=Xj(az,{Name:qj(iz),Title:qj(iz),Abstract:qj(iz),KeywordList:qj(Pz),CRS:Vj(iz),EX_GeographicBoundingBox:qj((function(t,e){var n=Kj({},yz,t,e);if(n){var i=n.westBoundLongitude,r=n.southBoundLatitude,o=n.eastBoundLongitude,a=n.northBoundLatitude;if(void 0!==i&&void 0!==r&&void 0!==o&&void 0!==a)return[i,r,o,a]}})),BoundingBox:Vj((function(t,e){var n=[tz(t.getAttribute("minx")),tz(t.getAttribute("miny")),tz(t.getAttribute("maxx")),tz(t.getAttribute("maxy"))],i=[tz(t.getAttribute("resx")),tz(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:i}})),Dimension:Vj((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Qj(t.getAttribute("multipleValues")),nearestValue:Qj(t.getAttribute("nearestValue")),current:Qj(t.getAttribute("current")),values:iz(t)}})),Attribution:qj((function(t,e){return Kj({},mz,t,e)})),AuthorityURL:Vj((function(t,e){var n=Ez(t,e);if(n)return n.name=t.getAttribute("name"),n})),Identifier:Vj(iz),MetadataURL:Vj((function(t,e){var n=Ez(t,e);if(n)return n.type=t.getAttribute("type"),n})),DataURL:Vj(Ez),FeatureListURL:Vj(Ez),Style:Vj((function(t,e){return Kj({},bz,t,e)})),MinScaleDenominator:qj(Jj),MaxScaleDenominator:qj(Jj),Layer:Vj(Sz)}),mz=Xj(az,{Title:qj(iz),OnlineResource:qj(rz),LogoURL:qj(Oz)}),yz=Xj(az,{westBoundLongitude:qj(Jj),eastBoundLongitude:qj(Jj),southBoundLatitude:qj(Jj),northBoundLatitude:qj(Jj)}),vz=Xj(az,{GetCapabilities:qj(Tz),GetMap:qj(Tz),GetFeatureInfo:qj(Tz)}),_z=Xj(az,{Format:Vj(iz),DCPType:Vj((function(t,e){return Kj({},xz,t,e)}))}),xz=Xj(az,{HTTP:qj((function(t,e){return Kj({},wz,t,e)}))}),wz=Xj(az,{Get:qj(Ez),Post:qj(Ez)}),bz=Xj(az,{Name:qj(iz),Title:qj(iz),Abstract:qj(iz),LegendURL:Vj(Oz),StyleSheetURL:qj(Ez),StyleURL:qj(Ez)}),Mz=Xj(az,{Format:qj(iz),OnlineResource:qj(rz)}),Cz=Xj(az,{Keyword:Wj(iz)});function Sz(t,e){var n=e[e.length-1],i=Kj({},gz,t,e);if(i){var r=Qj(t.getAttribute("queryable"));void 0===r&&(r=n.queryable),i.queryable=void 0!==r&&r;var o=nz(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded),i.cascaded=o;var a=Qj(t.getAttribute("opaque"));void 0===a&&(a=n.opaque),i.opaque=void 0!==a&&a;var s=Qj(t.getAttribute("noSubsets"));void 0===s&&(s=n.noSubsets),i.noSubsets=void 0!==s&&s;var h=tz(t.getAttribute("fixedWidth"));h||(h=n.fixedWidth),i.fixedWidth=h;var l=tz(t.getAttribute("fixedHeight"));return l||(l=n.fixedHeight),i.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in n){var e=i[t]||[];i[t]=e.concat(n[t])}})),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in i)){var e=n[t];i[t]=e}})),i}}function Ez(t,e){return Kj({},Mz,t,e)}function Tz(t,e){return Kj({},_z,t,e)}function Oz(t,e){var n=Ez(t,e);if(n){var i=[nz(t.getAttribute("width")),nz(t.getAttribute("height"))];return n.size=i,n}}function Pz(t,e){return Kj([],Cz,t,e)}const kz=lz;var Iz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Az=[null,"http://www.opengis.net/ows/1.1"],Lz=Xj(Az,{ServiceIdentification:qj((function(t,e){return Kj({},qz,t,e)})),ServiceProvider:qj((function(t,e){return Kj({},Yz,t,e)})),OperationsMetadata:qj((function(t,e){return Kj({},Gz,t,e)}))}),Rz=function(t){function e(){return t.call(this)||this}return Iz(e,t),e.prototype.readFromNode=function(t){return Kj({},Lz,t,[])||null},e}($j),Nz=Xj(Az,{DeliveryPoint:qj(iz),City:qj(iz),AdministrativeArea:qj(iz),PostalCode:qj(iz),Country:qj(iz),ElectronicMailAddress:qj(iz)}),Dz=Xj(Az,{Value:Vj((function(t,e){return iz(t)}))}),Fz=Xj(Az,{AllowedValues:qj((function(t,e){return Kj({},Dz,t,e)}))}),jz=Xj(Az,{Phone:qj((function(t,e){return Kj({},Hz,t,e)})),Address:qj((function(t,e){return Kj({},Nz,t,e)}))}),zz=Xj(Az,{HTTP:qj((function(t,e){return Kj({},Bz,t,e)}))}),Bz=Xj(Az,{Get:Vj((function(t,e){var n=rz(t);if(n)return Kj({href:n},Wz,t,e)})),Post:void 0}),Uz=Xj(Az,{DCP:qj((function(t,e){return Kj({},zz,t,e)}))}),Gz=Xj(Az,{Operation:function(t,e){var n=t.getAttribute("name"),i=Kj({},Uz,t,e);i&&(e[e.length-1][n]=i)}}),Hz=Xj(Az,{Voice:qj(iz),Facsimile:qj(iz)}),Wz=Xj(Az,{Constraint:Vj((function(t,e){var n=t.getAttribute("name");if(n)return Kj({name:n},Fz,t,e)}))}),Vz=Xj(Az,{IndividualName:qj(iz),PositionName:qj(iz),ContactInfo:qj((function(t,e){return Kj({},jz,t,e)}))}),qz=Xj(Az,{Abstract:qj(iz),AccessConstraints:qj(iz),Fees:qj(iz),Title:qj(iz),ServiceTypeVersion:qj(iz),ServiceType:qj(iz)}),Yz=Xj(Az,{ProviderName:qj(iz),ProviderSite:qj(rz),ServiceContact:qj((function(t,e){return Kj({},Vz,t,e)}))});const Xz=Rz;var Kz=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Zz=[null,"http://www.opengis.net/wmts/1.0"],$z=[null,"http://www.opengis.net/ows/1.1"],Qz=Xj(Zz,{Contents:qj((function(t,e){return Kj({},tB,t,e)}))}),Jz=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new Xz,e}return Kz(e,t),e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var n=this.owsParser_.readFromNode(t);return n?(n.version=e,(n=Kj(n,Qz,t,[]))||null):null},e}($j),tB=Xj(Zz,{Layer:Vj((function(t,e){return Kj({},eB,t,e)})),TileMatrixSet:Vj((function(t,e){return Kj({},hB,t,e)}))}),eB=Xj(Zz,{Style:Vj((function(t,e){var n=Kj({},nB,t,e);if(n){var i="true"===t.getAttribute("isDefault");return n.isDefault=i,n}})),Format:Vj(iz),TileMatrixSetLink:Vj((function(t,e){return Kj({},iB,t,e)})),Dimension:Vj((function(t,e){return Kj({},aB,t,e)})),ResourceURL:Vj((function(t,e){var n=t.getAttribute("format"),i=t.getAttribute("template"),r=t.getAttribute("resourceType"),o={};return n&&(o.format=n),i&&(o.template=i),r&&(o.resourceType=r),o}))},Xj($z,{Title:qj(iz),Abstract:qj(iz),WGS84BoundingBox:qj(cB),Identifier:qj(iz)})),nB=Xj(Zz,{LegendURL:Vj((function(t,e){var n={};return n.format=t.getAttribute("format"),n.href=rz(t),n}))},Xj($z,{Title:qj(iz),Identifier:qj(iz)})),iB=Xj(Zz,{TileMatrixSet:qj(iz),TileMatrixSetLimits:qj((function(t,e){return Kj([],rB,t,e)}))}),rB=Xj(Zz,{TileMatrixLimits:Wj((function(t,e){return Kj({},oB,t,e)}))}),oB=Xj(Zz,{TileMatrix:qj(iz),MinTileRow:qj(ez),MaxTileRow:qj(ez),MinTileCol:qj(ez),MaxTileCol:qj(ez)}),aB=Xj(Zz,{Default:qj(iz),Value:Vj(iz)},Xj($z,{Identifier:qj(iz)})),sB=Xj($z,{LowerCorner:Wj(uB),UpperCorner:Wj(uB)}),hB=Xj(Zz,{WellKnownScaleSet:qj(iz),TileMatrix:Vj((function(t,e){return Kj({},lB,t,e)}))},Xj($z,{SupportedCRS:qj(iz),Identifier:qj(iz),BoundingBox:qj(cB)})),lB=Xj(Zz,{TopLeftCorner:qj(uB),ScaleDenominator:qj(Jj),TileWidth:qj(ez),TileHeight:qj(ez),MatrixWidth:qj(ez),MatrixHeight:qj(ez)},Xj($z,{Identifier:qj(iz)}));function cB(t,e){var n=Kj([],sB,t,e);if(2==n.length)return Kp(n)}function uB(t,e){var n=iz(t).split(/\s+/);if(n&&2==n.length){var i=+n[0],r=+n[1];if(!isNaN(i)&&!isNaN(r))return[i,r]}}const fB=Jz,pB={wms:t=>(new kz).read(t),wmts:t=>{const e=(new fB).read(t),n=e.Contents.TileMatrixSet,i={};for(let t=0;t<n.length;t++){const e=n[t];e.projectionCode=e.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),i[e.Identifier]=e}const r=e.Contents.Layer;for(let t=0;t<r.length;t++){const e=r[t],n=e.TileMatrixSetLink,o=[];for(let t=0;t<n.length;t++){const e=n[t].TileMatrixSet;i[e]&&o.push(i[e])}e._TileSet=o}return e}},dB={MapControl:t=>new OR(t),layer:NF,interaction:dj,style:yj,projection:_j,extent:xj,geometry:Bj,feature:Uj,capabilities:pB},gB={getBrowserLanguage:()=>{var t=[];return window.navigator.languages?t=window.navigator.languages:window.navigator.language&&t.push(window.navigator.language),t}};var mB=a(560);const yB={md5:a.n(mB)()};(()=>{const t=localStorage.getItem("GeolinQ-Locale");if(t){const e=document.createElement("meta");e.name="gwt:property",e.content="locale="+t,document.getElementsByTagName("head")[0].appendChild(e)}})()})(),s})()}));
//# sourceMappingURL=geolinq.js.map